import{_ as L}from"./index.93c0bcf5.js";import{d as y,r as I,w as N,y as b,a as A,a1 as M,t as P,o as c,b as d,g as r,D as x,v,l as R,C as q,j as k,F as T,x as j,k as p,a2 as G}from"./vendor.fba62f44.js";import{i as O,u as W,_ as E}from"./index.a7a016cc.js";import{d as S}from"./WidgetsTool.7a0e192d.js";import{I as H}from"./@iconify/vue-exp.2703a4cd.js";import{u as J}from"./vue-router-exp.aea90ceb.js";import{i as K,j as Q,k as U}from"./IconService.68577bd3.js";import{L as w}from"./xframelib-exp.abb6dc89.js";import"./lodash-es-exp.5cb72cd8.js";import"./axios-exp.a055fae1.js";import"./WidgetsEvent.9f7b2658.js";const X="IconList",Y=y({name:X,components:{Icon:H},setup(){const e=O(),u=I({items:[{}],name:""}),o=I({hasNextPages:!0,hasPrevPages:!0,pageindex:1,pagesize:30,totalCount:0,isCard:!1}),_=t=>{o.pageindex=t,g()},h=t=>{o.pagesize=t,g()};function g(){e.searchValue===""?s("",e.curPointSet.prefix):e.iconEntrance==="onSet"?s(e.searchValue,e.curPointSet.prefix):s(e.searchValue,"")}async function f(t){const n=await K(t);n&&n.source===1&&(n.creator===m.name||m.name==="admin")&&(F.value=!0)}const s=(t,n)=>{console.log(t,n,"888888888"),Q(t,n,o.pageindex,o.pagesize).then(i=>{o.totalCount=i.totalCount,o.hasNextPages=i.hasNextPages,o.hasPrevPages=i.hasPrevPages,o.pageindex=i.pageIndex,o.totalCount=i.totalCount,u.items=i.items})},C=t=>{e.initListData(),e.pushEditData(t);const n=void 0;let i=.625*document.body.clientWidth;S({modalID:"IconConfig",extraData:{footer:null},width:i,rowData:n})};function a(t){S({modalID:"IconEdit",extraData:{title:"\u7F16\u8F91\u56FE\u6807",footer:null},width:800,rowData:t})}function D(t){e.pushIcon_toShop(t)}N([()=>e.searchValue,()=>e.searchIndex],([t,n],[i,z])=>{Number(n)===0?(e.searchValue===""?(o.pageindex=1,u.name="\u5168\u90E8\u56FE\u6807\u6570\u636E"):u.name=`\u641C\u7D22"${e.searchValue}"\u83B7\u53D6\u7684\u6570\u636E`,s(t,"")):Number(n)===2&&(e.searchValue===""?(o.pageindex=1,s("",e.curPointSet.prefix)):s(t,e.curPointSet.prefix))},{immediate:!1});const l=J();b(()=>{if(l.query.prefix){const t=l.query.prefix.toString();e.curPointSet.prefix=t,u.name=t,e.iconEntrance="onSet",s("",t),f(t);return}e.curPointSet.name!=""&&!e.searchValue&&(s("",e.curPointSet.prefix),o.totalCount=e.curPointSet.total,u.name=e.curPointSet.name)});const m=W();function $(t){return t.source===1&&(m.name==="admin"||t.creator===m.name)}function V(t){M.confirm({title:"\u60A8\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6807\u5417\uFF1F",onOk:()=>{U(t.prefix,t.name).then(n=>{n?(w.Message?.info("\u56FE\u6807\u5220\u9664\u6210\u529F\uFF01"),h(o.pagesize)):w.Message?.warn("\u56FE\u6807\u5220\u9664\u5931\u8D25\uFF01")}).catch(n=>{w.Message?.warn("\u56FE\u6807\u5220\u9664\u5931\u8D25\uFF01")})}})}const F=A(!1);function B(){const t=l.query.prefix?.toString();if(!t)return;S({modalID:"addIconsetData",extraData:{title:"\u6DFB\u52A0\u56FE\u6807\u6570\u636E"},rowData:t,width:700})}return{paginationData:o,pageChange:_,sizeChange:h,setData:u,iconClick:C,funShop:D,canDelete:$,doDelete:V,addClick:B,showAddRef:F,iconEditClick:a}}});const Z={class:"list"},ee={class:"cursetname"},te={class:"cursetTotal"},oe={class:"listtop"},ae={class:"iconlist"},ne={class:"textFlow",title:"item.name",style:{width:"100%","text-align":"center"}},se={class:"upup",style:{width:"100%",height:"100%"}},ie=["onClick"],ce=["onClick"],ue=["onClick"],re=["onClick"];function le(e,u,o,_,h,g){const f=G,s=P("Icon"),C=L;return c(),d("div",Z,[r("div",ee,x(e.setData.name),1),r("span",te,x(e.paginationData.totalCount),1),e.showAddRef?(c(),v(f,{key:0,class:"rightBtn",type:"primary",onClick:e.addClick},{default:R(()=>[q("\u6DFB\u52A0\u56FE\u6807")]),_:1},8,["onClick"])):k("",!0),r("div",oe,[r("ul",ae,[(c(!0),d(T,null,j(e.setData.items,(a,D)=>(c(),d("li",{key:D,class:"iconOuter"},[a.palette?(c(),v(s,{key:1,class:"iconVis",icon:a.prefix+":"+a.name,style:{width:"50px",height:"50px",cursor:"pointer"}},null,8,["icon"])):(c(),v(s,{key:0,class:"iconVis",icon:a.prefix+":"+a.name,color:a.color,style:{width:"50px",height:"50px",cursor:"pointer"}},null,8,["icon","color"])),r("div",ne,x(a.description??a.name),1),r("div",se,[e.canDelete(a)?(c(),d("div",{key:0,class:"shop",onClick:l=>e.doDelete(a)},[p(s,{icon:"ant-design:delete-outlined",width:"24",height:"24",color:"#ffffff"})],8,ie)):k("",!0),e.canDelete(a)?(c(),d("div",{key:1,class:"shop",onClick:l=>e.iconEditClick(a)},[p(s,{icon:"feather:edit",width:"20",height:"20",color:"#ffffff"})],8,ce)):k("",!0),r("div",{class:"shop",onClick:l=>e.funShop(a)},[p(s,{icon:"uil:shopping-cart",width:"24",height:"24",color:"#ffffff"})],8,ue),r("div",{class:"shop",onClick:l=>e.iconClick(a)},[p(s,{icon:"ant-design:eye-twotone",width:"20",height:"20",color:"#ffffff"})],8,re)])]))),128))])]),p(C,{pageindex:e.paginationData.pageindex,pagesize:e.paginationData.pagesize,totalCount:e.paginationData.totalCount,isCard:e.paginationData.isCard,class:"listBottom",onPageChange:e.pageChange,onSizeChange:e.sizeChange},null,8,["pageindex","pagesize","totalCount","isCard","onPageChange","onSizeChange"])])}const de=E(Y,[["render",le],["__scopeId","data-v-006c9b83"]]),pe="detailIconList",fe=y({name:pe,components:{IconList:de},setup(){}});const he={class:"outer"};function ge(e,u,o,_,h,g){const f=P("IconList");return c(),d("div",he,[p(f,{class:"iconContent"})])}const ye=E(fe,[["render",ge],["__scopeId","data-v-0752494f"]]);export{ye as default};
