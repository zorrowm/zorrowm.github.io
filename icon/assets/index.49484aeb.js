import{_ as A}from"./index.93c0bcf5.js";import{d as P,a as F,a0 as W,y as T,t as b,o as k,b as B,g as I,D as j,k as r,l as d,C,v as R,j as x,an as G,ao as K,ap as Q,a2 as q,r as J,Q as X,E as Y,F as Z,x as ee,ad as te}from"./vendor.fba62f44.js";import{_ as z}from"./VSwitch.433f46f5.js";import{_ as V,s as ne}from"./scrollRef.434eeb82.js";import{a as ae,b as oe}from"./IconService.68577bd3.js";import{l as N,_ as L,u as se,O as ue,k as re}from"./index.a7a016cc.js";import{T as S}from"./TableEvent.69ad174d.js";import{d as ie}from"./WidgetsTool.7a0e192d.js";import{I as O}from"./@iconify/vue-exp.2703a4cd.js";import{b as le}from"./vue-router-exp.aea90ceb.js";import{L as $}from"./xframelib-exp.abb6dc89.js";import{O as ce}from"./urlUtils.9fcd62bb.js";import"./lodash-es-exp.5cb72cd8.js";import"./layoutTool.5f32478f.js";import"./axios-exp.a055fae1.js";import"./WidgetsEvent.9f7b2658.js";const pe=P({name:"topFunBar",props:{title:{type:String,default:""},ifTask:{type:Boolean,default:!0}},components:{Icon:O},setup(e,{emit:t}){const a=F(""),c=F(""),m=N(),{status:_}=W(m),p=s=>{s==="searchWord"?t("topBarClick",s,a.value):s==="searchCategory"?t("topBarClick",s,c.value):(s==="reset"&&(a.value=""),t("topBarClick",s))};T(()=>{});function f(s){t("topBarClick","sourceChaged",_.value)}return{doClick:p,searchValue:a,categoryValue:c,status:_,radioChanged:f}}});const de={class:"topBox"},ge={class:"toptitle"},me={class:"top-button"},fe={class:"topright"};function _e(e,t,a,c,m,_){const p=G,f=K,s=Q,h=q,y=b("Icon");return k(),B("div",de,[I("span",ge,j(e.title),1),I("div",me,[r(f,{value:e.status,"onUpdate:value":t[0]||(t[0]=i=>e.status=i),onChange:e.radioChanged,"button-style":"solid"},{default:d(()=>[r(p,{value:-1},{default:d(()=>[C("\u5168\u90E8")]),_:1}),r(p,{value:0},{default:d(()=>[C("Iconify")]),_:1}),r(p,{value:1},{default:d(()=>[C("\u81EA\u5B9A\u4E49")]),_:1}),r(p,{value:2},{default:d(()=>[C("IconFont")]),_:1})]),_:1},8,["value","onChange"])]),I("div",fe,[r(s,{value:e.categoryValue,"onUpdate:value":t[1]||(t[1]=i=>e.categoryValue=i),placeholder:"\u5206\u7C7B\u5173\u952E\u5B57",allowClear:!0,style:{width:"150px","margin-right":"10px"},onSearch:t[2]||(t[2]=i=>e.doClick("searchCategory"))},null,8,["value"]),r(s,{value:e.searchValue,"onUpdate:value":t[3]||(t[3]=i=>e.searchValue=i),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57",allowClear:!0,style:{width:"200px","margin-right":"10px"},onSearch:t[4]||(t[4]=i=>e.doClick("searchWord"))},null,8,["value"]),r(h,{onClick:t[5]||(t[5]=i=>e.doClick("reset"))},{default:d(()=>[C("\u91CD\u7F6E")]),_:1}),e.ifTask?(k(),R(h,{key:0,type:"primary",style:{"margin-right":"10px"},onClick:t[6]||(t[6]=i=>e.doClick("creatNew"))},{icon:d(()=>[r(y,{icon:"ant-design:plus-outlined"})]),default:d(()=>[C(" \u65B0\u5EFA\u56FE\u6807\u5E93 ")]),_:1})):x("",!0)])])}const he=L(pe,[["render",_e],["__scopeId","data-v-7c1ca29e"]]),Ce=[],ke=[{value:"preview",name:"\u67E5\u770B",icon:"ant-design:eye-outlined"},{value:"add",name:"\u6DFB\u52A0",icon:"ant-design:plus-circle-outlined"},{value:"delete",name:"\u5220\u9664",icon:"ant-design:delete-outlined",isdelete:!0}];function ye(){return ke}function ve(e=!0){return Ce}const Ie=[{title:"\u524D\u7F00",dataIndex:"prefix",align:"center",width:100},{title:"\u540D\u79F0",dataIndex:"name",align:"center",width:150},{title:"\u6240\u5C5E\u5206\u7C7B",dataIndex:"category",align:"center",width:150},{title:"\u6240\u5C5E\u6570\u636E\u96C6",dataIndex:"source",align:"center",width:100,customCell:(e,t,a)=>{let c="";switch(e.source){case 0:c="Iconify";break;case 1:c="\u81EA\u5B9A\u4E49";break;case 2:c="IconFont";break}return{innerHTML:c}}},{title:"\u56FE\u6807\u6570",dataIndex:"total",align:"center",width:80},{title:"\u5F69\u8272",dataIndex:"palette",align:"center",width:60,customCell:(e,t,a)=>({innerHTML:e.palette?"<b>\u662F</b>":"\u5426"})},{title:"\u521B\u5EFA\u4EBA",dataIndex:"creator",align:"center",width:90},{title:"\u793A\u4F8B\u6570\u636E",dataIndex:"samples",align:"center",key:"samples"},{title:"\u64CD\u4F5C",align:"center",width:80,key:"operation",fixed:"right"}],we=P({name:"IconsetList",components:{IcontTopFunBar:he,Pagination:A,ActionMenu:V,Icon:O,VSwitch:z},props:{},setup(){const e=N(),t=F([]),a=J({tableData:[],category:"",PageIndex:1,PageSize:10,totalCount:0,keyword:"",sortname:"",sortway:0}),m=F(new Map),_=(n,o)=>{switch(n){case"searchWord":i(o);break;case"searchCategory":a.category=o,l();break;case"creatNew":p("creatNew");break;case"reset":U();break;case"sourceChaged":a.PageIndex=1,l();break}};function p(n,o){let u="",v;switch(n){case"creatNew":u="createIconSet",v={title:"\u521B\u5EFA\u56FE\u6807\u5E93"};break;case"add":u="addIconsetData",v={title:`\u5411${o?.name}\u6DFB\u52A0\u6570\u636E`},o=o.prefix;break}u&&ie({modalID:u,extraData:v,rowData:o,width:700})}const f=(n,o)=>{switch(n){case"preview":M(n,o);break;case"delete":ae(o.prefix).then(u=>{u?($.Message?.msg("\u5220\u9664\u56FE\u6807\u96C6\u6210\u529F\uFF01"),l()):$.Message?.warn("\u5220\u9664\u56FE\u6807\u96C6\u5931\u8D25\uFF01")});break;case"add":p(n,o);break}},s=le(),h=n=>{a.PageSize=n,l()},y=n=>{a.PageIndex=n,l()},i=async n=>{a.keyword=n,a.PageIndex=1,l()},E=se();function w(n){const o=n.source;let u=[...ye()];return o===0?(u.pop(),u.pop(),u):(n.creator!=E.name&&E.name!="admin"&&u.pop(),o===2&&u.splice(1,1),u)}function g(n){const o=n.countdata!=0;return ve(o)}function l(){oe(a.keyword,a.category,e.status,a.PageIndex,a.PageSize).then(n=>{t.value=[],t.value=n.items,a.totalCount=n.totalCount,setTimeout(()=>{m.value.clear();for(const o of t.value)H(o)},.5)})}function U(){a.keyword="",a.category="",a.PageIndex=1,a.PageSize=10,l()}function M(n,o){ce(s,"/detail",{prefix:o.prefix})}function H(n){return new Promise((o,u)=>{if(n.samples){const D=n.prefix;var v=n.samples?.split(",");m.value.set(D,v),o(!0)}})}return T(()=>{ue(S.RefeshTable,l),l()}),X(()=>{re(S.RefeshTable,l)}),{topBarClick:_,columns:Ie,...Y(a),state:m,sizeChange:h,pageChange:y,doActionClick:f,getRightDefaultMenus:w,getRightMoreMenus:g,scrollRef:ne,tableData:t,controlShow:M}}}),Be={style:{"margin-right":"5px"}},Fe=I("div",null,null,-1);function Ee(e,t,a,c,m,_){const p=b("IcontTopFunBar"),f=V,s=b("Icon"),h=z,y=te,i=A;return k(),B("div",null,[r(p,{title:"\u56FE\u6807\u5E93\u5217\u8868",onTopBarClick:e.topBarClick},null,8,["onTopBarClick"]),I("div",null,[r(y,{size:"small",columns:e.columns,"data-source":e.tableData,pagination:!1,rowKey:"prefix",scroll:e.scrollRef},{bodyCell:d(({text:E,column:w,record:g})=>[w.key?(k(),R(h,{key:0,case:w.key},{operation:d(()=>[r(f,{currentRow:g,onDoActionClick:e.doActionClick,"default-menus":e.getRightDefaultMenus(g),"append-menus":e.getRightMoreMenus(g)},null,8,["currentRow","onDoActionClick","default-menus","append-menus"])]),samples:d(()=>[g.samples?(k(!0),B(Z,{key:0},ee(e.state.get(g.prefix),l=>(k(),B("span",Be,[r(s,{icon:g.prefix+":"+l,width:"16",height:"16"},null,8,["icon"])]))),256)):x("",!0)]),_:2},1032,["case"])):x("",!0)]),_:1},8,["columns","data-source","scroll"]),r(i,{style:{"text-align":"right","margin-top":"5px"},totalCount:e.totalCount,pagesize:e.PageSize,pageindex:e.PageIndex,onPageChange:e.pageChange,onSizeChange:e.sizeChange},null,8,["totalCount","pagesize","pageindex","onPageChange","onSizeChange"])]),Fe])}const He=L(we,[["render",Ee]]);export{He as default};
