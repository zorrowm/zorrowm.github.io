import{d as k,au as R,at as M,y as O,Q as T,a as w,r as K,t as L,o as c,v as b,l as o,k as a,C as D,g as U,aG as P,aH as q,aC as H,aN as N,aL as j,ao as J,aI as $,aD as V,aO as G,aM as Q,aE as z}from"./vendor.fba62f44.js";import{O as W,k as X,E as B,_ as Y}from"./index.a7a016cc.js";import{L as p}from"./xframelib-exp.abb6dc89.js";import{m as Z,p as x,I as ee,q as ae,r as ue}from"./IconService.68577bd3.js";import{I as te}from"./@iconify/vue-exp.2703a4cd.js";import{T as C}from"./TableEvent.69ad174d.js";import"./lodash-es-exp.5cb72cd8.js";import"./vue-router-exp.aea90ceb.js";import"./axios-exp.a055fae1.js";const y="createIconSet";let oe;const I={validateForm:oe,name:y,props:{data:R().def(!1),extra:M().isRequired},components:{Icon:te},setup(e,{emit:u}){function S(s){s?F():v.value.resetFields()}O(()=>{g(),W(y,S)}),T(()=>{X(y,S)});const v=w(),n=K({cid:"",prefix:"",name:"",category:"\u65E0",left:0,top:0,width:1024,height:1024,palette:!1,isdefault:!1,dragger:[]});async function h(s,l){return l?await ue(l)?Promise.reject("\u524D\u7F00\u540D\u5DF2\u7ECF\u5B58\u5728!"):Promise.resolve():Promise.reject("\u8BF7\u8F93\u5165\u552F\u4E00\u524D\u7F00\u540D!")}const d={prefix:[{required:!0,validator:h,trigger:"change"}]},r=w(1),m=w([]),g=async()=>{m.value.length=0;let s=await Z("");for(let l=0;l<s.length;l++){let f={value:"",label:""};f.value=s[l],f.label=s[l],m.value.push(f)}};I.validateForm=()=>r.value===1?v.value.validate():Promise.resolve(!0);function F(){switch(r.value){case 1:let s={name:n.name,prefix:n.prefix,category:n.category,left:n.left,top:n.top,width:n.width,height:n.height,palette:n.palette};ae(s).then(l=>{l?(p.Message?.success("\u521B\u5EFA\u56FE\u6807\u5E93\u6210\u529F\uFF01"),B(C.RefeshTable,!0)):p.Message?.warn("\u521B\u5EFA\u56FE\u6807\u5E93\u5931\u8D25\uFF01")}).catch(l=>{p.Message?.warn("\u521B\u5EFA\u56FE\u6807\u5E93\u5931\u8D25:"+l.message)});break;case 0:ee(i,n.isdefault).then(l=>{p.Message?.info(JSON.stringify(l)),B(C.RefeshTable,!0)}).catch(l=>{p.Message?.warn("\u521B\u5EFA\u56FE\u6807\u5E93\u5931\u8D25:"+l.message)});break;case 2:x(n.cid,n.prefix,n.category).then(l=>{l?(p.Message?.success("\u521B\u5EFA\u56FE\u6807\u5E93\u6210\u529F\uFF01"),B(C.RefeshTable,!0)):p.Message?.warn("\u521B\u5EFA\u56FE\u6807\u5E93\u5931\u8D25\uFF01")}).catch(l=>{p.Message?.warn("\u521B\u5EFA\u56FE\u6807\u5E93\u5931\u8D25:"+l.message)});break}}const _=s=>{const l=n.dragger.indexOf(s),f=n.dragger.slice();f.splice(l,1),n.dragger=f};let i=[];return{rules:d,formState:n,formRef:v,labelCol:{span:6},wrapperCol:{span:14},onSubmit:F,optionsRef:m,activeKey:r,handleRemove:_,beforeUpload:s=>(n.dragger.push(s),i=n.dragger,i.length>1&&(p.Message?.info("\u4E0A\u4F20\u6587\u4EF6\u8D85\u8FC7\u6307\u5B9A\u957F\u5EA6"),i=i[0]),!1)}}},le=k(I),ne={class:"ant-upload-drag-icon"},re=U("p",{class:"ant-upload-text"},"\u70B9\u51FB\u9009\u62E9\u6216\u62D6\u62FD\u56FE\u6807\u5E93Json\u6587\u4EF6",-1);function se(e,u,S,v,n,h){const d=P,r=q,m=H,g=N,F=j,_=J,i=$,E=V,s=G,l=L("Icon"),f=Q,A=z;return c(),b(A,{activeKey:e.activeKey,"onUpdate:activeKey":u[13]||(u[13]=t=>e.activeKey=t)},{default:o(()=>[(c(),b(E,{key:1,tab:"\u81EA\u5B9A\u4E49"},{default:o(()=>[a(i,{validation:"",model:e.formState,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules,ref:"formRef"},{default:o(()=>[a(r,{label:"\u524D\u7F00\u540D",name:"prefix"},{default:o(()=>[a(d,{value:e.formState.prefix,"onUpdate:value":u[0]||(u[0]=t=>e.formState.prefix=t)},null,8,["value"])]),_:1}),a(r,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8F93\u5165\u552F\u4E00\u56FE\u6807\u5E93\u540D!"}]},{default:o(()=>[a(d,{value:e.formState.name,"onUpdate:value":u[1]||(u[1]=t=>e.formState.name=t)},null,8,["value"])]),_:1}),a(r,{label:"\u6240\u5C5E\u5206\u7C7B"},{default:o(()=>[a(m,{value:e.formState.category,"onUpdate:value":u[2]||(u[2]=t=>e.formState.category=t),"show-search":"",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9\u6240\u5C5E\u7C7B\u578B",options:e.optionsRef},null,8,["value","options"])]),_:1}),a(r,{label:"left"},{default:o(()=>[a(g,{value:e.formState.left,"onUpdate:value":u[3]||(u[3]=t=>e.formState.left=t)},null,8,["value"])]),_:1}),a(r,{label:"top"},{default:o(()=>[a(g,{value:e.formState.top,"onUpdate:value":u[4]||(u[4]=t=>e.formState.top=t)},null,8,["value"])]),_:1}),a(r,{label:"width"},{default:o(()=>[a(g,{value:e.formState.width,"onUpdate:value":u[5]||(u[5]=t=>e.formState.width=t),min:1},null,8,["value"])]),_:1}),a(r,{label:"height"},{default:o(()=>[a(g,{value:e.formState.height,"onUpdate:value":u[6]||(u[6]=t=>e.formState.height=t),min:1},null,8,["value"])]),_:1}),a(r,{label:"\u8272\u5F69"},{default:o(()=>[a(_,{value:e.formState.palette,"onUpdate:value":u[7]||(u[7]=t=>e.formState.palette=t)},{default:o(()=>[a(F,{value:!1},{default:o(()=>[D("\u5355\u8272")]),_:1}),a(F,{value:!0},{default:o(()=>[D("\u5F69\u8272")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1})),(c(),b(E,{key:0,tab:"Iconify\u56FE\u6807\u5E93json"},{default:o(()=>[a(i,{model:e.formState,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:o(()=>[a(r,{label:"\u662F\u5B98\u7F51\u56FE\u6807",name:"isdefault"},{default:o(()=>[a(s,{checked:e.formState.isdefault,"onUpdate:checked":u[8]||(u[8]=t=>e.formState.isdefault=t)},null,8,["checked"])]),_:1}),a(r,{label:"\u56FE\u6807\u5E93Json\u6587\u4EF6"},{default:o(()=>[a(r,{name:"dragger","no-style":""},{default:o(()=>[a(f,{fileList:e.formState.dragger,"onUpdate:fileList":u[9]||(u[9]=t=>e.formState.dragger=t),name:"files","before-upload":e.beforeUpload,onRemove:e.handleRemove,accept:".svg",multiple:!1},{default:o(()=>[U("p",ne,[a(l,{icon:"ant-design:inbox-outlined",width:"24"})]),re]),_:1},8,["fileList","before-upload","onRemove"])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1})),(c(),b(E,{key:2,tab:"IconFont"},{default:o(()=>[a(i,{model:e.formState,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules},{default:o(()=>[a(r,{label:"cid\u7F16\u7801",name:"cid",rules:[{required:!0,message:"\u8BF7\u8F93\u5165cid\u6570\u5B57!"}]},{default:o(()=>[a(d,{value:e.formState.cid,"onUpdate:value":u[10]||(u[10]=t=>e.formState.cid=t)},null,8,["value"])]),_:1}),a(r,{label:"\u524D\u7F00\u540D",name:"prefix"},{default:o(()=>[a(d,{value:e.formState.prefix,"onUpdate:value":u[11]||(u[11]=t=>e.formState.prefix=t)},null,8,["value"])]),_:1}),a(r,{label:"\u6240\u5C5E\u5206\u7C7B"},{default:o(()=>[a(m,{value:e.formState.category,"onUpdate:value":u[12]||(u[12]=t=>e.formState.category=t),"show-search":"",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9\u6240\u5C5E\u7C7B\u578B",options:e.optionsRef},null,8,["value","options"])]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1}))]),_:1},8,["activeKey"])}const ce=Y(le,[["render",se]]);export{ce as default};
