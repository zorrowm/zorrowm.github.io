import{d as $,at as w,t as R,o as i,b as f,v as c,l as p,g as _,k as g,D as k,F as y,x as W,av as L,j as b,ak as D,aw as z,ax as P,r as U,c as V,w as S,E as x,al as A,a0 as E,a as M,y as F,ay as j,m as O,az as T}from"./vendor.fba62f44.js";import{I as q}from"./@iconify/vue-exp.2703a4cd.js";import{_ as v,e as G,a as H}from"./index.a7a016cc.js";import{u as J,b as Q}from"./vue-router-exp.aea90ceb.js";import{L as X}from"./xframelib-exp.abb6dc89.js";import"./lodash-es-exp.5cb72cd8.js";import"./axios-exp.a055fae1.js";const Y=$({name:"menu-item",components:{Icon:q},props:{menuInfo:w()},setup(e){function n(u){return u?.sort((a,s)=>{let o=0,l=0;return a.meta&&a.meta.index!=null&&(o=Number(a.meta.index)),s.meta&&s.meta.index!=null&&(l=Number(s.meta.index)),o-l})}return{getSortedItems:n}}});const Z={class:"anticon"},ee={class:"iconClass"},ne={style:{"padding-left":"15px"}},te={class:"anticon"},se={class:"iconClass"};function oe(e,n,u,r,a,s){const o=R("Icon"),l=D,t=R("menu-item",!0),d=z;return e.menuInfo.meta.hidden?b("",!0):(i(),f(y,{key:0},[e.menuInfo.children?.length?(i(),c(d,L({key:e.menuInfo.name},e.$attrs),{title:p(()=>[_("span",Z,[g(o,{icon:e.menuInfo.meta.icon},null,8,["icon"])]),_("span",ee,k(e.menuInfo.meta.title),1)]),default:p(()=>[(i(!0),f(y,null,W(e.getSortedItems(e.menuInfo.children),m=>(i(),f(y,{key:m.name},[m.children?(i(),c(t,{"menu-info":m,key:m.name},null,8,["menu-info"])):(i(),c(l,{key:m.name},{default:p(()=>[_("span",ne,k(m.meta.title),1)]),_:2},1024))],64))),128))]),_:1},16)):(i(),c(l,{key:e.menuInfo.name},{default:p(()=>[_("span",te,[g(o,{icon:e.menuInfo.meta.icon},null,8,["icon"])]),_("span",se,k(e.menuInfo.meta.title),1)]),_:1}))],64))}const N=v(Y,[["render",oe]]),ae=$({components:{MenuItem:N},props:{collapsed:{type:Boolean},layoutName:P().def("BackLayout")},setup(e){const n=J(),u=Q(),r=e.layoutName,a=()=>[n.matched[1]?.name],s=U({openKeys:a(),selectedKeys:[n.name]}),o=V(()=>{const t=G();if(!t)return[];const d=t.find(m=>m.name===r)?.children;return d&&d.sort((h,I)=>{let C=0,K=0;return h.meta&&h.meta.index!=null&&(C=Number(h.meta.index)),I.meta&&I.meta.index!=null&&(K=Number(I.meta.index)),C-K})});S(()=>e.collapsed,t=>{s.openKeys=t?[]:a(),s.selectedKeys=[n.name]}),S(()=>n.fullPath,()=>{n.name=="login"||e.collapsed||(s.openKeys=a(),s.selectedKeys=[n.name],X.Logger().debug(s.openKeys,"openKeys"))});const l=({item:t,key:d,keyPath:m})=>{/http(s)?:/.test(d)?window.open(d):u.push({name:d})};return{...x(s),clickMenuItem:l,menus:o}}});function le(e,n,u,r,a,s){const o=N,l=A;return i(),f("div",null,[g(l,{"open-keys":e.openKeys,"onUpdate:openKeys":n[0]||(n[0]=t=>e.openKeys=t),"selected-keys":e.selectedKeys,"onUpdate:selectedKeys":n[1]||(n[1]=t=>e.selectedKeys=t),mode:"inline",collapsed:e.collapsed,onClick:e.clickMenuItem,class:"menu"},{default:p(()=>[(i(!0),f(y,null,W(e.menus,t=>(i(),c(o,{key:t.name,"menu-info":t},null,8,["menu-info"]))),128))]),_:1},8,["open-keys","selected-keys","collapsed","onClick"])])}const B=v(ae,[["render",le]]),ie=$({name:"SideMenuWidget",components:{SideMenu:B},setup(e,n){const u=H(),{leftCollapsed:r}=E(u),a=M(u.menuSetting?.minWidth),s=M(u.menuSetting?.menuWidth);F(()=>{});const o=j(()=>r.value?"sideMenuDiv animate__animated animate__slideInLeft":"sideMenuDiv animate__animated  animate__zoomIn animate__faster");return{leftCollapsed:r,sideWidth:s,collapsedWidth:a,menuClass:o}}});function ue(e,n,u,r,a,s){const o=B,l=T;return i(),c(l,{collapsed:e.leftCollapsed,"onUpdate:collapsed":n[0]||(n[0]=t=>e.leftCollapsed=t),trigger:null,collapsible:"",class:O(e.menuClass),collapsedWidth:e.collapsedWidth,width:e.sideWidth},{default:p(()=>[g(o,{collapsed:e.leftCollapsed,"layout-name":"BackLayout"},null,8,["collapsed"])]),_:1},8,["collapsed","class","collapsedWidth","width"])}const ye=v(ie,[["render",ue]]);export{ye as default};
