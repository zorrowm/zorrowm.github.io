import{_ as P}from"./index.93c0bcf5.js";import{d as D,r as v,y as I,Q as z,E,o as k,b as S,k as i,g as M,l as h,v as R,j as x,ad as T}from"./vendor.fba62f44.js";import{_ as w}from"./VSwitch.433f46f5.js";import{_ as B,s as A}from"./scrollRef.434eeb82.js";import{T as b}from"./index.b7236f67.js";import{G as F,R as N}from"./IconService.68577bd3.js";import{j as $,O as L,k as V,_ as O}from"./index.a7a016cc.js";import{d as j}from"./WidgetsTool.7a0e192d.js";import{I as G}from"./@iconify/vue-exp.2703a4cd.js";import{L as p}from"./xframelib-exp.abb6dc89.js";import{c as H}from"./TabColumns.a669dbcd.js";import{T as y}from"./TableEvent.69ad174d.js";import"./lodash-es-exp.5cb72cd8.js";import"./layoutTool.5f32478f.js";import"./vue-router-exp.aea90ceb.js";import"./axios-exp.a055fae1.js";import"./WidgetsEvent.9f7b2658.js";const W=[{value:"preview",name:"\u67E5\u770B\u5173\u8054\u56FE\u6807\u96C6",icon:"ant-design:eye-outlined"},{value:"delete",name:"\u5220\u9664",icon:"ant-design:delete-outlined",isdelete:!0}];function K(){return W}const Q=D({name:"categoryList",components:{TopFunBar:b,Pagination:P,ActionMenu:B,Icon:G,VSwitch:w},props:{},setup(){const a=$(),t=v({tableData:[],PageIndex:1,PageSize:10,totalCount:0,totalPages:1,keyword:"",sortname:"",sortway:0}),f=(e,o)=>{switch(e){case"searchWord":c(o);break;case"creatNew":r("creatNew");break;case"reset":g();break;case"sourceChaged":t.PageIndex=1,n();break}};function r(e,o){let s="",u;switch(e){case"preview":s="lookData",u={title:"\u67E5\u770B\u6240\u542B\u56FE\u6807\u96C6",footer:null};break;case"creatNew":s="topEditServiceID",u={title:"\u65B0\u5EFA\u5206\u7C7B",isEdit:!1,isCopy:!1};break}s&&j({modalID:s,extraData:u,rowData:o,width:700})}const C=(e,o)=>{switch(e){case"preview":r(e,o);break;case"add":break;case"delete":l(e,o);break}};function n(){F(a.status,t.keyword,t.PageIndex,t.PageSize).then(e=>{e&&(t.totalPages=e.totalPages,t.totalCount=e.totalCount,t.tableData=e.items)})}function l(e,o){if(o.isdefault){p.Message?.warn("Iconify\u5B98\u65B9\u5206\u7C7B\u65E0\u6CD5\u5220\u9664\uFF01");return}N(o.name).then(s=>{s?(p.Message?.msg("\u5220\u9664\u5206\u7C7B\u6210\u529F!"),t.totalCount%t.PageSize===1&&t.PageIndex===t.totalPages&&(t.PageIndex-=1),n()):p.Message?.warn("\u5220\u9664\u5206\u7C7B\u5931\u8D25!")})}const c=async e=>{t.PageIndex=1,t.keyword=e,n()};function g(){a.status=-1,t.keyword="",t.PageIndex=1,t.PageSize=10,n()}const d=e=>{t.PageSize=e,n()},m=e=>{t.PageIndex=e,n()};I(()=>{L(y.RefeshTable,n),n()}),z(()=>{V(y.RefeshTable,n)});function _(e){const o=e.isdefault,s=[...K()];return o&&s.pop(),s}return{topBarClick:f,columns:H,...E(t),sizeChange:d,pageChange:m,doActionClick:C,getRightDefaultMenus:_,scrollRef:A,getCategory:n}}});function U(a,t,f,r,C,n){const l=b,c=B,g=w,d=T,m=P;return k(),S("div",null,[i(l,{title:"\u5206\u7C7B\u5217\u8868",onTopBarClick:a.topBarClick},null,8,["onTopBarClick"]),M("div",null,[i(d,{size:"small",columns:a.columns,"data-source":a.tableData,pagination:!1,rowKey:"name",scroll:a.scrollRef},{bodyCell:h(({text:_,column:e,record:o})=>[e.key?(k(),R(g,{key:0,case:e.key},{operation:h(()=>[i(c,{currentRow:o,onDoActionClick:a.doActionClick,"default-menus":a.getRightDefaultMenus(o)},null,8,["currentRow","onDoActionClick","default-menus"])]),_:2},1032,["case"])):x("",!0)]),_:1},8,["columns","data-source","scroll"]),i(m,{style:{"text-align":"right","margin-top":"5px"},totalCount:a.totalCount,pagesize:a.PageSize,pageindex:a.PageIndex,onPageChange:a.pageChange,onSizeChange:a.sizeChange},null,8,["totalCount","pagesize","pageindex","onPageChange","onSizeChange"])])])}const me=O(Q,[["render",U]]);export{me as default};
