import{g as fe}from"./vendor.d3cc975b.js";var f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h={},le={},ye={},_={},S={};Object.defineProperty(S,"__esModule",{value:!0});var te=new Uint8Array(0),Et=1024;function We(t,e,r){return t[e++]=r>>>24&255,t[e++]=r>>>16&255,t[e++]=r>>>8&255,t[e++]=r&255,e}S.writeInt32BE=We;function Ve(t,e,r){return t[e++]=r&255,t[e++]=r>>>8&255,t[e++]=r>>>16&255,t[e++]=r>>>24&255,e}S.writeInt32LE=Ve;function $r(t){return--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t+1}var et=!0;try{N(new Uint8Array([1,2]))}catch{et=!1}function $t(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function N(t){return et?String.fromCharCode.apply(String,t):String.fromCharCode.apply(String,$t(t))}function rt(t,e){if(e<0&&(e=t.length),e===0)return["",0];var r=0,n=0,i=e<32767?e:32767,a=new Uint16Array(i+1),s=t.length,u=[];do{for(;r<i&&n<s;r++){var c=t[n++];switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a[r]=c;break;case 12:case 13:if(n<s){a[r]=(c&31)<<6|t[n++]&63;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(n+1<s){a[r]=(c&15)<<12|(t[n++]&63)<<6|t[n++]&63;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(n+2<s){var o=((c&7)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536;if(0<=o&&o<=1048575){a[r++]=o>>10&1023|55296,a[r]=o&1023|56320;break}throw new Error("Character outside valid Unicode range: 0x"+o.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+c.toString(16))}}u.push(N(a.subarray(0,r))),e-=r,r=0,i>e&&(i=e)}while(r<e&&n<s);return[u.length===1?u[0]:u.join(""),n]}function H(t){return rt(t,t.length)[0]}S.fromUint8Array=H;function tt(t){var e=t instanceof Uint8Array?t:new Uint8Array(t),r=e.length;if(r===0)return"";if(r<65535)return N(e);for(var n=r&32767,i=r>>15,a=new Array(n?i+1:i),s=0;s<i;++s)a[s]=N(e.subarray(s<<15,s+1<<15));return n&&(a[i]=N(e.subarray(i<<15,r))),a.join("")}S.toBinaryString=tt;var jt=function(){function t(e){this.buffer=te,this.size=0,this.offset=0,this.rmark=0,this.wmark=0,e&&(typeof e=="number"?this.buffer=new Uint8Array(e):typeof e=="string"?this.writeString(e):(e instanceof t?this.buffer=e.toBytes():e instanceof Uint8Array?this.buffer=e:e instanceof Uint8ClampedArray?this.buffer=new Uint8Array(e.buffer,e.byteOffset,e.length):this.buffer=new Uint8Array(e),this.size=e.length),this.mark())}return t.toString=function(e){return e===void 0?Object.toString.apply(t):typeof e=="string"?e:e instanceof t?e.toString():e instanceof Uint8Array?H(e):e instanceof ArrayBuffer?H(new Uint8Array(e,0)):N(e)},t.prototype.grow=function(e){var r=this.capacity;if(e=this.size+e,e>r)if(r>0){var n=new Uint8Array($r(e));n.set(this.buffer),this.buffer=n}else this.buffer=new Uint8Array(Math.max($r(e),Et))},Object.defineProperty(t.prototype,"capacity",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.offset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytes",{get:function(){return this.buffer.subarray(0,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remains",{get:function(){return this.buffer.subarray(this.offset,this.size)},enumerable:!0,configurable:!0}),t.prototype.mark=function(){this.wmark=this.size,this.rmark=this.offset},t.prototype.reset=function(){this.size=this.wmark,this.offset=this.rmark},t.prototype.clear=function(){this.buffer=te,this.size=0,this.offset=0,this.wmark=0,this.rmark=0},t.prototype.writeByte=function(e){this.grow(1),this.buffer[this.size++]=e},t.prototype.writeInt32BE=function(e){if(e!==(e|0))throw new TypeError("value is out of bounds");this.grow(4),this.size=We(this.buffer,this.size,e)},t.prototype.writeUInt32BE=function(e){if(e<0||e!==(e|0)&&(e&2147483647)+2147483648!==e)throw new TypeError("value is out of bounds");this.grow(4),this.size=We(this.buffer,this.size,e|0)},t.prototype.writeInt32LE=function(e){if(e!==(e|0))throw new TypeError("value is out of bounds");this.grow(4),this.size=Ve(this.buffer,this.size,e)},t.prototype.writeUInt32LE=function(e){if(e<0||e!==(e|0)&&(e&2147483647)+2147483648!==e)throw new TypeError("value is out of bounds");this.grow(4),this.size=Ve(this.buffer,this.size,e|0)},t.prototype.write=function(e){var r=e instanceof ArrayBuffer?e.byteLength:e.length;if(r!==0){this.grow(r);var n=this.buffer,i=this.size;e instanceof t?n.set(e.bytes,i):e instanceof ArrayBuffer?n.set(new Uint8Array(e),i):n.set(e,i),this.size+=r}},t.prototype.writeAsciiString=function(e){var r=e.length;if(r!==0){this.grow(r);for(var n=this.buffer.subarray(this.size),i=0;i<r;++i)n[i]=e.charCodeAt(i);this.size+=r}},t.prototype.writeString=function(e){var r=e.length;if(r!==0){this.grow(r*3);for(var n=this.buffer,i=this.size,a=0;a<r;++a){var s=e.charCodeAt(a);if(s<128)n[i++]=s;else if(s<2048)n[i++]=192|s>>6,n[i++]=128|s&63;else if(s<55296||s>57343)n[i++]=224|s>>12,n[i++]=128|s>>6&63,n[i++]=128|s&63;else{if(a+1<r){var u=e.charCodeAt(a+1);if(s<56320&&56320<=u&&u<=57343){var c=((s&1023)<<10|u&1023)+65536;n[i++]=240|c>>18,n[i++]=128|c>>12&63,n[i++]=128|c>>6&63,n[i++]=128|c&63,++a;continue}}throw new Error("Malformed string")}}this.size=i}},t.prototype.readByte=function(){return this.offset>=this.size?-1:this.buffer[this.offset++]},t.prototype.readInt32BE=function(){var e=this.buffer,r=this.offset;if(r+3>=this.size)throw new Error("EOF");var n=e[r++]<<24|e[r++]<<16|e[r++]<<8|e[r++];return this.offset=r,n},t.prototype.readUInt32BE=function(){var e=this.readInt32BE();return e>=0?e:(e&2147483647)+2147483648},t.prototype.readInt32LE=function(){var e=this.buffer,r=this.offset;if(r+3>=this.size)throw new Error("EOF");var n=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;return this.offset=r,n},t.prototype.readUInt32LE=function(){var e=this.readInt32LE();return e>=0?e:(e&2147483647)+2147483648},t.prototype.read=function(e){return(e<0||this.offset+e>this.size)&&(e=this.size-this.offset),e===0?te:this.buffer.subarray(this.offset,this.offset+=e)},t.prototype.skip=function(e){return e===0?0:(e<0||this.offset+e>this.size?(e=this.size-this.offset,this.offset=this.size):this.offset+=e,e)},t.prototype.readBytes=function(e){var r=this.buffer.indexOf(e,this.offset),n;return r===-1?(n=this.buffer.subarray(this.offset,this.size),this.offset=this.size):(n=this.buffer.subarray(this.offset,r+1),this.offset=r+1),n},t.prototype.readUntil=function(e){var r=this.buffer.indexOf(e,this.offset),n="";return r===this.offset?this.offset++:r===-1?(n=H(this.buffer.subarray(this.offset,this.size)),this.offset=this.size):(n=H(this.buffer.subarray(this.offset,r)),this.offset=r+1),n},t.prototype.readAsciiString=function(e){return tt(this.read(e))},t.prototype.readStringAsBytes=function(e){if(e===0)return te;var r=this.buffer.subarray(this.offset,this.size);if(e<0)return this.offset=this.size,r;for(var n=0,i=0,a=r.length;i<e&&n<a;i++){var s=r[n++];switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(n<a){n++;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(n+1<a){n+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(n+2<a){var u=((s&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536;if(0<=u&&u<=1048575){i++;break}throw new Error("Character outside valid Unicode range: 0x"+u.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}}return this.offset+=n,r.subarray(0,n)},t.prototype.readString=function(e){var r=rt(this.buffer.subarray(this.offset,this.size),e),n=r[0],i=r[1];return this.offset+=i,n},t.prototype.takeBytes=function(){var e=this.bytes;return this.clear(),e},t.prototype.toBytes=function(){return new Uint8Array(this.bytes)},t.prototype.toString=function(){return H(this.bytes)},t.prototype.clone=function(){return new t(this.toBytes())},t.prototype.trunc=function(){this.buffer=this.remains,this.size=this.buffer.length,this.offset=0,this.wmark=0,this.rmark=0},t}();S.ByteStream=jt;var he={},I={},T={};Object.defineProperty(T,"__esModule",{value:!0});var Pt=function(){function t(){}return t.prototype.write=function(e,r){e.stream.writeByte(110)},t.prototype.serialize=function(e,r){this.write(e,r)},t}();T.BaseSerializer=Pt;var Qe={},v={};Object.defineProperty(v,"__esModule",{value:!0});function It(t,e){0<=e&&e<=9?t.writeByte(48+e):(e===(e|0)?t.writeByte(105):t.writeByte(108),t.writeAsciiString(""+e),t.writeByte(59))}v.writeInteger=It;function Tt(t,e){isNaN(e)?t.writeByte(78):isFinite(e)?(t.writeByte(100),t.writeAsciiString(""+e),t.writeByte(59)):(t.writeByte(73),t.writeByte(e>0?43:45))}v.writeDouble=Tt;function Rt(t,e){0<=e&&e<=9?t.writeByte(48+Number(e)):(t.writeByte(108),t.writeAsciiString(""+e),t.writeByte(59))}v.writeBigInt=Rt;function kt(t,e){var r=e.length;r>0&&t.writeAsciiString(""+r),t.writeByte(34),t.writeString(e),t.writeByte(34)}v.writeStringBody=kt;function Ut(t,e){var r=e.getUTCFullYear(),n=e.getUTCMonth()+1,i=e.getUTCDate(),a=e.getUTCHours(),s=e.getUTCMinutes(),u=e.getUTCSeconds(),c=e.getUTCMilliseconds();er(t,r,n,i,a,s,u,c,!0)}v.writeUTCDate=Ut;function Ht(t,e){var r=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),a=e.getHours(),s=e.getMinutes(),u=e.getSeconds(),c=e.getMilliseconds();er(t,r,n,i,a,s,u,c,!1)}v.writeLocalDate=Ht;function er(t,e,r,n,i,a,s,u,c){i===0&&a===0&&s===0&&u===0?Le(t,e,r,n):(e===1970&&r===1&&n===1||Le(t,e,r,n),Xe(t,i,a,s,u)),t.writeByte(c?90:59)}v.writeDateTime=er;function Le(t,e,r,n){t.writeByte(68),t.writeAsciiString(("0000"+e).slice(-4)),t.writeAsciiString(("00"+r).slice(-2)),t.writeAsciiString(("00"+n).slice(-2))}v.writeDate=Le;function Xe(t,e,r,n,i){t.writeByte(84),t.writeAsciiString(("00"+e).slice(-2)),t.writeAsciiString(("00"+r).slice(-2)),t.writeAsciiString(("00"+n).slice(-2)),i>0&&(t.writeByte(46),t.writeAsciiString(("000"+i).slice(-3)))}v.writeTime=Xe;var Nt=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Qe,"__esModule",{value:!0});var qt=T,jr=v,Gt=function(t){Nt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){n=n.valueOf(),Number.isSafeInteger(n)?jr.writeInteger(r.stream,n):jr.writeDouble(r.stream,n)},e}(qt.BaseSerializer);Qe.NumberSerializer=Gt;var rr={},Wt=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(rr,"__esModule",{value:!0});var Vt=T,Lt=function(t){Wt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){r.stream.writeByte(n.valueOf()?116:102)},e}(Vt.BaseSerializer);rr.BooleanSerializer=Lt;var tr={},x={},Xt=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(x,"__esModule",{value:!0});var Yt=T,Zt=function(t){Xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){r.setReference(n)},e.prototype.serialize=function(r,n){r.writeReference(n)||this.write(r,n)},e}(Yt.BaseSerializer);x.ReferenceSerializer=Zt;var Jt=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(tr,"__esModule",{value:!0});var Kt=x,Qt=v,en=function(t){Jt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(115),Qt.writeStringBody(i,n)},e.prototype.serialize=function(r,n){var i=r.stream;switch(n.length){case 0:i.writeByte(101);break;case 1:i.writeByte(117),i.writeString(n);break;default:t.prototype.serialize.call(this,r,n);break}},e}(Kt.ReferenceSerializer);tr.StringSerializer=en;var nr={},rn=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(nr,"__esModule",{value:!0});var tn=x,Pr=v,nn=function(t){rn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;r.utc?Pr.writeUTCDate(i,n):Pr.writeLocalDate(i,n)},e}(tn.ReferenceSerializer);nr.DateSerializer=nn;var ir={},an=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ir,"__esModule",{value:!0});var on=x,sn=function(t){an(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(98);var a=n instanceof ArrayBuffer?n.byteLength:n.length;a>0&&i.writeAsciiString(""+a),i.writeByte(34),i.write(n),i.writeByte(34)},e}(on.ReferenceSerializer);ir.BytesSerializer=sn;var ar={},un=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ar,"__esModule",{value:!0});var cn=x,fn=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(103),i.writeByte(123),i.writeAsciiString(n.toString()),i.writeByte(125)},e}(cn.ReferenceSerializer);ar.GuidSerializer=fn;var or={},ln=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(or,"__esModule",{value:!0});var yn=x,hn=function(t){ln(e,t);function e(r){var n=t.call(this)||this;return n.writeNumber=r,n}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(97);var a=n.length;a>0&&i.writeAsciiString(""+a),i.writeByte(123);for(var s=0;s<a;s++)this.writeNumber(i,n[s]);i.writeByte(125)},e}(yn.ReferenceSerializer);or.TypedArraySerializer=hn;var sr={},pn=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(sr,"__esModule",{value:!0});var dn=x,vn=function(t){pn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(97);var a=n.length;a>0&&i.writeAsciiString(""+a),i.writeByte(123);for(var s=0;s<a;s++)r.serialize(n[s]);i.writeByte(125)},e}(dn.ReferenceSerializer);sr.ArraySerializer=vn;var ur={},_n=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ur,"__esModule",{value:!0});var wn=x,gn=function(t){_n(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(97);var a=n.size;a>0&&i.writeAsciiString(""+a),i.writeByte(123),n.forEach(function(s){return r.serialize(s)}),i.writeByte(125)},e}(wn.ReferenceSerializer);ur.SetSerializer=gn;var cr={},xn=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(cr,"__esModule",{value:!0});var Bn=x,Sn=function(t){xn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(109);var a=n.size;a>0&&i.writeAsciiString(""+a),i.writeByte(123),n.forEach(function(s,u){r.serialize(u),r.serialize(s)}),i.writeByte(125)},e}(Bn.ReferenceSerializer);cr.MapSerializer=Sn;var fr={},Dn=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(fr,"__esModule",{value:!0});var An=x,zn=function(t){Dn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream,a=[];if(n.hasOwnProperty===void 0)for(var s in n)typeof n[s]!="function"&&(a[a.length]=s);else for(var s in n)n.hasOwnProperty(s)&&typeof n[s]!="function"&&(a[a.length]=s);var u=a.length;i.writeByte(109),u>0&&i.writeAsciiString(""+u),i.writeByte(123);for(var c=0;c<u;c++)r.serialize(a[c]),r.serialize(n[a[c]]);i.writeByte(125)},e}(An.ReferenceSerializer);fr.DictionarySerializer=zn;var lr={},bn=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(lr,"__esModule",{value:!0});var On=S,mn=x,Ir=v,Mn=function(t){bn(e,t);function e(r,n,i){i===void 0&&(i=[]);var a=t.call(this)||this;if(a.type=r.constructor,i.length===0)for(var s in r)r.hasOwnProperty(s)&&typeof r[s]!="function"&&(i[i.length]=s.toString());a.fields=i;var u=new On.ByteStream;u.writeByte(99),Ir.writeStringBody(u,n);var c=i.length;c>0&&u.writeAsciiString(""+c),u.writeByte(123);for(var o=0;o<c;o++)u.writeByte(115),Ir.writeStringBody(u,i[o]);return u.writeByte(125),a.metadata=u.takeBytes(),a}return e.prototype.write=function(r,n){var i=r.stream,a=this.fields,s=this.metadata,u=a.length,c=r.writeClass(this.type,function(){i.write(s),r.addReferenceCount(u)});t.prototype.write.call(this,r,n),i.writeByte(111),i.writeAsciiString(""+c),i.writeByte(123);for(var o=0;o<u;o++)r.serialize(n[a[o]]);i.writeByte(125)},e}(mn.ReferenceSerializer);lr.ObjectSerializer=Mn;var yr={},Cn=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(yr,"__esModule",{value:!0});var Fn=x,En=v,$n=function(t){Cn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){r.addReferenceCount(1);var i=r.stream;i.writeByte(69),i.writeByte(115),En.writeStringBody(i,n.message)},e}(Fn.ReferenceSerializer);yr.ErrorSerializer=$n;var C={};Object.defineProperty(C,"__esModule",{value:!0});var pe=Object.create(null),Ye=new WeakMap;"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){var t=this.toString();return t.substr(0,t.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/ig,"")},writable:!1,enumerable:!1,configurable:!0});function se(t,e){e===void 0&&(e=t.name),Ye.set(t,e),pe[e]=t}C.register=se;function jn(t){return t in pe}C.isRegistered=jn;function Pn(t){if(!t)return"";var e=Ye.get(t);return e||(e=t.name,e===""||e==="Object"?"":(Ye.set(t,e),pe[e]=t,e))}C.getName=Pn;var Ze=null;try{Ze=typeof f=="object"?f:window}catch{}function nt(t){if(!!Ze){for(var e=Ze,r=t.split("."),n=0;n<r.length;n++)if(e=e[r[n]],e===void 0)return;if(typeof e=="function")return e}}function ce(t,e,r,n){if(r<e.length){t[e[r++]]=n;var i=ce(t,e,r,".");return i===void 0&&r<e.length&&(i=ce(t,e,r,"_")),i}return nt(t.join(""))}function In(t){var e=pe[t];if(e)return e;if(e=nt(t),e)return se(e,t),e;for(var r=[],n=t.indexOf("_");n>=0;)r[r.length]=n,n=t.indexOf("_",n+1);if(r.length>0){var i=t.split("");if(e=ce(i,r,0,"."),e===void 0&&(e=ce(i,r,0,"_")),e)return se(e,t),e}return e=function(){},Object.defineProperty(e,"name",{value:t}),se(e,t),e}C.getType=In;var Tn=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(I,"__esModule",{value:!0});var Rn=S,kn=T,Un=Qe,Hn=rr,Nn=tr,qn=nr,Gn=ir,Wn=ar,it=or,Vn=sr,Ln=ur,Xn=cr,Yn=fr,Zn=lr,Jn=yr,Kn=Tn(C),at=v,Qn=fe,ot=new Map,$e=new kn.BaseSerializer,ei=new Un.NumberSerializer,ri=new Hn.BooleanSerializer,ti=new Nn.StringSerializer,ni=new qn.DateSerializer,ii=new Gn.BytesSerializer,ai=new Wn.GuidSerializer,oi=new it.TypedArraySerializer(at.writeInteger),si=new it.TypedArraySerializer(at.writeDouble),Tr=new Vn.ArraySerializer,ui=new Ln.SetSerializer,ci=new Xn.MapSerializer,fi=new Yn.DictionarySerializer,je=new Jn.ErrorSerializer;function Je(t,e){ot.set(t,e)}I.register=Je;function li(t){var e=t.constructor;switch(e){case Function:return $e;case Number:return ei;case Boolean:return ri;case String:return ti;case Date:return ni;case Qn.Guid:return ai;case Array:return Tr;case Set:return ui;case Map:return ci;case ArrayBuffer:case Uint8Array:case Uint8ClampedArray:case Rn.ByteStream:return ii;case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:return oi;case Float32Array:case Float64Array:return si;case Error:return je}var r=ot.get(e);if(r!==void 0)return r;if(Array.isArray(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Tr;if(t instanceof Error)return Je(e,je),je;var n=Kn.getName(e);if(n==="")return fi;if(n==="GeneratorFunction"||n==="AsyncFunction")return $e;var i=new Zn.ObjectSerializer(t,n);return Je(e,i),i}I.getInstance=li;var yi={},hi=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(yi,"__esModule",{value:!0});var pi=v,di=T,vi=I;if(typeof BigInt<"u"){var _i=function(t){hi(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.write=function(r,n){pi.writeBigInt(r.stream,n)},e}(di.BaseSerializer);vi.register(BigInt,new _i)}var wi={},gi=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(wi,"__esModule",{value:!0});var xi=x,Bi=v,Rr=I;if(typeof BigInt64Array<"u"&&typeof BigUint64Array<"u"){var Si=function(t){gi(e,t);function e(){return t.call(this)||this}return e.prototype.write=function(r,n){t.prototype.write.call(this,r,n);var i=r.stream;i.writeByte(97);var a=n.length;a>0&&i.writeAsciiString(""+a),i.writeByte(123);for(var s=0;s<a;s++)Bi.writeBigInt(i,n[s]);i.writeByte(125)},e}(xi.ReferenceSerializer),kr=new Si;Rr.register(BigInt64Array,kr),Rr.register(BigUint64Array,kr)}var Di=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(he,"__esModule",{value:!0});var Ur=Di(I),Ai=function(){function t(){this.ref=new Map,this.last=0}return t.prototype.addCount=function(e){this.last+=e},t.prototype.set=function(e){this.ref.set(e,this.last++)},t.prototype.write=function(e,r){var n=this.ref.get(r);return n!==void 0?(e.writeByte(114),e.writeAsciiString(""+n),e.writeByte(59),!0):!1},t.prototype.reset=function(){this.ref.clear(),this.last=0},t}(),zi=function(){function t(e,r,n){r===void 0&&(r=!1),n===void 0&&(n=!1),this.stream=e,this.utc=n,this.ref=new Map,this.last=0,this.simple=r}return Object.defineProperty(t.prototype,"simple",{get:function(){return this.refer===void 0},set:function(e){this.refer=e?void 0:new Ai},enumerable:!0,configurable:!0}),t.prototype.serialize=function(e){e==null?this.stream.writeByte(110):Ur.getInstance(e).serialize(this,e)},t.prototype.write=function(e){e==null?this.stream.writeByte(110):Ur.getInstance(e).write(this,e)},t.prototype.writeReference=function(e){return this.refer?this.refer.write(this.stream,e):!1},t.prototype.setReference=function(e){this.refer&&this.refer.set(e)},t.prototype.addReferenceCount=function(e){this.refer&&this.refer.addCount(e)},t.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.clear(),this.last=0},t.prototype.writeClass=function(e,r){var n=this.ref.get(e);return n===void 0&&(r(),n=this.last++,this.ref.set(e,n)),n},t}();he.Writer=zi;var de={},d={};Object.defineProperty(d,"__esModule",{value:!0});var bi=fe;function hr(t,e){e===void 0&&(e=59);var r=t.readUntil(e);return r.length===0?0:parseInt(r,10)}d.readInt=hr;function Oi(t){return parseFloat(t.readUntil(59))}d.readDouble=Oi;function mi(t){return t.readByte()===45?-1/0:1/0}d.readInfinity=mi;function Mi(t){return hr(t,123)}d.readCount=Mi;function ve(t){return hr(t,34)}d.readLength=ve;function Ci(t){var e=ve(t),r=t.readString(e);return t.readByte(),r}d.readString=Ci;function Fi(t){var e=ve(t),r=t.read(e);return t.readByte(),r}d.readBytes=Fi;function Ei(t){var e=ve(t),r=t.readAsciiString(e);return t.readByte(),r}d.readAsciiString=Ei;function $i(t){t.readByte();var e=bi.Guid.parse(t.readAsciiString(36));return t.readByte(),e}d.readGuid=$i;function ji(t){var e=t.readByte()-48;return e=e*10+t.readByte()-48,e=e*10+t.readByte()-48,e*10+t.readByte()-48}function m(t){var e=t.readByte()-48;return e*10+t.readByte()-48}function st(t){var e=t.readByte()-48;e=e*10+t.readByte()-48,e=e*10+t.readByte()-48;var r=t.readByte();return r>=48&&r<=57&&(t.skip(2),r=t.readByte(),r>=48&&r<=57&&(t.skip(2),r=t.readByte())),[e,r]}function Pi(t){var e,r=m(t),n=m(t),i=m(t),a=0,s=t.readByte();return s===46&&(e=st(t),a=e[0],s=e[1]),s===90?new Date(Date.UTC(1970,0,1,r,n,i,a)):new Date(1970,0,1,r,n,i,a)}d.readTime=Pi;function Ii(t){var e,r=ji(t),n=m(t)-1,i=m(t),a=t.readByte();if(a===84){var s=m(t),u=m(t),c=m(t),o=0;return a=t.readByte(),a===46&&(e=st(t),o=e[0],a=e[1]),a===90?new Date(Date.UTC(r,n,i,s,u,c,o)):new Date(r,n,i,s,u,c,o)}return a===90?new Date(Date.UTC(r,n,i)):new Date(r,n,i)}d.readDateTime=Ii;var R={},pr={},w={};Object.defineProperty(w,"__esModule",{value:!0});function Ti(t){switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 105:return"int32 number";case 108:return"long number";case 100:return"double number";case 110:return"null | undefined";case 101:return"empty string";case 116:return"true";case 102:return"false";case 78:return"NaN";case 73:return"Infinity";case 68:case 84:return"Date";case 98:return"Uint8Array";case 117:case 115:return"string";case 103:return"guid string";case 97:return"Array";case 109:return"object | Map";case 99:return"class";case 111:return"Object";case 114:return"Reference";case 69:return"Error";default:throw new Error("Unexpected Tag: 0x"+(t&255).toString(16))}}var Ri=function(){function t(e){e===void 0&&(e="undefined"),this.type=e}return t.prototype.read=function(e,r){switch(r){case 110:return;case 114:return e.readReference();case 99:return e.readClass(),this.deserialize(e);case 69:throw new Error(e.deserialize(String))}throw new Error("Cannot convert "+Ti(r)+" to "+this.type+".")},t.prototype.deserialize=function(e){return this.read(e,e.stream.readByte())},t}();w.BaseDeserializer=Ri;var p={},ki=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(p,"__esModule",{value:!0});var D=ki(d);function Ui(t){var e=D.readBytes(t.stream);return t.addReference(e),e}p.readBytes=Ui;function Hi(t){var e=D.readAsciiString(t.stream);return t.addReference(e),e}p.readAsciiString=Hi;function Ni(t){var e=D.readString(t.stream);return t.addReference(e),e}p.readString=Ni;function qi(t){var e=D.readGuid(t.stream);return t.addReference(e),e}p.readGuid=qi;function Gi(t){var e=D.readDateTime(t.stream);return t.addReference(e),e}p.readDateTime=Gi;function Wi(t){var e=D.readTime(t.stream);return t.addReference(e),e}p.readTime=Wi;function Vi(t){var e=t.stream,r=D.readCount(e),n=new Array(r);t.addReference(n);for(var i=0;i<r;++i)n[i]=t.deserialize();return e.readByte(),n}p.readArray=Vi;function Li(t){var e=t.stream,r=D.readCount(e),n=new Set;t.addReference(n);for(var i=0;i<r;++i)n.add(t.deserialize());return e.readByte(),n}p.readSet=Li;function Xi(t){var e=t.stream,r=new Map;t.addReference(r);for(var n=D.readCount(e);n>0;--n){var i=t.deserialize(),a=t.deserialize();r.set(i,a)}return e.readByte(),r}p.readMap=Xi;function Yi(t){var e=t.stream,r=D.readInt(e,123),n=t.getTypeInfo(r),i=n.type,a=i?new i:{};t.addReference(a);for(var s=n.names,u=s.length,c=0;c<u;++c)a[s[c]]=t.deserialize();return e.readByte(),a}p.readObject=Yi;function Zi(t){var e=t.stream,r=D.readInt(e,123),n=t.getTypeInfo(r),i=new Map;t.addReference(i);for(var a=n.names,s=a.length,u=0;u<s;++u)i.set(a[u],t.deserialize());return e.readByte(),i}p.readObjectAsMap=Zi;var Ji=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ki=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(pr,"__esModule",{value:!0});var Qi=w,Pe=Ki(p),ea=function(t){Ji(e,t);function e(){return t.call(this,"Array")||this}return e.prototype.read=function(r,n){switch(n){case 97:return Pe.readArray(r);case 101:return[];case 115:return Pe.readString(r).split("");case 98:return Array.from(Pe.readBytes(r));case 114:{var i=r.readReference();return i instanceof Uint8Array?Array.from(i):i instanceof String?i.split(""):i}default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(Qi.BaseDeserializer);pr.ArrayDeserializer=ea;var B={},dr={},ra=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ut=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(dr,"__esModule",{value:!0});var ta=w,Hr=ut(d),Ie=ut(p),na=function(t){ra(e,t);function e(){return t.call(this,"int")||this}return e.prototype.read=function(r,n){if(n>=48&&n<=57)return n-48;var i=r.stream;switch(n){case 105:case 108:return Hr.readInt(i);case 100:return Math.floor(Hr.readDouble(i));case 116:return 1;case 102:case 101:return 0;case 115:return parseInt(Ie.readString(r));case 117:return i.readString(1).charCodeAt(1);case 68:return Ie.readDateTime(r).getTime();case 84:return Ie.readTime(r).getTime();case 114:{var a=r.readReference();return a instanceof Date?a.getTime():parseInt(a.toString())}default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(ta.BaseDeserializer);dr.IntDeserializer=na;var _e={},ia=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ct=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(_e,"__esModule",{value:!0});var aa=w,Te=ct(d),Re=ct(p),oa=function(t){ia(e,t);function e(){return t.call(this,"number")||this}return e.prototype.read=function(r,n){if(n>=48&&n<=57)return n-48;var i=r.stream;switch(n){case 105:case 108:return Te.readInt(i);case 100:return Te.readDouble(i);case 78:return NaN;case 73:return Te.readInfinity(i);case 116:return 1;case 102:case 101:return 0;case 115:return Number(Re.readString(r));case 117:return i.readString(1).charCodeAt(1);case 68:return Re.readDateTime(r).getTime();case 84:return Re.readTime(r).getTime();case 114:{var a=r.readReference();return a instanceof Date?a.getTime():Number(a.toString())}default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(aa.BaseDeserializer);_e.NumberDeserializer=oa;var z=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(B,"__esModule",{value:!0});var M=S,sa=dr,ua=_e,b=w,ft=d,q=p;function F(t,e){var r=t.stream,n=ft.readCount(r),i=new e(n);t.addReference(i);for(var a=sa.IntDeserializer.instance,s=0;s<n;++s)i[s]=a.deserialize(t);return r.readByte(),i}B.readIntArray=F;function vr(t,e){var r=t.stream,n=ft.readCount(r),i=new e(n);t.addReference(i);for(var a=ua.NumberDeserializer.instance,s=0;s<n;++s)i[s]=a.deserialize(t);return r.readByte(),i}B.readNumberArray=vr;var ca=new Int8Array(0),fa=function(t){z(e,t);function e(){return t.call(this,"Int8Array")||this}return e.prototype.read=function(r,n){var i;switch(n){case 101:return ca;case 97:return F(r,Int8Array);case 98:i=q.readBytes(r);break;case 117:i=new M.ByteStream(r.stream.readString(1)).bytes;break;case 115:i=new M.ByteStream(q.readString(r)).bytes;break;default:return t.prototype.read.call(this,r,n)}return new Int8Array(i.buffer,i.byteOffset,i.length)},e.instance=new e,e}(b.BaseDeserializer);B.Int8ArrayDeserializer=fa;var la=new Int16Array(0),ya=function(t){z(e,t);function e(){return t.call(this,"Int16Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return la;case 97:return F(r,Int16Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(b.BaseDeserializer);B.Int16ArrayDeserializer=ya;var ha=new Int32Array(0),pa=function(t){z(e,t);function e(){return t.call(this,"Int32Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return ha;case 97:return F(r,Int32Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(b.BaseDeserializer);B.Int32ArrayDeserializer=pa;var da=new Uint8Array(0),va=function(t){z(e,t);function e(){return t.call(this,"Uint8Array")||this}return e.prototype.read=function(r,n){switch(n){case 98:return q.readBytes(r);case 101:return da;case 97:return F(r,Uint8Array);case 117:return new M.ByteStream(r.stream.readString(1)).bytes;case 115:return new M.ByteStream(q.readString(r)).bytes;case 114:{var i=r.readReference();return i instanceof Uint8Array?i:new M.ByteStream(i.toString()).bytes}default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(b.BaseDeserializer);B.Uint8ArrayDeserializer=va;var _a=new Uint8ClampedArray(0),wa=function(t){z(e,t);function e(){return t.call(this,"Uint8ClampedArray")||this}return e.prototype.read=function(r,n){var i;switch(n){case 101:return _a;case 97:return F(r,Uint8ClampedArray);case 98:i=q.readBytes(r);break;case 117:i=new M.ByteStream(r.stream.readString(1)).bytes;break;case 115:i=new M.ByteStream(q.readString(r)).bytes;break;case 114:{var a=r.readReference();if(a instanceof Uint8ClampedArray)return a;a instanceof Uint8Array?i=a:i=new M.ByteStream(a.toString()).bytes;break}default:return t.prototype.read.call(this,r,n)}return new Uint8ClampedArray(i.buffer,i.byteOffset,i.length)},e.instance=new e,e}(b.BaseDeserializer);B.Uint8ClampedArrayDeserializer=wa;var ga=new Uint16Array(0),xa=function(t){z(e,t);function e(){return t.call(this,"Uint16Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return ga;case 97:return F(r,Uint16Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(b.BaseDeserializer);B.Uint16ArrayDeserializer=xa;var Ba=new Uint32Array(0),Sa=function(t){z(e,t);function e(){return t.call(this,"Uint32Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return Ba;case 97:return F(r,Uint32Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(b.BaseDeserializer);B.Uint32ArrayDeserializer=Sa;var Da=new Float32Array(0),Aa=function(t){z(e,t);function e(){return t.call(this,"Float32Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return Da;case 97:return vr(r,Float32Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(b.BaseDeserializer);B.Float32ArrayDeserializer=Aa;var za=new Float64Array(0),ba=function(t){z(e,t);function e(){return t.call(this,"Float64Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return za;case 97:return vr(r,Float64Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(b.BaseDeserializer);B.Float64ArrayDeserializer=ba;var _r={},Oa=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(_r,"__esModule",{value:!0});var ma=w,Ma=function(t){Oa(e,t);function e(){return t.call(this,"function")||this}return e.instance=new e,e}(ma.BaseDeserializer);_r.FunctionDeserializer=Ma;var wr={},Ca=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(wr,"__esModule",{value:!0});var Fa=w,Nr=lt(d),Ea=lt(p),$a=function(t){Ca(e,t);function e(){return t.call(this,"boolean")||this}return e.prototype.read=function(r,n){var i=r.stream;switch(n){case 116:return!0;case 102:case 101:case 78:case 48:return!1;case 105:case 108:return Nr.readInt(i)!==0;case 100:return Nr.readDouble(i)!==0;case 115:return Boolean(Ea.readString(r));case 117:return"0\0".indexOf(i.readString(1))===-1;case 73:return i.readByte(),!0;case 114:return Boolean(r.readReference().toString());default:return n>=49&&n<=57?!0:t.prototype.read.call(this,r,n)}},e.instance=new e,e}(Fa.BaseDeserializer);wr.BooleanDeserializer=$a;var we={},ja=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yt=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(we,"__esModule",{value:!0});var Pa=w,Ia=yt(d),U=yt(p),Ta=function(t){ja(e,t);function e(){return t.call(this,"string")||this}return e.prototype.read=function(r,n){if(n>=48&&n<=57)return String.fromCharCode(n);var i=r.stream;switch(n){case 105:case 108:case 100:return i.readUntil(59);case 115:return U.readString(r);case 98:return U.readAsciiString(r);case 116:return"true";case 102:return"false";case 101:return"";case 68:return U.readDateTime(r).toString();case 84:return U.readTime(r).toTimeString();case 103:return U.readGuid(r).toString();case 78:return"NaN";case 73:return Ia.readInfinity(i).toString();case 117:return i.readString(1);case 97:return U.readArray(r).join("");case 114:return r.readReference().toString();default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(Pa.BaseDeserializer);we.StringDeserializer=Ta;var gr={},Ra=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ht=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(gr,"__esModule",{value:!0});var ka=w,ke=ht(d),Ue=ht(p),Ua=function(t){Ra(e,t);function e(){return t.call(this,"Date")||this}return e.prototype.read=function(r,n){var i=r.stream;switch(n){case 68:return Ue.readDateTime(r);case 84:return Ue.readTime(r);case 105:return new Date(ke.readInt(i));case 108:return new Date(ke.readInt(i));case 100:return new Date(Math.floor(ke.readDouble(i)));case 115:return new Date(Ue.readString(r));case 116:return new Date(1);case 102:case 101:return new Date(0);case 114:{var a=r.readReference();return a instanceof Date?a:new Date(a.toString())}default:return n>=48&&n<=57?new Date(n-48):t.prototype.read.call(this,r,n)}},e.instance=new e,e}(ka.BaseDeserializer);gr.DateDeserializer=Ua;var xr={},Ha=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(xr,"__esModule",{value:!0});var $=S,Na=w,qa=B,qr=p,Ga=function(t){Ha(e,t);function e(){return t.call(this,"ByteStream")||this}return e.prototype.read=function(r,n){switch(n){case 98:return new $.ByteStream(qr.readBytes(r));case 101:return new $.ByteStream(0);case 97:return new $.ByteStream(qa.readIntArray(r,Uint8Array));case 117:return new $.ByteStream(r.stream.readString(1));case 115:return new $.ByteStream(qr.readString(r));case 114:{var i=r.readReference();return i instanceof Uint8Array?new $.ByteStream(i):new $.ByteStream(i.toString())}default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(Na.BaseDeserializer);xr.ByteStreamDeserializer=Ga;var Br={},Wa=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Br,"__esModule",{value:!0});var Va=w,La=p,Xa=function(t){Wa(e,t);function e(){return t.call(this,"Set")||this}return e.prototype.read=function(r,n){switch(n){case 101:return new Set;case 97:return La.readSet(r);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(Va.BaseDeserializer);Br.SetDeserializer=Xa;var Sr={},Ya=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Za=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Sr,"__esModule",{value:!0});var Ja=w,Gr=Za(p),Ka=function(t){Ya(e,t);function e(){return t.call(this,"Map")||this}return e.prototype.read=function(r,n){switch(n){case 101:return new Map;case 109:return Gr.readMap(r);case 111:return Gr.readObjectAsMap(r);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(Ja.BaseDeserializer);Sr.MapDeserializer=Ka;var Dr={},Qa=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eo=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Dr,"__esModule",{value:!0});var ro=w,Wr=eo(p),He=fe,to=function(t){Qa(e,t);function e(){return t.call(this,"Guid")||this}return e.prototype.read=function(r,n){switch(n){case 103:return Wr.readGuid(r);case 115:return He.Guid.parse(Wr.readString(r));case 114:{var i=r.readReference();return i instanceof He.Guid?i:He.Guid.parse(i.toString())}default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(ro.BaseDeserializer);Dr.GuidDeserializer=to;var Ar={},no=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ar,"__esModule",{value:!0});var io=w,ao=function(t){no(e,t);function e(){return t.call(this,"Error")||this}return e.prototype.read=function(r,n){switch(n){case 69:return new Error(r.deserialize(String));default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(io.BaseDeserializer);Ar.ErrorDeserializer=ao;var zr={},ge={},oo=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pt=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(ge,"__esModule",{value:!0});var so=w,uo=we,X=pt(d),O=pt(p),dt=function(t){oo(e,t);function e(){return t.call(this,"any")||this}return e.prototype.read=function(r,n){if(n>=48&&n<=57)return n-48;var i=r.stream;switch(n){case 105:return X.readInt(i);case 115:return O.readString(r);case 98:return O.readBytes(r);case 116:return!0;case 102:return!1;case 101:return"";case 111:return O.readObject(r);case 68:return O.readDateTime(r);case 84:return O.readTime(r);case 103:return O.readGuid(r);case 108:switch(r.longType){case"number":return X.readInt(i);case"bigint":if(typeof BigInt<"u")return BigInt(i.readUntil(59));case"string":return i.readUntil(59)}break;case 100:return X.readDouble(i);case 78:return NaN;case 73:return X.readInfinity(i);case 117:return i.readString(1);case 97:return O.readArray(r);case 109:return r.dictType==="map"?O.readMap(r):co(r);case 69:return new Error(r.deserialize(String));default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(so.BaseDeserializer);ge.DefaultDeserializer=dt;function co(t){var e=t.stream,r=Object.create(null);t.addReference(r);for(var n=X.readCount(e),i=uo.StringDeserializer.instance,a=dt.instance;n>0;--n){var s=i.deserialize(t),u=a.deserialize(t);r[s]=u}return e.readByte(),r}var fo=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(zr,"__esModule",{value:!0});var lo=ge,yo=function(t){fo(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.read=function(r,n){return n===110?null:t.prototype.read.call(this,r,n)},e.instance=new e,e}(lo.DefaultDeserializer);zr.NullDeserializer=yo;Object.defineProperty(R,"__esModule",{value:!0});var ho=S,po=pr,A=B,vo=_r,_o=_e,wo=wr,go=we,xo=gr,Bo=xr,So=Br,Do=Sr,Ao=Dr,zo=Ar,bo=zr,Oo=ge,mo=fe,vt=new Map;function Mo(t,e){vt.set(t,e)}R.register=Mo;function Co(t){if(t){switch(t){case Function:return vo.FunctionDeserializer.instance;case Number:return _o.NumberDeserializer.instance;case Boolean:return wo.BooleanDeserializer.instance;case String:return go.StringDeserializer.instance;case Date:return xo.DateDeserializer.instance;case Array:return po.ArrayDeserializer.instance;case ho.ByteStream:return Bo.ByteStreamDeserializer.instance;case Uint8Array:return A.Uint8ArrayDeserializer.instance;case Uint8ClampedArray:return A.Uint8ClampedArrayDeserializer.instance;case Uint16Array:return A.Uint16ArrayDeserializer.instance;case Uint32Array:return A.Uint32ArrayDeserializer.instance;case Int8Array:return A.Int8ArrayDeserializer.instance;case Int16Array:return A.Int16ArrayDeserializer.instance;case Int32Array:return A.Int32ArrayDeserializer.instance;case Float32Array:return A.Float32ArrayDeserializer.instance;case Float64Array:return A.Float64ArrayDeserializer.instance;case Set:return So.SetDeserializer.instance;case Map:return Do.MapDeserializer.instance;case mo.Guid:return Ao.GuidDeserializer.instance;case Error:return zo.ErrorDeserializer.instance}var e=vt.get(t);if(e!==void 0)return e}return t===null?bo.NullDeserializer.instance:Oo.DefaultDeserializer.instance}R.getInstance=Co;var Fo={},Eo=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$o=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Fo,"__esModule",{value:!0});var jo=w,Po=R,Ne=$o(p);if(typeof BigInt<"u"){var Io=function(t){Eo(e,t);function e(){return t.call(this,"bigint")||this}return e.prototype.read=function(r,n){if(n>=48&&n<=57)return BigInt(n-48);var i=r.stream;switch(n){case 105:case 108:case 100:return BigInt(i.readUntil(59));case 116:return BigInt(1);case 102:case 101:return BigInt(0);case 115:return BigInt(Ne.readString(r));case 117:return BigInt(i.readString(1).charCodeAt(1));case 68:return BigInt(Ne.readDateTime(r).getTime());case 84:return BigInt(Ne.readTime(r).getTime());case 114:{var a=r.readReference();return a instanceof Date?BigInt(a.getTime()):BigInt(a.toString())}default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(jo.BaseDeserializer);Po.register(BigInt,Io.instance)}var To={},_t=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ro=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(To,"__esModule",{value:!0});var wt=w,br=R,ko=Ro(d);function gt(t,e){var r=t.stream,n=ko.readCount(r),i=new e(n);t.addReference(i);for(var a=br.getInstance(BigInt),s=0;s<n;++s)i[s]=a.deserialize(t);return r.readByte(),i}if(typeof BigInt64Array<"u"){var Uo=new BigInt64Array(0),Ho=function(t){_t(e,t);function e(){return t.call(this,"BigInt64Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return Uo;case 97:return gt(r,BigInt64Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(wt.BaseDeserializer);br.register(BigInt64Array,Ho.instance)}if(typeof BigUint64Array<"u"){var No=new BigUint64Array(0),qo=function(t){_t(e,t);function e(){return t.call(this,"BigUint64Array")||this}return e.prototype.read=function(r,n){switch(n){case 101:return No;case 97:return gt(r,BigUint64Array);default:return t.prototype.read.call(this,r,n)}},e.instance=new e,e}(wt.BaseDeserializer);br.register(BigUint64Array,qo.instance)}var xt=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(de,"__esModule",{value:!0});var qe=d,Go=xt(C),Ge=xt(R),Wo=function(){function t(){this.ref=[]}return Object.defineProperty(t.prototype,"lastIndex",{get:function(){return this.ref.length-1},enumerable:!0,configurable:!0}),t.prototype.add=function(e){this.ref.push(e)},t.prototype.set=function(e,r){this.ref[e]=r},t.prototype.read=function(e){return this.ref[e]},t.prototype.reset=function(){this.ref.length=0},t}(),Vo=function(){function t(e,r){r===void 0&&(r=!1),this.stream=e,this.ref=[],this.longType="number",this.dictType="object",this.simple=r}return Object.defineProperty(t.prototype,"simple",{get:function(){return this.refer===void 0},set:function(e){this.refer=e?void 0:new Wo},enumerable:!0,configurable:!0}),t.prototype.deserialize=function(e){return Ge.getInstance(e).deserialize(this)},t.prototype.read=function(e,r){return Ge.getInstance(r).read(this,e)},t.prototype.readClass=function(){for(var e=this.stream,r=qe.readString(e),n=qe.readCount(e),i=new Array(n),a=Ge.getInstance(String),s=0;s<n;++s)i[s]=a.deserialize(this);e.readByte(),this.ref.push({name:r,names:i,type:Go.getType(r)})},t.prototype.getTypeInfo=function(e){return this.ref[e]},t.prototype.readReference=function(){return this.refer?this.refer.read(qe.readInt(this.stream)):void 0},t.prototype.addReference=function(e){this.refer&&this.refer.add(e)},t.prototype.setReference=function(e,r){this.refer&&this.refer.set(e,r)},Object.defineProperty(t.prototype,"lastReferenceIndex",{get:function(){return this.refer?this.refer.lastIndex:-1},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.length=0},t}();de.Reader=Vo;var xe={};Object.defineProperty(xe,"__esModule",{value:!0});var Ke=S,Lo=he,Xo=de;function Yo(t,e,r){var n=new Ke.ByteStream,i=new Lo.Writer(n,e,r);return i.serialize(t),n.bytes}xe.serialize=Yo;function Zo(t,e,r){t instanceof Ke.ByteStream||(t=new Ke.ByteStream(t));var n=new Xo.Reader(t,r);return n.deserialize(e)}xe.deserialize=Zo;var k=f&&f.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(_,"__esModule",{value:!0});var Y=S,Du=_.ByteStream=Y.ByteStream;_.writeInt32BE=Y.writeInt32BE;_.writeInt32LE=Y.writeInt32LE;_.fromUint8Array=Y.fromUint8Array;_.toBinaryString=Y.toBinaryString;var Jo=he;_.Writer=Jo.Writer;var Ko=de;_.Reader=Ko.Reader;var Qo=k(C);_.TypeManager=Qo;var es=k(I);_.Serializer=es;var rs=k(R);_.Deserializer=rs;var ts=k(xe);_.Formatter=ts;var ns=k(p);_.ReferenceReader=ns;var is=k(d);_.ValueReader=is;var as=k(v);_.ValueWriter=as;Object.defineProperty(ye,"__esModule",{value:!0});var ne=_,os=function(){function t(){this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object"}return t.prototype.encode=function(e,r,n){var i=new ne.ByteStream,a=new ne.Writer(i,this.simple,this.utc),s=n.requestHeaders;this.simple&&(s.simple=!0);var u=0;for(var c in s)u++;return u>0&&(i.writeByte(72),a.serialize(s),a.reset()),i.writeByte(67),a.serialize(e),r.length>0&&(a.reset(),a.serialize(r)),i.writeByte(122),i.takeBytes()},t.prototype.decode=function(e,r){var n=new ne.ByteStream(e),i=new ne.Reader(n,!1);i.longType=this.longType,i.dictType=this.dictType;var a=n.readByte();if(a===72){var s=i.deserialize();for(var u in s)r.responseHeaders[u]=s[u];i.reset(),a=n.readByte()}switch(a){case 82:return r.responseHeaders.simple&&(i.simple=!0),i.deserialize(r.returnType);case 69:throw new Error(i.deserialize(String));case 122:return r.type===null?null:void 0;default:throw new Error(`Invalid response:\r
`+n.toString())}},t.instance=new t,t}();ye.DefaultClientCodec=os;var Be={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});var ss=function(){function t(){this.requestHeaders=Object.create(null),this.responseHeaders=Object.create(null)}return t.prototype.copy=function(e,r){if(e)for(var n in e)n!=="requestHeaders"&&n!=="responseHeaders"&&(!e.hasOwnProperty||e.hasOwnProperty(n))&&(r[n]=e[n])},t.prototype.clone=function(){var e=Object.create(this.constructor.prototype);return this.copy(this,e),this.copy(this.requestHeaders,e.requestHeaders),this.copy(this.responseHeaders,e.responseHeaders),e},t}();Z.Context=ss;var us=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Be,"__esModule",{value:!0});var cs=Z,fs=function(t){us(e,t);function e(r){var n=t.call(this)||this;return r&&(n.copy(r,n),"requestHeaders"in r&&n.copy(r.requestHeaders,n.requestHeaders)),n}return e.prototype.init=function(r,n){this.client=r,r.uris.length>0&&(this.uri=r.uris[0]),this.returnType===void 0&&(this.returnType=n),this.timeout===void 0&&(this.timeout=r.timeout),this.copy(r.requestHeaders,this.requestHeaders)},e}(cs.Context);Be.ClientContext=fs;var J={},K={};Object.defineProperty(K,"__esModule",{value:!0});var ls=function(){function t(e){this.defaultHandler=e,this.handlers=[],this.firstHandler=e}return t.prototype.rebuildHandler=function(){for(var e=this.handlers,r=this.defaultHandler,n=e.length,i=n-1;i>=0;--i)r=this.getNextHandler(e[i],r);this.firstHandler=r},Object.defineProperty(t.prototype,"handler",{get:function(){return this.firstHandler},enumerable:!0,configurable:!0}),t.prototype.use=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];(e=this.handlers).push.apply(e,r),this.rebuildHandler()},t.prototype.unuse=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=!1,i=0,a=e.length;i<a;++i){var s=this.handlers.indexOf(e[i]);s>=0&&(this.handlers.splice(s,1),n=!0)}n&&this.rebuildHandler()},t}();K.PluginManager=ls;var ys=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(J,"__esModule",{value:!0});var hs=K,ps=function(t){ys(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getNextHandler=function(r,n){return function(i,a,s){return r(i,a,s,n)}},e}(hs.PluginManager);J.InvokeManager=ps;var Q={},ds=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Q,"__esModule",{value:!0});var vs=K,_s=function(t){ds(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getNextHandler=function(r,n){return function(i,a){return r(i,a,n)}},e}(vs.PluginManager);Q.IOManager=_s;var E={};Object.defineProperty(E,"__esModule",{value:!0});function ws(t){var e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=t.match(e);if(r){var n=r[4].split(":",2);return{protocol:r[1],host:r[4],hostname:n[0],port:parseInt(n[1],10)||0,path:r[5],query:r[7],fragment:r[9]}}throw new Error("Invalid URI")}E.parseURI=ws;function gs(t){for(var e=[Object.create(null)],r=0,n=t.length;r<n;++r){var i=t[r].split("_"),a=i.length-1;if(a>0){for(var s=e,u=0;u<a;u++){var c=i[u];s[0][c]===void 0&&(s[0][c]=[Object.create(null)]),s=s[0][c]}s.push(i[a])}e.push(t[r])}return e}E.normalize=gs;function xs(t,e){return function(){switch(arguments.length){case 1:var r=arguments[0];r instanceof Error?e(r):t(r);break;case 2:var n=arguments[0],i=arguments[1];n instanceof Error?e(n):i instanceof Error?e(i):t(n===void 0?i:n);break}}}function Bs(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new Promise(function(i,a){r.push(xs(i,a));try{t.apply(e,r)}catch(s){a(s)}})}}E.promisify=Bs;var Ss=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function Ds(t,e){e===void 0&&(e=0),e=e^-1;for(var r=0,n=t.length;r<n;++r)e=e>>>8^Ss[(e^t[r])&255];return e^-1}E.crc32=Ds;var W=f&&f.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(l){try{o(n.next(l))}catch(y){s(y)}}function c(l){try{o(n.throw(l))}catch(y){s(y)}}function o(l){l.done?a(l.value):i(l.value).then(u,c)}o((n=n.apply(t,e||[])).next())})},V=f&&f.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(l){return c([o,l])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(le,"__esModule",{value:!0});var As=ye,P=Be,zs=J,bs=Q,Bt=E;function Or(t,e){return function(){var r=Array.prototype.slice.call(arguments),n=r.length>0&&r[r.length-1]instanceof P.ClientContext?r.pop():new P.ClientContext;return t.invoke(e,r,n)}}function St(t,e,r,n,i){if(e[n]===void 0){e[n]=Object.create(null),Array.isArray(i)||(i=[i]),r=r+n+"_";for(var a=0;a<i.length;a++){var s=i[a];if(typeof s=="string")e[n][s]=Or(t,r+s);else for(var u in s)St(t,e[n],r,u,s[u])}}}function Vr(t,e){for(var r=Bt.normalize(e),n=Object.create(null),i=0;i<r.length;i++){var a=r[i];if(typeof a=="string")n[a]===void 0&&(n[a]=Or(t,a));else for(var s in a)St(t,n,"",s,a[s])}return n}var Os=function(){function t(e,r){this.client=e,this.namespace=r}return t.prototype.get=function(e,r,n){if(typeof r!="symbol"&&r!=="then")return r in e||(e[r]=new Proxy(function(){},new t(this.client,this.namespace?this.namespace+"_"+r:""+r))),e[r]},t.prototype.apply=function(e,r,n){if(this.namespace){var i=n.length>0&&n[n.length-1]instanceof P.ClientContext?n.pop():new P.ClientContext;return this.client.invoke(this.namespace,n,i)}throw new TypeError("target is not a function")},t}(),ms=function(){function t(e){var r,n=this;this.returnTypes=Object.create(null),this.requestHeaders=Object.create(null),this.codec=As.DefaultClientCodec.instance,this.timeout=3e4,this.urilist=[],this.transports=Object.create(null),this.invokeManager=new zs.InvokeManager(this.call.bind(this)),this.ioManager=new bs.IOManager(this.transport.bind(this)),t.transports.forEach(function(i){var a=i.name,s=i.ctor,u=new s;n.transports[a]=u,Object.defineProperty(n,a,{get:function(){return u},set:function(c){u=c,n.transports[a]=c},enumerable:!1,configurable:!1})}),e&&(typeof e=="string"?this.urilist.push(e):(r=this.urilist).push.apply(r,e))}return t.register=function(e,r){t.transports.push({name:e,ctor:r}),r.schemes.forEach(function(n){return t.protocols[n+":"]=e})},Object.defineProperty(t.prototype,"uris",{get:function(){return this.urilist},set:function(e){e.length>0&&(this.urilist=e.slice(0),this.urilist.sort(function(){return Math.random()-.5}))},enumerable:!0,configurable:!0}),t.prototype.useService=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n,i;switch(e.length){case 1:if(Array.isArray(e[0]))return Vr(this,e[0]);typeof e[0]=="string"?n=e[0]:i=e[0];break;case 2:n=e[0],i=e[1];break}var a=Object.create(null);if(i){for(var s in i){var u=""+s;n&&(u=n+"_"+s),this.returnTypes[u]=i[s],a[s]=Or(this,u)}return a}return new Proxy(a,new Os(this,n))},t.prototype.useServiceAsync=function(){return W(this,void 0,void 0,function(){var e;return V(this,function(r){switch(r.label){case 0:return[4,this.invoke("~")];case 1:return e=r.sent(),[2,Vr(this,e)]}})})},t.prototype.use=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length<=0)return this;switch(n[0].length){case 4:(e=this.invokeManager).use.apply(e,n);break;case 3:(r=this.ioManager).use.apply(r,n);break;default:throw new TypeError("Invalid parameter type")}return this},t.prototype.unuse=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length<=0)return this;switch(n[0].length){case 4:(e=this.invokeManager).unuse.apply(e,n);break;case 3:(r=this.ioManager).unuse.apply(r,n);break;default:throw new TypeError("Invalid parameter type")}return this},t.prototype.invoke=function(e,r,n){return r===void 0&&(r=[]),n===void 0&&(n=new P.ClientContext),W(this,void 0,void 0,function(){var i;return V(this,function(a){switch(a.label){case 0:return r===null&&(r=[]),r.length>0?[4,Promise.all(r)]:[3,2];case 1:r=a.sent(),a.label=2;case 2:return i=n instanceof P.ClientContext?n:new P.ClientContext(n),i.init(this,this.returnTypes[e]),[2,this.invokeManager.handler(e,r,i)]}})})},t.prototype.call=function(e,r,n){return W(this,void 0,void 0,function(){var i,a,s;return V(this,function(u){switch(u.label){case 0:return i=this.codec,a=i.encode(e,r,n),[4,this.request(a,n)];case 1:return s=u.sent(),[2,i.decode(s,n)]}})})},t.prototype.request=function(e,r){return this.ioManager.handler(e,r)},t.prototype.transport=function(e,r){return W(this,void 0,void 0,function(){var n,i;return V(this,function(a){if(n=Bt.parseURI(r.uri),i=t.protocols[n.protocol],i!==void 0)return[2,this.transports[i].transport(e,r)];throw new Error('The protocol "'+n.protocol+'" is not supported.')})})},t.prototype.abort=function(){return W(this,void 0,void 0,function(){var e,r;return V(this,function(n){switch(n.label){case 0:e=[];for(r in this.transports)e.push(this.transports[r].abort());return[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},t.transports=[],t.protocols=Object.create(null),t}();le.Client=ms;var Se={};Object.defineProperty(Se,"__esModule",{value:!0});var j=Object.create(null);function Ms(t,e){e===void 0&&(e="@");function r(a){var s;if(a!==void 0){var u=a.trim().split(";"),c=Object.create(null);s=u[0].trim().split("=",2),c.name=s[0],c.value=s[1];for(var o=1;o<u.length;o++){var l=u[o].trim().split("=",2),y=l[0],Er=l[1];c[y.toUpperCase()]=Er}if(c.PATH){var G=c.PATH.length;G>2&&c.PATH.charAt(0)==='"'&&c.PATH.charAt(G-1)==='"'&&(c.PATH=c.PATH.substr(1,G-2))}else c.PATH="/";c.EXPIRES&&(c.EXPIRES=Date.parse(c.EXPIRES)),c.DOMAIN?c.DOMAIN=c.DOMAIN.toLowerCase():c.DOMAIN=e,c.SECURE=c.SECURE!==void 0,j[c.DOMAIN]===void 0&&(j[c.DOMAIN]=Object.create(null)),j[c.DOMAIN][c.name]=c}}for(var n in t)if(n=n.toLowerCase(),n==="set-cookie"||n==="set-cookie2"){var i=t[n];(Array.isArray(i)?i:[i]).forEach(r)}}Se.setCookie=Ms;function Cs(t,e,r){t=t??"@",e=e??"/";var n=[];for(var i in j)if(t.indexOf(i)>-1){var a=[];for(var s in j[i]){var u=j[i][s];u.EXPIRES&&new Date().getTime()>u.EXPIRES?a.push(s):e.indexOf(u.PATH)===0&&r===u.SECURE&&u.value!==null&&n.push(u.name+"="+u.value)}for(var c=0,o=a.length;c<o;++c)delete j[i][a[c]]}return n.length>0?n.join("; "):""}Se.getCookie=Cs;var De={};Object.defineProperty(De,"__esModule",{value:!0});function Fs(){var t=Object.create(null);return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}De.defer=Fs;var ee={};Object.defineProperty(ee,"__esModule",{value:!0});var Es=function(){function t(e,r,n,i){if(this.method=e,this.name=r,this.target=n,this.paramTypes=i,r===""||r===void 0){if(e.name==="")throw new Error("name must not be empty");r=e.name}}return t}();ee.Method=Es;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});var g=ee,$s=function(){function t(){this.methods=Object.create(null),this.names=[]}return t.prototype.getNames=function(){return this.names},t.prototype.get=function(e){return e=e.toLowerCase(),e in this.methods?this.methods[e]:this.methods["*"]},t.prototype.remove=function(e){delete this.methods[e.toLowerCase()];var r=this.names.indexOf(e);r>-1&&this.names.splice(r,1)},t.prototype.add=function(e){var r=e.name;if(r===""||r===void 0){if(r=e.fullname,(r===""||r===void 0)&&(r=e.method.name,r===""))throw new Error("name must not be empty");e.name=r}this.methods[r.toLowerCase()]=e,this.names.indexOf(r)===-1&&this.names.push(r)},t.prototype.addFunction=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];switch(r.length){case 0:this.add(new g.Method(e));break;case 1:typeof r[0]=="string"?this.add(new g.Method(e,r[0])):this.add(new g.Method(e,void 0,void 0,r[0]));break;case 2:this.add(new g.Method(e,r[0],void 0,r[1]));break}},t.prototype.addMethod=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(typeof e[0]=="string"){var n=e[1][e[0]];if(typeof n=="function")this.add(new g.Method(n,e[0],e[1],e[2]));else throw new Error("obj[name] must be a function")}else switch(e.length){case 2:this.add(new g.Method(e[0],void 0,e[1]));break;case 3:typeof e[2]=="string"?this.add(new g.Method(e[0],e[2],e[1])):this.add(new g.Method(e[0],void 0,e[1],e[2]));break;case 4:this.add(new g.Method(e[0],e[2],e[1],e[3]))}},t.prototype.addMissingMethod=function(e,r){var n=new g.Method(e,"*",r);n.missing=!0,e.length===3&&(n.passContext=!0),this.add(n)},t.prototype.addFunctions=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i,a;switch(r.length){case 1:r[0].length>1&&typeof r[0][0]=="string"?i=r[0]:a=r[0];break;case 2:i=r[0],a=r[1];break}var s=e.length;if(i&&i.length!==s)throw new Error("names.length must be equal to functions.length");for(var u=0;u<s;++u)this.add(new g.Method(e[u],i?i[u]:void 0,void 0,a))},t.prototype.addMethods=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0].length;if(n!==0){var i,a=e[1],s,u;if(typeof e[0][0]=="string"){s=e[0],u=e[2];for(var c=0;c<n;++c){var o=a[s[c]];if(typeof o=="function")this.add(new g.Method(o,s[c],a,u));else throw new Error("obj[name] must be a function")}return}else i=e[0];switch(e.length){case 3:e[2].length>0&&typeof e[2][0]=="string"?s=e[2]:u=e[2];break;case 4:s=e[2],u=e[3]}if(s&&s.length!==n)throw new Error("names.length must be equal to functions.length");for(var c=0;c<n;++c)this.add(new g.Method(i[c],s?s[c]:void 0,a,u))}},t.prototype.addInstanceMethods=function(e,r){for(var n in e)if((!e.hasOwnProperty||e.hasOwnProperty(n))&&typeof e[n]=="function"){var i=r?r+"_"+n:n;this.add(new g.Method(e[n],i,e))}},t}();Ae.MethodManager=$s;var ze={},js=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ze,"__esModule",{value:!0});var Ps=function(t){js(e,t);function e(r){return r===void 0&&(r="timeout"),t.call(this,r)||this}return e}(Error);ze.TimeoutError=Ps;var be={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});var L=_,Is=function(){function t(){this.debug=!1,this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object",this.nullType=void 0}return t.prototype.encode=function(e,r){var n=new L.ByteStream,i=new L.Writer(n,this.simple,this.utc),a=r.responseHeaders;this.simple&&(a.simple=!0);var s=0;for(var u in a)s++;return s>0&&(n.writeByte(72),i.serialize(a),i.reset()),e instanceof Error?(n.writeByte(69),i.serialize(this.debug&&e.stack?e.stack:e.message)):(n.writeByte(82),i.serialize(e)),n.writeByte(122),n.takeBytes()},t.prototype.decodeMethod=function(e,r){var n=r.service,i=n.get(e);if(i===void 0)throw new Error("Can't find this method "+e+"().");return r.method=i,i},t.prototype.decodeArguments=function(e,r,n){var i=r.stream,a=i.readByte();if(e.missing)return a===97?(r.reset(),r.read(a,Array)):[];var s=[];if(a===97){r.reset();var u=L.ValueReader.readCount(i),c=e.paramTypes;if(c===void 0)c=new Array(u).fill(this.nullType);else{c.length=u;for(var o=0;o<u;++o)c[o]===void 0&&(c[o]=this.nullType)}s=new Array(u),r.addReference(s);for(var o=0;o<u;++o)s[o]=r.deserialize(c[o]);i.readByte()}return s},t.prototype.decode=function(e,r){if(e.length===0)return this.decodeMethod("~",r),["~",[]];var n=new L.ByteStream(e),i=new L.Reader(n,!1);i.longType=this.longType,i.dictType=this.dictType;var a=n.readByte();if(a===72){var s=i.deserialize(this.nullType);for(var u in s)r.requestHeaders[u]=s[u];i.reset(),a=n.readByte()}switch(a){case 67:r.requestHeaders.simple&&(i.simple=!0);var c=i.deserialize(String),o=this.decodeArguments(this.decodeMethod(c,r),i,r);return[c,o];case 122:return this.decodeMethod("~",r),["~",[]];default:throw new Error(`Invalid request:\r
`+n.toString())}},t.instance=new t,t}();Oe.DefaultServiceCodec=Is;var Lr=f&&f.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(l){try{o(n.next(l))}catch(y){s(y)}}function c(l){try{o(n.throw(l))}catch(y){s(y)}}function o(l){l.done?a(l.value):i(l.value).then(u,c)}o((n=n.apply(t,e||[])).next())})},Xr=f&&f.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(l){return c([o,l])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ie=f&&f.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],s=0,u=a.length;s<u;s++,i++)n[i]=a[s];return n};Object.defineProperty(be,"__esModule",{value:!0});var Ts=Oe,Rs=J,ks=Q,Us=ee,Hs=Ae,Ns=function(){function t(){var e=this;this.codec=Ts.DefaultServiceCodec.instance,this.maxRequestLength=2147483647,this.invokeManager=new Rs.InvokeManager(this.execute.bind(this)),this.ioManager=new ks.IOManager(this.process.bind(this)),this.methodManager=new Hs.MethodManager,this.handlers=Object.create(null),this.options=Object.create(null);var r=function(a){var s=t.handlers[a],u=new s(n);n.handlers[a]=u,Object.defineProperty(n,a,{get:function(){return u},set:function(c){u=c,e.handlers[a]=c},enumerable:!0,configurable:!0})},n=this;for(var i in t.handlers)r(i);this.add(new Us.Method(this.methodManager.getNames.bind(this.methodManager),"~"))}return t.register=function(e,r){t.handlers[e]=r,r.serverTypes.forEach(function(n){t.serverTypes.has(n)?t.serverTypes.get(n).push(e):t.serverTypes.set(n,[e])})},Object.defineProperty(t.prototype,"names",{get:function(){return this.methodManager.getNames()},enumerable:!0,configurable:!0}),t.prototype.bind=function(e,r){var n=e.constructor,i=t.serverTypes;if(i.has(n))for(var a=i.get(n),s=0,u=a.length;s<u;++s)(r===void 0||r===a[s])&&this.handlers[a[s]].bind(e);else throw new Error("This type server is not supported.");return this},t.prototype.handle=function(e,r){return this.ioManager.handler(e,r)},t.prototype.process=function(e,r){return Lr(this,void 0,void 0,function(){var n,i,a,s,u,c;return Xr(this,function(o){switch(o.label){case 0:n=this.codec,o.label=1;case 1:return o.trys.push([1,3,,4]),a=n.decode(e,r),s=a[0],u=a[1],[4,this.invokeManager.handler(s,u,r)];case 2:return i=o.sent(),[3,4];case 3:return c=o.sent(),i=c,[3,4];case 4:return[2,n.encode(i,r)]}})})},t.prototype.execute=function(e,r,n){return Lr(this,void 0,void 0,function(){var i,a;return Xr(this,function(s){return i=n.method,a=i.method,i.missing?i.passContext?[2,a.apply(i.target,[e,r,n])]:[2,a.apply(i.target,[e,r])]:(i.passContext&&r.push(n),[2,a.apply(i.target,r)])})})},t.prototype.use=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length<=0)return this;switch(n[0].length){case 4:(e=this.invokeManager).use.apply(e,n);break;case 3:(r=this.ioManager).use.apply(r,n);break;default:throw new TypeError("Invalid parameter type")}return this},t.prototype.unuse=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length<=0)return this;switch(n[0].length){case 4:(e=this.invokeManager).unuse.apply(e,n);break;case 3:(r=this.ioManager).unuse.apply(r,n);break;default:throw new TypeError("Invalid parameter type")}return this},t.prototype.get=function(e){return this.methodManager.get(e)},t.prototype.add=function(e){return this.methodManager.add(e),this},t.prototype.remove=function(e){return this.methodManager.remove(e),this},t.prototype.addFunction=function(e){for(var r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(r=this.methodManager).addFunction.apply(r,ie([e],n)),this},t.prototype.addMethod=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(e=this.methodManager).addMethod.apply(e,ie([r[0],r[1]],r.slice(2))),this},t.prototype.addMissingMethod=function(e,r){return this.methodManager.addMissingMethod(e,r),this},t.prototype.addFunctions=function(e){for(var r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(r=this.methodManager).addFunctions.apply(r,ie([e],n)),this},t.prototype.addMethods=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(e=this.methodManager).addMethods.apply(e,ie([r[0],r[1]],r.slice(2))),this},t.prototype.addInstanceMethods=function(e,r){return this.methodManager.addInstanceMethods(e,r),this},t.handlers=Object.create(null),t.serverTypes=new Map,t}();be.Service=Ns;var me={},qs=f&&f.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(me,"__esModule",{value:!0});var Gs=Z,Ws=function(t){qs(e,t);function e(r){var n=t.call(this)||this;return n.service=r,n}return e}(Gs.Context);me.ServiceContext=Ws;var Me={},Ce={},Vs=f&&f.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(l){try{o(n.next(l))}catch(y){s(y)}}function c(l){try{o(n.throw(l))}catch(y){s(y)}}function o(l){l.done?a(l.value):i(l.value).then(u,c)}o((n=n.apply(t,e||[])).next())})},Ls=f&&f.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(l){return c([o,l])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(Ce,"__esModule",{value:!0});var Xs=function(){function t(){}return t.register=function(e,r){t.handlers[e]=r},t.cancel=function(e){delete t.handlers[e]},t.handler=function(e,r){return Vs(this,void 0,void 0,function(){var n;return Ls(this,function(i){if(n=t.handlers[e],n)return[2,n(e,r)];throw new Error("Server is stopped")})})},t.handlers=Object.create(null),t}();Ce.MockAgent=Xs;var Ys=f&&f.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(l){try{o(n.next(l))}catch(y){s(y)}}function c(l){try{o(n.throw(l))}catch(y){s(y)}}function o(l){l.done?a(l.value):i(l.value).then(u,c)}o((n=n.apply(t,e||[])).next())})},Zs=f&&f.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(l){return c([o,l])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(Me,"__esModule",{value:!0});var Js=me,Ks=be,Dt=Ce,At=function(){function t(e){this.address=e}return t.prototype.close=function(){Dt.MockAgent.cancel(this.address)},t}();Me.MockServer=At;var zt=function(){function t(e){var r=this;this.service=e,this.handler=function(n,i){return Ys(r,void 0,void 0,function(){var a,s;return Zs(this,function(u){if(i.length>this.service.maxRequestLength)throw new Error("Request entity too large");return a=new Js.ServiceContext(this.service),s={family:"mock",address:n,port:0},a.remoteAddress=s,a.localAddress=s,a.handler=this,[2,this.service.handle(i,a)]})})}}return t.prototype.bind=function(e){Dt.MockAgent.register(e.address,this.handler)},t.serverTypes=[At],t}();Me.MockHandler=zt;Ks.Service.register("mock",zt);var mr={},Yr=f&&f.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(l){try{o(n.next(l))}catch(y){s(y)}}function c(l){try{o(n.throw(l))}catch(y){s(y)}}function o(l){l.done?a(l.value):i(l.value).then(u,c)}o((n=n.apply(t,e||[])).next())})},Zr=f&&f.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(l){return c([o,l])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(mr,"__esModule",{value:!0});var Qs=le,eu=E,ru=Ce,tu=De,nu=ze,bt=function(){function t(){}return t.prototype.transport=function(e,r){return Yr(this,void 0,void 0,function(){var n,i,a;return Zr(this,function(s){return n=eu.parseURI(r.uri),i=tu.defer(),r.timeout>0&&(a=setTimeout(function(){i.reject(new nu.TimeoutError)},r.timeout),i.promise.then(function(){clearTimeout(a)},function(){clearTimeout(a)})),ru.MockAgent.handler(n.hostname,e).then(function(u){return i.resolve(u)},function(u){return i.reject(u)}),[2,i.promise]})})},t.prototype.abort=function(){return Yr(this,void 0,void 0,function(){return Zr(this,function(e){return[2]})})},t.schemes=["mock"],t}();mr.MockTransport=bt;Qs.Client.register("mock",bt);Object.defineProperty(h,"__esModule",{value:!0});var iu=le,Au=h.Client=iu.Client,au=ye;h.DefaultClientCodec=au.DefaultClientCodec;var ou=Be,zu=h.ClientContext=ou.ClientContext,su=Z;h.Context=su.Context;var Ot=Se;h.getCookie=Ot.getCookie;h.setCookie=Ot.setCookie;var uu=De;h.defer=uu.defer;var cu=K;h.PluginManager=cu.PluginManager;var fu=J;h.InvokeManager=fu.InvokeManager;var lu=Q;h.IOManager=lu.IOManager;var yu=ee;h.Method=yu.Method;var hu=Ae;h.MethodManager=hu.MethodManager;var pu=ze;h.TimeoutError=pu.TimeoutError;var Fe=E;h.parseURI=Fe.parseURI;h.normalize=Fe.normalize;h.promisify=Fe.promisify;h.crc32=Fe.crc32;var du=be;h.Service=du.Service;var vu=Oe;h.DefaultServiceCodec=vu.DefaultServiceCodec;var _u=me;h.ServiceContext=_u.ServiceContext;var mt=Me;h.MockServer=mt.MockServer;h.MockHandler=mt.MockHandler;var wu=mr;h.MockTransport=wu.MockTransport;var Mr={},Cr={},Jr=f&&f.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(l){try{o(n.next(l))}catch(y){s(y)}}function c(l){try{o(n.throw(l))}catch(y){s(y)}}function o(l){l.done?a(l.value):i(l.value).then(u,c)}o((n=n.apply(t,e||[])).next())})},Kr=f&&f.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(l){return c([o,l])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(Cr,"__esModule",{value:!0});var Mt=h;function gu(t){var e=Object.create(null);if(t){for(var r=t.split(`\r
`),n=0,i=r.length;n<i;n++)if(r[n]!==""){var a=r[n].split(": ",2).map(function(c){return c.trim()}),s=a[0],u=a[1];(e.hasOwnProperty?e.hasOwnProperty(s):s in e)?Array.isArray(e[s])?e[s].push(u):e[s]=[e[s],u]:e[s]=u}}return e}var Ct=function(){function t(){this.counter=0,this.requests=Object.create(null),this.httpRequestHeaders=Object.create(null),this.onprogress=null}return t.prototype.setRequestHeaders=function(e,r){for(var n in r)if(!r.hasOwnProperty||r.hasOwnProperty(n)){var i=r[n];i!==void 0&&(Array.isArray(i)?e[n]=i.join(", "):e[n]=i+"")}},t.prototype.getRequestHeaders=function(e){var r=Object.create(null);return this.setRequestHeaders(r,this.httpRequestHeaders),e&&this.setRequestHeaders(r,e),r},t.prototype.transport=function(e,r){return Jr(this,void 0,void 0,function(){var n,i,a,s,u,c,o,l,y=this;return Kr(this,function(Er){n=this.counter<2147483647?++this.counter:this.counter=0,i=new XMLHttpRequest,a=this,this.requests[n]=i,s=r,u=this.getRequestHeaders(s.httpRequestHeaders),c=new Promise(function(G,re){i.upload.onprogress=i.onprogress=y.onprogress,i.upload.onerror=i.onerror=function(Ee){delete a.requests[n],re(new Error("network error"))},i.upload.onabort=i.onabort=function(Ee){delete a.requests[n],re(new Error("transport abort"))},i.upload.ontimeout=i.ontimeout=function(Ee){delete a.requests[n],re(new Mt.TimeoutError)},i.onload=function(Ee){delete a.requests[n],s.httpStatusCode=this.status,s.httpStatusText=this.statusText,this.status>=200&&this.status<300?(s.httpResponseHeaders=gu(this.getAllResponseHeaders()),G(new Uint8Array(this.response))):re(new Error(this.status+":"+this.statusText))}}),i.open("POST",r.uri,!0),i.withCredentials=!0,i.responseType="arraybuffer",i.timeout=r.timeout;for(o in u)i.setRequestHeader(o,u[o]);return typeof ArrayBuffer.isView=="function"?i.send(e):typeof e.buffer.slice=="function"?i.send(e.buffer.slice(e.byteOffset,e.length)):(l=new Uint8Array(e.length),l.set(e),i.send(l.buffer)),[2,c]})})},t.prototype.abort=function(){return Jr(this,void 0,void 0,function(){var e,r;return Kr(this,function(n){for(e in this.requests)r=this.requests[e],delete this.requests[e],r&&r.abort();return[2]})})},t.schemes=["http","https"],t}();Cr.HttpTransport=Ct;Mt.Client.register("http",Ct);var Fr={},ae=f&&f.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(l){try{o(n.next(l))}catch(y){s(y)}}function c(l){try{o(n.throw(l))}catch(y){s(y)}}function o(l){l.done?a(l.value):i(l.value).then(u,c)}o((n=n.apply(t,e||[])).next())})},oe=f&&f.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(l){return c([o,l])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(Fr,"__esModule",{value:!0});var ue=h,Qr=_,Ft=function(){function t(){this.counter=0,this.results=Object.create(null),this.websockets=Object.create(null)}return t.prototype.connect=function(e){return ae(this,void 0,void 0,function(){var r,n,i,a=this;return oe(this,function(s){switch(s.label){case 0:return[4,this.websockets[e]];case 1:return r=s.sent(),r!==void 0&&r.readyState!==WebSocket.CLOSING&&r.readyState!==WebSocket.CLOSED?[2,r]:(n=ue.defer(),r=new WebSocket(e,"hprose"),r.binaryType="arraybuffer",r.onopen=function(){return n.resolve(r)},r.onmessage=function(u){return ae(a,void 0,void 0,function(){var c,o,l;return oe(this,function(y){return c=new Qr.ByteStream(u.data),o=c.readInt32BE(),l=this.results[e][o],delete this.results[e][o],l&&l.resolve(c.remains),[2]})})},i=function(u){var c=a.results[e];if(c)for(var o in c){var l=c[o];delete c[o],l.reject(u)}delete a.websockets[e]},r.onerror=function(u){return i(new Error("error"))},r.onclose=function(u){u.reason?i(new Error(u.code+":"+u.reason)):i(new Error(""+u.code))},this.websockets[e]=n.promise,[2,n.promise])}})})},t.prototype.transport=function(e,r){return ae(this,void 0,void 0,function(){var n,i,a,s,u,c,o,l=this;return oe(this,function(y){switch(y.label){case 0:return n=r.uri,i=this.counter<2147483647?++this.counter:this.counter=0,a=ue.defer(),[4,this.connect(n)];case 1:return s=y.sent(),this.results[n]===void 0&&(this.results[n]=Object.create(null)),this.results[n][i]=a,r.timeout>0&&(u=setTimeout(function(){delete l.results[n][i],a.reject(new ue.TimeoutError)},r.timeout),a.promise.then(function(){clearTimeout(u)},function(){clearTimeout(u)})),c=new Qr.ByteStream(4+e.length),c.writeInt32BE(i),c.write(e),o=c.takeBytes(),typeof ArrayBuffer.isView=="function"?s.send(o):s.send(o.buffer),[2,a.promise]}})})},t.prototype.abort=function(){return ae(this,void 0,void 0,function(){var e,r,n,i,a;return oe(this,function(s){switch(s.label){case 0:e=[];for(r in this.websockets)e.push(r);n=0,s.label=1;case 1:return n<e.length?(i=e[n],a=this.websockets[i],delete this.websockets[i],a?[4,a]:[3,3]):[3,4];case 2:s.sent().close(1e3),s.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.schemes=["ws","wss"],t}();Fr.WebSocketTransport=Ft;ue.Client.register("websocket",Ft);Object.defineProperty(Mr,"__esModule",{value:!0});var xu=Cr,bu=Mr.HttpTransport=xu.HttpTransport,Bu=Fr;Mr.WebSocketTransport=Bu.WebSocketTransport;export{Du as B,zu as C,bu as H,Au as a};
