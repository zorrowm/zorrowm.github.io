!function(){function e(e,n,t,r,o,l,a){try{var s=e[l](a),u=s.value}catch(i){return void t(i)}s.done?n(u):Promise.resolve(u).then(r,o)}function n(n){return function(){var t=this,r=arguments;return new Promise((function(o,l){var a=n.apply(t,r);function s(n){e(a,o,l,s,u,"next",n)}function u(n){e(a,o,l,s,u,"throw",n)}s(void 0)}))}}System.register(["./ant-design-vue-exp-legacy.66cea81e.js","./vendor-legacy.ecbffdeb.js","./xframelib-exp-legacy.dacdec32.js","./logo-legacy.09dfc196.js","./index-legacy.45ca60c1.js","./@vue-exp-legacy.b493abed.js","./lodash-es-exp-legacy.5e983146.js","./axios-exp-legacy.2267007d.js","./@hprose-exp-legacy.47b094bd.js"],(function(e){"use strict";var t,r,o,l,a,s,u,i,c,d,f,g,p,m,v,y,h,w,x,b,k,S,_,j,M,T,P,R;return{setters:[function(e){t=e.I,r=e.g,o=e.h,l=e.B,a=e.F},function(e){s=e.P,u=e.Q},function(e){i=e.M,c=e.f,d=e.G,f=e.l,g=e.b,p=e.a,m=e.u},function(e){v=e._},function(e){y=e._},function(e){h=e.d,w=e.r,x=e.l,b=e.o,k=e.W,S=e.M,_=e.N,j=e.f,M=e.S,T=e.Q,P=e.Z,R=e.V},function(){},function(){},function(){}],execute:function(){var I=h({setup:function(){var e,t=i.t,r=w({username:"",password:""}),o=x(),l=x(),a=x("统一用户验证服务"),v=s(),y=u(),h=k();function k(){var e=document.URL.indexOf("redirect=");if(e>0)return document.URL.substring(e+9)}console.log(h,"011111111111");var S=function(){var e=n(regeneratorRuntime.mark((function e(){var n,o,l,a,s,u,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.username.trim()&&""!=r.password.trim()){e.next=2;break}return e.abrupt("return",null===(n=i.Message)||void 0===n?void 0:n.warn(t("sys.login.loginEmtyWarnInfo")));case 2:return o={username:r.username.trim(),pwd:p.MD5(r.password)},e.next=5,m(o);case 5:if(l=e.sent){e.next=9;break}return null===(a=i.Message)||void 0===a||a.warn(t("sys.login.loginFailTitle")),e.abrupt("return");case 9:l.isSuccess?(u=k()||"/",v&&(console.log(u,"toPath"),u.startsWith("http://")||u.startsWith("https://")?(c=g(),window.open(u+"?tk="+c.token,"_self")):v.replace(u).then((function(e){"login"==y.name&&v.replace("/")}))),null===(s=i.Message)||void 0===s||s.msg(t("sys.login.loginSuccessTitle"))):null===(d=i.Message)||void 0===d||d.warn(l.ResultDescription||t("sys.login.loginFailTitle"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b(n(regeneratorRuntime.mark((function n(){var r,o,l,a,s,u,p,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h=k(),console.log(h,"11111111111"),h&&(e=null===(r=y.query)||void 0===r||null===(o=r.tk)||void 0===o?void 0:o.toString()),!e){n.next=11;break}return console.log("进行验证token!!!"),n.next=7,c(e);case 7:l=n.sent,console.log(l,"输出checkToken的结果00"),(a=null==l?void 0:l.data)&&(a.isSuccess?(d(a.resultValue),f(a.resultValue.doubleToken),null===(s=i.Message)||void 0===s||s.msg(t("sys.login.loginSuccessTitle")),(u=g())&&((null===(p=h)||void 0===p?void 0:p.indexOf("?"))>0?h+="&tk="+u.token:h+="?tk="+u.token,v.replace(h).then((function(e){"login"==y.name&&v.replace("/")})))):null===(m=i.Message)||void 0===m||m.warn(t("sys.login.loginTokenFailInfo")));case 11:case"end":return n.stop()}}),n)})))),{t:t,formState:r,onblur:function(){o.value&&(o.value.placeholder=t("sys.login.accountPlaceholder")),l.value&&(l.value.placeholder=t("sys.login.passwordPlaceholder"))},nameInput:o,pwdInput:l,systemTitle:a,handleSubmit:S}}}),U={class:"bgc-image"},F=T("img",{src:v,alt:"",class:"logo"},null,-1),O={style:{"text-align":"center"}};e("default",y(I,[["render",function(e,n,s,u,i,c){var d=k("UserOutlined"),f=t,g=r,p=k("LockOutlined"),m=o,v=l,y=a;return S(),_("div",U,[F,j(y,{class:"login-view",ref:"formRef",model:e.formState,rules:e.rules},{default:M((function(){return[T("p",O,P(e.systemTitle),1),j(g,{name:"username",ref:"name"},{default:M((function(){return[j(f,{placeholder:e.t("sys.login.accountPlaceholder"),class:"login-input",value:e.formState.username,"onUpdate:value":n[0]||(n[0]=function(n){return e.formState.username=n})},{prefix:M((function(){return[j(d,{style:{color:"rgba(0, 0, 0, 0.5)"}})]})),_:1},8,["placeholder","value"])]})),_:1},512),j(g,{name:"password"},{default:M((function(){return[j(m,{placeholder:e.t("sys.login.passwordPlaceholder"),class:"login-input",value:e.formState.password,"onUpdate:value":n[1]||(n[1]=function(n){return e.formState.password=n})},{prefix:M((function(){return[j(p,{style:{color:"rgba(0, 0, 0, 0.5)"}})]})),_:1},8,["placeholder","value"])]})),_:1}),j(g,null,{default:M((function(){return[j(v,{onClick:e.handleSubmit,class:"login-button"},{default:M((function(){return[R(P(e.t("sys.login.loginButton")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])])}]]))}}}))}();
