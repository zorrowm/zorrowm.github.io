!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}System.register(["./vendor-legacy.ecbffdeb.js"],(function(t){"use strict";var r;return{setters:[function(e){r=e.g}],execute:function(){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i={},o={},a={},s={},u={};Object.defineProperty(u,"__esModule",{value:!0});var c=new Uint8Array(0);function f(e,t,r){return e[t++]=r>>>24&255,e[t++]=r>>>16&255,e[t++]=r>>>8&255,e[t++]=255&r,t}function l(e,t,r){return e[t++]=255&r,e[t++]=r>>>8&255,e[t++]=r>>>16&255,e[t++]=r>>>24&255,t}function p(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1}u.writeInt32BE=f,u.writeInt32LE=l;var h=!0;try{y(new Uint8Array([1,2]))}catch(Bs){h=!1}function y(e){return h?String.fromCharCode.apply(String,e):String.fromCharCode.apply(String,function(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}(e))}function d(e,t){if(t<0&&(t=e.length),0===t)return["",0];var r=0,n=0,i=t<32767?t:32767,o=new Uint16Array(i+1),a=e.length,s=[];do{for(;r<i&&n<a;r++){var u=e[n++];switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o[r]=u;break;case 12:case 13:if(n<a){o[r]=(31&u)<<6|63&e[n++];break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(n+1<a){o[r]=(15&u)<<12|(63&e[n++])<<6|63&e[n++];break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(n+2<a){var c=((7&u)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;if(0<=c&&c<=1048575){o[r++]=c>>10&1023|55296,o[r]=1023&c|56320;break}throw new Error("Character outside valid Unicode range: 0x"+c.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}}s.push(y(o.subarray(0,r))),t-=r,r=0,i>t&&(i=t)}while(r<t&&n<a);return[1===s.length?s[0]:s.join(""),n]}function v(e){return d(e,e.length)[0]}function w(e){var t=e instanceof Uint8Array?e:new Uint8Array(e),r=t.length;if(0===r)return"";if(r<65535)return y(t);for(var n=32767&r,i=r>>15,o=new Array(n?i+1:i),a=0;a<i;++a)o[a]=y(t.subarray(a<<15,a+1<<15));return n&&(o[i]=y(t.subarray(i<<15,r))),o.join("")}u.fromUint8Array=v,u.toBinaryString=w;var _=function(){function e(t){this.buffer=c,this.size=0,this.offset=0,this.rmark=0,this.wmark=0,t&&("number"==typeof t?this.buffer=new Uint8Array(t):"string"==typeof t?this.writeString(t):(t instanceof e?this.buffer=t.toBytes():t instanceof Uint8Array?this.buffer=t:t instanceof Uint8ClampedArray?this.buffer=new Uint8Array(t.buffer,t.byteOffset,t.length):this.buffer=new Uint8Array(t),this.size=t.length),this.mark())}return e.toString=function(t){return void 0===t?Object.toString.apply(e):"string"==typeof t?t:t instanceof e?t.toString():t instanceof Uint8Array?v(t):t instanceof ArrayBuffer?v(new Uint8Array(t,0)):y(t)},e.prototype.grow=function(e){var t=this.capacity;if((e=this.size+e)>t)if(t>0){var r=new Uint8Array(p(e));r.set(this.buffer),this.buffer=r}else this.buffer=new Uint8Array(Math.max(p(e),1024))},Object.defineProperty(e.prototype,"capacity",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.offset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){return this.buffer.subarray(0,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remains",{get:function(){return this.buffer.subarray(this.offset,this.size)},enumerable:!0,configurable:!0}),e.prototype.mark=function(){this.wmark=this.size,this.rmark=this.offset},e.prototype.reset=function(){this.size=this.wmark,this.offset=this.rmark},e.prototype.clear=function(){this.buffer=c,this.size=0,this.offset=0,this.wmark=0,this.rmark=0},e.prototype.writeByte=function(e){this.grow(1),this.buffer[this.size++]=e},e.prototype.writeInt32BE=function(e){if(e!==(0|e))throw new TypeError("value is out of bounds");this.grow(4),this.size=f(this.buffer,this.size,e)},e.prototype.writeUInt32BE=function(e){if(e<0||e!==(0|e)&&2147483648+(2147483647&e)!==e)throw new TypeError("value is out of bounds");this.grow(4),this.size=f(this.buffer,this.size,0|e)},e.prototype.writeInt32LE=function(e){if(e!==(0|e))throw new TypeError("value is out of bounds");this.grow(4),this.size=l(this.buffer,this.size,e)},e.prototype.writeUInt32LE=function(e){if(e<0||e!==(0|e)&&2147483648+(2147483647&e)!==e)throw new TypeError("value is out of bounds");this.grow(4),this.size=l(this.buffer,this.size,0|e)},e.prototype.write=function(t){var r=t instanceof ArrayBuffer?t.byteLength:t.length;if(0!==r){this.grow(r);var n=this.buffer,i=this.size;t instanceof e?n.set(t.bytes,i):t instanceof ArrayBuffer?n.set(new Uint8Array(t),i):n.set(t,i),this.size+=r}},e.prototype.writeAsciiString=function(e){var t=e.length;if(0!==t){this.grow(t);for(var r=this.buffer.subarray(this.size),n=0;n<t;++n)r[n]=e.charCodeAt(n);this.size+=t}},e.prototype.writeString=function(e){var t=e.length;if(0!==t){this.grow(3*t);for(var r=this.buffer,n=this.size,i=0;i<t;++i){var o=e.charCodeAt(i);if(o<128)r[n++]=o;else if(o<2048)r[n++]=192|o>>6,r[n++]=128|63&o;else{if(!(o<55296||o>57343)){if(i+1<t){var a=e.charCodeAt(i+1);if(o<56320&&56320<=a&&a<=57343){var s=65536+((1023&o)<<10|1023&a);r[n++]=240|s>>18,r[n++]=128|s>>12&63,r[n++]=128|s>>6&63,r[n++]=128|63&s,++i;continue}}throw new Error("Malformed string")}r[n++]=224|o>>12,r[n++]=128|o>>6&63,r[n++]=128|63&o}}this.size=n}},e.prototype.readByte=function(){return this.offset>=this.size?-1:this.buffer[this.offset++]},e.prototype.readInt32BE=function(){var e=this.buffer,t=this.offset;if(t+3>=this.size)throw new Error("EOF");var r=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];return this.offset=t,r},e.prototype.readUInt32BE=function(){var e=this.readInt32BE();return e>=0?e:2147483648+(2147483647&e)},e.prototype.readInt32LE=function(){var e=this.buffer,t=this.offset;if(t+3>=this.size)throw new Error("EOF");var r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;return this.offset=t,r},e.prototype.readUInt32LE=function(){var e=this.readInt32LE();return e>=0?e:2147483648+(2147483647&e)},e.prototype.read=function(e){return(e<0||this.offset+e>this.size)&&(e=this.size-this.offset),0===e?c:this.buffer.subarray(this.offset,this.offset+=e)},e.prototype.skip=function(e){return 0===e?0:(e<0||this.offset+e>this.size?(e=this.size-this.offset,this.offset=this.size):this.offset+=e,e)},e.prototype.readBytes=function(e){var t,r=this.buffer.indexOf(e,this.offset);return-1===r?(t=this.buffer.subarray(this.offset,this.size),this.offset=this.size):(t=this.buffer.subarray(this.offset,r+1),this.offset=r+1),t},e.prototype.readUntil=function(e){var t=this.buffer.indexOf(e,this.offset),r="";return t===this.offset?this.offset++:-1===t?(r=v(this.buffer.subarray(this.offset,this.size)),this.offset=this.size):(r=v(this.buffer.subarray(this.offset,t)),this.offset=t+1),r},e.prototype.readAsciiString=function(e){return w(this.read(e))},e.prototype.readStringAsBytes=function(e){if(0===e)return c;var t=this.buffer.subarray(this.offset,this.size);if(e<0)return this.offset=this.size,t;for(var r=0,n=0,i=t.length;n<e&&r<i;n++){var o=t[r++];switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(r<i){r++;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(r+1<i){r+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(r+2<i){var a=((7&o)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536;if(0<=a&&a<=1048575){n++;break}throw new Error("Character outside valid Unicode range: 0x"+a.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+o.toString(16))}}return this.offset+=r,t.subarray(0,r)},e.prototype.readString=function(e){var t=d(this.buffer.subarray(this.offset,this.size),e),r=t[0],n=t[1];return this.offset+=n,r},e.prototype.takeBytes=function(){var e=this.bytes;return this.clear(),e},e.prototype.toBytes=function(){return new Uint8Array(this.bytes)},e.prototype.toString=function(){return v(this.bytes)},e.prototype.clone=function(){return new e(this.toBytes())},e.prototype.trunc=function(){this.buffer=this.remains,this.size=this.buffer.length,this.offset=0,this.wmark=0,this.rmark=0},e}();u.ByteStream=_;var b={},g={},m={};Object.defineProperty(m,"__esModule",{value:!0});var O=function(){function e(){}return e.prototype.write=function(e,t){e.stream.writeByte(110)},e.prototype.serialize=function(e,t){this.write(e,t)},e}();m.BaseSerializer=O;var S={},B={};function A(e,t,r,n,i,o,a,s,u){0===i&&0===o&&0===a&&0===s?j(e,t,r,n):(1970===t&&1===r&&1===n||j(e,t,r,n),M(e,i,o,a,s)),e.writeByte(u?90:59)}function j(e,t,r,n){e.writeByte(68),e.writeAsciiString(("0000"+t).slice(-4)),e.writeAsciiString(("00"+r).slice(-2)),e.writeAsciiString(("00"+n).slice(-2))}function M(e,t,r,n,i){e.writeByte(84),e.writeAsciiString(("00"+t).slice(-2)),e.writeAsciiString(("00"+r).slice(-2)),e.writeAsciiString(("00"+n).slice(-2)),i>0&&(e.writeByte(46),e.writeAsciiString(("000"+i).slice(-3)))}Object.defineProperty(B,"__esModule",{value:!0}),B.writeInteger=function(e,t){0<=t&&t<=9?e.writeByte(48+t):(t===(0|t)?e.writeByte(105):e.writeByte(108),e.writeAsciiString(""+t),e.writeByte(59))},B.writeDouble=function(e,t){isNaN(t)?e.writeByte(78):isFinite(t)?(e.writeByte(100),e.writeAsciiString(""+t),e.writeByte(59)):(e.writeByte(73),e.writeByte(t>0?43:45))},B.writeBigInt=function(e,t){0<=t&&t<=9?e.writeByte(48+Number(t)):(e.writeByte(108),e.writeAsciiString(""+t),e.writeByte(59))},B.writeStringBody=function(e,t){var r=t.length;r>0&&e.writeAsciiString(""+r),e.writeByte(34),e.writeString(t),e.writeByte(34)},B.writeUTCDate=function(e,t){A(e,t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0)},B.writeLocalDate=function(e,t){A(e,t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1)},B.writeDateTime=A,B.writeDate=j,B.writeTime=M;var P,z=n&&n.__extends||(P=function(e,t){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},P(e,t)},function(e,t){function r(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(S,"__esModule",{value:!0});var D=B,T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.write=function(e,t){t=t.valueOf(),Number.isSafeInteger(t)?D.writeInteger(e.stream,t):D.writeDouble(e.stream,t)},t}(m.BaseSerializer);S.NumberSerializer=T;var I,k={},x=n&&n.__extends||(I=function(e,t){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},I(e,t)},function(e,t){function r(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(k,"__esModule",{value:!0});var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.write=function(e,t){e.stream.writeByte(t.valueOf()?116:102)},t}(m.BaseSerializer);k.BooleanSerializer=C;var E,U={},R={},H=n&&n.__extends||(E=function(e,t){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},E(e,t)},function(e,t){function r(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(R,"__esModule",{value:!0});var q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),t.prototype.write=function(e,t){e.setReference(t)},t.prototype.serialize=function(e,t){e.writeReference(t)||this.write(e,t)},t}(m.BaseSerializer);R.ReferenceSerializer=q;var F,N=n&&n.__extends||(F=function(e,t){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},F(e,t)},function(e,t){function r(){this.constructor=e}F(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(U,"__esModule",{value:!0});var G=B,L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(115),G.writeStringBody(n,r)},t.prototype.serialize=function(t,r){var n=t.stream;switch(r.length){case 0:n.writeByte(101);break;case 1:n.writeByte(117),n.writeString(r);break;default:e.prototype.serialize.call(this,t,r)}},t}(R.ReferenceSerializer);U.StringSerializer=L;var W,X={},V=n&&n.__extends||(W=function(e,t){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},W(e,t)},function(e,t){function r(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(X,"__esModule",{value:!0});var Y=B,$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return V(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;t.utc?Y.writeUTCDate(n,r):Y.writeLocalDate(n,r)},t}(R.ReferenceSerializer);X.DateSerializer=$;var J,K={},Q=n&&n.__extends||(J=function(e,t){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},J(e,t)},function(e,t){function r(){this.constructor=e}J(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(K,"__esModule",{value:!0});var Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(98);var i=r instanceof ArrayBuffer?r.byteLength:r.length;i>0&&n.writeAsciiString(""+i),n.writeByte(34),n.write(r),n.writeByte(34)},t}(R.ReferenceSerializer);K.BytesSerializer=Z;var ee,te={},re=n&&n.__extends||(ee=function(e,t){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ee(e,t)},function(e,t){function r(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(te,"__esModule",{value:!0});var ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return re(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(103),n.writeByte(123),n.writeAsciiString(r.toString()),n.writeByte(125)},t}(R.ReferenceSerializer);te.GuidSerializer=ne;var ie,oe={},ae=n&&n.__extends||(ie=function(e,t){return ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ie(e,t)},function(e,t){function r(){this.constructor=e}ie(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(oe,"__esModule",{value:!0});var se=function(e){function t(t){var r=e.call(this)||this;return r.writeNumber=t,r}return ae(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(97);var i=r.length;i>0&&n.writeAsciiString(""+i),n.writeByte(123);for(var o=0;o<i;o++)this.writeNumber(n,r[o]);n.writeByte(125)},t}(R.ReferenceSerializer);oe.TypedArraySerializer=se;var ue,ce={},fe=n&&n.__extends||(ue=function(e,t){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ue(e,t)},function(e,t){function r(){this.constructor=e}ue(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ce,"__esModule",{value:!0});var le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fe(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(97);var i=r.length;i>0&&n.writeAsciiString(""+i),n.writeByte(123);for(var o=0;o<i;o++)t.serialize(r[o]);n.writeByte(125)},t}(R.ReferenceSerializer);ce.ArraySerializer=le;var pe,he={},ye=n&&n.__extends||(pe=function(e,t){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},pe(e,t)},function(e,t){function r(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(he,"__esModule",{value:!0});var de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ye(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(97);var i=r.size;i>0&&n.writeAsciiString(""+i),n.writeByte(123),r.forEach((function(e){return t.serialize(e)})),n.writeByte(125)},t}(R.ReferenceSerializer);he.SetSerializer=de;var ve,we={},_e=n&&n.__extends||(ve=function(e,t){return ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ve(e,t)},function(e,t){function r(){this.constructor=e}ve(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(we,"__esModule",{value:!0});var be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _e(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(109);var i=r.size;i>0&&n.writeAsciiString(""+i),n.writeByte(123),r.forEach((function(e,r){t.serialize(r),t.serialize(e)})),n.writeByte(125)},t}(R.ReferenceSerializer);we.MapSerializer=be;var ge,me={},Oe=n&&n.__extends||(ge=function(e,t){return ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ge(e,t)},function(e,t){function r(){this.constructor=e}ge(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(me,"__esModule",{value:!0});var Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream,i=[];if(void 0===r.hasOwnProperty)for(var o in r)"function"!=typeof r[o]&&(i[i.length]=o);else for(var o in r)r.hasOwnProperty(o)&&"function"!=typeof r[o]&&(i[i.length]=o);var a=i.length;n.writeByte(109),a>0&&n.writeAsciiString(""+a),n.writeByte(123);for(var s=0;s<a;s++)t.serialize(i[s]),t.serialize(r[i[s]]);n.writeByte(125)},t}(R.ReferenceSerializer);me.DictionarySerializer=Se;var Be,Ae={},je=n&&n.__extends||(Be=function(e,t){return Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Be(e,t)},function(e,t){function r(){this.constructor=e}Be(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Ae,"__esModule",{value:!0});var Me=u,Pe=B,ze=function(e){function t(t,r,n){void 0===n&&(n=[]);var i=e.call(this)||this;if(i.type=t.constructor,0===n.length)for(var o in t)t.hasOwnProperty(o)&&"function"!=typeof t[o]&&(n[n.length]=o.toString());i.fields=n;var a=new Me.ByteStream;a.writeByte(99),Pe.writeStringBody(a,r);var s=n.length;s>0&&a.writeAsciiString(""+s),a.writeByte(123);for(var u=0;u<s;u++)a.writeByte(115),Pe.writeStringBody(a,n[u]);return a.writeByte(125),i.metadata=a.takeBytes(),i}return je(t,e),t.prototype.write=function(t,r){var n=t.stream,i=this.fields,o=this.metadata,a=i.length,s=t.writeClass(this.type,(function(){n.write(o),t.addReferenceCount(a)}));e.prototype.write.call(this,t,r),n.writeByte(111),n.writeAsciiString(""+s),n.writeByte(123);for(var u=0;u<a;u++)t.serialize(r[i[u]]);n.writeByte(125)},t}(R.ReferenceSerializer);Ae.ObjectSerializer=ze;var De,Te={},Ie=n&&n.__extends||(De=function(e,t){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},De(e,t)},function(e,t){function r(){this.constructor=e}De(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Te,"__esModule",{value:!0});var ke=B,xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ie(t,e),t.prototype.write=function(e,t){e.addReferenceCount(1);var r=e.stream;r.writeByte(69),r.writeByte(115),ke.writeStringBody(r,t.message)},t}(R.ReferenceSerializer);Te.ErrorSerializer=xe;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});var Ee=Object.create(null),Ue=new WeakMap;function Re(e,t){void 0===t&&(t=e.name),Ue.set(e,t),Ee[t]=e}"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.toString();return e.substr(0,e.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/gi,"")},writable:!1,enumerable:!1,configurable:!0}),Ce.register=Re,Ce.isRegistered=function(e){return e in Ee},Ce.getName=function(e){if(!e)return"";var t=Ue.get(e);return t||(""===(t=e.name)||"Object"===t?"":(Ue.set(e,t),Ee[t]=e,t))};var He=null;try{He="object"===e(n)?n:window}catch(Bs){}function qe(e){if(He){for(var t=He,r=e.split("."),n=0;n<r.length;n++)if(void 0===(t=t[r[n]]))return;if("function"==typeof t)return t}}function Fe(e,t,r,n){if(r<t.length){e[t[r++]]=n;var i=Fe(e,t,r,".");return void 0===i&&r<t.length&&(i=Fe(e,t,r,"_")),i}return qe(e.join(""))}Ce.getType=function(e){var t=Ee[e];if(t)return t;if(t=qe(e))return Re(t,e),t;for(var r=[],n=e.indexOf("_");n>=0;)r[r.length]=n,n=e.indexOf("_",n+1);if(r.length>0){var i=e.split("");if(void 0===(t=Fe(i,r,0,"."))&&(t=Fe(i,r,0,"_")),t)return Re(t,e),t}return t=function(){},Object.defineProperty(t,"name",{value:e}),Re(t,e),t};var Ne=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(g,"__esModule",{value:!0});var Ge=u,Le=m,We=S,Xe=k,Ve=U,Ye=X,$e=K,Je=te,Ke=oe,Qe=ce,Ze=he,et=we,tt=me,rt=Ae,nt=Te,it=Ne(Ce),ot=B,at=r,st=new Map,ut=new Le.BaseSerializer,ct=new We.NumberSerializer,ft=new Xe.BooleanSerializer,lt=new Ve.StringSerializer,pt=new Ye.DateSerializer,ht=new $e.BytesSerializer,yt=new Je.GuidSerializer,dt=new Ke.TypedArraySerializer(ot.writeInteger),vt=new Ke.TypedArraySerializer(ot.writeDouble),wt=new Qe.ArraySerializer,_t=new Ze.SetSerializer,bt=new et.MapSerializer,gt=new tt.DictionarySerializer,mt=new nt.ErrorSerializer;function Ot(e,t){st.set(e,t)}g.register=Ot,g.getInstance=function(e){var t=e.constructor;switch(t){case Function:return ut;case Number:return ct;case Boolean:return ft;case String:return lt;case Date:return pt;case at.Guid:return yt;case Array:return wt;case Set:return _t;case Map:return bt;case ArrayBuffer:case Uint8Array:case Uint8ClampedArray:case Ge.ByteStream:return ht;case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:return dt;case Float32Array:case Float64Array:return vt;case Error:return mt}var r=st.get(t);if(void 0!==r)return r;if(Array.isArray(e)||"[object Arguments]"===Object.prototype.toString.call(e))return wt;if(e instanceof Error)return Ot(t,mt),mt;var n=it.getName(t);if(""===n)return gt;if("GeneratorFunction"===n)return ut;if("AsyncFunction"===n)return ut;var i=new rt.ObjectSerializer(e,n);return Ot(t,i),i};var St,Bt=n&&n.__extends||(St=function(e,t){return St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},St(e,t)},function(e,t){function r(){this.constructor=e}St(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty({},"__esModule",{value:!0});var At=B,jt=g;if("undefined"!=typeof BigInt){var Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bt(t,e),t.prototype.write=function(e,t){At.writeBigInt(e.stream,t)},t}(m.BaseSerializer);jt.register(BigInt,new Mt)}var Pt,zt=n&&n.__extends||(Pt=function(e,t){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Pt(e,t)},function(e,t){function r(){this.constructor=e}Pt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty({},"__esModule",{value:!0});var Dt=B,Tt=g;if("undefined"!=typeof BigInt64Array&&"undefined"!=typeof BigUint64Array){var It=new(function(e){function t(){return e.call(this)||this}return zt(t,e),t.prototype.write=function(t,r){e.prototype.write.call(this,t,r);var n=t.stream;n.writeByte(97);var i=r.length;i>0&&n.writeAsciiString(""+i),n.writeByte(123);for(var o=0;o<i;o++)Dt.writeBigInt(n,r[o]);n.writeByte(125)},t}(R.ReferenceSerializer));Tt.register(BigInt64Array,It),Tt.register(BigUint64Array,It)}var kt=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(b,"__esModule",{value:!0});var xt=kt(g),Ct=function(){function e(){this.ref=new Map,this.last=0}return e.prototype.addCount=function(e){this.last+=e},e.prototype.set=function(e){this.ref.set(e,this.last++)},e.prototype.write=function(e,t){var r=this.ref.get(t);return void 0!==r&&(e.writeByte(114),e.writeAsciiString(""+r),e.writeByte(59),!0)},e.prototype.reset=function(){this.ref.clear(),this.last=0},e}(),Et=function(){function e(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),this.stream=e,this.utc=r,this.ref=new Map,this.last=0,this.simple=t}return Object.defineProperty(e.prototype,"simple",{get:function(){return void 0===this.refer},set:function(e){this.refer=e?void 0:new Ct},enumerable:!0,configurable:!0}),e.prototype.serialize=function(e){null==e?this.stream.writeByte(110):xt.getInstance(e).serialize(this,e)},e.prototype.write=function(e){null==e?this.stream.writeByte(110):xt.getInstance(e).write(this,e)},e.prototype.writeReference=function(e){return!!this.refer&&this.refer.write(this.stream,e)},e.prototype.setReference=function(e){this.refer&&this.refer.set(e)},e.prototype.addReferenceCount=function(e){this.refer&&this.refer.addCount(e)},e.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.clear(),this.last=0},e.prototype.writeClass=function(e,t){var r=this.ref.get(e);return void 0===r&&(t(),r=this.last++,this.ref.set(e,r)),r},e}();b.Writer=Et;var Ut={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});var Ht=r;function qt(e,t){void 0===t&&(t=59);var r=e.readUntil(t);return 0===r.length?0:parseInt(r,10)}function Ft(e){return qt(e,34)}function Nt(e){return 10*(e.readByte()-48)+e.readByte()-48}function Gt(e){var t=e.readByte()-48;t=10*(t=10*t+e.readByte()-48)+e.readByte()-48;var r=e.readByte();return r>=48&&r<=57&&(e.skip(2),(r=e.readByte())>=48&&r<=57&&(e.skip(2),r=e.readByte())),[t,r]}Rt.readInt=qt,Rt.readDouble=function(e){return parseFloat(e.readUntil(59))},Rt.readInfinity=function(e){return 45===e.readByte()?-1/0:1/0},Rt.readCount=function(e){return qt(e,123)},Rt.readLength=Ft,Rt.readString=function(e){var t=Ft(e),r=e.readString(t);return e.readByte(),r},Rt.readBytes=function(e){var t=Ft(e),r=e.read(t);return e.readByte(),r},Rt.readAsciiString=function(e){var t=Ft(e),r=e.readAsciiString(t);return e.readByte(),r},Rt.readGuid=function(e){e.readByte();var t=Ht.Guid.parse(e.readAsciiString(36));return e.readByte(),t},Rt.readTime=function(e){var t,r=Nt(e),n=Nt(e),i=Nt(e),o=0,a=e.readByte();return 46===a&&(o=(t=Gt(e))[0],a=t[1]),90===a?new Date(Date.UTC(1970,0,1,r,n,i,o)):new Date(1970,0,1,r,n,i,o)},Rt.readDateTime=function(e){var t,r=function(e){var t=e.readByte()-48;return 10*(t=10*(t=10*t+e.readByte()-48)+e.readByte()-48)+e.readByte()-48}(e),n=Nt(e)-1,i=Nt(e),o=e.readByte();if(84===o){var a=Nt(e),s=Nt(e),u=Nt(e),c=0;return 46===(o=e.readByte())&&(c=(t=Gt(e))[0],o=t[1]),90===o?new Date(Date.UTC(r,n,i,a,s,u,c)):new Date(r,n,i,a,s,u,c)}return 90===o?new Date(Date.UTC(r,n,i)):new Date(r,n,i)};var Lt={},Wt={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});var Vt=function(){function e(e){void 0===e&&(e="undefined"),this.type=e}return e.prototype.read=function(e,t){switch(t){case 110:return;case 114:return e.readReference();case 99:return e.readClass(),this.deserialize(e);case 69:throw new Error(e.deserialize(String))}throw new Error("Cannot convert "+function(e){switch(e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 105:return"int32 number";case 108:return"long number";case 100:return"double number";case 110:return"null | undefined";case 101:return"empty string";case 116:return"true";case 102:return"false";case 78:return"NaN";case 73:return"Infinity";case 68:case 84:return"Date";case 98:return"Uint8Array";case 117:case 115:return"string";case 103:return"guid string";case 97:return"Array";case 109:return"object | Map";case 99:return"class";case 111:return"Object";case 114:return"Reference";case 69:return"Error";default:throw new Error("Unexpected Tag: 0x"+(255&e).toString(16))}}(t)+" to "+this.type+".")},e.prototype.deserialize=function(e){return this.read(e,e.stream.readByte())},e}();Xt.BaseDeserializer=Vt;var Yt={},$t=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Yt,"__esModule",{value:!0});var Jt=$t(Rt);Yt.readBytes=function(e){var t=Jt.readBytes(e.stream);return e.addReference(t),t},Yt.readAsciiString=function(e){var t=Jt.readAsciiString(e.stream);return e.addReference(t),t},Yt.readString=function(e){var t=Jt.readString(e.stream);return e.addReference(t),t},Yt.readGuid=function(e){var t=Jt.readGuid(e.stream);return e.addReference(t),t},Yt.readDateTime=function(e){var t=Jt.readDateTime(e.stream);return e.addReference(t),t},Yt.readTime=function(e){var t=Jt.readTime(e.stream);return e.addReference(t),t},Yt.readArray=function(e){var t=e.stream,r=Jt.readCount(t),n=new Array(r);e.addReference(n);for(var i=0;i<r;++i)n[i]=e.deserialize();return t.readByte(),n},Yt.readSet=function(e){var t=e.stream,r=Jt.readCount(t),n=new Set;e.addReference(n);for(var i=0;i<r;++i)n.add(e.deserialize());return t.readByte(),n},Yt.readMap=function(e){var t=e.stream,r=new Map;e.addReference(r);for(var n=Jt.readCount(t);n>0;--n){var i=e.deserialize(),o=e.deserialize();r.set(i,o)}return t.readByte(),r},Yt.readObject=function(e){var t=e.stream,r=Jt.readInt(t,123),n=e.getTypeInfo(r),i=n.type,o=i?new i:{};e.addReference(o);for(var a=n.names,s=a.length,u=0;u<s;++u)o[a[u]]=e.deserialize();return t.readByte(),o},Yt.readObjectAsMap=function(e){var t=e.stream,r=Jt.readInt(t,123),n=e.getTypeInfo(r),i=new Map;e.addReference(i);for(var o=n.names,a=o.length,s=0;s<a;++s)i.set(o[s],e.deserialize());return t.readByte(),i};var Kt,Qt=n&&n.__extends||(Kt=function(e,t){return Kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Kt(e,t)},function(e,t){function r(){this.constructor=e}Kt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Zt=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Wt,"__esModule",{value:!0});var er=Xt,tr=Zt(Yt),rr=function(e){function t(){return e.call(this,"Array")||this}return Qt(t,e),t.prototype.read=function(t,r){switch(r){case 97:return tr.readArray(t);case 101:return[];case 115:return tr.readString(t).split("");case 98:return Array.from(tr.readBytes(t));case 114:var n=t.readReference();return n instanceof Uint8Array?Array.from(n):n instanceof String?n.split(""):n;default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(er.BaseDeserializer);Wt.ArrayDeserializer=rr;var nr,ir={},or={},ar=n&&n.__extends||(nr=function(e,t){return nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},nr(e,t)},function(e,t){function r(){this.constructor=e}nr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),sr=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(or,"__esModule",{value:!0});var ur=Xt,cr=sr(Rt),fr=sr(Yt),lr=function(e){function t(){return e.call(this,"int")||this}return ar(t,e),t.prototype.read=function(t,r){if(r>=48&&r<=57)return r-48;var n=t.stream;switch(r){case 105:case 108:return cr.readInt(n);case 100:return Math.floor(cr.readDouble(n));case 116:return 1;case 102:case 101:return 0;case 115:return parseInt(fr.readString(t));case 117:return n.readString(1).charCodeAt(1);case 68:return fr.readDateTime(t).getTime();case 84:return fr.readTime(t).getTime();case 114:var i=t.readReference();return i instanceof Date?i.getTime():parseInt(i.toString());default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(ur.BaseDeserializer);or.IntDeserializer=lr;var pr,hr={},yr=n&&n.__extends||(pr=function(e,t){return pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},pr(e,t)},function(e,t){function r(){this.constructor=e}pr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),dr=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(hr,"__esModule",{value:!0});var vr=Xt,wr=dr(Rt),_r=dr(Yt),br=function(e){function t(){return e.call(this,"number")||this}return yr(t,e),t.prototype.read=function(t,r){if(r>=48&&r<=57)return r-48;var n=t.stream;switch(r){case 105:case 108:return wr.readInt(n);case 100:return wr.readDouble(n);case 78:return NaN;case 73:return wr.readInfinity(n);case 116:return 1;case 102:case 101:return 0;case 115:return Number(_r.readString(t));case 117:return n.readString(1).charCodeAt(1);case 68:return _r.readDateTime(t).getTime();case 84:return _r.readTime(t).getTime();case 114:var i=t.readReference();return i instanceof Date?i.getTime():Number(i.toString());default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(vr.BaseDeserializer);hr.NumberDeserializer=br;var gr,mr=n&&n.__extends||(gr=function(e,t){return gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},gr(e,t)},function(e,t){function r(){this.constructor=e}gr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ir,"__esModule",{value:!0});var Or=u,Sr=or,Br=hr,Ar=Xt,jr=Rt,Mr=Yt;function Pr(e,t){var r=e.stream,n=jr.readCount(r),i=new t(n);e.addReference(i);for(var o=Sr.IntDeserializer.instance,a=0;a<n;++a)i[a]=o.deserialize(e);return r.readByte(),i}function zr(e,t){var r=e.stream,n=jr.readCount(r),i=new t(n);e.addReference(i);for(var o=Br.NumberDeserializer.instance,a=0;a<n;++a)i[a]=o.deserialize(e);return r.readByte(),i}ir.readIntArray=Pr,ir.readNumberArray=zr;var Dr=new Int8Array(0),Tr=function(e){function t(){return e.call(this,"Int8Array")||this}return mr(t,e),t.prototype.read=function(t,r){var n;switch(r){case 101:return Dr;case 97:return Pr(t,Int8Array);case 98:n=Mr.readBytes(t);break;case 117:n=new Or.ByteStream(t.stream.readString(1)).bytes;break;case 115:n=new Or.ByteStream(Mr.readString(t)).bytes;break;default:return e.prototype.read.call(this,t,r)}return new Int8Array(n.buffer,n.byteOffset,n.length)},t.instance=new t,t}(Ar.BaseDeserializer);ir.Int8ArrayDeserializer=Tr;var Ir=new Int16Array(0),kr=function(e){function t(){return e.call(this,"Int16Array")||this}return mr(t,e),t.prototype.read=function(t,r){switch(r){case 101:return Ir;case 97:return Pr(t,Int16Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Ar.BaseDeserializer);ir.Int16ArrayDeserializer=kr;var xr=new Int32Array(0),Cr=function(e){function t(){return e.call(this,"Int32Array")||this}return mr(t,e),t.prototype.read=function(t,r){switch(r){case 101:return xr;case 97:return Pr(t,Int32Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Ar.BaseDeserializer);ir.Int32ArrayDeserializer=Cr;var Er=new Uint8Array(0),Ur=function(e){function t(){return e.call(this,"Uint8Array")||this}return mr(t,e),t.prototype.read=function(t,r){switch(r){case 98:return Mr.readBytes(t);case 101:return Er;case 97:return Pr(t,Uint8Array);case 117:return new Or.ByteStream(t.stream.readString(1)).bytes;case 115:return new Or.ByteStream(Mr.readString(t)).bytes;case 114:var n=t.readReference();return n instanceof Uint8Array?n:new Or.ByteStream(n.toString()).bytes;default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Ar.BaseDeserializer);ir.Uint8ArrayDeserializer=Ur;var Rr=new Uint8ClampedArray(0),Hr=function(e){function t(){return e.call(this,"Uint8ClampedArray")||this}return mr(t,e),t.prototype.read=function(t,r){var n;switch(r){case 101:return Rr;case 97:return Pr(t,Uint8ClampedArray);case 98:n=Mr.readBytes(t);break;case 117:n=new Or.ByteStream(t.stream.readString(1)).bytes;break;case 115:n=new Or.ByteStream(Mr.readString(t)).bytes;break;case 114:var i=t.readReference();if(i instanceof Uint8ClampedArray)return i;n=i instanceof Uint8Array?i:new Or.ByteStream(i.toString()).bytes;break;default:return e.prototype.read.call(this,t,r)}return new Uint8ClampedArray(n.buffer,n.byteOffset,n.length)},t.instance=new t,t}(Ar.BaseDeserializer);ir.Uint8ClampedArrayDeserializer=Hr;var qr=new Uint16Array(0),Fr=function(e){function t(){return e.call(this,"Uint16Array")||this}return mr(t,e),t.prototype.read=function(t,r){switch(r){case 101:return qr;case 97:return Pr(t,Uint16Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Ar.BaseDeserializer);ir.Uint16ArrayDeserializer=Fr;var Nr=new Uint32Array(0),Gr=function(e){function t(){return e.call(this,"Uint32Array")||this}return mr(t,e),t.prototype.read=function(t,r){switch(r){case 101:return Nr;case 97:return Pr(t,Uint32Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Ar.BaseDeserializer);ir.Uint32ArrayDeserializer=Gr;var Lr=new Float32Array(0),Wr=function(e){function t(){return e.call(this,"Float32Array")||this}return mr(t,e),t.prototype.read=function(t,r){switch(r){case 101:return Lr;case 97:return zr(t,Float32Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Ar.BaseDeserializer);ir.Float32ArrayDeserializer=Wr;var Xr=new Float64Array(0),Vr=function(e){function t(){return e.call(this,"Float64Array")||this}return mr(t,e),t.prototype.read=function(t,r){switch(r){case 101:return Xr;case 97:return zr(t,Float64Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Ar.BaseDeserializer);ir.Float64ArrayDeserializer=Vr;var Yr,$r={},Jr=n&&n.__extends||(Yr=function(e,t){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Yr(e,t)},function(e,t){function r(){this.constructor=e}Yr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty($r,"__esModule",{value:!0});var Kr=function(e){function t(){return e.call(this,"function")||this}return Jr(t,e),t.instance=new t,t}(Xt.BaseDeserializer);$r.FunctionDeserializer=Kr;var Qr,Zr={},en=n&&n.__extends||(Qr=function(e,t){return Qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Qr(e,t)},function(e,t){function r(){this.constructor=e}Qr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),tn=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Zr,"__esModule",{value:!0});var rn=Xt,nn=tn(Rt),on=tn(Yt),an=function(e){function t(){return e.call(this,"boolean")||this}return en(t,e),t.prototype.read=function(t,r){var n=t.stream;switch(r){case 116:return!0;case 102:case 101:case 78:case 48:return!1;case 105:case 108:return 0!==nn.readInt(n);case 100:return 0!==nn.readDouble(n);case 115:return Boolean(on.readString(t));case 117:return-1==="0\0".indexOf(n.readString(1));case 73:return n.readByte(),!0;case 114:return Boolean(t.readReference().toString());default:return r>=49&&r<=57||e.prototype.read.call(this,t,r)}},t.instance=new t,t}(rn.BaseDeserializer);Zr.BooleanDeserializer=an;var sn,un={},cn=n&&n.__extends||(sn=function(e,t){return sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},sn(e,t)},function(e,t){function r(){this.constructor=e}sn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),fn=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(un,"__esModule",{value:!0});var ln=Xt,pn=fn(Rt),hn=fn(Yt),yn=function(e){function t(){return e.call(this,"string")||this}return cn(t,e),t.prototype.read=function(t,r){if(r>=48&&r<=57)return String.fromCharCode(r);var n=t.stream;switch(r){case 105:case 108:case 100:return n.readUntil(59);case 115:return hn.readString(t);case 98:return hn.readAsciiString(t);case 116:return"true";case 102:return"false";case 101:return"";case 68:return hn.readDateTime(t).toString();case 84:return hn.readTime(t).toTimeString();case 103:return hn.readGuid(t).toString();case 78:return"NaN";case 73:return pn.readInfinity(n).toString();case 117:return n.readString(1);case 97:return hn.readArray(t).join("");case 114:return t.readReference().toString();default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(ln.BaseDeserializer);un.StringDeserializer=yn;var dn,vn={},wn=n&&n.__extends||(dn=function(e,t){return dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},dn(e,t)},function(e,t){function r(){this.constructor=e}dn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_n=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(vn,"__esModule",{value:!0});var bn=Xt,gn=_n(Rt),mn=_n(Yt),On=function(e){function t(){return e.call(this,"Date")||this}return wn(t,e),t.prototype.read=function(t,r){var n=t.stream;switch(r){case 68:return mn.readDateTime(t);case 84:return mn.readTime(t);case 105:case 108:return new Date(gn.readInt(n));case 100:return new Date(Math.floor(gn.readDouble(n)));case 115:return new Date(mn.readString(t));case 116:return new Date(1);case 102:case 101:return new Date(0);case 114:var i=t.readReference();return i instanceof Date?i:new Date(i.toString());default:return r>=48&&r<=57?new Date(r-48):e.prototype.read.call(this,t,r)}},t.instance=new t,t}(bn.BaseDeserializer);vn.DateDeserializer=On;var Sn,Bn={},An=n&&n.__extends||(Sn=function(e,t){return Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Sn(e,t)},function(e,t){function r(){this.constructor=e}Sn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Bn,"__esModule",{value:!0});var jn=u,Mn=ir,Pn=Yt,zn=function(e){function t(){return e.call(this,"ByteStream")||this}return An(t,e),t.prototype.read=function(t,r){switch(r){case 98:return new jn.ByteStream(Pn.readBytes(t));case 101:return new jn.ByteStream(0);case 97:return new jn.ByteStream(Mn.readIntArray(t,Uint8Array));case 117:return new jn.ByteStream(t.stream.readString(1));case 115:return new jn.ByteStream(Pn.readString(t));case 114:var n=t.readReference();return n instanceof Uint8Array?new jn.ByteStream(n):new jn.ByteStream(n.toString());default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Xt.BaseDeserializer);Bn.ByteStreamDeserializer=zn;var Dn,Tn={},In=n&&n.__extends||(Dn=function(e,t){return Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Dn(e,t)},function(e,t){function r(){this.constructor=e}Dn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Tn,"__esModule",{value:!0});var kn=Yt,xn=function(e){function t(){return e.call(this,"Set")||this}return In(t,e),t.prototype.read=function(t,r){switch(r){case 101:return new Set;case 97:return kn.readSet(t);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Xt.BaseDeserializer);Tn.SetDeserializer=xn;var Cn,En={},Un=n&&n.__extends||(Cn=function(e,t){return Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Cn(e,t)},function(e,t){function r(){this.constructor=e}Cn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Rn=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(En,"__esModule",{value:!0});var Hn=Xt,qn=Rn(Yt),Fn=function(e){function t(){return e.call(this,"Map")||this}return Un(t,e),t.prototype.read=function(t,r){switch(r){case 101:return new Map;case 109:return qn.readMap(t);case 111:return qn.readObjectAsMap(t);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Hn.BaseDeserializer);En.MapDeserializer=Fn;var Nn,Gn={},Ln=n&&n.__extends||(Nn=function(e,t){return Nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Nn(e,t)},function(e,t){function r(){this.constructor=e}Nn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Wn=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Gn,"__esModule",{value:!0});var Xn=Xt,Vn=Wn(Yt),Yn=r,$n=function(e){function t(){return e.call(this,"Guid")||this}return Ln(t,e),t.prototype.read=function(t,r){switch(r){case 103:return Vn.readGuid(t);case 115:return Yn.Guid.parse(Vn.readString(t));case 114:var n=t.readReference();return n instanceof Yn.Guid?n:Yn.Guid.parse(n.toString());default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Xn.BaseDeserializer);Gn.GuidDeserializer=$n;var Jn,Kn={},Qn=n&&n.__extends||(Jn=function(e,t){return Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Jn(e,t)},function(e,t){function r(){this.constructor=e}Jn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Kn,"__esModule",{value:!0});var Zn=function(e){function t(){return e.call(this,"Error")||this}return Qn(t,e),t.prototype.read=function(t,r){return 69===r?new Error(t.deserialize(String)):e.prototype.read.call(this,t,r)},t.instance=new t,t}(Xt.BaseDeserializer);Kn.ErrorDeserializer=Zn;var ei,ti={},ri={},ni=n&&n.__extends||(ei=function(e,t){return ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ei(e,t)},function(e,t){function r(){this.constructor=e}ei(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ii=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(ri,"__esModule",{value:!0});var oi=Xt,ai=un,si=ii(Rt),ui=ii(Yt),ci=function(e){function t(){return e.call(this,"any")||this}return ni(t,e),t.prototype.read=function(t,r){if(r>=48&&r<=57)return r-48;var n=t.stream;switch(r){case 105:return si.readInt(n);case 115:return ui.readString(t);case 98:return ui.readBytes(t);case 116:return!0;case 102:return!1;case 101:return"";case 111:return ui.readObject(t);case 68:return ui.readDateTime(t);case 84:return ui.readTime(t);case 103:return ui.readGuid(t);case 108:switch(t.longType){case"number":return si.readInt(n);case"bigint":if("undefined"!=typeof BigInt)return BigInt(n.readUntil(59));case"string":return n.readUntil(59)}break;case 100:return si.readDouble(n);case 78:return NaN;case 73:return si.readInfinity(n);case 117:return n.readString(1);case 97:return ui.readArray(t);case 109:return"map"===t.dictType?ui.readMap(t):fi(t);case 69:return new Error(t.deserialize(String));default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(oi.BaseDeserializer);function fi(e){var t=e.stream,r=Object.create(null);e.addReference(r);for(var n=si.readCount(t),i=ai.StringDeserializer.instance,o=ci.instance;n>0;--n){var a=i.deserialize(e),s=o.deserialize(e);r[a]=s}return t.readByte(),r}ri.DefaultDeserializer=ci;var li,pi=n&&n.__extends||(li=function(e,t){return li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},li(e,t)},function(e,t){function r(){this.constructor=e}li(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ti,"__esModule",{value:!0});var hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pi(t,e),t.prototype.read=function(t,r){return 110===r?null:e.prototype.read.call(this,t,r)},t.instance=new t,t}(ri.DefaultDeserializer);ti.NullDeserializer=hi,Object.defineProperty(Lt,"__esModule",{value:!0});var yi=u,di=Wt,vi=ir,wi=$r,_i=hr,bi=Zr,gi=un,mi=vn,Oi=Bn,Si=Tn,Bi=En,Ai=Gn,ji=Kn,Mi=ti,Pi=ri,zi=r,Di=new Map;Lt.register=function(e,t){Di.set(e,t)},Lt.getInstance=function(e){if(e){switch(e){case Function:return wi.FunctionDeserializer.instance;case Number:return _i.NumberDeserializer.instance;case Boolean:return bi.BooleanDeserializer.instance;case String:return gi.StringDeserializer.instance;case Date:return mi.DateDeserializer.instance;case Array:return di.ArrayDeserializer.instance;case yi.ByteStream:return Oi.ByteStreamDeserializer.instance;case Uint8Array:return vi.Uint8ArrayDeserializer.instance;case Uint8ClampedArray:return vi.Uint8ClampedArrayDeserializer.instance;case Uint16Array:return vi.Uint16ArrayDeserializer.instance;case Uint32Array:return vi.Uint32ArrayDeserializer.instance;case Int8Array:return vi.Int8ArrayDeserializer.instance;case Int16Array:return vi.Int16ArrayDeserializer.instance;case Int32Array:return vi.Int32ArrayDeserializer.instance;case Float32Array:return vi.Float32ArrayDeserializer.instance;case Float64Array:return vi.Float64ArrayDeserializer.instance;case Set:return Si.SetDeserializer.instance;case Map:return Bi.MapDeserializer.instance;case zi.Guid:return Ai.GuidDeserializer.instance;case Error:return ji.ErrorDeserializer.instance}var t=Di.get(e);if(void 0!==t)return t}return null===e?Mi.NullDeserializer.instance:Pi.DefaultDeserializer.instance};var Ti,Ii=n&&n.__extends||(Ti=function(e,t){return Ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Ti(e,t)},function(e,t){function r(){this.constructor=e}Ti(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ki=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty({},"__esModule",{value:!0});var xi=Xt,Ci=Lt,Ei=ki(Yt);if("undefined"!=typeof BigInt){var Ui=function(e){function t(){return e.call(this,"bigint")||this}return Ii(t,e),t.prototype.read=function(t,r){if(r>=48&&r<=57)return BigInt(r-48);var n=t.stream;switch(r){case 105:case 108:case 100:return BigInt(n.readUntil(59));case 116:return BigInt(1);case 102:case 101:return BigInt(0);case 115:return BigInt(Ei.readString(t));case 117:return BigInt(n.readString(1).charCodeAt(1));case 68:return BigInt(Ei.readDateTime(t).getTime());case 84:return BigInt(Ei.readTime(t).getTime());case 114:var i=t.readReference();return i instanceof Date?BigInt(i.getTime()):BigInt(i.toString());default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(xi.BaseDeserializer);Ci.register(BigInt,Ui.instance)}var Ri,Hi=n&&n.__extends||(Ri=function(e,t){return Ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Ri(e,t)},function(e,t){function r(){this.constructor=e}Ri(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),qi=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty({},"__esModule",{value:!0});var Fi=Xt,Ni=Lt,Gi=qi(Rt);function Li(e,t){var r=e.stream,n=Gi.readCount(r),i=new t(n);e.addReference(i);for(var o=Ni.getInstance(BigInt),a=0;a<n;++a)i[a]=o.deserialize(e);return r.readByte(),i}if("undefined"!=typeof BigInt64Array){var Wi=new BigInt64Array(0),Xi=function(e){function t(){return e.call(this,"BigInt64Array")||this}return Hi(t,e),t.prototype.read=function(t,r){switch(r){case 101:return Wi;case 97:return Li(t,BigInt64Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Fi.BaseDeserializer);Ni.register(BigInt64Array,Xi.instance)}if("undefined"!=typeof BigUint64Array){var Vi=new BigUint64Array(0),Yi=function(e){function t(){return e.call(this,"BigUint64Array")||this}return Hi(t,e),t.prototype.read=function(t,r){switch(r){case 101:return Vi;case 97:return Li(t,BigUint64Array);default:return e.prototype.read.call(this,t,r)}},t.instance=new t,t}(Fi.BaseDeserializer);Ni.register(BigUint64Array,Yi.instance)}var $i=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Ut,"__esModule",{value:!0});var Ji=Rt,Ki=$i(Ce),Qi=$i(Lt),Zi=function(){function e(){this.ref=[]}return Object.defineProperty(e.prototype,"lastIndex",{get:function(){return this.ref.length-1},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.ref.push(e)},e.prototype.set=function(e,t){this.ref[e]=t},e.prototype.read=function(e){return this.ref[e]},e.prototype.reset=function(){this.ref.length=0},e}(),eo=function(){function e(e,t){void 0===t&&(t=!1),this.stream=e,this.ref=[],this.longType="number",this.dictType="object",this.simple=t}return Object.defineProperty(e.prototype,"simple",{get:function(){return void 0===this.refer},set:function(e){this.refer=e?void 0:new Zi},enumerable:!0,configurable:!0}),e.prototype.deserialize=function(e){return Qi.getInstance(e).deserialize(this)},e.prototype.read=function(e,t){return Qi.getInstance(t).read(this,e)},e.prototype.readClass=function(){for(var e=this.stream,t=Ji.readString(e),r=Ji.readCount(e),n=new Array(r),i=Qi.getInstance(String),o=0;o<r;++o)n[o]=i.deserialize(this);e.readByte(),this.ref.push({name:t,names:n,type:Ki.getType(t)})},e.prototype.getTypeInfo=function(e){return this.ref[e]},e.prototype.readReference=function(){return this.refer?this.refer.read(Ji.readInt(this.stream)):void 0},e.prototype.addReference=function(e){this.refer&&this.refer.add(e)},e.prototype.setReference=function(e,t){this.refer&&this.refer.set(e,t)},Object.defineProperty(e.prototype,"lastReferenceIndex",{get:function(){return this.refer?this.refer.lastIndex:-1},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.length=0},e}();Ut.Reader=eo;var to={};Object.defineProperty(to,"__esModule",{value:!0});var ro=u,no=b,io=Ut;to.serialize=function(e,t,r){var n=new ro.ByteStream;return new no.Writer(n,t,r).serialize(e),n.bytes},to.deserialize=function(e,t,r){return e instanceof ro.ByteStream||(e=new ro.ByteStream(e)),new io.Reader(e,r).deserialize(t)};var oo=n&&n.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(s,"__esModule",{value:!0});var ao=u;t("B",s.ByteStream=ao.ByteStream);s.writeInt32BE=ao.writeInt32BE,s.writeInt32LE=ao.writeInt32LE,s.fromUint8Array=ao.fromUint8Array,s.toBinaryString=ao.toBinaryString;var so=b;s.Writer=so.Writer;var uo=Ut;s.Reader=uo.Reader;var co=oo(Ce);s.TypeManager=co;var fo=oo(g);s.Serializer=fo;var lo=oo(Lt);s.Deserializer=lo;var po=oo(to);s.Formatter=po;var ho=oo(Yt);s.ReferenceReader=ho;var yo=oo(Rt);s.ValueReader=yo;var vo=oo(B);s.ValueWriter=vo,Object.defineProperty(a,"__esModule",{value:!0});var wo=s,_o=function(){function e(){this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object"}return e.prototype.encode=function(e,t,r){var n=new wo.ByteStream,i=new wo.Writer(n,this.simple,this.utc),o=r.requestHeaders;this.simple&&(o.simple=!0);var a=0;for(var s in o)a++;return a>0&&(n.writeByte(72),i.serialize(o),i.reset()),n.writeByte(67),i.serialize(e),t.length>0&&(i.reset(),i.serialize(t)),n.writeByte(122),n.takeBytes()},e.prototype.decode=function(e,t){var r=new wo.ByteStream(e),n=new wo.Reader(r,!1);n.longType=this.longType,n.dictType=this.dictType;var i=r.readByte();if(72===i){var o=n.deserialize();for(var a in o)t.responseHeaders[a]=o[a];n.reset(),i=r.readByte()}switch(i){case 82:return t.responseHeaders.simple&&(n.simple=!0),n.deserialize(t.returnType);case 69:throw new Error(n.deserialize(String));case 122:return null===t.type?null:void 0;default:throw new Error("Invalid response:\r\n"+r.toString())}},e.instance=new e,e}();a.DefaultClientCodec=_o;var bo={},go={};Object.defineProperty(go,"__esModule",{value:!0});var mo=function(){function e(){this.requestHeaders=Object.create(null),this.responseHeaders=Object.create(null)}return e.prototype.copy=function(e,t){if(e)for(var r in e)"requestHeaders"===r||"responseHeaders"===r||e.hasOwnProperty&&!e.hasOwnProperty(r)||(t[r]=e[r])},e.prototype.clone=function(){var e=Object.create(this.constructor.prototype);return this.copy(this,e),this.copy(this.requestHeaders,e.requestHeaders),this.copy(this.responseHeaders,e.responseHeaders),e},e}();go.Context=mo;var Oo,So=n&&n.__extends||(Oo=function(e,t){return Oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Oo(e,t)},function(e,t){function r(){this.constructor=e}Oo(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(bo,"__esModule",{value:!0});var Bo=function(e){function t(t){var r=e.call(this)||this;return t&&(r.copy(t,r),"requestHeaders"in t&&r.copy(t.requestHeaders,r.requestHeaders)),r}return So(t,e),t.prototype.init=function(e,t){this.client=e,e.uris.length>0&&(this.uri=e.uris[0]),void 0===this.returnType&&(this.returnType=t),void 0===this.timeout&&(this.timeout=e.timeout),this.copy(e.requestHeaders,this.requestHeaders)},t}(go.Context);bo.ClientContext=Bo;var Ao={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});var Mo=function(){function e(e){this.defaultHandler=e,this.handlers=[],this.firstHandler=e}return e.prototype.rebuildHandler=function(){for(var e=this.handlers,t=this.defaultHandler,r=e.length-1;r>=0;--r)t=this.getNextHandler(e[r],t);this.firstHandler=t},Object.defineProperty(e.prototype,"handler",{get:function(){return this.firstHandler},enumerable:!0,configurable:!0}),e.prototype.use=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.handlers).push.apply(e,t),this.rebuildHandler()},e.prototype.unuse=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=!1,n=0,i=e.length;n<i;++n){var o=this.handlers.indexOf(e[n]);o>=0&&(this.handlers.splice(o,1),r=!0)}r&&this.rebuildHandler()},e}();jo.PluginManager=Mo;var Po,zo=n&&n.__extends||(Po=function(e,t){return Po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},Po(e,t)},function(e,t){function r(){this.constructor=e}Po(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Ao,"__esModule",{value:!0});var Do=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zo(t,e),t.prototype.getNextHandler=function(e,t){return function(r,n,i){return e(r,n,i,t)}},t}(jo.PluginManager);Ao.InvokeManager=Do;var To,Io={},ko=n&&n.__extends||(To=function(e,t){return To=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},To(e,t)},function(e,t){function r(){this.constructor=e}To(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Io,"__esModule",{value:!0});var xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ko(t,e),t.prototype.getNextHandler=function(e,t){return function(r,n){return e(r,n,t)}},t}(jo.PluginManager);Io.IOManager=xo;var Co={};function Eo(e,t){return function(){switch(arguments.length){case 1:var r=arguments[0];r instanceof Error?t(r):e(r);break;case 2:var n=arguments[0],i=arguments[1];n instanceof Error?t(n):i instanceof Error?t(i):e(void 0===n?i:n)}}}Object.defineProperty(Co,"__esModule",{value:!0}),Co.parseURI=function(e){var t=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=e.match(t);if(r){var n=r[4].split(":",2);return{protocol:r[1],host:r[4],hostname:n[0],port:parseInt(n[1],10)||0,path:r[5],query:r[7],fragment:r[9]}}throw new Error("Invalid URI")},Co.normalize=function(e){for(var t=[Object.create(null)],r=0,n=e.length;r<n;++r){var i=e[r].split("_"),o=i.length-1;if(o>0){for(var a=t,s=0;s<o;s++){var u=i[s];void 0===a[0][u]&&(a[0][u]=[Object.create(null)]),a=a[0][u]}a.push(i[o])}t.push(e[r])}return t},Co.promisify=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new Promise((function(n,i){r.push(Eo(n,i));try{e.apply(t,r)}catch(o){i(o)}}))}};var Uo=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];Co.crc32=function(e,t){void 0===t&&(t=0),t^=-1;for(var r=0,n=e.length;r<n;++r)t=t>>>8^Uo[255&(t^e[r])];return-1^t};var Ro=n&&n.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(Bs){o(Bs)}}function s(e){try{u(n.throw(e))}catch(Bs){o(Bs)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ho=n&&n.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Bs){o=[6,Bs],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(o,"__esModule",{value:!0});var qo=a,Fo=bo,No=Ao,Go=Io,Lo=Co;function Wo(e,t){return function(){var r=Array.prototype.slice.call(arguments),n=r.length>0&&r[r.length-1]instanceof Fo.ClientContext?r.pop():new Fo.ClientContext;return e.invoke(t,r,n)}}function Xo(e,t,r,n,i){if(void 0===t[n]){t[n]=Object.create(null),Array.isArray(i)||(i=[i]),r=r+n+"_";for(var o=0;o<i.length;o++){var a=i[o];if("string"==typeof a)t[n][a]=Wo(e,r+a);else for(var s in a)Xo(e,t[n],r,s,a[s])}}}function Vo(e,t){for(var r=Lo.normalize(t),n=Object.create(null),i=0;i<r.length;i++){var o=r[i];if("string"==typeof o)void 0===n[o]&&(n[o]=Wo(e,o));else for(var a in o)Xo(e,n,"",a,o[a])}return n}var Yo=function(){function t(e,t){this.client=e,this.namespace=t}return t.prototype.get=function(r,n,i){if("symbol"!==e(n)&&"then"!==n)return n in r||(r[n]=new Proxy((function(){}),new t(this.client,this.namespace?this.namespace+"_"+n:""+n))),r[n]},t.prototype.apply=function(e,t,r){if(this.namespace){var n=r.length>0&&r[r.length-1]instanceof Fo.ClientContext?r.pop():new Fo.ClientContext;return this.client.invoke(this.namespace,r,n)}throw new TypeError("target is not a function")},t}(),$o=function(){function e(t){var r,n=this;this.returnTypes=Object.create(null),this.requestHeaders=Object.create(null),this.codec=qo.DefaultClientCodec.instance,this.timeout=3e4,this.urilist=[],this.transports=Object.create(null),this.invokeManager=new No.InvokeManager(this.call.bind(this)),this.ioManager=new Go.IOManager(this.transport.bind(this)),e.transports.forEach((function(e){var t=e.name,r=new(0,e.ctor);n.transports[t]=r,Object.defineProperty(n,t,{get:function(){return r},set:function(e){r=e,n.transports[t]=e},enumerable:!1,configurable:!1})})),t&&("string"==typeof t?this.urilist.push(t):(r=this.urilist).push.apply(r,t))}return e.register=function(t,r){e.transports.push({name:t,ctor:r}),r.schemes.forEach((function(r){return e.protocols[r+":"]=t}))},Object.defineProperty(e.prototype,"uris",{get:function(){return this.urilist},set:function(e){e.length>0&&(this.urilist=e.slice(0),this.urilist.sort((function(){return Math.random()-.5})))},enumerable:!0,configurable:!0}),e.prototype.useService=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];switch(r.length){case 1:if(Array.isArray(r[0]))return Vo(this,r[0]);"string"==typeof r[0]?e=r[0]:t=r[0];break;case 2:e=r[0],t=r[1]}var i=Object.create(null);if(t){for(var o in t){var a=""+o;e&&(a=e+"_"+o),this.returnTypes[a]=t[o],i[o]=Wo(this,a)}return i}return new Proxy(i,new Yo(this,e))},e.prototype.useServiceAsync=function(){return Ro(this,void 0,void 0,(function(){return Ho(this,(function(e){switch(e.label){case 0:return[4,this.invoke("~")];case 1:return[2,Vo(this,e.sent())]}}))}))},e.prototype.use=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(r.length<=0)return this;switch(r[0].length){case 4:(e=this.invokeManager).use.apply(e,r);break;case 3:(t=this.ioManager).use.apply(t,r);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.unuse=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(r.length<=0)return this;switch(r[0].length){case 4:(e=this.invokeManager).unuse.apply(e,r);break;case 3:(t=this.ioManager).unuse.apply(t,r);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.invoke=function(e,t,r){return void 0===t&&(t=[]),void 0===r&&(r=new Fo.ClientContext),Ro(this,void 0,void 0,(function(){var n;return Ho(this,(function(i){switch(i.label){case 0:return null===t&&(t=[]),t.length>0?[4,Promise.all(t)]:[3,2];case 1:t=i.sent(),i.label=2;case 2:return(n=r instanceof Fo.ClientContext?r:new Fo.ClientContext(r)).init(this,this.returnTypes[e]),[2,this.invokeManager.handler(e,t,n)]}}))}))},e.prototype.call=function(e,t,r){return Ro(this,void 0,void 0,(function(){var n,i,o;return Ho(this,(function(a){switch(a.label){case 0:return n=this.codec,i=n.encode(e,t,r),[4,this.request(i,r)];case 1:return o=a.sent(),[2,n.decode(o,r)]}}))}))},e.prototype.request=function(e,t){return this.ioManager.handler(e,t)},e.prototype.transport=function(t,r){return Ro(this,void 0,void 0,(function(){var n,i;return Ho(this,(function(o){if(n=Lo.parseURI(r.uri),void 0!==(i=e.protocols[n.protocol]))return[2,this.transports[i].transport(t,r)];throw new Error('The protocol "'+n.protocol+'" is not supported.')}))}))},e.prototype.abort=function(){return Ro(this,void 0,void 0,(function(){var e,t;return Ho(this,(function(r){switch(r.label){case 0:for(t in e=[],this.transports)e.push(this.transports[t].abort());return[4,Promise.all(e)];case 1:return r.sent(),[2]}}))}))},e.transports=[],e.protocols=Object.create(null),e}();o.Client=$o;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});var Ko=Object.create(null);Jo.setCookie=function(e,t){function r(e){var r;if(void 0!==e){var n=e.trim().split(";"),i=Object.create(null);r=n[0].trim().split("=",2),i.name=r[0],i.value=r[1];for(var o=1;o<n.length;o++){var a=n[o].trim().split("=",2),s=a[0],u=a[1];i[s.toUpperCase()]=u}if(i.PATH){var c=i.PATH.length;c>2&&'"'===i.PATH.charAt(0)&&'"'===i.PATH.charAt(c-1)&&(i.PATH=i.PATH.substr(1,c-2))}else i.PATH="/";i.EXPIRES&&(i.EXPIRES=Date.parse(i.EXPIRES)),i.DOMAIN?i.DOMAIN=i.DOMAIN.toLowerCase():i.DOMAIN=t,i.SECURE=void 0!==i.SECURE,void 0===Ko[i.DOMAIN]&&(Ko[i.DOMAIN]=Object.create(null)),Ko[i.DOMAIN][i.name]=i}}for(var n in void 0===t&&(t="@"),e)if("set-cookie"===(n=n.toLowerCase())||"set-cookie2"===n){var i=e[n];(Array.isArray(i)?i:[i]).forEach(r)}},Jo.getCookie=function(e,t,r){e=null!=e?e:"@",t=null!=t?t:"/";var n=[];for(var i in Ko)if(e.indexOf(i)>-1){var o=[];for(var a in Ko[i]){var s=Ko[i][a];s.EXPIRES&&(new Date).getTime()>s.EXPIRES?o.push(a):0===t.indexOf(s.PATH)&&r===s.SECURE&&null!==s.value&&n.push(s.name+"="+s.value)}for(var u=0,c=o.length;u<c;++u)delete Ko[i][o[u]]}return n.length>0?n.join("; "):""};var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.defer=function(){var e=Object.create(null);return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e};var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});var ea=function(e,t,r,n){if(this.method=e,this.name=t,this.target=r,this.paramTypes=n,""===t||void 0===t){if(""===e.name)throw new Error("name must not be empty");t=e.name}};Zo.Method=ea;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});var ra=Zo,na=function(){function e(){this.methods=Object.create(null),this.names=[]}return e.prototype.getNames=function(){return this.names},e.prototype.get=function(e){return(e=e.toLowerCase())in this.methods?this.methods[e]:this.methods["*"]},e.prototype.remove=function(e){delete this.methods[e.toLowerCase()];var t=this.names.indexOf(e);t>-1&&this.names.splice(t,1)},e.prototype.add=function(e){var t=e.name;if(""===t||void 0===t){if((""===(t=e.fullname)||void 0===t)&&""===(t=e.method.name))throw new Error("name must not be empty");e.name=t}this.methods[t.toLowerCase()]=e,-1===this.names.indexOf(t)&&this.names.push(t)},e.prototype.addFunction=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];switch(t.length){case 0:this.add(new ra.Method(e));break;case 1:"string"==typeof t[0]?this.add(new ra.Method(e,t[0])):this.add(new ra.Method(e,void 0,void 0,t[0]));break;case 2:this.add(new ra.Method(e,t[0],void 0,t[1]))}},e.prototype.addMethod=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("string"==typeof e[0]){var r=e[1][e[0]];if("function"!=typeof r)throw new Error("obj[name] must be a function");this.add(new ra.Method(r,e[0],e[1],e[2]))}else switch(e.length){case 2:this.add(new ra.Method(e[0],void 0,e[1]));break;case 3:"string"==typeof e[2]?this.add(new ra.Method(e[0],e[2],e[1])):this.add(new ra.Method(e[0],void 0,e[1],e[2]));break;case 4:this.add(new ra.Method(e[0],e[2],e[1],e[3]))}},e.prototype.addMissingMethod=function(e,t){var r=new ra.Method(e,"*",t);r.missing=!0,3===e.length&&(r.passContext=!0),this.add(r)},e.prototype.addFunctions=function(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];switch(n.length){case 1:n[0].length>1&&"string"==typeof n[0][0]?t=n[0]:r=n[0];break;case 2:t=n[0],r=n[1]}var o=e.length;if(t&&t.length!==o)throw new Error("names.length must be equal to functions.length");for(var a=0;a<o;++a)this.add(new ra.Method(e[a],t?t[a]:void 0,void 0,r))},e.prototype.addMethods=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0].length;if(0!==r){var n,i,o,a=e[1];if("string"!=typeof e[0][0]){switch(n=e[0],e.length){case 3:e[2].length>0&&"string"==typeof e[2][0]?i=e[2]:o=e[2];break;case 4:i=e[2],o=e[3]}if(i&&i.length!==r)throw new Error("names.length must be equal to functions.length");for(s=0;s<r;++s)this.add(new ra.Method(n[s],i?i[s]:void 0,a,o))}else{i=e[0],o=e[2];for(var s=0;s<r;++s){var u=a[i[s]];if("function"!=typeof u)throw new Error("obj[name] must be a function");this.add(new ra.Method(u,i[s],a,o))}}}},e.prototype.addInstanceMethods=function(e,t){for(var r in e)if((!e.hasOwnProperty||e.hasOwnProperty(r))&&"function"==typeof e[r]){var n=t?t+"_"+r:r;this.add(new ra.Method(e[r],n,e))}},e}();ta.MethodManager=na;var ia,oa={},aa=n&&n.__extends||(ia=function(e,t){return ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ia(e,t)},function(e,t){function r(){this.constructor=e}ia(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(oa,"__esModule",{value:!0});var sa=function(e){function t(t){return void 0===t&&(t="timeout"),e.call(this,t)||this}return aa(t,e),t}(Error);oa.TimeoutError=sa;var ua={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});var fa=s,la=function(){function e(){this.debug=!1,this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object",this.nullType=void 0}return e.prototype.encode=function(e,t){var r=new fa.ByteStream,n=new fa.Writer(r,this.simple,this.utc),i=t.responseHeaders;this.simple&&(i.simple=!0);var o=0;for(var a in i)o++;return o>0&&(r.writeByte(72),n.serialize(i),n.reset()),e instanceof Error?(r.writeByte(69),n.serialize(this.debug&&e.stack?e.stack:e.message)):(r.writeByte(82),n.serialize(e)),r.writeByte(122),r.takeBytes()},e.prototype.decodeMethod=function(e,t){var r=t.service.get(e);if(void 0===r)throw new Error("Can't find this method "+e+"().");return t.method=r,r},e.prototype.decodeArguments=function(e,t,r){var n=t.stream,i=n.readByte();if(e.missing)return 97===i?(t.reset(),t.read(i,Array)):[];var o=[];if(97===i){t.reset();var a=fa.ValueReader.readCount(n),s=e.paramTypes;if(void 0===s)s=new Array(a).fill(this.nullType);else{s.length=a;for(var u=0;u<a;++u)void 0===s[u]&&(s[u]=this.nullType)}o=new Array(a),t.addReference(o);for(u=0;u<a;++u)o[u]=t.deserialize(s[u]);n.readByte()}return o},e.prototype.decode=function(e,t){if(0===e.length)return this.decodeMethod("~",t),["~",[]];var r=new fa.ByteStream(e),n=new fa.Reader(r,!1);n.longType=this.longType,n.dictType=this.dictType;var i=r.readByte();if(72===i){var o=n.deserialize(this.nullType);for(var a in o)t.requestHeaders[a]=o[a];n.reset(),i=r.readByte()}switch(i){case 67:t.requestHeaders.simple&&(n.simple=!0);var s=n.deserialize(String);return[s,this.decodeArguments(this.decodeMethod(s,t),n,t)];case 122:return this.decodeMethod("~",t),["~",[]];default:throw new Error("Invalid request:\r\n"+r.toString())}},e.instance=new e,e}();ca.DefaultServiceCodec=la;var pa=n&&n.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(Bs){o(Bs)}}function s(e){try{u(n.throw(e))}catch(Bs){o(Bs)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},ha=n&&n.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Bs){o=[6,Bs],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ya=n&&n.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(ua,"__esModule",{value:!0});var da=ca,va=Ao,wa=Io,_a=Zo,ba=ta,ga=function(){function e(){var t=this;this.codec=da.DefaultServiceCodec.instance,this.maxRequestLength=2147483647,this.invokeManager=new va.InvokeManager(this.execute.bind(this)),this.ioManager=new wa.IOManager(this.process.bind(this)),this.methodManager=new ba.MethodManager,this.handlers=Object.create(null),this.options=Object.create(null);var r=function(r){var i=new(0,e.handlers[r])(n);n.handlers[r]=i,Object.defineProperty(n,r,{get:function(){return i},set:function(e){i=e,t.handlers[r]=e},enumerable:!0,configurable:!0})},n=this;for(var i in e.handlers)r(i);this.add(new _a.Method(this.methodManager.getNames.bind(this.methodManager),"~"))}return e.register=function(t,r){e.handlers[t]=r,r.serverTypes.forEach((function(r){e.serverTypes.has(r)?e.serverTypes.get(r).push(t):e.serverTypes.set(r,[t])}))},Object.defineProperty(e.prototype,"names",{get:function(){return this.methodManager.getNames()},enumerable:!0,configurable:!0}),e.prototype.bind=function(t,r){var n=t.constructor,i=e.serverTypes;if(!i.has(n))throw new Error("This type server is not supported.");for(var o=i.get(n),a=0,s=o.length;a<s;++a)void 0!==r&&r!==o[a]||this.handlers[o[a]].bind(t);return this},e.prototype.handle=function(e,t){return this.ioManager.handler(e,t)},e.prototype.process=function(e,t){return pa(this,void 0,void 0,(function(){var r,n,i,o,a,s;return ha(this,(function(u){switch(u.label){case 0:r=this.codec,u.label=1;case 1:return u.trys.push([1,3,,4]),i=r.decode(e,t),o=i[0],a=i[1],[4,this.invokeManager.handler(o,a,t)];case 2:return n=u.sent(),[3,4];case 3:return s=u.sent(),n=s,[3,4];case 4:return[2,r.encode(n,t)]}}))}))},e.prototype.execute=function(e,t,r){return pa(this,void 0,void 0,(function(){var n,i;return ha(this,(function(o){return n=r.method,i=n.method,n.missing?n.passContext?[2,i.apply(n.target,[e,t,r])]:[2,i.apply(n.target,[e,t])]:(n.passContext&&t.push(r),[2,i.apply(n.target,t)])}))}))},e.prototype.use=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(r.length<=0)return this;switch(r[0].length){case 4:(e=this.invokeManager).use.apply(e,r);break;case 3:(t=this.ioManager).use.apply(t,r);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.unuse=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(r.length<=0)return this;switch(r[0].length){case 4:(e=this.invokeManager).unuse.apply(e,r);break;case 3:(t=this.ioManager).unuse.apply(t,r);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.get=function(e){return this.methodManager.get(e)},e.prototype.add=function(e){return this.methodManager.add(e),this},e.prototype.remove=function(e){return this.methodManager.remove(e),this},e.prototype.addFunction=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this.methodManager).addFunction.apply(t,ya([e],r)),this},e.prototype.addMethod=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this.methodManager).addMethod.apply(e,ya([t[0],t[1]],t.slice(2))),this},e.prototype.addMissingMethod=function(e,t){return this.methodManager.addMissingMethod(e,t),this},e.prototype.addFunctions=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this.methodManager).addFunctions.apply(t,ya([e],r)),this},e.prototype.addMethods=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this.methodManager).addMethods.apply(e,ya([t[0],t[1]],t.slice(2))),this},e.prototype.addInstanceMethods=function(e,t){return this.methodManager.addInstanceMethods(e,t),this},e.handlers=Object.create(null),e.serverTypes=new Map,e}();ua.Service=ga;var ma,Oa={},Sa=n&&n.__extends||(ma=function(e,t){return ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},ma(e,t)},function(e,t){function r(){this.constructor=e}ma(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Oa,"__esModule",{value:!0});var Ba=function(e){function t(t){var r=e.call(this)||this;return r.service=t,r}return Sa(t,e),t}(go.Context);Oa.ServiceContext=Ba;var Aa={},ja={},Ma=n&&n.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(Bs){o(Bs)}}function s(e){try{u(n.throw(e))}catch(Bs){o(Bs)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Pa=n&&n.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Bs){o=[6,Bs],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(ja,"__esModule",{value:!0});var za=function(){function e(){}return e.register=function(t,r){e.handlers[t]=r},e.cancel=function(t){delete e.handlers[t]},e.handler=function(t,r){return Ma(this,void 0,void 0,(function(){var n;return Pa(this,(function(i){if(n=e.handlers[t])return[2,n(t,r)];throw new Error("Server is stopped")}))}))},e.handlers=Object.create(null),e}();ja.MockAgent=za;var Da=n&&n.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(Bs){o(Bs)}}function s(e){try{u(n.throw(e))}catch(Bs){o(Bs)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ta=n&&n.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Bs){o=[6,Bs],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(Aa,"__esModule",{value:!0});var Ia=Oa,ka=ua,xa=ja,Ca=function(){function e(e){this.address=e}return e.prototype.close=function(){xa.MockAgent.cancel(this.address)},e}();Aa.MockServer=Ca;var Ea=function(){function e(e){var t=this;this.service=e,this.handler=function(e,r){return Da(t,void 0,void 0,(function(){var t,n;return Ta(this,(function(i){if(r.length>this.service.maxRequestLength)throw new Error("Request entity too large");return t=new Ia.ServiceContext(this.service),n={family:"mock",address:e,port:0},t.remoteAddress=n,t.localAddress=n,t.handler=this,[2,this.service.handle(r,t)]}))}))}}return e.prototype.bind=function(e){xa.MockAgent.register(e.address,this.handler)},e.serverTypes=[Ca],e}();Aa.MockHandler=Ea,ka.Service.register("mock",Ea);var Ua={},Ra=n&&n.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(Bs){o(Bs)}}function s(e){try{u(n.throw(e))}catch(Bs){o(Bs)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ha=n&&n.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Bs){o=[6,Bs],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(Ua,"__esModule",{value:!0});var qa=o,Fa=Co,Na=ja,Ga=Qo,La=oa,Wa=function(){function e(){}return e.prototype.transport=function(e,t){return Ra(this,void 0,void 0,(function(){var r,n,i;return Ha(this,(function(o){return r=Fa.parseURI(t.uri),n=Ga.defer(),t.timeout>0&&(i=setTimeout((function(){n.reject(new La.TimeoutError)}),t.timeout),n.promise.then((function(){clearTimeout(i)}),(function(){clearTimeout(i)}))),Na.MockAgent.handler(r.hostname,e).then((function(e){return n.resolve(e)}),(function(e){return n.reject(e)})),[2,n.promise]}))}))},e.prototype.abort=function(){return Ra(this,void 0,void 0,(function(){return Ha(this,(function(e){return[2]}))}))},e.schemes=["mock"],e}();Ua.MockTransport=Wa,qa.Client.register("mock",Wa),Object.defineProperty(i,"__esModule",{value:!0});var Xa=o,Va=(t("a",i.Client=Xa.Client),a);i.DefaultClientCodec=Va.DefaultClientCodec;var Ya=bo,$a=(t("C",i.ClientContext=Ya.ClientContext),go);i.Context=$a.Context;var Ja=Jo;i.getCookie=Ja.getCookie,i.setCookie=Ja.setCookie;var Ka=Qo;i.defer=Ka.defer;var Qa=jo;i.PluginManager=Qa.PluginManager;var Za=Ao;i.InvokeManager=Za.InvokeManager;var es=Io;i.IOManager=es.IOManager;var ts=Zo;i.Method=ts.Method;var rs=ta;i.MethodManager=rs.MethodManager;var ns=oa;i.TimeoutError=ns.TimeoutError;var is=Co;i.parseURI=is.parseURI,i.normalize=is.normalize,i.promisify=is.promisify,i.crc32=is.crc32;var os=ua;i.Service=os.Service;var as=ca;i.DefaultServiceCodec=as.DefaultServiceCodec;var ss=Oa;i.ServiceContext=ss.ServiceContext;var us=Aa;i.MockServer=us.MockServer,i.MockHandler=us.MockHandler;var cs=Ua;i.MockTransport=cs.MockTransport;var fs={},ls={},ps=n&&n.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(Bs){o(Bs)}}function s(e){try{u(n.throw(e))}catch(Bs){o(Bs)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},hs=n&&n.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Bs){o=[6,Bs],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(ls,"__esModule",{value:!0});var ys=i;var ds=function(){function e(){this.counter=0,this.requests=Object.create(null),this.httpRequestHeaders=Object.create(null),this.onprogress=null}return e.prototype.setRequestHeaders=function(e,t){for(var r in t)if(!t.hasOwnProperty||t.hasOwnProperty(r)){var n=t[r];void 0!==n&&(Array.isArray(n)?e[r]=n.join(", "):e[r]=n+"")}},e.prototype.getRequestHeaders=function(e){var t=Object.create(null);return this.setRequestHeaders(t,this.httpRequestHeaders),e&&this.setRequestHeaders(t,e),t},e.prototype.transport=function(e,t){return ps(this,void 0,void 0,(function(){var r,n,i,o,a,s,u,c,f=this;return hs(this,(function(l){for(u in r=this.counter<2147483647?++this.counter:this.counter=0,n=new XMLHttpRequest,i=this,this.requests[r]=n,o=t,a=this.getRequestHeaders(o.httpRequestHeaders),s=new Promise((function(e,t){n.upload.onprogress=n.onprogress=f.onprogress,n.upload.onerror=n.onerror=function(e){delete i.requests[r],t(new Error("network error"))},n.upload.onabort=n.onabort=function(e){delete i.requests[r],t(new Error("transport abort"))},n.upload.ontimeout=n.ontimeout=function(e){delete i.requests[r],t(new ys.TimeoutError)},n.onload=function(n){delete i.requests[r],o.httpStatusCode=this.status,o.httpStatusText=this.statusText,this.status>=200&&this.status<300?(o.httpResponseHeaders=function(e){var t=Object.create(null);if(e)for(var r=e.split("\r\n"),n=0,i=r.length;n<i;n++)if(""!==r[n]){var o=r[n].split(": ",2).map((function(e){return e.trim()})),a=o[0],s=o[1];(t.hasOwnProperty?t.hasOwnProperty(a):a in t)?Array.isArray(t[a])?t[a].push(s):t[a]=[t[a],s]:t[a]=s}return t}(this.getAllResponseHeaders()),e(new Uint8Array(this.response))):t(new Error(this.status+":"+this.statusText))}})),n.open("POST",t.uri,!0),n.withCredentials=!0,n.responseType="arraybuffer",n.timeout=t.timeout,a)n.setRequestHeader(u,a[u]);return"function"==typeof ArrayBuffer.isView?n.send(e):"function"==typeof e.buffer.slice?n.send(e.buffer.slice(e.byteOffset,e.length)):((c=new Uint8Array(e.length)).set(e),n.send(c.buffer)),[2,s]}))}))},e.prototype.abort=function(){return ps(this,void 0,void 0,(function(){var e,t;return hs(this,(function(r){for(e in this.requests)t=this.requests[e],delete this.requests[e],t&&t.abort();return[2]}))}))},e.schemes=["http","https"],e}();ls.HttpTransport=ds,ys.Client.register("http",ds);var vs={},ws=n&&n.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(Bs){o(Bs)}}function s(e){try{u(n.throw(e))}catch(Bs){o(Bs)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},_s=n&&n.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Bs){o=[6,Bs],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(vs,"__esModule",{value:!0});var bs=i,gs=s,ms=function(){function e(){this.counter=0,this.results=Object.create(null),this.websockets=Object.create(null)}return e.prototype.connect=function(e){return ws(this,void 0,void 0,(function(){var t,r,n,i=this;return _s(this,(function(o){switch(o.label){case 0:return[4,this.websockets[e]];case 1:return void 0!==(t=o.sent())&&t.readyState!==WebSocket.CLOSING&&t.readyState!==WebSocket.CLOSED?[2,t]:(r=bs.defer(),(t=new WebSocket(e,"hprose")).binaryType="arraybuffer",t.onopen=function(){return r.resolve(t)},t.onmessage=function(t){return ws(i,void 0,void 0,(function(){var r,n,i;return _s(this,(function(o){return r=new gs.ByteStream(t.data),n=r.readInt32BE(),i=this.results[e][n],delete this.results[e][n],i&&i.resolve(r.remains),[2]}))}))},n=function(t){var r=i.results[e];if(r)for(var n in r){var o=r[n];delete r[n],o.reject(t)}delete i.websockets[e]},t.onerror=function(e){return n(new Error("error"))},t.onclose=function(e){e.reason?n(new Error(e.code+":"+e.reason)):n(new Error(""+e.code))},this.websockets[e]=r.promise,[2,r.promise])}}))}))},e.prototype.transport=function(e,t){return ws(this,void 0,void 0,(function(){var r,n,i,o,a,s,u,c=this;return _s(this,(function(f){switch(f.label){case 0:return r=t.uri,n=this.counter<2147483647?++this.counter:this.counter=0,i=bs.defer(),[4,this.connect(r)];case 1:return o=f.sent(),void 0===this.results[r]&&(this.results[r]=Object.create(null)),this.results[r][n]=i,t.timeout>0&&(a=setTimeout((function(){delete c.results[r][n],i.reject(new bs.TimeoutError)}),t.timeout),i.promise.then((function(){clearTimeout(a)}),(function(){clearTimeout(a)}))),(s=new gs.ByteStream(4+e.length)).writeInt32BE(n),s.write(e),u=s.takeBytes(),"function"==typeof ArrayBuffer.isView?o.send(u):o.send(u.buffer),[2,i.promise]}}))}))},e.prototype.abort=function(){return ws(this,void 0,void 0,(function(){var e,t,r,n,i;return _s(this,(function(o){switch(o.label){case 0:for(t in e=[],this.websockets)e.push(t);r=0,o.label=1;case 1:return r<e.length?(n=e[r],i=this.websockets[n],delete this.websockets[n],i?[4,i]:[3,3]):[3,4];case 2:o.sent().close(1e3),o.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.schemes=["ws","wss"],e}();vs.WebSocketTransport=ms,bs.Client.register("websocket",ms),Object.defineProperty(fs,"__esModule",{value:!0});var Os=ls,Ss=(t("H",fs.HttpTransport=Os.HttpTransport),vs);fs.WebSocketTransport=Ss.WebSocketTransport}}}))}();
