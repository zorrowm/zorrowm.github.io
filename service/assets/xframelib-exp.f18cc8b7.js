import{r as an,d as ze,l as ee,M as $,N as Q,O as he,P as me,e as de,o as mt,a as zi,x as gt,Q as G,R as we,f as un,h as cn,S as Oe,U as _i,A as $t,g as ki,w as Be,t as Ai,V as ln,W as hn,X as se,L as Bi,F as pe,Y as ve,q as Ii,z as Mi,Z as Li,I as Di,_ as fe,G as Pi}from"./@vue-exp.a4e706db.js";import{a as Ri}from"./axios-exp.e066e043.js";import{C as Qe,B as qt,H as Fi,a as Ti}from"./@hprose-exp.37e63ca6.js";var To={name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[e.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let n=0;this.panes=this.panes.map((i,s)=>(i.size=s===t?i.max:i.min,s!==t&&(n+=i.min),i)),this.panes[t].size-=n,this.$emit("pane-maximize",this.panes[t])},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:n,clientY:i}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:n-t.left,y:i-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),100*e/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let n={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:n.prevPanesSize),s=100-(this.pushOtherPanes?0:n.nextPanesSize),l=Math.max(Math.min(this.getCurrentDragPercentage(e),s),i);let y=[t,t+1],w=this.panes[y[0]]||null,S=this.panes[y[1]]||null;const x=w.max<100&&l>=w.max+n.prevPanesSize,k=S.max<100&&l<=100-(S.max+this.sumNextPanesSize(t+1));if(x||k)x?(w.size=w.max,S.size=Math.max(100-w.max-n.prevPanesSize-n.nextPanesSize,0)):(w.size=Math.max(100-S.max-n.prevPanesSize-this.sumNextPanesSize(t+1),0),S.size=S.max);else{if(this.pushOtherPanes){const z=this.doPushOtherPanes(n,l);if(!z)return;({sums:n,panesToResize:y}=z),w=this.panes[y[0]]||null,S=this.panes[y[1]]||null}w!==null&&(w.size=Math.min(Math.max(l-n.prevPanesSize-n.prevReachedMinPanes,w.min),w.max)),S!==null&&(S.size=Math.min(Math.max(100-l-n.nextPanesSize-n.nextReachedMinPanes,S.min),S.max))}},doPushOtherPanes(e,t){const n=this.touch.activeSplitter,i=[n,n+1];return t<e.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(n).index,e.prevReachedMinPanes=0,i[0]<n&&this.panes.forEach((s,l)=>{l>i[0]&&l<=n&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),e.prevPanesSize=this.sumPrevPanesSize(i[0]),i[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((s,l)=>{l>0&&l<=n&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),this.panes[i[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(n).index,e.nextReachedMinPanes=0,i[1]>n+1&&this.panes.forEach((s,l)=>{l>n&&l<i[1]&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),e.nextPanesSize=this.sumNextPanesSize(i[1]-1),i[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((s,l)=>{l<this.panesCount-1&&l>=n+1&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),this.panes[i[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:i}},sumPrevPanesSize(e){return this.panes.reduce((t,n,i)=>t+(i<e?n.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,n,i)=>t+(i>e+1?n.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min)||{}},findNextExpandedPane(e){return this.panes.find(t=>t.index>e+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),n=e.classList.contains("splitpanes__splitter");if(!t&&!n)return e.parentNode.removeChild(e),void console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.")})},addSplitter(e,t,n=!1){const i=e-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),n||(s.onmousedown=l=>this.onMouseDown(l,i),typeof window<"u"&&"ontouchstart"in window&&(s.ontouchstart=l=>this.onMouseDown(l,i)),s.onclick=l=>this.onSplitterClick(l,i+1)),this.dblClickSplitter&&(s.ondblclick=l=>this.onSplitterDblClick(l,i+1)),t.parentNode.insertBefore(s,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(n=>{n.className.includes("splitpanes__splitter")&&this.removeSplitter(n)});let t=0;e.forEach(n=>{n.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,n,!0):t&&this.addSplitter(t,n),t++)})},requestUpdate({target:e,...t}){const n=this.indexedPanes[e._.uid];Object.entries(t).forEach(([i,s])=>n[i]=s)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&t++,s===e.$el));const n=parseFloat(e.minSize),i=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._.uid,index:t,min:isNaN(n)?0:n,max:isNaN(i)?100:i,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((s,l)=>s.index=l),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(i=>i.id===e._.uid),n=this.panes.splice(t,1)[0];this.panes.forEach((i,s)=>i.index=s),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:{...n,index:t}}),this.$emit("pane-remove",{removed:n,panes:this.panes.map(i=>({min:i.min,max:i.max,size:i.size}))})})},resetPaneSizes(e={}){e.addedPane||e.removedPane?this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize():this.initialPanesSizing(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0;const n=[],i=[];this.panes.forEach(s=>{s.size=Math.max(Math.min(e,s.max),s.min),t-=s.size,s.size>=s.max&&n.push(s.id),s.size<=s.min&&i.push(s.id)}),t>.1&&this.readjustSizes(t,n,i)},initialPanesSizing(){let e=100;const t=[],n=[];let i=0;this.panes.forEach(l=>{e-=l.size,l.size!==null&&i++,l.size>=l.max&&t.push(l.id),l.size<=l.min&&n.push(l.id)});let s=100;e>.1&&(this.panes.forEach(l=>{l.size===null&&(l.size=Math.max(Math.min(e/(this.panesCount-i),l.max),l.min)),s-=l.size}),s>.1&&this.readjustSizes(e,t,n))},equalizeAfterAddOrRemove({addedPane:e}={}){let t=100/this.panesCount,n=0;const i=[],s=[];e&&e.givenSize!==null&&(t=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(l=>{n-=l.size,l.size>=l.max&&i.push(l.id),l.size<=l.min&&s.push(l.id)}),!(Math.abs(n)<.1)&&(this.panes.forEach(l=>{e&&e.givenSize!==null&&e.id===l.id||(l.size=Math.max(Math.min(t,l.max),l.min)),n-=l.size,l.size>=l.max&&i.push(l.id),l.size<=l.min&&s.push(l.id)}),n>.1&&this.readjustSizes(n,i,s))},readjustSizes(e,t,n){let i;i=e>0?e/(this.panesCount-t.length):e/(this.panesCount-n.length),this.panes.forEach(s=>{if(e>0&&!t.includes(s.id)){const l=Math.max(Math.min(s.size+i,s.max),s.min);e-=l-s.size,s.size=l}else if(!n.includes(s.id)){const l=Math.max(Math.min(s.size+i,s.max),s.min);e-=l-s.size,s.size=l}s.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[s.id].size}%`})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,n)=>{t.ondblclick=e?i=>this.onSplitterDblClick(i,n):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.updatePaneComponents(),this.$emit("ready"),this.ready=!0},render(){return Pi("div",{ref:"container",class:["splitpanes","splitpanes--"+(this.horizontal?"horizontal":"vertical"),{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())},__file:"src/controls/splitpanes/splitpanes.vue"},Xt={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:10},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}};Xt.render=function(e,t,n,i,s,l){return $(),Q("div",{class:"splitpanes__pane",onClick:t[0]||(t[0]=y=>l.onPaneClick(y,e._.uid)),style:me(e.style)},[he(e.$slots,"default")],4)},Xt.__file="src/controls/splitpanes/pane.vue";var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gt=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(v,u){var h=v[0],d=v[1],c=v[2],p=v[3];d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&c|~d&p)+u[0]-680876936|0)<<7|h>>>25)+d|0)&d|~h&c)+u[1]-389564586|0)<<12|p>>>20)+h|0)&h|~p&d)+u[2]+606105819|0)<<17|c>>>15)+p|0)&p|~c&h)+u[3]-1044525330|0)<<22|d>>>10)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&c|~d&p)+u[4]-176418897|0)<<7|h>>>25)+d|0)&d|~h&c)+u[5]+1200080426|0)<<12|p>>>20)+h|0)&h|~p&d)+u[6]-1473231341|0)<<17|c>>>15)+p|0)&p|~c&h)+u[7]-45705983|0)<<22|d>>>10)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&c|~d&p)+u[8]+1770035416|0)<<7|h>>>25)+d|0)&d|~h&c)+u[9]-1958414417|0)<<12|p>>>20)+h|0)&h|~p&d)+u[10]-42063|0)<<17|c>>>15)+p|0)&p|~c&h)+u[11]-1990404162|0)<<22|d>>>10)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&c|~d&p)+u[12]+1804603682|0)<<7|h>>>25)+d|0)&d|~h&c)+u[13]-40341101|0)<<12|p>>>20)+h|0)&h|~p&d)+u[14]-1502002290|0)<<17|c>>>15)+p|0)&p|~c&h)+u[15]+1236535329|0)<<22|d>>>10)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&p|c&~p)+u[1]-165796510|0)<<5|h>>>27)+d|0)&c|d&~c)+u[6]-1069501632|0)<<9|p>>>23)+h|0)&d|h&~d)+u[11]+643717713|0)<<14|c>>>18)+p|0)&h|p&~h)+u[0]-373897302|0)<<20|d>>>12)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&p|c&~p)+u[5]-701558691|0)<<5|h>>>27)+d|0)&c|d&~c)+u[10]+38016083|0)<<9|p>>>23)+h|0)&d|h&~d)+u[15]-660478335|0)<<14|c>>>18)+p|0)&h|p&~h)+u[4]-405537848|0)<<20|d>>>12)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&p|c&~p)+u[9]+568446438|0)<<5|h>>>27)+d|0)&c|d&~c)+u[14]-1019803690|0)<<9|p>>>23)+h|0)&d|h&~d)+u[3]-187363961|0)<<14|c>>>18)+p|0)&h|p&~h)+u[8]+1163531501|0)<<20|d>>>12)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d&p|c&~p)+u[13]-1444681467|0)<<5|h>>>27)+d|0)&c|d&~c)+u[2]-51403784|0)<<9|p>>>23)+h|0)&d|h&~d)+u[7]+1735328473|0)<<14|c>>>18)+p|0)&h|p&~h)+u[12]-1926607734|0)<<20|d>>>12)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d^c^p)+u[5]-378558|0)<<4|h>>>28)+d|0)^d^c)+u[8]-2022574463|0)<<11|p>>>21)+h|0)^h^d)+u[11]+1839030562|0)<<16|c>>>16)+p|0)^p^h)+u[14]-35309556|0)<<23|d>>>9)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d^c^p)+u[1]-1530992060|0)<<4|h>>>28)+d|0)^d^c)+u[4]+1272893353|0)<<11|p>>>21)+h|0)^h^d)+u[7]-155497632|0)<<16|c>>>16)+p|0)^p^h)+u[10]-1094730640|0)<<23|d>>>9)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d^c^p)+u[13]+681279174|0)<<4|h>>>28)+d|0)^d^c)+u[0]-358537222|0)<<11|p>>>21)+h|0)^h^d)+u[3]-722521979|0)<<16|c>>>16)+p|0)^p^h)+u[6]+76029189|0)<<23|d>>>9)+c|0,d=((d+=((c=((c+=((p=((p+=((h=((h+=(d^c^p)+u[9]-640364487|0)<<4|h>>>28)+d|0)^d^c)+u[12]-421815835|0)<<11|p>>>21)+h|0)^h^d)+u[15]+530742520|0)<<16|c>>>16)+p|0)^p^h)+u[2]-995338651|0)<<23|d>>>9)+c|0,d=((d+=((p=((p+=(d^((h=((h+=(c^(d|~p))+u[0]-198630844|0)<<6|h>>>26)+d|0)|~c))+u[7]+1126891415|0)<<10|p>>>22)+h|0)^((c=((c+=(h^(p|~d))+u[14]-1416354905|0)<<15|c>>>17)+p|0)|~h))+u[5]-57434055|0)<<21|d>>>11)+c|0,d=((d+=((p=((p+=(d^((h=((h+=(c^(d|~p))+u[12]+1700485571|0)<<6|h>>>26)+d|0)|~c))+u[3]-1894986606|0)<<10|p>>>22)+h|0)^((c=((c+=(h^(p|~d))+u[10]-1051523|0)<<15|c>>>17)+p|0)|~h))+u[1]-2054922799|0)<<21|d>>>11)+c|0,d=((d+=((p=((p+=(d^((h=((h+=(c^(d|~p))+u[8]+1873313359|0)<<6|h>>>26)+d|0)|~c))+u[15]-30611744|0)<<10|p>>>22)+h|0)^((c=((c+=(h^(p|~d))+u[6]-1560198380|0)<<15|c>>>17)+p|0)|~h))+u[13]+1309151649|0)<<21|d>>>11)+c|0,d=((d+=((p=((p+=(d^((h=((h+=(c^(d|~p))+u[4]-145523070|0)<<6|h>>>26)+d|0)|~c))+u[11]-1120210379|0)<<10|p>>>22)+h|0)^((c=((c+=(h^(p|~d))+u[2]+718787259|0)<<15|c>>>17)+p|0)|~h))+u[9]-343485551|0)<<21|d>>>11)+c|0,v[0]=h+v[0]|0,v[1]=d+v[1]|0,v[2]=c+v[2]|0,v[3]=p+v[3]|0}function i(v){var u,h=[];for(u=0;u<64;u+=4)h[u>>2]=v.charCodeAt(u)+(v.charCodeAt(u+1)<<8)+(v.charCodeAt(u+2)<<16)+(v.charCodeAt(u+3)<<24);return h}function s(v){var u,h=[];for(u=0;u<64;u+=4)h[u>>2]=v[u]+(v[u+1]<<8)+(v[u+2]<<16)+(v[u+3]<<24);return h}function l(v){var u,h,d,c,p,D,B=v.length,I=[1732584193,-271733879,-1732584194,271733878];for(u=64;u<=B;u+=64)n(I,i(v.substring(u-64,u)));for(h=(v=v.substring(u-64)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<h;u+=1)d[u>>2]|=v.charCodeAt(u)<<(u%4<<3);if(d[u>>2]|=128<<(u%4<<3),u>55)for(n(I,d),u=0;u<16;u+=1)d[u]=0;return c=(c=8*B).toString(16).match(/(.*?)(.{0,8})$/),p=parseInt(c[2],16),D=parseInt(c[1],16)||0,d[14]=p,d[15]=D,n(I,d),I}function y(v){var u,h,d,c,p,D,B=v.length,I=[1732584193,-271733879,-1732584194,271733878];for(u=64;u<=B;u+=64)n(I,s(v.subarray(u-64,u)));for(h=(v=u-64<B?v.subarray(u-64):new Uint8Array(0)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<h;u+=1)d[u>>2]|=v[u]<<(u%4<<3);if(d[u>>2]|=128<<(u%4<<3),u>55)for(n(I,d),u=0;u<16;u+=1)d[u]=0;return c=(c=8*B).toString(16).match(/(.*?)(.{0,8})$/),p=parseInt(c[2],16),D=parseInt(c[1],16)||0,d[14]=p,d[15]=D,n(I,d),I}function w(v){var u,h="";for(u=0;u<4;u+=1)h+=t[v>>8*u+4&15]+t[v>>8*u&15];return h}function S(v){var u;for(u=0;u<v.length;u+=1)v[u]=w(v[u]);return v.join("")}function x(v){return/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v))),v}function k(v,u){var h,d=v.length,c=new ArrayBuffer(d),p=new Uint8Array(c);for(h=0;h<d;h+=1)p[h]=v.charCodeAt(h);return u?p:c}function z(v){return String.fromCharCode.apply(null,new Uint8Array(v))}function F(v,u,h){var d=new Uint8Array(v.byteLength+u.byteLength);return d.set(new Uint8Array(v)),d.set(new Uint8Array(u),v.byteLength),h?d:d.buffer}function R(v){var u,h=[],d=v.length;for(u=0;u<d-1;u+=2)h.push(parseInt(v.substr(u,2),16));return String.fromCharCode.apply(String,h)}function L(){this.reset()}return S(l("hello")),typeof ArrayBuffer>"u"||ArrayBuffer.prototype.slice||function(){function v(u,h){return(u=0|u||0)<0?Math.max(u+h,0):Math.min(u,h)}ArrayBuffer.prototype.slice=function(u,h){var d,c,p,D,B=this.byteLength,I=v(u,B),j=B;return h!==e&&(j=v(h,B)),I>j?new ArrayBuffer(0):(d=j-I,c=new ArrayBuffer(d),p=new Uint8Array(c),D=new Uint8Array(this,I,d),p.set(D),c)}}(),L.prototype.append=function(v){return this.appendBinary(x(v)),this},L.prototype.appendBinary=function(v){this._buff+=v,this._length+=v.length;var u,h=this._buff.length;for(u=64;u<=h;u+=64)n(this._hash,i(this._buff.substring(u-64,u)));return this._buff=this._buff.substring(u-64),this},L.prototype.end=function(v){var u,h,d=this._buff,c=d.length,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(u=0;u<c;u+=1)p[u>>2]|=d.charCodeAt(u)<<(u%4<<3);return this._finish(p,c),h=S(this._hash),v&&(h=R(h)),this.reset(),h},L.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},L.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},L.prototype.setState=function(v){return this._buff=v.buff,this._length=v.length,this._hash=v.hash,this},L.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},L.prototype._finish=function(v,u){var h,d,c,p=u;if(v[p>>2]|=128<<(p%4<<3),p>55)for(n(this._hash,v),p=0;p<16;p+=1)v[p]=0;h=(h=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(h[2],16),c=parseInt(h[1],16)||0,v[14]=d,v[15]=c,n(this._hash,v)},L.hash=function(v,u){return L.hashBinary(x(v),u)},L.hashBinary=function(v,u){var h=S(l(v));return u?R(h):h},L.ArrayBuffer=function(){this.reset()},L.ArrayBuffer.prototype.append=function(v){var u,h=F(this._buff.buffer,v,!0),d=h.length;for(this._length+=v.byteLength,u=64;u<=d;u+=64)n(this._hash,s(h.subarray(u-64,u)));return this._buff=u-64<d?new Uint8Array(h.buffer.slice(u-64)):new Uint8Array(0),this},L.ArrayBuffer.prototype.end=function(v){var u,h,d=this._buff,c=d.length,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(u=0;u<c;u+=1)p[u>>2]|=d[u]<<(u%4<<3);return this._finish(p,c),h=S(this._hash),v&&(h=R(h)),this.reset(),h},L.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},L.ArrayBuffer.prototype.getState=function(){var v=L.prototype.getState.call(this);return v.buff=z(v.buff),v},L.ArrayBuffer.prototype.setState=function(v){return v.buff=k(v.buff,!0),L.prototype.setState.call(this,v)},L.ArrayBuffer.prototype.destroy=L.prototype.destroy,L.ArrayBuffer.prototype._finish=L.prototype._finish,L.ArrayBuffer.hash=function(v,u){var h=S(y(new Uint8Array(v)));return u?R(h):h},L}();const Ze=[];class re{static addHandler(t,n,i){t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent?t.attachEvent("on"+n,i):t["on"+n]=i}static windowResizeHandler(t){re.addHandler(window,"resize",t)}static fullscreenEnabled(){const t=window.document;return document.fullscreenEnabled||window.fullScreen||t.mozFullscreenEnabled||t.webkitIsFullScreen}static fullScreen(t,n){if(n){const i=window.document;let s=window.document.exitFullscreen||i.msExitFullscreen||i.mozCancelFullScreen||i.webkitCancelFullScreen;typeof s<"u"&&s?s.call(window.document):typeof window.ActiveXObject<"u"&&new window.ActiveXObject("WScript.Shell")?.SendKeys("{F11}")}else{let i=t;i||(i=window.document.documentElement);let s=i.requestFullScreen||i.webkitRequestFullScreen||i.mozRequestFullScreen||i.msRequestFullScreen;typeof s<"u"&&s?s.call(i):typeof window.ActiveXObject<"u"&&new window.ActiveXObject("WScript.Shell")?.SendKeys("{F11}")}}static requestFullScreen(t=window.document.documentElement){let n=t;var i=n.requestFullScreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullScreen;if(i)i.call(n);else if(typeof window.ActiveXObject<"u"){var s=new window.ActiveXObject("WScript.Shell");s!==null&&s.SendKeys("{F11}")}}static exitFullScreen(){const t=window.document;var n=document.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.webkitExitFullscreen;if(n)n.call(document);else if(typeof window.ActiveXObject<"u"){var i=new window.ActiveXObject("WScript.Shell");i!==null&&i.SendKeys("{F11}")}}static fullScreenElement(){return window.document.fullscreenElement||window.document.webkitFullscreenElement||window.document.mozFullscreenElement||window.document.msFullscreenElement}static isFullScreen(){return!!re.fullScreenElement()}static onFullScreenChanged(t){let n;"onfullscreenchange"in window.document?n="fullscreenchange":"onwebkitfullscreenchange"in window.document?n="webkitfullscreenchange":"onmozfullscreenchange"in window.document&&(n="mozfullscreenchange"),n?document.addEventListener(n,function(){const i=re.isFullScreen();t(i)}):document.addEventListener("MSFullscreenChange",function(){const i=re.isFullScreen();t(i)})}static stringifyCircularHandler(t,n){if(typeof n=="object"&&n!==null){if(Ze.indexOf(n)!==-1)return;Ze.push(n)}return n}static jsonStringify(t){if(!t)return"";const n=JSON.stringify(t,re.stringifyCircularHandler);return Ze.length=0,n}static jsonParse(t){const n=re.jsonStringify(t);if(n.length>1)return JSON.parse(n)}static getObjectURL(t){let n;const i=window;return i.createObjcectURL!=null?n=i.createOjcectURL(t):window.URL!=null?n=window.URL.createObjectURL(t):window.webkitURL!=null&&(n=window.webkitURL.createObjectURL(t)),n}static getFileShortMD5(t,n){const i=File.prototype,s=i.slice||i.mozSlice||i.webkitSlice,l=t,y=2097152,w=new Gt.ArrayBuffer,S=new FileReader;S.onload=function(x){w.append(x.target?.result);const k=w.end();n({isOK:!0,data:k})},S.onerror=function(){const x="\u8BA1\u7B97\u6587\u4EF6\u7B80\u5355\u6458\u8981\u9519\u8BEF\uFF01";console.warn(x),n({isOK:!1,data:x})},function(){const x=0+y>=l.size?l.size:0+y;S.readAsArrayBuffer(s.call(l,0,x))}()}static MD5(t,n=!1){return Gt.hash(t,n)}static copyText=t=>new Promise((n,i)=>{const s=document.createElement("input");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),s.remove(),n(!0)});static setGrayMode(t){re.toggleClass(t,"grayMode",document.documentElement)}static toggleClass(t,n,i){const s=i||document.body;let{className:l}=s;l=l.replace(n,""),s.className=t?`${l} ${n} `:l}static setCssVar(t,n,i=document.documentElement){i.style.setProperty(t,n)}}class dn{static isNullOrEmpty=t=>t===null||t===""||t===void 0||t.length===0;static isNotEmpty=t=>!(t===null||t===""||t===void 0||t.length===0);static toHump(t){return t.replace(/[\-\/\_](\w)/g,(n,i)=>i.toUpperCase()).replace("views","")}}class vt{prefixKey;storage;constructor(t="",n=localStorage){this.prefixKey=t,this.storage=n}getKey(t){return`${this.prefixKey}${t}`.toUpperCase()}set(t,n,i=604800){const s=JSON.stringify({value:n,expire:i!==null?new Date().getTime()+1e3*i:null});this.storage.setItem(this.getKey(t),s)}get(t,n=null){const i=this.storage.getItem(this.getKey(t));if(i)try{const s=JSON.parse(i),{value:l,expire:y}=s;if(y===null||y>=Date.now())return l;this.remove(this.getKey(t))}catch{return n}return n}remove(t){this.storage.removeItem(this.getKey(t))}clear(){this.storage.clear()}setCookie(t,n,i=604800){document.cookie=`${this.getKey(t)}=${n}; Max-Age=${i}`}getCookie(t){const n=document.cookie.split("; ");for(let i=0,s=n.length;i<s;i++){const l=n[i].split("=");if(l[0]===this.getKey(t))return l[1]}return""}removeCookie(t){this.setCookie(t,1,-1)}clearCookie(){const t=document.cookie.match(/[^ =;]+(?==)/g);if(t)for(let n=t.length;n--;)document.cookie=t[n]+"=0;expire="+new Date(0).toUTCString()}}new vt("",localStorage);function lt(){let e=[];const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n=0;n<36;n++){const s=Math.floor(16*Math.random());e[n]=t.substring(s,s+1)}e[14]="4";const i=3&Number(e[19])|8;return e[19]=t.substring(i,i+1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}var Yt;function ji(e){return{all:e=e||new Map,on(t,n){const i=e?.get(t);i&&i.push(n)||e?.set(t,[n])},off(t,n){const i=e?.get(t);i&&i.splice(i.indexOf(n)>>>0,1)},emit(t,n){(e?.get(t)||[]).slice().map(i=>{i(n)}),(e?.get("*")||[]).slice().map(i=>{i(t,n)})}}}(function(e){e[e.RGBA=0]="RGBA",e[e.Hex=1]="Hex",e[e.Hsla=2]="Hsla"})(Yt||(Yt={}));const Ne=ji(),ne={HproseServiceErrorEvent:"HproseServiceError",WebAPIErrorEvent:"WebAPIError",AlertInfoEvent:"AlertInfoEvent",CommonWarnEvent:"CommonWarnEvent",WidgetLoadedEvent:"WidgetLoaded",WidgetUnLoadedEvent:"WidgetUnLoaded",WidgetVisibleChanged:"WidgetVisibleChanged",AxiosRequestErrorEvent:"AxiosRequestErrorEvent"},fn=(e,t)=>{const n=document.createElement("a");n.download=t,n.style.display="none";const i=new Blob([e],{type:"application/octet-stream"});n.href=URL.createObjectURL(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)},Oi=(e,t)=>{const n=JSON.stringify(e,null,2);t?fn(n,t+".json"):Ne.emit(ne.CommonWarnEvent,"\u53C2\u6570JsonID\u4E0D\u80FD\u4E3A\u7A7A\uFF01")},M={Config:SysConfig,EventBus:Ne,DefaultProxyClient:null,Axios:Ri},pn="access_token",be=new vt("user",localStorage);function Se(){return be.get(pn)}function mn(){be.remove(pn),M.User&&delete M.User}function Ui(){return Se()?.refresh}function gn(e,t,n,i="json",s){const l={baseURL:M.Config.ServiceURL.DefaultWebAPI,timeout:6e4,params:e,headers:{"Content-Type":"application/json",Authorization:"bearer "+Se()?.token},responseType:i,cancelToken:s};if(n)for(let y in n)l.headers[y]=n[y];return M.SystemID&&(l.headers.sysid=M.SystemID,M.SystemGroup&&(l.headers.sysgroup=M.SystemGroup)),t&&(l.baseURL=t),l}function We(e,t,n,i,s="json",l,y){const w=gn(n,t,i,s,l);return y&&y>=2e4&&(w.timeout=y),M.Axios?.get(e,w).catch(function(S){vn(S,t,e,"Get")})}function vn(e,t,n,i="Get"){const s=`${t}${n}`;if(e&&e.response){let l=!1;const y=e.response.status;switch(y){case 400:e.message="\u9519\u8BEF\u8BF7\u6C42";break;case 401:e.message="\u672A\u6388\u6743\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55";break;case 403:e.message="\u62D2\u7EDD\u8BBF\u95EE";break;case 404:e.message="\u8BF7\u6C42\u9519\u8BEF,\u672A\u627E\u5230\u8BE5\u8D44\u6E90";break;case 405:e.message="\u8BF7\u6C42\u65B9\u6CD5\u672A\u5141\u8BB8";break;case 408:e.message="\u8BF7\u6C42\u8D85\u65F6";break;case 500:const S=e.response.data;if(S){const x=S.indexOf(":"),k=S.indexOf(`\r
`);if(x>0&&k-x>2){const z=S.substring(x+2,k);z.indexOf("'System.Exception'")>0?e.message="\u540E\u53F0\u670D\u52A1\u5185\u90E8\u51FA\u9519\uFF01":(l=!0,e.message=z)}}else e.message="\u670D\u52A1\u5668\u7AEF\u51FA\u9519";break;case 501:e.message="\u7F51\u7EDC\u672A\u5B9E\u73B0";break;case 502:e.message="\u7F51\u7EDC\u9519\u8BEF";break;case 503:e.message="\u670D\u52A1\u4E0D\u53EF\u7528";break;case 504:e.message="\u7F51\u7EDC\u8D85\u65F6";break;case 505:e.message="http\u7248\u672C\u4E0D\u652F\u6301\u8BE5\u8BF7\u6C42";break;default:e.message=`\u8FDE\u63A5\u9519\u8BEF${e.response.status}`}let w={address:s,code:y,isExceptionInfo:l,message:e.message,result:e.response.data};if(console.warn(`HTTP ${i}\u8BF7\u6C42\u9519\u8BEF\uFF1A`,w),M.EventBus.emit(ne.AxiosRequestErrorEvent,w),l)throw new Error(e.message)}}function Ni(e,t,n,i,s,l="json",y){const w=gn(i,t,s,l);y&&y>=2e4&&(w.timeout=y);const S=function(x){let k=new FormData;return x&&Object.keys(x).forEach(z=>{if(!x)return;let F=x[z];F!=null&&k.append(z,function(R){return R instanceof Blob?R:R.toString()}(F))}),k}(n);return M.Axios?.post(e,S,w).catch(function(x){vn(x,t,e,"Post")})}var Kt={exports:{}},Wi=typeof window<"u"?window:ye!==void 0?ye:typeof self<"u"?self:{},Hi=function(e){if(!e)return!1;var t=$i.call(e);return t==="[object Function]"||typeof e=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},$i=Object.prototype.toString,et=function(e){return e.replace(/^\s+|\s+$/g,"")},qi=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)Xi.call(n,i)&&(e[i]=n[i])}return e},Xi=Object.prototype.hasOwnProperty,Vt=Wi,Gi=Hi,Yi=function(e){if(!e)return{};for(var t,n={},i=et(e).split(`
`),s=0;s<i.length;s++){var l=i[s],y=l.indexOf(":"),w=et(l.slice(0,y)).toLowerCase(),S=et(l.slice(y+1));n[w]===void 0?n[w]=S:(t=n[w],Object.prototype.toString.call(t)==="[object Array]"?n[w].push(S):n[w]=[n[w],S])}return n},Ki=qi;function yn(e,t,n){var i=e;return Gi(t)?(n=t,typeof e=="string"&&(i={uri:e})):i=Ki(t,{uri:e}),i.callback=n,i}function ae(e,t,n){return wn(t=yn(e,t,n))}function wn(e){if(e.callback===void 0)throw new Error("callback argument missing");var t=!1,n=function(h,d,c){t||(t=!0,e.callback(h,d,c))};function i(){var h=void 0;if(h=S.response?S.response:S.responseText||function(d){try{if(d.responseType==="document")return d.responseXML;var c=d.responseXML&&d.responseXML.documentElement.nodeName==="parsererror";if(d.responseType===""&&!c)return d.responseXML}catch{}return null}(S),v)try{h=JSON.parse(h)}catch{}return h}function s(h){return clearTimeout(x),h instanceof Error||(h=new Error(""+(h||"Unknown XMLHttpRequest Error"))),h.statusCode=0,n(h,u)}function l(){if(!w){var h;clearTimeout(x),h=e.useXDR&&S.status===void 0?200:S.status===1223?204:S.status;var d=u,c=null;return h!==0?(d={body:i(),statusCode:h,method:z,headers:{},url:k,rawRequest:S},S.getAllResponseHeaders&&(d.headers=Yi(S.getAllResponseHeaders()))):c=new Error("Internal XMLHttpRequest Error"),n(c,d,d.body)}}var y,w,S=e.xhr||null;S||(S=e.cors||e.useXDR?new ae.XDomainRequest:new ae.XMLHttpRequest);var x,k=S.url=e.uri||e.url,z=S.method=e.method||"GET",F=e.body||e.data,R=S.headers=e.headers||{},L=!!e.sync,v=!1,u={body:void 0,headers:{},statusCode:0,method:z,url:k,rawRequest:S};if("json"in e&&e.json!==!1&&(v=!0,R.accept||R.Accept||(R.Accept="application/json"),z!=="GET"&&z!=="HEAD"&&(R["content-type"]||R["Content-Type"]||(R["Content-Type"]="application/json"),F=JSON.stringify(e.json===!0?F:e.json))),S.onreadystatechange=function(){S.readyState===4&&setTimeout(l,0)},S.onload=l,S.onerror=s,S.onprogress=function(){},S.onabort=function(){w=!0},S.ontimeout=s,S.open(z,k,!L,e.username,e.password),L||(S.withCredentials=!!e.withCredentials),!L&&e.timeout>0&&(x=setTimeout(function(){if(!w){w=!0,S.abort("timeout");var h=new Error("XMLHttpRequest timeout");h.code="ETIMEDOUT",s(h)}},e.timeout)),S.setRequestHeader)for(y in R)R.hasOwnProperty(y)&&S.setRequestHeader(y,R[y]);else if(e.headers&&!function(h){for(var d in h)if(h.hasOwnProperty(d))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(S.responseType=e.responseType),"beforeSend"in e&&typeof e.beforeSend=="function"&&e.beforeSend(S),S.send(F||null),S}Kt.exports=ae,Kt.exports.default=ae,ae.XMLHttpRequest=Vt.XMLHttpRequest||function(){},ae.XDomainRequest="withCredentials"in new ae.XMLHttpRequest?ae.XMLHttpRequest:Vt.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){ae[e==="delete"?"del":e]=function(t,n,i){return(n=yn(t,n,i)).method=e.toUpperCase(),wn(n)}});class Ue{hproseURL;client;hproseProxy;static httpTransport;constructor(t){if(t&&!dn.isNullOrEmpty(t)){if(Ue.httpTransport||(Ue.httpTransport=new Fi),this.client=new Ti(t),!this.client)throw Error("Hprose Client\u521D\u59CB\u5316\u9519\u8BEF");this.hproseURL=t,this.init()}}init(){this.client&&this.client.useServiceAsync().then(t=>{this.hproseProxy=t}).catch(t=>{String(t).indexOf("find this method ~")>0?(this.hproseProxy=this.client?.useService(),console.warn("\u65E7\u7248\u672C\u4E0D\u652F\u6301useServiceAsync")):Ne.emit(ne.HproseServiceErrorEvent,"\u521D\u59CB\u5316\u9ED8\u8BA4Hprose!"),console.warn(t)})}async getProxy(){if(!this.hproseProxy)try{this.client&&(this.hproseProxy=await this.client.useServiceAsync())}catch(t){console.warn(t),this.hproseProxy=this.client?.useService()}return this.hproseProxy}async invoke(t,n,i){if(this.client)return await this.client.invoke(t,n,i)}encode(t,n,i){if(this.client)return this.client.codec.encode(t,n,i)}decode(t,n){if(this.client)return this.client.codec.decode(t,n)}}class ht{hproseClient;hpProxyObj;defaultContext=new Qe;constructor(t){this.hproseClient=new Ue(t),this.hpProxyObj=null}getClientContext(t,n){const i={};n&&(i.requestHeaders=n);const s=Se();i.httpRequestHeaders=t||{};const l=i.httpRequestHeaders;return s&&(l.token=s.token),M.SystemID&&(l.sysid=M.SystemID,M.SystemGroup&&(l.sysgroup=M.SystemGroup)),new Qe(i)}async getHproseProxy(){if(!this.hproseClient)throw new Error("HproseClient\u5BF9\u8C61\u4E3A\u6784\u5EFA\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5");if(!this.hpProxyObj){const t=await this.hproseClient.getProxy();this.hpProxyObj=t}return this.hpProxyObj||Ne.emit(ne.HproseServiceErrorEvent,"HproseProxy\u5BF9\u8C61\u4E3A\u7A7A\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5\uFF01"),this.hpProxyObj}async hproseInvoke(t,n,i){if(!this.hproseClient)throw new Error("HproseClient\u5BF9\u8C61\u4E3A\u6784\u5EFA\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5");return await this.hproseClient.invoke(t,n,i)}async hproseInvokeContext(t,n,...i){if(!this.hproseClient)throw new Error("HproseClient\u5BF9\u8C61\u4E3A\u6784\u5EFA\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5");const s=Se();return console.log(s,"userToken3"),s&&(n||(n=new Qe({httpRequestHeaders:{token:s.token}}))),await this.hproseClient.invoke(t,i,n)}async hproseInvokeEncode(t){const n=new qt(t).toBytes(),i=await this.hproseClient.client?.request(n,this.defaultContext);return i&&this.hproseClient.client?.codec.decode(i,this.defaultContext)}encodeRequest(t,...n){const i=this.hproseClient.client?.codec?.encode(t,n,this.defaultContext);return qt.toString(i)}}class Vi{message;eventBus;constructor(t,n){t&&(this.message=t),n&&(this.eventBus=n)}msg(t,n=3,i="success"){if(this.message)if(typeof this.message=="function")this.message({type:i,message:t,duration:n});else switch(i){case"info":this.message.info(t,n);break;case"success":this.message.success(t,n);break;case"warning":this.message.warn(t,n);break;case"error":this.message.error(t,n)}else{switch(i){case"info":case"success":console.log(t);break;case"warning":console.warn(t);break;case"error":i="dark",console.error(t)}this.eventBus&&this.eventBus.emit(ne.AlertInfoEvent,{type:i,info:t})}}info(t,n=3){this.msg(t,n,"info")}warn(t,n=3){this.msg(t,n,"warning")}err(t,n=3){this.msg(t,n,"error")}}const jo=function(e,t,n){!M.Config.DefaultHproseAPI&&M.Config.ServiceURL&&(M.Config.DefaultHproseAPI=M.Config.ServiceURL.DefaultHproseAPI),M.Config.DefaultHproseAPI&&dn.isNotEmpty(M.Config.DefaultHproseAPI)&&(M.DefaultProxyClient=new ht(M.Config.DefaultHproseAPI));const i=M.Config.UI.GrayMode;i&&re.setGrayMode(i);const s=new Vi(e,M.EventBus);M.Message=s,M.SystemID=t,M.SystemGroup=n,M.EventBus.on(ne.HproseServiceErrorEvent,l=>{const y=`\u5F53\u524D\u540E\u53F0\u4E1A\u52A1\u670D\u52A1\u4E0D\u53EF\u7528!${l}`;s.warn(y)}),M.EventBus.on(ne.WebAPIErrorEvent,l=>{const y=`WebAPI\u540E\u53F0\u670D\u52A1\u4E0D\u53EF\u7528!${l}`;s.warn(y)}),M.EventBus.on(ne.CommonWarnEvent,l=>{s.warn(l)})},bn="is_LockScreen",Jt=be.get(bn,!1),Ee={isLock:Jt,lockTime:Jt=="true"?Sn():0};function Qt(e){Ee.isLock=e,be.set(bn,e,10),e&&(mn(),console.log("\u9501\u5C4F\u4E86\u2026\u2026"))}function Sn(){let e=3600;return M.Config.UI?.LockTime&&M.Config.UI?.LockTime>=10&&(e=M.Config.UI.LockTime),e}let tt;function dt(){clearInterval(tt),!(window.location.href.indexOf("/login")>0||Ee.isLock)&&(Qt(!1),Ee.lockTime=Sn(),tt=setInterval(()=>{if(Ee.lockTime--,Ee.lockTime<=0)return Qt(!0),clearInterval(tt)},1e3))}function Oo(){dt(),document.addEventListener("mousedown",dt)}function Uo(){document.removeEventListener("mousedown",dt)}function nt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}(function e(t,n,i){function s(w,S){if(!n[w]){if(!t[w]){if(!S&&nt)return nt(w);if(l)return l(w,!0);var x=new Error("Cannot find module '"+w+"'");throw x.code="MODULE_NOT_FOUND",x}var k=n[w]={exports:{}};t[w][0].call(k.exports,function(z){var F=t[w][1][z];return s(F||z)},k,k.exports,e,t,n,i)}return n[w].exports}for(var l=nt,y=0;y<i.length;y++)s(i[y]);return s})({1:[function(e,t,n){(function(i){var s,l,y=i.MutationObserver||i.WebKitMutationObserver;if(y){var w=0,S=new y(F),x=i.document.createTextNode("");S.observe(x,{characterData:!0}),s=function(){x.data=w=++w%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var L=i.document.createElement("script");L.onreadystatechange=function(){F(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},i.document.documentElement.appendChild(L)}:function(){setTimeout(F,0)};else{var k=new i.MessageChannel;k.port1.onmessage=F,s=function(){k.port2.postMessage(0)}}var z=[];function F(){var L,v;l=!0;for(var u=z.length;u;){for(v=z,z=[],L=-1;++L<u;)v[L]();u=z.length}l=!1}function R(L){z.push(L)!==1||l||s()}t.exports=R}).call(this,ye!==void 0?ye:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,n){var i=e(1);function s(){}var l={},y=["REJECTED"],w=["FULFILLED"],S=["PENDING"];function x(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=S,this.queue=[],this.outcome=void 0,c!==s&&R(this,c)}function k(c,p,D){this.promise=c,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function z(c,p,D){i(function(){var B;try{B=p(D)}catch(I){return l.reject(c,I)}B===c?l.reject(c,new TypeError("Cannot resolve promise with itself")):l.resolve(c,B)})}function F(c){var p=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof p=="function")return function(){p.apply(c,arguments)}}function R(c,p){var D=!1;function B(O){D||(D=!0,l.reject(c,O))}function I(O){D||(D=!0,l.resolve(c,O))}function j(){p(I,B)}var U=L(j);U.status==="error"&&B(U.value)}function L(c,p){var D={};try{D.value=c(p),D.status="success"}catch(B){D.status="error",D.value=B}return D}function v(c){return c instanceof this?c:l.resolve(new this(s),c)}function u(c){var p=new this(s);return l.reject(p,c)}function h(c){var p=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=c.length,B=!1;if(!D)return this.resolve([]);for(var I=new Array(D),j=0,U=-1,O=new this(s);++U<D;)H(c[U],U);return O;function H(J,X){function Y(q){I[X]=q,++j!==D||B||(B=!0,l.resolve(O,I))}p.resolve(J).then(Y,function(q){B||(B=!0,l.reject(O,q))})}}function d(c){var p=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=c.length,B=!1;if(!D)return this.resolve([]);for(var I=-1,j=new this(s);++I<D;)U(c[I]);return j;function U(O){p.resolve(O).then(function(H){B||(B=!0,l.resolve(j,H))},function(H){B||(B=!0,l.reject(j,H))})}}t.exports=x,x.prototype.catch=function(c){return this.then(null,c)},x.prototype.then=function(c,p){if(typeof c!="function"&&this.state===w||typeof p!="function"&&this.state===y)return this;var D=new this.constructor(s);return this.state!==S?z(D,this.state===w?c:p,this.outcome):this.queue.push(new k(D,c,p)),D},k.prototype.callFulfilled=function(c){l.resolve(this.promise,c)},k.prototype.otherCallFulfilled=function(c){z(this.promise,this.onFulfilled,c)},k.prototype.callRejected=function(c){l.reject(this.promise,c)},k.prototype.otherCallRejected=function(c){z(this.promise,this.onRejected,c)},l.resolve=function(c,p){var D=L(F,p);if(D.status==="error")return l.reject(c,D.value);var B=D.value;if(B)R(c,B);else{c.state=w,c.outcome=p;for(var I=-1,j=c.queue.length;++I<j;)c.queue[I].callFulfilled(p)}return c},l.reject=function(c,p){c.state=y,c.outcome=p;for(var D=-1,B=c.queue.length;++D<B;)c.queue[D].callRejected(p);return c},x.resolve=v,x.reject=u,x.all=h,x.race=d},{1:1}],3:[function(e,t,n){(function(i){typeof i.Promise!="function"&&(i.Promise=e(2))}).call(this,ye!==void 0?ye:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,n){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var y=l();function w(){try{if(!y||!y.open)return!1;var o=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!o||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function S(o,r){o=o||[],r=r||{};try{return new Blob(o,r)}catch(f){if(f.name!=="TypeError")throw f;for(var a=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),m=0;m<o.length;m+=1)a.append(o[m]);return a.getBlob(r.type)}}typeof Promise>"u"&&e(3);var x=Promise;function k(o,r){r&&o.then(function(a){r(null,a)},function(a){r(a)})}function z(o,r,a){typeof r=="function"&&o.then(r),typeof a=="function"&&o.catch(a)}function F(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}function R(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var L="local-forage-detect-blob-support",v=void 0,u={},h=Object.prototype.toString,d="readonly",c="readwrite";function p(o){for(var r=o.length,a=new ArrayBuffer(r),m=new Uint8Array(a),f=0;f<r;f++)m[f]=o.charCodeAt(f);return a}function D(o){return new x(function(r){var a=o.transaction(L,c),m=S([""]);a.objectStore(L).put(m,"key"),a.onabort=function(f){f.preventDefault(),f.stopPropagation(),r(!1)},a.oncomplete=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),g=navigator.userAgent.match(/Edge\//);r(g||!f||parseInt(f[1],10)>=43)}}).catch(function(){return!1})}function B(o){return typeof v=="boolean"?x.resolve(v):D(o).then(function(r){return v=r})}function I(o){var r=u[o.name],a={};a.promise=new x(function(m,f){a.resolve=m,a.reject=f}),r.deferredOperations.push(a),r.dbReady?r.dbReady=r.dbReady.then(function(){return a.promise}):r.dbReady=a.promise}function j(o){var r=u[o.name].deferredOperations.pop();if(r)return r.resolve(),r.promise}function U(o,r){var a=u[o.name].deferredOperations.pop();if(a)return a.reject(r),a.promise}function O(o,r){return new x(function(a,m){if(u[o.name]=u[o.name]||Ct(),o.db){if(!r)return a(o.db);I(o),o.db.close()}var f=[o.name];r&&f.push(o.version);var g=y.open.apply(y,f);r&&(g.onupgradeneeded=function(b){var C=g.result;try{C.createObjectStore(o.storeName),b.oldVersion<=1&&C.createObjectStore(L)}catch(E){if(E.name!=="ConstraintError")throw E;console.warn('The database "'+o.name+'" has been upgraded from version '+b.oldVersion+" to version "+b.newVersion+', but the storage "'+o.storeName+'" already exists.')}}),g.onerror=function(b){b.preventDefault(),m(g.error)},g.onsuccess=function(){var b=g.result;b.onversionchange=function(C){C.target.close()},a(b),j(o)}})}function H(o){return O(o,!1)}function J(o){return O(o,!0)}function X(o,r){if(!o.db)return!0;var a=!o.db.objectStoreNames.contains(o.storeName),m=o.version<o.db.version,f=o.version>o.db.version;if(m&&(o.version!==r&&console.warn('The database "'+o.name+`" can't be downgraded from version `+o.db.version+" to version "+o.version+"."),o.version=o.db.version),f||a){if(a){var g=o.db.version+1;g>o.version&&(o.version=g)}return!0}return!1}function Y(o){return new x(function(r,a){var m=new FileReader;m.onerror=a,m.onloadend=function(f){var g=btoa(f.target.result||"");r({__local_forage_encoded_blob:!0,data:g,type:o.type})},m.readAsBinaryString(o)})}function q(o){return S([p(atob(o.data))],{type:o.type})}function ie(o){return o&&o.__local_forage_encoded_blob}function _e(o){var r=this,a=r._initReady().then(function(){var m=u[r._dbInfo.name];if(m&&m.dbReady)return m.dbReady});return z(a,o,o),a}function $e(o){I(o);for(var r=u[o.name],a=r.forages,m=0;m<a.length;m++){var f=a[m];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null)}return o.db=null,H(o).then(function(g){return o.db=g,X(o)?J(o):g}).then(function(g){o.db=r.db=g;for(var b=0;b<a.length;b++)a[b]._dbInfo.db=g}).catch(function(g){throw U(o,g),g})}function te(o,r,a,m){m===void 0&&(m=1);try{var f=o.db.transaction(o.storeName,r);a(null,f)}catch(g){if(m>0&&(!o.db||g.name==="InvalidStateError"||g.name==="NotFoundError"))return x.resolve().then(function(){if(!o.db||g.name==="NotFoundError"&&!o.db.objectStoreNames.contains(o.storeName)&&o.version<=o.db.version)return o.db&&(o.version=o.db.version+1),J(o)}).then(function(){return $e(o).then(function(){te(o,r,a,m-1)})}).catch(a);a(g)}}function Ct(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function In(o){var r=this,a={db:null};if(o)for(var m in o)a[m]=o[m];var f=u[a.name];f||(f=Ct(),u[a.name]=f),f.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=_e);var g=[];function b(){return x.resolve()}for(var C=0;C<f.forages.length;C++){var E=f.forages[C];E!==r&&g.push(E._initReady().catch(b))}var _=f.forages.slice(0);return x.all(g).then(function(){return a.db=f.db,H(a)}).then(function(A){return a.db=A,X(a,r._defaultConfig.version)?J(a):A}).then(function(A){a.db=f.db=A,r._dbInfo=a;for(var P=0;P<_.length;P++){var T=_[P];T!==r&&(T._dbInfo.db=a.db,T._dbInfo.version=a.version)}})}function Mn(o,r){var a=this;o=F(o);var m=new x(function(f,g){a.ready().then(function(){te(a._dbInfo,d,function(b,C){if(b)return g(b);try{var E=C.objectStore(a._dbInfo.storeName).get(o);E.onsuccess=function(){var _=E.result;_===void 0&&(_=null),ie(_)&&(_=q(_)),f(_)},E.onerror=function(){g(E.error)}}catch(_){g(_)}})}).catch(g)});return k(m,r),m}function Ln(o,r){var a=this,m=new x(function(f,g){a.ready().then(function(){te(a._dbInfo,d,function(b,C){if(b)return g(b);try{var E=C.objectStore(a._dbInfo.storeName).openCursor(),_=1;E.onsuccess=function(){var A=E.result;if(A){var P=A.value;ie(P)&&(P=q(P));var T=o(P,A.key,_++);T!==void 0?f(T):A.continue()}else f()},E.onerror=function(){g(E.error)}}catch(A){g(A)}})}).catch(g)});return k(m,r),m}function Dn(o,r,a){var m=this;o=F(o);var f=new x(function(g,b){var C;m.ready().then(function(){return C=m._dbInfo,h.call(r)==="[object Blob]"?B(C.db).then(function(E){return E?r:Y(r)}):r}).then(function(E){te(m._dbInfo,c,function(_,A){if(_)return b(_);try{var P=A.objectStore(m._dbInfo.storeName);E===null&&(E=void 0);var T=P.put(E,o);A.oncomplete=function(){E===void 0&&(E=null),g(E)},A.onabort=A.onerror=function(){var N=T.error?T.error:T.transaction.error;b(N)}}catch(N){b(N)}})}).catch(b)});return k(f,a),f}function Pn(o,r){var a=this;o=F(o);var m=new x(function(f,g){a.ready().then(function(){te(a._dbInfo,c,function(b,C){if(b)return g(b);try{var E=C.objectStore(a._dbInfo.storeName).delete(o);C.oncomplete=function(){f()},C.onerror=function(){g(E.error)},C.onabort=function(){var _=E.error?E.error:E.transaction.error;g(_)}}catch(_){g(_)}})}).catch(g)});return k(m,r),m}function Rn(o){var r=this,a=new x(function(m,f){r.ready().then(function(){te(r._dbInfo,c,function(g,b){if(g)return f(g);try{var C=b.objectStore(r._dbInfo.storeName).clear();b.oncomplete=function(){m()},b.onabort=b.onerror=function(){var E=C.error?C.error:C.transaction.error;f(E)}}catch(E){f(E)}})}).catch(f)});return k(a,o),a}function Fn(o){var r=this,a=new x(function(m,f){r.ready().then(function(){te(r._dbInfo,d,function(g,b){if(g)return f(g);try{var C=b.objectStore(r._dbInfo.storeName).count();C.onsuccess=function(){m(C.result)},C.onerror=function(){f(C.error)}}catch(E){f(E)}})}).catch(f)});return k(a,o),a}function Tn(o,r){var a=this,m=new x(function(f,g){o<0?f(null):a.ready().then(function(){te(a._dbInfo,d,function(b,C){if(b)return g(b);try{var E=C.objectStore(a._dbInfo.storeName),_=!1,A=E.openKeyCursor();A.onsuccess=function(){var P=A.result;P?o===0||_?f(P.key):(_=!0,P.advance(o)):f(null)},A.onerror=function(){g(A.error)}}catch(P){g(P)}})}).catch(g)});return k(m,r),m}function jn(o){var r=this,a=new x(function(m,f){r.ready().then(function(){te(r._dbInfo,d,function(g,b){if(g)return f(g);try{var C=b.objectStore(r._dbInfo.storeName).openKeyCursor(),E=[];C.onsuccess=function(){var _=C.result;_?(E.push(_.key),_.continue()):m(E)},C.onerror=function(){f(C.error)}}catch(_){f(_)}})}).catch(f)});return k(a,o),a}function On(o,r){r=R.apply(this,arguments);var a=this.config();(o=typeof o!="function"&&o||{}).name||(o.name=o.name||a.name,o.storeName=o.storeName||a.storeName);var m,f=this;if(o.name){var g=o.name===a.name&&f._dbInfo.db?x.resolve(f._dbInfo.db):H(o).then(function(b){var C=u[o.name],E=C.forages;C.db=b;for(var _=0;_<E.length;_++)E[_]._dbInfo.db=b;return b});m=o.storeName?g.then(function(b){if(b.objectStoreNames.contains(o.storeName)){var C=b.version+1;I(o);var E=u[o.name],_=E.forages;b.close();for(var A=0;A<_.length;A++){var P=_[A];P._dbInfo.db=null,P._dbInfo.version=C}return new x(function(T,N){var W=y.open(o.name,C);W.onerror=function(oe){W.result.close(),N(oe)},W.onupgradeneeded=function(){W.result.deleteObjectStore(o.storeName)},W.onsuccess=function(){var oe=W.result;oe.close(),T(oe)}}).then(function(T){E.db=T;for(var N=0;N<_.length;N++){var W=_[N];W._dbInfo.db=T,j(W._dbInfo)}}).catch(function(T){throw(U(o,T)||x.resolve()).catch(function(){}),T})}}):g.then(function(b){I(o);var C=u[o.name],E=C.forages;b.close();for(var _=0;_<E.length;_++)E[_]._dbInfo.db=null;return new x(function(A,P){var T=y.deleteDatabase(o.name);T.onerror=function(){var N=T.result;N&&N.close(),P(T.error)},T.onblocked=function(){console.warn('dropInstance blocked for database "'+o.name+'" until all open connections are closed')},T.onsuccess=function(){var N=T.result;N&&N.close(),A(N)}}).then(function(A){C.db=A;for(var P=0;P<E.length;P++)j(E[P]._dbInfo)}).catch(function(A){throw(U(o,A)||x.resolve()).catch(function(){}),A})})}else m=x.reject("Invalid arguments");return k(m,r),m}var Un={_driver:"asyncStorage",_initStorage:In,_support:w(),iterate:Ln,getItem:Mn,setItem:Dn,removeItem:Pn,clear:Rn,length:Fn,key:Tn,keys:jn,dropInstance:On};function Nn(){return typeof openDatabase=="function"}var ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wn="~~local_forage_type~",Et=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",qe=ke.length,Xe="arbf",Ge="blob",zt="si08",_t="ui08",kt="uic8",At="si16",Bt="si32",It="ur16",Mt="ui32",Lt="fl32",Dt="fl64",Pt=qe+Xe.length,Rt=Object.prototype.toString;function Ft(o){var r,a,m,f,g,b=.75*o.length,C=o.length,E=0;o[o.length-1]==="="&&(b--,o[o.length-2]==="="&&b--);var _=new ArrayBuffer(b),A=new Uint8Array(_);for(r=0;r<C;r+=4)a=ue.indexOf(o[r]),m=ue.indexOf(o[r+1]),f=ue.indexOf(o[r+2]),g=ue.indexOf(o[r+3]),A[E++]=a<<2|m>>4,A[E++]=(15&m)<<4|f>>2,A[E++]=(3&f)<<6|63&g;return _}function Ye(o){var r,a=new Uint8Array(o),m="";for(r=0;r<a.length;r+=3)m+=ue[a[r]>>2],m+=ue[(3&a[r])<<4|a[r+1]>>4],m+=ue[(15&a[r+1])<<2|a[r+2]>>6],m+=ue[63&a[r+2]];return a.length%3==2?m=m.substring(0,m.length-1)+"=":a.length%3==1&&(m=m.substring(0,m.length-2)+"=="),m}function Hn(o,r){var a="";if(o&&(a=Rt.call(o)),o&&(a==="[object ArrayBuffer]"||o.buffer&&Rt.call(o.buffer)==="[object ArrayBuffer]")){var m,f=ke;o instanceof ArrayBuffer?(m=o,f+=Xe):(m=o.buffer,a==="[object Int8Array]"?f+=zt:a==="[object Uint8Array]"?f+=_t:a==="[object Uint8ClampedArray]"?f+=kt:a==="[object Int16Array]"?f+=At:a==="[object Uint16Array]"?f+=It:a==="[object Int32Array]"?f+=Bt:a==="[object Uint32Array]"?f+=Mt:a==="[object Float32Array]"?f+=Lt:a==="[object Float64Array]"?f+=Dt:r(new Error("Failed to get type for BinaryArray"))),r(f+Ye(m))}else if(a==="[object Blob]"){var g=new FileReader;g.onload=function(){var b=Wn+o.type+"~"+Ye(this.result);r(ke+Ge+b)},g.readAsArrayBuffer(o)}else try{r(JSON.stringify(o))}catch(b){console.error("Couldn't convert value into a JSON string: ",o),r(null,b)}}function $n(o){if(o.substring(0,qe)!==ke)return JSON.parse(o);var r,a=o.substring(Pt),m=o.substring(qe,Pt);if(m===Ge&&Et.test(a)){var f=a.match(Et);r=f[1],a=a.substring(f[0].length)}var g=Ft(a);switch(m){case Xe:return g;case Ge:return S([g],{type:r});case zt:return new Int8Array(g);case _t:return new Uint8Array(g);case kt:return new Uint8ClampedArray(g);case At:return new Int16Array(g);case It:return new Uint16Array(g);case Bt:return new Int32Array(g);case Mt:return new Uint32Array(g);case Lt:return new Float32Array(g);case Dt:return new Float64Array(g);default:throw new Error("Unkown type: "+m)}}var Ke={serialize:Hn,deserialize:$n,stringToBuffer:Ft,bufferToString:Ye};function Tt(o,r,a,m){o.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,m)}function qn(o){var r=this,a={db:null};if(o)for(var m in o)a[m]=typeof o[m]!="string"?o[m].toString():o[m];var f=new x(function(g,b){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(C){return b(C)}a.db.transaction(function(C){Tt(C,a,function(){r._dbInfo=a,g()},function(E,_){b(_)})},b)});return a.serializer=Ke,f}function ce(o,r,a,m,f,g){o.executeSql(a,m,f,function(b,C){C.code===C.SYNTAX_ERR?b.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(E,_){_.rows.length?g(E,C):Tt(E,r,function(){E.executeSql(a,m,f,g)},g)},g):g(b,C)},g)}function Xn(o,r){var a=this;o=F(o);var m=new x(function(f,g){a.ready().then(function(){var b=a._dbInfo;b.db.transaction(function(C){ce(C,b,"SELECT * FROM "+b.storeName+" WHERE key = ? LIMIT 1",[o],function(E,_){var A=_.rows.length?_.rows.item(0).value:null;A&&(A=b.serializer.deserialize(A)),f(A)},function(E,_){g(_)})})}).catch(g)});return k(m,r),m}function Gn(o,r){var a=this,m=new x(function(f,g){a.ready().then(function(){var b=a._dbInfo;b.db.transaction(function(C){ce(C,b,"SELECT * FROM "+b.storeName,[],function(E,_){for(var A=_.rows,P=A.length,T=0;T<P;T++){var N=A.item(T),W=N.value;if(W&&(W=b.serializer.deserialize(W)),(W=o(W,N.key,T+1))!==void 0)return void f(W)}f()},function(E,_){g(_)})})}).catch(g)});return k(m,r),m}function jt(o,r,a,m){var f=this;o=F(o);var g=new x(function(b,C){f.ready().then(function(){r===void 0&&(r=null);var E=r,_=f._dbInfo;_.serializer.serialize(r,function(A,P){P?C(P):_.db.transaction(function(T){ce(T,_,"INSERT OR REPLACE INTO "+_.storeName+" (key, value) VALUES (?, ?)",[o,A],function(){b(E)},function(N,W){C(W)})},function(T){if(T.code===T.QUOTA_ERR){if(m>0)return void b(jt.apply(f,[o,E,a,m-1]));C(T)}})})}).catch(C)});return k(g,a),g}function Yn(o,r,a){return jt.apply(this,[o,r,a,1])}function Kn(o,r){var a=this;o=F(o);var m=new x(function(f,g){a.ready().then(function(){var b=a._dbInfo;b.db.transaction(function(C){ce(C,b,"DELETE FROM "+b.storeName+" WHERE key = ?",[o],function(){f()},function(E,_){g(_)})})}).catch(g)});return k(m,r),m}function Vn(o){var r=this,a=new x(function(m,f){r.ready().then(function(){var g=r._dbInfo;g.db.transaction(function(b){ce(b,g,"DELETE FROM "+g.storeName,[],function(){m()},function(C,E){f(E)})})}).catch(f)});return k(a,o),a}function Jn(o){var r=this,a=new x(function(m,f){r.ready().then(function(){var g=r._dbInfo;g.db.transaction(function(b){ce(b,g,"SELECT COUNT(key) as c FROM "+g.storeName,[],function(C,E){var _=E.rows.item(0).c;m(_)},function(C,E){f(E)})})}).catch(f)});return k(a,o),a}function Qn(o,r){var a=this,m=new x(function(f,g){a.ready().then(function(){var b=a._dbInfo;b.db.transaction(function(C){ce(C,b,"SELECT key FROM "+b.storeName+" WHERE id = ? LIMIT 1",[o+1],function(E,_){var A=_.rows.length?_.rows.item(0).key:null;f(A)},function(E,_){g(_)})})}).catch(g)});return k(m,r),m}function Zn(o){var r=this,a=new x(function(m,f){r.ready().then(function(){var g=r._dbInfo;g.db.transaction(function(b){ce(b,g,"SELECT key FROM "+g.storeName,[],function(C,E){for(var _=[],A=0;A<E.rows.length;A++)_.push(E.rows.item(A).key);m(_)},function(C,E){f(E)})})}).catch(f)});return k(a,o),a}function ei(o){return new x(function(r,a){o.transaction(function(m){m.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(f,g){for(var b=[],C=0;C<g.rows.length;C++)b.push(g.rows.item(C).name);r({db:o,storeNames:b})},function(f,g){a(g)})},function(m){a(m)})})}function ti(o,r){r=R.apply(this,arguments);var a=this.config();(o=typeof o!="function"&&o||{}).name||(o.name=o.name||a.name,o.storeName=o.storeName||a.storeName);var m,f=this;return k(m=o.name?new x(function(g){var b;b=o.name===a.name?f._dbInfo.db:openDatabase(o.name,"","",0),o.storeName?g({db:b,storeNames:[o.storeName]}):g(ei(b))}).then(function(g){return new x(function(b,C){g.db.transaction(function(E){function _(N){return new x(function(W,oe){E.executeSql("DROP TABLE IF EXISTS "+N,[],function(){W()},function(Wt,Ce){oe(Ce)})})}for(var A=[],P=0,T=g.storeNames.length;P<T;P++)A.push(_(g.storeNames[P]));x.all(A).then(function(){b()}).catch(function(N){C(N)})},function(E){C(E)})})}):x.reject("Invalid arguments"),r),m}var ni={_driver:"webSQLStorage",_initStorage:qn,_support:Nn(),iterate:Gn,getItem:Xn,setItem:Yn,removeItem:Kn,clear:Vn,length:Jn,key:Qn,keys:Zn,dropInstance:ti};function ii(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ot(o,r){var a=o.name+"/";return o.storeName!==r.storeName&&(a+=o.storeName+"/"),a}function oi(){var o="_localforage_support_test";try{return localStorage.setItem(o,!0),localStorage.removeItem(o),!1}catch{return!0}}function ri(){return!oi()||localStorage.length>0}function si(o){var r=this,a={};if(o)for(var m in o)a[m]=o[m];return a.keyPrefix=Ot(o,r._defaultConfig),ri()?(r._dbInfo=a,a.serializer=Ke,x.resolve()):x.reject()}function ai(o){var r=this,a=r.ready().then(function(){for(var m=r._dbInfo.keyPrefix,f=localStorage.length-1;f>=0;f--){var g=localStorage.key(f);g.indexOf(m)===0&&localStorage.removeItem(g)}});return k(a,o),a}function ui(o,r){var a=this;o=F(o);var m=a.ready().then(function(){var f=a._dbInfo,g=localStorage.getItem(f.keyPrefix+o);return g&&(g=f.serializer.deserialize(g)),g});return k(m,r),m}function ci(o,r){var a=this,m=a.ready().then(function(){for(var f=a._dbInfo,g=f.keyPrefix,b=g.length,C=localStorage.length,E=1,_=0;_<C;_++){var A=localStorage.key(_);if(A.indexOf(g)===0){var P=localStorage.getItem(A);if(P&&(P=f.serializer.deserialize(P)),(P=o(P,A.substring(b),E++))!==void 0)return P}}});return k(m,r),m}function li(o,r){var a=this,m=a.ready().then(function(){var f,g=a._dbInfo;try{f=localStorage.key(o)}catch{f=null}return f&&(f=f.substring(g.keyPrefix.length)),f});return k(m,r),m}function hi(o){var r=this,a=r.ready().then(function(){for(var m=r._dbInfo,f=localStorage.length,g=[],b=0;b<f;b++){var C=localStorage.key(b);C.indexOf(m.keyPrefix)===0&&g.push(C.substring(m.keyPrefix.length))}return g});return k(a,o),a}function di(o){var r=this.keys().then(function(a){return a.length});return k(r,o),r}function fi(o,r){var a=this;o=F(o);var m=a.ready().then(function(){var f=a._dbInfo;localStorage.removeItem(f.keyPrefix+o)});return k(m,r),m}function pi(o,r,a){var m=this;o=F(o);var f=m.ready().then(function(){r===void 0&&(r=null);var g=r;return new x(function(b,C){var E=m._dbInfo;E.serializer.serialize(r,function(_,A){if(A)C(A);else try{localStorage.setItem(E.keyPrefix+o,_),b(g)}catch(P){P.name!=="QuotaExceededError"&&P.name!=="NS_ERROR_DOM_QUOTA_REACHED"||C(P),C(P)}})})});return k(f,a),f}function mi(o,r){if(r=R.apply(this,arguments),!(o=typeof o!="function"&&o||{}).name){var a=this.config();o.name=o.name||a.name,o.storeName=o.storeName||a.storeName}var m,f=this;return k(m=o.name?new x(function(g){o.storeName?g(Ot(o,f._defaultConfig)):g(o.name+"/")}).then(function(g){for(var b=localStorage.length-1;b>=0;b--){var C=localStorage.key(b);C.indexOf(g)===0&&localStorage.removeItem(C)}}):x.reject("Invalid arguments"),r),m}var gi={_driver:"localStorageWrapper",_initStorage:si,_support:ii(),iterate:ci,getItem:ui,setItem:pi,removeItem:fi,clear:ai,length:di,key:li,keys:hi,dropInstance:mi},vi=function(o,r){return o===r||typeof o=="number"&&typeof r=="number"&&isNaN(o)&&isNaN(r)},yi=function(o,r){for(var a=o.length,m=0;m<a;){if(vi(o[m],r))return!0;m++}return!1},Ut=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},xe={},Nt={},ge={INDEXEDDB:Un,WEBSQL:ni,LOCALSTORAGE:gi},wi=[ge.INDEXEDDB._driver,ge.WEBSQL._driver,ge.LOCALSTORAGE._driver],Ae=["dropInstance"],Ve=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ae),bi={description:"",driver:wi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Si(o,r){o[r]=function(){var a=arguments;return o.ready().then(function(){return o[r].apply(o,a)})}}function Je(){for(var o=1;o<arguments.length;o++){var r=arguments[o];if(r)for(var a in r)r.hasOwnProperty(a)&&(Ut(r[a])?arguments[0][a]=r[a].slice():arguments[0][a]=r[a])}return arguments[0]}var xi=new(function(){function o(r){for(var a in s(this,o),ge)if(ge.hasOwnProperty(a)){var m=ge[a],f=m._driver;this[a]=f,xe[f]||this.defineDriver(m)}this._defaultConfig=Je({},bi),this._config=Je({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(r){if((r===void 0?"undefined":i(r))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in r){if(a==="storeName"&&(r[a]=r[a].replace(/\W/g,"_")),a==="version"&&typeof r[a]!="number")return new Error("Database version must be a number.");this._config[a]=r[a]}return!("driver"in r)||!r.driver||this.setDriver(this._config.driver)}return typeof r=="string"?this._config[r]:this._config},o.prototype.defineDriver=function(r,a,m){var f=new x(function(g,b){try{var C=r._driver,E=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!r._driver)return void b(E);for(var _=Ve.concat("_initStorage"),A=0,P=_.length;A<P;A++){var T=_[A];if((!yi(Ae,T)||r[T])&&typeof r[T]!="function")return void b(E)}(function(){for(var W=function(Ci){return function(){var Ei=new Error("Method "+Ci+" is not implemented by the current driver"),Ht=x.reject(Ei);return k(Ht,arguments[arguments.length-1]),Ht}},oe=0,Wt=Ae.length;oe<Wt;oe++){var Ce=Ae[oe];r[Ce]||(r[Ce]=W(Ce))}})();var N=function(W){xe[C]&&console.info("Redefining LocalForage driver: "+C),xe[C]=r,Nt[C]=W,g()};"_support"in r?r._support&&typeof r._support=="function"?r._support().then(N,b):N(!!r._support):N(!0)}catch(W){b(W)}});return z(f,a,m),f},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(r,a,m){var f=xe[r]?x.resolve(xe[r]):x.reject(new Error("Driver not found."));return z(f,a,m),f},o.prototype.getSerializer=function(r){var a=x.resolve(Ke);return z(a,r),a},o.prototype.ready=function(r){var a=this,m=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return z(m,r,r),m},o.prototype.setDriver=function(r,a,m){var f=this;Ut(r)||(r=[r]);var g=this._getSupportedDrivers(r);function b(){f._config.driver=f.driver()}function C(A){return f._extend(A),b(),f._ready=f._initStorage(f._config),f._ready}function E(A){return function(){var P=0;function T(){for(;P<A.length;){var N=A[P];return P++,f._dbInfo=null,f._ready=null,f.getDriver(N).then(C).catch(T)}b();var W=new Error("No available storage method found.");return f._driverSet=x.reject(W),f._driverSet}return T()}}var _=this._driverSet!==null?this._driverSet.catch(function(){return x.resolve()}):x.resolve();return this._driverSet=_.then(function(){var A=g[0];return f._dbInfo=null,f._ready=null,f.getDriver(A).then(function(P){f._driver=P._driver,b(),f._wrapLibraryMethodsWithReady(),f._initDriver=E(g)})}).catch(function(){b();var A=new Error("No available storage method found.");return f._driverSet=x.reject(A),f._driverSet}),z(this._driverSet,a,m),this._driverSet},o.prototype.supports=function(r){return!!Nt[r]},o.prototype._extend=function(r){Je(this,r)},o.prototype._getSupportedDrivers=function(r){for(var a=[],m=0,f=r.length;m<f;m++){var g=r[m];this.supports(g)&&a.push(g)}return a},o.prototype._wrapLibraryMethodsWithReady=function(){for(var r=0,a=Ve.length;r<a;r++)Si(this,Ve[r])},o.prototype.createInstance=function(r){return new o(r)},o}());t.exports=xi},{3:3}]},{},[4])(4);/*! streamsaver. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */(function(e){(()=>{const t=typeof window=="object"?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let n=null,i=!1;const s=t.WebStreamsPolyfill||{},l=t.isSecureContext;let y=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const w=l||"MozAppearance"in document.documentElement.style?"iframe":"navigate",S={createWriteStream:function(k,z,F){let R={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},L=0,v=null,u=null,h=null;if(Number.isFinite(z)?([F,z]=[z,F],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),R.size=F,R.writableStrategy=z):z&&z.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),R.size=F,R.writableStrategy=z):R=z||{},!y){n||(n=l?x(S.mitm):function(D){const B="width=200,height=100",I=document.createDocumentFragment(),j={frame:t.open(D,"popup",B),loaded:!1,isIframe:!1,isPopup:!0,remove(){j.frame.close()},addEventListener(...O){I.addEventListener(...O)},dispatchEvent(...O){I.dispatchEvent(...O)},removeEventListener(...O){I.removeEventListener(...O)},postMessage(...O){j.frame.postMessage(...O)}},U=O=>{O.source===j.frame&&(j.loaded=!0,t.removeEventListener("message",U),j.dispatchEvent(new Event("load")))};return t.addEventListener("message",U),j}(S.mitm)),u=new MessageChannel,k=encodeURIComponent(k.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const c={transferringReadable:i,pathname:R.pathname||Math.random().toString().slice(-6)+"/"+k,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+k}};R.size&&(c.headers["Content-Length"]=R.size);const p=[c,"*",[u.port2]];if(i){const D=w==="iframe"?void 0:{transform(I,j){if(!(I instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");L+=I.length,j.enqueue(I),v&&(location.href=v,v=null)},flush(){v&&(location.href=v)}};h=new S.TransformStream(D,R.writableStrategy,R.readableStrategy);const B=h.readable;u.port1.postMessage({readableStream:B},[B])}u.port1.onmessage=D=>{D.data.download?w==="navigate"?(n.remove(),n=null,L?location.href=D.data.download:v=D.data.download):(n.isPopup&&(n.remove(),n=null,w==="iframe"&&x(S.mitm)),x(D.data.download)):D.data.abort&&(d=[],u.port1.postMessage("abort"),u.port1.onmessage=null,u.port1.close(),u.port2.close(),u=null)},n.loaded?n.postMessage(...p):n.addEventListener("load",()=>{n.postMessage(...p)},{once:!0})}let d=[];return!y&&h&&h.writable||new S.WritableStream({write(c){if(!(c instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");y?d.push(c):(u.port1.postMessage(c),L+=c.length,v&&(location.href=v,v=null))},close(){if(y){const c=new Blob(d,{type:"application/octet-stream; charset=utf-8"}),p=document.createElement("a");p.href=URL.createObjectURL(c),p.download=k,p.click()}else u.port1.postMessage("end")},abort(){d=[],u.port1.postMessage("abort"),u.port1.onmessage=null,u.port1.close(),u.port2.close(),u=null}},R.writableStrategy)},WritableStream:t.WritableStream||s.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function x(k){if(!k)throw new Error("meh");const z=document.createElement("iframe");return z.hidden=!0,z.src=k,z.loaded=!1,z.name="iframe",z.isIframe=!0,z.postMessage=(...F)=>z.contentWindow.postMessage(...F),z.addEventListener("load",()=>{z.loaded=!0},{once:!0}),document.body.appendChild(z),z}try{new Response(new ReadableStream),l&&!("serviceWorker"in navigator)&&(y=!0)}catch{y=!0}return(k=>{try{k()}catch{}})(()=>{const{readable:k}=new TransformStream,z=new MessageChannel;z.port1.postMessage(k,[k]),z.port1.close(),z.port2.close(),i=!0,Object.defineProperty(S,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})}),S})()})();const Ji=Object.prototype.toString;function yt(e,t){return Ji.call(e)===`[object ${t}]`}function Qi(e){return yt(e,"Function")}const xn=e=>e!==null&&yt(e,"Object");function Zi(e){return yt(e,"String")}function eo(e={},t={}){let n;for(n in t)e[n]=xn(e[n])?eo(e[n],t[n]):e[n]=t[n];return e}function to(e,t){const n=`${e}_${t}`;return re.MD5(n)}function no(e){const t=function(w){if(!w)return;const S=w,x=[];if(S)for(let k of S){const z=Cn(k);z&&x.push(z)}return x}(e.bussinessRoutes),n=function(w){if(!w)return;const S=w;if(S&&S.length>0){const x=[];return S.forEach(k=>{const z=En(k);z&&x.push(z)}),x}}(e.widgetMenuConfig),i=function(w){if(w&&w.length>0){const S=[];return w.forEach(x=>{const k=function(z){return z?{id:z.id,label:z.label,container:z.container,preload:z.preload,afterid:z.afterid,bindid:z.bindid,group:z.group}:void 0}(x);k&&S.push(k)}),S}}(e.widgetConfig),s=function(w){if(w&&w.length>0)return w}(e.functionList),l=e.pkgObject.version,y=e.pkgObject.name;return{id:to(y,l),name:M.Config.UI.SiteTitle,group:M.Config.UI.Group,product:y,version:l,routes:t,widgetMenu:n,widgets:i,functions:s}}function Cn(e){if(e){let t=0;e.meta?.hidden&&(t=1);let n={path:e.path,name:e.name,title:e.meta?.title,type:t,index:e.meta?.index};if(e.children){const i=[];for(let s of e.children){const l=Cn(s);l&&i.push(l)}i.length>0&&(n.children=i)}return n}}function En(e){if(!e)return;const t={name:e.name,index:e.index,path:e.path,type:e.type};return e.children&&e.children.length>0&&(t.children=[],e.children.forEach(n=>{const i=En(n);i&&t.children?.push(i)})),t}function No(e,t="IconifyList.ts"){let n="",i=`const iconlist={
`,s=0;e.forEach(l=>{const y=l.split(":");if(y&&y.length===2){const w="icon"+s;n+=`import ${w} from '~icons/${y[0]}/${y[1]}'
`,i+=`	'${l}':${w},
`,s++}}),s>0&&(i+=`};
`,fn(n+i+"export default iconlist;","IconifyList.ts"))}function Wo(e,t){const n=no(e);Oi(n,t),M.Message?.msg("\u5BFC\u51FA\u7CFB\u7EDF\u529F\u80FD\u6743\u9650\u6587\u4EF6\u6210\u529F\uFF01")}const Z=an({panelGroups:{}}),zn=()=>({useGroupAccordion:e=>de(()=>Z.panelGroups[e].accordion),setGroupAccordionStatus:(e,t)=>{Z.panelGroups[e]={...Z.panelGroups[e],accordion:t}},panelExpanded:(e,t)=>de(()=>Z.panelGroups[e]?.panelExpandStatus?.[t]||!1),setPanelExpandedStatus:(e,t,n)=>{Z.panelGroups[e]={...Z.panelGroups[e],panelExpandStatus:{...Z.panelGroups[e]?.panelExpandStatus||{},[t]:n}}},togglePanelExpandedStatus:(e,t)=>{Z.panelGroups[e].accordion&&(Z.panelGroups[e].panelExpandStatus[t]||Object.keys(Z.panelGroups[e].panelExpandStatus).forEach(n=>{Z.panelGroups[e].panelExpandStatus[n]=!1})),Z.panelGroups[e].panelExpandStatus[t]=!Z.panelGroups[e].panelExpandStatus[t]}}),it=e=>e>255?255:e<0?0:e,Ie=(e,t)=>{const n=e.replace("#",""),i=parseInt(n,16),s=it((i>>16)+t),l=it((i>>8&255)+t);return"#"+(it((255&i)+t)|l<<8|s<<16).toString(16)};var ot=ze({name:"VueCollapsiblePanelGroup",props:{accordion:{type:Boolean,default:!1},baseColor:{type:String,default:"#333333"}},setup(e){const t=ee(`group-${lt()}`),{setGroupAccordionStatus:n}=zn(),i={"--base-color":e.baseColor,"--border-color":Ie(e.baseColor,180),"--bg-color-header":Ie(e.baseColor,140),"--bg-color-header-hover":Ie(e.baseColor,190),"--bg-color-header-active":Ie(e.baseColor,200),"--bg-color-body":"#fff"};return n(t.value,e.accordion),{idGroup:t,cssColorVars:i}}});const io=["data-id-group"];ot.render=function(e,t,n,i,s,l){return $(),Q("div",{"data-id-group":e.idGroup,style:me(e.cssColorVars),class:"vcpg"},[he(e.$slots,"default")],12,io)},ot.__scopeId="data-v-23ab5317",ot.__file="src/controls/collapsepanel/VCollapsiblePanelGroup.vue";var rt=ze({name:"VueCollapsiblePanel",props:{expanded:{type:Boolean,default:!0}},setup(e,t){const n=`panel-${lt()}`,i=ee(),s=ee(),l=ee(),{panelExpanded:y,togglePanelExpandedStatus:w,setPanelExpandedStatus:S}=zn(),x=de(()=>({hasContent:t.slots.content&&t.slots.content()[0].children.length>0,dataKey:lt()})),k=de(()=>i.value?.parentElement?.getAttribute("data-id-group")||""),z=de(()=>y(k.value,n).value&&x.value.hasContent);return mt(()=>{S(k.value,n,e.expanded)}),zi(()=>{(async()=>(await gt(),s.value&&l.value&&(s.value.style.height=`${Math.min(l.value.scrollHeight,s.value.scrollHeight)}px`)))()}),{body:x,panelRef:i,bodyRef:s,bodyContentRef:l,isExpanded:z,collapse:F=>{F.style.height="0"},expand:F=>{F.style.height=`${F.scrollHeight}px`},toggle:()=>{!x.value.hasContent||w(k.value,n)},toggleIcon:`
    <svg
        width="24px"
        height="24px"
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M6.34292 7.75734L4.92871 9.17155L11.9998 16.2426L19.0708 9.17158L17.6566 7.75737L11.9998 13.4142L6.34292 7.75734Z"/>
    </svg>
`}}});const oo={class:"vcp__header-title"},ro={key:0,class:"vcp__header-icon"},so=["innerHTML"],ao={key:0,ref:"bodyRef",class:"vcp__body"},uo={ref:"bodyContentRef",class:"vcp__body-content"};function st(e){return window.TouchEvent&&e instanceof TouchEvent}rt.render=function(e,t,n,i,s,l){return $(),Q("section",{ref:"panelRef",class:_i(["vcp",{"vcp--expanded":e.isExpanded,"vcp--expandable":e.body.hasContent}])},[G("header",{class:"vcp__header",onClick:t[0]||(t[0]=(...y)=>e.toggle&&e.toggle(...y))},[G("div",oo,[he(e.$slots,"title")]),e.body.hasContent?($(),Q("div",ro,[he(e.$slots,"icon",{},()=>[G("span",{innerHTML:e.toggleIcon},null,8,so)])])):we("v-if",!0)]),un(cn,{"data-key":e.body.dataKey,name:"slide",onBeforeEnter:e.collapse,onEnter:e.expand,onBeforeLeave:e.expand,onLeave:e.collapse},{default:Oe(()=>[e.isExpanded?($(),Q("div",ao,[G("div",uo,[he(e.$slots,"content")],512)],512)):we("v-if",!0)]),_:3},8,["data-key","onBeforeEnter","onEnter","onBeforeLeave","onLeave"])],2)},rt.__scopeId="data-v-08c94cf8",rt.__file="src/controls/collapsepanel/VCollapsiblePanel.vue";class K{e;constructor(t){this.e=t}stopPropagation(){this.e.stopPropagation()}preventDefault(){this.e.preventDefault()}get clientX(){return st(this.e)?(this.e.type==="touchend"?this.e.changedTouches:this.e.touches).item(0).clientX:this.e.clientX}get clientY(){return st(this.e)?(this.e.type==="touchend"?this.e.changedTouches:this.e.touches).item(0).clientY:this.e.clientY}get clientCoord(){return new wt(this.clientX,this.clientY)}static bindDown(t,n,i,s=!1){const l=w=>{n(new K(w))},y=w=>{w.touches.length===1&&n(new K(w)),w.touches.length>1&&i&&i(new K(w))};return t.addEventListener("mousedown",l,s),t.addEventListener("touchstart",y,s),()=>{t.removeEventListener("mousedown",l,s),t.removeEventListener("touchstart",y,s)}}static bindMove(t,n,i=!1){const s=y=>{n(new K(y))},l=y=>{y.touches.length===1&&n(new K(y))};return t.addEventListener("mousemove",s,i),t.addEventListener("touchmove",l,i),()=>{t.removeEventListener("mousemove",s,i),t.removeEventListener("touchmove",l,i)}}static bindUp(t,n,i=!1){const s=y=>{n(new K(y))},l=y=>{y.touches.length===0&&n(new K(y))};return t.addEventListener("mouseup",s,i),t.addEventListener("touchend",l,i),()=>{t.removeEventListener("mouseup",s,i),t.removeEventListener("touchend",l,i)}}originalEvent({mouse:t,touch:n}){st(this.e)?n&&n(this.e):t&&t(this.e)}}class wt{x;y;constructor(t,n){this.x=t,this.y=n}clone(){return new wt(this.x,this.y)}}class co{handle;container;options;unbindDown;unbindMove;unbindUp;constructor(t,n,i={}){this.handle=t,this.container=n,this.options=i,t&&(this.unbindDown=K.bindDown(t,this.mousedown),t.classList.add("draggable-handle"))}teardown(){this.handle?.classList.remove("draggable-handle"),this.unbindDown&&this.unbindDown(),this.unbindUp&&this.unbindUp(),this.unbindMove&&this.unbindMove()}offsetX;offsetY;mousedown=t=>{if(t.preventDefault(),this.handle){const{left:n,top:i}=this.handle.getBoundingClientRect();this.offsetX=t.clientX-n,this.offsetY=t.clientY-i}this.options.onMoveStart&&this.options.onMoveStart(),this.unbindMove=K.bindMove(document,this.mousemove),this.unbindUp=K.bindUp(document,this.mouseup)};mousemove=t=>{this.container&&(this.container.style.left=t.clientX-this.offsetX+"px",this.container.style.top=t.clientY-this.offsetY+"px"),this.options.onMove&&this.options.onMove()};mouseup=t=>{this.options.onMoveEnd&&this.options.onMoveEnd(),this.unbindUp(),this.unbindMove(),this.unbindUp=this.unbindMove=void 0}}class lo{_group;onChange;zIndex;constructor(t,n){this._group=t,this.onChange=n,this.a(i=>i.push(this))}set group(t){this._group=t;const n=Fe(this._group),i=Fe(t);n.splice(n.indexOf(this),1),i.push(this),Zt()}get group(){return this._group}unregister(){this.a(t=>t.splice(t.indexOf(this),1))}raise(){this.a(t=>{t.splice(t.indexOf(this),1),t.push(this)})}a(t){t(Fe(this._group)),Zt()}}const Re=new Map;function Fe(e){return Re.has(e)||Re.set(e,[]),Re.get(e)}function _n(e,t){return e>t?-_n(t,e):e<0&&t>=0?1:e-t}function Zt(){let e=0;for(const t of function(n){const i=[];return n.forEach((s,l)=>i.push(l)),i}(Re).sort(_n))for(const n of Fe(t))e!=n.zIndex&&(n.zIndex=e,n.onChange(e)),e++}function ft(e){if(e){const{width:t,height:n}=e.style;e.style.width="auto",e.style.height="auto";const i=Te(e);return e.style.width=t,e.style.height=n,i}return{width:0,height:0,top:0,left:0,bottom:0,right:0}}function Te(e){const t=e.getBoundingClientRect(),n=t.width,i=t.height,s=t.top,l=t.left;return{width:n,height:i,top:s,left:l,bottom:s+i,right:l+n}}class ho{container;options;handles;constructor(t,n){if(this.container=t,this.options=n,t&&n){this.handles=kn.map(S=>new S(t,this));const{width:i,height:s}=ft(t),l=n.maxWidth||window.innerWidth,y=n.maxHeight||window.innerHeight;let w=!1;(i<n.minWidth||i>l)&&(t.style.width=`${en(i,n.minWidth,l)}px`,w=!0),(s<n.minHeight||s>y)&&(t.style.height=`${en(s,n.minHeight,y)}px`,w=!0),w&&n.onResize&&n.onResize()}}teardown(){this.handles?.forEach(t=>t.teardown())}}const kn=[];class le{container;helper;handle;handleSize=8;unbindDown;unbindMove;unbindUp;constructor(t,n){this.container=t,this.helper=n,this.handle=this.createHandleElement(),this.unbindDown=K.bindDown(this.handle,this.mousedown)}teardown(){this.unbindDown(),this.unbindUp&&this.unbindUp(),this.unbindMove&&this.unbindMove(),this.handle.parentElement.removeChild(this.handle)}x0;y0;left0;top0;width0;height0;mousedown=t=>{t.preventDefault(),t.stopPropagation();const{left:n,top:i,width:s,height:l}=Te(this.container);this.x0=t.clientX,this.y0=t.clientY,this.left0=n,this.top0=i,this.width0=s,this.height0=l,this.calcSafeBoundaries(),this.helper.options&&this.helper.options.onResizeStart&&this.helper.options.onResizeStart(),this.unbindMove=K.bindMove(document,this.mousemove),this.unbindUp=K.bindUp(document,this.mouseup)};minLeft;maxLeft;minRight;maxRight;minTop;maxTop;minBottom;maxBottom;calcSafeBoundaries(){if(!this.helper.options)return;const{left:t,top:n,right:i,bottom:s}=Te(this.container),l=this.helper.options,y=l.maxWidth||window.innerWidth,w=l.maxHeight||window.innerHeight;this.minLeft=Math.max(i-y,0),this.maxLeft=i-l.minWidth,this.minRight=t+l.minWidth,this.maxRight=Math.min(t+y,window.innerWidth),this.minTop=Math.max(s-w,0),this.maxTop=s-l.minHeight,this.minBottom=n+l.minHeight,this.maxBottom=Math.min(n+w,window.innerHeight)}mousemove=t=>{t.preventDefault(),t.stopPropagation(),this.setPosition(t),this.fixPosition(),this.helper.options&&this.helper.options.onResize&&this.helper.options.onResize()};fixPosition(){const{width:t,height:n,left:i,top:s,right:l,bottom:y}=Te(this.container),w=this.helper.options;!w||(i<this.minLeft?(this.container.style.width=t+i-this.minLeft+"px",this.container.style.left=`${this.minLeft}px`):i>this.maxLeft?(this.container.style.width=`${w.minWidth}px`,this.container.style.left=`${this.maxLeft}px`):l<this.minRight?this.container.style.width=`${w.minWidth}px`:l>this.maxRight&&(this.container.style.width=this.maxRight-i+"px"),s<this.minTop?(this.container.style.height=n+s-this.minTop+"px",this.container.style.top=`${this.minTop}px`):s>this.maxTop?(this.container.style.height=`${w.minHeight}px`,this.container.style.top=`${this.maxTop}px`):y<this.minBottom?this.container.style.height=`${w.minHeight}px`:y>this.maxBottom&&(this.container.style.height=this.maxBottom-s+"px"))}mouseup=t=>{t.preventDefault(),t.stopPropagation(),this.helper.options&&this.helper.options.onResizeEnd&&this.helper.options.onResizeEnd(),this.unbindUp(),this.unbindMove(),this.unbindUp=this.unbindMove=void 0};createHandleElement(){const t=document.createElement("div"),n=t.style;return n.position="absolute",this.applyStyle(n),this.container.appendChild(t),t}}function en(e,t,n){return e<t?t:e>n?n:e}kn.push(class extends le{setPosition(e){this.container.style.width=this.width0+e.clientX-this.x0+"px",this.container.style.height=this.height0+e.clientY-this.y0+"px"}applyStyle(e){e.width=2*this.handleSize+"px",e.height=2*this.handleSize+"px",e.right=-this.handleSize+"px",e.bottom=-this.handleSize+"px",e.cursor="nwse-resize"}},class extends le{setPosition(e){this.container.style.height=this.height0+e.clientY-this.y0+"px"}applyStyle(e){e.right=`${this.handleSize}px`,e.left=`${this.handleSize}px`,e.height=2*this.handleSize+"px",e.bottom=-this.handleSize+"px",e.cursor="ns-resize"}},class extends le{setPosition(e){this.container.style.left=this.left0+e.clientX-this.x0+"px",this.container.style.width=this.width0-(e.clientX-this.x0)+"px",this.container.style.height=this.height0+e.clientY-this.y0+"px"}applyStyle(e){e.left=-this.handleSize+"px",e.bottom=-this.handleSize+"px",e.width=2*this.handleSize+"px",e.height=2*this.handleSize+"px",e.cursor="nesw-resize"}},class extends le{setPosition(e){this.container.style.left=this.left0+e.clientX-this.x0+"px",this.container.style.width=this.width0-(e.clientX-this.x0)+"px"}applyStyle(e){e.left=-this.handleSize+"px",e.bottom=`${this.handleSize}px`,e.width=2*this.handleSize+"px",e.top=`${this.handleSize}px`,e.cursor="ew-resize"}},class extends le{setPosition(e){this.container.style.left=this.left0+e.clientX-this.x0+"px",this.container.style.width=this.width0-(e.clientX-this.x0)+"px",this.container.style.top=this.top0+e.clientY-this.y0+"px",this.container.style.height=this.height0-(e.clientY-this.y0)+"px"}applyStyle(e){e.left=-this.handleSize+"px",e.top=-this.handleSize+"px",e.width=2*this.handleSize+"px",e.height=2*this.handleSize+"px",e.cursor="nwse-resize"}},class extends le{setPosition(e){this.container.style.top=this.top0+e.clientY-this.y0+"px",this.container.style.height=this.height0-(e.clientY-this.y0)+"px"}applyStyle(e){e.left=`${this.handleSize}px`,e.right=`${this.handleSize}px`,e.height=2*this.handleSize+"px",e.top=-this.handleSize+"px",e.cursor="ns-resize"}},class extends le{setPosition(e){this.container.style.top=this.top0+e.clientY-this.y0+"px",this.container.style.height=this.height0-(e.clientY-this.y0)+"px",this.container.style.width=this.width0+e.clientX-this.x0+"px"}applyStyle(e){e.right=-this.handleSize+"px",e.top=-this.handleSize+"px",e.height=2*this.handleSize+"px",e.width=2*this.handleSize+"px",e.cursor="nesw-resize"}},class extends le{setPosition(e){this.container.style.width=this.width0+e.clientX-this.x0+"px"}applyStyle(e){e.right=-this.handleSize+"px",e.top=`${this.handleSize}px`,e.bottom=`${this.handleSize}px`,e.width=2*this.handleSize+"px",e.cursor="ew-resize"}});var je=ze({name:"",props:{disabled:{type:Boolean,default:!1},windowStyle:{type:Object,required:!0}},components:{},setup(e){const t=ee(!1),n=ee(!1);return{hover:t,active:n,style:function(){let i=e.windowStyle.button;return t.value&&(i={...i,...this.windowStyle.buttonHover}),n.value&&(i={...i,...this.windowStyle.buttonActive}),i},mouseup:function(i){this.active&&this.$emit("click")},mousedown:function(i){i.preventDefault(),n.value=!0;const s=K.bindUp(document,()=>{n.value=!1,s()})}}}});const fo=["disabled"];je.render=function(e,t,n,i,s,l){return $(),Q("div",{class:"btn",style:me(e.style()),onMouseenter:t[0]||(t[0]=y=>e.hover=!0),onMouseleave:t[1]||(t[1]=y=>e.hover=!1),onMousedown:t[2]||(t[2]=$t((...y)=>e.mousedown&&e.mousedown(...y),["stop"])),onTouchstart:t[3]||(t[3]=$t((...y)=>e.mousedown&&e.mousedown(...y),["stop"])),onMouseup:t[4]||(t[4]=(...y)=>e.mouseup&&e.mouseup(...y)),onTouchend:t[5]||(t[5]=(...y)=>e.mouseup&&e.mouseup(...y)),disabled:e.disabled},[he(e.$slots,"default")],44,fo)},je.__scopeId="data-v-71662210",je.__file="src/controls/vuewindow/window/Button.vue";const pt=new Set;function tn(e){return e!==null?parseFloat(e):0}function Me(e){const t=window.getComputedStyle(e);return{width:Math.ceil([t.paddingLeft,t.width,t.paddingRight].map(tn).reduce((n,i)=>n+i)),height:Math.ceil([t.paddingTop,t.height,t.paddingBottom].map(tn).reduce((n,i)=>n+i))}}class po{width;height;constructor(t,n){this.width=t,this.height=n}}function mo(e){const t=e.windowEl;if(t){const n=parseFloat(t.style.left||"NaN"),i=parseFloat(t.style.top||"NaN");if(!isNaN(n)&&!isNaN(i))return{left:n,top:i}}return null}function go(e,t,n,i){const s=e-n,l=t-i;return s*s+l*l}window.addEventListener("resize",e=>{pt.forEach(t=>{t&&Qi(t.fixPosition)&&t.fixPosition()})});const Le=[];var nn=ze({name:"Window",props:{windowStyle:{type:Object,required:!0},isOpen:{type:Boolean,required:!1,default:!0},title:{type:String,required:!0,default:""},closeButton:{type:Boolean,required:!1,default:!0},resizable:{type:Boolean,required:!1,default:!1},isScrollable:{type:Boolean,required:!1,default:!1},padding:{type:Number,required:!1,default:8},activateWhenOpen:{type:Boolean,required:!1,default:!0},positionHint:{type:String,required:!1,default:""},zGroup:{type:Number,required:!1,default:1},overflow:{type:String,required:!1,default:"visible"},minWidth:{type:Number,required:!1,default:1},minHeight:{type:Number,required:!1,default:0},maxWidth:{type:Number,required:!1,default:0},maxHeight:{type:Number,required:!1,default:0},height:{type:Number,required:!1},width:{type:Number,required:!1},top:{type:Number,required:!1},left:{type:Number,required:!1}},components:{myButton:je},setup(e,{emit:t}){const n=ki();if(!n)return;const{proxy:i}=n;let s=0,l,y,w;const S=ee(e.isOpen),x=()=>{Le.push(i),w=new lo(e.zGroup,k),e.isOpen&&function(B){B&&(gt(()=>{s++==0&&(d(i),function(){const I=z.value,{width:j,height:U}=ft(I);let O,H;if(e.left!==void 0!=(e.top!==void 0))throw new Error("Either of left or top is specified. Both must be set or not set.");if(typeof e.left=="number")O=e.left,H=e.top;else{const J=e.positionHint||"auto";switch(J){case"auto":{let X=20,Y=50,q=0;do{if(Le.every(ie=>{if(!ie.isOpen||i==ie)return!0;const _e=mo(ie);if(_e==null)return!0;const{left:$e,top:te}=_e;return go($e,te,X,Y)>16}))break;X=(X+40)%(window.innerWidth-200),Y=(Y+40)%(window.innerHeight-200)}while(++q<100);O=X,H=Y}break;case"center":O=(window.innerWidth-j)/2,H=(window.innerHeight-U)/2,console.log(O,H,window.innerWidth,window.innerHeight,"111111");break;default:try{const X=J.split("/").map(Number);if(X.length!=2)throw null;const[Y,q]=X;if(!isFinite(Y)||!isFinite(q))throw null;O=Y>=0?Y:window.innerWidth-j+Y,H=q>=0?q:window.innerHeight-U+q}catch{throw new Error(`invalid position string: ${J}`)}}}I&&(I.style.left=`${O}px`,I.style.top=`${H}px`)}()),e.resizable&&c(),D(),l=new co(F.value,z.value,{onMove:()=>D(),onMoveStart:()=>t("move-start"),onMoveEnd:()=>t("move-end")}),e.resizable&&function(){const{height:I}=ft(F.value);y=new ho(z.value,{onResize:()=>c(),onResizeStart:()=>t("resize-start"),onResizeEnd:()=>t("resize-end"),minWidth:e.minWidth,minHeight:e.minHeight+I,maxWidth:e.maxWidth,maxHeight:e.maxHeight?e.maxHeight+I:void 0})}()}),e.activateWhenOpen&&L())}(!0),pt.add(i)};function k(B){v.value.zIndex=`${B}`}const z=ee(null),F=ee(null),R=ee(null);function L(){w.raise(),t("activate")}const v=ee({...e.windowStyle.window,zIndex:"auto",overflow:e.overflow}),u=de(()=>e.windowStyle.titlebar),h=de(()=>{const B={...e.windowStyle.content};return e.resizable?B.padding="0":e.padding!=null&&(B.padding=`${e.padding}px`),e.isScrollable&&(B.overflow="auto"),B});function d(B){const{width:I,height:j,top:U,left:O}=B,H=z;if(H&&I!=null&&(H.value.style.width=`${I}px`),j!=null){const J=F.value;if(J){const X=Me(J).height;H.value.style.height=`${j+X}px`}}H&&O!=null&&(H.value.style.left=`${O}px`),H&&U!=null&&(H.value.style.top=`${U}px`)}function c(B=!0){const I=z.value,j=F.value,U=R.value;if(U&&I&&j){const{width:O,height:H}=Me(U),{width:J,height:X}=Me(I),Y=Me(j).height,q=J-(U.offsetWidth-O),ie=X-Y-(U.offsetHeight-H);U.style.width=`${q}px`,U.style.height=`${ie}px`,p(),t("resize",new po(q,ie)),B&&(t("update:width",q),t("update:height",ie))}}function p(){const B=z.value;if(B){const I=B.getBoundingClientRect();I.left<0&&(v.value.left="0px"),I.top<0&&(v.value.top="0px"),I.right>window.innerWidth&&(v.value.left=window.innerWidth-I.width+"px"),I.bottom>window.innerHeight&&(v.value.top=window.innerHeight-I.height+"px")}}function D(B=!0){p();const I=z.value;if(I){const{left:j,top:U}=I.getBoundingClientRect();B&&(t("update:left",j),t("update:top",U))}}return Be(()=>e.isOpen,B=>{S.value=B}),Be(()=>e.zGroup,B=>{w.group=B}),Be(()=>e.width,B=>{d({width:B}),c(!1)}),Be(()=>e.height,B=>{d({height:B}),c(!1)}),mt(()=>{x()}),Ai(()=>{pt.delete(this),w.unregister(),y&&y.teardown(),l&&l.teardown(),Le.splice(Le.indexOf(i),1)}),{isOpen:S,windowEl:z,titlebar:F,content:R,activate:L,styleWindow:v,styleTitlebar:u,styleContent:h,closeButtonClick:function(){S.value=!1,t("closebuttonclick")},fixPosition:p}}});const vo={class:"title"},yo=ln("\xD7");var on;nn.render=function(e,t,n,i,s,l){const y=hn("myButton");return $(),se(cn,{name:"fade",onAfterLeave:t[2]||(t[2]=w=>e.$emit("close")),onAfterEnter:t[3]||(t[3]=w=>e.$emit("open"))},{default:Oe(()=>[Ii(G("div",{class:"window",style:me(e.styleWindow),ref:"windowEl",onMousedown:t[0]||(t[0]=(...w)=>e.activate&&e.activate(...w)),onTouchstart:t[1]||(t[1]=(...w)=>e.activate&&e.activate(...w))},[G("div",{class:"titlebar",style:me(e.styleTitlebar),ref:"titlebar"},[G("div",vo,[e.$slots.title?he(e.$slots,"title",{key:0}):($(),Q(pe,{key:1},[ln(Li(e.title),1)],2112))]),e.closeButton?($(),se(y,{key:0,windowStyle:e.windowStyle,onClick:e.closeButtonClick},{default:Oe(()=>[yo]),_:1},8,["windowStyle","onClick"])):we("v-if",!0)],4),G("div",{class:"content",style:me(e.styleContent),ref:"content"},[he(e.$slots,"default")],4)],36),[[Mi,e.isOpen]])]),_:3})},nn.__file="src/controls/vuewindow/window/index.vue",function(e){e[e.StyleBlack=0]="StyleBlack",e[e.StyleWhite=1]="StyleWhite",e[e.StyleMetal=2]="StyleMetal",e[e.StyleGrayblue=3]="StyleGrayblue"}(on||(on={}));var V;(function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.centerBack=2]="centerBack",e[e.centerMain=3]="centerMain",e[e.centerFront=4]="centerFront",e[e.left=5]="left",e[e.right=6]="right"})(V||(V={}));class wo{layoutState;layoutMap=new Map;preConditionMap=new Map;widgetsLoadedSet=new Set;widgetConfig=new Array;_LayoutID;constructor(t,n,i){this.layoutState=t,this._LayoutID=i,n.forEach(s=>{if(s.layoutID===i&&(this.widgetConfig.push(s),s.afterid))if(this.preConditionMap.has(s.afterid))this.preConditionMap.get(s.afterid)?.add(s);else{const l=new Set;l.add(s),this.preConditionMap.set(s.afterid,l)}})}getLayoutID(){return this._LayoutID}getWidgetConfig(){return this.widgetConfig}preloadWidgets(){this.widgetConfig.filter(t=>t.preload&&!t.afterid).forEach(t=>{this._loadWidget(t)})}async loadWidget(t){if(!t)return;let n;return xn(t)?n=t:Zi(t)&&(n=this.widgetConfig.find(i=>i.id===t)),n?n.afterid?(this.isWidgetLoaded(n.afterid)||await this.loadWidget(n.afterid),this._loadWidget(n)):this._loadWidget(n):void 0}loadOtherDependenceWidgets(t){this.preConditionMap.has(t)&&this.preConditionMap.get(t)?.forEach(n=>{n.preload&&this._loadWidget(n)})}_loadWidget(t){if(!this.widgetsLoadedSet.has(t.id))return t.component().then(n=>{if(n.default){const i=Di(n.default);this.getContainerComponents(t.container).value.set(t.id,i),this.widgetsLoadedSet.add(t.id),gt().then(()=>{M.EventBus.emit(ne.WidgetLoadedEvent,{layoutID:this._LayoutID,widgetID:t.id}),this.loadOtherDependenceWidgets(t.id)})}})}hasDependentWidgets(t){let n=!1;if(this.preConditionMap.has(t)){const i=this.preConditionMap.get(t);if(i){for(const s of i)if(this.isWidgetLoaded(s.id)){n=!0;break}}}return n}unloadWidget(t){if(!t||!this.isWidgetLoaded(t))return;const n=this.widgetConfig.find(i=>i.id===t);if(n){if(this.preConditionMap.has(t)){const l=this.preConditionMap.get(t);if(l)for(const y of l)this.unloadWidget(y.id)}const i=this.getContainerComponents(n.container),s=i.value.get(t);s&&s.unmounted&&s.unmounted(),i.value.delete(t),this.widgetsLoadedSet.delete(t),M.EventBus.emit(ne.WidgetUnLoadedEvent,{layoutID:this._LayoutID,widgetID:t})}}isWidgetLoaded(t){return this.widgetsLoadedSet.has(t)}splitTwoContainer(t=!1){const n=this.layoutState.centerMainContainer,i=this.layoutState.centerBackContainer;t?(n&&(n.style.left="0",n.style.width="100%"),i&&(i.style.width="100%")):(n&&(n.style.left="50%",n.style.width="50%"),i&&(i.style.width="50%"))}getLayoutContainer(t){switch(t){case V.top:return this.layoutState.topContainer;case V.bottom:return this.layoutState.bottomContainer;case V.left:return this.layoutState.leftContainer;case V.right:return this.layoutState.rightContainer;case V.centerBack:return this.layoutState.centerBackContainer;case V.centerMain:return this.layoutState.centerMainContainer;case V.centerFront:return this.layoutState.centerFrontContainer}}changeContainerVisible(t,n=!1){const i=this.getLayoutContainer(t);i&&(i.style.visibility=n?"visible":"hidden")}changeWidgetVisible(t,n=!1){const i=this.getWidgetComponent(t);i&&M.EventBus.emit(ne.WidgetVisibleChanged,{id:t,layoutID:this._LayoutID,name:i.name,visible:n})}getWidgetComponent(t){if(this.widgetsLoadedSet.has(t)){const n=this.widgetConfig.find(i=>i.id===t);if(n)return this.getContainerComponents(n.container).value.get(t)}}getWigetItem(t){return this.widgetConfig.find(n=>n.id===t)}getGroupWigetItems(t){return this.widgetConfig.filter(n=>n.group===t)}getContainerComponents(t){if(this.layoutMap.has(t))return this.layoutMap.get(t);{const n=ee(new Map);return this.layoutMap.set(t,n),n}}addContainerComponent(t,n){}}var at=ze({name:"MainContainer",props:{widgetConfig:{type:Array,required:!0,default:()=>[]},layoutID:{type:String,default:void 0},layoutStyle:{type:Object}},emits:["containerLoaded"],setup(e,{attrs:t,slots:n,emit:i}){const s=e.layoutID,l=an({topContainer:void 0,centerBackContainer:void 0,centerMainContainer:void 0,centerFrontContainer:void 0,bottomContainer:void 0,leftContainer:void 0,rightContainer:void 0}),y=new wo(l,e.widgetConfig,s),w=R(V.top),S=R(V.centerBack),x=R(V.centerFront),k=R(V.left),z=R(V.right),F=R(V.bottom);function R(v){return y?.getContainerComponents(v)}const L=de(()=>e.layoutStyle);return mt(()=>{y&&(y.preloadWidgets(),s===void 0&&(M.LayoutManager=y),i("containerLoaded",{layoutID:s,layoutManager:y}))}),{...Bi(l),topContainerComponents:w,centerbackComponents:S,centerfrontComponents:x,leftContainerComponents:k,rightContainerComponents:z,bottomContainerComponents:F,containerStyle:L}}});const bo={ref:"topContainer",class:"topContainer"},So={ref:"centerBackContainer",class:"centerdiv backContainer"},xo={ref:"centerMainContainer",class:"centerdiv mainContainer"},Co={ref:"centerFrontContainer",class:"centerdiv centerContainer"},Eo={ref:"leftContainer",class:"leftContainer"},zo={ref:"rightContainer",class:"rightContainer"},_o={ref:"bottomContainer",class:"bottomContainer"};at.render=function(e,t,n,i,s,l){const y=hn("router-view");return $(),Q("div",{class:"layoutContainer",style:me(e.containerStyle)},[G("div",bo,[($(!0),Q(pe,null,ve(e.topContainerComponents,([w,S])=>($(),se(fe(S),{key:w}))),128))],512),G("div",null,[we(" \u5E95\u5C42-\u4E3B\u5BB9\u5668 "),G("div",So,[($(!0),Q(pe,null,ve(e.centerbackComponents,([w,S])=>($(),se(fe(S),{key:w}))),128))],512),we(" \u4E3B\u8981\u5BB9\u5668 "),G("div",xo,[un(y,null,{default:Oe(({Component:w})=>[($(),se(fe(w)))]),_:1})],512),we(" \u6D6E\u52A8-\u4E3B\u5BB9\u5668 "),G("div",Co,[($(!0),Q(pe,null,ve(e.centerfrontComponents,([w,S])=>($(),se(fe(S),{key:w}))),128))],512),G("div",Eo,[($(!0),Q(pe,null,ve(e.leftContainerComponents,([w,S])=>($(),se(fe(S),{key:w}))),128))],512),G("div",zo,[($(!0),Q(pe,null,ve(e.rightContainerComponents,([w,S])=>($(),se(fe(S),{key:w}))),128))],512)]),G("div",_o,[($(!0),Q(pe,null,ve(e.bottomContainerComponents,([w,S])=>($(),se(fe(S),{key:w}))),128))],512)],4)},at.__scopeId="data-v-4d081e5c",at.__file="src/controls/layoutcontainer/layout.vue";const De=new Map,ut=new Map;let Pe;const Ho={getDefaultClient(){if(Pe||(Pe=new ht(SysConfig.DefaultHproseAPI)),!Pe)throw Error("HproseProxy\u5BF9\u8C61\u4E3A\u7A7A");return Pe},registerHprose(e,t){const n=ut.get(e);if(!n){const i=new ht(t);De.set(e,i)}return n},getHprose:e=>ut?.get(e),getProxyHprose:e=>De.get(e),unregisterHprose(e){De.get(e)&&(ut.delete(e),De.delete(e))}},He={Login:"/api/Login/Login",CheckLogin:"\u200B/api\u200B/Check\u200B/Login",Logout:"/api/Check/ExitLogin",ChangePWD:"/api/UserManager/UpdateUserPWD",RefreshToken:"/api/Check/RefreshToken",CheckToken:"/api/Check/CheckToken"},rn="access_token",ko=M.Config.ServiceURL.LoginAuthURL;function sn(){const e=Ui();e&&We(He.RefreshToken,ko,{refreshToken:e}).then(t=>{An(t.data)})}function Ao(e){M.User||(M.User={id:e.id,name:e.name,issystem:e.issystem,issecurity:e.issecurity,appkey:e.appkey,role:e.role,doubleToken:{accessToken:{tokenContent:e.token,expires:e.expire},refreshToken:{tokenContent:e.refresh,expires:e.expire}}});const t=new Date().getTime(),n=new Date(e.expire).getTime()-t;n>0&&(n<=4e3?sn():setTimeout(sn,n-4e3))}function An(e){M.User&&(M.User.doubleToken=e);const t=new Date().getTime(),n=new Date(e.accessToken.expires).getTime()-t;if(n>0&&M.User){let i=Se();if(!i){const s=M.User.doubleToken;i={id:M.User.id,name:M.User.name,token:s?s.accessToken.tokenContent:"",expire:s?s.accessToken.expires:"",refresh:s?s.accessToken.tokenContent:"",issystem:M.User.issystem,issecurity:M.User.issecurity,appkey:M.User.appkey,role:M.User.role}}i.token=e.accessToken.tokenContent,i.expire=e.accessToken.expires,i.refresh=e.refreshToken.tokenContent,be.set(rn,i,n/1e3),Ao(i)}else be.remove(rn)}function Bo(e){M.User=e}const bt=M.Config.ServiceURL.LoginAuthURL;async function $o(e){const t=(await We(He.Login,bt,e))?.data;return t&&t.isSuccess&&(Bo(t.resultValue),An(t.resultValue.doubleToken)),t}function qo(){const e=Se();e&&(Ni(He.Logout,bt,{token:e.token,reftoken:e.refresh}),mn())}function Xo(e){return We(He.CheckToken,bt,{token:e})}const St="ROLE_SYSTEM_RIGHT",xt=new vt("",sessionStorage);function Io(){return xt.get(St)}function Mo(e){xt.set(St,e)}function Lo(){xt.remove(St)}const ct=[];function Do(){return Io()}async function Go(e,t,n,i){if(Lo(),!M.User)return;let s;if(i)s=i;else{if(!t)return;let l=n;l||(l=M.Config.ServiceURL.LoginAuthURL);const y=await We(t,l,{system:e});if(!y||!y.data)return void M.Message?.warn("\u65E0\u6CD5\u83B7\u53D6\u529F\u80FD\u6388\u6743\u5217\u8868\uFF01");s=y.data}return s&&Mo(s),s}function Bn(e,t){const n={...e};return n.meta||(n.meta={}),t.index!=null&&(n.meta.index=t.index),t.title!=null&&(n.meta.title=t.title),e.children&&(n.children=[],t.children&&t.children.forEach(i=>{const s=e.children?.find(l=>l.path===i.path);if(s){const l=Bn(s,i);l&&n.children?.push(l)}})),n}function Yo(e){if(M.User?.issystem)return e;const t=Do();return t&&t.routes?(ct.length>0||e.forEach(n=>{const i=t.routes?.find(s=>s.name===n.name);if(i){const s=Bn(n,i);s&&ct.push(s)}}),ct):void 0}export{vt as $,Bo as G,ne as K,No as L,M,Wo as R,Xt as S,Do as T,re as a,Se as b,Ao as c,qo as d,Lo as e,Xo as f,ht as g,We as h,Oo as i,fn as j,An as l,Yo as m,Uo as o,Go as p,eo as q,Ho as s,jo as t,$o as u,To as y};
