!function(){function e(e,t,n,a,i,o,r){try{var l=e[o](r),p=l.value}catch(s){return void n(s)}l.done?t(p):Promise.resolve(p).then(a,i)}function t(t){return function(){var n=this,a=arguments;return new Promise((function(i,o){var r=t.apply(n,a);function l(t){e(r,i,o,l,p,"next",t)}function p(t){e(r,i,o,l,p,"throw",t)}l(void 0)}))}}System.register(["./index-legacy.f2c298ed.js","./@vue-exp-legacy.b493abed.js","./vendor-legacy.ecbffdeb.js","./xframelib-exp-legacy.dacdec32.js","./logo-legacy.09dfc196.js","./ant-design-vue-exp-legacy.66cea81e.js","./lodash-es-exp-legacy.5e983146.js","./axios-exp-legacy.2267007d.js","./@hprose-exp-legacy.47b094bd.js"],(function(e){"use strict";var n,a,i,o,r,l,p,s,d,c,u,g,m,h,y,f,v,W,w,x,b,S,k,M,I,P;return{setters:[function(e){n=e._,a=e.f,i=e.b},function(e){o=e.d,r=e.r,l=e.l,p=e.o,s=e.M,d=e.N,c=e.Q,u=e.Z,g=e.q,m=e.a7,h=e.a8},function(e){y=e.P,f=e.Q},function(e){v=e.M,W=e.b,w=e.c,x=e.f,b=e.G,S=e.l,k=e.a,M=e.u,I=e.p},function(e){P=e._},function(){},function(){},function(){},function(){}],execute:function(){var T={id:"ee8c674b066737ab15fceca4bba78669",name:"后台业务服务平台",product:"YSServiceAPIPlatform",version:"0.0.1",routes:[{path:"/",name:"BackLayout",title:"",type:1,children:[{path:"/hprose",name:"hprose",title:"HproseAPI在线测试",type:0,index:0},{path:"webapi",name:"webapi",title:"SwaggerAPI生成",type:0,index:1}]}],widgetMenu:[{name:"漫游",index:0,type:0,children:[{name:"飞行",path:"flyGroupMenuWidget",type:0,children:[{name:"全球旋转",path:"earthRotationWidget",type:0},{name:"中心点旋转",path:"centerRotationWidget",type:0}]},{name:"视角",path:"viewGroupMenuWidget",type:0,children:[{name:"全球",path:"globalViewWidget",type:0},{name:"全国视角",path:"chinaViewWidget",type:0}]},{name:"定位",path:"locationWidget",type:0}]},{name:"视图",index:1,type:0,children:[{name:"图层管理",path:"layerManageWidget",type:0},{name:"在线影像底图",path:"imageBaseLayerWidget",type:0},{name:"图层卷帘",path:"splitWidget",type:0},{name:"分屏测试",path:"twoViewWidget",type:0}]},{name:"地形",index:10,type:0,children:[{name:"地形数据源",path:"demSourceWidget",type:0,children:[{name:"显示地球",path:"showWidget",type:0},{name:"地形光照",path:"terrainlightWidget",type:0},{name:"深度检测",path:"depthmeasurementWidget",type:0},{name:"地形夸张",path:"terrainhyperboleWidget",type:0},{name:"地下模式",path:"undergroundmodeWidget",type:0},{name:"三角网",path:"networkWidget",type:0},{name:"地表不透明",path:"notransparencyWidget",type:0},{name:"地表透明",path:"transparencyWidget",type:0},{name:"高程",path:"elevationWidget",type:0},{name:"坡度",path:"slopeWidget",type:0},{name:"坡向",path:"exposureWidget",type:0},{name:"等高线",path:"contourlineWidget",type:0},{name:"地形裁剪",path:"terraincuttingWidget",type:0},{name:"加载地形",path:"loadterrain",type:0}]},{name:"可视化设置",path:"demSettingWidget",type:0}]},{name:"效果",index:20,type:0,children:[{name:"天气",path:"weatherMenuWidget",type:0,children:[{name:"雨",path:"rainWidget",type:0},{name:"雪",path:"snowWidget",type:0},{name:"雾",path:"fog1Widget",type:0},{name:"全屏雾",path:"fogWidget",type:0},{name:"云",path:"cloudWidget",type:0},{name:"风",path:"windyWidget",type:0},{name:"星空",path:"ControlSkyVisible",type:3},{name:"太阳",path:"sunWidget",type:0},{name:"大气",path:"atmosphereWidget",type:0}]},{name:"矢量数据",path:"vectorMenuWidget",type:0,children:[{name:"kml数据",path:"kmlWidget",type:0},{name:"czml数据",path:"czmlWidget",type:0},{name:"topoJSON数据",path:"topojsonWidget",type:0},{name:"geoJSON数据",path:"geojsonWidget",type:0}]},{name:"栅格数据",path:"rasterMenuWidget",type:0,children:[{name:"OGC WMTS服务",path:"wmtsWidget",type:0},{name:"OGC WMS服务",path:"wmsWidget",type:0},{name:"ArcGIS 瓦片",path:"arcgisWidget",type:0}]}]},{name:"标绘",index:21,path:"leftMenuWidget",type:0,children:[{name:"标记点",path:"markPointEdit",type:0},{name:"多边形",path:"polygonEdit",type:0},{name:"折线",path:"polylineEdit",type:0},{name:"圆形",path:"circleEdit",type:0},{name:"矩形",path:"rectangleEdit",type:0},{name:"清空",path:"removeEntities",type:0}]},{name:"demo",index:30,type:0,children:[{name:"GIF广告牌",path:"gifBillboardWidget",type:0},{name:"轨迹飞行",path:"planeFlyWidget",type:0}]},{name:"示例",index:99,path:"rightMenuWidget",type:0},{name:"设置",index:100,path:"widgetSetting",type:0}]},R=o({setup:function(){var e,n,o,s=v.t,d=r({username:"",password:""}),c=l(),u=l(),g=l(null===(e=v.Config.UI)||void 0===e?void 0:e.SiteTitle),m=y(),h=f(),P=decodeURIComponent((null===(n=h.query)||void 0===n?void 0:n.redirect)||"/"),R=W();if(R)return w(R),void(m&&m.replace(P).then((function(e){"login"==h.name&&m.replace("/")})));var j=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,o,r,l,p,c,u,g,y,f,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==d.username.trim()&&""!=d.password.trim()){e.next=2;break}return e.abrupt("return",null===(t=v.Message)||void 0===t?void 0:t.warn(s("sys.login.loginEmtyWarnInfo")));case 2:return n={username:d.username.trim(),pwd:k.MD5(d.password)},e.next=5,M(n);case 5:if(o=e.sent){e.next=9;break}return null===(r=v.Message)||void 0===r||r.warn(s("sys.login.loginFailTitle")),e.abrupt("return");case 9:if(!o.isSuccess){e.next=20;break}return u=a(),e.next=13,I(u,null===(l=v.Config.APIPath)||void 0===l?void 0:l.GET_AUTH_ROLE_RIGHT,void 0,T);case 13:e.sent&&(null==(g=i())||g.forEach((function(e){m.addRoute(e)}))),y=decodeURIComponent((null===(p=h.query)||void 0===p?void 0:p.redirect)||"/"),m&&(console.log(y,"toPath"),y.startsWith("http://")||y.startsWith("https://")?(f=W(),window.open(y+"#/?tk="+f.token,"_self")):m.replace(y).then((function(e){"login"==h.name&&m.replace("/")}))),null===(c=v.Message)||void 0===c||c.msg(s("sys.login.loginSuccessTitle")),e.next=21;break;case 20:null===(w=v.Message)||void 0===w||w.warn(o.ResultDescription||s("sys.login.loginFailTitle"));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p(t(regeneratorRuntime.mark((function e(){var t,n,a,i,r,l,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P&&(o=null===(t=h.query)||void 0===t||null===(n=t.tk)||void 0===n?void 0:n.toString()),!o){e.next=8;break}return e.next=4,x(o);case 4:a=e.sent,console.log(a,"输出checkToken的结果00"),(i=null==a?void 0:a.data)&&(i.isSuccess?(b(i.resultValue),S(i.resultValue.doubleToken),null===(r=v.Message)||void 0===r||r.msg(s("sys.login.loginSuccessTitle")),(l=W())&&((null===(p=P)||void 0===p?void 0:p.indexOf("?"))>0?P+="&tk="+l.token:P+="?tk="+l.token,m.replace(P).then((function(e){"login"==h.name&&m.replace("/")})))):null===(d=v.Message)||void 0===d||d.warn(s("sys.login.loginTokenFailInfo")));case 8:case"end":return e.stop()}}),e)})))),{formState:d,systemTitle:g,handleSubmit:j,t:s,onblur:function(){c.value&&(c.value.placeholder=s("sys.login.accountPlaceholder")),u.value&&(u.value.placeholder=s("sys.login.passwordPlaceholder"))},nameInput:c,pwdInput:u}}}),j={class:"container"},E={class:"login-logo"},G=c("img",{src:P,alt:""},null,-1),C={class:"login-title"},V={class:"login"},A={class:"login-top"},B={class:"login-center clearfix"},F=c("div",{class:"login-center-img"},[c("img",{src:"./img/login/name.png"})],-1),O={class:"login-center-input"},U=["placeholder"],_={class:"login-center-input-text"},q={class:"login-center clearfix"},N=c("div",{class:"login-center-img"},[c("img",{src:"./img/login/password.png"})],-1),H={class:"login-center-input"},L=["placeholder"],z={class:"login-center-input-text"};e("default",n(R,[["render",function(e,t,n,a,i,o){return s(),d("div",j,[c("div",E,[G,c("span",C,u(e.systemTitle),1)]),c("div",V,[c("div",A,u(e.t("sys.login.signInFormTitle")),1),c("div",B,[F,c("div",O,[g(c("input",{ref:"nameInput",type:"text",placeholder:e.t("sys.login.accountPlaceholder"),onfocus:"this.placeholder=''",onBlur:t[0]||(t[0]=function(t){return e.onblur()}),"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formState.username=t})},null,40,U),[[m,e.formState.username]]),c("div",_,u(e.t("sys.login.userName")),1)])]),c("div",q,[N,c("div",H,[g(c("input",{ref:"pwdInput",type:"password",placeholder:e.t("sys.login.passwordPlaceholder"),onfocus:"this.placeholder=''",onBlur:t[2]||(t[2]=function(t){return e.onblur()}),"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formState.password=t}),onKeyup:t[4]||(t[4]=h((function(){return e.handleSubmit&&e.handleSubmit.apply(e,arguments)}),["enter"]))},null,40,L),[[m,e.formState.password]]),c("div",z,u(e.t("sys.login.password")),1)])]),c("div",{class:"login-button",onClick:t[5]||(t[5]=function(){return e.handleSubmit&&e.handleSubmit.apply(e,arguments)})},u(e.t("sys.login.loginButton")),1)])])}]]))}}}))}();
