import{a2 as c,a1 as g,ag as m,ah as C}from"./vendor-Cm8vbQLD.js";import{O as v,f as F,_ as S}from"./index-3mXAM2d5.js";import{B as n,m as h}from"./xframelib-exp-Dokv845S.js";import{d as V,y as b,z as y,r as M,a as O,X as $,$ as j,I as u,a6 as E}from"./@vue-exp-CxZKVZL7.js";import"./@hprose-exp-DksTqdcd.js";import"./vue-router-exp-BoJcrdOF.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-CNvCUaPp.js";const w="changeMyPWD";let U;const p={validateForm:U,name:w,props:{data:c([Boolean,Object]).def(!1),extra:g().isRequired},setup(r,{emit:s}){function d(l){l?f():t.value.resetFields()}b(()=>{v(w,d)}),y(()=>{F(w,d)});const t=M(),a=O({oldPassword:"",newPassword:"",newPassword2:"",showLevel:!1}),B={newPassword:[{required:!0,validator:async(l,o)=>o===""?Promise.reject("输入新密码"):o===a.oldPassword?Promise.reject("新旧密码不能一样!"):Promise.resolve(),trigger:"change"}],newPassword2:[{required:!0,validator:async(l,o)=>o===""?Promise.reject("请再次输入密码"):o!==a.newPassword?Promise.reject("两次输入的不一致!"):Promise.resolve(),trigger:"change"}]};p.validateForm=()=>t.value.validate();function f(){if(a.newPassword!=a.newPassword2){n.Message.warn("两次新密码不一致");return}const l=a.oldPassword,o=a.newPassword;h({oldpwd:l,newpwd:o}).then(i=>{i?.data?n.Message.info("修改密码成功！"):n.Message.warn("修改密码失败！")}).catch(i=>{n.Message.warn("修改密码失败:"+i.message)})}return{rules:B,formState:a,formRef:t,labelCol:{span:6},wrapperCol:{span:14},onSubmit:f}}},k=V(p);function q(r,s,d,t,a,P){return $(),j("div",null,[u(C,{ref:"formRef",validation:"",model:r.formState,"label-col":r.labelCol,"wrapper-col":r.wrapperCol,rules:r.rules},{default:E(()=>[u(m,{modelValue:r.formState.oldPassword,"onUpdate:modelValue":s[0]||(s[0]=e=>r.formState.oldPassword=e),type:"password",label:"旧密码","lazy-rules":"",rules:[e=>e&&e.length>0||"请输入密码"]},null,8,["modelValue","rules"]),u(m,{modelValue:r.formState.newPassword,"onUpdate:modelValue":s[1]||(s[1]=e=>r.formState.newPassword=e),label:"新密码",type:"password",hint:"请输入新密码","lazy-rules":"",rules:[e=>e&&e.length>0&&e!=r.formState.oldPassword||"请输入新密码"]},null,8,["modelValue","rules"]),u(m,{modelValue:r.formState.newPassword,"onUpdate:modelValue":s[2]||(s[2]=e=>r.formState.newPassword=e),label:"确认密码",type:"password",hint:"再次输入新密码",rules:[e=>e&&e.length>0&&e!=r.formState.newPassword||"请输入新密码"]},null,8,["modelValue","rules"])]),_:1},8,["model","label-col","wrapper-col","rules"])])}const L=S(k,[["render",q],["__file","ChangePwd.vue"]]);export{L as default};
