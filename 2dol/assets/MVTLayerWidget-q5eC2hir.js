import{W as b,K as V}from"./vendor-DLGs6WCJ.js";import{a as g,c as D}from"./xgis-ol-exp-CUkajMJM.js";import{B as f,j as F}from"./xframelib-exp-BL-NWzRk.js";import{u as k}from"./vue-router-exp-LDq1UUA0.js";import{d as B,r as n,D as P,U as S,c as s,V as v,a3 as y,P as U}from"./@vue-exp-Mkau1HGZ.js";import{_ as W}from"./index-Dy2WIICa.js";import"./@iconify/vue-exp-DwwUNauw.js";import"./ol-exp-B7umSeRp.js";import"./axios-exp-C7rfqWEd.js";import"./monaco-editor-exp-B01XOe8A.js";const I=B({__name:"MVTLayerWidget",setup(M,{expose:r}){r();const L=k(),t=n(""),u=n(""),d=n("");let a,o,l;const c=n("https://vector.gis.digsur.com/vtile/admin/test1113/tile.json?tk=00065a33-7951-4250-b1b2-ab7b871a4aa3"),m=n("");function p(e){t.value=e.tileSchema?.rule??"W",u.value=e.id,d.value=e.name;const j=g.getProjection(e.prjInfo),i=f.XMap;l||(l=new D(i)),a&&i.LayerManager.deleteLayer(a),a=l.addVTLayer(e),i.MapView.setZoom(e.center[2]);let x=g.fromLonLatCoordinate([e.center[0],e.center[1]],j);i.MapView.setCenter(x)}function C(){if(m.value){const e=JSON.parse(m.value);p(e)}else c.value&&F(c.value).then(e=>{e.data&&p(e.data)})}function T(){if(a){const e=f.XMap;o?(e.map.removeLayer(o),o=void 0):o=e.WMTSTool.addWMTSDebugLayer(a)}}P(()=>{const e=f.XMap;a&&e.LayerManager.deleteLayer(a),o&&(e.map.removeLayer(o),o=void 0)});const _={route:L,PrjValue:t,serviceID:u,serviceName:d,get mvtLayer(){return a},set mvtLayer(e){a=e},get debugLayer(){return o},set debugLayer(e){o=e},get vtTool(){return l},set vtTool(e){l=e},tileJsonURL:c,tileJsonContent:m,loadMVTLayer:p,doClick:C,loadGridLayer:T};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),N={class:"rightPanel"},A={class:"q-pa-md",style:{"max-width":"500px"}};function h(M,r,L,t,u,d){return U(),S("div",N,[s(b,{clearable:"",modelValue:t.tileJsonURL,"onUpdate:modelValue":r[0]||(r[0]=a=>t.tileJsonURL=a),label:"tileJson地址","stack-label":"",dense:!1},null,8,["modelValue"]),v("div",A,[s(b,{clearable:"",modelValue:t.tileJsonContent,"onUpdate:modelValue":r[1]||(r[1]=a=>t.tileJsonContent=a),filled:"",type:"textarea"},null,8,["modelValue"])]),s(V,{color:"primary",label:"加载TileJson",onClick:t.doClick}),s(V,{color:"primary",label:"加载/移除网格",onClick:t.loadGridLayer}),v("div",null,[v("span",null,"图层ID:"+y(t.serviceID)+" 服务名："+y(t.serviceName)+" 切片方案："+y(t.PrjValue),1)])])}const Z=W(I,[["render",h],["__scopeId","data-v-7a8cb959"],["__file","MVTLayerWidget.vue"]]);export{Z as default};
