import{c as l,d,G as m,b as f,a as g,g as x}from"./ol-exp-BZzGrai6.js";import{F as i}from"./xframelib-exp-B5TZbF78.js";import{t as y}from"./zhezhaotest-FsVvAOE7.js";import{d as E,b as S,B as _}from"./@vue-exp-18LRBxdm.js";import"./vendor-BjjxFmO4.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-C65O8cJc.js";const v=E({__name:"ClipPolygon",setup(b){const p=new l({fill:new d({color:"black"})});let t,o,n,s;function a(e){const r=x(e);e.context.globalCompositeOperation="destination-in",t&&t.getSource().forEachFeature(function(c){r.drawFeature(c,p)}),e.context.globalCompositeOperation="source-over"}return S(()=>{const e=i.XMap,r=e.map.getLayers().getArray();o=r[0],n=r[1];const c=e.MapView.getProjection();var u=new m().readFeatures(y,{dataProjection:"EPSG:4326",featureProjection:c});t=new f({style:null,source:new g({features:u})}),s=o.getExtent(),t.getSource().on("addfeature",function(){o.setExtent(t.getSource().getExtent()),n.setExtent(t.getSource().getExtent())}),o.on("postrender",a),n.on("postrender",a),e.map.renderSync()}),_(()=>{t&&(o&&(o.un("postrender",a),o.setExtent(s)),n&&(n.un("postrender",a),n.setExtent(s)),t.dispose());const e=i.XMap;e&&e.map.renderSync()}),(e,r)=>null}});export{v as default};
