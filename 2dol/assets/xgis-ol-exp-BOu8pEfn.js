import{U as Ri,V as ze,c as et,e as Un,r as G,a as w,w as ae,h as S,G as di,o as st,K as MM,b as Ft,H as Tu,ab as kM,j as TM,d as hn,Y as No,X as Gi,Q as Er,W as Ka,$ as Ei,v as Ot,P as Dt,m as ux,E as Fi,n as ct,D as cx,T as EM,B as In,I as ga,C as Ce,i as Hi,ac as Ym,M as hx,p as vo,a7 as dx,F as fh,a3 as Sl,S as ur,L as gh,_ as LM,a5 as IM,f as PM,g as Vr}from"./@vue-exp-Mkau1HGZ.js";import{I as Wn}from"./@iconify/vue-exp-DwwUNauw.js";import{V as RM}from"./ol-exp-B2gDleuI.js";class vr{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var bs="propertychange";class Eu{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Xr(t,e){return t>e?1:t<e?-1:0}function mh(t,e,i){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof i=="function"){for(let n=1;n<r;++n){const o=t[n];if(o===e)return n;if(o<e)return i(e,t[n-1],o)>0?n-1:n}return r-1}if(i>0){for(let n=1;n<r;++n)if(t[n]<e)return n-1;return r-1}if(i<0){for(let n=1;n<r;++n)if(t[n]<=e)return n;return r-1}for(let n=1;n<r;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return r-1}function qM(t,e,i){for(;e<i;){const r=t[e];t[e]=t[i],t[i]=r,++e,--i}}function Zr(t,e){const i=Array.isArray(e)?e:[e],r=i.length;for(let n=0;n<r;n++)t[t.length]=i[n]}function yo(t,e){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}function xs(){return!0}function Os(){return!1}function ws(){}function px(t){let e,i,r;return function(){const n=Array.prototype.slice.call(arguments);return i&&this===r&&yo(n,i)||(r=this,i=n,e=t.apply(this,arguments)),e}}function na(t){return function(){let e;try{e=t()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}()}function Lu(t){for(const e in t)delete t[e]}function po(t){let e;for(e in t)return!1;return!e}class Iu extends Eu{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,i){if(!e||!i)return;const r=this.listeners_||(this.listeners_={}),n=r[e]||(r[e]=[]);n.includes(i)||n.push(i)}dispatchEvent(e){const i=typeof e=="string",r=i?e:e.type,n=this.listeners_&&this.listeners_[r];if(!n)return;const o=i?new vr(e):e;o.target||(o.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});let l;r in a||(a[r]=0,s[r]=0),++a[r];for(let u=0,c=n.length;u<c;++u)if(l="handleEvent"in n[u]?n[u].handleEvent(o):n[u].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--a[r]==0){let u=s[r];for(delete s[r];u--;)this.removeEventListener(r,ws);delete a[r]}return l}disposeInternal(){this.listeners_&&Lu(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,i){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const n=r.indexOf(i);n!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[n]=ws,++this.pendingRemovals_[e]):(r.splice(n,1),r.length===0&&delete this.listeners_[e]))}}var At="change",AM="error",zf="contextmenu",Zl="click",FM="dblclick",vh="keydown",fx="keypress",OM="load",Z0="touchmove",Ol="wheel";function pt(t,e,i,r,n){if(n){const a=i;i=function(){t.removeEventListener(e,i),a.apply(r??this,arguments)}}else r&&r!==t&&(i=i.bind(r));const o={target:t,type:e,listener:i};return t.addEventListener(e,i),o}function yh(t,e,i,r){return pt(t,e,i,r,!0)}function It(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Lu(t))}class zl extends Iu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(At)}getRevision(){return this.revision_}onInternal(e,i){if(Array.isArray(e)){const r=e.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=pt(this,e[o],i);return n}return pt(this,e,i)}onceInternal(e,i){let r;if(Array.isArray(e)){const n=e.length;r=new Array(n);for(let o=0;o<n;++o)r[o]=yh(this,e[o],i)}else r=yh(this,e,i);return i.ol_key=r,r}unInternal(e,i){const r=i.ol_key;if(r)Ur(r);else if(Array.isArray(e))for(let n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],i);else this.removeEventListener(e,i)}}function Ur(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)It(t[e]);else It(t)}function Ye(){throw new Error("Unimplemented abstract method.")}zl.prototype.on,zl.prototype.once,zl.prototype.un;let zM=0;function Xe(t){return t.ol_uid||(t.ol_uid=String(++zM))}class Q0 extends vr{constructor(e,i,r){super(e),this.key=i,this.oldValue=r}}class yr extends zl{constructor(e){super(),this.on,this.once,this.un,Xe(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let i;return this.values_&&this.values_.hasOwnProperty(e)&&(i=this.values_[e]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,i){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new Q0(r,e,i)),r=bs,this.hasListener(r)&&this.dispatchEvent(new Q0(r,e,i))}addChangeListener(e,i){this.addEventListener(`change:${e}`,i)}removeChangeListener(e,i){this.removeEventListener(`change:${e}`,i)}set(e,i,r){const n=this.values_||(this.values_={});if(r)n[e]=i;else{const o=n[e];n[e]=i,o!==i&&this.notify(e,o)}}setProperties(e,i){for(const r in e)this.set(r,e[r],i)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,i){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],po(this.values_)&&(this.values_=null),i||this.notify(e,r)}}}var Ko="add",Xo="remove";const J0="length";class Uu extends vr{constructor(e,i,r){super(e),this.element=i,this.index=r}}class ar extends yr{constructor(e,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=e||[],this.unique_)for(let r=0,n=this.array_.length;r<n;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let i=0,r=e.length;i<r;++i)this.push(e[i]);return this}forEach(e){const i=this.array_;for(let r=0,n=i.length;r<n;++r)e(i[r],r,i)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(J0)}insertAt(e,i){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(i),this.array_.splice(e,0,i),this.updateLength_(),this.dispatchEvent(new Uu(Ko,i,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const i=this.getLength();return this.insertAt(i,e),this.getLength()}remove(e){const i=this.array_;for(let r=0,n=i.length;r<n;++r)if(i[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const i=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Uu(Xo,i,e)),i}setAt(e,i){if(e>=this.getLength())return void this.insertAt(e,i);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(i,e);const r=this.array_[e];this.array_[e]=i,this.dispatchEvent(new Uu(Xo,r,e)),this.dispatchEvent(new Uu(Ko,i,e))}updateLength_(){this.set(J0,this.array_.length)}assertUnique_(e,i){for(let r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===e&&r!==i)throw new Error("Duplicate item added to a unique collection")}}var Wu="opacity",Yd="visible",ey="extent",Kd="zIndex",Xd="maxResolution",Zd="minResolution",Qd="maxZoom",Jd="minZoom",ep="source",ty="map";function xt(t,e){if(!t)throw new Error(e)}function Nt(t,e,i){return Math.min(Math.max(t,e),i)}function DM(t,e,i,r,n,o){const a=n-i,s=o-r;if(a!==0||s!==0){const l=((t-i)*a+(e-r)*s)/(a*a+s*s);l>1?(i=n,r=o):l>0&&(i+=a*l,r+=s*l)}return wn(t,e,i,r)}function wn(t,e,i,r){const n=i-t,o=r-e;return n*n+o*o}function iy(t){return 180*t/Math.PI}function Pr(t){return t*Math.PI/180}function no(t,e){const i=t%e;return i*e<0?i+e:i}function Zi(t,e,i){return t+i*(e-t)}function Pu(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function ry(t,e){return Math.round(Pu(t,e))}function Yu(t,e){return Math.floor(Pu(t,e))}function Yn(t,e){return Math.ceil(Pu(t,e))}function Df(t,e,i){if(t>=e&&t<i)return t;const r=i-e;return((t-e)%r+r)%r+e}class gx extends yr{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const i=Object.assign({},e);typeof e.properties=="object"&&(delete i.properties,Object.assign(i,e.properties)),i[Wu]=e.opacity!==void 0?e.opacity:1,xt(typeof i[Wu]=="number","Layer opacity must be a number"),i[Yd]=e.visible===void 0||e.visible,i[Kd]=e.zIndex,i[Xd]=e.maxResolution!==void 0?e.maxResolution:1/0,i[Zd]=e.minResolution!==void 0?e.minResolution:0,i[Jd]=e.minZoom!==void 0?e.minZoom:-1/0,i[Qd]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const i=this.state_||{layer:this,managed:e===void 0||e},r=this.getZIndex();return i.opacity=Nt(Math.round(100*this.getOpacity())/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=r!==void 0||i.managed?r:1/0,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(e){return Ye()}getLayerStatesArray(e){return Ye()}getExtent(){return this.get(ey)}getMaxResolution(){return this.get(Xd)}getMinResolution(){return this.get(Zd)}getMinZoom(){return this.get(Jd)}getMaxZoom(){return this.get(Qd)}getOpacity(){return this.get(Wu)}getSourceState(){return Ye()}getVisible(){return this.get(Yd)}getZIndex(){return this.get(Kd)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ey,e)}setMaxResolution(e){this.set(Xd,e)}setMinResolution(e){this.set(Zd,e)}setMaxZoom(e){this.set(Qd,e)}setMinZoom(e){this.set(Jd,e)}setOpacity(e){xt(typeof e=="number","Layer opacity must be a number"),this.set(Wu,e)}setVisible(e){this.set(Yd,e)}setZIndex(e){this.set(Kd,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var Bf="prerender",jf="postrender",mx="precompose",BM="postcompose",tp="rendercomplete",Ji=0,Rr=1,br={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Km=256,kn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Qr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||kn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Ru=6378137,Xa=Math.PI*Ru,jM=[-Xa,-Xa,Xa,Xa],NM=[-180,-85,180,85],Ku=Ru*Math.log(Math.tan(Math.PI/2));class wa extends Qr{constructor(e){super({code:e,units:"m",extent:jM,global:!0,worldExtent:NM,getPointResolution:function(i,r){return i/Math.cosh(r[1]/Ru)}})}}const ny=[new wa("EPSG:3857"),new wa("EPSG:102100"),new wa("EPSG:102113"),new wa("EPSG:900913"),new wa("http://www.opengis.net/def/crs/EPSG/0/3857"),new wa("http://www.opengis.net/gml/srs/epsg.xml#3857")];function $M(t,e,i,r){const n=t.length;i=i>1?i:2,r=r??i,e===void 0&&(e=i>2?t.slice():new Array(n));for(let o=0;o<n;o+=r){e[o]=Xa*t[o]/180;let a=Ru*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));a>Ku?a=Ku:a<-Ku&&(a=-Ku),e[o+1]=a}return e}function VM(t,e,i,r){const n=t.length;i=i>1?i:2,r=r??i,e===void 0&&(e=i>2?t.slice():new Array(n));for(let o=0;o<n;o+=r)e[o]=180*t[o]/Xa,e[o+1]=360*Math.atan(Math.exp(t[o+1]/Ru))/Math.PI-90;return e}const oy=[-180,-90,180,90],GM=6378137*Math.PI/180;class Co extends Qr{constructor(e,i){super({code:e,units:"degrees",extent:oy,axisOrientation:i,global:!0,metersPerUnit:GM,worldExtent:oy})}}const ay=[new Co("CRS:84"),new Co("EPSG:4326","neu"),new Co("urn:ogc:def:crs:OGC:1.3:CRS84"),new Co("urn:ogc:def:crs:OGC:2:84"),new Co("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Co("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Co("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Nf={};function Zc(t){return Nf[t]||Nf[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}let ss={};function oa(t,e,i){const r=t.getCode(),n=e.getCode();r in ss||(ss[r]={}),ss[r][n]=i}function Qc(t,e){return t in ss&&e in ss[t]?ss[t][e]:null}var sy=0,_h=1,$f=2,Vf=4,Gf=8,Hf=16;function bh(t){const e=HM();for(let i=0,r=t.length;i<r;++i)Dl(e,t[i]);return e}function oo(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function vx(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function ma(t,e,i){let r,n;return r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,n=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,r*r+n*n}function aa(t,e){return Xm(t,e[0],e[1])}function Lr(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Xm(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function Uf(t,e){const i=t[0],r=t[1],n=t[2],o=t[3],a=e[0],s=e[1];let l=sy;return a<i?l|=Hf:a>n&&(l|=Vf),s<r?l|=Gf:s>o&&(l|=$f),l===sy&&(l=_h),l}function HM(){return[1/0,1/0,-1/0,-1/0]}function an(t,e,i,r,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=r,n):[t,e,i,r]}function zs(t){return an(1/0,1/0,-1/0,-1/0,t)}function yx(t,e){const i=t[0],r=t[1];return an(i,r,i,r,e)}function Zm(t,e,i,r,n){return _x(zs(n),t,e,i,r)}function Tn(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Qm(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Dl(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function _x(t,e,i,r,n){for(;i<r;i+=n)UM(t,e[i],e[i+1]);return t}function UM(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function Jm(t,e){let i;return i=e(gd(t)),i||(i=e(md(t)),i||(i=e(vd(t)),i||(i=e(pr(t)),i||!1)))}function Ql(t){let e=0;return va(t)||(e=tt(t)*$t(t)),e}function gd(t){return[t[0],t[1]]}function md(t){return[t[2],t[1]]}function Ui(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function WM(t,e){let i;if(e==="bottom-left")i=gd(t);else if(e==="bottom-right")i=md(t);else if(e==="top-left")i=pr(t);else{if(e!=="top-right")throw new Error("Invalid corner");i=vd(t)}return i}function xh(t,e,i,r,n){const[o,a,s,l,u,c,h,d]=function(p,f,g,_){const v=f*_[0]/2,b=f*_[1]/2,m=Math.cos(g),y=Math.sin(g),x=v*m,C=v*y,k=b*m,L=b*y,A=p[0],E=p[1];return[A-x+L,E-C-k,A-x-L,E-C+k,A+x-L,E+C+k,A+x+L,E+C-k,A-x+L,E-C-k]}(t,e,i,r);return an(Math.min(o,s,u,h),Math.min(a,l,c,d),Math.max(o,s,u,h),Math.max(a,l,c,d),n)}function $t(t){return t[3]-t[1]}function qi(t,e,i){const r=i||[1/0,1/0,-1/0,-1/0];return Qt(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):zs(r),r}function pr(t){return[t[0],t[3]]}function vd(t){return[t[2],t[3]]}function tt(t){return t[2]-t[0]}function Qt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function va(t){return t[2]<t[0]||t[3]<t[1]}function bx(t,e,i,r){if(va(t))return zs(i);let n=[];n=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(n,n,2);const o=[],a=[];for(let s=0,l=n.length;s<l;s+=2)o.push(n[s]),a.push(n[s+1]);return function(s,l,u){return an(Math.min.apply(null,s),Math.min.apply(null,l),Math.max.apply(null,s),Math.max.apply(null,l),u)}(o,a,i)}function xx(t,e){const i=e.getExtent(),r=Ui(t);if(e.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){const n=tt(i),o=Math.floor((r[0]-i[0])/n)*n;t[0]-=o,t[2]-=o}return t}function ev(t,e,i){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];xx(t,e);const n=tt(r);if(tt(t)>n&&!i)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+n,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-n,t[3]]]}return[t]}function wh(t,e){let i=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){i=!1;break}return i}function tv(t,e){const i=Math.cos(e),r=Math.sin(e),n=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=n,t[1]=o,t}function wx(t,e){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function ly(t,e){return Math.sqrt(wx(t,e))}function uy(t,e){return function(i,r,n){return i?r.replace("{x}",i[0].toFixed(n)).replace("{y}",i[1].toFixed(n)):""}(t,"{x}, {y}",e)}function iv(t,e){if(e.canWrapX()){const i=tt(e.getExtent()),r=Sx(t,e,i);r&&(t[0]-=r*i)}return t}function Sx(t,e,i){const r=e.getExtent();let n=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(i=i||tt(r),n=Math.floor((t[0]-r[0])/i)),n}const rv=63710088e-1;function Jl(t,e,i){i=i||rv;const r=Pr(t[1]),n=Pr(e[1]),o=(n-r)/2,a=Pr(e[0]-t[0])/2,s=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(n);return 2*i*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}function ip(t,e){let i=0;for(let r=0,n=t.length;r<n-1;++r)i+=Jl(t[r],t[r+1],e);return i}function Cx(t,e){const i=(e=e||{}).radius||rv,r=e.projection||"EPSG:3857",n=t.getType();n!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let o,a,s,l,u,c,h=0;switch(n){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=t.getCoordinates(),h=ip(o,i);break;case"MultiLineString":case"Polygon":for(o=t.getCoordinates(),s=0,l=o.length;s<l;++s)h+=ip(o[s],i);break;case"MultiPolygon":for(o=t.getCoordinates(),s=0,l=o.length;s<l;++s)for(a=o[s],u=0,c=a.length;u<c;++u)h+=ip(a[u],i);break;case"GeometryCollection":{const d=t.getGeometries();for(s=0,l=d.length;s<l;++s)h+=Cx(d[s],e);break}default:throw new Error("Unsupported geometry type: "+n)}return h}function Xu(t,e){let i=0;const r=t.length;let n=t[r-1][0],o=t[r-1][1];for(let a=0;a<r;a++){const s=t[a][0],l=t[a][1];i+=Pr(s-n)*(2+Math.sin(Pr(o))+Math.sin(Pr(l))),n=s,o=l}return i*e*e/2}function Mx(t,e){const i=(e=e||{}).radius||rv,r=e.projection||"EPSG:3857",n=t.getType();n!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let o,a,s,l,u,c,h=0;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=t.getCoordinates(),h=Math.abs(Xu(o[0],i)),s=1,l=o.length;s<l;++s)h-=Math.abs(Xu(o[s],i));break;case"MultiPolygon":for(o=t.getCoordinates(),s=0,l=o.length;s<l;++s)for(a=o[s],h+=Math.abs(Xu(a[0],i)),u=1,c=a.length;u<c;++u)h-=Math.abs(Xu(a[u],i));break;case"GeometryCollection":{const d=t.getGeometries();for(s=0,l=d.length;s<l;++s)h+=Mx(d[s],e);break}default:throw new Error("Unsupported geometry type: "+n)}return h}const Sh=.9996,Jr=.00669438,kx=Jr*Jr,Tx=kx*Jr,$o=Jr/(1-Jr),cy=Math.sqrt(1-Jr),Ss=(1-cy)/(1+cy),Ex=Ss*Ss,nv=Ex*Ss,ov=nv*Ss,Lx=ov*Ss,Ix=.9983242984503243,YM=15*kx/256+45*Tx/1024,KM=35*Tx/3072,XM=1.5*Ss-27/32*nv+269/512*Lx,ZM=21/16*Ex-55/32*ov,QM=151/96*nv-417/128*Lx,JM=1097/512*ov,Ch=6378137;function e5(t,e,i){const r=t-5e5,n=(i.north?e:e-1e7)/Sh/(Ch*Ix),o=n+XM*Math.sin(2*n)+ZM*Math.sin(4*n)+QM*Math.sin(6*n)+JM*Math.sin(8*n),a=Math.sin(o),s=a*a,l=Math.cos(o),u=a/l,c=u*u,h=c*c,d=1-Jr*s,p=Math.sqrt(1-Jr*s),f=$o*l**2,g=f*f,_=r/(Ch/p*Sh),v=_*_,b=v*_,m=b*_,y=m*_,x=o-u/((1-Jr)/d)*(v/2-m/24*(5+3*c+10*f-4*g-9*$o))+y*_/720*(61+90*c+298*f+45*h-252*$o-3*g);let C=(_-b/6*(1+2*c+f)+y/120*(5-2*f+28*c-3*g+8*$o+24*h))/l;return C=Df(C+Pr(Px(i.number)),-Math.PI,Math.PI),[iy(C),iy(x)]}function t5(t,e,i){t=Df(t,-180,180),e<-80?e=-80:e>84&&(e=84);const r=Pr(e),n=Math.sin(r),o=Math.cos(r),a=n/o,s=a*a,l=s*s,u=Pr(t),c=Pr(Px(i.number)),h=Ch/Math.sqrt(1-Jr*n**2),d=$o*o**2,p=o*Df(u-c,-Math.PI,Math.PI),f=p*p,g=f*p,_=g*p,v=_*p,b=v*p,m=Ch*(Ix*r-.002514607064228144*Math.sin(2*r)+YM*Math.sin(4*r)-KM*Math.sin(6*r)),y=Sh*h*(p+g/6*(1-s+d)+v/120*(5-18*s+l+72*d-58*$o))+5e5;let x=Sh*(m+h*a*(f/2+_/24*(5-s+9*d+4*d**2)+b/720*(61-58*s+l+600*d-330*$o)));return i.north||(x+=1e7),[y,x]}function Px(t){return 6*(t-1)-180+3}const i5=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Rx(t){let e=0;for(const n of i5){const o=t.match(n);if(o){e=parseInt(o[1]);break}}if(!e)return null;let i=0,r=!1;return e>32700&&e<32761?i=e-32700:e>32600&&e<32661&&(r=!0,i=e-32600),i?{number:i,north:r}:null}function hy(t,e){return function(i,r,n,o){const a=i.length;n=n>1?n:2,o=o??n,r||(r=n>2?i.slice():new Array(a));for(let s=0;s<a;s+=o){const l=i[s],u=i[s+1],c=t(l,u,e);r[s]=c[0],r[s+1]=c[1]}return r}}function qx(...t){}const r5=[function(t){const e=Rx(t.getCode());return e?{forward:hy(t5,e),inverse:hy(e5,e)}:null}],n5=[function(t){return Rx(t)?new Qr({code:t,units:"m"}):null}];let Wf=!0;function Ax(t){Wf=t!==void 0}function av(t,e){if(e!==void 0)for(let i=0,r=t.length;i<r;++i)e[i]=t[i];else e=t.slice();return e}function eu(t){(function(e,i){Nf[e]=i})(t.getCode(),t),oa(t,t,av)}function ut(t){if(typeof t!="string")return t;const e=Zc(t);if(e)return e;for(const i of n5){const r=i(t);if(r)return r}return null}function tu(t,e,i,r){let n;const o=(t=ut(t)).getPointResolutionFunc();if(o){if(n=o(e,i),r&&r!==t.getUnits()){const a=t.getMetersPerUnit();a&&(n=n*a/kn[r])}}else{const a=t.getUnits();if(a=="degrees"&&!r||r=="degrees")n=e;else{const s=qu(t,ut("EPSG:4326"));if(s||a==="degrees"){let u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];u=s(u,u,2),n=(Jl(u.slice(0,2),u.slice(2,4))+Jl(u.slice(4,6),u.slice(6,8)))/2}else n=e*t.getMetersPerUnit();const l=r?kn[r]:t.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function Yf(t){(function(e){e.forEach(eu)})(t),t.forEach(function(e){t.forEach(function(i){e!==i&&oa(e,i,av)})})}function rp(t,e){return t?typeof t=="string"?ut(t):t:ut(e)}function Kf(t){return function(e,i,r,n){const o=e.length;r=r!==void 0?r:2,n=n??r,i=i!==void 0?i:new Array(o);for(let a=0;a<o;a+=n){const s=t(e.slice(a,a+r)),l=s.length;for(let u=0,c=n;u<c;++u)i[a+u]=u>=l?e[a+u]:s[u]}return i}}function o5(t,e,i,r){const n=ut(t),o=ut(e);oa(n,o,Kf(i)),oa(o,n,Kf(r))}function Xf(t,e){return Ax(),Kn(t,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function en(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||qu(t,e)===av)&&i}function qu(t,e){const i=t.getCode(),r=e.getCode();let n=Qc(i,r);if(n)return n;let o=null,a=null;for(const l of r5)o||(o=l(t)),a||(a=l(e));if(!o&&!a)return null;const s="EPSG:4326";if(a)if(o)n=np(o.inverse,a.forward);else{const l=Qc(i,s);l&&(n=np(l,a.forward))}else{const l=Qc(s,r);l&&(n=np(o.inverse,l))}return n&&(eu(t),eu(e),oa(t,e,n)),n}function np(t,e){return function(i,r,n,o){return r=t(i,r,n,o),e(r,r,n,o)}}function Cs(t,e){return qu(ut(t),ut(e))}function Kn(t,e,i){const r=Cs(e,i);if(!r){const n=ut(e).getCode(),o=ut(i).getCode();throw new Error(`No transform available between ${n} and ${o}`)}return r(t,void 0,t.length)}function Zf(t,e){return t}function Sr(t,e){return Wf&&!wh(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Wf=!1,qx("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function sv(t,e){return t}function Wr(t,e){return t}function dy(t,e,i){return function(r){let n,o;if(t.canWrapX()){const a=t.getExtent(),s=tt(a);o=Sx(r=r.slice(0),t,s),o&&(r[0]=r[0]-o*s),r[0]=Nt(r[0],a[0],a[2]),r[1]=Nt(r[1],a[1],a[3]),n=i(r)}else n=i(r);return o&&e.canWrapX()&&(n[0]+=o*tt(e.getExtent())),n}}var py,fy,gy;function my(t,e,i){return function(r,n,o,a,s){if(!r)return;if(!n&&!e)return r;const l=e?0:o[0]*n,u=e?0:o[1]*n,c=s?s[0]:0,h=s?s[1]:0;let d=t[0]+l/2+c,p=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let _=Nt(r[0],d,p),v=Nt(r[1],f,g);if(a&&i&&n){const b=30*n;_+=-b*Math.log(1+Math.max(0,d-r[0])/b)+b*Math.log(1+Math.max(0,r[0]-p)/b),v+=-b*Math.log(1+Math.max(0,f-r[1])/b)+b*Math.log(1+Math.max(0,r[1]-g)/b)}return[_,v]}}function a5(t){return t}function Qf(t,e,i,r){const n=tt(e)/i[0],o=$t(e)/i[1];return r?Math.min(t,Math.max(n,o)):Math.min(t,Math.min(n,o))}function Jf(t,e,i){let r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),Nt(r,i/2,2*e)}function vy(t,e,i,r,n){return i=i===void 0||i,function(o,a,s,l){if(o!==void 0){const u=r?Qf(t,r,s,n):t;return i&&l?Jf(o,u,e):Nt(o,e,u)}}}function lv(t){if(t!==void 0)return 0}function yy(t){if(t!==void 0)return t}function Fx(t){return Math.pow(t,3)}function Ds(t){return 1-Fx(1-t)}function s5(t){return 3*t*t-2*t*t*t}function l5(t){return t}Yf(ny),Yf(ay),py=ny,fy=$M,gy=VM,ay.forEach(function(t){py.forEach(function(e){oa(t,e,fy),oa(e,t,gy)})});const Ox=new Array(6);function _y(t){return uv(t,1,0,0,1,0,0)}function Mh(t,e){const i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],p=e[5];return t[0]=i*l+n*u,t[1]=r*l+o*u,t[2]=i*c+n*h,t[3]=r*c+o*h,t[4]=i*d+n*p+a,t[5]=r*d+o*p+s,t}function uv(t,e,i,r,n,o,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t}function ri(t,e){const i=e[0],r=e[1];return e[0]=t[0]*i+t[2]*r+t[4],e[1]=t[1]*i+t[3]*r+t[5],e}function op(t,e,i){return Mh(t,uv(Ox,e,0,0,i,0,0))}function sn(t,e,i,r,n,o,a,s){const l=Math.sin(o),u=Math.cos(o);return t[0]=r*u,t[1]=n*l,t[2]=-r*l,t[3]=n*u,t[4]=a*r*u-s*r*l+e,t[5]=a*n*l+s*n*u+i,t}function zx(t,e){const i=(r=e)[0]*r[3]-r[1]*r[2];var r;xt(i!==0,"Transformation matrix cannot be inverted");const n=e[0],o=e[1],a=e[2],s=e[3],l=e[4],u=e[5];return t[0]=s/i,t[1]=-o/i,t[2]=-a/i,t[3]=n/i,t[4]=(a*u-s*l)/i,t[5]=-(n*u-o*l)/i,t}const by=[1e6,1e6,1e6,1e6,2,2];function Xn(t,e,i,r,n,o,a){o=o||[],a=a||2;let s=0;for(let l=e;l<i;l+=r){const u=t[l],c=t[l+1];o[s++]=n[0]*u+n[2]*c+n[4],o[s++]=n[1]*u+n[3]*c+n[5];for(let h=2;h<a;h++)o[s++]=t[l+h]}return o&&o.length!=s&&(o.length=s),o}function cv(t,e,i,r,n,o,a){a=a||[];const s=Math.cos(n),l=Math.sin(n),u=o[0],c=o[1];let h=0;for(let d=e;d<i;d+=r){const p=t[d]-u,f=t[d+1]-c;a[h++]=u+p*s-f*l,a[h++]=c+p*l+f*s;for(let g=d+2;g<d+r;++g)a[h++]=t[g]}return a&&a.length!=h&&(a.length=h),a}const xy=[1,0,0,1,0,0];class Dx extends yr{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=px((e,i,r)=>{if(!r)return this.getSimplifiedGeometry(i);const n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(i)})}simplifyTransformed(e,i){return this.simplifyTransformedInternal(this.getRevision(),e,i)}clone(){return Ye()}closestPointXY(e,i,r,n){return Ye()}containsXY(e,i){const r=this.getClosestPoint([e,i]);return r[0]===e&&r[1]===i}getClosestPoint(e,i){return i=i||[NaN,NaN],this.closestPointXY(e[0],e[1],i,1/0),i}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ye()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&zs(i),this.extentRevision_=this.getRevision()}return function(i,r){return r?(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r):i}(this.extent_,e)}rotate(e,i){Ye()}scale(e,i,r){Ye()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ye()}getType(){return Ye()}applyTransform(e){Ye()}intersectsExtent(e){return Ye()}translate(e,i){Ye()}transform(e,i){const r=ut(e),n=r.getUnits()=="tile-pixels"?function(o,a,s){const l=r.getExtent(),u=r.getWorldExtent(),c=$t(u)/$t(l);sn(xy,u[0],u[3],c,-c,0,0,0);const h=Xn(o,0,o.length,s,xy,a),d=Cs(r,i);return d?d(h,h,s):h}:Cs(r,i);return this.applyTransform(n),this}}class _o extends Dx{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Zm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ye()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(e);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,i){this.stride=kh(e),this.layout=e,this.flatCoordinates=i}setCoordinates(e,i){Ye()}setLayout(e,i,r){let n;if(e)n=kh(e);else{for(let o=0;o<r;++o){if(i.length===0)return this.layout="XY",void(this.stride=2);i=i[0]}n=i.length,e=Ao(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,i){const r=this.getFlatCoordinates();if(r){const n=this.getStride();cv(r,0,r.length,n,e,i,r),this.changed()}}scale(e,i,r){i===void 0&&(i=e),r||(r=Ui(this.getExtent()));const n=this.getFlatCoordinates();if(n){const o=this.getStride();(function(a,s,l,u,c,h,d,p){p=p||[];const f=d[0],g=d[1];let _=0;for(let v=s;v<l;v+=u){const b=a[v]-f,m=a[v+1]-g;p[_++]=f+c*b,p[_++]=g+h*m;for(let y=v+2;y<v+u;++y)p[_++]=a[y]}p&&p.length!=_&&(p.length=_)})(n,0,n.length,o,e,i,r,n),this.changed()}}translate(e,i){const r=this.getFlatCoordinates();if(r){const n=this.getStride();(function(o,a,s,l,u,c,h){h=h||[];let d=0;for(let p=a;p<s;p+=l){h[d++]=o[p]+u,h[d++]=o[p+1]+c;for(let f=p+2;f<p+l;++f)h[d++]=o[f]}h&&h.length!=d&&(h.length=d)})(r,0,r.length,n,e,i,r),this.changed()}}}function Ao(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function kh(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function wy(t,e,i,r,n,o,a){const s=t[e],l=t[e+1],u=t[i]-s,c=t[i+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((n-s)*u+(o-l)*c)/(u*u+c*c);if(d>1)h=i;else{if(d>0){for(let p=0;p<r;++p)a[p]=Zi(t[e+p],t[i+p],d);return void(a.length=r)}h=e}}for(let d=0;d<r;++d)a[d]=t[h+d];a.length=r}function hv(t,e,i,r,n){let o=t[e],a=t[e+1];for(e+=r;e<i;e+=r){const s=t[e],l=t[e+1],u=wn(o,a,s,l);u>n&&(n=u),o=s,a=l}return n}function dv(t,e,i,r,n){for(let o=0,a=i.length;o<a;++o){const s=i[o];n=hv(t,e,s,r,n),e=s}return n}function pv(t,e,i,r,n,o,a,s,l,u,c){if(e==i)return u;let h,d;if(n===0){if(d=wn(a,s,t[e],t[e+1]),d<u){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,d}return u}c=c||[NaN,NaN];let p=e+r;for(;p<i;)if(wy(t,p-r,p,r,a,s,c),d=wn(a,s,c[0],c[1]),d<u){for(u=d,h=0;h<r;++h)l[h]=c[h];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(d)-Math.sqrt(u))/n|0,1);if(o&&(wy(t,i-r,e,r,a,s,c),d=wn(a,s,c[0],c[1]),d<u)){for(u=d,h=0;h<r;++h)l[h]=c[h];l.length=r}return u}function fv(t,e,i,r,n,o,a,s,l,u,c){c=c||[NaN,NaN];for(let h=0,d=i.length;h<d;++h){const p=i[h];u=pv(t,e,p,r,n,o,a,s,l,u,c),e=p}return u}function Bx(t,e,i,r){for(let n=0,o=i.length;n<o;++n)t[e++]=i[n];return e}function yd(t,e,i,r){for(let n=0,o=i.length;n<o;++n){const a=i[n];for(let s=0;s<r;++s)t[e++]=a[s]}return e}function iu(t,e,i,r,n){n=n||[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=yd(t,e,i[a],r);n[o++]=l,e=l}return n.length=o,n}function jx(t,e,i,r,n){n=n||[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=iu(t,e,i[a],r,n[o]);l.length===0&&(l[0]=e),n[o++]=l,e=l[l.length-1]}return n.length=o,n}function _d(t,e,i,r,n,o,a){const s=(i-e)/r;if(s<3){for(;e<i;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}const l=new Array(s);l[0]=1,l[s-1]=1;const u=[e,i-r];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let p=0;const f=t[d],g=t[d+1],_=t[h],v=t[h+1];for(let b=d+r;b<h;b+=r){const m=DM(t[b],t[b+1],f,g,_,v);m>p&&(c=b,p=m)}p>n&&(l[(c-e)/r]=1,d+r<c&&u.push(d,c),c+r<h&&u.push(c,h))}for(let h=0;h<s;++h)l[h]&&(o[a++]=t[e+h*r],o[a++]=t[e+h*r+1]);return a}function Nx(t,e,i,r,n,o,a,s){for(let l=0,u=i.length;l<u;++l){const c=i[l];a=_d(t,e,c,r,n,o,a),s.push(a),e=c}return a}function Fo(t,e){return e*Math.round(t/e)}function u5(t,e,i,r,n,o,a){if(e==i)return a;let s,l,u=Fo(t[e],n),c=Fo(t[e+1],n);e+=r,o[a++]=u,o[a++]=c;do if(s=Fo(t[e],n),l=Fo(t[e+1],n),(e+=r)==i)return o[a++]=s,o[a++]=l,a;while(s==u&&l==c);for(;e<i;){const h=Fo(t[e],n),d=Fo(t[e+1],n);if(e+=r,h==s&&d==l)continue;const p=s-u,f=l-c,g=h-u,_=d-c;p*_==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&_<f||f==_||f>0&&_>f)?(s=h,l=d):(o[a++]=s,o[a++]=l,u=s,c=l,s=h,l=d)}return o[a++]=s,o[a++]=l,a}function gv(t,e,i,r,n,o,a,s){for(let l=0,u=i.length;l<u;++l){const c=i[l];a=u5(t,e,c,r,n,o,a),s.push(a),e=c}return a}function Zn(t,e,i,r,n){n=n!==void 0?n:[];let o=0;for(let a=e;a<i;a+=r)n[o++]=t.slice(a,a+r);return n.length=o,n}function ru(t,e,i,r,n){n=n!==void 0?n:[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=i[a];n[o++]=Zn(t,e,l,r,n[o]),e=l}return n.length=o,n}function eg(t,e,i,r,n){n=n!==void 0?n:[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=i[a];n[o++]=l.length===1&&l[0]===e?[]:ru(t,e,l,r,n[o]),e=l[l.length-1]}return n.length=o,n}function $x(t,e,i,r){let n=0;const o=t[i-r],a=t[i-r+1];let s=0,l=0;for(;e<i;e+=r){const u=t[e]-o,c=t[e+1]-a;n+=l*u-s*c,s=u,l=c}return n/2}function Vx(t,e,i,r){let n=0;for(let o=0,a=i.length;o<a;++o){const s=i[o];n+=$x(t,e,s,r),e=s}return n}class nu extends _o{constructor(e,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i===void 0||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}clone(){return new nu(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,i,r,n){return n<ma(this.getExtent(),e,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,i,r,n))}getArea(){return $x(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const i=[];return i.length=_d(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new nu(i,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yd(this.flatCoordinates,0,e,this.stride),this.changed()}}class hr extends _o{constructor(e,i){super(),this.setCoordinates(e,i)}clone(){const e=new hr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,r,n){const o=this.flatCoordinates,a=wn(e,i,o[0],o[1]);if(a<n){const s=this.stride;for(let l=0;l<s;++l)r[l]=o[l];return r.length=s,a}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return yx(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Xm(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bx(this.flatCoordinates,0,e,this.stride),this.changed()}}function c5(t,e,i,r,n){return!Jm(n,function(o){return!Vo(t,e,i,r,o[0],o[1])})}function Vo(t,e,i,r,n,o){let a=0,s=t[i-r],l=t[i-r+1];for(;e<i;e+=r){const u=t[e],c=t[e+1];l<=o?c>o&&(u-s)*(o-l)-(n-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(n-s)*(c-l)<0&&a--,s=u,l=c}return a!==0}function mv(t,e,i,r,n,o){if(i.length===0||!Vo(t,e,i[0],r,n,o))return!1;for(let a=1,s=i.length;a<s;++a)if(Vo(t,i[a-1],i[a],r,n,o))return!1;return!0}function vv(t,e,i,r,n,o,a){let s,l,u,c,h,d,p;const f=n[o+1],g=[];for(let b=0,m=i.length;b<m;++b){const y=i[b];for(c=t[y-r],d=t[y-r+1],s=e;s<y;s+=r)h=t[s],p=t[s+1],(f<=d&&p<=f||d<=f&&f<=p)&&(u=(f-d)/(p-d)*(h-c)+c,g.push(u)),c=h,d=p}let _=NaN,v=-1/0;for(g.sort(Xr),c=g[0],s=1,l=g.length;s<l;++s){h=g[s];const b=Math.abs(h-c);b>v&&(u=(c+h)/2,mv(t,e,i,r,u,f)&&(_=u,v=b)),c=h}return isNaN(_)&&(_=n[o]),a?(a.push(_,f,v),a):[_,f,v]}function Gx(t,e,i,r,n){let o=[];for(let a=0,s=i.length;a<s;++a){const l=i[a];o=vv(t,e,l,r,n,2*a,o),e=l[l.length-1]}return o}function Hx(t,e,i,r,n){let o;for(e+=r;e<i;e+=r)if(o=n(t.slice(e-r,e),t.slice(e,e+r)),o)return o;return!1}function bd(t,e,i,r,n){const o=_x([1/0,1/0,-1/0,-1/0],t,e,i,r);return!!Qt(n,o)&&(!!Lr(n,o)||o[0]>=n[0]&&o[2]<=n[2]||o[1]>=n[1]&&o[3]<=n[3]||Hx(t,e,i,r,function(a,s){return function(l,u,c){let h=!1;const d=Uf(l,u),p=Uf(l,c);if(d===_h||p===_h)h=!0;else{const f=l[0],g=l[1],_=l[2],v=l[3],b=u[0],m=u[1],y=c[0],x=c[1],C=(x-m)/(y-b);let k,L;p&$f&&!(d&$f)&&(k=y-(x-v)/C,h=k>=f&&k<=_),h||!(p&Vf)||d&Vf||(L=x-(y-_)*C,h=L>=g&&L<=v),h||!(p&Gf)||d&Gf||(k=y-(x-g)/C,h=k>=f&&k<=_),h||!(p&Hf)||d&Hf||(L=x-(y-f)*C,h=L>=g&&L<=v)}return h}(n,a,s)}))}function Ux(t,e,i,r,n){return!!bd(t,e,i,r,n)||!!Vo(t,e,i,r,n[0],n[1])||!!Vo(t,e,i,r,n[0],n[3])||!!Vo(t,e,i,r,n[2],n[1])||!!Vo(t,e,i,r,n[2],n[3])}function Wx(t,e,i,r,n){if(!Ux(t,e,i[0],r,n))return!1;if(i.length===1)return!0;for(let o=1,a=i.length;o<a;++o)if(c5(t,i[o-1],i[o],r,n)&&!bd(t,i[o-1],i[o],r,n))return!1;return!0}function h5(t,e,i,r){for(;e<i-r;){for(let n=0;n<r;++n){const o=t[e+n];t[e+n]=t[i-r+n],t[i-r+n]=o}e+=r,i-=r}}function yv(t,e,i,r){let n=0,o=t[i-r],a=t[i-r+1];for(;e<i;e+=r){const s=t[e],l=t[e+1];n+=(s-o)*(l+a),o=s,a=l}return n===0?void 0:n>0}function _v(t,e,i,r,n){n=n!==void 0&&n;for(let o=0,a=i.length;o<a;++o){const s=i[o],l=yv(t,e,s,r);if(o===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;e=s}return!0}function Yx(t,e,i,r,n){for(let o=0,a=i.length;o<a;++o){const s=i[o];if(!_v(t,e,s,r,n))return!1;s.length&&(e=s[s.length-1])}return!0}function Th(t,e,i,r,n){n=n!==void 0&&n;for(let o=0,a=i.length;o<a;++o){const s=i[o],l=yv(t,e,s,r);(o===0?n&&l||!n&&!l:n&&!l||!n&&l)&&h5(t,e,s,r),e=s}return e}function tg(t,e,i,r,n){for(let o=0,a=i.length;o<a;++o)e=Th(t,e,i[o],r,n);return e}function Kx(t,e){const i=[];let r,n=0,o=0;for(let a=0,s=e.length;a<s;++a){const l=e[a],u=yv(t,n,l,2);if(r===void 0&&(r=u),u===r)i.push(e.slice(o,a+1));else{if(i.length===0)continue;i[i.length-1].push(e[o])}o=a+1,n=l}return i}class Wi extends _o{constructor(e,i,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&r?(this.setFlatCoordinates(i,e),this.ends_=r):this.setCoordinates(e,i)}appendLinearRing(e){this.flatCoordinates?Zr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Wi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,i,r,n){return n<ma(this.getExtent(),e,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dv(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,i,r,n))}containsXY(e,i){return mv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,i)}getArea(){return Vx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let i;return e!==void 0?(i=this.getOrientedFlatCoordinates().slice(),Th(i,0,this.ends_,this.stride,e)):i=this.flatCoordinates,ru(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ui(this.getExtent());this.flatInteriorPoint_=vv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new hr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new nu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,i=this.flatCoordinates,r=this.ends_,n=[];let o=0;for(let a=0,s=r.length;a<s;++a){const l=r[a],u=new nu(i.slice(o,l),e);n.push(u),o=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;_v(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Th(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const i=[],r=[];return i.length=gv(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),i,0,r),new Wi(i,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Wx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=iu(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function Sy(t){if(va(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],i=t[1],r=t[2],n=t[3],o=[e,i,e,n,r,n,r,i,e,i];return new Wi(o,"XY",[o.length])}class Ki extends yr{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rp(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Ax(),e.center&&(e.center=Sr(e.center,this.projection_)),e.extent&&(e.extent=Wr(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const i=Object.assign({},e);for(const s in br)delete i[s];this.setProperties(i,!0);const r=function(s){let l,u,c,h=s.minZoom!==void 0?s.minZoom:0,d=s.maxZoom!==void 0?s.maxZoom:28;const p=s.zoomFactor!==void 0?s.zoomFactor:2,f=s.multiWorld!==void 0&&s.multiWorld,g=s.smoothResolutionConstraint===void 0||s.smoothResolutionConstraint,_=s.showFullExtent!==void 0&&s.showFullExtent,v=rp(s.projection,"EPSG:3857"),b=v.getExtent();let m=s.constrainOnlyCenter,y=s.extent;if(f||y||!v.isGlobal()||(m=!1,y=b),s.resolutions!==void 0){const x=s.resolutions;u=x[h],c=x[d]!==void 0?x[d]:x[x.length-1],l=s.constrainResolution?function(C,k,L,A){return k=k===void 0||k,function(E,I,T,R){if(E!==void 0){const M=C[0],q=C[C.length-1],P=L?Qf(M,L,T,A):M;if(R)return k?Jf(E,P,q):Nt(E,q,P);const F=Math.min(P,E),j=Math.floor(mh(C,F,I));return C[j]>P&&j<C.length-1?C[j+1]:C[j]}}}(x,g,!m&&y,_):vy(u,c,g,!m&&y,_)}else{const x=(b?Math.max(tt(b),$t(b)):360*kn.degrees/v.getMetersPerUnit())/Km/Math.pow(2,0),C=x/Math.pow(2,28);u=s.maxResolution,u!==void 0?h=0:u=x/Math.pow(p,h),c=s.minResolution,c===void 0&&(c=s.maxZoom!==void 0?s.maxResolution!==void 0?u/Math.pow(p,d):x/Math.pow(p,d):C),d=h+Math.floor(Math.log(u/c)/Math.log(p)),c=u/Math.pow(p,d-h),l=s.constrainResolution?function(k,L,A,E,I,T){return E=E===void 0||E,A=A!==void 0?A:0,function(R,M,q,P){if(R!==void 0){const F=I?Qf(L,I,q,T):L;if(P)return E?Jf(R,F,A):Nt(R,A,F);const j=1e-9,V=Math.ceil(Math.log(L/F)/Math.log(k)-j),O=-M*(.5-j)+.5,$=Math.min(F,R),J=Math.floor(Math.log(L/$)/Math.log(k)+O),te=Math.max(V,J);return Nt(L/Math.pow(k,te),A,F)}}}(p,u,c,g,!m&&y,_):vy(u,c,g,!m&&y,_)}return{constraint:l,maxResolution:u,minResolution:c,minZoom:h,zoomFactor:p}}(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const n=function(s){if(s.extent!==void 0){const u=s.smoothExtentConstraint===void 0||s.smoothExtentConstraint;return my(s.extent,s.constrainOnlyCenter,u)}const l=rp(s.projection,"EPSG:3857");if(s.multiWorld!==!0&&l.isGlobal()){const u=l.getExtent().slice();return u[0]=-1/0,u[2]=1/0,my(u,!1,!1)}return a5}(e),o=r.constraint,a=function(s){if(s.enableRotation===void 0||s.enableRotation){const l=s.constrainRotation;return l===void 0||l===!0?function(u){const c=Pr(5);return function(h,d){return d||h===void 0?h:Math.abs(h)<=c?0:h}}():l===!1?yy:typeof l=="number"?function(u){const c=2*Math.PI/u;return function(h,d){return d?h:h!==void 0?h=Math.floor(h/c+.5)*c:void 0}}(l):yy}return lv}(e);this.constraints_={center:n,resolution:o,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let i=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const n=e||[0,0,0,0];i=i||[0,0,0,0];const o=this.getResolution(),a=o/2*(n[3]-i[3]+i[1]-n[1]),s=o/2*(n[0]-i[0]+i[2]-n[2]);this.setCenterInternal([r[0]+a,r[1]-s])}}getUpdatedOptions_(e){const i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const i=new Array(arguments.length);for(let r=0;r<i.length;++r){let n=arguments[r];n.center&&(n=Object.assign({},n),n.center=Sr(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=Sr(n.anchor,this.getProjection())),i[r]=n}this.animateInternal.apply(this,i)}animateInternal(e){let i,r=arguments.length;r>1&&typeof arguments[r-1]=="function"&&(i=arguments[r-1],--r);let n=0;for(;n<r&&!this.isDef();++n){const c=arguments[n];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(n===r)return void(i&&Zu(i,!0));let o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,l=this.targetRotation_;const u=[];for(;n<r;++n){const c=arguments[n],h={start:o,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||s5,callback:i};if(c.center&&(h.sourceCenter=a,h.targetCenter=c.center.slice(),a=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=s,h.targetResolution=this.getResolutionForZoom(c.zoom),s=h.targetResolution):c.resolution&&(h.sourceResolution=s,h.targetResolution=c.resolution,s=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=no(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}d5(h)?h.complete=!0:o+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Ji,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ji]>0}getInteracting(){return this.hints_[Rr]>0}cancelAnimations(){let e;this.setHint(Ji,-this.hints_[Ji]);for(let i=0,r=this.animations_.length;i<r;++i){const n=this.animations_[i];if(n[0].callback&&Zu(n[0].callback,!1),!e)for(let o=0,a=n.length;o<a;++o){const s=n[o];if(!s.complete){e=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let i=!1;for(let r=this.animations_.length-1;r>=0;--r){const n=this.animations_[r];let o=!0;for(let a=0,s=n.length;a<s;++a){const l=n[a];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):o=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],p=l.sourceCenter[1],f=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=d+h*(f-d),v=p+h*(g-p);this.targetCenter_=[_,v]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(f,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?no(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),i=!0,!l.complete)break}if(o){this.animations_[r]=null,this.setHint(Ji,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=n[0].callback;a&&Zu(a,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,i){let r;const n=this.getCenterInternal();var o,a;return n!==void 0&&(r=[n[0]-i[0],n[1]-i[1]],tv(r,e-this.getRotation()),a=i,(o=r)[0]+=+a[0],o[1]+=+a[1]),r}calculateCenterZoom(e,i){let r;const n=this.getCenterInternal(),o=this.getResolution();return n!==void 0&&o!==void 0&&(r=[i[0]-e*(i[0]-n[0])/o,i[1]-e*(i[1]-n[1])/o]),r}getViewportSize_(e){const i=this.viewportSize_;if(e){const r=i[0],n=i[1];return[Math.abs(r*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(n*Math.cos(e))]}return i}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Zf(e,this.getProjection())}getCenterInternal(){return this.get(br.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return sv(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const i=this.getCenterInternal();xt(i,"The view center is not defined");const r=this.getResolution();xt(r!==void 0,"The view resolution is not defined");const n=this.getRotation();return xt(n!==void 0,"The view rotation is not defined"),xh(i,r,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(br.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,i){return this.getResolutionForExtentInternal(Wr(e,this.getProjection()),i)}getResolutionForExtentInternal(e,i){i=i||this.getViewportSizeMinusPadding_();const r=tt(e)/i[0],n=$t(e)/i[1];return Math.max(r,n)}getResolutionForValueFunction(e){e=e||2;const i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(o){return i/Math.pow(e,o*n)}}getRotation(){return this.get(br.ROTATION)}getValueForResolutionFunction(e){const i=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(r/n)/i;return function(a){return Math.log(r/a)/i/o}}getViewportSizeMinusPadding_(e){let i=this.getViewportSize_(e);const r=this.padding_;return r&&(i=[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]),i}getState(){const e=this.getProjection(),i=this.getResolution(),r=this.getRotation();let n=this.getCenterInternal();const o=this.padding_;if(o){const a=this.getViewportSizeMinusPadding_();n=ap(n,this.getViewportSize_(),[a[0]/2+o[3],a[1]/2+o[0]],i,r)}return{center:n.slice(0),projection:e!==void 0?e:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const i=this.getResolution();return i!==void 0&&(e=this.getZoomForResolution(i)),e}getZoomForResolution(e){let i,r,n=this.minZoom_||0;if(this.resolutions_){const o=mh(this.resolutions_,e,1);n=o,i=this.resolutions_[o],r=o==this.resolutions_.length-1?2:i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Nt(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,Nt(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,i){let r;if(xt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e))xt(!va(e),"Cannot fit empty extent provided as `geometry`"),r=Sy(Wr(e,this.getProjection()));else if(e.getType()==="Circle"){const n=Wr(e.getExtent(),this.getProjection());r=Sy(n),r.rotate(this.getRotation(),Ui(n))}else r=e;this.fitInternal(r,i)}rotatedExtentForGeometry(e){const i=this.getRotation(),r=Math.cos(i),n=Math.sin(-i),o=e.getFlatCoordinates(),a=e.getStride();let s=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=o.length;h<d;h+=a){const p=o[h]*r-o[h+1]*n,f=o[h]*n+o[h+1]*r;s=Math.min(s,p),l=Math.min(l,f),u=Math.max(u,p),c=Math.max(c,f)}return[s,l,u,c]}fitInternal(e,i){let r=(i=i||{}).size;r||(r=this.getViewportSizeMinusPadding_());const n=i.padding!==void 0?i.padding:[0,0,0,0],o=i.nearest!==void 0&&i.nearest;let a;a=i.minResolution!==void 0?i.minResolution:i.maxZoom!==void 0?this.getResolutionForZoom(i.maxZoom):0;const s=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(s,[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,o?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=Ui(s);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;const p=d[0]*h-d[1]*c,f=d[1]*h+d[0]*c,g=this.getConstrainedCenter([p,f],l),_=i.callback?i.callback:ws;i.duration!==void 0?this.animateInternal({resolution:l,center:g,duration:i.duration,easing:i.easing},_):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),Zu(_,!0))}centerOn(e,i,r){this.centerOnInternal(Sr(e,this.getProjection()),i,r)}centerOnInternal(e,i,r){this.setCenterInternal(ap(e,i,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,i,r,n){let o;const a=this.padding_;if(a&&e){const s=this.getViewportSizeMinusPadding_(-r),l=ap(e,n,[s[0]/2+a[3],s[1]/2+a[0]],i,r);o=[e[0]-l[0],e[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const i=Zf(this.targetCenter_,this.getProjection());this.setCenter([i[0]+e[0],i[1]+e[1]])}adjustCenterInternal(e){const i=this.targetCenter_;this.setCenterInternal([i[0]+e[0],i[1]+e[1]])}adjustResolution(e,i){i=i&&Sr(i,this.getProjection()),this.adjustResolutionInternal(e,i)}adjustResolutionInternal(e,i){const r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,n,r);i&&(this.targetCenter_=this.calculateCenterZoom(o,i)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,i){this.adjustResolution(Math.pow(this.zoomFactor_,-e),i)}adjustRotation(e,i){i&&(i=Sr(i,this.getProjection())),this.adjustRotationInternal(e,i)}adjustRotationInternal(e,i){const r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,r);i&&(this.targetCenter_=this.calculateCenterRotate(n,i)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Sr(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,i){return this.hints_[e]+=i,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,i){const r=this.getAnimating()||this.getInteracting()||i,n=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(n),a=this.constraints_.resolution(this.targetResolution_,0,o,r),s=this.constraints_.center(this.targetCenter_,a,o,r,this.calculateCenterShift(this.targetCenter_,a,n,o));this.get(br.ROTATION)!==n&&this.set(br.ROTATION,n),this.get(br.RESOLUTION)!==a&&(this.set(br.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),s&&this.get(br.CENTER)&&wh(this.get(br.CENTER),s)||this.set(br.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,i,r){e=e!==void 0?e:200;const n=i||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,n,a),l=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,o,a));if(e===0&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=l,void this.applyTargetState_();r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&wh(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:s,duration:e,easing:Ds,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Rr,1)}endInteraction(e,i,r){r=r&&Sr(r,this.getProjection()),this.endInteractionInternal(e,i,r)}endInteractionInternal(e,i,r){this.getInteracting()&&(this.setHint(Rr,-1),this.resolveConstraints(e,i,r))}getConstrainedCenter(e,i){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,i||this.getResolution(),r)}getConstrainedZoom(e,i){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,i))}getConstrainedResolution(e,i){i=i||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,i,r)}}function Zu(t,e){setTimeout(function(){t(e)},0)}function d5(t){return!(t.sourceCenter&&t.targetCenter&&!wh(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function ap(t,e,i,r,n){const o=Math.cos(-n);let a=Math.sin(-n),s=t[0]*o-t[1]*a,l=t[1]*o+t[0]*a;return s+=(e[0]/2-i[0])*r,l+=(i[1]-e[1]/2)*r,a=-a,[s*o-l*a,l*o+s*a]}class Bs extends gx{constructor(e){const i=Object.assign({},e);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ep,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get(ep)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||this.getSource().getState()!=="ready"||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(It(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=pt(e,At,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let i;const r=this.getMapInternal();let n;if(!e&&r&&(e=r.getView()),i=e instanceof Ki?{viewState:e.getState(),extent:e.calculateExtent()}:e,!i.layerStatesArray&&r&&(i.layerStatesArray=r.getLayerGroup().getLayerStatesArray()),i.layerStatesArray){if(n=i.layerStatesArray.find(a=>a.layer===this),!n)return!1}else n=this.getLayerState();const o=this.getExtent();return bv(n,i.viewState)&&(!o||Qt(o,i.extent))}getAttributions(e){if(!this.isVisible(e))return[];const i=this.getSource()?.getAttributions();if(!i)return[];let r=i(e instanceof Ki?e.getViewStateAndExtent():e);return Array.isArray(r)||(r=[r]),r}render(e,i){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,i){}renderDeferred(e){const i=this.getRenderer();i&&i.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ty,e)}getMapInternal(){return this.get(ty)}setMap(e){this.mapPrecomposeKey_&&(It(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(It(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=pt(e,mx,this.handlePrecompose_,this),this.mapRenderKey_=pt(this,At,e.render,e),this.changed())}handlePrecompose_(e){const i=e.frameState.layerStatesArray,r=this.getLayerState(!1);xt(!i.some(n=>n.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(r)}setSource(e){this.set(ep,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function bv(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}function Xx(t,e,i=0,r=t.length-1,n=p5){for(;r>i;){if(r-i>600){const l=r-i+1,u=e-i+1,c=Math.log(l),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1);Xx(t,e,Math.max(i,Math.floor(e-u*h/l+d)),Math.min(r,Math.floor(e+(l-u)*h/l+d)),n)}const o=t[e];let a=i,s=r;for(il(t,i,e),n(t[r],o)>0&&il(t,i,r);a<s;){for(il(t,a,s),a++,s--;n(t[a],o)<0;)a++;for(;n(t[s],o)>0;)s--}n(t[i],o)===0?il(t,i,s):(s++,il(t,s,r)),s<=e&&(i=s+1),e<=s&&(r=s-1)}}function il(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function p5(t,e){return t<e?-1:t>e?1:0}class Zx{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let i=this.data;const r=[];if(!Ju(e,i))return r;const n=this.toBBox,o=[];for(;i;){for(let a=0;a<i.children.length;a++){const s=i.children[a],l=i.leaf?n(s):s;Ju(e,l)&&(i.leaf?r.push(s):lp(e,l)?this._all(s,r):o.push(s))}i=o.pop()}return r}collides(e){let i=this.data;if(!Ju(e,i))return!1;const r=[];for(;i;){for(let n=0;n<i.children.length;n++){const o=i.children[n],a=i.leaf?this.toBBox(o):o;if(Ju(e,a)){if(i.leaf||lp(e,a))return!0;r.push(o)}}i=r.pop()}return!1}load(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=$a([]),this}remove(e,i){if(!e)return this;let r=this.data;const n=this.toBBox(e),o=[],a=[];let s,l,u;for(;r||o.length;){if(r||(r=o.pop(),l=o[o.length-1],s=a.pop(),u=!0),r.leaf){const c=f5(e,r.children,i);if(c!==-1)return r.children.splice(c,1),o.push(r),this._condense(o),this}u||r.leaf||!lp(r,n)?l?(s++,r=l.children[s],u=!1):r=null:(o.push(r),a.push(s),s=0,l=r,r=r.children[0])}return this}toBBox(e){return e}compareMinX(e,i){return e.minX-i.minX}compareMinY(e,i){return e.minY-i.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,i){const r=[];for(;e;)e.leaf?i.push(...e.children):r.push(...e.children),e=r.pop();return i}_build(e,i,r,n){const o=r-i+1;let a,s=this._maxEntries;if(o<=s)return a=$a(e.slice(i,r+1)),Sa(a,this.toBBox),a;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),a=$a([]),a.leaf=!1,a.height=n;const l=Math.ceil(o/s),u=l*Math.ceil(Math.sqrt(s));Cy(e,i,r,u,this.compareMinX);for(let c=i;c<=r;c+=u){const h=Math.min(c+u-1,r);Cy(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const p=Math.min(d+l-1,h);a.children.push(this._build(e,d,p,n-1))}}return Sa(a,this.toBBox),a}_chooseSubtree(e,i,r,n){for(;n.push(i),!i.leaf&&n.length-1!==r;){let o,a=1/0,s=1/0;for(let l=0;l<i.children.length;l++){const u=i.children[l],c=sp(u),h=v5(e,u)-c;h<s?(s=h,a=c<a?c:a,o=u):h===s&&c<a&&(a=c,o=u)}i=o||i.children[0]}return i}_insert(e,i,r){const n=r?e:this.toBBox(e),o=[],a=this._chooseSubtree(n,this.data,i,o);for(a.children.push(e),Ml(a,n);i>=0&&o[i].children.length>this._maxEntries;)this._split(o,i),i--;this._adjustParentBBoxes(n,o,i)}_split(e,i){const r=e[i],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);const a=this._chooseSplitIndex(r,o,n),s=$a(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,Sa(r,this.toBBox),Sa(s,this.toBBox),i?e[i-1].children.push(s):this._splitRoot(r,s)}_splitRoot(e,i){this.data=$a([e,i]),this.data.height=e.height+1,this.data.leaf=!1,Sa(this.data,this.toBBox)}_chooseSplitIndex(e,i,r){let n,o=1/0,a=1/0;for(let s=i;s<=r-i;s++){const l=Cl(e,0,s,this.toBBox),u=Cl(e,s,r,this.toBBox),c=y5(l,u),h=sp(l)+sp(u);c<o?(o=c,n=s,a=h<a?h:a):c===o&&h<a&&(a=h,n=s)}return n||r-i}_chooseSplitAxis(e,i,r){const n=e.leaf?this.compareMinX:g5,o=e.leaf?this.compareMinY:m5;this._allDistMargin(e,i,r,n)<this._allDistMargin(e,i,r,o)&&e.children.sort(n)}_allDistMargin(e,i,r,n){e.children.sort(n);const o=this.toBBox,a=Cl(e,0,i,o),s=Cl(e,r-i,r,o);let l=Qu(a)+Qu(s);for(let u=i;u<r-i;u++){const c=e.children[u];Ml(a,e.leaf?o(c):c),l+=Qu(a)}for(let u=r-i-1;u>=i;u--){const c=e.children[u];Ml(s,e.leaf?o(c):c),l+=Qu(s)}return l}_adjustParentBBoxes(e,i,r){for(let n=r;n>=0;n--)Ml(i[n],e)}_condense(e){for(let i,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(i=e[r-1].children,i.splice(i.indexOf(e[r]),1)):this.clear():Sa(e[r],this.toBBox)}}function f5(t,e,i){if(!i)return e.indexOf(t);for(let r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function Sa(t,e){Cl(t,0,t.children.length,e,t)}function Cl(t,e,i,r,n){n||(n=$a(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let o=e;o<i;o++){const a=t.children[o];Ml(n,t.leaf?r(a):a)}return n}function Ml(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function g5(t,e){return t.minX-e.minX}function m5(t,e){return t.minY-e.minY}function sp(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Qu(t){return t.maxX-t.minX+(t.maxY-t.minY)}function v5(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function y5(t,e){const i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function lp(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ju(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function $a(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Cy(t,e,i,r,n){const o=[e,i];for(;o.length;){if((i=o.pop())-(e=o.pop())<=r)continue;const a=e+Math.ceil((i-e)/r/2)*r;Xx(t,a,e,i,n),o.push(e,a,a,i)}}var Yi=0,Or=1,zt=2,qr=3,Qx=4,ou={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Si={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Si.max=Si.whitepoint[2].D65,Si.rgb=function(t,e){e=e||Si.whitepoint[2].E;var i,r,n,o=t[0]/e[0],a=t[1]/e[1],s=t[2]/e[2];return r=-.96924363628087*o+1.87596750150772*a+.041555057407175*s,n=.055630079696993*o+-.20397695888897*a+1.056971514242878*s,i=(i=3.240969941904521*o+-1.537383177570093*a+-.498610760293*s)>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(i=Math.min(Math.max(0,i),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},ou.xyz=function(t,e){var i=t[0]/255,r=t[1]/255,n=t[2]/255,o=.21263900587151*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.71516867876775*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.072192315360733*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92),a=.019330818715591*i+.11919477979462*r+.95053215224966*n;return[(.41239079926595*i+.35758433938387*r+.18048078840183*n)*(e=e||Si.whitepoint[2].E)[0],o*e[1],a*e[2]]};var ig={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,i){var r,n,o,a,s,l,u,c,h;return o=t[0],a=t[1],s=t[2],o===0?[0,0,0]:(e=e||"D65",i=i||2,r=a/(13*o)+4*(u=Si.whitepoint[i][e][0])/(u+15*(c=Si.whitepoint[i][e][1])+3*(h=Si.whitepoint[i][e][2]))||0,n=s/(13*o)+9*c/(u+15*c+3*h)||0,[9*(l=o>8?c*Math.pow((o+16)/116,3):c*o*.0011070564598794539)*r/(4*n)||0,l,l*(12-3*r-20*n)/(4*n)||0])}};Si.luv=function(t,e,i){var r,n,o,a,s,l,u,c,h,d,p;e=e||"D65",i=i||2,d=4*(u=Si.whitepoint[i][e][0])/(u+15*(c=Si.whitepoint[i][e][1])+3*(h=Si.whitepoint[i][e][2])),p=9*c/(u+15*c+3*h),r=4*(a=t[0])/(a+15*(s=t[1])+3*(l=t[2]))||0,n=9*s/(a+15*s+3*l)||0;var f=s/c;return[o=f<=.008856451679035631?903.2962962962961*f:116*Math.pow(f,1/3)-16,13*o*(r-d),13*o*(n-p)]};var Jx={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,i=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[i,r*Math.cos(e),r*Math.sin(e)]},xyz:function(t){return ig.xyz(Jx.luv(t))}};ig.lchuv=function(t){var e=t[0],i=t[1],r=t[2],n=Math.sqrt(i*i+r*r),o=360*Math.atan2(r,i)/2/Math.PI;return o<0&&(o+=360),[e,n,o]},Si.lchuv=function(t){return ig.lchuv(Si.luv(t))};var My={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ky={red:0,orange:60,yellow:120,green:180,blue:240,purple:300},up={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,i,r,n,o,a=t[0]/360,s=t[1]/100,l=t[2]/100,u=0;if(s===0)return[o=255*l,o,o];for(e=2*l-(i=l<.5?l*(1+s):l+s-l*s),n=[0,0,0];u<3;)(r=a+1/3*-(u-1))<0?r++:r>1&&r--,o=6*r<1?e+6*(i-e)*r:2*r<1?i:3*r<2?e+(i-e)*(2/3-r)*6:e,n[u++]=255*o;return n}};function _5(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var i=function(o){var a,s,l=[],u=1;if(typeof o=="number")return{space:"rgb",values:[o>>>16,(65280&o)>>>8,255&o],alpha:1};if(typeof o=="number")return{space:"rgb",values:[o>>>16,(65280&o)>>>8,255&o],alpha:1};if(o=String(o).toLowerCase(),My[o])l=My[o].slice(),s="rgb";else if(o==="transparent")u=0,s="rgb",l=[0,0,0];else if(o[0]==="#"){var c=o.slice(1),h=c.length;u=1,h<=4?(l=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],h===4&&(u=parseInt(c[3]+c[3],16)/255)):(l=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],h===8&&(u=parseInt(c[6]+c[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),s="rgb"}else if(a=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(o)){var d=a[1],p=(s=d.replace(/a$/,""))==="cmyk"?4:s==="gray"?1:3;l=a[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=l.shift()),l=l.map(function(f,g){if(f[f.length-1]==="%")return f=parseFloat(f)/100,g===3?f:s==="rgb"?255*f:s[0]==="h"?100*f:s[0]!=="l"||g?s==="lab"?125*f:s==="lch"?g<2?150*f:360*f:s[0]!=="o"||g?s==="oklab"?.4*f:s==="oklch"?g<2?.4*f:360*f:f:f:100*f;if(s[g]==="h"||g===2&&s[s.length-1]==="h"){if(ky[f]!==void 0)return ky[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return 360*parseFloat(f);if(f.endsWith("grad"))return 360*parseFloat(f)/400;if(f.endsWith("rad"))return 180*parseFloat(f)/Math.PI}return f==="none"?0:parseFloat(f)}),u=l.length>p?l.pop():1}else/[0-9](?:\s|\/|,)/.test(o)&&(l=o.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),s=o.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:s,values:l,alpha:u}}(t);if(!i.space)return[];const r=i.space[0]==="h"?up.min:ou.min,n=i.space[0]==="h"?up.max:ou.max;return(e=Array(3))[0]=Math.min(Math.max(i.values[0],r[0]),n[0]),e[1]=Math.min(Math.max(i.values[1],r[1]),n[1]),e[2]=Math.min(Math.max(i.values[2],r[2]),n[2]),i.space[0]==="h"&&(e=up.rgb(e)),e.push(Math.min(Math.max(i.alpha,0),1)),e}ou.hsl=function(t){var e,i,r=t[0]/255,n=t[1]/255,o=t[2]/255,a=Math.min(r,n,o),s=Math.max(r,n,o),l=s-a;return s===a?e=0:r===s?e=(n-o)/l:n===s?e=2+(o-r)/l:o===s&&(e=4+(r-n)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(a+s)/2,[e,100*(s===a?0:i<=.5?l/(s+a):l/(2-s-a)),100*i]};const xv=[NaN,NaN,NaN,0],rl={};let cp=0;function b5(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function Ty(t){const e=Si.lchuv(ou.xyz(t));return e[3]=t[3],e}function wv(t){if(t==="none")return xv;if(rl.hasOwnProperty(t))return rl[t];if(cp>=1024){let i=0;for(const r in rl)3&i++||(delete rl[r],--cp)}const e=_5(t);if(e.length!==4)throw new Error('failed to parse "'+t+'" as color');for(const i of e)if(isNaN(i))throw new Error('failed to parse "'+t+'" as color');return ew(e),rl[t]=e,++cp,e}function Ms(t){return Array.isArray(t)?t:wv(t)}function ew(t){return t[0]=Nt(t[0]+.5|0,0,255),t[1]=Nt(t[1]+.5|0,0,255),t[2]=Nt(t[2]+.5|0,0,255),t[3]=Nt(t[3],0,1),t}function Sv(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+i+","+r+","+(t[3]===void 0?1:Math.round(1e3*t[3])/1e3)+")"}const Qn=typeof navigator<"u"&&navigator.userAgent!==void 0?navigator.userAgent.toLowerCase():"",x5=Qn.includes("firefox");Qn.includes("safari")&&!Qn.includes("chrom")&&(Qn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Qn));const w5=Qn.includes("webkit")&&!Qn.includes("edge"),tw=Qn.includes("macintosh"),iw=typeof devicePixelRatio<"u"?devicePixelRatio:1,Cv=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,rw=typeof Image<"u"&&Image.prototype.decode,nw=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function Vt(t,e,i,r){let n;return n=i&&i.length?i.shift():Cv?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(n.width=t),e&&(n.height=e),n.getContext("2d",r)}let hp;function Eh(){return hp||(hp=Vt(1,1)),hp}function au(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function S5(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),e}function C5(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),e}function Ey(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function ow(t){for(;t.lastChild;)t.lastChild.remove()}class Mv extends Iu{constructor(e,i,r,n){super(),this.extent=e,this.pixelRatio_=r,this.resolution=i,this.state=typeof n=="function"?Yi:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(At)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Yi&&this.loader){this.state=Or,this.changed();const e=this.getResolution(),i=Array.isArray(e)?e[0]:e;na(()=>this.loader(this.getExtent(),i,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=zt}).catch(r=>{this.state=qr}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function M5(t,e){return e&&(t.src=e),t.src&&rw?new Promise((i,r)=>t.decode().then(()=>i(t)).catch(n=>t.complete&&t.width?i(t):r(n))):function(i,r){return new Promise((n,o)=>{function a(){l(),n(i)}function s(){l(),o(new Error("Image load error"))}function l(){i.removeEventListener("load",a),i.removeEventListener("error",s)}i.addEventListener("load",a),i.addEventListener("error",s)})}(t)}function dp(t,e,i){return e+":"+t+":"+(i?Ms(i):"null")}const cr=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];3&t++||i.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const r=dp(t,e,i);return r in this.cache_?this.cache_[r]:null}getPattern(t,e,i){const r=dp(t,e,i);return r in this.patternCache_?this.patternCache_[r]:null}set(t,e,i,r,n){const o=dp(t,e,i),a=o in this.cache_;this.cache_[o]=r,n&&(r.getImageState()===Yi&&r.load(),r.getImageState()===Or?r.ready().then(()=>{this.patternCache_[o]=Eh().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=Eh().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};let nl=null;class aw extends Iu{constructor(e,i,r,n,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=n===void 0?Yi:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===zt){nl||(nl=Vt(1,1,void 0,{willReadFrequently:!0})),nl.drawImage(this.image_,0,0);try{nl.getImageData(0,0,1,1),this.tainted_=!1}catch{nl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(At)}handleImageError_(){this.imageState_=qr,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=zt,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],i=this.size_[1],r=Vt(e,i);r.fillRect(0,0,e,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Yi){this.image_||this.initializeImage_(),this.imageState_=Or;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&M5(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==zt)return;const i=this.image_,r=Vt(Math.ceil(i.width*e),Math.ceil(i.height*e)),n=r.canvas;r.scale(e,e),r.drawImage(i,0,0),r.globalCompositeOperation="multiply",r.fillStyle=function(o){return typeof o=="string"?o:Sv(o)}(this.color_),r.fillRect(0,0,n.width/e,n.height/e),r.globalCompositeOperation="destination-in",r.drawImage(i,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===zt||this.imageState_===qr)e();else{const i=()=>{this.imageState_!==zt&&this.imageState_!==qr||(this.removeEventListener(At,i),e())};this.addEventListener(At,i)}})),this.ready_}}function kv(t,e,i,r,n,o){let a=e===void 0?void 0:cr.get(e,i,n);return a||(a=new aw(t,t&&"src"in t?t.src||void 0:e,i,r,n),cr.set(e,i,n,a,o)),o&&a&&!cr.getPattern(e,i,n)&&cr.set(e,i,n,a,o),a}function Ly(t){return t[0]>0&&t[1]>0}function sw(t,e,i){return i===void 0&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function si(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class xd{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=si(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new xd({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ye()}getImage(e){return Ye()}getHitDetectionImage(){return Ye()}getPixelRatio(e){return 1}getImageState(){return Ye()}getImageSize(){return Ye()}getOrigin(){return Ye()}getSize(){return Ye()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=si(e)}listenImageChange(e){Ye()}load(){Ye()}unlistenImageChange(e){Ye()}ready(){return Promise.resolve()}}function Yr(t){return t?Array.isArray(t)?Sv(t):typeof t=="object"&&"src"in t?function(e){if(!e.offset||!e.size)return cr.getPattern(e.src,"anonymous",e.color);const i=e.src+":"+e.offset,r=cr.getPattern(i,void 0,e.color);if(r)return r;const n=cr.get(e.src,"anonymous",null);if(n.getImageState()!==zt)return null;const o=Vt(e.size[0],e.size[1]);return o.drawImage(n.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),kv(o.canvas,i,void 0,zt,e.color,!0),cr.getPattern(i,void 0,e.color)}(t):t:null}const ec="ol-hidden",Au="ol-unselectable",Tv="ol-control",Iy="ol-collapsed",k5=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Py=["style","variant","weight","size","lineHeight","family"],lw=function(t){const e=t.match(k5);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,n=Py.length;r<n;++r){const o=e[r+1];o!==void 0&&(i[Py[r]]=o)}return i.families=i.family.split(/,\s?/),i},uw="10px sans-serif",$i="#000",ks="round",Sn=[],Ts="round",su="#000",lu="center",Lh="middle",Go=[0,0,0,0],$r=new yr;let rg,Va=null;const ng={},cw=function(){const t="32px ",e=["monospace","serif"],i=e.length,r="wmytzilWMYTZIL@#/&?$%10";let n,o;function a(l,u,c){let h=!0;for(let d=0;d<i;++d){const p=e[d];if(o=Ih(l+" "+u+" "+t+p,r),c!=p){const f=Ih(l+" "+u+" "+t+c+","+p,r);h=h&&f!=o}}return!!h}function s(){let l=!0;const u=$r.getKeys();for(let c=0,h=u.length;c<h;++c){const d=u[c];if($r.get(d)<100){const[p,f,g]=d.split(`
`);a(p,f,g)?(Lu(ng),Va=null,rg=void 0,$r.set(d,100)):($r.set(d,$r.get(d)+1,!0),l=!1)}}l&&(clearInterval(n),n=void 0)}return function(l){const u=lw(l);if(!u)return;const c=u.families;for(let h=0,d=c.length;h<d;++h){const p=c[h],f=u.style+`
`+u.weight+`
`+p;$r.get(f)===void 0&&($r.set(f,100,!0),a(u.style,u.weight,p)||($r.set(f,0,!0),n===void 0&&(n=setInterval(s,32))))}}}(),T5=function(){let t;return function(e){let i=ng[e];if(i==null){if(Cv){const r=lw(e),n=hw(e,"Žg");i=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);ng[e]=i}return i}}();function hw(t,e){return Va||(Va=Vt(1,1)),t!=rg&&(Va.font=t,rg=Va.font),Va.measureText(e)}function Ih(t,e){return hw(t,e).width}function Ry(t,e,i){if(e in i)return i[e];const r=e.split(`
`).reduce((n,o)=>Math.max(n,Ih(t,o)),0);return i[e]=r,r}function E5(t,e,i,r,n,o,a,s,l,u,c){t.save(),i!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=i:t.globalAlpha*=i),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(h,d){const p=h.contextInstructions;for(let f=0,g=p.length;f<g;f+=2)Array.isArray(p[f+1])?d[p[f]].apply(d,p[f+1]):d[p[f]]=p[f+1]}(r,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(r,n,o,a,s,0,0,a,s)):t.drawImage(r,n,o,a,s,l,u,a*c[0],s*c[1]),t.restore()}class fo extends xd{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0&&e.rotateWithView,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Or:zt,this.imageState_===Or&&this.ready().then(()=>this.imageState_=zt),this.render()}clone(){const e=this.getScale(),i=new fo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const e=this.size_,i=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-i[0]/r[0],e[1]/2+i[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const i=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let n=cr.get(r,null,null)?.getImage(1);if(!n){const o=this.renderOptions_,a=Math.ceil(o.size*e),s=Vt(a,a);this.draw_(o,s,e),n=s.canvas,cr.set(r,null,null,new aw(n,void 0,null,zt,null))}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,i,r){if(i===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return i;let n=this.radius,o=this.radius2_===void 0?n:this.radius2_;if(n<o){const b=n;n=o,o=b}const a=this.radius2_===void 0?this.points_:2*this.points_,s=2*Math.PI/a,l=o*Math.sin(s),u=n-Math.sqrt(o*o-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if(e==="miter"&&h<=r)return h*i;const d=i/2/h,p=i/2*(u/c),f=Math.sqrt((n+d)*(n+d)+p*p)-n;if(this.radius2_===void 0||e==="bevel")return 2*f;const g=n*Math.sin(s),_=o-Math.sqrt(n*n-g*g),v=Math.sqrt(g*g+_*_)/g;if(v<=r){const b=v*i/2-o-n;return 2*Math.max(f,b)}return 2*f}createRenderOptions(){let e,i=ks,r=Ts,n=0,o=null,a=0,s=0;this.stroke_&&(e=Yr(this.stroke_.getColor()??su),s=this.stroke_.getWidth()??1,o=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,r=this.stroke_.getLineJoin()??Ts,i=this.stroke_.getLineCap()??ks,n=this.stroke_.getMiterLimit()??10);const l=this.calculateLineJoinSize_(r,s,n),u=Math.max(this.radius,this.radius2_||0);return{strokeStyle:e,strokeWidth:s,size:Math.ceil(2*u+l),lineCap:i,lineDash:o,lineDashOffset:a,lineJoin:r,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,i,r){if(i.scale(r,r),i.translate(e.size/2,e.size/2),this.createPath_(i),this.fill_){let n=this.fill_.getColor();n===null&&(n=$i),i.fillStyle=Yr(n),i.fill()}e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineCap=e.lineCap,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())}createHitDetectionCanvas_(e){let i;if(this.fill_){let r=this.fill_.getColor(),n=0;typeof r=="string"&&(r=Ms(r)),r===null?n=1:Array.isArray(r)&&(n=r.length===4?r[3]:1),n===0&&(i=Vt(e.size,e.size),this.drawHitDetectionCanvas_(e,i))}return i?i.canvas:this.getImage(1)}createPath_(e){let i=this.points_;const r=this.radius;if(i===1/0)e.arc(0,0,r,0,2*Math.PI);else{const n=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(i*=2);const o=this.angle_-Math.PI/2,a=2*Math.PI/i;for(let s=0;s<i;s++){const l=o+s*a,u=s%2==0?r:n;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,i){i.translate(e.size/2,e.size/2),this.createPath_(i),i.fillStyle=$i,i.fill(),e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class zr extends fo{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0&&e.rotateWithView,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),i=new zr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(e){this.radius=e,this.render()}}class ei{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ei({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const i=kv(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===Yi&&i.load(),i.getImageState()===Or&&(this.patternImage_=i)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Xe(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ms(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Wt{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Wt({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class qt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Ay,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new qt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(i){return i.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Ay,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let pp=null;function qy(t,e){if(!pp){const i=new ei({color:"rgba(255,255,255,0.4)"}),r=new Wt({color:"#3399CC",width:1.25});pp=[new qt({image:new zr({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return pp}function Ay(t){return t.getGeometry()}function Fy(t,e,i,r){return i!==void 0&&r!==void 0?[i/t,r/e]:i!==void 0?i/t:r!==void 0?r/e:1}class Es extends xd{constructor(e){const i=(e=e||{}).opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,n=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0&&e.rotateWithView;super({opacity:i,rotation:r,scale:n,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let s,l=e.src;if(xt(!(l!==void 0&&a),"`image` and `src` cannot be provided at the same time"),l!==void 0&&l.length!==0||!a||(l=a.src||Xe(a)),xt(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),xt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`"),e.src!==void 0?s=Yi:a!==void 0&&(s="complete"in a?a.complete?a.src?zt:Yi:Or:zt),this.color_=e.color!==void 0?Ms(e.color):null,this.iconImage_=kv(a,l,this.crossOrigin_,s,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(Fy(p[0],p[1],e.width,e.height))};return void this.listenImageChange(d)}}u!==void 0&&this.setScale(Fy(u,c,e.width,e.height))}}clone(){let e,i,r;return this.initialOptions_?(i=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Es({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:i,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=n[0]),this.anchorYUnits_=="fraction"&&(e[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),this.anchorOrigin_!="top-right"&&this.anchorOrigin_!="bottom-right"||(e[0]=-e[0]+n[0]),this.anchorOrigin_!="bottom-left"&&this.anchorOrigin_!="bottom-right"||(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}const i=this.getDisplacement(),r=this.getScaleArray();return[e[0]-i[0]/r[0],e[1]+i[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),r=this.iconImage_.getSize();if(!i||!r)return null;e=e.slice(),this.offsetOrigin_!="top-right"&&this.offsetOrigin_!="bottom-right"||(e[0]=r[0]-i[0]-e[0]),this.offsetOrigin_!="bottom-left"&&this.offsetOrigin_!="bottom-right"||(e[1]=r[1]-i[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:this.iconImage_.getImageState()==zt?this.iconImage_.getSize()[0]*e[0]:void 0}getHeight(){const e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:this.iconImage_.getImageState()==zt?this.iconImage_.getSize()[1]*e[1]:void 0}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(At,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(At,e)}ready(){return this.iconImage_.ready()}}class Zo{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=si(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ei({color:"#333"}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Zo({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=si(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let js=0;const Ii=1<<js++,mt=1<<js++,Vi=1<<js++,Mr=1<<js++,sa=1<<js++,kl=1<<js++,tc=Math.pow(2,6)-1,Ev={[Ii]:"boolean",[mt]:"number",[Vi]:"string",[Mr]:"color",[sa]:"number[]",[kl]:"size"},L5=Object.keys(Ev).map(Number).sort(Xr);function Tl(t){const e=[];for(const i of L5)El(t,i)&&e.push(Ev[i]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function El(t,e){return(t&e)===e}function An(t,e){return t===e}class ui{constructor(e,i){if(!function(r){return r in Ev}(e))throw new Error(`literal expressions must have a specific type, got ${Tl(e)}`);this.type=e,this.value=i}}class I5{constructor(e,i,...r){this.type=e,this.operator=i,this.args=r}}function dw(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function yi(t,e,i){switch(typeof t){case"boolean":if(An(e,Vi))return new ui(Vi,t?"true":"false");if(!El(e,Ii))throw new Error(`got a boolean, but expected ${Tl(e)}`);return new ui(Ii,t);case"number":if(An(e,kl))return new ui(kl,si(t));if(An(e,Ii))return new ui(Ii,!!t);if(An(e,Vi))return new ui(Vi,t.toString());if(!El(e,mt))throw new Error(`got a number, but expected ${Tl(e)}`);return new ui(mt,t);case"string":if(An(e,Mr))return new ui(Mr,wv(t));if(An(e,Ii))return new ui(Ii,!!t);if(!El(e,Vi))throw new Error(`got a string, but expected ${Tl(e)}`);return new ui(Vi,t)}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return function(r,n,o){const a=r[0],s=D5[a];if(!s)throw new Error(`unknown operator: ${a}`);return s(r,n,o)}(t,e,i);for(const r of t)if(typeof r!="number")throw new Error("expected an array of numbers");if(An(e,kl)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new ui(kl,t)}if(An(e,Mr)){if(t.length===3)return new ui(Mr,[...t,1]);if(t.length===4)return new ui(Mr,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!El(e,sa))throw new Error(`got an array of numbers, but expected ${Tl(e)}`);return new ui(sa,t)}const og="get",ag="var",pw="concat",fw="geometry-type",P5="line-metric",sg="any",lg="all",ug="!",gw="resolution",R5="zoom",q5="time",cg="==",hg="!=",dg=">",pg=">=",fg="<",gg="<=",mg="*",vg="/",yg="+",_g="-",bg="clamp",xg="%",wg="^",Sg="abs",Cg="floor",Mg="ceil",kg="round",Tg="sin",Eg="cos",Lg="atan",Ig="sqrt",mw="match",Pg="between",vw="interpolate",Rg="coalesce",yw="case",qg="in",Ag="number",Fg="string",A5="array",F5="color",_w="id",O5="band",z5="palette",Og="to-string",zg="has",D5={[og]:We(nt(1,1/0),Oy),[ag]:We(nt(1,1),function(t,e,i){const r=t[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return i.variables.add(r),[new ui(Vi,r)]}),[zg]:We(nt(1,1/0),Oy),[_w]:We(function(t,e,i){i.featureId=!0},Ca),[pw]:We(nt(2,1/0),St(Vi)),[fw]:We(function(t,e,i){i.geometryType=!0},Ca),[P5]:We(Ca),[gw]:We(Ca),[R5]:We(Ca),[q5]:We(Ca),[sg]:We(nt(2,1/0),St(Ii)),[lg]:We(nt(2,1/0),St(Ii)),[ug]:We(nt(1,1),St(Ii)),[cg]:We(nt(2,2),St(tc)),[hg]:We(nt(2,2),St(tc)),[dg]:We(nt(2,2),St(mt)),[pg]:We(nt(2,2),St(mt)),[fg]:We(nt(2,2),St(mt)),[gg]:We(nt(2,2),St(mt)),[mg]:We(nt(2,1/0),zy),[Rg]:We(nt(2,1/0),zy),[vg]:We(nt(2,2),St(mt)),[yg]:We(nt(2,1/0),St(mt)),[_g]:We(nt(2,2),St(mt)),[bg]:We(nt(3,3),St(mt)),[xg]:We(nt(2,2),St(mt)),[wg]:We(nt(2,2),St(mt)),[Sg]:We(nt(1,1),St(mt)),[Cg]:We(nt(1,1),St(mt)),[Mg]:We(nt(1,1),St(mt)),[kg]:We(nt(1,1),St(mt)),[Tg]:We(nt(1,1),St(mt)),[Eg]:We(nt(1,1),St(mt)),[Lg]:We(nt(1,2),St(mt)),[Ig]:We(nt(1,1),St(mt)),[mw]:We(nt(4,1/0),Dy,function(t,e,i){const r=t.length-1,n=Vi|mt|Ii,o=yi(t[1],n,i),a=yi(t[t.length-1],e,i),s=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=yi(t[l+2],o.type,i);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=yi(t[l+3],a.type,i);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[o,...s,a]}),[Pg]:We(nt(3,3),St(mt)),[vw]:We(nt(6,1/0),Dy,function(t,e,i){const r=t[1];let n;switch(r[0]){case"linear":n=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);n=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const o=new ui(mt,n);let a;try{a=yi(t[2],mt,i)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const s=new Array(t.length-3);for(let l=0;l<s.length;l+=2){try{const u=yi(t[l+3],mt,i);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=yi(t[l+4],e,i);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[o,a,...s]}),[yw]:We(nt(3,1/0),function(t,e,i){const r=t[0],n=t.length-1;if(n%2==0)throw new Error(`expected an odd number of arguments for ${r}, got ${n} instead`)},function(t,e,i){const r=yi(t[t.length-1],e,i),n=new Array(t.length-1);for(let o=0;o<n.length-1;o+=2){try{const a=yi(t[o+1],Ii,i);n[o]=a}catch(a){throw new Error(`failed to parse argument ${o} of case expression: ${a.message}`)}try{const a=yi(t[o+2],r.type,i);n[o+1]=a}catch(a){throw new Error(`failed to parse argument ${o+1} of case expression: ${a.message}`)}}return n[n.length-1]=r,n}),[qg]:We(nt(2,2),function(t,e,i){let r,n=t[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],r=Vi}else r=mt;const o=new Array(n.length);for(let a=0;a<o.length;a++)try{const s=yi(n[a],r,i);o[a]=s}catch(s){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${s.message}`)}return[yi(t[1],r,i),...o]}),[Ag]:We(nt(1,1/0),St(tc)),[Fg]:We(nt(1,1/0),St(tc)),[A5]:We(nt(1,1/0),St(mt)),[F5]:We(nt(1,4),St(mt)),[O5]:We(nt(1,3),St(mt)),[z5]:We(nt(2,2),function(t,e,i){let r;try{r=yi(t[1],mt,i)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const n=t[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const o=new Array(n.length);for(let a=0;a<o.length;a++){let s;try{s=yi(n[a],Mr,i)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(s instanceof ui))throw new Error(`the palette color at index ${a} must be a literal value`);o[a]=s}return[r,...o]}),[Og]:We(nt(1,1),St(Ii|mt|Vi|Mr))};function Oy(t,e,i){const r=t.length-1,n=new Array(r);for(let o=0;o<r;++o){const a=t[o+1];switch(typeof a){case"number":n[o]=new ui(mt,a);break;case"string":n[o]=new ui(Vi,a);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}o===0&&i.properties.add(String(a))}return n}function Ca(t,e,i){const r=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function nt(t,e){return function(i,r,n){const o=i[0],a=i.length-1;if(t===e){if(a!==t)throw new Error(`expected ${t} argument${t===1?"":"s"} for ${o}, got ${a}`)}else if(a<t||a>e)throw new Error(`expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${o}, got ${a}`)}}function zy(t,e,i){const r=t.length-1,n=new Array(r);for(let o=0;o<r;++o){const a=yi(t[o+1],e,i);n[o]=a}return n}function St(t){return function(e,i,r){const n=e.length-1,o=new Array(n);for(let a=0;a<n;++a){const s=yi(e[a+1],t,r);o[a]=s}return o}}function Dy(t,e,i){const r=t[0],n=t.length-1;if(n%2==1)throw new Error(`expected an even number of arguments for operation ${r}, got ${n} instead`)}function We(...t){return function(e,i,r){const n=e[0];let o;for(let a=0;a<t.length;a++){const s=t[a](e,i,r);if(a==t.length-1){if(!s)throw new Error("expected last argument validator to return the parsed args");o=s}}return new I5(i,n,...o)}}function bw(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return bw(t.getGeometries()[0]);default:return""}}function Pn(t,e,i){return xr(yi(t,e,i))}function xr(t,e){if(t instanceof ui){if(t.type===Mr&&typeof t.value=="string"){const r=wv(t.value);return function(){return r}}return function(){return t.value}}const i=t.operator;switch(i){case Ag:case Fg:case Rg:return function(r){const n=r.operator,o=r.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=xr(r.args[s]);switch(n){case Rg:return s=>{for(let l=0;l<o;++l){const u=a[l](s);if(u!=null)return u}throw new Error("Expected one of the values to be non-null")};case Ag:case Fg:return s=>{for(let l=0;l<o;++l){const u=a[l](s);if(typeof u===n)return u}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}(t);case og:case ag:case zg:return function(r){const n=r.args[0],o=n.value;switch(r.operator){case og:return a=>{const s=r.args;let l=a.properties[o];for(let u=1,c=s.length;u<c;++u)l=l[s[u].value];return l};case ag:return a=>a.variables[o];case zg:return a=>{const s=r.args;if(!(o in a.properties))return!1;let l=a.properties[o];for(let u=1,c=s.length;u<c;++u){const h=s[u].value;if(!l||!Object.hasOwn(l,h))return!1;l=l[h]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}(t);case _w:return r=>r.featureId;case fw:return r=>r.geometryType;case pw:{const r=t.args.map(n=>xr(n));return n=>"".concat(...r.map(o=>o(n).toString()))}case gw:return r=>r.resolution;case sg:case lg:case Pg:case qg:case ug:return function(r){const n=r.operator,o=r.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=xr(r.args[s]);switch(n){case sg:return s=>{for(let l=0;l<o;++l)if(a[l](s))return!0;return!1};case lg:return s=>{for(let l=0;l<o;++l)if(!a[l](s))return!1;return!0};case Pg:return s=>{const l=a[0](s),u=a[1](s),c=a[2](s);return l>=u&&l<=c};case qg:return s=>{const l=a[0](s);for(let u=1;u<o;++u)if(l===a[u](s))return!0;return!1};case ug:return s=>!a[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}(t);case cg:case hg:case fg:case gg:case dg:case pg:return function(r){const n=r.operator,o=xr(r.args[0]),a=xr(r.args[1]);switch(n){case cg:return s=>o(s)===a(s);case hg:return s=>o(s)!==a(s);case fg:return s=>o(s)<a(s);case gg:return s=>o(s)<=a(s);case dg:return s=>o(s)>a(s);case pg:return s=>o(s)>=a(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}(t);case mg:case vg:case yg:case _g:case bg:case xg:case wg:case Sg:case Cg:case Mg:case kg:case Tg:case Eg:case Lg:case Ig:return function(r){const n=r.operator,o=r.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=xr(r.args[s]);switch(n){case mg:return s=>{let l=1;for(let u=0;u<o;++u)l*=a[u](s);return l};case vg:return s=>a[0](s)/a[1](s);case yg:return s=>{let l=0;for(let u=0;u<o;++u)l+=a[u](s);return l};case _g:return s=>a[0](s)-a[1](s);case bg:return s=>{const l=a[0](s),u=a[1](s);if(l<u)return u;const c=a[2](s);return l>c?c:l};case xg:return s=>a[0](s)%a[1](s);case wg:return s=>Math.pow(a[0](s),a[1](s));case Sg:return s=>Math.abs(a[0](s));case Cg:return s=>Math.floor(a[0](s));case Mg:return s=>Math.ceil(a[0](s));case kg:return s=>Math.round(a[0](s));case Tg:return s=>Math.sin(a[0](s));case Eg:return s=>Math.cos(a[0](s));case Lg:return o===2?s=>Math.atan2(a[0](s),a[1](s)):s=>Math.atan(a[0](s));case Ig:return s=>Math.sqrt(a[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}(t);case yw:return function(r){const n=r.args.length,o=new Array(n);for(let a=0;a<n;++a)o[a]=xr(r.args[a]);return a=>{for(let s=0;s<n-1;s+=2)if(o[s](a))return o[s+1](a);return o[n-1](a)}}(t);case mw:return function(r){const n=r.args.length,o=new Array(n);for(let a=0;a<n;++a)o[a]=xr(r.args[a]);return a=>{const s=o[0](a);for(let l=1;l<n;l+=2)if(s===o[l](a))return o[l+1](a);return o[n-1](a)}}(t);case vw:return function(r){const n=r.args.length,o=new Array(n);for(let a=0;a<n;++a)o[a]=xr(r.args[a]);return a=>{const s=o[0](a),l=o[1](a);let u,c;for(let h=2;h<n;h+=2){const d=o[h](a);let p=o[h+1](a);const f=Array.isArray(p);if(f&&(p=b5(p)),d>=l)return h===2?p:f?B5(s,l,u,c,d,p):Ll(s,l,u,c,d,p);u=d,c=p}return c}}(t);case Og:return function(r){const n=r.operator,o=r.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=xr(r.args[s]);if(n===Og)return s=>{const l=a[0](s);return r.args[0].type===Mr?Sv(l):l.toString()};throw new Error(`Unsupported convert operator ${n}`)}(t);default:throw new Error(`Unsupported operator ${i}`)}}function Ll(t,e,i,r,n,o){const a=n-i;if(a===0)return r;const s=e-i;return r+(t===1?s/a:(Math.pow(t,s)-1)/(Math.pow(t,a)-1))*(o-r)}function B5(t,e,i,r,n,o){if(n-i===0)return r;const a=Ty(r),s=Ty(o);let l=s[2]-a[2];return l>180?l-=360:l<-180&&(l+=360),ew(function(u){const c=Si.rgb(Jx.xyz(u));return c[3]=u[3],c}([Ll(t,e,i,a[0],n,s[0]),Ll(t,e,i,a[1],n,s[1]),a[2]+Ll(t,e,i,0,n,l),Ll(t,e,i,r[3],n,o[3])]))}function j5(t){return!0}function N5(t){const e=dw(),i=function(n,o){const a=n.length,s=new Array(a);for(let l=0;l<a;++l){const u=n[l],c="filter"in u?Pn(u.filter,Ii,o):j5;let h;if(Array.isArray(u.style)){const d=u.style.length;h=new Array(d);for(let p=0;p<d;++p)h[p]=Dg(u.style[p],o)}else h=[Dg(u.style,o)];s[l]={filter:c,styles:h}}return function(l){const u=[];let c=!1;for(let h=0;h<a;++h)if((0,s[h].filter)(l)&&(!n[h].else||!c)){c=!0;for(const d of s[h].styles){const p=d(l);p&&u.push(p)}}return u}}(t,e),r={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(n,o){if(r.properties=n.getPropertiesInternal(),r.resolution=o,e.featureId){const a=n.getId();r.featureId=a!==void 0?a:null}return e.geometryType&&(r.geometryType=bw(n.getGeometry())),i(r)}}function By(t){const e=dw(),i=t.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=Dg(t[a],e);const n={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},o=new Array(i);return function(a,s){if(n.properties=a.getPropertiesInternal(),n.resolution=s,e.featureId){const u=a.getId();n.featureId=u!==void 0?u:null}let l=0;for(let u=0;u<i;++u){const c=r[u](n);c&&(o[l]=c,l+=1)}return o.length=l,o}}function Dg(t,e){const i=ol(t,"",e),r=al(t,"",e),n=function(l,u){const c="text-",h=bn(l,c+"value",u);if(!h)return null;const d=ol(l,c,u),p=ol(l,c+"background-",u),f=al(l,c,u),g=al(l,c+"background-",u),_=bn(l,c+"font",u),v=Di(l,c+"max-angle",u),b=Di(l,c+"offset-x",u),m=Di(l,c+"offset-y",u),y=Ma(l,c+"overflow",u),x=bn(l,c+"placement",u),C=Di(l,c+"repeat",u),k=rc(l,c+"scale",u),L=Ma(l,c+"rotate-with-view",u),A=Di(l,c+"rotation",u),E=bn(l,c+"align",u),I=bn(l,c+"justify",u),T=bn(l,c+"baseline",u),R=Ma(l,c+"keep-upright",u),M=xw(l,c+"padding",u),q=oc(l,c+"declutter-mode"),P=new Zo({declutterMode:q});return function(F){if(P.setText(h(F)),d&&P.setFill(d(F)),p&&P.setBackgroundFill(p(F)),f&&P.setStroke(f(F)),g&&P.setBackgroundStroke(g(F)),_&&P.setFont(_(F)),v&&P.setMaxAngle(v(F)),b&&P.setOffsetX(b(F)),m&&P.setOffsetY(m(F)),y&&P.setOverflow(y(F)),x){const j=x(F);if(j!=="point"&&j!=="line")throw new Error("Expected point or line for text-placement");P.setPlacement(j)}if(C&&P.setRepeat(C(F)),k&&P.setScale(k(F)),L&&P.setRotateWithView(L(F)),A&&P.setRotation(A(F)),E){const j=E(F);if(j!=="left"&&j!=="center"&&j!=="right"&&j!=="end"&&j!=="start")throw new Error("Expected left, right, center, start, or end for text-align");P.setTextAlign(j)}if(I){const j=I(F);if(j!=="left"&&j!=="right"&&j!=="center")throw new Error("Expected left, right, or center for text-justify");P.setJustify(j)}if(T){const j=T(F);if(j!=="bottom"&&j!=="top"&&j!=="middle"&&j!=="alphabetic"&&j!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");P.setTextBaseline(j)}return M&&P.setPadding(M(F)),R&&P.setKeepUpright(R(F)),P}}(t,e),o=function(l,u){return"icon-src"in l?function(c,h){const d="icon-",p=d+"src",f=ww(c[p],p),g=ic(c,d+"anchor",h),_=rc(c,d+"scale",h),v=Di(c,d+"opacity",h),b=ic(c,d+"displacement",h),m=Di(c,d+"rotation",h),y=Ma(c,d+"rotate-with-view",h),x=Ny(c,d+"anchor-origin"),C=$y(c,d+"anchor-x-units"),k=$y(c,d+"anchor-y-units"),L=function(F,j){const V=F[j];if(V!==void 0)return Sw(V,j)}(c,d+"color"),A=function(F,j){const V=F[j];if(V!==void 0){if(typeof V!="string")throw new Error(`Expected a string for ${j}`);return V}}(c,d+"cross-origin"),E=function(F,j){const V=F[j];if(V!==void 0)return Fu(V,j)}(c,d+"offset"),I=Ny(c,d+"offset-origin"),T=nc(c,d+"width"),R=nc(c,d+"height"),M=function(F,j){const V=F[j];if(V!==void 0){if(typeof V=="number")return si(V);if(!Array.isArray(V))throw new Error(`Expected a number or size array for ${j}`);if(V.length!==2||typeof V[0]!="number"||typeof V[1]!="number")throw new Error(`Expected a number or size array for ${j}`);return V}}(c,d+"size"),q=oc(c,d+"declutter-mode"),P=new Es({src:f,anchorOrigin:x,anchorXUnits:C,anchorYUnits:k,color:L,crossOrigin:A,offset:E,offsetOrigin:I,height:R,width:T,size:M,declutterMode:q});return function(F){return v&&P.setOpacity(v(F)),b&&P.setDisplacement(b(F)),m&&P.setRotation(m(F)),y&&P.setRotateWithView(y(F)),_&&P.setScale(_(F)),g&&P.setAnchor(g(F)),P}}(l,u):"shape-points"in l?function(c,h){const d="shape-",p=d+"points",f=d+"radius",g=jg(c[p],p),_=jg(c[f],f),v=ol(c,d,h),b=al(c,d,h),m=rc(c,d+"scale",h),y=ic(c,d+"displacement",h),x=Di(c,d+"rotation",h),C=Ma(c,d+"rotate-with-view",h),k=nc(c,d+"radius2"),L=nc(c,d+"angle"),A=oc(c,d+"declutter-mode"),E=new fo({points:g,radius:_,radius2:k,angle:L,declutterMode:A});return function(I){return v&&E.setFill(v(I)),b&&E.setStroke(b(I)),y&&E.setDisplacement(y(I)),x&&E.setRotation(x(I)),C&&E.setRotateWithView(C(I)),m&&E.setScale(m(I)),E}}(l,u):"circle-radius"in l?function(c,h){const d="circle-",p=ol(c,d,h),f=al(c,d,h),g=Di(c,d+"radius",h),_=rc(c,d+"scale",h),v=ic(c,d+"displacement",h),b=Di(c,d+"rotation",h),m=Ma(c,d+"rotate-with-view",h),y=oc(c,d+"declutter-mode"),x=new zr({radius:5,declutterMode:y});return function(C){return g&&x.setRadius(g(C)),p&&x.setFill(p(C)),f&&x.setStroke(f(C)),v&&x.setDisplacement(v(C)),b&&x.setRotation(b(C)),m&&x.setRotateWithView(m(C)),_&&x.setScale(_(C)),x}}(l,u):null}(t,e),a=Di(t,"z-index",e);if(!(i||r||n||o||po(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const s=new qt;return function(l){let u=!0;if(i){const c=i(l);c&&(u=!1),s.setFill(c)}if(r){const c=r(l);c&&(u=!1),s.setStroke(c)}if(n){const c=n(l);c&&(u=!1),s.setText(c)}if(o){const c=o(l);c&&(u=!1),s.setImage(c)}return a&&s.setZIndex(a(l)),u?null:s}}function ol(t,e,i){let r;if(e+"fill-pattern-src"in t)r=function(o,a,s){const l=bn(o,a+"pattern-src",s),u=jy(o,a+"pattern-offset",s),c=jy(o,a+"pattern-size",s),h=Bg(o,a+"color",s);return function(d){return{src:l(d),offset:u&&u(d),size:c&&c(d),color:h&&h(d)}}}(t,e+"fill-",i);else{if(t[e+"fill-color"]==="none")return o=>null;r=Bg(t,e+"fill-color",i)}if(!r)return null;const n=new ei;return function(o){const a=r(o);return a===xv?null:(n.setColor(a),n)}}function al(t,e,i){const r=Di(t,e+"stroke-width",i),n=Bg(t,e+"stroke-color",i);if(!r&&!n)return null;const o=bn(t,e+"stroke-line-cap",i),a=bn(t,e+"stroke-line-join",i),s=xw(t,e+"stroke-line-dash",i),l=Di(t,e+"stroke-line-dash-offset",i),u=Di(t,e+"stroke-miter-limit",i),c=new Wt;return function(h){if(n){const d=n(h);if(d===xv)return null;c.setColor(d)}if(r&&c.setWidth(r(h)),o){const d=o(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(a){const d=a(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return s&&c.setLineDash(s(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function Di(t,e,i){if(!(e in t))return;const r=Pn(t[e],mt,i);return function(n){return jg(r(n),e)}}function bn(t,e,i){if(!(e in t))return null;const r=Pn(t[e],Vi,i);return function(n){return ww(r(n),e)}}function Ma(t,e,i){if(!(e in t))return null;const r=Pn(t[e],Ii,i);return function(n){const o=r(n);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function Bg(t,e,i){if(!(e in t))return null;const r=Pn(t[e],Mr,i);return function(n){return Sw(r(n),e)}}function xw(t,e,i){if(!(e in t))return null;const r=Pn(t[e],sa,i);return function(n){return Fu(r(n),e)}}function ic(t,e,i){if(!(e in t))return null;const r=Pn(t[e],sa,i);return function(n){const o=Fu(r(n),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function jy(t,e,i){if(!(e in t))return null;const r=Pn(t[e],sa,i);return function(n){return Cw(r(n),e)}}function rc(t,e,i){if(!(e in t))return null;const r=Pn(t[e],sa|mt,i);return function(n){return function(o,a){return typeof o=="number"?o:Cw(o,a)}(r(n),e)}}function nc(t,e){const i=t[e];if(i!==void 0){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}}function Ny(t,e){const i=t[e];if(i!==void 0){if(i!=="bottom-left"&&i!=="bottom-right"&&i!=="top-left"&&i!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return i}}function $y(t,e){const i=t[e];if(i!==void 0){if(i!=="pixels"&&i!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return i}}function oc(t,e){const i=t[e];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);if(i!=="declutter"&&i!=="obstacle"&&i!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return i}}function Fu(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const i=t.length;for(let r=0;r<i;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function ww(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function jg(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function Sw(t,e){if(typeof t=="string")return t;const i=Fu(t,e),r=i.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return i}function Cw(t,e){const i=Fu(t,e);if(i.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return i}const Vy="renderOrder";class Lv extends Bs{constructor(e){e=e||{};const i=Object.assign({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0&&e.updateWhileAnimating,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Vy)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,i){const r=this.getDeclutter();!(r in e.declutter)&&(e.declutter[r]=new Zx(9)),this.getRenderer().renderDeclutter(e,i)}setRenderOrder(e){this.set(Vy,e)}setStyle(e){this.style_=e===void 0?qy:e;const i=function(r){if(r===void 0)return qy;if(!r)return null;if(typeof r=="function"||r instanceof qt)return r;if(!Array.isArray(r))return By([r]);if(r.length===0)return[];const n=r.length,o=r[0];if(o instanceof qt){const a=new Array(n);for(let s=0;s<n;++s){const l=r[s];if(!(l instanceof qt))throw new Error("Expected a list of style instances");a[s]=l}return a}if("style"in o){const a=new Array(n);for(let s=0;s<n;++s){const l=r[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");a[s]=l}return N5(a)}return By(r)}(e);this.styleFunction_=e===null?void 0:function(r){let n;if(typeof r=="function")n=r;else{let o;Array.isArray(r)?o=r:(xt(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),o=[r]),n=function(){return o}}return n}(i),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}class $5 extends Eu{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,i){Ye()}calculateMatrices2D(e){const i=e.viewState,r=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;sn(r,e.size[0]/2,e.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),zx(n,r)}forEachFeatureAtCoordinate(e,i,r,n,o,a,s,l){let u;const c=i.viewState;function h(y,x,C,k){return o.call(a,x,y?C:null,k)}const d=c.projection,p=iv(e.slice(),d),f=[[0,0]];if(d.canWrapX()&&n){const y=tt(d.getExtent());f.push([-y,0],[y,0])}const g=i.layerStatesArray,_=g.length,v=[],b=[];for(let y=0;y<f.length;y++)for(let x=_-1;x>=0;--x){const C=g[x],k=C.layer;if(k.hasRenderer()&&bv(C,c)&&s.call(l,k)){const L=k.getRenderer(),A=k.getSource();if(L&&A){const E=A.getWrapX()?p:e,I=h.bind(null,C.managed);b[0]=E[0]+f[y][0],b[1]=E[1]+f[y][1],u=L.forEachFeatureAtCoordinate(b,i,r,I,v)}if(u)return u}}if(v.length===0)return;const m=1/v.length;return v.forEach((y,x)=>y.distanceSq+=x*m),v.sort((y,x)=>y.distanceSq-x.distanceSq),v.some(y=>u=y.callback(y.feature,y.layer,y.geometry)),u}hasFeatureAtCoordinate(e,i,r,n,o,a){return this.forEachFeatureAtCoordinate(e,i,r,n,xs,this,o,a)!==void 0}getMap(){return this.map_}renderFrame(e){Ye()}scheduleExpireIconCache(e){cr.canExpireCache()&&e.postRenderFunctions.push(V5)}}function V5(t,e){cr.expire()}class Mw extends vr{constructor(e,i,r,n){super(e),this.inversePixelTransform=i,this.frameState=r,this.context=n}}class G5 extends $5{constructor(e){super(e),this.fontChangeListenerKey_=pt($r,bs,e.redrawText,e),this.element_=document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=Au+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,i){const r=this.getMap();if(r.hasListener(e)){const n=new Mw(e,void 0,i);r.dispatchEvent(n)}}disposeInternal(){It(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(mx,e);const i=e.layerStatesArray.sort((a,s)=>a.zIndex-s.zIndex);i.some(a=>a.layer instanceof Lv&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const n=[];let o=null;for(let a=0,s=i.length;a<s;++a){const l=i[a];e.layerIndex=a;const u=l.layer,c=u.getSourceState();if(!bv(l,r)||c!="ready"&&c!="undefined"){u.unrender();continue}const h=u.render(e,o);h&&(h!==o&&(this.children_.push(h),o=h),n.push(l))}this.declutter(e,n),function(a,s){const l=a.childNodes;for(let u=0;;++u){const c=l[u],h=s[u];if(!c&&!h)break;c!==h&&(c?h?a.insertBefore(h,c):(a.removeChild(c),--u):a.appendChild(h))}}(this.element_,this.children_),this.dispatchRenderEvent(BM,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,i){if(e.declutter){for(let r=i.length-1;r>=0;--r){const n=i[r],o=n.layer;o.getDeclutter()&&o.renderDeclutter(e,n)}i.forEach(r=>r.layer.renderDeferred(e))}}}class Vn extends vr{constructor(e,i){super(e),this.layer=i}}const fp="layers";class Ls extends gx{constructor(e){e=e||{};const i=Object.assign({},e);delete i.layers;let r=e.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(fp,this.handleLayersChanged_),r?Array.isArray(r)?r=new ar(r.slice(),{unique:!0}):xt(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new ar(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(It),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(pt(e,Ko,this.handleLayersAdd_,this),pt(e,Xo,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(It);Lu(this.listenerKeys_);const i=e.getArray();for(let r=0,n=i.length;r<n;r++){const o=i[r];this.registerLayerListeners_(o),this.dispatchEvent(new Vn("addlayer",o))}this.changed()}registerLayerListeners_(e){const i=[pt(e,bs,this.handleLayerChange_,this),pt(e,At,this.handleLayerChange_,this)];e instanceof Ls&&i.push(pt(e,"addlayer",this.handleLayerGroupAdd_,this),pt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Xe(e)]=i}handleLayerGroupAdd_(e){this.dispatchEvent(new Vn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Vn("removelayer",e.layer))}handleLayersAdd_(e){const i=e.element;this.registerLayerListeners_(i),this.dispatchEvent(new Vn("addlayer",i)),this.changed()}handleLayersRemove_(e){const i=e.element,r=Xe(i);this.listenerKeys_[r].forEach(It),delete this.listenerKeys_[r],this.dispatchEvent(new Vn("removelayer",i)),this.changed()}getLayers(){return this.get(fp)}setLayers(e){const i=this.getLayers();if(i){const r=i.getArray();for(let n=0,o=r.length;n<o;++n)this.dispatchEvent(new Vn("removelayer",r[n]))}this.set(fp,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(i){i.getLayersArray(e)}),e}getLayerStatesArray(e){const i=e!==void 0?e:[],r=i.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(i)});const n=this.getLayerState();let o=n.zIndex;e||n.zIndex!==void 0||(o=0);for(let a=r,s=i.length;a<s;a++){const l=i[a];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=qi(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=o)}return i}getSourceState(){return"ready"}}class Ga extends vr{constructor(e,i,r){super(e),this.map=i,this.frameState=r!==void 0?r:null}}class _n extends Ga{constructor(e,i,r,n,o,a){super(e,i,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0&&n,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var Mt={SINGLECLICK:"singleclick",CLICK:Zl,DBLCLICK:FM,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},H5="pointermove",kw="pointerdown";class U5 extends Iu{constructor(e,i){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=pt(r,kw,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=pt(r,H5,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Z0,this.boundHandleTouchMove_,!!nw&&{passive:!1})}emulateClick_(e){let i=new _n(Mt.CLICK,this.map_,e);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new _n(Mt.DBLCLICK,this.map_,e),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new _n(Mt.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const i=e,r=i.pointerId;if(i.type==Mt.POINTERUP||i.type==Mt.POINTERCANCEL){delete this.trackedTouches_[r];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==i.target){delete this.trackedTouches_[n];break}}else i.type!=Mt.POINTERDOWN&&i.type!=Mt.POINTERMOVE||(this.trackedTouches_[r]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const i=new _n(Mt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(It),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const i=new _n(Mt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(pt(r,Mt.POINTERMOVE,this.handlePointerMove_,this),pt(r,Mt.POINTERUP,this.handlePointerUp_,this),pt(this.element_,Mt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(pt(this.element_.getRootNode(),Mt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const i=new _n(Mt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const i=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new _n(Mt.POINTERMOVE,this.map_,e,i))}handleTouchMove_(e){const i=this.originalPointerMoveEvent_;i&&!i.defaultPrevented||typeof e.cancelable=="boolean"&&e.cancelable!==!0||e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(It(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Z0,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(It(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(It),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var Iv="postrender",W5="movestart",Y5="moveend",Gy="loadstart",Hy="loadend",ac="layergroup",gp="size",sc="target",sl="view";const Ng=1/0;class K5{constructor(e,i){this.priorityFunction_=e,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Lu(this.queuedElements_)}dequeue(){const e=this.elements_,i=this.priorities_,r=e[0];e.length==1?(e.length=0,i.length=0):(e[0]=e.pop(),i[0]=i.pop(),this.siftUp_(0));const n=this.keyFunction_(r);return delete this.queuedElements_[n],r}enqueue(e){xt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(e);return i!=Ng&&(this.elements_.push(e),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const i=this.elements_,r=this.priorities_,n=i.length,o=i[e],a=r[e],s=e;for(;e<n>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<n&&r[u]<r[l]?u:l;i[e]=i[c],r[e]=r[c],e=c}i[e]=o,r[e]=a,this.siftDown_(s,e)}siftDown_(e,i){const r=this.elements_,n=this.priorities_,o=r[i],a=n[i];for(;i>e;){const s=this.getParentIndex_(i);if(!(n[s]>a))break;r[i]=r[s],n[i]=n[s],i=s}r[i]=o,n[i]=a}reprioritize(){const e=this.priorityFunction_,i=this.elements_,r=this.priorities_;let n=0;const o=i.length;let a,s,l;for(s=0;s<o;++s)a=i[s],l=e(a),l==Ng?delete this.queuedElements_[this.keyFunction_(a)]:(r[n]=l,i[n++]=a);i.length=n,r.length=n,this.heapify_()}}var li=0,ln=1,Bt=2,Ut=3,hi=4;class Tw extends K5{constructor(e,i){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const i=super.enqueue(e);return i&&e[0].addEventListener(At,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const i=e.target,r=i.getState();if(r===Bt||r===Ut||r===hi){r!==Ut&&i.removeEventListener(At,this.boundHandleTileChange_);const n=i.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,i){let r=0;for(;this.tilesLoading_<e&&r<i&&this.getCount()>0;){const n=this.dequeue()[0],o=n.getKey();n.getState()!==li||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,n.load())}}}class ya extends yr{constructor(e){super();const i=e.element;!i||e.target||i.style.pointerEvents||(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let i=0,r=this.listenerKeys.length;i<r;++i)It(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==ws&&this.listenerKeys.push(pt(e,Iv,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class X5 extends ya{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed===void 0||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible===void 0||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const i=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",n=e.expandClassName!==void 0?e.expandClassName:i+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:i+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=a):this.collapseLabel_=o;const s=e.label!==void 0?e.label:"i";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=n):this.label_=s;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Zl,this.handleClick_.bind(this),!1);const u=i+" "+Au+" "+Tv+(this.collapsed_&&this.collapsible_?" "+Iy:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const i=this.getMap().getAllLayers(),r=new Set(i.flatMap(n=>n.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>r.add(n)):r.add(this.attributions_)),!this.overrideCollapsible_){const n=!i.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(n)}return Array.from(r)}async updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const i=await Promise.all(this.collectSourceAttributions_(e).map(n=>na(()=>n))),r=i.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!yo(i,this.renderedAttributions_)){ow(this.ulElement_);for(let n=0,o=i.length;n<o;++n){const a=document.createElement("li");a.innerHTML=i[n],this.ulElement_.appendChild(a)}this.renderedAttributions_=i}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Iy),this.collapsed_?Ey(this.collapseLabel_,this.label_):Ey(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Z5 extends ya{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const i=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"⇧",n=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(n));const o=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=i+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),a.addEventListener(Zl,this.handleClick_.bind(this),!1);const s=i+" "+Au+" "+Tv,l=this.element;l.className=s,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide===void 0||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ec)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:Ds}):e.setRotation(0))}render(e){const i=e.frameState;if(!i)return;const r=i.viewState.rotation;if(r!=this.rotation_){const n="rotate("+r+"rad)";if(this.autoHide_){const o=this.element.classList.contains(ec);o||r!==0?o&&r!==0&&this.element.classList.remove(ec):this.element.classList.add(ec)}this.label_.style.transform=n}this.rotation_=r}}class Q5 extends ya{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const i=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,n=e.zoomInClassName!==void 0?e.zoomInClassName:i+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:i+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",s=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=n,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof a=="string"?document.createTextNode(a):a),c.addEventListener(Zl,this.handleClick_.bind(this,r),!1);const h=document.createElement("button");h.className=o,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof s=="string"?document.createTextNode(s):s),h.addEventListener(Zl,this.handleClick_.bind(this,-r),!1);const d=i+" "+Au+" "+Tv,p=this.element;p.className=d,p.appendChild(c),p.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,i){i.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const n=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:n,duration:this.duration_,easing:Ds})):i.setZoom(n)}}}var $g="active";class Ou extends yr{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get($g)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set($g,e)}setMap(e){this.map_=e}}function Pv(t,e,i,r){const n=t.getZoom();if(n===void 0)return;const o=t.getConstrainedZoom(n+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:i,duration:r!==void 0?r:250,easing:Ds})}class Ew extends Ou{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let i=!1;if(e.type==Mt.DBLCLICK){const r=e.originalEvent,n=e.map,o=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_;Pv(n.getView(),a,o,this.duration_),r.preventDefault(),i=!0}return!i}}class bo extends Ou{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Mt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Mt.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Mt.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,i=this.stopDown(r)}else e.type==Mt.POINTERMOVE&&this.handleMoveEvent(e);return!i}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Rv(t){const e=t.length;let i=0,r=0;for(let n=0;n<e;n++)i+=t[n].clientX,r+=t[n].clientY;return{clientX:i/e,clientY:r/e}}function Vg(t){const e=arguments;return function(i){let r=!0;for(let n=0,o=e.length;n<o&&(r=r&&e[n](i),r);++n);return r}}const J5=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Lw=function(t){const e=t.map.getTargetElement(),i=e.getRootNode();return!(i instanceof ShadowRoot?i.host:e).hasAttribute("tabindex")||function(r){const n=r.map.getTargetElement(),o=n.getRootNode(),a=r.map.getOwnerDocument().activeElement;return o instanceof ShadowRoot?o.host.contains(a):n.contains(a)}(t)},Gg=xs,Iw=function(t){const e=t.originalEvent;return e.button==0&&!(w5&&tw&&e.ctrlKey)},ek=Os,qv=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Pw=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Rw=function(t){const e=t.originalEvent,i=e.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!e.target.isContentEditable},mp=function(t){const e=t.originalEvent;return xt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},tk=function(t){const e=t.originalEvent;return xt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class ik extends bo{constructor(e){super({stopDown:Os}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=e.condition?e.condition:Vg(qv,tk);this.condition_=e.onFocusOnly?Vg(Lw,i):i,this.noKinetic_=!1}handleDragEvent(e){const i=e.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const r=this.targetPointers,n=i.getEventPixel(Rv(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const o=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],a=e.map.getView();(function(s,l){s[0]*=l,s[1]*=l})(o,a.getResolution()),tv(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const i=e.map,r=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=r.getCenterInternal(),s=i.getPixelFromCoordinateInternal(a),l=i.getCoordinateFromPixelInternal([s[0]-n*Math.cos(o),s[1]-n*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:Ds})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class rk extends bo{constructor(e){e=e||{},super({stopDown:Os}),this.condition_=e.condition?e.condition:J5,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mp(e))return;const i=e.map,r=i.getView();if(r.getConstraints().rotation===lv)return;const n=i.getSize(),o=e.pixel,a=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(this.lastAngle_!==void 0){const s=a-this.lastAngle_;r.adjustRotationInternal(-s)}this.lastAngle_=a}handleUpEvent(e){return mp(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mp(e)&&Iw(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class nk extends Eu{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,i=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(e[0],i[0])+r,n.top=Math.min(e[1],i[1])+r,n.width=Math.abs(i[0]-e[0])+r,n.height=Math.abs(i[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,i){this.startPixel_=e,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,i=this.endPixel_,r=[e,[e[0],i[1]],i,[i[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Wi([r])}getGeometry(){return this.geometry_}}const ok="boxstart",ak="boxdrag",sk="boxend",vp="boxcancel";class ll extends vr{constructor(e,i,r){super(e),this.coordinate=i,this.mapBrowserEvent=r}}class lk extends bo{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new nk(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Iw,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,i,r){const n=r[0]-i[0],o=r[1]-i[1];return n*n+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ll(ak,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const i=this.boxEndCondition_(e,this.startPixel_,e.pixel);return i&&this.onBoxEnd(e),this.dispatchEvent(new ll(i?sk:vp,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ll(ok,e.coordinate,e)),!0)}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ll(vp,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ll(vp,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class uk extends lk{constructor(e){super({condition:(e=e||{}).condition?e.condition:Pw,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0&&e.out}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const n=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(n),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Ds})}}var Uy="ArrowLeft",ck="ArrowUp",Wy="ArrowRight",Yy="ArrowDown";class hk extends Ou{constructor(e){super(),e=e||{},this.defaultCondition_=function(i){return qv(i)&&Rw(i)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let i=!1;if(e.type==vh){const r=e.originalEvent,n=r.key;if(this.condition_(e)&&(n==Yy||n==Uy||n==Wy||n==ck)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let s=0,l=0;n==Yy?l=-a:n==Uy?s=-a:n==Wy?s=a:l=a;const u=[s,l];tv(u,o.getRotation()),function(c,h,d){const p=c.getCenterInternal();if(p){const f=[p[0]+h[0],p[1]+h[1]];c.animateInternal({duration:d!==void 0?d:250,easing:l5,center:c.getConstrainedCenter(f)})}}(o,u,this.duration_),r.preventDefault(),i=!0}}return!i}}class dk extends Ou{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(i){return!function(r){const n=r.originalEvent;return tw?n.metaKey:n.ctrlKey}(i)&&Rw(i)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let i=!1;if(e.type==vh||e.type==fx){const r=e.originalEvent,n=r.key;if(this.condition_(e)&&(n==="+"||n==="-")){const o=e.map,a=n==="+"?this.delta_:-this.delta_;Pv(o.getView(),a,void 0,this.duration_),r.preventDefault(),i=!0}}return!i}}class pk{constructor(e,i,r){this.decay_=e,this.minVelocity_=i,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,i){this.points_.push(e,i,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<e)return!1;let r=i-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const n=this.points_[i+2]-this.points_[r+2];if(n<1e3/60)return!1;const o=this.points_[i]-this.points_[r],a=this.points_[i+1]-this.points_[r+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class fk extends Ou{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor===void 0||e.useAnchor,this.constrainResolution_=e.constrainResolution!==void 0&&e.constrainResolution;const i=e.condition?e.condition:Gg;this.condition_=e.onFocusOnly?Vg(Lw,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ol)return!0;const i=e.map,r=e.originalEvent;let n;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel),e.type==Ol&&(n=r.deltaY,x5&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=iw),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),n===0)return!1;this.lastDelta_=n;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=n;const s=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),s),!1}handleWheelZoom_(e){const i=e.getView();i.getAnimating()&&i.cancelAnimations();let r=-Nt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Pv(i,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class gk extends bo{constructor(e){const i=e=e||{};i.stopDown||(i.stopDown=Os),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let i=0;const r=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=l}this.lastAngle_=o;const a=e.map,s=a.getView();s.getConstraints().rotation!==lv&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Rv(this.targetPointers))),this.rotating_&&(a.render(),s.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const i=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class mk extends bo{constructor(e){const i=e=e||{};i.stopDown||(i.stopDown=Os),super(i),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let i=1;const r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,a=r.clientY-n.clientY,s=Math.sqrt(o*o+a*a);this.lastDistance_!==void 0&&(i=this.lastDistance_/s),this.lastDistance_=s;const l=e.map,u=l.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Rv(this.targetPointers))),l.render(),u.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const i=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function qw(t){t instanceof Bs?t.setMapInternal(null):t instanceof Ls&&t.getLayers().forEach(qw)}function Aw(t,e){if(t instanceof Bs)t.setMapInternal(e);else if(t instanceof Ls){const i=t.getLayers().getArray();for(let r=0,n=i.length;r<n;++r)Aw(i[r],e)}}var Ns=class extends yr{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(r){let n=null;r.keyboardEventTarget!==void 0&&(n=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const o={},a=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Ls({layers:r.layers});let s,l,u;return o[ac]=a,o[sc]=r.target,o[sl]=r.view instanceof Ki?r.view:new Ki,r.controls!==void 0&&(Array.isArray(r.controls)?s=new ar(r.controls.slice()):(xt(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=r.controls)),r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new ar(r.interactions.slice()):(xt(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions)),r.overlays!==void 0?Array.isArray(r.overlays)?u=new ar(r.overlays.slice()):(xt(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=r.overlays):u=new ar,{controls:s,interactions:l,keyboardEventTarget:n,overlays:u,values:o}}(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:iw,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||function(r){r=r||{};const n=new ar;return(r.zoom===void 0||r.zoom)&&n.push(new Q5(r.zoomOptions)),(r.rotate===void 0||r.rotate)&&n.push(new Z5(r.rotateOptions)),(r.attribution===void 0||r.attribution)&&n.push(new X5(r.attributionOptions)),n}(),this.interactions=e.interactions||function(r){r=r||{};const n=new ar,o=new pk(-.005,.05,100);return(r.altShiftDragRotate===void 0||r.altShiftDragRotate)&&n.push(new rk),(r.doubleClickZoom===void 0||r.doubleClickZoom)&&n.push(new Ew({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan===void 0||r.dragPan)&&n.push(new ik({onFocusOnly:r.onFocusOnly,kinetic:o})),(r.pinchRotate===void 0||r.pinchRotate)&&n.push(new gk),(r.pinchZoom===void 0||r.pinchZoom)&&n.push(new mk({duration:r.zoomDuration})),(r.keyboard===void 0||r.keyboard)&&(n.push(new hk),n.push(new dk({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom===void 0||r.mouseWheelZoom)&&n.push(new fk({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom===void 0||r.shiftDragZoom)&&n.push(new uk({duration:r.zoomDuration})),n}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Tw(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ac,this.handleLayerGroupChanged_),this.addChangeListener(sl,this.handleViewChanged_),this.addChangeListener(gp,this.handleSizeChanged_),this.addChangeListener(sc,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof Ki||t.view.then(function(r){i.setView(new Ki(r))}),this.controls.addEventListener(Ko,r=>{r.element.setMap(this)}),this.controls.addEventListener(Xo,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Ko,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Xo,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Ko,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Xo,r=>{const n=r.element.getId();n!==void 0&&delete this.overlayIdIndex_[n.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Aw(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t),n=(i=i!==void 0?i:{}).hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:xs,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,a,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},e),i}getAllLayers(){const t=[];return function e(i){i.forEach(function(r){r instanceof Ls?e(r.getLayers()):t.push(r)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),r=(e=e!==void 0?e:{}).layerFilter!==void 0?e.layerFilter:xs,n=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),r=e.width/i[0],n=e.height/i[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/r,(o.clientY-e.top)/n]}getTarget(){return this.get(sc)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Zf(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ri(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ac)}setLayers(t){const e=this.getLayerGroup();if(t instanceof ar)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const r=t[e];if(!r.visible)continue;const n=r.layer.getRenderer();if(n&&!n.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Sr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ri(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(gp)}getView(){return this.get(sl)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,r){return function(n,o,a,s,l){if(!n||!(a in n.wantedTiles)||!n.wantedTiles[a][o.getKey()])return Ng;const u=n.viewState.center,c=s[0]-u[0],h=s[1]-u[1];return 65536*Math.log(l)+Math.sqrt(c*c+h*h)/l}(this.frameState_,t,e,i,r)}handleBrowserEvent(t,e){e=e||t.type;const i=new _n(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===kw||i===Ol||i===vh){const r=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=e.target,a=n instanceof ShadowRoot?n.host===o?n.host.ownerDocument:n:n===r?r.documentElement:n;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let n=r.length-1;n>=0;n--){const o=r[n];if(!(o.getMap()!==this||!o.getActive()||!this.getTargetElement())&&(!o.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,n=r;if(t){const o=t.viewHints;if(o[Ji]||o[Rr]){const a=Date.now()-t.time>8;r=a?0:8,n=a?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(tp)&&this.renderer_.dispatchRenderEvent(tp,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ga(Hy,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ga(Gy,this,t))));const i=this.postRenderFunctions_;if(t)for(let r=0,n=i.length;r<n;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)It(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(zf,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ol,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new G5(this)),this.mapBrowserEventHandler_=new U5(this,this.moveTolerance_);for(const n in Mt)this.mapBrowserEventHandler_.addEventListener(Mt[n],this.handleMapBrowserEvent.bind(this));let i;if(this.viewport_.addEventListener(zf,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ol,this.boundHandleBrowserEvent_,!!nw&&{passive:!1}),this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const n=e.getRootNode();i=n instanceof ShadowRoot?n.host:e}this.targetChangeHandlerKeys_=[pt(i,vh,this.handleBrowserEvent,this),pt(i,fx,this.handleBrowserEvent,this)];const r=e.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(It(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(It(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=pt(t,bs,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=pt(t,At,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(It),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Vn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[pt(t,bs,this.render,this),pt(t,At,this.render,this),pt(t,"addlayer",this.handleLayerAdd_,this),pt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){qw(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),r=this.frameState_;let n=null;if(e!==void 0&&Ly(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(n={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:xh(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Xe(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const s=isNaN(a.nextRotation)?a.rotation:a.nextRotation;n.nextExtent=xh(a.nextCenter,a.nextResolution,s,e)}}this.frameState_=n,this.renderer_.renderFrame(n),n&&(n.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,n.postRenderFunctions),r&&(!this.previousExtent_||!va(this.previousExtent_)&&!Tn(n.extent,this.previousExtent_))&&(this.dispatchEvent(new Ga(W5,this,r)),this.previousExtent_=zs(this.previousExtent_)),this.previousExtent_&&!n.viewHints[Ji]&&!n.viewHints[Rr]&&!Tn(n.extent,this.previousExtent_)&&(this.dispatchEvent(new Ga(Y5,this,n)),vx(n.extent,this.previousExtent_))),this.dispatchEvent(new Ga(Iv,this,n)),this.renderComplete_=(this.hasListener(Gy)||this.hasListener(Hy)||this.hasListener(tp))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Vn("removelayer",e)),this.set(ac,t)}setSize(t){this.set(gp,t)}setTarget(t){this.set(sc,t)}setView(t){if(!t||t instanceof Ki)return void this.set(sl,t);this.set(sl,new Ki);const e=this;t.then(function(i){e.setView(new Ki(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const r=getComputedStyle(t),n=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(o)||(e=[Math.max(0,n),Math.max(0,o)],!Ly(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&qx("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&yo(e,i)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}},Ph="preload",Rh="useInterimTilesOnError";class vk extends Bs{constructor(e){e=e||{};const i=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError===void 0||e.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ph)}setPreload(e){this.set(Ph,e)}getUseInterimTilesOnError(){return this.get(Rh)}setUseInterimTilesOnError(e){this.set(Rh,e)}getData(e){return super.getData(e)}}class yk extends zl{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ye()}getData(e){return null}prepareFrame(e){return Ye()}renderFrame(e,i){return Ye()}forEachFeatureAtCoordinate(e,i,r,n,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const i=e.target;i.getState()!==zt&&i.getState()!==qr||this.renderIfReadyAndVisible()}loadImage(e){let i=e.getState();return i!=zt&&i!=qr&&e.addEventListener(At,this.boundHandleImageChange_),i==Yi&&(e.load(),i=e.getState()),i==zt}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Av{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Eh(),{get:(e,i)=>{if(typeof Eh()[i]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i),this.pushMethodArgs_},set:(e,i,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i,r),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(i=>{for(let r=0,n=i.length;r<n;++r){const o=i[r];if(typeof o=="function"){o(e);continue}const a=i[++r];if(typeof e[o]=="function")e[o](...a);else{if(typeof a=="function"){e[o]=a(e);continue}e[o]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Ky=[];let ka=null;class Fv extends yk{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,i,r){let n;ka||(ka=Vt(1,1,void 0,{willReadFrequently:!0})),ka.clearRect(0,0,1,1);try{ka.drawImage(e,i,r,1,1,0,0,1,1),n=ka.getImageData(0,0,1,1).data}catch{return ka=null,null}return n}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,i,r){const n=this.getLayer().getClassName();let o,a;if(e&&e.className===n&&(!r||e&&e.style.backgroundColor&&yo(Ms(e.style.backgroundColor),Ms(r)))){const s=e.firstElementChild;s instanceof HTMLCanvasElement&&(a=s.getContext("2d"))}if(a&&a.canvas.style.transform===i?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=n;let s=o.style;s.position="absolute",s.width="100%",s.height="100%",a=Vt();const l=a.canvas;o.appendChild(l),s=l.style,s.position="absolute",s.left="0",s.transformOrigin="top left",this.container=o,this.context=a}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}clipUnrotated(e,i,r){const n=pr(r),o=vd(r),a=md(r),s=gd(r);ri(i.coordinateToPixelTransform,n),ri(i.coordinateToPixelTransform,o),ri(i.coordinateToPixelTransform,a),ri(i.coordinateToPixelTransform,s);const l=this.inversePixelTransform;ri(l,n),ri(l,o),ri(l,a),ri(l,s),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,i){const r=e.extent,n=e.viewState.resolution,o=e.viewState.rotation,a=e.pixelRatio,s=Math.round(tt(r)/n*a),l=Math.round($t(r)/n*a);sn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,o,-s/2,-l/2),zx(this.inversePixelTransform,this.pixelTransform);const u=function(c){return"matrix("+c.map((h,d)=>Math.round(h*by[d])/by[d]).join(", ")+")"}(this.pixelTransform);if(this.useContainer(i,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=s||c.height!=l?(c.width=s,c.height=l):this.context.clearRect(0,0,s,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,i,r){const n=this.getLayer();if(n.hasListener(e)){const o=new Mw(e,this.inversePixelTransform,r,i);n.dispatchEvent(o)}}preRender(e,i){this.frameState=i,i.declutter||this.dispatchRenderEvent_(Bf,e,i)}postRender(e,i){i.declutter||this.dispatchRenderEvent_(jf,e,i)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Av),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Bf,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(jf,this.context,e))}getRenderTransform(e,i,r,n,o,a,s){const l=o/2,u=a/2,c=n/i,h=-c,d=-e[0]+s,p=-e[1];return sn(this.tempTransform,l,u,c,h,-r,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class zu extends Iu{constructor(e,i,r){super(),r=r||{},this.tileCoord=e,this.state=i,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(At)}release(){this.state===Ut&&this.setState(hi)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Ut&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Ye()}getAlpha(e,i){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(r){if(r===-1)return 1}else r=i,this.transitionStarts_[e]=r;const n=i-r+1e3/60;return n>=this.transition_?1:Fx(n/this.transition_)}inTransition(e){return!!this.transition_&&this.transitionStarts_[e]!==-1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function qh(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const _k=new Error("disposed");let Ta=null;const bk=[256,256];class Ah extends zu{constructor(e){const i=li;super(e.tileCoord,i,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=qh(this.data_);return e?[e.width,e.height]:bk}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==li&&this.state!==Ut)return;this.state=ln,this.changed();const e=this;this.loader_().then(function(i){e.data_=i,e.state=Bt,e.changed()}).catch(function(i){e.error_=i,e.state=Ut,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(_k),this.controller_=null),super.disposeInternal()}}class Fw extends zu{constructor(e,i,r,n,o,a){super(e,i,a),this.crossOrigin_=n,this.src_=r,this.key=r,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Bt,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Ut,this.unlistenImage_(),this.image_=function(){const e=Vt(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Bt:this.state=hi,this.unlistenImage_(),this.changed()}load(){this.state==Ut&&(this.state=li,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==li&&(this.state=ln,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(e,i,r){const n=e;let o=!0,a=!1,s=!1;const l=[yh(n,OM,function(){s=!0,a||i()})];return n.src&&rw?(a=!0,n.decode().then(function(){o&&i()}).catch(function(u){o&&(s?i():r())})):l.push(yh(n,AM,r)),function(){o=!1,l.forEach(It)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}class xk{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Eu&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let i=this.oldest_;for(;i;)e(i.value_,i.key_,this),i=i.newer}get(e,i){const r=this.entries_[e];return xt(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const i=this.entries_[e];return xt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[e],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,r=0;for(i=this.newest_;i;i=i.older)e[r++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,r=0;for(i=this.newest_;i;i=i.older)e[r++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,i){this.get(e),this.entries_[e].value_=i}set(e,i){xt(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}class Ov{constructor(e,i,r,n,o,a,s){this.sourceProj_=e,this.targetProj_=i;let l={};const u=s?Kf(m=>ri(s,Kn(m,this.targetProj_,this.sourceProj_))):Cs(this.targetProj_,this.sourceProj_);this.transformInv_=function(m){const y=m[0]+"/"+m[1];return l[y]||(l[y]=u(m)),l[y]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&tt(n)>=tt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?tt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?tt(this.targetProj_.getExtent()):null;const c=pr(r),h=vd(r),d=md(r),p=gd(r),f=this.transformInv_(c),g=this.transformInv_(h),_=this.transformInv_(d),v=this.transformInv_(p),b=10+(a?Math.max(0,Math.ceil(Math.log2(Ql(r)/(a*a*256*256)))):0);if(this.addQuad_(c,h,d,p,f,g,_,v,b),this.wrapsXInSource_){let m=1/0;this.triangles_.forEach(function(y,x,C){m=Math.min(m,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(y=>{if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-m>this.sourceWorldWidth_/2){const x=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];x[0][0]-m>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-m>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-m>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const C=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-C<this.sourceWorldWidth_/2&&(y.source=x)}})}l={}}addTriangle_(e,i,r,n,o,a){this.triangles_.push({source:[n,o,a],target:[e,i,r]})}addQuad_(e,i,r,n,o,a,s,l,u){const c=bh([o,a,s,l]),h=this.sourceWorldWidth_?tt(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1;let f=!1;if(u>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=tt(bh([e,i,r,n]))/this.targetWorldWidth_>.25||f),!p&&this.sourceProj_.isGlobal()&&h&&(f=h>.25||f)),!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Qt(c,this.maxSourceExtent_))return;let g=0;if(!(f||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1]))){if(u>0)f=!0;else if(g=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),g!=1&&g!=2&&g!=4&&g!=8)return}if(u>0){if(!f){const _=[(e[0]+r[0])/2,(e[1]+r[1])/2],v=this.transformInv_(_);let b;p?b=(no(o[0],d)+no(s[0],d))/2-no(v[0],d):b=(o[0]+s[0])/2-v[0];const m=(o[1]+s[1])/2-v[1];f=b*b+m*m>this.errorThresholdSquared_}if(f){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const _=[(i[0]+r[0])/2,(i[1]+r[1])/2],v=this.transformInv_(_),b=[(n[0]+e[0])/2,(n[1]+e[1])/2],m=this.transformInv_(b);this.addQuad_(e,i,_,b,o,a,v,m,u-1),this.addQuad_(b,_,r,n,m,v,s,l,u-1)}else{const _=[(e[0]+i[0])/2,(e[1]+i[1])/2],v=this.transformInv_(_),b=[(r[0]+n[0])/2,(r[1]+n[1])/2],m=this.transformInv_(b);this.addQuad_(e,_,b,n,o,v,m,l,u-1),this.addQuad_(_,i,r,b,v,a,s,m,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&g||this.addTriangle_(e,r,n,o,s,l),14&g||this.addTriangle_(e,r,i,o,s,a),g&&(13&g||this.addTriangle_(i,n,e,a,l,o),7&g||this.addTriangle_(i,n,r,a,l,s))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(i,r,n){const o=i.source;Dl(e,o[0]),Dl(e,o[1]),Dl(e,o[2])}),e}getTriangles(){return this.triangles_}}let yp;const Ha=[];function Xy(t,e,i,r,n){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(r,n),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(i,n)),t.restore()}function _p(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Hg(t,e,i,r){const n=Kn(i,e,t);let o=tu(e,r,i);const a=e.getMetersPerUnit();a!==void 0&&(o*=a);const s=t.getMetersPerUnit();s!==void 0&&(o/=s);const l=t.getExtent();if(!l||aa(l,n)){const u=tu(t,o,n)/o;isFinite(u)&&u>0&&(o/=u)}return o}function Ow(t,e,i,r){const n=Ui(i);let o=Hg(t,e,n,r);return(!isFinite(o)||o<=0)&&Jm(i,function(a){return o=Hg(t,e,a,r),isFinite(o)&&o>0}),o}function zw(t,e,i,r,n,o,a,s,l,u,c,h,d,p){const f=Vt(Math.round(i*t),Math.round(i*e),Ha);if(h||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;function g(x){return Math.round(x*i)/i}f.scale(i,i),f.globalCompositeOperation="lighter";const _=[1/0,1/0,-1/0,-1/0];let v;l.forEach(function(x,C,k){Qm(_,x.extent)});const b=i/r,m=(h?1:1+Math.pow(2,-24))/b;if(!d||l.length!==1||u!==0){if(v=Vt(Math.round(tt(_)*b),Math.round($t(_)*b),Ha),h||(v.imageSmoothingEnabled=!1),n&&p){const x=(n[0]-_[0])*b,C=-(n[3]-_[3])*b,k=tt(n)*b,L=$t(n)*b;v.rect(x,C,k,L),v.clip()}l.forEach(function(x,C,k){if(x.image.width>0&&x.image.height>0){if(x.clipExtent){v.save();const T=(x.clipExtent[0]-_[0])*b,R=-(x.clipExtent[3]-_[3])*b,M=tt(x.clipExtent)*b,q=$t(x.clipExtent)*b;v.rect(h?T:Math.round(T),h?R:Math.round(R),h?M:Math.round(T+M)-Math.round(T),h?q:Math.round(R+q)-Math.round(R)),v.clip()}const L=(x.extent[0]-_[0])*b,A=-(x.extent[3]-_[3])*b,E=tt(x.extent)*b,I=$t(x.extent)*b;v.drawImage(x.image,u,u,x.image.width-2*u,x.image.height-2*u,h?L:Math.round(L),h?A:Math.round(A),h?E:Math.round(L+E)-Math.round(L),h?I:Math.round(A+I)-Math.round(A)),x.clipExtent&&v.restore()}})}const y=pr(a);return s.getTriangles().forEach(function(x,C,k){const L=x.source,A=x.target;let E=L[0][0],I=L[0][1],T=L[1][0],R=L[1][1],M=L[2][0],q=L[2][1];const P=g((A[0][0]-y[0])/o),F=g(-(A[0][1]-y[1])/o),j=g((A[1][0]-y[0])/o),V=g(-(A[1][1]-y[1])/o),O=g((A[2][0]-y[0])/o),$=g(-(A[2][1]-y[1])/o),J=E,te=I;E=0,I=0,T-=J,R-=te,M-=J,q-=te;const ie=function(z){const B=z.length;for(let U=0;U<B;U++){let W=U,ve=Math.abs(z[U][U]);for(let fe=U+1;fe<B;fe++){const pe=Math.abs(z[fe][U]);pe>ve&&(ve=pe,W=fe)}if(ve===0)return null;const ce=z[W];z[W]=z[U],z[U]=ce;for(let fe=U+1;fe<B;fe++){const pe=-z[fe][U]/z[U][U];for(let Ee=U;Ee<B+1;Ee++)U==Ee?z[fe][Ee]=0:z[fe][Ee]+=pe*z[U][Ee]}}const K=new Array(B);for(let U=B-1;U>=0;U--){K[U]=z[U][B]/z[U][U];for(let W=U-1;W>=0;W--)z[W][B]-=z[W][U]*K[U]}return K}([[T,R,0,0,j-P],[M,q,0,0,O-P],[0,0,T,R,V-F],[0,0,M,q,$-F]]);if(!ie)return;if(f.save(),f.beginPath(),function(){if(yp===void 0){const z=Vt(6,6,Ha);z.globalCompositeOperation="lighter",z.fillStyle="rgba(210, 0, 0, 0.75)",Xy(z,4,5,4,0),Xy(z,4,5,0,5);const B=z.getImageData(0,0,3,3).data;yp=_p(B,0)||_p(B,4)||_p(B,8),au(z),Ha.push(z.canvas)}return yp}()||!h){f.moveTo(j,V);const z=4,B=P-j,K=F-V;for(let U=0;U<z;U++)f.lineTo(j+g((U+1)*B/z),V+g(U*K/(z-1))),U!=z-1&&f.lineTo(j+g((U+1)*B/z),V+g((U+1)*K/(z-1)));f.lineTo(O,$)}else f.moveTo(j,V),f.lineTo(P,F),f.lineTo(O,$);let N;if(f.clip(),f.transform(ie[0],ie[2],ie[1],ie[3],P,F),f.translate(_[0]-J,_[3]-te),v)N=v.canvas,f.scale(m,-m);else{const z=l[0],B=z.extent;N=z.image,f.scale(tt(B)/N.width,-$t(B)/N.height)}f.drawImage(N,0,0),f.restore()}),v&&(au(v),Ha.push(v.canvas)),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,s.getTriangles().forEach(function(x,C,k){const L=x.target,A=(L[0][0]-y[0])/o,E=-(L[0][1]-y[1])/o,I=(L[1][0]-y[0])/o,T=-(L[1][1]-y[1])/o,R=(L[2][0]-y[0])/o,M=-(L[2][1]-y[1])/o;f.beginPath(),f.moveTo(I,T),f.lineTo(A,E),f.lineTo(R,M),f.closePath(),f.stroke()}),f.restore()),f.canvas}function Ug(t,e,i,r,n,o,a){const s=1/(t-e),l=1/(i-r),u=1/(n-o);return(a=a??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=-2*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*l,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*u,a[11]=0,a[12]=(t+e)*s,a[13]=(r+i)*l,a[14]=(o+n)*u,a[15]=1,a}function Zy(t,e,i,r,n){return(n=n??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[7]=t[7]*i,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}class wk{constructor(e){this.gl_=e,this.program_=Wg(e,`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,i,r,n,o,a,s,l,u,c,h,d,p){const f=this.gl_;l===void 0&&(l=n),u===void 0&&(u=o),a===void 0&&(a=i),s===void 0&&(s=r),c===void 0&&(c=a),h===void 0&&(h=s),d===void 0&&(d=f.canvas.width),p===void 0&&(p=f.canvas.height),f.bindTexture(f.TEXTURE_2D,e),f.useProgram(this.program_),f.bindBuffer(f.ARRAY_BUFFER,this.positionBuffer),f.enableVertexAttribArray(this.positionLocation),f.vertexAttribPointer(this.positionLocation,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.texcoordBuffer),f.enableVertexAttribArray(this.texcoordLocation),f.vertexAttribPointer(this.texcoordLocation,2,f.FLOAT,!1,0,0);let g=Ug(0,d,0,p,-1,1);g=function(v,b,m,y,x){let C,k,L,A,E,I,T,R,M,q,P,F;return v===(x=x??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])?(x[12]=v[0]*b+v[4]*m+v[8]*y+v[12],x[13]=v[1]*b+v[5]*m+v[9]*y+v[13],x[14]=v[2]*b+v[6]*m+v[10]*y+v[14],x[15]=v[3]*b+v[7]*m+v[11]*y+v[15]):(C=v[0],k=v[1],L=v[2],A=v[3],E=v[4],I=v[5],T=v[6],R=v[7],M=v[8],q=v[9],P=v[10],F=v[11],x[0]=C,x[1]=k,x[2]=L,x[3]=A,x[4]=E,x[5]=I,x[6]=T,x[7]=R,x[8]=M,x[9]=q,x[10]=P,x[11]=F,x[12]=C*b+E*m+M*y+v[12],x[13]=k*b+I*m+q*y+v[13],x[14]=L*b+T*m+P*y+v[14],x[15]=A*b+R*m+F*y+v[15]),x}(g,l,u,0),g=Zy(g,c,h,1),f.uniformMatrix4fv(this.matrixLocation,!1,g);let _=function(v,b,m,y){return(y=y??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=v,y[13]=b,y[14]=m,y[15]=1,y}(n/i,o/r,0);_=Zy(_,a/i,s/r,1),f.uniformMatrix4fv(this.textureMatrixLocation,!1,_),f.uniform1i(this.textureLocation,0),f.drawArrays(f.TRIANGLES,0,this.positions.length/2)}}function Qy(t,e,i){const r=t.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){const n=t.getShaderInfoLog(r);throw n===null?new Error("Shader info log creation failed"):new Error(n)}return r}function Wg(t,e,i){const r=t.createProgram(),n=Qy(t,t.VERTEX_SHADER,i),o=Qy(t,t.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(t.attachShader(r,n),t.attachShader(r,o),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw t.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const Jy=[];function Sk(t,e,i,r,n,o,a,s,l,u,c,h,d,p){const f=Math.round(r*e),g=Math.round(r*i);let _,v;if(t.canvas.width=f,t.canvas.height=g,v=t.createTexture(),t.bindTexture(t.TEXTURE_2D,v),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),d?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,f,g,0,t.RGBA,c,null),_=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,v,0),_===null)throw new Error("Could not create framebuffer");if(v===null)throw new Error("Could not create texture");if(l.length===0)return{width:f,height:g,framebuffer:_,texture:v};const b=[1/0,1/0,-1/0,-1/0];let m,y,x;l.forEach(function(E,I,T){Qm(b,E.extent)});const C=1/n;{if(m=t.createTexture(),v===null)throw new Error("Could not create texture");y=Math.round(tt(b)*C),x=Math.round($t(b)*C);const E=t.getParameter(t.MAX_TEXTURE_SIZE),I=Math.max(y,x),T=I>E?E/I:1,R=Math.round(y*T),M=Math.round(x*T);t.bindTexture(t.TEXTURE_2D,m),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),d?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,R,M,0,t.RGBA,c,null);const q=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,q),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,m,0);const P=new wk(t);l.forEach(function(F,j,V){const O=(F.extent[0]-b[0])*C*T,$=-(F.extent[3]-b[3])*C*T,J=tt(F.extent)*C*T,te=$t(F.extent)*C*T;if(t.bindFramebuffer(t.FRAMEBUFFER,q),t.viewport(0,0,R,M),F.clipExtent){const ie=(F.clipExtent[0]-b[0])*C*T,N=-(F.clipExtent[3]-b[3])*C*T,z=tt(F.clipExtent)*C*T,B=$t(F.clipExtent)*C*T;t.enable(t.SCISSOR_TEST),t.scissor(d?ie:Math.round(ie),d?N:Math.round(N),d?z:Math.round(ie+z)-Math.round(ie),d?B:Math.round(N+B)-Math.round(N))}P.drawImage(F.texture,F.width,F.height,u,u,F.width-2*u,F.height-2*u,d?O:Math.round(O),d?$:Math.round($),d?J:Math.round(O+J)-Math.round(O),d?te:Math.round($+te)-Math.round($),R,M),t.disable(t.SCISSOR_TEST)}),t.deleteFramebuffer(q)}const k=pr(a),L=pr(b),A=E=>{const I=(E[0][0]-k[0])/o*r,T=-(E[0][1]-k[1])/o*r;return{u1:(E[1][0]-k[0])/o*r,v1:-(E[1][1]-k[1])/o*r,u0:I,v0:T,u2:(E[2][0]-k[0])/o*r,v2:-(E[2][1]-k[1])/o*r}};t.bindFramebuffer(t.FRAMEBUFFER,_),t.viewport(0,0,f,g);{const E=[],I=[],T=Wg(t,`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`);t.useProgram(T);const R=t.getUniformLocation(T,"u_texture");t.bindTexture(t.TEXTURE_2D,m),t.uniform1i(R,0),s.getTriangles().forEach(function(O,$,J){const te=O.source,ie=O.target,{u1:N,v1:z,u0:B,v0:K,u2:U,v2:W}=A(ie),ve=(te[0][0]-L[0])/n/y,ce=-(te[0][1]-L[1])/n/x,fe=(te[1][0]-L[0])/n/y,pe=-(te[1][1]-L[1])/n/x,Ee=(te[2][0]-L[0])/n/y,Le=-(te[2][1]-L[1])/n/x;E.push(N,z,B,K,U,W),I.push(fe,pe,ve,ce,Ee,Le)});const M=Ug(0,f,g,0,-1,1),q=t.getUniformLocation(T,"u_matrix");t.uniformMatrix4fv(q,!1,M);const P=t.getAttribLocation(T,"a_position"),F=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,F),t.bufferData(t.ARRAY_BUFFER,new Float32Array(E),t.STATIC_DRAW),t.vertexAttribPointer(P,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(P);const j=t.getAttribLocation(T,"a_texcoord"),V=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,V),t.bufferData(t.ARRAY_BUFFER,new Float32Array(I),t.STATIC_DRAW),t.vertexAttribPointer(j,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(j),t.drawArrays(t.TRIANGLES,0,E.length/2)}if(h){const E=Wg(t,`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`);t.useProgram(E);const I=Ug(0,f,g,0,-1,1),T=t.getUniformLocation(E,"u_matrix");t.uniformMatrix4fv(T,!1,I);const R=Array.isArray(h)?h:[0,0,0,255],M=t.getUniformLocation(E,"u_val");t.uniform4fv(M,R);const q=t.getAttribLocation(E,"a_position"),P=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,P),t.vertexAttribPointer(q,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(q);const F=s.getTriangles().reduce(function(j,V){const O=V.target,{u1:$,v1:J,u0:te,v0:ie,u2:N,v2:z}=A(O);return j.concat([$,J,te,ie,te,ie,N,z,N,z,$,J])},[]);t.bufferData(t.ARRAY_BUFFER,new Float32Array(F),t.STATIC_DRAW),t.drawArrays(t.LINES,0,F.length/2)}return{width:f,height:g,framebuffer:_,texture:v}}class Dw extends Ah{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0&&e.renderEdges,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const i=e.sourceProj,r=i.getExtent(),n=e.sourceTileGrid.getExtent();this.clipExtent_=i.canWrapX()?n?qi(r,n):r:n;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const l=a?qi(o,a):o;if(Ql(l)===0)return void(this.state=hi);r&&(s=s?qi(s,r):r);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=Ow(i,c,l,u);if(!isFinite(h)||h<=0)return void(this.state=hi);const d=e.errorThreshold!==void 0?e.errorThreshold:.5;if(this.triangulation_=new Ov(i,c,l,s,h*d,u,e.transformMatrix),this.triangulation_.getTriangles().length===0)return void(this.state=hi);this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let p=this.triangulation_.calculateSourceExtent();if(s&&(i.canWrapX()?(p[1]=Nt(p[1],s[1],s[3]),p[3]=Nt(p[3],s[1],s[3])):p=qi(p,s)),Ql(p)){let f=0,g=0;i.canWrapX()&&(f=tt(r),g=Math.floor((p[0]-r[0])/f)),ev(p.slice(),i,!0).forEach(_=>{const v=this.sourceTileGrid_.getTileRangeForExtentAndZ(_,this.sourceZ_),b=e.getTileFunction;for(let m=v.minX;m<=v.maxX;m++)for(let y=v.minY;y<=v.maxY;y++){const x=b(this.sourceZ_,m,y,this.pixelRatio_);if(x){const C=g*f;this.sourceTiles_.push({tile:x,offset:C})}}++g}),this.sourceTiles_.length===0&&(this.state=hi)}else this.state=hi}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let i=!1;if(this.sourceTiles_.forEach(b=>{const m=b.tile;if(!m||m.getState()!==Bt)return;const y=m.getSize(),x=this.gutter_;let C;const k=(L=m.getData())instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Float32Array||L instanceof DataView?L:null;var L;k?C=k:(i=!0,C=function(O){Ta||(Ta=Vt(O.width,O.height,void 0,{willReadFrequently:!0}));const $=Ta.canvas,J=O.width;$.width!==J&&($.width=J);const te=O.height;return $.height!==te&&($.height=te),Ta.clearRect(0,0,J,te),Ta.drawImage(O,0,0),Ta.getImageData(0,0,J,te).data}(qh(m.getData())));const A=[y[0]+2*x,y[1]+2*x],E=C instanceof Float32Array,I=A[0]*A[1],T=E?Float32Array:Uint8ClampedArray,R=new T(C.buffer),M=T.BYTES_PER_ELEMENT,q=M*R.length/I,P=R.byteLength/A[1],F=Math.floor(P/M/A[0]),j=this.sourceTileGrid_.getTileCoordExtent(m.tileCoord);j[0]+=b.offset,j[2]+=b.offset;const V=this.clipExtent_?.slice();V&&(V[0]+=b.offset,V[2]+=b.offset),e.push({extent:j,clipExtent:V,data:R,dataType:T,bytesPerPixel:q,pixelSize:A,bandCount:F})}),this.sourceTiles_.length=0,e.length===0)return this.state=Ut,void this.changed();const r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),o=typeof n=="number"?n:n[0],a=typeof n=="number"?n:n[1],s=o*this.pixelRatio_,l=a*this.pixelRatio_,u=this.targetTileGrid_.getResolution(r),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),d=e[0].bandCount,p=new e[0].dataType(d*s*l),f=function(b,m,y,x){let C;return C=y&&y.length?y.shift():Cv?new OffscreenCanvas(b||300,m||300):document.createElement("canvas"),b&&(C.width=b),m&&(C.height=m),C.getContext("webgl",x)}(s,l,Jy,{premultipliedAlpha:!1,antialias:!1});let g;const _=f.RGBA;let v;e[0].dataType==Float32Array?(v=f.FLOAT,f.getExtension("WEBGL_color_buffer_float"),f.getExtension("OES_texture_float"),f.getExtension("EXT_float_blend"),g=f.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(v=f.UNSIGNED_BYTE,g=this.interpolate);for(let b=Math.ceil(d/4)-1;b>=0;--b){const m=[];for(let I=0,T=e.length;I<T;++I){const R=e[I],M=R.pixelSize,q=M[0],P=M[1],F=new R.dataType(4*q*P),j=R.data;let V=4*b;for(let $=0,J=F.length;$<J;$+=4)F[$]=j[V],F[$+1]=j[V+1],F[$+2]=j[V+2],F[$+3]=j[V+3],V+=d;const O=f.createTexture();f.bindTexture(f.TEXTURE_2D,O),g?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST)),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texImage2D(f.TEXTURE_2D,0,_,q,P,0,_,v,F),m.push({extent:R.extent,clipExtent:R.clipExtent,texture:O,width:q,height:P})}const{framebuffer:y,width:x,height:C}=Sk(f,o,a,this.pixelRatio_,c,u,h,this.triangulation_,m,this.gutter_,v,this.renderEdges_,g),k=x,L=4*C,A=new e[0].dataType(k*L);f.bindFramebuffer(f.FRAMEBUFFER,y),f.readPixels(0,0,x,C,f.RGBA,v,A);let E=4*b;for(let I=0,T=A.length;I<T;I+=4){const R=(k-1-(I/L|0))*L+I%L;p[E]=A[R],p[E+1]=A[R+1],p[E+2]=A[R+2],p[E+3]=A[R+3],E+=d}}if(function(b){const m=b.canvas;m.width=1,m.height=1,b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT)}(f),Jy.push(f.canvas),i){const b=Vt(o,a),m=new ImageData(p,o);b.putImageData(m,0,0),this.reprojData_=b.canvas}else this.reprojData_=p;this.reprojSize_=[Math.round(s),Math.round(l)],this.state=Bt,this.changed()}load(){if(this.state!==li&&this.state!==Ut)return;this.state=ln,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const r=i.getState();if(r!==li&&r!==ln)return;e++;const n=pt(i,At,()=>{const o=i.getState();o!=Bt&&o!=Ut&&o!=hi||(It(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i}){i.getState()==li&&i.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(It),this.sourcesListenerKeys_=null}}class Yg extends zu{constructor(e,i,r,n,o,a,s,l,u,c,h,d){super(o,li,d),this.renderEdges_=h!==void 0&&h,this.pixelRatio_=s,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=n,this.wrappedTileCoord_=a||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=n.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const _=f?qi(p,f):p;if(Ql(_)===0)return void(this.state=hi);const v=e.getExtent();v&&(g=g?qi(g,v):v);const b=n.getResolution(this.wrappedTileCoord_[0]),m=Ow(e,r,_,b);if(!isFinite(m)||m<=0)return void(this.state=hi);const y=c!==void 0?c:.5;if(this.triangulation_=new Ov(e,r,_,g,m*y,b),this.triangulation_.getTriangles().length===0)return void(this.state=hi);this.sourceZ_=i.getZForResolution(m);let x=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(x[1]=Nt(x[1],g[1],g[3]),x[3]=Nt(x[3],g[1],g[3])):x=qi(x,g)),Ql(x)){let C=0,k=0;e.canWrapX()&&(C=tt(v),k=Math.floor((x[0]-v[0])/C)),ev(x.slice(),e,!0).forEach(L=>{const A=i.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let E=A.minX;E<=A.maxX;E++)for(let I=A.minY;I<=A.maxY;I++){const T=u(this.sourceZ_,E,I,s);if(T){const R=k*C;this.sourceTiles_.push({tile:T,offset:R})}}++k}),this.sourceTiles_.length===0&&(this.state=hi)}else this.state=hi}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(i=>{const r=i.tile;if(r&&r.getState()==Bt){const n=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);n[0]+=i.offset,n[2]+=i.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=i.offset,o[2]+=i.offset),e.push({extent:n,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Ut;else{const i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),n=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(i),s=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=zw(n,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Bt}this.changed()}load(){if(this.state==li){this.state=ln,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const r=i.getState();if(r==li||r==ln){e++;const n=pt(i,At,o=>{const a=i.getState();a!=Bt&&a!=Ut&&a!=hi||(It(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i},r,n){i.getState()==li&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(It),this.sourcesListenerKeys_=null}release(){this.canvas_&&(au(this.canvas_.getContext("2d")),Ha.push(this.canvas_),this.canvas_=null),super.release()}}class zv{constructor(e,i,r,n){this.minX=e,this.maxX=i,this.minY=r,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,i){return this.minX<=e&&e<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Ea(t,e,i,r,n){return n!==void 0?(n.minX=t,n.maxX=e,n.minY=i,n.maxY=r,n):new zv(t,e,i,r)}function Fh(t,e,i,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function Bw(t){return jw(t[0],t[1],t[2])}function jw(t,e,i){return(e<<t)+i}function bp(t,e,i,r){return`${t},${function(n,o,a){return n+"/"+o+"/"+a}(e,i,r)}`}function xp(t,e,i){if(!(i in t))return t[i]=new Set([e]),!0;const r=t[i],n=r.has(e);return n||r.add(e),!n}function Ck(t,e,i){const r=t[i];return!!r&&r.delete(e)}function e1(t,e){const i=t.layerStatesArray[t.layerIndex];i.extent&&(e=qi(e,Wr(i.extent,t.viewState.projection)));const r=i.layer.getRenderSource();if(!r.getWrapX()){const n=r.getTileGridForProjection(t.viewState.projection).getExtent();n&&(e=qi(e,n))}return e}class Nw extends Fv{constructor(e,i){super(e),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=[1/0,1/0,-1/0,-1/0],this.tempTileRange_=new zv(0,0,0,0),this.tempTileCoord_=Fh(0,0,0);const r=i.cacheSize!==void 0?i.cacheSize:512;this.tileCache_=new xk(r),this.maxStaleKeys=.5*r}getTileCache(){return this.tileCache_}getOrCreateTile(e,i,r,n){const o=this.tileCache_,a=this.getLayer().getSource(),s=bp(a.getKey(),e,i,r);let l;if(o.containsKey(s))l=o.get(s);else{if(l=a.getTile(e,i,r,n.pixelRatio,n.viewState.projection),!l)return null;o.set(s,l)}return l}getTile(e,i,r,n){return this.getOrCreateTile(e,i,r,n)||null}getData(e){const i=this.frameState;if(!i)return null;const r=this.getLayer(),n=ri(i.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!aa(o,n))return null;const a=i.viewState,s=r.getRenderSource(),l=s.getTileGridForProjection(a.projection),u=s.getTilePixelRatio(i.pixelRatio);for(let c=l.getZForResolution(a.resolution);c>=l.getMinZoom();--c){const h=l.getTileCoordForCoordAndZ(n,c),d=this.getTile(c,h[1],h[2],i);if(!d||d.getState()!==Bt)continue;const p=l.getOrigin(c),f=si(l.getTileSize(c)),g=l.getResolution(c);let _;if(d instanceof Fw||d instanceof Yg)_=d.getImage();else if(!(d instanceof Ah)||(_=qh(d.getData()),!_))continue;const v=Math.floor(u*((n[0]-p[0])/g-h[1]*f[0])),b=Math.floor(u*((p[1]-n[1])/g-h[2]*f[1])),m=Math.round(u*s.getGutterForProjection(a.projection));return this.getImageData(_,v+m,b+m)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const i=this.getLayer().getSource();if(!i)return!1;const r=i.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===i.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,i,r,n,o){const a=e.viewState,s=this.getLayer(),l=s.getRenderSource(),u=l.getTileGridForProjection(a.projection),c=Xe(l);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=s.getMapInternal(),p=Math.max(r-o,u.getMinZoom(),u.getZForResolution(Math.min(s.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let f=r;f>=p;--f){const g=u.getTileRangeForExtentAndZ(i,f,this.tempTileRange_),_=u.getResolution(f);for(let v=g.minX;v<=g.maxX;++v)for(let b=g.minY;b<=g.maxY;++b){const m=this.getTile(f,v,b,e);if(!m||!xp(n,m,f))continue;const y=m.getKey();if(h[y]=!0,m.getState()===li&&!e.tileQueue.isKeyQueued(y)){const x=Fh(f,v,b,this.tempTileCoord_);e.tileQueue.enqueue([m,c,u.getTileCoordCenter(x),_])}}}}findStaleTile_(e,i){const r=this.tileCache_,n=e[0],o=e[1],a=e[2],s=this.getStaleKeys();for(let l=0;l<s.length;++l){const u=bp(s[l],n,o,a);if(r.containsKey(u)){const c=r.get(u);if(c.getState()===Bt)return c.endTransition(Xe(this)),xp(i,c,n),!0}}return!1}findAltTiles_(e,i,r,n){const o=e.getTileRangeForTileCoordAndZ(i,r,this.tempTileRange_);if(!o)return!1;let a=!0;const s=this.tileCache_,l=this.getLayer().getRenderSource().getKey();for(let u=o.minX;u<=o.maxX;++u)for(let c=o.minY;c<=o.maxY;++c){const h=bp(l,r,u,c);let d=!1;if(s.containsKey(h)){const p=s.get(h);p.getState()===Bt&&(xp(n,p,r),d=!0)}d||(a=!1)}return a}renderFrame(e,i){let r=!0;this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],o=e.viewState,a=o.projection,s=o.resolution,l=o.center,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),p=h.getTileGridForProjection(a),f=p.getZForResolution(s,h.zDirection),g=p.getResolution(f),_=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==_&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=_):this.renderedSourceKey_=_;let v=e.extent;const b=h.getTilePixelRatio(u);this.prepareContainer(e,i);const m=this.context.canvas.width,y=this.context.canvas.height,x=n.extent&&Wr(n.extent);x&&(v=qi(v,Wr(n.extent)));const C=g*m/2/b,k=g*y/2/b,L=[l[0]-C,l[1]-k,l[0]+C,l[1]+k],A={};this.renderedTiles.length=0;const E=c.getPreload();if(e.nextExtent){const O=p.getZForResolution(o.nextResolution,h.zDirection),$=e1(e,e.nextExtent);this.enqueueTiles(e,$,O,A,E)}const I=e1(e,v);if(this.enqueueTiles(e,I,f,A,0),E>0&&setTimeout(()=>{this.enqueueTiles(e,I,f-1,A,E-1)},0),!(f in A))return this.container;const T=Xe(this),R=e.time;for(const O of A[f]){const $=O.getState();if((O instanceof Yg||O instanceof Dw)&&$===hi)continue;const J=O.tileCoord;if($===Bt&&O.getAlpha(T,R)===1){O.endTransition(T);continue}if($!==li&&(r=!1),$!==Ut&&(this.renderComplete=!1),this.findStaleTile_(J,A)){Ck(A,O,f),e.animate=!0;continue}if(this.findAltTiles_(p,J,f+1,A))continue;const te=p.getMinZoom();for(let ie=f-1;ie>=te&&!this.findAltTiles_(p,J,ie,A);--ie);}const M=g/s*u/b,q=this.getRenderContext(e);sn(this.tempTransform,m/2,y/2,M,M,0,-m/2,-y/2),n.extent&&this.clipUnrotated(q,e,x),h.getInterpolate()||(q.imageSmoothingEnabled=!1),this.preRender(q,e);const P=Object.keys(A).map(Number);let F;P.sort(Xr);const j=[],V=[];for(let O=P.length-1;O>=0;--O){const $=P[O],J=h.getTilePixelSize($,u,a),te=p.getResolution($)/g,ie=J[0]*te*M,N=J[1]*te*M,z=p.getTileCoordForCoordAndZ(pr(L),$),B=p.getTileCoordExtent(z),K=ri(this.tempTransform,[b*(B[0]-L[0])/g,b*(L[3]-B[3])/g]),U=b*h.getGutterForProjection(a);for(const W of A[$]){if(W.getState()!==Bt)continue;const ve=W.tileCoord,ce=z[1]-ve[1],fe=Math.round(K[0]-(ce-1)*ie),pe=z[2]-ve[2],Ee=Math.round(K[1]-(pe-1)*N),Le=Math.round(K[0]-ce*ie),me=Math.round(K[1]-pe*N),we=fe-Le,Pe=Ee-me,Ve=P.length===1;let oe=!1;F=[Le,me,Le+we,me,Le+we,me+Pe,Le,me+Pe];for(let he=0,Z=j.length;he<Z;++he)if(!Ve&&$<V[he]){const se=j[he];Qt([Le,me,Le+we,me+Pe],[se[0],se[3],se[4],se[7]])&&(oe||(q.save(),oe=!0),q.beginPath(),q.moveTo(F[0],F[1]),q.lineTo(F[2],F[3]),q.lineTo(F[4],F[5]),q.lineTo(F[6],F[7]),q.moveTo(se[6],se[7]),q.lineTo(se[4],se[5]),q.lineTo(se[2],se[3]),q.lineTo(se[0],se[1]),q.clip())}j.push(F),V.push($),this.drawTile(W,e,Le,me,we,Pe,U,Ve),oe&&q.restore(),this.renderedTiles.unshift(W),this.updateUsedTiles(e.usedTiles,h,W)}}if(this.renderedRevision=d,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Tn(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=u,this.postRender(this.context,e),n.extent&&q.restore(),q.imageSmoothingEnabled=!0,this.renderComplete){const O=($,J)=>{const te=Xe(h),ie=J.wantedTiles[te],N=ie?Object.keys(ie).length:0;this.updateCacheSize(N),this.tileCache_.expireCache()};e.postRenderFunctions.push(O)}return this.renderComplete||r||(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*e)}drawTile(e,i,r,n,o,a,s,l){let u;if(e instanceof Ah){if(u=qh(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(i),h=Xe(this),d=i.layerStatesArray[i.layerIndex],p=d.opacity*(l?e.getAlpha(h,i.time):1),f=p!==c.globalAlpha;f&&(c.save(),c.globalAlpha=p),c.drawImage(u,s,s,u.width-2*s,u.height-2*s,r,n,o,a),f&&c.restore(),p!==d.opacity?i.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,i,r){const n=Xe(i);n in e||(e[n]={}),e[n][r.getKey()]=!0}}class ci extends vk{constructor(e){super(e)}createRenderer(){return new Nw(this,{cacheSize:this.getCacheSize()})}}var $w="tileloadstart",Vw="tileloadend",Gw="tileloaderror";class $s extends yr{constructor(e){super(),this.projection=ut(e.projection),this.attributions_=t1(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(r,n){i.viewResolver=r,i.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=t1(e),this.changed()}setState(e){this.state_=e,this.changed()}}function t1(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const La=[0,0,0];class ao{constructor(e){let i;if(this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,xt(function(n,o,a){const s=o||Xr;return n.every(function(l,u){if(u===0)return!0;const c=s(n[u-1],l);return!(c>0||c===0)})}(this.resolutions_,(n,o)=>o-n),"`resolutions` must be sorted in descending order"),!e.origins)for(let n=0,o=this.resolutions_.length-1;n<o;++n)if(i){if(this.resolutions_[n]/this.resolutions_[n+1]!==i){i=void 0;break}}else i=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,xt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r===void 0||this.origin_||this.origins_||(this.origin_=pr(r)),xt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,xt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Km,xt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((n,o)=>{const a=new zv(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(r){const s=this.getTileRangeForExtentAndZ(r,o);a.minX=Math.max(s.minX,a.minX),a.maxX=Math.min(s.maxX,a.maxX),a.minY=Math.max(s.minY,a.minY),a.maxY=Math.min(s.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,i,r){const n=this.getTileRangeForExtentAndZ(e,i);for(let o=n.minX,a=n.maxX;o<=a;++o)for(let s=n.minY,l=n.maxY;s<=l;++s)r([i,o,s])}forEachTileCoordParentTileRange(e,i,r,n){let o,a,s,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):l=this.getTileCoordExtent(e,n);u>=this.minZoom;){if(a!==void 0&&s!==void 0?(a=Math.floor(a/2),s=Math.floor(s/2),o=Ea(a,a,s,s,r)):o=this.getTileRangeForExtentAndZ(l,u,r),i(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,i,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=2*e[1],a=2*e[2];return Ea(o,o+1,a,a+1,i)}const n=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,i)}return null}getTileRangeForTileCoordAndZ(e,i,r){if(i>this.maxZoom||i<this.minZoom)return null;const n=e[0],o=e[1],a=e[2];if(i===n)return Ea(o,a,o,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,i-n),u=Math.floor(o*l),c=Math.floor(a*l);return i<n?Ea(u,u,c,c,r):Ea(u,Math.floor(l*(o+1))-1,c,Math.floor(l*(a+1))-1,r)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,i,r)}getTileRangeForExtentAndZ(e,i,r){this.getTileCoordForXYAndZ_(e[0],e[3],i,!1,La);const n=La[1],o=La[2];return this.getTileCoordForXYAndZ_(e[2],e[1],i,!0,La),Ea(n,La[1],o,La[2],r)}getTileCoordCenter(e){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=si(this.getTileSize(e[0]),this.tmpSize_);return[i[0]+(e[1]+.5)*n[0]*r,i[1]-(e[2]+.5)*n[1]*r]}getTileCoordExtent(e,i){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),o=si(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*o[0]*n,s=r[1]-(e[2]+1)*o[1]*n;return an(a,s,a+o[0]*n,s+o[1]*n,i)}getTileCoordForCoordAndResolution(e,i,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],i,!1,r)}getTileCoordForXYAndResolution_(e,i,r,n,o){const a=this.getZForResolution(r),s=r/this.getResolution(a),l=this.getOrigin(a),u=si(this.getTileSize(a),this.tmpSize_);let c=s*(e-l[0])/r/u[0],h=s*(l[1]-i)/r/u[1];return n?(c=Yn(c,5)-1,h=Yn(h,5)-1):(c=Yu(c,5),h=Yu(h,5)),Fh(a,c,h,o)}getTileCoordForXYAndZ_(e,i,r,n,o){const a=this.getOrigin(r),s=this.getResolution(r),l=si(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/s/l[0],c=(a[1]-i)/s/l[1];return n?(u=Yn(u,5)-1,c=Yn(c,5)-1):(u=Yu(u,5),c=Yu(c,5)),Fh(r,u,c,o)}getTileCoordForCoordAndZ(e,i,r){return this.getTileCoordForXYAndZ_(e[0],e[1],i,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,i){return Nt(mh(this.resolutions_,e,i||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,i){return Ux(i,0,i.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const i=this.resolutions_.length,r=new Array(i);for(let n=this.minZoom;n<i;++n)r[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=r}}class Mk extends ao{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function Dv(t){let e=t.getDefaultTileGrid();return e||(e=function(i,r,n,o){const a=Vs(i);return function(s,l,u,c){c=c!==void 0?c:"top-left";const h=Hw(s,l,u);return new ao({extent:s,origin:WM(s,c),resolutions:h,tileSize:u})}(a,r,n,o)}(t),t.setDefaultTileGrid(e)),e}function Du(t){const e=t||{},i=e.extent||ut("EPSG:3857").getExtent(),r={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Hw(i,e.maxZoom,e.tileSize,e.maxResolution)};return new ao(r)}function Hw(t,e,i,r){e=e!==void 0?e:42,i=si(i!==void 0?i:Km);const n=$t(t),o=tt(t);r=r>0?r:Math.max(o/i[0],n/i[1]);const a=e+1,s=new Array(a);for(let l=0;l<a;++l)s[l]=r/Math.pow(2,l);return s}function Vs(t){let e=(t=ut(t)).getExtent();if(!e){const i=180*kn.degrees/t.getMetersPerUnit();e=an(-i,-i,i,i)}return e}class Bv extends $s{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const i=[256,256];this.tileGrid&&si(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tmpSize=[0,0],this.key_=e.key||Xe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const i=e?this.getTileGridForProjection(e):this.tileGrid;return i?i.getResolutions():null}getTile(e,i,r,n,o){return Ye()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Dv(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,i,r){const n=this.getTileGridForProjection(r),o=this.getTilePixelRatio(i),a=si(n.getTileSize(e),this.tmpSize);return o==1?a:sw(a,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,i){const r=i!==void 0?i:this.getProjection(),n=i!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=function(o,a,s){const l=a[0],u=o.getTileCoordCenter(a),c=Vs(s);if(!aa(c,u)){const h=tt(c),d=Math.ceil((c[0]-u[0])/h);return u[0]+=h*d,o.getTileCoordForCoordAndZ(u,l)}return a}(n,e,r)),function(o,a){const s=o[0],l=o[1],u=o[2];if(a.getMinZoom()>s||s>a.getMaxZoom())return!1;const c=a.getFullTileRange(s);return!c||c.containsXY(l,u)}(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Uw extends vr{constructor(e,i){super(e),this.tile=i}}function Kg(t,e){const i=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&i.push(n+"="+encodeURIComponent(e[n]))});const r=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+r}const kk=/\{z\}/g,Tk=/\{x\}/g,Ek=/\{y\}/g,Lk=/\{-y\}/g;function jv(t,e,i,r,n){return t.replace(kk,e.toString()).replace(Tk,i.toString()).replace(Ek,r.toString()).replace(Lk,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-r).toString()})}function wd(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const r=i[1].charCodeAt(0),n=i[2].charCodeAt(0);let o;for(o=r;o<=n;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const r=parseInt(i[2],10);for(let n=parseInt(i[1],10);n<=r;n++)e.push(t.replace(i[0],n.toString()));return e}return e.push(t),e}function Ik(t,e){return function(i,r,n){if(!i)return;let o;const a=i[0];if(e){const s=e.getFullTileRange(a);s&&(o=s.getHeight()-1)}return jv(t,a,i[1],i[2],o)}}function Ww(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=Ik(t[n],e);return Xg(r)}function Xg(t){return t.length===1?t[0]:function(e,i,r){if(!e)return;const n=no(Bw(e),t.length);return t[n](e,i,r)}}class Sd extends Bv{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Sd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const i=e.target,r=Xe(i),n=i.getState();let o;n==ln?(this.tileLoadingKeys_[r]=!0,o=$w):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=n==Ut?Gw:n==Bt?Vw:void 0),o!=null&&this.dispatchEvent(new Uw(o,i))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,i){this.tileUrlFunction=e,i!==void 0?this.setKey(i):this.changed()}setUrl(e){const i=wd(e);this.urls=i,this.setUrls(i)}setUrls(e){this.urls=e;const i=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Ww(e,this.tileGrid),i):this.setKey(i)}tileUrlFunction(e,i,r){}}class Bu extends Sd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Pk,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate===void 0||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Fw,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!en(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const i=this.getProjection();if(this.tileGrid&&(!i||en(i,e)))return this.tileGrid;const r=Xe(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Dv(e)),this.tileGridForProjection[r]}createTile_(e,i,r,n,o,a){const s=[e,i,r],l=this.getTileCoordForTileUrlFunction(s,o),u=l?this.tileUrlFunction(l,n,o):void 0,c=new this.tileClass(s,u!==void 0?li:hi,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=a,c.addEventListener(At,this.handleTileChange.bind(this)),c}getTile(e,i,r,n,o){const a=this.getProjection();if(!a||!o||en(a,o))return this.getTileInternal(e,i,r,n,a||o);const s=[e,i,r],l=this.getKey(),u=this.getTileGridForProjection(a),c=this.getTileGridForProjection(o),h=this.getTileCoordForTileUrlFunction(s,o),d=new Yg(a,u,o,c,s,h,this.getTilePixelRatio(n),this.getGutter(),(p,f,g,_)=>this.getTileInternal(p,f,g,_,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(e,i,r,n,o){const a=this.getKey();return this.createTile_(e,i,r,n,o,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,i){const r=ut(e);if(r){const n=Xe(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=i)}}}function Pk(t,e){t.getImage().src=e}var Gs=class extends Bu{constructor(t){const e=(t=t||{}).projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:Du({extent:Vs(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}};class kr extends yr{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const i=e;this.setGeometry(i)}else{const i=e;this.setProperties(i)}}clone(){const e=new kr(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const i=this.getGeometry();i&&e.setGeometry(i.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(It(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=pt(e,At,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function(i){if(typeof i=="function")return i;let r;return Array.isArray(i)?r=i:(xt(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),r=[i]),function(){return r}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}class i1{constructor(e){this.rbush_=new Zx(e),this.items_={}}insert(e,i){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:i};this.rbush_.insert(r),this.items_[Xe(i)]=r}load(e,i){const r=new Array(i.length);for(let n=0,o=i.length;n<o;n++){const a=e[n],s=i[n],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};r[n]=l,this.items_[Xe(s)]=l}this.rbush_.load(r)}remove(e){const i=Xe(e),r=this.items_[i];return delete this.items_[i],this.rbush_.remove(r)!==null}update(e,i){const r=this.items_[Xe(i)];Tn([r.minX,r.minY,r.maxX,r.maxY],e)||(this.remove(i),this.insert(e,i))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(e){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(i).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,i){return this.forEach_(this.getInExtent(e),i)}forEach_(e,i){let r;for(let n=0,o=e.length;n<o;n++)if(r=i(e[n]),r)return r;return r}isEmpty(){return po(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const i=this.rbush_.toJSON();return an(i.minX,i.minY,i.maxX,i.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const i in e.items_)this.items_[i]=e.items_[i]}}class Cd extends _o{constructor(e,i,r){super(),r!==void 0&&i===void 0?this.setFlatCoordinates(r,e):(i=i||0,this.setCenterAndRadius(e,i,r))}clone(){const e=new Cd(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,i,r,n){const o=this.flatCoordinates,a=e-o[0],s=i-o[1],l=a*a+s*s;if(l<n){if(l===0)for(let u=0;u<this.stride;++u)r[u]=o[u];else{const u=this.getRadius()/Math.sqrt(l);r[0]=o[0]+u*a,r[1]=o[1]+u*s;for(let c=2;c<this.stride;++c)r[c]=o[c]}return r.length=this.stride,l}return n}containsXY(e,i){const r=this.flatCoordinates,n=e-r[0],o=i-r[1];return n*n+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const i=this.flatCoordinates,r=i[this.stride]-i[0];return an(i[0]-r,i[1]-r,i[0]+r,i[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],i=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+i*i}getType(){return"Circle"}intersectsExtent(e){if(Qt(e,this.getExtent())){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||Jm(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const i=this.stride,r=this.flatCoordinates[i]-this.flatCoordinates[0],n=e.slice();n[i]=n[0]+r;for(let o=1;o<i;++o)n[i+o]=e[o];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,i,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let o=Bx(n,0,e,this.stride);n[o++]=n[0]+i;for(let a=1,s=this.stride;a<s;++a)n[o++]=n[a];n.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,i){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,i){const r=this.getCenter(),n=this.getStride();this.setCenter(cv(r,0,r.length,n,e,i,r)),this.changed()}}Cd.prototype.transform;class uu extends Dx{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(It),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let i=0,r=e.length;i<r;++i)this.changeEventsKeys_.push(pt(e[i],At,this.changed,this))}clone(){const e=new uu(wp(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,i,r,n){if(n<ma(this.getExtent(),e,i))return n;const o=this.geometries_;for(let a=0,s=o.length;a<s;++a)n=o[a].closestPointXY(e,i,r,n);return n}containsXY(e,i){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)if(r[n].containsXY(e,i))return!0;return!1}computeExtent(e){zs(e);const i=this.geometries_;for(let r=0,n=i.length;r<n;++r)Qm(e,i[r].getExtent());return e}getGeometries(){return wp(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const i=this.geometries_;for(let r=0,n=i.length;r<n;++r)i[r].getType()===this.getType()?e=e.concat(i[r].getGeometriesArrayRecursive()):e.push(i[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=[],r=this.geometries_;let n=!1;for(let o=0,a=r.length;o<a;++o){const s=r[o],l=s.getSimplifiedGeometry(e);i.push(l),l!==s&&(n=!0)}return n?new uu(i):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const i=this.geometries_;for(let r=0,n=i.length;r<n;++r)if(i[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,i){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].rotate(e,i);this.changed()}scale(e,i,r){r||(r=Ui(this.getExtent()));const n=this.geometries_;for(let o=0,a=n.length;o<a;++o)n[o].scale(e,i,r);this.changed()}setGeometries(e){this.setGeometriesArray(wp(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const i=this.geometries_;for(let r=0,n=i.length;r<n;++r)i[r].applyTransform(e);this.changed()}translate(e,i){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].translate(e,i);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function wp(t){return t.map(e=>e.clone())}function Oh(t,e,i,r,n,o,a){let s,l;const u=(i-e)/r;if(u===1)s=e;else if(u===2)s=e,l=n;else if(u!==0){let c=t[e],h=t[e+1],d=0;const p=[0];for(let _=e+r;_<i;_+=r){const v=t[_],b=t[_+1];d+=Math.sqrt((v-c)*(v-c)+(b-h)*(b-h)),p.push(d),c=v,h=b}const f=n*d,g=function(_,v,b){let m,y;b=b||Xr;let x=0,C=_.length,k=!1;for(;x<C;)m=x+(C-x>>1),y=+b(_[m],v),y<0?x=m+1:(C=m,k=!y);return k?x:~x}(p,f);g<0?(l=(f-p[-g-2])/(p[-g-1]-p[-g-2]),s=e+(-g-2)*r):s=e+g*r}a=a>1?a:2,o=o||new Array(a);for(let c=0;c<a;++c)o[c]=s===void 0?NaN:l===void 0?t[s+c]:Zi(t[s+c],t[s+r+c],l);return o}function Zg(t,e,i,r,n,o){if(i==e)return null;let a;if(n<t[e+r-1])return o?(a=t.slice(e,e+r),a[r-1]=n,a):null;if(t[i-1]<n)return o?(a=t.slice(i-r,i),a[r-1]=n,a):null;if(n==t[e+r-1])return t.slice(e,e+r);let s=e/r,l=i/r;for(;s<l;){const h=s+l>>1;n<t[(h+1)*r-1]?l=h:s=h+1}const u=t[s*r-1];if(n==u)return t.slice((s-1)*r,(s-1)*r+r);const c=(n-u)/(t[(s+1)*r-1]-u);a=[];for(let h=0;h<r-1;++h)a.push(Zi(t[(s-1)*r+h],t[s*r+h],c));return a.push(n),a}function Yw(t,e,i,r){let n=t[e],o=t[e+1],a=0;for(let s=e+r;s<i;s+=r){const l=t[s],u=t[s+1];a+=Math.sqrt((l-n)*(l-n)+(u-o)*(u-o)),n=l,o=u}return a}class ir extends _o{constructor(e,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i===void 0||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}appendCoordinate(e){Zr(this.flatCoordinates,e),this.changed()}clone(){const e=new ir(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,r,n){return n<ma(this.getExtent(),e,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,i,r,n))}forEachSegment(e){return Hx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0&&i,Zg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i))}getCoordinates(){return Zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,i){return Oh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,this.stride)}getLength(){return Yw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const i=[];return i.length=_d(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new ir(i,"XY")}getType(){return"LineString"}intersectsExtent(e){return bd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yd(this.flatCoordinates,0,e,this.stride),this.changed()}}class la extends _o{constructor(e,i,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(i!==void 0&&r)this.setFlatCoordinates(i,e),this.ends_=r;else{const n=e,o=[],a=[];for(let l=0,u=n.length;l<u;++l)Zr(o,n[l].getFlatCoordinates()),a.push(o.length);const s=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(e){Zr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new la(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,i,r,n){return n<ma(this.getExtent(),e,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dv(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,i,r,n))}getCoordinateAtM(e,i,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(i=i!==void 0&&i,r=r!==void 0&&r,function(n,o,a,s,l,u,c){if(c)return Zg(n,o,a[a.length-1],s,l,u);let h;if(l<n[s-1])return u?(h=n.slice(0,s),h[s-1]=l,h):null;if(n[n.length-1]<l)return u?(h=n.slice(n.length-s),h[s-1]=l,h):null;for(let d=0,p=a.length;d<p;++d){const f=a[d];if(o!=f){if(l<n[o+s-1])return null;if(l<=n[f-1])return Zg(n,o,f,s,l,!1);o=f}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,i,r))}getCoordinates(){return ru(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ir(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,i=this.ends_,r=this.layout,n=[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=i[a],u=new ir(e.slice(o,l),r);n.push(u),o=l}return n}getFlatMidpoints(){const e=[],i=this.flatCoordinates;let r=0;const n=this.ends_,o=this.stride;for(let a=0,s=n.length;a<s;++a){const l=n[a];Zr(e,Oh(i,r,l,o,.5)),r=l}return e}getSimplifiedGeometryInternal(e){const i=[],r=[];return i.length=Nx(this.flatCoordinates,0,this.ends_,this.stride,e,i,0,r),new la(i,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return function(i,r,n,o,a){for(let s=0,l=n.length;s<l;++s){if(bd(i,r,n[s],o,a))return!0;r=n[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=iu(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Hs extends _o{constructor(e,i){super(),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}appendPoint(e){Zr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Hs(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,r,n){if(n<ma(this.getExtent(),e,i))return n;const o=this.flatCoordinates,a=this.stride;for(let s=0,l=o.length;s<l;s+=a){const u=wn(e,i,o[s],o[s+1]);if(u<n){n=u;for(let c=0;c<a;++c)r[c]=o[s+c];r.length=a}}return n}getCoordinates(){return Zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const i=this.flatCoordinates.length/this.stride;return e<0||i<=e?null:new hr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,i=this.layout,r=this.stride,n=[];for(let o=0,a=e.length;o<a;o+=r){const s=new hr(e.slice(o,o+r),i);n.push(s)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const i=this.flatCoordinates,r=this.stride;for(let n=0,o=i.length;n<o;n+=r)if(Xm(e,i[n],i[n+1]))return!0;return!1}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yd(this.flatCoordinates,0,e,this.stride),this.changed()}}function Kw(t,e,i,r){const n=[];let o=[1/0,1/0,-1/0,-1/0];for(let a=0,s=i.length;a<s;++a){const l=i[a];o=Zm(t,e,l[0],r),n.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return n}class ua extends _o{constructor(e,i,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const n=e,o=[],a=[];for(let s=0,l=n.length;s<l;++s){const u=n[s],c=o.length,h=u.getEnds();for(let d=0,p=h.length;d<p;++d)h[d]+=c;Zr(o,u.getFlatCoordinates()),a.push(h)}i=n.length===0?this.getLayout():n[0].getLayout(),e=o,r=a}i!==void 0&&r?(this.setFlatCoordinates(i,e),this.endss_=r):this.setCoordinates(e,i)}appendPolygon(e){let i;if(this.flatCoordinates){const r=this.flatCoordinates.length;Zr(this.flatCoordinates,e.getFlatCoordinates()),i=e.getEnds().slice();for(let n=0,o=i.length;n<o;++n)i[n]+=r}else this.flatCoordinates=e.getFlatCoordinates().slice(),i=e.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()}clone(){const e=this.endss_.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=this.endss_[n].slice();const r=new ua(this.flatCoordinates.slice(),this.layout,i);return r.applyProperties(this),r}closestPointXY(e,i,r,n){return n<ma(this.getExtent(),e,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(o,a,s,l,u){for(let c=0,h=s.length;c<h;++c){const d=s[c];u=dv(o,a,d,l,u),a=d[d.length-1]}return u}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(o,a,s,l,u,c,h,d,p,f,g){g=g||[NaN,NaN];for(let _=0,v=s.length;_<v;++_){const b=s[_];f=fv(o,a,b,l,u,c,h,d,p,f,g),a=b[b.length-1]}return f}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,i,r,n))}containsXY(e,i){return function(r,n,o,a,s,l){if(o.length===0)return!1;for(let u=0,c=o.length;u<c;++u){const h=o[u];if(mv(r,n,h,a,s,l))return!0;n=h[h.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,i)}getArea(){return function(e,i,r,n){let o=0;for(let a=0,s=r.length;a<s;++a){const l=r[a];o+=Vx(e,i,l,n),i=l[l.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let i;return e!==void 0?(i=this.getOrientedFlatCoordinates().slice(),tg(i,0,this.endss_,this.stride,e)):i=this.flatCoordinates,eg(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Kw(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Gx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Hs(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Yx(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=tg(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const i=[],r=[];return i.length=function(n,o,a,s,l,u,c,h){for(let d=0,p=a.length;d<p;++d){const f=a[d],g=[];c=gv(n,o,f,s,l,u,c,g),h.push(g),o=f[f.length-1]}return c}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),i,0,r),new ua(i,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let i;if(e===0)i=0;else{const o=this.endss_[e-1];i=o[o.length-1]}const r=this.endss_[e].slice(),n=r[r.length-1];if(i!==0)for(let o=0,a=r.length;o<a;++o)r[o]-=i;return new Wi(this.flatCoordinates.slice(i,n),this.layout,r)}getPolygons(){const e=this.layout,i=this.flatCoordinates,r=this.endss_,n=[];let o=0;for(let a=0,s=r.length;a<s;++a){const l=r[a].slice(),u=l[l.length-1];if(o!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=o;const c=new Wi(i.slice(o,u),e,l);n.push(c),o=u}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return function(i,r,n,o,a){for(let s=0,l=n.length;s<l;++s){const u=n[s];if(Wx(i,r,u,o,a))return!0;r=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=jx(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const n=r[r.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const r1=[1,0,0,1,0,0];class wi{constructor(e,i,r,n,o,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=i,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=o,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?yx(this.flatCoordinates_):Zm(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ui(this.getExtent());this.flatInteriorPoints_=vv(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Kx(this.flatCoordinates_,this.ends_),i=Kw(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Gx(this.flatCoordinates_,0,e,2,i)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Oh(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let i=0;const r=this.ends_;for(let n=0,o=r.length;n<o;++n){const a=r[n],s=Oh(e,i,a,2,.5);Zr(this.flatMidpoints_,s),i=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,i){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const i=(e=ut(e)).getExtent(),r=e.getWorldExtent();if(i&&r){const n=$t(r)/$t(i);sn(r1,r[0],r[3],n,-n,0,0,0),Xn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,r1,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new wi(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=px((e,i)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),i&&this.simplifiedGeometry_.applyTransform(i);const r=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":r.length=_d(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),n=[r.length];break;case"MultiLineString":n=[],r.length=Nx(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,n);break;case"Polygon":n=[],r.length=gv(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,n)}return n&&(this.simplifiedGeometry_=new wi(this.type_,r,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}wi.prototype.getFlatCoordinates=wi.prototype.getOrientedFlatCoordinates;var lc="addfeature",Rk="changefeature",qk="clear",Sp="removefeature",Ak="featuresloadstart",Fk="featuresloadend",Ok="featuresloaderror";function zk(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Dk(t,e){return[t]}function Xw(t,e,i,r,n,o,a){const s=new XMLHttpRequest;s.open("GET",typeof t=="function"?t(i,r,n):t,!0),e.getType()=="arraybuffer"&&(s.responseType="arraybuffer"),s.withCredentials=!1,s.onload=function(l){if(!s.status||s.status>=200&&s.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=s.responseText:u=="xml"?c=s.responseXML||s.responseText:u=="arraybuffer"&&(c=s.response),c?o(e.readFeatures(c,{extent:i,featureProjection:n}),e.readProjection(c)):a()}catch{a()}}else a()},s.onerror=a,s.send()}function n1(t,e){return function(i,r,n,o,a){const s=this;Xw(t,e,i,r,n,function(l,u){s.addFeatures(l),o!==void 0&&o(l)},a||ws)}}class Fn extends vr{constructor(e,i,r){super(e),this.feature=i,this.features=r}}class so extends $s{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX===void 0||e.wrapX}),this.on,this.once,this.un,this.loader_=ws,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0||e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(xt(this.format_,"`format` must be set when `url` is set"),this.loader_=n1(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:zk;const i=e.useSpatialIndex===void 0||e.useSpatialIndex;let r,n;this.featuresRtree_=i?new i1:null,this.loadedExtentsRtree_=new i1,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?n=e.features:e.features&&(r=e.features,n=r.getArray()),i||r!==void 0||(r=new ar(n)),n!==void 0&&this.addFeaturesInternal(n),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const i=Xe(e);if(!this.addToIndex_(i,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(i,e);const r=e.getGeometry();if(r){const n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[i]=e;this.dispatchEvent(new Fn(lc,e))}setupChangeEvents_(e,i){i instanceof wi||(this.featureChangeKeys_[e]=[pt(i,At,this.handleFeatureChange_,this),pt(i,bs,this.handleFeatureChange_,this)])}addToIndex_(e,i){let r=!0;if(i.getId()!==void 0){const n=String(i.getId());if(n in this.idIndex_)if(i instanceof wi){const o=this.idIndex_[n];o instanceof wi?Array.isArray(o)?o.push(i):this.idIndex_[n]=[o,i]:r=!1}else r=!1;else this.idIndex_[n]=i}return r&&(xt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=i),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const i=[],r=[],n=[];for(let o=0,a=e.length;o<a;o++){const s=e[o],l=Xe(s);this.addToIndex_(l,s)&&r.push(s)}for(let o=0,a=r.length;o<a;o++){const s=r[o],l=Xe(s);this.setupChangeEvents_(l,s);const u=s.getGeometry();if(u){const c=u.getExtent();i.push(c),n.push(s)}else this.nullGeometryFeatures_[l]=s}if(this.featuresRtree_&&this.featuresRtree_.load(i,n),this.hasListener(lc))for(let o=0,a=r.length;o<a;o++)this.dispatchEvent(new Fn(lc,r[o]))}bindFeaturesCollection_(e){let i=!1;this.addEventListener(lc,function(r){i||(i=!0,e.push(r.feature),i=!1)}),this.addEventListener(Sp,function(r){i||(i=!0,e.remove(r.feature),i=!1)}),e.addEventListener(Ko,r=>{i||(i=!0,this.addFeature(r.element),i=!1)}),e.addEventListener(Xo,r=>{i||(i=!0,this.removeFeature(r.element),i=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(It);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const r=n=>{this.removeFeatureInternal(n)};this.featuresRtree_.forEach(r);for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const i=new Fn(qk);this.dispatchEvent(i),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,i){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(n){const o=n.getGeometry();if(o instanceof wi||o.intersectsCoordinate(e))return i(n)})}forEachFeatureInExtent(e,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(e,i){return this.forEachFeatureInExtent(e,function(r){const n=r.getGeometry();if(n instanceof wi||n.intersectsExtent(e)){const o=i(r);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),po(this.nullGeometryFeatures_)||Zr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const i=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){i.push(r)}),i}getFeaturesInExtent(e,i){if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=ev(e,i);return[].concat(...r.map(n=>this.featuresRtree_.getInExtent(n)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,i){const r=e[0],n=e[1];let o=null;const a=[NaN,NaN];let s=1/0;const l=[-1/0,-1/0,1/0,1/0];return i=i||xs,this.featuresRtree_.forEachInExtent(l,function(u){if(i(u)){const c=u.getGeometry(),h=s;if(s=c instanceof wi?0:c.closestPointXY(r,n,a,s),s<h){o=u;const d=Math.sqrt(s);l[0]=r-d,l[1]=n-d,l[2]=r+d,l[3]=n+d}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const i=this.idIndex_[e.toString()];return i!==void 0?i:null}getFeatureByUid(e){const i=this.uidIndex_[e];return i!==void 0?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const i=e.target,r=Xe(i),n=i.getGeometry();if(n){const a=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,i)):this.featuresRtree_&&this.featuresRtree_.update(a,i)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[r]=i);const o=i.getId();if(o!==void 0){const a=o.toString();this.idIndex_[a]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[a]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[r]=i;this.changed(),this.dispatchEvent(new Fn(Rk,i))}hasFeature(e){const i=e.getId();return i!==void 0?i in this.idIndex_:Xe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&po(this.nullGeometryFeatures_):!this.featuresCollection_||this.featuresCollection_.getLength()===0}loadFeatures(e,i,r){const n=this.loadedExtentsRtree_,o=this.strategy_(e,i,r);for(let a=0,s=o.length;a<s;++a){const l=o[a];n.forEachInExtent(l,function(u){return Lr(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Fn(Ak)),this.loader_.call(this,l,i,r,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Fn(Fk,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Fn(Ok))}),n.insert(l,{extent:l.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const i=this.loadedExtentsRtree_,r=i.forEachInExtent(e,function(n){if(Tn(n.extent,e))return n});r&&i.remove(r)}removeFeatures(e){let i=!1;for(let r=0,n=e.length;r<n;++r)i=this.removeFeatureInternal(e[r])||i;i&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const i=Xe(e);if(!(i in this.uidIndex_))return!1;i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[i]?.forEach(It),delete this.featureChangeKeys_[i];const r=e.getId();if(r!==void 0){const n=r.toString(),o=this.idIndex_[n];o===e?delete this.idIndex_[n]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[n]=o[0]))}return delete this.uidIndex_[i],this.hasListener(Sp)&&this.dispatchEvent(new Fn(Sp,e)),!0}removeFromIdIndex_(e){for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i];break}}setLoader(e){this.loader_=e}setUrl(e){xt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(n1(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Bk extends Bv{constructor(e){const i=e.projection===void 0?"EPSG:3857":e.projection;let r=e.tileGrid;r===void 0&&i&&(r=Du({extent:Vs(i),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:i,tileGrid:r,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?si(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const i=this.getTileGrid();return i?si(i.getTileSize(e)):[256,256]}getGutterForProjection(e){const i=this.getProjection();return i&&!en(i,e)||this.transformMatrix?0:this.gutter_}setLoader(e){this.loader_=e}getReprojTile_(e,i,r,n,o){const a=this.tileGrid||this.getTileGridForProjection(o||n),s=Math.max.apply(null,a.getResolutions().map((p,f)=>{const g=si(a.getTileSize(f)),_=this.getTileSize(f);return Math.max(_[0]/g[0],_[1]/g[1])})),l=this.getTileGridForProjection(n),u=[e,i,r],c=this.getTileCoordForTileUrlFunction(u,n),h=Object.assign({sourceProj:o||n,sourceTileGrid:a,targetProj:n,targetTileGrid:l,tileCoord:u,wrappedTileCoord:c,pixelRatio:s,gutter:this.gutter_,getTileFunction:(p,f,g,_)=>this.getTile(p,f,g,_),transformMatrix:this.transformMatrix},this.tileOptions),d=new Dw(h);return d.key=this.getKey(),d}getTile(e,i,r,n,o){const a=this.getProjection();if(o&&(a&&!en(a,o)||this.transformMatrix))return this.getReprojTile_(e,i,r,o,a);const s=this.getTileSize(e),l=this.loader_,u=new AbortController,c={signal:u.signal,crossOrigin:this.crossOrigin_},h=this.getTileCoordForTileUrlFunction([e,i,r]);if(!h)return null;const d=h[0],p=h[1],f=h[2],g=this.getTileGrid()?.getFullTileRange(d);g&&(c.maxY=g.getHeight()-1);const _=Object.assign({tileCoord:[e,i,r],loader:function(){return na(function(){return l(d,p,f,c)})},size:s,controller:u},this.tileOptions),v=new Ah(_);return v.key=this.getKey(),v.addEventListener(At,this.handleTileChange_),v}handleTileChange_(e){const i=e.target,r=Xe(i),n=i.getState();let o;n==ln?(this.tileLoadingKeys_[r]=!0,o=$w):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=n==Ut?Gw:n==Bt?Vw:void 0),o&&this.dispatchEvent(new Uw(o,i))}getTileGridForProjection(e){const i=this.getProjection();if(this.tileGrid&&(!i||en(i,e))&&!this.transformMatrix)return this.tileGrid;const r=Xe(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=Dv(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,i){const r=ut(e);if(r){const n=Xe(r);n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=i)}}}function Qg(t){return Array.isArray(t)?Math.min(...t):t}class jk extends Mv{constructor(e,i,r,n,o,a,s){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=i.getExtent();u&&i.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?qi(r,u):r,h=Hg(e,i,Ui(c),n),d=new Ov(e,i,c,l,.5*h,n),p=d.calculateSourceExtent(),f=va(p)?null:a(p,h,o),g=f?Yi:Qx,_=f?f.getPixelRatio():1;super(r,n,_,g),this.targetProj_=i,this.maxSourceExtent_=l,this.triangulation_=d,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=f,this.sourcePixelRatio_=_,this.interpolate_=s,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Or&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==zt){const i=tt(this.targetExtent_)/this.targetResolution_,r=$t(this.targetExtent_)/this.targetResolution_;this.canvas_=zw(i,r,this.sourcePixelRatio_,Qg(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Yi){this.state=Or,this.changed();const e=this.sourceImage_.getState();e==zt||e==qr?this.reproject_():(this.sourceListenerKey_=pt(this.sourceImage_,At,i=>{const r=this.sourceImage_.getState();r!=zt&&r!=qr||(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){It(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Nk="imageloadstart",$k="imageloadend",Vk="imageloaderror";class Gk extends vr{constructor(e,i){super(e),this.image=i}}class Zw extends $s{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate===void 0||e.interpolate}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!e.loader&&e.loader.length===0,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const i=this.getResolutions();return i&&(e=i[mh(i,e,0)]),e}getImage(e,i,r,n){const o=this.getProjection();if(!o||!n||en(o,n))return o&&(n=o),this.getImageInternal(e,i,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&en(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==i&&Tn(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new jk(o,n,e,i,r,(a,s,l)=>this.getImageInternal(a,s,l,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,i,r,n){if(this.loader){const o=function(s,l,u,c){const h=l/u,d=Ui(s),p=Yn(tt(s)/h,4),f=Yn($t(s)/h,4),g=Yn((c-1)*p/2,4),_=p+2*g,v=Yn((c-1)*f/2,4);return xh(d,h,0,[_,f+2*v])}(e,i,r,1),a=this.findNearestResolution(i);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&Lr(this.wantedExtent_,o)||Lr(this.image.getExtent(),o))&&(this.wantedResolution_&&Qg(this.wantedResolution_)===a||Qg(this.image.getResolution())===a)))return this.image;this.wantedProjection_=n,this.wantedExtent_=o,this.wantedResolution_=a,this.image=new Mv(o,a,r,this.loader),this.image.addEventListener(At,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const i=e.target;let r;switch(i.getState()){case Or:this.loading=!0,r=Nk;break;case zt:this.loading=!1,r=$k;break;case qr:this.loading=!1,r=Vk;break;default:return}this.hasListener(r)&&this.dispatchEvent(new Gk(r,i))}}class Hk extends Mv{constructor(e,i,r,n,o){super(e,i,r,o!==void 0?Yi:zt),this.loader_=o!==void 0?o:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=qr):this.state=zt,this.changed()}load(){this.state==Yi&&(this.state=Or,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const Uk=new Error("Image failed to load");function Qw(t,e,i,r,n){return new Promise((o,a)=>{const s=new Image;s.crossOrigin=n.crossOrigin??null,s.addEventListener("load",()=>o(s)),s.addEventListener("error",()=>a(Uk)),s.src=jv(t,e,i,r,n.maxY)})}function o1(t){return function(e,i,r,n){const o=function(a,s,l,u){return a[no(jw(s,l,u),a.length)]}(t,e,i,r);return Qw(o,e,i,r,n)}}function a1(t){let e;if(Array.isArray(t))e=o1(t);else if(typeof t=="string")e=o1(wd(t));else{if(typeof t!="function")throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");i=t,e=function(r,n,o,a){return Qw(i(r,n,o,a),r,n,o,a)}}var i;return e}let s1=0;function l1(t){return Array.isArray(t)?t.join(`
`):typeof t=="string"?t:(++s1,"url-function-key-"+s1)}class Wk extends Bk{constructor(e){let i,r=(e=e||{}).loader;e.url&&(r=a1(e.url),i=l1(e.url));const n=r?e.state:"loading",o=e.wrapX===void 0||e.wrapX;super({loader:r,key:i,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize,gutter:e.gutter,maxResolution:e.maxResolution,projection:e.projection,tileGrid:e.tileGrid,state:n,wrapX:o,transition:e.transition,interpolate:e.interpolate!==!1,crossOrigin:e.crossOrigin,zDirection:e.zDirection})}setUrl(e){const i=a1(e);this.setLoader(i),this.setKey(l1(e)),this.getState()!=="ready"&&this.setState("ready")}}class Yk extends zu{constructor(e,i,r,n,o,a){super(e,i,a),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==li&&(this.setState(ln),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,i){this.setFeatures(e)}onError(){this.setState(Ut)}setFeatures(e){this.features_=e,this.setState(Bt)}setLoader(e){this.loader_=e}}const u1=[];class Kk extends zu{constructor(e,i,r,n,o){super(e,i,{transition:0}),this.context_=null,this.executorGroups=[],this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=Vt(1,1,u1)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const i=Xe(e);return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[i]}load(){this.getSourceTiles()}release(){this.context_&&(au(this.context_),u1.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}class Bl extends Sd{constructor(e){const i=e.projection||"EPSG:3857",r=e.extent||Vs(i),n=e.tileGrid||Du({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:i,state:e.state,tileGrid:n,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Jw,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0||e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null||e.overlaps,this.tileClass=e.tileClass?e.tileClass:Yk,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,i,r){if(r.getState()===li){r.setState(ln);const n=r.wrappedTileCoord,o=this.getTileGridForProjection(i),a=o.getTileCoordExtent(n),s=n[0],l=o.getResolution(s);oo(a,-l,a);const u=this.tileGrid,c=u.getExtent();c&&qi(a,c,a);const h=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(a,h,d=>{const p=this.tileUrlFunction(d,e,i);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(d,p?li:hi,p,this.format_,this.tileLoadFunction));const f=this.sourceTiles_[p];r.sourceTiles.push(f),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(r.getKey());const g=f.getState();if(g<Bt){const _=v=>{this.handleTileChange(v);const b=f.getState();if(b===Bt||b===Ut){const m=f.getKey();m in r.errorTileKeys?f.getState()===Bt&&delete r.errorTileKeys[m]:r.loadingSourceTiles--,b===Ut?r.errorTileKeys[m]=!0:f.removeEventListener(At,_),r.loadingSourceTiles===0&&r.setState(po(r.errorTileKeys)?Bt:Ut)}};f.addEventListener(At,_),r.loadingSourceTiles++}g===li&&(f.extent=u.getTileCoordExtent(d),f.projection=i,f.resolution=u.getResolution(d[0]),f.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(d=>d.getState()===Ut)?Ut:Bt)}return r.sourceTiles}removeSourceTiles(e){const i=e.sourceTiles;for(let r=0,n=i.length;r<n;++r){const o=i[r].getTileUrl(),a=this.getKey();if(!this.tileKeysBySourceTileUrl_[o])return;const s=this.tileKeysBySourceTileUrl_[o][a];s!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(s,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,i,r,n,o){const a=[e,i,r];let s=this.getTileCoordForTileUrlFunction(a,o);const l=this.getTileGrid().getExtent(),u=this.getTileGridForProjection(o);if(s&&l){const d=u.getTileCoordExtent(s);oo(d,-u.getResolution(e),d),Qt(l,d)||(s=null)}let c=!0;if(s!==null){const d=this.tileGrid,p=u.getResolution(e),f=d.getZForResolution(p,1),g=u.getTileCoordExtent(s);oo(g,-p,g),d.forEachTileCoord(g,f,_=>{c=c&&!this.tileUrlFunction(_,n,o)})}const h=new Kk(a,c?hi:li,s,this.getSourceTiles.bind(this,n,o),this.removeSourceTiles.bind(this));return h.key=this.getKey(),h}getTileGridForProjection(e){const i=e.getCode();let r=this.tileGrids_[i];if(!r){const n=this.tileGrid,o=n.getResolutions().slice(),a=o.map(function(u,c){return n.getOrigin(c)}),s=o.map(function(u,c){return n.getTileSize(c)}),l=43;for(let u=o.length;u<l;++u)o.push(o[u-1]/2),a.push(a[u-1]),s.push(s[u-1]);r=new ao({extent:n.getExtent(),origins:a,resolutions:o,tileSizes:s}),this.tileGrids_[i]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,i,r){const n=si(this.getTileGridForProjection(r).getTileSize(e),this.tmpSize);return[Math.round(n[0]*i),Math.round(n[1]*i)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Jw(t,e){t.setLoader(function(i,r,n){Xw(e,t.getFormat(),i,r,n,t.onLoad.bind(t),t.onError.bind(t))})}var c1=class extends Gs{constructor(t){let e;e=(t=t||{}).attributions!==void 0?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",r=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}};class Xk extends Bs{constructor(e){super(e=e||{})}}class Zk extends Fv{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const i=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,o=n.resolution,a=this.getLayer().getSource(),s=e.viewHints;let l=e.extent;if(i.extent!==void 0&&(l=qi(l,Wr(i.extent,n.projection))),!s[Ji]&&!s[Rr]&&!va(l))if(a){const u=n.projection,c=a.getImage(l,o,r,u);c&&(this.loadImage(c)?this.image=c:c.getState()===Qx&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const i=this.frameState;if(!i)return null;const r=this.getLayer(),n=ri(i.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!aa(o,n))return null;const a=this.image.getExtent(),s=this.image.getImage(),l=tt(a),u=Math.floor(s.width*((n[0]-a[0])/l));if(u<0||u>=s.width)return null;const c=$t(a),h=Math.floor(s.height*((a[3]-n[1])/c));return h<0||h>=s.height?null:this.getImageData(s,u,h)}renderFrame(e,i){const r=this.image,n=r.getExtent(),o=r.getResolution(),[a,s]=Array.isArray(o)?o:[o,o],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,h=e.viewState,d=h.center,p=h.resolution,f=c*a/(p*l),g=c*s/(p*l);this.prepareContainer(e,i);const _=this.context.canvas.width,v=this.context.canvas.height,b=this.getRenderContext(e);let m=!1,y=!0;if(u.extent){const A=Wr(u.extent,h.projection);y=Qt(A,e.extent),m=y&&!Lr(A,e.extent),m&&this.clipUnrotated(b,e,A)}const x=r.getImage(),C=sn(this.tempTransform,_/2,v/2,f,g,0,l*(n[0]-d[0])/a,l*(d[1]-n[3])/s);this.renderedResolution=s*c/l;const k=x.width*C[0],L=x.height*C[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,e),y&&k>=.5&&L>=.5){const A=C[4],E=C[5],I=u.opacity;I!==1&&(b.save(),b.globalAlpha=I),b.drawImage(x,0,0,+x.width,+x.height,A,E,k,L),I!==1&&b.restore()}return this.postRender(this.context,e),m&&b.restore(),b.imageSmoothingEnabled=!0,this.container}}class e2 extends Xk{constructor(e){super(e)}createRenderer(){return new Zk(this)}getData(e){return super.getData(e)}}function t2(t){return function(e){const i=e.buffers,r=e.meta,n=e.imageOps,o=e.width,a=e.height,s=i.length,l=i[0].byteLength;if(n){const d=new Array(s);for(let p=0;p<s;++p)d[p]=new ImageData(new Uint8ClampedArray(i[p]),o,a);return t(d,r).data.buffer}const u=new Uint8ClampedArray(l),c=new Array(s),h=new Array(s);for(let d=0;d<s;++d)c[d]=new Uint8ClampedArray(i[d]),h[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let f=0;f<s;++f){const g=c[f];h[f][0]=g[d],h[f][1]=g[d+1],h[f][2]=g[d+2],h[f][3]=g[d+3]}const p=t(h,r);u[d]=p[0],u[d+1]=p[1],u[d+2]=p[2],u[d+3]=p[3]}return u.buffer}}function Qk(t,e){const i=Object.keys(t.lib||{}).map(function(o){return"const "+o+" = "+t.lib[o].toString()+";"}),r=i.concat(["const __minion__ = ("+t2.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return n.addEventListener("message",e),n}class Jk extends Eu{constructor(e){let i;super(),this.imageOps_=!!e.imageOps,i=e.threads===0?0:this.imageOps_?1:e.threads||1;const r=new Array(i);if(i)for(let n=0;n<i;++n)r[n]=Qk(e,this.onWorkerMessage_.bind(this,n));else r[0]=function(n,o){const a=t2(n.operation);let s=!1;return{postMessage:function(l){setTimeout(function(){s||o({data:{buffer:a(l),meta:l.meta}})},0)},terminate:function(){s=!0}}}(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,i,r){this.enqueue_({inputs:e,meta:i,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const i=e.inputs[0].width,r=e.inputs[0].height,n=e.inputs.map(function(l){return l.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1)return void this.workers_[0].postMessage({buffers:n,meta:e.meta,imageOps:this.imageOps_,width:i,height:r},n);const a=e.inputs[0].data.length,s=4*Math.ceil(a/4/o);for(let l=0;l<o;++l){const u=l*s,c=[];for(let h=0,d=n.length;h<d;++h)c.push(n[h].slice(u,u+s));this.workers_[l].postMessage({buffers:c,meta:e.meta,imageOps:this.imageOps_,width:i,height:r},c)}}onWorkerMessage_(e,i){this.disposed||(this.dataLookup_[e]=i.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,i=this.workers_.length;let r,n;if(i===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),n=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;r=new Uint8ClampedArray(o),n=new Array(i);const a=4*Math.ceil(o/4/i);for(let s=0;s<i;++s){const l=this.dataLookup_[s].buffer,u=s*a;r.set(new Uint8ClampedArray(l),u),n[s]=this.dataLookup_[s].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),n),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const eT="beforeoperations",tT="afteroperations";class h1 extends vr{constructor(e,i,r){super(e),this.extent=i.extent,this.resolution=i.viewState.resolution/i.pixelRatio,this.data=r}}class i2 extends Zw{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=function(n){const o=n.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=rT(n[s]);return a}(e.sources);const i=this.changed.bind(this);for(let n=0,o=this.layers_.length;n<o;++n)this.layers_[n].addEventListener(At,i);var r;this.useResolutions_=e.resolutions!==null,this.tileQueue_=new Tw(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=this.layers_,r.map(function(n){return n.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Xe(this),renderTargets:{}},this.setAttributions(function(n){const o=[];for(let a=0,s=e.sources.length;a<s;++a){const l=e.sources[a],u=l instanceof $s?l:l.getSource();if(!u)continue;const c=u.getAttributions()?.(n);typeof c=="string"?o.push(c):c!==void 0&&o.push(...c)}return o}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,i){this.processor_&&this.processor_.dispose(),this.processor_=new Jk({operation:e,imageOps:this.operationType_==="image",queue:1,lib:i,threads:this.threads_}),this.changed()}updateFrameState_(e,i,r){const n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);const o=Ui(e);n.size[0]=Math.ceil(tt(e)/i),n.size[1]=Math.ceil($t(e)/i),n.extent=[o[0]-n.size[0]*i/2,o[1]-n.size[1]*i/2,o[0]+n.size[0]*i/2,o[1]+n.size[1]*i/2],n.time=Date.now();const a=n.viewState;return a.center=o,a.projection=r,a.resolution=i,n}allSourcesReady_(){let e,i=!0;for(let r=0,n=this.layers_.length;r<n;++r)if(e=this.layers_[r].getSource(),!e||e.getState()!=="ready"){i=!1;break}return i}getImage(e,i,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),i=this.findNearestResolution(i);const o=this.updateFrameState_(e,i,n);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const a=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();i===a&&Tn(o.extent,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,i=this.layers_.length,r=new Array(i);for(let o=0;o<i;++o){e.layerIndex=o,e.renderTargets={};const a=iT(this.layers_[o],e);if(!a)return;r[o]=a}const n={};this.dispatchEvent(new h1(eT,e,n)),this.processor_.process(r,n,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,i,r,n){if(i||!r)return;const o=e.extent,a=e.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!Tn(o,this.requestedFrameState_.extent))return;let s;this.renderedImageCanvas_?s=this.renderedImageCanvas_.getImage().getContext("2d"):(s=Vt(Math.round(tt(o)/a),Math.round($t(o)/a)),this.renderedImageCanvas_=new Hk(o,a,1,s.canvas)),s.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new h1(tT,e,n))}getResolutions(e){if(!this.useResolutions_)return null;let i=super.getResolutions();if(!i)for(let r=0,n=this.layers_.length;r<n&&(i=this.layers_[r].getSource().getResolutions(e),!i);++r);return i}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}i2.prototype.dispose;let Mo=null;function iT(t,e){const i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(e))return null;const r=e.size[0],n=e.size[1];if(r===0||n===0)return null;const o=i.renderFrame(e,null);let a;if(o instanceof HTMLCanvasElement)a=o;else{if(o&&(a=o.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===r&&a.height===n)return a.getContext("2d").getImageData(0,0,r,n)}if(Mo){const s=Mo.canvas;s.width!==r||s.height!==n?Mo=Vt(r,n,void 0,{willReadFrequently:!0}):Mo.clearRect(0,0,r,n)}else Mo=Vt(r,n,void 0,{willReadFrequently:!0});return Mo.drawImage(a,0,0,r,n),Mo.getImageData(0,0,r,n)}function rT(t){let e;return t instanceof $s?t instanceof Bv?e=new ci({source:t}):t instanceof Zw&&(e=new e2({source:t})):e=t,e}var nT=class extends Bu{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi===void 0||t.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,r,n,o){const a=this.urls;if(!a)return;let s;return a.length==1?s=a[0]:s=a[no(Bw(t),a.length)],function(l,u,c,h,d,p){const f=d.getCode().split(/:(?=\d+$)/).pop(),g=c/h,_=[ry(tt(u)/g,4),ry($t(u)/g,4)];return p.SIZE=_[0]+","+_[1],p.BBOX=u.join(","),p.BBOXSR=f,p.IMAGESR=f,p.DPI=Math.round(p.DPI?p.DPI*h:90*h),Kg(l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),p)}(s,i,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(t[0]),r,n,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;e==1||this.hidpi_||(e=1);const n=r.getTileCoordExtent(t,this.tmpExtent_);let o=si(r.getTileSize(t[0]),this.tmpSize);e!=1&&(o=sw(o,e,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,o,n,e,i,a)}};class oT extends Wk{constructor(e){const i=(e=e||{}).template||"z:{z} x:{x} y:{y}";super({transition:0,projection:e.projection,tileGrid:e.tileGrid,wrapX:e.wrapX===void 0||e.wrapX,zDirection:e.zDirection,loader:(r,n,o,a)=>{const s=jv(i,r,n,o,a.maxY),l=this.getTileSize(r),u=Vt(l[0],l[1]);return u.strokeStyle="grey",u.strokeRect(.5,.5,l[0]+.5,l[1]+.5),u.fillStyle="grey",u.strokeStyle="white",u.textAlign="center",u.textBaseline="middle",u.font="24px sans-serif",u.lineWidth=4,u.strokeText(s,l[0]/2,l[1]/2,l[0]),u.fillText(s,l[0]/2,l[1]/2,l[0]),u.canvas}})}}class r2 extends Bu{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:ut("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX===void 0||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)(function(i,r,n,o){const a=document.createElement("script"),s="olc_"+Xe(r);function l(){delete window[s],a.parentNode.removeChild(a)}a.async=!0,a.src=i+(i.includes("?")?"&":"?")+"callback="+s;const u=setTimeout(function(){l(),n&&n()},1e4);window[s]=function(c){clearTimeout(u),l(),r(c)},document.head.appendChild(a)})(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(e.tileJSON)}}onXHRLoad_(e){const i=e.target;if(!i.status||i.status>=200&&i.status<300){let r;try{r=JSON.parse(i.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const i=ut("EPSG:4326"),r=this.getProjection();let n;if(e.bounds!==void 0){const l=qu(i,r);n=bx(e.bounds,l)}const o=Vs(r),a=e.minzoom||0,s=Du({extent:o,maxZoom:e.maxzoom||22,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=Ww(e.tiles,s),e.attribution&&!this.getAttributions()){const l=n!==void 0?n:o;this.setAttributions(function(u){return Qt(l,u.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class Ia extends Bu{constructor(e){const i=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=wd(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0&&e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=Xg(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const i=e.join(`
`);this.setTileUrlFunction(Xg(e.map(this.createFromWMTSTemplate.bind(this))),i)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const i in this.dimensions_)e.push(i+"-"+this.dimensions_[i]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const i=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=i=="KVP"?Kg(e,r):e.replace(/\{(\w+?)\}/g,function(a,s){return s.toLowerCase()in r?r[s.toLowerCase()]:a});const n=this.tileGrid,o=this.dimensions_;return function(a,s,l){if(!a)return;const u={TileMatrix:n.getMatrixId(a[0]),TileCol:a[1],TileRow:a[2]};Object.assign(u,o);let c=e;return c=i=="KVP"?Kg(c,u):c.replace(/\{(\w+?)\}/g,function(h,d){return encodeURIComponent(u[d])}),c}}}const cu="BD:09",n2=(t="BD:09")=>{let e=ut(t);return e||(eu(new Qr({code:"BD:09",extent:[-2003772637e-2,-1170804166e-2,2003772637e-2,1247410417e-2],units:"m",axisOrientation:"neu",global:!1})),e)};class Ho extends Bu{constructor(e){const i=e||{},r=i.tileGrid||Ho.getTileGrid(i.projection||"EPSG:3857"),n={projection:i.projection===cu?n2(cu):"EPSG:3857",tileGrid:r,tileUrlFunction:function(o){if(!o)return"";let a=o[0],s=o[1],l=-o[2]-1,u=s<0?"M"+-s:s,c=l<0?"M"+-l:l;return i.key&&i.key!=="vec"?`https://maponline0.bdimg.com/starpic/?qt=satepc&u=x=${u};y=${c};z=${a};v=009;type=sate&fm=46&app=webearth2&v=009&udt=20241109`:"http://online3.map.bdimg.com/onlinelabel/?qt=tile&x="+u+"&y="+c+"&z="+a+"&styles=pl&udt=20151021&scaler=1&p=1"}};super(n)}static getTileGrid(e){return e==="EPSG:4326"||e==="EPSG:4490"?Ho.default4326TileGrid():e==="BD:09"?Ho.defaultBD09TileGrid():Ho.default3857TileGrid()}static default4326TileGrid(){const e=[],i=[];for(let r=1;r<19;r+=1)e.push(1.40625/2**r),i.push(r);return new ao({extent:[-180,-90,180,90],resolutions:e,origin:[-180,90],matrixIds:i,minZoom:1})}static default3857TileGrid(){const e=[],i=[];for(let r=1;r<19;r+=1)e[r]=Math.pow(2,18-r),i.push(r);return new ao({resolutions:e,matrixIds:i,origin:[0,0],minZoom:1})}static defaultBD09TileGrid(){const e=[];for(let i=1;i<19;i+=1)e[i]=Math.pow(2,18-i);return new ao({resolutions:e,origin:[0,0],minZoom:1})}}var uc=[75,60,45,30,15,0],d1=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function aT(t){var e=function(i){var r,n;i.lng=function(s,l,u){for(;s>u;)s-=u-l;for(;s<l;)s+=u-l;return s}(i.lng,-180,180),i.lat=function(s,l,u){return s=Math.max(s,l),s=Math.min(s,u),s}(i.lat,-74,74),r=new Za(i.lng,i.lat);for(var o=0;o<uc.length;o++)if(r.lat>=uc[o]){n=d1[o];break}if(!n){for(o=uc.length-1;o>=0;o--)if(r.lat<=-uc[o]){n=d1[o];break}}var a=function(s,l){if(s&&l){var u=l[0]+l[1]*Math.abs(s.lng),c=Math.abs(s.lat)/l[9],h=l[2]+l[3]*c+l[4]*c*c+l[5]*c*c*c+l[6]*c*c*c*c+l[7]*c*c*c*c*c+l[8]*c*c*c*c*c*c;return new Za(u*=s.lng<0?-1:1,h*=s.lat<0?-1:1)}}(i,n);return i=new Za(a.lng.toFixed(2),a.lat.toFixed(2)),i}(new Za(t[0],t[1]));return[e.lng,e.lat]}function Za(t,e){isNaN(t)&&(t=p1(t),t=isNaN(t)?0:t),f1(t)&&(t=parseFloat(t)),isNaN(e)&&(e=p1(e),e=isNaN(e)?0:e),f1(e)&&(e=parseFloat(e)),this.lng=t,this.lat=e}function p1(t){var e,i,r,n,o="",a="",s="",l=0;if(!t||/[^A-Za-z0-9\+\/\=]/g.exec(t))return t;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=cf.indexOf(t.charAt(l++))<<2|(r=cf.indexOf(t.charAt(l++)))>>4,i=(15&r)<<4|(n=cf.indexOf(t.charAt(l++)))>>2,a=(3&n)<<6|(s=cf.indexOf(t.charAt(l++))),o+=String.fromCharCode(e),n!=64&&(o+=String.fromCharCode(i)),s!=64&&(o+=String.fromCharCode(a)),e=i=a="",r=n=s="";while(l<t.length);return o}function f1(t){return typeof t=="string"}function Lq(t="map"){const e=n2(cu);return new Ns({controls:[],target:t,layers:[new ci({source:new Ho({key:"img",projection:cu}),visible:!0})],view:new Ki({projection:e,center:aT([120.098926,29.343227]),maxZoom:20,minZoom:5,zoom:8})})}function sT(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o2(t,e,i){return i&&sT(t,i),t}function Jc(){return(Jc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function g1(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function a2(t,e){if(t==null)return{};var i,r,n={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(i=o[r])>=0||(n[i]=t[i]);return n}function m1(t){return((e=t)!=null&&typeof e=="object"&&Array.isArray(e)===!1)==1&&Object.prototype.toString.call(t)==="[object Object]";var e}Za.isInRange=function(t){return t&&t.lng<=180&&t.lng>=-180&&t.lat<=74&&t.lat>=-74},Za.prototype.equals=function(t){return t&&lat==t.lat&&lng==t.lng};var s2=Object.prototype,l2=s2.toString,lT=s2.hasOwnProperty,u2=/^\s*function (\w+)/;function v1(t){var e,i=(e=t?.type)!==null&&e!==void 0?e:t;if(i){var r=i.toString().match(u2);return r?r[1]:""}return""}var ca=function(t){var e,i;return m1(t)!==!1&&typeof(e=t.constructor)=="function"&&m1(i=e.prototype)!==!1&&i.hasOwnProperty("isPrototypeOf")!==!1},uT=function(t){return t},Li=uT,hu=function(t,e){return lT.call(t,e)},cT=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Is=Array.isArray||function(t){return l2.call(t)==="[object Array]"},Ps=function(t){return l2.call(t)==="[object Function]"},zh=function(t){return ca(t)&&hu(t,"_vueTypes_name")},c2=function(t){return ca(t)&&(hu(t,"type")||["_vueTypes_name","validator","default","required"].some(function(e){return hu(t,e)}))};function Nv(t,e){return Object.defineProperty(t.bind(e),"__original",{value:t})}function Uo(t,e,i){var r;i===void 0&&(i=!1);var n=!0,o="";r=ca(t)?t:{type:t};var a=zh(r)?r._vueTypes_name+" - ":"";if(c2(r)&&r.type!==null){if(r.type===void 0||r.type===!0||!r.required&&e===void 0)return n;Is(r.type)?(n=r.type.some(function(h){return Uo(h,e,!0)===!0}),o=r.type.map(function(h){return v1(h)}).join(" or ")):n=(o=v1(r))==="Array"?Is(e):o==="Object"?ca(e):o==="String"||o==="Number"||o==="Boolean"||o==="Function"?function(h){if(h==null)return"";var d=h.constructor.toString().match(u2);return d?d[1]:""}(e)===o:e instanceof r.type}if(!n){var s=a+'value "'+e+'" should be of type "'+o+'"';return i===!1?(Li(s),!1):s}if(hu(r,"validator")&&Ps(r.validator)){var l=Li,u=[];if(Li=function(h){u.push(h)},n=r.validator(e),Li=l,!n){var c=(u.length>1?"* ":"")+u.join(`
* `);return u.length=0,i===!1?(Li(c),n):c}}return n}function Xi(t,e){var i=Object.defineProperties(e,{_vueTypes_name:{value:t,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(n){return n!==void 0||this.default?Ps(n)||Uo(this,n,!0)===!0?(this.default=Is(n)?function(){return[].concat(n)}:ca(n)?function(){return Object.assign({},n)}:n,this):(Li(this._vueTypes_name+' - invalid default value: "'+n+'"'),this):this}}}),r=i.validator;return Ps(r)&&(i.validator=Nv(r,i)),i}function Kr(t,e){var i=Xi(t,e);return Object.defineProperty(i,"validate",{value:function(r){return Ps(this.validator)&&Li(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=Nv(r,this),this}})}function y1(t,e,i){var r,n,o=(r=e,n={},Object.getOwnPropertyNames(r).forEach(function(h){n[h]=Object.getOwnPropertyDescriptor(r,h)}),Object.defineProperties({},n));if(o._vueTypes_name=t,!ca(i))return o;var a,s,l=i.validator,u=a2(i,["validator"]);if(Ps(l)){var c=o.validator;c&&(c=(s=(a=c).__original)!==null&&s!==void 0?s:a),o.validator=Nv(c?function(h){return c.call(this,h)&&l.call(this,h)}:l,o)}return Object.assign(o,u)}function eh(t){return t.replace(/^(?!\s*$)/gm,"  ")}var Cn=function(){return Kr("boolean",{type:Boolean})},du=function(){return Kr("string",{type:String})},Jg=function(){return Kr("number",{type:Number})},Dh=function(){return Kr("array",{type:Array})},Md=function(){return Kr("object",{type:Object})};function kd(t){if(!Is(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var e=!1,i=[],r=0;r<t.length;r+=1){var n=t[r];if(c2(n)){if(zh(n)&&n._vueTypes_name==="oneOf"){i=i.concat(n.type);continue}if(Ps(n.validator)&&(e=!0),n.type!==!0&&n.type){i=i.concat(n.type);continue}}i.push(n)}return i=i.filter(function(o,a){return i.indexOf(o)===a}),Xi("oneOfType",e?{type:i,validator:function(o){var a=[],s=t.some(function(l){var u=Uo(zh(l)&&l._vueTypes_name==="oneOf"?l.type||null:l,o,!0);return typeof u=="string"&&a.push(u),u===!0});return s||Li("oneOfType - provided value does not match any of the "+a.length+` passed-in validators:
`+eh(a.join(`
`))),s}}:{type:i})}var Br=function(){function t(){}return t.extend=function(e){var i=this;if(Is(e))return e.forEach(function(h){return i.extend(h)}),this;var r=e.name,n=e.validate,o=n!==void 0&&n,a=e.getter,s=a!==void 0&&a,l=a2(e,["name","validate","getter"]);if(hu(this,r))throw new TypeError('[VueTypes error]: Type "'+r+'" already defined');var u,c=l.type;return zh(c)?(delete l.type,Object.defineProperty(this,r,s?{get:function(){return y1(r,c,l)}}:{value:function(){var h,d=y1(r,c,l);return d.validator&&(d.validator=(h=d.validator).bind.apply(h,[d].concat([].slice.call(arguments)))),d}})):(u=s?{get:function(){var h=Object.assign({},l);return o?Kr(r,h):Xi(r,h)},enumerable:!0}:{value:function(){var h,d,p=Object.assign({},l);return h=o?Kr(r,p):Xi(r,p),p.validator&&(h.validator=(d=p.validator).bind.apply(d,[h].concat([].slice.call(arguments)))),h},enumerable:!0},Object.defineProperty(this,r,u))},o2(t,null,[{key:"any",get:function(){return Kr("any",{})}},{key:"func",get:function(){return Kr("function",{type:Function}).def(this.defaults.func)}},{key:"bool",get:function(){return Cn().def(this.defaults.bool)}},{key:"string",get:function(){return du().def(this.defaults.string)}},{key:"number",get:function(){return Jg().def(this.defaults.number)}},{key:"array",get:function(){return Dh().def(this.defaults.array)}},{key:"object",get:function(){return Md().def(this.defaults.object)}},{key:"integer",get:function(){return Xi("integer",{type:Number,validator:function(e){return cT(e)}}).def(this.defaults.integer)}},{key:"symbol",get:function(){return Xi("symbol",{validator:function(e){return typeof e=="symbol"}})}}]),t}();Br.defaults={},Br.custom=function(t,e){if(e===void 0&&(e="custom validation failed"),typeof t!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Xi(t.name||"<<anonymous function>>",{validator:function(i){var r=t(i);return r||Li(this._vueTypes_name+" - "+e),r}})},Br.oneOf=function(t){if(!Is(t))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var e='oneOf - value should be one of "'+t.join('", "')+'".',i=t.reduce(function(r,n){if(n!=null){var o=n.constructor;r.indexOf(o)===-1&&r.push(o)}return r},[]);return Xi("oneOf",{type:i.length>0?i:void 0,validator:function(r){var n=t.indexOf(r)!==-1;return n||Li(e),n}})},Br.instanceOf=function(t){return Xi("instanceOf",{type:t})},Br.oneOfType=kd,Br.arrayOf=function(t){return Xi("arrayOf",{type:Array,validator:function(e){var i,r=e.every(function(n){return(i=Uo(t,n,!0))===!0});return r||Li(`arrayOf - value validation error:
`+eh(i)),r}})},Br.objectOf=function(t){return Xi("objectOf",{type:Object,validator:function(e){var i,r=Object.keys(e).every(function(n){return(i=Uo(t,e[n],!0))===!0});return r||Li(`objectOf - value validation error:
`+eh(i)),r}})},Br.shape=function(t){var e=Object.keys(t),i=e.filter(function(n){var o;return!!(!((o=t[n])===null||o===void 0)&&o.required)}),r=Xi("shape",{type:Object,validator:function(n){var o=this;if(!ca(n))return!1;var a=Object.keys(n);if(i.length>0&&i.some(function(l){return a.indexOf(l)===-1})){var s=i.filter(function(l){return a.indexOf(l)===-1});return Li(s.length===1?'shape - required property "'+s[0]+'" is not defined.':'shape - required properties "'+s.join('", "')+'" are not defined.'),!1}return a.every(function(l){if(e.indexOf(l)===-1)return o._vueTypes_isLoose===!0||(Li('shape - shape definition does not include a "'+l+'" property. Allowed keys: "'+e.join('", "')+'".'),!1);var u=Uo(t[l],n[l],!0);return typeof u=="string"&&Li('shape - "'+l+`" property validation error:
 `+eh(u)),u===!0})}});return Object.defineProperty(r,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(r,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),r},Br.utils={validate:function(t,e){return Uo(e,t,!0)===!0},toType:function(t,e,i){return i===void 0&&(i=!1),i?Kr(t,e):Xi(t,e)}},function(t){function e(){return t.apply(this,arguments)||this}g1(e,t)}(function(t){var e;return t===void 0&&(t={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(e=function(i){function r(){return i.apply(this,arguments)||this}return g1(r,i),o2(r,null,[{key:"sensibleDefaults",get:function(){return Jc({},this.defaults)},set:function(n){this.defaults=n!==!1?Jc({},n!==!0?n:t):{}}}]),r}(Br)).defaults=Jc({},t),e}());const kt={LAYER_ORDER_CHANGED:"LAYER_ORDER_CHANGED",LAYER_LOCATE:"LAYER_LOCATE",LAYER_OPACITY_CHANGED:"LAYER_OPACITY_CHANGED",LAYER_VISIBLE_CHANGED:"LAYER_VISIBLE_CHANGED",LAYER_ADDED:"LAYER_ADDED",LAYER_REMOVED:"LAYER_REMOVED",LAYER_COPY:"LAYER_COPY",LAYER_ITEMS_CHANGED:"LAYER_ITEMS_CHANGED",LAYER_ITEM_UPDATED:"LAYER_ITEM_UPDATED",LAYER_SWIPE_CHANGED:"LAYER_SWIPE_CHANGED",LAYER_CHANGED:"LAYER_CHANGED",MAP_SYNC_VIEW:"MAP_SYNC_VIEW",MAP_SYNC_VIEW_END:"MAP_SYNC_VIEW_END",MAP_ZOOM_CHANGED:"MAP_ZOOM_CHANGED",MAP_MESSAGE_INFO:"MAP_MESSAGE_INFO",LAYER_TREE_CONTEXT_MENU:"LAYER_TREE_CONTEXT_MENU"};class $v{mapID;mapGroup;data;target;constructor(e,i){this.mapID=e,this.mapGroup=i}}function h2(t){return{all:t=t||new Map,on(e,i){const r=t?.get(e);r&&r.push(i)||t?.set(e,[i])},off(e,i){const r=t?.get(e);r&&r.splice(r.indexOf(i)>>>0,1)},emit(e,i){(t?.get(e)||[]).slice().map(r=>{r(i)}),(t?.get("*")||[]).slice().map(r=>{r(e,i)})}}}h2();class hT{eventBus;constructor(){this.eventBus=h2()}eventEmit(e,i){this.eventBus.emit(e,i)}eventOn(e,i){this.eventBus.on(e,i)}eventOff(e,i){this.eventBus.off(e,i)}}const Bh=new hT,th=0,d2=1,p2=2,f2=3,wr=4,em=5,Oo=6,tm=7,g2=8,Vv=9,jl=10,Qo=11,m2=12,cc=[g2],Jn=[m2],Wo=[d2],_1=[f2];class v2{drawCustom(e,i,r,n,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,i,r){}drawFeature(e,i,r){}drawGeometryCollection(e,i,r){}drawLineString(e,i,r){}drawMultiLineString(e,i,r){}drawMultiPoint(e,i,r){}drawMultiPolygon(e,i,r){}drawPoint(e,i,r){}drawPolygon(e,i,r){}drawText(e,i,r){}setFillStrokeStyle(e,i){}setImageStyle(e,i){}setTextStyle(e,i){}}class Il extends v2{constructor(e,i,r,n){super(),this.tolerance=e,this.maxExtent=i,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const i=this.pixelRatio;return i==1?e:e.map(function(r){return r*i})}appendFlatPointCoordinates(e,i){const r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates;let a=o.length;for(let s=0,l=e.length;s<l;s+=i)n[0]=e[s],n[1]=e[s+1],aa(r,n)&&(o[a++]=n[0],o[a++]=n[1]);return a}appendFlatLineCoordinates(e,i,r,n,o,a){const s=this.coordinates;let l=s.length;const u=this.getBufferedMaxExtent();a&&(i+=n);let c=e[i],h=e[i+1];const d=this.tmpCoordinate_;let p,f,g,_=!0;for(p=i+n;p<r;p+=n)d[0]=e[p],d[1]=e[p+1],g=Uf(u,d),g!==f?(_&&(s[l++]=c,s[l++]=h,_=!1),s[l++]=d[0],s[l++]=d[1]):g===_h?(s[l++]=d[0],s[l++]=d[1],_=!1):_=!0,c=d[0],h=d[1],f=g;return(o&&_||p===i+n)&&(s[l++]=c,s[l++]=h),l}drawCustomCoordinates_(e,i,r,n,o){for(let a=0,s=r.length;a<s;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,i,l,n,!1,!1);o.push(u),i=l}return i}drawCustom(e,i,r,n,o){this.beginGeometry(e,i,o);const a=e.getType(),s=e.getStride(),l=this.coordinates.length;let u,c,h,d,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();p=0;for(let g=0,_=f.length;g<_;++g){const v=[];p=this.drawCustomCoordinates_(u,p,f[g],s,v),d.push(v)}this.instructions.push([wr,l,d,e,r,eg,o]),this.hitDetectionInstructions.push([wr,l,d,e,n||r,eg,o]);break;case"Polygon":case"MultiLineString":h=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),s,h),this.instructions.push([wr,l,h,e,r,ru,o]),this.hitDetectionInstructions.push([wr,l,h,e,n||r,ru,o]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,s,!1,!1),this.instructions.push([wr,l,c,e,r,Zn,o]),this.hitDetectionInstructions.push([wr,l,c,e,n||r,Zn,o]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,s),c>l&&(this.instructions.push([wr,l,c,e,r,Zn,o]),this.hitDetectionInstructions.push([wr,l,c,e,n||r,Zn,o]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([wr,l,c,e,r,void 0,o]),this.hitDetectionInstructions.push([wr,l,c,e,n||r,void 0,o])}this.endGeometry(i)}beginGeometry(e,i,r){this.beginGeometryInstruction1_=[th,i,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[th,i,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let i;e.reverse();const r=e.length;let n,o,a=-1;for(i=0;i<r;++i)n=e[i],o=n[0],o==tm?a=i:o==th&&(n[2]=i,qM(this.hitDetectionInstructions,a,i),a=-1)}setFillStrokeStyle(e,i){const r=this.state;if(e){const n=e.getColor();r.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,r.fillStyle=Yr(n||$i)}else r.fillStyle=void 0;if(i){const n=i.getColor();r.strokeStyle=Yr(n||su);const o=i.getLineCap();r.lineCap=o!==void 0?o:ks;const a=i.getLineDash();r.lineDash=a?a.slice():Sn;const s=i.getLineDashOffset();r.lineDashOffset=s||0;const l=i.getLineJoin();r.lineJoin=l!==void 0?l:Ts;const u=i.getWidth();r.lineWidth=u!==void 0?u:1;const c=i.getMiterLimit();r.miterLimit=c!==void 0?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const i=e.fillStyle,r=[jl,i];return typeof i!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Qo,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,i){const r=e.fillStyle;typeof r=="string"&&e.currentFillStyle==r||(r!==void 0&&this.instructions.push(i.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,i){const r=e.strokeStyle,n=e.lineCap,o=e.lineDash,a=e.lineDashOffset,s=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=n||o!=e.currentLineDash&&!yo(e.currentLineDash,o)||e.currentLineDashOffset!=a||e.currentLineJoin!=s||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(r!==void 0&&i.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=n,e.currentLineDash=o,e.currentLineDashOffset=a,e.currentLineJoin=s,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[tm,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=vx(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;oo(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class b1 extends Il{constructor(e,i,r,n){super(e,i,r,n)}drawFlatCoordinatess_(e,i,r,n){const o=this.state,a=o.fillStyle!==void 0,s=o.strokeStyle!==void 0,l=r.length;this.instructions.push(Wo),this.hitDetectionInstructions.push(Wo);for(let u=0;u<l;++u){const c=r[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,i,c,n,!0,!s),p=[Vv,h,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(_1),this.hitDetectionInstructions.push(_1)),i=c}return a&&(this.instructions.push(cc),this.hitDetectionInstructions.push(cc)),s&&(this.instructions.push(Jn),this.hitDetectionInstructions.push(Jn)),i}drawCircle(e,i,r){const n=this.state,o=n.fillStyle,a=n.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([jl,$i]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qo,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Sn,0]);const s=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);const c=[p2,u];this.instructions.push(Wo,c),this.hitDetectionInstructions.push(Wo,c),n.fillStyle!==void 0&&(this.instructions.push(cc),this.hitDetectionInstructions.push(cc)),n.strokeStyle!==void 0&&(this.instructions.push(Jn),this.hitDetectionInstructions.push(Jn)),this.endGeometry(i)}drawPolygon(e,i,r){const n=this.state,o=n.fillStyle,a=n.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([jl,$i]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qo,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Sn,0]);const s=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,s,u),this.endGeometry(i)}drawMultiPolygon(e,i,r){const n=this.state,o=n.fillStyle,a=n.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([jl,$i]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qo,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Sn,0]);const s=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=s.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,s[h],u);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const i=this.coordinates;for(let r=0,n=i.length;r<n;++r)i[r]=Fo(i[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function dT(t,e,i,r,n){const o=[];let a=i,s=0,l=e.slice(i,2);for(;s<t&&a+n<r;){const[u,c]=l.slice(-2),h=e[a+n],d=e[a+n+1],p=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(s+=p,s>=t){const f=(t-s+p)/p,g=Zi(u,h,f),_=Zi(c,d,f);l.push(g,_),o.push(l),l=[g,_],s==t&&(a+=n),s=0}else if(s<t)l.push(e[a+n],e[a+n+1]),a+=n;else{const f=p-s,g=Zi(u,h,f/p),_=Zi(c,d,f/p);l.push(g,_),o.push(l),l=[g,_],s=0,a+=n}}return s>0&&o.push(l),o}function pT(t,e,i,r,n){let o,a,s,l,u,c,h,d,p,f,g=i,_=i,v=0,b=0,m=i;for(a=i;a<r;a+=n){const y=e[a],x=e[a+1];u!==void 0&&(p=y-u,f=x-c,l=Math.sqrt(p*p+f*f),h!==void 0&&(b+=s,o=Math.acos((h*p+d*f)/(s*l)),o>t&&(b>v&&(v=b,g=m,_=a),b=0,m=a-n)),s=l,h=p,d=f),u=y,c=x}return b+=l,b>v?[m,a]:[g,_]}const jh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},fT={Circle:b1,Default:Il,Image:class extends Il{constructor(t,e,i,r){super(t,e,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!aa(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const r=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,n);this.instructions.push([Oo,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Oo,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const r=t.getFlatCoordinates(),n=[];for(let s=0,l=r.length;s<l;s+=t.getStride())this.maxExtent&&!aa(this.maxExtent,r.slice(s,s+2))||n.push(r[s],r[s+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(n,2);this.instructions.push([Oo,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Oo,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),r=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends Il{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinates_(t,e,i,r){const n=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),a=[Vv,n,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e,i){const r=this.state,n=r.strokeStyle,o=r.lineWidth;if(n===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([Qo,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Sn,0],Wo);const a=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(a,0,a.length,s),this.hitDetectionInstructions.push(Jn),this.endGeometry(e)}drawMultiLineString(t,e,i){const r=this.state,n=r.strokeStyle,o=r.lineWidth;if(n===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([Qo,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Sn,0],Wo);const a=t.getEnds(),s=t.getFlatCoordinates(),l=t.getStride();let u=0;for(let c=0,h=a.length;c<h;++c)u=this.drawFlatCoordinates_(s,u,a[c],l);this.hitDetectionInstructions.push(Jn),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Jn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Jn),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Wo)}},Polygon:b1,Text:class extends Il{constructor(t,e,i,r){super(t,e,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[$i]={fillStyle:$i},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const r=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!n)return;const a=this.coordinates;let s=a.length;const l=t.getType();let u=null,c=t.getStride();if(o.placement!=="line"||l!="LineString"&&l!="MultiLineString"&&l!="Polygon"&&l!="MultiPolygon"){let h=o.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),c=2;break;case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||h.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const v=t.getFlatInteriorPoints();u=[];for(let b=0,m=v.length;b<m;b+=3)o.overflow||h.push(v[b+2]/this.resolution),u.push(v[b],v[b+1]);if(u.length===0)return;c=2}const d=this.appendFlatPointCoordinates(u,c);if(d===s)return;if(h&&(d-s)/2!=u.length/c){let v=s/2;h=h.filter((b,m)=>{const y=a[2*(v+m)]===u[m*c]&&a[2*(v+m)+1]===u[m*c+1];return y||--v,y})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i);let p=o.padding;if(p!=Go&&(o.scale[0]<0||o.scale[1]<0)){let v=o.padding[0],b=o.padding[1],m=o.padding[2],y=o.padding[3];o.scale[0]<0&&(b=-b,y=-y),o.scale[1]<0&&(v=-v,m=-m),p=[v,b,m,y]}const f=this.pixelRatio;this.instructions.push([Oo,s,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==Go?Go:p.map(function(v){return v*f}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const g=1/f,_=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=$i,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Oo,s,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?$i:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),o.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!Qt(this.maxExtent,t.getExtent()))return;let h;if(u=t.getFlatCoordinates(),l=="LineString")h=[u.length];else if(l=="MultiLineString")h=t.getEnds();else if(l=="Polygon")h=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const g=t.getEndss();h=[];for(let _=0,v=g.length;_<v;++_)h.push(g[_][0])}this.beginGeometry(t,e,i);const d=o.repeat,p=d?void 0:o.textAlign;let f=0;for(let g=0,_=h.length;g<_;++g){let v;v=d?dT(d*this.resolution,u,f,h[g],c):[u.slice(f,h[g])];for(let b=0,m=v.length;b<m;++b){const y=v[b];let x=0,C=y.length;if(p==null){const L=pT(o.maxAngle,y,0,y.length,2);x=L[0],C=L[1]}for(let L=x;L<C;L+=c)a.push(y[L],y[L+1]);const k=a.length;f=h[g],this.drawChars_(s,k),s=k}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||lu,justify:e.justify,textBaseline:e.textBaseline||Lh,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,r=this.textState_,n=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const s=this.pixelRatio,l=jh[r.textBaseline],u=this.textOffsetY_*s,c=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([em,t,e,l,r.overflow,a,r.maxAngle,s,u,n,h*s,c,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([em,t,e,l,r.overflow,a&&$i,r.maxAngle,s,u,n,h*s,c,o,1/s,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let i,r,n;if(t){const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Yr(o.getColor()||$i)):(r=null,this.textFillState_=r);const a=t.getStroke();if(a){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const f=a.getLineDash(),g=a.getLineDashOffset(),_=a.getWidth(),v=a.getMiterLimit();n.lineCap=a.getLineCap()||ks,n.lineDash=f?f.slice():Sn,n.lineDashOffset=g===void 0?0:g,n.lineJoin=a.getLineJoin()||Ts,n.lineWidth=_===void 0?1:_,n.miterLimit=v===void 0?10:v,n.strokeStyle=Yr(a.getColor()||su)}else n=null,this.textStrokeState_=n;i=this.textState_;const s=t.getFont()||uw;cw(s);const l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=s,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Lh,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Go,i.scale=l===void 0?[1,1]:l;const u=t.getOffsetX(),c=t.getOffsetY(),h=t.getRotateWithView(),d=t.getKeepUpright(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=h!==void 0&&h,this.textKeepUpright_=d===void 0||d,this.textRotation_=p===void 0?0:p,this.strokeKey_=n?(typeof n.strokeStyle=="string"?n.strokeStyle:Xe(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Xe(r.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}};class y2{constructor(e,i,r,n){this.tolerance_=e,this.maxExtent_=i,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const i in this.buildersByZIndex_){e[i]=e[i]||{};const r=this.buildersByZIndex_[i];for(const n in r){const o=r[n].finish();e[i][n]=o}}return e}getBuilder(e,i){const r=e!==void 0?e.toString():"0";let n=this.buildersByZIndex_[r];n===void 0&&(n={},this.buildersByZIndex_[r]=n);let o=n[i];return o===void 0&&(o=new fT[i](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[i]=o),o}}function gT(t,e,i,r,n,o,a,s,l,u,c,h,d=!0){let p=t[e],f=t[e+1],g=0,_=0,v=0,b=0;function m(){g=p,_=f,p=t[e+=r],f=t[e+1],b+=v,v=Math.sqrt((p-g)*(p-g)+(f-_)*(f-_))}do m();while(e<i-r&&b+v<o);let y=v===0?0:(o-b)/v;const x=Zi(g,p,y),C=Zi(_,f,y),k=e-r,L=b,A=o+s*l(u,n,c);for(;e<i-r&&b+v<A;)m();y=v===0?0:(A-b)/v;const E=Zi(g,p,y),I=Zi(_,f,y);let T=!1;if(d)if(h){const F=[x,C,E,I];cv(F,0,4,2,h,F,F),T=F[0]>F[2]}else T=x>E;const R=Math.PI,M=[],q=k+r===e;let P;if(v=0,b=L,p=t[e=k],f=t[e+1],q){m(),P=Math.atan2(f-_,p-g),T&&(P+=P>0?-R:R);const F=(E+x)/2,j=(I+C)/2;return M[0]=[F,j,(A-o)/2,P,n],M}for(let F=0,j=(n=n.replace(/\n/g," ")).length;F<j;){m();let V=Math.atan2(f-_,p-g);if(T&&(V+=V>0?-R:R),P!==void 0){let N=V-P;if(N+=N>R?-2*R:N<-R?2*R:0,Math.abs(N)>a)return null}P=V;const O=F;let $=0;for(;F<j;++F){const N=s*l(u,n[T?j-F-1:F],c);if(e+r<i&&b+v<o+$+N/2)break;$+=N}if(F===O)continue;const J=T?n.substring(j-O,j-F):n.substring(O,F);y=v===0?0:(o+$/2-b)/v;const te=Zi(g,p,y),ie=Zi(_,f,y);M.push([te,ie,$/2,V,J]),o+=$}return M}const Pa=[1/0,1/0,-1/0,-1/0],On=[],pn=[],fn=[],zn=[];function x1(t){return t[3].declutterBox}const w1=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Cp(t,e){return e==="start"?e=w1.test(t)?"right":"left":e==="end"&&(e=w1.test(t)?"left":"right"),jh[e]}function mT(t,e,i){return i>0&&t.push(`
`,""),t.push(e,""),t}class vT{constructor(e,i,r,n,o){this.overlaps=r,this.pixelRatio=i,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new Av:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,i,r,n){const o=e+i+r+n;if(this.labels_[o])return this.labels_[o];const a=n?this.strokeStates[n]:null,s=r?this.fillStates[r]:null,l=this.textStates[i],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=l.justify?jh[l.justify]:Cp(Array.isArray(e)?e[0]:e,l.textAlign||lu),d=n&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(mT,[]),{width:f,height:g,widths:_,heights:v,lineWidths:b}=function(F,j){const V=[],O=[],$=[];let J=0,te=0,ie=0,N=0;for(let z=0,B=j.length;z<=B;z+=2){const K=j[z];if(K===`
`||z===B){J=Math.max(J,te),$.push(te),te=0,ie+=N,N=0;continue}const U=j[z+1]||F.font,W=Ih(U,K);V.push(W),te+=W;const ve=T5(U);O.push(ve),N=Math.max(N,ve)}return{width:J,height:ie,widths:V,heights:O,lineWidths:$}}(l,p),m=f+d,y=[],x=(m+2)*c[0],C=(g+d)*c[1],k={width:x<0?Math.floor(x):Math.ceil(x),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:y};c[0]==1&&c[1]==1||y.push("scale",c),n&&(y.push("strokeStyle",a.strokeStyle),y.push("lineWidth",d),y.push("lineCap",a.lineCap),y.push("lineJoin",a.lineJoin),y.push("miterLimit",a.miterLimit),y.push("setLineDash",[a.lineDash]),y.push("lineDashOffset",a.lineDashOffset)),r&&y.push("fillStyle",s.fillStyle),y.push("textBaseline","middle"),y.push("textAlign","center");const L=.5-h;let A=h*m+L*d;const E=[],I=[];let T,R=0,M=0,q=0,P=0;for(let F=0,j=p.length;F<j;F+=2){const V=p[F];if(V===`
`){M+=R,R=0,A=h*m+L*d,++P;continue}const O=p[F+1]||l.font;O!==T&&(n&&E.push("font",O),r&&I.push("font",O),T=O),R=Math.max(R,v[q]);const $=[V,A+L*_[q]+h*(_[q]-b[P]),.5*(d+R)+M];A+=_[q],n&&E.push("strokeText",$),r&&I.push("fillText",$),++q}return Array.prototype.push.apply(y,E),Array.prototype.push.apply(y,I),this.labels_[o]=k,k}replayTextBackground_(e,i,r,n,o,a,s){e.beginPath(),e.moveTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,o),e.lineTo.apply(e,i),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())}calculateImageOrLabelDimensions_(e,i,r,n,o,a,s,l,u,c,h,d,p,f,g,_){let v=r-(s*=d[0]),b=n-(l*=d[1]);const m=o+u>e?e-u:o,y=a+c>i?i-c:a,x=f[3]+m*d[0]+f[1],C=f[0]+y*d[1]+f[2],k=v-f[3],L=b-f[0];let A;return(g||h!==0)&&(On[0]=k,zn[0]=k,On[1]=L,pn[1]=L,pn[0]=k+x,fn[0]=pn[0],fn[1]=L+C,zn[1]=fn[1]),h!==0?(A=sn([1,0,0,1,0,0],r,n,1,1,h,-r,-n),ri(A,On),ri(A,pn),ri(A,fn),ri(A,zn),an(Math.min(On[0],pn[0],fn[0],zn[0]),Math.min(On[1],pn[1],fn[1],zn[1]),Math.max(On[0],pn[0],fn[0],zn[0]),Math.max(On[1],pn[1],fn[1],zn[1]),Pa)):an(Math.min(k,k+x),Math.min(L,L+C),Math.max(k,k+x),Math.max(L,L+C),Pa),p&&(v=Math.round(v),b=Math.round(b)),{drawImageX:v,drawImageY:b,drawImageW:m,drawImageH:y,originX:u,originY:c,declutterBox:{minX:Pa[0],minY:Pa[1],maxX:Pa[2],maxY:Pa[3],value:_},canvasTransform:A,scale:d}}replayImageOrLabel_(e,i,r,n,o,a,s){const l=!(!a&&!s),u=n.declutterBox,c=s?s[2]*n.scale[0]/2:0;return u.minX-c<=i[0]&&u.maxX+c>=0&&u.minY-c<=i[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,On,pn,fn,zn,a,s),E5(e,n.canvasTransform,o,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const i=this.alignAndScaleFill_;if(i){const r=ri(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(r[0]%n,r[1]%n),i!==1&&e.scale(i,i),e.rotate(this.viewRotation_)}e.fill(),i&&e.restore()}setStrokeStyle_(e,i){e.strokeStyle=i[1],e.lineWidth=i[2],e.lineCap=i[3],e.lineJoin=i[4],e.miterLimit=i[5],e.lineDashOffset=i[7],e.setLineDash(i[6])}drawLabelWithPointPlacement_(e,i,r,n){const o=this.textStates[i],a=this.createLabel(e,i,n,r),s=this.strokeStates[r],l=this.pixelRatio,u=Cp(Array.isArray(e)?e[0]:e,o.textAlign||lu),c=jh[o.textBaseline||Lh],h=s&&s.lineWidth?s.lineWidth:0;return{label:a,anchorX:u*(a.width/l-2*o.scale[0])+2*(.5-u)*h,anchorY:c*a.height/l+2*(.5-c)*h}}execute_(e,i,r,n,o,a,s,l){const u=this.zIndexContext_;let c;var h,d;this.pixelCoordinates_&&yo(r,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Xn(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),h=this.renderedTransform_,d=r,h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5]);let p=0;const f=n.length;let g,_,v,b,m,y,x,C,k,L,A,E,I,T=0,R=0,M=0,q=null,P=null;const F=this.coordinateCache_,j=this.viewRotation_,V=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,O={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},$=this.instructions!=n||this.overlaps?0:200;let J,te,ie,N;for(;p<f;){const z=n[p];switch(z[0]){case th:J=z[1],N=z[3],J.getGeometry()?s===void 0||Qt(s,N.getExtent())?++p:p=z[2]+1:p=z[2],u&&(u.zIndex=z[4]);break;case d2:R>$&&(this.fill_(e),R=0),M>$&&(e.stroke(),M=0),R||M||(e.beginPath(),m=NaN,y=NaN),++p;break;case p2:T=z[1];const B=c[T],K=c[T+1],U=c[T+2]-B,W=c[T+3]-K,ve=Math.sqrt(U*U+W*W);e.moveTo(B+ve,K),e.arc(B,K,ve,0,2*Math.PI,!0),++p;break;case f2:e.closePath(),++p;break;case wr:T=z[1],g=z[2];const ce=z[3],fe=z[4],pe=z[5];O.geometry=ce,O.feature=J,p in F||(F[p]=[]);const Ee=F[p];pe?pe(c,T,g,2,Ee):(Ee[0]=c[T],Ee[1]=c[T+1],Ee.length=2),u&&(u.zIndex=z[6]),fe(Ee,O),++p;break;case Oo:T=z[1],g=z[2],k=z[3],_=z[4],v=z[5];let Le=z[6];const me=z[7],we=z[8],Pe=z[9],Ve=z[10];let oe=z[11];const he=z[12];let Z=z[13];b=z[14]||"declutter";const se=z[15];if(!k&&z.length>=20){L=z[19],A=z[20],E=z[21],I=z[22];const re=this.drawLabelWithPointPlacement_(L,A,E,I);k=re.label,z[3]=k;const ke=z[23];_=(re.anchorX-ke)*this.pixelRatio,z[4]=_;const de=z[24];v=(re.anchorY-de)*this.pixelRatio,z[5]=v,Le=k.height,z[6]=Le,Z=k.width,z[13]=Z}let Se,Ie,Ae,X;z.length>25&&(Se=z[25]),z.length>17?(Ie=z[16],Ae=z[17],X=z[18]):(Ie=Go,Ae=!1,X=!1),Ve&&V?oe+=j:Ve||V||(oe-=j);let ne=0;for(;T<g;T+=2){if(Se&&Se[ne++]<Z/this.pixelRatio)continue;const re=this.calculateImageOrLabelDimensions_(k.width,k.height,c[T],c[T+1],Z,Le,_,v,we,Pe,oe,he,o,Ie,Ae||X,J),ke=[e,i,k,re,me,Ae?q:null,X?P:null];if(l){let de,Be,Ue,yt,Pt;if(se){const Ze=g-T;if(!se[Ze]){se[Ze]={args:ke,declutterMode:b};continue}const ni=se[Ze];de=ni.args,Be=ni.declutterMode,delete se[Ze],Ue=x1(de)}if(!de||Be==="declutter"&&l.collides(Ue)||(yt=!0),b==="declutter"&&l.collides(re.declutterBox)||(Pt=!0),Be==="declutter"&&b==="declutter"){const Ze=yt&&Pt;yt=Ze,Pt=Ze}yt&&(Be!=="none"&&l.insert(Ue),this.replayImageOrLabel_.apply(this,de)),Pt&&(b!=="none"&&l.insert(re.declutterBox),this.replayImageOrLabel_.apply(this,ke))}else this.replayImageOrLabel_.apply(this,ke)}++p;break;case em:const ge=z[1],Re=z[2],Ge=z[3],Je=z[4];I=z[5];const qe=z[6],Ke=z[7],He=z[8];E=z[9];const ee=z[10];L=z[11],A=z[12];const Me=[z[13],z[13]];b=z[14]||"declutter";const be=z[15],ye=this.textStates[A],xe=ye.font,D=[ye.scale[0]*Ke,ye.scale[1]*Ke];let H;xe in this.widths_?H=this.widths_[xe]:(H={},this.widths_[xe]=H);const Q=Yw(c,ge,Re,2),le=Math.abs(D[0])*Ry(xe,L,H);if(Je||le<=Q){const re=gT(c,ge,Re,2,L,(Q-le)*Cp(L,this.textStates[A].textAlign),qe,Math.abs(D[0]),Ry,xe,H,V?0:this.viewRotation_,be);e:if(re){const ke=[];let de,Be,Ue,yt,Pt;if(E)for(de=0,Be=re.length;de<Be;++de){Pt=re[de],Ue=Pt[4],yt=this.createLabel(Ue,A,"",E),_=Pt[2]+(D[0]<0?-ee:ee),v=Ge*yt.height+2*(.5-Ge)*ee*D[1]/D[0]-He;const Ze=this.calculateImageOrLabelDimensions_(yt.width,yt.height,Pt[0],Pt[1],yt.width,yt.height,_,v,0,0,Pt[3],Me,!1,Go,!1,J);if(l&&b==="declutter"&&l.collides(Ze.declutterBox))break e;ke.push([e,i,yt,Ze,1,null,null])}if(I)for(de=0,Be=re.length;de<Be;++de){Pt=re[de],Ue=Pt[4],yt=this.createLabel(Ue,A,I,""),_=Pt[2],v=Ge*yt.height-He;const Ze=this.calculateImageOrLabelDimensions_(yt.width,yt.height,Pt[0],Pt[1],yt.width,yt.height,_,v,0,0,Pt[3],Me,!1,Go,!1,J);if(l&&b==="declutter"&&l.collides(Ze.declutterBox))break e;ke.push([e,i,yt,Ze,1,null,null])}l&&b!=="none"&&l.load(ke.map(x1));for(let Ze=0,ni=ke.length;Ze<ni;++Ze)this.replayImageOrLabel_.apply(this,ke[Ze])}}++p;break;case tm:if(a!==void 0){J=z[1];const re=a(J,N,b);if(re)return re}++p;break;case g2:$?R++:this.fill_(e),++p;break;case Vv:for(T=z[1],g=z[2],te=c[T],ie=c[T+1],e.moveTo(te,ie),m=te+.5|0,y=ie+.5|0,T+=2;T<g;T+=2)te=c[T],ie=c[T+1],x=te+.5|0,C=ie+.5|0,T!=g-2&&x===m&&C===y||(e.lineTo(te,ie),m=x,y=C);++p;break;case jl:q=z,this.alignAndScaleFill_=z[2],R&&(this.fill_(e),R=0,M&&(e.stroke(),M=0)),e.fillStyle=z[1],++p;break;case Qo:P=z,M&&(e.stroke(),M=0),this.setStrokeStyle_(e,z),++p;break;case m2:$?M++:e.stroke(),++p;break;default:++p}}R&&this.fill_(e),M&&e.stroke()}execute(e,i,r,n,o,a){this.viewRotation_=n,this.execute_(e,i,r,this.instructions,o,void 0,void 0,a)}executeHitDetection(e,i,r,n,o){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],i,this.hitDetectionInstructions,!0,n,o)}}const Qa=["Polygon","Circle","LineString","Image","Text","Default"],Nh=["Image","Text"],yT=Qa.filter(t=>!Nh.includes(t));class _2{constructor(e,i,r,n,o,a,s){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=i,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,s)}clip(e,i){const r=this.getClipCoords(i);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,i){for(const r in e){let n=this.executorsByZIndex_[r];n===void 0&&(n={},this.executorsByZIndex_[r]=n);const o=e[r];for(const a in o){const s=o[a];n[a]=new vT(this.resolution_,this.pixelRatio_,this.overlaps_,s,i)}}}hasExecutors(e){for(const i in this.executorsByZIndex_){const r=this.executorsByZIndex_[i];for(let n=0,o=e.length;n<o;++n)if(e[n]in r)return!0}return!1}forEachFeatureAtCoordinate(e,i,r,n,o,a){const s=2*(n=Math.round(n))+1,l=sn(this.hitDetectionTransform_,n+.5,n+.5,1/i,-1/i,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Vt(s,s,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;let h;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):u||c.clearRect(0,0,s,s),this.renderBuffer_!==void 0&&(h=[1/0,1/0,-1/0,-1/0],Dl(h,e),oo(h,i*(this.renderBuffer_+n),h));const d=function(x){if(Mp[x]!==void 0)return Mp[x];const C=2*x+1,k=x*x,L=new Array(k+1);for(let E=0;E<=x;++E)for(let I=0;I<=x;++I){const T=E*E+I*I;if(T>k)break;let R=L[T];R||(R=[],L[T]=R),R.push(4*((x+E)*C+(x+I))+3),E>0&&R.push(4*((x-E)*C+(x+I))+3),I>0&&(R.push(4*((x+E)*C+(x-I))+3),E>0&&R.push(4*((x-E)*C+(x-I))+3))}const A=[];for(let E=0,I=L.length;E<I;++E)L[E]&&A.push(...L[E]);return Mp[x]=A,A}(n);let p;function f(x,C,k){const L=c.getImageData(0,0,s,s).data;for(let A=0,E=d.length;A<E;A++)if(L[d[A]]>0){if(!a||k==="none"||p!=="Image"&&p!=="Text"||a.includes(x)){const I=(d[A]-3)/4,T=n-I%s,R=n-(I/s|0),M=o(x,C,T*T+R*R);if(M)return M}c.clearRect(0,0,s,s);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let _,v,b,m,y;for(g.sort(Xr),_=g.length-1;_>=0;--_){const x=g[_].toString();for(b=this.executorsByZIndex_[x],v=Qa.length-1;v>=0;--v)if(p=Qa[v],m=b[p],m!==void 0&&(y=m.executeHitDetection(c,l,r,f,h),y))return y}}getClipCoords(e){const i=this.maxExtent_;if(!i)return null;const r=i[0],n=i[1],o=i[2],a=i[3],s=[r,n,r,a,o,a,o,n];return Xn(s,0,8,2,e,s),s}isEmpty(){return po(this.executorsByZIndex_)}execute(e,i,r,n,o,a,s){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Xr),a=a||Qa;const u=Qa.length;let c,h,d,p,f;for(s&&l.reverse(),c=0,h=l.length;c<h;++c){const g=l[c].toString();for(f=this.executorsByZIndex_[g],d=0,p=a.length;d<p;++d){const _=a[d],v=f[_];if(v!==void 0){const b=s===null?void 0:v.getZIndexContext(),m=b?b.getContext():e,y=this.maxExtent_&&_!=="Image"&&_!=="Text";if(y&&(m.save(),this.clip(m,r)),b&&_!=="Text"&&_!=="Image"?b.pushFunction(x=>v.execute(x,i,r,n,o,s)):v.execute(m,i,r,n,o,s),y&&m.restore(),b){b.offset();const x=l[c]*u+d;this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(b)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,i=Object.keys(e).map(Number).sort(Xr);for(let r=0,n=i.length;r<n;++r)e[i[r]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[i[r]].length=0}}const Mp={};class b2 extends v2{constructor(e,i,r,n,o,a,s){super(),this.context_=e,this.pixelRatio_=i,this.extent_=r,this.transform_=n,this.transformRotation_=n?Pu(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=a,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,i,r,n){if(!this.image_)return;const o=Xn(e,i,r,n,this.transform_,this.pixelCoordinates_),a=this.context_,s=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=o.length;c<h;c+=2){const d=o[c]-this.imageAnchorX_,p=o[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,g=p+this.imageAnchorY_;sn(s,f,g,1,1,u,-f,-g),a.save(),a.transform.apply(a,s),a.translate(f,g),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,i,r,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Xn(e,i,r,n,this.transform_,this.pixelCoordinates_),a=this.context_;let s=this.textRotation_;for(this.transformRotation_===0&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);i<r;i+=n){const l=o[i]+this.textOffsetX_,u=o[i+1]+this.textOffsetY_;s!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(s),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,i,r,n,o){const a=this.context_,s=Xn(e,i,r,n,this.transform_,this.pixelCoordinates_);a.moveTo(s[0],s[1]);let l=s.length;o&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(s[u],s[u+1]);return o&&a.closePath(),r}drawRings_(e,i,r,n){for(let o=0,a=r.length;o<a;++o)i=this.moveToLineTo_(e,i,r[o],n,!0);return i}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Qt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=function(s,l,u){const c=s.getFlatCoordinates();if(!c)return null;const h=s.getStride();return Xn(c,0,c.length,h,l,u)}(e,this.transform_,this.pixelCoordinates_),r=i[2]-i[0],n=i[3]-i[1],o=Math.sqrt(r*r+n*n),a=this.context_;a.beginPath(),a.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,i){const r=i.getGeometryFunction()(e);r&&(this.setStyle(i),this.drawGeometry(r))}drawGeometryCollection(e){const i=e.getGeometriesArray();for(let r=0,n=i.length;r<n;++r)this.drawGeometry(i[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Qt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getExtent();if(Qt(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=e.getFlatCoordinates();let o=0;const a=e.getEnds(),s=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)o=this.moveToLineTo_(n,o,a[l],s,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Qt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_;i.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=e.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Qt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getOrientedFlatCoordinates();let n=0;const o=e.getEndss(),a=e.getStride();i.beginPath();for(let s=0,l=o.length;s<l;++s){const u=o[s];n=this.drawRings_(r,n,u,a)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=e.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(e){const i=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,i.fillStyle=e.fillStyle):(i.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const i=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,i.lineCap=e.lineCap),yo(r.lineDash,e.lineDash)||i.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,i.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,i.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,i.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,i.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset,i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const i=this.context_,r=this.contextTextState_,n=e.textAlign?e.textAlign:lu;r?(r.font!=e.font&&(r.font=e.font,i.font=e.font),r.textAlign!=n&&(r.textAlign=n,i.textAlign=n),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,i.textBaseline=e.textBaseline)):(i.font=e.font,i.textAlign=n,i.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,i){if(e){const r=e.getColor();this.fillState_={fillStyle:Yr(r||$i)}}else this.fillState_=null;if(i){const r=i.getColor(),n=i.getLineCap(),o=i.getLineDash(),a=i.getLineDashOffset(),s=i.getLineJoin(),l=i.getWidth(),u=i.getMiterLimit(),c=o||Sn;this.strokeState_={lineCap:n!==void 0?n:ks,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(a||0)*this.pixelRatio_,lineJoin:s!==void 0?s:Ts,lineWidth:(l!==void 0?l:1)*this.pixelRatio_,miterLimit:u!==void 0?u:10,strokeStyle:Yr(r||su)}}else this.strokeState_=null}setImageStyle(e){let i;if(!e||!(i=e.getSize()))return void(this.image_=null);const r=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=i[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=i[0]*r}setTextStyle(e){if(e){const i=e.getFill();if(i){const p=i.getColor();this.textFillState_={fillStyle:Yr(p||$i)}}else this.textFillState_=null;const r=e.getStroke();if(r){const p=r.getColor(),f=r.getLineCap(),g=r.getLineDash(),_=r.getLineDashOffset(),v=r.getLineJoin(),b=r.getWidth(),m=r.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:ks,lineDash:g||Sn,lineDashOffset:_||0,lineJoin:v!==void 0?v:Ts,lineWidth:b!==void 0?b:1,miterLimit:m!==void 0?m:10,strokeStyle:Yr(p||su)}}else this.textStrokeState_=null;const n=e.getFont(),o=e.getOffsetX(),a=e.getOffsetY(),s=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:n!==void 0?n:uw,textAlign:h!==void 0?h:lu,textBaseline:d!==void 0?d:Lh},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,f,g)=>p+(g%2?" ":f),""):c:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=s!==void 0&&s,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""}}const er=.5;function x2(t,e,i,r,n,o,a,s,l){const u=l?sv(n):n,c=Vt(t[0]*er,t[1]*er);c.imageSmoothingEnabled=!1;const h=c.canvas,d=new b2(c,er,n,null,a,s,l?qu(null,l):null),p=i.length,f=Math.floor(16777215/p),g={};for(let v=1;v<=p;++v){const b=i[v-1],m=b.getStyleFunction()||r;if(!m)continue;let y=m(b,o);if(!y)continue;Array.isArray(y)||(y=[y]);const x=(v*f).toString(16).padStart(7,"#00000");for(let C=0,k=y.length;C<k;++C){const L=y[C],A=L.getGeometryFunction()(b);if(!A||!Qt(u,A.getExtent()))continue;const E=L.clone(),I=E.getFill();I&&I.setColor(x);const T=E.getStroke();T&&(T.setColor(x),T.setLineDash(null)),E.setText(void 0);const R=L.getImage();if(R){const F=R.getImageSize();if(!F)continue;const j=Vt(F[0],F[1],void 0,{alpha:!1}),V=j.canvas;j.fillStyle=x,j.fillRect(0,0,V.width,V.height),E.setImage(new Es({img:V,anchor:R.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}const M=E.getZIndex()||0;let q=g[M];q||(q={},g[M]=q,q.Polygon=[],q.Circle=[],q.LineString=[],q.Point=[]);const P=A.getType();if(P==="GeometryCollection"){const F=A.getGeometriesArrayRecursive();for(let j=0,V=F.length;j<V;++j){const O=F[j];q[O.getType().replace("Multi","")].push(O,E)}}else q[P.replace("Multi","")].push(A,E)}}const _=Object.keys(g).map(Number).sort(Xr);for(let v=0,b=_.length;v<b;++v){const m=g[_[v]];for(const y in m){const x=m[y];for(let C=0,k=x.length;C<k;C+=2){d.setStyle(x[C+1]);for(let L=0,A=e.length;L<A;++L)d.setTransform(e[L]),d.drawGeometry(x[C])}}}return c.getImageData(0,0,h.width,h.height)}function w2(t,e,i){const r=[];if(i){const n=Math.floor(Math.round(t[0])*er),o=Math.floor(Math.round(t[1])*er),a=4*(Nt(n,0,i.width-1)+Nt(o,0,i.height-1)*i.width),s=i.data[a],l=i.data[a+1],u=i.data[a+2]+256*(l+256*s),c=Math.floor(16777215/e.length);u&&u%c==0&&r.push(e[u/c-1])}return r}const S2={Point:function(t,e,i,r,n,o){const a=i.getImage(),s=i.getText(),l=s&&s.getText(),u=o&&a&&l?{}:void 0;if(a){if(a.getImageState()!=zt)return;const c=t.getBuilder(i.getZIndex(),"Image");c.setImageStyle(a,u),c.drawPoint(e,r,n)}if(l){const c=t.getBuilder(i.getZIndex(),"Text");c.setTextStyle(s,u),c.drawText(e,r,n)}},LineString:function(t,e,i,r,n){const o=i.getStroke();if(o){const s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(e,r,n)}const a=i.getText();if(a&&a.getText()){const s=t.getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,r,n)}},Polygon:function(t,e,i,r,n){const o=i.getFill(),a=i.getStroke();if(o||a){const l=t.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawPolygon(e,r,n)}const s=i.getText();if(s&&s.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s),l.drawText(e,r,n)}},MultiPoint:function(t,e,i,r,n,o){const a=i.getImage(),s=a&&a.getOpacity()!==0,l=i.getText(),u=l&&l.getText(),c=o&&s&&u?{}:void 0;if(s){if(a.getImageState()!=zt)return;const h=t.getBuilder(i.getZIndex(),"Image");h.setImageStyle(a,c),h.drawMultiPoint(e,r,n)}if(u){const h=t.getBuilder(i.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,r,n)}},MultiLineString:function(t,e,i,r,n){const o=i.getStroke();if(o){const s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,r,n)}const a=i.getText();if(a&&a.getText()){const s=t.getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,r,n)}},MultiPolygon:function(t,e,i,r,n){const o=i.getFill(),a=i.getStroke();if(a||o){const l=t.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawMultiPolygon(e,r,n)}const s=i.getText();if(s&&s.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s),l.drawText(e,r,n)}},GeometryCollection:function(t,e,i,r,n,o){const a=e.getGeometriesArray();let s,l;for(s=0,l=a.length;s<l;++s)(0,S2[a[s].getType()])(t,a[s],i,r,n,o)},Circle:function(t,e,i,r,n){const o=i.getFill(),a=i.getStroke();if(o||a){const l=t.getBuilder(i.getZIndex(),"Circle");l.setFillStrokeStyle(o,a),l.drawCircle(e,r,n)}const s=i.getText();if(s&&s.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s),l.drawText(e,r)}}};function _T(t,e){return parseInt(Xe(t),10)-parseInt(Xe(e),10)}function im(t,e){const i=C2(t,e);return i*i}function C2(t,e){return .5*t/e}function $h(t,e,i,r,n,o,a,s){const l=[],u=i.getImage();if(u){let d=!0;const p=u.getImageState();p==zt||p==qr?d=!1:p==Yi&&u.load(),d&&l.push(u.ready())}const c=i.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>n(null)),function(d,p,f,g,_,v,b){const m=f.getGeometryFunction()(p);if(!m)return;const y=m.simplifyTransformed(g,_);f.getRenderer()?M2(d,y,f,p,b):(0,S2[y.getType()])(d,y,f,p,b,v)}(t,e,i,r,o,a,s),h}function M2(t,e,i,r,n){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,s=o.length;a<s;++a)M2(t,o[a],i,r,n);return}t.getBuilder(i.getZIndex(),"Default").drawCustom(e,r,i.getRenderer(),i.getHitDetectionRenderer(),n)}class bT extends Fv{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,i,r){const n=i.extent,o=i.viewState,a=o.center,s=o.resolution,l=o.projection,u=o.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),p=i.pixelRatio,f=i.viewHints,g=!(f[Ji]||f[Rr]),_=this.context,v=Math.round(tt(n)/s*p),b=Math.round($t(n)/s*p),m=h.getWrapX()&&l.canWrapX(),y=m?tt(c):null,x=m?Math.ceil((n[2]-c[2])/y)+1:1;let C=m?Math.floor((n[0]-c[0])/y):0;do{let k=this.getRenderTransform(a,s,0,p,v,b,C*y);i.declutter&&(k=k.slice(0)),e.execute(_,[_.canvas.width,_.canvas.height],k,u,g,r===void 0?Qa:r?Nh:yT,r?d&&i.declutter[d]:void 0)}while(++C<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Vt(this.context.canvas.width,this.context.canvas.height,Ky))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,au(this.context),Ky.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,i){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const n=e.viewState;this.prepareContainer(e,i);const o=this.context,a=this.replayGroup_;let s=a&&!a.isEmpty();if(!s&&!(this.getLayer().hasListener(Bf)||this.getLayer().hasListener(jf)))return null;if(this.setDrawContext_(),this.preRender(o,e),n.projection,this.clipped_=!1,s&&r.extent&&this.clipping){const l=Wr(r.extent);s=Qt(l,e.extent),this.clipped_=s&&!Lr(l,e.extent),this.clipped_&&this.clipUnrotated(o,e,l)}return s&&this.renderWorlds(a,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(i=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),n=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=r[0]*er,d=r[1]*er;c.push(this.getRenderTransform(n,o,a,er,h,d,0).slice());const p=u.getSource(),f=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!Lr(f,l)){let g=l[0];const _=tt(f);let v,b=0;for(;g<f[0];)--b,v=_*b,c.push(this.getRenderTransform(n,o,a,er,h,d,v).slice()),g+=_;for(b=0,g=l[2];g>f[2];)++b,v=_*b,c.push(this.getRenderTransform(n,o,a,er,h,d,v).slice()),g-=_}this.hitDetectionImageData_=x2(r,c,this.renderedFeatures_,u.getStyleFunction(),l,o,a,im(o,this.renderedPixelRatio_),null)}i(w2(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,i,r,n,o){if(!this.replayGroup_)return;const a=i.viewState.resolution,s=i.viewState.rotation,l=this.getLayer(),u={},c=function(f,g,_){const v=Xe(f),b=u[v];if(b){if(b!==!0&&_<b.distanceSq){if(_===0)return u[v]=!0,o.splice(o.lastIndexOf(b),1),n(f,l,g);b.geometry=g,b.distanceSq=_}}else{if(_===0)return u[v]=!0,n(f,l,g);o.push(u[v]={feature:f,layer:l,geometry:g,distanceSq:_,callback:n})}};let h;const d=[this.replayGroup_],p=this.getLayer().getDeclutter();return d.some(f=>h=f.forEachFeatureAtCoordinate(e,a,s,r,c,p&&i.declutter[p]?i.declutter[p].all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const i=this.getLayer(),r=i.getSource();if(!r)return!1;const n=e.viewHints[Ji],o=e.viewHints[Rr],a=i.getUpdateWhileAnimating(),s=i.getUpdateWhileInteracting();if(this.ready&&!a&&n||!s&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,p=i.getRevision(),f=i.getRenderBuffer();let g=i.getRenderOrder();g===void 0&&(g=_T);const _=u.center.slice(),v=oo(l,f*h),b=v.slice(),m=[v.slice()],y=c.getExtent();if(r.getWrapX()&&c.canWrapX()&&!Lr(y,e.extent)){const R=tt(y),M=Math.max(tt(v)/2,R);v[0]=y[0]-M,v[2]=y[2]+M,iv(_,c);const q=xx(m[0],c);q[0]<y[0]&&q[2]<y[2]?m.push([q[0]+R,q[1],q[2]+R,q[3]]):q[0]>y[0]&&q[2]>y[2]&&m.push([q[0]-R,q[1],q[2]-R,q[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!e.declutter&&Lr(this.wrappedRenderedExtent_,v))return yo(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new y2(C2(h,d),v,h,d);for(let R=0,M=m.length;R<M;++R)r.loadFeatures(m[R],h,c);const C=im(h,d);let k=!0;const L=(R,M)=>{let q;const P=R.getStyleFunction()||i.getStyleFunction();if(P&&(q=P(R,h)),q){const F=this.renderFeature(R,C,q,x,void 0,this.getLayer().getDeclutter(),M);k=k&&!F}},A=sv(v),E=r.getFeaturesInExtent(A);g&&E.sort(g);for(let R=0,M=E.length;R<M;++R)L(E[R],R);this.renderedFeatures_=E,this.ready=k;const I=x.finish(),T=new _2(v,h,d,r.getOverlaps(),I,i.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=b,this.wrappedRenderedExtent_=v,this.renderedCenter_=_,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=T,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,i,r,n,o,a,s){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,c=r.length;u<c;++u)l=$h(n,e,r[u],i,this.boundHandleStyleImageChange_,o,a,s)||l;else l=$h(n,e,r,i,this.boundHandleStyleImageChange_,o,a,s);return l}}var _a=class extends Lv{constructor(t){super(t)}createRenderer(){return new bT(this)}},xT=class extends ya{constructor(t){t=t||{};var e=document.createElement("div");super({element:e,target:t.target});var i=this;if(this.minZoom=t.minZoom||0,this.maxZoom=t.maxZoom||18,this.rotation=t.rotation,t.target)this.panel_=t.target;else{e.classList.add("ol-overview","ol-unselectable","ol-control","ol-collapsed"),/top/.test(t.align)&&e.classList.add("ol-control-top"),/right/.test(t.align)&&e.classList.add("ol-control-right");var r=document.createElement("button");r.setAttribute("type","button"),r.addEventListener("touchstart",function(o){i.toggleMap(),o.preventDefault()}),r.addEventListener("click",function(){i.toggleMap()}),e.appendChild(r),this.panel_=document.createElement("div"),this.panel_.classList.add("panel"),e.appendChild(this.panel_)}this.ovmap_=new Ns({controls:new ar,interactions:new ar,target:this.panel_,view:new Ki({zoom:2,center:[0,0],projection:t.projection}),layers:t.layers}),this.oview_=this.ovmap_.getView(),this.extentLayer=new _a({name:"Cache extent",source:new so,style:t.style||[new qt({image:new zr({fill:new ei({color:"rgba(255,0,0, 1)"}),stroke:new Wt({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new Wt({width:5,color:"rgba(255,0,0,0.8)"})})]}),this.ovmap_.addLayer(this.extentLayer);var n=function(o,a){var s=3*o*Math.PI/2,l=-1/a,u=Math.cos(s)*Math.pow(2,l);return function(c){return c=1-Math.cos(c*Math.PI/2),1-Math.cos(s*c)*Math.pow(2,l*c)+u*c}};this.ovmap_.addInteraction(new bo({handleDownEvent:function(o){return t.panAnimation!==!1?t.panAnimation=="elastic"||t.elasticPan?i.getMap().getView().animate({center:o.coordinate,easing:n(2,.3),duration:1e3}):i.getMap().getView().animate({center:o.coordinate,duration:300}):i.getMap().getView().setCenter(o.coordinate),!1}}))}getOverviewMap(){return this.ovmap_}toggleMap(){this.element.classList.toggle("ol-collapsed"),this.ovmap_.updateSize(),this.setView()}setPosition(t){/top/.test(t)?this.element.classList.add("ol-control-top"):this.element.classList.remove("ol-control-top"),/right/.test(t)?this.element.classList.add("ol-control-right"):this.element.classList.remove("ol-control-right")}setMap(t){if(this._listener)for(let e in this._listener)Ur(this._listener[e]);this._listener={},super.setMap(t),t&&(this._listener.map=t.on("change:view",function(){this._listener.view&&Ur(this._listener.view),t.getView()&&(this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())}.bind(this)),this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())}calcExtent_(t){var e=this.getMap();if(e){var i=this.extentLayer.getSource();i.clear();var r=new kr,n=e.getSize(),o=e.getView().getResolution(),a=e.getView().getRotation(),s=e.getView().getCenter();if(o){var l=o*n[0]/2,u=o*n[1]/2,c=this.oview_.getResolution();if(l/c>5||u/c>5){var h,d,p,f=Math.cos(a),g=Math.sin(a);for(t=[[-l,-u],[-l,u],[l,u],[l,-u]],h=0;h<4;++h)d=t[h][0],p=t[h][1],t[h][0]=s[0]+d*f-p*g,t[h][1]=s[1]+d*g+p*f;r.setGeometry(new Wi([t]))}else r.setGeometry(new hr(s));i.addFeature(r)}}}setView(t){if(!t)return this.setView({key:"rotation"}),this.setView({key:"resolution"}),void this.setView({key:"center"});switch(t.key){case"rotation":this.rotation?this.oview_.setRotation(this.getMap().getView().getRotation()):this.oview_.getRotation()&&this.oview_.setRotation(0);break;case"center":var e=this.getMap().getView().calculateExtent(this.getMap().getSize()),i=this.oview_.calculateExtent(this.ovmap_.getSize());(e[0]<i[0]||e[1]<i[1]||e[2]>i[2]||e[3]>i[3])&&this.oview_.setCenter(this.getMap().getView().getCenter());break;case"resolution":var r=2*Math.round(this.oview_.getZoomForResolution(this.getMap().getView().getResolution())/2)-4;r=Math.min(this.maxZoom,Math.max(this.minZoom,r)),this.oview_.setZoom(r)}this.calcExtent_()}},wT=class extends ya{constructor(t){(t=t||{}).typing===void 0&&(t.typing=300);var e=document.createElement("DIV"),i=(t.className||"")+" ol-scale";t.target||(i+=" ol-unselectable ol-control"),super({element:e,target:t.target}),this._input=document.createElement("INPUT"),this._input.value="-",e.setAttribute("class",i),t.editable===!1&&(this._input.readOnly=!0),e.appendChild(this._input),this._input.addEventListener("change",this.setScale.bind(this)),this.set("ppi",t.ppi||96)}setMap(t){this._listener&&Ur(this._listener),this._listener=null,super.setMap(t),t&&(this._listener=t.on("moveend",this.getScale.bind(this)))}getScale(){var t=this.getMap();if(t){var e=function(i,r){var n=i.getView(),o=n.getProjection(),a=n.getCenter(),s=i.getPixelFromCoordinate(a);s[1]+=1;var l=i.getCoordinateFromPixel(s),u=Jl(Kn(a,o,"EPSG:4326"),Kn(l,o,"EPSG:4326"));return u*((r||96)/.0254)}(t,this.get("ppi"));return this._input.value=this.formatScale(e),e}}formatScale(t){return"1 / "+(t=t>100?100*Math.round(t/100):Math.round(t)).toLocaleString()}setScale(t){var e=this.getMap();e&&t&&(t.target&&(t=t.target.value),function(i,r,n){if(i&&r){var o=r;if(typeof r=="string"&&((o=(r=r.replace(":","/").split("/"))[1])||(o=r[0]||""),o=o.replace(/[^\d]/g,""),o=parseInt(o),r[1])){var a=parseInt(r[0]);a&&(o/=a)}if(!o)return;var s=i.getView(),l=s.getProjection(),u=s.getCenter(),c=i.getPixelFromCoordinate(u);c[1]+=1;var h=i.getCoordinateFromPixel(c),d=Jl(Kn(u,l,"EPSG:4326"),Kn(h,l,"EPSG:4326"));d*=(n||96)/.0254,s.setResolution(s.getResolution()*o/d)}}(e,t,this.get("ppi"))),this.getScale()}};function ST(t){const e=t.frameState,i=Mh(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new b2(t.context,e.pixelRatio,e.extent,i,e.viewState.rotation)}var CT=class extends ya{constructor(t){super(t=t||{}),this.setStyle(t.style)}setMap(t){this.getCanvas(t);var e=this.getMap();if(this._listener&&(Ur(this._listener),this._listener=null),super.setMap(t),e)try{e.renderSync()}catch{}t&&(this._listener=t.on("postcompose",this._draw.bind(this)))}getCanvas(t){return function(e){if(!e)return null;var i=e.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return i||(e.getViewport().querySelector(".ol-layers")?((i=document.createElement("canvas")).className="ol-fixedoverlay",e.getViewport().querySelector(".ol-layers").after(i),e.on("precompose",function(r){i.width=e.getSize()[0]*r.frameState.pixelRatio,i.height=e.getSize()[1]*r.frameState.pixelRatio})):i=e.getViewport().querySelector("canvas")),i}(t)}getContext(t){var e=t.context;if(!e&&this.getMap()){var i=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];e=i?i.getContext("2d"):null}return e}setStyle(t){this._style=t||new qt({})}getStyle(){return this._style}getStroke(){return this._style.getStroke()||this._style.setStroke(new Wt({color:"#000",width:1.25})),this._style.getStroke()}getFill(){return this._style.getFill()||this._style.setFill(new ei({color:"#fff"})),this._style.getFill()}getTextStroke(){var t=this._style.getText();return t||(t=new Zo({})),t.getStroke()||t.setStroke(new Wt({color:"#fff",width:3})),t.getStroke()}getTextFill(){var t=this._style.getText();return t||(t=new Zo({})),t.getFill()||t.setFill(new ei({color:"#fff"})),t.getFill()}getTextFont(){var t=this._style.getText();return t||(t=new Zo({})),t.getFont()||t.setFont("12px sans-serif"),t.getFont()}_draw(){}},MT=class extends CT{constructor(t){var e=(t=t||{}).style||[new qt({image:new fo({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new Wt({color:"#fff",width:3})})}),new qt({image:new fo({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new Wt({color:"#000",width:1})})})];e instanceof Array||(e=[e]);var i=document.createElement("div");i.className="ol-target ol-unselectable ol-control",super({element:i,style:e,target:t.target}),this.composite=t.composite||"",this.setVisible(t.visible!==!1)}setStyle(t){t instanceof Array||(t=[t]),super.setStyle(t)}setVisible(t){if(this.set("visible",t),this.getMap())try{this.getMap().renderSync()}catch{}}getVisible(){return this.get("visible")}_draw(t){var e=this.getContext(t);if(e&&this.getMap()&&this.getVisible()){var i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var r=e.canvas.width/2/i,n=e.canvas.height/2/i,o=new hr(this.getMap().getCoordinateFromPixel([r,n]));this.composite&&(e.globalCompositeOperation=this.composite);for(var a=0;a<this._style.length;a++){var s=this._style[a];if(s instanceof qt){var l=t.vectorContext;l||(l=ST({inversePixelTransform:[1,0,0,1,0,0],context:e,frameState:{pixelRatio:i,extent:t.frameState.extent,coordinateToPixelTransform:t.frameState.coordinateToPixelTransform,viewState:t.frameState.viewState}})),l.setStyle(s),l.drawGeometry(o)}}e.restore()}}},kT=class extends bo{constructor(t){super({handleDownEvent:function(e){return this._setPosition(e)},handleMoveEvent:function(e){return this._setPosition(e)}}),this.layers_=[],this.precomposeBind_=this.precompose_.bind(this),this.postcomposeBind_=this.postcompose_.bind(this),t=t||{},this.pos=!1,this.radius=t.radius||100,t.layers&&this.addLayer(t.layers),this.setActive(!0)}setMap(t){var e;if(this.getMap()){for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}if(super.setMap(t),t){for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);try{t.renderSync()}catch{}}}setRadius(t){if(this.radius=t,this.getMap())try{this.getMap().renderSync()}catch{}}getRadius(){return this.radius}addLayer(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){if(this.getMap()){t[e].on(["precompose","prerender"],this.precomposeBind_),t[e].on(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}this.layers_.push(t[e])}}removeLayers(){this.removeLayer(this.layers_)}removeLayer(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var i;for(i=0;i<this.layers_.length&&this.layers_[i]!==t[e];i++);i!=this.layers_.length&&this.getMap()&&(this.layers_[i].un(["precompose","prerender"],this.precomposeBind_),this.layers_[i].un(["postcompose","postrender"],this.postcomposeBind_),this.layers_.splice(i,1))}if(this.getMap())try{this.getMap().renderSync()}catch{}}setPosition(t){if(this.getMap()){this.pos=this.getMap().getPixelFromCoordinate(t);try{this.getMap().renderSync()}catch{}}}getPosition(){return this.pos?this.getMap().getCoordinateFromPixel(this.pos):null}setPixelPosition(t){if(this.pos=t,this.getMap())try{this.getMap().renderSync()}catch{}}getPixelPosition(){return this.pos}_setPosition(t){if((t.type!=="pointermove"||this.get("action")!=="onclick")&&(t.pixel&&(this.pos=t.pixel),this.getMap()))try{this.getMap().renderSync()}catch{}}precompose_(t){if(this.getActive()){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.beginPath();var r=[this.pos[0],this.pos[1]],n=this.radius,o=t.inversePixelTransform;o?n=(r=[r[0]*o[0]-r[1]*o[1]+o[4],-r[0]*o[2]+r[1]*o[3]+o[5]])[0]-((this.pos[0]-n)*o[0]-this.pos[1]*o[1]+o[4]):(r[0]*=i,r[1]*=i,n*=i),e.arc(r[0],r[1],n,0,2*Math.PI),e.clip()}}postcompose_(t){this.getActive()&&t.context.restore()}setActive(t){if(t!==this.getActive()&&(super.setActive(t),this.layers_)){var e;if(t)for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);else for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);if(this.getMap())try{this.getMap().renderSync()}catch{}}}};const kp="element",Tp="map",Ep="offset",hc="position",Lp="positioning";class rm extends yr{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst===void 0||e.insertFirst,this.stopEvent=e.stopEvent===void 0||e.stopEvent,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(kp,this.handleElementChanged),this.addChangeListener(Tp,this.handleMapChanged),this.addChangeListener(Ep,this.handleOffsetChanged),this.addChangeListener(hc,this.handlePositionChanged),this.addChangeListener(Lp,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(kp)}getId(){return this.id}getMap(){return this.get(Tp)||null}getOffset(){return this.get(Ep)}getPosition(){return this.get(hc)}getPositioning(){return this.get(Lp)}handleElementChanged(){ow(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),It(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=pt(e,Iv,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(kp,e)}setMap(e){this.set(Tp,e)}setOffset(e){this.set(Ep,e)}setPosition(e){this.set(hc,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const i=this.getMap();if(!i||!i.getTargetElement()||!this.get(hc))return;const r=this.getRect(i.getTargetElement(),i.getSize()),n=this.getElement(),o=this.getRect(n,[S5(n),C5(n)]),a=(e=e||{}).margin===void 0?20:e.margin;if(!Lr(r,o)){const s=o[0]-r[0],l=r[2]-o[2],u=o[1]-r[1],c=r[3]-o[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),u<0?h[1]=u-a:c<0&&(h[1]=Math.abs(c)+a),h[0]!==0||h[1]!==0){const d=i.getView().getCenterInternal(),p=i.getPixelFromCoordinateInternal(d);if(!p)return;const f=[p[0]+h[0],p[1]+h[1]],g=e.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}getRect(e,i){const r=e.getBoundingClientRect(),n=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[n,o,n+i[0],o+i[1]]}setPositioning(e){this.set(Lp,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),i=this.getPosition();if(!e||!e.isRendered()||!i)return void this.setVisible(!1);const r=e.getPixelFromCoordinate(i),n=e.getSize();this.updateRenderedPosition(r,n)}updateRenderedPosition(e,i){const r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let a="0%",s="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?a="-100%":o!="bottom-center"&&o!="center-center"&&o!="top-center"||(a="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?s="-100%":o!="center-left"&&o!="center-center"&&o!="center-right"||(s="-50%");const l=`translate(${a}, ${s}) translate(${Math.round(e[0]+n[0])+"px"}, ${Math.round(e[1]+n[1])+"px"})`;this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l)}getOptions(){return this.options}}const Ip="units",TT=[1,2,5],ul=25.4/.28;var ET=class extends ya{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Au,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Ip,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Ip)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Ip,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,r=this.getUnits(),n=r=="degrees"?"degrees":"m";let o=tu(i,t.resolution,e,n);const a=this.minWidth_*(this.dpi_||ul)/ul,s=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||ul)/ul:void 0;let l=a*o,u="";if(r=="degrees"){const b=kn.degrees;l*=b,l<b/60?(u="″",o*=3600):l<b?(u="′",o*=60):u="°"}else if(r=="imperial")l<.9144?(u="in",o/=.0254):l<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")l<1e-6?(u="nm",o*=1e9):l<.001?(u="μm",o*=1e6):l<1?(u="mm",o*=1e3):l<1e3?u="m":(u="km",o/=1e3);else{if(r!="us")throw new Error("Invalid units");l<.9144?(u="in",o*=39.37):l<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472)}let c,h,d,p,f,g,_=3*Math.floor(Math.log(a*o)/Math.log(10));for(;;){d=Math.floor(_/3);const b=Math.pow(10,d);if(c=TT[(_%3+3)%3]*b,h=Math.round(c/o),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(s!==void 0&&h>=s){c=p,h=f,d=g;break}if(h>=a)break;p=c,f=h,g=d,++_}const v=this.scaleBar_?this.createScaleBar(h,c,u):c.toFixed(d<0?-d:0)+" "+u;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const r=this.getScaleForResolution(),n=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=t/o,s=[this.createMarker("absolute")];for(let l=0;l<o;++l){const u=l%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";s.push(`<div><div class="ol-scale-singlebar ${u}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(l%2==0||o===2?this.createStepText(l,t,!1,e,i):"")+"</div>")}return s.push(this.createStepText(o,t,!0,e,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+n+"</div>":"")+s.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,e,i,r,n){const o=(t===0?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+n);return`<div class="ol-scale-step-text" style="margin-left: ${t===0?-3:e/this.scaleBarSteps_*-1}px;text-align: ${t===0?"left":"center"};min-width: ${t===0?0:e/this.scaleBarSteps_*2}px;left: ${i?e+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){return tu(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||ul)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}};const S1="drawstart",LT="drawend",IT="drawabort";class dc extends vr{constructor(e,i){super(e),this.feature=i}}function pc(t,e){return wn(t[0],t[1],e[0],e[1])}function Ja(t,e){const i=t.length;return e<0?t[e+i]:e>=i?t[e-i]:t[e]}function fc(t,e,i){let r,n;e<i?(r=e,n=i):(r=i,n=e);const o=Math.ceil(r),a=Math.floor(n);if(o>a)return pc(es(t,r),es(t,n));let s=0;r<o&&(s+=pc(es(t,r),Ja(t,o))),a<n&&(s+=pc(Ja(t,a),es(t,n)));for(let l=o;l<a-1;++l)s+=pc(Ja(t,l),Ja(t,l+1));return s}function k2(t,e,i){if(e instanceof ir)gc(t,e.getCoordinates(),!1,i);else if(e instanceof la){const r=e.getCoordinates();for(let n=0,o=r.length;n<o;++n)gc(t,r[n],!1,i)}else if(e instanceof Wi){const r=e.getCoordinates();for(let n=0,o=r.length;n<o;++n)gc(t,r[n],!0,i)}else if(e instanceof ua){const r=e.getCoordinates();for(let n=0,o=r.length;n<o;++n){const a=r[n];for(let s=0,l=a.length;s<l;++s)gc(t,a[s],!0,i)}}else if(e instanceof uu){const r=e.getGeometries();for(let n=0;n<r.length;++n)k2(t,r[n],i)}}const Pp={index:-1,endIndex:NaN};function gc(t,e,i,r){const n=t[0],o=t[1];for(let a=0,s=e.length-1;a<s;++a){const l=T2(n,o,e[a],e[a+1]);if(l.squaredDistance===0){const u=a+l.along;return void r.push({coordinates:e,ring:i,startIndex:u,endIndex:u})}}}const Rp={along:0,squaredDistance:0};function T2(t,e,i,r){const n=i[0],o=i[1],a=r[0]-n,s=r[1]-o;let l=0,u=n,c=o;return a===0&&s===0||(l=Nt(((t-n)*a+(e-o)*s)/(a*a+s*s),0,1),u+=a*l,c+=s*l),Rp.along=l,Rp.squaredDistance=Pu(wn(t,e,u,c),10),Rp}function es(t,e){const i=t.length;let r=Math.floor(e);const n=e-r;r>=i?r-=i:r<0&&(r+=i);let o=r+1;o>=i&&(o-=i);const a=t[r],s=a[0],l=a[1],u=t[o];return[s+(u[0]-s)*n,l+(u[1]-l)*n]}function PT(){const t=function(){const e={},i=[255,255,255,1],r=[0,153,255,1];return e.Polygon=[new qt({fill:new ei({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new qt({stroke:new Wt({color:i,width:5})}),new qt({stroke:new Wt({color:r,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new qt({image:new zr({radius:6,fill:new ei({color:r}),stroke:new Wt({color:i,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}();return function(e,i){return t[e.getGeometry().getType()]}}var Vh,sr,Nl=class extends bo{constructor(t){const e=t;e.stopDown||(e.stopDown=Os),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:xs,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const r=this.mode_;if(r==="Circle")i=(n,o,a)=>{const s=o||new Cd([NaN,NaN]),l=Sr(n[0]),u=wx(l,Sr(n[n.length-1]));return s.setCenterAndRadius(l,Math.sqrt(u),this.geometryLayout_),s};else{let n;r==="Point"?n=hr:r==="LineString"?n=ir:r==="Polygon"&&(n=Wi),i=(o,a,s)=>(a?r==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new n(o,this.geometryLayout_),a)}}this.geometryFunction_=i,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new _a({source:new so({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:PT(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:qv,this.freehandCondition_,t.freehand?this.freehandCondition_=Gg:this.freehandCondition_=t.freehandCondition?t.freehandCondition:Pw,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener($g,this.updateState_)}setTrace(t){let e;e=t?t===!0?Gg:t:ek,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===zf&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===Mt.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Mt.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Mt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===Mt.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===Mt.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Mt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Mt.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new _n(Mt.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=bh([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),r=this.traceSource_.getFeaturesInExtent(i);if(r.length===0)return;const n=function(o,a){const s=[];for(let l=0;l<a.length;++l)k2(o,a[l].getGeometry(),s);return s}(t.coordinate,r);n.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:n,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex;i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const r=Math.ceil(t);let n=Math.floor(e);n===e&&(n-=1),i=n-r+1}else{const r=Math.floor(t);let n=Math.ceil(e);n===e&&(n+=1),i=r-n+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const r=[];if(e<i){const n=Math.ceil(e);let o=Math.floor(i);o===i&&(o-=1);for(let a=n;a<=o;++a)r.push(Ja(t.coordinates,a))}else{const n=Math.floor(e);let o=Math.ceil(i);o===i&&(o+=1);for(let a=n;a>=o;--a)r.push(Ja(t.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&ly(e.startPx,t.pixel)<this.snapTolerance_)return;const i=function(a,s,l,u){const c=a[0],h=a[1];let d=1/0,p=-1,f=NaN;for(let v=0;v<s.targets.length;++v){const b=s.targets[v],m=b.coordinates;let y,x=1/0;for(let C=0;C<m.length-1;++C){const k=T2(c,h,m[C],m[C+1]);k.squaredDistance<x&&(x=k.squaredDistance,y=C+k.along)}x<d&&(d=x,b.ring&&s.targetIndex===v&&(b.endIndex>b.startIndex?y<b.startIndex&&(y+=m.length):b.endIndex<b.startIndex&&y>b.startIndex&&(y-=m.length)),f=y,p=v)}const g=s.targets[p];let _=g.ring;if(s.targetIndex===p&&_){const v=es(g.coordinates,f);ly(l.getPixelFromCoordinate(v),s.startPx)>u&&(_=!1)}if(_){const v=g.coordinates,b=v.length,m=g.startIndex,y=f;if(m<y){const x=fc(v,m,y);fc(v,m,y-b)<x&&(f-=b)}else{const x=fc(v,m,y);fc(v,m,y+b)<x&&(f+=b)}}return Pp.index=p,Pp.endIndex=f,Pp}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(e.targetIndex!==-1){const s=e.targets[e.targetIndex];this.removeTracedCoordinates_(s.startIndex,s.endIndex)}const a=e.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}e.targetIndex=i.index;const r=e.targets[e.targetIndex];r.endIndex=i.endIndex;const n=es(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(n);t.coordinate=n,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(t.coordinate),!r&&this.freehand_?this.finishDrawing():this.freehand_||r&&this.mode_!=="Point"||(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,r=e[0]-i[0],n=e[1]-i[1],o=r*r+n*n;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let r=!1,n=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")r=!e&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,n=[a[0][0],a[0][a[0].length-2]],n=e?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let s=0,l=n.length;s<l;s++){const u=n[s],c=a.getPixelFromCoordinate(u),h=t[0]-c[0],d=t[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(h*h+d*d)<=p,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new kr(new hr(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new kr);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new ir(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=kh(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new kr(new ir(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new kr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new dc(S1,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),r=e.getView().getProjection(),n=kh(this.geometryLayout_);let o,a;for(;t.length<n;)t.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=t[0],a[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,n;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=t.slice(),n=this.sketchCoords_,n.length>=this.maxPoints_&&(this.freehand_?n.pop():r=!0),n.push(t.slice()),this.geometryFunction_(n,e,i)):o==="Polygon"&&(n=this.sketchCoords_[0],n.length>=this.maxPoints_&&(this.freehand_?n.pop():r=!0),n.push(t.slice()),r&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),r?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let n=0;n<t;++n){let o;if(r==="LineString"||r==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,e,i),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(r==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const s=o[o.length-2].slice();o[o.length-1]=s,this.createOrUpdateSketchPoint_(s)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const i=t.getGeometry(),r=this.getMap().getView().getProjection();return this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,i,r)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,i,r),e=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new Hs([e])):this.type_==="MultiLineString"?t.setGeometry(new la([e])):this.type_==="MultiPolygon"&&t.setGeometry(new ua([e])),this.dispatchEvent(new dc(LT,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new dc(IT,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let r;if(i&&this.startDrawing_(t[0]),e==="LineString"||e==="Circle")r=this.sketchCoords_;else{if(e!=="Polygon")return;r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&r.shift(),r.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);const n=t[t.length-1];this.sketchFeature_=this.addToDrawing_(n),this.modifyDrawing_(n)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new kr(new hr(i)),this.updateSketchFeatures_(),this.dispatchEvent(new dc(S1,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}};(function(t){t.Point="Point",t.LineString="LineString",t.LinearRing="LinearRing",t.Polygon="Polygon",t.MultiPoint="MultiPoint",t.MultiLineString="MultiLineString",t.MultiPolygon="MultiPolygon",t.GeometryCollection="GeometryCollection",t.Circle="Circle",t.Hand="Hand"})(Vh||(Vh={}));class RT{xmap;drawLayer;draw;drawStyle;constructor(e){if(this.xmap=e,e&&!this.drawLayer){const i=new so,r=new qt({fill:new ei({color:"rgba(0, 0, 255, 0.1)"}),stroke:new Wt({color:"#0000ff",width:2}),image:new zr({radius:7,fill:new ei({color:"#00f"})})});this.drawLayer=new _a({source:i,style:r}),e.map?.addLayer(this.drawLayer)}}setDrawVectorIndex=e=>{this.drawLayer.setZIndex(e)};setDrawLayer(e){if(e){const i=e;if(i)this.drawLayer=i;else{const r=e;this.xmap&&(this.drawLayer=this.xmap.map?.getLayers().item[r])}}}get DrawSource(){return this.drawLayer.getSource()}changeDrawType(e,i=void 0){this.clearInteraction(),i&&(this.drawStyle=i),this.drawStyle||(this.drawStyle=new qt({fill:new ei({color:"rgba(0, 255, 255, 0.5)"}),stroke:new Wt({color:"#ff0000",width:2}),image:new zr({radius:7,fill:new ei({color:"#f00"})})})),this.draw=new Nl({source:this.DrawSource,type:e===Vh.Hand?"LineString":e.toString(),style:this.drawStyle,freehand:e===Vh.Hand,snapTolerance:50}),this.xmap.map?.addInteraction(this.draw)}clearInteraction(){const e=this.xmap.map;e&&this.draw&&(e.removeInteraction(this.draw),e.getInteractions().getArray()?.forEach(i=>{i instanceof Nl&&e.removeInteraction(i)}))}clearLastDraw(){this.draw&&(()=>{const e=this.DrawSource.getFeatures();e.length!==0&&this.DrawSource.removeFeature(e[e.length-1])})()}clearboard(){this.draw&&this.DrawSource.clear()}}class C1{map;sketch;helpTooltipElement;helpTooltip;measureTooltipElement;measureTooltip;continuePolygonMsg="继续点击绘制多边形";continueLineMsg="继续点击绘制线";draw;source;measureLayer;doubleClickZoom;isInited=!1;tooltipArray=[];sphereOptions;constructor(e){this.map=e,this.init()}init(){const e=this.map.getView();this.sphereOptions={projection:e.getProjection()},this.createHelpTooltip(),this.createMeasureTooltip(),this.doubleClickZoom=this.map.getInteractions().getArray().find(i=>i instanceof Ew),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().addEventListener("mouseout",this.mouseoutHandler.bind(this)),this.source=new so,this.measureLayer=new _a({source:this.source,style:new qt({fill:new ei({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Wt({color:"#ffcc33",width:2}),image:new zr({radius:7,fill:new ei({color:"#ffcc33"})})})}),this.measureLayer.set("name","measurelayer"),this.map.addLayer(this.measureLayer),this.isInited=!0}mouseoutHandler(){this.helpTooltipElement.classList.add("hidden")}createHelpTooltip(){this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="myol-tooltip hidden",this.helpTooltip=new rm({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),this.map.addOverlay(this.helpTooltip),this.tooltipArray.push(this.helpTooltipElement)}createMeasureTooltip(){this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="myol-tooltip myol-tooltip-measure",this.measureTooltip=new rm({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.measureTooltip),this.tooltipArray.push(this.measureTooltipElement)}listener;formatLength(e){let i,r=Cx(e,this.sphereOptions);return i=r>100?Math.round(r/1e3*100)/100+" km":Math.round(100*r)/100+" m",i}formatArea(e){let i,r=Mx(e,this.sphereOptions);return i=r>1e4?Math.round(r/1e6*100)/100+" km<sup>2</sup>":Math.round(100*r)/100+" m<sup>2</sup>",i}geometryChanged(e){let i,r=e.target,n="";r instanceof Wi?(n=this.formatArea(r),i=r.getInteriorPoint().getCoordinates()):r instanceof ir&&(n=this.formatLength(r),i=r.getLastCoordinate()),this.measureTooltipElement&&(this.measureTooltipElement.innerHTML=n),this.measureTooltip.setPosition(i)}pointerMoveHandler(e){if(e.dragging)return;let i="请点击开始绘制";if(this.sketch){let r=this.sketch.getGeometry();r instanceof Wi?i=this.continuePolygonMsg:r instanceof ir&&(i=this.continueLineMsg)}this.helpTooltipElement.innerHTML=i,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}addInteraction(e="area"){this.isInited||this.init(),this.map&&this.map.getInteractions().getArray()?.forEach(r=>{r instanceof Nl&&this.map.removeInteraction(r)});const i=e=="area"?"Polygon":"LineString";this.draw=new Nl({source:this.source,type:i,style:new qt({fill:new ei({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Wt({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new zr({radius:5,stroke:new Wt({color:"rgba(0, 0, 0, 0.7)"}),fill:new ei({color:"rgba(255, 255, 255, 0.2)"})})})}),this.map.addInteraction(this.draw),this.draw.on("drawstart",this.drawStartHander.bind(this)),this.draw.on("drawend",this.drawEndHander.bind(this))}drawStartHander(e){this.sketch=e.feature,this.listener=this.sketch.getGeometry().on("change",this.geometryChanged.bind(this))}drawEndHander(){this.measureTooltipElement.className="myol-tooltip myol-tooltip-static",this.measureTooltip.setOffset([0,-7]),this.sketch=null,this.measureTooltipElement=null,this.createMeasureTooltip(),Ur(this.listener)}removeInteraction(){this.draw&&this.map.removeInteraction(this.draw),this.map.getInteractions().getArray()?.forEach(e=>{e instanceof Nl&&this.map.removeInteraction(e)}),this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.tooltipArray.forEach(e=>{e.parentNode?.removeChild(e)}),this.tooltipArray=[],this.helpTooltip&&this.map.removeOverlay(this.helpTooltip),this.measureTooltip&&this.map.removeOverlay(this.measureTooltip),this.measureLayer&&this.map.removeLayer(this.measureLayer),this.map.getLayers()?.forEach(e=>{e.get("name")==="measurelayer"&&this.map.removeLayer(e)}),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().removeEventListener("mouseout",this.mouseoutHandler.bind(this)),this.doubleClickZoom&&this.map.addInteraction(this.doubleClickZoom),this.isInited=!1}}function Dn(t,e){return ri(t.inversePixelTransform,e.slice(0))}(function(t){t[t.RollHorizonl=0]="RollHorizonl",t[t.RollVertical=1]="RollVertical",t[t.FishEye=2]="FishEye"})(sr||(sr={}));class nm{container;xmap;swipeLayer;SwipeType=sr.RollHorizonl;circleRadius=50;swipeValueX=0;swipeValueY=0;divHeight=0;divWidth=0;line=void 0;preRenderKey;postRenderKey;IsLoaded=!1;constructor(e,i){this.container=e,this.xmap=i,e&&(e.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.line=document.createElement("div"),e.insertBefore(this.line,e.firstElementChild),this.divWidth=e.clientWidth,this.divHeight=e.clientHeight)}rollSwipeLayerbak(e){const i=e.offsetX,r=e.offsetY;if(this.changeSwipe(i,r),this.line)switch(this.SwipeType){case sr.RollHorizonl:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","horizonaldivider"),this.line.setAttribute("class","horizonaldivider");const n=i;this.line.style.height=this.divHeight+"px",this.line.style.width="4px",this.line.style.left=n+"px",this.line.style.removeProperty("top");break;case sr.RollVertical:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","verticaldivider"),this.line.setAttribute("class","verticaldivider");const o=r;this.line.style.height="4px",this.line.style.removeProperty("left"),this.line.style.width=this.divWidth+"px",this.line.style.top=o+"px"}}setSwipeLayer(e){if(this.swipeLayer&&(Ur(this.postRenderKey),Ur(this.preRenderKey)),typeof e=="number"){const i=e;if(this.xmap){const r=this.xmap.map?.getLayers();this.swipeLayer=r?.getArray()[i]}}else{const i=e;this.swipeLayer=i}this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0)}preRenderHandler(e){const i=this.xmap.map?.getSize();if(i===void 0)return;const r=e.context;switch(r.save(),r.beginPath(),this.SwipeType){case sr.RollHorizonl:const n=this.swipeValueX,o=Dn(e,[n,0]),a=Dn(e,[i[0],0]),s=Dn(e,[n,i[1]]),l=Dn(e,i);r.moveTo(o[0],o[1]),r.lineTo(s[0],s[1]),r.lineTo(l[0],l[1]),r.lineTo(a[0],a[1]),r.closePath();break;case sr.RollVertical:const u=this.swipeValueY,c=Dn(e,[0,u]),h=Dn(e,[i[0],u]),d=Dn(e,[0,i[1]]),p=Dn(e,i);r.moveTo(c[0],c[1]),r.lineTo(d[0],d[1]),r.lineTo(p[0],p[1]),r.lineTo(h[0],h[1]),r.closePath();break;case sr.FishEye:const f=this.swipeValueX,g=this.swipeValueY;r.arc(f,g,this.circleRadius,0,2*Math.PI,!1),r.stroke()}r.clip()}postRenderHandler(e){e.context.restore()}changeSwipeType(e,i=50){this.SwipeType=e,e===sr.FishEye?(i>0&&(this.circleRadius=i),this.line.style.display="none"):(this.line.style.display="unset",this.line.style.removeProperty("display"))}changeSwipe(e,i){this.swipeValueX=e,this.swipeValueY=i,this.xmap&&this.xmap.map?.render()}load(){this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0),this.container&&(this.container.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.insertBefore(this.line,this.container.firstElementChild))}unload(){this.swipeLayer&&(Ur(this.postRenderKey),Ur(this.preRenderKey),this.IsLoaded=!1),this.container&&(this.container.removeEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.contains(this.line)&&this.container.removeChild(this.line))}}const qT=Object.prototype.toString;function Gv(t,e){return qT.call(t)===`[object ${e}]`}const AT=t=>t!=null&&t!==null&&Gv(t,"Object");function M1(t){return Gv(t,"Number")}function $l(t){return Gv(t,"String")}function E2(t,e){var i=e-t,r=Math.random();return t+Math.round(r*i)}function Gr(){let t=[];const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var i=0;i<36;i++){const n=Math.floor(16*Math.random());t[i]=e.substring(n,n+1)}t[14]="4";const r=3&Number(t[19])|8;return t[19]=e.substring(r,r+1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function FT(){const t=window.document;var e=document.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.webkitExitFullscreen;if(e)e.call(document);else if(typeof window.ActiveXObject<"u"){var i=new window.ActiveXObject("WScript.Shell");i!==null&&i.SendKeys("{F11}")}}function k1(t=window.document.documentElement){let e=t;var i=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(i)i.call(e);else if(typeof window.ActiveXObject<"u"){var r=new window.ActiveXObject("WScript.Shell");r!==null&&r.SendKeys("{F11}")}}function L2(){const t=new Event("resize");window.dispatchEvent(t)}function om(t={},e={}){let i;for(i in e)t[i]=AT(t[i])?om(t[i],e[i]):t[i]=e[i];return t}function OT(t,e,i){let r=document.createElement(t);return r.className=e,i&&i.appendChild(r),r}class zT{xmap;map;mapEventBus;target;swipeLayerIndex=0;MapLayers=new Map;LayerItemList=new Array;constructor(e,i){this.xmap=e;const r=e.map;r&&(this.map=r,this.mapEventBus=Bh,this.initEventListener()),this.target=i}get SwipeLayerIndex(){return this.swipeLayerIndex}get Layers(){return this.MapLayers}changeSwipeLayerByID(e){if(this.MapLayers.has(e)){const i=this.MapLayers.keys(),r=Array.from(i).findIndex(n=>n===e);r>=0&&(this.swipeLayerIndex=r)}}changeSwipeLayerIndex(e){e<this.MapLayers.size&&e>=0&&(this.swipeLayerIndex=e)}initEventListener(){this.mapEventBus.eventOn(kt.LAYER_OPACITY_CHANGED,this.layerOpacityHandler.bind(this)),this.mapEventBus.eventOn(kt.LAYER_VISIBLE_CHANGED,this.layerVisibleHandler.bind(this)),this.mapEventBus.eventOn(kt.LAYER_LOCATE,this.layerLocateHandler.bind(this)),this.mapEventBus.eventOn(kt.LAYER_ORDER_CHANGED,this.layerOrderHandler.bind(this)),this.mapEventBus.eventOn(kt.LAYER_REMOVED,this.removeLayer.bind(this)),this.mapEventBus.eventOn(kt.LAYER_COPY,this.copyLayer.bind(this)),this.mapEventBus.eventOn(kt.LAYER_SWIPE_CHANGED,this.changeSwipeLayerID.bind(this))}removeLayer(e){if(e.mapID!=this.target)return;const{id:i}=e.data;if(this.MapLayers.has(i)){const r=this.MapLayers.get(i);r&&(this.map.removeLayer(r),this.MapLayers.delete(i),this.deleteLayerItem(i))}}copyLayer(e){if(e.mapID!=this.target)return;const{id:i,newid:r,ids:n}=e.data;if(this.MapLayers.has(i)){const o=this.MapLayers.get(i);if(o){const a={...o};for(let s of this.MapLayers.values())this.map.removeLayer(s);a.set("lyrID",r),this.MapLayers.set(r,a),n.forEach(s=>{const l=this.MapLayers.get(s);this.map.addLayer(l)})}}}changeSwipeLayerID(e){if(e.mapID!=this.target)return;const{id:i}=e.data;if(this.MapLayers.has(i)){const r=this.setSwipeLayerItem(i);r>=0&&(this.swipeLayerIndex=r)}}layerVisibleHandler(e){if(e.mapID!=this.target)return;const{id:i,visible:r}=e.data;if(this.MapLayers.has(i)){const n=this.MapLayers.get(i);n&&n.setVisible(r),this.changeLayerItemVisible(i,r)}}layerOpacityHandler(e){if(e.mapID!=this.target)return;const{id:i,opacity:r}=e.data;if(this.MapLayers.has(i)){const n=this.MapLayers.get(i);n&&n.setOpacity(r),this.changeLayerItemOpacity(i,r)}}layerOrderHandler(e){if(e.mapID===this.target){const{layerID:i,updown:r}=e.data;if(this.MapLayers.has(i)){const n=this.changeLayerItemOrder(i,r);if(n){const{id:o,index:a,newindex:s}=n;this.xmap.changeLayerOrder(a,s)}}}}layerLocateHandler(e){const i=this.MapLayers.get(e);if(i){const r=i.getSource()?.getProjection(),n=i.get("bounds");if(n)this.xmap.zoomToExtent(n);else{const o=i.get("center");if(o){let a=i.get("level");const s=[o[0],o[1]];o.length===3&&(a=o[2]),this.xmap.zoomToCenter(s,a)}else this.xmap.zoomTo(i.getExtent(),r)}}}hasLayer(e){return this.MapLayers.has(e)}getLayer(e){if(this.MapLayers.has(e))return this.MapLayers.get(e)}changeLayerOpacity(e,i=1){const r=this.getLayer(e);r&&(r.setOpacity(i),this.mapEventBus.eventEmit(kt.LAYER_CHANGED,this.newEvtArgs()))}changeLayerVisible(e,i=!0){const r=this.getLayer(e);r&&(r.setVisible(i),this.changeLayerItemVisible(e,i),this.mapEventBus.eventEmit(kt.LAYER_CHANGED,this.newEvtArgs()))}deleteLayerByID(e){const i=this.getLayer(e);return!!i&&(this.map.removeLayer(i),this.MapLayers.delete(e),this.deleteLayerItem(e),!0)}deleteLayerByIndex(e){const i=this.map.getLayers()[e];if(i){let r;for(let n of this.MapLayers)if(n[1]===i){r=n[0];break}r&&(this.MapLayers.delete(r),this.deleteLayerItem(r)),this.map.removeLayer(i)}}deleteLayer(e){if(e){let i;for(let r of this.MapLayers)if(r[1]===e){i=r[0];break}i&&(this.MapLayers.delete(i),this.deleteLayerItem(i)),this.map.removeLayer(e)}}clearLayers(){this.MapLayers.forEach((e,i)=>{this.map.removeLayer(e)}),this.MapLayers.clear(),this.LayerItemList.length=0,this.mapEventBus.eventEmit(kt.LAYER_CHANGED,this.newEvtArgs())}newEvtArgs(e,i=null){const r=new $v(this.target,"map");return r.data=e,r.target=i,r}registerLayer(e,i){return!this.MapLayers.has(i.id)&&(this.MapLayers.set(i.id,e),i&&(this.LayerItemList.push(i),this.mapEventBus.eventEmit(kt.LAYER_CHANGED,this.newEvtArgs())),!0)}deleteLayerItem(e){let i=!1;if(this.LayerItemList){let n=-1;const o=this.LayerItemList.length;for(var r=0;r<o;r++)if(this.LayerItemList[r].id===e){n=r;break}n!=-1&&(this.LayerItemList.splice(n,1),i=!0,this.mapEventBus.eventEmit(kt.LAYER_CHANGED,this.newEvtArgs()))}return i}changeLayerItemVisible(e,i){if(this.LayerItemList){const n=this.LayerItemList.length;for(var r=0;r<n;r++){let o=this.LayerItemList[r];if(o.id===e){o.visible=i;break}}}}changeLayerItemOpacity(e,i){if(this.LayerItemList){const n=this.LayerItemList.length;for(var r=0;r<n;r++){let o=this.LayerItemList[r];if(o.id===e){o.opacity=i;break}}}}changeLayerItemOrder(e,i){if(this.LayerItemList){let n=-1;const o=this.LayerItemList.length;let a;for(var r=0;r<o;r++)if(a=this.LayerItemList[r],a.id===e){n=r;break}if(n>=0){const s=n-i;return s<0||s>=o?void 0:(this.LayerItemList.splice(n,1),this.LayerItemList.splice(s,0,a),this.mapEventBus.eventEmit(kt.LAYER_CHANGED,this.newEvtArgs()),{id:e,index:n,newindex:s})}}}setSwipeLayerItem(e){let i=-1;if(!e)return i;if(this.LayerItemList){const n=this.LayerItemList.length;let o;for(var r=0;r<n;r++)if(o=this.LayerItemList[r],o.id===e){i=r;break}}return i}}var T1=6378137,E1=.0066943799901413165,Vl=484813681109536e-20,_e=Math.PI/2,Fe=1e-10,_i=.017453292519943295,eo=57.29577951308232,Ct=Math.PI/4,pu=2*Math.PI,ii=3.14159265359,DT={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},BT={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},L1=/[\s_\-\/\(\)]/g;function to(t,e){if(t[e])return t[e];for(var i,r=Object.keys(t),n=e.toLowerCase().replace(L1,""),o=-1;++o<r.length;)if((i=r[o]).toLowerCase().replace(L1,"")===n)return t[i]}function am(t){var e,i,r,n={},o=t.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,l){var u=l.split("=");return u.push(!0),s[u[0].toLowerCase()]=u[1],s},{}),a={proj:"projName",datum:"datumCode",rf:function(s){n.rf=parseFloat(s)},lat_0:function(s){n.lat0=s*_i},lat_1:function(s){n.lat1=s*_i},lat_2:function(s){n.lat2=s*_i},lat_ts:function(s){n.lat_ts=s*_i},lon_0:function(s){n.long0=s*_i},lon_1:function(s){n.long1=s*_i},lon_2:function(s){n.long2=s*_i},alpha:function(s){n.alpha=parseFloat(s)*_i},gamma:function(s){n.rectified_grid_angle=parseFloat(s)},lonc:function(s){n.longc=s*_i},x_0:function(s){n.x0=parseFloat(s)},y_0:function(s){n.y0=parseFloat(s)},k_0:function(s){n.k0=parseFloat(s)},k:function(s){n.k0=parseFloat(s)},a:function(s){n.a=parseFloat(s)},b:function(s){n.b=parseFloat(s)},r:function(s){n.a=n.b=parseFloat(s)},r_a:function(){n.R_A=!0},zone:function(s){n.zone=parseInt(s,10)},south:function(){n.utmSouth=!0},towgs84:function(s){n.datum_params=s.split(",").map(function(l){return parseFloat(l)})},to_meter:function(s){n.to_meter=parseFloat(s)},units:function(s){n.units=s;var l=to(BT,s);l&&(n.to_meter=l.to_meter)},from_greenwich:function(s){n.from_greenwich=s*_i},pm:function(s){var l=to(DT,s);n.from_greenwich=(l||parseFloat(s))*_i},nadgrids:function(s){s==="@null"?n.datumCode="none":n.nadgrids=s},axis:function(s){var l="ewnsud";s.length===3&&l.indexOf(s.substr(0,1))!==-1&&l.indexOf(s.substr(1,1))!==-1&&l.indexOf(s.substr(2,1))!==-1&&(n.axis=s)},approx:function(){n.approx=!0}};for(e in o)i=o[e],e in a?typeof(r=a[e])=="function"?r(i):n[r]=i:n[e]=i;return typeof n.datumCode=="string"&&n.datumCode!=="WGS84"&&(n.datumCode=n.datumCode.toLowerCase()),n}var jT=/\s/,NT=/[A-Za-z]/,$T=/[A-Za-z84_]/,mc=/[,\]]/,I1=/[\d\.E\-\+]/;function mn(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function qp(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var r=e?{}:t,n=i.reduce(function(o,a){return ts(a,o),o},r);e&&(t[e]=n)}function ts(t,e){if(Array.isArray(t)){var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1)return Array.isArray(t[0])?(e[i]={},void ts(t[0],e[i])):void(e[i]=t[0]);if(t.length)if(i!=="TOWGS84"){if(i==="AXIS")return i in e||(e[i]=[]),void e[i].push(t);var r;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(t.length===3&&ts(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(t.length===4&&ts(t[3],e[i]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void qp(e,i,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],qp(e,i,t),void(e[i].type=i);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return ts(t,e[i]);return qp(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}mn.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==4)for(;jT.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},mn.prototype.afterquote=function(t){if(t==='"')return this.word+='"',void(this.state=4);if(mc.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)},mn.prototype.afterItem=function(t){return t===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):t==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},mn.prototype.number=function(t){if(!I1.test(t)){if(mc.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)}this.word+=t},mn.prototype.quoted=function(t){t!=='"'?this.word+=t:this.state=5},mn.prototype.keyword=function(t){if($T.test(t))this.word+=t;else{if(t==="["){var e=[];return e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!mc.test(t))throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},mn.prototype.neutral=function(t){if(NT.test(t))return this.word=t,void(this.state=2);if(t==='"')return this.word="",void(this.state=4);if(I1.test(t))return this.word=t,void(this.state=3);if(!mc.test(t))throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place);this.afterItem(t)},mn.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===-1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var VT=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function jr(t){return .017453292519943295*t}function I2(t){for(var e=Object.keys(t),i=0,r=e.length;i<r;++i){var n=e[i];VT.indexOf(n)!==-1&&GT(t[n]),typeof t[n]=="object"&&I2(t[n])}}function GT(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var i="",r=0,n=t.AXIS.length;r<n;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?i+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?i+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?i+="e":o[0].indexOf("west")===-1&&(o[0]!=="x"&&o[0]!=="lon"||o[1]!=="west")||(i+="w")}i.length===2&&(i+="u"),i.length===3&&(t.axis=i)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function s(l){return l*(t.to_meter||1)}t.type==="GEOGCS"&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),t.datumCode!=="wgs_1984"&&t.datumCode!=="world_geodetic_system_1984"||(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",jr],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",jr],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",jr],["lat0","latitude_of_origin",jr],["lat0","standard_parallel_1",jr],["lat1","standard_parallel_1",jr],["lat2","standard_parallel_2",jr],["azimuth","Azimuth"],["alpha","azimuth",jr],["srsCode","name"]].forEach(function(l){return function(u,c){var h=c[0],d=c[1];!(h in u)&&d in u&&(u[h]=u[d],c.length===3&&(u[h]=c[2](u[h])))}(t,l)}),t.long0||!t.longc||t.projName!=="Albers_Conic_Equal_Area"&&t.projName!=="Lambert_Azimuthal_Equal_Area"||(t.long0=t.longc),t.lat_ts||!t.lat1||t.projName!=="Stereographic_South_Pole"&&t.projName!=="Polar Stereographic (variant B)"?!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=jr(t.lat0>0?90:-90)):(t.lat0=jr(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function P2(t){var e=new mn(t).output(),i=e[0],r={};return ts(e,r),I2(r),r[i]}function Ti(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Ti[t]=am(arguments[1]):Ti[t]=P2(arguments[1]):Ti[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){Array.isArray(r)?Ti.apply(e,r):Ti(r)});if(typeof t=="string"){if(t in Ti)return Ti[t]}else"EPSG"in t?Ti["EPSG:"+t.EPSG]=t:"ESRI"in t?Ti["ESRI:"+t.ESRI]=t:"IAU2000"in t&&(Ti["IAU2000:"+t.IAU2000]=t);return}}(function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]})(Ti);var HT=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],UT=["3857","900913","3785","102113"];function WT(t){if(!function(r){return typeof r=="string"}(t))return t;if(function(r){return r in Ti}(t))return Ti[t];if(function(r){return HT.some(function(n){return r.indexOf(n)>-1})}(t)){var e=P2(t);if(function(r){var n=to(r,"authority");if(n){var o=to(n,"epsg");return o&&UT.indexOf(o)>-1}}(e))return Ti["EPSG:3857"];var i=function(r){var n=to(r,"extension");if(n)return to(n,"proj4")}(e);return i?am(i):e}return function(r){return r[0]==="+"}(t)?am(t):void 0}function P1(t,e){var i,r;if(t=t||{},!e)return t;for(r in e)(i=e[r])!==void 0&&(t[r]=i);return t}function un(t,e,i){var r=t*e;return i/Math.sqrt(1-r*r)}function ju(t){return t<0?-1:1}function Oe(t){return Math.abs(t)<=ii?t:t-ju(t)*pu}function Ir(t,e,i){var r=t*i,n=.5*t;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(_e-e))/r}function fu(t,e){for(var i,r,n=.5*t,o=_e-2*Math.atan(e),a=0;a<=15;a++)if(i=t*Math.sin(o),o+=r=_e-2*Math.atan(e*Math.pow((1-i)/(1+i),n))-o,Math.abs(r)<=1e-10)return o;return-9999}var YT={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=un(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,r=t.x,n=t.y;if(n*eo>90&&n*eo<-90&&r*eo>180&&r*eo<-180||Math.abs(Math.abs(n)-_e)<=Fe)return null;if(this.sphere)e=this.x0+this.a*this.k0*Oe(r-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(Ct+.5*n));else{var o=Math.sin(n),a=Ir(this.e,n,o);e=this.x0+this.a*this.k0*Oe(r-this.long0),i=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,r=t.x-this.x0,n=t.y-this.y0;if(this.sphere)i=_e-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var o=Math.exp(-n/(this.a*this.k0));if((i=fu(this.e,o))===-9999)return null}return e=Oe(this.long0+r/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function R1(t){return t}var KT=[YT,{init:function(){},forward:R1,inverse:R1,names:["longlat","identity"]}],ih={},Gh=[];function q1(t,e){var i=Gh.length;return t.names?(Gh[i]=t,t.names.forEach(function(r){ih[r.toLowerCase()]=i}),this):!0}var XT={start:function(){KT.forEach(q1)},add:q1,get:function(t){if(!t)return!1;var e=t.toLowerCase();return ih[e]!==void 0&&Gh[ih[e]]?Gh[ih[e]]:void 0}},Hv={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ZT=Hv.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Hv.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var rh={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var QT in rh){var A1=rh[QT];rh[A1.datumName]=A1}var R2={};function JT(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:R2[t]||null,isNull:!1}}function is(t){return t/3600*Math.PI/180}function sm(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function eE(t){return t.map(function(e){return[is(e.longitudeShift),is(e.latitudeShift)]})}function tE(t,e,i){return{name:sm(t,e+8,e+16).trim(),parent:sm(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function iE(t,e,i,r){for(var n=e+176,o=[],a=0;a<i.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(n+16*a,r),longitudeShift:t.getFloat32(n+16*a+4,r),latitudeAccuracy:t.getFloat32(n+16*a+8,r),longitudeAccuracy:t.getFloat32(n+16*a+12,r)};o.push(s)}return o}function tn(t,e){if(!(this instanceof tn))return new tn(t);e=e||function(u){if(u)throw u};var i=WT(t);if(typeof i=="object"){var r=tn.projections.get(i.projName);if(r){if(i.datumCode&&i.datumCode!=="none"){var n=to(rh,i.datumCode);n&&(i.datum_params=i.datum_params||(n.towgs84?n.towgs84.split(","):null),i.ellps=n.ellipse,i.datumName=n.datumName?n.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var o=function(u,c,h,d,p){if(!u){var f=to(Hv,d);f||(f=ZT),u=f.a,c=f.b,h=f.rf}return h&&!c&&(c=(1-1/h)*u),(h===0||Math.abs(u-c)<Fe)&&(p=!0,c=u),{a:u,b:c,rf:h,sphere:p}}(i.a,i.b,i.rf,i.ellps,i.sphere),a=function(u,c,h,d){var p=u*u,f=c*c,g=(p-f)/p,_=0;return d?(p=(u*=1-g*(.16666666666666666+g*(.04722222222222222+.022156084656084655*g)))*u,g=0):_=Math.sqrt(g),{es:g,e:_,ep2:(p-f)/f}}(o.a,o.b,o.rf,i.R_A),s=function(u){return u===void 0?null:u.split(",").map(JT)}(i.nadgrids),l=i.datum||function(u,c,h,d,p,f,g){var _={};return _.datum_type=u===void 0||u==="none"?5:4,c&&(_.datum_params=c.map(parseFloat),_.datum_params[0]===0&&_.datum_params[1]===0&&_.datum_params[2]===0||(_.datum_type=1),_.datum_params.length>3&&(_.datum_params[3]===0&&_.datum_params[4]===0&&_.datum_params[5]===0&&_.datum_params[6]===0||(_.datum_type=2,_.datum_params[3]*=Vl,_.datum_params[4]*=Vl,_.datum_params[5]*=Vl,_.datum_params[6]=_.datum_params[6]/1e6+1))),g&&(_.datum_type=3,_.grids=g),_.a=h,_.b=d,_.es=p,_.ep2=f,_}(i.datumCode,i.datum_params,o.a,o.b,a.es,a.ep2,s);P1(this,i),P1(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}function q2(t,e,i){var r,n,o,a,s=t.x,l=t.y,u=t.z?t.z:0;if(l<-_e&&l>-1.001*_e)l=-_e;else if(l>_e&&l<1.001*_e)l=_e;else{if(l<-_e)return{x:-1/0,y:-1/0,z:t.z};if(l>_e)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),n=Math.sin(l),a=Math.cos(l),o=n*n,{x:((r=i/Math.sqrt(1-e*o))+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-e)+u)*n}}function A2(t,e,i,r){var n,o,a,s,l,u,c,h,d,p,f,g,_,v,b,m=1e-12,y=t.x,x=t.y,C=t.z?t.z:0;if(n=Math.sqrt(y*y+x*x),o=Math.sqrt(y*y+x*x+C*C),n/i<m){if(v=0,o/i<m)return b=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(x,y);a=C/o,h=(s=n/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),d=a*l,_=0;do _++,u=e*(c=i/Math.sqrt(1-e*d*d))/(c+(b=n*h+C*d-c*(1-e*d*d))),g=(f=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*h-(p=s*(1-u)*l)*d,h=p,d=f;while(g*g>1e-24&&_<30);return{x:v,y:Math.atan(f/Math.abs(p)),z:b}}function vc(t){return t===1||t===2}function rE(t,e,i){if(function(l,u){return l.datum_type===u.datum_type&&!(l.a!==u.a||Math.abs(l.es-u.es)>5e-11)&&(l.datum_type===1?l.datum_params[0]===u.datum_params[0]&&l.datum_params[1]===u.datum_params[1]&&l.datum_params[2]===u.datum_params[2]:l.datum_type!==2||l.datum_params[0]===u.datum_params[0]&&l.datum_params[1]===u.datum_params[1]&&l.datum_params[2]===u.datum_params[2]&&l.datum_params[3]===u.datum_params[3]&&l.datum_params[4]===u.datum_params[4]&&l.datum_params[5]===u.datum_params[5]&&l.datum_params[6]===u.datum_params[6])}(t,e)||t.datum_type===5||e.datum_type===5)return i;var r=t.a,n=t.es;if(t.datum_type===3){if(F1(t,!1,i)!==0)return;r=T1,n=E1}var o=e.a,a=e.b,s=e.es;if(e.datum_type===3&&(o=T1,a=6356752314e-3,s=E1),n===s&&r===o&&!vc(t.datum_type)&&!vc(e.datum_type)||(i=q2(i,n,r),vc(t.datum_type)&&(i=function(l,u,c){if(u===1)return{x:l.x+c[0],y:l.y+c[1],z:l.z+c[2]};if(u===2){var h=c[0],d=c[1],p=c[2],f=c[3],g=c[4],_=c[5],v=c[6];return{x:v*(l.x-_*l.y+g*l.z)+h,y:v*(_*l.x+l.y-f*l.z)+d,z:v*(-g*l.x+f*l.y+l.z)+p}}}(i,t.datum_type,t.datum_params)),vc(e.datum_type)&&(i=function(l,u,c){if(u===1)return{x:l.x-c[0],y:l.y-c[1],z:l.z-c[2]};if(u===2){var h=c[0],d=c[1],p=c[2],f=c[3],g=c[4],_=c[5],v=c[6],b=(l.x-h)/v,m=(l.y-d)/v,y=(l.z-p)/v;return{x:b+_*m-g*y,y:-_*b+m+f*y,z:g*b-f*m+y}}}(i,e.datum_type,e.datum_params)),i=A2(i,s,o,a),!(e.datum_type===3&&F1(e,!0,i)!==0)))return i}function F1(t,e,i){if(t.grids===null||t.grids.length===0)return-1;var r={x:-i.x,y:i.y},n={x:Number.NaN,y:Number.NaN},o=[];e:for(var a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){n=r;break}if(s.mandatory,s.grid!==null)for(var l=s.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,p=h.ll[0]-d,f=h.ll[1]-d,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,_=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(f>r.y||p>r.x||_<r.y||g<r.x)&&(n=nE(r,e,h),!isNaN(n.x)))break e}else if(s.mandatory)return-1}return isNaN(n.x)?-1:(i.x=-n.x,i.y=n.y,0)}function nE(t,e,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var n={x:t.x,y:t.y};n.x-=i.ll[0],n.y-=i.ll[1],n.x=Oe(n.x-Math.PI)+Math.PI;var o=O1(n,i);if(e){if(isNaN(o.x))return r;o.x=n.x-o.x,o.y=n.y-o.y;var a,s,l=9;do{if(s=O1(o,i),isNaN(s.x))break;a={x:n.x-(s.x+o.x),y:n.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return r;r.x=Oe(o.x+i.ll[0]),r.y=o.y+i.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function O1(t,e){var i,r={x:t.x/e.del[0],y:t.y/e.del[1]},n=Math.floor(r.x),o=Math.floor(r.y),a=r.x-1*n,s=r.y-1*o,l={x:Number.NaN,y:Number.NaN};if(n<0||n>=e.lim[0]||o<0||o>=e.lim[1])return l;i=o*e.lim[0]+n;var u=e.cvs[i][0],c=e.cvs[i][1];i++;var h=e.cvs[i][0],d=e.cvs[i][1];i+=e.lim[0];var p=e.cvs[i][0],f=e.cvs[i][1];i--;var g=e.cvs[i][0],_=e.cvs[i][1],v=a*s,b=a*(1-s),m=(1-a)*(1-s),y=(1-a)*s;return l.x=m*u+b*h+y*g+v*p,l.y=m*c+b*d+y*_+v*f,l}function z1(t,e,i){var r,n,o,a=i.x,s=i.y,l=i.z||0,u={};for(o=0;o<3;o++)if(!e||o!==2||i.z!==void 0)switch(o===0?(r=a,n="ew".indexOf(t.axis[o])!==-1?"x":"y"):o===1?(r=s,n="ns".indexOf(t.axis[o])!==-1?"y":"x"):(r=l,n="z"),t.axis[o]){case"e":case"n":u[n]=r;break;case"w":case"s":u[n]=-r;break;case"u":i[n]!==void 0&&(u.z=r);break;case"d":i[n]!==void 0&&(u.z=-r);break;default:return null}return u}function F2(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function D1(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Hh(t,e,i,r){var n,o=(i=Array.isArray(i)?F2(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z!==void 0;if(function(a){D1(a.x),D1(a.y)}(i),t.datum&&e.datum&&function(a,s){return(a.datum.datum_type===1||a.datum.datum_type===2||a.datum.datum_type===3)&&s.datumCode!=="WGS84"||(s.datum.datum_type===1||s.datum.datum_type===2||s.datum.datum_type===3)&&a.datumCode!=="WGS84"}(t,e)&&(i=Hh(t,n=new tn("WGS84"),i,r),t=n),r&&t.axis!=="enu"&&(i=z1(t,!1,i)),t.projName==="longlat")i={x:i.x*_i,y:i.y*_i,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=rE(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*eo,y:i.y*eo,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),r&&e.axis!=="enu"?z1(e,!0,i):(i&&!o&&delete i.z,i)}tn.projections=XT,tn.projections.start();var B1=tn("WGS84");function Ap(t,e,i,r){var n,o,a;return Array.isArray(i)?(n=Hh(t,e,i,r)||{x:NaN,y:NaN},i.length>2?t.name!==void 0&&t.name==="geocent"||e.name!==void 0&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(i.slice(3)):[n.x,n.y,i[2]].concat(i.slice(3)):[n.x,n.y].concat(i.slice(2)):[n.x,n.y]):(o=Hh(t,e,i,r),(a=Object.keys(i)).length===2||a.forEach(function(s){if(t.name!==void 0&&t.name==="geocent"||e.name!==void 0&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;o[s]=i[s]}),o)}function j1(t){return t instanceof tn?t:t.oProj?t.oProj:tn(t)}function Oi(t,e,i){t=j1(t);var r,n=!1;return e===void 0?(e=t,t=B1,n=!0):(e.x!==void 0||Array.isArray(e))&&(i=e,e=t,t=B1,n=!0),e=j1(e),i?Ap(t,e,i):(r={forward:function(o,a){return Ap(t,e,o,a)},inverse:function(o,a){return Ap(e,t,o,a)}},n&&(r.oProj=e),r)}var O2="AJSAJS",z2="AFAFAF",rs=65,zi=73,or=79,Pl=86,Rl=90,oE={forward:D2,inverse:function(t){var e=Uv(N2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:B2};function D2(t,e){return e=e||5,function(i,r){var n="00000"+i.easting,o="00000"+i.northing;return i.zoneNumber+i.zoneLetter+(g=i.easting,_=i.northing,v=i.zoneNumber,b=j2(v),m=Math.floor(g/1e5),y=Math.floor(_/1e5)%20,a=m,s=y,l=b,u=l-1,c=O2.charCodeAt(u),h=z2.charCodeAt(u),d=c+a-1,p=h+s,f=!1,d>Rl&&(d=d-Rl+rs-1,f=!0),(d===zi||c<zi&&d>zi||(d>zi||c<zi)&&f)&&d++,(d===or||c<or&&d>or||(d>or||c<or)&&f)&&++d===zi&&d++,d>Rl&&(d=d-Rl+rs-1),p>Pl?(p=p-Pl+rs-1,f=!0):f=!1,(p===zi||h<zi&&p>zi||(p>zi||h<zi)&&f)&&p++,(p===or||h<or&&p>or||(p>or||h<or)&&f)&&++p===zi&&p++,p>Pl&&(p=p-Pl+rs-1),String.fromCharCode(d)+String.fromCharCode(p))+n.substr(n.length-5,r)+o.substr(o.length-5,r);var a,s,l,u,c,h,d,p,f,g,_,v,b,m,y}(function(i){var r,n,o,a,s,l,u,c,h=i.lat,d=i.lon,p=6378137,f=.00669438,g=.9996,_=Fp(h),v=Fp(d);c=Math.floor((d+180)/6)+1,d===180&&(c=60),h>=56&&h<64&&d>=3&&d<12&&(c=32),h>=72&&h<84&&(d>=0&&d<9?c=31:d>=9&&d<21?c=33:d>=21&&d<33?c=35:d>=33&&d<42&&(c=37)),u=Fp(6*(c-1)-180+3),r=f/(1-f),n=p/Math.sqrt(1-f*Math.sin(_)*Math.sin(_)),o=Math.tan(_)*Math.tan(_),a=r*Math.cos(_)*Math.cos(_),s=Math.cos(_)*(v-u),l=p*((1-f/4-3*f*f/64-5*f*f*f/256)*_-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*_)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*_)-35*f*f*f/3072*Math.sin(6*_));var b=g*n*(s+(1-o+a)*s*s*s/6+(5-18*o+o*o+72*a-58*r)*s*s*s*s*s/120)+5e5,m=g*(l+n*Math.tan(_)*(s*s/2+(5-o+9*a+4*a*a)*s*s*s*s/24+(61-58*o+o*o+600*a-330*r)*s*s*s*s*s*s/720));return h<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(b),zoneNumber:c,zoneLetter:aE(h)}}({lat:t[1],lon:t[0]}),e)}function B2(t){var e=Uv(N2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Fp(t){return t*(Math.PI/180)}function N1(t){return t/Math.PI*180}function Uv(t){var e=t.northing,i=t.easting,r=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var o,a,s,l,u,c,h,d,p,f=.9996,g=6378137,_=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),b=i-5e5,m=e;r<"N"&&(m-=1e7),h=6*(n-1)-180+3,o=.006739496752268451,p=(d=m/f/6367449145945056e-9)+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),a=g/Math.sqrt(1-_*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),u=.99330562*g/Math.pow(1-_*Math.sin(p)*Math.sin(p),1.5),c=b/(a*f);var y=p-a*Math.tan(p)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);y=N1(y);var x,C=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(C=h+N1(C),t.accuracy){var k=Uv({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:k.lat,right:k.lon,bottom:y,left:C}}else x={lat:y,lon:C};return x}function aE(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function j2(t){var e=t%6;return e===0&&(e=6),e}function N2(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,r=null,n="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,o++}var a=parseInt(n,10);if(o===0||o+3>i)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var l=j2(a),u=function(b,m){for(var y=O2.charCodeAt(m-1),x=1e5,C=!1;y!==b.charCodeAt(0);){if(++y===zi&&y++,y===or&&y++,y>Rl){if(C)throw"Bad character: "+b;y=rs,C=!0}x+=1e5}return x}(r.charAt(0),l),c=function(b,m){if(b>"V")throw"MGRSPoint given invalid Northing "+b;for(var y=z2.charCodeAt(m-1),x=0,C=!1;y!==b.charCodeAt(0);){if(++y===zi&&y++,y===or&&y++,y>Pl){if(C)throw"Bad character: "+b;y=rs,C=!0}x+=1e5}return x}(r.charAt(1),l);c<sE(s);)c+=2e6;var h=i-o;if(h%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var d,p,f,g=h/2,_=0,v=0;return g>0&&(d=1e5/Math.pow(10,g),p=t.substring(o,o+g),_=parseFloat(p)*d,f=t.substring(o+g),v=parseFloat(f)*d),{easting:_+u,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:d}}function sE(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function ls(t,e,i){if(!(this instanceof ls))return new ls(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&e===void 0){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=i||0}ls.fromMGRS=function(t){return new ls(B2(t))},ls.prototype.toMGRS=function(t){return D2([this.x,this.y],t)};var $1=.046875,V1=.01953125,G1=.01068115234375;function Wv(t){var e=[];e[0]=1-t*(.25+t*($1+t*(V1+t*G1))),e[1]=t*(.75-t*($1+t*(V1+t*G1)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function Rs(t,e,i,r){return i*=e,e*=e,r[0]*t-i*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function Yv(t,e,i){for(var r=1/(1-e),n=t,o=20;o;--o){var a=Math.sin(n),s=1-e*a*a;if(n-=s=(Rs(n,a,Math.cos(n),i)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<Fe)return n}return n}var nh={init:function(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Wv(this.es),this.ml0=Rs(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,r,n=t.x,o=t.y,a=Oe(n-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),p=Math.abs(l)>Fe?Math.tan(o):0,f=Math.pow(p,2),g=Math.pow(f,2);e=1-this.es*Math.pow(s,2),u/=Math.sqrt(e);var _=Rs(o,s,l,this.en);i=this.a*(this.k0*u*(1+c/6*(1-f+h+c/20*(5-18*f+g+14*h-58*f*h+c/42*(61+179*g-g*f-479*f)))))+this.x0,r=this.a*(this.k0*(_-this.ml0+s*a*u/2*(1+c/12*(5-f+9*h+4*d+c/30*(61+g-58*f+270*h-330*f*h+c/56*(1385+543*g-g*f-3111*f))))))+this.y0}else{var v=l*Math.sin(a);if(Math.abs(Math.abs(v)-1)<Fe)return 93;if(i=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(r))>=1){if(v-1>Fe)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=i,t.y=r,t},inverse:function(t){var e,i,r,n,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(i=Yv(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(i)<_e){var s=Math.sin(i),l=Math.cos(i),u=Math.abs(l)>Fe?Math.tan(i):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),d=Math.pow(u,2),p=Math.pow(d,2);e=1-this.es*Math.pow(s,2);var f=o*Math.sqrt(e)/this.k0,g=Math.pow(f,2);r=i-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*h-g/30*(61+90*d-252*c*d+45*p+46*c-g/56*(1385+3633*d+4095*p+1574*p*d)))),n=Oe(this.long0+f*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*p+8*c*d+6*c-g/42*(61+662*d+1320*p+720*p*d))))/l)}else r=_e*ju(a),n=0;else{var _=Math.exp(o/this.k0),v=.5*(_-1/_),b=this.lat0+a/this.k0,m=Math.cos(b);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(v,2))),r=Math.asin(e),a<0&&(r=-r),n=v===0&&m===0?0:Oe(Math.atan2(v,m)+this.long0)}return t.x=n,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function $2(t){var e=Math.exp(t);return e=(e-1/e)/2}function Ni(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),r=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(r,2))}function lE(t){var e=Math.abs(t);return e=function(i){var r=1+i,n=r-1;return n===0?i:i*Math.log(r)/n}(e*(1+e/(Ni(1,e)+1))),t<0?-e:e}function Op(t,e){for(var i,r=2*Math.cos(2*e),n=t.length-1,o=t[n],a=0;--n>=0;)i=r*o-a+t[n],a=o,o=i;return e+i*Math.sin(2*e)}function H1(t,e,i){for(var r,n,o=Math.sin(e),a=Math.cos(e),s=$2(i),l=function(_){var v=Math.exp(_);return(v+1/v)/2}(i),u=2*a*l,c=-2*o*s,h=t.length-1,d=t[h],p=0,f=0,g=0;--h>=0;)r=f,n=p,d=u*(f=d)-r-c*(p=g)+t[h],g=c*f-n+u*p;return[(u=o*l)*d-(c=a*s)*g,u*g+c*d]}var oh={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(nh.init.apply(this),this.forward=nh.forward,this.inverse=nh.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var r=Op(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(n,o){for(var a,s=2*Math.cos(o),l=n.length-1,u=n[l],c=0;--l>=0;)a=s*u-c+n[l],c=u,u=a;return Math.sin(o)*a}(this.gtu,2*r))},forward:function(t){var e=Oe(t.x-this.long0),i=t.y;i=Op(this.cbg,i);var r=Math.sin(i),n=Math.cos(i),o=Math.sin(e),a=Math.cos(e);i=Math.atan2(r,a*n),e=Math.atan2(o*n,Ni(r,n*a)),e=lE(Math.tan(e));var s,l,u=H1(this.gtu,2*i,2*e);return i+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,i,r=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);if(n=(n-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=H1(this.utg,2*n,2*r);n+=o[0],r+=o[1],r=Math.atan($2(r));var a=Math.sin(n),s=Math.cos(n),l=Math.sin(r),u=Math.cos(r);n=Math.atan2(a*u,Ni(l,u*s)),e=Oe((r=Math.atan2(l,u*s))+this.long0),i=Op(this.cgb,n)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},uE={init:function(){var t=function(e,i){if(e===void 0){if((e=Math.floor(30*(Oe(i)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*_i,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,oh.init.apply(this),this.forward=oh.forward,this.inverse=oh.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function zp(t,e){return Math.pow((1-t)/(1+t),e)}var Dp={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ct)/(Math.pow(Math.tan(.5*this.lat0+Ct),this.C)*zp(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Ct),this.C)*zp(this.e*Math.sin(i),this.ratexp))-_e,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,r=Math.pow(Math.tan(.5*i+Ct)/this.K,1/this.C),n=20;n>0&&(i=2*Math.atan(r*zp(this.e*Math.sin(t.y),-.5*this.e))-_e,!(Math.abs(i-t.y)<1e-14));--n)t.y=i;return n?(t.x=e,t.y=i,t):null},names:["gauss"]},cE={init:function(){Dp.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,r,n;return t.x=Oe(t.x-this.long0),Dp.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),r=Math.cos(t.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*r),t.x=n*i*Math.sin(t.x),t.y=n*(this.cosc0*e-this.sinc0*i*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,r,n,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Ni(t.x,t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),i=Math.cos(a),n=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else n=this.phic0,r=0;return t.x=r,t.y=n,Dp.inverse.apply(this,[t]),t.x=Oe(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},hE={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Fe&&(this.k0=.5*(1+ju(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Fe&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Fe&&Math.abs(Math.cos(this.lat_ts))>Fe&&(this.k0=.5*this.cons*un(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ir(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=un(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-_e,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,r,n,o,a,s=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=Oe(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Fe&&Math.abs(l+this.lat0)<=Fe?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(i=2*Math.atan(this.ssfn_(l,u,this.e))-_e,n=Math.cos(i),r=Math.sin(i),Math.abs(this.coslat0)<=Fe?(o=Ir(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<Fe?(e=2*this.a*this.k0/(1+n*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*n*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*n*Math.cos(h))+this.y0),t.x=e*n*Math.sin(h)+this.x0,t))},inverse:function(t){var e,i,r,n,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,i=this.lat0,a<=Fe?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<Fe?this.lat0>0?Oe(this.long0+Math.atan2(t.x,-1*t.y)):Oe(this.long0+Math.atan2(t.x,t.y)):Oe(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=Fe){if(a<=Fe)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),i=this.con*fu(this.e,r),e=this.con*Oe(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Fe?o=this.X0:(o=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/a),e=Oe(this.long0+Math.atan2(t.x*Math.sin(n),a*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),i=-1*fu(this.e,Math.tan(.5*(_e+o)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(_e+t))*Math.pow((1-e)/(1+e),.5*i)}},dE={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,r=1/this.rf,n=2*r-Math.pow(r,2),o=this.e=Math.sqrt(n);this.R=this.k0*i*Math.sqrt(1-n)/(1-n*Math.pow(e,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+i)+this.K,n=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,r=e/this.R,n=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},names:["somerc"]},Ra=1e-7,pE={init:function(){var t,e,i,r,n,o,a,s,l,u,c,h=0,d=0,p=0,f=0,g=0,_=0,v=0;this.no_off=function(x){var C=typeof x.PROJECTION=="object"?Object.keys(x.PROJECTION)[0]:x.PROJECTION;return"no_uoff"in x||"no_off"in x||["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(C)!==-1}(this),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var m=!1;if("rectified_grid_angle"in this&&(m=!0),b&&(v=this.alpha),m&&(h=this.rectified_grid_angle*_i),b||m)d=this.longc;else if(p=this.long1,g=this.lat1,f=this.long2,_=this.lat2,Math.abs(g-_)<=Ra||(t=Math.abs(g))<=Ra||Math.abs(t-_e)<=Ra||Math.abs(Math.abs(this.lat0)-_e)<=Ra||Math.abs(Math.abs(_)-_e)<=Ra)throw new Error;var y=1-this.es;e=Math.sqrt(y),Math.abs(this.lat0)>Fe?(s=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*s*s,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/y),this.A=this.B*this.k0*e/t,(n=(r=this.B*e/(i*Math.sqrt(t)))*r-1)<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=r,this.E*=Math.pow(Ir(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=n=1),b||m?(b?(c=Math.asin(Math.sin(v)/r),m||(h=v)):(c=h,v=Math.asin(r*Math.sin(c))),this.lam0=d-Math.asin(.5*(n-1/n)*Math.tan(c))/this.B):(o=Math.pow(Ir(this.e,g,Math.sin(g)),this.B),a=Math.pow(Ir(this.e,_,Math.sin(_)),this.B),n=this.E/o,l=(a-o)/(a+o),u=((u=this.E*this.E)-a*o)/(u+a*o),(t=p-f)<-Math.pi?f-=pu:t>Math.pi&&(f+=pu),this.lam0=Oe(.5*(p+f)-Math.atan(u*Math.tan(.5*this.B*(p-f))/l)/this.B),c=Math.atan(2*Math.sin(this.B*Oe(p-this.lam0))/(n-1/n)),h=v=Math.asin(r*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Ct-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ct+n))},forward:function(t){var e,i,r,n,o,a,s,l,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-_e)>Fe){if(e=.5*((o=this.E/Math.pow(Ir(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),i=.5*(o+a),n=Math.sin(this.B*t.x),r=(e*this.singam-n*this.cosgam)/i,Math.abs(Math.abs(r)-1)<Fe)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*t.x),s=Math.abs(a)<Ra?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+n*this.singam,a)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(u.x=s,u.y=l):(s-=this.u_0,u.x=l*this.cosrot+s*this.sinrot,u.y=s*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,i,r,n,o,a,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=.5*((r=Math.exp(-this.BrA*i))-1/r),o=.5*(r+1/r),s=((a=Math.sin(this.BrA*e))*this.cosgam+n*this.singam)/o,Math.abs(Math.abs(s)-1)<Fe)l.x=0,l.y=s<0?-_e:_e;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=fu(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},fE={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Fe)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),r=un(this.e,e,i),n=Ir(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=un(this.e,o,a),l=Ir(this.e,this.lat2,o),u=Ir(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Fe?this.ns=Math.log(r/s)/Math.log(n/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=Fe&&(i=ju(i)*(_e-2e-10));var r,n,o=Math.abs(Math.abs(i)-_e);if(o>Fe)r=Ir(this.e,i,Math.sin(i)),n=this.a*this.f0*Math.pow(r,this.ns);else{if((o=i*this.ns)<=0)return null;n=0}var a=this.ns*Oe(e-this.long0);return t.x=this.k0*(n*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(a))+this.y0,t},inverse:function(t){var e,i,r,n,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),i=1):(e=-Math.sqrt(a*a+s*s),i=-1);var l=0;if(e!==0&&(l=Math.atan2(i*a,i*s)),e!==0||this.ns>0){if(i=1/this.ns,r=Math.pow(e/(this.a*this.f0),i),(n=fu(this.e,r))===-9999)return null}else n=-_e;return o=Oe(l/this.ns+this.long0),t.x=o,t.y=n,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},gE={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,r,n,o,a,s,l=t.x,u=t.y,c=Oe(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),o=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(n)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,r,n,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(e)),t.x=this.long0-i/this.alfa,a=e,s=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1;while(s===0&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function Pi(t,e,i,r,n){return t*n-e*Math.sin(2*n)+i*Math.sin(4*n)-r*Math.sin(6*n)}function gu(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function mu(t){return .375*t*(1+.25*t*(1+.46875*t))}function vu(t){return .05859375*t*t*(1+.75*t)}function yu(t){return t*t*t*(35/3072)}function us(t,e,i){var r=e*i;return t/Math.sqrt(1-r*r)}function go(t){return Math.abs(t)<_e?t:t-ju(t)*Math.PI}function Uh(t,e,i,r,n){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-i*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)))/(e-2*i*Math.cos(2*o)+4*r*Math.cos(4*o)-6*n*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}var mE={init:function(){this.sphere||(this.e0=gu(this.es),this.e1=mu(this.es),this.e2=vu(this.es),this.e3=yu(this.es),this.ml0=this.a*Pi(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,r=t.x,n=t.y;if(r=Oe(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(r)),i=this.a*(Math.atan2(Math.tan(n),Math.cos(r))-this.lat0);else{var o=Math.sin(n),a=Math.cos(n),s=us(this.a,this.e,o),l=Math.tan(n)*Math.tan(n),u=r*Math.cos(n),c=u*u,h=this.es*a*a/(1-this.es);e=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),i=this.a*Pi(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,r=t.x/this.a,n=t.y/this.a;if(this.sphere){var o=n+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),i=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=Uh(this.ml0/this.a+n,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-_e)<=Fe)return t.x=this.long0,t.y=_e,n<0&&(t.y*=-1),t;var s=us(this.a,this.e,Math.sin(a)),l=s*s*s/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),c=r*this.a/s,h=c*c;e=a-s*Math.tan(a)/l*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-h*(u/3+(1+3*u)*u*h/15))/Math.cos(a)}return t.x=Oe(i+this.long0),t.y=go(e),t},names:["Cassini","Cassini_Soldner","cass"]};function io(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}var vE=.3333333333333333,yE=.17222222222222222,_E=.10257936507936508,bE=.06388888888888888,xE=.0664021164021164,wE=.016415012942191543,SE={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-_e)<Fe?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Fe?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=io(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(i){var r,n=[];return n[0]=i*vE,r=i*i,n[0]+=r*yE,n[1]=r*bE,r*=i,n[0]+=r*_E,n[1]+=r*xE,n[2]=r*wE,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=io(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,r,n,o,a,s,l,u,c,h=t.x,d=t.y;if(h=Oe(h-this.long0),this.sphere){if(o=Math.sin(d),c=Math.cos(d),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=Fe)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(h),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<Fe)return null;i=Ct-.5*d,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(h),i*=r}}else{switch(s=0,l=0,u=0,r=Math.cos(h),n=Math.sin(h),o=Math.sin(d),a=io(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=_e+d,a=this.qp-a;break;case this.S_POLE:u=d-_e,a=this.qp+a}if(Math.abs(u)<Fe)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),i=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*u*l*n;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*n,i=r*(this.mode===this.S_POLE?u:-u)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,r,n,o,a,s,l=t.x/this.a,u=t.y/this.a;if(this.sphere){var c,h=0,d=0;if((i=.5*(c=Math.sqrt(l*l+u*u)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=Fe?0:Math.asin(u*d/c),l*=d,u=h*c;break;case this.OBLIQ:i=Math.abs(c)<=Fe?this.lat0:Math.asin(h*this.sinph0+u*d*this.cosph0/c),l*=d*this.cosph0,u=(h-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:u=-u,i=_e-i;break;case this.S_POLE:i-=_e}e=u!==0||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(a=Math.sqrt(l*l+u*u))<Fe)return t.x=this.long0,t.y=this.lat0,t;n=2*Math.asin(.5*a/this.rq),r=Math.cos(n),l*=n=Math.sin(n),this.mode===this.OBLIQ?(s=r*this.sinb1+u*n*this.cosb1/a,o=this.qp*s,u=a*this.cosb1*r-u*this.sinb1*n):(s=u*n/a,o=this.qp*s,u=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=l*l+u*u))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(l,u),i=function(p,f){var g=p+p;return p+f[0]*Math.sin(g)+f[1]*Math.sin(g+g)+f[2]*Math.sin(g+g+g)}(Math.asin(s),this.apa)}return t.x=Oe(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function mo(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var CE={init:function(){Math.abs(this.lat1+this.lat2)<Fe||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=un(this.e3,this.sin_po,this.cos_po),this.qs1=io(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=un(this.e3,this.sin_po,this.cos_po),this.qs2=io(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=io(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Fe?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var r=io(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*Oe(e-this.long0),a=n*Math.sin(o)+this.x0,s=this.rh-n*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,i,r,n,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),n=0,e!==0&&(n=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(i=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,i)),o=Oe(n/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,r,n,o,a=mo(.5*e);if(t<Fe)return a;for(var s=t*t,l=1;l<=25;l++)if(a+=o=.5*(n=1-(r=t*(i=Math.sin(a)))*r)*n/Math.cos(a)*(e/(1-s)-i/n+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}},ME={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,r,n,o,a,s,l=t.x,u=t.y;return r=Oe(l-this.long0),e=Math.sin(u),i=Math.cos(u),n=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*i*n)>0||Math.abs(o)<=Fe?(a=this.x0+1*this.a*i*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*n)/o):(a=this.x0+this.infinity_dist*i*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*n)),t.x=a,t.y=s,t},inverse:function(t){var e,i,r,n,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(e,this.rc),i=Math.sin(n),a=mo((r=Math.cos(n))*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i),o=Oe(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},kE={init:function(){this.sphere||(this.k0=un(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,r=t.x,n=t.y,o=Oe(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=io(this.e,Math.sin(n));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Oe(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(r,n){var o=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(n)-o)<1e-6)return n<0?-1*_e:_e;for(var a,s,l,u,c=Math.asin(.5*n),h=0;h<30;h++)if(s=Math.sin(c),l=Math.cos(c),u=r*s,c+=a=Math.pow(1-u*u,2)/(2*l)*(n/(1-r*r)-s/(1-u*u)+.5/r*Math.log((1-u)/(1+u))),Math.abs(a)<=1e-10)return c;return NaN}(this.e,2*t.y*this.k0/this.a),e=Oe(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},TE={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,r=Oe(e-this.long0),n=go(i-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*n,t},inverse:function(t){var e=t.x,i=t.y;return t.x=Oe(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=go(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},EE={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gu(this.es),this.e1=mu(this.es),this.e2=vu(this.es),this.e3=yu(this.es),this.ml0=this.a*Pi(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,r,n=t.x,o=t.y,a=Oe(n-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=Fe?(e=this.a*a,i=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),i=this.a*(go(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=Fe)e=this.a*a,i=-1*this.ml0;else{var s=us(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),i=this.a*Pi(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,r,n,o,a,s,l,u;if(r=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Fe)e=Oe(r/this.a+this.long0),i=0;else{var c;for(a=this.lat0+n/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=Fe){i=l;break}e=Oe(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(n+this.ml0)<=Fe)i=0,e=Oe(this.long0+r/this.a);else{var h,d,p,f,g;for(a=(this.ml0+n)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*Pi(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(h*(f=d/this.a)+1)-f-.5*h*(f*f+s))/(this.es*Math.sin(2*l)*(f*f+s-2*a*f)/(4*h)+(a-f)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=Fe){i=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=Oe(this.long0+Math.asin(r*h/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},LE={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,r=t.y-this.lat0,n=i-this.long0,o=r/Vl*1e-5,a=n,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var u,c=l,h=a,d=1,p=0,f=0,g=0;for(e=1;e<=6;e++)u=p*c+d*h,d=d*c-p*h,p=u,f=f+this.B_re[e]*d-this.B_im[e]*p,g=g+this.B_im[e]*d+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=f*this.a+this.y0,t},inverse:function(t){var e,i,r=t.x,n=t.y,o=r-this.x0,a=(n-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)i=u*a+l*s,l=l*a-u*s,u=i,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var p,f=c,g=h,_=a,v=s;for(e=2;e<=6;e++)p=g*c+f*h,f=f*c-g*h,g=p,_+=(e-1)*(this.B_re[e]*f-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*f+this.B_re[e]*g);f=1,g=0;var b=this.B_re[1],m=this.B_im[1];for(e=2;e<=6;e++)p=g*c+f*h,f=f*c-g*h,g=p,b+=e*(this.B_re[e]*f-this.B_im[e]*g),m+=e*(this.B_im[e]*f+this.B_re[e]*g);var y=b*b+m*m;c=(_*b+v*m)/y,h=(v*b-_*m)/y}var x=c,C=h,k=1,L=0;for(e=1;e<=9;e++)k*=x,L+=this.D[e]*k;var A=this.lat0+L*Vl*1e5,E=this.long0+C;return t.x=E,t.y=A,t},names:["New_Zealand_Map_Grid","nzmg"]},IE={init:function(){},forward:function(t){var e=t.x,i=t.y,r=Oe(e-this.long0),n=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=n,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Oe(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},PE={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Wv(this.es)},forward:function(t){var e,i,r=t.x,n=t.y;if(r=Oe(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(n),a=20;a;--a){var s=(this.m*n+Math.sin(n)-o)/(this.m+Math.cos(n));if(n-=s,Math.abs(s)<Fe)break}else n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;e=this.a*this.C_x*r*(this.m+Math.cos(n)),i=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);i=this.a*Rs(n,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,r;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=mo((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=mo(Math.sin(e)/this.n)),i=Oe(i+this.long0),e=go(e)):(e=Yv(t.y/this.a,this.es,this.en),(r=Math.abs(e))<_e?(r=Math.sin(e),i=Oe(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-Fe<_e&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},RE={init:function(){},forward:function(t){for(var e=t.x,i=t.y,r=Oe(e-this.long0),n=i,o=Math.PI*Math.sin(i);;){var a=-(n+Math.sin(n)-o)/(1+Math.cos(n));if(n+=a,Math.abs(a)<Fe)break}n/=2,Math.PI/2-Math.abs(i)<Fe&&(r=0);var s=.900316316158*this.a*r*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var r=Oe(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var n=Math.asin(i);return t.x=r,t.y=n,t},names:["Mollweide","moll"]},qE={init:function(){Math.abs(this.lat1+this.lat2)<Fe||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gu(this.es),this.e1=mu(this.es),this.e2=vu(this.es),this.e3=yu(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=un(this.e,this.sinphi,this.cosphi),this.ml1=Pi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Fe?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=un(this.e,this.sinphi,this.cosphi),this.ml2=Pi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Pi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var n=Pi(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-n)}var o=this.ns*Oe(i-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,i,r,n;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return i!==0&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(n=Oe(this.long0+o/this.ns),r=go(this.g-i/this.a),t.x=n,t.y=r,t):(r=Uh(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),n=Oe(this.long0+o/this.ns),t.x=n,t.y=r,t)},names:["Equidistant_Conic","eqdc"]},AE={init:function(){this.R=this.a},forward:function(t){var e,i,r=t.x,n=t.y,o=Oe(r-this.long0);Math.abs(n)<=Fe&&(e=this.x0+this.R*o,i=this.y0);var a=mo(2*Math.abs(n/Math.PI));(Math.abs(o)<=Fe||Math.abs(Math.abs(n)-_e)<=Fe)&&(e=this.x0,i=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),d=h*h,p=h*(2/u-1),f=p*p,g=Math.PI*this.R*(s*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);o<0&&(g=-g),e=this.x0+g;var _=l+h;return g=Math.PI*this.R*(p*_-s*Math.sqrt((f+l)*(l+1)-_*_))/(f+l),i=n>=0?this.y0+g:this.y0-g,t.x=e,t.y=i,t},inverse:function(t){var e,i,r,n,o,a,s,l,u,c,h,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(n=t.y/h)*n,h=3*(n*n/(l=-2*(a=-Math.abs(n)*(1+o))+1+2*n*n+o*o)+(2*(s=a-2*n*n+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,i=t.y>=0?(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<Fe?this.long0:Oe(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-n*n)+o*o))/2/r),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},FE={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,r,n,o,a,s,l,u,c,h,d,p,f,g,_,v,b,m,y,x,C,k=t.x,L=t.y,A=Math.sin(t.y),E=Math.cos(t.y),I=Oe(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Fe?(t.x=this.x0+this.a*(_e-L)*Math.sin(I),t.y=this.y0-this.a*(_e-L)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=Fe?(t.x=this.x0+this.a*(_e+L)*Math.sin(I),t.y=this.y0+this.a*(_e+L)*Math.cos(I),t):(b=this.sin_p12*A+this.cos_p12*E*Math.cos(I),v=(_=Math.acos(b))?_/Math.sin(_):1,t.x=this.x0+this.a*v*E*Math.sin(I),t.y=this.y0+this.a*v*(this.cos_p12*A-this.sin_p12*E*Math.cos(I)),t):(e=gu(this.es),i=mu(this.es),r=vu(this.es),n=yu(this.es),Math.abs(this.sin_p12-1)<=Fe?(o=this.a*Pi(e,i,r,n,_e),a=this.a*Pi(e,i,r,n,L),t.x=this.x0+(o-a)*Math.sin(I),t.y=this.y0-(o-a)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=Fe?(o=this.a*Pi(e,i,r,n,_e),a=this.a*Pi(e,i,r,n,L),t.x=this.x0+(o+a)*Math.sin(I),t.y=this.y0+(o+a)*Math.cos(I),t):(s=A/E,l=us(this.a,this.e,this.sin_p12),u=us(this.a,this.e,A),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*E)),m=(h=Math.atan2(Math.sin(I),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(I)))===0?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=Fe?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(I)*Math.cos(c)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),_=l*m*(1-(y=m*m)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(x=y*m)/8*(f=d*p)*(1-2*g)+(C=x*m)/120*(g*(4-7*g)-3*d*d*(1-7*g))-C*m/48*f),t.x=this.x0+_*Math.sin(h),t.y=this.y0+_*Math.cos(h),t))},inverse:function(t){var e,i,r,n,o,a,s,l,u,c,h,d,p,f,g,_,v,b,m,y,x,C,k;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y))>2*_e*this.a?void 0:(i=e/this.a,r=Math.sin(i),n=Math.cos(i),o=this.long0,Math.abs(e)<=Fe?a=this.lat0:(a=mo(n*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-_e,o=Math.abs(s)<=Fe?this.lat0>=0?Oe(this.long0+Math.atan2(t.x,-t.y)):Oe(this.long0-Math.atan2(-t.x,t.y)):Oe(this.long0+Math.atan2(t.x*r,e*this.cos_p12*n-t.y*this.sin_p12*r))),t.x=o,t.y=a,t):(l=gu(this.es),u=mu(this.es),c=vu(this.es),h=yu(this.es),Math.abs(this.sin_p12-1)<=Fe?(a=Uh(((d=this.a*Pi(l,u,c,h,_e))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,u,c,h),o=Oe(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=Fe?(d=this.a*Pi(l,u,c,h,_e),a=Uh(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,l,u,c,h),o=Oe(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=us(this.a,this.e,this.sin_p12),_=Math.cos(g),b=-(v=this.e*this.cos_p12*_)*v/(1-this.es),m=3*this.es*(1-b)*this.sin_p12*this.cos_p12*_/(1-this.es),C=1-b*(x=(y=e/p)-b*(1+b)*Math.pow(y,3)/6-m*(1+3*b)*Math.pow(y,4)/24)*x/2-y*x*x*x/6,f=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*_),o=Oe(this.long0+Math.asin(Math.sin(g)*Math.sin(x)/Math.cos(f))),k=Math.sin(f),a=Math.atan2((k-this.es*C*this.sin_p12)*Math.tan(f),k*(1-this.es)),t.x=o,t.y=a,t))},names:["Azimuthal_Equidistant","aeqd"]},OE={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,r,n,o,a,s,l=t.x,u=t.y;return r=Oe(l-this.long0),e=Math.sin(u),i=Math.cos(u),n=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*i*n)>0||Math.abs(o)<=Fe)&&(a=1*this.a*i*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*n)),t.x=a,t.y=s,t},inverse:function(t){var e,i,r,n,o,a,s;return t.x-=this.x0,t.y-=this.y0,i=mo((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(i),n=Math.cos(i),a=this.long0,Math.abs(e)<=Fe?(s=this.lat0,t.x=a,t.y=s,t):(s=mo(n*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-_e,Math.abs(o)<=Fe?(a=this.lat0>=0?Oe(this.long0+Math.atan2(t.x,-t.y)):Oe(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=Oe(this.long0+Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]},U1=1,cl=2,hl=3,dl=4,Bp=5,jp=6,Gn=1,jn=2,Nn=3,Ua=4;function yc(t,e,i,r){var n;return t<Fe?(r.value=Gn,n=0):(n=Math.atan2(e,i),Math.abs(n)<=Ct?r.value=Gn:n>Ct&&n<=_e+Ct?(r.value=jn,n-=_e):n>_e+Ct||n<=-(_e+Ct)?(r.value=Nn,n=n>=0?n-ii:n+ii):(r.value=Ua,n+=_e)),n}function qa(t,e){var i=t+e;return i<-ii?i+=pu:i>+ii&&(i-=pu),i}var zE={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=_e-Ct/2?this.face=Bp:this.lat0<=-(_e-Ct/2)?this.face=jp:Math.abs(this.long0)<=Ct?this.face=U1:Math.abs(this.long0)<=_e+Ct?this.face=this.long0>0?cl:dl:this.face=hl,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,r,n,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=this.es!==0?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===Bp)n=_e-e,i>=Ct&&i<=_e+Ct?(l.value=Gn,r=i-_e):i>_e+Ct||i<=-(_e+Ct)?(l.value=jn,r=i>0?i-ii:i+ii):i>-(_e+Ct)&&i<=-Ct?(l.value=Nn,r=i+_e):(l.value=Ua,r=i);else if(this.face===jp)n=_e+e,i>=Ct&&i<=_e+Ct?(l.value=Gn,r=-i+_e):i<Ct&&i>=-Ct?(l.value=jn,r=-i):i<-Ct&&i>=-(_e+Ct)?(l.value=Nn,r=-i-_e):(l.value=Ua,r=i>0?-i+ii:-i-ii);else{var u,c,h,d,p,f;this.face===cl?i=qa(i,+_e):this.face===hl?i=qa(i,+ii):this.face===dl&&(i=qa(i,-_e)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(i),u=p*Math.cos(i),c=p*f,h=d,this.face===U1?r=yc(n=Math.acos(u),h,c,l):this.face===cl?r=yc(n=Math.acos(c),h,-u,l):this.face===hl?r=yc(n=Math.acos(-u),h,-c,l):this.face===dl?r=yc(n=Math.acos(-c),h,u,l):(n=r=0,l.value=Gn)}return a=Math.atan(12/ii*(r+Math.acos(Math.sin(r)*Math.cos(Ct))-_e)),o=Math.sqrt((1-Math.cos(n))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===jn?a+=_e:l.value===Nn?a+=ii:l.value===Ua&&(a+=1.5*ii),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,i,r,n,o,a,s,l,u,c,h,d,p={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=Gn:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=jn,e-=_e):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=Nn,e=e<0?e+ii:e-ii):(f.value=Ua,e+=_e),u=ii/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(n=Math.tan(i))*n*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Bp)l=Math.acos(s),p.phi=_e-l,f.value===Gn?p.lam=a+_e:f.value===jn?p.lam=a<0?a+ii:a-ii:f.value===Nn?p.lam=a-_e:p.lam=a;else if(this.face===jp)l=Math.acos(s),p.phi=l-_e,f.value===Gn?p.lam=-a+_e:f.value===jn?p.lam=-a:f.value===Nn?p.lam=-a-_e:p.lam=a<0?-a-ii:-a+ii;else{var g,_,v;u=(g=s)*g,_=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*v)>=1?0:Math.sqrt(1-u),f.value===jn?(u=_,_=-v,v=u):f.value===Nn?(_=-_,v=-v):f.value===Ua&&(u=_,_=v,v=-u),this.face===cl?(u=g,g=-_,_=u):this.face===hl?(g=-g,_=-_):this.face===dl&&(u=g,g=_,_=-u),p.phi=Math.acos(-v)-_e,p.lam=Math.atan2(_,g),this.face===cl?p.lam=qa(p.lam,-_e):this.face===hl?p.lam=qa(p.lam,-ii):this.face===dl&&(p.lam=qa(p.lam,+_e))}return this.es!==0&&(c=p.phi<0?1:0,h=Math.tan(p.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Np=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],pl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],W1=.8487,Y1=1.3523,V2=eo/5,DE=1/V2,$p=18,_c=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},BE={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Oe(t.x-this.long0),i=Math.abs(t.y),r=Math.floor(i*V2);r<0?r=0:r>=$p&&(r=17);var n={x:_c(Np[r],i=eo*(i-DE*r))*e,y:_c(pl[r],i)};return t.y<0&&(n.y=-n.y),n.x=n.x*this.a*W1+this.x0,n.y=n.y*this.a*Y1+this.y0,n},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*W1),y:Math.abs(t.y-this.y0)/(this.a*Y1)};if(e.y>=1)e.x/=Np[18][0],e.y=t.y<0?-_e:_e;else{var i=Math.floor(e.y*$p);for(i<0?i=0:i>=$p&&(i=17);;)if(pl[i][0]>e.y)--i;else{if(!(pl[i+1][0]<=e.y))break;++i}var r=pl[i],n=5*(e.y-r[0])/(pl[i+1][0]-r[0]);n=function(o,a,s,l){for(var u=a;l;--l){var c=o(u);if(u-=c,Math.abs(c)<s)break}return u}(function(o){return(_c(r,o)-e.y)/function(a,s){return a[1]+s*(2*a[2]+3*s*a[3])}(r,o)},n,Fe,100),e.x/=_c(Np[i],n),e.y=(5*i+n)*_i,t.y<0&&(e.y=-e.y)}return e.x=Oe(e.x+this.long0),e},names:["Robinson","robin"]},jE={init:function(){this.name="geocent"},forward:function(t){return q2(t,this.es,this.a)},inverse:function(t){return A2(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},bc=0,xc=1,wc=2,Sc=3,fl={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},NE={init:function(){if(Object.keys(fl).forEach(function(i){if(this[i]===void 0)this[i]=fl[i].def;else{if(fl[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);fl[i].num&&(this[i]=parseFloat(this[i]))}fl[i].degrees&&(this[i]=this[i]*_i)}.bind(this)),Math.abs(Math.abs(this.lat0)-_e)<Fe?this.mode=this.lat0<0?xc:bc:Math.abs(this.lat0)<Fe?this.mode=wc:(this.mode=Sc,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,r,n,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Sc:i=this.sinph0*o+this.cosph0*a*s;break;case wc:i=a*s;break;case xc:i=-o;break;case bc:i=o}switch(e=(i=this.pn1/(this.p-i))*a*Math.sin(t.x),this.mode){case Sc:i*=this.cosph0*o-this.sinph0*a*s;break;case wc:i*=o;break;case bc:i*=-a*s;break;case xc:i*=a*s}return n=1/((r=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*n,i=r*n,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,r,n={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,i=this.pn1*t.y*this.cw*r,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var o=Ni(t.x,t.y);if(Math.abs(o)<Fe)n.x=0,n.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Sc:n.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(n.y))*o,t.x*=s*this.cosph0;break;case wc:n.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case bc:n.y=Math.asin(a),t.y=-t.y;break;case xc:n.y=-Math.asin(a)}n.x=Math.atan2(t.x,t.y)}return t.x=n.x+this.long0,t.y=n.y,t},names:["Tilted_Perspective","tpers"]},$E={init:function(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,r,n,o=t.x,a=t.y;if(o-=this.long0,this.shape==="ellipse"){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/Ni(this.radius_p*Math.cos(a),Math.sin(a));if(i=s*Math.cos(o)*Math.cos(a),r=s*Math.sin(o)*Math.cos(a),n=s*Math.sin(a),(this.radius_g-i)*i-r*r-n*n*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/Ni(n,e)),t.y=this.radius_g_1*Math.atan(n/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(n/Ni(r,e)))}else this.shape==="sphere"&&(e=Math.cos(a),i=Math.cos(o)*e,r=Math.sin(o)*e,n=Math.sin(a),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/Ni(n,e)),t.y=this.radius_g_1*Math.atan(n/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(n/Ni(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,r,n,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Ni(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Ni(1,a));var l=s/this.radius_p;if(e=a*a+l*l+o*o,(r=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-i-Math.sqrt(r))/(2*e),o=this.radius_g+n*o,a*=n,s*=n,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(r=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-i-Math.sqrt(r))/(2*e),o=this.radius_g+n*o,a*=n,s*=n,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},gl=1.340264,ml=-.081106,vl=893e-6,yl=.003796,Cc=Math.sqrt(3)/2,VE={init:function(){this.es=0,this.long0=this.long0!==void 0?this.long0:0},forward:function(t){var e=Oe(t.x-this.long0),i=t.y,r=Math.asin(Cc*Math.sin(i)),n=r*r,o=n*n*n;return t.x=e*Math.cos(r)/(Cc*(gl+3*ml*n+o*(7*vl+9*yl*n))),t.y=r*(gl+ml*n+o*(vl+yl*n)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,i,r,n,o=t.y;for(n=0;n<12&&(o-=r=(o*(gl+ml*(e=o*o)+(i=e*e*e)*(vl+yl*e))-t.y)/(gl+3*ml*e+i*(7*vl+9*yl*e)),!(Math.abs(r)<1e-9));++n);return i=(e=o*o)*e*e,t.x=Cc*t.x*(gl+3*ml*e+i*(7*vl+9*yl*e))/Math.cos(o),t.y=Math.asin(Math.sin(o)/Cc),t.x=Oe(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]},_u=1e-10;function GE(t){var e,i,r,n=Oe(t.x-(this.long0||0)),o=t.y;return e=this.am1+this.m1-Rs(o,i=Math.sin(o),r=Math.cos(o),this.en),i=r*n/(e*Math.sqrt(1-this.es*i*i)),t.x=e*Math.sin(i),t.y=this.am1-e*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function HE(t){var e,i,r,n;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,i=Ni(t.x,t.y=this.am1-t.y),n=Yv(this.am1+this.m1-i,this.es,this.en),(e=Math.abs(n))<_e)e=Math.sin(n),r=i*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(n);else{if(!(Math.abs(e-_e)<=_u))throw new Error;r=0}return t.x=Oe(r+(this.long0||0)),t.y=go(n),t}function UE(t){var e,i,r=Oe(t.x-(this.long0||0)),n=t.y;return i=this.cphi1+this.phi1-n,Math.abs(i)>_u?(t.x=i*Math.sin(e=r*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function WE(t){var e,i;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var r=Ni(t.x,t.y=this.cphi1-t.y);if(i=this.cphi1+this.phi1-r,Math.abs(i)>_e)throw new Error;return e=Math.abs(Math.abs(i)-_e)<=_u?0:r*Math.atan2(t.x,t.y)/Math.cos(i),t.x=Oe(e+(this.long0||0)),t.y=go(i),t}var YE={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<_u)throw new Error;this.es?(this.en=Wv(this.es),this.m1=Rs(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=HE,this.forward=GE):(Math.abs(this.phi1)+_u>=_e?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=WE,this.forward=UE)},names:["bonne","Bonne (Werner lat_1=90)"]};Oi.defaultDatum="WGS84",Oi.Proj=tn,Oi.WGS84=new Oi.Proj("WGS84"),Oi.Point=ls,Oi.toPoint=F2,Oi.defs=Ti,Oi.nadgrid=function(t,e){var i=new DataView(e),r=function(s){var l=s.getInt32(8,!1);return l===11?!1:(l=s.getInt32(8,!0),!0)}(i),n=function(s,l){return{nFields:s.getInt32(8,l),nSubgridFields:s.getInt32(24,l),nSubgrids:s.getInt32(40,l),shiftType:sm(s,56,64).trim(),fromSemiMajorAxis:s.getFloat64(120,l),fromSemiMinorAxis:s.getFloat64(136,l),toSemiMajorAxis:s.getFloat64(152,l),toSemiMinorAxis:s.getFloat64(168,l)}}(i,r),o=function(s,l,u){for(var c=176,h=[],d=0;d<l.nSubgrids;d++){var p=tE(s,c,u),f=iE(s,c,p,u),g=Math.round(1+(p.upperLongitude-p.lowerLongitude)/p.longitudeInterval),_=Math.round(1+(p.upperLatitude-p.lowerLatitude)/p.latitudeInterval);h.push({ll:[is(p.lowerLongitude),is(p.lowerLatitude)],del:[is(p.longitudeInterval),is(p.latitudeInterval)],lim:[g,_],count:p.gridNodeCount,cvs:eE(f)}),c+=176+16*p.gridNodeCount}return h}(i,n,r),a={header:n,subgrids:o};return R2[t]=a,a},Oi.transform=Hh,Oi.mgrs=oE,Oi.version="__VERSION__",function(t){t.Proj.projections.add(nh),t.Proj.projections.add(oh),t.Proj.projections.add(uE),t.Proj.projections.add(cE),t.Proj.projections.add(hE),t.Proj.projections.add(dE),t.Proj.projections.add(pE),t.Proj.projections.add(fE),t.Proj.projections.add(gE),t.Proj.projections.add(mE),t.Proj.projections.add(SE),t.Proj.projections.add(CE),t.Proj.projections.add(ME),t.Proj.projections.add(kE),t.Proj.projections.add(TE),t.Proj.projections.add(EE),t.Proj.projections.add(LE),t.Proj.projections.add(IE),t.Proj.projections.add(PE),t.Proj.projections.add(RE),t.Proj.projections.add(qE),t.Proj.projections.add(AE),t.Proj.projections.add(FE),t.Proj.projections.add(OE),t.Proj.projections.add(zE),t.Proj.projections.add(BE),t.Proj.projections.add(jE),t.Proj.projections.add(NE),t.Proj.projections.add($E),t.Proj.projections.add(VE),t.Proj.projections.add(YE)}(Oi);class lt{static prjMap=new Map;static tileGridMap=new Map;static EPSG4326Extent=[-180,-90,180,90];static EPSG3857Extent=[-2003750834e-2,-2003750834e-2,2003750834e-2,2003750834e-2];static getProjection(e){const i="EPSG:3857";let r;if(e&&e.epsg){if(r=lt.prjMap.get(e.epsg),r)return r;if(r=ut(e.epsg),!r){if(!e.proj4)throw Error("缺少Prj4j内容，无法注册投影！");Oi.defs(e.epsg,e.proj4),function(n){const o=Object.keys(n.defs),a=o.length;let s,l;for(s=0;s<a;++s){const u=o[s];if(!Zc(u)){const c=n.defs(u);let h=c.units;h||c.projName!=="longlat"||(h="degrees"),eu(new Qr({code:u,axisOrientation:c.axis,metersPerUnit:c.to_meter,units:h}))}}for(s=0;s<a;++s){const u=o[s],c=Zc(u);for(l=0;l<a;++l){const h=o[l],d=Zc(h);if(!Qc(u,h))if(n.defs[u]===n.defs[h])Yf([c,d]);else{const p=n(u,h);o5(c,d,dy(c,d,p.forward),dy(d,c,p.inverse))}}}}(Oi),r=new Qr({code:e.epsg,extent:e.prjExtent})}r&&lt.prjMap.set(e.epsg,r)}else r=lt.prjMap.get(i),r||(r=new Qr({code:i}),lt.prjMap.set(i,r));return r}static toLonLat(e,i){return lt.transformCoordinate(e,i,"EPSG:4326")}static fromLonLat(e,i){return lt.transformCoordinate(e,"EPSG:4326",i)}static fromLonLatCoordinate(e,i){return lt.transformCoordinate(e,"EPSG:4326",i)}static transformCoordinate(e,i,r){return Kn(e,i,r)}static getExtentFrom4326(e,i="EPSG:3857"){return lt.getExtentFromTransform(e,"EPSG:4326",i)}static transformExtent(e,i,r="EPSG:3857"){lt.getExtentFromTransform(e,i,r)}static getExtentFromTransform(e,i,r="EPSG:3857"){return bx(e,Cs(i,r))}static transformGeometry(e,i,r="EPSG:3857"){return e.transform(i,r)}static transformFeature(e,i,r="EPSG:3857"){const n=e.getGeometry().transform(i,r);if(e.setGeometry)return e.setGeometry(n),e;if(n){const o=new kr(n);return o.setProperties(e.getProperties()),o}}static transformFeatures(e,i,r="EPSG:3857"){const n=[];return e&&e.forEach(o=>{const a=this.transformFeature(o,i,r);a&&n.push(a)}),n}static createWMTSTileGrid(e){const i=e.rule,r=lt.tileGridMap.get(i);if(r)return r;const n=[],o=[];let a=10;for(let c in e.resolutions){const h=Number(c);n[h]=c,o[h]=e.resolutions[c],a=Math.min(h,a)}if(a>0)for(let c=a;c>0;c--){let h=c-1;n[h]==null&&o[c]!=null&&(n[h]=h.toString(),o[h]=2*o[c])}let s=256;s=Array.isArray(e.tileSize)?e.tileSize[0]:e.tileSize;const l={origin:e.origin,extent:e.extent,resolutions:o,matrixIds:n,tileSize:s},u=new Mk(l);return lt.tileGridMap.set(i,u),u}static getTDTTileGrid(e=!0){const i=e?"W":"C",r=lt.tileGridMap.get(i);if(r)return r;const n=e?lt.EPSG3857Extent:lt.EPSG4326Extent,o=tt(n)/256,a={};for(var s=1;s<22;++s)a[s.toString()]=o/Math.pow(2,s);const l={rule:i,origin:pr(n),resolutions:a,tileSize:[256,256]},u=lt.createWMTSTileGrid(l);return u&&lt.tileGridMap.set(i,u),u}}class KE{tdtKeys=[];xmap;constructor(e,i){e&&(this.xmap=e,this.tdtKeys=[...i])}setTDTKeys(e){e&&e.length>0&&(this.tdtKeys=[...this.tdtKeys,...e])}addWMTSLayerByOptions2(e,i,r,n){const o=Gr(),a="grid",s=r.layer;r.crossOrigin="anonymous",i.source=new Ia(r);const l={lyrID:o,lyrName:r.layer,lyrType:a};i.properties?i.properties=om(i.properties,l):i.properties=l;const u=new ci(i);e.map.addLayer(u);const c={id:o,name:s,alias:n,minZoom:i.minZoom??1,maxZoom:i.maxZoom??24,visible:i.visible??!0,opacity:i.opacity??1,type:a};return e.registerLayer(u,c),u}addWMTSLayerByOptions(e,i,r){const n=Gr(),o="grid",a=i.layer;i.crossOrigin="anonymous",e.source=new Ia(i);const s={lyrID:n,lyrName:i.layer,lyrType:o};e.properties?e.properties=om(e.properties,s):e.properties=s;const l=new ci(e);this.xmap.map.addLayer(l);const u={id:n,name:a,alias:r,minZoom:e.minZoom??1,maxZoom:e.maxZoom??24,visible:e.visible??!0,opacity:e.opacity??1,type:o};return this.xmap.registerLayer(l,u),l}addWMTSLayer2(e,i,r,n,o,a,s,l,u){const c=a??this.xmap.map.getView().getProjection(),h=o??lt.getTDTTileGrid(!0),d=Gr(),p="grid",f=new ci({opacity:1,source:new Ia({crossOrigin:"anonymous",layer:i,matrixSet:r,format:"image/png",projection:c,url:n,tileGrid:h,style:s??"default",wrapX:!0}),minZoom:l,maxZoom:u,properties:{lyrID:d,lyrName:i,lyrType:p}});this.xmap.map.addLayer(f);const g={id:d,name:i,alias:e,minZoom:l,maxZoom:u,visible:!0,opacity:1,type:p};return this.xmap.registerLayer(f,g),f}addWMTSLayer(e,i,r,n,o,a,s="KVP",l="image/png"){const u=o??this.xmap.map.getView().getProjection(),c=n??lt.getTDTTileGrid(!0),h=Gr(),d="grid",p=new ci({opacity:1,source:new Ia({crossOrigin:"anonymous",layer:e,matrixSet:i,format:l,projection:u,requestEncoding:s,url:r,tileGrid:c,style:a??"default",wrapX:!0}),properties:{lyrID:h,lyrName:e,lyrType:d}});this.xmap.map.addLayer(p);const f={id:h,name:e,minZoom:1,maxZoom:24,visible:!0,opacity:1,type:d};return this.xmap.registerLayer(p,f),p}addWMTSLayerSelf(e,i){const r=e.prjInfo,n=lt.getProjection(r),o=e.tileSchema,a=lt.createWMTSTileGrid(o),s={minZoom:e.minlevel,maxZoom:e.maxlevel,opacity:1,visible:!0,properties:{bounds:e.bounds,center:e.center,level:e.level}},l={tileGrid:a,projection:n,layer:i,style:e.style||"default",matrixSet:o.rule,url:e.tileUrl,format:"image/png"},u=this.addWMTSLayerByOptions(s,l);return this.xmap.map&&e.bounds&&this.xmap.zoomToExtent(e.bounds),u}getTDTAlias(e){let i="";switch(e){case"vec_c":case"vec_w":case"img_c":case"img_w":i="矢量";break;case"cva_c":case"cva_w":i="矢量注记";break;case"cia_c":case"cia_w":i="影像注记";break;case"ter_c":case"ter_w":i="地形";break;case"cta_c":case"cta_w":i="地形注记"}return i}addTDTLayer(e="img_c",i){if(!this.xmap||!this.xmap.map)throw Error("初始的XMap地图对象不能为空");const r=this.xmap.map;if(e.indexOf("_")<0)return;const n=e.split("_"),o=n[0],a=n[1],s=a==="w"||a==="W",l=lt.getTDTTileGrid(s),u=s?"EPSG:3857":"EPSG:4326",c=this.getTDTUrls(e,this.tdtKeys);let h="grid";(o==="cva"||o==="cia")&&(h="symbol");const d=e,p=new ci({source:new Ia({crossOrigin:"anonymous",urls:c,layer:o,style:"default",matrixSet:a,format:"tiles",wrapX:!0,projection:u,tileGrid:l}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:d,lyrName:e,lyrType:h,lyrGroup:"天地图"}});r.addLayer(p);const f={id:d,name:e,alias:`${i}[${e}]`,group:"天地图",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:h};return this.xmap.registerLayer(p,f),p}addTDTLayerOnly(e,i){if(!this.xmap||!this.xmap.map)throw Error("必须传入XMap地图对象");const r=this.xmap;if(e.indexOf("_")<0)return;const n=e.split("_"),o=n[0],a=n[1],s=a==="w"||a==="W",l=lt.getTDTTileGrid(s),u=s?"EPSG:3857":"EPSG:4326",c=this.getTDTUrls(e,this.tdtKeys);let h="grid";(o==="cva"||o==="cia")&&(h="symbol");const d=Gr(),p=new ci({source:new Ia({crossOrigin:"anonymous",urls:c,layer:o,style:"default",matrixSet:a,format:"tiles",wrapX:!0,projection:u,tileGrid:l}),minZoom:1,maxZoom:18,properties:{lyrID:d,lyrName:e,lyrType:h,lyrGroup:"天地图"}});return r.map.addLayer(p),p}getTDTUrls(e,i){const r=[],n=i.length;if(n===0)return r;let o=i[0];for(let a=0;a<8;a++){n>1&&(o=i[E2(0,n-1)]);const s=`https://t${a}.tianditu.gov.cn/${e}/wmts?tk=${o}`;r.push(s)}return r}addWMTSDebugLayer(e){const i=e.getSource();return this.addTileDebugLayer(i.getTileGrid(),i.getProjection())}addTileDebugLayer(e,i){if(!this.xmap||!this.xmap.map)return;const r=new ci({source:new oT({projection:i,tileGrid:e}),properties:{lyrID:"debugLayer",lyrName:"debugLayer",lyrType:"grid"}});return this.xmap.map.addLayer(r),r}addLocalTDTLayerXYZ(e,i){e&&i.forEach(r=>{this.addSingleLocalTDTLayerXYZ(e,r)})}addSingleLocalTDTLayerXYZ(e,i){const r=e;if(r){const n=i.toLocaleLowerCase(),o=this.getTDTAlias(n),a=n.split("_"),s=a[0],l=a[1],u=ut(l==="w"||l==="W"?"EPSG:3857":"EPSG:4326");let c="grid";(s==="cva"||s==="cia")&&(c="symbol");const h=Gr(),d=r.replace("{layerName}",n),p=new ci({source:new Gs({url:d,projection:u}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:h,lyrName:n,lyrType:c,lyrGroup:"天地图"}});this.xmap.map.addLayer(p);const f={id:h,name:n,alias:`${o}[${n}]`,group:"天地图",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:c};this.xmap.registerLayer(p,f)}}}const XE={img:"https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer",vec:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",ter:"https://server.arcgisonline.com/arcgis/rest/services/services/World_Physical_Ma/MapServer"},ZE={img:"ArcGIS影像",vec:"ArcGIS矢量",ter:"ArcGIS地形"};class QE{static createLayer(e){const i="arcgis",r=e.toLocaleLowerCase(),n=XE[r];if(!n)return;const o=ZE[r],a=`${i}_${r}`,s="grid";return{layer:new ci({source:new nT({url:n,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:s,lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:0,maxZoom:23,visible:!0,opacity:1,type:s}}}}const JE={img:"百度影像",vec:"百度矢量"};class e3{static createLayer(e){const i="baidu",r=e.toLocaleLowerCase(),n=JE[r];if(!n)return;const o=`${i}_${r}`;return{layer:new ci({source:new Ho({key:e,projection:cu}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:o,lyrName:o,lyrType:"grid",lyrGroup:i}}),layerItem:{id:o,name:o,alias:n,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const t3={img:"https://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",vec:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}",ter:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=8&x={x}&y={y}&z={z}"},i3={img:"高德影像",vec:"高德矢量",ter:"高德道路"};class r3{static createLayer(e){const i="google",r=e.toLocaleLowerCase(),n=t3[r];if(!n)return;const o=i3[r],a=`${i}_${r}`,s="grid";return{layer:new ci({source:new Gs({url:n,wrapX:!1,projection:"EPSG:4326"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:s,lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:s}}}}const n3={img:"https://www.google.com.hk/maps/vt?lyrs=s&x={x}&y={y}&z={z}",vec:"https://www.google.com.hk/maps/vt?lyrs=m&x={x}&y={y}&z={z}",cva:"https://www.google.com.hk/maps/vt?lyrs=h&x={x}&y={y}&z={z}",ter:"https://www.google.com.hk/maps/vt?lyrs=t,r&x={x}&y={y}&z={z}",img_cia:"https://www.google.com.hk/maps/vt?lyrs=y&x={x}&y={y}&z={z}"},o3={img:"谷歌影像",vec:"谷歌矢量",cva:"谷歌注记",ter:"谷歌地形",img_cia:"谷歌影像+注记"};class a3{static createLayer(e){const i="google",r=e.toLocaleLowerCase(),n=n3[r];if(!n)return;const o=o3[r],a=`${i}_${r}`;return{layer:new ci({source:new Gs({url:n,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:"grid",lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const s3={img:"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw",vec:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw"},l3={img:"Mapbox影像",vec:"Mapbox矢量"};class u3{static createLayer(e){const i="mapbox",r=e.toLocaleLowerCase(),n=s3[r];if(!n)return;const o=l3[r],a=`${i}_${r}`;return{layer:new ci({source:new Gs({url:n,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:"grid",lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const c3={img:"https://p{1-3}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",vec:"https://rt{1-3}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&scene=0&version=347"},h3={img:"腾讯影像",vec:"腾讯矢量"};class d3{static createLayer(e){const i="qq",r=e.toLocaleLowerCase(),n=c3[r];if(!n)return;const o=h3[r],a=`${i}_${r}`;return{layer:new ci({source:new Gs({url:n,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:"grid",lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"}}}}const Iq=[{id:"OSM_VEC",label:"OSM矢量",type:"osm",img:"/img/basicimage/osm.png",layers:["osm"]},{id:"TDT_VEC",label:"天地图-矢量",type:"tdt",img:"/img/basicimage/tdt_vec.png",layers:["vec_w","cva_w"]},{id:"TDT_IMG",label:"天地图-影像",type:"tdt",img:"/img/basicimage/tdt_img.png",layers:["img_w","cia_w"]},{id:"TDT_TER",label:"天地图地形",type:"tdt",img:"/img/basicimage/tdt_ter_cta.png",layers:["ter_w","cta_w"]},{id:"ARCGIS_IMG",label:"ArcGIS影像",type:"arcgis",img:"/img/basicimage/arcgis_img.png",layers:["arcgis_img"]},{id:"ARCGIS_VEC",label:"ArcGIS矢量",type:"arcgis",img:"/img/basicimage/arcgis_vec.png",layers:["arcgis_vec"]},{id:"ARCGIS_TER",label:"ArcGIS地形",type:"arcgis",img:"/img/basicimage/arcgis_ter.png",layers:["arcgis_ter"]},{id:"Mapbox_VEC",label:"Mapbox矢量",type:"mapbox",img:"/img/basicimage/mapbox_vec.png",layers:["mapbox_vec"]},{id:"Mapbox_IMG",label:"Mapbox影像v9",type:"mapbox",img:"/img/basicimage/mapbox_img.png",layers:["mapbox_img"]},{id:"Google_VEC",label:"谷歌矢量",type:"google",img:"/img/basicimage/google_vec.png",layers:["google_vec"]},{id:"Google_IMG",label:"谷歌影像",type:"google",img:"/img/basicimage/google_img.png",layers:["google_img"]},{id:"Google_IMG_CIA",label:"谷歌影像+注记",type:"google",img:"/img/basicimage/google_img_cia.png",layers:["google_img_cia"]},{id:"Google_TER",label:"谷歌地形",type:"google",img:"/img/basicimage/google_ter.png",layers:["google_ter"]},{id:"Google_VEC_CVA",label:"谷歌注记",type:"google",img:"/img/basicimage/google_cva.png",layers:["google_cva"]},{id:"BING_VEC",label:"Bing矢量",type:"bing",img:"/img/basicimage/basic_bingimg.jpg",layers:["bing_vec"]},{id:"BING_IMG",label:"Bing影像",type:"bing",img:"/img/basicimage/basic_tdtimg.jpg",layers:["bing_img"]},{id:"GD_VEC",label:"高德矢量",type:"gaode",img:"/img/basicimage/gaode_vec.png",layers:["gaode_vec"]},{id:"GD_IMG",label:"高德影像",type:"gaode",img:"/img/basicimage/gaode_img.png",layers:["gaode_img"]},{id:"QQ_VEC",label:"腾讯矢量",type:"qq",img:"/img/basicimage/qq_vec.png",layers:["qq_vec"]},{id:"QQ_IMG",label:"腾讯影像",type:"qq",img:"/img/basicimage/qq_img.png",layers:["qq_img"]},{id:"BAIDU_VEC",label:"百度矢量",type:"baidu",img:"/img/basicimage/baidu_vec.png",layers:["baidu_vec"]},{id:"BAIDU_IMG",label:"百度影像",type:"baidu",img:"/img/basicimage/baidu_img.png",layers:["baidu_img"]}];class ba{target;_TDTKeys=["1eafc8f4338343058a4876033f55b7b6","587e4b30b61cde5c55680135140dc980","fac3d52ef3ed4f1d18a79a9776dcf4f4","5f2cd4464e3dff59e381d6716cebbc80","f7b2c7226b59e6578deb7ae495d34526","fdcb5a9013aab146c4d9d6339359cc3e","1eafc8f4338343058a4876033f55b7b6"];map;mapEventBus=Bh;isMainSync=!1;digits=4;defaultHomeView={zoom:5,center:[116.46229441189399,40.24876149]};mapGroup="map";_targetContainer="";postionStatusHTMLElement;postionStatus={postion:"",zoom:"",center:"",epsgInfo:"EPSG:3857"};currentPosition;positionProjection=ut("EPSG:4326");layerManager;isInitSuccess=!1;_WMTSTool;InteractionsDiction=new Map;ControlsDiction=new Map;isInternet=!0;static initByMapConfig(e){const i=new ba(e.id,e.group,e.hasLayerManager);return e.projInfo&&(e.viewOptions.Projection=lt.getProjection(e.projInfo)),i.initMapView(e.viewOptions),e.layers&&(e.isInternet===!1&&(i.isInternet=!1),e.layers.forEach(r=>{i.isInternet?i.addOnlineLayer(r):i.addOnlineLayer(r,e.tdtXYZLocalURL)})),e.controls&&e.controls.forEach(r=>{i.addDefaultControl(r)}),e.interactions&&e.interactions.forEach(r=>{i.addDefaultInteraction(r)}),i}constructor(e="map",i="map",r=!0){this.target=e,this.mapGroup=i;const n=document.getElementById(e);this._targetContainer=e+"_Container",n&&(this.isInitSuccess=!0),this.map=new Ns({target:this.isInitSuccess?this.target:void 0}),this.map.on("moveend",this.onMoveEnd.bind(this)),r&&(this.layerManager=new zT(this,this.target)),this.postionStatusHTMLElement=OT("div","ol-mouse-position xmap-position",n),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.on("moveend",this.onMapMoveEndHandler.bind(this))}mapPrj;pointerMoveHandler(e){this.currentPosition=[...e.coordinate];let i=e.coordinate;const r=this.MapView.getProjection();i=lt.toLonLat(i,r);const n=uy(i,this.digits);this.postionStatus.postion=`鼠标位置：${n}`,this.refreshPostionStatus()}onMapMoveEndHandler(e){const i=this.MapView,r=i.getZoom();this.postionStatus.zoom=`级别：${r.toFixed(1)}`;let n=i.getCenter();n=lt.toLonLat(n,i.getProjection());const o=uy(n,this.digits);this.postionStatus.center=`中心点：${o}`,this.refreshPostionStatus()}refreshPostionStatus(){this.postionStatusHTMLElement&&(this.postionStatusHTMLElement.innerHTML=`${this.postionStatus.epsgInfo} ${this.postionStatus.zoom} ${this.postionStatus.center} ${this.postionStatus.postion}`)}get targetContainer(){return this._targetContainer}get CurrentPosition(){return this.currentPosition}get WMTSTool(){return this._WMTSTool||(this._WMTSTool=new KE(this,this._TDTKeys)),this._WMTSTool}initMapView(e){this.isInitSuccess||this.map.setTarget(this.target),e.projection||(e.projection="EPSG:3857"),e.center&&(this.defaultHomeView.center=[...e.center]),e.zoom&&(this.defaultHomeView.zoom=e.zoom),e.center=lt.fromLonLat(e.center,e.projection),$l(e.projection)||e.projection===void 0?this.postionStatus.epsgInfo=e.projection??"EPSG:3857":this.postionStatus.epsgInfo=e.projection.getCode();const i=new Ki(e);return this.setView(i),i}get TDTKey(){const e=E2(0,this._TDTKeys.length-1);return this._TDTKeys[e]}set TDTKeys(e){e&&e.length>0&&this._TDTKeys.push(...e)}addOnlineLayer(e,i=""){const r=e.toLocaleLowerCase();if(r.endsWith("_c")||r.endsWith("_w")){const n=this.WMTSTool.getTDTAlias(r);n&&(this.isInternet?this.WMTSTool.addTDTLayer(r,n):i&&this.WMTSTool.addSingleLocalTDTLayerXYZ(i,r))}else{if(!this.isInternet)throw Error("未联网，无法加载在线图层！");if(r==="osm"){const n="grid",o=new ci({source:new c1,properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:r,lyrName:"osm",lyrType:n,lyrGroup:"osm"}});this.map.addLayer(o);const a={id:r,name:r,alias:"",group:r,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"};this.registerLayer(o,a)}else{const n=r.indexOf("_"),o=r.substring(0,n),a=r.substring(n+1);let s;switch(o){case"arcgis":s=QE.createLayer(a);break;case"gaode":s=r3.createLayer(a);break;case"google":s=a3.createLayer(a);break;case"baidu":s=e3.createLayer(a);break;case"mapbox":s=u3.createLayer(a);break;case"qq":s=d3.createLayer(a)}if(s){const{layer:l,layerItem:u}=s;this.map.addLayer(l),this.registerLayer(l,u)}}}}get LayerManager(){return this.layerManager}removeLayer(e){return this.map.removeLayer(e)}changeLayerOrder(e,i){const r=this.map.getLayers(),n=r.removeAt(e);n&&r.insertAt(i,n)}addDefaultControl(e){const i=e.key.toLocaleLowerCase(),r=this.DefaultControlKeys[i];if(r)switch(r){case"target":const n=new Wt({color:"red",width:2}),o=[new qt({image:new fo({points:4,radius:11,radius2:0,stroke:new Wt({color:"#fff",width:3})})}),new qt({image:new fo({points:4,radius:11,radius2:0,stroke:n})})],a=new MT({style:o,composite:""});e.options.visible===!1&&a.setVisible(!1),this.addControlExt(r,a);break;case"overview":const s=this.map.getLayers(),l=s.getArray(),u=[];e.options?.layers&&e.options.layers.forEach(f=>{if($l(f)){const g=s.get(f);g&&u.push(g)}else M1(f)&&f<l.length&&u.push(l[f])}),u.length===0&&u.push(new ci({source:new c1}));const c=this.MapView.getProjection(),h=new xT({layers:u,minZoom:1,maxZoom:12,rotation:!0,align:"right",projection:c});e.options?.align&&h.setPosition(e.options?.align),this.addControlExt(r,h);break;case"scale":const d=new wT;this.addControlExt(r,d);break;case"scaleline":const p=new ET;this.addControlExt(r,p)}}addDefaultInteraction(e){if(e.key==="FishEyeClip"){const i=this.map.getLayers(),r=i.getArray(),n=e.options.radius??100,o=[];e.options?.layers&&e.options.layers.forEach(s=>{if($l(s)){const l=i.get(s);l&&o.push(l)}else M1(s)&&s<r.length&&o.push(r[s])});const a=new kT({radius:n,layers:o});e.options?.active===!1&&a.setActive(!1),this.addInteractionExt(e.key,a)}}dispose(){this.layerManager&&(this.layerManager.clearLayers(),this.layerManager=void 0),this.swipe&&(this.swipe.unload(),this.swipe=void 0),this.clearControlExt(),this.clearInteractionExt(),this.map&&(this.MapView.un("change:resolution",this.onResolutionChanged.bind(this)),this.map.un("moveend",this.onMoveEnd.bind(this)),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.un("moveend",this.onMapMoveEndHandler.bind(this)),this.map.dispose(),this.map=void 0)}setView(e){const i=this.map.getView();i&&i.un("change:resolution",this.onResolutionChanged.bind(this)),e&&(this.map.setView(e),e.on("change:resolution",this.onResolutionChanged.bind(this)))}get MapView(){return this.map.getView()}registerLayer(e,i){this.layerManager&&this.layerManager.registerLayer(e,i)}zoomTo(e,i){if(this.map){const r=this.map.getView(),n=r.getProjection();let o=e;i&&(o=lt.getExtentFromTransform(e,i,n));const a=r.getResolutionForExtent(o,this.map.getSize());r.setResolution(a),r.setCenter(Ui(o))}}zoomToExtent(e){const i=this.MapView,r=i?.getProjection();if(r){const n=lt.getExtentFrom4326(e,r),o=i.getResolutionForExtent(n,this.map.getSize());i.setResolution(o);const a=Ui(n);i.setCenter(a)}}zoomToCenter(e,i){const r=this.MapView;if(e){const n=lt.fromLonLatCoordinate(e,r.getProjection());r.setCenter(n),i!=null&&i>0&&r.setZoom(i)}}goHomeView(){this.zoomToCenter(this.defaultHomeView.center,this.defaultHomeView.zoom)}newEvtArgs(e,i=null){const r=new $v(this.target,this.mapGroup);return r.data=e,r.target=i,r}enableMapSyncView(){this.mapEventBus.eventOn(kt.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOn(kt.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}disableMapSyncView(){this.mapEventBus.eventOff(kt.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOff(kt.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}mapSyncView(e){if(e.mapGroup===this.mapGroup&&e.mapID!=this.target){const{zoom:i,x:r,y:n}=e.data;this.isMainSync=!0,this.map.un("moveend",this.onMoveEnd.bind(this));const o=this.map.getView();o.setZoom(i),o.setCenter([r,n]),setTimeout(()=>{const a=this.newEvtArgs();this.mapEventBus.eventEmit(kt.MAP_SYNC_VIEW_END,a)},200)}}mapSyncViewEnd(e){e.mapGroup===this.mapGroup&&(e.mapID!=this.target?this.isMainSync=!1:(this.isMainSync=!1,this.map.on("moveend",this.onMoveEnd.bind(this))))}onMoveEnd(e){if(!this.isMainSync){this.isMainSync=!0;const i=e.map.getView(),r=i.getZoom(),[n,o]=i.getCenter(),a=this.newEvtArgs({zoom:r,x:n,y:o},null);this.mapEventBus.eventEmit(kt.MAP_SYNC_VIEW,a)}}onResolutionChanged(e){const i=this.map.getView();if(i){let r=i.getZoom();const n=this.newEvtArgs(r,null);this.mapEventBus.eventEmit(kt.MAP_ZOOM_CHANGED,n),this.postionStatus.zoom=`级别：${r.toFixed(1)}`,this.refreshPostionStatus()}}swipe;get RollSwipe(){if(!this.swipe){const e=document.getElementById(this.target);this.swipe=new nm(e,this)}return this.swipe}DefaultInteractionKeys={FishEyeClip:"FishEyeClip"};addInteractionExt(e,i){return!(!i||!e||this.InteractionsDiction.has(e))&&(this.map.addInteraction(i),this.InteractionsDiction.set(e,i),!0)}containsInteractionExt(e){return this.InteractionsDiction.has(e)}getInteractionExt(e){return this.InteractionsDiction.get(e)}removeInteractionExt(e){if(this.InteractionsDiction.has(e)){const i=this.InteractionsDiction.get(e);this.map.removeInteraction(i)}}clearInteractionExt(){this.InteractionsDiction.size>0&&(this.InteractionsDiction.forEach((e,i)=>{this.map.removeInteraction(e)}),this.InteractionsDiction.clear())}DefaultControlKeys={overview:"overview",target:"target",scale:"scale",scaleline:"scaleline"};addControlExt(e,i){return!(!i||!e||this.ControlsDiction.has(e))&&(this.map.addControl(i),this.ControlsDiction.set(e,i),!0)}containsControlExt(e){return this.ControlsDiction.has(e)}getControlExt(e){return this.ControlsDiction.get(e)}removeControlExt(e){if(this.ControlsDiction.has(e)){const i=this.ControlsDiction.get(e);this.map.removeControl(i)}}clearControlExt(){this.ControlsDiction.size>0&&(this.ControlsDiction.forEach((e,i)=>{this.map.removeControl(e)}),this.ControlsDiction.clear())}}class G2{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=kr,this.supportedMediaTypes=null}getReadOptions(e,i){if(i){let r=i.dataProjection?ut(i.dataProjection):this.readProjection(e);i.extent&&r&&r.getUnits()==="tile-pixels"&&(r=ut(r),r.setWorldExtent(i.extent)),i={dataProjection:r,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Ye()}readFeature(e,i){return Ye()}readFeatures(e,i){return Ye()}readGeometry(e,i){return Ye()}readProjection(e){return Ye()}writeFeature(e,i){return Ye()}writeFeatures(e,i){return Ye()}writeGeometry(e,i){return Ye()}}function Td(t,e,i){const r=i?ut(i.featureProjection):null,n=i?ut(i.dataProjection):null;let o=t;if(r&&n&&!en(r,n)){e&&(o=t.clone());const a=e?r:n,s=e?n:r;a.getUnits()==="tile-pixels"?o.transform(a,s):o.applyTransform(Cs(a,s))}if(e&&i&&i.decimals!==void 0){const a=Math.pow(10,i.decimals),s=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*a)/a;return l};o===t&&(o=t.clone()),o.applyTransform(s)}return o}const p3={Point:hr,LineString:ir,Polygon:Wi,MultiPoint:Hs,MultiLineString:la,MultiPolygon:ua};function H2(t,e){const i=t.geometry;if(!i)return[];if(Array.isArray(i))return i.map(o=>H2({...t,geometry:o})).flat();const r=i.type==="MultiPolygon"?"Polygon":i.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const n=i.layout.length;return Td(new wi(r,r==="Polygon"?function(o,a,s){return Array.isArray(a[0])?(Yx(o,0,a,s)||tg(o=o.slice(),0,a,s),o):(_v(o,0,a,s)||Th(o=o.slice(),0,a,s),o)}(i.flatCoordinates,i.ends,n):i.flatCoordinates,i.ends?.flat(),n,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function lm(t,e){if(!t)return null;if(Array.isArray(t)){const i=t.map(r=>lm(r,e));return new uu(i)}return Td(new p3[t.type](t.flatCoordinates,t.layout,t.ends),!1,e)}class f3 extends G2{constructor(){super()}getType(){return"json"}readFeature(e,i){return this.readFeatureFromObject(Mc(e),this.getReadOptions(e,i))}readFeatures(e,i){return this.readFeaturesFromObject(Mc(e),this.getReadOptions(e,i))}readFeatureFromObject(e,i){return Ye()}readFeaturesFromObject(e,i){return Ye()}readGeometry(e,i){return this.readGeometryFromObject(Mc(e),this.getReadOptions(e,i))}readGeometryFromObject(e,i){return Ye()}readProjection(e){return this.readProjectionFromObject(Mc(e))}readProjectionFromObject(e){return Ye()}writeFeature(e,i){return JSON.stringify(this.writeFeatureObject(e,i))}writeFeatureObject(e,i){return Ye()}writeFeatures(e,i){return JSON.stringify(this.writeFeaturesObject(e,i))}writeFeaturesObject(e,i){return Ye()}writeGeometry(e,i){return JSON.stringify(this.writeGeometryObject(e,i))}writeGeometryObject(e,i){return Ye()}}function Mc(t){return typeof t=="string"?JSON.parse(t)||null:t!==null?t:null}class K1 extends f3{constructor(e){e=e||{},super(),this.dataProjection=ut(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=ut(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,i){let r=null;r=e.type==="Feature"?e:{type:"Feature",geometry:e,properties:null};const n=um(r.geometry);if(this.featureClass===wi)return H2({geometry:n,id:r.id,properties:r.properties},i);const o=new kr;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&o.setGeometryName(r.geometry_name),o.setGeometry(lm(n,i)),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}readFeaturesFromObject(e,i){let r=null;if(e.type==="FeatureCollection"){r=[];const n=e.features;for(let o=0,a=n.length;o<a;++o){const s=this.readFeatureFromObject(n[o],i);s&&r.push(s)}}else r=[this.readFeatureFromObject(e,i)];return r.flat()}readGeometryFromObject(e,i){return function(r,n){const o=um(r);return lm(o,n)}(e,i)}readProjectionFromObject(e){const i=e.crs;let r;if(i)if(i.type=="name")r=ut(i.properties.name);else{if(i.type!=="EPSG")throw new Error("Unknown SRS type");r=ut("EPSG:"+i.properties.code)}else r=this.dataProjection;return r}writeFeatureObject(e,i){i=this.adaptOptions(i);const r={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(r.id=n),!e.hasProperties())return r;const o=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=cm(a,i),delete o[e.getGeometryName()]),po(o)||(r.properties=o),r}writeFeaturesObject(e,i){i=this.adaptOptions(i);const r=[];for(let n=0,o=e.length;n<o;++n)r.push(this.writeFeatureObject(e[n],i));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,i){return cm(e,this.adaptOptions(i))}}function um(t,e){if(!t)return null;let i;switch(t.type){case"Point":i=function(r){const n=r.coordinates;return{type:"Point",flatCoordinates:n,layout:Ao(n.length)}}(t);break;case"LineString":i=function(r){const n=r.coordinates,o=n.flat();return{type:"LineString",flatCoordinates:o,ends:[o.length],layout:Ao(n[0]?.length||2)}}(t);break;case"Polygon":i=function(r){const n=r.coordinates,o=[],a=n[0]?.[0]?.length,s=iu(o,0,n,a);return{type:"Polygon",flatCoordinates:o,ends:s,layout:Ao(a)}}(t);break;case"MultiPoint":i=function(r){const n=r.coordinates;return{type:"MultiPoint",flatCoordinates:n.flat(),layout:Ao(n[0]?.length||2)}}(t);break;case"MultiLineString":i=function(r){const n=r.coordinates,o=n[0]?.[0]?.length||2,a=[],s=iu(a,0,n,o);return{type:"MultiLineString",flatCoordinates:a,ends:s,layout:Ao(o)}}(t);break;case"MultiPolygon":i=function(r){const n=r.coordinates,o=[],a=n[0]?.[0]?.[0].length||2,s=jx(o,0,n,a);return{type:"MultiPolygon",flatCoordinates:o,ends:s,layout:Ao(a)}}(t);break;case"GeometryCollection":i=function(r){return r.geometries.map(function(n){return um(n)})}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return i}function cm(t,e){const i=(t=Td(t,!0,e)).getType();let r;switch(i){case"Point":r=function(n){return{type:"Point",coordinates:n.getCoordinates()}}(t);break;case"LineString":r=function(n){return{type:"LineString",coordinates:n.getCoordinates()}}(t);break;case"Polygon":r=function(n,o){let a;return o&&(a=o.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(a)}}(t,e);break;case"MultiPoint":r=function(n){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(t);break;case"MultiLineString":r=function(n){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(t);break;case"MultiPolygon":r=function(n,o){let a;return o&&(a=o.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(a)}}(t,e);break;case"GeometryCollection":r=function(n,o){return o=Object.assign({},o),delete o.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(a){return cm(a,o)})}}(t,e);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return r}const hm=4294967296,X1=1/hm,Z1=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class g3{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,i,r=this.length){for(;this.pos<r;){const n=this.readVarint(),o=n>>3,a=this.pos;this.type=7&n,e(o,i,this),this.pos===a&&this.skip(n)}return i}readMessage(e,i){return this.readFields(e,i,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*hm;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*hm;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const i=this.buf;let r,n;return n=i[this.pos++],r=127&n,n<128?r:(n=i[this.pos++],r|=(127&n)<<7,n<128?r:(n=i[this.pos++],r|=(127&n)<<14,n<128?r:(n=i[this.pos++],r|=(127&n)<<21,n<128?r:(n=i[this.pos],r|=(15&n)<<28,function(o,a,s){const l=s.buf;let u,c;if(c=l[s.pos++],u=(112&c)>>4,c<128||(c=l[s.pos++],u|=(127&c)<<3,c<128)||(c=l[s.pos++],u|=(127&c)<<10,c<128)||(c=l[s.pos++],u|=(127&c)<<17,c<128)||(c=l[s.pos++],u|=(127&c)<<24,c<128)||(c=l[s.pos++],u|=(1&c)<<31,c<128))return m3(o,u,a);throw new Error("Expected varint not more than 10 bytes")}(r,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&Z1?Z1.decode(this.buf.subarray(i,e)):function(r,n,o){let a="",s=n;for(;s<o;){const l=r[s];let u,c,h,d=null,p=l>239?4:l>223?3:l>191?2:1;if(s+p>o)break;p===1?l<128&&(d=l):p===2?(u=r[s+1],(192&u)==128&&(d=(31&l)<<6|63&u,d<=127&&(d=null))):p===3?(u=r[s+1],c=r[s+2],(192&u)==128&&(192&c)==128&&(d=(15&l)<<12|(63&u)<<6|63&c,(d<=2047||d>=55296&&d<=57343)&&(d=null))):p===4&&(u=r[s+1],c=r[s+2],h=r[s+3],(192&u)==128&&(192&c)==128&&(192&h)==128&&(d=(15&l)<<18|(63&u)<<12|(63&c)<<6|63&h,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,p=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|1023&d),a+=String.fromCharCode(d),s+=p}return a}(this.buf,i,e)}readBytes(){const e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i}readPackedVarint(e=[],i){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(i));return e}readPackedSVarint(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const i=7&e;if(i===0)for(;this.buf[this.pos++]>127;);else if(i===2)this.pos=this.readVarint()+this.pos;else if(i===5)this.pos+=4;else{if(i!==1)throw new Error(`Unimplemented type: ${i}`);this.pos+=8}}writeTag(e,i){this.writeVarint(e<<3|i)}realloc(e){let i=this.length||16;for(;i<this.pos+e;)i*=2;if(i!==this.length){const r=new Uint8Array(i);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*X1),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*X1),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?function(i,r){let n,o;if(i>=0?(n=i%4294967296|0,o=i/4294967296|0):(n=~(-i%4294967296),o=~(-i/4294967296),4294967295^n?n=n+1|0:(n=0,o=o+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(a,s,l){l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos]=127&a}(n,0,r),function(a,s){const l=(7&a)<<4;s.buf[s.pos++]|=l|((a>>>=3)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a)))))}(o,r)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const i=this.pos;this.pos=function(n,o,a){for(let s,l,u=0;u<o.length;u++){if(s=o.charCodeAt(u),s>55295&&s<57344){if(!l){s>56319||u+1===o.length?(n[a++]=239,n[a++]=191,n[a++]=189):l=s;continue}if(s<56320){n[a++]=239,n[a++]=191,n[a++]=189,l=s;continue}s=l-55296<<10|s-56320|65536,l=null}else l&&(n[a++]=239,n[a++]=191,n[a++]=189,l=null);s<128?n[a++]=s:(s<2048?n[a++]=s>>6|192:(s<65536?n[a++]=s>>12|224:(n[a++]=s>>18|240,n[a++]=s>>12&63|128),n[a++]=s>>6&63|128),n[a++]=63&s|128)}return a}(this.buf,e,this.pos);const r=this.pos-i;r>=128&&Q1(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const i=e.length;this.writeVarint(i),this.realloc(i);for(let r=0;r<i;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,i){this.pos++;const r=this.pos;e(i,this);const n=this.pos-r;n>=128&&Q1(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n}writeMessage(e,i,r){this.writeTag(e,2),this.writeRawMessage(i,r)}writePackedVarint(e,i){i.length&&this.writeMessage(e,v3,i)}writePackedSVarint(e,i){i.length&&this.writeMessage(e,y3,i)}writePackedBoolean(e,i){i.length&&this.writeMessage(e,x3,i)}writePackedFloat(e,i){i.length&&this.writeMessage(e,_3,i)}writePackedDouble(e,i){i.length&&this.writeMessage(e,b3,i)}writePackedFixed32(e,i){i.length&&this.writeMessage(e,w3,i)}writePackedSFixed32(e,i){i.length&&this.writeMessage(e,S3,i)}writePackedFixed64(e,i){i.length&&this.writeMessage(e,C3,i)}writePackedSFixed64(e,i){i.length&&this.writeMessage(e,M3,i)}writeBytesField(e,i){this.writeTag(e,2),this.writeBytes(i)}writeFixed32Field(e,i){this.writeTag(e,5),this.writeFixed32(i)}writeSFixed32Field(e,i){this.writeTag(e,5),this.writeSFixed32(i)}writeFixed64Field(e,i){this.writeTag(e,1),this.writeFixed64(i)}writeSFixed64Field(e,i){this.writeTag(e,1),this.writeSFixed64(i)}writeVarintField(e,i){this.writeTag(e,0),this.writeVarint(i)}writeSVarintField(e,i){this.writeTag(e,0),this.writeSVarint(i)}writeStringField(e,i){this.writeTag(e,2),this.writeString(i)}writeFloatField(e,i){this.writeTag(e,5),this.writeFloat(i)}writeDoubleField(e,i){this.writeTag(e,1),this.writeDouble(i)}writeBooleanField(e,i){this.writeVarintField(e,+i)}}function m3(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Q1(t,e,i){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(let n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function v3(t,e){for(let i=0;i<t.length;i++)e.writeVarint(t[i])}function y3(t,e){for(let i=0;i<t.length;i++)e.writeSVarint(t[i])}function _3(t,e){for(let i=0;i<t.length;i++)e.writeFloat(t[i])}function b3(t,e){for(let i=0;i<t.length;i++)e.writeDouble(t[i])}function x3(t,e){for(let i=0;i<t.length;i++)e.writeBoolean(t[i])}function w3(t,e){for(let i=0;i<t.length;i++)e.writeFixed32(t[i])}function S3(t,e){for(let i=0;i<t.length;i++)e.writeSFixed32(t[i])}function C3(t,e){for(let i=0;i<t.length;i++)e.writeFixed64(t[i])}function M3(t,e){for(let i=0;i<t.length;i++)e.writeSFixed64(t[i])}class ah extends G2{constructor(e){super(),e=e||{},this.dataProjection=new Qr({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:wi,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,i,r,n){e.pos=i.geometry;const o=e.readVarint()+e.pos;let a=1,s=0,l=0,u=0,c=0,h=0;for(;e.pos<o;){if(!s){const d=e.readVarint();a=7&d,s=d>>3}if(s--,a===1||a===2)l+=e.readSVarint(),u+=e.readSVarint(),a===1&&c>h&&(n.push(c),h=c),r.push(l,u),c+=2;else{if(a!==7)throw new Error("Invalid command found in the PBF");c>h&&(r.push(r[h],r[h+1]),c+=2)}}c>h&&(n.push(c),h=c)}createFeature_(e,i,r){const n=i.type;if(n===0)return null;let o;const a=i.properties;let s;this.idProperty_?(s=a[this.idProperty_],delete a[this.idProperty_]):s=i.id,a[this.layerName_]=i.layer.name;const l=[],u=[];this.readRawGeometry_(e,i,l,u);const c=function(h,d){let p;return h===1?p=d===1?"Point":"MultiPoint":h===2?p=d===1?"LineString":"MultiLineString":h===3&&(p="Polygon"),p}(n,u.length);if(this.featureClass===wi)o=new this.featureClass(c,l,u,2,a,s),o.transform(r.dataProjection);else{let h;if(c=="Polygon"){const p=Kx(l,u);h=p.length>1?new ua(l,"XY",p):new Wi(l,"XY",u)}else h=c==="Point"?new hr(l,"XY"):c==="LineString"?new ir(l,"XY"):c==="MultiPoint"?new Hs(l,"XY"):c==="MultiLineString"?new la(l,"XY",u):null;o=new this.featureClass,this.geometryName_&&o.setGeometryName(this.geometryName_);const d=Td(h,!1,r);o.setGeometry(d),s!==void 0&&o.setId(s),o.setProperties(a,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,i){const r=this.layers_,n=ut((i=this.adaptOptions(i)).dataProjection);n.setWorldExtent(i.extent),i.dataProjection=n;const o=new g3(e),a=o.readFields(k3,{}),s=[];for(const l in a){if(r&&!r.includes(l))continue;const u=a[l],c=u?[0,0,u.extent,u.extent]:null;n.setExtent(c);for(let h=0,d=u.length;h<d;++h){const p=L3(o,u,h),f=this.createFeature_(o,p,i);f!==null&&s.push(f)}}return s}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function k3(t,e,i){if(t===3){const r={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(T3,r,n),r.length=r.features.length,r.length&&(e[r.name]=r)}}function T3(t,e,i){if(t===15)e.version=i.readVarint();else if(t===1)e.name=i.readString();else if(t===5)e.extent=i.readVarint();else if(t===2)e.features.push(i.pos);else if(t===3)e.keys.push(i.readString());else if(t===4){let r=null;const n=i.readVarint()+i.pos;for(;i.pos<n;)r=(t=i.readVarint()>>3)===1?i.readString():t===2?i.readFloat():t===3?i.readDouble():t===4?i.readVarint64():t===5?i.readVarint():t===6?i.readSVarint():t===7?i.readBoolean():null;e.values.push(r)}}function E3(t,e,i){if(t==1)e.id=i.readVarint();else if(t==2){const r=i.readVarint()+i.pos;for(;i.pos<r;){const n=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[n]=o}}else t==3?e.type=i.readVarint():t==4&&(e.geometry=i.pos)}function L3(t,e,i){t.pos=e.features[i];const r=t.readVarint()+t.pos,n={layer:e,type:0,properties:{}};return t.readFields(E3,n,r),n}const I3={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},J1={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class P3 extends Nw{constructor(e,i){super(e,i),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=[1,0,0,1,0,0],this.tileClipContexts_=null}drawTile(e,i,r,n,o,a,s,l){this.updateExecutorGroup_(e,i.pixelRatio,i.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,i),super.drawTile(e,i,r,n,o,a,s,l)}getTile(e,i,r,n){const o=this.getOrCreateTile(e,i,r,n);if(!o)return null;const a=n.viewState.resolution,s=n.viewHints;return(s[Ji]||s[Rr])&&o.wantedResolution||(o.wantedResolution=a),o}prepareFrame(e){const i=this.getLayer().getRevision();return this.renderedLayerRevision_!==i&&(this.renderedLayerRevision_=i,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,i,r){const n=this.getLayer(),o=n.getRevision(),a=n.getRenderOrder()||null,s=e.wantedResolution,l=e.getReplayState(n);if(!l.dirty&&l.renderedResolution===s&&l.renderedRevision==o&&l.renderedRenderOrder==a)return;const u=n.getSource(),c=!!n.getDeclutter(),h=u.getTileGrid(),d=u.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),p=u.getSourceTiles(i,r,e),f=Xe(n);delete e.hitDetectionImageData[f],e.executorGroups[f]=[],l.dirty=!1;for(let g=0,_=p.length;g<_;++g){const v=p[g];if(v.getState()!=Bt)continue;const b=v.tileCoord,m=h.getTileCoordExtent(b),y=qi(d,m),x=oo(y,n.getRenderBuffer()*s,this.tempExtent),C=Tn(m,y)?null:x,k=new y2(0,y,s,i),L=im(s,i),A=function(M,q){let P;const F=M.getStyleFunction()||n.getStyleFunction();if(F&&(P=F(M,s)),P){const j=this.renderFeature(M,L,P,k,c,q);l.dirty=l.dirty||j}},E=v.getFeatures();a&&a!==l.renderedRenderOrder&&E.sort(a);for(let M=0,q=E.length;M<q;++M){const P=E[M];C&&!Qt(C,P.getGeometry().getExtent())||A.call(this,P,M)}const I=k.finish(),T=n.getRenderMode()!=="vector"&&c&&p.length===1?null:y,R=new _2(T,s,i,u.getOverlaps(),I,n.getRenderBuffer(),!0);e.executorGroups[f].push(R)}l.renderedRevision=o,l.renderedRenderOrder=a,l.renderedResolution=s}forEachFeatureAtCoordinate(e,i,r,n,o){const a=i.viewState.resolution,s=i.viewState.rotation;r=r??0;const l=this.getLayer(),u=l.getSource().getTileGridForProjection(i.viewState.projection),c=bh([e]);oo(c,a*r,c);const h={},d=function(g,_,v){let b=g.getId();b===void 0&&(b=Xe(g));const m=h[b];if(m){if(m!==!0&&v<m.distanceSq){if(v===0)return h[b]=!0,o.splice(o.lastIndexOf(m),1),n(g,l,_);m.geometry=_,m.distanceSq=v}}else{if(v===0)return h[b]=!0,n(g,l,_);o.push(h[b]={feature:g,layer:l,geometry:_,distanceSq:v,callback:n})}},p=this.renderedTiles;let f;for(let g=0,_=p.length;!f&&g<_;++g){const v=p[g];if(!Qt(u.getTileCoordExtent(v.wrappedTileCoord),c))continue;const b=Xe(l),m=[v.executorGroups[b]],y=l.getDeclutter();m.some(x=>{const C=y?i.declutter[y].all().map(k=>k.value):null;for(let k=0,L=x.length;k<L;++k)if(f=x[k].forEachFeatureAtCoordinate(e,a,s,r,d,C),f)return!0})}return f}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((i,r)=>{const n=this.getLayer(),o=Xe(n),a=n.getSource(),s=this.renderedProjection,l=s.getExtent(),u=this.renderedResolution,c=a.getTileGridForProjection(s),h=ri(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(h,u);let p;for(let b=0,m=this.renderedTiles.length;b<m;++b)if(d.toString()===this.renderedTiles[b].tileCoord.toString()){if(p=this.renderedTiles[b],p.getState()===Bt){const y=c.getTileCoordExtent(p.tileCoord);a.getWrapX()&&s.canWrapX()&&!Lr(l,y)&&iv(h,s);break}p=void 0}if(!p||p.loadingSourceTiles>0)return void i([]);const f=pr(c.getTileCoordExtent(p.wrappedTileCoord)),g=[(h[0]-f[0])/u,(f[1]-h[1])/u],_=p.getSourceTiles().reduce(function(b,m){return b.concat(m.getFeatures())},[]);let v=p.hitDetectionImageData[o];if(!v){const b=si(c.getTileSize(c.getZForResolution(u,a.zDirection))),m=this.renderedRotation_;v=x2(b,[this.getRenderTransform(c.getTileCoordCenter(p.wrappedTileCoord),u,0,er,b[0]*er,b[1]*er,0)],_,n.getStyleFunction(),c.getTileCoordExtent(p.wrappedTileCoord),p.getReplayState(n).renderedResolution,m),p.hitDetectionImageData[o]=v}i(w2(g,_,v))})}getFeaturesInExtent(e){const i=[],r=this.getTileCache();if(r.getCount()===0)return i;const n=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=n.getZForResolution(this.renderedResolution),a={};return r.forEach(s=>{if(s.tileCoord[0]!==o||s.getState()!==Bt)return;const l=s.getSourceTiles();for(let u=0,c=l.length;u<c;++u){const h=l[u],d=h.getKey();if(d in a)continue;a[d]=!0;const p=h.tileCoord;if(Qt(e,n.getTileCoordExtent(p))){const f=h.getFeatures();if(f)for(let g=0,_=f.length;g<_;++g){const v=f[g],b=v.getGeometry();Qt(e,b.getExtent())&&i.push(v)}}}}),i}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,i){const r=this.context,n=r.globalAlpha;r.globalAlpha=i.opacity;const o=e.viewHints,a=!(o[Ji]||o[Rr]),s=this.renderedTiles;for(let l=0,u=s.length;l<u;++l){const c=s[l],h=c.executorGroups[Xe(this.getLayer())],d=this.getLayer().getDeclutter();if(h)for(let p=h.length-1;p>=0;--p)h[p].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(c,e),e.viewState.rotation,a,Nh,d?e.declutter[d]:void 0)}r.globalAlpha=n}renderDeferredInternal(e){const i=this.renderedTiles.reduce((o,a,s)=>(a.executorGroups[Xe(this.getLayer())].forEach(l=>o.push({executorGroup:l,index:s})),o),[]),r=i.map(({executorGroup:o})=>o.getDeferredZIndexContexts()),n={};for(let o=0,a=i.length;o<a;++o){const s=i[o].executorGroup.getDeferredZIndexContexts();for(const l in s)n[l]=!0}Object.keys(n).map(Number).sort(Xr).forEach(o=>{r.forEach((a,s)=>{a[o]&&(a[o].forEach(l=>{const{executorGroup:u,index:c}=i[s],h=u.getRenderedContext(),d=h.globalAlpha;h.globalAlpha=this.renderedOpacity_;const p=this.tileClipContexts_[c];p&&p.draw(h),l.draw(h),p&&h.restore(),h.globalAlpha=d,l.clear()}),a[o].length=0)})})}getTileRenderTransform(e,i){const r=i.pixelRatio,n=i.viewState,o=n.center,a=n.resolution,s=n.rotation,l=i.size,u=Math.round(l[0]*r),c=Math.round(l[1]*r),h=this.getLayer().getSource().getTileGridForProjection(i.viewState.projection),d=e.tileCoord,p=h.getTileCoordExtent(e.wrappedTileCoord),f=h.getTileCoordExtent(d,this.tempExtent)[0]-p[0];return Mh(op(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,a,s,r,u,c,f))}postRender(e,i){const r=i.viewHints,n=!(r[Ji]||r[Rr]);this.renderedPixelToCoordinateTransform_=i.pixelToCoordinateTransform.slice(),this.renderedRotation_=i.viewState.rotation,this.renderedOpacity_=i.layerStatesArray[i.layerIndex].opacity;const o=this.getLayer(),a=o.getRenderMode(),s=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=o.getDeclutter(),u=l?J1[a].filter(m=>!Nh.includes(m)):J1[a],c=i.viewState,h=c.rotation,d=o.getSource(),p=d.getTileGridForProjection(c.projection).getZForResolution(c.resolution,d.zDirection),f=this.renderedTiles,g=[],_=[],v=[];let b=!0;for(let m=f.length-1;m>=0;--m){const y=f[m];b=b&&!y.getReplayState(o).dirty;const x=y.executorGroups[Xe(o)].filter(T=>T.hasExecutors(u));if(x.length===0)continue;const C=this.getTileRenderTransform(y,i),k=y.tileCoord[0];let L=!1;const A=x[0].getClipCoords(C);let E,I=e;if(A){E=new Av,I=E.getContext();for(let T=0,R=g.length;T<R;++T)if(p!==k&&k<_[T]){const M=g[T];Qt([A[0],A[3],A[4],A[7]],[M[0],M[3],M[4],M[7]])&&(L||(I.save(),L=!0),I.beginPath(),I.moveTo(A[0],A[1]),I.lineTo(A[2],A[3]),I.lineTo(A[4],A[5]),I.lineTo(A[6],A[7]),I.moveTo(M[6],M[7]),I.lineTo(M[4],M[5]),I.lineTo(M[2],M[3]),I.lineTo(M[0],M[1]),I.clip())}g.push(A),_.push(k)}for(let T=0,R=x.length;T<R;++T)x[T].execute(e,[e.canvas.width,e.canvas.height],C,h,n,u,i.declutter?.[l]);L&&(I===e?I.restore():v[m]=E)}e.globalAlpha=s,this.ready=b,this.tileClipContexts_=v,i.declutter||this.renderDeferredInternal(i),super.postRender(e,i)}renderFeature(e,i,r,n,o,a){if(!r)return!1;let s=!1;if(Array.isArray(r))for(let l=0,u=r.length;l<u;++l)s=$h(n,e,r[l],i,this.boundHandleStyleImageChange_,void 0,o,a)||s;else s=$h(n,e,r,i,this.boundHandleStyleImageChange_,void 0,o,a);return s}tileImageNeedsRender_(e){const i=this.getLayer();if(i.getRenderMode()==="vector")return!1;const r=e.getReplayState(i),n=i.getRevision(),o=e.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==n}renderTileImage_(e,i){const r=this.getLayer(),n=e.getReplayState(r),o=r.getRevision(),a=e.executorGroups[Xe(r)];n.renderedTileRevision=o;const s=e.wrappedTileCoord,l=s[0],u=r.getSource();let c=i.pixelRatio;const h=i.viewState.projection,d=u.getTileGridForProjection(h),p=d.getResolution(e.tileCoord[0]),f=i.pixelRatio/e.wantedResolution*p,g=d.getResolution(l),_=e.getContext();c=Math.round(Math.max(c,f/c));const v=u.getTilePixelSize(l,c,h);_.canvas.width=v[0],_.canvas.height=v[1];const b=c/f;if(b!==1){const C=_y(this.tmpTransform_);op(C,b,b),_.setTransform.apply(_,C)}const m=d.getTileCoordExtent(s,this.tempExtent),y=f/g,x=_y(this.tmpTransform_);op(x,y,-y),function(C,k,L){Mh(C,uv(Ox,1,0,0,1,k,L))}(x,-m[0],-m[3]);for(let C=0,k=a.length;C<k;++C)a[C].execute(_,[_.canvas.width*b,_.canvas.height*b],x,0,!0,I3[r.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}var e_,lo=class extends Lv{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const i=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i;const r=t.renderMode||"hybrid";xt(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError===void 0||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new P3(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Ph)}getUseInterimTilesOnError(){return this.get(Rh)}setPreload(t){this.set(Ph,t)}setUseInterimTilesOnError(t){this.set(Rh,t)}};class Pq{xmap;constructor(e){this.xmap=e}addVTLayerNoBounds(e,i){const r=e?.tileSchema;if(e===void 0||r===null)throw new Error("TileJson和TileJson.GridInfo不能为空!");const n=e.prjInfo,o=n?lt.getProjection(n):"EPSG:3857";r.extent=n?n.prjExtent:[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7];const a=lt.createWMTSTileGrid(r),s=e.minzoom??1,l=e.maxzoom??24,u=new Bl({format:new ah,projection:o,tileGrid:a,minZoom:s,maxZoom:l,urls:e.tiles}),c=e.id??Gr(),h=e.name,d=new lo({source:u,properties:{lyrID:c,lyrName:h,lyrType:"mvt",lyrGroup:"矢量切片",bounds:e.bounds,center:e.center}});this.xmap.map.addLayer(d);const p={id:c,name:h,alias:i,minZoom:s,maxZoom:l,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(d,p),d}addVTLayer(e,i){const r=e?.tileSchema;if(e===void 0||r===null)throw new Error("TileJson和TileJson.GridInfo不能为空!");const n=e.prjInfo,o=n?lt.getProjection(n):"EPSG:3857";r.extent=n?n.prjExtent:[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7];const a=lt.createWMTSTileGrid(r),s=lt.getExtentFrom4326(e.bounds,o),l=e.minzoom,u=e.maxzoom,c=new Bl({format:new ah,projection:o,tileGrid:a,minZoom:l,maxZoom:u,extent:s,urls:e.tiles}),h=e.id??Gr(),d=e.name,p=new lo({source:c,properties:{lyrID:h,lyrName:d,lyrType:"mvt",lyrGroup:"矢量切片",bounds:e.bounds,center:e.center}});this.xmap.map.addLayer(p);const f={id:h,name:d,alias:i,minZoom:l,maxZoom:u,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(p,f),p}addVTLayerW(e,i,r,n){const o=new Bl({format:new ah,projection:"EPSG:3857",minZoom:r,maxZoom:n,url:e}),a=Gr(),s=i,l=new lo({source:o,properties:{lyrID:a,lyrName:s,lyrType:"mvt",lyrGroup:"矢量切片"}});this.xmap.map.addLayer(l);const u={id:a,name:s,minZoom:r,maxZoom:n,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(l,u),l}}(function(t){t[t.grid=0]="grid",t[t.mvt=1]="mvt",t[t.symbol=2]="symbol",t[t.vector=3]="vector",t[t.json=4]="json"})(e_||(e_={}));var dm=hn({name:"drawtool",props:{xmap:ba},components:{Icon:Wn},setup(t){let e,i=t.xmap;return Ft(()=>{}),ae(()=>t.xmap,r=>{i=r}),{changeType:function(r){!e&&i&&(e=new RT(i));const n=r;e?.changeDrawType(n)},clearPic:function(){e?.clearLastDraw()},clearboard:function(){e?.clearboard(),e?.clearInteraction()}}}});const R3={class:"tool-container drawToolList"},q3={title:"画点"},A3={title:"画线"},F3={title:"画面"},O3={title:"画笔"},z3={title:"撤销"},D3={title:"清空"};dm.render=function(t,e,i,r,n,o){const a=ur("Icon");return Dt(),Ri("ul",R3,[ze("li",{onClick:e[0]||(e[0]=s=>t.changeType("Point"))},[ze("span",q3,[et(a,{icon:"gis:point"})])]),ze("li",{onClick:e[1]||(e[1]=s=>t.changeType("LineString"))},[ze("span",A3,[et(a,{icon:"gis:polyline"})])]),ze("li",{onClick:e[2]||(e[2]=s=>t.changeType("Polygon"))},[ze("span",F3,[et(a,{icon:"gis:polygon-o"})])]),ze("li",{onClick:e[3]||(e[3]=s=>t.changeType("Hand"))},[ze("span",O3,[et(a,{icon:"gis:route-start"})])]),ze("li",{onClick:e[4]||(e[4]=(...s)=>t.clearPic&&t.clearPic(...s))},[ze("span",z3,[et(a,{icon:"ant-design:undo-outlined"})])]),ze("li",{onClick:e[5]||(e[5]=(...s)=>t.clearboard&&t.clearboard(...s))},[ze("span",D3,[et(a,{icon:"ant-design:clear-outlined"})])])])},dm.__file="src/components/MapTools/drawToolBar.vue";var pm=hn({name:"MeasureToolBar",props:{xmap:ba},components:{Icon:Wn},setup(t){let e,i=t.xmap;return ae(()=>t.xmap,r=>{i=r}),{measureLine:()=>{!e&&i?.map&&(e=new C1(i.map)),e?.addInteraction("line")},measureArea:()=>{!e&&i?.map&&(e=new C1(i.map)),e?.addInteraction("area")},unloadMeasure:()=>{e&&e.removeInteraction()}}}});const B3={class:"tool-container measureToolList"},j3={title:"量线"},N3={title:"量面"},$3={title:"取消"};pm.render=function(t,e,i,r,n,o){const a=ur("Icon");return Dt(),Ri("ul",B3,[ze("li",{onClick:e[0]||(e[0]=(...s)=>t.measureLine&&t.measureLine(...s))},[ze("span",j3,[et(a,{icon:"gis:measure-line"})])]),ze("li",{onClick:e[1]||(e[1]=(...s)=>t.measureArea&&t.measureArea(...s))},[ze("span",N3,[et(a,{icon:"gis:measure-area"})])]),ze("li",{onClick:e[2]||(e[2]=(...s)=>t.unloadMeasure&&t.unloadMeasure(...s))},[ze("span",$3,[et(a,{icon:"ant-design:clear-outlined"})])])])},pm.__file="src/components/MapTools/measureToolBar.vue";const ji=Un({layerTree:!1,dataPanel:!0,location:!1,drawTool:!1,measureTool:!1,swipeTool:!1,otherTool:!1});function pi(t,e,i,r){return Object.defineProperty(t,e,{get:i,set:r,enumerable:!0}),t}function U2(t,e){for(const i in e)pi(t,i,e[i]);return t}var fm,fr=G(!1),t_="ontouchstart"in window||window.navigator.maxTouchPoints>0,i_=navigator.userAgent||navigator.vendor||window.opera,at={userAgent:i_,is:function(t){const e=t.toLowerCase(),i=function(a){return/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(silk)/.exec(a)||/(android)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||/(playbook)/.exec(a)||/(bb)/.exec(a)||/(blackberry)/.exec(a)||[]}(e),r=function(a,s){const l=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(vivaldi)[\/]([\w.]+)/.exec(a)||/(chrome|crios)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(a)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(a)||/(firefox|fxios)[\/]([\w.]+)/.exec(a)||/(webkit)[\/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(a)||[];return{browser:l[5]||l[3]||l[1]||"",version:l[4]||l[2]||"0",platform:s[0]||""}}(e,i),n={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(n[r.browser]=!0,n.version=r.version,n.versionNumber=parseInt(r.version,10)),r.platform&&(n[r.platform]=!0);const o=n.android||n.ios||n.bb||n.blackberry||n.ipad||n.iphone||n.ipod||n.kindle||n.playbook||n.silk||n["windows phone"];if(o===!0||e.indexOf("mobile")!==-1?n.mobile=!0:n.desktop=!0,n["windows phone"]&&(n.winphone=!0,delete n["windows phone"]),n.edga||n.edgios||n.edg?(n.edge=!0,r.browser="edge"):n.crios?(n.chrome=!0,r.browser="chrome"):n.fxios&&(n.firefox=!0,r.browser="firefox"),(n.ipod||n.ipad||n.iphone)&&(n.ios=!0),n.vivaldi&&(r.browser="vivaldi",n.vivaldi=!0),(n.chrome||n.opr||n.safari||n.vivaldi||n.mobile===!0&&n.ios!==!0&&o!==!0)&&(n.webkit=!0),n.opr&&(r.browser="opera",n.opera=!0),n.safari&&(n.blackberry||n.bb?(r.browser="blackberry",n.blackberry=!0):n.playbook?(r.browser="playbook",n.playbook=!0):n.android?(r.browser="android",n.android=!0):n.kindle?(r.browser="kindle",n.kindle=!0):n.silk&&(r.browser="silk",n.silk=!0)),n.name=r.browser,n.platform=r.platform,e.indexOf("electron")!==-1)n.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)n.bex=!0;else{if(window.Capacitor!==void 0?(n.capacitor=!0,n.nativeMobile=!0,n.nativeMobileWrapper="capacitor"):window._cordovaNative===void 0&&window.cordova===void 0||(n.cordova=!0,n.nativeMobile=!0,n.nativeMobileWrapper="cordova"),fr.value===!0&&(fm={is:{...n}}),t_===!0&&n.mac===!0&&(n.desktop===!0&&n.safari===!0||n.nativeMobile===!0&&n.android!==!0&&n.ios!==!0&&n.ipad!==!0)){delete n.mac,delete n.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(n,{mobile:!0,ios:!0,platform:a,[a]:!0})}n.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete n.desktop,n.mobile=!0)}return n}(i_),has:{touch:t_},within:{iframe:window.self!==window.top}},gm={install(t){const{$q:e}=t;fr.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,at),fr.value=!1}),e.platform=Un(this)):e.platform=this}};{let t;pi(at.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(gm,at),fr.value===!0&&(Object.assign(gm,fm,{has:{touch:!1,webStorage:!1},within:{iframe:!1}}),fm=null)}var V3=gm;function ue(t){return ux(hn(t))}function Ar(t){return ux(t)}var xo=(t,e)=>{const i=Un(t);for(const r in t)pi(e,r,()=>i[r],n=>{i[r]=n});return e},Rt={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Rt,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function ai(){}function Ed(t){return t.button===0}function Ai(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function Ht(t){t.stopPropagation()}function fi(t){t.cancelable!==!1&&t.preventDefault()}function Qe(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function cs(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const i=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",fi,Rt.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",fi,Rt.notPassiveCapture)};t.querySelectorAll("a, img").forEach(i)}function Zt(t,e,i){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(i):i,i.forEach(n=>{n[0].addEventListener(n[1],t[n[2]],Rt[n[3]])})}function Mi(t,e){const i=`__q_${e}_evt`;t[i]!==void 0&&(t[i].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],Rt[r[3]])}),t[i]=void 0)}function Us(t,e=250,i){let r=null;function n(){const o=arguments;r!==null&&clearTimeout(r),r=setTimeout(()=>{r=null,t.apply(this,o)},e)}return n.cancel=()=>{r!==null&&clearTimeout(r)},n}var Vp=["sm","md","lg","xl"],{passive:r_}=Rt;xo({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:ai,setDebounce:ai,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0)return void(t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0)));const{visualViewport:i}=window,r=i||window,n=document.scrollingElement||document.documentElement,o=i===void 0||at.is.mobile===!0?()=>[Math.max(window.innerWidth,n.clientWidth),Math.max(window.innerHeight,n.clientHeight)]:()=>[i.width*i.scale+window.innerWidth-n.clientWidth,i.height*i.scale+window.innerHeight-n.clientHeight],a=t.config.screen!==void 0&&t.config.screen.bodyClasses===!0;this.__update=h=>{const[d,p]=o();if(p!==this.height&&(this.height=p),d!==this.width)this.width=d;else if(h!==!0)return;let f=this.sizes;this.gt.xs=d>=f.sm,this.gt.sm=d>=f.md,this.gt.md=d>=f.lg,this.gt.lg=d>=f.xl,this.lt.sm=d<f.sm,this.lt.md=d<f.md,this.lt.lg=d<f.lg,this.lt.xl=d<f.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,f=(this.xs===!0?"xs":this.sm===!0&&"sm")||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",f!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${f}`)),this.name=f)};let s,l={},u=16;this.setSizes=h=>{Vp.forEach(d=>{h[d]!==void 0&&(l[d]=h[d])})},this.setDebounce=h=>{u=h};const c=()=>{const h=getComputedStyle(document.body);h.getPropertyValue("--q-size-sm")&&Vp.forEach(d=>{this.sizes[d]=parseInt(h.getPropertyValue(`--q-size-${d}`),10)}),this.setSizes=d=>{Vp.forEach(p=>{d[p]&&(this.sizes[p]=d[p])}),this.__update(!0)},this.setDebounce=d=>{s!==void 0&&r.removeEventListener("resize",s,r_),s=d>0?Us(this.__update,d):this.__update,r.addEventListener("resize",s,r_)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};fr.value===!0?e.push(c):c()}});var ki=xo({isActive:!1,mode:!1},{__media:void 0,set(t){ki.mode=t,t==="auto"?(ki.__media===void 0&&(ki.__media=window.matchMedia("(prefers-color-scheme: dark)"),ki.__updateMedia=()=>{ki.set("auto")},ki.__media.addListener(ki.__updateMedia)),t=ki.__media.matches):ki.__media!==void 0&&(ki.__media.removeListener(ki.__updateMedia),ki.__media=void 0),ki.isActive=t===!0,document.body.classList.remove("body--"+(t===!0?"light":"dark")),document.body.classList.add("body--"+(t===!0?"dark":"light"))},toggle(){ki.set(ki.isActive===!1)},install({$q:t,ssrContext:e}){const{dark:i}=t.config;t.dark=this,this.__installed!==!0&&this.set(i!==void 0&&i)}});function ha(t){return t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function gr(t,e){return ha(t)!==!0&&[].concat(e).includes(t.keyCode)}var mm={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,i)=>t+"-"+e+" of "+i,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function n_(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,i)=>i===0?e.toLowerCase():i>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}var zo=xo({__qLang:{}},{getLocale:n_,set(t=mm,e){const i={...t,rtl:t.rtl===!0,getLocale:n_};if(i.set=zo.set,zo.__langConfig===void 0||zo.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",i.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",i.isoName)}Object.assign(zo.__qLang,i)},install({$q:t,lang:e,ssrContext:i}){t.lang=zo.__qLang,zo.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys:r=>Reflect.ownKeys(r).filter(n=>n!=="set"&&n!=="getLocale")}),this.set(e||mm))}}),W2=zo,G3={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},o_=xo({iconMapFn:null,__qIconSet:{}},{set(t,e){const i={...t};i.set=o_.set,Object.assign(o_.__qIconSet,i)},install({$q:t,iconSet:e,ssrContext:i}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,pi(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys:r=>Reflect.ownKeys(r).filter(n=>n!=="set")}),this.set(e||G3))}}),a_="_q_t_",Y2="_q_s_",da="_q_l_",s_="_q_pc_",K2="_q_f_",X2="_q_fo_",Z2="_q_tabs_",l_="_q_u_";function wt(){}var u_={};function Tr(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let i,r;if(t.constructor===Array){if(i=t.length,i!==e.length)return!1;for(r=i;r--!=0;)if(Tr(t[r],e[r])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let o=t.entries();for(r=o.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=o.next()}for(o=t.entries(),r=o.next();r.done!==!0;){if(Tr(r.value[1],e.get(r.value[0]))!==!0)return!1;r=o.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const o=t.entries();for(r=o.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=o.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(i=t.length,i!==e.length)return!1;for(r=i;r--!=0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const n=Object.keys(t).filter(o=>t[o]!==void 0);if(i=n.length,i!==Object.keys(e).filter(o=>e[o]!==void 0).length)return!1;for(r=i;r--!=0;){const o=n[r];if(Tr(t[o],e[o])!==!0)return!1}return!0}return t!=t&&e!=e}function Ci(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function vm(t){return Object.prototype.toString.call(t)==="[object Date]"}function bu(t){return typeof t=="number"&&isFinite(t)}function Q2(t,e){const i=PM(t);i.config.globalProperties=e.config.globalProperties;const{reload:r,...n}=e._context;return Object.assign(i._context,n),i}var c_=["B","KB","MB","GB","TB","PB"];function ym(t,e=1){let i=0;for(;parseInt(t,10)>=1024&&i<c_.length-1;)t/=1024,++i;return`${t.toFixed(e)}${c_[i]}`}function Lt(t,e,i){return i<=e?e:Math.min(i,Math.max(e,t))}function Wh(t,e,i){if(i<=e)return e;const r=i-e+1;let n=e+(t-e)%r;return n<e&&(n=r+n),n===0?0:n}function bt(t,e=2,i="0"){if(t==null)return t;const r=""+t;return r.length>=e?r:new Array(e-r.length+1).join(i)+r}var _m=XMLHttpRequest,h_=_m.prototype.open,H3=["top","right","bottom","left"],kc=[],Tc=0,U3=ue({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:t=>H3.includes(t)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,hijackFilter:Function},emits:["start","stop"],setup(t,{emit:e}){const{proxy:i}=Ce(),r=G(0),n=G(!1),o=G(!0);let a,s=0,l=null;const u=w(()=>`q-loading-bar q-loading-bar--${t.position}`+(t.color!==void 0?` bg-${t.color}`:"")+(o.value===!0?"":" no-transition")),c=w(()=>t.position==="top"||t.position==="bottom"),h=w(()=>c.value===!0?"height":"width"),d=w(()=>{const m=n.value,y=function({p:x,pos:C,active:k,horiz:L,reverse:A,dir:E}){let I=1,T=1;return L===!0?(A===!0&&(I=-1),C==="bottom"&&(T=-1),{transform:`translate3d(${I*(x-100)}%,${k?0:-200*T}%,0)`}):(A===!0&&(T=-1),C==="right"&&(I=-1),{transform:`translate3d(${k?0:E*I*-200}%,${T*(x-100)}%,0)`})}({p:r.value,pos:t.position,active:m,horiz:c.value,reverse:i.$q.lang.rtl===!0&&["top","bottom"].includes(t.position)?t.reverse===!1:t.reverse,dir:i.$q.lang.rtl===!0?-1:1});return y[h.value]=t.size,y.opacity=m?1:0,y}),p=w(()=>n.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r.value}:{"aria-hidden":"true"});function f(m=300){const y=a;return a=Math.max(0,m)||0,s++,s>1?(y===0&&m>0?v():l!==null&&y>0&&m<=0&&(clearTimeout(l),l=null),s):(l!==null&&clearTimeout(l),e("start"),r.value=0,l=setTimeout(()=>{l=null,o.value=!0,m>0&&v()},n._value===!0?500:1),n._value!==!0&&(n.value=!0,o.value=!1),s)}function g(m){return s>0&&(r.value=function(y,x){return typeof x!="number"&&(x=y<25?3*Math.random()+3:y<65?3*Math.random():y<85?2*Math.random():y<99?.6:0),Lt(y+x,0,100)}(r.value,m)),s}function _(){if(s=Math.max(0,s-1),s>0)return s;l!==null&&(clearTimeout(l),l=null),e("stop");const m=()=>{o.value=!0,r.value=100,l=setTimeout(()=>{l=null,n.value=!1},1e3)};return r.value===0?l=setTimeout(m,1):m(),s}function v(){r.value<100&&(l=setTimeout(()=>{l=null,g(),v()},a))}let b;return Ft(()=>{var m;t.skipHijack!==!0&&(b=!0,m={start:f,stop:_,hijackFilter:w(()=>t.hijackFilter||null)},Tc++,kc.push(m),Tc>1||(_m.prototype.open=function(y,x){const C=[];this.addEventListener("loadstart",()=>{kc.forEach(k=>{k.hijackFilter.value!==null&&k.hijackFilter.value(x)!==!0||(k.start(),C.push(k.stop))})},{once:!0}),this.addEventListener("loadend",()=>{C.forEach(k=>{k()})},{once:!0}),h_.apply(this,arguments)}))}),st(()=>{l!==null&&clearTimeout(l),b===!0&&function(m){kc=kc.filter(y=>y.start!==m),(Tc=Math.max(0,Tc-1))===0&&(_m.prototype.open=h_)}(f)}),Object.assign(i,{start:f,stop:_,increment:g}),()=>S("div",{class:u.value,style:d.value,...p.value})}}),bm={xs:18,sm:24,md:32,lg:38,xl:46},Rn={size:String};function qn(t,e=bm){return w(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function De(t,e){return t!==void 0&&t()||e}function Nu(t,e){if(t!==void 0){const i=t();if(i!=null)return i.slice()}return e}function Jt(t,e){return t!==void 0?e.concat(t()):e}function Kv(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function mr(t,e,i,r,n,o){e.key=r+n;const a=S(t,e,i);return n===!0?Fi(a,o()):a}var d_="0 0 24 24",p_=t=>t,Gp=t=>`ionicons ${t}`,J2={"mdi-":t=>`mdi ${t}`,"icon-":p_,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":Gp,"ion-ios":Gp,"ion-logo":Gp,"iconfont ":p_,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`},eS={o_:"-outlined",r_:"-round",s_:"-sharp"},tS={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},W3=new RegExp("^("+Object.keys(J2).join("|")+")"),Y3=new RegExp("^("+Object.keys(eS).join("|")+")"),f_=new RegExp("^("+Object.keys(tS).join("|")+")"),K3=/^[Mm]\s?[-+]?\.?\d/,X3=/^img:/,Z3=/^svguse:/,Q3=/^ion-/,J3=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,vt=ue({name:"QIcon",props:{...Rn,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=qn(t),n=w(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),o=w(()=>{let a,s=t.name;if(s==="none"||!s)return{none:!0};if(i.iconMapFn!==null){const c=i.iconMapFn(s);if(c!==void 0){if(c.icon===void 0)return{cls:c.cls,content:c.content!==void 0?c.content:" "};if(s=c.icon,s==="none"||!s)return{none:!0}}}if(K3.test(s)===!0){const[c,h=d_]=s.split("|");return{svg:!0,viewBox:h,nodes:c.split("&&").map(d=>{const[p,f,g]=d.split("@@");return S("path",{style:f,d:p,transform:g})})}}if(X3.test(s)===!0)return{img:!0,src:s.substring(4)};if(Z3.test(s)===!0){const[c,h=d_]=s.split("|");return{svguse:!0,src:c.substring(7),viewBox:h}}let l=" ";const u=s.match(W3);if(u!==null)a=J2[u[1]](s);else if(J3.test(s)===!0)a=s;else if(Q3.test(s)===!0)a=`ionicons ion-${i.platform.is.ios===!0?"ios":"md"}${s.substring(3)}`;else if(f_.test(s)===!0){a="notranslate material-symbols";const c=s.match(f_);c!==null&&(s=s.substring(6),a+=tS[c[1]]),l=s}else{a="notranslate material-icons";const c=s.match(Y3);c!==null&&(s=s.substring(2),a+=eS[c[1]]),l=s}return{cls:a,content:l}});return()=>{const a={class:n.value,style:r.value,"aria-hidden":"true",role:"presentation"};return o.value.none===!0?S(t.tag,a,De(e.default)):o.value.img===!0?S(t.tag,a,Jt(e.default,[S("img",{src:o.value.src})])):o.value.svg===!0?S(t.tag,a,Jt(e.default,[S("svg",{viewBox:o.value.viewBox||"0 0 24 24"},o.value.nodes)])):o.value.svguse===!0?S(t.tag,a,Jt(e.default,[S("svg",{viewBox:o.value.viewBox},[S("use",{"xlink:href":o.value.src})])])):(o.value.cls!==void 0&&(a.class+=" "+o.value.cls),S(t.tag,a,Jt(e.default,[o.value.content])))}}});ue({name:"QAvatar",props:{...Rn,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const i=qn(t),r=w(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),n=w(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const o=t.icon!==void 0?[S(vt,{name:t.icon})]:void 0;return S("div",{class:r.value,style:i.value},[S("div",{class:"q-avatar__content row flex-center overflow-hidden",style:n.value},Kv(e.default,o))])}}});var eL=["top","middle","bottom"];ue({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:t=>eL.includes(t)}},setup(t,{slots:e}){const i=w(()=>t.align!==void 0?{verticalAlign:t.align}:null),r=w(()=>{const n=t.outline===!0&&t.color||t.textColor;return`q-badge flex inline items-center no-wrap q-badge--${t.multiLine===!0?"multi":"single"}-line`+(t.outline===!0?" q-badge--outline":t.color!==void 0?` bg-${t.color}`:"")+(n!==void 0?` text-${n}`:"")+(t.floating===!0?" q-badge--floating":"")+(t.rounded===!0?" q-badge--rounded":"")+(t.transparent===!0?" q-badge--transparent":"")});return()=>S("div",{class:r.value,style:i.value,role:"status","aria-label":t.label},Jt(e.default,t.label!==void 0?[t.label]:[]))}});var ft={dark:{type:Boolean,default:null}};function gt(t,e){return w(()=>t.dark===null?e.dark.isActive:t.dark)}ue({name:"QBanner",props:{...ft,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=gt(t,i),n=w(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(r.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),o=w(()=>"q-banner__actions row items-center justify-end col-"+(t.inlineActions===!0?"auto":"all"));return()=>{const a=[S("div",{class:"q-banner__avatar col-auto row items-center self-start"},De(e.avatar)),S("div",{class:"q-banner__content col text-body2"},De(e.default))],s=De(e.action);return s!==void 0&&a.push(S("div",{class:o.value},s)),S("div",{class:n.value+(t.inlineActions===!1&&s!==void 0?" q-banner--top-padding":""),role:"alert"},a)}}}),ue({name:"QBar",props:{...ft,dense:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=gt(t,i),n=w(()=>`q-bar row no-wrap items-center q-bar--${t.dense===!0?"dense":"standard"}  q-bar--${r.value===!0?"dark":"light"}`);return()=>S("div",{class:n.value,role:"toolbar"},De(e.default))}});var iS={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},tL=Object.keys(iS),Xv={align:{type:String,validator:t=>tL.includes(t)}};function Zv(t){return w(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${iS[e]}`})}function sh(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function rS(t,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(i=>{rS(t,i)}):t.add(e)}function Qv(t){const e=new Set;return t.forEach(i=>{rS(e,i)}),Array.from(e)}function Jv(t){return t.appContext.config.globalProperties.$router!==void 0}function uo(t){return t.isUnmounted===!0||t.isDeactivated===!0}var iL=["",!0];function g_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function m_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function v_(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((i,r)=>i===e[r]):t.length===1&&t[0]===e}function rL(t,e){return Array.isArray(t)===!0?v_(t,e):Array.isArray(e)===!0?v_(e,t):t===e}ue({name:"QBreadcrumbs",props:{...Xv,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:t=>["none","xs","sm","md","lg","xl"].includes(t),default:"sm"}},setup(t,{slots:e}){const i=Zv(t),r=w(()=>`flex items-center ${i.value}${t.gutter==="none"?"":` q-gutter-${t.gutter}`}`),n=w(()=>t.separatorColor?` text-${t.separatorColor}`:""),o=w(()=>` text-${t.activeColor}`);return()=>{if(e.default===void 0)return;const a=Qv(De(e.default));if(a.length===0)return;let s=1;const l=[],u=a.filter(h=>h.type!==void 0&&h.type.name==="QBreadcrumbsEl").length,c=e.separator!==void 0?e.separator:()=>t.separator;return a.forEach(h=>{if(h.type!==void 0&&h.type.name==="QBreadcrumbsEl"){const d=s<u,p=(d===!0?"":" q-breadcrumbs--last")+((h.props!==null&&iL.includes(h.props.disable))!==!0&&d===!0?o.value:"");s++,l.push(S("div",{class:`flex items-center${p}`},[h])),d===!0&&l.push(S("div",{class:"q-breadcrumbs__separator"+n.value},c()))}else l.push(h)}),S("div",{class:"q-breadcrumbs"},[S("div",{class:r.value},l)])}}});var nS={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},$u={...nS,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function Ld({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const i=Ce(),{props:r,proxy:n,emit:o}=i,a=Jv(i),s=w(()=>r.disable!==!0&&r.href!==void 0),l=w(e===!0?()=>a===!0&&r.disable!==!0&&s.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>a===!0&&s.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),u=w(()=>l.value===!0?b(r.to):null),c=w(()=>u.value!==null),h=w(()=>s.value===!0||c.value===!0),d=w(()=>r.type==="a"||h.value===!0?"a":r.tag||t||"div"),p=w(()=>s.value===!0?{href:r.href,target:r.target}:c.value===!0?{href:u.value.href,target:r.target}:{}),f=w(()=>{if(c.value===!1)return-1;const{matched:y}=u.value,{length:x}=y,C=y[x-1];if(C===void 0)return-1;const k=n.$route.matched;if(k.length===0)return-1;const L=k.findIndex(m_.bind(null,C));if(L!==-1)return L;const A=g_(y[x-2]);return x>1&&g_(C)===A&&k[k.length-1].path!==A?k.findIndex(m_.bind(null,y[x-2])):L}),g=w(()=>c.value===!0&&f.value!==-1&&function(y,x){for(const C in x){const k=x[C],L=y[C];if(typeof k=="string"){if(k!==L)return!1}else if(Array.isArray(L)===!1||L.length!==k.length||k.some((A,E)=>A!==L[E]))return!1}return!0}(n.$route.params,u.value.params)),_=w(()=>g.value===!0&&f.value===n.$route.matched.length-1&&function(y,x){if(Object.keys(y).length!==Object.keys(x).length)return!1;for(const C in y)if(rL(y[C],x[C])===!1)return!1;return!0}(n.$route.params,u.value.params)),v=w(()=>c.value===!0?_.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":g.value===!0?` ${r.activeClass}`:"":"");function b(y){try{return n.$router.resolve(y)}catch{}return null}function m(y,{returnRouterError:x,to:C=r.to,replace:k=r.replace}={}){if(r.disable===!0)return y.preventDefault(),Promise.resolve(!1);if(y.metaKey||y.altKey||y.ctrlKey||y.shiftKey||y.button!==void 0&&y.button!==0||r.target==="_blank")return Promise.resolve(!1);y.preventDefault();const L=n.$router[k===!0?"replace":"push"](C);return x===!0?L:L.then(()=>{}).catch(()=>{})}return{hasRouterLink:c,hasHrefLink:s,hasLink:h,linkTag:d,resolvedLink:u,linkIsActive:g,linkIsExactActive:_,linkClass:v,linkAttrs:p,getLink:b,navigateToRouterLink:m,navigateOnClick:function(y){if(c.value===!0){const x=C=>m(y,C);o("click",y,x),y.defaultPrevented!==!0&&x()}else o("click",y)}}}ue({name:"QBreadcrumbsEl",props:{...$u,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(t,{slots:e}){const{linkTag:i,linkAttrs:r,linkClass:n,navigateOnClick:o}=Ld(),a=w(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(t.disable!==!0?"q-link--focusable"+n.value:"q-breadcrumbs__el--disable"),...r.value,onClick:o})),s=w(()=>"q-breadcrumbs__el-icon"+(t.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const l=[];return t.icon!==void 0&&l.push(S(vt,{class:s.value,name:t.icon})),t.label!==void 0&&l.push(t.label),S(i.value,{...a.value},Jt(e.default,l))}}});var Kt={size:{type:[String,Number],default:"1em"},color:String};function Xt(t){return{cSize:w(()=>t.size in bm?`${bm[t.size]}px`:t.size),classes:w(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}var Dr=ue({name:"QSpinner",props:{...Kt,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[S("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function Yh(t){if(t===window)return{top:0,left:0};const{top:e,left:i}=t.getBoundingClientRect();return{top:e,left:i}}function qs(t){return t===window?window.innerHeight:t.getBoundingClientRect().height}function xm(t,e){const i=t.style;for(const r in e)i[r]=e[r]}function oS(t,e){if(t==null||t.contains(e)===!0)return!0;for(let i=t.nextElementSibling;i!==null;i=i.nextElementSibling)if(i.contains(e))return!0;return!1}function aS(t,e=250){let i,r=!1;return function(){return r===!1&&(r=!0,setTimeout(()=>{r=!1},e),i=t.apply(this,arguments)),i}}function y_(t,e,i,r){i.modifiers.stop===!0&&Ht(t);const n=i.modifiers.color;let o=i.modifiers.center;o=o===!0||r===!0;const a=document.createElement("span"),s=document.createElement("span"),l=Ai(t),{left:u,top:c,width:h,height:d}=e.getBoundingClientRect(),p=Math.sqrt(h*h+d*d),f=p/2,g=(h-p)/2+"px",_=o?g:l.left-u-f+"px",v=(d-p)/2+"px",b=o?v:l.top-c-f+"px";s.className="q-ripple__inner",xm(s,{height:`${p}px`,width:`${p}px`,transform:`translate3d(${_},${b},0) scale3d(.2,.2,1)`,opacity:0}),a.className="q-ripple"+(n?" text-"+n:""),a.setAttribute("dir","ltr"),a.appendChild(s),e.appendChild(a);const m=()=>{a.remove(),clearTimeout(y)};i.abort.push(m);let y=setTimeout(()=>{s.classList.add("q-ripple__inner--enter"),s.style.transform=`translate3d(${g},${v},0) scale3d(1,1,1)`,s.style.opacity=.2,y=setTimeout(()=>{s.classList.remove("q-ripple__inner--enter"),s.classList.add("q-ripple__inner--leave"),s.style.opacity=0,y=setTimeout(()=>{a.remove(),i.abort.splice(i.abort.indexOf(m),1)},275)},250)},50)}function __(t,{modifiers:e,value:i,arg:r}){const n=Object.assign({},t.cfg.ripple,e,i);t.modifiers={early:n.early===!0,stop:n.stop===!0,center:n.center===!0,color:n.color||r,keyCodes:[].concat(n.keyCodes||13)}}var Id=Ar({name:"ripple",beforeMount(t,e){const i=e.instance.$.appContext.config.globalProperties.$q.config||{};if(i.ripple===!1)return;const r={cfg:i,enabled:e.value!==!1,modifiers:{},abort:[],start(n){r.enabled===!0&&n.qSkipRipple!==!0&&n.type===(r.modifiers.early===!0?"pointerdown":"click")&&y_(n,t,r,n.qKeyEvent===!0)},keystart:aS(n=>{r.enabled===!0&&n.qSkipRipple!==!0&&gr(n,r.modifiers.keyCodes)===!0&&n.type==="key"+(r.modifiers.early===!0?"down":"up")&&y_(n,t,r,!0)},300)};__(r,e),t.__qripple=r,Zt(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const i=t.__qripple;i!==void 0&&(i.enabled=e.value!==!1,i.enabled===!0&&Object(e.value)===e.value&&__(i,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(i=>{i()}),Mi(e,"main"),delete t._qripple)}}),Kh={none:0,xs:4,sm:8,md:16,lg:24,xl:32},nL={xs:8,sm:10,md:14,lg:20,xl:24},oL=["button","submit","reset"],aL=/[^\s]\/[^\s]/,sS=["flat","outline","push","unelevated"];function e0(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}function lS(t){const e=e0(t);return e!==void 0?{[e]:!0}:{}}var t0={...Rn,...nS,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...sS.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Xv.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},sL={...t0,round:Boolean},{passiveCapture:nr}=Rt,Aa=null,Fa=null,Oa=null,_t=ue({name:"QBtn",props:{...sL,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{classes:n,style:o,innerClasses:a,attributes:s,hasLink:l,linkTag:u,navigateOnClick:c,isActionable:h}=function(M){const q=qn(M,nL),P=Zv(M),{hasRouterLink:F,hasLink:j,linkTag:V,linkAttrs:O,navigateOnClick:$}=Ld({fallbackTag:"button"}),J=w(()=>{const K=M.fab===!1&&M.fabMini===!1?q.value:{};return M.padding!==void 0?Object.assign({},K,{padding:M.padding.split(/\s+/).map(U=>U in Kh?Kh[U]+"px":U).join(" "),minWidth:"0",minHeight:"0"}):K}),te=w(()=>M.rounded===!0||M.fab===!0||M.fabMini===!0),ie=w(()=>M.disable!==!0&&M.loading!==!0),N=w(()=>ie.value===!0?M.tabindex||0:-1),z=w(()=>e0(M,"standard")),B=w(()=>{const K={tabindex:N.value};return j.value===!0?Object.assign(K,O.value):oL.includes(M.type)===!0&&(K.type=M.type),V.value==="a"?(M.disable===!0?K["aria-disabled"]="true":K.href===void 0&&(K.role="button"),F.value!==!0&&aL.test(M.type)===!0&&(K.type=M.type)):M.disable===!0&&(K.disabled="",K["aria-disabled"]="true"),M.loading===!0&&M.percentage!==void 0&&Object.assign(K,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":M.percentage}),K});return{classes:w(()=>{let K;M.color!==void 0?K=M.flat===!0||M.outline===!0?`text-${M.textColor||M.color}`:`bg-${M.color} text-${M.textColor||"white"}`:M.textColor&&(K=`text-${M.textColor}`);const U=M.round===!0?"round":"rectangle"+(te.value===!0?" q-btn--rounded":M.square===!0?" q-btn--square":"");return`q-btn--${z.value} q-btn--${U}`+(K!==void 0?" "+K:"")+(ie.value===!0?" q-btn--actionable q-focusable q-hoverable":M.disable===!0?" disabled":"")+(M.fab===!0?" q-btn--fab":M.fabMini===!0?" q-btn--fab-mini":"")+(M.noCaps===!0?" q-btn--no-uppercase":"")+(M.dense===!0?" q-btn--dense":"")+(M.stretch===!0?" no-border-radius self-stretch":"")+(M.glossy===!0?" glossy":"")+(M.square?" q-btn--square":"")}),style:J,innerClasses:w(()=>P.value+(M.stack===!0?" column":" row")+(M.noWrap===!0?" no-wrap text-no-wrap":"")+(M.loading===!0?" q-btn__content--hidden":"")),attributes:B,hasLink:j,linkTag:V,navigateOnClick:$,isActionable:ie}}(t),d=G(null),p=G(null);let f,g=null,_=null;const v=w(()=>t.label!==void 0&&t.label!==null&&t.label!==""),b=w(()=>t.disable!==!0&&t.ripple!==!1&&{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),m=w(()=>({center:t.round})),y=w(()=>{const M=Math.max(0,Math.min(100,t.percentage));return M>0?{transition:"transform 0.6s",transform:`translateX(${M-100}%)`}:{}}),x=w(()=>{if(t.loading===!0)return{onMousedown:R,onTouchstart:R,onClick:R,onKeydown:R,onKeyup:R};if(h.value===!0){const M={onClick:k,onKeydown:L,onMousedown:E};return r.$q.platform.has.touch===!0&&(M[`onTouchstart${t.onTouchstart!==void 0?"":"Passive"}`]=A),M}return{onClick:Qe}}),C=w(()=>({ref:d,class:"q-btn q-btn-item non-selectable no-outline "+n.value,style:o.value,...s.value,...x.value}));function k(M){if(d.value!==null){if(M!==void 0){if(M.defaultPrevented===!0)return;const q=document.activeElement;if(t.type==="submit"&&q!==document.body&&d.value.contains(q)===!1&&q.contains(d.value)===!1){d.value.focus();const P=()=>{document.removeEventListener("keydown",Qe,!0),document.removeEventListener("keyup",P,nr),d.value!==null&&d.value.removeEventListener("blur",P,nr)};document.addEventListener("keydown",Qe,!0),document.addEventListener("keyup",P,nr),d.value.addEventListener("blur",P,nr)}}c(M)}}function L(M){d.value!==null&&(i("keydown",M),gr(M,[13,32])===!0&&Fa!==d.value&&(Fa!==null&&T(),M.defaultPrevented!==!0&&(d.value.focus(),Fa=d.value,d.value.classList.add("q-btn--active"),document.addEventListener("keyup",I,!0),d.value.addEventListener("blur",I,nr)),Qe(M)))}function A(M){d.value!==null&&(i("touchstart",M),M.defaultPrevented!==!0&&(Aa!==d.value&&(Aa!==null&&T(),Aa=d.value,g=M.target,g.addEventListener("touchcancel",I,nr),g.addEventListener("touchend",I,nr)),f=!0,_!==null&&clearTimeout(_),_=setTimeout(()=>{_=null,f=!1},200)))}function E(M){d.value!==null&&(M.qSkipRipple=f===!0,i("mousedown",M),M.defaultPrevented!==!0&&Oa!==d.value&&(Oa!==null&&T(),Oa=d.value,d.value.classList.add("q-btn--active"),document.addEventListener("mouseup",I,nr)))}function I(M){if(d.value!==null&&(M===void 0||M.type!=="blur"||document.activeElement!==d.value)){if(M!==void 0&&M.type==="keyup"){if(Fa===d.value&&gr(M,[13,32])===!0){const q=new MouseEvent("click",M);q.qKeyEvent=!0,M.defaultPrevented===!0&&fi(q),M.cancelBubble===!0&&Ht(q),d.value.dispatchEvent(q),Qe(M),M.qKeyEvent=!0}i("keyup",M)}T()}}function T(M){const q=p.value;M===!0||Aa!==d.value&&Oa!==d.value||q===null||q===document.activeElement||(q.setAttribute("tabindex",-1),q.focus()),Aa===d.value&&(g!==null&&(g.removeEventListener("touchcancel",I,nr),g.removeEventListener("touchend",I,nr)),Aa=g=null),Oa===d.value&&(document.removeEventListener("mouseup",I,nr),Oa=null),Fa===d.value&&(document.removeEventListener("keyup",I,!0),d.value!==null&&d.value.removeEventListener("blur",I,nr),Fa=null),d.value!==null&&d.value.classList.remove("q-btn--active")}function R(M){Qe(M),M.qSkipRipple=!0}return st(()=>{T(!0)}),Object.assign(r,{click:M=>{h.value===!0&&k(M)}}),()=>{let M=[];t.icon!==void 0&&M.push(S(vt,{name:t.icon,left:t.stack!==!0&&v.value===!0,role:"img"})),v.value===!0&&M.push(S("span",{class:"block"},[t.label])),M=Jt(e.default,M),t.iconRight!==void 0&&t.round===!1&&M.push(S(vt,{name:t.iconRight,right:t.stack!==!0&&v.value===!0,role:"img"}));const q=[S("span",{class:"q-focus-helper",ref:p})];return t.loading===!0&&t.percentage!==void 0&&q.push(S("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[S("span",{class:"q-btn__progress-indicator fit block",style:y.value})])),q.push(S("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+a.value},M)),t.loading!==null&&q.push(S(di,{name:"q-transition--fade"},()=>t.loading===!0?[S("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[S(Dr)])]:null)),Fi(S(u.value,C.value,q),[[Id,b.value,void 0,m.value]])}}}),uS=ue({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:e}){const i=w(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(n=>t[n]===!0).map(n=>`q-btn-group--${n}`).join(" ");return"q-btn-group row no-wrap"+(r.length!==0?" "+r:"")+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>S("div",{class:i.value},De(e.default))}});function Fr(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),V3.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var cS={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},hS={...cS,contextMenu:Boolean};function i0({showing:t,avoidEmit:e,configureAnchorEl:i}){const{props:r,proxy:n,emit:o}=Ce(),a=G(null);let s=null;function l(d){return a.value!==null&&(d===void 0||d.touches===void 0||d.touches.length<=1)}const u={};function c(){Mi(u,"anchor")}function h(){if(r.target===!1||r.target===""||n.$el.parentNode===null)a.value=null;else if(r.target===!0)(function(d){for(a.value=d;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;i()})(n.$el.parentNode);else{let d=r.target;if(typeof r.target=="string")try{d=document.querySelector(r.target)}catch{d=void 0}d!=null?(a.value=d.$el||d,i()):a.value=null}}return i===void 0&&(Object.assign(u,{hide(d){n.hide(d)},toggle(d){n.toggle(d),d.qAnchorHandled=!0},toggleKey(d){gr(d,13)===!0&&u.toggle(d)},contextClick(d){n.hide(d),fi(d),ct(()=>{n.show(d),d.qAnchorHandled=!0})},prevent:fi,mobileTouch(d){if(u.mobileCleanup(d),l(d)!==!0)return;n.hide(d),a.value.classList.add("non-selectable");const p=d.target;Zt(u,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,n.show(d),d.qAnchorHandled=!0},300)},mobileCleanup(d){a.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),t.value===!0&&d!==void 0&&Fr()}}),i=function(d=r.contextMenu){if(r.noParentEvent===!0||a.value===null)return;let p;p=d===!0?n.$q.platform.is.mobile===!0?[[a.value,"touchstart","mobileTouch","passive"]]:[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],Zt(u,"anchor",p)}),ae(()=>r.contextMenu,d=>{a.value!==null&&(c(),i(d))}),ae(()=>r.target,()=>{a.value!==null&&c(),h()}),ae(()=>r.noParentEvent,d=>{a.value!==null&&(d===!0?c():i())}),Ft(()=>{h(),e!==!0&&r.modelValue===!0&&a.value===null&&o("update:modelValue",!1)}),st(()=>{s!==null&&clearTimeout(s),c()}),{anchorEl:a,canShow:l,anchorEvents:u}}function dS(t,e){const i=G(null);let r;function n(s,l){const u=(l!==void 0?"add":"remove")+"EventListener",c=l!==void 0?l:r;s!==window&&s[u]("scroll",c,Rt.passive),window[u]("scroll",c,Rt.passive),r=l}function o(){i.value!==null&&(n(i.value),i.value=null)}const a=ae(()=>t.noParentEvent,()=>{i.value!==null&&(o(),e())});return st(a),{localScrollTarget:i,unconfigureScrollTarget:o,changeScrollEvent:n}}var Ws={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Ys=["beforeShow","show","beforeHide","hide"];function Ks({showing:t,canShow:e,hideOnRouteChange:i,handleShow:r,handleHide:n,processOnMount:o}){const a=Ce(),{props:s,emit:l,proxy:u}=a;let c;function h(v){if(s.disable===!0||v!==void 0&&v.qAnchorHandled===!0||e!==void 0&&e(v)!==!0)return;const b=s["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!0),c=v,ct(()=>{c===v&&(c=void 0)})),s.modelValue!==null&&b!==!1||d(v)}function d(v){t.value!==!0&&(t.value=!0,l("beforeShow",v),r!==void 0?r(v):l("show",v))}function p(v){if(s.disable===!0)return;const b=s["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!1),c=v,ct(()=>{c===v&&(c=void 0)})),s.modelValue!==null&&b!==!1||f(v)}function f(v){t.value!==!1&&(t.value=!1,l("beforeHide",v),n!==void 0?n(v):l("hide",v))}function g(v){s.disable===!0&&v===!0?s["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):v===!0!==t.value&&(v===!0?d:f)(c)}ae(()=>s.modelValue,g),i!==void 0&&Jv(a)===!0&&ae(()=>u.$route.fullPath,()=>{i.value===!0&&t.value===!0&&p()}),o===!0&&Ft(()=>{g(s.modelValue)});const _={show:h,hide:p,toggle:function(v){t.value===!0?p(v):h(v)}};return Object.assign(u,_),_}var Yo=[],xu=[];function pS(t){xu=xu.filter(e=>e!==t)}function b_(t){pS(t),xu.length===0&&Yo.length!==0&&(Yo[Yo.length-1](),Yo=[])}function Xs(t){xu.length===0?t():Yo.push(t)}var hs=[],Gl=[],lL=1,Do=document.body;function r0(t,e){const i=document.createElement("div");if(i.id=e!==void 0?`q-portal--${e}--${lL++}`:t,u_.globalNodes!==void 0){const r=u_.globalNodes.class;r!==void 0&&(i.className=r)}return Do.appendChild(i),hs.push(i),Gl.push(e),i}function fS(t){const e=hs.indexOf(t);hs.splice(e,1),Gl.splice(e,1),t.remove()}var ds=[];function gS(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return sh(t)}else if(t.__qPortal===!0){const i=sh(t);return i!==void 0&&i.$options.name==="QPopupProxy"?(t.hide(e),i):t}t=sh(t)}while(t!=null)}var uL=ue({name:"QPortal",setup:(t,{slots:e})=>()=>e.default()});function n0(t,e,i,r){const n=G(!1),o=G(!1);let a=null;const s={},l=r==="dialog"&&function(c){for(c=c.parent;c!=null;){if(c.type.name==="QGlobalDialog")return!0;if(c.type.name==="QDialog"||c.type.name==="QMenu")return!1;c=c.parent}return!1}(t);function u(c){if(o.value=!1,c!==!0)return;b_(s),n.value=!1;const h=ds.indexOf(t.proxy);h!==-1&&ds.splice(h,1),a!==null&&(fS(a),a=null)}return cx(()=>{u(!0)}),t.proxy.__qPortal=!0,pi(t.proxy,"contentEl",()=>e.value),{showPortal:function(c){if(c===!0)return b_(s),void(o.value=!0);var h;o.value=!1,n.value===!1&&(l===!1&&a===null&&(a=r0(!1,r)),n.value=!0,ds.push(t.proxy),pS(h=s),xu.push(h))},hidePortal:u,portalIsActive:n,portalIsAccessible:o,renderPortal:()=>l===!0?i():n.value===!0?[S(EM,{to:a},S(uL,i))]:void 0}}var Jo={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Pd(t,e=()=>{},i=()=>{}){return{transitionProps:w(()=>{const r=`q-transition--${t.transitionShow||e()}`,n=`q-transition--${t.transitionHide||i()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${n}-leave-from`,leaveActiveClass:`${n}-leave-active`,leaveToClass:`${n}-leave-to`}}),transitionStyle:w(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}function ps(){let t;const e=Ce();function i(){t=void 0}return In(i),st(i),{removeTick:i,registerTick(r){t=r,ct(()=>{t===r&&(uo(e)===!1&&t(),t=void 0)})}}}function En(){let t=null;const e=Ce();function i(){t!==null&&(clearTimeout(t),t=null)}return In(i),st(i),{removeTimeout:i,registerTimeout(r,n){i(),uo(e)===!1&&(t=setTimeout(()=>{t=null,r()},n))}}}var Hp,xa=[Element,String],cL=[null,document,document.body,document.scrollingElement,document.documentElement];function cn(t,e){let i=function(r){if(r==null)return;if(typeof r=="string")try{return document.querySelector(r)||void 0}catch{return}const n=Ot(r);return n?n.$el||n:void 0}(e);if(i===void 0){if(t==null)return window;i=t.closest(".scroll,.scroll-y,.overflow-auto")}return cL.includes(i)?window:i}function Ec(t){return(t===window?document.body:t).scrollHeight}function co(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function Rd(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function mS(t,e,i=0){const r=arguments[3]===void 0?performance.now():arguments[3],n=co(t);i<=0?n!==e&&wm(t,e):requestAnimationFrame(o=>{const a=o-r,s=n+(e-n)/Math.max(a,i)*a;wm(t,s),s!==e&&mS(t,e,i-a,o)})}function vS(t,e,i=0){const r=arguments[3]===void 0?performance.now():arguments[3],n=Rd(t);i<=0?n!==e&&Sm(t,e):requestAnimationFrame(o=>{const a=o-r,s=n+(e-n)/Math.max(a,i)*a;Sm(t,s),s!==e&&vS(t,e,i-a,o)})}function wm(t,e){t!==window?t.scrollTop=e:window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e)}function Sm(t,e){t!==window?t.scrollLeft=e:window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)}function fs(t,e,i){i?mS(t,e,i):wm(t,e)}function Up(t,e,i){i?vS(t,e,i):Sm(t,e)}function lh(){if(Hp!==void 0)return Hp;const t=document.createElement("p"),e=document.createElement("div");xm(t,{width:"100%",height:"200px"}),xm(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const i=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return i===r&&(r=e.clientWidth),e.remove(),Hp=i-r}function hL(t,e=!0){return!(!t||t.nodeType!==Node.ELEMENT_NODE)&&(e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"])))}var As,ea=[];function dL(t){As=t.keyCode===27}function pL(){As===!0&&(As=!1)}function fL(t){As===!0&&(As=!1,gr(t,27)===!0&&ea[ea.length-1](t))}function yS(t){window[t]("keydown",dL),window[t]("blur",pL),window[t]("keyup",fL),As=!1}function _S(t){at.is.desktop===!0&&(ea.push(t),ea.length===1&&yS("addEventListener"))}function Xh(t){const e=ea.indexOf(t);e!==-1&&(ea.splice(e,1),ea.length===0&&yS("removeEventListener"))}var ta=[];function bS(t){ta[ta.length-1](t)}function xS(t){at.is.desktop===!0&&(ta.push(t),ta.length===1&&document.body.addEventListener("focusin",bS))}function Cm(t){const e=ta.indexOf(t);e!==-1&&(ta.splice(e,1),ta.length===0&&document.body.removeEventListener("focusin",bS))}var x_,w_,{notPassiveCapture:Zh}=Rt,ia=[];function Qh(t){const e=t.target;if(e===void 0||e.nodeType===8||e.classList.contains("no-pointer-events")===!0)return;let i=ds.length-1;for(;i>=0;){const r=ds[i].$;if(r.type.name!=="QTooltip"){if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;i--}else i--}for(let r=ia.length-1;r>=0;r--){const n=ia[r];if(n.anchorEl.value!==null&&n.anchorEl.value.contains(e)!==!1||e!==document.body&&(n.innerRef.value===null||n.innerRef.value.contains(e)!==!1))return;t.qClickOutside=!0,n.onClickOutside(t)}}function wS(t){ia.push(t),ia.length===1&&(document.addEventListener("mousedown",Qh,Zh),document.addEventListener("touchstart",Qh,Zh))}function Jh(t){const e=ia.findIndex(i=>i===t);e!==-1&&(ia.splice(e,1),ia.length===0&&(document.removeEventListener("mousedown",Qh,Zh),document.removeEventListener("touchstart",Qh,Zh)))}function ed(t){const e=t.split(" ");return e.length===2&&(["top","center","bottom"].includes(e[0])!==!0?!1:["left","middle","right","start","end"].includes(e[1])===!0||!1)}function SS(t){return!t||t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}var Mm={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function td(t,e){const i=t.split(" ");return{vertical:i[0],horizontal:Mm[`${i[1]}#${e===!0?"rtl":"ltr"}`]}}function S_(t,e,i,r){return{top:t[i.vertical]-e[r.vertical],left:t[i.horizontal]-e[r.horizontal]}}function o0(t,e=0){if(t.targetEl===null||t.anchorEl===null||e>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0)return void setTimeout(()=>{o0(t,e+1)},10);const{targetEl:i,offset:r,anchorEl:n,anchorOrigin:o,selfOrigin:a,absoluteOffset:s,fit:l,cover:u,maxHeight:c,maxWidth:h}=t;if(at.is.ios===!0&&window.visualViewport!==void 0){const L=document.body.style,{offsetLeft:A,offsetTop:E}=window.visualViewport;A!==x_&&(L.setProperty("--q-pe-left",A+"px"),x_=A),E!==w_&&(L.setProperty("--q-pe-top",E+"px"),w_=E)}const{scrollLeft:d,scrollTop:p}=i,f=s===void 0?function(L,A){let{top:E,left:I,right:T,bottom:R,width:M,height:q}=L.getBoundingClientRect();return A!==void 0&&(E-=A[1],I-=A[0],R+=A[1],T+=A[0],M+=A[0],q+=A[1]),{top:E,bottom:R,height:q,left:I,right:T,width:M,middle:I+(T-I)/2,center:E+(R-E)/2}}(n,u===!0?[0,0]:r):function(L,A,E){let{top:I,left:T}=L.getBoundingClientRect();return I+=A.top,T+=A.left,E!==void 0&&(I+=E[1],T+=E[0]),{top:I,bottom:I+1,height:1,left:T,right:T+1,width:1,middle:T,center:I}}(n,s,r);Object.assign(i.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:h,maxHeight:c,visibility:"visible"});const{offsetWidth:g,offsetHeight:_}=i,{elWidth:v,elHeight:b}=l===!0||u===!0?{elWidth:Math.max(f.width,g),elHeight:u===!0?Math.max(f.height,_):_}:{elWidth:g,elHeight:_};let m={maxWidth:h,maxHeight:c};l!==!0&&u!==!0||(m.minWidth=f.width+"px",u===!0&&(m.minHeight=f.height+"px")),Object.assign(i.style,m);const y={top:0,center:(C=b)/2,bottom:C,left:0,middle:(x=v)/2,right:x};var x,C;let k=S_(f,y,o,a);if(s===void 0||r===void 0)Wp(k,f,y,o,a);else{const{top:L,left:A}=k;Wp(k,f,y,o,a);let E=!1;if(k.top!==L){E=!0;const I=2*r[1];f.center=f.top-=I,f.bottom-=I+2}if(k.left!==A){E=!0;const I=2*r[0];f.middle=f.left-=I,f.right-=I+2}E===!0&&(k=S_(f,y,o,a),Wp(k,f,y,o,a))}m={top:k.top+"px",left:k.left+"px"},k.maxHeight!==void 0&&(m.maxHeight=k.maxHeight+"px",f.height>k.maxHeight&&(m.minHeight=m.maxHeight)),k.maxWidth!==void 0&&(m.maxWidth=k.maxWidth+"px",f.width>k.maxWidth&&(m.minWidth=m.maxWidth)),Object.assign(i.style,m),i.scrollTop!==p&&(i.scrollTop=p),i.scrollLeft!==d&&(i.scrollLeft=d)}function Wp(t,e,i,r,n){const o=i.bottom,a=i.right,s=lh(),l=window.innerHeight-s,u=document.body.clientWidth;if(t.top<0||t.top+o>l)if(n.vertical==="center")t.top=e[r.vertical]>l/2?Math.max(0,l-o):0,t.maxHeight=Math.min(o,l);else if(e[r.vertical]>l/2){const c=Math.min(l,r.vertical==="center"?e.center:r.vertical===n.vertical?e.bottom:e.top);t.maxHeight=Math.min(o,c),t.top=Math.max(0,c-o)}else t.top=Math.max(0,r.vertical==="center"?e.center:r.vertical===n.vertical?e.top:e.bottom),t.maxHeight=Math.min(o,l-t.top);if(t.left<0||t.left+a>u)if(t.maxWidth=Math.min(a,u),n.horizontal==="middle")t.left=e[r.horizontal]>u/2?Math.max(0,u-a):0;else if(e[r.horizontal]>u/2){const c=Math.min(u,r.horizontal==="middle"?e.middle:r.horizontal===n.horizontal?e.right:e.left);t.maxWidth=Math.min(a,c),t.left=Math.max(0,c-t.maxWidth)}else t.left=Math.max(0,r.horizontal==="middle"?e.middle:r.horizontal===n.horizontal?e.left:e.right),t.maxWidth=Math.min(a,u-t.left)}["left","middle","right"].forEach(t=>{Mm[`${t}#ltr`]=t,Mm[`${t}#rtl`]=t});var Yp,Zs=ue({name:"QMenu",inheritAttrs:!1,props:{...hS,...Ws,...ft,...Jo,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:ed},self:{type:String,validator:ed},offset:{type:Array,validator:SS},scrollTarget:xa,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ys,"click","escapeKey"],setup(t,{slots:e,emit:i,attrs:r}){let n,o,a,s=null;const l=Ce(),{proxy:u}=l,{$q:c}=u,h=G(null),d=G(!1),p=w(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),f=gt(t,c),{registerTick:g,removeTick:_}=ps(),{registerTimeout:v}=En(),{transitionProps:b,transitionStyle:m}=Pd(t),{localScrollTarget:y,changeScrollEvent:x,unconfigureScrollTarget:C}=dS(t,$),{anchorEl:k,canShow:L}=i0({showing:d}),{hide:A}=Ks({showing:d,canShow:L,handleShow:function(z){if(s=t.noRefocus===!1?document.activeElement:null,xS(te),E(),$(),n=void 0,z!==void 0&&(t.touchPosition||t.contextMenu)){const B=Ai(z);if(B.left!==void 0){const{top:K,left:U}=k.value.getBoundingClientRect();n={left:B.left-U,top:B.top-K}}}o===void 0&&(o=ae(()=>c.screen.width+"|"+c.screen.height+"|"+t.self+"|"+t.anchor+"|"+c.lang.rtl,N)),t.noFocus!==!0&&document.activeElement.blur(),g(()=>{N(),t.noFocus!==!0&&V()}),v(()=>{c.platform.is.ios===!0&&(a=t.autoClose,h.value.click()),N(),E(!0),i("show",z)},t.transitionDuration)},handleHide:function(z){_(),I(),O(!0),s===null||z!==void 0&&z.qClickOutside===!0||(((z&&z.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),v(()=>{I(!0),i("hide",z)},t.transitionDuration)},hideOnRouteChange:p,processOnMount:!0}),{showPortal:E,hidePortal:I,renderPortal:T}=n0(l,h,function(){return S(di,b.value,()=>d.value===!0?S("div",{role:"menu",...r,ref:h,tabindex:-1,class:["q-menu q-position-engine scroll"+P.value,r.class],style:[r.style,m.value],...F.value},De(e.default)):null)},"menu"),R={anchorEl:k,innerRef:h,onClickOutside(z){if(t.persistent!==!0&&d.value===!0)return A(z),(z.type==="touchstart"||z.target.classList.contains("q-dialog__backdrop"))&&Qe(z),!0}},M=w(()=>td(t.anchor||(t.cover===!0?"center middle":"bottom start"),c.lang.rtl)),q=w(()=>t.cover===!0?M.value:td(t.self||"top start",c.lang.rtl)),P=w(()=>(t.square===!0?" q-menu--square":"")+(f.value===!0?" q-menu--dark q-dark":"")),F=w(()=>t.autoClose===!0?{onClick:J}:{}),j=w(()=>d.value===!0&&t.persistent!==!0);function V(){Xs(()=>{let z=h.value;z&&z.contains(document.activeElement)!==!0&&(z=z.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||z.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||z.querySelector("[autofocus], [data-autofocus]")||z,z.focus({preventScroll:!0}))})}function O(z){n=void 0,o!==void 0&&(o(),o=void 0),z!==!0&&d.value!==!0||(Cm(te),C(),Jh(R),Xh(ie)),z!==!0&&(s=null)}function $(){k.value===null&&t.scrollTarget===void 0||(y.value=cn(k.value,t.scrollTarget),x(y.value,N))}function J(z){a!==!0?(gS(u,z),i("click",z)):a=!1}function te(z){j.value===!0&&t.noFocus!==!0&&oS(h.value,z.target)!==!0&&V()}function ie(z){i("escapeKey"),A(z)}function N(){o0({targetEl:h.value,offset:t.offset,anchorEl:k.value,anchorOrigin:M.value,selfOrigin:q.value,absoluteOffset:n,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}return ae(j,z=>{z===!0?(_S(ie),wS(R)):(Xh(ie),Jh(R))}),st(O),Object.assign(u,{focus:V,updatePosition:N}),T}}),Lc=0,vi=new Array(256);for(let t=0;t<256;t++)vi[t]=(t+256).toString(16).substring(1);var gL=(()=>{const t=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const i=new Uint8Array(e);return t.getRandomValues(i),i}}return e=>{const i=[];for(let r=e;r>0;r--)i.push(Math.floor(256*Math.random()));return i}})();function wu(){(Yp===void 0||Lc+16>4096)&&(Lc=0,Yp=gL(4096));const t=Array.prototype.slice.call(Yp,Lc,Lc+=16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,vi[t[0]]+vi[t[1]]+vi[t[2]]+vi[t[3]]+"-"+vi[t[4]]+vi[t[5]]+"-"+vi[t[6]]+vi[t[7]]+"-"+vi[t[8]]+vi[t[9]]+"-"+vi[t[10]]+vi[t[11]]+vi[t[12]]+vi[t[13]]+vi[t[14]]+vi[t[15]]}function C_(t,e){return t??(e===!0?`f_${wu()}`:null)}function qd({getValue:t,required:e=!0}={}){if(fr.value===!0){const r=G(t!==void 0?(i=t())==null?null:i:null);return e===!0&&r.value===null&&Ft(()=>{r.value=`f_${wu()}`}),t!==void 0&&ae(t,n=>{r.value=C_(n,e)}),r}var i;return t!==void 0?w(()=>C_(t(),e)):G(`f_${wu()}`)}var mL=Object.keys(t0),vL=ue({name:"QBtnDropdown",props:{...t0,...Jo,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),n=G(t.modelValue),o=G(null),a=qd(),s=w(()=>{const m={"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a.value,"aria-label":t.toggleAriaLabel||r.$q.lang.label[n.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(m["aria-disabled"]="true"),m}),l=w(()=>"q-btn-dropdown__arrow"+(n.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),u=w(()=>lS(t)),c=w(()=>function(m){return mL.reduce((y,x)=>{const C=m[x];return C!==void 0&&(y[x]=C),y},{})}(t));function h(m){n.value=!0,i("beforeShow",m)}function d(m){i("show",m),i("update:modelValue",!0)}function p(m){n.value=!1,i("beforeHide",m)}function f(m){i("hide",m),i("update:modelValue",!1)}function g(m){i("click",m)}function _(m){Ht(m),b(),i("click",m)}function v(m){o.value!==null&&o.value.show(m)}function b(m){o.value!==null&&o.value.hide(m)}return ae(()=>t.modelValue,m=>{o.value!==null&&o.value[m?"show":"hide"]()}),ae(()=>t.split,b),Object.assign(r,{show:v,hide:b,toggle:function(m){o.value!==null&&o.value.toggle(m)}}),Ft(()=>{t.modelValue===!0&&v()}),()=>{const m=[S(vt,{class:l.value,name:t.dropdownIcon||r.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&m.push(S(Zs,{ref:o,id:a.value,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:h,onShow:d,onBeforeHide:p,onHide:f},e.default)),t.split===!1?S(_t,{class:"q-btn-dropdown q-btn-dropdown--simple",...c.value,...s.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:g},{default:()=>De(e.label,[]).concat(m),loading:e.loading}):S(uS,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...u.value,glossy:t.glossy,stretch:t.stretch},()=>[S(_t,{class:"q-btn-dropdown--current",...c.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:_},{default:e.label,loading:e.loading}),S(_t,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...s.value,...u.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>m)])}}}),_r={name:String};function Vu(t){return w(()=>({type:"hidden",name:t.name,value:t.modelValue}))}function wo(t={}){return(e,i,r)=>{e[i](S("input",{class:"hidden"+(r||""),...t.value}))}}function a0(t){return w(()=>t.name||t.for)}ue({name:"QBtnToggle",props:{..._r,modelValue:{required:!0},options:{type:Array,required:!0,validator:t=>t.every(e=>("label"in e||"icon"in e||"slot"in e)&&"value"in e)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(t,{slots:e,emit:i}){const r=w(()=>t.options.find(c=>c.value===t.modelValue)!==void 0),n=wo(w(()=>({type:"hidden",name:t.name,value:t.modelValue}))),o=w(()=>lS(t)),a=w(()=>({rounded:t.rounded,dense:t.dense,...o.value})),s=w(()=>t.options.map((c,h)=>{const{attrs:d,value:p,slot:f,...g}=c;return{slot:f,props:{key:h,"aria-pressed":p===t.modelValue?"true":"false",...d,...g,...a.value,disable:t.disable===!0||g.disable===!0,color:p===t.modelValue?l(g,"toggleColor"):l(g,"color"),textColor:p===t.modelValue?l(g,"toggleTextColor"):l(g,"textColor"),noCaps:l(g,"noCaps")===!0,noWrap:l(g,"noWrap")===!0,size:l(g,"size"),padding:l(g,"padding"),ripple:l(g,"ripple"),stack:l(g,"stack")===!0,stretch:l(g,"stretch")===!0,onClick(_){(function(v,b,m){t.readonly!==!0&&(t.modelValue===v?t.clearable===!0&&(i("update:modelValue",null,null),i("clear")):i("update:modelValue",v,b),i("click",m))})(p,c,_)}}}}));function l(c,h){return c[h]===void 0?t[h]:c[h]}function u(){const c=s.value.map(h=>S(_t,h.props,h.slot!==void 0?e[h.slot]:void 0));return t.name!==void 0&&t.disable!==!0&&r.value===!0&&n(c,"push"),Jt(e.default,c)}return()=>S(uS,{class:"q-btn-toggle",...o.value,rounded:t.rounded,stretch:t.stretch,glossy:t.glossy,spread:t.spread},u)}});var CS=ue({name:"QCard",props:{...ft,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=gt(t,i),n=w(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>S(t.tag,{class:n.value},De(e.default))}}),jo=ue({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const i=w(()=>"q-card__section q-card__section--"+(t.horizontal===!0?"horiz row no-wrap":"vert"));return()=>S(t.tag,{class:i.value},De(e.default))}}),yL=ue({name:"QCardActions",props:{...Xv,vertical:Boolean},setup(t,{slots:e}){const i=Zv(t),r=w(()=>`q-card__actions ${i.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>S("div",{class:r.value},De(e.default))}}),s0={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},_L=Object.keys(s0);function id(t){const e={};for(const i of _L)t[i]===!0&&(e[i]=!0);return Object.keys(e).length===0?s0:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}s0.all=!0;var bL=["INPUT","TEXTAREA"];function rd(t,e){return e.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof e.handler=="function"&&bL.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(e.uid)===-1)}function xL(t){const e=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((i,r)=>{const n=parseFloat(i);n&&(e[r]=n)}),e}var wL=Ar({name:"touch-swipe",beforeMount(t,{value:e,arg:i,modifiers:r}){if(r.mouse!==!0&&at.has.touch!==!0)return;const n=r.mouseCapture===!0?"Capture":"",o={handler:e,sensitivity:xL(i),direction:id(r),noop:ai,mouseStart(a){rd(a,o)&&Ed(a)&&(Zt(o,"temp",[[document,"mousemove","move",`notPassive${n}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(a,!0))},touchStart(a){if(rd(a,o)){const s=a.target;Zt(o,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),o.start(a)}},start(a,s){at.is.firefox===!0&&cs(t,!0);const l=Ai(a);o.event={x:l.left,y:l.top,time:Date.now(),mouse:s===!0,dir:!1}},move(a){if(o.event===void 0)return;if(o.event.dir!==!1)return void Qe(a);const s=Date.now()-o.event.time;if(s===0)return;const l=Ai(a),u=l.left-o.event.x,c=Math.abs(u),h=l.top-o.event.y,d=Math.abs(h);if(o.event.mouse!==!0){if(c<o.sensitivity[1]&&d<o.sensitivity[1])return void o.end(a)}else{if(window.getSelection().toString()!=="")return void o.end(a);if(c<o.sensitivity[2]&&d<o.sensitivity[2])return}const p=c/s,f=d/s;o.direction.vertical===!0&&c<d&&c<100&&f>o.sensitivity[0]&&(o.event.dir=h<0?"up":"down"),o.direction.horizontal===!0&&c>d&&d<100&&p>o.sensitivity[0]&&(o.event.dir=u<0?"left":"right"),o.direction.up===!0&&c<d&&h<0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&c<d&&h>0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&c>d&&u<0&&d<100&&p>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&c>d&&u>0&&d<100&&p>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(Qe(a),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Fr(),o.styleCleanup=g=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const _=()=>{document.body.classList.remove("no-pointer-events--children")};g===!0?setTimeout(_,50):_()}),o.handler({evt:a,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:s,distance:{x:c,y:d}})):o.end(a)},end(a){o.event!==void 0&&(Mi(o,"temp"),at.is.firefox===!0&&cs(t,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),a!==void 0&&o.event.dir!==!1&&Qe(a),o.event=void 0)}};if(t.__qtouchswipe=o,r.mouse===!0){const a=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";Zt(o,"main",[[t,"mousedown","mouseStart",`passive${a}`]])}at.has.touch===!0&&Zt(o,"main",[[t,"touchstart","touchStart","passive"+(r.capture===!0?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchswipe;i!==void 0&&(e.oldValue!==e.value&&(typeof e.value!="function"&&i.end(),i.handler=e.value),i.direction=id(e.modifiers))},beforeUnmount(t){const e=t.__qtouchswipe;e!==void 0&&(Mi(e,"main"),Mi(e,"temp"),at.is.firefox===!0&&cs(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchswipe)}});function Gu(){let t=Object.create(null);return{getCache:(e,i)=>t[e]===void 0?t[e]=typeof i=="function"?i():i:t[e],setCache(e,i){t[e]=i},hasCache:e=>Object.hasOwnProperty.call(t,e),clearCache(e){e!==void 0?delete t[e]:t=Object.create(null)}}}var l0={name:{required:!0},disable:Boolean},M_={setup:(t,{slots:e})=>()=>S("div",{class:"q-panel scroll",role:"tabpanel"},De(e.default))},u0={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},c0=["update:modelValue","beforeTransition","transition"];function h0(){const{props:t,emit:e,proxy:i}=Ce(),{getCache:r}=Gu(),{registerTimeout:n}=En();let o,a;const s=G(null),l=G(null);function u(E){const I=t.vertical===!0?"up":"left";k((i.$q.lang.rtl===!0?-1:1)*(E.direction===I?1:-1))}const c=w(()=>[[wL,u,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),h=w(()=>t.transitionPrev||"slide-"+(t.vertical===!0?"down":"right")),d=w(()=>t.transitionNext||"slide-"+(t.vertical===!0?"up":"left")),p=w(()=>`--q-transition-duration: ${t.transitionDuration}ms`),f=w(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),g=w(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),_=w(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);function v(){k(1)}function b(){k(-1)}function m(E){e("update:modelValue",E)}function y(E){return E!=null&&E!==""}function x(E){return o.findIndex(I=>I.props.name===E&&I.props.disable!==""&&I.props.disable!==!0)}function C(E){const I=E!==0&&t.animated===!0&&s.value!==-1?"q-transition--"+(E===-1?h.value:d.value):null;l.value!==I&&(l.value=I)}function k(E,I=s.value){let T=I+E;for(;T!==-1&&T<o.length;){const R=o[T];if(R!==void 0&&R.props.disable!==""&&R.props.disable!==!0)return C(E),a=!0,e("update:modelValue",R.props.name),void setTimeout(()=>{a=!1});T+=E}t.infinite===!0&&o.length!==0&&I!==-1&&I!==o.length&&k(E,E===-1?o.length:-1)}function L(){const E=x(t.modelValue);return s.value!==E&&(s.value=E),!0}function A(){const E=y(t.modelValue)===!0&&L()&&o[s.value];return t.keepAlive===!0?[S(hx,g.value,[S(_.value===!0?r(f.value,()=>({...M_,name:f.value})):M_,{key:f.value,style:p.value},()=>E)])]:[S("div",{class:"q-panel scroll",style:p.value,key:f.value,role:"tabpanel"},[E])]}return ae(()=>t.modelValue,(E,I)=>{const T=y(E)===!0?x(E):-1;a!==!0&&C(T===-1?0:T<x(I)?-1:1),s.value!==T&&(s.value=T,e("beforeTransition",E,I),n(()=>{e("transition",E,I)},t.transitionDuration))}),Object.assign(i,{next:v,previous:b,goTo:m}),{panelIndex:s,panelDirectives:c,updatePanelsList:function(E){return o=Qv(De(E.default,[])).filter(I=>I.props!==null&&I.props.slot===void 0&&y(I.props.name)===!0),o.length},updatePanelIndex:L,getPanelContent:function(){if(o.length!==0)return t.animated===!0?[S(di,{name:l.value},A)]:A()},getEnabledPanels:function(){return o.filter(E=>E.props.disable!==""&&E.props.disable!==!0)},getPanels:function(){return o},isValidPanelName:y,keepAliveProps:g,needsUniqueKeepAliveWrapper:_,goToPanelByOffset:k,goToPanel:m,nextPanel:v,previousPanel:b}}var Kp=0,d0={fullscreen:Boolean,noRouteFullscreenExit:Boolean},p0=["update:fullscreen","fullscreen"];function f0(){const t=Ce(),{props:e,emit:i,proxy:r}=t;let n,o;const a=G(!1);function s(){a.value===!0?u():l()}function l(){a.value!==!0&&(a.value=!0,o=r.$el.parentNode,o.replaceChild(n,r.$el),document.body.appendChild(r.$el),++Kp===1&&document.body.classList.add("q-body--fullscreen-mixin"))}function u(){a.value===!0&&(o.replaceChild(r.$el,n),a.value=!1,(Kp=Math.max(0,Kp-1))===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Jv(t)===!0&&ae(()=>r.$route.fullPath,()=>{e.noRouteFullscreenExit!==!0&&u()}),ae(()=>e.fullscreen,c=>{a.value!==c&&s()}),ae(a,c=>{i("update:fullscreen",c),i("fullscreen",c)}),Ym(()=>{n=document.createElement("span")}),Ft(()=>{e.fullscreen===!0&&l()}),st(u),Object.assign(r,{toggleFullscreen:s,setFullscreen:l,exitFullscreen:u}),{inFullscreen:a,toggleFullscreen:s}}var SL=["top","right","bottom","left"],CL=["regular","flat","outline","push","unelevated"];function MS(t,e){const i=G(null);return{refocusTargetEl:w(()=>t.disable===!0?null:S("span",{ref:i,class:"no-outline",tabindex:-1})),refocusTarget:function(r){const n=e.value;r!==void 0&&r.type.indexOf("key")===0?n!==null&&document.activeElement!==n&&n.contains(document.activeElement)===!0&&n.focus():i.value!==null&&(r===void 0||n!==null&&n.contains(r.target)===!0)&&i.value.focus()}}}ue({name:"QCarousel",props:{...ft,...u0,...d0,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:t=>CL.includes(t),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:t=>SL.includes(t)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...p0,...c0],setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=gt(t,i);let n,o=null;const{updatePanelsList:a,getPanelContent:s,panelDirectives:l,goToPanel:u,previousPanel:c,nextPanel:h,getEnabledPanels:d,panelIndex:p}=h0(),{inFullscreen:f}=f0(),g=w(()=>f.value!==!0&&t.height!==void 0?{height:t.height}:{}),_=w(()=>t.vertical===!0?"vertical":"horizontal"),v=w(()=>t.navigationPosition||(t.vertical===!0?"right":"bottom")),b=w(()=>`q-carousel q-panel-parent q-carousel--with${t.padding===!0?"":"out"}-padding`+(f.value===!0?" fullscreen":"")+(r.value===!0?" q-carousel--dark q-dark":"")+(t.arrows===!0?` q-carousel--arrows-${_.value}`:"")+(t.navigation===!0?` q-carousel--navigation-${v.value}`:"")),m=w(()=>{const A=[t.prevIcon||i.iconSet.carousel[t.vertical===!0?"up":"left"],t.nextIcon||i.iconSet.carousel[t.vertical===!0?"down":"right"]];return t.vertical===!1&&i.lang.rtl===!0?A.reverse():A}),y=w(()=>t.navigationIcon||i.iconSet.carousel.navigationIcon),x=w(()=>t.navigationActiveIcon||y.value),C=w(()=>({color:t.controlColor,textColor:t.controlTextColor,round:!0,[t.controlType]:!0,dense:!0}));function k(){const A=bu(t.autoplay)===!0?Math.abs(t.autoplay):5e3;o!==null&&clearTimeout(o),o=setTimeout(()=>{o=null,A>=0?h():c()},A)}function L(A,E){return S("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${v.value}`+(t.controlColor!==void 0?` text-${t.controlColor}`:"")},[S("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},d().map(E))])}return ae(()=>t.modelValue,()=>{t.autoplay&&k()}),ae(()=>t.autoplay,A=>{A?k():o!==null&&(clearTimeout(o),o=null)}),Ft(()=>{t.autoplay&&k()}),st(()=>{o!==null&&clearTimeout(o)}),()=>(n=a(e),S("div",{class:b.value,style:g.value},[mr("div",{class:"q-carousel__slides-container"},s(),"sl-cont",t.swipeable,()=>l.value)].concat(function(){const A=[];if(t.navigation===!0){const E=e["navigation-icon"]!==void 0?e["navigation-icon"]:T=>S(_t,{key:"nav"+T.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${T.active===!0?"":"in"}active`,...T.btnProps,onClick:T.onClick}),I=n-1;A.push(L("buttons",(T,R)=>{const M=T.props.name,q=p.value===R;return E({index:R,maxIndex:I,name:M,active:q,btnProps:{icon:q===!0?x.value:y.value,size:"sm",...C.value},onClick:()=>{u(M)}})}))}else if(t.thumbnails===!0){const E=t.controlColor!==void 0?` text-${t.controlColor}`:"";A.push(L("thumbnails",I=>{const T=I.props;return S("img",{key:"tmb#"+T.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${T.name===t.modelValue?"":"in"}active`+E,src:T.imgSrc||T["img-src"],onClick:()=>{u(T.name)}})}))}return t.arrows===!0&&p.value>=0&&((t.infinite===!0||p.value>0)&&A.push(S("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${_.value} absolute flex flex-center`},[S(_t,{icon:m.value[0],...C.value,onClick:c})])),(t.infinite===!0||p.value<n-1)&&A.push(S("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${_.value} absolute flex flex-center`},[S(_t,{icon:m.value[1],...C.value,onClick:h})]))),Jt(e.control,A)}())))}}),ue({name:"QCarouselSlide",props:{...l0,imgSrc:String},setup(t,{slots:e}){const i=w(()=>t.imgSrc?{backgroundImage:`url("${t.imgSrc}")`}:{});return()=>S("div",{class:"q-carousel__slide",style:i.value},De(e.default))}}),ue({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,default:()=>[18,18],validator:t=>t.length===2}},setup(t,{slots:e}){const i=w(()=>`q-carousel__control absolute absolute-${t.position}`),r=w(()=>({margin:`${t.offset[1]}px ${t.offset[0]}px`}));return()=>S("div",{class:i.value,style:r.value},De(e.default))}}),ue({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(t,{slots:e}){const i=w(()=>t.sent===!0?"sent":"received"),r=w(()=>`q-message-text-content q-message-text-content--${i.value}`+(t.textColor!==void 0?` text-${t.textColor}`:"")),n=w(()=>`q-message-text q-message-text--${i.value}`+(t.bgColor!==void 0?` text-${t.bgColor}`:"")),o=w(()=>"q-message-container row items-end no-wrap"+(t.sent===!0?" reverse":"")),a=w(()=>t.size!==void 0?`col-${t.size}`:""),s=w(()=>({msg:t.textHtml===!0?"innerHTML":"textContent",stamp:t.stampHtml===!0?"innerHTML":"textContent",name:t.nameHtml===!0?"innerHTML":"textContent",label:t.labelHtml===!0?"innerHTML":"textContent"}));function l(u,c){const h=c===!0?u.length>1?d=>d:d=>S("div",[d]):d=>S("div",{[s.value.msg]:d});return u.map((d,p)=>{return S("div",{key:p,class:n.value},[S("div",{class:r.value},(f=h(d),e.stamp!==void 0?[f,S("div",{class:"q-message-stamp"},e.stamp())]:t.stamp?[f,S("div",{class:"q-message-stamp",[s.value.stamp]:t.stamp})]:[f]))]);var f})}return()=>{const u=[];e.avatar!==void 0?u.push(e.avatar()):t.avatar!==void 0&&u.push(S("img",{class:`q-message-avatar q-message-avatar--${i.value}`,src:t.avatar,"aria-hidden":"true"}));const c=[];e.name!==void 0?c.push(S("div",{class:`q-message-name q-message-name--${i.value}`},e.name())):t.name!==void 0&&c.push(S("div",{class:`q-message-name q-message-name--${i.value}`,[s.value.name]:t.name})),e.default!==void 0?c.push(l(Qv(e.default()),!0)):t.text!==void 0&&c.push(l(t.text)),u.push(S("div",{class:a.value},c));const h=[];return e.label!==void 0?h.push(S("div",{class:"q-message-label"},e.label())):t.label!==void 0&&h.push(S("div",{class:"q-message-label",[s.value.label]:t.label})),h.push(S("div",{class:o.value},u)),S("div",{class:`q-message q-message-${i.value}`},h)}}});var kS={xs:30,sm:35,md:40,lg:50,xl:60},TS={...ft,...Rn,..._r,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},ES=["update:modelValue"];function LS(t,e){const{props:i,slots:r,emit:n,proxy:o}=Ce(),{$q:a}=o,s=gt(i,a),l=G(null),{refocusTargetEl:u,refocusTarget:c}=MS(i,l),h=qn(i,kS),d=w(()=>i.val!==void 0&&Array.isArray(i.modelValue)),p=w(()=>{const E=Vr(i.val);return d.value===!0?i.modelValue.findIndex(I=>Vr(I)===E):-1}),f=w(()=>d.value===!0?p.value!==-1:Vr(i.modelValue)===Vr(i.trueValue)),g=w(()=>d.value===!0?p.value===-1:Vr(i.modelValue)===Vr(i.falseValue)),_=w(()=>f.value===!1&&g.value===!1),v=w(()=>i.disable===!0?-1:i.tabindex||0),b=w(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(i.disable===!0?" disabled":"")+(s.value===!0?` q-${t}--dark`:"")+(i.dense===!0?` q-${t}--dense`:"")+(i.leftLabel===!0?" reverse":"")),m=w(()=>{const E=f.value===!0?"truthy":g.value===!0?"falsy":"indet",I=i.color===void 0||i.keepColor!==!0&&(t==="toggle"?f.value!==!0:g.value===!0)?"":` text-${i.color}`;return`q-${t}__inner relative-position non-selectable q-${t}__inner--${E}${I}`}),y=wo(w(()=>{const E={type:"checkbox"};return i.name!==void 0&&Object.assign(E,{".checked":f.value,"^checked":f.value===!0?"checked":void 0,name:i.name,value:d.value===!0?i.val:i.trueValue}),E})),x=w(()=>{const E={tabindex:v.value,role:t==="toggle"?"switch":"checkbox","aria-label":i.label,"aria-checked":_.value===!0?"mixed":f.value===!0?"true":"false"};return i.disable===!0&&(E["aria-disabled"]="true"),E});function C(E){E!==void 0&&(Qe(E),c(E)),i.disable!==!0&&n("update:modelValue",function(){if(d.value===!0){if(f.value===!0){const I=i.modelValue.slice();return I.splice(p.value,1),I}return i.modelValue.concat([i.val])}if(f.value===!0){if(i.toggleOrder!=="ft"||i.toggleIndeterminate===!1)return i.falseValue}else{if(g.value!==!0)return i.toggleOrder!=="ft"?i.trueValue:i.falseValue;if(i.toggleOrder==="ft"||i.toggleIndeterminate===!1)return i.trueValue}return i.indeterminateValue}(),E)}function k(E){E.keyCode!==13&&E.keyCode!==32||Qe(E)}function L(E){E.keyCode!==13&&E.keyCode!==32||C(E)}const A=e(f,_);return Object.assign(o,{toggle:C}),()=>{const E=A();i.disable!==!0&&y(E,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const I=[S("div",{class:m.value,style:h.value,"aria-hidden":"true"},E)];u.value!==null&&I.push(u.value);const T=i.label!==void 0?Jt(r.default,[i.label]):De(r.default);return T!==void 0&&I.push(S("div",{class:`q-${t}__label q-anchor--skip`},T)),S("div",{ref:l,class:b.value,...x.value,onClick:C,onKeydown:k,onKeyup:L},I)}}var Hl=ue({name:"QCheckbox",props:TS,emits:ES,setup(t){const e=S("div",{key:"svg",class:"q-checkbox__bg absolute"},[S("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[S("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),S("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);return LS("checkbox",function(i,r){const n=w(()=>(i.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>n.value!==null?[S("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[S(vt,{class:"q-checkbox__icon",name:n.value})])]:[e]})}}),ML={xs:8,sm:10,md:14,lg:20,xl:24},IS=ue({name:"QChip",props:{...ft,...Rn,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=gt(t,r),o=qn(t,ML),a=w(()=>t.selected===!0||t.icon!==void 0),s=w(()=>t.selected===!0?t.iconSelected||r.iconSet.chip.selected:t.icon),l=w(()=>t.iconRemove||r.iconSet.chip.remove),u=w(()=>t.disable===!1&&(t.clickable===!0||t.selected!==null)),c=w(()=>{const g=t.outline===!0&&t.color||t.textColor;return"q-chip row inline no-wrap items-center"+(t.outline===!1&&t.color!==void 0?` bg-${t.color}`:"")+(g?` text-${g} q-chip--colored`:"")+(t.disable===!0?" disabled":"")+(t.dense===!0?" q-chip--dense":"")+(t.outline===!0?" q-chip--outline":"")+(t.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(t.square===!0?" q-chip--square":"")+(n.value===!0?" q-chip--dark q-dark":"")}),h=w(()=>{const g=t.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0};return{chip:g,remove:{...g,role:"button","aria-hidden":"false","aria-label":t.removeAriaLabel||r.lang.label.remove}}});function d(g){g.keyCode===13&&p(g)}function p(g){t.disable||(i("update:selected",!t.selected),i("click",g))}function f(g){g.keyCode!==void 0&&g.keyCode!==13||(Qe(g),t.disable===!1&&(i("update:modelValue",!1),i("remove")))}return()=>{if(t.modelValue===!1)return;const g={class:c.value,style:o.value};return u.value===!0&&Object.assign(g,h.value.chip,{onClick:p,onKeyup:d}),mr("div",g,function(){const _=[];u.value===!0&&_.push(S("div",{class:"q-focus-helper"})),a.value===!0&&_.push(S(vt,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const v=t.label!==void 0?[S("div",{class:"ellipsis"},[t.label])]:void 0;return _.push(S("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Kv(e.default,v))),t.iconRight&&_.push(S(vt,{class:"q-chip__icon q-chip__icon--right",name:t.iconRight})),t.removable===!0&&_.push(S(vt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:l.value,...h.value.remove,onClick:f,onKeyup:f})),_}(),"ripple",t.ripple!==!1&&t.disable!==!0,()=>[[Id,t.ripple]])}}}),g0={...Rn,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:t=>t>=0&&t<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},PS=100*Math.PI,kL=Math.round(1e3*PS)/1e3,RS=ue({name:"QCircularProgress",props:{...g0,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=qn(t),n=w(()=>{const p=(i.lang.rtl===!0?-1:1)*t.angle;return{transform:t.reverse!==(i.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-p}deg)`:`rotate3d(0, 0, 1, ${p-90}deg)`}}),o=w(()=>t.instantFeedback!==!0&&t.indeterminate!==!0?{transition:`stroke-dashoffset ${t.animationSpeed}ms ease 0s, stroke ${t.animationSpeed}ms ease`}:""),a=w(()=>100/(1-t.thickness/2)),s=w(()=>`${a.value/2} ${a.value/2} ${a.value} ${a.value}`),l=w(()=>Lt(t.value,t.min,t.max)),u=w(()=>t.max-t.min),c=w(()=>t.thickness/2*a.value),h=w(()=>{const p=(t.max-l.value)/u.value,f=t.rounded===!0&&l.value<t.max&&p<.25?c.value/2*(1-p/.25):0;return PS*p+f});function d({thickness:p,offset:f,color:g,cls:_,rounded:v}){return S("circle",{class:"q-circular-progress__"+_+(g!==void 0?` text-${g}`:""),style:o.value,fill:"transparent",stroke:"currentColor","stroke-width":p,"stroke-dasharray":kL,"stroke-dashoffset":f,"stroke-linecap":v,cx:a.value,cy:a.value,r:50})}return()=>{const p=[];t.centerColor!==void 0&&t.centerColor!=="transparent"&&p.push(S("circle",{class:`q-circular-progress__center text-${t.centerColor}`,fill:"currentColor",r:50-c.value/2,cx:a.value,cy:a.value})),t.trackColor!==void 0&&t.trackColor!=="transparent"&&p.push(d({cls:"track",thickness:c.value,offset:0,color:t.trackColor})),p.push(d({cls:"circle",thickness:c.value,offset:h.value,color:t.color,rounded:t.rounded===!0?"round":void 0}));const f=[S("svg",{class:"q-circular-progress__svg",style:n.value,viewBox:s.value,"aria-hidden":"true"},p)];return t.showValue===!0&&f.push(S("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:t.fontSize}},e.default!==void 0?e.default():[S("div",l.value)])),S("div",{class:`q-circular-progress q-circular-progress--${t.indeterminate===!0?"in":""}determinate`,style:r.value,role:"progressbar","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.indeterminate===!0?void 0:l.value},Kv(e.internal,f))}}});function Xp(t,e,i){const r=Ai(t);let n,o=r.left-e.event.x,a=r.top-e.event.y,s=Math.abs(o),l=Math.abs(a);const u=e.direction;u.horizontal===!0&&u.vertical!==!0?n=o<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?n=a<0?"up":"down":u.up===!0&&a<0?(n="up",s>l&&(u.left===!0&&o<0?n="left":u.right===!0&&o>0&&(n="right"))):u.down===!0&&a>0?(n="down",s>l&&(u.left===!0&&o<0?n="left":u.right===!0&&o>0&&(n="right"))):u.left===!0&&o<0?(n="left",s<l&&(u.up===!0&&a<0?n="up":u.down===!0&&a>0&&(n="down"))):u.right===!0&&o>0&&(n="right",s<l&&(u.up===!0&&a<0?n="up":u.down===!0&&a>0&&(n="down")));let c=!1;if(n===void 0&&i===!1){if(e.event.isFirst===!0||e.event.lastDir===void 0)return{};n=e.event.lastDir,c=!0,n==="left"||n==="right"?(r.left-=o,s=0,o=0):(r.top-=a,l=0,a=0)}return{synthetic:c,payload:{evt:t,touch:e.event.mouse!==!0,mouse:e.event.mouse===!0,position:r,direction:n,isFirst:e.event.isFirst,isFinal:i===!0,duration:Date.now()-e.event.time,distance:{x:s,y:l},offset:{x:o,y:a},delta:{x:r.left-e.event.lastX,y:r.top-e.event.lastY}}}}var TL=0,dr=Ar({name:"touch-pan",beforeMount(t,{value:e,modifiers:i}){if(i.mouse!==!0&&at.has.touch!==!0)return;function r(o,a){i.mouse===!0&&a===!0?Qe(o):(i.stop===!0&&Ht(o),i.prevent===!0&&fi(o))}const n={uid:"qvtp_"+TL++,handler:e,modifiers:i,direction:id(i),noop:ai,mouseStart(o){rd(o,n)&&Ed(o)&&(Zt(n,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),n.start(o,!0))},touchStart(o){if(rd(o,n)){const a=o.target;Zt(n,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","passiveCapture"],[a,"touchend","end","passiveCapture"]]),n.start(o)}},start(o,a){if(at.is.firefox===!0&&cs(t,!0),n.lastEvt=o,a===!0||i.stop===!0){if(n.direction.all!==!0&&(a!==!0||n.modifiers.mouseAllDir!==!0&&n.modifiers.mousealldir!==!0)){const u=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&fi(u),o.cancelBubble===!0&&Ht(u),Object.assign(u,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[n.uid]:o.qClonedBy.concat(n.uid)}),n.initialEvent={target:o.target,event:u}}Ht(o)}const{left:s,top:l}=Ai(o);n.event={x:s,y:l,time:Date.now(),mouse:a===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:l}},move(o){if(n.event===void 0)return;const a=Ai(o),s=a.left-n.event.x,l=a.top-n.event.y;if(s===0&&l===0)return;n.lastEvt=o;const u=n.event.mouse===!0,c=()=>{let p;r(o,u),i.preserveCursor!==!0&&i.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Fr(),n.styleCleanup=f=>{if(n.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),u===!0){const g=()=>{document.body.classList.remove("no-pointer-events--children")};f!==void 0?setTimeout(()=>{g(),f()},50):g()}else f!==void 0&&f()}};if(n.event.detected===!0){n.event.isFirst!==!0&&r(o,n.event.mouse);const{payload:p,synthetic:f}=Xp(o,n,!1);return void(p!==void 0&&(n.handler(p)===!1?n.end(o):(n.styleCleanup===void 0&&n.event.isFirst===!0&&c(),n.event.lastX=p.position.left,n.event.lastY=p.position.top,n.event.lastDir=f===!0?void 0:p.direction,n.event.isFirst=!1)))}if(n.direction.all===!0||u===!0&&(n.modifiers.mouseAllDir===!0||n.modifiers.mousealldir===!0))return c(),n.event.detected=!0,void n.move(o);const h=Math.abs(s),d=Math.abs(l);h!==d&&(n.direction.horizontal===!0&&h>d||n.direction.vertical===!0&&h<d||n.direction.up===!0&&h<d&&l<0||n.direction.down===!0&&h<d&&l>0||n.direction.left===!0&&h>d&&s<0||n.direction.right===!0&&h>d&&s>0?(n.event.detected=!0,n.move(o)):n.end(o,!0))},end(o,a){if(n.event!==void 0){if(Mi(n,"temp"),at.is.firefox===!0&&cs(t,!1),a===!0)n.styleCleanup!==void 0&&n.styleCleanup(),n.event.detected!==!0&&n.initialEvent!==void 0&&n.initialEvent.target.dispatchEvent(n.initialEvent.event);else if(n.event.detected===!0){n.event.isFirst===!0&&n.handler(Xp(o===void 0?n.lastEvt:o,n).payload);const{payload:s}=Xp(o===void 0?n.lastEvt:o,n,!0),l=()=>{n.handler(s)};n.styleCleanup!==void 0?n.styleCleanup(l):l()}n.event=void 0,n.initialEvent=void 0,n.lastEvt=void 0}}};if(t.__qtouchpan=n,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Zt(n,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}at.has.touch===!0&&Zt(n,"main",[[t,"touchstart","touchStart","passive"+(i.capture===!0?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchpan;i!==void 0&&(e.oldValue!==e.value&&(typeof value!="function"&&i.end(),i.handler=e.value),i.direction=id(e.modifiers))},beforeUnmount(t){const e=t.__qtouchpan;e!==void 0&&(e.event!==void 0&&e.end(),Mi(e,"main"),Mi(e,"temp"),at.is.firefox===!0&&cs(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchpan)}}),k_="q-slider__marker-labels",EL=t=>({value:t}),LL=({marker:t})=>S("div",{key:t.value,style:t.style,class:t.classes},t.label),m0=[34,37,40,33,39,38],qS={...ft,..._r,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},AS=["pan","update:modelValue","change"];function FS({updateValue:t,updatePosition:e,getDragging:i,formAttrs:r}){const{props:n,emit:o,slots:a,proxy:{$q:s}}=Ce(),l=gt(n,s),u=wo(r),c=G(!1),h=G(!1),d=G(!1),p=G(!1),f=w(()=>n.vertical===!0?"--v":"--h"),g=w(()=>"-"+(n.switchLabelSide===!0?"switched":"standard")),_=w(()=>n.vertical===!0?n.reverse===!0:n.reverse!==(s.lang.rtl===!0)),v=w(()=>isNaN(n.innerMin)===!0||n.innerMin<n.min?n.min:n.innerMin),b=w(()=>isNaN(n.innerMax)===!0||n.innerMax>n.max?n.max:n.innerMax),m=w(()=>n.disable!==!0&&n.readonly!==!0&&v.value<b.value),y=w(()=>{if(n.step===0)return se=>se;const Z=(String(n.step).trim().split(".")[1]||"").length;return se=>parseFloat(se.toFixed(Z))}),x=w(()=>n.step===0?1:n.step),C=w(()=>m.value===!0?n.tabindex||0:-1),k=w(()=>n.max-n.min),L=w(()=>b.value-v.value),A=w(()=>W(v.value)),E=w(()=>W(b.value)),I=w(()=>n.vertical===!0?_.value===!0?"bottom":"top":_.value===!0?"right":"left"),T=w(()=>n.vertical===!0?"height":"width"),R=w(()=>n.vertical===!0?"width":"height"),M=w(()=>n.vertical===!0?"vertical":"horizontal"),q=w(()=>{const Z={role:"slider","aria-valuemin":v.value,"aria-valuemax":b.value,"aria-orientation":M.value,"data-step":n.step};return n.disable===!0?Z["aria-disabled"]="true":n.readonly===!0&&(Z["aria-readonly"]="true"),Z}),P=w(()=>`q-slider q-slider${f.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(n.vertical===!0?"row":"column")+(n.disable===!0?" disabled":" q-slider--enabled"+(m.value===!0?" q-slider--editable":""))+(d.value==="both"?" q-slider--focus":"")+(n.label||n.labelAlways===!0?" q-slider--label":"")+(n.labelAlways===!0?" q-slider--label-always":"")+(l.value===!0?" q-slider--dark":"")+(n.dense===!0?" q-slider--dense q-slider--dense"+f.value:""));function F(Z){const se="q-slider__"+Z;return`${se} ${se}${f.value} ${se}${f.value}${g.value}`}function j(Z){const se="q-slider__"+Z;return`${se} ${se}${f.value}`}const V=w(()=>{const Z=n.selectionColor||n.color;return"q-slider__selection absolute"+(Z!==void 0?` text-${Z}`:"")}),O=w(()=>j("markers")+" absolute overflow-hidden"),$=w(()=>j("track-container")),J=w(()=>F("pin")),te=w(()=>F("label")),ie=w(()=>F("text-container")),N=w(()=>F("marker-labels-container")+(n.markerLabelsClass!==void 0?` ${n.markerLabelsClass}`:"")),z=w(()=>"q-slider__track relative-position no-outline"+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),B=w(()=>{const Z={[R.value]:n.trackSize};return n.trackImg!==void 0&&(Z.backgroundImage=`url(${n.trackImg}) !important`),Z}),K=w(()=>"q-slider__inner absolute"+(n.innerTrackColor!==void 0?` bg-${n.innerTrackColor}`:"")),U=w(()=>{const Z=E.value-A.value,se={[I.value]:100*A.value+"%",[T.value]:Z===0?"2px":100*Z+"%"};return n.innerTrackImg!==void 0&&(se.backgroundImage=`url(${n.innerTrackImg}) !important`),se});function W(Z){return k.value===0?0:(Z-n.min)/k.value}const ve=w(()=>bu(n.markers)===!0?n.markers:x.value),ce=w(()=>{const Z=[],se=ve.value,Se=n.max;let Ie=n.min;do Z.push(Ie),Ie+=se;while(Ie<Se);return Z.push(Se),Z}),fe=w(()=>{const Z=` ${k_}${f.value}-`;return k_+`${Z}${n.switchMarkerLabelsSide===!0?"switched":"standard"}${Z}${_.value===!0?"rtl":"ltr"}`}),pe=w(()=>n.markerLabels===!1?null:function(Z){if(Z===!1)return null;if(Z===!0)return ce.value.map(EL);if(typeof Z=="function")return ce.value.map(Se=>{const Ie=Z(Se);return Ci(Ie)===!0?{...Ie,value:Se}:{value:Se,label:Ie}});const se=({value:Se})=>Se>=n.min&&Se<=n.max;return Array.isArray(Z)===!0?Z.map(Se=>Ci(Se)===!0?Se:{value:Se}).filter(se):Object.keys(Z).map(Se=>{const Ie=Z[Se],Ae=Number(Se);return Ci(Ie)===!0?{...Ie,value:Ae}:{value:Ae,label:Ie}}).filter(se)}(n.markerLabels).map((Z,se)=>({index:se,value:Z.value,label:Z.label||Z.value,classes:fe.value+(Z.classes!==void 0?" "+Z.classes:""),style:{...me(Z.value),...Z.style||{}}}))),Ee=w(()=>({markerList:pe.value,markerMap:we.value,classes:fe.value,getStyle:me})),Le=w(()=>{const Z=L.value===0?"2px":100*ve.value/L.value;return{...U.value,backgroundSize:n.vertical===!0?`2px ${Z}%`:`${Z}% 2px`}});function me(Z){return{[I.value]:100*(Z-n.min)/k.value+"%"}}const we=w(()=>{if(n.markerLabels===!1)return null;const Z={};return pe.value.forEach(se=>{Z[se.value]=se}),Z}),Pe=w(()=>[[dr,Ve,void 0,{[M.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ve(Z){Z.isFinal===!0?(p.value!==void 0&&(e(Z.evt),Z.touch===!0&&t(!0),p.value=void 0,o("pan","end")),c.value=!1,d.value=!1):Z.isFirst===!0?(p.value=i(Z.evt),e(Z.evt),t(),c.value=!0,o("pan","start")):(e(Z.evt),t())}function oe(){d.value=!1}function he(){h.value=!1,c.value=!1,t(!0),oe(),document.removeEventListener("mouseup",he,!0)}return st(()=>{document.removeEventListener("mouseup",he,!0)}),{state:{active:c,focus:d,preventFocus:h,dragging:p,editable:m,classes:P,tabindex:C,attributes:q,roundValueFn:y,keyStep:x,trackLen:k,innerMin:v,innerMinRatio:A,innerMax:b,innerMaxRatio:E,positionProp:I,sizeProp:T,isReversed:_},methods:{onActivate:function(Z){e(Z,i(Z)),t(),h.value=!0,c.value=!0,document.addEventListener("mouseup",he,!0)},onMobileClick:function(Z){e(Z,i(Z)),t(!0)},onBlur:oe,onKeyup:function(Z){m0.includes(Z.keyCode)&&t(!0)},getContent:function(Z,se,Se,Ie){const Ae=[];n.innerTrackColor!=="transparent"&&Ae.push(S("div",{key:"inner",class:K.value,style:U.value})),n.selectionColor!=="transparent"&&Ae.push(S("div",{key:"selection",class:V.value,style:Z.value})),n.markers!==!1&&Ae.push(S("div",{key:"marker",class:O.value,style:Le.value})),Ie(Ae);const X=[mr("div",{key:"trackC",class:$.value,tabindex:se.value,...Se.value},[S("div",{class:z.value,style:B.value},Ae)],"slide",m.value,()=>Pe.value)];return n.markerLabels!==!1&&X[n.switchMarkerLabelsSide===!0?"unshift":"push"](S("div",{key:"markerL",class:N.value},function(){if(a["marker-label-group"]!==void 0)return a["marker-label-group"](Ee.value);const ne=a["marker-label"]||LL;return pe.value.map(ge=>ne({marker:ge,...Ee.value}))}())),X},getThumbRenderFn:function(Z){const se=w(()=>h.value!==!1||d.value!==Z.focusValue&&d.value!=="both"?"":" q-slider--focus"),Se=w(()=>`q-slider__thumb q-slider__thumb${f.value} q-slider__thumb${f.value}-${_.value===!0?"rtl":"ltr"} absolute non-selectable`+se.value+(Z.thumbColor.value!==void 0?` text-${Z.thumbColor.value}`:"")),Ie=w(()=>({width:n.thumbSize,height:n.thumbSize,[I.value]:100*Z.ratio.value+"%",zIndex:d.value===Z.focusValue?2:void 0})),Ae=w(()=>Z.labelColor.value!==void 0?` text-${Z.labelColor.value}`:""),X=w(()=>function(ge){if(n.vertical===!0)return null;const Re=s.lang.rtl!==n.reverse?1-ge:ge;return{transform:`translateX(calc(${2*Re-1} * ${n.thumbSize} / 2 + ${50-100*Re}%))`}}(Z.ratio.value)),ne=w(()=>"q-slider__text"+(Z.labelTextColor.value!==void 0?` text-${Z.labelTextColor.value}`:""));return()=>{const ge=[S("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[S("path",{d:n.thumbPath})]),S("div",{class:"q-slider__focus-ring fit"})];return n.label!==!0&&n.labelAlways!==!0||(ge.push(S("div",{class:J.value+" absolute fit no-pointer-events"+Ae.value},[S("div",{class:te.value,style:{minWidth:n.thumbSize}},[S("div",{class:ie.value,style:X.value},[S("span",{class:ne.value},Z.label.value)])])])),n.name!==void 0&&n.disable!==!0&&u(ge,"push")),S("div",{class:Se.value,style:Ie.value,...Z.getNodeData()},ge)}},convertRatioToModel:function(Z){const{min:se,max:Se,step:Ie}=n;let Ae=se+Z*(Se-se);if(Ie>0){const X=(Ae-v.value)%Ie;Ae+=(Math.abs(X)>=Ie/2?(X<0?-1:1)*Ie:0)-X}return Ae=y.value(Ae),Lt(Ae,v.value,b.value)},convertModelToRatio:W,getDraggingRatio:function(Z,se){const Se=Ai(Z),Ie=n.vertical===!0?Lt((Se.top-se.top)/se.height,0,1):Lt((Se.left-se.left)/se.width,0,1);return Lt(_.value===!0?1-Ie:Ie,A.value,E.value)}}}}var IL=()=>({}),Bo=ue({name:"QSlider",props:{...qS,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:AS,setup(t,{emit:e}){const{proxy:{$q:i}}=Ce(),{state:r,methods:n}=FS({updateValue:f,updatePosition:function(v,b=r.dragging.value){const m=n.getDraggingRatio(v,b);s.value=n.convertRatioToModel(m),a.value=t.snap!==!0||t.step===0?m:n.convertModelToRatio(s.value)},getDragging:function(){return o.value.getBoundingClientRect()},formAttrs:Vu(t)}),o=G(null),a=G(0),s=G(0);function l(){s.value=t.modelValue===null?r.innerMin.value:Lt(t.modelValue,r.innerMin.value,r.innerMax.value)}ae(()=>`${t.modelValue}|${r.innerMin.value}|${r.innerMax.value}`,l),l();const u=w(()=>n.convertModelToRatio(s.value)),c=w(()=>r.active.value===!0?a.value:u.value),h=w(()=>{const v={[r.positionProp.value]:100*r.innerMinRatio.value+"%",[r.sizeProp.value]:100*(c.value-r.innerMinRatio.value)+"%"};return t.selectionImg!==void 0&&(v.backgroundImage=`url(${t.selectionImg}) !important`),v}),d=n.getThumbRenderFn({focusValue:!0,getNodeData:IL,ratio:c,label:w(()=>t.labelValue!==void 0?t.labelValue:s.value),thumbColor:w(()=>t.thumbColor||t.color),labelColor:w(()=>t.labelColor),labelTextColor:w(()=>t.labelTextColor)}),p=w(()=>r.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:n.onMobileClick}:{onMousedown:n.onActivate,onFocus:g,onBlur:n.onBlur,onKeydown:_,onKeyup:n.onKeyup});function f(v){s.value!==t.modelValue&&e("update:modelValue",s.value),v===!0&&e("change",s.value)}function g(){r.focus.value=!0}function _(v){if(!m0.includes(v.keyCode))return;Qe(v);const b=([34,33].includes(v.keyCode)?10:1)*r.keyStep.value,m=([34,37,40].includes(v.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*b;s.value=Lt(r.roundValueFn.value(s.value+m),r.innerMin.value,r.innerMax.value),f()}return()=>{const v=n.getContent(h,r.tabindex,p,b=>{b.push(d())});return S("div",{ref:o,class:r.classes.value+(t.modelValue===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":t.modelValue},v)}}});function OS(){const t=G(!fr.value);return t.value===!1&&Ft(()=>{t.value=!0}),{isHydrated:t}}var zS=typeof ResizeObserver<"u",T_=zS===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},pa=ue({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:e}){let i,r=null,n={width:-1,height:-1};function o(l){l===!0||t.debounce===0||t.debounce==="0"?a():r===null&&(r=setTimeout(a,t.debounce))}function a(){if(r!==null&&(clearTimeout(r),r=null),i){const{offsetWidth:l,offsetHeight:u}=i;l===n.width&&u===n.height||(n={width:l,height:u},e("resize",n))}}const{proxy:s}=Ce();if(s.trigger=o,zS===!0){let l;const u=c=>{i=s.$el.parentNode,i?(l=new ResizeObserver(o),l.observe(i),a()):c!==!0&&ct(()=>{u(!0)})};return Ft(()=>{u()}),st(()=>{r!==null&&clearTimeout(r),l!==void 0&&(l.disconnect!==void 0?l.disconnect():i&&l.unobserve(i))}),ai}{let l=function(){r!==null&&(clearTimeout(r),r=null),h!==void 0&&(h.removeEventListener!==void 0&&h.removeEventListener("resize",o,Rt.passive),h=void 0)},u=function(){l(),i&&i.contentDocument&&(h=i.contentDocument.defaultView,h.addEventListener("resize",o,Rt.passive),a())};const{isHydrated:c}=OS();let h;return Ft(()=>{ct(()=>{i=s.$el,i&&u()})}),st(l),()=>{if(c.value===!0)return S("object",{class:"q--avoid-card-border",style:T_.style,tabindex:-1,type:"text/html",data:T_.url,"aria-hidden":"true",onLoad:u})}}}}),Su=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(e),t.scrollLeft=-1e3,Su=t.scrollLeft>=0,t.remove()}function PL(t,e,i){const r=i===!0?["left","right"]:["top","bottom"];return`absolute-${e===!0?r[0]:r[1]}${t?` text-${t}`:""}`}var RL=["left","center","right","justify"],E_=ue({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>RL.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,{registerTick:o}=ps(),{registerTick:a}=ps(),{registerTick:s}=ps(),{registerTimeout:l,removeTimeout:u}=En(),{registerTimeout:c,removeTimeout:h}=En(),d=G(null),p=G(null),f=G(t.modelValue),g=G(!1),_=G(!0),v=G(!1),b=G(!1),m=[],y=G(0),x=G(!1);let C,k=null,L=null;const A=w(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:PL(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),E=w(()=>{const me=y.value,we=f.value;for(let Pe=0;Pe<me;Pe++)if(m[Pe].name.value===we)return!0;return!1}),I=w(()=>`q-tabs__content--align-${g.value===!0?"left":b.value===!0?"justify":t.align}`),T=w(()=>`q-tabs row no-wrap items-center q-tabs--${g.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),R=w(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+I.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),M=w(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),q=w(()=>t.vertical!==!0&&n.lang.rtl===!0),P=w(()=>Su===!1&&q.value===!0);function F({name:me,setCurrent:we,skipEmit:Pe}){f.value!==me&&(Pe!==!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",me),we!==!0&&t["onUpdate:modelValue"]!==void 0||(function(Ve,oe){const he=Ve!=null&&Ve!==""?m.find(se=>se.name.value===Ve):null,Z=oe!=null&&oe!==""?m.find(se=>se.name.value===oe):null;if(Le===!0)Le=!1;else if(he&&Z){const se=he.tabIndicatorRef.value,Se=Z.tabIndicatorRef.value;k!==null&&(clearTimeout(k),k=null),se.style.transition="none",se.style.transform="none",Se.style.transition="none",Se.style.transform="none";const Ie=se.getBoundingClientRect(),Ae=Se.getBoundingClientRect();Se.style.transform=t.vertical===!0?`translate3d(0,${Ie.top-Ae.top}px,0) scale3d(1,${Ae.height?Ie.height/Ae.height:1},1)`:`translate3d(${Ie.left-Ae.left}px,0,0) scale3d(${Ae.width?Ie.width/Ae.width:1},1,1)`,s(()=>{k=setTimeout(()=>{k=null,Se.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Se.style.transform="none"},70)})}Z&&g.value===!0&&O(Z.rootRef.value)}(f.value,me),f.value=me))}function j(){o(()=>{V({width:d.value.offsetWidth,height:d.value.offsetHeight})})}function V(me){if(M.value===void 0||p.value===null)return;const we=me[M.value.container],Pe=Math.min(p.value[M.value.scroll],Array.prototype.reduce.call(p.value.children,(oe,he)=>oe+(he[M.value.content]||0),0)),Ve=we>0&&Pe>we;g.value=Ve,Ve===!0&&a($),b.value=we<parseInt(t.breakpoint,10)}function O(me){const{left:we,width:Pe,top:Ve,height:oe}=p.value.getBoundingClientRect(),he=me.getBoundingClientRect();let Z=t.vertical===!0?he.top-Ve:he.left-we;if(Z<0)return p.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Z),void $();Z+=t.vertical===!0?he.height-oe:he.width-Pe,Z>0&&(p.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Z),$())}function $(){const me=p.value;if(me===null)return;const we=me.getBoundingClientRect(),Pe=t.vertical===!0?me.scrollTop:Math.abs(me.scrollLeft);q.value===!0?(_.value=Math.ceil(Pe+we.width)<me.scrollWidth-1,v.value=Pe>0):(_.value=Pe>0,v.value=t.vertical===!0?Math.ceil(Pe+we.height)<me.scrollHeight:Math.ceil(Pe+we.width)<me.scrollWidth)}function J(me){L!==null&&clearInterval(L),L=setInterval(()=>{(function(we){const Pe=p.value,{get:Ve,set:oe}=z.value;let he=!1,Z=Ve(Pe);const se=we<Z?-1:1;return Z+=5*se,Z<0?(he=!0,Z=0):(se===-1&&Z<=we||se===1&&Z>=we)&&(he=!0,Z=we),oe(Pe,Z),$(),he})(me)===!0&&N()},5)}function te(){J(P.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){J(P.value===!0?0:Number.MAX_SAFE_INTEGER)}function N(){L!==null&&(clearInterval(L),L=null)}ae(q,$),ae(()=>t.modelValue,me=>{F({name:me,setCurrent:!0,skipEmit:!0})}),ae(()=>t.outsideArrows,j);const z=w(()=>P.value===!0?{get:me=>Math.abs(me.scrollLeft),set:(me,we)=>{me.scrollLeft=-we}}:t.vertical===!0?{get:me=>me.scrollTop,set:(me,we)=>{me.scrollTop=we}}:{get:me=>me.scrollLeft,set:(me,we)=>{me.scrollLeft=we}});function B(me,we){for(const Pe in me)if(me[Pe]!==we[Pe])return!1;return!0}function K(){let me=null,we={matchedLen:0,queryDiff:9999,hrefLen:0};const Pe=m.filter(Z=>Z.routeData!==void 0&&Z.routeData.hasRouterLink.value===!0),{hash:Ve,query:oe}=r.$route,he=Object.keys(oe).length;for(const Z of Pe){const se=Z.routeData.exact.value===!0;if(Z.routeData[se===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Se,query:Ie,matched:Ae,href:X}=Z.routeData.resolvedLink.value,ne=Object.keys(Ie).length;if(se===!0){if(Se!==Ve||ne!==he||B(oe,Ie)===!1)continue;me=Z.name.value;break}if(Se!==""&&Se!==Ve||ne!==0&&B(Ie,oe)===!1)continue;const ge={matchedLen:Ae.length,queryDiff:he-ne,hrefLen:X.length-Se.length};if(ge.matchedLen>we.matchedLen)me=Z.name.value,we=ge;else if(ge.matchedLen===we.matchedLen){if(ge.queryDiff<we.queryDiff)me=Z.name.value,we=ge;else if(ge.queryDiff!==we.queryDiff)continue;ge.hrefLen>we.hrefLen&&(me=Z.name.value,we=ge)}}me!==null||m.some(Z=>Z.routeData===void 0&&Z.name.value===f.value)!==!0?F({name:me,setCurrent:!0}):Le=!1}function U(me){if(u(),x.value!==!0&&d.value!==null&&me.target&&typeof me.target.closest=="function"){const we=me.target.closest(".q-tab");we&&d.value.contains(we)===!0&&(x.value=!0,g.value===!0&&O(we))}}function W(){l(()=>{x.value=!1},30)}function ve(){fe.avoidRouteWatcher===!1?c(K):h()}function ce(){if(C===void 0){const me=ae(()=>r.$route.fullPath,ve);C=()=>{me(),C=void 0}}}const fe={currentModel:f,tabProps:A,hasFocus:x,hasActiveTab:E,registerTab:function(me){m.push(me),y.value++,j(),me.routeData===void 0||r.$route===void 0?c(()=>{if(g.value===!0){const we=f.value,Pe=we!=null&&we!==""?m.find(Ve=>Ve.name.value===we):null;Pe&&O(Pe.rootRef.value)}}):(ce(),me.routeData.hasRouterLink.value===!0&&ve())},unregisterTab:function(me){m.splice(m.indexOf(me),1),y.value--,j(),C!==void 0&&me.routeData!==void 0&&(m.every(we=>we.routeData===void 0)===!0&&C(),ve())},verifyRouteModel:ve,updateModel:F,onKbdNavigate:function(me,we){const Pe=Array.prototype.filter.call(p.value.children,se=>se===we||se.matches&&se.matches(".q-tab.q-focusable")===!0),Ve=Pe.length;if(Ve===0)return;if(me===36)return O(Pe[0]),Pe[0].focus(),!0;if(me===35)return O(Pe[Ve-1]),Pe[Ve-1].focus(),!0;const oe=me===(t.vertical===!0?38:37),he=me===(t.vertical===!0?40:39),Z=oe===!0?-1:he===!0?1:void 0;if(Z!==void 0){const se=q.value===!0?-1:1,Se=Pe.indexOf(we)+Z*se;return Se>=0&&Se<Ve&&(O(Pe[Se]),Pe[Se].focus({preventScroll:!0})),!0}},avoidRouteWatcher:!1};function pe(){k!==null&&clearTimeout(k),N(),C!==void 0&&C()}let Ee,Le;return vo(Z2,fe),st(pe),In(()=>{Ee=C!==void 0,pe()}),ga(()=>{Ee===!0&&(ce(),Le=!0,ve()),j()}),()=>S("div",{ref:d,class:T.value,role:"tablist",onFocusin:U,onFocusout:W},[S(pa,{onResize:V}),S("div",{ref:p,class:R.value,onScroll:$},De(e.default)),S(vt,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(_.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||n.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:te,onTouchstartPassive:te,onMouseupPassive:N,onMouseleavePassive:N,onTouchendPassive:N}),S(vt,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(v.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||n.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:N,onMouseleavePassive:N,onTouchendPassive:N})])}}),qL=0,DS=["click","keydown"],BS={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>"t_"+qL++},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function jS(t,e,i,r){const n=Hi(Z2,wt);if(n===wt)return wt;const{proxy:o}=Ce(),a=G(null),s=G(null),l=G(null),u=w(()=>t.disable!==!0&&t.ripple!==!1&&Object.assign({keyCodes:[13,32],early:!0},t.ripple===!0?{}:t.ripple)),c=w(()=>n.currentModel.value===t.name),h=w(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(n.tabProps.value.activeClass?" "+n.tabProps.value.activeClass:"")+(n.tabProps.value.activeColor?` text-${n.tabProps.value.activeColor}`:"")+(n.tabProps.value.activeBgColor?` bg-${n.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(t.icon&&t.label&&n.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(t.noCaps===!0||n.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(t.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(r!==void 0?r.linkClass.value:"")),d=w(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(n.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(t.contentClass!==void 0?` ${t.contentClass}`:"")),p=w(()=>t.disable===!0||n.hasFocus.value===!0||c.value===!1&&n.hasActiveTab.value===!0?-1:t.tabindex||0);function f(v,b){if(b!==!0&&a.value!==null&&a.value.focus(),t.disable!==!0){if(r===void 0)return n.updateModel({name:t.name}),void i("click",v);if(r.hasRouterLink.value===!0){const m=(y={})=>{let x;const C=y.to===void 0||Tr(y.to,t.to)===!0?n.avoidRouteWatcher=wu():null;return r.navigateToRouterLink(v,{...y,returnRouterError:!0}).catch(k=>{x=k}).then(k=>{if(C===n.avoidRouteWatcher&&(n.avoidRouteWatcher=!1,x===void 0&&(k===void 0||k.message!==void 0&&k.message.startsWith("Avoided redundant navigation")===!0)&&n.updateModel({name:t.name})),y.returnRouterError===!0)return x!==void 0?Promise.reject(x):k})};return i("click",v,m),void(v.defaultPrevented!==!0&&m())}i("click",v)}else r!==void 0&&r.hasRouterLink.value===!0&&Qe(v)}function g(v){gr(v,[13,32])?f(v,!0):ha(v)!==!0&&v.keyCode>=35&&v.keyCode<=40&&v.altKey!==!0&&v.metaKey!==!0&&n.onKbdNavigate(v.keyCode,o.$el)===!0&&Qe(v),i("keydown",v)}const _={name:w(()=>t.name),rootRef:s,tabIndicatorRef:l,routeData:r};return st(()=>{n.unregisterTab(_)}),Ft(()=>{n.registerTab(_)}),{renderTab:function(v,b){const m={ref:s,class:h.value,tabindex:p.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:f,onKeydown:g,...b};return Fi(S(v,m,function(){const y=n.tabProps.value.narrowIndicator,x=[],C=S("div",{ref:l,class:["q-tab__indicator",n.tabProps.value.indicatorClass]});t.icon!==void 0&&x.push(S(vt,{class:"q-tab__icon",name:t.icon})),t.label!==void 0&&x.push(S("div",{class:"q-tab__label"},t.label)),t.alert!==!1&&x.push(t.alertIcon!==void 0?S(vt,{class:"q-tab__alert-icon",color:t.alert!==!0?t.alert:void 0,name:t.alertIcon}):S("div",{class:"q-tab__alert"+(t.alert!==!0?` text-${t.alert}`:"")})),y===!0&&x.push(C);const k=[S("div",{class:"q-focus-helper",tabindex:-1,ref:a}),S("div",{class:d.value},Jt(e.default,x))];return y===!1&&k.push(C),k}()),[[Id,u.value]])},$tabs:n}}var _l=ue({name:"QTab",props:BS,emits:DS,setup(t,{slots:e,emit:i}){const{renderTab:r}=jS(t,e,i);return()=>r("div")}}),AL=ue({name:"QTabPanels",props:{...u0,...ft},emits:c0,setup(t,{slots:e}){const i=Ce(),r=gt(t,i.proxy.$q),{updatePanelsList:n,getPanelContent:o,panelDirectives:a}=h0(),s=w(()=>"q-tab-panels q-panel-parent"+(r.value===!0?" q-tab-panels--dark q-dark":""));return()=>(n(e),mr("div",{class:s.value},o(),"pan",t.swipeable,()=>a.value))}}),Zp=ue({name:"QTabPanel",props:l0,setup:(t,{slots:e})=>()=>S("div",{class:"q-tab-panel",role:"tabpanel"},De(e.default))}),L_=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,I_=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,P_=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Ic=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Pc=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,uh={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>L_.test(t),hexaColor:t=>I_.test(t),hexOrHexaColor:t=>P_.test(t),rgbColor:t=>Ic.test(t),rgbaColor:t=>Pc.test(t),rgbOrRgbaColor:t=>Ic.test(t)||Pc.test(t),hexOrRgbColor:t=>L_.test(t)||Ic.test(t),hexaOrRgbaColor:t=>I_.test(t)||Pc.test(t),anyColor:t=>P_.test(t)||Ic.test(t)||Pc.test(t)},FL=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function R_({r:t,g:e,b:i,a:r}){const n=r!==void 0;if(t=Math.round(t),e=Math.round(e),i=Math.round(i),t>255||e>255||i>255||n&&r>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return r=n?(256|Math.round(255*r/100)).toString(16).slice(1):"","#"+(i|e<<8|t<<16|1<<24).toString(16).slice(1)+r}function q_({r:t,g:e,b:i,a:r}){return`rgb${r!==void 0?"a":""}(${t},${e},${i}${r!==void 0?","+r/100:""})`}function NS(t){if(typeof t!="string")throw new TypeError("Expected a string");(t=t.replace(/^#/,"")).length===3?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:t.length===4&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16);return t.length>6?{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:Math.round((255&e)/2.55)}:{r:e>>16,g:e>>8&255,b:255&e}}function A_({h:t,s:e,v:i,a:r}){let n,o,a;e/=100,i/=100,t/=360;const s=Math.floor(6*t),l=6*t-s,u=i*(1-e),c=i*(1-l*e),h=i*(1-(1-l)*e);switch(s%6){case 0:n=i,o=h,a=u;break;case 1:n=c,o=i,a=u;break;case 2:n=u,o=i,a=h;break;case 3:n=u,o=c,a=i;break;case 4:n=h,o=u,a=i;break;case 5:n=i,o=u,a=c}return{r:Math.round(255*n),g:Math.round(255*o),b:Math.round(255*a),a:r}}function Qp({r:t,g:e,b:i,a:r}){const n=Math.max(t,e,i),o=Math.min(t,e,i),a=n-o,s=n===0?0:a/n,l=n/255;let u;switch(n){case o:u=0;break;case t:u=e-i+a*(e<i?6:0),u/=6*a;break;case e:u=i-t+2*a,u/=6*a;break;case i:u=t-e+4*a,u/=6*a}return{h:Math.round(360*u),s:Math.round(100*s),v:Math.round(100*l),a:r}}function F_(t){if(typeof t!="string")throw new TypeError("Expected a string");const e=t.replace(/ /g,""),i=FL.exec(e);if(i===null)return NS(e);const r={r:Math.min(255,parseInt(i[2],10)),g:Math.min(255,parseInt(i[3],10)),b:Math.min(255,parseInt(i[4],10))};if(i[1]){const n=parseFloat(i[5]);r.a=100*Math.min(1,isNaN(n)===!0?1:n)}return r}var OL=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],O_="M5 5 h10 v10 h-10 v-10 z";ue({name:"QColor",props:{...ft,..._r,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:t=>["spectrum","tune","palette"].includes(t)},formatModel:{type:String,default:"auto",validator:t=>["auto","hex","rgb","hexa","rgba"].includes(t)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(t,{emit:e}){const{proxy:i}=Ce(),{$q:r}=i,n=gt(t,r),{getCache:o}=Gu(),a=G(null),s=G(null),l=w(()=>t.formatModel==="auto"?null:t.formatModel.indexOf("hex")!==-1),u=w(()=>t.formatModel==="auto"?null:t.formatModel.indexOf("a")!==-1),c=G(t.formatModel==="auto"?t.modelValue===void 0||t.modelValue===null||t.modelValue===""||t.modelValue.startsWith("#")?"hex":"rgb":t.formatModel.startsWith("hex")?"hex":"rgb"),h=G(t.defaultView),d=G(I(t.modelValue||t.defaultValue)),p=w(()=>t.disable!==!0&&t.readonly!==!0),f=w(()=>t.modelValue===void 0||t.modelValue===null||t.modelValue===""||t.modelValue.startsWith("#")),g=w(()=>l.value!==null?l.value:f.value),_=wo(w(()=>({type:"hidden",name:t.name,value:d.value[g.value===!0?"hex":"rgb"]}))),v=w(()=>u.value!==null?u.value:d.value.a!==void 0),b=w(()=>({backgroundColor:d.value.rgb||"#000"})),m=w(()=>"q-color-picker__header-content q-color-picker__header-content--"+(d.value.a!==void 0&&d.value.a<65||function(B){if(typeof B!="string"&&(!B||B.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const K=typeof B=="string"?F_(B):B,U=K.r/255,W=K.g/255,ve=K.b/255;return .2126*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))+.7152*(W<=.03928?W/12.92:Math.pow((W+.055)/1.055,2.4))+.0722*(ve<=.03928?ve/12.92:Math.pow((ve+.055)/1.055,2.4))}(d.value)>.4?"light":"dark")),y=w(()=>({background:`hsl(${d.value.h},100%,50%)`})),x=w(()=>({top:100-d.value.v+"%",[r.lang.rtl===!0?"right":"left"]:`${d.value.s}%`})),C=w(()=>t.palette!==void 0&&t.palette.length!==0?t.palette:OL),k=w(()=>"q-color-picker"+(t.bordered===!0?" q-color-picker--bordered":"")+(t.square===!0?" q-color-picker--square no-border-radius":"")+(t.flat===!0?" q-color-picker--flat no-shadow":"")+(t.disable===!0?" disabled":"")+(n.value===!0?" q-color-picker--dark q-dark":"")),L=w(()=>t.disable===!0?{"aria-disabled":"true"}:{}),A=w(()=>[[dr,F,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function E(B,K){d.value.hex=R_(B),d.value.rgb=q_(B),d.value.r=B.r,d.value.g=B.g,d.value.b=B.b,d.value.a=B.a;const U=d.value[g.value===!0?"hex":"rgb"];e("update:modelValue",U),K===!0&&e("change",U)}function I(B){const K=u.value!==void 0?u.value:t.formatModel==="auto"?null:t.formatModel.indexOf("a")!==-1;if(typeof B!="string"||B.length===0||uh.anyColor(B.replace(/ /g,""))!==!0)return{h:0,s:0,v:0,r:0,g:0,b:0,a:K===!0?100:void 0,hex:void 0,rgb:void 0};const U=F_(B);return K===!0&&U.a===void 0&&(U.a=100),U.hex=R_(U),U.rgb=q_(U),Object.assign(U,Qp(U))}function T(B,K,U){const W=a.value;if(W===null)return;const ve=W.clientWidth,ce=W.clientHeight,fe=W.getBoundingClientRect();let pe=Math.min(ve,Math.max(0,B-fe.left));r.lang.rtl===!0&&(pe=ve-pe);const Ee=Math.min(ce,Math.max(0,K-fe.top)),Le=Math.round(100*pe/ve),me=Math.round(100*Math.max(0,Math.min(1,-Ee/ce+1))),we=A_({h:d.value.h,s:Le,v:me,a:v.value===!0?d.value.a:void 0});d.value.s=Le,d.value.v=me,E(we,U)}function R(B,K){const U=Math.round(B),W=A_({h:U,s:d.value.s,v:d.value.v,a:v.value===!0?d.value.a:void 0});d.value.h=U,E(W,K)}function M(B){R(B,!0)}function q(B,K,U,W,ve){if(W!==void 0&&Ht(W),!/^[0-9]+$/.test(B))return void(ve===!0&&i.$forceUpdate());const ce=Math.floor(Number(B));if(ce<0||ce>U)return void(ve===!0&&i.$forceUpdate());const fe={r:K==="r"?ce:d.value.r,g:K==="g"?ce:d.value.g,b:K==="b"?ce:d.value.b,a:v.value===!0?K==="a"?ce:d.value.a:void 0};if(K!=="a"){const pe=Qp(fe);d.value.h=pe.h,d.value.s=pe.s,d.value.v=pe.v}if(E(fe,ve),W!==void 0&&ve!==!0&&W.target.selectionEnd!==void 0){const pe=W.target.selectionEnd;ct(()=>{W.target.setSelectionRange(pe,pe)})}}function P(B,K){let U;const W=B.target.value;if(Ht(B),c.value==="hex"){if(W.length!==(v.value===!0?9:7)||!/^#[0-9A-Fa-f]+$/.test(W))return!0;U=NS(W)}else{let ce;if(!W.endsWith(")"))return!0;if(v.value!==!0&&W.startsWith("rgb(")){if(ce=W.substring(4,W.length-1).split(",").map(fe=>parseInt(fe,10)),ce.length!==3||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(W))return!0}else{if(v.value!==!0||!W.startsWith("rgba("))return!0;{if(ce=W.substring(5,W.length-1).split(","),ce.length!==4||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(W))return!0;for(let pe=0;pe<3;pe++){const Ee=parseInt(ce[pe],10);if(Ee<0||Ee>255)return!0;ce[pe]=Ee}const fe=parseFloat(ce[3]);if(fe<0||fe>1)return!0;ce[3]=fe}}if(ce[0]<0||ce[0]>255||ce[1]<0||ce[1]>255||ce[2]<0||ce[2]>255||v.value===!0&&(ce[3]<0||ce[3]>1))return!0;U={r:ce[0],g:ce[1],b:ce[2],a:v.value===!0?100*ce[3]:void 0}}const ve=Qp(U);if(d.value.h=ve.h,d.value.s=ve.s,d.value.v=ve.v,E(U,K),K!==!0){const ce=B.target.selectionEnd;ct(()=>{B.target.setSelectionRange(ce,ce)})}}function F(B){B.isFinal?T(B.position.left,B.position.top,!0):j(B)}ae(()=>t.modelValue,B=>{const K=I(B||t.defaultValue);K.hex!==d.value.hex&&(d.value=K)}),ae(()=>t.defaultValue,B=>{if(!t.modelValue&&B){const K=I(B);K.hex!==d.value.hex&&(d.value=K)}});const j=aS(B=>{T(B.position.left,B.position.top)},20);function V(B){T(B.pageX-window.pageXOffset,B.pageY-window.pageYOffset,!0)}function O(B){T(B.pageX-window.pageXOffset,B.pageY-window.pageYOffset)}function $(B){s.value!==null&&(s.value.$el.style.opacity=B?1:0)}function J(B){c.value=B}function te(B){h.value=B}function ie(){const B={ref:a,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(p.value!==!0?" readonly":""),style:y.value,...p.value===!0?{onClick:V,onMousedown:O}:{}},K=[S("div",{style:{paddingBottom:"100%"}}),S("div",{class:"q-color-picker__spectrum-white absolute-full"}),S("div",{class:"q-color-picker__spectrum-black absolute-full"}),S("div",{class:"absolute",style:x.value},[d.value.hex!==void 0?S("div",{class:"q-color-picker__spectrum-circle"}):null])],U=[S(Bo,{class:"q-color-picker__hue non-selectable",modelValue:d.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:p.value!==!0,thumbPath:O_,"onUpdate:modelValue":R,onChange:M})];return v.value===!0&&U.push(S(Bo,{class:"q-color-picker__alpha non-selectable",modelValue:d.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==",readonly:p.value!==!0,hideSelection:!0,thumbPath:O_,...o("alphaSlide",{"onUpdate:modelValue":W=>q(W,"a",100),onChange:W=>q(W,"a",100,void 0,!0)})})),[mr("div",B,K,"spec",p.value,()=>A.value),S("div",{class:"q-color-picker__sliders"},U)]}function N(){return[S("div",{class:"row items-center no-wrap"},[S("div","R"),S(Bo,{modelValue:d.value.r,min:0,max:255,color:"red",dark:n.value,readonly:p.value!==!0,...o("rSlide",{"onUpdate:modelValue":B=>q(B,"r",255),onChange:B=>q(B,"r",255,void 0,!0)})}),S("input",{value:d.value.r,maxlength:3,readonly:p.value!==!0,onChange:Ht,...o("rIn",{onInput:B=>q(B.target.value,"r",255,B),onBlur:B=>q(B.target.value,"r",255,B,!0)})})]),S("div",{class:"row items-center no-wrap"},[S("div","G"),S(Bo,{modelValue:d.value.g,min:0,max:255,color:"green",dark:n.value,readonly:p.value!==!0,...o("gSlide",{"onUpdate:modelValue":B=>q(B,"g",255),onChange:B=>q(B,"g",255,void 0,!0)})}),S("input",{value:d.value.g,maxlength:3,readonly:p.value!==!0,onChange:Ht,...o("gIn",{onInput:B=>q(B.target.value,"g",255,B),onBlur:B=>q(B.target.value,"g",255,B,!0)})})]),S("div",{class:"row items-center no-wrap"},[S("div","B"),S(Bo,{modelValue:d.value.b,min:0,max:255,color:"blue",readonly:p.value!==!0,dark:n.value,...o("bSlide",{"onUpdate:modelValue":B=>q(B,"b",255),onChange:B=>q(B,"b",255,void 0,!0)})}),S("input",{value:d.value.b,maxlength:3,readonly:p.value!==!0,onChange:Ht,...o("bIn",{onInput:B=>q(B.target.value,"b",255,B),onBlur:B=>q(B.target.value,"b",255,B,!0)})})]),v.value===!0?S("div",{class:"row items-center no-wrap"},[S("div","A"),S(Bo,{modelValue:d.value.a,color:"grey",readonly:p.value!==!0,dark:n.value,...o("aSlide",{"onUpdate:modelValue":B=>q(B,"a",100),onChange:B=>q(B,"a",100,void 0,!0)})}),S("input",{value:d.value.a,maxlength:3,readonly:p.value!==!0,onChange:Ht,...o("aIn",{onInput:B=>q(B.target.value,"a",100,B),onBlur:B=>q(B.target.value,"a",100,B,!0)})})]):null]}function z(){return[S("div",{class:"row items-center q-color-picker__palette-rows"+(p.value===!0?" q-color-picker__palette-rows--editable":"")},C.value.map(B=>S("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:B},...p.value===!0?o("palette#"+B,{onClick:()=>{(function(K){const U=I(K),W={r:U.r,g:U.g,b:U.b,a:U.a};W.a===void 0&&(W.a=d.value.a),d.value.h=U.h,d.value.s=U.s,d.value.v=U.v,E(W,!0)})(B)}}):{}})))]}return()=>{const B=[S(AL,{modelValue:h.value,animated:!0},()=>[S(Zp,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},ie),S(Zp,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},N),S(Zp,{class:"q-color-picker__palette-tab",name:"palette"},z)])];return t.name!==void 0&&t.disable!==!0&&_(B,"push"),t.noHeader!==!0&&B.unshift(function(){const K=[];return t.noHeaderTabs!==!0&&K.push(S(E_,{class:"q-color-picker__header-tabs",modelValue:c.value,dense:!0,align:"justify","onUpdate:modelValue":J},()=>[S(_l,{label:"HEX"+(v.value===!0?"A":""),name:"hex",ripple:!1}),S(_l,{label:"RGB"+(v.value===!0?"A":""),name:"rgb",ripple:!1})])),K.push(S("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[S("input",{class:"fit",value:d.value[c.value],...p.value!==!0?{readonly:!0}:{},...o("topIn",{onInput:U=>{$(P(U)===!0)},onChange:Ht,onBlur:U=>{P(U,!0)===!0&&i.$forceUpdate(),$(!1)}})}),S(vt,{ref:s,class:"q-color-picker__error-icon absolute no-pointer-events",name:r.iconSet.type.negative})])),S("div",{class:"q-color-picker__header relative-position overflow-hidden"},[S("div",{class:"q-color-picker__header-bg absolute-full"}),S("div",{class:m.value,style:b.value},K)])}()),t.noFooter!==!0&&B.push(S("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[S(E_,{class:"absolute-full",modelValue:h.value,dense:!0,align:"justify","onUpdate:modelValue":te},()=>[S(_l,{icon:r.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),S(_l,{icon:r.iconSet.colorPicker.tune,name:"tune",ripple:!1}),S(_l,{icon:r.iconSet.colorPicker.palette,name:"palette",ripple:!1})])])),S("div",{class:k.value,...L.value},B)}}});var ro=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function zL(t,e,i){return Object.prototype.toString.call(t)==="[object Date]"&&(i=t.getDate(),e=t.getMonth()+1,t=t.getFullYear()),function(r){const n=VS(r).gy;let o,a,s,l=n-621;const u=$S(l,!1),c=km(n,3,u.march);if(s=r-c,s>=0){if(s<=185)return a=1+jt(s,31),o=tr(s,31)+1,{jy:l,jm:a,jd:o};s-=186}else l-=1,s+=179,u.leap===1&&(s+=1);return a=7+jt(s,30),o=tr(s,30)+1,{jy:l,jm:a,jd:o}}(km(t,e,i))}function z_(t,e,i){return VS(function(r,n,o){const a=$S(r,!0);return km(a.gy,3,a.march)+31*(n-1)-jt(n,7)*(n-7)+o-1}(t,e,i))}function DL(t){return function(e){const i=ro.length;let r,n,o,a,s,l=ro[0];if(e<l||e>=ro[i-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<i&&(r=ro[s],n=r-l,!(e<r));s+=1)l=r;return a=e-l,n-a<6&&(a=a-n+33*jt(n+4,33)),o=tr(tr(a+1,33)-1,4),o===-1&&(o=4),o}(t)===0}function ch(t,e){return e<=6?31:e<=11||DL(t)?30:29}function $S(t,e){const i=ro.length,r=t+621;let n,o,a,s,l,u=-14,c=ro[0];if(t<c||t>=ro[i-1])throw new Error("Invalid Jalaali year "+t);for(l=1;l<i&&(n=ro[l],o=n-c,!(t<n));l+=1)u=u+8*jt(o,33)+jt(tr(o,33),4),c=n;s=t-c,u=u+8*jt(s,33)+jt(tr(s,33)+3,4),tr(o,33)===4&&o-s==4&&(u+=1);const h=20+u-(jt(r,4)-jt(3*(jt(r,100)+1),4)-150);return e||(o-s<6&&(s=s-o+33*jt(o+4,33)),a=tr(tr(s+1,33)-1,4),a===-1&&(a=4)),{leap:a,gy:r,march:h}}function km(t,e,i){let r=jt(1461*(t+jt(e-8,6)+100100),4)+jt(153*tr(e+9,12)+2,5)+i-34840408;return r=r-jt(3*jt(t+100100+jt(e-8,6),100),4)+752,r}function VS(t){let e=4*t+139361631;e=e+4*jt(3*jt(4*t+183187720,146097),4)-3908;const i=5*jt(tr(e,1461),4)+308,r=jt(tr(i,153),5)+1,n=tr(jt(i,153),12)+1;return{gy:jt(e,1461)-100100+jt(8-n,6),gm:n,gd:r}}function jt(t,e){return~~(t/e)}function tr(t,e){return t-~~(t/e)*e}var BL=["gregorian","persian"],nd={mask:{type:String},locale:Object,calendar:{type:String,validator:t=>BL.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},GS=["update:modelValue"];function vn(t){return t.year+"/"+bt(t.month)+"/"+bt(t.day)}function HS(t,e){const i=w(()=>t.disable!==!0&&t.readonly!==!0),r=w(()=>i.value===!0?0:-1),n=w(()=>{const o=[];return t.color!==void 0&&o.push(`bg-${t.color}`),t.textColor!==void 0&&o.push(`text-${t.textColor}`),o.join(" ")});return{editable:i,tabindex:r,headerClass:n,getLocale:function(){return t.locale!==void 0?{...e.lang.date,...t.locale}:e.lang.date},getCurrentDate:function(o){const a=new Date,s=o===!0?null:0;if(t.calendar==="persian"){const l=zL(a);return{year:l.jy,month:l.jm,day:l.jd}}return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:s,minute:s,second:s,millisecond:s}}}}var jL=864e5,Tm=6e4,US="YYYY-MM-DDTHH:mm:ss.SSSZ",NL=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,$L=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Jp={};function WS(t,e){return t!==void 0?t:e!==void 0?e.date:mm.date}function D_(t,e=""){const i=t>0?"-":"+",r=Math.abs(t),n=r%60;return i+bt(Math.floor(r/60))+e+bt(n)}function ql(t,e,i,r,n){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(n!==void 0&&Object.assign(o,n),t==null||t===""||typeof t!="string")return o;e===void 0&&(e=US);const a=WS(i,W2.props),s=a.months,l=a.monthsShort,{regex:u,map:c}=function(p,f){const g="("+f.days.join("|")+")",_=p+g;if(Jp[_]!==void 0)return Jp[_];const v="("+f.daysShort.join("|")+")",b="("+f.months.join("|")+")",m="("+f.monthsShort.join("|")+")",y={};let x=0;const C=p.replace($L,L=>{switch(x++,L){case"YY":return y.YY=x,"(-?\\d{1,2})";case"YYYY":return y.YYYY=x,"(-?\\d{1,4})";case"M":return y.M=x,"(\\d{1,2})";case"Mo":return y.M=x++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return y.M=x,"(\\d{2})";case"MMM":return y.MMM=x,m;case"MMMM":return y.MMMM=x,b;case"D":return y.D=x,"(\\d{1,2})";case"Do":return y.D=x++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return y.D=x,"(\\d{2})";case"H":return y.H=x,"(\\d{1,2})";case"HH":return y.H=x,"(\\d{2})";case"h":return y.h=x,"(\\d{1,2})";case"hh":return y.h=x,"(\\d{2})";case"m":return y.m=x,"(\\d{1,2})";case"mm":return y.m=x,"(\\d{2})";case"s":return y.s=x,"(\\d{1,2})";case"ss":return y.s=x,"(\\d{2})";case"S":return y.S=x,"(\\d{1})";case"SS":return y.S=x,"(\\d{2})";case"SSS":return y.S=x,"(\\d{3})";case"A":return y.A=x,"(AM|PM)";case"a":return y.a=x,"(am|pm)";case"aa":return y.aa=x,"(a\\.m\\.|p\\.m\\.)";case"ddd":return v;case"dddd":return g;case"Q":case"d":case"E":return"(\\d{1})";case"do":return x++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return x++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return x++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return y.Z=x,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return y.ZZ=x,"(Z|[+-]\\d{2}\\d{2})";case"X":return y.X=x,"(-?\\d+)";case"x":return y.x=x,"(-?\\d{4,})";default:return x--,L[0]==="["&&(L=L.substring(1,L.length-1)),L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),k={map:y,regex:new RegExp("^"+C)};return Jp[_]=k,k}(e,a),h=t.match(u);if(h===null)return o;let d="";if(c.X!==void 0||c.x!==void 0){const p=parseInt(h[c.X!==void 0?c.X:c.x],10);if(isNaN(p)===!0||p<0)return o;const f=new Date(p*(c.X!==void 0?1e3:1));o.year=f.getFullYear(),o.month=f.getMonth()+1,o.day=f.getDate(),o.hour=f.getHours(),o.minute=f.getMinutes(),o.second=f.getSeconds(),o.millisecond=f.getMilliseconds()}else{if(c.YYYY!==void 0)o.year=parseInt(h[c.YYYY],10);else if(c.YY!==void 0){const p=parseInt(h[c.YY],10);o.year=p<0?p:2e3+p}if(c.M!==void 0){if(o.month=parseInt(h[c.M],10),o.month<1||o.month>12)return o}else c.MMM!==void 0?o.month=l.indexOf(h[c.MMM])+1:c.MMMM!==void 0&&(o.month=s.indexOf(h[c.MMMM])+1);if(c.D!==void 0){if(o.day=parseInt(h[c.D],10),o.year===null||o.month===null||o.day<1)return o;const p=r!=="persian"?new Date(o.year,o.month,0).getDate():ch(o.year,o.month);if(o.day>p)return o}c.H!==void 0?o.hour=parseInt(h[c.H],10)%24:c.h!==void 0&&(o.hour=parseInt(h[c.h],10)%12,(c.A&&h[c.A]==="PM"||c.a&&h[c.a]==="pm"||c.aa&&h[c.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),c.m!==void 0&&(o.minute=parseInt(h[c.m],10)%60),c.s!==void 0&&(o.second=parseInt(h[c.s],10)%60),c.S!==void 0&&(o.millisecond=parseInt(h[c.S],10)*10**(3-h[c.S].length)),c.Z===void 0&&c.ZZ===void 0||(d=c.Z!==void 0?h[c.Z].replace(":",""):h[c.ZZ],o.timezoneOffset=(d[0]==="+"?-1:1)*(60*d.slice(1,3)+1*d.slice(3,5)))}return o.dateHash=bt(o.year,6)+"/"+bt(o.month)+"/"+bt(o.day),o.timeHash=bt(o.hour)+":"+bt(o.minute)+":"+bt(o.second)+d,o}function ef(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const i=new Date(e.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const r=e.getTimezoneOffset()-i.getTimezoneOffset();e.setHours(e.getHours()-r);const n=(e-i)/6048e5;return 1+Math.floor(n)}function yn(t,e,i){const r=new Date(t),n="set";switch(e){case"year":case"years":r[`${n}Month`](0);case"month":case"months":r[`${n}Date`](1);case"day":case"days":case"date":r[`${n}Hours`](0);case"hour":case"hours":r[`${n}Minutes`](0);case"minute":case"minutes":r[`${n}Seconds`](0);case"second":case"seconds":r[`${n}Milliseconds`](0)}return r}function Rc(t,e,i){return(t.getTime()-t.getTimezoneOffset()*Tm-(e.getTime()-e.getTimezoneOffset()*Tm))/i}function YS(t,e,i="days"){const r=new Date(t),n=new Date(e);switch(i){case"years":case"year":return r.getFullYear()-n.getFullYear();case"months":case"month":return 12*(r.getFullYear()-n.getFullYear())+r.getMonth()-n.getMonth();case"days":case"day":case"date":return Rc(yn(r,"day"),yn(n,"day"),jL);case"hours":case"hour":return Rc(yn(r,"hour"),yn(n,"hour"),36e5);case"minutes":case"minute":return Rc(yn(r,"minute"),yn(n,"minute"),Tm);case"seconds":case"second":return Rc(yn(r,"second"),yn(n,"second"),1e3)}}function tf(t){return YS(t,yn(t,"year"),"days")+1}function za(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}var B_={YY(t,e,i){const r=this.YYYY(t,e,i)%100;return r>=0?bt(r):"-"+bt(Math.abs(r))},YYYY:(t,e,i)=>i??t.getFullYear(),M:t=>t.getMonth()+1,Mo:t=>za(t.getMonth()+1),MM:t=>bt(t.getMonth()+1),MMM:(t,e)=>e.monthsShort[t.getMonth()],MMMM:(t,e)=>e.months[t.getMonth()],Q:t=>Math.ceil((t.getMonth()+1)/3),Qo(t){return za(this.Q(t))},D:t=>t.getDate(),Do:t=>za(t.getDate()),DD:t=>bt(t.getDate()),DDD:t=>tf(t),DDDo:t=>za(tf(t)),DDDD:t=>bt(tf(t),3),d:t=>t.getDay(),do:t=>za(t.getDay()),dd:(t,e)=>e.days[t.getDay()].slice(0,2),ddd:(t,e)=>e.daysShort[t.getDay()],dddd:(t,e)=>e.days[t.getDay()],E:t=>t.getDay()||7,w:t=>ef(t),wo:t=>za(ef(t)),ww:t=>bt(ef(t)),H:t=>t.getHours(),HH:t=>bt(t.getHours()),h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return bt(this.h(t))},m:t=>t.getMinutes(),mm:t=>bt(t.getMinutes()),s:t=>t.getSeconds(),ss:t=>bt(t.getSeconds()),S:t=>Math.floor(t.getMilliseconds()/100),SS:t=>bt(Math.floor(t.getMilliseconds()/10)),SSS:t=>bt(t.getMilliseconds(),3),A:t=>t.getHours()<12?"AM":"PM",a:t=>t.getHours()<12?"am":"pm",aa:t=>t.getHours()<12?"a.m.":"p.m.",Z:(t,e,i,r)=>D_(r??t.getTimezoneOffset(),":"),ZZ:(t,e,i,r)=>D_(r??t.getTimezoneOffset()),X:t=>Math.floor(t.getTime()/1e3),x:t=>t.getTime()};function KS(t,e,i,r,n){if(t!==0&&!t||t===1/0||t===-1/0)return;const o=new Date(t);if(isNaN(o))return;e===void 0&&(e=US);const a=WS(i,W2.props);return e.replace(NL,(s,l)=>s in B_?B_[s](o,a,r,n):l===void 0?s:l.split("\\]").join("]"))}var ko=20,VL=["Calendar","Years","Months"],j_=t=>VL.includes(t),rf=t=>/^-?[\d]+\/[0-1]\d$/.test(t),Da=" — ";function Bn(t){return t.year+"/"+bt(t.month)}function XS(t,e,i){function r(){}return st(()=>{t.value}),{removeFromHistory:r,addToHistory(){}}}ue({name:"QDate",props:{...nd,..._r,...ft,modelValue:{required:!0,validator:t=>typeof t=="string"||Array.isArray(t)===!0||Object(t)===t||t===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...nd.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:rf},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:rf},navigationMaxYearMonth:{type:String,validator:rf},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:j_}},emits:[...GS,"rangeStart","rangeEnd","navigation"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=gt(t,n),{getCache:a}=Gu(),{tabindex:s,headerClass:l,getLocale:u,getCurrentDate:c}=HS(t,n);let h;const d=wo(Vu(t)),p=G(null),f=G(se()),g=G(u()),_=w(()=>se()),v=w(()=>u()),b=w(()=>c()),m=G(Ie(f.value,g.value)),y=G(t.defaultView),x=w(()=>n.lang.rtl===!0?"right":"left"),C=G(x.value),k=G(x.value),L=m.value.year,A=G(L-L%ko-(L<0?ko:0)),E=G(null),I=w(()=>{const D=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${D} q-date--${D}-${t.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),T=w(()=>t.color||"primary"),R=w(()=>t.textColor||"white"),M=w(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),q=w(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),P=w(()=>q.value.filter(D=>typeof D=="string").map(D=>Se(D,f.value,g.value)).filter(D=>D.dateHash!==null&&D.day!==null&&D.month!==null&&D.year!==null)),F=w(()=>{const D=H=>Se(H,f.value,g.value);return q.value.filter(H=>Ci(H)===!0&&H.from!==void 0&&H.to!==void 0).map(H=>({from:D(H.from),to:D(H.to)})).filter(H=>H.from.dateHash!==null&&H.to.dateHash!==null&&H.from.dateHash<H.to.dateHash)}),j=w(()=>t.calendar!=="persian"?D=>new Date(D.year,D.month-1,D.day):D=>{const H=z_(D.year,D.month,D.day);return new Date(H.gy,H.gm-1,H.gd)}),V=w(()=>t.calendar==="persian"?vn:(D,H,Q)=>KS(new Date(D.year,D.month-1,D.day,D.hour,D.minute,D.second,D.millisecond),H===void 0?f.value:H,Q===void 0?g.value:Q,D.year,D.timezoneOffset)),O=w(()=>P.value.length+F.value.reduce((D,H)=>D+1+YS(j.value(H.to),j.value(H.from)),0)),$=w(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(E.value!==null){const Q=E.value.init,le=j.value(Q);return g.value.daysShort[le.getDay()]+", "+g.value.monthsShort[Q.month-1]+" "+Q.day+Da+"?"}if(O.value===0)return Da;if(O.value>1)return`${O.value} ${g.value.pluralDay}`;const D=P.value[0],H=j.value(D);return isNaN(H.valueOf())===!0?Da:g.value.headerTitle!==void 0?g.value.headerTitle(H,D):g.value.daysShort[H.getDay()]+", "+g.value.monthsShort[D.month-1]+" "+D.day}),J=w(()=>P.value.concat(F.value.map(D=>D.from)).sort((D,H)=>D.year-H.year||D.month-H.month)[0]),te=w(()=>P.value.concat(F.value.map(D=>D.to)).sort((D,H)=>H.year-D.year||H.month-D.month)[0]),ie=w(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(O.value===0)return Da;if(O.value>1){const D=J.value,H=te.value,Q=g.value.monthsShort;return Q[D.month-1]+(D.year!==H.year?" "+D.year+Da+Q[H.month-1]+" ":D.month!==H.month?Da+Q[H.month-1]:"")+" "+H.year}return P.value[0].year}),N=w(()=>{const D=[n.iconSet.datetime.arrowLeft,n.iconSet.datetime.arrowRight];return n.lang.rtl===!0?D.reverse():D}),z=w(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):g.value.firstDayOfWeek),B=w(()=>{const D=g.value.daysShort,H=z.value;return H>0?D.slice(H,7).concat(D.slice(0,H)):D}),K=w(()=>{const D=m.value;return t.calendar!=="persian"?new Date(D.year,D.month,0).getDate():ch(D.year,D.month)}),U=w(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),W=w(()=>{if(t.navigationMinYearMonth===void 0)return null;const D=t.navigationMinYearMonth.split("/");return{year:parseInt(D[0],10),month:parseInt(D[1],10)}}),ve=w(()=>{if(t.navigationMaxYearMonth===void 0)return null;const D=t.navigationMaxYearMonth.split("/");return{year:parseInt(D[0],10),month:parseInt(D[1],10)}}),ce=w(()=>{const D={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return W.value!==null&&W.value.year>=m.value.year&&(D.year.prev=!1,W.value.year===m.value.year&&W.value.month>=m.value.month&&(D.month.prev=!1)),ve.value!==null&&ve.value.year<=m.value.year&&(D.year.next=!1,ve.value.year===m.value.year&&ve.value.month<=m.value.month&&(D.month.next=!1)),D}),fe=w(()=>{const D={};return P.value.forEach(H=>{const Q=Bn(H);D[Q]===void 0&&(D[Q]=[]),D[Q].push(H.day)}),D}),pe=w(()=>{const D={};return F.value.forEach(H=>{const Q=Bn(H.from),le=Bn(H.to);if(D[Q]===void 0&&(D[Q]=[]),D[Q].push({from:H.from.day,to:Q===le?H.to.day:void 0,range:H}),Q<le){let re;const{year:ke,month:de}=H.from,Be=de<12?{year:ke,month:de+1}:{year:ke+1,month:1};for(;(re=Bn(Be))<=le;)D[re]===void 0&&(D[re]=[]),D[re].push({from:void 0,to:re===le?H.to.day:void 0,range:H}),Be.month++,Be.month>12&&(Be.year++,Be.month=1)}}),D}),Ee=w(()=>{if(E.value===null)return;const{init:D,initHash:H,final:Q,finalHash:le}=E.value,[re,ke]=H<=le?[D,Q]:[Q,D],de=Bn(re),Be=Bn(ke);if(de!==Le.value&&Be!==Le.value)return;const Ue={};return de===Le.value?(Ue.from=re.day,Ue.includeFrom=!0):Ue.from=1,Be===Le.value?(Ue.to=ke.day,Ue.includeTo=!0):Ue.to=K.value,Ue}),Le=w(()=>Bn(m.value)),me=w(()=>{const D={};if(t.options===void 0){for(let Q=1;Q<=K.value;Q++)D[Q]=!0;return D}const H=typeof t.options=="function"?t.options:Q=>t.options.includes(Q);for(let Q=1;Q<=K.value;Q++){const le=Le.value+"/"+bt(Q);D[Q]=H(le)}return D}),we=w(()=>{const D={};if(t.events===void 0)for(let H=1;H<=K.value;H++)D[H]=!1;else{const H=typeof t.events=="function"?t.events:Q=>t.events.includes(Q);for(let Q=1;Q<=K.value;Q++){const le=Le.value+"/"+bt(Q);D[Q]=H(le)===!0&&U.value(le)}}return D}),Pe=w(()=>{let D,H;const{year:Q,month:le}=m.value;if(t.calendar!=="persian")D=new Date(Q,le-1,1),H=new Date(Q,le-1,0).getDate();else{const re=z_(Q,le,1);D=new Date(re.gy,re.gm-1,re.gd);let ke=le-1,de=Q;ke===0&&(ke=12,de--),H=ch(de,ke)}return{days:D.getDay()-z.value-1,endDay:H}}),Ve=w(()=>{const D=[],{days:H,endDay:Q}=Pe.value,le=H<0?H+7:H;if(le<6)for(let de=Q-le;de<=Q;de++)D.push({i:de,fill:!0});const re=D.length;for(let de=1;de<=K.value;de++){const Be={i:de,event:we.value[de],classes:[]};me.value[de]===!0&&(Be.in=!0,Be.flat=!0),D.push(Be)}if(fe.value[Le.value]!==void 0&&fe.value[Le.value].forEach(de=>{const Be=re+de-1;Object.assign(D[Be],{selected:!0,unelevated:!0,flat:!1,color:T.value,textColor:R.value})}),pe.value[Le.value]!==void 0&&pe.value[Le.value].forEach(de=>{if(de.from!==void 0){const Be=re+de.from-1,Ue=re+(de.to||K.value)-1;for(let yt=Be;yt<=Ue;yt++)Object.assign(D[yt],{range:de.range,unelevated:!0,color:T.value,textColor:R.value});Object.assign(D[Be],{rangeFrom:!0,flat:!1}),de.to!==void 0&&Object.assign(D[Ue],{rangeTo:!0,flat:!1})}else if(de.to!==void 0){const Be=re+de.to-1;for(let Ue=re;Ue<=Be;Ue++)Object.assign(D[Ue],{range:de.range,unelevated:!0,color:T.value,textColor:R.value});Object.assign(D[Be],{flat:!1,rangeTo:!0})}else{const Be=re+K.value-1;for(let Ue=re;Ue<=Be;Ue++)Object.assign(D[Ue],{range:de.range,unelevated:!0,color:T.value,textColor:R.value})}}),Ee.value!==void 0){const de=re+Ee.value.from-1,Be=re+Ee.value.to-1;for(let Ue=de;Ue<=Be;Ue++)D[Ue].color=T.value,D[Ue].editRange=!0;Ee.value.includeFrom===!0&&(D[de].editRangeFrom=!0),Ee.value.includeTo===!0&&(D[Be].editRangeTo=!0)}m.value.year===b.value.year&&m.value.month===b.value.month&&(D[re+b.value.day-1].today=!0);const ke=D.length%7;if(ke>0){const de=7-ke;for(let Be=1;Be<=de;Be++)D.push({i:Be,fill:!0})}return D.forEach(de=>{let Be="q-date__calendar-item ";de.fill===!0?Be+="q-date__calendar-item--fill":(Be+="q-date__calendar-item--"+(de.in===!0?"in":"out"),de.range!==void 0&&(Be+=" q-date__range"+(de.rangeTo===!0?"-to":de.rangeFrom===!0?"-from":"")),de.editRange===!0&&(Be+=` q-date__edit-range${de.editRangeFrom===!0?"-from":""}${de.editRangeTo===!0?"-to":""}`),de.range===void 0&&de.editRange!==!0||(Be+=` text-${de.color}`)),de.classes=Be}),D}),oe=w(()=>t.disable===!0?{"aria-disabled":"true"}:{});function he(){const{year:D,month:H,day:Q}=b.value,le={...m.value,year:D,month:H,day:Q},re=fe.value[Bn(le)];re!==void 0&&re.includes(le.day)!==!1||He(le),Z(le.year,le.month)}function Z(D,H){y.value="Calendar",Re(D,H)}function se(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Se(D,H,Q){return ql(D,H,Q,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ie(D,H){const Q=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(Q.length===0)return Ae();const le=Q[Q.length-1],re=Se(le.from!==void 0?le.from:le,D,H);return re.dateHash===null?Ae():re}function Ae(){let D,H;if(t.defaultYearMonth!==void 0){const Q=t.defaultYearMonth.split("/");D=parseInt(Q[0],10),H=parseInt(Q[1],10)}else{const Q=b.value!==void 0?b.value:c();D=Q.year,H=Q.month}return{year:D,month:H,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:D+"/"+bt(H)+"/01"}}function X(D){let H=m.value.year,Q=Number(m.value.month)+D;Q===13?(Q=1,H++):Q===0&&(Q=12,H--),Re(H,Q),M.value===!0&&Je("month")}function ne(D){Re(Number(m.value.year)+D,m.value.month),M.value===!0&&Je("year")}function ge(D){return{year:D.year,month:D.month,day:D.day}}function Re(D,H,Q){if(W.value!==null&&D<=W.value.year&&((H<W.value.month||D<W.value.year)&&(H=W.value.month),D=W.value.year),ve.value!==null&&D>=ve.value.year&&((H>ve.value.month||D>ve.value.year)&&(H=ve.value.month),D=ve.value.year),Q!==void 0){const{hour:re,minute:ke,second:de,millisecond:Be,timezoneOffset:Ue,timeHash:yt}=Q;Object.assign(m.value,{hour:re,minute:ke,second:de,millisecond:Be,timezoneOffset:Ue,timeHash:yt})}const le=D+"/"+bt(H)+"/01";le!==m.value.dateHash&&(C.value=m.value.dateHash<le==(n.lang.rtl!==!0)?"left":"right",D!==m.value.year&&(k.value=C.value),ct(()=>{A.value=D-D%ko-(D<0?ko:0),Object.assign(m.value,{year:D,month:H,day:1,dateHash:le})}))}function Ge(D,H,Q){const le=D!==null&&D.length===1&&t.multiple===!1?D[0]:D;h=le;const{reason:re,details:ke}=qe(H,Q);i("update:modelValue",le,re,ke)}function Je(D){const H=P.value[0]!==void 0&&P.value[0].dateHash!==null?{...P.value[0]}:{...m.value};ct(()=>{H.year=m.value.year,H.month=m.value.month;const Q=t.calendar!=="persian"?new Date(H.year,H.month,0).getDate():ch(H.year,H.month);H.day=Math.min(Math.max(1,H.day),Q);const le=Ke(H);h=le;const{details:re}=qe("",H);i("update:modelValue",le,D,re)})}function qe(D,H){return H.from!==void 0?{reason:`${D}-range`,details:{...ge(H.target),from:ge(H.from),to:ge(H.to)}}:{reason:`${D}-day`,details:ge(H)}}function Ke(D,H,Q){return D.from!==void 0?{from:V.value(D.from,H,Q),to:V.value(D.to,H,Q)}:V.value(D,H,Q)}function He(D){let H;if(t.multiple===!0)if(D.from!==void 0){const Q=vn(D.from),le=vn(D.to),re=P.value.filter(de=>de.dateHash<Q||de.dateHash>le),ke=F.value.filter(({from:de,to:Be})=>Be.dateHash<Q||de.dateHash>le);H=re.concat(ke).concat(D).map(de=>Ke(de))}else{const Q=q.value.slice();Q.push(Ke(D)),H=Q}else H=Ke(D);Ge(H,"add",D)}function ee(D){if(t.noUnset===!0)return;let H=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const Q=Ke(D);H=D.from!==void 0?t.modelValue.filter(le=>le.from===void 0||le.from!==Q.from&&le.to!==Q.to):t.modelValue.filter(le=>le!==Q),H.length===0&&(H=null)}Ge(H,"remove",D)}function Me(D,H,Q){const le=P.value.concat(F.value).map(re=>Ke(re,D,H)).filter(re=>re.from!==void 0?re.from.dateHash!==null&&re.to.dateHash!==null:re.dateHash!==null);i("update:modelValue",(t.multiple===!0?le:le[0])||null,Q)}function be(){if(t.minimal!==!0)return S("div",{class:"q-date__header "+l.value},[S("div",{class:"relative-position"},[S(di,{name:"q-transition--fade"},()=>S("div",{key:"h-yr-"+ie.value,class:"q-date__header-subtitle q-date__header-link "+(y.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...a("vY",{onClick(){y.value="Years"},onKeyup(D){D.keyCode===13&&(y.value="Years")}})},[ie.value]))]),S("div",{class:"q-date__header-title relative-position flex no-wrap"},[S("div",{class:"relative-position col"},[S(di,{name:"q-transition--fade"},()=>S("div",{key:"h-sub"+$.value,class:"q-date__header-title-label q-date__header-link "+(y.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...a("vC",{onClick(){y.value="Calendar"},onKeyup(D){D.keyCode===13&&(y.value="Calendar")}})},[$.value]))]),t.todayBtn===!0?S(_t,{class:"q-date__header-today self-start",icon:n.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:he}):null])])}function ye({label:D,type:H,key:Q,dir:le,goTo:re,boundaries:ke,cls:de}){return[S("div",{class:"row items-center q-date__arrow"},[S(_t,{round:!0,dense:!0,size:"sm",flat:!0,icon:N.value[0],tabindex:s.value,disable:ke.prev===!1,...a("go-#"+H,{onClick(){re(-1)}})})]),S("div",{class:"relative-position overflow-hidden flex flex-center"+de},[S(di,{name:"q-transition--jump-"+le},()=>S("div",{key:Q},[S(_t,{flat:!0,dense:!0,noCaps:!0,label:D,tabindex:s.value,...a("view#"+H,{onClick:()=>{y.value=H}})})]))]),S("div",{class:"row items-center q-date__arrow"},[S(_t,{round:!0,dense:!0,size:"sm",flat:!0,icon:N.value[1],tabindex:s.value,disable:ke.next===!1,...a("go+#"+H,{onClick(){re(1)}})})])]}ae(()=>t.modelValue,D=>{if(h===D)h=0;else{const H=Ie(f.value,g.value);Re(H.year,H.month,H)}}),ae(y,()=>{p.value!==null&&r.$el.contains(document.activeElement)===!0&&p.value.focus()}),ae(()=>m.value.year+"|"+m.value.month,()=>{i("navigation",{year:m.value.year,month:m.value.month})}),ae(_,D=>{Me(D,g.value,"mask"),f.value=D}),ae(v,D=>{Me(f.value,D,"locale"),g.value=D});const xe={Calendar:()=>[S("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[S("div",{class:"q-date__navigation row items-center no-wrap"},ye({label:g.value.months[m.value.month-1],type:"Months",key:m.value.month,dir:C.value,goTo:X,boundaries:ce.value.month,cls:" col"}).concat(ye({label:m.value.year,type:"Years",key:m.value.year,dir:k.value,goTo:ne,boundaries:ce.value.year,cls:""}))),S("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},B.value.map(D=>S("div",{class:"q-date__calendar-item"},[S("div",D)]))),S("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[S(di,{name:"q-transition--slide-"+C.value},()=>S("div",{key:Le.value,class:"q-date__calendar-days fit"},Ve.value.map(D=>S("div",{class:D.classes},[D.in===!0?S(_t,{class:D.today===!0?"q-date__today":"",dense:!0,flat:D.flat,unelevated:D.unelevated,color:D.color,textColor:D.textColor,label:D.i,tabindex:s.value,...a("day#"+D.i,{onClick:()=>{(function(H){const Q={...m.value,day:H};if(t.range===!1)return void function(le,re){const ke=fe.value[re];(ke!==void 0&&ke.includes(le.day)===!0?ee:He)(le)}(Q,Le.value);if(E.value===null){const le=Ve.value.find(ke=>ke.fill!==!0&&ke.i===H);if(t.noUnset!==!0&&le.range!==void 0)return void ee({target:Q,from:le.range.from,to:le.range.to});if(le.selected===!0)return void ee(Q);const re=vn(Q);E.value={init:Q,initHash:re,final:Q,finalHash:re},i("rangeStart",ge(Q))}else{const le=E.value.initHash,re=vn(Q),ke=le<=re?{from:E.value.init,to:Q}:{from:Q,to:E.value.init};E.value=null,He(le===re?Q:{target:Q,...ke}),i("rangeEnd",{from:ge(ke.from),to:ge(ke.to)})}})(D.i)},onMouseover:()=>{(function(H){if(E.value!==null){const Q={...m.value,day:H};Object.assign(E.value,{final:Q,finalHash:vn(Q)})}})(D.i)}})},D.event!==!1?()=>S("div",{class:"q-date__event bg-"+D.event}):null):S("div",""+D.i)]))))])])],Months(){const D=m.value.year===b.value.year,H=le=>W.value!==null&&m.value.year===W.value.year&&W.value.month>le||ve.value!==null&&m.value.year===ve.value.year&&ve.value.month<le,Q=g.value.monthsShort.map((le,re)=>{const ke=m.value.month===re+1;return S("div",{class:"q-date__months-item flex flex-center"},[S(_t,{class:D===!0&&b.value.month===re+1?"q-date__today":null,flat:ke!==!0,label:le,unelevated:ke,color:ke===!0?T.value:null,textColor:ke===!0?R.value:null,tabindex:s.value,disable:H(re+1),...a("month#"+re,{onClick:()=>{(function(de){Re(m.value.year,de),y.value="Calendar",M.value===!0&&Je("month")})(re+1)}})})])});return t.yearsInMonthView===!0&&Q.unshift(S("div",{class:"row no-wrap full-width"},[ye({label:m.value.year,type:"Years",key:m.value.year,dir:k.value,goTo:ne,boundaries:ce.value.year,cls:" col"})])),S("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},Q)},Years(){const D=A.value,H=D+ko,Q=[],le=re=>W.value!==null&&W.value.year>re||ve.value!==null&&ve.value.year<re;for(let re=D;re<=H;re++){const ke=m.value.year===re;Q.push(S("div",{class:"q-date__years-item flex flex-center"},[S(_t,{key:"yr"+re,class:b.value.year===re?"q-date__today":null,flat:!ke,label:re,dense:!0,unelevated:ke,color:ke===!0?T.value:null,textColor:ke===!0?R.value:null,tabindex:s.value,disable:le(re),...a("yr#"+re,{onClick:()=>{Re(re,m.value.month),y.value=t.defaultView==="Years"?"Months":"Calendar",M.value===!0&&Je("year")}})})]))}return S("div",{class:"q-date__view q-date__years flex flex-center"},[S("div",{class:"col-auto"},[S(_t,{round:!0,dense:!0,flat:!0,icon:N.value[0],tabindex:s.value,disable:le(D),...a("y-",{onClick:()=>{A.value-=ko}})})]),S("div",{class:"q-date__years-content col self-stretch row items-center"},Q),S("div",{class:"col-auto"},[S(_t,{round:!0,dense:!0,flat:!0,icon:N.value[1],tabindex:s.value,disable:le(H),...a("y+",{onClick:()=>{A.value+=ko}})})])])}};return Object.assign(r,{setToday:he,setView:function(D){j_(D)===!0&&(y.value=D)},offsetCalendar:function(D,H){["month","year"].includes(D)&&(D==="month"?X:ne)(H===!0?-1:1)},setCalendarTo:Z,setEditingRange:function(D,H){if(t.range===!1||!D)return void(E.value=null);const Q=Object.assign({...m.value},D),le=H!==void 0?Object.assign({...m.value},H):Q;E.value={init:Q,initHash:vn(Q),final:le,finalHash:vn(le)},Z(Q.year,Q.month)}}),()=>{const D=[S("div",{class:"q-date__content col relative-position"},[S(di,{name:"q-transition--fade"},xe[y.value])])],H=De(e.default);return H!==void 0&&D.push(S("div",{class:"q-date__actions"},H)),t.name!==void 0&&t.disable!==!0&&d(D,"push"),S("div",{class:I.value,...oe.value},[be(),S("div",{ref:p,class:"q-date__main col column",tabindex:-1},D)])}}});var nf,of,Al,N_,$_,V_,qc=0,af=!1,To=null;function GL(t){(function(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const i=function(a){if(a.path)return a.path;if(a.composedPath)return a.composedPath();const s=[];let l=a.target;for(;l;){if(s.push(l),l.tagName==="HTML")return s.push(document),s.push(window),s;l=l.parentElement}}(e),r=e.shiftKey&&!e.deltaX,n=!r&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),o=r||n?e.deltaY:e.deltaX;for(let a=0;a<i.length;a++){const s=i[a];if(hL(s,n))return n?o<0&&s.scrollTop===0||o>0&&s.scrollTop+s.clientHeight===s.scrollHeight:o<0&&s.scrollLeft===0||o>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0})(t)&&Qe(t)}function G_(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ac(t){af!==!0&&(af=!0,requestAnimationFrame(()=>{af=!1;const{height:e}=t.target,{clientHeight:i,scrollTop:r}=document.scrollingElement;Al!==void 0&&e===window.innerHeight||(Al=i-e,document.scrollingElement.scrollTop=r),r>Al&&(document.scrollingElement.scrollTop-=Math.ceil((r-Al)/8))}))}function H_(t){const e=document.body,i=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:n}=window.getComputedStyle(e);nf=Rd(window),of=co(window),N_=e.style.left,$_=e.style.top,V_=window.location.href,e.style.left=`-${nf}px`,e.style.top=`-${of}px`,n!=="hidden"&&(n==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,at.is.ios===!0&&(i===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ac,Rt.passiveCapture),window.visualViewport.addEventListener("scroll",Ac,Rt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",G_,Rt.passiveCapture))}at.is.desktop===!0&&at.is.mac===!0&&window[`${t}EventListener`]("wheel",GL,Rt.notPassive),t==="remove"&&(at.is.ios===!0&&(i===!0?(window.visualViewport.removeEventListener("resize",Ac,Rt.passiveCapture),window.visualViewport.removeEventListener("scroll",Ac,Rt.passiveCapture)):window.removeEventListener("scroll",G_,Rt.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=N_,e.style.top=$_,window.location.href===V_&&window.scrollTo(nf,of),Al=void 0)}function Em(t){let e="add";if(t===!0){if(qc++,To!==null)return clearTimeout(To),void(To=null);if(qc>1)return}else{if(qc===0||--qc>0)return;if(e="remove",at.is.ios===!0&&at.is.nativeMobile===!0)return To!==null&&clearTimeout(To),void(To=setTimeout(()=>{H_(e),To=null},100))}H_(e)}function ZS(){let t;return{preventBodyScroll(e){e===t||t===void 0&&e!==!0||(t=e,Em(e))}}}var Fc=0,HL={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},U_={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Ad=ue({name:"QDialog",inheritAttrs:!1,props:{...Ws,...Jo,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:t=>["standard","top","bottom","left","right"].includes(t)}},emits:[...Ys,"shake","click","escapeKey"],setup(t,{slots:e,emit:i,attrs:r}){const n=Ce(),o=G(null),a=G(!1),s=G(!1);let l,u,c=null,h=null;const d=w(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:p}=ZS(),{registerTimeout:f}=En(),{registerTick:g,removeTick:_}=ps(),{transitionProps:v,transitionStyle:b}=Pd(t,()=>U_[t.position][0],()=>U_[t.position][1]),m=w(()=>b.value+(t.backdropFilter!==void 0?`;backdrop-filter:${t.backdropFilter};-webkit-backdrop-filter:${t.backdropFilter}`:"")),{showPortal:y,hidePortal:x,portalIsAccessible:C,renderPortal:k}=n0(n,o,function(){return S("div",{role:"dialog","aria-modal":T.value===!0?"true":"false",...r,class:M.value},[S(di,{name:"q-transition--fade",appear:!0},()=>T.value===!0?S("div",{class:"q-dialog__backdrop fixed-full",style:m.value,"aria-hidden":"true",tabindex:-1,onClick:$}):null),S(di,v.value,()=>a.value===!0?S("div",{ref:o,class:I.value,style:b.value,tabindex:-1,...R.value},De(e.default)):null)])},"dialog"),{hide:L}=Ks({showing:a,hideOnRouteChange:d,handleShow:function(te){A(),h=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,V(t.maximized),y(),s.value=!0,t.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),g(q)):_(),f(()=>{if(n.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:ie,bottom:N}=document.activeElement.getBoundingClientRect(),{innerHeight:z}=window,B=window.visualViewport!==void 0?window.visualViewport.height:z;ie>0&&N>B/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-B,N>=z?1/0:Math.ceil(document.scrollingElement.scrollTop+N-B/2))),document.activeElement.scrollIntoView()}u=!0,o.value.click(),u=!1}y(!0),s.value=!1,i("show",te)},t.transitionDuration)},handleHide:function(te){_(),E(),j(!0),s.value=!0,x(),h!==null&&(((te&&te.type.indexOf("key")===0?h.closest('[tabindex]:not([tabindex^="-"])'):void 0)||h).focus(),h=null),f(()=>{x(!0),s.value=!1,i("hide",te)},t.transitionDuration)},processOnMount:!0}),{addToHistory:A,removeFromHistory:E}=XS(a),I=w(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${HL[t.position]}`+(s.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),T=w(()=>a.value===!0&&t.seamless!==!0),R=w(()=>t.autoClose===!0?{onClick:O}:{}),M=w(()=>["q-dialog fullscreen no-pointer-events q-dialog--"+(T.value===!0?"modal":"seamless"),r.class]);function q(te){Xs(()=>{let ie=o.value;if(ie!==null){if(te!==void 0){const N=ie.querySelector(te);if(N!==null)return void N.focus({preventScroll:!0})}ie.contains(document.activeElement)!==!0&&(ie=ie.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||ie.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||ie.querySelector("[autofocus], [data-autofocus]")||ie,ie.focus({preventScroll:!0}))}})}function P(te){te&&typeof te.focus=="function"?te.focus({preventScroll:!0}):q(),i("shake");const ie=o.value;ie!==null&&(ie.classList.remove("q-animate--scale"),ie.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,o.value!==null&&(ie.classList.remove("q-animate--scale"),q())},170))}function F(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&P():(i("escapeKey"),L()))}function j(te){c!==null&&(clearTimeout(c),c=null),te!==!0&&a.value!==!0||(V(!1),t.seamless!==!0&&(p(!1),Cm(J),Xh(F))),te!==!0&&(h=null)}function V(te){te===!0?l!==!0&&(Fc<1&&document.body.classList.add("q-body--dialog"),Fc++,l=!0):l===!0&&(Fc<2&&document.body.classList.remove("q-body--dialog"),Fc--,l=!1)}function O(te){u!==!0&&(L(te),i("click",te))}function $(te){t.persistent!==!0&&t.noBackdropDismiss!==!0?L(te):t.noShake!==!0&&P()}function J(te){t.allowFocusOutside!==!0&&C.value===!0&&oS(o.value,te.target)!==!0&&q('[tabindex]:not([tabindex="-1"])')}return ae(()=>t.maximized,te=>{a.value===!0&&V(te)}),ae(T,te=>{p(te),te===!0?(xS(J),_S(F)):(Cm(J),Xh(F))}),Object.assign(n.proxy,{focus:q,shake:P,__updateRefocusTarget(te){h=te||null}}),st(j),k}});function QS(t,e){if(e&&t===e)return null;const i=t.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(i)===!0)return t;const r=(window.getComputedStyle?window.getComputedStyle(t):t.currentStyle).display;return r==="block"||r==="table"?t:QS(t.parentNode)}function sf(t,e,i){return!(!t||t===document.body)&&(i===!0&&t===e||(e===document?document.body:e).contains(t.parentNode))}function JS(t,e,i){if(i||((i=document.createRange()).selectNode(t),i.setStart(t,0)),e.count===0)i.setEnd(t,e.count);else if(e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(i.setEnd(t,e.count),e.count=0);else for(let r=0;e.count!==0&&r<t.childNodes.length;r++)i=JS(t.childNodes[r],e,i);return i}ue({name:"QDrawer",inheritAttrs:!1,props:{...Ws,...ft,side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Ys,"onLayout","miniState"],setup(t,{slots:e,emit:i,attrs:r}){const n=Ce(),{proxy:{$q:o}}=n,a=gt(t,o),{preventBodyScroll:s}=ZS(),{registerTimeout:l,removeTimeout:u}=En(),c=Hi(da,wt);if(c===wt)return wt;let h,d,p=null;const f=G(t.behavior==="mobile"||t.behavior!=="desktop"&&c.totalWidth.value<=t.breakpoint),g=w(()=>t.mini===!0&&f.value!==!0),_=w(()=>g.value===!0?t.miniWidth:t.width),v=G(t.showIfAbove===!0&&f.value===!1||t.modelValue===!0),b=w(()=>t.persistent!==!0&&(f.value===!0||O.value===!0));function m(oe,he){if(k(),oe!==!1&&c.animate(),fe(0),f.value===!0){const Z=c.instances[P.value];Z!==void 0&&Z.belowBreakpoint===!0&&Z.hide(!1),pe(1),c.isContainer.value!==!0&&s(!0)}else pe(0),oe!==!1&&Ee(!1);l(()=>{oe!==!1&&Ee(!0),he!==!0&&i("show",oe)},150)}function y(oe,he){L(),oe!==!1&&c.animate(),pe(0),fe(I.value*_.value),we(),he!==!0?l(()=>{i("hide",oe)},150):u()}const{show:x,hide:C}=Ks({showing:v,hideOnRouteChange:b,handleShow:m,handleHide:y}),{addToHistory:k,removeFromHistory:L}=XS(v),A={belowBreakpoint:f,hide:C},E=w(()=>t.side==="right"),I=w(()=>(o.lang.rtl===!0?-1:1)*(E.value===!0?1:-1)),T=G(0),R=G(!1),M=G(!1),q=G(_.value*I.value),P=w(()=>E.value===!0?"left":"right"),F=w(()=>v.value===!0&&f.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:_.value:0),j=w(()=>t.overlay===!0||t.miniToOverlay===!0||c.view.value.indexOf(E.value?"R":"L")!==-1||o.platform.is.ios===!0&&c.isContainer.value===!0),V=w(()=>t.overlay===!1&&v.value===!0&&f.value===!1),O=w(()=>t.overlay===!0&&v.value===!0&&f.value===!1),$=w(()=>"fullscreen q-drawer__backdrop"+(v.value===!1&&R.value===!1?" hidden":"")),J=w(()=>({backgroundColor:`rgba(0,0,0,${.4*T.value})`})),te=w(()=>E.value===!0?c.rows.value.top[2]==="r":c.rows.value.top[0]==="l"),ie=w(()=>E.value===!0?c.rows.value.bottom[2]==="r":c.rows.value.bottom[0]==="l"),N=w(()=>{const oe={};return c.header.space===!0&&te.value===!1&&(j.value===!0?oe.top=`${c.header.offset}px`:c.header.space===!0&&(oe.top=`${c.header.size}px`)),c.footer.space===!0&&ie.value===!1&&(j.value===!0?oe.bottom=`${c.footer.offset}px`:c.footer.space===!0&&(oe.bottom=`${c.footer.size}px`)),oe}),z=w(()=>{const oe={width:`${_.value}px`,transform:`translateX(${q.value}px)`};return f.value===!0?oe:Object.assign(oe,N.value)}),B=w(()=>"q-drawer__content fit "+(c.isContainer.value!==!0?"scroll":"overflow-auto")),K=w(()=>`q-drawer q-drawer--${t.side}`+(M.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(a.value===!0?" q-drawer--dark q-dark":"")+(R.value===!0?" no-transition":v.value===!0?"":" q-layout--prevent-focus")+(f.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(g.value===!0?"mini":"standard")+(j.value===!0||V.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(te.value===!0?" q-drawer--top-padding":""))),U=w(()=>{const oe=o.lang.rtl===!0?t.side:P.value;return[[dr,Le,void 0,{[oe]:!0,mouse:!0}]]}),W=w(()=>{const oe=o.lang.rtl===!0?P.value:t.side;return[[dr,me,void 0,{[oe]:!0,mouse:!0}]]}),ve=w(()=>{const oe=o.lang.rtl===!0?P.value:t.side;return[[dr,me,void 0,{[oe]:!0,mouse:!0,mouseAllDir:!0}]]});function ce(){var oe,he;oe=f,he=t.behavior==="mobile"||t.behavior!=="desktop"&&c.totalWidth.value<=t.breakpoint,oe.value!==he&&(oe.value=he)}function fe(oe){oe===void 0?ct(()=>{oe=v.value===!0?0:_.value,fe(I.value*oe)}):(c.isContainer.value!==!0||E.value!==!0||f.value!==!0&&Math.abs(oe)!==_.value||(oe+=I.value*c.scrollbarWidth.value),q.value=oe)}function pe(oe){T.value=oe}function Ee(oe){const he=oe===!0?"remove":c.isContainer.value!==!0?"add":"";he!==""&&document.body.classList[he]("q-body--drawer-toggle")}function Le(oe){if(v.value!==!1)return;const he=_.value,Z=Lt(oe.distance.x,0,he);if(oe.isFinal===!0)return Z>=Math.min(75,he)?x():(c.animate(),pe(0),fe(I.value*he)),void(R.value=!1);fe((o.lang.rtl===!0?E.value!==!0:E.value)?Math.max(he-Z,0):Math.min(0,Z-he)),pe(Lt(Z/he,0,1)),oe.isFirst===!0&&(R.value=!0)}function me(oe){if(v.value!==!0)return;const he=_.value,Z=oe.direction===t.side,se=(o.lang.rtl===!0?Z!==!0:Z)?Lt(oe.distance.x,0,he):0;if(oe.isFinal===!0)return Math.abs(se)<Math.min(75,he)?(c.animate(),pe(1),fe(0)):C(),void(R.value=!1);fe(I.value*se),pe(Lt(1-se/he,0,1)),oe.isFirst===!0&&(R.value=!0)}function we(){s(!1),Ee(!0)}function Pe(oe,he){c.update(t.side,oe,he)}function Ve(oe,he){Pe("size",oe===!0?t.miniWidth:he)}return ae(f,oe=>{oe===!0?(h=v.value,v.value===!0&&C(!1)):t.overlay===!1&&t.behavior!=="mobile"&&h!==!1&&(v.value===!0?(fe(0),pe(0),we()):x(!1))}),ae(()=>t.side,(oe,he)=>{c.instances[he]===A&&(c.instances[he]=void 0,c[he].space=!1,c[he].offset=0),c.instances[oe]=A,c[oe].size=_.value,c[oe].space=V.value,c[oe].offset=F.value}),ae(c.totalWidth,()=>{c.isContainer.value!==!0&&document.qScrollPrevented===!0||ce()}),ae(()=>t.behavior+t.breakpoint,ce),ae(c.isContainer,oe=>{v.value===!0&&s(oe!==!0),oe===!0&&ce()}),ae(c.scrollbarWidth,()=>{fe(v.value===!0?0:void 0)}),ae(F,oe=>{Pe("offset",oe)}),ae(V,oe=>{i("onLayout",oe),Pe("space",oe)}),ae(E,()=>{fe()}),ae(_,oe=>{fe(),Ve(t.miniToOverlay,oe)}),ae(()=>t.miniToOverlay,oe=>{Ve(oe,_.value)}),ae(()=>o.lang.rtl,()=>{fe()}),ae(()=>t.mini,()=>{t.noMiniAnimation||t.modelValue===!0&&(function(){p!==null&&clearTimeout(p),n.proxy&&n.proxy.$el&&n.proxy.$el.classList.add("q-drawer--mini-animate"),M.value=!0,p=setTimeout(()=>{p=null,M.value=!1,n&&n.proxy&&n.proxy.$el&&n.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}(),c.animate())}),ae(g,oe=>{i("miniState",oe)}),c.instances[t.side]=A,Ve(t.miniToOverlay,_.value),Pe("space",V.value),Pe("offset",F.value),t.showIfAbove===!0&&t.modelValue!==!0&&v.value===!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),Ft(()=>{i("onLayout",V.value),i("miniState",g.value),h=t.showIfAbove===!0;const oe=()=>{(v.value===!0?m:y)(!1,!0)};c.totalWidth.value===0?d=ae(c.totalWidth,()=>{d(),d=void 0,v.value===!1&&t.showIfAbove===!0&&f.value===!1?x(!1):oe()}):ct(oe)}),st(()=>{d!==void 0&&d(),p!==null&&(clearTimeout(p),p=null),v.value===!0&&we(),c.instances[t.side]===A&&(c.instances[t.side]=void 0,Pe("size",0),Pe("offset",0),Pe("space",!1))}),()=>{const oe=[];f.value===!0&&(t.noSwipeOpen===!1&&oe.push(Fi(S("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),U.value)),oe.push(mr("div",{ref:"backdrop",class:$.value,style:J.value,"aria-hidden":"true",onClick:C},void 0,"backdrop",t.noSwipeBackdrop!==!0&&v.value===!0,()=>ve.value)));const he=g.value===!0&&e.mini!==void 0,Z=[S("div",{...r,key:""+he,class:[B.value,r.class]},he===!0?e.mini():De(e.default))];return t.elevated===!0&&v.value===!0&&Z.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),oe.push(mr("aside",{ref:"content",class:K.value,style:z.value},Z,"contentclose",t.noSwipeClose!==!0&&f.value===!0,()=>W.value)),S("div",{class:"q-drawer-container"},oe)}}});var UL=/^https?:\/\//,WL=class{constructor(t,e){this.el=t,this.eVm=e,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(sf(t.anchorNode,this.el,!0)&&sf(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null&&this.selection.toString().length!==0}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const e=t.startContainer;return e.nodeType===document.ELEMENT_NODE?e:e.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?QS(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const e=document.createRange(),i=document.getSelection();t!==null?(e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),i.removeAllRanges(),i.addRange(e)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let t,e=-1;const i=document.getSelection(),r=this.el.parentNode;if(i.focusNode&&sf(i.focusNode,r))for(t=i.focusNode,e=i.focusOffset;t&&t!==r;)t!==this.el&&t.previousSibling?(t=t.previousSibling,e+=t.textContent.length):t=t.parentNode;this.savedPos=e}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const e=window.getSelection(),i=JS(this.el,{count:this.savedPos});i&&(i.collapse(!1),e.removeAllRanges(),e.addRange(i))}}hasParent(t,e){const i=e?this.parent:this.blockParent;return i!==null&&i.nodeName.toLowerCase()===t.toLowerCase()}hasParents(t,e,i=this.parent){return i!==null&&(t.includes(i.nodeName.toLowerCase())===!0||e===!0&&this.hasParents(t,e,i.parentNode))}is(t,e){if(this.selection===null)return!1;switch(t){case"formatBlock":return e==="DIV"&&this.parent===this.el||this.hasParent(e,e==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===e;case"fontName":const i=document.queryCommandValue(t);return i===`"${e}"`||i===e;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const r=document.queryCommandState(t);return e!==void 0?r===e:r}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){return t==="outdent"?this.hasParents(["blockquote","li"],!0):t==="indent"?this.hasParents(["li"],!0):t==="link"?this.selection!==null||this.is("link"):void 0}apply(t,e,i=ai){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(e)&&this.is(t,e)&&(t="outdent",e=null),e==="PRE"&&this.is(t,"PRE")&&(e="P");else{if(t==="print"){i();const r=window.open();return r.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),r.print(),void r.close()}if(t==="link"){const r=this.getParentAttribute("href");if(r===null){const n=this.selectWord(this.selection),o=n?n.toString():"";if(!(o.length||this.range&&this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=UL.test(o)?o:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(n.getRangeAt(0))}else this.eVm.editLinkUrl.value=r,this.range.selectNodeContents(this.parent),this.save();return}if(t==="fullscreen")return this.eVm.toggleFullscreen(),void i();if(t==="viewsource")return this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),void i()}document.execCommand(t,!1,e),i()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const i=e.collapsed?["backward","forward"]:["forward","backward"];e.detach();const r=t.focusNode,n=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",i[0],"character"),t.modify("move",i[1],"word"),t.extend(r,n),t.modify("extend",i[1],"character"),t.modify("extend",i[0],"word"),t}},YL=ue({name:"QTooltip",inheritAttrs:!1,props:{...cS,...Ws,...Jo,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Jo.transitionShow,default:"jump-down"},transitionHide:{...Jo.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ed},self:{type:String,default:"top middle",validator:ed},offset:{type:Array,default:()=>[14,14],validator:SS},scrollTarget:xa,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ys],setup(t,{slots:e,emit:i,attrs:r}){let n,o;const a=Ce(),{proxy:{$q:s}}=a,l=G(null),u=G(!1),c=w(()=>td(t.anchor,s.lang.rtl)),h=w(()=>td(t.self,s.lang.rtl)),d=w(()=>t.persistent!==!0),{registerTick:p,removeTick:f}=ps(),{registerTimeout:g}=En(),{transitionProps:_,transitionStyle:v}=Pd(t),{localScrollTarget:b,changeScrollEvent:m,unconfigureScrollTarget:y}=dS(t,q),{anchorEl:x,canShow:C,anchorEvents:k}=i0({showing:u,configureAnchorEl:function(){if(t.noParentEvent===!0||x.value===null)return;const F=s.platform.is.mobile===!0?[[x.value,"touchstart","delayShow","passive"]]:[[x.value,"mouseenter","delayShow","passive"],[x.value,"mouseleave","delayHide","passive"]];Zt(k,"anchor",F)}}),{show:L,hide:A}=Ks({showing:u,canShow:C,handleShow:function(F){E(),p(()=>{o=new MutationObserver(()=>M()),o.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),M(),q()}),n===void 0&&(n=ae(()=>s.screen.width+"|"+s.screen.height+"|"+t.self+"|"+t.anchor+"|"+s.lang.rtl,M)),g(()=>{E(!0),i("show",F)},t.transitionDuration)},handleHide:function(F){f(),I(),R(),g(()=>{I(!0),i("hide",F)},t.transitionDuration)},hideOnRouteChange:d,processOnMount:!0});Object.assign(k,{delayShow:function(F){if(s.platform.is.mobile===!0){Fr(),document.body.classList.add("non-selectable");const j=x.value,V=["touchmove","touchcancel","touchend","click"].map(O=>[j,O,"delayHide","passiveCapture"]);Zt(k,"tooltipTemp",V)}g(()=>{L(F)},t.delay)},delayHide:function(F){s.platform.is.mobile===!0&&(Mi(k,"tooltipTemp"),Fr(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),g(()=>{A(F)},t.hideDelay)}});const{showPortal:E,hidePortal:I,renderPortal:T}=n0(a,l,function(){return S(di,_.value,P)},"tooltip");if(s.platform.is.mobile===!0){const F={anchorEl:x,innerRef:l,onClickOutside:V=>(A(V),V.target.classList.contains("q-dialog__backdrop")&&Qe(V),!0)},j=w(()=>t.modelValue===null&&t.persistent!==!0&&u.value===!0);ae(j,V=>{(V===!0?wS:Jh)(F)}),st(()=>{Jh(F)})}function R(){o!==void 0&&(o.disconnect(),o=void 0),n!==void 0&&(n(),n=void 0),y(),Mi(k,"tooltipTemp")}function M(){o0({targetEl:l.value,offset:t.offset,anchorEl:x.value,anchorOrigin:c.value,selfOrigin:h.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function q(){if(x.value!==null||t.scrollTarget!==void 0){b.value=cn(x.value,t.scrollTarget);const F=t.noParentEvent===!0?M:A;m(b.value,F)}}function P(){return u.value===!0?S("div",{...r,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,v.value],role:"tooltip"},De(e.default)):null}return st(R),Object.assign(a.proxy,{updatePosition:M}),T}}),Qs=ue({name:"QItem",props:{...ft,...$u,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=gt(t,r),{hasLink:o,linkAttrs:a,linkClass:s,linkTag:l,navigateOnClick:u}=Ld(),c=G(null),h=G(null),d=w(()=>t.clickable===!0||o.value===!0||t.tag==="label"),p=w(()=>t.disable!==!0&&d.value===!0),f=w(()=>"q-item q-item-type row no-wrap"+(t.dense===!0?" q-item--dense":"")+(n.value===!0?" q-item--dark":"")+(o.value===!0&&t.active===null?s.value:t.active===!0?" q-item--active"+(t.activeClass!==void 0?` ${t.activeClass}`:""):"")+(t.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(t.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(t.focused===!0?" q-manual-focusable--focused":""):"")),g=w(()=>t.insetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:16+56*t.insetLevel+"px"});function _(b){p.value===!0&&(h.value!==null&&(b.qKeyEvent!==!0&&document.activeElement===c.value?h.value.focus():document.activeElement===h.value&&c.value.focus()),u(b))}function v(b){if(p.value===!0&&gr(b,[13,32])===!0){Qe(b),b.qKeyEvent=!0;const m=new MouseEvent("click",b);m.qKeyEvent=!0,c.value.dispatchEvent(m)}i("keyup",b)}return()=>{const b={ref:c,class:f.value,style:g.value,role:"listitem",onClick:_,onKeyup:v};return p.value===!0?(b.tabindex=t.tabindex||"0",Object.assign(b,a.value)):d.value===!0&&(b["aria-disabled"]="true"),S(l.value,b,function(){const m=Nu(e.default,[]);return p.value===!0&&m.unshift(S("div",{class:"q-focus-helper",tabindex:-1,ref:h})),m}())}}}),rn=ue({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(t,{slots:e}){const i=w(()=>"q-item__section column q-item__section--"+(t.avatar===!0||t.side===!0||t.thumbnail===!0?"side":"main")+(t.top===!0?" q-item__section--top justify-start":" justify-center")+(t.avatar===!0?" q-item__section--avatar":"")+(t.thumbnail===!0?" q-item__section--thumbnail":"")+(t.noWrap===!0?" q-item__section--nowrap":""));return()=>S("div",{class:i.value},De(e.default))}});function eC(t,e,i){e.handler?e.handler(t,i,i.caret):i.runCmd(e.cmd,e.param)}function Lm(t){return S("div",{class:"q-editor__toolbar-group"},t)}function W_(t,e,i,r=!1){const n=r||e.type==="toggle"&&(e.toggled?e.toggled(t):e.cmd&&t.caret.is(e.cmd,e.param)),o=[];if(e.tip&&t.$q.platform.is.desktop){const a=e.key?S("div",[S("small",`(CTRL + ${String.fromCharCode(e.key)})`)]):null;o.push(S(YL,{delay:1e3},()=>[S("div",{innerHTML:e.tip}),a]))}return S(_t,{...t.buttonProps.value,icon:e.icon!==null?e.icon:void 0,color:n?e.toggleColor||t.props.toolbarToggleColor:e.color||t.props.toolbarColor,textColor:n&&!t.props.toolbarPush?null:e.textColor||t.props.toolbarTextColor,label:e.label,disable:!!e.disable&&(typeof e.disable!="function"||e.disable(t)),size:"sm",onClick(a){i&&i(),eC(a,e,t)}},()=>o)}function KL(t){if(t.caret)return t.buttons.value.filter(e=>!t.isViewingSource.value||e.find(i=>i.cmd==="viewsource")).map(e=>Lm(e.map(i=>(!t.isViewingSource.value||i.cmd==="viewsource")&&(i.type==="slot"?De(t.slots[i.slot]):i.type==="dropdown"?function(r,n){const o=n.list==="only-icons";let a,s,l=n.label,u=n.icon!==null?n.icon:void 0;function c(){d.component.proxy.hide()}if(o)s=n.options.map(p=>{const f=p.type===void 0&&r.caret.is(p.cmd,p.param);return f&&(l=p.tip,u=p.icon!==null?p.icon:void 0),W_(r,p,c,f)}),a=r.toolbarBackgroundClass.value,s=[Lm(s)];else{const p=r.props.toolbarToggleColor!==void 0?`text-${r.props.toolbarToggleColor}`:null,f=r.props.toolbarTextColor!==void 0?`text-${r.props.toolbarTextColor}`:null,g=n.list==="no-icons";s=n.options.map(_=>{const v=!!_.disable&&_.disable(r),b=_.type===void 0&&r.caret.is(_.cmd,_.param);b&&(l=_.tip,u=_.icon!==null?_.icon:void 0);const m=_.htmlTip;return S(Qs,{active:b,activeClass:p,clickable:!0,disable:v,dense:!0,onClick(y){c(),r.contentRef.value!==null&&r.contentRef.value.focus(),r.caret.restore(),eC(y,_,r)}},()=>[g===!0?null:S(rn,{class:b?p:f,side:!0},()=>S(vt,{name:_.icon!==null?_.icon:void 0})),S(rn,m?()=>S("div",{class:"text-no-wrap",innerHTML:_.htmlTip}):_.tip?()=>S("div",{class:"text-no-wrap"},_.tip):void 0)])}),a=[r.toolbarBackgroundClass.value,f]}const h=n.highlight&&l!==n.label,d=S(vL,{...r.buttonProps.value,noCaps:!0,noWrap:!0,color:h?r.props.toolbarToggleColor:r.props.toolbarColor,textColor:h&&!r.props.toolbarPush?null:r.props.toolbarTextColor,label:n.fixedLabel?n.label:l,icon:n.fixedIcon?n.icon!==null?n.icon:void 0:u,contentClass:a,onShow:p=>r.emit("dropdownShow",p),onHide:p=>r.emit("dropdownHide",p),onBeforeShow:p=>r.emit("dropdownBeforeShow",p),onBeforeHide:p=>r.emit("dropdownBeforeHide",p)},()=>s);return d}(t,i):W_(t,i)))))}var Y_=/^on[A-Z]/;function tC(){const{attrs:t,vnode:e}=Ce(),i={listeners:G({}),attributes:G({})};function r(){const n={},o={};for(const a in t)a!=="class"&&a!=="style"&&Y_.test(a)===!1&&(n[a]=t[a]);for(const a in e.props)Y_.test(a)===!0&&(o[a]=e.props[a]);i.attributes.value=n,i.listeners.value=o}return Tu(r),r(),i}var XL=Object.prototype.toString,lf=Object.prototype.hasOwnProperty,ZL=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(t=>"[object "+t+"]"));function K_(t){if(t!==Object(t)||ZL.has(XL.call(t))===!0||t.constructor&&lf.call(t,"constructor")===!1&&lf.call(t.constructor.prototype,"isPrototypeOf")===!1)return!1;let e;for(e in t);return e===void 0||lf.call(t,e)}function iC(){let t,e,i,r,n,o,a=arguments[0]||{},s=1,l=!1;const u=arguments.length;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},s=2),Object(a)!==a&&typeof a!="function"&&(a={}),u===s&&(a=this,s--);s<u;s++)if((t=arguments[s])!==null)for(e in t)i=a[e],r=t[e],a!==r&&(l===!0&&r&&((n=Array.isArray(r))||K_(r)===!0)?(o=n===!0?Array.isArray(i)===!0?i:[]:K_(i)===!0?i:{},a[e]=iC(l,o,r)):r!==void 0&&(a[e]=r));return a}ue({name:"QEditor",props:{...ft,...d0,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:t=>t.length===0||t.every(e=>e.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:t=>["div","p"].includes(t),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...p0,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=gt(t,n),{inFullscreen:a,toggleFullscreen:s}=f0(),l=tC(),u=G(null),c=G(null),h=G(null),d=G(!1),p=w(()=>!t.readonly&&!t.disable);let f,g,_=t.modelValue;document.execCommand("defaultParagraphSeparator",!1,t.paragraphTag),f=window.getComputedStyle(document.body).fontFamily;const v=w(()=>t.toolbarBg?` bg-${t.toolbarBg}`:""),b=w(()=>({type:"a",flat:t.toolbarOutline!==!0&&t.toolbarPush!==!0,noWrap:!0,outline:t.toolbarOutline,push:t.toolbarPush,rounded:t.toolbarRounded,dense:!0,color:t.toolbarColor,disable:!p.value,size:"sm"})),m=w(()=>{const N=n.lang.editor,z=n.iconSet.editor;return{bold:{cmd:"bold",icon:z.bold,tip:N.bold,key:66},italic:{cmd:"italic",icon:z.italic,tip:N.italic,key:73},strike:{cmd:"strikeThrough",icon:z.strikethrough,tip:N.strikethrough,key:83},underline:{cmd:"underline",icon:z.underline,tip:N.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:z.unorderedList,tip:N.unorderedList},ordered:{cmd:"insertOrderedList",icon:z.orderedList,tip:N.orderedList},subscript:{cmd:"subscript",icon:z.subscript,tip:N.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:z.superscript,tip:N.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:B=>B.caret&&!B.caret.can("link"),icon:z.hyperlink,tip:N.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:z.toggleFullscreen,tip:N.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:z.viewSource,tip:N.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:z.quote,tip:N.quote,key:81},left:{cmd:"justifyLeft",icon:z.left,tip:N.left},center:{cmd:"justifyCenter",icon:z.center,tip:N.center},right:{cmd:"justifyRight",icon:z.right,tip:N.right},justify:{cmd:"justifyFull",icon:z.justify,tip:N.justify},print:{type:"no-state",cmd:"print",icon:z.print,tip:N.print,key:80},outdent:{type:"no-state",disable:B=>B.caret&&!B.caret.can("outdent"),cmd:"outdent",icon:z.outdent,tip:N.outdent},indent:{type:"no-state",disable:B=>B.caret&&!B.caret.can("indent"),cmd:"indent",icon:z.indent,tip:N.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:z.removeFormat,tip:N.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:z.hr,tip:N.hr},undo:{type:"no-state",cmd:"undo",icon:z.undo,tip:N.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:z.redo,tip:N.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:z.heading1||z.heading,tip:N.heading1,htmlTip:`<h1 class="q-ma-none">${N.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:z.heading2||z.heading,tip:N.heading2,htmlTip:`<h2 class="q-ma-none">${N.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:z.heading3||z.heading,tip:N.heading3,htmlTip:`<h3 class="q-ma-none">${N.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:z.heading4||z.heading,tip:N.heading4,htmlTip:`<h4 class="q-ma-none">${N.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:z.heading5||z.heading,tip:N.heading5,htmlTip:`<h5 class="q-ma-none">${N.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:z.heading6||z.heading,tip:N.heading6,htmlTip:`<h6 class="q-ma-none">${N.heading6}</h6>`},p:{cmd:"formatBlock",param:t.paragraphTag,icon:z.heading,tip:N.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:z.code,htmlTip:`<code>${N.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:z.size1||z.size,tip:N.size1,htmlTip:`<font size="1">${N.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:z.size2||z.size,tip:N.size2,htmlTip:`<font size="2">${N.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:z.size3||z.size,tip:N.size3,htmlTip:`<font size="3">${N.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:z.size4||z.size,tip:N.size4,htmlTip:`<font size="4">${N.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:z.size5||z.size,tip:N.size5,htmlTip:`<font size="5">${N.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:z.size6||z.size,tip:N.size6,htmlTip:`<font size="6">${N.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:z.size7||z.size,tip:N.size7,htmlTip:`<font size="7">${N.size7}</font>`}}}),y=w(()=>{const N=t.definitions||{},z=t.definitions||t.fonts?iC(!0,{},m.value,N,function(B,K,U,W={}){const ve=Object.keys(W);if(ve.length===0)return{};const ce={default_font:{cmd:"fontName",param:B,icon:U,tip:K}};return ve.forEach(fe=>{const pe=W[fe];ce[fe]={cmd:"fontName",param:pe,icon:U,tip:pe,htmlTip:`<font face="${pe}">${pe}</font>`}}),ce}(f,n.lang.editor.defaultFont,n.iconSet.editor.font,t.fonts)):m.value;return t.toolbar.map(B=>B.map(K=>{if(K.options)return{type:"dropdown",icon:K.icon,label:K.label,size:"sm",dense:!0,fixedLabel:K.fixedLabel,fixedIcon:K.fixedIcon,highlight:K.highlight,list:K.list,options:K.options.map(W=>z[W])};const U=z[K];return U?U.type==="no-state"||N[K]&&(U.cmd===void 0||m.value[U.cmd]&&m.value[U.cmd].type==="no-state")?U:Object.assign({type:"toggle"},U):{type:"slot",slot:K}}))}),x={$q:n,props:t,slots:e,emit:i,inFullscreen:a,toggleFullscreen:s,runCmd:J,isViewingSource:d,editLinkUrl:h,toolbarBackgroundClass:v,buttonProps:b,contentRef:c,buttons:y,setContent:$};ae(()=>t.modelValue,N=>{_!==N&&(_=N,$(N,!0))}),ae(h,N=>{i("link"+(N?"Show":"Hide"))});const C=w(()=>t.toolbar&&t.toolbar.length!==0),k=w(()=>{const N={},z=B=>{B.key&&(N[B.key]={cmd:B.cmd,param:B.param})};return y.value.forEach(B=>{B.forEach(K=>{K.options?K.options.forEach(z):z(K)})}),N}),L=w(()=>a.value?t.contentStyle:[{minHeight:t.minHeight,height:t.height,maxHeight:t.maxHeight},t.contentStyle]),A=w(()=>"q-editor q-editor--"+(d.value===!0?"source":"default")+(t.disable===!0?" disabled":"")+(a.value===!0?" fullscreen column":"")+(t.square===!0?" q-editor--square no-border-radius":"")+(t.flat===!0?" q-editor--flat":"")+(t.dense===!0?" q-editor--dense":"")+(o.value===!0?" q-editor--dark q-dark":"")),E=w(()=>[t.contentClass,"q-editor__content",{col:a.value,"overflow-auto":a.value||t.maxHeight}]),I=w(()=>t.disable===!0?{"aria-disabled":"true"}:{});function T(){if(c.value!==null){const N="inner"+(d.value===!0?"Text":"HTML"),z=c.value[N];z!==t.modelValue&&(_=z,i("update:modelValue",z))}}function R(N){if(i("keydown",N),N.ctrlKey!==!0||ha(N)===!0)return void te();const z=N.keyCode,B=k.value[z];if(B!==void 0){const{cmd:K,param:U}=B;Qe(N),J(K,U,!1)}}function M(N){te(),i("click",N)}function q(N){if(c.value!==null){const{scrollTop:z,scrollHeight:B}=c.value;g=B-z}x.caret.save(),i("blur",N)}function P(N){ct(()=>{c.value!==null&&g!==void 0&&(c.value.scrollTop=c.value.scrollHeight-g)}),i("focus",N)}function F(N){const z=u.value;if(z!==null&&z.contains(N.target)===!0&&(N.relatedTarget===null||z.contains(N.relatedTarget)!==!0)){const B="inner"+(d.value===!0?"Text":"HTML");x.caret.restorePosition(c.value[B].length),te()}}function j(N){const z=u.value;z===null||z.contains(N.target)!==!0||N.relatedTarget!==null&&z.contains(N.relatedTarget)===!0||(x.caret.savePosition(),te())}function V(){g=void 0}function O(N){x.caret.save()}function $(N,z){if(c.value!==null){z===!0&&x.caret.savePosition();const B="inner"+(d.value===!0?"Text":"HTML");c.value[B]=N,z===!0&&(x.caret.restorePosition(c.value[B].length),te())}}function J(N,z,B=!0){ie(),x.caret.restore(),x.caret.apply(N,z,()=>{ie(),x.caret.save(),B&&te()})}function te(){setTimeout(()=>{h.value=null,r.$forceUpdate()},1)}function ie(){Xs(()=>{c.value!==null&&c.value.focus({preventScroll:!0})})}return Ft(()=>{x.caret=r.caret=new WL(c.value,x),$(t.modelValue),te(),document.addEventListener("selectionchange",O)}),st(()=>{document.removeEventListener("selectionchange",O)}),Object.assign(r,{runCmd:J,refreshToolbar:te,focus:ie,getContentEl:function(){return c.value}}),()=>{let N;if(C.value){const z=[S("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+v.value},KL(x))];h.value!==null&&z.push(S("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+v.value},function(B){if(B.caret){const K=B.props.toolbarColor||B.props.toolbarTextColor;let U=B.editLinkUrl.value;const W=()=>{B.caret.restore(),U!==B.editLinkUrl.value&&document.execCommand("createLink",!1,U===""?" ":U),B.editLinkUrl.value=null};return[S("div",{class:`q-mx-xs text-${K}`},`${B.$q.lang.editor.url}: `),S("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:U,onInput:ve=>{Ht(ve),U=ve.target.value},onKeydown:ve=>{if(ha(ve)!==!0)switch(ve.keyCode){case 13:return fi(ve),W();case 27:fi(ve),B.caret.restore(),B.editLinkUrl.value&&B.editLinkUrl.value!=="https://"||document.execCommand("unlink"),B.editLinkUrl.value=null}}}),Lm([S(_t,{key:"qedt_btm_rem",tabindex:-1,...B.buttonProps.value,label:B.$q.lang.label.remove,noCaps:!0,onClick:()=>{B.caret.restore(),document.execCommand("unlink"),B.editLinkUrl.value=null}}),S(_t,{key:"qedt_btm_upd",...B.buttonProps.value,label:B.$q.lang.label.update,noCaps:!0,onClick:W})])]}}(x))),N=S("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},z)}return S("div",{ref:u,class:A.value,style:{height:a.value===!0?"100%":null},...I.value,onFocusin:F,onFocusout:j},[N,S("div",{ref:c,style:L.value,class:E.value,contenteditable:p.value,placeholder:t.placeholder,...l.listeners.value,onInput:T,onKeydown:R,onClick:M,onBlur:q,onFocus:P,onMousedown:V,onTouchstartPassive:V})])}}});var Im=ue({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(t,{slots:e}){const i=w(()=>parseInt(t.lines,10)),r=w(()=>"q-item__label"+(t.overline===!0?" q-item__label--overline text-overline":"")+(t.caption===!0?" q-item__label--caption text-caption":"")+(t.header===!0?" q-item__label--header":"")+(i.value===1?" ellipsis":"")),n=w(()=>t.lines!==void 0&&i.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":i.value}:null);return()=>S("div",{style:n.value,class:r.value},De(e.default))}}),v0=ue({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:e,emit:i}){let r,n,o,a,s=!1,l=null,u=null;function c(){r&&r(),r=null,s=!1,l!==null&&(clearTimeout(l),l=null),u!==null&&(clearTimeout(u),u=null),n!==void 0&&n.removeEventListener("transitionend",o),o=null}function h(g,_,v){_!==void 0&&(g.style.height=`${_}px`),g.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,s=!0,r=v}function d(g,_){g.style.overflowY=null,g.style.height=null,g.style.transition=null,c(),_!==a&&i(_)}function p(g,_){let v=0;n=g,s===!0?(c(),v=g.offsetHeight===g.scrollHeight?0:void 0):(a="hide",g.style.overflowY="hidden"),h(g,v,_),l=setTimeout(()=>{l=null,g.style.height=`${g.scrollHeight}px`,o=b=>{u=null,Object(b)===b&&b.target!==g||d(g,"show")},g.addEventListener("transitionend",o),u=setTimeout(o,1.1*t.duration)},100)}function f(g,_){let v;n=g,s===!0?c():(a="show",g.style.overflowY="hidden",v=g.scrollHeight),h(g,v,_),l=setTimeout(()=>{l=null,g.style.height=0,o=b=>{u=null,Object(b)===b&&b.target!==g||d(g,"hide")},g.addEventListener("transitionend",o),u=setTimeout(o,1.1*t.duration)},100)}return st(()=>{s===!0&&c()}),()=>S(di,{css:!1,appear:t.appear,onEnter:p,onLeave:f},e.default)}}),QL={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},uf={xs:2,sm:4,md:8,lg:16,xl:24},Ln=ue({name:"QSeparator",props:{...ft,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=Ce(),i=gt(t,e.proxy.$q),r=w(()=>t.vertical===!0?"vertical":"horizontal"),n=w(()=>` q-separator--${r.value}`),o=w(()=>t.inset!==!1?`${n.value}-${QL[t.inset]}`:""),a=w(()=>`q-separator${n.value}${o.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(i.value===!0?" q-separator--dark":"")),s=w(()=>{const l={};if(t.size!==void 0&&(l[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${uf.md}px`:t.spaced in uf?`${uf[t.spaced]}px`:t.spaced,c=t.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>S("hr",{class:a.value,style:s.value,"aria-orientation":r.value})}}),Eo=MM({}),JL=Object.keys($u);ue({name:"QExpansionItem",props:{...$u,...Ws,...ft,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ys,"click","afterShow","afterHide"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=gt(t,r),o=G(t.modelValue!==null?t.modelValue:t.defaultOpened),a=G(null),s=qd(),{show:l,hide:u,toggle:c}=Ks({showing:o});let h,d;const p=w(()=>`q-expansion-item q-item-type q-expansion-item--${o.value===!0?"expanded":"collapsed"} q-expansion-item--${t.popup===!0?"popup":"standard"}`),f=w(()=>t.contentInsetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:56*t.contentInsetLevel+"px"}),g=w(()=>t.disable!==!0&&(t.href!==void 0||t.to!==void 0&&t.to!==null&&t.to!=="")),_=w(()=>{const P={};return JL.forEach(F=>{P[F]=t[F]}),P}),v=w(()=>g.value===!0||t.expandIconToggle!==!0),b=w(()=>t.expandedIcon!==void 0&&o.value===!0?t.expandedIcon:t.expandIcon||r.iconSet.expansionItem[t.denseToggle===!0?"denseIcon":"icon"]),m=w(()=>t.disable!==!0&&(g.value===!0||t.expandIconToggle===!0)),y=w(()=>({expanded:o.value===!0,detailsId:s.value,toggle:c,show:l,hide:u})),x=w(()=>{const P=t.toggleAriaLabel!==void 0?t.toggleAriaLabel:r.lang.label[o.value===!0?"collapse":"expand"](t.label);return{role:"button","aria-expanded":o.value===!0?"true":"false","aria-controls":s.value,"aria-label":P}});function C(P){g.value!==!0&&c(P),i("click",P)}function k(P){P.keyCode===13&&L(P,!0)}function L(P,F){F!==!0&&a.value!==null&&a.value.focus(),c(P),Qe(P)}function A(){i("afterShow")}function E(){i("afterHide")}function I(){h===void 0&&(h=wu()),o.value===!0&&(Eo[t.group]=h);const P=ae(o,j=>{j===!0?Eo[t.group]=h:Eo[t.group]===h&&delete Eo[t.group]}),F=ae(()=>Eo[t.group],(j,V)=>{V===h&&j!==void 0&&j!==h&&u()});d=()=>{P(),F(),Eo[t.group]===h&&delete Eo[t.group],d=void 0}}function T(){let P;return e.header!==void 0?P=[].concat(e.header(y.value)):(P=[S(rn,()=>[S(Im,{lines:t.labelLines},()=>t.label||""),t.caption?S(Im,{lines:t.captionLines,caption:!0},()=>t.caption):null])],t.icon&&P[t.switchToggleSide===!0?"push":"unshift"](S(rn,{side:t.switchToggleSide===!0,avatar:t.switchToggleSide!==!0},()=>S(vt,{name:t.icon})))),t.disable!==!0&&t.hideExpandIcon!==!0&&P[t.switchToggleSide===!0?"unshift":"push"](function(){const F={class:["q-focusable relative-position cursor-pointer"+(t.denseToggle===!0&&t.switchToggleSide===!0?" items-end":""),t.expandIconClass],side:t.switchToggleSide!==!0,avatar:t.switchToggleSide},j=[S(vt,{class:"q-expansion-item__toggle-icon"+(t.expandedIcon===void 0&&o.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:b.value})];return m.value===!0&&(Object.assign(F,{tabindex:0,...x.value,onClick:L,onKeyup:k}),j.unshift(S("div",{ref:a,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),S(rn,F,()=>j)}()),P}function R(){const P={ref:"item",style:t.headerStyle,class:t.headerClass,dark:n.value,disable:t.disable,dense:t.dense,insetLevel:t.headerInsetLevel};return v.value===!0&&(P.clickable=!0,P.onClick=C,Object.assign(P,g.value===!0?_.value:x.value)),S(Qs,P,T)}function M(){return Fi(S("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:f.value,id:s.value},De(e.default)),[[gh,o.value]])}function q(){const P=[R(),S(v0,{duration:t.duration,onShow:A,onHide:E},M)];return t.expandSeparator===!0&&P.push(S(Ln,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:n.value}),S(Ln,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:n.value})),P}return ae(()=>t.group,P=>{d!==void 0&&d(),P!==void 0&&I()}),t.group!==void 0&&I(),st(()=>{d!==void 0&&d()}),()=>S("div",{class:p.value},[S("div",{class:"q-expansion-item__container relative-position"},q())])}});var eI=["top","right","bottom","left"],Pm={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:t=>eI.includes(t)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function rC(t,e){return{formClass:w(()=>"q-fab--form-"+(t.square===!0?"square":"rounded")),stacked:w(()=>t.externalLabel===!1&&["top","bottom"].includes(t.labelPosition)),labelProps:w(()=>{if(t.externalLabel===!0){const i=t.hideLabel===null?e.value===!1:t.hideLabel;return{action:"push",data:{class:[t.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${t.labelPosition}`+(i===!0?" q-fab__label--external-hidden":"")],style:t.labelStyle}}}return{action:["left","top"].includes(t.labelPosition)?"unshift":"push",data:{class:[t.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${t.labelPosition}`+(t.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:t.labelStyle}}})}}var tI=["up","right","down","left"],iI=["left","center","right"];ue({name:"QFab",props:{...Pm,...Ws,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...Pm.hideLabel,default:null},direction:{type:String,default:"right",validator:t=>tI.includes(t)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:t=>iI.includes(t)}},emits:Ys,setup(t,{slots:e}){const i=G(null),r=G(t.modelValue===!0),n=qd(),{proxy:{$q:o}}=Ce(),{formClass:a,labelProps:s}=rC(t,r),l=w(()=>t.persistent!==!0),{hide:u,toggle:c}=Ks({showing:r,hideOnRouteChange:l}),h=w(()=>({opened:r.value})),d=w(()=>`q-fab z-fab row inline justify-center q-fab--align-${t.verticalActionsAlign} ${a.value}`+(r.value===!0?" q-fab--opened":" q-fab--closed")),p=w(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${t.direction} q-fab__actions--${r.value===!0?"opened":"closed"}`),f=w(()=>{const b={id:n.value,role:"menu"};return r.value!==!0&&(b["aria-hidden"]="true"),b}),g=w(()=>"q-fab__icon-holder  q-fab__icon-holder--"+(r.value===!0?"opened":"closed"));function _(b,m){const y=e[b],x=`q-fab__${b} absolute-full`;return y===void 0?S(vt,{class:x,name:t[m]||o.iconSet.fab[m]}):S("div",{class:x},y(h.value))}function v(){const b=[];return t.hideIcon!==!0&&b.push(S("div",{class:g.value},[_("icon","icon"),_("active-icon","activeIcon")])),t.label===""&&e.label===void 0||b[s.value.action](S("div",s.value.data,e.label!==void 0?e.label(h.value):[t.label])),Jt(e.tooltip,b)}return vo(K2,{showing:r,onChildClick(b){u(b),i.value!==null&&i.value.$el.focus()}}),()=>S("div",{class:d.value},[S(_t,{ref:i,class:a.value,...t,noWrap:!0,stack:t.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":n.value,onClick:c},v),S("div",{class:p.value,...f.value},De(e.default))])}});var nC={start:"self-end",center:"self-center",end:"self-start"},rI=Object.keys(nC);ue({name:"QFabAction",props:{...Pm,icon:{type:String,default:""},anchor:{type:String,validator:t=>rI.includes(t)},to:[String,Object],replace:Boolean},emits:["click"],setup(t,{slots:e,emit:i}){const r=Hi(K2,()=>({showing:{value:!0},onChildClick:ai})),{formClass:n,labelProps:o}=rC(t,r.showing),a=w(()=>{const h=nC[t.anchor];return n.value+(h!==void 0?` ${h}`:"")}),s=w(()=>t.disable===!0||r.showing.value!==!0);function l(h){r.onChildClick(h),i("click",h)}function u(){const h=[];return e.icon!==void 0?h.push(e.icon()):t.icon!==""&&h.push(S(vt,{name:t.icon})),t.label===""&&e.label===void 0||h[o.value.action](S("div",o.value.data,e.label!==void 0?e.label():[t.label])),Jt(e.default,h)}const c=Ce();return Object.assign(c.proxy,{click:l}),()=>S(_t,{class:a.value,...t,noWrap:!0,stack:t.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:s.value,onClick:l},u)}});var nI=[!0,!1,"ondemand"],oI={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:t=>nI.includes(t)}};function aI(t,e){const{props:i,proxy:r}=Ce(),n=G(!1),o=G(null),a=G(!1);(function({validate:v,resetValidation:b,requiresQForm:m}){const y=Hi(X2,!1);if(y!==!1){const{props:x,proxy:C}=Ce();Object.assign(C,{validate:v,resetValidation:b}),ae(()=>x.disable,k=>{k===!0?(typeof b=="function"&&b(),y.unbindComponent(C)):y.bindComponent(C)}),Ft(()=>{x.disable!==!0&&y.bindComponent(C)}),st(()=>{x.disable!==!0&&y.unbindComponent(C)})}})({validate:g,resetValidation:f});let s,l=0;const u=w(()=>i.rules!==void 0&&i.rules!==null&&i.rules.length!==0),c=w(()=>i.disable!==!0&&u.value===!0&&e.value===!1),h=w(()=>i.error===!0||n.value===!0),d=w(()=>typeof i.errorMessage=="string"&&i.errorMessage.length!==0?i.errorMessage:o.value);function p(){i.lazyRules!=="ondemand"&&c.value===!0&&a.value===!0&&_()}function f(){l++,e.value=!1,a.value=!1,n.value=!1,o.value=null,_.cancel()}function g(v=i.modelValue){if(i.disable===!0||u.value===!1)return!0;const b=++l,m=e.value!==!0?()=>{a.value=!0}:()=>{},y=(C,k)=>{C===!0&&m(),n.value=C,o.value=k||null,e.value=!1},x=[];for(let C=0;C<i.rules.length;C++){const k=i.rules[C];let L;if(typeof k=="function"?L=k(v,uh):typeof k=="string"&&uh[k]!==void 0&&(L=uh[k](v)),L===!1||typeof L=="string")return y(!0,L),!1;L!==!0&&L!==void 0&&x.push(L)}return x.length===0?(y(!1),!0):(e.value=!0,Promise.all(x).then(C=>{if(C===void 0||Array.isArray(C)===!1||C.length===0)return b===l&&y(!1),!0;const k=C.find(L=>L===!1||typeof L=="string");return b===l&&y(k!==void 0,k),k===void 0},C=>(b===l&&y(!0),!1)))}ae(()=>i.modelValue,()=>{a.value=!0,c.value===!0&&i.lazyRules===!1&&_()}),ae(()=>i.reactiveRules,v=>{v===!0?s===void 0&&(s=ae(()=>i.rules,p,{immediate:!0,deep:!0})):s!==void 0&&(s(),s=void 0)},{immediate:!0}),ae(()=>i.lazyRules,p),ae(t,v=>{v===!0?a.value=!0:c.value===!0&&i.lazyRules!=="ondemand"&&_()});const _=Us(g,0);return st(()=>{s!==void 0&&s(),_.cancel()}),Object.assign(r,{resetValidation:f,validate:g}),pi(r,"hasError",()=>h.value),{isDirtyModel:a,hasRules:u,hasError:h,errorMessage:d,validate:g,resetValidation:f}}function fa(t){return t!=null&&(""+t).length!==0}var oC={...ft,...oI,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},Fd={...oC,maxlength:[Number,String]},Od=["update:modelValue","clear","focus","blur"];function zd({requiredForAttr:t=!0,tagProp:e,changeEvent:i=!1}={}){const{props:r,proxy:n}=Ce(),o=gt(r,n.$q),a=qd({required:t,getValue:()=>r.for});return{requiredForAttr:t,changeEvent:i,tag:e===!0?w(()=>r.tag):{value:"label"},isDark:o,editable:w(()=>r.disable!==!0&&r.readonly!==!0),innerLoading:G(!1),focused:G(!1),hasPopupOpen:!1,splitAttrs:tC(),targetUid:a,rootRef:G(null),targetRef:G(null),controlRef:G(null)}}function Dd(t){const{props:e,emit:i,slots:r,attrs:n,proxy:o}=Ce(),{$q:a}=o;let s=null;t.hasValue===void 0&&(t.hasValue=w(()=>fa(e.modelValue))),t.emitValue===void 0&&(t.emitValue=P=>{i("update:modelValue",P)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:L,onFocusout:A}),Object.assign(t,{clearValue:E,onControlFocusin:L,onControlFocusout:A,focus:k}),t.computedCounter===void 0&&(t.computedCounter=w(()=>{if(e.counter!==!1){const P=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,F=e.maxlength!==void 0?e.maxlength:e.maxValues;return P+(F!==void 0?" / "+F:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:h,resetValidation:d}=aI(t.focused,t.innerLoading),p=t.floatingLabel!==void 0?w(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):w(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),f=w(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),g=w(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),_=w(()=>`q-field row no-wrap items-start q-field--${g.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(p.value===!0?" q-field--float":"")+(b.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&f.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),v=w(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(c.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),b=w(()=>e.labelSlot===!0||e.label!==void 0),m=w(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&c.value!==!0?` text-${e.labelColor}`:"")),y=w(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:p.value,modelValue:e.modelValue,emitValue:t.emitValue})),x=w(()=>{const P={};return t.targetUid.value&&(P.for=t.targetUid.value),e.disable===!0&&(P["aria-disabled"]="true"),P});function C(){const P=document.activeElement;let F=t.targetRef!==void 0&&t.targetRef.value;!F||P!==null&&P.id===t.targetUid.value||(F.hasAttribute("tabindex")===!0||(F=F.querySelector("[tabindex]")),F&&F!==P&&F.focus({preventScroll:!0}))}function k(){Xs(C)}function L(P){s!==null&&(clearTimeout(s),s=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,i("focus",P))}function A(P,F){s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,(document.hasFocus()!==!0||t.hasPopupOpen!==!0&&t.controlRef!==void 0&&t.controlRef.value!==null&&t.controlRef.value.contains(document.activeElement)===!1)&&(t.focused.value===!0&&(t.focused.value=!1,i("blur",P)),F!==void 0&&F())})}function E(P){Qe(P),a.platform.is.mobile!==!0?(t.targetRef!==void 0&&t.targetRef.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),i("update:modelValue",null),t.changeEvent===!0&&i("change",null),i("clear",e.modelValue),ct(()=>{const F=l.value;d(),l.value=F})}function I(P){[13,32].includes(P.keyCode)&&E(P)}function T(){const P=[];return r.prepend!==void 0&&P.push(S("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:fi},r.prepend())),P.push(S("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},function(){const F=[];return e.prefix!==void 0&&e.prefix!==null&&F.push(S("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&F.push(t.getShadowControl()),t.getControl!==void 0?F.push(t.getControl()):r.rawControl!==void 0?F.push(r.rawControl()):r.control!==void 0&&F.push(S("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},r.control(y.value))),b.value===!0&&F.push(S("div",{class:m.value},De(r.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&F.push(S("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),F.concat(De(r.default))}())),c.value===!0&&e.noErrorIcon===!1&&P.push(M("error",[S(vt,{name:a.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?P.push(M("inner-loading-append",r.loading!==void 0?r.loading():[S(Dr,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&P.push(M("inner-clearable-append",[S(vt,{class:"q-field__focusable-action",name:e.clearIcon||a.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":a.lang.label.clear,onKeyup:I,onClick:E})])),r.append!==void 0&&P.push(S("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:fi},r.append())),t.getInnerAppend!==void 0&&P.push(M("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&P.push(t.getControlChild()),P}function R(){let P,F;c.value===!0?h.value!==null?(P=[S("div",{role:"alert"},h.value)],F=`q--slot-error-${h.value}`):(P=De(r.error),F="q--slot-error"):e.hideHint===!0&&t.focused.value!==!0||(e.hint!==void 0?(P=[S("div",e.hint)],F=`q--slot-hint-${e.hint}`):(P=De(r.hint),F="q--slot-hint"));const j=e.counter===!0||r.counter!==void 0;if(e.hideBottomSpace===!0&&j===!1&&P===void 0)return;const V=S("div",{key:F,class:"q-field__messages col"},P);return S("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:fi},[e.hideBottomSpace===!0?V:S(di,{name:"q-transition--field-message"},()=>V),j===!0?S("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():t.computedCounter.value):null])}function M(P,F){return F===null?null:S("div",{key:P,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},F)}let q=!1;return In(()=>{q=!0}),ga(()=>{q===!0&&e.autofocus===!0&&o.focus()}),e.autofocus===!0&&Ft(()=>{o.focus()}),st(()=>{s!==null&&clearTimeout(s)}),Object.assign(o,{focus:k,blur:function(){var P;P=C,Yo=Yo.filter(j=>j!==P);const F=document.activeElement;F!==null&&t.rootRef.value.contains(F)&&F.blur()}}),function(){const P=t.getControl===void 0&&r.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...x.value}:x.value;return S(t.tag.value,{ref:t.rootRef,class:[_.value,n.class],style:n.style,...P},[r.before!==void 0?S("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:fi},r.before()):null,S("div",{class:"q-field__inner relative-position col self-stretch"},[S("div",{ref:t.controlRef,class:v.value,tabindex:-1,...t.controlEvents},T()),f.value===!0?R():null]),r.after!==void 0?S("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:fi},r.after()):null])}}var sI=ue({name:"QField",inheritAttrs:!1,props:{...Fd,tag:{type:String,default:"label"}},emits:Od,setup:()=>Dd(zd({tagProp:!0}))});function Ba(t,e,i,r){const n=[];return t.forEach(o=>{r(o)===!0?n.push(o):e.push({failedPropValidation:i,file:o})}),n}function Oc(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),Qe(t)}var aC={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},sC=["rejected"];function lC({editable:t,dnd:e,getFileInput:i,addFilesToQueue:r}){const{props:n,emit:o,proxy:a}=Ce(),s=G(null),l=w(()=>n.accept!==void 0?n.accept.split(",").map(g=>(g=g.trim())==="*"?"*/":(g.endsWith("/*")&&(g=g.slice(0,g.length-1)),g.toUpperCase())):null),u=w(()=>parseInt(n.maxFiles,10)),c=w(()=>parseInt(n.maxTotalSize,10));function h(g){if(t.value)if(g!==Object(g)&&(g={target:null}),g.target!==null&&g.target.matches('input[type="file"]')===!0)g.clientX===0&&g.clientY===0&&Ht(g);else{const _=i();_&&_!==g.target&&_.click(g)}}function d(g){t.value&&g&&r(null,g)}function p(g){Qe(g),(g.relatedTarget!==null||at.is.safari!==!0?g.relatedTarget!==s.value:document.elementsFromPoint(g.clientX,g.clientY).includes(s.value)===!1)&&(e.value=!1)}function f(g){Oc(g);const _=g.dataTransfer.files;_.length!==0&&r(null,_),e.value=!1}return Object.assign(a,{pickFiles:h,addFiles:d}),{pickFiles:h,addFiles:d,onDragover:function(g){Oc(g),e.value!==!0&&(e.value=!0)},onDragleave:p,processFiles:function(g,_,v,b){let m=Array.from(_||g.target.files);const y=[],x=()=>{y.length!==0&&o("rejected",y)};if(n.accept!==void 0&&l.value.indexOf("*/")===-1&&(m=Ba(m,y,"accept",C=>l.value.some(k=>C.type.toUpperCase().startsWith(k)||C.name.toUpperCase().endsWith(k))),m.length===0))return x();if(n.maxFileSize!==void 0){const C=parseInt(n.maxFileSize,10);if(m=Ba(m,y,"max-file-size",k=>k.size<=C),m.length===0)return x()}if(n.multiple!==!0&&m.length!==0&&(m=[m[0]]),m.forEach(C=>{C.__key=C.webkitRelativePath+C.lastModified+C.name+C.size}),b===!0){const C=v.map(k=>k.__key);m=Ba(m,y,"duplicate",k=>C.includes(k.__key)===!1)}if(m.length===0)return x();if(n.maxTotalSize!==void 0){let C=b===!0?v.reduce((k,L)=>k+L.size,0):0;if(m=Ba(m,y,"max-total-size",k=>(C+=k.size,C<=c.value)),m.length===0)return x()}if(typeof n.filter=="function"){const C=n.filter(m);m=Ba(m,y,"filter",k=>C.includes(k))}if(n.maxFiles!==void 0){let C=b===!0?v.length:0;if(m=Ba(m,y,"max-files",()=>(C++,C<=u.value)),m.length===0)return x()}return x(),m.length!==0?m:void 0},getDndNode:function(g){if(e.value===!0)return S("div",{ref:s,class:`q-${g}__dnd absolute-full`,onDragenter:Oc,onDragover:Oc,onDragleave:p,onDrop:f})},maxFilesNumber:u,maxTotalSizeNumber:c}}function uC(t,e){function i(){const r=t.modelValue;try{const n="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(o=>{n.items.add(o)}),{files:n.files}}catch{return{files:void 0}}}return w(e===!0?()=>{if(t.type==="file")return i()}:i)}ue({name:"QFile",inheritAttrs:!1,props:{...oC,..._r,...aC,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Od,...sC],setup(t,{slots:e,emit:i,attrs:r}){const{proxy:n}=Ce(),o=zd(),a=G(null),s=G(!1),l=a0(t),{pickFiles:u,onDragover:c,onDragleave:h,processFiles:d,getDndNode:p}=lC({editable:o.editable,dnd:s,getFileInput:I,addFilesToQueue:T}),f=uC(t),g=w(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),_=w(()=>fa(g.value)),v=w(()=>g.value.map(q=>q.name).join(", ")),b=w(()=>ym(g.value.reduce((q,P)=>q+P.size,0))),m=w(()=>({totalSize:b.value,filesNumber:g.value.length,maxFiles:t.maxFiles})),y=w(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:l.value,...r,id:o.targetUid.value,disabled:o.editable.value!==!0})),x=w(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),C=w(()=>t.multiple===!0&&t.append===!0);function k(q){const P=g.value.slice();P.splice(q,1),L(P)}function L(q){i("update:modelValue",t.multiple===!0?q:q[0])}function A(q){q.keyCode===13&&fi(q)}function E(q){q.keyCode!==13&&q.keyCode!==32||u(q)}function I(){return a.value}function T(q,P){const F=d(q,P,g.value,C.value),j=I();j!=null&&(j.value=""),F!==void 0&&((t.multiple===!0?t.modelValue&&F.every(V=>g.value.includes(V)):t.modelValue===F[0])||L(C.value===!0?g.value.concat(F):F))}function R(){return[S("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function M(){const q={ref:a,...y.value,...f.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:T};return t.multiple===!0&&(q.multiple=!0),S("input",q)}return Object.assign(o,{fieldClass:x,emitValue:L,hasValue:_,inputRef:a,innerValue:g,floatingLabel:w(()=>_.value===!0||fa(t.displayValue)),computedCounter:w(()=>{if(t.counterLabel!==void 0)return t.counterLabel(m.value);const q=t.maxFiles;return`${g.value.length}${q!==void 0?" / "+q:""} (${b.value})`}),getControlChild:()=>p("file"),getControl:()=>{const q={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return o.editable.value===!0&&Object.assign(q,{onDragover:c,onDragleave:h,onKeydown:A,onKeyup:E}),S("div",q,[M()].concat(function(){if(e.file!==void 0)return g.value.length===0?R():g.value.map((F,j)=>e.file({index:j,file:F,ref:this}));if(e.selected!==void 0)return g.value.length===0?R():e.selected({files:g.value,ref:this});if(t.useChips===!0)return g.value.length===0?R():g.value.map((F,j)=>S(IS,{key:"file-"+j,removable:o.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{k(j)}},()=>S("span",{class:"ellipsis",textContent:F.name})));const P=t.displayValue!==void 0?t.displayValue:v.value;return P.length!==0?[S("div",{class:t.inputClass,style:t.inputStyle,textContent:P})]:R()}()))}}),Object.assign(n,{removeAtIndex:k,removeFile:function(q){const P=g.value.indexOf(q);P!==-1&&k(P)},getNativeElement:()=>a.value}),pi(n,"nativeEl",()=>a.value),Dd(o)}}),ue({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=Hi(da,wt);if(n===wt)return wt;const o=G(parseInt(t.heightHint,10)),a=G(!0),s=G(fr.value===!0||n.isContainer.value===!0?0:window.innerHeight),l=w(()=>t.reveal===!0||n.view.value.indexOf("F")!==-1||r.platform.is.ios&&n.isContainer.value===!0),u=w(()=>n.isContainer.value===!0?n.containerHeight.value:s.value),c=w(()=>{if(t.modelValue!==!0)return 0;if(l.value===!0)return a.value===!0?o.value:0;const y=n.scroll.value.position+u.value+o.value-n.height.value;return y>0?y:0}),h=w(()=>t.modelValue!==!0||l.value===!0&&a.value!==!0),d=w(()=>t.modelValue===!0&&h.value===!0&&t.reveal===!0),p=w(()=>"q-footer q-layout__section--marginal "+(l.value===!0?"fixed":"absolute")+"-bottom"+(t.bordered===!0?" q-footer--bordered":"")+(h.value===!0?" q-footer--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus"+(l.value!==!0?" hidden":""):"")),f=w(()=>{const y=n.rows.value.bottom,x={};return y[0]==="l"&&n.left.space===!0&&(x[r.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),y[2]==="r"&&n.right.space===!0&&(x[r.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),x});function g(y,x){n.update("footer",y,x)}function _(y,x){y.value!==x&&(y.value=x)}function v({height:y}){_(o,y),g("size",y)}function b(y){d.value===!0&&_(a,!0),i("focusin",y)}ae(()=>t.modelValue,y=>{g("space",y),_(a,!0),n.animate()}),ae(c,y=>{g("offset",y)}),ae(()=>t.reveal,y=>{y===!1&&_(a,t.modelValue)}),ae(a,y=>{n.animate(),i("reveal",y)}),ae([o,n.scroll,n.height],function(){if(t.reveal!==!0)return;const{direction:y,position:x,inflectionPoint:C}=n.scroll.value;_(a,y==="up"||x-C<100||n.height.value-u.value-x-o.value<300)}),ae(()=>r.screen.height,y=>{n.isContainer.value!==!0&&_(s,y)});const m={};return n.instances.footer=m,t.modelValue===!0&&g("size",o.value),g("space",t.modelValue),g("offset",c.value),st(()=>{n.instances.footer===m&&(n.instances.footer=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const y=Jt(e.default,[S(pa,{debounce:0,onResize:v})]);return t.elevated===!0&&y.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),S("footer",{class:p.value,style:f.value,onFocusin:b},y)}}}),ue({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:e,emit:i}){const r=Ce(),n=G(null);let o=0;const a=[];function s(p){const f=typeof p=="boolean"?p:t.noErrorFocus!==!0,g=++o,_=(b,m)=>{i("validation"+(b===!0?"Success":"Error"),m)},v=b=>{const m=b.validate();return typeof m.then=="function"?m.then(y=>({valid:y,comp:b}),y=>({valid:!1,comp:b,err:y})):Promise.resolve({valid:m,comp:b})};return(t.greedy===!0?Promise.all(a.map(v)).then(b=>b.filter(m=>m.valid!==!0)):a.reduce((b,m)=>b.then(()=>v(m).then(y=>{if(y.valid===!1)return Promise.reject(y)})),Promise.resolve()).catch(b=>[b])).then(b=>{if(b===void 0||b.length===0)return g===o&&_(!0),!0;if(g===o){const{comp:m,err:y}=b[0];if(_(!1,m),f===!0){const x=b.find(({comp:C})=>typeof C.focus=="function"&&uo(C.$)===!1);x!==void 0&&x.comp.focus()}}return!1})}function l(){o++,a.forEach(p=>{typeof p.resetValidation=="function"&&p.resetValidation()})}function u(p){p!==void 0&&Qe(p);const f=o+1;s().then(g=>{f===o&&g===!0&&(t.onSubmit!==void 0?i("submit",p):p!==void 0&&p.target!==void 0&&typeof p.target.submit=="function"&&p.target.submit())})}function c(p){p!==void 0&&Qe(p),i("reset"),ct(()=>{l(),t.autofocus===!0&&t.noResetFocus!==!0&&h()})}function h(){Xs(()=>{if(n.value===null)return;(n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),f=>f.tabIndex!==-1))?.focus({preventScroll:!0})})}vo(X2,{bindComponent(p){a.push(p)},unbindComponent(p){const f=a.indexOf(p);f!==-1&&a.splice(f,1)}});let d=!1;return In(()=>{d=!0}),ga(()=>{d===!0&&t.autofocus===!0&&h()}),Ft(()=>{t.autofocus===!0&&h()}),Object.assign(r.proxy,{validate:s,resetValidation:l,submit:u,reset:c,focus:h,getValidationComponents:()=>a}),()=>S("form",{class:"q-form",ref:n,onSubmit:u,onReset:c},De(e.default))}}),ue({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=Hi(da,wt);if(n===wt)return wt;const o=G(parseInt(t.heightHint,10)),a=G(!0),s=w(()=>t.reveal===!0||n.view.value.indexOf("H")!==-1||r.platform.is.ios&&n.isContainer.value===!0),l=w(()=>{if(t.modelValue!==!0)return 0;if(s.value===!0)return a.value===!0?o.value:0;const b=o.value-n.scroll.value.position;return b>0?b:0}),u=w(()=>t.modelValue!==!0||s.value===!0&&a.value!==!0),c=w(()=>t.modelValue===!0&&u.value===!0&&t.reveal===!0),h=w(()=>"q-header q-layout__section--marginal "+(s.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),d=w(()=>{const b=n.rows.value.top,m={};return b[0]==="l"&&n.left.space===!0&&(m[r.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),b[2]==="r"&&n.right.space===!0&&(m[r.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),m});function p(b,m){n.update("header",b,m)}function f(b,m){b.value!==m&&(b.value=m)}function g({height:b}){f(o,b),p("size",b)}function _(b){c.value===!0&&f(a,!0),i("focusin",b)}ae(()=>t.modelValue,b=>{p("space",b),f(a,!0),n.animate()}),ae(l,b=>{p("offset",b)}),ae(()=>t.reveal,b=>{b===!1&&f(a,t.modelValue)}),ae(a,b=>{n.animate(),i("reveal",b)}),ae(n.scroll,b=>{t.reveal===!0&&f(a,b.direction==="up"||b.position<=t.revealOffset||b.position-b.inflectionPoint<100)});const v={};return n.instances.header=v,t.modelValue===!0&&p("size",o.value),p("space",t.modelValue),p("offset",l.value),st(()=>{n.instances.header===v&&(n.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const b=Nu(e.default,[]);return t.elevated===!0&&b.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b.push(S(pa,{debounce:0,onResize:g})),S("header",{class:h.value,style:d.value,onFocusin:_},b)}}});var y0={ratio:[String,Number]};function _0(t,e){return w(()=>{const i=Number(t.ratio||(e!==void 0?e.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:100/i+"%"}:null})}ue({name:"QImg",props:{...y0,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:1.7778},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:e,emit:i}){const r=G(t.initialRatio),n=_0(t,r),o=Ce(),{registerTimeout:a,removeTimeout:s}=En(),{registerTimeout:l,removeTimeout:u}=En(),c=w(()=>t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null),h=w(()=>t.errorSrc!==void 0?{src:t.errorSrc,__qerror:!0}:null),d=[G(null),G(c.value)],p=G(0),f=G(!1),g=G(!1),_=w(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),v=w(()=>({width:t.width,height:t.height})),b=w(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition q-img__image--`),m=w(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));function y(){u(),f.value=!1}function x({target:E}){uo(o)===!1&&(s(),r.value=E.naturalHeight===0?.5:E.naturalWidth/E.naturalHeight,C(E,1))}function C(E,I){I!==1e3&&uo(o)!==!0&&(E.complete===!0?function(T){uo(o)!==!0&&(p.value=1^p.value,d[p.value].value=null,y(),T.getAttribute("__qerror")!=="true"&&(g.value=!1),i("load",T.currentSrc||T.src))}(E):a(()=>{C(E,I+1)},50))}function k(E){s(),y(),g.value=!0,d[p.value].value=h.value,d[1^p.value].value=c.value,i("error",E)}function L(E){const I=d[E].value,T={key:"img_"+E,class:b.value,style:m.value,alt:t.alt,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...I};return p.value===E?Object.assign(T,{class:T.class+"current",onLoad:x,onError:k}):T.class+="loaded",S("div",{class:"q-img__container absolute-full",key:"img"+E},S("img",T))}function A(){return f.value===!1?S("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},De(e[g.value===!0?"error":"default"])):S("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},e.loading!==void 0?e.loading():t.noSpinner===!0?void 0:[S(Dr,{color:t.spinnerColor,size:t.spinnerSize})])}{let E=function(){ae(()=>t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null,I=>{s(),g.value=!1,I===null?(y(),d[1^p.value].value=c.value):(u(),t.loadingShowDelay!==0?l(()=>{f.value=!0},t.loadingShowDelay):f.value=!0),d[p.value].value=I},{immediate:!0})};fr.value===!0?Ft(E):E()}return()=>{const E=[];return n.value!==null&&E.push(S("div",{key:"filler",style:n.value})),d[0].value!==null&&E.push(L(0)),d[1].value!==null&&E.push(L(1)),E.push(S(di,{name:"q-transition--fade"},A)),S("div",{key:"main",class:_.value,style:v.value,role:"img","aria-label":t.alt},E)}}});var{passive:Lo}=Rt;ue({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:xa,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(t,{slots:e,emit:i}){const r=G(!1),n=G(!0),o=G(null),a=G(null);let s,l,u=t.initialIndex;const c=w(()=>"q-infinite-scroll__loading"+(r.value===!0?"":" invisible"));function h(){if(t.disable===!0||r.value===!0||n.value===!1)return;const x=Ec(s),C=co(s),k=qs(s);t.reverse===!1?Math.round(C+k+t.offset)>=Math.round(x)&&d():Math.round(C)<=t.offset&&d()}function d(){if(t.disable===!0||r.value===!0||n.value===!1)return;u++,r.value=!0;const x=Ec(s);i("load",u,C=>{n.value===!0&&(r.value=!1,ct(()=>{if(t.reverse===!0){const k=Ec(s),L=co(s);fs(s,L+(k-x))}C===!0?f():o.value&&o.value.closest("body")&&l()}))})}function p(){n.value===!1&&(n.value=!0,s.addEventListener("scroll",l,Lo)),h()}function f(){n.value===!0&&(n.value=!1,r.value=!1,s.removeEventListener("scroll",l,Lo),l!==void 0&&l.cancel!==void 0&&l.cancel())}function g(){if(s&&n.value===!0&&s.removeEventListener("scroll",l,Lo),s=cn(o.value,t.scrollTarget),n.value===!0){if(s.addEventListener("scroll",l,Lo),t.reverse===!0){const x=Ec(s),C=qs(s);fs(s,x-C)}h()}}function _(x){x=parseInt(x,10);const C=l;l=x<=0?h:Us(h,isNaN(x)===!0?100:x),s&&n.value===!0&&(C!==void 0&&s.removeEventListener("scroll",C,Lo),s.addEventListener("scroll",l,Lo))}function v(x){if(b.value===!0){if(a.value===null)return void(x!==!0&&ct(()=>{v(!0)}));const C=(r.value===!0?"un":"")+"pauseAnimations";Array.from(a.value.getElementsByTagName("svg")).forEach(k=>{k[C]()})}}const b=w(()=>t.disable!==!0&&n.value===!0);ae([r,b],()=>{v()}),ae(()=>t.disable,x=>{x===!0?f():p()}),ae(()=>t.reverse,()=>{r.value===!1&&n.value===!0&&h()}),ae(()=>t.scrollTarget,g),ae(()=>t.debounce,_);let m=!1;ga(()=>{m!==!1&&s&&fs(s,m)}),In(()=>{m=!!s&&co(s)}),st(()=>{n.value===!0&&s.removeEventListener("scroll",l,Lo)}),Ft(()=>{_(t.debounce),g(),r.value===!1&&v()});const y=Ce();return Object.assign(y.proxy,{poll:()=>{l!==void 0&&l()},trigger:d,stop:f,reset:function(){u=0},resume:p,setIndex:function(x){u=x},updateScrollTarget:g}),()=>{const x=Nu(e.default,[]);return b.value===!0&&x[t.reverse===!1?"push":"unshift"](S("div",{ref:a,class:c.value},De(e.loading))),S("div",{class:"q-infinite-scroll",ref:o},x)}}}),ue({name:"QInnerLoading",props:{...ft,...Jo,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(t,{slots:e}){const i=Ce(),r=gt(t,i.proxy.$q),{transitionProps:n,transitionStyle:o}=Pd(t),a=w(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(r.value===!0?" q-inner-loading--dark":"")),s=w(()=>"q-inner-loading__label"+(t.labelClass!==void 0?` ${t.labelClass}`:""));function l(){return t.showing===!0?S("div",{class:a.value,style:o.value},e.default!==void 0?e.default():function(){const u=[S(Dr,{size:t.size,color:t.color})];return t.label!==void 0&&u.push(S("div",{class:s.value,style:t.labelStyle},[t.label])),u}()):null}return()=>S(di,n.value,l)}});var X_={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},od={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},cC=Object.keys(od);cC.forEach(t=>{od[t].regex=new RegExp(od[t].pattern)});var lI=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+cC.join("")+"])|(.)","g"),Z_=/[.*+?^${}()|[\]\\]/g,oi="",uI={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function cI(t,e,i,r){let n,o,a,s,l,u;const c=G(null),h=G(function(){if(p(),c.value===!0){const m=_(v(t.modelValue));return t.fillMask!==!1?b(m):m}return t.modelValue}());function d(m){if(m<n.length)return n.slice(-m);let y="",x=n;const C=x.indexOf(oi);if(C!==-1){for(let k=m-x.length;k>0;k--)y+=oi;x=x.slice(0,C)+y+x.slice(C)}return x}function p(){if(c.value=t.mask!==void 0&&t.mask.length!==0&&(t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)),c.value===!1)return s=void 0,n="",void(o="");const m=X_[t.mask]===void 0?t.mask:X_[t.mask],y=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",x=y.replace(Z_,"\\$&"),C=[],k=[],L=[];let A=t.reverseFillMask===!0,E="",I="";m.replace(lI,(q,P,F,j,V)=>{if(j!==void 0){const O=od[j];L.push(O),I=O.negate,A===!0&&(k.push("(?:"+I+"+)?("+O.pattern+"+)?(?:"+I+"+)?("+O.pattern+"+)?"),A=!1),k.push("(?:"+I+"+)?("+O.pattern+")?")}else if(F!==void 0)E="\\"+(F==="\\"?"":F),L.push(F),C.push("([^"+E+"]+)?"+E+"?");else{const O=P!==void 0?P:V;E=O==="\\"?"\\\\\\\\":O.replace(Z_,"\\\\$&"),L.push(O),C.push("([^"+E+"]+)?"+E+"?")}});const T=new RegExp("^"+C.join("")+"("+(E===""?".":"[^"+E+"]")+"+)?"+(E===""?"":"["+E+"]*")+"$"),R=k.length-1,M=k.map((q,P)=>P===0&&t.reverseFillMask===!0?new RegExp("^"+x+"*"+q):P===R?new RegExp("^"+q+"("+(I===""?".":I)+"+)?"+(t.reverseFillMask===!0?"$":x+"*")):new RegExp("^"+q));a=L,s=q=>{const P=T.exec(t.reverseFillMask===!0?q:q.slice(0,L.length+1));P!==null&&(q=P.slice(1).join(""));const F=[],j=M.length;for(let V=0,O=q;V<j;V++){const $=M[V].exec(O);if($===null)break;O=O.slice($.shift().length),F.push(...$)}return F.length!==0?F.join(""):q},n=L.map(q=>typeof q=="string"?q:oi).join(""),o=n.split(oi).join(y)}function f(m,y,x){const C=r.value,k=C.selectionEnd,L=C.value.length-k,A=v(m);y===!0&&p();const E=_(A),I=t.fillMask!==!1?b(E):E,T=h.value!==I;C.value!==I&&(C.value=I),T===!0&&(h.value=I),document.activeElement===C&&ct(()=>{if(I!==o)if(x!=="insertFromPaste"||t.reverseFillMask===!0)if(["deleteContentBackward","deleteContentForward"].indexOf(x)===-1)if(t.reverseFillMask===!0)if(T===!0){const M=Math.max(0,I.length-(I===o?0:Math.min(E.length,L+1)));M===1&&k===1?C.setSelectionRange(M,M,"forward"):g.rightReverse(C,M)}else{const M=I.length-L;C.setSelectionRange(M,M,"backward")}else if(T===!0){const M=Math.max(0,n.indexOf(oi),Math.min(E.length,k)-1);g.right(C,M)}else{const M=k-1;g.right(C,M)}else{const M=t.reverseFillMask===!0?k===0?I.length>E.length?1:0:Math.max(0,I.length-(I===o?0:Math.min(E.length,L)+1))+1:k;C.setSelectionRange(M,M,"forward")}else{const M=C.selectionEnd;let q=k-1;for(let P=l;P<=q&&P<M;P++)n[P]!==oi&&q++;g.right(C,q)}else{const M=t.reverseFillMask===!0?o.length:0;C.setSelectionRange(M,M,"forward")}});const R=t.unmaskedValue===!0?v(I):I;String(t.modelValue)===R||t.modelValue===null&&R===""||i(R,!0)}ae(()=>t.type+t.autogrow,p),ae(()=>t.mask,m=>{if(m!==void 0)f(h.value,!0);else{const y=v(h.value);p(),t.modelValue!==y&&e("update:modelValue",y)}}),ae(()=>t.fillMask+t.reverseFillMask,()=>{c.value===!0&&f(h.value,!0)}),ae(()=>t.unmaskedValue,()=>{c.value===!0&&f(h.value)});const g={left(m,y){const x=n.slice(y-1).indexOf(oi)===-1;let C=Math.max(0,y-1);for(;C>=0;C--)if(n[C]===oi){y=C,x===!0&&y++;break}if(C<0&&n[y]!==void 0&&n[y]!==oi)return g.right(m,0);y>=0&&m.setSelectionRange(y,y,"backward")},right(m,y){const x=m.value.length;let C=Math.min(x,y+1);for(;C<=x;C++){if(n[C]===oi){y=C;break}n[C-1]===oi&&(y=C)}if(C>x&&n[y-1]!==void 0&&n[y-1]!==oi)return g.left(m,x);m.setSelectionRange(y,y,"forward")},leftReverse(m,y){const x=d(m.value.length);let C=Math.max(0,y-1);for(;C>=0;C--){if(x[C-1]===oi){y=C;break}if(x[C]===oi&&(y=C,C===0))break}if(C<0&&x[y]!==void 0&&x[y]!==oi)return g.rightReverse(m,0);y>=0&&m.setSelectionRange(y,y,"backward")},rightReverse(m,y){const x=m.value.length,C=d(x),k=C.slice(0,y+1).indexOf(oi)===-1;let L=Math.min(x,y+1);for(;L<=x;L++)if(C[L-1]===oi){(y=L)>0&&k===!0&&y--;break}if(L>x&&C[y-1]!==void 0&&C[y-1]!==oi)return g.leftReverse(m,x);m.setSelectionRange(y,y,"forward")}};function _(m){if(m==null||m==="")return"";if(t.reverseFillMask===!0)return function(k){const L=a,A=n.indexOf(oi);let E=k.length-1,I="";for(let T=L.length-1;T>=0&&E!==-1;T--){const R=L[T];let M=k[E];if(typeof R=="string")I=R+I,M===R&&E--;else{if(M===void 0||!R.regex.test(M))return I;do I=(R.transform!==void 0?R.transform(M):M)+I,E--,M=k[E];while(A===T&&M!==void 0&&R.regex.test(M))}}return I}(m);const y=a;let x=0,C="";for(let k=0;k<y.length;k++){const L=m[x],A=y[k];if(typeof A=="string")C+=A,L===A&&x++;else{if(L===void 0||!A.regex.test(L))return C;C+=A.transform!==void 0?A.transform(L):L,x++}}return C}function v(m){return typeof m!="string"||s===void 0?typeof m=="number"?s(""+m):m:s(m)}function b(m){return o.length-m.length<=0?m:t.reverseFillMask===!0&&m.length!==0?o.slice(0,-m.length)+m:m+o.slice(m.length)}return{innerValue:h,hasMask:c,moveCursorForPaste:function(m,y,x){const C=_(v(m.value));y=Math.max(0,n.indexOf(oi),Math.min(C.length,y)),l=y,m.setSelectionRange(y,x,"forward")},updateMaskValue:f,onMaskedKeydown:function(m){if(e("keydown",m),ha(m)===!0||m.altKey===!0)return;const y=r.value,x=y.selectionStart,C=y.selectionEnd;if(m.shiftKey||(u=void 0),m.keyCode===37||m.keyCode===39){m.shiftKey&&u===void 0&&(u=y.selectionDirection==="forward"?x:C);const k=g[(m.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(m.preventDefault(),k(y,u===x?C:x),m.shiftKey){const L=y.selectionStart;y.setSelectionRange(Math.min(u,L),Math.max(u,L),"forward")}}else m.keyCode===8&&t.reverseFillMask!==!0&&x===C?(g.left(y,x),y.setSelectionRange(y.selectionStart,C,"backward")):m.keyCode===46&&t.reverseFillMask===!0&&x===C&&(g.rightReverse(y,C),y.setSelectionRange(x,y.selectionEnd,"forward"))},onMaskedClick:function(m){e("click",m),u=void 0}}}var hI=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,dI=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,pI=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,fI=/[a-z0-9_ -]$/i;function hC(t){return function(e){if(e.type==="compositionend"||e.type==="change"){if(e.target.qComposing!==!0)return;e.target.qComposing=!1,t(e)}else e.type==="compositionupdate"&&e.target.qComposing!==!0&&typeof e.data=="string"&&(at.is.firefox===!0?fI.test(e.data)===!1:hI.test(e.data)===!0||dI.test(e.data)===!0||pI.test(e.data)===!0)&&(e.target.qComposing=!0)}}var Ul=ue({name:"QInput",inheritAttrs:!1,props:{...Fd,...uI,..._r,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Od,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:i}){const{proxy:r}=Ce(),{$q:n}=r,o={};let a,s,l,u=NaN,c=null;const h=G(null),d=a0(t),{innerValue:p,hasMask:f,moveCursorForPaste:g,updateMaskValue:_,onMaskedKeydown:v,onMaskedClick:b}=cI(t,e,M,h),m=uC(t,!0),y=w(()=>fa(p.value)),x=hC(T),C=zd({changeEvent:!0}),k=w(()=>t.type==="textarea"||t.autogrow===!0),L=w(()=>k.value===!0||["text","search","url","tel","password"].includes(t.type)),A=w(()=>{const O={...C.splitAttrs.listeners.value,onInput:T,onPaste:I,onChange:P,onBlur:F,onFocus:Ht};return O.onCompositionstart=O.onCompositionupdate=O.onCompositionend=x,f.value===!0&&(O.onKeydown=v,O.onClick=b),t.autogrow===!0&&(O.onAnimationend=R),O}),E=w(()=>{const O={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:d.value,...C.splitAttrs.attributes.value,id:C.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return k.value===!1&&(O.type=t.type),t.autogrow===!0&&(O.rows=1),O});function I(O){if(f.value===!0&&t.reverseFillMask!==!0){const $=O.target;g($,$.selectionStart,$.selectionEnd)}e("paste",O)}function T(O){if(!O||!O.target)return;if(t.type==="file")return void e("update:modelValue",O.target.files);const $=O.target.value;if(O.target.qComposing!==!0){if(f.value===!0)_($,!1,O.inputType);else if(M($),L.value===!0&&O.target===document.activeElement){const{selectionStart:J,selectionEnd:te}=O.target;J!==void 0&&te!==void 0&&ct(()=>{O.target===document.activeElement&&$.indexOf(O.target.value)===0&&O.target.setSelectionRange(J,te)})}t.autogrow===!0&&q()}else o.value=$}function R(O){e("animationend",O),q()}function M(O,$){l=()=>{c=null,t.type!=="number"&&o.hasOwnProperty("value")===!0&&delete o.value,t.modelValue!==O&&u!==O&&(u=O,$===!0&&(s=!0),e("update:modelValue",O),ct(()=>{u===O&&(u=NaN)})),l=void 0},t.type==="number"&&(a=!0,o.value=O),t.debounce!==void 0?(c!==null&&clearTimeout(c),o.value=O,c=setTimeout(l,t.debounce)):l()}function q(){requestAnimationFrame(()=>{const O=h.value;if(O!==null){const $=O.parentNode.style,{scrollTop:J}=O,{overflowY:te,maxHeight:ie}=n.platform.is.firefox===!0?{}:window.getComputedStyle(O),N=te!==void 0&&te!=="scroll";N===!0&&(O.style.overflowY="hidden"),$.marginBottom=O.scrollHeight-1+"px",O.style.height="1px",O.style.height=O.scrollHeight+"px",N===!0&&(O.style.overflowY=parseInt(ie,10)<O.scrollHeight?"auto":"hidden"),$.marginBottom="",O.scrollTop=J}})}function P(O){x(O),c!==null&&(clearTimeout(c),c=null),l!==void 0&&l(),e("change",O.target.value)}function F(O){O!==void 0&&Ht(O),c!==null&&(clearTimeout(c),c=null),l!==void 0&&l(),a=!1,s=!1,delete o.value,t.type!=="file"&&setTimeout(()=>{h.value!==null&&(h.value.value=p.value!==void 0?p.value:"")})}function j(){return o.hasOwnProperty("value")===!0?o.value:p.value!==void 0?p.value:""}ae(()=>t.type,()=>{h.value&&(h.value.value=t.modelValue)}),ae(()=>t.modelValue,O=>{if(f.value===!0){if(s===!0&&(s=!1,String(O)===u))return;_(O)}else p.value!==O&&(p.value=O,t.type==="number"&&o.hasOwnProperty("value")===!0&&(a===!0?a=!1:delete o.value));t.autogrow===!0&&ct(q)}),ae(()=>t.autogrow,O=>{O===!0?ct(q):h.value!==null&&i.rows>0&&(h.value.style.height="auto")}),ae(()=>t.dense,()=>{t.autogrow===!0&&ct(q)}),st(()=>{F()}),Ft(()=>{t.autogrow===!0&&q()}),Object.assign(C,{innerValue:p,fieldClass:w(()=>"q-"+(k.value===!0?"textarea":"input")+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:w(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:h,emitValue:M,hasValue:y,floatingLabel:w(()=>y.value===!0&&(t.type!=="number"||isNaN(p.value)===!1)||fa(t.displayValue)),getControl:()=>S(k.value===!0?"textarea":"input",{ref:h,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...E.value,...A.value,...t.type!=="file"?{value:j()}:m.value}),getShadowControl:()=>S("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(k.value===!0?"":" text-no-wrap")},[S("span",{class:"invisible"},j()),S("span",t.shadowText)])});const V=Dd(C);return Object.assign(r,{focus:function(){Xs(()=>{const O=document.activeElement;h.value===null||h.value===O||O!==null&&O.id===C.targetUid.value||h.value.focus({preventScroll:!0})})},select:function(){h.value!==null&&h.value.select()},getNativeElement:()=>h.value}),pi(r,"nativeEl",()=>h.value),V}}),Q_={threshold:0,root:null,rootMargin:"0px"};function J_(t,e,i){let r,n,o;typeof i=="function"?(r=i,n=Q_,o=e.cfg===void 0):(r=i.handler,n=Object.assign({},Q_,i.cfg),o=e.cfg===void 0||Tr(e.cfg,n)===!1),e.handler!==r&&(e.handler=r),o===!0&&(e.cfg=n,e.observer!==void 0&&e.observer.unobserve(t),e.observer=new IntersectionObserver(([a])=>{if(typeof e.handler=="function"){if(a.rootBounds===null&&document.body.contains(t)===!0)return e.observer.unobserve(t),void e.observer.observe(t);(e.handler(a,e.observer)===!1||e.once===!0&&a.isIntersecting===!0)&&dC(t)}},n),e.observer.observe(t))}function dC(t){const e=t.__qvisible;e!==void 0&&(e.observer!==void 0&&e.observer.unobserve(t),delete t.__qvisible)}var gI=Ar({name:"intersection",mounted(t,{modifiers:e,value:i}){const r={once:e.once===!0};J_(t,r,i),t.__qvisible=r},updated(t,e){const i=t.__qvisible;i!==void 0&&J_(t,i,e.value)},beforeUnmount:dC});ue({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(t,{slots:e,emit:i}){const r=G(fr.value===!0&&t.ssrPrerender),n=w(()=>t.root!==void 0||t.margin!==void 0||t.threshold!==void 0?{handler:l,cfg:{root:t.root,rootMargin:t.margin,threshold:t.threshold}}:l),o=w(()=>t.disable!==!0&&(fr.value!==!0||t.once!==!0||t.ssrPrerender!==!0)),a=w(()=>[[gI,n.value,void 0,{once:t.once}]]),s=w(()=>`--q-transition-duration: ${t.transitionDuration}ms`);function l(c){r.value!==c.isIntersecting&&(r.value=c.isIntersecting,t.onVisibility!==void 0&&i("visibility",r.value))}function u(){return r.value===!0?[S("div",{key:"content",style:s.value},De(e.default))]:e.hidden!==void 0?[S("div",{key:"hidden",style:s.value},e.hidden())]:void 0}return()=>{const c=t.transition?[S(di,{name:"q-transition--"+t.transition},u)]:u();return mr(t.tag,{class:"q-intersection"},c,"main",o.value,()=>a.value)}}});var mI=["ul","ol"],b0=ue({name:"QList",props:{...ft,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:e}){const i=Ce(),r=gt(t,i.proxy.$q),n=w(()=>mI.includes(t.tag)?null:"list"),o=w(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(r.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>S(t.tag,{class:o.value,role:n.value},De(e.default))}}),eb=[34,37,40,33,39,38],vI=Object.keys(g0);ue({name:"QKnob",props:{..._r,...g0,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=G(t.modelValue),a=G(!1),s=w(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),l=w(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax);let u;function c(){o.value=t.modelValue===null?s.value:Lt(t.modelValue,s.value,l.value),I(!0)}ae(()=>`${t.modelValue}|${s.value}|${l.value}`,c),c();const h=w(()=>t.disable===!1&&t.readonly===!1),d=w(()=>"q-knob non-selectable"+(h.value===!0?" q-knob--editable":t.disable===!0?" disabled":"")),p=w(()=>(String(t.step).trim().split(".")[1]||"").length),f=w(()=>t.step===0?1:t.step),g=w(()=>t.instantFeedback===!0||a.value===!0),_=n.platform.is.mobile===!0?w(()=>h.value===!0?{onClick:k}:{}):w(()=>h.value===!0?{onMousedown:C,onClick:k,onKeydown:L,onKeyup:E}:{}),v=w(()=>h.value===!0?{tabindex:t.tabindex}:{["aria-"+(t.disable===!0?"disabled":"readonly")]:"true"}),b=w(()=>{const M={};return vI.forEach(q=>{M[q]=t[q]}),M});function m(M){M.isFinal?(A(M.evt,!0),a.value=!1):(M.isFirst&&(x(),a.value=!0),A(M.evt))}const y=w(()=>[[dr,m,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function x(){const{top:M,left:q,width:P,height:F}=r.$el.getBoundingClientRect();u={top:M+F/2,left:q+P/2}}function C(M){x(),A(M)}function k(M){x(),A(M,!0)}function L(M){if(!eb.includes(M.keyCode))return;Qe(M);const q=([34,33].includes(M.keyCode)?10:1)*f.value,P=[34,37,40].includes(M.keyCode)?-q:q;o.value=Lt(parseFloat((o.value+P).toFixed(p.value)),s.value,l.value),I()}function A(M,q){const P=Ai(M),F=Math.abs(P.top-u.top),j=Math.sqrt(F**2+Math.abs(P.left-u.left)**2);let V=Math.asin(F/j)*(180/Math.PI);V=P.top<u.top?u.left<P.left?90-V:270+V:u.left<P.left?V+90:270-V,n.lang.rtl===!0?V=Wh(-V-t.angle,0,360):t.angle&&(V=Wh(V-t.angle,0,360)),t.reverse===!0&&(V=360-V);let O=t.min+V/360*(t.max-t.min);if(f.value!==0){const $=O%f.value;O=O-$+(Math.abs($)>=f.value/2?($<0?-1:1)*f.value:0),O=parseFloat(O.toFixed(p.value))}O=Lt(O,s.value,l.value),i("dragValue",O),o.value!==O&&(o.value=O),I(q)}function E(M){eb.includes(M.keyCode)&&I(!0)}function I(M){t.modelValue!==o.value&&i("update:modelValue",o.value),M===!0&&i("change",o.value)}const T=Vu(t);function R(){return S("input",T.value)}return()=>{const M={class:d.value,role:"slider","aria-valuemin":s.value,"aria-valuemax":l.value,"aria-valuenow":t.modelValue,...v.value,...b.value,value:o.value,instantFeedback:g.value,..._.value},q={default:e.default};return h.value===!0&&t.name!==void 0&&(q.internal=R),mr(RS,M,q,"knob",h.value,()=>y.value)}}});var{passive:tb}=Rt,yI=["both","horizontal","vertical"],pC=ue({name:"QScrollObserver",props:{axis:{type:String,validator:t=>yI.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:xa},emits:["scroll"],setup(t,{emit:e}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let r,n,o=null;function a(){o!==null&&o();const h=Math.max(0,co(r)),d=Rd(r),p={top:h-i.position.top,left:d-i.position.left};if(t.axis==="vertical"&&p.top===0||t.axis==="horizontal"&&p.left===0)return;const f=Math.abs(p.top)>=Math.abs(p.left)?p.top<0?"up":"down":p.left<0?"left":"right";i.position={top:h,left:d},i.directionChanged=i.direction!==f,i.delta=p,i.directionChanged===!0&&(i.direction=f,i.inflectionPoint=i.position),e("scroll",{...i})}function s(){r=cn(n,t.scrollTarget),r.addEventListener("scroll",u,tb),u(!0)}function l(){r!==void 0&&(r.removeEventListener("scroll",u,tb),r=void 0)}function u(h){if(h===!0||t.debounce===0||t.debounce==="0")a();else if(o===null){const[d,p]=t.debounce?[setTimeout(a,t.debounce),clearTimeout]:[requestAnimationFrame(a),cancelAnimationFrame];o=()=>{p(d),o=null}}}ae(()=>t.scrollTarget,()=>{l(),s()});const{proxy:c}=Ce();return ae(()=>c.$q.lang.rtl,a),Ft(()=>{n=c.$el.parentNode,s()}),st(()=>{o!==null&&o(),l()}),Object.assign(c,{trigger:u,getPosition:()=>i}),ai}});ue({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=G(null),o=G(r.screen.height),a=G(t.container===!0?0:r.screen.width),s=G({position:0,direction:"down",inflectionPoint:0}),l=G(0),u=G(fr.value===!0?0:lh()),c=w(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),h=w(()=>t.container===!1?{minHeight:r.screen.height+"px"}:null),d=w(()=>u.value!==0?{[r.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),p=w(()=>u.value!==0?{[r.lang.rtl===!0?"right":"left"]:0,[r.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function f(y){if(t.container===!0||document.qScrollPrevented!==!0){const x={position:y.position.top,direction:y.direction,directionChanged:y.directionChanged,inflectionPoint:y.inflectionPoint.top,delta:y.delta.top};s.value=x,t.onScroll!==void 0&&i("scroll",x)}}function g(y){const{height:x,width:C}=y;let k=!1;o.value!==x&&(k=!0,o.value=x,t.onScrollHeight!==void 0&&i("scrollHeight",x),v()),a.value!==C&&(k=!0,a.value=C),k===!0&&t.onResize!==void 0&&i("resize",y)}function _({height:y}){l.value!==y&&(l.value=y,v())}function v(){if(t.container===!0){const y=o.value>l.value?lh():0;u.value!==y&&(u.value=y)}}let b=null;const m={instances:{},view:w(()=>t.view),isContainer:w(()=>t.container),rootRef:n,height:o,containerHeight:l,scrollbarWidth:u,totalWidth:w(()=>a.value+u.value),rows:w(()=>{const y=t.view.toLowerCase().split(" ");return{top:y[0].split(""),middle:y[1].split(""),bottom:y[2].split("")}}),header:Un({size:0,offset:0,space:!1}),right:Un({size:300,offset:0,space:!1}),footer:Un({size:0,offset:0,space:!1}),left:Un({size:300,offset:0,space:!1}),scroll:s,animate(){b!==null?clearTimeout(b):document.body.classList.add("q-body--layout-animate"),b=setTimeout(()=>{b=null,document.body.classList.remove("q-body--layout-animate")},155)},update(y,x,C){m[y][x]=C}};if(vo(da,m),lh()>0){let y=function(){k=null,L.classList.remove("hide-scrollbar")},x=function(){if(k===null){if(L.scrollHeight>r.screen.height)return;L.classList.add("hide-scrollbar")}else clearTimeout(k);k=setTimeout(y,300)},C=function(A){k!==null&&A==="remove"&&(clearTimeout(k),y()),window[`${A}EventListener`]("resize",x)},k=null;const L=document.body;ae(()=>t.container!==!0?"add":"remove",C),t.container!==!0&&C("add"),cx(()=>{C("remove")})}return()=>{const y=Jt(e.default,[S(pC,{onScroll:f}),S(pa,{onResize:g})]),x=S("div",{class:c.value,style:h.value,ref:t.container===!0?void 0:n,tabindex:-1},y);return t.container===!0?S("div",{class:"q-layout-container overflow-hidden",ref:n},[S(pa,{onResize:_}),S("div",{class:"absolute-full",style:d.value},[S("div",{class:"scroll",style:p.value},[x])])]):x}}});var _I=["horizontal","vertical","cell","none"],bI=ue({name:"QMarkupTable",props:{...ft,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:t=>_I.includes(t)}},setup(t,{slots:e}){const i=Ce(),r=gt(t,i.proxy.$q),n=w(()=>`q-markup-table q-table__container q-table__card q-table--${t.separator}-separator`+(r.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(t.dense===!0?" q-table--dense":"")+(t.flat===!0?" q-table--flat":"")+(t.bordered===!0?" q-table--bordered":"")+(t.square===!0?" q-table--square":"")+(t.wrapCells===!1?" q-table--no-wrap":""));return()=>S("div",{class:n.value},[S("table",{class:"q-table"},De(e.default))])}});ue({name:"QNoSsr",props:{tag:{type:String,default:"div"},placeholder:String},setup(t,{slots:e}){const{isHydrated:i}=OS();return()=>{if(i.value===!0){const o=De(e.default);return o===void 0?o:o.length>1?S(t.tag,{},o):o[0]}const r={class:"q-no-ssr-placeholder"},n=De(e.placeholder);return n!==void 0?n.length>1?S(t.tag,r,n):n[0]:t.placeholder!==void 0?S(t.tag,r,t.placeholder):void 0}}});var xI=ue({name:"QRadio",props:{...ft,...Rn,..._r,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),n=gt(t,r.$q),o=qn(t,kS),a=G(null),{refocusTargetEl:s,refocusTarget:l}=MS(t,a),u=w(()=>Vr(t.modelValue)===Vr(t.val)),c=w(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(n.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),h=w(()=>{const m=t.color===void 0||t.keepColor!==!0&&u.value!==!0?"":` text-${t.color}`;return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${m}`}),d=w(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),p=w(()=>t.disable===!0?-1:t.tabindex||0),f=wo(w(()=>{const m={type:"radio"};return t.name!==void 0&&Object.assign(m,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),m}));function g(m){m!==void 0&&(Qe(m),l(m)),t.disable!==!0&&u.value!==!0&&i("update:modelValue",t.val,m)}function _(m){m.keyCode!==13&&m.keyCode!==32||Qe(m)}function v(m){m.keyCode!==13&&m.keyCode!==32||g(m)}Object.assign(r,{set:g});const b=S("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[S("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),S("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);return()=>{const m=d.value!==null?[S("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[S(vt,{class:"q-radio__icon",name:d.value})])]:[b];t.disable!==!0&&f(m,"unshift"," q-radio__native q-ma-none q-pa-none");const y=[S("div",{class:h.value,style:o.value,"aria-hidden":"true"},m)];s.value!==null&&y.push(s.value);const x=t.label!==void 0?Jt(e.default,[t.label]):De(e.default);return x!==void 0&&y.push(S("div",{class:"q-radio__label q-anchor--skip"},x)),S("div",{ref:a,class:c.value,tabindex:p.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:g,onKeydown:_,onKeyup:v},y)}}}),wI=ue({name:"QToggle",props:{...TS,icon:String,iconColor:String},emits:ES,setup:t=>LS("toggle",function(e,i){const r=w(()=>(e.value===!0?t.checkedIcon:i.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),n=w(()=>e.value===!0?t.iconColor:null);return()=>[S("div",{class:"q-toggle__track"}),S("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},r.value!==void 0?[S(vt,{name:r.value,color:n.value})]:void 0)]})}),fC={radio:xI,checkbox:Hl,toggle:wI},SI=Object.keys(fC);function hf(t,e){if(typeof t=="function")return t;const i=t!==void 0?t:e;return r=>r[i]}var CI=ue({name:"QOptionGroup",props:{...ft,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(Ci),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:t=>SI.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:i}){const{proxy:{$q:r}}=Ce(),n=Array.isArray(t.modelValue);t.type;const o=gt(t,r),a=w(()=>fC[t.type]),s=w(()=>hf(t.optionValue,"value")),l=w(()=>hf(t.optionLabel,"label")),u=w(()=>hf(t.optionDisable,"disable")),c=w(()=>t.options.map(f=>({val:s.value(f),name:f.name===void 0?t.name:f.name,disable:t.disable||u.value(f),leftLabel:f.leftLabel===void 0?t.leftLabel:f.leftLabel,color:f.color===void 0?t.color:f.color,checkedIcon:f.checkedIcon,uncheckedIcon:f.uncheckedIcon,dark:f.dark===void 0?o.value:f.dark,size:f.size===void 0?t.size:f.size,dense:t.dense,keepColor:f.keepColor===void 0?t.keepColor:f.keepColor}))),h=w(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),d=w(()=>{const f={role:"group"};return t.type==="radio"&&(f.role="radiogroup",t.disable===!0&&(f["aria-disabled"]="true")),f});function p(f){e("update:modelValue",f)}return()=>S("div",{class:h.value,...d.value},t.options.map((f,g)=>{const _=i["label-"+g]!==void 0?()=>i["label-"+g](f):i.label!==void 0?()=>i.label(f):void 0;return S("div",[S(a.value,{label:_===void 0?l.value(f):null,modelValue:t.modelValue,"onUpdate:modelValue":p,...c.value[g]},_)])}))}});ue({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=Hi(da,wt);if(r===wt||Hi(s_,wt)===wt)return wt;const n=w(()=>{const a=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof t.styleFn=="function"){const s=r.isContainer.value===!0?r.containerHeight.value:i.screen.height;return t.styleFn(a,s)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-a+"px":i.screen.height===0?a!==0?`calc(100vh - ${a}px)`:"100vh":i.screen.height-a+"px"}}),o=w(()=>"q-page"+(t.padding===!0?" q-layout-padding":""));return()=>S("main",{class:o.value,style:n.value},De(e.default))}}),ue({name:"QPageContainer",setup(t,{slots:e}){const{proxy:{$q:i}}=Ce(),r=Hi(da,wt);if(r===wt)return wt;vo(s_,!0);const n=w(()=>{const o={};return r.header.space===!0&&(o.paddingTop=`${r.header.size}px`),r.right.space===!0&&(o["padding"+(i.lang.rtl===!0?"Left":"Right")]=`${r.right.size}px`),r.footer.space===!0&&(o.paddingBottom=`${r.footer.size}px`),r.left.space===!0&&(o["padding"+(i.lang.rtl===!0?"Right":"Left")]=`${r.left.size}px`),o});return()=>S("div",{class:"q-page-container",style:n.value},De(e.default))}});var df={position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,validator:t=>t.length===2},expand:Boolean};function ib(){const{props:t,proxy:{$q:e}}=Ce(),i=Hi(da,wt);if(i===wt)return wt;const r=w(()=>{const c=t.position;return{top:c.indexOf("top")!==-1,right:c.indexOf("right")!==-1,bottom:c.indexOf("bottom")!==-1,left:c.indexOf("left")!==-1,vertical:c==="top"||c==="bottom",horizontal:c==="left"||c==="right"}}),n=w(()=>i.header.offset),o=w(()=>i.right.offset),a=w(()=>i.footer.offset),s=w(()=>i.left.offset),l=w(()=>{let c=0,h=0;const d=r.value,p=e.lang.rtl===!0?-1:1;d.top===!0&&n.value!==0?h=`${n.value}px`:d.bottom===!0&&a.value!==0&&(h=-a.value+"px"),d.left===!0&&s.value!==0?c=p*s.value+"px":d.right===!0&&o.value!==0&&(c=-p*o.value+"px");const f={transform:`translate(${c}, ${h})`};return t.offset&&(f.margin=`${t.offset[1]}px ${t.offset[0]}px`),d.vertical===!0?(s.value!==0&&(f[e.lang.rtl===!0?"right":"left"]=`${s.value}px`),o.value!==0&&(f[e.lang.rtl===!0?"left":"right"]=`${o.value}px`)):d.horizontal===!0&&(n.value!==0&&(f.top=`${n.value}px`),a.value!==0&&(f.bottom=`${a.value}px`)),f}),u=w(()=>`q-page-sticky row flex-center fixed-${t.position} q-page-sticky--${t.expand===!0?"expand":"shrink"}`);return{$layout:i,getStickyContent:function(c){const h=De(c.default);return S("div",{class:u.value,style:l.value},t.expand===!0?h:[S("div",h)])}}}function zc(t,e){return[!0,!1].includes(t)?t:e}function pf(t){let e,i,r=!1;function n(){i=arguments,r!==!0&&(r=!0,e=window.requestAnimationFrame(()=>{t.apply(this,i),i=void 0,r=!1}))}return n.cancel=()=>{window.cancelAnimationFrame(e),r=!1},n}ue({name:"QPageScroller",props:{...df,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{...df.offset,default:()=>[18,18]}},emits:["click"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),{$layout:n,getStickyContent:o}=ib(),a=G(null);let s;const l=w(()=>n.height.value-(n.isContainer.value===!0?n.containerHeight.value:r.screen.height));function u(){return t.reverse===!0?l.value-n.scroll.value.position>t.scrollOffset:n.scroll.value.position>t.scrollOffset}const c=G(u());function h(){const _=u();c.value!==_&&(c.value=_)}function d(){t.reverse===!0?s===void 0&&(s=ae(l,h)):p()}function p(){s!==void 0&&(s(),s=void 0)}function f(_){fs(cn(n.isContainer.value===!0?a.value:n.rootRef.value),t.reverse===!0?n.height.value:0,t.duration),i("click",_)}function g(){return c.value===!0?S("div",{ref:a,class:"q-page-scroller",onClick:f},o(e)):null}return ae(n.scroll,h),ae(()=>t.reverse,d),d(),st(p),()=>S(di,{name:"q-transition--fade"},g)}}),ue({name:"QPageSticky",props:df,setup(t,{slots:e}){const{getStickyContent:i}=ib();return()=>i(e)}}),ue({name:"QPagination",props:{...ft,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:t=>(typeof t=="string"?parseInt(t,10):t)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:t=>t===""||sS.includes(t)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(t,{emit:e}){const{proxy:i}=Ce(),{$q:r}=i,n=gt(t,r),o=w(()=>parseInt(t.min,10)),a=w(()=>parseInt(t.max,10)),s=w(()=>parseInt(t.maxPages,10)),l=w(()=>f.value+" / "+a.value),u=w(()=>zc(t.boundaryLinks,t.input)),c=w(()=>zc(t.boundaryNumbers,!t.input)),h=w(()=>zc(t.directionLinks,t.input)),d=w(()=>zc(t.ellipses,!t.input)),p=G(null),f=w({get:()=>t.modelValue,set:T=>{if(T=parseInt(T,10),t.disable||isNaN(T))return;const R=Lt(T,o.value,a.value);t.modelValue!==R&&e("update:modelValue",R)}});ae(()=>`${o.value}|${a.value}`,()=>{f.value=t.modelValue});const g=w(()=>"q-pagination row no-wrap items-center"+(t.disable===!0?" disabled":"")),_=w(()=>t.gutter in Kh?`${Kh[t.gutter]}px`:t.gutter||null),v=w(()=>_.value!==null?`--q-pagination-gutter-parent:-${_.value};--q-pagination-gutter-child:${_.value}`:null),b=w(()=>{const T=[t.iconFirst||r.iconSet.pagination.first,t.iconPrev||r.iconSet.pagination.prev,t.iconNext||r.iconSet.pagination.next,t.iconLast||r.iconSet.pagination.last];return r.lang.rtl===!0?T.reverse():T}),m=w(()=>({"aria-disabled":t.disable===!0?"true":"false",role:"navigation"})),y=w(()=>e0(t,"flat")),x=w(()=>({[y.value]:!0,round:t.round,rounded:t.rounded,padding:t.padding,color:t.color,textColor:t.textColor,size:t.size,ripple:t.ripple===null||t.ripple})),C=w(()=>{const T={[y.value]:!1};return t.activeDesign!==""&&(T[t.activeDesign]=!0),T}),k=w(()=>({...C.value,color:t.activeColor||t.color,textColor:t.activeTextColor||t.textColor})),L=w(()=>{let T=Math.max(s.value,1+(d.value?2:0)+(c.value?2:0));const R={pgFrom:o.value,pgTo:a.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(a.value).length)}em`}};return s.value&&T<a.value-o.value+1&&(T=1+2*Math.floor(T/2),R.pgFrom=Math.max(o.value,Math.min(a.value-T+1,t.modelValue-Math.floor(T/2))),R.pgTo=Math.min(a.value,R.pgFrom+T-1),c.value&&(R.boundaryStart=!0,R.pgFrom++),d.value&&R.pgFrom>o.value+(c.value?1:0)&&(R.ellipsesStart=!0,R.pgFrom++),c.value&&(R.boundaryEnd=!0,R.pgTo--),d.value&&R.pgTo<a.value-(c.value?1:0)&&(R.ellipsesEnd=!0,R.pgTo--)),R});function A(T){f.value=T}const E=w(()=>{function T(){f.value=p.value,p.value=null}return{"onUpdate:modelValue":R=>{p.value=R},onKeyup:R=>{gr(R,13)===!0&&T()},onBlur:T}});function I(T,R,M){const q={"aria-label":R,"aria-current":"false",...x.value,...T};return M===!0&&Object.assign(q,{"aria-current":"true",...k.value}),R!==void 0&&(t.toFn!==void 0?q.to=t.toFn(R):q.onClick=()=>{A(R)}),S(_t,q)}return Object.assign(i,{set:A,setByOffset:function(T){f.value=f.value+T}}),()=>{const T=[],R=[];let M;if(u.value===!0&&(T.push(I({key:"bls",disable:t.disable||t.modelValue<=o.value,icon:b.value[0]},o.value)),R.unshift(I({key:"ble",disable:t.disable||t.modelValue>=a.value,icon:b.value[3]},a.value))),h.value===!0&&(T.push(I({key:"bdp",disable:t.disable||t.modelValue<=o.value,icon:b.value[1]},t.modelValue-1)),R.unshift(I({key:"bdn",disable:t.disable||t.modelValue>=a.value,icon:b.value[2]},t.modelValue+1))),t.input!==!0){M=[];const{pgFrom:q,pgTo:P,marginalStyle:F}=L.value;if(L.value.boundaryStart===!0){const j=o.value===t.modelValue;T.push(I({key:"bns",style:F,disable:t.disable,label:o.value},o.value,j))}if(L.value.boundaryEnd===!0){const j=a.value===t.modelValue;R.unshift(I({key:"bne",style:F,disable:t.disable,label:a.value},a.value,j))}L.value.ellipsesStart===!0&&T.push(I({key:"bes",style:F,disable:t.disable,label:"…",ripple:!1},q-1)),L.value.ellipsesEnd===!0&&R.unshift(I({key:"bee",style:F,disable:t.disable,label:"…",ripple:!1},P+1));for(let j=q;j<=P;j++)M.push(I({key:`bpg${j}`,style:F,disable:t.disable,label:j},j,j===t.modelValue))}return S("div",{class:g.value,...m.value},[S("div",{class:"q-pagination__content row no-wrap items-center",style:v.value},[...T,t.input===!0?S(Ul,{class:"inline",style:{width:l.value.length/1.5+"em"},type:"number",dense:!0,value:p.value,disable:t.disable,dark:n.value,borderless:!0,inputClass:t.inputClass,inputStyle:t.inputStyle,placeholder:l.value,min:o.value,max:a.value,...E.value}):S("div",{class:"q-pagination__middle row justify-center"},M),...R])])}}});var{passive:Dc}=Rt;function Wl(t,e=new WeakMap){if(Object(t)!==t)return t;if(e.has(t))return e.get(t);const i=t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):t instanceof Set?new Set:t instanceof Map?new Map:typeof t.constructor!="function"?Object.create(null):t.prototype!==void 0&&typeof t.prototype.constructor=="function"?t:new t.constructor;if(typeof t.constructor=="function"&&typeof t.valueOf=="function"){const r=t.valueOf();if(Object(r)!==r){const n=new t.constructor(r);return e.set(t,n),n}}return e.set(t,i),t instanceof Set?t.forEach(r=>{i.add(Wl(r,e))}):t instanceof Map&&t.forEach((r,n)=>{i.set(n,Wl(r,e))}),Object.assign(i,...Object.keys(t).map(r=>({[r]:Wl(t[r],e)})))}ue({name:"QParallax",props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:t=>t>=0&&t<=1},scrollTarget:xa,onScroll:Function},setup(t,{slots:e,emit:i}){const r=G(0),n=G(null),o=G(null),a=G(null);let s,l,u,c,h,d;ae(()=>t.height,()=>{s===!0&&f()}),ae(()=>t.scrollTarget,()=>{s===!0&&(b(),v())});let p=m=>{r.value=m,t.onScroll!==void 0&&i("scroll",m)};function f(){let m,y,x;d===window?(m=0,x=y=window.innerHeight):(m=Yh(d).top,y=qs(d),x=m+y);const C=Yh(n.value).top,k=C+t.height;if(h!==void 0||k>m&&C<x){const L=(x-C)/(t.height+y);g((u-t.height)*L*t.speed),p(L)}}let g=m=>{l.style.transform=`translate3d(-50%,${Math.round(m)}px,0)`};function _(){u=l.naturalHeight||l.videoHeight||qs(l),s===!0&&f()}function v(){s=!0,d=cn(n.value,t.scrollTarget),d.addEventListener("scroll",f,Dc),window.addEventListener("resize",c,Dc),f()}function b(){s===!0&&(s=!1,d.removeEventListener("scroll",f,Dc),window.removeEventListener("resize",c,Dc),d=void 0,g.cancel(),p.cancel(),c.cancel())}return Ft(()=>{g=pf(g),p=pf(p),c=pf(_),l=e.media!==void 0?o.value.children[0]:a.value,l.onload=l.onloadstart=l.loadedmetadata=_,_(),l.style.display="initial",window.IntersectionObserver!==void 0?(h=new IntersectionObserver(m=>{(m[0].isIntersecting===!0?v:b)()}),h.observe(n.value)):v()}),st(()=>{b(),h!==void 0&&h.disconnect(),l.onload=l.onloadstart=l.loadedmetadata=null}),()=>S("div",{ref:n,class:"q-parallax",style:{height:`${t.height}px`}},[S("div",{ref:o,class:"q-parallax__media absolute-full"},e.media!==void 0?e.media():[S("img",{ref:a,src:t.src})]),S("div",{class:"q-parallax__content absolute-full column flex-center"},e.content!==void 0?e.content({percentScrolled:r.value}):De(e.default))])}});var MI=ue({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=G(null),a=G(""),s=G("");let l=!1;const u=w(()=>pi({initialValue:a.value,validate:t.validate,set:c,cancel:h,updatePosition:d},"value",()=>s.value,y=>{s.value=y}));function c(){t.validate(s.value)!==!1&&(p()===!0&&(i("save",s.value,a.value),i("update:modelValue",s.value)),f())}function h(){p()===!0&&i("cancel",s.value,a.value),f()}function d(){ct(()=>{o.value.updatePosition()})}function p(){return Tr(s.value,a.value)===!1}function f(){l=!0,o.value.hide()}function g(){l=!1,a.value=Wl(t.modelValue),s.value=Wl(t.modelValue),i("beforeShow")}function _(){i("show")}function v(){l===!1&&p()===!0&&(t.autoSave===!0&&t.validate(s.value)===!0?(i("save",s.value,a.value),i("update:modelValue",s.value)):i("cancel",s.value,a.value)),i("beforeHide")}function b(){i("hide")}function m(){const y=e.default!==void 0?[].concat(e.default(u.value)):[];return t.title&&y.unshift(S("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},t.title)),t.buttons===!0&&y.push(S("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[S(_t,{flat:!0,color:t.color,label:t.labelCancel||n.lang.label.cancel,onClick:h}),S(_t,{flat:!0,color:t.color,label:t.labelSet||n.lang.label.set,onClick:c})])),y}return Object.assign(r,{set:c,cancel:h,show(y){o.value!==null&&o.value.show(y)},hide(y){o.value!==null&&o.value.hide(y)},updatePosition:d}),()=>{if(t.disable!==!0)return S(Zs,{ref:o,class:"q-popup-edit",cover:t.cover,onBeforeShow:g,onShow:_,onBeforeHide:v,onHide:b,onEscapeKey:h},m)}}}),kI=ue({name:"QPopupProxy",props:{...hS,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:e,emit:i,attrs:r}){const{proxy:n}=Ce(),{$q:o}=n,a=G(!1),s=G(null),l=w(()=>parseInt(t.breakpoint,10)),{canShow:u}=i0({showing:a});function c(){return o.screen.width<l.value||o.screen.height<l.value?"dialog":"menu"}const h=G(c()),d=w(()=>h.value==="menu"?{maxHeight:"99vh"}:{});function p(g){a.value=!0,i("show",g)}function f(g){a.value=!1,h.value=c(),i("hide",g)}return ae(()=>c(),g=>{a.value!==!0&&(h.value=g)}),Object.assign(n,{show(g){u(g)===!0&&s.value.show(g)},hide(g){s.value.hide(g)},toggle(g){s.value.toggle(g)}}),pi(n,"currentComponent",()=>({type:h.value,ref:s.value})),()=>{const g={ref:s,...d.value,...r,onShow:p,onHide:f};let _;return h.value==="dialog"?_=Ad:(_=Zs,Object.assign(g,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),S(_,g,e.default)}}}),TI={xs:2,sm:4,md:6,lg:10,xl:14};function rb(t,e,i){return{transform:e===!0?`translateX(${i.lang.rtl===!0?"-":""}100%) scale3d(${-t},1,1)`:`scale3d(${t},1,1)`}}var EI=ue({name:"QLinearProgress",props:{...ft,...Rn,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(t,{slots:e}){const{proxy:i}=Ce(),r=gt(t,i.$q),n=qn(t,TI),o=w(()=>t.indeterminate===!0||t.query===!0),a=w(()=>t.reverse!==t.query),s=w(()=>({...n.value!==null?n.value:{},"--q-linear-progress-speed":`${t.animationSpeed}ms`})),l=w(()=>"q-linear-progress"+(t.color!==void 0?` text-${t.color}`:"")+(t.reverse===!0||t.query===!0?" q-linear-progress--reverse":"")+(t.rounded===!0?" rounded-borders":"")),u=w(()=>rb(t.buffer!==void 0?t.buffer:1,a.value,i.$q)),c=w(()=>`with${t.instantFeedback===!0?"out":""}-transition`),h=w(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${c.value} q-linear-progress__track--${r.value===!0?"dark":"light"}`+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),d=w(()=>rb(o.value===!0?1:t.value,a.value,i.$q)),p=w(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${c.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),f=w(()=>({width:100*t.value+"%"})),g=w(()=>`q-linear-progress__stripe absolute-${t.reverse===!0?"right":"left"} q-linear-progress__stripe--${c.value}`);return()=>{const _=[S("div",{class:h.value,style:u.value}),S("div",{class:p.value,style:d.value})];return t.stripe===!0&&o.value===!1&&_.push(S("div",{class:g.value,style:f.value})),S("div",{class:l.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.indeterminate===!0?void 0:t.value},Jt(e.default,_))}}}),LI=40;ue({name:"QPullToRefresh",props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:xa},emits:["refresh"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=G("pull"),a=G(0),s=G(!1),l=G(-40),u=G(!1),c=G({}),h=w(()=>({opacity:a.value,transform:`translateY(${l.value}px) rotate(${360*a.value}deg)`})),d=w(()=>"q-pull-to-refresh__puller row flex-center"+(u.value===!0?" q-pull-to-refresh__puller--animating":"")+(t.bgColor!==void 0?` bg-${t.bgColor}`:""));function p(C){if(C.isFinal===!0)return void(s.value===!0&&(s.value=!1,o.value==="pulled"?(o.value="refreshing",y({pos:20}),_()):o.value==="pull"&&y({pos:-40,ratio:0})));if(u.value===!0||o.value==="refreshing")return!1;if(C.isFirst===!0){if(co(b)!==0||C.direction!=="down")return s.value===!0&&(s.value=!1,o.value="pull",y({pos:-40,ratio:0})),!1;s.value=!0;const{top:A,left:E}=v.getBoundingClientRect();c.value={top:A+"px",left:E+"px",width:window.getComputedStyle(v).getPropertyValue("width")}}fi(C.evt);const k=Math.min(140,Math.max(0,C.distance.y));l.value=k-LI,a.value=Lt(k/60,0,1);const L=l.value>20?"pulled":"pull";o.value!==L&&(o.value=L)}const f=w(()=>{const C={down:!0};return t.noMouse!==!0&&(C.mouse=!0),[[dr,p,void 0,C]]}),g=w(()=>"q-pull-to-refresh__content"+(s.value===!0?" no-pointer-events":""));function _(){i("refresh",()=>{y({pos:-40,ratio:0},()=>{o.value="pull"})})}let v,b,m=null;function y({pos:C,ratio:k},L){u.value=!0,l.value=C,k!==void 0&&(a.value=k),m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,u.value=!1,L&&L()},300)}function x(){b=cn(v,t.scrollTarget)}return ae(()=>t.scrollTarget,x),Ft(()=>{v=r.$el,x()}),st(()=>{m!==null&&clearTimeout(m)}),Object.assign(r,{trigger:_,updateScrollTarget:x}),()=>mr("div",{class:"q-pull-to-refresh"},[S("div",{class:g.value},De(e.default)),S("div",{class:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:c.value},[S("div",{class:d.value,style:h.value},[o.value!=="refreshing"?S(vt,{name:t.icon||n.iconSet.pullToRefresh.icon,color:t.color,size:"32px"}):S(Dr,{size:"24px",color:t.color})])])],"main",t.disable===!1,()=>f.value)}});var ff=0,nb=1,gf=2;ue({name:"QRange",props:{...qS,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:t=>"min"in t&&"max"in t},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:AS,setup(t,{emit:e}){const{proxy:{$q:i}}=Ce(),{state:r,methods:n}=FS({updateValue:L,updatePosition:function(E,I=r.dragging.value){let T;const R=n.getDraggingRatio(E,I),M=n.convertRatioToModel(R);switch(I.type){case ff:R<=I.ratioMax?(T={minR:R,maxR:I.ratioMax,min:M,max:I.valueMax},r.focus.value="min"):(T={minR:I.ratioMax,maxR:R,min:I.valueMax,max:M},r.focus.value="max");break;case gf:R>=I.ratioMin?(T={minR:I.ratioMin,maxR:R,min:I.valueMin,max:M},r.focus.value="max"):(T={minR:R,maxR:I.ratioMin,min:M,max:I.valueMin},r.focus.value="min");break;case nb:const q=R-I.offsetRatio,P=Lt(I.ratioMin+q,r.innerMinRatio.value,r.innerMaxRatio.value-I.rangeRatio),F=M-I.offsetModel,j=Lt(I.valueMin+F,r.innerMin.value,r.innerMax.value-I.rangeValue);T={minR:P,maxR:P+I.rangeRatio,min:r.roundValueFn.value(j),max:r.roundValueFn.value(j+I.rangeValue)},r.focus.value="both"}l.value=l.value.min===null||l.value.max===null?{min:T.min||t.min,max:T.max||t.max}:{min:T.min,max:T.max},t.snap!==!0||t.step===0?(a.value=T.minR,s.value=T.maxR):(a.value=n.convertModelToRatio(l.value.min),s.value=n.convertModelToRatio(l.value.max))},getDragging:function(E){const{left:I,top:T,width:R,height:M}=o.value.getBoundingClientRect(),q=t.dragOnlyRange===!0?0:t.vertical===!0?m.value.offsetHeight/(2*M):m.value.offsetWidth/(2*R),P={left:I,top:T,width:R,height:M,valueMin:l.value.min,valueMax:l.value.max,ratioMin:c.value,ratioMax:h.value},F=n.getDraggingRatio(E,P);return t.dragOnlyRange!==!0&&F<P.ratioMin+q?P.type=ff:t.dragOnlyRange===!0||F<P.ratioMax-q?t.dragRange===!0||t.dragOnlyRange===!0?(P.type=nb,Object.assign(P,{offsetRatio:F,offsetModel:n.convertRatioToModel(F),rangeValue:P.valueMax-P.valueMin,rangeRatio:P.ratioMax-P.ratioMin})):P.type=P.ratioMax-F<F-P.ratioMin?gf:ff:P.type=gf,P},formAttrs:w(()=>({type:"hidden",name:t.name,value:`${t.modelValue.min}|${t.modelValue.max}`}))}),o=G(null),a=G(0),s=G(0),l=G({min:0,max:0});function u(){l.value.min=t.modelValue.min===null?r.innerMin.value:Lt(t.modelValue.min,r.innerMin.value,r.innerMax.value),l.value.max=t.modelValue.max===null?r.innerMax.value:Lt(t.modelValue.max,r.innerMin.value,r.innerMax.value)}ae(()=>`${t.modelValue.min}|${t.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,u),u();const c=w(()=>n.convertModelToRatio(l.value.min)),h=w(()=>n.convertModelToRatio(l.value.max)),d=w(()=>r.active.value===!0?a.value:c.value),p=w(()=>r.active.value===!0?s.value:h.value),f=w(()=>{const E={[r.positionProp.value]:100*d.value+"%",[r.sizeProp.value]:100*(p.value-d.value)+"%"};return t.selectionImg!==void 0&&(E.backgroundImage=`url(${t.selectionImg}) !important`),E}),g=w(()=>{if(r.editable.value!==!0)return{};if(i.platform.is.mobile===!0)return{onClick:n.onMobileClick};const E={onMousedown:n.onActivate};return t.dragRange!==!0&&t.dragOnlyRange!==!0||Object.assign(E,{onFocus:()=>{r.focus.value="both"},onBlur:n.onBlur,onKeydown:A,onKeyup:n.onKeyup}),E});function _(E){return i.platform.is.mobile!==!0&&r.editable.value===!0&&t.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=E},onBlur:n.onBlur,onKeydown:A,onKeyup:n.onKeyup}:{}}const v=w(()=>t.dragOnlyRange!==!0?r.tabindex.value:null),b=w(()=>i.platform.is.mobile===!0||!t.dragRange&&t.dragOnlyRange!==!0?null:r.tabindex.value),m=G(null),y=w(()=>_("min")),x=n.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:m,key:"tmin",...y.value,tabindex:v.value}),ratio:d,label:w(()=>t.leftLabelValue!==void 0?t.leftLabelValue:l.value.min),thumbColor:w(()=>t.leftThumbColor||t.thumbColor||t.color),labelColor:w(()=>t.leftLabelColor||t.labelColor),labelTextColor:w(()=>t.leftLabelTextColor||t.labelTextColor)}),C=w(()=>_("max")),k=n.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...C.value,key:"tmax",tabindex:v.value}),ratio:p,label:w(()=>t.rightLabelValue!==void 0?t.rightLabelValue:l.value.max),thumbColor:w(()=>t.rightThumbColor||t.thumbColor||t.color),labelColor:w(()=>t.rightLabelColor||t.labelColor),labelTextColor:w(()=>t.rightLabelTextColor||t.labelTextColor)});function L(E){l.value.min===t.modelValue.min&&l.value.max===t.modelValue.max||e("update:modelValue",{...l.value}),E===!0&&e("change",{...l.value})}function A(E){if(!m0.includes(E.keyCode))return;Qe(E);const I=([34,33].includes(E.keyCode)?10:1)*r.keyStep.value,T=([34,37,40].includes(E.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*I;if(r.focus.value==="both"){const R=l.value.max-l.value.min,M=Lt(r.roundValueFn.value(l.value.min+T),r.innerMin.value,r.innerMax.value-R);l.value={min:M,max:r.roundValueFn.value(M+R)}}else{if(r.focus.value===!1)return;{const R=r.focus.value;l.value={...l.value,[R]:Lt(r.roundValueFn.value(l.value[R]+T),R==="min"?r.innerMin.value:l.value.min,R==="max"?r.innerMax.value:l.value.max)}}}L()}return()=>{const E=n.getContent(f,b,g,I=>{I.push(x(),k())});return S("div",{ref:o,class:"q-range "+r.classes.value+(t.modelValue.min===null||t.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":t.modelValue.min+"|"+t.modelValue.max},E)}}}),ue({name:"QRating",props:{...Rn,..._r,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=qn(t),o=wo(Vu(t)),a=G(0);let s={};const l=w(()=>t.readonly!==!0&&t.disable!==!0),u=w(()=>`q-rating row inline items-center q-rating--${l.value===!0?"":"non-"}editable`+(t.noDimming===!0?" q-rating--no-dimming":"")+(t.disable===!0?" disabled":"")+(t.color!==void 0&&Array.isArray(t.color)===!1?` text-${t.color}`:"")),c=w(()=>{const v=Array.isArray(t.icon)===!0?t.icon.length:0,b=Array.isArray(t.iconSelected)===!0?t.iconSelected.length:0,m=Array.isArray(t.iconHalf)===!0?t.iconHalf.length:0,y=Array.isArray(t.color)===!0?t.color.length:0,x=Array.isArray(t.colorSelected)===!0?t.colorSelected.length:0,C=Array.isArray(t.colorHalf)===!0?t.colorHalf.length:0;return{iconLen:v,icon:v>0?t.icon[v-1]:t.icon,selIconLen:b,selIcon:b>0?t.iconSelected[b-1]:t.iconSelected,halfIconLen:m,halfIcon:m>0?t.iconHalf[b-1]:t.iconHalf,colorLen:y,color:y>0?t.color[y-1]:t.color,selColorLen:x,selColor:x>0?t.colorSelected[x-1]:t.colorSelected,halfColorLen:C,halfColor:C>0?t.colorHalf[C-1]:t.colorHalf}}),h=w(()=>{if(typeof t.iconAriaLabel=="string"){const v=t.iconAriaLabel.length!==0?`${t.iconAriaLabel} `:"";return b=>`${v}${b}`}if(Array.isArray(t.iconAriaLabel)===!0){const v=t.iconAriaLabel.length;if(v>0)return b=>t.iconAriaLabel[Math.min(b,v)-1]}return(v,b)=>`${b} ${v}`}),d=w(()=>{const v=[],b=c.value,m=Math.ceil(t.modelValue),y=l.value===!0?0:null,x=t.iconHalf===void 0||m===t.modelValue?-1:m;for(let C=1;C<=t.max;C++){const k=a.value===0&&t.modelValue>=C||a.value>0&&a.value>=C,L=x===C&&a.value<C,A=a.value>0&&(L===!0?m:t.modelValue)>=C&&a.value<C,E=L===!0?C<=b.halfColorLen?t.colorHalf[C-1]:b.halfColor:b.selColor!==void 0&&k===!0?C<=b.selColorLen?t.colorSelected[C-1]:b.selColor:C<=b.colorLen?t.color[C-1]:b.color,I=(L===!0?C<=b.halfIconLen?t.iconHalf[C-1]:b.halfIcon:b.selIcon===void 0||k!==!0&&A!==!0?C<=b.iconLen?t.icon[C-1]:b.icon:C<=b.selIconLen?t.iconSelected[C-1]:b.selIcon)||r.iconSet.rating.icon;v.push({name:(L===!0?C<=b.halfIconLen?t.iconHalf[C-1]:b.halfIcon:b.selIcon===void 0||k!==!0&&A!==!0?C<=b.iconLen?t.icon[C-1]:b.icon:C<=b.selIconLen?t.iconSelected[C-1]:b.selIcon)||r.iconSet.rating.icon,attrs:{tabindex:y,role:"radio","aria-checked":t.modelValue===C?"true":"false","aria-label":h.value(C,I)},iconClass:"q-rating__icon"+(k===!0||L===!0?" q-rating__icon--active":"")+(A===!0?" q-rating__icon--exselected":"")+(a.value===C?" q-rating__icon--hovered":"")+(E!==void 0?` text-${E}`:"")})}return v}),p=w(()=>{const v={role:"radiogroup"};return t.disable===!0&&(v["aria-disabled"]="true"),t.readonly===!0&&(v["aria-readonly"]="true"),v});function f(v){if(l.value===!0){const b=Lt(parseInt(v,10),1,parseInt(t.max,10)),m=t.noReset!==!0&&t.modelValue===b?0:b;m!==t.modelValue&&i("update:modelValue",m),a.value=0}}function g(v){l.value===!0&&(a.value=v)}function _(){a.value=0}return Tu(()=>{s={}}),()=>{const v=[];return d.value.forEach(({iconClass:b,name:m,attrs:y},x)=>{const C=x+1;v.push(S("div",{key:C,ref:k=>{s[`rt${C}`]=k},class:"q-rating__icon-container flex flex-center",...y,onClick(){f(C)},onMouseover(){g(C)},onMouseout:_,onFocus(){g(C)},onBlur:_,onKeyup(k){(function(L,A){switch(L.keyCode){case 13:case 32:return f(A),Qe(L);case 37:case 40:return s["rt"+(A-1)]&&s["rt"+(A-1)].focus(),Qe(L);case 39:case 38:s[`rt${A+1}`]&&s[`rt${A+1}`].focus(),Qe(L)}})(k,C)}},Jt(e[`tip-${C}`],[S(vt,{class:b,name:m})])))}),t.name!==void 0&&t.disable!==!0&&o(v,"push"),S("div",{class:u.value,style:n.value,...p.value},v)}}}),ue({name:"QResponsive",props:y0,setup(t,{slots:e}){const i=_0(t);return()=>S("div",{class:"q-responsive"},[S("div",{class:"q-responsive__filler overflow-hidden"},[S("div",{style:i.value})]),S("div",{class:"q-responsive__content absolute-full fit"},De(e.default))])}});var II=ue({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup:t=>()=>[S("div",{class:t.store.scroll.vertical.barClass.value,style:[t.barStyle,t.verticalBarStyle],"aria-hidden":"true",onMousedown:t.store.onVerticalMousedown}),S("div",{class:t.store.scroll.horizontal.barClass.value,style:[t.barStyle,t.horizontalBarStyle],"aria-hidden":"true",onMousedown:t.store.onHorizontalMousedown}),Fi(S("div",{ref:t.store.scroll.vertical.ref,class:t.store.scroll.vertical.thumbClass.value,style:t.store.scroll.vertical.style.value,"aria-hidden":"true"}),t.store.thumbVertDir),Fi(S("div",{ref:t.store.scroll.horizontal.ref,class:t.store.scroll.horizontal.thumbClass.value,style:t.store.scroll.horizontal.style.value,"aria-hidden":"true"}),t.store.thumbHorizDir)]}),ob=["vertical","horizontal"],mf={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ab={prevent:!0,mouse:!0,mouseAllDir:!0},sb=t=>t>=250?50:Math.ceil(t/5),PI=ue({name:"QScrollArea",props:{...ft,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(t,{slots:e,emit:i}){const r=G(!1),n=G(!1),o=G(!1),a={vertical:G(0),horizontal:G(0)},s={vertical:{ref:G(null),position:G(0),size:G(0)},horizontal:{ref:G(null),position:G(0),size:G(0)}},{proxy:l}=Ce(),u=gt(t,l.$q);let c,h=null;const d=G(null),p=w(()=>"q-scrollarea"+(u.value===!0?" q-scrollarea--dark":""));Object.assign(a,{verticalInner:w(()=>a.vertical.value-t.verticalOffset[0]-t.verticalOffset[1]),horizontalInner:w(()=>a.horizontal.value-t.horizontalOffset[0]-t.horizontalOffset[1])}),s.vertical.percentage=w(()=>{const M=s.vertical.size.value-a.vertical.value;if(M<=0)return 0;const q=Lt(s.vertical.position.value/M,0,1);return Math.round(1e4*q)/1e4}),s.vertical.thumbHidden=w(()=>(t.visible===null?o.value:t.visible)!==!0&&r.value===!1&&n.value===!1||s.vertical.size.value<=a.vertical.value+1),s.vertical.thumbStart=w(()=>t.verticalOffset[0]+s.vertical.percentage.value*(a.verticalInner.value-s.vertical.thumbSize.value)),s.vertical.thumbSize=w(()=>Math.round(Lt(a.verticalInner.value*a.verticalInner.value/s.vertical.size.value,sb(a.verticalInner.value),a.verticalInner.value))),s.vertical.style=w(()=>({...t.thumbStyle,...t.verticalThumbStyle,top:`${s.vertical.thumbStart.value}px`,height:`${s.vertical.thumbSize.value}px`,right:`${t.horizontalOffset[1]}px`})),s.vertical.thumbClass=w(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.vertical.barClass=w(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),s.horizontal.percentage=w(()=>{const M=s.horizontal.size.value-a.horizontal.value;if(M<=0)return 0;const q=Lt(Math.abs(s.horizontal.position.value)/M,0,1);return Math.round(1e4*q)/1e4}),s.horizontal.thumbHidden=w(()=>(t.visible===null?o.value:t.visible)!==!0&&r.value===!1&&n.value===!1||s.horizontal.size.value<=a.horizontal.value+1),s.horizontal.thumbStart=w(()=>t.horizontalOffset[0]+s.horizontal.percentage.value*(a.horizontalInner.value-s.horizontal.thumbSize.value)),s.horizontal.thumbSize=w(()=>Math.round(Lt(a.horizontalInner.value*a.horizontalInner.value/s.horizontal.size.value,sb(a.horizontalInner.value),a.horizontalInner.value))),s.horizontal.style=w(()=>({...t.thumbStyle,...t.horizontalThumbStyle,[l.$q.lang.rtl===!0?"right":"left"]:`${s.horizontal.thumbStart.value}px`,width:`${s.horizontal.thumbSize.value}px`,bottom:`${t.verticalOffset[1]}px`})),s.horizontal.thumbClass=w(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.horizontal.barClass=w(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const f=w(()=>s.vertical.thumbHidden.value===!0&&s.horizontal.thumbHidden.value===!0?t.contentStyle:t.contentActiveStyle);function g(){const M={};return ob.forEach(q=>{const P=s[q];Object.assign(M,{[q+"Position"]:P.position.value,[q+"Percentage"]:P.percentage.value,[q+"Size"]:P.size.value,[q+"ContainerSize"]:a[q].value,[q+"ContainerInnerSize"]:a[q+"Inner"].value})}),M}const _=Us(()=>{const M=g();M.ref=l,i("scroll",M)},0);function v(M,q,P){ob.includes(M)!==!1&&(M==="vertical"?fs:Up)(d.value,q,P)}function b({height:M,width:q}){let P=!1;a.vertical.value!==M&&(a.vertical.value=M,P=!0),a.horizontal.value!==q&&(a.horizontal.value=q,P=!0),P===!0&&k()}function m({position:M}){let q=!1;s.vertical.position.value!==M.top&&(s.vertical.position.value=M.top,q=!0),s.horizontal.position.value!==M.left&&(s.horizontal.position.value=M.left,q=!0),q===!0&&k()}function y({height:M,width:q}){s.horizontal.size.value!==q&&(s.horizontal.size.value=q,k()),s.vertical.size.value!==M&&(s.vertical.size.value=M,k())}function x(M,q){const P=s[q];if(M.isFirst===!0){if(P.thumbHidden.value===!0)return;c=P.position.value,n.value=!0}else if(n.value!==!0)return;M.isFinal===!0&&(n.value=!1);const F=mf[q],j=(P.size.value-a[q].value)/(a[q+"Inner"].value-P.thumbSize.value),V=M.distance[F.dist];L(c+(M.direction===F.dir?1:-1)*V*j,q)}function C(M,q){const P=s[q];if(P.thumbHidden.value!==!0){const F=q==="vertical"?t.verticalOffset[0]:t.horizontalOffset[0],j=M[mf[q].offset]-F,V=P.thumbStart.value-F;(j<V||j>V+P.thumbSize.value)&&L(Lt((j-P.thumbSize.value/2)/(a[q+"Inner"].value-P.thumbSize.value),0,1)*Math.max(0,P.size.value-a[q].value),q),P.ref.value!==null&&P.ref.value.dispatchEvent(new MouseEvent(M.type,M))}}function k(){r.value=!0,h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,r.value=!1},t.delay),t.onScroll!==void 0&&_()}function L(M,q){d.value[mf[q].scroll]=M}let A=null;function E(){A!==null&&clearTimeout(A),A=setTimeout(()=>{A=null,o.value=!0},l.$q.platform.is.ios?50:0)}function I(){A!==null&&(clearTimeout(A),A=null),o.value=!1}let T=null;ae(()=>l.$q.lang.rtl,M=>{d.value!==null&&Up(d.value,Math.abs(s.horizontal.position.value)*(M===!0?-1:1))}),In(()=>{T={top:s.vertical.position.value,left:s.horizontal.position.value}}),ga(()=>{if(T===null)return;const M=d.value;M!==null&&(Up(M,T.left),fs(M,T.top))}),st(_.cancel),Object.assign(l,{getScrollTarget:()=>d.value,getScroll:g,getScrollPosition:()=>({top:s.vertical.position.value,left:s.horizontal.position.value}),getScrollPercentage:()=>({top:s.vertical.percentage.value,left:s.horizontal.percentage.value}),setScrollPosition:v,setScrollPercentage(M,q,P){v(M,q*(s[M].size.value-a[M].value)*(M==="horizontal"&&l.$q.lang.rtl===!0?-1:1),P)}});const R={scroll:s,thumbVertDir:[[dr,M=>{x(M,"vertical")},void 0,{vertical:!0,...ab}]],thumbHorizDir:[[dr,M=>{x(M,"horizontal")},void 0,{horizontal:!0,...ab}]],onVerticalMousedown(M){C(M,"vertical")},onHorizontalMousedown(M){C(M,"horizontal")}};return()=>S("div",{class:p.value,onMouseenter:E,onMouseleave:I},[S("div",{ref:d,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:t.tabindex!==void 0?t.tabindex:void 0},[S("div",{class:"q-scrollarea__content absolute",style:f.value},Jt(e.default,[S(pa,{debounce:0,onResize:y})])),S(pC,{axis:"both",onScroll:m})]),S(pa,{debounce:0,onResize:b}),S(II,{store:R,barStyle:t.barStyle,verticalBarStyle:t.verticalBarStyle,horizontalBarStyle:t.horizontalBarStyle})])}}),Cr=1e3,RI=["start","center","end","start-force","center-force","end-force"],gC=Array.prototype.filter,qI=window.getComputedStyle(document.body).overflowAnchor===void 0?ai:function(t,e){t!==null&&(t._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(t._qOverflowAnimationFrame),t._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(t===null)return;t._qOverflowAnimationFrame=void 0;const i=t.children||[];gC.call(i,n=>n.dataset&&n.dataset.qVsAnchor!==void 0).forEach(n=>{delete n.dataset.qVsAnchor});const r=i[e];r&&r.dataset&&(r.dataset.qVsAnchor="")}))};function gs(t,e){return t+e}function vf(t,e,i,r,n,o,a,s){const l=t===window?document.scrollingElement||document.documentElement:t,u=n===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-a-s,scrollMaxSize:0,offsetStart:-a,offsetEnd:-s};if(n===!0?(t===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=l.scrollLeft,c.scrollViewSize+=l.clientWidth),c.scrollMaxSize=l.scrollWidth,o===!0&&(c.scrollStart=(Su===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(t===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=l.scrollTop,c.scrollViewSize+=l.clientHeight),c.scrollMaxSize=l.scrollHeight),i!==null)for(let h=i.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=h[u]);if(r!==null)for(let h=r.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=h[u]);if(e!==t){const h=l.getBoundingClientRect(),d=e.getBoundingClientRect();n===!0?(c.offsetStart+=d.left-h.left,c.offsetEnd-=d.width):(c.offsetStart+=d.top-h.top,c.offsetEnd-=d.height),t!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function lb(t,e,i,r){e==="end"&&(e=(t===window?document.body:t)[i===!0?"scrollWidth":"scrollHeight"]),t===window?i===!0?(r===!0&&(e=(Su===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):i===!0?(r===!0&&(e=(Su===!0?t.scrollWidth-t.offsetWidth:0)-e),t.scrollLeft=e):t.scrollTop=e}function bl(t,e,i,r){if(i>=r)return 0;const n=e.length,o=Math.floor(i/Cr),a=Math.floor((r-1)/Cr)+1;let s=t.slice(o,a).reduce(gs,0);return i%Cr!=0&&(s-=e.slice(o*Cr,i).reduce(gs,0)),r%Cr!=0&&r!==n&&(s-=e.slice(r,a*Cr).reduce(gs,0)),s}var mC={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},ub=Object.keys(mC),Rm={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...mC};function vC({virtualScrollLength:t,getVirtualScrollTarget:e,getVirtualScrollEl:i,virtualScrollItemSizeComputed:r}){const n=Ce(),{props:o,emit:a,proxy:s}=n,{$q:l}=s;let u,c,h,d,p=[];const f=G(0),g=G(0),_=G({}),v=G(null),b=G(null),m=G(null),y=G({from:0,to:0}),x=w(()=>o.tableColspan!==void 0?o.tableColspan:100);r===void 0&&(r=w(()=>o.virtualScrollItemSize));const C=w(()=>r.value+";"+o.virtualScrollHorizontal),k=w(()=>C.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);function L(){M(c,!0)}function A(V){M(V===void 0?c:V)}function E(V,O){const $=e();if($==null||$.nodeType===8)return;const J=vf($,i(),v.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);h!==J.scrollViewSize&&q(J.scrollViewSize),I($,J,Math.min(t.value-1,Math.max(0,parseInt(V,10)||0)),0,RI.indexOf(O)!==-1?O:c!==-1&&V>c?"end":"start")}function I(V,O,$,J,te){const ie=typeof te=="string"&&te.indexOf("-force")!==-1,N=ie===!0?te.replace("-force",""):te,z=N!==void 0?N:"start";let B=Math.max(0,$-_.value[z]),K=B+_.value.total;K>t.value&&(K=t.value,B=Math.max(0,K-_.value.total)),u=O.scrollStart;const U=B!==y.value.from||K!==y.value.to;if(U===!1&&N===void 0)return void P($);const{activeElement:W}=document,ve=m.value;U===!0&&ve!==null&&ve!==W&&ve.contains(W)===!0&&(ve.addEventListener("focusout",R),setTimeout(()=>{ve!==null&&ve.removeEventListener("focusout",R)})),qI(ve,$-B);const ce=N!==void 0?d.slice(B,$).reduce(gs,0):0;if(U===!0){const fe=K>=y.value.from&&B<=y.value.to?y.value.to:K;y.value={from:B,to:fe},f.value=bl(p,d,0,B),g.value=bl(p,d,K,t.value),requestAnimationFrame(()=>{y.value.to!==K&&u===O.scrollStart&&(y.value={from:y.value.from,to:K},g.value=bl(p,d,K,t.value))})}requestAnimationFrame(()=>{if(u!==O.scrollStart)return;U===!0&&T(B);const fe=d.slice(B,$).reduce(gs,0),pe=fe+O.offsetStart+f.value,Ee=pe+d[$];let Le=pe+J;if(N!==void 0){const me=fe-ce,we=O.scrollStart+me;Le=ie!==!0&&we<pe&&Ee<we+O.scrollViewSize?we:N==="end"?Ee-O.scrollViewSize:pe-(N==="start"?0:Math.round((O.scrollViewSize-d[$])/2))}u=Le,lb(V,Le,o.virtualScrollHorizontal,l.lang.rtl),P($)})}function T(V){const O=m.value;if(O){const $=gC.call(O.children,B=>B.classList&&B.classList.contains("q-virtual-scroll--skip")===!1),J=$.length,te=o.virtualScrollHorizontal===!0?B=>B.getBoundingClientRect().width:B=>B.offsetHeight;let ie,N,z=V;for(let B=0;B<J;){for(ie=te($[B]),B++;B<J&&$[B].classList.contains("q-virtual-scroll--with-prev")===!0;)ie+=te($[B]),B++;N=ie-d[z],N!==0&&(d[z]+=N,p[Math.floor(z/Cr)]+=N),z++}}}function R(){m.value!==null&&m.value!==void 0&&m.value.focus()}function M(V,O){const $=1*r.value;O!==!0&&Array.isArray(d)!==!1||(d=[]);const J=d.length;d.length=t.value;for(let ie=t.value-1;ie>=J;ie--)d[ie]=$;const te=Math.floor((t.value-1)/Cr);p=[];for(let ie=0;ie<=te;ie++){let N=0;const z=Math.min((ie+1)*Cr,t.value);for(let B=ie*Cr;B<z;B++)N+=d[B];p.push(N)}c=-1,u=void 0,f.value=bl(p,d,0,y.value.from),g.value=bl(p,d,y.value.to,t.value),V>=0?(T(y.value.from),ct(()=>{E(V)})):F()}function q(V){if(V===void 0&&typeof window<"u"){const ie=e();ie!=null&&ie.nodeType!==8&&(V=vf(ie,i(),v.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}h=V;const O=parseFloat(o.virtualScrollSliceRatioBefore)||0,$=1+O+(parseFloat(o.virtualScrollSliceRatioAfter)||0),J=V===void 0||V<=0?1:Math.ceil(V/r.value),te=Math.max(1,J,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/$));_.value={total:Math.ceil(te*$),start:Math.ceil(te*O),center:Math.ceil(te*(.5+O)),end:Math.ceil(te*(1+O)),view:J}}function P(V){c!==V&&(o.onVirtualScroll!==void 0&&a("virtualScroll",{index:V,from:y.value.from,to:y.value.to-1,direction:V<c?"decrease":"increase",ref:s}),c=V)}ae(k,()=>{q()}),ae(C,L),q();const F=Us(function(){const V=e();if(V==null||V.nodeType===8)return;const O=vf(V,i(),v.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),$=t.value-1,J=O.scrollMaxSize-O.offsetStart-O.offsetEnd-g.value;if(u===O.scrollStart)return;if(O.scrollMaxSize<=0)return void I(V,O,0,0);h!==O.scrollViewSize&&q(O.scrollViewSize),T(y.value.from);const te=Math.floor(O.scrollMaxSize-Math.max(O.scrollViewSize,O.offsetEnd)-Math.min(d[$],O.scrollViewSize/2));if(te>0&&Math.ceil(O.scrollStart)>=te)return void I(V,O,$,O.scrollMaxSize-O.offsetEnd-p.reduce(gs,0));let ie=0,N=O.scrollStart-O.offsetStart,z=N;if(N<=J&&N+O.scrollViewSize>=f.value)N-=f.value,ie=y.value.from,z=N;else for(let B=0;N>=p[B]&&ie<$;B++)N-=p[B],ie+=Cr;for(;N>0&&ie<$;)N-=d[ie],N>-O.scrollViewSize?(ie++,z=N):z=d[ie]+N;I(V,O,ie,z)},l.platform.is.ios===!0?120:35);Ym(()=>{q()});let j=!1;return In(()=>{j=!0}),ga(()=>{if(j!==!0)return;const V=e();u!==void 0&&V!=null&&V.nodeType!==8?lb(V,u,o.virtualScrollHorizontal,l.lang.rtl):E(c)}),st(()=>{F.cancel()}),Object.assign(s,{scrollTo:E,reset:L,refresh:A}),{virtualScrollSliceRange:y,virtualScrollSliceSizeComputed:_,setVirtualScrollSize:q,onVirtualScrollEvt:F,localResetVirtualScroll:M,padVirtualScroll:function(V,O){const $=o.virtualScrollHorizontal===!0?"width":"height",J={["--q-virtual-scroll-item-"+$]:r.value+"px"};return[V==="tbody"?S(V,{class:"q-virtual-scroll__padding",key:"before",ref:v},[S("tr",[S("td",{style:{[$]:`${f.value}px`,...J},colspan:x.value})])]):S(V,{class:"q-virtual-scroll__padding",key:"before",ref:v,style:{[$]:`${f.value}px`,...J}}),S(V,{class:"q-virtual-scroll__content",key:"content",ref:m,tabindex:-1},O.flat()),V==="tbody"?S(V,{class:"q-virtual-scroll__padding",key:"after",ref:b},[S("tr",[S("td",{style:{[$]:`${g.value}px`,...J},colspan:x.value})])]):S(V,{class:"q-virtual-scroll__padding",key:"after",ref:b,style:{[$]:`${g.value}px`,...J}})]},scrollTo:E,reset:L,refresh:A}}var cb=t=>["add","add-unique","toggle"].includes(t),AI=Object.keys(Fd);function yf(t,e){if(typeof t=="function")return t;const i=t!==void 0?t:e;return r=>r!==null&&typeof r=="object"&&i in r?r[i]:r}var FI=ue({name:"QSelect",inheritAttrs:!1,props:{...Rm,..._r,...Fd,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:cb},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:Rm.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Od,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=G(!1),a=G(!1),s=G(-1),l=G(""),u=G(!1),c=G(!1);let h,d,p,f,g,_,v,b=null,m=null,y=null;const x=G(null),C=G(null),k=G(null),L=G(null),A=G(null),E=a0(t),I=hC(xe),T=w(()=>Array.isArray(t.options)?t.options.length:0),R=w(()=>t.virtualScrollItemSize===void 0?t.optionsDense===!0?24:48:t.virtualScrollItemSize),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:q,localResetVirtualScroll:P,padVirtualScroll:F,onVirtualScrollEvt:j,scrollTo:V,setVirtualScrollSize:O}=vC({virtualScrollLength:T,getVirtualScrollTarget:function(){return be()},getVirtualScrollEl:be,virtualScrollItemSizeComputed:R}),$=zd(),J=w(()=>{const Y=t.mapOptions===!0&&t.multiple!==!0,$e=t.modelValue===void 0||t.modelValue===null&&Y!==!0?[]:t.multiple===!0&&Array.isArray(t.modelValue)?t.modelValue:[t.modelValue];if(t.mapOptions===!0&&Array.isArray(t.options)===!0){const je=t.mapOptions===!0&&h!==void 0?h:[],Tt=$e.map(ht=>function(dt,ti){const Et=tl=>Tr(oe.value(tl),dt);return t.options.find(Et)||ti.find(Et)||dt}(ht,je));return t.modelValue===null&&Y===!0?Tt.filter(ht=>ht!==null):Tt}return $e}),te=w(()=>{const Y={};return AI.forEach($e=>{const je=t[$e];je!==void 0&&(Y[$e]=je)}),Y}),ie=w(()=>t.optionsDark===null?$.isDark.value:t.optionsDark),N=w(()=>fa(J.value)),z=w(()=>{let Y="q-field__input q-placeholder col";return t.hideSelected===!0||J.value.length===0?[Y,t.inputClass]:(Y+=" q-field__input--padding",t.inputClass===void 0?Y:[Y,t.inputClass])}),B=w(()=>(t.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(t.popupContentClass?" "+t.popupContentClass:"")),K=w(()=>T.value===0),U=w(()=>J.value.map(Y=>he.value(Y)).join(", ")),W=w(()=>t.displayValue!==void 0?t.displayValue:U.value),ve=w(()=>t.optionsHtml===!0?()=>!0:Y=>Y!=null&&Y.html===!0),ce=w(()=>t.displayValueHtml===!0||t.displayValue===void 0&&(t.optionsHtml===!0||J.value.some(ve.value))),fe=w(()=>$.focused.value===!0?t.tabindex:-1),pe=w(()=>{const Y={tabindex:t.tabindex,role:"combobox","aria-label":t.label,"aria-readonly":t.readonly===!0?"true":"false","aria-autocomplete":t.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${$.targetUid.value}_lb`};return s.value>=0&&(Y["aria-activedescendant"]=`${$.targetUid.value}_${s.value}`),Y}),Ee=w(()=>({id:`${$.targetUid.value}_lb`,role:"listbox","aria-multiselectable":t.multiple===!0?"true":"false"})),Le=w(()=>J.value.map((Y,$e)=>({index:$e,opt:Y,html:ve.value(Y),selected:!0,removeAtIndex:X,toggleOption:ge,tabindex:fe.value}))),me=w(()=>{if(T.value===0)return[];const{from:Y,to:$e}=M.value;return t.options.slice(Y,$e).map((je,Tt)=>{const ht=Z.value(je)===!0,dt=Je(je)===!0,ti=Y+Tt,Et={clickable:!0,active:dt,activeClass:Ve.value,manualFocus:!0,focused:!1,disable:ht,tabindex:-1,dense:t.optionsDense,dark:ie.value,role:"option","aria-selected":dt===!0?"true":"false",id:`${$.targetUid.value}_${ti}`,onClick:()=>{ge(je)}};return ht!==!0&&(s.value===ti&&(Et.focused=!0),n.platform.is.desktop===!0&&(Et.onMousemove=()=>{o.value===!0&&Re(ti)})),{index:ti,opt:je,html:ve.value(je),label:he.value(je),selected:Et.active,focused:Et.focused,toggleOption:ge,setOptionIndex:Re,itemProps:Et}})}),we=w(()=>t.dropdownIcon!==void 0?t.dropdownIcon:n.iconSet.arrow.dropdown),Pe=w(()=>t.optionsCover===!1&&t.outlined!==!0&&t.standout!==!0&&t.borderless!==!0&&t.rounded!==!0),Ve=w(()=>t.optionsSelectedClass!==void 0?t.optionsSelectedClass:t.color!==void 0?`text-${t.color}`:""),oe=w(()=>yf(t.optionValue,"value")),he=w(()=>yf(t.optionLabel,"label")),Z=w(()=>yf(t.optionDisable,"disable")),se=w(()=>J.value.map(oe.value)),Se=w(()=>{const Y={onInput:xe,onChange:I,onKeydown:Me,onKeyup:He,onKeypress:ee,onFocus:qe,onClick($e){d===!0&&Ht($e)}};return Y.onCompositionstart=Y.onCompositionupdate=Y.onCompositionend=I,Y});function Ie(Y){return t.emitValue===!0?oe.value(Y):Y}function Ae(Y){if(Y!==-1&&Y<J.value.length)if(t.multiple===!0){const $e=t.modelValue.slice();i("remove",{index:Y,value:$e.splice(Y,1)[0]}),i("update:modelValue",$e)}else i("update:modelValue",null)}function X(Y){Ae(Y),$.focus()}function ne(Y,$e){const je=Ie(Y);if(t.multiple!==!0)return t.fillInput===!0&&H(he.value(Y),!0,!0),void i("update:modelValue",je);if(J.value.length===0)return i("add",{index:0,value:je}),void i("update:modelValue",t.multiple===!0?[je]:je);if($e===!0&&Je(Y)===!0||t.maxValues!==void 0&&t.modelValue.length>=t.maxValues)return;const Tt=t.modelValue.slice();i("add",{index:Tt.length,value:je}),Tt.push(je),i("update:modelValue",Tt)}function ge(Y,$e){if($.editable.value!==!0||Y===void 0||Z.value(Y)===!0)return;const je=oe.value(Y);if(t.multiple!==!0)return $e!==!0&&(H(t.fillInput===!0?he.value(Y):"",!0,!0),ni()),C.value!==null&&C.value.focus(),void(J.value.length!==0&&Tr(oe.value(J.value[0]),je)===!0||i("update:modelValue",t.emitValue===!0?je:Y));if((d!==!0||u.value===!0)&&$.focus(),qe(),J.value.length===0){const dt=t.emitValue===!0?je:Y;return i("add",{index:0,value:dt}),void i("update:modelValue",t.multiple===!0?[dt]:dt)}const Tt=t.modelValue.slice(),ht=se.value.findIndex(dt=>Tr(dt,je));if(ht!==-1)i("remove",{index:ht,value:Tt.splice(ht,1)[0]});else{if(t.maxValues!==void 0&&Tt.length>=t.maxValues)return;const dt=t.emitValue===!0?je:Y;i("add",{index:Tt.length,value:dt}),Tt.push(dt)}i("update:modelValue",Tt)}function Re(Y){if(n.platform.is.desktop!==!0)return;const $e=Y!==-1&&Y<T.value?Y:-1;s.value!==$e&&(s.value=$e)}function Ge(Y=1,$e){if(o.value===!0){let je=s.value;do je=Wh(je+Y,-1,T.value-1);while(je!==-1&&je!==s.value&&Z.value(t.options[je])===!0);s.value!==je&&(Re(je),V(je),$e!==!0&&t.useInput===!0&&t.fillInput===!0&&D(je>=0?he.value(t.options[je]):f,!0))}}function Je(Y){const $e=oe.value(Y);return se.value.find(je=>Tr(je,$e))!==void 0}function qe(Y){t.useInput===!0&&C.value!==null&&(Y===void 0||C.value===Y.target&&Y.target.value===U.value)&&C.value.select()}function Ke(Y){gr(Y,27)===!0&&o.value===!0&&(Ht(Y),ni(),dn()),i("keyup",Y)}function He(Y){const{value:$e}=Y.target;if(Y.keyCode===void 0)if(Y.target.value="",b!==null&&(clearTimeout(b),b=null),m!==null&&(clearTimeout(m),m=null),dn(),typeof $e=="string"&&$e.length!==0){const je=$e.toLocaleLowerCase(),Tt=dt=>{const ti=t.options.find(Et=>String(dt.value(Et)).toLocaleLowerCase()===je);return ti!==void 0&&(J.value.indexOf(ti)===-1?ge(ti):ni(),!0)},ht=dt=>{Tt(oe)!==!0&&dt!==!0&&Tt(he)!==!0&&Q($e,!0,()=>ht(!0))};ht()}else $.clearValue(Y);else Ke(Y)}function ee(Y){i("keypress",Y)}function Me(Y){if(i("keydown",Y),ha(Y)===!0)return;const $e=l.value.length!==0&&(t.newValueMode!==void 0||t.onNewValue!==void 0),je=Y.shiftKey!==!0&&t.disableTabSelection!==!0&&t.multiple!==!0&&(s.value!==-1||$e===!0);if(Y.keyCode===27)return void fi(Y);if(Y.keyCode===9&&je===!1)return void Pt();if(Y.target===void 0||Y.target.id!==$.targetUid.value||$.editable.value!==!0)return;if(Y.keyCode===40&&$.innerLoading.value!==!0&&o.value===!1)return Qe(Y),void Ze();if(Y.keyCode===8&&(t.useChips===!0||t.clearable===!0)&&t.hideSelected!==!0&&l.value.length===0)return void(t.multiple===!0&&Array.isArray(t.modelValue)===!0?Ae(t.modelValue.length-1):t.multiple!==!0&&t.modelValue!==null&&i("update:modelValue",null));Y.keyCode!==35&&Y.keyCode!==36||typeof l.value=="string"&&l.value.length!==0||(Qe(Y),s.value=-1,Ge(Y.keyCode===36?1:-1,t.multiple)),Y.keyCode!==33&&Y.keyCode!==34||q.value===void 0||(Qe(Y),s.value=Math.max(-1,Math.min(T.value,s.value+(Y.keyCode===33?-1:1)*q.value.view)),Ge(Y.keyCode===33?1:-1,t.multiple)),Y.keyCode!==38&&Y.keyCode!==40||(Qe(Y),Ge(Y.keyCode===38?-1:1,t.multiple));const Tt=T.value;if((_===void 0||v<Date.now())&&(_=""),Tt>0&&t.useInput!==!0&&Y.key!==void 0&&Y.key.length===1&&Y.altKey===!1&&Y.ctrlKey===!1&&Y.metaKey===!1&&(Y.keyCode!==32||_.length!==0)){o.value!==!0&&Ze(Y);const ht=Y.key.toLocaleLowerCase(),dt=_.length===1&&_[0]===ht;v=Date.now()+1500,dt===!1&&(Qe(Y),_+=ht);const ti=new RegExp("^"+_.split("").map(tl=>".*+?^${}()|[]\\".indexOf(tl)!==-1?"\\"+tl:tl).join(".*"),"i");let Et=s.value;if(dt===!0||Et<0||ti.test(he.value(t.options[Et]))!==!0)do Et=Wh(Et+1,-1,Tt-1);while(Et!==s.value&&(Z.value(t.options[Et])===!0||ti.test(he.value(t.options[Et]))!==!0));s.value!==Et&&ct(()=>{Re(Et),V(Et),Et>=0&&t.useInput===!0&&t.fillInput===!0&&D(he.value(t.options[Et]),!0)})}else if(Y.keyCode===13||Y.keyCode===32&&t.useInput!==!0&&_===""||Y.keyCode===9&&je!==!1)if(Y.keyCode!==9&&Qe(Y),s.value!==-1&&s.value<Tt)ge(t.options[s.value]);else{if($e===!0){const ht=(dt,ti)=>{if(ti){if(cb(ti)!==!0)return}else ti=t.newValueMode;H("",t.multiple!==!0,!0),dt!=null&&((ti==="toggle"?ge:ne)(dt,ti==="add-unique"),t.multiple!==!0&&(C.value!==null&&C.value.focus(),ni()))};if(t.onNewValue!==void 0?i("newValue",l.value,ht):ht(l.value),t.multiple!==!0)return}o.value===!0?Pt():$.innerLoading.value!==!0&&Ze()}}function be(){return d===!0?A.value:k.value!==null&&k.value.contentEl!==null?k.value.contentEl:void 0}function ye(){if(K.value===!0)return e["no-option"]!==void 0?e["no-option"]({inputValue:l.value}):void 0;const Y=e.option!==void 0?e.option:je=>S(Qs,{key:je.index,...je.itemProps},()=>S(rn,()=>S(Im,()=>S("span",{[je.html===!0?"innerHTML":"textContent"]:je.label}))));let $e=F("div",me.value.map(Y));return e["before-options"]!==void 0&&($e=e["before-options"]().concat($e)),Jt(e["after-options"],$e)}function xe(Y){b!==null&&(clearTimeout(b),b=null),m!==null&&(clearTimeout(m),m=null),Y&&Y.target&&Y.target.qComposing===!0||(D(Y.target.value||""),p=!0,f=l.value,$.focused.value===!0||d===!0&&u.value!==!0||$.focus(),t.onFilter!==void 0&&(b=setTimeout(()=>{b=null,Q(l.value)},t.inputDebounce)))}function D(Y,$e){l.value!==Y&&(l.value=Y,$e===!0||t.inputDebounce===0||t.inputDebounce==="0"?i("inputValue",Y):m=setTimeout(()=>{m=null,i("inputValue",Y)},t.inputDebounce))}function H(Y,$e,je){p=je!==!0,t.useInput===!0&&(D(Y,!0),$e!==!0&&je===!0||(f=Y),$e!==!0&&Q(Y))}function Q(Y,$e,je){if(t.onFilter===void 0||$e!==!0&&$.focused.value!==!0)return;$.innerLoading.value===!0?i("filterAbort"):($.innerLoading.value=!0,c.value=!0),Y!==""&&t.multiple!==!0&&J.value.length!==0&&p!==!0&&Y===he.value(J.value[0])&&(Y="");const Tt=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);y!==null&&clearTimeout(y),y=Tt,i("filter",Y,(ht,dt)=>{$e!==!0&&$.focused.value!==!0||y!==Tt||(clearTimeout(y),typeof ht=="function"&&ht(),c.value=!1,ct(()=>{$.innerLoading.value=!1,$.editable.value===!0&&($e===!0?o.value===!0&&ni():o.value===!0?Wd(!0):o.value=!0),typeof dt=="function"&&ct(()=>{dt(r)}),typeof je=="function"&&ct(()=>{je(r)})}))},()=>{$.focused.value===!0&&y===Tt&&(clearTimeout(y),$.innerLoading.value=!1,c.value=!1),o.value===!0&&(o.value=!1)})}function le(Y){K0(Y),Pt()}function re(){O()}function ke(Y){Ht(Y),C.value!==null&&C.value.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function de(Y){Ht(Y),ct(()=>{u.value=!1})}function Be(Y){K0(Y),L.value!==null&&L.value.__updateRefocusTarget($.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),$.focused.value=!1}function Ue(Y){ni(),$.focused.value===!1&&i("blur",Y),dn()}function yt(){const Y=document.activeElement;Y!==null&&Y.id===$.targetUid.value||C.value===null||C.value===Y||C.value.focus(),O()}function Pt(){a.value!==!0&&(s.value=-1,o.value===!0&&(o.value=!1),$.focused.value===!1&&(y!==null&&(clearTimeout(y),y=null),$.innerLoading.value===!0&&(i("filterAbort"),$.innerLoading.value=!1,c.value=!1)))}function Ze(Y){$.editable.value===!0&&(d===!0?($.onControlFocusin(Y),a.value=!0,ct(()=>{$.focus()})):$.focus(),t.onFilter!==void 0?Q(l.value):K.value===!0&&e["no-option"]===void 0||(o.value=!0))}function ni(){a.value=!1,Pt()}function dn(){t.useInput===!0&&H(t.multiple!==!0&&t.fillInput===!0&&J.value.length!==0&&he.value(J.value[0])||"",!0,!0)}function Wd(Y){let $e=-1;if(Y===!0){if(J.value.length!==0){const je=oe.value(J.value[0]);$e=t.options.findIndex(Tt=>Tr(oe.value(Tt),je))}P($e)}Re($e)}function W0(){a.value===!1&&k.value!==null&&k.value.updatePosition()}function Y0(Y){Y!==void 0&&Ht(Y),i("popupShow",Y),$.hasPopupOpen=!0,$.onControlFocusin(Y)}function K0(Y){Y!==void 0&&Ht(Y),i("popupHide",Y),$.hasPopupOpen=!1,$.onControlFocusout(Y)}function X0(){d=(n.platform.is.mobile===!0||t.behavior==="dialog")&&t.behavior!=="menu"&&(t.useInput!==!0||e["no-option"]!==void 0||t.onFilter!==void 0||K.value===!1),g=n.platform.is.ios===!0&&d===!0&&t.useInput===!0?"fade":t.transitionShow}return ae(J,Y=>{h=Y,t.useInput===!0&&t.fillInput===!0&&t.multiple!==!0&&$.innerLoading.value!==!0&&(a.value!==!0&&o.value!==!0||N.value!==!0)&&(p!==!0&&dn(),a.value!==!0&&o.value!==!0||Q(""))},{immediate:!0}),ae(()=>t.fillInput,dn),ae(o,Wd),ae(T,function(Y,$e){o.value===!0&&$.innerLoading.value===!1&&(P(-1,!0),ct(()=>{o.value===!0&&$.innerLoading.value===!1&&(Y>$e?P():Wd(!0))}))}),Tu(X0),kM(W0),X0(),st(()=>{b!==null&&clearTimeout(b),m!==null&&clearTimeout(m)}),Object.assign(r,{showPopup:Ze,hidePopup:ni,removeAtIndex:Ae,add:ne,toggleOption:ge,getOptionIndex:()=>s.value,setOptionIndex:Re,moveOptionSelection:Ge,filter:Q,updateMenuPosition:W0,updateInputValue:H,isOptionSelected:Je,getEmittingOptionValue:Ie,isOptionDisabled:(...Y)=>Z.value.apply(null,Y)===!0,getOptionValue:(...Y)=>oe.value.apply(null,Y),getOptionLabel:(...Y)=>he.value.apply(null,Y)}),Object.assign($,{innerValue:J,fieldClass:w(()=>`q-select q-field--auto-height q-select--with${t.useInput!==!0?"out":""}-input q-select--with${t.useChips!==!0?"out":""}-chips q-select--${t.multiple===!0?"multiple":"single"}`),inputRef:x,targetRef:C,hasValue:N,showPopup:Ze,floatingLabel:w(()=>t.hideSelected!==!0&&N.value===!0||typeof l.value=="number"||l.value.length!==0||fa(t.displayValue)),getControlChild:()=>{if($.editable.value!==!1&&(a.value===!0||K.value!==!0||e["no-option"]!==void 0))return d===!0?function(){const Y=[S(sI,{class:`col-auto ${$.fieldClass.value}`,...te.value,for:$.targetUid.value,dark:ie.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:l.value.length!==0,...$.splitAttrs.listeners.value,onFocus:ke,onBlur:de},{...e,rawControl:()=>$.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&Y.push(S("div",{ref:A,class:B.value+" scroll",style:t.popupContentStyle,...Ee.value,onClick:fi,onScrollPassive:j},ye())),S(Ad,{ref:L,modelValue:a.value,position:t.useInput===!0?"top":void 0,transitionShow:g,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,noRouteDismiss:t.popupNoRouteDismiss,onBeforeShow:Y0,onBeforeHide:Be,onHide:Ue,onShow:yt},()=>S("div",{class:"q-select__dialog"+(ie.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},Y))}():S(Zs,{ref:k,class:B.value,style:t.popupContentStyle,modelValue:o.value,fit:t.menuShrink!==!0,cover:t.optionsCover===!0&&K.value!==!0&&t.useInput!==!0,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,dark:ie.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:t.popupNoRouteDismiss,square:Pe.value,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,separateClosePopup:!0,...Ee.value,onScrollPassive:j,onBeforeShow:Y0,onBeforeHide:le,onShow:re},ye);$.hasPopupOpen===!0&&($.hasPopupOpen=!1)},controlEvents:{onFocusin(Y){$.onControlFocusin(Y)},onFocusout(Y){$.onControlFocusout(Y,()=>{dn(),Pt()})},onClick(Y){if(fi(Y),d!==!0&&o.value===!0)return Pt(),void(C.value!==null&&C.value.focus());Ze(Y)}},getControl:Y=>{const $e=t.hideSelected===!0?[]:e["selected-item"]!==void 0?Le.value.map(ht=>e["selected-item"](ht)).slice():e.selected!==void 0?[].concat(e.selected()):t.useChips===!0?Le.value.map((ht,dt)=>S(IS,{key:"option-"+dt,removable:$.editable.value===!0&&Z.value(ht.opt)!==!0,dense:!0,textColor:t.color,tabindex:fe.value,onRemove(){ht.removeAtIndex(dt)}},()=>S("span",{class:"ellipsis",[ht.html===!0?"innerHTML":"textContent"]:he.value(ht.opt)}))):[S("span",{[ce.value===!0?"innerHTML":"textContent"]:W.value})],je=Y===!0||a.value!==!0||d!==!0;if(t.useInput===!0)$e.push(function(ht,dt){const ti=dt===!0?{...pe.value,...$.splitAttrs.attributes.value}:void 0,Et={ref:dt===!0?C:void 0,key:"i_t",class:z.value,style:t.inputStyle,value:l.value!==void 0?l.value:"",type:"search",...ti,id:dt===!0?$.targetUid.value:void 0,maxlength:t.maxlength,autocomplete:t.autocomplete,"data-autofocus":ht===!0||t.autofocus===!0||void 0,disabled:t.disable===!0,readonly:t.readonly===!0,...Se.value};return ht!==!0&&d===!0&&(Array.isArray(Et.class)===!0?Et.class=[...Et.class,"no-pointer-events"]:Et.class+=" no-pointer-events"),S("input",Et)}(Y,je));else if($.editable.value===!0){const ht=je===!0?pe.value:void 0;$e.push(S("input",{ref:je===!0?C:void 0,key:"d_t",class:"q-select__focus-target",id:je===!0?$.targetUid.value:void 0,value:W.value,readonly:!0,"data-autofocus":Y===!0||t.autofocus===!0||void 0,...ht,onKeydown:Me,onKeyup:Ke,onKeypress:ee})),je===!0&&typeof t.autocomplete=="string"&&t.autocomplete.length!==0&&$e.push(S("input",{class:"q-select__autocomplete-input",autocomplete:t.autocomplete,tabindex:-1,onKeyup:He}))}if(E.value!==void 0&&t.disable!==!0&&se.value.length!==0){const ht=se.value.map(dt=>S("option",{value:dt,selected:!0}));$e.push(S("select",{class:"hidden",name:E.value,multiple:t.multiple},ht))}const Tt=t.useInput===!0||je!==!0?void 0:$.splitAttrs.attributes.value;return S("div",{class:"q-field__native row items-center",...Tt,...$.splitAttrs.listeners.value},$e)},getInnerAppend:()=>t.loading!==!0&&c.value!==!0&&t.hideDropdownIcon!==!0?[S(vt,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:we.value})]:null}),Dd($)}}),OI=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],zI=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];ue({name:"QSkeleton",props:{...ft,tag:{type:String,default:"div"},type:{type:String,validator:t=>OI.includes(t),default:"rect"},animation:{type:String,validator:t=>zI.includes(t),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(t,{slots:e}){const i=Ce(),r=gt(t,i.proxy.$q),n=w(()=>{const a=t.size!==void 0?[t.size,t.size]:[t.width,t.height];return{"--q-skeleton-speed":`${t.animationSpeed}ms`,width:a[0],height:a[1]}}),o=w(()=>`q-skeleton q-skeleton--${r.value===!0?"dark":"light"} q-skeleton--type-${t.type}`+(t.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${t.animation}`:"")+(t.square===!0?" q-skeleton--square":"")+(t.bordered===!0?" q-skeleton--bordered":""));return()=>S(t.tag,{class:o.value,style:n.value},De(e.default))}});var hb=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];ue({name:"QSlideItem",props:{...ft,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=gt(t,n),{getCache:a}=Gu(),s=G(null);let l=null,u={},c={},h={};const d=w(()=>n.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),p=w(()=>"q-slide-item q-item-type overflow-hidden"+(o.value===!0?" q-slide-item--dark q-dark":""));function f(){s.value.style.transform="translate(0,0)"}function g(v,b,m){t.onSlide!==void 0&&i("slide",{side:v,ratio:b,isReset:m})}function _(v){const b=s.value;if(v.isFirst)u={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},b.classList.add("no-transition"),hb.forEach(C=>{if(e[C[0]]!==void 0){const k=h[C[0]];k.style.transform="scale(1)",u.size[C[0]]=k.getBoundingClientRect()[C[3]]}}),u.axis=v.direction==="up"||v.direction==="down"?"Y":"X";else{if(v.isFinal)return b.classList.remove("no-transition"),void(u.scale===1?(b.style.transform=`translate${u.axis}(${100*u.dir}%)`,l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,i(u.showing,{reset:f}),i("action",{side:u.showing,reset:f})},230)):(b.style.transform="translate(0,0)",g(u.showing,0,!0)));v.direction=u.axis==="X"?v.offset.x<0?"left":"right":v.offset.y<0?"up":"down"}if(e.left===void 0&&v.direction===d.value.right||e.right===void 0&&v.direction===d.value.left||e.top===void 0&&v.direction==="down"||e.bottom===void 0&&v.direction==="up")return void(b.style.transform="translate(0,0)");let m,y,x;u.axis==="X"?(y=v.direction==="left"?-1:1,m=y===1?d.value.left:d.value.right,x=v.distance.x):(y=v.direction==="up"?-2:2,m=y===2?"top":"bottom",x=v.distance.y),u.dir!==null&&Math.abs(y)!==Math.abs(u.dir)||(u.dir!==y&&(["left","right","top","bottom"].forEach(C=>{c[C]&&(c[C].style.visibility=m===C?"visible":"hidden")}),u.showing=m,u.dir=y),u.scale=Math.max(0,Math.min(1,(x-40)/u.size[m])),b.style.transform=`translate${u.axis}(${x*y/Math.abs(y)}px)`,h[m].style.transform=`scale(${u.scale})`,g(m,u.scale,!1))}return Tu(()=>{c={},h={}}),st(()=>{l!==null&&clearTimeout(l)}),Object.assign(r,{reset:f}),()=>{const v=[],b={left:e[d.value.right]!==void 0,right:e[d.value.left]!==void 0,up:e.bottom!==void 0,down:e.top!==void 0},m=Object.keys(b).filter(x=>b[x]===!0);hb.forEach(x=>{const C=x[0];e[C]!==void 0&&v.push(S("div",{key:C,ref:k=>{c[C]=k},class:`q-slide-item__${C} absolute-full row no-wrap items-${x[1]} justify-${x[2]}`+(t[C+"Color"]!==void 0?` bg-${t[C+"Color"]}`:"")},[S("div",{ref:k=>{h[C]=k}},e[C]())]))});const y=S("div",{key:(m.length===0?"only-":"")+" content",ref:s,class:"q-slide-item__content"},De(e.default));return m.length===0?v.push(y):v.push(Fi(y,a("dir#"+m.join(""),()=>{const x={prevent:!0,stop:!0,mouse:!0};return m.forEach(C=>{x[C]=!0}),[[dr,_,void 0,x]]}))),S("div",{class:p.value},v)}}});var DI=ue({name:"QSpace",setup(){const t=S("div",{class:"q-space"});return()=>t}});ue({name:"QSpinnerAudio",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="matrix(1 0 0 -1 0 80)"><rect width="10" height="20" rx="3"><animate attributeName="height" begin="0s" dur="4.3s" values="20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="15" width="10" height="80" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="80;55;33;5;75;23;73;33;12;14;60;80" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" width="10" height="50" rx="3"><animate attributeName="height" begin="0s" dur="1.4s" values="50;34;78;23;56;23;34;76;80;54;21;50" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="45" width="10" height="30" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="30;45;13;80;56;72;45;76;34;23;67;30" calcMode="linear" repeatCount="indefinite"></animate></rect></g>'})}}),ue({name:"QSpinnerBall",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle cx="5" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="27" cy="5" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="49" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),ue({name:"QSpinnerBars",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="60" width="15" height="140" rx="6"><animate attributeName="height" begin="0s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="90" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="120" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect>'})}}),ue({name:"QSpinnerBox",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect x="25" y="25" width="50" height="50" fill="none" stroke-width="4" stroke="currentColor"><animateTransform id="spinnerBox" attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" dur="0.5s" begin="rectBox.end"></animateTransform></rect><rect x="27" y="27" width="46" height="50" fill="currentColor"><animate id="rectBox" attributeName="height" begin="0s;spinnerBox.end" dur="1.3s" from="50" to="0" fill="freeze"></animate></rect>'})}}),ue({name:"QSpinnerClock",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="48" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="currentColor"></circle><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="85" y2="50.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2s" repeatCount="indefinite"></animateTransform></line><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="49.5" y2="74"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="15s" repeatCount="indefinite"></animateTransform></line>'})}}),ue({name:"QSpinnerComment",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><path d="M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z" fill="currentColor"></path><circle cx="30" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;1;1" keyTimes="0;0.2;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="50" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.2;0.4;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="70" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.4;0.6;1" dur="1s" repeatCount="indefinite"></animate></circle>'})}}),ue({name:"QSpinnerCube",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><g transform="translate(25 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.1s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(25 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.7"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.3s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.2s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g>'})}}),ue({name:"QSpinnerDots",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),ue({name:"QSpinnerFacebook",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",innerHTML:'<g transform="translate(20 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(50 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.1s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(80 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.2s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g>'})}}),ue({name:"QSpinnerGears",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),ue({name:"QSpinnerGrid",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="12.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="0s" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5"><animate attributeName="fill-opacity" begin="100ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="300ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="600ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="800ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="400ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="700ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="500ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="200ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),ue({name:"QSpinnerHearts",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0.7s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"></path>'})}}),ue({name:"QSpinnerHourglass",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>'})}}),ue({name:"QSpinnerInfinity",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<path d="M24.3,30C11.4,30,5,43.3,5,50s6.4,20,19.3,20c19.3,0,32.1-40,51.4-40C88.6,30,95,43.3,95,50s-6.4,20-19.3,20C56.4,70,43.6,30,24.3,30z" fill="none" stroke="currentColor" stroke-width="8" stroke-dasharray="10.691205342610678 10.691205342610678" stroke-dashoffset="0"><animate attributeName="stroke-dashoffset" from="0" to="21.382410685221355" begin="0" dur="2s" repeatCount="indefinite" fill="freeze"></animate></path>'})}}),ue({name:"QSpinnerIos",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64",innerHTML:'<g stroke-width="4" stroke-linecap="round"><line y1="17" y2="29" transform="translate(32,32) rotate(180)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(210)"><animate attributeName="stroke-opacity" dur="750ms" values="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(240)"><animate attributeName="stroke-opacity" dur="750ms" values=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(270)"><animate attributeName="stroke-opacity" dur="750ms" values=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(300)"><animate attributeName="stroke-opacity" dur="750ms" values=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(330)"><animate attributeName="stroke-opacity" dur="750ms" values=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(0)"><animate attributeName="stroke-opacity" dur="750ms" values=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(30)"><animate attributeName="stroke-opacity" dur="750ms" values=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(60)"><animate attributeName="stroke-opacity" dur="750ms" values=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(90)"><animate attributeName="stroke-opacity" dur="750ms" values=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(120)"><animate attributeName="stroke-opacity" dur="750ms" values=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(150)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line></g>'})}}),ue({name:"QSpinnerOrbit",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="44" fill="none" stroke-width="4" stroke-opacity=".5" stroke="currentColor"></circle><circle cx="8" cy="54" r="6" fill="currentColor" stroke-width="3" stroke="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 48" to="360 50 52" dur="2s" repeatCount="indefinite"></animateTransform></circle>'})}}),ue({name:"QSpinnerOval",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),ue({name:"QSpinnerPie",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M0 50A50 50 0 0 1 50 0L50 50L0 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="0.8s" repeatCount="indefinite"></animateTransform></path><path d="M50 0A50 50 0 0 1 100 50L50 50L50 0" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="1.6s" repeatCount="indefinite"></animateTransform></path><path d="M100 50A50 50 0 0 1 50 100L50 50L100 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2.4s" repeatCount="indefinite"></animateTransform></path><path d="M50 100A50 50 0 0 1 0 50L50 50L50 100" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="3.2s" repeatCount="indefinite"></animateTransform></path>'})}}),ue({name:"QSpinnerPuff",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle></g>'})}}),ue({name:"QSpinnerRadio",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="scale(0.55)"><circle cx="30" cy="150" r="30" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></circle><path d="M90,150h30c0-49.7-40.3-90-90-90v30C63.1,90,90,116.9,90,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.1" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path><path d="M150,150h30C180,67.2,112.8,0,30,0v30C96.3,30,150,83.7,150,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.2" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path></g>'})}}),ue({name:"QSpinnerRings",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2"><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="1.5s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="1.5s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="1.5s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="3s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="3s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="3s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="8"><animate attributeName="r" begin="0s" dur="1.5s" values="6;1;2;3;4;5;6" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),ue({name:"QSpinnerTail",props:Kt,setup(t){const{cSize:e,classes:i}=Xt(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="currentColor" stop-opacity="0" offset="0%"></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="currentColor" offset="100%"></stop></linearGradient></defs><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="1"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></circle></g>'})}}),ue({name:"QSplitter",props:{...ft,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:t=>["%","px"].includes(t)},limits:{type:Array,validator:t=>t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"&&t[0]>=0&&t[0]<=t[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=gt(t,r),o=G(null),a={before:G(null),after:G(null)},s=w(()=>`q-splitter no-wrap ${t.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${t.disable===!0?"disabled":"workable"}`+(n.value===!0?" q-splitter--dark":"")),l=w(()=>t.horizontal===!0?"height":"width"),u=w(()=>t.reverse!==!0?"before":"after"),c=w(()=>t.limits!==void 0?t.limits:t.unit==="%"?[10,90]:[50,1/0]);function h(x){return(t.unit==="%"?x:Math.round(x))+t.unit}const d=w(()=>({[u.value]:{[l.value]:h(t.modelValue)}}));let p,f,g,_,v;function b(x){if(x.isFirst===!0){const k=o.value.getBoundingClientRect()[l.value];return p=t.horizontal===!0?"up":"left",f=t.unit==="%"?100:k,g=Math.min(f,c.value[1],Math.max(c.value[0],t.modelValue)),_=(t.reverse!==!0?1:-1)*(t.horizontal===!0?1:r.lang.rtl===!0?-1:1)*(t.unit==="%"?k===0?0:100/k:1),void o.value.classList.add("q-splitter--active")}if(x.isFinal===!0)return v!==t.modelValue&&i("update:modelValue",v),void o.value.classList.remove("q-splitter--active");const C=g+_*(x.direction===p?-1:1)*x.distance[t.horizontal===!0?"y":"x"];v=Math.min(f,c.value[1],Math.max(c.value[0],C)),a[u.value].value.style[l.value]=h(v),t.emitImmediately===!0&&t.modelValue!==v&&i("update:modelValue",v)}const m=w(()=>[[dr,b,void 0,{[t.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function y(x,C){x<C[0]?i("update:modelValue",C[0]):x>C[1]&&i("update:modelValue",C[1])}return ae(()=>t.modelValue,x=>{y(x,c.value)}),ae(()=>t.limits,()=>{ct(()=>{y(t.modelValue,c.value)})}),()=>{const x=[S("div",{ref:a.before,class:["q-splitter__panel q-splitter__before"+(t.reverse===!0?" col":""),t.beforeClass],style:d.value.before},De(e.before)),S("div",{class:["q-splitter__separator",t.separatorClass],style:t.separatorStyle,"aria-disabled":t.disable===!0?"true":void 0},[mr("div",{class:"q-splitter__separator-area absolute-full"},De(e.separator),"sep",t.disable!==!0,()=>m.value)]),S("div",{ref:a.after,class:["q-splitter__panel q-splitter__after"+(t.reverse===!0?"":" col"),t.afterClass],style:d.value.after},De(e.after))];return S("div",{class:s.value,ref:o},Jt(e.default,x))}}});var yC=ue({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(t,{attrs:e}){const{proxy:{$q:i}}=Ce(),r=G(null),n=w(()=>t.stepper.modelValue===t.step.name),o=w(()=>{const _=t.step.disable;return _===!0||_===""}),a=w(()=>{const _=t.step.error;return _===!0||_===""}),s=w(()=>{const _=t.step.done;return o.value===!1&&(_===!0||_==="")}),l=w(()=>{const _=t.step.headerNav,v=_===!0||_===""||_===void 0;return o.value===!1&&t.stepper.headerNav&&v}),u=w(()=>t.step.prefix&&(n.value===!1||t.stepper.activeIcon==="none")&&(a.value===!1||t.stepper.errorIcon==="none")&&(s.value===!1||t.stepper.doneIcon==="none")),c=w(()=>{const _=t.step.icon||t.stepper.inactiveIcon;if(n.value===!0){const v=t.step.activeIcon||t.stepper.activeIcon;return v==="none"?_:v||i.iconSet.stepper.active}if(a.value===!0){const v=t.step.errorIcon||t.stepper.errorIcon;return v==="none"?_:v||i.iconSet.stepper.error}if(o.value===!1&&s.value===!0){const v=t.step.doneIcon||t.stepper.doneIcon;return v==="none"?_:v||i.iconSet.stepper.done}return _}),h=w(()=>{const _=a.value===!0?t.step.errorColor||t.stepper.errorColor:void 0;if(n.value===!0){const v=t.step.activeColor||t.stepper.activeColor||t.step.color;return v!==void 0?v:_}return _!==void 0?_:o.value===!1&&s.value===!0?t.step.doneColor||t.stepper.doneColor||t.step.color||t.stepper.inactiveColor:t.step.color||t.stepper.inactiveColor}),d=w(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(h.value!==void 0?` text-${h.value}`:"")+(a.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(u.value===!0?"prefix":"icon"):"")+(n.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(l.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(o.value===!0?" q-stepper__tab--disabled":"")),p=w(()=>t.stepper.headerNav===!0&&l.value);function f(){r.value!==null&&r.value.focus(),n.value===!1&&t.goToPanel(t.step.name)}function g(_){_.keyCode===13&&n.value===!1&&t.goToPanel(t.step.name)}return()=>{const _={class:d.value};l.value===!0&&(_.onClick=f,_.onKeyup=g,Object.assign(_,o.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0}));const v=[S("div",{class:"q-focus-helper",tabindex:-1,ref:r}),S("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[S("span",{class:"row flex-center"},[u.value===!0?t.step.prefix:S(vt,{name:c.value})])])];if(t.step.title!==void 0&&t.step.title!==null){const b=[S("div",{class:"q-stepper__title"},t.step.title)];t.step.caption!==void 0&&t.step.caption!==null&&b.push(S("div",{class:"q-stepper__caption"},t.step.caption)),v.push(S("div",{class:"q-stepper__label q-stepper__line relative-position"},b))}return Fi(S("div",_,v),[[Id,p.value]])}}});function _C(t){return S("div",{class:"q-stepper__step-content"},[S("div",{class:"q-stepper__step-inner"},De(t.default))])}var db={setup:(t,{slots:e})=>()=>_C(e)};ue({name:"QStep",props:{...l0,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(t,{slots:e,emit:i}){const{proxy:{$q:r}}=Ce(),n=Hi(Y2,wt);if(n===wt)return wt;const{getCache:o}=Gu(),a=G(null),s=w(()=>n.value.modelValue===t.name),l=w(()=>r.platform.is.ios!==!0&&r.platform.is.chrome===!0||s.value!==!0||n.value.vertical!==!0?{}:{onScroll(h){const{target:d}=h;d.scrollTop>0&&(d.scrollTop=0),t.onScroll!==void 0&&i("scroll",h)}}),u=w(()=>typeof t.name=="string"||typeof t.name=="number"?t.name:String(t.name));function c(){const h=n.value.vertical;return h===!0&&n.value.keepAlive===!0?S(hx,n.value.keepAliveProps.value,s.value===!0?[S(n.value.needsUniqueKeepAliveWrapper.value===!0?o(u.value,()=>({...db,name:u.value})):db,{key:u.value},e.default)]:void 0):h!==!0||s.value===!0?_C(e):void 0}return()=>S("div",{ref:a,class:"q-stepper__step",role:"tabpanel",...l.value},n.value.vertical===!0?[S(yC,{stepper:n.value,step:t,goToPanel:n.value.goToPanel}),n.value.animated===!0?S(v0,c):c()]:[c()])}});var BI=/(-\w)/g;ue({name:"QStepper",props:{...ft,...u0,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:c0,setup(t,{slots:e}){const i=Ce(),r=gt(t,i.proxy.$q),{updatePanelsList:n,isValidPanelName:o,updatePanelIndex:a,getPanelContent:s,getPanels:l,panelDirectives:u,goToPanel:c,keepAliveProps:h,needsUniqueKeepAliveWrapper:d}=h0();vo(Y2,w(()=>({goToPanel:c,keepAliveProps:h,needsUniqueKeepAliveWrapper:d,...t})));const p=w(()=>"q-stepper q-stepper--"+(t.vertical===!0?"vertical":"horizontal")+(t.flat===!0?" q-stepper--flat":"")+(t.bordered===!0?" q-stepper--bordered":"")+(r.value===!0?" q-stepper--dark q-dark":"")),f=w(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${t.alternativeLabels===!0?"alternative":"standard"}-labels`+(t.flat===!1||t.bordered===!0?" q-stepper__header--border":"")+(t.contracted===!0?" q-stepper__header--contracted":"")+(t.headerClass!==void 0?` ${t.headerClass}`:""));function g(){const _=De(e.message,[]);if(t.vertical===!0){o(t.modelValue)&&a();const v=S("div",{class:"q-stepper__content"},De(e.default));return _===void 0?[v]:_.concat(v)}return[S("div",{class:f.value},l().map(v=>{const b=function(m){const y={};for(const x in m){const C=x.replace(BI,k=>k[1].toUpperCase());y[C]=m[x]}return y}(v.props);return S(yC,{key:b.name,stepper:t,step:b,goToPanel:c})})),_,mr("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",t.swipeable,()=>u.value)]}return()=>(n(e),S("div",{class:p.value},Jt(e.navigation,g())))}}),ue({name:"QStepperNavigation",setup:(t,{slots:e})=>()=>S("div",{class:"q-stepper__nav"},De(e.default))});var jI=ue({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(t,{slots:e,emit:i}){const r=Ce(),{proxy:{$q:n}}=r,o=a=>{i("click",a)};return()=>{if(t.props===void 0)return S("th",{class:t.autoWidth===!0?"q-table--col-auto-width":"",onClick:o},De(e.default));let a,s;const l=r.vnode.key;if(l){if(a=t.props.colsMap[l],a===void 0)return}else a=t.props.col;if(a.sortable===!0){const c=a.align==="right"?"unshift":"push";s=Nu(e.default,[]),s[c](S(vt,{class:a.__iconClass,name:n.iconSet.table.arrowUp}))}else s=De(e.default);const u={class:a.__thClass+(t.autoWidth===!0?" q-table--col-auto-width":""),style:a.headerStyle,onClick:c=>{a.sortable===!0&&t.props.sort(a),o(c)}};return S("th",u,s)}}});function bC(t,e){return S("div",t,[S("table",{class:"q-table"},e)])}var NI={list:b0,table:bI},$I=["list","table","__qtable"],VI=ue({name:"QVirtualScroll",props:{...Rm,type:{type:String,default:"list",validator:t=>$I.includes(t)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:xa},setup(t,{slots:e,attrs:i}){let r;const n=G(null),o=w(()=>t.itemsSize>=0&&t.itemsFn!==void 0?parseInt(t.itemsSize,10):Array.isArray(t.items)?t.items.length:0),{virtualScrollSliceRange:a,localResetVirtualScroll:s,padVirtualScroll:l,onVirtualScrollEvt:u}=vC({virtualScrollLength:o,getVirtualScrollTarget:function(){return r},getVirtualScrollEl:p}),c=w(()=>{if(o.value===0)return[];const v=(b,m)=>({index:a.value.from+m,item:b});return t.itemsFn===void 0?t.items.slice(a.value.from,a.value.to).map(v):t.itemsFn(a.value.from,a.value.to-a.value.from).map(v)}),h=w(()=>"q-virtual-scroll q-virtual-scroll"+(t.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(t.scrollTarget!==void 0?"":" scroll")),d=w(()=>t.scrollTarget!==void 0?{}:{tabindex:0});function p(){return n.value.$el||n.value}function f(){r=cn(p(),t.scrollTarget),r.addEventListener("scroll",u,Rt.passive)}function g(){r!==void 0&&(r.removeEventListener("scroll",u,Rt.passive),r=void 0)}function _(){let v=l(t.type==="list"?"div":"tbody",c.value.map(e.default));return e.before!==void 0&&(v=e.before().concat(v)),Jt(e.after,v)}return ae(o,()=>{s()}),ae(()=>t.scrollTarget,()=>{g(),f()}),Ym(()=>{s()}),Ft(()=>{f()}),ga(()=>{f()}),In(()=>{g()}),st(()=>{g()}),()=>{if(e.default!==void 0)return t.type==="__qtable"?bC({ref:n,class:"q-table__middle "+h.value},_()):S(NI[t.type],{...i,ref:n,class:[i.class,h.value],...d.value},_)}}}),GI={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:t=>t==="ad"||t==="da",default:"ad"}};function HI(t,e,i,r){const n=w(()=>{const{sortBy:a}=e.value;return a&&i.value.find(s=>s.name===a)||null}),o=w(()=>t.sortMethod!==void 0?t.sortMethod:(a,s,l)=>{const u=i.value.find(d=>d.name===s);if(u===void 0||u.field===void 0)return a;const c=l===!0?-1:1,h=typeof u.field=="function"?d=>u.field(d):d=>d[u.field];return a.sort((d,p)=>{let f=h(d),g=h(p);return u.rawSort!==void 0?u.rawSort(f,g,d,p)*c:f==null?-1*c:g==null?1*c:u.sort!==void 0?u.sort(f,g,d,p)*c:bu(f)===!0&&bu(g)===!0?(f-g)*c:vm(f)===!0&&vm(g)===!0?function(_,v){return new Date(_)-new Date(v)}(f,g)*c:typeof f=="boolean"&&typeof g=="boolean"?(f-g)*c:([f,g]=[f,g].map(_=>(_+"").toLocaleString().toLowerCase()),f<g?-1*c:f===g?0:c)})});return{columnToSort:n,computedSortMethod:o,sort:function(a){let s=t.columnSortOrder;if(Ci(a)===!0)a.sortOrder&&(s=a.sortOrder),a=a.name;else{const c=i.value.find(h=>h.name===a);c!==void 0&&c.sortOrder&&(s=c.sortOrder)}let{sortBy:l,descending:u}=e.value;l!==a?(l=a,u=s==="da"):t.binaryStateSort===!0?u=!u:u===!0?s==="ad"?l=null:u=!1:s==="ad"?u=!0:l=null,r({sortBy:l,descending:u,page:1})}}}var UI={filter:[String,Object],filterMethod:Function};function pb(t){return t.page<1&&(t.page=1),t.rowsPerPage!==void 0&&t.rowsPerPage<1&&(t.rowsPerPage=0),t}var WI={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]},YI={selection:{type:String,default:"none",validator:t=>["single","multiple","none"].includes(t)},selected:{type:Array,default:()=>[]}};function fb(t){return Array.isArray(t)?t.slice():[]}var KI={expanded:Array},XI={visibleColumns:Array},Bc="q-table__bottom row items-center",gb={};function ZI(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}ub.forEach(t=>{gb[t]={}}),ue({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:t=>["horizontal","vertical","cell","none"].includes(t)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...gb,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ft,...d0,...XI,...UI,...WI,...KI,...YI,...GI},emits:["request","virtualScroll",...p0,"update:expanded","update:selected","selection"],setup(t,{slots:e,emit:i}){const r=Ce(),{proxy:{$q:n}}=r,o=gt(t,n),{inFullscreen:a,toggleFullscreen:s}=f0(),l=w(()=>typeof t.rowKey=="function"?t.rowKey:ee=>ee[t.rowKey]),u=G(null),c=G(null),h=w(()=>t.grid!==!0&&t.virtualScroll===!0),d=w(()=>" q-table__card"+(o.value===!0?" q-table__card--dark q-dark":"")+(t.square===!0?" q-table--square":"")+(t.flat===!0?" q-table--flat":"")+(t.bordered===!0?" q-table--bordered":"")),p=w(()=>`q-table__container q-table--${t.separator}-separator column no-wrap`+(t.grid===!0?" q-table--grid":d.value)+(o.value===!0?" q-table--dark":"")+(t.dense===!0?" q-table--dense":"")+(t.wrapCells===!1?" q-table--no-wrap":"")+(a.value===!0?" fullscreen scroll":"")),f=w(()=>p.value+(t.loading===!0?" q-table--loading":""));ae(()=>t.tableStyle+t.tableClass+t.tableHeaderStyle+t.tableHeaderClass+p.value,()=>{h.value===!0&&c.value!==null&&c.value.reset()});const{innerPagination:g,computedPagination:_,isServerSide:v,requestServerInteraction:b,setPagination:m}=function(ee,Me){const{props:be,emit:ye}=ee,xe=G(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:be.rowsPerPageOptions.length!==0?be.rowsPerPageOptions[0]:5},be.pagination)),D=w(()=>pb(be["onUpdate:pagination"]!==void 0?{...xe.value,...be.pagination}:xe.value)),H=w(()=>D.value.rowsNumber!==void 0);function Q(re){le({pagination:re,filter:be.filter})}function le(re={}){ct(()=>{ye("request",{pagination:re.pagination||D.value,filter:re.filter||be.filter,getCellValue:Me})})}return{innerPagination:xe,computedPagination:D,isServerSide:H,requestServerInteraction:le,setPagination:function(re,ke){const de=pb({...D.value,...re});(function(Be,Ue){for(const yt in Ue)if(Ue[yt]!==Be[yt])return!1;return!0})(D.value,de)!==!0?H.value!==!0?be.pagination!==void 0&&be["onUpdate:pagination"]!==void 0?ye("update:pagination",de):xe.value=de:Q(de):H.value===!0&&ke===!0&&Q(de)}}}(r,Ae),{computedFilterMethod:y}=function(ee,Me){const be=w(()=>ee.filterMethod!==void 0?ee.filterMethod:(ye,xe,D,H)=>{const Q=xe?xe.toLowerCase():"";return ye.filter(le=>D.some(re=>{const ke=H(re,le)+"";return(ke==="undefined"||ke==="null"?"":ke.toLowerCase()).indexOf(Q)!==-1}))});return ae(()=>ee.filter,()=>{ct(()=>{Me({page:1},!0)})},{deep:!0}),{computedFilterMethod:be}}(t,m),{isRowExpanded:x,setExpanded:C,updateExpanded:k}=function(ee,Me){const be=G(fb(ee.expanded));function ye(xe){ee.expanded!==void 0?Me("update:expanded",xe):be.value=xe}return ae(()=>ee.expanded,xe=>{be.value=fb(xe)}),{isRowExpanded:function(xe){return be.value.includes(xe)},setExpanded:ye,updateExpanded:function(xe,D){const H=be.value.slice(),Q=H.indexOf(xe);D===!0?Q===-1&&(H.push(xe),ye(H)):Q!==-1&&(H.splice(Q,1),ye(H))}}}(t,i),L=w(()=>{let ee=t.rows;if(v.value===!0||ee.length===0)return ee;const{sortBy:Me,descending:be}=_.value;return t.filter&&(ee=y.value(ee,t.filter,$.value,Ae)),ie.value!==null&&(ee=N.value(t.rows===ee?ee.slice():ee,Me,be)),ee}),A=w(()=>L.value.length),E=w(()=>{let ee=L.value;if(v.value===!0)return ee;const{rowsPerPage:Me}=_.value;return Me!==0&&(B.value===0&&t.rows!==ee?ee.length>K.value&&(ee=ee.slice(0,K.value)):ee=ee.slice(B.value,K.value)),ee}),{hasSelectionMode:I,singleSelection:T,multipleSelection:R,allRowsSelected:M,someRowsSelected:q,rowsSelectedNumber:P,isRowSelected:F,clearSelection:j,updateSelection:V}=function(ee,Me,be,ye){const xe=w(()=>{const de={};return ee.selected.map(ye.value).forEach(Be=>{de[Be]=!0}),de}),D=w(()=>ee.selection!=="none"),H=w(()=>ee.selection==="single"),Q=w(()=>ee.selection==="multiple"),le=w(()=>be.value.length!==0&&be.value.every(de=>xe.value[ye.value(de)]===!0)),re=w(()=>le.value!==!0&&be.value.some(de=>xe.value[ye.value(de)]===!0)),ke=w(()=>ee.selected.length);return{hasSelectionMode:D,singleSelection:H,multipleSelection:Q,allRowsSelected:le,someRowsSelected:re,rowsSelectedNumber:ke,isRowSelected:function(de){return xe.value[de]===!0},clearSelection:function(){Me("update:selected",[])},updateSelection:function(de,Be,Ue,yt){Me("selection",{rows:Be,added:Ue,keys:de,evt:yt});const Pt=H.value===!0?Ue===!0?Be:[]:Ue===!0?ee.selected.concat(Be):ee.selected.filter(Ze=>de.includes(ye.value(Ze))===!1);Me("update:selected",Pt)}}}(t,i,E,l),{colList:O,computedCols:$,computedColsMap:J,computedColspan:te}=function(ee,Me,be){const ye=w(()=>{if(ee.columns!==void 0)return ee.columns;const Q=ee.rows[0];return Q!==void 0?Object.keys(Q).map(le=>({name:le,label:le.toUpperCase(),field:le,align:bu(Q[le])?"right":"left",sortable:!0})):[]}),xe=w(()=>{const{sortBy:Q,descending:le}=Me.value;return(ee.visibleColumns!==void 0?ye.value.filter(re=>re.required===!0||ee.visibleColumns.includes(re.name)===!0):ye.value).map(re=>{const ke=re.align||"right",de=`text-${ke}`;return{...re,align:ke,__iconClass:`q-table__sort-icon q-table__sort-icon--${ke}`,__thClass:de+(re.headerClasses!==void 0?" "+re.headerClasses:"")+(re.sortable===!0?" sortable":"")+(re.name===Q?" sorted "+(le===!0?"sort-desc":""):""),__tdStyle:re.style!==void 0?typeof re.style!="function"?()=>re.style:re.style:()=>null,__tdClass:re.classes!==void 0?typeof re.classes!="function"?()=>de+" "+re.classes:Be=>de+" "+re.classes(Be):()=>de}})}),D=w(()=>{const Q={};return xe.value.forEach(le=>{Q[le.name]=le}),Q}),H=w(()=>ee.tableColspan!==void 0?ee.tableColspan:xe.value.length+(be.value===!0?1:0));return{colList:ye,computedCols:xe,computedColsMap:D,computedColspan:H}}(t,_,I),{columnToSort:ie,computedSortMethod:N,sort:z}=HI(t,_,O,m),{firstRowIndex:B,lastRowIndex:K,isFirstPage:U,isLastPage:W,pagesNumber:ve,computedRowsPerPageOptions:ce,computedRowsNumber:fe,firstPage:pe,prevPage:Ee,nextPage:Le,lastPage:me}=function(ee,Me,be,ye,xe,D){const{props:H,emit:Q,proxy:{$q:le}}=ee,re=w(()=>ye.value===!0?be.value.rowsNumber||0:D.value),ke=w(()=>{const{page:Ze,rowsPerPage:ni}=be.value;return(Ze-1)*ni}),de=w(()=>{const{page:Ze,rowsPerPage:ni}=be.value;return Ze*ni}),Be=w(()=>be.value.page===1),Ue=w(()=>be.value.rowsPerPage===0?1:Math.max(1,Math.ceil(re.value/be.value.rowsPerPage))),yt=w(()=>de.value===0||be.value.page>=Ue.value),Pt=w(()=>(H.rowsPerPageOptions.includes(Me.value.rowsPerPage)?H.rowsPerPageOptions:[Me.value.rowsPerPage].concat(H.rowsPerPageOptions)).map(Ze=>({label:Ze===0?le.lang.table.allRows:""+Ze,value:Ze})));return ae(Ue,(Ze,ni)=>{if(Ze===ni)return;const dn=be.value.page;Ze&&!dn?xe({page:1}):Ze<dn&&xe({page:Ze})}),H["onUpdate:pagination"]!==void 0&&Q("update:pagination",{...be.value}),{firstRowIndex:ke,lastRowIndex:de,isFirstPage:Be,isLastPage:yt,pagesNumber:Ue,computedRowsPerPageOptions:Pt,computedRowsNumber:re,firstPage:function(){xe({page:1})},prevPage:function(){const{page:Ze}=be.value;Ze>1&&xe({page:Ze-1})},nextPage:function(){const{page:Ze,rowsPerPage:ni}=be.value;de.value>0&&Ze*ni<re.value&&xe({page:Ze+1})},lastPage:function(){xe({page:Ue.value})}}}(r,g,_,v,m,A),we=w(()=>E.value.length===0),Pe=w(()=>{const ee={};return ub.forEach(Me=>{ee[Me]=t[Me]}),ee.virtualScrollItemSize===void 0&&(ee.virtualScrollItemSize=t.dense===!0?28:48),ee});function Ve(){if(t.grid===!0)return function(){const be=e.item!==void 0?e.item:ye=>{const xe=ye.cols.map(H=>S("div",{class:"q-table__grid-item-row"},[S("div",{class:"q-table__grid-item-title"},[H.label]),S("div",{class:"q-table__grid-item-value"},[H.value])]));if(I.value===!0){const H=e["body-selection"],Q=H!==void 0?H(ye):[S(Hl,{modelValue:ye.selected,color:t.color,dark:o.value,dense:t.dense,"onUpdate:modelValue":(le,re)=>{V([ye.key],[ye.row],le,re)}})];xe.unshift(S("div",{class:"q-table__grid-item-row"},Q),S(Ln,{dark:o.value}))}const D={class:["q-table__grid-item-card"+d.value,t.cardClass],style:t.cardStyle};return t.onRowClick===void 0&&t.onRowDblclick===void 0||(D.class[0]+=" cursor-pointer",t.onRowClick!==void 0&&(D.onClick=H=>{i("RowClick",H,ye.row,ye.pageIndex)}),t.onRowDblclick!==void 0&&(D.onDblclick=H=>{i("RowDblclick",H,ye.row,ye.pageIndex)})),S("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(ye.selected===!0?" q-table__grid-item--selected":"")},[S("div",D,xe)])};return S("div",{class:["q-table__grid-content row",t.cardContainerClass],style:t.cardContainerStyle},E.value.map((ye,xe)=>be(Se({key:l.value(ye),row:ye,pageIndex:xe}))))}();const ee=t.hideHeader!==!0?Re:null;if(h.value===!0){const be=e["top-row"],ye=e["bottom-row"],xe={default:D=>Z(D.item,e.body,D.index)};if(be!==void 0){const D=S("tbody",be({cols:$.value}));xe.before=ee===null?()=>D:()=>[ee()].concat(D)}else ee!==null&&(xe.before=ee);return ye!==void 0&&(xe.after=()=>S("tbody",ye({cols:$.value}))),S(VI,{ref:c,class:t.tableClass,style:t.tableStyle,...Pe.value,scrollTarget:t.virtualScrollTarget,items:E.value,type:"__qtable",tableColspan:te.value,onVirtualScroll:oe},xe)}const Me=[se()];return ee!==null&&Me.unshift(ee()),bC({class:["q-table__middle scroll",t.tableClass],style:t.tableStyle},Me)}function oe(ee){i("virtualScroll",ee)}function he(){return[S(EI,{class:"q-table__linear-progress",color:t.color,dark:o.value,indeterminate:!0,trackColor:"transparent"})]}function Z(ee,Me,be){const ye=l.value(ee),xe=F(ye);if(Me!==void 0)return Me(Se({key:ye,row:ee,pageIndex:be,__trClass:xe?"selected":""}));const D=e["body-cell"],H=$.value.map(le=>{const re=e[`body-cell-${le.name}`],ke=re!==void 0?re:D;return ke!==void 0?ke(function(de){return Ie(de),pi(de,"value",()=>Ae(de.col,de.row)),de}({key:ye,row:ee,pageIndex:be,col:le})):S("td",{class:le.__tdClass(ee),style:le.__tdStyle(ee)},Ae(le,ee))});if(I.value===!0){const le=e["body-selection"],re=le!==void 0?le(function(ke){return Ie(ke),ke}({key:ye,row:ee,pageIndex:be})):[S(Hl,{modelValue:xe,color:t.color,dark:o.value,dense:t.dense,"onUpdate:modelValue":(ke,de)=>{V([ye],[ee],ke,de)}})];H.unshift(S("td",{class:"q-table--col-auto-width"},re))}const Q={key:ye,class:{selected:xe}};return t.onRowClick!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onClick=le=>{i("rowClick",le,ee,be)}),t.onRowDblclick!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onDblclick=le=>{i("rowDblclick",le,ee,be)}),t.onRowContextmenu!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onContextmenu=le=>{i("rowContextmenu",le,ee,be)}),S("tr",Q,H)}function se(){const ee=e.body,Me=e["top-row"],be=e["bottom-row"];let ye=E.value.map((xe,D)=>Z(xe,ee,D));return Me!==void 0&&(ye=Me({cols:$.value}).concat(ye)),be!==void 0&&(ye=ye.concat(be({cols:$.value}))),S("tbody",ye)}function Se(ee){return Ie(ee),ee.cols=ee.cols.map(Me=>pi({...Me},"value",()=>Ae(Me,ee.row))),ee}function Ie(ee){Object.assign(ee,{cols:$.value,colsMap:J.value,sort:z,rowIndex:B.value+ee.pageIndex,color:t.color,dark:o.value,dense:t.dense}),I.value===!0&&pi(ee,"selected",()=>F(ee.key),(Me,be)=>{V([ee.key],[ee.row],Me,be)}),pi(ee,"expand",()=>x(ee.key),Me=>{k(ee.key,Me)})}function Ae(ee,Me){const be=typeof ee.field=="function"?ee.field(Me):Me[ee.field];return ee.format!==void 0?ee.format(be,Me):be}const X=w(()=>({pagination:_.value,pagesNumber:ve.value,isFirstPage:U.value,isLastPage:W.value,firstPage:pe,prevPage:Ee,nextPage:Le,lastPage:me,inFullscreen:a.value,toggleFullscreen:s}));function ne(){const ee=e.top,Me=e["top-left"],be=e["top-right"],ye=e["top-selection"],xe=I.value===!0&&ye!==void 0&&P.value>0,D="q-table__top relative-position row items-center";if(ee!==void 0)return S("div",{class:D},[ee(X.value)]);let H;return xe===!0?H=ye(X.value).slice():(H=[],Me!==void 0?H.push(S("div",{class:"q-table__control"},[Me(X.value)])):t.title&&H.push(S("div",{class:"q-table__control"},[S("div",{class:["q-table__title",t.titleClass]},t.title)]))),be!==void 0&&(H.push(S("div",{class:"q-table__separator col"})),H.push(S("div",{class:"q-table__control"},[be(X.value)]))),H.length!==0?S("div",{class:D},H):void 0}const ge=w(()=>q.value===!0?null:M.value);function Re(){const ee=function(){const Me=e.header,be=e["header-cell"];if(Me!==void 0)return Me(Ge({header:!0})).slice();const ye=$.value.map(xe=>{const D=e[`header-cell-${xe.name}`],H=D!==void 0?D:be,Q=Ge({col:xe});return H!==void 0?H(Q):S(jI,{key:xe.name,props:Q},()=>xe.label)});if(T.value===!0&&t.grid!==!0)ye.unshift(S("th",{class:"q-table--col-auto-width"}," "));else if(R.value===!0){const xe=e["header-selection"],D=xe!==void 0?xe(Ge({})):[S(Hl,{color:t.color,modelValue:ge.value,dark:o.value,dense:t.dense,"onUpdate:modelValue":Je})];ye.unshift(S("th",{class:"q-table--col-auto-width"},D))}return[S("tr",{class:t.tableHeaderClass,style:t.tableHeaderStyle},ye)]}();return t.loading===!0&&e.loading===void 0&&ee.push(S("tr",{class:"q-table__progress"},[S("th",{class:"relative-position",colspan:te.value},he())])),S("thead",ee)}function Ge(ee){return Object.assign(ee,{cols:$.value,sort:z,colsMap:J.value,color:t.color,dark:o.value,dense:t.dense}),R.value===!0&&pi(ee,"selected",()=>ge.value,Je),ee}function Je(ee){q.value===!0&&(ee=!1),V(E.value.map(l.value),E.value,ee)}const qe=w(()=>{const ee=[t.iconFirstPage||n.iconSet.table.firstPage,t.iconPrevPage||n.iconSet.table.prevPage,t.iconNextPage||n.iconSet.table.nextPage,t.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?ee.reverse():ee});function Ke(){if(t.hideBottom===!0)return;if(we.value===!0){if(t.hideNoData===!0)return;const be=t.loading===!0?t.loadingLabel||n.lang.table.loading:t.filter?t.noResultsLabel||n.lang.table.noResults:t.noDataLabel||n.lang.table.noData,ye=e["no-data"],xe=ye!==void 0?[ye({message:be,icon:n.iconSet.table.warning,filter:t.filter})]:[S(vt,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),be];return S("div",{class:Bc+" q-table__bottom--nodata"},xe)}const ee=e.bottom;if(ee!==void 0)return S("div",{class:Bc},[ee(X.value)]);const Me=t.hideSelectedBanner!==!0&&I.value===!0&&P.value>0?[S("div",{class:"q-table__control"},[S("div",[(t.selectedRowsLabel||n.lang.table.selectedRecords)(P.value)])])]:[];return t.hidePagination!==!0?S("div",{class:Bc+" justify-end"},function(be){let ye;const{rowsPerPage:xe}=_.value,D=t.paginationLabel||n.lang.table.pagination,H=e.pagination,Q=t.rowsPerPageOptions.length>1;if(be.push(S("div",{class:"q-table__separator col"})),Q===!0&&be.push(S("div",{class:"q-table__control"},[S("span",{class:"q-table__bottom-item"},[t.rowsPerPageLabel||n.lang.table.recordsPerPage]),S(FI,{class:"q-table__select inline q-table__bottom-item",color:t.color,modelValue:xe,options:ce.value,displayValue:xe===0?n.lang.table.allRows:xe,dark:o.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":He})])),H!==void 0)ye=H(X.value);else if(ye=[S("span",xe!==0?{class:"q-table__bottom-item"}:{},[xe?D(B.value+1,Math.min(K.value,fe.value),fe.value):D(1,A.value,fe.value)])],xe!==0&&ve.value>1){const le={color:t.color,round:!0,dense:!0,flat:!0};t.dense===!0&&(le.size="sm"),ve.value>2&&ye.push(S(_t,{key:"pgFirst",...le,icon:qe.value[0],disable:U.value,onClick:pe})),ye.push(S(_t,{key:"pgPrev",...le,icon:qe.value[1],disable:U.value,onClick:Ee}),S(_t,{key:"pgNext",...le,icon:qe.value[2],disable:W.value,onClick:Le})),ve.value>2&&ye.push(S(_t,{key:"pgLast",...le,icon:qe.value[3],disable:W.value,onClick:me}))}return be.push(S("div",{class:"q-table__control"},ye)),be}(Me)):Me.length!==0?S("div",{class:Bc},Me):void 0}function He(ee){m({page:1,rowsPerPage:ee.value})}return Object.assign(r.proxy,{requestServerInteraction:b,setPagination:m,firstPage:pe,prevPage:Ee,nextPage:Le,lastPage:me,isRowSelected:F,clearSelection:j,isRowExpanded:x,setExpanded:C,sort:z,resetVirtualScroll:function(){h.value===!0&&c.value.reset()},scrollTo:function(ee,Me){if(c.value!==null)return void c.value.scrollTo(ee,Me);ee=parseInt(ee,10);const be=u.value.querySelector(`tbody tr:nth-of-type(${ee+1})`);if(be!==null){const ye=u.value.querySelector(".q-table__middle.scroll"),xe=be.offsetTop-t.virtualScrollStickySizeStart,D=xe<ye.scrollTop?"decrease":"increase";ye.scrollTop=xe,i("virtualScroll",{index:ee,from:0,to:g.value.rowsPerPage-1,direction:D})}},getCellValue:Ae}),U2(r.proxy,{filteredSortedRows:()=>L.value,computedRows:()=>E.value,computedRowsNumber:()=>fe.value}),()=>{const ee=[ne()],Me={ref:u,class:f.value};return t.grid===!0?ee.push(function(){const be=t.gridHeader===!0?[S("table",{class:"q-table"},[Re()])]:t.loading===!0&&e.loading===void 0?he():void 0;return S("div",{class:"q-table__middle"},be)}()):Object.assign(Me,{class:[Me.class,t.cardClass],style:t.cardStyle}),ee.push(Ve(),Ke()),t.loading===!0&&e.loading!==void 0&&ee.push(e.loading()),S("div",Me,ee)}}}),ue({name:"QTr",props:{props:Object,noHover:Boolean},setup(t,{slots:e}){const i=w(()=>"q-tr"+(t.props===void 0||t.props.header===!0?"":" "+t.props.__trClass)+(t.noHover===!0?" q-tr--no-hover":""));return()=>S("tr",{class:i.value},De(e.default))}}),ue({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(t,{slots:e}){const i=Ce(),r=w(()=>"q-td"+(t.autoWidth===!0?" q-table--col-auto-width":"")+(t.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(t.props===void 0)return S("td",{class:r.value},De(e.default));const n=i.vnode.key,o=(t.props.colsMap!==void 0?t.props.colsMap[n]:null)||t.props.col;if(o===void 0)return;const{row:a}=t.props;return S("td",{class:r.value+o.__tdClass(a),style:o.__tdStyle(a)},De(e.default))}}}),ue({name:"QRouteTab",props:{...$u,...BS},emits:DS,setup(t,{slots:e,emit:i}){const r=Ld({useDisableForRouterLinkProps:!1}),{renderTab:n,$tabs:o}=jS(t,e,i,{exact:w(()=>t.exact),...r});return ae(()=>`${t.name} | ${t.exact} | ${(r.resolvedLink.value||{}).href}`,o.verifyRouteModel),()=>n(r.linkTag.value,r.linkAttrs.value)}}),ue({name:"QTime",props:{...ft,..._r,...nd,modelValue:{required:!0,validator:t=>typeof t=="string"||t===null},mask:{...nd.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:GS,setup(t,{slots:e,emit:i}){const r=Ce(),{$q:n}=r.proxy,o=gt(t,n),{tabindex:a,headerClass:s,getLocale:l,getCurrentDate:u}=HS(t,n),c=wo(Vu(t));let h,d;const p=G(null),f=w(()=>t.calendar!=="persian"&&t.mask!==null?t.mask:"HH:mm"+(t.withSeconds===!0?":ss":"")),g=w(()=>l()),_=w(()=>function(){if(typeof t.defaultDate!="string"){const X=u(!0);return X.dateHash=vn(X),X}return ql(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}()),v=ql(t.modelValue,f.value,g.value,t.calendar,_.value),b=G(function(X,ne){return X.hour!==null&&X.minute===null?"minute":"hour"}(v)),m=G(v),y=G(v.hour===null||v.hour<12),x=w(()=>"q-time q-time--"+(t.landscape===!0?"landscape":"portrait")+(o.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),C=w(()=>{const X=m.value;return{hour:X.hour===null?"--":k.value===!0?bt(X.hour):String(y.value===!0?X.hour===0?12:X.hour:X.hour>12?X.hour-12:X.hour),minute:X.minute===null?"--":bt(X.minute),second:X.second===null?"--":bt(X.second)}}),k=w(()=>t.format24h!==null?t.format24h:n.lang.date.format24h),L=w(()=>{const X=b.value==="hour",ne=X===!0?12:60,ge=m.value[b.value];let Re=`rotate(${Math.round(ge*(360/ne))-180}deg) translateX(-50%)`;return X===!0&&k.value===!0&&m.value.hour>=12&&(Re+=" scale(.7)"),{transform:Re}}),A=w(()=>m.value.hour!==null),E=w(()=>A.value===!0&&m.value.minute!==null),I=w(()=>t.hourOptions!==void 0?X=>t.hourOptions.includes(X):t.options!==void 0?X=>t.options(X,null,null):null),T=w(()=>t.minuteOptions!==void 0?X=>t.minuteOptions.includes(X):t.options!==void 0?X=>t.options(m.value.hour,X,null):null),R=w(()=>t.secondOptions!==void 0?X=>t.secondOptions.includes(X):t.options!==void 0?X=>t.options(m.value.hour,m.value.minute,X):null),M=w(()=>{if(I.value===null)return null;const X=$(0,11,I.value),ne=$(12,11,I.value);return{am:X,pm:ne,values:X.values.concat(ne.values)}}),q=w(()=>T.value!==null?$(0,59,T.value):null),P=w(()=>R.value!==null?$(0,59,R.value):null),F=w(()=>{switch(b.value){case"hour":return M.value;case"minute":return q.value;case"second":return P.value}}),j=w(()=>{let X,ne,ge=0,Re=1;const Ge=F.value!==null?F.value.values:void 0;b.value==="hour"?k.value===!0?(X=0,ne=23):(X=0,ne=11,y.value===!1&&(ge=12)):(X=0,ne=55,Re=5);const Je=[];for(let qe=X,Ke=X;qe<=ne;qe+=Re,Ke++){const He=qe+ge,ee=Ge!==void 0&&Ge.includes(He)===!1,Me=b.value==="hour"&&qe===0?k.value===!0?"00":"12":qe;Je.push({val:He,index:Ke,disable:ee,label:Me})}return Je}),V=w(()=>[[dr,z,void 0,{stop:!0,prevent:!0,mouse:!0}]]);function O(){const X={...u(),...ZI()};Se(X),Object.assign(m.value,X),b.value="hour"}function $(X,ne,ge){const Re=Array.apply(null,{length:ne+1}).map((Ge,Je)=>{const qe=Je+X;return{index:qe,val:ge(qe)===!0}}).filter(Ge=>Ge.val===!0).map(Ge=>Ge.index);return{min:Re[0],max:Re[Re.length-1],values:Re,threshold:ne+1}}function J(X,ne,ge){const Re=Math.abs(X-ne);return Math.min(Re,ge-Re)}function te(X,{min:ne,max:ge,values:Re,threshold:Ge}){if(X===ne)return ne;if(X<ne||X>ge)return J(X,ne,Ge)<=J(X,ge,Ge)?ne:ge;const Je=Re.findIndex(He=>X<=He),qe=Re[Je-1],Ke=Re[Je];return X-qe<=Ke-X?qe:Ke}function ie(){return uo(r)===!0||F.value!==null&&(F.value.values.length===0||b.value==="hour"&&k.value!==!0&&M.value[y.value===!0?"am":"pm"].values.length===0)}function N(){const X=p.value,{top:ne,left:ge,width:Re}=X.getBoundingClientRect(),Ge=Re/2;return{top:ne+Ge,left:ge+Ge,dist:.7*Ge}}function z(X){if(ie()!==!0){if(X.isFirst===!0)return h=N(),void(d=K(X.evt,h));d=K(X.evt,h,d),X.isFinal===!0&&(h=!1,d=null,B())}}function B(){b.value==="hour"?b.value="minute":t.withSeconds&&b.value==="minute"&&(b.value="second")}function K(X,ne,ge){const Re=Ai(X),Ge=Math.abs(Re.top-ne.top),Je=Math.sqrt(Math.pow(Math.abs(Re.top-ne.top),2)+Math.pow(Math.abs(Re.left-ne.left),2));let qe,Ke=Math.asin(Ge/Je)*(180/Math.PI);if(Ke=Re.top<ne.top?ne.left<Re.left?90-Ke:270+Ke:ne.left<Re.left?Ke+90:270-Ke,b.value==="hour"){if(qe=Ke/30,M.value!==null){const He=k.value!==!0?y.value===!0:M.value.am.values.length!==0&&M.value.pm.values.length!==0?Je>=ne.dist:M.value.am.values.length!==0;qe=te(qe+(He===!0?0:12),M.value[He===!0?"am":"pm"])}else qe=Math.round(qe),k.value===!0?Je<ne.dist?qe<12&&(qe+=12):qe===12&&(qe=0):y.value===!0&&qe===12?qe=0:y.value===!1&&qe!==12&&(qe+=12);k.value===!0&&(y.value=qe<12)}else qe=Math.round(Ke/6)%60,b.value==="minute"&&q.value!==null?qe=te(qe,q.value):b.value==="second"&&P.value!==null&&(qe=te(qe,P.value));return ge!==qe&&Ve[b.value](qe),qe}ae(()=>t.modelValue,X=>{const ne=ql(X,f.value,g.value,t.calendar,_.value);ne.dateHash===m.value.dateHash&&ne.timeHash===m.value.timeHash||(m.value=ne,ne.hour===null?b.value="hour":y.value=ne.hour<12)}),ae([f,g],()=>{ct(()=>{Se()})});const U={hour(){b.value="hour"},minute(){b.value="minute"},second(){b.value="second"}};function W(X){X.keyCode===13&&oe()}function ve(X){X.keyCode===13&&he()}function ce(X){ie()!==!0&&(n.platform.is.desktop!==!0&&K(X,N()),B())}function fe(X){ie()!==!0&&K(X,N())}function pe(X){if(X.keyCode===13)b.value="hour";else if([37,39].includes(X.keyCode)){const ne=X.keyCode===37?-1:1;if(M.value!==null){const ge=k.value===!0?M.value.values:M.value[y.value===!0?"am":"pm"].values;if(ge.length===0)return;if(m.value.hour===null)me(ge[0]);else{const Re=(ge.length+ge.indexOf(m.value.hour)+ne)%ge.length;me(ge[Re])}}else{const ge=k.value===!0?24:12;me((k.value!==!0&&y.value===!1?12:0)+(24+(m.value.hour===null?-ne:m.value.hour)+ne)%ge)}}}function Ee(X){if(X.keyCode===13)b.value="minute";else if([37,39].includes(X.keyCode)){const ne=X.keyCode===37?-1:1;if(q.value!==null){const ge=q.value.values;if(ge.length===0)return;if(m.value.minute===null)we(ge[0]);else{const Re=(ge.length+ge.indexOf(m.value.minute)+ne)%ge.length;we(ge[Re])}}else we((60+(m.value.minute===null?-ne:m.value.minute)+ne)%60)}}function Le(X){if(X.keyCode===13)b.value="second";else if([37,39].includes(X.keyCode)){const ne=X.keyCode===37?-1:1;if(P.value!==null){const ge=P.value.values;if(ge.length===0)return;if(m.value.seconds===null)Pe(ge[0]);else{const Re=(ge.length+ge.indexOf(m.value.second)+ne)%ge.length;Pe(ge[Re])}}else Pe((60+(m.value.second===null?-ne:m.value.second)+ne)%60)}}function me(X){m.value.hour!==X&&(m.value.hour=X,se())}function we(X){m.value.minute!==X&&(m.value.minute=X,se())}function Pe(X){m.value.second!==X&&(m.value.second=X,se())}const Ve={hour:me,minute:we,second:Pe};function oe(){y.value===!1&&(y.value=!0,m.value.hour!==null&&(m.value.hour-=12,se()))}function he(){y.value===!0&&(y.value=!1,m.value.hour!==null&&(m.value.hour+=12,se()))}function Z(X){const ne=t.modelValue;b.value!==X&&ne!=null&&ne!==""&&typeof ne!="string"&&(b.value=X)}function se(){return I.value!==null&&I.value(m.value.hour)!==!0?(m.value=ql(),void Z("hour")):T.value!==null&&T.value(m.value.minute)!==!0?(m.value.minute=null,m.value.second=null,void Z("minute")):t.withSeconds===!0&&R.value!==null&&R.value(m.value.second)!==!0?(m.value.second=null,void Z("second")):void(m.value.hour===null||m.value.minute===null||t.withSeconds===!0&&m.value.second===null||Se())}function Se(X){const ne=Object.assign({...m.value},X),ge=t.calendar==="persian"?bt(ne.hour)+":"+bt(ne.minute)+(t.withSeconds===!0?":"+bt(ne.second):""):KS(new Date(ne.year,ne.month===null?null:ne.month-1,ne.day,ne.hour,ne.minute,ne.second,ne.millisecond),f.value,g.value,ne.year,ne.timezoneOffset);ne.changed=ge!==t.modelValue,i("update:modelValue",ge,ne)}function Ie(){const X=[S("div",{class:"q-time__link "+(b.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onClick:U.hour,onKeyup:pe},C.value.hour),S("div",":"),S("div",A.value===!0?{class:"q-time__link "+(b.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onKeyup:Ee,onClick:U.minute}:{class:"q-time__link"},C.value.minute)];t.withSeconds===!0&&X.push(S("div",":"),S("div",E.value===!0?{class:"q-time__link "+(b.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onKeyup:Le,onClick:U.second}:{class:"q-time__link"},C.value.second));const ne=[S("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},X)];return k.value===!1&&ne.push(S("div",{class:"q-time__header-ampm column items-between no-wrap"},[S("div",{class:"q-time__link "+(y.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onClick:oe,onKeyup:W},"AM"),S("div",{class:"q-time__link "+(y.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onClick:he,onKeyup:ve},"PM")])),S("div",{class:"q-time__header flex flex-center no-wrap "+s.value},ne)}function Ae(){const X=m.value[b.value];return S("div",{class:"q-time__content col relative-position"},[S(di,{name:"q-transition--scale"},()=>S("div",{key:"clock"+b.value,class:"q-time__container-parent absolute-full"},[S("div",{ref:p,class:"q-time__container-child fit overflow-hidden"},[Fi(S("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:ce,onMousedown:fe},[S("div",{class:"q-time__clock-circle fit"},[S("div",{class:"q-time__clock-pointer"+(m.value[b.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:L.value}),j.value.map(ne=>S("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${ne.index}`+(ne.val===X?" q-time__clock-position--active "+s.value:ne.disable===!0?" q-time__clock-position--disable":"")},[S("span",ne.label)]))])]),V.value)])])),t.nowBtn===!0?S(_t,{class:"q-time__now-button absolute",icon:n.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:a.value,onClick:O}):null])}return r.proxy.setNow=O,()=>{const X=[Ae()],ne=De(e.default);return ne!==void 0&&X.push(S("div",{class:"q-time__actions"},ne)),t.name!==void 0&&t.disable!==!0&&c(X,"push"),S("div",{class:x.value,tabindex:-1},[Ie(),S("div",{class:"q-time__main col overflow-auto"},X)])}}}),ue({name:"QTimeline",props:{...ft,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},setup(t,{slots:e}){const i=Ce(),r=gt(t,i.proxy.$q);vo(a_,t);const n=w(()=>`q-timeline q-timeline--${t.layout} q-timeline--${t.layout}--${t.side}`+(r.value===!0?" q-timeline--dark":""));return()=>S("ul",{class:n.value},De(e.default))}}),ue({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(t,{slots:e}){const i=Hi(a_,wt);if(i===wt)return wt;const r=w(()=>`q-timeline__entry q-timeline__entry--${t.side}`+(t.icon!==void 0||t.avatar!==void 0?" q-timeline__entry--icon":"")),n=w(()=>`q-timeline__dot text-${t.color||i.color}`),o=w(()=>i.layout==="comfortable"&&i.side==="left");return()=>{const a=Nu(e.default,[]);if(t.body!==void 0&&a.unshift(t.body),t.heading===!0){const u=[S("div"),S("div"),S(t.tag,{class:"q-timeline__heading-title"},a)];return S("div",{class:"q-timeline__heading"},o.value===!0?u.reverse():u)}let s;t.icon!==void 0?s=[S(vt,{class:"row items-center justify-center",name:t.icon})]:t.avatar!==void 0&&(s=[S("img",{class:"q-timeline__dot-img",src:t.avatar})]);const l=[S("div",{class:"q-timeline__subtitle"},[S("span",{},De(e.subtitle,[t.subtitle]))]),S("div",{class:n.value},s),S("div",{class:"q-timeline__content"},[S("h6",{class:"q-timeline__title"},De(e.title,[t.title]))].concat(a))];return S("li",{class:r.value},o.value===!0?l.reverse():l)}}}),ue({name:"QToolbar",props:{inset:Boolean},setup(t,{slots:e}){const i=w(()=>"q-toolbar row no-wrap items-center"+(t.inset===!0?" q-toolbar--inset":""));return()=>S("div",{class:i.value,role:"toolbar"},De(e.default))}}),ue({name:"QToolbarTitle",props:{shrink:Boolean},setup(t,{slots:e}){const i=w(()=>"q-toolbar__title ellipsis"+(t.shrink===!0?" col-shrink":""));return()=>S("div",{class:i.value},De(e.default))}});var QI=["none","strict","leaf","leaf-filtered"],JI=ue({name:"QTree",props:{...ft,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:t=>QI.includes(t)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:{},noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(t,{slots:e,emit:i}){const{proxy:r}=Ce(),{$q:n}=r,o=gt(t,n),a=G({}),s=G(t.ticked||[]),l=G(t.expanded||[]);let u={};Tu(()=>{u={}});const c=w(()=>"q-tree q-tree--"+(t.dense===!0?"dense":"standard")+(t.noConnectors===!0?" q-tree--no-connectors":"")+(o.value===!0?" q-tree--dark":"")+(t.color!==void 0?` text-${t.color}`:"")),h=w(()=>t.selected!==void 0),d=w(()=>t.icon||n.iconSet.tree.icon),p=w(()=>t.controlColor||t.color),f=w(()=>t.textColor!==void 0?` text-${t.textColor}`:""),g=w(()=>{const M=t.selectedColor||t.color;return M?` text-${M}`:""}),_=w(()=>t.filterMethod!==void 0?t.filterMethod:(M,q)=>{const P=q.toLowerCase();return M[t.labelKey]&&M[t.labelKey].toLowerCase().indexOf(P)!==-1}),v=w(()=>{const M={},q=(P,F)=>{const j=P.tickStrategy||(F?F.tickStrategy:t.tickStrategy),V=P[t.nodeKey],O=P[t.childrenKey]&&Array.isArray(P[t.childrenKey])&&P[t.childrenKey].length!==0,$=P.disabled!==!0&&h.value===!0&&P.selectable!==!1,J=P.disabled!==!0&&P.expandable!==!1,te=j!=="none",ie=j==="strict",N=j==="leaf-filtered",z=j==="leaf"||j==="leaf-filtered";let B=P.disabled!==!0&&P.tickable!==!1;z===!0&&B===!0&&F&&F.tickable!==!0&&(B=!1);let K=P.lazy;K===!0&&a.value[V]!==void 0&&Array.isArray(P[t.childrenKey])===!0&&(K=a.value[V]);const U={key:V,parent:F,isParent:O,lazy:K,disabled:P.disabled,link:P.disabled!==!0&&($===!0||J===!0&&(O===!0||K===!0)),children:[],matchesFilter:!t.filter||_.value(P,t.filter),selected:V===t.selected&&$===!0,selectable:$,expanded:O===!0&&l.value.includes(V),expandable:J,noTick:P.noTick===!0||ie!==!0&&K&&K!=="loaded",tickable:B,tickStrategy:j,hasTicking:te,strictTicking:ie,leafFilteredTicking:N,leafTicking:z,ticked:(ie===!0||O!==!0)&&s.value.includes(V)};if(M[V]=U,O===!0&&(U.children=P[t.childrenKey].map(W=>q(W,U)),t.filter&&(U.matchesFilter!==!0?U.matchesFilter=U.children.some(W=>W.matchesFilter):U.noTick!==!0&&U.disabled!==!0&&U.tickable===!0&&N===!0&&U.children.every(W=>W.matchesFilter!==!0||W.noTick===!0||W.tickable!==!0)===!0&&(U.tickable=!1)),U.matchesFilter===!0&&(U.noTick!==!0&&ie!==!0&&U.children.every(W=>W.noTick)===!0&&(U.noTick=!0),z))){if(U.ticked=!1,U.indeterminate=U.children.some(W=>W.indeterminate===!0),U.tickable=U.tickable===!0&&U.children.some(W=>W.tickable),U.indeterminate!==!0){const W=U.children.reduce((ve,ce)=>ce.ticked===!0?ve+1:ve,0);W===U.children.length?U.ticked=!0:W>0&&(U.indeterminate=!0)}U.indeterminate===!0&&(U.indeterminateNextState=U.children.every(W=>W.tickable!==!0||W.ticked!==!0))}return U};return t.nodes.forEach(P=>q(P,null)),M});function b(M){const q=[].reduce,P=(F,j)=>F||!j?F:Array.isArray(j)===!0?q.call(Object(j),P,F):j[t.nodeKey]===M?j:j[t.childrenKey]?P(null,j[t.childrenKey]):void 0;return P(null,t.nodes)}function m(){const M=[],q=P=>{P[t.childrenKey]&&P[t.childrenKey].length!==0&&P.expandable!==!1&&P.disabled!==!0&&(M.push(P[t.nodeKey]),P[t.childrenKey].forEach(q))};t.nodes.forEach(q),t.expanded!==void 0?i("update:expanded",M):l.value=M}function y(M,q,P=b(M),F=v.value[M]){if(F.lazy&&F.lazy!=="loaded"){if(F.lazy==="loading")return;a.value[M]="loading",Array.isArray(P[t.childrenKey])!==!0&&(P[t.childrenKey]=[]),i("lazyLoad",{node:P,key:M,done:j=>{a.value[M]="loaded",P[t.childrenKey]=Array.isArray(j)===!0?j:[],ct(()=>{const V=v.value[M];V&&V.isParent===!0&&x(M,!0)})},fail:()=>{delete a.value[M],P[t.childrenKey].length===0&&delete P[t.childrenKey]}})}else F.isParent===!0&&F.expandable===!0&&x(M,q)}function x(M,q){let P=l.value;const F=t.expanded!==void 0;if(F===!0&&(P=P.slice()),q){if(t.accordion&&v.value[M]){const j=[];v.value[M].parent?v.value[M].parent.children.forEach(V=>{V.key!==M&&V.expandable===!0&&j.push(V.key)}):t.nodes.forEach(V=>{const O=V[t.nodeKey];O!==M&&j.push(O)}),j.length!==0&&(P=P.filter(V=>j.includes(V)===!1))}P=P.concat([M]).filter((j,V,O)=>O.indexOf(j)===V)}else P=P.filter(j=>j!==M);F===!0?i("update:expanded",P):l.value=P}function C(M,q){let P=s.value;const F=t.ticked!==void 0;F===!0&&(P=P.slice()),P=q?P.concat(M).filter((j,V,O)=>O.indexOf(j)===V):P.filter(j=>M.includes(j)===!1),F===!0&&i("update:ticked",P)}function k(M){return(t.filter?M.filter(q=>v.value[q[t.nodeKey]].matchesFilter):M).map(q=>function(P){const F=P[t.nodeKey],j=v.value[F],V=P.header&&e[`header-${P.header}`]||e["default-header"],O=j.isParent===!0?k(P[t.childrenKey]):[],$=O.length!==0||j.lazy&&j.lazy!=="loaded";let J=P.body&&e[`body-${P.body}`]||e["default-body"];const te=V!==void 0||J!==void 0?function(ie,N,z){const B={tree:r,node:ie,key:z,color:t.color,dark:o.value};return pi(B,"expanded",()=>N.expanded,K=>{K!==N.expanded&&y(z,K)}),pi(B,"ticked",()=>N.ticked,K=>{K!==N.ticked&&C([z],K)}),B}(P,j,F):null;return J!==void 0&&(J=S("div",{class:"q-tree__node-body relative-position"},[S("div",{class:f.value},[J(te)])])),S("div",{key:F,class:"q-tree__node relative-position q-tree__node--"+($===!0?"parent":"child")},[S("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(j.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(j.selected===!0?" q-tree__node--selected":"")+(j.disabled===!0?" q-tree__node--disabled":""),tabindex:j.link===!0?0:-1,ariaExpanded:O.length>0?j.expanded:null,role:"treeitem",onClick:ie=>{T(P,j,ie)},onKeypress(ie){ha(ie)!==!0&&(ie.keyCode===13?T(P,j,ie,!0):ie.keyCode===32&&R(P,j,ie,!0))}},[S("div",{class:"q-focus-helper",tabindex:-1,ref:ie=>{u[j.key]=ie}}),j.lazy==="loading"?S(Dr,{class:"q-tree__spinner",color:p.value}):$===!0?S(vt,{class:"q-tree__arrow"+(j.expanded===!0?" q-tree__arrow--rotate":""),name:d.value,onClick(ie){R(P,j,ie)}}):null,j.hasTicking===!0&&j.noTick!==!0?S(Hl,{class:"q-tree__tickbox",modelValue:j.indeterminate===!0?null:j.ticked,color:p.value,dark:o.value,dense:!0,keepColor:!0,disable:j.tickable!==!0,onKeydown:Qe,"onUpdate:modelValue":ie=>{(function(N,z){if(N.indeterminate===!0&&(z=N.indeterminateNextState),N.strictTicking)C([N.key],z);else if(N.leafTicking){const B=[],K=U=>{U.isParent?(z!==!0&&U.noTick!==!0&&U.tickable===!0&&B.push(U.key),U.leafTicking===!0&&U.children.forEach(K)):U.noTick===!0||U.tickable!==!0||U.leafFilteredTicking===!0&&U.matchesFilter!==!0||B.push(U.key)};K(N),C(B,z)}})(j,ie)}}):null,S("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(j.selected===!0?g.value:f.value)},[V?V(te):[L(P),S("div",P[t.labelKey])]])]),$===!0?t.noTransition===!0?j.expanded===!0?S("div",{class:"q-tree__node-collapsible"+f.value,key:`${F}__q`},[J,S("div",{class:"q-tree__children"+(j.disabled===!0?" q-tree__node--disabled":""),role:"group"},O)]):null:S(v0,{duration:t.duration,onShow:A,onHide:E},()=>Fi(S("div",{class:"q-tree__node-collapsible"+f.value,key:`${F}__q`},[J,S("div",{class:"q-tree__children"+(j.disabled===!0?" q-tree__node--disabled":""),role:"group"},O)]),[[gh,j.expanded]])):J])}(q))}function L(M){if(M.icon!==void 0)return S(vt,{class:"q-tree__icon q-mr-sm",name:M.icon,color:M.iconColor});const q=M.img||M.avatar;return q?S("img",{class:`q-tree__${M.img?"img":"avatar"} q-mr-sm`,src:q}):void 0}function A(){i("afterShow")}function E(){i("afterHide")}function I(M){const q=u[M];q&&q.focus()}function T(M,q,P,F){F!==!0&&q.selectable!==!1&&I(q.key),h.value&&q.selectable?t.noSelectionUnset===!1?i("update:selected",q.key!==t.selected?q.key:null):q.key!==t.selected&&i("update:selected",q.key===void 0?null:q.key):R(M,q,P,F),typeof M.handler=="function"&&M.handler(M)}function R(M,q,P,F){P!==void 0&&Qe(P),F!==!0&&q.selectable!==!1&&I(q.key),y(q.key,!q.expanded,M,q)}return ae(()=>t.ticked,M=>{s.value=M}),ae(()=>t.expanded,M=>{l.value=M}),t.defaultExpandAll===!0&&m(),Object.assign(r,{getNodeByKey:b,getTickedNodes:function(){return s.value.map(M=>b(M))},getExpandedNodes:function(){return l.value.map(M=>b(M))},isExpanded:function(M){return!(!M||!v.value[M])&&v.value[M].expanded},collapseAll:function(){t.expanded!==void 0?i("update:expanded",[]):l.value=[]},expandAll:m,setExpanded:y,isTicked:function(M){return!(!M||!v.value[M])&&v.value[M].ticked},setTicked:C}),()=>{const M=k(t.nodes);return S("div",{class:c.value,role:"tree"},M.length===0?t.filter?t.noResultsLabel||n.lang.tree.noResults:t.noNodesLabel||n.lang.tree.noNodes:M)}}});function mb(t){return(100*t).toFixed(2)+"%"}var eP={...ft,...aC,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},xC=[...sC,"start","finish","added","removed"],tP=()=>!0;function wC(t){const e={};return t.forEach(i=>{e[i]=tP}),e}var iP=wC(xC);function gn(t){return typeof t=="function"?t:()=>t}var rP={name:"QUploader",props:{url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>t=>t.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},emits:["factoryFailed","uploaded","failed","uploading"],injectPlugin:function({props:t,emit:e,helpers:i}){const r=G([]),n=G([]),o=G(0),a=w(()=>({url:gn(t.url),method:gn(t.method),headers:gn(t.headers),formFields:gn(t.formFields),fieldName:gn(t.fieldName),withCredentials:gn(t.withCredentials),sendRaw:gn(t.sendRaw),batch:gn(t.batch)}));let s;function l(c){if(o.value++,typeof t.factory!="function")return void u(c,{});const h=t.factory(c);if(h)if(typeof h.catch=="function"&&typeof h.then=="function"){n.value.push(h);const d=p=>{i.isAlive()===!0&&(n.value=n.value.filter(f=>f!==h),n.value.length===0&&(s=!1),i.queuedFiles.value=i.queuedFiles.value.concat(c),c.forEach(f=>{i.updateFileStatus(f,"failed")}),e("factoryFailed",p,c),o.value--)};h.then(p=>{s===!0?d(new Error("Aborted")):i.isAlive()===!0&&(n.value=n.value.filter(f=>f!==h),u(c,p))}).catch(d)}else u(c,h||{});else e("factoryFailed",new Error("QUploader: factory() does not return properly"),c),o.value--}function u(c,h){const d=new FormData,p=new XMLHttpRequest,f=(L,A)=>h[L]!==void 0?gn(h[L])(A):a.value[L](A),g=f("url",c);if(!g)return void o.value--;const _=f("formFields",c);_!==void 0&&_.forEach(L=>{d.append(L.name,L.value)});let v,b=0,m=0,y=0,x=0;p.upload.addEventListener("progress",L=>{if(v===!0)return;const A=Math.min(x,L.loaded);i.uploadedSize.value+=A-y,y=A;let E=y-m;for(let I=b;E>0&&I<c.length;I++){const T=c[I];if(!(E>T.size))return void i.updateFileStatus(T,"uploading",E);E-=T.size,b++,m+=T.size,i.updateFileStatus(T,"uploading",T.size)}},!1),p.onreadystatechange=()=>{p.readyState<4||(p.status&&p.status<400?(i.uploadedFiles.value=i.uploadedFiles.value.concat(c),c.forEach(L=>{i.updateFileStatus(L,"uploaded")}),e("uploaded",{files:c,xhr:p})):(v=!0,i.uploadedSize.value-=y,i.queuedFiles.value=i.queuedFiles.value.concat(c),c.forEach(L=>{i.updateFileStatus(L,"failed")}),e("failed",{files:c,xhr:p})),o.value--,r.value=r.value.filter(L=>L!==p))},p.open(f("method",c),g),f("withCredentials",c)===!0&&(p.withCredentials=!0);const C=f("headers",c);C!==void 0&&C.forEach(L=>{p.setRequestHeader(L.name,L.value)});const k=f("sendRaw",c);c.forEach(L=>{i.updateFileStatus(L,"uploading",0),k!==!0&&d.append(f("fieldName",L),L,L.name),L.xhr=p,L.__abort=()=>{p.abort()},x+=L.size}),e("uploading",{files:c,xhr:p}),r.value.push(p),k===!0?p.send(new Blob(c)):p.send(d)}return{isUploading:w(()=>o.value>0),isBusy:w(()=>n.value.length!==0),abort:function(){r.value.forEach(c=>{c.abort()}),n.value.length!==0&&(s=!0)},upload:function(){const c=i.queuedFiles.value.slice(0);i.queuedFiles.value=[],a.value.batch(c)?l(c):c.forEach(h=>{l([h])})}}}};function vb(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}(({name:t,props:e,emits:i,injectPlugin:r})=>{ue({name:t,props:{...eP,...e},emits:Ci(i)===!0?{...iP,...i}:[...xC,...i],setup:(n,{expose:o})=>function(a,s){const l=Ce(),{props:u,slots:c,emit:h,proxy:d}=l,{$q:p}=d,f=gt(u,p),g=w(()=>u.disable!==!0&&u.readonly!==!0),_=G(!1),v=G(null),b=G(null),m={files:G([]),queuedFiles:G([]),uploadedFiles:G([]),uploadedSize:G(0),updateFileStatus:function(ce,fe,pe){if(ce.__status=fe,fe==="idle")return ce.__uploaded=0,ce.__progress=0,ce.__sizeLabel=ym(ce.size),void(ce.__progressLabel="0.00%");fe!=="failed"&&(ce.__uploaded=fe==="uploaded"?ce.size:pe,ce.__progress=fe==="uploaded"?1:Math.min(.9999,ce.__uploaded/ce.size),ce.__progressLabel=mb(ce.__progress)),d.$forceUpdate()},isAlive:()=>uo(l)===!1},{pickFiles:y,addFiles:x,onDragover:C,onDragleave:k,processFiles:L,getDndNode:A,maxFilesNumber:E,maxTotalSizeNumber:I}=lC({editable:g,dnd:_,getFileInput:z,addFilesToQueue:B});Object.assign(m,a({props:u,slots:c,emit:h,helpers:m,exposeApi:ce=>{Object.assign(m,ce)}})),m.isBusy===void 0&&(m.isBusy=G(!1));const T=G(0),R=w(()=>T.value===0?0:m.uploadedSize.value/T.value),M=w(()=>mb(R.value)),q=w(()=>ym(T.value)),P=w(()=>g.value===!0&&m.isUploading.value!==!0&&(u.multiple===!0||m.queuedFiles.value.length===0)&&(u.maxFiles===void 0||m.files.value.length<E.value)&&(u.maxTotalSize===void 0||T.value<I.value)),F=w(()=>g.value===!0&&m.isBusy.value!==!0&&m.isUploading.value!==!0&&m.queuedFiles.value.length!==0);vo(l_,W);const j=w(()=>"q-uploader column no-wrap"+(f.value===!0?" q-uploader--dark q-dark":"")+(u.bordered===!0?" q-uploader--bordered":"")+(u.square===!0?" q-uploader--square no-border-radius":"")+(u.flat===!0?" q-uploader--flat no-shadow":"")+(u.disable===!0?" disabled q-uploader--disable":"")+(_.value===!0?" q-uploader--dnd":"")),V=w(()=>"q-uploader__header"+(u.color!==void 0?` bg-${u.color}`:"")+(u.textColor!==void 0?` text-${u.textColor}`:""));function O(){u.disable===!1&&(m.abort(),m.uploadedSize.value=0,T.value=0,N(),m.files.value=[],m.queuedFiles.value=[],m.uploadedFiles.value=[])}function $(){u.disable===!1&&te(["uploaded"],()=>{m.uploadedFiles.value=[]})}function J(){te(["idle","failed"],({size:ce})=>{T.value-=ce,m.queuedFiles.value=[]})}function te(ce,fe){if(u.disable===!0)return;const pe={files:[],size:0},Ee=m.files.value.filter(Le=>ce.indexOf(Le.__status)===-1||(pe.size+=Le.size,pe.files.push(Le),Le.__img!==void 0&&window.URL.revokeObjectURL(Le.__img.src),!1));pe.files.length!==0&&(m.files.value=Ee,fe(pe),h("removed",pe.files))}function ie(ce){u.disable||(ce.__status==="uploaded"?m.uploadedFiles.value=m.uploadedFiles.value.filter(fe=>fe.__key!==ce.__key):ce.__status==="uploading"?ce.__abort():T.value-=ce.size,m.files.value=m.files.value.filter(fe=>fe.__key!==ce.__key||(fe.__img!==void 0&&window.URL.revokeObjectURL(fe.__img.src),!1)),m.queuedFiles.value=m.queuedFiles.value.filter(fe=>fe.__key!==ce.__key),h("removed",[ce]))}function N(){m.files.value.forEach(ce=>{ce.__img!==void 0&&window.URL.revokeObjectURL(ce.__img.src)})}function z(){return b.value||v.value.getElementsByClassName("q-uploader__input")[0]}function B(ce,fe){const pe=L(ce,fe,m.files.value,!0),Ee=z();Ee!=null&&(Ee.value=""),pe!==void 0&&(pe.forEach(Le=>{if(m.updateFileStatus(Le,"idle"),T.value+=Le.size,u.noThumbnails!==!0&&Le.type.toUpperCase().startsWith("IMAGE")){const me=new Image;me.src=window.URL.createObjectURL(Le),Le.__img=me}}),m.files.value=m.files.value.concat(pe),m.queuedFiles.value=m.queuedFiles.value.concat(pe),h("added",pe),u.autoUpload===!0&&m.upload())}function K(){F.value===!0&&m.upload()}function U(ce,fe,pe){if(ce===!0){const Ee={type:"a",key:fe,icon:p.iconSet.uploader[fe],flat:!0,dense:!0};let Le;return fe==="add"?(Ee.onClick=y,Le=W):Ee.onClick=pe,S(_t,Ee,Le)}}function W(){return S("input",{ref:b,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:u.accept,multiple:u.multiple===!0?"multiple":void 0,capture:u.capture,onMousedown:Ht,onClick:y,onChange:B})}ae(m.isUploading,(ce,fe)=>{fe===!1&&ce===!0?h("start"):fe===!0&&ce===!1&&h("finish")}),st(()=>{m.isUploading.value===!0&&m.abort(),m.files.value.length!==0&&N()});const ve={};for(const ce in m)TM(m[ce])===!0?pi(ve,ce,()=>m[ce].value):ve[ce]=m[ce];return Object.assign(ve,{upload:K,reset:O,removeUploadedFiles:$,removeQueuedFiles:J,removeFile:ie,pickFiles:y,addFiles:x}),U2(ve,{canAddFiles:()=>P.value,canUpload:()=>F.value,uploadSizeLabel:()=>q.value,uploadProgressLabel:()=>M.value}),s({...m,upload:K,reset:O,removeUploadedFiles:$,removeQueuedFiles:J,removeFile:ie,pickFiles:y,addFiles:x,canAddFiles:P,canUpload:F,uploadSizeLabel:q,uploadProgressLabel:M}),()=>{const ce=[S("div",{class:V.value},c.header!==void 0?c.header(ve):[S("div",{class:"q-uploader__header-content column"},[S("div",{class:"flex flex-center no-wrap q-gutter-xs"},[U(m.queuedFiles.value.length!==0,"removeQueue",J),U(m.uploadedFiles.value.length!==0,"removeUploaded",$),m.isUploading.value===!0?S(Dr,{class:"q-uploader__spinner"}):null,S("div",{class:"col column justify-center"},[u.label!==void 0?S("div",{class:"q-uploader__title"},[u.label]):null,S("div",{class:"q-uploader__subtitle"},[q.value+" / "+M.value])]),U(P.value,"add"),U(u.hideUploadBtn===!1&&F.value===!0,"upload",m.upload),U(m.isUploading.value,"clear",m.abort)])])]),S("div",{class:"q-uploader__list scroll"},c.list!==void 0?c.list(ve):m.files.value.map(pe=>S("div",{key:pe.__key,class:"q-uploader__file relative-position"+(u.noThumbnails!==!0&&pe.__img!==void 0?" q-uploader__file--img":"")+(pe.__status==="failed"?" q-uploader__file--failed":pe.__status==="uploaded"?" q-uploader__file--uploaded":""),style:u.noThumbnails!==!0&&pe.__img!==void 0?{backgroundImage:'url("'+pe.__img.src+'")',backgroundSize:u.thumbnailFit}:null},[S("div",{class:"q-uploader__file-header row flex-center no-wrap"},[pe.__status==="failed"?S(vt,{class:"q-uploader__file-status",name:p.iconSet.type.negative,color:"negative"}):null,S("div",{class:"q-uploader__file-header-content col"},[S("div",{class:"q-uploader__title"},[pe.name]),S("div",{class:"q-uploader__subtitle row items-center no-wrap"},[pe.__sizeLabel+" / "+pe.__progressLabel])]),pe.__status==="uploading"?S(RS,{value:pe.__progress,min:0,max:1,indeterminate:pe.__progress===0}):S(_t,{round:!0,dense:!0,flat:!0,icon:p.iconSet.uploader[pe.__status==="uploaded"?"done":"clear"],onClick:()=>{ie(pe)}})])]))),A("uploader")];m.isBusy.value===!0&&ce.push(S("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[S(Dr)]));const fe={ref:v,class:j.value};return P.value===!0&&Object.assign(fe,{onDragover:C,onDragleave:k}),S("div",fe,ce)}}(r,o)})})(rP),ue({name:"QUploaderAddTrigger",setup(){const t=Hi(l_,wt);return t}}),ue({name:"QVideo",props:{...y0,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(t){const e=_0(t),i=w(()=>"q-video"+(t.ratio!==void 0?" q-video--responsive":""));return()=>S("div",{class:i.value,style:e.value},[S("iframe",{src:t.src,title:t.title,fetchpriority:t.fetchpriority,loading:t.loading,referrerpolicy:t.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}});var SC=Ar({name:"close-popup",beforeMount(t,{value:e}){const i={depth:vb(e),handler(r){i.depth!==0&&setTimeout(()=>{const n=function(o){return ds.find(a=>a.contentEl!==null&&a.contentEl.contains(o))}(t);n!==void 0&&function(o,a,s){for(;s!==0&&o!=null;){if(o.__qPortal===!0){if(s--,o.$options.name==="QMenu"){o=gS(o,a);continue}o.hide(a)}o=sh(o)}}(n,r,i.depth)})},handlerKey(r){gr(r,13)===!0&&i.handler(r)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:e,oldValue:i}){e!==i&&(t.__qclosepopup.depth=vb(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}}),nP=0,jc=void 0;function yb(t,e){jc===void 0&&((jc=document.createElement("div")).style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(jc));const i=t.getBoundingClientRect(),r=jc.getBoundingClientRect(),{marginLeft:n,marginRight:o,marginTop:a,marginBottom:s}=window.getComputedStyle(t),l=parseInt(n,10)+parseInt(o,10),u=parseInt(a,10)+parseInt(s,10);return{left:i.left-r.left,top:i.top-r.top,width:i.right-i.left,height:i.bottom-i.top,widthM:i.right-i.left+(e===!0?0:l),heightM:i.bottom-i.top+(e===!0?0:u),marginH:e===!0?l:0,marginV:e===!0?u:0}}function Nc(t){return{width:t.scrollWidth,height:t.scrollHeight}}var _b=["Top","Right","Bottom","Left"],bb=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],oP=/-block|-inline|block-|inline-/,aP=/(-block|-inline|block-|inline-).*:/;function xb(t,e){const i=window.getComputedStyle(t),r={};for(let n=0;n<e.length;n++){const o=e[n];if(i[o]==="")if(o==="cssText"){const a=i.length;let s="";for(let l=0;l<a;l++)oP.test(i[l])!==!0&&(s+=i[l]+": "+i[i[l]]+"; ");r[o]=s}else if(["borderWidth","borderStyle","borderColor"].indexOf(o)!==-1){const a=o.replace("border","");let s="";for(let l=0;l<_b.length;l++)s+=i["border"+_b[l]+a]+" ";r[o]=s}else if(o==="borderRadius"){let a="",s="";for(let l=0;l<bb.length;l++){const u=i[bb[l]].split(" ");a+=u[0]+" ",s+=(u[1]===void 0?u[0]:u[1])+" "}r[o]=a+"/ "+s}else r[o]=i[o];else r[o]=o==="cssText"?i[o].split(";").filter(a=>aP.test(a)!==!0).join(";"):i[o]}return r}var sP=["absolute","fixed","relative","sticky"];function wb(t){let e=t,i=0;for(;e!==null&&e!==document;){const{position:r,zIndex:n}=window.getComputedStyle(e),o=Number(n);o>i&&(e===t||sP.includes(r)===!0)&&(i=o),e=e.parentNode}return i}function Sb(t){const e=typeof t;return e==="function"?t():e==="string"?document.querySelector(t):t}function Cb(t){return t&&t.ownerDocument===document&&t.parentNode!==null}function lP(t){let e=()=>!1,i=!1,r=!0;const n={from:(o=t).from,to:o.to!==void 0?o.to:o.from};var o;const a=function(R){return typeof R=="number"?R={duration:R}:typeof R=="function"&&(R={onEnd:R}),{...R,waitFor:R.waitFor===void 0?0:R.waitFor,duration:isNaN(R.duration)===!0?300:parseInt(R.duration,10),easing:typeof R.easing=="string"&&R.easing.length!==0?R.easing:"ease-in-out",delay:isNaN(R.delay)===!0?0:parseInt(R.delay,10),fill:typeof R.fill=="string"&&R.fill.length!==0?R.fill:"none",resize:R.resize===!0,useCSS:R.useCSS===!0||R.usecss===!0,hideFromClone:R.hideFromClone===!0||R.hidefromclone===!0,keepToClone:R.keepToClone===!0||R.keeptoclone===!0,tween:R.tween===!0,tweenFromOpacity:isNaN(R.tweenFromOpacity)===!0?.6:parseFloat(R.tweenFromOpacity),tweenToOpacity:isNaN(R.tweenToOpacity)===!0?.5:parseFloat(R.tweenToOpacity)}}(t),s=Sb(n.from);if(Cb(s)!==!0)return e;let l,u,c,h;typeof s.qMorphCancel=="function"&&s.qMorphCancel();const d=s.parentNode,p=s.nextElementSibling,f=yb(s,a.resize),{width:g,height:_}=Nc(d),{borderWidth:v,borderStyle:b,borderColor:m,borderRadius:y,backgroundColor:x,transform:C,position:k,cssText:L}=xb(s,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),A=s.classList.toString(),E=s.style.cssText,I=s.cloneNode(!0),T=a.tween===!0?s.cloneNode(!0):void 0;return T!==void 0&&(T.className=T.classList.toString().split(" ").filter(R=>/^bg-/.test(R)===!1).join(" ")),a.hideFromClone===!0&&I.classList.add("q-morph--internal"),I.setAttribute("aria-hidden","true"),I.style.transition="none",I.style.animation="none",I.style.pointerEvents="none",d.insertBefore(I,p),s.qMorphCancel=()=>{i=!0,I.remove(),T!==void 0&&T.remove(),a.hideFromClone===!0&&I.classList.remove("q-morph--internal"),s.qMorphCancel=void 0},typeof t.onToggle=="function"&&t.onToggle(),requestAnimationFrame(()=>{const R=Sb(n.to);if(i===!0||Cb(R)!==!0)return void(typeof s.qMorphCancel=="function"&&s.qMorphCancel());s!==R&&typeof R.qMorphCancel=="function"&&R.qMorphCancel(),a.keepToClone!==!0&&R.classList.add("q-morph--internal"),I.classList.add("q-morph--internal");const{width:M,height:q}=Nc(d),{width:P,height:F}=Nc(R.parentNode);a.hideFromClone!==!0&&I.classList.remove("q-morph--internal"),R.qMorphCancel=()=>{i=!0,I.remove(),T!==void 0&&T.remove(),a.hideFromClone===!0&&I.classList.remove("q-morph--internal"),a.keepToClone!==!0&&R.classList.remove("q-morph--internal"),s.qMorphCancel=void 0,R.qMorphCancel=void 0};const j=()=>{if(i===!0)return void(typeof R.qMorphCancel=="function"&&R.qMorphCancel());a.hideFromClone!==!0&&(I.classList.add("q-morph--internal"),I.innerHTML="",I.style.left=0,I.style.right="unset",I.style.top=0,I.style.bottom="unset",I.style.transform="none"),a.keepToClone!==!0&&R.classList.remove("q-morph--internal");const V=R.parentNode,{width:O,height:$}=Nc(V),J=R.cloneNode(a.keepToClone);J.setAttribute("aria-hidden","true"),a.keepToClone!==!0&&(J.style.left=0,J.style.right="unset",J.style.top=0,J.style.bottom="unset",J.style.transform="none",J.style.pointerEvents="none"),J.classList.add("q-morph--internal");const te=R===s&&d===V?I:R.nextElementSibling;V.insertBefore(J,te);const{borderWidth:ie,borderStyle:N,borderColor:z,borderRadius:B,backgroundColor:K,transform:U,position:W,cssText:ve}=xb(R,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),ce=R.classList.toString(),fe=R.style.cssText;R.style.cssText=ve,R.style.transform="none",R.style.animation="none",R.style.transition="none",R.className=ce.split(" ").filter(qe=>/^bg-/.test(qe)===!1).join(" ");const pe=yb(R,a.resize),Ee=f.left-pe.left,Le=f.top-pe.top,me=f.width/(pe.width>0?pe.width:10),we=f.height/(pe.height>0?pe.height:100),Pe=g-M,Ve=_-q,oe=O-P,he=$-F,Z=Math.max(f.widthM,Pe),se=Math.max(f.heightM,Ve),Se=Math.max(pe.widthM,oe),Ie=Math.max(pe.heightM,he),Ae=s===R&&["absolute","fixed"].includes(W)===!1&&["absolute","fixed"].includes(k)===!1;let X=W==="fixed",ne=V;for(;X!==!0&&ne!==document;)X=window.getComputedStyle(ne).position==="fixed",ne=ne.parentNode;if(a.hideFromClone!==!0&&(I.style.display="block",I.style.flex="0 0 auto",I.style.opacity=0,I.style.minWidth="unset",I.style.maxWidth="unset",I.style.minHeight="unset",I.style.maxHeight="unset",I.classList.remove("q-morph--internal")),a.keepToClone!==!0&&(J.style.display="block",J.style.flex="0 0 auto",J.style.opacity=0,J.style.minWidth="unset",J.style.maxWidth="unset",J.style.minHeight="unset",J.style.maxHeight="unset"),J.classList.remove("q-morph--internal"),typeof a.classes=="string"&&(R.className+=" "+a.classes),typeof a.style=="string")R.style.cssText+=" "+a.style;else if(Ci(a.style)===!0)for(const qe in a.style)R.style[qe]=a.style[qe];const ge=wb(I),Re=wb(R),Ge=X===!0?document.documentElement:{scrollLeft:0,scrollTop:0};R.style.position=X===!0?"fixed":"absolute",R.style.left=pe.left-Ge.scrollLeft+"px",R.style.right="unset",R.style.top=pe.top-Ge.scrollTop+"px",R.style.margin=0,a.resize===!0&&(R.style.minWidth="unset",R.style.maxWidth="unset",R.style.minHeight="unset",R.style.maxHeight="unset",R.style.overflow="hidden",R.style.overflowX="hidden",R.style.overflowY="hidden"),document.body.appendChild(R),T!==void 0&&(T.style.cssText=L,T.style.transform="none",T.style.animation="none",T.style.transition="none",T.style.position=R.style.position,T.style.left=f.left-Ge.scrollLeft+"px",T.style.right="unset",T.style.top=f.top-Ge.scrollTop+"px",T.style.margin=0,T.style.pointerEvents="none",a.resize===!0&&(T.style.minWidth="unset",T.style.maxWidth="unset",T.style.minHeight="unset",T.style.maxHeight="unset",T.style.overflow="hidden",T.style.overflowX="hidden",T.style.overflowY="hidden"),document.body.appendChild(T));const Je=qe=>{s===R&&r!==!0?(R.style.cssText=E,R.className=A):(R.style.cssText=fe,R.className=ce),J.parentNode===V&&V.insertBefore(R,J),I.remove(),J.remove(),T!==void 0&&T.remove(),e=()=>!1,s.qMorphCancel=void 0,R.qMorphCancel=void 0,typeof a.onEnd=="function"&&a.onEnd(r===!0?"to":"from",qe===!0)};if(a.useCSS!==!0&&typeof R.animate=="function"){const qe=a.resize===!0?{transform:`translate(${Ee}px, ${Le}px)`,width:`${Z}px`,height:`${se}px`}:{transform:`translate(${Ee}px, ${Le}px) scale(${me}, ${we})`},Ke=a.resize===!0?{width:`${Se}px`,height:`${Ie}px`}:{},He=a.resize===!0?{width:`${Z}px`,height:`${se}px`}:{},ee=a.resize===!0?{transform:`translate(${-1*Ee}px, ${-1*Le}px)`,width:`${Se}px`,height:`${Ie}px`}:{transform:`translate(${-1*Ee}px, ${-1*Le}px) scale(${1/me}, ${1/we})`},Me=T!==void 0?{opacity:a.tweenToOpacity}:{backgroundColor:x},be=T!==void 0?{opacity:1}:{backgroundColor:K};h=R.animate([{margin:0,borderWidth:v,borderStyle:b,borderColor:m,borderRadius:y,zIndex:ge,transformOrigin:"0 0",...qe,...Me},{margin:0,borderWidth:ie,borderStyle:N,borderColor:z,borderRadius:B,zIndex:Re,transformOrigin:"0 0",transform:U,...Ke,...be}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay}),u=T===void 0?void 0:T.animate([{opacity:a.tweenFromOpacity,margin:0,borderWidth:v,borderStyle:b,borderColor:m,borderRadius:y,zIndex:ge,transformOrigin:"0 0",transform:C,...He},{opacity:0,margin:0,borderWidth:ie,borderStyle:N,borderColor:z,borderRadius:B,zIndex:Re,transformOrigin:"0 0",...ee}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay}),l=a.hideFromClone===!0||Ae===!0?void 0:I.animate([{margin:`${Ve<0?Ve/2:0}px ${Pe<0?Pe/2:0}px`,width:`${Z+f.marginH}px`,height:`${se+f.marginV}px`},{margin:0,width:0,height:0}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay}),c=a.keepToClone===!0?void 0:J.animate([Ae===!0?{margin:`${Ve<0?Ve/2:0}px ${Pe<0?Pe/2:0}px`,width:`${Z+f.marginH}px`,height:`${se+f.marginV}px`}:{margin:0,width:0,height:0},{margin:`${he<0?he/2:0}px ${oe<0?oe/2:0}px`,width:`${Se+pe.marginH}px`,height:`${Ie+pe.marginV}px`}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay});const ye=xe=>{l!==void 0&&l.cancel(),u!==void 0&&u.cancel(),c!==void 0&&c.cancel(),h.cancel(),h.removeEventListener("finish",ye),h.removeEventListener("cancel",ye),Je(xe),l=void 0,u=void 0,c=void 0,h=void 0};s.qMorphCancel=()=>{s.qMorphCancel=void 0,i=!0,ye()},R.qMorphCancel=()=>{R.qMorphCancel=void 0,i=!0,ye()},h.addEventListener("finish",ye),h.addEventListener("cancel",ye),e=xe=>i!==!0&&h!==void 0&&(xe===!0?(ye(!0),!0):(r=r!==!0,l!==void 0&&l.reverse(),u!==void 0&&u.reverse(),c!==void 0&&c.reverse(),h.reverse(),!0))}else{const qe="q-morph-anim-"+ ++nP,Ke=document.createElement("style"),He=a.resize===!0?`
            transform: translate(${Ee}px, ${Le}px);
            width: ${Z}px;
            height: ${se}px;
          `:`transform: translate(${Ee}px, ${Le}px) scale(${me}, ${we});`,ee=a.resize===!0?`
            width: ${Se}px;
            height: ${Ie}px;
          `:"",Me=a.resize===!0?`
            width: ${Z}px;
            height: ${se}px;
          `:"",be=a.resize===!0?`
            transform: translate(${-1*Ee}px, ${-1*Le}px);
            width: ${Se}px;
            height: ${Ie}px;
          `:`transform: translate(${-1*Ee}px, ${-1*Le}px) scale(${1/me}, ${1/we});`,ye=T!==void 0?`opacity: ${a.tweenToOpacity};`:`background-color: ${x};`,xe=T!==void 0?"opacity: 1;":`background-color: ${K};`,D=T===void 0?"":`
            @keyframes ${qe}-from-tween {
              0% {
                opacity: ${a.tweenFromOpacity};
                margin: 0;
                border-width: ${v};
                border-style: ${b};
                border-color: ${m};
                border-radius: ${y};
                z-index: ${ge};
                transform-origin: 0 0;
                transform: ${C};
                ${Me}
              }

              100% {
                opacity: 0;
                margin: 0;
                border-width: ${ie};
                border-style: ${N};
                border-color: ${z};
                border-radius: ${B};
                z-index: ${Re};
                transform-origin: 0 0;
                ${be}
              }
            }
          `,H=a.hideFromClone===!0||Ae===!0?"":`
            @keyframes ${qe}-from {
              0% {
                margin: ${Ve<0?Ve/2:0}px ${Pe<0?Pe/2:0}px;
                width: ${Z+f.marginH}px;
                height: ${se+f.marginV}px;
              }

              100% {
                margin: 0;
                width: 0;
                height: 0;
              }
            }
          `,Q=Ae===!0?`
            margin: ${Ve<0?Ve/2:0}px ${Pe<0?Pe/2:0}px;
            width: ${Z+f.marginH}px;
            height: ${se+f.marginV}px;
          `:`
            margin: 0;
            width: 0;
            height: 0;
          `,le=a.keepToClone===!0?"":`
            @keyframes ${qe}-to {
              0% {
                ${Q}
              }

              100% {
                margin: ${he<0?he/2:0}px ${oe<0?oe/2:0}px;
                width: ${Se+pe.marginH}px;
                height: ${Ie+pe.marginV}px;
              }
            }
          `;Ke.innerHTML=`
          @keyframes ${qe} {
            0% {
              margin: 0;
              border-width: ${v};
              border-style: ${b};
              border-color: ${m};
              border-radius: ${y};
              background-color: ${x};
              z-index: ${ge};
              transform-origin: 0 0;
              ${He}
              ${ye}
            }

            100% {
              margin: 0;
              border-width: ${ie};
              border-style: ${N};
              border-color: ${z};
              border-radius: ${B};
              background-color: ${K};
              z-index: ${Re};
              transform-origin: 0 0;
              transform: ${U};
              ${ee}
              ${xe}
            }
          }

          ${H}

          ${D}

          ${le}
        `,document.head.appendChild(Ke);let re="normal";I.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${qe}-from`,T!==void 0&&(T.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${qe}-from-tween`),J.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${qe}-to`,R.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${qe}`;const ke=de=>{de===Object(de)&&de.animationName!==qe||(R.removeEventListener("animationend",ke),R.removeEventListener("animationcancel",ke),Je(),Ke.remove())};s.qMorphCancel=()=>{s.qMorphCancel=void 0,i=!0,ke()},R.qMorphCancel=()=>{R.qMorphCancel=void 0,i=!0,ke()},R.addEventListener("animationend",ke),R.addEventListener("animationcancel",ke),e=de=>!!(i!==!0&&R&&I&&J)&&(de===!0?(ke(),!0):(r=r!==!0,re=re==="normal"?"reverse":"normal",I.style.animationDirection=re,T.style.animationDirection=re,J.style.animationDirection=re,R.style.animationDirection=re,!0))}};a.waitFor>0||a.waitFor==="transitionend"||a.waitFor===Object(a.waitFor)&&typeof a.waitFor.then=="function"?(a.waitFor>0?new Promise(V=>setTimeout(V,a.waitFor)):a.waitFor==="transitionend"?new Promise(V=>{const O=()=>{$!==null&&(clearTimeout($),$=null),R&&(R.removeEventListener("transitionend",O),R.removeEventListener("transitioncancel",O)),V()};let $=setTimeout(O,400);R.addEventListener("transitionend",O),R.addEventListener("transitioncancel",O)}):a.waitFor).then(j).catch(()=>{typeof R.qMorphCancel=="function"&&R.qMorphCancel()}):j()}),R=>e(R)}var ad={},uP=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],cP=["resize","useCSS","hideFromClone","keepToClone","tween"];function ns(t,e){t.clsAction!==e&&(t.clsAction=e,t.el.classList[e]("q-morph--invisible"))}function CC(t){if(t.animating===!0||t.queue.length<2)return;const[e,i]=t.queue;t.animating=!0,e.animating=!0,i.animating=!0,ns(e,"remove"),ns(i,"remove");const r=lP({from:e.el,to:i.el,onToggle(){ns(e,"add"),ns(i,"remove")},...i.opts,onEnd(n,o){i.opts.onEnd!==void 0&&i.opts.onEnd(n,o),o!==!0&&(e.animating=!1,i.animating=!1,t.animating=!1,t.cancel=void 0,t.queue.shift(),CC(t))}});t.cancel=()=>{r(!0),t.cancel=void 0}}function MC(t,e){const i=e.opts;cP.forEach(r=>{i[r]=t[r]===!0})}function hP(t,e){if(e.name!==t)e.animating===!1&&ns(e,"add");else{const i=ad[e.group];i===void 0?(ad[e.group]={name:e.group,model:t,queue:[e],animating:!1},ns(e,"remove")):i.model!==t&&(i.model=t,i.queue.push(e),i.animating===!1&&i.queue.length===2&&CC(i))}}function Mb(t,e){let i;Object(e)===e?(i=""+e.model,function(r,n){r.group!==void 0&&(n.group=r.group),r.name!==void 0&&(n.name=r.name);const o=n.opts;uP.forEach(a=>{r[a]!==void 0&&(o[a]=r[a])})}(e,t),MC(e,t)):i=""+e,i!==t.model?(t.model=i,hP(i,t)):t.animating===!1&&t.clsAction!==void 0&&t.el.classList[t.clsAction]("q-morph--invisible")}Ar({name:"morph",mounted(t,e){const i={el:t,animating:!1,opts:{}};MC(e.modifiers,i),function(r,n){const o=typeof r=="string"&&r.length!==0?r.split(":"):[];n.name=o[0],n.group=o[1],Object.assign(n.opts,{duration:isNaN(o[2])===!0?300:parseFloat(o[2]),waitFor:o[3]})}(e.arg,i),Mb(i,e.value),t.__qmorph=i},updated(t,e){Mb(t.__qmorph,e.value)},beforeUnmount(t){const e=t.__qmorph,i=ad[e.group];i!==void 0&&i.queue.indexOf(e)!==-1&&(i.queue=i.queue.filter(r=>r!==e),i.queue.length===0&&(i.cancel!==void 0&&i.cancel(),delete ad[e.group])),e.clsAction==="add"&&t.classList.remove("q-morph--invisible"),delete t.__qmorph}});var dP={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0};function kb(t,e,i){e.handler=i,e.observer!==void 0&&e.observer.disconnect(),e.observer=new MutationObserver(r=>{typeof e.handler=="function"&&(e.handler(r)!==!1&&e.once!==!0||kC(t))}),e.observer.observe(t,e.opts)}function kC(t){const e=t.__qmutation;e!==void 0&&(e.observer!==void 0&&e.observer.disconnect(),delete t.__qmutation)}Ar({name:"mutation",mounted(t,{modifiers:{once:e,...i},value:r}){const n={once:e,opts:Object.keys(i).length===0?dP:i};kb(t,n,r),t.__qmutation=n},updated(t,{oldValue:e,value:i}){const r=t.__qmutation;r!==void 0&&e!==i&&kb(t,r,i)},beforeUnmount:kC});var{passive:sd}=Rt;function Tb(t,{value:e,oldValue:i}){typeof e=="function"?(t.handler=e,typeof i!="function"&&(t.scrollTarget.addEventListener("scroll",t.scroll,sd),t.scroll())):t.scrollTarget.removeEventListener("scroll",t.scroll,sd)}function Eb(t,{value:e,oldValue:i}){typeof e=="function"?(t.handler=e,typeof i!="function"&&t.scrollTarget.addEventListener("scroll",t.scroll,Rt.passive)):t.scrollTarget.removeEventListener("scroll",t.scroll,Rt.passive)}Ar({name:"scroll-fire",mounted(t,e){const i={scrollTarget:cn(t),scroll:Us(()=>{let r,n;i.scrollTarget===window?(n=t.getBoundingClientRect().bottom,r=window.innerHeight):(n=Yh(t).top+qs(t),r=Yh(i.scrollTarget).top+qs(i.scrollTarget)),n>0&&n<r&&(i.scrollTarget.removeEventListener("scroll",i.scroll,sd),i.handler(t))},25)};Tb(i,e),t.__qscrollfire=i},updated(t,e){e.value!==e.oldValue&&Tb(t.__qscrollfire,e)},beforeUnmount(t){const e=t.__qscrollfire;e.scrollTarget.removeEventListener("scroll",e.scroll,sd),e.scroll.cancel(),delete t.__qscrollfire}}),Ar({name:"scroll",mounted(t,e){const i={scrollTarget:cn(t),scroll(){i.handler(co(i.scrollTarget),Rd(i.scrollTarget))}};Eb(i,e),t.__qscroll=i},updated(t,e){t.__qscroll!==void 0&&e.oldValue!==e.value&&Eb(t.__qscroll,e)},beforeUnmount(t){const e=t.__qscroll;e.scrollTarget.removeEventListener("scroll",e.scroll,Rt.passive),delete t.__qscroll}}),Ar({name:"touch-hold",beforeMount(t,e){const{modifiers:i}=e;if(i.mouse!==!0&&at.has.touch!==!0)return;const r={handler:e.value,noop:ai,mouseStart(o){typeof r.handler=="function"&&Ed(o)===!0&&(Zt(r,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),r.start(o,!0))},touchStart(o){if(o.target!==void 0&&typeof r.handler=="function"){const a=o.target;Zt(r,"temp",[[a,"touchmove","move","passiveCapture"],[a,"touchcancel","end","notPassiveCapture"],[a,"touchend","end","notPassiveCapture"]]),r.start(o)}},start(o,a){r.origin=Ai(o);const s=Date.now();at.is.mobile===!0&&(document.body.classList.add("non-selectable"),Fr(),r.styleCleanup=l=>{r.styleCleanup=void 0;const u=()=>{document.body.classList.remove("non-selectable")};l===!0?(Fr(),setTimeout(u,10)):u()}),r.triggered=!1,r.sensitivity=a===!0?r.mouseSensitivity:r.touchSensitivity,r.timer=setTimeout(()=>{r.timer=void 0,Fr(),r.triggered=!0,r.handler({evt:o,touch:a!==!0,mouse:a===!0,position:r.origin,duration:Date.now()-s})},r.duration)},move(o){const{top:a,left:s}=Ai(o);r.timer!==void 0&&(Math.abs(s-r.origin.left)>=r.sensitivity||Math.abs(a-r.origin.top)>=r.sensitivity)&&(clearTimeout(r.timer),r.timer=void 0)},end(o){Mi(r,"temp"),r.styleCleanup!==void 0&&r.styleCleanup(r.triggered),r.triggered===!0?o!==void 0&&Qe(o):r.timer!==void 0&&(clearTimeout(r.timer),r.timer=void 0)}},n=[600,5,7];if(typeof e.arg=="string"&&e.arg.length!==0&&e.arg.split(":").forEach((o,a)=>{const s=parseInt(o,10);s&&(n[a]=s)}),[r.duration,r.touchSensitivity,r.mouseSensitivity]=n,t.__qtouchhold=r,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Zt(r,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}at.has.touch===!0&&Zt(r,"main",[[t,"touchstart","touchStart","passive"+(i.capture===!0?"Capture":"")],[t,"touchend","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchhold;i!==void 0&&e.oldValue!==e.value&&(typeof e.value!="function"&&i.end(),i.handler=e.value)},beforeUnmount(t){const e=t.__qtouchhold;e!==void 0&&(Mi(e,"main"),Mi(e,"temp"),e.timer!==void 0&&clearTimeout(e.timer),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchhold)}});var TC={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},pP=new RegExp(`^([\\d+]+|${Object.keys(TC).join("|")})$`,"i");Ar({name:"touch-repeat",beforeMount(t,{modifiers:e,value:i,arg:r}){const n=Object.keys(e).reduce((l,u)=>{if(pP.test(u)===!0){const c=isNaN(parseInt(u,10))?TC[u.toLowerCase()]:parseInt(u,10);c>=0&&l.push(c)}return l},[]);if(e.mouse!==!0&&at.has.touch!==!0&&n.length===0)return;const o=typeof r=="string"&&r.length!==0?r.split(":").map(l=>parseInt(l,10)):[0,600,300],a=o.length-1,s={keyboard:n,handler:i,noop:ai,mouseStart(l){s.event===void 0&&typeof s.handler=="function"&&Ed(l)===!0&&(Zt(s,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(l,!0))},keyboardStart(l){if(typeof s.handler=="function"&&gr(l,n)===!0){if((o[0]===0||s.event!==void 0)&&(Qe(l),t.focus(),s.event!==void 0))return;Zt(s,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(l,!1,!0)}},touchStart(l){if(l.target!==void 0&&typeof s.handler=="function"){const u=l.target;Zt(s,"temp",[[u,"touchmove","move","passiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),s.start(l)}},start(l,u,c){function h(p){s.styleCleanup=void 0,document.documentElement.style.cursor="";const f=()=>{document.body.classList.remove("non-selectable")};p===!0?(Fr(),setTimeout(f,10)):f()}c!==!0&&(s.origin=Ai(l)),at.is.mobile===!0&&(document.body.classList.add("non-selectable"),Fr(),s.styleCleanup=h),s.event={touch:u!==!0&&c!==!0,mouse:u===!0,keyboard:c===!0,startTime:Date.now(),repeatCount:0};const d=()=>{if(s.timer=void 0,s.event===void 0)return;s.event.repeatCount===0&&(s.event.evt=l,c===!0?s.event.keyCode=l.keyCode:s.event.position=Ai(l),at.is.mobile!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),Fr(),s.styleCleanup=h)),s.event.duration=Date.now()-s.event.startTime,s.event.repeatCount+=1,s.handler(s.event);const p=a<s.event.repeatCount?a:s.event.repeatCount;s.timer=setTimeout(d,o[p])};o[0]===0?d():s.timer=setTimeout(d,o[0])},move(l){s.event!==void 0&&s.timer!==void 0&&function(u,c){const{top:h,left:d}=Ai(u);return Math.abs(d-c.left)>=7||Math.abs(h-c.top)>=7}(l,s.origin)===!0&&(clearTimeout(s.timer),s.timer=void 0)},end(l){s.event!==void 0&&(s.styleCleanup!==void 0&&s.styleCleanup(!0),l!==void 0&&s.event.repeatCount>0&&Qe(l),Mi(s,"temp"),s.timer!==void 0&&(clearTimeout(s.timer),s.timer=void 0),s.event=void 0)}};if(t.__qtouchrepeat=s,e.mouse===!0){const l=e.mouseCapture===!0||e.mousecapture===!0?"Capture":"";Zt(s,"main",[[t,"mousedown","mouseStart",`passive${l}`]])}if(at.has.touch===!0&&Zt(s,"main",[[t,"touchstart","touchStart","passive"+(e.capture===!0?"Capture":"")],[t,"touchend","noop","passiveCapture"]]),n.length!==0){const l=e.keyCapture===!0||e.keycapture===!0?"Capture":"";Zt(s,"main",[[t,"keydown","keyboardStart",`notPassive${l}`]])}},updated(t,{oldValue:e,value:i}){const r=t.__qtouchrepeat;r!==void 0&&e!==i&&(typeof i!="function"&&r.end(),r.handler=i)},beforeUnmount(t){const e=t.__qtouchrepeat;e!==void 0&&(e.timer!==void 0&&clearTimeout(e.timer),Mi(e,"main"),Mi(e,"temp"),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchrepeat)}}),at.is.mobile!==!0||at.is.nativeMobile!==!0&&at.is.winphone!==!0&&at.is.safari!==!0&&at.is.webkit!==!0&&at.is.vivaldi;var xl={};function EC(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function LC(){const t=xi.activeEl=xi.isActive===!1?null:EC();(function(e){if(e===Do)return;if((Do=e)===document.body||Gl.reduce((r,n)=>n==="dialog"?r+1:r,0)<2)return void hs.forEach(r=>{r.contains(Do)===!1&&Do.appendChild(r)});const i=Gl.lastIndexOf("dialog");for(let r=0;r<hs.length;r++){const n=hs[r];r!==i&&Gl[r]==="dialog"||n.contains(Do)!==!1||Do.appendChild(n)}})(t===null||t===document.documentElement?document.body:t)}function fP(){xi.isActive=xi.isActive===!1,LC()}function Lb(t,e){try{const i=t[e]();return i===void 0?Promise.resolve():i}catch(i){return Promise.reject(i)}}var $c,xi=xo({isActive:!1,activeEl:null},{isCapable:!1,install({$q:t}){t.fullscreen=this}});xl.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(t=>document.documentElement[t]!==void 0),xi.isCapable=xl.request!==void 0,xi.isCapable===!1?($c=()=>Promise.reject("Not capable"),Object.assign(xi,{request:$c,exit:$c,toggle:$c})):(Object.assign(xi,{request(t){const e=t||document.documentElement,{activeEl:i}=xi;return e===i?Promise.resolve():(i!==null&&e.contains(i)===!0?xi.exit():Promise.resolve()).finally(()=>Lb(e,xl.request))},exit:()=>xi.isActive===!0?Lb(document,xl.exit):Promise.resolve(),toggle:t=>xi.isActive===!0?xi.exit():xi.request(t)}),xl.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(t=>document[t]),xi.isActive=!!EC(),xi.isActive===!0&&LC(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(t=>{document[t]=fP}));var gP=xo({appVisible:!0},{install({$q:t}){pi(t,"appVisible",()=>this.appVisible)}});{let t,e;if(document.hidden!==void 0?(t="hidden",e="visibilitychange"):document.msHidden!==void 0?(t="msHidden",e="msvisibilitychange"):document.webkitHidden!==void 0&&(t="webkitHidden",e="webkitvisibilitychange"),e&&document[t]!==void 0){const i=()=>{gP.appVisible=!document[t]};document.addEventListener(e,i,!1)}}function Ib(t){return encodeURIComponent(t)}function IC(t){return decodeURIComponent(t)}function mP(t){if(t==="")return t;t.indexOf('"')===0&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t=IC(t.replace(/\+/g," "));try{const e=JSON.parse(t);e!==Object(e)&&Array.isArray(e)!==!0||(t=e)}catch{}return t}function Pb(t){const e=new Date;return e.setMilliseconds(e.getMilliseconds()+t),e.toUTCString()}function Rb(t,e,i={},r){let n,o;i.expires!==void 0&&(Object.prototype.toString.call(i.expires)==="[object Date]"?n=i.expires.toUTCString():typeof i.expires=="string"?n=function(u){let c=0;const h=u.match(/(\d+)d/),d=u.match(/(\d+)h/),p=u.match(/(\d+)m/),f=u.match(/(\d+)s/);return h&&(c+=864e5*h[1]),d&&(c+=36e5*d[1]),p&&(c+=6e4*p[1]),f&&(c+=1e3*f[1]),c===0?u:Pb(c)}(i.expires):(o=parseFloat(i.expires),n=isNaN(o)===!1?Pb(864e5*o):i.expires));const a=`${Ib(t)}=${s=e,Ib(s===Object(s)?JSON.stringify(s):""+s)}`;var s;const l=[a,n!==void 0?"; Expires="+n:"",i.path?"; Path="+i.path:"",i.domain?"; Domain="+i.domain:"",i.sameSite?"; SameSite="+i.sameSite:"",i.httpOnly?"; HttpOnly":"",i.secure?"; Secure":"",i.other?"; "+i.other:""].join("");document.cookie=l}function _f(t,e){const i=document,r=i.cookie?i.cookie.split("; "):[],n=r.length;let o,a,s,l=t?null:{},u=0;for(;u<n;u++)if(o=r[u].split("="),a=IC(o.shift()),s=o.join("="),t){if(t===a){l=mP(s);break}}else l[a]=s;return l}function vP(t){return{get:e=>_f(e),set:(e,i,r)=>Rb(e,i,r),has:e=>function(i,r){return _f(i)!==null}(e),remove:(e,i)=>function(r,n,o){Rb(r,"",{expires:-1,...n})}(e,i),getAll:()=>_f(null)}}ue({name:"BottomSheetComponent",props:{...ft,title:String,message:String,actions:Array,grid:Boolean,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:i}=Ce(),r=gt(t,i.$q),n=G(null);function o(){n.value.hide()}function a(c){e("ok",c),o()}function s(){e("hide")}function l(){const c=[];return t.title&&c.push(S(jo,{class:"q-dialog__title"},()=>t.title)),t.message&&c.push(S(jo,{class:"q-dialog__message"},()=>t.message)),c.push(t.grid===!0?S("div",{class:"row items-stretch justify-start",role:"list"},t.actions.map(h=>{const d=h.avatar||h.img;return h.label===void 0?S(Ln,{class:"col-all",dark:r.value}):S("div",{class:["q-bottom-sheet__item q-hoverable q-focusable cursor-pointer relative-position",h.class],style:h.style,tabindex:0,role:"listitem",onClick(){a(h)},onKeyup(p){p.keyCode===13&&a(h)}},[S("div",{class:"q-focus-helper"}),h.icon?S(vt,{name:h.icon,color:h.color}):d?S("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:d}):S("div",{class:"q-bottom-sheet__empty-icon"}),S("div",h.label)])})):S("div",{role:"list"},t.actions.map(h=>{const d=h.avatar||h.img;return h.label===void 0?S(Ln,{spaced:!0,dark:r.value}):S(Qs,{class:["q-bottom-sheet__item",h.classes],style:h.style,tabindex:0,clickable:!0,dark:r.value,onClick(){a(h)}},()=>[S(rn,{avatar:!0},()=>h.icon?S(vt,{name:h.icon,color:h.color}):d?S("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:d}):null),S(rn,()=>h.label)])}))),c}function u(){return[S(CS,{class:["q-bottom-sheet q-bottom-sheet--"+(t.grid===!0?"grid":"list")+(r.value===!0?" q-bottom-sheet--dark q-dark":""),t.cardClass],style:t.cardStyle},l)]}return Object.assign(i,{show:function(){n.value.show()},hide:o}),()=>S(Ad,{ref:n,position:"bottom",onHide:s},u)}});var ja,bf,yP={install({$q:t,ssrContext:e}){t.cookies=this}};Object.assign(yP,vP()),ue({name:"DialogPluginComponent",props:{...ft,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:i}=Ce(),{$q:r}=i,n=gt(t,r),o=G(null),a=G(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),s=w(()=>"q-dialog-plugin"+(n.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),l=w(()=>t.color||(n.value===!0?"amber":"primary")),u=w(()=>t.progress===!1?null:Ci(t.progress)===!0?{component:t.progress.spinner||Dr,props:{color:t.progress.color||l.value}}:{component:Dr,props:{color:l.value}}),c=w(()=>t.prompt!==void 0||t.options!==void 0),h=w(()=>{if(c.value!==!0)return{};const{model:T,isValid:R,items:M,...q}=t.prompt!==void 0?t.prompt:t.options;return q}),d=w(()=>Ci(t.ok)===!0||t.ok===!0?r.lang.label.ok:t.ok),p=w(()=>Ci(t.cancel)===!0||t.cancel===!0?r.lang.label.cancel:t.cancel),f=w(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(a.value)!==!0:t.options!==void 0&&t.options.isValid!==void 0&&t.options.isValid(a.value)!==!0),g=w(()=>({color:l.value,label:d.value,ripple:!1,disable:f.value,...Ci(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&c.value!==!0||void 0,onClick:b})),_=w(()=>({color:l.value,label:p.value,ripple:!1,...Ci(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&c.value!==!0||void 0,onClick:m}));function v(){o.value.hide()}function b(){e("ok",Vr(a.value)),v()}function m(){v()}function y(){e("hide")}function x(T){a.value=T}function C(T){f.value!==!0&&t.prompt.type!=="textarea"&&gr(T,13)===!0&&b()}function k(T,R){return t.html===!0?S(jo,{class:T,innerHTML:R}):S(jo,{class:T},()=>R)}function L(){return[S(Ul,{color:l.value,dense:!0,autofocus:!0,dark:n.value,...h.value,modelValue:a.value,"onUpdate:modelValue":x,onKeyup:C})]}function A(){return[S(CI,{color:l.value,options:t.options.items,dark:n.value,...h.value,modelValue:a.value,"onUpdate:modelValue":x})]}function E(){const T=[];return t.title&&T.push(k("q-dialog__title",t.title)),t.progress!==!1&&T.push(S(jo,{class:"q-dialog__progress"},()=>S(u.value.component,u.value.props))),t.message&&T.push(k("q-dialog__message",t.message)),t.prompt!==void 0?T.push(S(jo,{class:"scroll q-dialog-plugin__form"},L)):t.options!==void 0&&T.push(S(Ln,{dark:n.value}),S(jo,{class:"scroll q-dialog-plugin__form"},A),S(Ln,{dark:n.value})),(t.ok||t.cancel)&&T.push(function(){const R=[];return t.cancel&&R.push(S(_t,_.value)),t.ok&&R.push(S(_t,g.value)),S(yL,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>R)}()),T}function I(){return[S(CS,{class:[s.value,t.cardClass],style:t.cardStyle,dark:n.value},E)]}return ae(()=>t.prompt&&t.prompt.model,x),ae(()=>t.options&&t.options.model,x),Object.assign(i,{show:function(){o.value.show()},hide:v}),()=>S(Ad,{ref:o,onHide:y},I)}});var qb=0,Io=null,mi={},Po={},PC={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:Dr,customClass:""},Ab={...PC},Nr=xo({isActive:!1},{show(t){mi=function(i){if(i&&i.group!==void 0&&Po[i.group]!==void 0)return Object.assign(Po[i.group],i);const r=Ci(i)===!0&&i.ignoreDefaults===!0?{...PC,...i}:{...Ab,...i};return Po[r.group]=r,r}(t);const{group:e}=mi;return Nr.isActive=!0,ja!==void 0?(mi.uid=qb,bf.$forceUpdate()):(mi.uid=++qb,Io!==null&&clearTimeout(Io),Io=setTimeout(()=>{Io=null;const i=r0("q-loading");ja=Q2({name:"QLoading",setup(){function r(){Nr.isActive!==!0&&ja!==void 0&&(Em(!1),ja.unmount(i),fS(i),ja=void 0,bf=void 0)}function n(){if(Nr.isActive!==!0)return null;const o=[S(mi.spinner,{class:"q-loading__spinner",color:mi.spinnerColor,size:mi.spinnerSize})];return mi.message&&o.push(S("div",{class:"q-loading__message"+(mi.messageColor?` text-${mi.messageColor}`:""),[mi.html===!0?"innerHTML":"textContent"]:mi.message})),S("div",{class:"q-loading fullscreen flex flex-center z-max "+mi.customClass.trim(),key:mi.uid},[S("div",{class:"q-loading__backdrop"+(mi.backgroundColor?` bg-${mi.backgroundColor}`:"")}),S("div",{class:"q-loading__box column items-center "+mi.boxClass},o)])}return Ft(()=>{Em(!0)}),()=>S(di,{name:"q-transition--fade",appear:!0,onAfterLeave:r},n)}},Nr.__parentApp),bf=ja.mount(i)},mi.delay)),i=>{i!==void 0&&Object(i)===i?Nr.show({...i,group:e}):Nr.hide(e)}},hide(t){if(Nr.isActive===!0){if(t===void 0)Po={};else{if(Po[t]===void 0)return;{delete Po[t];const e=Object.keys(Po);if(e.length!==0){const i=e[e.length-1];return void Nr.show({group:i})}}}Io!==null&&(clearTimeout(Io),Io=null),Nr.isActive=!1}},setDefaults(t){Ci(t)===!0&&Object.assign(Ab,t)},install({$q:t,parentApp:e}){t.loading=this,Nr.__parentApp=e,t.config.loading!==void 0&&this.setDefaults(t.config.loading)}}),Vc=G(null),Fb=xo({isActive:!1},{start:ai,stop:ai,increment:ai,setDefaults:ai,install({$q:t,parentApp:e}){if(t.loadingBar=this,this.__installed===!0)return void(t.config.loadingBar!==void 0&&this.setDefaults(t.config.loadingBar));const i=G(t.config.loadingBar!==void 0?{...t.config.loadingBar}:{});function r(){Fb.isActive=!0}function n(){Fb.isActive=!1}const o=r0("q-loading-bar");Q2({name:"LoadingBar",devtools:{hide:!0},setup:()=>()=>S(U3,{...i.value,onStart:r,onStop:n,ref:Vc})},e).mount(o),Object.assign(this,{start(a){Vc.value.start(a)},stop(){Vc.value.stop()},increment(){Vc.value.increment.apply(null,arguments)},setDefaults(a){Ci(a)===!0&&Object.assign(i.value,a)}})}});function _P(t){return vm(t)===!0?"__q_date|"+t.getTime():function(e){return Object.prototype.toString.call(e)==="[object RegExp]"}(t)===!0?"__q_expr|"+t.source:typeof t=="number"?"__q_numb|"+t:typeof t=="boolean"?"__q_bool|"+(t?"1":"0"):typeof t=="string"?"__q_strn|"+t:typeof t=="function"?"__q_strn|"+t.toString():t===Object(t)?"__q_objt|"+JSON.stringify(t):t}function RC(){const t=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:t,getIndex:t,getKey:t,getAll:()=>{},getAllKeys:()=>[],set:ai,setItem:ai,remove:ai,removeItem:ai,clear:ai,isEmpty:()=>!0}}function qC(t){const e=window[t+"Storage"],i=a=>{const s=e.getItem(a);return s?function(l){if(l.length<9)return l;const u=l.substring(0,8),c=l.substring(9);switch(u){case"__q_date":const h=Number(c);return new Date(Number.isNaN(h)===!0?c:h);case"__q_expr":return new RegExp(c);case"__q_numb":return Number(c);case"__q_bool":return c==="1";case"__q_strn":return""+c;case"__q_objt":return JSON.parse(c);default:return l}}(s):null},r=a=>e.getItem(a)!==null,n=(a,s)=>{e.setItem(a,_P(s))},o=a=>{e.removeItem(a)};return{has:r,hasItem:r,getLength:()=>e.length,getItem:i,getIndex:a=>a<e.length?i(e.key(a)):null,getKey:a=>a<e.length?e.key(a):null,getAll:()=>{let a;const s={},l=e.length;for(let u=0;u<l;u++)a=e.key(u),s[a]=i(a);return s},getAllKeys:()=>{const a=[],s=e.length;for(let l=0;l<s;l++)a.push(e.key(l));return a},set:n,setItem:n,remove:o,removeItem:o,clear:()=>{e.clear()},isEmpty:()=>e.length===0}}var AC=at.has.webStorage===!1?RC():qC("local"),bP={install({$q:t}){t.localStorage=AC}};Object.assign(bP,AC);var FC=at.has.webStorage===!1?RC():qC("session"),xP={install({$q:t}){t.sessionStorage=FC}};Object.assign(xP,FC);function OC(){return Hi("_q_")}wC(["ok","hide"]);const wP={class:"tool-container menuToolList"},SP={title:"图层"},CP={title:"绘图工具"},MP={title:"量算"},kP={title:"定位"},TP={class:"q-pa-sm"},EP={class:"sjz"},LP={class:"xcoor"},IP={class:"ycoor"},PP={style:{margin:"0 auto"}};var zC=hn({__name:"menuToolBar",emits:["locate"],setup(t,{emit:e}){const i=e,r=G(!1),n=w(()=>{let g="";return ji.layerTree&&(g="background-color:#ccc"),g});function o(){const g=ji.layerTree;ji.layerTree=!g}const a=w(()=>""),s=w(()=>{let g="";return ji.drawTool&&(g="background-color:#ccc"),g});function l(){const g=ji.drawTool;ji.drawTool=!g}const u=w(()=>{let g="";return ji.measureTool&&(g="background-color:#ccc"),g});function c(){const g=ji.measureTool;ji.measureTool=!g}const h=G(),d=G(),p=G();function f(){h.value!=null&&d.value!=null&&i("locate",h.value,d.value,p.value)}return(g,_)=>(Dt(),Ri("ul",wP,[ze("li",{onClick:o,style:No(n.value)},[ze("span",SP,[et(Ot(Wn),{icon:"gis:layer-stack-o"})])],4),ze("li",{onClick:l,style:No(s.value)},[ze("span",CP,[et(Ot(Wn),{icon:"gis:extent-alt"})])],4),ze("li",{onClick:c,style:No(u.value)},[ze("span",MP,[et(Ot(Wn),{icon:"gis:measure"})])],4),ze("li",{id:"locationBtn",style:No(a.value)},[ze("span",kP,[et(Ot(Wn),{icon:"gis:position-o"})]),et(Ot(kI),{"model-value":r.value,"transition-show":"flip-up","transition-hide":"flip-down"},{default:Ei(()=>[ze("div",TP,[_[3]||(_[3]=ze("div",{class:"text-h6 text-center q-mb-md"},"坐标定位",-1)),ze("div",EP,[ze("div",LP,[et(Ot(Ul),{dense:"",style:{width:"200px"},modelValue:h.value,"onUpdate:modelValue":_[0]||(_[0]=v=>h.value=v),label:"经度:",placeholder:"经度十进制"},null,8,["modelValue"])]),ze("div",IP,[et(Ot(Ul),{dense:"",style:{width:"200px"},modelValue:d.value,"onUpdate:modelValue":_[1]||(_[1]=v=>d.value=v),label:"纬度:",placeholder:"纬度十进制"},null,8,["modelValue"])]),ze("div",null,[et(Ot(Ul),{id:"inputNumber",label:"级别:",modelValue:p.value,"onUpdate:modelValue":_[2]||(_[2]=v=>p.value=v),modelModifiers:{number:!0},type:"number",dense:"",style:{"max-width":"200px"},min:1,max:22},null,8,["modelValue"])]),ze("div",PP,[et(Ot(_t),{color:"primary","text-color":"black",label:"确定",onClick:f})])])])]),_:1},8,["model-value"])],4)]))}});zC.__file="src/components/MapTools/menuToolBar.vue";var Ob=hn({name:"SwipeToolBar",props:{xmap:{type:Object}},components:{Icon:Wn},setup(t){let e,i=t.xmap;return ae(()=>t.xmap,r=>{i=r}),{unload:function(){e&&e.unload()},useFishEyes:function(){if(!i)return;const r=i.LayerManager?.SwipeLayerIndex;if(r!==void 0){if(e)e.unload(),e.load();else{const n=document.getElementById(i.target);e=new nm(n,i),e.setSwipeLayer(r)}e.changeSwipeType(sr.FishEye,100)}else Bh.eventEmit(kt.MAP_MESSAGE_INFO,"请从图层树设置透视图层!")},useSwipe:function(r=0){if(!i)return;const n=i.LayerManager?.SwipeLayerIndex;if(n!==void 0){if(e)e.unload(),e.load();else{const o=document.getElementById(i.target);e=new nm(o,i)}e.setSwipeLayer(n),r===0?e.changeSwipeType(sr.RollHorizonl):e.changeSwipeType(sr.RollVertical)}else Bh.eventEmit(kt.MAP_MESSAGE_INFO,"请从图层树设置透视图层!")}}}});const RP={class:"tool-container swipeToolList"},qP={title:"横向卷帘"},AP={title:"纵向卷帘"},FP={title:"鱼眼"},OP={title:"取消透视"};Ob.render=function(t,e,i,r,n,o){const a=ur("Icon");return Dt(),Ri("ul",RP,[ze("li",{onClick:e[0]||(e[0]=s=>t.useSwipe(0))},[ze("span",qP,[et(a,{icon:"gis:swipe-map-v"})])]),ze("li",{onClick:e[1]||(e[1]=s=>t.useSwipe(1))},[ze("span",AP,[et(a,{icon:"gis:swipe-map-h"})])]),ze("li",{onClick:e[2]||(e[2]=(...s)=>t.useFishEyes&&t.useFishEyes(...s))},[ze("span",FP,[et(a,{icon:"gis:screen-mag"})])]),ze("li",{onClick:e[3]||(e[3]=(...s)=>t.unload&&t.unload(...s))},[ze("span",OP,[et(a,{icon:"gis:earth"})])])])},Ob.__file="src/components/MapTools/swipeToolBar.vue";var zP=class extends yr{constructor(t){t=t||{},super();var e,i=this.input=t.input;i||(i=this.input=document.createElement("INPUT"),t.type&&i.setAttribute("type",t.type),t.min!==void 0&&i.setAttribute("min",t.min),t.max!==void 0&&i.setAttribute("max",t.max),t.step!==void 0&&i.setAttribute("step",t.step),t.parent&&t.parent.appendChild(i)),t.disabled&&(i.disabled=!0),t.checked!==void 0&&(i.checked=!!t.checked),t.val!==void 0&&(i.value=t.val),t.hidden&&(i.style.display="none"),i.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),i.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(t,e){var i=function(r){this.moving=!0,this.element.classList.add("ol-moving");var n=function(o){o.type==="pointerup"&&(document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",n),document.removeEventListener("pointercancel",n),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),o.target===t&&e(o),o.stopPropagation(),o.preventDefault()}.bind(this);document.addEventListener("pointermove",n,!1),document.addEventListener("pointerup",n,!1),document.addEventListener("pointercancel",n,!1),r.stopPropagation(),r.preventDefault()}.bind(this);t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",i,!1)}setValue(t){t!==void 0&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},x0=class extends zP{constructor(t){super(t=t||{});var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):t.html!==void 0&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},DP=class extends x0{constructor(t){super(t=t||{}),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()}},BP=class extends x0{constructor(t){super(t=t||{}),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()}},Gt={create:function(t,e){var i;if(e=e||{},t==="TEXT")i=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(i);else for(var r in i=document.createElement(t),/button/i.test(t)&&i.setAttribute("type","button"),e)switch(r){case"className":e.className&&e.className.trim&&i.setAttribute("class",e.className.trim());break;case"text":i.innerText=e.text;break;case"html":e.html instanceof Element?i.appendChild(e.html):e.html!==void 0&&(i.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(i);break;case"options":if(/select/i.test(t))for(var n in e.options)Gt.create("OPTION",{html:n,value:e.options[n],parent:i});break;case"style":Gt.setStyle(i,e.style);break;case"change":case"click":Gt.addListener(i,r,e[r]);break;case"on":for(var o in e.on)Gt.addListener(i,o,e.on[o]);break;case"checked":i.checked=!!e.checked;break;default:i.setAttribute(r,e[r])}return i},createSwitch:function(t){var e=Gt.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),i=Object.assign({input:e},t||{});return new DP(i),e},createCheck:function(t){var e=Gt.create("INPUT",{name:t.name,type:t.type==="radio"?"radio":"checkbox",on:t.on,parent:t.parent}),i=Object.assign({input:e},t||{});return t.type==="radio"?new BP(i):new x0(i),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):e!==void 0&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,i,r){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(n){t.addEventListener(n,i,r)})},removeListener:function(t,e,i){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){t.removeEventListener(r,i)})},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return Gt.getStyle(t,"display")==="none"},toggle:function(t){t.style.display=t.style.display==="none"?"":"none"},setStyle:function(t,e){for(var i in e)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":typeof e[i]=="number"?t.style[i]=e[i]+"px":t.style[i]=e[i];break;default:t.style[i]=e[i]}},getStyle:function(t,e){var i,r=(t.ownerDocument||document).defaultView;if(r&&r.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),i=r.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,function(n,o){return o.toUpperCase()}),i=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(i)))return function(n){var o=t.style.left,a=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=n||0,n=t.style.pixelLeft+"px",t.style.left=o,t.runtimeStyle.left=a,n}(i);return/px$/.test(i)?parseInt(i):i},outerHeight:function(t){return t.offsetHeight+Gt.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+Gt.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},i=function(r){if(!r)return e;if(Gt.getStyle(r,"position")==="absolute"&&Gt.getStyle(r,"transform")!=="none"){var n=r.getBoundingClientRect();return e.left+=n.left,e.top+=n.top,e}return i(r.offsetParent)};return i(t.offsetParent)},positionRect:function(t,e){var i=0,r=0,n=function(o){if(o)return i+=o.offsetLeft,r+=o.offsetTop,n(o.offsetParent);var a={top:t.offsetTop+r,left:t.offsetLeft+i};return e&&(a.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,a.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),a.bottom=a.top+t.offsetHeight,a.right=a.top+t.offsetWidth,a};return n(t.offsetParent)},scrollDiv:function(t,e){var i,r,n,o,a,s=!1,l=0,u=0,c=typeof(e=e||{}).onmove=="function"?e.onmove:function(){},h=e.vertical?"screenY":"screenX",d=e.vertical?"scrollTop":"scrollLeft",p=!1,f=0,g=function(){a&&(f++,setTimeout(_))},_=function(){if(a){if(--f)return;var k=t.clientHeight,L=t.scrollHeight;r=k/L,a.style.height=100*r+"%",a.style.top=t.scrollTop/L*100+"%",o.style.height=k+"px",k>L-.5?o.classList.add("ol-100pc"):o.classList.remove("ol-100pc")}},v=function(k){k.target.classList.contains("ol-noscroll")||(p=!1,s=k[h],u=new Date,t.classList.add("ol-move"),k.preventDefault(),window.addEventListener("pointermove",b),Gt.addListener(window,["pointerup","pointercancel"],x))},b=function(k){if(s!==!1){var L=(n?-1/r:1)*(s-k[h]);p=p||Math.round(L),t[d]+=L,(i=new Date)-u&&(l=(l+L/(i-u))/2),s=k[h],u=i,L&&c(!0)}else p=!0},m=function(k){var L=k>0?Math.min(100,k/2):Math.max(-100,k/2);k-=L,t[d]+=L,-1<k&&k<1?(p?setTimeout(function(){t.classList.remove("ol-move")}):t.classList.remove("ol-move"),p=!1,c(!1)):setTimeout(function(){m(k)},40)};if(e.vertical&&e.minibar){var y=function(k){t.removeEventListener("pointermove",y),t.parentNode.classList.add("ol-miniscroll"),a=Gt.create("DIV"),o=Gt.create("DIV",{className:"ol-scroll",html:a}),t.parentNode.insertBefore(o,t),a.addEventListener("pointerdown",function(L){n=!0,v(L)}),e.mousewheel&&(Gt.addListener(o,["mousewheel","DOMMouseScroll","onmousewheel"],function(L){C(L)}),Gt.addListener(a,["mousewheel","DOMMouseScroll","onmousewheel"],function(L){C(L)})),t.parentNode.addEventListener("pointerenter",g),window.addEventListener("resize",g),k!==!1&&g()};t.parentNode?y(!1):t.addEventListener("pointermove",y),t.addEventListener("scroll",function(){g()})}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),Gt.addListener(t,["pointerdown"],function(k){n=!1,v(k)}),t.addEventListener("click",function(k){t.classList.contains("ol-move")&&(k.preventDefault(),k.stopPropagation())},!0);var x=function(k){(u=new Date-u)>100||n?l=0:u>0&&(l=((l||0)+(s-k[h])/u)/2),m(e.animate===!1?0:200*l),s=!1,l=0,u=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout(function(){t.classList.remove("ol-hasClick")},500)),n=!1,window.removeEventListener("pointermove",b),Gt.removeListener(window,["pointerup","pointercancel"],x)},C=function(k){var L=Math.max(-1,Math.min(1,k.wheelDelta||-k.detail));return t.classList.add("ol-move"),t[d]-=30*L,t.classList.remove("ol-move"),!1};return e.mousewheel&&Gt.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],C),{refresh:g}},dispatchEvent:function(t,e){var i;try{i=new CustomEvent(t)}catch{(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)},setCursor:function(t,e){t instanceof Ns&&(t=t.getTargetElement()),!("ontouchstart"in window)&&t instanceof Element&&(t.style.cursor=e)}},jP=class extends rm{constructor(t){t=t||{};var e=document.createElement("div");t.element=e,super(t),typeof t.offsetBox=="number"?this.offsetBox=[t.offsetBox,t.offsetBox,t.offsetBox,t.offsetBox]:this.offsetBox=t.offsetBox,this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,Gt.create("BUTTON",{className:"closeBox"+(t.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:e}),t.anchor!==!1&&Gt.create("DIV",{className:"anchor",parent:e}),this.content=Gt.create("DIV",{html:t.html||"",className:"ol-popup-content",parent:e}),t.minibar&&Gt.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),t.stopEvent&&(e.addEventListener("mousedown",function(i){i.stopPropagation()}),e.addEventListener("touchstart",function(i){i.stopPropagation()})),this._elt=e,this.setPositioning(t.positioning||"auto"),this.setPopupClass(t.popupClass||t.className||"default"),t.anim&&this.addPopupClass("anim"),t.position&&setTimeout(function(){this.show(t.position)}.bind(this))}getClassPositioning(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t}setClosebox(t){this.closeBox=t,t?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")}setPopupClass(t){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter(function(r){return r.length>0});t?t.split(" ").filter(function(r){return r.length>0}).forEach(function(r){e.push(r)}):e.push("default"),i.forEach(function(r){e.push(r)}),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)}addPopupClass(t){this.element.classList.add(t)}removePopupClass(t){this.element.classList.remove(t)}setPositioning(t){t!==void 0&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),this.autoPositioning.length==1&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,(t=t.replace(/auto/g,"center"))=="center"&&(t="bottom-center"),this.setPositioning_(t))}setPositioning_(t){if(this.element){super.setPositioning(t),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter(function(i){return i.length>0});this.element.classList.add.apply(this.element.classList,e)}}getVisible(){return this.element.classList.contains("visible")}show(t,e){e||typeof t!="string"||(e=t,t=null),t===!0&&(t=this.getPosition());var i=this,r=this.getMap();if(r&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):Gt.create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(s){s.addEventListener("load",function(){try{r.renderSync()}catch{}i.content.dispatchEvent(new Event("scroll"))})})),t)){if(this.autoPositioning){var n=r.getPixelFromCoordinate(t),o=r.getSize(),a=[];this.autoPositioning[0]=="auto"?a[0]=n[1]<o[1]/3?"top":"bottom":a[0]=this.autoPositioning[0],a[1]=n[0]<2*o[0]/3?"left":"right",this.setPositioning_(a[0]+"-"+a[1]),this.offsetBox&&this.setOffset([this.offsetBox[a[1]=="left"?2:0],this.offsetBox[a[0]=="top"?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(t),this.element.parentElement.style.display="",typeof this.onshow=="function"&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){i.element.classList.add("visible")},0)}}hide(){this.getPosition()!=null&&(typeof this.onclose=="function"&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))}},NP=class extends jP{constructor(t){(t=t||{}).popupClass=(t.popupClass||"")+" placemark anim",t.positioning="bottom-center",super(t),this.setPositioning=function(){},t.color&&(this.element.style.color=t.color),t.backgroundColor&&(this.element.style.backgroundColor=t.backgroundColor),t.contentColor&&this.setContentColor(t.contentColor),t.size&&this.setRadius(t.size)}show(t,e){t===!0&&(t=this.getPosition()),this.hide(),super.show(t,e)}setColor(t){this.element.style.color=t}setBackgroundColor(t){this._elt.style.backgroundColor=t}setContentColor(t){var e=this.element.getElementsByClassName("ol-popup-content")[0];e&&(e.style.color=t)}setClassName(t){var e=this.element.className;this.element.className="ol-popup placemark ol-popup-bottom ol-popup-center "+(/visible/.test(e)?"visible ":"")+(/anim/.test(e)?"anim ":"")+t}setRadius(t){this.element.style.fontSize=t+"px"}},qm=hn({name:"ZoomInOut",props:{xmap:{type:Object},hasLayerTree:Cn().def(!1),isInternet:Cn().def(!0),hasFullScreen:Cn().def(!0)},components:{Icon:Wn},emits:["locate"],setup(t,{emit:e}){const i=w(()=>t.hasLayerTree),r=w(()=>t.hasFullScreen),n=w(()=>{let h=t.isInternet;return t.xmap&&(h=h&&t.xmap.isInternet),h});let o=t.xmap;ae(()=>t.xmap,h=>{o=h});const a=G(!1),s=w(()=>a.value?"退出全屏":"地图全屏"),l=w(()=>{let h="";return a.value&&(h="background-color:#ccc"),h}),u=w(()=>{let h="";return ji.layerTree&&(h="background-color:#ccc"),h});let c;return Ft(()=>{if(o){const h=o.map.getControls();if(h){const d=h.getArray()[0];o.map.removeControl(d)}}}),{isFullScreen:a,toggleMapScreen:function(){if(a.value)FT(),setTimeout(()=>{L2()},300);else{const h=o.targetContainer,d=document.getElementById(h);if(d)k1(d);else{const p=document.getElementById(o.target);p&&k1(p)}}a.value=!a.value},fullScreenTip:s,fullScreenStyle:l,zoomInOut:function(h=!0){if(!o)return;let d=o.MapView.getZoom()+(h?1:-1);d<=0&&(d=1),o.MapView.setZoom(d)},layerTreeSelected:u,changeLayerTree:function(){const h=ji.layerTree;ji.layerTree=!h},hasLayerTreeRef:i,isInternetRef:n,goHomeView:function(){o.goHomeView()},doGeoLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(h=>{if(h.coords&&o){const d=[h.coords.longitude,h.coords.latitude];c||(c=new NP({contentColor:"#000",autoPan:{animation:{duration:250}}})),o.map.addOverlay(c),c.show(lt.fromLonLat(d,o.MapView.getProjection())),o.zoomToCenter(d,15),setTimeout(()=>{c&&o.map.getOverlays().pop()},2e3)}}):alert("当前浏览器不支持在线定位！")},hasFullScreenRef:r}}});const $P={class:"tool-container zoomFullList"},VP={title:"放大"},GP={title:"缩小"},HP={title:"图层"},UP=["title"],WP={title:"返回默认视图"},YP={title:"在线定位"};qm.render=function(t,e,i,r,n,o){const a=ur("Icon");return Dt(),Ri("ul",$P,[ze("li",{onClick:e[0]||(e[0]=s=>t.zoomInOut())},[ze("span",VP,[et(a,{icon:"ant-design:plus-outlined"})])]),ze("li",{onClick:e[1]||(e[1]=s=>t.zoomInOut(!1))},[ze("span",GP,[et(a,{icon:"ant-design:minus-outlined"})])]),t.hasLayerTreeRef?(Dt(),Ri("li",{key:0,onClick:e[2]||(e[2]=(...s)=>t.changeLayerTree&&t.changeLayerTree(...s)),style:No(t.layerTreeSelected)},[ze("span",HP,[et(a,{icon:"gis:layer-stack-o"})])],4)):Gi("v-if",!0),t.hasFullScreenRef?(Dt(),Ri("li",{key:1,onClick:e[3]||(e[3]=(...s)=>t.toggleMapScreen&&t.toggleMapScreen(...s)),style:No(t.fullScreenStyle)},[ze("span",{title:t.fullScreenTip},[t.isFullScreen?(Dt(),Er(a,{key:1,icon:"ant-design:fullscreen-exit-outlined"})):(Dt(),Er(a,{key:0,icon:"ant-design:fullscreen-outlined"}))],8,UP)],4)):Gi("v-if",!0),ze("li",{onClick:e[4]||(e[4]=(...s)=>t.goHomeView&&t.goHomeView(...s))},[ze("span",WP,[et(a,{icon:"ant-design:home-outlined"})])]),t.isInternetRef?(Dt(),Ri("li",{key:2,onClick:e[5]||(e[5]=(...s)=>t.doGeoLocation&&t.doGeoLocation(...s))},[ze("span",YP,[et(a,{icon:"ant-design:aim-outlined"})])])):Gi("v-if",!0)])},qm.__file="src/components/MapTools/zoomFullBar.vue";const KP={class:"row q-gutter-sm"};var DC=hn({__name:"contextMenu",props:{xmap:{type:ba,required:!0},replace:{type:Boolean,default:!1},moreMenuList:{type:Array,default:[]},target:{type:[String,Element,Boolean],default:"map"}},emits:["itemClicked"],setup(t,{emit:e}){const i=SC,r=e,n=t,o=[{id:"show-position",label:"查看此处坐标",icon:"ic:baseline-info"},{},{id:"zoom-in",label:"放大",icon:"ic:baseline-zoom-in"},{id:"zoom-out",label:"缩小",icon:"ic:baseline-zoom-out"},{id:"locate-center",label:"移动到此处",icon:"ion:md-locate"}],a=w(()=>{if($l(n.target)){const u=n.target;return u.startsWith("#")||u.startsWith(".")?n.target:`#${u}`}return n.target}),s=w(()=>n.replace?n.moreMenuList&&n.moreMenuList.length>0?n.moreMenuList:o:n.moreMenuList&&n.moreMenuList.length>0?[...o,...n.moreMenuList]:o),l=OC();return(u,c)=>{const h=ur("Icon");return Dt(),Er(Ot(Zs),{"transition-show":"flip-right","transition-hide":"flip-left",target:a.value,"context-menu":""},{default:Ei(()=>[et(Ot(b0),{dense:"",style:{"min-width":"100px"}},{default:Ei(()=>[(Dt(!0),Ri(fh,null,dx(s.value,(d,p)=>(Dt(),Ri(fh,null,[d.id?Fi((Dt(),Er(Ot(Qs),{key:0,onClick:f=>function(g){const _=n.xmap;switch(g.id){case"show-position":if(!_)throw new Error("传入的XMap对象不能为空！");const v=_.CurrentPosition,b=_.MapView.getProjection(),m=b.getCode();let y="";if(m==="EPSG:4326"||m==="EPSG:4490")y=`经度：${v[0]} 纬度：${v[1]}`;else{const I=lt.transformCoordinate(v,b,ut("EPSG:4326"));y=`横：${v[0].toFixed(4)} 纵：${v[1].toFixed(4)}  <br/>经度：${I[0].toFixed(4)} 纬度：${I[1].toFixed(4)}`}l.dialog({title:"提示",message:y,html:!0});break;case"zoom-in":if(!_)throw new Error("传入的XMap对象不能为空！");const x=_.MapView,C=x.getZoom(),k=x.getConstrainedZoom(C+1);x.setZoom(k);break;case"zoom-out":if(!_)throw new Error("传入的XMap对象不能为空！");const L=_.MapView,A=L.getZoom(),E=L.getConstrainedZoom(A-1);L.setZoom(E);break;case"locate-center":if(!_)throw new Error("传入的XMap对象不能为空！");_.MapView.setCenter(_.CurrentPosition);break;default:r("itemClicked",g)}}(d),clickable:""},{default:Ei(()=>[et(Ot(rn),null,{default:Ei(()=>[ze("div",KP,[d.icon?(Dt(),Er(h,{key:0,icon:d.icon},null,8,["icon"])):Gi("v-if",!0),ze("span",null,Sl(d.label),1)])]),_:2},1024)]),_:2},1032,["onClick"])),[[Ot(i)]]):(Dt(),Er(Ot(Ln),{key:1}))],64))),256))]),_:1})]),_:1},8,["target"])}}});DC.__file="src/components/MapTools/contextMenu.vue";var Am=hn({name:"myOLMap",components:{ZoomFullBar:qm,ContextMenu:DC},props:{mapid:du().def("map"),mapgroup:du().def("map"),hasLayerManager:Cn().def(!1),initTDTLayers:Dh().def(["img_w","cia_w"]),viewProjection:kd([String,Qr,Object]).def("EPSG:3857"),defaultCenter:Dh().def([108.95,34.5]),viewOptions:Md(),multiWorld:Cn().def(!1),enableContextMenu:Cn().def(!0)},emits:["mapInited"],setup(t,{emit:e}){const i=t.mapid,r=G(t.mapid),n=G(t.mapid+"_Container"),o=t.mapgroup;let a,s=t.viewProjection;ae(()=>t.viewProjection,p=>{h(p),d()});const l=w(()=>t.enableContextMenu),u=G();let c;function h(p){a=t.viewOptions??{projection:p,center:t.defaultCenter,zoom:3,multiWorld:t.multiWorld},!a.center&&t.defaultCenter&&(a.center=t.defaultCenter),c&&(c.dispose(),c=void 0,u.value=void 0),c=new ba(i,o,t.hasLayerManager),t.hasLayerManager}function d(){c.initMapView(a),u.value=c;let p=c.WMTSTool;if(t.initTDTLayers){const f=t.initTDTLayers;f&&f.length>0&&f.forEach(g=>{const _=g.toLocaleLowerCase(),v=p.getTDTAlias(_);p.addTDTLayer(g,v)})}e("mapInited",{xmap:c,wmtsTool:p})}return Ft(()=>{a||(h(s),d())}),{mapIDRef:r,mapContainerRef:n,mapRef:u,enableMenuComputed:l}}});const XP=["id"],ZP={class:"mainMapPanel"},QP=["id"],JP={class:"mapLeftPanel"},eR={class:"mapRightPanel"},tR={key:0,class:"extendmenu"},iR={style:{position:"relative"}};Am.render=function(t,e,i,r,n,o){const a=ur("ZoomFullBar"),s=ur("ContextMenu");return Dt(),Ri("div",{id:t.mapContainerRef,class:"mapContainer"},[ze("div",ZP,[ze("div",{id:t.mapIDRef,class:"mainMapPanel"},null,8,QP),ze("div",null,[Ka(t.$slots,"default")])]),ze("div",JP,[Ka(t.$slots,"mapLeftPanel")]),ze("div",eR,[Ka(t.$slots,"mapRightPanel",{},()=>[Gi("地图扩展菜单 "),t.mapRef?(Dt(),Ri("div",tR,[ze("div",iR,[et(a,{xmap:t.mapRef,hasLayerTree:!1},null,8,["xmap"])]),Gi(" 扩展菜单 "),Ka(t.$slots,"mapRightExtend")])):Gi("v-if",!0)])]),t.enableMenuComputed?(Dt(),Er(s,{key:0,target:t.mapIDRef,xmap:t.mapRef},null,8,["target","xmap"])):Gi("v-if",!0)],8,XP)},Am.__file="src/components/OLXmap/index.vue";var zb=hn({name:"xmapView",props:{hasLayerTree:Cn().def(!1),viewHeight:Jg().isRequired,viewWidth:Jg().isRequired,mapid:du().def("map"),mapgroup:du().def("map"),viewProjection:kd([String,Qr]).def("EPSG:4326"),initTDTLayers:Array,viewOptions:Md(),multiWorld:Cn().def(!1)},components:{OLXMap:Am,DrawToolBar:dm,MeasureToolBar:pm,MenuToolBar:zC},emits:["mapInited"],setup(t,{attrs:e,slots:i,emit:r}){const n=G(t.hasLayerTree),o=G(t.viewHeight),a=G(t.viewWidth),s=G(t.initTDTLayers),l=G(),u=G();let c;function h(g){if(g){if($l(g))g==="EPSG:4326"&&(s.value=t.initTDTLayers??["vec_c","cva_c"]);else{const _=g.getCode();(_==="EPSG:4326"||_==="EPSG:4490")&&(s.value=t.initTDTLayers??["vec_c","cva_c"])}l.value=g}}h(t.viewProjection),ae(()=>t.viewProjection,()=>{const g=t.viewProjection;g&&h(g)}),ae(()=>t.viewHeight,g=>{o.value=g}),ae(()=>t.viewWidth,g=>{a.value=g});const d=w(()=>`height:${o.value-55}px`),p=w(()=>`width:${a.value-20}px;`),f=w(()=>{const g=o.value,_=a.value;return L2(),`position:relative;width:${_};height:${g}px`});return Ft(()=>{}),st(()=>{let g=c?.map;g&&g.dispose()}),{heightStyle:d,widthStyle:p,layerTreeVisible:w(()=>ji.layerTree),mapInitedHandler:function(g){c=g.xmap,u.value=c,r("mapInited",g)},mapRef:u,mainContainStyle:f,hasLayerTreeRef:n,initTDTLayersRef:s,viewProjectionRef:l,mapMenuState:ji,doLocation:function(g,_,v){if(c.map){const b=c.MapView,m=b.getProjection(),y=lt.transformCoordinate([g,_],"EPSG:4326",m);b.setCenter(y),v&&v>=0&&b.setZoom(v)}}}}});const rR={style:{position:"relative"}};zb.render=function(t,e,i,r,n,o){const a=ur("MenuToolBar"),s=ur("DrawToolBar"),l=ur("MeasureToolBar"),u=ur("OLXMap");return Dt(),Ri("div",{class:"mainViewContent",style:No(t.mainContainStyle)},[et(u,{mapid:t.mapid,viewOptions:t.viewOptions,"multi-world":t.multiWorld,mapgroup:t.mapgroup,hasLayerManager:!0,viewProjection:t.viewProjectionRef,initTDTLayers:t.initTDTLayersRef,onMapInited:t.mapInitedHandler},{mapLeftPanel:Ei(()=>[Gi(' 图层树class="mapstyle"  '),Gi(' <LayerTree class="layerTree" :style="heightStyle" v-show="layerTreeVisible"></LayerTree> '),Gi(" 扩展弹框 "),Ka(t.$slots,"mapLeftPanelGroup")]),mapRightExtend:Ei(()=>[Gi("地图扩展菜单 "),ze("div",rR,[et(a,{onLocate:t.doLocation},null,8,["onLocate"]),Fi(et(s,{xmap:t.mapRef},null,8,["xmap"]),[[gh,t.mapMenuState.drawTool]]),Fi(et(l,{xmap:t.mapRef},null,8,["xmap"]),[[gh,t.mapMenuState.measureTool]])]),Gi(" 扩展菜单 "),Ka(t.$slots,"extendMenuGroup")]),_:3},8,["mapid","viewOptions","multi-world","mapgroup","viewProjection","initTDTLayers","onMapInited"])],4)},zb.__file="src/components/XMapView/index.vue";const nR={class:"row items-center"},oR={class:"text-weight-bold text-primary"},aR={class:"row full-width no-wrap"},sR={class:"row items-center justify-center q-gutter-sm no-wrap layer_label_nowrap"},lR=["title"],uR={class:"gt-sm row items-center justify-center q-gutter-sm no-wrap layer_right_bar"},cR={class:"cursor-pointer"},hR={title:"透明度"},dR=["onClick"],pR={class:"row items-center q-gutter-sm"};var fR=hn({__name:"LayerTree",props:{xmap:kd([Md,ba]).isRequired,moreContextMenu:Dh().def([])},setup(t){const e=OC(),i=SC,r=t,n=w(()=>{if(r.moreContextMenu.length>0){const C=[...s];return C.push(...r.moreContextMenu),C}return s}),o={grid:"gis:grid",vector:"gis:extent-alt",mvt:"gis:mvt",symbol:"gis:layer-poi"};function a(C){let k=o[C];return k||(k="gis:layer-landcover"),k}const s=[{name:"升序",icon:"gis:layer-up",value:"upMove"},{name:"降序",icon:"gis:layer-down",value:"downMove"},{name:"定位",icon:"gis:location-on",value:"location"},{name:"删除",icon:"gis:layer-2-rm-o",value:"delete"}];function l(C,k){switch(C.value){case"upMove":x(k.id,1);break;case"downMove":x(k.id,-1);break;case"location":(function(A){v.mapEventBus.eventEmit(kt.LAYER_LOCATE,A)})(k.id);break;case"delete":e.dialog({title:"确认提示",message:`确定移除图层:${k.label}？`,cancel:!0,persistent:!0}).onOk(()=>{(function(A){v.mapEventBus.eventEmit(kt.LAYER_REMOVED,b({id:A}))})(k.id)}).onCancel(()=>{});break;default:const L={item:C,id:k.id,name:k.name,label:k.label};v.mapEventBus.eventEmit(kt.LAYER_TREE_CONTEXT_MENU,b(L))}}function u(C){return C===v.swipeid?"gis:map-control":"gis:map-o"}const c=G([]),h=G(""),d=G([]),p=G([]);let f=[];function g(C){c.value=[];let k,L=[];const A=C.length;for(let T=0;T<A;T++){const R=C[T],M={id:R.id,name:R.name,label:R.alias??R.name,group:R.group,minZoom:R.minZoom,maxZoom:R.maxZoom,visible:R.visible,opacity:R.opacity,type:R.type};let q,P,F;T<A-1&&(q=C[T+1]),q&&(F=q.group),P=M.group,P?k===P?L[L.length-1].children.push(M):q&&F===P?L.push({id:Gr(),label:P,header:"group",children:[M]}):L.push(M):L.push(M),k=P}c.value=L;const E=c.value.length,I=[];for(let T=0;T<E;T++){const R=c.value[T];if(I.push(R.id),R.children){let M=!0;const q=R.children.length;for(let P=0;P<q;P++){let F=R.children[P];F.visible?f.push(F.id):M=!1}M&&f.push(R.id)}else R.visible&&f.push(R.id)}p.value=I,d.value=f}function _(C){C.mapID==v.mapid&&r.xmap&&g(r.xmap.LayerManager.LayerItemList)}ae(()=>r.xmap,C=>{C&&(v.mapEventBus=C.mapEventBus,v.mapid=C.target,g(C.LayerManager.LayerItemList),v.mapEventBus.eventOn(kt.LAYER_CHANGED,_))},{immediate:!0}),ae(()=>d,()=>{const C=Vr(d.value),k=f,L=C.filter(E=>!k.includes(E)),A=k.filter(E=>!C.includes(E));L&&L.forEach(E=>{m(E,!0)}),A&&A.forEach(E=>{m(E,!1)}),f=[...C]},{immediate:!1,deep:!0});const v=Un({mapEventBus:void 0,mapid:"map",mapgroup:"map",swipeid:void 0});function b(C,k=null){if(r.xmap)return r.xmap.newEvtArgs(C,k);{const L=new $v(v.mapid,"map");return L.data=C,L.target=k,L}}function m(C,k){v.mapEventBus.eventEmit(kt.LAYER_VISIBLE_CHANGED,b({id:C,visible:k}))}function y(C){const k=C.opacity;(function(L,A){let E=1;E=A>1?1:A<0?0:A,v.mapEventBus.eventEmit(kt.LAYER_OPACITY_CHANGED,b({id:L,opacity:E}))})(C.id,k)}function x(C,k){v.mapEventBus.eventEmit(kt.LAYER_ORDER_CHANGED,b({layerID:C,updown:k}))}return(C,k)=>{const L=ur("Icon");return Dt(),Er(Ot(PI),{style:{height:"100%",width:"100%"}},{default:Ei(()=>[et(Ot(JI),{style:{width:"100%"},nodes:c.value,"node-key":"id","label-key":"label","tick-strategy":"leaf","no-connectors":"",selected:h.value,"onUpdate:selected":k[0]||(k[0]=A=>h.value=A),ticked:d.value,"onUpdate:ticked":k[1]||(k[1]=A=>d.value=A),expanded:p.value,"onUpdate:expanded":k[2]||(k[2]=A=>p.value=A)},{"header-group":Ei(A=>[ze("div",nR,[et(L,{icon:"gis:folder-globe-o"}),ze("div",oR,Sl(A.node.label),1)])]),"default-header":Ei(A=>[ze("div",aR,[ze("div",sR,[et(L,{icon:a(A.node.type)},null,8,["icon"]),ze("span",{title:A.node.name},Sl(A.node.label),9,lR)]),et(Ot(DI),{class:"gt-sm"}),ze("div",uR,[ze("div",cR,[ze("span",hR,Sl(A.node.opacity),1),et(Ot(MI),{modelValue:A.node.opacity,"onUpdate:modelValue":[E=>A.node.opacity=E,E=>y(A.node)],"auto-save":"",class:"layer_opacity_slider"},{default:Ei(E=>[et(Ot(Bo),{modelValue:E.value,"onUpdate:modelValue":I=>E.value=I,step:.05,min:0,max:1,onKeyup:LM(E.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),ze("span",{title:"设置透视图层",onClick:IM(E=>function(I){I&&(v.swipeid=I,v.mapEventBus.eventEmit(kt.LAYER_SWIPE_CHANGED,b({id:I})))}(A.node.id),["stop"])},[et(L,{icon:u(A.node.id)},null,8,["icon"])],8,dR)])]),et(Ot(Zs),{target:!0,"context-menu":""},{default:Ei(()=>[et(Ot(b0),{dense:"",style:{"min-width":"100px"}},{default:Ei(()=>[(Dt(!0),Ri(fh,null,dx(n.value,(E,I)=>(Dt(),Ri(fh,null,[E.name?Fi((Dt(),Er(Ot(Qs),{key:0,onClick:T=>l(E,A.node),clickable:""},{default:Ei(()=>[et(Ot(rn),null,{default:Ei(()=>[ze("div",pR,[E.icon?(Dt(),Er(L,{key:0,icon:E.icon},null,8,["icon"])):Gi("v-if",!0),ze("span",null,Sl(E.name),1)])]),_:2},1024)]),_:2},1032,["onClick"])),[[Ot(i)]]):(Dt(),Er(Ot(Ln),{key:1}))],64))),256))]),_:2},1024)]),_:2},1024)]),_:1},8,["nodes","selected","ticked","expanded"])]),_:1})}}});function BC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}fR.__file="src/components/LayerTree.vue";var jC,Db={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Yl(t){return(t=Math.round(t))<0?0:t>255?255:t}function Bb(t){return t<0?0:t>1?1:t}function xf(t){return t[t.length-1]==="%"?Yl(parseFloat(t)/100*255):Yl(parseInt(t))}function Gc(t){return t[t.length-1]==="%"?Bb(parseFloat(t)/100):Bb(parseFloat(t))}function wf(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{jC={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in Db)return Db[i].slice();if(i[0]==="#")return i.length===4?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:i.length===7&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=i.indexOf("("),n=i.indexOf(")");if(r!==-1&&n+1===i.length){var o=i.substr(0,r),a=i.substr(r+1,n-(r+1)).split(","),s=1;switch(o){case"rgba":if(a.length!==4)return null;s=Gc(a.pop());case"rgb":return a.length!==3?null:[xf(a[0]),xf(a[1]),xf(a[2]),s];case"hsla":if(a.length!==4)return null;s=Gc(a.pop());case"hsl":if(a.length!==3)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Gc(a[1]),c=Gc(a[2]),h=c<=.5?c*(u+1):c+u-c*u,d=2*c-h;return[Yl(255*wf(d,h,l+1/3)),Yl(255*wf(d,h,l)),Yl(255*wf(d,h,l-1/3)),s];default:return null}}return null}}catch{}class Bi{constructor(e,i,r,n=1){this.r=e,this.g=i,this.b=r,this.a=n}static parse(e){if(!e)return;if(e instanceof Bi)return e;if(typeof e!="string")return;const i=jC(e);return i?new Bi(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[e,i,r,n]=this.toArray();return`rgba(${Math.round(e)},${Math.round(i)},${Math.round(r)},${n})`}toArray(){const{r:e,g:i,b:r,a:n}=this;return n===0?[0,0,0,0]:[255*e/n,255*i/n,255*r/n,n]}toArray01(){const{r:e,g:i,b:r,a:n}=this;return n===0?[0,0,0,0]:[e/n,i/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:e,g:i,b:r,a:n}=this;return[e,i,r,n]}}Bi.black=new Bi(0,0,0,1),Bi.white=new Bi(1,1,1,1),Bi.transparent=new Bi(0,0,0,0),Bi.red=new Bi(1,0,0,1),Bi.blue=new Bi(0,0,1,1);var rr=Bi;function Cu(t){return typeof t=="object"?["literal",t]:t}function gR(t,e){let i=t.stops;if(!i)return function(a,s){const l=["get",a.property];if(a.default===void 0)return s.type==="string"?["string",l]:l;if(s.type==="enum")return["match",l,Object.keys(s.values),l,a.default];{const u=[s.type==="color"?"to-color":s.type,l,Cu(a.default)];return s.type==="array"&&u.splice(1,0,s.value,s.length||null),u}}(t,e);const r=i&&typeof i[0][0]=="object",n=r||t.property!==void 0,o=r||!n;return i=i.map(a=>!n&&e.tokens&&typeof a[1]=="string"?[a[0],mR(a[1])]:[a[0],Cu(a[1])]),r?function(a,s,l){const u={},c={},h=[];for(let d=0;d<l.length;d++){const p=l[d],f=p[0].zoom;u[f]===void 0&&(u[f]={zoom:f,type:a.type,property:a.property,default:a.default},c[f]=[],h.push(f)),c[f].push([p[0].value,p[1]])}if(zm({},s)==="exponential"){const d=[Fm(a),["linear"],["zoom"]];for(const p of h)ms(d,p,Sf(u[p],s,c[p]),!1);return d}{const d=["step",["zoom"]];for(const p of h)ms(d,p,Sf(u[p],s,c[p]),!0);return Om(d),d}}(t,e,i):o?function(a,s,l,u=["zoom"]){const c=zm(a,s);let h,d=!1;if(c==="interval")h=["step",u],d=!0;else{if(c!=="exponential")throw new Error(`Unknown zoom function type "${c}"`);{const p=a.base!==void 0?a.base:1;h=[Fm(a),p===1?["linear"]:["exponential",p],u]}}for(const p of l)ms(h,p[0],p[1],d);return Om(h),h}(t,e,i):Sf(t,e,i)}function Fm(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function jb(t,e){const i=Cu(function(r,n){return r!==void 0?r:n!==void 0?n:void 0}(t.default,e.default));return i===void 0&&e.type==="resolvedImage"?"":i}function Sf(t,e,i){const r=zm(t,e),n=["get",t.property];if(r==="categorical"&&typeof i[0][0]=="boolean"){const o=["case"];for(const a of i)o.push(["==",n,a[0]],a[1]);return o.push(jb(t,e)),o}if(r==="categorical"){const o=["match",n];for(const a of i)ms(o,a[0],a[1],!1);return o.push(jb(t,e)),o}if(r==="interval"){const o=["step",["number",n]];for(const a of i)ms(o,a[0],a[1],!0);return Om(o),t.default===void 0?o:["case",["==",["typeof",n],"number"],o,Cu(t.default)]}if(r==="exponential"){const o=t.base!==void 0?t.base:1,a=[Fm(t),o===1?["linear"]:["exponential",o],["number",n]];for(const s of i)ms(a,s[0],s[1],!1);return t.default===void 0?a:["case",["==",["typeof",n],"number"],a,Cu(t.default)]}throw new Error(`Unknown property function type ${r}`)}function Om(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function ms(t,e,i,r){t.length>3&&e===t[t.length-2]||(r&&t.length===2||t.push(e),t.push(i))}function zm(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function mR(t){const e=["concat"],i=/{([^{}]+)}/g;let r=0;for(let n=i.exec(t);n!==null;n=i.exec(t)){const o=t.slice(r,i.lastIndex-n[0].length);r=i.lastIndex,o.length>0&&e.push(o),e.push(["get",n[1]])}if(e.length===1)return t;if(r<t.length)e.push(t.slice(r));else if(e.length===2)return["to-string",e[1]];return e}class vR extends Error{constructor(e,i){super(i),this.message=i,this.key=e}}var Hr=vR;class w0{constructor(e,i=[]){this.parent=e,this.bindings={};for(const[r,n]of i)this.bindings[r]=n}concat(e){return new w0(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var yR=w0;const Bd={kind:"null"},Te={kind:"number"},ot={kind:"string"},it={kind:"boolean"},Mn={kind:"color"},vs={kind:"object"},rt={kind:"value"},jd={kind:"collator"},Nd={kind:"formatted"},Hu={kind:"resolvedImage"};function lr(t,e){return{kind:"array",itemType:t,N:e}}function Yt(t){if(t.kind==="array"){const e=Yt(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}return t.kind}const _R=[Bd,Te,ot,it,Mn,Nd,vs,lr(rt),Hu];function Mu(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Mu(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const i of _R)if(!Mu(i,e))return null}}return`Expected ${Yt(t)} but found ${Yt(e)} instead.`}function S0(t,e){return e.some(i=>i.kind===t.kind)}function ku(t,e){return e.some(i=>i==="null"?t===null:i==="array"?Array.isArray(t):i==="object"?t&&!Array.isArray(t)&&typeof t=="object":i===typeof t)}class C0{constructor(e,i,r){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Dm{constructor(e,i,r,n,o){this.text=e.normalize?e.normalize():e,this.image=i,this.scale=r,this.fontStack=n,this.textColor=o}}class nn{constructor(e){this.sections=e}static fromString(e){return new nn([new Dm(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof nn?e:nn.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const i of this.sections){if(i.image){e.push(["image",i.image.name]);continue}e.push(i.text);const r={};i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),e.push(r)}return e}}class So{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new So({name:e,available:!1}):null}serialize(){return["image",this.name]}}function NC(t,e,i,r){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255?r===void 0||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,i,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[t,e,i,r]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ld(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof rr||t instanceof C0||t instanceof nn||t instanceof So)return!0;if(Array.isArray(t)){for(const e of t)if(!ld(e))return!1;return!0}if(typeof t=="object"){for(const e in t)if(!ld(t[e]))return!1;return!0}return!1}function gi(t){if(t===null)return Bd;if(typeof t=="string")return ot;if(typeof t=="boolean")return it;if(typeof t=="number")return Te;if(t instanceof rr)return Mn;if(t instanceof C0)return jd;if(t instanceof nn)return Nd;if(t instanceof So)return Hu;if(Array.isArray(t)){const e=t.length;let i;for(const r of t){const n=gi(r);if(i){if(i===n)continue;i=rt;break}i=n}return lr(i||rt,e)}return vs}function Kl(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof rr||t instanceof nn||t instanceof So?t.toString():JSON.stringify(t)}class M0{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(e.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ld(e[1]))return i.error("invalid value");const r=e[1];let n=gi(r);const o=i.expectedType;return n.kind!=="array"||n.N!==0||!o||o.kind!=="array"||typeof o.N=="number"&&o.N!==0||(n=o),new M0(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof rr?["rgba"].concat(this.value.toArray()):this.value instanceof nn?this.value.serialize():this.value}}var ud=M0,bi=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const Cf={string:ot,number:Te,boolean:it,object:vs};class k0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let r,n=1;const o=e[0];if(o==="array"){let s,l;if(e.length>2){const u=e[1];if(typeof u!="string"||!(u in Cf)||u==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);s=Cf[u],n++}else s=rt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);l=e[2],n++}r=lr(s,l)}else r=Cf[o];const a=[];for(;n<e.length;n++){const s=i.parse(e[n],n,rt);if(!s)return null;a.push(s)}return new k0(r,a)}evaluate(e){for(let i=0;i<this.args.length;i++){const r=this.args[i].evaluate(e);if(!Mu(this.type,gi(r)))return r;if(i===this.args.length-1)throw new bi(`Expected value to be of type ${Yt(this.type)}, but found ${Yt(gi(r))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,i=[e.kind];if(e.kind==="array"){const r=e.itemType;if(r.kind==="string"||r.kind==="number"||r.kind==="boolean"){i.push(r.kind);const n=e.N;(typeof n=="number"||this.args.length>1)&&i.push(n)}}return i.concat(this.args.map(r=>r.serialize()))}}var xn=k0;class $d{constructor(e){this.type=Nd,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return i.error("First argument must be an image or text section.");const n=[];let o=!1;for(let a=1;a<=e.length-1;++a){const s=e[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let l=null;if(s["font-scale"]&&(l=i.parse(s["font-scale"],1,Te),!l))return null;let u=null;if(s["text-font"]&&(u=i.parse(s["text-font"],1,lr(ot)),!u))return null;let c=null;if(s["text-color"]&&(c=i.parse(s["text-color"],1,Mn),!c))return null;const h=n[n.length-1];h.scale=l,h.font=u,h.textColor=c}else{const l=i.parse(e[a],1,rt);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,n.push({content:l,scale:null,font:null,textColor:null})}}return new $d(n)}evaluate(e){return new nn(this.sections.map(i=>{const r=i.content.evaluate(e);return gi(r)===Hu?new Dm("",r,null,null,null):new Dm(Kl(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))}eachChild(e){for(const i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const i of this.sections){e.push(i.content.serialize());const r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),i.textColor&&(r["text-color"]=i.textColor.serialize()),e.push(r)}return e}}class Vd{constructor(e){this.type=Hu,this.input=e}static parse(e,i){if(e.length!==2)return i.error("Expected two arguments.");const r=i.parse(e[1],1,ot);return r?new Vd(r):i.error("No image name provided.")}evaluate(e){const i=this.input.evaluate(e),r=So.fromString(i);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(i)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const bR={"to-boolean":it,"to-color":Mn,"to-number":Te,"to-string":ot};class T0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const r=e[0];if((r==="to-boolean"||r==="to-string")&&e.length!==2)return i.error("Expected one argument.");const n=bR[r],o=[];for(let a=1;a<e.length;a++){const s=i.parse(e[a],a,rt);if(!s)return null;o.push(s)}return new T0(n,o)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let i,r;for(const n of this.args){if(i=n.evaluate(e),r=null,i instanceof rr)return i;if(typeof i=="string"){const o=e.parseColor(i);if(o)return o}else if(Array.isArray(i)&&(r=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:NC(i[0],i[1],i[2],i[3]),!r))return new rr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new bi(r||`Could not parse color from value '${typeof i=="string"?i:String(JSON.stringify(i))}'`)}if(this.type.kind==="number"){let i=null;for(const r of this.args){if(i=r.evaluate(e),i===null)return 0;const n=Number(i);if(!isNaN(n))return n}throw new bi(`Could not convert ${JSON.stringify(i)} to number.`)}return this.type.kind==="formatted"?nn.fromString(Kl(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?So.fromString(Kl(this.args[0].evaluate(e))):Kl(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new $d([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vd(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(i=>{e.push(i.serialize())}),e}}var os=T0;const xR=["Unknown","Point","LineString","Polygon"];var $C=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?xR[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:r}=this.featureTileCoord,n=i*e-t[0],o=r*e-t[1];return this.featureDistanceData.bearing[0]*n+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=rr.parse(t)),e}};class as{constructor(e,i,r,n){this.name=e,this.type=i,this._evaluate=r,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,i){const r=e[0],n=as.definitions[r];if(!n)return i.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter(([u])=>!Array.isArray(u)||u.length===e.length-1);let l=null;for(const[u,c]of s){l=new UC(i.registry,i.path,null,i.scope);const h=[];let d=!1;for(let p=1;p<e.length;p++){const f=e[p],g=Array.isArray(u)?u[p-1]:u.type,_=l.parse(f,1+h.length,g);if(!_){d=!0;break}h.push(_)}if(!d)if(Array.isArray(u)&&u.length!==h.length)l.error(`Expected ${u.length} arguments, but found ${h.length} instead.`);else{for(let p=0;p<h.length;p++){const f=Array.isArray(u)?u[p]:u.type,g=h[p];l.concat(p+1).checkSubtype(f,g.type)}if(l.errors.length===0)return new as(r,o,c,h)}}if(s.length===1)i.errors.push(...l.errors);else{const u=(s.length?s:a).map(([h])=>{return d=h,Array.isArray(d)?`(${d.map(Yt).join(", ")})`:`(${Yt(d.type)}...)`;var d}).join(" | "),c=[];for(let h=1;h<e.length;h++){const d=i.parse(e[h],1+c.length);if(!d)return null;c.push(Yt(d.type))}i.error(`Expected arguments of type ${u}, but found (${c.join(", ")}) instead.`)}return null}static register(e,i){as.definitions=i;for(const r in i)e[r]=as}}var Js=as;class Gd{constructor(e,i,r){this.type=jd,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(e.length!==2)return i.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return i.error("Collator options argument must be an object.");const n=i.parse(r["case-sensitive"]!==void 0&&r["case-sensitive"],1,it);if(!n)return null;const o=i.parse(r["diacritic-sensitive"]!==void 0&&r["diacritic-sensitive"],1,it);if(!o)return null;let a=null;return r.locale&&(a=i.parse(r.locale,1,ot),!a)?null:new Gd(n,o,a)}evaluate(e){return new C0(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const ho=8192;function E0(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Hc(t,e){return!(t[0]<=e[0])&&!(t[2]>=e[2])&&!(t[1]<=e[1])&&!(t[3]>=e[3])}function wR(t,e){const i=function(o){return(180+o)/360}(t[0]),r=function(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}(t[1]),n=Math.pow(2,e.z);return[Math.round(i*n*ho),Math.round(r*n*ho)]}function SR(t,e,i){const r=t[0]-e[0],n=t[1]-e[1],o=t[0]-i[0],a=t[1]-i[1];return r*a-o*n==0&&r*o<=0&&n*a<=0}function CR(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function L0(t,e){let i=!1;for(let r=0,n=e.length;r<n;r++){const o=e[r];for(let a=0,s=o.length;a<s-1;a++){if(SR(t,o[a],o[a+1]))return!1;CR(t,o[a],o[a+1])&&(i=!i)}}return i}function MR(t,e){for(let i=0;i<e.length;i++)if(L0(t,e[i]))return!0;return!1}function Nb(t,e,i,r){const n=t[0]-i[0],o=t[1]-i[1],a=e[0]-i[0],s=e[1]-i[1],l=r[0]-i[0],u=r[1]-i[1],c=n*u-l*o,h=a*u-l*s;return c>0&&h<0||c<0&&h>0}function kR(t,e,i,r){const n=[e[0]-t[0],e[1]-t[1]];return(o=[r[0]-i[0],r[1]-i[1]])[0]*(a=n)[1]-o[1]*a[0]!=0&&!(!Nb(t,e,i,r)||!Nb(i,r,t,e));var o,a}function TR(t,e,i){for(const r of i)for(let n=0;n<r.length-1;++n)if(kR(t,e,r[n],r[n+1]))return!0;return!1}function VC(t,e){for(let i=0;i<t.length;++i)if(!L0(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(TR(t[i],t[i+1],e))return!1;return!0}function ER(t,e){for(let i=0;i<e.length;i++)if(VC(t,e[i]))return!0;return!1}function Bm(t,e,i){const r=[];for(let n=0;n<t.length;n++){const o=[];for(let a=0;a<t[n].length;a++){const s=wR(t[n][a],i);E0(e,s),o.push(s)}r.push(o)}return r}function $b(t,e,i){const r=[];for(let n=0;n<t.length;n++){const o=Bm(t[n],e,i);r.push(o)}return r}function GC(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){const n=.5*r;let o=t[0]-i[0]>n?-r:i[0]-t[0]>n?r:0;o===0&&(o=t[0]-i[2]>n?-r:i[2]-t[0]>n?r:0),t[0]+=o}E0(e,t)}function Vb(t,e,i,r){const n=Math.pow(2,r.z)*ho,o=[r.x*ho,r.y*ho],a=[];if(!t)return a;for(const s of t)for(const l of s){const u=[l.x+o[0],l.y+o[1]];GC(u,e,i,n),a.push(u)}return a}function Gb(t,e,i,r){const n=Math.pow(2,r.z)*ho,o=[r.x*ho,r.y*ho],a=[];if(!t)return a;for(const s of t){const l=[];for(const u of s){const c=[u.x+o[0],u.y+o[1]];E0(e,c),l.push(c)}a.push(l)}if(e[2]-e[0]<=n/2){(function(s){s[0]=s[1]=1/0,s[2]=s[3]=-1/0})(e);for(const s of a)for(const l of s)GC(l,e,i,n)}return a}class Xl{constructor(e,i){this.type=it,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ld(e[1])){const r=e[1];if(r.type==="FeatureCollection")for(let n=0;n<r.features.length;++n){const o=r.features[n].geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new Xl(r,r.features[n].geometry)}else if(r.type==="Feature"){const n=r.geometry.type;if(n==="Polygon"||n==="MultiPolygon")return new Xl(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Xl(r,r)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,r){const n=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=i.canonicalID();if(!a)return!1;if(r.type==="Polygon"){const s=Bm(r.coordinates,o,a),l=Vb(i.geometry(),n,o,a);if(!Hc(n,o))return!1;for(const u of l)if(!L0(u,s))return!1}if(r.type==="MultiPolygon"){const s=$b(r.coordinates,o,a),l=Vb(i.geometry(),n,o,a);if(!Hc(n,o))return!1;for(const u of l)if(!MR(u,s))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,r){const n=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=i.canonicalID();if(!a)return!1;if(r.type==="Polygon"){const s=Bm(r.coordinates,o,a),l=Gb(i.geometry(),n,o,a);if(!Hc(n,o))return!1;for(const u of l)if(!VC(u,s))return!1}if(r.type==="MultiPolygon"){const s=$b(r.coordinates,o,a),l=Gb(i.geometry(),n,o,a);if(!Hc(n,o))return!1;for(const u of l)if(!ER(u,s))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var I0=Xl;function Hd(t){if(t instanceof Js&&(t.name==="get"&&t.args.length===1||t.name==="feature-state"||t.name==="has"&&t.args.length===1||t.name==="properties"||t.name==="geometry-type"||t.name==="id"||/^filter-/.test(t.name))||t instanceof I0)return!1;let e=!0;return t.eachChild(i=>{e&&!Hd(i)&&(e=!1)}),e}function P0(t){if(t instanceof Js&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(i=>{e&&!P0(i)&&(e=!1)}),e}function R0(t,e){if(t instanceof Js&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild(r=>{i&&!R0(r,e)&&(i=!1)}),i}class q0{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const r=e[1];return i.scope.has(r)?new q0(r,i.scope.get(r)):i.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var HC=q0;class A0{constructor(e,i=[],r,n=new yR,o=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=n,this.errors=o,this.expectedType=r}parse(e,i,r,n,o={}){return i?this.concat(i,r,n)._parse(e,o):this._parse(e,o)}_parse(e,i){function r(n,o,a){return a==="assert"?new xn(o,[n]):a==="coerce"?new os(o,[n]):n}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if(typeof n!="string")return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[n];if(o){let a=o.parse(e,this);if(!a)return null;if(this.expectedType){const s=this.expectedType,l=a.type;if(s.kind!=="string"&&s.kind!=="number"&&s.kind!=="boolean"&&s.kind!=="object"&&s.kind!=="array"||l.kind!=="value")if(s.kind!=="color"&&s.kind!=="formatted"&&s.kind!=="resolvedImage"||l.kind!=="value"&&l.kind!=="string"){if(this.checkSubtype(s,l))return null}else a=r(a,s,i.typeAnnotation||"coerce");else a=r(a,s,i.typeAnnotation||"assert")}if(!(a instanceof ud)&&a.type.kind!=="resolvedImage"&&jm(a)){const s=new $C;try{a=new ud(a.type,a.evaluate(s))}catch(l){return this.error(l.message),null}}return a}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return e===void 0?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,i,r){const n=typeof e=="number"?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new A0(this.registry,n,i||null,o,this.errors)}error(e,...i){const r=`${this.key}${i.map(n=>`[${n}]`).join("")}`;this.errors.push(new Hr(r,e))}checkSubtype(e,i){const r=Mu(e,i);return r&&this.error(r),r}}var UC=A0;function jm(t){if(t instanceof HC)return jm(t.boundExpression);if(t instanceof Js&&t.name==="error"||t instanceof Gd||t instanceof I0)return!1;const e=t instanceof os||t instanceof xn;let i=!0;return t.eachChild(r=>{i=e?i&&jm(r):i&&r instanceof ud}),!!i&&Hd(t)&&R0(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function WC(t,e){const i=t.length-1;let r,n,o=0,a=i,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=t[s],n=t[s+1],r<=e){if(s===i||e<n)return s;o=s+1}else{if(!(r>e))throw new bi("Input is not a number.");a=s-1}return 0}class F0{constructor(e,i,r){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(const[n,o]of r)this.labels.push(n),this.outputs.push(o)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");const r=i.parse(e[1],1,Te);if(!r)return null;const n=[];let o=null;i.expectedType&&i.expectedType.kind!=="value"&&(o=i.expectedType);for(let a=1;a<e.length;a+=2){const s=a===1?-1/0:e[a],l=e[a+1],u=a,c=a+1;if(typeof s!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=s)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const h=i.parse(l,c,o);if(!h)return null;o=o||h.type,n.push([s,h])}return new F0(o,r,n)}evaluate(e){const i=this.labels,r=this.outputs;if(i.length===1)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=i[0])return r[0].evaluate(e);const o=i.length;return n>=i[o-1]?r[o-1].evaluate(e):r[WC(i,n)].evaluate(e)}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e}}var YC=F0,LR=Wa;function Wa(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}Wa.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},Wa.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},Wa.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},Wa.prototype.solveCurveX=function(t,e){var i,r,n,o,a;for(e===void 0&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;t>o?i=n:r=n,n=.5*(r-i)+i}return n},Wa.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var IR=BC(LR);function Qi(t,e,i){return t*(1-i)+e*i}var PR=Object.freeze({__proto__:null,number:Qi,color:function(t,e,i){return new rr(Qi(t.r,e.r,i),Qi(t.g,e.g,i),Qi(t.b,e.b,i),Qi(t.a,e.a,i))},array:function(t,e,i){return t.map((r,n)=>Qi(r,e[n],i))}});const KC=.95047,XC=1.08883,ZC=4/29,ys=6/29,QC=3*ys*ys,RR=ys*ys*ys,qR=Math.PI/180,AR=180/Math.PI;function Mf(t){return t>RR?Math.pow(t,1/3):t/QC+ZC}function kf(t){return t>ys?t*t*t:QC*(t-ZC)}function Tf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ef(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function JC(t){const e=Ef(t.r),i=Ef(t.g),r=Ef(t.b),n=Mf((.4124564*e+.3575761*i+.1804375*r)/KC),o=Mf((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-Mf((.0193339*e+.119192*i+.9503041*r)/XC)),alpha:t.a}}function eM(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*kf(e),i=KC*kf(i),r=XC*kf(r),new rr(Tf(3.2404542*i-1.5371385*e-.4985314*r),Tf(-.969266*i+1.8760108*e+.041556*r),Tf(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}function FR(t,e,i){const r=e-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}const Uc={forward:JC,reverse:eM,interpolate:function(t,e,i){return{l:Qi(t.l,e.l,i),a:Qi(t.a,e.a,i),b:Qi(t.b,e.b,i),alpha:Qi(t.alpha,e.alpha,i)}}},Wc={forward:function(t){const{l:e,a:i,b:r}=JC(t),n=Math.atan2(r,i)*AR;return{h:n<0?n+360:n,c:Math.sqrt(i*i+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*qR,i=t.c;return eM({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:FR(t.h,e.h,i),c:Qi(t.c,e.c,i),l:Qi(t.l,e.l,i),alpha:Qi(t.alpha,e.alpha,i)}}};class cd{constructor(e,i,r,n,o){this.type=e,this.operator=i,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(e,i,r,n){let o=0;if(e.name==="exponential")o=Lf(i,e.base,r,n);else if(e.name==="linear")o=Lf(i,1,r,n);else if(e.name==="cubic-bezier"){const a=e.controlPoints;o=new IR(a[0],a[1],a[2],a[3]).solve(Lf(i,1,r,n))}return o}static parse(e,i){let[r,n,o,...a]=e;if(!Array.isArray(n)||n.length===0)return i.error("Expected an interpolation type expression.",1);if(n[0]==="linear")n={name:"linear"};else if(n[0]==="exponential"){const u=n[1];if(typeof u!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:u}}else{if(n[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const u=n.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:u}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(o=i.parse(o,2,Te),!o)return null;const s=[];let l=null;r==="interpolate-hcl"||r==="interpolate-lab"?l=Mn:i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);for(let u=0;u<a.length;u+=2){const c=a[u],h=a[u+1],d=u+3,p=u+4;if(typeof c!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(s.length&&s[s.length-1][0]>=c)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const f=i.parse(h,p,l);if(!f)return null;l=l||f.type,s.push([c,f])}return l.kind==="number"||l.kind==="color"||l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number"?new cd(l,r,n,o,s):i.error(`Type ${Yt(l)} is not interpolatable.`)}evaluate(e){const i=this.labels,r=this.outputs;if(i.length===1)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=i[0])return r[0].evaluate(e);const o=i.length;if(n>=i[o-1])return r[o-1].evaluate(e);const a=WC(i,n),s=i[a],l=i[a+1],u=cd.interpolationFactor(this.interpolation,n,s,l),c=r[a].evaluate(e),h=r[a+1].evaluate(e);return this.operator==="interpolate"?PR[this.type.kind.toLowerCase()](c,h,u):this.operator==="interpolate-hcl"?Wc.reverse(Wc.interpolate(Wc.forward(c),Wc.forward(h),u)):Uc.reverse(Uc.interpolate(Uc.forward(c),Uc.forward(h),u))}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)i.push(this.labels[r],this.outputs[r].serialize());return i}}function Lf(t,e,i,r){const n=r-i,o=t-i;return n===0?0:e===1?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}var ra=cd;class O0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expectected at least one argument.");let r=null;const n=i.expectedType;n&&n.kind!=="value"&&(r=n);const o=[];for(const s of e.slice(1)){const l=i.parse(s,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,o.push(l)}const a=n&&o.some(s=>Mu(n,s.type));return new O0(a?rt:r,o)}evaluate(e){let i,r=null,n=0;for(const o of this.args){if(n++,r=o.evaluate(e),r&&r instanceof So&&!r.available&&(i||(i=r),r=null,n===this.args.length))return i;if(r!==null)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var tM=O0;class z0{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let o=1;o<e.length-1;o+=2){const a=e[o];if(typeof a!="string")return i.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return i.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=i.parse(e[o+1],o+1);if(!s)return null;r.push([a,s])}const n=i.parse(e[e.length-1],e.length-1,i.expectedType,r);return n?new z0(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[i,r]of this.bindings)e.push(i,r.serialize());return e.push(this.result.serialize()),e}}var iM=z0;class D0{constructor(e,i,r){this.type=e,this.index=i,this.input=r}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=i.parse(e[1],1,Te),n=i.parse(e[2],2,lr(i.expectedType||rt));if(!r||!n)return null;const o=n.type;return new D0(o.itemType,r,n)}evaluate(e){const i=this.index.evaluate(e),r=this.input.evaluate(e);if(i<0)throw new bi(`Array index out of bounds: ${i} < 0.`);if(i>=r.length)throw new bi(`Array index out of bounds: ${i} > ${r.length-1}.`);if(i!==Math.floor(i))throw new bi(`Array index must be an integer, but found ${i} instead.`);return r[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var OR=D0;class B0{constructor(e,i){this.type=it,this.needle=e,this.haystack=i}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=i.parse(e[1],1,rt),n=i.parse(e[2],2,rt);return r&&n?S0(r.type,[it,ot,Te,Bd,rt])?new B0(r,n):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(r.type)} instead`):null}evaluate(e){const i=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(r==null)return!1;if(!ku(i,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(gi(i))} instead.`);if(!ku(r,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${Yt(gi(r))} instead.`);return r.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var zR=B0;class hd{constructor(e,i,r){this.type=Te,this.needle=e,this.haystack=i,this.fromIndex=r}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=i.parse(e[1],1,rt),n=i.parse(e[2],2,rt);if(!r||!n)return null;if(!S0(r.type,[it,ot,Te,Bd,rt]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(r.type)} instead`);if(e.length===4){const o=i.parse(e[3],3,Te);return o?new hd(r,n,o):null}return new hd(r,n)}evaluate(e){const i=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!ku(i,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Yt(gi(i))} instead.`);if(!ku(r,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${Yt(gi(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(e);return r.indexOf(i,n)}return r.indexOf(i)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var DR=hd;class j0{constructor(e,i,r,n,o,a){this.inputType=e,this.type=i,this.input=r,this.cases=n,this.outputs=o,this.otherwise=a}static parse(e,i){if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");let r,n;i.expectedType&&i.expectedType.kind!=="value"&&(n=i.expectedType);const o={},a=[];for(let u=2;u<e.length-1;u+=2){let c=e[u];const h=e[u+1];Array.isArray(c)||(c=[c]);const d=i.concat(u);if(c.length===0)return d.error("Expected at least one branch label.");for(const f of c){if(typeof f!="number"&&typeof f!="string")return d.error("Branch labels must be numbers or strings.");if(typeof f=="number"&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof f=="number"&&Math.floor(f)!==f)return d.error("Numeric branch labels must be integer values.");if(r){if(d.checkSubtype(r,gi(f)))return null}else r=gi(f);if(o[String(f)]!==void 0)return d.error("Branch labels must be unique.");o[String(f)]=a.length}const p=i.parse(h,u,n);if(!p)return null;n=n||p.type,a.push(p)}const s=i.parse(e[1],1,rt);if(!s)return null;const l=i.parse(e[e.length-1],e.length-1,n);return l?s.type.kind!=="value"&&i.concat(1).checkSubtype(r,s.type)?null:new j0(r,n,s,o,a,l):null}evaluate(e){const i=this.input.evaluate(e);return(gi(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),r=[],n={};for(const a of i){const s=n[this.cases[a]];s===void 0?(n[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[s][1].push(a)}const o=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,s]of r)s.length===1?e.push(o(s[0])):e.push(s.map(o)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var BR=j0;class N0{constructor(e,i,r){this.type=e,this.branches=i,this.otherwise=r}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");let r;i.expectedType&&i.expectedType.kind!=="value"&&(r=i.expectedType);const n=[];for(let a=1;a<e.length-1;a+=2){const s=i.parse(e[a],a,it);if(!s)return null;const l=i.parse(e[a+1],a+1,r);if(!l)return null;n.push([s,l]),r=r||l.type}const o=i.parse(e[e.length-1],e.length-1,r);return o?new N0(r,n,o):null}evaluate(e){for(const[i,r]of this.branches)if(i.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[i,r]of this.branches)e(i),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var jR=N0;class dd{constructor(e,i,r,n){this.type=e,this.input=i,this.beginIndex=r,this.endIndex=n}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=i.parse(e[1],1,rt),n=i.parse(e[2],2,Te);if(!r||!n)return null;if(!S0(r.type,[lr(rt),ot,rt]))return i.error(`Expected first argument to be of type array or string, but found ${Yt(r.type)} instead`);if(e.length===4){const o=i.parse(e[3],3,Te);return o?new dd(r.type,r,n,o):null}return new dd(r.type,r,n)}evaluate(e){const i=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!ku(i,["string","array"]))throw new bi(`Expected first argument to be of type array or string, but found ${Yt(gi(i))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(e);return i.slice(r,n)}return i.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var NR=dd;function Hb(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function rM(t,e,i,r){return r.compare(e,i)===0}function el(t,e,i){const r=t!=="=="&&t!=="!=";return class nM{constructor(o,a,s){this.type=it,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");const s=o[0];let l=a.parse(o[1],1,rt);if(!l)return null;if(!Hb(s,l.type))return a.concat(1).error(`"${s}" comparisons are not supported for type '${Yt(l.type)}'.`);let u=a.parse(o[2],2,rt);if(!u)return null;if(!Hb(s,u.type))return a.concat(2).error(`"${s}" comparisons are not supported for type '${Yt(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error(`Cannot compare types '${Yt(l.type)}' and '${Yt(u.type)}'.`);r&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new xn(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new xn(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(c=a.parse(o[3],3,jd),!c)return null}return new nM(l,u,c)}evaluate(o){const a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(r&&this.hasUntypedArgument){const l=gi(a),u=gi(s);if(l.kind!==u.kind||l.kind!=="string"&&l.kind!=="number")throw new bi(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const l=gi(a),u=gi(s);if(l.kind!=="string"||u.kind!=="string")return e(o,a,s)}return this.collator?i(o,a,s,this.collator.evaluate(o)):e(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}serialize(){const o=[t];return this.eachChild(a=>{o.push(a.serialize())}),o}}}const $R=el("==",function(t,e,i){return e===i},rM),VR=el("!=",function(t,e,i){return e!==i},function(t,e,i,r){return!rM(0,e,i,r)}),GR=el("<",function(t,e,i){return e<i},function(t,e,i,r){return r.compare(e,i)<0}),HR=el(">",function(t,e,i){return e>i},function(t,e,i,r){return r.compare(e,i)>0}),UR=el("<=",function(t,e,i){return e<=i},function(t,e,i,r){return r.compare(e,i)<=0}),WR=el(">=",function(t,e,i){return e>=i},function(t,e,i,r){return r.compare(e,i)>=0});class $0{constructor(e,i,r,n,o,a){this.type=ot,this.number=e,this.locale=i,this.currency=r,this.unit=n,this.minFractionDigits=o,this.maxFractionDigits=a}static parse(e,i){if(e.length!==3)return i.error("Expected two arguments.");const r=i.parse(e[1],1,Te);if(!r)return null;const n=e[2];if(typeof n!="object"||Array.isArray(n))return i.error("NumberFormat options argument must be an object.");let o=null;if(n.locale&&(o=i.parse(n.locale,1,ot),!o))return null;let a=null;if(n.currency&&(a=i.parse(n.currency,1,ot),!a))return null;let s=null;if(n.unit&&(s=i.parse(n.unit,1,ot),!s))return null;let l=null;if(n["min-fraction-digits"]&&(l=i.parse(n["min-fraction-digits"],1,Te),!l))return null;let u=null;return n["max-fraction-digits"]&&(u=i.parse(n["max-fraction-digits"],1,Te),!u)?null:new $0(r,o,a,s,l,u)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class V0{constructor(e){this.type=Te,this.input=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=i.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${Yt(r.type)} instead.`):new V0(r):null}evaluate(e){const i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new bi(`Expected value to be of type string or array, but found ${Yt(gi(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(i=>{e.push(i.serialize())}),e}}const oM={"==":$R,"!=":VR,">":HR,"<":GR,">=":WR,"<=":UR,array:xn,at:OR,boolean:xn,case:jR,coalesce:tM,collator:Gd,format:$d,image:Vd,in:zR,"index-of":DR,interpolate:ra,"interpolate-hcl":ra,"interpolate-lab":ra,length:V0,let:iM,literal:ud,match:BR,number:xn,"number-format":$0,object:xn,slice:NR,step:YC,string:xn,"to-boolean":os,"to-color":os,"to-number":os,"to-string":os,var:HC,within:I0};function Ub(t,[e,i,r,n]){e=e.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);const o=n?n.evaluate(t):1,a=NC(e,i,r,o);if(a)throw new bi(a);return new rr(e/255*o,i/255*o,r/255*o,o)}function Wb(t,e){return t in e}function If(t,e){const i=e[t];return i===void 0?null:i}function Ro(t){return{type:t}}Js.register(oM,{error:[{kind:"error"},[ot],(t,[e])=>{throw new bi(e.evaluate(t))}],typeof:[ot,[rt],(t,[e])=>Yt(gi(e.evaluate(t)))],"to-rgba":[lr(Te,4),[Mn],(t,[e])=>e.evaluate(t).toArray()],rgb:[Mn,[Te,Te,Te],Ub],rgba:[Mn,[Te,Te,Te,Te],Ub],has:{type:it,overloads:[[[ot],(t,[e])=>Wb(e.evaluate(t),t.properties())],[[ot,vs],(t,[e,i])=>Wb(e.evaluate(t),i.evaluate(t))]]},get:{type:rt,overloads:[[[ot],(t,[e])=>If(e.evaluate(t),t.properties())],[[ot,vs],(t,[e,i])=>If(e.evaluate(t),i.evaluate(t))]]},"feature-state":[rt,[ot],(t,[e])=>If(e.evaluate(t),t.featureState||{})],properties:[vs,[],t=>t.properties()],"geometry-type":[ot,[],t=>t.geometryType()],id:[rt,[],t=>t.id()],zoom:[Te,[],t=>t.globals.zoom],pitch:[Te,[],t=>t.globals.pitch||0],"distance-from-center":[Te,[],t=>t.distanceFromCenter()],"heatmap-density":[Te,[],t=>t.globals.heatmapDensity||0],"line-progress":[Te,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Te,[],t=>t.globals.skyRadialProgress||0],accumulated:[rt,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[Te,Ro(Te),(t,e)=>{let i=0;for(const r of e)i+=r.evaluate(t);return i}],"*":[Te,Ro(Te),(t,e)=>{let i=1;for(const r of e)i*=r.evaluate(t);return i}],"-":{type:Te,overloads:[[[Te,Te],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[Te],(t,[e])=>-e.evaluate(t)]]},"/":[Te,[Te,Te],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[Te,[Te,Te],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[Te,[],()=>Math.LN2],pi:[Te,[],()=>Math.PI],e:[Te,[],()=>Math.E],"^":[Te,[Te,Te],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[Te,[Te],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Te,[Te],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Te,[Te],(t,[e])=>Math.log(e.evaluate(t))],log2:[Te,[Te],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Te,[Te],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Te,[Te],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Te,[Te],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Te,[Te],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Te,[Te],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Te,[Te],(t,[e])=>Math.atan(e.evaluate(t))],min:[Te,Ro(Te),(t,e)=>Math.min(...e.map(i=>i.evaluate(t)))],max:[Te,Ro(Te),(t,e)=>Math.max(...e.map(i=>i.evaluate(t)))],abs:[Te,[Te],(t,[e])=>Math.abs(e.evaluate(t))],round:[Te,[Te],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Te,[Te],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Te,[Te],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[it,[ot,rt],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[it,[rt],(t,[e])=>t.id()===e.value],"filter-type-==":[it,[ot],(t,[e])=>t.geometryType()===e.value],"filter-<":[it,[ot,rt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<n}],"filter-id-<":[it,[rt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i<r}],"filter->":[it,[ot,rt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>n}],"filter-id->":[it,[rt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i>r}],"filter-<=":[it,[ot,rt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<=n}],"filter-id-<=":[it,[rt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i<=r}],"filter->=":[it,[ot,rt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>=n}],"filter-id->=":[it,[rt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i>=r}],"filter-has":[it,[rt],(t,[e])=>e.value in t.properties()],"filter-has-id":[it,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[it,[lr(ot)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[it,[lr(rt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[it,[ot,lr(rt)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[it,[ot,lr(rt)],(t,[e,i])=>function(r,n,o,a){for(;o<=a;){const s=o+a>>1;if(n[s]===r)return!0;n[s]>r?a=s-1:o=s+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:it,overloads:[[[it,it],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[Ro(it),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[Ro(it),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[it,[it],(t,[e])=>!e.evaluate(t)],"is-supported-script":[it,[ot],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[ot,[ot],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ot,[ot],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ot,Ro(rt),(t,e)=>e.map(i=>Kl(i.evaluate(t))).join("")],"resolved-locale":[ot,[jd],(t,[e])=>e.evaluate(t).resolvedLocale()]});var aM=oM;function Nm(t){return{result:"success",value:t}}function Ya(t){return{result:"error",value:t}}function sM(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}class YR{constructor(e,i){this.expression=e,this._warningHistory={},this._evaluator=new $C,this._defaultValue=i?function(r){return r.type==="color"&&(sM(r.default)||Array.isArray(r.default))?new rr(0,0,0,0):r.type==="color"?rr.parse(r.default)||null:r.default===void 0?null:r.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(e,i,r,n,o,a,s,l){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(e,i,r,n,o,a,s,l){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new bi(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"),this._defaultValue}}}function $m(t,e){const i=new UC(aM,[],e?function(n){const o={color:Mn,string:ot,number:Te,enum:ot,boolean:it,formatted:Nd,resolvedImage:Hu};return n.type==="array"?lr(o[n.value]||rt,n.length):o[n.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?Nm(new YR(r,e)):Ya(i.errors)}class KR{constructor(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!P0(i.expression)}evaluateWithoutErrorHandling(e,i,r,n,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,i,r,n,o,a)}evaluate(e,i,r,n,o,a){return this._styleExpression.evaluate(e,i,r,n,o,a)}}class XR{constructor(e,i,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!P0(i.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,i,r,n,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,i,r,n,o,a)}evaluate(e,i,r,n,o,a){return this._styleExpression.evaluate(e,i,r,n,o,a)}interpolationFactor(e,i,r){return this.interpolationType?ra.interpolationFactor(this.interpolationType,e,i,r):0}}function ZR(t,e){if((t=$m(t,e)).result==="error")return t;const i=t.value.expression,r=Hd(i);if(!r&&!function(s){return s["property-type"]==="data-driven"}(e))return Ya([new Hr("","data expressions not supported")]);const n=R0(i,["zoom","pitch","distance-from-center"]);if(!n&&!function(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}(e))return Ya([new Hr("","zoom expressions not supported")]);const o=hh(i);if(!o&&!n)return Ya([new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Hr)return Ya([o]);if(o instanceof ra&&!function(s){return!!s.expression&&s.expression.interpolated}(e))return Ya([new Hr("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Nm(new KR(r?"constant":"source",t.value));const a=o instanceof ra?o.interpolation:void 0;return Nm(new XR(r?"camera":"composite",t.value,o.labels,a))}function hh(t){let e=null;if(t instanceof iM)e=hh(t.result);else if(t instanceof tM){for(const i of t.args)if(e=hh(i),e)break}else(t instanceof YC||t instanceof ra)&&t.input instanceof Js&&t.input.name==="zoom"&&(e=t);return e instanceof Hr||t.eachChild(i=>{const r=hh(i);r instanceof Hr?e=r:!e&&r?e=new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Hr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Vm(t){if(Array.isArray(t))return t.map(Vm);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Vm(t[i]);return e}return function(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}(t)}var lM={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function uM(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!uM(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function QR(t,e="fill"){if(t==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};uM(t)||(t=dh(t));const i=t;let r=!0;try{r=function(u){if(!_s(u))return u;let c=Vm(u);return hM(c),c=cM(c),c}(i)}catch{}const n=lM[`filter_${e}`],o=$m(r,n);let a=null;if(o.result==="error")throw new Error(o.value.map(u=>`${u.key}: ${u.message}`).join(", "));a=(u,c,h)=>o.value.evaluate(u,c,{},h);let s=null,l=null;if(r!==i){const u=$m(i,n);if(u.result==="error")throw new Error(u.value.map(c=>`${c.key}: ${c.message}`).join(", "));s=(c,h,d,p,f)=>u.value.evaluate(c,h,{},d,void 0,void 0,p,f),l=!Hd(u.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:dM(r),needFeature:!!l}}function cM(t){if(!Array.isArray(t))return t;const e=function(i){if(JR.has(i[0])){for(let r=1;r<i.length;r++)if(_s(i[r]))return!0}return i}(t);return e===!0?e:e.map(i=>cM(i))}function hM(t){let e=!1;const i=[];if(t[0]==="case"){for(let r=1;r<t.length-1;r+=2)e=e||_s(t[r]),i.push(t[r+1]);i.push(t[t.length-1])}else if(t[0]==="match"){e=e||_s(t[1]);for(let r=2;r<t.length-1;r+=2)i.push(t[r+1]);i.push(t[t.length-1])}else if(t[0]==="step"){e=e||_s(t[1]);for(let r=1;r<t.length-1;r+=2)i.push(t[r+1])}e&&(t.length=0,t.push("any",...i));for(let r=1;r<t.length;r++)hM(t[r])}function _s(t){if(!Array.isArray(t))return!1;if((e=t[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let i=1;i<t.length;i++)if(_s(t[i]))return!0;return!1}const JR=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function eq(t,e){return t<e?-1:t>e?1:0}function dM(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(let e=1;e<t.length;e++)if(dM(t[e]))return!0;return!1}function dh(t){if(!t)return!0;const e=t[0];if(t.length<=1)return e!=="any";var i;return e==="=="?Pf(t[1],t[2],"=="):e==="!="?Yc(Pf(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Pf(t[1],t[2],e):e==="any"?(i=t.slice(1),["any"].concat(i.map(dh))):e==="all"?["all"].concat(t.slice(1).map(dh)):e==="none"?["all"].concat(t.slice(1).map(dh).map(Yc)):e==="in"?Yb(t[1],t.slice(2)):e==="!in"?Yc(Yb(t[1],t.slice(2))):e==="has"?Kb(t[1]):e==="!has"?Yc(Kb(t[1])):e!=="within"||t}function Pf(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function Yb(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(i=>typeof i!=typeof e[0])?["filter-in-large",t,["literal",e.sort(eq)]]:["filter-in-small",t,["literal",e]]}}function Kb(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Yc(t){return["!",t]}var tq=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function iq(t,e){const i={};for(const r in t)r!=="ref"&&(i[r]=t[r]);return tq.forEach(r=>{r in e&&(i[r]=e[r])}),i}function pM(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=iq(t[i],e[t[i].ref]));return t}var Xb={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},wl=" ",Zb=/(italic|oblique)$/i,Qb={},rq=function(t,e,i){var r=Qb[t];if(!r){Array.isArray(t)||(t=[t]);for(var n,o,a=400,s="normal",l=[],u=0,c=t.length;u<c;++u){var h=t[u].split(" "),d=h[h.length-1].toLowerCase();for(var p in d=="normal"||d=="italic"||d=="oblique"?(s=o?s:d,o=!0,h.pop(),d=h[h.length-1].toLowerCase()):Zb.test(d)&&(d=d.replace(Zb,""),s=o?s:h[h.length-1].replace(d,""),o=!0),Xb){var f=h.length>1?h[h.length-2].toLowerCase():"";if(d==p||d==p.replace("-","")||f+"-"+d==p){a=n?a:Xb[p],h.pop(),f&&p.startsWith(f)&&h.pop();break}}n||typeof d!="number"||(a=d,n=!0);var g=h.join(wl).replace("Klokantech Noto Sans","Noto Sans");g.indexOf(wl)!==-1&&(g='"'+g+'"'),l.push(g)}r=Qb[t]=[s,a,l]}return r[0]+wl+r[1]+wl+e+"px"+(i?"/"+i:"")+wl+r[2]},Gm=BC(rq);const fM="https://api.mapbox.com";function G0(t){return t.indexOf("mapbox://")!==0?"":t.slice(9)}function pd(t,e){const i=G0(t);if(!i)return decodeURI(new URL(t,location.href).href);if(i.indexOf("styles/")!==0)throw new Error(`unexpected style url: ${t}`);const r=i.slice(7);return`${fM}/styles/v1/${r}?&access_token=${e}`}function ph(t,e,i,r){const n=new URL(t,r),o=G0(t);return o?o==="mapbox.satellite"?`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${window.devicePixelRatio>=1.5?"@2x":""}.webp?access_token=${e}`:`https://{a-d}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`:(e&&(n.searchParams.has(i)||n.searchParams.set(i,e)),decodeURI(n.href))}const Jb={},ex={};let nq=0;function H0(t){return t.id||(t.id=nq++),t.id}function oq(t,e){return H0(t)+"."+Xe(e)}function gM(t){let e=Jb[t.id];return e||(e={},Jb[H0(t)]=e),e}function aq(t){let e=ex[t.id];return e||(e={},ex[H0(t)]=e),e}function Rf(t){return t*Math.PI/180}const on=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function Ud(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);const i=document.createElement("canvas");return i.width=t,i.height=e,i}function U0(t,e){let i=0;const r=e.length;for(;i<r;++i)if(e[i]<t&&i+1<r){const n=e[i]/e[i+1];return i+Math.log(e[i]/t)/Math.log(n)}return r-1}function Fl(t,e){const i=Math.floor(t),r=Math.pow(2,t-i);return e[i]/r}const Na={};function Fs(t,e,i={},r){if(e in Na)return r&&(r.request=Na[e][0]),Na[e][1];const n=i.transformRequest&&i.transformRequest(e,t)||e,o=na(()=>n).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),r&&(r.request=a),fetch(a).then(function(s){return delete Na[e],s.ok?s.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(s){return delete Na[e],Promise.reject(new Error("Error fetching source "+e))})));return Na[e]=[n,o],o}function mM(t,e){if(typeof t!="string")return Promise.resolve(t);if(!t.trim().startsWith("{"))return Fs("Style",t=pd(t,e.accessToken),e);try{const i=JSON.parse(t);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}const tx={};function vM(t,e,i={}){const r=[e,JSON.stringify(t)].toString();let n=tx[r];if(!n||i.transformRequest){let o;i.transformRequest&&(o=(s,l)=>{const u=i.transformRequest&&i.transformRequest(l,"Tiles")||l;if(s instanceof RM)s.setLoader((c,h,d)=>{na(()=>u).then(p=>{fetch(p).then(f=>f.arrayBuffer()).then(f=>{const g=s.getFormat().readFeatures(f,{extent:c,featureProjection:d});s.setFeatures(g)}).catch(f=>s.setState(Ut))})});else{const c=s.getImage();na(()=>u).then(h=>{h instanceof Request?fetch(h).then(d=>d.blob()).then(d=>{const p=URL.createObjectURL(d);c.addEventListener("load",()=>URL.revokeObjectURL(p)),c.addEventListener("error",()=>URL.revokeObjectURL(p)),c.src=p}).catch(d=>s.setState(Ut)):c.src=h})}});const a=t.url;if(a&&!t.tiles){const s=ph(a,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))n=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:wd(s)}),tileLoadFunction:o});else{const l={};n=Fs("Source",s,i,l).then(function(u){return u.tiles=u.tiles.map(function(c){return u.scheme==="tms"&&(c=c.replace("{y}","{-y}")),ph(c,i.accessToken,i.accessTokenParam||"access_token",l.request.url)}),Promise.resolve({tileJson:u,tileLoadFunction:o})})}}else t=Object.assign({},t,{tiles:t.tiles.map(function(s){return t.scheme==="tms"&&(s=s.replace("{y}","{-y}")),ph(s,i.accessToken,i.accessTokenParam||"access_token",e||location.href)})}),n=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:o});tx[r]=n}return n}function ix(t,e,i,r){const n=[2*i*e.pixelRatio+e.width,2*i*e.pixelRatio+e.height],o=Ud(n[0],n[1]),a=o.getContext("2d");a.drawImage(t,e.x,e.y,e.width,e.height,i*e.pixelRatio,i*e.pixelRatio,e.width,e.height);const s=a.getImageData(0,0,n[0],n[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${255*r.r},${255*r.g},${255*r.b},${r.a})`;const l=s.data;for(let u=0,c=s.width;u<c;++u)for(let h=0,d=s.height;h<d;++h)l[4*(h*c+u)+3]>0&&a.arc(u,h,i*e.pixelRatio,0,2*Math.PI);return a.fill(),o}function sq(t,e,i){const r=Math.max(0,Math.min(1,(i-t)/(e-t)));return r*r*(3-2*r)}function rx(t,e,i){const r=Ud(e.width,e.height),n=r.getContext("2d");n.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=n.getImageData(0,0,e.width,e.height),a=o.data;for(let s=0,l=o.width;s<l;++s)for(let u=0,c=o.height;u<c;++u){const h=4*(u*l+s),d=.75,p=.1,f=sq(d-p,d+p,a[h+3]/255);f>0?(a[h+0]=Math.round(255*i.r*f),a[h+1]=Math.round(255*i.g*f),a[h+2]=Math.round(255*i.b*f),a[h+3]=Math.round(255*f)):a[h+3]=0}return n.putImageData(o,0,0),r}const lq=Array(256).join(" ");function Hm(t,e){if(e>=.05){let i="";const r=t.split(`
`),n=lq.slice(0,Math.round(e/.1));for(let o=0,a=r.length;o<a;++o)o>0&&(i+=`
`),i+=r[o].split("").join(n);return i}return t}let qf;function yM(){return qf||(qf=Ud(1,1).getContext("2d")),qf}function qo(t,e){return yM().measureText(t).width+(t.length-1)*e}const nx={};function Um(t,e,i,r){if(t.indexOf(`
`)!==-1){const a=t.split(`
`),s=[];for(let l=0,u=a.length;l<u;++l)s.push(Um(a[l],e,i,r));return s.join(`
`)}const n=i+","+e+","+t+","+r;let o=nx[n];if(!o){const a=t.split(" ");if(a.length>1){const s=yM();s.font=e;const l=s.measureText("M").width*i;let u="";const c=[];for(let h=0,d=a.length;h<d;++h){const p=a[h],f=u+(u?" ":"")+p;qo(f,r)<=l?u=f:(u&&c.push(u),u=p)}u&&c.push(u);for(let h=0,d=c.length;h<d&&d>1;++h){const p=c[h];if(qo(p,r)<.35*l){const f=h>0?qo(c[h-1],r):1/0,g=h<d-1?qo(c[h+1],r):1/0;c.splice(h,1),d-=1,f<g?(c[h-1]+=" "+p,h-=1):c[h]=p+" "+c[h]}}for(let h=0,d=c.length-1;h<d;++h){const p=c[h],f=c[h+1];if(qo(p,r)>.7*l&&qo(f,r)<.6*l){const g=p.split(" "),_=g.pop();qo(_,r)<.2*l&&(c[h]=g.join(" "),c[h+1]=_+" "+f),d-=1}}o=c.join(`
`)}else o=t;o=Hm(o,r),nx[n]=o}return o}const uq=/font-family: ?([^;]*);/,cq=/("|')/g;let Kc;function hq(t){if(!Kc){Kc={};const e=document.styleSheets;for(let i=0,r=e.length;i<r;++i){const n=e[i];try{const o=n.rules||n.cssRules;if(o)for(let a=0,s=o.length;a<s;++a){const l=o[a];if(l.type==5){const u=l.cssText.match(uq);Kc[u[1].replace(cq,"")]=!0}}}catch{}}}return t in Kc}const Af={},dq={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},pq={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Wm={},fd={zoom:0};let Xc,Ff;function Ne(t,e,i,r,n,o,a){const s=t.id;o||(o={}),o[s]||(o[s]={});const l=o[s];if(!l[i]){let c=(t[e]||Wm)[i];const h=lM[`${e}_${t.type}`][i];c===void 0&&(c=h.default);let d=(u=c,Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in aM);if(!d&&sM(c)&&(c=gR(c,h),d=!0),d){const p=function(f,g){const _=ZR(f,g);if(_.result==="error")throw new Error(_.value.map(v=>`${v.key}: ${v.message}`).join(", "));return _.value}(c,h);l[i]=p.evaluate.bind(p)}else h.type=="color"&&(c=rr.parse(c)),l[i]=function(){return c}}var u;return fd.zoom=r,l[i](fd,n,a)}function ox(t,e,i,r,n){return Ne(t,"layout",`${r}-allow-overlap`,e,i,n)?Ne(t,"layout",`${r}-ignore-placement`,e,i,n)?"none":"obstacle":"declutter"}function fq(t,e,i,r,n){return t in n||(n[t]=QR(e).filter),fd.zoom=r,n[t](fd,i)}function $n(t,e){if(t){if(t.a===0||e===0)return;const i=t.a;return e=e===void 0?1:e,i===0?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*e+")"}return t}const gq=/\{[^{}}]*\}/g;function Of(t,e){return t.replace(gq,function(i){return e[i.slice(1,-1)]||""})}const mq={};function vq(t,e,i,r=on,n=void 0,o=void 0,a=void 0,s=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");let l,u,c;if(mq[oq(e,t)]=Array.from(arguments),o){if(typeof Image<"u"){const k=new Image;let L;na(()=>o).then(A=>{A instanceof Request?fetch(A).then(E=>E.blob()).then(E=>{L=URL.createObjectURL(E),k.src=L}).catch(()=>{}):(k.crossOrigin="anonymous",k.src=A,L&&URL.revokeObjectURL(L))}),k.onload=function(){l=k,u=[k.width,k.height],t.changed(),k.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const k=self;k.postMessage({action:"loadImage",src:o}),k.addEventListener("message",function(L){L.data.action==="imageLoaded"&&L.data.src===o&&(l=L.data.image,u=[l.width,l.height])})}}const h=pM(e.layers),d={},p=[],f={},g={},_=gM(e),v=aq(e);let b;for(let k=0,L=h.length;k<L;++k){const A=h[k],E=A.id;if(typeof i=="string"&&A.source==i||Array.isArray(i)&&i.indexOf(E)!==-1){const I=A["source-layer"];if(b){if(A.source!==b)throw new Error(`Layer "${E}" does not use source "${b}`)}else{b=A.source;const R=e.sources[b];if(!R)throw new Error(`Source "${b}" is not defined`);const M=R.type;if(M!=="vector"&&M!=="geojson")throw new Error(`Source "${b}" is not of type "vector" or "geojson", but "${M}"`)}let T=d[I];T||(T=[],d[I]=T),T.push({layer:A,index:k}),p.push(E)}}const m=new Wt,y=new ei,x=[],C=function(k,L,A){const E=k.getProperties(),I=d[E.layer];if(!I)return;let T=r.indexOf(L);T==-1&&(T=U0(L,r));const R=dq[k.getGeometry().getType()],M={id:k.getId(),properties:E,type:R},q=t.get("mapbox-featurestate")[k.getId()];let P=-1;for(let F=0,j=I.length;F<j;++F){const V=I[F],O=V.layer,$=O.id;if(A!==void 0&&A!==$)continue;const J=O.layout||Wm,te=O.paint||Wm;if(J.visibility==="none"||"minzoom"in O&&T<O.minzoom||"maxzoom"in O&&T>=O.maxzoom)continue;const ie=O.filter;if(!ie||fq($,ie,M,T,v)){let N,z,B,K,U,W;const ve=V.index;if(R==3&&(O.type=="fill"||O.type=="fill-extrusion"))if(z=Ne(O,"paint",O.type+"-opacity",T,M,_,q),O.type+"-pattern"in te){const se=Ne(O,"paint",O.type+"-pattern",T,M,_,q);if(se){const Se=typeof se=="string"?Of(se,E):se.toString();if(l&&n&&n[Se]){++P,W=x[P],W&&W.getFill()&&!W.getStroke()&&!W.getText()||(W=new qt({fill:new ei}),x[P]=W),B=W.getFill(),W.setZIndex(ve);const Ie=Se+"."+z;let Ae=g[Ie];if(!Ae){const X=n[Se],ne=Ud(X.width,X.height),ge=ne.getContext("2d");ge.globalAlpha=z,ge.drawImage(l,X.x,X.y,X.width,X.height,0,0,X.width,X.height),Ae=ge.createPattern(ne,"repeat"),g[Ie]=Ae}B.setColor(Ae)}}}else N=$n(Ne(O,"paint",O.type+"-color",T,M,_,q),z),O.type+"-outline-color"in te&&(U=$n(Ne(O,"paint",O.type+"-outline-color",T,M,_,q),z)),U||(U=N),(N||U)&&(++P,W=x[P],(!W||N&&!W.getFill()||!N&&W.getFill()||U&&!W.getStroke()||!U&&W.getStroke()||W.getText())&&(W=new qt({fill:N?new ei:void 0,stroke:U?new Wt:void 0}),x[P]=W),N&&(B=W.getFill(),B.setColor(N)),U&&(K=W.getStroke(),K.setColor(U),K.setWidth(.5)),W.setZIndex(ve));if(R!=1&&O.type=="line"){N="line-pattern"in te?void 0:$n(Ne(O,"paint","line-color",T,M,_,q),Ne(O,"paint","line-opacity",T,M,_,q));const se=Ne(O,"paint","line-width",T,M,_,q);N&&se>0&&(++P,W=x[P],W&&W.getStroke()&&!W.getFill()&&!W.getText()||(W=new qt({stroke:new Wt}),x[P]=W),K=W.getStroke(),K.setLineCap(Ne(O,"layout","line-cap",T,M,_,q)),K.setLineJoin(Ne(O,"layout","line-join",T,M,_,q)),K.setMiterLimit(Ne(O,"layout","line-miter-limit",T,M,_,q)),K.setColor(N),K.setWidth(se),K.setLineDash(te["line-dasharray"]?Ne(O,"paint","line-dasharray",T,M,_,q).map(function(Se){return Se*se}):null),W.setZIndex(ve))}let ce,fe,pe,Ee,Le,me,we,Pe,Ve,oe=!1,he=null,Z=0;if((R==1||R==2)&&"icon-image"in J){const se=Ne(O,"layout","icon-image",T,M,_,q);if(se){let Se;ce=typeof se=="string"?Of(se,E):se.toString();const Ie=s?s(t,ce):void 0;if(l&&n&&n[ce]||Ie){const Ae=Ne(O,"layout","icon-rotation-alignment",T,M,_,q);if(R==2){const X=k.getGeometry();if(X.getFlatMidpoint||X.getFlatMidpoints){const ne=X.getExtent();if(Math.sqrt(Math.max(Math.pow((ne[2]-ne[0])/L,2),Math.pow((ne[3]-ne[1])/L,2)))>150){const ge=X.getType()==="MultiLineString"?X.getFlatMidpoints():X.getFlatMidpoint();if(Ff||(Xc=[NaN,NaN],Ff=new wi("Point",Xc,[],2,{},void 0)),Se=Ff,Xc[0]=ge[0],Xc[1]=ge[1],Ne(O,"layout","symbol-placement",T,M,_,q)==="line"&&Ae==="map"){const Re=X.getStride(),Ge=X.getFlatCoordinates();for(let Je=0,qe=Ge.length-Re;Je<qe;Je+=Re){const Ke=Ge[Je],He=Ge[Je+1],ee=Ge[Je+Re],Me=Ge[Je+Re+1],be=Math.min(Ke,ee),ye=Math.min(He,Me),xe=Math.max(Ke,ee),D=Math.max(He,Me);if(ge[0]>=be&&ge[0]<=xe&&ge[1]>=ye&&ge[1]<=D){Z=Math.atan2(He-Me,ee-Ke);break}}}}}}if(R!==2||Se){const X=Ne(O,"layout","icon-size",T,M,_,q),ne=te["icon-color"]!==void 0?Ne(O,"paint","icon-color",T,M,_,q):null;if(!ne||ne.a!==0){const ge=Ne(O,"paint","icon-halo-color",T,M,_,q),Re=Ne(O,"paint","icon-halo-width",T,M,_,q);let Ge=`${ce}.${X}.${Re}.${ge}`;if(ne!==null&&(Ge+=`.${ne}`),fe=f[Ge],!fe){const Je=ox(O,T,M,"icon",_);let qe;"icon-offset"in J&&(qe=Ne(O,"layout","icon-offset",T,M,_,q).slice(0),qe[0]*=X,qe[1]*=-X);let Ke=ne?[255*ne.r,255*ne.g,255*ne.b,ne.a]:void 0;if(Ie){const He={color:Ke,rotateWithView:Ae==="map",displacement:qe,declutterMode:Je,scale:X};typeof Ie=="string"?He.src=Ie:(He.img=Ie,He.imgSize=[Ie.width,Ie.height]),fe=new Es(He)}else{const He=n[ce];let ee,Me,be;Re?He.sdf?(ee=ix(rx(l,He,ne||[0,0,0,1]),{x:0,y:0,width:He.width,height:He.height,pixelRatio:He.pixelRatio},Re,ge),Ke=void 0):ee=ix(l,He,Re,ge):(He.sdf?(c||(c=rx(l,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1,a:1})),ee=c):ee=l,Me=[He.width,He.height],be=[He.x,He.y]),fe=new Es({color:Ke,img:ee,imgSize:u,size:Me,offset:be,rotateWithView:Ae==="map",scale:X/He.pixelRatio,displacement:qe,declutterMode:Je})}f[Ge]=fe}}fe&&(++P,W=x[P],W&&W.getImage()&&!W.getFill()&&!W.getStroke()||(W=new qt,x[P]=W),W.setGeometry(Se),fe.setRotation(Z+Rf(Ne(O,"layout","icon-rotate",T,M,_,q))),fe.setOpacity(Ne(O,"paint","icon-opacity",T,M,_,q)),fe.setAnchor(pq[Ne(O,"layout","icon-anchor",T,M,_,q)]),W.setImage(fe),he=W.getText(),W.setText(void 0),W.setZIndex(ve),oe=!0,pe=!1)}else pe=!0}}}if(R==1&&O.type==="circle"){++P,W=x[P],W&&W.getImage()&&!W.getFill()&&!W.getStroke()||(W=new qt,x[P]=W);const se="circle-radius"in te?Ne(O,"paint","circle-radius",T,M,_,q):5,Se=$n(Ne(O,"paint","circle-stroke-color",T,M,_,q),Ne(O,"paint","circle-stroke-opacity",T,M,_,q)),Ie=Ne(O,"paint","circle-translate",T,M,_,q),Ae=$n(Ne(O,"paint","circle-color",T,M,_,q),Ne(O,"paint","circle-opacity",T,M,_,q)),X=Ne(O,"paint","circle-stroke-width",T,M,_,q),ne=se+"."+Se+"."+Ae+"."+X+"."+Ie[0]+"."+Ie[1];fe=f[ne],fe||(fe=new zr({radius:se,displacement:[Ie[0],-Ie[1]],stroke:Se&&X>0?new Wt({width:X,color:Se}):void 0,fill:Ae?new ei({color:Ae}):void 0,declutterMode:"none"}),f[ne]=fe),W.setImage(fe),he=W.getText(),W.setText(void 0),W.setGeometry(void 0),W.setZIndex(ve),oe=!0}if("text-field"in J){we=Math.round(Ne(O,"layout","text-size",T,M,_,q));const se=Ne(O,"layout","text-font",T,M,_,q);me=Ne(O,"layout","text-line-height",T,M,_,q),Le=Gm(a?a(se,e.metadata?e.metadata["ol:webfonts"]:void 0):se,we,me),Le.includes("sans-serif")||(Le+=",sans-serif"),Pe=Ne(O,"layout","text-letter-spacing",T,M,_,q),Ve=Ne(O,"layout","text-max-width",T,M,_,q);const Se=Ne(O,"layout","text-field",T,M,_,q);Ee=typeof Se=="object"&&Se.sections?Se.sections.length===1?Se.toString():Se.sections.reduce((Ie,Ae,X)=>{const ne=Ae.fontStack?Ae.fontStack.split(","):se,ge=Gm(a?a(ne):ne,we*(Ae.scale||1),me);let Re=Ae.text;if(Re===`
`)return Ie.push(`
`,""),Ie;if(R!=2){Re=Um(Re,ge,Ve,Pe).split(`
`);for(let Ge=0,Je=Re.length;Ge<Je;++Ge)Ge>0&&Ie.push(`
`,""),Ie.push(Re[Ge],ge);return Ie}Ie.push(Hm(Re,Pe),ge)},[]):Of(Se,E).trim(),z=Ne(O,"paint","text-opacity",T,M,_,q)}if(Ee&&z&&!pe){oe||(++P,W=x[P],W&&W.getText()&&!W.getFill()&&!W.getStroke()||(W=new qt,x[P]=W),W.setImage(void 0),W.setGeometry(void 0));const se=ox(O,T,M,"text",_);W.getText()||W.setText(he),he=W.getText(),(!he||"getDeclutterMode"in he&&he.getDeclutterMode()!==se)&&(he=new Zo({padding:[2,2,2,2],declutterMode:se}),W.setText(he));const Se=Ne(O,"layout","text-transform",T,M,_,q);Se=="uppercase"?Ee=Array.isArray(Ee)?Ee.map((ye,xe)=>xe%2?ye:ye.toUpperCase()):Ee.toUpperCase():Se=="lowercase"&&(Ee=Array.isArray(Ee)?Ee.map((ye,xe)=>xe%2?ye:ye.toLowerCase()):Ee.toLowerCase());const Ie=Array.isArray(Ee)?Ee:R==2?Hm(Ee,Pe):Um(Ee,Le,Ve,Pe);he.setText(Ie),he.setFont(Le),he.setRotation(Rf(Ne(O,"layout","text-rotate",T,M,_,q)));const Ae=Ne(O,"layout","text-anchor",T,M,_,q),X=oe||R==1?"point":Ne(O,"layout","symbol-placement",T,M,_,q);let ne;if(X==="line-center"?(he.setPlacement("line"),ne="center"):he.setPlacement(X),X==="line"&&typeof he.setRepeat=="function"){const ye=Ne(O,"layout","symbol-spacing",T,M,_,q);he.setRepeat(2*ye)}he.setOverflow(X==="point");let ge=Ne(O,"paint","text-halo-width",T,M,_,q);const Re=Ne(O,"layout","text-offset",T,M,_,q),Ge=Ne(O,"paint","text-translate",T,M,_,q);let Je=0,qe=0;if(X=="point"){ne="center",Ae.indexOf("left")!==-1?(ne="left",qe=ge):Ae.indexOf("right")!==-1&&(ne="right",qe=-ge);const ye=Ne(O,"layout","text-rotation-alignment",T,M,_,q);he.setRotateWithView(ye=="map")}else he.setMaxAngle(Rf(Ne(O,"layout","text-max-angle",T,M,_,q))*Ee.length/Ie.length),he.setRotateWithView(!1);he.setTextAlign(ne);let Ke="middle";Ae.indexOf("bottom")==0?(Ke="bottom",Je=-ge-.5*(me-1)*we):Ae.indexOf("top")==0&&(Ke="top",Je=ge+.5*(me-1)*we),he.setTextBaseline(Ke);const He=Ne(O,"layout","text-justify",T,M,_,q);he.setJustify(He==="auto"?void 0:He),he.setOffsetX(Re[0]*we+qe+Ge[0]),he.setOffsetY(Re[1]*we+Je+Ge[1]),y.setColor($n(Ne(O,"paint","text-color",T,M,_,q),z)),he.setFill(y);const ee=$n(Ne(O,"paint","text-halo-color",T,M,_,q),z);if(ee&&ge>0){m.setColor(ee),ge*=2;const ye=.5*we;m.setWidth(ge<=ye?ge:ye),he.setStroke(m)}else he.setStroke(void 0);const Me=Ne(O,"layout","text-padding",T,M,_,q),be=he.getPadding();Me!==be[0]&&(be[0]=Me,be[1]=Me,be[2]=Me,be[3]=Me),W.setZIndex(ve)}}}return P>-1?(x.length=P+1,x):void 0};return t.setStyle(C),t.set("mapbox-source",b),t.set("mapbox-layers",p),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),C}function yq(t,e){const i=t[0],r=i.width,n=i.height,o=i.data,a=new Uint8ClampedArray(o.length),s=2*e.resolution,l=r-1,u=n-1,c=[0,0,0,0],h=2*Math.PI,d=Math.PI/2,p=Math.PI*e.sunEl/180,f=Math.PI*e.sunAz/180,g=Math.cos(p),_=Math.sin(p),v=e.highlightColor,b=e.shadowColor,m=e.accentColor,y=e.encoding;let x,C,k,L,A,E,I,T,R,M,q,P,F,j,V,O,$,J,te,ie,N,z;function B(K,U="mapbox"){return U==="mapbox"?.1*(256*K[0]*256+256*K[1]+K[2])-1e4:U==="terrarium"?256*K[0]+K[1]+K[2]/256-32768:void 0}for(C=0;C<=u;++C)for(A=C===0?0:C-1,E=C===u?u:C+1,x=0;x<=l;++x)k=x===0?0:x-1,L=x===l?l:x+1,I=4*(C*r+k),c[0]=o[I],c[1]=o[I+1],c[2]=o[I+2],c[3]=o[I+3],T=e.vert*B(c,y),I=4*(C*r+L),c[0]=o[I],c[1]=o[I+1],c[2]=o[I+2],c[3]=o[I+3],R=e.vert*B(c,y),M=(R-T)/s,I=4*(A*r+x),c[0]=o[I],c[1]=o[I+1],c[2]=o[I+2],c[3]=o[I+3],T=e.vert*B(c,y),I=4*(E*r+x),c[0]=o[I],c[1]=o[I+1],c[2]=o[I+2],c[3]=o[I+3],R=e.vert*B(c,y),q=(R-T)/s,F=Math.atan2(q,-M),F=F<0?d-F:F>d?h-F+d:d-F,P=Math.atan(Math.sqrt(M*M+q*q)),z=_*Math.cos(P)+g*Math.sin(P)*Math.cos(f-F),j=Math.cos(P),V=255*z,te=Math.min(Math.max(2*e.sunEl,0),1),ie=1.875-1.75*e.opacity,N=e.opacity!==.5?d*((Math.pow(ie,P)-1)/(Math.pow(ie,d)-1)):P,$={r:(1-j)*m.r*te*255,g:(1-j)*m.g*te*255,b:(1-j)*m.b*te*255,a:(1-j)*m.a*te*255},O=Math.abs(((F+f)/Math.PI+.5)%2-1),J={r:(v.r*(1-O)+b.r*O)*V,g:(v.g*(1-O)+b.g*O)*V,b:(v.b*(1-O)+b.b*O)*V,a:(v.a*(1-O)+b.a*O)*V},I=4*(C*r+x),a[I]=$.r*(1-O)+J.r,a[I+1]=$.g*(1-O)+J.g,a[I+2]=$.b*(1-O)+J.b,a[I+3]=o[I+3]*e.opacity*te*Math.sin(N);return new ImageData(a,r,n)}function _q(t,e=512){return t.getExtent()?Du({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():on}function _M(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function bq(t,e,i="",r={},n=void 0){let o,a,s,l,u=!0;return typeof i=="string"||Array.isArray(i)?l=i:(s=i,l=s.source||s.layers,r=s),typeof r=="string"?(o=r,s={}):(o=r.styleUrl,s=r),s.updateSource===!1&&(u=!1),n||(n=s.resolutions),o||typeof e!="string"||e.trim().startsWith("{")||(o=e),o&&(o=o.startsWith("data:")?location.href:pd(o,s.accessToken),s=_M(o,s)),new Promise(function(c,h){mM(e,s).then(function(d){if(d.version!=8)return h(new Error("glStyle version 8 required."));if(!(t instanceof _a||t instanceof lo))return h(new Error("Can only apply to VectorLayer or VectorTileLayer"));const p=t instanceof lo?"vector":"geojson";if(l?a=Array.isArray(l)?d.layers.find(function(y){return y.id===l[0]}).source:l:(a=Object.keys(d.sources).find(function(y){return d.sources[y].type===p}),l=a),!a)return h(new Error(`No ${p} source found in the glStyle.`));function f(){if(!u)return Promise.resolve();if(t instanceof lo)return wM(d.sources[a],o,s).then(function(k){const L=t.getSource();L?k!==L&&(L.setTileUrlFunction(k.getTileUrlFunction()),typeof L.setUrls=="function"&&typeof k.getUrls=="function"&&L.setUrls(k.getUrls()),L.format_||(L.format_=k.format_),L.getAttributions()||L.setAttributions(k.getAttributions()),L.getTileLoadFunction()===Jw&&L.setTileLoadFunction(k.getTileLoadFunction()),en(L.getProjection(),k.getProjection())&&(L.tileGrid=k.getTileGrid())):t.setSource(k);const A=t.getSource().getTileGrid();!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())&&A.getMinZoom()>0&&t.setMaxResolution(Fl(Math.max(0,A.getMinZoom()-1e-12),A.getResolutions()))});const y=d.sources[a];let x=t.getSource();x&&x.get("mapbox-source")===y||(x=CM(y,o,s));const C=t.getSource();return C?x!==C&&(C.getAttributions()||C.setAttributions(x.getAttributions()),C.format_||(C.format_=x.getFormat()),C.url_=x.getUrl()):t.setSource(x),Promise.resolve()}let g,_,v,b;function m(){if(b||d.sprite&&!_)b?(t.setStyle(b),f().then(c).catch(h)):h(new Error("Something went wrong trying to apply style."));else{if(s.projection&&!n){const y=ut(s.projection).getUnits();y!=="m"&&(n=on.map(x=>x/kn[y]))}b=vq(t,d,l,n,_,v,(y,x=s.webfonts)=>function(C,k="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const L=C.toString();if(L in Af)return Af[L];const A=[];for(let E=0,I=C.length;E<I;++E){C[E]=C[E].replace("Arial Unicode MS","Arial");const T=C[E],R=Gm(T,1);cw(R);const M=R.split(" ");A.push([M.slice(3).join(" ").replace(/"/g,""),M[1],M[0]])}for(let E=0,I=A.length;E<I;++E){const T=A[E],R=T[0];if(!hq(R)&&$r.get(`${T[2]}
${T[1]} 
${R}`)!==100){const M=k.replace("{font-family}",R.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",R.replace(/ /g,"+")).replace("{fontweight}",T[1]).replace("{-fontstyle}",T[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",T[2]);if(!document.querySelector('link[href="'+M+'"]')){const q=document.createElement("link");q.href=M,q.rel="stylesheet",document.head.appendChild(q)}}}return Af[L]=C,C}(y,x),s.getImage),t.getStyle()?f().then(c).catch(h):h(new Error(`Nothing to show for source [${a}]`))}}if(d.sprite){const y=new URL(function(k,L,A){const E=G0(k);if(!E)return decodeURI(new URL(k,A).href);if(E.indexOf("sprites/")!==0)throw new Error(`unexpected sprites url: ${k}`);const I=E.slice(8);return`${fM}/styles/v1/${I}/sprite?access_token=${L}`}(d.sprite,s.accessToken,o||location.href));g=window.devicePixelRatio>=1.5?.5:1;const x=g==.5?"@2x":"";let C=y.origin+y.pathname+x+".json"+y.search;new Promise(function(k,L){Fs("Sprite",C,s).then(k).catch(function(A){C=y.origin+y.pathname+".json"+y.search,Fs("Sprite",C,s).then(k).catch(L)})}).then(function(k){if(k===void 0&&h(new Error("No sprites found.")),_=k,v=y.origin+y.pathname+x+".png"+y.search,s.transformRequest){const L=s.transformRequest(v,"SpriteImage")||v;(L instanceof Request||L instanceof Promise)&&(v=L)}m()}).catch(function(k){h(new Error(`Sprites cannot be loaded: ${C}: ${k.message}`))})}else m()}).catch(h)})}const Hn={};function bM(t,e){let i;return t.some(function(r){if(r.id==e)return i=r.source,!0}),i}function xM(t,e,i){const r=new r2({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),n=r.getTileJSON(),o=r.getTileGrid(),a=ut(i.projection||"EPSG:3857"),s=function(d,p){const f=d.bounds;if(f){const g=Xf([f[0],f[1]],p),_=Xf([f[2],f[3]],p);return[g[0],g[1],_[0],_[1]]}return ut(p).getExtent()}(n,a),l=a.getExtent(),u=n.minzoom||0,c=n.maxzoom||22,h={attributions:r.getAttributions(),projection:a,tileGrid:new ao({origin:l?pr(l):o.getOrigin(0),extent:s||o.getExtent(),minZoom:u,resolutions:_q(a,e.tileSize).slice(0,c+1),tileSize:o.getTileSize(0)})};return Array.isArray(n.tiles)?h.urls=n.tiles:h.url=n.tiles,h}function xq(t,e,i,r){const n={id:t.id,type:t.type},o=t.layout||{},a=t.paint||{};n.paint=a;const s=U0(e,i.resolutions||on);let l;const u=Ne(n,"paint","background-color",s,Hn,r);return a["background-opacity"]!==void 0&&(l=Ne(n,"paint","background-opacity",s,Hn,r)),o.visibility=="none"?void 0:$n(u,l)}function wq(t,e,i){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Bs({source:new $s({}),render(n){const o=xq(t,n.viewState.resolution,e,i);return r.style.backgroundColor=o,r}})}function wM(t,e,i){return new Promise(function(r,n){vM(t,e,i).then(function({tileJson:o,tileLoadFunction:a}){const s=xM(t,o,i);s.tileLoadFunction=a,s.format=new ah,r(new Bl(s))}).catch(n)})}function SM(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Sq(t,e,i){return new Promise(function(r,n){vM(t,e,i).then(function({tileJson:o,tileLoadFunction:a}){const s=new r2({interpolate:i.interpolate===void 0||i.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});s.tileGrid=xM(t,o,i).tileGrid,i.projection&&(s.projection=ut(i.projection));const l=s.getTileUrlFunction();a&&s.setTileLoadFunction(a),s.setTileUrlFunction(function(u,c,h){const d=SM(h);let p=l(u,c,h);if(p.indexOf(d)!=-1){const f=s.getTileGrid().getTileCoordExtent(u);p=p.replace(d,f.toString())}return p}),s.set("mapbox-source",t),r(s)}).catch(function(o){n(o)})})}function ax(t,e,i){const r=new ci;return Sq(t,e,i).then(function(n){r.setSource(n)}).catch(function(){r.setSource(void 0)}),r}function CM(t,e,i){const r=i.projection?new K1({dataProjection:i.projection}):new K1,n=t.data,o={};if(typeof n=="string"){const s=ph(n,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(s)){const u=(h,d,p)=>{const f=SM(p);return s.replace(f,`${h.join(",")}`)},c=new so({attributions:t.attribution,format:r,loader:(h,d,p,f,g)=>{Fs("GeoJSON",typeof u=="function"?u(h,d,p):u,i).then(_=>{const v=c.getFormat().readFeatures(_,{featureProjection:p});c.addFeatures(v),f(v)}).catch(_=>{c.removeLoadedExtent(h),g()})},strategy:Dk});return c.set("mapbox-source",t),c}const l=new so({attributions:t.attribution,format:r,url:s,loader:(u,c,h,d,p)=>{Fs("GeoJSON",s,i).then(f=>{const g=l.getFormat().readFeatures(f,{featureProjection:h});l.addFeatures(g),d(g)}).catch(f=>{l.removeLoadedExtent(u),p()})}});return l}o.features=r.readFeatures(n,{featureProjection:"EPSG:3857"});const a=new so(Object.assign({attributions:t.attribution,format:r},o));return a.set("mapbox-source",t),a}function Cq(t,e,i){let r=null;return function(n){t.paint&&"raster-opacity"in t.paint&&n.frameState.viewState.zoom!==r&&(r=n.frameState.viewState.zoom,delete i[t.id],function(o,a,s,l){const u=Ne(o,"paint","raster-opacity",s,Hn,l);a.setOpacity(u)}(t,e,r,i))}}function Mq(t,e,i,r){const n=gM(t),o=t.layers,a=i.type,s=i.source||bM(o,i.ref),l=t.sources[s];let u;if(a=="background")u=wq(i,r,n);else if(l.type=="vector")u=function(h,d,p){const f=new lo({declutter:!0,visible:!1});return wM(h,d,p).then(function(g){g.set("mapbox-source",h),f.setSource(g)}).catch(function(g){f.setSource(void 0)}),f}(l,e,r);else if(l.type=="raster")u=ax(l,e,r),u.setVisible(!i.layout||i.layout.visibility!=="none"),u.on("prerender",Cq(i,u,n));else if(l.type=="geojson")u=function(h,d,p){return new _a({declutter:!0,source:CM(h,d,p),visible:!1})}(l,e,r);else if(l.type=="raster-dem"&&i.type=="hillshade"){const h=function(d,p,f){const g=ax(d,p,f);return new e2({source:new i2({operationType:"image",operation:yq,sources:[g]})})}(l,e,r);u=h,h.getSource().on("beforeoperations",function(d){const p=d.data;p.resolution=tu(r.projection||"EPSG:3857",d.resolution,Ui(d.extent),"m");const f=U0(d.resolution,r.resolutions||on);p.encoding=l.encoding,p.vert=5*Ne(i,"paint","hillshade-exaggeration",f,Hn,n),p.sunAz=Ne(i,"paint","hillshade-illumination-direction",f,Hn,n),p.sunEl=35,p.opacity=.3,p.highlightColor=Ne(i,"paint","hillshade-highlight-color",f,Hn,n),p.shadowColor=Ne(i,"paint","hillshade-shadow-color",f,Hn,n),p.accentColor=Ne(i,"paint","hillshade-accent-color",f,Hn,n)}),u.setVisible(!i.layout||i.layout.visibility!=="none")}const c=s;return u&&u.set("mapbox-source",c),u}function sx(t,e,i,r){const n=[];let o=null;if(e instanceof Ns){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const h=r.projection?ut(r.projection):o.getProjection();o=new Ki(Object.assign(o.getProperties(),{maxResolution:on[0]/kn[h.getUnits()],projection:r.projection||o.getProjection()})),e.setView(o)}"center"in t&&!o.getCenter()&&o.setCenter(Xf(t.center,o.getProjection())),"zoom"in t&&o.getZoom()===void 0&&o.setResolution(on[0]/kn[o.getProjection().getUnits()]/Math.pow(2,t.zoom)),o.getCenter()&&o.getZoom()!==void 0||o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",t),e.set("mapbox-metadata",{styleUrl:i,options:r});const a=t.layers;let s,l,u,c=[];for(let h=0,d=a.length;h<d;++h){const p=a[h];p.type!="heatmap"&&(u=p.source||bM(a,p.ref),u&&u==l||(c.length&&(n.push(lx(s,c,t,i,e,r)),c=[]),s=Mq(t,i,p,r),s instanceof _a||s instanceof lo||(c=[]),l=s.get("mapbox-source")),c.push(p.id))}return n.push(lx(s,c,t,i,e,r)),Promise.all(n)}function Rq(t,e,i={}){let r,n;if(n=typeof t=="string"||t instanceof HTMLElement?new Ns({target:t}):t,typeof e=="string"){const o=e.startsWith("data:")?location.href:pd(e,i.accessToken);i=_M(o,i),r=new Promise(function(a,s){mM(e,i).then(function(l){sx(l,n,o,i).then(function(){a(n)}).catch(s)}).catch(function(l){s(new Error(`Could not load ${e}: ${l.message}`))})})}else r=new Promise(function(o,a){sx(e,n,!i.styleUrl||i.styleUrl.startsWith("data:")?location.href:pd(i.styleUrl,i.accessToken),i).then(function(){o(n)}).catch(a)});return r}function lx(t,e,i,r,n,o={}){let a=24,s=0;const l=i.layers;for(let u=0,c=l.length;u<c;++u){const h=l[u];e.indexOf(h.id)!==-1&&(a=Math.min("minzoom"in h?h.minzoom:0,a),s=Math.max("maxzoom"in h?h.maxzoom:24,s))}return new Promise(function(u,c){const h=function(){const p=t.getSource();if(p&&p.getState()!=="error"){if("getTileGrid"in p){const f=p.getTileGrid();if(f){const g=f.getMinZoom();(a>0||g>0)&&t.setMaxResolution(Math.min(Fl(Math.max(0,a-1e-12),on),Fl(Math.max(0,g-1e-12),f.getResolutions()))),s<24&&t.setMinResolution(Fl(s,on))}}else a>0&&t.setMaxResolution(Fl(Math.max(0,a-1e-12),on));p instanceof so||p instanceof Bl?bq(t,i,e,Object.assign({styleUrl:r},o)).then(function(){(function(f,g){function _(){const v=g.get("mapbox-style");if(!v)return;const b=pM(v.layers),m=f.get("mapbox-layers"),y=b.filter(function(x){return m.includes(x.id)}).some(function(x){return!x.layout||!x.layout.visibility||x.layout.visibility==="visible"});f.get("visible")!==y&&f.setVisible(y)}f.on("change",_),_()})(t,n),u()}).catch(c):u()}else c(new Error("Error accessing data for source "+t.get("mapbox-source")))};t.set("mapbox-layers",e);const d=n.getLayers();d.getArray().indexOf(t)===-1&&d.push(t),t.getSource()?h():t.once("change:source",h)})}export{Am as A,Rq as C,dm as F,fR as J,pm as O,Lq as Q,nm as a,ji as b,zb as c,Bh as d,kt as e,Iq as g,ba as k,lt as l,DC as m,sr as n,Ob as p,qm as q,Pq as z};
