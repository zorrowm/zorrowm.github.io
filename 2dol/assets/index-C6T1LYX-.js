import{d as L,r as p,O as f,S as g,F as b,a5 as w,Y as C,U as x,P as S,a6 as W,a2 as B,ac as R,R as V,b as $,D as z,K as A,c as E,A as F}from"./@vue-exp-DhuHfG86.js";import{F as c}from"./xframelib-exp-DUbArU78.js";import{m as v,M as y,_ as N}from"./index-9YwdlOdB.js";import{b as O}from"./vue-router-exp-CLDoDjFh.js";import"./axios-exp-C7rfqWEd.js";import"./vendor-DEnSXaZk.js";import"./ol-exp-DNVUl0aT.js";import"./@iconify/vue-exp-DcFsj1aI.js";import"./monaco-editor-exp-BNK_u0iZ.js";function T(a){a.selected=!a.selected}function j(a){c.LayerManager.removeLayerItem("artificialLayer")}function U(a,n,o){c.LayerManager.addLayerItem({id:a,name:n},o)}function K(a){const n=a.tag?.layoutID,o=a.tag?.widgetID;if(n&&o){const s=c.LayoutMap.get(n);s&&(a.selected?s.unloadWidget(o):s.loadWidget(o))}}const D=Object.freeze(Object.defineProperty({__proto__:null,AddLayerItem:U,ControlSkyVisible:T,RemoveLayerItem:j,twoMapScreenControl:K},Symbol.toStringTag,{value:"Module"})),P={class:"menuBar"},Y=["title","onClick"],q=L({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:v},iconColor:{type:String,default:"#f00"},itemSize:{type:String,default:"50px"}},setup(a){R(e=>({"6bc76ebe":a.itemSize+10,"77584afb":o.value,"677ef156":a.itemSize}));const n=a,o=p(v.length),s=O(),r=p(new Map);function _(e){switch(e.type){case y.URL:window.open(e.path,"_blank");break;case y.Route:if(e.blank){if(e.path){let i=s.resolve({path:e.path});window.open(i.href,"_blank")}}else e.path&&s.push({path:e.path});break;case y.Action:const t=e.path;t&&D[t]&&(D[t](e),e.selected!=null&&(e.selected=!e.selected,r.value.set(e.name,e.selected)));break;case y.Widget:if(e.path){const i=c.LayoutMap.get(n.layoutID);if(!i){c.Message.warn(`LayoutID:${n.layoutID}的Manager不存在`);return}h(i,e),e.selected=!e.selected,r.value.set(e.name,e.selected)}else c.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function h(e,t){t.path&&(t.selected?(t.unload?(c.Logger().info("卸载widget: "+t.path),e.unloadWidget(t.path)):(c.Logger().info("隐藏widget: "+t.path),e.changeWidgetVisible(t.path,!1)),t.children&&t.children.forEach(i=>{i.selected&&(c.Logger().info(`递归控制${t.path}的子Widget:`+i.path),h(e,i),i.selected=!i.selected)})):e.isWidgetLoaded(t.path)?(c.Logger().info("显示widget: "+t.path),e.changeWidgetVisible(t.path,!0)):(e.loadWidget(t.path),c.Logger().info("加载Widget："+t.path)))}function u(e){return r.value?.has(e.name)&&r.value.get(e.name)?"menuBarItem active":"menuBarItem"}return(e,t)=>{const i=V("Icon");return f(),g("ul",P,[(f(!0),g(b,null,w(a.menuData,(d,M)=>(f(),g("li",{key:M,class:C(u(d))},[x("span",{title:d.name,onClick:J=>_(d)},[d.icon?(f(),S(i,{key:0,icon:d.icon,color:a.iconColor},null,8,["icon","color"])):(f(),g(b,{key:1},[W(B(d.name),1)],64))],8,Y)],2))),128))])}}}),G=N(q,[["__scopeId","data-v-6ffb6e5f"]]);function k(a,n){let o;for(const s of a)if(s.path===n){o=s;break}else if(s.children){const l=k(s.children,n);if(l){o=l;break}}return o}const H=["id"],se=L({__name:"index",setup(a,{expose:n}){const o=p([]),s=p(""),l=F(),r=l?.proxy?.$options.id,_=l?.proxy?.$options.layoutID,h=p(r);$(()=>{s.value=_;const t=k(v,r);t&&o.value.push(...t.children)});const u=p(!0);function e(t=!1){u.value=t}return n({changeVisible:e,isShow:u}),(t,i)=>(f(),g("div",{id:h.value},[z(E(G,{menuData:o.value,layoutID:s.value,class:"currentChildMenu"},null,8,["menuData","layoutID"]),[[A,u.value]])],8,H))}});export{se as default};
