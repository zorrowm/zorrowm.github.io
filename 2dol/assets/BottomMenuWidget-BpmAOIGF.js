import{a4 as j,a5 as q,a6 as F,a8 as z,_ as K,a9 as T,K as Z}from"./vendor-DLGs6WCJ.js";import{O as U,e as G,M as _,_ as Q,m as J}from"./index-Dy2WIICa.js";import{O as X}from"./urlUtils-C3lKEPoB.js";import{b as Y,u as I}from"./vue-router-exp-LDq1UUA0.js";import{s as W,B as R}from"./xframelib-exp-BL-NWzRk.js";import{d as H,r as y,b as ee,D as te,P as s,U as g,F as v,a7 as D,Q as m,$ as M,c as b,E as O,Z as L,a8 as ae,a3 as ne,L as oe,V as E}from"./@vue-exp-Mkau1HGZ.js";import"./monaco-editor-exp-B01XOe8A.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-DwwUNauw.js";const se=H({__name:"index",props:{data:{},layoutManager:{}},setup(l,{expose:u}){u();const r=l,a=y(r.data),h=Y(),k=I();function t(e){if(e.children){let o=!1;if(e.children.forEach(i=>{if(i.selected){o=!0;return}}),o)return" pagemenuActive"}else if(e.selected)return"pagemenuActive";return""}const c=y();function n(e,o){const i=e.label;if(c.value)c.value.label!=i&&(c.value.state=!1),c.value=e,e.state=o;else{c.value=e,e.state=o;return}}let d;function x(e){if(e.path&&e.path)switch(e.type){case _.Route:e.blank?X(h,e.path,{}):h.push({path:e.path});break;case _.URL:window.open(e.path,"_blank");break;case _.Action:R.EventBus.emit("IWidgetMenu.Action",e);break;case _.Widget:const o=r.layoutManager;d=e,e.selected?(e.selected=!1,e.unload?o.unloadWidget(e.path):o.changeWidgetVisible(e.path,!1)):(e.selected=!0,o.isWidgetLoaded(e.path)?o.changeWidgetVisible(e.path,!0):o.loadWidget(e.path));break}}function S(e){if(e&&e.layoutID===r.layoutManager.getLayoutID()){const i=e.widgetID;if(d&&d.path===i&&!d.selected)return;const N=a.value.length;let f;for(let w=0;w<N;w++){const p=a.value[w];if(p.type===_.Widget){if(p.path===i){f=p;break}else if(p.children){const P=p.children.length;for(let C=0;C<P;C++){const V=p.children[C];if(V.path===i){f=V;break}}}if(f)break}}f&&f.selected&&(f.selected=!1)}}ee(()=>{U(W.WidgetUnLoadedEvent,S)}),te(()=>{G(W.WidgetUnLoadedEvent,S)});const B={props:r,dataRef:a,router:h,route:k,getSelectedStyle:t,currentItem:c,setShowState:n,get CurrentMenuItem(){return d},set CurrentMenuItem(e){d=e},menuClickHandler:x,onWidgetLoadedHanlder:S};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),le={class:"row gt-xs q-ma-auto q-gutter-xs flex-center"};function re(l,u,r,a,h,k){return s(),g("div",le,[(s(!0),g(v,null,D(a.dataRef,(t,c)=>(s(),g(v,{key:t.name},[t.path?(s(),m(Z,{key:1,color:"white",flat:"",label:t.name,class:L(t.selected?"pagemenuActive":""),onClick:n=>a.menuClickHandler(t),onMouseover:n=>a.setShowState(t,!1)},null,8,["label","class","onClick","onMouseover"])):(s(),m(T,{key:0,"model-value":t.state,"onUpdate:modelValue":n=>t.state=n,color:"white","transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:t.name,class:L(a.getSelectedStyle(t)),onMouseover:n=>a.setShowState(t,!0)},{default:M(()=>[b(j,{style:{"min-width":"100px"},onMouseover:n=>a.setShowState(t,!0),onMouseleave:n=>a.setShowState(t,!1)},{default:M(()=>[(s(!0),g(v,null,D(t.children,(n,d)=>(s(),g(v,{key:n.name},[O((s(),m(q,{clickable:"",class:L(a.getSelectedStyle(n)),onClick:x=>a.menuClickHandler(n)},{default:M(()=>[b(F,null,{default:M(()=>[ae(ne(n.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[z]]),b(K)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"]))],64))),128))])}const A=Q(se,[["render",re],["__file","index.vue"]]),$="bottomMenuWidget",ie=H({name:$,components:{BottomMainMenu:A},props:{},setup(){const l=y(R.LayoutMap.get("bigScreenLayout")),u=y(!0);function r(a){a.name===$&&(u.value=a.visible)}return U(W.WidgetVisibleChanged,r),{isVisible:u,menuSetting:J,dpLayoutManager:l}}}),ce={ref:"footerMenu",class:"footer"},de={class:"layoutfooter"},ue={class:"menuContainer"};function fe(l,u,r,a,h,k){const t=A;return O((s(),g("div",ce,[E("div",de,[E("div",ue,[b(t,{data:l.menuSetting,layoutManager:l.dpLayoutManager},null,8,["data","layoutManager"])])])],512)),[[oe,l.isVisible]])}const Se=Q(ie,[["render",fe],["__scopeId","data-v-8b21ede0"],["__file","BottomMenuWidget.vue"]]);export{Se as default};
