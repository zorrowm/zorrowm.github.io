import{U as Oi,V as De,c as it,e as eo,r as G,a as w,w as se,h as S,G as mi,o as ht,K as ZM,b as Nt,H as Nu,ab as QM,j as JM,d as vr,Y as Zo,X as Ki,Q as On,W as ra,$ as Ri,v as Bt,P as $t,m as Ex,E as Ni,n as dt,D as Lx,T as ek,B as Dr,I as Ms,C as Me,i as Xi,ac as uv,M as Px,p as ko,a7 as Ix,F as Th,a3 as Al,S as mn,L as Eh,_ as tk,a5 as ik,f as nk,g as Zn}from"./@vue-exp-Mkau1HGZ.js";import{I as to}from"./@iconify/vue-exp-DwwUNauw.js";import{V as rk}from"./ol-exp-B7umSeRp.js";class Mn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var La="propertychange";class Bu{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function nr(t,e){return t>e?1:t<e?-1:0}function ok(t,e){return t<e?1:t>e?-1:0}function Lh(t,e,i){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if(typeof i=="function"){for(let r=1;r<n;++r){const o=t[r];if(o===e)return r;if(o<e)return i(e,t[r-1],o)>0?r-1:r}return n-1}if(i>0){for(let r=1;r<n;++r)if(t[r]<e)return r-1;return n-1}if(i<0){for(let r=1;r<n;++r)if(t[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function sk(t,e,i){for(;e<i;){const n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function rr(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let r=0;r<n;r++)t[t.length]=i[r]}function To(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Pa(){return!0}function Ua(){return!1}function Ia(){}function Rx(t){let e,i,n;return function(){const r=Array.prototype.slice.call(arguments);return i&&this===n&&To(r,i)||(n=this,i=r,e=t.apply(this,arguments)),e}}function fs(t){return function(){let e;try{e=t()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}()}function ju(t){for(const e in t)delete t[e]}function xo(t){let e;for(e in t)return!1;return!e}class Vu extends Bu{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,i){if(!e||!i)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(i)||r.push(i)}dispatchEvent(e){const i=typeof e=="string",n=i?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const o=i?new Mn(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;n in s||(s[n]=0,a[n]=0),++s[n];for(let u=0,c=r.length;u<c;++u)if(l="handleEvent"in r[u]?r[u].handleEvent(o):r[u].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[n]==0){let u=a[n];for(delete a[n];u--;)this.removeEventListener(n,Ia);delete s[n]}return l}disposeInternal(){this.listeners_&&ju(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,i){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(i);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=Ia,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}var It="change",ak="error",Zf="contextmenu",uu="click",lk="dblclick",Ph="keydown",qx="keypress",uk="load",fy="touchmove",Wl="wheel";function gt(t,e,i,n,r){if(r){const s=i;i=function(){t.removeEventListener(e,i),s.apply(n??this,arguments)}}else n&&n!==t&&(i=i.bind(n));const o={target:t,type:e,listener:i};return t.addEventListener(e,i),o}function Ih(t,e,i,n){return gt(t,e,i,n,!0)}function Ot(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),ju(t))}class Yl extends Vu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(It)}getRevision(){return this.revision_}onInternal(e,i){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=gt(this,e[o],i);return r}return gt(this,e,i)}onceInternal(e,i){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let o=0;o<r;++o)n[o]=Ih(this,e[o],i)}else n=Ih(this,e,i);return i.ol_key=n,n}unInternal(e,i){const n=i.ol_key;if(n)vn(n);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],i);else this.removeEventListener(e,i)}}function vn(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)Ot(t[e]);else Ot(t)}function Ke(){throw new Error("Unimplemented abstract method.")}Yl.prototype.on,Yl.prototype.once,Yl.prototype.un;let ck=0;function Qe(t){return t.ol_uid||(t.ol_uid=String(++ck))}class gy extends Mn{constructor(e,i,n){super(e),this.key=i,this.oldValue=n}}class kn extends Yl{constructor(e){super(),this.on,this.once,this.un,Qe(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let i;return this.values_&&this.values_.hasOwnProperty(e)&&(i=this.values_[e]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,i){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new gy(n,e,i)),n=La,this.hasListener(n)&&this.dispatchEvent(new gy(n,e,i))}addChangeListener(e,i){this.addEventListener(`change:${e}`,i)}removeChangeListener(e,i){this.removeEventListener(`change:${e}`,i)}set(e,i,n){const r=this.values_||(this.values_={});if(n)r[e]=i;else{const o=r[e];r[e]=i,o!==i&&this.notify(e,o)}}setProperties(e,i){for(const n in e)this.set(n,e[n],i)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,i){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],xo(this.values_)&&(this.values_=null),i||this.notify(e,n)}}}var os="add",ss="remove";const my="length";class rc extends Mn{constructor(e,i,n){super(e),this.element=i,this.index=n}}class pn extends kn{constructor(e,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let i=0,n=e.length;i<n;++i)this.push(e[i]);return this}forEach(e){const i=this.array_;for(let n=0,r=i.length;n<r;++n)e(i[n],n,i)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(my)}insertAt(e,i){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(i),this.array_.splice(e,0,i),this.updateLength_(),this.dispatchEvent(new rc(os,i,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const i=this.getLength();return this.insertAt(i,e),this.getLength()}remove(e){const i=this.array_;for(let n=0,r=i.length;n<r;++n)if(i[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const i=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new rc(ss,i,e)),i}setAt(e,i){if(e>=this.getLength())return void this.insertAt(e,i);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(i,e);const n=this.array_[e];this.array_[e]=i,this.dispatchEvent(new rc(ss,n,e)),this.dispatchEvent(new rc(os,i,e))}updateLength_(){this.set(my,this.array_.length)}assertUnique_(e,i){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==i)throw new Error("Duplicate item added to a unique collection")}}var oc="opacity",lp="visible",vy="extent",up="zIndex",cp="maxResolution",hp="minResolution",dp="maxZoom",pp="minZoom",fp="source",yy="map";function Ct(t,e){if(!t)throw new Error(e)}function Wt(t,e,i){return Math.min(Math.max(t,e),i)}function hk(t,e,i,n,r,o){const s=r-i,a=o-n;if(s!==0||a!==0){const l=((t-i)*s+(e-n)*a)/(s*s+a*a);l>1?(i=r,n=o):l>0&&(i+=s*l,n+=a*l)}return Pr(t,e,i,n)}function Pr(t,e,i,n){const r=i-t,o=n-e;return r*r+o*o}function _y(t){return 180*t/Math.PI}function Nn(t){return t*Math.PI/180}function po(t,e){const i=t%e;return i*e<0?i+e:i}function rn(t,e,i){return t+i*(e-t)}function $u(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function by(t,e){return Math.round($u(t,e))}function sc(t,e){return Math.floor($u(t,e))}function io(t,e){return Math.ceil($u(t,e))}function Qf(t,e,i){if(t>=e&&t<i)return t;const n=i-e;return((t-e)%n+n)%n+e}class Ax extends kn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const i=Object.assign({},e);typeof e.properties=="object"&&(delete i.properties,Object.assign(i,e.properties)),i[oc]=e.opacity!==void 0?e.opacity:1,Ct(typeof i[oc]=="number","Layer opacity must be a number"),i[lp]=e.visible===void 0||e.visible,i[up]=e.zIndex,i[cp]=e.maxResolution!==void 0?e.maxResolution:1/0,i[hp]=e.minResolution!==void 0?e.minResolution:0,i[pp]=e.minZoom!==void 0?e.minZoom:-1/0,i[dp]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const i=this.state_||{layer:this,managed:e===void 0||e},n=this.getZIndex();return i.opacity=Wt(Math.round(100*this.getOpacity())/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n!==void 0||i.managed?n:1/0,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(e){return Ke()}getLayerStatesArray(e){return Ke()}getExtent(){return this.get(vy)}getMaxResolution(){return this.get(cp)}getMinResolution(){return this.get(hp)}getMinZoom(){return this.get(pp)}getMaxZoom(){return this.get(dp)}getOpacity(){return this.get(oc)}getSourceState(){return Ke()}getVisible(){return this.get(lp)}getZIndex(){return this.get(up)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(vy,e)}setMaxResolution(e){this.set(cp,e)}setMinResolution(e){this.set(hp,e)}setMaxZoom(e){this.set(dp,e)}setMinZoom(e){this.set(pp,e)}setOpacity(e){Ct(typeof e=="number","Layer opacity must be a number"),this.set(oc,e)}setVisible(e){this.set(lp,e)}setZIndex(e){this.set(up,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var Jf="prerender",eg="postrender",Fx="precompose",dk="postcompose",gp="rendercomplete",sn=0,Bn=1,En={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const cv=256,Ar={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class or{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ar[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Gu=6378137,oa=Math.PI*Gu,pk=[-oa,-oa,oa,oa],fk=[-180,-85,180,85],ac=Gu*Math.log(Math.tan(Math.PI/2));class Is extends or{constructor(e){super({code:e,units:"m",extent:pk,global:!0,worldExtent:fk,getPointResolution:function(i,n){return i/Math.cosh(n[1]/Gu)}})}}const xy=[new Is("EPSG:3857"),new Is("EPSG:102100"),new Is("EPSG:102113"),new Is("EPSG:900913"),new Is("http://www.opengis.net/def/crs/EPSG/0/3857"),new Is("http://www.opengis.net/gml/srs/epsg.xml#3857")];function gk(t,e,i,n){const r=t.length;i=i>1?i:2,n=n??i,e===void 0&&(e=i>2?t.slice():new Array(r));for(let o=0;o<r;o+=n){e[o]=oa*t[o]/180;let s=Gu*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));s>ac?s=ac:s<-ac&&(s=-ac),e[o+1]=s}return e}function mk(t,e,i,n){const r=t.length;i=i>1?i:2,n=n??i,e===void 0&&(e=i>2?t.slice():new Array(r));for(let o=0;o<r;o+=n)e[o]=180*t[o]/oa,e[o+1]=360*Math.atan(Math.exp(t[o+1]/Gu))/Math.PI-90;return e}const wy=[-180,-90,180,90],vk=6378137*Math.PI/180;class qo extends or{constructor(e,i){super({code:e,units:"degrees",extent:wy,axisOrientation:i,global:!0,metersPerUnit:vk,worldExtent:wy})}}const Sy=[new qo("CRS:84"),new qo("EPSG:4326","neu"),new qo("urn:ogc:def:crs:OGC:1.3:CRS84"),new qo("urn:ogc:def:crs:OGC:2:84"),new qo("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new qo("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new qo("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let tg={};function uh(t){return tg[t]||tg[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}let ma={};function gs(t,e,i){const n=t.getCode(),r=e.getCode();n in ma||(ma[n]={}),ma[n][r]=i}function ch(t,e){return t in ma&&e in ma[t]?ma[t][e]:null}var Cy=0,Rh=1,ig=2,ng=4,rg=8,og=16;function Ra(t){const e=yk();for(let i=0,n=t.length;i<n;++i)Kl(e,t[i]);return e}function fo(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Ox(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function ks(t,e,i){let n,r;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+r*r}function ms(t,e){return hv(t,e[0],e[1])}function zn(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function hv(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function sg(t,e){const i=t[0],n=t[1],r=t[2],o=t[3],s=e[0],a=e[1];let l=Cy;return s<i?l|=og:s>r&&(l|=ng),a<n?l|=rg:a>o&&(l|=ig),l===Cy&&(l=Rh),l}function yk(){return[1/0,1/0,-1/0,-1/0]}function dr(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function Wa(t){return dr(1/0,1/0,-1/0,-1/0,t)}function zx(t,e){const i=t[0],n=t[1];return dr(i,n,i,n,e)}function dv(t,e,i,n,r){return Dx(Wa(r),t,e,i,n)}function Fr(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function pv(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Kl(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Dx(t,e,i,n,r){for(;i<n;i+=r)_k(t,e[i],e[i+1]);return t}function _k(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function fv(t,e){let i;return i=e(Ed(t)),i||(i=e(Ld(t)),i||(i=e(Pd(t)),i||(i=e(xn(t)),i||!1)))}function cu(t){let e=0;return Ts(t)||(e=nt(t)*Yt(t)),e}function Ed(t){return[t[0],t[1]]}function Ld(t){return[t[2],t[1]]}function Zi(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function bk(t,e){let i;if(e==="bottom-left")i=Ed(t);else if(e==="bottom-right")i=Ld(t);else if(e==="top-left")i=xn(t);else{if(e!=="top-right")throw new Error("Invalid corner");i=Pd(t)}return i}function qh(t,e,i,n,r){const[o,s,a,l,u,c,h,d]=function(p,f,g,_){const v=f*_[0]/2,b=f*_[1]/2,m=Math.cos(g),y=Math.sin(g),x=v*m,C=v*y,k=b*m,P=b*y,A=p[0],E=p[1];return[A-x+P,E-C-k,A-x-P,E-C+k,A+x-P,E+C+k,A+x+P,E+C-k,A-x+P,E-C-k]}(t,e,i,n);return dr(Math.min(o,a,u,h),Math.min(s,l,c,d),Math.max(o,a,u,h),Math.max(s,l,c,d),r)}function Yt(t){return t[3]-t[1]}function zi(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return ii(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Wa(n),n}function xn(t){return[t[0],t[3]]}function Pd(t){return[t[2],t[3]]}function nt(t){return t[2]-t[0]}function ii(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ts(t){return t[2]<t[0]||t[3]<t[1]}function Nx(t,e,i,n){if(Ts(t))return Wa(i);let r=[];r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(r,r,2);const o=[],s=[];for(let a=0,l=r.length;a<l;a+=2)o.push(r[a]),s.push(r[a+1]);return function(a,l,u){return dr(Math.min.apply(null,a),Math.min.apply(null,l),Math.max.apply(null,a),Math.max.apply(null,l),u)}(o,s,i)}function Bx(t,e){const i=e.getExtent(),n=Zi(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const r=nt(i),o=Math.floor((n[0]-i[0])/r)*r;t[0]-=o,t[2]-=o}return t}function gv(t,e,i){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];Bx(t,e);const r=nt(n);if(nt(t)>r&&!i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+r,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-r,t[3]]]}return[t]}function Ah(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function mv(t,e){const i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t}function jx(t,e){const i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function My(t,e){return Math.sqrt(jx(t,e))}function ky(t,e){return function(i,n,r){return i?n.replace("{x}",i[0].toFixed(r)).replace("{y}",i[1].toFixed(r)):""}(t,"{x}, {y}",e)}function vv(t,e){if(e.canWrapX()){const i=nt(e.getExtent()),n=Vx(t,e,i);n&&(t[0]-=n*i)}return t}function Vx(t,e,i){const n=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(i=i||nt(n),r=Math.floor((t[0]-n[0])/i)),r}const yv=63710088e-1;function hu(t,e,i){i=i||yv;const n=Nn(t[1]),r=Nn(e[1]),o=(r-n)/2,s=Nn(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(n)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function mp(t,e){let i=0;for(let n=0,r=t.length;n<r-1;++n)i+=hu(t[n],t[n+1],e);return i}function $x(t,e){const i=(e=e||{}).radius||yv,n=e.projection||"EPSG:3857",r=t.getType();r!=="GeometryCollection"&&(t=t.clone().transform(n,"EPSG:4326"));let o,s,a,l,u,c,h=0;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=t.getCoordinates(),h=mp(o,i);break;case"MultiLineString":case"Polygon":for(o=t.getCoordinates(),a=0,l=o.length;a<l;++a)h+=mp(o[a],i);break;case"MultiPolygon":for(o=t.getCoordinates(),a=0,l=o.length;a<l;++a)for(s=o[a],u=0,c=s.length;u<c;++u)h+=mp(s[u],i);break;case"GeometryCollection":{const d=t.getGeometries();for(a=0,l=d.length;a<l;++a)h+=$x(d[a],e);break}default:throw new Error("Unsupported geometry type: "+r)}return h}function lc(t,e){let i=0;const n=t.length;let r=t[n-1][0],o=t[n-1][1];for(let s=0;s<n;s++){const a=t[s][0],l=t[s][1];i+=Nn(a-r)*(2+Math.sin(Nn(o))+Math.sin(Nn(l))),r=a,o=l}return i*e*e/2}function Gx(t,e){const i=(e=e||{}).radius||yv,n=e.projection||"EPSG:3857",r=t.getType();r!=="GeometryCollection"&&(t=t.clone().transform(n,"EPSG:4326"));let o,s,a,l,u,c,h=0;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=t.getCoordinates(),h=Math.abs(lc(o[0],i)),a=1,l=o.length;a<l;++a)h-=Math.abs(lc(o[a],i));break;case"MultiPolygon":for(o=t.getCoordinates(),a=0,l=o.length;a<l;++a)for(s=o[a],h+=Math.abs(lc(s[0],i)),u=1,c=s.length;u<c;++u)h-=Math.abs(lc(s[u],i));break;case"GeometryCollection":{const d=t.getGeometries();for(a=0,l=d.length;a<l;++a)h+=Gx(d[a],e);break}default:throw new Error("Unsupported geometry type: "+r)}return h}const Fh=.9996,sr=.00669438,Hx=sr*sr,Ux=Hx*sr,Qo=sr/(1-sr),Ty=Math.sqrt(1-sr),qa=(1-Ty)/(1+Ty),Wx=qa*qa,_v=Wx*qa,bv=_v*qa,Yx=bv*qa,Kx=.9983242984503243,xk=15*Hx/256+45*Ux/1024,wk=35*Ux/3072,Sk=1.5*qa-27/32*_v+269/512*Yx,Ck=21/16*Wx-55/32*bv,Mk=151/96*_v-417/128*Yx,kk=1097/512*bv,Oh=6378137;function Tk(t,e,i){const n=t-5e5,r=(i.north?e:e-1e7)/Fh/(Oh*Kx),o=r+Sk*Math.sin(2*r)+Ck*Math.sin(4*r)+Mk*Math.sin(6*r)+kk*Math.sin(8*r),s=Math.sin(o),a=s*s,l=Math.cos(o),u=s/l,c=u*u,h=c*c,d=1-sr*a,p=Math.sqrt(1-sr*a),f=Qo*l**2,g=f*f,_=n/(Oh/p*Fh),v=_*_,b=v*_,m=b*_,y=m*_,x=o-u/((1-sr)/d)*(v/2-m/24*(5+3*c+10*f-4*g-9*Qo))+y*_/720*(61+90*c+298*f+45*h-252*Qo-3*g);let C=(_-b/6*(1+2*c+f)+y/120*(5-2*f+28*c-3*g+8*Qo+24*h))/l;return C=Qf(C+Nn(Xx(i.number)),-Math.PI,Math.PI),[_y(C),_y(x)]}function Ek(t,e,i){t=Qf(t,-180,180),e<-80?e=-80:e>84&&(e=84);const n=Nn(e),r=Math.sin(n),o=Math.cos(n),s=r/o,a=s*s,l=a*a,u=Nn(t),c=Nn(Xx(i.number)),h=Oh/Math.sqrt(1-sr*r**2),d=Qo*o**2,p=o*Qf(u-c,-Math.PI,Math.PI),f=p*p,g=f*p,_=g*p,v=_*p,b=v*p,m=Oh*(Kx*n-.002514607064228144*Math.sin(2*n)+xk*Math.sin(4*n)-wk*Math.sin(6*n)),y=Fh*h*(p+g/6*(1-a+d)+v/120*(5-18*a+l+72*d-58*Qo))+5e5;let x=Fh*(m+h*s*(f/2+_/24*(5-a+9*d+4*d**2)+b/720*(61-58*a+l+600*d-330*Qo)));return i.north||(x+=1e7),[y,x]}function Xx(t){return 6*(t-1)-180+3}const Lk=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Zx(t){let e=0;for(const r of Lk){const o=t.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let i=0,n=!1;return e>32700&&e<32761?i=e-32700:e>32600&&e<32661&&(n=!0,i=e-32600),i?{number:i,north:n}:null}function Ey(t,e){return function(i,n,r,o){const s=i.length;r=r>1?r:2,o=o??r,n||(n=r>2?i.slice():new Array(s));for(let a=0;a<s;a+=o){const l=i[a],u=i[a+1],c=t(l,u,e);n[a]=c[0],n[a+1]=c[1]}return n}}function Qx(...t){}const Pk=[function(t){const e=Zx(t.getCode());return e?{forward:Ey(Ek,e),inverse:Ey(Tk,e)}:null}],Ik=[function(t){return Zx(t)?new or({code:t,units:"m"}):null}];let ag=!0;function Jx(t){ag=t!==void 0}function xv(t,e){if(e!==void 0)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function du(t){(function(e,i){tg[e]=i})(t.getCode(),t),gs(t,t,xv)}function lt(t){if(typeof t!="string")return t;const e=uh(t);if(e)return e;for(const i of Ik){const n=i(t);if(n)return n}return null}function pu(t,e,i,n){let r;const o=(t=lt(t)).getPointResolutionFunc();if(o){if(r=o(e,i),n&&n!==t.getUnits()){const s=t.getMetersPerUnit();s&&(r=r*s/Ar[n])}}else{const s=t.getUnits();if(s=="degrees"&&!n||n=="degrees")r=e;else{const a=Hu(t,lt("EPSG:4326"));if(a||s==="degrees"){let u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];u=a(u,u,2),r=(hu(u.slice(0,2),u.slice(2,4))+hu(u.slice(4,6),u.slice(6,8)))/2}else r=e*t.getMetersPerUnit();const l=n?Ar[n]:t.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function lg(t){(function(e){e.forEach(du)})(t),t.forEach(function(e){t.forEach(function(i){e!==i&&gs(e,i,xv)})})}function vp(t,e){return t?typeof t=="string"?lt(t):t:lt(e)}function ug(t){return function(e,i,n,r){const o=e.length;n=n!==void 0?n:2,r=r??n,i=i!==void 0?i:new Array(o);for(let s=0;s<o;s+=r){const a=t(e.slice(s,s+n)),l=a.length;for(let u=0,c=r;u<c;++u)i[s+u]=u>=l?e[s+u]:a[u]}return i}}function Rk(t,e,i,n){const r=lt(t),o=lt(e);gs(r,o,ug(i)),gs(o,r,ug(n))}function cg(t,e){return Jx(),wo(t,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function ar(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Hu(t,e)===xv)&&i}function Hu(t,e){const i=t.getCode(),n=e.getCode();let r=ch(i,n);if(r)return r;let o=null,s=null;for(const l of Pk)o||(o=l(t)),s||(s=l(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=yp(o.inverse,s.forward);else{const l=ch(i,a);l&&(r=yp(l,s.forward))}else{const l=ch(a,n);l&&(r=yp(o.inverse,l))}return r&&(du(t),du(e),gs(t,e,r)),r}function yp(t,e){return function(i,n,r,o){return n=t(i,n,r,o),e(n,n,r,o)}}function Aa(t,e){return Hu(lt(t),lt(e))}function wo(t,e,i){const n=Aa(e,i);if(!n){const r=lt(e).getCode(),o=lt(i).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return n(t,void 0,t.length)}function hg(t,e){return t}function In(t,e){return ag&&!Ah(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(ag=!1,Qx("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function wv(t,e){return t}function er(t,e){return t}function Ly(t,e,i){return function(n){let r,o;if(t.canWrapX()){const s=t.getExtent(),a=nt(s);o=Vx(n=n.slice(0),t,a),o&&(n[0]=n[0]-o*a),n[0]=Wt(n[0],s[0],s[2]),n[1]=Wt(n[1],s[1],s[3]),r=i(n)}else r=i(n);return o&&e.canWrapX()&&(r[0]+=o*nt(e.getExtent())),r}}var Py,Iy,Ry;function qy(t,e,i){return function(n,r,o,s,a){if(!n)return;if(!r&&!e)return n;const l=e?0:o[0]*r,u=e?0:o[1]*r,c=a?a[0]:0,h=a?a[1]:0;let d=t[0]+l/2+c,p=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let _=Wt(n[0],d,p),v=Wt(n[1],f,g);if(s&&i&&r){const b=30*r;_+=-b*Math.log(1+Math.max(0,d-n[0])/b)+b*Math.log(1+Math.max(0,n[0]-p)/b),v+=-b*Math.log(1+Math.max(0,f-n[1])/b)+b*Math.log(1+Math.max(0,n[1]-g)/b)}return[_,v]}}function qk(t){return t}function dg(t,e,i,n){const r=nt(e)/i[0],o=Yt(e)/i[1];return n?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function pg(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),Wt(n,i/2,2*e)}function Ay(t,e,i,n,r){return i=i===void 0||i,function(o,s,a,l){if(o!==void 0){const u=n?dg(t,n,a,r):t;return i&&l?pg(o,u,e):Wt(o,e,u)}}}function Sv(t){if(t!==void 0)return 0}function Fy(t){if(t!==void 0)return t}function ew(t){return Math.pow(t,3)}function Ya(t){return 1-ew(1-t)}function Ak(t){return 3*t*t-2*t*t*t}function Fk(t){return t}lg(xy),lg(Sy),Py=xy,Iy=gk,Ry=mk,Sy.forEach(function(t){Py.forEach(function(e){gs(t,e,Iy),gs(e,t,Ry)})});const tw=new Array(6);function Oy(t){return Cv(t,1,0,0,1,0,0)}function zh(t,e){const i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],p=e[5];return t[0]=i*l+r*u,t[1]=n*l+o*u,t[2]=i*c+r*h,t[3]=n*c+o*h,t[4]=i*d+r*p+s,t[5]=n*d+o*p+a,t}function Cv(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t}function ai(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function _p(t,e,i){return zh(t,Cv(tw,e,0,0,i,0,0))}function pr(t,e,i,n,r,o,s,a){const l=Math.sin(o),u=Math.cos(o);return t[0]=n*u,t[1]=r*l,t[2]=-n*l,t[3]=r*u,t[4]=s*n*u-a*n*l+e,t[5]=s*r*l+a*r*u+i,t}function iw(t,e){const i=(n=e)[0]*n[3]-n[1]*n[2];var n;Ct(i!==0,"Transformation matrix cannot be inverted");const r=e[0],o=e[1],s=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/i,t[1]=-o/i,t[2]=-s/i,t[3]=r/i,t[4]=(s*u-a*l)/i,t[5]=-(r*u-o*l)/i,t}const zy=[1e6,1e6,1e6,1e6,2,2];function no(t,e,i,n,r,o,s){o=o||[],s=s||2;let a=0;for(let l=e;l<i;l+=n){const u=t[l],c=t[l+1];o[a++]=r[0]*u+r[2]*c+r[4],o[a++]=r[1]*u+r[3]*c+r[5];for(let h=2;h<s;h++)o[a++]=t[l+h]}return o&&o.length!=a&&(o.length=a),o}function Mv(t,e,i,n,r,o,s){s=s||[];const a=Math.cos(r),l=Math.sin(r),u=o[0],c=o[1];let h=0;for(let d=e;d<i;d+=n){const p=t[d]-u,f=t[d+1]-c;s[h++]=u+p*a-f*l,s[h++]=c+p*l+f*a;for(let g=d+2;g<d+n;++g)s[h++]=t[g]}return s&&s.length!=h&&(s.length=h),s}const Dy=[1,0,0,1,0,0];class nw extends kn{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Rx((e,i,n)=>{if(!n)return this.getSimplifiedGeometry(i);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(i)})}simplifyTransformed(e,i){return this.simplifyTransformedInternal(this.getRevision(),e,i)}clone(){return Ke()}closestPointXY(e,i,n,r){return Ke()}containsXY(e,i){const n=this.getClosestPoint([e,i]);return n[0]===e&&n[1]===i}getClosestPoint(e,i){return i=i||[NaN,NaN],this.closestPointXY(e[0],e[1],i,1/0),i}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ke()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Wa(i),this.extentRevision_=this.getRevision()}return function(i,n){return n?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n):i}(this.extent_,e)}rotate(e,i){Ke()}scale(e,i,n){Ke()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ke()}getType(){return Ke()}applyTransform(e){Ke()}intersectsExtent(e){return Ke()}translate(e,i){Ke()}transform(e,i){const n=lt(e),r=n.getUnits()=="tile-pixels"?function(o,s,a){const l=n.getExtent(),u=n.getWorldExtent(),c=Yt(u)/Yt(l);pr(Dy,u[0],u[3],c,-c,0,0,0);const h=no(o,0,o.length,a,Dy,s),d=Aa(n,i);return d?d(h,h,a):h}:Aa(n,i);return this.applyTransform(r),this}}class Eo extends nw{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return dv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ke()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(e);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,i){this.stride=Dh(e),this.layout=e,this.flatCoordinates=i}setCoordinates(e,i){Ke()}setLayout(e,i,n){let r;if(e)r=Dh(e);else{for(let o=0;o<n;++o){if(i.length===0)return this.layout="XY",void(this.stride=2);i=i[0]}r=i.length,e=$o(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,i){const n=this.getFlatCoordinates();if(n){const r=this.getStride();Mv(n,0,n.length,r,e,i,n),this.changed()}}scale(e,i,n){i===void 0&&(i=e),n||(n=Zi(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();(function(s,a,l,u,c,h,d,p){p=p||[];const f=d[0],g=d[1];let _=0;for(let v=a;v<l;v+=u){const b=s[v]-f,m=s[v+1]-g;p[_++]=f+c*b,p[_++]=g+h*m;for(let y=v+2;y<v+u;++y)p[_++]=s[y]}p&&p.length!=_&&(p.length=_)})(r,0,r.length,o,e,i,n,r),this.changed()}}translate(e,i){const n=this.getFlatCoordinates();if(n){const r=this.getStride();(function(o,s,a,l,u,c,h){h=h||[];let d=0;for(let p=s;p<a;p+=l){h[d++]=o[p]+u,h[d++]=o[p+1]+c;for(let f=p+2;f<p+l;++f)h[d++]=o[f]}h&&h.length!=d&&(h.length=d)})(n,0,n.length,r,e,i,n),this.changed()}}}function $o(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function Dh(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function Ny(t,e,i,n,r,o,s){const a=t[e],l=t[e+1],u=t[i]-a,c=t[i+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((r-a)*u+(o-l)*c)/(u*u+c*c);if(d>1)h=i;else{if(d>0){for(let p=0;p<n;++p)s[p]=rn(t[e+p],t[i+p],d);return void(s.length=n)}h=e}}for(let d=0;d<n;++d)s[d]=t[h+d];s.length=n}function kv(t,e,i,n,r){let o=t[e],s=t[e+1];for(e+=n;e<i;e+=n){const a=t[e],l=t[e+1],u=Pr(o,s,a,l);u>r&&(r=u),o=a,s=l}return r}function Tv(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o){const a=i[o];r=kv(t,e,a,n,r),e=a}return r}function Ev(t,e,i,n,r,o,s,a,l,u,c){if(e==i)return u;let h,d;if(r===0){if(d=Pr(s,a,t[e],t[e+1]),d<u){for(h=0;h<n;++h)l[h]=t[e+h];return l.length=n,d}return u}c=c||[NaN,NaN];let p=e+n;for(;p<i;)if(Ny(t,p-n,p,n,s,a,c),d=Pr(s,a,c[0],c[1]),d<u){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n,p+=n}else p+=n*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(o&&(Ny(t,i-n,e,n,s,a,c),d=Pr(s,a,c[0],c[1]),d<u)){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n}return u}function Lv(t,e,i,n,r,o,s,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=i.length;h<d;++h){const p=i[h];u=Ev(t,e,p,n,r,o,s,a,l,u,c),e=p}return u}function rw(t,e,i,n){for(let r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}function Id(t,e,i,n){for(let r=0,o=i.length;r<o;++r){const s=i[r];for(let a=0;a<n;++a)t[e++]=s[a]}return e}function fu(t,e,i,n,r){r=r||[];let o=0;for(let s=0,a=i.length;s<a;++s){const l=Id(t,e,i[s],n);r[o++]=l,e=l}return r.length=o,r}function ow(t,e,i,n,r){r=r||[];let o=0;for(let s=0,a=i.length;s<a;++s){const l=fu(t,e,i[s],n,r[o]);l.length===0&&(l[0]=e),r[o++]=l,e=l[l.length-1]}return r.length=o,r}function Rd(t,e,i,n,r,o,s){const a=(i-e)/n;if(a<3){for(;e<i;e+=n)o[s++]=t[e],o[s++]=t[e+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,i-n];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let p=0;const f=t[d],g=t[d+1],_=t[h],v=t[h+1];for(let b=d+n;b<h;b+=n){const m=hk(t[b],t[b+1],f,g,_,v);m>p&&(c=b,p=m)}p>r&&(l[(c-e)/n]=1,d+n<c&&u.push(d,c),c+n<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(o[s++]=t[e+h*n],o[s++]=t[e+h*n+1]);return s}function sw(t,e,i,n,r,o,s,a){for(let l=0,u=i.length;l<u;++l){const c=i[l];s=Rd(t,e,c,n,r,o,s),a.push(s),e=c}return s}function Go(t,e){return e*Math.round(t/e)}function Ok(t,e,i,n,r,o,s){if(e==i)return s;let a,l,u=Go(t[e],r),c=Go(t[e+1],r);e+=n,o[s++]=u,o[s++]=c;do if(a=Go(t[e],r),l=Go(t[e+1],r),(e+=n)==i)return o[s++]=a,o[s++]=l,s;while(a==u&&l==c);for(;e<i;){const h=Go(t[e],r),d=Go(t[e+1],r);if(e+=n,h==a&&d==l)continue;const p=a-u,f=l-c,g=h-u,_=d-c;p*_==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&_<f||f==_||f>0&&_>f)?(a=h,l=d):(o[s++]=a,o[s++]=l,u=a,c=l,a=h,l=d)}return o[s++]=a,o[s++]=l,s}function Pv(t,e,i,n,r,o,s,a){for(let l=0,u=i.length;l<u;++l){const c=i[l];s=Ok(t,e,c,n,r,o,s),a.push(s),e=c}return s}function ro(t,e,i,n,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<i;s+=n)r[o++]=t.slice(s,s+n);return r.length=o,r}function gu(t,e,i,n,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=i.length;s<a;++s){const l=i[s];r[o++]=ro(t,e,l,n,r[o]),e=l}return r.length=o,r}function fg(t,e,i,n,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=i.length;s<a;++s){const l=i[s];r[o++]=l.length===1&&l[0]===e?[]:gu(t,e,l,n,r[o]),e=l[l.length-1]}return r.length=o,r}function aw(t,e,i,n){let r=0;const o=t[i-n],s=t[i-n+1];let a=0,l=0;for(;e<i;e+=n){const u=t[e]-o,c=t[e+1]-s;r+=l*u-a*c,a=u,l=c}return r/2}function lw(t,e,i,n){let r=0;for(let o=0,s=i.length;o<s;++o){const a=i[o];r+=aw(t,e,a,n),e=a}return r}class mu extends Eo{constructor(e,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i===void 0||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}clone(){return new mu(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,i,n,r){return r<ks(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(kv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ev(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,i,n,r))}getArea(){return aw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const i=[];return i.length=Rd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new mu(i,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Id(this.flatCoordinates,0,e,this.stride),this.changed()}}class _n extends Eo{constructor(e,i){super(),this.setCoordinates(e,i)}clone(){const e=new _n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){const o=this.flatCoordinates,s=Pr(e,i,o[0],o[1]);if(s<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=o[l];return n.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return zx(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return hv(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rw(this.flatCoordinates,0,e,this.stride),this.changed()}}function zk(t,e,i,n,r){return!fv(r,function(o){return!Jo(t,e,i,n,o[0],o[1])})}function Jo(t,e,i,n,r,o){let s=0,a=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const u=t[e],c=t[e+1];l<=o?c>o&&(u-a)*(o-l)-(r-a)*(c-l)>0&&s++:c<=o&&(u-a)*(o-l)-(r-a)*(c-l)<0&&s--,a=u,l=c}return s!==0}function Iv(t,e,i,n,r,o){if(i.length===0||!Jo(t,e,i[0],n,r,o))return!1;for(let s=1,a=i.length;s<a;++s)if(Jo(t,i[s-1],i[s],n,r,o))return!1;return!0}function Rv(t,e,i,n,r,o,s){let a,l,u,c,h,d,p;const f=r[o+1],g=[];for(let b=0,m=i.length;b<m;++b){const y=i[b];for(c=t[y-n],d=t[y-n+1],a=e;a<y;a+=n)h=t[a],p=t[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(u=(f-d)/(p-d)*(h-c)+c,g.push(u)),c=h,d=p}let _=NaN,v=-1/0;for(g.sort(nr),c=g[0],a=1,l=g.length;a<l;++a){h=g[a];const b=Math.abs(h-c);b>v&&(u=(c+h)/2,Iv(t,e,i,n,u,f)&&(_=u,v=b)),c=h}return isNaN(_)&&(_=r[o]),s?(s.push(_,f,v),s):[_,f,v]}function uw(t,e,i,n,r){let o=[];for(let s=0,a=i.length;s<a;++s){const l=i[s];o=Rv(t,e,l,n,r,2*s,o),e=l[l.length-1]}return o}function cw(t,e,i,n,r){let o;for(e+=n;e<i;e+=n)if(o=r(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}function qd(t,e,i,n,r){const o=Dx([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!ii(r,o)&&(!!zn(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]||cw(t,e,i,n,function(s,a){return function(l,u,c){let h=!1;const d=sg(l,u),p=sg(l,c);if(d===Rh||p===Rh)h=!0;else{const f=l[0],g=l[1],_=l[2],v=l[3],b=u[0],m=u[1],y=c[0],x=c[1],C=(x-m)/(y-b);let k,P;p&ig&&!(d&ig)&&(k=y-(x-v)/C,h=k>=f&&k<=_),h||!(p&ng)||d&ng||(P=x-(y-_)*C,h=P>=g&&P<=v),h||!(p&rg)||d&rg||(k=y-(x-g)/C,h=k>=f&&k<=_),h||!(p&og)||d&og||(P=x-(y-f)*C,h=P>=g&&P<=v)}return h}(r,s,a)}))}function hw(t,e,i,n,r){return!!qd(t,e,i,n,r)||!!Jo(t,e,i,n,r[0],r[1])||!!Jo(t,e,i,n,r[0],r[3])||!!Jo(t,e,i,n,r[2],r[1])||!!Jo(t,e,i,n,r[2],r[3])}function dw(t,e,i,n,r){if(!hw(t,e,i[0],n,r))return!1;if(i.length===1)return!0;for(let o=1,s=i.length;o<s;++o)if(zk(t,i[o-1],i[o],n,r)&&!qd(t,i[o-1],i[o],n,r))return!1;return!0}function Dk(t,e,i,n){for(;e<i-n;){for(let r=0;r<n;++r){const o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function qv(t,e,i,n){let r=0,o=t[i-n],s=t[i-n+1];for(;e<i;e+=n){const a=t[e],l=t[e+1];r+=(a-o)*(l+s),o=a,s=l}return r===0?void 0:r>0}function Av(t,e,i,n,r){r=r!==void 0&&r;for(let o=0,s=i.length;o<s;++o){const a=i[o],l=qv(t,e,a,n);if(o===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function pw(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o){const a=i[o];if(!Av(t,e,a,n,r))return!1;a.length&&(e=a[a.length-1])}return!0}function Nh(t,e,i,n,r){r=r!==void 0&&r;for(let o=0,s=i.length;o<s;++o){const a=i[o],l=qv(t,e,a,n);(o===0?r&&l||!r&&!l:r&&!l||!r&&l)&&Dk(t,e,a,n),e=a}return e}function gg(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o)e=Nh(t,e,i[o],n,r);return e}function fw(t,e){const i=[];let n,r=0,o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s],u=qv(t,r,l,2);if(n===void 0&&(n=u),u===n)i.push(e.slice(o,s+1));else{if(i.length===0)continue;i[i.length-1].push(e[o])}o=s+1,r=l}return i}class Qi extends Eo{constructor(e,i,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&n?(this.setFlatCoordinates(i,e),this.ends_=n):this.setCoordinates(e,i)}appendLinearRing(e){this.flatCoordinates?rr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Qi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,i,n,r){return r<ks(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Tv(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,i,n,r))}containsXY(e,i){return Iv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,i)}getArea(){return lw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let i;return e!==void 0?(i=this.getOrientedFlatCoordinates().slice(),Nh(i,0,this.ends_,this.stride,e)):i=this.flatCoordinates,gu(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Zi(this.getExtent());this.flatInteriorPoint_=Rv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new _n(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new mu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,i=this.flatCoordinates,n=this.ends_,r=[];let o=0;for(let s=0,a=n.length;s<a;++s){const l=n[s],u=new mu(i.slice(o,l),e);r.push(u),o=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Av(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Nh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const i=[],n=[];return i.length=Pv(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),i,0,n),new Qi(i,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return dw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=fu(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function By(t){if(Ts(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i];return new Qi(o,"XY",[o.length])}function uc(t,e){setTimeout(function(){t(e)},0)}function Nk(t){return!(t.sourceCenter&&t.targetCenter&&!Ah(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function bp(t,e,i,n,r){const o=Math.cos(-r);let s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;return a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,s=-s,[a*o-l*s,l*o+a*s]}var tn=class extends kn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=vp(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Jx(),t.center&&(t.center=In(t.center,this.projection_)),t.extent&&(t.extent=er(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const s in En)delete e[s];this.setProperties(e,!0);const i=function(s){let a,l,u,c=s.minZoom!==void 0?s.minZoom:0,h=s.maxZoom!==void 0?s.maxZoom:28;const d=s.zoomFactor!==void 0?s.zoomFactor:2,p=s.multiWorld!==void 0&&s.multiWorld,f=s.smoothResolutionConstraint===void 0||s.smoothResolutionConstraint,g=s.showFullExtent!==void 0&&s.showFullExtent,_=vp(s.projection,"EPSG:3857"),v=_.getExtent();let b=s.constrainOnlyCenter,m=s.extent;if(p||m||!_.isGlobal()||(b=!1,m=v),s.resolutions!==void 0){const y=s.resolutions;l=y[c],u=y[h]!==void 0?y[h]:y[y.length-1],a=s.constrainResolution?function(x,C,k,P){return C=C===void 0||C,function(A,E,L,T){if(A!==void 0){const I=x[0],M=x[x.length-1],R=k?dg(I,k,L,P):I;if(T)return C?pg(A,R,M):Wt(A,M,R);const q=Math.min(R,A),F=Math.floor(Lh(x,q,E));return x[F]>R&&F<x.length-1?x[F+1]:x[F]}}}(y,f,!b&&m,g):Ay(l,u,f,!b&&m,g)}else{const y=(v?Math.max(nt(v),Yt(v)):360*Ar.degrees/_.getMetersPerUnit())/cv/Math.pow(2,0),x=y/Math.pow(2,28);l=s.maxResolution,l!==void 0?c=0:l=y/Math.pow(d,c),u=s.minResolution,u===void 0&&(u=s.maxZoom!==void 0?s.maxResolution!==void 0?l/Math.pow(d,h):y/Math.pow(d,h):x),h=c+Math.floor(Math.log(l/u)/Math.log(d)),u=l/Math.pow(d,h-c),a=s.constrainResolution?function(C,k,P,A,E,L){return A=A===void 0||A,P=P!==void 0?P:0,function(T,I,M,R){if(T!==void 0){const q=E?dg(k,E,M,L):k;if(R)return A?pg(T,q,P):Wt(T,P,q);const F=1e-9,B=Math.ceil(Math.log(k/q)/Math.log(C)-F),V=-I*(.5-F)+.5,O=Math.min(q,T),$=Math.floor(Math.log(k/O)/Math.log(C)+V),J=Math.max(B,$);return Wt(k/Math.pow(C,J),P,q)}}}(d,l,u,f,!b&&m,g):Ay(l,u,f,!b&&m,g)}return{constraint:a,maxResolution:l,minResolution:u,minZoom:c,zoomFactor:d}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(s){if(s.extent!==void 0){const l=s.smoothExtentConstraint===void 0||s.smoothExtentConstraint;return qy(s.extent,s.constrainOnlyCenter,l)}const a=vp(s.projection,"EPSG:3857");if(s.multiWorld!==!0&&a.isGlobal()){const l=a.getExtent().slice();return l[0]=-1/0,l[2]=1/0,qy(l,!1,!1)}return qk}(t),r=i.constraint,o=function(s){if(s.enableRotation===void 0||s.enableRotation){const a=s.constrainRotation;return a===void 0||a===!0?function(l){const u=Nn(5);return function(c,h){return h||c===void 0?c:Math.abs(c)<=u?0:c}}():a===!1?Fy:typeof a=="number"?function(l){const u=2*Math.PI/l;return function(c,h){return h?c:c!==void 0?c=Math.floor(c/u+.5)*u:void 0}}(a):Fy}return Sv}(t);this.constraints_={center:n,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(n[3]-e[3]+e[1]-n[1]),s=r/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=In(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=In(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&typeof arguments[i-1]=="function"&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const u=arguments[n];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(n===i)return void(e&&uc(e,!0));let r=Date.now(),o=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_;const l=[];for(;n<i;++n){const u=arguments[n],c={start:r,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||Ak,callback:e};if(u.center&&(c.sourceCenter=o,c.targetCenter=u.center.slice(),o=c.targetCenter),u.zoom!==void 0?(c.sourceResolution=s,c.targetResolution=this.getResolutionForZoom(u.zoom),s=c.targetResolution):u.resolution&&(c.sourceResolution=s,c.targetResolution=u.resolution,s=c.targetResolution),u.rotation!==void 0){c.sourceRotation=a;const h=po(u.rotation-a+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=a+h,a=c.targetRotation}Nk(c)?c.complete=!0:r+=c.duration,l.push(c)}this.animations_.push(l),this.setHint(sn,1),this.updateAnimations_()}getAnimating(){return this.hints_[sn]>0}getInteracting(){return this.hints_[Bn]>0}cancelAnimations(){let t;this.setHint(sn,-this.hints_[sn]);for(let e=0,i=this.animations_.length;e<i;++e){const n=this.animations_[e];if(n[0].callback&&uc(n[0].callback,!1),!t)for(let r=0,o=n.length;r<o;++r){const s=n[r];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let r=!0;for(let o=0,s=n.length;o<s;++o){const a=n[o];if(a.complete)continue;const l=t-a.start;let u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):r=!1;const c=a.easing(u);if(a.sourceCenter){const h=a.sourceCenter[0],d=a.sourceCenter[1],p=a.targetCenter[0],f=a.targetCenter[1];this.nextCenter_=a.targetCenter;const g=h+c*(p-h),_=d+c*(f-d);this.targetCenter_=[g,_]}if(a.sourceResolution&&a.targetResolution){const h=c===1?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){const d=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(h,0,d,!0);this.targetCenter_=this.calculateCenterZoom(p,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(a.sourceRotation!==void 0&&a.targetRotation!==void 0){const h=c===1?po(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){const d=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(d,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),e=!0,!a.complete)break}if(r){this.animations_[i]=null,this.setHint(sn,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=n[0].callback;o&&uc(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();var r,o;return n!==void 0&&(i=[n[0]-e[0],n[1]-e[1]],mv(i,t-this.getRotation()),o=e,(r=i)[0]+=+o[0],r[1]+=+o[1]),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),r=this.getResolution();return n!==void 0&&r!==void 0&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&hg(t,this.getProjection())}getCenterInternal(){return this.get(En.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return wv(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Ct(e,"The view center is not defined");const i=this.getResolution();Ct(i!==void 0,"The view resolution is not defined");const n=this.getRotation();return Ct(n!==void 0,"The view rotation is not defined"),qh(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(En.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(er(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=nt(t)/e[0],n=Yt(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(r){return e/Math.pow(t,r*n)}}getRotation(){return this.get(En.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e;return function(o){return Math.log(i/o)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();n=bp(n,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,i)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const r=Lh(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const e=Wt(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Wt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(Ct(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t))Ct(!Ts(t),"Cannot fit empty extent provided as `geometry`"),i=By(er(t,this.getProjection()));else if(t.getType()==="Circle"){const n=er(t.getExtent(),this.getProjection());i=By(n),i.rotate(this.getRotation(),Zi(n))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let s=1/0,a=1/0,l=-1/0,u=-1/0;for(let c=0,h=r.length;c<h;c+=o){const d=r[c]*i-r[c+1]*n,p=r[c]*n+r[c+1]*i;s=Math.min(s,d),a=Math.min(a,p),l=Math.max(l,d),u=Math.max(u,p)}return[s,a,l,u]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0&&e.nearest;let o;o=e.minResolution!==void 0?e.minResolution:e.maxZoom!==void 0?this.getResolutionForZoom(e.maxZoom):0;const s=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(s,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),u=Math.sin(l),c=Math.cos(l),h=Zi(s);h[0]+=(n[1]-n[3])/2*a,h[1]+=(n[0]-n[2])/2*a;const d=h[0]*c-h[1]*u,p=h[1]*c+h[0]*u,f=this.getConstrainedCenter([d,p],a),g=e.callback?e.callback:Ia;e.duration!==void 0?this.animateInternal({resolution:a,center:f,duration:e.duration,easing:e.easing},g):(this.targetResolution_=a,this.targetCenter_=f,this.applyTargetState_(!1,!0),uc(g,!0))}centerOn(t,e,i){this.centerOnInternal(In(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(bp(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let r;const o=this.padding_;if(o&&t){const s=this.getViewportSizeMinusPadding_(-i),a=bp(t,n,[s[0]/2+o[3],s[1]/2+o[0]],e,i);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=hg(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&In(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=In(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&In(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,r,i),s=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,n,r));this.get(En.ROTATION)!==n&&this.set(En.ROTATION,n),this.get(En.RESOLUTION)!==o&&(this.set(En.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(En.CENTER)&&Ah(this.get(En.CENTER),s)||this.set(En.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const n=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,n,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o));if(t===0&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&Ah(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:t,easing:Ya,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Bn,1)}endInteraction(t,e,i){i=i&&In(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(Bn,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};class Ka extends Ax{constructor(e){const i=Object.assign({},e);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(fp,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get(fp)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||this.getSource().getState()!=="ready"||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ot(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=gt(e,It,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let i;const n=this.getMapInternal();let r;if(!e&&n&&(e=n.getView()),i=e instanceof tn?{viewState:e.getState(),extent:e.calculateExtent()}:e,!i.layerStatesArray&&n&&(i.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i.layerStatesArray){if(r=i.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return Fv(r,i.viewState)&&(!o||ii(o,i.extent))}getAttributions(e){if(!this.isVisible(e))return[];const i=this.getSource()?.getAttributions();if(!i)return[];let n=i(e instanceof tn?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}render(e,i){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,i){}renderDeferred(e){const i=this.getRenderer();i&&i.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(yy,e)}getMapInternal(){return this.get(yy)}setMap(e){this.mapPrecomposeKey_&&(Ot(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ot(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=gt(e,Fx,this.handlePrecompose_,this),this.mapRenderKey_=gt(this,It,e.render,e),this.changed())}handlePrecompose_(e){const i=e.frameState.layerStatesArray,n=this.getLayerState(!1);Ct(!i.some(r=>r.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(n)}setSource(e){this.set(fp,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Fv(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}function gw(t,e,i=0,n=t.length-1,r=Bk){for(;n>i;){if(n-i>600){const l=n-i+1,u=e-i+1,c=Math.log(l),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1);gw(t,e,Math.max(i,Math.floor(e-u*h/l+d)),Math.min(n,Math.floor(e+(l-u)*h/l+d)),r)}const o=t[e];let s=i,a=n;for(pl(t,i,e),r(t[n],o)>0&&pl(t,i,n);s<a;){for(pl(t,s,a),s++,a--;r(t[s],o)<0;)s++;for(;r(t[a],o)>0;)a--}r(t[i],o)===0?pl(t,i,a):(a++,pl(t,a,n)),a<=e&&(i=a+1),e<=a&&(n=a-1)}}function pl(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function Bk(t,e){return t<e?-1:t>e?1:0}class mw{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let i=this.data;const n=[];if(!hc(e,i))return n;const r=this.toBBox,o=[];for(;i;){for(let s=0;s<i.children.length;s++){const a=i.children[s],l=i.leaf?r(a):a;hc(e,l)&&(i.leaf?n.push(a):wp(e,l)?this._all(a,n):o.push(a))}i=o.pop()}return n}collides(e){let i=this.data;if(!hc(e,i))return!1;const n=[];for(;i;){for(let r=0;r<i.children.length;r++){const o=i.children[r],s=i.leaf?this.toBBox(o):o;if(hc(e,s)){if(i.leaf||wp(e,s))return!0;n.push(o)}}i=n.pop()}return!1}load(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Zs([]),this}remove(e,i){if(!e)return this;let n=this.data;const r=this.toBBox(e),o=[],s=[];let a,l,u;for(;n||o.length;){if(n||(n=o.pop(),l=o[o.length-1],a=s.pop(),u=!0),n.leaf){const c=jk(e,n.children,i);if(c!==-1)return n.children.splice(c,1),o.push(n),this._condense(o),this}u||n.leaf||!wp(n,r)?l?(a++,n=l.children[a],u=!1):n=null:(o.push(n),s.push(a),a=0,l=n,n=n.children[0])}return this}toBBox(e){return e}compareMinX(e,i){return e.minX-i.minX}compareMinY(e,i){return e.minY-i.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,i){const n=[];for(;e;)e.leaf?i.push(...e.children):n.push(...e.children),e=n.pop();return i}_build(e,i,n,r){const o=n-i+1;let s,a=this._maxEntries;if(o<=a)return s=Zs(e.slice(i,n+1)),Rs(s,this.toBBox),s;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),s=Zs([]),s.leaf=!1,s.height=r;const l=Math.ceil(o/a),u=l*Math.ceil(Math.sqrt(a));jy(e,i,n,u,this.compareMinX);for(let c=i;c<=n;c+=u){const h=Math.min(c+u-1,n);jy(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const p=Math.min(d+l-1,h);s.children.push(this._build(e,d,p,r-1))}}return Rs(s,this.toBBox),s}_chooseSubtree(e,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){let o,s=1/0,a=1/0;for(let l=0;l<i.children.length;l++){const u=i.children[l],c=xp(u),h=Gk(e,u)-c;h<a?(a=h,s=c<s?c:s,o=u):h===a&&c<s&&(s=c,o=u)}i=o||i.children[0]}return i}_insert(e,i,n){const r=n?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,i,o);for(s.children.push(e),Ol(s,r);i>=0&&o[i].children.length>this._maxEntries;)this._split(o,i),i--;this._adjustParentBBoxes(r,o,i)}_split(e,i){const n=e[i],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const s=this._chooseSplitIndex(n,o,r),a=Zs(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,Rs(n,this.toBBox),Rs(a,this.toBBox),i?e[i-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,i){this.data=Zs([e,i]),this.data.height=e.height+1,this.data.leaf=!1,Rs(this.data,this.toBBox)}_chooseSplitIndex(e,i,n){let r,o=1/0,s=1/0;for(let a=i;a<=n-i;a++){const l=Fl(e,0,a,this.toBBox),u=Fl(e,a,n,this.toBBox),c=Hk(l,u),h=xp(l)+xp(u);c<o?(o=c,r=a,s=h<s?h:s):c===o&&h<s&&(s=h,r=a)}return r||n-i}_chooseSplitAxis(e,i,n){const r=e.leaf?this.compareMinX:Vk,o=e.leaf?this.compareMinY:$k;this._allDistMargin(e,i,n,r)<this._allDistMargin(e,i,n,o)&&e.children.sort(r)}_allDistMargin(e,i,n,r){e.children.sort(r);const o=this.toBBox,s=Fl(e,0,i,o),a=Fl(e,n-i,n,o);let l=cc(s)+cc(a);for(let u=i;u<n-i;u++){const c=e.children[u];Ol(s,e.leaf?o(c):c),l+=cc(s)}for(let u=n-i-1;u>=i;u--){const c=e.children[u];Ol(a,e.leaf?o(c):c),l+=cc(a)}return l}_adjustParentBBoxes(e,i,n){for(let r=n;r>=0;r--)Ol(i[r],e)}_condense(e){for(let i,n=e.length-1;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():Rs(e[n],this.toBBox)}}function jk(t,e,i){if(!i)return e.indexOf(t);for(let n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function Rs(t,e){Fl(t,0,t.children.length,e,t)}function Fl(t,e,i,n,r){r||(r=Zs(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<i;o++){const s=t.children[o];Ol(r,t.leaf?n(s):s)}return r}function Ol(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Vk(t,e){return t.minX-e.minX}function $k(t,e){return t.minY-e.minY}function xp(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function cc(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Gk(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Hk(t,e){const i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,o-n)}function wp(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function hc(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Zs(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jy(t,e,i,n,r){const o=[e,i];for(;o.length;){if((i=o.pop())-(e=o.pop())<=n)continue;const s=e+Math.ceil((i-e)/n/2)*n;gw(t,s,e,i,r),o.push(e,s,s,i)}}var Ji=0,Gn=1,jt=2,jn=3,vw=4,vu={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Ti={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Ti.max=Ti.whitepoint[2].D65,Ti.rgb=function(t,e){e=e||Ti.whitepoint[2].E;var i,n,r,o=t[0]/e[0],s=t[1]/e[1],a=t[2]/e[2];return n=-.96924363628087*o+1.87596750150772*s+.041555057407175*a,r=.055630079696993*o+-.20397695888897*s+1.056971514242878*a,i=(i=3.240969941904521*o+-1.537383177570093*s+-.498610760293*a)>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},vu.xyz=function(t,e){var i=t[0]/255,n=t[1]/255,r=t[2]/255,o=.21263900587151*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.71516867876775*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.072192315360733*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92),s=.019330818715591*i+.11919477979462*n+.95053215224966*r;return[(.41239079926595*i+.35758433938387*n+.18048078840183*r)*(e=e||Ti.whitepoint[2].E)[0],o*e[1],s*e[2]]};var mg={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,i){var n,r,o,s,a,l,u,c,h;return o=t[0],s=t[1],a=t[2],o===0?[0,0,0]:(e=e||"D65",i=i||2,n=s/(13*o)+4*(u=Ti.whitepoint[i][e][0])/(u+15*(c=Ti.whitepoint[i][e][1])+3*(h=Ti.whitepoint[i][e][2]))||0,r=a/(13*o)+9*c/(u+15*c+3*h)||0,[9*(l=o>8?c*Math.pow((o+16)/116,3):c*o*.0011070564598794539)*n/(4*r)||0,l,l*(12-3*n-20*r)/(4*r)||0])}};Ti.luv=function(t,e,i){var n,r,o,s,a,l,u,c,h,d,p;e=e||"D65",i=i||2,d=4*(u=Ti.whitepoint[i][e][0])/(u+15*(c=Ti.whitepoint[i][e][1])+3*(h=Ti.whitepoint[i][e][2])),p=9*c/(u+15*c+3*h),n=4*(s=t[0])/(s+15*(a=t[1])+3*(l=t[2]))||0,r=9*a/(s+15*a+3*l)||0;var f=a/c;return[o=f<=.008856451679035631?903.2962962962961*f:116*Math.pow(f,1/3)-16,13*o*(n-d),13*o*(r-p)]};var yw={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]},xyz:function(t){return mg.xyz(yw.luv(t))}};mg.lchuv=function(t){var e=t[0],i=t[1],n=t[2],r=Math.sqrt(i*i+n*n),o=360*Math.atan2(n,i)/2/Math.PI;return o<0&&(o+=360),[e,r,o]},Ti.lchuv=function(t){return mg.lchuv(Ti.luv(t))};var Vy={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},$y={red:0,orange:60,yellow:120,green:180,blue:240,purple:300},Sp={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,i,n,r,o,s=t[0]/360,a=t[1]/100,l=t[2]/100,u=0;if(a===0)return[o=255*l,o,o];for(e=2*l-(i=l<.5?l*(1+a):l+a-l*a),r=[0,0,0];u<3;)(n=s+1/3*-(u-1))<0?n++:n>1&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,r[u++]=255*o;return r}};function Uk(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var i=function(o){var s,a,l=[],u=1;if(typeof o=="number")return{space:"rgb",values:[o>>>16,(65280&o)>>>8,255&o],alpha:1};if(typeof o=="number")return{space:"rgb",values:[o>>>16,(65280&o)>>>8,255&o],alpha:1};if(o=String(o).toLowerCase(),Vy[o])l=Vy[o].slice(),a="rgb";else if(o==="transparent")u=0,a="rgb",l=[0,0,0];else if(o[0]==="#"){var c=o.slice(1),h=c.length;u=1,h<=4?(l=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],h===4&&(u=parseInt(c[3]+c[3],16)/255)):(l=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],h===8&&(u=parseInt(c[6]+c[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),a="rgb"}else if(s=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(o)){var d=s[1],p=(a=d.replace(/a$/,""))==="cmyk"?4:a==="gray"?1:3;l=s[2].trim().split(/\s*[,\/]\s*|\s+/),a==="color"&&(a=l.shift()),l=l.map(function(f,g){if(f[f.length-1]==="%")return f=parseFloat(f)/100,g===3?f:a==="rgb"?255*f:a[0]==="h"?100*f:a[0]!=="l"||g?a==="lab"?125*f:a==="lch"?g<2?150*f:360*f:a[0]!=="o"||g?a==="oklab"?.4*f:a==="oklch"?g<2?.4*f:360*f:f:f:100*f;if(a[g]==="h"||g===2&&a[a.length-1]==="h"){if($y[f]!==void 0)return $y[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return 360*parseFloat(f);if(f.endsWith("grad"))return 360*parseFloat(f)/400;if(f.endsWith("rad"))return 180*parseFloat(f)/Math.PI}return f==="none"?0:parseFloat(f)}),u=l.length>p?l.pop():1}else/[0-9](?:\s|\/|,)/.test(o)&&(l=o.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),a=o.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:a,values:l,alpha:u}}(t);if(!i.space)return[];const n=i.space[0]==="h"?Sp.min:vu.min,r=i.space[0]==="h"?Sp.max:vu.max;return(e=Array(3))[0]=Math.min(Math.max(i.values[0],n[0]),r[0]),e[1]=Math.min(Math.max(i.values[1],n[1]),r[1]),e[2]=Math.min(Math.max(i.values[2],n[2]),r[2]),i.space[0]==="h"&&(e=Sp.rgb(e)),e.push(Math.min(Math.max(i.alpha,0),1)),e}vu.hsl=function(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),l=a-s;return a===s?e=0:n===a?e=(r-o)/l:r===a?e=2+(o-n)/l:o===a&&(e=4+(n-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(s+a)/2,[e,100*(a===s?0:i<=.5?l/(a+s):l/(2-a-s)),100*i]};const Ov=[NaN,NaN,NaN,0];function Xl(t){return typeof t=="string"?t:Dv(t)}const fl={};let Cp=0;function Wk(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function Gy(t){const e=Ti.lchuv(vu.xyz(t));return e[3]=t[3],e}function zv(t){if(t==="none")return Ov;if(fl.hasOwnProperty(t))return fl[t];if(Cp>=1024){let i=0;for(const n in fl)3&i++||(delete fl[n],--Cp)}const e=Uk(t);if(e.length!==4)throw new Error('failed to parse "'+t+'" as color');for(const i of e)if(isNaN(i))throw new Error('failed to parse "'+t+'" as color');return _w(e),fl[t]=e,++Cp,e}function Fa(t){return Array.isArray(t)?t:zv(t)}function _w(t){return t[0]=Wt(t[0]+.5|0,0,255),t[1]=Wt(t[1]+.5|0,0,255),t[2]=Wt(t[2]+.5|0,0,255),t[3]=Wt(t[3],0,1),t}function Dv(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(t[3]===void 0?1:Math.round(1e3*t[3])/1e3)+")"}const oo=typeof navigator<"u"&&navigator.userAgent!==void 0?navigator.userAgent.toLowerCase():"",Yk=oo.includes("firefox");oo.includes("safari")&&!oo.includes("chrom")&&(oo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(oo));const Kk=oo.includes("webkit")&&!oo.includes("edge"),bw=oo.includes("macintosh"),xw=typeof devicePixelRatio<"u"?devicePixelRatio:1,Nv=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ww=typeof Image<"u"&&Image.prototype.decode,Sw=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function Kt(t,e,i,n){let r;return r=i&&i.length?i.shift():Nv?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",n)}let Mp;function Bh(){return Mp||(Mp=Kt(1,1)),Mp}function yu(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Xk(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),e}function Zk(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),e}function Hy(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function Cw(t){for(;t.lastChild;)t.lastChild.remove()}class Bv extends Vu{constructor(e,i,n,r){super(),this.extent=e,this.pixelRatio_=n,this.resolution=i,this.state=typeof r=="function"?Ji:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(It)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ji&&this.loader){this.state=Gn,this.changed();const e=this.getResolution(),i=Array.isArray(e)?e[0]:e;fs(()=>this.loader(this.getExtent(),i,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=jt}).catch(n=>{this.state=jn}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Qk(t,e){return e&&(t.src=e),t.src&&ww?new Promise((i,n)=>t.decode().then(()=>i(t)).catch(r=>t.complete&&t.width?i(t):n(r))):function(i,n){return new Promise((r,o)=>{function s(){l(),r(i)}function a(){l(),o(new Error("Image load error"))}function l(){i.removeEventListener("load",s),i.removeEventListener("error",a)}i.addEventListener("load",s),i.addEventListener("error",a)})}(t)}function kp(t,e,i){return e+":"+t+":"+(i?Fa(i):"null")}const yn=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];3&t++||i.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const n=kp(t,e,i);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,i){const n=kp(t,e,i);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,i,n,r){const o=kp(t,e,i),s=o in this.cache_;this.cache_[o]=n,r&&(n.getImageState()===Ji&&n.load(),n.getImageState()===Gn?n.ready().then(()=>{this.patternCache_[o]=Bh().createPattern(n.getImage(1),"repeat")}):this.patternCache_[o]=Bh().createPattern(n.getImage(1),"repeat")),s||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};let gl=null;class Mw extends Vu{constructor(e,i,n,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Ji:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===jt){gl||(gl=Kt(1,1,void 0,{willReadFrequently:!0})),gl.drawImage(this.image_,0,0);try{gl.getImageData(0,0,1,1),this.tainted_=!1}catch{gl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(It)}handleImageError_(){this.imageState_=jn,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=jt,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],i=this.size_[1],n=Kt(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ji){this.image_||this.initializeImage_(),this.imageState_=Gn;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Qk(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==jt)return;const i=this.image_,n=Kt(Math.ceil(i.width*e),Math.ceil(i.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(i,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Xl(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(i,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===jt||this.imageState_===jn)e();else{const i=()=>{this.imageState_!==jt&&this.imageState_!==jn||(this.removeEventListener(It,i),e())};this.addEventListener(It,i)}})),this.ready_}}function jv(t,e,i,n,r,o){let s=e===void 0?void 0:yn.get(e,i,r);return s||(s=new Mw(t,t&&"src"in t?t.src||void 0:e,i,n,r),yn.set(e,i,r,s,o)),o&&s&&!yn.getPattern(e,i,r)&&yn.set(e,i,r,s,o),s}function Uy(t){return t[0]>0&&t[1]>0}function kw(t,e,i){return i===void 0&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function li(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class Ad{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=li(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ad({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ke()}getImage(e){return Ke()}getHitDetectionImage(){return Ke()}getPixelRatio(e){return 1}getImageState(){return Ke()}getImageSize(){return Ke()}getOrigin(){return Ke()}getSize(){return Ke()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=li(e)}listenImageChange(e){Ke()}load(){Ke()}unlistenImageChange(e){Ke()}ready(){return Promise.resolve()}}function tr(t){return t?Array.isArray(t)?Dv(t):typeof t=="object"&&"src"in t?function(e){if(!e.offset||!e.size)return yn.getPattern(e.src,"anonymous",e.color);const i=e.src+":"+e.offset,n=yn.getPattern(i,void 0,e.color);if(n)return n;const r=yn.get(e.src,"anonymous",null);if(r.getImageState()!==jt)return null;const o=Kt(e.size[0],e.size[1]);return o.drawImage(r.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),jv(o.canvas,i,void 0,jt,e.color,!0),yn.getPattern(i,void 0,e.color)}(t):t:null}const dc="ol-hidden",Uu="ol-unselectable",Vv="ol-control",Wy="ol-collapsed",Jk=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Yy=["style","variant","weight","size","lineHeight","family"],Tw=function(t){const e=t.match(Jk);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=Yy.length;n<r;++n){const o=e[n+1];o!==void 0&&(i[Yy[n]]=o)}return i.families=i.family.split(/,\s?/),i},Ew="10px sans-serif",Ui="#000",Oa="round",Ir=[],za="round",_u="#000",bu="center",jh="middle",es=[0,0,0,0],Xn=new kn;let vg,Qs=null;const yg={},Lw=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10";let r,o;function s(l,u,c){let h=!0;for(let d=0;d<i;++d){const p=e[d];if(o=Vh(l+" "+u+" "+t+p,n),c!=p){const f=Vh(l+" "+u+" "+t+c+","+p,n);h=h&&f!=o}}return!!h}function a(){let l=!0;const u=Xn.getKeys();for(let c=0,h=u.length;c<h;++c){const d=u[c];if(Xn.get(d)<100){const[p,f,g]=d.split(`
`);s(p,f,g)?(ju(yg),Qs=null,vg=void 0,Xn.set(d,100)):(Xn.set(d,Xn.get(d)+1,!0),l=!1)}}l&&(clearInterval(r),r=void 0)}return function(l){const u=Tw(l);if(!u)return;const c=u.families;for(let h=0,d=c.length;h<d;++h){const p=c[h],f=u.style+`
`+u.weight+`
`+p;Xn.get(f)===void 0&&(Xn.set(f,100,!0),s(u.style,u.weight,p)||(Xn.set(f,0,!0),r===void 0&&(r=setInterval(a,32))))}}}(),eT=function(){let t;return function(e){let i=yg[e];if(i==null){if(Nv){const n=Tw(e),r=Pw(e,"Žg");i=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);yg[e]=i}return i}}();function Pw(t,e){return Qs||(Qs=Kt(1,1)),t!=vg&&(Qs.font=t,vg=Qs.font),Qs.measureText(e)}function Vh(t,e){return Pw(t,e).width}function Ky(t,e,i){if(e in i)return i[e];const n=e.split(`
`).reduce((r,o)=>Math.max(r,Vh(t,o)),0);return i[e]=n,n}function tT(t,e,i,n,r,o,s,a,l,u,c){t.save(),i!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=i:t.globalAlpha*=i),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(h,d){const p=h.contextInstructions;for(let f=0,g=p.length;f<g;f+=2)Array.isArray(p[f+1])?d[p[f]].apply(d,p[f+1]):d[p[f]]=p[f+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(n,r,o,s,a,0,0,s,a)):t.drawImage(n,r,o,s,a,l,u,s*c[0],a*c[1]),t.restore()}class So extends Ad{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0&&e.rotateWithView,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Gn:jt,this.imageState_===Gn&&this.ready().then(()=>this.imageState_=jt),this.render()}clone(){const e=this.getScale(),i=new So({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const e=this.size_,i=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-i[0]/n[0],e[1]/2+i[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const i=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let r=yn.get(n,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=Kt(s,s);this.draw_(o,a,e),r=a.canvas,yn.set(n,null,null,new Mw(r,void 0,null,jt,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,i,n){if(i===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return i;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const b=r;r=o,o=b}const s=this.radius2_===void 0?this.points_:2*this.points_,a=2*Math.PI/s,l=o*Math.sin(a),u=r-Math.sqrt(o*o-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if(e==="miter"&&h<=n)return h*i;const d=i/2/h,p=i/2*(u/c),f=Math.sqrt((r+d)*(r+d)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return 2*f;const g=r*Math.sin(a),_=o-Math.sqrt(r*r-g*g),v=Math.sqrt(g*g+_*_)/g;if(v<=n){const b=v*i/2-o-r;return 2*Math.max(f,b)}return 2*f}createRenderOptions(){let e,i=Oa,n=za,r=0,o=null,s=0,a=0;this.stroke_&&(e=tr(this.stroke_.getColor()??_u),a=this.stroke_.getWidth()??1,o=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??za,i=this.stroke_.getLineCap()??Oa,r=this.stroke_.getMiterLimit()??10);const l=this.calculateLineJoinSize_(n,a,r),u=Math.max(this.radius,this.radius2_||0);return{strokeStyle:e,strokeWidth:a,size:Math.ceil(2*u+l),lineCap:i,lineDash:o,lineDashOffset:s,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,i,n){if(i.scale(n,n),i.translate(e.size/2,e.size/2),this.createPath_(i),this.fill_){let r=this.fill_.getColor();r===null&&(r=Ui),i.fillStyle=tr(r),i.fill()}e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineCap=e.lineCap,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())}createHitDetectionCanvas_(e){let i;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=Fa(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(i=Kt(e.size,e.size),this.drawHitDetectionCanvas_(e,i))}return i?i.canvas:this.getImage(1)}createPath_(e){let i=this.points_;const n=this.radius;if(i===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/i;for(let a=0;a<i;a++){const l=o+a*s,u=a%2==0?n:r;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,i){i.translate(e.size/2,e.size/2),this.createPath_(i),i.fillStyle=Ui,i.fill(),e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Hn extends So{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0&&e.rotateWithView,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),i=new Hn({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(e){this.radius=e,this.render()}}class ri{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ri({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const i=jv(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===Ji&&i.load(),i.getImageState()===Gn&&(this.patternImage_=i)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Qe(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Fa(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Vt{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Vt({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Pt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Zy,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Pt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(i){return i.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Zy,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let Tp=null;function Xy(t,e){if(!Tp){const i=new ri({color:"rgba(255,255,255,0.4)"}),n=new Vt({color:"#3399CC",width:1.25});Tp=[new Pt({image:new Hn({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return Tp}function Zy(t){return t.getGeometry()}function Qy(t,e,i,n){return i!==void 0&&n!==void 0?[i/t,n/e]:i!==void 0?i/t:n!==void 0?n/e:1}class Da extends Ad{constructor(e){const i=(e=e||{}).opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0&&e.rotateWithView;super({opacity:i,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a,l=e.src;if(Ct(!(l!==void 0&&s),"`image` and `src` cannot be provided at the same time"),l!==void 0&&l.length!==0||!s||(l=s.src||Qe(s)),Ct(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),Ct(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`"),e.src!==void 0?a=Ji:s!==void 0&&(a="complete"in s?s.complete?s.src?jt:Ji:Gn:jt),this.color_=e.color!==void 0?Fa(e.color):null,this.iconImage_=jv(s,l,this.crossOrigin_,a,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(Qy(p[0],p[1],e.width,e.height))};return void this.listenImageChange(d)}}u!==void 0&&this.setScale(Qy(u,c,e.width,e.height))}}clone(){let e,i,n;return this.initialOptions_?(i=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Da({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:i,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),this.anchorOrigin_!="top-right"&&this.anchorOrigin_!="bottom-right"||(e[0]=-e[0]+r[0]),this.anchorOrigin_!="bottom-left"&&this.anchorOrigin_!="bottom-right"||(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const i=this.getDisplacement(),n=this.getScaleArray();return[e[0]-i[0]/n[0],e[1]+i[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;e=e.slice(),this.offsetOrigin_!="top-right"&&this.offsetOrigin_!="bottom-right"||(e[0]=n[0]-i[0]-e[0]),this.offsetOrigin_!="bottom-left"&&this.offsetOrigin_!="bottom-right"||(e[1]=n[1]-i[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:this.iconImage_.getImageState()==jt?this.iconImage_.getSize()[0]*e[0]:void 0}getHeight(){const e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:this.iconImage_.getImageState()==jt?this.iconImage_.getSize()[1]*e[1]:void 0}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(It,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(It,e)}ready(){return this.iconImage_.ready()}}class as{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=li(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ri({color:"#333"}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new as({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=li(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let Xa=0;const Ai=1<<Xa++,yt=1<<Xa++,Wi=1<<Xa++,qn=1<<Xa++,vs=1<<Xa++,zl=1<<Xa++,pc=Math.pow(2,6)-1,$v={[Ai]:"boolean",[yt]:"number",[Wi]:"string",[qn]:"color",[vs]:"number[]",[zl]:"size"},iT=Object.keys($v).map(Number).sort(nr);function Dl(t){const e=[];for(const i of iT)Nl(t,i)&&e.push($v[i]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Nl(t,e){return(t&e)===e}function Vr(t,e){return t===e}class pi{constructor(e,i){if(!function(n){return n in $v}(e))throw new Error(`literal expressions must have a specific type, got ${Dl(e)}`);this.type=e,this.value=i}}class nT{constructor(e,i,...n){this.type=e,this.operator=i,this.args=n}}function Iw(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function wi(t,e,i){switch(typeof t){case"boolean":if(Vr(e,Wi))return new pi(Wi,t?"true":"false");if(!Nl(e,Ai))throw new Error(`got a boolean, but expected ${Dl(e)}`);return new pi(Ai,t);case"number":if(Vr(e,zl))return new pi(zl,li(t));if(Vr(e,Ai))return new pi(Ai,!!t);if(Vr(e,Wi))return new pi(Wi,t.toString());if(!Nl(e,yt))throw new Error(`got a number, but expected ${Dl(e)}`);return new pi(yt,t);case"string":if(Vr(e,qn))return new pi(qn,zv(t));if(Vr(e,Ai))return new pi(Ai,!!t);if(!Nl(e,Wi))throw new Error(`got a string, but expected ${Dl(e)}`);return new pi(Wi,t)}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return function(n,r,o){const s=n[0],a=hT[s];if(!a)throw new Error(`unknown operator: ${s}`);return a(n,r,o)}(t,e,i);for(const n of t)if(typeof n!="number")throw new Error("expected an array of numbers");if(Vr(e,zl)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new pi(zl,t)}if(Vr(e,qn)){if(t.length===3)return new pi(qn,[...t,1]);if(t.length===4)return new pi(qn,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!Nl(e,vs))throw new Error(`got an array of numbers, but expected ${Dl(e)}`);return new pi(vs,t)}const _g="get",bg="var",Rw="concat",qw="geometry-type",rT="line-metric",xg="any",wg="all",Sg="!",Aw="resolution",oT="zoom",sT="time",Cg="==",Mg="!=",kg=">",Tg=">=",Eg="<",Lg="<=",Pg="*",Ig="/",Rg="+",qg="-",Ag="clamp",Fg="%",Og="^",zg="abs",Dg="floor",Ng="ceil",Bg="round",jg="sin",Vg="cos",$g="atan",Gg="sqrt",Fw="match",Hg="between",Ow="interpolate",Ug="coalesce",zw="case",Wg="in",Yg="number",Kg="string",aT="array",lT="color",Dw="id",uT="band",cT="palette",Xg="to-string",Zg="has",hT={[_g]:Xe(st(1,1/0),Jy),[bg]:Xe(st(1,1),function(t,e,i){const n=t[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return i.variables.add(n),[new pi(Wi,n)]}),[Zg]:Xe(st(1,1/0),Jy),[Dw]:Xe(function(t,e,i){i.featureId=!0},qs),[Rw]:Xe(st(2,1/0),kt(Wi)),[qw]:Xe(function(t,e,i){i.geometryType=!0},qs),[rT]:Xe(qs),[Aw]:Xe(qs),[oT]:Xe(qs),[sT]:Xe(qs),[xg]:Xe(st(2,1/0),kt(Ai)),[wg]:Xe(st(2,1/0),kt(Ai)),[Sg]:Xe(st(1,1),kt(Ai)),[Cg]:Xe(st(2,2),kt(pc)),[Mg]:Xe(st(2,2),kt(pc)),[kg]:Xe(st(2,2),kt(yt)),[Tg]:Xe(st(2,2),kt(yt)),[Eg]:Xe(st(2,2),kt(yt)),[Lg]:Xe(st(2,2),kt(yt)),[Pg]:Xe(st(2,1/0),e1),[Ug]:Xe(st(2,1/0),e1),[Ig]:Xe(st(2,2),kt(yt)),[Rg]:Xe(st(2,1/0),kt(yt)),[qg]:Xe(st(2,2),kt(yt)),[Ag]:Xe(st(3,3),kt(yt)),[Fg]:Xe(st(2,2),kt(yt)),[Og]:Xe(st(2,2),kt(yt)),[zg]:Xe(st(1,1),kt(yt)),[Dg]:Xe(st(1,1),kt(yt)),[Ng]:Xe(st(1,1),kt(yt)),[Bg]:Xe(st(1,1),kt(yt)),[jg]:Xe(st(1,1),kt(yt)),[Vg]:Xe(st(1,1),kt(yt)),[$g]:Xe(st(1,2),kt(yt)),[Gg]:Xe(st(1,1),kt(yt)),[Fw]:Xe(st(4,1/0),t1,function(t,e,i){const n=t.length-1,r=Wi|yt|Ai,o=wi(t[1],r,i),s=wi(t[t.length-1],e,i),a=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const u=wi(t[l+2],o.type,i);a[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=wi(t[l+3],s.type,i);a[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[o,...a,s]}),[Hg]:Xe(st(3,3),kt(yt)),[Ow]:Xe(st(6,1/0),t1,function(t,e,i){const n=t[1];let r;switch(n[0]){case"linear":r=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const o=new pi(yt,r);let s;try{s=wi(t[2],yt,i)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){try{const u=wi(t[l+3],yt,i);a[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=wi(t[l+4],e,i);a[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[o,s,...a]}),[zw]:Xe(st(3,1/0),function(t,e,i){const n=t[0],r=t.length-1;if(r%2==0)throw new Error(`expected an odd number of arguments for ${n}, got ${r} instead`)},function(t,e,i){const n=wi(t[t.length-1],e,i),r=new Array(t.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=wi(t[o+1],Ai,i);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=wi(t[o+2],n.type,i);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=n,r}),[Wg]:Xe(st(2,2),function(t,e,i){let n,r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],n=Wi}else n=yt;const o=new Array(r.length);for(let s=0;s<o.length;s++)try{const a=wi(r[s],n,i);o[s]=a}catch(a){throw new Error(`failed to parse haystack item ${s} for "in" expression: ${a.message}`)}return[wi(t[1],n,i),...o]}),[Yg]:Xe(st(1,1/0),kt(pc)),[Kg]:Xe(st(1,1/0),kt(pc)),[aT]:Xe(st(1,1/0),kt(yt)),[lT]:Xe(st(1,4),kt(yt)),[uT]:Xe(st(1,3),kt(yt)),[cT]:Xe(st(2,2),function(t,e,i){let n;try{n=wi(t[1],yt,i)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=t[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=wi(r[s],qn,i)}catch(l){throw new Error(`failed to parse color at index ${s} in palette expression: ${l.message}`)}if(!(a instanceof pi))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[n,...o]}),[Xg]:Xe(st(1,1),kt(Ai|yt|Wi|qn))};function Jy(t,e,i){const n=t.length-1,r=new Array(n);for(let o=0;o<n;++o){const s=t[o+1];switch(typeof s){case"number":r[o]=new pi(yt,s);break;case"string":r[o]=new pi(Wi,s);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&i.properties.add(String(s))}return r}function qs(t,e,i){const n=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function st(t,e){return function(i,n,r){const o=i[0],s=i.length-1;if(t===e){if(s!==t)throw new Error(`expected ${t} argument${t===1?"":"s"} for ${o}, got ${s}`)}else if(s<t||s>e)throw new Error(`expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${o}, got ${s}`)}}function e1(t,e,i){const n=t.length-1,r=new Array(n);for(let o=0;o<n;++o){const s=wi(t[o+1],e,i);r[o]=s}return r}function kt(t){return function(e,i,n){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=wi(e[s+1],t,n);o[s]=a}return o}}function t1(t,e,i){const n=t[0],r=t.length-1;if(r%2==1)throw new Error(`expected an even number of arguments for operation ${n}, got ${r} instead`)}function Xe(...t){return function(e,i,n){const r=e[0];let o;for(let s=0;s<t.length;s++){const a=t[s](e,i,n);if(s==t.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new nT(i,r,...o)}}function Nw(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Nw(t.getGeometries()[0]);default:return""}}function Nr(t,e,i){return Ln(wi(t,e,i))}function Ln(t,e){if(t instanceof pi){if(t.type===qn&&typeof t.value=="string"){const n=zv(t.value);return function(){return n}}return function(){return t.value}}const i=t.operator;switch(i){case Yg:case Kg:case Ug:return function(n){const r=n.operator,o=n.args.length,s=new Array(o);for(let a=0;a<o;++a)s[a]=Ln(n.args[a]);switch(r){case Ug:return a=>{for(let l=0;l<o;++l){const u=s[l](a);if(u!=null)return u}throw new Error("Expected one of the values to be non-null")};case Yg:case Kg:return a=>{for(let l=0;l<o;++l){const u=s[l](a);if(typeof u===r)return u}throw new Error(`Expected one of the values to be a ${r}`)};default:throw new Error(`Unsupported assertion operator ${r}`)}}(t);case _g:case bg:case Zg:return function(n){const r=n.args[0],o=r.value;switch(n.operator){case _g:return s=>{const a=n.args;let l=s.properties[o];for(let u=1,c=a.length;u<c;++u)l=l[a[u].value];return l};case bg:return s=>s.variables[o];case Zg:return s=>{const a=n.args;if(!(o in s.properties))return!1;let l=s.properties[o];for(let u=1,c=a.length;u<c;++u){const h=a[u].value;if(!l||!Object.hasOwn(l,h))return!1;l=l[h]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}(t);case Dw:return n=>n.featureId;case qw:return n=>n.geometryType;case Rw:{const n=t.args.map(r=>Ln(r));return r=>"".concat(...n.map(o=>o(r).toString()))}case Aw:return n=>n.resolution;case xg:case wg:case Hg:case Wg:case Sg:return function(n){const r=n.operator,o=n.args.length,s=new Array(o);for(let a=0;a<o;++a)s[a]=Ln(n.args[a]);switch(r){case xg:return a=>{for(let l=0;l<o;++l)if(s[l](a))return!0;return!1};case wg:return a=>{for(let l=0;l<o;++l)if(!s[l](a))return!1;return!0};case Hg:return a=>{const l=s[0](a),u=s[1](a),c=s[2](a);return l>=u&&l<=c};case Wg:return a=>{const l=s[0](a);for(let u=1;u<o;++u)if(l===s[u](a))return!0;return!1};case Sg:return a=>!s[0](a);default:throw new Error(`Unsupported logical operator ${r}`)}}(t);case Cg:case Mg:case Eg:case Lg:case kg:case Tg:return function(n){const r=n.operator,o=Ln(n.args[0]),s=Ln(n.args[1]);switch(r){case Cg:return a=>o(a)===s(a);case Mg:return a=>o(a)!==s(a);case Eg:return a=>o(a)<s(a);case Lg:return a=>o(a)<=s(a);case kg:return a=>o(a)>s(a);case Tg:return a=>o(a)>=s(a);default:throw new Error(`Unsupported comparison operator ${r}`)}}(t);case Pg:case Ig:case Rg:case qg:case Ag:case Fg:case Og:case zg:case Dg:case Ng:case Bg:case jg:case Vg:case $g:case Gg:return function(n){const r=n.operator,o=n.args.length,s=new Array(o);for(let a=0;a<o;++a)s[a]=Ln(n.args[a]);switch(r){case Pg:return a=>{let l=1;for(let u=0;u<o;++u)l*=s[u](a);return l};case Ig:return a=>s[0](a)/s[1](a);case Rg:return a=>{let l=0;for(let u=0;u<o;++u)l+=s[u](a);return l};case qg:return a=>s[0](a)-s[1](a);case Ag:return a=>{const l=s[0](a),u=s[1](a);if(l<u)return u;const c=s[2](a);return l>c?c:l};case Fg:return a=>s[0](a)%s[1](a);case Og:return a=>Math.pow(s[0](a),s[1](a));case zg:return a=>Math.abs(s[0](a));case Dg:return a=>Math.floor(s[0](a));case Ng:return a=>Math.ceil(s[0](a));case Bg:return a=>Math.round(s[0](a));case jg:return a=>Math.sin(s[0](a));case Vg:return a=>Math.cos(s[0](a));case $g:return o===2?a=>Math.atan2(s[0](a),s[1](a)):a=>Math.atan(s[0](a));case Gg:return a=>Math.sqrt(s[0](a));default:throw new Error(`Unsupported numeric operator ${r}`)}}(t);case zw:return function(n){const r=n.args.length,o=new Array(r);for(let s=0;s<r;++s)o[s]=Ln(n.args[s]);return s=>{for(let a=0;a<r-1;a+=2)if(o[a](s))return o[a+1](s);return o[r-1](s)}}(t);case Fw:return function(n){const r=n.args.length,o=new Array(r);for(let s=0;s<r;++s)o[s]=Ln(n.args[s]);return s=>{const a=o[0](s);for(let l=1;l<r;l+=2)if(a===o[l](s))return o[l+1](s);return o[r-1](s)}}(t);case Ow:return function(n){const r=n.args.length,o=new Array(r);for(let s=0;s<r;++s)o[s]=Ln(n.args[s]);return s=>{const a=o[0](s),l=o[1](s);let u,c;for(let h=2;h<r;h+=2){const d=o[h](s);let p=o[h+1](s);const f=Array.isArray(p);if(f&&(p=Wk(p)),d>=l)return h===2?p:f?dT(a,l,u,c,d,p):Bl(a,l,u,c,d,p);u=d,c=p}return c}}(t);case Xg:return function(n){const r=n.operator,o=n.args.length,s=new Array(o);for(let a=0;a<o;++a)s[a]=Ln(n.args[a]);if(r===Xg)return a=>{const l=s[0](a);return n.args[0].type===qn?Dv(l):l.toString()};throw new Error(`Unsupported convert operator ${r}`)}(t);default:throw new Error(`Unsupported operator ${i}`)}}function Bl(t,e,i,n,r,o){const s=r-i;if(s===0)return n;const a=e-i;return n+(t===1?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1))*(o-n)}function dT(t,e,i,n,r,o){if(r-i===0)return n;const s=Gy(n),a=Gy(o);let l=a[2]-s[2];return l>180?l-=360:l<-180&&(l+=360),_w(function(u){const c=Ti.rgb(yw.xyz(u));return c[3]=u[3],c}([Bl(t,e,i,s[0],r,a[0]),Bl(t,e,i,s[1],r,a[1]),s[2]+Bl(t,e,i,0,r,l),Bl(t,e,i,n[3],r,o[3])]))}function pT(t){return!0}function fT(t){const e=Iw(),i=function(r,o){const s=r.length,a=new Array(s);for(let l=0;l<s;++l){const u=r[l],c="filter"in u?Nr(u.filter,Ai,o):pT;let h;if(Array.isArray(u.style)){const d=u.style.length;h=new Array(d);for(let p=0;p<d;++p)h[p]=Qg(u.style[p],o)}else h=[Qg(u.style,o)];a[l]={filter:c,styles:h}}return function(l){const u=[];let c=!1;for(let h=0;h<s;++h)if((0,a[h].filter)(l)&&(!r[h].else||!c)){c=!0;for(const d of a[h].styles){const p=d(l);p&&u.push(p)}}return u}}(t,e),n={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(r,o){if(n.properties=r.getPropertiesInternal(),n.resolution=o,e.featureId){const s=r.getId();n.featureId=s!==void 0?s:null}return e.geometryType&&(n.geometryType=Nw(r.getGeometry())),i(n)}}function i1(t){const e=Iw(),i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Qg(t[s],e);const r={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},o=new Array(i);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const u=s.getId();r.featureId=u!==void 0?u:null}let l=0;for(let u=0;u<i;++u){const c=n[u](r);c&&(o[l]=c,l+=1)}return o.length=l,o}}function Qg(t,e){const i=ml(t,"",e),n=vl(t,"",e),r=function(l,u){const c="text-",h=Er(l,c+"value",u);if(!h)return null;const d=ml(l,c,u),p=ml(l,c+"background-",u),f=vl(l,c,u),g=vl(l,c+"background-",u),_=Er(l,c+"font",u),v=Vi(l,c+"max-angle",u),b=Vi(l,c+"offset-x",u),m=Vi(l,c+"offset-y",u),y=As(l,c+"overflow",u),x=Er(l,c+"placement",u),C=Vi(l,c+"repeat",u),k=gc(l,c+"scale",u),P=As(l,c+"rotate-with-view",u),A=Vi(l,c+"rotation",u),E=Er(l,c+"align",u),L=Er(l,c+"justify",u),T=Er(l,c+"baseline",u),I=As(l,c+"keep-upright",u),M=Bw(l,c+"padding",u),R=vc(l,c+"declutter-mode"),q=new as({declutterMode:R});return function(F){if(q.setText(h(F)),d&&q.setFill(d(F)),p&&q.setBackgroundFill(p(F)),f&&q.setStroke(f(F)),g&&q.setBackgroundStroke(g(F)),_&&q.setFont(_(F)),v&&q.setMaxAngle(v(F)),b&&q.setOffsetX(b(F)),m&&q.setOffsetY(m(F)),y&&q.setOverflow(y(F)),x){const B=x(F);if(B!=="point"&&B!=="line")throw new Error("Expected point or line for text-placement");q.setPlacement(B)}if(C&&q.setRepeat(C(F)),k&&q.setScale(k(F)),P&&q.setRotateWithView(P(F)),A&&q.setRotation(A(F)),E){const B=E(F);if(B!=="left"&&B!=="center"&&B!=="right"&&B!=="end"&&B!=="start")throw new Error("Expected left, right, center, start, or end for text-align");q.setTextAlign(B)}if(L){const B=L(F);if(B!=="left"&&B!=="right"&&B!=="center")throw new Error("Expected left, right, or center for text-justify");q.setJustify(B)}if(T){const B=T(F);if(B!=="bottom"&&B!=="top"&&B!=="middle"&&B!=="alphabetic"&&B!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");q.setTextBaseline(B)}return M&&q.setPadding(M(F)),I&&q.setKeepUpright(I(F)),q}}(t,e),o=function(l,u){return"icon-src"in l?function(c,h){const d="icon-",p=d+"src",f=jw(c[p],p),g=fc(c,d+"anchor",h),_=gc(c,d+"scale",h),v=Vi(c,d+"opacity",h),b=fc(c,d+"displacement",h),m=Vi(c,d+"rotation",h),y=As(c,d+"rotate-with-view",h),x=r1(c,d+"anchor-origin"),C=o1(c,d+"anchor-x-units"),k=o1(c,d+"anchor-y-units"),P=function(F,B){const V=F[B];if(V!==void 0)return Vw(V,B)}(c,d+"color"),A=function(F,B){const V=F[B];if(V!==void 0){if(typeof V!="string")throw new Error(`Expected a string for ${B}`);return V}}(c,d+"cross-origin"),E=function(F,B){const V=F[B];if(V!==void 0)return Wu(V,B)}(c,d+"offset"),L=r1(c,d+"offset-origin"),T=mc(c,d+"width"),I=mc(c,d+"height"),M=function(F,B){const V=F[B];if(V!==void 0){if(typeof V=="number")return li(V);if(!Array.isArray(V))throw new Error(`Expected a number or size array for ${B}`);if(V.length!==2||typeof V[0]!="number"||typeof V[1]!="number")throw new Error(`Expected a number or size array for ${B}`);return V}}(c,d+"size"),R=vc(c,d+"declutter-mode"),q=new Da({src:f,anchorOrigin:x,anchorXUnits:C,anchorYUnits:k,color:P,crossOrigin:A,offset:E,offsetOrigin:L,height:I,width:T,size:M,declutterMode:R});return function(F){return v&&q.setOpacity(v(F)),b&&q.setDisplacement(b(F)),m&&q.setRotation(m(F)),y&&q.setRotateWithView(y(F)),_&&q.setScale(_(F)),g&&q.setAnchor(g(F)),q}}(l,u):"shape-points"in l?function(c,h){const d="shape-",p=d+"points",f=d+"radius",g=em(c[p],p),_=em(c[f],f),v=ml(c,d,h),b=vl(c,d,h),m=gc(c,d+"scale",h),y=fc(c,d+"displacement",h),x=Vi(c,d+"rotation",h),C=As(c,d+"rotate-with-view",h),k=mc(c,d+"radius2"),P=mc(c,d+"angle"),A=vc(c,d+"declutter-mode"),E=new So({points:g,radius:_,radius2:k,angle:P,declutterMode:A});return function(L){return v&&E.setFill(v(L)),b&&E.setStroke(b(L)),y&&E.setDisplacement(y(L)),x&&E.setRotation(x(L)),C&&E.setRotateWithView(C(L)),m&&E.setScale(m(L)),E}}(l,u):"circle-radius"in l?function(c,h){const d="circle-",p=ml(c,d,h),f=vl(c,d,h),g=Vi(c,d+"radius",h),_=gc(c,d+"scale",h),v=fc(c,d+"displacement",h),b=Vi(c,d+"rotation",h),m=As(c,d+"rotate-with-view",h),y=vc(c,d+"declutter-mode"),x=new Hn({radius:5,declutterMode:y});return function(C){return g&&x.setRadius(g(C)),p&&x.setFill(p(C)),f&&x.setStroke(f(C)),v&&x.setDisplacement(v(C)),b&&x.setRotation(b(C)),m&&x.setRotateWithView(m(C)),_&&x.setScale(_(C)),x}}(l,u):null}(t,e),s=Vi(t,"z-index",e);if(!(i||n||r||o||xo(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new Pt;return function(l){let u=!0;if(i){const c=i(l);c&&(u=!1),a.setFill(c)}if(n){const c=n(l);c&&(u=!1),a.setStroke(c)}if(r){const c=r(l);c&&(u=!1),a.setText(c)}if(o){const c=o(l);c&&(u=!1),a.setImage(c)}return s&&a.setZIndex(s(l)),u?null:a}}function ml(t,e,i){let n;if(e+"fill-pattern-src"in t)n=function(o,s,a){const l=Er(o,s+"pattern-src",a),u=n1(o,s+"pattern-offset",a),c=n1(o,s+"pattern-size",a),h=Jg(o,s+"color",a);return function(d){return{src:l(d),offset:u&&u(d),size:c&&c(d),color:h&&h(d)}}}(t,e+"fill-",i);else{if(t[e+"fill-color"]==="none")return o=>null;n=Jg(t,e+"fill-color",i)}if(!n)return null;const r=new ri;return function(o){const s=n(o);return s===Ov?null:(r.setColor(s),r)}}function vl(t,e,i){const n=Vi(t,e+"stroke-width",i),r=Jg(t,e+"stroke-color",i);if(!n&&!r)return null;const o=Er(t,e+"stroke-line-cap",i),s=Er(t,e+"stroke-line-join",i),a=Bw(t,e+"stroke-line-dash",i),l=Vi(t,e+"stroke-line-dash-offset",i),u=Vi(t,e+"stroke-miter-limit",i),c=new Vt;return function(h){if(r){const d=r(h);if(d===Ov)return null;c.setColor(d)}if(n&&c.setWidth(n(h)),o){const d=o(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(s){const d=s(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function Vi(t,e,i){if(!(e in t))return;const n=Nr(t[e],yt,i);return function(r){return em(n(r),e)}}function Er(t,e,i){if(!(e in t))return null;const n=Nr(t[e],Wi,i);return function(r){return jw(n(r),e)}}function As(t,e,i){if(!(e in t))return null;const n=Nr(t[e],Ai,i);return function(r){const o=n(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function Jg(t,e,i){if(!(e in t))return null;const n=Nr(t[e],qn,i);return function(r){return Vw(n(r),e)}}function Bw(t,e,i){if(!(e in t))return null;const n=Nr(t[e],vs,i);return function(r){return Wu(n(r),e)}}function fc(t,e,i){if(!(e in t))return null;const n=Nr(t[e],vs,i);return function(r){const o=Wu(n(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function n1(t,e,i){if(!(e in t))return null;const n=Nr(t[e],vs,i);return function(r){return $w(n(r),e)}}function gc(t,e,i){if(!(e in t))return null;const n=Nr(t[e],vs|yt,i);return function(r){return function(o,s){return typeof o=="number"?o:$w(o,s)}(n(r),e)}}function mc(t,e){const i=t[e];if(i!==void 0){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}}function r1(t,e){const i=t[e];if(i!==void 0){if(i!=="bottom-left"&&i!=="bottom-right"&&i!=="top-left"&&i!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return i}}function o1(t,e){const i=t[e];if(i!==void 0){if(i!=="pixels"&&i!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return i}}function vc(t,e){const i=t[e];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);if(i!=="declutter"&&i!=="obstacle"&&i!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return i}}function Wu(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const i=t.length;for(let n=0;n<i;++n)if(typeof t[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function jw(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function em(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function Vw(t,e){if(typeof t=="string")return t;const i=Wu(t,e),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return i}function $w(t,e){const i=Wu(t,e);if(i.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return i}const s1="renderOrder";class Gv extends Ka{constructor(e){e=e||{};const i=Object.assign({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0&&e.updateWhileAnimating,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(s1)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,i){const n=this.getDeclutter();!(n in e.declutter)&&(e.declutter[n]=new mw(9)),this.getRenderer().renderDeclutter(e,i)}setRenderOrder(e){this.set(s1,e)}setStyle(e){this.style_=e===void 0?Xy:e;const i=function(n){if(n===void 0)return Xy;if(!n)return null;if(typeof n=="function"||n instanceof Pt)return n;if(!Array.isArray(n))return i1([n]);if(n.length===0)return[];const r=n.length,o=n[0];if(o instanceof Pt){const s=new Array(r);for(let a=0;a<r;++a){const l=n[a];if(!(l instanceof Pt))throw new Error("Expected a list of style instances");s[a]=l}return s}if("style"in o){const s=new Array(r);for(let a=0;a<r;++a){const l=n[a];if(!("style"in l))throw new Error("Expected a list of rules with a style property");s[a]=l}return fT(s)}return i1(n)}(e);this.styleFunction_=e===null?void 0:function(n){let r;if(typeof n=="function")r=n;else{let o;Array.isArray(n)?o=n:(Ct(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),o=[n]),r=function(){return o}}return r}(i),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}class gT extends Bu{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,i){Ke()}calculateMatrices2D(e){const i=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;pr(n,e.size[0]/2,e.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),iw(r,n)}forEachFeatureAtCoordinate(e,i,n,r,o,s,a,l){let u;const c=i.viewState;function h(y,x,C,k){return o.call(s,x,y?C:null,k)}const d=c.projection,p=vv(e.slice(),d),f=[[0,0]];if(d.canWrapX()&&r){const y=nt(d.getExtent());f.push([-y,0],[y,0])}const g=i.layerStatesArray,_=g.length,v=[],b=[];for(let y=0;y<f.length;y++)for(let x=_-1;x>=0;--x){const C=g[x],k=C.layer;if(k.hasRenderer()&&Fv(C,c)&&a.call(l,k)){const P=k.getRenderer(),A=k.getSource();if(P&&A){const E=A.getWrapX()?p:e,L=h.bind(null,C.managed);b[0]=E[0]+f[y][0],b[1]=E[1]+f[y][1],u=P.forEachFeatureAtCoordinate(b,i,n,L,v)}if(u)return u}}if(v.length===0)return;const m=1/v.length;return v.forEach((y,x)=>y.distanceSq+=x*m),v.sort((y,x)=>y.distanceSq-x.distanceSq),v.some(y=>u=y.callback(y.feature,y.layer,y.geometry)),u}hasFeatureAtCoordinate(e,i,n,r,o,s){return this.forEachFeatureAtCoordinate(e,i,n,r,Pa,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){Ke()}scheduleExpireIconCache(e){yn.canExpireCache()&&e.postRenderFunctions.push(mT)}}function mT(t,e){yn.expire()}class Gw extends Mn{constructor(e,i,n,r){super(e),this.inversePixelTransform=i,this.frameState=n,this.context=r}}class vT extends gT{constructor(e){super(e),this.fontChangeListenerKey_=gt(Xn,La,e.redrawText,e),this.element_=document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=Uu+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,i){const n=this.getMap();if(n.hasListener(e)){const r=new Gw(e,void 0,i);n.dispatchEvent(r)}}disposeInternal(){Ot(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(Fx,e);const i=e.layerStatesArray.sort((s,a)=>s.zIndex-a.zIndex);i.some(s=>s.layer instanceof Gv&&s.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const r=[];let o=null;for(let s=0,a=i.length;s<a;++s){const l=i[s];e.layerIndex=s;const u=l.layer,c=u.getSourceState();if(!Fv(l,n)||c!="ready"&&c!="undefined"){u.unrender();continue}const h=u.render(e,o);h&&(h!==o&&(this.children_.push(h),o=h),r.push(l))}this.declutter(e,r),function(s,a){const l=s.childNodes;for(let u=0;;++u){const c=l[u],h=a[u];if(!c&&!h)break;c!==h&&(c?h?s.insertBefore(h,c):(s.removeChild(c),--u):s.appendChild(h))}}(this.element_,this.children_),this.dispatchRenderEvent(dk,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,i){if(e.declutter){for(let n=i.length-1;n>=0;--n){const r=i[n],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}i.forEach(n=>n.layer.renderDeferred(e))}}}class Zr extends Mn{constructor(e,i){super(e),this.layer=i}}const Ep="layers";class Na extends Ax{constructor(e){e=e||{};const i=Object.assign({},e);delete i.layers;let n=e.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ep,this.handleLayersChanged_),n?Array.isArray(n)?n=new pn(n.slice(),{unique:!0}):Ct(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new pn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ot),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(gt(e,os,this.handleLayersAdd_,this),gt(e,ss,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Ot);ju(this.listenerKeys_);const i=e.getArray();for(let n=0,r=i.length;n<r;n++){const o=i[n];this.registerLayerListeners_(o),this.dispatchEvent(new Zr("addlayer",o))}this.changed()}registerLayerListeners_(e){const i=[gt(e,La,this.handleLayerChange_,this),gt(e,It,this.handleLayerChange_,this)];e instanceof Na&&i.push(gt(e,"addlayer",this.handleLayerGroupAdd_,this),gt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Qe(e)]=i}handleLayerGroupAdd_(e){this.dispatchEvent(new Zr("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Zr("removelayer",e.layer))}handleLayersAdd_(e){const i=e.element;this.registerLayerListeners_(i),this.dispatchEvent(new Zr("addlayer",i)),this.changed()}handleLayersRemove_(e){const i=e.element,n=Qe(i);this.listenerKeys_[n].forEach(Ot),delete this.listenerKeys_[n],this.dispatchEvent(new Zr("removelayer",i)),this.changed()}getLayers(){return this.get(Ep)}setLayers(e){const i=this.getLayers();if(i){const n=i.getArray();for(let r=0,o=n.length;r<o;++r)this.dispatchEvent(new Zr("removelayer",n[r]))}this.set(Ep,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(i){i.getLayersArray(e)}),e}getLayerStatesArray(e){const i=e!==void 0?e:[],n=i.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(i)});const r=this.getLayerState();let o=r.zIndex;e||r.zIndex!==void 0||(o=0);for(let s=n,a=i.length;s<a;s++){const l=i[s];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=zi(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=o)}return i}getSourceState(){return"ready"}}class Js extends Mn{constructor(e,i,n){super(e),this.map=i,this.frameState=n!==void 0?n:null}}class Tr extends Js{constructor(e,i,n,r,o,s){super(e,i,o),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0&&r,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var Et={SINGLECLICK:"singleclick",CLICK:uu,DBLCLICK:lk,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},yT="pointermove",Hw="pointerdown";class _T extends Vu{constructor(e,i){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=gt(n,Hw,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=gt(n,yT,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(fy,this.boundHandleTouchMove_,!!Sw&&{passive:!1})}emulateClick_(e){let i=new Tr(Et.CLICK,this.map_,e);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new Tr(Et.DBLCLICK,this.map_,e),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Tr(Et.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const i=e,n=i.pointerId;if(i.type==Et.POINTERUP||i.type==Et.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==i.target){delete this.trackedTouches_[r];break}}else i.type!=Et.POINTERDOWN&&i.type!=Et.POINTERMOVE||(this.trackedTouches_[n]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const i=new Tr(Et.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ot),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const i=new Tr(Et.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(gt(n,Et.POINTERMOVE,this.handlePointerMove_,this),gt(n,Et.POINTERUP,this.handlePointerUp_,this),gt(this.element_,Et.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(gt(this.element_.getRootNode(),Et.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const i=new Tr(Et.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const i=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Tr(Et.POINTERMOVE,this.map_,e,i))}handleTouchMove_(e){const i=this.originalPointerMoveEvent_;i&&!i.defaultPrevented||typeof e.cancelable=="boolean"&&e.cancelable!==!0||e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ot(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(fy,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ot(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ot),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var Hv="postrender",bT="movestart",xT="moveend",a1="loadstart",l1="loadend",yc="layergroup",Lp="size",_c="target",yl="view";const tm=1/0;class wT{constructor(e,i){this.priorityFunction_=e,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ju(this.queuedElements_)}dequeue(){const e=this.elements_,i=this.priorities_,n=e[0];e.length==1?(e.length=0,i.length=0):(e[0]=e.pop(),i[0]=i.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){Ct(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(e);return i!=tm&&(this.elements_.push(e),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const i=this.elements_,n=this.priorities_,r=i.length,o=i[e],s=n[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&n[u]<n[l]?u:l;i[e]=i[c],n[e]=n[c],e=c}i[e]=o,n[e]=s,this.siftDown_(a,e)}siftDown_(e,i){const n=this.elements_,r=this.priorities_,o=n[i],s=r[i];for(;i>e;){const a=this.getParentIndex_(i);if(!(r[a]>s))break;n[i]=n[a],r[i]=r[a],i=a}n[i]=o,r[i]=s}reprioritize(){const e=this.priorityFunction_,i=this.elements_,n=this.priorities_;let r=0;const o=i.length;let s,a,l;for(a=0;a<o;++a)s=i[a],l=e(s),l==tm?delete this.queuedElements_[this.keyFunction_(s)]:(n[r]=l,i[r++]=s);i.length=r,n.length=r,this.heapify_()}}var di=0,fr=1,Gt=2,Zt=3,gi=4;class Uw extends wT{constructor(e,i){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const i=super.enqueue(e);return i&&e[0].addEventListener(It,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const i=e.target,n=i.getState();if(n===Gt||n===Zt||n===gi){n!==Zt&&i.removeEventListener(It,this.boundHandleTileChange_);const r=i.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,i){let n=0;for(;this.tilesLoading_<e&&n<i&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()!==di||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}}class yr extends kn{constructor(e){super();const i=e.element;!i||e.target||i.style.pointerEvents||(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let i=0,n=this.listenerKeys.length;i<n;++i)Ot(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==Ia&&this.listenerKeys.push(gt(e,Hv,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class ST extends yr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed===void 0||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible===void 0||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const i=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:i+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"›",s=e.collapseClassName!==void 0?e.collapseClassName:i+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(uu,this.handleClick_.bind(this),!1);const u=i+" "+Uu+" "+Vv+(this.collapsed_&&this.collapsible_?" "+Wy:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const i=this.getMap().getAllLayers(),n=new Set(i.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>n.add(r)):n.add(this.attributions_)),!this.overrideCollapsible_){const r=!i.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(n)}async updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const i=await Promise.all(this.collectSourceAttributions_(e).map(r=>fs(()=>r))),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!To(i,this.renderedAttributions_)){Cw(this.ulElement_);for(let r=0,o=i.length;r<o;++r){const s=document.createElement("li");s.innerHTML=i[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=i}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Wy),this.collapsed_?Hy(this.collapseLabel_,this.label_):Hy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class CT extends yr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const i=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(uu,this.handleClick_.bind(this),!1);const a=i+" "+Uu+" "+Vv,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide===void 0||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(dc)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:Ya}):e.setRotation(0))}render(e){const i=e.frameState;if(!i)return;const n=i.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const o=this.element.classList.contains(dc);o||n!==0?o&&n!==0&&this.element.classList.remove(dc):this.element.classList.add(dc)}this.label_.style.transform=r}this.rotation_=n}}class MT extends yr{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const i=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:i+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:i+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof s=="string"?document.createTextNode(s):s),c.addEventListener(uu,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=o,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(uu,this.handleClick_.bind(this,-n),!1);const d=i+" "+Uu+" "+Vv,p=this.element;p.className=d,p.appendChild(c),p.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,i){i.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const r=i.getConstrainedZoom(n+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Ya})):i.setZoom(r)}}}var im="active";class Yu extends kn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(im)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(im,e)}setMap(e){this.map_=e}}function Uv(t,e,i,n){const r=t.getZoom();if(r===void 0)return;const o=t.getConstrainedZoom(r+e),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:n!==void 0?n:250,easing:Ya})}class Ww extends Yu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let i=!1;if(e.type==Et.DBLCLICK){const n=e.originalEvent,r=e.map,o=e.coordinate,s=n.shiftKey?-this.delta_:this.delta_;Uv(r.getView(),s,o,this.duration_),n.preventDefault(),i=!0}return!i}}class Lo extends Yu{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Et.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Et.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Et.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,i=this.stopDown(n)}else e.type==Et.POINTERMOVE&&this.handleMoveEvent(e);return!i}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Wv(t){const e=t.length;let i=0,n=0;for(let r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return{clientX:i/e,clientY:n/e}}function nm(t){const e=arguments;return function(i){let n=!0;for(let r=0,o=e.length;r<o&&(n=n&&e[r](i),n);++r);return n}}const kT=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Yw=function(t){const e=t.map.getTargetElement(),i=e.getRootNode();return!(i instanceof ShadowRoot?i.host:e).hasAttribute("tabindex")||function(n){const r=n.map.getTargetElement(),o=r.getRootNode(),s=n.map.getOwnerDocument().activeElement;return o instanceof ShadowRoot?o.host.contains(s):r.contains(s)}(t)},rm=Pa,Kw=function(t){const e=t.originalEvent;return e.button==0&&!(Kk&&bw&&e.ctrlKey)},TT=Ua,Yv=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Xw=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zw=function(t){const e=t.originalEvent,i=e.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!e.target.isContentEditable},Pp=function(t){const e=t.originalEvent;return Ct(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},ET=function(t){const e=t.originalEvent;return Ct(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class LT extends Lo{constructor(e){super({stopDown:Ua}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=e.condition?e.condition:nm(Yv,ET);this.condition_=e.onFocusOnly?nm(Yw,i):i,this.noKinetic_=!1}handleDragEvent(e){const i=e.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const n=this.targetPointers,r=i.getEventPixel(Wv(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],s=e.map.getView();(function(a,l){a[0]*=l,a[1]*=l})(o,s.getResolution()),mv(o,s.getRotation()),s.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const i=e.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=n.getCenterInternal(),a=i.getPixelFromCoordinateInternal(s),l=i.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Ya})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class PT extends Lo{constructor(e){e=e||{},super({stopDown:Ua}),this.condition_=e.condition?e.condition:kT,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Pp(e))return;const i=e.map,n=i.getView();if(n.getConstraints().rotation===Sv)return;const r=i.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return Pp(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Pp(e)&&Kw(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class IT extends Bu{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,i=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],i[0])+n,r.top=Math.min(e[1],i[1])+n,r.width=Math.abs(i[0]-e[0])+n,r.height=Math.abs(i[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,i){this.startPixel_=e,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,i=this.endPixel_,n=[e,[e[0],i[1]],i,[i[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Qi([n])}getGeometry(){return this.geometry_}}const RT="boxstart",qT="boxdrag",AT="boxend",Ip="boxcancel";class _l extends Mn{constructor(e,i,n){super(e),this.coordinate=i,this.mapBrowserEvent=n}}class FT extends Lo{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new IT(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Kw,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,i,n){const r=n[0]-i[0],o=n[1]-i[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new _l(qT,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const i=this.boxEndCondition_(e,this.startPixel_,e.pixel);return i&&this.onBoxEnd(e),this.dispatchEvent(new _l(i?AT:Ip,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new _l(RT,e.coordinate,e)),!0)}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new _l(Ip,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new _l(Ip,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class OT extends FT{constructor(e){super({condition:(e=e||{}).condition?e.condition:Xw,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0&&e.out}onBoxEnd(e){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(n),o=i.getResolutionForExtentInternal(r),s=i.getResolution()/o;n=n.clone(),n.scale(s*s)}i.fitInternal(n,{duration:this.duration_,easing:Ya})}}var u1="ArrowLeft",zT="ArrowUp",c1="ArrowRight",h1="ArrowDown";class DT extends Yu{constructor(e){super(),e=e||{},this.defaultCondition_=function(i){return Yv(i)&&Zw(i)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let i=!1;if(e.type==Ph){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==h1||r==u1||r==c1||r==zT)){const o=e.map.getView(),s=o.getResolution()*this.pixelDelta_;let a=0,l=0;r==h1?l=-s:r==u1?a=-s:r==c1?a=s:l=s;const u=[a,l];mv(u,o.getRotation()),function(c,h,d){const p=c.getCenterInternal();if(p){const f=[p[0]+h[0],p[1]+h[1]];c.animateInternal({duration:d!==void 0?d:250,easing:Fk,center:c.getConstrainedCenter(f)})}}(o,u,this.duration_),n.preventDefault(),i=!0}}return!i}}class NT extends Yu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(i){return!function(n){const r=n.originalEvent;return bw?r.metaKey:r.ctrlKey}(i)&&Zw(i)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let i=!1;if(e.type==Ph||e.type==qx){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_;Uv(o.getView(),s,void 0,this.duration_),n.preventDefault(),i=!0}}return!i}}class BT{constructor(e,i,n){this.decay_=e,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,i){this.points_.push(e,i,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<e)return!1;let n=i-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[i+2]-this.points_[n+2];if(r<1e3/60)return!1;const o=this.points_[i]-this.points_[n],s=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class jT extends Yu{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor===void 0||e.useAnchor,this.constrainResolution_=e.constrainResolution!==void 0&&e.constrainResolution;const i=e.condition?e.condition:rm;this.condition_=e.onFocusOnly?nm(Yw,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Wl)return!0;const i=e.map,n=e.originalEvent;let r;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel),e.type==Wl&&(r=n.deltaY,Yk&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=xw),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const s=i.getView();if(this.mode_==="trackpad"&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=r;const a=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),a),!1}handleWheelZoom_(e){const i=e.getView();i.getAnimating()&&i.cancelAnimations();let n=-Wt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Uv(i,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class VT extends Lo{constructor(e){const i=e=e||{};i.stopDown||(i.stopDown=Ua),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let i=0;const n=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=l}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==Sv&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Wv(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const i=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class $T extends Lo{constructor(e){const i=e=e||{};i.stopDown||(i.stopDown=Ua),super(i),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let i=1;const n=this.targetPointers[0],r=this.targetPointers[1],o=n.clientX-r.clientX,s=n.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(i=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Wv(this.targetPointers))),l.render(),u.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const i=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function Qw(t){t instanceof Ka?t.setMapInternal(null):t instanceof Na&&t.getLayers().forEach(Qw)}function Jw(t,e){if(t instanceof Ka)t.setMapInternal(e);else if(t instanceof Na){const i=t.getLayers().getArray();for(let n=0,r=i.length;n<r;++n)Jw(i[n],e)}}var Za=class extends kn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(n){let r=null;n.keyboardEventTarget!==void 0&&(r=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const o={},s=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Na({layers:n.layers});let a,l,u;return o[yc]=s,o[_c]=n.target,o[yl]=n.view instanceof tn?n.view:new tn,n.controls!==void 0&&(Array.isArray(n.controls)?a=new pn(n.controls.slice()):(Ct(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),a=n.controls)),n.interactions!==void 0&&(Array.isArray(n.interactions)?l=new pn(n.interactions.slice()):(Ct(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=n.interactions)),n.overlays!==void 0?Array.isArray(n.overlays)?u=new pn(n.overlays.slice()):(Ct(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=n.overlays):u=new pn,{controls:a,interactions:l,keyboardEventTarget:r,overlays:u,values:o}}(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:xw,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||function(n){n=n||{};const r=new pn;return(n.zoom===void 0||n.zoom)&&r.push(new MT(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&r.push(new CT(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&r.push(new ST(n.attributionOptions)),r}(),this.interactions=e.interactions||function(n){n=n||{};const r=new pn,o=new BT(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&r.push(new PT),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&r.push(new Ww({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&r.push(new LT({onFocusOnly:n.onFocusOnly,kinetic:o})),(n.pinchRotate===void 0||n.pinchRotate)&&r.push(new VT),(n.pinchZoom===void 0||n.pinchZoom)&&r.push(new $T({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(r.push(new DT),r.push(new NT({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&r.push(new jT({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&r.push(new OT({duration:n.zoomDuration})),r}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Uw(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(yc,this.handleLayerGroupChanged_),this.addChangeListener(yl,this.handleViewChanged_),this.addChangeListener(Lp,this.handleSizeChanged_),this.addChangeListener(_c,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof tn||t.view.then(function(n){i.setView(new tn(n))}),this.controls.addEventListener(os,n=>{n.element.setMap(this)}),this.controls.addEventListener(ss,n=>{n.element.setMap(null)}),this.interactions.addEventListener(os,n=>{n.element.setMap(this)}),this.interactions.addEventListener(ss,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(os,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(ss,n=>{const r=n.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Jw(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),r=(i=i!==void 0?i:{}).hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Pa,s=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,s,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(n){i.push(n)},e),i}getAllLayers(){const t=[];return function e(i){i.forEach(function(n){n instanceof Na?e(n.getLayers()):t.push(n)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=(e=e!==void 0?e:{}).layerFilter!==void 0?e.layerFilter:Pa,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],r=e.height/i[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/n,(o.clientY-e.top)/r]}getTarget(){return this.get(_c)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return hg(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ai(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(yc)}setLayers(t){const e=this.getLayerGroup();if(t instanceof pn)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e];if(!n.visible)continue;const r=n.layer.getRenderer();if(r&&!r.ready)return!0;const o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=In(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ai(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Lp)}getView(){return this.get(yl)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return function(r,o,s,a,l){if(!r||!(s in r.wantedTiles)||!r.wantedTiles[s][o.getKey()])return tm;const u=r.viewState.center,c=a[0]-u[0],h=a[1]-u[1];return 65536*Math.log(l)+Math.sqrt(c*c+h*h)/l}(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new Tr(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Hw||i===Wl||i===Ph){const n=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=e.target,s=r instanceof ShadowRoot?r.host===o?r.host.ownerDocument:r:r===n?n.documentElement:r;if(this.overlayContainerStopEvent_.contains(o)||!s.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const n=this.getInteractions().getArray().slice();for(let r=n.length-1;r>=0;r--){const o=n[r];if(!(o.getMap()!==this||!o.getActive()||!this.getTargetElement())&&(!o.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,r=n;if(t){const o=t.viewHints;if(o[sn]||o[Bn]){const s=Date.now()-t.time>8;n=s?0:8,r=s?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(gp)&&this.renderer_.dispatchRenderEvent(gp,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Js(l1,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Js(a1,this,t))));const i=this.postRenderFunctions_;if(t)for(let n=0,r=i.length;n<r;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,n=this.targetChangeHandlerKeys_.length;i<n;++i)Ot(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Zf,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Wl,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new vT(this)),this.mapBrowserEventHandler_=new _T(this,this.moveTolerance_);for(const r in Et)this.mapBrowserEventHandler_.addEventListener(Et[r],this.handleMapBrowserEvent.bind(this));let i;if(this.viewport_.addEventListener(Zf,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Wl,this.boundHandleBrowserEvent_,!!Sw&&{passive:!1}),this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const r=e.getRootNode();i=r instanceof ShadowRoot?r.host:e}this.targetChangeHandlerKeys_=[gt(i,Ph,this.handleBrowserEvent,this),gt(i,qx,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ot(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ot(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=gt(t,La,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=gt(t,It,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ot),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Zr("addlayer",t)),this.layerGroupPropertyListenerKeys_=[gt(t,La,this.render,this),gt(t,It,this.render,this),gt(t,"addlayer",this.handleLayerAdd_,this),gt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Qw(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let r=null;if(e!==void 0&&Uy(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:qh(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:o,wantedTiles:{},mapId:Qe(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const a=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=qh(s.nextCenter,s.nextResolution,a,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!Ts(this.previousExtent_)&&!Fr(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Js(bT,this,n)),this.previousExtent_=Wa(this.previousExtent_)),this.previousExtent_&&!r.viewHints[sn]&&!r.viewHints[Bn]&&!Fr(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Js(xT,this,r)),Ox(r.extent,this.previousExtent_))),this.dispatchEvent(new Js(Hv,this,r)),this.renderComplete_=(this.hasListener(a1)||this.hasListener(l1)||this.hasListener(gp))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Zr("removelayer",e)),this.set(yc,t)}setSize(t){this.set(Lp,t)}setTarget(t){this.set(_c,t)}setView(t){if(!t||t instanceof tn)return void this.set(yl,t);this.set(yl,new tn);const e=this;t.then(function(i){e.setView(new tn(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),r=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(r)||isNaN(o)||(e=[Math.max(0,r),Math.max(0,o)],!Uy(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Qx("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&To(e,i)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}},$h="preload",Gh="useInterimTilesOnError";class GT extends Ka{constructor(e){e=e||{};const i=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError===void 0||e.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get($h)}setPreload(e){this.set($h,e)}getUseInterimTilesOnError(){return this.get(Gh)}setUseInterimTilesOnError(e){this.set(Gh,e)}getData(e){return super.getData(e)}}class HT extends Yl{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ke()}getData(e){return null}prepareFrame(e){return Ke()}renderFrame(e,i){return Ke()}forEachFeatureAtCoordinate(e,i,n,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const i=e.target;i.getState()!==jt&&i.getState()!==jn||this.renderIfReadyAndVisible()}loadImage(e){let i=e.getState();return i!=jt&&i!=jn&&e.addEventListener(It,this.boundHandleImageChange_),i==Ji&&(e.load(),i=e.getState()),i==jt}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Kv{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Bh(),{get:(e,i)=>{if(typeof Bh()[i]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i),this.pushMethodArgs_},set:(e,i,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i,n),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(i=>{for(let n=0,r=i.length;n<r;++n){const o=i[n];if(typeof o=="function"){o(e);continue}const s=i[++n];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const d1=[];let Fs=null;class Xv extends HT{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,i,n){let r;Fs||(Fs=Kt(1,1,void 0,{willReadFrequently:!0})),Fs.clearRect(0,0,1,1);try{Fs.drawImage(e,i,n,1,1,0,0,1,1),r=Fs.getImageData(0,0,1,1).data}catch{return Fs=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,i,n){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&To(Fa(e.style.backgroundColor),Fa(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&s.canvas.style.transform===i?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Kt();const l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(e,i,n){const r=xn(n),o=Pd(n),s=Ld(n),a=Ed(n);ai(i.coordinateToPixelTransform,r),ai(i.coordinateToPixelTransform,o),ai(i.coordinateToPixelTransform,s),ai(i.coordinateToPixelTransform,a);const l=this.inversePixelTransform;ai(l,r),ai(l,o),ai(l,s),ai(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,i){const n=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(nt(n)/r*s),l=Math.round(Yt(n)/r*s);pr(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-l/2),iw(this.inversePixelTransform,this.pixelTransform);const u=function(c){return"matrix("+c.map((h,d)=>Math.round(h*zy[d])/zy[d]).join(", ")+")"}(this.pixelTransform);if(this.useContainer(i,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=a||c.height!=l?(c.width=a,c.height=l):this.context.clearRect(0,0,a,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,i,n){const r=this.getLayer();if(r.hasListener(e)){const o=new Gw(e,this.inversePixelTransform,n,i);r.dispatchEvent(o)}}preRender(e,i){this.frameState=i,i.declutter||this.dispatchRenderEvent_(Jf,e,i)}postRender(e,i){i.declutter||this.dispatchRenderEvent_(eg,e,i)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Kv),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Jf,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(eg,this.context,e))}getRenderTransform(e,i,n,r,o,s,a){const l=o/2,u=s/2,c=r/i,h=-c,d=-e[0]+a,p=-e[1];return pr(this.tempTransform,l,u,c,h,-n,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Ku extends Vu{constructor(e,i,n){super(),n=n||{},this.tileCoord=e,this.state=i,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(It)}release(){this.state===Zt&&this.setState(gi)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Zt&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Ke()}getAlpha(e,i){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(n){if(n===-1)return 1}else n=i,this.transitionStarts_[e]=n;const r=i-n+1e3/60;return r>=this.transition_?1:ew(r/this.transition_)}inTransition(e){return!!this.transition_&&this.transitionStarts_[e]!==-1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Hh(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const UT=new Error("disposed");let Os=null;const WT=[256,256];class Uh extends Ku{constructor(e){const i=di;super(e.tileCoord,i,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Hh(this.data_);return e?[e.width,e.height]:WT}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==di&&this.state!==Zt)return;this.state=fr,this.changed();const e=this;this.loader_().then(function(i){e.data_=i,e.state=Gt,e.changed()}).catch(function(i){e.error_=i,e.state=Zt,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(UT),this.controller_=null),super.disposeInternal()}}class e2 extends Ku{constructor(e,i,n,r,o,s){super(e,i,s),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Gt,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Zt,this.unlistenImage_(),this.image_=function(){const e=Kt(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Gt:this.state=gi,this.unlistenImage_(),this.changed()}load(){this.state==Zt&&(this.state=di,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==di&&(this.state=fr,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(e,i,n){const r=e;let o=!0,s=!1,a=!1;const l=[Ih(r,uk,function(){a=!0,s||i()})];return r.src&&ww?(s=!0,r.decode().then(function(){o&&i()}).catch(function(u){o&&(a?i():n())})):l.push(Ih(r,ak,n)),function(){o=!1,l.forEach(Ot)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}class YT{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Bu&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let i=this.oldest_;for(;i;)e(i.value_,i.key_,this),i=i.newer}get(e,i){const n=this.entries_[e];return Ct(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const i=this.entries_[e];return Ct(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[e],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,n=0;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,n=0;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,i){this.get(e),this.entries_[e].value_=i}set(e,i){Ct(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}class Zv{constructor(e,i,n,r,o,s,a){this.sourceProj_=e,this.targetProj_=i;let l={};const u=a?ug(m=>ai(a,wo(m,this.targetProj_,this.sourceProj_))):Aa(this.targetProj_,this.sourceProj_);this.transformInv_=function(m){const y=m[0]+"/"+m[1];return l[y]||(l[y]=u(m)),l[y]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&nt(r)>=nt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?nt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?nt(this.targetProj_.getExtent()):null;const c=xn(n),h=Pd(n),d=Ld(n),p=Ed(n),f=this.transformInv_(c),g=this.transformInv_(h),_=this.transformInv_(d),v=this.transformInv_(p),b=10+(s?Math.max(0,Math.ceil(Math.log2(cu(n)/(s*s*256*256)))):0);if(this.addQuad_(c,h,d,p,f,g,_,v,b),this.wrapsXInSource_){let m=1/0;this.triangles_.forEach(function(y,x,C){m=Math.min(m,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(y=>{if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-m>this.sourceWorldWidth_/2){const x=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];x[0][0]-m>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-m>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-m>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const C=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-C<this.sourceWorldWidth_/2&&(y.source=x)}})}l={}}addTriangle_(e,i,n,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,i,n]})}addQuad_(e,i,n,r,o,s,a,l,u){const c=Ra([o,s,a,l]),h=this.sourceWorldWidth_?nt(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1;let f=!1;if(u>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=nt(Ra([e,i,n,r]))/this.targetWorldWidth_>.25||f),!p&&this.sourceProj_.isGlobal()&&h&&(f=h>.25||f)),!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!ii(c,this.maxSourceExtent_))return;let g=0;if(!(f||isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1]))){if(u>0)f=!0;else if(g=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),g!=1&&g!=2&&g!=4&&g!=8)return}if(u>0){if(!f){const _=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(_);let b;p?b=(po(o[0],d)+po(a[0],d))/2-po(v[0],d):b=(o[0]+a[0])/2-v[0];const m=(o[1]+a[1])/2-v[1];f=b*b+m*m>this.errorThresholdSquared_}if(f){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const _=[(i[0]+n[0])/2,(i[1]+n[1])/2],v=this.transformInv_(_),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],m=this.transformInv_(b);this.addQuad_(e,i,_,b,o,s,v,m,u-1),this.addQuad_(b,_,n,r,m,v,a,l,u-1)}else{const _=[(e[0]+i[0])/2,(e[1]+i[1])/2],v=this.transformInv_(_),b=[(n[0]+r[0])/2,(n[1]+r[1])/2],m=this.transformInv_(b);this.addQuad_(e,_,b,r,o,v,m,l,u-1),this.addQuad_(_,i,n,b,v,s,a,m,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&g||this.addTriangle_(e,n,r,o,a,l),14&g||this.addTriangle_(e,n,i,o,a,s),g&&(13&g||this.addTriangle_(i,r,e,s,l,o),7&g||this.addTriangle_(i,r,n,s,l,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(i,n,r){const o=i.source;Kl(e,o[0]),Kl(e,o[1]),Kl(e,o[2])}),e}getTriangles(){return this.triangles_}}let Rp;const ea=[];function p1(t,e,i,n,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,r)),t.restore()}function qp(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function om(t,e,i,n){const r=wo(i,e,t);let o=pu(e,n,i);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=t.getMetersPerUnit();a!==void 0&&(o/=a);const l=t.getExtent();if(!l||ms(l,r)){const u=pu(t,o,r)/o;isFinite(u)&&u>0&&(o/=u)}return o}function t2(t,e,i,n){const r=Zi(i);let o=om(t,e,r,n);return(!isFinite(o)||o<=0)&&fv(i,function(s){return o=om(t,e,s,n),isFinite(o)&&o>0}),o}function i2(t,e,i,n,r,o,s,a,l,u,c,h,d,p){const f=Kt(Math.round(i*t),Math.round(i*e),ea);if(h||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;function g(x){return Math.round(x*i)/i}f.scale(i,i),f.globalCompositeOperation="lighter";const _=[1/0,1/0,-1/0,-1/0];let v;l.forEach(function(x,C,k){pv(_,x.extent)});const b=i/n,m=(h?1:1+Math.pow(2,-24))/b;if(!d||l.length!==1||u!==0){if(v=Kt(Math.round(nt(_)*b),Math.round(Yt(_)*b),ea),h||(v.imageSmoothingEnabled=!1),r&&p){const x=(r[0]-_[0])*b,C=-(r[3]-_[3])*b,k=nt(r)*b,P=Yt(r)*b;v.rect(x,C,k,P),v.clip()}l.forEach(function(x,C,k){if(x.image.width>0&&x.image.height>0){if(x.clipExtent){v.save();const T=(x.clipExtent[0]-_[0])*b,I=-(x.clipExtent[3]-_[3])*b,M=nt(x.clipExtent)*b,R=Yt(x.clipExtent)*b;v.rect(h?T:Math.round(T),h?I:Math.round(I),h?M:Math.round(T+M)-Math.round(T),h?R:Math.round(I+R)-Math.round(I)),v.clip()}const P=(x.extent[0]-_[0])*b,A=-(x.extent[3]-_[3])*b,E=nt(x.extent)*b,L=Yt(x.extent)*b;v.drawImage(x.image,u,u,x.image.width-2*u,x.image.height-2*u,h?P:Math.round(P),h?A:Math.round(A),h?E:Math.round(P+E)-Math.round(P),h?L:Math.round(A+L)-Math.round(A)),x.clipExtent&&v.restore()}})}const y=xn(s);return a.getTriangles().forEach(function(x,C,k){const P=x.source,A=x.target;let E=P[0][0],L=P[0][1],T=P[1][0],I=P[1][1],M=P[2][0],R=P[2][1];const q=g((A[0][0]-y[0])/o),F=g(-(A[0][1]-y[1])/o),B=g((A[1][0]-y[0])/o),V=g(-(A[1][1]-y[1])/o),O=g((A[2][0]-y[0])/o),$=g(-(A[2][1]-y[1])/o),J=E,te=L;E=0,L=0,T-=J,I-=te,M-=J,R-=te;const ie=function(z){const N=z.length;for(let U=0;U<N;U++){let W=U,ve=Math.abs(z[U][U]);for(let fe=U+1;fe<N;fe++){const pe=Math.abs(z[fe][U]);pe>ve&&(ve=pe,W=fe)}if(ve===0)return null;const ce=z[W];z[W]=z[U],z[U]=ce;for(let fe=U+1;fe<N;fe++){const pe=-z[fe][U]/z[U][U];for(let Le=U;Le<N+1;Le++)U==Le?z[fe][Le]=0:z[fe][Le]+=pe*z[U][Le]}}const K=new Array(N);for(let U=N-1;U>=0;U--){K[U]=z[U][N]/z[U][U];for(let W=U-1;W>=0;W--)z[W][N]-=z[W][U]*K[U]}return K}([[T,I,0,0,B-q],[M,R,0,0,O-q],[0,0,T,I,V-F],[0,0,M,R,$-F]]);if(!ie)return;if(f.save(),f.beginPath(),function(){if(Rp===void 0){const z=Kt(6,6,ea);z.globalCompositeOperation="lighter",z.fillStyle="rgba(210, 0, 0, 0.75)",p1(z,4,5,4,0),p1(z,4,5,0,5);const N=z.getImageData(0,0,3,3).data;Rp=qp(N,0)||qp(N,4)||qp(N,8),yu(z),ea.push(z.canvas)}return Rp}()||!h){f.moveTo(B,V);const z=4,N=q-B,K=F-V;for(let U=0;U<z;U++)f.lineTo(B+g((U+1)*N/z),V+g(U*K/(z-1))),U!=z-1&&f.lineTo(B+g((U+1)*N/z),V+g((U+1)*K/(z-1)));f.lineTo(O,$)}else f.moveTo(B,V),f.lineTo(q,F),f.lineTo(O,$);let j;if(f.clip(),f.transform(ie[0],ie[2],ie[1],ie[3],q,F),f.translate(_[0]-J,_[3]-te),v)j=v.canvas,f.scale(m,-m);else{const z=l[0],N=z.extent;j=z.image,f.scale(nt(N)/j.width,-Yt(N)/j.height)}f.drawImage(j,0,0),f.restore()}),v&&(yu(v),ea.push(v.canvas)),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(x,C,k){const P=x.target,A=(P[0][0]-y[0])/o,E=-(P[0][1]-y[1])/o,L=(P[1][0]-y[0])/o,T=-(P[1][1]-y[1])/o,I=(P[2][0]-y[0])/o,M=-(P[2][1]-y[1])/o;f.beginPath(),f.moveTo(L,T),f.lineTo(A,E),f.lineTo(I,M),f.closePath(),f.stroke()}),f.restore()),f.canvas}function sm(t,e,i,n,r,o,s){const a=1/(t-e),l=1/(i-n),u=1/(r-o);return(s=s??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*u,s[11]=0,s[12]=(t+e)*a,s[13]=(n+i)*l,s[14]=(o+r)*u,s[15]=1,s}function f1(t,e,i,n,r){return(r=r??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*i,r[5]=t[5]*i,r[6]=t[6]*i,r[7]=t[7]*i,r[8]=t[8]*n,r[9]=t[9]*n,r[10]=t[10]*n,r[11]=t[11]*n,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}class KT{constructor(e){this.gl_=e,this.program_=am(e,`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,i,n,r,o,s,a,l,u,c,h,d,p){const f=this.gl_;l===void 0&&(l=r),u===void 0&&(u=o),s===void 0&&(s=i),a===void 0&&(a=n),c===void 0&&(c=s),h===void 0&&(h=a),d===void 0&&(d=f.canvas.width),p===void 0&&(p=f.canvas.height),f.bindTexture(f.TEXTURE_2D,e),f.useProgram(this.program_),f.bindBuffer(f.ARRAY_BUFFER,this.positionBuffer),f.enableVertexAttribArray(this.positionLocation),f.vertexAttribPointer(this.positionLocation,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.texcoordBuffer),f.enableVertexAttribArray(this.texcoordLocation),f.vertexAttribPointer(this.texcoordLocation,2,f.FLOAT,!1,0,0);let g=sm(0,d,0,p,-1,1);g=function(v,b,m,y,x){let C,k,P,A,E,L,T,I,M,R,q,F;return v===(x=x??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])?(x[12]=v[0]*b+v[4]*m+v[8]*y+v[12],x[13]=v[1]*b+v[5]*m+v[9]*y+v[13],x[14]=v[2]*b+v[6]*m+v[10]*y+v[14],x[15]=v[3]*b+v[7]*m+v[11]*y+v[15]):(C=v[0],k=v[1],P=v[2],A=v[3],E=v[4],L=v[5],T=v[6],I=v[7],M=v[8],R=v[9],q=v[10],F=v[11],x[0]=C,x[1]=k,x[2]=P,x[3]=A,x[4]=E,x[5]=L,x[6]=T,x[7]=I,x[8]=M,x[9]=R,x[10]=q,x[11]=F,x[12]=C*b+E*m+M*y+v[12],x[13]=k*b+L*m+R*y+v[13],x[14]=P*b+T*m+q*y+v[14],x[15]=A*b+I*m+F*y+v[15]),x}(g,l,u,0),g=f1(g,c,h,1),f.uniformMatrix4fv(this.matrixLocation,!1,g);let _=function(v,b,m,y){return(y=y??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=v,y[13]=b,y[14]=m,y[15]=1,y}(r/i,o/n,0);_=f1(_,s/i,a/n,1),f.uniformMatrix4fv(this.textureMatrixLocation,!1,_),f.uniform1i(this.textureLocation,0),f.drawArrays(f.TRIANGLES,0,this.positions.length/2)}}function g1(t,e,i){const n=t.createShader(e);if(n===null)throw new Error("Shader compilation failed");if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const r=t.getShaderInfoLog(n);throw r===null?new Error("Shader info log creation failed"):new Error(r)}return n}function am(t,e,i){const n=t.createProgram(),r=g1(t,t.VERTEX_SHADER,i),o=g1(t,t.FRAGMENT_SHADER,e);if(n===null)throw new Error("Program creation failed");if(t.attachShader(n,r),t.attachShader(n,o),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw t.getProgramInfoLog(n)===null?new Error("Program info log creation failed"):new Error;return n}const m1=[];function XT(t,e,i,n,r,o,s,a,l,u,c,h,d,p){const f=Math.round(n*e),g=Math.round(n*i);let _,v;if(t.canvas.width=f,t.canvas.height=g,v=t.createTexture(),t.bindTexture(t.TEXTURE_2D,v),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),d?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,f,g,0,t.RGBA,c,null),_=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,v,0),_===null)throw new Error("Could not create framebuffer");if(v===null)throw new Error("Could not create texture");if(l.length===0)return{width:f,height:g,framebuffer:_,texture:v};const b=[1/0,1/0,-1/0,-1/0];let m,y,x;l.forEach(function(E,L,T){pv(b,E.extent)});const C=1/r;{if(m=t.createTexture(),v===null)throw new Error("Could not create texture");y=Math.round(nt(b)*C),x=Math.round(Yt(b)*C);const E=t.getParameter(t.MAX_TEXTURE_SIZE),L=Math.max(y,x),T=L>E?E/L:1,I=Math.round(y*T),M=Math.round(x*T);t.bindTexture(t.TEXTURE_2D,m),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),d?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,I,M,0,t.RGBA,c,null);const R=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,R),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,m,0);const q=new KT(t);l.forEach(function(F,B,V){const O=(F.extent[0]-b[0])*C*T,$=-(F.extent[3]-b[3])*C*T,J=nt(F.extent)*C*T,te=Yt(F.extent)*C*T;if(t.bindFramebuffer(t.FRAMEBUFFER,R),t.viewport(0,0,I,M),F.clipExtent){const ie=(F.clipExtent[0]-b[0])*C*T,j=-(F.clipExtent[3]-b[3])*C*T,z=nt(F.clipExtent)*C*T,N=Yt(F.clipExtent)*C*T;t.enable(t.SCISSOR_TEST),t.scissor(d?ie:Math.round(ie),d?j:Math.round(j),d?z:Math.round(ie+z)-Math.round(ie),d?N:Math.round(j+N)-Math.round(j))}q.drawImage(F.texture,F.width,F.height,u,u,F.width-2*u,F.height-2*u,d?O:Math.round(O),d?$:Math.round($),d?J:Math.round(O+J)-Math.round(O),d?te:Math.round($+te)-Math.round($),I,M),t.disable(t.SCISSOR_TEST)}),t.deleteFramebuffer(R)}const k=xn(s),P=xn(b),A=E=>{const L=(E[0][0]-k[0])/o*n,T=-(E[0][1]-k[1])/o*n;return{u1:(E[1][0]-k[0])/o*n,v1:-(E[1][1]-k[1])/o*n,u0:L,v0:T,u2:(E[2][0]-k[0])/o*n,v2:-(E[2][1]-k[1])/o*n}};t.bindFramebuffer(t.FRAMEBUFFER,_),t.viewport(0,0,f,g);{const E=[],L=[],T=am(t,`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`);t.useProgram(T);const I=t.getUniformLocation(T,"u_texture");t.bindTexture(t.TEXTURE_2D,m),t.uniform1i(I,0),a.getTriangles().forEach(function(O,$,J){const te=O.source,ie=O.target,{u1:j,v1:z,u0:N,v0:K,u2:U,v2:W}=A(ie),ve=(te[0][0]-P[0])/r/y,ce=-(te[0][1]-P[1])/r/x,fe=(te[1][0]-P[0])/r/y,pe=-(te[1][1]-P[1])/r/x,Le=(te[2][0]-P[0])/r/y,Pe=-(te[2][1]-P[1])/r/x;E.push(j,z,N,K,U,W),L.push(fe,pe,ve,ce,Le,Pe)});const M=sm(0,f,g,0,-1,1),R=t.getUniformLocation(T,"u_matrix");t.uniformMatrix4fv(R,!1,M);const q=t.getAttribLocation(T,"a_position"),F=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,F),t.bufferData(t.ARRAY_BUFFER,new Float32Array(E),t.STATIC_DRAW),t.vertexAttribPointer(q,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(q);const B=t.getAttribLocation(T,"a_texcoord"),V=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,V),t.bufferData(t.ARRAY_BUFFER,new Float32Array(L),t.STATIC_DRAW),t.vertexAttribPointer(B,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(B),t.drawArrays(t.TRIANGLES,0,E.length/2)}if(h){const E=am(t,`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`);t.useProgram(E);const L=sm(0,f,g,0,-1,1),T=t.getUniformLocation(E,"u_matrix");t.uniformMatrix4fv(T,!1,L);const I=Array.isArray(h)?h:[0,0,0,255],M=t.getUniformLocation(E,"u_val");t.uniform4fv(M,I);const R=t.getAttribLocation(E,"a_position"),q=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,q),t.vertexAttribPointer(R,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(R);const F=a.getTriangles().reduce(function(B,V){const O=V.target,{u1:$,v1:J,u0:te,v0:ie,u2:j,v2:z}=A(O);return B.concat([$,J,te,ie,te,ie,j,z,j,z,$,J])},[]);t.bufferData(t.ARRAY_BUFFER,new Float32Array(F),t.STATIC_DRAW),t.drawArrays(t.LINES,0,F.length/2)}return{width:f,height:g,framebuffer:_,texture:v}}class n2 extends Uh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0&&e.renderEdges,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const i=e.sourceProj,n=i.getExtent(),r=e.sourceTileGrid.getExtent();this.clipExtent_=i.canWrapX()?r?zi(n,r):n:r;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),s=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=s?zi(o,s):o;if(cu(l)===0)return void(this.state=gi);n&&(a=a?zi(a,n):n);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=t2(i,c,l,u);if(!isFinite(h)||h<=0)return void(this.state=gi);const d=e.errorThreshold!==void 0?e.errorThreshold:.5;if(this.triangulation_=new Zv(i,c,l,a,h*d,u,e.transformMatrix),this.triangulation_.getTriangles().length===0)return void(this.state=gi);this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let p=this.triangulation_.calculateSourceExtent();if(a&&(i.canWrapX()?(p[1]=Wt(p[1],a[1],a[3]),p[3]=Wt(p[3],a[1],a[3])):p=zi(p,a)),cu(p)){let f=0,g=0;i.canWrapX()&&(f=nt(n),g=Math.floor((p[0]-n[0])/f)),gv(p.slice(),i,!0).forEach(_=>{const v=this.sourceTileGrid_.getTileRangeForExtentAndZ(_,this.sourceZ_),b=e.getTileFunction;for(let m=v.minX;m<=v.maxX;m++)for(let y=v.minY;y<=v.maxY;y++){const x=b(this.sourceZ_,m,y,this.pixelRatio_);if(x){const C=g*f;this.sourceTiles_.push({tile:x,offset:C})}}++g}),this.sourceTiles_.length===0&&(this.state=gi)}else this.state=gi}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let i=!1;if(this.sourceTiles_.forEach(b=>{const m=b.tile;if(!m||m.getState()!==Gt)return;const y=m.getSize(),x=this.gutter_;let C;const k=(P=m.getData())instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Float32Array||P instanceof DataView?P:null;var P;k?C=k:(i=!0,C=function(O){Os||(Os=Kt(O.width,O.height,void 0,{willReadFrequently:!0}));const $=Os.canvas,J=O.width;$.width!==J&&($.width=J);const te=O.height;return $.height!==te&&($.height=te),Os.clearRect(0,0,J,te),Os.drawImage(O,0,0),Os.getImageData(0,0,J,te).data}(Hh(m.getData())));const A=[y[0]+2*x,y[1]+2*x],E=C instanceof Float32Array,L=A[0]*A[1],T=E?Float32Array:Uint8ClampedArray,I=new T(C.buffer),M=T.BYTES_PER_ELEMENT,R=M*I.length/L,q=I.byteLength/A[1],F=Math.floor(q/M/A[0]),B=this.sourceTileGrid_.getTileCoordExtent(m.tileCoord);B[0]+=b.offset,B[2]+=b.offset;const V=this.clipExtent_?.slice();V&&(V[0]+=b.offset,V[2]+=b.offset),e.push({extent:B,clipExtent:V,data:I,dataType:T,bytesPerPixel:R,pixelSize:A,bandCount:F})}),this.sourceTiles_.length=0,e.length===0)return this.state=Zt,void this.changed();const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),o=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=o*this.pixelRatio_,l=s*this.pixelRatio_,u=this.targetTileGrid_.getResolution(n),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),d=e[0].bandCount,p=new e[0].dataType(d*a*l),f=function(b,m,y,x){let C;return C=y&&y.length?y.shift():Nv?new OffscreenCanvas(b||300,m||300):document.createElement("canvas"),b&&(C.width=b),m&&(C.height=m),C.getContext("webgl",x)}(a,l,m1,{premultipliedAlpha:!1,antialias:!1});let g;const _=f.RGBA;let v;e[0].dataType==Float32Array?(v=f.FLOAT,f.getExtension("WEBGL_color_buffer_float"),f.getExtension("OES_texture_float"),f.getExtension("EXT_float_blend"),g=f.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(v=f.UNSIGNED_BYTE,g=this.interpolate);for(let b=Math.ceil(d/4)-1;b>=0;--b){const m=[];for(let L=0,T=e.length;L<T;++L){const I=e[L],M=I.pixelSize,R=M[0],q=M[1],F=new I.dataType(4*R*q),B=I.data;let V=4*b;for(let $=0,J=F.length;$<J;$+=4)F[$]=B[V],F[$+1]=B[V+1],F[$+2]=B[V+2],F[$+3]=B[V+3],V+=d;const O=f.createTexture();f.bindTexture(f.TEXTURE_2D,O),g?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST)),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texImage2D(f.TEXTURE_2D,0,_,R,q,0,_,v,F),m.push({extent:I.extent,clipExtent:I.clipExtent,texture:O,width:R,height:q})}const{framebuffer:y,width:x,height:C}=XT(f,o,s,this.pixelRatio_,c,u,h,this.triangulation_,m,this.gutter_,v,this.renderEdges_,g),k=x,P=4*C,A=new e[0].dataType(k*P);f.bindFramebuffer(f.FRAMEBUFFER,y),f.readPixels(0,0,x,C,f.RGBA,v,A);let E=4*b;for(let L=0,T=A.length;L<T;L+=4){const I=(k-1-(L/P|0))*P+L%P;p[E]=A[I],p[E+1]=A[I+1],p[E+2]=A[I+2],p[E+3]=A[I+3],E+=d}}if(function(b){const m=b.canvas;m.width=1,m.height=1,b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT|b.STENCIL_BUFFER_BIT)}(f),m1.push(f.canvas),i){const b=Kt(o,s),m=new ImageData(p,o);b.putImageData(m,0,0),this.reprojData_=b.canvas}else this.reprojData_=p;this.reprojSize_=[Math.round(a),Math.round(l)],this.state=Gt,this.changed()}load(){if(this.state!==di&&this.state!==Zt)return;this.state=fr,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n!==di&&n!==fr)return;e++;const r=gt(i,It,()=>{const o=i.getState();o!=Gt&&o!=Zt&&o!=gi||(Ot(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i}){i.getState()==di&&i.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ot),this.sourcesListenerKeys_=null}}class lm extends Ku{constructor(e,i,n,r,o,s,a,l,u,c,h,d){super(o,di,d),this.renderEdges_=h!==void 0&&h,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=r.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const _=f?zi(p,f):p;if(cu(_)===0)return void(this.state=gi);const v=e.getExtent();v&&(g=g?zi(g,v):v);const b=r.getResolution(this.wrappedTileCoord_[0]),m=t2(e,n,_,b);if(!isFinite(m)||m<=0)return void(this.state=gi);const y=c!==void 0?c:.5;if(this.triangulation_=new Zv(e,n,_,g,m*y,b),this.triangulation_.getTriangles().length===0)return void(this.state=gi);this.sourceZ_=i.getZForResolution(m);let x=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(x[1]=Wt(x[1],g[1],g[3]),x[3]=Wt(x[3],g[1],g[3])):x=zi(x,g)),cu(x)){let C=0,k=0;e.canWrapX()&&(C=nt(v),k=Math.floor((x[0]-v[0])/C)),gv(x.slice(),e,!0).forEach(P=>{const A=i.getTileRangeForExtentAndZ(P,this.sourceZ_);for(let E=A.minX;E<=A.maxX;E++)for(let L=A.minY;L<=A.maxY;L++){const T=u(this.sourceZ_,E,L,a);if(T){const I=k*C;this.sourceTiles_.push({tile:T,offset:I})}}++k}),this.sourceTiles_.length===0&&(this.state=gi)}else this.state=gi}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(i=>{const n=i.tile;if(n&&n.getState()==Gt){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=i.offset,r[2]+=i.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=i.offset,o[2]+=i.offset),e.push({extent:r,clipExtent:o,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Zt;else{const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),r=typeof n=="number"?n:n[0],o=typeof n=="number"?n:n[1],s=this.targetTileGrid_.getResolution(i),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=i2(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Gt}this.changed()}load(){if(this.state==di){this.state=fr,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n==di||n==fr){e++;const r=gt(i,It,o=>{const s=i.getState();s!=Gt&&s!=Zt&&s!=gi||(Ot(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i},n,r){i.getState()==di&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ot),this.sourcesListenerKeys_=null}release(){this.canvas_&&(yu(this.canvas_.getContext("2d")),ea.push(this.canvas_),this.canvas_=null),super.release()}}class Qv{constructor(e,i,n,r){this.minX=e,this.maxX=i,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,i){return this.minX<=e&&e<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function zs(t,e,i,n,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new Qv(t,e,i,n)}function Wh(t,e,i,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function r2(t){return o2(t[0],t[1],t[2])}function o2(t,e,i){return(e<<t)+i}function Ap(t,e,i,n){return`${t},${function(r,o,s){return r+"/"+o+"/"+s}(e,i,n)}`}function Fp(t,e,i){if(!(i in t))return t[i]=new Set([e]),!0;const n=t[i],r=n.has(e);return r||n.add(e),!r}function ZT(t,e,i){const n=t[i];return!!n&&n.delete(e)}function v1(t,e){const i=t.layerStatesArray[t.layerIndex];i.extent&&(e=zi(e,er(i.extent,t.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(t.viewState.projection).getExtent();r&&(e=zi(e,r))}return e}class s2 extends Xv{constructor(e,i){super(e),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=[1/0,1/0,-1/0,-1/0],this.tempTileRange_=new Qv(0,0,0,0),this.tempTileCoord_=Wh(0,0,0);const n=i.cacheSize!==void 0?i.cacheSize:512;this.tileCache_=new YT(n),this.maxStaleKeys=.5*n}getTileCache(){return this.tileCache_}getOrCreateTile(e,i,n,r){const o=this.tileCache_,s=this.getLayer().getSource(),a=Ap(s.getKey(),e,i,n);let l;if(o.containsKey(a))l=o.get(a);else{if(l=s.getTile(e,i,n,r.pixelRatio,r.viewState.projection),!l)return null;o.set(a,l)}return l}getTile(e,i,n,r){return this.getOrCreateTile(e,i,n,r)||null}getData(e){const i=this.frameState;if(!i)return null;const n=this.getLayer(),r=ai(i.pixelToCoordinateTransform,e.slice()),o=n.getExtent();if(o&&!ms(o,r))return null;const s=i.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(s.projection),u=a.getTilePixelRatio(i.pixelRatio);for(let c=l.getZForResolution(s.resolution);c>=l.getMinZoom();--c){const h=l.getTileCoordForCoordAndZ(r,c),d=this.getTile(c,h[1],h[2],i);if(!d||d.getState()!==Gt)continue;const p=l.getOrigin(c),f=li(l.getTileSize(c)),g=l.getResolution(c);let _;if(d instanceof e2||d instanceof lm)_=d.getImage();else if(!(d instanceof Uh)||(_=Hh(d.getData()),!_))continue;const v=Math.floor(u*((r[0]-p[0])/g-h[1]*f[0])),b=Math.floor(u*((p[1]-r[1])/g-h[2]*f[1])),m=Math.round(u*a.getGutterForProjection(s.projection));return this.getImageData(_,v+m,b+m)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const i=this.getLayer().getSource();if(!i)return!1;const n=i.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===i.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,i,n,r,o){const s=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(s.projection),c=Qe(l);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=a.getMapInternal(),p=Math.max(n-o,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let f=n;f>=p;--f){const g=u.getTileRangeForExtentAndZ(i,f,this.tempTileRange_),_=u.getResolution(f);for(let v=g.minX;v<=g.maxX;++v)for(let b=g.minY;b<=g.maxY;++b){const m=this.getTile(f,v,b,e);if(!m||!Fp(r,m,f))continue;const y=m.getKey();if(h[y]=!0,m.getState()===di&&!e.tileQueue.isKeyQueued(y)){const x=Wh(f,v,b,this.tempTileCoord_);e.tileQueue.enqueue([m,c,u.getTileCoordCenter(x),_])}}}}findStaleTile_(e,i){const n=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const u=Ap(a[l],r,o,s);if(n.containsKey(u)){const c=n.get(u);if(c.getState()===Gt)return c.endTransition(Qe(this)),Fp(i,c,r),!0}}return!1}findAltTiles_(e,i,n,r){const o=e.getTileRangeForTileCoordAndZ(i,n,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource().getKey();for(let u=o.minX;u<=o.maxX;++u)for(let c=o.minY;c<=o.maxY;++c){const h=Ap(l,n,u,c);let d=!1;if(a.containsKey(h)){const p=a.get(h);p.getState()===Gt&&(Fp(r,p,n),d=!0)}d||(s=!1)}return s}renderFrame(e,i){let n=!0;this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],o=e.viewState,s=o.projection,a=o.resolution,l=o.center,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),p=h.getTileGridForProjection(s),f=p.getZForResolution(a,h.zDirection),g=p.getResolution(f),_=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==_&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=_):this.renderedSourceKey_=_;let v=e.extent;const b=h.getTilePixelRatio(u);this.prepareContainer(e,i);const m=this.context.canvas.width,y=this.context.canvas.height,x=r.extent&&er(r.extent);x&&(v=zi(v,er(r.extent)));const C=g*m/2/b,k=g*y/2/b,P=[l[0]-C,l[1]-k,l[0]+C,l[1]+k],A={};this.renderedTiles.length=0;const E=c.getPreload();if(e.nextExtent){const O=p.getZForResolution(o.nextResolution,h.zDirection),$=v1(e,e.nextExtent);this.enqueueTiles(e,$,O,A,E)}const L=v1(e,v);if(this.enqueueTiles(e,L,f,A,0),E>0&&setTimeout(()=>{this.enqueueTiles(e,L,f-1,A,E-1)},0),!(f in A))return this.container;const T=Qe(this),I=e.time;for(const O of A[f]){const $=O.getState();if((O instanceof lm||O instanceof n2)&&$===gi)continue;const J=O.tileCoord;if($===Gt&&O.getAlpha(T,I)===1){O.endTransition(T);continue}if($!==di&&(n=!1),$!==Zt&&(this.renderComplete=!1),this.findStaleTile_(J,A)){ZT(A,O,f),e.animate=!0;continue}if(this.findAltTiles_(p,J,f+1,A))continue;const te=p.getMinZoom();for(let ie=f-1;ie>=te&&!this.findAltTiles_(p,J,ie,A);--ie);}const M=g/a*u/b,R=this.getRenderContext(e);pr(this.tempTransform,m/2,y/2,M,M,0,-m/2,-y/2),r.extent&&this.clipUnrotated(R,e,x),h.getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e);const q=Object.keys(A).map(Number);let F;q.sort(nr);const B=[],V=[];for(let O=q.length-1;O>=0;--O){const $=q[O],J=h.getTilePixelSize($,u,s),te=p.getResolution($)/g,ie=J[0]*te*M,j=J[1]*te*M,z=p.getTileCoordForCoordAndZ(xn(P),$),N=p.getTileCoordExtent(z),K=ai(this.tempTransform,[b*(N[0]-P[0])/g,b*(P[3]-N[3])/g]),U=b*h.getGutterForProjection(s);for(const W of A[$]){if(W.getState()!==Gt)continue;const ve=W.tileCoord,ce=z[1]-ve[1],fe=Math.round(K[0]-(ce-1)*ie),pe=z[2]-ve[2],Le=Math.round(K[1]-(pe-1)*j),Pe=Math.round(K[0]-ce*ie),me=Math.round(K[1]-pe*j),Se=fe-Pe,Re=Le-me,Ge=q.length===1;let oe=!1;F=[Pe,me,Pe+Se,me,Pe+Se,me+Re,Pe,me+Re];for(let he=0,Z=B.length;he<Z;++he)if(!Ge&&$<V[he]){const ae=B[he];ii([Pe,me,Pe+Se,me+Re],[ae[0],ae[3],ae[4],ae[7]])&&(oe||(R.save(),oe=!0),R.beginPath(),R.moveTo(F[0],F[1]),R.lineTo(F[2],F[3]),R.lineTo(F[4],F[5]),R.lineTo(F[6],F[7]),R.moveTo(ae[6],ae[7]),R.lineTo(ae[4],ae[5]),R.lineTo(ae[2],ae[3]),R.lineTo(ae[0],ae[1]),R.clip())}B.push(F),V.push($),this.drawTile(W,e,Pe,me,Se,Re,U,Ge),oe&&R.restore(),this.renderedTiles.unshift(W),this.updateUsedTiles(e.usedTiles,h,W)}}if(this.renderedRevision=d,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Fr(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=u,this.postRender(this.context,e),r.extent&&R.restore(),R.imageSmoothingEnabled=!0,this.renderComplete){const O=($,J)=>{const te=Qe(h),ie=J.wantedTiles[te],j=ie?Object.keys(ie).length:0;this.updateCacheSize(j),this.tileCache_.expireCache()};e.postRenderFunctions.push(O)}return this.renderComplete||n||(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*e)}drawTile(e,i,n,r,o,s,a,l){let u;if(e instanceof Uh){if(u=Hh(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(i),h=Qe(this),d=i.layerStatesArray[i.layerIndex],p=d.opacity*(l?e.getAlpha(h,i.time):1),f=p!==c.globalAlpha;f&&(c.save(),c.globalAlpha=p),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,r,o,s),f&&c.restore(),p!==d.opacity?i.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,i,n){const r=Qe(i);r in e||(e[r]={}),e[r][n.getKey()]=!0}}class fi extends GT{constructor(e){super(e)}createRenderer(){return new s2(this,{cacheSize:this.getCacheSize()})}}var a2="tileloadstart",l2="tileloadend",u2="tileloaderror";class Qa extends kn{constructor(e){super(),this.projection=lt(e.projection),this.attributions_=y1(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(n,r){i.viewResolver=n,i.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=y1(e),this.changed()}setState(e){this.state_=e,this.changed()}}function y1(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const Ds=[0,0,0];class go{constructor(e){let i;if(this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ct(function(r,o,s){const a=o||nr;return r.every(function(l,u){if(u===0)return!0;const c=a(r[u-1],l);return!(c>0||c===0)})}(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order"),!e.origins)for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(i){if(this.resolutions_[r]/this.resolutions_[r+1]!==i){i=void 0;break}}else i=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ct(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n===void 0||this.origin_||this.origins_||(this.origin_=xn(n)),Ct(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ct(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:cv,Ct(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new Qv(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,i,n){const r=this.getTileRangeForExtentAndZ(e,i);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,l=r.maxY;a<=l;++a)n([i,o,a])}forEachTileCoordParentTileRange(e,i,n,r){let o,s,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=zs(s,s,a,a,n)):o=this.getTileRangeForExtentAndZ(l,u,n),i(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,i,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=2*e[1],s=2*e[2];return zs(o,o+1,s,s+1,i)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,i)}return null}getTileRangeForTileCoordAndZ(e,i,n){if(i>this.maxZoom||i<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(i===r)return zs(o,s,o,s,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,i-r),u=Math.floor(o*l),c=Math.floor(s*l);return i<r?zs(u,u,c,c,n):zs(u,Math.floor(l*(o+1))-1,c,Math.floor(l*(s+1))-1,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,i,n)}getTileRangeForExtentAndZ(e,i,n){this.getTileCoordForXYAndZ_(e[0],e[3],i,!1,Ds);const r=Ds[1],o=Ds[2];return this.getTileCoordForXYAndZ_(e[2],e[1],i,!0,Ds),zs(r,Ds[1],o,Ds[2],n)}getTileCoordCenter(e){const i=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=li(this.getTileSize(e[0]),this.tmpSize_);return[i[0]+(e[1]+.5)*r[0]*n,i[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,i){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=li(this.getTileSize(e[0]),this.tmpSize_),s=n[0]+e[1]*o[0]*r,a=n[1]-(e[2]+1)*o[1]*r;return dr(s,a,s+o[0]*r,a+o[1]*r,i)}getTileCoordForCoordAndResolution(e,i,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],i,!1,n)}getTileCoordForXYAndResolution_(e,i,n,r,o){const s=this.getZForResolution(n),a=n/this.getResolution(s),l=this.getOrigin(s),u=li(this.getTileSize(s),this.tmpSize_);let c=a*(e-l[0])/n/u[0],h=a*(l[1]-i)/n/u[1];return r?(c=io(c,5)-1,h=io(h,5)-1):(c=sc(c,5),h=sc(h,5)),Wh(s,c,h,o)}getTileCoordForXYAndZ_(e,i,n,r,o){const s=this.getOrigin(n),a=this.getResolution(n),l=li(this.getTileSize(n),this.tmpSize_);let u=(e-s[0])/a/l[0],c=(s[1]-i)/a/l[1];return r?(u=io(u,5)-1,c=io(c,5)-1):(u=sc(u,5),c=sc(c,5)),Wh(n,u,c,o)}getTileCoordForCoordAndZ(e,i,n){return this.getTileCoordForXYAndZ_(e[0],e[1],i,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,i){return Wt(Lh(this.resolutions_,e,i||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,i){return hw(i,0,i.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const i=this.resolutions_.length,n=new Array(i);for(let r=this.minZoom;r<i;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}class QT extends go{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function Jv(t){let e=t.getDefaultTileGrid();return e||(e=function(i,n,r,o){const s=Ja(i);return function(a,l,u,c){c=c!==void 0?c:"top-left";const h=c2(a,l,u);return new go({extent:a,origin:bk(a,c),resolutions:h,tileSize:u})}(s,n,r,o)}(t),t.setDefaultTileGrid(e)),e}function Xu(t){const e=t||{},i=e.extent||lt("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:c2(i,e.maxZoom,e.tileSize,e.maxResolution)};return new go(n)}function c2(t,e,i,n){e=e!==void 0?e:42,i=li(i!==void 0?i:cv);const r=Yt(t),o=nt(t);n=n>0?n:Math.max(o/i[0],r/i[1]);const s=e+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=n/Math.pow(2,l);return a}function Ja(t){let e=(t=lt(t)).getExtent();if(!e){const i=180*Ar.degrees/t.getMetersPerUnit();e=dr(-i,-i,i,i)}return e}class e0 extends Qa{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const i=[256,256];this.tileGrid&&li(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tmpSize=[0,0],this.key_=e.key||Qe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const i=e?this.getTileGridForProjection(e):this.tileGrid;return i?i.getResolutions():null}getTile(e,i,n,r,o){return Ke()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Jv(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,i,n){const r=this.getTileGridForProjection(n),o=this.getTilePixelRatio(i),s=li(r.getTileSize(e),this.tmpSize);return o==1?s:kw(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,i){const n=i!==void 0?i:this.getProjection(),r=i!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=function(o,s,a){const l=s[0],u=o.getTileCoordCenter(s),c=Ja(a);if(!ms(c,u)){const h=nt(c),d=Math.ceil((c[0]-u[0])/h);return u[0]+=h*d,o.getTileCoordForCoordAndZ(u,l)}return s}(r,e,n)),function(o,s){const a=o[0],l=o[1],u=o[2];if(s.getMinZoom()>a||a>s.getMaxZoom())return!1;const c=s.getFullTileRange(a);return!c||c.containsXY(l,u)}(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class h2 extends Mn{constructor(e,i){super(e),this.tile=i}}function um(t,e){const i=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&i.push(r+"="+encodeURIComponent(e[r]))});const n=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}const JT=/\{z\}/g,e5=/\{x\}/g,t5=/\{y\}/g,i5=/\{-y\}/g;function t0(t,e,i,n,r){return t.replace(JT,e.toString()).replace(e5,i.toString()).replace(t5,n.toString()).replace(i5,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-n).toString()})}function Fd(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),r=i[2].charCodeAt(0);let o;for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let r=parseInt(i[1],10);r<=n;r++)e.push(t.replace(i[0],r.toString()));return e}return e.push(t),e}function n5(t,e){return function(i,n,r){if(!i)return;let o;const s=i[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return t0(t,s,i[1],i[2],o)}}function d2(t,e){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=n5(t[r],e);return cm(n)}function cm(t){return t.length===1?t[0]:function(e,i,n){if(!e)return;const r=po(r2(e),t.length);return t[r](e,i,n)}}class Od extends e0{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Od.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const i=e.target,n=Qe(i),r=i.getState();let o;r==fr?(this.tileLoadingKeys_[n]=!0,o=a2):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=r==Zt?u2:r==Gt?l2:void 0),o!=null&&this.dispatchEvent(new h2(o,i))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,i){this.tileUrlFunction=e,i!==void 0?this.setKey(i):this.changed()}setUrl(e){const i=Fd(e);this.urls=i,this.setUrls(i)}setUrls(e){this.urls=e;const i=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(d2(e,this.tileGrid),i):this.setKey(i)}tileUrlFunction(e,i,n){}}class Zu extends Od{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:r5,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate===void 0||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:e2,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!ar(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const i=this.getProjection();if(this.tileGrid&&(!i||ar(i,e)))return this.tileGrid;const n=Qe(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Jv(e)),this.tileGridForProjection[n]}createTile_(e,i,n,r,o,s){const a=[e,i,n],l=this.getTileCoordForTileUrlFunction(a,o),u=l?this.tileUrlFunction(l,r,o):void 0,c=new this.tileClass(a,u!==void 0?di:gi,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=s,c.addEventListener(It,this.handleTileChange.bind(this)),c}getTile(e,i,n,r,o){const s=this.getProjection();if(!s||!o||ar(s,o))return this.getTileInternal(e,i,n,r,s||o);const a=[e,i,n],l=this.getKey(),u=this.getTileGridForProjection(s),c=this.getTileGridForProjection(o),h=this.getTileCoordForTileUrlFunction(a,o),d=new lm(s,u,o,c,a,h,this.getTilePixelRatio(r),this.getGutter(),(p,f,g,_)=>this.getTileInternal(p,f,g,_,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(e,i,n,r,o){const s=this.getKey();return this.createTile_(e,i,n,r,o,s)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,i){const n=lt(e);if(n){const r=Qe(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=i)}}}function r5(t,e){t.getImage().src=e}var el=class extends Zu{constructor(t){const e=(t=t||{}).projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:Xu({extent:Ja(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}};class An extends kn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const i=e;this.setGeometry(i)}else{const i=e;this.setProperties(i)}}clone(){const e=new An(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const i=this.getGeometry();i&&e.setGeometry(i.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ot(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=gt(e,It,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function(i){if(typeof i=="function")return i;let n;return Array.isArray(i)?n=i:(Ct(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),n=[i]),function(){return n}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}class _1{constructor(e){this.rbush_=new mw(e),this.items_={}}insert(e,i){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:i};this.rbush_.insert(n),this.items_[Qe(i)]=n}load(e,i){const n=new Array(i.length);for(let r=0,o=i.length;r<o;r++){const s=e[r],a=i[r],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};n[r]=l,this.items_[Qe(a)]=l}this.rbush_.load(n)}remove(e){const i=Qe(e),n=this.items_[i];return delete this.items_[i],this.rbush_.remove(n)!==null}update(e,i){const n=this.items_[Qe(i)];Fr([n.minX,n.minY,n.maxX,n.maxY],e)||(this.remove(i),this.insert(e,i))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(e){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(i).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,i){return this.forEach_(this.getInExtent(e),i)}forEach_(e,i){let n;for(let r=0,o=e.length;r<o;r++)if(n=i(e[r]),n)return n;return n}isEmpty(){return xo(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const i=this.rbush_.toJSON();return dr(i.minX,i.minY,i.maxX,i.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const i in e.items_)this.items_[i]=e.items_[i]}}class zd extends Eo{constructor(e,i,n){super(),n!==void 0&&i===void 0?this.setFlatCoordinates(n,e):(i=i||0,this.setCenterAndRadius(e,i,n))}clone(){const e=new zd(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){const o=this.flatCoordinates,s=e-o[0],a=i-o[1],l=s*s+a*a;if(l<r){if(l===0)for(let u=0;u<this.stride;++u)n[u]=o[u];else{const u=this.getRadius()/Math.sqrt(l);n[0]=o[0]+u*s,n[1]=o[1]+u*a;for(let c=2;c<this.stride;++c)n[c]=o[c]}return n.length=this.stride,l}return r}containsXY(e,i){const n=this.flatCoordinates,r=e-n[0],o=i-n[1];return r*r+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const i=this.flatCoordinates,n=i[this.stride]-i[0];return dr(i[0]-n,i[1]-n,i[0]+n,i[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],i=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+i*i}getType(){return"Circle"}intersectsExtent(e){if(ii(e,this.getExtent())){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||fv(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const i=this.stride,n=this.flatCoordinates[i]-this.flatCoordinates[0],r=e.slice();r[i]=r[0]+n;for(let o=1;o<i;++o)r[i+o]=e[o];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,i,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let o=rw(r,0,e,this.stride);r[o++]=r[0]+i;for(let s=1,a=this.stride;s<a;++s)r[o++]=r[s];r.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,i){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,i){const n=this.getCenter(),r=this.getStride();this.setCenter(Mv(n,0,n.length,r,e,i,n)),this.changed()}}zd.prototype.transform;class xu extends nw{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ot),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)this.changeEventsKeys_.push(gt(e[i],It,this.changed,this))}clone(){const e=new xu(Op(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,i,n,r){if(r<ks(this.getExtent(),e,i))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,i,n,r);return r}containsXY(e,i){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)if(n[r].containsXY(e,i))return!0;return!1}computeExtent(e){Wa(e);const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)pv(e,i[n].getExtent());return e}getGeometries(){return Op(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].getType()===this.getType()?e=e.concat(i[n].getGeometriesArrayRecursive()):e.push(i[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=[],n=this.geometries_;let r=!1;for(let o=0,s=n.length;o<s;++o){const a=n[o],l=a.getSimplifiedGeometry(e);i.push(l),l!==a&&(r=!0)}return r?new xu(i):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)if(i[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,i){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)n[r].rotate(e,i);this.changed()}scale(e,i,n){n||(n=Zi(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,i,n);this.changed()}setGeometries(e){this.setGeometriesArray(Op(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].applyTransform(e);this.changed()}translate(e,i){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)n[r].translate(e,i);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Op(t){return t.map(e=>e.clone())}function Yh(t,e,i,n,r,o,s){let a,l;const u=(i-e)/n;if(u===1)a=e;else if(u===2)a=e,l=r;else if(u!==0){let c=t[e],h=t[e+1],d=0;const p=[0];for(let _=e+n;_<i;_+=n){const v=t[_],b=t[_+1];d+=Math.sqrt((v-c)*(v-c)+(b-h)*(b-h)),p.push(d),c=v,h=b}const f=r*d,g=function(_,v,b){let m,y;b=b||nr;let x=0,C=_.length,k=!1;for(;x<C;)m=x+(C-x>>1),y=+b(_[m],v),y<0?x=m+1:(C=m,k=!y);return k?x:~x}(p,f);g<0?(l=(f-p[-g-2])/(p[-g-1]-p[-g-2]),a=e+(-g-2)*n):a=e+g*n}s=s>1?s:2,o=o||new Array(s);for(let c=0;c<s;++c)o[c]=a===void 0?NaN:l===void 0?t[a+c]:rn(t[a+c],t[a+n+c],l);return o}function hm(t,e,i,n,r,o){if(i==e)return null;let s;if(r<t[e+n-1])return o?(s=t.slice(e,e+n),s[n-1]=r,s):null;if(t[i-1]<r)return o?(s=t.slice(i-n,i),s[n-1]=r,s):null;if(r==t[e+n-1])return t.slice(e,e+n);let a=e/n,l=i/n;for(;a<l;){const h=a+l>>1;r<t[(h+1)*n-1]?l=h:a=h+1}const u=t[a*n-1];if(r==u)return t.slice((a-1)*n,(a-1)*n+n);const c=(r-u)/(t[(a+1)*n-1]-u);s=[];for(let h=0;h<n-1;++h)s.push(rn(t[(a-1)*n+h],t[a*n+h],c));return s.push(r),s}function p2(t,e,i,n){let r=t[e],o=t[e+1],s=0;for(let a=e+n;a<i;a+=n){const l=t[a],u=t[a+1];s+=Math.sqrt((l-r)*(l-r)+(u-o)*(u-o)),r=l,o=u}return s}class un extends Eo{constructor(e,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i===void 0||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}appendCoordinate(e){rr(this.flatCoordinates,e),this.changed()}clone(){const e=new un(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){return r<ks(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(kv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ev(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,i,n,r))}forEachSegment(e){return cw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0&&i,hm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i))}getCoordinates(){return ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,i){return Yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,this.stride)}getLength(){return p2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const i=[];return i.length=Rd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new un(i,"XY")}getType(){return"LineString"}intersectsExtent(e){return qd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Id(this.flatCoordinates,0,e,this.stride),this.changed()}}class ys extends Eo{constructor(e,i,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(i!==void 0&&n)this.setFlatCoordinates(i,e),this.ends_=n;else{const r=e,o=[],s=[];for(let l=0,u=r.length;l<u;++l)rr(o,r[l].getFlatCoordinates()),s.push(o.length);const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){rr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ys(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,i,n,r){return r<ks(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Tv(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,i,n,r))}getCoordinateAtM(e,i,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(i=i!==void 0&&i,n=n!==void 0&&n,function(r,o,s,a,l,u,c){if(c)return hm(r,o,s[s.length-1],a,l,u);let h;if(l<r[a-1])return u?(h=r.slice(0,a),h[a-1]=l,h):null;if(r[r.length-1]<l)return u?(h=r.slice(r.length-a),h[a-1]=l,h):null;for(let d=0,p=s.length;d<p;++d){const f=s[d];if(o!=f){if(l<r[o+a-1])return null;if(l<=r[f-1])return hm(r,o,f,a,l,!1);o=f}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,i,n))}getCoordinates(){return gu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new un(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,i=this.ends_,n=this.layout,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const l=i[s],u=new un(e.slice(o,l),n);r.push(u),o=l}return r}getFlatMidpoints(){const e=[],i=this.flatCoordinates;let n=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const l=r[s];rr(e,Yh(i,n,l,o,.5)),n=l}return e}getSimplifiedGeometryInternal(e){const i=[],n=[];return i.length=sw(this.flatCoordinates,0,this.ends_,this.stride,e,i,0,n),new ys(i,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return function(i,n,r,o,s){for(let a=0,l=r.length;a<l;++a){if(qd(i,n,r[a],o,s))return!0;n=r[a]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=fu(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class tl extends Eo{constructor(e,i){super(),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}appendPoint(e){rr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new tl(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){if(r<ks(this.getExtent(),e,i))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,l=o.length;a<l;a+=s){const u=Pr(e,i,o[a],o[a+1]);if(u<r){r=u;for(let c=0;c<s;++c)n[c]=o[a+c];n.length=s}}return r}getCoordinates(){return ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const i=this.flatCoordinates.length/this.stride;return e<0||i<=e?null:new _n(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,i=this.layout,n=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=n){const a=new _n(e.slice(o,o+n),i);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const i=this.flatCoordinates,n=this.stride;for(let r=0,o=i.length;r<o;r+=n)if(hv(e,i[r],i[r+1]))return!0;return!1}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Id(this.flatCoordinates,0,e,this.stride),this.changed()}}function f2(t,e,i,n){const r=[];let o=[1/0,1/0,-1/0,-1/0];for(let s=0,a=i.length;s<a;++s){const l=i[s];o=dv(t,e,l[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}class _s extends Eo{constructor(e,i,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,l=r.length;a<l;++a){const u=r[a],c=o.length,h=u.getEnds();for(let d=0,p=h.length;d<p;++d)h[d]+=c;rr(o,u.getFlatCoordinates()),s.push(h)}i=r.length===0?this.getLayout():r[0].getLayout(),e=o,n=s}i!==void 0&&n?(this.setFlatCoordinates(i,e),this.endss_=n):this.setCoordinates(e,i)}appendPolygon(e){let i;if(this.flatCoordinates){const n=this.flatCoordinates.length;rr(this.flatCoordinates,e.getFlatCoordinates()),i=e.getEnds().slice();for(let r=0,o=i.length;r<o;++r)i[r]+=n}else this.flatCoordinates=e.getFlatCoordinates().slice(),i=e.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()}clone(){const e=this.endss_.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=this.endss_[r].slice();const n=new _s(this.flatCoordinates.slice(),this.layout,i);return n.applyProperties(this),n}closestPointXY(e,i,n,r){return r<ks(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(o,s,a,l,u){for(let c=0,h=a.length;c<h;++c){const d=a[c];u=Tv(o,s,d,l,u),s=d[d.length-1]}return u}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(o,s,a,l,u,c,h,d,p,f,g){g=g||[NaN,NaN];for(let _=0,v=a.length;_<v;++_){const b=a[_];f=Lv(o,s,b,l,u,c,h,d,p,f,g),s=b[b.length-1]}return f}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,i,n,r))}containsXY(e,i){return function(n,r,o,s,a,l){if(o.length===0)return!1;for(let u=0,c=o.length;u<c;++u){const h=o[u];if(Iv(n,r,h,s,a,l))return!0;r=h[h.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,i)}getArea(){return function(e,i,n,r){let o=0;for(let s=0,a=n.length;s<a;++s){const l=n[s];o+=lw(e,i,l,r),i=l[l.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let i;return e!==void 0?(i=this.getOrientedFlatCoordinates().slice(),gg(i,0,this.endss_,this.stride,e)):i=this.flatCoordinates,fg(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=f2(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=uw(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new tl(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;pw(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=gg(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const i=[],n=[];return i.length=function(r,o,s,a,l,u,c,h){for(let d=0,p=s.length;d<p;++d){const f=s[d],g=[];c=Pv(r,o,f,a,l,u,c,g),h.push(g),o=f[f.length-1]}return c}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),i,0,n),new _s(i,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let i;if(e===0)i=0;else{const o=this.endss_[e-1];i=o[o.length-1]}const n=this.endss_[e].slice(),r=n[n.length-1];if(i!==0)for(let o=0,s=n.length;o<s;++o)n[o]-=i;return new Qi(this.flatCoordinates.slice(i,r),this.layout,n)}getPolygons(){const e=this.layout,i=this.flatCoordinates,n=this.endss_,r=[];let o=0;for(let s=0,a=n.length;s<a;++s){const l=n[s].slice(),u=l[l.length-1];if(o!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=o;const c=new Qi(i.slice(o,u),e,l);r.push(c),o=u}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return function(i,n,r,o,s){for(let a=0,l=r.length;a<l;++a){const u=r[a];if(dw(i,n,u,o,s))return!0;n=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=ow(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const b1=[1,0,0,1,0,0];class ki{constructor(e,i,n,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=i,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?zx(this.flatCoordinates_):dv(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Zi(this.getExtent());this.flatInteriorPoints_=Rv(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=fw(this.flatCoordinates_,this.ends_),i=f2(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=uw(this.flatCoordinates_,0,e,2,i)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Yh(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let i=0;const n=this.ends_;for(let r=0,o=n.length;r<o;++r){const s=n[r],a=Yh(e,i,s,2,.5);rr(this.flatMidpoints_,a),i=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,i){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const i=(e=lt(e)).getExtent(),n=e.getWorldExtent();if(i&&n){const r=Yt(n)/Yt(i);pr(b1,n[0],n[3],r,-r,0,0,0),no(this.flatCoordinates_,0,this.flatCoordinates_.length,2,b1,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new ki(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Rx((e,i)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),i&&this.simplifiedGeometry_.applyTransform(i);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=Rd(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=sw(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=Pv(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r)}return r&&(this.simplifiedGeometry_=new ki(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}ki.prototype.getFlatCoordinates=ki.prototype.getOrientedFlatCoordinates;var bc="addfeature",o5="changefeature",s5="clear",zp="removefeature",a5="featuresloadstart",l5="featuresloadend",u5="featuresloaderror";function c5(t,e){return[[-1/0,-1/0,1/0,1/0]]}function h5(t,e){return[t]}function g2(t,e,i,n,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(i,n,r):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=!1,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=a.responseText:u=="xml"?c=a.responseXML||a.responseText:u=="arraybuffer"&&(c=a.response),c?o(e.readFeatures(c,{extent:i,featureProjection:r}),e.readProjection(c)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function x1(t,e){return function(i,n,r,o,s){const a=this;g2(t,e,i,n,r,function(l,u){a.addFeatures(l),o!==void 0&&o(l)},s||Ia)}}class $r extends Mn{constructor(e,i,n){super(e),this.feature=i,this.features=n}}class mo extends Qa{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX===void 0||e.wrapX}),this.on,this.once,this.un,this.loader_=Ia,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0||e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ct(this.format_,"`format` must be set when `url` is set"),this.loader_=x1(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:c5;const i=e.useSpatialIndex===void 0||e.useSpatialIndex;let n,r;this.featuresRtree_=i?new _1:null,this.loadedExtentsRtree_=new _1,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),i||n!==void 0||(n=new pn(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const i=Qe(e);if(!this.addToIndex_(i,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(i,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[i]=e;this.dispatchEvent(new $r(bc,e))}setupChangeEvents_(e,i){i instanceof ki||(this.featureChangeKeys_[e]=[gt(i,It,this.handleFeatureChange_,this),gt(i,La,this.handleFeatureChange_,this)])}addToIndex_(e,i){let n=!0;if(i.getId()!==void 0){const r=String(i.getId());if(r in this.idIndex_)if(i instanceof ki){const o=this.idIndex_[r];o instanceof ki?Array.isArray(o)?o.push(i):this.idIndex_[r]=[o,i]:n=!1}else n=!1;else this.idIndex_[r]=i}return n&&(Ct(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=i),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const i=[],n=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],l=Qe(a);this.addToIndex_(l,a)&&n.push(a)}for(let o=0,s=n.length;o<s;o++){const a=n[o],l=Qe(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();i.push(c),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(i,r),this.hasListener(bc))for(let o=0,s=n.length;o<s;o++)this.dispatchEvent(new $r(bc,n[o]))}bindFeaturesCollection_(e){let i=!1;this.addEventListener(bc,function(n){i||(i=!0,e.push(n.feature),i=!1)}),this.addEventListener(zp,function(n){i||(i=!0,e.remove(n.feature),i=!1)}),e.addEventListener(os,n=>{i||(i=!0,this.addFeature(n.element),i=!1)}),e.addEventListener(ss,n=>{i||(i=!0,this.removeFeature(n.element),i=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Ot);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const i=new $r(s5);this.dispatchEvent(i),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,i){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const o=r.getGeometry();if(o instanceof ki||o.intersectsCoordinate(e))return i(r)})}forEachFeatureInExtent(e,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(e,i){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof ki||r.intersectsExtent(e)){const o=i(n);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),xo(this.nullGeometryFeatures_)||rr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const i=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){i.push(n)}),i}getFeaturesInExtent(e,i){if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=gv(e,i);return[].concat(...n.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,i){const n=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return i=i||Pa,this.featuresRtree_.forEachInExtent(l,function(u){if(i(u)){const c=u.getGeometry(),h=a;if(a=c instanceof ki?0:c.closestPointXY(n,r,s,a),a<h){o=u;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const i=this.idIndex_[e.toString()];return i!==void 0?i:null}getFeatureByUid(e){const i=this.uidIndex_[e];return i!==void 0?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const i=e.target,n=Qe(i),r=i.getGeometry();if(r){const s=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(s,i)):this.featuresRtree_&&this.featuresRtree_.update(s,i)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[n]=i);const o=i.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[s]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[n]=i;this.changed(),this.dispatchEvent(new $r(o5,i))}hasFeature(e){const i=e.getId();return i!==void 0?i in this.idIndex_:Qe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&xo(this.nullGeometryFeatures_):!this.featuresCollection_||this.featuresCollection_.getLength()===0}loadFeatures(e,i,n){const r=this.loadedExtentsRtree_,o=this.strategy_(e,i,n);for(let s=0,a=o.length;s<a;++s){const l=o[s];r.forEachInExtent(l,function(u){return zn(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new $r(a5)),this.loader_.call(this,l,i,n,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new $r(l5,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new $r(u5))}),r.insert(l,{extent:l.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const i=this.loadedExtentsRtree_,n=i.forEachInExtent(e,function(r){if(Fr(r.extent,e))return r});n&&i.remove(n)}removeFeatures(e){let i=!1;for(let n=0,r=e.length;n<r;++n)i=this.removeFeatureInternal(e[n])||i;i&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const i=Qe(e);if(!(i in this.uidIndex_))return!1;i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[i]?.forEach(Ot),delete this.featureChangeKeys_[i];const n=e.getId();if(n!==void 0){const r=n.toString(),o=this.idIndex_[r];o===e?delete this.idIndex_[r]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[r]=o[0]))}return delete this.uidIndex_[i],this.hasListener(zp)&&this.dispatchEvent(new $r(zp,e)),!0}removeFromIdIndex_(e){for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i];break}}setLoader(e){this.loader_=e}setUrl(e){Ct(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(x1(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class m2 extends e0{constructor(e){const i=e.projection===void 0?"EPSG:3857":e.projection;let n=e.tileGrid;n===void 0&&i&&(n=Xu({extent:Ja(i),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:i,tileGrid:n,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?li(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const i=this.getTileGrid();return i?li(i.getTileSize(e)):[256,256]}getGutterForProjection(e){const i=this.getProjection();return i&&!ar(i,e)||this.transformMatrix?0:this.gutter_}setLoader(e){this.loader_=e}getReprojTile_(e,i,n,r,o){const s=this.tileGrid||this.getTileGridForProjection(o||r),a=Math.max.apply(null,s.getResolutions().map((p,f)=>{const g=li(s.getTileSize(f)),_=this.getTileSize(f);return Math.max(_[0]/g[0],_[1]/g[1])})),l=this.getTileGridForProjection(r),u=[e,i,n],c=this.getTileCoordForTileUrlFunction(u,r),h=Object.assign({sourceProj:o||r,sourceTileGrid:s,targetProj:r,targetTileGrid:l,tileCoord:u,wrappedTileCoord:c,pixelRatio:a,gutter:this.gutter_,getTileFunction:(p,f,g,_)=>this.getTile(p,f,g,_),transformMatrix:this.transformMatrix},this.tileOptions),d=new n2(h);return d.key=this.getKey(),d}getTile(e,i,n,r,o){const s=this.getProjection();if(o&&(s&&!ar(s,o)||this.transformMatrix))return this.getReprojTile_(e,i,n,o,s);const a=this.getTileSize(e),l=this.loader_,u=new AbortController,c={signal:u.signal,crossOrigin:this.crossOrigin_},h=this.getTileCoordForTileUrlFunction([e,i,n]);if(!h)return null;const d=h[0],p=h[1],f=h[2],g=this.getTileGrid()?.getFullTileRange(d);g&&(c.maxY=g.getHeight()-1);const _=Object.assign({tileCoord:[e,i,n],loader:function(){return fs(function(){return l(d,p,f,c)})},size:a,controller:u},this.tileOptions),v=new Uh(_);return v.key=this.getKey(),v.addEventListener(It,this.handleTileChange_),v}handleTileChange_(e){const i=e.target,n=Qe(i),r=i.getState();let o;r==fr?(this.tileLoadingKeys_[n]=!0,o=a2):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=r==Zt?u2:r==Gt?l2:void 0),o&&this.dispatchEvent(new h2(o,i))}getTileGridForProjection(e){const i=this.getProjection();if(this.tileGrid&&(!i||ar(i,e))&&!this.transformMatrix)return this.tileGrid;const n=Qe(e);return n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=Jv(e)),this.tileGridForProjection_[n]}setTileGridForProjection(e,i){const n=lt(e);if(n){const r=Qe(n);r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=i)}}}function dm(t){return Array.isArray(t)?Math.min(...t):t}class d5 extends Bv{constructor(e,i,n,r,o,s,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=i.getExtent();u&&i.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?zi(n,u):n,h=om(e,i,Zi(c),r),d=new Zv(e,i,c,l,.5*h,r),p=d.calculateSourceExtent(),f=Ts(p)?null:s(p,h,o),g=f?Ji:vw,_=f?f.getPixelRatio():1;super(n,r,_,g),this.targetProj_=i,this.maxSourceExtent_=l,this.triangulation_=d,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=f,this.sourcePixelRatio_=_,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Gn&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==jt){const i=nt(this.targetExtent_)/this.targetResolution_,n=Yt(this.targetExtent_)/this.targetResolution_;this.canvas_=i2(i,n,this.sourcePixelRatio_,dm(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Ji){this.state=Gn,this.changed();const e=this.sourceImage_.getState();e==jt||e==jn?this.reproject_():(this.sourceListenerKey_=gt(this.sourceImage_,It,i=>{const n=this.sourceImage_.getState();n!=jt&&n!=jn||(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Ot(this.sourceListenerKey_),this.sourceListenerKey_=null}}const p5="imageloadstart",f5="imageloadend",g5="imageloaderror";class m5 extends Mn{constructor(e,i){super(e),this.image=i}}class v2 extends Qa{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate===void 0||e.interpolate}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!e.loader&&e.loader.length===0,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const i=this.getResolutions();return i&&(e=i[Lh(i,e,0)]),e}getImage(e,i,n,r){const o=this.getProjection();if(!o||!r||ar(o,r))return o&&(r=o),this.getImageInternal(e,i,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ar(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==i&&Fr(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new d5(o,r,e,i,n,(s,a,l)=>this.getImageInternal(s,a,l,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,i,n,r){if(this.loader){const o=function(a,l,u,c){const h=l/u,d=Zi(a),p=io(nt(a)/h,4),f=io(Yt(a)/h,4),g=io((c-1)*p/2,4),_=p+2*g,v=io((c-1)*f/2,4);return qh(d,h,0,[_,f+2*v])}(e,i,n,1),s=this.findNearestResolution(i);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&zn(this.wantedExtent_,o)||zn(this.image.getExtent(),o))&&(this.wantedResolution_&&dm(this.wantedResolution_)===s||dm(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new Bv(o,s,n,this.loader),this.image.addEventListener(It,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const i=e.target;let n;switch(i.getState()){case Gn:this.loading=!0,n=p5;break;case jt:this.loading=!1,n=f5;break;case jn:this.loading=!1,n=g5;break;default:return}this.hasListener(n)&&this.dispatchEvent(new m5(n,i))}}class v5 extends Bv{constructor(e,i,n,r,o){super(e,i,n,o!==void 0?Ji:jt),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=jn):this.state=jt,this.changed()}load(){this.state==Ji&&(this.state=Gn,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const y5=new Error("Image failed to load");function y2(t,e,i,n,r){return new Promise((o,s)=>{const a=new Image;a.crossOrigin=r.crossOrigin??null,a.addEventListener("load",()=>o(a)),a.addEventListener("error",()=>s(y5)),a.src=t0(t,e,i,n,r.maxY)})}function w1(t){return function(e,i,n,r){const o=function(s,a,l,u){return s[po(o2(a,l,u),s.length)]}(t,e,i,n);return y2(o,e,i,n,r)}}function S1(t){let e;if(Array.isArray(t))e=w1(t);else if(typeof t=="string")e=w1(Fd(t));else{if(typeof t!="function")throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");i=t,e=function(n,r,o,s){return y2(i(n,r,o,s),n,r,o,s)}}var i;return e}let C1=0;function M1(t){return Array.isArray(t)?t.join(`
`):typeof t=="string"?t:(++C1,"url-function-key-"+C1)}class _5 extends m2{constructor(e){let i,n=(e=e||{}).loader;e.url&&(n=S1(e.url),i=M1(e.url));const r=n?e.state:"loading",o=e.wrapX===void 0||e.wrapX;super({loader:n,key:i,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize,gutter:e.gutter,maxResolution:e.maxResolution,projection:e.projection,tileGrid:e.tileGrid,state:r,wrapX:o,transition:e.transition,interpolate:e.interpolate!==!1,crossOrigin:e.crossOrigin,zDirection:e.zDirection})}setUrl(e){const i=S1(e);this.setLoader(i),this.setKey(M1(e)),this.getState()!=="ready"&&this.setState("ready")}}class b5 extends Ku{constructor(e,i,n,r,o,s){super(e,i,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==di&&(this.setState(fr),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,i){this.setFeatures(e)}onError(){this.setState(Zt)}setFeatures(e){this.features_=e,this.setState(Gt)}setLoader(e){this.loader_=e}}const k1=[];class x5 extends Ku{constructor(e,i,n,r,o){super(e,i,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=Kt(1,1,k1)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const i=Qe(e);return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[i]}load(){this.getSourceTiles()}release(){this.context_&&(yu(this.context_),k1.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}class Zl extends Od{constructor(e){const i=e.projection||"EPSG:3857",n=e.extent||Ja(i),r=e.tileGrid||Xu({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:i,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:_2,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0||e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null||e.overlaps,this.tileClass=e.tileClass?e.tileClass:b5,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,i,n){if(n.getState()===di){n.setState(fr);const r=n.wrappedTileCoord,o=this.getTileGridForProjection(i),s=o.getTileCoordExtent(r),a=r[0],l=o.getResolution(a);fo(s,-l,s);const u=this.tileGrid,c=u.getExtent();c&&zi(s,c,s);const h=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(s,h,d=>{const p=this.tileUrlFunction(d,e,i);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(d,p?di:gi,p,this.format_,this.tileLoadFunction));const f=this.sourceTiles_[p];n.sourceTiles.push(f),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(n.getKey());const g=f.getState();if(g<Gt){const _=v=>{this.handleTileChange(v);const b=f.getState();if(b===Gt||b===Zt){const m=f.getKey();m in n.errorTileKeys?f.getState()===Gt&&delete n.errorTileKeys[m]:n.loadingSourceTiles--,b===Zt?n.errorTileKeys[m]=!0:f.removeEventListener(It,_),n.loadingSourceTiles===0&&n.setState(xo(n.errorTileKeys)?Gt:Zt)}};f.addEventListener(It,_),n.loadingSourceTiles++}g===di&&(f.extent=u.getTileCoordExtent(d),f.projection=i,f.resolution=u.getResolution(d[0]),f.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(d=>d.getState()===Zt)?Zt:Gt)}return n.sourceTiles}removeSourceTiles(e){const i=e.sourceTiles;for(let n=0,r=i.length;n<r;++n){const o=i[n].getTileUrl(),s=this.getKey();if(!this.tileKeysBySourceTileUrl_[o])return;const a=this.tileKeysBySourceTileUrl_[o][s];a!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(a,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,i,n,r,o){const s=[e,i,n];let a=this.getTileCoordForTileUrlFunction(s,o);const l=this.getTileGrid().getExtent(),u=this.getTileGridForProjection(o);if(a&&l){const d=u.getTileCoordExtent(a);fo(d,-u.getResolution(e),d),ii(l,d)||(a=null)}let c=!0;if(a!==null){const d=this.tileGrid,p=u.getResolution(e),f=d.getZForResolution(p,1),g=u.getTileCoordExtent(a);fo(g,-p,g),d.forEachTileCoord(g,f,_=>{c=c&&!this.tileUrlFunction(_,r,o)})}const h=new x5(s,c?gi:di,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return h.key=this.getKey(),h}getTileGridForProjection(e){const i=e.getCode();let n=this.tileGrids_[i];if(!n){const r=this.tileGrid,o=r.getResolutions().slice(),s=o.map(function(u,c){return r.getOrigin(c)}),a=o.map(function(u,c){return r.getTileSize(c)}),l=43;for(let u=o.length;u<l;++u)o.push(o[u-1]/2),s.push(s[u-1]),a.push(a[u-1]);n=new go({extent:r.getExtent(),origins:s,resolutions:o,tileSizes:a}),this.tileGrids_[i]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,i,n){const r=li(this.getTileGridForProjection(n).getTileSize(e),this.tmpSize);return[Math.round(r[0]*i),Math.round(r[1]*i)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function _2(t,e){t.setLoader(function(i,n,r){g2(e,t.getFormat(),i,n,r,t.onLoad.bind(t),t.onError.bind(t))})}var T1=class extends el{constructor(t){let e;e=(t=t||{}).attributions!==void 0?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",n=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}};class w5 extends Ka{constructor(e){super(e=e||{})}}class S5 extends Xv{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const i=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(i.extent!==void 0&&(l=zi(l,er(i.extent,r.projection))),!a[sn]&&!a[Bn]&&!Ts(l))if(s){const u=r.projection,c=s.getImage(l,o,n,u);c&&(this.loadImage(c)?this.image=c:c.getState()===vw&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const i=this.frameState;if(!i)return null;const n=this.getLayer(),r=ai(i.pixelToCoordinateTransform,e.slice()),o=n.getExtent();if(o&&!ms(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),l=nt(s),u=Math.floor(a.width*((r[0]-s[0])/l));if(u<0||u>=a.width)return null;const c=Yt(s),h=Math.floor(a.height*((s[3]-r[1])/c));return h<0||h>=a.height?null:this.getImageData(a,u,h)}renderFrame(e,i){const n=this.image,r=n.getExtent(),o=n.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],l=n.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,h=e.viewState,d=h.center,p=h.resolution,f=c*s/(p*l),g=c*a/(p*l);this.prepareContainer(e,i);const _=this.context.canvas.width,v=this.context.canvas.height,b=this.getRenderContext(e);let m=!1,y=!0;if(u.extent){const A=er(u.extent,h.projection);y=ii(A,e.extent),m=y&&!zn(A,e.extent),m&&this.clipUnrotated(b,e,A)}const x=n.getImage(),C=pr(this.tempTransform,_/2,v/2,f,g,0,l*(r[0]-d[0])/s,l*(d[1]-r[3])/a);this.renderedResolution=a*c/l;const k=x.width*C[0],P=x.height*C[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,e),y&&k>=.5&&P>=.5){const A=C[4],E=C[5],L=u.opacity;L!==1&&(b.save(),b.globalAlpha=L),b.drawImage(x,0,0,+x.width,+x.height,A,E,k,P),L!==1&&b.restore()}return this.postRender(this.context,e),m&&b.restore(),b.imageSmoothingEnabled=!0,this.container}}class b2 extends w5{constructor(e){super(e)}createRenderer(){return new S5(this)}getData(e){return super.getData(e)}}function x2(t){return function(e){const i=e.buffers,n=e.meta,r=e.imageOps,o=e.width,s=e.height,a=i.length,l=i[0].byteLength;if(r){const d=new Array(a);for(let p=0;p<a;++p)d[p]=new ImageData(new Uint8ClampedArray(i[p]),o,s);return t(d,n).data.buffer}const u=new Uint8ClampedArray(l),c=new Array(a),h=new Array(a);for(let d=0;d<a;++d)c[d]=new Uint8ClampedArray(i[d]),h[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let f=0;f<a;++f){const g=c[f];h[f][0]=g[d],h[f][1]=g[d+1],h[f][2]=g[d+2],h[f][3]=g[d+3]}const p=t(h,n);u[d]=p[0],u[d+1]=p[1],u[d+2]=p[2],u[d+3]=p[3]}return u.buffer}}function C5(t,e){const i=Object.keys(t.lib||{}).map(function(o){return"const "+o+" = "+t.lib[o].toString()+";"}),n=i.concat(["const __minion__ = ("+x2.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(n.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return r.addEventListener("message",e),r}class M5 extends Bu{constructor(e){let i;super(),this.imageOps_=!!e.imageOps,i=e.threads===0?0:this.imageOps_?1:e.threads||1;const n=new Array(i);if(i)for(let r=0;r<i;++r)n[r]=C5(e,this.onWorkerMessage_.bind(this,r));else n[0]=function(r,o){const s=x2(r.operation);let a=!1;return{postMessage:function(l){setTimeout(function(){a||o({data:{buffer:s(l),meta:l.meta}})},0)},terminate:function(){a=!0}}}(e,this.onWorkerMessage_.bind(this,0));this.workers_=n,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,i,n){this.enqueue_({inputs:e,meta:i,callback:n}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const i=e.inputs[0].width,n=e.inputs[0].height,r=e.inputs.map(function(l){return l.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1)return void this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:i,height:n},r);const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let l=0;l<o;++l){const u=l*a,c=[];for(let h=0,d=r.length;h<d;++h)c.push(r[h].slice(u,u+a));this.workers_[l].postMessage({buffers:c,meta:e.meta,imageOps:this.imageOps_,width:i,height:n},c)}}onWorkerMessage_(e,i){this.disposed||(this.dataLookup_[e]=i.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,i=this.workers_.length;let n,r;if(i===1)n=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;n=new Uint8ClampedArray(o),r=new Array(i);const s=4*Math.ceil(o/4/i);for(let a=0;a<i;++a){const l=this.dataLookup_[a].buffer,u=a*s;n.set(new Uint8ClampedArray(l),u),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(n,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const k5="beforeoperations",T5="afteroperations";class E1 extends Mn{constructor(e,i,n){super(e),this.extent=i.extent,this.resolution=i.viewState.resolution/i.pixelRatio,this.data=n}}class w2 extends v2{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=function(r){const o=r.length,s=new Array(o);for(let a=0;a<o;++a)s[a]=L5(r[a]);return s}(e.sources);const i=this.changed.bind(this);for(let r=0,o=this.layers_.length;r<o;++r)this.layers_[r].addEventListener(It,i);var n;this.useResolutions_=e.resolutions!==null,this.tileQueue_=new Uw(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=this.layers_,n.map(function(r){return r.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Qe(this),renderTargets:{}},this.setAttributions(function(r){const o=[];for(let s=0,a=e.sources.length;s<a;++s){const l=e.sources[s],u=l instanceof Qa?l:l.getSource();if(!u)continue;const c=u.getAttributions()?.(r);typeof c=="string"?o.push(c):c!==void 0&&o.push(...c)}return o}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,i){this.processor_&&this.processor_.dispose(),this.processor_=new M5({operation:e,imageOps:this.operationType_==="image",queue:1,lib:i,threads:this.threads_}),this.changed()}updateFrameState_(e,i,n){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=Zi(e);r.size[0]=Math.ceil(nt(e)/i),r.size[1]=Math.ceil(Yt(e)/i),r.extent=[o[0]-r.size[0]*i/2,o[1]-r.size[1]*i/2,o[0]+r.size[0]*i/2,o[1]+r.size[1]*i/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=n,s.resolution=i,r}allSourcesReady_(){let e,i=!0;for(let n=0,r=this.layers_.length;n<r;++n)if(e=this.layers_[n].getSource(),!e||e.getState()!=="ready"){i=!1;break}return i}getImage(e,i,n,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),i=this.findNearestResolution(i);const o=this.updateFrameState_(e,i,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();i===s&&Fr(o.extent,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,i=this.layers_.length,n=new Array(i);for(let o=0;o<i;++o){e.layerIndex=o,e.renderTargets={};const s=E5(this.layers_[o],e);if(!s)return;n[o]=s}const r={};this.dispatchEvent(new E1(k5,e,r)),this.processor_.process(n,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,i,n,r){if(i||!n)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!Fr(o,this.requestedFrameState_.extent))return;let a;this.renderedImageCanvas_?a=this.renderedImageCanvas_.getImage().getContext("2d"):(a=Kt(Math.round(nt(o)/s),Math.round(Yt(o)/s)),this.renderedImageCanvas_=new v5(o,s,1,a.canvas)),a.putImageData(n,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new E1(T5,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let i=super.getResolutions();if(!i)for(let n=0,r=this.layers_.length;n<r&&(i=this.layers_[n].getSource().getResolutions(e),!i);++n);return i}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}w2.prototype.dispose;let Ao=null;function E5(t,e){const i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(e))return null;const n=e.size[0],r=e.size[1];if(n===0||r===0)return null;const o=i.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===n&&s.height===r)return s.getContext("2d").getImageData(0,0,n,r)}if(Ao){const a=Ao.canvas;a.width!==n||a.height!==r?Ao=Kt(n,r,void 0,{willReadFrequently:!0}):Ao.clearRect(0,0,n,r)}else Ao=Kt(n,r,void 0,{willReadFrequently:!0});return Ao.drawImage(s,0,0,n,r),Ao.getImageData(0,0,n,r)}function L5(t){let e;return t instanceof Qa?t instanceof e0?e=new fi({source:t}):t instanceof v2&&(e=new b2({source:t})):e=t,e}var P5=class extends Zu{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi===void 0||t.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r,o){const s=this.urls;if(!s)return;let a;return s.length==1?a=s[0]:a=s[po(r2(t),s.length)],function(l,u,c,h,d,p){const f=d.getCode().split(/:(?=\d+$)/).pop(),g=c/h,_=[by(nt(u)/g,4),by(Yt(u)/g,4)];return p.SIZE=_[0]+","+_[1],p.BBOX=u.join(","),p.BBOXSR=f,p.IMAGESR=f,p.DPI=Math.round(p.DPI?p.DPI*h:90*h),um(l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),p)}(a,i,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),n,r,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;e==1||this.hidpi_||(e=1);const r=n.getTileCoordExtent(t,this.tmpExtent_);let o=li(n.getTileSize(t[0]),this.tmpSize);e!=1&&(o=kw(o,e,this.tmpSize));const s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(s,this.params_),this.getRequestUrl_(t,o,r,e,i,s)}};class I5 extends _5{constructor(e){const i=(e=e||{}).template||"z:{z} x:{x} y:{y}",n=e.source;super({transition:0,wrapX:e.wrapX!==void 0?e.wrapX:n!==void 0?n.getWrapX():void 0});const r=()=>{this.projection=e.projection!==void 0?lt(e.projection):n!==void 0?n.getProjection():this.projection,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:n!==void 0?n.getTileGrid():this.tileGrid,this.zDirection=e.zDirection!==void 0?e.zDirection:n!==void 0?n.zDirection:this.zDirection,n instanceof m2&&(this.transformMatrix=n.transformMatrix?.slice()||null);const o=this.tileGrid;o&&this.setTileSizes(o.getResolutions().map((s,a)=>li(o.getTileSize(a)).map(l=>Math.max(Math.floor(l),1)))),this.setLoader((s,a,l,u)=>{const c=t0(i,s,a,l,u.maxY),[h,d]=this.getTileSize(s),p=Kt(h,d);return p.strokeStyle="grey",p.strokeRect(.5,.5,h+.5,d+.5),p.fillStyle="grey",p.strokeStyle="white",p.textAlign="center",p.textBaseline="middle",p.font="24px sans-serif",p.lineWidth=4,p.strokeText(c,h/2,d/2,h),p.fillText(c,h/2,d/2,h),p.canvas}),this.setState("ready")};if(n===void 0||n.getState()==="ready")r();else{const o=()=>{n.getState()==="ready"&&(n.removeEventListener(It,o),r())};n.addEventListener(It,o)}}}class S2 extends Zu{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:lt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX===void 0||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)(function(i,n,r,o){const s=document.createElement("script"),a="olc_"+Qe(n);function l(){delete window[a],s.parentNode.removeChild(s)}s.async=!0,s.src=i+(i.includes("?")?"&":"?")+"callback="+a;const u=setTimeout(function(){l(),r&&r()},1e4);window[a]=function(c){clearTimeout(u),l(),n(c)},document.head.appendChild(s)})(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(e.tileJSON)}}onXHRLoad_(e){const i=e.target;if(!i.status||i.status>=200&&i.status<300){let n;try{n=JSON.parse(i.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const i=lt("EPSG:4326"),n=this.getProjection();let r;if(e.bounds!==void 0){const l=Hu(i,n);r=Nx(e.bounds,l)}const o=Ja(n),s=e.minzoom||0,a=Xu({extent:o,maxZoom:e.maxzoom||22,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=a,this.tileUrlFunction=d2(e.tiles,a),e.attribution&&!this.getAttributions()){const l=r!==void 0?r:o;this.setAttributions(function(u){return ii(l,u.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class Ns extends Zu{constructor(e){const i=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=Fd(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0&&e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=cm(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const i=e.join(`
`);this.setTileUrlFunction(cm(e.map(this.createFromWMTSTemplate.bind(this))),i)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const i in this.dimensions_)e.push(i+"-"+this.dimensions_[i]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const i=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=i=="KVP"?um(e,n):e.replace(/\{(\w+?)\}/g,function(s,a){return a.toLowerCase()in n?n[a.toLowerCase()]:s});const r=this.tileGrid,o=this.dimensions_;return function(s,a,l){if(!s)return;const u={TileMatrix:r.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(u,o);let c=e;return c=i=="KVP"?um(c,u):c.replace(/\{(\w+?)\}/g,function(h,d){return encodeURIComponent(u[d])}),c}}}const wu="BD:09",C2=(t="BD:09")=>{let e=lt(t);return e||(du(new or({code:"BD:09",extent:[-2003772637e-2,-1170804166e-2,2003772637e-2,1247410417e-2],units:"m",axisOrientation:"neu",global:!1})),e)};class ts extends Zu{constructor(e){const i=e||{},n=i.tileGrid||ts.getTileGrid(i.projection||"EPSG:3857"),r={projection:i.projection===wu?C2(wu):"EPSG:3857",tileGrid:n,tileUrlFunction:function(o){if(!o)return"";let s=o[0],a=o[1],l=-o[2]-1,u=a<0?"M"+-a:a,c=l<0?"M"+-l:l;return i.key&&i.key!=="vec"?`https://maponline0.bdimg.com/starpic/?qt=satepc&u=x=${u};y=${c};z=${s};v=009;type=sate&fm=46&app=webearth2&v=009&udt=20241109`:"http://online3.map.bdimg.com/onlinelabel/?qt=tile&x="+u+"&y="+c+"&z="+s+"&styles=pl&udt=20151021&scaler=1&p=1"}};super(r)}static getTileGrid(e){return e==="EPSG:4326"||e==="EPSG:4490"?ts.default4326TileGrid():e==="BD:09"?ts.defaultBD09TileGrid():ts.default3857TileGrid()}static default4326TileGrid(){const e=[],i=[];for(let n=1;n<19;n+=1)e.push(1.40625/2**n),i.push(n);return new go({extent:[-180,-90,180,90],resolutions:e,origin:[-180,90],matrixIds:i,minZoom:1})}static default3857TileGrid(){const e=[],i=[];for(let n=1;n<19;n+=1)e[n]=Math.pow(2,18-n),i.push(n);return new go({resolutions:e,matrixIds:i,origin:[0,0],minZoom:1})}static defaultBD09TileGrid(){const e=[];for(let i=1;i<19;i+=1)e[i]=Math.pow(2,18-i);return new go({resolutions:e,origin:[0,0],minZoom:1})}}var xc=[75,60,45,30,15,0],L1=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function R5(t){var e=function(i){var n,r;i.lng=function(a,l,u){for(;a>u;)a-=u-l;for(;a<l;)a+=u-l;return a}(i.lng,-180,180),i.lat=function(a,l,u){return a=Math.max(a,l),a=Math.min(a,u),a}(i.lat,-74,74),n=new sa(i.lng,i.lat);for(var o=0;o<xc.length;o++)if(n.lat>=xc[o]){r=L1[o];break}if(!r){for(o=xc.length-1;o>=0;o--)if(n.lat<=-xc[o]){r=L1[o];break}}var s=function(a,l){if(a&&l){var u=l[0]+l[1]*Math.abs(a.lng),c=Math.abs(a.lat)/l[9],h=l[2]+l[3]*c+l[4]*c*c+l[5]*c*c*c+l[6]*c*c*c*c+l[7]*c*c*c*c*c+l[8]*c*c*c*c*c*c;return new sa(u*=a.lng<0?-1:1,h*=a.lat<0?-1:1)}}(i,r);return i=new sa(s.lng.toFixed(2),s.lat.toFixed(2)),i}(new sa(t[0],t[1]));return[e.lng,e.lat]}function sa(t,e){isNaN(t)&&(t=P1(t),t=isNaN(t)?0:t),I1(t)&&(t=parseFloat(t)),isNaN(e)&&(e=P1(e),e=isNaN(e)?0:e),I1(e)&&(e=parseFloat(e)),this.lng=t,this.lat=e}function P1(t){var e,i,n,r,o="",s="",a="",l=0;if(!t||/[^A-Za-z0-9\+\/\=]/g.exec(t))return t;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=cf.indexOf(t.charAt(l++))<<2|(n=cf.indexOf(t.charAt(l++)))>>4,i=(15&n)<<4|(r=cf.indexOf(t.charAt(l++)))>>2,s=(3&r)<<6|(a=cf.indexOf(t.charAt(l++))),o+=String.fromCharCode(e),r!=64&&(o+=String.fromCharCode(i)),a!=64&&(o+=String.fromCharCode(s)),e=i=s="",n=r=a="";while(l<t.length);return o}function I1(t){return typeof t=="string"}function P4(t="map"){const e=C2(wu);return new Za({controls:[],target:t,layers:[new fi({source:new ts({key:"img",projection:wu}),visible:!0})],view:new tn({projection:e,center:R5([120.098926,29.343227]),maxZoom:20,minZoom:5,zoom:8})})}function q5(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function M2(t,e,i){return i&&q5(t,i),t}function hh(){return(hh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function R1(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function k2(t,e){if(t==null)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)e.indexOf(i=o[n])>=0||(r[i]=t[i]);return r}function q1(t){return((e=t)!=null&&typeof e=="object"&&Array.isArray(e)===!1)==1&&Object.prototype.toString.call(t)==="[object Object]";var e}sa.isInRange=function(t){return t&&t.lng<=180&&t.lng>=-180&&t.lat<=74&&t.lat>=-74},sa.prototype.equals=function(t){return t&&lat==t.lat&&lng==t.lng};var T2=Object.prototype,E2=T2.toString,A5=T2.hasOwnProperty,L2=/^\s*function (\w+)/;function A1(t){var e,i=(e=t?.type)!==null&&e!==void 0?e:t;if(i){var n=i.toString().match(L2);return n?n[1]:""}return""}var bs=function(t){var e,i;return q1(t)!==!1&&typeof(e=t.constructor)=="function"&&q1(i=e.prototype)!==!1&&i.hasOwnProperty("isPrototypeOf")!==!1},F5=function(t){return t},qi=F5,Su=function(t,e){return A5.call(t,e)},O5=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Ba=Array.isArray||function(t){return E2.call(t)==="[object Array]"},ja=function(t){return E2.call(t)==="[object Function]"},Kh=function(t){return bs(t)&&Su(t,"_vueTypes_name")},P2=function(t){return bs(t)&&(Su(t,"type")||["_vueTypes_name","validator","default","required"].some(function(e){return Su(t,e)}))};function i0(t,e){return Object.defineProperty(t.bind(e),"__original",{value:t})}function is(t,e,i){var n;i===void 0&&(i=!1);var r=!0,o="";n=bs(t)?t:{type:t};var s=Kh(n)?n._vueTypes_name+" - ":"";if(P2(n)&&n.type!==null){if(n.type===void 0||n.type===!0||!n.required&&e===void 0)return r;Ba(n.type)?(r=n.type.some(function(h){return is(h,e,!0)===!0}),o=n.type.map(function(h){return A1(h)}).join(" or ")):r=(o=A1(n))==="Array"?Ba(e):o==="Object"?bs(e):o==="String"||o==="Number"||o==="Boolean"||o==="Function"?function(h){if(h==null)return"";var d=h.constructor.toString().match(L2);return d?d[1]:""}(e)===o:e instanceof n.type}if(!r){var a=s+'value "'+e+'" should be of type "'+o+'"';return i===!1?(qi(a),!1):a}if(Su(n,"validator")&&ja(n.validator)){var l=qi,u=[];if(qi=function(h){u.push(h)},r=n.validator(e),qi=l,!r){var c=(u.length>1?"* ":"")+u.join(`
* `);return u.length=0,i===!1?(qi(c),r):c}}return r}function nn(t,e){var i=Object.defineProperties(e,{_vueTypes_name:{value:t,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(r){return r!==void 0||this.default?ja(r)||is(this,r,!0)===!0?(this.default=Ba(r)?function(){return[].concat(r)}:bs(r)?function(){return Object.assign({},r)}:r,this):(qi(this._vueTypes_name+' - invalid default value: "'+r+'"'),this):this}}}),n=i.validator;return ja(n)&&(i.validator=i0(n,i)),i}function ir(t,e){var i=nn(t,e);return Object.defineProperty(i,"validate",{value:function(n){return ja(this.validator)&&qi(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=i0(n,this),this}})}function F1(t,e,i){var n,r,o=(n=e,r={},Object.getOwnPropertyNames(n).forEach(function(h){r[h]=Object.getOwnPropertyDescriptor(n,h)}),Object.defineProperties({},r));if(o._vueTypes_name=t,!bs(i))return o;var s,a,l=i.validator,u=k2(i,["validator"]);if(ja(l)){var c=o.validator;c&&(c=(a=(s=c).__original)!==null&&a!==void 0?a:s),o.validator=i0(c?function(h){return c.call(this,h)&&l.call(this,h)}:l,o)}return Object.assign(o,u)}function dh(t){return t.replace(/^(?!\s*$)/gm,"  ")}var Rr=function(){return ir("boolean",{type:Boolean})},Cu=function(){return ir("string",{type:String})},pm=function(){return ir("number",{type:Number})},Xh=function(){return ir("array",{type:Array})},Dd=function(){return ir("object",{type:Object})};function Nd(t){if(!Ba(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var e=!1,i=[],n=0;n<t.length;n+=1){var r=t[n];if(P2(r)){if(Kh(r)&&r._vueTypes_name==="oneOf"){i=i.concat(r.type);continue}if(ja(r.validator)&&(e=!0),r.type!==!0&&r.type){i=i.concat(r.type);continue}}i.push(r)}return i=i.filter(function(o,s){return i.indexOf(o)===s}),nn("oneOfType",e?{type:i,validator:function(o){var s=[],a=t.some(function(l){var u=is(Kh(l)&&l._vueTypes_name==="oneOf"?l.type||null:l,o,!0);return typeof u=="string"&&s.push(u),u===!0});return a||qi("oneOfType - provided value does not match any of the "+s.length+` passed-in validators:
`+dh(s.join(`
`))),a}}:{type:i})}var Wn=function(){function t(){}return t.extend=function(e){var i=this;if(Ba(e))return e.forEach(function(h){return i.extend(h)}),this;var n=e.name,r=e.validate,o=r!==void 0&&r,s=e.getter,a=s!==void 0&&s,l=k2(e,["name","validate","getter"]);if(Su(this,n))throw new TypeError('[VueTypes error]: Type "'+n+'" already defined');var u,c=l.type;return Kh(c)?(delete l.type,Object.defineProperty(this,n,a?{get:function(){return F1(n,c,l)}}:{value:function(){var h,d=F1(n,c,l);return d.validator&&(d.validator=(h=d.validator).bind.apply(h,[d].concat([].slice.call(arguments)))),d}})):(u=a?{get:function(){var h=Object.assign({},l);return o?ir(n,h):nn(n,h)},enumerable:!0}:{value:function(){var h,d,p=Object.assign({},l);return h=o?ir(n,p):nn(n,p),p.validator&&(h.validator=(d=p.validator).bind.apply(d,[h].concat([].slice.call(arguments)))),h},enumerable:!0},Object.defineProperty(this,n,u))},M2(t,null,[{key:"any",get:function(){return ir("any",{})}},{key:"func",get:function(){return ir("function",{type:Function}).def(this.defaults.func)}},{key:"bool",get:function(){return Rr().def(this.defaults.bool)}},{key:"string",get:function(){return Cu().def(this.defaults.string)}},{key:"number",get:function(){return pm().def(this.defaults.number)}},{key:"array",get:function(){return Xh().def(this.defaults.array)}},{key:"object",get:function(){return Dd().def(this.defaults.object)}},{key:"integer",get:function(){return nn("integer",{type:Number,validator:function(e){return O5(e)}}).def(this.defaults.integer)}},{key:"symbol",get:function(){return nn("symbol",{validator:function(e){return typeof e=="symbol"}})}}]),t}();Wn.defaults={},Wn.custom=function(t,e){if(e===void 0&&(e="custom validation failed"),typeof t!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return nn(t.name||"<<anonymous function>>",{validator:function(i){var n=t(i);return n||qi(this._vueTypes_name+" - "+e),n}})},Wn.oneOf=function(t){if(!Ba(t))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var e='oneOf - value should be one of "'+t.join('", "')+'".',i=t.reduce(function(n,r){if(r!=null){var o=r.constructor;n.indexOf(o)===-1&&n.push(o)}return n},[]);return nn("oneOf",{type:i.length>0?i:void 0,validator:function(n){var r=t.indexOf(n)!==-1;return r||qi(e),r}})},Wn.instanceOf=function(t){return nn("instanceOf",{type:t})},Wn.oneOfType=Nd,Wn.arrayOf=function(t){return nn("arrayOf",{type:Array,validator:function(e){var i,n=e.every(function(r){return(i=is(t,r,!0))===!0});return n||qi(`arrayOf - value validation error:
`+dh(i)),n}})},Wn.objectOf=function(t){return nn("objectOf",{type:Object,validator:function(e){var i,n=Object.keys(e).every(function(r){return(i=is(t,e[r],!0))===!0});return n||qi(`objectOf - value validation error:
`+dh(i)),n}})},Wn.shape=function(t){var e=Object.keys(t),i=e.filter(function(r){var o;return!!(!((o=t[r])===null||o===void 0)&&o.required)}),n=nn("shape",{type:Object,validator:function(r){var o=this;if(!bs(r))return!1;var s=Object.keys(r);if(i.length>0&&i.some(function(l){return s.indexOf(l)===-1})){var a=i.filter(function(l){return s.indexOf(l)===-1});return qi(a.length===1?'shape - required property "'+a[0]+'" is not defined.':'shape - required properties "'+a.join('", "')+'" are not defined.'),!1}return s.every(function(l){if(e.indexOf(l)===-1)return o._vueTypes_isLoose===!0||(qi('shape - shape definition does not include a "'+l+'" property. Allowed keys: "'+e.join('", "')+'".'),!1);var u=is(t[l],r[l],!0);return typeof u=="string"&&qi('shape - "'+l+`" property validation error:
 `+dh(u)),u===!0})}});return Object.defineProperty(n,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(n,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),n},Wn.utils={validate:function(t,e){return is(e,t,!0)===!0},toType:function(t,e,i){return i===void 0&&(i=!1),i?ir(t,e):nn(t,e)}},function(t){function e(){return t.apply(this,arguments)||this}R1(e,t)}(function(t){var e;return t===void 0&&(t={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(e=function(i){function n(){return i.apply(this,arguments)||this}return R1(n,i),M2(n,null,[{key:"sensibleDefaults",get:function(){return hh({},this.defaults)},set:function(r){this.defaults=r!==!1?hh({},r!==!0?r:t):{}}}]),n}(Wn)).defaults=hh({},t),e}());const Lt={LAYER_ORDER_CHANGED:"LAYER_ORDER_CHANGED",LAYER_LOCATE:"LAYER_LOCATE",LAYER_OPACITY_CHANGED:"LAYER_OPACITY_CHANGED",LAYER_VISIBLE_CHANGED:"LAYER_VISIBLE_CHANGED",LAYER_ADDED:"LAYER_ADDED",LAYER_REMOVED:"LAYER_REMOVED",LAYER_COPY:"LAYER_COPY",LAYER_ITEMS_CHANGED:"LAYER_ITEMS_CHANGED",LAYER_ITEM_UPDATED:"LAYER_ITEM_UPDATED",LAYER_SWIPE_CHANGED:"LAYER_SWIPE_CHANGED",LAYER_CHANGED:"LAYER_CHANGED",MAP_SYNC_VIEW:"MAP_SYNC_VIEW",MAP_SYNC_VIEW_END:"MAP_SYNC_VIEW_END",MAP_ZOOM_CHANGED:"MAP_ZOOM_CHANGED",MAP_MESSAGE_INFO:"MAP_MESSAGE_INFO",LAYER_TREE_CONTEXT_MENU:"LAYER_TREE_CONTEXT_MENU"};class n0{mapID;mapGroup;data;target;constructor(e,i){this.mapID=e,this.mapGroup=i}}function I2(t){return{all:t=t||new Map,on(e,i){const n=t?.get(e);n&&n.push(i)||t?.set(e,[i])},off(e,i){const n=t?.get(e);n&&n.splice(n.indexOf(i)>>>0,1)},emit(e,i){(t?.get(e)||[]).slice().map(n=>{n(i)}),(t?.get("*")||[]).slice().map(n=>{n(e,i)})}}}I2();class z5{eventBus;constructor(){this.eventBus=I2()}eventEmit(e,i){this.eventBus.emit(e,i)}eventOn(e,i){this.eventBus.on(e,i)}eventOff(e,i){this.eventBus.off(e,i)}}const Zh=new z5,ph=0,R2=1,q2=2,A2=3,Pn=4,fm=5,Ho=6,gm=7,F2=8,r0=9,Ql=10,ls=11,O2=12,wc=[F2],so=[O2],ns=[R2],O1=[A2];class z2{drawCustom(e,i,n,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,i,n){}drawFeature(e,i,n){}drawGeometryCollection(e,i,n){}drawLineString(e,i,n){}drawMultiLineString(e,i,n){}drawMultiPoint(e,i,n){}drawMultiPolygon(e,i,n){}drawPoint(e,i,n){}drawPolygon(e,i,n){}drawText(e,i,n){}setFillStrokeStyle(e,i){}setImageStyle(e,i){}setTextStyle(e,i){}}class jl extends z2{constructor(e,i,n,r){super(),this.tolerance=e,this.maxExtent=i,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const i=this.pixelRatio;return i==1?e:e.map(function(n){return n*i})}appendFlatPointCoordinates(e,i){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,l=e.length;a<l;a+=i)r[0]=e[a],r[1]=e[a+1],ms(n,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,i,n,r,o,s){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();s&&(i+=r);let c=e[i],h=e[i+1];const d=this.tmpCoordinate_;let p,f,g,_=!0;for(p=i+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],g=sg(u,d),g!==f?(_&&(a[l++]=c,a[l++]=h,_=!1),a[l++]=d[0],a[l++]=d[1]):g===Rh?(a[l++]=d[0],a[l++]=d[1],_=!1):_=!0,c=d[0],h=d[1],f=g;return(o&&_||p===i+r)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,i,n,r,o){for(let s=0,a=n.length;s<a;++s){const l=n[s],u=this.appendFlatLineCoordinates(e,i,l,r,!1,!1);o.push(u),i=l}return i}drawCustom(e,i,n,r,o){this.beginGeometry(e,i,o);const s=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,c,h,d,p;switch(s){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();p=0;for(let g=0,_=f.length;g<_;++g){const v=[];p=this.drawCustomCoordinates_(u,p,f[g],a,v),d.push(v)}this.instructions.push([Pn,l,d,e,n,fg,o]),this.hitDetectionInstructions.push([Pn,l,d,e,r||n,fg,o]);break;case"Polygon":case"MultiLineString":h=[],u=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),a,h),this.instructions.push([Pn,l,h,e,n,gu,o]),this.hitDetectionInstructions.push([Pn,l,h,e,r||n,gu,o]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([Pn,l,c,e,n,ro,o]),this.hitDetectionInstructions.push([Pn,l,c,e,r||n,ro,o]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([Pn,l,c,e,n,ro,o]),this.hitDetectionInstructions.push([Pn,l,c,e,r||n,ro,o]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([Pn,l,c,e,n,void 0,o]),this.hitDetectionInstructions.push([Pn,l,c,e,r||n,void 0,o])}this.endGeometry(i)}beginGeometry(e,i,n){this.beginGeometryInstruction1_=[ph,i,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ph,i,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let i;e.reverse();const n=e.length;let r,o,s=-1;for(i=0;i<n;++i)r=e[i],o=r[0],o==gm?s=i:o==ph&&(r[2]=i,sk(this.hitDetectionInstructions,s,i),s=-1)}setFillStrokeStyle(e,i){const n=this.state;if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=tr(r||Ui)}else n.fillStyle=void 0;if(i){const r=i.getColor();n.strokeStyle=tr(r||_u);const o=i.getLineCap();n.lineCap=o!==void 0?o:Oa;const s=i.getLineDash();n.lineDash=s?s.slice():Ir;const a=i.getLineDashOffset();n.lineDashOffset=a||0;const l=i.getLineJoin();n.lineJoin=l!==void 0?l:za;const u=i.getWidth();n.lineWidth=u!==void 0?u:1;const c=i.getMiterLimit();n.miterLimit=c!==void 0?c:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const i=e.fillStyle,n=[Ql,i];return typeof i!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ls,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,i){const n=e.fillStyle;typeof n=="string"&&e.currentFillStyle==n||(n!==void 0&&this.instructions.push(i.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,i){const n=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||o!=e.currentLineDash&&!To(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(n!==void 0&&i.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[gm,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Ox(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;fo(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class z1 extends jl{constructor(e,i,n,r){super(e,i,n,r)}drawFlatCoordinatess_(e,i,n,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=n.length;this.instructions.push(ns),this.hitDetectionInstructions.push(ns);for(let u=0;u<l;++u){const c=n[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,i,c,r,!0,!a),p=[r0,h,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(O1),this.hitDetectionInstructions.push(O1)),i=c}return s&&(this.instructions.push(wc),this.hitDetectionInstructions.push(wc)),a&&(this.instructions.push(so),this.hitDetectionInstructions.push(so)),i}drawCircle(e,i,n){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ql,Ui]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ls,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ir,0]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[q2,u];this.instructions.push(ns,c),this.hitDetectionInstructions.push(ns,c),r.fillStyle!==void 0&&(this.instructions.push(wc),this.hitDetectionInstructions.push(wc)),r.strokeStyle!==void 0&&(this.instructions.push(so),this.hitDetectionInstructions.push(so)),this.endGeometry(i)}drawPolygon(e,i,n){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ql,Ui]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ls,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ir,0]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(i)}drawMultiPolygon(e,i,n){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ql,Ui]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ls,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ir,0]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,a[h],u);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const i=this.coordinates;for(let n=0,r=i.length;n<r;++n)i[n]=Go(i[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function D5(t,e,i,n,r){const o=[];let s=i,a=0,l=e.slice(i,2);for(;a<t&&s+r<n;){const[u,c]=l.slice(-2),h=e[s+r],d=e[s+r+1],p=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(a+=p,a>=t){const f=(t-a+p)/p,g=rn(u,h,f),_=rn(c,d,f);l.push(g,_),o.push(l),l=[g,_],a==t&&(s+=r),a=0}else if(a<t)l.push(e[s+r],e[s+r+1]),s+=r;else{const f=p-a,g=rn(u,h,f/p),_=rn(c,d,f/p);l.push(g,_),o.push(l),l=[g,_],a=0,s+=r}}return a>0&&o.push(l),o}function N5(t,e,i,n,r){let o,s,a,l,u,c,h,d,p,f,g=i,_=i,v=0,b=0,m=i;for(s=i;s<n;s+=r){const y=e[s],x=e[s+1];u!==void 0&&(p=y-u,f=x-c,l=Math.sqrt(p*p+f*f),h!==void 0&&(b+=a,o=Math.acos((h*p+d*f)/(a*l)),o>t&&(b>v&&(v=b,g=m,_=s),b=0,m=s-r)),a=l,h=p,d=f),u=y,c=x}return b+=l,b>v?[m,s]:[g,_]}const Qh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},B5={Circle:z1,Default:jl,Image:class extends jl{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!ms(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,r);this.instructions.push([Ho,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ho,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),r=[];for(let a=0,l=n.length;a<l;a+=t.getStride())this.maxExtent&&!ms(this.maxExtent,n.slice(a,a+2))||r.push(n[a],n[a+1]);const o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,2);this.instructions.push([Ho,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ho,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends jl{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),s=[r0,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i}drawLineString(t,e,i){const n=this.state,r=n.strokeStyle,o=n.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([ls,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ir,0],ns);const s=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(so),this.endGeometry(e)}drawMultiLineString(t,e,i){const n=this.state,r=n.strokeStyle,o=n.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([ls,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ir,0],ns);const s=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let u=0;for(let c=0,h=s.length;c<h;++c)u=this.drawFlatCoordinates_(a,u,s[c],l);this.hitDetectionInstructions.push(so),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(so),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(so),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(ns)}},Polygon:z1,Text:class extends jl{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ui]={fillStyle:Ui},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const n=this.textFillState_,r=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!n&&!r)return;const s=this.coordinates;let a=s.length;const l=t.getType();let u=null,c=t.getStride();if(o.placement!=="line"||l!="LineString"&&l!="MultiLineString"&&l!="Polygon"&&l!="MultiPolygon"){let h=o.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),c=2;break;case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||h.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const v=t.getFlatInteriorPoints();u=[];for(let b=0,m=v.length;b<m;b+=3)o.overflow||h.push(v[b+2]/this.resolution),u.push(v[b],v[b+1]);if(u.length===0)return;c=2}const d=this.appendFlatPointCoordinates(u,c);if(d===a)return;if(h&&(d-a)/2!=u.length/c){let v=a/2;h=h.filter((b,m)=>{const y=s[2*(v+m)]===u[m*c]&&s[2*(v+m)+1]===u[m*c+1];return y||--v,y})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i);let p=o.padding;if(p!=es&&(o.scale[0]<0||o.scale[1]<0)){let v=o.padding[0],b=o.padding[1],m=o.padding[2],y=o.padding[3];o.scale[0]<0&&(b=-b,y=-y),o.scale[1]<0&&(v=-v,m=-m),p=[v,b,m,y]}const f=this.pixelRatio;this.instructions.push([Ho,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==es?es:p.map(function(v){return v*f}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const g=1/f,_=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Ui,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Ho,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ui:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),o.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!ii(this.maxExtent,t.getExtent()))return;let h;if(u=t.getFlatCoordinates(),l=="LineString")h=[u.length];else if(l=="MultiLineString")h=t.getEnds();else if(l=="Polygon")h=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const g=t.getEndss();h=[];for(let _=0,v=g.length;_<v;++_)h.push(g[_][0])}this.beginGeometry(t,e,i);const d=o.repeat,p=d?void 0:o.textAlign;let f=0;for(let g=0,_=h.length;g<_;++g){let v;v=d?D5(d*this.resolution,u,f,h[g],c):[u.slice(f,h[g])];for(let b=0,m=v.length;b<m;++b){const y=v[b];let x=0,C=y.length;if(p==null){const P=N5(o.maxAngle,y,0,y.length,2);x=P[0],C=P[1]}for(let P=x;P<C;P+=c)s.push(y[P],y[P+1]);const k=s.length;f=h[g],this.drawChars_(a,k),a=k}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||bu,justify:e.justify,textBaseline:e.textBaseline||jh,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=Qh[n.textBaseline],u=this.textOffsetY_*a,c=this.text_,h=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([fm,t,e,l,n.overflow,s,n.maxAngle,a,u,r,h*a,c,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fm,t,e,l,n.overflow,s&&Ui,n.maxAngle,a,u,r,h*a,c,o,1/a,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let i,n,r;if(t){const o=t.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=tr(o.getColor()||Ui)):(n=null,this.textFillState_=n);const s=t.getStroke();if(s){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const f=s.getLineDash(),g=s.getLineDashOffset(),_=s.getWidth(),v=s.getMiterLimit();r.lineCap=s.getLineCap()||Oa,r.lineDash=f?f.slice():Ir,r.lineDashOffset=g===void 0?0:g,r.lineJoin=s.getLineJoin()||za,r.lineWidth=_===void 0?1:_,r.miterLimit=v===void 0?10:v,r.strokeStyle=tr(s.getColor()||_u)}else r=null,this.textStrokeState_=r;i=this.textState_;const a=t.getFont()||Ew;Lw(a);const l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=a,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||jh,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||es,i.scale=l===void 0?[1,1]:l;const u=t.getOffsetX(),c=t.getOffsetY(),h=t.getRotateWithView(),d=t.getKeepUpright(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=h!==void 0&&h,this.textKeepUpright_=d===void 0||d,this.textRotation_=p===void 0?0:p,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Qe(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+Qe(n.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}};class D2{constructor(e,i,n,r){this.tolerance_=e,this.maxExtent_=i,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const i in this.buildersByZIndex_){e[i]=e[i]||{};const n=this.buildersByZIndex_[i];for(const r in n){const o=n[r].finish();e[i][r]=o}}return e}getBuilder(e,i){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let o=r[i];return o===void 0&&(o=new B5[i](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[i]=o),o}}function j5(t,e,i,n,r,o,s,a,l,u,c,h,d=!0){let p=t[e],f=t[e+1],g=0,_=0,v=0,b=0;function m(){g=p,_=f,p=t[e+=n],f=t[e+1],b+=v,v=Math.sqrt((p-g)*(p-g)+(f-_)*(f-_))}do m();while(e<i-n&&b+v<o);let y=v===0?0:(o-b)/v;const x=rn(g,p,y),C=rn(_,f,y),k=e-n,P=b,A=o+a*l(u,r,c);for(;e<i-n&&b+v<A;)m();y=v===0?0:(A-b)/v;const E=rn(g,p,y),L=rn(_,f,y);let T=!1;if(d)if(h){const F=[x,C,E,L];Mv(F,0,4,2,h,F,F),T=F[0]>F[2]}else T=x>E;const I=Math.PI,M=[],R=k+n===e;let q;if(v=0,b=P,p=t[e=k],f=t[e+1],R){m(),q=Math.atan2(f-_,p-g),T&&(q+=q>0?-I:I);const F=(E+x)/2,B=(L+C)/2;return M[0]=[F,B,(A-o)/2,q,r],M}for(let F=0,B=(r=r.replace(/\n/g," ")).length;F<B;){m();let V=Math.atan2(f-_,p-g);if(T&&(V+=V>0?-I:I),q!==void 0){let j=V-q;if(j+=j>I?-2*I:j<-I?2*I:0,Math.abs(j)>s)return null}q=V;const O=F;let $=0;for(;F<B;++F){const j=a*l(u,r[T?B-F-1:F],c);if(e+n<i&&b+v<o+$+j/2)break;$+=j}if(F===O)continue;const J=T?r.substring(B-O,B-F):r.substring(O,F);y=v===0?0:(o+$/2-b)/v;const te=rn(g,p,y),ie=rn(_,f,y);M.push([te,ie,$/2,V,J]),o+=$}return M}const Bs=[1/0,1/0,-1/0,-1/0],Gr=[],xr=[],wr=[],Hr=[];function D1(t){return t[3].declutterBox}const N1=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Dp(t,e){return e==="start"?e=N1.test(t)?"right":"left":e==="end"&&(e=N1.test(t)?"left":"right"),Qh[e]}function V5(t,e,i){return i>0&&t.push(`
`,""),t.push(e,""),t}class $5{constructor(e,i,n,r,o){this.overlaps=n,this.pixelRatio=i,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new Kv:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,i,n,r){const o=e+i+n+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[i],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=l.justify?Qh[l.justify]:Dp(Array.isArray(e)?e[0]:e,l.textAlign||bu),d=r&&s.lineWidth?s.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(V5,[]),{width:f,height:g,widths:_,heights:v,lineWidths:b}=function(F,B){const V=[],O=[],$=[];let J=0,te=0,ie=0,j=0;for(let z=0,N=B.length;z<=N;z+=2){const K=B[z];if(K===`
`||z===N){J=Math.max(J,te),$.push(te),te=0,ie+=j,j=0;continue}const U=B[z+1]||F.font,W=Vh(U,K);V.push(W),te+=W;const ve=eT(U);O.push(ve),j=Math.max(j,ve)}return{width:J,height:ie,widths:V,heights:O,lineWidths:$}}(l,p),m=f+d,y=[],x=(m+2)*c[0],C=(g+d)*c[1],k={width:x<0?Math.floor(x):Math.ceil(x),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:y};c[0]==1&&c[1]==1||y.push("scale",c),r&&(y.push("strokeStyle",s.strokeStyle),y.push("lineWidth",d),y.push("lineCap",s.lineCap),y.push("lineJoin",s.lineJoin),y.push("miterLimit",s.miterLimit),y.push("setLineDash",[s.lineDash]),y.push("lineDashOffset",s.lineDashOffset)),n&&y.push("fillStyle",a.fillStyle),y.push("textBaseline","middle"),y.push("textAlign","center");const P=.5-h;let A=h*m+P*d;const E=[],L=[];let T,I=0,M=0,R=0,q=0;for(let F=0,B=p.length;F<B;F+=2){const V=p[F];if(V===`
`){M+=I,I=0,A=h*m+P*d,++q;continue}const O=p[F+1]||l.font;O!==T&&(r&&E.push("font",O),n&&L.push("font",O),T=O),I=Math.max(I,v[R]);const $=[V,A+P*_[R]+h*(_[R]-b[q]),.5*(d+I)+M];A+=_[R],r&&E.push("strokeText",$),n&&L.push("fillText",$),++R}return Array.prototype.push.apply(y,E),Array.prototype.push.apply(y,L),this.labels_[o]=k,k}replayTextBackground_(e,i,n,r,o,s,a){e.beginPath(),e.moveTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,i),s&&(this.alignAndScaleFill_=s[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,i,n,r,o,s,a,l,u,c,h,d,p,f,g,_){let v=n-(a*=d[0]),b=r-(l*=d[1]);const m=o+u>e?e-u:o,y=s+c>i?i-c:s,x=f[3]+m*d[0]+f[1],C=f[0]+y*d[1]+f[2],k=v-f[3],P=b-f[0];let A;return(g||h!==0)&&(Gr[0]=k,Hr[0]=k,Gr[1]=P,xr[1]=P,xr[0]=k+x,wr[0]=xr[0],wr[1]=P+C,Hr[1]=wr[1]),h!==0?(A=pr([1,0,0,1,0,0],n,r,1,1,h,-n,-r),ai(A,Gr),ai(A,xr),ai(A,wr),ai(A,Hr),dr(Math.min(Gr[0],xr[0],wr[0],Hr[0]),Math.min(Gr[1],xr[1],wr[1],Hr[1]),Math.max(Gr[0],xr[0],wr[0],Hr[0]),Math.max(Gr[1],xr[1],wr[1],Hr[1]),Bs)):dr(Math.min(k,k+x),Math.min(P,P+C),Math.max(k,k+x),Math.max(P,P+C),Bs),p&&(v=Math.round(v),b=Math.round(b)),{drawImageX:v,drawImageY:b,drawImageW:m,drawImageH:y,originX:u,originY:c,declutterBox:{minX:Bs[0],minY:Bs[1],maxX:Bs[2],maxY:Bs[3],value:_},canvasTransform:A,scale:d}}replayImageOrLabel_(e,i,n,r,o,s,a){const l=!(!s&&!a),u=r.declutterBox,c=a?a[2]*r.scale[0]/2:0;return u.minX-c<=i[0]&&u.maxX+c>=0&&u.minY-c<=i[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Gr,xr,wr,Hr,s,a),tT(e,r.canvasTransform,o,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const i=this.alignAndScaleFill_;if(i){const n=ai(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),i!==1&&e.scale(i,i),e.rotate(this.viewRotation_)}e.fill(),i&&e.restore()}setStrokeStyle_(e,i){e.strokeStyle=i[1],e.lineWidth=i[2],e.lineCap=i[3],e.lineJoin=i[4],e.miterLimit=i[5],e.lineDashOffset=i[7],e.setLineDash(i[6])}drawLabelWithPointPlacement_(e,i,n,r){const o=this.textStates[i],s=this.createLabel(e,i,r,n),a=this.strokeStates[n],l=this.pixelRatio,u=Dp(Array.isArray(e)?e[0]:e,o.textAlign||bu),c=Qh[o.textBaseline||jh],h=a&&a.lineWidth?a.lineWidth:0;return{label:s,anchorX:u*(s.width/l-2*o.scale[0])+2*(.5-u)*h,anchorY:c*s.height/l+2*(.5-c)*h}}execute_(e,i,n,r,o,s,a,l){const u=this.zIndexContext_;let c;var h,d;this.pixelCoordinates_&&To(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=no(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),h=this.renderedTransform_,d=n,h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5]);let p=0;const f=r.length;let g,_,v,b,m,y,x,C,k,P,A,E,L,T=0,I=0,M=0,R=null,q=null;const F=this.coordinateCache_,B=this.viewRotation_,V=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,O={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},$=this.instructions!=r||this.overlaps?0:200;let J,te,ie,j;for(;p<f;){const z=r[p];switch(z[0]){case ph:J=z[1],j=z[3],J.getGeometry()?a===void 0||ii(a,j.getExtent())?++p:p=z[2]+1:p=z[2],u&&(u.zIndex=z[4]);break;case R2:I>$&&(this.fill_(e),I=0),M>$&&(e.stroke(),M=0),I||M||(e.beginPath(),m=NaN,y=NaN),++p;break;case q2:T=z[1];const N=c[T],K=c[T+1],U=c[T+2]-N,W=c[T+3]-K,ve=Math.sqrt(U*U+W*W);e.moveTo(N+ve,K),e.arc(N,K,ve,0,2*Math.PI,!0),++p;break;case A2:e.closePath(),++p;break;case Pn:T=z[1],g=z[2];const ce=z[3],fe=z[4],pe=z[5];O.geometry=ce,O.feature=J,p in F||(F[p]=[]);const Le=F[p];pe?pe(c,T,g,2,Le):(Le[0]=c[T],Le[1]=c[T+1],Le.length=2),u&&(u.zIndex=z[6]),fe(Le,O),++p;break;case Ho:T=z[1],g=z[2],k=z[3],_=z[4],v=z[5];let Pe=z[6];const me=z[7],Se=z[8],Re=z[9],Ge=z[10];let oe=z[11];const he=z[12];let Z=z[13];b=z[14]||"declutter";const ae=z[15];if(!k&&z.length>=20){P=z[19],A=z[20],E=z[21],L=z[22];const ne=this.drawLabelWithPointPlacement_(P,A,E,L);k=ne.label,z[3]=k;const Te=z[23];_=(ne.anchorX-Te)*this.pixelRatio,z[4]=_;const de=z[24];v=(ne.anchorY-de)*this.pixelRatio,z[5]=v,Pe=k.height,z[6]=Pe,Z=k.width,z[13]=Z}let Ce,Ie,Fe,X;z.length>25&&(Ce=z[25]),z.length>17?(Ie=z[16],Fe=z[17],X=z[18]):(Ie=es,Fe=!1,X=!1),Ge&&V?oe+=B:Ge||V||(oe-=B);let re=0;for(;T<g;T+=2){if(Ce&&Ce[re++]<Z/this.pixelRatio)continue;const ne=this.calculateImageOrLabelDimensions_(k.width,k.height,c[T],c[T+1],Z,Pe,_,v,Se,Re,oe,he,o,Ie,Fe||X,J),Te=[e,i,k,ne,me,Fe?R:null,X?q:null];if(l){let de,Be,Ye,bt,zt;if(ae){const Je=g-T;if(!ae[Je]){ae[Je]={args:Te,declutterMode:b};continue}const ui=ae[Je];de=ui.args,Be=ui.declutterMode,delete ae[Je],Ye=D1(de)}if(!de||Be==="declutter"&&l.collides(Ye)||(bt=!0),b==="declutter"&&l.collides(ne.declutterBox)||(zt=!0),Be==="declutter"&&b==="declutter"){const Je=bt&&zt;bt=Je,zt=Je}bt&&(Be!=="none"&&l.insert(Ye),this.replayImageOrLabel_.apply(this,de)),zt&&(b!=="none"&&l.insert(ne.declutterBox),this.replayImageOrLabel_.apply(this,Te))}else this.replayImageOrLabel_.apply(this,Te)}++p;break;case fm:const ge=z[1],qe=z[2],He=z[3],tt=z[4];L=z[5];const Ae=z[6],Ze=z[7],We=z[8];E=z[9];const ee=z[10];P=z[11],A=z[12];const ke=[z[13],z[13]];b=z[14]||"declutter";const xe=z[15],ye=this.textStates[A],we=ye.font,D=[ye.scale[0]*Ze,ye.scale[1]*Ze];let H;we in this.widths_?H=this.widths_[we]:(H={},this.widths_[we]=H);const Q=p2(c,ge,qe,2),le=Math.abs(D[0])*Ky(we,P,H);if(tt||le<=Q){const ne=j5(c,ge,qe,2,P,(Q-le)*Dp(P,this.textStates[A].textAlign),Ae,Math.abs(D[0]),Ky,we,H,V?0:this.viewRotation_,xe);e:if(ne){const Te=[];let de,Be,Ye,bt,zt;if(E)for(de=0,Be=ne.length;de<Be;++de){zt=ne[de],Ye=zt[4],bt=this.createLabel(Ye,A,"",E),_=zt[2]+(D[0]<0?-ee:ee),v=He*bt.height+2*(.5-He)*ee*D[1]/D[0]-We;const Je=this.calculateImageOrLabelDimensions_(bt.width,bt.height,zt[0],zt[1],bt.width,bt.height,_,v,0,0,zt[3],ke,!1,es,!1,J);if(l&&b==="declutter"&&l.collides(Je.declutterBox))break e;Te.push([e,i,bt,Je,1,null,null])}if(L)for(de=0,Be=ne.length;de<Be;++de){zt=ne[de],Ye=zt[4],bt=this.createLabel(Ye,A,L,""),_=zt[2],v=He*bt.height-We;const Je=this.calculateImageOrLabelDimensions_(bt.width,bt.height,zt[0],zt[1],bt.width,bt.height,_,v,0,0,zt[3],ke,!1,es,!1,J);if(l&&b==="declutter"&&l.collides(Je.declutterBox))break e;Te.push([e,i,bt,Je,1,null,null])}l&&b!=="none"&&l.load(Te.map(D1));for(let Je=0,ui=Te.length;Je<ui;++Je)this.replayImageOrLabel_.apply(this,Te[Je])}}++p;break;case gm:if(s!==void 0){J=z[1];const ne=s(J,j,b);if(ne)return ne}++p;break;case F2:$?I++:this.fill_(e),++p;break;case r0:for(T=z[1],g=z[2],te=c[T],ie=c[T+1],e.moveTo(te,ie),m=te+.5|0,y=ie+.5|0,T+=2;T<g;T+=2)te=c[T],ie=c[T+1],x=te+.5|0,C=ie+.5|0,T!=g-2&&x===m&&C===y||(e.lineTo(te,ie),m=x,y=C);++p;break;case Ql:R=z,this.alignAndScaleFill_=z[2],I&&(this.fill_(e),I=0,M&&(e.stroke(),M=0)),e.fillStyle=z[1],++p;break;case ls:q=z,M&&(e.stroke(),M=0),this.setStrokeStyle_(e,z),++p;break;case O2:$?M++:e.stroke(),++p;break;default:++p}}I&&this.fill_(e),M&&e.stroke()}execute(e,i,n,r,o,s){this.viewRotation_=r,this.execute_(e,i,n,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,i,n,r,o){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],i,this.hitDetectionInstructions,!0,r,o)}}const aa=["Polygon","Circle","LineString","Image","Text","Default"],Jh=["Image","Text"],G5=aa.filter(t=>!Jh.includes(t));class N2{constructor(e,i,n,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=i,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,i){const n=this.getClipCoords(i);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,i){for(const n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const o=e[n];for(const s in o){const a=o[s];r[s]=new $5(this.resolution_,this.pixelRatio_,this.overlaps_,a,i)}}}hasExecutors(e){for(const i in this.executorsByZIndex_){const n=this.executorsByZIndex_[i];for(let r=0,o=e.length;r<o;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,i,n,r,o,s){const a=2*(r=Math.round(r))+1,l=pr(this.hitDetectionTransform_,r+.5,r+.5,1/i,-1/i,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Kt(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;let h;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a),this.renderBuffer_!==void 0&&(h=[1/0,1/0,-1/0,-1/0],Kl(h,e),fo(h,i*(this.renderBuffer_+r),h));const d=function(x){if(Np[x]!==void 0)return Np[x];const C=2*x+1,k=x*x,P=new Array(k+1);for(let E=0;E<=x;++E)for(let L=0;L<=x;++L){const T=E*E+L*L;if(T>k)break;let I=P[T];I||(I=[],P[T]=I),I.push(4*((x+E)*C+(x+L))+3),E>0&&I.push(4*((x-E)*C+(x+L))+3),L>0&&(I.push(4*((x+E)*C+(x-L))+3),E>0&&I.push(4*((x-E)*C+(x-L))+3))}const A=[];for(let E=0,L=P.length;E<L;++E)P[E]&&A.push(...P[E]);return Np[x]=A,A}(r);let p;function f(x,C,k){const P=c.getImageData(0,0,a,a).data;for(let A=0,E=d.length;A<E;A++)if(P[d[A]]>0){if(!s||k==="none"||p!=="Image"&&p!=="Text"||s.includes(x)){const L=(d[A]-3)/4,T=r-L%a,I=r-(L/a|0),M=o(x,C,T*T+I*I);if(M)return M}c.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let _,v,b,m,y;for(g.sort(nr),_=g.length-1;_>=0;--_){const x=g[_].toString();for(b=this.executorsByZIndex_[x],v=aa.length-1;v>=0;--v)if(p=aa[v],m=b[p],m!==void 0&&(y=m.executeHitDetection(c,l,n,f,h),y))return y}}getClipCoords(e){const i=this.maxExtent_;if(!i)return null;const n=i[0],r=i[1],o=i[2],s=i[3],a=[n,r,n,s,o,s,o,r];return no(a,0,8,2,e,a),a}isEmpty(){return xo(this.executorsByZIndex_)}execute(e,i,n,r,o,s,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?ok:nr),s=s||aa;const u=aa.length;for(let c=0,h=l.length;c<h;++c){const d=l[c].toString(),p=this.executorsByZIndex_[d];for(let f=0,g=s.length;f<g;++f){const _=s[f],v=p[_];if(v!==void 0){const b=a===null?void 0:v.getZIndexContext(),m=b?b.getContext():e,y=this.maxExtent_&&_!=="Image"&&_!=="Text";if(y&&(m.save(),this.clip(m,n)),b&&_!=="Text"&&_!=="Image"?b.pushFunction(x=>v.execute(x,i,n,r,o,a)):v.execute(m,i,n,r,o,a),y&&m.restore(),b){b.offset();const x=l[c]*u+f;this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(b)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,i=Object.keys(e).map(Number).sort(nr);for(let n=0,r=i.length;n<r;++n)e[i[n]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[i[n]].length=0}}const Np={};class B2 extends z2{constructor(e,i,n,r,o,s,a){super(),this.context_=e,this.pixelRatio_=i,this.extent_=n,this.transform_=r,this.transformRotation_=r?$u(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,i,n,r){if(!this.image_)return;const o=no(e,i,n,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=o.length;c<h;c+=2){const d=o[c]-this.imageAnchorX_,p=o[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,g=p+this.imageAnchorY_;pr(a,f,g,1,1,u,-f,-g),s.save(),s.transform.apply(s,a),s.translate(f,g),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(e,i,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=no(e,i,n,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);i<n;i+=r){const l=o[i]+this.textOffsetX_,u=o[i+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,u-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,u),this.textFillState_&&s.fillText(this.text_,l,u))}}moveToLineTo_(e,i,n,r,o){const s=this.context_,a=no(e,i,n,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let u=2;u<l;u+=2)s.lineTo(a[u],a[u+1]);return o&&s.closePath(),n}drawRings_(e,i,n,r){for(let o=0,s=n.length;o<s;++o)i=this.moveToLineTo_(e,i,n[o],r,!0);return i}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=function(a,l,u){const c=a.getFlatCoordinates();if(!c)return null;const h=a.getStride();return no(c,0,c.length,h,l,u)}(e,this.transform_,this.pixelCoordinates_),n=i[2]-i[0],r=i[3]-i[1],o=Math.sqrt(n*n+r*r),s=this.context_;s.beginPath(),s.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,i){const n=i.getGeometryFunction()(e);n&&(this.setStyle(i),this.drawGeometry(n))}drawGeometryCollection(e){const i=e.getGeometriesArray();for(let n=0,r=i.length;n<r;++n)this.drawGeometry(i[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getExtent();if(ii(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,u=s.length;l<u;++l)o=this.moveToLineTo_(r,o,s[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_;i.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=e.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();i.beginPath();for(let a=0,l=o.length;a<l;++a){const u=o[a];r=this.drawRings_(n,r,u,s)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=e.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(e){const i=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,i.fillStyle=e.fillStyle):(i.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const i=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,i.lineCap=e.lineCap),To(n.lineDash,e.lineDash)||i.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,i.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,i.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,i.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,i.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset,i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const i=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:bu;n?(n.font!=e.font&&(n.font=e.font,i.font=e.font),n.textAlign!=r&&(n.textAlign=r,i.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,i.textBaseline=e.textBaseline)):(i.font=e.font,i.textAlign=r,i.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,i){if(e){const n=e.getColor();this.fillState_={fillStyle:tr(n||Ui)}}else this.fillState_=null;if(i){const n=i.getColor(),r=i.getLineCap(),o=i.getLineDash(),s=i.getLineDashOffset(),a=i.getLineJoin(),l=i.getWidth(),u=i.getMiterLimit(),c=o||Ir;this.strokeState_={lineCap:r!==void 0?r:Oa,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:a!==void 0?a:za,lineWidth:(l!==void 0?l:1)*this.pixelRatio_,miterLimit:u!==void 0?u:10,strokeStyle:tr(n||_u)}}else this.strokeState_=null}setImageStyle(e){let i;if(!e||!(i=e.getSize()))return void(this.image_=null);const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=i[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/n,s[1]*this.pixelRatio_/n],this.imageWidth_=i[0]*n}setTextStyle(e){if(e){const i=e.getFill();if(i){const p=i.getColor();this.textFillState_={fillStyle:tr(p||Ui)}}else this.textFillState_=null;const n=e.getStroke();if(n){const p=n.getColor(),f=n.getLineCap(),g=n.getLineDash(),_=n.getLineDashOffset(),v=n.getLineJoin(),b=n.getWidth(),m=n.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:Oa,lineDash:g||Ir,lineDashOffset:_||0,lineJoin:v!==void 0?v:za,lineWidth:b!==void 0?b:1,miterLimit:m!==void 0?m:10,strokeStyle:tr(p||_u)}}else this.textStrokeState_=null;const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:Ew,textAlign:h!==void 0?h:bu,textBaseline:d!==void 0?d:jh},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,f,g)=>p+(g%2?" ":f),""):c:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0&&a,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""}}const an=.5;function j2(t,e,i,n,r,o,s,a,l){const u=l?wv(r):r,c=Kt(t[0]*an,t[1]*an);c.imageSmoothingEnabled=!1;const h=c.canvas,d=new B2(c,an,r,null,s,a,l?Hu(null,l):null),p=i.length,f=Math.floor(16777215/p),g={};for(let v=1;v<=p;++v){const b=i[v-1],m=b.getStyleFunction()||n;if(!m)continue;let y=m(b,o);if(!y)continue;Array.isArray(y)||(y=[y]);const x=(v*f).toString(16).padStart(7,"#00000");for(let C=0,k=y.length;C<k;++C){const P=y[C],A=P.getGeometryFunction()(b);if(!A||!ii(u,A.getExtent()))continue;const E=P.clone(),L=E.getFill();L&&L.setColor(x);const T=E.getStroke();T&&(T.setColor(x),T.setLineDash(null)),E.setText(void 0);const I=P.getImage();if(I){const F=I.getImageSize();if(!F)continue;const B=Kt(F[0],F[1],void 0,{alpha:!1}),V=B.canvas;B.fillStyle=x,B.fillRect(0,0,V.width,V.height),E.setImage(new Da({img:V,anchor:I.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:I.getOrigin(),opacity:1,size:I.getSize(),scale:I.getScale(),rotation:I.getRotation(),rotateWithView:I.getRotateWithView()}))}const M=E.getZIndex()||0;let R=g[M];R||(R={},g[M]=R,R.Polygon=[],R.Circle=[],R.LineString=[],R.Point=[]);const q=A.getType();if(q==="GeometryCollection"){const F=A.getGeometriesArrayRecursive();for(let B=0,V=F.length;B<V;++B){const O=F[B];R[O.getType().replace("Multi","")].push(O,E)}}else R[q.replace("Multi","")].push(A,E)}}const _=Object.keys(g).map(Number).sort(nr);for(let v=0,b=_.length;v<b;++v){const m=g[_[v]];for(const y in m){const x=m[y];for(let C=0,k=x.length;C<k;C+=2){d.setStyle(x[C+1]);for(let P=0,A=e.length;P<A;++P)d.setTransform(e[P]),d.drawGeometry(x[C])}}}return c.getImageData(0,0,h.width,h.height)}function V2(t,e,i){const n=[];if(i){const r=Math.floor(Math.round(t[0])*an),o=Math.floor(Math.round(t[1])*an),s=4*(Wt(r,0,i.width-1)+Wt(o,0,i.height-1)*i.width),a=i.data[s],l=i.data[s+1],u=i.data[s+2]+256*(l+256*a),c=Math.floor(16777215/e.length);u&&u%c==0&&n.push(e[u/c-1])}return n}const $2={Point:function(t,e,i,n,r,o){const s=i.getImage(),a=i.getText(),l=a&&a.getText(),u=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=jt)return;const c=t.getBuilder(i.getZIndex(),"Image");c.setImageStyle(s,u),c.drawPoint(e,n,r)}if(l){const c=t.getBuilder(i.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,n,r)}},LineString:function(t,e,i,n,r){const o=i.getStroke();if(o){const a=t.getBuilder(i.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,n,r)}const s=i.getText();if(s&&s.getText()){const a=t.getBuilder(i.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,n,r)}},Polygon:function(t,e,i,n,r){const o=i.getFill(),s=i.getStroke();if(o||s){const l=t.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(e,n,r)}const a=i.getText();if(a&&a.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}},MultiPoint:function(t,e,i,n,r,o){const s=i.getImage(),a=s&&s.getOpacity()!==0,l=i.getText(),u=l&&l.getText(),c=o&&a&&u?{}:void 0;if(a){if(s.getImageState()!=jt)return;const h=t.getBuilder(i.getZIndex(),"Image");h.setImageStyle(s,c),h.drawMultiPoint(e,n,r)}if(u){const h=t.getBuilder(i.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,n,r)}},MultiLineString:function(t,e,i,n,r){const o=i.getStroke();if(o){const a=t.getBuilder(i.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,n,r)}const s=i.getText();if(s&&s.getText()){const a=t.getBuilder(i.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,n,r)}},MultiPolygon:function(t,e,i,n,r){const o=i.getFill(),s=i.getStroke();if(s||o){const l=t.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(e,n,r)}const a=i.getText();if(a&&a.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}},GeometryCollection:function(t,e,i,n,r,o){const s=e.getGeometriesArray();let a,l;for(a=0,l=s.length;a<l;++a)(0,$2[s[a].getType()])(t,s[a],i,n,r,o)},Circle:function(t,e,i,n,r){const o=i.getFill(),s=i.getStroke();if(o||s){const l=t.getBuilder(i.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(e,n,r)}const a=i.getText();if(a&&a.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}};function H5(t,e){return parseInt(Qe(t),10)-parseInt(Qe(e),10)}function mm(t,e){const i=G2(t,e);return i*i}function G2(t,e){return .5*t/e}function ed(t,e,i,n,r,o,s,a){const l=[],u=i.getImage();if(u){let d=!0;const p=u.getImageState();p==jt||p==jn?d=!1:p==Ji&&u.load(),d&&l.push(u.ready())}const c=i.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),function(d,p,f,g,_,v,b){const m=f.getGeometryFunction()(p);if(!m)return;const y=m.simplifyTransformed(g,_);f.getRenderer()?H2(d,y,f,p,b):(0,$2[y.getType()])(d,y,f,p,b,v)}(t,e,i,n,o,s,a),h}function H2(t,e,i,n,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let s=0,a=o.length;s<a;++s)H2(t,o[s],i,n,r);return}t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer(),r)}class U5 extends Xv{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,i,n){const r=i.extent,o=i.viewState,s=o.center,a=o.resolution,l=o.projection,u=o.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),p=i.pixelRatio,f=i.viewHints,g=!(f[sn]||f[Bn]),_=this.context,v=Math.round(nt(r)/a*p),b=Math.round(Yt(r)/a*p),m=h.getWrapX()&&l.canWrapX(),y=m?nt(c):null,x=m?Math.ceil((r[2]-c[2])/y)+1:1;let C=m?Math.floor((r[0]-c[0])/y):0;do{let k=this.getRenderTransform(s,a,0,p,v,b,C*y);i.declutter&&(k=k.slice(0)),e.execute(_,[_.canvas.width,_.canvas.height],k,u,g,n===void 0?aa:n?Jh:G5,n?d&&i.declutter[d]:void 0)}while(++C<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Kt(this.context.canvas.width,this.context.canvas.height,d1))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,yu(this.context),d1.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,i){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const r=e.viewState;this.prepareContainer(e,i);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(Jf)||this.getLayer().hasListener(eg)))return null;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&n.extent&&this.clipping){const l=er(n.extent);a=ii(l,e.extent),this.clipped_=a&&!zn(l,e.extent),this.clipped_&&this.clipUnrotated(o,e,l)}return a&&this.renderWorlds(s,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(i=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=n[0]*an,d=n[1]*an;c.push(this.getRenderTransform(r,o,s,an,h,d,0).slice());const p=u.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!zn(f,l)){let g=l[0];const _=nt(f);let v,b=0;for(;g<f[0];)--b,v=_*b,c.push(this.getRenderTransform(r,o,s,an,h,d,v).slice()),g+=_;for(b=0,g=l[2];g>f[2];)++b,v=_*b,c.push(this.getRenderTransform(r,o,s,an,h,d,v).slice()),g-=_}this.hitDetectionImageData_=j2(n,c,this.renderedFeatures_,u.getStyleFunction(),l,o,s,mm(o,this.renderedPixelRatio_),null)}i(V2(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,i,n,r,o){if(!this.replayGroup_)return;const s=i.viewState.resolution,a=i.viewState.rotation,l=this.getLayer(),u={},c=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,n,function(h,d,p){const f=Qe(h),g=u[f];if(g){if(g!==!0&&p<g.distanceSq){if(p===0)return u[f]=!0,o.splice(o.lastIndexOf(g),1),r(h,l,d);g.geometry=d,g.distanceSq=p}}else{if(p===0)return u[f]=!0,r(h,l,d);o.push(u[f]={feature:h,layer:l,geometry:d,distanceSq:p,callback:r})}},c?i.declutter[c].all().map(h=>h.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const i=this.getLayer(),n=i.getSource();if(!n)return!1;const r=e.viewHints[sn],o=e.viewHints[Bn],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,p=i.getRevision(),f=i.getRenderBuffer();let g=i.getRenderOrder();g===void 0&&(g=H5);const _=u.center.slice(),v=fo(l,f*h),b=v.slice(),m=[v.slice()],y=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!zn(y,e.extent)){const I=nt(y),M=Math.max(nt(v)/2,I);v[0]=y[0]-M,v[2]=y[2]+M,vv(_,c);const R=Bx(m[0],c);R[0]<y[0]&&R[2]<y[2]?m.push([R[0]+I,R[1],R[2]+I,R[3]]):R[0]>y[0]&&R[2]>y[2]&&m.push([R[0]-I,R[1],R[2]-I,R[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!e.declutter&&zn(this.wrappedRenderedExtent_,v))return To(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new D2(G2(h,d),v,h,d);for(let I=0,M=m.length;I<M;++I)n.loadFeatures(m[I],h,c);const C=mm(h,d);let k=!0;const P=(I,M)=>{let R;const q=I.getStyleFunction()||i.getStyleFunction();if(q&&(R=q(I,h)),R){const F=this.renderFeature(I,C,R,x,void 0,this.getLayer().getDeclutter(),M);k=k&&!F}},A=wv(v),E=n.getFeaturesInExtent(A);g&&E.sort(g);for(let I=0,M=E.length;I<M;++I)P(E[I],I);this.renderedFeatures_=E,this.ready=k;const L=x.finish(),T=new N2(v,h,d,n.getOverlaps(),L,i.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=b,this.wrappedRenderedExtent_=v,this.renderedCenter_=_,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=T,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,i,n,r,o,s,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let u=0,c=n.length;u<c;++u)l=ed(r,e,n[u],i,this.boundHandleStyleImageChange_,o,s,a)||l;else l=ed(r,e,n,i,this.boundHandleStyleImageChange_,o,s,a);return l}}var Es=class extends Gv{constructor(t){super(t)}createRenderer(){return new U5(this)}},W5=class extends yr{constructor(t){t=t||{};var e=document.createElement("div");super({element:e,target:t.target});var i=this;if(this.minZoom=t.minZoom||0,this.maxZoom=t.maxZoom||18,this.rotation=t.rotation,t.target)this.panel_=t.target;else{e.classList.add("ol-overview","ol-unselectable","ol-control","ol-collapsed"),/top/.test(t.align)&&e.classList.add("ol-control-top"),/right/.test(t.align)&&e.classList.add("ol-control-right");var n=document.createElement("button");n.setAttribute("type","button"),n.addEventListener("touchstart",function(o){i.toggleMap(),o.preventDefault()}),n.addEventListener("click",function(){i.toggleMap()}),e.appendChild(n),this.panel_=document.createElement("div"),this.panel_.classList.add("panel"),e.appendChild(this.panel_)}this.ovmap_=new Za({controls:new pn,interactions:new pn,target:this.panel_,view:new tn({zoom:2,center:[0,0],projection:t.projection}),layers:t.layers}),this.oview_=this.ovmap_.getView(),this.extentLayer=new Es({name:"Cache extent",source:new mo,style:t.style||[new Pt({image:new Hn({fill:new ri({color:"rgba(255,0,0, 1)"}),stroke:new Vt({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new Vt({width:5,color:"rgba(255,0,0,0.8)"})})]}),this.ovmap_.addLayer(this.extentLayer);var r=function(o,s){var a=3*o*Math.PI/2,l=-1/s,u=Math.cos(a)*Math.pow(2,l);return function(c){return c=1-Math.cos(c*Math.PI/2),1-Math.cos(a*c)*Math.pow(2,l*c)+u*c}};this.ovmap_.addInteraction(new Lo({handleDownEvent:function(o){return t.panAnimation!==!1?t.panAnimation=="elastic"||t.elasticPan?i.getMap().getView().animate({center:o.coordinate,easing:r(2,.3),duration:1e3}):i.getMap().getView().animate({center:o.coordinate,duration:300}):i.getMap().getView().setCenter(o.coordinate),!1}}))}getOverviewMap(){return this.ovmap_}toggleMap(){this.element.classList.toggle("ol-collapsed"),this.ovmap_.updateSize(),this.setView()}setPosition(t){/top/.test(t)?this.element.classList.add("ol-control-top"):this.element.classList.remove("ol-control-top"),/right/.test(t)?this.element.classList.add("ol-control-right"):this.element.classList.remove("ol-control-right")}setMap(t){if(this._listener)for(let e in this._listener)vn(this._listener[e]);this._listener={},super.setMap(t),t&&(this._listener.map=t.on("change:view",function(){this._listener.view&&vn(this._listener.view),t.getView()&&(this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())}.bind(this)),this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())}calcExtent_(t){var e=this.getMap();if(e){var i=this.extentLayer.getSource();i.clear();var n=new An,r=e.getSize(),o=e.getView().getResolution(),s=e.getView().getRotation(),a=e.getView().getCenter();if(o){var l=o*r[0]/2,u=o*r[1]/2,c=this.oview_.getResolution();if(l/c>5||u/c>5){var h,d,p,f=Math.cos(s),g=Math.sin(s);for(t=[[-l,-u],[-l,u],[l,u],[l,-u]],h=0;h<4;++h)d=t[h][0],p=t[h][1],t[h][0]=a[0]+d*f-p*g,t[h][1]=a[1]+d*g+p*f;n.setGeometry(new Qi([t]))}else n.setGeometry(new _n(a));i.addFeature(n)}}}setView(t){if(!t)return this.setView({key:"rotation"}),this.setView({key:"resolution"}),void this.setView({key:"center"});switch(t.key){case"rotation":this.rotation?this.oview_.setRotation(this.getMap().getView().getRotation()):this.oview_.getRotation()&&this.oview_.setRotation(0);break;case"center":var e=this.getMap().getView().calculateExtent(this.getMap().getSize()),i=this.oview_.calculateExtent(this.ovmap_.getSize());(e[0]<i[0]||e[1]<i[1]||e[2]>i[2]||e[3]>i[3])&&this.oview_.setCenter(this.getMap().getView().getCenter());break;case"resolution":var n=2*Math.round(this.oview_.getZoomForResolution(this.getMap().getView().getResolution())/2)-4;n=Math.min(this.maxZoom,Math.max(this.minZoom,n)),this.oview_.setZoom(n)}this.calcExtent_()}},fh=function(t,e){var i=t.getView(),n=i.getProjection(),r=i.getCenter(),o=t.getPixelFromCoordinate(r);o[1]+=1;var s=t.getCoordinateFromPixel(o),a=hu(wo(r,n,"EPSG:4326"),wo(s,n,"EPSG:4326"));return a*=(e||96)/.0254},U2=function(t,e,i){if(t&&e){var n=e;if(typeof e=="string"&&((n=(e=e.replace(":","/").split("/"))[1])||(n=e[0]||""),n=n.replace(/[^\d]/g,""),n=parseInt(n),e[1])){var r=parseInt(e[0]);r&&(n/=r)}if(!n)return;var o=t.getView(),s=o.getProjection(),a=o.getCenter(),l=t.getPixelFromCoordinate(a);l[1]+=1;var u=t.getCoordinateFromPixel(l),c=hu(wo(a,s,"EPSG:4326"),wo(u,s,"EPSG:4326"));return c*=(i||96)/.0254,o.setResolution(o.getResolution()*n/c),n}},Y5=class extends yr{constructor(t){(t=t||{}).typing===void 0&&(t.typing=300);var e=document.createElement("DIV"),i=(t.className||"")+" ol-scale";t.target||(i+=" ol-unselectable ol-control"),super({element:e,target:t.target}),this._input=document.createElement("INPUT"),this._input.value="-",e.setAttribute("class",i),t.editable===!1&&(this._input.readOnly=!0),e.appendChild(this._input),this._input.addEventListener("change",this.setScale.bind(this)),this.set("ppi",t.ppi||96)}setMap(t){this._listener&&vn(this._listener),this._listener=null,super.setMap(t),t&&(this._listener=t.on("moveend",this.getScale.bind(this)))}getScale(){var t=this.getMap();if(t){var e=fh(t,this.get("ppi"));return this._input.value=this.formatScale(e),e}}formatScale(t){return"1 / "+(t=t>100?100*Math.round(t/100):Math.round(t)).toLocaleString()}setScale(t){var e=this.getMap();e&&t&&(t.target&&(t=t.target.value),U2(e,t,this.get("ppi"))),this.getScale()}};function K5(t){const e=t.frameState,i=zh(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new B2(t.context,e.pixelRatio,e.extent,i,e.viewState.rotation)}var Bd=class extends yr{constructor(t){super(t=t||{}),this.setStyle(t.style)}setMap(t){this.getCanvas(t);var e=this.getMap();if(this._listener&&(vn(this._listener),this._listener=null),super.setMap(t),e)try{e.renderSync()}catch{}t&&(this._listener=t.on("postcompose",this._draw.bind(this)))}getCanvas(t){return function(e){if(!e)return null;var i=e.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return i||(e.getViewport().querySelector(".ol-layers")?((i=document.createElement("canvas")).className="ol-fixedoverlay",e.getViewport().querySelector(".ol-layers").after(i),e.on("precompose",function(n){i.width=e.getSize()[0]*n.frameState.pixelRatio,i.height=e.getSize()[1]*n.frameState.pixelRatio})):i=e.getViewport().querySelector("canvas")),i}(t)}getContext(t){var e=t.context;if(!e&&this.getMap()){var i=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];e=i?i.getContext("2d"):null}return e}setStyle(t){this._style=t||new Pt({})}getStyle(){return this._style}getStroke(){return this._style.getStroke()||this._style.setStroke(new Vt({color:"#000",width:1.25})),this._style.getStroke()}getFill(){return this._style.getFill()||this._style.setFill(new ri({color:"#fff"})),this._style.getFill()}getTextStroke(){var t=this._style.getText();return t||(t=new as({})),t.getStroke()||t.setStroke(new Vt({color:"#fff",width:3})),t.getStroke()}getTextFill(){var t=this._style.getText();return t||(t=new as({})),t.getFill()||t.setFill(new ri({color:"#fff"})),t.getFill()}getTextFont(){var t=this._style.getText();return t||(t=new as({})),t.getFont()||t.setFont("12px sans-serif"),t.getFont()}_draw(){}},X5=class extends Bd{constructor(t){var e=(t=t||{}).style||[new Pt({image:new So({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new Vt({color:"#fff",width:3})})}),new Pt({image:new So({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new Vt({color:"#000",width:1})})})];e instanceof Array||(e=[e]);var i=document.createElement("div");i.className="ol-target ol-unselectable ol-control",super({element:i,style:e,target:t.target}),this.composite=t.composite||"",this.setVisible(t.visible!==!1)}setStyle(t){t instanceof Array||(t=[t]),super.setStyle(t)}setVisible(t){if(this.set("visible",t),this.getMap())try{this.getMap().renderSync()}catch{}}getVisible(){return this.get("visible")}_draw(t){var e=this.getContext(t);if(e&&this.getMap()&&this.getVisible()){var i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var n=e.canvas.width/2/i,r=e.canvas.height/2/i,o=new _n(this.getMap().getCoordinateFromPixel([n,r]));this.composite&&(e.globalCompositeOperation=this.composite);for(var s=0;s<this._style.length;s++){var a=this._style[s];if(a instanceof Pt){var l=t.vectorContext;l||(l=K5({inversePixelTransform:[1,0,0,1,0,0],context:e,frameState:{pixelRatio:i,extent:t.frameState.extent,coordinateToPixelTransform:t.frameState.coordinateToPixelTransform,viewState:t.frameState.viewState}})),l.setStyle(a),l.drawGeometry(o)}}e.restore()}}},Z5=class extends Lo{constructor(t){super({handleDownEvent:function(e){return this._setPosition(e)},handleMoveEvent:function(e){return this._setPosition(e)}}),this.layers_=[],this.precomposeBind_=this.precompose_.bind(this),this.postcomposeBind_=this.postcompose_.bind(this),t=t||{},this.pos=!1,this.radius=t.radius||100,t.layers&&this.addLayer(t.layers),this.setActive(!0)}setMap(t){var e;if(this.getMap()){for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}if(super.setMap(t),t){for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);try{t.renderSync()}catch{}}}setRadius(t){if(this.radius=t,this.getMap())try{this.getMap().renderSync()}catch{}}getRadius(){return this.radius}addLayer(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){if(this.getMap()){t[e].on(["precompose","prerender"],this.precomposeBind_),t[e].on(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}this.layers_.push(t[e])}}removeLayers(){this.removeLayer(this.layers_)}removeLayer(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var i;for(i=0;i<this.layers_.length&&this.layers_[i]!==t[e];i++);i!=this.layers_.length&&this.getMap()&&(this.layers_[i].un(["precompose","prerender"],this.precomposeBind_),this.layers_[i].un(["postcompose","postrender"],this.postcomposeBind_),this.layers_.splice(i,1))}if(this.getMap())try{this.getMap().renderSync()}catch{}}setPosition(t){if(this.getMap()){this.pos=this.getMap().getPixelFromCoordinate(t);try{this.getMap().renderSync()}catch{}}}getPosition(){return this.pos?this.getMap().getCoordinateFromPixel(this.pos):null}setPixelPosition(t){if(this.pos=t,this.getMap())try{this.getMap().renderSync()}catch{}}getPixelPosition(){return this.pos}_setPosition(t){if((t.type!=="pointermove"||this.get("action")!=="onclick")&&(t.pixel&&(this.pos=t.pixel),this.getMap()))try{this.getMap().renderSync()}catch{}}precompose_(t){if(this.getActive()){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.beginPath();var n=[this.pos[0],this.pos[1]],r=this.radius,o=t.inversePixelTransform;o?r=(n=[n[0]*o[0]-n[1]*o[1]+o[4],-n[0]*o[2]+n[1]*o[3]+o[5]])[0]-((this.pos[0]-r)*o[0]-this.pos[1]*o[1]+o[4]):(n[0]*=i,n[1]*=i,r*=i),e.arc(n[0],n[1],r,0,2*Math.PI),e.clip()}}postcompose_(t){this.getActive()&&t.context.restore()}setActive(t){if(t!==this.getActive()&&(super.setActive(t),this.layers_)){var e;if(t)for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);else for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);if(this.getMap())try{this.getMap().renderSync()}catch{}}}};const Bp="element",jp="map",Vp="offset",Sc="position",$p="positioning";class vm extends kn{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst===void 0||e.insertFirst,this.stopEvent=e.stopEvent===void 0||e.stopEvent,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Bp,this.handleElementChanged),this.addChangeListener(jp,this.handleMapChanged),this.addChangeListener(Vp,this.handleOffsetChanged),this.addChangeListener(Sc,this.handlePositionChanged),this.addChangeListener($p,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Bp)}getId(){return this.id}getMap(){return this.get(jp)||null}getOffset(){return this.get(Vp)}getPosition(){return this.get(Sc)}getPositioning(){return this.get($p)}handleElementChanged(){Cw(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Ot(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=gt(e,Hv,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Bp,e)}setMap(e){this.set(jp,e)}setOffset(e){this.set(Vp,e)}setPosition(e){this.set(Sc,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const i=this.getMap();if(!i||!i.getTargetElement()||!this.get(Sc))return;const n=this.getRect(i.getTargetElement(),i.getSize()),r=this.getElement(),o=this.getRect(r,[Xk(r),Zk(r)]),s=(e=e||{}).margin===void 0?20:e.margin;if(!zn(n,o)){const a=o[0]-n[0],l=n[2]-o[2],u=o[1]-n[1],c=n[3]-o[3],h=[0,0];if(a<0?h[0]=a-s:l<0&&(h[0]=Math.abs(l)+s),u<0?h[1]=u-s:c<0&&(h[1]=Math.abs(c)+s),h[0]!==0||h[1]!==0){const d=i.getView().getCenterInternal(),p=i.getPixelFromCoordinateInternal(d);if(!p)return;const f=[p[0]+h[0],p[1]+h[1]],g=e.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}getRect(e,i){const n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[r,o,r+i[0],o+i[1]]}setPositioning(e){this.set($p,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),i=this.getPosition();if(!e||!e.isRendered()||!i)return void this.setVisible(!1);const n=e.getPixelFromCoordinate(i),r=e.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(e,i){const n=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let s="0%",a="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?s="-100%":o!="bottom-center"&&o!="center-center"&&o!="top-center"||(s="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?a="-100%":o!="center-left"&&o!="center-center"&&o!="center-right"||(a="-50%");const l=`translate(${s}, ${a}) translate(${Math.round(e[0]+r[0])+"px"}, ${Math.round(e[1]+r[1])+"px"})`;this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l)}getOptions(){return this.options}}const Gp="units",Q5=[1,2,5],bl=25.4/.28;var J5=class extends yr{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Uu,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Gp,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Gp)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Gp,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,n=this.getUnits(),r=n=="degrees"?"degrees":"m";let o=pu(i,t.resolution,e,r);const s=this.minWidth_*(this.dpi_||bl)/bl,a=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||bl)/bl:void 0;let l=s*o,u="";if(n=="degrees"){const b=Ar.degrees;l*=b,l<b/60?(u="″",o*=3600):l<b?(u="′",o*=60):u="°"}else if(n=="imperial")l<.9144?(u="in",o/=.0254):l<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(n=="nautical")o/=1852,u="NM";else if(n=="metric")l<1e-6?(u="nm",o*=1e9):l<.001?(u="μm",o*=1e6):l<1?(u="mm",o*=1e3):l<1e3?u="m":(u="km",o/=1e3);else{if(n!="us")throw new Error("Invalid units");l<.9144?(u="in",o*=39.37):l<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472)}let c,h,d,p,f,g,_=3*Math.floor(Math.log(s*o)/Math.log(10));for(;;){d=Math.floor(_/3);const b=Math.pow(10,d);if(c=Q5[(_%3+3)%3]*b,h=Math.round(c/o),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(a!==void 0&&h>=a){c=p,h=f,d=g;break}if(h>=s)break;p=c,f=h,g=d,++_}const v=this.scaleBar_?this.createScaleBar(h,c,u):c.toFixed(d<0?-d:0)+" "+u;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const n=this.getScaleForResolution(),r=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),o=this.scaleBarSteps_,s=t/o,a=[this.createMarker("absolute")];for(let l=0;l<o;++l){const u=l%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${u}" style="width: ${s}px;"></div>`+this.createMarker("relative")+(l%2==0||o===2?this.createStepText(l,t,!1,e,i):"")+"</div>")}return a.push(this.createStepText(o,t,!0,e,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+a.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,e,i,n,r){const o=(t===0?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+r);return`<div class="ol-scale-step-text" style="margin-left: ${t===0?-3:e/this.scaleBarSteps_*-1}px;text-align: ${t===0?"left":"center"};min-width: ${t===0?0:e/this.scaleBarSteps_*2}px;left: ${i?e+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){return pu(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||bl)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}};const B1="drawstart",eE="drawend",tE="drawabort";class Cc extends Mn{constructor(e,i){super(e),this.feature=i}}function Mc(t,e){return Pr(t[0],t[1],e[0],e[1])}function la(t,e){const i=t.length;return e<0?t[e+i]:e>=i?t[e-i]:t[e]}function kc(t,e,i){let n,r;e<i?(n=e,r=i):(n=i,r=e);const o=Math.ceil(n),s=Math.floor(r);if(o>s)return Mc(ua(t,n),ua(t,r));let a=0;n<o&&(a+=Mc(ua(t,n),la(t,o))),s<r&&(a+=Mc(la(t,s),ua(t,r)));for(let l=o;l<s-1;++l)a+=Mc(la(t,l),la(t,l+1));return a}function W2(t,e,i){if(e instanceof un)Tc(t,e.getCoordinates(),!1,i);else if(e instanceof ys){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r)Tc(t,n[r],!1,i)}else if(e instanceof Qi){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r)Tc(t,n[r],!0,i)}else if(e instanceof _s){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r){const s=n[r];for(let a=0,l=s.length;a<l;++a)Tc(t,s[a],!0,i)}}else if(e instanceof xu){const n=e.getGeometries();for(let r=0;r<n.length;++r)W2(t,n[r],i)}}const Hp={index:-1,endIndex:NaN};function Tc(t,e,i,n){const r=t[0],o=t[1];for(let s=0,a=e.length-1;s<a;++s){const l=Y2(r,o,e[s],e[s+1]);if(l.squaredDistance===0){const u=s+l.along;return void n.push({coordinates:e,ring:i,startIndex:u,endIndex:u})}}}const Up={along:0,squaredDistance:0};function Y2(t,e,i,n){const r=i[0],o=i[1],s=n[0]-r,a=n[1]-o;let l=0,u=r,c=o;return s===0&&a===0||(l=Wt(((t-r)*s+(e-o)*a)/(s*s+a*a),0,1),u+=s*l,c+=a*l),Up.along=l,Up.squaredDistance=$u(Pr(t,e,u,c),10),Up}function ua(t,e){const i=t.length;let n=Math.floor(e);const r=e-n;n>=i?n-=i:n<0&&(n+=i);let o=n+1;o>=i&&(o-=i);const s=t[n],a=s[0],l=s[1],u=t[o];return[a+(u[0]-a)*r,l+(u[1]-l)*r]}function iE(){const t=function(){const e={},i=[255,255,255,1],n=[0,153,255,1];return e.Polygon=[new Pt({fill:new ri({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new Pt({stroke:new Vt({color:i,width:5})}),new Pt({stroke:new Vt({color:n,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new Pt({image:new Hn({radius:6,fill:new ri({color:n}),stroke:new Vt({color:i,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}();return function(e,i){return t[e.getGeometry().getType()]}}var td,fn,Jl=class extends Lo{constructor(t){const e=t;e.stopDown||(e.stopDown=Ua),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Pa,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const n=this.mode_;if(n==="Circle")i=(r,o,s)=>{const a=o||new zd([NaN,NaN]),l=In(r[0]),u=jx(l,In(r[r.length-1]));return a.setCenterAndRadius(l,Math.sqrt(u),this.geometryLayout_),a};else{let r;n==="Point"?r=_n:n==="LineString"?r=un:n==="Polygon"&&(r=Qi),i=(o,s,a)=>(s?n==="Polygon"?o[0].length?s.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):s.setCoordinates([],this.geometryLayout_):s.setCoordinates(o,this.geometryLayout_):s=new r(o,this.geometryLayout_),s)}}this.geometryFunction_=i,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new Es({source:new mo({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:iE(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:Yv,this.freehandCondition_,t.freehand?this.freehandCondition_=rm:this.freehandCondition_=t.freehandCondition?t.freehandCondition:Xw,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(im,this.updateState_)}setTrace(t){let e;e=t?t===!0?rm:t:TT,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===Zf&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===Et.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Et.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Et.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===Et.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===Et.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Et.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Et.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Tr(Et.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=Ra([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(i);if(n.length===0)return;const r=function(o,s){const a=[];for(let l=0;l<s.length;++l)W2(o,s[l].getGeometry(),a);return a}(t.coordinate,n);r.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:r,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex;i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const n=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),i=r-n+1}else{const n=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),i=n-r+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const n=[];if(e<i){const r=Math.ceil(e);let o=Math.floor(i);o===i&&(o-=1);for(let s=r;s<=o;++s)n.push(la(t.coordinates,s))}else{const r=Math.floor(e);let o=Math.ceil(i);o===i&&(o+=1);for(let s=r;s>=o;--s)n.push(la(t.coordinates,s))}n.length&&this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&My(e.startPx,t.pixel)<this.snapTolerance_)return;const i=function(s,a,l,u){const c=s[0],h=s[1];let d=1/0,p=-1,f=NaN;for(let v=0;v<a.targets.length;++v){const b=a.targets[v],m=b.coordinates;let y,x=1/0;for(let C=0;C<m.length-1;++C){const k=Y2(c,h,m[C],m[C+1]);k.squaredDistance<x&&(x=k.squaredDistance,y=C+k.along)}x<d&&(d=x,b.ring&&a.targetIndex===v&&(b.endIndex>b.startIndex?y<b.startIndex&&(y+=m.length):b.endIndex<b.startIndex&&y>b.startIndex&&(y-=m.length)),f=y,p=v)}const g=a.targets[p];let _=g.ring;if(a.targetIndex===p&&_){const v=ua(g.coordinates,f);My(l.getPixelFromCoordinate(v),a.startPx)>u&&(_=!1)}if(_){const v=g.coordinates,b=v.length,m=g.startIndex,y=f;if(m<y){const x=kc(v,m,y);kc(v,m,y-b)<x&&(f-=b)}else{const x=kc(v,m,y);kc(v,m,y+b)<x&&(f+=b)}}return Hp.index=p,Hp.endIndex=f,Hp}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(e.targetIndex!==-1){const a=e.targets[e.targetIndex];this.removeTracedCoordinates_(a.startIndex,a.endIndex)}const s=e.targets[i.index];this.addTracedCoordinates_(s,s.startIndex,i.endIndex)}else{const s=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(s,i.endIndex)}e.targetIndex=i.index;const n=e.targets[e.targetIndex];n.endIndex=i.endIndex;const r=ua(n.coordinates,n.endIndex),o=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&this.mode_!=="Point"||(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let n=!1,r=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")n=!e&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const s=this.sketchCoords_;n=s[0].length>this.minPoints_,r=[s[0][0],s[0][s[0].length-2]],r=e?[s[0][0]]:[s[0][0],s[0][s[0].length-2]]}if(n){const s=this.getMap();for(let a=0,l=r.length;a<l;a++){const u=r[a],c=s.getPixelFromCoordinate(u),h=t[0]-c[0],d=t[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(h*h+d*d)<=p,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new An(new _n(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new An);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new un(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=Dh(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new An(new un(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new An,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Cc(B1,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),r=Dh(this.geometryLayout_);let o,s;for(;t.length<r;)t.push(0);this.mode_==="Point"?s=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],s=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,s=o[o.length-1]),s[0]=t[0],s[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,r;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(t.slice()),this.geometryFunction_(r,e,i)):o==="Polygon"&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(t.slice()),n&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let r=0;r<t;++r){let o;if(n==="LineString"||n==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const s=this.finishCoordinate_.slice();o[o.length-1]=s,this.createOrUpdateSketchPoint_(s)}this.geometryFunction_(o,e,i),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(n==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const s=this.sketchLine_.getGeometry();if(o.length>=2){const a=o[o.length-2].slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}s.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const i=t.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new tl([e])):this.type_==="MultiLineString"?t.setGeometry(new ys([e])):this.type_==="MultiPolygon"&&t.setGeometry(new _s([e])),this.dispatchEvent(new Cc(eE,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new Cc(tE,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let n;if(i&&this.startDrawing_(t[0]),e==="LineString"||e==="Circle")n=this.sketchCoords_;else{if(e!=="Polygon")return;n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&n.shift(),n.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);const r=t[t.length-1];this.sketchFeature_=this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new An(new _n(i)),this.updateSketchFeatures_(),this.dispatchEvent(new Cc(B1,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}};(function(t){t.Point="Point",t.LineString="LineString",t.LinearRing="LinearRing",t.Polygon="Polygon",t.MultiPoint="MultiPoint",t.MultiLineString="MultiLineString",t.MultiPolygon="MultiPolygon",t.GeometryCollection="GeometryCollection",t.Circle="Circle",t.Hand="Hand"})(td||(td={}));class nE{xmap;drawLayer;draw;drawStyle;constructor(e){if(this.xmap=e,e&&!this.drawLayer){const i=new mo,n=new Pt({fill:new ri({color:"rgba(0, 0, 255, 0.1)"}),stroke:new Vt({color:"#0000ff",width:2}),image:new Hn({radius:7,fill:new ri({color:"#00f"})})});this.drawLayer=new Es({source:i,style:n}),e.map?.addLayer(this.drawLayer)}}setDrawVectorIndex=e=>{this.drawLayer.setZIndex(e)};setDrawLayer(e){if(e){const i=e;if(i)this.drawLayer=i;else{const n=e;this.xmap&&(this.drawLayer=this.xmap.map?.getLayers().item[n])}}}get DrawSource(){return this.drawLayer.getSource()}changeDrawType(e,i=void 0){this.clearInteraction(),i&&(this.drawStyle=i),this.drawStyle||(this.drawStyle=new Pt({fill:new ri({color:"rgba(0, 255, 255, 0.5)"}),stroke:new Vt({color:"#ff0000",width:2}),image:new Hn({radius:7,fill:new ri({color:"#f00"})})})),this.draw=new Jl({source:this.DrawSource,type:e===td.Hand?"LineString":e.toString(),style:this.drawStyle,freehand:e===td.Hand,snapTolerance:50}),this.xmap.map?.addInteraction(this.draw)}clearInteraction(){const e=this.xmap.map;e&&this.draw&&(e.removeInteraction(this.draw),e.getInteractions().getArray()?.forEach(i=>{i instanceof Jl&&e.removeInteraction(i)}))}clearLastDraw(){this.draw&&(()=>{const e=this.DrawSource.getFeatures();e.length!==0&&this.DrawSource.removeFeature(e[e.length-1])})()}clearboard(){this.draw&&this.DrawSource.clear()}}class j1{map;sketch;helpTooltipElement;helpTooltip;measureTooltipElement;measureTooltip;continuePolygonMsg="继续点击绘制多边形";continueLineMsg="继续点击绘制线";draw;source;measureLayer;doubleClickZoom;isInited=!1;tooltipArray=[];sphereOptions;constructor(e){this.map=e,this.init()}init(){const e=this.map.getView();this.sphereOptions={projection:e.getProjection()},this.createHelpTooltip(),this.createMeasureTooltip(),this.doubleClickZoom=this.map.getInteractions().getArray().find(i=>i instanceof Ww),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().addEventListener("mouseout",this.mouseoutHandler.bind(this)),this.source=new mo,this.measureLayer=new Es({source:this.source,style:new Pt({fill:new ri({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Vt({color:"#ffcc33",width:2}),image:new Hn({radius:7,fill:new ri({color:"#ffcc33"})})})}),this.measureLayer.set("name","measurelayer"),this.map.addLayer(this.measureLayer),this.isInited=!0}mouseoutHandler(){this.helpTooltipElement.classList.add("hidden")}createHelpTooltip(){this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="myol-tooltip hidden",this.helpTooltip=new vm({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),this.map.addOverlay(this.helpTooltip),this.tooltipArray.push(this.helpTooltipElement)}createMeasureTooltip(){this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="myol-tooltip myol-tooltip-measure",this.measureTooltip=new vm({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.measureTooltip),this.tooltipArray.push(this.measureTooltipElement)}listener;formatLength(e){let i,n=$x(e,this.sphereOptions);return i=n>100?Math.round(n/1e3*100)/100+" km":Math.round(100*n)/100+" m",i}formatArea(e){let i,n=Gx(e,this.sphereOptions);return i=n>1e4?Math.round(n/1e6*100)/100+" km<sup>2</sup>":Math.round(100*n)/100+" m<sup>2</sup>",i}geometryChanged(e){let i,n=e.target,r="";n instanceof Qi?(r=this.formatArea(n),i=n.getInteriorPoint().getCoordinates()):n instanceof un&&(r=this.formatLength(n),i=n.getLastCoordinate()),this.measureTooltipElement&&(this.measureTooltipElement.innerHTML=r),this.measureTooltip.setPosition(i)}pointerMoveHandler(e){if(e.dragging)return;let i="请点击开始绘制";if(this.sketch){let n=this.sketch.getGeometry();n instanceof Qi?i=this.continuePolygonMsg:n instanceof un&&(i=this.continueLineMsg)}this.helpTooltipElement.innerHTML=i,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}addInteraction(e="area"){this.isInited||this.init(),this.map&&this.map.getInteractions().getArray()?.forEach(n=>{n instanceof Jl&&this.map.removeInteraction(n)});const i=e=="area"?"Polygon":"LineString";this.draw=new Jl({source:this.source,type:i,style:new Pt({fill:new ri({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Vt({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new Hn({radius:5,stroke:new Vt({color:"rgba(0, 0, 0, 0.7)"}),fill:new ri({color:"rgba(255, 255, 255, 0.2)"})})})}),this.map.addInteraction(this.draw),this.draw.on("drawstart",this.drawStartHander.bind(this)),this.draw.on("drawend",this.drawEndHander.bind(this))}drawStartHander(e){this.sketch=e.feature,this.listener=this.sketch.getGeometry().on("change",this.geometryChanged.bind(this))}drawEndHander(){this.measureTooltipElement.className="myol-tooltip myol-tooltip-static",this.measureTooltip.setOffset([0,-7]),this.sketch=null,this.measureTooltipElement=null,this.createMeasureTooltip(),vn(this.listener)}removeInteraction(){this.draw&&this.map.removeInteraction(this.draw),this.map.getInteractions().getArray()?.forEach(e=>{e instanceof Jl&&this.map.removeInteraction(e)}),this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.tooltipArray.forEach(e=>{e.parentNode?.removeChild(e)}),this.tooltipArray=[],this.helpTooltip&&this.map.removeOverlay(this.helpTooltip),this.measureTooltip&&this.map.removeOverlay(this.measureTooltip),this.measureLayer&&this.map.removeLayer(this.measureLayer),this.map.getLayers()?.forEach(e=>{e.get("name")==="measurelayer"&&this.map.removeLayer(e)}),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().removeEventListener("mouseout",this.mouseoutHandler.bind(this)),this.doubleClickZoom&&this.map.addInteraction(this.doubleClickZoom),this.isInited=!1}}function Ur(t,e){return ai(t.inversePixelTransform,e.slice(0))}(function(t){t[t.RollHorizonl=0]="RollHorizonl",t[t.RollVertical=1]="RollVertical",t[t.FishEye=2]="FishEye"})(fn||(fn={}));class ym{container;xmap;swipeLayer;SwipeType=fn.RollHorizonl;circleRadius=50;swipeValueX=0;swipeValueY=0;divHeight=0;divWidth=0;line=void 0;preRenderKey;postRenderKey;IsLoaded=!1;constructor(e,i){this.container=e,this.xmap=i,e&&(e.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.line=document.createElement("div"),e.insertBefore(this.line,e.firstElementChild),this.divWidth=e.clientWidth,this.divHeight=e.clientHeight)}rollSwipeLayerbak(e){const i=e.offsetX,n=e.offsetY;if(this.changeSwipe(i,n),this.line)switch(this.SwipeType){case fn.RollHorizonl:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","horizonaldivider"),this.line.setAttribute("class","horizonaldivider");const r=i;this.line.style.height=this.divHeight+"px",this.line.style.width="4px",this.line.style.left=r+"px",this.line.style.removeProperty("top");break;case fn.RollVertical:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","verticaldivider"),this.line.setAttribute("class","verticaldivider");const o=n;this.line.style.height="4px",this.line.style.removeProperty("left"),this.line.style.width=this.divWidth+"px",this.line.style.top=o+"px"}}setSwipeLayer(e){if(this.swipeLayer&&(vn(this.postRenderKey),vn(this.preRenderKey)),typeof e=="number"){const i=e;if(this.xmap){const n=this.xmap.map?.getLayers();this.swipeLayer=n?.getArray()[i]}}else{const i=e;this.swipeLayer=i}this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0)}preRenderHandler(e){const i=this.xmap.map?.getSize();if(i===void 0)return;const n=e.context;switch(n.save(),n.beginPath(),this.SwipeType){case fn.RollHorizonl:const r=this.swipeValueX,o=Ur(e,[r,0]),s=Ur(e,[i[0],0]),a=Ur(e,[r,i[1]]),l=Ur(e,i);n.moveTo(o[0],o[1]),n.lineTo(a[0],a[1]),n.lineTo(l[0],l[1]),n.lineTo(s[0],s[1]),n.closePath();break;case fn.RollVertical:const u=this.swipeValueY,c=Ur(e,[0,u]),h=Ur(e,[i[0],u]),d=Ur(e,[0,i[1]]),p=Ur(e,i);n.moveTo(c[0],c[1]),n.lineTo(d[0],d[1]),n.lineTo(p[0],p[1]),n.lineTo(h[0],h[1]),n.closePath();break;case fn.FishEye:const f=this.swipeValueX,g=this.swipeValueY;n.arc(f,g,this.circleRadius,0,2*Math.PI,!1),n.stroke()}n.clip()}postRenderHandler(e){e.context.restore()}changeSwipeType(e,i=50){this.SwipeType=e,e===fn.FishEye?(i>0&&(this.circleRadius=i),this.line.style.display="none"):(this.line.style.display="unset",this.line.style.removeProperty("display"))}changeSwipe(e,i){this.swipeValueX=e,this.swipeValueY=i,this.xmap&&this.xmap.map?.render()}load(){this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0),this.container&&(this.container.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.insertBefore(this.line,this.container.firstElementChild))}unload(){this.swipeLayer&&(vn(this.postRenderKey),vn(this.preRenderKey),this.IsLoaded=!1),this.container&&(this.container.removeEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.contains(this.line)&&this.container.removeChild(this.line))}}var rE=class extends kn{constructor(t){t=t||{},super();var e,i=this.input=t.input;i||(i=this.input=document.createElement("INPUT"),t.type&&i.setAttribute("type",t.type),t.min!==void 0&&i.setAttribute("min",t.min),t.max!==void 0&&i.setAttribute("max",t.max),t.step!==void 0&&i.setAttribute("step",t.step),t.parent&&t.parent.appendChild(i)),t.disabled&&(i.disabled=!0),t.checked!==void 0&&(i.checked=!!t.checked),t.val!==void 0&&(i.value=t.val),t.hidden&&(i.style.display="none"),i.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),i.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(t,e){var i=function(n){this.moving=!0,this.element.classList.add("ol-moving");var r=function(o){o.type==="pointerup"&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",r),document.removeEventListener("pointercancel",r),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),o.target===t&&e(o),o.stopPropagation(),o.preventDefault()}.bind(this);document.addEventListener("pointermove",r,!1),document.addEventListener("pointerup",r,!1),document.addEventListener("pointercancel",r,!1),n.stopPropagation(),n.preventDefault()}.bind(this);t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",i,!1)}setValue(t){t!==void 0&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},o0=class extends rE{constructor(t){super(t=t||{});var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):t.html!==void 0&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},oE=class extends o0{constructor(t){super(t=t||{}),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()}},sE=class extends o0{constructor(t){super(t=t||{}),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()}},_e={create:function(t,e){var i;if(e=e||{},t==="TEXT")i=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(i);else for(var n in i=document.createElement(t),/button/i.test(t)&&i.setAttribute("type","button"),e)switch(n){case"className":e.className&&e.className.trim&&i.setAttribute("class",e.className.trim());break;case"text":i.innerText=e.text;break;case"html":e.html instanceof Element?i.appendChild(e.html):e.html!==void 0&&(i.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(i);break;case"options":if(/select/i.test(t))for(var r in e.options)_e.create("OPTION",{html:r,value:e.options[r],parent:i});break;case"style":_e.setStyle(i,e.style);break;case"change":case"click":_e.addListener(i,n,e[n]);break;case"on":for(var o in e.on)_e.addListener(i,o,e.on[o]);break;case"checked":i.checked=!!e.checked;break;default:i.setAttribute(n,e[n])}return i},createSwitch:function(t){var e=_e.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),i=Object.assign({input:e},t||{});return new oE(i),e},createCheck:function(t){var e=_e.create("INPUT",{name:t.name,type:t.type==="radio"?"radio":"checkbox",on:t.on,parent:t.parent}),i=Object.assign({input:e},t||{});return t.type==="radio"?new sE(i):new o0(i),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):e!==void 0&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,i,n){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){t.addEventListener(r,i,n)})},removeListener:function(t,e,i){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(n){t.removeEventListener(n,i)})},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return _e.getStyle(t,"display")==="none"},toggle:function(t){t.style.display=t.style.display==="none"?"":"none"},setStyle:function(t,e){for(var i in e)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":typeof e[i]=="number"?t.style[i]=e[i]+"px":t.style[i]=e[i];break;default:t.style[i]=e[i]}},getStyle:function(t,e){var i,n=(t.ownerDocument||document).defaultView;if(n&&n.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),i=n.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,function(r,o){return o.toUpperCase()}),i=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(i)))return function(r){var o=t.style.left,s=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=r||0,r=t.style.pixelLeft+"px",t.style.left=o,t.runtimeStyle.left=s,r}(i);return/px$/.test(i)?parseInt(i):i},outerHeight:function(t){return t.offsetHeight+_e.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+_e.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},i=function(n){if(!n)return e;if(_e.getStyle(n,"position")==="absolute"&&_e.getStyle(n,"transform")!=="none"){var r=n.getBoundingClientRect();return e.left+=r.left,e.top+=r.top,e}return i(n.offsetParent)};return i(t.offsetParent)},positionRect:function(t,e){var i=0,n=0,r=function(o){if(o)return i+=o.offsetLeft,n+=o.offsetTop,r(o.offsetParent);var s={top:t.offsetTop+n,left:t.offsetLeft+i};return e&&(s.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s.bottom=s.top+t.offsetHeight,s.right=s.top+t.offsetWidth,s};return r(t.offsetParent)},scrollDiv:function(t,e){var i,n,r,o,s,a=!1,l=0,u=0,c=typeof(e=e||{}).onmove=="function"?e.onmove:function(){},h=e.vertical?"screenY":"screenX",d=e.vertical?"scrollTop":"scrollLeft",p=!1,f=0,g=function(){s&&(f++,setTimeout(_))},_=function(){if(s){if(--f)return;var k=t.clientHeight,P=t.scrollHeight;n=k/P,s.style.height=100*n+"%",s.style.top=t.scrollTop/P*100+"%",o.style.height=k+"px",k>P-.5?o.classList.add("ol-100pc"):o.classList.remove("ol-100pc")}},v=function(k){k.target.classList.contains("ol-noscroll")||(p=!1,a=k[h],u=new Date,t.classList.add("ol-move"),k.preventDefault(),window.addEventListener("pointermove",b),_e.addListener(window,["pointerup","pointercancel"],x))},b=function(k){if(a!==!1){var P=(r?-1/n:1)*(a-k[h]);p=p||Math.round(P),t[d]+=P,(i=new Date)-u&&(l=(l+P/(i-u))/2),a=k[h],u=i,P&&c(!0)}else p=!0},m=function(k){var P=k>0?Math.min(100,k/2):Math.max(-100,k/2);k-=P,t[d]+=P,-1<k&&k<1?(p?setTimeout(function(){t.classList.remove("ol-move")}):t.classList.remove("ol-move"),p=!1,c(!1)):setTimeout(function(){m(k)},40)};if(e.vertical&&e.minibar){var y=function(k){t.removeEventListener("pointermove",y),t.parentNode.classList.add("ol-miniscroll"),s=_e.create("DIV"),o=_e.create("DIV",{className:"ol-scroll",html:s}),t.parentNode.insertBefore(o,t),s.addEventListener("pointerdown",function(P){r=!0,v(P)}),e.mousewheel&&(_e.addListener(o,["mousewheel","DOMMouseScroll","onmousewheel"],function(P){C(P)}),_e.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],function(P){C(P)})),t.parentNode.addEventListener("pointerenter",g),window.addEventListener("resize",g),k!==!1&&g()};t.parentNode?y(!1):t.addEventListener("pointermove",y),t.addEventListener("scroll",function(){g()})}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),_e.addListener(t,["pointerdown"],function(k){r=!1,v(k)}),t.addEventListener("click",function(k){t.classList.contains("ol-move")&&(k.preventDefault(),k.stopPropagation())},!0);var x=function(k){(u=new Date-u)>100||r?l=0:u>0&&(l=((l||0)+(a-k[h])/u)/2),m(e.animate===!1?0:200*l),a=!1,l=0,u=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout(function(){t.classList.remove("ol-hasClick")},500)),r=!1,window.removeEventListener("pointermove",b),_e.removeListener(window,["pointerup","pointercancel"],x)},C=function(k){var P=Math.max(-1,Math.min(1,k.wheelDelta||-k.detail));return t.classList.add("ol-move"),t[d]-=30*P,t.classList.remove("ol-move"),!1};return e.mousewheel&&_e.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],C),{refresh:g}},dispatchEvent:function(t,e){var i;try{i=new CustomEvent(t)}catch{(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)},setCursor:function(t,e){t instanceof Za&&(t=t.getTargetElement()),!("ontouchstart"in window)&&t instanceof Element&&(t.style.cursor=e)}},aE=class extends yr{constructor(t){(t=t||{}).fullscreen&&(t.target=document.body);var e=_e.create("DIV",{className:((t.className||"")+(t.zoom?" ol-zoom":"")+" ol-ext-dialog").trim()});super({element:e,target:t.target}),e.addEventListener("click",function(r){this.get("hideOnBack")&&r.target===e&&this.close(),this.get("hideOnClick")&&this.close()}.bind(this));var i=_e.create("FORM",{on:{submit:this._onButton("submit")},parent:e});_e.create("H2",{parent:i}),_e.create("DIV",{className:"ol-closebox",click:this._onButton("cancel"),parent:i}),_e.create("DIV",{className:"ol-content",parent:i}),this._progress=_e.create("DIV",{style:{display:"none"},parent:i});var n=_e.create("DIV",{className:"ol-progress-bar",parent:this._progress});this._progressbar=_e.create("DIV",{parent:n}),this._progressMessage=_e.create("DIV",{className:"ol-progress-message",parent:this._progress}),_e.create("DIV",{className:"ol-buttons",parent:i}),this.set("closeBox",t.closeBox!==!1),this.set("zoom",!!t.zoom),this.set("hideOnClick",!!t.hideOnClick),this.set("hideOnBack",!!t.hideOnBack),this.set("className",e.className),this.set("closeOnSubmit",t.closeOnSubmit),this.set("buttons",t.buttons),this.setContent(t)}show(t){t&&((t instanceof Element||typeof t=="string")&&(t={content:t}),this.setContent(t)),this.element.classList.add("ol-visible"),this.element.setAttribute("aria-hidden",!1);var e=this.element.querySelector('input[type="text"],input[type="search"],input[type="number"]');if(e&&e.focus(),this.dispatchEvent({type:"show"}),t){if(t.autoclose){var i=setTimeout(function(){this.hide()}.bind(this),t.autoclose);this.once("hide",function(){clearTimeout(i)})}if(t.hideOnBack){var n=this.get("hideOnBack");this.set("hideOnBack",!0),this.once("hide",function(){this.set("hideOnBack",n)}.bind(this))}}}open(){this.show()}setContentMessage(t){if(t!==void 0){var e=this.getContentElement();t instanceof Element&&_e.setHTML(e,""),_e.setHTML(e,t||"")}}setTitle(t){var e=this.element.querySelector("form");e.querySelector("h2").innerText=t||"",t?e.classList.add("ol-title"):e.classList.remove("ol-title")}setContent(t){if(t){this.element.className=this.get("className"),typeof t=="string"&&(t={content:t}),t=t||{},this.setProgress(!1),t.max&&this.setProgress(0,t.max),t.progress!==void 0&&this.setProgress(t.progress),this.get("zoom")?this.element.classList.add("ol-zoom"):this.element.classList.remove("ol-zoom"),t.className&&t.className.split(" ").forEach(function(o){this.element.classList.add(o)}.bind(this));var e=this.element.querySelector("form");t.content!==void 0&&(t.content instanceof Element&&_e.setHTML(e.querySelector(".ol-content"),""),_e.setHTML(e.querySelector(".ol-content"),t.content||"")),this.setTitle(t.title),t.closeBox||this.get("closeBox")&&t.closeBox!==!1?e.classList.add("ol-closebox"):e.classList.remove("ol-closebox");var i=this.element.querySelector(".ol-buttons");i.innerHTML="";var n=t.buttons||this.get("buttons");if(n)for(var r in e.classList.add("ol-button"),n)_e.create("INPUT",{type:r==="submit"?"submit":"button",value:n[r],click:this._onButton(r,t.onButton),parent:i});else e.classList.remove("ol-button")}}getContentElement(){return this.element.querySelector("form .ol-content")}setProgress(t,e,i){if(t!==!1){if(e>0?this.set("max",Number(e)):e=this.get("max"),e){var n=Math.round(t/e*100);_e.setStyle(this._progress,{display:""}),this._progressbar.className=n?"":"notransition",_e.setStyle(this._progressbar,{width:n+"%"})}else _e.setStyle(this._progress,{display:"none"});this._progressMessage.innerHTML="",_e.setHTML(this._progressMessage,i||"")}else _e.setStyle(this._progress,{display:"none"})}_onButton(t,e){var i=function(n){n.preventDefault(),t==="submit"&&this.get("closeOnSubmit")===!1||this.hide();var r=this.getInputs();this.dispatchEvent({type:"button",button:t,inputs:r}),typeof e=="function"&&e(t,r)}.bind(this);return i}getInputs(){var t={};return["input","textarea","select"].forEach(function(e){this.element.querySelectorAll("form "+e).forEach(function(i){i.className&&i.className.split(" ").forEach(function(n){t[n]=i})})}.bind(this)),t}hide(){this.element.classList.remove("ol-visible"),this.element.setAttribute("aria-hidden",!0),this.dispatchEvent({type:"hide"})}close(){this.hide()}isOpen(){return this.element.classList.contains("ol-visible")}},lE=class extends Bd{constructor(t){t=t||{};var e=document.createElement("div");if(super({element:e,target:t.target}),t.target)e.className=t.className||"ol-legend";else{e.className=(t.className||"ol-legend")+" ol-unselectable ol-control"+(t.collapsible===!1?" ol-uncollapsible":" ol-collapsed");var i=document.createElement("button");i.setAttribute("type","button"),i.addEventListener("click",function(){this.toggle()}.bind(this)),e.appendChild(i),(i=document.createElement("button")).setAttribute("type","button"),i.className="ol-closebox",i.addEventListener("click",function(){this.toggle()}.bind(this)),e.appendChild(i)}this._legend=t.legend,this._legend.getCanvas().className="ol-legendImg",e.appendChild(this._legend.getCanvas()),e.appendChild(this._legend.getListElement()),t.collapsible!==!1&&t.collapsed===!1&&this.show(),this._legend.on("select",function(n){this.dispatchEvent(n)}.bind(this)),this._legend.on("refresh",function(){if(this._onCanvas&&this.getMap())try{this.getMap().renderSync()}catch{}}.bind(this)),this._legend.on("items",function(n){n.nb?(this.element.classList.remove("ol-empty"),this.element.title=t.title||"legend"):(this.element.classList.add("ol-empty"),this.element.title=t.emptyTitle||"no legend"),this.dispatchEvent(n)}.bind(this))}getLegend(){return this._legend}setCanvas(t){if(this._onCanvas=t,this.element.style.visibility=t?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch{}}onCanvas(){return!!this._onCanvas}_draw(t){if(this._onCanvas&&!this.element.classList.contains("ol-collapsed")){var e=this._legend.getCanvas(),i=this.getContext(t),n=i.canvas.height-e.height;i.save(),i.rect(0,n,e.width,e.height);var r="#fff";this._legend.getTextStyle().getBackgroundFill()&&(r=Xl(this._legend.getTextStyle().getBackgroundFill().getColor())),i.fillStyle=i.strokeStyle=r,i.lineWidth=10,i.lineJoin="round",i.stroke(),i.clearRect(0,n,e.width,e.height),i.fill(),i.drawImage(e,0,n),i.restore()}}show(){if(this.element.classList.contains("ol-collapsed")&&(this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!1}),this.getMap()))try{this.getMap().renderSync()}catch{}}hide(){if(!this.element.classList.contains("ol-collapsed")&&(this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!0}),this.getMap()))try{this.getMap().renderSync()}catch{}}collapse(t){t===!1?this.show():this.hide()}isCollapsed(){return this.element.classList.contains("ol-collapsed")}toggle(){if(this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:this.element.classList.contains("ol-collapsed")}),this.getMap())try{this.getMap().renderSync()}catch{}}},K2=class extends yr{constructor(t){t=t||{};var e=_e.create("DIV",{className:t.className||"ol-print"});super({element:e,target:t.target}),t.target||(e.classList.add("ol-unselectable","ol-control"),_e.create("BUTTON",{type:"button",title:t.title||"Print",click:function(){this.print()}.bind(this),parent:e})),this.set("immediate",t.immediate),this.set("imageType",t.imageType||"image/jpeg"),this.set("quality",t.quality||.8),this.set("orientation",t.orientation)}toClipboard(t,e){try{t.canvas.toBlob(function(i){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},i.type,{value:i,enumerable:!0}))]),typeof e=="function"&&e(!0)}catch{typeof e=="function"&&e(!1)}})}catch{typeof e=="function"&&e(!1)}}copyMap(t,e){this.once("print",function(i){this.toClipboard(i,e)}.bind(this)),this.print(t)}_getCanvas(t,e,i){var n;if(t.context)i=t.context.canvas;else{if(i)n=i.getContext("2d");else{i=document.createElement("canvas");var r=this.getMap().getSize();i.width=r[0],i.height=r[1],n=i.getContext("2d"),/jp.*g$/.test(e)&&(n.fillStyle=this.get("bgColor")||"white",n.fillRect(0,0,i.width,i.height))}this.getMap().getViewport().querySelectorAll(".ol-layers canvas, canvas.ol-fixedoverlay").forEach(function(o){if(o.width){if(n.save(),o.parentNode.style.opacity==="0")return;n.globalAlpha=parseFloat(o.parentNode.style.opacity)||1,n.globalCompositeOperation=_e.getStyle(o.parentNode,"mix-blend-mode"),n.filter=_e.getStyle(o.parentNode,"filter");var s=_e.getStyle(o,"transform")||_e.getStyle(o,"-webkit-transform");/^matrix/.test(s)?((s=s.replace(/^matrix\(|\)$/g,"").split(",")).forEach(function(a,l){s[l]=parseFloat(a)}),n.transform(s[0],s[1],s[2],s[3],s[4],s[5]),n.drawImage(o,0,0)):n.drawImage(o,0,0,_e.getStyle(o,"width"),_e.getStyle(o,"height")),n.restore()}}.bind(this))}return i}fastPrint(t,e){t=t||{},this._ol6?requestAnimationFrame(function(){e(this._getCanvas({},t.imageType,t.canvas))}.bind(this)):(this.getMap().once("postcompose",function(i){i.context||(this._ol6=!0),e(this._getCanvas(i,t.imageType,t.canvas))}.bind(this)),this.getMap().render())}print(t){var e=(t=t||{}).imageType||this.get("imageType"),i=t.quality||this.get("quality");if(this.getMap()){if(t.immediate!=="silent"&&this.dispatchEvent(Object.assign({type:"printing"},t)),!t.immediate)return void setTimeout(function(){(t=Object.assign({},t)).immediate="silent",this.print(t)}.bind(this),200);this.getMap().once(this.get("immediate")?"postcompose":"rendercomplete",function(n){var r,o,s,a,l=this._getCanvas(n,e),u=t.size||[210,297],c=t.format||"a4",h=t.orient||this.get("orientation"),d=typeof t.margin=="number"?t.margin:10;if(l){h!=="landscape"&&h!=="portrait"&&(h=l.width>l.height?"landscape":"portrait"),h==="landscape"&&(u=[u[1],u[0]]);var p=Math.min((u[0]-2*d)/l.width,(u[1]-2*d)/l.height);r=p*l.width,o=p*l.height,s=[(u[0]-r)/2,(u[1]-o)/2]}try{a=l?l.toDataURL(e,i):null}catch{return void this.dispatchEvent({type:"error",canvas:l})}var f=Object.assign({type:"print",print:{format:c,orientation:h,unit:"mm",size:u,position:s,imageWidth:r,imageHeight:o},image:a,imageType:e,quality:i,canvas:l},t);this.dispatchEvent(f)}.bind(this)),this.getMap().render()}}},uE=class extends Bd{constructor(t){t=t||{},super({element:_e.create("DIV",{className:(t.className||"")+" ol-control-title ol-unselectable",style:{display:"block",visibility:"hidden"}}),style:t.style}),this.setTitle(t.title||""),this.setVisible(t.visible!==!1),this.element.style.font=this.getTextFont()}setStyle(t){super.setStyle(t),this.element&&(this.element.style.font=this.getTextFont()),this.getMap()&&this.getMap().render()}setTitle(t){if(this.element.textContent=t,this.set("title",t),this.getMap())try{this.getMap().renderSync()}catch{}}getTitle(){return this.get("title")}setVisible(t){if(this.element.style.display=t?"block":"none",this.getMap())try{this.getMap().renderSync()}catch{}}getVisible(){return this.element.style.display!=="none"}_draw(t){if(this.getVisible()){var e=this.getContext(t);if(e){var i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var n=this.element.getBoundingClientRect(),r=this.getMap().getViewport().getBoundingClientRect(),o=this.getMap().getSize()[0]/r.width;e.translate(Math.round((n.left-r.left)*o),Math.round((n.top-r.top)*o));var s=this.element.clientHeight,a=this.element.clientWidth,l=a/2;e.beginPath(),e.fillStyle=Xl(this.getFill().getColor()),e.rect(0,0,a,s),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=Xl(this.getTextFill().getColor()),e.strokeStyle=Xl(this.getTextStroke().getColor()),e.lineWidth=this.getTextStroke().getWidth(),e.textAlign="center",e.textBaseline="middle",e.font=this.getTextFont(),e.lineJoin="round",e.lineWidth&&e.strokeText(this.getTitle(),l,s/2),e.fillText(this.getTitle(),l,s/2),e.closePath(),e.restore()}}}},V1=class extends Bd{constructor(t){t=t||{};var e=document.createElement("div");e.className="ol-control ol-compassctrl ol-unselectable ol-hidden"+(t.className?" "+t.className:""),e.style.position="absolute",e.style.visibility="hidden";var i=t.style instanceof Vt?new Pt({stroke:t.style}):t.style;t.style||(i=new Pt({stroke:new Vt({width:0})})),super({element:e,style:i}),this.set("rotateVithView",t.rotateWithView!==!1),this.setVisible(t.visible!==!1),this.setImage(t.image||t.src)}setImage(t){if(t instanceof Image)this.img_=t,this.img_.onload=function(){if(this.getMap())try{this.getMap().renderSync()}catch{}}.bind(this);else if(typeof t=="string")switch(t){case"compact":this.img_=this.compactCompass_(this.element.clientWidth,this.getStroke().getColor());break;case"default":this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor());break;default:this.img_=new Image,this.img_.onload=function(){if(this.getMap())try{this.getMap().renderSync()}catch{}}.bind(this),this.img_.src=t}else this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor())}compactCompass_(t,e){var i=document.createElement("canvas"),n=i.getContext("2d"),r=(t=i.width=i.height=t||150)/2;return n.translate(r,r),n.fillStyle=e||"#963",n.lineWidth=5,n.lineJoin=n.lineCap="round",n.font="bold "+.4*r+"px sans-serif",n.textBaseline="bottom",n.textAlign="center",n.strokeStyle="#fff",n.globalAlpha=.75,n.strokeText("N",0,-r/2),n.globalAlpha=1,n.fillText("N",0,-r/2),n.beginPath(),n.moveTo(0,r/4),n.lineTo(r/3,r/2),n.lineTo(0,-r/2),n.lineTo(-r/3,r/2),n.lineTo(0,r/4),n.lineWidth=12,n.fillStyle="#fff",n.globalAlpha=.75,n.fill(),n.stroke(),n.globalAlpha=1,n.fillStyle=n.strokeStyle=e||"#963",n.lineWidth=5,n.beginPath(),n.moveTo(0,r/4),n.lineTo(0,-r/2),n.lineTo(r/3,r/2),n.lineTo(0,r/4),n.fill(),n.stroke(),n.beginPath(),n.moveTo(0,r/4),n.lineTo(0,-r/2),n.lineTo(-r/3,r/2),n.lineTo(0,r/4),n.stroke(),i}defaultCompass_(t,e){var i=document.createElement("canvas"),n=i.getContext("2d"),r=(t=i.width=i.height=t||150)/2,o=.22*r;function s(l,u){n.fillStyle=e||"#963",n.beginPath(),n.moveTo(0,0),n.lineTo(l,0),n.lineTo(u,u),n.moveTo(0,0),n.lineTo(-l,0),n.lineTo(-u,-u),n.moveTo(0,0),n.lineTo(0,l),n.lineTo(-u,u),n.moveTo(0,0),n.lineTo(0,-l),n.lineTo(u,-u),n.moveTo(0,0),n.fill(),n.stroke()}function a(l,u){n.globalCompositeOperation="destination-out",n.fillStyle="#fff",n.beginPath(),n.moveTo(0,0),n.lineTo(l,0),n.lineTo(u,-u),n.moveTo(0,0),n.lineTo(-l,0),n.lineTo(-u,u),n.moveTo(0,0),n.lineTo(0,l),n.lineTo(u,u),n.moveTo(0,0),n.lineTo(0,-l),n.lineTo(-u,-u),n.moveTo(0,0),n.fill(),n.globalCompositeOperation="source-over",n.beginPath(),n.moveTo(0,0),n.lineTo(l,0),n.lineTo(u,-u),n.moveTo(0,0),n.lineTo(-l,0),n.lineTo(-u,u),n.moveTo(0,0),n.lineTo(0,l),n.lineTo(u,u),n.moveTo(0,0),n.lineTo(0,-l),n.lineTo(-u,-u),n.moveTo(0,0),n.stroke()}return n.translate(r,r),n.strokeStyle=e||"#963",n.lineWidth=1.5,n.beginPath(),n.arc(0,0,.41*t,0,2*Math.PI),n.arc(0,0,.44*t,0,2*Math.PI),n.stroke(),n.rotate(Math.PI/4),s(.9*r,.8*o),a(.9*r,.8*o),n.rotate(-Math.PI/4),s(r,o),a(r,o),i}getVisible(){return _e.getStyle(this.element,"display")==="block"}setVisible(t){t?this.element.classList.add("ol-visible"):this.element.classList.remove("ol-visible"),this.getMap()&&this.getMap().render()}_draw(t){var e=this.getContext(t);if(e&&this.getVisible()){var i,n=e.canvas,r=[];for(i=0;i<8;i++)r[i]=[Math.cos(Math.PI*i/8),Math.sin(Math.PI*i/8)];var o=t.frameState.pixelRatio;e.save(),e.scale(o,o);var s=this.element.clientWidth,a=this.element.clientHeight,l=this.element.offsetLeft,u=this.element.offsetTop,c=this.img_,h=t.frameState.viewState.rotation;if(e.beginPath(),e.translate(l+s/2,u+a/2),this.get("rotateVithView")&&e.rotate(h),this.getStroke().getWidth()){e.beginPath(),e.strokeStyle=this.getStroke().getColor(),e.lineWidth=this.getStroke().getWidth();var d=Math.max(n.width,n.height);for(i=0;i<8;i++)e.moveTo(-r[i][0]*d,-r[i][1]*d),e.lineTo(r[i][0]*d,r[i][1]*d);e.stroke()}c.width&&e.drawImage(c,-s/2,-a/2,s,a),e.closePath(),e.restore()}}},Ko=class extends yr{constructor(t){t=t||{};var e=_e.create("DIV",{className:(t.className||"ol-print")+" ol-unselectable ol-control"});super({element:e}),this._lang=t.lang||"en",t.target||_e.create("BUTTON",{type:"button",title:t.title||"Print",click:function(){this.print()}.bind(this),parent:e}),t.openWindow&&this.on("print",function(L){L.canvas&&window.open().document.write('<img src="'+L.canvas.toDataURL()+'"/>')}),t.target=_e.create("DIV");var i=this._printCtrl=new K2(t);i.on(["print","error","printing"],function(L){this._printing(L)}.bind(this)),this._compass=new V1({src:t.northImage||"compact",visible:!1,className:"olext-print-compass",style:new Vt({color:"#333",width:0})});var n=this._printDialog=new aE({target:t.targetDialog||document.body,closeBox:!0,className:"ol-ext-print-dialog"}),r=n.getContentElement();this._input={};var o=_e.create("DIV",{className:"ol-print-param",parent:r});this._pages=[_e.create("DIV",{className:"ol-page"})];var s=_e.create("DIV",{className:"ol-map",parent:this._pages[0]});_e.create("DIV",{html:this._pages[0],className:"ol-print-map",parent:r}),_e.create("H2",{html:this.i18n("title"),parent:o});var a=_e.create("UL",{parent:o}),l=_e.create("LI",{className:"ol-orientation",parent:a});this._input.orientation={list:l};var u,c=_e.create("LABEL",{className:"portrait",parent:l});this._input.orientation.portrait=_e.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"portrait",checked:!0,on:{change:function(L){this.setOrientation(L.target.value)}.bind(this)},parent:c}),_e.create("SPAN",{html:this.i18n("portrait"),parent:c}),c=_e.create("LABEL",{className:"landscape",parent:l}),this._input.orientation.landscape=_e.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"landscape",on:{change:function(L){this.setOrientation(L.target.value)}.bind(this)},parent:c}),_e.create("SPAN",{html:this.i18n("landscape"),parent:c}),l=_e.create("LI",{html:_e.create("LABEL",{html:this.i18n("size")}),className:"ol-size",parent:a});var h=this._input.size=_e.create("SELECT",{on:{change:function(){this.setSize(h.value||k)}.bind(this)},parent:l});for(u in this.paperSize)_e.create("OPTION",{html:u+(this.paperSize[u]?" - "+this.paperSize[u][0]+"x"+this.paperSize[u][1]+" mm":this.i18n("custom")),value:u,parent:h});l=_e.create("LI",{html:_e.create("LABEL",{html:this.i18n("margin")}),className:"ol-margin",parent:a});var d=this._input.margin=_e.create("SELECT",{on:{change:function(){this.setMargin(d.value)}.bind(this)},parent:l});for(u in this.marginSize)_e.create("OPTION",{html:this.i18n(u)+" - "+this.marginSize[u]+" mm",value:this.marginSize[u],parent:d});l=_e.create("LI",{html:_e.create("LABEL",{html:this.i18n("scale")}),className:"ol-scale",parent:a});var p=this._input.scale=_e.create("SELECT",{on:{change:function(){this.setScale(parseInt(p.value))}.bind(this)},parent:l});Object.keys(this.scales).forEach(function(L){_e.create("OPTION",{html:this.scales[L],value:L,parent:p})}.bind(this)),l=_e.create("LI",{className:"ol-legend",parent:a});var f=_e.createSwitch({html:this.i18n("legend"),checked:!1,on:{change:function(){E.legend.control.setCanvas(f.checked)}.bind(this)},parent:l});l=_e.create("LI",{className:"ol-print-north",parent:a});var g=this._input.north=_e.createSwitch({html:this.i18n("north"),checked:"checked",on:{change:function(){g.checked?this._compass.element.classList.add("ol-print-compass"):this._compass.element.classList.remove("ol-print-compass"),this.getMap().render()}.bind(this)},parent:l});l=_e.create("LI",{className:"ol-print-title",parent:a});var _=_e.createSwitch({html:this.i18n("mapTitle"),checked:!1,on:{change:function(L){E.title.control.setVisible(L.target.checked)}.bind(this)},parent:l}),v=_e.create("INPUT",{type:"text",placeholder:this.i18n("mapTitle"),on:{keydown:function(L){L.keyCode===13&&L.preventDefault()},keyup:function(){E.title.control.setTitle(v.value)},change:function(){E.title.control.setTitle(v.value)}.bind(this)},parent:l}),b=_e.create("DIV",{className:"ol-user-param",parent:o});l=_e.create("LI",{className:"ol-saveas",parent:a}),_e.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l});var m=_e.create("SELECT",{on:{change:function(){var L=m.value;if(m.value="",!this.formats[L].clipboard||!this._copyMap(L)){var T=typeof this.getSize()=="string"?this.getSize():null,I=Object.assign({format:T,size:T?this.paperSize[T]:null,orient:this.getOrientation(),margin:this.getMargin()},this.formats[L]);i.print(I)}}.bind(this)},parent:l});_e.create("OPTION",{html:this.i18n("saveas"),style:{display:"none"},value:"",parent:m}),this.formats.forEach(function(L,T){if(L.pdf){if(t.pdf===!1)return}else if(L.clipboard){if(t.copy===!1)return}else if(t.save===!1)return;_e.create("OPTION",{html:this.i18n(L.title),value:T,parent:m})}.bind(this)),m.querySelectorAll("option").length===1&&(m.style.display="none"),l=_e.create("LI",{className:"ol-savelegend",parent:a});var y=_e.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l}),x=_e.create("SELECT",{on:{change:function(){var L=E.legend.control.getLegend().getCanvas(),T=document.createElement("CANVAS");T.width=L.width,T.height=L.height;var I,M=T.getContext("2d");if(M.fillStyle="#fff",M.fillRect(0,0,T.width,T.height),M.drawImage(L,0,0),this.formats[x.value].clipboard)T.toBlob(function(O){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},O.type,{value:O,enumerable:!0}))]),y.classList.add("visible"),setTimeout(function(){y.classList.remove("visible")},1e3)}catch{}},"image/png");else try{I=T.toDataURL(this.formats[x.value].imageType,this.formats[x.value].quality);var R=typeof this.getSize()=="string"?this.getSize():"A4",q=T.width/96*25.4,F=T.height/96*25.4,B=this.paperSize[R];this.getOrientation()==="landscape"&&(B=[B[1],B[0]]);var V=[(B[0]-q)/2,(B[1]-F)/2];this.dispatchEvent({type:"print",print:{legend:!0,format:R,orientation:this.getOrientation(),unit:"mm",size:this.paperSize[R],position:V,imageWidth:q,imageHeight:F},image:I,imageType:this.formats[x.value].imageType,pdf:this.formats[x.value].pdf,quality:this.formats[x.value].quality,canvas:T})}catch{}x.value=""}.bind(this)},parent:l});_e.create("OPTION",{html:this.i18n("saveLegend"),style:{display:"none"},value:"",parent:x}),this.formats.forEach(function(L,T){_e.create("OPTION",{html:this.i18n(L.title),value:T,parent:x})}.bind(this));var C,k,P,A=_e.create("DIV",{className:"ol-ext-buttons",parent:o});_e.create("BUTTON",{html:this.i18n("printBt"),type:"submit",click:function(L){L.preventDefault(),window.print()},parent:A}),_e.create("BUTTON",{html:this.i18n("cancel"),type:"button",click:function(){n.hide()},parent:A}),_e.create("DIV",{html:this.i18n("errorMsg"),className:"ol-error",parent:o});var E={};n.on("show",function(){this.dispatchEvent({type:"show",userElement:b,dialog:this._printDialog,page:this.getPage()});var L=this.getMap();L&&(document.body.classList.add("ol-print-document"),C=L.getTargetElement(),k=L.getSize(),typeof this.getSize()=="string"?this.setSize(this.getSize()):this.setSize(k),L.setTarget(s),P&&vn(P),P=L.on("moveend",function(){this.setScale(fh(L))}.bind(this)),this.setScale(fh(L)),E={},this.getMap().getControls().forEach(function(T){T instanceof lE&&(E.legend={control:T}),T instanceof uE&&(E.title={control:T}),T instanceof V1&&(E.compass?T.element.classList.remove("ol-print-compass"):(this._input.north.checked?T.element.classList.add("ol-print-compass"):T.element.classList.remove("ol-print-compass"),this._compass=T,E.compass={control:T}))}.bind(this)),E.title?(_.checked=E.title.isVisible=E.title.control.getVisible(),v.value=E.title.control.getTitle(),_.parentNode.parentNode.classList.remove("hidden")):_.parentNode.parentNode.classList.add("hidden"),E.legend?(E.legend.ison=E.legend.control.onCanvas(),E.legend.collapsed=E.legend.control.isCollapsed(),E.legend.control.collapse(!1),x.parentNode.classList.remove("hidden"),f.parentNode.parentNode.classList.remove("hidden"),f.checked=!E.legend.collapsed,E.legend.control.setCanvas(!E.legend.collapsed)):(x.parentNode.classList.add("hidden"),f.parentNode.parentNode.classList.add("hidden")))}.bind(this)),n.on("hide",function(){document.body.classList.remove("ol-print-document"),C&&(this.getMap().setTarget(C),C=null,P&&vn(P),E.title&&E.title.control.setVisible(E.title.isVisible),E.legend&&(E.legend.control.setCanvas(E.legend.ison),E.legend.control.collapse(E.legend.collapsed)),this.dispatchEvent({type:"hide"}))}.bind(this)),window.addEventListener("resize",function(){this.setSize()}.bind(this)),t.saveAs&&this.on("print",function(L){L.pdf||L.canvas.toBlob(function(T){var I=(L.print.legend?"legend.":"map.")+L.imageType.replace("image/","");t.saveAs(T,I)},L.imageType,L.quality)}),t.jsPDF&&this.on("print",function(L){if(L.pdf){var T=new t.jsPDF({orientation:L.print.orientation,unit:L.print.unit,format:L.print.size});T.addImage(L.image,"JPEG",L.print.position[0],L.print.position[0],L.print.imageWidth,L.print.imageHeight),T.save(L.print.legend?"legend.pdf":"map.pdf")}})}static addLang(t,e){Ko.prototype._labels[t]=e}isOpen(){return this._printDialog.isOpen()}i18n(t){var e=this._labels.en[t]||t;return this._labels[this._lang]&&this._labels[this._lang][t]&&(e=this._labels[this._lang][t]),e}getOrientation(){return this._orientation||"portrait"}setOrientation(t){this._orientation=t==="landscape"?"landscape":"portrait",this._printDialog.element.dataset.orientation=this._orientation,this._input.orientation[this._orientation].checked=!0,this.setSize()}getMargin(){return this._margin||0}setMargin(t){this._margin=t,this._input.margin.value=t,this.setSize()}getSize(){return this._size}setSize(t){if(this._printDialog.getContentElement().dataset.status="",t?this._size=t:t=this._size,t){if(typeof t=="string"){for(var e in this.paperSize)e&&new RegExp(e,"i").test(t)&&(t=e);this.paperSize[t]||(t=this._size="A4"),this._input.size.value=t,t=[Math.trunc(96*this.paperSize[t][0]/25.4),Math.trunc(96*this.paperSize[t][1]/25.4)],this.getOrientation()==="landscape"&&(t=[t[1],t[0]]),this.getPage().classList.remove("margin")}else this._input.size.value="",this.getPage().classList.add("margin");var i=this.getPage(),n=i.parentNode.getBoundingClientRect(),r=(n.width-40)/t[0],o=(n.height-40)/t[1],s=Math.min(r,o,1);i.style.width=t[0]+"px",i.style.height=t[1]+"px",i.style["-webkit-transform"]=i.style.transform="translate(-50%,-50%) scale("+s+")";var a=Math.round(5/s);i.style["-webkit-box-shadow"]=i.style["box-shadow"]=a+"px "+a+"px "+a+"px rgba(0,0,0,.6)",i.style.padding=96*this.getMargin()/25.4+"px",this.getMap()&&this.getMap().updateSize(),this.dispatchEvent({type:"dialog:refresh"})}}_printing(t){this._printDialog.getContentElement().dataset.status=t.type,t.clipboard||this.dispatchEvent(t)}_copyMap(t){var e=this._printDialog.element.querySelector(".ol-clipboard-copy");return this._printCtrl.copyMap(this.formats[t],function(i){i&&(e.classList.add("visible"),setTimeout(function(){e.classList.remove("visible")},1e3))}),!0}getContentElement(){return this._printDialog.getContentElement()}getUserElement(){return this._printDialog.getContentElement().querySelector(".ol-user-param")}getPage(){return this._pages[0]}setMap(t){this.getMap()&&(this.getMap().removeControl(this._compass),this.getMap().removeControl(this._printCtrl),this.getMap().removeControl(this._printDialog)),super.setMap(t),this.getMap()&&(this.getMap().addControl(this._compass),this.getMap().addControl(this._printCtrl),this.getMap().addControl(this._printDialog))}setScale(t){U2(this.getMap(),t),this._input.scale.value=" "+100*Math.round(t/100)}getScale(){return fh(this.getMap())}print(t){(t=t||{}).size&&this.setSize(t.size),t.scale&&this.setScale(t.scale),t.orientation&&this.setOrientation(t.orientation),t.margin&&this.setMargin(t.margin),this._printDialog.show()}getPrintControl(){return this._printCtrl}};Ko.prototype._labels={en:{title:"Print",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",size:"Page size",custom:"screen size",margin:"Margin",scale:"Scale",legend:"Legend",north:"North arrow",mapTitle:"Map title",saveas:"Save as...",saveLegend:"Save legend...",copied:"✔ Copied to clipboard",errorMsg:"Can't save map canvas...",printBt:"Print...",clipboardFormat:"copy to clipboard...",jpegFormat:"save as jpeg",pngFormat:"save as png",pdfFormat:"save as pdf",none:"none",small:"small",large:"large",cancel:"cancel"},fr:{title:"Imprimer",orientation:"Orientation",portrait:"Portrait",landscape:"Paysage",size:"Taille du papier",custom:"taille écran",margin:"Marges",scale:"Echelle",legend:"Légende",north:"Flèche du nord",mapTitle:"Titre de la carte",saveas:"Enregistrer sous...",saveLegend:"Enregistrer la légende...",copied:"✔ Carte copiée",errorMsg:"Impossible d'enregistrer la carte",printBt:"Imprimer",clipboardFormat:"copier dans le presse-papier...",jpegFormat:"enregistrer un jpeg",pngFormat:"enregistrer un png",pdfFormat:"enregistrer un pdf",none:"aucune",small:"petites",large:"larges",cancel:"annuler"},de:{title:"Drucken",orientation:"Ausrichtung",portrait:"Hochformat",landscape:"Querformat",size:"Papierformat",custom:"Bildschirmgröße",margin:"Rand",scale:"Maßstab",legend:"Legende",north:"Nordpfeil",mapTitle:"Kartentitel",saveas:"Speichern als...",saveLegend:"Legende speichern...",copied:"✔ In die Zwischenablage kopiert",errorMsg:"Kann Karte nicht speichern...",printBt:"Drucken...",clipboardFormat:"in die Zwischenablage kopieren...",jpegFormat:"speichern als jpeg",pngFormat:"speichern als png",pdfFormat:"speichern als pdf",none:"kein",small:"klein",large:"groß",cancel:"abbrechen"},zh:{title:"打印",orientation:"方向",portrait:"纵向",landscape:"横向",size:"页面大小",custom:"屏幕大小",margin:"外边距",scale:"尺度",legend:"图例",north:"指北针",mapTitle:"地图名字",saveas:"保存为...",saveLegend:"保存图例为...",copied:"✔ 已复制到剪贴板",errorMsg:"无法保存地图...",printBt:"打印...",cancel:"取消"},it:{title:"Stampa",orientation:"Orientamento",portrait:"Verticale",landscape:"Orizzontale",size:"Formato pagina",custom:"Dimensione schermo",margin:"Margini",scale:"Scala",legend:"Legenda",north:"Freccia nord",mapTitle:"Titolo della mappa",saveas:"Salva con nome...",saveLegend:"Salva legenda...",copied:"✔ Copiato negli appunti",errorMsg:"Impossibile salvare la mappa",printBt:"Stampa",clipboardFormat:"Copia negli appunti...",jpegFormat:"salva come jpeg",pngFormat:"salva come png",pdfFormat:"salva come pdf",none:"nessuno",small:"piccolo",large:"grande",cancel:"annulla"}},Ko.prototype.paperSize={"":null,A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],"US Letter":[215.9,279.4],A5:[148,210],B4:[257,364],B5:[182,257]},Ko.prototype.marginSize={none:0,small:5,large:10},Ko.prototype.formats=[{title:"clipboardFormat",imageType:"image/png",clipboard:!0},{title:"jpegFormat",imageType:"image/jpeg",quality:.8},{title:"pngFormat",imageType:"image/png",quality:.8},{title:"pdfFormat",imageType:"image/jpeg",pdf:!0}],Ko.prototype.scales={" 5000":"1/5.000"," 10000":"1/10.000"," 25000":"1/25.000"," 50000":"1/50.000"," 100000":"1/100.000"," 250000":"1/250.000"," 1000000":"1/1.000.000"};const cE=Object.prototype.toString;function s0(t,e){return cE.call(t)===`[object ${e}]`}const hE=t=>t!=null&&t!==null&&s0(t,"Object");function $1(t){return s0(t,"Number")}function eu(t){return s0(t,"String")}function X2(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)}function Qn(){let t=[];const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var i=0;i<36;i++){const r=Math.floor(16*Math.random());t[i]=e.substring(r,r+1)}t[14]="4";const n=3&Number(t[19])|8;return t[19]=e.substring(n,n+1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function dE(){const t=window.document;var e=document.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.webkitExitFullscreen;if(e)e.call(document);else if(typeof window.ActiveXObject<"u"){var i=new window.ActiveXObject("WScript.Shell");i!==null&&i.SendKeys("{F11}")}}function G1(t=window.document.documentElement){let e=t;var i=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(i)i.call(e);else if(typeof window.ActiveXObject<"u"){var n=new window.ActiveXObject("WScript.Shell");n!==null&&n.SendKeys("{F11}")}}function Z2(){const t=new Event("resize");window.dispatchEvent(t)}function id(t={},e={}){let i;for(i in e)t[i]=hE(t[i])?id(t[i],e[i]):t[i]=e[i];return t}function pE(t,e,i){let n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n}function H1(t,e){const i=window.URL||window.webkitURL||window,n=new Blob([t]),r=document.createElement("a");r.href=i.createObjectURL(n),r.download=e,r.click(),i.revokeObjectURL(r.href)}class fE{map;printDialogControl=void 0;printControl=void 0;constructor(e){this.map=e}get PrintDialogControl(){return this.printDialogControl}addPrintDialogControl(e={}){this.removePrintDialogControl();let i={copy:!1,pdf:!1};return i=id(i,e),this.printDialogControl=new Ko(i),this.map.addControl(this.printDialogControl),this.printDialogControl.setSize("A4"),this.printDialogControl.on(["print","error"],function(n){n.image&&n.canvas.toBlob(function(r){H1(r,"map."+n.imageType.replace("image/",""))},n.imageType,n.quality)}),this.printDialogControl}removePrintDialogControl(){this.printDialogControl&&(this.map.removeControl(this.printDialogControl),this.printDialogControl=void 0)}addPrintControl(){return this.printControl=new K2,this.printControl&&this.map.addControl(this.printControl),this.printControl.on(["print","error"],function(e){e.image&&e.canvas.toBlob(function(i){H1(i,"map.png")},"image/png")}),this.printControl}removePrintControl(){this.printControl&&(this.map.removeControl(this.printControl),this.printControl=void 0)}dispose(){this.removePrintDialogControl(),this.removePrintControl()}}class gE{xmap;map;mapEventBus;target;swipeLayerIndex=0;MapLayers=new Map;LayerItemList=new Array;constructor(e,i){this.xmap=e;const n=e.map;n&&(this.map=n,this.mapEventBus=Zh,this.initEventListener()),this.target=i}get SwipeLayerIndex(){return this.swipeLayerIndex}get Layers(){return this.MapLayers}changeSwipeLayerByID(e){if(this.MapLayers.has(e)){const i=this.MapLayers.keys(),n=Array.from(i).findIndex(r=>r===e);n>=0&&(this.swipeLayerIndex=n)}}changeSwipeLayerIndex(e){e<this.MapLayers.size&&e>=0&&(this.swipeLayerIndex=e)}initEventListener(){this.mapEventBus.eventOn(Lt.LAYER_OPACITY_CHANGED,this.layerOpacityHandler.bind(this)),this.mapEventBus.eventOn(Lt.LAYER_VISIBLE_CHANGED,this.layerVisibleHandler.bind(this)),this.mapEventBus.eventOn(Lt.LAYER_LOCATE,this.layerLocateHandler.bind(this)),this.mapEventBus.eventOn(Lt.LAYER_ORDER_CHANGED,this.layerOrderHandler.bind(this)),this.mapEventBus.eventOn(Lt.LAYER_REMOVED,this.removeLayer.bind(this)),this.mapEventBus.eventOn(Lt.LAYER_COPY,this.copyLayer.bind(this)),this.mapEventBus.eventOn(Lt.LAYER_SWIPE_CHANGED,this.changeSwipeLayerID.bind(this))}removeLayer(e){if(e.mapID!=this.target)return;const{id:i}=e.data;if(this.MapLayers.has(i)){const n=this.MapLayers.get(i);n&&(this.map.removeLayer(n),this.MapLayers.delete(i),this.deleteLayerItem(i))}}copyLayer(e){if(e.mapID!=this.target)return;const{id:i,newid:n,ids:r}=e.data;if(this.MapLayers.has(i)){const o=this.MapLayers.get(i);if(o){const s={...o};for(let a of this.MapLayers.values())this.map.removeLayer(a);s.set("lyrID",n),this.MapLayers.set(n,s),r.forEach(a=>{const l=this.MapLayers.get(a);this.map.addLayer(l)})}}}changeSwipeLayerID(e){if(e.mapID!=this.target)return;const{id:i}=e.data;if(this.MapLayers.has(i)){const n=this.setSwipeLayerItem(i);n>=0&&(this.swipeLayerIndex=n)}}layerVisibleHandler(e){if(e.mapID!=this.target)return;const{id:i,visible:n}=e.data;if(this.MapLayers.has(i)){const r=this.MapLayers.get(i);r&&r.setVisible(n),this.changeLayerItemVisible(i,n)}}layerOpacityHandler(e){if(e.mapID!=this.target)return;const{id:i,opacity:n}=e.data;if(this.MapLayers.has(i)){const r=this.MapLayers.get(i);r&&r.setOpacity(n),this.changeLayerItemOpacity(i,n)}}layerOrderHandler(e){if(e.mapID===this.target){const{layerID:i,updown:n}=e.data;if(this.MapLayers.has(i)){const r=this.changeLayerItemOrder(i,n);if(r){const{id:o,index:s,newindex:a}=r;this.xmap.changeLayerOrder(s,a)}}}}layerLocateHandler(e){const i=this.MapLayers.get(e);if(i){const n=i.getSource()?.getProjection(),r=i.get("bounds");if(r)this.xmap.zoomToExtent(r);else{const o=i.get("center");if(o){let s=i.get("level");const a=[o[0],o[1]];o.length===3&&(s=o[2]),this.xmap.zoomToCenter(a,s)}else this.xmap.zoomTo(i.getExtent(),n)}}}hasLayer(e){return this.MapLayers.has(e)}getLayer(e){if(this.MapLayers.has(e))return this.MapLayers.get(e)}changeLayerOpacity(e,i=1){const n=this.getLayer(e);n&&(n.setOpacity(i),this.mapEventBus.eventEmit(Lt.LAYER_CHANGED,this.newEvtArgs()))}changeLayerVisible(e,i=!0){const n=this.getLayer(e);n&&(n.setVisible(i),this.changeLayerItemVisible(e,i),this.mapEventBus.eventEmit(Lt.LAYER_CHANGED,this.newEvtArgs()))}deleteLayerByID(e){const i=this.getLayer(e);return!!i&&(this.map.removeLayer(i),this.MapLayers.delete(e),this.deleteLayerItem(e),!0)}deleteLayerByIndex(e){const i=this.map.getLayers()[e];if(i){let n;for(let r of this.MapLayers)if(r[1]===i){n=r[0];break}n&&(this.MapLayers.delete(n),this.deleteLayerItem(n)),this.map.removeLayer(i)}}deleteLayer(e){if(e){let i;for(let n of this.MapLayers)if(n[1]===e){i=n[0];break}i&&(this.MapLayers.delete(i),this.deleteLayerItem(i)),this.map.removeLayer(e)}}clearLayers(){this.MapLayers.forEach((e,i)=>{this.map.removeLayer(e)}),this.MapLayers.clear(),this.LayerItemList.length=0,this.mapEventBus.eventEmit(Lt.LAYER_CHANGED,this.newEvtArgs())}newEvtArgs(e,i=null){const n=new n0(this.target,"map");return n.data=e,n.target=i,n}registerLayer(e,i){return!this.MapLayers.has(i.id)&&(this.MapLayers.set(i.id,e),i&&(this.LayerItemList.push(i),this.mapEventBus.eventEmit(Lt.LAYER_CHANGED,this.newEvtArgs())),!0)}deleteLayerItem(e){let i=!1;if(this.LayerItemList){let r=-1;const o=this.LayerItemList.length;for(var n=0;n<o;n++)if(this.LayerItemList[n].id===e){r=n;break}r!=-1&&(this.LayerItemList.splice(r,1),i=!0,this.mapEventBus.eventEmit(Lt.LAYER_CHANGED,this.newEvtArgs()))}return i}changeLayerItemVisible(e,i){if(this.LayerItemList){const r=this.LayerItemList.length;for(var n=0;n<r;n++){let o=this.LayerItemList[n];if(o.id===e){o.visible=i;break}}}}changeLayerItemOpacity(e,i){if(this.LayerItemList){const r=this.LayerItemList.length;for(var n=0;n<r;n++){let o=this.LayerItemList[n];if(o.id===e){o.opacity=i;break}}}}changeLayerItemOrder(e,i){if(this.LayerItemList){let r=-1;const o=this.LayerItemList.length;let s;for(var n=0;n<o;n++)if(s=this.LayerItemList[n],s.id===e){r=n;break}if(r>=0){const a=r-i;return a<0||a>=o?void 0:(this.LayerItemList.splice(r,1),this.LayerItemList.splice(a,0,s),this.mapEventBus.eventEmit(Lt.LAYER_CHANGED,this.newEvtArgs()),{id:e,index:r,newindex:a})}}}setSwipeLayerItem(e){let i=-1;if(!e)return i;if(this.LayerItemList){const r=this.LayerItemList.length;let o;for(var n=0;n<r;n++)if(o=this.LayerItemList[n],o.id===e){i=n;break}}return i}}var U1=6378137,W1=.0066943799901413165,tu=484813681109536e-20,be=Math.PI/2,Oe=1e-10,Si=.017453292519943295,ao=57.29577951308232,Tt=Math.PI/4,Mu=2*Math.PI,si=3.14159265359,mE={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},vE={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},Y1=/[\s_\-\/\(\)]/g;function lo(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),r=e.toLowerCase().replace(Y1,""),o=-1;++o<n.length;)if((i=n[o]).toLowerCase().replace(Y1,"")===r)return t[i]}function _m(t){var e,i,n,r={},o=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),s={proj:"projName",datum:"datumCode",rf:function(a){r.rf=parseFloat(a)},lat_0:function(a){r.lat0=a*Si},lat_1:function(a){r.lat1=a*Si},lat_2:function(a){r.lat2=a*Si},lat_ts:function(a){r.lat_ts=a*Si},lon_0:function(a){r.long0=a*Si},lon_1:function(a){r.long1=a*Si},lon_2:function(a){r.long2=a*Si},alpha:function(a){r.alpha=parseFloat(a)*Si},gamma:function(a){r.rectified_grid_angle=parseFloat(a)},lonc:function(a){r.longc=a*Si},x_0:function(a){r.x0=parseFloat(a)},y_0:function(a){r.y0=parseFloat(a)},k_0:function(a){r.k0=parseFloat(a)},k:function(a){r.k0=parseFloat(a)},a:function(a){r.a=parseFloat(a)},b:function(a){r.b=parseFloat(a)},r:function(a){r.a=r.b=parseFloat(a)},r_a:function(){r.R_A=!0},zone:function(a){r.zone=parseInt(a,10)},south:function(){r.utmSouth=!0},towgs84:function(a){r.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){r.to_meter=parseFloat(a)},units:function(a){r.units=a;var l=lo(vE,a);l&&(r.to_meter=l.to_meter)},from_greenwich:function(a){r.from_greenwich=a*Si},pm:function(a){var l=lo(mE,a);r.from_greenwich=(l||parseFloat(a))*Si},nadgrids:function(a){a==="@null"?r.datumCode="none":r.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(r.axis=a)},approx:function(){r.approx=!0}};for(e in o)i=o[e],e in s?typeof(n=s[e])=="function"?n(i):r[n]=i:r[e]=i;return typeof r.datumCode=="string"&&r.datumCode!=="WGS84"&&(r.datumCode=r.datumCode.toLowerCase()),r}var yE=/\s/,_E=/[A-Za-z]/,bE=/[A-Za-z84_]/,Ec=/[,\]]/,K1=/[\d\.E\-\+]/;function Cr(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Wp(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce(function(o,s){return ca(s,o),o},n);e&&(t[e]=r)}function ca(t,e){if(Array.isArray(t)){var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1)return Array.isArray(t[0])?(e[i]={},void ca(t[0],e[i])):void(e[i]=t[0]);if(t.length)if(i!=="TOWGS84"){if(i==="AXIS")return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(t.length===3&&ca(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(t.length===4&&ca(t[3],e[i]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void Wp(e,i,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],Wp(e,i,t),void(e[i].type=i);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return ca(t,e[i]);return Wp(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}Cr.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==4)for(;yE.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Cr.prototype.afterquote=function(t){if(t==='"')return this.word+='"',void(this.state=4);if(Ec.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)},Cr.prototype.afterItem=function(t){return t===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):t==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Cr.prototype.number=function(t){if(!K1.test(t)){if(Ec.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)}this.word+=t},Cr.prototype.quoted=function(t){t!=='"'?this.word+=t:this.state=5},Cr.prototype.keyword=function(t){if(bE.test(t))this.word+=t;else{if(t==="["){var e=[];return e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Ec.test(t))throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Cr.prototype.neutral=function(t){if(_E.test(t))return this.word=t,void(this.state=2);if(t==='"')return this.word="",void(this.state=4);if(K1.test(t))return this.word=t,void(this.state=3);if(!Ec.test(t))throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Cr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===-1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var xE=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Yn(t){return .017453292519943295*t}function Q2(t){for(var e=Object.keys(t),i=0,n=e.length;i<n;++i){var r=e[i];xE.indexOf(r)!==-1&&wE(t[r]),typeof t[r]=="object"&&Q2(t[r])}}function wE(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var i="",n=0,r=t.AXIS.length;n<r;++n){var o=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?i+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?i+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?i+="e":o[0].indexOf("west")===-1&&(o[0]!=="x"&&o[0]!=="lon"||o[1]!=="west")||(i+="w")}i.length===2&&(i+="u"),i.length===3&&(t.axis=i)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function a(l){return l*(t.to_meter||1)}t.type==="GEOGCS"&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),t.datumCode!=="wgs_1984"&&t.datumCode!=="world_geodetic_system_1984"||(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Yn],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Yn],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Yn],["lat0","latitude_of_origin",Yn],["lat0","standard_parallel_1",Yn],["lat1","standard_parallel_1",Yn],["lat2","standard_parallel_2",Yn],["azimuth","Azimuth"],["alpha","azimuth",Yn],["srsCode","name"]].forEach(function(l){return function(u,c){var h=c[0],d=c[1];!(h in u)&&d in u&&(u[h]=u[d],c.length===3&&(u[h]=c[2](u[h])))}(t,l)}),t.long0||!t.longc||t.projName!=="Albers_Conic_Equal_Area"&&t.projName!=="Lambert_Azimuthal_Equal_Area"||(t.long0=t.longc),t.lat_ts||!t.lat1||t.projName!=="Stereographic_South_Pole"&&t.projName!=="Polar Stereographic (variant B)"?!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Yn(t.lat0>0?90:-90)):(t.lat0=Yn(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function J2(t){var e=new Cr(t).output(),i=e[0],n={};return ca(e,n),Q2(n),n[i]}function Ii(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Ii[t]=_m(arguments[1]):Ii[t]=J2(arguments[1]):Ii[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(n){Array.isArray(n)?Ii.apply(e,n):Ii(n)});if(typeof t=="string"){if(t in Ii)return Ii[t]}else"EPSG"in t?Ii["EPSG:"+t.EPSG]=t:"ESRI"in t?Ii["ESRI:"+t.ESRI]=t:"IAU2000"in t&&(Ii["IAU2000:"+t.IAU2000]=t);return}}(function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]})(Ii);var SE=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],CE=["3857","900913","3785","102113"];function ME(t){if(!function(n){return typeof n=="string"}(t))return t;if(function(n){return n in Ii}(t))return Ii[t];if(function(n){return SE.some(function(r){return n.indexOf(r)>-1})}(t)){var e=J2(t);if(function(n){var r=lo(n,"authority");if(r){var o=lo(r,"epsg");return o&&CE.indexOf(o)>-1}}(e))return Ii["EPSG:3857"];var i=function(n){var r=lo(n,"extension");if(r)return lo(r,"proj4")}(e);return i?_m(i):e}return function(n){return n[0]==="+"}(t)?_m(t):void 0}function X1(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)(i=e[n])!==void 0&&(t[n]=i);return t}function gr(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function Qu(t){return t<0?-1:1}function ze(t){return Math.abs(t)<=si?t:t-Qu(t)*Mu}function Dn(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(be-e))/n}function ku(t,e){for(var i,n,r=.5*t,o=be-2*Math.atan(e),s=0;s<=15;s++)if(i=t*Math.sin(o),o+=n=be-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-o,Math.abs(n)<=1e-10)return o;return-9999}var kE={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=gr(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,r=t.y;if(r*ao>90&&r*ao<-90&&n*ao>180&&n*ao<-180||Math.abs(Math.abs(r)-be)<=Oe)return null;if(this.sphere)e=this.x0+this.a*this.k0*ze(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(Tt+.5*r));else{var o=Math.sin(r),s=Dn(this.e,r,o);e=this.x0+this.a*this.k0*ze(n-this.long0),i=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=be-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if((i=ku(this.e,o))===-9999)return null}return e=ze(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function Z1(t){return t}var TE=[kE,{init:function(){},forward:Z1,inverse:Z1,names:["longlat","identity"]}],gh={},nd=[];function Q1(t,e){var i=nd.length;return t.names?(nd[i]=t,t.names.forEach(function(n){gh[n.toLowerCase()]=i}),this):!0}var EE={start:function(){TE.forEach(Q1)},add:Q1,get:function(t){if(!t)return!1;var e=t.toLowerCase();return gh[e]!==void 0&&nd[gh[e]]?nd[gh[e]]:void 0}},a0={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},LE=a0.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};a0.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var mh={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var PE in mh){var J1=mh[PE];mh[J1.datumName]=J1}var eS={};function IE(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:eS[t]||null,isNull:!1}}function ha(t){return t/3600*Math.PI/180}function bm(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function RE(t){return t.map(function(e){return[ha(e.longitudeShift),ha(e.latitudeShift)]})}function qE(t,e,i){return{name:bm(t,e+8,e+16).trim(),parent:bm(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function AE(t,e,i,n){for(var r=e+176,o=[],s=0;s<i.gridNodeCount;s++){var a={latitudeShift:t.getFloat32(r+16*s,n),longitudeShift:t.getFloat32(r+16*s+4,n),latitudeAccuracy:t.getFloat32(r+16*s+8,n),longitudeAccuracy:t.getFloat32(r+16*s+12,n)};o.push(a)}return o}function lr(t,e){if(!(this instanceof lr))return new lr(t);e=e||function(u){if(u)throw u};var i=ME(t);if(typeof i=="object"){var n=lr.projections.get(i.projName);if(n){if(i.datumCode&&i.datumCode!=="none"){var r=lo(mh,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var o=function(u,c,h,d,p){if(!u){var f=lo(a0,d);f||(f=LE),u=f.a,c=f.b,h=f.rf}return h&&!c&&(c=(1-1/h)*u),(h===0||Math.abs(u-c)<Oe)&&(p=!0,c=u),{a:u,b:c,rf:h,sphere:p}}(i.a,i.b,i.rf,i.ellps,i.sphere),s=function(u,c,h,d){var p=u*u,f=c*c,g=(p-f)/p,_=0;return d?(p=(u*=1-g*(.16666666666666666+g*(.04722222222222222+.022156084656084655*g)))*u,g=0):_=Math.sqrt(g),{es:g,e:_,ep2:(p-f)/f}}(o.a,o.b,o.rf,i.R_A),a=function(u){return u===void 0?null:u.split(",").map(IE)}(i.nadgrids),l=i.datum||function(u,c,h,d,p,f,g){var _={};return _.datum_type=u===void 0||u==="none"?5:4,c&&(_.datum_params=c.map(parseFloat),_.datum_params[0]===0&&_.datum_params[1]===0&&_.datum_params[2]===0||(_.datum_type=1),_.datum_params.length>3&&(_.datum_params[3]===0&&_.datum_params[4]===0&&_.datum_params[5]===0&&_.datum_params[6]===0||(_.datum_type=2,_.datum_params[3]*=tu,_.datum_params[4]*=tu,_.datum_params[5]*=tu,_.datum_params[6]=_.datum_params[6]/1e6+1))),g&&(_.datum_type=3,_.grids=g),_.a=h,_.b=d,_.es=p,_.ep2=f,_}(i.datumCode,i.datum_params,o.a,o.b,s.es,s.ep2,a);X1(this,i),X1(this,n),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}function tS(t,e,i){var n,r,o,s,a=t.x,l=t.y,u=t.z?t.z:0;if(l<-be&&l>-1.001*be)l=-be;else if(l>be&&l<1.001*be)l=be;else{if(l<-be)return{x:-1/0,y:-1/0,z:t.z};if(l>be)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(l),s=Math.cos(l),o=r*r,{x:((n=i/Math.sqrt(1-e*o))+u)*s*Math.cos(a),y:(n+u)*s*Math.sin(a),z:(n*(1-e)+u)*r}}function iS(t,e,i,n){var r,o,s,a,l,u,c,h,d,p,f,g,_,v,b,m=1e-12,y=t.x,x=t.y,C=t.z?t.z:0;if(r=Math.sqrt(y*y+x*x),o=Math.sqrt(y*y+x*x+C*C),r/i<m){if(v=0,o/i<m)return b=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(x,y);s=C/o,h=(a=r/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),d=s*l,_=0;do _++,u=e*(c=i/Math.sqrt(1-e*d*d))/(c+(b=r*h+C*d-c*(1-e*d*d))),g=(f=s*(l=1/Math.sqrt(1-u*(2-u)*a*a)))*h-(p=a*(1-u)*l)*d,h=p,d=f;while(g*g>1e-24&&_<30);return{x:v,y:Math.atan(f/Math.abs(p)),z:b}}function Lc(t){return t===1||t===2}function FE(t,e,i){if(function(l,u){return l.datum_type===u.datum_type&&!(l.a!==u.a||Math.abs(l.es-u.es)>5e-11)&&(l.datum_type===1?l.datum_params[0]===u.datum_params[0]&&l.datum_params[1]===u.datum_params[1]&&l.datum_params[2]===u.datum_params[2]:l.datum_type!==2||l.datum_params[0]===u.datum_params[0]&&l.datum_params[1]===u.datum_params[1]&&l.datum_params[2]===u.datum_params[2]&&l.datum_params[3]===u.datum_params[3]&&l.datum_params[4]===u.datum_params[4]&&l.datum_params[5]===u.datum_params[5]&&l.datum_params[6]===u.datum_params[6])}(t,e)||t.datum_type===5||e.datum_type===5)return i;var n=t.a,r=t.es;if(t.datum_type===3){if(e_(t,!1,i)!==0)return;n=U1,r=W1}var o=e.a,s=e.b,a=e.es;if(e.datum_type===3&&(o=U1,s=6356752314e-3,a=W1),r===a&&n===o&&!Lc(t.datum_type)&&!Lc(e.datum_type)||(i=tS(i,r,n),Lc(t.datum_type)&&(i=function(l,u,c){if(u===1)return{x:l.x+c[0],y:l.y+c[1],z:l.z+c[2]};if(u===2){var h=c[0],d=c[1],p=c[2],f=c[3],g=c[4],_=c[5],v=c[6];return{x:v*(l.x-_*l.y+g*l.z)+h,y:v*(_*l.x+l.y-f*l.z)+d,z:v*(-g*l.x+f*l.y+l.z)+p}}}(i,t.datum_type,t.datum_params)),Lc(e.datum_type)&&(i=function(l,u,c){if(u===1)return{x:l.x-c[0],y:l.y-c[1],z:l.z-c[2]};if(u===2){var h=c[0],d=c[1],p=c[2],f=c[3],g=c[4],_=c[5],v=c[6],b=(l.x-h)/v,m=(l.y-d)/v,y=(l.z-p)/v;return{x:b+_*m-g*y,y:-_*b+m+f*y,z:g*b-f*m+y}}}(i,e.datum_type,e.datum_params)),i=iS(i,a,o,s),!(e.datum_type===3&&e_(e,!0,i)!==0)))return i}function e_(t,e,i){if(t.grids===null||t.grids.length===0)return-1;var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},o=[];e:for(var s=0;s<t.grids.length;s++){var a=t.grids[s];if(o.push(a.name),a.isNull){r=n;break}if(a.mandatory,a.grid!==null)for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,p=h.ll[0]-d,f=h.ll[1]-d,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,_=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(f>n.y||p>n.x||_<n.y||g<n.x)&&(r=OE(n,e,h),!isNaN(r.x)))break e}else if(a.mandatory)return-1}return isNaN(r.x)?-1:(i.x=-r.x,i.y=r.y,0)}function OE(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=ze(r.x-Math.PI)+Math.PI;var o=t_(r,i);if(e){if(isNaN(o.x))return n;o.x=r.x-o.x,o.y=r.y-o.y;var s,a,l=9;do{if(a=t_(o,i),isNaN(a.x))break;s={x:r.x-(a.x+o.x),y:r.y-(a.y+o.y)},o.x+=s.x,o.y+=s.y}while(l--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(l<0)return n;n.x=ze(o.x+i.ll[0]),n.y=o.y+i.ll[1]}else isNaN(o.x)||(n.x=t.x+o.x,n.y=t.y+o.y);return n}function t_(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(n.x),o=Math.floor(n.y),s=n.x-1*r,a=n.y-1*o,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0]||o<0||o>=e.lim[1])return l;i=o*e.lim[0]+r;var u=e.cvs[i][0],c=e.cvs[i][1];i++;var h=e.cvs[i][0],d=e.cvs[i][1];i+=e.lim[0];var p=e.cvs[i][0],f=e.cvs[i][1];i--;var g=e.cvs[i][0],_=e.cvs[i][1],v=s*a,b=s*(1-a),m=(1-s)*(1-a),y=(1-s)*a;return l.x=m*u+b*h+y*g+v*p,l.y=m*c+b*d+y*_+v*f,l}function i_(t,e,i){var n,r,o,s=i.x,a=i.y,l=i.z||0,u={};for(o=0;o<3;o++)if(!e||o!==2||i.z!==void 0)switch(o===0?(n=s,r="ew".indexOf(t.axis[o])!==-1?"x":"y"):o===1?(n=a,r="ns".indexOf(t.axis[o])!==-1?"y":"x"):(n=l,r="z"),t.axis[o]){case"e":case"n":u[r]=n;break;case"w":case"s":u[r]=-n;break;case"u":i[r]!==void 0&&(u.z=n);break;case"d":i[r]!==void 0&&(u.z=-n);break;default:return null}return u}function nS(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function n_(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function rd(t,e,i,n){var r,o=(i=Array.isArray(i)?nS(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z!==void 0;if(function(s){n_(s.x),n_(s.y)}(i),t.datum&&e.datum&&function(s,a){return(s.datum.datum_type===1||s.datum.datum_type===2||s.datum.datum_type===3)&&a.datumCode!=="WGS84"||(a.datum.datum_type===1||a.datum.datum_type===2||a.datum.datum_type===3)&&s.datumCode!=="WGS84"}(t,e)&&(i=rd(t,r=new lr("WGS84"),i,n),t=r),n&&t.axis!=="enu"&&(i=i_(t,!1,i)),t.projName==="longlat")i={x:i.x*Si,y:i.y*Si,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=FE(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*ao,y:i.y*ao,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&e.axis!=="enu"?i_(e,!0,i):(i&&!o&&delete i.z,i)}lr.projections=EE,lr.projections.start();var r_=lr("WGS84");function Yp(t,e,i,n){var r,o,s;return Array.isArray(i)?(r=rd(t,e,i,n)||{x:NaN,y:NaN},i.length>2?t.name!==void 0&&t.name==="geocent"||e.name!==void 0&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(i.slice(3)):[r.x,r.y,i[2]].concat(i.slice(3)):[r.x,r.y].concat(i.slice(2)):[r.x,r.y]):(o=rd(t,e,i,n),(s=Object.keys(i)).length===2||s.forEach(function(a){if(t.name!==void 0&&t.name==="geocent"||e.name!==void 0&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;o[a]=i[a]}),o)}function o_(t){return t instanceof lr?t:t.oProj?t.oProj:lr(t)}function Bi(t,e,i){t=o_(t);var n,r=!1;return e===void 0?(e=t,t=r_,r=!0):(e.x!==void 0||Array.isArray(e))&&(i=e,e=t,t=r_,r=!0),e=o_(e),i?Yp(t,e,i):(n={forward:function(o,s){return Yp(t,e,o,s)},inverse:function(o,s){return Yp(e,t,o,s)}},r&&(n.oProj=e),n)}var rS="AJSAJS",oS="AFAFAF",da=65,ji=73,dn=79,Vl=86,$l=90,zE={forward:sS,inverse:function(t){var e=l0(uS(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:aS};function sS(t,e){return e=e||5,function(i,n){var r="00000"+i.easting,o="00000"+i.northing;return i.zoneNumber+i.zoneLetter+(g=i.easting,_=i.northing,v=i.zoneNumber,b=lS(v),m=Math.floor(g/1e5),y=Math.floor(_/1e5)%20,s=m,a=y,l=b,u=l-1,c=rS.charCodeAt(u),h=oS.charCodeAt(u),d=c+s-1,p=h+a,f=!1,d>$l&&(d=d-$l+da-1,f=!0),(d===ji||c<ji&&d>ji||(d>ji||c<ji)&&f)&&d++,(d===dn||c<dn&&d>dn||(d>dn||c<dn)&&f)&&++d===ji&&d++,d>$l&&(d=d-$l+da-1),p>Vl?(p=p-Vl+da-1,f=!0):f=!1,(p===ji||h<ji&&p>ji||(p>ji||h<ji)&&f)&&p++,(p===dn||h<dn&&p>dn||(p>dn||h<dn)&&f)&&++p===ji&&p++,p>Vl&&(p=p-Vl+da-1),String.fromCharCode(d)+String.fromCharCode(p))+r.substr(r.length-5,n)+o.substr(o.length-5,n);var s,a,l,u,c,h,d,p,f,g,_,v,b,m,y}(function(i){var n,r,o,s,a,l,u,c,h=i.lat,d=i.lon,p=6378137,f=.00669438,g=.9996,_=Kp(h),v=Kp(d);c=Math.floor((d+180)/6)+1,d===180&&(c=60),h>=56&&h<64&&d>=3&&d<12&&(c=32),h>=72&&h<84&&(d>=0&&d<9?c=31:d>=9&&d<21?c=33:d>=21&&d<33?c=35:d>=33&&d<42&&(c=37)),u=Kp(6*(c-1)-180+3),n=f/(1-f),r=p/Math.sqrt(1-f*Math.sin(_)*Math.sin(_)),o=Math.tan(_)*Math.tan(_),s=n*Math.cos(_)*Math.cos(_),a=Math.cos(_)*(v-u),l=p*((1-f/4-3*f*f/64-5*f*f*f/256)*_-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*_)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*_)-35*f*f*f/3072*Math.sin(6*_));var b=g*r*(a+(1-o+s)*a*a*a/6+(5-18*o+o*o+72*s-58*n)*a*a*a*a*a/120)+5e5,m=g*(l+r*Math.tan(_)*(a*a/2+(5-o+9*s+4*s*s)*a*a*a*a/24+(61-58*o+o*o+600*s-330*n)*a*a*a*a*a*a/720));return h<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(b),zoneNumber:c,zoneLetter:DE(h)}}({lat:t[1],lon:t[0]}),e)}function aS(t){var e=l0(uS(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Kp(t){return t*(Math.PI/180)}function s_(t){return t/Math.PI*180}function l0(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,s,a,l,u,c,h,d,p,f=.9996,g=6378137,_=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),b=i-5e5,m=e;n<"N"&&(m-=1e7),h=6*(r-1)-180+3,o=.006739496752268451,p=(d=m/f/6367449145945056e-9)+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),s=g/Math.sqrt(1-_*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),u=.99330562*g/Math.pow(1-_*Math.sin(p)*Math.sin(p),1.5),c=b/(s*f);var y=p-s*Math.tan(p)/u*(c*c/2-(5+3*a+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*a+298*l+45*a*a-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);y=s_(y);var x,C=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*o+24*a*a)*c*c*c*c*c/120)/Math.cos(p);if(C=h+s_(C),t.accuracy){var k=l0({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:k.lat,right:k.lon,bottom:y,left:C}}else x={lat:y,lon:C};return x}function DE(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function lS(t){var e=t%6;return e===0&&(e=6),e}function uS(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var s=parseInt(r,10);if(o===0||o+3>i)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(o,o+=2);for(var l=lS(s),u=function(b,m){for(var y=rS.charCodeAt(m-1),x=1e5,C=!1;y!==b.charCodeAt(0);){if(++y===ji&&y++,y===dn&&y++,y>$l){if(C)throw"Bad character: "+b;y=da,C=!0}x+=1e5}return x}(n.charAt(0),l),c=function(b,m){if(b>"V")throw"MGRSPoint given invalid Northing "+b;for(var y=oS.charCodeAt(m-1),x=0,C=!1;y!==b.charCodeAt(0);){if(++y===ji&&y++,y===dn&&y++,y>Vl){if(C)throw"Bad character: "+b;y=da,C=!0}x+=1e5}return x}(n.charAt(1),l);c<NE(a);)c+=2e6;var h=i-o;if(h%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var d,p,f,g=h/2,_=0,v=0;return g>0&&(d=1e5/Math.pow(10,g),p=t.substring(o,o+g),_=parseFloat(p)*d,f=t.substring(o+g),v=parseFloat(f)*d),{easting:_+u,northing:v+c,zoneLetter:a,zoneNumber:s,accuracy:d}}function NE(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function va(t,e,i){if(!(this instanceof va))return new va(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&e===void 0){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0}va.fromMGRS=function(t){return new va(aS(t))},va.prototype.toMGRS=function(t){return sS([this.x,this.y],t)};var a_=.046875,l_=.01953125,u_=.01068115234375;function u0(t){var e=[];e[0]=1-t*(.25+t*(a_+t*(l_+t*u_))),e[1]=t*(.75-t*(a_+t*(l_+t*u_)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function Va(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function c0(t,e,i){for(var n=1/(1-e),r=t,o=20;o;--o){var s=Math.sin(r),a=1-e*s*s;if(r-=a=(Va(r,s,Math.cos(r),i)-t)*(a*Math.sqrt(a))*n,Math.abs(a)<Oe)return r}return r}var vh={init:function(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=u0(this.es),this.ml0=Va(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,r=t.x,o=t.y,s=ze(r-this.long0),a=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*s,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),p=Math.abs(l)>Oe?Math.tan(o):0,f=Math.pow(p,2),g=Math.pow(f,2);e=1-this.es*Math.pow(a,2),u/=Math.sqrt(e);var _=Va(o,a,l,this.en);i=this.a*(this.k0*u*(1+c/6*(1-f+h+c/20*(5-18*f+g+14*h-58*f*h+c/42*(61+179*g-g*f-479*f)))))+this.x0,n=this.a*(this.k0*(_-this.ml0+a*s*u/2*(1+c/12*(5-f+9*h+4*d+c/30*(61+g-58*f+270*h-330*f*h+c/56*(1385+543*g-g*f-3111*f))))))+this.y0}else{var v=l*Math.sin(s);if(Math.abs(Math.abs(v)-1)<Oe)return 93;if(i=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=l*Math.cos(s)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>Oe)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,r,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(i=c0(e=this.ml0+s/this.k0,this.es,this.en),Math.abs(i)<be){var a=Math.sin(i),l=Math.cos(i),u=Math.abs(l)>Oe?Math.tan(i):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),d=Math.pow(u,2),p=Math.pow(d,2);e=1-this.es*Math.pow(a,2);var f=o*Math.sqrt(e)/this.k0,g=Math.pow(f,2);n=i-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*h-g/30*(61+90*d-252*c*d+45*p+46*c-g/56*(1385+3633*d+4095*p+1574*p*d)))),r=ze(this.long0+f*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*p+8*c*d+6*c-g/42*(61+662*d+1320*p+720*p*d))))/l)}else n=be*Qu(s),r=0;else{var _=Math.exp(o/this.k0),v=.5*(_-1/_),b=this.lat0+s/this.k0,m=Math.cos(b);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(v,2))),n=Math.asin(e),s<0&&(n=-n),r=v===0&&m===0?0:ze(Math.atan2(v,m)+this.long0)}return t.x=r,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function cS(t){var e=Math.exp(t);return e=(e-1/e)/2}function Hi(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function BE(t){var e=Math.abs(t);return e=function(i){var n=1+i,r=n-1;return r===0?i:i*Math.log(n)/r}(e*(1+e/(Hi(1,e)+1))),t<0?-e:e}function Xp(t,e){for(var i,n=2*Math.cos(2*e),r=t.length-1,o=t[r],s=0;--r>=0;)i=n*o-s+t[r],s=o,o=i;return e+i*Math.sin(2*e)}function c_(t,e,i){for(var n,r,o=Math.sin(e),s=Math.cos(e),a=cS(i),l=function(_){var v=Math.exp(_);return(v+1/v)/2}(i),u=2*s*l,c=-2*o*a,h=t.length-1,d=t[h],p=0,f=0,g=0;--h>=0;)n=f,r=p,d=u*(f=d)-n-c*(p=g)+t[h],g=c*f-r+u*p;return[(u=o*l)*d-(c=s*a)*g,u*g+c*d]}var yh={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(vh.init.apply(this),this.forward=vh.forward,this.inverse=vh.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=Xp(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(r,o){for(var s,a=2*Math.cos(o),l=r.length-1,u=r[l],c=0;--l>=0;)s=a*u-c+r[l],c=u,u=s;return Math.sin(o)*s}(this.gtu,2*n))},forward:function(t){var e=ze(t.x-this.long0),i=t.y;i=Xp(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),o=Math.sin(e),s=Math.cos(e);i=Math.atan2(n,s*r),e=Math.atan2(o*r,Hi(n,r*s)),e=BE(Math.tan(e));var a,l,u=c_(this.gtu,2*i,2*e);return i+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=c_(this.utg,2*r,2*n);r+=o[0],n+=o[1],n=Math.atan(cS(n));var s=Math.sin(r),a=Math.cos(r),l=Math.sin(n),u=Math.cos(n);r=Math.atan2(s*u,Hi(l,u*a)),e=ze((n=Math.atan2(l,u*a))+this.long0),i=Xp(this.cgb,r)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},jE={init:function(){var t=function(e,i){if(e===void 0){if((e=Math.floor(30*(ze(i)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Si,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,yh.init.apply(this),this.forward=yh.forward,this.inverse=yh.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Zp(t,e){return Math.pow((1-t)/(1+t),e)}var Qp={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Tt)/(Math.pow(Math.tan(.5*this.lat0+Tt),this.C)*Zp(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Tt),this.C)*Zp(this.e*Math.sin(i),this.ratexp))-be,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+Tt)/this.K,1/this.C),r=20;r>0&&(i=2*Math.atan(n*Zp(this.e*Math.sin(t.y),-.5*this.e))-be,!(Math.abs(i-t.y)<1e-14));--r)t.y=i;return r?(t.x=e,t.y=i,t):null},names:["gauss"]},VE={init:function(){Qp.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,r;return t.x=ze(t.x-this.long0),Qp.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Hi(t.x,t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),i=Math.cos(s),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,Qp.inverse.apply(this,[t]),t.x=ze(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},$E={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Oe&&(this.k0=.5*(1+Qu(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Oe&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Oe&&Math.abs(Math.cos(this.lat_ts))>Oe&&(this.k0=.5*this.cons*gr(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Dn(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=gr(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-be,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,r,o,s,a=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=ze(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=Oe&&Math.abs(l+this.lat0)<=Oe?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(i=2*Math.atan(this.ssfn_(l,u,this.e))-be,r=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=Oe?(o=Dn(this.e,l*this.con,this.con*u),s=2*this.a*this.k0*o/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<Oe?(e=2*this.a*this.k0/(1+r*Math.cos(h)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*r*Math.cos(h))),t.y=e*(this.cosX0*n-this.sinX0*r*Math.cos(h))+this.y0),t.x=e*r*Math.sin(h)+this.x0,t))},inverse:function(t){var e,i,n,r,o;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,i=this.lat0,s<=Oe?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=Math.abs(this.coslat0)<Oe?this.lat0>0?ze(this.long0+Math.atan2(t.x,-1*t.y)):ze(this.long0+Math.atan2(t.x,t.y)):ze(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=Oe){if(s<=Oe)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=s*this.cons/(2*this.a*this.k0),i=this.con*ku(this.e,n),e=this.con*ze(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=Oe?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/s),e=ze(this.long0+Math.atan2(t.x*Math.sin(r),s*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*ku(this.e,Math.tan(.5*(be+o)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(be+t))*Math.pow((1-e)/(1+e),.5*i)}},GE={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),o=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+s/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t},names:["somerc"]},js=1e-7,HE={init:function(){var t,e,i,n,r,o,s,a,l,u,c,h=0,d=0,p=0,f=0,g=0,_=0,v=0;this.no_off=function(x){var C=typeof x.PROJECTION=="object"?Object.keys(x.PROJECTION)[0]:x.PROJECTION;return"no_uoff"in x||"no_off"in x||["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(C)!==-1}(this),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var m=!1;if("rectified_grid_angle"in this&&(m=!0),b&&(v=this.alpha),m&&(h=this.rectified_grid_angle*Si),b||m)d=this.longc;else if(p=this.long1,g=this.lat1,f=this.long2,_=this.lat2,Math.abs(g-_)<=js||(t=Math.abs(g))<=js||Math.abs(t-be)<=js||Math.abs(Math.abs(this.lat0)-be)<=js||Math.abs(Math.abs(_)-be)<=js)throw new Error;var y=1-this.es;e=Math.sqrt(y),Math.abs(this.lat0)>Oe?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/y),this.A=this.B*this.k0*e/t,(r=(n=this.B*e/(i*Math.sqrt(t)))*n-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(Dn(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),b||m?(b?(c=Math.asin(Math.sin(v)/n),m||(h=v)):(c=h,v=Math.asin(n*Math.sin(c))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(c))/this.B):(o=Math.pow(Dn(this.e,g,Math.sin(g)),this.B),s=Math.pow(Dn(this.e,_,Math.sin(_)),this.B),r=this.E/o,l=(s-o)/(s+o),u=((u=this.E*this.E)-s*o)/(u+s*o),(t=p-f)<-Math.pi?f-=Mu:t>Math.pi&&(f+=Mu),this.lam0=ze(.5*(p+f)-Math.atan(u*Math.tan(.5*this.B*(p-f))/l)/this.B),c=Math.atan(2*Math.sin(this.B*ze(p-this.lam0))/(r-1/r)),h=v=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Tt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Tt+r))},forward:function(t){var e,i,n,r,o,s,a,l,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-be)>Oe){if(e=.5*((o=this.E/Math.pow(Dn(this.e,t.y,Math.sin(t.y)),this.B))-(s=1/o)),i=.5*(o+s),r=Math.sin(this.B*t.x),n=(e*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(n)-1)<Oe)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),s=Math.cos(this.B*t.x),a=Math.abs(s)<js?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,s)}else l=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(u.x=a,u.y=l):(a-=this.u_0,u.x=l*this.cosrot+a*this.sinrot,u.y=a*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,i,n,r,o,s,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((n=Math.exp(-this.BrA*i))-1/n),o=.5*(n+1/n),a=((s=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(a)-1)<Oe)l.x=0,l.y=a<0?-be:be;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=ku(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},UE={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Oe)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=gr(this.e,e,i),r=Dn(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=gr(this.e,o,s),l=Dn(this.e,this.lat2,o),u=Dn(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Oe?this.ns=Math.log(n/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=Oe&&(i=Qu(i)*(be-2e-10));var n,r,o=Math.abs(Math.abs(i)-be);if(o>Oe)n=Dn(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(n,this.ns);else{if((o=i*this.ns)<=0)return null;r=0}var s=this.ns*ze(e-this.long0);return t.x=this.k0*(r*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(s))+this.y0,t},inverse:function(t){var e,i,n,r,o,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),i=1):(e=-Math.sqrt(s*s+a*a),i=-1);var l=0;if(e!==0&&(l=Math.atan2(i*s,i*a)),e!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),(r=ku(this.e,n))===-9999)return null}else r=-be;return o=ze(l/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},WE={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,r,o,s,a,l=t.x,u=t.y,c=ze(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),o=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,r,o,s,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,s=e,a=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,u+=1;while(a===0&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function Fi(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function Tu(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Eu(t){return .375*t*(1+.25*t*(1+.46875*t))}function Lu(t){return .05859375*t*t*(1+.75*t)}function Pu(t){return t*t*t*(35/3072)}function ya(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function Co(t){return Math.abs(t)<be?t:t-Qu(t)*Math.PI}function od(t,e,i,n,r){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-i*Math.sin(2*o)+n*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*i*Math.cos(2*o)+4*n*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}var YE={init:function(){this.sphere||(this.e0=Tu(this.es),this.e1=Eu(this.es),this.e2=Lu(this.es),this.e3=Pu(this.es),this.ml0=this.a*Fi(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,r=t.y;if(n=ze(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var o=Math.sin(r),s=Math.cos(r),a=ya(this.a,this.e,o),l=Math.tan(r)*Math.tan(r),u=n*Math.cos(r),c=u*u,h=this.es*s*s/(1-this.es);e=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),i=this.a*Fi(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*o/s*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(o))}else{var s=od(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-be)<=Oe)return t.x=this.long0,t.y=be,r<0&&(t.y*=-1),t;var a=ya(this.a,this.e,Math.sin(s)),l=a*a*a/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(s),2),c=n*this.a/a,h=c*c;e=s-a*Math.tan(s)/l*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-h*(u/3+(1+3*u)*u*h/15))/Math.cos(s)}return t.x=ze(i+this.long0),t.y=Co(e),t},names:["Cassini","Cassini_Soldner","cass"]};function uo(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}var KE=.3333333333333333,XE=.17222222222222222,ZE=.10257936507936508,QE=.06388888888888888,JE=.0664021164021164,e3=.016415012942191543,t3={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-be)<Oe?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Oe?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=uo(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(i){var n,r=[];return r[0]=i*KE,n=i*i,r[0]+=n*XE,r[1]=n*QE,n*=i,r[0]+=n*ZE,r[1]+=n*JE,r[2]=n*e3,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=uo(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,r,o,s,a,l,u,c,h=t.x,d=t.y;if(h=ze(h-this.long0),this.sphere){if(o=Math.sin(d),c=Math.cos(d),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n)<=Oe)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(h),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<Oe)return null;i=Tt-.5*d,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(h),i*=n}}else{switch(a=0,l=0,u=0,n=Math.cos(h),r=Math.sin(h),o=Math.sin(d),s=uo(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=be+d,s=this.qp-s;break;case this.S_POLE:u=d-be,s=this.qp+s}if(Math.abs(u)<Oe)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),i=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*a-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*a*this.ymf,e=this.xmf*u*l*r;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(u=Math.sqrt(s))*r,i=n*(this.mode===this.S_POLE?u:-u)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,o,s,a,l=t.x/this.a,u=t.y/this.a;if(this.sphere){var c,h=0,d=0;if((i=.5*(c=Math.sqrt(l*l+u*u)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=Oe?0:Math.asin(u*d/c),l*=d,u=h*c;break;case this.OBLIQ:i=Math.abs(c)<=Oe?this.lat0:Math.asin(h*this.sinph0+u*d*this.cosph0/c),l*=d*this.cosph0,u=(h-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:u=-u,i=be-i;break;case this.S_POLE:i-=be}e=u!==0||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(s=Math.sqrt(l*l+u*u))<Oe)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*s/this.rq),n=Math.cos(r),l*=r=Math.sin(r),this.mode===this.OBLIQ?(a=n*this.sinb1+u*r*this.cosb1/s,o=this.qp*a,u=s*this.cosb1*n-u*this.sinb1*r):(a=u*r/s,o=this.qp*a,u=s*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=l*l+u*u))return t.x=this.long0,t.y=this.lat0,t;a=1-o/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,u),i=function(p,f){var g=p+p;return p+f[0]*Math.sin(g)+f[1]*Math.sin(g+g)+f[2]*Math.sin(g+g+g)}(Math.asin(a),this.apa)}return t.x=ze(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Mo(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var i3={init:function(){Math.abs(this.lat1+this.lat2)<Oe||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=gr(this.e3,this.sin_po,this.cos_po),this.qs1=uo(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=gr(this.e3,this.sin_po,this.cos_po),this.qs2=uo(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=uo(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Oe?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=uo(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*ze(e-this.long0),s=r*Math.sin(o)+this.x0,a=this.rh-r*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,i,n,r,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,e!==0&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,i)),o=ze(r/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,r,o,s=Mo(.5*e);if(t<Oe)return s;for(var a=t*t,l=1;l<=25;l++)if(s+=o=.5*(r=1-(n=t*(i=Math.sin(s)))*n)*r/Math.cos(s)*(e/(1-a)-i/r+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return s;return null}},n3={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,r,o,s,a,l=t.x,u=t.y;return n=ze(l-this.long0),e=Math.sin(u),i=Math.cos(u),r=Math.cos(n),(o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=Oe?(s=this.x0+1*this.a*i*Math.sin(n)/o,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)/o):(s=this.x0+this.infinity_dist*i*Math.sin(n),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=s,t.y=a,t},inverse:function(t){var e,i,n,r,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),s=Mo((n=Math.cos(r))*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),o=ze(this.long0+o)):(s=this.phic0,o=0),t.x=o,t.y=s,t},names:["gnom"]},r3={init:function(){this.sphere||(this.k0=gr(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,r=t.y,o=ze(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var s=uo(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=ze(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(n,r){var o=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(r)-o)<1e-6)return r<0?-1*be:be;for(var s,a,l,u,c=Math.asin(.5*r),h=0;h<30;h++)if(a=Math.sin(c),l=Math.cos(c),u=n*a,c+=s=Math.pow(1-u*u,2)/(2*l)*(r/(1-n*n)-a/(1-u*u)+.5/n*Math.log((1-u)/(1+u))),Math.abs(s)<=1e-10)return c;return NaN}(this.e,2*t.y*this.k0/this.a),e=ze(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},o3={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=ze(e-this.long0),r=Co(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,i=t.y;return t.x=ze(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Co(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},s3={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Tu(this.es),this.e1=Eu(this.es),this.e2=Lu(this.es),this.e3=Pu(this.es),this.ml0=this.a*Fi(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,r=t.x,o=t.y,s=ze(r-this.long0);if(n=s*Math.sin(o),this.sphere)Math.abs(o)<=Oe?(e=this.a*s,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),i=this.a*(Co(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=Oe)e=this.a*s,i=-1*this.ml0;else{var a=ya(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(n),i=this.a*Fi(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,r,o,s,a,l,u;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Oe)e=ze(n/this.a+this.long0),i=0;else{var c;for(s=this.lat0+r/this.a,a=n*n/this.a/this.a+s*s,l=s,o=20;o;--o)if(l+=u=-1*(s*(l*(c=Math.tan(l))+1)-l-.5*(l*l+a)*c)/((l-s)/c-1),Math.abs(u)<=Oe){i=l;break}e=ze(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=Oe)i=0,e=ze(this.long0+n/this.a);else{var h,d,p,f,g;for(s=(this.ml0+r)/this.a,a=n*n/this.a/this.a+s*s,l=s,o=20;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*Fi(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(s*(h*(f=d/this.a)+1)-f-.5*h*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*h)+(s-f)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=Oe){i=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=ze(this.long0+Math.asin(n*h/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},a3={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,r=i-this.long0,o=n/tu*1e-5,s=r,a=1,l=0;for(e=1;e<=10;e++)a*=o,l+=this.A[e]*a;var u,c=l,h=s,d=1,p=0,f=0,g=0;for(e=1;e<=6;e++)u=p*c+d*h,d=d*c-p*h,p=u,f=f+this.B_re[e]*d-this.B_im[e]*p,g=g+this.B_im[e]*d+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=f*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,r=t.y,o=n-this.x0,s=(r-this.y0)/this.a,a=o/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)i=u*s+l*a,l=l*s-u*a,u=i,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var p,f=c,g=h,_=s,v=a;for(e=2;e<=6;e++)p=g*c+f*h,f=f*c-g*h,g=p,_+=(e-1)*(this.B_re[e]*f-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*f+this.B_re[e]*g);f=1,g=0;var b=this.B_re[1],m=this.B_im[1];for(e=2;e<=6;e++)p=g*c+f*h,f=f*c-g*h,g=p,b+=e*(this.B_re[e]*f-this.B_im[e]*g),m+=e*(this.B_im[e]*f+this.B_re[e]*g);var y=b*b+m*m;c=(_*b+v*m)/y,h=(v*b-_*m)/y}var x=c,C=h,k=1,P=0;for(e=1;e<=9;e++)k*=x,P+=this.D[e]*k;var A=this.lat0+P*tu*1e5,E=this.long0+C;return t.x=E,t.y=A,t},names:["New_Zealand_Map_Grid","nzmg"]},l3={init:function(){},forward:function(t){var e=t.x,i=t.y,n=ze(e-this.long0),r=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=ze(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},u3={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=u0(this.es)},forward:function(t){var e,i,n=t.x,r=t.y;if(n=ze(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),s=20;s;--s){var a=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<Oe)break}else r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var l=Math.sin(r),u=Math.cos(r);i=this.a*Va(r,l,u,this.en),e=this.a*n*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Mo((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Mo(Math.sin(e)/this.n)),i=ze(i+this.long0),e=Co(e)):(e=c0(t.y/this.a,this.es,this.en),(n=Math.abs(e))<be?(n=Math.sin(e),i=ze(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-Oe<be&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},c3={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=ze(e-this.long0),r=i,o=Math.PI*Math.sin(i);;){var s=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=s,Math.abs(s)<Oe)break}r/=2,Math.PI/2-Math.abs(i)<Oe&&(n=0);var a=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=l,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=ze(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t},names:["Mollweide","moll"]},h3={init:function(){Math.abs(this.lat1+this.lat2)<Oe||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Tu(this.es),this.e1=Eu(this.es),this.e2=Lu(this.es),this.e3=Pu(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=gr(this.e,this.sinphi,this.cosphi),this.ml1=Fi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Oe?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=gr(this.e,this.sinphi,this.cosphi),this.ml2=Fi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Fi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=Fi(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var o=this.ns*ze(i-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,i,n,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return i!==0&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=ze(this.long0+o/this.ns),n=Co(this.g-i/this.a),t.x=r,t.y=n,t):(n=od(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),r=ze(this.long0+o/this.ns),t.x=r,t.y=n,t)},names:["Equidistant_Conic","eqdc"]},d3={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,r=t.y,o=ze(n-this.long0);Math.abs(r)<=Oe&&(e=this.x0+this.R*o,i=this.y0);var s=Mo(2*Math.abs(r/Math.PI));(Math.abs(o)<=Oe||Math.abs(Math.abs(r)-be)<=Oe)&&(e=this.x0,i=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/o-o/Math.PI),l=a*a,u=Math.sin(s),c=Math.cos(s),h=c/(u+c-1),d=h*h,p=h*(2/u-1),f=p*p,g=Math.PI*this.R*(a*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);o<0&&(g=-g),e=this.x0+g;var _=l+h;return g=Math.PI*this.R*(p*_-a*Math.sqrt((f+l)*(l+1)-_*_))/(f+l),i=r>=0?this.y0+g:this.y0-g,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,r,o,s,a,l,u,c,h,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(n=t.x/h)*n+(r=t.y/h)*r,h=3*(r*r/(l=-2*(s=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(a=s-2*r*r+n*n)*a*a/l/l/l-9*s*a/l/l)/27)/(u=(s-a*a/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,i=t.y>=0?(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(n)<Oe?this.long0:ze(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-r*r)+o*o))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},p3={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,o,s,a,l,u,c,h,d,p,f,g,_,v,b,m,y,x,C,k=t.x,P=t.y,A=Math.sin(t.y),E=Math.cos(t.y),L=ze(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Oe?(t.x=this.x0+this.a*(be-P)*Math.sin(L),t.y=this.y0-this.a*(be-P)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=Oe?(t.x=this.x0+this.a*(be+P)*Math.sin(L),t.y=this.y0+this.a*(be+P)*Math.cos(L),t):(b=this.sin_p12*A+this.cos_p12*E*Math.cos(L),v=(_=Math.acos(b))?_/Math.sin(_):1,t.x=this.x0+this.a*v*E*Math.sin(L),t.y=this.y0+this.a*v*(this.cos_p12*A-this.sin_p12*E*Math.cos(L)),t):(e=Tu(this.es),i=Eu(this.es),n=Lu(this.es),r=Pu(this.es),Math.abs(this.sin_p12-1)<=Oe?(o=this.a*Fi(e,i,n,r,be),s=this.a*Fi(e,i,n,r,P),t.x=this.x0+(o-s)*Math.sin(L),t.y=this.y0-(o-s)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=Oe?(o=this.a*Fi(e,i,n,r,be),s=this.a*Fi(e,i,n,r,P),t.x=this.x0+(o+s)*Math.sin(L),t.y=this.y0+(o+s)*Math.cos(L),t):(a=A/E,l=ya(this.a,this.e,this.sin_p12),u=ya(this.a,this.e,A),c=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(u*E)),m=(h=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(L)))===0?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=Oe?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(L)*Math.cos(c)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),_=l*m*(1-(y=m*m)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(x=y*m)/8*(f=d*p)*(1-2*g)+(C=x*m)/120*(g*(4-7*g)-3*d*d*(1-7*g))-C*m/48*f),t.x=this.x0+_*Math.sin(h),t.y=this.y0+_*Math.cos(h),t))},inverse:function(t){var e,i,n,r,o,s,a,l,u,c,h,d,p,f,g,_,v,b,m,y,x,C,k;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y))>2*be*this.a?void 0:(i=e/this.a,n=Math.sin(i),r=Math.cos(i),o=this.long0,Math.abs(e)<=Oe?s=this.lat0:(s=Mo(r*this.sin_p12+t.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-be,o=Math.abs(a)<=Oe?this.lat0>=0?ze(this.long0+Math.atan2(t.x,-t.y)):ze(this.long0-Math.atan2(-t.x,t.y)):ze(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=o,t.y=s,t):(l=Tu(this.es),u=Eu(this.es),c=Lu(this.es),h=Pu(this.es),Math.abs(this.sin_p12-1)<=Oe?(s=od(((d=this.a*Fi(l,u,c,h,be))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,u,c,h),o=ze(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=s,t):Math.abs(this.sin_p12+1)<=Oe?(d=this.a*Fi(l,u,c,h,be),s=od(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,l,u,c,h),o=ze(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=ya(this.a,this.e,this.sin_p12),_=Math.cos(g),b=-(v=this.e*this.cos_p12*_)*v/(1-this.es),m=3*this.es*(1-b)*this.sin_p12*this.cos_p12*_/(1-this.es),C=1-b*(x=(y=e/p)-b*(1+b)*Math.pow(y,3)/6-m*(1+3*b)*Math.pow(y,4)/24)*x/2-y*x*x*x/6,f=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*_),o=ze(this.long0+Math.asin(Math.sin(g)*Math.sin(x)/Math.cos(f))),k=Math.sin(f),s=Math.atan2((k-this.es*C*this.sin_p12)*Math.tan(f),k*(1-this.es)),t.x=o,t.y=s,t))},names:["Azimuthal_Equidistant","aeqd"]},f3={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,o,s,a,l=t.x,u=t.y;return n=ze(l-this.long0),e=Math.sin(u),i=Math.cos(u),r=Math.cos(n),((o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=Oe)&&(s=1*this.a*i*Math.sin(n),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)),t.x=s,t.y=a,t},inverse:function(t){var e,i,n,r,o,s,a;return t.x-=this.x0,t.y-=this.y0,i=Mo((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),r=Math.cos(i),s=this.long0,Math.abs(e)<=Oe?(a=this.lat0,t.x=s,t.y=a,t):(a=Mo(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-be,Math.abs(o)<=Oe?(s=this.lat0>=0?ze(this.long0+Math.atan2(t.x,-t.y)):ze(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=a,t):(s=ze(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=s,t.y=a,t))},names:["ortho"]},h_=1,xl=2,wl=3,Sl=4,Jp=5,ef=6,Qr=1,Yr=2,Kr=3,ta=4;function Pc(t,e,i,n){var r;return t<Oe?(n.value=Qr,r=0):(r=Math.atan2(e,i),Math.abs(r)<=Tt?n.value=Qr:r>Tt&&r<=be+Tt?(n.value=Yr,r-=be):r>be+Tt||r<=-(be+Tt)?(n.value=Kr,r=r>=0?r-si:r+si):(n.value=ta,r+=be)),r}function Vs(t,e){var i=t+e;return i<-si?i+=Mu:i>+si&&(i-=Mu),i}var g3={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=be-Tt/2?this.face=Jp:this.lat0<=-(be-Tt/2)?this.face=ef:Math.abs(this.long0)<=Tt?this.face=h_:Math.abs(this.long0)<=be+Tt?this.face=this.long0>0?xl:Sl:this.face=wl,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,r,o,s,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=this.es!==0?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===Jp)r=be-e,i>=Tt&&i<=be+Tt?(l.value=Qr,n=i-be):i>be+Tt||i<=-(be+Tt)?(l.value=Yr,n=i>0?i-si:i+si):i>-(be+Tt)&&i<=-Tt?(l.value=Kr,n=i+be):(l.value=ta,n=i);else if(this.face===ef)r=be+e,i>=Tt&&i<=be+Tt?(l.value=Qr,n=-i+be):i<Tt&&i>=-Tt?(l.value=Yr,n=-i):i<-Tt&&i>=-(be+Tt)?(l.value=Kr,n=-i-be):(l.value=ta,n=i>0?-i+si:-i-si);else{var u,c,h,d,p,f;this.face===xl?i=Vs(i,+be):this.face===wl?i=Vs(i,+si):this.face===Sl&&(i=Vs(i,-be)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(i),u=p*Math.cos(i),c=p*f,h=d,this.face===h_?n=Pc(r=Math.acos(u),h,c,l):this.face===xl?n=Pc(r=Math.acos(c),h,-u,l):this.face===wl?n=Pc(r=Math.acos(-u),h,-c,l):this.face===Sl?n=Pc(r=Math.acos(-c),h,u,l):(r=n=0,l.value=Qr)}return s=Math.atan(12/si*(n+Math.acos(Math.sin(n)*Math.cos(Tt))-be)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===Yr?s+=be:l.value===Kr?s+=si:l.value===ta&&(s+=1.5*si),a.x=o*Math.cos(s),a.y=o*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,i,n,r,o,s,a,l,u,c,h,d,p={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=Qr:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=Yr,e-=be):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=Kr,e=e<0?e+si:e-si):(f.value=ta,e+=be),u=si/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),s=Math.atan(o),(a=1-(n=Math.cos(e))*n*(r=Math.tan(i))*r*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?a=-1:a>1&&(a=1),this.face===Jp)l=Math.acos(a),p.phi=be-l,f.value===Qr?p.lam=s+be:f.value===Yr?p.lam=s<0?s+si:s-si:f.value===Kr?p.lam=s-be:p.lam=s;else if(this.face===ef)l=Math.acos(a),p.phi=l-be,f.value===Qr?p.lam=-s+be:f.value===Yr?p.lam=-s:f.value===Kr?p.lam=-s-be:p.lam=s<0?-s-si:-s+si;else{var g,_,v;u=(g=a)*g,_=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(s))*v)>=1?0:Math.sqrt(1-u),f.value===Yr?(u=_,_=-v,v=u):f.value===Kr?(_=-_,v=-v):f.value===ta&&(u=_,_=v,v=-u),this.face===xl?(u=g,g=-_,_=u):this.face===wl?(g=-g,_=-_):this.face===Sl&&(u=g,g=_,_=-u),p.phi=Math.acos(-v)-be,p.lam=Math.atan2(_,g),this.face===xl?p.lam=Vs(p.lam,-be):this.face===wl?p.lam=Vs(p.lam,-si):this.face===Sl&&(p.lam=Vs(p.lam,+be))}return this.es!==0&&(c=p.phi<0?1:0,h=Math.tan(p.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},tf=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Cl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],d_=.8487,p_=1.3523,hS=ao/5,m3=1/hS,nf=18,Ic=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},v3={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=ze(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*hS);n<0?n=0:n>=nf&&(n=17);var r={x:Ic(tf[n],i=ao*(i-m3*n))*e,y:Ic(Cl[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*d_+this.x0,r.y=r.y*this.a*p_+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*d_),y:Math.abs(t.y-this.y0)/(this.a*p_)};if(e.y>=1)e.x/=tf[18][0],e.y=t.y<0?-be:be;else{var i=Math.floor(e.y*nf);for(i<0?i=0:i>=nf&&(i=17);;)if(Cl[i][0]>e.y)--i;else{if(!(Cl[i+1][0]<=e.y))break;++i}var n=Cl[i],r=5*(e.y-n[0])/(Cl[i+1][0]-n[0]);r=function(o,s,a,l){for(var u=s;l;--l){var c=o(u);if(u-=c,Math.abs(c)<a)break}return u}(function(o){return(Ic(n,o)-e.y)/function(s,a){return s[1]+a*(2*s[2]+3*a*s[3])}(n,o)},r,Oe,100),e.x/=Ic(tf[i],r),e.y=(5*i+r)*Si,t.y<0&&(e.y=-e.y)}return e.x=ze(e.x+this.long0),e},names:["Robinson","robin"]},y3={init:function(){this.name="geocent"},forward:function(t){return tS(t,this.es,this.a)},inverse:function(t){return iS(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Rc=0,qc=1,Ac=2,Fc=3,Ml={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},_3={init:function(){if(Object.keys(Ml).forEach(function(i){if(this[i]===void 0)this[i]=Ml[i].def;else{if(Ml[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);Ml[i].num&&(this[i]=parseFloat(this[i]))}Ml[i].degrees&&(this[i]=this[i]*Si)}.bind(this)),Math.abs(Math.abs(this.lat0)-be)<Oe?this.mode=this.lat0<0?qc:Rc:Math.abs(this.lat0)<Oe?this.mode=Ac:(this.mode=Fc,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,r,o=Math.sin(t.y),s=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case Fc:i=this.sinph0*o+this.cosph0*s*a;break;case Ac:i=s*a;break;case qc:i=-o;break;case Rc:i=o}switch(e=(i=this.pn1/(this.p-i))*s*Math.sin(t.x),this.mode){case Fc:i*=this.cosph0*o-this.sinph0*s*a;break;case Ac:i*=o;break;case Rc:i*=-s*a;break;case qc:i*=s*a}return r=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*r,i=n*r,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,r={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var o=Hi(t.x,t.y);if(Math.abs(o)<Oe)r.x=0,r.y=t.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case Fc:r.y=Math.asin(s*this.sinph0+t.y*a*this.cosph0/o),t.y=(s-this.sinph0*Math.sin(r.y))*o,t.x*=a*this.cosph0;break;case Ac:r.y=Math.asin(t.y*a/o),t.y=s*o,t.x*=a;break;case Rc:r.y=Math.asin(s),t.y=-t.y;break;case qc:r.y=-Math.asin(s)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]},b3={init:function(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,n,r,o=t.x,s=t.y;if(o-=this.long0,this.shape==="ellipse"){s=Math.atan(this.radius_p2*Math.tan(s));var a=this.radius_p/Hi(this.radius_p*Math.cos(s),Math.sin(s));if(i=a*Math.cos(o)*Math.cos(s),n=a*Math.sin(o)*Math.cos(s),r=a*Math.sin(s),(this.radius_g-i)*i-n*n-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Hi(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/Hi(n,e)))}else this.shape==="sphere"&&(e=Math.cos(s),i=Math.cos(o)*e,n=Math.sin(o)*e,r=Math.sin(s),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Hi(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/Hi(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,n,r,o=-1,s=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Hi(1,a)):(s=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Hi(1,s));var l=a/this.radius_p;if(e=s*s+l*l+o*o,(n=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),o=this.radius_g+r*o,s*=r,a*=r,t.x=Math.atan2(s,o),t.y=Math.atan(a*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(s=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+a*a+o*o,(n=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),o=this.radius_g+r*o,s*=r,a*=r,t.x=Math.atan2(s,o),t.y=Math.atan(a*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},kl=1.340264,Tl=-.081106,El=893e-6,Ll=.003796,Oc=Math.sqrt(3)/2,x3={init:function(){this.es=0,this.long0=this.long0!==void 0?this.long0:0},forward:function(t){var e=ze(t.x-this.long0),i=t.y,n=Math.asin(Oc*Math.sin(i)),r=n*n,o=r*r*r;return t.x=e*Math.cos(n)/(Oc*(kl+3*Tl*r+o*(7*El+9*Ll*r))),t.y=n*(kl+Tl*r+o*(El+Ll*r)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,i,n,r,o=t.y;for(r=0;r<12&&(o-=n=(o*(kl+Tl*(e=o*o)+(i=e*e*e)*(El+Ll*e))-t.y)/(kl+3*Tl*e+i*(7*El+9*Ll*e)),!(Math.abs(n)<1e-9));++r);return i=(e=o*o)*e*e,t.x=Oc*t.x*(kl+3*Tl*e+i*(7*El+9*Ll*e))/Math.cos(o),t.y=Math.asin(Math.sin(o)/Oc),t.x=ze(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]},Iu=1e-10;function w3(t){var e,i,n,r=ze(t.x-(this.long0||0)),o=t.y;return e=this.am1+this.m1-Va(o,i=Math.sin(o),n=Math.cos(o),this.en),i=n*r/(e*Math.sqrt(1-this.es*i*i)),t.x=e*Math.sin(i),t.y=this.am1-e*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function S3(t){var e,i,n,r;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,i=Hi(t.x,t.y=this.am1-t.y),r=c0(this.am1+this.m1-i,this.es,this.en),(e=Math.abs(r))<be)e=Math.sin(r),n=i*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(r);else{if(!(Math.abs(e-be)<=Iu))throw new Error;n=0}return t.x=ze(n+(this.long0||0)),t.y=Co(r),t}function C3(t){var e,i,n=ze(t.x-(this.long0||0)),r=t.y;return i=this.cphi1+this.phi1-r,Math.abs(i)>Iu?(t.x=i*Math.sin(e=n*Math.cos(r)/i),t.y=this.cphi1-i*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function M3(t){var e,i;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var n=Hi(t.x,t.y=this.cphi1-t.y);if(i=this.cphi1+this.phi1-n,Math.abs(i)>be)throw new Error;return e=Math.abs(Math.abs(i)-be)<=Iu?0:n*Math.atan2(t.x,t.y)/Math.cos(i),t.x=ze(e+(this.long0||0)),t.y=Co(i),t}var k3={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Iu)throw new Error;this.es?(this.en=u0(this.es),this.m1=Va(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=S3,this.forward=w3):(Math.abs(this.phi1)+Iu>=be?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=M3,this.forward=C3)},names:["bonne","Bonne (Werner lat_1=90)"]};function h0(t,e){return dS(t,e,[]).join("")}function dS(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)i.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)dS(n,e,i)}return i}function xm(t,e){return function(i,n){const r=t.call(this,i,n);r!==void 0&&n[n.length-1].push(r)}}function Yi(t,e,i){return function(n,r){const o=t.call(this,n,r);if(o!==void 0){const s=r[r.length-1],a=n.localName;let l;a in s?l=s[a]:(l=[],s[a]=l),l.push(o)}}}function Ue(t,e,i){return function(n,r){const o=t.call(this,n,r);o!==void 0&&(r[r.length-1][n.localName]=o)}}function Rt(t,e,i){let n,r;for(i=i!==void 0?i:{},n=0,r=t.length;n<r;++n)i[t[n]]=e;return i}function Ht(t,e,i,n,r){return n.push(t),function(o,s,a,l){let u;for(u=s.firstElementChild;u;u=u.nextElementSibling){const c=o[u.namespaceURI];if(c!==void 0){const h=c[u.localName];h!==void 0&&h.call(l,u,a)}}}(e,i,n,r),n.pop()}Bi.defaultDatum="WGS84",Bi.Proj=lr,Bi.WGS84=new Bi.Proj("WGS84"),Bi.Point=va,Bi.toPoint=nS,Bi.defs=Ii,Bi.nadgrid=function(t,e){var i=new DataView(e),n=function(a){var l=a.getInt32(8,!1);return l===11?!1:(l=a.getInt32(8,!0),!0)}(i),r=function(a,l){return{nFields:a.getInt32(8,l),nSubgridFields:a.getInt32(24,l),nSubgrids:a.getInt32(40,l),shiftType:bm(a,56,64).trim(),fromSemiMajorAxis:a.getFloat64(120,l),fromSemiMinorAxis:a.getFloat64(136,l),toSemiMajorAxis:a.getFloat64(152,l),toSemiMinorAxis:a.getFloat64(168,l)}}(i,n),o=function(a,l,u){for(var c=176,h=[],d=0;d<l.nSubgrids;d++){var p=qE(a,c,u),f=AE(a,c,p,u),g=Math.round(1+(p.upperLongitude-p.lowerLongitude)/p.longitudeInterval),_=Math.round(1+(p.upperLatitude-p.lowerLatitude)/p.latitudeInterval);h.push({ll:[ha(p.lowerLongitude),ha(p.lowerLatitude)],del:[ha(p.longitudeInterval),ha(p.latitudeInterval)],lim:[g,_],count:p.gridNodeCount,cvs:RE(f)}),c+=176+16*p.gridNodeCount}return h}(i,r,n),s={header:r,subgrids:o};return eS[t]=s,s},Bi.transform=rd,Bi.mgrs=zE,Bi.version="__VERSION__",function(t){t.Proj.projections.add(vh),t.Proj.projections.add(yh),t.Proj.projections.add(jE),t.Proj.projections.add(VE),t.Proj.projections.add($E),t.Proj.projections.add(GE),t.Proj.projections.add(HE),t.Proj.projections.add(UE),t.Proj.projections.add(WE),t.Proj.projections.add(YE),t.Proj.projections.add(t3),t.Proj.projections.add(i3),t.Proj.projections.add(n3),t.Proj.projections.add(r3),t.Proj.projections.add(o3),t.Proj.projections.add(s3),t.Proj.projections.add(a3),t.Proj.projections.add(l3),t.Proj.projections.add(u3),t.Proj.projections.add(c3),t.Proj.projections.add(h3),t.Proj.projections.add(d3),t.Proj.projections.add(p3),t.Proj.projections.add(f3),t.Proj.projections.add(g3),t.Proj.projections.add(v3),t.Proj.projections.add(y3),t.Proj.projections.add(_3),t.Proj.projections.add(b3),t.Proj.projections.add(x3),t.Proj.projections.add(k3)}(Bi);class pS{read(e){if(!e)return null;if(typeof e=="string"){const n=(i=e,new DOMParser().parseFromString(i,"application/xml"));return this.readFromDocument(n)}var i;return"documentElement"in e?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let i=e.firstChild;i;i=i.nextSibling)if(i.nodeType==Node.ELEMENT_NODE)return this.readFromNode(i);return null}readFromNode(e){Ke()}}function d0(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function co(t){return function(e){const i=/^\s*(\d+)\s*$/.exec(e);if(i)return parseInt(i[1],10)}(h0(t,!1))}function wt(t){return h0(t,!1).trim()}const en=[null,"http://www.opengis.net/ows/1.1"],T3=Rt(en,{ServiceIdentification:Ue(function(t,e){return Ht({},B3,t,e)}),ServiceProvider:Ue(function(t,e){return Ht({},j3,t,e)}),OperationsMetadata:Ue(function(t,e){return Ht({},O3,t,e)})});class E3 extends pS{constructor(){super()}readFromNode(e){return Ht({},T3,e,[])||null}}const L3=Rt(en,{DeliveryPoint:Ue(wt),City:Ue(wt),AdministrativeArea:Ue(wt),PostalCode:Ue(wt),Country:Ue(wt),ElectronicMailAddress:Ue(wt)}),P3=Rt(en,{Value:Yi(function(t,e){return wt(t)})}),I3=Rt(en,{AllowedValues:Ue(function(t,e){return Ht({},P3,t,e)})}),R3=Rt(en,{Phone:Ue(function(t,e){return Ht({},z3,t,e)}),Address:Ue(function(t,e){return Ht({},L3,t,e)})}),q3=Rt(en,{HTTP:Ue(function(t,e){return Ht({},A3,t,e)})}),A3=Rt(en,{Get:Yi(function(t,e){const i=d0(t);if(i)return Ht({href:i},D3,t,e)}),Post:void 0}),F3=Rt(en,{DCP:Ue(function(t,e){return Ht({},q3,t,e)})}),O3=Rt(en,{Operation:function(t,e){const i=t.getAttribute("name"),n=Ht({},F3,t,e);n&&(e[e.length-1][i]=n)}}),z3=Rt(en,{Voice:Ue(wt),Facsimile:Ue(wt)}),D3=Rt(en,{Constraint:Yi(function(t,e){const i=t.getAttribute("name");if(i)return Ht({name:i},I3,t,e)})}),N3=Rt(en,{IndividualName:Ue(wt),PositionName:Ue(wt),ContactInfo:Ue(function(t,e){return Ht({},R3,t,e)})}),B3=Rt(en,{Abstract:Ue(wt),AccessConstraints:Ue(wt),Fees:Ue(wt),Title:Ue(wt),ServiceTypeVersion:Ue(wt),ServiceType:Ue(wt)}),j3=Rt(en,{ProviderName:Ue(wt),ProviderSite:Ue(d0),ServiceContact:Ue(function(t,e){return Ht({},N3,t,e)})}),_r=[null,"http://www.opengis.net/wmts/1.0"],il=[null,"http://www.opengis.net/ows/1.1"],V3=Rt(_r,{Contents:Ue(function(t,e){return Ht({},$3,t,e)})}),$3=Rt(_r,{Layer:Yi(function(t,e){return Ht({},G3,t,e)}),TileMatrixSet:Yi(function(t,e){return Ht({},X3,t,e)})}),G3=Rt(_r,{Style:Yi(function(t,e){const i=Ht({},H3,t,e);if(!i)return;const n=t.getAttribute("isDefault")==="true";return i.isDefault=n,i}),Format:Yi(wt),TileMatrixSetLink:Yi(function(t,e){return Ht({},U3,t,e)}),Dimension:Yi(function(t,e){return Ht({},K3,t,e)}),ResourceURL:Yi(function(t,e){const i=t.getAttribute("format"),n=t.getAttribute("template"),r=t.getAttribute("resourceType"),o={};return i&&(o.format=i),n&&(o.template=n),r&&(o.resourceType=r),o})},Rt(il,{Title:Ue(wt),Abstract:Ue(wt),WGS84BoundingBox:Ue(gS),BoundingBox:Yi(function(t,e){const i=t.getAttribute("crs"),n=Ht([],fS,t,e);if(n.length==2)return{extent:Ra(n),crs:i}}),Identifier:Ue(wt)})),H3=Rt(_r,{LegendURL:Yi(function(t,e){const i={};return i.format=t.getAttribute("format"),i.href=d0(t),i})},Rt(il,{Title:Ue(wt),Identifier:Ue(wt)})),U3=Rt(_r,{TileMatrixSet:Ue(wt),TileMatrixSetLimits:Ue(function(t,e){return Ht([],W3,t,e)})}),W3=Rt(_r,{TileMatrixLimits:xm(function(t,e){return Ht({},Y3,t,e)})}),Y3=Rt(_r,{TileMatrix:Ue(wt),MinTileRow:Ue(co),MaxTileRow:Ue(co),MinTileCol:Ue(co),MaxTileCol:Ue(co)}),K3=Rt(_r,{Default:Ue(wt),Value:Yi(wt)},Rt(il,{Identifier:Ue(wt)})),fS=Rt(il,{LowerCorner:xm(wm),UpperCorner:xm(wm)}),X3=Rt(_r,{WellKnownScaleSet:Ue(wt),TileMatrix:Yi(function(t,e){return Ht({},Z3,t,e)})},Rt(il,{SupportedCRS:Ue(wt),Identifier:Ue(wt),BoundingBox:Ue(gS)})),Z3=Rt(_r,{TopLeftCorner:Ue(wm),ScaleDenominator:Ue(function(t){return function(e){const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(i)return parseFloat(i[1])}(h0(t,!1))}),TileWidth:Ue(co),TileHeight:Ue(co),MatrixWidth:Ue(co),MatrixHeight:Ue(co)},Rt(il,{Identifier:Ue(wt)}));function gS(t,e){const i=Ht([],fS,t,e);if(i.length==2)return Ra(i)}function wm(t,e){const i=wt(t).split(/\s+/);if(!i||i.length!=2)return;const n=+i[0],r=+i[1];return isNaN(n)||isNaN(r)?void 0:[n,r]}var Q3=class extends pS{constructor(){super(),this.owsParser_=new E3}readFromNode(t){let e=t.getAttribute("version");e&&(e=e.trim());let i=this.owsParser_.readFromNode(t);return i?(i.version=e,i=Ht(i,V3,t,[]),i||null):null}};class at{static prjMap=new Map;static tileGridMap=new Map;static EPSG4326Extent=[-180,-90,180,90];static EPSG3857Extent=[-2003750834e-2,-2003750834e-2,2003750834e-2,2003750834e-2];static getProjection(e){const i="EPSG:3857";let n;if(e&&e.epsg){if(n=at.prjMap.get(e.epsg),n)return n;if(n=lt(e.epsg),!n){if(!e.proj4)throw Error("缺少Prj4j内容，无法注册投影！");Bi.defs(e.epsg,e.proj4),function(r){const o=Object.keys(r.defs),s=o.length;let a,l;for(a=0;a<s;++a){const u=o[a];if(!uh(u)){const c=r.defs(u);let h=c.units;h||c.projName!=="longlat"||(h="degrees"),du(new or({code:u,axisOrientation:c.axis,metersPerUnit:c.to_meter,units:h}))}}for(a=0;a<s;++a){const u=o[a],c=uh(u);for(l=0;l<s;++l){const h=o[l],d=uh(h);if(!ch(u,h))if(r.defs[u]===r.defs[h])lg([c,d]);else{const p=r(u,h);Rk(c,d,Ly(c,d,p.forward),Ly(d,c,p.inverse))}}}}(Bi),n=new or({code:e.epsg,extent:e.prjExtent})}n&&at.prjMap.set(e.epsg,n)}else n=at.prjMap.get(i),n||(n=new or({code:i}),at.prjMap.set(i,n));return n}static toLonLat(e,i){return at.transformCoordinate(e,i,"EPSG:4326")}static fromLonLat(e,i){return at.transformCoordinate(e,"EPSG:4326",i)}static fromLonLatCoordinate(e,i){return at.transformCoordinate(e,"EPSG:4326",i)}static transformCoordinate(e,i,n){return wo(e,i,n)}static getExtentFrom4326(e,i="EPSG:3857"){return at.getExtentFromTransform(e,"EPSG:4326",i)}static transformExtent(e,i,n="EPSG:3857"){at.getExtentFromTransform(e,i,n)}static getExtentFromTransform(e,i,n="EPSG:3857"){return Nx(e,Aa(i,n))}static transformGeometry(e,i,n="EPSG:3857"){return e.transform(i,n)}static transformFeature(e,i,n="EPSG:3857"){const r=e.getGeometry().transform(i,n);if(e.setGeometry)return e.setGeometry(r),e;if(r){const o=new An(r);return o.setProperties(e.getProperties()),o}}static transformFeatures(e,i,n="EPSG:3857"){const r=[];return e&&e.forEach(o=>{const s=this.transformFeature(o,i,n);s&&r.push(s)}),r}static createWMTSTileGrid(e){const i=e.rule,n=at.tileGridMap.get(i);if(n)return n;const r=[],o=[];let s=10;for(let c in e.resolutions){const h=Number(c);r[h]=c,o[h]=e.resolutions[c],s=Math.min(h,s)}if(s>0)for(let c=s;c>0;c--){let h=c-1;r[h]==null&&o[c]!=null&&(r[h]=h.toString(),o[h]=2*o[c])}let a=256;a=Array.isArray(e.tileSize)?e.tileSize[0]:e.tileSize;const l={origin:e.origin,extent:e.extent,resolutions:o,matrixIds:r,tileSize:a},u=new QT(l);return at.tileGridMap.set(i,u),u}static getTDTTileGrid(e=!0){const i=e?"W":"C",n=at.tileGridMap.get(i);if(n)return n;const r=e?at.EPSG3857Extent:at.EPSG4326Extent,o=nt(r)/256,s={};for(var a=1;a<22;++a)s[a.toString()]=o/Math.pow(2,a);const l={rule:i,origin:xn(r),resolutions:s,tileSize:[256,256]},u=at.createWMTSTileGrid(l);return u&&at.tileGridMap.set(i,u),u}static async getProjectionOnline(e,i="https://epsg.gis.digsur.com/epsg"){let n,r=!0;if(e==="4490"){const o={epsg:"EPSG:"+e,proj4:"+proj=longlat +ellps=GRS80 +no_defs +type=crs",prjExtent:[-180,-90,180,90]};n=at.getProjection(o)}else{const o=i.endsWith("/")?i+e:i+"/"+e,s=await fetch(o).then(function(u){return u.json()}).catch(u=>{throw new Error("查询EPSG信息失败："+e)});if(!s)throw new Error("查询EPSG信息失败："+e);r=s.kind==="geographic";const a=s.bbox.split(","),l={epsg:"EPSG:"+e,proj4:s.proj4,prjExtent:[Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3])]};n=at.getProjection(l)}return{projection:n,isGeographic:r}}static isGeographic(e){let i=!0;const n=e.getUnits();if(!n)throw new Error("projection.getUnits()获取单位失败！");return i=n==="degrees"||n==="radians",i}static async getWMTSCapabilities(e,i){if(!e||!i)throw new Error("传入参数不能为空！");const n=`${e}?layer=${i}&Service=WMTS&Request=GetCapabilities`,r=await fetch(n).then(function(s){return s.text()}).catch(s=>{throw new Error("GetCapabilities请求失败")});if(!r)throw new Error("GetCapabilities请求失败");const o=new Q3().read(r);return o.wmtsURL=e,o}static getScaleToResolutionParam(e=!0,i=!0){return(i?.0002645833333:28e-5)/(e?111319.49079327358:1)}static computeScaleByResolution(e,i=!0,n=!0){return e/this.getScaleToResolutionParam(i,n)}static computeResolutionByScale(e,i=!0,n=!0){return e*this.getScaleToResolutionParam(i,n)}static async getXMLOptionsFromCapabilities(e,i=!0,n="https://epsg.gis.digsur.com/epsg"){const r=e.Contents.Layer,o=e.wmtsURL;let s;if(r.length>0&&(s=r[0]),!s)return null;const a=s.Identifier,l=s.TileMatrixSetLink[0].TileMatrixSet,u=s.WGS84BoundingBox;let c=s.Format[0];const h=s.Style[0].Identifier,d=e.Contents.TileMatrixSet[0];let p;const f=d.SupportedCRS,g=f.toLocaleUpperCase();g.startsWith("EPSG:")&&(p=lt(g));let _=!0;if(p){const L=p.getUnits();_=L==="degrees"||L==="radians"}else{const L=f.lastIndexOf(":"),T=f.substring(L+1);if(p=lt("EPSG:"+T),p){const I=p.getUnits();_=I==="degrees"||I==="radians"}else{const I=await this.getProjectionOnline(T,n);I&&(_=I.isGeographic,p=I.projection)}}const v=p.getExtent(),b=[v[0],v[3]],m=this.getScaleToResolutionParam(_,i),y=d.TileMatrix,x=y[0],C=x.TileWidth,k=x.TileHeight,P={},A=y.length;for(let L=0;L<A;L++){const T=y[L],I=T.Identifier,M=T.ScaleDenominator*m;P[I]=M}const E={rule:l,origin:b,tileSize:[C,k],resolutions:P};return{wmtsURL:o,layerName:a,layerExtent:u,tilegrid:at.createWMTSTileGrid(E),projection:p,style:h,format:c,tileMatrixSet:l}}}class J3{tdtKeys=[];xmap;constructor(e,i){e&&(this.xmap=e,this.tdtKeys=[...i])}setTDTKeys(e){e&&e.length>0&&(this.tdtKeys=[...this.tdtKeys,...e])}addWMTSLayerByOptions2(e,i,n,r){const o=Qn(),s="grid",a=n.layer;n.crossOrigin="anonymous",i.source=new Ns(n);const l={lyrID:o,lyrName:n.layer,lyrType:s};i.properties?i.properties=id(i.properties,l):i.properties=l;const u=new fi(i);e.map.addLayer(u);const c={id:o,name:a,alias:r,minZoom:i.minZoom??1,maxZoom:i.maxZoom??24,visible:i.visible??!0,opacity:i.opacity??1,type:s};return e.registerLayer(u,c),u}addWMTSLayerByOptions(e,i,n){const r=Qn(),o="grid",s=i.layer;i.crossOrigin="anonymous",e.source=new Ns(i);const a={lyrID:r,lyrName:i.layer,lyrType:o};e.properties?e.properties=id(e.properties,a):e.properties=a;const l=new fi(e);this.xmap.map.addLayer(l);const u={id:r,name:s,alias:n,minZoom:e.minZoom??1,maxZoom:e.maxZoom??24,visible:e.visible??!0,opacity:e.opacity??1,type:o};return this.xmap.registerLayer(l,u),l}addWMTSLayer2(e,i,n,r,o,s,a,l,u){const c=s??this.xmap.map.getView().getProjection(),h=o??at.getTDTTileGrid(!0),d=i??Qn(),p="grid",f=new fi({opacity:1,source:new Ns({crossOrigin:"anonymous",layer:i,matrixSet:n,format:"image/png",projection:c,url:r,tileGrid:h,style:a??"default",wrapX:!0}),minZoom:l,maxZoom:u,properties:{lyrID:d,lyrName:i,lyrType:p}});this.xmap.map.addLayer(f);const g={id:d,name:i,alias:e,minZoom:l,maxZoom:u,visible:!0,opacity:1,type:p};return this.xmap.registerLayer(f,g),f}addWMTSLayer(e,i,n,r,o,s,a="KVP",l="image/png"){const u=o??this.xmap.map.getView().getProjection(),c=r??at.getTDTTileGrid(!0),h=e??Qn(),d="grid",p=new fi({opacity:1,source:new Ns({crossOrigin:"anonymous",layer:e,matrixSet:i,format:l,projection:u,requestEncoding:a,url:n,tileGrid:c,style:s??"default",wrapX:!0}),properties:{lyrID:h,lyrName:e,lyrType:d}});this.xmap.map.addLayer(p);const f={id:h,name:e,minZoom:1,maxZoom:24,visible:!0,opacity:1,type:d};return this.xmap.registerLayer(p,f),p}addWMTSLayerSelf(e,i){const n=e.prjInfo,r=at.getProjection(n),o=e.tileSchema,s=at.createWMTSTileGrid(o),a={minZoom:e.minlevel,maxZoom:e.maxlevel,opacity:1,visible:!0,properties:{bounds:e.bounds,center:e.center,level:e.level}},l={tileGrid:s,projection:r,layer:i,style:e.style||"default",matrixSet:o.rule,url:e.tileUrl,format:"image/png"},u=this.addWMTSLayerByOptions(a,l);return this.xmap.map&&e.bounds&&this.xmap.zoomToExtent(e.bounds),u}getTDTAlias(e){let i="";switch(e){case"vec_c":case"vec_w":i="矢量";break;case"img_c":case"img_w":i="影像";break;case"cva_c":case"cva_w":i="矢量注记";break;case"cia_c":case"cia_w":i="影像注记";break;case"ter_c":case"ter_w":i="地形";break;case"cta_c":case"cta_w":i="地形注记"}return i}addTDTLayer(e="img_c",i){if(!this.xmap||!this.xmap.map)throw Error("初始的XMap地图对象不能为空");const n=this.xmap.map;if(e.indexOf("_")<0)return;const r=e.split("_"),o=r[0],s=r[1],a=s==="w"||s==="W",l=at.getTDTTileGrid(a),u=a?"EPSG:3857":"EPSG:4326",c=this.getTDTUrls(e,this.tdtKeys);let h="grid";(o==="cva"||o==="cia")&&(h="symbol");const d=e,p=new fi({source:new Ns({crossOrigin:"anonymous",urls:c,layer:o,style:"default",matrixSet:s,format:"tiles",wrapX:!0,projection:u,tileGrid:l}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:d,lyrName:e,lyrType:h,lyrGroup:"天地图"}});n.addLayer(p);const f={id:d,name:e,alias:`${i}[${e}]`,group:"天地图",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:h};return this.xmap.registerLayer(p,f),p}addTDTLayerOnly(e,i){if(!this.xmap||!this.xmap.map)throw Error("必须传入XMap地图对象");const n=this.xmap;if(e.indexOf("_")<0)return;const r=e.split("_"),o=r[0],s=r[1],a=s==="w"||s==="W",l=at.getTDTTileGrid(a),u=a?"EPSG:3857":"EPSG:4326",c=this.getTDTUrls(e,this.tdtKeys);let h="grid";(o==="cva"||o==="cia")&&(h="symbol");const d=Qn(),p=new fi({source:new Ns({crossOrigin:"anonymous",urls:c,layer:o,style:"default",matrixSet:s,format:"tiles",wrapX:!0,projection:u,tileGrid:l}),minZoom:1,maxZoom:18,properties:{lyrID:d,lyrName:e,lyrType:h,lyrGroup:"天地图"}});return n.map.addLayer(p),p}getTDTUrls(e,i){const n=[],r=i.length;if(r===0)return n;let o=i[0];for(let s=0;s<8;s++){r>1&&(o=i[X2(0,r-1)]);const a=`https://t${s}.tianditu.gov.cn/${e}/wmts?tk=${o}`;n.push(a)}return n}addWMTSDebugLayer(e){const i=e.getSource();return this.addTileDebugLayer(i.getTileGrid(),i.getProjection())}addTileDebugLayer(e,i){if(!this.xmap||!this.xmap.map)return;const n=new fi({source:new I5({projection:i,tileGrid:e}),properties:{lyrID:"debugLayer",lyrName:"debugLayer",lyrType:"grid"}});return this.xmap.map.addLayer(n),n}addLocalTDTLayerXYZ(e,i){e&&i.forEach(n=>{this.addSingleLocalTDTLayerXYZ(e,n)})}addSingleLocalTDTLayerXYZ(e,i){const n=e;if(n){const r=i.toLocaleLowerCase(),o=this.getTDTAlias(r),s=r.split("_"),a=s[0],l=s[1],u=lt(l==="w"||l==="W"?"EPSG:3857":"EPSG:4326");let c="grid";(a==="cva"||a==="cia")&&(c="symbol");const h=Qn(),d=n.replace("{layerName}",r),p=new fi({source:new el({url:d,projection:u}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:h,lyrName:r,lyrType:c,lyrGroup:"天地图"}});this.xmap.map.addLayer(p);const f={id:h,name:r,alias:`${o}[${r}]`,group:"天地图",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:c};this.xmap.registerLayer(p,f)}}addWMTSLayerByXMLOptions(e){this.addWMTSLayer(e.layerName,e.tileMatrixSet,e.wmtsURL,e.tilegrid,e.projection,e.style,"KVP",e.format),e.layerExtent&&this.xmap.zoomToExtent(e.layerExtent)}}const eL={img:"https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer",vec:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",ter:"https://server.arcgisonline.com/arcgis/rest/services/services/World_Physical_Ma/MapServer"},tL={img:"ArcGIS影像",vec:"ArcGIS矢量",ter:"ArcGIS地形"};class iL{static createLayer(e){const i="arcgis",n=e.toLocaleLowerCase(),r=eL[n];if(!r)return;const o=tL[n],s=`${i}_${n}`,a="grid";return{layer:new fi({source:new P5({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:s,lyrName:s,lyrType:a,lyrGroup:i}}),layerItem:{id:s,name:s,alias:o,group:i,minZoom:0,maxZoom:23,visible:!0,opacity:1,type:a}}}}const nL={img:"百度影像",vec:"百度矢量"};class rL{static createLayer(e){const i="baidu",n=e.toLocaleLowerCase(),r=nL[n];if(!r)return;const o=`${i}_${n}`;return{layer:new fi({source:new ts({key:e,projection:wu}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:o,lyrName:o,lyrType:"grid",lyrGroup:i}}),layerItem:{id:o,name:o,alias:r,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const oL={img:"https://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",vec:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}",ter:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=8&x={x}&y={y}&z={z}"},sL={img:"高德影像",vec:"高德矢量",ter:"高德道路"};class aL{static createLayer(e){const i="google",n=e.toLocaleLowerCase(),r=oL[n];if(!r)return;const o=sL[n],s=`${i}_${n}`,a="grid";return{layer:new fi({source:new el({url:r,wrapX:!1,projection:"EPSG:4326"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:s,lyrName:s,lyrType:a,lyrGroup:i}}),layerItem:{id:s,name:s,alias:o,group:i,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:a}}}}const lL={img:"https://www.google.com.hk/maps/vt?lyrs=s&x={x}&y={y}&z={z}",vec:"https://www.google.com.hk/maps/vt?lyrs=m&x={x}&y={y}&z={z}",cva:"https://www.google.com.hk/maps/vt?lyrs=h&x={x}&y={y}&z={z}",ter:"https://www.google.com.hk/maps/vt?lyrs=t,r&x={x}&y={y}&z={z}",img_cia:"https://www.google.com.hk/maps/vt?lyrs=y&x={x}&y={y}&z={z}"},uL={img:"谷歌影像",vec:"谷歌矢量",cva:"谷歌注记",ter:"谷歌地形",img_cia:"谷歌影像+注记"};class cL{static createLayer(e){const i="google",n=e.toLocaleLowerCase(),r=lL[n];if(!r)return;const o=uL[n],s=`${i}_${n}`;return{layer:new fi({source:new el({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:s,lyrName:s,lyrType:"grid",lyrGroup:i}}),layerItem:{id:s,name:s,alias:o,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const hL={img:"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw",vec:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw"},dL={img:"Mapbox影像",vec:"Mapbox矢量"};class pL{static createLayer(e){const i="mapbox",n=e.toLocaleLowerCase(),r=hL[n];if(!r)return;const o=dL[n],s=`${i}_${n}`;return{layer:new fi({source:new el({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:s,lyrName:s,lyrType:"grid",lyrGroup:i}}),layerItem:{id:s,name:s,alias:o,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const fL={img:"https://p{1-3}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",vec:"https://rt{1-3}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&scene=0&version=347"},gL={img:"腾讯影像",vec:"腾讯矢量"};class mL{static createLayer(e){const i="qq",n=e.toLocaleLowerCase(),r=fL[n];if(!r)return;const o=gL[n],s=`${i}_${n}`;return{layer:new fi({source:new el({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:s,lyrName:s,lyrType:"grid",lyrGroup:i}}),layerItem:{id:s,name:s,alias:o,group:i,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"}}}}const I4=[{id:"OSM_VEC",label:"OSM矢量",type:"osm",img:"/img/basicimage/osm.png",layers:["osm"]},{id:"TDT_VEC",label:"天地图-矢量",type:"tdt",img:"/img/basicimage/tdt_vec.png",layers:["vec_w","cva_w"]},{id:"TDT_IMG",label:"天地图-影像",type:"tdt",img:"/img/basicimage/tdt_img.png",layers:["img_w","cia_w"]},{id:"TDT_TER",label:"天地图地形",type:"tdt",img:"/img/basicimage/tdt_ter_cta.png",layers:["ter_w","cta_w"]},{id:"ARCGIS_IMG",label:"ArcGIS影像",type:"arcgis",img:"/img/basicimage/arcgis_img.png",layers:["arcgis_img"]},{id:"ARCGIS_VEC",label:"ArcGIS矢量",type:"arcgis",img:"/img/basicimage/arcgis_vec.png",layers:["arcgis_vec"]},{id:"ARCGIS_TER",label:"ArcGIS地形",type:"arcgis",img:"/img/basicimage/arcgis_ter.png",layers:["arcgis_ter"]},{id:"Mapbox_VEC",label:"Mapbox矢量",type:"mapbox",img:"/img/basicimage/mapbox_vec.png",layers:["mapbox_vec"]},{id:"Mapbox_IMG",label:"Mapbox影像v9",type:"mapbox",img:"/img/basicimage/mapbox_img.png",layers:["mapbox_img"]},{id:"Google_VEC",label:"谷歌矢量",type:"google",img:"/img/basicimage/google_vec.png",layers:["google_vec"]},{id:"Google_IMG",label:"谷歌影像",type:"google",img:"/img/basicimage/google_img.png",layers:["google_img"]},{id:"Google_IMG_CIA",label:"谷歌影像+注记",type:"google",img:"/img/basicimage/google_img_cia.png",layers:["google_img_cia"]},{id:"Google_TER",label:"谷歌地形",type:"google",img:"/img/basicimage/google_ter.png",layers:["google_ter"]},{id:"Google_VEC_CVA",label:"谷歌注记",type:"google",img:"/img/basicimage/google_cva.png",layers:["google_cva"]},{id:"BING_VEC",label:"Bing矢量",type:"bing",img:"/img/basicimage/basic_bingimg.jpg",layers:["bing_vec"]},{id:"BING_IMG",label:"Bing影像",type:"bing",img:"/img/basicimage/basic_tdtimg.jpg",layers:["bing_img"]},{id:"GD_VEC",label:"高德矢量",type:"gaode",img:"/img/basicimage/gaode_vec.png",layers:["gaode_vec"]},{id:"GD_IMG",label:"高德影像",type:"gaode",img:"/img/basicimage/gaode_img.png",layers:["gaode_img"]},{id:"QQ_VEC",label:"腾讯矢量",type:"qq",img:"/img/basicimage/qq_vec.png",layers:["qq_vec"]},{id:"QQ_IMG",label:"腾讯影像",type:"qq",img:"/img/basicimage/qq_img.png",layers:["qq_img"]},{id:"BAIDU_VEC",label:"百度矢量",type:"baidu",img:"/img/basicimage/baidu_vec.png",layers:["baidu_vec"]},{id:"BAIDU_IMG",label:"百度影像",type:"baidu",img:"/img/basicimage/baidu_img.png",layers:["baidu_img"]}];class Ls{target;_TDTKeys=["1eafc8f4338343058a4876033f55b7b6","587e4b30b61cde5c55680135140dc980","fac3d52ef3ed4f1d18a79a9776dcf4f4","5f2cd4464e3dff59e381d6716cebbc80","f7b2c7226b59e6578deb7ae495d34526","fdcb5a9013aab146c4d9d6339359cc3e","1eafc8f4338343058a4876033f55b7b6"];map;mapEventBus=Zh;isMainSync=!1;digits=4;defaultHomeView={zoom:5,center:[116.46229441189399,40.24876149]};mapGroup="map";_targetContainer="";postionStatusHTMLElement;postionStatus={postion:"",zoom:"",center:"",epsgInfo:"EPSG:3857"};currentPosition;positionProjection=lt("EPSG:4326");layerManager;isInitSuccess=!1;_WMTSTool;InteractionsDiction=new Map;ControlsDiction=new Map;isInternet=!0;_printTool=void 0;static initByMapConfig(e){const i=new Ls(e.id,e.group,e.hasLayerManager);return e.projInfo&&(e.viewOptions.Projection=at.getProjection(e.projInfo)),i.initMapView(e.viewOptions),e.layers&&(e.isInternet===!1&&(i.isInternet=!1),e.layers.forEach(n=>{i.isInternet?i.addOnlineLayer(n):i.addOnlineLayer(n,e.tdtXYZLocalURL)})),e.controls&&e.controls.forEach(n=>{i.addDefaultControl(n)}),e.interactions&&e.interactions.forEach(n=>{i.addDefaultInteraction(n)}),i}constructor(e="map",i="map",n=!0){this.target=e,this.mapGroup=i;const r=document.getElementById(e);this._targetContainer=e+"_Container",r&&(this.isInitSuccess=!0),this.map=new Za({target:this.isInitSuccess?this.target:void 0}),this.map.on("moveend",this.onMoveEnd.bind(this)),n&&(this.layerManager=new gE(this,this.target)),this.postionStatusHTMLElement=pE("div","ol-mouse-position xmap-position",r),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.on("moveend",this.onMapMoveEndHandler.bind(this))}mapPrj;pointerMoveHandler(e){this.currentPosition=[...e.coordinate];let i=e.coordinate;const n=this.MapView.getProjection();i=at.toLonLat(i,n);const r=ky(i,this.digits);this.postionStatus.postion=`鼠标位置：${r}`,this.refreshPostionStatus()}onMapMoveEndHandler(e){const i=this.MapView,n=i.getZoom();this.postionStatus.zoom=`级别：${n.toFixed(1)}`;let r=i.getCenter();r=at.toLonLat(r,i.getProjection());const o=ky(r,this.digits);this.postionStatus.center=`中心点：${o}`,this.refreshPostionStatus()}refreshPostionStatus(){this.postionStatusHTMLElement&&(this.postionStatusHTMLElement.innerHTML=`${this.postionStatus.epsgInfo} ${this.postionStatus.zoom} ${this.postionStatus.center} ${this.postionStatus.postion}`)}get targetContainer(){return this._targetContainer}get CurrentPosition(){return this.currentPosition}get WMTSTool(){return this._WMTSTool||(this._WMTSTool=new J3(this,this._TDTKeys)),this._WMTSTool}get PrintTool(){return this._printTool||(this._printTool=new fE(this.map)),this._printTool}initMapView(e){this.isInitSuccess||this.map.setTarget(this.target),e.projection||(e.projection="EPSG:3857"),e.center&&(this.defaultHomeView.center=[...e.center]),e.zoom&&(this.defaultHomeView.zoom=e.zoom),e.center=at.fromLonLat(e.center,e.projection),eu(e.projection)||e.projection===void 0?this.postionStatus.epsgInfo=e.projection??"EPSG:3857":this.postionStatus.epsgInfo=e.projection.getCode();const i=new tn(e);return this.setView(i),i}get TDTKey(){const e=X2(0,this._TDTKeys.length-1);return this._TDTKeys[e]}set TDTKeys(e){e&&e.length>0&&this._TDTKeys.push(...e)}addOnlineLayer(e,i=""){const n=e.toLocaleLowerCase();if(n.endsWith("_c")||n.endsWith("_w")){const r=this.WMTSTool.getTDTAlias(n);r&&(this.isInternet?this.WMTSTool.addTDTLayer(n,r):i&&this.WMTSTool.addSingleLocalTDTLayerXYZ(i,n))}else{if(!this.isInternet)throw Error("未联网，无法加载在线图层！");if(n==="osm"){const r="grid",o=new fi({source:new T1,properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:n,lyrName:"osm",lyrType:r,lyrGroup:"osm"}});this.map.addLayer(o);const s={id:n,name:n,alias:"osm",group:n,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"};this.registerLayer(o,s)}else{const r=n.indexOf("_"),o=n.substring(0,r),s=n.substring(r+1);let a;switch(o){case"arcgis":a=iL.createLayer(s);break;case"gaode":a=aL.createLayer(s);break;case"google":a=cL.createLayer(s);break;case"baidu":a=rL.createLayer(s);break;case"mapbox":a=pL.createLayer(s);break;case"qq":a=mL.createLayer(s)}if(a){const{layer:l,layerItem:u}=a;this.map.addLayer(l),this.registerLayer(l,u)}}}}get LayerManager(){return this.layerManager}removeLayer(e){return this.map.removeLayer(e)}changeLayerOrder(e,i){const n=this.map.getLayers(),r=n.removeAt(e);r&&n.insertAt(i,r)}addDefaultControl(e){const i=e.key.toLocaleLowerCase(),n=this.DefaultControlKeys[i];if(n)switch(n){case"target":const r=new Vt({color:"red",width:2}),o=[new Pt({image:new So({points:4,radius:11,radius2:0,stroke:new Vt({color:"#fff",width:3})})}),new Pt({image:new So({points:4,radius:11,radius2:0,stroke:r})})],s=new X5({style:o,composite:""});e.options.visible===!1&&s.setVisible(!1),this.addControlExt(n,s);break;case"overview":const a=this.map.getLayers(),l=a.getArray(),u=[];e.options?.layers&&e.options.layers.forEach(v=>{if(eu(v)){const b=a.get(v);b&&u.push(b)}else $1(v)&&v<l.length&&u.push(l[v])}),u.length===0&&u.push(new fi({source:new T1}));const c=this.MapView.getProjection(),h=new W5({layers:u,minZoom:1,maxZoom:12,rotation:!0,align:"right",projection:c});e.options?.align&&h.setPosition(e.options?.align),this.addControlExt(n,h);break;case"scale":const d=new Y5;this.addControlExt(n,d);break;case"scaleline":const p=new J5;this.addControlExt(n,p);break;case"print":const f=this.PrintTool.addPrintControl();this.addControlExt(n,f);break;case"printDialog":const g=e.options??{},_=this.PrintTool.addPrintDialogControl(g);this.addControlExt(n,_)}}addDefaultInteraction(e){if(e.key==="FishEyeClip"){const i=this.map.getLayers(),n=i.getArray(),r=e.options.radius??100,o=[];e.options?.layers&&e.options.layers.forEach(a=>{if(eu(a)){const l=i.get(a);l&&o.push(l)}else $1(a)&&a<n.length&&o.push(n[a])});const s=new Z5({radius:r,layers:o});e.options?.active===!1&&s.setActive(!1),this.addInteractionExt(e.key,s)}}dispose(){this.layerManager&&(this.layerManager.clearLayers(),this.layerManager=void 0),this.swipe&&(this.swipe.unload(),this.swipe=void 0),this.clearControlExt(),this.clearInteractionExt(),this.map&&(this.MapView.un("change:resolution",this.onResolutionChanged.bind(this)),this.map.un("moveend",this.onMoveEnd.bind(this)),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.un("moveend",this.onMapMoveEndHandler.bind(this)),this.map.dispose(),this.map=void 0)}setView(e){const i=this.map.getView();i&&i.un("change:resolution",this.onResolutionChanged.bind(this)),e&&(this.map.setView(e),e.on("change:resolution",this.onResolutionChanged.bind(this)))}get MapView(){return this.map.getView()}registerLayer(e,i){this.layerManager&&this.layerManager.registerLayer(e,i)}zoomTo(e,i){if(this.map){const n=this.map.getView(),r=n.getProjection();let o=e;i&&(o=at.getExtentFromTransform(e,i,r));const s=n.getResolutionForExtent(o,this.map.getSize());n.setResolution(s),n.setCenter(Zi(o))}}zoomToExtent(e){const i=this.MapView,n=i?.getProjection();if(n){const r=at.getExtentFrom4326(e,n),o=i.getResolutionForExtent(r,this.map.getSize());i.setResolution(o);const s=Zi(r);i.setCenter(s)}}zoomToCenter(e,i){const n=this.MapView;if(e){const r=at.fromLonLatCoordinate(e,n.getProjection());n.setCenter(r),i!=null&&i>0&&n.setZoom(i)}}goHomeView(){this.zoomToCenter(this.defaultHomeView.center,this.defaultHomeView.zoom)}newEvtArgs(e,i=null){const n=new n0(this.target,this.mapGroup);return n.data=e,n.target=i,n}enableMapSyncView(){this.mapEventBus.eventOn(Lt.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOn(Lt.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}disableMapSyncView(){this.mapEventBus.eventOff(Lt.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOff(Lt.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}mapSyncView(e){if(e.mapGroup===this.mapGroup&&e.mapID!=this.target){const{zoom:i,x:n,y:r}=e.data;this.isMainSync=!0,this.map.un("moveend",this.onMoveEnd.bind(this));const o=this.map.getView();o.setZoom(i),o.setCenter([n,r]),setTimeout(()=>{const s=this.newEvtArgs();this.mapEventBus.eventEmit(Lt.MAP_SYNC_VIEW_END,s)},200)}}mapSyncViewEnd(e){e.mapGroup===this.mapGroup&&(e.mapID!=this.target?this.isMainSync=!1:(this.isMainSync=!1,this.map.on("moveend",this.onMoveEnd.bind(this))))}onMoveEnd(e){if(!this.isMainSync){this.isMainSync=!0;const i=e.map.getView(),n=i.getZoom(),[r,o]=i.getCenter(),s=this.newEvtArgs({zoom:n,x:r,y:o},null);this.mapEventBus.eventEmit(Lt.MAP_SYNC_VIEW,s)}}onResolutionChanged(e){const i=this.map.getView();if(i){let n=i.getZoom();const r=this.newEvtArgs(n,null);this.mapEventBus.eventEmit(Lt.MAP_ZOOM_CHANGED,r),this.postionStatus.zoom=`级别：${n.toFixed(1)}`,this.refreshPostionStatus()}}swipe;get RollSwipe(){if(!this.swipe){const e=document.getElementById(this.target);this.swipe=new ym(e,this)}return this.swipe}DefaultInteractionKeys={FishEyeClip:"FishEyeClip"};addInteractionExt(e,i){return!(!i||!e||this.InteractionsDiction.has(e))&&(this.map.addInteraction(i),this.InteractionsDiction.set(e,i),!0)}containsInteractionExt(e){return this.InteractionsDiction.has(e)}getInteractionExt(e){return this.InteractionsDiction.get(e)}removeInteractionExt(e){if(this.InteractionsDiction.has(e)){const i=this.InteractionsDiction.get(e);this.map.removeInteraction(i)}}clearInteractionExt(){this.InteractionsDiction.size>0&&(this.InteractionsDiction.forEach((e,i)=>{this.map.removeInteraction(e)}),this.InteractionsDiction.clear())}DefaultControlKeys={overview:"overview",target:"target",scale:"scale",scaleline:"scaleline"};addControlExt(e,i){return!(!i||!e||this.ControlsDiction.has(e))&&(this.map.addControl(i),this.ControlsDiction.set(e,i),!0)}containsControlExt(e){return this.ControlsDiction.has(e)}getControlExt(e){return this.ControlsDiction.get(e)}removeControlExt(e){if(this.ControlsDiction.has(e)){const i=this.ControlsDiction.get(e);this.map.removeControl(i)}}clearControlExt(){this.ControlsDiction.size>0&&(this.ControlsDiction.forEach((e,i)=>{this.map.removeControl(e)}),this.ControlsDiction.clear())}}class mS{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=An,this.supportedMediaTypes=null}getReadOptions(e,i){if(i){let n=i.dataProjection?lt(i.dataProjection):this.readProjection(e);i.extent&&n&&n.getUnits()==="tile-pixels"&&(n=lt(n),n.setWorldExtent(i.extent)),i={dataProjection:n,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Ke()}readFeature(e,i){return Ke()}readFeatures(e,i){return Ke()}readGeometry(e,i){return Ke()}readProjection(e){return Ke()}writeFeature(e,i){return Ke()}writeFeatures(e,i){return Ke()}writeGeometry(e,i){return Ke()}}function jd(t,e,i){const n=i?lt(i.featureProjection):null,r=i?lt(i.dataProjection):null;let o=t;if(n&&r&&!ar(n,r)){e&&(o=t.clone());const s=e?n:r,a=e?r:n;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(Aa(s,a))}if(e&&i&&i.decimals!==void 0){const s=Math.pow(10,i.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*s)/s;return l};o===t&&(o=t.clone()),o.applyTransform(a)}return o}const vL={Point:_n,LineString:un,Polygon:Qi,MultiPoint:tl,MultiLineString:ys,MultiPolygon:_s};function vS(t,e){const i=t.geometry;if(!i)return[];if(Array.isArray(i))return i.map(o=>vS({...t,geometry:o})).flat();const n=i.type==="MultiPolygon"?"Polygon":i.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const r=i.layout.length;return jd(new ki(n,n==="Polygon"?function(o,s,a){return Array.isArray(s[0])?(pw(o,0,s,a)||gg(o=o.slice(),0,s,a),o):(Av(o,0,s,a)||Nh(o=o.slice(),0,s,a),o)}(i.flatCoordinates,i.ends,r):i.flatCoordinates,i.ends?.flat(),r,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function Sm(t,e){if(!t)return null;if(Array.isArray(t)){const i=t.map(n=>Sm(n,e));return new xu(i)}return jd(new vL[t.type](t.flatCoordinates,t.layout,t.ends),!1,e)}class yL extends mS{constructor(){super()}getType(){return"json"}readFeature(e,i){return this.readFeatureFromObject(zc(e),this.getReadOptions(e,i))}readFeatures(e,i){return this.readFeaturesFromObject(zc(e),this.getReadOptions(e,i))}readFeatureFromObject(e,i){return Ke()}readFeaturesFromObject(e,i){return Ke()}readGeometry(e,i){return this.readGeometryFromObject(zc(e),this.getReadOptions(e,i))}readGeometryFromObject(e,i){return Ke()}readProjection(e){return this.readProjectionFromObject(zc(e))}readProjectionFromObject(e){return Ke()}writeFeature(e,i){return JSON.stringify(this.writeFeatureObject(e,i))}writeFeatureObject(e,i){return Ke()}writeFeatures(e,i){return JSON.stringify(this.writeFeaturesObject(e,i))}writeFeaturesObject(e,i){return Ke()}writeGeometry(e,i){return JSON.stringify(this.writeGeometryObject(e,i))}writeGeometryObject(e,i){return Ke()}}function zc(t){return typeof t=="string"?JSON.parse(t)||null:t!==null?t:null}class f_ extends yL{constructor(e){e=e||{},super(),this.dataProjection=lt(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=lt(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,i){let n=null;n=e.type==="Feature"?e:{type:"Feature",geometry:e,properties:null};const r=Cm(n.geometry);if(this.featureClass===ki)return vS({geometry:r,id:n.id,properties:n.properties},i);const o=new An;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&o.setGeometryName(n.geometry_name),o.setGeometry(Sm(r,i)),"id"in n&&o.setId(n.id),n.properties&&o.setProperties(n.properties,!0),o}readFeaturesFromObject(e,i){let n=null;if(e.type==="FeatureCollection"){n=[];const r=e.features;for(let o=0,s=r.length;o<s;++o){const a=this.readFeatureFromObject(r[o],i);a&&n.push(a)}}else n=[this.readFeatureFromObject(e,i)];return n.flat()}readGeometryFromObject(e,i){return function(n,r){const o=Cm(n);return Sm(o,r)}(e,i)}readProjectionFromObject(e){const i=e.crs;let n;if(i)if(i.type=="name")n=lt(i.properties.name);else{if(i.type!=="EPSG")throw new Error("Unknown SRS type");n=lt("EPSG:"+i.properties.code)}else n=this.dataProjection;return n}writeFeatureObject(e,i){i=this.adaptOptions(i);const n={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(n.id=r),!e.hasProperties())return n;const o=e.getProperties(),s=e.getGeometry();return s&&(n.geometry=Mm(s,i),delete o[e.getGeometryName()]),xo(o)||(n.properties=o),n}writeFeaturesObject(e,i){i=this.adaptOptions(i);const n=[];for(let r=0,o=e.length;r<o;++r)n.push(this.writeFeatureObject(e[r],i));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,i){return Mm(e,this.adaptOptions(i))}}function Cm(t,e){if(!t)return null;let i;switch(t.type){case"Point":i=function(n){const r=n.coordinates;return{type:"Point",flatCoordinates:r,layout:$o(r.length)}}(t);break;case"LineString":i=function(n){const r=n.coordinates,o=r.flat();return{type:"LineString",flatCoordinates:o,ends:[o.length],layout:$o(r[0]?.length||2)}}(t);break;case"Polygon":i=function(n){const r=n.coordinates,o=[],s=r[0]?.[0]?.length,a=fu(o,0,r,s);return{type:"Polygon",flatCoordinates:o,ends:a,layout:$o(s)}}(t);break;case"MultiPoint":i=function(n){const r=n.coordinates;return{type:"MultiPoint",flatCoordinates:r.flat(),layout:$o(r[0]?.length||2)}}(t);break;case"MultiLineString":i=function(n){const r=n.coordinates,o=r[0]?.[0]?.length||2,s=[],a=fu(s,0,r,o);return{type:"MultiLineString",flatCoordinates:s,ends:a,layout:$o(o)}}(t);break;case"MultiPolygon":i=function(n){const r=n.coordinates,o=[],s=r[0]?.[0]?.[0].length||2,a=ow(o,0,r,s);return{type:"MultiPolygon",flatCoordinates:o,ends:a,layout:$o(s)}}(t);break;case"GeometryCollection":i=function(n){return n.geometries.map(function(r){return Cm(r)})}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return i}function Mm(t,e){const i=(t=jd(t,!0,e)).getType();let n;switch(i){case"Point":n=function(r){return{type:"Point",coordinates:r.getCoordinates()}}(t);break;case"LineString":n=function(r){return{type:"LineString",coordinates:r.getCoordinates()}}(t);break;case"Polygon":n=function(r,o){let s;return o&&(s=o.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(s)}}(t,e);break;case"MultiPoint":n=function(r){return{type:"MultiPoint",coordinates:r.getCoordinates()}}(t);break;case"MultiLineString":n=function(r){return{type:"MultiLineString",coordinates:r.getCoordinates()}}(t);break;case"MultiPolygon":n=function(r,o){let s;return o&&(s=o.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(s)}}(t,e);break;case"GeometryCollection":n=function(r,o){return o=Object.assign({},o),delete o.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(s){return Mm(s,o)})}}(t,e);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}const km=4294967296,g_=1/km,m_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class _L{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,i,n=this.length){for(;this.pos<n;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=7&r,e(o,i,this),this.pos===s&&this.skip(r)}return i}readMessage(e,i){return this.readFields(e,i,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*km;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*km;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const i=this.buf;let n,r;return r=i[this.pos++],n=127&r,r<128?n:(r=i[this.pos++],n|=(127&r)<<7,r<128?n:(r=i[this.pos++],n|=(127&r)<<14,r<128?n:(r=i[this.pos++],n|=(127&r)<<21,r<128?n:(r=i[this.pos],n|=(15&r)<<28,function(o,s,a){const l=a.buf;let u,c;if(c=l[a.pos++],u=(112&c)>>4,c<128||(c=l[a.pos++],u|=(127&c)<<3,c<128)||(c=l[a.pos++],u|=(127&c)<<10,c<128)||(c=l[a.pos++],u|=(127&c)<<17,c<128)||(c=l[a.pos++],u|=(127&c)<<24,c<128)||(c=l[a.pos++],u|=(1&c)<<31,c<128))return bL(o,u,s);throw new Error("Expected varint not more than 10 bytes")}(n,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&m_?m_.decode(this.buf.subarray(i,e)):function(n,r,o){let s="",a=r;for(;a<o;){const l=n[a];let u,c,h,d=null,p=l>239?4:l>223?3:l>191?2:1;if(a+p>o)break;p===1?l<128&&(d=l):p===2?(u=n[a+1],(192&u)==128&&(d=(31&l)<<6|63&u,d<=127&&(d=null))):p===3?(u=n[a+1],c=n[a+2],(192&u)==128&&(192&c)==128&&(d=(15&l)<<12|(63&u)<<6|63&c,(d<=2047||d>=55296&&d<=57343)&&(d=null))):p===4&&(u=n[a+1],c=n[a+2],h=n[a+3],(192&u)==128&&(192&c)==128&&(192&h)==128&&(d=(15&l)<<18|(63&u)<<12|(63&c)<<6|63&h,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,p=1):d>65535&&(d-=65536,s+=String.fromCharCode(d>>>10&1023|55296),d=56320|1023&d),s+=String.fromCharCode(d),a+=p}return s}(this.buf,i,e)}readBytes(){const e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i}readPackedVarint(e=[],i){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(i));return e}readPackedSVarint(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const i=7&e;if(i===0)for(;this.buf[this.pos++]>127;);else if(i===2)this.pos=this.readVarint()+this.pos;else if(i===5)this.pos+=4;else{if(i!==1)throw new Error(`Unimplemented type: ${i}`);this.pos+=8}}writeTag(e,i){this.writeVarint(e<<3|i)}realloc(e){let i=this.length||16;for(;i<this.pos+e;)i*=2;if(i!==this.length){const n=new Uint8Array(i);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*g_),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*g_),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?function(i,n){let r,o;if(i>=0?(r=i%4294967296|0,o=i/4294967296|0):(r=~(-i%4294967296),o=~(-i/4294967296),4294967295^r?r=r+1|0:(r=0,o=o+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(s,a,l){l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos]=127&s}(r,0,n),function(s,a){const l=(7&s)<<4;a.buf[a.pos++]|=l|((s>>>=3)?128:0),s&&(a.buf[a.pos++]=127&s|((s>>>=7)?128:0),s&&(a.buf[a.pos++]=127&s|((s>>>=7)?128:0),s&&(a.buf[a.pos++]=127&s|((s>>>=7)?128:0),s&&(a.buf[a.pos++]=127&s|((s>>>=7)?128:0),s&&(a.buf[a.pos++]=127&s)))))}(o,n)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const i=this.pos;this.pos=function(r,o,s){for(let a,l,u=0;u<o.length;u++){if(a=o.charCodeAt(u),a>55295&&a<57344){if(!l){a>56319||u+1===o.length?(r[s++]=239,r[s++]=191,r[s++]=189):l=a;continue}if(a<56320){r[s++]=239,r[s++]=191,r[s++]=189,l=a;continue}a=l-55296<<10|a-56320|65536,l=null}else l&&(r[s++]=239,r[s++]=191,r[s++]=189,l=null);a<128?r[s++]=a:(a<2048?r[s++]=a>>6|192:(a<65536?r[s++]=a>>12|224:(r[s++]=a>>18|240,r[s++]=a>>12&63|128),r[s++]=a>>6&63|128),r[s++]=63&a|128)}return s}(this.buf,e,this.pos);const n=this.pos-i;n>=128&&v_(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const i=e.length;this.writeVarint(i),this.realloc(i);for(let n=0;n<i;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,i){this.pos++;const n=this.pos;e(i,this);const r=this.pos-n;r>=128&&v_(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeMessage(e,i,n){this.writeTag(e,2),this.writeRawMessage(i,n)}writePackedVarint(e,i){i.length&&this.writeMessage(e,xL,i)}writePackedSVarint(e,i){i.length&&this.writeMessage(e,wL,i)}writePackedBoolean(e,i){i.length&&this.writeMessage(e,ML,i)}writePackedFloat(e,i){i.length&&this.writeMessage(e,SL,i)}writePackedDouble(e,i){i.length&&this.writeMessage(e,CL,i)}writePackedFixed32(e,i){i.length&&this.writeMessage(e,kL,i)}writePackedSFixed32(e,i){i.length&&this.writeMessage(e,TL,i)}writePackedFixed64(e,i){i.length&&this.writeMessage(e,EL,i)}writePackedSFixed64(e,i){i.length&&this.writeMessage(e,LL,i)}writeBytesField(e,i){this.writeTag(e,2),this.writeBytes(i)}writeFixed32Field(e,i){this.writeTag(e,5),this.writeFixed32(i)}writeSFixed32Field(e,i){this.writeTag(e,5),this.writeSFixed32(i)}writeFixed64Field(e,i){this.writeTag(e,1),this.writeFixed64(i)}writeSFixed64Field(e,i){this.writeTag(e,1),this.writeSFixed64(i)}writeVarintField(e,i){this.writeTag(e,0),this.writeVarint(i)}writeSVarintField(e,i){this.writeTag(e,0),this.writeSVarint(i)}writeStringField(e,i){this.writeTag(e,2),this.writeString(i)}writeFloatField(e,i){this.writeTag(e,5),this.writeFloat(i)}writeDoubleField(e,i){this.writeTag(e,1),this.writeDouble(i)}writeBooleanField(e,i){this.writeVarintField(e,+i)}}function bL(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function v_(t,e,i){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(let r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function xL(t,e){for(let i=0;i<t.length;i++)e.writeVarint(t[i])}function wL(t,e){for(let i=0;i<t.length;i++)e.writeSVarint(t[i])}function SL(t,e){for(let i=0;i<t.length;i++)e.writeFloat(t[i])}function CL(t,e){for(let i=0;i<t.length;i++)e.writeDouble(t[i])}function ML(t,e){for(let i=0;i<t.length;i++)e.writeBoolean(t[i])}function kL(t,e){for(let i=0;i<t.length;i++)e.writeFixed32(t[i])}function TL(t,e){for(let i=0;i<t.length;i++)e.writeSFixed32(t[i])}function EL(t,e){for(let i=0;i<t.length;i++)e.writeFixed64(t[i])}function LL(t,e){for(let i=0;i<t.length;i++)e.writeSFixed64(t[i])}class _h extends mS{constructor(e){super(),e=e||{},this.dataProjection=new or({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:ki,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,i,n,r){e.pos=i.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,l=0,u=0,c=0,h=0;for(;e.pos<o;){if(!a){const d=e.readVarint();s=7&d,a=d>>3}if(a--,s===1||s===2)l+=e.readSVarint(),u+=e.readSVarint(),s===1&&c>h&&(r.push(c),h=c),n.push(l,u),c+=2;else{if(s!==7)throw new Error("Invalid command found in the PBF");c>h&&(n.push(n[h],n[h+1]),c+=2)}}c>h&&(r.push(c),h=c)}createFeature_(e,i,n){const r=i.type;if(r===0)return null;let o;const s=i.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=i.id,s[this.layerName_]=i.layer.name;const l=[],u=[];this.readRawGeometry_(e,i,l,u);const c=function(h,d){let p;return h===1?p=d===1?"Point":"MultiPoint":h===2?p=d===1?"LineString":"MultiLineString":h===3&&(p="Polygon"),p}(r,u.length);if(this.featureClass===ki)o=new this.featureClass(c,l,u,2,s,a),o.transform(n.dataProjection);else{let h;if(c=="Polygon"){const p=fw(l,u);h=p.length>1?new _s(l,"XY",p):new Qi(l,"XY",u)}else h=c==="Point"?new _n(l,"XY"):c==="LineString"?new un(l,"XY"):c==="MultiPoint"?new tl(l,"XY"):c==="MultiLineString"?new ys(l,"XY",u):null;o=new this.featureClass,this.geometryName_&&o.setGeometryName(this.geometryName_);const d=jd(h,!1,n);o.setGeometry(d),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,i){const n=this.layers_,r=lt((i=this.adaptOptions(i)).dataProjection);r.setWorldExtent(i.extent),i.dataProjection=r;const o=new _L(e),s=o.readFields(PL,{}),a=[];for(const l in s){if(n&&!n.includes(l))continue;const u=s[l],c=u?[0,0,u.extent,u.extent]:null;r.setExtent(c);for(let h=0,d=u.length;h<d;++h){const p=qL(o,u,h),f=this.createFeature_(o,p,i);f!==null&&a.push(f)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function PL(t,e,i){if(t===3){const n={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(IL,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function IL(t,e,i){if(t===15)e.version=i.readVarint();else if(t===1)e.name=i.readString();else if(t===5)e.extent=i.readVarint();else if(t===2)e.features.push(i.pos);else if(t===3)e.keys.push(i.readString());else if(t===4){let n=null;const r=i.readVarint()+i.pos;for(;i.pos<r;)n=(t=i.readVarint()>>3)===1?i.readString():t===2?i.readFloat():t===3?i.readDouble():t===4?i.readVarint64():t===5?i.readVarint():t===6?i.readSVarint():t===7?i.readBoolean():null;e.values.push(n)}}function RL(t,e,i){if(t==1)e.id=i.readVarint();else if(t==2){const n=i.readVarint()+i.pos;for(;i.pos<n;){const r=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[r]=o}}else t==3?e.type=i.readVarint():t==4&&(e.geometry=i.pos)}function qL(t,e,i){t.pos=e.features[i];const n=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(RL,r,n),r}const AL={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},y_={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class FL extends s2{constructor(e,i){super(e,i),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=[1,0,0,1,0,0],this.tileClipContexts_=null}drawTile(e,i,n,r,o,s,a,l){this.updateExecutorGroup_(e,i.pixelRatio,i.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,i),super.drawTile(e,i,n,r,o,s,a,l)}getTile(e,i,n,r){const o=this.getOrCreateTile(e,i,n,r);if(!o)return null;const s=r.viewState.resolution,a=r.viewHints;return(a[sn]||a[Bn])&&o.wantedResolution||(o.wantedResolution=s),o}prepareFrame(e){const i=this.getLayer().getRevision();return this.renderedLayerRevision_!==i&&(this.renderedLayerRevision_=i,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,i,n){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==o&&l.renderedRenderOrder==s)return;const u=r.getSource(),c=!!r.getDeclutter(),h=u.getTileGrid(),d=u.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),p=u.getSourceTiles(i,n,e),f=Qe(r);delete e.hitDetectionImageData[f],e.executorGroups[f]=[],l.dirty=!1;for(let g=0,_=p.length;g<_;++g){const v=p[g];if(v.getState()!=Gt)continue;const b=v.tileCoord,m=h.getTileCoordExtent(b),y=zi(d,m),x=fo(y,r.getRenderBuffer()*a,this.tempExtent),C=Fr(m,y)?null:x,k=new D2(0,y,a,i),P=mm(a,i),A=function(M,R){let q;const F=M.getStyleFunction()||r.getStyleFunction();if(F&&(q=F(M,a)),q){const B=this.renderFeature(M,P,q,k,c,R);l.dirty=l.dirty||B}},E=v.getFeatures();s&&s!==l.renderedRenderOrder&&E.sort(s);for(let M=0,R=E.length;M<R;++M){const q=E[M];C&&!ii(C,q.getGeometry().getExtent())||A.call(this,q,M)}const L=k.finish(),T=r.getRenderMode()!=="vector"&&c&&p.length===1?null:y,I=new N2(T,a,i,u.getOverlaps(),L,r.getRenderBuffer(),!0);e.executorGroups[f].push(I)}l.renderedRevision=o,l.renderedRenderOrder=s,l.renderedResolution=a}forEachFeatureAtCoordinate(e,i,n,r,o){const s=i.viewState.resolution,a=i.viewState.rotation;n=n??0;const l=this.getLayer(),u=l.getSource().getTileGridForProjection(i.viewState.projection),c=Ra([e]);fo(c,s*n,c);const h={},d=function(b,m,y){let x=b.getId();x===void 0&&(x=Qe(b));const C=h[x];if(C){if(C!==!0&&y<C.distanceSq){if(y===0)return h[x]=!0,o.splice(o.lastIndexOf(C),1),r(b,l,m);C.geometry=m,C.distanceSq=y}}else{if(y===0)return h[x]=!0,r(b,l,m);o.push(h[x]={feature:b,layer:l,geometry:m,distanceSq:y,callback:r})}},p=this.renderedTiles,f=Qe(l),g=l.getDeclutter(),_=g?i.declutter[g].all().map(b=>b.value):null;let v;e:for(let b=0,m=p.length;b<m;++b){const y=p[b];if(!ii(u.getTileCoordExtent(y.wrappedTileCoord),c))continue;const x=y.executorGroups[f];for(let C=0,k=x.length;C<k;++C)if(v=x[C].forEachFeatureAtCoordinate(e,s,a,n,d,_),v)break e}return v}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((i,n)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,u=o.getTileGridForProjection(s),c=ai(this.renderedPixelToCoordinateTransform_,e.slice()),h=u.getTileCoordForCoordAndResolution(c,l).toString(),d=this.renderedTiles.find(b=>b.tileCoord.toString()===h&&b.getState()===Gt);if(!d||d.loadingSourceTiles>0)return void i([]);o.getWrapX()&&s.canWrapX()&&!zn(a,u.getTileCoordExtent(d.tileCoord))&&vv(c,s);const p=Qe(r),f=xn(u.getTileCoordExtent(d.wrappedTileCoord)),g=[(c[0]-f[0])/l,(f[1]-c[1])/l],_=d.getSourceTiles().reduce((b,m)=>b.concat(m.getFeatures()),[]);let v=d.hitDetectionImageData[p];if(!v){const b=li(u.getTileSize(u.getZForResolution(l,o.zDirection))),m=this.renderedRotation_;v=j2(b,[this.getRenderTransform(u.getTileCoordCenter(d.wrappedTileCoord),l,0,an,b[0]*an,b[1]*an,0)],_,r.getStyleFunction(),u.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(r).renderedResolution,m),d.hitDetectionImageData[p]=v}i(V2(g,_,v))})}getFeaturesInExtent(e){const i=[],n=this.getTileCache();if(n.getCount()===0)return i;const r=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=r.getZForResolution(this.renderedResolution),s={};return n.forEach(a=>{if(a.tileCoord[0]!==o||a.getState()!==Gt)return;const l=a.getSourceTiles();for(let u=0,c=l.length;u<c;++u){const h=l[u],d=h.getKey();if(d in s)continue;s[d]=!0;const p=h.tileCoord;if(ii(e,r.getTileCoordExtent(p))){const f=h.getFeatures();if(f)for(let g=0,_=f.length;g<_;++g){const v=f[g],b=v.getGeometry();ii(e,b.getExtent())&&i.push(v)}}}}),i}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,i){const n=this.context,r=n.globalAlpha;n.globalAlpha=i.opacity;const o=e.viewHints,s=!(o[sn]||o[Bn]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),u=l?e.declutter[l]:void 0,c=Qe(this.getLayer()),h=this.renderedTiles;for(let d=0,p=h.length;d<p;++d){const f=h[d],g=f.executorGroups[c];if(g)for(let _=g.length-1;_>=0;--_)g[_].execute(this.context,a,this.getTileRenderTransform(f,e),e.viewState.rotation,s,Jh,u)}n.globalAlpha=r}renderDeferredInternal(e){const i=this.renderedTiles,n=Qe(this.getLayer()),r=i.reduce((a,l,u)=>(l.executorGroups[n].forEach(c=>a.push({executorGroup:c,index:u})),a),[]),o=r.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,l=r.length;a<l;++a){const u=r[a].executorGroup.getDeferredZIndexContexts();for(const c in u)s[c]=!0}Object.keys(s).map(Number).sort(nr).forEach(a=>{o.forEach((l,u)=>{l[a]&&(l[a].forEach(c=>{const{executorGroup:h,index:d}=r[u],p=h.getRenderedContext(),f=p.globalAlpha;p.globalAlpha=this.renderedOpacity_;const g=this.tileClipContexts_[d];g&&g.draw(p),c.draw(p),g&&p.restore(),p.globalAlpha=f,c.clear()}),l[a].length=0)})})}getTileRenderTransform(e,i){const n=i.pixelRatio,r=i.viewState,o=r.center,s=r.resolution,a=r.rotation,l=i.size,u=Math.round(l[0]*n),c=Math.round(l[1]*n),h=this.getLayer().getSource().getTileGridForProjection(i.viewState.projection),d=e.tileCoord,p=h.getTileCoordExtent(e.wrappedTileCoord),f=h.getTileCoordExtent(d,this.tempExtent)[0]-p[0];return zh(_p(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(o,s,a,n,u,c,f))}postRender(e,i){const n=i.viewHints,r=!(n[sn]||n[Bn]);this.renderedPixelToCoordinateTransform_=i.pixelToCoordinateTransform.slice(),this.renderedRotation_=i.viewState.rotation,this.renderedOpacity_=i.layerStatesArray[i.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=o.getDeclutter(),u=l?y_[s].filter(y=>!Jh.includes(y)):y_[s],c=i.viewState,h=c.rotation,d=o.getSource(),p=d.getTileGridForProjection(c.projection).getZForResolution(c.resolution,d.zDirection),f=this.renderedTiles,g=[],_=[],v=[],b=Qe(o);let m=!0;for(let y=f.length-1;y>=0;--y){const x=f[y];m=m&&!x.getReplayState(o).dirty;const C=x.executorGroups[b].filter(I=>I.hasExecutors(u));if(C.length===0)continue;const k=this.getTileRenderTransform(x,i),P=x.tileCoord[0];let A=!1;const E=C[0].getClipCoords(k);let L,T=e;if(E){L=new Kv,T=L.getContext();for(let I=0,M=g.length;I<M;++I)if(p!==P&&P<_[I]){const R=g[I];ii([E[0],E[3],E[4],E[7]],[R[0],R[3],R[4],R[7]])&&(A||(T.save(),A=!0),T.beginPath(),T.moveTo(E[0],E[1]),T.lineTo(E[2],E[3]),T.lineTo(E[4],E[5]),T.lineTo(E[6],E[7]),T.moveTo(R[6],R[7]),T.lineTo(R[4],R[5]),T.lineTo(R[2],R[3]),T.lineTo(R[0],R[1]),T.clip())}g.push(E),_.push(P)}for(let I=0,M=C.length;I<M;++I)C[I].execute(e,[e.canvas.width,e.canvas.height],k,h,r,u,i.declutter?.[l]);A&&(T===e?T.restore():v[y]=L)}e.globalAlpha=a,this.ready=m,this.tileClipContexts_=v,i.declutter||this.renderDeferredInternal(i),super.postRender(e,i)}renderFeature(e,i,n,r,o,s){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=ed(r,e,n[l],i,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=ed(r,e,n,i,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const i=this.getLayer();if(i.getRenderMode()==="vector")return!1;const n=e.getReplayState(i),r=i.getRevision(),o=e.wantedResolution;return n.renderedTileResolution!==o||n.renderedTileRevision!==r}renderTileImage_(e,i){const n=this.getLayer(),r=e.getReplayState(n),o=n.getRevision(),s=e.executorGroups[Qe(n)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,l=a[0],u=n.getSource();let c=i.pixelRatio;const h=i.viewState.projection,d=u.getTileGridForProjection(h),p=d.getResolution(e.tileCoord[0]),f=i.pixelRatio/e.wantedResolution*p,g=d.getResolution(l),_=e.getContext();c=Math.round(Math.max(c,f/c));const v=u.getTilePixelSize(l,c,h);_.canvas.width=v[0],_.canvas.height=v[1];const b=c/f;if(b!==1){const C=Oy(this.tmpTransform_);_p(C,b,b),_.setTransform.apply(_,C)}const m=d.getTileCoordExtent(a,this.tempExtent),y=f/g,x=Oy(this.tmpTransform_);_p(x,y,-y),function(C,k,P){zh(C,Cv(tw,1,0,0,1,k,P))}(x,-m[0],-m[3]);for(let C=0,k=s.length;C<k;++C)s[C].execute(_,[_.canvas.width*b,_.canvas.height*b],x,0,!0,AL[n.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}var __,vo=class extends Gv{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const i=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i;const n=t.renderMode||"hybrid";Ct(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError===void 0||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new FL(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get($h)}getUseInterimTilesOnError(){return this.get(Gh)}setPreload(t){this.set($h,t)}setUseInterimTilesOnError(t){this.set(Gh,t)}};class R4{xmap;constructor(e){this.xmap=e}addVTLayerNoBounds(e,i){const n=e?.tileSchema;if(e===void 0||n===null)throw new Error("TileJson和TileJson.GridInfo不能为空!");const r=e.prjInfo,o=r?at.getProjection(r):"EPSG:3857";n.extent=r?r.prjExtent:[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7];const s=at.createWMTSTileGrid(n),a=e.minzoom??1,l=e.maxzoom??24,u=new Zl({format:new _h,projection:o,tileGrid:s,minZoom:a,maxZoom:l,urls:e.tiles}),c=e.id??Qn(),h=e.name,d=new vo({source:u,properties:{lyrID:c,lyrName:h,lyrType:"mvt",lyrGroup:"矢量切片",bounds:e.bounds,center:e.center}});this.xmap.map.addLayer(d);const p={id:c,name:h,alias:i,minZoom:a,maxZoom:l,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(d,p),d}addVTLayer(e,i){const n=e?.tileSchema;if(e===void 0||n===null)throw new Error("TileJson和TileJson.GridInfo不能为空!");const r=e.prjInfo,o=r?at.getProjection(r):"EPSG:3857";n.extent=r?r.prjExtent:[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7];const s=at.createWMTSTileGrid(n),a=at.getExtentFrom4326(e.bounds,o),l=e.minzoom,u=e.maxzoom,c=new Zl({format:new _h,projection:o,tileGrid:s,minZoom:l,maxZoom:u,extent:a,urls:e.tiles}),h=e.id??Qn(),d=e.name,p=new vo({source:c,properties:{lyrID:h,lyrName:d,lyrType:"mvt",lyrGroup:"矢量切片",bounds:e.bounds,center:e.center}});this.xmap.map.addLayer(p);const f={id:h,name:d,alias:i,minZoom:l,maxZoom:u,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(p,f),p}addVTLayerW(e,i,n,r){const o=new Zl({format:new _h,projection:"EPSG:3857",minZoom:n,maxZoom:r,url:e}),s=Qn(),a=i,l=new vo({source:o,properties:{lyrID:s,lyrName:a,lyrType:"mvt",lyrGroup:"矢量切片"}});this.xmap.map.addLayer(l);const u={id:s,name:a,minZoom:n,maxZoom:r,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(l,u),l}}(function(t){t[t.grid=0]="grid",t[t.mvt=1]="mvt",t[t.symbol=2]="symbol",t[t.vector=3]="vector",t[t.json=4]="json"})(__||(__={}));var Tm=vr({name:"drawtool",props:{xmap:Ls},components:{Icon:to},setup(t){let e,i=t.xmap;return Nt(()=>{}),se(()=>t.xmap,n=>{i=n}),{changeType:function(n){!e&&i&&(e=new nE(i));const r=n;e?.changeDrawType(r)},clearPic:function(){e?.clearLastDraw()},clearboard:function(){e?.clearboard(),e?.clearInteraction()}}}});const OL={class:"tool-container drawToolList"},zL={title:"画点"},DL={title:"画线"},NL={title:"画面"},BL={title:"画笔"},jL={title:"撤销"},VL={title:"清空"};Tm.render=function(t,e,i,n,r,o){const s=mn("Icon");return $t(),Oi("ul",OL,[De("li",{onClick:e[0]||(e[0]=a=>t.changeType("Point"))},[De("span",zL,[it(s,{icon:"gis:point"})])]),De("li",{onClick:e[1]||(e[1]=a=>t.changeType("LineString"))},[De("span",DL,[it(s,{icon:"gis:polyline"})])]),De("li",{onClick:e[2]||(e[2]=a=>t.changeType("Polygon"))},[De("span",NL,[it(s,{icon:"gis:polygon-o"})])]),De("li",{onClick:e[3]||(e[3]=a=>t.changeType("Hand"))},[De("span",BL,[it(s,{icon:"gis:route-start"})])]),De("li",{onClick:e[4]||(e[4]=(...a)=>t.clearPic&&t.clearPic(...a))},[De("span",jL,[it(s,{icon:"ant-design:undo-outlined"})])]),De("li",{onClick:e[5]||(e[5]=(...a)=>t.clearboard&&t.clearboard(...a))},[De("span",VL,[it(s,{icon:"ant-design:clear-outlined"})])])])},Tm.__file="src/components/MapTools/drawToolBar.vue";var Em=vr({name:"MeasureToolBar",props:{xmap:Ls},components:{Icon:to},setup(t){let e,i=t.xmap;return se(()=>t.xmap,n=>{i=n}),{measureLine:()=>{!e&&i?.map&&(e=new j1(i.map)),e?.addInteraction("line")},measureArea:()=>{!e&&i?.map&&(e=new j1(i.map)),e?.addInteraction("area")},unloadMeasure:()=>{e&&e.removeInteraction()}}}});const $L={class:"tool-container measureToolList"},GL={title:"量线"},HL={title:"量面"},UL={title:"取消"};Em.render=function(t,e,i,n,r,o){const s=mn("Icon");return $t(),Oi("ul",$L,[De("li",{onClick:e[0]||(e[0]=(...a)=>t.measureLine&&t.measureLine(...a))},[De("span",GL,[it(s,{icon:"gis:measure-line"})])]),De("li",{onClick:e[1]||(e[1]=(...a)=>t.measureArea&&t.measureArea(...a))},[De("span",HL,[it(s,{icon:"gis:measure-area"})])]),De("li",{onClick:e[2]||(e[2]=(...a)=>t.unloadMeasure&&t.unloadMeasure(...a))},[De("span",UL,[it(s,{icon:"ant-design:clear-outlined"})])])])},Em.__file="src/components/MapTools/measureToolBar.vue";const Gi=eo({layerTree:!1,dataPanel:!0,location:!1,drawTool:!1,measureTool:!1,swipeTool:!1,otherTool:!1});function vi(t,e,i,n){return Object.defineProperty(t,e,{get:i,set:n,enumerable:!0}),t}function yS(t,e){for(const i in e)vi(t,i,e[i]);return t}var Lm,wn=G(!1),b_="ontouchstart"in window||window.navigator.maxTouchPoints>0,x_=navigator.userAgent||navigator.vendor||window.opera,ct={userAgent:x_,is:function(t){const e=t.toLowerCase(),i=function(s){return/(ipad)/.exec(s)||/(ipod)/.exec(s)||/(windows phone)/.exec(s)||/(iphone)/.exec(s)||/(kindle)/.exec(s)||/(silk)/.exec(s)||/(android)/.exec(s)||/(win)/.exec(s)||/(mac)/.exec(s)||/(linux)/.exec(s)||/(cros)/.exec(s)||/(playbook)/.exec(s)||/(bb)/.exec(s)||/(blackberry)/.exec(s)||[]}(e),n=function(s,a){const l=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(s)||/(opr)[\/]([\w.]+)/.exec(s)||/(vivaldi)[\/]([\w.]+)/.exec(s)||/(chrome|crios)[\/]([\w.]+)/.exec(s)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(s)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(s)||/(firefox|fxios)[\/]([\w.]+)/.exec(s)||/(webkit)[\/]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(s)||[];return{browser:l[5]||l[3]||l[1]||"",version:l[4]||l[2]||"0",platform:a[0]||""}}(e,i),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};n.browser&&(r[n.browser]=!0,r.version=n.version,r.versionNumber=parseInt(n.version,10)),n.platform&&(r[n.platform]=!0);const o=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(o===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,n.browser="edge"):r.crios?(r.chrome=!0,n.browser="chrome"):r.fxios&&(r.firefox=!0,n.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(n.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&o!==!0)&&(r.webkit=!0),r.opr&&(n.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(n.browser="blackberry",r.blackberry=!0):r.playbook?(n.browser="playbook",r.playbook=!0):r.android?(n.browser="android",r.android=!0):r.kindle?(n.browser="kindle",r.kindle=!0):r.silk&&(n.browser="silk",r.silk=!0)),r.name=n.browser,r.platform=n.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):window._cordovaNative===void 0&&window.cordova===void 0||(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),wn.value===!0&&(Lm={is:{...r}}),b_===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const s=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:s,[s]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}(x_),has:{touch:b_},within:{iframe:window.self!==window.top}},Pm={install(t){const{$q:e}=t;wn.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,ct),wn.value=!1}),e.platform=eo(this)):e.platform=this}};{let t;vi(ct.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(Pm,ct),wn.value===!0&&(Object.assign(Pm,Lm,{has:{touch:!1,webStorage:!1},within:{iframe:!1}}),Lm=null)}var WL=Pm;function ue(t){return Ex(vr(t))}function Vn(t){return Ex(t)}var Po=(t,e)=>{const i=eo(t);for(const n in t)vi(e,n,()=>i[n],r=>{i[n]=r});return e},Dt={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Dt,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function hi(){}function Vd(t){return t.button===0}function Di(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function Xt(t){t.stopPropagation()}function yi(t){t.cancelable!==!1&&t.preventDefault()}function et(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function _a(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const i=e===!0?n=>{n.__dragPrevented=!0,n.addEventListener("dragstart",yi,Dt.notPassiveCapture)}:n=>{delete n.__dragPrevented,n.removeEventListener("dragstart",yi,Dt.notPassiveCapture)};t.querySelectorAll("a, img").forEach(i)}function ti(t,e,i){const n=`__q_${e}_evt`;t[n]=t[n]!==void 0?t[n].concat(i):i,i.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Dt[r[3]])})}function Li(t,e){const i=`__q_${e}_evt`;t[i]!==void 0&&(t[i].forEach(n=>{n[0].removeEventListener(n[1],t[n[2]],Dt[n[3]])}),t[i]=void 0)}function nl(t,e=250,i){let n=null;function r(){const o=arguments;n!==null&&clearTimeout(n),n=setTimeout(()=>{n=null,t.apply(this,o)},e)}return r.cancel=()=>{n!==null&&clearTimeout(n)},r}var rf=["sm","md","lg","xl"],{passive:w_}=Dt;Po({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:hi,setDebounce:hi,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0)return void(t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0)));const{visualViewport:i}=window,n=i||window,r=document.scrollingElement||document.documentElement,o=i===void 0||ct.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[i.width*i.scale+window.innerWidth-r.clientWidth,i.height*i.scale+window.innerHeight-r.clientHeight],s=t.config.screen!==void 0&&t.config.screen.bodyClasses===!0;this.__update=h=>{const[d,p]=o();if(p!==this.height&&(this.height=p),d!==this.width)this.width=d;else if(h!==!0)return;let f=this.sizes;this.gt.xs=d>=f.sm,this.gt.sm=d>=f.md,this.gt.md=d>=f.lg,this.gt.lg=d>=f.xl,this.lt.sm=d<f.sm,this.lt.md=d<f.md,this.lt.lg=d<f.lg,this.lt.xl=d<f.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,f=(this.xs===!0?"xs":this.sm===!0&&"sm")||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",f!==this.name&&(s===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${f}`)),this.name=f)};let a,l={},u=16;this.setSizes=h=>{rf.forEach(d=>{h[d]!==void 0&&(l[d]=h[d])})},this.setDebounce=h=>{u=h};const c=()=>{const h=getComputedStyle(document.body);h.getPropertyValue("--q-size-sm")&&rf.forEach(d=>{this.sizes[d]=parseInt(h.getPropertyValue(`--q-size-${d}`),10)}),this.setSizes=d=>{rf.forEach(p=>{d[p]&&(this.sizes[p]=d[p])}),this.__update(!0)},this.setDebounce=d=>{a!==void 0&&n.removeEventListener("resize",a,w_),a=d>0?nl(this.__update,d):this.__update,n.addEventListener("resize",a,w_)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),s===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};wn.value===!0?e.push(c):c()}});var Pi=Po({isActive:!1,mode:!1},{__media:void 0,set(t){Pi.mode=t,t==="auto"?(Pi.__media===void 0&&(Pi.__media=window.matchMedia("(prefers-color-scheme: dark)"),Pi.__updateMedia=()=>{Pi.set("auto")},Pi.__media.addListener(Pi.__updateMedia)),t=Pi.__media.matches):Pi.__media!==void 0&&(Pi.__media.removeListener(Pi.__updateMedia),Pi.__media=void 0),Pi.isActive=t===!0,document.body.classList.remove("body--"+(t===!0?"light":"dark")),document.body.classList.add("body--"+(t===!0?"dark":"light"))},toggle(){Pi.set(Pi.isActive===!1)},install({$q:t,ssrContext:e}){const{dark:i}=t.config;t.dark=this,this.__installed!==!0&&this.set(i!==void 0&&i)}});function xs(t){return t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function Sn(t,e){return xs(t)!==!0&&[].concat(e).includes(t.keyCode)}var Im={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,i)=>t+"-"+e+" of "+i,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function S_(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,i)=>i===0?e.toLowerCase():i>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}var Uo=Po({__qLang:{}},{getLocale:S_,set(t=Im,e){const i={...t,rtl:t.rtl===!0,getLocale:S_};if(i.set=Uo.set,Uo.__langConfig===void 0||Uo.__langConfig.noHtmlAttrs!==!0){const n=document.documentElement;n.setAttribute("dir",i.rtl===!0?"rtl":"ltr"),n.setAttribute("lang",i.isoName)}Object.assign(Uo.__qLang,i)},install({$q:t,lang:e,ssrContext:i}){t.lang=Uo.__qLang,Uo.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys:n=>Reflect.ownKeys(n).filter(r=>r!=="set"&&r!=="getLocale")}),this.set(e||Im))}}),_S=Uo,YL={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},C_=Po({iconMapFn:null,__qIconSet:{}},{set(t,e){const i={...t};i.set=C_.set,Object.assign(C_.__qIconSet,i)},install({$q:t,iconSet:e,ssrContext:i}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,vi(t,"iconMapFn",()=>this.iconMapFn,n=>{this.iconMapFn=n}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys:n=>Reflect.ownKeys(n).filter(r=>r!=="set")}),this.set(e||YL))}}),M_="_q_t_",bS="_q_s_",ws="_q_l_",k_="_q_pc_",xS="_q_f_",wS="_q_fo_",SS="_q_tabs_",T_="_q_u_";function Mt(){}var E_={};function Fn(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let i,n;if(t.constructor===Array){if(i=t.length,i!==e.length)return!1;for(n=i;n--!=0;)if(Fn(t[n],e[n])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let o=t.entries();for(n=o.next();n.done!==!0;){if(e.has(n.value[0])!==!0)return!1;n=o.next()}for(o=t.entries(),n=o.next();n.done!==!0;){if(Fn(n.value[1],e.get(n.value[0]))!==!0)return!1;n=o.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const o=t.entries();for(n=o.next();n.done!==!0;){if(e.has(n.value[0])!==!0)return!1;n=o.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(i=t.length,i!==e.length)return!1;for(n=i;n--!=0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(o=>t[o]!==void 0);if(i=r.length,i!==Object.keys(e).filter(o=>e[o]!==void 0).length)return!1;for(n=i;n--!=0;){const o=r[n];if(Fn(t[o],e[o])!==!0)return!1}return!0}return t!=t&&e!=e}function Ei(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function Rm(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ru(t){return typeof t=="number"&&isFinite(t)}function CS(t,e){const i=nk(t);i.config.globalProperties=e.config.globalProperties;const{reload:n,...r}=e._context;return Object.assign(i._context,r),i}var L_=["B","KB","MB","GB","TB","PB"];function qm(t,e=1){let i=0;for(;parseInt(t,10)>=1024&&i<L_.length-1;)t/=1024,++i;return`${t.toFixed(e)}${L_[i]}`}function Ft(t,e,i){return i<=e?e:Math.min(i,Math.max(e,t))}function sd(t,e,i){if(i<=e)return e;const n=i-e+1;let r=e+(t-e)%n;return r<e&&(r=n+r),r===0?0:r}function St(t,e=2,i="0"){if(t==null)return t;const n=""+t;return n.length>=e?n:new Array(e-n.length+1).join(i)+n}var Am=XMLHttpRequest,P_=Am.prototype.open,KL=["top","right","bottom","left"],Dc=[],Nc=0,XL=ue({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:t=>KL.includes(t)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,hijackFilter:Function},emits:["start","stop"],setup(t,{emit:e}){const{proxy:i}=Me(),n=G(0),r=G(!1),o=G(!0);let s,a=0,l=null;const u=w(()=>`q-loading-bar q-loading-bar--${t.position}`+(t.color!==void 0?` bg-${t.color}`:"")+(o.value===!0?"":" no-transition")),c=w(()=>t.position==="top"||t.position==="bottom"),h=w(()=>c.value===!0?"height":"width"),d=w(()=>{const m=r.value,y=function({p:x,pos:C,active:k,horiz:P,reverse:A,dir:E}){let L=1,T=1;return P===!0?(A===!0&&(L=-1),C==="bottom"&&(T=-1),{transform:`translate3d(${L*(x-100)}%,${k?0:-200*T}%,0)`}):(A===!0&&(T=-1),C==="right"&&(L=-1),{transform:`translate3d(${k?0:E*L*-200}%,${T*(x-100)}%,0)`})}({p:n.value,pos:t.position,active:m,horiz:c.value,reverse:i.$q.lang.rtl===!0&&["top","bottom"].includes(t.position)?t.reverse===!1:t.reverse,dir:i.$q.lang.rtl===!0?-1:1});return y[h.value]=t.size,y.opacity=m?1:0,y}),p=w(()=>r.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"});function f(m=300){const y=s;return s=Math.max(0,m)||0,a++,a>1?(y===0&&m>0?v():l!==null&&y>0&&m<=0&&(clearTimeout(l),l=null),a):(l!==null&&clearTimeout(l),e("start"),n.value=0,l=setTimeout(()=>{l=null,o.value=!0,m>0&&v()},r._value===!0?500:1),r._value!==!0&&(r.value=!0,o.value=!1),a)}function g(m){return a>0&&(n.value=function(y,x){return typeof x!="number"&&(x=y<25?3*Math.random()+3:y<65?3*Math.random():y<85?2*Math.random():y<99?.6:0),Ft(y+x,0,100)}(n.value,m)),a}function _(){if(a=Math.max(0,a-1),a>0)return a;l!==null&&(clearTimeout(l),l=null),e("stop");const m=()=>{o.value=!0,n.value=100,l=setTimeout(()=>{l=null,r.value=!1},1e3)};return n.value===0?l=setTimeout(m,1):m(),a}function v(){n.value<100&&(l=setTimeout(()=>{l=null,g(),v()},s))}let b;return Nt(()=>{var m;t.skipHijack!==!0&&(b=!0,m={start:f,stop:_,hijackFilter:w(()=>t.hijackFilter||null)},Nc++,Dc.push(m),Nc>1||(Am.prototype.open=function(y,x){const C=[];this.addEventListener("loadstart",()=>{Dc.forEach(k=>{k.hijackFilter.value!==null&&k.hijackFilter.value(x)!==!0||(k.start(),C.push(k.stop))})},{once:!0}),this.addEventListener("loadend",()=>{C.forEach(k=>{k()})},{once:!0}),P_.apply(this,arguments)}))}),ht(()=>{l!==null&&clearTimeout(l),b===!0&&function(m){Dc=Dc.filter(y=>y.start!==m),(Nc=Math.max(0,Nc-1))===0&&(Am.prototype.open=P_)}(f)}),Object.assign(i,{start:f,stop:_,increment:g}),()=>S("div",{class:u.value,style:d.value,...p.value})}}),Fm={xs:18,sm:24,md:32,lg:38,xl:46},Br={size:String};function jr(t,e=Fm){return w(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function Ne(t,e){return t!==void 0&&t()||e}function Ju(t,e){if(t!==void 0){const i=t();if(i!=null)return i.slice()}return e}function ni(t,e){return t!==void 0?e.concat(t()):e}function p0(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function Cn(t,e,i,n,r,o){e.key=n+r;const s=S(t,e,i);return r===!0?Ni(s,o()):s}var I_="0 0 24 24",R_=t=>t,of=t=>`ionicons ${t}`,MS={"mdi-":t=>`mdi ${t}`,"icon-":R_,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":of,"ion-ios":of,"ion-logo":of,"iconfont ":R_,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`},kS={o_:"-outlined",r_:"-round",s_:"-sharp"},TS={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},ZL=new RegExp("^("+Object.keys(MS).join("|")+")"),QL=new RegExp("^("+Object.keys(kS).join("|")+")"),q_=new RegExp("^("+Object.keys(TS).join("|")+")"),JL=/^[Mm]\s?[-+]?\.?\d/,eP=/^img:/,tP=/^svguse:/,iP=/^ion-/,nP=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,_t=ue({name:"QIcon",props:{...Br,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=jr(t),r=w(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),o=w(()=>{let s,a=t.name;if(a==="none"||!a)return{none:!0};if(i.iconMapFn!==null){const c=i.iconMapFn(a);if(c!==void 0){if(c.icon===void 0)return{cls:c.cls,content:c.content!==void 0?c.content:" "};if(a=c.icon,a==="none"||!a)return{none:!0}}}if(JL.test(a)===!0){const[c,h=I_]=a.split("|");return{svg:!0,viewBox:h,nodes:c.split("&&").map(d=>{const[p,f,g]=d.split("@@");return S("path",{style:f,d:p,transform:g})})}}if(eP.test(a)===!0)return{img:!0,src:a.substring(4)};if(tP.test(a)===!0){const[c,h=I_]=a.split("|");return{svguse:!0,src:c.substring(7),viewBox:h}}let l=" ";const u=a.match(ZL);if(u!==null)s=MS[u[1]](a);else if(nP.test(a)===!0)s=a;else if(iP.test(a)===!0)s=`ionicons ion-${i.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(q_.test(a)===!0){s="notranslate material-symbols";const c=a.match(q_);c!==null&&(a=a.substring(6),s+=TS[c[1]]),l=a}else{s="notranslate material-icons";const c=a.match(QL);c!==null&&(a=a.substring(2),s+=kS[c[1]]),l=a}return{cls:s,content:l}});return()=>{const s={class:r.value,style:n.value,"aria-hidden":"true",role:"presentation"};return o.value.none===!0?S(t.tag,s,Ne(e.default)):o.value.img===!0?S(t.tag,s,ni(e.default,[S("img",{src:o.value.src})])):o.value.svg===!0?S(t.tag,s,ni(e.default,[S("svg",{viewBox:o.value.viewBox||"0 0 24 24"},o.value.nodes)])):o.value.svguse===!0?S(t.tag,s,ni(e.default,[S("svg",{viewBox:o.value.viewBox},[S("use",{"xlink:href":o.value.src})])])):(o.value.cls!==void 0&&(s.class+=" "+o.value.cls),S(t.tag,s,ni(e.default,[o.value.content])))}}});ue({name:"QAvatar",props:{...Br,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const i=jr(t),n=w(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=w(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const o=t.icon!==void 0?[S(_t,{name:t.icon})]:void 0;return S("div",{class:n.value,style:i.value},[S("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},p0(e.default,o))])}}});var rP=["top","middle","bottom"];ue({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:t=>rP.includes(t)}},setup(t,{slots:e}){const i=w(()=>t.align!==void 0?{verticalAlign:t.align}:null),n=w(()=>{const r=t.outline===!0&&t.color||t.textColor;return`q-badge flex inline items-center no-wrap q-badge--${t.multiLine===!0?"multi":"single"}-line`+(t.outline===!0?" q-badge--outline":t.color!==void 0?` bg-${t.color}`:"")+(r!==void 0?` text-${r}`:"")+(t.floating===!0?" q-badge--floating":"")+(t.rounded===!0?" q-badge--rounded":"")+(t.transparent===!0?" q-badge--transparent":"")});return()=>S("div",{class:n.value,style:i.value,role:"status","aria-label":t.label},ni(e.default,t.label!==void 0?[t.label]:[]))}});var mt={dark:{type:Boolean,default:null}};function vt(t,e){return w(()=>t.dark===null?e.dark.isActive:t.dark)}ue({name:"QBanner",props:{...mt,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=vt(t,i),r=w(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(n.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),o=w(()=>"q-banner__actions row items-center justify-end col-"+(t.inlineActions===!0?"auto":"all"));return()=>{const s=[S("div",{class:"q-banner__avatar col-auto row items-center self-start"},Ne(e.avatar)),S("div",{class:"q-banner__content col text-body2"},Ne(e.default))],a=Ne(e.action);return a!==void 0&&s.push(S("div",{class:o.value},a)),S("div",{class:r.value+(t.inlineActions===!1&&a!==void 0?" q-banner--top-padding":""),role:"alert"},s)}}}),ue({name:"QBar",props:{...mt,dense:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=vt(t,i),r=w(()=>`q-bar row no-wrap items-center q-bar--${t.dense===!0?"dense":"standard"}  q-bar--${n.value===!0?"dark":"light"}`);return()=>S("div",{class:r.value,role:"toolbar"},Ne(e.default))}});var ES={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},oP=Object.keys(ES),f0={align:{type:String,validator:t=>oP.includes(t)}};function g0(t){return w(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${ES[e]}`})}function bh(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function LS(t,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(i=>{LS(t,i)}):t.add(e)}function m0(t){const e=new Set;return t.forEach(i=>{LS(e,i)}),Array.from(e)}function v0(t){return t.appContext.config.globalProperties.$router!==void 0}function yo(t){return t.isUnmounted===!0||t.isDeactivated===!0}var sP=["",!0];function A_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function F_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function O_(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((i,n)=>i===e[n]):t.length===1&&t[0]===e}function aP(t,e){return Array.isArray(t)===!0?O_(t,e):Array.isArray(e)===!0?O_(e,t):t===e}ue({name:"QBreadcrumbs",props:{...f0,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:t=>["none","xs","sm","md","lg","xl"].includes(t),default:"sm"}},setup(t,{slots:e}){const i=g0(t),n=w(()=>`flex items-center ${i.value}${t.gutter==="none"?"":` q-gutter-${t.gutter}`}`),r=w(()=>t.separatorColor?` text-${t.separatorColor}`:""),o=w(()=>` text-${t.activeColor}`);return()=>{if(e.default===void 0)return;const s=m0(Ne(e.default));if(s.length===0)return;let a=1;const l=[],u=s.filter(h=>h.type!==void 0&&h.type.name==="QBreadcrumbsEl").length,c=e.separator!==void 0?e.separator:()=>t.separator;return s.forEach(h=>{if(h.type!==void 0&&h.type.name==="QBreadcrumbsEl"){const d=a<u,p=(d===!0?"":" q-breadcrumbs--last")+((h.props!==null&&sP.includes(h.props.disable))!==!0&&d===!0?o.value:"");a++,l.push(S("div",{class:`flex items-center${p}`},[h])),d===!0&&l.push(S("div",{class:"q-breadcrumbs__separator"+r.value},c()))}else l.push(h)}),S("div",{class:"q-breadcrumbs"},[S("div",{class:n.value},l)])}}});var PS={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},ec={...PS,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function $d({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const i=Me(),{props:n,proxy:r,emit:o}=i,s=v0(i),a=w(()=>n.disable!==!0&&n.href!==void 0),l=w(e===!0?()=>s===!0&&n.disable!==!0&&a.value!==!0&&n.to!==void 0&&n.to!==null&&n.to!=="":()=>s===!0&&a.value!==!0&&n.to!==void 0&&n.to!==null&&n.to!==""),u=w(()=>l.value===!0?b(n.to):null),c=w(()=>u.value!==null),h=w(()=>a.value===!0||c.value===!0),d=w(()=>n.type==="a"||h.value===!0?"a":n.tag||t||"div"),p=w(()=>a.value===!0?{href:n.href,target:n.target}:c.value===!0?{href:u.value.href,target:n.target}:{}),f=w(()=>{if(c.value===!1)return-1;const{matched:y}=u.value,{length:x}=y,C=y[x-1];if(C===void 0)return-1;const k=r.$route.matched;if(k.length===0)return-1;const P=k.findIndex(F_.bind(null,C));if(P!==-1)return P;const A=A_(y[x-2]);return x>1&&A_(C)===A&&k[k.length-1].path!==A?k.findIndex(F_.bind(null,y[x-2])):P}),g=w(()=>c.value===!0&&f.value!==-1&&function(y,x){for(const C in x){const k=x[C],P=y[C];if(typeof k=="string"){if(k!==P)return!1}else if(Array.isArray(P)===!1||P.length!==k.length||k.some((A,E)=>A!==P[E]))return!1}return!0}(r.$route.params,u.value.params)),_=w(()=>g.value===!0&&f.value===r.$route.matched.length-1&&function(y,x){if(Object.keys(y).length!==Object.keys(x).length)return!1;for(const C in y)if(aP(y[C],x[C])===!1)return!1;return!0}(r.$route.params,u.value.params)),v=w(()=>c.value===!0?_.value===!0?` ${n.exactActiveClass} ${n.activeClass}`:n.exact===!0?"":g.value===!0?` ${n.activeClass}`:"":"");function b(y){try{return r.$router.resolve(y)}catch{}return null}function m(y,{returnRouterError:x,to:C=n.to,replace:k=n.replace}={}){if(n.disable===!0)return y.preventDefault(),Promise.resolve(!1);if(y.metaKey||y.altKey||y.ctrlKey||y.shiftKey||y.button!==void 0&&y.button!==0||n.target==="_blank")return Promise.resolve(!1);y.preventDefault();const P=r.$router[k===!0?"replace":"push"](C);return x===!0?P:P.then(()=>{}).catch(()=>{})}return{hasRouterLink:c,hasHrefLink:a,hasLink:h,linkTag:d,resolvedLink:u,linkIsActive:g,linkIsExactActive:_,linkClass:v,linkAttrs:p,getLink:b,navigateToRouterLink:m,navigateOnClick:function(y){if(c.value===!0){const x=C=>m(y,C);o("click",y,x),y.defaultPrevented!==!0&&x()}else o("click",y)}}}ue({name:"QBreadcrumbsEl",props:{...ec,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(t,{slots:e}){const{linkTag:i,linkAttrs:n,linkClass:r,navigateOnClick:o}=$d(),s=w(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(t.disable!==!0?"q-link--focusable"+r.value:"q-breadcrumbs__el--disable"),...n.value,onClick:o})),a=w(()=>"q-breadcrumbs__el-icon"+(t.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const l=[];return t.icon!==void 0&&l.push(S(_t,{class:a.value,name:t.icon})),t.label!==void 0&&l.push(t.label),S(i.value,{...s.value},ni(e.default,l))}}});var Jt={size:{type:[String,Number],default:"1em"},color:String};function ei(t){return{cSize:w(()=>t.size in Fm?`${Fm[t.size]}px`:t.size),classes:w(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}var Un=ue({name:"QSpinner",props:{...Jt,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[S("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function ad(t){if(t===window)return{top:0,left:0};const{top:e,left:i}=t.getBoundingClientRect();return{top:e,left:i}}function $a(t){return t===window?window.innerHeight:t.getBoundingClientRect().height}function Om(t,e){const i=t.style;for(const n in e)i[n]=e[n]}function IS(t,e){if(t==null||t.contains(e)===!0)return!0;for(let i=t.nextElementSibling;i!==null;i=i.nextElementSibling)if(i.contains(e))return!0;return!1}function RS(t,e=250){let i,n=!1;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),i=t.apply(this,arguments)),i}}function z_(t,e,i,n){i.modifiers.stop===!0&&Xt(t);const r=i.modifiers.color;let o=i.modifiers.center;o=o===!0||n===!0;const s=document.createElement("span"),a=document.createElement("span"),l=Di(t),{left:u,top:c,width:h,height:d}=e.getBoundingClientRect(),p=Math.sqrt(h*h+d*d),f=p/2,g=(h-p)/2+"px",_=o?g:l.left-u-f+"px",v=(d-p)/2+"px",b=o?v:l.top-c-f+"px";a.className="q-ripple__inner",Om(a,{height:`${p}px`,width:`${p}px`,transform:`translate3d(${_},${b},0) scale3d(.2,.2,1)`,opacity:0}),s.className="q-ripple"+(r?" text-"+r:""),s.setAttribute("dir","ltr"),s.appendChild(a),e.appendChild(s);const m=()=>{s.remove(),clearTimeout(y)};i.abort.push(m);let y=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${g},${v},0) scale3d(1,1,1)`,a.style.opacity=.2,y=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,y=setTimeout(()=>{s.remove(),i.abort.splice(i.abort.indexOf(m),1)},275)},250)},50)}function D_(t,{modifiers:e,value:i,arg:n}){const r=Object.assign({},t.cfg.ripple,e,i);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||n,keyCodes:[].concat(r.keyCodes||13)}}var Gd=Vn({name:"ripple",beforeMount(t,e){const i=e.instance.$.appContext.config.globalProperties.$q.config||{};if(i.ripple===!1)return;const n={cfg:i,enabled:e.value!==!1,modifiers:{},abort:[],start(r){n.enabled===!0&&r.qSkipRipple!==!0&&r.type===(n.modifiers.early===!0?"pointerdown":"click")&&z_(r,t,n,r.qKeyEvent===!0)},keystart:RS(r=>{n.enabled===!0&&r.qSkipRipple!==!0&&Sn(r,n.modifiers.keyCodes)===!0&&r.type==="key"+(n.modifiers.early===!0?"down":"up")&&z_(r,t,n,!0)},300)};D_(n,e),t.__qripple=n,ti(n,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const i=t.__qripple;i!==void 0&&(i.enabled=e.value!==!1,i.enabled===!0&&Object(e.value)===e.value&&D_(i,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(i=>{i()}),Li(e,"main"),delete t._qripple)}}),ld={none:0,xs:4,sm:8,md:16,lg:24,xl:32},lP={xs:8,sm:10,md:14,lg:20,xl:24},uP=["button","submit","reset"],cP=/[^\s]\/[^\s]/,qS=["flat","outline","push","unelevated"];function y0(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}function AS(t){const e=y0(t);return e!==void 0?{[e]:!0}:{}}var _0={...Br,...PS,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...qS.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...f0.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},hP={..._0,round:Boolean},{passiveCapture:hn}=Dt,$s=null,Gs=null,Hs=null,xt=ue({name:"QBtn",props:{...hP,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{classes:r,style:o,innerClasses:s,attributes:a,hasLink:l,linkTag:u,navigateOnClick:c,isActionable:h}=function(M){const R=jr(M,lP),q=g0(M),{hasRouterLink:F,hasLink:B,linkTag:V,linkAttrs:O,navigateOnClick:$}=$d({fallbackTag:"button"}),J=w(()=>{const K=M.fab===!1&&M.fabMini===!1?R.value:{};return M.padding!==void 0?Object.assign({},K,{padding:M.padding.split(/\s+/).map(U=>U in ld?ld[U]+"px":U).join(" "),minWidth:"0",minHeight:"0"}):K}),te=w(()=>M.rounded===!0||M.fab===!0||M.fabMini===!0),ie=w(()=>M.disable!==!0&&M.loading!==!0),j=w(()=>ie.value===!0?M.tabindex||0:-1),z=w(()=>y0(M,"standard")),N=w(()=>{const K={tabindex:j.value};return B.value===!0?Object.assign(K,O.value):uP.includes(M.type)===!0&&(K.type=M.type),V.value==="a"?(M.disable===!0?K["aria-disabled"]="true":K.href===void 0&&(K.role="button"),F.value!==!0&&cP.test(M.type)===!0&&(K.type=M.type)):M.disable===!0&&(K.disabled="",K["aria-disabled"]="true"),M.loading===!0&&M.percentage!==void 0&&Object.assign(K,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":M.percentage}),K});return{classes:w(()=>{let K;M.color!==void 0?K=M.flat===!0||M.outline===!0?`text-${M.textColor||M.color}`:`bg-${M.color} text-${M.textColor||"white"}`:M.textColor&&(K=`text-${M.textColor}`);const U=M.round===!0?"round":"rectangle"+(te.value===!0?" q-btn--rounded":M.square===!0?" q-btn--square":"");return`q-btn--${z.value} q-btn--${U}`+(K!==void 0?" "+K:"")+(ie.value===!0?" q-btn--actionable q-focusable q-hoverable":M.disable===!0?" disabled":"")+(M.fab===!0?" q-btn--fab":M.fabMini===!0?" q-btn--fab-mini":"")+(M.noCaps===!0?" q-btn--no-uppercase":"")+(M.dense===!0?" q-btn--dense":"")+(M.stretch===!0?" no-border-radius self-stretch":"")+(M.glossy===!0?" glossy":"")+(M.square?" q-btn--square":"")}),style:J,innerClasses:w(()=>q.value+(M.stack===!0?" column":" row")+(M.noWrap===!0?" no-wrap text-no-wrap":"")+(M.loading===!0?" q-btn__content--hidden":"")),attributes:N,hasLink:B,linkTag:V,navigateOnClick:$,isActionable:ie}}(t),d=G(null),p=G(null);let f,g=null,_=null;const v=w(()=>t.label!==void 0&&t.label!==null&&t.label!==""),b=w(()=>t.disable!==!0&&t.ripple!==!1&&{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),m=w(()=>({center:t.round})),y=w(()=>{const M=Math.max(0,Math.min(100,t.percentage));return M>0?{transition:"transform 0.6s",transform:`translateX(${M-100}%)`}:{}}),x=w(()=>{if(t.loading===!0)return{onMousedown:I,onTouchstart:I,onClick:I,onKeydown:I,onKeyup:I};if(h.value===!0){const M={onClick:k,onKeydown:P,onMousedown:E};return n.$q.platform.has.touch===!0&&(M[`onTouchstart${t.onTouchstart!==void 0?"":"Passive"}`]=A),M}return{onClick:et}}),C=w(()=>({ref:d,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:o.value,...a.value,...x.value}));function k(M){if(d.value!==null){if(M!==void 0){if(M.defaultPrevented===!0)return;const R=document.activeElement;if(t.type==="submit"&&R!==document.body&&d.value.contains(R)===!1&&R.contains(d.value)===!1){d.value.focus();const q=()=>{document.removeEventListener("keydown",et,!0),document.removeEventListener("keyup",q,hn),d.value!==null&&d.value.removeEventListener("blur",q,hn)};document.addEventListener("keydown",et,!0),document.addEventListener("keyup",q,hn),d.value.addEventListener("blur",q,hn)}}c(M)}}function P(M){d.value!==null&&(i("keydown",M),Sn(M,[13,32])===!0&&Gs!==d.value&&(Gs!==null&&T(),M.defaultPrevented!==!0&&(d.value.focus(),Gs=d.value,d.value.classList.add("q-btn--active"),document.addEventListener("keyup",L,!0),d.value.addEventListener("blur",L,hn)),et(M)))}function A(M){d.value!==null&&(i("touchstart",M),M.defaultPrevented!==!0&&($s!==d.value&&($s!==null&&T(),$s=d.value,g=M.target,g.addEventListener("touchcancel",L,hn),g.addEventListener("touchend",L,hn)),f=!0,_!==null&&clearTimeout(_),_=setTimeout(()=>{_=null,f=!1},200)))}function E(M){d.value!==null&&(M.qSkipRipple=f===!0,i("mousedown",M),M.defaultPrevented!==!0&&Hs!==d.value&&(Hs!==null&&T(),Hs=d.value,d.value.classList.add("q-btn--active"),document.addEventListener("mouseup",L,hn)))}function L(M){if(d.value!==null&&(M===void 0||M.type!=="blur"||document.activeElement!==d.value)){if(M!==void 0&&M.type==="keyup"){if(Gs===d.value&&Sn(M,[13,32])===!0){const R=new MouseEvent("click",M);R.qKeyEvent=!0,M.defaultPrevented===!0&&yi(R),M.cancelBubble===!0&&Xt(R),d.value.dispatchEvent(R),et(M),M.qKeyEvent=!0}i("keyup",M)}T()}}function T(M){const R=p.value;M===!0||$s!==d.value&&Hs!==d.value||R===null||R===document.activeElement||(R.setAttribute("tabindex",-1),R.focus()),$s===d.value&&(g!==null&&(g.removeEventListener("touchcancel",L,hn),g.removeEventListener("touchend",L,hn)),$s=g=null),Hs===d.value&&(document.removeEventListener("mouseup",L,hn),Hs=null),Gs===d.value&&(document.removeEventListener("keyup",L,!0),d.value!==null&&d.value.removeEventListener("blur",L,hn),Gs=null),d.value!==null&&d.value.classList.remove("q-btn--active")}function I(M){et(M),M.qSkipRipple=!0}return ht(()=>{T(!0)}),Object.assign(n,{click:M=>{h.value===!0&&k(M)}}),()=>{let M=[];t.icon!==void 0&&M.push(S(_t,{name:t.icon,left:t.stack!==!0&&v.value===!0,role:"img"})),v.value===!0&&M.push(S("span",{class:"block"},[t.label])),M=ni(e.default,M),t.iconRight!==void 0&&t.round===!1&&M.push(S(_t,{name:t.iconRight,right:t.stack!==!0&&v.value===!0,role:"img"}));const R=[S("span",{class:"q-focus-helper",ref:p})];return t.loading===!0&&t.percentage!==void 0&&R.push(S("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[S("span",{class:"q-btn__progress-indicator fit block",style:y.value})])),R.push(S("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+s.value},M)),t.loading!==null&&R.push(S(mi,{name:"q-transition--fade"},()=>t.loading===!0?[S("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[S(Un)])]:null)),Ni(S(u.value,C.value,R),[[Gd,b.value,void 0,m.value]])}}}),FS=ue({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:e}){const i=w(()=>{const n=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>t[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return"q-btn-group row no-wrap"+(n.length!==0?" "+n:"")+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>S("div",{class:i.value},Ne(e.default))}});function $n(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),WL.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var OS={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},zS={...OS,contextMenu:Boolean};function b0({showing:t,avoidEmit:e,configureAnchorEl:i}){const{props:n,proxy:r,emit:o}=Me(),s=G(null);let a=null;function l(d){return s.value!==null&&(d===void 0||d.touches===void 0||d.touches.length<=1)}const u={};function c(){Li(u,"anchor")}function h(){if(n.target===!1||n.target===""||r.$el.parentNode===null)s.value=null;else if(n.target===!0)(function(d){for(s.value=d;s.value.classList.contains("q-anchor--skip");)s.value=s.value.parentNode;i()})(r.$el.parentNode);else{let d=n.target;if(typeof n.target=="string")try{d=document.querySelector(n.target)}catch{d=void 0}d!=null?(s.value=d.$el||d,i()):s.value=null}}return i===void 0&&(Object.assign(u,{hide(d){r.hide(d)},toggle(d){r.toggle(d),d.qAnchorHandled=!0},toggleKey(d){Sn(d,13)===!0&&u.toggle(d)},contextClick(d){r.hide(d),yi(d),dt(()=>{r.show(d),d.qAnchorHandled=!0})},prevent:yi,mobileTouch(d){if(u.mobileCleanup(d),l(d)!==!0)return;r.hide(d),s.value.classList.add("non-selectable");const p=d.target;ti(u,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","prevent","notPassive"]]),a=setTimeout(()=>{a=null,r.show(d),d.qAnchorHandled=!0},300)},mobileCleanup(d){s.value.classList.remove("non-selectable"),a!==null&&(clearTimeout(a),a=null),t.value===!0&&d!==void 0&&$n()}}),i=function(d=n.contextMenu){if(n.noParentEvent===!0||s.value===null)return;let p;p=d===!0?r.$q.platform.is.mobile===!0?[[s.value,"touchstart","mobileTouch","passive"]]:[[s.value,"mousedown","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],ti(u,"anchor",p)}),se(()=>n.contextMenu,d=>{s.value!==null&&(c(),i(d))}),se(()=>n.target,()=>{s.value!==null&&c(),h()}),se(()=>n.noParentEvent,d=>{s.value!==null&&(d===!0?c():i())}),Nt(()=>{h(),e!==!0&&n.modelValue===!0&&s.value===null&&o("update:modelValue",!1)}),ht(()=>{a!==null&&clearTimeout(a),c()}),{anchorEl:s,canShow:l,anchorEvents:u}}function DS(t,e){const i=G(null);let n;function r(a,l){const u=(l!==void 0?"add":"remove")+"EventListener",c=l!==void 0?l:n;a!==window&&a[u]("scroll",c,Dt.passive),window[u]("scroll",c,Dt.passive),n=l}function o(){i.value!==null&&(r(i.value),i.value=null)}const s=se(()=>t.noParentEvent,()=>{i.value!==null&&(o(),e())});return ht(s),{localScrollTarget:i,unconfigureScrollTarget:o,changeScrollEvent:r}}var rl={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ol=["beforeShow","show","beforeHide","hide"];function sl({showing:t,canShow:e,hideOnRouteChange:i,handleShow:n,handleHide:r,processOnMount:o}){const s=Me(),{props:a,emit:l,proxy:u}=s;let c;function h(v){if(a.disable===!0||v!==void 0&&v.qAnchorHandled===!0||e!==void 0&&e(v)!==!0)return;const b=a["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!0),c=v,dt(()=>{c===v&&(c=void 0)})),a.modelValue!==null&&b!==!1||d(v)}function d(v){t.value!==!0&&(t.value=!0,l("beforeShow",v),n!==void 0?n(v):l("show",v))}function p(v){if(a.disable===!0)return;const b=a["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!1),c=v,dt(()=>{c===v&&(c=void 0)})),a.modelValue!==null&&b!==!1||f(v)}function f(v){t.value!==!1&&(t.value=!1,l("beforeHide",v),r!==void 0?r(v):l("hide",v))}function g(v){a.disable===!0&&v===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):v===!0!==t.value&&(v===!0?d:f)(c)}se(()=>a.modelValue,g),i!==void 0&&v0(s)===!0&&se(()=>u.$route.fullPath,()=>{i.value===!0&&t.value===!0&&p()}),o===!0&&Nt(()=>{g(a.modelValue)});const _={show:h,hide:p,toggle:function(v){t.value===!0?p(v):h(v)}};return Object.assign(u,_),_}var rs=[],qu=[];function NS(t){qu=qu.filter(e=>e!==t)}function N_(t){NS(t),qu.length===0&&rs.length!==0&&(rs[rs.length-1](),rs=[])}function al(t){qu.length===0?t():rs.push(t)}var ba=[],iu=[],dP=1,Wo=document.body;function x0(t,e){const i=document.createElement("div");if(i.id=e!==void 0?`q-portal--${e}--${dP++}`:t,E_.globalNodes!==void 0){const n=E_.globalNodes.class;n!==void 0&&(i.className=n)}return Wo.appendChild(i),ba.push(i),iu.push(e),i}function BS(t){const e=ba.indexOf(t);ba.splice(e,1),iu.splice(e,1),t.remove()}var xa=[];function jS(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return bh(t)}else if(t.__qPortal===!0){const i=bh(t);return i!==void 0&&i.$options.name==="QPopupProxy"?(t.hide(e),i):t}t=bh(t)}while(t!=null)}var pP=ue({name:"QPortal",setup:(t,{slots:e})=>()=>e.default()});function w0(t,e,i,n){const r=G(!1),o=G(!1);let s=null;const a={},l=n==="dialog"&&function(c){for(c=c.parent;c!=null;){if(c.type.name==="QGlobalDialog")return!0;if(c.type.name==="QDialog"||c.type.name==="QMenu")return!1;c=c.parent}return!1}(t);function u(c){if(o.value=!1,c!==!0)return;N_(a),r.value=!1;const h=xa.indexOf(t.proxy);h!==-1&&xa.splice(h,1),s!==null&&(BS(s),s=null)}return Lx(()=>{u(!0)}),t.proxy.__qPortal=!0,vi(t.proxy,"contentEl",()=>e.value),{showPortal:function(c){if(c===!0)return N_(a),void(o.value=!0);var h;o.value=!1,r.value===!1&&(l===!1&&s===null&&(s=x0(!1,n)),r.value=!0,xa.push(t.proxy),NS(h=a),qu.push(h))},hidePortal:u,portalIsActive:r,portalIsAccessible:o,renderPortal:()=>l===!0?i():r.value===!0?[S(ek,{to:s},S(pP,i))]:void 0}}var us={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Hd(t,e=()=>{},i=()=>{}){return{transitionProps:w(()=>{const n=`q-transition--${t.transitionShow||e()}`,r=`q-transition--${t.transitionHide||i()}`;return{appear:!0,enterFromClass:`${n}-enter-from`,enterActiveClass:`${n}-enter-active`,enterToClass:`${n}-enter-to`,leaveFromClass:`${r}-leave-from`,leaveActiveClass:`${r}-leave-active`,leaveToClass:`${r}-leave-to`}}),transitionStyle:w(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}function wa(){let t;const e=Me();function i(){t=void 0}return Dr(i),ht(i),{removeTick:i,registerTick(n){t=n,dt(()=>{t===n&&(yo(e)===!1&&t(),t=void 0)})}}}function Or(){let t=null;const e=Me();function i(){t!==null&&(clearTimeout(t),t=null)}return Dr(i),ht(i),{removeTimeout:i,registerTimeout(n,r){i(),yo(e)===!1&&(t=setTimeout(()=>{t=null,n()},r))}}}var sf,Ps=[Element,String],fP=[null,document,document.body,document.scrollingElement,document.documentElement];function mr(t,e){let i=function(n){if(n==null)return;if(typeof n=="string")try{return document.querySelector(n)||void 0}catch{return}const r=Bt(n);return r?r.$el||r:void 0}(e);if(i===void 0){if(t==null)return window;i=t.closest(".scroll,.scroll-y,.overflow-auto")}return fP.includes(i)?window:i}function Bc(t){return(t===window?document.body:t).scrollHeight}function _o(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function Ud(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function VS(t,e,i=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=_o(t);i<=0?r!==e&&zm(t,e):requestAnimationFrame(o=>{const s=o-n,a=r+(e-r)/Math.max(s,i)*s;zm(t,a),a!==e&&VS(t,e,i-s,o)})}function $S(t,e,i=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=Ud(t);i<=0?r!==e&&Dm(t,e):requestAnimationFrame(o=>{const s=o-n,a=r+(e-r)/Math.max(s,i)*s;Dm(t,a),a!==e&&$S(t,e,i-s,o)})}function zm(t,e){t!==window?t.scrollTop=e:window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e)}function Dm(t,e){t!==window?t.scrollLeft=e:window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)}function Sa(t,e,i){i?VS(t,e,i):zm(t,e)}function af(t,e,i){i?$S(t,e,i):Dm(t,e)}function xh(){if(sf!==void 0)return sf;const t=document.createElement("p"),e=document.createElement("div");Om(t,{width:"100%",height:"200px"}),Om(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const i=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;return i===n&&(n=e.clientWidth),e.remove(),sf=i-n}function gP(t,e=!0){return!(!t||t.nodeType!==Node.ELEMENT_NODE)&&(e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"])))}var Ga,cs=[];function mP(t){Ga=t.keyCode===27}function vP(){Ga===!0&&(Ga=!1)}function yP(t){Ga===!0&&(Ga=!1,Sn(t,27)===!0&&cs[cs.length-1](t))}function GS(t){window[t]("keydown",mP),window[t]("blur",vP),window[t]("keyup",yP),Ga=!1}function HS(t){ct.is.desktop===!0&&(cs.push(t),cs.length===1&&GS("addEventListener"))}function ud(t){const e=cs.indexOf(t);e!==-1&&(cs.splice(e,1),cs.length===0&&GS("removeEventListener"))}var hs=[];function US(t){hs[hs.length-1](t)}function WS(t){ct.is.desktop===!0&&(hs.push(t),hs.length===1&&document.body.addEventListener("focusin",US))}function Nm(t){const e=hs.indexOf(t);e!==-1&&(hs.splice(e,1),hs.length===0&&document.body.removeEventListener("focusin",US))}var B_,j_,{notPassiveCapture:cd}=Dt,ds=[];function hd(t){const e=t.target;if(e===void 0||e.nodeType===8||e.classList.contains("no-pointer-events")===!0)return;let i=xa.length-1;for(;i>=0;){const n=xa[i].$;if(n.type.name!=="QTooltip"){if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;i--}else i--}for(let n=ds.length-1;n>=0;n--){const r=ds[n];if(r.anchorEl.value!==null&&r.anchorEl.value.contains(e)!==!1||e!==document.body&&(r.innerRef.value===null||r.innerRef.value.contains(e)!==!1))return;t.qClickOutside=!0,r.onClickOutside(t)}}function YS(t){ds.push(t),ds.length===1&&(document.addEventListener("mousedown",hd,cd),document.addEventListener("touchstart",hd,cd))}function dd(t){const e=ds.findIndex(i=>i===t);e!==-1&&(ds.splice(e,1),ds.length===0&&(document.removeEventListener("mousedown",hd,cd),document.removeEventListener("touchstart",hd,cd)))}function pd(t){const e=t.split(" ");return e.length===2&&(["top","center","bottom"].includes(e[0])!==!0?!1:["left","middle","right","start","end"].includes(e[1])===!0||!1)}function KS(t){return!t||t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}var Bm={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function fd(t,e){const i=t.split(" ");return{vertical:i[0],horizontal:Bm[`${i[1]}#${e===!0?"rtl":"ltr"}`]}}function V_(t,e,i,n){return{top:t[i.vertical]-e[n.vertical],left:t[i.horizontal]-e[n.horizontal]}}function S0(t,e=0){if(t.targetEl===null||t.anchorEl===null||e>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0)return void setTimeout(()=>{S0(t,e+1)},10);const{targetEl:i,offset:n,anchorEl:r,anchorOrigin:o,selfOrigin:s,absoluteOffset:a,fit:l,cover:u,maxHeight:c,maxWidth:h}=t;if(ct.is.ios===!0&&window.visualViewport!==void 0){const P=document.body.style,{offsetLeft:A,offsetTop:E}=window.visualViewport;A!==B_&&(P.setProperty("--q-pe-left",A+"px"),B_=A),E!==j_&&(P.setProperty("--q-pe-top",E+"px"),j_=E)}const{scrollLeft:d,scrollTop:p}=i,f=a===void 0?function(P,A){let{top:E,left:L,right:T,bottom:I,width:M,height:R}=P.getBoundingClientRect();return A!==void 0&&(E-=A[1],L-=A[0],I+=A[1],T+=A[0],M+=A[0],R+=A[1]),{top:E,bottom:I,height:R,left:L,right:T,width:M,middle:L+(T-L)/2,center:E+(I-E)/2}}(r,u===!0?[0,0]:n):function(P,A,E){let{top:L,left:T}=P.getBoundingClientRect();return L+=A.top,T+=A.left,E!==void 0&&(L+=E[1],T+=E[0]),{top:L,bottom:L+1,height:1,left:T,right:T+1,width:1,middle:T,center:L}}(r,a,n);Object.assign(i.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:h,maxHeight:c,visibility:"visible"});const{offsetWidth:g,offsetHeight:_}=i,{elWidth:v,elHeight:b}=l===!0||u===!0?{elWidth:Math.max(f.width,g),elHeight:u===!0?Math.max(f.height,_):_}:{elWidth:g,elHeight:_};let m={maxWidth:h,maxHeight:c};l!==!0&&u!==!0||(m.minWidth=f.width+"px",u===!0&&(m.minHeight=f.height+"px")),Object.assign(i.style,m);const y={top:0,center:(C=b)/2,bottom:C,left:0,middle:(x=v)/2,right:x};var x,C;let k=V_(f,y,o,s);if(a===void 0||n===void 0)lf(k,f,y,o,s);else{const{top:P,left:A}=k;lf(k,f,y,o,s);let E=!1;if(k.top!==P){E=!0;const L=2*n[1];f.center=f.top-=L,f.bottom-=L+2}if(k.left!==A){E=!0;const L=2*n[0];f.middle=f.left-=L,f.right-=L+2}E===!0&&(k=V_(f,y,o,s),lf(k,f,y,o,s))}m={top:k.top+"px",left:k.left+"px"},k.maxHeight!==void 0&&(m.maxHeight=k.maxHeight+"px",f.height>k.maxHeight&&(m.minHeight=m.maxHeight)),k.maxWidth!==void 0&&(m.maxWidth=k.maxWidth+"px",f.width>k.maxWidth&&(m.minWidth=m.maxWidth)),Object.assign(i.style,m),i.scrollTop!==p&&(i.scrollTop=p),i.scrollLeft!==d&&(i.scrollLeft=d)}function lf(t,e,i,n,r){const o=i.bottom,s=i.right,a=xh(),l=window.innerHeight-a,u=document.body.clientWidth;if(t.top<0||t.top+o>l)if(r.vertical==="center")t.top=e[n.vertical]>l/2?Math.max(0,l-o):0,t.maxHeight=Math.min(o,l);else if(e[n.vertical]>l/2){const c=Math.min(l,n.vertical==="center"?e.center:n.vertical===r.vertical?e.bottom:e.top);t.maxHeight=Math.min(o,c),t.top=Math.max(0,c-o)}else t.top=Math.max(0,n.vertical==="center"?e.center:n.vertical===r.vertical?e.top:e.bottom),t.maxHeight=Math.min(o,l-t.top);if(t.left<0||t.left+s>u)if(t.maxWidth=Math.min(s,u),r.horizontal==="middle")t.left=e[n.horizontal]>u/2?Math.max(0,u-s):0;else if(e[n.horizontal]>u/2){const c=Math.min(u,n.horizontal==="middle"?e.middle:n.horizontal===r.horizontal?e.right:e.left);t.maxWidth=Math.min(s,c),t.left=Math.max(0,c-t.maxWidth)}else t.left=Math.max(0,n.horizontal==="middle"?e.middle:n.horizontal===r.horizontal?e.left:e.right),t.maxWidth=Math.min(s,u-t.left)}["left","middle","right"].forEach(t=>{Bm[`${t}#ltr`]=t,Bm[`${t}#rtl`]=t});var uf,ll=ue({name:"QMenu",inheritAttrs:!1,props:{...zS,...rl,...mt,...us,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:pd},self:{type:String,validator:pd},offset:{type:Array,validator:KS},scrollTarget:Ps,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ol,"click","escapeKey"],setup(t,{slots:e,emit:i,attrs:n}){let r,o,s,a=null;const l=Me(),{proxy:u}=l,{$q:c}=u,h=G(null),d=G(!1),p=w(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),f=vt(t,c),{registerTick:g,removeTick:_}=wa(),{registerTimeout:v}=Or(),{transitionProps:b,transitionStyle:m}=Hd(t),{localScrollTarget:y,changeScrollEvent:x,unconfigureScrollTarget:C}=DS(t,$),{anchorEl:k,canShow:P}=b0({showing:d}),{hide:A}=sl({showing:d,canShow:P,handleShow:function(z){if(a=t.noRefocus===!1?document.activeElement:null,WS(te),E(),$(),r=void 0,z!==void 0&&(t.touchPosition||t.contextMenu)){const N=Di(z);if(N.left!==void 0){const{top:K,left:U}=k.value.getBoundingClientRect();r={left:N.left-U,top:N.top-K}}}o===void 0&&(o=se(()=>c.screen.width+"|"+c.screen.height+"|"+t.self+"|"+t.anchor+"|"+c.lang.rtl,j)),t.noFocus!==!0&&document.activeElement.blur(),g(()=>{j(),t.noFocus!==!0&&V()}),v(()=>{c.platform.is.ios===!0&&(s=t.autoClose,h.value.click()),j(),E(!0),i("show",z)},t.transitionDuration)},handleHide:function(z){_(),L(),O(!0),a===null||z!==void 0&&z.qClickOutside===!0||(((z&&z.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),v(()=>{L(!0),i("hide",z)},t.transitionDuration)},hideOnRouteChange:p,processOnMount:!0}),{showPortal:E,hidePortal:L,renderPortal:T}=w0(l,h,function(){return S(mi,b.value,()=>d.value===!0?S("div",{role:"menu",...n,ref:h,tabindex:-1,class:["q-menu q-position-engine scroll"+q.value,n.class],style:[n.style,m.value],...F.value},Ne(e.default)):null)},"menu"),I={anchorEl:k,innerRef:h,onClickOutside(z){if(t.persistent!==!0&&d.value===!0)return A(z),(z.type==="touchstart"||z.target.classList.contains("q-dialog__backdrop"))&&et(z),!0}},M=w(()=>fd(t.anchor||(t.cover===!0?"center middle":"bottom start"),c.lang.rtl)),R=w(()=>t.cover===!0?M.value:fd(t.self||"top start",c.lang.rtl)),q=w(()=>(t.square===!0?" q-menu--square":"")+(f.value===!0?" q-menu--dark q-dark":"")),F=w(()=>t.autoClose===!0?{onClick:J}:{}),B=w(()=>d.value===!0&&t.persistent!==!0);function V(){al(()=>{let z=h.value;z&&z.contains(document.activeElement)!==!0&&(z=z.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||z.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||z.querySelector("[autofocus], [data-autofocus]")||z,z.focus({preventScroll:!0}))})}function O(z){r=void 0,o!==void 0&&(o(),o=void 0),z!==!0&&d.value!==!0||(Nm(te),C(),dd(I),ud(ie)),z!==!0&&(a=null)}function $(){k.value===null&&t.scrollTarget===void 0||(y.value=mr(k.value,t.scrollTarget),x(y.value,j))}function J(z){s!==!0?(jS(u,z),i("click",z)):s=!1}function te(z){B.value===!0&&t.noFocus!==!0&&IS(h.value,z.target)!==!0&&V()}function ie(z){i("escapeKey"),A(z)}function j(){S0({targetEl:h.value,offset:t.offset,anchorEl:k.value,anchorOrigin:M.value,selfOrigin:R.value,absoluteOffset:r,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}return se(B,z=>{z===!0?(HS(ie),YS(I)):(ud(ie),dd(I))}),ht(O),Object.assign(u,{focus:V,updatePosition:j}),T}}),jc=0,xi=new Array(256);for(let t=0;t<256;t++)xi[t]=(t+256).toString(16).substring(1);var _P=(()=>{const t=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const i=new Uint8Array(e);return t.getRandomValues(i),i}}return e=>{const i=[];for(let n=e;n>0;n--)i.push(Math.floor(256*Math.random()));return i}})();function Au(){(uf===void 0||jc+16>4096)&&(jc=0,uf=_P(4096));const t=Array.prototype.slice.call(uf,jc,jc+=16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,xi[t[0]]+xi[t[1]]+xi[t[2]]+xi[t[3]]+"-"+xi[t[4]]+xi[t[5]]+"-"+xi[t[6]]+xi[t[7]]+"-"+xi[t[8]]+xi[t[9]]+"-"+xi[t[10]]+xi[t[11]]+xi[t[12]]+xi[t[13]]+xi[t[14]]+xi[t[15]]}function $_(t,e){return t??(e===!0?`f_${Au()}`:null)}function Wd({getValue:t,required:e=!0}={}){if(wn.value===!0){const n=G(t!==void 0?(i=t())==null?null:i:null);return e===!0&&n.value===null&&Nt(()=>{n.value=`f_${Au()}`}),t!==void 0&&se(t,r=>{n.value=$_(r,e)}),n}var i;return t!==void 0?w(()=>$_(t(),e)):G(`f_${Au()}`)}var bP=Object.keys(_0),xP=ue({name:"QBtnDropdown",props:{..._0,...us,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),r=G(t.modelValue),o=G(null),s=Wd(),a=w(()=>{const m={"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":s.value,"aria-label":t.toggleAriaLabel||n.$q.lang.label[r.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(m["aria-disabled"]="true"),m}),l=w(()=>"q-btn-dropdown__arrow"+(r.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),u=w(()=>AS(t)),c=w(()=>function(m){return bP.reduce((y,x)=>{const C=m[x];return C!==void 0&&(y[x]=C),y},{})}(t));function h(m){r.value=!0,i("beforeShow",m)}function d(m){i("show",m),i("update:modelValue",!0)}function p(m){r.value=!1,i("beforeHide",m)}function f(m){i("hide",m),i("update:modelValue",!1)}function g(m){i("click",m)}function _(m){Xt(m),b(),i("click",m)}function v(m){o.value!==null&&o.value.show(m)}function b(m){o.value!==null&&o.value.hide(m)}return se(()=>t.modelValue,m=>{o.value!==null&&o.value[m?"show":"hide"]()}),se(()=>t.split,b),Object.assign(n,{show:v,hide:b,toggle:function(m){o.value!==null&&o.value.toggle(m)}}),Nt(()=>{t.modelValue===!0&&v()}),()=>{const m=[S(_t,{class:l.value,name:t.dropdownIcon||n.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&m.push(S(ll,{ref:o,id:s.value,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:h,onShow:d,onBeforeHide:p,onHide:f},e.default)),t.split===!1?S(xt,{class:"q-btn-dropdown q-btn-dropdown--simple",...c.value,...a.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:g},{default:()=>Ne(e.label,[]).concat(m),loading:e.loading}):S(FS,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...u.value,glossy:t.glossy,stretch:t.stretch},()=>[S(xt,{class:"q-btn-dropdown--current",...c.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:_},{default:e.label,loading:e.loading}),S(xt,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...a.value,...u.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>m)])}}}),Tn={name:String};function tc(t){return w(()=>({type:"hidden",name:t.name,value:t.modelValue}))}function Io(t={}){return(e,i,n)=>{e[i](S("input",{class:"hidden"+(n||""),...t.value}))}}function C0(t){return w(()=>t.name||t.for)}ue({name:"QBtnToggle",props:{...Tn,modelValue:{required:!0},options:{type:Array,required:!0,validator:t=>t.every(e=>("label"in e||"icon"in e||"slot"in e)&&"value"in e)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(t,{slots:e,emit:i}){const n=w(()=>t.options.find(c=>c.value===t.modelValue)!==void 0),r=Io(w(()=>({type:"hidden",name:t.name,value:t.modelValue}))),o=w(()=>AS(t)),s=w(()=>({rounded:t.rounded,dense:t.dense,...o.value})),a=w(()=>t.options.map((c,h)=>{const{attrs:d,value:p,slot:f,...g}=c;return{slot:f,props:{key:h,"aria-pressed":p===t.modelValue?"true":"false",...d,...g,...s.value,disable:t.disable===!0||g.disable===!0,color:p===t.modelValue?l(g,"toggleColor"):l(g,"color"),textColor:p===t.modelValue?l(g,"toggleTextColor"):l(g,"textColor"),noCaps:l(g,"noCaps")===!0,noWrap:l(g,"noWrap")===!0,size:l(g,"size"),padding:l(g,"padding"),ripple:l(g,"ripple"),stack:l(g,"stack")===!0,stretch:l(g,"stretch")===!0,onClick(_){(function(v,b,m){t.readonly!==!0&&(t.modelValue===v?t.clearable===!0&&(i("update:modelValue",null,null),i("clear")):i("update:modelValue",v,b),i("click",m))})(p,c,_)}}}}));function l(c,h){return c[h]===void 0?t[h]:c[h]}function u(){const c=a.value.map(h=>S(xt,h.props,h.slot!==void 0?e[h.slot]:void 0));return t.name!==void 0&&t.disable!==!0&&n.value===!0&&r(c,"push"),ni(e.default,c)}return()=>S(FS,{class:"q-btn-toggle",...o.value,rounded:t.rounded,stretch:t.stretch,glossy:t.glossy,spread:t.spread},u)}});var XS=ue({name:"QCard",props:{...mt,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=vt(t,i),r=w(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>S(t.tag,{class:r.value},Ne(e.default))}}),Xo=ue({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const i=w(()=>"q-card__section q-card__section--"+(t.horizontal===!0?"horiz row no-wrap":"vert"));return()=>S(t.tag,{class:i.value},Ne(e.default))}}),wP=ue({name:"QCardActions",props:{...f0,vertical:Boolean},setup(t,{slots:e}){const i=g0(t),n=w(()=>`q-card__actions ${i.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>S("div",{class:n.value},Ne(e.default))}}),M0={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},SP=Object.keys(M0);function gd(t){const e={};for(const i of SP)t[i]===!0&&(e[i]=!0);return Object.keys(e).length===0?M0:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}M0.all=!0;var CP=["INPUT","TEXTAREA"];function md(t,e){return e.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof e.handler=="function"&&CP.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(e.uid)===-1)}function MP(t){const e=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((i,n)=>{const r=parseFloat(i);r&&(e[n]=r)}),e}var kP=Vn({name:"touch-swipe",beforeMount(t,{value:e,arg:i,modifiers:n}){if(n.mouse!==!0&&ct.has.touch!==!0)return;const r=n.mouseCapture===!0?"Capture":"",o={handler:e,sensitivity:MP(i),direction:gd(n),noop:hi,mouseStart(s){md(s,o)&&Vd(s)&&(ti(o,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(s,!0))},touchStart(s){if(md(s,o)){const a=s.target;ti(o,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","notPassiveCapture"],[a,"touchend","end","notPassiveCapture"]]),o.start(s)}},start(s,a){ct.is.firefox===!0&&_a(t,!0);const l=Di(s);o.event={x:l.left,y:l.top,time:Date.now(),mouse:a===!0,dir:!1}},move(s){if(o.event===void 0)return;if(o.event.dir!==!1)return void et(s);const a=Date.now()-o.event.time;if(a===0)return;const l=Di(s),u=l.left-o.event.x,c=Math.abs(u),h=l.top-o.event.y,d=Math.abs(h);if(o.event.mouse!==!0){if(c<o.sensitivity[1]&&d<o.sensitivity[1])return void o.end(s)}else{if(window.getSelection().toString()!=="")return void o.end(s);if(c<o.sensitivity[2]&&d<o.sensitivity[2])return}const p=c/a,f=d/a;o.direction.vertical===!0&&c<d&&c<100&&f>o.sensitivity[0]&&(o.event.dir=h<0?"up":"down"),o.direction.horizontal===!0&&c>d&&d<100&&p>o.sensitivity[0]&&(o.event.dir=u<0?"left":"right"),o.direction.up===!0&&c<d&&h<0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&c<d&&h>0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&c>d&&u<0&&d<100&&p>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&c>d&&u>0&&d<100&&p>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(et(s),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),$n(),o.styleCleanup=g=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const _=()=>{document.body.classList.remove("no-pointer-events--children")};g===!0?setTimeout(_,50):_()}),o.handler({evt:s,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:a,distance:{x:c,y:d}})):o.end(s)},end(s){o.event!==void 0&&(Li(o,"temp"),ct.is.firefox===!0&&_a(t,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),s!==void 0&&o.event.dir!==!1&&et(s),o.event=void 0)}};if(t.__qtouchswipe=o,n.mouse===!0){const s=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";ti(o,"main",[[t,"mousedown","mouseStart",`passive${s}`]])}ct.has.touch===!0&&ti(o,"main",[[t,"touchstart","touchStart","passive"+(n.capture===!0?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchswipe;i!==void 0&&(e.oldValue!==e.value&&(typeof e.value!="function"&&i.end(),i.handler=e.value),i.direction=gd(e.modifiers))},beforeUnmount(t){const e=t.__qtouchswipe;e!==void 0&&(Li(e,"main"),Li(e,"temp"),ct.is.firefox===!0&&_a(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchswipe)}});function ic(){let t=Object.create(null);return{getCache:(e,i)=>t[e]===void 0?t[e]=typeof i=="function"?i():i:t[e],setCache(e,i){t[e]=i},hasCache:e=>Object.hasOwnProperty.call(t,e),clearCache(e){e!==void 0?delete t[e]:t=Object.create(null)}}}var k0={name:{required:!0},disable:Boolean},G_={setup:(t,{slots:e})=>()=>S("div",{class:"q-panel scroll",role:"tabpanel"},Ne(e.default))},T0={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},E0=["update:modelValue","beforeTransition","transition"];function L0(){const{props:t,emit:e,proxy:i}=Me(),{getCache:n}=ic(),{registerTimeout:r}=Or();let o,s;const a=G(null),l=G(null);function u(E){const L=t.vertical===!0?"up":"left";k((i.$q.lang.rtl===!0?-1:1)*(E.direction===L?1:-1))}const c=w(()=>[[kP,u,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),h=w(()=>t.transitionPrev||"slide-"+(t.vertical===!0?"down":"right")),d=w(()=>t.transitionNext||"slide-"+(t.vertical===!0?"up":"left")),p=w(()=>`--q-transition-duration: ${t.transitionDuration}ms`),f=w(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),g=w(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),_=w(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);function v(){k(1)}function b(){k(-1)}function m(E){e("update:modelValue",E)}function y(E){return E!=null&&E!==""}function x(E){return o.findIndex(L=>L.props.name===E&&L.props.disable!==""&&L.props.disable!==!0)}function C(E){const L=E!==0&&t.animated===!0&&a.value!==-1?"q-transition--"+(E===-1?h.value:d.value):null;l.value!==L&&(l.value=L)}function k(E,L=a.value){let T=L+E;for(;T!==-1&&T<o.length;){const I=o[T];if(I!==void 0&&I.props.disable!==""&&I.props.disable!==!0)return C(E),s=!0,e("update:modelValue",I.props.name),void setTimeout(()=>{s=!1});T+=E}t.infinite===!0&&o.length!==0&&L!==-1&&L!==o.length&&k(E,E===-1?o.length:-1)}function P(){const E=x(t.modelValue);return a.value!==E&&(a.value=E),!0}function A(){const E=y(t.modelValue)===!0&&P()&&o[a.value];return t.keepAlive===!0?[S(Px,g.value,[S(_.value===!0?n(f.value,()=>({...G_,name:f.value})):G_,{key:f.value,style:p.value},()=>E)])]:[S("div",{class:"q-panel scroll",style:p.value,key:f.value,role:"tabpanel"},[E])]}return se(()=>t.modelValue,(E,L)=>{const T=y(E)===!0?x(E):-1;s!==!0&&C(T===-1?0:T<x(L)?-1:1),a.value!==T&&(a.value=T,e("beforeTransition",E,L),r(()=>{e("transition",E,L)},t.transitionDuration))}),Object.assign(i,{next:v,previous:b,goTo:m}),{panelIndex:a,panelDirectives:c,updatePanelsList:function(E){return o=m0(Ne(E.default,[])).filter(L=>L.props!==null&&L.props.slot===void 0&&y(L.props.name)===!0),o.length},updatePanelIndex:P,getPanelContent:function(){if(o.length!==0)return t.animated===!0?[S(mi,{name:l.value},A)]:A()},getEnabledPanels:function(){return o.filter(E=>E.props.disable!==""&&E.props.disable!==!0)},getPanels:function(){return o},isValidPanelName:y,keepAliveProps:g,needsUniqueKeepAliveWrapper:_,goToPanelByOffset:k,goToPanel:m,nextPanel:v,previousPanel:b}}var hf=0,P0={fullscreen:Boolean,noRouteFullscreenExit:Boolean},I0=["update:fullscreen","fullscreen"];function R0(){const t=Me(),{props:e,emit:i,proxy:n}=t;let r,o;const s=G(!1);function a(){s.value===!0?u():l()}function l(){s.value!==!0&&(s.value=!0,o=n.$el.parentNode,o.replaceChild(r,n.$el),document.body.appendChild(n.$el),++hf===1&&document.body.classList.add("q-body--fullscreen-mixin"))}function u(){s.value===!0&&(o.replaceChild(n.$el,r),s.value=!1,(hf=Math.max(0,hf-1))===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),n.$el.scrollIntoView!==void 0&&setTimeout(()=>{n.$el.scrollIntoView()})))}return v0(t)===!0&&se(()=>n.$route.fullPath,()=>{e.noRouteFullscreenExit!==!0&&u()}),se(()=>e.fullscreen,c=>{s.value!==c&&a()}),se(s,c=>{i("update:fullscreen",c),i("fullscreen",c)}),uv(()=>{r=document.createElement("span")}),Nt(()=>{e.fullscreen===!0&&l()}),ht(u),Object.assign(n,{toggleFullscreen:a,setFullscreen:l,exitFullscreen:u}),{inFullscreen:s,toggleFullscreen:a}}var TP=["top","right","bottom","left"],EP=["regular","flat","outline","push","unelevated"];function ZS(t,e){const i=G(null);return{refocusTargetEl:w(()=>t.disable===!0?null:S("span",{ref:i,class:"no-outline",tabindex:-1})),refocusTarget:function(n){const r=e.value;n!==void 0&&n.type.indexOf("key")===0?r!==null&&document.activeElement!==r&&r.contains(document.activeElement)===!0&&r.focus():i.value!==null&&(n===void 0||r!==null&&r.contains(n.target)===!0)&&i.value.focus()}}}ue({name:"QCarousel",props:{...mt,...T0,...P0,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:t=>EP.includes(t),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:t=>TP.includes(t)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...I0,...E0],setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=vt(t,i);let r,o=null;const{updatePanelsList:s,getPanelContent:a,panelDirectives:l,goToPanel:u,previousPanel:c,nextPanel:h,getEnabledPanels:d,panelIndex:p}=L0(),{inFullscreen:f}=R0(),g=w(()=>f.value!==!0&&t.height!==void 0?{height:t.height}:{}),_=w(()=>t.vertical===!0?"vertical":"horizontal"),v=w(()=>t.navigationPosition||(t.vertical===!0?"right":"bottom")),b=w(()=>`q-carousel q-panel-parent q-carousel--with${t.padding===!0?"":"out"}-padding`+(f.value===!0?" fullscreen":"")+(n.value===!0?" q-carousel--dark q-dark":"")+(t.arrows===!0?` q-carousel--arrows-${_.value}`:"")+(t.navigation===!0?` q-carousel--navigation-${v.value}`:"")),m=w(()=>{const A=[t.prevIcon||i.iconSet.carousel[t.vertical===!0?"up":"left"],t.nextIcon||i.iconSet.carousel[t.vertical===!0?"down":"right"]];return t.vertical===!1&&i.lang.rtl===!0?A.reverse():A}),y=w(()=>t.navigationIcon||i.iconSet.carousel.navigationIcon),x=w(()=>t.navigationActiveIcon||y.value),C=w(()=>({color:t.controlColor,textColor:t.controlTextColor,round:!0,[t.controlType]:!0,dense:!0}));function k(){const A=Ru(t.autoplay)===!0?Math.abs(t.autoplay):5e3;o!==null&&clearTimeout(o),o=setTimeout(()=>{o=null,A>=0?h():c()},A)}function P(A,E){return S("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${v.value}`+(t.controlColor!==void 0?` text-${t.controlColor}`:"")},[S("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},d().map(E))])}return se(()=>t.modelValue,()=>{t.autoplay&&k()}),se(()=>t.autoplay,A=>{A?k():o!==null&&(clearTimeout(o),o=null)}),Nt(()=>{t.autoplay&&k()}),ht(()=>{o!==null&&clearTimeout(o)}),()=>(r=s(e),S("div",{class:b.value,style:g.value},[Cn("div",{class:"q-carousel__slides-container"},a(),"sl-cont",t.swipeable,()=>l.value)].concat(function(){const A=[];if(t.navigation===!0){const E=e["navigation-icon"]!==void 0?e["navigation-icon"]:T=>S(xt,{key:"nav"+T.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${T.active===!0?"":"in"}active`,...T.btnProps,onClick:T.onClick}),L=r-1;A.push(P("buttons",(T,I)=>{const M=T.props.name,R=p.value===I;return E({index:I,maxIndex:L,name:M,active:R,btnProps:{icon:R===!0?x.value:y.value,size:"sm",...C.value},onClick:()=>{u(M)}})}))}else if(t.thumbnails===!0){const E=t.controlColor!==void 0?` text-${t.controlColor}`:"";A.push(P("thumbnails",L=>{const T=L.props;return S("img",{key:"tmb#"+T.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${T.name===t.modelValue?"":"in"}active`+E,src:T.imgSrc||T["img-src"],onClick:()=>{u(T.name)}})}))}return t.arrows===!0&&p.value>=0&&((t.infinite===!0||p.value>0)&&A.push(S("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${_.value} absolute flex flex-center`},[S(xt,{icon:m.value[0],...C.value,onClick:c})])),(t.infinite===!0||p.value<r-1)&&A.push(S("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${_.value} absolute flex flex-center`},[S(xt,{icon:m.value[1],...C.value,onClick:h})]))),ni(e.control,A)}())))}}),ue({name:"QCarouselSlide",props:{...k0,imgSrc:String},setup(t,{slots:e}){const i=w(()=>t.imgSrc?{backgroundImage:`url("${t.imgSrc}")`}:{});return()=>S("div",{class:"q-carousel__slide",style:i.value},Ne(e.default))}}),ue({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,default:()=>[18,18],validator:t=>t.length===2}},setup(t,{slots:e}){const i=w(()=>`q-carousel__control absolute absolute-${t.position}`),n=w(()=>({margin:`${t.offset[1]}px ${t.offset[0]}px`}));return()=>S("div",{class:i.value,style:n.value},Ne(e.default))}}),ue({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(t,{slots:e}){const i=w(()=>t.sent===!0?"sent":"received"),n=w(()=>`q-message-text-content q-message-text-content--${i.value}`+(t.textColor!==void 0?` text-${t.textColor}`:"")),r=w(()=>`q-message-text q-message-text--${i.value}`+(t.bgColor!==void 0?` text-${t.bgColor}`:"")),o=w(()=>"q-message-container row items-end no-wrap"+(t.sent===!0?" reverse":"")),s=w(()=>t.size!==void 0?`col-${t.size}`:""),a=w(()=>({msg:t.textHtml===!0?"innerHTML":"textContent",stamp:t.stampHtml===!0?"innerHTML":"textContent",name:t.nameHtml===!0?"innerHTML":"textContent",label:t.labelHtml===!0?"innerHTML":"textContent"}));function l(u,c){const h=c===!0?u.length>1?d=>d:d=>S("div",[d]):d=>S("div",{[a.value.msg]:d});return u.map((d,p)=>{return S("div",{key:p,class:r.value},[S("div",{class:n.value},(f=h(d),e.stamp!==void 0?[f,S("div",{class:"q-message-stamp"},e.stamp())]:t.stamp?[f,S("div",{class:"q-message-stamp",[a.value.stamp]:t.stamp})]:[f]))]);var f})}return()=>{const u=[];e.avatar!==void 0?u.push(e.avatar()):t.avatar!==void 0&&u.push(S("img",{class:`q-message-avatar q-message-avatar--${i.value}`,src:t.avatar,"aria-hidden":"true"}));const c=[];e.name!==void 0?c.push(S("div",{class:`q-message-name q-message-name--${i.value}`},e.name())):t.name!==void 0&&c.push(S("div",{class:`q-message-name q-message-name--${i.value}`,[a.value.name]:t.name})),e.default!==void 0?c.push(l(m0(e.default()),!0)):t.text!==void 0&&c.push(l(t.text)),u.push(S("div",{class:s.value},c));const h=[];return e.label!==void 0?h.push(S("div",{class:"q-message-label"},e.label())):t.label!==void 0&&h.push(S("div",{class:"q-message-label",[a.value.label]:t.label})),h.push(S("div",{class:o.value},u)),S("div",{class:`q-message q-message-${i.value}`},h)}}});var QS={xs:30,sm:35,md:40,lg:50,xl:60},JS={...mt,...Br,...Tn,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},eC=["update:modelValue"];function tC(t,e){const{props:i,slots:n,emit:r,proxy:o}=Me(),{$q:s}=o,a=vt(i,s),l=G(null),{refocusTargetEl:u,refocusTarget:c}=ZS(i,l),h=jr(i,QS),d=w(()=>i.val!==void 0&&Array.isArray(i.modelValue)),p=w(()=>{const E=Zn(i.val);return d.value===!0?i.modelValue.findIndex(L=>Zn(L)===E):-1}),f=w(()=>d.value===!0?p.value!==-1:Zn(i.modelValue)===Zn(i.trueValue)),g=w(()=>d.value===!0?p.value===-1:Zn(i.modelValue)===Zn(i.falseValue)),_=w(()=>f.value===!1&&g.value===!1),v=w(()=>i.disable===!0?-1:i.tabindex||0),b=w(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(i.disable===!0?" disabled":"")+(a.value===!0?` q-${t}--dark`:"")+(i.dense===!0?` q-${t}--dense`:"")+(i.leftLabel===!0?" reverse":"")),m=w(()=>{const E=f.value===!0?"truthy":g.value===!0?"falsy":"indet",L=i.color===void 0||i.keepColor!==!0&&(t==="toggle"?f.value!==!0:g.value===!0)?"":` text-${i.color}`;return`q-${t}__inner relative-position non-selectable q-${t}__inner--${E}${L}`}),y=Io(w(()=>{const E={type:"checkbox"};return i.name!==void 0&&Object.assign(E,{".checked":f.value,"^checked":f.value===!0?"checked":void 0,name:i.name,value:d.value===!0?i.val:i.trueValue}),E})),x=w(()=>{const E={tabindex:v.value,role:t==="toggle"?"switch":"checkbox","aria-label":i.label,"aria-checked":_.value===!0?"mixed":f.value===!0?"true":"false"};return i.disable===!0&&(E["aria-disabled"]="true"),E});function C(E){E!==void 0&&(et(E),c(E)),i.disable!==!0&&r("update:modelValue",function(){if(d.value===!0){if(f.value===!0){const L=i.modelValue.slice();return L.splice(p.value,1),L}return i.modelValue.concat([i.val])}if(f.value===!0){if(i.toggleOrder!=="ft"||i.toggleIndeterminate===!1)return i.falseValue}else{if(g.value!==!0)return i.toggleOrder!=="ft"?i.trueValue:i.falseValue;if(i.toggleOrder==="ft"||i.toggleIndeterminate===!1)return i.trueValue}return i.indeterminateValue}(),E)}function k(E){E.keyCode!==13&&E.keyCode!==32||et(E)}function P(E){E.keyCode!==13&&E.keyCode!==32||C(E)}const A=e(f,_);return Object.assign(o,{toggle:C}),()=>{const E=A();i.disable!==!0&&y(E,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const L=[S("div",{class:m.value,style:h.value,"aria-hidden":"true"},E)];u.value!==null&&L.push(u.value);const T=i.label!==void 0?ni(n.default,[i.label]):Ne(n.default);return T!==void 0&&L.push(S("div",{class:`q-${t}__label q-anchor--skip`},T)),S("div",{ref:l,class:b.value,...x.value,onClick:C,onKeydown:k,onKeyup:P},L)}}var nu=ue({name:"QCheckbox",props:JS,emits:eC,setup(t){const e=S("div",{key:"svg",class:"q-checkbox__bg absolute"},[S("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[S("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),S("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);return tC("checkbox",function(i,n){const r=w(()=>(i.value===!0?t.checkedIcon:n.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>r.value!==null?[S("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[S(_t,{class:"q-checkbox__icon",name:r.value})])]:[e]})}}),LP={xs:8,sm:10,md:14,lg:20,xl:24},iC=ue({name:"QChip",props:{...mt,...Br,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=vt(t,n),o=jr(t,LP),s=w(()=>t.selected===!0||t.icon!==void 0),a=w(()=>t.selected===!0?t.iconSelected||n.iconSet.chip.selected:t.icon),l=w(()=>t.iconRemove||n.iconSet.chip.remove),u=w(()=>t.disable===!1&&(t.clickable===!0||t.selected!==null)),c=w(()=>{const g=t.outline===!0&&t.color||t.textColor;return"q-chip row inline no-wrap items-center"+(t.outline===!1&&t.color!==void 0?` bg-${t.color}`:"")+(g?` text-${g} q-chip--colored`:"")+(t.disable===!0?" disabled":"")+(t.dense===!0?" q-chip--dense":"")+(t.outline===!0?" q-chip--outline":"")+(t.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(t.square===!0?" q-chip--square":"")+(r.value===!0?" q-chip--dark q-dark":"")}),h=w(()=>{const g=t.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0};return{chip:g,remove:{...g,role:"button","aria-hidden":"false","aria-label":t.removeAriaLabel||n.lang.label.remove}}});function d(g){g.keyCode===13&&p(g)}function p(g){t.disable||(i("update:selected",!t.selected),i("click",g))}function f(g){g.keyCode!==void 0&&g.keyCode!==13||(et(g),t.disable===!1&&(i("update:modelValue",!1),i("remove")))}return()=>{if(t.modelValue===!1)return;const g={class:c.value,style:o.value};return u.value===!0&&Object.assign(g,h.value.chip,{onClick:p,onKeyup:d}),Cn("div",g,function(){const _=[];u.value===!0&&_.push(S("div",{class:"q-focus-helper"})),s.value===!0&&_.push(S(_t,{class:"q-chip__icon q-chip__icon--left",name:a.value}));const v=t.label!==void 0?[S("div",{class:"ellipsis"},[t.label])]:void 0;return _.push(S("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},p0(e.default,v))),t.iconRight&&_.push(S(_t,{class:"q-chip__icon q-chip__icon--right",name:t.iconRight})),t.removable===!0&&_.push(S(_t,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:l.value,...h.value.remove,onClick:f,onKeyup:f})),_}(),"ripple",t.ripple!==!1&&t.disable!==!0,()=>[[Gd,t.ripple]])}}}),q0={...Br,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:t=>t>=0&&t<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},nC=100*Math.PI,PP=Math.round(1e3*nC)/1e3,rC=ue({name:"QCircularProgress",props:{...q0,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=jr(t),r=w(()=>{const p=(i.lang.rtl===!0?-1:1)*t.angle;return{transform:t.reverse!==(i.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-p}deg)`:`rotate3d(0, 0, 1, ${p-90}deg)`}}),o=w(()=>t.instantFeedback!==!0&&t.indeterminate!==!0?{transition:`stroke-dashoffset ${t.animationSpeed}ms ease 0s, stroke ${t.animationSpeed}ms ease`}:""),s=w(()=>100/(1-t.thickness/2)),a=w(()=>`${s.value/2} ${s.value/2} ${s.value} ${s.value}`),l=w(()=>Ft(t.value,t.min,t.max)),u=w(()=>t.max-t.min),c=w(()=>t.thickness/2*s.value),h=w(()=>{const p=(t.max-l.value)/u.value,f=t.rounded===!0&&l.value<t.max&&p<.25?c.value/2*(1-p/.25):0;return nC*p+f});function d({thickness:p,offset:f,color:g,cls:_,rounded:v}){return S("circle",{class:"q-circular-progress__"+_+(g!==void 0?` text-${g}`:""),style:o.value,fill:"transparent",stroke:"currentColor","stroke-width":p,"stroke-dasharray":PP,"stroke-dashoffset":f,"stroke-linecap":v,cx:s.value,cy:s.value,r:50})}return()=>{const p=[];t.centerColor!==void 0&&t.centerColor!=="transparent"&&p.push(S("circle",{class:`q-circular-progress__center text-${t.centerColor}`,fill:"currentColor",r:50-c.value/2,cx:s.value,cy:s.value})),t.trackColor!==void 0&&t.trackColor!=="transparent"&&p.push(d({cls:"track",thickness:c.value,offset:0,color:t.trackColor})),p.push(d({cls:"circle",thickness:c.value,offset:h.value,color:t.color,rounded:t.rounded===!0?"round":void 0}));const f=[S("svg",{class:"q-circular-progress__svg",style:r.value,viewBox:a.value,"aria-hidden":"true"},p)];return t.showValue===!0&&f.push(S("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:t.fontSize}},e.default!==void 0?e.default():[S("div",l.value)])),S("div",{class:`q-circular-progress q-circular-progress--${t.indeterminate===!0?"in":""}determinate`,style:n.value,role:"progressbar","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.indeterminate===!0?void 0:l.value},p0(e.internal,f))}}});function df(t,e,i){const n=Di(t);let r,o=n.left-e.event.x,s=n.top-e.event.y,a=Math.abs(o),l=Math.abs(s);const u=e.direction;u.horizontal===!0&&u.vertical!==!0?r=o<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?r=s<0?"up":"down":u.up===!0&&s<0?(r="up",a>l&&(u.left===!0&&o<0?r="left":u.right===!0&&o>0&&(r="right"))):u.down===!0&&s>0?(r="down",a>l&&(u.left===!0&&o<0?r="left":u.right===!0&&o>0&&(r="right"))):u.left===!0&&o<0?(r="left",a<l&&(u.up===!0&&s<0?r="up":u.down===!0&&s>0&&(r="down"))):u.right===!0&&o>0&&(r="right",a<l&&(u.up===!0&&s<0?r="up":u.down===!0&&s>0&&(r="down")));let c=!1;if(r===void 0&&i===!1){if(e.event.isFirst===!0||e.event.lastDir===void 0)return{};r=e.event.lastDir,c=!0,r==="left"||r==="right"?(n.left-=o,a=0,o=0):(n.top-=s,l=0,s=0)}return{synthetic:c,payload:{evt:t,touch:e.event.mouse!==!0,mouse:e.event.mouse===!0,position:n,direction:r,isFirst:e.event.isFirst,isFinal:i===!0,duration:Date.now()-e.event.time,distance:{x:a,y:l},offset:{x:o,y:s},delta:{x:n.left-e.event.lastX,y:n.top-e.event.lastY}}}}var IP=0,bn=Vn({name:"touch-pan",beforeMount(t,{value:e,modifiers:i}){if(i.mouse!==!0&&ct.has.touch!==!0)return;function n(o,s){i.mouse===!0&&s===!0?et(o):(i.stop===!0&&Xt(o),i.prevent===!0&&yi(o))}const r={uid:"qvtp_"+IP++,handler:e,modifiers:i,direction:gd(i),noop:hi,mouseStart(o){md(o,r)&&Vd(o)&&(ti(r,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),r.start(o,!0))},touchStart(o){if(md(o,r)){const s=o.target;ti(r,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","passiveCapture"],[s,"touchend","end","passiveCapture"]]),r.start(o)}},start(o,s){if(ct.is.firefox===!0&&_a(t,!0),r.lastEvt=o,s===!0||i.stop===!0){if(r.direction.all!==!0&&(s!==!0||r.modifiers.mouseAllDir!==!0&&r.modifiers.mousealldir!==!0)){const u=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&yi(u),o.cancelBubble===!0&&Xt(u),Object.assign(u,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[r.uid]:o.qClonedBy.concat(r.uid)}),r.initialEvent={target:o.target,event:u}}Xt(o)}const{left:a,top:l}=Di(o);r.event={x:a,y:l,time:Date.now(),mouse:s===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:a,lastY:l}},move(o){if(r.event===void 0)return;const s=Di(o),a=s.left-r.event.x,l=s.top-r.event.y;if(a===0&&l===0)return;r.lastEvt=o;const u=r.event.mouse===!0,c=()=>{let p;n(o,u),i.preserveCursor!==!0&&i.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),$n(),r.styleCleanup=f=>{if(r.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),u===!0){const g=()=>{document.body.classList.remove("no-pointer-events--children")};f!==void 0?setTimeout(()=>{g(),f()},50):g()}else f!==void 0&&f()}};if(r.event.detected===!0){r.event.isFirst!==!0&&n(o,r.event.mouse);const{payload:p,synthetic:f}=df(o,r,!1);return void(p!==void 0&&(r.handler(p)===!1?r.end(o):(r.styleCleanup===void 0&&r.event.isFirst===!0&&c(),r.event.lastX=p.position.left,r.event.lastY=p.position.top,r.event.lastDir=f===!0?void 0:p.direction,r.event.isFirst=!1)))}if(r.direction.all===!0||u===!0&&(r.modifiers.mouseAllDir===!0||r.modifiers.mousealldir===!0))return c(),r.event.detected=!0,void r.move(o);const h=Math.abs(a),d=Math.abs(l);h!==d&&(r.direction.horizontal===!0&&h>d||r.direction.vertical===!0&&h<d||r.direction.up===!0&&h<d&&l<0||r.direction.down===!0&&h<d&&l>0||r.direction.left===!0&&h>d&&a<0||r.direction.right===!0&&h>d&&a>0?(r.event.detected=!0,r.move(o)):r.end(o,!0))},end(o,s){if(r.event!==void 0){if(Li(r,"temp"),ct.is.firefox===!0&&_a(t,!1),s===!0)r.styleCleanup!==void 0&&r.styleCleanup(),r.event.detected!==!0&&r.initialEvent!==void 0&&r.initialEvent.target.dispatchEvent(r.initialEvent.event);else if(r.event.detected===!0){r.event.isFirst===!0&&r.handler(df(o===void 0?r.lastEvt:o,r).payload);const{payload:a}=df(o===void 0?r.lastEvt:o,r,!0),l=()=>{r.handler(a)};r.styleCleanup!==void 0?r.styleCleanup(l):l()}r.event=void 0,r.initialEvent=void 0,r.lastEvt=void 0}}};if(t.__qtouchpan=r,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";ti(r,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}ct.has.touch===!0&&ti(r,"main",[[t,"touchstart","touchStart","passive"+(i.capture===!0?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchpan;i!==void 0&&(e.oldValue!==e.value&&(typeof value!="function"&&i.end(),i.handler=e.value),i.direction=gd(e.modifiers))},beforeUnmount(t){const e=t.__qtouchpan;e!==void 0&&(e.event!==void 0&&e.end(),Li(e,"main"),Li(e,"temp"),ct.is.firefox===!0&&_a(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchpan)}}),H_="q-slider__marker-labels",RP=t=>({value:t}),qP=({marker:t})=>S("div",{key:t.value,style:t.style,class:t.classes},t.label),A0=[34,37,40,33,39,38],oC={...mt,...Tn,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},sC=["pan","update:modelValue","change"];function aC({updateValue:t,updatePosition:e,getDragging:i,formAttrs:n}){const{props:r,emit:o,slots:s,proxy:{$q:a}}=Me(),l=vt(r,a),u=Io(n),c=G(!1),h=G(!1),d=G(!1),p=G(!1),f=w(()=>r.vertical===!0?"--v":"--h"),g=w(()=>"-"+(r.switchLabelSide===!0?"switched":"standard")),_=w(()=>r.vertical===!0?r.reverse===!0:r.reverse!==(a.lang.rtl===!0)),v=w(()=>isNaN(r.innerMin)===!0||r.innerMin<r.min?r.min:r.innerMin),b=w(()=>isNaN(r.innerMax)===!0||r.innerMax>r.max?r.max:r.innerMax),m=w(()=>r.disable!==!0&&r.readonly!==!0&&v.value<b.value),y=w(()=>{if(r.step===0)return ae=>ae;const Z=(String(r.step).trim().split(".")[1]||"").length;return ae=>parseFloat(ae.toFixed(Z))}),x=w(()=>r.step===0?1:r.step),C=w(()=>m.value===!0?r.tabindex||0:-1),k=w(()=>r.max-r.min),P=w(()=>b.value-v.value),A=w(()=>W(v.value)),E=w(()=>W(b.value)),L=w(()=>r.vertical===!0?_.value===!0?"bottom":"top":_.value===!0?"right":"left"),T=w(()=>r.vertical===!0?"height":"width"),I=w(()=>r.vertical===!0?"width":"height"),M=w(()=>r.vertical===!0?"vertical":"horizontal"),R=w(()=>{const Z={role:"slider","aria-valuemin":v.value,"aria-valuemax":b.value,"aria-orientation":M.value,"data-step":r.step};return r.disable===!0?Z["aria-disabled"]="true":r.readonly===!0&&(Z["aria-readonly"]="true"),Z}),q=w(()=>`q-slider q-slider${f.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(r.vertical===!0?"row":"column")+(r.disable===!0?" disabled":" q-slider--enabled"+(m.value===!0?" q-slider--editable":""))+(d.value==="both"?" q-slider--focus":"")+(r.label||r.labelAlways===!0?" q-slider--label":"")+(r.labelAlways===!0?" q-slider--label-always":"")+(l.value===!0?" q-slider--dark":"")+(r.dense===!0?" q-slider--dense q-slider--dense"+f.value:""));function F(Z){const ae="q-slider__"+Z;return`${ae} ${ae}${f.value} ${ae}${f.value}${g.value}`}function B(Z){const ae="q-slider__"+Z;return`${ae} ${ae}${f.value}`}const V=w(()=>{const Z=r.selectionColor||r.color;return"q-slider__selection absolute"+(Z!==void 0?` text-${Z}`:"")}),O=w(()=>B("markers")+" absolute overflow-hidden"),$=w(()=>B("track-container")),J=w(()=>F("pin")),te=w(()=>F("label")),ie=w(()=>F("text-container")),j=w(()=>F("marker-labels-container")+(r.markerLabelsClass!==void 0?` ${r.markerLabelsClass}`:"")),z=w(()=>"q-slider__track relative-position no-outline"+(r.trackColor!==void 0?` bg-${r.trackColor}`:"")),N=w(()=>{const Z={[I.value]:r.trackSize};return r.trackImg!==void 0&&(Z.backgroundImage=`url(${r.trackImg}) !important`),Z}),K=w(()=>"q-slider__inner absolute"+(r.innerTrackColor!==void 0?` bg-${r.innerTrackColor}`:"")),U=w(()=>{const Z=E.value-A.value,ae={[L.value]:100*A.value+"%",[T.value]:Z===0?"2px":100*Z+"%"};return r.innerTrackImg!==void 0&&(ae.backgroundImage=`url(${r.innerTrackImg}) !important`),ae});function W(Z){return k.value===0?0:(Z-r.min)/k.value}const ve=w(()=>Ru(r.markers)===!0?r.markers:x.value),ce=w(()=>{const Z=[],ae=ve.value,Ce=r.max;let Ie=r.min;do Z.push(Ie),Ie+=ae;while(Ie<Ce);return Z.push(Ce),Z}),fe=w(()=>{const Z=` ${H_}${f.value}-`;return H_+`${Z}${r.switchMarkerLabelsSide===!0?"switched":"standard"}${Z}${_.value===!0?"rtl":"ltr"}`}),pe=w(()=>r.markerLabels===!1?null:function(Z){if(Z===!1)return null;if(Z===!0)return ce.value.map(RP);if(typeof Z=="function")return ce.value.map(Ce=>{const Ie=Z(Ce);return Ei(Ie)===!0?{...Ie,value:Ce}:{value:Ce,label:Ie}});const ae=({value:Ce})=>Ce>=r.min&&Ce<=r.max;return Array.isArray(Z)===!0?Z.map(Ce=>Ei(Ce)===!0?Ce:{value:Ce}).filter(ae):Object.keys(Z).map(Ce=>{const Ie=Z[Ce],Fe=Number(Ce);return Ei(Ie)===!0?{...Ie,value:Fe}:{value:Fe,label:Ie}}).filter(ae)}(r.markerLabels).map((Z,ae)=>({index:ae,value:Z.value,label:Z.label||Z.value,classes:fe.value+(Z.classes!==void 0?" "+Z.classes:""),style:{...me(Z.value),...Z.style||{}}}))),Le=w(()=>({markerList:pe.value,markerMap:Se.value,classes:fe.value,getStyle:me})),Pe=w(()=>{const Z=P.value===0?"2px":100*ve.value/P.value;return{...U.value,backgroundSize:r.vertical===!0?`2px ${Z}%`:`${Z}% 2px`}});function me(Z){return{[L.value]:100*(Z-r.min)/k.value+"%"}}const Se=w(()=>{if(r.markerLabels===!1)return null;const Z={};return pe.value.forEach(ae=>{Z[ae.value]=ae}),Z}),Re=w(()=>[[bn,Ge,void 0,{[M.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ge(Z){Z.isFinal===!0?(p.value!==void 0&&(e(Z.evt),Z.touch===!0&&t(!0),p.value=void 0,o("pan","end")),c.value=!1,d.value=!1):Z.isFirst===!0?(p.value=i(Z.evt),e(Z.evt),t(),c.value=!0,o("pan","start")):(e(Z.evt),t())}function oe(){d.value=!1}function he(){h.value=!1,c.value=!1,t(!0),oe(),document.removeEventListener("mouseup",he,!0)}return ht(()=>{document.removeEventListener("mouseup",he,!0)}),{state:{active:c,focus:d,preventFocus:h,dragging:p,editable:m,classes:q,tabindex:C,attributes:R,roundValueFn:y,keyStep:x,trackLen:k,innerMin:v,innerMinRatio:A,innerMax:b,innerMaxRatio:E,positionProp:L,sizeProp:T,isReversed:_},methods:{onActivate:function(Z){e(Z,i(Z)),t(),h.value=!0,c.value=!0,document.addEventListener("mouseup",he,!0)},onMobileClick:function(Z){e(Z,i(Z)),t(!0)},onBlur:oe,onKeyup:function(Z){A0.includes(Z.keyCode)&&t(!0)},getContent:function(Z,ae,Ce,Ie){const Fe=[];r.innerTrackColor!=="transparent"&&Fe.push(S("div",{key:"inner",class:K.value,style:U.value})),r.selectionColor!=="transparent"&&Fe.push(S("div",{key:"selection",class:V.value,style:Z.value})),r.markers!==!1&&Fe.push(S("div",{key:"marker",class:O.value,style:Pe.value})),Ie(Fe);const X=[Cn("div",{key:"trackC",class:$.value,tabindex:ae.value,...Ce.value},[S("div",{class:z.value,style:N.value},Fe)],"slide",m.value,()=>Re.value)];return r.markerLabels!==!1&&X[r.switchMarkerLabelsSide===!0?"unshift":"push"](S("div",{key:"markerL",class:j.value},function(){if(s["marker-label-group"]!==void 0)return s["marker-label-group"](Le.value);const re=s["marker-label"]||qP;return pe.value.map(ge=>re({marker:ge,...Le.value}))}())),X},getThumbRenderFn:function(Z){const ae=w(()=>h.value!==!1||d.value!==Z.focusValue&&d.value!=="both"?"":" q-slider--focus"),Ce=w(()=>`q-slider__thumb q-slider__thumb${f.value} q-slider__thumb${f.value}-${_.value===!0?"rtl":"ltr"} absolute non-selectable`+ae.value+(Z.thumbColor.value!==void 0?` text-${Z.thumbColor.value}`:"")),Ie=w(()=>({width:r.thumbSize,height:r.thumbSize,[L.value]:100*Z.ratio.value+"%",zIndex:d.value===Z.focusValue?2:void 0})),Fe=w(()=>Z.labelColor.value!==void 0?` text-${Z.labelColor.value}`:""),X=w(()=>function(ge){if(r.vertical===!0)return null;const qe=a.lang.rtl!==r.reverse?1-ge:ge;return{transform:`translateX(calc(${2*qe-1} * ${r.thumbSize} / 2 + ${50-100*qe}%))`}}(Z.ratio.value)),re=w(()=>"q-slider__text"+(Z.labelTextColor.value!==void 0?` text-${Z.labelTextColor.value}`:""));return()=>{const ge=[S("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[S("path",{d:r.thumbPath})]),S("div",{class:"q-slider__focus-ring fit"})];return r.label!==!0&&r.labelAlways!==!0||(ge.push(S("div",{class:J.value+" absolute fit no-pointer-events"+Fe.value},[S("div",{class:te.value,style:{minWidth:r.thumbSize}},[S("div",{class:ie.value,style:X.value},[S("span",{class:re.value},Z.label.value)])])])),r.name!==void 0&&r.disable!==!0&&u(ge,"push")),S("div",{class:Ce.value,style:Ie.value,...Z.getNodeData()},ge)}},convertRatioToModel:function(Z){const{min:ae,max:Ce,step:Ie}=r;let Fe=ae+Z*(Ce-ae);if(Ie>0){const X=(Fe-v.value)%Ie;Fe+=(Math.abs(X)>=Ie/2?(X<0?-1:1)*Ie:0)-X}return Fe=y.value(Fe),Ft(Fe,v.value,b.value)},convertModelToRatio:W,getDraggingRatio:function(Z,ae){const Ce=Di(Z),Ie=r.vertical===!0?Ft((Ce.top-ae.top)/ae.height,0,1):Ft((Ce.left-ae.left)/ae.width,0,1);return Ft(_.value===!0?1-Ie:Ie,A.value,E.value)}}}}var AP=()=>({}),Yo=ue({name:"QSlider",props:{...oC,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:sC,setup(t,{emit:e}){const{proxy:{$q:i}}=Me(),{state:n,methods:r}=aC({updateValue:f,updatePosition:function(v,b=n.dragging.value){const m=r.getDraggingRatio(v,b);a.value=r.convertRatioToModel(m),s.value=t.snap!==!0||t.step===0?m:r.convertModelToRatio(a.value)},getDragging:function(){return o.value.getBoundingClientRect()},formAttrs:tc(t)}),o=G(null),s=G(0),a=G(0);function l(){a.value=t.modelValue===null?n.innerMin.value:Ft(t.modelValue,n.innerMin.value,n.innerMax.value)}se(()=>`${t.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,l),l();const u=w(()=>r.convertModelToRatio(a.value)),c=w(()=>n.active.value===!0?s.value:u.value),h=w(()=>{const v={[n.positionProp.value]:100*n.innerMinRatio.value+"%",[n.sizeProp.value]:100*(c.value-n.innerMinRatio.value)+"%"};return t.selectionImg!==void 0&&(v.backgroundImage=`url(${t.selectionImg}) !important`),v}),d=r.getThumbRenderFn({focusValue:!0,getNodeData:AP,ratio:c,label:w(()=>t.labelValue!==void 0?t.labelValue:a.value),thumbColor:w(()=>t.thumbColor||t.color),labelColor:w(()=>t.labelColor),labelTextColor:w(()=>t.labelTextColor)}),p=w(()=>n.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:r.onMobileClick}:{onMousedown:r.onActivate,onFocus:g,onBlur:r.onBlur,onKeydown:_,onKeyup:r.onKeyup});function f(v){a.value!==t.modelValue&&e("update:modelValue",a.value),v===!0&&e("change",a.value)}function g(){n.focus.value=!0}function _(v){if(!A0.includes(v.keyCode))return;et(v);const b=([34,33].includes(v.keyCode)?10:1)*n.keyStep.value,m=([34,37,40].includes(v.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*b;a.value=Ft(n.roundValueFn.value(a.value+m),n.innerMin.value,n.innerMax.value),f()}return()=>{const v=r.getContent(h,n.tabindex,p,b=>{b.push(d())});return S("div",{ref:o,class:n.classes.value+(t.modelValue===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":t.modelValue},v)}}});function lC(){const t=G(!wn.value);return t.value===!1&&Nt(()=>{t.value=!0}),{isHydrated:t}}var uC=typeof ResizeObserver<"u",U_=uC===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},Ss=ue({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:e}){let i,n=null,r={width:-1,height:-1};function o(l){l===!0||t.debounce===0||t.debounce==="0"?s():n===null&&(n=setTimeout(s,t.debounce))}function s(){if(n!==null&&(clearTimeout(n),n=null),i){const{offsetWidth:l,offsetHeight:u}=i;l===r.width&&u===r.height||(r={width:l,height:u},e("resize",r))}}const{proxy:a}=Me();if(a.trigger=o,uC===!0){let l;const u=c=>{i=a.$el.parentNode,i?(l=new ResizeObserver(o),l.observe(i),s()):c!==!0&&dt(()=>{u(!0)})};return Nt(()=>{u()}),ht(()=>{n!==null&&clearTimeout(n),l!==void 0&&(l.disconnect!==void 0?l.disconnect():i&&l.unobserve(i))}),hi}{let l=function(){n!==null&&(clearTimeout(n),n=null),h!==void 0&&(h.removeEventListener!==void 0&&h.removeEventListener("resize",o,Dt.passive),h=void 0)},u=function(){l(),i&&i.contentDocument&&(h=i.contentDocument.defaultView,h.addEventListener("resize",o,Dt.passive),s())};const{isHydrated:c}=lC();let h;return Nt(()=>{dt(()=>{i=a.$el,i&&u()})}),ht(l),()=>{if(c.value===!0)return S("object",{class:"q--avoid-card-border",style:U_.style,tabindex:-1,type:"text/html",data:U_.url,"aria-hidden":"true",onLoad:u})}}}}),Fu=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(e),t.scrollLeft=-1e3,Fu=t.scrollLeft>=0,t.remove()}function FP(t,e,i){const n=i===!0?["left","right"]:["top","bottom"];return`absolute-${e===!0?n[0]:n[1]}${t?` text-${t}`:""}`}var OP=["left","center","right","justify"],W_=ue({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>OP.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,{registerTick:o}=wa(),{registerTick:s}=wa(),{registerTick:a}=wa(),{registerTimeout:l,removeTimeout:u}=Or(),{registerTimeout:c,removeTimeout:h}=Or(),d=G(null),p=G(null),f=G(t.modelValue),g=G(!1),_=G(!0),v=G(!1),b=G(!1),m=[],y=G(0),x=G(!1);let C,k=null,P=null;const A=w(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:FP(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),E=w(()=>{const me=y.value,Se=f.value;for(let Re=0;Re<me;Re++)if(m[Re].name.value===Se)return!0;return!1}),L=w(()=>`q-tabs__content--align-${g.value===!0?"left":b.value===!0?"justify":t.align}`),T=w(()=>`q-tabs row no-wrap items-center q-tabs--${g.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),I=w(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+L.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),M=w(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),R=w(()=>t.vertical!==!0&&r.lang.rtl===!0),q=w(()=>Fu===!1&&R.value===!0);function F({name:me,setCurrent:Se,skipEmit:Re}){f.value!==me&&(Re!==!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",me),Se!==!0&&t["onUpdate:modelValue"]!==void 0||(function(Ge,oe){const he=Ge!=null&&Ge!==""?m.find(ae=>ae.name.value===Ge):null,Z=oe!=null&&oe!==""?m.find(ae=>ae.name.value===oe):null;if(Pe===!0)Pe=!1;else if(he&&Z){const ae=he.tabIndicatorRef.value,Ce=Z.tabIndicatorRef.value;k!==null&&(clearTimeout(k),k=null),ae.style.transition="none",ae.style.transform="none",Ce.style.transition="none",Ce.style.transform="none";const Ie=ae.getBoundingClientRect(),Fe=Ce.getBoundingClientRect();Ce.style.transform=t.vertical===!0?`translate3d(0,${Ie.top-Fe.top}px,0) scale3d(1,${Fe.height?Ie.height/Fe.height:1},1)`:`translate3d(${Ie.left-Fe.left}px,0,0) scale3d(${Fe.width?Ie.width/Fe.width:1},1,1)`,a(()=>{k=setTimeout(()=>{k=null,Ce.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ce.style.transform="none"},70)})}Z&&g.value===!0&&O(Z.rootRef.value)}(f.value,me),f.value=me))}function B(){o(()=>{V({width:d.value.offsetWidth,height:d.value.offsetHeight})})}function V(me){if(M.value===void 0||p.value===null)return;const Se=me[M.value.container],Re=Math.min(p.value[M.value.scroll],Array.prototype.reduce.call(p.value.children,(oe,he)=>oe+(he[M.value.content]||0),0)),Ge=Se>0&&Re>Se;g.value=Ge,Ge===!0&&s($),b.value=Se<parseInt(t.breakpoint,10)}function O(me){const{left:Se,width:Re,top:Ge,height:oe}=p.value.getBoundingClientRect(),he=me.getBoundingClientRect();let Z=t.vertical===!0?he.top-Ge:he.left-Se;if(Z<0)return p.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Z),void $();Z+=t.vertical===!0?he.height-oe:he.width-Re,Z>0&&(p.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Z),$())}function $(){const me=p.value;if(me===null)return;const Se=me.getBoundingClientRect(),Re=t.vertical===!0?me.scrollTop:Math.abs(me.scrollLeft);R.value===!0?(_.value=Math.ceil(Re+Se.width)<me.scrollWidth-1,v.value=Re>0):(_.value=Re>0,v.value=t.vertical===!0?Math.ceil(Re+Se.height)<me.scrollHeight:Math.ceil(Re+Se.width)<me.scrollWidth)}function J(me){P!==null&&clearInterval(P),P=setInterval(()=>{(function(Se){const Re=p.value,{get:Ge,set:oe}=z.value;let he=!1,Z=Ge(Re);const ae=Se<Z?-1:1;return Z+=5*ae,Z<0?(he=!0,Z=0):(ae===-1&&Z<=Se||ae===1&&Z>=Se)&&(he=!0,Z=Se),oe(Re,Z),$(),he})(me)===!0&&j()},5)}function te(){J(q.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){J(q.value===!0?0:Number.MAX_SAFE_INTEGER)}function j(){P!==null&&(clearInterval(P),P=null)}se(R,$),se(()=>t.modelValue,me=>{F({name:me,setCurrent:!0,skipEmit:!0})}),se(()=>t.outsideArrows,B);const z=w(()=>q.value===!0?{get:me=>Math.abs(me.scrollLeft),set:(me,Se)=>{me.scrollLeft=-Se}}:t.vertical===!0?{get:me=>me.scrollTop,set:(me,Se)=>{me.scrollTop=Se}}:{get:me=>me.scrollLeft,set:(me,Se)=>{me.scrollLeft=Se}});function N(me,Se){for(const Re in me)if(me[Re]!==Se[Re])return!1;return!0}function K(){let me=null,Se={matchedLen:0,queryDiff:9999,hrefLen:0};const Re=m.filter(Z=>Z.routeData!==void 0&&Z.routeData.hasRouterLink.value===!0),{hash:Ge,query:oe}=n.$route,he=Object.keys(oe).length;for(const Z of Re){const ae=Z.routeData.exact.value===!0;if(Z.routeData[ae===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ce,query:Ie,matched:Fe,href:X}=Z.routeData.resolvedLink.value,re=Object.keys(Ie).length;if(ae===!0){if(Ce!==Ge||re!==he||N(oe,Ie)===!1)continue;me=Z.name.value;break}if(Ce!==""&&Ce!==Ge||re!==0&&N(Ie,oe)===!1)continue;const ge={matchedLen:Fe.length,queryDiff:he-re,hrefLen:X.length-Ce.length};if(ge.matchedLen>Se.matchedLen)me=Z.name.value,Se=ge;else if(ge.matchedLen===Se.matchedLen){if(ge.queryDiff<Se.queryDiff)me=Z.name.value,Se=ge;else if(ge.queryDiff!==Se.queryDiff)continue;ge.hrefLen>Se.hrefLen&&(me=Z.name.value,Se=ge)}}me!==null||m.some(Z=>Z.routeData===void 0&&Z.name.value===f.value)!==!0?F({name:me,setCurrent:!0}):Pe=!1}function U(me){if(u(),x.value!==!0&&d.value!==null&&me.target&&typeof me.target.closest=="function"){const Se=me.target.closest(".q-tab");Se&&d.value.contains(Se)===!0&&(x.value=!0,g.value===!0&&O(Se))}}function W(){l(()=>{x.value=!1},30)}function ve(){fe.avoidRouteWatcher===!1?c(K):h()}function ce(){if(C===void 0){const me=se(()=>n.$route.fullPath,ve);C=()=>{me(),C=void 0}}}const fe={currentModel:f,tabProps:A,hasFocus:x,hasActiveTab:E,registerTab:function(me){m.push(me),y.value++,B(),me.routeData===void 0||n.$route===void 0?c(()=>{if(g.value===!0){const Se=f.value,Re=Se!=null&&Se!==""?m.find(Ge=>Ge.name.value===Se):null;Re&&O(Re.rootRef.value)}}):(ce(),me.routeData.hasRouterLink.value===!0&&ve())},unregisterTab:function(me){m.splice(m.indexOf(me),1),y.value--,B(),C!==void 0&&me.routeData!==void 0&&(m.every(Se=>Se.routeData===void 0)===!0&&C(),ve())},verifyRouteModel:ve,updateModel:F,onKbdNavigate:function(me,Se){const Re=Array.prototype.filter.call(p.value.children,ae=>ae===Se||ae.matches&&ae.matches(".q-tab.q-focusable")===!0),Ge=Re.length;if(Ge===0)return;if(me===36)return O(Re[0]),Re[0].focus(),!0;if(me===35)return O(Re[Ge-1]),Re[Ge-1].focus(),!0;const oe=me===(t.vertical===!0?38:37),he=me===(t.vertical===!0?40:39),Z=oe===!0?-1:he===!0?1:void 0;if(Z!==void 0){const ae=R.value===!0?-1:1,Ce=Re.indexOf(Se)+Z*ae;return Ce>=0&&Ce<Ge&&(O(Re[Ce]),Re[Ce].focus({preventScroll:!0})),!0}},avoidRouteWatcher:!1};function pe(){k!==null&&clearTimeout(k),j(),C!==void 0&&C()}let Le,Pe;return ko(SS,fe),ht(pe),Dr(()=>{Le=C!==void 0,pe()}),Ms(()=>{Le===!0&&(ce(),Pe=!0,ve()),B()}),()=>S("div",{ref:d,class:T.value,role:"tablist",onFocusin:U,onFocusout:W},[S(Ss,{onResize:V}),S("div",{ref:p,class:I.value,onScroll:$},Ne(e.default)),S(_t,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(_.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||r.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:te,onTouchstartPassive:te,onMouseupPassive:j,onMouseleavePassive:j,onTouchendPassive:j}),S(_t,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(v.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||r.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:j,onMouseleavePassive:j,onTouchendPassive:j})])}}),zP=0,cC=["click","keydown"],hC={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>"t_"+zP++},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function dC(t,e,i,n){const r=Xi(SS,Mt);if(r===Mt)return Mt;const{proxy:o}=Me(),s=G(null),a=G(null),l=G(null),u=w(()=>t.disable!==!0&&t.ripple!==!1&&Object.assign({keyCodes:[13,32],early:!0},t.ripple===!0?{}:t.ripple)),c=w(()=>r.currentModel.value===t.name),h=w(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(t.icon&&t.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(t.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(t.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),d=w(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(t.contentClass!==void 0?` ${t.contentClass}`:"")),p=w(()=>t.disable===!0||r.hasFocus.value===!0||c.value===!1&&r.hasActiveTab.value===!0?-1:t.tabindex||0);function f(v,b){if(b!==!0&&s.value!==null&&s.value.focus(),t.disable!==!0){if(n===void 0)return r.updateModel({name:t.name}),void i("click",v);if(n.hasRouterLink.value===!0){const m=(y={})=>{let x;const C=y.to===void 0||Fn(y.to,t.to)===!0?r.avoidRouteWatcher=Au():null;return n.navigateToRouterLink(v,{...y,returnRouterError:!0}).catch(k=>{x=k}).then(k=>{if(C===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,x===void 0&&(k===void 0||k.message!==void 0&&k.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:t.name})),y.returnRouterError===!0)return x!==void 0?Promise.reject(x):k})};return i("click",v,m),void(v.defaultPrevented!==!0&&m())}i("click",v)}else n!==void 0&&n.hasRouterLink.value===!0&&et(v)}function g(v){Sn(v,[13,32])?f(v,!0):xs(v)!==!0&&v.keyCode>=35&&v.keyCode<=40&&v.altKey!==!0&&v.metaKey!==!0&&r.onKbdNavigate(v.keyCode,o.$el)===!0&&et(v),i("keydown",v)}const _={name:w(()=>t.name),rootRef:a,tabIndicatorRef:l,routeData:n};return ht(()=>{r.unregisterTab(_)}),Nt(()=>{r.registerTab(_)}),{renderTab:function(v,b){const m={ref:a,class:h.value,tabindex:p.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:f,onKeydown:g,...b};return Ni(S(v,m,function(){const y=r.tabProps.value.narrowIndicator,x=[],C=S("div",{ref:l,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});t.icon!==void 0&&x.push(S(_t,{class:"q-tab__icon",name:t.icon})),t.label!==void 0&&x.push(S("div",{class:"q-tab__label"},t.label)),t.alert!==!1&&x.push(t.alertIcon!==void 0?S(_t,{class:"q-tab__alert-icon",color:t.alert!==!0?t.alert:void 0,name:t.alertIcon}):S("div",{class:"q-tab__alert"+(t.alert!==!0?` text-${t.alert}`:"")})),y===!0&&x.push(C);const k=[S("div",{class:"q-focus-helper",tabindex:-1,ref:s}),S("div",{class:d.value},ni(e.default,x))];return y===!1&&k.push(C),k}()),[[Gd,u.value]])},$tabs:r}}var Pl=ue({name:"QTab",props:hC,emits:cC,setup(t,{slots:e,emit:i}){const{renderTab:n}=dC(t,e,i);return()=>n("div")}}),DP=ue({name:"QTabPanels",props:{...T0,...mt},emits:E0,setup(t,{slots:e}){const i=Me(),n=vt(t,i.proxy.$q),{updatePanelsList:r,getPanelContent:o,panelDirectives:s}=L0(),a=w(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(e),Cn("div",{class:a.value},o(),"pan",t.swipeable,()=>s.value))}}),pf=ue({name:"QTabPanel",props:k0,setup:(t,{slots:e})=>()=>S("div",{class:"q-tab-panel",role:"tabpanel"},Ne(e.default))}),Y_=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,K_=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,X_=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Vc=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,$c=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,wh={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>Y_.test(t),hexaColor:t=>K_.test(t),hexOrHexaColor:t=>X_.test(t),rgbColor:t=>Vc.test(t),rgbaColor:t=>$c.test(t),rgbOrRgbaColor:t=>Vc.test(t)||$c.test(t),hexOrRgbColor:t=>Y_.test(t)||Vc.test(t),hexaOrRgbaColor:t=>K_.test(t)||$c.test(t),anyColor:t=>X_.test(t)||Vc.test(t)||$c.test(t)},NP=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function Z_({r:t,g:e,b:i,a:n}){const r=n!==void 0;if(t=Math.round(t),e=Math.round(e),i=Math.round(i),t>255||e>255||i>255||r&&n>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return n=r?(256|Math.round(255*n/100)).toString(16).slice(1):"","#"+(i|e<<8|t<<16|1<<24).toString(16).slice(1)+n}function Q_({r:t,g:e,b:i,a:n}){return`rgb${n!==void 0?"a":""}(${t},${e},${i}${n!==void 0?","+n/100:""})`}function pC(t){if(typeof t!="string")throw new TypeError("Expected a string");(t=t.replace(/^#/,"")).length===3?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:t.length===4&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16);return t.length>6?{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:Math.round((255&e)/2.55)}:{r:e>>16,g:e>>8&255,b:255&e}}function J_({h:t,s:e,v:i,a:n}){let r,o,s;e/=100,i/=100,t/=360;const a=Math.floor(6*t),l=6*t-a,u=i*(1-e),c=i*(1-l*e),h=i*(1-(1-l)*e);switch(a%6){case 0:r=i,o=h,s=u;break;case 1:r=c,o=i,s=u;break;case 2:r=u,o=i,s=h;break;case 3:r=u,o=c,s=i;break;case 4:r=h,o=u,s=i;break;case 5:r=i,o=u,s=c}return{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*s),a:n}}function ff({r:t,g:e,b:i,a:n}){const r=Math.max(t,e,i),o=Math.min(t,e,i),s=r-o,a=r===0?0:s/r,l=r/255;let u;switch(r){case o:u=0;break;case t:u=e-i+s*(e<i?6:0),u/=6*s;break;case e:u=i-t+2*s,u/=6*s;break;case i:u=t-e+4*s,u/=6*s}return{h:Math.round(360*u),s:Math.round(100*a),v:Math.round(100*l),a:n}}function eb(t){if(typeof t!="string")throw new TypeError("Expected a string");const e=t.replace(/ /g,""),i=NP.exec(e);if(i===null)return pC(e);const n={r:Math.min(255,parseInt(i[2],10)),g:Math.min(255,parseInt(i[3],10)),b:Math.min(255,parseInt(i[4],10))};if(i[1]){const r=parseFloat(i[5]);n.a=100*Math.min(1,isNaN(r)===!0?1:r)}return n}var BP=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],tb="M5 5 h10 v10 h-10 v-10 z";ue({name:"QColor",props:{...mt,...Tn,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:t=>["spectrum","tune","palette"].includes(t)},formatModel:{type:String,default:"auto",validator:t=>["auto","hex","rgb","hexa","rgba"].includes(t)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(t,{emit:e}){const{proxy:i}=Me(),{$q:n}=i,r=vt(t,n),{getCache:o}=ic(),s=G(null),a=G(null),l=w(()=>t.formatModel==="auto"?null:t.formatModel.indexOf("hex")!==-1),u=w(()=>t.formatModel==="auto"?null:t.formatModel.indexOf("a")!==-1),c=G(t.formatModel==="auto"?t.modelValue===void 0||t.modelValue===null||t.modelValue===""||t.modelValue.startsWith("#")?"hex":"rgb":t.formatModel.startsWith("hex")?"hex":"rgb"),h=G(t.defaultView),d=G(L(t.modelValue||t.defaultValue)),p=w(()=>t.disable!==!0&&t.readonly!==!0),f=w(()=>t.modelValue===void 0||t.modelValue===null||t.modelValue===""||t.modelValue.startsWith("#")),g=w(()=>l.value!==null?l.value:f.value),_=Io(w(()=>({type:"hidden",name:t.name,value:d.value[g.value===!0?"hex":"rgb"]}))),v=w(()=>u.value!==null?u.value:d.value.a!==void 0),b=w(()=>({backgroundColor:d.value.rgb||"#000"})),m=w(()=>"q-color-picker__header-content q-color-picker__header-content--"+(d.value.a!==void 0&&d.value.a<65||function(N){if(typeof N!="string"&&(!N||N.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const K=typeof N=="string"?eb(N):N,U=K.r/255,W=K.g/255,ve=K.b/255;return .2126*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))+.7152*(W<=.03928?W/12.92:Math.pow((W+.055)/1.055,2.4))+.0722*(ve<=.03928?ve/12.92:Math.pow((ve+.055)/1.055,2.4))}(d.value)>.4?"light":"dark")),y=w(()=>({background:`hsl(${d.value.h},100%,50%)`})),x=w(()=>({top:100-d.value.v+"%",[n.lang.rtl===!0?"right":"left"]:`${d.value.s}%`})),C=w(()=>t.palette!==void 0&&t.palette.length!==0?t.palette:BP),k=w(()=>"q-color-picker"+(t.bordered===!0?" q-color-picker--bordered":"")+(t.square===!0?" q-color-picker--square no-border-radius":"")+(t.flat===!0?" q-color-picker--flat no-shadow":"")+(t.disable===!0?" disabled":"")+(r.value===!0?" q-color-picker--dark q-dark":"")),P=w(()=>t.disable===!0?{"aria-disabled":"true"}:{}),A=w(()=>[[bn,F,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function E(N,K){d.value.hex=Z_(N),d.value.rgb=Q_(N),d.value.r=N.r,d.value.g=N.g,d.value.b=N.b,d.value.a=N.a;const U=d.value[g.value===!0?"hex":"rgb"];e("update:modelValue",U),K===!0&&e("change",U)}function L(N){const K=u.value!==void 0?u.value:t.formatModel==="auto"?null:t.formatModel.indexOf("a")!==-1;if(typeof N!="string"||N.length===0||wh.anyColor(N.replace(/ /g,""))!==!0)return{h:0,s:0,v:0,r:0,g:0,b:0,a:K===!0?100:void 0,hex:void 0,rgb:void 0};const U=eb(N);return K===!0&&U.a===void 0&&(U.a=100),U.hex=Z_(U),U.rgb=Q_(U),Object.assign(U,ff(U))}function T(N,K,U){const W=s.value;if(W===null)return;const ve=W.clientWidth,ce=W.clientHeight,fe=W.getBoundingClientRect();let pe=Math.min(ve,Math.max(0,N-fe.left));n.lang.rtl===!0&&(pe=ve-pe);const Le=Math.min(ce,Math.max(0,K-fe.top)),Pe=Math.round(100*pe/ve),me=Math.round(100*Math.max(0,Math.min(1,-Le/ce+1))),Se=J_({h:d.value.h,s:Pe,v:me,a:v.value===!0?d.value.a:void 0});d.value.s=Pe,d.value.v=me,E(Se,U)}function I(N,K){const U=Math.round(N),W=J_({h:U,s:d.value.s,v:d.value.v,a:v.value===!0?d.value.a:void 0});d.value.h=U,E(W,K)}function M(N){I(N,!0)}function R(N,K,U,W,ve){if(W!==void 0&&Xt(W),!/^[0-9]+$/.test(N))return void(ve===!0&&i.$forceUpdate());const ce=Math.floor(Number(N));if(ce<0||ce>U)return void(ve===!0&&i.$forceUpdate());const fe={r:K==="r"?ce:d.value.r,g:K==="g"?ce:d.value.g,b:K==="b"?ce:d.value.b,a:v.value===!0?K==="a"?ce:d.value.a:void 0};if(K!=="a"){const pe=ff(fe);d.value.h=pe.h,d.value.s=pe.s,d.value.v=pe.v}if(E(fe,ve),W!==void 0&&ve!==!0&&W.target.selectionEnd!==void 0){const pe=W.target.selectionEnd;dt(()=>{W.target.setSelectionRange(pe,pe)})}}function q(N,K){let U;const W=N.target.value;if(Xt(N),c.value==="hex"){if(W.length!==(v.value===!0?9:7)||!/^#[0-9A-Fa-f]+$/.test(W))return!0;U=pC(W)}else{let ce;if(!W.endsWith(")"))return!0;if(v.value!==!0&&W.startsWith("rgb(")){if(ce=W.substring(4,W.length-1).split(",").map(fe=>parseInt(fe,10)),ce.length!==3||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(W))return!0}else{if(v.value!==!0||!W.startsWith("rgba("))return!0;{if(ce=W.substring(5,W.length-1).split(","),ce.length!==4||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(W))return!0;for(let pe=0;pe<3;pe++){const Le=parseInt(ce[pe],10);if(Le<0||Le>255)return!0;ce[pe]=Le}const fe=parseFloat(ce[3]);if(fe<0||fe>1)return!0;ce[3]=fe}}if(ce[0]<0||ce[0]>255||ce[1]<0||ce[1]>255||ce[2]<0||ce[2]>255||v.value===!0&&(ce[3]<0||ce[3]>1))return!0;U={r:ce[0],g:ce[1],b:ce[2],a:v.value===!0?100*ce[3]:void 0}}const ve=ff(U);if(d.value.h=ve.h,d.value.s=ve.s,d.value.v=ve.v,E(U,K),K!==!0){const ce=N.target.selectionEnd;dt(()=>{N.target.setSelectionRange(ce,ce)})}}function F(N){N.isFinal?T(N.position.left,N.position.top,!0):B(N)}se(()=>t.modelValue,N=>{const K=L(N||t.defaultValue);K.hex!==d.value.hex&&(d.value=K)}),se(()=>t.defaultValue,N=>{if(!t.modelValue&&N){const K=L(N);K.hex!==d.value.hex&&(d.value=K)}});const B=RS(N=>{T(N.position.left,N.position.top)},20);function V(N){T(N.pageX-window.pageXOffset,N.pageY-window.pageYOffset,!0)}function O(N){T(N.pageX-window.pageXOffset,N.pageY-window.pageYOffset)}function $(N){a.value!==null&&(a.value.$el.style.opacity=N?1:0)}function J(N){c.value=N}function te(N){h.value=N}function ie(){const N={ref:s,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(p.value!==!0?" readonly":""),style:y.value,...p.value===!0?{onClick:V,onMousedown:O}:{}},K=[S("div",{style:{paddingBottom:"100%"}}),S("div",{class:"q-color-picker__spectrum-white absolute-full"}),S("div",{class:"q-color-picker__spectrum-black absolute-full"}),S("div",{class:"absolute",style:x.value},[d.value.hex!==void 0?S("div",{class:"q-color-picker__spectrum-circle"}):null])],U=[S(Yo,{class:"q-color-picker__hue non-selectable",modelValue:d.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:p.value!==!0,thumbPath:tb,"onUpdate:modelValue":I,onChange:M})];return v.value===!0&&U.push(S(Yo,{class:"q-color-picker__alpha non-selectable",modelValue:d.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==",readonly:p.value!==!0,hideSelection:!0,thumbPath:tb,...o("alphaSlide",{"onUpdate:modelValue":W=>R(W,"a",100),onChange:W=>R(W,"a",100,void 0,!0)})})),[Cn("div",N,K,"spec",p.value,()=>A.value),S("div",{class:"q-color-picker__sliders"},U)]}function j(){return[S("div",{class:"row items-center no-wrap"},[S("div","R"),S(Yo,{modelValue:d.value.r,min:0,max:255,color:"red",dark:r.value,readonly:p.value!==!0,...o("rSlide",{"onUpdate:modelValue":N=>R(N,"r",255),onChange:N=>R(N,"r",255,void 0,!0)})}),S("input",{value:d.value.r,maxlength:3,readonly:p.value!==!0,onChange:Xt,...o("rIn",{onInput:N=>R(N.target.value,"r",255,N),onBlur:N=>R(N.target.value,"r",255,N,!0)})})]),S("div",{class:"row items-center no-wrap"},[S("div","G"),S(Yo,{modelValue:d.value.g,min:0,max:255,color:"green",dark:r.value,readonly:p.value!==!0,...o("gSlide",{"onUpdate:modelValue":N=>R(N,"g",255),onChange:N=>R(N,"g",255,void 0,!0)})}),S("input",{value:d.value.g,maxlength:3,readonly:p.value!==!0,onChange:Xt,...o("gIn",{onInput:N=>R(N.target.value,"g",255,N),onBlur:N=>R(N.target.value,"g",255,N,!0)})})]),S("div",{class:"row items-center no-wrap"},[S("div","B"),S(Yo,{modelValue:d.value.b,min:0,max:255,color:"blue",readonly:p.value!==!0,dark:r.value,...o("bSlide",{"onUpdate:modelValue":N=>R(N,"b",255),onChange:N=>R(N,"b",255,void 0,!0)})}),S("input",{value:d.value.b,maxlength:3,readonly:p.value!==!0,onChange:Xt,...o("bIn",{onInput:N=>R(N.target.value,"b",255,N),onBlur:N=>R(N.target.value,"b",255,N,!0)})})]),v.value===!0?S("div",{class:"row items-center no-wrap"},[S("div","A"),S(Yo,{modelValue:d.value.a,color:"grey",readonly:p.value!==!0,dark:r.value,...o("aSlide",{"onUpdate:modelValue":N=>R(N,"a",100),onChange:N=>R(N,"a",100,void 0,!0)})}),S("input",{value:d.value.a,maxlength:3,readonly:p.value!==!0,onChange:Xt,...o("aIn",{onInput:N=>R(N.target.value,"a",100,N),onBlur:N=>R(N.target.value,"a",100,N,!0)})})]):null]}function z(){return[S("div",{class:"row items-center q-color-picker__palette-rows"+(p.value===!0?" q-color-picker__palette-rows--editable":"")},C.value.map(N=>S("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:N},...p.value===!0?o("palette#"+N,{onClick:()=>{(function(K){const U=L(K),W={r:U.r,g:U.g,b:U.b,a:U.a};W.a===void 0&&(W.a=d.value.a),d.value.h=U.h,d.value.s=U.s,d.value.v=U.v,E(W,!0)})(N)}}):{}})))]}return()=>{const N=[S(DP,{modelValue:h.value,animated:!0},()=>[S(pf,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},ie),S(pf,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},j),S(pf,{class:"q-color-picker__palette-tab",name:"palette"},z)])];return t.name!==void 0&&t.disable!==!0&&_(N,"push"),t.noHeader!==!0&&N.unshift(function(){const K=[];return t.noHeaderTabs!==!0&&K.push(S(W_,{class:"q-color-picker__header-tabs",modelValue:c.value,dense:!0,align:"justify","onUpdate:modelValue":J},()=>[S(Pl,{label:"HEX"+(v.value===!0?"A":""),name:"hex",ripple:!1}),S(Pl,{label:"RGB"+(v.value===!0?"A":""),name:"rgb",ripple:!1})])),K.push(S("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[S("input",{class:"fit",value:d.value[c.value],...p.value!==!0?{readonly:!0}:{},...o("topIn",{onInput:U=>{$(q(U)===!0)},onChange:Xt,onBlur:U=>{q(U,!0)===!0&&i.$forceUpdate(),$(!1)}})}),S(_t,{ref:a,class:"q-color-picker__error-icon absolute no-pointer-events",name:n.iconSet.type.negative})])),S("div",{class:"q-color-picker__header relative-position overflow-hidden"},[S("div",{class:"q-color-picker__header-bg absolute-full"}),S("div",{class:m.value,style:b.value},K)])}()),t.noFooter!==!0&&N.push(S("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[S(W_,{class:"absolute-full",modelValue:h.value,dense:!0,align:"justify","onUpdate:modelValue":te},()=>[S(Pl,{icon:n.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),S(Pl,{icon:n.iconSet.colorPicker.tune,name:"tune",ripple:!1}),S(Pl,{icon:n.iconSet.colorPicker.palette,name:"palette",ripple:!1})])])),S("div",{class:k.value,...P.value},N)}}});var ho=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function jP(t,e,i){return Object.prototype.toString.call(t)==="[object Date]"&&(i=t.getDate(),e=t.getMonth()+1,t=t.getFullYear()),function(n){const r=gC(n).gy;let o,s,a,l=r-621;const u=fC(l,!1),c=jm(r,3,u.march);if(a=n-c,a>=0){if(a<=185)return s=1+Ut(a,31),o=ln(a,31)+1,{jy:l,jm:s,jd:o};a-=186}else l-=1,a+=179,u.leap===1&&(a+=1);return s=7+Ut(a,30),o=ln(a,30)+1,{jy:l,jm:s,jd:o}}(jm(t,e,i))}function ib(t,e,i){return gC(function(n,r,o){const s=fC(n,!0);return jm(s.gy,3,s.march)+31*(r-1)-Ut(r,7)*(r-7)+o-1}(t,e,i))}function VP(t){return function(e){const i=ho.length;let n,r,o,s,a,l=ho[0];if(e<l||e>=ho[i-1])throw new Error("Invalid Jalaali year "+e);for(a=1;a<i&&(n=ho[a],r=n-l,!(e<n));a+=1)l=n;return s=e-l,r-s<6&&(s=s-r+33*Ut(r+4,33)),o=ln(ln(s+1,33)-1,4),o===-1&&(o=4),o}(t)===0}function Sh(t,e){return e<=6?31:e<=11||VP(t)?30:29}function fC(t,e){const i=ho.length,n=t+621;let r,o,s,a,l,u=-14,c=ho[0];if(t<c||t>=ho[i-1])throw new Error("Invalid Jalaali year "+t);for(l=1;l<i&&(r=ho[l],o=r-c,!(t<r));l+=1)u=u+8*Ut(o,33)+Ut(ln(o,33),4),c=r;a=t-c,u=u+8*Ut(a,33)+Ut(ln(a,33)+3,4),ln(o,33)===4&&o-a==4&&(u+=1);const h=20+u-(Ut(n,4)-Ut(3*(Ut(n,100)+1),4)-150);return e||(o-a<6&&(a=a-o+33*Ut(o+4,33)),s=ln(ln(a+1,33)-1,4),s===-1&&(s=4)),{leap:s,gy:n,march:h}}function jm(t,e,i){let n=Ut(1461*(t+Ut(e-8,6)+100100),4)+Ut(153*ln(e+9,12)+2,5)+i-34840408;return n=n-Ut(3*Ut(t+100100+Ut(e-8,6),100),4)+752,n}function gC(t){let e=4*t+139361631;e=e+4*Ut(3*Ut(4*t+183187720,146097),4)-3908;const i=5*Ut(ln(e,1461),4)+308,n=Ut(ln(i,153),5)+1,r=ln(Ut(i,153),12)+1;return{gy:Ut(e,1461)-100100+Ut(8-r,6),gm:r,gd:n}}function Ut(t,e){return~~(t/e)}function ln(t,e){return t-~~(t/e)*e}var $P=["gregorian","persian"],vd={mask:{type:String},locale:Object,calendar:{type:String,validator:t=>$P.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},mC=["update:modelValue"];function Mr(t){return t.year+"/"+St(t.month)+"/"+St(t.day)}function vC(t,e){const i=w(()=>t.disable!==!0&&t.readonly!==!0),n=w(()=>i.value===!0?0:-1),r=w(()=>{const o=[];return t.color!==void 0&&o.push(`bg-${t.color}`),t.textColor!==void 0&&o.push(`text-${t.textColor}`),o.join(" ")});return{editable:i,tabindex:n,headerClass:r,getLocale:function(){return t.locale!==void 0?{...e.lang.date,...t.locale}:e.lang.date},getCurrentDate:function(o){const s=new Date,a=o===!0?null:0;if(t.calendar==="persian"){const l=jP(s);return{year:l.jy,month:l.jm,day:l.jd}}return{year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),hour:a,minute:a,second:a,millisecond:a}}}}var GP=864e5,Vm=6e4,yC="YYYY-MM-DDTHH:mm:ss.SSSZ",HP=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,UP=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,gf={};function _C(t,e){return t!==void 0?t:e!==void 0?e.date:Im.date}function nb(t,e=""){const i=t>0?"-":"+",n=Math.abs(t),r=n%60;return i+St(Math.floor(n/60))+e+St(r)}function Gl(t,e,i,n,r){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(o,r),t==null||t===""||typeof t!="string")return o;e===void 0&&(e=yC);const s=_C(i,_S.props),a=s.months,l=s.monthsShort,{regex:u,map:c}=function(p,f){const g="("+f.days.join("|")+")",_=p+g;if(gf[_]!==void 0)return gf[_];const v="("+f.daysShort.join("|")+")",b="("+f.months.join("|")+")",m="("+f.monthsShort.join("|")+")",y={};let x=0;const C=p.replace(UP,P=>{switch(x++,P){case"YY":return y.YY=x,"(-?\\d{1,2})";case"YYYY":return y.YYYY=x,"(-?\\d{1,4})";case"M":return y.M=x,"(\\d{1,2})";case"Mo":return y.M=x++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return y.M=x,"(\\d{2})";case"MMM":return y.MMM=x,m;case"MMMM":return y.MMMM=x,b;case"D":return y.D=x,"(\\d{1,2})";case"Do":return y.D=x++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return y.D=x,"(\\d{2})";case"H":return y.H=x,"(\\d{1,2})";case"HH":return y.H=x,"(\\d{2})";case"h":return y.h=x,"(\\d{1,2})";case"hh":return y.h=x,"(\\d{2})";case"m":return y.m=x,"(\\d{1,2})";case"mm":return y.m=x,"(\\d{2})";case"s":return y.s=x,"(\\d{1,2})";case"ss":return y.s=x,"(\\d{2})";case"S":return y.S=x,"(\\d{1})";case"SS":return y.S=x,"(\\d{2})";case"SSS":return y.S=x,"(\\d{3})";case"A":return y.A=x,"(AM|PM)";case"a":return y.a=x,"(am|pm)";case"aa":return y.aa=x,"(a\\.m\\.|p\\.m\\.)";case"ddd":return v;case"dddd":return g;case"Q":case"d":case"E":return"(\\d{1})";case"do":return x++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return x++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return x++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return y.Z=x,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return y.ZZ=x,"(Z|[+-]\\d{2}\\d{2})";case"X":return y.X=x,"(-?\\d+)";case"x":return y.x=x,"(-?\\d{4,})";default:return x--,P[0]==="["&&(P=P.substring(1,P.length-1)),P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),k={map:y,regex:new RegExp("^"+C)};return gf[_]=k,k}(e,s),h=t.match(u);if(h===null)return o;let d="";if(c.X!==void 0||c.x!==void 0){const p=parseInt(h[c.X!==void 0?c.X:c.x],10);if(isNaN(p)===!0||p<0)return o;const f=new Date(p*(c.X!==void 0?1e3:1));o.year=f.getFullYear(),o.month=f.getMonth()+1,o.day=f.getDate(),o.hour=f.getHours(),o.minute=f.getMinutes(),o.second=f.getSeconds(),o.millisecond=f.getMilliseconds()}else{if(c.YYYY!==void 0)o.year=parseInt(h[c.YYYY],10);else if(c.YY!==void 0){const p=parseInt(h[c.YY],10);o.year=p<0?p:2e3+p}if(c.M!==void 0){if(o.month=parseInt(h[c.M],10),o.month<1||o.month>12)return o}else c.MMM!==void 0?o.month=l.indexOf(h[c.MMM])+1:c.MMMM!==void 0&&(o.month=a.indexOf(h[c.MMMM])+1);if(c.D!==void 0){if(o.day=parseInt(h[c.D],10),o.year===null||o.month===null||o.day<1)return o;const p=n!=="persian"?new Date(o.year,o.month,0).getDate():Sh(o.year,o.month);if(o.day>p)return o}c.H!==void 0?o.hour=parseInt(h[c.H],10)%24:c.h!==void 0&&(o.hour=parseInt(h[c.h],10)%12,(c.A&&h[c.A]==="PM"||c.a&&h[c.a]==="pm"||c.aa&&h[c.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),c.m!==void 0&&(o.minute=parseInt(h[c.m],10)%60),c.s!==void 0&&(o.second=parseInt(h[c.s],10)%60),c.S!==void 0&&(o.millisecond=parseInt(h[c.S],10)*10**(3-h[c.S].length)),c.Z===void 0&&c.ZZ===void 0||(d=c.Z!==void 0?h[c.Z].replace(":",""):h[c.ZZ],o.timezoneOffset=(d[0]==="+"?-1:1)*(60*d.slice(1,3)+1*d.slice(3,5)))}return o.dateHash=St(o.year,6)+"/"+St(o.month)+"/"+St(o.day),o.timeHash=St(o.hour)+":"+St(o.minute)+":"+St(o.second)+d,o}function mf(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const i=new Date(e.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const n=e.getTimezoneOffset()-i.getTimezoneOffset();e.setHours(e.getHours()-n);const r=(e-i)/6048e5;return 1+Math.floor(r)}function kr(t,e,i){const n=new Date(t),r="set";switch(e){case"year":case"years":n[`${r}Month`](0);case"month":case"months":n[`${r}Date`](1);case"day":case"days":case"date":n[`${r}Hours`](0);case"hour":case"hours":n[`${r}Minutes`](0);case"minute":case"minutes":n[`${r}Seconds`](0);case"second":case"seconds":n[`${r}Milliseconds`](0)}return n}function Gc(t,e,i){return(t.getTime()-t.getTimezoneOffset()*Vm-(e.getTime()-e.getTimezoneOffset()*Vm))/i}function bC(t,e,i="days"){const n=new Date(t),r=new Date(e);switch(i){case"years":case"year":return n.getFullYear()-r.getFullYear();case"months":case"month":return 12*(n.getFullYear()-r.getFullYear())+n.getMonth()-r.getMonth();case"days":case"day":case"date":return Gc(kr(n,"day"),kr(r,"day"),GP);case"hours":case"hour":return Gc(kr(n,"hour"),kr(r,"hour"),36e5);case"minutes":case"minute":return Gc(kr(n,"minute"),kr(r,"minute"),Vm);case"seconds":case"second":return Gc(kr(n,"second"),kr(r,"second"),1e3)}}function vf(t){return bC(t,kr(t,"year"),"days")+1}function Us(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}var rb={YY(t,e,i){const n=this.YYYY(t,e,i)%100;return n>=0?St(n):"-"+St(Math.abs(n))},YYYY:(t,e,i)=>i??t.getFullYear(),M:t=>t.getMonth()+1,Mo:t=>Us(t.getMonth()+1),MM:t=>St(t.getMonth()+1),MMM:(t,e)=>e.monthsShort[t.getMonth()],MMMM:(t,e)=>e.months[t.getMonth()],Q:t=>Math.ceil((t.getMonth()+1)/3),Qo(t){return Us(this.Q(t))},D:t=>t.getDate(),Do:t=>Us(t.getDate()),DD:t=>St(t.getDate()),DDD:t=>vf(t),DDDo:t=>Us(vf(t)),DDDD:t=>St(vf(t),3),d:t=>t.getDay(),do:t=>Us(t.getDay()),dd:(t,e)=>e.days[t.getDay()].slice(0,2),ddd:(t,e)=>e.daysShort[t.getDay()],dddd:(t,e)=>e.days[t.getDay()],E:t=>t.getDay()||7,w:t=>mf(t),wo:t=>Us(mf(t)),ww:t=>St(mf(t)),H:t=>t.getHours(),HH:t=>St(t.getHours()),h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return St(this.h(t))},m:t=>t.getMinutes(),mm:t=>St(t.getMinutes()),s:t=>t.getSeconds(),ss:t=>St(t.getSeconds()),S:t=>Math.floor(t.getMilliseconds()/100),SS:t=>St(Math.floor(t.getMilliseconds()/10)),SSS:t=>St(t.getMilliseconds(),3),A:t=>t.getHours()<12?"AM":"PM",a:t=>t.getHours()<12?"am":"pm",aa:t=>t.getHours()<12?"a.m.":"p.m.",Z:(t,e,i,n)=>nb(n??t.getTimezoneOffset(),":"),ZZ:(t,e,i,n)=>nb(n??t.getTimezoneOffset()),X:t=>Math.floor(t.getTime()/1e3),x:t=>t.getTime()};function xC(t,e,i,n,r){if(t!==0&&!t||t===1/0||t===-1/0)return;const o=new Date(t);if(isNaN(o))return;e===void 0&&(e=yC);const s=_C(i,_S.props);return e.replace(HP,(a,l)=>a in rb?rb[a](o,s,n,r):l===void 0?a:l.split("\\]").join("]"))}var Fo=20,WP=["Calendar","Years","Months"],ob=t=>WP.includes(t),yf=t=>/^-?[\d]+\/[0-1]\d$/.test(t),Ws=" — ";function Wr(t){return t.year+"/"+St(t.month)}function wC(t,e,i){function n(){}return ht(()=>{t.value}),{removeFromHistory:n,addToHistory(){}}}ue({name:"QDate",props:{...vd,...Tn,...mt,modelValue:{required:!0,validator:t=>typeof t=="string"||Array.isArray(t)===!0||Object(t)===t||t===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...vd.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:yf},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:yf},navigationMaxYearMonth:{type:String,validator:yf},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:ob}},emits:[...mC,"rangeStart","rangeEnd","navigation"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=vt(t,r),{getCache:s}=ic(),{tabindex:a,headerClass:l,getLocale:u,getCurrentDate:c}=vC(t,r);let h;const d=Io(tc(t)),p=G(null),f=G(ae()),g=G(u()),_=w(()=>ae()),v=w(()=>u()),b=w(()=>c()),m=G(Ie(f.value,g.value)),y=G(t.defaultView),x=w(()=>r.lang.rtl===!0?"right":"left"),C=G(x.value),k=G(x.value),P=m.value.year,A=G(P-P%Fo-(P<0?Fo:0)),E=G(null),L=w(()=>{const D=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${D} q-date--${D}-${t.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),T=w(()=>t.color||"primary"),I=w(()=>t.textColor||"white"),M=w(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),R=w(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),q=w(()=>R.value.filter(D=>typeof D=="string").map(D=>Ce(D,f.value,g.value)).filter(D=>D.dateHash!==null&&D.day!==null&&D.month!==null&&D.year!==null)),F=w(()=>{const D=H=>Ce(H,f.value,g.value);return R.value.filter(H=>Ei(H)===!0&&H.from!==void 0&&H.to!==void 0).map(H=>({from:D(H.from),to:D(H.to)})).filter(H=>H.from.dateHash!==null&&H.to.dateHash!==null&&H.from.dateHash<H.to.dateHash)}),B=w(()=>t.calendar!=="persian"?D=>new Date(D.year,D.month-1,D.day):D=>{const H=ib(D.year,D.month,D.day);return new Date(H.gy,H.gm-1,H.gd)}),V=w(()=>t.calendar==="persian"?Mr:(D,H,Q)=>xC(new Date(D.year,D.month-1,D.day,D.hour,D.minute,D.second,D.millisecond),H===void 0?f.value:H,Q===void 0?g.value:Q,D.year,D.timezoneOffset)),O=w(()=>q.value.length+F.value.reduce((D,H)=>D+1+bC(B.value(H.to),B.value(H.from)),0)),$=w(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(E.value!==null){const Q=E.value.init,le=B.value(Q);return g.value.daysShort[le.getDay()]+", "+g.value.monthsShort[Q.month-1]+" "+Q.day+Ws+"?"}if(O.value===0)return Ws;if(O.value>1)return`${O.value} ${g.value.pluralDay}`;const D=q.value[0],H=B.value(D);return isNaN(H.valueOf())===!0?Ws:g.value.headerTitle!==void 0?g.value.headerTitle(H,D):g.value.daysShort[H.getDay()]+", "+g.value.monthsShort[D.month-1]+" "+D.day}),J=w(()=>q.value.concat(F.value.map(D=>D.from)).sort((D,H)=>D.year-H.year||D.month-H.month)[0]),te=w(()=>q.value.concat(F.value.map(D=>D.to)).sort((D,H)=>H.year-D.year||H.month-D.month)[0]),ie=w(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(O.value===0)return Ws;if(O.value>1){const D=J.value,H=te.value,Q=g.value.monthsShort;return Q[D.month-1]+(D.year!==H.year?" "+D.year+Ws+Q[H.month-1]+" ":D.month!==H.month?Ws+Q[H.month-1]:"")+" "+H.year}return q.value[0].year}),j=w(()=>{const D=[r.iconSet.datetime.arrowLeft,r.iconSet.datetime.arrowRight];return r.lang.rtl===!0?D.reverse():D}),z=w(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):g.value.firstDayOfWeek),N=w(()=>{const D=g.value.daysShort,H=z.value;return H>0?D.slice(H,7).concat(D.slice(0,H)):D}),K=w(()=>{const D=m.value;return t.calendar!=="persian"?new Date(D.year,D.month,0).getDate():Sh(D.year,D.month)}),U=w(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),W=w(()=>{if(t.navigationMinYearMonth===void 0)return null;const D=t.navigationMinYearMonth.split("/");return{year:parseInt(D[0],10),month:parseInt(D[1],10)}}),ve=w(()=>{if(t.navigationMaxYearMonth===void 0)return null;const D=t.navigationMaxYearMonth.split("/");return{year:parseInt(D[0],10),month:parseInt(D[1],10)}}),ce=w(()=>{const D={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return W.value!==null&&W.value.year>=m.value.year&&(D.year.prev=!1,W.value.year===m.value.year&&W.value.month>=m.value.month&&(D.month.prev=!1)),ve.value!==null&&ve.value.year<=m.value.year&&(D.year.next=!1,ve.value.year===m.value.year&&ve.value.month<=m.value.month&&(D.month.next=!1)),D}),fe=w(()=>{const D={};return q.value.forEach(H=>{const Q=Wr(H);D[Q]===void 0&&(D[Q]=[]),D[Q].push(H.day)}),D}),pe=w(()=>{const D={};return F.value.forEach(H=>{const Q=Wr(H.from),le=Wr(H.to);if(D[Q]===void 0&&(D[Q]=[]),D[Q].push({from:H.from.day,to:Q===le?H.to.day:void 0,range:H}),Q<le){let ne;const{year:Te,month:de}=H.from,Be=de<12?{year:Te,month:de+1}:{year:Te+1,month:1};for(;(ne=Wr(Be))<=le;)D[ne]===void 0&&(D[ne]=[]),D[ne].push({from:void 0,to:ne===le?H.to.day:void 0,range:H}),Be.month++,Be.month>12&&(Be.year++,Be.month=1)}}),D}),Le=w(()=>{if(E.value===null)return;const{init:D,initHash:H,final:Q,finalHash:le}=E.value,[ne,Te]=H<=le?[D,Q]:[Q,D],de=Wr(ne),Be=Wr(Te);if(de!==Pe.value&&Be!==Pe.value)return;const Ye={};return de===Pe.value?(Ye.from=ne.day,Ye.includeFrom=!0):Ye.from=1,Be===Pe.value?(Ye.to=Te.day,Ye.includeTo=!0):Ye.to=K.value,Ye}),Pe=w(()=>Wr(m.value)),me=w(()=>{const D={};if(t.options===void 0){for(let Q=1;Q<=K.value;Q++)D[Q]=!0;return D}const H=typeof t.options=="function"?t.options:Q=>t.options.includes(Q);for(let Q=1;Q<=K.value;Q++){const le=Pe.value+"/"+St(Q);D[Q]=H(le)}return D}),Se=w(()=>{const D={};if(t.events===void 0)for(let H=1;H<=K.value;H++)D[H]=!1;else{const H=typeof t.events=="function"?t.events:Q=>t.events.includes(Q);for(let Q=1;Q<=K.value;Q++){const le=Pe.value+"/"+St(Q);D[Q]=H(le)===!0&&U.value(le)}}return D}),Re=w(()=>{let D,H;const{year:Q,month:le}=m.value;if(t.calendar!=="persian")D=new Date(Q,le-1,1),H=new Date(Q,le-1,0).getDate();else{const ne=ib(Q,le,1);D=new Date(ne.gy,ne.gm-1,ne.gd);let Te=le-1,de=Q;Te===0&&(Te=12,de--),H=Sh(de,Te)}return{days:D.getDay()-z.value-1,endDay:H}}),Ge=w(()=>{const D=[],{days:H,endDay:Q}=Re.value,le=H<0?H+7:H;if(le<6)for(let de=Q-le;de<=Q;de++)D.push({i:de,fill:!0});const ne=D.length;for(let de=1;de<=K.value;de++){const Be={i:de,event:Se.value[de],classes:[]};me.value[de]===!0&&(Be.in=!0,Be.flat=!0),D.push(Be)}if(fe.value[Pe.value]!==void 0&&fe.value[Pe.value].forEach(de=>{const Be=ne+de-1;Object.assign(D[Be],{selected:!0,unelevated:!0,flat:!1,color:T.value,textColor:I.value})}),pe.value[Pe.value]!==void 0&&pe.value[Pe.value].forEach(de=>{if(de.from!==void 0){const Be=ne+de.from-1,Ye=ne+(de.to||K.value)-1;for(let bt=Be;bt<=Ye;bt++)Object.assign(D[bt],{range:de.range,unelevated:!0,color:T.value,textColor:I.value});Object.assign(D[Be],{rangeFrom:!0,flat:!1}),de.to!==void 0&&Object.assign(D[Ye],{rangeTo:!0,flat:!1})}else if(de.to!==void 0){const Be=ne+de.to-1;for(let Ye=ne;Ye<=Be;Ye++)Object.assign(D[Ye],{range:de.range,unelevated:!0,color:T.value,textColor:I.value});Object.assign(D[Be],{flat:!1,rangeTo:!0})}else{const Be=ne+K.value-1;for(let Ye=ne;Ye<=Be;Ye++)Object.assign(D[Ye],{range:de.range,unelevated:!0,color:T.value,textColor:I.value})}}),Le.value!==void 0){const de=ne+Le.value.from-1,Be=ne+Le.value.to-1;for(let Ye=de;Ye<=Be;Ye++)D[Ye].color=T.value,D[Ye].editRange=!0;Le.value.includeFrom===!0&&(D[de].editRangeFrom=!0),Le.value.includeTo===!0&&(D[Be].editRangeTo=!0)}m.value.year===b.value.year&&m.value.month===b.value.month&&(D[ne+b.value.day-1].today=!0);const Te=D.length%7;if(Te>0){const de=7-Te;for(let Be=1;Be<=de;Be++)D.push({i:Be,fill:!0})}return D.forEach(de=>{let Be="q-date__calendar-item ";de.fill===!0?Be+="q-date__calendar-item--fill":(Be+="q-date__calendar-item--"+(de.in===!0?"in":"out"),de.range!==void 0&&(Be+=" q-date__range"+(de.rangeTo===!0?"-to":de.rangeFrom===!0?"-from":"")),de.editRange===!0&&(Be+=` q-date__edit-range${de.editRangeFrom===!0?"-from":""}${de.editRangeTo===!0?"-to":""}`),de.range===void 0&&de.editRange!==!0||(Be+=` text-${de.color}`)),de.classes=Be}),D}),oe=w(()=>t.disable===!0?{"aria-disabled":"true"}:{});function he(){const{year:D,month:H,day:Q}=b.value,le={...m.value,year:D,month:H,day:Q},ne=fe.value[Wr(le)];ne!==void 0&&ne.includes(le.day)!==!1||We(le),Z(le.year,le.month)}function Z(D,H){y.value="Calendar",qe(D,H)}function ae(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Ce(D,H,Q){return Gl(D,H,Q,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ie(D,H){const Q=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(Q.length===0)return Fe();const le=Q[Q.length-1],ne=Ce(le.from!==void 0?le.from:le,D,H);return ne.dateHash===null?Fe():ne}function Fe(){let D,H;if(t.defaultYearMonth!==void 0){const Q=t.defaultYearMonth.split("/");D=parseInt(Q[0],10),H=parseInt(Q[1],10)}else{const Q=b.value!==void 0?b.value:c();D=Q.year,H=Q.month}return{year:D,month:H,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:D+"/"+St(H)+"/01"}}function X(D){let H=m.value.year,Q=Number(m.value.month)+D;Q===13?(Q=1,H++):Q===0&&(Q=12,H--),qe(H,Q),M.value===!0&&tt("month")}function re(D){qe(Number(m.value.year)+D,m.value.month),M.value===!0&&tt("year")}function ge(D){return{year:D.year,month:D.month,day:D.day}}function qe(D,H,Q){if(W.value!==null&&D<=W.value.year&&((H<W.value.month||D<W.value.year)&&(H=W.value.month),D=W.value.year),ve.value!==null&&D>=ve.value.year&&((H>ve.value.month||D>ve.value.year)&&(H=ve.value.month),D=ve.value.year),Q!==void 0){const{hour:ne,minute:Te,second:de,millisecond:Be,timezoneOffset:Ye,timeHash:bt}=Q;Object.assign(m.value,{hour:ne,minute:Te,second:de,millisecond:Be,timezoneOffset:Ye,timeHash:bt})}const le=D+"/"+St(H)+"/01";le!==m.value.dateHash&&(C.value=m.value.dateHash<le==(r.lang.rtl!==!0)?"left":"right",D!==m.value.year&&(k.value=C.value),dt(()=>{A.value=D-D%Fo-(D<0?Fo:0),Object.assign(m.value,{year:D,month:H,day:1,dateHash:le})}))}function He(D,H,Q){const le=D!==null&&D.length===1&&t.multiple===!1?D[0]:D;h=le;const{reason:ne,details:Te}=Ae(H,Q);i("update:modelValue",le,ne,Te)}function tt(D){const H=q.value[0]!==void 0&&q.value[0].dateHash!==null?{...q.value[0]}:{...m.value};dt(()=>{H.year=m.value.year,H.month=m.value.month;const Q=t.calendar!=="persian"?new Date(H.year,H.month,0).getDate():Sh(H.year,H.month);H.day=Math.min(Math.max(1,H.day),Q);const le=Ze(H);h=le;const{details:ne}=Ae("",H);i("update:modelValue",le,D,ne)})}function Ae(D,H){return H.from!==void 0?{reason:`${D}-range`,details:{...ge(H.target),from:ge(H.from),to:ge(H.to)}}:{reason:`${D}-day`,details:ge(H)}}function Ze(D,H,Q){return D.from!==void 0?{from:V.value(D.from,H,Q),to:V.value(D.to,H,Q)}:V.value(D,H,Q)}function We(D){let H;if(t.multiple===!0)if(D.from!==void 0){const Q=Mr(D.from),le=Mr(D.to),ne=q.value.filter(de=>de.dateHash<Q||de.dateHash>le),Te=F.value.filter(({from:de,to:Be})=>Be.dateHash<Q||de.dateHash>le);H=ne.concat(Te).concat(D).map(de=>Ze(de))}else{const Q=R.value.slice();Q.push(Ze(D)),H=Q}else H=Ze(D);He(H,"add",D)}function ee(D){if(t.noUnset===!0)return;let H=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const Q=Ze(D);H=D.from!==void 0?t.modelValue.filter(le=>le.from===void 0||le.from!==Q.from&&le.to!==Q.to):t.modelValue.filter(le=>le!==Q),H.length===0&&(H=null)}He(H,"remove",D)}function ke(D,H,Q){const le=q.value.concat(F.value).map(ne=>Ze(ne,D,H)).filter(ne=>ne.from!==void 0?ne.from.dateHash!==null&&ne.to.dateHash!==null:ne.dateHash!==null);i("update:modelValue",(t.multiple===!0?le:le[0])||null,Q)}function xe(){if(t.minimal!==!0)return S("div",{class:"q-date__header "+l.value},[S("div",{class:"relative-position"},[S(mi,{name:"q-transition--fade"},()=>S("div",{key:"h-yr-"+ie.value,class:"q-date__header-subtitle q-date__header-link "+(y.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:a.value,...s("vY",{onClick(){y.value="Years"},onKeyup(D){D.keyCode===13&&(y.value="Years")}})},[ie.value]))]),S("div",{class:"q-date__header-title relative-position flex no-wrap"},[S("div",{class:"relative-position col"},[S(mi,{name:"q-transition--fade"},()=>S("div",{key:"h-sub"+$.value,class:"q-date__header-title-label q-date__header-link "+(y.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:a.value,...s("vC",{onClick(){y.value="Calendar"},onKeyup(D){D.keyCode===13&&(y.value="Calendar")}})},[$.value]))]),t.todayBtn===!0?S(xt,{class:"q-date__header-today self-start",icon:r.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:a.value,onClick:he}):null])])}function ye({label:D,type:H,key:Q,dir:le,goTo:ne,boundaries:Te,cls:de}){return[S("div",{class:"row items-center q-date__arrow"},[S(xt,{round:!0,dense:!0,size:"sm",flat:!0,icon:j.value[0],tabindex:a.value,disable:Te.prev===!1,...s("go-#"+H,{onClick(){ne(-1)}})})]),S("div",{class:"relative-position overflow-hidden flex flex-center"+de},[S(mi,{name:"q-transition--jump-"+le},()=>S("div",{key:Q},[S(xt,{flat:!0,dense:!0,noCaps:!0,label:D,tabindex:a.value,...s("view#"+H,{onClick:()=>{y.value=H}})})]))]),S("div",{class:"row items-center q-date__arrow"},[S(xt,{round:!0,dense:!0,size:"sm",flat:!0,icon:j.value[1],tabindex:a.value,disable:Te.next===!1,...s("go+#"+H,{onClick(){ne(1)}})})])]}se(()=>t.modelValue,D=>{if(h===D)h=0;else{const H=Ie(f.value,g.value);qe(H.year,H.month,H)}}),se(y,()=>{p.value!==null&&n.$el.contains(document.activeElement)===!0&&p.value.focus()}),se(()=>m.value.year+"|"+m.value.month,()=>{i("navigation",{year:m.value.year,month:m.value.month})}),se(_,D=>{ke(D,g.value,"mask"),f.value=D}),se(v,D=>{ke(f.value,D,"locale"),g.value=D});const we={Calendar:()=>[S("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[S("div",{class:"q-date__navigation row items-center no-wrap"},ye({label:g.value.months[m.value.month-1],type:"Months",key:m.value.month,dir:C.value,goTo:X,boundaries:ce.value.month,cls:" col"}).concat(ye({label:m.value.year,type:"Years",key:m.value.year,dir:k.value,goTo:re,boundaries:ce.value.year,cls:""}))),S("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},N.value.map(D=>S("div",{class:"q-date__calendar-item"},[S("div",D)]))),S("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[S(mi,{name:"q-transition--slide-"+C.value},()=>S("div",{key:Pe.value,class:"q-date__calendar-days fit"},Ge.value.map(D=>S("div",{class:D.classes},[D.in===!0?S(xt,{class:D.today===!0?"q-date__today":"",dense:!0,flat:D.flat,unelevated:D.unelevated,color:D.color,textColor:D.textColor,label:D.i,tabindex:a.value,...s("day#"+D.i,{onClick:()=>{(function(H){const Q={...m.value,day:H};if(t.range===!1)return void function(le,ne){const Te=fe.value[ne];(Te!==void 0&&Te.includes(le.day)===!0?ee:We)(le)}(Q,Pe.value);if(E.value===null){const le=Ge.value.find(Te=>Te.fill!==!0&&Te.i===H);if(t.noUnset!==!0&&le.range!==void 0)return void ee({target:Q,from:le.range.from,to:le.range.to});if(le.selected===!0)return void ee(Q);const ne=Mr(Q);E.value={init:Q,initHash:ne,final:Q,finalHash:ne},i("rangeStart",ge(Q))}else{const le=E.value.initHash,ne=Mr(Q),Te=le<=ne?{from:E.value.init,to:Q}:{from:Q,to:E.value.init};E.value=null,We(le===ne?Q:{target:Q,...Te}),i("rangeEnd",{from:ge(Te.from),to:ge(Te.to)})}})(D.i)},onMouseover:()=>{(function(H){if(E.value!==null){const Q={...m.value,day:H};Object.assign(E.value,{final:Q,finalHash:Mr(Q)})}})(D.i)}})},D.event!==!1?()=>S("div",{class:"q-date__event bg-"+D.event}):null):S("div",""+D.i)]))))])])],Months(){const D=m.value.year===b.value.year,H=le=>W.value!==null&&m.value.year===W.value.year&&W.value.month>le||ve.value!==null&&m.value.year===ve.value.year&&ve.value.month<le,Q=g.value.monthsShort.map((le,ne)=>{const Te=m.value.month===ne+1;return S("div",{class:"q-date__months-item flex flex-center"},[S(xt,{class:D===!0&&b.value.month===ne+1?"q-date__today":null,flat:Te!==!0,label:le,unelevated:Te,color:Te===!0?T.value:null,textColor:Te===!0?I.value:null,tabindex:a.value,disable:H(ne+1),...s("month#"+ne,{onClick:()=>{(function(de){qe(m.value.year,de),y.value="Calendar",M.value===!0&&tt("month")})(ne+1)}})})])});return t.yearsInMonthView===!0&&Q.unshift(S("div",{class:"row no-wrap full-width"},[ye({label:m.value.year,type:"Years",key:m.value.year,dir:k.value,goTo:re,boundaries:ce.value.year,cls:" col"})])),S("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},Q)},Years(){const D=A.value,H=D+Fo,Q=[],le=ne=>W.value!==null&&W.value.year>ne||ve.value!==null&&ve.value.year<ne;for(let ne=D;ne<=H;ne++){const Te=m.value.year===ne;Q.push(S("div",{class:"q-date__years-item flex flex-center"},[S(xt,{key:"yr"+ne,class:b.value.year===ne?"q-date__today":null,flat:!Te,label:ne,dense:!0,unelevated:Te,color:Te===!0?T.value:null,textColor:Te===!0?I.value:null,tabindex:a.value,disable:le(ne),...s("yr#"+ne,{onClick:()=>{qe(ne,m.value.month),y.value=t.defaultView==="Years"?"Months":"Calendar",M.value===!0&&tt("year")}})})]))}return S("div",{class:"q-date__view q-date__years flex flex-center"},[S("div",{class:"col-auto"},[S(xt,{round:!0,dense:!0,flat:!0,icon:j.value[0],tabindex:a.value,disable:le(D),...s("y-",{onClick:()=>{A.value-=Fo}})})]),S("div",{class:"q-date__years-content col self-stretch row items-center"},Q),S("div",{class:"col-auto"},[S(xt,{round:!0,dense:!0,flat:!0,icon:j.value[1],tabindex:a.value,disable:le(H),...s("y+",{onClick:()=>{A.value+=Fo}})})])])}};return Object.assign(n,{setToday:he,setView:function(D){ob(D)===!0&&(y.value=D)},offsetCalendar:function(D,H){["month","year"].includes(D)&&(D==="month"?X:re)(H===!0?-1:1)},setCalendarTo:Z,setEditingRange:function(D,H){if(t.range===!1||!D)return void(E.value=null);const Q=Object.assign({...m.value},D),le=H!==void 0?Object.assign({...m.value},H):Q;E.value={init:Q,initHash:Mr(Q),final:le,finalHash:Mr(le)},Z(Q.year,Q.month)}}),()=>{const D=[S("div",{class:"q-date__content col relative-position"},[S(mi,{name:"q-transition--fade"},we[y.value])])],H=Ne(e.default);return H!==void 0&&D.push(S("div",{class:"q-date__actions"},H)),t.name!==void 0&&t.disable!==!0&&d(D,"push"),S("div",{class:L.value,...oe.value},[xe(),S("div",{ref:p,class:"q-date__main col column",tabindex:-1},D)])}}});var _f,bf,Hl,sb,ab,lb,Hc=0,xf=!1,Oo=null;function YP(t){(function(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const i=function(s){if(s.path)return s.path;if(s.composedPath)return s.composedPath();const a=[];let l=s.target;for(;l;){if(a.push(l),l.tagName==="HTML")return a.push(document),a.push(window),a;l=l.parentElement}}(e),n=e.shiftKey&&!e.deltaX,r=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),o=n||r?e.deltaY:e.deltaX;for(let s=0;s<i.length;s++){const a=i[s];if(gP(a,r))return r?o<0&&a.scrollTop===0||o>0&&a.scrollTop+a.clientHeight===a.scrollHeight:o<0&&a.scrollLeft===0||o>0&&a.scrollLeft+a.clientWidth===a.scrollWidth}return!0})(t)&&et(t)}function ub(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Uc(t){xf!==!0&&(xf=!0,requestAnimationFrame(()=>{xf=!1;const{height:e}=t.target,{clientHeight:i,scrollTop:n}=document.scrollingElement;Hl!==void 0&&e===window.innerHeight||(Hl=i-e,document.scrollingElement.scrollTop=n),n>Hl&&(document.scrollingElement.scrollTop-=Math.ceil((n-Hl)/8))}))}function cb(t){const e=document.body,i=window.visualViewport!==void 0;if(t==="add"){const{overflowY:n,overflowX:r}=window.getComputedStyle(e);_f=Ud(window),bf=_o(window),sb=e.style.left,ab=e.style.top,lb=window.location.href,e.style.left=`-${_f}px`,e.style.top=`-${bf}px`,r!=="hidden"&&(r==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),n!=="hidden"&&(n==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,ct.is.ios===!0&&(i===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Uc,Dt.passiveCapture),window.visualViewport.addEventListener("scroll",Uc,Dt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",ub,Dt.passiveCapture))}ct.is.desktop===!0&&ct.is.mac===!0&&window[`${t}EventListener`]("wheel",YP,Dt.notPassive),t==="remove"&&(ct.is.ios===!0&&(i===!0?(window.visualViewport.removeEventListener("resize",Uc,Dt.passiveCapture),window.visualViewport.removeEventListener("scroll",Uc,Dt.passiveCapture)):window.removeEventListener("scroll",ub,Dt.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=sb,e.style.top=ab,window.location.href===lb&&window.scrollTo(_f,bf),Hl=void 0)}function $m(t){let e="add";if(t===!0){if(Hc++,Oo!==null)return clearTimeout(Oo),void(Oo=null);if(Hc>1)return}else{if(Hc===0||--Hc>0)return;if(e="remove",ct.is.ios===!0&&ct.is.nativeMobile===!0)return Oo!==null&&clearTimeout(Oo),void(Oo=setTimeout(()=>{cb(e),Oo=null},100))}cb(e)}function SC(){let t;return{preventBodyScroll(e){e===t||t===void 0&&e!==!0||(t=e,$m(e))}}}var Wc=0,KP={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},hb={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Yd=ue({name:"QDialog",inheritAttrs:!1,props:{...rl,...us,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:t=>["standard","top","bottom","left","right"].includes(t)}},emits:[...ol,"shake","click","escapeKey"],setup(t,{slots:e,emit:i,attrs:n}){const r=Me(),o=G(null),s=G(!1),a=G(!1);let l,u,c=null,h=null;const d=w(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:p}=SC(),{registerTimeout:f}=Or(),{registerTick:g,removeTick:_}=wa(),{transitionProps:v,transitionStyle:b}=Hd(t,()=>hb[t.position][0],()=>hb[t.position][1]),m=w(()=>b.value+(t.backdropFilter!==void 0?`;backdrop-filter:${t.backdropFilter};-webkit-backdrop-filter:${t.backdropFilter}`:"")),{showPortal:y,hidePortal:x,portalIsAccessible:C,renderPortal:k}=w0(r,o,function(){return S("div",{role:"dialog","aria-modal":T.value===!0?"true":"false",...n,class:M.value},[S(mi,{name:"q-transition--fade",appear:!0},()=>T.value===!0?S("div",{class:"q-dialog__backdrop fixed-full",style:m.value,"aria-hidden":"true",tabindex:-1,onClick:$}):null),S(mi,v.value,()=>s.value===!0?S("div",{ref:o,class:L.value,style:b.value,tabindex:-1,...I.value},Ne(e.default)):null)])},"dialog"),{hide:P}=sl({showing:s,hideOnRouteChange:d,handleShow:function(te){A(),h=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,V(t.maximized),y(),a.value=!0,t.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),g(R)):_(),f(()=>{if(r.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:ie,bottom:j}=document.activeElement.getBoundingClientRect(),{innerHeight:z}=window,N=window.visualViewport!==void 0?window.visualViewport.height:z;ie>0&&j>N/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-N,j>=z?1/0:Math.ceil(document.scrollingElement.scrollTop+j-N/2))),document.activeElement.scrollIntoView()}u=!0,o.value.click(),u=!1}y(!0),a.value=!1,i("show",te)},t.transitionDuration)},handleHide:function(te){_(),E(),B(!0),a.value=!0,x(),h!==null&&(((te&&te.type.indexOf("key")===0?h.closest('[tabindex]:not([tabindex^="-"])'):void 0)||h).focus(),h=null),f(()=>{x(!0),a.value=!1,i("hide",te)},t.transitionDuration)},processOnMount:!0}),{addToHistory:A,removeFromHistory:E}=wC(s),L=w(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${KP[t.position]}`+(a.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),T=w(()=>s.value===!0&&t.seamless!==!0),I=w(()=>t.autoClose===!0?{onClick:O}:{}),M=w(()=>["q-dialog fullscreen no-pointer-events q-dialog--"+(T.value===!0?"modal":"seamless"),n.class]);function R(te){al(()=>{let ie=o.value;if(ie!==null){if(te!==void 0){const j=ie.querySelector(te);if(j!==null)return void j.focus({preventScroll:!0})}ie.contains(document.activeElement)!==!0&&(ie=ie.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||ie.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||ie.querySelector("[autofocus], [data-autofocus]")||ie,ie.focus({preventScroll:!0}))}})}function q(te){te&&typeof te.focus=="function"?te.focus({preventScroll:!0}):R(),i("shake");const ie=o.value;ie!==null&&(ie.classList.remove("q-animate--scale"),ie.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,o.value!==null&&(ie.classList.remove("q-animate--scale"),R())},170))}function F(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&q():(i("escapeKey"),P()))}function B(te){c!==null&&(clearTimeout(c),c=null),te!==!0&&s.value!==!0||(V(!1),t.seamless!==!0&&(p(!1),Nm(J),ud(F))),te!==!0&&(h=null)}function V(te){te===!0?l!==!0&&(Wc<1&&document.body.classList.add("q-body--dialog"),Wc++,l=!0):l===!0&&(Wc<2&&document.body.classList.remove("q-body--dialog"),Wc--,l=!1)}function O(te){u!==!0&&(P(te),i("click",te))}function $(te){t.persistent!==!0&&t.noBackdropDismiss!==!0?P(te):t.noShake!==!0&&q()}function J(te){t.allowFocusOutside!==!0&&C.value===!0&&IS(o.value,te.target)!==!0&&R('[tabindex]:not([tabindex="-1"])')}return se(()=>t.maximized,te=>{s.value===!0&&V(te)}),se(T,te=>{p(te),te===!0?(WS(J),HS(F)):(Nm(J),ud(F))}),Object.assign(r.proxy,{focus:R,shake:q,__updateRefocusTarget(te){h=te||null}}),ht(B),k}});function CC(t,e){if(e&&t===e)return null;const i=t.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(i)===!0)return t;const n=(window.getComputedStyle?window.getComputedStyle(t):t.currentStyle).display;return n==="block"||n==="table"?t:CC(t.parentNode)}function wf(t,e,i){return!(!t||t===document.body)&&(i===!0&&t===e||(e===document?document.body:e).contains(t.parentNode))}function MC(t,e,i){if(i||((i=document.createRange()).selectNode(t),i.setStart(t,0)),e.count===0)i.setEnd(t,e.count);else if(e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(i.setEnd(t,e.count),e.count=0);else for(let n=0;e.count!==0&&n<t.childNodes.length;n++)i=MC(t.childNodes[n],e,i);return i}ue({name:"QDrawer",inheritAttrs:!1,props:{...rl,...mt,side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...ol,"onLayout","miniState"],setup(t,{slots:e,emit:i,attrs:n}){const r=Me(),{proxy:{$q:o}}=r,s=vt(t,o),{preventBodyScroll:a}=SC(),{registerTimeout:l,removeTimeout:u}=Or(),c=Xi(ws,Mt);if(c===Mt)return Mt;let h,d,p=null;const f=G(t.behavior==="mobile"||t.behavior!=="desktop"&&c.totalWidth.value<=t.breakpoint),g=w(()=>t.mini===!0&&f.value!==!0),_=w(()=>g.value===!0?t.miniWidth:t.width),v=G(t.showIfAbove===!0&&f.value===!1||t.modelValue===!0),b=w(()=>t.persistent!==!0&&(f.value===!0||O.value===!0));function m(oe,he){if(k(),oe!==!1&&c.animate(),fe(0),f.value===!0){const Z=c.instances[q.value];Z!==void 0&&Z.belowBreakpoint===!0&&Z.hide(!1),pe(1),c.isContainer.value!==!0&&a(!0)}else pe(0),oe!==!1&&Le(!1);l(()=>{oe!==!1&&Le(!0),he!==!0&&i("show",oe)},150)}function y(oe,he){P(),oe!==!1&&c.animate(),pe(0),fe(L.value*_.value),Se(),he!==!0?l(()=>{i("hide",oe)},150):u()}const{show:x,hide:C}=sl({showing:v,hideOnRouteChange:b,handleShow:m,handleHide:y}),{addToHistory:k,removeFromHistory:P}=wC(v),A={belowBreakpoint:f,hide:C},E=w(()=>t.side==="right"),L=w(()=>(o.lang.rtl===!0?-1:1)*(E.value===!0?1:-1)),T=G(0),I=G(!1),M=G(!1),R=G(_.value*L.value),q=w(()=>E.value===!0?"left":"right"),F=w(()=>v.value===!0&&f.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:_.value:0),B=w(()=>t.overlay===!0||t.miniToOverlay===!0||c.view.value.indexOf(E.value?"R":"L")!==-1||o.platform.is.ios===!0&&c.isContainer.value===!0),V=w(()=>t.overlay===!1&&v.value===!0&&f.value===!1),O=w(()=>t.overlay===!0&&v.value===!0&&f.value===!1),$=w(()=>"fullscreen q-drawer__backdrop"+(v.value===!1&&I.value===!1?" hidden":"")),J=w(()=>({backgroundColor:`rgba(0,0,0,${.4*T.value})`})),te=w(()=>E.value===!0?c.rows.value.top[2]==="r":c.rows.value.top[0]==="l"),ie=w(()=>E.value===!0?c.rows.value.bottom[2]==="r":c.rows.value.bottom[0]==="l"),j=w(()=>{const oe={};return c.header.space===!0&&te.value===!1&&(B.value===!0?oe.top=`${c.header.offset}px`:c.header.space===!0&&(oe.top=`${c.header.size}px`)),c.footer.space===!0&&ie.value===!1&&(B.value===!0?oe.bottom=`${c.footer.offset}px`:c.footer.space===!0&&(oe.bottom=`${c.footer.size}px`)),oe}),z=w(()=>{const oe={width:`${_.value}px`,transform:`translateX(${R.value}px)`};return f.value===!0?oe:Object.assign(oe,j.value)}),N=w(()=>"q-drawer__content fit "+(c.isContainer.value!==!0?"scroll":"overflow-auto")),K=w(()=>`q-drawer q-drawer--${t.side}`+(M.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(s.value===!0?" q-drawer--dark q-dark":"")+(I.value===!0?" no-transition":v.value===!0?"":" q-layout--prevent-focus")+(f.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(g.value===!0?"mini":"standard")+(B.value===!0||V.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(te.value===!0?" q-drawer--top-padding":""))),U=w(()=>{const oe=o.lang.rtl===!0?t.side:q.value;return[[bn,Pe,void 0,{[oe]:!0,mouse:!0}]]}),W=w(()=>{const oe=o.lang.rtl===!0?q.value:t.side;return[[bn,me,void 0,{[oe]:!0,mouse:!0}]]}),ve=w(()=>{const oe=o.lang.rtl===!0?q.value:t.side;return[[bn,me,void 0,{[oe]:!0,mouse:!0,mouseAllDir:!0}]]});function ce(){var oe,he;oe=f,he=t.behavior==="mobile"||t.behavior!=="desktop"&&c.totalWidth.value<=t.breakpoint,oe.value!==he&&(oe.value=he)}function fe(oe){oe===void 0?dt(()=>{oe=v.value===!0?0:_.value,fe(L.value*oe)}):(c.isContainer.value!==!0||E.value!==!0||f.value!==!0&&Math.abs(oe)!==_.value||(oe+=L.value*c.scrollbarWidth.value),R.value=oe)}function pe(oe){T.value=oe}function Le(oe){const he=oe===!0?"remove":c.isContainer.value!==!0?"add":"";he!==""&&document.body.classList[he]("q-body--drawer-toggle")}function Pe(oe){if(v.value!==!1)return;const he=_.value,Z=Ft(oe.distance.x,0,he);if(oe.isFinal===!0)return Z>=Math.min(75,he)?x():(c.animate(),pe(0),fe(L.value*he)),void(I.value=!1);fe((o.lang.rtl===!0?E.value!==!0:E.value)?Math.max(he-Z,0):Math.min(0,Z-he)),pe(Ft(Z/he,0,1)),oe.isFirst===!0&&(I.value=!0)}function me(oe){if(v.value!==!0)return;const he=_.value,Z=oe.direction===t.side,ae=(o.lang.rtl===!0?Z!==!0:Z)?Ft(oe.distance.x,0,he):0;if(oe.isFinal===!0)return Math.abs(ae)<Math.min(75,he)?(c.animate(),pe(1),fe(0)):C(),void(I.value=!1);fe(L.value*ae),pe(Ft(1-ae/he,0,1)),oe.isFirst===!0&&(I.value=!0)}function Se(){a(!1),Le(!0)}function Re(oe,he){c.update(t.side,oe,he)}function Ge(oe,he){Re("size",oe===!0?t.miniWidth:he)}return se(f,oe=>{oe===!0?(h=v.value,v.value===!0&&C(!1)):t.overlay===!1&&t.behavior!=="mobile"&&h!==!1&&(v.value===!0?(fe(0),pe(0),Se()):x(!1))}),se(()=>t.side,(oe,he)=>{c.instances[he]===A&&(c.instances[he]=void 0,c[he].space=!1,c[he].offset=0),c.instances[oe]=A,c[oe].size=_.value,c[oe].space=V.value,c[oe].offset=F.value}),se(c.totalWidth,()=>{c.isContainer.value!==!0&&document.qScrollPrevented===!0||ce()}),se(()=>t.behavior+t.breakpoint,ce),se(c.isContainer,oe=>{v.value===!0&&a(oe!==!0),oe===!0&&ce()}),se(c.scrollbarWidth,()=>{fe(v.value===!0?0:void 0)}),se(F,oe=>{Re("offset",oe)}),se(V,oe=>{i("onLayout",oe),Re("space",oe)}),se(E,()=>{fe()}),se(_,oe=>{fe(),Ge(t.miniToOverlay,oe)}),se(()=>t.miniToOverlay,oe=>{Ge(oe,_.value)}),se(()=>o.lang.rtl,()=>{fe()}),se(()=>t.mini,()=>{t.noMiniAnimation||t.modelValue===!0&&(function(){p!==null&&clearTimeout(p),r.proxy&&r.proxy.$el&&r.proxy.$el.classList.add("q-drawer--mini-animate"),M.value=!0,p=setTimeout(()=>{p=null,M.value=!1,r&&r.proxy&&r.proxy.$el&&r.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}(),c.animate())}),se(g,oe=>{i("miniState",oe)}),c.instances[t.side]=A,Ge(t.miniToOverlay,_.value),Re("space",V.value),Re("offset",F.value),t.showIfAbove===!0&&t.modelValue!==!0&&v.value===!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),Nt(()=>{i("onLayout",V.value),i("miniState",g.value),h=t.showIfAbove===!0;const oe=()=>{(v.value===!0?m:y)(!1,!0)};c.totalWidth.value===0?d=se(c.totalWidth,()=>{d(),d=void 0,v.value===!1&&t.showIfAbove===!0&&f.value===!1?x(!1):oe()}):dt(oe)}),ht(()=>{d!==void 0&&d(),p!==null&&(clearTimeout(p),p=null),v.value===!0&&Se(),c.instances[t.side]===A&&(c.instances[t.side]=void 0,Re("size",0),Re("offset",0),Re("space",!1))}),()=>{const oe=[];f.value===!0&&(t.noSwipeOpen===!1&&oe.push(Ni(S("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),U.value)),oe.push(Cn("div",{ref:"backdrop",class:$.value,style:J.value,"aria-hidden":"true",onClick:C},void 0,"backdrop",t.noSwipeBackdrop!==!0&&v.value===!0,()=>ve.value)));const he=g.value===!0&&e.mini!==void 0,Z=[S("div",{...n,key:""+he,class:[N.value,n.class]},he===!0?e.mini():Ne(e.default))];return t.elevated===!0&&v.value===!0&&Z.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),oe.push(Cn("aside",{ref:"content",class:K.value,style:z.value},Z,"contentclose",t.noSwipeClose!==!0&&f.value===!0,()=>W.value)),S("div",{class:"q-drawer-container"},oe)}}});var XP=/^https?:\/\//,ZP=class{constructor(t,e){this.el=t,this.eVm=e,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(wf(t.anchorNode,this.el,!0)&&wf(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null&&this.selection.toString().length!==0}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const e=t.startContainer;return e.nodeType===document.ELEMENT_NODE?e:e.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?CC(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const e=document.createRange(),i=document.getSelection();t!==null?(e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),i.removeAllRanges(),i.addRange(e)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let t,e=-1;const i=document.getSelection(),n=this.el.parentNode;if(i.focusNode&&wf(i.focusNode,n))for(t=i.focusNode,e=i.focusOffset;t&&t!==n;)t!==this.el&&t.previousSibling?(t=t.previousSibling,e+=t.textContent.length):t=t.parentNode;this.savedPos=e}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const e=window.getSelection(),i=MC(this.el,{count:this.savedPos});i&&(i.collapse(!1),e.removeAllRanges(),e.addRange(i))}}hasParent(t,e){const i=e?this.parent:this.blockParent;return i!==null&&i.nodeName.toLowerCase()===t.toLowerCase()}hasParents(t,e,i=this.parent){return i!==null&&(t.includes(i.nodeName.toLowerCase())===!0||e===!0&&this.hasParents(t,e,i.parentNode))}is(t,e){if(this.selection===null)return!1;switch(t){case"formatBlock":return e==="DIV"&&this.parent===this.el||this.hasParent(e,e==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===e;case"fontName":const i=document.queryCommandValue(t);return i===`"${e}"`||i===e;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const n=document.queryCommandState(t);return e!==void 0?n===e:n}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){return t==="outdent"?this.hasParents(["blockquote","li"],!0):t==="indent"?this.hasParents(["li"],!0):t==="link"?this.selection!==null||this.is("link"):void 0}apply(t,e,i=hi){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(e)&&this.is(t,e)&&(t="outdent",e=null),e==="PRE"&&this.is(t,"PRE")&&(e="P");else{if(t==="print"){i();const n=window.open();return n.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),n.print(),void n.close()}if(t==="link"){const n=this.getParentAttribute("href");if(n===null){const r=this.selectWord(this.selection),o=r?r.toString():"";if(!(o.length||this.range&&this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=XP.test(o)?o:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(r.getRangeAt(0))}else this.eVm.editLinkUrl.value=n,this.range.selectNodeContents(this.parent),this.save();return}if(t==="fullscreen")return this.eVm.toggleFullscreen(),void i();if(t==="viewsource")return this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),void i()}document.execCommand(t,!1,e),i()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const i=e.collapsed?["backward","forward"]:["forward","backward"];e.detach();const n=t.focusNode,r=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",i[0],"character"),t.modify("move",i[1],"word"),t.extend(n,r),t.modify("extend",i[1],"character"),t.modify("extend",i[0],"word"),t}},QP=ue({name:"QTooltip",inheritAttrs:!1,props:{...OS,...rl,...us,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...us.transitionShow,default:"jump-down"},transitionHide:{...us.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:pd},self:{type:String,default:"top middle",validator:pd},offset:{type:Array,default:()=>[14,14],validator:KS},scrollTarget:Ps,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ol],setup(t,{slots:e,emit:i,attrs:n}){let r,o;const s=Me(),{proxy:{$q:a}}=s,l=G(null),u=G(!1),c=w(()=>fd(t.anchor,a.lang.rtl)),h=w(()=>fd(t.self,a.lang.rtl)),d=w(()=>t.persistent!==!0),{registerTick:p,removeTick:f}=wa(),{registerTimeout:g}=Or(),{transitionProps:_,transitionStyle:v}=Hd(t),{localScrollTarget:b,changeScrollEvent:m,unconfigureScrollTarget:y}=DS(t,R),{anchorEl:x,canShow:C,anchorEvents:k}=b0({showing:u,configureAnchorEl:function(){if(t.noParentEvent===!0||x.value===null)return;const F=a.platform.is.mobile===!0?[[x.value,"touchstart","delayShow","passive"]]:[[x.value,"mouseenter","delayShow","passive"],[x.value,"mouseleave","delayHide","passive"]];ti(k,"anchor",F)}}),{show:P,hide:A}=sl({showing:u,canShow:C,handleShow:function(F){E(),p(()=>{o=new MutationObserver(()=>M()),o.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),M(),R()}),r===void 0&&(r=se(()=>a.screen.width+"|"+a.screen.height+"|"+t.self+"|"+t.anchor+"|"+a.lang.rtl,M)),g(()=>{E(!0),i("show",F)},t.transitionDuration)},handleHide:function(F){f(),L(),I(),g(()=>{L(!0),i("hide",F)},t.transitionDuration)},hideOnRouteChange:d,processOnMount:!0});Object.assign(k,{delayShow:function(F){if(a.platform.is.mobile===!0){$n(),document.body.classList.add("non-selectable");const B=x.value,V=["touchmove","touchcancel","touchend","click"].map(O=>[B,O,"delayHide","passiveCapture"]);ti(k,"tooltipTemp",V)}g(()=>{P(F)},t.delay)},delayHide:function(F){a.platform.is.mobile===!0&&(Li(k,"tooltipTemp"),$n(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),g(()=>{A(F)},t.hideDelay)}});const{showPortal:E,hidePortal:L,renderPortal:T}=w0(s,l,function(){return S(mi,_.value,q)},"tooltip");if(a.platform.is.mobile===!0){const F={anchorEl:x,innerRef:l,onClickOutside:V=>(A(V),V.target.classList.contains("q-dialog__backdrop")&&et(V),!0)},B=w(()=>t.modelValue===null&&t.persistent!==!0&&u.value===!0);se(B,V=>{(V===!0?YS:dd)(F)}),ht(()=>{dd(F)})}function I(){o!==void 0&&(o.disconnect(),o=void 0),r!==void 0&&(r(),r=void 0),y(),Li(k,"tooltipTemp")}function M(){S0({targetEl:l.value,offset:t.offset,anchorEl:x.value,anchorOrigin:c.value,selfOrigin:h.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function R(){if(x.value!==null||t.scrollTarget!==void 0){b.value=mr(x.value,t.scrollTarget);const F=t.noParentEvent===!0?M:A;m(b.value,F)}}function q(){return u.value===!0?S("div",{...n,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,v.value],role:"tooltip"},Ne(e.default)):null}return ht(I),Object.assign(s.proxy,{updatePosition:M}),T}}),ul=ue({name:"QItem",props:{...mt,...ec,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=vt(t,n),{hasLink:o,linkAttrs:s,linkClass:a,linkTag:l,navigateOnClick:u}=$d(),c=G(null),h=G(null),d=w(()=>t.clickable===!0||o.value===!0||t.tag==="label"),p=w(()=>t.disable!==!0&&d.value===!0),f=w(()=>"q-item q-item-type row no-wrap"+(t.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(o.value===!0&&t.active===null?a.value:t.active===!0?" q-item--active"+(t.activeClass!==void 0?` ${t.activeClass}`:""):"")+(t.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(t.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(t.focused===!0?" q-manual-focusable--focused":""):"")),g=w(()=>t.insetLevel===void 0?null:{["padding"+(n.lang.rtl===!0?"Right":"Left")]:16+56*t.insetLevel+"px"});function _(b){p.value===!0&&(h.value!==null&&(b.qKeyEvent!==!0&&document.activeElement===c.value?h.value.focus():document.activeElement===h.value&&c.value.focus()),u(b))}function v(b){if(p.value===!0&&Sn(b,[13,32])===!0){et(b),b.qKeyEvent=!0;const m=new MouseEvent("click",b);m.qKeyEvent=!0,c.value.dispatchEvent(m)}i("keyup",b)}return()=>{const b={ref:c,class:f.value,style:g.value,role:"listitem",onClick:_,onKeyup:v};return p.value===!0?(b.tabindex=t.tabindex||"0",Object.assign(b,s.value)):d.value===!0&&(b["aria-disabled"]="true"),S(l.value,b,function(){const m=Ju(e.default,[]);return p.value===!0&&m.unshift(S("div",{class:"q-focus-helper",tabindex:-1,ref:h})),m}())}}}),ur=ue({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(t,{slots:e}){const i=w(()=>"q-item__section column q-item__section--"+(t.avatar===!0||t.side===!0||t.thumbnail===!0?"side":"main")+(t.top===!0?" q-item__section--top justify-start":" justify-center")+(t.avatar===!0?" q-item__section--avatar":"")+(t.thumbnail===!0?" q-item__section--thumbnail":"")+(t.noWrap===!0?" q-item__section--nowrap":""));return()=>S("div",{class:i.value},Ne(e.default))}});function kC(t,e,i){e.handler?e.handler(t,i,i.caret):i.runCmd(e.cmd,e.param)}function Gm(t){return S("div",{class:"q-editor__toolbar-group"},t)}function db(t,e,i,n=!1){const r=n||e.type==="toggle"&&(e.toggled?e.toggled(t):e.cmd&&t.caret.is(e.cmd,e.param)),o=[];if(e.tip&&t.$q.platform.is.desktop){const s=e.key?S("div",[S("small",`(CTRL + ${String.fromCharCode(e.key)})`)]):null;o.push(S(QP,{delay:1e3},()=>[S("div",{innerHTML:e.tip}),s]))}return S(xt,{...t.buttonProps.value,icon:e.icon!==null?e.icon:void 0,color:r?e.toggleColor||t.props.toolbarToggleColor:e.color||t.props.toolbarColor,textColor:r&&!t.props.toolbarPush?null:e.textColor||t.props.toolbarTextColor,label:e.label,disable:!!e.disable&&(typeof e.disable!="function"||e.disable(t)),size:"sm",onClick(s){i&&i(),kC(s,e,t)}},()=>o)}function JP(t){if(t.caret)return t.buttons.value.filter(e=>!t.isViewingSource.value||e.find(i=>i.cmd==="viewsource")).map(e=>Gm(e.map(i=>(!t.isViewingSource.value||i.cmd==="viewsource")&&(i.type==="slot"?Ne(t.slots[i.slot]):i.type==="dropdown"?function(n,r){const o=r.list==="only-icons";let s,a,l=r.label,u=r.icon!==null?r.icon:void 0;function c(){d.component.proxy.hide()}if(o)a=r.options.map(p=>{const f=p.type===void 0&&n.caret.is(p.cmd,p.param);return f&&(l=p.tip,u=p.icon!==null?p.icon:void 0),db(n,p,c,f)}),s=n.toolbarBackgroundClass.value,a=[Gm(a)];else{const p=n.props.toolbarToggleColor!==void 0?`text-${n.props.toolbarToggleColor}`:null,f=n.props.toolbarTextColor!==void 0?`text-${n.props.toolbarTextColor}`:null,g=r.list==="no-icons";a=r.options.map(_=>{const v=!!_.disable&&_.disable(n),b=_.type===void 0&&n.caret.is(_.cmd,_.param);b&&(l=_.tip,u=_.icon!==null?_.icon:void 0);const m=_.htmlTip;return S(ul,{active:b,activeClass:p,clickable:!0,disable:v,dense:!0,onClick(y){c(),n.contentRef.value!==null&&n.contentRef.value.focus(),n.caret.restore(),kC(y,_,n)}},()=>[g===!0?null:S(ur,{class:b?p:f,side:!0},()=>S(_t,{name:_.icon!==null?_.icon:void 0})),S(ur,m?()=>S("div",{class:"text-no-wrap",innerHTML:_.htmlTip}):_.tip?()=>S("div",{class:"text-no-wrap"},_.tip):void 0)])}),s=[n.toolbarBackgroundClass.value,f]}const h=r.highlight&&l!==r.label,d=S(xP,{...n.buttonProps.value,noCaps:!0,noWrap:!0,color:h?n.props.toolbarToggleColor:n.props.toolbarColor,textColor:h&&!n.props.toolbarPush?null:n.props.toolbarTextColor,label:r.fixedLabel?r.label:l,icon:r.fixedIcon?r.icon!==null?r.icon:void 0:u,contentClass:s,onShow:p=>n.emit("dropdownShow",p),onHide:p=>n.emit("dropdownHide",p),onBeforeShow:p=>n.emit("dropdownBeforeShow",p),onBeforeHide:p=>n.emit("dropdownBeforeHide",p)},()=>a);return d}(t,i):db(t,i)))))}var pb=/^on[A-Z]/;function TC(){const{attrs:t,vnode:e}=Me(),i={listeners:G({}),attributes:G({})};function n(){const r={},o={};for(const s in t)s!=="class"&&s!=="style"&&pb.test(s)===!1&&(r[s]=t[s]);for(const s in e.props)pb.test(s)===!0&&(o[s]=e.props[s]);i.attributes.value=r,i.listeners.value=o}return Nu(n),n(),i}var eI=Object.prototype.toString,Sf=Object.prototype.hasOwnProperty,tI=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(t=>"[object "+t+"]"));function fb(t){if(t!==Object(t)||tI.has(eI.call(t))===!0||t.constructor&&Sf.call(t,"constructor")===!1&&Sf.call(t.constructor.prototype,"isPrototypeOf")===!1)return!1;let e;for(e in t);return e===void 0||Sf.call(t,e)}function EC(){let t,e,i,n,r,o,s=arguments[0]||{},a=1,l=!1;const u=arguments.length;for(typeof s=="boolean"&&(l=s,s=arguments[1]||{},a=2),Object(s)!==s&&typeof s!="function"&&(s={}),u===a&&(s=this,a--);a<u;a++)if((t=arguments[a])!==null)for(e in t)i=s[e],n=t[e],s!==n&&(l===!0&&n&&((r=Array.isArray(n))||fb(n)===!0)?(o=r===!0?Array.isArray(i)===!0?i:[]:fb(i)===!0?i:{},s[e]=EC(l,o,n)):n!==void 0&&(s[e]=n));return s}ue({name:"QEditor",props:{...mt,...P0,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:t=>t.length===0||t.every(e=>e.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:t=>["div","p"].includes(t),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...I0,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=vt(t,r),{inFullscreen:s,toggleFullscreen:a}=R0(),l=TC(),u=G(null),c=G(null),h=G(null),d=G(!1),p=w(()=>!t.readonly&&!t.disable);let f,g,_=t.modelValue;document.execCommand("defaultParagraphSeparator",!1,t.paragraphTag),f=window.getComputedStyle(document.body).fontFamily;const v=w(()=>t.toolbarBg?` bg-${t.toolbarBg}`:""),b=w(()=>({type:"a",flat:t.toolbarOutline!==!0&&t.toolbarPush!==!0,noWrap:!0,outline:t.toolbarOutline,push:t.toolbarPush,rounded:t.toolbarRounded,dense:!0,color:t.toolbarColor,disable:!p.value,size:"sm"})),m=w(()=>{const j=r.lang.editor,z=r.iconSet.editor;return{bold:{cmd:"bold",icon:z.bold,tip:j.bold,key:66},italic:{cmd:"italic",icon:z.italic,tip:j.italic,key:73},strike:{cmd:"strikeThrough",icon:z.strikethrough,tip:j.strikethrough,key:83},underline:{cmd:"underline",icon:z.underline,tip:j.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:z.unorderedList,tip:j.unorderedList},ordered:{cmd:"insertOrderedList",icon:z.orderedList,tip:j.orderedList},subscript:{cmd:"subscript",icon:z.subscript,tip:j.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:z.superscript,tip:j.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:N=>N.caret&&!N.caret.can("link"),icon:z.hyperlink,tip:j.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:z.toggleFullscreen,tip:j.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:z.viewSource,tip:j.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:z.quote,tip:j.quote,key:81},left:{cmd:"justifyLeft",icon:z.left,tip:j.left},center:{cmd:"justifyCenter",icon:z.center,tip:j.center},right:{cmd:"justifyRight",icon:z.right,tip:j.right},justify:{cmd:"justifyFull",icon:z.justify,tip:j.justify},print:{type:"no-state",cmd:"print",icon:z.print,tip:j.print,key:80},outdent:{type:"no-state",disable:N=>N.caret&&!N.caret.can("outdent"),cmd:"outdent",icon:z.outdent,tip:j.outdent},indent:{type:"no-state",disable:N=>N.caret&&!N.caret.can("indent"),cmd:"indent",icon:z.indent,tip:j.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:z.removeFormat,tip:j.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:z.hr,tip:j.hr},undo:{type:"no-state",cmd:"undo",icon:z.undo,tip:j.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:z.redo,tip:j.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:z.heading1||z.heading,tip:j.heading1,htmlTip:`<h1 class="q-ma-none">${j.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:z.heading2||z.heading,tip:j.heading2,htmlTip:`<h2 class="q-ma-none">${j.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:z.heading3||z.heading,tip:j.heading3,htmlTip:`<h3 class="q-ma-none">${j.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:z.heading4||z.heading,tip:j.heading4,htmlTip:`<h4 class="q-ma-none">${j.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:z.heading5||z.heading,tip:j.heading5,htmlTip:`<h5 class="q-ma-none">${j.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:z.heading6||z.heading,tip:j.heading6,htmlTip:`<h6 class="q-ma-none">${j.heading6}</h6>`},p:{cmd:"formatBlock",param:t.paragraphTag,icon:z.heading,tip:j.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:z.code,htmlTip:`<code>${j.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:z.size1||z.size,tip:j.size1,htmlTip:`<font size="1">${j.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:z.size2||z.size,tip:j.size2,htmlTip:`<font size="2">${j.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:z.size3||z.size,tip:j.size3,htmlTip:`<font size="3">${j.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:z.size4||z.size,tip:j.size4,htmlTip:`<font size="4">${j.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:z.size5||z.size,tip:j.size5,htmlTip:`<font size="5">${j.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:z.size6||z.size,tip:j.size6,htmlTip:`<font size="6">${j.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:z.size7||z.size,tip:j.size7,htmlTip:`<font size="7">${j.size7}</font>`}}}),y=w(()=>{const j=t.definitions||{},z=t.definitions||t.fonts?EC(!0,{},m.value,j,function(N,K,U,W={}){const ve=Object.keys(W);if(ve.length===0)return{};const ce={default_font:{cmd:"fontName",param:N,icon:U,tip:K}};return ve.forEach(fe=>{const pe=W[fe];ce[fe]={cmd:"fontName",param:pe,icon:U,tip:pe,htmlTip:`<font face="${pe}">${pe}</font>`}}),ce}(f,r.lang.editor.defaultFont,r.iconSet.editor.font,t.fonts)):m.value;return t.toolbar.map(N=>N.map(K=>{if(K.options)return{type:"dropdown",icon:K.icon,label:K.label,size:"sm",dense:!0,fixedLabel:K.fixedLabel,fixedIcon:K.fixedIcon,highlight:K.highlight,list:K.list,options:K.options.map(W=>z[W])};const U=z[K];return U?U.type==="no-state"||j[K]&&(U.cmd===void 0||m.value[U.cmd]&&m.value[U.cmd].type==="no-state")?U:Object.assign({type:"toggle"},U):{type:"slot",slot:K}}))}),x={$q:r,props:t,slots:e,emit:i,inFullscreen:s,toggleFullscreen:a,runCmd:J,isViewingSource:d,editLinkUrl:h,toolbarBackgroundClass:v,buttonProps:b,contentRef:c,buttons:y,setContent:$};se(()=>t.modelValue,j=>{_!==j&&(_=j,$(j,!0))}),se(h,j=>{i("link"+(j?"Show":"Hide"))});const C=w(()=>t.toolbar&&t.toolbar.length!==0),k=w(()=>{const j={},z=N=>{N.key&&(j[N.key]={cmd:N.cmd,param:N.param})};return y.value.forEach(N=>{N.forEach(K=>{K.options?K.options.forEach(z):z(K)})}),j}),P=w(()=>s.value?t.contentStyle:[{minHeight:t.minHeight,height:t.height,maxHeight:t.maxHeight},t.contentStyle]),A=w(()=>"q-editor q-editor--"+(d.value===!0?"source":"default")+(t.disable===!0?" disabled":"")+(s.value===!0?" fullscreen column":"")+(t.square===!0?" q-editor--square no-border-radius":"")+(t.flat===!0?" q-editor--flat":"")+(t.dense===!0?" q-editor--dense":"")+(o.value===!0?" q-editor--dark q-dark":"")),E=w(()=>[t.contentClass,"q-editor__content",{col:s.value,"overflow-auto":s.value||t.maxHeight}]),L=w(()=>t.disable===!0?{"aria-disabled":"true"}:{});function T(){if(c.value!==null){const j="inner"+(d.value===!0?"Text":"HTML"),z=c.value[j];z!==t.modelValue&&(_=z,i("update:modelValue",z))}}function I(j){if(i("keydown",j),j.ctrlKey!==!0||xs(j)===!0)return void te();const z=j.keyCode,N=k.value[z];if(N!==void 0){const{cmd:K,param:U}=N;et(j),J(K,U,!1)}}function M(j){te(),i("click",j)}function R(j){if(c.value!==null){const{scrollTop:z,scrollHeight:N}=c.value;g=N-z}x.caret.save(),i("blur",j)}function q(j){dt(()=>{c.value!==null&&g!==void 0&&(c.value.scrollTop=c.value.scrollHeight-g)}),i("focus",j)}function F(j){const z=u.value;if(z!==null&&z.contains(j.target)===!0&&(j.relatedTarget===null||z.contains(j.relatedTarget)!==!0)){const N="inner"+(d.value===!0?"Text":"HTML");x.caret.restorePosition(c.value[N].length),te()}}function B(j){const z=u.value;z===null||z.contains(j.target)!==!0||j.relatedTarget!==null&&z.contains(j.relatedTarget)===!0||(x.caret.savePosition(),te())}function V(){g=void 0}function O(j){x.caret.save()}function $(j,z){if(c.value!==null){z===!0&&x.caret.savePosition();const N="inner"+(d.value===!0?"Text":"HTML");c.value[N]=j,z===!0&&(x.caret.restorePosition(c.value[N].length),te())}}function J(j,z,N=!0){ie(),x.caret.restore(),x.caret.apply(j,z,()=>{ie(),x.caret.save(),N&&te()})}function te(){setTimeout(()=>{h.value=null,n.$forceUpdate()},1)}function ie(){al(()=>{c.value!==null&&c.value.focus({preventScroll:!0})})}return Nt(()=>{x.caret=n.caret=new ZP(c.value,x),$(t.modelValue),te(),document.addEventListener("selectionchange",O)}),ht(()=>{document.removeEventListener("selectionchange",O)}),Object.assign(n,{runCmd:J,refreshToolbar:te,focus:ie,getContentEl:function(){return c.value}}),()=>{let j;if(C.value){const z=[S("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+v.value},JP(x))];h.value!==null&&z.push(S("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+v.value},function(N){if(N.caret){const K=N.props.toolbarColor||N.props.toolbarTextColor;let U=N.editLinkUrl.value;const W=()=>{N.caret.restore(),U!==N.editLinkUrl.value&&document.execCommand("createLink",!1,U===""?" ":U),N.editLinkUrl.value=null};return[S("div",{class:`q-mx-xs text-${K}`},`${N.$q.lang.editor.url}: `),S("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:U,onInput:ve=>{Xt(ve),U=ve.target.value},onKeydown:ve=>{if(xs(ve)!==!0)switch(ve.keyCode){case 13:return yi(ve),W();case 27:yi(ve),N.caret.restore(),N.editLinkUrl.value&&N.editLinkUrl.value!=="https://"||document.execCommand("unlink"),N.editLinkUrl.value=null}}}),Gm([S(xt,{key:"qedt_btm_rem",tabindex:-1,...N.buttonProps.value,label:N.$q.lang.label.remove,noCaps:!0,onClick:()=>{N.caret.restore(),document.execCommand("unlink"),N.editLinkUrl.value=null}}),S(xt,{key:"qedt_btm_upd",...N.buttonProps.value,label:N.$q.lang.label.update,noCaps:!0,onClick:W})])]}}(x))),j=S("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},z)}return S("div",{ref:u,class:A.value,style:{height:s.value===!0?"100%":null},...L.value,onFocusin:F,onFocusout:B},[j,S("div",{ref:c,style:P.value,class:E.value,contenteditable:p.value,placeholder:t.placeholder,...l.listeners.value,onInput:T,onKeydown:I,onClick:M,onBlur:R,onFocus:q,onMousedown:V,onTouchstartPassive:V})])}}});var Hm=ue({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(t,{slots:e}){const i=w(()=>parseInt(t.lines,10)),n=w(()=>"q-item__label"+(t.overline===!0?" q-item__label--overline text-overline":"")+(t.caption===!0?" q-item__label--caption text-caption":"")+(t.header===!0?" q-item__label--header":"")+(i.value===1?" ellipsis":"")),r=w(()=>t.lines!==void 0&&i.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":i.value}:null);return()=>S("div",{style:r.value,class:n.value},Ne(e.default))}}),F0=ue({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:e,emit:i}){let n,r,o,s,a=!1,l=null,u=null;function c(){n&&n(),n=null,a=!1,l!==null&&(clearTimeout(l),l=null),u!==null&&(clearTimeout(u),u=null),r!==void 0&&r.removeEventListener("transitionend",o),o=null}function h(g,_,v){_!==void 0&&(g.style.height=`${_}px`),g.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,n=v}function d(g,_){g.style.overflowY=null,g.style.height=null,g.style.transition=null,c(),_!==s&&i(_)}function p(g,_){let v=0;r=g,a===!0?(c(),v=g.offsetHeight===g.scrollHeight?0:void 0):(s="hide",g.style.overflowY="hidden"),h(g,v,_),l=setTimeout(()=>{l=null,g.style.height=`${g.scrollHeight}px`,o=b=>{u=null,Object(b)===b&&b.target!==g||d(g,"show")},g.addEventListener("transitionend",o),u=setTimeout(o,1.1*t.duration)},100)}function f(g,_){let v;r=g,a===!0?c():(s="show",g.style.overflowY="hidden",v=g.scrollHeight),h(g,v,_),l=setTimeout(()=>{l=null,g.style.height=0,o=b=>{u=null,Object(b)===b&&b.target!==g||d(g,"hide")},g.addEventListener("transitionend",o),u=setTimeout(o,1.1*t.duration)},100)}return ht(()=>{a===!0&&c()}),()=>S(mi,{css:!1,appear:t.appear,onEnter:p,onLeave:f},e.default)}}),iI={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Cf={xs:2,sm:4,md:8,lg:16,xl:24},zr=ue({name:"QSeparator",props:{...mt,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=Me(),i=vt(t,e.proxy.$q),n=w(()=>t.vertical===!0?"vertical":"horizontal"),r=w(()=>` q-separator--${n.value}`),o=w(()=>t.inset!==!1?`${r.value}-${iI[t.inset]}`:""),s=w(()=>`q-separator${r.value}${o.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(i.value===!0?" q-separator--dark":"")),a=w(()=>{const l={};if(t.size!==void 0&&(l[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${Cf.md}px`:t.spaced in Cf?`${Cf[t.spaced]}px`:t.spaced,c=t.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>S("hr",{class:s.value,style:a.value,"aria-orientation":n.value})}}),zo=ZM({}),nI=Object.keys(ec);ue({name:"QExpansionItem",props:{...ec,...rl,...mt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ol,"click","afterShow","afterHide"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=vt(t,n),o=G(t.modelValue!==null?t.modelValue:t.defaultOpened),s=G(null),a=Wd(),{show:l,hide:u,toggle:c}=sl({showing:o});let h,d;const p=w(()=>`q-expansion-item q-item-type q-expansion-item--${o.value===!0?"expanded":"collapsed"} q-expansion-item--${t.popup===!0?"popup":"standard"}`),f=w(()=>t.contentInsetLevel===void 0?null:{["padding"+(n.lang.rtl===!0?"Right":"Left")]:56*t.contentInsetLevel+"px"}),g=w(()=>t.disable!==!0&&(t.href!==void 0||t.to!==void 0&&t.to!==null&&t.to!=="")),_=w(()=>{const q={};return nI.forEach(F=>{q[F]=t[F]}),q}),v=w(()=>g.value===!0||t.expandIconToggle!==!0),b=w(()=>t.expandedIcon!==void 0&&o.value===!0?t.expandedIcon:t.expandIcon||n.iconSet.expansionItem[t.denseToggle===!0?"denseIcon":"icon"]),m=w(()=>t.disable!==!0&&(g.value===!0||t.expandIconToggle===!0)),y=w(()=>({expanded:o.value===!0,detailsId:a.value,toggle:c,show:l,hide:u})),x=w(()=>{const q=t.toggleAriaLabel!==void 0?t.toggleAriaLabel:n.lang.label[o.value===!0?"collapse":"expand"](t.label);return{role:"button","aria-expanded":o.value===!0?"true":"false","aria-controls":a.value,"aria-label":q}});function C(q){g.value!==!0&&c(q),i("click",q)}function k(q){q.keyCode===13&&P(q,!0)}function P(q,F){F!==!0&&s.value!==null&&s.value.focus(),c(q),et(q)}function A(){i("afterShow")}function E(){i("afterHide")}function L(){h===void 0&&(h=Au()),o.value===!0&&(zo[t.group]=h);const q=se(o,B=>{B===!0?zo[t.group]=h:zo[t.group]===h&&delete zo[t.group]}),F=se(()=>zo[t.group],(B,V)=>{V===h&&B!==void 0&&B!==h&&u()});d=()=>{q(),F(),zo[t.group]===h&&delete zo[t.group],d=void 0}}function T(){let q;return e.header!==void 0?q=[].concat(e.header(y.value)):(q=[S(ur,()=>[S(Hm,{lines:t.labelLines},()=>t.label||""),t.caption?S(Hm,{lines:t.captionLines,caption:!0},()=>t.caption):null])],t.icon&&q[t.switchToggleSide===!0?"push":"unshift"](S(ur,{side:t.switchToggleSide===!0,avatar:t.switchToggleSide!==!0},()=>S(_t,{name:t.icon})))),t.disable!==!0&&t.hideExpandIcon!==!0&&q[t.switchToggleSide===!0?"unshift":"push"](function(){const F={class:["q-focusable relative-position cursor-pointer"+(t.denseToggle===!0&&t.switchToggleSide===!0?" items-end":""),t.expandIconClass],side:t.switchToggleSide!==!0,avatar:t.switchToggleSide},B=[S(_t,{class:"q-expansion-item__toggle-icon"+(t.expandedIcon===void 0&&o.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:b.value})];return m.value===!0&&(Object.assign(F,{tabindex:0,...x.value,onClick:P,onKeyup:k}),B.unshift(S("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),S(ur,F,()=>B)}()),q}function I(){const q={ref:"item",style:t.headerStyle,class:t.headerClass,dark:r.value,disable:t.disable,dense:t.dense,insetLevel:t.headerInsetLevel};return v.value===!0&&(q.clickable=!0,q.onClick=C,Object.assign(q,g.value===!0?_.value:x.value)),S(ul,q,T)}function M(){return Ni(S("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:f.value,id:a.value},Ne(e.default)),[[Eh,o.value]])}function R(){const q=[I(),S(F0,{duration:t.duration,onShow:A,onHide:E},M)];return t.expandSeparator===!0&&q.push(S(zr,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:r.value}),S(zr,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:r.value})),q}return se(()=>t.group,q=>{d!==void 0&&d(),q!==void 0&&L()}),t.group!==void 0&&L(),ht(()=>{d!==void 0&&d()}),()=>S("div",{class:p.value},[S("div",{class:"q-expansion-item__container relative-position"},R())])}});var rI=["top","right","bottom","left"],Um={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:t=>rI.includes(t)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function LC(t,e){return{formClass:w(()=>"q-fab--form-"+(t.square===!0?"square":"rounded")),stacked:w(()=>t.externalLabel===!1&&["top","bottom"].includes(t.labelPosition)),labelProps:w(()=>{if(t.externalLabel===!0){const i=t.hideLabel===null?e.value===!1:t.hideLabel;return{action:"push",data:{class:[t.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${t.labelPosition}`+(i===!0?" q-fab__label--external-hidden":"")],style:t.labelStyle}}}return{action:["left","top"].includes(t.labelPosition)?"unshift":"push",data:{class:[t.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${t.labelPosition}`+(t.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:t.labelStyle}}})}}var oI=["up","right","down","left"],sI=["left","center","right"];ue({name:"QFab",props:{...Um,...rl,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...Um.hideLabel,default:null},direction:{type:String,default:"right",validator:t=>oI.includes(t)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:t=>sI.includes(t)}},emits:ol,setup(t,{slots:e}){const i=G(null),n=G(t.modelValue===!0),r=Wd(),{proxy:{$q:o}}=Me(),{formClass:s,labelProps:a}=LC(t,n),l=w(()=>t.persistent!==!0),{hide:u,toggle:c}=sl({showing:n,hideOnRouteChange:l}),h=w(()=>({opened:n.value})),d=w(()=>`q-fab z-fab row inline justify-center q-fab--align-${t.verticalActionsAlign} ${s.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),p=w(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${t.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),f=w(()=>{const b={id:r.value,role:"menu"};return n.value!==!0&&(b["aria-hidden"]="true"),b}),g=w(()=>"q-fab__icon-holder  q-fab__icon-holder--"+(n.value===!0?"opened":"closed"));function _(b,m){const y=e[b],x=`q-fab__${b} absolute-full`;return y===void 0?S(_t,{class:x,name:t[m]||o.iconSet.fab[m]}):S("div",{class:x},y(h.value))}function v(){const b=[];return t.hideIcon!==!0&&b.push(S("div",{class:g.value},[_("icon","icon"),_("active-icon","activeIcon")])),t.label===""&&e.label===void 0||b[a.value.action](S("div",a.value.data,e.label!==void 0?e.label(h.value):[t.label])),ni(e.tooltip,b)}return ko(xS,{showing:n,onChildClick(b){u(b),i.value!==null&&i.value.$el.focus()}}),()=>S("div",{class:d.value},[S(xt,{ref:i,class:s.value,...t,noWrap:!0,stack:t.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r.value,onClick:c},v),S("div",{class:p.value,...f.value},Ne(e.default))])}});var PC={start:"self-end",center:"self-center",end:"self-start"},aI=Object.keys(PC);ue({name:"QFabAction",props:{...Um,icon:{type:String,default:""},anchor:{type:String,validator:t=>aI.includes(t)},to:[String,Object],replace:Boolean},emits:["click"],setup(t,{slots:e,emit:i}){const n=Xi(xS,()=>({showing:{value:!0},onChildClick:hi})),{formClass:r,labelProps:o}=LC(t,n.showing),s=w(()=>{const h=PC[t.anchor];return r.value+(h!==void 0?` ${h}`:"")}),a=w(()=>t.disable===!0||n.showing.value!==!0);function l(h){n.onChildClick(h),i("click",h)}function u(){const h=[];return e.icon!==void 0?h.push(e.icon()):t.icon!==""&&h.push(S(_t,{name:t.icon})),t.label===""&&e.label===void 0||h[o.value.action](S("div",o.value.data,e.label!==void 0?e.label():[t.label])),ni(e.default,h)}const c=Me();return Object.assign(c.proxy,{click:l}),()=>S(xt,{class:s.value,...t,noWrap:!0,stack:t.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:a.value,onClick:l},u)}});var lI=[!0,!1,"ondemand"],uI={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:t=>lI.includes(t)}};function cI(t,e){const{props:i,proxy:n}=Me(),r=G(!1),o=G(null),s=G(!1);(function({validate:v,resetValidation:b,requiresQForm:m}){const y=Xi(wS,!1);if(y!==!1){const{props:x,proxy:C}=Me();Object.assign(C,{validate:v,resetValidation:b}),se(()=>x.disable,k=>{k===!0?(typeof b=="function"&&b(),y.unbindComponent(C)):y.bindComponent(C)}),Nt(()=>{x.disable!==!0&&y.bindComponent(C)}),ht(()=>{x.disable!==!0&&y.unbindComponent(C)})}})({validate:g,resetValidation:f});let a,l=0;const u=w(()=>i.rules!==void 0&&i.rules!==null&&i.rules.length!==0),c=w(()=>i.disable!==!0&&u.value===!0&&e.value===!1),h=w(()=>i.error===!0||r.value===!0),d=w(()=>typeof i.errorMessage=="string"&&i.errorMessage.length!==0?i.errorMessage:o.value);function p(){i.lazyRules!=="ondemand"&&c.value===!0&&s.value===!0&&_()}function f(){l++,e.value=!1,s.value=!1,r.value=!1,o.value=null,_.cancel()}function g(v=i.modelValue){if(i.disable===!0||u.value===!1)return!0;const b=++l,m=e.value!==!0?()=>{s.value=!0}:()=>{},y=(C,k)=>{C===!0&&m(),r.value=C,o.value=k||null,e.value=!1},x=[];for(let C=0;C<i.rules.length;C++){const k=i.rules[C];let P;if(typeof k=="function"?P=k(v,wh):typeof k=="string"&&wh[k]!==void 0&&(P=wh[k](v)),P===!1||typeof P=="string")return y(!0,P),!1;P!==!0&&P!==void 0&&x.push(P)}return x.length===0?(y(!1),!0):(e.value=!0,Promise.all(x).then(C=>{if(C===void 0||Array.isArray(C)===!1||C.length===0)return b===l&&y(!1),!0;const k=C.find(P=>P===!1||typeof P=="string");return b===l&&y(k!==void 0,k),k===void 0},C=>(b===l&&y(!0),!1)))}se(()=>i.modelValue,()=>{s.value=!0,c.value===!0&&i.lazyRules===!1&&_()}),se(()=>i.reactiveRules,v=>{v===!0?a===void 0&&(a=se(()=>i.rules,p,{immediate:!0,deep:!0})):a!==void 0&&(a(),a=void 0)},{immediate:!0}),se(()=>i.lazyRules,p),se(t,v=>{v===!0?s.value=!0:c.value===!0&&i.lazyRules!=="ondemand"&&_()});const _=nl(g,0);return ht(()=>{a!==void 0&&a(),_.cancel()}),Object.assign(n,{resetValidation:f,validate:g}),vi(n,"hasError",()=>h.value),{isDirtyModel:s,hasRules:u,hasError:h,errorMessage:d,validate:g,resetValidation:f}}function Cs(t){return t!=null&&(""+t).length!==0}var IC={...mt,...uI,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},Kd={...IC,maxlength:[Number,String]},Xd=["update:modelValue","clear","focus","blur"];function Zd({requiredForAttr:t=!0,tagProp:e,changeEvent:i=!1}={}){const{props:n,proxy:r}=Me(),o=vt(n,r.$q),s=Wd({required:t,getValue:()=>n.for});return{requiredForAttr:t,changeEvent:i,tag:e===!0?w(()=>n.tag):{value:"label"},isDark:o,editable:w(()=>n.disable!==!0&&n.readonly!==!0),innerLoading:G(!1),focused:G(!1),hasPopupOpen:!1,splitAttrs:TC(),targetUid:s,rootRef:G(null),targetRef:G(null),controlRef:G(null)}}function Qd(t){const{props:e,emit:i,slots:n,attrs:r,proxy:o}=Me(),{$q:s}=o;let a=null;t.hasValue===void 0&&(t.hasValue=w(()=>Cs(e.modelValue))),t.emitValue===void 0&&(t.emitValue=q=>{i("update:modelValue",q)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:P,onFocusout:A}),Object.assign(t,{clearValue:E,onControlFocusin:P,onControlFocusout:A,focus:k}),t.computedCounter===void 0&&(t.computedCounter=w(()=>{if(e.counter!==!1){const q=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,F=e.maxlength!==void 0?e.maxlength:e.maxValues;return q+(F!==void 0?" / "+F:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:h,resetValidation:d}=cI(t.focused,t.innerLoading),p=t.floatingLabel!==void 0?w(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):w(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),f=w(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),g=w(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),_=w(()=>`q-field row no-wrap items-start q-field--${g.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(p.value===!0?" q-field--float":"")+(b.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&f.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),v=w(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(c.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),b=w(()=>e.labelSlot===!0||e.label!==void 0),m=w(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&c.value!==!0?` text-${e.labelColor}`:"")),y=w(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:p.value,modelValue:e.modelValue,emitValue:t.emitValue})),x=w(()=>{const q={};return t.targetUid.value&&(q.for=t.targetUid.value),e.disable===!0&&(q["aria-disabled"]="true"),q});function C(){const q=document.activeElement;let F=t.targetRef!==void 0&&t.targetRef.value;!F||q!==null&&q.id===t.targetUid.value||(F.hasAttribute("tabindex")===!0||(F=F.querySelector("[tabindex]")),F&&F!==q&&F.focus({preventScroll:!0}))}function k(){al(C)}function P(q){a!==null&&(clearTimeout(a),a=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,i("focus",q))}function A(q,F){a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,(document.hasFocus()!==!0||t.hasPopupOpen!==!0&&t.controlRef!==void 0&&t.controlRef.value!==null&&t.controlRef.value.contains(document.activeElement)===!1)&&(t.focused.value===!0&&(t.focused.value=!1,i("blur",q)),F!==void 0&&F())})}function E(q){et(q),s.platform.is.mobile!==!0?(t.targetRef!==void 0&&t.targetRef.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),i("update:modelValue",null),t.changeEvent===!0&&i("change",null),i("clear",e.modelValue),dt(()=>{const F=l.value;d(),l.value=F})}function L(q){[13,32].includes(q.keyCode)&&E(q)}function T(){const q=[];return n.prepend!==void 0&&q.push(S("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:yi},n.prepend())),q.push(S("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},function(){const F=[];return e.prefix!==void 0&&e.prefix!==null&&F.push(S("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&F.push(t.getShadowControl()),t.getControl!==void 0?F.push(t.getControl()):n.rawControl!==void 0?F.push(n.rawControl()):n.control!==void 0&&F.push(S("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},n.control(y.value))),b.value===!0&&F.push(S("div",{class:m.value},Ne(n.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&F.push(S("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),F.concat(Ne(n.default))}())),c.value===!0&&e.noErrorIcon===!1&&q.push(M("error",[S(_t,{name:s.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?q.push(M("inner-loading-append",n.loading!==void 0?n.loading():[S(Un,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&q.push(M("inner-clearable-append",[S(_t,{class:"q-field__focusable-action",name:e.clearIcon||s.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":s.lang.label.clear,onKeyup:L,onClick:E})])),n.append!==void 0&&q.push(S("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:yi},n.append())),t.getInnerAppend!==void 0&&q.push(M("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&q.push(t.getControlChild()),q}function I(){let q,F;c.value===!0?h.value!==null?(q=[S("div",{role:"alert"},h.value)],F=`q--slot-error-${h.value}`):(q=Ne(n.error),F="q--slot-error"):e.hideHint===!0&&t.focused.value!==!0||(e.hint!==void 0?(q=[S("div",e.hint)],F=`q--slot-hint-${e.hint}`):(q=Ne(n.hint),F="q--slot-hint"));const B=e.counter===!0||n.counter!==void 0;if(e.hideBottomSpace===!0&&B===!1&&q===void 0)return;const V=S("div",{key:F,class:"q-field__messages col"},q);return S("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:yi},[e.hideBottomSpace===!0?V:S(mi,{name:"q-transition--field-message"},()=>V),B===!0?S("div",{class:"q-field__counter"},n.counter!==void 0?n.counter():t.computedCounter.value):null])}function M(q,F){return F===null?null:S("div",{key:q,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},F)}let R=!1;return Dr(()=>{R=!0}),Ms(()=>{R===!0&&e.autofocus===!0&&o.focus()}),e.autofocus===!0&&Nt(()=>{o.focus()}),ht(()=>{a!==null&&clearTimeout(a)}),Object.assign(o,{focus:k,blur:function(){var q;q=C,rs=rs.filter(B=>B!==q);const F=document.activeElement;F!==null&&t.rootRef.value.contains(F)&&F.blur()}}),function(){const q=t.getControl===void 0&&n.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...x.value}:x.value;return S(t.tag.value,{ref:t.rootRef,class:[_.value,r.class],style:r.style,...q},[n.before!==void 0?S("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:yi},n.before()):null,S("div",{class:"q-field__inner relative-position col self-stretch"},[S("div",{ref:t.controlRef,class:v.value,tabindex:-1,...t.controlEvents},T()),f.value===!0?I():null]),n.after!==void 0?S("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:yi},n.after()):null])}}var hI=ue({name:"QField",inheritAttrs:!1,props:{...Kd,tag:{type:String,default:"label"}},emits:Xd,setup:()=>Qd(Zd({tagProp:!0}))});function Ys(t,e,i,n){const r=[];return t.forEach(o=>{n(o)===!0?r.push(o):e.push({failedPropValidation:i,file:o})}),r}function Yc(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),et(t)}var RC={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},qC=["rejected"];function AC({editable:t,dnd:e,getFileInput:i,addFilesToQueue:n}){const{props:r,emit:o,proxy:s}=Me(),a=G(null),l=w(()=>r.accept!==void 0?r.accept.split(",").map(g=>(g=g.trim())==="*"?"*/":(g.endsWith("/*")&&(g=g.slice(0,g.length-1)),g.toUpperCase())):null),u=w(()=>parseInt(r.maxFiles,10)),c=w(()=>parseInt(r.maxTotalSize,10));function h(g){if(t.value)if(g!==Object(g)&&(g={target:null}),g.target!==null&&g.target.matches('input[type="file"]')===!0)g.clientX===0&&g.clientY===0&&Xt(g);else{const _=i();_&&_!==g.target&&_.click(g)}}function d(g){t.value&&g&&n(null,g)}function p(g){et(g),(g.relatedTarget!==null||ct.is.safari!==!0?g.relatedTarget!==a.value:document.elementsFromPoint(g.clientX,g.clientY).includes(a.value)===!1)&&(e.value=!1)}function f(g){Yc(g);const _=g.dataTransfer.files;_.length!==0&&n(null,_),e.value=!1}return Object.assign(s,{pickFiles:h,addFiles:d}),{pickFiles:h,addFiles:d,onDragover:function(g){Yc(g),e.value!==!0&&(e.value=!0)},onDragleave:p,processFiles:function(g,_,v,b){let m=Array.from(_||g.target.files);const y=[],x=()=>{y.length!==0&&o("rejected",y)};if(r.accept!==void 0&&l.value.indexOf("*/")===-1&&(m=Ys(m,y,"accept",C=>l.value.some(k=>C.type.toUpperCase().startsWith(k)||C.name.toUpperCase().endsWith(k))),m.length===0))return x();if(r.maxFileSize!==void 0){const C=parseInt(r.maxFileSize,10);if(m=Ys(m,y,"max-file-size",k=>k.size<=C),m.length===0)return x()}if(r.multiple!==!0&&m.length!==0&&(m=[m[0]]),m.forEach(C=>{C.__key=C.webkitRelativePath+C.lastModified+C.name+C.size}),b===!0){const C=v.map(k=>k.__key);m=Ys(m,y,"duplicate",k=>C.includes(k.__key)===!1)}if(m.length===0)return x();if(r.maxTotalSize!==void 0){let C=b===!0?v.reduce((k,P)=>k+P.size,0):0;if(m=Ys(m,y,"max-total-size",k=>(C+=k.size,C<=c.value)),m.length===0)return x()}if(typeof r.filter=="function"){const C=r.filter(m);m=Ys(m,y,"filter",k=>C.includes(k))}if(r.maxFiles!==void 0){let C=b===!0?v.length:0;if(m=Ys(m,y,"max-files",()=>(C++,C<=u.value)),m.length===0)return x()}return x(),m.length!==0?m:void 0},getDndNode:function(g){if(e.value===!0)return S("div",{ref:a,class:`q-${g}__dnd absolute-full`,onDragenter:Yc,onDragover:Yc,onDragleave:p,onDrop:f})},maxFilesNumber:u,maxTotalSizeNumber:c}}function FC(t,e){function i(){const n=t.modelValue;try{const r="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(n)===n&&("length"in n?Array.from(n):[n]).forEach(o=>{r.items.add(o)}),{files:r.files}}catch{return{files:void 0}}}return w(e===!0?()=>{if(t.type==="file")return i()}:i)}ue({name:"QFile",inheritAttrs:!1,props:{...IC,...Tn,...RC,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Xd,...qC],setup(t,{slots:e,emit:i,attrs:n}){const{proxy:r}=Me(),o=Zd(),s=G(null),a=G(!1),l=C0(t),{pickFiles:u,onDragover:c,onDragleave:h,processFiles:d,getDndNode:p}=AC({editable:o.editable,dnd:a,getFileInput:L,addFilesToQueue:T}),f=FC(t),g=w(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),_=w(()=>Cs(g.value)),v=w(()=>g.value.map(R=>R.name).join(", ")),b=w(()=>qm(g.value.reduce((R,q)=>R+q.size,0))),m=w(()=>({totalSize:b.value,filesNumber:g.value.length,maxFiles:t.maxFiles})),y=w(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:l.value,...n,id:o.targetUid.value,disabled:o.editable.value!==!0})),x=w(()=>"q-file q-field--auto-height"+(a.value===!0?" q-file--dnd":"")),C=w(()=>t.multiple===!0&&t.append===!0);function k(R){const q=g.value.slice();q.splice(R,1),P(q)}function P(R){i("update:modelValue",t.multiple===!0?R:R[0])}function A(R){R.keyCode===13&&yi(R)}function E(R){R.keyCode!==13&&R.keyCode!==32||u(R)}function L(){return s.value}function T(R,q){const F=d(R,q,g.value,C.value),B=L();B!=null&&(B.value=""),F!==void 0&&((t.multiple===!0?t.modelValue&&F.every(V=>g.value.includes(V)):t.modelValue===F[0])||P(C.value===!0?g.value.concat(F):F))}function I(){return[S("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function M(){const R={ref:s,...y.value,...f.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:T};return t.multiple===!0&&(R.multiple=!0),S("input",R)}return Object.assign(o,{fieldClass:x,emitValue:P,hasValue:_,inputRef:s,innerValue:g,floatingLabel:w(()=>_.value===!0||Cs(t.displayValue)),computedCounter:w(()=>{if(t.counterLabel!==void 0)return t.counterLabel(m.value);const R=t.maxFiles;return`${g.value.length}${R!==void 0?" / "+R:""} (${b.value})`}),getControlChild:()=>p("file"),getControl:()=>{const R={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return o.editable.value===!0&&Object.assign(R,{onDragover:c,onDragleave:h,onKeydown:A,onKeyup:E}),S("div",R,[M()].concat(function(){if(e.file!==void 0)return g.value.length===0?I():g.value.map((F,B)=>e.file({index:B,file:F,ref:this}));if(e.selected!==void 0)return g.value.length===0?I():e.selected({files:g.value,ref:this});if(t.useChips===!0)return g.value.length===0?I():g.value.map((F,B)=>S(iC,{key:"file-"+B,removable:o.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{k(B)}},()=>S("span",{class:"ellipsis",textContent:F.name})));const q=t.displayValue!==void 0?t.displayValue:v.value;return q.length!==0?[S("div",{class:t.inputClass,style:t.inputStyle,textContent:q})]:I()}()))}}),Object.assign(r,{removeAtIndex:k,removeFile:function(R){const q=g.value.indexOf(R);q!==-1&&k(q)},getNativeElement:()=>s.value}),vi(r,"nativeEl",()=>s.value),Qd(o)}}),ue({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=Xi(ws,Mt);if(r===Mt)return Mt;const o=G(parseInt(t.heightHint,10)),s=G(!0),a=G(wn.value===!0||r.isContainer.value===!0?0:window.innerHeight),l=w(()=>t.reveal===!0||r.view.value.indexOf("F")!==-1||n.platform.is.ios&&r.isContainer.value===!0),u=w(()=>r.isContainer.value===!0?r.containerHeight.value:a.value),c=w(()=>{if(t.modelValue!==!0)return 0;if(l.value===!0)return s.value===!0?o.value:0;const y=r.scroll.value.position+u.value+o.value-r.height.value;return y>0?y:0}),h=w(()=>t.modelValue!==!0||l.value===!0&&s.value!==!0),d=w(()=>t.modelValue===!0&&h.value===!0&&t.reveal===!0),p=w(()=>"q-footer q-layout__section--marginal "+(l.value===!0?"fixed":"absolute")+"-bottom"+(t.bordered===!0?" q-footer--bordered":"")+(h.value===!0?" q-footer--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus"+(l.value!==!0?" hidden":""):"")),f=w(()=>{const y=r.rows.value.bottom,x={};return y[0]==="l"&&r.left.space===!0&&(x[n.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),y[2]==="r"&&r.right.space===!0&&(x[n.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),x});function g(y,x){r.update("footer",y,x)}function _(y,x){y.value!==x&&(y.value=x)}function v({height:y}){_(o,y),g("size",y)}function b(y){d.value===!0&&_(s,!0),i("focusin",y)}se(()=>t.modelValue,y=>{g("space",y),_(s,!0),r.animate()}),se(c,y=>{g("offset",y)}),se(()=>t.reveal,y=>{y===!1&&_(s,t.modelValue)}),se(s,y=>{r.animate(),i("reveal",y)}),se([o,r.scroll,r.height],function(){if(t.reveal!==!0)return;const{direction:y,position:x,inflectionPoint:C}=r.scroll.value;_(s,y==="up"||x-C<100||r.height.value-u.value-x-o.value<300)}),se(()=>n.screen.height,y=>{r.isContainer.value!==!0&&_(a,y)});const m={};return r.instances.footer=m,t.modelValue===!0&&g("size",o.value),g("space",t.modelValue),g("offset",c.value),ht(()=>{r.instances.footer===m&&(r.instances.footer=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const y=ni(e.default,[S(Ss,{debounce:0,onResize:v})]);return t.elevated===!0&&y.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),S("footer",{class:p.value,style:f.value,onFocusin:b},y)}}}),ue({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:e,emit:i}){const n=Me(),r=G(null);let o=0;const s=[];function a(p){const f=typeof p=="boolean"?p:t.noErrorFocus!==!0,g=++o,_=(b,m)=>{i("validation"+(b===!0?"Success":"Error"),m)},v=b=>{const m=b.validate();return typeof m.then=="function"?m.then(y=>({valid:y,comp:b}),y=>({valid:!1,comp:b,err:y})):Promise.resolve({valid:m,comp:b})};return(t.greedy===!0?Promise.all(s.map(v)).then(b=>b.filter(m=>m.valid!==!0)):s.reduce((b,m)=>b.then(()=>v(m).then(y=>{if(y.valid===!1)return Promise.reject(y)})),Promise.resolve()).catch(b=>[b])).then(b=>{if(b===void 0||b.length===0)return g===o&&_(!0),!0;if(g===o){const{comp:m,err:y}=b[0];if(_(!1,m),f===!0){const x=b.find(({comp:C})=>typeof C.focus=="function"&&yo(C.$)===!1);x!==void 0&&x.comp.focus()}}return!1})}function l(){o++,s.forEach(p=>{typeof p.resetValidation=="function"&&p.resetValidation()})}function u(p){p!==void 0&&et(p);const f=o+1;a().then(g=>{f===o&&g===!0&&(t.onSubmit!==void 0?i("submit",p):p!==void 0&&p.target!==void 0&&typeof p.target.submit=="function"&&p.target.submit())})}function c(p){p!==void 0&&et(p),i("reset"),dt(()=>{l(),t.autofocus===!0&&t.noResetFocus!==!0&&h()})}function h(){al(()=>{if(r.value===null)return;(r.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(r.value.querySelectorAll("[tabindex]"),f=>f.tabIndex!==-1))?.focus({preventScroll:!0})})}ko(wS,{bindComponent(p){s.push(p)},unbindComponent(p){const f=s.indexOf(p);f!==-1&&s.splice(f,1)}});let d=!1;return Dr(()=>{d=!0}),Ms(()=>{d===!0&&t.autofocus===!0&&h()}),Nt(()=>{t.autofocus===!0&&h()}),Object.assign(n.proxy,{validate:a,resetValidation:l,submit:u,reset:c,focus:h,getValidationComponents:()=>s}),()=>S("form",{class:"q-form",ref:r,onSubmit:u,onReset:c},Ne(e.default))}}),ue({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=Xi(ws,Mt);if(r===Mt)return Mt;const o=G(parseInt(t.heightHint,10)),s=G(!0),a=w(()=>t.reveal===!0||r.view.value.indexOf("H")!==-1||n.platform.is.ios&&r.isContainer.value===!0),l=w(()=>{if(t.modelValue!==!0)return 0;if(a.value===!0)return s.value===!0?o.value:0;const b=o.value-r.scroll.value.position;return b>0?b:0}),u=w(()=>t.modelValue!==!0||a.value===!0&&s.value!==!0),c=w(()=>t.modelValue===!0&&u.value===!0&&t.reveal===!0),h=w(()=>"q-header q-layout__section--marginal "+(a.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),d=w(()=>{const b=r.rows.value.top,m={};return b[0]==="l"&&r.left.space===!0&&(m[n.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),b[2]==="r"&&r.right.space===!0&&(m[n.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),m});function p(b,m){r.update("header",b,m)}function f(b,m){b.value!==m&&(b.value=m)}function g({height:b}){f(o,b),p("size",b)}function _(b){c.value===!0&&f(s,!0),i("focusin",b)}se(()=>t.modelValue,b=>{p("space",b),f(s,!0),r.animate()}),se(l,b=>{p("offset",b)}),se(()=>t.reveal,b=>{b===!1&&f(s,t.modelValue)}),se(s,b=>{r.animate(),i("reveal",b)}),se(r.scroll,b=>{t.reveal===!0&&f(s,b.direction==="up"||b.position<=t.revealOffset||b.position-b.inflectionPoint<100)});const v={};return r.instances.header=v,t.modelValue===!0&&p("size",o.value),p("space",t.modelValue),p("offset",l.value),ht(()=>{r.instances.header===v&&(r.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const b=Ju(e.default,[]);return t.elevated===!0&&b.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b.push(S(Ss,{debounce:0,onResize:g})),S("header",{class:h.value,style:d.value,onFocusin:_},b)}}});var O0={ratio:[String,Number]};function z0(t,e){return w(()=>{const i=Number(t.ratio||(e!==void 0?e.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:100/i+"%"}:null})}ue({name:"QImg",props:{...O0,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:1.7778},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:e,emit:i}){const n=G(t.initialRatio),r=z0(t,n),o=Me(),{registerTimeout:s,removeTimeout:a}=Or(),{registerTimeout:l,removeTimeout:u}=Or(),c=w(()=>t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null),h=w(()=>t.errorSrc!==void 0?{src:t.errorSrc,__qerror:!0}:null),d=[G(null),G(c.value)],p=G(0),f=G(!1),g=G(!1),_=w(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),v=w(()=>({width:t.width,height:t.height})),b=w(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition q-img__image--`),m=w(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));function y(){u(),f.value=!1}function x({target:E}){yo(o)===!1&&(a(),n.value=E.naturalHeight===0?.5:E.naturalWidth/E.naturalHeight,C(E,1))}function C(E,L){L!==1e3&&yo(o)!==!0&&(E.complete===!0?function(T){yo(o)!==!0&&(p.value=1^p.value,d[p.value].value=null,y(),T.getAttribute("__qerror")!=="true"&&(g.value=!1),i("load",T.currentSrc||T.src))}(E):s(()=>{C(E,L+1)},50))}function k(E){a(),y(),g.value=!0,d[p.value].value=h.value,d[1^p.value].value=c.value,i("error",E)}function P(E){const L=d[E].value,T={key:"img_"+E,class:b.value,style:m.value,alt:t.alt,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...L};return p.value===E?Object.assign(T,{class:T.class+"current",onLoad:x,onError:k}):T.class+="loaded",S("div",{class:"q-img__container absolute-full",key:"img"+E},S("img",T))}function A(){return f.value===!1?S("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ne(e[g.value===!0?"error":"default"])):S("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},e.loading!==void 0?e.loading():t.noSpinner===!0?void 0:[S(Un,{color:t.spinnerColor,size:t.spinnerSize})])}{let E=function(){se(()=>t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null,L=>{a(),g.value=!1,L===null?(y(),d[1^p.value].value=c.value):(u(),t.loadingShowDelay!==0?l(()=>{f.value=!0},t.loadingShowDelay):f.value=!0),d[p.value].value=L},{immediate:!0})};wn.value===!0?Nt(E):E()}return()=>{const E=[];return r.value!==null&&E.push(S("div",{key:"filler",style:r.value})),d[0].value!==null&&E.push(P(0)),d[1].value!==null&&E.push(P(1)),E.push(S(mi,{name:"q-transition--fade"},A)),S("div",{key:"main",class:_.value,style:v.value,role:"img","aria-label":t.alt},E)}}});var{passive:Do}=Dt;ue({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:Ps,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(t,{slots:e,emit:i}){const n=G(!1),r=G(!0),o=G(null),s=G(null);let a,l,u=t.initialIndex;const c=w(()=>"q-infinite-scroll__loading"+(n.value===!0?"":" invisible"));function h(){if(t.disable===!0||n.value===!0||r.value===!1)return;const x=Bc(a),C=_o(a),k=$a(a);t.reverse===!1?Math.round(C+k+t.offset)>=Math.round(x)&&d():Math.round(C)<=t.offset&&d()}function d(){if(t.disable===!0||n.value===!0||r.value===!1)return;u++,n.value=!0;const x=Bc(a);i("load",u,C=>{r.value===!0&&(n.value=!1,dt(()=>{if(t.reverse===!0){const k=Bc(a),P=_o(a);Sa(a,P+(k-x))}C===!0?f():o.value&&o.value.closest("body")&&l()}))})}function p(){r.value===!1&&(r.value=!0,a.addEventListener("scroll",l,Do)),h()}function f(){r.value===!0&&(r.value=!1,n.value=!1,a.removeEventListener("scroll",l,Do),l!==void 0&&l.cancel!==void 0&&l.cancel())}function g(){if(a&&r.value===!0&&a.removeEventListener("scroll",l,Do),a=mr(o.value,t.scrollTarget),r.value===!0){if(a.addEventListener("scroll",l,Do),t.reverse===!0){const x=Bc(a),C=$a(a);Sa(a,x-C)}h()}}function _(x){x=parseInt(x,10);const C=l;l=x<=0?h:nl(h,isNaN(x)===!0?100:x),a&&r.value===!0&&(C!==void 0&&a.removeEventListener("scroll",C,Do),a.addEventListener("scroll",l,Do))}function v(x){if(b.value===!0){if(s.value===null)return void(x!==!0&&dt(()=>{v(!0)}));const C=(n.value===!0?"un":"")+"pauseAnimations";Array.from(s.value.getElementsByTagName("svg")).forEach(k=>{k[C]()})}}const b=w(()=>t.disable!==!0&&r.value===!0);se([n,b],()=>{v()}),se(()=>t.disable,x=>{x===!0?f():p()}),se(()=>t.reverse,()=>{n.value===!1&&r.value===!0&&h()}),se(()=>t.scrollTarget,g),se(()=>t.debounce,_);let m=!1;Ms(()=>{m!==!1&&a&&Sa(a,m)}),Dr(()=>{m=!!a&&_o(a)}),ht(()=>{r.value===!0&&a.removeEventListener("scroll",l,Do)}),Nt(()=>{_(t.debounce),g(),n.value===!1&&v()});const y=Me();return Object.assign(y.proxy,{poll:()=>{l!==void 0&&l()},trigger:d,stop:f,reset:function(){u=0},resume:p,setIndex:function(x){u=x},updateScrollTarget:g}),()=>{const x=Ju(e.default,[]);return b.value===!0&&x[t.reverse===!1?"push":"unshift"](S("div",{ref:s,class:c.value},Ne(e.loading))),S("div",{class:"q-infinite-scroll",ref:o},x)}}}),ue({name:"QInnerLoading",props:{...mt,...us,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(t,{slots:e}){const i=Me(),n=vt(t,i.proxy.$q),{transitionProps:r,transitionStyle:o}=Hd(t),s=w(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),a=w(()=>"q-inner-loading__label"+(t.labelClass!==void 0?` ${t.labelClass}`:""));function l(){return t.showing===!0?S("div",{class:s.value,style:o.value},e.default!==void 0?e.default():function(){const u=[S(Un,{size:t.size,color:t.color})];return t.label!==void 0&&u.push(S("div",{class:a.value,style:t.labelStyle},[t.label])),u}()):null}return()=>S(mi,r.value,l)}});var gb={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},yd={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},OC=Object.keys(yd);OC.forEach(t=>{yd[t].regex=new RegExp(yd[t].pattern)});var dI=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+OC.join("")+"])|(.)","g"),mb=/[.*+?^${}()|[\]\\]/g,ci="",pI={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function fI(t,e,i,n){let r,o,s,a,l,u;const c=G(null),h=G(function(){if(p(),c.value===!0){const m=_(v(t.modelValue));return t.fillMask!==!1?b(m):m}return t.modelValue}());function d(m){if(m<r.length)return r.slice(-m);let y="",x=r;const C=x.indexOf(ci);if(C!==-1){for(let k=m-x.length;k>0;k--)y+=ci;x=x.slice(0,C)+y+x.slice(C)}return x}function p(){if(c.value=t.mask!==void 0&&t.mask.length!==0&&(t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)),c.value===!1)return a=void 0,r="",void(o="");const m=gb[t.mask]===void 0?t.mask:gb[t.mask],y=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",x=y.replace(mb,"\\$&"),C=[],k=[],P=[];let A=t.reverseFillMask===!0,E="",L="";m.replace(dI,(R,q,F,B,V)=>{if(B!==void 0){const O=yd[B];P.push(O),L=O.negate,A===!0&&(k.push("(?:"+L+"+)?("+O.pattern+"+)?(?:"+L+"+)?("+O.pattern+"+)?"),A=!1),k.push("(?:"+L+"+)?("+O.pattern+")?")}else if(F!==void 0)E="\\"+(F==="\\"?"":F),P.push(F),C.push("([^"+E+"]+)?"+E+"?");else{const O=q!==void 0?q:V;E=O==="\\"?"\\\\\\\\":O.replace(mb,"\\\\$&"),P.push(O),C.push("([^"+E+"]+)?"+E+"?")}});const T=new RegExp("^"+C.join("")+"("+(E===""?".":"[^"+E+"]")+"+)?"+(E===""?"":"["+E+"]*")+"$"),I=k.length-1,M=k.map((R,q)=>q===0&&t.reverseFillMask===!0?new RegExp("^"+x+"*"+R):q===I?new RegExp("^"+R+"("+(L===""?".":L)+"+)?"+(t.reverseFillMask===!0?"$":x+"*")):new RegExp("^"+R));s=P,a=R=>{const q=T.exec(t.reverseFillMask===!0?R:R.slice(0,P.length+1));q!==null&&(R=q.slice(1).join(""));const F=[],B=M.length;for(let V=0,O=R;V<B;V++){const $=M[V].exec(O);if($===null)break;O=O.slice($.shift().length),F.push(...$)}return F.length!==0?F.join(""):R},r=P.map(R=>typeof R=="string"?R:ci).join(""),o=r.split(ci).join(y)}function f(m,y,x){const C=n.value,k=C.selectionEnd,P=C.value.length-k,A=v(m);y===!0&&p();const E=_(A),L=t.fillMask!==!1?b(E):E,T=h.value!==L;C.value!==L&&(C.value=L),T===!0&&(h.value=L),document.activeElement===C&&dt(()=>{if(L!==o)if(x!=="insertFromPaste"||t.reverseFillMask===!0)if(["deleteContentBackward","deleteContentForward"].indexOf(x)===-1)if(t.reverseFillMask===!0)if(T===!0){const M=Math.max(0,L.length-(L===o?0:Math.min(E.length,P+1)));M===1&&k===1?C.setSelectionRange(M,M,"forward"):g.rightReverse(C,M)}else{const M=L.length-P;C.setSelectionRange(M,M,"backward")}else if(T===!0){const M=Math.max(0,r.indexOf(ci),Math.min(E.length,k)-1);g.right(C,M)}else{const M=k-1;g.right(C,M)}else{const M=t.reverseFillMask===!0?k===0?L.length>E.length?1:0:Math.max(0,L.length-(L===o?0:Math.min(E.length,P)+1))+1:k;C.setSelectionRange(M,M,"forward")}else{const M=C.selectionEnd;let R=k-1;for(let q=l;q<=R&&q<M;q++)r[q]!==ci&&R++;g.right(C,R)}else{const M=t.reverseFillMask===!0?o.length:0;C.setSelectionRange(M,M,"forward")}});const I=t.unmaskedValue===!0?v(L):L;String(t.modelValue)===I||t.modelValue===null&&I===""||i(I,!0)}se(()=>t.type+t.autogrow,p),se(()=>t.mask,m=>{if(m!==void 0)f(h.value,!0);else{const y=v(h.value);p(),t.modelValue!==y&&e("update:modelValue",y)}}),se(()=>t.fillMask+t.reverseFillMask,()=>{c.value===!0&&f(h.value,!0)}),se(()=>t.unmaskedValue,()=>{c.value===!0&&f(h.value)});const g={left(m,y){const x=r.slice(y-1).indexOf(ci)===-1;let C=Math.max(0,y-1);for(;C>=0;C--)if(r[C]===ci){y=C,x===!0&&y++;break}if(C<0&&r[y]!==void 0&&r[y]!==ci)return g.right(m,0);y>=0&&m.setSelectionRange(y,y,"backward")},right(m,y){const x=m.value.length;let C=Math.min(x,y+1);for(;C<=x;C++){if(r[C]===ci){y=C;break}r[C-1]===ci&&(y=C)}if(C>x&&r[y-1]!==void 0&&r[y-1]!==ci)return g.left(m,x);m.setSelectionRange(y,y,"forward")},leftReverse(m,y){const x=d(m.value.length);let C=Math.max(0,y-1);for(;C>=0;C--){if(x[C-1]===ci){y=C;break}if(x[C]===ci&&(y=C,C===0))break}if(C<0&&x[y]!==void 0&&x[y]!==ci)return g.rightReverse(m,0);y>=0&&m.setSelectionRange(y,y,"backward")},rightReverse(m,y){const x=m.value.length,C=d(x),k=C.slice(0,y+1).indexOf(ci)===-1;let P=Math.min(x,y+1);for(;P<=x;P++)if(C[P-1]===ci){(y=P)>0&&k===!0&&y--;break}if(P>x&&C[y-1]!==void 0&&C[y-1]!==ci)return g.leftReverse(m,x);m.setSelectionRange(y,y,"forward")}};function _(m){if(m==null||m==="")return"";if(t.reverseFillMask===!0)return function(k){const P=s,A=r.indexOf(ci);let E=k.length-1,L="";for(let T=P.length-1;T>=0&&E!==-1;T--){const I=P[T];let M=k[E];if(typeof I=="string")L=I+L,M===I&&E--;else{if(M===void 0||!I.regex.test(M))return L;do L=(I.transform!==void 0?I.transform(M):M)+L,E--,M=k[E];while(A===T&&M!==void 0&&I.regex.test(M))}}return L}(m);const y=s;let x=0,C="";for(let k=0;k<y.length;k++){const P=m[x],A=y[k];if(typeof A=="string")C+=A,P===A&&x++;else{if(P===void 0||!A.regex.test(P))return C;C+=A.transform!==void 0?A.transform(P):P,x++}}return C}function v(m){return typeof m!="string"||a===void 0?typeof m=="number"?a(""+m):m:a(m)}function b(m){return o.length-m.length<=0?m:t.reverseFillMask===!0&&m.length!==0?o.slice(0,-m.length)+m:m+o.slice(m.length)}return{innerValue:h,hasMask:c,moveCursorForPaste:function(m,y,x){const C=_(v(m.value));y=Math.max(0,r.indexOf(ci),Math.min(C.length,y)),l=y,m.setSelectionRange(y,x,"forward")},updateMaskValue:f,onMaskedKeydown:function(m){if(e("keydown",m),xs(m)===!0||m.altKey===!0)return;const y=n.value,x=y.selectionStart,C=y.selectionEnd;if(m.shiftKey||(u=void 0),m.keyCode===37||m.keyCode===39){m.shiftKey&&u===void 0&&(u=y.selectionDirection==="forward"?x:C);const k=g[(m.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(m.preventDefault(),k(y,u===x?C:x),m.shiftKey){const P=y.selectionStart;y.setSelectionRange(Math.min(u,P),Math.max(u,P),"forward")}}else m.keyCode===8&&t.reverseFillMask!==!0&&x===C?(g.left(y,x),y.setSelectionRange(y.selectionStart,C,"backward")):m.keyCode===46&&t.reverseFillMask===!0&&x===C&&(g.rightReverse(y,C),y.setSelectionRange(x,y.selectionEnd,"forward"))},onMaskedClick:function(m){e("click",m),u=void 0}}}var gI=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,mI=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,vI=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,yI=/[a-z0-9_ -]$/i;function zC(t){return function(e){if(e.type==="compositionend"||e.type==="change"){if(e.target.qComposing!==!0)return;e.target.qComposing=!1,t(e)}else e.type==="compositionupdate"&&e.target.qComposing!==!0&&typeof e.data=="string"&&(ct.is.firefox===!0?yI.test(e.data)===!1:gI.test(e.data)===!0||mI.test(e.data)===!0||vI.test(e.data)===!0)&&(e.target.qComposing=!0)}}var ru=ue({name:"QInput",inheritAttrs:!1,props:{...Kd,...pI,...Tn,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Xd,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:i}){const{proxy:n}=Me(),{$q:r}=n,o={};let s,a,l,u=NaN,c=null;const h=G(null),d=C0(t),{innerValue:p,hasMask:f,moveCursorForPaste:g,updateMaskValue:_,onMaskedKeydown:v,onMaskedClick:b}=fI(t,e,M,h),m=FC(t,!0),y=w(()=>Cs(p.value)),x=zC(T),C=Zd({changeEvent:!0}),k=w(()=>t.type==="textarea"||t.autogrow===!0),P=w(()=>k.value===!0||["text","search","url","tel","password"].includes(t.type)),A=w(()=>{const O={...C.splitAttrs.listeners.value,onInput:T,onPaste:L,onChange:q,onBlur:F,onFocus:Xt};return O.onCompositionstart=O.onCompositionupdate=O.onCompositionend=x,f.value===!0&&(O.onKeydown=v,O.onClick=b),t.autogrow===!0&&(O.onAnimationend=I),O}),E=w(()=>{const O={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:d.value,...C.splitAttrs.attributes.value,id:C.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return k.value===!1&&(O.type=t.type),t.autogrow===!0&&(O.rows=1),O});function L(O){if(f.value===!0&&t.reverseFillMask!==!0){const $=O.target;g($,$.selectionStart,$.selectionEnd)}e("paste",O)}function T(O){if(!O||!O.target)return;if(t.type==="file")return void e("update:modelValue",O.target.files);const $=O.target.value;if(O.target.qComposing!==!0){if(f.value===!0)_($,!1,O.inputType);else if(M($),P.value===!0&&O.target===document.activeElement){const{selectionStart:J,selectionEnd:te}=O.target;J!==void 0&&te!==void 0&&dt(()=>{O.target===document.activeElement&&$.indexOf(O.target.value)===0&&O.target.setSelectionRange(J,te)})}t.autogrow===!0&&R()}else o.value=$}function I(O){e("animationend",O),R()}function M(O,$){l=()=>{c=null,t.type!=="number"&&o.hasOwnProperty("value")===!0&&delete o.value,t.modelValue!==O&&u!==O&&(u=O,$===!0&&(a=!0),e("update:modelValue",O),dt(()=>{u===O&&(u=NaN)})),l=void 0},t.type==="number"&&(s=!0,o.value=O),t.debounce!==void 0?(c!==null&&clearTimeout(c),o.value=O,c=setTimeout(l,t.debounce)):l()}function R(){requestAnimationFrame(()=>{const O=h.value;if(O!==null){const $=O.parentNode.style,{scrollTop:J}=O,{overflowY:te,maxHeight:ie}=r.platform.is.firefox===!0?{}:window.getComputedStyle(O),j=te!==void 0&&te!=="scroll";j===!0&&(O.style.overflowY="hidden"),$.marginBottom=O.scrollHeight-1+"px",O.style.height="1px",O.style.height=O.scrollHeight+"px",j===!0&&(O.style.overflowY=parseInt(ie,10)<O.scrollHeight?"auto":"hidden"),$.marginBottom="",O.scrollTop=J}})}function q(O){x(O),c!==null&&(clearTimeout(c),c=null),l!==void 0&&l(),e("change",O.target.value)}function F(O){O!==void 0&&Xt(O),c!==null&&(clearTimeout(c),c=null),l!==void 0&&l(),s=!1,a=!1,delete o.value,t.type!=="file"&&setTimeout(()=>{h.value!==null&&(h.value.value=p.value!==void 0?p.value:"")})}function B(){return o.hasOwnProperty("value")===!0?o.value:p.value!==void 0?p.value:""}se(()=>t.type,()=>{h.value&&(h.value.value=t.modelValue)}),se(()=>t.modelValue,O=>{if(f.value===!0){if(a===!0&&(a=!1,String(O)===u))return;_(O)}else p.value!==O&&(p.value=O,t.type==="number"&&o.hasOwnProperty("value")===!0&&(s===!0?s=!1:delete o.value));t.autogrow===!0&&dt(R)}),se(()=>t.autogrow,O=>{O===!0?dt(R):h.value!==null&&i.rows>0&&(h.value.style.height="auto")}),se(()=>t.dense,()=>{t.autogrow===!0&&dt(R)}),ht(()=>{F()}),Nt(()=>{t.autogrow===!0&&R()}),Object.assign(C,{innerValue:p,fieldClass:w(()=>"q-"+(k.value===!0?"textarea":"input")+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:w(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:h,emitValue:M,hasValue:y,floatingLabel:w(()=>y.value===!0&&(t.type!=="number"||isNaN(p.value)===!1)||Cs(t.displayValue)),getControl:()=>S(k.value===!0?"textarea":"input",{ref:h,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...E.value,...A.value,...t.type!=="file"?{value:B()}:m.value}),getShadowControl:()=>S("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(k.value===!0?"":" text-no-wrap")},[S("span",{class:"invisible"},B()),S("span",t.shadowText)])});const V=Qd(C);return Object.assign(n,{focus:function(){al(()=>{const O=document.activeElement;h.value===null||h.value===O||O!==null&&O.id===C.targetUid.value||h.value.focus({preventScroll:!0})})},select:function(){h.value!==null&&h.value.select()},getNativeElement:()=>h.value}),vi(n,"nativeEl",()=>h.value),V}}),vb={threshold:0,root:null,rootMargin:"0px"};function yb(t,e,i){let n,r,o;typeof i=="function"?(n=i,r=vb,o=e.cfg===void 0):(n=i.handler,r=Object.assign({},vb,i.cfg),o=e.cfg===void 0||Fn(e.cfg,r)===!1),e.handler!==n&&(e.handler=n),o===!0&&(e.cfg=r,e.observer!==void 0&&e.observer.unobserve(t),e.observer=new IntersectionObserver(([s])=>{if(typeof e.handler=="function"){if(s.rootBounds===null&&document.body.contains(t)===!0)return e.observer.unobserve(t),void e.observer.observe(t);(e.handler(s,e.observer)===!1||e.once===!0&&s.isIntersecting===!0)&&DC(t)}},r),e.observer.observe(t))}function DC(t){const e=t.__qvisible;e!==void 0&&(e.observer!==void 0&&e.observer.unobserve(t),delete t.__qvisible)}var _I=Vn({name:"intersection",mounted(t,{modifiers:e,value:i}){const n={once:e.once===!0};yb(t,n,i),t.__qvisible=n},updated(t,e){const i=t.__qvisible;i!==void 0&&yb(t,i,e.value)},beforeUnmount:DC});ue({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(t,{slots:e,emit:i}){const n=G(wn.value===!0&&t.ssrPrerender),r=w(()=>t.root!==void 0||t.margin!==void 0||t.threshold!==void 0?{handler:l,cfg:{root:t.root,rootMargin:t.margin,threshold:t.threshold}}:l),o=w(()=>t.disable!==!0&&(wn.value!==!0||t.once!==!0||t.ssrPrerender!==!0)),s=w(()=>[[_I,r.value,void 0,{once:t.once}]]),a=w(()=>`--q-transition-duration: ${t.transitionDuration}ms`);function l(c){n.value!==c.isIntersecting&&(n.value=c.isIntersecting,t.onVisibility!==void 0&&i("visibility",n.value))}function u(){return n.value===!0?[S("div",{key:"content",style:a.value},Ne(e.default))]:e.hidden!==void 0?[S("div",{key:"hidden",style:a.value},e.hidden())]:void 0}return()=>{const c=t.transition?[S(mi,{name:"q-transition--"+t.transition},u)]:u();return Cn(t.tag,{class:"q-intersection"},c,"main",o.value,()=>s.value)}}});var bI=["ul","ol"],D0=ue({name:"QList",props:{...mt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:e}){const i=Me(),n=vt(t,i.proxy.$q),r=w(()=>bI.includes(t.tag)?null:"list"),o=w(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(n.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>S(t.tag,{class:o.value,role:r.value},Ne(e.default))}}),_b=[34,37,40,33,39,38],xI=Object.keys(q0);ue({name:"QKnob",props:{...Tn,...q0,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=G(t.modelValue),s=G(!1),a=w(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),l=w(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax);let u;function c(){o.value=t.modelValue===null?a.value:Ft(t.modelValue,a.value,l.value),L(!0)}se(()=>`${t.modelValue}|${a.value}|${l.value}`,c),c();const h=w(()=>t.disable===!1&&t.readonly===!1),d=w(()=>"q-knob non-selectable"+(h.value===!0?" q-knob--editable":t.disable===!0?" disabled":"")),p=w(()=>(String(t.step).trim().split(".")[1]||"").length),f=w(()=>t.step===0?1:t.step),g=w(()=>t.instantFeedback===!0||s.value===!0),_=r.platform.is.mobile===!0?w(()=>h.value===!0?{onClick:k}:{}):w(()=>h.value===!0?{onMousedown:C,onClick:k,onKeydown:P,onKeyup:E}:{}),v=w(()=>h.value===!0?{tabindex:t.tabindex}:{["aria-"+(t.disable===!0?"disabled":"readonly")]:"true"}),b=w(()=>{const M={};return xI.forEach(R=>{M[R]=t[R]}),M});function m(M){M.isFinal?(A(M.evt,!0),s.value=!1):(M.isFirst&&(x(),s.value=!0),A(M.evt))}const y=w(()=>[[bn,m,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function x(){const{top:M,left:R,width:q,height:F}=n.$el.getBoundingClientRect();u={top:M+F/2,left:R+q/2}}function C(M){x(),A(M)}function k(M){x(),A(M,!0)}function P(M){if(!_b.includes(M.keyCode))return;et(M);const R=([34,33].includes(M.keyCode)?10:1)*f.value,q=[34,37,40].includes(M.keyCode)?-R:R;o.value=Ft(parseFloat((o.value+q).toFixed(p.value)),a.value,l.value),L()}function A(M,R){const q=Di(M),F=Math.abs(q.top-u.top),B=Math.sqrt(F**2+Math.abs(q.left-u.left)**2);let V=Math.asin(F/B)*(180/Math.PI);V=q.top<u.top?u.left<q.left?90-V:270+V:u.left<q.left?V+90:270-V,r.lang.rtl===!0?V=sd(-V-t.angle,0,360):t.angle&&(V=sd(V-t.angle,0,360)),t.reverse===!0&&(V=360-V);let O=t.min+V/360*(t.max-t.min);if(f.value!==0){const $=O%f.value;O=O-$+(Math.abs($)>=f.value/2?($<0?-1:1)*f.value:0),O=parseFloat(O.toFixed(p.value))}O=Ft(O,a.value,l.value),i("dragValue",O),o.value!==O&&(o.value=O),L(R)}function E(M){_b.includes(M.keyCode)&&L(!0)}function L(M){t.modelValue!==o.value&&i("update:modelValue",o.value),M===!0&&i("change",o.value)}const T=tc(t);function I(){return S("input",T.value)}return()=>{const M={class:d.value,role:"slider","aria-valuemin":a.value,"aria-valuemax":l.value,"aria-valuenow":t.modelValue,...v.value,...b.value,value:o.value,instantFeedback:g.value,..._.value},R={default:e.default};return h.value===!0&&t.name!==void 0&&(R.internal=I),Cn(rC,M,R,"knob",h.value,()=>y.value)}}});var{passive:bb}=Dt,wI=["both","horizontal","vertical"],NC=ue({name:"QScrollObserver",props:{axis:{type:String,validator:t=>wI.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:Ps},emits:["scroll"],setup(t,{emit:e}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n,r,o=null;function s(){o!==null&&o();const h=Math.max(0,_o(n)),d=Ud(n),p={top:h-i.position.top,left:d-i.position.left};if(t.axis==="vertical"&&p.top===0||t.axis==="horizontal"&&p.left===0)return;const f=Math.abs(p.top)>=Math.abs(p.left)?p.top<0?"up":"down":p.left<0?"left":"right";i.position={top:h,left:d},i.directionChanged=i.direction!==f,i.delta=p,i.directionChanged===!0&&(i.direction=f,i.inflectionPoint=i.position),e("scroll",{...i})}function a(){n=mr(r,t.scrollTarget),n.addEventListener("scroll",u,bb),u(!0)}function l(){n!==void 0&&(n.removeEventListener("scroll",u,bb),n=void 0)}function u(h){if(h===!0||t.debounce===0||t.debounce==="0")s();else if(o===null){const[d,p]=t.debounce?[setTimeout(s,t.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];o=()=>{p(d),o=null}}}se(()=>t.scrollTarget,()=>{l(),a()});const{proxy:c}=Me();return se(()=>c.$q.lang.rtl,s),Nt(()=>{r=c.$el.parentNode,a()}),ht(()=>{o!==null&&o(),l()}),Object.assign(c,{trigger:u,getPosition:()=>i}),hi}});ue({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=G(null),o=G(n.screen.height),s=G(t.container===!0?0:n.screen.width),a=G({position:0,direction:"down",inflectionPoint:0}),l=G(0),u=G(wn.value===!0?0:xh()),c=w(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),h=w(()=>t.container===!1?{minHeight:n.screen.height+"px"}:null),d=w(()=>u.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),p=w(()=>u.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function f(y){if(t.container===!0||document.qScrollPrevented!==!0){const x={position:y.position.top,direction:y.direction,directionChanged:y.directionChanged,inflectionPoint:y.inflectionPoint.top,delta:y.delta.top};a.value=x,t.onScroll!==void 0&&i("scroll",x)}}function g(y){const{height:x,width:C}=y;let k=!1;o.value!==x&&(k=!0,o.value=x,t.onScrollHeight!==void 0&&i("scrollHeight",x),v()),s.value!==C&&(k=!0,s.value=C),k===!0&&t.onResize!==void 0&&i("resize",y)}function _({height:y}){l.value!==y&&(l.value=y,v())}function v(){if(t.container===!0){const y=o.value>l.value?xh():0;u.value!==y&&(u.value=y)}}let b=null;const m={instances:{},view:w(()=>t.view),isContainer:w(()=>t.container),rootRef:r,height:o,containerHeight:l,scrollbarWidth:u,totalWidth:w(()=>s.value+u.value),rows:w(()=>{const y=t.view.toLowerCase().split(" ");return{top:y[0].split(""),middle:y[1].split(""),bottom:y[2].split("")}}),header:eo({size:0,offset:0,space:!1}),right:eo({size:300,offset:0,space:!1}),footer:eo({size:0,offset:0,space:!1}),left:eo({size:300,offset:0,space:!1}),scroll:a,animate(){b!==null?clearTimeout(b):document.body.classList.add("q-body--layout-animate"),b=setTimeout(()=>{b=null,document.body.classList.remove("q-body--layout-animate")},155)},update(y,x,C){m[y][x]=C}};if(ko(ws,m),xh()>0){let y=function(){k=null,P.classList.remove("hide-scrollbar")},x=function(){if(k===null){if(P.scrollHeight>n.screen.height)return;P.classList.add("hide-scrollbar")}else clearTimeout(k);k=setTimeout(y,300)},C=function(A){k!==null&&A==="remove"&&(clearTimeout(k),y()),window[`${A}EventListener`]("resize",x)},k=null;const P=document.body;se(()=>t.container!==!0?"add":"remove",C),t.container!==!0&&C("add"),Lx(()=>{C("remove")})}return()=>{const y=ni(e.default,[S(NC,{onScroll:f}),S(Ss,{onResize:g})]),x=S("div",{class:c.value,style:h.value,ref:t.container===!0?void 0:r,tabindex:-1},y);return t.container===!0?S("div",{class:"q-layout-container overflow-hidden",ref:r},[S(Ss,{onResize:_}),S("div",{class:"absolute-full",style:d.value},[S("div",{class:"scroll",style:p.value},[x])])]):x}}});var SI=["horizontal","vertical","cell","none"],CI=ue({name:"QMarkupTable",props:{...mt,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:t=>SI.includes(t)}},setup(t,{slots:e}){const i=Me(),n=vt(t,i.proxy.$q),r=w(()=>`q-markup-table q-table__container q-table__card q-table--${t.separator}-separator`+(n.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(t.dense===!0?" q-table--dense":"")+(t.flat===!0?" q-table--flat":"")+(t.bordered===!0?" q-table--bordered":"")+(t.square===!0?" q-table--square":"")+(t.wrapCells===!1?" q-table--no-wrap":""));return()=>S("div",{class:r.value},[S("table",{class:"q-table"},Ne(e.default))])}});ue({name:"QNoSsr",props:{tag:{type:String,default:"div"},placeholder:String},setup(t,{slots:e}){const{isHydrated:i}=lC();return()=>{if(i.value===!0){const o=Ne(e.default);return o===void 0?o:o.length>1?S(t.tag,{},o):o[0]}const n={class:"q-no-ssr-placeholder"},r=Ne(e.placeholder);return r!==void 0?r.length>1?S(t.tag,n,r):r[0]:t.placeholder!==void 0?S(t.tag,n,t.placeholder):void 0}}});var MI=ue({name:"QRadio",props:{...mt,...Br,...Tn,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),r=vt(t,n.$q),o=jr(t,QS),s=G(null),{refocusTargetEl:a,refocusTarget:l}=ZS(t,s),u=w(()=>Zn(t.modelValue)===Zn(t.val)),c=w(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(r.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),h=w(()=>{const m=t.color===void 0||t.keepColor!==!0&&u.value!==!0?"":` text-${t.color}`;return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${m}`}),d=w(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),p=w(()=>t.disable===!0?-1:t.tabindex||0),f=Io(w(()=>{const m={type:"radio"};return t.name!==void 0&&Object.assign(m,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),m}));function g(m){m!==void 0&&(et(m),l(m)),t.disable!==!0&&u.value!==!0&&i("update:modelValue",t.val,m)}function _(m){m.keyCode!==13&&m.keyCode!==32||et(m)}function v(m){m.keyCode!==13&&m.keyCode!==32||g(m)}Object.assign(n,{set:g});const b=S("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[S("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),S("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);return()=>{const m=d.value!==null?[S("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[S(_t,{class:"q-radio__icon",name:d.value})])]:[b];t.disable!==!0&&f(m,"unshift"," q-radio__native q-ma-none q-pa-none");const y=[S("div",{class:h.value,style:o.value,"aria-hidden":"true"},m)];a.value!==null&&y.push(a.value);const x=t.label!==void 0?ni(e.default,[t.label]):Ne(e.default);return x!==void 0&&y.push(S("div",{class:"q-radio__label q-anchor--skip"},x)),S("div",{ref:s,class:c.value,tabindex:p.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:g,onKeydown:_,onKeyup:v},y)}}}),kI=ue({name:"QToggle",props:{...JS,icon:String,iconColor:String},emits:eC,setup:t=>tC("toggle",function(e,i){const n=w(()=>(e.value===!0?t.checkedIcon:i.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),r=w(()=>e.value===!0?t.iconColor:null);return()=>[S("div",{class:"q-toggle__track"}),S("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[S(_t,{name:n.value,color:r.value})]:void 0)]})}),BC={radio:MI,checkbox:nu,toggle:kI},TI=Object.keys(BC);function Mf(t,e){if(typeof t=="function")return t;const i=t!==void 0?t:e;return n=>n[i]}var EI=ue({name:"QOptionGroup",props:{...mt,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(Ei),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:t=>TI.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:i}){const{proxy:{$q:n}}=Me(),r=Array.isArray(t.modelValue);t.type;const o=vt(t,n),s=w(()=>BC[t.type]),a=w(()=>Mf(t.optionValue,"value")),l=w(()=>Mf(t.optionLabel,"label")),u=w(()=>Mf(t.optionDisable,"disable")),c=w(()=>t.options.map(f=>({val:a.value(f),name:f.name===void 0?t.name:f.name,disable:t.disable||u.value(f),leftLabel:f.leftLabel===void 0?t.leftLabel:f.leftLabel,color:f.color===void 0?t.color:f.color,checkedIcon:f.checkedIcon,uncheckedIcon:f.uncheckedIcon,dark:f.dark===void 0?o.value:f.dark,size:f.size===void 0?t.size:f.size,dense:t.dense,keepColor:f.keepColor===void 0?t.keepColor:f.keepColor}))),h=w(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),d=w(()=>{const f={role:"group"};return t.type==="radio"&&(f.role="radiogroup",t.disable===!0&&(f["aria-disabled"]="true")),f});function p(f){e("update:modelValue",f)}return()=>S("div",{class:h.value,...d.value},t.options.map((f,g)=>{const _=i["label-"+g]!==void 0?()=>i["label-"+g](f):i.label!==void 0?()=>i.label(f):void 0;return S("div",[S(s.value,{label:_===void 0?l.value(f):null,modelValue:t.modelValue,"onUpdate:modelValue":p,...c.value[g]},_)])}))}});ue({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=Xi(ws,Mt);if(n===Mt||Xi(k_,Mt)===Mt)return Mt;const r=w(()=>{const s=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof t.styleFn=="function"){const a=n.isContainer.value===!0?n.containerHeight.value:i.screen.height;return t.styleFn(s,a)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-s+"px":i.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":i.screen.height-s+"px"}}),o=w(()=>"q-page"+(t.padding===!0?" q-layout-padding":""));return()=>S("main",{class:o.value,style:r.value},Ne(e.default))}}),ue({name:"QPageContainer",setup(t,{slots:e}){const{proxy:{$q:i}}=Me(),n=Xi(ws,Mt);if(n===Mt)return Mt;ko(k_,!0);const r=w(()=>{const o={};return n.header.space===!0&&(o.paddingTop=`${n.header.size}px`),n.right.space===!0&&(o["padding"+(i.lang.rtl===!0?"Left":"Right")]=`${n.right.size}px`),n.footer.space===!0&&(o.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(o["padding"+(i.lang.rtl===!0?"Right":"Left")]=`${n.left.size}px`),o});return()=>S("div",{class:"q-page-container",style:r.value},Ne(e.default))}});var kf={position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,validator:t=>t.length===2},expand:Boolean};function xb(){const{props:t,proxy:{$q:e}}=Me(),i=Xi(ws,Mt);if(i===Mt)return Mt;const n=w(()=>{const c=t.position;return{top:c.indexOf("top")!==-1,right:c.indexOf("right")!==-1,bottom:c.indexOf("bottom")!==-1,left:c.indexOf("left")!==-1,vertical:c==="top"||c==="bottom",horizontal:c==="left"||c==="right"}}),r=w(()=>i.header.offset),o=w(()=>i.right.offset),s=w(()=>i.footer.offset),a=w(()=>i.left.offset),l=w(()=>{let c=0,h=0;const d=n.value,p=e.lang.rtl===!0?-1:1;d.top===!0&&r.value!==0?h=`${r.value}px`:d.bottom===!0&&s.value!==0&&(h=-s.value+"px"),d.left===!0&&a.value!==0?c=p*a.value+"px":d.right===!0&&o.value!==0&&(c=-p*o.value+"px");const f={transform:`translate(${c}, ${h})`};return t.offset&&(f.margin=`${t.offset[1]}px ${t.offset[0]}px`),d.vertical===!0?(a.value!==0&&(f[e.lang.rtl===!0?"right":"left"]=`${a.value}px`),o.value!==0&&(f[e.lang.rtl===!0?"left":"right"]=`${o.value}px`)):d.horizontal===!0&&(r.value!==0&&(f.top=`${r.value}px`),s.value!==0&&(f.bottom=`${s.value}px`)),f}),u=w(()=>`q-page-sticky row flex-center fixed-${t.position} q-page-sticky--${t.expand===!0?"expand":"shrink"}`);return{$layout:i,getStickyContent:function(c){const h=Ne(c.default);return S("div",{class:u.value,style:l.value},t.expand===!0?h:[S("div",h)])}}}function Kc(t,e){return[!0,!1].includes(t)?t:e}function Tf(t){let e,i,n=!1;function r(){i=arguments,n!==!0&&(n=!0,e=window.requestAnimationFrame(()=>{t.apply(this,i),i=void 0,n=!1}))}return r.cancel=()=>{window.cancelAnimationFrame(e),n=!1},r}ue({name:"QPageScroller",props:{...kf,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{...kf.offset,default:()=>[18,18]}},emits:["click"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),{$layout:r,getStickyContent:o}=xb(),s=G(null);let a;const l=w(()=>r.height.value-(r.isContainer.value===!0?r.containerHeight.value:n.screen.height));function u(){return t.reverse===!0?l.value-r.scroll.value.position>t.scrollOffset:r.scroll.value.position>t.scrollOffset}const c=G(u());function h(){const _=u();c.value!==_&&(c.value=_)}function d(){t.reverse===!0?a===void 0&&(a=se(l,h)):p()}function p(){a!==void 0&&(a(),a=void 0)}function f(_){Sa(mr(r.isContainer.value===!0?s.value:r.rootRef.value),t.reverse===!0?r.height.value:0,t.duration),i("click",_)}function g(){return c.value===!0?S("div",{ref:s,class:"q-page-scroller",onClick:f},o(e)):null}return se(r.scroll,h),se(()=>t.reverse,d),d(),ht(p),()=>S(mi,{name:"q-transition--fade"},g)}}),ue({name:"QPageSticky",props:kf,setup(t,{slots:e}){const{getStickyContent:i}=xb();return()=>i(e)}}),ue({name:"QPagination",props:{...mt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:t=>(typeof t=="string"?parseInt(t,10):t)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:t=>t===""||qS.includes(t)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(t,{emit:e}){const{proxy:i}=Me(),{$q:n}=i,r=vt(t,n),o=w(()=>parseInt(t.min,10)),s=w(()=>parseInt(t.max,10)),a=w(()=>parseInt(t.maxPages,10)),l=w(()=>f.value+" / "+s.value),u=w(()=>Kc(t.boundaryLinks,t.input)),c=w(()=>Kc(t.boundaryNumbers,!t.input)),h=w(()=>Kc(t.directionLinks,t.input)),d=w(()=>Kc(t.ellipses,!t.input)),p=G(null),f=w({get:()=>t.modelValue,set:T=>{if(T=parseInt(T,10),t.disable||isNaN(T))return;const I=Ft(T,o.value,s.value);t.modelValue!==I&&e("update:modelValue",I)}});se(()=>`${o.value}|${s.value}`,()=>{f.value=t.modelValue});const g=w(()=>"q-pagination row no-wrap items-center"+(t.disable===!0?" disabled":"")),_=w(()=>t.gutter in ld?`${ld[t.gutter]}px`:t.gutter||null),v=w(()=>_.value!==null?`--q-pagination-gutter-parent:-${_.value};--q-pagination-gutter-child:${_.value}`:null),b=w(()=>{const T=[t.iconFirst||n.iconSet.pagination.first,t.iconPrev||n.iconSet.pagination.prev,t.iconNext||n.iconSet.pagination.next,t.iconLast||n.iconSet.pagination.last];return n.lang.rtl===!0?T.reverse():T}),m=w(()=>({"aria-disabled":t.disable===!0?"true":"false",role:"navigation"})),y=w(()=>y0(t,"flat")),x=w(()=>({[y.value]:!0,round:t.round,rounded:t.rounded,padding:t.padding,color:t.color,textColor:t.textColor,size:t.size,ripple:t.ripple===null||t.ripple})),C=w(()=>{const T={[y.value]:!1};return t.activeDesign!==""&&(T[t.activeDesign]=!0),T}),k=w(()=>({...C.value,color:t.activeColor||t.color,textColor:t.activeTextColor||t.textColor})),P=w(()=>{let T=Math.max(a.value,1+(d.value?2:0)+(c.value?2:0));const I={pgFrom:o.value,pgTo:s.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(s.value).length)}em`}};return a.value&&T<s.value-o.value+1&&(T=1+2*Math.floor(T/2),I.pgFrom=Math.max(o.value,Math.min(s.value-T+1,t.modelValue-Math.floor(T/2))),I.pgTo=Math.min(s.value,I.pgFrom+T-1),c.value&&(I.boundaryStart=!0,I.pgFrom++),d.value&&I.pgFrom>o.value+(c.value?1:0)&&(I.ellipsesStart=!0,I.pgFrom++),c.value&&(I.boundaryEnd=!0,I.pgTo--),d.value&&I.pgTo<s.value-(c.value?1:0)&&(I.ellipsesEnd=!0,I.pgTo--)),I});function A(T){f.value=T}const E=w(()=>{function T(){f.value=p.value,p.value=null}return{"onUpdate:modelValue":I=>{p.value=I},onKeyup:I=>{Sn(I,13)===!0&&T()},onBlur:T}});function L(T,I,M){const R={"aria-label":I,"aria-current":"false",...x.value,...T};return M===!0&&Object.assign(R,{"aria-current":"true",...k.value}),I!==void 0&&(t.toFn!==void 0?R.to=t.toFn(I):R.onClick=()=>{A(I)}),S(xt,R)}return Object.assign(i,{set:A,setByOffset:function(T){f.value=f.value+T}}),()=>{const T=[],I=[];let M;if(u.value===!0&&(T.push(L({key:"bls",disable:t.disable||t.modelValue<=o.value,icon:b.value[0]},o.value)),I.unshift(L({key:"ble",disable:t.disable||t.modelValue>=s.value,icon:b.value[3]},s.value))),h.value===!0&&(T.push(L({key:"bdp",disable:t.disable||t.modelValue<=o.value,icon:b.value[1]},t.modelValue-1)),I.unshift(L({key:"bdn",disable:t.disable||t.modelValue>=s.value,icon:b.value[2]},t.modelValue+1))),t.input!==!0){M=[];const{pgFrom:R,pgTo:q,marginalStyle:F}=P.value;if(P.value.boundaryStart===!0){const B=o.value===t.modelValue;T.push(L({key:"bns",style:F,disable:t.disable,label:o.value},o.value,B))}if(P.value.boundaryEnd===!0){const B=s.value===t.modelValue;I.unshift(L({key:"bne",style:F,disable:t.disable,label:s.value},s.value,B))}P.value.ellipsesStart===!0&&T.push(L({key:"bes",style:F,disable:t.disable,label:"…",ripple:!1},R-1)),P.value.ellipsesEnd===!0&&I.unshift(L({key:"bee",style:F,disable:t.disable,label:"…",ripple:!1},q+1));for(let B=R;B<=q;B++)M.push(L({key:`bpg${B}`,style:F,disable:t.disable,label:B},B,B===t.modelValue))}return S("div",{class:g.value,...m.value},[S("div",{class:"q-pagination__content row no-wrap items-center",style:v.value},[...T,t.input===!0?S(ru,{class:"inline",style:{width:l.value.length/1.5+"em"},type:"number",dense:!0,value:p.value,disable:t.disable,dark:r.value,borderless:!0,inputClass:t.inputClass,inputStyle:t.inputStyle,placeholder:l.value,min:o.value,max:s.value,...E.value}):S("div",{class:"q-pagination__middle row justify-center"},M),...I])])}}});var{passive:Xc}=Dt;function ou(t,e=new WeakMap){if(Object(t)!==t)return t;if(e.has(t))return e.get(t);const i=t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):t instanceof Set?new Set:t instanceof Map?new Map:typeof t.constructor!="function"?Object.create(null):t.prototype!==void 0&&typeof t.prototype.constructor=="function"?t:new t.constructor;if(typeof t.constructor=="function"&&typeof t.valueOf=="function"){const n=t.valueOf();if(Object(n)!==n){const r=new t.constructor(n);return e.set(t,r),r}}return e.set(t,i),t instanceof Set?t.forEach(n=>{i.add(ou(n,e))}):t instanceof Map&&t.forEach((n,r)=>{i.set(r,ou(n,e))}),Object.assign(i,...Object.keys(t).map(n=>({[n]:ou(t[n],e)})))}ue({name:"QParallax",props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:t=>t>=0&&t<=1},scrollTarget:Ps,onScroll:Function},setup(t,{slots:e,emit:i}){const n=G(0),r=G(null),o=G(null),s=G(null);let a,l,u,c,h,d;se(()=>t.height,()=>{a===!0&&f()}),se(()=>t.scrollTarget,()=>{a===!0&&(b(),v())});let p=m=>{n.value=m,t.onScroll!==void 0&&i("scroll",m)};function f(){let m,y,x;d===window?(m=0,x=y=window.innerHeight):(m=ad(d).top,y=$a(d),x=m+y);const C=ad(r.value).top,k=C+t.height;if(h!==void 0||k>m&&C<x){const P=(x-C)/(t.height+y);g((u-t.height)*P*t.speed),p(P)}}let g=m=>{l.style.transform=`translate3d(-50%,${Math.round(m)}px,0)`};function _(){u=l.naturalHeight||l.videoHeight||$a(l),a===!0&&f()}function v(){a=!0,d=mr(r.value,t.scrollTarget),d.addEventListener("scroll",f,Xc),window.addEventListener("resize",c,Xc),f()}function b(){a===!0&&(a=!1,d.removeEventListener("scroll",f,Xc),window.removeEventListener("resize",c,Xc),d=void 0,g.cancel(),p.cancel(),c.cancel())}return Nt(()=>{g=Tf(g),p=Tf(p),c=Tf(_),l=e.media!==void 0?o.value.children[0]:s.value,l.onload=l.onloadstart=l.loadedmetadata=_,_(),l.style.display="initial",window.IntersectionObserver!==void 0?(h=new IntersectionObserver(m=>{(m[0].isIntersecting===!0?v:b)()}),h.observe(r.value)):v()}),ht(()=>{b(),h!==void 0&&h.disconnect(),l.onload=l.onloadstart=l.loadedmetadata=null}),()=>S("div",{ref:r,class:"q-parallax",style:{height:`${t.height}px`}},[S("div",{ref:o,class:"q-parallax__media absolute-full"},e.media!==void 0?e.media():[S("img",{ref:s,src:t.src})]),S("div",{class:"q-parallax__content absolute-full column flex-center"},e.content!==void 0?e.content({percentScrolled:n.value}):Ne(e.default))])}});var LI=ue({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=G(null),s=G(""),a=G("");let l=!1;const u=w(()=>vi({initialValue:s.value,validate:t.validate,set:c,cancel:h,updatePosition:d},"value",()=>a.value,y=>{a.value=y}));function c(){t.validate(a.value)!==!1&&(p()===!0&&(i("save",a.value,s.value),i("update:modelValue",a.value)),f())}function h(){p()===!0&&i("cancel",a.value,s.value),f()}function d(){dt(()=>{o.value.updatePosition()})}function p(){return Fn(a.value,s.value)===!1}function f(){l=!0,o.value.hide()}function g(){l=!1,s.value=ou(t.modelValue),a.value=ou(t.modelValue),i("beforeShow")}function _(){i("show")}function v(){l===!1&&p()===!0&&(t.autoSave===!0&&t.validate(a.value)===!0?(i("save",a.value,s.value),i("update:modelValue",a.value)):i("cancel",a.value,s.value)),i("beforeHide")}function b(){i("hide")}function m(){const y=e.default!==void 0?[].concat(e.default(u.value)):[];return t.title&&y.unshift(S("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},t.title)),t.buttons===!0&&y.push(S("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[S(xt,{flat:!0,color:t.color,label:t.labelCancel||r.lang.label.cancel,onClick:h}),S(xt,{flat:!0,color:t.color,label:t.labelSet||r.lang.label.set,onClick:c})])),y}return Object.assign(n,{set:c,cancel:h,show(y){o.value!==null&&o.value.show(y)},hide(y){o.value!==null&&o.value.hide(y)},updatePosition:d}),()=>{if(t.disable!==!0)return S(ll,{ref:o,class:"q-popup-edit",cover:t.cover,onBeforeShow:g,onShow:_,onBeforeHide:v,onHide:b,onEscapeKey:h},m)}}}),PI=ue({name:"QPopupProxy",props:{...zS,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:e,emit:i,attrs:n}){const{proxy:r}=Me(),{$q:o}=r,s=G(!1),a=G(null),l=w(()=>parseInt(t.breakpoint,10)),{canShow:u}=b0({showing:s});function c(){return o.screen.width<l.value||o.screen.height<l.value?"dialog":"menu"}const h=G(c()),d=w(()=>h.value==="menu"?{maxHeight:"99vh"}:{});function p(g){s.value=!0,i("show",g)}function f(g){s.value=!1,h.value=c(),i("hide",g)}return se(()=>c(),g=>{s.value!==!0&&(h.value=g)}),Object.assign(r,{show(g){u(g)===!0&&a.value.show(g)},hide(g){a.value.hide(g)},toggle(g){a.value.toggle(g)}}),vi(r,"currentComponent",()=>({type:h.value,ref:a.value})),()=>{const g={ref:a,...d.value,...n,onShow:p,onHide:f};let _;return h.value==="dialog"?_=Yd:(_=ll,Object.assign(g,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),S(_,g,e.default)}}}),II={xs:2,sm:4,md:6,lg:10,xl:14};function wb(t,e,i){return{transform:e===!0?`translateX(${i.lang.rtl===!0?"-":""}100%) scale3d(${-t},1,1)`:`scale3d(${t},1,1)`}}var RI=ue({name:"QLinearProgress",props:{...mt,...Br,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(t,{slots:e}){const{proxy:i}=Me(),n=vt(t,i.$q),r=jr(t,II),o=w(()=>t.indeterminate===!0||t.query===!0),s=w(()=>t.reverse!==t.query),a=w(()=>({...r.value!==null?r.value:{},"--q-linear-progress-speed":`${t.animationSpeed}ms`})),l=w(()=>"q-linear-progress"+(t.color!==void 0?` text-${t.color}`:"")+(t.reverse===!0||t.query===!0?" q-linear-progress--reverse":"")+(t.rounded===!0?" rounded-borders":"")),u=w(()=>wb(t.buffer!==void 0?t.buffer:1,s.value,i.$q)),c=w(()=>`with${t.instantFeedback===!0?"out":""}-transition`),h=w(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${c.value} q-linear-progress__track--${n.value===!0?"dark":"light"}`+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),d=w(()=>wb(o.value===!0?1:t.value,s.value,i.$q)),p=w(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${c.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),f=w(()=>({width:100*t.value+"%"})),g=w(()=>`q-linear-progress__stripe absolute-${t.reverse===!0?"right":"left"} q-linear-progress__stripe--${c.value}`);return()=>{const _=[S("div",{class:h.value,style:u.value}),S("div",{class:p.value,style:d.value})];return t.stripe===!0&&o.value===!1&&_.push(S("div",{class:g.value,style:f.value})),S("div",{class:l.value,style:a.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.indeterminate===!0?void 0:t.value},ni(e.default,_))}}}),qI=40;ue({name:"QPullToRefresh",props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:Ps},emits:["refresh"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=G("pull"),s=G(0),a=G(!1),l=G(-40),u=G(!1),c=G({}),h=w(()=>({opacity:s.value,transform:`translateY(${l.value}px) rotate(${360*s.value}deg)`})),d=w(()=>"q-pull-to-refresh__puller row flex-center"+(u.value===!0?" q-pull-to-refresh__puller--animating":"")+(t.bgColor!==void 0?` bg-${t.bgColor}`:""));function p(C){if(C.isFinal===!0)return void(a.value===!0&&(a.value=!1,o.value==="pulled"?(o.value="refreshing",y({pos:20}),_()):o.value==="pull"&&y({pos:-40,ratio:0})));if(u.value===!0||o.value==="refreshing")return!1;if(C.isFirst===!0){if(_o(b)!==0||C.direction!=="down")return a.value===!0&&(a.value=!1,o.value="pull",y({pos:-40,ratio:0})),!1;a.value=!0;const{top:A,left:E}=v.getBoundingClientRect();c.value={top:A+"px",left:E+"px",width:window.getComputedStyle(v).getPropertyValue("width")}}yi(C.evt);const k=Math.min(140,Math.max(0,C.distance.y));l.value=k-qI,s.value=Ft(k/60,0,1);const P=l.value>20?"pulled":"pull";o.value!==P&&(o.value=P)}const f=w(()=>{const C={down:!0};return t.noMouse!==!0&&(C.mouse=!0),[[bn,p,void 0,C]]}),g=w(()=>"q-pull-to-refresh__content"+(a.value===!0?" no-pointer-events":""));function _(){i("refresh",()=>{y({pos:-40,ratio:0},()=>{o.value="pull"})})}let v,b,m=null;function y({pos:C,ratio:k},P){u.value=!0,l.value=C,k!==void 0&&(s.value=k),m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,u.value=!1,P&&P()},300)}function x(){b=mr(v,t.scrollTarget)}return se(()=>t.scrollTarget,x),Nt(()=>{v=n.$el,x()}),ht(()=>{m!==null&&clearTimeout(m)}),Object.assign(n,{trigger:_,updateScrollTarget:x}),()=>Cn("div",{class:"q-pull-to-refresh"},[S("div",{class:g.value},Ne(e.default)),S("div",{class:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:c.value},[S("div",{class:d.value,style:h.value},[o.value!=="refreshing"?S(_t,{name:t.icon||r.iconSet.pullToRefresh.icon,color:t.color,size:"32px"}):S(Un,{size:"24px",color:t.color})])])],"main",t.disable===!1,()=>f.value)}});var Ef=0,Sb=1,Lf=2;ue({name:"QRange",props:{...oC,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:t=>"min"in t&&"max"in t},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:sC,setup(t,{emit:e}){const{proxy:{$q:i}}=Me(),{state:n,methods:r}=aC({updateValue:P,updatePosition:function(E,L=n.dragging.value){let T;const I=r.getDraggingRatio(E,L),M=r.convertRatioToModel(I);switch(L.type){case Ef:I<=L.ratioMax?(T={minR:I,maxR:L.ratioMax,min:M,max:L.valueMax},n.focus.value="min"):(T={minR:L.ratioMax,maxR:I,min:L.valueMax,max:M},n.focus.value="max");break;case Lf:I>=L.ratioMin?(T={minR:L.ratioMin,maxR:I,min:L.valueMin,max:M},n.focus.value="max"):(T={minR:I,maxR:L.ratioMin,min:M,max:L.valueMin},n.focus.value="min");break;case Sb:const R=I-L.offsetRatio,q=Ft(L.ratioMin+R,n.innerMinRatio.value,n.innerMaxRatio.value-L.rangeRatio),F=M-L.offsetModel,B=Ft(L.valueMin+F,n.innerMin.value,n.innerMax.value-L.rangeValue);T={minR:q,maxR:q+L.rangeRatio,min:n.roundValueFn.value(B),max:n.roundValueFn.value(B+L.rangeValue)},n.focus.value="both"}l.value=l.value.min===null||l.value.max===null?{min:T.min||t.min,max:T.max||t.max}:{min:T.min,max:T.max},t.snap!==!0||t.step===0?(s.value=T.minR,a.value=T.maxR):(s.value=r.convertModelToRatio(l.value.min),a.value=r.convertModelToRatio(l.value.max))},getDragging:function(E){const{left:L,top:T,width:I,height:M}=o.value.getBoundingClientRect(),R=t.dragOnlyRange===!0?0:t.vertical===!0?m.value.offsetHeight/(2*M):m.value.offsetWidth/(2*I),q={left:L,top:T,width:I,height:M,valueMin:l.value.min,valueMax:l.value.max,ratioMin:c.value,ratioMax:h.value},F=r.getDraggingRatio(E,q);return t.dragOnlyRange!==!0&&F<q.ratioMin+R?q.type=Ef:t.dragOnlyRange===!0||F<q.ratioMax-R?t.dragRange===!0||t.dragOnlyRange===!0?(q.type=Sb,Object.assign(q,{offsetRatio:F,offsetModel:r.convertRatioToModel(F),rangeValue:q.valueMax-q.valueMin,rangeRatio:q.ratioMax-q.ratioMin})):q.type=q.ratioMax-F<F-q.ratioMin?Lf:Ef:q.type=Lf,q},formAttrs:w(()=>({type:"hidden",name:t.name,value:`${t.modelValue.min}|${t.modelValue.max}`}))}),o=G(null),s=G(0),a=G(0),l=G({min:0,max:0});function u(){l.value.min=t.modelValue.min===null?n.innerMin.value:Ft(t.modelValue.min,n.innerMin.value,n.innerMax.value),l.value.max=t.modelValue.max===null?n.innerMax.value:Ft(t.modelValue.max,n.innerMin.value,n.innerMax.value)}se(()=>`${t.modelValue.min}|${t.modelValue.max}|${n.innerMin.value}|${n.innerMax.value}`,u),u();const c=w(()=>r.convertModelToRatio(l.value.min)),h=w(()=>r.convertModelToRatio(l.value.max)),d=w(()=>n.active.value===!0?s.value:c.value),p=w(()=>n.active.value===!0?a.value:h.value),f=w(()=>{const E={[n.positionProp.value]:100*d.value+"%",[n.sizeProp.value]:100*(p.value-d.value)+"%"};return t.selectionImg!==void 0&&(E.backgroundImage=`url(${t.selectionImg}) !important`),E}),g=w(()=>{if(n.editable.value!==!0)return{};if(i.platform.is.mobile===!0)return{onClick:r.onMobileClick};const E={onMousedown:r.onActivate};return t.dragRange!==!0&&t.dragOnlyRange!==!0||Object.assign(E,{onFocus:()=>{n.focus.value="both"},onBlur:r.onBlur,onKeydown:A,onKeyup:r.onKeyup}),E});function _(E){return i.platform.is.mobile!==!0&&n.editable.value===!0&&t.dragOnlyRange!==!0?{onFocus:()=>{n.focus.value=E},onBlur:r.onBlur,onKeydown:A,onKeyup:r.onKeyup}:{}}const v=w(()=>t.dragOnlyRange!==!0?n.tabindex.value:null),b=w(()=>i.platform.is.mobile===!0||!t.dragRange&&t.dragOnlyRange!==!0?null:n.tabindex.value),m=G(null),y=w(()=>_("min")),x=r.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:m,key:"tmin",...y.value,tabindex:v.value}),ratio:d,label:w(()=>t.leftLabelValue!==void 0?t.leftLabelValue:l.value.min),thumbColor:w(()=>t.leftThumbColor||t.thumbColor||t.color),labelColor:w(()=>t.leftLabelColor||t.labelColor),labelTextColor:w(()=>t.leftLabelTextColor||t.labelTextColor)}),C=w(()=>_("max")),k=r.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...C.value,key:"tmax",tabindex:v.value}),ratio:p,label:w(()=>t.rightLabelValue!==void 0?t.rightLabelValue:l.value.max),thumbColor:w(()=>t.rightThumbColor||t.thumbColor||t.color),labelColor:w(()=>t.rightLabelColor||t.labelColor),labelTextColor:w(()=>t.rightLabelTextColor||t.labelTextColor)});function P(E){l.value.min===t.modelValue.min&&l.value.max===t.modelValue.max||e("update:modelValue",{...l.value}),E===!0&&e("change",{...l.value})}function A(E){if(!A0.includes(E.keyCode))return;et(E);const L=([34,33].includes(E.keyCode)?10:1)*n.keyStep.value,T=([34,37,40].includes(E.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*L;if(n.focus.value==="both"){const I=l.value.max-l.value.min,M=Ft(n.roundValueFn.value(l.value.min+T),n.innerMin.value,n.innerMax.value-I);l.value={min:M,max:n.roundValueFn.value(M+I)}}else{if(n.focus.value===!1)return;{const I=n.focus.value;l.value={...l.value,[I]:Ft(n.roundValueFn.value(l.value[I]+T),I==="min"?n.innerMin.value:l.value.min,I==="max"?n.innerMax.value:l.value.max)}}}P()}return()=>{const E=r.getContent(f,b,g,L=>{L.push(x(),k())});return S("div",{ref:o,class:"q-range "+n.classes.value+(t.modelValue.min===null||t.modelValue.max===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":t.modelValue.min+"|"+t.modelValue.max},E)}}}),ue({name:"QRating",props:{...Br,...Tn,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=jr(t),o=Io(tc(t)),s=G(0);let a={};const l=w(()=>t.readonly!==!0&&t.disable!==!0),u=w(()=>`q-rating row inline items-center q-rating--${l.value===!0?"":"non-"}editable`+(t.noDimming===!0?" q-rating--no-dimming":"")+(t.disable===!0?" disabled":"")+(t.color!==void 0&&Array.isArray(t.color)===!1?` text-${t.color}`:"")),c=w(()=>{const v=Array.isArray(t.icon)===!0?t.icon.length:0,b=Array.isArray(t.iconSelected)===!0?t.iconSelected.length:0,m=Array.isArray(t.iconHalf)===!0?t.iconHalf.length:0,y=Array.isArray(t.color)===!0?t.color.length:0,x=Array.isArray(t.colorSelected)===!0?t.colorSelected.length:0,C=Array.isArray(t.colorHalf)===!0?t.colorHalf.length:0;return{iconLen:v,icon:v>0?t.icon[v-1]:t.icon,selIconLen:b,selIcon:b>0?t.iconSelected[b-1]:t.iconSelected,halfIconLen:m,halfIcon:m>0?t.iconHalf[b-1]:t.iconHalf,colorLen:y,color:y>0?t.color[y-1]:t.color,selColorLen:x,selColor:x>0?t.colorSelected[x-1]:t.colorSelected,halfColorLen:C,halfColor:C>0?t.colorHalf[C-1]:t.colorHalf}}),h=w(()=>{if(typeof t.iconAriaLabel=="string"){const v=t.iconAriaLabel.length!==0?`${t.iconAriaLabel} `:"";return b=>`${v}${b}`}if(Array.isArray(t.iconAriaLabel)===!0){const v=t.iconAriaLabel.length;if(v>0)return b=>t.iconAriaLabel[Math.min(b,v)-1]}return(v,b)=>`${b} ${v}`}),d=w(()=>{const v=[],b=c.value,m=Math.ceil(t.modelValue),y=l.value===!0?0:null,x=t.iconHalf===void 0||m===t.modelValue?-1:m;for(let C=1;C<=t.max;C++){const k=s.value===0&&t.modelValue>=C||s.value>0&&s.value>=C,P=x===C&&s.value<C,A=s.value>0&&(P===!0?m:t.modelValue)>=C&&s.value<C,E=P===!0?C<=b.halfColorLen?t.colorHalf[C-1]:b.halfColor:b.selColor!==void 0&&k===!0?C<=b.selColorLen?t.colorSelected[C-1]:b.selColor:C<=b.colorLen?t.color[C-1]:b.color,L=(P===!0?C<=b.halfIconLen?t.iconHalf[C-1]:b.halfIcon:b.selIcon===void 0||k!==!0&&A!==!0?C<=b.iconLen?t.icon[C-1]:b.icon:C<=b.selIconLen?t.iconSelected[C-1]:b.selIcon)||n.iconSet.rating.icon;v.push({name:(P===!0?C<=b.halfIconLen?t.iconHalf[C-1]:b.halfIcon:b.selIcon===void 0||k!==!0&&A!==!0?C<=b.iconLen?t.icon[C-1]:b.icon:C<=b.selIconLen?t.iconSelected[C-1]:b.selIcon)||n.iconSet.rating.icon,attrs:{tabindex:y,role:"radio","aria-checked":t.modelValue===C?"true":"false","aria-label":h.value(C,L)},iconClass:"q-rating__icon"+(k===!0||P===!0?" q-rating__icon--active":"")+(A===!0?" q-rating__icon--exselected":"")+(s.value===C?" q-rating__icon--hovered":"")+(E!==void 0?` text-${E}`:"")})}return v}),p=w(()=>{const v={role:"radiogroup"};return t.disable===!0&&(v["aria-disabled"]="true"),t.readonly===!0&&(v["aria-readonly"]="true"),v});function f(v){if(l.value===!0){const b=Ft(parseInt(v,10),1,parseInt(t.max,10)),m=t.noReset!==!0&&t.modelValue===b?0:b;m!==t.modelValue&&i("update:modelValue",m),s.value=0}}function g(v){l.value===!0&&(s.value=v)}function _(){s.value=0}return Nu(()=>{a={}}),()=>{const v=[];return d.value.forEach(({iconClass:b,name:m,attrs:y},x)=>{const C=x+1;v.push(S("div",{key:C,ref:k=>{a[`rt${C}`]=k},class:"q-rating__icon-container flex flex-center",...y,onClick(){f(C)},onMouseover(){g(C)},onMouseout:_,onFocus(){g(C)},onBlur:_,onKeyup(k){(function(P,A){switch(P.keyCode){case 13:case 32:return f(A),et(P);case 37:case 40:return a["rt"+(A-1)]&&a["rt"+(A-1)].focus(),et(P);case 39:case 38:a[`rt${A+1}`]&&a[`rt${A+1}`].focus(),et(P)}})(k,C)}},ni(e[`tip-${C}`],[S(_t,{class:b,name:m})])))}),t.name!==void 0&&t.disable!==!0&&o(v,"push"),S("div",{class:u.value,style:r.value,...p.value},v)}}}),ue({name:"QResponsive",props:O0,setup(t,{slots:e}){const i=z0(t);return()=>S("div",{class:"q-responsive"},[S("div",{class:"q-responsive__filler overflow-hidden"},[S("div",{style:i.value})]),S("div",{class:"q-responsive__content absolute-full fit"},Ne(e.default))])}});var AI=ue({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup:t=>()=>[S("div",{class:t.store.scroll.vertical.barClass.value,style:[t.barStyle,t.verticalBarStyle],"aria-hidden":"true",onMousedown:t.store.onVerticalMousedown}),S("div",{class:t.store.scroll.horizontal.barClass.value,style:[t.barStyle,t.horizontalBarStyle],"aria-hidden":"true",onMousedown:t.store.onHorizontalMousedown}),Ni(S("div",{ref:t.store.scroll.vertical.ref,class:t.store.scroll.vertical.thumbClass.value,style:t.store.scroll.vertical.style.value,"aria-hidden":"true"}),t.store.thumbVertDir),Ni(S("div",{ref:t.store.scroll.horizontal.ref,class:t.store.scroll.horizontal.thumbClass.value,style:t.store.scroll.horizontal.style.value,"aria-hidden":"true"}),t.store.thumbHorizDir)]}),Cb=["vertical","horizontal"],Pf={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Mb={prevent:!0,mouse:!0,mouseAllDir:!0},kb=t=>t>=250?50:Math.ceil(t/5),FI=ue({name:"QScrollArea",props:{...mt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(t,{slots:e,emit:i}){const n=G(!1),r=G(!1),o=G(!1),s={vertical:G(0),horizontal:G(0)},a={vertical:{ref:G(null),position:G(0),size:G(0)},horizontal:{ref:G(null),position:G(0),size:G(0)}},{proxy:l}=Me(),u=vt(t,l.$q);let c,h=null;const d=G(null),p=w(()=>"q-scrollarea"+(u.value===!0?" q-scrollarea--dark":""));Object.assign(s,{verticalInner:w(()=>s.vertical.value-t.verticalOffset[0]-t.verticalOffset[1]),horizontalInner:w(()=>s.horizontal.value-t.horizontalOffset[0]-t.horizontalOffset[1])}),a.vertical.percentage=w(()=>{const M=a.vertical.size.value-s.vertical.value;if(M<=0)return 0;const R=Ft(a.vertical.position.value/M,0,1);return Math.round(1e4*R)/1e4}),a.vertical.thumbHidden=w(()=>(t.visible===null?o.value:t.visible)!==!0&&n.value===!1&&r.value===!1||a.vertical.size.value<=s.vertical.value+1),a.vertical.thumbStart=w(()=>t.verticalOffset[0]+a.vertical.percentage.value*(s.verticalInner.value-a.vertical.thumbSize.value)),a.vertical.thumbSize=w(()=>Math.round(Ft(s.verticalInner.value*s.verticalInner.value/a.vertical.size.value,kb(s.verticalInner.value),s.verticalInner.value))),a.vertical.style=w(()=>({...t.thumbStyle,...t.verticalThumbStyle,top:`${a.vertical.thumbStart.value}px`,height:`${a.vertical.thumbSize.value}px`,right:`${t.horizontalOffset[1]}px`})),a.vertical.thumbClass=w(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.vertical.barClass=w(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(a.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),a.horizontal.percentage=w(()=>{const M=a.horizontal.size.value-s.horizontal.value;if(M<=0)return 0;const R=Ft(Math.abs(a.horizontal.position.value)/M,0,1);return Math.round(1e4*R)/1e4}),a.horizontal.thumbHidden=w(()=>(t.visible===null?o.value:t.visible)!==!0&&n.value===!1&&r.value===!1||a.horizontal.size.value<=s.horizontal.value+1),a.horizontal.thumbStart=w(()=>t.horizontalOffset[0]+a.horizontal.percentage.value*(s.horizontalInner.value-a.horizontal.thumbSize.value)),a.horizontal.thumbSize=w(()=>Math.round(Ft(s.horizontalInner.value*s.horizontalInner.value/a.horizontal.size.value,kb(s.horizontalInner.value),s.horizontalInner.value))),a.horizontal.style=w(()=>({...t.thumbStyle,...t.horizontalThumbStyle,[l.$q.lang.rtl===!0?"right":"left"]:`${a.horizontal.thumbStart.value}px`,width:`${a.horizontal.thumbSize.value}px`,bottom:`${t.verticalOffset[1]}px`})),a.horizontal.thumbClass=w(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),a.horizontal.barClass=w(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(a.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const f=w(()=>a.vertical.thumbHidden.value===!0&&a.horizontal.thumbHidden.value===!0?t.contentStyle:t.contentActiveStyle);function g(){const M={};return Cb.forEach(R=>{const q=a[R];Object.assign(M,{[R+"Position"]:q.position.value,[R+"Percentage"]:q.percentage.value,[R+"Size"]:q.size.value,[R+"ContainerSize"]:s[R].value,[R+"ContainerInnerSize"]:s[R+"Inner"].value})}),M}const _=nl(()=>{const M=g();M.ref=l,i("scroll",M)},0);function v(M,R,q){Cb.includes(M)!==!1&&(M==="vertical"?Sa:af)(d.value,R,q)}function b({height:M,width:R}){let q=!1;s.vertical.value!==M&&(s.vertical.value=M,q=!0),s.horizontal.value!==R&&(s.horizontal.value=R,q=!0),q===!0&&k()}function m({position:M}){let R=!1;a.vertical.position.value!==M.top&&(a.vertical.position.value=M.top,R=!0),a.horizontal.position.value!==M.left&&(a.horizontal.position.value=M.left,R=!0),R===!0&&k()}function y({height:M,width:R}){a.horizontal.size.value!==R&&(a.horizontal.size.value=R,k()),a.vertical.size.value!==M&&(a.vertical.size.value=M,k())}function x(M,R){const q=a[R];if(M.isFirst===!0){if(q.thumbHidden.value===!0)return;c=q.position.value,r.value=!0}else if(r.value!==!0)return;M.isFinal===!0&&(r.value=!1);const F=Pf[R],B=(q.size.value-s[R].value)/(s[R+"Inner"].value-q.thumbSize.value),V=M.distance[F.dist];P(c+(M.direction===F.dir?1:-1)*V*B,R)}function C(M,R){const q=a[R];if(q.thumbHidden.value!==!0){const F=R==="vertical"?t.verticalOffset[0]:t.horizontalOffset[0],B=M[Pf[R].offset]-F,V=q.thumbStart.value-F;(B<V||B>V+q.thumbSize.value)&&P(Ft((B-q.thumbSize.value/2)/(s[R+"Inner"].value-q.thumbSize.value),0,1)*Math.max(0,q.size.value-s[R].value),R),q.ref.value!==null&&q.ref.value.dispatchEvent(new MouseEvent(M.type,M))}}function k(){n.value=!0,h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,n.value=!1},t.delay),t.onScroll!==void 0&&_()}function P(M,R){d.value[Pf[R].scroll]=M}let A=null;function E(){A!==null&&clearTimeout(A),A=setTimeout(()=>{A=null,o.value=!0},l.$q.platform.is.ios?50:0)}function L(){A!==null&&(clearTimeout(A),A=null),o.value=!1}let T=null;se(()=>l.$q.lang.rtl,M=>{d.value!==null&&af(d.value,Math.abs(a.horizontal.position.value)*(M===!0?-1:1))}),Dr(()=>{T={top:a.vertical.position.value,left:a.horizontal.position.value}}),Ms(()=>{if(T===null)return;const M=d.value;M!==null&&(af(M,T.left),Sa(M,T.top))}),ht(_.cancel),Object.assign(l,{getScrollTarget:()=>d.value,getScroll:g,getScrollPosition:()=>({top:a.vertical.position.value,left:a.horizontal.position.value}),getScrollPercentage:()=>({top:a.vertical.percentage.value,left:a.horizontal.percentage.value}),setScrollPosition:v,setScrollPercentage(M,R,q){v(M,R*(a[M].size.value-s[M].value)*(M==="horizontal"&&l.$q.lang.rtl===!0?-1:1),q)}});const I={scroll:a,thumbVertDir:[[bn,M=>{x(M,"vertical")},void 0,{vertical:!0,...Mb}]],thumbHorizDir:[[bn,M=>{x(M,"horizontal")},void 0,{horizontal:!0,...Mb}]],onVerticalMousedown(M){C(M,"vertical")},onHorizontalMousedown(M){C(M,"horizontal")}};return()=>S("div",{class:p.value,onMouseenter:E,onMouseleave:L},[S("div",{ref:d,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:t.tabindex!==void 0?t.tabindex:void 0},[S("div",{class:"q-scrollarea__content absolute",style:f.value},ni(e.default,[S(Ss,{debounce:0,onResize:y})])),S(NC,{axis:"both",onScroll:m})]),S(Ss,{debounce:0,onResize:b}),S(AI,{store:I,barStyle:t.barStyle,verticalBarStyle:t.verticalBarStyle,horizontalBarStyle:t.horizontalBarStyle})])}}),Rn=1e3,OI=["start","center","end","start-force","center-force","end-force"],jC=Array.prototype.filter,zI=window.getComputedStyle(document.body).overflowAnchor===void 0?hi:function(t,e){t!==null&&(t._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(t._qOverflowAnimationFrame),t._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(t===null)return;t._qOverflowAnimationFrame=void 0;const i=t.children||[];jC.call(i,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const n=i[e];n&&n.dataset&&(n.dataset.qVsAnchor="")}))};function Ca(t,e){return t+e}function If(t,e,i,n,r,o,s,a){const l=t===window?document.scrollingElement||document.documentElement:t,u=r===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-s-a,scrollMaxSize:0,offsetStart:-s,offsetEnd:-a};if(r===!0?(t===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=l.scrollLeft,c.scrollViewSize+=l.clientWidth),c.scrollMaxSize=l.scrollWidth,o===!0&&(c.scrollStart=(Fu===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(t===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=l.scrollTop,c.scrollViewSize+=l.clientHeight),c.scrollMaxSize=l.scrollHeight),i!==null)for(let h=i.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=h[u]);if(n!==null)for(let h=n.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=h[u]);if(e!==t){const h=l.getBoundingClientRect(),d=e.getBoundingClientRect();r===!0?(c.offsetStart+=d.left-h.left,c.offsetEnd-=d.width):(c.offsetStart+=d.top-h.top,c.offsetEnd-=d.height),t!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Tb(t,e,i,n){e==="end"&&(e=(t===window?document.body:t)[i===!0?"scrollWidth":"scrollHeight"]),t===window?i===!0?(n===!0&&(e=(Fu===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):i===!0?(n===!0&&(e=(Fu===!0?t.scrollWidth-t.offsetWidth:0)-e),t.scrollLeft=e):t.scrollTop=e}function Il(t,e,i,n){if(i>=n)return 0;const r=e.length,o=Math.floor(i/Rn),s=Math.floor((n-1)/Rn)+1;let a=t.slice(o,s).reduce(Ca,0);return i%Rn!=0&&(a-=e.slice(o*Rn,i).reduce(Ca,0)),n%Rn!=0&&n!==r&&(a-=e.slice(n,s*Rn).reduce(Ca,0)),a}var VC={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Eb=Object.keys(VC),Wm={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...VC};function $C({virtualScrollLength:t,getVirtualScrollTarget:e,getVirtualScrollEl:i,virtualScrollItemSizeComputed:n}){const r=Me(),{props:o,emit:s,proxy:a}=r,{$q:l}=a;let u,c,h,d,p=[];const f=G(0),g=G(0),_=G({}),v=G(null),b=G(null),m=G(null),y=G({from:0,to:0}),x=w(()=>o.tableColspan!==void 0?o.tableColspan:100);n===void 0&&(n=w(()=>o.virtualScrollItemSize));const C=w(()=>n.value+";"+o.virtualScrollHorizontal),k=w(()=>C.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);function P(){M(c,!0)}function A(V){M(V===void 0?c:V)}function E(V,O){const $=e();if($==null||$.nodeType===8)return;const J=If($,i(),v.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);h!==J.scrollViewSize&&R(J.scrollViewSize),L($,J,Math.min(t.value-1,Math.max(0,parseInt(V,10)||0)),0,OI.indexOf(O)!==-1?O:c!==-1&&V>c?"end":"start")}function L(V,O,$,J,te){const ie=typeof te=="string"&&te.indexOf("-force")!==-1,j=ie===!0?te.replace("-force",""):te,z=j!==void 0?j:"start";let N=Math.max(0,$-_.value[z]),K=N+_.value.total;K>t.value&&(K=t.value,N=Math.max(0,K-_.value.total)),u=O.scrollStart;const U=N!==y.value.from||K!==y.value.to;if(U===!1&&j===void 0)return void q($);const{activeElement:W}=document,ve=m.value;U===!0&&ve!==null&&ve!==W&&ve.contains(W)===!0&&(ve.addEventListener("focusout",I),setTimeout(()=>{ve!==null&&ve.removeEventListener("focusout",I)})),zI(ve,$-N);const ce=j!==void 0?d.slice(N,$).reduce(Ca,0):0;if(U===!0){const fe=K>=y.value.from&&N<=y.value.to?y.value.to:K;y.value={from:N,to:fe},f.value=Il(p,d,0,N),g.value=Il(p,d,K,t.value),requestAnimationFrame(()=>{y.value.to!==K&&u===O.scrollStart&&(y.value={from:y.value.from,to:K},g.value=Il(p,d,K,t.value))})}requestAnimationFrame(()=>{if(u!==O.scrollStart)return;U===!0&&T(N);const fe=d.slice(N,$).reduce(Ca,0),pe=fe+O.offsetStart+f.value,Le=pe+d[$];let Pe=pe+J;if(j!==void 0){const me=fe-ce,Se=O.scrollStart+me;Pe=ie!==!0&&Se<pe&&Le<Se+O.scrollViewSize?Se:j==="end"?Le-O.scrollViewSize:pe-(j==="start"?0:Math.round((O.scrollViewSize-d[$])/2))}u=Pe,Tb(V,Pe,o.virtualScrollHorizontal,l.lang.rtl),q($)})}function T(V){const O=m.value;if(O){const $=jC.call(O.children,N=>N.classList&&N.classList.contains("q-virtual-scroll--skip")===!1),J=$.length,te=o.virtualScrollHorizontal===!0?N=>N.getBoundingClientRect().width:N=>N.offsetHeight;let ie,j,z=V;for(let N=0;N<J;){for(ie=te($[N]),N++;N<J&&$[N].classList.contains("q-virtual-scroll--with-prev")===!0;)ie+=te($[N]),N++;j=ie-d[z],j!==0&&(d[z]+=j,p[Math.floor(z/Rn)]+=j),z++}}}function I(){m.value!==null&&m.value!==void 0&&m.value.focus()}function M(V,O){const $=1*n.value;O!==!0&&Array.isArray(d)!==!1||(d=[]);const J=d.length;d.length=t.value;for(let ie=t.value-1;ie>=J;ie--)d[ie]=$;const te=Math.floor((t.value-1)/Rn);p=[];for(let ie=0;ie<=te;ie++){let j=0;const z=Math.min((ie+1)*Rn,t.value);for(let N=ie*Rn;N<z;N++)j+=d[N];p.push(j)}c=-1,u=void 0,f.value=Il(p,d,0,y.value.from),g.value=Il(p,d,y.value.to,t.value),V>=0?(T(y.value.from),dt(()=>{E(V)})):F()}function R(V){if(V===void 0&&typeof window<"u"){const ie=e();ie!=null&&ie.nodeType!==8&&(V=If(ie,i(),v.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}h=V;const O=parseFloat(o.virtualScrollSliceRatioBefore)||0,$=1+O+(parseFloat(o.virtualScrollSliceRatioAfter)||0),J=V===void 0||V<=0?1:Math.ceil(V/n.value),te=Math.max(1,J,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/$));_.value={total:Math.ceil(te*$),start:Math.ceil(te*O),center:Math.ceil(te*(.5+O)),end:Math.ceil(te*(1+O)),view:J}}function q(V){c!==V&&(o.onVirtualScroll!==void 0&&s("virtualScroll",{index:V,from:y.value.from,to:y.value.to-1,direction:V<c?"decrease":"increase",ref:a}),c=V)}se(k,()=>{R()}),se(C,P),R();const F=nl(function(){const V=e();if(V==null||V.nodeType===8)return;const O=If(V,i(),v.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),$=t.value-1,J=O.scrollMaxSize-O.offsetStart-O.offsetEnd-g.value;if(u===O.scrollStart)return;if(O.scrollMaxSize<=0)return void L(V,O,0,0);h!==O.scrollViewSize&&R(O.scrollViewSize),T(y.value.from);const te=Math.floor(O.scrollMaxSize-Math.max(O.scrollViewSize,O.offsetEnd)-Math.min(d[$],O.scrollViewSize/2));if(te>0&&Math.ceil(O.scrollStart)>=te)return void L(V,O,$,O.scrollMaxSize-O.offsetEnd-p.reduce(Ca,0));let ie=0,j=O.scrollStart-O.offsetStart,z=j;if(j<=J&&j+O.scrollViewSize>=f.value)j-=f.value,ie=y.value.from,z=j;else for(let N=0;j>=p[N]&&ie<$;N++)j-=p[N],ie+=Rn;for(;j>0&&ie<$;)j-=d[ie],j>-O.scrollViewSize?(ie++,z=j):z=d[ie]+j;L(V,O,ie,z)},l.platform.is.ios===!0?120:35);uv(()=>{R()});let B=!1;return Dr(()=>{B=!0}),Ms(()=>{if(B!==!0)return;const V=e();u!==void 0&&V!=null&&V.nodeType!==8?Tb(V,u,o.virtualScrollHorizontal,l.lang.rtl):E(c)}),ht(()=>{F.cancel()}),Object.assign(a,{scrollTo:E,reset:P,refresh:A}),{virtualScrollSliceRange:y,virtualScrollSliceSizeComputed:_,setVirtualScrollSize:R,onVirtualScrollEvt:F,localResetVirtualScroll:M,padVirtualScroll:function(V,O){const $=o.virtualScrollHorizontal===!0?"width":"height",J={["--q-virtual-scroll-item-"+$]:n.value+"px"};return[V==="tbody"?S(V,{class:"q-virtual-scroll__padding",key:"before",ref:v},[S("tr",[S("td",{style:{[$]:`${f.value}px`,...J},colspan:x.value})])]):S(V,{class:"q-virtual-scroll__padding",key:"before",ref:v,style:{[$]:`${f.value}px`,...J}}),S(V,{class:"q-virtual-scroll__content",key:"content",ref:m,tabindex:-1},O.flat()),V==="tbody"?S(V,{class:"q-virtual-scroll__padding",key:"after",ref:b},[S("tr",[S("td",{style:{[$]:`${g.value}px`,...J},colspan:x.value})])]):S(V,{class:"q-virtual-scroll__padding",key:"after",ref:b,style:{[$]:`${g.value}px`,...J}})]},scrollTo:E,reset:P,refresh:A}}var Lb=t=>["add","add-unique","toggle"].includes(t),DI=Object.keys(Kd);function Rf(t,e){if(typeof t=="function")return t;const i=t!==void 0?t:e;return n=>n!==null&&typeof n=="object"&&i in n?n[i]:n}var NI=ue({name:"QSelect",inheritAttrs:!1,props:{...Wm,...Tn,...Kd,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Lb},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:Wm.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Xd,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=G(!1),s=G(!1),a=G(-1),l=G(""),u=G(!1),c=G(!1);let h,d,p,f,g,_,v,b=null,m=null,y=null;const x=G(null),C=G(null),k=G(null),P=G(null),A=G(null),E=C0(t),L=zC(we),T=w(()=>Array.isArray(t.options)?t.options.length:0),I=w(()=>t.virtualScrollItemSize===void 0?t.optionsDense===!0?24:48:t.virtualScrollItemSize),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:R,localResetVirtualScroll:q,padVirtualScroll:F,onVirtualScrollEvt:B,scrollTo:V,setVirtualScrollSize:O}=$C({virtualScrollLength:T,getVirtualScrollTarget:function(){return xe()},getVirtualScrollEl:xe,virtualScrollItemSizeComputed:I}),$=Zd(),J=w(()=>{const Y=t.mapOptions===!0&&t.multiple!==!0,$e=t.modelValue===void 0||t.modelValue===null&&Y!==!0?[]:t.multiple===!0&&Array.isArray(t.modelValue)?t.modelValue:[t.modelValue];if(t.mapOptions===!0&&Array.isArray(t.options)===!0){const je=t.mapOptions===!0&&h!==void 0?h:[],qt=$e.map(pt=>function(ft,oi){const At=dl=>Fn(oe.value(dl),ft);return t.options.find(At)||oi.find(At)||ft}(pt,je));return t.modelValue===null&&Y===!0?qt.filter(pt=>pt!==null):qt}return $e}),te=w(()=>{const Y={};return DI.forEach($e=>{const je=t[$e];je!==void 0&&(Y[$e]=je)}),Y}),ie=w(()=>t.optionsDark===null?$.isDark.value:t.optionsDark),j=w(()=>Cs(J.value)),z=w(()=>{let Y="q-field__input q-placeholder col";return t.hideSelected===!0||J.value.length===0?[Y,t.inputClass]:(Y+=" q-field__input--padding",t.inputClass===void 0?Y:[Y,t.inputClass])}),N=w(()=>(t.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(t.popupContentClass?" "+t.popupContentClass:"")),K=w(()=>T.value===0),U=w(()=>J.value.map(Y=>he.value(Y)).join(", ")),W=w(()=>t.displayValue!==void 0?t.displayValue:U.value),ve=w(()=>t.optionsHtml===!0?()=>!0:Y=>Y!=null&&Y.html===!0),ce=w(()=>t.displayValueHtml===!0||t.displayValue===void 0&&(t.optionsHtml===!0||J.value.some(ve.value))),fe=w(()=>$.focused.value===!0?t.tabindex:-1),pe=w(()=>{const Y={tabindex:t.tabindex,role:"combobox","aria-label":t.label,"aria-readonly":t.readonly===!0?"true":"false","aria-autocomplete":t.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${$.targetUid.value}_lb`};return a.value>=0&&(Y["aria-activedescendant"]=`${$.targetUid.value}_${a.value}`),Y}),Le=w(()=>({id:`${$.targetUid.value}_lb`,role:"listbox","aria-multiselectable":t.multiple===!0?"true":"false"})),Pe=w(()=>J.value.map((Y,$e)=>({index:$e,opt:Y,html:ve.value(Y),selected:!0,removeAtIndex:X,toggleOption:ge,tabindex:fe.value}))),me=w(()=>{if(T.value===0)return[];const{from:Y,to:$e}=M.value;return t.options.slice(Y,$e).map((je,qt)=>{const pt=Z.value(je)===!0,ft=tt(je)===!0,oi=Y+qt,At={clickable:!0,active:ft,activeClass:Ge.value,manualFocus:!0,focused:!1,disable:pt,tabindex:-1,dense:t.optionsDense,dark:ie.value,role:"option","aria-selected":ft===!0?"true":"false",id:`${$.targetUid.value}_${oi}`,onClick:()=>{ge(je)}};return pt!==!0&&(a.value===oi&&(At.focused=!0),r.platform.is.desktop===!0&&(At.onMousemove=()=>{o.value===!0&&qe(oi)})),{index:oi,opt:je,html:ve.value(je),label:he.value(je),selected:At.active,focused:At.focused,toggleOption:ge,setOptionIndex:qe,itemProps:At}})}),Se=w(()=>t.dropdownIcon!==void 0?t.dropdownIcon:r.iconSet.arrow.dropdown),Re=w(()=>t.optionsCover===!1&&t.outlined!==!0&&t.standout!==!0&&t.borderless!==!0&&t.rounded!==!0),Ge=w(()=>t.optionsSelectedClass!==void 0?t.optionsSelectedClass:t.color!==void 0?`text-${t.color}`:""),oe=w(()=>Rf(t.optionValue,"value")),he=w(()=>Rf(t.optionLabel,"label")),Z=w(()=>Rf(t.optionDisable,"disable")),ae=w(()=>J.value.map(oe.value)),Ce=w(()=>{const Y={onInput:we,onChange:L,onKeydown:ke,onKeyup:We,onKeypress:ee,onFocus:Ae,onClick($e){d===!0&&Xt($e)}};return Y.onCompositionstart=Y.onCompositionupdate=Y.onCompositionend=L,Y});function Ie(Y){return t.emitValue===!0?oe.value(Y):Y}function Fe(Y){if(Y!==-1&&Y<J.value.length)if(t.multiple===!0){const $e=t.modelValue.slice();i("remove",{index:Y,value:$e.splice(Y,1)[0]}),i("update:modelValue",$e)}else i("update:modelValue",null)}function X(Y){Fe(Y),$.focus()}function re(Y,$e){const je=Ie(Y);if(t.multiple!==!0)return t.fillInput===!0&&H(he.value(Y),!0,!0),void i("update:modelValue",je);if(J.value.length===0)return i("add",{index:0,value:je}),void i("update:modelValue",t.multiple===!0?[je]:je);if($e===!0&&tt(Y)===!0||t.maxValues!==void 0&&t.modelValue.length>=t.maxValues)return;const qt=t.modelValue.slice();i("add",{index:qt.length,value:je}),qt.push(je),i("update:modelValue",qt)}function ge(Y,$e){if($.editable.value!==!0||Y===void 0||Z.value(Y)===!0)return;const je=oe.value(Y);if(t.multiple!==!0)return $e!==!0&&(H(t.fillInput===!0?he.value(Y):"",!0,!0),ui()),C.value!==null&&C.value.focus(),void(J.value.length!==0&&Fn(oe.value(J.value[0]),je)===!0||i("update:modelValue",t.emitValue===!0?je:Y));if((d!==!0||u.value===!0)&&$.focus(),Ae(),J.value.length===0){const ft=t.emitValue===!0?je:Y;return i("add",{index:0,value:ft}),void i("update:modelValue",t.multiple===!0?[ft]:ft)}const qt=t.modelValue.slice(),pt=ae.value.findIndex(ft=>Fn(ft,je));if(pt!==-1)i("remove",{index:pt,value:qt.splice(pt,1)[0]});else{if(t.maxValues!==void 0&&qt.length>=t.maxValues)return;const ft=t.emitValue===!0?je:Y;i("add",{index:qt.length,value:ft}),qt.push(ft)}i("update:modelValue",qt)}function qe(Y){if(r.platform.is.desktop!==!0)return;const $e=Y!==-1&&Y<T.value?Y:-1;a.value!==$e&&(a.value=$e)}function He(Y=1,$e){if(o.value===!0){let je=a.value;do je=sd(je+Y,-1,T.value-1);while(je!==-1&&je!==a.value&&Z.value(t.options[je])===!0);a.value!==je&&(qe(je),V(je),$e!==!0&&t.useInput===!0&&t.fillInput===!0&&D(je>=0?he.value(t.options[je]):f,!0))}}function tt(Y){const $e=oe.value(Y);return ae.value.find(je=>Fn(je,$e))!==void 0}function Ae(Y){t.useInput===!0&&C.value!==null&&(Y===void 0||C.value===Y.target&&Y.target.value===U.value)&&C.value.select()}function Ze(Y){Sn(Y,27)===!0&&o.value===!0&&(Xt(Y),ui(),br()),i("keyup",Y)}function We(Y){const{value:$e}=Y.target;if(Y.keyCode===void 0)if(Y.target.value="",b!==null&&(clearTimeout(b),b=null),m!==null&&(clearTimeout(m),m=null),br(),typeof $e=="string"&&$e.length!==0){const je=$e.toLocaleLowerCase(),qt=ft=>{const oi=t.options.find(At=>String(ft.value(At)).toLocaleLowerCase()===je);return oi!==void 0&&(J.value.indexOf(oi)===-1?ge(oi):ui(),!0)},pt=ft=>{qt(oe)!==!0&&ft!==!0&&qt(he)!==!0&&Q($e,!0,()=>pt(!0))};pt()}else $.clearValue(Y);else Ze(Y)}function ee(Y){i("keypress",Y)}function ke(Y){if(i("keydown",Y),xs(Y)===!0)return;const $e=l.value.length!==0&&(t.newValueMode!==void 0||t.onNewValue!==void 0),je=Y.shiftKey!==!0&&t.disableTabSelection!==!0&&t.multiple!==!0&&(a.value!==-1||$e===!0);if(Y.keyCode===27)return void yi(Y);if(Y.keyCode===9&&je===!1)return void zt();if(Y.target===void 0||Y.target.id!==$.targetUid.value||$.editable.value!==!0)return;if(Y.keyCode===40&&$.innerLoading.value!==!0&&o.value===!1)return et(Y),void Je();if(Y.keyCode===8&&(t.useChips===!0||t.clearable===!0)&&t.hideSelected!==!0&&l.value.length===0)return void(t.multiple===!0&&Array.isArray(t.modelValue)===!0?Fe(t.modelValue.length-1):t.multiple!==!0&&t.modelValue!==null&&i("update:modelValue",null));Y.keyCode!==35&&Y.keyCode!==36||typeof l.value=="string"&&l.value.length!==0||(et(Y),a.value=-1,He(Y.keyCode===36?1:-1,t.multiple)),Y.keyCode!==33&&Y.keyCode!==34||R.value===void 0||(et(Y),a.value=Math.max(-1,Math.min(T.value,a.value+(Y.keyCode===33?-1:1)*R.value.view)),He(Y.keyCode===33?1:-1,t.multiple)),Y.keyCode!==38&&Y.keyCode!==40||(et(Y),He(Y.keyCode===38?-1:1,t.multiple));const qt=T.value;if((_===void 0||v<Date.now())&&(_=""),qt>0&&t.useInput!==!0&&Y.key!==void 0&&Y.key.length===1&&Y.altKey===!1&&Y.ctrlKey===!1&&Y.metaKey===!1&&(Y.keyCode!==32||_.length!==0)){o.value!==!0&&Je(Y);const pt=Y.key.toLocaleLowerCase(),ft=_.length===1&&_[0]===pt;v=Date.now()+1500,ft===!1&&(et(Y),_+=pt);const oi=new RegExp("^"+_.split("").map(dl=>".*+?^${}()|[]\\".indexOf(dl)!==-1?"\\"+dl:dl).join(".*"),"i");let At=a.value;if(ft===!0||At<0||oi.test(he.value(t.options[At]))!==!0)do At=sd(At+1,-1,qt-1);while(At!==a.value&&(Z.value(t.options[At])===!0||oi.test(he.value(t.options[At]))!==!0));a.value!==At&&dt(()=>{qe(At),V(At),At>=0&&t.useInput===!0&&t.fillInput===!0&&D(he.value(t.options[At]),!0)})}else if(Y.keyCode===13||Y.keyCode===32&&t.useInput!==!0&&_===""||Y.keyCode===9&&je!==!1)if(Y.keyCode!==9&&et(Y),a.value!==-1&&a.value<qt)ge(t.options[a.value]);else{if($e===!0){const pt=(ft,oi)=>{if(oi){if(Lb(oi)!==!0)return}else oi=t.newValueMode;H("",t.multiple!==!0,!0),ft!=null&&((oi==="toggle"?ge:re)(ft,oi==="add-unique"),t.multiple!==!0&&(C.value!==null&&C.value.focus(),ui()))};if(t.onNewValue!==void 0?i("newValue",l.value,pt):pt(l.value),t.multiple!==!0)return}o.value===!0?zt():$.innerLoading.value!==!0&&Je()}}function xe(){return d===!0?A.value:k.value!==null&&k.value.contentEl!==null?k.value.contentEl:void 0}function ye(){if(K.value===!0)return e["no-option"]!==void 0?e["no-option"]({inputValue:l.value}):void 0;const Y=e.option!==void 0?e.option:je=>S(ul,{key:je.index,...je.itemProps},()=>S(ur,()=>S(Hm,()=>S("span",{[je.html===!0?"innerHTML":"textContent"]:je.label}))));let $e=F("div",me.value.map(Y));return e["before-options"]!==void 0&&($e=e["before-options"]().concat($e)),ni(e["after-options"],$e)}function we(Y){b!==null&&(clearTimeout(b),b=null),m!==null&&(clearTimeout(m),m=null),Y&&Y.target&&Y.target.qComposing===!0||(D(Y.target.value||""),p=!0,f=l.value,$.focused.value===!0||d===!0&&u.value!==!0||$.focus(),t.onFilter!==void 0&&(b=setTimeout(()=>{b=null,Q(l.value)},t.inputDebounce)))}function D(Y,$e){l.value!==Y&&(l.value=Y,$e===!0||t.inputDebounce===0||t.inputDebounce==="0"?i("inputValue",Y):m=setTimeout(()=>{m=null,i("inputValue",Y)},t.inputDebounce))}function H(Y,$e,je){p=je!==!0,t.useInput===!0&&(D(Y,!0),$e!==!0&&je===!0||(f=Y),$e!==!0&&Q(Y))}function Q(Y,$e,je){if(t.onFilter===void 0||$e!==!0&&$.focused.value!==!0)return;$.innerLoading.value===!0?i("filterAbort"):($.innerLoading.value=!0,c.value=!0),Y!==""&&t.multiple!==!0&&J.value.length!==0&&p!==!0&&Y===he.value(J.value[0])&&(Y="");const qt=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);y!==null&&clearTimeout(y),y=qt,i("filter",Y,(pt,ft)=>{$e!==!0&&$.focused.value!==!0||y!==qt||(clearTimeout(y),typeof pt=="function"&&pt(),c.value=!1,dt(()=>{$.innerLoading.value=!1,$.editable.value===!0&&($e===!0?o.value===!0&&ui():o.value===!0?ap(!0):o.value=!0),typeof ft=="function"&&dt(()=>{ft(n)}),typeof je=="function"&&dt(()=>{je(n)})}))},()=>{$.focused.value===!0&&y===qt&&(clearTimeout(y),$.innerLoading.value=!1,c.value=!1),o.value===!0&&(o.value=!1)})}function le(Y){dy(Y),zt()}function ne(){O()}function Te(Y){Xt(Y),C.value!==null&&C.value.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function de(Y){Xt(Y),dt(()=>{u.value=!1})}function Be(Y){dy(Y),P.value!==null&&P.value.__updateRefocusTarget($.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),$.focused.value=!1}function Ye(Y){ui(),$.focused.value===!1&&i("blur",Y),br()}function bt(){const Y=document.activeElement;Y!==null&&Y.id===$.targetUid.value||C.value===null||C.value===Y||C.value.focus(),O()}function zt(){s.value!==!0&&(a.value=-1,o.value===!0&&(o.value=!1),$.focused.value===!1&&(y!==null&&(clearTimeout(y),y=null),$.innerLoading.value===!0&&(i("filterAbort"),$.innerLoading.value=!1,c.value=!1)))}function Je(Y){$.editable.value===!0&&(d===!0?($.onControlFocusin(Y),s.value=!0,dt(()=>{$.focus()})):$.focus(),t.onFilter!==void 0?Q(l.value):K.value===!0&&e["no-option"]===void 0||(o.value=!0))}function ui(){s.value=!1,zt()}function br(){t.useInput===!0&&H(t.multiple!==!0&&t.fillInput===!0&&J.value.length!==0&&he.value(J.value[0])||"",!0,!0)}function ap(Y){let $e=-1;if(Y===!0){if(J.value.length!==0){const je=oe.value(J.value[0]);$e=t.options.findIndex(qt=>Fn(oe.value(qt),je))}q($e)}qe($e)}function cy(){s.value===!1&&k.value!==null&&k.value.updatePosition()}function hy(Y){Y!==void 0&&Xt(Y),i("popupShow",Y),$.hasPopupOpen=!0,$.onControlFocusin(Y)}function dy(Y){Y!==void 0&&Xt(Y),i("popupHide",Y),$.hasPopupOpen=!1,$.onControlFocusout(Y)}function py(){d=(r.platform.is.mobile===!0||t.behavior==="dialog")&&t.behavior!=="menu"&&(t.useInput!==!0||e["no-option"]!==void 0||t.onFilter!==void 0||K.value===!1),g=r.platform.is.ios===!0&&d===!0&&t.useInput===!0?"fade":t.transitionShow}return se(J,Y=>{h=Y,t.useInput===!0&&t.fillInput===!0&&t.multiple!==!0&&$.innerLoading.value!==!0&&(s.value!==!0&&o.value!==!0||j.value!==!0)&&(p!==!0&&br(),s.value!==!0&&o.value!==!0||Q(""))},{immediate:!0}),se(()=>t.fillInput,br),se(o,ap),se(T,function(Y,$e){o.value===!0&&$.innerLoading.value===!1&&(q(-1,!0),dt(()=>{o.value===!0&&$.innerLoading.value===!1&&(Y>$e?q():ap(!0))}))}),Nu(py),QM(cy),py(),ht(()=>{b!==null&&clearTimeout(b),m!==null&&clearTimeout(m)}),Object.assign(n,{showPopup:Je,hidePopup:ui,removeAtIndex:Fe,add:re,toggleOption:ge,getOptionIndex:()=>a.value,setOptionIndex:qe,moveOptionSelection:He,filter:Q,updateMenuPosition:cy,updateInputValue:H,isOptionSelected:tt,getEmittingOptionValue:Ie,isOptionDisabled:(...Y)=>Z.value.apply(null,Y)===!0,getOptionValue:(...Y)=>oe.value.apply(null,Y),getOptionLabel:(...Y)=>he.value.apply(null,Y)}),Object.assign($,{innerValue:J,fieldClass:w(()=>`q-select q-field--auto-height q-select--with${t.useInput!==!0?"out":""}-input q-select--with${t.useChips!==!0?"out":""}-chips q-select--${t.multiple===!0?"multiple":"single"}`),inputRef:x,targetRef:C,hasValue:j,showPopup:Je,floatingLabel:w(()=>t.hideSelected!==!0&&j.value===!0||typeof l.value=="number"||l.value.length!==0||Cs(t.displayValue)),getControlChild:()=>{if($.editable.value!==!1&&(s.value===!0||K.value!==!0||e["no-option"]!==void 0))return d===!0?function(){const Y=[S(hI,{class:`col-auto ${$.fieldClass.value}`,...te.value,for:$.targetUid.value,dark:ie.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:l.value.length!==0,...$.splitAttrs.listeners.value,onFocus:Te,onBlur:de},{...e,rawControl:()=>$.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&Y.push(S("div",{ref:A,class:N.value+" scroll",style:t.popupContentStyle,...Le.value,onClick:yi,onScrollPassive:B},ye())),S(Yd,{ref:P,modelValue:s.value,position:t.useInput===!0?"top":void 0,transitionShow:g,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,noRouteDismiss:t.popupNoRouteDismiss,onBeforeShow:hy,onBeforeHide:Be,onHide:Ye,onShow:bt},()=>S("div",{class:"q-select__dialog"+(ie.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},Y))}():S(ll,{ref:k,class:N.value,style:t.popupContentStyle,modelValue:o.value,fit:t.menuShrink!==!0,cover:t.optionsCover===!0&&K.value!==!0&&t.useInput!==!0,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,dark:ie.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:t.popupNoRouteDismiss,square:Re.value,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,separateClosePopup:!0,...Le.value,onScrollPassive:B,onBeforeShow:hy,onBeforeHide:le,onShow:ne},ye);$.hasPopupOpen===!0&&($.hasPopupOpen=!1)},controlEvents:{onFocusin(Y){$.onControlFocusin(Y)},onFocusout(Y){$.onControlFocusout(Y,()=>{br(),zt()})},onClick(Y){if(yi(Y),d!==!0&&o.value===!0)return zt(),void(C.value!==null&&C.value.focus());Je(Y)}},getControl:Y=>{const $e=t.hideSelected===!0?[]:e["selected-item"]!==void 0?Pe.value.map(pt=>e["selected-item"](pt)).slice():e.selected!==void 0?[].concat(e.selected()):t.useChips===!0?Pe.value.map((pt,ft)=>S(iC,{key:"option-"+ft,removable:$.editable.value===!0&&Z.value(pt.opt)!==!0,dense:!0,textColor:t.color,tabindex:fe.value,onRemove(){pt.removeAtIndex(ft)}},()=>S("span",{class:"ellipsis",[pt.html===!0?"innerHTML":"textContent"]:he.value(pt.opt)}))):[S("span",{[ce.value===!0?"innerHTML":"textContent"]:W.value})],je=Y===!0||s.value!==!0||d!==!0;if(t.useInput===!0)$e.push(function(pt,ft){const oi=ft===!0?{...pe.value,...$.splitAttrs.attributes.value}:void 0,At={ref:ft===!0?C:void 0,key:"i_t",class:z.value,style:t.inputStyle,value:l.value!==void 0?l.value:"",type:"search",...oi,id:ft===!0?$.targetUid.value:void 0,maxlength:t.maxlength,autocomplete:t.autocomplete,"data-autofocus":pt===!0||t.autofocus===!0||void 0,disabled:t.disable===!0,readonly:t.readonly===!0,...Ce.value};return pt!==!0&&d===!0&&(Array.isArray(At.class)===!0?At.class=[...At.class,"no-pointer-events"]:At.class+=" no-pointer-events"),S("input",At)}(Y,je));else if($.editable.value===!0){const pt=je===!0?pe.value:void 0;$e.push(S("input",{ref:je===!0?C:void 0,key:"d_t",class:"q-select__focus-target",id:je===!0?$.targetUid.value:void 0,value:W.value,readonly:!0,"data-autofocus":Y===!0||t.autofocus===!0||void 0,...pt,onKeydown:ke,onKeyup:Ze,onKeypress:ee})),je===!0&&typeof t.autocomplete=="string"&&t.autocomplete.length!==0&&$e.push(S("input",{class:"q-select__autocomplete-input",autocomplete:t.autocomplete,tabindex:-1,onKeyup:We}))}if(E.value!==void 0&&t.disable!==!0&&ae.value.length!==0){const pt=ae.value.map(ft=>S("option",{value:ft,selected:!0}));$e.push(S("select",{class:"hidden",name:E.value,multiple:t.multiple},pt))}const qt=t.useInput===!0||je!==!0?void 0:$.splitAttrs.attributes.value;return S("div",{class:"q-field__native row items-center",...qt,...$.splitAttrs.listeners.value},$e)},getInnerAppend:()=>t.loading!==!0&&c.value!==!0&&t.hideDropdownIcon!==!0?[S(_t,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:Se.value})]:null}),Qd($)}}),BI=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],jI=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];ue({name:"QSkeleton",props:{...mt,tag:{type:String,default:"div"},type:{type:String,validator:t=>BI.includes(t),default:"rect"},animation:{type:String,validator:t=>jI.includes(t),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(t,{slots:e}){const i=Me(),n=vt(t,i.proxy.$q),r=w(()=>{const s=t.size!==void 0?[t.size,t.size]:[t.width,t.height];return{"--q-skeleton-speed":`${t.animationSpeed}ms`,width:s[0],height:s[1]}}),o=w(()=>`q-skeleton q-skeleton--${n.value===!0?"dark":"light"} q-skeleton--type-${t.type}`+(t.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${t.animation}`:"")+(t.square===!0?" q-skeleton--square":"")+(t.bordered===!0?" q-skeleton--bordered":""));return()=>S(t.tag,{class:o.value,style:r.value},Ne(e.default))}});var Pb=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];ue({name:"QSlideItem",props:{...mt,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=vt(t,r),{getCache:s}=ic(),a=G(null);let l=null,u={},c={},h={};const d=w(()=>r.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),p=w(()=>"q-slide-item q-item-type overflow-hidden"+(o.value===!0?" q-slide-item--dark q-dark":""));function f(){a.value.style.transform="translate(0,0)"}function g(v,b,m){t.onSlide!==void 0&&i("slide",{side:v,ratio:b,isReset:m})}function _(v){const b=a.value;if(v.isFirst)u={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},b.classList.add("no-transition"),Pb.forEach(C=>{if(e[C[0]]!==void 0){const k=h[C[0]];k.style.transform="scale(1)",u.size[C[0]]=k.getBoundingClientRect()[C[3]]}}),u.axis=v.direction==="up"||v.direction==="down"?"Y":"X";else{if(v.isFinal)return b.classList.remove("no-transition"),void(u.scale===1?(b.style.transform=`translate${u.axis}(${100*u.dir}%)`,l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,i(u.showing,{reset:f}),i("action",{side:u.showing,reset:f})},230)):(b.style.transform="translate(0,0)",g(u.showing,0,!0)));v.direction=u.axis==="X"?v.offset.x<0?"left":"right":v.offset.y<0?"up":"down"}if(e.left===void 0&&v.direction===d.value.right||e.right===void 0&&v.direction===d.value.left||e.top===void 0&&v.direction==="down"||e.bottom===void 0&&v.direction==="up")return void(b.style.transform="translate(0,0)");let m,y,x;u.axis==="X"?(y=v.direction==="left"?-1:1,m=y===1?d.value.left:d.value.right,x=v.distance.x):(y=v.direction==="up"?-2:2,m=y===2?"top":"bottom",x=v.distance.y),u.dir!==null&&Math.abs(y)!==Math.abs(u.dir)||(u.dir!==y&&(["left","right","top","bottom"].forEach(C=>{c[C]&&(c[C].style.visibility=m===C?"visible":"hidden")}),u.showing=m,u.dir=y),u.scale=Math.max(0,Math.min(1,(x-40)/u.size[m])),b.style.transform=`translate${u.axis}(${x*y/Math.abs(y)}px)`,h[m].style.transform=`scale(${u.scale})`,g(m,u.scale,!1))}return Nu(()=>{c={},h={}}),ht(()=>{l!==null&&clearTimeout(l)}),Object.assign(n,{reset:f}),()=>{const v=[],b={left:e[d.value.right]!==void 0,right:e[d.value.left]!==void 0,up:e.bottom!==void 0,down:e.top!==void 0},m=Object.keys(b).filter(x=>b[x]===!0);Pb.forEach(x=>{const C=x[0];e[C]!==void 0&&v.push(S("div",{key:C,ref:k=>{c[C]=k},class:`q-slide-item__${C} absolute-full row no-wrap items-${x[1]} justify-${x[2]}`+(t[C+"Color"]!==void 0?` bg-${t[C+"Color"]}`:"")},[S("div",{ref:k=>{h[C]=k}},e[C]())]))});const y=S("div",{key:(m.length===0?"only-":"")+" content",ref:a,class:"q-slide-item__content"},Ne(e.default));return m.length===0?v.push(y):v.push(Ni(y,s("dir#"+m.join(""),()=>{const x={prevent:!0,stop:!0,mouse:!0};return m.forEach(C=>{x[C]=!0}),[[bn,_,void 0,x]]}))),S("div",{class:p.value},v)}}});var VI=ue({name:"QSpace",setup(){const t=S("div",{class:"q-space"});return()=>t}});ue({name:"QSpinnerAudio",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="matrix(1 0 0 -1 0 80)"><rect width="10" height="20" rx="3"><animate attributeName="height" begin="0s" dur="4.3s" values="20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="15" width="10" height="80" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="80;55;33;5;75;23;73;33;12;14;60;80" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" width="10" height="50" rx="3"><animate attributeName="height" begin="0s" dur="1.4s" values="50;34;78;23;56;23;34;76;80;54;21;50" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="45" width="10" height="30" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="30;45;13;80;56;72;45;76;34;23;67;30" calcMode="linear" repeatCount="indefinite"></animate></rect></g>'})}}),ue({name:"QSpinnerBall",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle cx="5" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="27" cy="5" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="49" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),ue({name:"QSpinnerBars",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="60" width="15" height="140" rx="6"><animate attributeName="height" begin="0s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="90" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="120" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect>'})}}),ue({name:"QSpinnerBox",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect x="25" y="25" width="50" height="50" fill="none" stroke-width="4" stroke="currentColor"><animateTransform id="spinnerBox" attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" dur="0.5s" begin="rectBox.end"></animateTransform></rect><rect x="27" y="27" width="46" height="50" fill="currentColor"><animate id="rectBox" attributeName="height" begin="0s;spinnerBox.end" dur="1.3s" from="50" to="0" fill="freeze"></animate></rect>'})}}),ue({name:"QSpinnerClock",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="48" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="currentColor"></circle><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="85" y2="50.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2s" repeatCount="indefinite"></animateTransform></line><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="49.5" y2="74"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="15s" repeatCount="indefinite"></animateTransform></line>'})}}),ue({name:"QSpinnerComment",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><path d="M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z" fill="currentColor"></path><circle cx="30" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;1;1" keyTimes="0;0.2;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="50" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.2;0.4;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="70" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.4;0.6;1" dur="1s" repeatCount="indefinite"></animate></circle>'})}}),ue({name:"QSpinnerCube",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><g transform="translate(25 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.1s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(25 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.7"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.3s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.2s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g>'})}}),ue({name:"QSpinnerDots",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),ue({name:"QSpinnerFacebook",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",innerHTML:'<g transform="translate(20 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(50 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.1s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(80 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.2s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g>'})}}),ue({name:"QSpinnerGears",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),ue({name:"QSpinnerGrid",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="12.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="0s" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5"><animate attributeName="fill-opacity" begin="100ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="300ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="600ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="800ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="400ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="700ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="500ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="200ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),ue({name:"QSpinnerHearts",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0.7s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"></path>'})}}),ue({name:"QSpinnerHourglass",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>'})}}),ue({name:"QSpinnerInfinity",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<path d="M24.3,30C11.4,30,5,43.3,5,50s6.4,20,19.3,20c19.3,0,32.1-40,51.4-40C88.6,30,95,43.3,95,50s-6.4,20-19.3,20C56.4,70,43.6,30,24.3,30z" fill="none" stroke="currentColor" stroke-width="8" stroke-dasharray="10.691205342610678 10.691205342610678" stroke-dashoffset="0"><animate attributeName="stroke-dashoffset" from="0" to="21.382410685221355" begin="0" dur="2s" repeatCount="indefinite" fill="freeze"></animate></path>'})}}),ue({name:"QSpinnerIos",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64",innerHTML:'<g stroke-width="4" stroke-linecap="round"><line y1="17" y2="29" transform="translate(32,32) rotate(180)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(210)"><animate attributeName="stroke-opacity" dur="750ms" values="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(240)"><animate attributeName="stroke-opacity" dur="750ms" values=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(270)"><animate attributeName="stroke-opacity" dur="750ms" values=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(300)"><animate attributeName="stroke-opacity" dur="750ms" values=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(330)"><animate attributeName="stroke-opacity" dur="750ms" values=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(0)"><animate attributeName="stroke-opacity" dur="750ms" values=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(30)"><animate attributeName="stroke-opacity" dur="750ms" values=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(60)"><animate attributeName="stroke-opacity" dur="750ms" values=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(90)"><animate attributeName="stroke-opacity" dur="750ms" values=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(120)"><animate attributeName="stroke-opacity" dur="750ms" values=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(150)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line></g>'})}}),ue({name:"QSpinnerOrbit",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="44" fill="none" stroke-width="4" stroke-opacity=".5" stroke="currentColor"></circle><circle cx="8" cy="54" r="6" fill="currentColor" stroke-width="3" stroke="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 48" to="360 50 52" dur="2s" repeatCount="indefinite"></animateTransform></circle>'})}}),ue({name:"QSpinnerOval",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),ue({name:"QSpinnerPie",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M0 50A50 50 0 0 1 50 0L50 50L0 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="0.8s" repeatCount="indefinite"></animateTransform></path><path d="M50 0A50 50 0 0 1 100 50L50 50L50 0" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="1.6s" repeatCount="indefinite"></animateTransform></path><path d="M100 50A50 50 0 0 1 50 100L50 50L100 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2.4s" repeatCount="indefinite"></animateTransform></path><path d="M50 100A50 50 0 0 1 0 50L50 50L50 100" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="3.2s" repeatCount="indefinite"></animateTransform></path>'})}}),ue({name:"QSpinnerPuff",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle></g>'})}}),ue({name:"QSpinnerRadio",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="scale(0.55)"><circle cx="30" cy="150" r="30" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></circle><path d="M90,150h30c0-49.7-40.3-90-90-90v30C63.1,90,90,116.9,90,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.1" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path><path d="M150,150h30C180,67.2,112.8,0,30,0v30C96.3,30,150,83.7,150,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.2" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path></g>'})}}),ue({name:"QSpinnerRings",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2"><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="1.5s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="1.5s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="1.5s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="3s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="3s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="3s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="8"><animate attributeName="r" begin="0s" dur="1.5s" values="6;1;2;3;4;5;6" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),ue({name:"QSpinnerTail",props:Jt,setup(t){const{cSize:e,classes:i}=ei(t);return()=>S("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="currentColor" stop-opacity="0" offset="0%"></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="currentColor" offset="100%"></stop></linearGradient></defs><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="1"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></circle></g>'})}}),ue({name:"QSplitter",props:{...mt,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:t=>["%","px"].includes(t)},limits:{type:Array,validator:t=>t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"&&t[0]>=0&&t[0]<=t[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=vt(t,n),o=G(null),s={before:G(null),after:G(null)},a=w(()=>`q-splitter no-wrap ${t.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${t.disable===!0?"disabled":"workable"}`+(r.value===!0?" q-splitter--dark":"")),l=w(()=>t.horizontal===!0?"height":"width"),u=w(()=>t.reverse!==!0?"before":"after"),c=w(()=>t.limits!==void 0?t.limits:t.unit==="%"?[10,90]:[50,1/0]);function h(x){return(t.unit==="%"?x:Math.round(x))+t.unit}const d=w(()=>({[u.value]:{[l.value]:h(t.modelValue)}}));let p,f,g,_,v;function b(x){if(x.isFirst===!0){const k=o.value.getBoundingClientRect()[l.value];return p=t.horizontal===!0?"up":"left",f=t.unit==="%"?100:k,g=Math.min(f,c.value[1],Math.max(c.value[0],t.modelValue)),_=(t.reverse!==!0?1:-1)*(t.horizontal===!0?1:n.lang.rtl===!0?-1:1)*(t.unit==="%"?k===0?0:100/k:1),void o.value.classList.add("q-splitter--active")}if(x.isFinal===!0)return v!==t.modelValue&&i("update:modelValue",v),void o.value.classList.remove("q-splitter--active");const C=g+_*(x.direction===p?-1:1)*x.distance[t.horizontal===!0?"y":"x"];v=Math.min(f,c.value[1],Math.max(c.value[0],C)),s[u.value].value.style[l.value]=h(v),t.emitImmediately===!0&&t.modelValue!==v&&i("update:modelValue",v)}const m=w(()=>[[bn,b,void 0,{[t.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function y(x,C){x<C[0]?i("update:modelValue",C[0]):x>C[1]&&i("update:modelValue",C[1])}return se(()=>t.modelValue,x=>{y(x,c.value)}),se(()=>t.limits,()=>{dt(()=>{y(t.modelValue,c.value)})}),()=>{const x=[S("div",{ref:s.before,class:["q-splitter__panel q-splitter__before"+(t.reverse===!0?" col":""),t.beforeClass],style:d.value.before},Ne(e.before)),S("div",{class:["q-splitter__separator",t.separatorClass],style:t.separatorStyle,"aria-disabled":t.disable===!0?"true":void 0},[Cn("div",{class:"q-splitter__separator-area absolute-full"},Ne(e.separator),"sep",t.disable!==!0,()=>m.value)]),S("div",{ref:s.after,class:["q-splitter__panel q-splitter__after"+(t.reverse===!0?"":" col"),t.afterClass],style:d.value.after},Ne(e.after))];return S("div",{class:a.value,ref:o},ni(e.default,x))}}});var GC=ue({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(t,{attrs:e}){const{proxy:{$q:i}}=Me(),n=G(null),r=w(()=>t.stepper.modelValue===t.step.name),o=w(()=>{const _=t.step.disable;return _===!0||_===""}),s=w(()=>{const _=t.step.error;return _===!0||_===""}),a=w(()=>{const _=t.step.done;return o.value===!1&&(_===!0||_==="")}),l=w(()=>{const _=t.step.headerNav,v=_===!0||_===""||_===void 0;return o.value===!1&&t.stepper.headerNav&&v}),u=w(()=>t.step.prefix&&(r.value===!1||t.stepper.activeIcon==="none")&&(s.value===!1||t.stepper.errorIcon==="none")&&(a.value===!1||t.stepper.doneIcon==="none")),c=w(()=>{const _=t.step.icon||t.stepper.inactiveIcon;if(r.value===!0){const v=t.step.activeIcon||t.stepper.activeIcon;return v==="none"?_:v||i.iconSet.stepper.active}if(s.value===!0){const v=t.step.errorIcon||t.stepper.errorIcon;return v==="none"?_:v||i.iconSet.stepper.error}if(o.value===!1&&a.value===!0){const v=t.step.doneIcon||t.stepper.doneIcon;return v==="none"?_:v||i.iconSet.stepper.done}return _}),h=w(()=>{const _=s.value===!0?t.step.errorColor||t.stepper.errorColor:void 0;if(r.value===!0){const v=t.step.activeColor||t.stepper.activeColor||t.step.color;return v!==void 0?v:_}return _!==void 0?_:o.value===!1&&a.value===!0?t.step.doneColor||t.stepper.doneColor||t.step.color||t.stepper.inactiveColor:t.step.color||t.stepper.inactiveColor}),d=w(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(h.value!==void 0?` text-${h.value}`:"")+(s.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(u.value===!0?"prefix":"icon"):"")+(r.value===!0?" q-stepper__tab--active":"")+(a.value===!0?" q-stepper__tab--done":"")+(l.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(o.value===!0?" q-stepper__tab--disabled":"")),p=w(()=>t.stepper.headerNav===!0&&l.value);function f(){n.value!==null&&n.value.focus(),r.value===!1&&t.goToPanel(t.step.name)}function g(_){_.keyCode===13&&r.value===!1&&t.goToPanel(t.step.name)}return()=>{const _={class:d.value};l.value===!0&&(_.onClick=f,_.onKeyup=g,Object.assign(_,o.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0}));const v=[S("div",{class:"q-focus-helper",tabindex:-1,ref:n}),S("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[S("span",{class:"row flex-center"},[u.value===!0?t.step.prefix:S(_t,{name:c.value})])])];if(t.step.title!==void 0&&t.step.title!==null){const b=[S("div",{class:"q-stepper__title"},t.step.title)];t.step.caption!==void 0&&t.step.caption!==null&&b.push(S("div",{class:"q-stepper__caption"},t.step.caption)),v.push(S("div",{class:"q-stepper__label q-stepper__line relative-position"},b))}return Ni(S("div",_,v),[[Gd,p.value]])}}});function HC(t){return S("div",{class:"q-stepper__step-content"},[S("div",{class:"q-stepper__step-inner"},Ne(t.default))])}var Ib={setup:(t,{slots:e})=>()=>HC(e)};ue({name:"QStep",props:{...k0,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=Me(),r=Xi(bS,Mt);if(r===Mt)return Mt;const{getCache:o}=ic(),s=G(null),a=w(()=>r.value.modelValue===t.name),l=w(()=>n.platform.is.ios!==!0&&n.platform.is.chrome===!0||a.value!==!0||r.value.vertical!==!0?{}:{onScroll(h){const{target:d}=h;d.scrollTop>0&&(d.scrollTop=0),t.onScroll!==void 0&&i("scroll",h)}}),u=w(()=>typeof t.name=="string"||typeof t.name=="number"?t.name:String(t.name));function c(){const h=r.value.vertical;return h===!0&&r.value.keepAlive===!0?S(Px,r.value.keepAliveProps.value,a.value===!0?[S(r.value.needsUniqueKeepAliveWrapper.value===!0?o(u.value,()=>({...Ib,name:u.value})):Ib,{key:u.value},e.default)]:void 0):h!==!0||a.value===!0?HC(e):void 0}return()=>S("div",{ref:s,class:"q-stepper__step",role:"tabpanel",...l.value},r.value.vertical===!0?[S(GC,{stepper:r.value,step:t,goToPanel:r.value.goToPanel}),r.value.animated===!0?S(F0,c):c()]:[c()])}});var $I=/(-\w)/g;ue({name:"QStepper",props:{...mt,...T0,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:E0,setup(t,{slots:e}){const i=Me(),n=vt(t,i.proxy.$q),{updatePanelsList:r,isValidPanelName:o,updatePanelIndex:s,getPanelContent:a,getPanels:l,panelDirectives:u,goToPanel:c,keepAliveProps:h,needsUniqueKeepAliveWrapper:d}=L0();ko(bS,w(()=>({goToPanel:c,keepAliveProps:h,needsUniqueKeepAliveWrapper:d,...t})));const p=w(()=>"q-stepper q-stepper--"+(t.vertical===!0?"vertical":"horizontal")+(t.flat===!0?" q-stepper--flat":"")+(t.bordered===!0?" q-stepper--bordered":"")+(n.value===!0?" q-stepper--dark q-dark":"")),f=w(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${t.alternativeLabels===!0?"alternative":"standard"}-labels`+(t.flat===!1||t.bordered===!0?" q-stepper__header--border":"")+(t.contracted===!0?" q-stepper__header--contracted":"")+(t.headerClass!==void 0?` ${t.headerClass}`:""));function g(){const _=Ne(e.message,[]);if(t.vertical===!0){o(t.modelValue)&&s();const v=S("div",{class:"q-stepper__content"},Ne(e.default));return _===void 0?[v]:_.concat(v)}return[S("div",{class:f.value},l().map(v=>{const b=function(m){const y={};for(const x in m){const C=x.replace($I,k=>k[1].toUpperCase());y[C]=m[x]}return y}(v.props);return S(GC,{key:b.name,stepper:t,step:b,goToPanel:c})})),_,Cn("div",{class:"q-stepper__content q-panel-parent"},a(),"cont",t.swipeable,()=>u.value)]}return()=>(r(e),S("div",{class:p.value},ni(e.navigation,g())))}}),ue({name:"QStepperNavigation",setup:(t,{slots:e})=>()=>S("div",{class:"q-stepper__nav"},Ne(e.default))});var GI=ue({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(t,{slots:e,emit:i}){const n=Me(),{proxy:{$q:r}}=n,o=s=>{i("click",s)};return()=>{if(t.props===void 0)return S("th",{class:t.autoWidth===!0?"q-table--col-auto-width":"",onClick:o},Ne(e.default));let s,a;const l=n.vnode.key;if(l){if(s=t.props.colsMap[l],s===void 0)return}else s=t.props.col;if(s.sortable===!0){const c=s.align==="right"?"unshift":"push";a=Ju(e.default,[]),a[c](S(_t,{class:s.__iconClass,name:r.iconSet.table.arrowUp}))}else a=Ne(e.default);const u={class:s.__thClass+(t.autoWidth===!0?" q-table--col-auto-width":""),style:s.headerStyle,onClick:c=>{s.sortable===!0&&t.props.sort(s),o(c)}};return S("th",u,a)}}});function UC(t,e){return S("div",t,[S("table",{class:"q-table"},e)])}var HI={list:D0,table:CI},UI=["list","table","__qtable"],WI=ue({name:"QVirtualScroll",props:{...Wm,type:{type:String,default:"list",validator:t=>UI.includes(t)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Ps},setup(t,{slots:e,attrs:i}){let n;const r=G(null),o=w(()=>t.itemsSize>=0&&t.itemsFn!==void 0?parseInt(t.itemsSize,10):Array.isArray(t.items)?t.items.length:0),{virtualScrollSliceRange:s,localResetVirtualScroll:a,padVirtualScroll:l,onVirtualScrollEvt:u}=$C({virtualScrollLength:o,getVirtualScrollTarget:function(){return n},getVirtualScrollEl:p}),c=w(()=>{if(o.value===0)return[];const v=(b,m)=>({index:s.value.from+m,item:b});return t.itemsFn===void 0?t.items.slice(s.value.from,s.value.to).map(v):t.itemsFn(s.value.from,s.value.to-s.value.from).map(v)}),h=w(()=>"q-virtual-scroll q-virtual-scroll"+(t.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(t.scrollTarget!==void 0?"":" scroll")),d=w(()=>t.scrollTarget!==void 0?{}:{tabindex:0});function p(){return r.value.$el||r.value}function f(){n=mr(p(),t.scrollTarget),n.addEventListener("scroll",u,Dt.passive)}function g(){n!==void 0&&(n.removeEventListener("scroll",u,Dt.passive),n=void 0)}function _(){let v=l(t.type==="list"?"div":"tbody",c.value.map(e.default));return e.before!==void 0&&(v=e.before().concat(v)),ni(e.after,v)}return se(o,()=>{a()}),se(()=>t.scrollTarget,()=>{g(),f()}),uv(()=>{a()}),Nt(()=>{f()}),Ms(()=>{f()}),Dr(()=>{g()}),ht(()=>{g()}),()=>{if(e.default!==void 0)return t.type==="__qtable"?UC({ref:r,class:"q-table__middle "+h.value},_()):S(HI[t.type],{...i,ref:r,class:[i.class,h.value],...d.value},_)}}}),YI={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:t=>t==="ad"||t==="da",default:"ad"}};function KI(t,e,i,n){const r=w(()=>{const{sortBy:s}=e.value;return s&&i.value.find(a=>a.name===s)||null}),o=w(()=>t.sortMethod!==void 0?t.sortMethod:(s,a,l)=>{const u=i.value.find(d=>d.name===a);if(u===void 0||u.field===void 0)return s;const c=l===!0?-1:1,h=typeof u.field=="function"?d=>u.field(d):d=>d[u.field];return s.sort((d,p)=>{let f=h(d),g=h(p);return u.rawSort!==void 0?u.rawSort(f,g,d,p)*c:f==null?-1*c:g==null?1*c:u.sort!==void 0?u.sort(f,g,d,p)*c:Ru(f)===!0&&Ru(g)===!0?(f-g)*c:Rm(f)===!0&&Rm(g)===!0?function(_,v){return new Date(_)-new Date(v)}(f,g)*c:typeof f=="boolean"&&typeof g=="boolean"?(f-g)*c:([f,g]=[f,g].map(_=>(_+"").toLocaleString().toLowerCase()),f<g?-1*c:f===g?0:c)})});return{columnToSort:r,computedSortMethod:o,sort:function(s){let a=t.columnSortOrder;if(Ei(s)===!0)s.sortOrder&&(a=s.sortOrder),s=s.name;else{const c=i.value.find(h=>h.name===s);c!==void 0&&c.sortOrder&&(a=c.sortOrder)}let{sortBy:l,descending:u}=e.value;l!==s?(l=s,u=a==="da"):t.binaryStateSort===!0?u=!u:u===!0?a==="ad"?l=null:u=!1:a==="ad"?u=!0:l=null,n({sortBy:l,descending:u,page:1})}}}var XI={filter:[String,Object],filterMethod:Function};function Rb(t){return t.page<1&&(t.page=1),t.rowsPerPage!==void 0&&t.rowsPerPage<1&&(t.rowsPerPage=0),t}var ZI={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]},QI={selection:{type:String,default:"none",validator:t=>["single","multiple","none"].includes(t)},selected:{type:Array,default:()=>[]}};function qb(t){return Array.isArray(t)?t.slice():[]}var JI={expanded:Array},eR={visibleColumns:Array},Zc="q-table__bottom row items-center",Ab={};function tR(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}Eb.forEach(t=>{Ab[t]={}}),ue({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:t=>["horizontal","vertical","cell","none"].includes(t)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...Ab,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...mt,...P0,...eR,...XI,...ZI,...JI,...QI,...YI},emits:["request","virtualScroll",...I0,"update:expanded","update:selected","selection"],setup(t,{slots:e,emit:i}){const n=Me(),{proxy:{$q:r}}=n,o=vt(t,r),{inFullscreen:s,toggleFullscreen:a}=R0(),l=w(()=>typeof t.rowKey=="function"?t.rowKey:ee=>ee[t.rowKey]),u=G(null),c=G(null),h=w(()=>t.grid!==!0&&t.virtualScroll===!0),d=w(()=>" q-table__card"+(o.value===!0?" q-table__card--dark q-dark":"")+(t.square===!0?" q-table--square":"")+(t.flat===!0?" q-table--flat":"")+(t.bordered===!0?" q-table--bordered":"")),p=w(()=>`q-table__container q-table--${t.separator}-separator column no-wrap`+(t.grid===!0?" q-table--grid":d.value)+(o.value===!0?" q-table--dark":"")+(t.dense===!0?" q-table--dense":"")+(t.wrapCells===!1?" q-table--no-wrap":"")+(s.value===!0?" fullscreen scroll":"")),f=w(()=>p.value+(t.loading===!0?" q-table--loading":""));se(()=>t.tableStyle+t.tableClass+t.tableHeaderStyle+t.tableHeaderClass+p.value,()=>{h.value===!0&&c.value!==null&&c.value.reset()});const{innerPagination:g,computedPagination:_,isServerSide:v,requestServerInteraction:b,setPagination:m}=function(ee,ke){const{props:xe,emit:ye}=ee,we=G(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:xe.rowsPerPageOptions.length!==0?xe.rowsPerPageOptions[0]:5},xe.pagination)),D=w(()=>Rb(xe["onUpdate:pagination"]!==void 0?{...we.value,...xe.pagination}:we.value)),H=w(()=>D.value.rowsNumber!==void 0);function Q(ne){le({pagination:ne,filter:xe.filter})}function le(ne={}){dt(()=>{ye("request",{pagination:ne.pagination||D.value,filter:ne.filter||xe.filter,getCellValue:ke})})}return{innerPagination:we,computedPagination:D,isServerSide:H,requestServerInteraction:le,setPagination:function(ne,Te){const de=Rb({...D.value,...ne});(function(Be,Ye){for(const bt in Ye)if(Ye[bt]!==Be[bt])return!1;return!0})(D.value,de)!==!0?H.value!==!0?xe.pagination!==void 0&&xe["onUpdate:pagination"]!==void 0?ye("update:pagination",de):we.value=de:Q(de):H.value===!0&&Te===!0&&Q(de)}}}(n,Fe),{computedFilterMethod:y}=function(ee,ke){const xe=w(()=>ee.filterMethod!==void 0?ee.filterMethod:(ye,we,D,H)=>{const Q=we?we.toLowerCase():"";return ye.filter(le=>D.some(ne=>{const Te=H(ne,le)+"";return(Te==="undefined"||Te==="null"?"":Te.toLowerCase()).indexOf(Q)!==-1}))});return se(()=>ee.filter,()=>{dt(()=>{ke({page:1},!0)})},{deep:!0}),{computedFilterMethod:xe}}(t,m),{isRowExpanded:x,setExpanded:C,updateExpanded:k}=function(ee,ke){const xe=G(qb(ee.expanded));function ye(we){ee.expanded!==void 0?ke("update:expanded",we):xe.value=we}return se(()=>ee.expanded,we=>{xe.value=qb(we)}),{isRowExpanded:function(we){return xe.value.includes(we)},setExpanded:ye,updateExpanded:function(we,D){const H=xe.value.slice(),Q=H.indexOf(we);D===!0?Q===-1&&(H.push(we),ye(H)):Q!==-1&&(H.splice(Q,1),ye(H))}}}(t,i),P=w(()=>{let ee=t.rows;if(v.value===!0||ee.length===0)return ee;const{sortBy:ke,descending:xe}=_.value;return t.filter&&(ee=y.value(ee,t.filter,$.value,Fe)),ie.value!==null&&(ee=j.value(t.rows===ee?ee.slice():ee,ke,xe)),ee}),A=w(()=>P.value.length),E=w(()=>{let ee=P.value;if(v.value===!0)return ee;const{rowsPerPage:ke}=_.value;return ke!==0&&(N.value===0&&t.rows!==ee?ee.length>K.value&&(ee=ee.slice(0,K.value)):ee=ee.slice(N.value,K.value)),ee}),{hasSelectionMode:L,singleSelection:T,multipleSelection:I,allRowsSelected:M,someRowsSelected:R,rowsSelectedNumber:q,isRowSelected:F,clearSelection:B,updateSelection:V}=function(ee,ke,xe,ye){const we=w(()=>{const de={};return ee.selected.map(ye.value).forEach(Be=>{de[Be]=!0}),de}),D=w(()=>ee.selection!=="none"),H=w(()=>ee.selection==="single"),Q=w(()=>ee.selection==="multiple"),le=w(()=>xe.value.length!==0&&xe.value.every(de=>we.value[ye.value(de)]===!0)),ne=w(()=>le.value!==!0&&xe.value.some(de=>we.value[ye.value(de)]===!0)),Te=w(()=>ee.selected.length);return{hasSelectionMode:D,singleSelection:H,multipleSelection:Q,allRowsSelected:le,someRowsSelected:ne,rowsSelectedNumber:Te,isRowSelected:function(de){return we.value[de]===!0},clearSelection:function(){ke("update:selected",[])},updateSelection:function(de,Be,Ye,bt){ke("selection",{rows:Be,added:Ye,keys:de,evt:bt});const zt=H.value===!0?Ye===!0?Be:[]:Ye===!0?ee.selected.concat(Be):ee.selected.filter(Je=>de.includes(ye.value(Je))===!1);ke("update:selected",zt)}}}(t,i,E,l),{colList:O,computedCols:$,computedColsMap:J,computedColspan:te}=function(ee,ke,xe){const ye=w(()=>{if(ee.columns!==void 0)return ee.columns;const Q=ee.rows[0];return Q!==void 0?Object.keys(Q).map(le=>({name:le,label:le.toUpperCase(),field:le,align:Ru(Q[le])?"right":"left",sortable:!0})):[]}),we=w(()=>{const{sortBy:Q,descending:le}=ke.value;return(ee.visibleColumns!==void 0?ye.value.filter(ne=>ne.required===!0||ee.visibleColumns.includes(ne.name)===!0):ye.value).map(ne=>{const Te=ne.align||"right",de=`text-${Te}`;return{...ne,align:Te,__iconClass:`q-table__sort-icon q-table__sort-icon--${Te}`,__thClass:de+(ne.headerClasses!==void 0?" "+ne.headerClasses:"")+(ne.sortable===!0?" sortable":"")+(ne.name===Q?" sorted "+(le===!0?"sort-desc":""):""),__tdStyle:ne.style!==void 0?typeof ne.style!="function"?()=>ne.style:ne.style:()=>null,__tdClass:ne.classes!==void 0?typeof ne.classes!="function"?()=>de+" "+ne.classes:Be=>de+" "+ne.classes(Be):()=>de}})}),D=w(()=>{const Q={};return we.value.forEach(le=>{Q[le.name]=le}),Q}),H=w(()=>ee.tableColspan!==void 0?ee.tableColspan:we.value.length+(xe.value===!0?1:0));return{colList:ye,computedCols:we,computedColsMap:D,computedColspan:H}}(t,_,L),{columnToSort:ie,computedSortMethod:j,sort:z}=KI(t,_,O,m),{firstRowIndex:N,lastRowIndex:K,isFirstPage:U,isLastPage:W,pagesNumber:ve,computedRowsPerPageOptions:ce,computedRowsNumber:fe,firstPage:pe,prevPage:Le,nextPage:Pe,lastPage:me}=function(ee,ke,xe,ye,we,D){const{props:H,emit:Q,proxy:{$q:le}}=ee,ne=w(()=>ye.value===!0?xe.value.rowsNumber||0:D.value),Te=w(()=>{const{page:Je,rowsPerPage:ui}=xe.value;return(Je-1)*ui}),de=w(()=>{const{page:Je,rowsPerPage:ui}=xe.value;return Je*ui}),Be=w(()=>xe.value.page===1),Ye=w(()=>xe.value.rowsPerPage===0?1:Math.max(1,Math.ceil(ne.value/xe.value.rowsPerPage))),bt=w(()=>de.value===0||xe.value.page>=Ye.value),zt=w(()=>(H.rowsPerPageOptions.includes(ke.value.rowsPerPage)?H.rowsPerPageOptions:[ke.value.rowsPerPage].concat(H.rowsPerPageOptions)).map(Je=>({label:Je===0?le.lang.table.allRows:""+Je,value:Je})));return se(Ye,(Je,ui)=>{if(Je===ui)return;const br=xe.value.page;Je&&!br?we({page:1}):Je<br&&we({page:Je})}),H["onUpdate:pagination"]!==void 0&&Q("update:pagination",{...xe.value}),{firstRowIndex:Te,lastRowIndex:de,isFirstPage:Be,isLastPage:bt,pagesNumber:Ye,computedRowsPerPageOptions:zt,computedRowsNumber:ne,firstPage:function(){we({page:1})},prevPage:function(){const{page:Je}=xe.value;Je>1&&we({page:Je-1})},nextPage:function(){const{page:Je,rowsPerPage:ui}=xe.value;de.value>0&&Je*ui<ne.value&&we({page:Je+1})},lastPage:function(){we({page:Ye.value})}}}(n,g,_,v,m,A),Se=w(()=>E.value.length===0),Re=w(()=>{const ee={};return Eb.forEach(ke=>{ee[ke]=t[ke]}),ee.virtualScrollItemSize===void 0&&(ee.virtualScrollItemSize=t.dense===!0?28:48),ee});function Ge(){if(t.grid===!0)return function(){const xe=e.item!==void 0?e.item:ye=>{const we=ye.cols.map(H=>S("div",{class:"q-table__grid-item-row"},[S("div",{class:"q-table__grid-item-title"},[H.label]),S("div",{class:"q-table__grid-item-value"},[H.value])]));if(L.value===!0){const H=e["body-selection"],Q=H!==void 0?H(ye):[S(nu,{modelValue:ye.selected,color:t.color,dark:o.value,dense:t.dense,"onUpdate:modelValue":(le,ne)=>{V([ye.key],[ye.row],le,ne)}})];we.unshift(S("div",{class:"q-table__grid-item-row"},Q),S(zr,{dark:o.value}))}const D={class:["q-table__grid-item-card"+d.value,t.cardClass],style:t.cardStyle};return t.onRowClick===void 0&&t.onRowDblclick===void 0||(D.class[0]+=" cursor-pointer",t.onRowClick!==void 0&&(D.onClick=H=>{i("RowClick",H,ye.row,ye.pageIndex)}),t.onRowDblclick!==void 0&&(D.onDblclick=H=>{i("RowDblclick",H,ye.row,ye.pageIndex)})),S("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(ye.selected===!0?" q-table__grid-item--selected":"")},[S("div",D,we)])};return S("div",{class:["q-table__grid-content row",t.cardContainerClass],style:t.cardContainerStyle},E.value.map((ye,we)=>xe(Ce({key:l.value(ye),row:ye,pageIndex:we}))))}();const ee=t.hideHeader!==!0?qe:null;if(h.value===!0){const xe=e["top-row"],ye=e["bottom-row"],we={default:D=>Z(D.item,e.body,D.index)};if(xe!==void 0){const D=S("tbody",xe({cols:$.value}));we.before=ee===null?()=>D:()=>[ee()].concat(D)}else ee!==null&&(we.before=ee);return ye!==void 0&&(we.after=()=>S("tbody",ye({cols:$.value}))),S(WI,{ref:c,class:t.tableClass,style:t.tableStyle,...Re.value,scrollTarget:t.virtualScrollTarget,items:E.value,type:"__qtable",tableColspan:te.value,onVirtualScroll:oe},we)}const ke=[ae()];return ee!==null&&ke.unshift(ee()),UC({class:["q-table__middle scroll",t.tableClass],style:t.tableStyle},ke)}function oe(ee){i("virtualScroll",ee)}function he(){return[S(RI,{class:"q-table__linear-progress",color:t.color,dark:o.value,indeterminate:!0,trackColor:"transparent"})]}function Z(ee,ke,xe){const ye=l.value(ee),we=F(ye);if(ke!==void 0)return ke(Ce({key:ye,row:ee,pageIndex:xe,__trClass:we?"selected":""}));const D=e["body-cell"],H=$.value.map(le=>{const ne=e[`body-cell-${le.name}`],Te=ne!==void 0?ne:D;return Te!==void 0?Te(function(de){return Ie(de),vi(de,"value",()=>Fe(de.col,de.row)),de}({key:ye,row:ee,pageIndex:xe,col:le})):S("td",{class:le.__tdClass(ee),style:le.__tdStyle(ee)},Fe(le,ee))});if(L.value===!0){const le=e["body-selection"],ne=le!==void 0?le(function(Te){return Ie(Te),Te}({key:ye,row:ee,pageIndex:xe})):[S(nu,{modelValue:we,color:t.color,dark:o.value,dense:t.dense,"onUpdate:modelValue":(Te,de)=>{V([ye],[ee],Te,de)}})];H.unshift(S("td",{class:"q-table--col-auto-width"},ne))}const Q={key:ye,class:{selected:we}};return t.onRowClick!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onClick=le=>{i("rowClick",le,ee,xe)}),t.onRowDblclick!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onDblclick=le=>{i("rowDblclick",le,ee,xe)}),t.onRowContextmenu!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onContextmenu=le=>{i("rowContextmenu",le,ee,xe)}),S("tr",Q,H)}function ae(){const ee=e.body,ke=e["top-row"],xe=e["bottom-row"];let ye=E.value.map((we,D)=>Z(we,ee,D));return ke!==void 0&&(ye=ke({cols:$.value}).concat(ye)),xe!==void 0&&(ye=ye.concat(xe({cols:$.value}))),S("tbody",ye)}function Ce(ee){return Ie(ee),ee.cols=ee.cols.map(ke=>vi({...ke},"value",()=>Fe(ke,ee.row))),ee}function Ie(ee){Object.assign(ee,{cols:$.value,colsMap:J.value,sort:z,rowIndex:N.value+ee.pageIndex,color:t.color,dark:o.value,dense:t.dense}),L.value===!0&&vi(ee,"selected",()=>F(ee.key),(ke,xe)=>{V([ee.key],[ee.row],ke,xe)}),vi(ee,"expand",()=>x(ee.key),ke=>{k(ee.key,ke)})}function Fe(ee,ke){const xe=typeof ee.field=="function"?ee.field(ke):ke[ee.field];return ee.format!==void 0?ee.format(xe,ke):xe}const X=w(()=>({pagination:_.value,pagesNumber:ve.value,isFirstPage:U.value,isLastPage:W.value,firstPage:pe,prevPage:Le,nextPage:Pe,lastPage:me,inFullscreen:s.value,toggleFullscreen:a}));function re(){const ee=e.top,ke=e["top-left"],xe=e["top-right"],ye=e["top-selection"],we=L.value===!0&&ye!==void 0&&q.value>0,D="q-table__top relative-position row items-center";if(ee!==void 0)return S("div",{class:D},[ee(X.value)]);let H;return we===!0?H=ye(X.value).slice():(H=[],ke!==void 0?H.push(S("div",{class:"q-table__control"},[ke(X.value)])):t.title&&H.push(S("div",{class:"q-table__control"},[S("div",{class:["q-table__title",t.titleClass]},t.title)]))),xe!==void 0&&(H.push(S("div",{class:"q-table__separator col"})),H.push(S("div",{class:"q-table__control"},[xe(X.value)]))),H.length!==0?S("div",{class:D},H):void 0}const ge=w(()=>R.value===!0?null:M.value);function qe(){const ee=function(){const ke=e.header,xe=e["header-cell"];if(ke!==void 0)return ke(He({header:!0})).slice();const ye=$.value.map(we=>{const D=e[`header-cell-${we.name}`],H=D!==void 0?D:xe,Q=He({col:we});return H!==void 0?H(Q):S(GI,{key:we.name,props:Q},()=>we.label)});if(T.value===!0&&t.grid!==!0)ye.unshift(S("th",{class:"q-table--col-auto-width"}," "));else if(I.value===!0){const we=e["header-selection"],D=we!==void 0?we(He({})):[S(nu,{color:t.color,modelValue:ge.value,dark:o.value,dense:t.dense,"onUpdate:modelValue":tt})];ye.unshift(S("th",{class:"q-table--col-auto-width"},D))}return[S("tr",{class:t.tableHeaderClass,style:t.tableHeaderStyle},ye)]}();return t.loading===!0&&e.loading===void 0&&ee.push(S("tr",{class:"q-table__progress"},[S("th",{class:"relative-position",colspan:te.value},he())])),S("thead",ee)}function He(ee){return Object.assign(ee,{cols:$.value,sort:z,colsMap:J.value,color:t.color,dark:o.value,dense:t.dense}),I.value===!0&&vi(ee,"selected",()=>ge.value,tt),ee}function tt(ee){R.value===!0&&(ee=!1),V(E.value.map(l.value),E.value,ee)}const Ae=w(()=>{const ee=[t.iconFirstPage||r.iconSet.table.firstPage,t.iconPrevPage||r.iconSet.table.prevPage,t.iconNextPage||r.iconSet.table.nextPage,t.iconLastPage||r.iconSet.table.lastPage];return r.lang.rtl===!0?ee.reverse():ee});function Ze(){if(t.hideBottom===!0)return;if(Se.value===!0){if(t.hideNoData===!0)return;const xe=t.loading===!0?t.loadingLabel||r.lang.table.loading:t.filter?t.noResultsLabel||r.lang.table.noResults:t.noDataLabel||r.lang.table.noData,ye=e["no-data"],we=ye!==void 0?[ye({message:xe,icon:r.iconSet.table.warning,filter:t.filter})]:[S(_t,{class:"q-table__bottom-nodata-icon",name:r.iconSet.table.warning}),xe];return S("div",{class:Zc+" q-table__bottom--nodata"},we)}const ee=e.bottom;if(ee!==void 0)return S("div",{class:Zc},[ee(X.value)]);const ke=t.hideSelectedBanner!==!0&&L.value===!0&&q.value>0?[S("div",{class:"q-table__control"},[S("div",[(t.selectedRowsLabel||r.lang.table.selectedRecords)(q.value)])])]:[];return t.hidePagination!==!0?S("div",{class:Zc+" justify-end"},function(xe){let ye;const{rowsPerPage:we}=_.value,D=t.paginationLabel||r.lang.table.pagination,H=e.pagination,Q=t.rowsPerPageOptions.length>1;if(xe.push(S("div",{class:"q-table__separator col"})),Q===!0&&xe.push(S("div",{class:"q-table__control"},[S("span",{class:"q-table__bottom-item"},[t.rowsPerPageLabel||r.lang.table.recordsPerPage]),S(NI,{class:"q-table__select inline q-table__bottom-item",color:t.color,modelValue:we,options:ce.value,displayValue:we===0?r.lang.table.allRows:we,dark:o.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":We})])),H!==void 0)ye=H(X.value);else if(ye=[S("span",we!==0?{class:"q-table__bottom-item"}:{},[we?D(N.value+1,Math.min(K.value,fe.value),fe.value):D(1,A.value,fe.value)])],we!==0&&ve.value>1){const le={color:t.color,round:!0,dense:!0,flat:!0};t.dense===!0&&(le.size="sm"),ve.value>2&&ye.push(S(xt,{key:"pgFirst",...le,icon:Ae.value[0],disable:U.value,onClick:pe})),ye.push(S(xt,{key:"pgPrev",...le,icon:Ae.value[1],disable:U.value,onClick:Le}),S(xt,{key:"pgNext",...le,icon:Ae.value[2],disable:W.value,onClick:Pe})),ve.value>2&&ye.push(S(xt,{key:"pgLast",...le,icon:Ae.value[3],disable:W.value,onClick:me}))}return xe.push(S("div",{class:"q-table__control"},ye)),xe}(ke)):ke.length!==0?S("div",{class:Zc},ke):void 0}function We(ee){m({page:1,rowsPerPage:ee.value})}return Object.assign(n.proxy,{requestServerInteraction:b,setPagination:m,firstPage:pe,prevPage:Le,nextPage:Pe,lastPage:me,isRowSelected:F,clearSelection:B,isRowExpanded:x,setExpanded:C,sort:z,resetVirtualScroll:function(){h.value===!0&&c.value.reset()},scrollTo:function(ee,ke){if(c.value!==null)return void c.value.scrollTo(ee,ke);ee=parseInt(ee,10);const xe=u.value.querySelector(`tbody tr:nth-of-type(${ee+1})`);if(xe!==null){const ye=u.value.querySelector(".q-table__middle.scroll"),we=xe.offsetTop-t.virtualScrollStickySizeStart,D=we<ye.scrollTop?"decrease":"increase";ye.scrollTop=we,i("virtualScroll",{index:ee,from:0,to:g.value.rowsPerPage-1,direction:D})}},getCellValue:Fe}),yS(n.proxy,{filteredSortedRows:()=>P.value,computedRows:()=>E.value,computedRowsNumber:()=>fe.value}),()=>{const ee=[re()],ke={ref:u,class:f.value};return t.grid===!0?ee.push(function(){const xe=t.gridHeader===!0?[S("table",{class:"q-table"},[qe()])]:t.loading===!0&&e.loading===void 0?he():void 0;return S("div",{class:"q-table__middle"},xe)}()):Object.assign(ke,{class:[ke.class,t.cardClass],style:t.cardStyle}),ee.push(Ge(),Ze()),t.loading===!0&&e.loading!==void 0&&ee.push(e.loading()),S("div",ke,ee)}}}),ue({name:"QTr",props:{props:Object,noHover:Boolean},setup(t,{slots:e}){const i=w(()=>"q-tr"+(t.props===void 0||t.props.header===!0?"":" "+t.props.__trClass)+(t.noHover===!0?" q-tr--no-hover":""));return()=>S("tr",{class:i.value},Ne(e.default))}}),ue({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(t,{slots:e}){const i=Me(),n=w(()=>"q-td"+(t.autoWidth===!0?" q-table--col-auto-width":"")+(t.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(t.props===void 0)return S("td",{class:n.value},Ne(e.default));const r=i.vnode.key,o=(t.props.colsMap!==void 0?t.props.colsMap[r]:null)||t.props.col;if(o===void 0)return;const{row:s}=t.props;return S("td",{class:n.value+o.__tdClass(s),style:o.__tdStyle(s)},Ne(e.default))}}}),ue({name:"QRouteTab",props:{...ec,...hC},emits:cC,setup(t,{slots:e,emit:i}){const n=$d({useDisableForRouterLinkProps:!1}),{renderTab:r,$tabs:o}=dC(t,e,i,{exact:w(()=>t.exact),...n});return se(()=>`${t.name} | ${t.exact} | ${(n.resolvedLink.value||{}).href}`,o.verifyRouteModel),()=>r(n.linkTag.value,n.linkAttrs.value)}}),ue({name:"QTime",props:{...mt,...Tn,...vd,modelValue:{required:!0,validator:t=>typeof t=="string"||t===null},mask:{...vd.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:mC,setup(t,{slots:e,emit:i}){const n=Me(),{$q:r}=n.proxy,o=vt(t,r),{tabindex:s,headerClass:a,getLocale:l,getCurrentDate:u}=vC(t,r),c=Io(tc(t));let h,d;const p=G(null),f=w(()=>t.calendar!=="persian"&&t.mask!==null?t.mask:"HH:mm"+(t.withSeconds===!0?":ss":"")),g=w(()=>l()),_=w(()=>function(){if(typeof t.defaultDate!="string"){const X=u(!0);return X.dateHash=Mr(X),X}return Gl(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}()),v=Gl(t.modelValue,f.value,g.value,t.calendar,_.value),b=G(function(X,re){return X.hour!==null&&X.minute===null?"minute":"hour"}(v)),m=G(v),y=G(v.hour===null||v.hour<12),x=w(()=>"q-time q-time--"+(t.landscape===!0?"landscape":"portrait")+(o.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),C=w(()=>{const X=m.value;return{hour:X.hour===null?"--":k.value===!0?St(X.hour):String(y.value===!0?X.hour===0?12:X.hour:X.hour>12?X.hour-12:X.hour),minute:X.minute===null?"--":St(X.minute),second:X.second===null?"--":St(X.second)}}),k=w(()=>t.format24h!==null?t.format24h:r.lang.date.format24h),P=w(()=>{const X=b.value==="hour",re=X===!0?12:60,ge=m.value[b.value];let qe=`rotate(${Math.round(ge*(360/re))-180}deg) translateX(-50%)`;return X===!0&&k.value===!0&&m.value.hour>=12&&(qe+=" scale(.7)"),{transform:qe}}),A=w(()=>m.value.hour!==null),E=w(()=>A.value===!0&&m.value.minute!==null),L=w(()=>t.hourOptions!==void 0?X=>t.hourOptions.includes(X):t.options!==void 0?X=>t.options(X,null,null):null),T=w(()=>t.minuteOptions!==void 0?X=>t.minuteOptions.includes(X):t.options!==void 0?X=>t.options(m.value.hour,X,null):null),I=w(()=>t.secondOptions!==void 0?X=>t.secondOptions.includes(X):t.options!==void 0?X=>t.options(m.value.hour,m.value.minute,X):null),M=w(()=>{if(L.value===null)return null;const X=$(0,11,L.value),re=$(12,11,L.value);return{am:X,pm:re,values:X.values.concat(re.values)}}),R=w(()=>T.value!==null?$(0,59,T.value):null),q=w(()=>I.value!==null?$(0,59,I.value):null),F=w(()=>{switch(b.value){case"hour":return M.value;case"minute":return R.value;case"second":return q.value}}),B=w(()=>{let X,re,ge=0,qe=1;const He=F.value!==null?F.value.values:void 0;b.value==="hour"?k.value===!0?(X=0,re=23):(X=0,re=11,y.value===!1&&(ge=12)):(X=0,re=55,qe=5);const tt=[];for(let Ae=X,Ze=X;Ae<=re;Ae+=qe,Ze++){const We=Ae+ge,ee=He!==void 0&&He.includes(We)===!1,ke=b.value==="hour"&&Ae===0?k.value===!0?"00":"12":Ae;tt.push({val:We,index:Ze,disable:ee,label:ke})}return tt}),V=w(()=>[[bn,z,void 0,{stop:!0,prevent:!0,mouse:!0}]]);function O(){const X={...u(),...tR()};Ce(X),Object.assign(m.value,X),b.value="hour"}function $(X,re,ge){const qe=Array.apply(null,{length:re+1}).map((He,tt)=>{const Ae=tt+X;return{index:Ae,val:ge(Ae)===!0}}).filter(He=>He.val===!0).map(He=>He.index);return{min:qe[0],max:qe[qe.length-1],values:qe,threshold:re+1}}function J(X,re,ge){const qe=Math.abs(X-re);return Math.min(qe,ge-qe)}function te(X,{min:re,max:ge,values:qe,threshold:He}){if(X===re)return re;if(X<re||X>ge)return J(X,re,He)<=J(X,ge,He)?re:ge;const tt=qe.findIndex(We=>X<=We),Ae=qe[tt-1],Ze=qe[tt];return X-Ae<=Ze-X?Ae:Ze}function ie(){return yo(n)===!0||F.value!==null&&(F.value.values.length===0||b.value==="hour"&&k.value!==!0&&M.value[y.value===!0?"am":"pm"].values.length===0)}function j(){const X=p.value,{top:re,left:ge,width:qe}=X.getBoundingClientRect(),He=qe/2;return{top:re+He,left:ge+He,dist:.7*He}}function z(X){if(ie()!==!0){if(X.isFirst===!0)return h=j(),void(d=K(X.evt,h));d=K(X.evt,h,d),X.isFinal===!0&&(h=!1,d=null,N())}}function N(){b.value==="hour"?b.value="minute":t.withSeconds&&b.value==="minute"&&(b.value="second")}function K(X,re,ge){const qe=Di(X),He=Math.abs(qe.top-re.top),tt=Math.sqrt(Math.pow(Math.abs(qe.top-re.top),2)+Math.pow(Math.abs(qe.left-re.left),2));let Ae,Ze=Math.asin(He/tt)*(180/Math.PI);if(Ze=qe.top<re.top?re.left<qe.left?90-Ze:270+Ze:re.left<qe.left?Ze+90:270-Ze,b.value==="hour"){if(Ae=Ze/30,M.value!==null){const We=k.value!==!0?y.value===!0:M.value.am.values.length!==0&&M.value.pm.values.length!==0?tt>=re.dist:M.value.am.values.length!==0;Ae=te(Ae+(We===!0?0:12),M.value[We===!0?"am":"pm"])}else Ae=Math.round(Ae),k.value===!0?tt<re.dist?Ae<12&&(Ae+=12):Ae===12&&(Ae=0):y.value===!0&&Ae===12?Ae=0:y.value===!1&&Ae!==12&&(Ae+=12);k.value===!0&&(y.value=Ae<12)}else Ae=Math.round(Ze/6)%60,b.value==="minute"&&R.value!==null?Ae=te(Ae,R.value):b.value==="second"&&q.value!==null&&(Ae=te(Ae,q.value));return ge!==Ae&&Ge[b.value](Ae),Ae}se(()=>t.modelValue,X=>{const re=Gl(X,f.value,g.value,t.calendar,_.value);re.dateHash===m.value.dateHash&&re.timeHash===m.value.timeHash||(m.value=re,re.hour===null?b.value="hour":y.value=re.hour<12)}),se([f,g],()=>{dt(()=>{Ce()})});const U={hour(){b.value="hour"},minute(){b.value="minute"},second(){b.value="second"}};function W(X){X.keyCode===13&&oe()}function ve(X){X.keyCode===13&&he()}function ce(X){ie()!==!0&&(r.platform.is.desktop!==!0&&K(X,j()),N())}function fe(X){ie()!==!0&&K(X,j())}function pe(X){if(X.keyCode===13)b.value="hour";else if([37,39].includes(X.keyCode)){const re=X.keyCode===37?-1:1;if(M.value!==null){const ge=k.value===!0?M.value.values:M.value[y.value===!0?"am":"pm"].values;if(ge.length===0)return;if(m.value.hour===null)me(ge[0]);else{const qe=(ge.length+ge.indexOf(m.value.hour)+re)%ge.length;me(ge[qe])}}else{const ge=k.value===!0?24:12;me((k.value!==!0&&y.value===!1?12:0)+(24+(m.value.hour===null?-re:m.value.hour)+re)%ge)}}}function Le(X){if(X.keyCode===13)b.value="minute";else if([37,39].includes(X.keyCode)){const re=X.keyCode===37?-1:1;if(R.value!==null){const ge=R.value.values;if(ge.length===0)return;if(m.value.minute===null)Se(ge[0]);else{const qe=(ge.length+ge.indexOf(m.value.minute)+re)%ge.length;Se(ge[qe])}}else Se((60+(m.value.minute===null?-re:m.value.minute)+re)%60)}}function Pe(X){if(X.keyCode===13)b.value="second";else if([37,39].includes(X.keyCode)){const re=X.keyCode===37?-1:1;if(q.value!==null){const ge=q.value.values;if(ge.length===0)return;if(m.value.seconds===null)Re(ge[0]);else{const qe=(ge.length+ge.indexOf(m.value.second)+re)%ge.length;Re(ge[qe])}}else Re((60+(m.value.second===null?-re:m.value.second)+re)%60)}}function me(X){m.value.hour!==X&&(m.value.hour=X,ae())}function Se(X){m.value.minute!==X&&(m.value.minute=X,ae())}function Re(X){m.value.second!==X&&(m.value.second=X,ae())}const Ge={hour:me,minute:Se,second:Re};function oe(){y.value===!1&&(y.value=!0,m.value.hour!==null&&(m.value.hour-=12,ae()))}function he(){y.value===!0&&(y.value=!1,m.value.hour!==null&&(m.value.hour+=12,ae()))}function Z(X){const re=t.modelValue;b.value!==X&&re!=null&&re!==""&&typeof re!="string"&&(b.value=X)}function ae(){return L.value!==null&&L.value(m.value.hour)!==!0?(m.value=Gl(),void Z("hour")):T.value!==null&&T.value(m.value.minute)!==!0?(m.value.minute=null,m.value.second=null,void Z("minute")):t.withSeconds===!0&&I.value!==null&&I.value(m.value.second)!==!0?(m.value.second=null,void Z("second")):void(m.value.hour===null||m.value.minute===null||t.withSeconds===!0&&m.value.second===null||Ce())}function Ce(X){const re=Object.assign({...m.value},X),ge=t.calendar==="persian"?St(re.hour)+":"+St(re.minute)+(t.withSeconds===!0?":"+St(re.second):""):xC(new Date(re.year,re.month===null?null:re.month-1,re.day,re.hour,re.minute,re.second,re.millisecond),f.value,g.value,re.year,re.timezoneOffset);re.changed=ge!==t.modelValue,i("update:modelValue",ge,re)}function Ie(){const X=[S("div",{class:"q-time__link "+(b.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:s.value,onClick:U.hour,onKeyup:pe},C.value.hour),S("div",":"),S("div",A.value===!0?{class:"q-time__link "+(b.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:s.value,onKeyup:Le,onClick:U.minute}:{class:"q-time__link"},C.value.minute)];t.withSeconds===!0&&X.push(S("div",":"),S("div",E.value===!0?{class:"q-time__link "+(b.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:s.value,onKeyup:Pe,onClick:U.second}:{class:"q-time__link"},C.value.second));const re=[S("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},X)];return k.value===!1&&re.push(S("div",{class:"q-time__header-ampm column items-between no-wrap"},[S("div",{class:"q-time__link "+(y.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:s.value,onClick:oe,onKeyup:W},"AM"),S("div",{class:"q-time__link "+(y.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:s.value,onClick:he,onKeyup:ve},"PM")])),S("div",{class:"q-time__header flex flex-center no-wrap "+a.value},re)}function Fe(){const X=m.value[b.value];return S("div",{class:"q-time__content col relative-position"},[S(mi,{name:"q-transition--scale"},()=>S("div",{key:"clock"+b.value,class:"q-time__container-parent absolute-full"},[S("div",{ref:p,class:"q-time__container-child fit overflow-hidden"},[Ni(S("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:ce,onMousedown:fe},[S("div",{class:"q-time__clock-circle fit"},[S("div",{class:"q-time__clock-pointer"+(m.value[b.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:P.value}),B.value.map(re=>S("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${re.index}`+(re.val===X?" q-time__clock-position--active "+a.value:re.disable===!0?" q-time__clock-position--disable":"")},[S("span",re.label)]))])]),V.value)])])),t.nowBtn===!0?S(xt,{class:"q-time__now-button absolute",icon:r.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:s.value,onClick:O}):null])}return n.proxy.setNow=O,()=>{const X=[Fe()],re=Ne(e.default);return re!==void 0&&X.push(S("div",{class:"q-time__actions"},re)),t.name!==void 0&&t.disable!==!0&&c(X,"push"),S("div",{class:x.value,tabindex:-1},[Ie(),S("div",{class:"q-time__main col overflow-auto"},X)])}}}),ue({name:"QTimeline",props:{...mt,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},setup(t,{slots:e}){const i=Me(),n=vt(t,i.proxy.$q);ko(M_,t);const r=w(()=>`q-timeline q-timeline--${t.layout} q-timeline--${t.layout}--${t.side}`+(n.value===!0?" q-timeline--dark":""));return()=>S("ul",{class:r.value},Ne(e.default))}}),ue({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(t,{slots:e}){const i=Xi(M_,Mt);if(i===Mt)return Mt;const n=w(()=>`q-timeline__entry q-timeline__entry--${t.side}`+(t.icon!==void 0||t.avatar!==void 0?" q-timeline__entry--icon":"")),r=w(()=>`q-timeline__dot text-${t.color||i.color}`),o=w(()=>i.layout==="comfortable"&&i.side==="left");return()=>{const s=Ju(e.default,[]);if(t.body!==void 0&&s.unshift(t.body),t.heading===!0){const u=[S("div"),S("div"),S(t.tag,{class:"q-timeline__heading-title"},s)];return S("div",{class:"q-timeline__heading"},o.value===!0?u.reverse():u)}let a;t.icon!==void 0?a=[S(_t,{class:"row items-center justify-center",name:t.icon})]:t.avatar!==void 0&&(a=[S("img",{class:"q-timeline__dot-img",src:t.avatar})]);const l=[S("div",{class:"q-timeline__subtitle"},[S("span",{},Ne(e.subtitle,[t.subtitle]))]),S("div",{class:r.value},a),S("div",{class:"q-timeline__content"},[S("h6",{class:"q-timeline__title"},Ne(e.title,[t.title]))].concat(s))];return S("li",{class:n.value},o.value===!0?l.reverse():l)}}}),ue({name:"QToolbar",props:{inset:Boolean},setup(t,{slots:e}){const i=w(()=>"q-toolbar row no-wrap items-center"+(t.inset===!0?" q-toolbar--inset":""));return()=>S("div",{class:i.value,role:"toolbar"},Ne(e.default))}}),ue({name:"QToolbarTitle",props:{shrink:Boolean},setup(t,{slots:e}){const i=w(()=>"q-toolbar__title ellipsis"+(t.shrink===!0?" col-shrink":""));return()=>S("div",{class:i.value},Ne(e.default))}});var iR=["none","strict","leaf","leaf-filtered"],nR=ue({name:"QTree",props:{...mt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:t=>iR.includes(t)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:{},noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(t,{slots:e,emit:i}){const{proxy:n}=Me(),{$q:r}=n,o=vt(t,r),s=G({}),a=G(t.ticked||[]),l=G(t.expanded||[]);let u={};Nu(()=>{u={}});const c=w(()=>"q-tree q-tree--"+(t.dense===!0?"dense":"standard")+(t.noConnectors===!0?" q-tree--no-connectors":"")+(o.value===!0?" q-tree--dark":"")+(t.color!==void 0?` text-${t.color}`:"")),h=w(()=>t.selected!==void 0),d=w(()=>t.icon||r.iconSet.tree.icon),p=w(()=>t.controlColor||t.color),f=w(()=>t.textColor!==void 0?` text-${t.textColor}`:""),g=w(()=>{const M=t.selectedColor||t.color;return M?` text-${M}`:""}),_=w(()=>t.filterMethod!==void 0?t.filterMethod:(M,R)=>{const q=R.toLowerCase();return M[t.labelKey]&&M[t.labelKey].toLowerCase().indexOf(q)!==-1}),v=w(()=>{const M={},R=(q,F)=>{const B=q.tickStrategy||(F?F.tickStrategy:t.tickStrategy),V=q[t.nodeKey],O=q[t.childrenKey]&&Array.isArray(q[t.childrenKey])&&q[t.childrenKey].length!==0,$=q.disabled!==!0&&h.value===!0&&q.selectable!==!1,J=q.disabled!==!0&&q.expandable!==!1,te=B!=="none",ie=B==="strict",j=B==="leaf-filtered",z=B==="leaf"||B==="leaf-filtered";let N=q.disabled!==!0&&q.tickable!==!1;z===!0&&N===!0&&F&&F.tickable!==!0&&(N=!1);let K=q.lazy;K===!0&&s.value[V]!==void 0&&Array.isArray(q[t.childrenKey])===!0&&(K=s.value[V]);const U={key:V,parent:F,isParent:O,lazy:K,disabled:q.disabled,link:q.disabled!==!0&&($===!0||J===!0&&(O===!0||K===!0)),children:[],matchesFilter:!t.filter||_.value(q,t.filter),selected:V===t.selected&&$===!0,selectable:$,expanded:O===!0&&l.value.includes(V),expandable:J,noTick:q.noTick===!0||ie!==!0&&K&&K!=="loaded",tickable:N,tickStrategy:B,hasTicking:te,strictTicking:ie,leafFilteredTicking:j,leafTicking:z,ticked:(ie===!0||O!==!0)&&a.value.includes(V)};if(M[V]=U,O===!0&&(U.children=q[t.childrenKey].map(W=>R(W,U)),t.filter&&(U.matchesFilter!==!0?U.matchesFilter=U.children.some(W=>W.matchesFilter):U.noTick!==!0&&U.disabled!==!0&&U.tickable===!0&&j===!0&&U.children.every(W=>W.matchesFilter!==!0||W.noTick===!0||W.tickable!==!0)===!0&&(U.tickable=!1)),U.matchesFilter===!0&&(U.noTick!==!0&&ie!==!0&&U.children.every(W=>W.noTick)===!0&&(U.noTick=!0),z))){if(U.ticked=!1,U.indeterminate=U.children.some(W=>W.indeterminate===!0),U.tickable=U.tickable===!0&&U.children.some(W=>W.tickable),U.indeterminate!==!0){const W=U.children.reduce((ve,ce)=>ce.ticked===!0?ve+1:ve,0);W===U.children.length?U.ticked=!0:W>0&&(U.indeterminate=!0)}U.indeterminate===!0&&(U.indeterminateNextState=U.children.every(W=>W.tickable!==!0||W.ticked!==!0))}return U};return t.nodes.forEach(q=>R(q,null)),M});function b(M){const R=[].reduce,q=(F,B)=>F||!B?F:Array.isArray(B)===!0?R.call(Object(B),q,F):B[t.nodeKey]===M?B:B[t.childrenKey]?q(null,B[t.childrenKey]):void 0;return q(null,t.nodes)}function m(){const M=[],R=q=>{q[t.childrenKey]&&q[t.childrenKey].length!==0&&q.expandable!==!1&&q.disabled!==!0&&(M.push(q[t.nodeKey]),q[t.childrenKey].forEach(R))};t.nodes.forEach(R),t.expanded!==void 0?i("update:expanded",M):l.value=M}function y(M,R,q=b(M),F=v.value[M]){if(F.lazy&&F.lazy!=="loaded"){if(F.lazy==="loading")return;s.value[M]="loading",Array.isArray(q[t.childrenKey])!==!0&&(q[t.childrenKey]=[]),i("lazyLoad",{node:q,key:M,done:B=>{s.value[M]="loaded",q[t.childrenKey]=Array.isArray(B)===!0?B:[],dt(()=>{const V=v.value[M];V&&V.isParent===!0&&x(M,!0)})},fail:()=>{delete s.value[M],q[t.childrenKey].length===0&&delete q[t.childrenKey]}})}else F.isParent===!0&&F.expandable===!0&&x(M,R)}function x(M,R){let q=l.value;const F=t.expanded!==void 0;if(F===!0&&(q=q.slice()),R){if(t.accordion&&v.value[M]){const B=[];v.value[M].parent?v.value[M].parent.children.forEach(V=>{V.key!==M&&V.expandable===!0&&B.push(V.key)}):t.nodes.forEach(V=>{const O=V[t.nodeKey];O!==M&&B.push(O)}),B.length!==0&&(q=q.filter(V=>B.includes(V)===!1))}q=q.concat([M]).filter((B,V,O)=>O.indexOf(B)===V)}else q=q.filter(B=>B!==M);F===!0?i("update:expanded",q):l.value=q}function C(M,R){let q=a.value;const F=t.ticked!==void 0;F===!0&&(q=q.slice()),q=R?q.concat(M).filter((B,V,O)=>O.indexOf(B)===V):q.filter(B=>M.includes(B)===!1),F===!0&&i("update:ticked",q)}function k(M){return(t.filter?M.filter(R=>v.value[R[t.nodeKey]].matchesFilter):M).map(R=>function(q){const F=q[t.nodeKey],B=v.value[F],V=q.header&&e[`header-${q.header}`]||e["default-header"],O=B.isParent===!0?k(q[t.childrenKey]):[],$=O.length!==0||B.lazy&&B.lazy!=="loaded";let J=q.body&&e[`body-${q.body}`]||e["default-body"];const te=V!==void 0||J!==void 0?function(ie,j,z){const N={tree:n,node:ie,key:z,color:t.color,dark:o.value};return vi(N,"expanded",()=>j.expanded,K=>{K!==j.expanded&&y(z,K)}),vi(N,"ticked",()=>j.ticked,K=>{K!==j.ticked&&C([z],K)}),N}(q,B,F):null;return J!==void 0&&(J=S("div",{class:"q-tree__node-body relative-position"},[S("div",{class:f.value},[J(te)])])),S("div",{key:F,class:"q-tree__node relative-position q-tree__node--"+($===!0?"parent":"child")},[S("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(B.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(B.selected===!0?" q-tree__node--selected":"")+(B.disabled===!0?" q-tree__node--disabled":""),tabindex:B.link===!0?0:-1,ariaExpanded:O.length>0?B.expanded:null,role:"treeitem",onClick:ie=>{T(q,B,ie)},onKeypress(ie){xs(ie)!==!0&&(ie.keyCode===13?T(q,B,ie,!0):ie.keyCode===32&&I(q,B,ie,!0))}},[S("div",{class:"q-focus-helper",tabindex:-1,ref:ie=>{u[B.key]=ie}}),B.lazy==="loading"?S(Un,{class:"q-tree__spinner",color:p.value}):$===!0?S(_t,{class:"q-tree__arrow"+(B.expanded===!0?" q-tree__arrow--rotate":""),name:d.value,onClick(ie){I(q,B,ie)}}):null,B.hasTicking===!0&&B.noTick!==!0?S(nu,{class:"q-tree__tickbox",modelValue:B.indeterminate===!0?null:B.ticked,color:p.value,dark:o.value,dense:!0,keepColor:!0,disable:B.tickable!==!0,onKeydown:et,"onUpdate:modelValue":ie=>{(function(j,z){if(j.indeterminate===!0&&(z=j.indeterminateNextState),j.strictTicking)C([j.key],z);else if(j.leafTicking){const N=[],K=U=>{U.isParent?(z!==!0&&U.noTick!==!0&&U.tickable===!0&&N.push(U.key),U.leafTicking===!0&&U.children.forEach(K)):U.noTick===!0||U.tickable!==!0||U.leafFilteredTicking===!0&&U.matchesFilter!==!0||N.push(U.key)};K(j),C(N,z)}})(B,ie)}}):null,S("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(B.selected===!0?g.value:f.value)},[V?V(te):[P(q),S("div",q[t.labelKey])]])]),$===!0?t.noTransition===!0?B.expanded===!0?S("div",{class:"q-tree__node-collapsible"+f.value,key:`${F}__q`},[J,S("div",{class:"q-tree__children"+(B.disabled===!0?" q-tree__node--disabled":""),role:"group"},O)]):null:S(F0,{duration:t.duration,onShow:A,onHide:E},()=>Ni(S("div",{class:"q-tree__node-collapsible"+f.value,key:`${F}__q`},[J,S("div",{class:"q-tree__children"+(B.disabled===!0?" q-tree__node--disabled":""),role:"group"},O)]),[[Eh,B.expanded]])):J])}(R))}function P(M){if(M.icon!==void 0)return S(_t,{class:"q-tree__icon q-mr-sm",name:M.icon,color:M.iconColor});const R=M.img||M.avatar;return R?S("img",{class:`q-tree__${M.img?"img":"avatar"} q-mr-sm`,src:R}):void 0}function A(){i("afterShow")}function E(){i("afterHide")}function L(M){const R=u[M];R&&R.focus()}function T(M,R,q,F){F!==!0&&R.selectable!==!1&&L(R.key),h.value&&R.selectable?t.noSelectionUnset===!1?i("update:selected",R.key!==t.selected?R.key:null):R.key!==t.selected&&i("update:selected",R.key===void 0?null:R.key):I(M,R,q,F),typeof M.handler=="function"&&M.handler(M)}function I(M,R,q,F){q!==void 0&&et(q),F!==!0&&R.selectable!==!1&&L(R.key),y(R.key,!R.expanded,M,R)}return se(()=>t.ticked,M=>{a.value=M}),se(()=>t.expanded,M=>{l.value=M}),t.defaultExpandAll===!0&&m(),Object.assign(n,{getNodeByKey:b,getTickedNodes:function(){return a.value.map(M=>b(M))},getExpandedNodes:function(){return l.value.map(M=>b(M))},isExpanded:function(M){return!(!M||!v.value[M])&&v.value[M].expanded},collapseAll:function(){t.expanded!==void 0?i("update:expanded",[]):l.value=[]},expandAll:m,setExpanded:y,isTicked:function(M){return!(!M||!v.value[M])&&v.value[M].ticked},setTicked:C}),()=>{const M=k(t.nodes);return S("div",{class:c.value,role:"tree"},M.length===0?t.filter?t.noResultsLabel||r.lang.tree.noResults:t.noNodesLabel||r.lang.tree.noNodes:M)}}});function Fb(t){return(100*t).toFixed(2)+"%"}var rR={...mt,...RC,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},WC=[...qC,"start","finish","added","removed"],oR=()=>!0;function YC(t){const e={};return t.forEach(i=>{e[i]=oR}),e}var sR=YC(WC);function Sr(t){return typeof t=="function"?t:()=>t}var aR={name:"QUploader",props:{url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>t=>t.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},emits:["factoryFailed","uploaded","failed","uploading"],injectPlugin:function({props:t,emit:e,helpers:i}){const n=G([]),r=G([]),o=G(0),s=w(()=>({url:Sr(t.url),method:Sr(t.method),headers:Sr(t.headers),formFields:Sr(t.formFields),fieldName:Sr(t.fieldName),withCredentials:Sr(t.withCredentials),sendRaw:Sr(t.sendRaw),batch:Sr(t.batch)}));let a;function l(c){if(o.value++,typeof t.factory!="function")return void u(c,{});const h=t.factory(c);if(h)if(typeof h.catch=="function"&&typeof h.then=="function"){r.value.push(h);const d=p=>{i.isAlive()===!0&&(r.value=r.value.filter(f=>f!==h),r.value.length===0&&(a=!1),i.queuedFiles.value=i.queuedFiles.value.concat(c),c.forEach(f=>{i.updateFileStatus(f,"failed")}),e("factoryFailed",p,c),o.value--)};h.then(p=>{a===!0?d(new Error("Aborted")):i.isAlive()===!0&&(r.value=r.value.filter(f=>f!==h),u(c,p))}).catch(d)}else u(c,h||{});else e("factoryFailed",new Error("QUploader: factory() does not return properly"),c),o.value--}function u(c,h){const d=new FormData,p=new XMLHttpRequest,f=(P,A)=>h[P]!==void 0?Sr(h[P])(A):s.value[P](A),g=f("url",c);if(!g)return void o.value--;const _=f("formFields",c);_!==void 0&&_.forEach(P=>{d.append(P.name,P.value)});let v,b=0,m=0,y=0,x=0;p.upload.addEventListener("progress",P=>{if(v===!0)return;const A=Math.min(x,P.loaded);i.uploadedSize.value+=A-y,y=A;let E=y-m;for(let L=b;E>0&&L<c.length;L++){const T=c[L];if(!(E>T.size))return void i.updateFileStatus(T,"uploading",E);E-=T.size,b++,m+=T.size,i.updateFileStatus(T,"uploading",T.size)}},!1),p.onreadystatechange=()=>{p.readyState<4||(p.status&&p.status<400?(i.uploadedFiles.value=i.uploadedFiles.value.concat(c),c.forEach(P=>{i.updateFileStatus(P,"uploaded")}),e("uploaded",{files:c,xhr:p})):(v=!0,i.uploadedSize.value-=y,i.queuedFiles.value=i.queuedFiles.value.concat(c),c.forEach(P=>{i.updateFileStatus(P,"failed")}),e("failed",{files:c,xhr:p})),o.value--,n.value=n.value.filter(P=>P!==p))},p.open(f("method",c),g),f("withCredentials",c)===!0&&(p.withCredentials=!0);const C=f("headers",c);C!==void 0&&C.forEach(P=>{p.setRequestHeader(P.name,P.value)});const k=f("sendRaw",c);c.forEach(P=>{i.updateFileStatus(P,"uploading",0),k!==!0&&d.append(f("fieldName",P),P,P.name),P.xhr=p,P.__abort=()=>{p.abort()},x+=P.size}),e("uploading",{files:c,xhr:p}),n.value.push(p),k===!0?p.send(new Blob(c)):p.send(d)}return{isUploading:w(()=>o.value>0),isBusy:w(()=>r.value.length!==0),abort:function(){n.value.forEach(c=>{c.abort()}),r.value.length!==0&&(a=!0)},upload:function(){const c=i.queuedFiles.value.slice(0);i.queuedFiles.value=[],s.value.batch(c)?l(c):c.forEach(h=>{l([h])})}}}};function Ob(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}(({name:t,props:e,emits:i,injectPlugin:n})=>{ue({name:t,props:{...rR,...e},emits:Ei(i)===!0?{...sR,...i}:[...WC,...i],setup:(r,{expose:o})=>function(s,a){const l=Me(),{props:u,slots:c,emit:h,proxy:d}=l,{$q:p}=d,f=vt(u,p),g=w(()=>u.disable!==!0&&u.readonly!==!0),_=G(!1),v=G(null),b=G(null),m={files:G([]),queuedFiles:G([]),uploadedFiles:G([]),uploadedSize:G(0),updateFileStatus:function(ce,fe,pe){if(ce.__status=fe,fe==="idle")return ce.__uploaded=0,ce.__progress=0,ce.__sizeLabel=qm(ce.size),void(ce.__progressLabel="0.00%");fe!=="failed"&&(ce.__uploaded=fe==="uploaded"?ce.size:pe,ce.__progress=fe==="uploaded"?1:Math.min(.9999,ce.__uploaded/ce.size),ce.__progressLabel=Fb(ce.__progress)),d.$forceUpdate()},isAlive:()=>yo(l)===!1},{pickFiles:y,addFiles:x,onDragover:C,onDragleave:k,processFiles:P,getDndNode:A,maxFilesNumber:E,maxTotalSizeNumber:L}=AC({editable:g,dnd:_,getFileInput:z,addFilesToQueue:N});Object.assign(m,s({props:u,slots:c,emit:h,helpers:m,exposeApi:ce=>{Object.assign(m,ce)}})),m.isBusy===void 0&&(m.isBusy=G(!1));const T=G(0),I=w(()=>T.value===0?0:m.uploadedSize.value/T.value),M=w(()=>Fb(I.value)),R=w(()=>qm(T.value)),q=w(()=>g.value===!0&&m.isUploading.value!==!0&&(u.multiple===!0||m.queuedFiles.value.length===0)&&(u.maxFiles===void 0||m.files.value.length<E.value)&&(u.maxTotalSize===void 0||T.value<L.value)),F=w(()=>g.value===!0&&m.isBusy.value!==!0&&m.isUploading.value!==!0&&m.queuedFiles.value.length!==0);ko(T_,W);const B=w(()=>"q-uploader column no-wrap"+(f.value===!0?" q-uploader--dark q-dark":"")+(u.bordered===!0?" q-uploader--bordered":"")+(u.square===!0?" q-uploader--square no-border-radius":"")+(u.flat===!0?" q-uploader--flat no-shadow":"")+(u.disable===!0?" disabled q-uploader--disable":"")+(_.value===!0?" q-uploader--dnd":"")),V=w(()=>"q-uploader__header"+(u.color!==void 0?` bg-${u.color}`:"")+(u.textColor!==void 0?` text-${u.textColor}`:""));function O(){u.disable===!1&&(m.abort(),m.uploadedSize.value=0,T.value=0,j(),m.files.value=[],m.queuedFiles.value=[],m.uploadedFiles.value=[])}function $(){u.disable===!1&&te(["uploaded"],()=>{m.uploadedFiles.value=[]})}function J(){te(["idle","failed"],({size:ce})=>{T.value-=ce,m.queuedFiles.value=[]})}function te(ce,fe){if(u.disable===!0)return;const pe={files:[],size:0},Le=m.files.value.filter(Pe=>ce.indexOf(Pe.__status)===-1||(pe.size+=Pe.size,pe.files.push(Pe),Pe.__img!==void 0&&window.URL.revokeObjectURL(Pe.__img.src),!1));pe.files.length!==0&&(m.files.value=Le,fe(pe),h("removed",pe.files))}function ie(ce){u.disable||(ce.__status==="uploaded"?m.uploadedFiles.value=m.uploadedFiles.value.filter(fe=>fe.__key!==ce.__key):ce.__status==="uploading"?ce.__abort():T.value-=ce.size,m.files.value=m.files.value.filter(fe=>fe.__key!==ce.__key||(fe.__img!==void 0&&window.URL.revokeObjectURL(fe.__img.src),!1)),m.queuedFiles.value=m.queuedFiles.value.filter(fe=>fe.__key!==ce.__key),h("removed",[ce]))}function j(){m.files.value.forEach(ce=>{ce.__img!==void 0&&window.URL.revokeObjectURL(ce.__img.src)})}function z(){return b.value||v.value.getElementsByClassName("q-uploader__input")[0]}function N(ce,fe){const pe=P(ce,fe,m.files.value,!0),Le=z();Le!=null&&(Le.value=""),pe!==void 0&&(pe.forEach(Pe=>{if(m.updateFileStatus(Pe,"idle"),T.value+=Pe.size,u.noThumbnails!==!0&&Pe.type.toUpperCase().startsWith("IMAGE")){const me=new Image;me.src=window.URL.createObjectURL(Pe),Pe.__img=me}}),m.files.value=m.files.value.concat(pe),m.queuedFiles.value=m.queuedFiles.value.concat(pe),h("added",pe),u.autoUpload===!0&&m.upload())}function K(){F.value===!0&&m.upload()}function U(ce,fe,pe){if(ce===!0){const Le={type:"a",key:fe,icon:p.iconSet.uploader[fe],flat:!0,dense:!0};let Pe;return fe==="add"?(Le.onClick=y,Pe=W):Le.onClick=pe,S(xt,Le,Pe)}}function W(){return S("input",{ref:b,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:u.accept,multiple:u.multiple===!0?"multiple":void 0,capture:u.capture,onMousedown:Xt,onClick:y,onChange:N})}se(m.isUploading,(ce,fe)=>{fe===!1&&ce===!0?h("start"):fe===!0&&ce===!1&&h("finish")}),ht(()=>{m.isUploading.value===!0&&m.abort(),m.files.value.length!==0&&j()});const ve={};for(const ce in m)JM(m[ce])===!0?vi(ve,ce,()=>m[ce].value):ve[ce]=m[ce];return Object.assign(ve,{upload:K,reset:O,removeUploadedFiles:$,removeQueuedFiles:J,removeFile:ie,pickFiles:y,addFiles:x}),yS(ve,{canAddFiles:()=>q.value,canUpload:()=>F.value,uploadSizeLabel:()=>R.value,uploadProgressLabel:()=>M.value}),a({...m,upload:K,reset:O,removeUploadedFiles:$,removeQueuedFiles:J,removeFile:ie,pickFiles:y,addFiles:x,canAddFiles:q,canUpload:F,uploadSizeLabel:R,uploadProgressLabel:M}),()=>{const ce=[S("div",{class:V.value},c.header!==void 0?c.header(ve):[S("div",{class:"q-uploader__header-content column"},[S("div",{class:"flex flex-center no-wrap q-gutter-xs"},[U(m.queuedFiles.value.length!==0,"removeQueue",J),U(m.uploadedFiles.value.length!==0,"removeUploaded",$),m.isUploading.value===!0?S(Un,{class:"q-uploader__spinner"}):null,S("div",{class:"col column justify-center"},[u.label!==void 0?S("div",{class:"q-uploader__title"},[u.label]):null,S("div",{class:"q-uploader__subtitle"},[R.value+" / "+M.value])]),U(q.value,"add"),U(u.hideUploadBtn===!1&&F.value===!0,"upload",m.upload),U(m.isUploading.value,"clear",m.abort)])])]),S("div",{class:"q-uploader__list scroll"},c.list!==void 0?c.list(ve):m.files.value.map(pe=>S("div",{key:pe.__key,class:"q-uploader__file relative-position"+(u.noThumbnails!==!0&&pe.__img!==void 0?" q-uploader__file--img":"")+(pe.__status==="failed"?" q-uploader__file--failed":pe.__status==="uploaded"?" q-uploader__file--uploaded":""),style:u.noThumbnails!==!0&&pe.__img!==void 0?{backgroundImage:'url("'+pe.__img.src+'")',backgroundSize:u.thumbnailFit}:null},[S("div",{class:"q-uploader__file-header row flex-center no-wrap"},[pe.__status==="failed"?S(_t,{class:"q-uploader__file-status",name:p.iconSet.type.negative,color:"negative"}):null,S("div",{class:"q-uploader__file-header-content col"},[S("div",{class:"q-uploader__title"},[pe.name]),S("div",{class:"q-uploader__subtitle row items-center no-wrap"},[pe.__sizeLabel+" / "+pe.__progressLabel])]),pe.__status==="uploading"?S(rC,{value:pe.__progress,min:0,max:1,indeterminate:pe.__progress===0}):S(xt,{round:!0,dense:!0,flat:!0,icon:p.iconSet.uploader[pe.__status==="uploaded"?"done":"clear"],onClick:()=>{ie(pe)}})])]))),A("uploader")];m.isBusy.value===!0&&ce.push(S("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[S(Un)]));const fe={ref:v,class:B.value};return q.value===!0&&Object.assign(fe,{onDragover:C,onDragleave:k}),S("div",fe,ce)}}(n,o)})})(aR),ue({name:"QUploaderAddTrigger",setup(){const t=Xi(T_,Mt);return t}}),ue({name:"QVideo",props:{...O0,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(t){const e=z0(t),i=w(()=>"q-video"+(t.ratio!==void 0?" q-video--responsive":""));return()=>S("div",{class:i.value,style:e.value},[S("iframe",{src:t.src,title:t.title,fetchpriority:t.fetchpriority,loading:t.loading,referrerpolicy:t.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}});var KC=Vn({name:"close-popup",beforeMount(t,{value:e}){const i={depth:Ob(e),handler(n){i.depth!==0&&setTimeout(()=>{const r=function(o){return xa.find(s=>s.contentEl!==null&&s.contentEl.contains(o))}(t);r!==void 0&&function(o,s,a){for(;a!==0&&o!=null;){if(o.__qPortal===!0){if(a--,o.$options.name==="QMenu"){o=jS(o,s);continue}o.hide(s)}o=bh(o)}}(r,n,i.depth)})},handlerKey(n){Sn(n,13)===!0&&i.handler(n)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:e,oldValue:i}){e!==i&&(t.__qclosepopup.depth=Ob(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}}),lR=0,Qc=void 0;function zb(t,e){Qc===void 0&&((Qc=document.createElement("div")).style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(Qc));const i=t.getBoundingClientRect(),n=Qc.getBoundingClientRect(),{marginLeft:r,marginRight:o,marginTop:s,marginBottom:a}=window.getComputedStyle(t),l=parseInt(r,10)+parseInt(o,10),u=parseInt(s,10)+parseInt(a,10);return{left:i.left-n.left,top:i.top-n.top,width:i.right-i.left,height:i.bottom-i.top,widthM:i.right-i.left+(e===!0?0:l),heightM:i.bottom-i.top+(e===!0?0:u),marginH:e===!0?l:0,marginV:e===!0?u:0}}function Jc(t){return{width:t.scrollWidth,height:t.scrollHeight}}var Db=["Top","Right","Bottom","Left"],Nb=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],uR=/-block|-inline|block-|inline-/,cR=/(-block|-inline|block-|inline-).*:/;function Bb(t,e){const i=window.getComputedStyle(t),n={};for(let r=0;r<e.length;r++){const o=e[r];if(i[o]==="")if(o==="cssText"){const s=i.length;let a="";for(let l=0;l<s;l++)uR.test(i[l])!==!0&&(a+=i[l]+": "+i[i[l]]+"; ");n[o]=a}else if(["borderWidth","borderStyle","borderColor"].indexOf(o)!==-1){const s=o.replace("border","");let a="";for(let l=0;l<Db.length;l++)a+=i["border"+Db[l]+s]+" ";n[o]=a}else if(o==="borderRadius"){let s="",a="";for(let l=0;l<Nb.length;l++){const u=i[Nb[l]].split(" ");s+=u[0]+" ",a+=(u[1]===void 0?u[0]:u[1])+" "}n[o]=s+"/ "+a}else n[o]=i[o];else n[o]=o==="cssText"?i[o].split(";").filter(s=>cR.test(s)!==!0).join(";"):i[o]}return n}var hR=["absolute","fixed","relative","sticky"];function jb(t){let e=t,i=0;for(;e!==null&&e!==document;){const{position:n,zIndex:r}=window.getComputedStyle(e),o=Number(r);o>i&&(e===t||hR.includes(n)===!0)&&(i=o),e=e.parentNode}return i}function Vb(t){const e=typeof t;return e==="function"?t():e==="string"?document.querySelector(t):t}function $b(t){return t&&t.ownerDocument===document&&t.parentNode!==null}function dR(t){let e=()=>!1,i=!1,n=!0;const r={from:(o=t).from,to:o.to!==void 0?o.to:o.from};var o;const s=function(I){return typeof I=="number"?I={duration:I}:typeof I=="function"&&(I={onEnd:I}),{...I,waitFor:I.waitFor===void 0?0:I.waitFor,duration:isNaN(I.duration)===!0?300:parseInt(I.duration,10),easing:typeof I.easing=="string"&&I.easing.length!==0?I.easing:"ease-in-out",delay:isNaN(I.delay)===!0?0:parseInt(I.delay,10),fill:typeof I.fill=="string"&&I.fill.length!==0?I.fill:"none",resize:I.resize===!0,useCSS:I.useCSS===!0||I.usecss===!0,hideFromClone:I.hideFromClone===!0||I.hidefromclone===!0,keepToClone:I.keepToClone===!0||I.keeptoclone===!0,tween:I.tween===!0,tweenFromOpacity:isNaN(I.tweenFromOpacity)===!0?.6:parseFloat(I.tweenFromOpacity),tweenToOpacity:isNaN(I.tweenToOpacity)===!0?.5:parseFloat(I.tweenToOpacity)}}(t),a=Vb(r.from);if($b(a)!==!0)return e;let l,u,c,h;typeof a.qMorphCancel=="function"&&a.qMorphCancel();const d=a.parentNode,p=a.nextElementSibling,f=zb(a,s.resize),{width:g,height:_}=Jc(d),{borderWidth:v,borderStyle:b,borderColor:m,borderRadius:y,backgroundColor:x,transform:C,position:k,cssText:P}=Bb(a,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),A=a.classList.toString(),E=a.style.cssText,L=a.cloneNode(!0),T=s.tween===!0?a.cloneNode(!0):void 0;return T!==void 0&&(T.className=T.classList.toString().split(" ").filter(I=>/^bg-/.test(I)===!1).join(" ")),s.hideFromClone===!0&&L.classList.add("q-morph--internal"),L.setAttribute("aria-hidden","true"),L.style.transition="none",L.style.animation="none",L.style.pointerEvents="none",d.insertBefore(L,p),a.qMorphCancel=()=>{i=!0,L.remove(),T!==void 0&&T.remove(),s.hideFromClone===!0&&L.classList.remove("q-morph--internal"),a.qMorphCancel=void 0},typeof t.onToggle=="function"&&t.onToggle(),requestAnimationFrame(()=>{const I=Vb(r.to);if(i===!0||$b(I)!==!0)return void(typeof a.qMorphCancel=="function"&&a.qMorphCancel());a!==I&&typeof I.qMorphCancel=="function"&&I.qMorphCancel(),s.keepToClone!==!0&&I.classList.add("q-morph--internal"),L.classList.add("q-morph--internal");const{width:M,height:R}=Jc(d),{width:q,height:F}=Jc(I.parentNode);s.hideFromClone!==!0&&L.classList.remove("q-morph--internal"),I.qMorphCancel=()=>{i=!0,L.remove(),T!==void 0&&T.remove(),s.hideFromClone===!0&&L.classList.remove("q-morph--internal"),s.keepToClone!==!0&&I.classList.remove("q-morph--internal"),a.qMorphCancel=void 0,I.qMorphCancel=void 0};const B=()=>{if(i===!0)return void(typeof I.qMorphCancel=="function"&&I.qMorphCancel());s.hideFromClone!==!0&&(L.classList.add("q-morph--internal"),L.innerHTML="",L.style.left=0,L.style.right="unset",L.style.top=0,L.style.bottom="unset",L.style.transform="none"),s.keepToClone!==!0&&I.classList.remove("q-morph--internal");const V=I.parentNode,{width:O,height:$}=Jc(V),J=I.cloneNode(s.keepToClone);J.setAttribute("aria-hidden","true"),s.keepToClone!==!0&&(J.style.left=0,J.style.right="unset",J.style.top=0,J.style.bottom="unset",J.style.transform="none",J.style.pointerEvents="none"),J.classList.add("q-morph--internal");const te=I===a&&d===V?L:I.nextElementSibling;V.insertBefore(J,te);const{borderWidth:ie,borderStyle:j,borderColor:z,borderRadius:N,backgroundColor:K,transform:U,position:W,cssText:ve}=Bb(I,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),ce=I.classList.toString(),fe=I.style.cssText;I.style.cssText=ve,I.style.transform="none",I.style.animation="none",I.style.transition="none",I.className=ce.split(" ").filter(Ae=>/^bg-/.test(Ae)===!1).join(" ");const pe=zb(I,s.resize),Le=f.left-pe.left,Pe=f.top-pe.top,me=f.width/(pe.width>0?pe.width:10),Se=f.height/(pe.height>0?pe.height:100),Re=g-M,Ge=_-R,oe=O-q,he=$-F,Z=Math.max(f.widthM,Re),ae=Math.max(f.heightM,Ge),Ce=Math.max(pe.widthM,oe),Ie=Math.max(pe.heightM,he),Fe=a===I&&["absolute","fixed"].includes(W)===!1&&["absolute","fixed"].includes(k)===!1;let X=W==="fixed",re=V;for(;X!==!0&&re!==document;)X=window.getComputedStyle(re).position==="fixed",re=re.parentNode;if(s.hideFromClone!==!0&&(L.style.display="block",L.style.flex="0 0 auto",L.style.opacity=0,L.style.minWidth="unset",L.style.maxWidth="unset",L.style.minHeight="unset",L.style.maxHeight="unset",L.classList.remove("q-morph--internal")),s.keepToClone!==!0&&(J.style.display="block",J.style.flex="0 0 auto",J.style.opacity=0,J.style.minWidth="unset",J.style.maxWidth="unset",J.style.minHeight="unset",J.style.maxHeight="unset"),J.classList.remove("q-morph--internal"),typeof s.classes=="string"&&(I.className+=" "+s.classes),typeof s.style=="string")I.style.cssText+=" "+s.style;else if(Ei(s.style)===!0)for(const Ae in s.style)I.style[Ae]=s.style[Ae];const ge=jb(L),qe=jb(I),He=X===!0?document.documentElement:{scrollLeft:0,scrollTop:0};I.style.position=X===!0?"fixed":"absolute",I.style.left=pe.left-He.scrollLeft+"px",I.style.right="unset",I.style.top=pe.top-He.scrollTop+"px",I.style.margin=0,s.resize===!0&&(I.style.minWidth="unset",I.style.maxWidth="unset",I.style.minHeight="unset",I.style.maxHeight="unset",I.style.overflow="hidden",I.style.overflowX="hidden",I.style.overflowY="hidden"),document.body.appendChild(I),T!==void 0&&(T.style.cssText=P,T.style.transform="none",T.style.animation="none",T.style.transition="none",T.style.position=I.style.position,T.style.left=f.left-He.scrollLeft+"px",T.style.right="unset",T.style.top=f.top-He.scrollTop+"px",T.style.margin=0,T.style.pointerEvents="none",s.resize===!0&&(T.style.minWidth="unset",T.style.maxWidth="unset",T.style.minHeight="unset",T.style.maxHeight="unset",T.style.overflow="hidden",T.style.overflowX="hidden",T.style.overflowY="hidden"),document.body.appendChild(T));const tt=Ae=>{a===I&&n!==!0?(I.style.cssText=E,I.className=A):(I.style.cssText=fe,I.className=ce),J.parentNode===V&&V.insertBefore(I,J),L.remove(),J.remove(),T!==void 0&&T.remove(),e=()=>!1,a.qMorphCancel=void 0,I.qMorphCancel=void 0,typeof s.onEnd=="function"&&s.onEnd(n===!0?"to":"from",Ae===!0)};if(s.useCSS!==!0&&typeof I.animate=="function"){const Ae=s.resize===!0?{transform:`translate(${Le}px, ${Pe}px)`,width:`${Z}px`,height:`${ae}px`}:{transform:`translate(${Le}px, ${Pe}px) scale(${me}, ${Se})`},Ze=s.resize===!0?{width:`${Ce}px`,height:`${Ie}px`}:{},We=s.resize===!0?{width:`${Z}px`,height:`${ae}px`}:{},ee=s.resize===!0?{transform:`translate(${-1*Le}px, ${-1*Pe}px)`,width:`${Ce}px`,height:`${Ie}px`}:{transform:`translate(${-1*Le}px, ${-1*Pe}px) scale(${1/me}, ${1/Se})`},ke=T!==void 0?{opacity:s.tweenToOpacity}:{backgroundColor:x},xe=T!==void 0?{opacity:1}:{backgroundColor:K};h=I.animate([{margin:0,borderWidth:v,borderStyle:b,borderColor:m,borderRadius:y,zIndex:ge,transformOrigin:"0 0",...Ae,...ke},{margin:0,borderWidth:ie,borderStyle:j,borderColor:z,borderRadius:N,zIndex:qe,transformOrigin:"0 0",transform:U,...Ze,...xe}],{duration:s.duration,easing:s.easing,fill:s.fill,delay:s.delay}),u=T===void 0?void 0:T.animate([{opacity:s.tweenFromOpacity,margin:0,borderWidth:v,borderStyle:b,borderColor:m,borderRadius:y,zIndex:ge,transformOrigin:"0 0",transform:C,...We},{opacity:0,margin:0,borderWidth:ie,borderStyle:j,borderColor:z,borderRadius:N,zIndex:qe,transformOrigin:"0 0",...ee}],{duration:s.duration,easing:s.easing,fill:s.fill,delay:s.delay}),l=s.hideFromClone===!0||Fe===!0?void 0:L.animate([{margin:`${Ge<0?Ge/2:0}px ${Re<0?Re/2:0}px`,width:`${Z+f.marginH}px`,height:`${ae+f.marginV}px`},{margin:0,width:0,height:0}],{duration:s.duration,easing:s.easing,fill:s.fill,delay:s.delay}),c=s.keepToClone===!0?void 0:J.animate([Fe===!0?{margin:`${Ge<0?Ge/2:0}px ${Re<0?Re/2:0}px`,width:`${Z+f.marginH}px`,height:`${ae+f.marginV}px`}:{margin:0,width:0,height:0},{margin:`${he<0?he/2:0}px ${oe<0?oe/2:0}px`,width:`${Ce+pe.marginH}px`,height:`${Ie+pe.marginV}px`}],{duration:s.duration,easing:s.easing,fill:s.fill,delay:s.delay});const ye=we=>{l!==void 0&&l.cancel(),u!==void 0&&u.cancel(),c!==void 0&&c.cancel(),h.cancel(),h.removeEventListener("finish",ye),h.removeEventListener("cancel",ye),tt(we),l=void 0,u=void 0,c=void 0,h=void 0};a.qMorphCancel=()=>{a.qMorphCancel=void 0,i=!0,ye()},I.qMorphCancel=()=>{I.qMorphCancel=void 0,i=!0,ye()},h.addEventListener("finish",ye),h.addEventListener("cancel",ye),e=we=>i!==!0&&h!==void 0&&(we===!0?(ye(!0),!0):(n=n!==!0,l!==void 0&&l.reverse(),u!==void 0&&u.reverse(),c!==void 0&&c.reverse(),h.reverse(),!0))}else{const Ae="q-morph-anim-"+ ++lR,Ze=document.createElement("style"),We=s.resize===!0?`
            transform: translate(${Le}px, ${Pe}px);
            width: ${Z}px;
            height: ${ae}px;
          `:`transform: translate(${Le}px, ${Pe}px) scale(${me}, ${Se});`,ee=s.resize===!0?`
            width: ${Ce}px;
            height: ${Ie}px;
          `:"",ke=s.resize===!0?`
            width: ${Z}px;
            height: ${ae}px;
          `:"",xe=s.resize===!0?`
            transform: translate(${-1*Le}px, ${-1*Pe}px);
            width: ${Ce}px;
            height: ${Ie}px;
          `:`transform: translate(${-1*Le}px, ${-1*Pe}px) scale(${1/me}, ${1/Se});`,ye=T!==void 0?`opacity: ${s.tweenToOpacity};`:`background-color: ${x};`,we=T!==void 0?"opacity: 1;":`background-color: ${K};`,D=T===void 0?"":`
            @keyframes ${Ae}-from-tween {
              0% {
                opacity: ${s.tweenFromOpacity};
                margin: 0;
                border-width: ${v};
                border-style: ${b};
                border-color: ${m};
                border-radius: ${y};
                z-index: ${ge};
                transform-origin: 0 0;
                transform: ${C};
                ${ke}
              }

              100% {
                opacity: 0;
                margin: 0;
                border-width: ${ie};
                border-style: ${j};
                border-color: ${z};
                border-radius: ${N};
                z-index: ${qe};
                transform-origin: 0 0;
                ${xe}
              }
            }
          `,H=s.hideFromClone===!0||Fe===!0?"":`
            @keyframes ${Ae}-from {
              0% {
                margin: ${Ge<0?Ge/2:0}px ${Re<0?Re/2:0}px;
                width: ${Z+f.marginH}px;
                height: ${ae+f.marginV}px;
              }

              100% {
                margin: 0;
                width: 0;
                height: 0;
              }
            }
          `,Q=Fe===!0?`
            margin: ${Ge<0?Ge/2:0}px ${Re<0?Re/2:0}px;
            width: ${Z+f.marginH}px;
            height: ${ae+f.marginV}px;
          `:`
            margin: 0;
            width: 0;
            height: 0;
          `,le=s.keepToClone===!0?"":`
            @keyframes ${Ae}-to {
              0% {
                ${Q}
              }

              100% {
                margin: ${he<0?he/2:0}px ${oe<0?oe/2:0}px;
                width: ${Ce+pe.marginH}px;
                height: ${Ie+pe.marginV}px;
              }
            }
          `;Ze.innerHTML=`
          @keyframes ${Ae} {
            0% {
              margin: 0;
              border-width: ${v};
              border-style: ${b};
              border-color: ${m};
              border-radius: ${y};
              background-color: ${x};
              z-index: ${ge};
              transform-origin: 0 0;
              ${We}
              ${ye}
            }

            100% {
              margin: 0;
              border-width: ${ie};
              border-style: ${j};
              border-color: ${z};
              border-radius: ${N};
              background-color: ${K};
              z-index: ${qe};
              transform-origin: 0 0;
              transform: ${U};
              ${ee}
              ${we}
            }
          }

          ${H}

          ${D}

          ${le}
        `,document.head.appendChild(Ze);let ne="normal";L.style.animation=`${s.duration}ms ${s.easing} ${s.delay}ms ${ne} ${s.fill} ${Ae}-from`,T!==void 0&&(T.style.animation=`${s.duration}ms ${s.easing} ${s.delay}ms ${ne} ${s.fill} ${Ae}-from-tween`),J.style.animation=`${s.duration}ms ${s.easing} ${s.delay}ms ${ne} ${s.fill} ${Ae}-to`,I.style.animation=`${s.duration}ms ${s.easing} ${s.delay}ms ${ne} ${s.fill} ${Ae}`;const Te=de=>{de===Object(de)&&de.animationName!==Ae||(I.removeEventListener("animationend",Te),I.removeEventListener("animationcancel",Te),tt(),Ze.remove())};a.qMorphCancel=()=>{a.qMorphCancel=void 0,i=!0,Te()},I.qMorphCancel=()=>{I.qMorphCancel=void 0,i=!0,Te()},I.addEventListener("animationend",Te),I.addEventListener("animationcancel",Te),e=de=>!!(i!==!0&&I&&L&&J)&&(de===!0?(Te(),!0):(n=n!==!0,ne=ne==="normal"?"reverse":"normal",L.style.animationDirection=ne,T.style.animationDirection=ne,J.style.animationDirection=ne,I.style.animationDirection=ne,!0))}};s.waitFor>0||s.waitFor==="transitionend"||s.waitFor===Object(s.waitFor)&&typeof s.waitFor.then=="function"?(s.waitFor>0?new Promise(V=>setTimeout(V,s.waitFor)):s.waitFor==="transitionend"?new Promise(V=>{const O=()=>{$!==null&&(clearTimeout($),$=null),I&&(I.removeEventListener("transitionend",O),I.removeEventListener("transitioncancel",O)),V()};let $=setTimeout(O,400);I.addEventListener("transitionend",O),I.addEventListener("transitioncancel",O)}):s.waitFor).then(B).catch(()=>{typeof I.qMorphCancel=="function"&&I.qMorphCancel()}):B()}),I=>e(I)}var _d={},pR=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],fR=["resize","useCSS","hideFromClone","keepToClone","tween"];function pa(t,e){t.clsAction!==e&&(t.clsAction=e,t.el.classList[e]("q-morph--invisible"))}function XC(t){if(t.animating===!0||t.queue.length<2)return;const[e,i]=t.queue;t.animating=!0,e.animating=!0,i.animating=!0,pa(e,"remove"),pa(i,"remove");const n=dR({from:e.el,to:i.el,onToggle(){pa(e,"add"),pa(i,"remove")},...i.opts,onEnd(r,o){i.opts.onEnd!==void 0&&i.opts.onEnd(r,o),o!==!0&&(e.animating=!1,i.animating=!1,t.animating=!1,t.cancel=void 0,t.queue.shift(),XC(t))}});t.cancel=()=>{n(!0),t.cancel=void 0}}function ZC(t,e){const i=e.opts;fR.forEach(n=>{i[n]=t[n]===!0})}function gR(t,e){if(e.name!==t)e.animating===!1&&pa(e,"add");else{const i=_d[e.group];i===void 0?(_d[e.group]={name:e.group,model:t,queue:[e],animating:!1},pa(e,"remove")):i.model!==t&&(i.model=t,i.queue.push(e),i.animating===!1&&i.queue.length===2&&XC(i))}}function Gb(t,e){let i;Object(e)===e?(i=""+e.model,function(n,r){n.group!==void 0&&(r.group=n.group),n.name!==void 0&&(r.name=n.name);const o=r.opts;pR.forEach(s=>{n[s]!==void 0&&(o[s]=n[s])})}(e,t),ZC(e,t)):i=""+e,i!==t.model?(t.model=i,gR(i,t)):t.animating===!1&&t.clsAction!==void 0&&t.el.classList[t.clsAction]("q-morph--invisible")}Vn({name:"morph",mounted(t,e){const i={el:t,animating:!1,opts:{}};ZC(e.modifiers,i),function(n,r){const o=typeof n=="string"&&n.length!==0?n.split(":"):[];r.name=o[0],r.group=o[1],Object.assign(r.opts,{duration:isNaN(o[2])===!0?300:parseFloat(o[2]),waitFor:o[3]})}(e.arg,i),Gb(i,e.value),t.__qmorph=i},updated(t,e){Gb(t.__qmorph,e.value)},beforeUnmount(t){const e=t.__qmorph,i=_d[e.group];i!==void 0&&i.queue.indexOf(e)!==-1&&(i.queue=i.queue.filter(n=>n!==e),i.queue.length===0&&(i.cancel!==void 0&&i.cancel(),delete _d[e.group])),e.clsAction==="add"&&t.classList.remove("q-morph--invisible"),delete t.__qmorph}});var mR={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0};function Hb(t,e,i){e.handler=i,e.observer!==void 0&&e.observer.disconnect(),e.observer=new MutationObserver(n=>{typeof e.handler=="function"&&(e.handler(n)!==!1&&e.once!==!0||QC(t))}),e.observer.observe(t,e.opts)}function QC(t){const e=t.__qmutation;e!==void 0&&(e.observer!==void 0&&e.observer.disconnect(),delete t.__qmutation)}Vn({name:"mutation",mounted(t,{modifiers:{once:e,...i},value:n}){const r={once:e,opts:Object.keys(i).length===0?mR:i};Hb(t,r,n),t.__qmutation=r},updated(t,{oldValue:e,value:i}){const n=t.__qmutation;n!==void 0&&e!==i&&Hb(t,n,i)},beforeUnmount:QC});var{passive:bd}=Dt;function Ub(t,{value:e,oldValue:i}){typeof e=="function"?(t.handler=e,typeof i!="function"&&(t.scrollTarget.addEventListener("scroll",t.scroll,bd),t.scroll())):t.scrollTarget.removeEventListener("scroll",t.scroll,bd)}function Wb(t,{value:e,oldValue:i}){typeof e=="function"?(t.handler=e,typeof i!="function"&&t.scrollTarget.addEventListener("scroll",t.scroll,Dt.passive)):t.scrollTarget.removeEventListener("scroll",t.scroll,Dt.passive)}Vn({name:"scroll-fire",mounted(t,e){const i={scrollTarget:mr(t),scroll:nl(()=>{let n,r;i.scrollTarget===window?(r=t.getBoundingClientRect().bottom,n=window.innerHeight):(r=ad(t).top+$a(t),n=ad(i.scrollTarget).top+$a(i.scrollTarget)),r>0&&r<n&&(i.scrollTarget.removeEventListener("scroll",i.scroll,bd),i.handler(t))},25)};Ub(i,e),t.__qscrollfire=i},updated(t,e){e.value!==e.oldValue&&Ub(t.__qscrollfire,e)},beforeUnmount(t){const e=t.__qscrollfire;e.scrollTarget.removeEventListener("scroll",e.scroll,bd),e.scroll.cancel(),delete t.__qscrollfire}}),Vn({name:"scroll",mounted(t,e){const i={scrollTarget:mr(t),scroll(){i.handler(_o(i.scrollTarget),Ud(i.scrollTarget))}};Wb(i,e),t.__qscroll=i},updated(t,e){t.__qscroll!==void 0&&e.oldValue!==e.value&&Wb(t.__qscroll,e)},beforeUnmount(t){const e=t.__qscroll;e.scrollTarget.removeEventListener("scroll",e.scroll,Dt.passive),delete t.__qscroll}}),Vn({name:"touch-hold",beforeMount(t,e){const{modifiers:i}=e;if(i.mouse!==!0&&ct.has.touch!==!0)return;const n={handler:e.value,noop:hi,mouseStart(o){typeof n.handler=="function"&&Vd(o)===!0&&(ti(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(o,!0))},touchStart(o){if(o.target!==void 0&&typeof n.handler=="function"){const s=o.target;ti(n,"temp",[[s,"touchmove","move","passiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),n.start(o)}},start(o,s){n.origin=Di(o);const a=Date.now();ct.is.mobile===!0&&(document.body.classList.add("non-selectable"),$n(),n.styleCleanup=l=>{n.styleCleanup=void 0;const u=()=>{document.body.classList.remove("non-selectable")};l===!0?($n(),setTimeout(u,10)):u()}),n.triggered=!1,n.sensitivity=s===!0?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout(()=>{n.timer=void 0,$n(),n.triggered=!0,n.handler({evt:o,touch:s!==!0,mouse:s===!0,position:n.origin,duration:Date.now()-a})},n.duration)},move(o){const{top:s,left:a}=Di(o);n.timer!==void 0&&(Math.abs(a-n.origin.left)>=n.sensitivity||Math.abs(s-n.origin.top)>=n.sensitivity)&&(clearTimeout(n.timer),n.timer=void 0)},end(o){Li(n,"temp"),n.styleCleanup!==void 0&&n.styleCleanup(n.triggered),n.triggered===!0?o!==void 0&&et(o):n.timer!==void 0&&(clearTimeout(n.timer),n.timer=void 0)}},r=[600,5,7];if(typeof e.arg=="string"&&e.arg.length!==0&&e.arg.split(":").forEach((o,s)=>{const a=parseInt(o,10);a&&(r[s]=a)}),[n.duration,n.touchSensitivity,n.mouseSensitivity]=r,t.__qtouchhold=n,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";ti(n,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}ct.has.touch===!0&&ti(n,"main",[[t,"touchstart","touchStart","passive"+(i.capture===!0?"Capture":"")],[t,"touchend","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchhold;i!==void 0&&e.oldValue!==e.value&&(typeof e.value!="function"&&i.end(),i.handler=e.value)},beforeUnmount(t){const e=t.__qtouchhold;e!==void 0&&(Li(e,"main"),Li(e,"temp"),e.timer!==void 0&&clearTimeout(e.timer),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchhold)}});var JC={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},vR=new RegExp(`^([\\d+]+|${Object.keys(JC).join("|")})$`,"i");Vn({name:"touch-repeat",beforeMount(t,{modifiers:e,value:i,arg:n}){const r=Object.keys(e).reduce((l,u)=>{if(vR.test(u)===!0){const c=isNaN(parseInt(u,10))?JC[u.toLowerCase()]:parseInt(u,10);c>=0&&l.push(c)}return l},[]);if(e.mouse!==!0&&ct.has.touch!==!0&&r.length===0)return;const o=typeof n=="string"&&n.length!==0?n.split(":").map(l=>parseInt(l,10)):[0,600,300],s=o.length-1,a={keyboard:r,handler:i,noop:hi,mouseStart(l){a.event===void 0&&typeof a.handler=="function"&&Vd(l)===!0&&(ti(a,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),a.start(l,!0))},keyboardStart(l){if(typeof a.handler=="function"&&Sn(l,r)===!0){if((o[0]===0||a.event!==void 0)&&(et(l),t.focus(),a.event!==void 0))return;ti(a,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),a.start(l,!1,!0)}},touchStart(l){if(l.target!==void 0&&typeof a.handler=="function"){const u=l.target;ti(a,"temp",[[u,"touchmove","move","passiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),a.start(l)}},start(l,u,c){function h(p){a.styleCleanup=void 0,document.documentElement.style.cursor="";const f=()=>{document.body.classList.remove("non-selectable")};p===!0?($n(),setTimeout(f,10)):f()}c!==!0&&(a.origin=Di(l)),ct.is.mobile===!0&&(document.body.classList.add("non-selectable"),$n(),a.styleCleanup=h),a.event={touch:u!==!0&&c!==!0,mouse:u===!0,keyboard:c===!0,startTime:Date.now(),repeatCount:0};const d=()=>{if(a.timer=void 0,a.event===void 0)return;a.event.repeatCount===0&&(a.event.evt=l,c===!0?a.event.keyCode=l.keyCode:a.event.position=Di(l),ct.is.mobile!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),$n(),a.styleCleanup=h)),a.event.duration=Date.now()-a.event.startTime,a.event.repeatCount+=1,a.handler(a.event);const p=s<a.event.repeatCount?s:a.event.repeatCount;a.timer=setTimeout(d,o[p])};o[0]===0?d():a.timer=setTimeout(d,o[0])},move(l){a.event!==void 0&&a.timer!==void 0&&function(u,c){const{top:h,left:d}=Di(u);return Math.abs(d-c.left)>=7||Math.abs(h-c.top)>=7}(l,a.origin)===!0&&(clearTimeout(a.timer),a.timer=void 0)},end(l){a.event!==void 0&&(a.styleCleanup!==void 0&&a.styleCleanup(!0),l!==void 0&&a.event.repeatCount>0&&et(l),Li(a,"temp"),a.timer!==void 0&&(clearTimeout(a.timer),a.timer=void 0),a.event=void 0)}};if(t.__qtouchrepeat=a,e.mouse===!0){const l=e.mouseCapture===!0||e.mousecapture===!0?"Capture":"";ti(a,"main",[[t,"mousedown","mouseStart",`passive${l}`]])}if(ct.has.touch===!0&&ti(a,"main",[[t,"touchstart","touchStart","passive"+(e.capture===!0?"Capture":"")],[t,"touchend","noop","passiveCapture"]]),r.length!==0){const l=e.keyCapture===!0||e.keycapture===!0?"Capture":"";ti(a,"main",[[t,"keydown","keyboardStart",`notPassive${l}`]])}},updated(t,{oldValue:e,value:i}){const n=t.__qtouchrepeat;n!==void 0&&e!==i&&(typeof i!="function"&&n.end(),n.handler=i)},beforeUnmount(t){const e=t.__qtouchrepeat;e!==void 0&&(e.timer!==void 0&&clearTimeout(e.timer),Li(e,"main"),Li(e,"temp"),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchrepeat)}}),ct.is.mobile!==!0||ct.is.nativeMobile!==!0&&ct.is.winphone!==!0&&ct.is.safari!==!0&&ct.is.webkit!==!0&&ct.is.vivaldi;var Rl={};function eM(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function tM(){const t=Mi.activeEl=Mi.isActive===!1?null:eM();(function(e){if(e===Wo)return;if((Wo=e)===document.body||iu.reduce((n,r)=>r==="dialog"?n+1:n,0)<2)return void ba.forEach(n=>{n.contains(Wo)===!1&&Wo.appendChild(n)});const i=iu.lastIndexOf("dialog");for(let n=0;n<ba.length;n++){const r=ba[n];n!==i&&iu[n]==="dialog"||r.contains(Wo)!==!1||Wo.appendChild(r)}})(t===null||t===document.documentElement?document.body:t)}function yR(){Mi.isActive=Mi.isActive===!1,tM()}function Yb(t,e){try{const i=t[e]();return i===void 0?Promise.resolve():i}catch(i){return Promise.reject(i)}}var eh,Mi=Po({isActive:!1,activeEl:null},{isCapable:!1,install({$q:t}){t.fullscreen=this}});Rl.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(t=>document.documentElement[t]!==void 0),Mi.isCapable=Rl.request!==void 0,Mi.isCapable===!1?(eh=()=>Promise.reject("Not capable"),Object.assign(Mi,{request:eh,exit:eh,toggle:eh})):(Object.assign(Mi,{request(t){const e=t||document.documentElement,{activeEl:i}=Mi;return e===i?Promise.resolve():(i!==null&&e.contains(i)===!0?Mi.exit():Promise.resolve()).finally(()=>Yb(e,Rl.request))},exit:()=>Mi.isActive===!0?Yb(document,Rl.exit):Promise.resolve(),toggle:t=>Mi.isActive===!0?Mi.exit():Mi.request(t)}),Rl.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(t=>document[t]),Mi.isActive=!!eM(),Mi.isActive===!0&&tM(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(t=>{document[t]=yR}));var _R=Po({appVisible:!0},{install({$q:t}){vi(t,"appVisible",()=>this.appVisible)}});{let t,e;if(document.hidden!==void 0?(t="hidden",e="visibilitychange"):document.msHidden!==void 0?(t="msHidden",e="msvisibilitychange"):document.webkitHidden!==void 0&&(t="webkitHidden",e="webkitvisibilitychange"),e&&document[t]!==void 0){const i=()=>{_R.appVisible=!document[t]};document.addEventListener(e,i,!1)}}function Kb(t){return encodeURIComponent(t)}function iM(t){return decodeURIComponent(t)}function bR(t){if(t==="")return t;t.indexOf('"')===0&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t=iM(t.replace(/\+/g," "));try{const e=JSON.parse(t);e!==Object(e)&&Array.isArray(e)!==!0||(t=e)}catch{}return t}function Xb(t){const e=new Date;return e.setMilliseconds(e.getMilliseconds()+t),e.toUTCString()}function Zb(t,e,i={},n){let r,o;i.expires!==void 0&&(Object.prototype.toString.call(i.expires)==="[object Date]"?r=i.expires.toUTCString():typeof i.expires=="string"?r=function(u){let c=0;const h=u.match(/(\d+)d/),d=u.match(/(\d+)h/),p=u.match(/(\d+)m/),f=u.match(/(\d+)s/);return h&&(c+=864e5*h[1]),d&&(c+=36e5*d[1]),p&&(c+=6e4*p[1]),f&&(c+=1e3*f[1]),c===0?u:Xb(c)}(i.expires):(o=parseFloat(i.expires),r=isNaN(o)===!1?Xb(864e5*o):i.expires));const s=`${Kb(t)}=${a=e,Kb(a===Object(a)?JSON.stringify(a):""+a)}`;var a;const l=[s,r!==void 0?"; Expires="+r:"",i.path?"; Path="+i.path:"",i.domain?"; Domain="+i.domain:"",i.sameSite?"; SameSite="+i.sameSite:"",i.httpOnly?"; HttpOnly":"",i.secure?"; Secure":"",i.other?"; "+i.other:""].join("");document.cookie=l}function qf(t,e){const i=document,n=i.cookie?i.cookie.split("; "):[],r=n.length;let o,s,a,l=t?null:{},u=0;for(;u<r;u++)if(o=n[u].split("="),s=iM(o.shift()),a=o.join("="),t){if(t===s){l=bR(a);break}}else l[s]=a;return l}function xR(t){return{get:e=>qf(e),set:(e,i,n)=>Zb(e,i,n),has:e=>function(i,n){return qf(i)!==null}(e),remove:(e,i)=>function(n,r,o){Zb(n,"",{expires:-1,...r})}(e,i),getAll:()=>qf(null)}}ue({name:"BottomSheetComponent",props:{...mt,title:String,message:String,actions:Array,grid:Boolean,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:i}=Me(),n=vt(t,i.$q),r=G(null);function o(){r.value.hide()}function s(c){e("ok",c),o()}function a(){e("hide")}function l(){const c=[];return t.title&&c.push(S(Xo,{class:"q-dialog__title"},()=>t.title)),t.message&&c.push(S(Xo,{class:"q-dialog__message"},()=>t.message)),c.push(t.grid===!0?S("div",{class:"row items-stretch justify-start",role:"list"},t.actions.map(h=>{const d=h.avatar||h.img;return h.label===void 0?S(zr,{class:"col-all",dark:n.value}):S("div",{class:["q-bottom-sheet__item q-hoverable q-focusable cursor-pointer relative-position",h.class],style:h.style,tabindex:0,role:"listitem",onClick(){s(h)},onKeyup(p){p.keyCode===13&&s(h)}},[S("div",{class:"q-focus-helper"}),h.icon?S(_t,{name:h.icon,color:h.color}):d?S("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:d}):S("div",{class:"q-bottom-sheet__empty-icon"}),S("div",h.label)])})):S("div",{role:"list"},t.actions.map(h=>{const d=h.avatar||h.img;return h.label===void 0?S(zr,{spaced:!0,dark:n.value}):S(ul,{class:["q-bottom-sheet__item",h.classes],style:h.style,tabindex:0,clickable:!0,dark:n.value,onClick(){s(h)}},()=>[S(ur,{avatar:!0},()=>h.icon?S(_t,{name:h.icon,color:h.color}):d?S("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:d}):null),S(ur,()=>h.label)])}))),c}function u(){return[S(XS,{class:["q-bottom-sheet q-bottom-sheet--"+(t.grid===!0?"grid":"list")+(n.value===!0?" q-bottom-sheet--dark q-dark":""),t.cardClass],style:t.cardStyle},l)]}return Object.assign(i,{show:function(){r.value.show()},hide:o}),()=>S(Yd,{ref:r,position:"bottom",onHide:a},u)}});var Ks,Af,wR={install({$q:t,ssrContext:e}){t.cookies=this}};Object.assign(wR,xR()),ue({name:"DialogPluginComponent",props:{...mt,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:i}=Me(),{$q:n}=i,r=vt(t,n),o=G(null),s=G(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),a=w(()=>"q-dialog-plugin"+(r.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),l=w(()=>t.color||(r.value===!0?"amber":"primary")),u=w(()=>t.progress===!1?null:Ei(t.progress)===!0?{component:t.progress.spinner||Un,props:{color:t.progress.color||l.value}}:{component:Un,props:{color:l.value}}),c=w(()=>t.prompt!==void 0||t.options!==void 0),h=w(()=>{if(c.value!==!0)return{};const{model:T,isValid:I,items:M,...R}=t.prompt!==void 0?t.prompt:t.options;return R}),d=w(()=>Ei(t.ok)===!0||t.ok===!0?n.lang.label.ok:t.ok),p=w(()=>Ei(t.cancel)===!0||t.cancel===!0?n.lang.label.cancel:t.cancel),f=w(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(s.value)!==!0:t.options!==void 0&&t.options.isValid!==void 0&&t.options.isValid(s.value)!==!0),g=w(()=>({color:l.value,label:d.value,ripple:!1,disable:f.value,...Ei(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&c.value!==!0||void 0,onClick:b})),_=w(()=>({color:l.value,label:p.value,ripple:!1,...Ei(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&c.value!==!0||void 0,onClick:m}));function v(){o.value.hide()}function b(){e("ok",Zn(s.value)),v()}function m(){v()}function y(){e("hide")}function x(T){s.value=T}function C(T){f.value!==!0&&t.prompt.type!=="textarea"&&Sn(T,13)===!0&&b()}function k(T,I){return t.html===!0?S(Xo,{class:T,innerHTML:I}):S(Xo,{class:T},()=>I)}function P(){return[S(ru,{color:l.value,dense:!0,autofocus:!0,dark:r.value,...h.value,modelValue:s.value,"onUpdate:modelValue":x,onKeyup:C})]}function A(){return[S(EI,{color:l.value,options:t.options.items,dark:r.value,...h.value,modelValue:s.value,"onUpdate:modelValue":x})]}function E(){const T=[];return t.title&&T.push(k("q-dialog__title",t.title)),t.progress!==!1&&T.push(S(Xo,{class:"q-dialog__progress"},()=>S(u.value.component,u.value.props))),t.message&&T.push(k("q-dialog__message",t.message)),t.prompt!==void 0?T.push(S(Xo,{class:"scroll q-dialog-plugin__form"},P)):t.options!==void 0&&T.push(S(zr,{dark:r.value}),S(Xo,{class:"scroll q-dialog-plugin__form"},A),S(zr,{dark:r.value})),(t.ok||t.cancel)&&T.push(function(){const I=[];return t.cancel&&I.push(S(xt,_.value)),t.ok&&I.push(S(xt,g.value)),S(wP,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>I)}()),T}function L(){return[S(XS,{class:[a.value,t.cardClass],style:t.cardStyle,dark:r.value},E)]}return se(()=>t.prompt&&t.prompt.model,x),se(()=>t.options&&t.options.model,x),Object.assign(i,{show:function(){o.value.show()},hide:v}),()=>S(Yd,{ref:o,onHide:y},L)}});var Qb=0,No=null,bi={},Bo={},nM={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:Un,customClass:""},Jb={...nM},Kn=Po({isActive:!1},{show(t){bi=function(i){if(i&&i.group!==void 0&&Bo[i.group]!==void 0)return Object.assign(Bo[i.group],i);const n=Ei(i)===!0&&i.ignoreDefaults===!0?{...nM,...i}:{...Jb,...i};return Bo[n.group]=n,n}(t);const{group:e}=bi;return Kn.isActive=!0,Ks!==void 0?(bi.uid=Qb,Af.$forceUpdate()):(bi.uid=++Qb,No!==null&&clearTimeout(No),No=setTimeout(()=>{No=null;const i=x0("q-loading");Ks=CS({name:"QLoading",setup(){function n(){Kn.isActive!==!0&&Ks!==void 0&&($m(!1),Ks.unmount(i),BS(i),Ks=void 0,Af=void 0)}function r(){if(Kn.isActive!==!0)return null;const o=[S(bi.spinner,{class:"q-loading__spinner",color:bi.spinnerColor,size:bi.spinnerSize})];return bi.message&&o.push(S("div",{class:"q-loading__message"+(bi.messageColor?` text-${bi.messageColor}`:""),[bi.html===!0?"innerHTML":"textContent"]:bi.message})),S("div",{class:"q-loading fullscreen flex flex-center z-max "+bi.customClass.trim(),key:bi.uid},[S("div",{class:"q-loading__backdrop"+(bi.backgroundColor?` bg-${bi.backgroundColor}`:"")}),S("div",{class:"q-loading__box column items-center "+bi.boxClass},o)])}return Nt(()=>{$m(!0)}),()=>S(mi,{name:"q-transition--fade",appear:!0,onAfterLeave:n},r)}},Kn.__parentApp),Af=Ks.mount(i)},bi.delay)),i=>{i!==void 0&&Object(i)===i?Kn.show({...i,group:e}):Kn.hide(e)}},hide(t){if(Kn.isActive===!0){if(t===void 0)Bo={};else{if(Bo[t]===void 0)return;{delete Bo[t];const e=Object.keys(Bo);if(e.length!==0){const i=e[e.length-1];return void Kn.show({group:i})}}}No!==null&&(clearTimeout(No),No=null),Kn.isActive=!1}},setDefaults(t){Ei(t)===!0&&Object.assign(Jb,t)},install({$q:t,parentApp:e}){t.loading=this,Kn.__parentApp=e,t.config.loading!==void 0&&this.setDefaults(t.config.loading)}}),th=G(null),ex=Po({isActive:!1},{start:hi,stop:hi,increment:hi,setDefaults:hi,install({$q:t,parentApp:e}){if(t.loadingBar=this,this.__installed===!0)return void(t.config.loadingBar!==void 0&&this.setDefaults(t.config.loadingBar));const i=G(t.config.loadingBar!==void 0?{...t.config.loadingBar}:{});function n(){ex.isActive=!0}function r(){ex.isActive=!1}const o=x0("q-loading-bar");CS({name:"LoadingBar",devtools:{hide:!0},setup:()=>()=>S(XL,{...i.value,onStart:n,onStop:r,ref:th})},e).mount(o),Object.assign(this,{start(s){th.value.start(s)},stop(){th.value.stop()},increment(){th.value.increment.apply(null,arguments)},setDefaults(s){Ei(s)===!0&&Object.assign(i.value,s)}})}});function SR(t){return Rm(t)===!0?"__q_date|"+t.getTime():function(e){return Object.prototype.toString.call(e)==="[object RegExp]"}(t)===!0?"__q_expr|"+t.source:typeof t=="number"?"__q_numb|"+t:typeof t=="boolean"?"__q_bool|"+(t?"1":"0"):typeof t=="string"?"__q_strn|"+t:typeof t=="function"?"__q_strn|"+t.toString():t===Object(t)?"__q_objt|"+JSON.stringify(t):t}function rM(){const t=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:t,getIndex:t,getKey:t,getAll:()=>{},getAllKeys:()=>[],set:hi,setItem:hi,remove:hi,removeItem:hi,clear:hi,isEmpty:()=>!0}}function oM(t){const e=window[t+"Storage"],i=s=>{const a=e.getItem(s);return a?function(l){if(l.length<9)return l;const u=l.substring(0,8),c=l.substring(9);switch(u){case"__q_date":const h=Number(c);return new Date(Number.isNaN(h)===!0?c:h);case"__q_expr":return new RegExp(c);case"__q_numb":return Number(c);case"__q_bool":return c==="1";case"__q_strn":return""+c;case"__q_objt":return JSON.parse(c);default:return l}}(a):null},n=s=>e.getItem(s)!==null,r=(s,a)=>{e.setItem(s,SR(a))},o=s=>{e.removeItem(s)};return{has:n,hasItem:n,getLength:()=>e.length,getItem:i,getIndex:s=>s<e.length?i(e.key(s)):null,getKey:s=>s<e.length?e.key(s):null,getAll:()=>{let s;const a={},l=e.length;for(let u=0;u<l;u++)s=e.key(u),a[s]=i(s);return a},getAllKeys:()=>{const s=[],a=e.length;for(let l=0;l<a;l++)s.push(e.key(l));return s},set:r,setItem:r,remove:o,removeItem:o,clear:()=>{e.clear()},isEmpty:()=>e.length===0}}var sM=ct.has.webStorage===!1?rM():oM("local"),CR={install({$q:t}){t.localStorage=sM}};Object.assign(CR,sM);var aM=ct.has.webStorage===!1?rM():oM("session"),MR={install({$q:t}){t.sessionStorage=aM}};Object.assign(MR,aM);function lM(){return Xi("_q_")}YC(["ok","hide"]);const kR={class:"tool-container menuToolList"},TR={title:"图层"},ER={title:"绘图工具"},LR={title:"量算"},PR={title:"定位"},IR={class:"q-pa-sm"},RR={class:"sjz"},qR={class:"xcoor"},AR={class:"ycoor"},FR={style:{margin:"0 auto"}};var uM=vr({__name:"menuToolBar",emits:["locate"],setup(t,{emit:e}){const i=e,n=G(!1),r=w(()=>{let g="";return Gi.layerTree&&(g="background-color:#ccc"),g});function o(){const g=Gi.layerTree;Gi.layerTree=!g}const s=w(()=>""),a=w(()=>{let g="";return Gi.drawTool&&(g="background-color:#ccc"),g});function l(){const g=Gi.drawTool;Gi.drawTool=!g}const u=w(()=>{let g="";return Gi.measureTool&&(g="background-color:#ccc"),g});function c(){const g=Gi.measureTool;Gi.measureTool=!g}const h=G(),d=G(),p=G();function f(){h.value!=null&&d.value!=null&&i("locate",h.value,d.value,p.value)}return(g,_)=>($t(),Oi("ul",kR,[De("li",{onClick:o,style:Zo(r.value)},[De("span",TR,[it(Bt(to),{icon:"gis:layer-stack-o"})])],4),De("li",{onClick:l,style:Zo(a.value)},[De("span",ER,[it(Bt(to),{icon:"gis:extent-alt"})])],4),De("li",{onClick:c,style:Zo(u.value)},[De("span",LR,[it(Bt(to),{icon:"gis:measure"})])],4),De("li",{id:"locationBtn",style:Zo(s.value)},[De("span",PR,[it(Bt(to),{icon:"gis:position-o"})]),it(Bt(PI),{"model-value":n.value,"transition-show":"flip-up","transition-hide":"flip-down"},{default:Ri(()=>[De("div",IR,[_[3]||(_[3]=De("div",{class:"text-h6 text-center q-mb-md"},"坐标定位",-1)),De("div",RR,[De("div",qR,[it(Bt(ru),{dense:"",style:{width:"200px"},modelValue:h.value,"onUpdate:modelValue":_[0]||(_[0]=v=>h.value=v),label:"经度:",placeholder:"经度十进制"},null,8,["modelValue"])]),De("div",AR,[it(Bt(ru),{dense:"",style:{width:"200px"},modelValue:d.value,"onUpdate:modelValue":_[1]||(_[1]=v=>d.value=v),label:"纬度:",placeholder:"纬度十进制"},null,8,["modelValue"])]),De("div",null,[it(Bt(ru),{id:"inputNumber",label:"级别:",modelValue:p.value,"onUpdate:modelValue":_[2]||(_[2]=v=>p.value=v),modelModifiers:{number:!0},type:"number",dense:"",style:{"max-width":"200px"},min:1,max:22},null,8,["modelValue"])]),De("div",FR,[it(Bt(xt),{color:"primary","text-color":"black",label:"确定",onClick:f})])])])]),_:1},8,["model-value"])],4)]))}});uM.__file="src/components/MapTools/menuToolBar.vue";var tx=vr({name:"SwipeToolBar",props:{xmap:{type:Object}},components:{Icon:to},setup(t){let e,i=t.xmap;return se(()=>t.xmap,n=>{i=n}),{unload:function(){e&&e.unload()},useFishEyes:function(){if(!i)return;const n=i.LayerManager?.SwipeLayerIndex;if(n!==void 0){if(e)e.unload(),e.load();else{const r=document.getElementById(i.target);e=new ym(r,i),e.setSwipeLayer(n)}e.changeSwipeType(fn.FishEye,100)}else Zh.eventEmit(Lt.MAP_MESSAGE_INFO,"请从图层树设置透视图层!")},useSwipe:function(n=0){if(!i)return;const r=i.LayerManager?.SwipeLayerIndex;if(r!==void 0){if(e)e.unload(),e.load();else{const o=document.getElementById(i.target);e=new ym(o,i)}e.setSwipeLayer(r),n===0?e.changeSwipeType(fn.RollHorizonl):e.changeSwipeType(fn.RollVertical)}else Zh.eventEmit(Lt.MAP_MESSAGE_INFO,"请从图层树设置透视图层!")}}}});const OR={class:"tool-container swipeToolList"},zR={title:"横向卷帘"},DR={title:"纵向卷帘"},NR={title:"鱼眼"},BR={title:"取消透视"};tx.render=function(t,e,i,n,r,o){const s=mn("Icon");return $t(),Oi("ul",OR,[De("li",{onClick:e[0]||(e[0]=a=>t.useSwipe(0))},[De("span",zR,[it(s,{icon:"gis:swipe-map-v"})])]),De("li",{onClick:e[1]||(e[1]=a=>t.useSwipe(1))},[De("span",DR,[it(s,{icon:"gis:swipe-map-h"})])]),De("li",{onClick:e[2]||(e[2]=(...a)=>t.useFishEyes&&t.useFishEyes(...a))},[De("span",NR,[it(s,{icon:"gis:screen-mag"})])]),De("li",{onClick:e[3]||(e[3]=(...a)=>t.unload&&t.unload(...a))},[De("span",BR,[it(s,{icon:"gis:earth"})])])])},tx.__file="src/components/MapTools/swipeToolBar.vue";var jR=class extends vm{constructor(t){t=t||{};var e=document.createElement("div");t.element=e,super(t),typeof t.offsetBox=="number"?this.offsetBox=[t.offsetBox,t.offsetBox,t.offsetBox,t.offsetBox]:this.offsetBox=t.offsetBox,this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,_e.create("BUTTON",{className:"closeBox"+(t.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:e}),t.anchor!==!1&&_e.create("DIV",{className:"anchor",parent:e}),this.content=_e.create("DIV",{html:t.html||"",className:"ol-popup-content",parent:e}),t.minibar&&_e.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),t.stopEvent&&(e.addEventListener("mousedown",function(i){i.stopPropagation()}),e.addEventListener("touchstart",function(i){i.stopPropagation()})),this._elt=e,this.setPositioning(t.positioning||"auto"),this.setPopupClass(t.popupClass||t.className||"default"),t.anim&&this.addPopupClass("anim"),t.position&&setTimeout(function(){this.show(t.position)}.bind(this))}getClassPositioning(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t}setClosebox(t){this.closeBox=t,t?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")}setPopupClass(t){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter(function(n){return n.length>0});t?t.split(" ").filter(function(n){return n.length>0}).forEach(function(n){e.push(n)}):e.push("default"),i.forEach(function(n){e.push(n)}),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)}addPopupClass(t){this.element.classList.add(t)}removePopupClass(t){this.element.classList.remove(t)}setPositioning(t){t!==void 0&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),this.autoPositioning.length==1&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,(t=t.replace(/auto/g,"center"))=="center"&&(t="bottom-center"),this.setPositioning_(t))}setPositioning_(t){if(this.element){super.setPositioning(t),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter(function(i){return i.length>0});this.element.classList.add.apply(this.element.classList,e)}}getVisible(){return this.element.classList.contains("visible")}show(t,e){e||typeof t!="string"||(e=t,t=null),t===!0&&(t=this.getPosition());var i=this,n=this.getMap();if(n&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):_e.create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(a){a.addEventListener("load",function(){try{n.renderSync()}catch{}i.content.dispatchEvent(new Event("scroll"))})})),t)){if(this.autoPositioning){var r=n.getPixelFromCoordinate(t),o=n.getSize(),s=[];this.autoPositioning[0]=="auto"?s[0]=r[1]<o[1]/3?"top":"bottom":s[0]=this.autoPositioning[0],s[1]=r[0]<2*o[0]/3?"left":"right",this.setPositioning_(s[0]+"-"+s[1]),this.offsetBox&&this.setOffset([this.offsetBox[s[1]=="left"?2:0],this.offsetBox[s[0]=="top"?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(t),this.element.parentElement.style.display="",typeof this.onshow=="function"&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){i.element.classList.add("visible")},0)}}hide(){this.getPosition()!=null&&(typeof this.onclose=="function"&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))}},VR=class extends jR{constructor(t){(t=t||{}).popupClass=(t.popupClass||"")+" placemark anim",t.positioning="bottom-center",super(t),this.setPositioning=function(){},t.color&&(this.element.style.color=t.color),t.backgroundColor&&(this.element.style.backgroundColor=t.backgroundColor),t.contentColor&&this.setContentColor(t.contentColor),t.size&&this.setRadius(t.size)}show(t,e){t===!0&&(t=this.getPosition()),this.hide(),super.show(t,e)}setColor(t){this.element.style.color=t}setBackgroundColor(t){this._elt.style.backgroundColor=t}setContentColor(t){var e=this.element.getElementsByClassName("ol-popup-content")[0];e&&(e.style.color=t)}setClassName(t){var e=this.element.className;this.element.className="ol-popup placemark ol-popup-bottom ol-popup-center "+(/visible/.test(e)?"visible ":"")+(/anim/.test(e)?"anim ":"")+t}setRadius(t){this.element.style.fontSize=t+"px"}},Ym=vr({name:"ZoomInOut",props:{xmap:{type:Object},hasLayerTree:Rr().def(!1),isInternet:Rr().def(!0),hasFullScreen:Rr().def(!0)},components:{Icon:to},emits:["locate"],setup(t,{emit:e}){const i=w(()=>t.hasLayerTree),n=w(()=>t.hasFullScreen),r=w(()=>{let h=t.isInternet;return t.xmap&&(h=h&&t.xmap.isInternet),h});let o=t.xmap;se(()=>t.xmap,h=>{o=h});const s=G(!1),a=w(()=>s.value?"退出全屏":"地图全屏"),l=w(()=>{let h="";return s.value&&(h="background-color:#ccc"),h}),u=w(()=>{let h="";return Gi.layerTree&&(h="background-color:#ccc"),h});let c;return Nt(()=>{if(o){const h=o.map.getControls();if(h){const d=h.getArray()[0];o.map.removeControl(d)}}}),{isFullScreen:s,toggleMapScreen:function(){if(s.value)dE(),setTimeout(()=>{Z2()},300);else{const h=o.targetContainer,d=document.getElementById(h);if(d)G1(d);else{const p=document.getElementById(o.target);p&&G1(p)}}s.value=!s.value},fullScreenTip:a,fullScreenStyle:l,zoomInOut:function(h=!0){if(!o)return;let d=o.MapView.getZoom()+(h?1:-1);d<=0&&(d=1),o.MapView.setZoom(d)},layerTreeSelected:u,changeLayerTree:function(){const h=Gi.layerTree;Gi.layerTree=!h},hasLayerTreeRef:i,isInternetRef:r,goHomeView:function(){o.goHomeView()},doGeoLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(h=>{if(h.coords&&o){const d=[h.coords.longitude,h.coords.latitude];c||(c=new VR({contentColor:"#000",autoPan:{animation:{duration:250}}})),o.map.addOverlay(c),c.show(at.fromLonLat(d,o.MapView.getProjection())),o.zoomToCenter(d,15),setTimeout(()=>{c&&o.map.getOverlays().pop()},2e3)}}):alert("当前浏览器不支持在线定位！")},hasFullScreenRef:n}}});const $R={class:"tool-container zoomFullList"},GR={title:"放大"},HR={title:"缩小"},UR={title:"图层"},WR=["title"],YR={title:"返回默认视图"},KR={title:"在线定位"};Ym.render=function(t,e,i,n,r,o){const s=mn("Icon");return $t(),Oi("ul",$R,[De("li",{onClick:e[0]||(e[0]=a=>t.zoomInOut())},[De("span",GR,[it(s,{icon:"ant-design:plus-outlined"})])]),De("li",{onClick:e[1]||(e[1]=a=>t.zoomInOut(!1))},[De("span",HR,[it(s,{icon:"ant-design:minus-outlined"})])]),t.hasLayerTreeRef?($t(),Oi("li",{key:0,onClick:e[2]||(e[2]=(...a)=>t.changeLayerTree&&t.changeLayerTree(...a)),style:Zo(t.layerTreeSelected)},[De("span",UR,[it(s,{icon:"gis:layer-stack-o"})])],4)):Ki("v-if",!0),t.hasFullScreenRef?($t(),Oi("li",{key:1,onClick:e[3]||(e[3]=(...a)=>t.toggleMapScreen&&t.toggleMapScreen(...a)),style:Zo(t.fullScreenStyle)},[De("span",{title:t.fullScreenTip},[t.isFullScreen?($t(),On(s,{key:1,icon:"ant-design:fullscreen-exit-outlined"})):($t(),On(s,{key:0,icon:"ant-design:fullscreen-outlined"}))],8,WR)],4)):Ki("v-if",!0),De("li",{onClick:e[4]||(e[4]=(...a)=>t.goHomeView&&t.goHomeView(...a))},[De("span",YR,[it(s,{icon:"ant-design:home-outlined"})])]),t.isInternetRef?($t(),Oi("li",{key:2,onClick:e[5]||(e[5]=(...a)=>t.doGeoLocation&&t.doGeoLocation(...a))},[De("span",KR,[it(s,{icon:"ant-design:aim-outlined"})])])):Ki("v-if",!0)])},Ym.__file="src/components/MapTools/zoomFullBar.vue";const XR={class:"row q-gutter-sm"};var cM=vr({__name:"contextMenu",props:{xmap:{type:Ls,required:!0},replace:{type:Boolean,default:!1},moreMenuList:{type:Array,default:[]},target:{type:[String,Element,Boolean],default:"map"}},emits:["itemClicked"],setup(t,{emit:e}){const i=KC,n=e,r=t,o=[{id:"show-position",label:"查看此处坐标",icon:"ic:baseline-info"},{},{id:"zoom-in",label:"放大",icon:"ic:baseline-zoom-in"},{id:"zoom-out",label:"缩小",icon:"ic:baseline-zoom-out"},{id:"locate-center",label:"移动到此处",icon:"ion:md-locate"}],s=w(()=>{if(eu(r.target)){const u=r.target;return u.startsWith("#")||u.startsWith(".")?r.target:`#${u}`}return r.target}),a=w(()=>r.replace?r.moreMenuList&&r.moreMenuList.length>0?r.moreMenuList:o:r.moreMenuList&&r.moreMenuList.length>0?[...o,...r.moreMenuList]:o),l=lM();return(u,c)=>{const h=mn("Icon");return $t(),On(Bt(ll),{"transition-show":"flip-right","transition-hide":"flip-left",target:s.value,"context-menu":""},{default:Ri(()=>[it(Bt(D0),{dense:"",style:{"min-width":"100px"}},{default:Ri(()=>[($t(!0),Oi(Th,null,Ix(a.value,(d,p)=>($t(),Oi(Th,null,[d.id?Ni(($t(),On(Bt(ul),{key:0,onClick:f=>function(g){const _=r.xmap;switch(g.id){case"show-position":if(!_)throw new Error("传入的XMap对象不能为空！");const v=_.CurrentPosition,b=_.MapView.getProjection(),m=b.getCode();let y="";if(m==="EPSG:4326"||m==="EPSG:4490")y=`经度：${v[0]} 纬度：${v[1]}`;else{const L=at.transformCoordinate(v,b,lt("EPSG:4326"));y=`横：${v[0].toFixed(4)} 纵：${v[1].toFixed(4)}  <br/>经度：${L[0].toFixed(4)} 纬度：${L[1].toFixed(4)}`}l.dialog({title:"提示",message:y,html:!0});break;case"zoom-in":if(!_)throw new Error("传入的XMap对象不能为空！");const x=_.MapView,C=x.getZoom(),k=x.getConstrainedZoom(C+1);x.setZoom(k);break;case"zoom-out":if(!_)throw new Error("传入的XMap对象不能为空！");const P=_.MapView,A=P.getZoom(),E=P.getConstrainedZoom(A-1);P.setZoom(E);break;case"locate-center":if(!_)throw new Error("传入的XMap对象不能为空！");_.MapView.setCenter(_.CurrentPosition);break;default:n("itemClicked",g)}}(d),clickable:""},{default:Ri(()=>[it(Bt(ur),null,{default:Ri(()=>[De("div",XR,[d.icon?($t(),On(h,{key:0,icon:d.icon},null,8,["icon"])):Ki("v-if",!0),De("span",null,Al(d.label),1)])]),_:2},1024)]),_:2},1032,["onClick"])),[[Bt(i)]]):($t(),On(Bt(zr),{key:1}))],64))),256))]),_:1})]),_:1},8,["target"])}}});cM.__file="src/components/MapTools/contextMenu.vue";var Km=vr({name:"myOLMap",components:{ZoomFullBar:Ym,ContextMenu:cM},props:{mapid:Cu().def("map"),mapgroup:Cu().def("map"),hasLayerManager:Rr().def(!1),initTDTLayers:Xh().def(["img_w","cia_w"]),viewProjection:Nd([String,or,Object]).def("EPSG:3857"),defaultCenter:Xh().def([108.95,34.5]),viewOptions:Dd(),multiWorld:Rr().def(!1),enableContextMenu:Rr().def(!0)},emits:["mapInited"],setup(t,{emit:e}){const i=t.mapid,n=G(t.mapid),r=G(t.mapid+"_Container"),o=t.mapgroup;let s,a=t.viewProjection;se(()=>t.viewProjection,p=>{h(p),d()});const l=w(()=>t.enableContextMenu),u=G();let c;function h(p){s=t.viewOptions??{projection:p,center:t.defaultCenter,zoom:3,multiWorld:t.multiWorld},!s.center&&t.defaultCenter&&(s.center=t.defaultCenter),c&&(c.dispose(),c=void 0,u.value=void 0),c=new Ls(i,o,t.hasLayerManager),t.hasLayerManager}function d(){c.initMapView(s),u.value=c;let p=c.WMTSTool;if(t.initTDTLayers){const f=t.initTDTLayers;f&&f.length>0&&f.forEach(g=>{const _=g.toLocaleLowerCase(),v=p.getTDTAlias(_);p.addTDTLayer(g,v)})}e("mapInited",{xmap:c,wmtsTool:p})}return Nt(()=>{s||(h(a),d())}),{mapIDRef:n,mapContainerRef:r,mapRef:u,enableMenuComputed:l}}});const ZR=["id"],QR={class:"mainMapPanel"},JR=["id"],eq={class:"mapLeftPanel"},tq={class:"mapRightPanel"},iq={key:0,class:"extendmenu"},nq={style:{position:"relative"}};Km.render=function(t,e,i,n,r,o){const s=mn("ZoomFullBar"),a=mn("ContextMenu");return $t(),Oi("div",{id:t.mapContainerRef,class:"mapContainer"},[De("div",QR,[De("div",{id:t.mapIDRef,class:"mainMapPanel"},null,8,JR),De("div",null,[ra(t.$slots,"default")])]),De("div",eq,[ra(t.$slots,"mapLeftPanel")]),De("div",tq,[ra(t.$slots,"mapRightPanel",{},()=>[Ki("地图扩展菜单 "),t.mapRef?($t(),Oi("div",iq,[De("div",nq,[it(s,{xmap:t.mapRef,hasLayerTree:!1},null,8,["xmap"])]),Ki(" 扩展菜单 "),ra(t.$slots,"mapRightExtend")])):Ki("v-if",!0)])]),t.enableMenuComputed?($t(),On(a,{key:0,target:t.mapIDRef,xmap:t.mapRef},null,8,["target","xmap"])):Ki("v-if",!0)],8,ZR)},Km.__file="src/components/OLXmap/index.vue";var ix=vr({name:"xmapView",props:{hasLayerTree:Rr().def(!1),viewHeight:pm().isRequired,viewWidth:pm().isRequired,mapid:Cu().def("map"),mapgroup:Cu().def("map"),viewProjection:Nd([String,or]).def("EPSG:4326"),initTDTLayers:Array,viewOptions:Dd(),multiWorld:Rr().def(!1)},components:{OLXMap:Km,DrawToolBar:Tm,MeasureToolBar:Em,MenuToolBar:uM},emits:["mapInited"],setup(t,{attrs:e,slots:i,emit:n}){const r=G(t.hasLayerTree),o=G(t.viewHeight),s=G(t.viewWidth),a=G(t.initTDTLayers),l=G(),u=G();let c;function h(g){if(g){if(eu(g))g==="EPSG:4326"&&(a.value=t.initTDTLayers??["vec_c","cva_c"]);else{const _=g.getCode();(_==="EPSG:4326"||_==="EPSG:4490")&&(a.value=t.initTDTLayers??["vec_c","cva_c"])}l.value=g}}h(t.viewProjection),se(()=>t.viewProjection,()=>{const g=t.viewProjection;g&&h(g)}),se(()=>t.viewHeight,g=>{o.value=g}),se(()=>t.viewWidth,g=>{s.value=g});const d=w(()=>`height:${o.value-55}px`),p=w(()=>`width:${s.value-20}px;`),f=w(()=>{const g=o.value,_=s.value;return Z2(),`position:relative;width:${_};height:${g}px`});return Nt(()=>{}),ht(()=>{let g=c?.map;g&&g.dispose()}),{heightStyle:d,widthStyle:p,layerTreeVisible:w(()=>Gi.layerTree),mapInitedHandler:function(g){c=g.xmap,u.value=c,n("mapInited",g)},mapRef:u,mainContainStyle:f,hasLayerTreeRef:r,initTDTLayersRef:a,viewProjectionRef:l,mapMenuState:Gi,doLocation:function(g,_,v){if(c.map){const b=c.MapView,m=b.getProjection(),y=at.transformCoordinate([g,_],"EPSG:4326",m);b.setCenter(y),v&&v>=0&&b.setZoom(v)}}}}});const rq={style:{position:"relative"}};ix.render=function(t,e,i,n,r,o){const s=mn("MenuToolBar"),a=mn("DrawToolBar"),l=mn("MeasureToolBar"),u=mn("OLXMap");return $t(),Oi("div",{class:"mainViewContent",style:Zo(t.mainContainStyle)},[it(u,{mapid:t.mapid,viewOptions:t.viewOptions,"multi-world":t.multiWorld,mapgroup:t.mapgroup,hasLayerManager:!0,viewProjection:t.viewProjectionRef,initTDTLayers:t.initTDTLayersRef,onMapInited:t.mapInitedHandler},{mapLeftPanel:Ri(()=>[Ki(' 图层树class="mapstyle"  '),Ki(' <LayerTree class="layerTree" :style="heightStyle" v-show="layerTreeVisible"></LayerTree> '),Ki(" 扩展弹框 "),ra(t.$slots,"mapLeftPanelGroup")]),mapRightExtend:Ri(()=>[Ki("地图扩展菜单 "),De("div",rq,[it(s,{onLocate:t.doLocation},null,8,["onLocate"]),Ni(it(a,{xmap:t.mapRef},null,8,["xmap"]),[[Eh,t.mapMenuState.drawTool]]),Ni(it(l,{xmap:t.mapRef},null,8,["xmap"]),[[Eh,t.mapMenuState.measureTool]])]),Ki(" 扩展菜单 "),ra(t.$slots,"extendMenuGroup")]),_:3},8,["mapid","viewOptions","multi-world","mapgroup","viewProjection","initTDTLayers","onMapInited"])],4)},ix.__file="src/components/XMapView/index.vue";const oq={class:"row items-center"},sq={class:"text-weight-bold text-primary"},aq={class:"row full-width no-wrap"},lq={class:"row items-center justify-center q-gutter-sm no-wrap layer_label_nowrap"},uq=["title"],cq={class:"gt-sm row items-center justify-center q-gutter-sm no-wrap layer_right_bar"},hq={class:"cursor-pointer"},dq={title:"透明度"},pq=["onClick"],fq={class:"row items-center q-gutter-sm"};var gq=vr({__name:"LayerTree",props:{xmap:Nd([Dd,Ls]).isRequired,moreContextMenu:Xh().def([])},setup(t){const e=lM(),i=KC,n=t,r=w(()=>{if(n.moreContextMenu.length>0){const C=[...a];return C.push(...n.moreContextMenu),C}return a}),o={grid:"zondicons:view-tile",vector:"gis:extent-alt",mvt:"gis:mvt",symbol:"gis:layer-poi"};function s(C){let k=o[C];return k||(k="gis:layer-landcover"),k}const a=[{name:"升序",icon:"gis:layer-up",value:"upMove"},{name:"降序",icon:"gis:layer-down",value:"downMove"},{name:"定位",icon:"gis:location-on",value:"location"},{name:"删除",icon:"gis:layer-2-rm-o",value:"delete"}];function l(C,k){switch(C.value){case"upMove":x(k.id,1);break;case"downMove":x(k.id,-1);break;case"location":(function(A){v.mapEventBus.eventEmit(Lt.LAYER_LOCATE,A)})(k.id);break;case"delete":e.dialog({title:"确认提示",message:`确定移除图层:${k.label}？`,cancel:!0,persistent:!0}).onOk(()=>{(function(A){v.mapEventBus.eventEmit(Lt.LAYER_REMOVED,b({id:A}))})(k.id)}).onCancel(()=>{});break;default:const P={item:C,id:k.id,name:k.name,label:k.label};v.mapEventBus.eventEmit(Lt.LAYER_TREE_CONTEXT_MENU,b(P))}}function u(C){return C===v.swipeid?"gis:map-control":"gis:map-o"}const c=G([]),h=G(""),d=G([]),p=G([]);let f=[];function g(C){c.value=[];let k,P=[];const A=C.length;for(let T=0;T<A;T++){const I=C[T],M={id:I.id,name:I.name,label:I.alias?I.alias:I.name,group:I.group,minZoom:I.minZoom,maxZoom:I.maxZoom,visible:I.visible,opacity:I.opacity,type:I.type};let R,q,F;T<A-1&&(R=C[T+1]),R&&(F=R.group),q=M.group,q?k===q?P[P.length-1].children.push(M):R&&F===q?P.push({id:Qn(),label:q,header:"group",children:[M]}):P.push(M):P.push(M),k=q}c.value=P;const E=c.value.length,L=[];for(let T=0;T<E;T++){const I=c.value[T];if(L.push(I.id),I.children){let M=!0;const R=I.children.length;for(let q=0;q<R;q++){let F=I.children[q];F.visible?f.push(F.id):M=!1}M&&f.push(I.id)}else I.visible&&f.push(I.id)}p.value=L,d.value=f}function _(C){C.mapID==v.mapid&&n.xmap&&g(n.xmap.LayerManager.LayerItemList)}se(()=>n.xmap,C=>{C&&(v.mapEventBus=C.mapEventBus,v.mapid=C.target,g(C.LayerManager.LayerItemList),v.mapEventBus.eventOn(Lt.LAYER_CHANGED,_))},{immediate:!0}),se(()=>d,()=>{const C=Zn(d.value),k=f,P=C.filter(E=>!k.includes(E)),A=k.filter(E=>!C.includes(E));P&&P.forEach(E=>{m(E,!0)}),A&&A.forEach(E=>{m(E,!1)}),f=[...C]},{immediate:!1,deep:!0});const v=eo({mapEventBus:void 0,mapid:"map",mapgroup:"map",swipeid:void 0});function b(C,k=null){if(n.xmap)return n.xmap.newEvtArgs(C,k);{const P=new n0(v.mapid,"map");return P.data=C,P.target=k,P}}function m(C,k){v.mapEventBus.eventEmit(Lt.LAYER_VISIBLE_CHANGED,b({id:C,visible:k}))}function y(C){const k=C.opacity;(function(P,A){let E=1;E=A>1?1:A<0?0:A,v.mapEventBus.eventEmit(Lt.LAYER_OPACITY_CHANGED,b({id:P,opacity:E}))})(C.id,k)}function x(C,k){v.mapEventBus.eventEmit(Lt.LAYER_ORDER_CHANGED,b({layerID:C,updown:k}))}return(C,k)=>{const P=mn("Icon");return $t(),On(Bt(FI),{class:"layerTreeControl"},{default:Ri(()=>[it(Bt(nR),{style:{width:"100%"},nodes:c.value,"node-key":"id","label-key":"label","tick-strategy":"leaf","no-connectors":"",selected:h.value,"onUpdate:selected":k[0]||(k[0]=A=>h.value=A),ticked:d.value,"onUpdate:ticked":k[1]||(k[1]=A=>d.value=A),expanded:p.value,"onUpdate:expanded":k[2]||(k[2]=A=>p.value=A)},{"header-group":Ri(A=>[De("div",oq,[it(P,{icon:"gis:folder-globe-o"}),De("div",sq,Al(A.node.label),1)])]),"default-header":Ri(A=>[De("div",aq,[De("div",lq,[it(P,{icon:s(A.node.type)},null,8,["icon"]),De("span",{title:A.node.name},Al(A.node.label),9,uq)]),it(Bt(VI),{class:"gt-sm"}),De("div",cq,[De("div",hq,[De("span",dq,Al(A.node.opacity),1),it(Bt(LI),{modelValue:A.node.opacity,"onUpdate:modelValue":[E=>A.node.opacity=E,E=>y(A.node)],"auto-save":"",class:"layer_opacity_slider"},{default:Ri(E=>[it(Bt(Yo),{modelValue:E.value,"onUpdate:modelValue":L=>E.value=L,step:.05,min:0,max:1,onKeyup:tk(E.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),De("span",{title:"设置透视图层",onClick:ik(E=>function(L){L&&(v.swipeid=L,v.mapEventBus.eventEmit(Lt.LAYER_SWIPE_CHANGED,b({id:L})))}(A.node.id),["stop"])},[it(P,{icon:u(A.node.id)},null,8,["icon"])],8,pq)])]),it(Bt(ll),{target:!0,"context-menu":""},{default:Ri(()=>[it(Bt(D0),{dense:"",style:{"min-width":"100px"}},{default:Ri(()=>[($t(!0),Oi(Th,null,Ix(r.value,(E,L)=>($t(),Oi(Th,null,[E.name?Ni(($t(),On(Bt(ul),{key:0,onClick:T=>l(E,A.node),clickable:""},{default:Ri(()=>[it(Bt(ur),null,{default:Ri(()=>[De("div",fq,[E.icon?($t(),On(P,{key:0,icon:E.icon},null,8,["icon"])):Ki("v-if",!0),De("span",null,Al(E.name),1)])]),_:2},1024)]),_:2},1032,["onClick"])),[[Bt(i)]]):($t(),On(Bt(zr),{key:1}))],64))),256))]),_:2},1024)]),_:2},1024)]),_:1},8,["nodes","selected","ticked","expanded"])]),_:1})}}});function hM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}gq.__file="src/components/LayerTree.vue";var dM,nx={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function su(t){return(t=Math.round(t))<0?0:t>255?255:t}function rx(t){return t<0?0:t>1?1:t}function Ff(t){return t[t.length-1]==="%"?su(parseFloat(t)/100*255):su(parseInt(t))}function ih(t){return t[t.length-1]==="%"?rx(parseFloat(t)/100):rx(parseFloat(t))}function Of(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{dM={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in nx)return nx[i].slice();if(i[0]==="#")return i.length===4?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:i.length===7&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=i.indexOf("("),r=i.indexOf(")");if(n!==-1&&r+1===i.length){var o=i.substr(0,n),s=i.substr(n+1,r-(n+1)).split(","),a=1;switch(o){case"rgba":if(s.length!==4)return null;a=ih(s.pop());case"rgb":return s.length!==3?null:[Ff(s[0]),Ff(s[1]),Ff(s[2]),a];case"hsla":if(s.length!==4)return null;a=ih(s.pop());case"hsl":if(s.length!==3)return null;var l=(parseFloat(s[0])%360+360)%360/360,u=ih(s[1]),c=ih(s[2]),h=c<=.5?c*(u+1):c+u-c*u,d=2*c-h;return[su(255*Of(d,h,l+1/3)),su(255*Of(d,h,l)),su(255*Of(d,h,l-1/3)),a];default:return null}}return null}}catch{}class $i{constructor(e,i,n,r=1){this.r=e,this.g=i,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof $i)return e;if(typeof e!="string")return;const i=dM(e);return i?new $i(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[e,i,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(i)},${Math.round(n)},${r})`}toArray(){const{r:e,g:i,b:n,a:r}=this;return r===0?[0,0,0,0]:[255*e/r,255*i/r,255*n/r,r]}toArray01(){const{r:e,g:i,b:n,a:r}=this;return r===0?[0,0,0,0]:[e/r,i/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:i,b:n,a:r}=this;return[e,i,n,r]}}$i.black=new $i(0,0,0,1),$i.white=new $i(1,1,1,1),$i.transparent=new $i(0,0,0,0),$i.red=new $i(1,0,0,1),$i.blue=new $i(0,0,1,1);var cn=$i;function Ou(t){return typeof t=="object"?["literal",t]:t}function mq(t,e){let i=t.stops;if(!i)return function(s,a){const l=["get",s.property];if(s.default===void 0)return a.type==="string"?["string",l]:l;if(a.type==="enum")return["match",l,Object.keys(a.values),l,s.default];{const u=[a.type==="color"?"to-color":a.type,l,Ou(s.default)];return a.type==="array"&&u.splice(1,0,a.value,a.length||null),u}}(t,e);const n=i&&typeof i[0][0]=="object",r=n||t.property!==void 0,o=n||!r;return i=i.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],vq(s[1])]:[s[0],Ou(s[1])]),n?function(s,a,l){const u={},c={},h=[];for(let d=0;d<l.length;d++){const p=l[d],f=p[0].zoom;u[f]===void 0&&(u[f]={zoom:f,type:s.type,property:s.property,default:s.default},c[f]=[],h.push(f)),c[f].push([p[0].value,p[1]])}if(Qm({},a)==="exponential"){const d=[Xm(s),["linear"],["zoom"]];for(const p of h)Ma(d,p,zf(u[p],a,c[p]),!1);return d}{const d=["step",["zoom"]];for(const p of h)Ma(d,p,zf(u[p],a,c[p]),!0);return Zm(d),d}}(t,e,i):o?function(s,a,l,u=["zoom"]){const c=Qm(s,a);let h,d=!1;if(c==="interval")h=["step",u],d=!0;else{if(c!=="exponential")throw new Error(`Unknown zoom function type "${c}"`);{const p=s.base!==void 0?s.base:1;h=[Xm(s),p===1?["linear"]:["exponential",p],u]}}for(const p of l)Ma(h,p[0],p[1],d);return Zm(h),h}(t,e,i):zf(t,e,i)}function Xm(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function ox(t,e){const i=Ou(function(n,r){return n!==void 0?n:r!==void 0?r:void 0}(t.default,e.default));return i===void 0&&e.type==="resolvedImage"?"":i}function zf(t,e,i){const n=Qm(t,e),r=["get",t.property];if(n==="categorical"&&typeof i[0][0]=="boolean"){const o=["case"];for(const s of i)o.push(["==",r,s[0]],s[1]);return o.push(ox(t,e)),o}if(n==="categorical"){const o=["match",r];for(const s of i)Ma(o,s[0],s[1],!1);return o.push(ox(t,e)),o}if(n==="interval"){const o=["step",["number",r]];for(const s of i)Ma(o,s[0],s[1],!0);return Zm(o),t.default===void 0?o:["case",["==",["typeof",r],"number"],o,Ou(t.default)]}if(n==="exponential"){const o=t.base!==void 0?t.base:1,s=[Xm(t),o===1?["linear"]:["exponential",o],["number",r]];for(const a of i)Ma(s,a[0],a[1],!1);return t.default===void 0?s:["case",["==",["typeof",r],"number"],s,Ou(t.default)]}throw new Error(`Unknown property function type ${n}`)}function Zm(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function Ma(t,e,i,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(i))}function Qm(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function vq(t){const e=["concat"],i=/{([^{}]+)}/g;let n=0;for(let r=i.exec(t);r!==null;r=i.exec(t)){const o=t.slice(n,i.lastIndex-r[0].length);n=i.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}class yq extends Error{constructor(e,i){super(i),this.message=i,this.key=e}}var Jn=yq;class N0{constructor(e,i=[]){this.parent=e,this.bindings={};for(const[n,r]of i)this.bindings[n]=r}concat(e){return new N0(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var _q=N0;const Jd={kind:"null"},Ee={kind:"number"},ut={kind:"string"},rt={kind:"boolean"},qr={kind:"color"},ka={kind:"object"},ot={kind:"value"},ep={kind:"collator"},tp={kind:"formatted"},nc={kind:"resolvedImage"};function gn(t,e){return{kind:"array",itemType:t,N:e}}function Qt(t){if(t.kind==="array"){const e=Qt(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}return t.kind}const bq=[Jd,Ee,ut,rt,qr,tp,ka,gn(ot),nc];function zu(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!zu(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const i of bq)if(!zu(i,e))return null}}return`Expected ${Qt(t)} but found ${Qt(e)} instead.`}function B0(t,e){return e.some(i=>i.kind===t.kind)}function Du(t,e){return e.some(i=>i==="null"?t===null:i==="array"?Array.isArray(t):i==="object"?t&&!Array.isArray(t)&&typeof t=="object":i===typeof t)}class j0{constructor(e,i,n){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Jm{constructor(e,i,n,r,o){this.text=e.normalize?e.normalize():e,this.image=i,this.scale=n,this.fontStack=r,this.textColor=o}}class cr{constructor(e){this.sections=e}static fromString(e){return new cr([new Jm(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof cr?e:cr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const i of this.sections){if(i.image){e.push(["image",i.image.name]);continue}e.push(i.text);const n={};i.fontStack&&(n["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(n["font-scale"]=i.scale),i.textColor&&(n["text-color"]=["rgba"].concat(i.textColor.toArray())),e.push(n)}return e}}class Ro{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ro({name:e,available:!1}):null}serialize(){return["image",this.name]}}function pM(t,e,i,n){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255?n===void 0||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,i,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[t,e,i,n]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xd(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof cn||t instanceof j0||t instanceof cr||t instanceof Ro)return!0;if(Array.isArray(t)){for(const e of t)if(!xd(e))return!1;return!0}if(typeof t=="object"){for(const e in t)if(!xd(t[e]))return!1;return!0}return!1}function _i(t){if(t===null)return Jd;if(typeof t=="string")return ut;if(typeof t=="boolean")return rt;if(typeof t=="number")return Ee;if(t instanceof cn)return qr;if(t instanceof j0)return ep;if(t instanceof cr)return tp;if(t instanceof Ro)return nc;if(Array.isArray(t)){const e=t.length;let i;for(const n of t){const r=_i(n);if(i){if(i===r)continue;i=ot;break}i=r}return gn(i||ot,e)}return ka}function au(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof cn||t instanceof cr||t instanceof Ro?t.toString():JSON.stringify(t)}class V0{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(e.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!xd(e[1]))return i.error("invalid value");const n=e[1];let r=_i(n);const o=i.expectedType;return r.kind!=="array"||r.N!==0||!o||o.kind!=="array"||typeof o.N=="number"&&o.N!==0||(r=o),new V0(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof cn?["rgba"].concat(this.value.toArray()):this.value instanceof cr?this.value.serialize():this.value}}var wd=V0,Ci=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const Df={string:ut,number:Ee,boolean:rt,object:ka};class $0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let n,r=1;const o=e[0];if(o==="array"){let a,l;if(e.length>2){const u=e[1];if(typeof u!="string"||!(u in Df)||u==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);a=Df[u],r++}else a=ot;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);l=e[2],r++}n=gn(a,l)}else n=Df[o];const s=[];for(;r<e.length;r++){const a=i.parse(e[r],r,ot);if(!a)return null;s.push(a)}return new $0(n,s)}evaluate(e){for(let i=0;i<this.args.length;i++){const n=this.args[i].evaluate(e);if(!zu(this.type,_i(n)))return n;if(i===this.args.length-1)throw new Ci(`Expected value to be of type ${Qt(this.type)}, but found ${Qt(_i(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,i=[e.kind];if(e.kind==="array"){const n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){i.push(n.kind);const r=e.N;(typeof r=="number"||this.args.length>1)&&i.push(r)}}return i.concat(this.args.map(n=>n.serialize()))}}var Lr=$0;class ip{constructor(e){this.type=tp,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return i.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let l=null;if(a["font-scale"]&&(l=i.parse(a["font-scale"],1,Ee),!l))return null;let u=null;if(a["text-font"]&&(u=i.parse(a["text-font"],1,gn(ut)),!u))return null;let c=null;if(a["text-color"]&&(c=i.parse(a["text-color"],1,qr),!c))return null;const h=r[r.length-1];h.scale=l,h.font=u,h.textColor=c}else{const l=i.parse(e[s],1,ot);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:l,scale:null,font:null,textColor:null})}}return new ip(r)}evaluate(e){return new cr(this.sections.map(i=>{const n=i.content.evaluate(e);return _i(n)===nc?new Jm("",n,null,null,null):new Jm(au(n),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))}eachChild(e){for(const i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const i of this.sections){e.push(i.content.serialize());const n={};i.scale&&(n["font-scale"]=i.scale.serialize()),i.font&&(n["text-font"]=i.font.serialize()),i.textColor&&(n["text-color"]=i.textColor.serialize()),e.push(n)}return e}}class np{constructor(e){this.type=nc,this.input=e}static parse(e,i){if(e.length!==2)return i.error("Expected two arguments.");const n=i.parse(e[1],1,ut);return n?new np(n):i.error("No image name provided.")}evaluate(e){const i=this.input.evaluate(e),n=Ro.fromString(i);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(i)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const xq={"to-boolean":rt,"to-color":qr,"to-number":Ee,"to-string":ut};class G0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return i.error("Expected one argument.");const r=xq[n],o=[];for(let s=1;s<e.length;s++){const a=i.parse(e[s],s,ot);if(!a)return null;o.push(a)}return new G0(r,o)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let i,n;for(const r of this.args){if(i=r.evaluate(e),n=null,i instanceof cn)return i;if(typeof i=="string"){const o=e.parseColor(i);if(o)return o}else if(Array.isArray(i)&&(n=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:pM(i[0],i[1],i[2],i[3]),!n))return new cn(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Ci(n||`Could not parse color from value '${typeof i=="string"?i:String(JSON.stringify(i))}'`)}if(this.type.kind==="number"){let i=null;for(const n of this.args){if(i=n.evaluate(e),i===null)return 0;const r=Number(i);if(!isNaN(r))return r}throw new Ci(`Could not convert ${JSON.stringify(i)} to number.`)}return this.type.kind==="formatted"?cr.fromString(au(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ro.fromString(au(this.args[0].evaluate(e))):au(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ip([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new np(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(i=>{e.push(i.serialize())}),e}}var fa=G0;const wq=["Unknown","Point","LineString","Polygon"];var fM=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?wq[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:n}=this.featureTileCoord,r=i*e-t[0],o=n*e-t[1];return this.featureDistanceData.bearing[0]*r+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=cn.parse(t)),e}};class ga{constructor(e,i,n,r){this.name=e,this.type=i,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,i){const n=e[0],r=ga.definitions[n];if(!r)return i.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([u])=>!Array.isArray(u)||u.length===e.length-1);let l=null;for(const[u,c]of a){l=new yM(i.registry,i.path,null,i.scope);const h=[];let d=!1;for(let p=1;p<e.length;p++){const f=e[p],g=Array.isArray(u)?u[p-1]:u.type,_=l.parse(f,1+h.length,g);if(!_){d=!0;break}h.push(_)}if(!d)if(Array.isArray(u)&&u.length!==h.length)l.error(`Expected ${u.length} arguments, but found ${h.length} instead.`);else{for(let p=0;p<h.length;p++){const f=Array.isArray(u)?u[p]:u.type,g=h[p];l.concat(p+1).checkSubtype(f,g.type)}if(l.errors.length===0)return new ga(n,o,c,h)}}if(a.length===1)i.errors.push(...l.errors);else{const u=(a.length?a:s).map(([h])=>{return d=h,Array.isArray(d)?`(${d.map(Qt).join(", ")})`:`(${Qt(d.type)}...)`;var d}).join(" | "),c=[];for(let h=1;h<e.length;h++){const d=i.parse(e[h],1+c.length);if(!d)return null;c.push(Qt(d.type))}i.error(`Expected arguments of type ${u}, but found (${c.join(", ")}) instead.`)}return null}static register(e,i){ga.definitions=i;for(const n in i)e[n]=ga}}var cl=ga;class rp{constructor(e,i,n){this.type=ep,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(e.length!==2)return i.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return i.error("Collator options argument must be an object.");const r=i.parse(n["case-sensitive"]!==void 0&&n["case-sensitive"],1,rt);if(!r)return null;const o=i.parse(n["diacritic-sensitive"]!==void 0&&n["diacritic-sensitive"],1,rt);if(!o)return null;let s=null;return n.locale&&(s=i.parse(n.locale,1,ut),!s)?null:new rp(r,o,s)}evaluate(e){return new j0(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const bo=8192;function H0(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function nh(t,e){return!(t[0]<=e[0])&&!(t[2]>=e[2])&&!(t[1]<=e[1])&&!(t[3]>=e[3])}function Sq(t,e){const i=function(o){return(180+o)/360}(t[0]),n=function(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}(t[1]),r=Math.pow(2,e.z);return[Math.round(i*r*bo),Math.round(n*r*bo)]}function Cq(t,e,i){const n=t[0]-e[0],r=t[1]-e[1],o=t[0]-i[0],s=t[1]-i[1];return n*s-o*r==0&&n*o<=0&&r*s<=0}function Mq(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function U0(t,e){let i=!1;for(let n=0,r=e.length;n<r;n++){const o=e[n];for(let s=0,a=o.length;s<a-1;s++){if(Cq(t,o[s],o[s+1]))return!1;Mq(t,o[s],o[s+1])&&(i=!i)}}return i}function kq(t,e){for(let i=0;i<e.length;i++)if(U0(t,e[i]))return!0;return!1}function sx(t,e,i,n){const r=t[0]-i[0],o=t[1]-i[1],s=e[0]-i[0],a=e[1]-i[1],l=n[0]-i[0],u=n[1]-i[1],c=r*u-l*o,h=s*u-l*a;return c>0&&h<0||c<0&&h>0}function Tq(t,e,i,n){const r=[e[0]-t[0],e[1]-t[1]];return(o=[n[0]-i[0],n[1]-i[1]])[0]*(s=r)[1]-o[1]*s[0]!=0&&!(!sx(t,e,i,n)||!sx(i,n,t,e));var o,s}function Eq(t,e,i){for(const n of i)for(let r=0;r<n.length-1;++r)if(Tq(t,e,n[r],n[r+1]))return!0;return!1}function gM(t,e){for(let i=0;i<t.length;++i)if(!U0(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(Eq(t[i],t[i+1],e))return!1;return!0}function Lq(t,e){for(let i=0;i<e.length;i++)if(gM(t,e[i]))return!0;return!1}function ev(t,e,i){const n=[];for(let r=0;r<t.length;r++){const o=[];for(let s=0;s<t[r].length;s++){const a=Sq(t[r][s],i);H0(e,a),o.push(a)}n.push(o)}return n}function ax(t,e,i){const n=[];for(let r=0;r<t.length;r++){const o=ev(t[r],e,i);n.push(o)}return n}function mM(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const r=.5*n;let o=t[0]-i[0]>r?-n:i[0]-t[0]>r?n:0;o===0&&(o=t[0]-i[2]>r?-n:i[2]-t[0]>r?n:0),t[0]+=o}H0(e,t)}function lx(t,e,i,n){const r=Math.pow(2,n.z)*bo,o=[n.x*bo,n.y*bo],s=[];if(!t)return s;for(const a of t)for(const l of a){const u=[l.x+o[0],l.y+o[1]];mM(u,e,i,r),s.push(u)}return s}function ux(t,e,i,n){const r=Math.pow(2,n.z)*bo,o=[n.x*bo,n.y*bo],s=[];if(!t)return s;for(const a of t){const l=[];for(const u of a){const c=[u.x+o[0],u.y+o[1]];H0(e,c),l.push(c)}s.push(l)}if(e[2]-e[0]<=r/2){(function(a){a[0]=a[1]=1/0,a[2]=a[3]=-1/0})(e);for(const a of s)for(const l of a)mM(l,e,i,r)}return s}class lu{constructor(e,i){this.type=rt,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(xd(e[1])){const n=e[1];if(n.type==="FeatureCollection")for(let r=0;r<n.features.length;++r){const o=n.features[r].geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new lu(n,n.features[r].geometry)}else if(n.type==="Feature"){const r=n.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new lu(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new lu(n,n)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,n){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],s=i.canonicalID();if(!s)return!1;if(n.type==="Polygon"){const a=ev(n.coordinates,o,s),l=lx(i.geometry(),r,o,s);if(!nh(r,o))return!1;for(const u of l)if(!U0(u,a))return!1}if(n.type==="MultiPolygon"){const a=ax(n.coordinates,o,s),l=lx(i.geometry(),r,o,s);if(!nh(r,o))return!1;for(const u of l)if(!kq(u,a))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,n){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],s=i.canonicalID();if(!s)return!1;if(n.type==="Polygon"){const a=ev(n.coordinates,o,s),l=ux(i.geometry(),r,o,s);if(!nh(r,o))return!1;for(const u of l)if(!gM(u,a))return!1}if(n.type==="MultiPolygon"){const a=ax(n.coordinates,o,s),l=ux(i.geometry(),r,o,s);if(!nh(r,o))return!1;for(const u of l)if(!Lq(u,a))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var W0=lu;function op(t){if(t instanceof cl&&(t.name==="get"&&t.args.length===1||t.name==="feature-state"||t.name==="has"&&t.args.length===1||t.name==="properties"||t.name==="geometry-type"||t.name==="id"||/^filter-/.test(t.name))||t instanceof W0)return!1;let e=!0;return t.eachChild(i=>{e&&!op(i)&&(e=!1)}),e}function Y0(t){if(t instanceof cl&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(i=>{e&&!Y0(i)&&(e=!1)}),e}function K0(t,e){if(t instanceof cl&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild(n=>{i&&!K0(n,e)&&(i=!1)}),i}class X0{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const n=e[1];return i.scope.has(n)?new X0(n,i.scope.get(n)):i.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var vM=X0;class Z0{constructor(e,i=[],n,r=new _q,o=[]){this.registry=e,this.path=i,this.key=i.map(s=>`[${s}]`).join(""),this.scope=r,this.errors=o,this.expectedType=n}parse(e,i,n,r,o={}){return i?this.concat(i,n,r)._parse(e,o):this._parse(e,o)}_parse(e,i){function n(r,o,s){return s==="assert"?new Lr(o,[r]):s==="coerce"?new fa(o,[r]):r}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,l=s.type;if(a.kind!=="string"&&a.kind!=="number"&&a.kind!=="boolean"&&a.kind!=="object"&&a.kind!=="array"||l.kind!=="value")if(a.kind!=="color"&&a.kind!=="formatted"&&a.kind!=="resolvedImage"||l.kind!=="value"&&l.kind!=="string"){if(this.checkSubtype(a,l))return null}else s=n(s,a,i.typeAnnotation||"coerce");else s=n(s,a,i.typeAnnotation||"assert")}if(!(s instanceof wd)&&s.type.kind!=="resolvedImage"&&tv(s)){const a=new fM;try{s=new wd(s.type,s.evaluate(a))}catch(l){return this.error(l.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return e===void 0?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,i,n){const r=typeof e=="number"?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new Z0(this.registry,r,i||null,o,this.errors)}error(e,...i){const n=`${this.key}${i.map(r=>`[${r}]`).join("")}`;this.errors.push(new Jn(n,e))}checkSubtype(e,i){const n=zu(e,i);return n&&this.error(n),n}}var yM=Z0;function tv(t){if(t instanceof vM)return tv(t.boundExpression);if(t instanceof cl&&t.name==="error"||t instanceof rp||t instanceof W0)return!1;const e=t instanceof fa||t instanceof Lr;let i=!0;return t.eachChild(n=>{i=e?i&&tv(n):i&&n instanceof wd}),!!i&&op(t)&&K0(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function _M(t,e){const i=t.length-1;let n,r,o=0,s=i,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),n=t[a],r=t[a+1],n<=e){if(a===i||e<r)return a;o=a+1}else{if(!(n>e))throw new Ci("Input is not a number.");s=a-1}return 0}class Q0{constructor(e,i,n){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(const[r,o]of n)this.labels.push(r),this.outputs.push(o)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");const n=i.parse(e[1],1,Ee);if(!n)return null;const r=[];let o=null;i.expectedType&&i.expectedType.kind!=="value"&&(o=i.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],l=e[s+1],u=s,c=s+1;if(typeof a!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const h=i.parse(l,c,o);if(!h)return null;o=o||h.type,r.push([a,h])}return new Q0(o,n,r)}evaluate(e){const i=this.labels,n=this.outputs;if(i.length===1)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=i[0])return n[0].evaluate(e);const o=i.length;return r>=i[o-1]?n[o-1].evaluate(e):n[_M(i,r)].evaluate(e)}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e}}var bM=Q0,Pq=ia;function ia(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}ia.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},ia.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},ia.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},ia.prototype.solveCurveX=function(t,e){var i,n,r,o,s;for(e===void 0&&(e=1e-6),r=t,s=0;s<8;s++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=o/a}if((r=t)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?i=r:n=r,r=.5*(n-i)+i}return r},ia.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Iq=hM(Pq);function on(t,e,i){return t*(1-i)+e*i}var Rq=Object.freeze({__proto__:null,number:on,color:function(t,e,i){return new cn(on(t.r,e.r,i),on(t.g,e.g,i),on(t.b,e.b,i),on(t.a,e.a,i))},array:function(t,e,i){return t.map((n,r)=>on(n,e[r],i))}});const xM=.95047,wM=1.08883,SM=4/29,Ta=6/29,CM=3*Ta*Ta,qq=Ta*Ta*Ta,Aq=Math.PI/180,Fq=180/Math.PI;function Nf(t){return t>qq?Math.pow(t,1/3):t/CM+SM}function Bf(t){return t>Ta?t*t*t:CM*(t-SM)}function jf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function MM(t){const e=Vf(t.r),i=Vf(t.g),n=Vf(t.b),r=Nf((.4124564*e+.3575761*i+.1804375*n)/xM),o=Nf((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-Nf((.0193339*e+.119192*i+.9503041*n)/wM)),alpha:t.a}}function kM(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Bf(e),i=xM*Bf(i),n=wM*Bf(n),new cn(jf(3.2404542*i-1.5371385*e-.4985314*n),jf(-.969266*i+1.8760108*e+.041556*n),jf(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function Oq(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const rh={forward:MM,reverse:kM,interpolate:function(t,e,i){return{l:on(t.l,e.l,i),a:on(t.a,e.a,i),b:on(t.b,e.b,i),alpha:on(t.alpha,e.alpha,i)}}},oh={forward:function(t){const{l:e,a:i,b:n}=MM(t),r=Math.atan2(n,i)*Fq;return{h:r<0?r+360:r,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Aq,i=t.c;return kM({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:Oq(t.h,e.h,i),c:on(t.c,e.c,i),l:on(t.l,e.l,i),alpha:on(t.alpha,e.alpha,i)}}};class Sd{constructor(e,i,n,r,o){this.type=e,this.operator=i,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,i,n,r){let o=0;if(e.name==="exponential")o=$f(i,e.base,n,r);else if(e.name==="linear")o=$f(i,1,n,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new Iq(s[0],s[1],s[2],s[3]).solve($f(i,1,n,r))}return o}static parse(e,i){let[n,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return i.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const u=r[1];if(typeof u!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:u}}else{if(r[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const u=r.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(o=i.parse(o,2,Ee),!o)return null;const a=[];let l=null;n==="interpolate-hcl"||n==="interpolate-lab"?l=qr:i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);for(let u=0;u<s.length;u+=2){const c=s[u],h=s[u+1],d=u+3,p=u+4;if(typeof c!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(a.length&&a[a.length-1][0]>=c)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const f=i.parse(h,p,l);if(!f)return null;l=l||f.type,a.push([c,f])}return l.kind==="number"||l.kind==="color"||l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number"?new Sd(l,n,r,o,a):i.error(`Type ${Qt(l)} is not interpolatable.`)}evaluate(e){const i=this.labels,n=this.outputs;if(i.length===1)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=i[0])return n[0].evaluate(e);const o=i.length;if(r>=i[o-1])return n[o-1].evaluate(e);const s=_M(i,r),a=i[s],l=i[s+1],u=Sd.interpolationFactor(this.interpolation,r,a,l),c=n[s].evaluate(e),h=n[s+1].evaluate(e);return this.operator==="interpolate"?Rq[this.type.kind.toLowerCase()](c,h,u):this.operator==="interpolate-hcl"?oh.reverse(oh.interpolate(oh.forward(c),oh.forward(h),u)):rh.reverse(rh.interpolate(rh.forward(c),rh.forward(h),u))}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)i.push(this.labels[n],this.outputs[n].serialize());return i}}function $f(t,e,i,n){const r=n-i,o=t-i;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}var ps=Sd;class J0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expectected at least one argument.");let n=null;const r=i.expectedType;r&&r.kind!=="value"&&(n=r);const o=[];for(const a of e.slice(1)){const l=i.parse(a,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,o.push(l)}const s=r&&o.some(a=>zu(r,a.type));return new J0(s?ot:n,o)}evaluate(e){let i,n=null,r=0;for(const o of this.args){if(r++,n=o.evaluate(e),n&&n instanceof Ro&&!n.available&&(i||(i=n),n=null,r===this.args.length))return i;if(n!==null)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var TM=J0;class ey{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return i.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return i.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=i.parse(e[o+1],o+1);if(!a)return null;n.push([s,a])}const r=i.parse(e[e.length-1],e.length-1,i.expectedType,n);return r?new ey(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[i,n]of this.bindings)e.push(i,n.serialize());return e.push(this.result.serialize()),e}}var EM=ey;class ty{constructor(e,i,n){this.type=e,this.index=i,this.input=n}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,Ee),r=i.parse(e[2],2,gn(i.expectedType||ot));if(!n||!r)return null;const o=r.type;return new ty(o.itemType,n,r)}evaluate(e){const i=this.index.evaluate(e),n=this.input.evaluate(e);if(i<0)throw new Ci(`Array index out of bounds: ${i} < 0.`);if(i>=n.length)throw new Ci(`Array index out of bounds: ${i} > ${n.length-1}.`);if(i!==Math.floor(i))throw new Ci(`Array index must be an integer, but found ${i} instead.`);return n[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var zq=ty;class iy{constructor(e,i){this.type=rt,this.needle=e,this.haystack=i}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,ot),r=i.parse(e[2],2,ot);return n&&r?B0(n.type,[rt,ut,Ee,Jd,ot])?new iy(n,r):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(n.type)} instead`):null}evaluate(e){const i=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!Du(i,["boolean","string","number","null"]))throw new Ci(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(_i(i))} instead.`);if(!Du(n,["string","array"]))throw new Ci(`Expected second argument to be of type array or string, but found ${Qt(_i(n))} instead.`);return n.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Dq=iy;class Cd{constructor(e,i,n){this.type=Ee,this.needle=e,this.haystack=i,this.fromIndex=n}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,ot),r=i.parse(e[2],2,ot);if(!n||!r)return null;if(!B0(n.type,[rt,ut,Ee,Jd,ot]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(n.type)} instead`);if(e.length===4){const o=i.parse(e[3],3,Ee);return o?new Cd(n,r,o):null}return new Cd(n,r)}evaluate(e){const i=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Du(i,["boolean","string","number","null"]))throw new Ci(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(_i(i))} instead.`);if(!Du(n,["string","array"]))throw new Ci(`Expected second argument to be of type array or string, but found ${Qt(_i(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(i,r)}return n.indexOf(i)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Nq=Cd;class ny{constructor(e,i,n,r,o,s){this.inputType=e,this.type=i,this.input=n,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,i){if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");let n,r;i.expectedType&&i.expectedType.kind!=="value"&&(r=i.expectedType);const o={},s=[];for(let u=2;u<e.length-1;u+=2){let c=e[u];const h=e[u+1];Array.isArray(c)||(c=[c]);const d=i.concat(u);if(c.length===0)return d.error("Expected at least one branch label.");for(const f of c){if(typeof f!="number"&&typeof f!="string")return d.error("Branch labels must be numbers or strings.");if(typeof f=="number"&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof f=="number"&&Math.floor(f)!==f)return d.error("Numeric branch labels must be integer values.");if(n){if(d.checkSubtype(n,_i(f)))return null}else n=_i(f);if(o[String(f)]!==void 0)return d.error("Branch labels must be unique.");o[String(f)]=s.length}const p=i.parse(h,u,r);if(!p)return null;r=r||p.type,s.push(p)}const a=i.parse(e[1],1,ot);if(!a)return null;const l=i.parse(e[e.length-1],e.length-1,r);return l?a.type.kind!=="value"&&i.concat(1).checkSubtype(n,a.type)?null:new ny(n,r,a,o,s,l):null}evaluate(e){const i=this.input.evaluate(e);return(_i(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),n=[],r={};for(const s of i){const a=r[this.cases[s]];a===void 0?(r[this.cases[s]]=n.length,n.push([this.cases[s],[s]])):n[a][1].push(s)}const o=s=>this.inputType.kind==="number"?Number(s):s;for(const[s,a]of n)a.length===1?e.push(o(a[0])):e.push(a.map(o)),e.push(this.outputs[s].serialize());return e.push(this.otherwise.serialize()),e}}var Bq=ny;class ry{constructor(e,i,n){this.type=e,this.branches=i,this.otherwise=n}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");let n;i.expectedType&&i.expectedType.kind!=="value"&&(n=i.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=i.parse(e[s],s,rt);if(!a)return null;const l=i.parse(e[s+1],s+1,n);if(!l)return null;r.push([a,l]),n=n||l.type}const o=i.parse(e[e.length-1],e.length-1,n);return o?new ry(n,r,o):null}evaluate(e){for(const[i,n]of this.branches)if(i.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[i,n]of this.branches)e(i),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var jq=ry;class Md{constructor(e,i,n,r){this.type=e,this.input=i,this.beginIndex=n,this.endIndex=r}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,ot),r=i.parse(e[2],2,Ee);if(!n||!r)return null;if(!B0(n.type,[gn(ot),ut,ot]))return i.error(`Expected first argument to be of type array or string, but found ${Qt(n.type)} instead`);if(e.length===4){const o=i.parse(e[3],3,Ee);return o?new Md(n.type,n,r,o):null}return new Md(n.type,n,r)}evaluate(e){const i=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Du(i,["string","array"]))throw new Ci(`Expected first argument to be of type array or string, but found ${Qt(_i(i))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return i.slice(n,r)}return i.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Vq=Md;function cx(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function LM(t,e,i,n){return n.compare(e,i)===0}function hl(t,e,i){const n=t!=="=="&&t!=="!=";return class PM{constructor(o,s,a){this.type=rt,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let l=s.parse(o[1],1,ot);if(!l)return null;if(!cx(a,l.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${Qt(l.type)}'.`);let u=s.parse(o[2],2,ot);if(!u)return null;if(!cx(a,u.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${Qt(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return s.error(`Cannot compare types '${Qt(l.type)}' and '${Qt(u.type)}'.`);n&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new Lr(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new Lr(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(c=s.parse(o[3],3,ep),!c)return null}return new PM(l,u,c)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){const l=_i(s),u=_i(a);if(l.kind!==u.kind||l.kind!=="string"&&l.kind!=="number")throw new Ci(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const l=_i(s),u=_i(a);if(l.kind!=="string"||u.kind!=="string")return e(o,s,a)}return this.collator?i(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}serialize(){const o=[t];return this.eachChild(s=>{o.push(s.serialize())}),o}}}const $q=hl("==",function(t,e,i){return e===i},LM),Gq=hl("!=",function(t,e,i){return e!==i},function(t,e,i,n){return!LM(0,e,i,n)}),Hq=hl("<",function(t,e,i){return e<i},function(t,e,i,n){return n.compare(e,i)<0}),Uq=hl(">",function(t,e,i){return e>i},function(t,e,i,n){return n.compare(e,i)>0}),Wq=hl("<=",function(t,e,i){return e<=i},function(t,e,i,n){return n.compare(e,i)<=0}),Yq=hl(">=",function(t,e,i){return e>=i},function(t,e,i,n){return n.compare(e,i)>=0});class oy{constructor(e,i,n,r,o,s){this.type=ut,this.number=e,this.locale=i,this.currency=n,this.unit=r,this.minFractionDigits=o,this.maxFractionDigits=s}static parse(e,i){if(e.length!==3)return i.error("Expected two arguments.");const n=i.parse(e[1],1,Ee);if(!n)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return i.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=i.parse(r.locale,1,ut),!o))return null;let s=null;if(r.currency&&(s=i.parse(r.currency,1,ut),!s))return null;let a=null;if(r.unit&&(a=i.parse(r.unit,1,ut),!a))return null;let l=null;if(r["min-fraction-digits"]&&(l=i.parse(r["min-fraction-digits"],1,Ee),!l))return null;let u=null;return r["max-fraction-digits"]&&(u=i.parse(r["max-fraction-digits"],1,Ee),!u)?null:new oy(n,o,s,a,l,u)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class sy{constructor(e){this.type=Ee,this.input=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=i.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${Qt(n.type)} instead.`):new sy(n):null}evaluate(e){const i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new Ci(`Expected value to be of type string or array, but found ${Qt(_i(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(i=>{e.push(i.serialize())}),e}}const IM={"==":$q,"!=":Gq,">":Uq,"<":Hq,">=":Yq,"<=":Wq,array:Lr,at:zq,boolean:Lr,case:jq,coalesce:TM,collator:rp,format:ip,image:np,in:Dq,"index-of":Nq,interpolate:ps,"interpolate-hcl":ps,"interpolate-lab":ps,length:sy,let:EM,literal:wd,match:Bq,number:Lr,"number-format":oy,object:Lr,slice:Vq,step:bM,string:Lr,"to-boolean":fa,"to-color":fa,"to-number":fa,"to-string":fa,var:vM,within:W0};function hx(t,[e,i,n,r]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const o=r?r.evaluate(t):1,s=pM(e,i,n,o);if(s)throw new Ci(s);return new cn(e/255*o,i/255*o,n/255*o,o)}function dx(t,e){return t in e}function Gf(t,e){const i=e[t];return i===void 0?null:i}function jo(t){return{type:t}}cl.register(IM,{error:[{kind:"error"},[ut],(t,[e])=>{throw new Ci(e.evaluate(t))}],typeof:[ut,[ot],(t,[e])=>Qt(_i(e.evaluate(t)))],"to-rgba":[gn(Ee,4),[qr],(t,[e])=>e.evaluate(t).toArray()],rgb:[qr,[Ee,Ee,Ee],hx],rgba:[qr,[Ee,Ee,Ee,Ee],hx],has:{type:rt,overloads:[[[ut],(t,[e])=>dx(e.evaluate(t),t.properties())],[[ut,ka],(t,[e,i])=>dx(e.evaluate(t),i.evaluate(t))]]},get:{type:ot,overloads:[[[ut],(t,[e])=>Gf(e.evaluate(t),t.properties())],[[ut,ka],(t,[e,i])=>Gf(e.evaluate(t),i.evaluate(t))]]},"feature-state":[ot,[ut],(t,[e])=>Gf(e.evaluate(t),t.featureState||{})],properties:[ka,[],t=>t.properties()],"geometry-type":[ut,[],t=>t.geometryType()],id:[ot,[],t=>t.id()],zoom:[Ee,[],t=>t.globals.zoom],pitch:[Ee,[],t=>t.globals.pitch||0],"distance-from-center":[Ee,[],t=>t.distanceFromCenter()],"heatmap-density":[Ee,[],t=>t.globals.heatmapDensity||0],"line-progress":[Ee,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Ee,[],t=>t.globals.skyRadialProgress||0],accumulated:[ot,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[Ee,jo(Ee),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[Ee,jo(Ee),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:Ee,overloads:[[[Ee,Ee],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[Ee],(t,[e])=>-e.evaluate(t)]]},"/":[Ee,[Ee,Ee],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[Ee,[Ee,Ee],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[Ee,[],()=>Math.LN2],pi:[Ee,[],()=>Math.PI],e:[Ee,[],()=>Math.E],"^":[Ee,[Ee,Ee],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[Ee,[Ee],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ee,[Ee],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ee,[Ee],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ee,[Ee],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ee,[Ee],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ee,[Ee],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ee,[Ee],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ee,jo(Ee),(t,e)=>Math.min(...e.map(i=>i.evaluate(t)))],max:[Ee,jo(Ee),(t,e)=>Math.max(...e.map(i=>i.evaluate(t)))],abs:[Ee,[Ee],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ee,[Ee],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ee,[Ee],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ee,[Ee],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[rt,[ut,ot],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[rt,[ot],(t,[e])=>t.id()===e.value],"filter-type-==":[rt,[ut],(t,[e])=>t.geometryType()===e.value],"filter-<":[rt,[ut,ot],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<r}],"filter-id-<":[rt,[ot],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[rt,[ut,ot],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>r}],"filter-id->":[rt,[ot],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[rt,[ut,ot],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[rt,[ot],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[rt,[ut,ot],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[rt,[ot],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[rt,[ot],(t,[e])=>e.value in t.properties()],"filter-has-id":[rt,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[rt,[gn(ut)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[rt,[gn(ot)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[rt,[ut,gn(ot)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[rt,[ut,gn(ot)],(t,[e,i])=>function(n,r,o,s){for(;o<=s;){const a=o+s>>1;if(r[a]===n)return!0;r[a]>n?s=a-1:o=a+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:rt,overloads:[[[rt,rt],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[jo(rt),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:rt,overloads:[[[rt,rt],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[jo(rt),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[rt,[rt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[rt,[ut],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[ut,[ut],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ut,[ut],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ut,jo(ot),(t,e)=>e.map(i=>au(i.evaluate(t))).join("")],"resolved-locale":[ut,[ep],(t,[e])=>e.evaluate(t).resolvedLocale()]});var RM=IM;function iv(t){return{result:"success",value:t}}function na(t){return{result:"error",value:t}}function qM(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}class Kq{constructor(e,i){this.expression=e,this._warningHistory={},this._evaluator=new fM,this._defaultValue=i?function(n){return n.type==="color"&&(qM(n.default)||Array.isArray(n.default))?new cn(0,0,0,0):n.type==="color"?cn.parse(n.default)||null:n.default===void 0?null:n.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(e,i,n,r,o,s,a,l){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(e,i,n,r,o,s,a,l){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Ci(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"),this._defaultValue}}}function nv(t,e){const i=new yM(RM,[],e?function(r){const o={color:qr,string:ut,number:Ee,enum:ut,boolean:rt,formatted:tp,resolvedImage:nc};return r.type==="array"?gn(o[r.value]||ot,r.length):o[r.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?iv(new Kq(n,e)):na(i.errors)}class Xq{constructor(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!Y0(i.expression)}evaluateWithoutErrorHandling(e,i,n,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,i,n,r,o,s)}evaluate(e,i,n,r,o,s){return this._styleExpression.evaluate(e,i,n,r,o,s)}}class Zq{constructor(e,i,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!Y0(i.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,i,n,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,i,n,r,o,s)}evaluate(e,i,n,r,o,s){return this._styleExpression.evaluate(e,i,n,r,o,s)}interpolationFactor(e,i,n){return this.interpolationType?ps.interpolationFactor(this.interpolationType,e,i,n):0}}function Qq(t,e){if((t=nv(t,e)).result==="error")return t;const i=t.value.expression,n=op(i);if(!n&&!function(a){return a["property-type"]==="data-driven"}(e))return na([new Jn("","data expressions not supported")]);const r=K0(i,["zoom","pitch","distance-from-center"]);if(!r&&!function(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}(e))return na([new Jn("","zoom expressions not supported")]);const o=Ch(i);if(!o&&!r)return na([new Jn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Jn)return na([o]);if(o instanceof ps&&!function(a){return!!a.expression&&a.expression.interpolated}(e))return na([new Jn("",'"interpolate" expressions cannot be used with this property')]);if(!o)return iv(new Xq(n?"constant":"source",t.value));const s=o instanceof ps?o.interpolation:void 0;return iv(new Zq(n?"camera":"composite",t.value,o.labels,s))}function Ch(t){let e=null;if(t instanceof EM)e=Ch(t.result);else if(t instanceof TM){for(const i of t.args)if(e=Ch(i),e)break}else(t instanceof bM||t instanceof ps)&&t.input instanceof cl&&t.input.name==="zoom"&&(e=t);return e instanceof Jn||t.eachChild(i=>{const n=Ch(i);n instanceof Jn?e=n:!e&&n?e=new Jn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new Jn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function rv(t){if(Array.isArray(t))return t.map(rv);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=rv(t[i]);return e}return function(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}(t)}var AM={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function FM(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!FM(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Jq(t,e="fill"){if(t==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};FM(t)||(t=Mh(t));const i=t;let n=!0;try{n=function(u){if(!Ea(u))return u;let c=rv(u);return zM(c),c=OM(c),c}(i)}catch{}const r=AM[`filter_${e}`],o=nv(n,r);let s=null;if(o.result==="error")throw new Error(o.value.map(u=>`${u.key}: ${u.message}`).join(", "));s=(u,c,h)=>o.value.evaluate(u,c,{},h);let a=null,l=null;if(n!==i){const u=nv(i,r);if(u.result==="error")throw new Error(u.value.map(c=>`${c.key}: ${c.message}`).join(", "));a=(c,h,d,p,f)=>u.value.evaluate(c,h,{},d,void 0,void 0,p,f),l=!op(u.value.expression)}return{filter:s,dynamicFilter:a||void 0,needGeometry:DM(n),needFeature:!!l}}function OM(t){if(!Array.isArray(t))return t;const e=function(i){if(e4.has(i[0])){for(let n=1;n<i.length;n++)if(Ea(i[n]))return!0}return i}(t);return e===!0?e:e.map(i=>OM(i))}function zM(t){let e=!1;const i=[];if(t[0]==="case"){for(let n=1;n<t.length-1;n+=2)e=e||Ea(t[n]),i.push(t[n+1]);i.push(t[t.length-1])}else if(t[0]==="match"){e=e||Ea(t[1]);for(let n=2;n<t.length-1;n+=2)i.push(t[n+1]);i.push(t[t.length-1])}else if(t[0]==="step"){e=e||Ea(t[1]);for(let n=1;n<t.length-1;n+=2)i.push(t[n+1])}e&&(t.length=0,t.push("any",...i));for(let n=1;n<t.length;n++)zM(t[n])}function Ea(t){if(!Array.isArray(t))return!1;if((e=t[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let i=1;i<t.length;i++)if(Ea(t[i]))return!0;return!1}const e4=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function t4(t,e){return t<e?-1:t>e?1:0}function DM(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(let e=1;e<t.length;e++)if(DM(t[e]))return!0;return!1}function Mh(t){if(!t)return!0;const e=t[0];if(t.length<=1)return e!=="any";var i;return e==="=="?Hf(t[1],t[2],"=="):e==="!="?sh(Hf(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Hf(t[1],t[2],e):e==="any"?(i=t.slice(1),["any"].concat(i.map(Mh))):e==="all"?["all"].concat(t.slice(1).map(Mh)):e==="none"?["all"].concat(t.slice(1).map(Mh).map(sh)):e==="in"?px(t[1],t.slice(2)):e==="!in"?sh(px(t[1],t.slice(2))):e==="has"?fx(t[1]):e==="!has"?sh(fx(t[1])):e!=="within"||t}function Hf(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function px(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(i=>typeof i!=typeof e[0])?["filter-in-large",t,["literal",e.sort(t4)]]:["filter-in-small",t,["literal",e]]}}function fx(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function sh(t){return["!",t]}var i4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function n4(t,e){const i={};for(const n in t)n!=="ref"&&(i[n]=t[n]);return i4.forEach(n=>{n in e&&(i[n]=e[n])}),i}function NM(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=n4(t[i],e[t[i].ref]));return t}var gx={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},ql=" ",mx=/(italic|oblique)$/i,vx={},r4=function(t,e,i){var n=vx[t];if(!n){Array.isArray(t)||(t=[t]);for(var r,o,s=400,a="normal",l=[],u=0,c=t.length;u<c;++u){var h=t[u].split(" "),d=h[h.length-1].toLowerCase();for(var p in d=="normal"||d=="italic"||d=="oblique"?(a=o?a:d,o=!0,h.pop(),d=h[h.length-1].toLowerCase()):mx.test(d)&&(d=d.replace(mx,""),a=o?a:h[h.length-1].replace(d,""),o=!0),gx){var f=h.length>1?h[h.length-2].toLowerCase():"";if(d==p||d==p.replace("-","")||f+"-"+d==p){s=r?s:gx[p],h.pop(),f&&p.startsWith(f)&&h.pop();break}}r||typeof d!="number"||(s=d,r=!0);var g=h.join(ql).replace("Klokantech Noto Sans","Noto Sans");g.indexOf(ql)!==-1&&(g='"'+g+'"'),l.push(g)}n=vx[t]=[a,s,l]}return n[0]+ql+n[1]+ql+e+"px"+(i?"/"+i:"")+ql+n[2]},ov=hM(r4);const BM="https://api.mapbox.com";function ay(t){return t.indexOf("mapbox://")!==0?"":t.slice(9)}function kd(t,e){const i=ay(t);if(!i)return decodeURI(new URL(t,location.href).href);if(i.indexOf("styles/")!==0)throw new Error(`unexpected style url: ${t}`);const n=i.slice(7);return`${BM}/styles/v1/${n}?&access_token=${e}`}function kh(t,e,i,n){const r=new URL(t,n),o=ay(t);return o?o==="mapbox.satellite"?`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${window.devicePixelRatio>=1.5?"@2x":""}.webp?access_token=${e}`:`https://{a-d}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`:(e&&(r.searchParams.has(i)||r.searchParams.set(i,e)),decodeURI(r.href))}const yx={},_x={};let o4=0;function ly(t){return t.id||(t.id=o4++),t.id}function s4(t,e){return ly(t)+"."+Qe(e)}function jM(t){let e=yx[t.id];return e||(e={},yx[ly(t)]=e),e}function a4(t){let e=_x[t.id];return e||(e={},_x[ly(t)]=e),e}function Uf(t){return t*Math.PI/180}const hr=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function sp(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);const i=document.createElement("canvas");return i.width=t,i.height=e,i}function uy(t,e){let i=0;const n=e.length;for(;i<n;++i)if(e[i]<t&&i+1<n){const r=e[i]/e[i+1];return i+Math.log(e[i]/t)/Math.log(r)}return n-1}function Ul(t,e){const i=Math.floor(t),n=Math.pow(2,t-i);return e[i]/n}const Xs={};function Ha(t,e,i={},n){if(e in Xs)return n&&(n.request=Xs[e][0]),Xs[e][1];const r=i.transformRequest&&i.transformRequest(e,t)||e,o=fs(()=>r).then(s=>(s instanceof Request||(s=new Request(s)),s.headers.get("Accept")||s.headers.set("Accept","application/json"),n&&(n.request=s),fetch(s).then(function(a){return delete Xs[e],a.ok?a.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(a){return delete Xs[e],Promise.reject(new Error("Error fetching source "+e))})));return Xs[e]=[r,o],o}function VM(t,e){if(typeof t!="string")return Promise.resolve(t);if(!t.trim().startsWith("{"))return Ha("Style",t=kd(t,e.accessToken),e);try{const i=JSON.parse(t);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}const bx={};function $M(t,e,i={}){const n=[e,JSON.stringify(t)].toString();let r=bx[n];if(!r||i.transformRequest){let o;i.transformRequest&&(o=(a,l)=>{const u=i.transformRequest&&i.transformRequest(l,"Tiles")||l;if(a instanceof rk)a.setLoader((c,h,d)=>{fs(()=>u).then(p=>{fetch(p).then(f=>f.arrayBuffer()).then(f=>{const g=a.getFormat().readFeatures(f,{extent:c,featureProjection:d});a.setFeatures(g)}).catch(f=>a.setState(Zt))})});else{const c=a.getImage();fs(()=>u).then(h=>{h instanceof Request?fetch(h).then(d=>d.blob()).then(d=>{const p=URL.createObjectURL(d);c.addEventListener("load",()=>URL.revokeObjectURL(p)),c.addEventListener("error",()=>URL.revokeObjectURL(p)),c.src=p}).catch(d=>a.setState(Zt)):c.src=h})}});const s=t.url;if(s&&!t.tiles){const a=kh(s,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:Fd(a)}),tileLoadFunction:o});else{const l={};r=Ha("Source",a,i,l).then(function(u){return u.tiles=u.tiles.map(function(c){return u.scheme==="tms"&&(c=c.replace("{y}","{-y}")),kh(c,i.accessToken,i.accessTokenParam||"access_token",l.request.url)}),Promise.resolve({tileJson:u,tileLoadFunction:o})})}}else t=Object.assign({},t,{tiles:t.tiles.map(function(a){return t.scheme==="tms"&&(a=a.replace("{y}","{-y}")),kh(a,i.accessToken,i.accessTokenParam||"access_token",e||location.href)})}),r=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:o});bx[n]=r}return r}function xx(t,e,i,n){const r=[2*i*e.pixelRatio+e.width,2*i*e.pixelRatio+e.height],o=sp(r[0],r[1]),s=o.getContext("2d");s.drawImage(t,e.x,e.y,e.width,e.height,i*e.pixelRatio,i*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${255*n.r},${255*n.g},${255*n.b},${n.a})`;const l=a.data;for(let u=0,c=a.width;u<c;++u)for(let h=0,d=a.height;h<d;++h)l[4*(h*c+u)+3]>0&&s.arc(u,h,i*e.pixelRatio,0,2*Math.PI);return s.fill(),o}function l4(t,e,i){const n=Math.max(0,Math.min(1,(i-t)/(e-t)));return n*n*(3-2*n)}function wx(t,e,i){const n=sp(e.width,e.height),r=n.getContext("2d");r.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,l=o.width;a<l;++a)for(let u=0,c=o.height;u<c;++u){const h=4*(u*l+a),d=.75,p=.1,f=l4(d-p,d+p,s[h+3]/255);f>0?(s[h+0]=Math.round(255*i.r*f),s[h+1]=Math.round(255*i.g*f),s[h+2]=Math.round(255*i.b*f),s[h+3]=Math.round(255*f)):s[h+3]=0}return r.putImageData(o,0,0),n}const u4=Array(256).join(" ");function sv(t,e){if(e>=.05){let i="";const n=t.split(`
`),r=u4.slice(0,Math.round(e/.1));for(let o=0,s=n.length;o<s;++o)o>0&&(i+=`
`),i+=n[o].split("").join(r);return i}return t}let Wf;function GM(){return Wf||(Wf=sp(1,1).getContext("2d")),Wf}function Vo(t,e){return GM().measureText(t).width+(t.length-1)*e}const Sx={};function av(t,e,i,n){if(t.indexOf(`
`)!==-1){const s=t.split(`
`),a=[];for(let l=0,u=s.length;l<u;++l)a.push(av(s[l],e,i,n));return a.join(`
`)}const r=i+","+e+","+t+","+n;let o=Sx[r];if(!o){const s=t.split(" ");if(s.length>1){const a=GM();a.font=e;const l=a.measureText("M").width*i;let u="";const c=[];for(let h=0,d=s.length;h<d;++h){const p=s[h],f=u+(u?" ":"")+p;Vo(f,n)<=l?u=f:(u&&c.push(u),u=p)}u&&c.push(u);for(let h=0,d=c.length;h<d&&d>1;++h){const p=c[h];if(Vo(p,n)<.35*l){const f=h>0?Vo(c[h-1],n):1/0,g=h<d-1?Vo(c[h+1],n):1/0;c.splice(h,1),d-=1,f<g?(c[h-1]+=" "+p,h-=1):c[h]=p+" "+c[h]}}for(let h=0,d=c.length-1;h<d;++h){const p=c[h],f=c[h+1];if(Vo(p,n)>.7*l&&Vo(f,n)<.6*l){const g=p.split(" "),_=g.pop();Vo(_,n)<.2*l&&(c[h]=g.join(" "),c[h+1]=_+" "+f),d-=1}}o=c.join(`
`)}else o=t;o=sv(o,n),Sx[r]=o}return o}const c4=/font-family: ?([^;]*);/,h4=/("|')/g;let ah;function d4(t){if(!ah){ah={};const e=document.styleSheets;for(let i=0,n=e.length;i<n;++i){const r=e[i];try{const o=r.rules||r.cssRules;if(o)for(let s=0,a=o.length;s<a;++s){const l=o[s];if(l.type==5){const u=l.cssText.match(c4);ah[u[1].replace(h4,"")]=!0}}}catch{}}}return t in ah}const Yf={},p4={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},f4={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},lv={},Td={zoom:0};let lh,Kf;function Ve(t,e,i,n,r,o,s){const a=t.id;o||(o={}),o[a]||(o[a]={});const l=o[a];if(!l[i]){let c=(t[e]||lv)[i];const h=AM[`${e}_${t.type}`][i];c===void 0&&(c=h.default);let d=(u=c,Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in RM);if(!d&&qM(c)&&(c=mq(c,h),d=!0),d){const p=function(f,g){const _=Qq(f,g);if(_.result==="error")throw new Error(_.value.map(v=>`${v.key}: ${v.message}`).join(", "));return _.value}(c,h);l[i]=p.evaluate.bind(p)}else h.type=="color"&&(c=cn.parse(c)),l[i]=function(){return c}}var u;return Td.zoom=n,l[i](Td,r,s)}function Cx(t,e,i,n,r){return Ve(t,"layout",`${n}-allow-overlap`,e,i,r)?Ve(t,"layout",`${n}-ignore-placement`,e,i,r)?"none":"obstacle":"declutter"}function g4(t,e,i,n,r){return t in r||(r[t]=Jq(e).filter),Td.zoom=n,r[t](Td,i)}function Xr(t,e){if(t){if(t.a===0||e===0)return;const i=t.a;return e=e===void 0?1:e,i===0?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*e+")"}return t}const m4=/\{[^{}}]*\}/g;function Xf(t,e){return t.replace(m4,function(i){return e[i.slice(1,-1)]||""})}const v4={};function y4(t,e,i,n=hr,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");let l,u,c;if(v4[s4(e,t)]=Array.from(arguments),o){if(typeof Image<"u"){const k=new Image;let P;fs(()=>o).then(A=>{A instanceof Request?fetch(A).then(E=>E.blob()).then(E=>{P=URL.createObjectURL(E),k.src=P}).catch(()=>{}):(k.crossOrigin="anonymous",k.src=A,P&&URL.revokeObjectURL(P))}),k.onload=function(){l=k,u=[k.width,k.height],t.changed(),k.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const k=self;k.postMessage({action:"loadImage",src:o}),k.addEventListener("message",function(P){P.data.action==="imageLoaded"&&P.data.src===o&&(l=P.data.image,u=[l.width,l.height])})}}const h=NM(e.layers),d={},p=[],f={},g={},_=jM(e),v=a4(e);let b;for(let k=0,P=h.length;k<P;++k){const A=h[k],E=A.id;if(typeof i=="string"&&A.source==i||Array.isArray(i)&&i.indexOf(E)!==-1){const L=A["source-layer"];if(b){if(A.source!==b)throw new Error(`Layer "${E}" does not use source "${b}`)}else{b=A.source;const I=e.sources[b];if(!I)throw new Error(`Source "${b}" is not defined`);const M=I.type;if(M!=="vector"&&M!=="geojson")throw new Error(`Source "${b}" is not of type "vector" or "geojson", but "${M}"`)}let T=d[L];T||(T=[],d[L]=T),T.push({layer:A,index:k}),p.push(E)}}const m=new Vt,y=new ri,x=[],C=function(k,P,A){const E=k.getProperties(),L=d[E.layer];if(!L)return;let T=n.indexOf(P);T==-1&&(T=uy(P,n));const I=p4[k.getGeometry().getType()],M={id:k.getId(),properties:E,type:I},R=t.get("mapbox-featurestate")[k.getId()];let q=-1;for(let F=0,B=L.length;F<B;++F){const V=L[F],O=V.layer,$=O.id;if(A!==void 0&&A!==$)continue;const J=O.layout||lv,te=O.paint||lv;if(J.visibility==="none"||"minzoom"in O&&T<O.minzoom||"maxzoom"in O&&T>=O.maxzoom)continue;const ie=O.filter;if(!ie||g4($,ie,M,T,v)){let j,z,N,K,U,W;const ve=V.index;if(I==3&&(O.type=="fill"||O.type=="fill-extrusion"))if(z=Ve(O,"paint",O.type+"-opacity",T,M,_,R),O.type+"-pattern"in te){const ae=Ve(O,"paint",O.type+"-pattern",T,M,_,R);if(ae){const Ce=typeof ae=="string"?Xf(ae,E):ae.toString();if(l&&r&&r[Ce]){++q,W=x[q],W&&W.getFill()&&!W.getStroke()&&!W.getText()||(W=new Pt({fill:new ri}),x[q]=W),N=W.getFill(),W.setZIndex(ve);const Ie=Ce+"."+z;let Fe=g[Ie];if(!Fe){const X=r[Ce],re=sp(X.width,X.height),ge=re.getContext("2d");ge.globalAlpha=z,ge.drawImage(l,X.x,X.y,X.width,X.height,0,0,X.width,X.height),Fe=ge.createPattern(re,"repeat"),g[Ie]=Fe}N.setColor(Fe)}}}else j=Xr(Ve(O,"paint",O.type+"-color",T,M,_,R),z),O.type+"-outline-color"in te&&(U=Xr(Ve(O,"paint",O.type+"-outline-color",T,M,_,R),z)),U||(U=j),(j||U)&&(++q,W=x[q],(!W||j&&!W.getFill()||!j&&W.getFill()||U&&!W.getStroke()||!U&&W.getStroke()||W.getText())&&(W=new Pt({fill:j?new ri:void 0,stroke:U?new Vt:void 0}),x[q]=W),j&&(N=W.getFill(),N.setColor(j)),U&&(K=W.getStroke(),K.setColor(U),K.setWidth(.5)),W.setZIndex(ve));if(I!=1&&O.type=="line"){j="line-pattern"in te?void 0:Xr(Ve(O,"paint","line-color",T,M,_,R),Ve(O,"paint","line-opacity",T,M,_,R));const ae=Ve(O,"paint","line-width",T,M,_,R);j&&ae>0&&(++q,W=x[q],W&&W.getStroke()&&!W.getFill()&&!W.getText()||(W=new Pt({stroke:new Vt}),x[q]=W),K=W.getStroke(),K.setLineCap(Ve(O,"layout","line-cap",T,M,_,R)),K.setLineJoin(Ve(O,"layout","line-join",T,M,_,R)),K.setMiterLimit(Ve(O,"layout","line-miter-limit",T,M,_,R)),K.setColor(j),K.setWidth(ae),K.setLineDash(te["line-dasharray"]?Ve(O,"paint","line-dasharray",T,M,_,R).map(function(Ce){return Ce*ae}):null),W.setZIndex(ve))}let ce,fe,pe,Le,Pe,me,Se,Re,Ge,oe=!1,he=null,Z=0;if((I==1||I==2)&&"icon-image"in J){const ae=Ve(O,"layout","icon-image",T,M,_,R);if(ae){let Ce;ce=typeof ae=="string"?Xf(ae,E):ae.toString();const Ie=a?a(t,ce):void 0;if(l&&r&&r[ce]||Ie){const Fe=Ve(O,"layout","icon-rotation-alignment",T,M,_,R);if(I==2){const X=k.getGeometry();if(X.getFlatMidpoint||X.getFlatMidpoints){const re=X.getExtent();if(Math.sqrt(Math.max(Math.pow((re[2]-re[0])/P,2),Math.pow((re[3]-re[1])/P,2)))>150){const ge=X.getType()==="MultiLineString"?X.getFlatMidpoints():X.getFlatMidpoint();if(Kf||(lh=[NaN,NaN],Kf=new ki("Point",lh,[],2,{},void 0)),Ce=Kf,lh[0]=ge[0],lh[1]=ge[1],Ve(O,"layout","symbol-placement",T,M,_,R)==="line"&&Fe==="map"){const qe=X.getStride(),He=X.getFlatCoordinates();for(let tt=0,Ae=He.length-qe;tt<Ae;tt+=qe){const Ze=He[tt],We=He[tt+1],ee=He[tt+qe],ke=He[tt+qe+1],xe=Math.min(Ze,ee),ye=Math.min(We,ke),we=Math.max(Ze,ee),D=Math.max(We,ke);if(ge[0]>=xe&&ge[0]<=we&&ge[1]>=ye&&ge[1]<=D){Z=Math.atan2(We-ke,ee-Ze);break}}}}}}if(I!==2||Ce){const X=Ve(O,"layout","icon-size",T,M,_,R),re=te["icon-color"]!==void 0?Ve(O,"paint","icon-color",T,M,_,R):null;if(!re||re.a!==0){const ge=Ve(O,"paint","icon-halo-color",T,M,_,R),qe=Ve(O,"paint","icon-halo-width",T,M,_,R);let He=`${ce}.${X}.${qe}.${ge}`;if(re!==null&&(He+=`.${re}`),fe=f[He],!fe){const tt=Cx(O,T,M,"icon",_);let Ae;"icon-offset"in J&&(Ae=Ve(O,"layout","icon-offset",T,M,_,R).slice(0),Ae[0]*=X,Ae[1]*=-X);let Ze=re?[255*re.r,255*re.g,255*re.b,re.a]:void 0;if(Ie){const We={color:Ze,rotateWithView:Fe==="map",displacement:Ae,declutterMode:tt,scale:X};typeof Ie=="string"?We.src=Ie:(We.img=Ie,We.imgSize=[Ie.width,Ie.height]),fe=new Da(We)}else{const We=r[ce];let ee,ke,xe;qe?We.sdf?(ee=xx(wx(l,We,re||[0,0,0,1]),{x:0,y:0,width:We.width,height:We.height,pixelRatio:We.pixelRatio},qe,ge),Ze=void 0):ee=xx(l,We,qe,ge):(We.sdf?(c||(c=wx(l,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1,a:1})),ee=c):ee=l,ke=[We.width,We.height],xe=[We.x,We.y]),fe=new Da({color:Ze,img:ee,imgSize:u,size:ke,offset:xe,rotateWithView:Fe==="map",scale:X/We.pixelRatio,displacement:Ae,declutterMode:tt})}f[He]=fe}}fe&&(++q,W=x[q],W&&W.getImage()&&!W.getFill()&&!W.getStroke()||(W=new Pt,x[q]=W),W.setGeometry(Ce),fe.setRotation(Z+Uf(Ve(O,"layout","icon-rotate",T,M,_,R))),fe.setOpacity(Ve(O,"paint","icon-opacity",T,M,_,R)),fe.setAnchor(f4[Ve(O,"layout","icon-anchor",T,M,_,R)]),W.setImage(fe),he=W.getText(),W.setText(void 0),W.setZIndex(ve),oe=!0,pe=!1)}else pe=!0}}}if(I==1&&O.type==="circle"){++q,W=x[q],W&&W.getImage()&&!W.getFill()&&!W.getStroke()||(W=new Pt,x[q]=W);const ae="circle-radius"in te?Ve(O,"paint","circle-radius",T,M,_,R):5,Ce=Xr(Ve(O,"paint","circle-stroke-color",T,M,_,R),Ve(O,"paint","circle-stroke-opacity",T,M,_,R)),Ie=Ve(O,"paint","circle-translate",T,M,_,R),Fe=Xr(Ve(O,"paint","circle-color",T,M,_,R),Ve(O,"paint","circle-opacity",T,M,_,R)),X=Ve(O,"paint","circle-stroke-width",T,M,_,R),re=ae+"."+Ce+"."+Fe+"."+X+"."+Ie[0]+"."+Ie[1];fe=f[re],fe||(fe=new Hn({radius:ae,displacement:[Ie[0],-Ie[1]],stroke:Ce&&X>0?new Vt({width:X,color:Ce}):void 0,fill:Fe?new ri({color:Fe}):void 0,declutterMode:"none"}),f[re]=fe),W.setImage(fe),he=W.getText(),W.setText(void 0),W.setGeometry(void 0),W.setZIndex(ve),oe=!0}if("text-field"in J){Se=Math.round(Ve(O,"layout","text-size",T,M,_,R));const ae=Ve(O,"layout","text-font",T,M,_,R);me=Ve(O,"layout","text-line-height",T,M,_,R),Pe=ov(s?s(ae,e.metadata?e.metadata["ol:webfonts"]:void 0):ae,Se,me),Pe.includes("sans-serif")||(Pe+=",sans-serif"),Re=Ve(O,"layout","text-letter-spacing",T,M,_,R),Ge=Ve(O,"layout","text-max-width",T,M,_,R);const Ce=Ve(O,"layout","text-field",T,M,_,R);Le=typeof Ce=="object"&&Ce.sections?Ce.sections.length===1?Ce.toString():Ce.sections.reduce((Ie,Fe,X)=>{const re=Fe.fontStack?Fe.fontStack.split(","):ae,ge=ov(s?s(re):re,Se*(Fe.scale||1),me);let qe=Fe.text;if(qe===`
`)return Ie.push(`
`,""),Ie;if(I!=2){qe=av(qe,ge,Ge,Re).split(`
`);for(let He=0,tt=qe.length;He<tt;++He)He>0&&Ie.push(`
`,""),Ie.push(qe[He],ge);return Ie}Ie.push(sv(qe,Re),ge)},[]):Xf(Ce,E).trim(),z=Ve(O,"paint","text-opacity",T,M,_,R)}if(Le&&z&&!pe){oe||(++q,W=x[q],W&&W.getText()&&!W.getFill()&&!W.getStroke()||(W=new Pt,x[q]=W),W.setImage(void 0),W.setGeometry(void 0));const ae=Cx(O,T,M,"text",_);W.getText()||W.setText(he),he=W.getText(),(!he||"getDeclutterMode"in he&&he.getDeclutterMode()!==ae)&&(he=new as({padding:[2,2,2,2],declutterMode:ae}),W.setText(he));const Ce=Ve(O,"layout","text-transform",T,M,_,R);Ce=="uppercase"?Le=Array.isArray(Le)?Le.map((ye,we)=>we%2?ye:ye.toUpperCase()):Le.toUpperCase():Ce=="lowercase"&&(Le=Array.isArray(Le)?Le.map((ye,we)=>we%2?ye:ye.toLowerCase()):Le.toLowerCase());const Ie=Array.isArray(Le)?Le:I==2?sv(Le,Re):av(Le,Pe,Ge,Re);he.setText(Ie),he.setFont(Pe),he.setRotation(Uf(Ve(O,"layout","text-rotate",T,M,_,R)));const Fe=Ve(O,"layout","text-anchor",T,M,_,R),X=oe||I==1?"point":Ve(O,"layout","symbol-placement",T,M,_,R);let re;if(X==="line-center"?(he.setPlacement("line"),re="center"):he.setPlacement(X),X==="line"&&typeof he.setRepeat=="function"){const ye=Ve(O,"layout","symbol-spacing",T,M,_,R);he.setRepeat(2*ye)}he.setOverflow(X==="point");let ge=Ve(O,"paint","text-halo-width",T,M,_,R);const qe=Ve(O,"layout","text-offset",T,M,_,R),He=Ve(O,"paint","text-translate",T,M,_,R);let tt=0,Ae=0;if(X=="point"){re="center",Fe.indexOf("left")!==-1?(re="left",Ae=ge):Fe.indexOf("right")!==-1&&(re="right",Ae=-ge);const ye=Ve(O,"layout","text-rotation-alignment",T,M,_,R);he.setRotateWithView(ye=="map")}else he.setMaxAngle(Uf(Ve(O,"layout","text-max-angle",T,M,_,R))*Le.length/Ie.length),he.setRotateWithView(!1);he.setTextAlign(re);let Ze="middle";Fe.indexOf("bottom")==0?(Ze="bottom",tt=-ge-.5*(me-1)*Se):Fe.indexOf("top")==0&&(Ze="top",tt=ge+.5*(me-1)*Se),he.setTextBaseline(Ze);const We=Ve(O,"layout","text-justify",T,M,_,R);he.setJustify(We==="auto"?void 0:We),he.setOffsetX(qe[0]*Se+Ae+He[0]),he.setOffsetY(qe[1]*Se+tt+He[1]),y.setColor(Xr(Ve(O,"paint","text-color",T,M,_,R),z)),he.setFill(y);const ee=Xr(Ve(O,"paint","text-halo-color",T,M,_,R),z);if(ee&&ge>0){m.setColor(ee),ge*=2;const ye=.5*Se;m.setWidth(ge<=ye?ge:ye),he.setStroke(m)}else he.setStroke(void 0);const ke=Ve(O,"layout","text-padding",T,M,_,R),xe=he.getPadding();ke!==xe[0]&&(xe[0]=ke,xe[1]=ke,xe[2]=ke,xe[3]=ke),W.setZIndex(ve)}}}return q>-1?(x.length=q+1,x):void 0};return t.setStyle(C),t.set("mapbox-source",b),t.set("mapbox-layers",p),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),C}function _4(t,e){const i=t[0],n=i.width,r=i.height,o=i.data,s=new Uint8ClampedArray(o.length),a=2*e.resolution,l=n-1,u=r-1,c=[0,0,0,0],h=2*Math.PI,d=Math.PI/2,p=Math.PI*e.sunEl/180,f=Math.PI*e.sunAz/180,g=Math.cos(p),_=Math.sin(p),v=e.highlightColor,b=e.shadowColor,m=e.accentColor,y=e.encoding;let x,C,k,P,A,E,L,T,I,M,R,q,F,B,V,O,$,J,te,ie,j,z;function N(K,U="mapbox"){return U==="mapbox"?.1*(256*K[0]*256+256*K[1]+K[2])-1e4:U==="terrarium"?256*K[0]+K[1]+K[2]/256-32768:void 0}for(C=0;C<=u;++C)for(A=C===0?0:C-1,E=C===u?u:C+1,x=0;x<=l;++x)k=x===0?0:x-1,P=x===l?l:x+1,L=4*(C*n+k),c[0]=o[L],c[1]=o[L+1],c[2]=o[L+2],c[3]=o[L+3],T=e.vert*N(c,y),L=4*(C*n+P),c[0]=o[L],c[1]=o[L+1],c[2]=o[L+2],c[3]=o[L+3],I=e.vert*N(c,y),M=(I-T)/a,L=4*(A*n+x),c[0]=o[L],c[1]=o[L+1],c[2]=o[L+2],c[3]=o[L+3],T=e.vert*N(c,y),L=4*(E*n+x),c[0]=o[L],c[1]=o[L+1],c[2]=o[L+2],c[3]=o[L+3],I=e.vert*N(c,y),R=(I-T)/a,F=Math.atan2(R,-M),F=F<0?d-F:F>d?h-F+d:d-F,q=Math.atan(Math.sqrt(M*M+R*R)),z=_*Math.cos(q)+g*Math.sin(q)*Math.cos(f-F),B=Math.cos(q),V=255*z,te=Math.min(Math.max(2*e.sunEl,0),1),ie=1.875-1.75*e.opacity,j=e.opacity!==.5?d*((Math.pow(ie,q)-1)/(Math.pow(ie,d)-1)):q,$={r:(1-B)*m.r*te*255,g:(1-B)*m.g*te*255,b:(1-B)*m.b*te*255,a:(1-B)*m.a*te*255},O=Math.abs(((F+f)/Math.PI+.5)%2-1),J={r:(v.r*(1-O)+b.r*O)*V,g:(v.g*(1-O)+b.g*O)*V,b:(v.b*(1-O)+b.b*O)*V,a:(v.a*(1-O)+b.a*O)*V},L=4*(C*n+x),s[L]=$.r*(1-O)+J.r,s[L+1]=$.g*(1-O)+J.g,s[L+2]=$.b*(1-O)+J.b,s[L+3]=o[L+3]*e.opacity*te*Math.sin(j);return new ImageData(s,n,r)}function b4(t,e=512){return t.getExtent()?Xu({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():hr}function HM(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((i,n)=>{e.accessToken=i,e.accessTokenParam=n})),e}function x4(t,e,i="",n={},r=void 0){let o,s,a,l,u=!0;return typeof i=="string"||Array.isArray(i)?l=i:(a=i,l=a.source||a.layers,n=a),typeof n=="string"?(o=n,a={}):(o=n.styleUrl,a=n),a.updateSource===!1&&(u=!1),r||(r=a.resolutions),o||typeof e!="string"||e.trim().startsWith("{")||(o=e),o&&(o=o.startsWith("data:")?location.href:kd(o,a.accessToken),a=HM(o,a)),new Promise(function(c,h){VM(e,a).then(function(d){if(d.version!=8)return h(new Error("glStyle version 8 required."));if(!(t instanceof Es||t instanceof vo))return h(new Error("Can only apply to VectorLayer or VectorTileLayer"));const p=t instanceof vo?"vector":"geojson";if(l?s=Array.isArray(l)?d.layers.find(function(y){return y.id===l[0]}).source:l:(s=Object.keys(d.sources).find(function(y){return d.sources[y].type===p}),l=s),!s)return h(new Error(`No ${p} source found in the glStyle.`));function f(){if(!u)return Promise.resolve();if(t instanceof vo)return YM(d.sources[s],o,a).then(function(k){const P=t.getSource();P?k!==P&&(P.setTileUrlFunction(k.getTileUrlFunction()),typeof P.setUrls=="function"&&typeof k.getUrls=="function"&&P.setUrls(k.getUrls()),P.format_||(P.format_=k.format_),P.getAttributions()||P.setAttributions(k.getAttributions()),P.getTileLoadFunction()===_2&&P.setTileLoadFunction(k.getTileLoadFunction()),ar(P.getProjection(),k.getProjection())&&(P.tileGrid=k.getTileGrid())):t.setSource(k);const A=t.getSource().getTileGrid();!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())&&A.getMinZoom()>0&&t.setMaxResolution(Ul(Math.max(0,A.getMinZoom()-1e-12),A.getResolutions()))});const y=d.sources[s];let x=t.getSource();x&&x.get("mapbox-source")===y||(x=XM(y,o,a));const C=t.getSource();return C?x!==C&&(C.getAttributions()||C.setAttributions(x.getAttributions()),C.format_||(C.format_=x.getFormat()),C.url_=x.getUrl()):t.setSource(x),Promise.resolve()}let g,_,v,b;function m(){if(b||d.sprite&&!_)b?(t.setStyle(b),f().then(c).catch(h)):h(new Error("Something went wrong trying to apply style."));else{if(a.projection&&!r){const y=lt(a.projection).getUnits();y!=="m"&&(r=hr.map(x=>x/Ar[y]))}b=y4(t,d,l,r,_,v,(y,x=a.webfonts)=>function(C,k="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const P=C.toString();if(P in Yf)return Yf[P];const A=[];for(let E=0,L=C.length;E<L;++E){C[E]=C[E].replace("Arial Unicode MS","Arial");const T=C[E],I=ov(T,1);Lw(I);const M=I.split(" ");A.push([M.slice(3).join(" ").replace(/"/g,""),M[1],M[0]])}for(let E=0,L=A.length;E<L;++E){const T=A[E],I=T[0];if(!d4(I)&&Xn.get(`${T[2]}
${T[1]} 
${I}`)!==100){const M=k.replace("{font-family}",I.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",I.replace(/ /g,"+")).replace("{fontweight}",T[1]).replace("{-fontstyle}",T[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",T[2]);if(!document.querySelector('link[href="'+M+'"]')){const R=document.createElement("link");R.href=M,R.rel="stylesheet",document.head.appendChild(R)}}}return Yf[P]=C,C}(y,x),a.getImage),t.getStyle()?f().then(c).catch(h):h(new Error(`Nothing to show for source [${s}]`))}}if(d.sprite){const y=new URL(function(k,P,A){const E=ay(k);if(!E)return decodeURI(new URL(k,A).href);if(E.indexOf("sprites/")!==0)throw new Error(`unexpected sprites url: ${k}`);const L=E.slice(8);return`${BM}/styles/v1/${L}/sprite?access_token=${P}`}(d.sprite,a.accessToken,o||location.href));g=window.devicePixelRatio>=1.5?.5:1;const x=g==.5?"@2x":"";let C=y.origin+y.pathname+x+".json"+y.search;new Promise(function(k,P){Ha("Sprite",C,a).then(k).catch(function(A){C=y.origin+y.pathname+".json"+y.search,Ha("Sprite",C,a).then(k).catch(P)})}).then(function(k){if(k===void 0&&h(new Error("No sprites found.")),_=k,v=y.origin+y.pathname+x+".png"+y.search,a.transformRequest){const P=a.transformRequest(v,"SpriteImage")||v;(P instanceof Request||P instanceof Promise)&&(v=P)}m()}).catch(function(k){h(new Error(`Sprites cannot be loaded: ${C}: ${k.message}`))})}else m()}).catch(h)})}const Jr={};function UM(t,e){let i;return t.some(function(n){if(n.id==e)return i=n.source,!0}),i}function WM(t,e,i){const n=new S2({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),r=n.getTileJSON(),o=n.getTileGrid(),s=lt(i.projection||"EPSG:3857"),a=function(d,p){const f=d.bounds;if(f){const g=cg([f[0],f[1]],p),_=cg([f[2],f[3]],p);return[g[0],g[1],_[0],_[1]]}return lt(p).getExtent()}(r,s),l=s.getExtent(),u=r.minzoom||0,c=r.maxzoom||22,h={attributions:n.getAttributions(),projection:s,tileGrid:new go({origin:l?xn(l):o.getOrigin(0),extent:a||o.getExtent(),minZoom:u,resolutions:b4(s,e.tileSize).slice(0,c+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?h.urls=r.tiles:h.url=r.tiles,h}function w4(t,e,i,n){const r={id:t.id,type:t.type},o=t.layout||{},s=t.paint||{};r.paint=s;const a=uy(e,i.resolutions||hr);let l;const u=Ve(r,"paint","background-color",a,Jr,n);return s["background-opacity"]!==void 0&&(l=Ve(r,"paint","background-opacity",a,Jr,n)),o.visibility=="none"?void 0:Xr(u,l)}function S4(t,e,i){const n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new Ka({source:new Qa({}),render(r){const o=w4(t,r.viewState.resolution,e,i);return n.style.backgroundColor=o,n}})}function YM(t,e,i){return new Promise(function(n,r){$M(t,e,i).then(function({tileJson:o,tileLoadFunction:s}){const a=WM(t,o,i);a.tileLoadFunction=s,a.format=new _h,n(new Zl(a))}).catch(r)})}function KM(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function C4(t,e,i){return new Promise(function(n,r){$M(t,e,i).then(function({tileJson:o,tileLoadFunction:s}){const a=new S2({interpolate:i.interpolate===void 0||i.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=WM(t,o,i).tileGrid,i.projection&&(a.projection=lt(i.projection));const l=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(u,c,h){const d=KM(h);let p=l(u,c,h);if(p.indexOf(d)!=-1){const f=a.getTileGrid().getTileCoordExtent(u);p=p.replace(d,f.toString())}return p}),a.set("mapbox-source",t),n(a)}).catch(function(o){r(o)})})}function Mx(t,e,i){const n=new fi;return C4(t,e,i).then(function(r){n.setSource(r)}).catch(function(){n.setSource(void 0)}),n}function XM(t,e,i){const n=i.projection?new f_({dataProjection:i.projection}):new f_,r=t.data,o={};if(typeof r=="string"){const a=kh(r,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const u=(h,d,p)=>{const f=KM(p);return a.replace(f,`${h.join(",")}`)},c=new mo({attributions:t.attribution,format:n,loader:(h,d,p,f,g)=>{Ha("GeoJSON",typeof u=="function"?u(h,d,p):u,i).then(_=>{const v=c.getFormat().readFeatures(_,{featureProjection:p});c.addFeatures(v),f(v)}).catch(_=>{c.removeLoadedExtent(h),g()})},strategy:h5});return c.set("mapbox-source",t),c}const l=new mo({attributions:t.attribution,format:n,url:a,loader:(u,c,h,d,p)=>{Ha("GeoJSON",a,i).then(f=>{const g=l.getFormat().readFeatures(f,{featureProjection:h});l.addFeatures(g),d(g)}).catch(f=>{l.removeLoadedExtent(u),p()})}});return l}o.features=n.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new mo(Object.assign({attributions:t.attribution,format:n},o));return s.set("mapbox-source",t),s}function M4(t,e,i){let n=null;return function(r){t.paint&&"raster-opacity"in t.paint&&r.frameState.viewState.zoom!==n&&(n=r.frameState.viewState.zoom,delete i[t.id],function(o,s,a,l){const u=Ve(o,"paint","raster-opacity",a,Jr,l);s.setOpacity(u)}(t,e,n,i))}}function k4(t,e,i,n){const r=jM(t),o=t.layers,s=i.type,a=i.source||UM(o,i.ref),l=t.sources[a];let u;if(s=="background")u=S4(i,n,r);else if(l.type=="vector")u=function(h,d,p){const f=new vo({declutter:!0,visible:!1});return YM(h,d,p).then(function(g){g.set("mapbox-source",h),f.setSource(g)}).catch(function(g){f.setSource(void 0)}),f}(l,e,n);else if(l.type=="raster")u=Mx(l,e,n),u.setVisible(!i.layout||i.layout.visibility!=="none"),u.on("prerender",M4(i,u,r));else if(l.type=="geojson")u=function(h,d,p){return new Es({declutter:!0,source:XM(h,d,p),visible:!1})}(l,e,n);else if(l.type=="raster-dem"&&i.type=="hillshade"){const h=function(d,p,f){const g=Mx(d,p,f);return new b2({source:new w2({operationType:"image",operation:_4,sources:[g]})})}(l,e,n);u=h,h.getSource().on("beforeoperations",function(d){const p=d.data;p.resolution=pu(n.projection||"EPSG:3857",d.resolution,Zi(d.extent),"m");const f=uy(d.resolution,n.resolutions||hr);p.encoding=l.encoding,p.vert=5*Ve(i,"paint","hillshade-exaggeration",f,Jr,r),p.sunAz=Ve(i,"paint","hillshade-illumination-direction",f,Jr,r),p.sunEl=35,p.opacity=.3,p.highlightColor=Ve(i,"paint","hillshade-highlight-color",f,Jr,r),p.shadowColor=Ve(i,"paint","hillshade-shadow-color",f,Jr,r),p.accentColor=Ve(i,"paint","hillshade-accent-color",f,Jr,r)}),u.setVisible(!i.layout||i.layout.visibility!=="none")}const c=a;return u&&u.set("mapbox-source",c),u}function kx(t,e,i,n){const r=[];let o=null;if(e instanceof Za){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const h=n.projection?lt(n.projection):o.getProjection();o=new tn(Object.assign(o.getProperties(),{maxResolution:hr[0]/Ar[h.getUnits()],projection:n.projection||o.getProjection()})),e.setView(o)}"center"in t&&!o.getCenter()&&o.setCenter(cg(t.center,o.getProjection())),"zoom"in t&&o.getZoom()===void 0&&o.setResolution(hr[0]/Ar[o.getProjection().getUnits()]/Math.pow(2,t.zoom)),o.getCenter()&&o.getZoom()!==void 0||o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",t),e.set("mapbox-metadata",{styleUrl:i,options:n});const s=t.layers;let a,l,u,c=[];for(let h=0,d=s.length;h<d;++h){const p=s[h];p.type!="heatmap"&&(u=p.source||UM(s,p.ref),u&&u==l||(c.length&&(r.push(Tx(a,c,t,i,e,n)),c=[]),a=k4(t,i,p,n),a instanceof Es||a instanceof vo||(c=[]),l=a.get("mapbox-source")),c.push(p.id))}return r.push(Tx(a,c,t,i,e,n)),Promise.all(r)}function q4(t,e,i={}){let n,r;if(r=typeof t=="string"||t instanceof HTMLElement?new Za({target:t}):t,typeof e=="string"){const o=e.startsWith("data:")?location.href:kd(e,i.accessToken);i=HM(o,i),n=new Promise(function(s,a){VM(e,i).then(function(l){kx(l,r,o,i).then(function(){s(r)}).catch(a)}).catch(function(l){a(new Error(`Could not load ${e}: ${l.message}`))})})}else n=new Promise(function(o,s){kx(e,r,!i.styleUrl||i.styleUrl.startsWith("data:")?location.href:kd(i.styleUrl,i.accessToken),i).then(function(){o(r)}).catch(s)});return n}function Tx(t,e,i,n,r,o={}){let s=24,a=0;const l=i.layers;for(let u=0,c=l.length;u<c;++u){const h=l[u];e.indexOf(h.id)!==-1&&(s=Math.min("minzoom"in h?h.minzoom:0,s),a=Math.max("maxzoom"in h?h.maxzoom:24,a))}return new Promise(function(u,c){const h=function(){const p=t.getSource();if(p&&p.getState()!=="error"){if("getTileGrid"in p){const f=p.getTileGrid();if(f){const g=f.getMinZoom();(s>0||g>0)&&t.setMaxResolution(Math.min(Ul(Math.max(0,s-1e-12),hr),Ul(Math.max(0,g-1e-12),f.getResolutions()))),a<24&&t.setMinResolution(Ul(a,hr))}}else s>0&&t.setMaxResolution(Ul(Math.max(0,s-1e-12),hr));p instanceof mo||p instanceof Zl?x4(t,i,e,Object.assign({styleUrl:n},o)).then(function(){(function(f,g){function _(){const v=g.get("mapbox-style");if(!v)return;const b=NM(v.layers),m=f.get("mapbox-layers"),y=b.filter(function(x){return m.includes(x.id)}).some(function(x){return!x.layout||!x.layout.visibility||x.layout.visibility==="visible"});f.get("visible")!==y&&f.setVisible(y)}f.on("change",_),_()})(t,r),u()}).catch(c):u()}else c(new Error("Error accessing data for source "+t.get("mapbox-source")))};t.set("mapbox-layers",e);const d=r.getLayers();d.getArray().indexOf(t)===-1&&d.push(t),t.getSource()?h():t.once("change:source",h)})}export{ix as A,Tm as K,P4 as M,Gi as N,ym as P,tx as R,Lt as T,Ym as U,Km as W,Em as Y,at as a,I4 as b,R4 as c,q4 as d,Zh as e,gq as k,cM as q,fn as u,Ls as z};
