import{d as L,ae as D,r as _,S as M,P as u,U as y,F as v,a7 as w,Z as W,V as B,Q as R,a8 as V,a3 as $,b as E,C as z,E as j,L as A,c as O}from"./@vue-exp-Mkau1HGZ.js";import{B as l}from"./xframelib-exp-BL-NWzRk.js";import{m as k,M as b,_ as x}from"./index-Dy2WIICa.js";import{b as N}from"./vue-router-exp-LDq1UUA0.js";import"./axios-exp-C7rfqWEd.js";import"./vendor-DLGs6WCJ.js";import"./@iconify/vue-exp-DwwUNauw.js";import"./monaco-editor-exp-B01XOe8A.js";function P(n){n.selected=!n.selected}function T(n){l.LayerManager.removeLayerItem("artificialLayer")}function F(n,r,o){l.LayerManager.addLayerItem({id:n,name:r},o)}const C=Object.freeze(Object.defineProperty({__proto__:null,AddLayerItem:F,ControlSkyVisible:P,RemoveLayerItem:T},Symbol.toStringTag,{value:"Module"})),U=L({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:k},iconColor:{type:String,default:"#f00"},itemSize:{type:String,default:"50px"}},setup(n,{expose:r}){r(),D(e=>({"1be8885c":n.itemSize+10,24193667:t.value,"6fc8707c":n.itemSize}));const o=n,t=_(k.length),i=N(),p=new Map,d=_(p);function c(e){switch(e.type){case b.URL:window.open(e.path,"_blank");break;case b.Route:if(e.blank){if(e.path){let s=i.resolve({path:e.path});window.open(s.href,"_blank")}}else e.path&&i.push({path:e.path});break;case b.Action:const a=e.path;a&&C[a]&&C[a](e);break;case b.Widget:if(e.path){const s=l.LayoutMap.get(o.layoutID);if(!s){l.Message.warn(`LayoutID:${o.layoutID}的Manager不存在`);return}f(s,e),e.selected=!e.selected,d.value.set(e.name,e.selected)}else l.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function f(e,a){a.path&&(a.selected?(a.unload?(l.Logger().info("卸载widget: "+a.path),e.unloadWidget(a.path)):(l.Logger().info("隐藏widget: "+a.path),e.changeWidgetVisible(a.path,!1)),a.children&&a.children.forEach(s=>{s.selected&&(l.Logger().info(`递归控制${a.path}的子Widget:`+s.path),f(e,s),s.selected=!s.selected)})):e.isWidgetLoaded(a.path)?(l.Logger().info("显示widget: "+a.path),e.changeWidgetVisible(a.path,!0)):(e.loadWidget(a.path),l.Logger().info("加载Widget："+a.path)))}function h(e){return d.value?.has(e.name)&&d.value.get(e.name)?"menuBarItem active":"menuBarItem"}const g={props:o,itemLength:t,router:i,selectedMapList:p,selectedMap:d,itemClick:c,controlMenuWidget:f,getClass:h};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Q={class:"menuBar"},Z=["title","onClick"];function q(n,r,o,t,i,p){const d=M("Icon");return u(),y("ul",Q,[(u(!0),y(v,null,w(o.menuData,(c,f)=>(u(),y("li",{key:f,class:W(t.getClass(c))},[B("span",{title:c.name,onClick:h=>t.itemClick(c)},[c.icon?(u(),R(d,{key:0,icon:c.icon,color:o.iconColor},null,8,["icon","color"])):(u(),y(v,{key:1},[V($(c.name),1)],64))],8,Z)],2))),128))])}const G=x(U,[["render",q],["__scopeId","data-v-9ae2dd36"],["__file","index.vue"]]);function S(n,r){let o;for(const t of n)if(t.path===r){o=t;break}else if(t.children){const i=S(t.children,r);if(i){o=i;break}}return o}const H=L({__name:"index",setup(n,{expose:r}){const o=_([]),t=_(""),i=z(),p=i?.proxy?.$options.id,d=i?.proxy?.$options.layoutID,c=_(p);E(()=>{t.value=d;const e=S(k,p);e&&o.value.push(...e.children)});const f=_(!0);function h(e=!1){f.value=e}r({changeVisible:h,isShow:f});const g={childMenus:o,layoutIDRef:t,instance:i,wid:p,layoutid:d,keyRef:c,isShow:f,changeVisible:h,ChildMenuBar:G};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),J=["id"];function K(n,r,o,t,i,p){return u(),y("div",{id:t.keyRef},[j(O(t.ChildMenuBar,{menuData:t.childMenus,layoutID:t.layoutIDRef,class:"currentChildMenu"},null,8,["menuData","layoutID"]),[[A,t.isShow]])],8,J)}const ne=x(H,[["render",K],["__file","index.vue"]]);export{ne as default};
