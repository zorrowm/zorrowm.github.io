import{a1 as e,a2 as w,a3 as S}from"./vendor-BjjxFmO4.js";import{F as u,h as N,M as D,c as P}from"./xframelib-exp-B5TZbF78.js";import{d as x,r as A,b as h,O as g,S as c,c as i,_ as f,U as l,F as C,a5 as k,X as v,a2 as U,C as G,R as M,A as W}from"./@vue-exp-18LRBxdm.js";import{_ as B}from"./index-Dxssf89i.js";import"./ol-exp-BZzGrai6.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-C65O8cJc.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./vue-router-exp-CvNwyAs-.js";const H={class:"justify-between toolbar"},J={class:"clearfix"},j=["onClick"],V=x({__name:"PlotMapWidget",setup($){const d=W();function b(a){a.id}function _(a){const n=d?.proxy?.$options.id,t=d?.proxy?.$options.layoutID;n&&u.LayoutMap.get(t)?.unloadWidget(n)}const L=A([{name:e.POINT,label:"目标点",img:"Point.png"},{name:e.POLYLINE,label:"折线",img:"Polyline.png"},{name:e.CURVE,label:"曲线",img:"Curve.png"},{name:e.ARC,label:"弧线",img:"ArcLine.png"},{name:e.FREEHANDLINE,label:"自由线",img:"FreeHandLine.png"},{name:e.GATHERING_PLACE,label:"集结地",img:"GatheringPlace.png"},{name:e.RECTANGLE,label:"矩形",img:"RectAngle.png"},{name:e.CIRCLE,label:"圆形",img:"Circle.png"},{name:e.ELLIPSE,label:"椭圆形",img:"Ellipse.png"},{name:e.LUNE,label:"弓形",img:"Arc.png"},{name:e.SECTOR,label:"扇形",img:"Sector.png"},{name:e.POLYGON,label:"多边形",img:"Polygon.png"},{name:e.FREE_POLYGON,label:"自由面",img:"FreePolygon.png"},{name:e.CLOSED_CURVE,label:"曲线面",img:"ClosedCurve.png"},{name:e.STRAIGHT_ARROW,label:"直箭头",img:"StraightArrow.png"},{name:e.FINE_ARROW,label:"细直箭头",img:"FineArrow.png"},{name:e.DOUBLE_ARROW,label:"双箭头",img:"DoubleArrow.png"},{name:e.ATTACK_ARROW,label:"进攻方向",img:"AttackArrow.png"},{name:e.TAILED_ATTACK_ARROW,label:"进攻方向（尾）",img:"TailedAttackArrow.png"},{name:e.ASSAULT_DIRECTION,label:"突击方向",img:"AssaultDirection.png"},{name:e.SQUAD_COMBAT,label:"分队作战",img:"SquadCombat.png"},{name:e.TAILED_SQUAD_COMBAT,label:"分队作战（尾）",img:"TailedSquadCombat.png"},{name:e.RECTFLAG,label:"矩形旗",img:"RectFlag.png"},{name:e.TRIANGLEFLAG,label:"三角旗",img:"TriangleFlag.png"},{name:e.CURVEFLAG,label:"曲面旗",img:"CurveFlag.png"}]);function y(a){return`background: url('${`img/drawImg/${a.img}`}') no-repeat`}let o,s,m;h(()=>{if(s=u.XMap,o=new w(s.map,{layerName:"plotDrawLayer"}),m=o.plotDraw.drawLayer,m){const a="plotDrawLayer",n={id:a,name:a,alias:"态势标绘",group:a,minZoom:1,maxZoom:24,visible:!0,opacity:1,type:"vector"};s.registerLayer(m,n)}});function E(){o?.removeFeature()}function R(a){o?.activate(a)}function T(){o?.removeAllFeatures()}function F(){const a=o.getAllFeatureGeoJSONs();D(JSON.stringify(a),"plotResult.json")}const p=A(null);function I(){p.value&&p.value.pickFiles()}async function O(a){const n=a[0];n.name;const t=await P.readFilePromise(n,"Text"),r=JSON.parse(t);o.addFeatures(r)}return(a,n)=>{const t=M("Icon");return g(),c(C,null,[i(G(N),{isDark:!1,top:"40px",left:"10px",nWidth:"485px",hHeight:"400px",onLoaded:b,onClose:_},{title:f(()=>[n[0]||(n[0]=l("img",{src:"img/drawImg/AttackArrow.png",width:"24",height:"24"},null,-1)),n[1]||(n[1]=l("span",{class:"paneltitle"},"态势标绘服务",-1)),l("div",H,[l("span",{title:"导出JSON",onClick:I},[i(t,{icon:"system-uicons:import"})]),l("span",{title:"删除当前",onClick:E},[i(t,{icon:"mdi-light:delete"})]),l("span",{title:"清空全部",onClick:T},[i(t,{icon:"ant-design:clear-outlined"})]),l("span",{title:"导出JSON",onClick:F},[i(t,{icon:"carbon:document-export"})])])]),default:f(()=>[l("div",J,[l("ul",null,[(g(!0),c(C,null,k(L.value,(r,Q)=>(g(),c("li",{class:"ol-plot-li",onClick:Y=>R(r.name)},[l("span",{class:"pic-li",style:v(y(r))},null,4),l("span",null,U(r.label),1)],8,j))),256))])])]),_:1}),i(S,{ref_key:"profileUploader",ref:p,"max-files":1,class:"hidden",accept:".json","field-name":"file",onAdded:O},null,512)],64)}}}),te=B(V,[["__scopeId","data-v-f440e716"]]);export{te as default};
