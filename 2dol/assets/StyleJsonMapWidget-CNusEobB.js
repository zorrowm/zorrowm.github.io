import{W as v,K as C}from"./vendor-DLGs6WCJ.js";import{d as g,a as V}from"./xgis-ol-exp-CUkajMJM.js";import{B as y,j as S}from"./xframelib-exp-BL-NWzRk.js";import{d as b,r as l,D as x,U as j,c as d,V as c,a3 as p,P as D}from"./@vue-exp-Mkau1HGZ.js";import{_ as P}from"./index-Dy2WIICa.js";import"./@iconify/vue-exp-DwwUNauw.js";import"./ol-exp-B7umSeRp.js";import"./axios-exp-C7rfqWEd.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-LDq1UUA0.js";const k=b({__name:"StyleJsonMapWidget",setup(L,{expose:o}){o();const s=l(""),a=l(""),i=l("");let r;const t=l("https://map.gis.digsur.com/Resource/styles/BJ_OSM_NEW/style.json?tk=undefined"),m=l("");function u(e){s.value=e.tileSchema?.rule??"W",a.value=e.id,i.value=e.name;const n=y.XMap;g(n.map,e).then(F=>{const _=n.MapView.getProjection();e.zoom,n.MapView.setZoom(e.zoom),e.center?n.MapView.setCenter(V.fromLonLatCoordinate(e.center,_)):n.MapView.setCenter(V.fromLonLatCoordinate(e.center,_))})}function M(){if(m.value){const e=JSON.parse(m.value);u(e)}else t.value&&S(t.value).then(e=>{e.data&&u(e.data)})}x(()=>{const e=y.XMap;r&&e.LayerManager.deleteLayer(r)});const f={PrjValue:s,serviceID:a,serviceName:i,get mvtLayer(){return r},set mvtLayer(e){r=e},styleJsonURL:t,styleJsonContent:m,loadMVTLayer:u,doClick:M};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),B={class:"rightPanel"},U={class:"q-pa-md",style:{"max-width":"500px"}};function w(L,o,s,a,i,r){return D(),j("div",B,[d(v,{clearable:"",modelValue:a.styleJsonURL,"onUpdate:modelValue":o[0]||(o[0]=t=>a.styleJsonURL=t),label:"StyleJson地址","stack-label":"",dense:!1},null,8,["modelValue"]),c("div",U,[d(v,{clearable:"",modelValue:a.styleJsonContent,"onUpdate:modelValue":o[1]||(o[1]=t=>a.styleJsonContent=t),filled:"",type:"textarea"},null,8,["modelValue"])]),d(C,{color:"primary",label:"加载StyleJson",onClick:a.doClick}),c("div",null,[c("span",null,"图层ID:"+p(a.serviceID)+" 服务名："+p(a.serviceName)+" 切片方案："+p(a.PrjValue),1)])])}const Q=P(k,[["render",w],["__scopeId","data-v-cffa1b11"],["__file","StyleJsonMapWidget.vue"]]);export{Q as default};
