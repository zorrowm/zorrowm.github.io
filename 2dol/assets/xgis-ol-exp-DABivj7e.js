import{$ as en,a0 as Ve,c as mt,e as Ro,r as $,a as w,w as se,h as x,G as si,o as ot,K as DC,b as Rt,H as _u,S as jC,j as BC,d as Cr,a3 as Fo,a2 as Ki,Y as Ao,a1 as Ha,a6 as Oo,X as ii,m as Rb,E as Vi,n as lt,D as Fb,T as NC,B as Mr,I as da,C as ke,i as Ni,R as Im,M as Ab,p as uo,v as bi,ad as VC,F as L0,aa as $C,_ as Mn,L as ah,f as GC,g as ur}from"./@vue-exp-DTehQd6t.js";import{I as Nr}from"./@iconify/vue-exp-Ct1khs4G.js";import{V as HC}from"./ol-exp-DkhKL1MQ.js";class fn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var ms="propertychange";class bu{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Hn(t,e){return t>e?1:t<e?-1:0}function sh(t,e,i){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if(typeof i=="function"){for(let r=1;r<n;++r){const o=t[r];if(o===e)return r;if(o<e)return i(e,t[r-1],o)>0?r-1:r}return n-1}if(i>0){for(let r=1;r<n;++r)if(t[r]<e)return r-1;return n-1}if(i<0){for(let r=1;r<n;++r)if(t[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function WC(t,e,i){for(;e<i;){const n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function Wn(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let r=0;r<n;r++)t[t.length]=i[r]}function co(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function vs(){return!0}function qs(){return!1}function ys(){}function Ob(t){let e,i,n;return function(){const r=Array.prototype.slice.call(arguments);return i&&this===n&&co(r,i)||(n=this,i=r,e=t.apply(this,arguments)),e}}function _s(t){return function(){let e;try{e=t()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}()}function xu(t){for(const e in t)delete t[e]}function ro(t){let e;for(e in t)return!1;return!e}class wu extends bu{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,i){if(!e||!i)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(i)||r.push(i)}dispatchEvent(e){const i=typeof e=="string",n=i?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const o=i?new fn(e):e;o.target||(o.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});let l;n in a||(a[n]=0,s[n]=0),++a[n];for(let u=0,c=r.length;u<c;++u)if(l="handleEvent"in r[u]?r[u].handleEvent(o):r[u].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--a[n]==0){let u=s[n];for(delete s[n];u--;)this.removeEventListener(n,ys);delete a[n]}return l}disposeInternal(){this.listeners_&&xu(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,i){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(i);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=ys,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}var Ft="change",UC="error",xf="contextmenu",Gl="click",XC="dblclick",lh="keydown",zb="keypress",YC="load",I0="touchmove",Ll="wheel";function ht(t,e,i,n,r){if(r){const a=i;i=function(){t.removeEventListener(e,i),a.apply(n??this,arguments)}}else n&&n!==t&&(i=i.bind(n));const o={target:t,type:e,listener:i};return t.addEventListener(e,i),o}function uh(t,e,i,n){return ht(t,e,i,n,!0)}function Lt(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),xu(t))}class Il extends wu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ft)}getRevision(){return this.revision_}onInternal(e,i){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=ht(this,e[o],i);return r}return ht(this,e,i)}onceInternal(e,i){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let o=0;o<r;++o)n[o]=uh(this,e[o],i)}else n=uh(this,e,i);return i.ol_key=n,n}unInternal(e,i){const n=i.ol_key;if(n)Bn(n);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],i);else this.removeEventListener(e,i)}}function Bn(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)Lt(t[e]);else Lt(t)}function Xe(){throw new Error("Unimplemented abstract method.")}Il.prototype.on,Il.prototype.once,Il.prototype.un;let KC=0;function et(t){return t.ol_uid||(t.ol_uid=String(++KC))}class P0 extends fn{constructor(e,i,n){super(e),this.key=i,this.oldValue=n}}class gn extends Il{constructor(e){super(),this.on,this.once,this.un,et(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let i;return this.values_&&this.values_.hasOwnProperty(e)&&(i=this.values_[e]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,i){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new P0(n,e,i)),n=ms,this.hasListener(n)&&this.dispatchEvent(new P0(n,e,i))}addChangeListener(e,i){this.addEventListener(`change:${e}`,i)}removeChangeListener(e,i){this.removeEventListener(`change:${e}`,i)}set(e,i,n){const r=this.values_||(this.values_={});if(n)r[e]=i;else{const o=r[e];r[e]=i,o!==i&&this.notify(e,o)}}setProperties(e,i){for(const n in e)this.set(n,e[n],i)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,i){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],ro(this.values_)&&(this.values_=null),i||this.notify(e,n)}}}var Go="add",Ho="remove";const q0="length";class Bu extends fn{constructor(e,i,n){super(e),this.element=i,this.index=n}}class an extends gn{constructor(e,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let i=0,n=e.length;i<n;++i)this.push(e[i]);return this}forEach(e){const i=this.array_;for(let n=0,r=i.length;n<r;++n)e(i[n],n,i)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(q0)}insertAt(e,i){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(i),this.array_.splice(e,0,i),this.updateLength_(),this.dispatchEvent(new Bu(Go,i,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const i=this.getLength();return this.insertAt(i,e),this.getLength()}remove(e){const i=this.array_;for(let n=0,r=i.length;n<r;++n)if(i[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const i=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Bu(Ho,i,e)),i}setAt(e,i){if(e>=this.getLength())return void this.insertAt(e,i);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(i,e);const n=this.array_[e];this.array_[e]=i,this.dispatchEvent(new Bu(Ho,n,e)),this.dispatchEvent(new Bu(Go,i,e))}updateLength_(){this.set(q0,this.array_.length)}assertUnique_(e,i){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==i)throw new Error("Duplicate item added to a unique collection")}}var Nu="opacity",Rd="visible",R0="extent",Fd="zIndex",Ad="maxResolution",Od="minResolution",zd="maxZoom",Dd="minZoom",jd="source",F0="map";function _t(t,e){if(!t)throw new Error(e)}function Dt(t,e,i){return Math.min(Math.max(t,e),i)}function ZC(t,e,i,n,r,o){const a=r-i,s=o-n;if(a!==0||s!==0){const l=((t-i)*a+(e-n)*s)/(a*a+s*s);l>1?(i=r,n=o):l>0&&(i+=a*l,n+=s*l)}return fr(t,e,i,n)}function fr(t,e,i,n){const r=i-t,o=n-e;return r*r+o*o}function Wo(t){return t*Math.PI/180}function Uo(t,e){const i=t%e;return i*e<0?i+e:i}function Xi(t,e,i){return t+i*(e-t)}function Su(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function A0(t,e){return Math.round(Su(t,e))}function Vu(t,e){return Math.floor(Su(t,e))}function Vr(t,e){return Math.ceil(Su(t,e))}class Db extends gn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const i=Object.assign({},e);typeof e.properties=="object"&&(delete i.properties,Object.assign(i,e.properties)),i[Nu]=e.opacity!==void 0?e.opacity:1,_t(typeof i[Nu]=="number","Layer opacity must be a number"),i[Rd]=e.visible===void 0||e.visible,i[Fd]=e.zIndex,i[Ad]=e.maxResolution!==void 0?e.maxResolution:1/0,i[Od]=e.minResolution!==void 0?e.minResolution:0,i[Dd]=e.minZoom!==void 0?e.minZoom:-1/0,i[zd]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const i=this.state_||{layer:this,managed:e===void 0||e},n=this.getZIndex();return i.opacity=Dt(Math.round(100*this.getOpacity())/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n!==void 0||i.managed?n:1/0,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(e){return Xe()}getLayerStatesArray(e){return Xe()}getExtent(){return this.get(R0)}getMaxResolution(){return this.get(Ad)}getMinResolution(){return this.get(Od)}getMinZoom(){return this.get(Dd)}getMaxZoom(){return this.get(zd)}getOpacity(){return this.get(Nu)}getSourceState(){return Xe()}getVisible(){return this.get(Rd)}getZIndex(){return this.get(Fd)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(R0,e)}setMaxResolution(e){this.set(Ad,e)}setMinResolution(e){this.set(Od,e)}setMaxZoom(e){this.set(zd,e)}setMinZoom(e){this.set(Dd,e)}setOpacity(e){_t(typeof e=="number","Layer opacity must be a number"),this.set(Nu,e)}setVisible(e){this.set(Rd,e)}setZIndex(e){this.set(Fd,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var wf="prerender",Sf="postrender",jb="precompose",QC="postcompose",Bd="rendercomplete",Zi=0,En=1,vn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Pm=256,br={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class gr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||br[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Cu=6378137,Wa=Math.PI*Cu,JC=[-Wa,-Wa,Wa,Wa],eM=[-180,-85,180,85],$u=Cu*Math.log(Math.tan(Math.PI/2));class _a extends gr{constructor(e){super({code:e,units:"m",extent:JC,global:!0,worldExtent:eM,getPointResolution:function(i,n){return i/Math.cosh(n[1]/Cu)}})}}const O0=[new _a("EPSG:3857"),new _a("EPSG:102100"),new _a("EPSG:102113"),new _a("EPSG:900913"),new _a("http://www.opengis.net/def/crs/EPSG/0/3857"),new _a("http://www.opengis.net/gml/srs/epsg.xml#3857")];function tM(t,e,i,n){const r=t.length;i=i>1?i:2,n=n??i,e===void 0&&(e=i>2?t.slice():new Array(r));for(let o=0;o<r;o+=n){e[o]=Wa*t[o]/180;let a=Cu*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));a>$u?a=$u:a<-$u&&(a=-$u),e[o+1]=a}return e}function iM(t,e,i,n){const r=t.length;i=i>1?i:2,n=n??i,e===void 0&&(e=i>2?t.slice():new Array(r));for(let o=0;o<r;o+=n)e[o]=180*t[o]/Wa,e[o+1]=360*Math.atan(Math.exp(t[o+1]/Cu))/Math.PI-90;return e}const z0=[-180,-90,180,90],nM=6378137*Math.PI/180;class vo extends gr{constructor(e,i){super({code:e,units:"degrees",extent:z0,axisOrientation:i,global:!0,metersPerUnit:nM,worldExtent:z0})}}const D0=[new vo("CRS:84"),new vo("EPSG:4326","neu"),new vo("urn:ogc:def:crs:OGC:1.3:CRS84"),new vo("urn:ogc:def:crs:OGC:2:84"),new vo("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new vo("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new vo("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Cf={},ns={};function bs(t,e,i){const n=t.getCode(),r=e.getCode();n in ns||(ns[n]={}),ns[n][r]=i}function Bb(t,e){let i;return t in ns&&e in ns[t]&&(i=ns[t][e]),i}var j0=0,ch=1,Mf=2,kf=4,Tf=8,Ef=16;function hh(t){const e=rM();for(let i=0,n=t.length;i<n;++i)Pl(e,t[i]);return e}function Zr(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Nb(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function pa(t,e,i){let n,r;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+r*r}function ia(t,e){return qm(t,e[0],e[1])}function kn(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function qm(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function Lf(t,e){const i=t[0],n=t[1],r=t[2],o=t[3],a=e[0],s=e[1];let l=j0;return a<i?l|=Ef:a>r&&(l|=kf),s<n?l|=Tf:s>o&&(l|=Mf),l===j0&&(l=ch),l}function rM(){return[1/0,1/0,-1/0,-1/0]}function Kn(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function Rs(t){return Kn(1/0,1/0,-1/0,-1/0,t)}function Vb(t,e){const i=t[0],n=t[1];return Kn(i,n,i,n,e)}function Rm(t,e,i,n,r){return Gb(Rs(r),t,e,i,n)}function xr(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function $b(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Pl(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Gb(t,e,i,n,r){for(;i<n;i+=r)oM(t,e[i],e[i+1]);return t}function oM(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function Fm(t,e){let i;return i=e(id(t)),i||(i=e(nd(t)),i||(i=e(rd(t)),i||(i=e(er(t)),i||!1)))}function Hl(t){let e=0;return fa(t)||(e=rt(t)*Yt(t)),e}function id(t){return[t[0],t[1]]}function nd(t){return[t[2],t[1]]}function $i(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function aM(t,e){let i;if(e==="bottom-left")i=id(t);else if(e==="bottom-right")i=nd(t);else if(e==="top-left")i=er(t);else{if(e!=="top-right")throw new Error("Invalid corner");i=rd(t)}return i}function dh(t,e,i,n,r){const[o,a,s,l,u,c,h,d]=function(p,f,g,y){const _=f*y[0]/2,b=f*y[1]/2,m=Math.cos(g),v=Math.sin(g),S=_*m,C=_*v,k=b*m,L=b*v,A=p[0],q=p[1];return[A-S+L,q-C-k,A-S-L,q-C+k,A+S-L,q+C+k,A+S+L,q+C-k,A-S+L,q-C-k]}(t,e,i,n);return Kn(Math.min(o,s,u,h),Math.min(a,l,c,d),Math.max(o,s,u,h),Math.max(a,l,c,d),r)}function Yt(t){return t[3]-t[1]}function Pi(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return Ut(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Rs(n),n}function er(t){return[t[0],t[3]]}function rd(t){return[t[2],t[3]]}function rt(t){return t[2]-t[0]}function Ut(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function fa(t){return t[2]<t[0]||t[3]<t[1]}function Hb(t,e,i,n){if(fa(t))return Rs(i);let r=[];r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(r,r,2);const o=[],a=[];for(let s=0,l=r.length;s<l;s+=2)o.push(r[s]),a.push(r[s+1]);return function(s,l,u){return Kn(Math.min.apply(null,s),Math.min.apply(null,l),Math.max.apply(null,s),Math.max.apply(null,l),u)}(o,a,i)}function Wb(t,e){const i=e.getExtent(),n=$i(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const r=rt(i),o=Math.floor((n[0]-i[0])/r)*r;t[0]-=o,t[2]-=o}return t}function Am(t,e,i){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];Wb(t,e);const r=rt(n);if(rt(t)>r&&!i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+r,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-r,t[3]]]}return[t]}function ph(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function Om(t,e){const i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t}function Ub(t,e){const i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function B0(t,e){return Math.sqrt(Ub(t,e))}function N0(t,e){return function(i,n,r){return i?n.replace("{x}",i[0].toFixed(r)).replace("{y}",i[1].toFixed(r)):""}(t,"{x}, {y}",e)}function zm(t,e){if(e.canWrapX()){const i=rt(e.getExtent()),n=Xb(t,e,i);n&&(t[0]-=n*i)}return t}function Xb(t,e,i){const n=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(i=i||rt(n),r=Math.floor((t[0]-n[0])/i)),r}const Dm=63710088e-1;function Wl(t,e,i){i=i||Dm;const n=Wo(t[1]),r=Wo(e[1]),o=(r-n)/2,a=Wo(e[0]-t[0])/2,s=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}function Nd(t,e){let i=0;for(let n=0,r=t.length;n<r-1;++n)i+=Wl(t[n],t[n+1],e);return i}function Yb(t,e){const i=(e=e||{}).radius||Dm,n=e.projection||"EPSG:3857",r=t.getType();r!=="GeometryCollection"&&(t=t.clone().transform(n,"EPSG:4326"));let o,a,s,l,u,c,h=0;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=t.getCoordinates(),h=Nd(o,i);break;case"MultiLineString":case"Polygon":for(o=t.getCoordinates(),s=0,l=o.length;s<l;++s)h+=Nd(o[s],i);break;case"MultiPolygon":for(o=t.getCoordinates(),s=0,l=o.length;s<l;++s)for(a=o[s],u=0,c=a.length;u<c;++u)h+=Nd(a[u],i);break;case"GeometryCollection":{const d=t.getGeometries();for(s=0,l=d.length;s<l;++s)h+=Yb(d[s],e);break}default:throw new Error("Unsupported geometry type: "+r)}return h}function Gu(t,e){let i=0;const n=t.length;let r=t[n-1][0],o=t[n-1][1];for(let a=0;a<n;a++){const s=t[a][0],l=t[a][1];i+=Wo(s-r)*(2+Math.sin(Wo(o))+Math.sin(Wo(l))),r=s,o=l}return i*e*e/2}function Kb(t,e){const i=(e=e||{}).radius||Dm,n=e.projection||"EPSG:3857",r=t.getType();r!=="GeometryCollection"&&(t=t.clone().transform(n,"EPSG:4326"));let o,a,s,l,u,c,h=0;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=t.getCoordinates(),h=Math.abs(Gu(o[0],i)),s=1,l=o.length;s<l;++s)h-=Math.abs(Gu(o[s],i));break;case"MultiPolygon":for(o=t.getCoordinates(),s=0,l=o.length;s<l;++s)for(a=o[s],h+=Math.abs(Gu(a[0],i)),u=1,c=a.length;u<c;++u)h-=Math.abs(Gu(a[u],i));break;case"GeometryCollection":{const d=t.getGeometries();for(s=0,l=d.length;s<l;++s)h+=Kb(d[s],e);break}default:throw new Error("Unsupported geometry type: "+r)}return h}function Zb(...t){}let If=!0;function Qb(t){If=t!==void 0}function jm(t,e){if(e!==void 0)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function Jb(t,e){if(e!==void 0&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function Bm(t){(function(e,i){Cf[e]=i})(t.getCode(),t),bs(t,t,jm)}function st(t){return typeof t=="string"?Cf[e=t]||Cf[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Ul(t,e,i,n){let r;const o=(t=st(t)).getPointResolutionFunc();if(o){if(r=o(e,i),n&&n!==t.getUnits()){const a=t.getMetersPerUnit();a&&(r=r*a/br[n])}}else{const a=t.getUnits();if(a=="degrees"&&!n||n=="degrees")r=e;else{const s=Mu(t,st("EPSG:4326"));if(s===Jb&&a!=="degrees")r=e*t.getMetersPerUnit();else{let u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];u=s(u,u,2),r=(Wl(u.slice(0,2),u.slice(2,4))+Wl(u.slice(4,6),u.slice(6,8)))/2}const l=n?br[n]:t.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Pf(t){(function(e){e.forEach(Bm)})(t),t.forEach(function(e){t.forEach(function(i){e!==i&&bs(e,i,jm)})})}function Vd(t,e){return t?typeof t=="string"?st(t):t:st(e)}function V0(t){return function(e,i,n,r){const o=e.length;n=n!==void 0?n:2,r=r??n,i=i!==void 0?i:new Array(o);for(let a=0;a<o;a+=r){const s=t(e.slice(a,a+n)),l=s.length;for(let u=0,c=r;u<c;++u)i[a+u]=u>=l?e[a+u]:s[u]}return i}}function sM(t,e,i,n){const r=st(t),o=st(e);bs(r,o,V0(i)),bs(o,r,V0(n))}function qf(t,e){return Qb(),zo(t,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Xo(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Mu(t,e)===jm)&&i}function Mu(t,e){let i=Bb(t.getCode(),e.getCode());return i||(i=Jb),i}function xs(t,e){return Mu(st(t),st(e))}function zo(t,e,i){return xs(e,i)(t,void 0,t.length)}function Rf(t,e){return t}function bn(t,e){return If&&!ph(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(If=!1,Zb("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function Nm(t,e){return t}function Nn(t,e){return t}function $0(t,e,i){return function(n){let r,o;if(t.canWrapX()){const a=t.getExtent(),s=rt(a);o=Xb(n=n.slice(0),t,s),o&&(n[0]=n[0]-o*s),n[0]=Dt(n[0],a[0],a[2]),n[1]=Dt(n[1],a[1],a[3]),r=i(n)}else r=i(n);return o&&e.canWrapX()&&(r[0]+=o*rt(e.getExtent())),r}}var G0,H0,W0;function U0(t,e,i){return function(n,r,o,a,s){if(!n)return;if(!r&&!e)return n;const l=e?0:o[0]*r,u=e?0:o[1]*r,c=s?s[0]:0,h=s?s[1]:0;let d=t[0]+l/2+c,p=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let y=Dt(n[0],d,p),_=Dt(n[1],f,g);if(a&&i&&r){const b=30*r;y+=-b*Math.log(1+Math.max(0,d-n[0])/b)+b*Math.log(1+Math.max(0,n[0]-p)/b),_+=-b*Math.log(1+Math.max(0,f-n[1])/b)+b*Math.log(1+Math.max(0,n[1]-g)/b)}return[y,_]}}function lM(t){return t}function Ff(t,e,i,n){const r=rt(e)/i[0],o=Yt(e)/i[1];return n?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function Af(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),Dt(n,i/2,2*e)}function X0(t,e,i,n,r){return i=i===void 0||i,function(o,a,s,l){if(o!==void 0){const u=n?Ff(t,n,s,r):t;return i&&l?Af(o,u,e):Dt(o,e,u)}}}function Vm(t){if(t!==void 0)return 0}function Y0(t){if(t!==void 0)return t}function ex(t){return Math.pow(t,3)}function Fs(t){return 1-ex(1-t)}function uM(t){return 3*t*t-2*t*t*t}function cM(t){return t}Pf(O0),Pf(D0),G0=O0,H0=tM,W0=iM,D0.forEach(function(t){G0.forEach(function(e){bs(t,e,H0),bs(e,t,W0)})});const tx=new Array(6);function K0(t){return $m(t,1,0,0,1,0,0)}function fh(t,e){const i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],p=e[5];return t[0]=i*l+r*u,t[1]=n*l+o*u,t[2]=i*c+r*h,t[3]=n*c+o*h,t[4]=i*d+r*p+a,t[5]=n*d+o*p+s,t}function $m(t,e,i,n,r,o,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t}function ti(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function $d(t,e,i){return fh(t,$m(tx,e,0,0,i,0,0))}function Zn(t,e,i,n,r,o,a,s){const l=Math.sin(o),u=Math.cos(o);return t[0]=n*u,t[1]=r*l,t[2]=-n*l,t[3]=r*u,t[4]=a*n*u-s*n*l+e,t[5]=a*r*l+s*r*u+i,t}function ix(t,e){const i=(n=e)[0]*n[3]-n[1]*n[2];var n;_t(i!==0,"Transformation matrix cannot be inverted");const r=e[0],o=e[1],a=e[2],s=e[3],l=e[4],u=e[5];return t[0]=s/i,t[1]=-o/i,t[2]=-a/i,t[3]=r/i,t[4]=(a*u-s*l)/i,t[5]=-(r*u-o*l)/i,t}const Z0=[1e6,1e6,1e6,1e6,2,2];function $r(t,e,i,n,r,o,a){o=o||[],a=a||2;let s=0;for(let l=e;l<i;l+=n){const u=t[l],c=t[l+1];o[s++]=r[0]*u+r[2]*c+r[4],o[s++]=r[1]*u+r[3]*c+r[5];for(let h=2;h<a;h++)o[s++]=t[l+h]}return o&&o.length!=s&&(o.length=s),o}function Gm(t,e,i,n,r,o,a){a=a||[];const s=Math.cos(r),l=Math.sin(r),u=o[0],c=o[1];let h=0;for(let d=e;d<i;d+=n){const p=t[d]-u,f=t[d+1]-c;a[h++]=u+p*s-f*l,a[h++]=c+p*l+f*s;for(let g=d+2;g<d+n;++g)a[h++]=t[g]}return a&&a.length!=h&&(a.length=h),a}const Q0=[1,0,0,1,0,0];class nx extends gn{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Ob((e,i,n)=>{if(!n)return this.getSimplifiedGeometry(i);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(i)})}simplifyTransformed(e,i){return this.simplifyTransformedInternal(this.getRevision(),e,i)}clone(){return Xe()}closestPointXY(e,i,n,r){return Xe()}containsXY(e,i){const n=this.getClosestPoint([e,i]);return n[0]===e&&n[1]===i}getClosestPoint(e,i){return i=i||[NaN,NaN],this.closestPointXY(e[0],e[1],i,1/0),i}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Xe()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Rs(i),this.extentRevision_=this.getRevision()}return function(i,n){return n?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n):i}(this.extent_,e)}rotate(e,i){Xe()}scale(e,i,n){Xe()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Xe()}getType(){return Xe()}applyTransform(e){Xe()}intersectsExtent(e){return Xe()}translate(e,i){Xe()}transform(e,i){const n=st(e),r=n.getUnits()=="tile-pixels"?function(o,a,s){const l=n.getExtent(),u=n.getWorldExtent(),c=Yt(u)/Yt(l);return Zn(Q0,u[0],u[3],c,-c,0,0,0),$r(o,0,o.length,s,Q0,a),xs(n,i)(o,a,s)}:xs(n,i);return this.applyTransform(r),this}}class ho extends nx{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Rm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Xe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(e);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,i){this.stride=gh(e),this.layout=e,this.flatCoordinates=i}setCoordinates(e,i){Xe()}setLayout(e,i,n){let r;if(e)r=gh(e);else{for(let o=0;o<n;++o){if(i.length===0)return this.layout="XY",void(this.stride=2);i=i[0]}r=i.length,e=To(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,i){const n=this.getFlatCoordinates();if(n){const r=this.getStride();Gm(n,0,n.length,r,e,i,n),this.changed()}}scale(e,i,n){i===void 0&&(i=e),n||(n=$i(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();(function(a,s,l,u,c,h,d,p){p=p||[];const f=d[0],g=d[1];let y=0;for(let _=s;_<l;_+=u){const b=a[_]-f,m=a[_+1]-g;p[y++]=f+c*b,p[y++]=g+h*m;for(let v=_+2;v<_+u;++v)p[y++]=a[v]}p&&p.length!=y&&(p.length=y)})(r,0,r.length,o,e,i,n,r),this.changed()}}translate(e,i){const n=this.getFlatCoordinates();if(n){const r=this.getStride();(function(o,a,s,l,u,c,h){h=h||[];let d=0;for(let p=a;p<s;p+=l){h[d++]=o[p]+u,h[d++]=o[p+1]+c;for(let f=p+2;f<p+l;++f)h[d++]=o[f]}h&&h.length!=d&&(h.length=d)})(n,0,n.length,r,e,i,n),this.changed()}}}function To(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function gh(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function J0(t,e,i,n,r,o,a){const s=t[e],l=t[e+1],u=t[i]-s,c=t[i+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((r-s)*u+(o-l)*c)/(u*u+c*c);if(d>1)h=i;else{if(d>0){for(let p=0;p<n;++p)a[p]=Xi(t[e+p],t[i+p],d);return void(a.length=n)}h=e}}for(let d=0;d<n;++d)a[d]=t[h+d];a.length=n}function Hm(t,e,i,n,r){let o=t[e],a=t[e+1];for(e+=n;e<i;e+=n){const s=t[e],l=t[e+1],u=fr(o,a,s,l);u>r&&(r=u),o=s,a=l}return r}function Wm(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const s=i[o];r=Hm(t,e,s,n,r),e=s}return r}function Um(t,e,i,n,r,o,a,s,l,u,c){if(e==i)return u;let h,d;if(r===0){if(d=fr(a,s,t[e],t[e+1]),d<u){for(h=0;h<n;++h)l[h]=t[e+h];return l.length=n,d}return u}c=c||[NaN,NaN];let p=e+n;for(;p<i;)if(J0(t,p-n,p,n,a,s,c),d=fr(a,s,c[0],c[1]),d<u){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n,p+=n}else p+=n*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(o&&(J0(t,i-n,e,n,a,s,c),d=fr(a,s,c[0],c[1]),d<u)){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n}return u}function Xm(t,e,i,n,r,o,a,s,l,u,c){c=c||[NaN,NaN];for(let h=0,d=i.length;h<d;++h){const p=i[h];u=Um(t,e,p,n,r,o,a,s,l,u,c),e=p}return u}function rx(t,e,i,n){for(let r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}function od(t,e,i,n){for(let r=0,o=i.length;r<o;++r){const a=i[r];for(let s=0;s<n;++s)t[e++]=a[s]}return e}function Xl(t,e,i,n,r){r=r||[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=od(t,e,i[a],n);r[o++]=l,e=l}return r.length=o,r}function ox(t,e,i,n,r){r=r||[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=Xl(t,e,i[a],n,r[o]);l.length===0&&(l[0]=e),r[o++]=l,e=l[l.length-1]}return r.length=o,r}function ad(t,e,i,n,r,o,a){const s=(i-e)/n;if(s<3){for(;e<i;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}const l=new Array(s);l[0]=1,l[s-1]=1;const u=[e,i-n];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let p=0;const f=t[d],g=t[d+1],y=t[h],_=t[h+1];for(let b=d+n;b<h;b+=n){const m=ZC(t[b],t[b+1],f,g,y,_);m>p&&(c=b,p=m)}p>r&&(l[(c-e)/n]=1,d+n<c&&u.push(d,c),c+n<h&&u.push(c,h))}for(let h=0;h<s;++h)l[h]&&(o[a++]=t[e+h*n],o[a++]=t[e+h*n+1]);return a}function ax(t,e,i,n,r,o,a,s){for(let l=0,u=i.length;l<u;++l){const c=i[l];a=ad(t,e,c,n,r,o,a),s.push(a),e=c}return a}function Eo(t,e){return e*Math.round(t/e)}function hM(t,e,i,n,r,o,a){if(e==i)return a;let s,l,u=Eo(t[e],r),c=Eo(t[e+1],r);e+=n,o[a++]=u,o[a++]=c;do if(s=Eo(t[e],r),l=Eo(t[e+1],r),(e+=n)==i)return o[a++]=s,o[a++]=l,a;while(s==u&&l==c);for(;e<i;){const h=Eo(t[e],r),d=Eo(t[e+1],r);if(e+=n,h==s&&d==l)continue;const p=s-u,f=l-c,g=h-u,y=d-c;p*y==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&y<f||f==y||f>0&&y>f)?(s=h,l=d):(o[a++]=s,o[a++]=l,u=s,c=l,s=h,l=d)}return o[a++]=s,o[a++]=l,a}function Ym(t,e,i,n,r,o,a,s){for(let l=0,u=i.length;l<u;++l){const c=i[l];a=hM(t,e,c,n,r,o,a),s.push(a),e=c}return a}function Gr(t,e,i,n,r){r=r!==void 0?r:[];let o=0;for(let a=e;a<i;a+=n)r[o++]=t.slice(a,a+n);return r.length=o,r}function Yl(t,e,i,n,r){r=r!==void 0?r:[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=i[a];r[o++]=Gr(t,e,l,n,r[o]),e=l}return r.length=o,r}function Of(t,e,i,n,r){r=r!==void 0?r:[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=i[a];r[o++]=l.length===1&&l[0]===e?[]:Yl(t,e,l,n,r[o]),e=l[l.length-1]}return r.length=o,r}function sx(t,e,i,n){let r=0;const o=t[i-n],a=t[i-n+1];let s=0,l=0;for(;e<i;e+=n){const u=t[e]-o,c=t[e+1]-a;r+=l*u-s*c,s=u,l=c}return r/2}function lx(t,e,i,n){let r=0;for(let o=0,a=i.length;o<a;++o){const s=i[o];r+=sx(t,e,s,n),e=s}return r}class Kl extends ho{constructor(e,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i===void 0||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}clone(){return new Kl(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,i,n,r){return r<pa(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Hm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Um(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,i,n,r))}getArea(){return sx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Gr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const i=[];return i.length=ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new Kl(i,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=od(this.flatCoordinates,0,e,this.stride),this.changed()}}class un extends ho{constructor(e,i){super(),this.setCoordinates(e,i)}clone(){const e=new un(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){const o=this.flatCoordinates,a=fr(e,i,o[0],o[1]);if(a<r){const s=this.stride;for(let l=0;l<s;++l)n[l]=o[l];return n.length=s,a}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Vb(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return qm(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rx(this.flatCoordinates,0,e,this.stride),this.changed()}}function dM(t,e,i,n,r){return!Fm(r,function(o){return!Do(t,e,i,n,o[0],o[1])})}function Do(t,e,i,n,r,o){let a=0,s=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const u=t[e],c=t[e+1];l<=o?c>o&&(u-s)*(o-l)-(r-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(r-s)*(c-l)<0&&a--,s=u,l=c}return a!==0}function Km(t,e,i,n,r,o){if(i.length===0||!Do(t,e,i[0],n,r,o))return!1;for(let a=1,s=i.length;a<s;++a)if(Do(t,i[a-1],i[a],n,r,o))return!1;return!0}function Zm(t,e,i,n,r,o,a){let s,l,u,c,h,d,p;const f=r[o+1],g=[];for(let b=0,m=i.length;b<m;++b){const v=i[b];for(c=t[v-n],d=t[v-n+1],s=e;s<v;s+=n)h=t[s],p=t[s+1],(f<=d&&p<=f||d<=f&&f<=p)&&(u=(f-d)/(p-d)*(h-c)+c,g.push(u)),c=h,d=p}let y=NaN,_=-1/0;for(g.sort(Hn),c=g[0],s=1,l=g.length;s<l;++s){h=g[s];const b=Math.abs(h-c);b>_&&(u=(c+h)/2,Km(t,e,i,n,u,f)&&(y=u,_=b)),c=h}return isNaN(y)&&(y=r[o]),a?(a.push(y,f,_),a):[y,f,_]}function ux(t,e,i,n,r){let o=[];for(let a=0,s=i.length;a<s;++a){const l=i[a];o=Zm(t,e,l,n,r,2*a,o),e=l[l.length-1]}return o}function cx(t,e,i,n,r){let o;for(e+=n;e<i;e+=n)if(o=r(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}function sd(t,e,i,n,r){const o=Gb([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!Ut(r,o)&&(!!kn(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]||cx(t,e,i,n,function(a,s){return function(l,u,c){let h=!1;const d=Lf(l,u),p=Lf(l,c);if(d===ch||p===ch)h=!0;else{const f=l[0],g=l[1],y=l[2],_=l[3],b=u[0],m=u[1],v=c[0],S=c[1],C=(S-m)/(v-b);let k,L;p&Mf&&!(d&Mf)&&(k=v-(S-_)/C,h=k>=f&&k<=y),h||!(p&kf)||d&kf||(L=S-(v-y)*C,h=L>=g&&L<=_),h||!(p&Tf)||d&Tf||(k=v-(S-g)/C,h=k>=f&&k<=y),h||!(p&Ef)||d&Ef||(L=S-(v-f)*C,h=L>=g&&L<=_)}return h}(r,a,s)}))}function hx(t,e,i,n,r){return!!sd(t,e,i,n,r)||!!Do(t,e,i,n,r[0],r[1])||!!Do(t,e,i,n,r[0],r[3])||!!Do(t,e,i,n,r[2],r[1])||!!Do(t,e,i,n,r[2],r[3])}function dx(t,e,i,n,r){if(!hx(t,e,i[0],n,r))return!1;if(i.length===1)return!0;for(let o=1,a=i.length;o<a;++o)if(dM(t,i[o-1],i[o],n,r)&&!sd(t,i[o-1],i[o],n,r))return!1;return!0}function pM(t,e,i,n){for(;e<i-n;){for(let r=0;r<n;++r){const o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function Qm(t,e,i,n){let r=0,o=t[i-n],a=t[i-n+1];for(;e<i;e+=n){const s=t[e],l=t[e+1];r+=(s-o)*(l+a),o=s,a=l}return r===0?void 0:r>0}function Jm(t,e,i,n,r){r=r!==void 0&&r;for(let o=0,a=i.length;o<a;++o){const s=i[o],l=Qm(t,e,s,n);if(o===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=s}return!0}function px(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const s=i[o];if(!Jm(t,e,s,n,r))return!1;s.length&&(e=s[s.length-1])}return!0}function mh(t,e,i,n,r){r=r!==void 0&&r;for(let o=0,a=i.length;o<a;++o){const s=i[o],l=Qm(t,e,s,n);(o===0?r&&l||!r&&!l:r&&!l||!r&&l)&&pM(t,e,s,n),e=s}return e}function zf(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o)e=mh(t,e,i[o],n,r);return e}function fx(t,e){const i=[];let n,r=0,o=0;for(let a=0,s=e.length;a<s;++a){const l=e[a],u=Qm(t,r,l,2);if(n===void 0&&(n=u),u===n)i.push(e.slice(o,a+1));else{if(i.length===0)continue;i[i.length-1].push(e[o])}o=a+1,r=l}return i}class Gi extends ho{constructor(e,i,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&n?(this.setFlatCoordinates(i,e),this.ends_=n):this.setCoordinates(e,i)}appendLinearRing(e){this.flatCoordinates?Wn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Gi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,i,n,r){return r<pa(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Xm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,i,n,r))}containsXY(e,i){return Km(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,i)}getArea(){return lx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let i;return e!==void 0?(i=this.getOrientedFlatCoordinates().slice(),mh(i,0,this.ends_,this.stride,e)):i=this.flatCoordinates,Yl(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=$i(this.getExtent());this.flatInteriorPoint_=Zm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new un(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Kl(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,i=this.flatCoordinates,n=this.ends_,r=[];let o=0;for(let a=0,s=n.length;a<s;++a){const l=n[a],u=new Kl(i.slice(o,l),e);r.push(u),o=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Jm(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=mh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const i=[],n=[];return i.length=Ym(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),i,0,n),new Gi(i,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return dx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Xl(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function ey(t){if(fa(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i];return new Gi(o,"XY",[o.length])}function Hu(t,e){setTimeout(function(){t(e)},0)}function fM(t){return!(t.sourceCenter&&t.targetCenter&&!ph(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Gd(t,e,i,n,r){const o=Math.cos(-r);let a=Math.sin(-r),s=t[0]*o-t[1]*a,l=t[1]*o+t[0]*a;return s+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,a=-a,[s*o-l*a,l*o+s*a]}var Wi=class extends gn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Vd(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Qb(),t.center&&(t.center=bn(t.center,this.projection_)),t.extent&&(t.extent=Nn(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in vn)delete e[a];this.setProperties(e,!0);const i=function(a){let s,l,u,c=a.minZoom!==void 0?a.minZoom:0,h=a.maxZoom!==void 0?a.maxZoom:28;const d=a.zoomFactor!==void 0?a.zoomFactor:2,p=a.multiWorld!==void 0&&a.multiWorld,f=a.smoothResolutionConstraint===void 0||a.smoothResolutionConstraint,g=a.showFullExtent!==void 0&&a.showFullExtent,y=Vd(a.projection,"EPSG:3857"),_=y.getExtent();let b=a.constrainOnlyCenter,m=a.extent;if(p||m||!y.isGlobal()||(b=!1,m=_),a.resolutions!==void 0){const v=a.resolutions;l=v[c],u=v[h]!==void 0?v[h]:v[v.length-1],s=a.constrainResolution?function(S,C,k,L){return C=C===void 0||C,function(A,q,P,T){if(A!==void 0){const R=S[0],M=S[S.length-1],I=k?Ff(R,k,P,L):R;if(T)return C?Af(A,I,M):Dt(A,M,I);const E=Math.min(I,A),O=Math.floor(sh(S,E,q));return S[O]>I&&O<S.length-1?S[O+1]:S[O]}}}(v,f,!b&&m,g):X0(l,u,f,!b&&m,g)}else{const v=(_?Math.max(rt(_),Yt(_)):360*br.degrees/y.getMetersPerUnit())/Pm/Math.pow(2,0),S=v/Math.pow(2,28);l=a.maxResolution,l!==void 0?c=0:l=v/Math.pow(d,c),u=a.minResolution,u===void 0&&(u=a.maxZoom!==void 0?a.maxResolution!==void 0?l/Math.pow(d,h):v/Math.pow(d,h):S),h=c+Math.floor(Math.log(l/u)/Math.log(d)),u=l/Math.pow(d,h-c),s=a.constrainResolution?function(C,k,L,A,q,P){return A=A===void 0||A,L=L!==void 0?L:0,function(T,R,M,I){if(T!==void 0){const E=q?Ff(k,q,M,P):k;if(I)return A?Af(T,E,L):Dt(T,L,E);const O=1e-9,V=Math.ceil(Math.log(k/E)/Math.log(C)-O),B=-R*(.5-O)+.5,F=Math.min(E,T),H=Math.floor(Math.log(k/F)/Math.log(C)+B),ee=Math.max(V,H);return Dt(k/Math.pow(C,ee),L,E)}}}(d,l,u,f,!b&&m,g):X0(l,u,f,!b&&m,g)}return{constraint:s,maxResolution:l,minResolution:u,minZoom:c,zoomFactor:d}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(a){if(a.extent!==void 0){const l=a.smoothExtentConstraint===void 0||a.smoothExtentConstraint;return U0(a.extent,a.constrainOnlyCenter,l)}const s=Vd(a.projection,"EPSG:3857");if(a.multiWorld!==!0&&s.isGlobal()){const l=s.getExtent().slice();return l[0]=-1/0,l[2]=1/0,U0(l,!1,!1)}return lM}(t),r=i.constraint,o=function(a){if(a.enableRotation===void 0||a.enableRotation){const s=a.constrainRotation;return s===void 0||s===!0?function(l){const u=Wo(5);return function(c,h){return h||c===void 0?c:Math.abs(c)<=u?0:c}}():s===!1?Y0:typeof s=="number"?function(l){const u=2*Math.PI/l;return function(c,h){return h?c:c!==void 0?c=Math.floor(c/u+.5)*u:void 0}}(s):Y0}return Vm}(t);this.constraints_={center:n,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(n[3]-e[3]+e[1]-n[1]),a=r/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=bn(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=bn(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&typeof arguments[i-1]=="function"&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const u=arguments[n];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(n===i)return void(e&&Hu(e,!0));let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_;const l=[];for(;n<i;++n){const u=arguments[n],c={start:r,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||uM,callback:e};if(u.center&&(c.sourceCenter=o,c.targetCenter=u.center.slice(),o=c.targetCenter),u.zoom!==void 0?(c.sourceResolution=a,c.targetResolution=this.getResolutionForZoom(u.zoom),a=c.targetResolution):u.resolution&&(c.sourceResolution=a,c.targetResolution=u.resolution,a=c.targetResolution),u.rotation!==void 0){c.sourceRotation=s;const h=Uo(u.rotation-s+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=s+h,s=c.targetRotation}fM(c)?c.complete=!0:r+=c.duration,l.push(c)}this.animations_.push(l),this.setHint(Zi,1),this.updateAnimations_()}getAnimating(){return this.hints_[Zi]>0}getInteracting(){return this.hints_[En]>0}cancelAnimations(){let t;this.setHint(Zi,-this.hints_[Zi]);for(let e=0,i=this.animations_.length;e<i;++e){const n=this.animations_[e];if(n[0].callback&&Hu(n[0].callback,!1),!t)for(let r=0,o=n.length;r<o;++r){const a=n[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let r=!0;for(let o=0,a=n.length;o<a;++o){const s=n[o];if(s.complete)continue;const l=t-s.start;let u=s.duration>0?l/s.duration:1;u>=1?(s.complete=!0,u=1):r=!1;const c=s.easing(u);if(s.sourceCenter){const h=s.sourceCenter[0],d=s.sourceCenter[1],p=s.targetCenter[0],f=s.targetCenter[1];this.nextCenter_=s.targetCenter;const g=h+c*(p-h),y=d+c*(f-d);this.targetCenter_=[g,y]}if(s.sourceResolution&&s.targetResolution){const h=c===1?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){const d=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(h,0,d,!0);this.targetCenter_=this.calculateCenterZoom(p,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(s.sourceRotation!==void 0&&s.targetRotation!==void 0){const h=c===1?Uo(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){const d=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(d,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(r){this.animations_[i]=null,this.setHint(Zi,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=n[0].callback;o&&Hu(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();var r,o;return n!==void 0&&(i=[n[0]-e[0],n[1]-e[1]],Om(i,t-this.getRotation()),o=e,(r=i)[0]+=+o[0],r[1]+=+o[1]),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),r=this.getResolution();return n!==void 0&&r!==void 0&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Rf(t,this.getProjection())}getCenterInternal(){return this.get(vn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return Nm(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();_t(e,"The view center is not defined");const i=this.getResolution();_t(i!==void 0,"The view resolution is not defined");const n=this.getRotation();return _t(n!==void 0,"The view rotation is not defined"),dh(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(vn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Nn(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=rt(t)/e[0],n=Yt(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(r){return e/Math.pow(t,r*n)}}getRotation(){return this.get(vn.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e;return function(o){return Math.log(i/o)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();n=Gd(n,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,i)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const r=sh(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const e=Dt(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Dt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(_t(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t))_t(!fa(t),"Cannot fit empty extent provided as `geometry`"),i=ey(Nn(t,this.getProjection()));else if(t.getType()==="Circle"){const n=Nn(t.getExtent(),this.getProjection());i=ey(n),i.rotate(this.getRotation(),$i(n))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,s=1/0,l=-1/0,u=-1/0;for(let c=0,h=r.length;c<h;c+=o){const d=r[c]*i-r[c+1]*n,p=r[c]*n+r[c+1]*i;a=Math.min(a,d),s=Math.min(s,p),l=Math.max(l,d),u=Math.max(u,p)}return[a,s,l,u]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0&&e.nearest;let o;o=e.minResolution!==void 0?e.minResolution:e.maxZoom!==void 0?this.getResolutionForZoom(e.maxZoom):0;const a=this.rotatedExtentForGeometry(t);let s=this.getResolutionForExtentInternal(a,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);s=isNaN(s)?o:Math.max(s,o),s=this.getConstrainedResolution(s,r?0:1);const l=this.getRotation(),u=Math.sin(l),c=Math.cos(l),h=$i(a);h[0]+=(n[1]-n[3])/2*s,h[1]+=(n[0]-n[2])/2*s;const d=h[0]*c-h[1]*u,p=h[1]*c+h[0]*u,f=this.getConstrainedCenter([d,p],s),g=e.callback?e.callback:ys;e.duration!==void 0?this.animateInternal({resolution:s,center:f,duration:e.duration,easing:e.easing},g):(this.targetResolution_=s,this.targetCenter_=f,this.applyTargetState_(!1,!0),Hu(g,!0))}centerOn(t,e,i){this.centerOnInternal(bn(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Gd(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),s=Gd(t,n,[a[0]/2+o[3],a[1]/2+o[0]],e,i);r=[t[0]-s[0],t[1]-s[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Rf(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&bn(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=bn(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&bn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,n,r));this.get(vn.ROTATION)!==n&&this.set(vn.ROTATION,n),this.get(vn.RESOLUTION)!==o&&(this.set(vn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(vn.CENTER)&&ph(this.get(vn.CENTER),a)||this.set(vn.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const n=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,n,o),s=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=s,void this.applyTargetState_();i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&ph(this.getCenterInternal(),s)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:s,resolution:a,duration:t,easing:Fs,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(En,1)}endInteraction(t,e,i){i=i&&bn(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(En,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};class As extends Db{constructor(e){const i=Object.assign({},e);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(jd,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get(jd)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||this.getSource().getState()!=="ready"||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Lt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=ht(e,Ft,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let i;const n=this.getMapInternal();let r;!e&&n&&(e=n.getView()),i=e instanceof Wi?{viewState:e.getState(),extent:e.calculateExtent()}:e,!i.layerStatesArray&&n&&(i.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),r=i.layerStatesArray?i.layerStatesArray.find(a=>a.layer===this):this.getLayerState();const o=this.getExtent();return ev(r,i.viewState)&&(!o||Ut(o,i.extent))}getAttributions(e){if(!this.isVisible(e))return[];const i=this.getSource()?.getAttributions();if(!i)return[];let n=i(e instanceof Wi?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}render(e,i){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,i){}renderDeferred(e){const i=this.getRenderer();i&&i.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(F0,e)}getMapInternal(){return this.get(F0)}setMap(e){this.mapPrecomposeKey_&&(Lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Lt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ht(e,jb,this.handlePrecompose_,this),this.mapRenderKey_=ht(this,Ft,e.render,e),this.changed())}handlePrecompose_(e){const i=e.frameState.layerStatesArray,n=this.getLayerState(!1);_t(!i.some(r=>r.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(n)}setSource(e){this.set(jd,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function ev(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}function gx(t,e,i=0,n=t.length-1,r=gM){for(;n>i;){if(n-i>600){const l=n-i+1,u=e-i+1,c=Math.log(l),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1);gx(t,e,Math.max(i,Math.floor(e-u*h/l+d)),Math.min(n,Math.floor(e+(l-u)*h/l+d)),r)}const o=t[e];let a=i,s=n;for(Ys(t,i,e),r(t[n],o)>0&&Ys(t,i,n);a<s;){for(Ys(t,a,s),a++,s--;r(t[a],o)<0;)a++;for(;r(t[s],o)>0;)s--}r(t[i],o)===0?Ys(t,i,s):(s++,Ys(t,s,n)),s<=e&&(i=s+1),e<=s&&(n=s-1)}}function Ys(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function gM(t,e){return t<e?-1:t>e?1:0}class mx{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let i=this.data;const n=[];if(!Uu(e,i))return n;const r=this.toBBox,o=[];for(;i;){for(let a=0;a<i.children.length;a++){const s=i.children[a],l=i.leaf?r(s):s;Uu(e,l)&&(i.leaf?n.push(s):Wd(e,l)?this._all(s,n):o.push(s))}i=o.pop()}return n}collides(e){let i=this.data;if(!Uu(e,i))return!1;const n=[];for(;i;){for(let r=0;r<i.children.length;r++){const o=i.children[r],a=i.leaf?this.toBBox(o):o;if(Uu(e,a)){if(i.leaf||Wd(e,a))return!0;n.push(o)}}i=n.pop()}return!1}load(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ja([]),this}remove(e,i){if(!e)return this;let n=this.data;const r=this.toBBox(e),o=[],a=[];let s,l,u;for(;n||o.length;){if(n||(n=o.pop(),l=o[o.length-1],s=a.pop(),u=!0),n.leaf){const c=mM(e,n.children,i);if(c!==-1)return n.children.splice(c,1),o.push(n),this._condense(o),this}u||n.leaf||!Wd(n,r)?l?(s++,n=l.children[s],u=!1):n=null:(o.push(n),a.push(s),s=0,l=n,n=n.children[0])}return this}toBBox(e){return e}compareMinX(e,i){return e.minX-i.minX}compareMinY(e,i){return e.minY-i.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,i){const n=[];for(;e;)e.leaf?i.push(...e.children):n.push(...e.children),e=n.pop();return i}_build(e,i,n,r){const o=n-i+1;let a,s=this._maxEntries;if(o<=s)return a=ja(e.slice(i,n+1)),ba(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=ja([]),a.leaf=!1,a.height=r;const l=Math.ceil(o/s),u=l*Math.ceil(Math.sqrt(s));ty(e,i,n,u,this.compareMinX);for(let c=i;c<=n;c+=u){const h=Math.min(c+u-1,n);ty(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const p=Math.min(d+l-1,h);a.children.push(this._build(e,d,p,r-1))}}return ba(a,this.toBBox),a}_chooseSubtree(e,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){let o,a=1/0,s=1/0;for(let l=0;l<i.children.length;l++){const u=i.children[l],c=Hd(u),h=_M(e,u)-c;h<s?(s=h,a=c<a?c:a,o=u):h===s&&c<a&&(a=c,o=u)}i=o||i.children[0]}return i}_insert(e,i,n){const r=n?e:this.toBBox(e),o=[],a=this._chooseSubtree(r,this.data,i,o);for(a.children.push(e),yl(a,r);i>=0&&o[i].children.length>this._maxEntries;)this._split(o,i),i--;this._adjustParentBBoxes(r,o,i)}_split(e,i){const n=e[i],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const a=this._chooseSplitIndex(n,o,r),s=ja(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,ba(n,this.toBBox),ba(s,this.toBBox),i?e[i-1].children.push(s):this._splitRoot(n,s)}_splitRoot(e,i){this.data=ja([e,i]),this.data.height=e.height+1,this.data.leaf=!1,ba(this.data,this.toBBox)}_chooseSplitIndex(e,i,n){let r,o=1/0,a=1/0;for(let s=i;s<=n-i;s++){const l=vl(e,0,s,this.toBBox),u=vl(e,s,n,this.toBBox),c=bM(l,u),h=Hd(l)+Hd(u);c<o?(o=c,r=s,a=h<a?h:a):c===o&&h<a&&(a=h,r=s)}return r||n-i}_chooseSplitAxis(e,i,n){const r=e.leaf?this.compareMinX:vM,o=e.leaf?this.compareMinY:yM;this._allDistMargin(e,i,n,r)<this._allDistMargin(e,i,n,o)&&e.children.sort(r)}_allDistMargin(e,i,n,r){e.children.sort(r);const o=this.toBBox,a=vl(e,0,i,o),s=vl(e,n-i,n,o);let l=Wu(a)+Wu(s);for(let u=i;u<n-i;u++){const c=e.children[u];yl(a,e.leaf?o(c):c),l+=Wu(a)}for(let u=n-i-1;u>=i;u--){const c=e.children[u];yl(s,e.leaf?o(c):c),l+=Wu(s)}return l}_adjustParentBBoxes(e,i,n){for(let r=n;r>=0;r--)yl(i[r],e)}_condense(e){for(let i,n=e.length-1;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():ba(e[n],this.toBBox)}}function mM(t,e,i){if(!i)return e.indexOf(t);for(let n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function ba(t,e){vl(t,0,t.children.length,e,t)}function vl(t,e,i,n,r){r||(r=ja(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<i;o++){const a=t.children[o];yl(r,t.leaf?n(a):a)}return r}function yl(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function vM(t,e){return t.minX-e.minX}function yM(t,e){return t.minY-e.minY}function Hd(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Wu(t){return t.maxX-t.minX+(t.maxY-t.minY)}function _M(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function bM(t,e){const i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,o-n)}function Wd(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Uu(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ja(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ty(t,e,i,n,r){const o=[e,i];for(;o.length;){if((i=o.pop())-(e=o.pop())<=n)continue;const a=e+Math.ceil((i-e)/n/2)*n;gx(t,a,e,i,r),o.push(e,a,a,i)}}var Hi=0,qn=1,At=2,Ln=3,vx=4;function iy(t){return t[0]>0&&t[1]>0}function yx(t,e,i){return i===void 0&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function pi(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class ld{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=pi(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ld({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Xe()}getImage(e){return Xe()}getHitDetectionImage(){return Xe()}getPixelRatio(e){return 1}getImageState(){return Xe()}getImageSize(){return Xe()}getOrigin(){return Xe()}getSize(){return Xe()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=pi(e)}listenImageChange(e){Xe()}load(){Xe()}unlistenImageChange(e){Xe()}ready(){return Promise.resolve()}}var Zl={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},wi={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};wi.max=wi.whitepoint[2].D65,wi.rgb=function(t,e){e=e||wi.whitepoint[2].E;var i,n,r,o=t[0]/e[0],a=t[1]/e[1],s=t[2]/e[2];return n=-.96924363628087*o+1.87596750150772*a+.041555057407175*s,r=.055630079696993*o+-.20397695888897*a+1.056971514242878*s,i=(i=3.240969941904521*o+-1.537383177570093*a+-.498610760293*s)>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},Zl.xyz=function(t,e){var i=t[0]/255,n=t[1]/255,r=t[2]/255,o=.21263900587151*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.71516867876775*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.072192315360733*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92),a=.019330818715591*i+.11919477979462*n+.95053215224966*r;return[(.41239079926595*i+.35758433938387*n+.18048078840183*r)*(e=e||wi.whitepoint[2].E)[0],o*e[1],a*e[2]]};var Df={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,i){var n,r,o,a,s,l,u,c,h;return o=t[0],a=t[1],s=t[2],o===0?[0,0,0]:(e=e||"D65",i=i||2,n=a/(13*o)+4*(u=wi.whitepoint[i][e][0])/(u+15*(c=wi.whitepoint[i][e][1])+3*(h=wi.whitepoint[i][e][2]))||0,r=s/(13*o)+9*c/(u+15*c+3*h)||0,[9*(l=o>8?c*Math.pow((o+16)/116,3):c*o*.0011070564598794539)*n/(4*r)||0,l,l*(12-3*n-20*r)/(4*r)||0])}};wi.luv=function(t,e,i){var n,r,o,a,s,l,u,c,h,d,p;e=e||"D65",i=i||2,d=4*(u=wi.whitepoint[i][e][0])/(u+15*(c=wi.whitepoint[i][e][1])+3*(h=wi.whitepoint[i][e][2])),p=9*c/(u+15*c+3*h),n=4*(a=t[0])/(a+15*(s=t[1])+3*(l=t[2]))||0,r=9*s/(a+15*s+3*l)||0;var f=s/c;return[o=f<=.008856451679035631?903.2962962962961*f:116*Math.pow(f,1/3)-16,13*o*(n-d),13*o*(r-p)]};var _x={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,i=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]},xyz:function(t){return Df.xyz(_x.luv(t))}};Df.lchuv=function(t){var e=t[0],i=t[1],n=t[2],r=Math.sqrt(i*i+n*n),o=360*Math.atan2(n,i)/2/Math.PI;return o<0&&(o+=360),[e,r,o]},wi.lchuv=function(t){return Df.lchuv(wi.luv(t))};var ny={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ry={red:0,orange:60,yellow:120,green:180,blue:240,purple:300},Ud={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,i,n,r,o,a=t[0]/360,s=t[1]/100,l=t[2]/100,u=0;if(s===0)return[o=255*l,o,o];for(e=2*l-(i=l<.5?l*(1+s):l+s-l*s),r=[0,0,0];u<3;)(n=a+1/3*-(u-1))<0?n++:n>1&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,r[u++]=255*o;return r}};function xM(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var i=function(o){var a,s,l=[],u=1;if(typeof o=="number")return{space:"rgb",values:[o>>>16,(65280&o)>>>8,255&o],alpha:1};if(typeof o=="number")return{space:"rgb",values:[o>>>16,(65280&o)>>>8,255&o],alpha:1};if(o=String(o).toLowerCase(),ny[o])l=ny[o].slice(),s="rgb";else if(o==="transparent")u=0,s="rgb",l=[0,0,0];else if(o[0]==="#"){var c=o.slice(1),h=c.length;u=1,h<=4?(l=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],h===4&&(u=parseInt(c[3]+c[3],16)/255)):(l=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],h===8&&(u=parseInt(c[6]+c[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),s="rgb"}else if(a=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(o)){var d=a[1],p=(s=d.replace(/a$/,""))==="cmyk"?4:s==="gray"?1:3;l=a[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=l.shift()),l=l.map(function(f,g){if(f[f.length-1]==="%")return f=parseFloat(f)/100,g===3?f:s==="rgb"?255*f:s[0]==="h"?100*f:s[0]!=="l"||g?s==="lab"?125*f:s==="lch"?g<2?150*f:360*f:s[0]!=="o"||g?s==="oklab"?.4*f:s==="oklch"?g<2?.4*f:360*f:f:f:100*f;if(s[g]==="h"||g===2&&s[s.length-1]==="h"){if(ry[f]!==void 0)return ry[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return 360*parseFloat(f);if(f.endsWith("grad"))return 360*parseFloat(f)/400;if(f.endsWith("rad"))return 180*parseFloat(f)/Math.PI}return f==="none"?0:parseFloat(f)}),u=l.length>p?l.pop():1}else/[0-9](?:\s|\/|,)/.test(o)&&(l=o.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),s=o.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:s,values:l,alpha:u}}(t);if(!i.space)return[];const n=i.space[0]==="h"?Ud.min:Zl.min,r=i.space[0]==="h"?Ud.max:Zl.max;return(e=Array(3))[0]=Math.min(Math.max(i.values[0],n[0]),r[0]),e[1]=Math.min(Math.max(i.values[1],n[1]),r[1]),e[2]=Math.min(Math.max(i.values[2],n[2]),r[2]),i.space[0]==="h"&&(e=Ud.rgb(e)),e.push(Math.min(Math.max(i.alpha,0),1)),e}Zl.hsl=function(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(n,r,o),s=Math.max(n,r,o),l=s-a;return s===a?e=0:n===s?e=(r-o)/l:r===s?e=2+(o-n)/l:o===s&&(e=4+(n-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(a+s)/2,[e,100*(s===a?0:i<=.5?l/(s+a):l/(2-s-a)),100*i]};const tv=[NaN,NaN,NaN,0],Ks={};let Xd=0;function wM(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function oy(t){const e=wi.lchuv(Zl.xyz(t));return e[3]=t[3],e}function iv(t){if(t==="none")return tv;if(Ks.hasOwnProperty(t))return Ks[t];if(Xd>=1024){let i=0;for(const n in Ks)3&i++||(delete Ks[n],--Xd)}const e=xM(t);if(e.length!==4)throw new Error('failed to parse "'+t+'" as color');for(const i of e)if(isNaN(i))throw new Error('failed to parse "'+t+'" as color');return bx(e),Ks[t]=e,++Xd,e}function Ql(t){return Array.isArray(t)?t:iv(t)}function bx(t){return t[0]=Dt(t[0]+.5|0,0,255),t[1]=Dt(t[1]+.5|0,0,255),t[2]=Dt(t[2]+.5|0,0,255),t[3]=Dt(t[3],0,1),t}function nv(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(t[3]===void 0?1:Math.round(1e3*t[3])/1e3)+")"}const Hr=typeof navigator<"u"&&navigator.userAgent!==void 0?navigator.userAgent.toLowerCase():"",SM=Hr.includes("firefox");Hr.includes("safari")&&!Hr.includes("chrom")&&(Hr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Hr));const CM=Hr.includes("webkit")&&!Hr.includes("edge"),xx=Hr.includes("macintosh"),wx=typeof devicePixelRatio<"u"?devicePixelRatio:1,Sx=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Cx=typeof Image<"u"&&Image.prototype.decode,Mx=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function Ot(t,e,i,n){let r;return r=i&&i.length?i.shift():Sx?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",n)}let Yd;function vh(){return Yd||(Yd=Ot(1,1)),Yd}function na(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function MM(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),e}function kM(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),e}function ay(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function kx(t){for(;t.lastChild;)t.lastChild.remove()}class rv extends wu{constructor(e,i,n,r){super(),this.extent=e,this.pixelRatio_=n,this.resolution=i,this.state=typeof r=="function"?Hi:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Ft)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Hi&&this.loader){this.state=qn,this.changed();const e=this.getResolution(),i=Array.isArray(e)?e[0]:e;_s(()=>this.loader(this.getExtent(),i,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=At}).catch(n=>{this.state=Ln}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function TM(t,e){return e&&(t.src=e),t.src&&Cx?new Promise((i,n)=>t.decode().then(()=>i(t)).catch(r=>t.complete&&t.width?i(t):n(r))):function(i,n){return new Promise((r,o)=>{function a(){l(),r(i)}function s(){l(),o(new Error("Image load error"))}function l(){i.removeEventListener("load",a),i.removeEventListener("error",s)}i.addEventListener("load",a),i.addEventListener("error",s)})}(t)}function Kd(t,e,i){return e+":"+t+":"+(i?Ql(i):"null")}const Vn=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];3&t++||i.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const n=Kd(t,e,i);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,i){const n=Kd(t,e,i);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,i,n,r){const o=Kd(t,e,i),a=o in this.cache_;this.cache_[o]=n,r&&(n.getImageState()===Hi&&n.load(),n.getImageState()===qn?n.ready().then(()=>{this.patternCache_[o]=vh().createPattern(n.getImage(1),"repeat")}):this.patternCache_[o]=vh().createPattern(n.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};let Zs=null;class EM extends wu{constructor(e,i,n,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Hi:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===At){Zs||(Zs=Ot(1,1,void 0,{willReadFrequently:!0})),Zs.drawImage(this.image_,0,0);try{Zs.getImageData(0,0,1,1),this.tainted_=!1}catch{Zs=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ft)}handleImageError_(){this.imageState_=Ln,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=At,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],i=this.size_[1],n=Ot(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Hi){this.image_||this.initializeImage_(),this.imageState_=qn;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&TM(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==At)return;const i=this.image_,n=Ot(Math.ceil(i.width*e),Math.ceil(i.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(i,0,0),n.globalCompositeOperation="multiply",n.fillStyle=function(o){return typeof o=="string"?o:nv(o)}(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(i,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===At||this.imageState_===Ln)e();else{const i=()=>{this.imageState_!==At&&this.imageState_!==Ln||(this.removeEventListener(Ft,i),e())};this.addEventListener(Ft,i)}})),this.ready_}}function ov(t,e,i,n,r,o){let a=e===void 0?void 0:Vn.get(e,i,r);return a||(a=new EM(t,t&&"src"in t?t.src||void 0:e,i,n,r),Vn.set(e,i,r,a,o)),o&&a&&!Vn.getPattern(e,i,r)&&Vn.set(e,i,r,a,o),a}function $n(t){return t?Array.isArray(t)?nv(t):typeof t=="object"&&"src"in t?function(e){if(!e.offset||!e.size)return Vn.getPattern(e.src,"anonymous",e.color);const i=e.src+":"+e.offset,n=Vn.getPattern(i,void 0,e.color);if(n)return n;const r=Vn.get(e.src,"anonymous",null);if(r.getImageState()!==At)return null;const o=Ot(e.size[0],e.size[1]);return o.drawImage(r.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),ov(o.canvas,i,void 0,At,e.color,!0),Vn.getPattern(i,void 0,e.color)}(t):t:null}const Xu="ol-hidden",ku="ol-unselectable",av="ol-control",sy="ol-collapsed",LM=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),ly=["style","variant","weight","size","lineHeight","family"],Tx=function(t){const e=t.match(LM);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=ly.length;n<r;++n){const o=e[n+1];o!==void 0&&(i[ly[n]]=o)}return i.families=i.family.split(/,\s?/),i},Ex="10px sans-serif",ji="#000",ws="round",mr=[],Ss="round",Jl="#000",eu="center",yh="middle",jo=[0,0,0,0],Dn=new gn;let jf,Ba=null;const Bf={},Lx=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(l,u,c){let h=!0;for(let d=0;d<i;++d){const p=e[d];if(o=_h(l+" "+u+" "+t+p,n),c!=p){const f=_h(l+" "+u+" "+t+c+","+p,n);h=h&&f!=o}}return!!h}function s(){let l=!0;const u=Dn.getKeys();for(let c=0,h=u.length;c<h;++c){const d=u[c];if(Dn.get(d)<100){const[p,f,g]=d.split(`
`);a(p,f,g)?(xu(Bf),Ba=null,jf=void 0,Dn.set(d,100)):(Dn.set(d,Dn.get(d)+1,!0),l=!1)}}l&&(clearInterval(r),r=void 0)}return function(l){const u=Tx(l);if(!u)return;const c=u.families;for(let h=0,d=c.length;h<d;++h){const p=c[h],f=u.style+`
`+u.weight+`
`+p;Dn.get(f)===void 0&&(Dn.set(f,100,!0),a(u.style,u.weight,p)||(Dn.set(f,0,!0),r===void 0&&(r=setInterval(s,32))))}}}(),IM=function(){let t;return function(e){let i=Bf[e];if(i==null){if(Sx){const n=Tx(e),r=Ix(e,"g");i=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);Bf[e]=i}return i}}();function Ix(t,e){return Ba||(Ba=Ot(1,1)),t!=jf&&(Ba.font=t,jf=Ba.font),Ba.measureText(e)}function _h(t,e){return Ix(t,e).width}function uy(t,e,i){if(e in i)return i[e];const n=e.split(`
`).reduce((r,o)=>Math.max(r,_h(t,o)),0);return i[e]=n,n}function PM(t,e,i,n,r,o,a,s,l,u,c){t.save(),i!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=i:t.globalAlpha*=i),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(h,d){const p=h.contextInstructions;for(let f=0,g=p.length;f<g;f+=2)Array.isArray(p[f+1])?d[p[f]].apply(d,p[f+1]):d[p[f]]=p[f+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(n,r,o,a,s,0,0,a,s)):t.drawImage(n,r,o,a,s,l,u,a*c[0],s*c[1]),t.restore()}class oo extends ld{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0&&e.rotateWithView,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?qn:At,this.imageState_===qn&&this.ready().then(()=>this.imageState_=At),this.render()}clone(){const e=this.getScale(),i=new oo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const e=this.size_,i=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-i[0]/n[0],e[1]/2+i[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let i=this.canvases_[e];if(!i){const n=this.renderOptions_,r=Ot(n.size*e,n.size*e);this.draw_(n,r,e),i=r.canvas,this.canvases_[e]=i}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,i,n){if(i===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return i;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const b=r;r=o,o=b}const a=this.radius2_===void 0?this.points_:2*this.points_,s=2*Math.PI/a,l=o*Math.sin(s),u=r-Math.sqrt(o*o-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if(e==="miter"&&h<=n)return h*i;const d=i/2/h,p=i/2*(u/c),f=Math.sqrt((r+d)*(r+d)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return 2*f;const g=r*Math.sin(s),y=o-Math.sqrt(r*r-g*g),_=Math.sqrt(g*g+y*y)/g;if(_<=n){const b=_*i/2-o-r;return 2*Math.max(f,b)}return 2*f}createRenderOptions(){let e,i=ws,n=Ss,r=0,o=null,a=0,s=0;this.stroke_&&(e=$n(this.stroke_.getColor()??Jl),s=this.stroke_.getWidth()??1,o=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Ss,i=this.stroke_.getLineCap()??ws,r=this.stroke_.getMiterLimit()??10);const l=this.calculateLineJoinSize_(n,s,r),u=Math.max(this.radius,this.radius2_||0);return{strokeStyle:e,strokeWidth:s,size:Math.ceil(2*u+l),lineCap:i,lineDash:o,lineDashOffset:a,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,i,n){if(i.scale(n,n),i.translate(e.size/2,e.size/2),this.createPath_(i),this.fill_){let r=this.fill_.getColor();r===null&&(r=ji),i.fillStyle=$n(r),i.fill()}e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineCap=e.lineCap,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())}createHitDetectionCanvas_(e){let i;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=Ql(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(i=Ot(e.size,e.size),this.drawHitDetectionCanvas_(e,i))}return i?i.canvas:this.getImage(1)}createPath_(e){let i=this.points_;const n=this.radius;if(i===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);const o=this.angle_-Math.PI/2,a=2*Math.PI/i;for(let s=0;s<i;s++){const l=o+s*a,u=s%2==0?n:r;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,i){i.translate(e.size/2,e.size/2),this.createPath_(i),i.fillStyle=ji,i.fill(),e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Rn extends oo{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0&&e.rotateWithView,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),i=new Rn({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(e){this.radius=e,this.render()}}class Zt{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Zt({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const i=ov(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===Hi&&i.load(),i.getImageState()===qn&&(this.patternImage_=i)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Vt{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Vt({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class qt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=hy,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new qt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(i){return i.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=hy,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let Zd=null;function cy(t,e){if(!Zd){const i=new Zt({color:"rgba(255,255,255,0.4)"}),n=new Vt({color:"#3399CC",width:1.25});Zd=[new qt({image:new Rn({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return Zd}function hy(t){return t.getGeometry()}function dy(t,e,i,n){return i!==void 0&&n!==void 0?[i/t,n/e]:i!==void 0?i/t:n!==void 0?n/e:1}class Cs extends ld{constructor(e){const i=(e=e||{}).opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0&&e.rotateWithView;super({opacity:i,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let s,l=e.src;if(_t(!(l!==void 0&&a),"`image` and `src` cannot be provided at the same time"),l!==void 0&&l.length!==0||!a||(l=a.src||et(a)),_t(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),_t(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`"),e.src!==void 0?s=Hi:a!==void 0&&(s="complete"in a?a.complete?a.src?At:Hi:qn:At),this.color_=e.color!==void 0?Ql(e.color):null,this.iconImage_=ov(a,l,this.crossOrigin_,s,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(dy(p[0],p[1],e.width,e.height))};return void this.listenImageChange(d)}}u!==void 0&&this.setScale(dy(u,c,e.width,e.height))}}clone(){let e,i,n;return this.initialOptions_?(i=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Cs({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:i,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),this.anchorOrigin_!="top-right"&&this.anchorOrigin_!="bottom-right"||(e[0]=-e[0]+r[0]),this.anchorOrigin_!="bottom-left"&&this.anchorOrigin_!="bottom-right"||(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const i=this.getDisplacement(),n=this.getScaleArray();return[e[0]-i[0]/n[0],e[1]+i[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;e=e.slice(),this.offsetOrigin_!="top-right"&&this.offsetOrigin_!="bottom-right"||(e[0]=n[0]-i[0]-e[0]),this.offsetOrigin_!="bottom-left"&&this.offsetOrigin_!="bottom-right"||(e[1]=n[1]-i[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:this.iconImage_.getImageState()==At?this.iconImage_.getSize()[0]*e[0]:void 0}getHeight(){const e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:this.iconImage_.getImageState()==At?this.iconImage_.getSize()[1]*e[1]:void 0}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ft,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ft,e)}ready(){return this.iconImage_.ready()}}class Yo{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=pi(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Zt({color:"#333"}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Yo({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=pi(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let Os=0;const Li=1<<Os++,ft=1<<Os++,Bi=1<<Os++,wn=1<<Os++,ra=1<<Os++,_l=1<<Os++,Yu=Math.pow(2,6)-1,sv={[Li]:"boolean",[ft]:"number",[Bi]:"string",[wn]:"color",[ra]:"number[]",[_l]:"size"},qM=Object.keys(sv).map(Number).sort(Hn);function bl(t){const e=[];for(const i of qM)xl(t,i)&&e.push(sv[i]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function xl(t,e){return(t&e)===e}function Lr(t,e){return t===e}class ri{constructor(e,i){if(!function(n){return n in sv}(e))throw new Error(`literal expressions must have a specific type, got ${bl(e)}`);this.type=e,this.value=i}}class RM{constructor(e,i,...n){this.type=e,this.operator=i,this.args=n}}function Px(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function gi(t,e,i){switch(typeof t){case"boolean":if(Lr(e,Bi))return new ri(Bi,t?"true":"false");if(!xl(e,Li))throw new Error(`got a boolean, but expected ${bl(e)}`);return new ri(Li,t);case"number":if(Lr(e,_l))return new ri(_l,pi(t));if(Lr(e,Li))return new ri(Li,!!t);if(Lr(e,Bi))return new ri(Bi,t.toString());if(!xl(e,ft))throw new Error(`got a number, but expected ${bl(e)}`);return new ri(ft,t);case"string":if(Lr(e,wn))return new ri(wn,iv(t));if(Lr(e,Li))return new ri(Li,!!t);if(!xl(e,Bi))throw new Error(`got a string, but expected ${bl(e)}`);return new ri(Bi,t)}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return function(n,r,o){const a=n[0],s=NM[a];if(!s)throw new Error(`unknown operator: ${a}`);return s(n,r,o)}(t,e,i);for(const n of t)if(typeof n!="number")throw new Error("expected an array of numbers");if(Lr(e,_l)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new ri(_l,t)}if(Lr(e,wn)){if(t.length===3)return new ri(wn,[...t,1]);if(t.length===4)return new ri(wn,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!xl(e,ra))throw new Error(`got an array of numbers, but expected ${bl(e)}`);return new ri(ra,t)}const Nf="get",Vf="var",qx="concat",Rx="geometry-type",FM="line-metric",$f="any",Gf="all",Hf="!",Fx="resolution",AM="zoom",OM="time",Wf="==",Uf="!=",Xf=">",Yf=">=",Kf="<",Zf="<=",Qf="*",Jf="/",eg="+",tg="-",ig="clamp",ng="%",rg="^",og="abs",ag="floor",sg="ceil",lg="round",ug="sin",cg="cos",hg="atan",dg="sqrt",Ax="match",pg="between",Ox="interpolate",fg="coalesce",zx="case",gg="in",mg="number",vg="string",zM="array",DM="color",Dx="id",jM="band",BM="palette",yg="to-string",_g="has",NM={[Nf]:Ue(tt(1,1/0),py),[Vf]:Ue(tt(1,1),function(t,e,i){const n=t[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return i.variables.add(n),[new ri(Bi,n)]}),[_g]:Ue(tt(1,1/0),py),[Dx]:Ue(function(t,e,i){i.featureId=!0},xa),[qx]:Ue(tt(2,1/0),St(Bi)),[Rx]:Ue(function(t,e,i){i.geometryType=!0},xa),[FM]:Ue(xa),[Fx]:Ue(xa),[AM]:Ue(xa),[OM]:Ue(xa),[$f]:Ue(tt(2,1/0),St(Li)),[Gf]:Ue(tt(2,1/0),St(Li)),[Hf]:Ue(tt(1,1),St(Li)),[Wf]:Ue(tt(2,2),St(Yu)),[Uf]:Ue(tt(2,2),St(Yu)),[Xf]:Ue(tt(2,2),St(ft)),[Yf]:Ue(tt(2,2),St(ft)),[Kf]:Ue(tt(2,2),St(ft)),[Zf]:Ue(tt(2,2),St(ft)),[Qf]:Ue(tt(2,1/0),fy),[fg]:Ue(tt(2,1/0),fy),[Jf]:Ue(tt(2,2),St(ft)),[eg]:Ue(tt(2,1/0),St(ft)),[tg]:Ue(tt(2,2),St(ft)),[ig]:Ue(tt(3,3),St(ft)),[ng]:Ue(tt(2,2),St(ft)),[rg]:Ue(tt(2,2),St(ft)),[og]:Ue(tt(1,1),St(ft)),[ag]:Ue(tt(1,1),St(ft)),[sg]:Ue(tt(1,1),St(ft)),[lg]:Ue(tt(1,1),St(ft)),[ug]:Ue(tt(1,1),St(ft)),[cg]:Ue(tt(1,1),St(ft)),[hg]:Ue(tt(1,2),St(ft)),[dg]:Ue(tt(1,1),St(ft)),[Ax]:Ue(tt(4,1/0),gy,function(t,e,i){const n=t.length-1,r=Bi|ft|Li,o=gi(t[1],r,i),a=gi(t[t.length-1],e,i),s=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const u=gi(t[l+2],o.type,i);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=gi(t[l+3],a.type,i);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[o,...s,a]}),[pg]:Ue(tt(3,3),St(ft)),[Ox]:Ue(tt(6,1/0),gy,function(t,e,i){const n=t[1];let r;switch(n[0]){case"linear":r=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const o=new ri(ft,r);let a;try{a=gi(t[2],ft,i)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const s=new Array(t.length-3);for(let l=0;l<s.length;l+=2){try{const u=gi(t[l+3],ft,i);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=gi(t[l+4],e,i);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[o,a,...s]}),[zx]:Ue(tt(3,1/0),function(t,e,i){const n=t[0],r=t.length-1;if(r%2==0)throw new Error(`expected an odd number of arguments for ${n}, got ${r} instead`)},function(t,e,i){const n=gi(t[t.length-1],e,i),r=new Array(t.length-1);for(let o=0;o<r.length-1;o+=2){try{const a=gi(t[o+1],Li,i);r[o]=a}catch(a){throw new Error(`failed to parse argument ${o} of case expression: ${a.message}`)}try{const a=gi(t[o+2],n.type,i);r[o+1]=a}catch(a){throw new Error(`failed to parse argument ${o+1} of case expression: ${a.message}`)}}return r[r.length-1]=n,r}),[gg]:Ue(tt(2,2),function(t,e,i){let n,r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],n=Bi}else n=ft;const o=new Array(r.length);for(let a=0;a<o.length;a++)try{const s=gi(r[a],n,i);o[a]=s}catch(s){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${s.message}`)}return[gi(t[1],n,i),...o]}),[mg]:Ue(tt(1,1/0),St(Yu)),[vg]:Ue(tt(1,1/0),St(Yu)),[zM]:Ue(tt(1,1/0),St(ft)),[DM]:Ue(tt(1,4),St(ft)),[jM]:Ue(tt(1,3),St(ft)),[BM]:Ue(tt(2,2),function(t,e,i){let n;try{n=gi(t[1],ft,i)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const r=t[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let a=0;a<o.length;a++){let s;try{s=gi(r[a],wn,i)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(s instanceof ri))throw new Error(`the palette color at index ${a} must be a literal value`);o[a]=s}return[n,...o]}),[yg]:Ue(tt(1,1),St(Li|ft|Bi|wn))};function py(t,e,i){const n=t.length-1,r=new Array(n);for(let o=0;o<n;++o){const a=t[o+1];switch(typeof a){case"number":r[o]=new ri(ft,a);break;case"string":r[o]=new ri(Bi,a);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}o===0&&i.properties.add(String(a))}return r}function xa(t,e,i){const n=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function tt(t,e){return function(i,n,r){const o=i[0],a=i.length-1;if(t===e){if(a!==t)throw new Error(`expected ${t} argument${t===1?"":"s"} for ${o}, got ${a}`)}else if(a<t||a>e)throw new Error(`expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${o}, got ${a}`)}}function fy(t,e,i){const n=t.length-1,r=new Array(n);for(let o=0;o<n;++o){const a=gi(t[o+1],e,i);r[o]=a}return r}function St(t){return function(e,i,n){const r=e.length-1,o=new Array(r);for(let a=0;a<r;++a){const s=gi(e[a+1],t,n);o[a]=s}return o}}function gy(t,e,i){const n=t[0],r=t.length-1;if(r%2==1)throw new Error(`expected an even number of arguments for operation ${n}, got ${r} instead`)}function Ue(...t){return function(e,i,n){const r=e[0];let o;for(let a=0;a<t.length;a++){const s=t[a](e,i,n);if(a==t.length-1){if(!s)throw new Error("expected last argument validator to return the parsed args");o=s}}return new RM(i,r,...o)}}function jx(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return jx(t.getGeometries()[0]);default:return""}}function kr(t,e,i){return yn(gi(t,e,i))}function yn(t,e){if(t instanceof ri){if(t.type===wn&&typeof t.value=="string"){const n=iv(t.value);return function(){return n}}return function(){return t.value}}const i=t.operator;switch(i){case mg:case vg:case fg:return function(n){const r=n.operator,o=n.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=yn(n.args[s]);switch(r){case fg:return s=>{for(let l=0;l<o;++l){const u=a[l](s);if(u!=null)return u}throw new Error("Expected one of the values to be non-null")};case mg:case vg:return s=>{for(let l=0;l<o;++l){const u=a[l](s);if(typeof u===r)return u}throw new Error(`Expected one of the values to be a ${r}`)};default:throw new Error(`Unsupported assertion operator ${r}`)}}(t);case Nf:case Vf:case _g:return function(n){const r=n.args[0],o=r.value;switch(n.operator){case Nf:return a=>{const s=n.args;let l=a.properties[o];for(let u=1,c=s.length;u<c;++u)l=l[s[u].value];return l};case Vf:return a=>a.variables[o];case _g:return a=>{const s=n.args;if(!(o in a.properties))return!1;let l=a.properties[o];for(let u=1,c=s.length;u<c;++u){const h=s[u].value;if(!l||!Object.hasOwn(l,h))return!1;l=l[h]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}(t);case Dx:return n=>n.featureId;case Rx:return n=>n.geometryType;case qx:{const n=t.args.map(r=>yn(r));return r=>"".concat(...n.map(o=>o(r).toString()))}case Fx:return n=>n.resolution;case $f:case Gf:case pg:case gg:case Hf:return function(n){const r=n.operator,o=n.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=yn(n.args[s]);switch(r){case $f:return s=>{for(let l=0;l<o;++l)if(a[l](s))return!0;return!1};case Gf:return s=>{for(let l=0;l<o;++l)if(!a[l](s))return!1;return!0};case pg:return s=>{const l=a[0](s),u=a[1](s),c=a[2](s);return l>=u&&l<=c};case gg:return s=>{const l=a[0](s);for(let u=1;u<o;++u)if(l===a[u](s))return!0;return!1};case Hf:return s=>!a[0](s);default:throw new Error(`Unsupported logical operator ${r}`)}}(t);case Wf:case Uf:case Kf:case Zf:case Xf:case Yf:return function(n){const r=n.operator,o=yn(n.args[0]),a=yn(n.args[1]);switch(r){case Wf:return s=>o(s)===a(s);case Uf:return s=>o(s)!==a(s);case Kf:return s=>o(s)<a(s);case Zf:return s=>o(s)<=a(s);case Xf:return s=>o(s)>a(s);case Yf:return s=>o(s)>=a(s);default:throw new Error(`Unsupported comparison operator ${r}`)}}(t);case Qf:case Jf:case eg:case tg:case ig:case ng:case rg:case og:case ag:case sg:case lg:case ug:case cg:case hg:case dg:return function(n){const r=n.operator,o=n.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=yn(n.args[s]);switch(r){case Qf:return s=>{let l=1;for(let u=0;u<o;++u)l*=a[u](s);return l};case Jf:return s=>a[0](s)/a[1](s);case eg:return s=>{let l=0;for(let u=0;u<o;++u)l+=a[u](s);return l};case tg:return s=>a[0](s)-a[1](s);case ig:return s=>{const l=a[0](s),u=a[1](s);if(l<u)return u;const c=a[2](s);return l>c?c:l};case ng:return s=>a[0](s)%a[1](s);case rg:return s=>Math.pow(a[0](s),a[1](s));case og:return s=>Math.abs(a[0](s));case ag:return s=>Math.floor(a[0](s));case sg:return s=>Math.ceil(a[0](s));case lg:return s=>Math.round(a[0](s));case ug:return s=>Math.sin(a[0](s));case cg:return s=>Math.cos(a[0](s));case hg:return o===2?s=>Math.atan2(a[0](s),a[1](s)):s=>Math.atan(a[0](s));case dg:return s=>Math.sqrt(a[0](s));default:throw new Error(`Unsupported numeric operator ${r}`)}}(t);case zx:return function(n){const r=n.args.length,o=new Array(r);for(let a=0;a<r;++a)o[a]=yn(n.args[a]);return a=>{for(let s=0;s<r-1;s+=2)if(o[s](a))return o[s+1](a);return o[r-1](a)}}(t);case Ax:return function(n){const r=n.args.length,o=new Array(r);for(let a=0;a<r;++a)o[a]=yn(n.args[a]);return a=>{const s=o[0](a);for(let l=1;l<r;l+=2)if(s===o[l](a))return o[l+1](a);return o[r-1](a)}}(t);case Ox:return function(n){const r=n.args.length,o=new Array(r);for(let a=0;a<r;++a)o[a]=yn(n.args[a]);return a=>{const s=o[0](a),l=o[1](a);let u,c;for(let h=2;h<r;h+=2){const d=o[h](a);let p=o[h+1](a);const f=Array.isArray(p);if(f&&(p=wM(p)),d>=l)return h===2?p:f?VM(s,l,u,c,d,p):wl(s,l,u,c,d,p);u=d,c=p}return c}}(t);case yg:return function(n){const r=n.operator,o=n.args.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=yn(n.args[s]);if(r===yg)return s=>{const l=a[0](s);return n.args[0].type===wn?nv(l):l.toString()};throw new Error(`Unsupported convert operator ${r}`)}(t);default:throw new Error(`Unsupported operator ${i}`)}}function wl(t,e,i,n,r,o){const a=r-i;if(a===0)return n;const s=e-i;return n+(t===1?s/a:(Math.pow(t,s)-1)/(Math.pow(t,a)-1))*(o-n)}function VM(t,e,i,n,r,o){if(r-i===0)return n;const a=oy(n),s=oy(o);let l=s[2]-a[2];return l>180?l-=360:l<-180&&(l+=360),bx(function(u){const c=wi.rgb(_x.xyz(u));return c[3]=u[3],c}([wl(t,e,i,a[0],r,s[0]),wl(t,e,i,a[1],r,s[1]),a[2]+wl(t,e,i,0,r,l),wl(t,e,i,n[3],r,o[3])]))}function $M(t){return!0}function GM(t){const e=Px(),i=function(r,o){const a=r.length,s=new Array(a);for(let l=0;l<a;++l){const u=r[l],c="filter"in u?kr(u.filter,Li,o):$M;let h;if(Array.isArray(u.style)){const d=u.style.length;h=new Array(d);for(let p=0;p<d;++p)h[p]=bg(u.style[p],o)}else h=[bg(u.style,o)];s[l]={filter:c,styles:h}}return function(l){const u=[];let c=!1;for(let h=0;h<a;++h)if((0,s[h].filter)(l)&&(!r[h].else||!c)){c=!0;for(const d of s[h].styles){const p=d(l);p&&u.push(p)}}return u}}(t,e),n={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(r,o){if(n.properties=r.getPropertiesInternal(),n.resolution=o,e.featureId){const a=r.getId();n.featureId=a!==void 0?a:null}return e.geometryType&&(n.geometryType=jx(r.getGeometry())),i(n)}}function my(t){const e=Px(),i=t.length,n=new Array(i);for(let a=0;a<i;++a)n[a]=bg(t[a],e);const r={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},o=new Array(i);return function(a,s){if(r.properties=a.getPropertiesInternal(),r.resolution=s,e.featureId){const u=a.getId();r.featureId=u!==void 0?u:null}let l=0;for(let u=0;u<i;++u){const c=n[u](r);c&&(o[l]=c,l+=1)}return o.length=l,o}}function bg(t,e){const i=Qs(t,"",e),n=Js(t,"",e),r=function(l,u){const c="text-",h=cr(l,c+"value",u);if(!h)return null;const d=Qs(l,c,u),p=Qs(l,c+"background-",u),f=Js(l,c,u),g=Js(l,c+"background-",u),y=cr(l,c+"font",u),_=Ai(l,c+"max-angle",u),b=Ai(l,c+"offset-x",u),m=Ai(l,c+"offset-y",u),v=el(l,c+"overflow",u),S=cr(l,c+"placement",u),C=Ai(l,c+"repeat",u),k=Zu(l,c+"scale",u),L=el(l,c+"rotate-with-view",u),A=Ai(l,c+"rotation",u),q=cr(l,c+"align",u),P=cr(l,c+"justify",u),T=cr(l,c+"baseline",u),R=Bx(l,c+"padding",u),M=Ju(l,c+"declutter-mode"),I=new Yo({declutterMode:M});return function(E){if(I.setText(h(E)),d&&I.setFill(d(E)),p&&I.setBackgroundFill(p(E)),f&&I.setStroke(f(E)),g&&I.setBackgroundStroke(g(E)),y&&I.setFont(y(E)),_&&I.setMaxAngle(_(E)),b&&I.setOffsetX(b(E)),m&&I.setOffsetY(m(E)),v&&I.setOverflow(v(E)),S){const O=S(E);if(O!=="point"&&O!=="line")throw new Error("Expected point or line for text-placement");I.setPlacement(O)}if(C&&I.setRepeat(C(E)),k&&I.setScale(k(E)),L&&I.setRotateWithView(L(E)),A&&I.setRotation(A(E)),q){const O=q(E);if(O!=="left"&&O!=="center"&&O!=="right"&&O!=="end"&&O!=="start")throw new Error("Expected left, right, center, start, or end for text-align");I.setTextAlign(O)}if(P){const O=P(E);if(O!=="left"&&O!=="right"&&O!=="center")throw new Error("Expected left, right, or center for text-justify");I.setJustify(O)}if(T){const O=T(E);if(O!=="bottom"&&O!=="top"&&O!=="middle"&&O!=="alphabetic"&&O!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");I.setTextBaseline(O)}return R&&I.setPadding(R(E)),I}}(t,e),o=function(l,u){return"icon-src"in l?function(c,h){const d="icon-",p=d+"src",f=Nx(c[p],p),g=Ku(c,d+"anchor",h),y=Zu(c,d+"scale",h),_=Ai(c,d+"opacity",h),b=Ku(c,d+"displacement",h),m=Ai(c,d+"rotation",h),v=el(c,d+"rotate-with-view",h),S=yy(c,d+"anchor-origin"),C=_y(c,d+"anchor-x-units"),k=_y(c,d+"anchor-y-units"),L=function(O,V){const B=O[V];if(B!==void 0)return Vx(B,V)}(c,d+"color"),A=function(O,V){const B=O[V];if(B!==void 0){if(typeof B!="string")throw new Error(`Expected a string for ${V}`);return B}}(c,d+"cross-origin"),q=function(O,V){const B=O[V];if(B!==void 0)return Tu(B,V)}(c,d+"offset"),P=yy(c,d+"offset-origin"),T=Qu(c,d+"width"),R=Qu(c,d+"height"),M=function(O,V){const B=O[V];if(B!==void 0){if(typeof B=="number")return pi(B);if(!Array.isArray(B))throw new Error(`Expected a number or size array for ${V}`);if(B.length!==2||typeof B[0]!="number"||typeof B[1]!="number")throw new Error(`Expected a number or size array for ${V}`);return B}}(c,d+"size"),I=Ju(c,d+"declutter-mode"),E=new Cs({src:f,anchorOrigin:S,anchorXUnits:C,anchorYUnits:k,color:L,crossOrigin:A,offset:q,offsetOrigin:P,height:R,width:T,size:M,declutterMode:I});return function(O){return _&&E.setOpacity(_(O)),b&&E.setDisplacement(b(O)),m&&E.setRotation(m(O)),v&&E.setRotateWithView(v(O)),y&&E.setScale(y(O)),g&&E.setAnchor(g(O)),E}}(l,u):"shape-points"in l?function(c,h){const d="shape-",p=d+"points",f=d+"radius",g=wg(c[p],p),y=wg(c[f],f),_=Qs(c,d,h),b=Js(c,d,h),m=Zu(c,d+"scale",h),v=Ku(c,d+"displacement",h),S=Ai(c,d+"rotation",h),C=el(c,d+"rotate-with-view",h),k=Qu(c,d+"radius2"),L=Qu(c,d+"angle"),A=Ju(c,d+"declutter-mode"),q=new oo({points:g,radius:y,radius2:k,angle:L,declutterMode:A});return function(P){return _&&q.setFill(_(P)),b&&q.setStroke(b(P)),v&&q.setDisplacement(v(P)),S&&q.setRotation(S(P)),C&&q.setRotateWithView(C(P)),m&&q.setScale(m(P)),q}}(l,u):"circle-radius"in l?function(c,h){const d="circle-",p=Qs(c,d,h),f=Js(c,d,h),g=Ai(c,d+"radius",h),y=Zu(c,d+"scale",h),_=Ku(c,d+"displacement",h),b=Ai(c,d+"rotation",h),m=el(c,d+"rotate-with-view",h),v=Ju(c,d+"declutter-mode"),S=new Rn({radius:5,declutterMode:v});return function(C){return g&&S.setRadius(g(C)),p&&S.setFill(p(C)),f&&S.setStroke(f(C)),_&&S.setDisplacement(_(C)),b&&S.setRotation(b(C)),m&&S.setRotateWithView(m(C)),y&&S.setScale(y(C)),S}}(l,u):null}(t,e),a=Ai(t,"z-index",e);if(!(i||n||r||o||ro(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const s=new qt;return function(l){let u=!0;if(i){const c=i(l);c&&(u=!1),s.setFill(c)}if(n){const c=n(l);c&&(u=!1),s.setStroke(c)}if(r){const c=r(l);c&&(u=!1),s.setText(c)}if(o){const c=o(l);c&&(u=!1),s.setImage(c)}return a&&s.setZIndex(a(l)),u?null:s}}function Qs(t,e,i){let n;if(e+"fill-pattern-src"in t)n=function(o,a,s){const l=cr(o,a+"pattern-src",s),u=vy(o,a+"pattern-offset",s),c=vy(o,a+"pattern-size",s),h=xg(o,a+"color",s);return function(d){return{src:l(d),offset:u&&u(d),size:c&&c(d),color:h&&h(d)}}}(t,e+"fill-",i);else{if(t[e+"fill-color"]==="none")return o=>null;n=xg(t,e+"fill-color",i)}if(!n)return null;const r=new Zt;return function(o){const a=n(o);return a===tv?null:(r.setColor(a),r)}}function Js(t,e,i){const n=Ai(t,e+"stroke-width",i),r=xg(t,e+"stroke-color",i);if(!n&&!r)return null;const o=cr(t,e+"stroke-line-cap",i),a=cr(t,e+"stroke-line-join",i),s=Bx(t,e+"stroke-line-dash",i),l=Ai(t,e+"stroke-line-dash-offset",i),u=Ai(t,e+"stroke-miter-limit",i),c=new Vt;return function(h){if(r){const d=r(h);if(d===tv)return null;c.setColor(d)}if(n&&c.setWidth(n(h)),o){const d=o(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(a){const d=a(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return s&&c.setLineDash(s(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function Ai(t,e,i){if(!(e in t))return;const n=kr(t[e],ft,i);return function(r){return wg(n(r),e)}}function cr(t,e,i){if(!(e in t))return null;const n=kr(t[e],Bi,i);return function(r){return Nx(n(r),e)}}function el(t,e,i){if(!(e in t))return null;const n=kr(t[e],Li,i);return function(r){const o=n(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function xg(t,e,i){if(!(e in t))return null;const n=kr(t[e],wn,i);return function(r){return Vx(n(r),e)}}function Bx(t,e,i){if(!(e in t))return null;const n=kr(t[e],ra,i);return function(r){return Tu(n(r),e)}}function Ku(t,e,i){if(!(e in t))return null;const n=kr(t[e],ra,i);return function(r){const o=Tu(n(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function vy(t,e,i){if(!(e in t))return null;const n=kr(t[e],ra,i);return function(r){return $x(n(r),e)}}function Zu(t,e,i){if(!(e in t))return null;const n=kr(t[e],ra|ft,i);return function(r){return function(o,a){return typeof o=="number"?o:$x(o,a)}(n(r),e)}}function Qu(t,e){const i=t[e];if(i!==void 0){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}}function yy(t,e){const i=t[e];if(i!==void 0){if(i!=="bottom-left"&&i!=="bottom-right"&&i!=="top-left"&&i!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return i}}function _y(t,e){const i=t[e];if(i!==void 0){if(i!=="pixels"&&i!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return i}}function Ju(t,e){const i=t[e];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);if(i!=="declutter"&&i!=="obstacle"&&i!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return i}}function Tu(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const i=t.length;for(let n=0;n<i;++n)if(typeof t[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function Nx(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function wg(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function Vx(t,e){if(typeof t=="string")return t;const i=Tu(t,e),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return i}function $x(t,e){const i=Tu(t,e);if(i.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return i}const by="renderOrder";class lv extends As{constructor(e){e=e||{};const i=Object.assign({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0&&e.updateWhileAnimating,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(by)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,i){const n=this.getDeclutter();!(n in e.declutter)&&(e.declutter[n]=new mx(9)),this.getRenderer().renderDeclutter(e,i)}setRenderOrder(e){this.set(by,e)}setStyle(e){this.style_=e===void 0?cy:e;const i=function(n){if(n===void 0)return cy;if(!n)return null;if(typeof n=="function"||n instanceof qt)return n;if(!Array.isArray(n))return my([n]);if(n.length===0)return[];const r=n.length,o=n[0];if(o instanceof qt){const a=new Array(r);for(let s=0;s<r;++s){const l=n[s];if(!(l instanceof qt))throw new Error("Expected a list of style instances");a[s]=l}return a}if("style"in o){const a=new Array(r);for(let s=0;s<r;++s){const l=n[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");a[s]=l}return GM(a)}return my(n)}(e);this.styleFunction_=e===null?void 0:function(n){let r;if(typeof n=="function")r=n;else{let o;Array.isArray(n)?o=n:(_t(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),o=[n]),r=function(){return o}}return r}(i),this.changed()}}class HM extends bu{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,i){Xe()}calculateMatrices2D(e){const i=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Zn(n,e.size[0]/2,e.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),ix(r,n)}forEachFeatureAtCoordinate(e,i,n,r,o,a,s,l){let u;const c=i.viewState;function h(v,S,C,k){return o.call(a,S,v?C:null,k)}const d=c.projection,p=zm(e.slice(),d),f=[[0,0]];if(d.canWrapX()&&r){const v=rt(d.getExtent());f.push([-v,0],[v,0])}const g=i.layerStatesArray,y=g.length,_=[],b=[];for(let v=0;v<f.length;v++)for(let S=y-1;S>=0;--S){const C=g[S],k=C.layer;if(k.hasRenderer()&&ev(C,c)&&s.call(l,k)){const L=k.getRenderer(),A=k.getSource();if(L&&A){const q=A.getWrapX()?p:e,P=h.bind(null,C.managed);b[0]=q[0]+f[v][0],b[1]=q[1]+f[v][1],u=L.forEachFeatureAtCoordinate(b,i,n,P,_)}if(u)return u}}if(_.length===0)return;const m=1/_.length;return _.forEach((v,S)=>v.distanceSq+=S*m),_.sort((v,S)=>v.distanceSq-S.distanceSq),_.some(v=>u=v.callback(v.feature,v.layer,v.geometry)),u}hasFeatureAtCoordinate(e,i,n,r,o,a){return this.forEachFeatureAtCoordinate(e,i,n,r,vs,this,o,a)!==void 0}getMap(){return this.map_}renderFrame(e){Xe()}scheduleExpireIconCache(e){Vn.canExpireCache()&&e.postRenderFunctions.push(WM)}}function WM(t,e){Vn.expire()}class Gx extends fn{constructor(e,i,n,r){super(e),this.inversePixelTransform=i,this.frameState=n,this.context=r}}class UM extends HM{constructor(e){super(e),this.fontChangeListenerKey_=ht(Dn,ms,e.redrawText,e),this.element_=document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=ku+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,i){const n=this.getMap();if(n.hasListener(e)){const r=new Gx(e,void 0,i);n.dispatchEvent(r)}}disposeInternal(){Lt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(jb,e);const i=e.layerStatesArray.sort((a,s)=>a.zIndex-s.zIndex);i.some(a=>a.layer instanceof lv&&a.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const r=[];let o=null;for(let a=0,s=i.length;a<s;++a){const l=i[a];e.layerIndex=a;const u=l.layer,c=u.getSourceState();if(!ev(l,n)||c!="ready"&&c!="undefined"){u.unrender();continue}const h=u.render(e,o);h&&(h!==o&&(this.children_.push(h),o=h),r.push(l))}this.declutter(e,r),function(a,s){const l=a.childNodes;for(let u=0;;++u){const c=l[u],h=s[u];if(!c&&!h)break;c!==h&&(c?h?a.insertBefore(h,c):(a.removeChild(c),--u):a.appendChild(h))}}(this.element_,this.children_),this.dispatchRenderEvent(QC,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,i){if(e.declutter){for(let n=i.length-1;n>=0;--n){const r=i[n],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}i.forEach(n=>n.layer.renderDeferred(e))}}}class Dr extends fn{constructor(e,i){super(e),this.layer=i}}const Qd="layers";class Ms extends Db{constructor(e){e=e||{};const i=Object.assign({},e);delete i.layers;let n=e.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Qd,this.handleLayersChanged_),n?Array.isArray(n)?n=new an(n.slice(),{unique:!0}):_t(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new an(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Lt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(ht(e,Go,this.handleLayersAdd_,this),ht(e,Ho,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Lt);xu(this.listenerKeys_);const i=e.getArray();for(let n=0,r=i.length;n<r;n++){const o=i[n];this.registerLayerListeners_(o),this.dispatchEvent(new Dr("addlayer",o))}this.changed()}registerLayerListeners_(e){const i=[ht(e,ms,this.handleLayerChange_,this),ht(e,Ft,this.handleLayerChange_,this)];e instanceof Ms&&i.push(ht(e,"addlayer",this.handleLayerGroupAdd_,this),ht(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[et(e)]=i}handleLayerGroupAdd_(e){this.dispatchEvent(new Dr("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Dr("removelayer",e.layer))}handleLayersAdd_(e){const i=e.element;this.registerLayerListeners_(i),this.dispatchEvent(new Dr("addlayer",i)),this.changed()}handleLayersRemove_(e){const i=e.element,n=et(i);this.listenerKeys_[n].forEach(Lt),delete this.listenerKeys_[n],this.dispatchEvent(new Dr("removelayer",i)),this.changed()}getLayers(){return this.get(Qd)}setLayers(e){const i=this.getLayers();if(i){const n=i.getArray();for(let r=0,o=n.length;r<o;++r)this.dispatchEvent(new Dr("removelayer",n[r]))}this.set(Qd,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(i){i.getLayersArray(e)}),e}getLayerStatesArray(e){const i=e!==void 0?e:[],n=i.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(i)});const r=this.getLayerState();let o=r.zIndex;e||r.zIndex!==void 0||(o=0);for(let a=n,s=i.length;a<s;a++){const l=i[a];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Pi(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=o)}return i}getSourceState(){return"ready"}}class Na extends fn{constructor(e,i,n){super(e),this.map=i,this.frameState=n!==void 0?n:null}}class lr extends Na{constructor(e,i,n,r,o,a){super(e,i,o),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0&&r,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var Mt={SINGLECLICK:"singleclick",CLICK:Gl,DBLCLICK:XC,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},XM="pointermove",Hx="pointerdown";class YM extends wu{constructor(e,i){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=ht(n,Hx,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ht(n,XM,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(I0,this.boundHandleTouchMove_,!!Mx&&{passive:!1})}emulateClick_(e){let i=new lr(Mt.CLICK,this.map_,e);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new lr(Mt.DBLCLICK,this.map_,e),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new lr(Mt.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const i=e,n=i.pointerId;if(i.type==Mt.POINTERUP||i.type==Mt.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==i.target){delete this.trackedTouches_[r];break}}else i.type!=Mt.POINTERDOWN&&i.type!=Mt.POINTERMOVE||(this.trackedTouches_[n]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const i=new lr(Mt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const i=new lr(Mt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ht(n,Mt.POINTERMOVE,this.handlePointerMove_,this),ht(n,Mt.POINTERUP,this.handlePointerUp_,this),ht(this.element_,Mt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(ht(this.element_.getRootNode(),Mt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const i=new lr(Mt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const i=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new lr(Mt.POINTERMOVE,this.map_,e,i))}handleTouchMove_(e){const i=this.originalPointerMoveEvent_;i&&!i.defaultPrevented||typeof e.cancelable=="boolean"&&e.cancelable!==!0||e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(I0,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var uv="postrender",KM="movestart",ZM="moveend",xy="loadstart",wy="loadend",ec="layergroup",Jd="size",tc="target",tl="view";const Sg=1/0;class QM{constructor(e,i){this.priorityFunction_=e,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,xu(this.queuedElements_)}dequeue(){const e=this.elements_,i=this.priorities_,n=e[0];e.length==1?(e.length=0,i.length=0):(e[0]=e.pop(),i[0]=i.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){_t(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(e);return i!=Sg&&(this.elements_.push(e),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const i=this.elements_,n=this.priorities_,r=i.length,o=i[e],a=n[e],s=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&n[u]<n[l]?u:l;i[e]=i[c],n[e]=n[c],e=c}i[e]=o,n[e]=a,this.siftDown_(s,e)}siftDown_(e,i){const n=this.elements_,r=this.priorities_,o=n[i],a=r[i];for(;i>e;){const s=this.getParentIndex_(i);if(!(r[s]>a))break;n[i]=n[s],r[i]=r[s],i=s}n[i]=o,r[i]=a}reprioritize(){const e=this.priorityFunction_,i=this.elements_,n=this.priorities_;let r=0;const o=i.length;let a,s,l;for(s=0;s<o;++s)a=i[s],l=e(a),l==Sg?delete this.queuedElements_[this.keyFunction_(a)]:(n[r]=l,i[r++]=a);i.length=r,n.length=r,this.heapify_()}}var ci=0,wr=1,jt=2,Kt=3,ai=4;class Wx extends QM{constructor(e,i){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const i=super.enqueue(e);return i&&e[0].addEventListener(Ft,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const i=e.target,n=i.getState();if(n===jt||n===Kt||n===ai){n!==Kt&&i.removeEventListener(Ft,this.boundHandleTileChange_);const r=i.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,i){let n=0;for(;this.tilesLoading_<e&&n<i&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()!==ci||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}}class ga extends gn{constructor(e){super();const i=e.element;!i||e.target||i.style.pointerEvents||(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let i=0,n=this.listenerKeys.length;i<n;++i)Lt(this.listenerKeys[i]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_??e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ys&&this.listenerKeys.push(ht(e,uv,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class JM extends ga{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed===void 0||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible===void 0||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const i=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:i+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:i+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=a):this.collapseLabel_=o;const s=e.label!==void 0?e.label:"i";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=r):this.label_=s;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Gl,this.handleClick_.bind(this),!1);const u=i+" "+ku+" "+av+(this.collapsed_&&this.collapsible_?" "+sy:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const i=this.getMap().getAllLayers(),n=new Set(i.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>n.add(r)):n.add(this.attributions_)),!this.overrideCollapsible_){const r=!i.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(n)}async updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const i=await Promise.all(this.collectSourceAttributions_(e).map(r=>_s(()=>r))),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!co(i,this.renderedAttributions_)){kx(this.ulElement_);for(let r=0,o=i.length;r<o;++r){const a=document.createElement("li");a.innerHTML=i[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=i}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(sy),this.collapsed_?ay(this.collapseLabel_,this.label_):ay(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class ek extends ga{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const i=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=i+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),a.addEventListener(Gl,this.handleClick_.bind(this),!1);const s=i+" "+ku+" "+av,l=this.element;l.className=s,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide===void 0||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Xu)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:Fs}):e.setRotation(0))}render(e){const i=e.frameState;if(!i)return;const n=i.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const o=this.element.classList.contains(Xu);o||n!==0?o&&n!==0&&this.element.classList.remove(Xu):this.element.classList.add(Xu)}this.label_.style.transform=r}this.rotation_=n}}class tk extends ga{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const i=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:i+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:i+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",s=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof a=="string"?document.createTextNode(a):a),c.addEventListener(Gl,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=o,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof s=="string"?document.createTextNode(s):s),h.addEventListener(Gl,this.handleClick_.bind(this,-n),!1);const d=i+" "+ku+" "+av,p=this.element;p.className=d,p.appendChild(c),p.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,i){i.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const r=i.getConstrainedZoom(n+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Fs})):i.setZoom(r)}}}var Cg="active";class Eu extends gn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Cg)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Cg,e)}setMap(e){this.map_=e}}function cv(t,e,i,n){const r=t.getZoom();if(r===void 0)return;const o=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:i,duration:n!==void 0?n:250,easing:Fs})}class Ux extends Eu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let i=!1;if(e.type==Mt.DBLCLICK){const n=e.originalEvent,r=e.map,o=e.coordinate,a=n.shiftKey?-this.delta_:this.delta_;cv(r.getView(),a,o,this.duration_),n.preventDefault(),i=!0}return!i}}class po extends Eu{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Mt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Mt.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Mt.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,i=this.stopDown(n)}else e.type==Mt.POINTERMOVE&&this.handleMoveEvent(e);return!i}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function hv(t){const e=t.length;let i=0,n=0;for(let r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return{clientX:i/e,clientY:n/e}}function Mg(t){const e=arguments;return function(i){let n=!0;for(let r=0,o=e.length;r<o&&(n=n&&e[r](i),n);++r);return n}}const ik=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Xx=function(t){const e=t.map.getTargetElement(),i=e.getRootNode();return!(i instanceof ShadowRoot?i.host:e).hasAttribute("tabindex")||function(n){const r=n.map.getTargetElement(),o=r.getRootNode(),a=n.map.getOwnerDocument().activeElement;return o instanceof ShadowRoot?o.host.contains(a):r.contains(a)}(t)},kg=vs,Yx=function(t){const e=t.originalEvent;return e.button==0&&!(CM&&xx&&e.ctrlKey)},nk=qs,dv=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Kx=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zx=function(t){const e=t.originalEvent,i=e.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!e.target.isContentEditable},ep=function(t){const e=t.originalEvent;return _t(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},rk=function(t){const e=t.originalEvent;return _t(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class ok extends po{constructor(e){super({stopDown:qs}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=e.condition?e.condition:Mg(dv,rk);this.condition_=e.onFocusOnly?Mg(Xx,i):i,this.noKinetic_=!1}handleDragEvent(e){const i=e.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const n=this.targetPointers,r=i.getEventPixel(hv(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();(function(s,l){s[0]*=l,s[1]*=l})(o,a.getResolution()),Om(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const i=e.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=n.getCenterInternal(),s=i.getPixelFromCoordinateInternal(a),l=i.getCoordinateFromPixelInternal([s[0]-r*Math.cos(o),s[1]-r*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Fs})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class ak extends po{constructor(e){e=e||{},super({stopDown:qs}),this.condition_=e.condition?e.condition:ik,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!ep(e))return;const i=e.map,n=i.getView();if(n.getConstraints().rotation===Vm)return;const r=i.getSize(),o=e.pixel,a=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const s=a-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=a}handleUpEvent(e){return ep(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return ep(e)&&Yx(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class sk extends bu{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,i=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],i[0])+n,r.top=Math.min(e[1],i[1])+n,r.width=Math.abs(i[0]-e[0])+n,r.height=Math.abs(i[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,i){this.startPixel_=e,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,i=this.endPixel_,n=[e,[e[0],i[1]],i,[i[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Gi([n])}getGeometry(){return this.geometry_}}const lk="boxstart",uk="boxdrag",ck="boxend",tp="boxcancel";class il extends fn{constructor(e,i,n){super(e),this.coordinate=i,this.mapBrowserEvent=n}}class hk extends po{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new sk(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Yx,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,i,n){const r=n[0]-i[0],o=n[1]-i[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new il(uk,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const i=this.boxEndCondition_(e,this.startPixel_,e.pixel);return i&&this.onBoxEnd(e),this.dispatchEvent(new il(i?ck:tp,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new il(lk,e.coordinate,e)),!0)}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new il(tp,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new il(tp,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class dk extends hk{constructor(e){super({condition:(e=e||{}).condition?e.condition:Kx,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0&&e.out}onBoxEnd(e){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(n),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;n=n.clone(),n.scale(a*a)}i.fitInternal(n,{duration:this.duration_,easing:Fs})}}var Sy="ArrowLeft",pk="ArrowUp",Cy="ArrowRight",My="ArrowDown";class fk extends Eu{constructor(e){super(),e=e||{},this.defaultCondition_=function(i){return dv(i)&&Zx(i)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let i=!1;if(e.type==lh){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==My||r==Sy||r==Cy||r==pk)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let s=0,l=0;r==My?l=-a:r==Sy?s=-a:r==Cy?s=a:l=a;const u=[s,l];Om(u,o.getRotation()),function(c,h,d){const p=c.getCenterInternal();if(p){const f=[p[0]+h[0],p[1]+h[1]];c.animateInternal({duration:d!==void 0?d:250,easing:cM,center:c.getConstrainedCenter(f)})}}(o,u,this.duration_),n.preventDefault(),i=!0}}return!i}}class gk extends Eu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(i){return!function(n){const r=n.originalEvent;return xx?r.metaKey:r.ctrlKey}(i)&&Zx(i)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let i=!1;if(e.type==lh||e.type==zb){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,a=r==="+"?this.delta_:-this.delta_;cv(o.getView(),a,void 0,this.duration_),n.preventDefault(),i=!0}}return!i}}class mk{constructor(e,i,n){this.decay_=e,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,i){this.points_.push(e,i,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<e)return!1;let n=i-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[i+2]-this.points_[n+2];if(r<1e3/60)return!1;const o=this.points_[i]-this.points_[n],a=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class vk extends Eu{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor===void 0||e.useAnchor,this.constrainResolution_=e.constrainResolution!==void 0&&e.constrainResolution;const i=e.condition?e.condition:kg;this.condition_=e.onFocusOnly?Mg(Xx,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ll)return!0;const i=e.map,n=e.originalEvent;let r;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel),e.type==Ll&&(r=n.deltaY,SM&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=wx),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=r;const s=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),s),!1}handleWheelZoom_(e){const i=e.getView();i.getAnimating()&&i.cancelAnimations();let n=-Dt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),cv(i,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class yk extends po{constructor(e){const i=e=e||{};i.stopDown||(i.stopDown=qs),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let i=0;const n=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=l}this.lastAngle_=o;const a=e.map,s=a.getView();s.getConstraints().rotation!==Vm&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(hv(this.targetPointers))),this.rotating_&&(a.render(),s.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const i=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class _k extends po{constructor(e){const i=e=e||{};i.stopDown||(i.stopDown=qs),super(i),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let i=1;const n=this.targetPointers[0],r=this.targetPointers[1],o=n.clientX-r.clientX,a=n.clientY-r.clientY,s=Math.sqrt(o*o+a*a);this.lastDistance_!==void 0&&(i=this.lastDistance_/s),this.lastDistance_=s;const l=e.map,u=l.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(hv(this.targetPointers))),l.render(),u.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const i=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function Qx(t){t instanceof As?t.setMapInternal(null):t instanceof Ms&&t.getLayers().forEach(Qx)}function Jx(t,e){if(t instanceof As)t.setMapInternal(e);else if(t instanceof Ms){const i=t.getLayers().getArray();for(let n=0,r=i.length;n<r;++n)Jx(i[n],e)}}var zs=class extends gn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(n){let r=null;n.keyboardEventTarget!==void 0&&(r=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const o={},a=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Ms({layers:n.layers});let s,l,u;return o[ec]=a,o[tc]=n.target,o[tl]=n.view instanceof Wi?n.view:new Wi,n.controls!==void 0&&(Array.isArray(n.controls)?s=new an(n.controls.slice()):(_t(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=n.controls)),n.interactions!==void 0&&(Array.isArray(n.interactions)?l=new an(n.interactions.slice()):(_t(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=n.interactions)),n.overlays!==void 0?Array.isArray(n.overlays)?u=new an(n.overlays.slice()):(_t(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=n.overlays):u=new an,{controls:s,interactions:l,keyboardEventTarget:r,overlays:u,values:o}}(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:wx,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||function(n){n=n||{};const r=new an;return(n.zoom===void 0||n.zoom)&&r.push(new tk(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&r.push(new ek(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&r.push(new JM(n.attributionOptions)),r}(),this.interactions=e.interactions||function(n){n=n||{};const r=new an,o=new mk(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&r.push(new ak),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&r.push(new Ux({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&r.push(new ok({onFocusOnly:n.onFocusOnly,kinetic:o})),(n.pinchRotate===void 0||n.pinchRotate)&&r.push(new yk),(n.pinchZoom===void 0||n.pinchZoom)&&r.push(new _k({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(r.push(new fk),r.push(new gk({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&r.push(new vk({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&r.push(new dk({duration:n.zoomDuration})),r}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Wx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ec,this.handleLayerGroupChanged_),this.addChangeListener(tl,this.handleViewChanged_),this.addChangeListener(Jd,this.handleSizeChanged_),this.addChangeListener(tc,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof Wi||t.view.then(function(n){i.setView(new Wi(n))}),this.controls.addEventListener(Go,n=>{n.element.setMap(this)}),this.controls.addEventListener(Ho,n=>{n.element.setMap(null)}),this.interactions.addEventListener(Go,n=>{n.element.setMap(this)}),this.interactions.addEventListener(Ho,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(Go,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(Ho,n=>{const r=n.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Jx(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),r=(i=i!==void 0?i:{}).hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:vs,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,a,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(n){i.push(n)},e),i}getAllLayers(){const t=[];return function e(i){i.forEach(function(n){n instanceof Ms?e(n.getLayers()):t.push(n)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=(e=e!==void 0?e:{}).layerFilter!==void 0?e.layerFilter:vs,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],r=e.height/i[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/n,(o.clientY-e.top)/r]}getTarget(){return this.get(tc)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Rf(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ti(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ec)}setLayers(t){const e=this.getLayerGroup();if(t instanceof an)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e];if(!n.visible)continue;const r=n.layer.getRenderer();if(r&&!r.ready)return!0;const o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=bn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ti(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Jd)}getView(){return this.get(tl)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return function(r,o,a,s,l){if(!r||!(a in r.wantedTiles)||!r.wantedTiles[a][o.getKey()])return Sg;const u=r.viewState.center,c=s[0]-u[0],h=s[1]-u[1];return 65536*Math.log(l)+Math.sqrt(c*c+h*h)/l}(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new lr(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Hx||i===Ll||i===lh){const n=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=e.target,a=r instanceof ShadowRoot?r.host===o?r.host.ownerDocument:r:r===n?n.documentElement:r;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const n=this.getInteractions().getArray().slice();for(let r=n.length-1;r>=0;r--){const o=n[r];if(!(o.getMap()!==this||!o.getActive()||!this.getTargetElement())&&(!o.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,r=n;if(t){const o=t.viewHints;if(o[Zi]||o[En]){const a=Date.now()-t.time>8;n=a?0:8,r=a?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Bd)&&this.renderer_.dispatchRenderEvent(Bd,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Na(wy,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Na(xy,this,t))));const i=this.postRenderFunctions_;for(let n=0,r=i.length;n<r;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,n=this.targetChangeHandlerKeys_.length;i<n;++i)Lt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(xf,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ll,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new UM(this)),this.mapBrowserEventHandler_=new YM(this,this.moveTolerance_);for(const r in Mt)this.mapBrowserEventHandler_.addEventListener(Mt[r],this.handleMapBrowserEvent.bind(this));let i;if(this.viewport_.addEventListener(xf,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ll,this.boundHandleBrowserEvent_,!!Mx&&{passive:!1}),this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const r=e.getRootNode();i=r instanceof ShadowRoot?r.host:e}this.targetChangeHandlerKeys_=[ht(i,lh,this.handleBrowserEvent,this),ht(i,zb,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ht(t,ms,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ht(t,Ft,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Lt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Dr("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ht(t,ms,this.render,this),ht(t,Ft,this.render,this),ht(t,"addlayer",this.handleLayerAdd_,this),ht(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Qx(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let r=null;if(e!==void 0&&iy(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:dh(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:et(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const s=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=dh(a.nextCenter,a.nextResolution,s,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!fa(this.previousExtent_)&&!xr(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Na(KM,this,n)),this.previousExtent_=Rs(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Zi]&&!r.viewHints[En]&&!xr(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Na(ZM,this,r)),Nb(r.extent,this.previousExtent_))),this.dispatchEvent(new Na(uv,this,r)),this.renderComplete_=(this.hasListener(xy)||this.hasListener(wy)||this.hasListener(Bd))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Dr("removelayer",e)),this.set(ec,t)}setSize(t){this.set(Jd,t)}setTarget(t){this.set(tc,t)}setView(t){if(!t||t instanceof Wi)return void this.set(tl,t);this.set(tl,new Wi);const e=this;t.then(function(i){e.setView(new Wi(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),r=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(r)||isNaN(o)||(e=[Math.max(0,r),Math.max(0,o)],!iy(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Zb("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&co(e,i)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}},bh="preload",xh="useInterimTilesOnError";class bk extends As{constructor(e){e=e||{};const i=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError===void 0||e.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(bh)}setPreload(e){this.set(bh,e)}getUseInterimTilesOnError(){return this.get(xh)}setUseInterimTilesOnError(e){this.set(xh,e)}getData(e){return super.getData(e)}}class xk extends Il{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Xe()}getData(e){return null}prepareFrame(e){return Xe()}renderFrame(e,i){return Xe()}forEachFeatureAtCoordinate(e,i,n,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const i=e.target;i.getState()!==At&&i.getState()!==Ln||this.renderIfReadyAndVisible()}loadImage(e){let i=e.getState();return i!=At&&i!=Ln&&e.addEventListener(Ft,this.boundHandleImageChange_),i==Hi&&(e.load(),i=e.getState()),i==At}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class pv{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(vh(),{get:(e,i)=>{if(typeof vh()[i]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i),this.pushMethodArgs_},set:(e,i,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(i,n),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(i=>{for(let n=0,r=i.length;n<r;++n){const o=i[n];if(typeof o=="function"){o(e);continue}const a=i[++n];if(typeof e[o]=="function")e[o](...a);else{if(typeof a=="function"){e[o]=a(e);continue}e[o]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ky=[];let wa=null;class fv extends xk{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,i,n){let r;wa||(wa=Ot(1,1,void 0,{willReadFrequently:!0})),wa.clearRect(0,0,1,1);try{wa.drawImage(e,i,n,1,1,0,0,1,1),r=wa.getImageData(0,0,1,1).data}catch{return wa=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,i,n){const r=this.getLayer().getClassName();let o,a;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&co(Ql(e.style.backgroundColor),Ql(n)))){const s=e.firstElementChild;s instanceof HTMLCanvasElement&&(a=s.getContext("2d"))}if(a&&a.canvas.style.transform===i?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let s=o.style;s.position="absolute",s.width="100%",s.height="100%",a=Ot();const l=a.canvas;o.appendChild(l),s=l.style,s.position="absolute",s.left="0",s.transformOrigin="top left",this.container=o,this.context=a}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(e,i,n){const r=er(n),o=rd(n),a=nd(n),s=id(n);ti(i.coordinateToPixelTransform,r),ti(i.coordinateToPixelTransform,o),ti(i.coordinateToPixelTransform,a),ti(i.coordinateToPixelTransform,s);const l=this.inversePixelTransform;ti(l,r),ti(l,o),ti(l,a),ti(l,s),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,i){const n=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,a=e.pixelRatio,s=Math.round(rt(n)/r*a),l=Math.round(Yt(n)/r*a);Zn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,o,-s/2,-l/2),ix(this.inversePixelTransform,this.pixelTransform);const u=function(c){return"matrix("+c.map((h,d)=>Math.round(h*Z0[d])/Z0[d]).join(", ")+")"}(this.pixelTransform);if(this.useContainer(i,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=s||c.height!=l?(c.width=s,c.height=l):this.context.clearRect(0,0,s,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,i,n){const r=this.getLayer();if(r.hasListener(e)){const o=new Gx(e,this.inversePixelTransform,n,i);r.dispatchEvent(o)}}preRender(e,i){this.frameState=i,i.declutter||this.dispatchRenderEvent_(wf,e,i)}postRender(e,i){i.declutter||this.dispatchRenderEvent_(Sf,e,i)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new pv),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(wf,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Sf,this.context,e))}getRenderTransform(e,i,n,r,o,a,s){const l=o/2,u=a/2,c=r/i,h=-c,d=-e[0]+s,p=-e[1];return Zn(this.tempTransform,l,u,c,h,-n,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Lu extends wu{constructor(e,i,n){super(),n=n||{},this.tileCoord=e,this.state=i,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Ft)}release(){this.state===Kt&&this.setState(ai)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Kt&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Xe()}getAlpha(e,i){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(n){if(n===-1)return 1}else n=i,this.transitionStarts_[e]=n;const r=i-n+1e3/60;return r>=this.transition_?1:ex(r/this.transition_)}inTransition(e){return!!this.transition_&&this.transitionStarts_[e]!==-1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function wh(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const wk=new Error("disposed");let Sa=null;const Sk=[256,256];class Tg extends Lu{constructor(e){const i=ci;super(e.tileCoord,i,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=wh(this.data_);return e?[e.width,e.height]:Sk}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ci&&this.state!==Kt)return;this.state=wr,this.changed();const e=this;this.loader_().then(function(i){e.data_=i,e.state=jt,e.changed()}).catch(function(i){e.error_=i,e.state=Kt,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(wk),this.controller_=null),super.disposeInternal()}}class ew extends Lu{constructor(e,i,n,r,o,a){super(e,i,a),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=jt,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Kt,this.unlistenImage_(),this.image_=function(){const e=Ot(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=jt:this.state=ai,this.unlistenImage_(),this.changed()}load(){this.state==Kt&&(this.state=ci,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ci&&(this.state=wr,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(e,i,n){const r=e;let o=!0,a=!1,s=!1;const l=[uh(r,YC,function(){s=!0,a||i()})];return r.src&&Cx?(a=!0,r.decode().then(function(){o&&i()}).catch(function(u){o&&(s?i():n())})):l.push(uh(r,UC,n)),function(){o=!1,l.forEach(Lt)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}class Ck{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();){const i=this.pop();i instanceof bu&&i.dispose()}}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let i=this.oldest_;for(;i;)e(i.value_,i.key_,this),i=i.newer}get(e,i){const n=this.entries_[e];return _t(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const i=this.entries_[e];return _t(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[e],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,n=0;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,n=0;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,i){this.get(e),this.entries_[e].value_=i}set(e,i){_t(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}class gv{constructor(e,i,n,r,o,a){this.sourceProj_=e,this.targetProj_=i;let s={};const l=xs(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const m=b[0]+"/"+b[1];return s[m]||(s[m]=l(b)),s[m]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&rt(r)>=rt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?rt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?rt(this.targetProj_.getExtent()):null;const u=er(n),c=rd(n),h=nd(n),d=id(n),p=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),y=this.transformInv_(d),_=10+(a?Math.max(0,Math.ceil(Math.log2(Hl(n)/(a*a*256*256)))):0);if(this.addQuad_(u,c,h,d,p,f,g,y,_),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(m,v,S){b=Math.min(b,m.source[0][0],m.source[1][0],m.source[2][0])}),this.triangles_.forEach(m=>{if(Math.max(m.source[0][0],m.source[1][0],m.source[2][0])-b>this.sourceWorldWidth_/2){const v=[[m.source[0][0],m.source[0][1]],[m.source[1][0],m.source[1][1]],[m.source[2][0],m.source[2][1]]];v[0][0]-b>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-b>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-b>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const S=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-S<this.sourceWorldWidth_/2&&(m.source=v)}})}s={}}addTriangle_(e,i,n,r,o,a){this.triangles_.push({source:[r,o,a],target:[e,i,n]})}addQuad_(e,i,n,r,o,a,s,l,u){const c=hh([o,a,s,l]),h=this.sourceWorldWidth_?rt(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1;let f=!1;if(u>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=rt(hh([e,i,n,r]))/this.targetWorldWidth_>.25||f),!p&&this.sourceProj_.isGlobal()&&h&&(f=h>.25||f)),!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Ut(c,this.maxSourceExtent_))return;let g=0;if(!(f||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1]))){if(u>0)f=!0;else if(g=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),g!=1&&g!=2&&g!=4&&g!=8)return}if(u>0){if(!f){const y=[(e[0]+n[0])/2,(e[1]+n[1])/2],_=this.transformInv_(y);let b;p?b=(Uo(o[0],d)+Uo(s[0],d))/2-Uo(_[0],d):b=(o[0]+s[0])/2-_[0];const m=(o[1]+s[1])/2-_[1];f=b*b+m*m>this.errorThresholdSquared_}if(f){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const y=[(i[0]+n[0])/2,(i[1]+n[1])/2],_=this.transformInv_(y),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],m=this.transformInv_(b);this.addQuad_(e,i,y,b,o,a,_,m,u-1),this.addQuad_(b,y,n,r,m,_,s,l,u-1)}else{const y=[(e[0]+i[0])/2,(e[1]+i[1])/2],_=this.transformInv_(y),b=[(n[0]+r[0])/2,(n[1]+r[1])/2],m=this.transformInv_(b);this.addQuad_(e,y,b,r,o,_,m,l,u-1),this.addQuad_(y,i,n,b,_,a,s,m,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&g||this.addTriangle_(e,n,r,o,s,l),14&g||this.addTriangle_(e,n,i,o,s,a),g&&(13&g||this.addTriangle_(i,r,e,a,l,o),7&g||this.addTriangle_(i,r,n,a,l,s))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(i,n,r){const o=i.source;Pl(e,o[0]),Pl(e,o[1]),Pl(e,o[2])}),e}getTriangles(){return this.triangles_}}let ip;const dr=[];function Ty(t,e,i,n,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,r)),t.restore()}function np(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Eg(t,e,i,n){const r=zo(i,e,t);let o=Ul(e,n,i);const a=e.getMetersPerUnit();a!==void 0&&(o*=a);const s=t.getMetersPerUnit();s!==void 0&&(o/=s);const l=t.getExtent();if(!l||ia(l,r)){const u=Ul(t,o,r)/o;isFinite(u)&&u>0&&(o/=u)}return o}function tw(t,e,i,n){const r=$i(i);let o=Eg(t,e,r,n);return(!isFinite(o)||o<=0)&&Fm(i,function(a){return o=Eg(t,e,a,n),isFinite(o)&&o>0}),o}function mv(t,e,i,n,r,o,a,s,l,u,c,h,d,p){const f=Ot(Math.round(i*t),Math.round(i*e),dr);if(h||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;function g(S){return Math.round(S*i)/i}f.scale(i,i),f.globalCompositeOperation="lighter";const y=[1/0,1/0,-1/0,-1/0];let _;l.forEach(function(S,C,k){$b(y,S.extent)});const b=i/n,m=(h?1:1+Math.pow(2,-24))/b;if(!d||l.length!==1||u!==0){if(_=Ot(Math.round(rt(y)*b),Math.round(Yt(y)*b),dr),h||(_.imageSmoothingEnabled=!1),r&&p){const S=(r[0]-y[0])*b,C=-(r[3]-y[3])*b,k=rt(r)*b,L=Yt(r)*b;_.rect(S,C,k,L),_.clip()}l.forEach(function(S,C,k){if(S.image.width>0&&S.image.height>0){if(S.clipExtent){_.save();const T=(S.clipExtent[0]-y[0])*b,R=-(S.clipExtent[3]-y[3])*b,M=rt(S.clipExtent)*b,I=Yt(S.clipExtent)*b;_.rect(h?T:Math.round(T),h?R:Math.round(R),h?M:Math.round(T+M)-Math.round(T),h?I:Math.round(R+I)-Math.round(R)),_.clip()}const L=(S.extent[0]-y[0])*b,A=-(S.extent[3]-y[3])*b,q=rt(S.extent)*b,P=Yt(S.extent)*b;_.drawImage(S.image,u,u,S.image.width-2*u,S.image.height-2*u,h?L:Math.round(L),h?A:Math.round(A),h?q:Math.round(L+q)-Math.round(L),h?P:Math.round(A+P)-Math.round(A)),S.clipExtent&&_.restore()}})}const v=er(a);return s.getTriangles().forEach(function(S,C,k){const L=S.source,A=S.target;let q=L[0][0],P=L[0][1],T=L[1][0],R=L[1][1],M=L[2][0],I=L[2][1];const E=g((A[0][0]-v[0])/o),O=g(-(A[0][1]-v[1])/o),V=g((A[1][0]-v[0])/o),B=g(-(A[1][1]-v[1])/o),F=g((A[2][0]-v[0])/o),H=g(-(A[2][1]-v[1])/o),ee=q,ne=P;q=0,P=0,T-=ee,R-=ne,M-=ee,I-=ne;const te=function(z){const j=z.length;for(let W=0;W<j;W++){let U=W,ye=Math.abs(z[W][W]);for(let he=W+1;he<j;he++){const fe=Math.abs(z[he][W]);fe>ye&&(ye=fe,U=he)}if(ye===0)return null;const ue=z[U];z[U]=z[W],z[W]=ue;for(let he=W+1;he<j;he++){const fe=-z[he][W]/z[W][W];for(let Ce=W;Ce<j+1;Ce++)W==Ce?z[he][Ce]=0:z[he][Ce]+=fe*z[W][Ce]}}const Z=new Array(j);for(let W=j-1;W>=0;W--){Z[W]=z[W][j]/z[W][W];for(let U=W-1;U>=0;U--)z[U][j]-=z[U][W]*Z[W]}return Z}([[T,R,0,0,V-E],[M,I,0,0,F-E],[0,0,T,R,B-O],[0,0,M,I,H-O]]);if(!te)return;if(f.save(),f.beginPath(),function(){if(ip===void 0){const z=Ot(6,6,dr);z.globalCompositeOperation="lighter",z.fillStyle="rgba(210, 0, 0, 0.75)",Ty(z,4,5,4,0),Ty(z,4,5,0,5);const j=z.getImageData(0,0,3,3).data;ip=np(j,0)||np(j,4)||np(j,8),na(z),dr.push(z.canvas)}return ip}()||!h){f.moveTo(V,B);const z=4,j=E-V,Z=O-B;for(let W=0;W<z;W++)f.lineTo(V+g((W+1)*j/z),B+g(W*Z/(z-1))),W!=z-1&&f.lineTo(V+g((W+1)*j/z),B+g((W+1)*Z/(z-1)));f.lineTo(F,H)}else f.moveTo(V,B),f.lineTo(E,O),f.lineTo(F,H);let N;if(f.clip(),f.transform(te[0],te[2],te[1],te[3],E,O),f.translate(y[0]-ee,y[3]-ne),_)N=_.canvas,f.scale(m,-m);else{const z=l[0],j=z.extent;N=z.image,f.scale(rt(j)/N.width,-Yt(j)/N.height)}f.drawImage(N,0,0),f.restore()}),_&&(na(_),dr.push(_.canvas)),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,s.getTriangles().forEach(function(S,C,k){const L=S.target,A=(L[0][0]-v[0])/o,q=-(L[0][1]-v[1])/o,P=(L[1][0]-v[0])/o,T=-(L[1][1]-v[1])/o,R=(L[2][0]-v[0])/o,M=-(L[2][1]-v[1])/o;f.beginPath(),f.moveTo(P,T),f.lineTo(A,q),f.lineTo(R,M),f.closePath(),f.stroke()}),f.restore()),f.canvas}class Mk extends Tg{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const i=e.sourceProj,n=i.getExtent(),r=e.sourceTileGrid.getExtent();this.clipExtent_=i.canWrapX()?r?Pi(n,r):n:r;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const l=a?Pi(o,a):o;if(Hl(l)===0)return void(this.state=ai);n&&(s=s?Pi(s,n):n);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=tw(i,c,l,u);if(!isFinite(h)||h<=0)return void(this.state=ai);const d=e.errorThreshold!==void 0?e.errorThreshold:.5;if(this.triangulation_=new gv(i,c,l,s,h*d,u),this.triangulation_.getTriangles().length===0)return void(this.state=ai);this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let p=this.triangulation_.calculateSourceExtent();if(s&&(i.canWrapX()?(p[1]=Dt(p[1],s[1],s[3]),p[3]=Dt(p[3],s[1],s[3])):p=Pi(p,s)),Hl(p)){let f=0,g=0;i.canWrapX()&&(f=rt(n),g=Math.floor((p[0]-n[0])/f)),Am(p.slice(),i,!0).forEach(y=>{const _=this.sourceTileGrid_.getTileRangeForExtentAndZ(y,this.sourceZ_),b=e.getTileFunction;for(let m=_.minX;m<=_.maxX;m++)for(let v=_.minY;v<=_.maxY;v++){const S=b(this.sourceZ_,m,v,this.pixelRatio_);if(S){const C=g*f;this.sourceTiles_.push({tile:S,offset:C})}}++g}),this.sourceTiles_.length===0&&(this.state=ai)}else this.state=ai}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let i=!1;if(this.sourceTiles_.forEach(p=>{const f=p.tile;if(!f||f.getState()!==jt)return;const g=f.getSize(),y=this.gutter_;let _;const b=(m=f.getData())instanceof Uint8Array||m instanceof Uint8ClampedArray||m instanceof Float32Array||m instanceof DataView?m:null;var m;b?_=b:(i=!0,_=function(O){Sa||(Sa=Ot(O.width,O.height,void 0,{willReadFrequently:!0}));const V=Sa.canvas,B=O.width;V.width!==B&&(V.width=B);const F=O.height;return V.height!==F&&(V.height=F),Sa.clearRect(0,0,B,F),Sa.drawImage(O,0,0),Sa.getImageData(0,0,B,F).data}(wh(f.getData())));const v=[g[0]+2*y,g[1]+2*y],S=_ instanceof Float32Array,C=v[0]*v[1],k=S?Float32Array:Uint8ClampedArray,L=new k(_.buffer),A=k.BYTES_PER_ELEMENT,q=A*L.length/C,P=L.byteLength/v[1],T=Math.floor(P/A/v[0]),R=C*T;let M=L;if(L.length!==R){M=new k(R);let O=0,V=0;const B=v[0]*T;for(let F=0;F<v[1];++F){for(let H=0;H<B;++H)M[O++]=L[V+H];V+=P/A}}const I=this.sourceTileGrid_.getTileCoordExtent(f.tileCoord);I[0]+=p.offset,I[2]+=p.offset;const E=this.clipExtent_?.slice();E&&(E[0]+=p.offset,E[2]+=p.offset),e.push({extent:I,clipExtent:E,data:new Uint8ClampedArray(M.buffer),dataType:k,bytesPerPixel:q,pixelSize:v})}),this.sourceTiles_.length=0,e.length===0)return this.state=Kt,void this.changed();const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),o=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(n),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let c,h;const d=e[0].bytesPerPixel;for(let p=Math.ceil(d/3)-1;p>=0;--p){const f=[];for(let v=0,S=e.length;v<S;++v){const C=e[v],k=C.data,L=C.pixelSize,A=L[0],q=L[1],P=Ot(A,q,dr),T=P.createImageData(A,q),R=T.data;let M=3*p;for(let I=0,E=R.length;I<E;I+=4)R[I]=k[M],R[I+1]=k[M+1],R[I+2]=k[M+2],R[I+3]=255,M+=d;P.putImageData(T,0,0),f.push({extent:C.extent,clipExtent:C.clipExtent,image:P.canvas})}const g=mv(o,a,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,f,this.gutter_,!1,!1,!1);for(let v=0,S=f.length;v<S;++v){const C=f[v].image.getContext("2d");na(C),dr.push(C.canvas)}const y=g.getContext("2d"),_=y.getImageData(0,0,g.width,g.height);na(y),dr.push(g),c||(h=new Uint8ClampedArray(d*_.width*_.height),c=new e[0].dataType(h.buffer));const b=_.data;let m=3*p;for(let v=0,S=b.length;v<S;v+=4)b[v+3]===255?(h[m]=b[v],h[m+1]=b[v+1],h[m+2]=b[v+2]):(h[m]=0,h[m+1]=0,h[m+2]=0),m+=d}if(i){const p=Ot(o,a),f=new ImageData(c,o);p.putImageData(f,0,0),this.reprojData_=p.canvas}else this.reprojData_=c;this.reprojSize_=[Math.round(o*this.pixelRatio_),Math.round(a*this.pixelRatio_)],this.state=jt,this.changed()}load(){if(this.state!==ci&&this.state!==Kt)return;this.state=wr,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n!==ci&&n!==wr)return;e++;const r=ht(i,Ft,()=>{const o=i.getState();o!=jt&&o!=Kt&&o!=ai||(Lt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i}){i.getState()==ci&&i.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}}class Lg extends Lu{constructor(e,i,n,r,o,a,s,l,u,c,h,d){super(o,ci,d),this.renderEdges_=h!==void 0&&h,this.pixelRatio_=s,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=r,this.wrappedTileCoord_=a||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=r.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const y=f?Pi(p,f):p;if(Hl(y)===0)return void(this.state=ai);const _=e.getExtent();_&&(g=g?Pi(g,_):_);const b=r.getResolution(this.wrappedTileCoord_[0]),m=tw(e,n,y,b);if(!isFinite(m)||m<=0)return void(this.state=ai);const v=c!==void 0?c:.5;if(this.triangulation_=new gv(e,n,y,g,m*v,b),this.triangulation_.getTriangles().length===0)return void(this.state=ai);this.sourceZ_=i.getZForResolution(m);let S=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(S[1]=Dt(S[1],g[1],g[3]),S[3]=Dt(S[3],g[1],g[3])):S=Pi(S,g)),Hl(S)){let C=0,k=0;e.canWrapX()&&(C=rt(_),k=Math.floor((S[0]-_[0])/C)),Am(S.slice(),e,!0).forEach(L=>{const A=i.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let q=A.minX;q<=A.maxX;q++)for(let P=A.minY;P<=A.maxY;P++){const T=u(this.sourceZ_,q,P,s);if(T){const R=k*C;this.sourceTiles_.push({tile:T,offset:R})}}++k}),this.sourceTiles_.length===0&&(this.state=ai)}else this.state=ai}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(i=>{const n=i.tile;if(n&&n.getState()==jt){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=i.offset,r[2]+=i.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=i.offset,o[2]+=i.offset),e.push({extent:r,clipExtent:o,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Kt;else{const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),r=typeof n=="number"?n:n[0],o=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(i),s=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=mv(r,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=jt}this.changed()}load(){if(this.state==ci){this.state=wr,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n==ci||n==wr){e++;const r=ht(i,Ft,o=>{const a=i.getState();a!=jt&&a!=Kt&&a!=ai||(Lt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i},n,r){i.getState()==ci&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(na(this.canvas_.getContext("2d")),dr.push(this.canvas_),this.canvas_=null),super.release()}}class vv{constructor(e,i,n,r){this.minX=e,this.maxX=i,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,i){return this.minX<=e&&e<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Ca(t,e,i,n,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new vv(t,e,i,n)}function Sh(t,e,i,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function iw(t){return function(e,i,n){return(i<<e)+n}(t[0],t[1],t[2])}function rp(t,e,i,n){return`${t},${function(r,o,a){return r+"/"+o+"/"+a}(e,i,n)}`}function op(t,e,i){if(!(i in t))return t[i]=new Set([e]),!0;const n=t[i],r=n.has(e);return r||n.add(e),!r}function kk(t,e,i){const n=t[i];return!!n&&n.delete(e)}function Ey(t,e){const i=t.layerStatesArray[t.layerIndex];i.extent&&(e=Pi(e,Nn(i.extent,t.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(t.viewState.projection).getExtent();r&&(e=Pi(e,r))}return e}class nw extends fv{constructor(e,i){super(e),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=[1/0,1/0,-1/0,-1/0],this.tempTileRange_=new vv(0,0,0,0),this.tempTileCoord_=Sh(0,0,0);const n=i.cacheSize!==void 0?i.cacheSize:512;this.tileCache_=new Ck(n),this.renderedProjection_=void 0,this.maxStaleKeys=.5*n}getTileCache(){return this.tileCache_}getOrCreateTile(e,i,n,r){const o=this.tileCache_,a=this.getLayer().getSource(),s=rp(a.getKey(),e,i,n);let l;if(o.containsKey(s))l=o.get(s);else{if(l=a.getTile(e,i,n,r.pixelRatio,r.viewState.projection),!l)return null;o.set(s,l)}return l}getTile(e,i,n,r){return this.getOrCreateTile(e,i,n,r)||null}getData(e){const i=this.frameState;if(!i)return null;const n=this.getLayer(),r=ti(i.pixelToCoordinateTransform,e.slice()),o=n.getExtent();if(o&&!ia(o,r))return null;const a=i.viewState,s=n.getRenderSource(),l=s.getTileGridForProjection(a.projection),u=s.getTilePixelRatio(i.pixelRatio);for(let c=l.getZForResolution(a.resolution);c>=l.getMinZoom();--c){const h=l.getTileCoordForCoordAndZ(r,c),d=this.getTile(c,h[1],h[2],i);if(!d||d.getState()!==jt)continue;const p=l.getOrigin(c),f=pi(l.getTileSize(c)),g=l.getResolution(c);let y;if(d instanceof ew||d instanceof Lg)y=d.getImage();else if(!(d instanceof Tg)||(y=wh(d.getData()),!y))continue;const _=Math.floor(u*((r[0]-p[0])/g-h[1]*f[0])),b=Math.floor(u*((p[1]-r[1])/g-h[2]*f[1])),m=Math.round(u*s.getGutterForProjection(a.projection));return this.getImageData(y,_+m,b+m)}return null}prepareFrame(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const i=this.getLayer().getSource();if(!i)return!1;const n=i.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===i.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,i,n,r,o){const a=e.viewState,s=this.getLayer(),l=s.getRenderSource(),u=l.getTileGridForProjection(a.projection),c=et(l);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=s.getMapInternal(),p=Math.max(n-o,u.getMinZoom(),u.getZForResolution(Math.min(s.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let f=n;f>=p;--f){const g=u.getTileRangeForExtentAndZ(i,f,this.tempTileRange_),y=u.getResolution(f);for(let _=g.minX;_<=g.maxX;++_)for(let b=g.minY;b<=g.maxY;++b){const m=this.getTile(f,_,b,e);if(!m||!op(r,m,f))continue;const v=m.getKey();if(h[v]=!0,m.getState()===ci&&!e.tileQueue.isKeyQueued(v)){const S=Sh(f,_,b,this.tempTileCoord_);e.tileQueue.enqueue([m,c,u.getTileCoordCenter(S),y])}}}}findStaleTile_(e,i){const n=this.tileCache_,r=e[0],o=e[1],a=e[2],s=this.getStaleKeys();for(let l=0;l<s.length;++l){const u=rp(s[l],r,o,a);if(n.containsKey(u)){const c=n.get(u);if(c.getState()===jt)return c.endTransition(et(this)),op(i,c,r),!0}}return!1}findAltTiles_(e,i,n,r){const o=e.getTileRangeForTileCoordAndZ(i,n,this.tempTileRange_);if(!o)return!1;let a=!0;const s=this.tileCache_,l=this.getLayer().getRenderSource().getKey();for(let u=o.minX;u<=o.maxX;++u)for(let c=o.minY;c<=o.maxY;++c){const h=rp(l,n,u,c);let d=!1;if(s.containsKey(h)){const p=s.get(h);p.getState()===jt&&(op(r,p,n),d=!0)}d||(a=!1)}return a}renderFrame(e,i){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,a=r.resolution,s=r.center,l=e.pixelRatio,u=this.getLayer(),c=u.getSource(),h=c.getRevision(),d=c.getTileGridForProjection(o),p=d.getZForResolution(a,c.zDirection),f=d.getResolution(p),g=c.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==g&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=g):this.renderedSourceKey_=g;let y=e.extent;const _=c.getTilePixelRatio(l);this.prepareContainer(e,i);const b=this.context.canvas.width,m=this.context.canvas.height,v=n.extent&&Nn(n.extent);v&&(y=Pi(y,Nn(n.extent)));const S=f*b/2/_,C=f*m/2/_,k=[s[0]-S,s[1]-C,s[0]+S,s[1]+C],L={};this.renderedTiles.length=0;const A=u.getPreload();if(e.nextExtent){const B=d.getZForResolution(r.nextResolution,c.zDirection),F=Ey(e,e.nextExtent);this.enqueueTiles(e,F,B,L,A)}const q=Ey(e,y);if(this.enqueueTiles(e,q,p,L,0),A>0&&setTimeout(()=>{this.enqueueTiles(e,q,p-1,L,A-1)},0),!(p in L))return this.container;const P=et(this),T=e.time;for(const B of L[p]){const F=B.getState();if((B instanceof Lg||B instanceof Mk)&&F===ai)continue;const H=B.tileCoord;if(F===jt&&B.getAlpha(P,T)===1){B.endTransition(P);continue}if(this.renderComplete=!1,this.findStaleTile_(H,L)){kk(L,B,p),e.animate=!0;continue}if(this.findAltTiles_(d,H,p+1,L))continue;const ee=d.getMinZoom();for(let ne=p-1;ne>=ee&&!this.findAltTiles_(d,H,ne,L);--ne);}const R=f/a*l/_,M=this.getRenderContext(e);Zn(this.tempTransform,b/2,m/2,R,R,0,-b/2,-m/2),n.extent&&this.clipUnrotated(M,e,v),c.getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,e);const I=Object.keys(L).map(Number);let E;I.sort(Hn);const O=[],V=[];for(let B=I.length-1;B>=0;--B){const F=I[B],H=c.getTilePixelSize(F,l,o),ee=d.getResolution(F)/f,ne=H[0]*ee*R,te=H[1]*ee*R,N=d.getTileCoordForCoordAndZ(er(k),F),z=d.getTileCoordExtent(N),j=ti(this.tempTransform,[_*(z[0]-k[0])/f,_*(k[3]-z[3])/f]),Z=_*c.getGutterForProjection(o);for(const W of L[F]){if(W.getState()!==jt)continue;const U=W.tileCoord,ye=N[1]-U[1],ue=Math.round(j[0]-(ye-1)*ne),he=N[2]-U[2],fe=Math.round(j[1]-(he-1)*te),Ce=Math.round(j[0]-ye*ne),Ie=Math.round(j[1]-he*te),me=ue-Ce,we=fe-Ie,qe=I.length===1;let Ge=!1;E=[Ce,Ie,Ce+me,Ie,Ce+me,Ie+we,Ce,Ie+we];for(let oe=0,ce=O.length;oe<ce;++oe)if(!qe&&F<V[oe]){const X=O[oe];Ut([Ce,Ie,Ce+me,Ie+we],[X[0],X[3],X[4],X[7]])&&(Ge||(M.save(),Ge=!0),M.beginPath(),M.moveTo(E[0],E[1]),M.lineTo(E[2],E[3]),M.lineTo(E[4],E[5]),M.lineTo(E[6],E[7]),M.moveTo(X[6],X[7]),M.lineTo(X[4],X[5]),M.lineTo(X[2],X[3]),M.lineTo(X[0],X[1]),M.clip())}O.push(E),V.push(F),this.drawTile(W,e,Ce,Ie,me,we,Z,qe),Ge&&M.restore(),this.renderedTiles.unshift(W),this.updateUsedTiles(e.usedTiles,c,W)}}return this.renderedRevision=h,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!xr(this.renderedExtent_,k),this.renderedExtent_=k,this.renderedPixelRatio=l,this.renderedProjection=o,this.postRender(this.context,e),n.extent&&M.restore(),M.imageSmoothingEnabled=!0,e.postRenderFunctions.push((B,F)=>{const H=et(c),ee=F.wantedTiles[H],ne=ee?Object.keys(ee).length:0;this.updateCacheSize(ne),this.tileCache_.expireCache()}),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*e)}drawTile(e,i,n,r,o,a,s,l){let u;if(e instanceof Tg){if(u=wh(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(i),h=et(this),d=i.layerStatesArray[i.layerIndex],p=d.opacity*(l?e.getAlpha(h,i.time):1),f=p!==c.globalAlpha;f&&(c.save(),c.globalAlpha=p),c.drawImage(u,s,s,u.width-2*s,u.height-2*s,n,r,o,a),f&&c.restore(),p!==d.opacity?i.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,i,n){const r=et(i);r in e||(e[r]={}),e[r][n.getKey()]=!0}}class oi extends bk{constructor(e){super(e)}createRenderer(){return new nw(this,{cacheSize:this.getCacheSize()})}}var Tk="tileloadstart",Ek="tileloadend",Lk="tileloaderror";class Ds extends gn{constructor(e){super(),this.projection=st(e.projection),this.attributions_=Ly(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(n,r){i.viewResolver=n,i.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Ly(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Ly(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const Ma=[0,0,0];class Qr{constructor(e){let i;if(this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,_t(function(r,o,a){const s=o||Hn;return r.every(function(l,u){if(u===0)return!0;const c=s(r[u-1],l);return!(c>0||c===0)})}(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order"),!e.origins)for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(i){if(this.resolutions_[r]/this.resolutions_[r+1]!==i){i=void 0;break}}else i=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,_t(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n===void 0||this.origin_||this.origins_||(this.origin_=er(n)),_t(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,_t(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Pm,_t(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const a=new vv(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const s=this.getTileRangeForExtentAndZ(n,o);a.minX=Math.max(s.minX,a.minX),a.maxX=Math.min(s.maxX,a.maxX),a.minY=Math.max(s.minY,a.minY),a.maxY=Math.min(s.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,i,n){const r=this.getTileRangeForExtentAndZ(e,i);for(let o=r.minX,a=r.maxX;o<=a;++o)for(let s=r.minY,l=r.maxY;s<=l;++s)n([i,o,s])}forEachTileCoordParentTileRange(e,i,n,r){let o,a,s,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):l=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(a!==void 0&&s!==void 0?(a=Math.floor(a/2),s=Math.floor(s/2),o=Ca(a,a,s,s,n)):o=this.getTileRangeForExtentAndZ(l,u,n),i(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,i,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=2*e[1],a=2*e[2];return Ca(o,o+1,a,a+1,i)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,i)}return null}getTileRangeForTileCoordAndZ(e,i,n){if(i>this.maxZoom||i<this.minZoom)return null;const r=e[0],o=e[1],a=e[2];if(i===r)return Ca(o,a,o,a,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,i-r),u=Math.floor(o*l),c=Math.floor(a*l);return i<r?Ca(u,u,c,c,n):Ca(u,Math.floor(l*(o+1))-1,c,Math.floor(l*(a+1))-1,n)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,i,n)}getTileRangeForExtentAndZ(e,i,n){this.getTileCoordForXYAndZ_(e[0],e[3],i,!1,Ma);const r=Ma[1],o=Ma[2];return this.getTileCoordForXYAndZ_(e[2],e[1],i,!0,Ma),Ca(r,Ma[1],o,Ma[2],n)}getTileCoordCenter(e){const i=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=pi(this.getTileSize(e[0]),this.tmpSize_);return[i[0]+(e[1]+.5)*r[0]*n,i[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,i){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=pi(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*r,s=n[1]-(e[2]+1)*o[1]*r;return Kn(a,s,a+o[0]*r,s+o[1]*r,i)}getTileCoordForCoordAndResolution(e,i,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],i,!1,n)}getTileCoordForXYAndResolution_(e,i,n,r,o){const a=this.getZForResolution(n),s=n/this.getResolution(a),l=this.getOrigin(a),u=pi(this.getTileSize(a),this.tmpSize_);let c=s*(e-l[0])/n/u[0],h=s*(l[1]-i)/n/u[1];return r?(c=Vr(c,5)-1,h=Vr(h,5)-1):(c=Vu(c,5),h=Vu(h,5)),Sh(a,c,h,o)}getTileCoordForXYAndZ_(e,i,n,r,o){const a=this.getOrigin(n),s=this.getResolution(n),l=pi(this.getTileSize(n),this.tmpSize_);let u=(e-a[0])/s/l[0],c=(a[1]-i)/s/l[1];return r?(u=Vr(u,5)-1,c=Vr(c,5)-1):(u=Vu(u,5),c=Vu(c,5)),Sh(n,u,c,o)}getTileCoordForCoordAndZ(e,i,n){return this.getTileCoordForXYAndZ_(e[0],e[1],i,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,i){return Dt(sh(this.resolutions_,e,i||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,i){return hx(i,0,i.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const i=this.resolutions_.length,n=new Array(i);for(let r=this.minZoom;r<i;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}class Ik extends Qr{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function rw(t){let e=t.getDefaultTileGrid();return e||(e=function(i,n,r,o){const a=Iu(i);return function(s,l,u,c){c=c!==void 0?c:"top-left";const h=ow(s,l,u);return new Qr({extent:s,origin:aM(s,c),resolutions:h,tileSize:u})}(a,n,r,o)}(t),t.setDefaultTileGrid(e)),e}function ud(t){const e=t||{},i=e.extent||st("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ow(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Qr(n)}function ow(t,e,i,n){e=e!==void 0?e:42,i=pi(i!==void 0?i:Pm);const r=Yt(t),o=rt(t);n=n>0?n:Math.max(o/i[0],r/i[1]);const a=e+1,s=new Array(a);for(let l=0;l<a;++l)s[l]=n/Math.pow(2,l);return s}function Iu(t){let e=(t=st(t)).getExtent();if(!e){const i=180*br.degrees/t.getMetersPerUnit();e=Kn(-i,-i,i,i)}return e}class aw extends Ds{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const i=[256,256];this.tileGrid&&pi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tmpSize=[0,0],this.key_=e.key||et(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const i=e?this.getTileGridForProjection(e):this.tileGrid;return i?i.getResolutions():null}getTile(e,i,n,r,o){return Xe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:rw(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,i,n){const r=this.getTileGridForProjection(n),o=this.getTilePixelRatio(i),a=pi(r.getTileSize(e),this.tmpSize);return o==1?a:yx(a,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,i){i=i!==void 0?i:this.getProjection();const n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=function(r,o,a){const s=o[0],l=r.getTileCoordCenter(o),u=Iu(a);if(!ia(u,l)){const c=rt(u),h=Math.ceil((u[0]-l[0])/c);return l[0]+=c*h,r.getTileCoordForCoordAndZ(l,s)}return o}(n,e,i)),function(r,o){const a=r[0],s=r[1],l=r[2];if(o.getMinZoom()>a||a>o.getMaxZoom())return!1;const u=o.getFullTileRange(a);return!u||u.containsXY(s,l)}(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Pk extends fn{constructor(e,i){super(e),this.tile=i}}function Ig(t,e){const i=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&i.push(r+"="+encodeURIComponent(e[r]))});const n=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}const qk=/\{z\}/g,Rk=/\{x\}/g,Fk=/\{y\}/g,Ak=/\{-y\}/g;function yv(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),r=i[2].charCodeAt(0);let o;for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let r=parseInt(i[1],10);r<=n;r++)e.push(t.replace(i[0],r.toString()));return e}return e.push(t),e}function Ok(t,e){return function(i,n,r){if(!i)return;let o;const a=i[0];if(e){const s=e.getFullTileRange(a);s&&(o=s.getHeight()-1)}return function(s,l,u,c,h){return s.replace(qk,l.toString()).replace(Rk,u.toString()).replace(Fk,c.toString()).replace(Ak,function(){if(h===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(h-c).toString()})}(t,a,i[1],i[2],o)}}function sw(t,e){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=Ok(t[r],e);return Pg(n)}function Pg(t){return t.length===1?t[0]:function(e,i,n){if(!e)return;const r=Uo(iw(e),t.length);return t[r](e,i,n)}}class cd extends aw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===cd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const i=e.target,n=et(i),r=i.getState();let o;r==wr?(this.tileLoadingKeys_[n]=!0,o=Tk):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=r==Kt?Lk:r==jt?Ek:void 0),o!=null&&this.dispatchEvent(new Pk(o,i))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,i){this.tileUrlFunction=e,i!==void 0?this.setKey(i):this.changed()}setUrl(e){const i=yv(e);this.urls=i,this.setUrls(i)}setUrls(e){this.urls=e;const i=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(sw(e,this.tileGrid),i):this.setKey(i)}tileUrlFunction(e,i,n){}}class Pu extends cd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:zk,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate===void 0||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ew,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Xo(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const i=this.getProjection();if(this.tileGrid&&(!i||Xo(i,e)))return this.tileGrid;const n=et(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=rw(e)),this.tileGridForProjection[n]}createTile_(e,i,n,r,o,a){const s=[e,i,n],l=this.getTileCoordForTileUrlFunction(s,o),u=l?this.tileUrlFunction(l,r,o):void 0,c=new this.tileClass(s,u!==void 0?ci:ai,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=a,c.addEventListener(Ft,this.handleTileChange.bind(this)),c}getTile(e,i,n,r,o){const a=this.getProjection();if(!a||!o||Xo(a,o))return this.getTileInternal(e,i,n,r,a||o);const s=[e,i,n],l=this.getKey(),u=this.getTileGridForProjection(a),c=this.getTileGridForProjection(o),h=this.getTileCoordForTileUrlFunction(s,o),d=new Lg(a,u,o,c,s,h,this.getTilePixelRatio(r),this.getGutter(),(p,f,g,y)=>this.getTileInternal(p,f,g,y,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(e,i,n,r,o){const a=this.getKey();return this.createTile_(e,i,n,r,o,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,i){const n=st(e);if(n){const r=et(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=i)}}}function zk(t,e){t.getImage().src=e}class ma extends Pu{constructor(e){const i=(e=e||{}).projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:ud({extent:Iu(i),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class Sn extends gn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const i=e;this.setGeometry(i)}else{const i=e;this.setProperties(i)}}clone(){const e=new Sn(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const i=this.getGeometry();i&&e.setGeometry(i.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Lt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=ht(e,Ft,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function(i){if(typeof i=="function")return i;let n;return Array.isArray(i)?n=i:(_t(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),n=[i]),function(){return n}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}class Iy{constructor(e){this.rbush_=new mx(e),this.items_={}}insert(e,i){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:i};this.rbush_.insert(n),this.items_[et(i)]=n}load(e,i){const n=new Array(i.length);for(let r=0,o=i.length;r<o;r++){const a=e[r],s=i[r],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};n[r]=l,this.items_[et(s)]=l}this.rbush_.load(n)}remove(e){const i=et(e),n=this.items_[i];return delete this.items_[i],this.rbush_.remove(n)!==null}update(e,i){const n=this.items_[et(i)];xr([n.minX,n.minY,n.maxX,n.maxY],e)||(this.remove(i),this.insert(e,i))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(e){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(i).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,i){return this.forEach_(this.getInExtent(e),i)}forEach_(e,i){let n;for(let r=0,o=e.length;r<o;r++)if(n=i(e[r]),n)return n;return n}isEmpty(){return ro(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const i=this.rbush_.toJSON();return Kn(i.minX,i.minY,i.maxX,i.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const i in e.items_)this.items_[i]=e.items_[i]}}class hd extends ho{constructor(e,i,n){super(),n!==void 0&&i===void 0?this.setFlatCoordinates(n,e):(i=i||0,this.setCenterAndRadius(e,i,n))}clone(){const e=new hd(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){const o=this.flatCoordinates,a=e-o[0],s=i-o[1],l=a*a+s*s;if(l<r){if(l===0)for(let u=0;u<this.stride;++u)n[u]=o[u];else{const u=this.getRadius()/Math.sqrt(l);n[0]=o[0]+u*a,n[1]=o[1]+u*s;for(let c=2;c<this.stride;++c)n[c]=o[c]}return n.length=this.stride,l}return r}containsXY(e,i){const n=this.flatCoordinates,r=e-n[0],o=i-n[1];return r*r+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const i=this.flatCoordinates,n=i[this.stride]-i[0];return Kn(i[0]-n,i[1]-n,i[0]+n,i[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],i=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+i*i}getType(){return"Circle"}intersectsExtent(e){if(Ut(e,this.getExtent())){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||Fm(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const i=this.stride,n=this.flatCoordinates[i]-this.flatCoordinates[0],r=e.slice();r[i]=r[0]+n;for(let o=1;o<i;++o)r[i+o]=e[o];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,i,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let o=rx(r,0,e,this.stride);r[o++]=r[0]+i;for(let a=1,s=this.stride;a<s;++a)r[o++]=r[a];r.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,i){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,i){const n=this.getCenter(),r=this.getStride();this.setCenter(Gm(n,0,n.length,r,e,i,n)),this.changed()}}hd.prototype.transform;class tu extends nx{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Lt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)this.changeEventsKeys_.push(ht(e[i],Ft,this.changed,this))}clone(){const e=new tu(ap(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,i,n,r){if(r<pa(this.getExtent(),e,i))return r;const o=this.geometries_;for(let a=0,s=o.length;a<s;++a)r=o[a].closestPointXY(e,i,n,r);return r}containsXY(e,i){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)if(n[r].containsXY(e,i))return!0;return!1}computeExtent(e){Rs(e);const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)$b(e,i[n].getExtent());return e}getGeometries(){return ap(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].getType()===this.getType()?e=e.concat(i[n].getGeometriesArrayRecursive()):e.push(i[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=[],n=this.geometries_;let r=!1;for(let o=0,a=n.length;o<a;++o){const s=n[o],l=s.getSimplifiedGeometry(e);i.push(l),l!==s&&(r=!0)}return r?new tu(i):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)if(i[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,i){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)n[r].rotate(e,i);this.changed()}scale(e,i,n){n||(n=$i(this.getExtent()));const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)r[o].scale(e,i,n);this.changed()}setGeometries(e){this.setGeometriesArray(ap(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].applyTransform(e);this.changed()}translate(e,i){const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)n[r].translate(e,i);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ap(t){return t.map(e=>e.clone())}function Ch(t,e,i,n,r,o,a){let s,l;const u=(i-e)/n;if(u===1)s=e;else if(u===2)s=e,l=r;else if(u!==0){let c=t[e],h=t[e+1],d=0;const p=[0];for(let y=e+n;y<i;y+=n){const _=t[y],b=t[y+1];d+=Math.sqrt((_-c)*(_-c)+(b-h)*(b-h)),p.push(d),c=_,h=b}const f=r*d,g=function(y,_,b){let m,v;b=b||Hn;let S=0,C=y.length,k=!1;for(;S<C;)m=S+(C-S>>1),v=+b(y[m],_),v<0?S=m+1:(C=m,k=!v);return k?S:~S}(p,f);g<0?(l=(f-p[-g-2])/(p[-g-1]-p[-g-2]),s=e+(-g-2)*n):s=e+g*n}a=a>1?a:2,o=o||new Array(a);for(let c=0;c<a;++c)o[c]=s===void 0?NaN:l===void 0?t[s+c]:Xi(t[s+c],t[s+n+c],l);return o}function qg(t,e,i,n,r,o){if(i==e)return null;let a;if(r<t[e+n-1])return o?(a=t.slice(e,e+n),a[n-1]=r,a):null;if(t[i-1]<r)return o?(a=t.slice(i-n,i),a[n-1]=r,a):null;if(r==t[e+n-1])return t.slice(e,e+n);let s=e/n,l=i/n;for(;s<l;){const h=s+l>>1;r<t[(h+1)*n-1]?l=h:s=h+1}const u=t[s*n-1];if(r==u)return t.slice((s-1)*n,(s-1)*n+n);const c=(r-u)/(t[(s+1)*n-1]-u);a=[];for(let h=0;h<n-1;++h)a.push(Xi(t[(s-1)*n+h],t[s*n+h],c));return a.push(r),a}function lw(t,e,i,n){let r=t[e],o=t[e+1],a=0;for(let s=e+n;s<i;s+=n){const l=t[s],u=t[s+1];a+=Math.sqrt((l-r)*(l-r)+(u-o)*(u-o)),r=l,o=u}return a}class tn extends ho{constructor(e,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i===void 0||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}appendCoordinate(e){Wn(this.flatCoordinates,e),this.changed()}clone(){const e=new tn(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){return r<pa(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Hm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Um(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,i,n,r))}forEachSegment(e){return cx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0&&i,qg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i))}getCoordinates(){return Gr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,i){return Ch(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,this.stride)}getLength(){return lw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const i=[];return i.length=ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,i,0),new tn(i,"XY")}getType(){return"LineString"}intersectsExtent(e){return sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=od(this.flatCoordinates,0,e,this.stride),this.changed()}}class oa extends ho{constructor(e,i,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(i!==void 0&&n)this.setFlatCoordinates(i,e),this.ends_=n;else{const r=e,o=[],a=[];for(let l=0,u=r.length;l<u;++l)Wn(o,r[l].getFlatCoordinates()),a.push(o.length);const s=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(e){Wn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new oa(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,i,n,r){return r<pa(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Xm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,i,n,r))}getCoordinateAtM(e,i,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(i=i!==void 0&&i,n=n!==void 0&&n,function(r,o,a,s,l,u,c){if(c)return qg(r,o,a[a.length-1],s,l,u);let h;if(l<r[s-1])return u?(h=r.slice(0,s),h[s-1]=l,h):null;if(r[r.length-1]<l)return u?(h=r.slice(r.length-s),h[s-1]=l,h):null;for(let d=0,p=a.length;d<p;++d){const f=a[d];if(o!=f){if(l<r[o+s-1])return null;if(l<=r[f-1])return qg(r,o,f,s,l,!1);o=f}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,i,n))}getCoordinates(){return Yl(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new tn(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,i=this.ends_,n=this.layout,r=[];let o=0;for(let a=0,s=i.length;a<s;++a){const l=i[a],u=new tn(e.slice(o,l),n);r.push(u),o=l}return r}getFlatMidpoints(){const e=[],i=this.flatCoordinates;let n=0;const r=this.ends_,o=this.stride;for(let a=0,s=r.length;a<s;++a){const l=r[a];Wn(e,Ch(i,n,l,o,.5)),n=l}return e}getSimplifiedGeometryInternal(e){const i=[],n=[];return i.length=ax(this.flatCoordinates,0,this.ends_,this.stride,e,i,0,n),new oa(i,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return function(i,n,r,o,a){for(let s=0,l=r.length;s<l;++s){if(sd(i,n,r[s],o,a))return!0;n=r[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Xl(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class js extends ho{constructor(e,i){super(),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}appendPoint(e){Wn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new js(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,i,n,r){if(r<pa(this.getExtent(),e,i))return r;const o=this.flatCoordinates,a=this.stride;for(let s=0,l=o.length;s<l;s+=a){const u=fr(e,i,o[s],o[s+1]);if(u<r){r=u;for(let c=0;c<a;++c)n[c]=o[s+c];n.length=a}}return r}getCoordinates(){return Gr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const i=this.flatCoordinates.length/this.stride;return e<0||i<=e?null:new un(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,i=this.layout,n=this.stride,r=[];for(let o=0,a=e.length;o<a;o+=n){const s=new un(e.slice(o,o+n),i);r.push(s)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const i=this.flatCoordinates,n=this.stride;for(let r=0,o=i.length;r<o;r+=n)if(qm(e,i[r],i[r+1]))return!0;return!1}setCoordinates(e,i){this.setLayout(i,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=od(this.flatCoordinates,0,e,this.stride),this.changed()}}function uw(t,e,i,n){const r=[];let o=[1/0,1/0,-1/0,-1/0];for(let a=0,s=i.length;a<s;++a){const l=i[a];o=Rm(t,e,l[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}class aa extends ho{constructor(e,i,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const r=e,o=[],a=[];for(let s=0,l=r.length;s<l;++s){const u=r[s],c=o.length,h=u.getEnds();for(let d=0,p=h.length;d<p;++d)h[d]+=c;Wn(o,u.getFlatCoordinates()),a.push(h)}i=r.length===0?this.getLayout():r[0].getLayout(),e=o,n=a}i!==void 0&&n?(this.setFlatCoordinates(i,e),this.endss_=n):this.setCoordinates(e,i)}appendPolygon(e){let i;if(this.flatCoordinates){const n=this.flatCoordinates.length;Wn(this.flatCoordinates,e.getFlatCoordinates()),i=e.getEnds().slice();for(let r=0,o=i.length;r<o;++r)i[r]+=n}else this.flatCoordinates=e.getFlatCoordinates().slice(),i=e.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()}clone(){const e=this.endss_.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=this.endss_[r].slice();const n=new aa(this.flatCoordinates.slice(),this.layout,i);return n.applyProperties(this),n}closestPointXY(e,i,n,r){return r<pa(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(o,a,s,l,u){for(let c=0,h=s.length;c<h;++c){const d=s[c];u=Wm(o,a,d,l,u),a=d[d.length-1]}return u}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(o,a,s,l,u,c,h,d,p,f,g){g=g||[NaN,NaN];for(let y=0,_=s.length;y<_;++y){const b=s[y];f=Xm(o,a,b,l,u,c,h,d,p,f,g),a=b[b.length-1]}return f}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,i,n,r))}containsXY(e,i){return function(n,r,o,a,s,l){if(o.length===0)return!1;for(let u=0,c=o.length;u<c;++u){const h=o[u];if(Km(n,r,h,a,s,l))return!0;r=h[h.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,i)}getArea(){return function(e,i,n,r){let o=0;for(let a=0,s=n.length;a<s;++a){const l=n[a];o+=lx(e,i,l,r),i=l[l.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let i;return e!==void 0?(i=this.getOrientedFlatCoordinates().slice(),zf(i,0,this.endss_,this.stride,e)):i=this.flatCoordinates,Of(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=uw(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ux(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new js(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;px(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=zf(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const i=[],n=[];return i.length=function(r,o,a,s,l,u,c,h){for(let d=0,p=a.length;d<p;++d){const f=a[d],g=[];c=Ym(r,o,f,s,l,u,c,g),h.push(g),o=f[f.length-1]}return c}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),i,0,n),new aa(i,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let i;if(e===0)i=0;else{const o=this.endss_[e-1];i=o[o.length-1]}const n=this.endss_[e].slice(),r=n[n.length-1];if(i!==0)for(let o=0,a=n.length;o<a;++o)n[o]-=i;return new Gi(this.flatCoordinates.slice(i,r),this.layout,n)}getPolygons(){const e=this.layout,i=this.flatCoordinates,n=this.endss_,r=[];let o=0;for(let a=0,s=n.length;a<s;++a){const l=n[a].slice(),u=l[l.length-1];if(o!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=o;const c=new Gi(i.slice(o,u),e,l);r.push(c),o=u}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return function(i,n,r,o,a){for(let s=0,l=r.length;s<l;++s){const u=r[s];if(dx(i,n,u,o,a))return!0;n=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,i){this.setLayout(i,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=ox(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Py=[1,0,0,1,0,0];class xi{constructor(e,i,n,r,o,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=i,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Vb(this.flatCoordinates_):Rm(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=$i(this.getExtent());this.flatInteriorPoints_=Zm(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=fx(this.flatCoordinates_,this.ends_),i=uw(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=ux(this.flatCoordinates_,0,e,2,i)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ch(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let i=0;const n=this.ends_;for(let r=0,o=n.length;r<o;++r){const a=n[r],s=Ch(e,i,a,2,.5);Wn(this.flatMidpoints_,s),i=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,i){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const i=(e=st(e)).getExtent(),n=e.getWorldExtent();if(i&&n){const r=Yt(n)/Yt(i);Zn(Py,n[0],n[3],r,-r,0,0,0),$r(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Py,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new xi(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Ob((e,i)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),i&&this.simplifiedGeometry_.applyTransform(i);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=ad(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=ax(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=Ym(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r)}return r&&(this.simplifiedGeometry_=new xi(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}xi.prototype.getFlatCoordinates=xi.prototype.getOrientedFlatCoordinates;var ic="addfeature",Dk="changefeature",jk="clear",sp="removefeature",Bk="featuresloadstart",Nk="featuresloadend",Vk="featuresloaderror";function $k(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Gk(t,e){return[t]}function cw(t,e,i,n,r,o,a){const s=new XMLHttpRequest;s.open("GET",typeof t=="function"?t(i,n,r):t,!0),e.getType()=="arraybuffer"&&(s.responseType="arraybuffer"),s.withCredentials=!1,s.onload=function(l){if(!s.status||s.status>=200&&s.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=s.responseText:u=="xml"?c=s.responseXML||s.responseText:u=="arraybuffer"&&(c=s.response),c?o(e.readFeatures(c,{extent:i,featureProjection:r}),e.readProjection(c)):a()}catch{a()}}else a()},s.onerror=a,s.send()}function qy(t,e){return function(i,n,r,o,a){const s=this;cw(t,e,i,n,r,function(l,u){s.addFeatures(l),o!==void 0&&o(l)},a||ys)}}class Ir extends fn{constructor(e,i,n){super(e),this.feature=i,this.features=n}}class Jr extends Ds{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX===void 0||e.wrapX}),this.on,this.once,this.un,this.loader_=ys,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0||e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(_t(this.format_,"`format` must be set when `url` is set"),this.loader_=qy(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:$k;const i=e.useSpatialIndex===void 0||e.useSpatialIndex;let n,r;this.featuresRtree_=i?new Iy:null,this.loadedExtentsRtree_=new Iy,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),i||n!==void 0||(n=new an(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const i=et(e);if(!this.addToIndex_(i,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(i,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[i]=e;this.dispatchEvent(new Ir(ic,e))}setupChangeEvents_(e,i){i instanceof xi||(this.featureChangeKeys_[e]=[ht(i,Ft,this.handleFeatureChange_,this),ht(i,ms,this.handleFeatureChange_,this)])}addToIndex_(e,i){let n=!0;if(i.getId()!==void 0){const r=String(i.getId());if(r in this.idIndex_)if(i instanceof xi){const o=this.idIndex_[r];o instanceof xi?Array.isArray(o)?o.push(i):this.idIndex_[r]=[o,i]:n=!1}else n=!1;else this.idIndex_[r]=i}return n&&(_t(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=i),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const i=[],n=[],r=[];for(let o=0,a=e.length;o<a;o++){const s=e[o],l=et(s);this.addToIndex_(l,s)&&n.push(s)}for(let o=0,a=n.length;o<a;o++){const s=n[o],l=et(s);this.setupChangeEvents_(l,s);const u=s.getGeometry();if(u){const c=u.getExtent();i.push(c),r.push(s)}else this.nullGeometryFeatures_[l]=s}if(this.featuresRtree_&&this.featuresRtree_.load(i,r),this.hasListener(ic))for(let o=0,a=n.length;o<a;o++)this.dispatchEvent(new Ir(ic,n[o]))}bindFeaturesCollection_(e){let i=!1;this.addEventListener(ic,function(n){i||(i=!0,e.push(n.feature),i=!1)}),this.addEventListener(sp,function(n){i||(i=!0,e.remove(n.feature),i=!1)}),e.addEventListener(Go,n=>{i||(i=!0,this.addFeature(n.element),i=!1)}),e.addEventListener(Ho,n=>{i||(i=!0,this.removeFeature(n.element),i=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Lt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(n);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const i=new Ir(jk);this.dispatchEvent(i),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,i){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const o=r.getGeometry();if(o instanceof xi||o.intersectsCoordinate(e))return i(r)})}forEachFeatureInExtent(e,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(e,i){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof xi||r.intersectsExtent(e)){const o=i(n);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ro(this.nullGeometryFeatures_)||Wn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const i=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){i.push(n)}),i}getFeaturesInExtent(e,i){if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=Am(e,i);return[].concat(...n.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,i){const n=e[0],r=e[1];let o=null;const a=[NaN,NaN];let s=1/0;const l=[-1/0,-1/0,1/0,1/0];return i=i||vs,this.featuresRtree_.forEachInExtent(l,function(u){if(i(u)){const c=u.getGeometry(),h=s;if(s=c instanceof xi?0:c.closestPointXY(n,r,a,s),s<h){o=u;const d=Math.sqrt(s);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const i=this.idIndex_[e.toString()];return i!==void 0?i:null}getFeatureByUid(e){const i=this.uidIndex_[e];return i!==void 0?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const i=e.target,n=et(i),r=i.getGeometry();if(r){const a=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,i)):this.featuresRtree_&&this.featuresRtree_.update(a,i)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[n]=i);const o=i.getId();if(o!==void 0){const a=o.toString();this.idIndex_[a]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[a]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[n]=i;this.changed(),this.dispatchEvent(new Ir(Dk,i))}hasFeature(e){const i=e.getId();return i!==void 0?i in this.idIndex_:et(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ro(this.nullGeometryFeatures_):!this.featuresCollection_||this.featuresCollection_.getLength()===0}loadFeatures(e,i,n){const r=this.loadedExtentsRtree_,o=this.strategy_(e,i,n);for(let a=0,s=o.length;a<s;++a){const l=o[a];r.forEachInExtent(l,function(u){return kn(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ir(Bk)),this.loader_.call(this,l,i,n,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ir(Nk,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ir(Vk))}),r.insert(l,{extent:l.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const i=this.loadedExtentsRtree_;let n;i.forEachInExtent(e,function(r){if(xr(r.extent,e))return n=r,!0}),n&&i.remove(n)}removeFeatures(e){let i=!1;for(let n=0,r=e.length;n<r;++n)i=this.removeFeatureInternal(e[n])||i;i&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const i=et(e);if(!(i in this.uidIndex_))return!1;i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[i]?.forEach(Lt),delete this.featureChangeKeys_[i];const n=e.getId();if(n!==void 0){const r=n.toString(),o=this.idIndex_[r];o===e?delete this.idIndex_[r]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[r]=o[0]))}return delete this.uidIndex_[i],this.hasListener(sp)&&this.dispatchEvent(new Ir(sp,e)),!0}removeFromIdIndex_(e){for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i];break}}setLoader(e){this.loader_=e}setUrl(e){_t(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(qy(e,this.format_))}}function Rg(t){return Array.isArray(t)?Math.min(...t):t}class Hk extends rv{constructor(e,i,n,r,o,a,s){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=i.getExtent();u&&i.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?Pi(n,u):n,h=Eg(e,i,$i(c),r),d=new gv(e,i,c,l,.5*h,r),p=d.calculateSourceExtent(),f=fa(p)?null:a(p,h,o),g=f?Hi:vx,y=f?f.getPixelRatio():1;super(n,r,y,g),this.targetProj_=i,this.maxSourceExtent_=l,this.triangulation_=d,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=f,this.sourcePixelRatio_=y,this.interpolate_=s,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==qn&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==At){const i=rt(this.targetExtent_)/this.targetResolution_,n=Yt(this.targetExtent_)/this.targetResolution_;this.canvas_=mv(i,n,this.sourcePixelRatio_,Rg(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Hi){this.state=qn,this.changed();const e=this.sourceImage_.getState();e==At||e==Ln?this.reproject_():(this.sourceListenerKey_=ht(this.sourceImage_,Ft,i=>{const n=this.sourceImage_.getState();n!=At&&n!=Ln||(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Lt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Wk="imageloadstart",Uk="imageloadend",Xk="imageloaderror";class Yk extends fn{constructor(e,i){super(e),this.image=i}}class hw extends Ds{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate===void 0||e.interpolate}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!e.loader&&e.loader.length===0,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const i=this.getResolutions();return i&&(e=i[sh(i,e,0)]),e}getImage(e,i,n,r){const o=this.getProjection();if(!o||!r||Xo(o,r))return o&&(r=o),this.getImageInternal(e,i,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Xo(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==i&&xr(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Hk(o,r,e,i,n,(a,s,l)=>this.getImageInternal(a,s,l,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,i,n,r){if(this.loader){const o=function(s,l,u,c){const h=l/u,d=$i(s),p=Vr(rt(s)/h,4),f=Vr(Yt(s)/h,4),g=Vr((c-1)*p/2,4),y=p+2*g,_=Vr((c-1)*f/2,4);return dh(d,h,0,[y,f+2*_])}(e,i,n,1),a=this.findNearestResolution(i);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&kn(this.wantedExtent_,o)||kn(this.image.getExtent(),o))&&(this.wantedResolution_&&Rg(this.wantedResolution_)===a||Rg(this.image.getResolution())===a)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=a,this.image=new rv(o,a,n,this.loader),this.image.addEventListener(Ft,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const i=e.target;let n;switch(i.getState()){case qn:this.loading=!0,n=Wk;break;case At:this.loading=!1,n=Uk;break;case Ln:this.loading=!1,n=Xk;break;default:return}this.hasListener(n)&&this.dispatchEvent(new Yk(n,i))}}class Kk extends rv{constructor(e,i,n,r,o){super(e,i,n,o!==void 0?Hi:At),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Ln):this.state=At,this.changed()}load(){this.state==Hi&&(this.state=qn,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class Zk extends Lu{constructor(e,i,n,r,o,a){super(e,i,a),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ci&&(this.setState(wr),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,i){this.setFeatures(e)}onError(){this.setState(Kt)}setFeatures(e){this.features_=e,this.setState(jt)}setLoader(e){this.loader_=e}}const Ry=[];class Qk extends Lu{constructor(e,i,n,r,o){super(e,i,{transition:0}),this.context_=null,this.executorGroups=[],this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=Ot(1,1,Ry)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const i=et(e);return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[i]}load(){this.getSourceTiles()}release(){this.context_&&(na(this.context_),Ry.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}class ql extends cd{constructor(e){const i=e.projection||"EPSG:3857",n=e.extent||Iu(i),r=e.tileGrid||ud({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:i,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dw,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0||e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null||e.overlaps,this.tileClass=e.tileClass?e.tileClass:Zk,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,i,n){if(n.getState()===ci){n.setState(wr);const r=n.wrappedTileCoord,o=this.getTileGridForProjection(i),a=o.getTileCoordExtent(r),s=r[0],l=o.getResolution(s);Zr(a,-l,a);const u=this.tileGrid,c=u.getExtent();c&&Pi(a,c,a);const h=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(a,h,d=>{const p=this.tileUrlFunction(d,e,i);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(d,p?ci:ai,p,this.format_,this.tileLoadFunction));const f=this.sourceTiles_[p];n.sourceTiles.push(f),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(n.getKey());const g=f.getState();if(g<jt){const y=_=>{this.handleTileChange(_);const b=f.getState();if(b===jt||b===Kt){const m=f.getKey();m in n.errorTileKeys?f.getState()===jt&&delete n.errorTileKeys[m]:n.loadingSourceTiles--,b===Kt?n.errorTileKeys[m]=!0:f.removeEventListener(Ft,y),n.loadingSourceTiles===0&&n.setState(ro(n.errorTileKeys)?jt:Kt)}};f.addEventListener(Ft,y),n.loadingSourceTiles++}g===ci&&(f.extent=u.getTileCoordExtent(d),f.projection=i,f.resolution=u.getResolution(d[0]),f.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(d=>d.getState()===Kt)?Kt:jt)}return n.sourceTiles}removeSourceTiles(e){const i=e.sourceTiles;for(let n=0,r=i.length;n<r;++n){const o=i[n].getTileUrl(),a=this.getKey();if(!this.tileKeysBySourceTileUrl_[o])return;const s=this.tileKeysBySourceTileUrl_[o][a];s!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(s,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,i,n,r,o){const a=[e,i,n];let s=this.getTileCoordForTileUrlFunction(a,o);const l=this.getTileGrid().getExtent(),u=this.getTileGridForProjection(o);if(s&&l){const d=u.getTileCoordExtent(s);Zr(d,-u.getResolution(e),d),Ut(l,d)||(s=null)}let c=!0;if(s!==null){const d=this.tileGrid,p=u.getResolution(e),f=d.getZForResolution(p,1),g=u.getTileCoordExtent(s);Zr(g,-p,g),d.forEachTileCoord(g,f,y=>{c=c&&!this.tileUrlFunction(y,r,o)})}const h=new Qk(a,c?ai:ci,s,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return h.key=this.getKey(),h}getTileGridForProjection(e){const i=e.getCode();let n=this.tileGrids_[i];if(!n){const r=this.tileGrid,o=r.getResolutions().slice(),a=o.map(function(u,c){return r.getOrigin(c)}),s=o.map(function(u,c){return r.getTileSize(c)}),l=43;for(let u=o.length;u<l;++u)o.push(o[u-1]/2),a.push(a[u-1]),s.push(s[u-1]);n=new Qr({extent:r.getExtent(),origins:a,resolutions:o,tileSizes:s}),this.tileGrids_[i]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,i,n){const r=pi(this.getTileGridForProjection(n).getTileSize(e),this.tmpSize);return[Math.round(r[0]*i),Math.round(r[1]*i)]}}function dw(t,e){t.setLoader(function(i,n,r){cw(e,t.getFormat(),i,n,r,t.onLoad.bind(t),t.onError.bind(t))})}var Fy=class extends ma{constructor(t){let e;e=(t=t||{}).attributions!==void 0?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",n=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}};class Jk extends As{constructor(e){super(e=e||{})}}class e5 extends fv{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const i=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,r=e.viewState,o=r.resolution,a=this.getLayer().getSource(),s=e.viewHints;let l=e.extent;if(i.extent!==void 0&&(l=Pi(l,Nn(i.extent,r.projection))),!s[Zi]&&!s[En]&&!fa(l))if(a){const u=r.projection,c=a.getImage(l,o,n,u);c&&(this.loadImage(c)?this.image=c:c.getState()===vx&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const i=this.frameState;if(!i)return null;const n=this.getLayer(),r=ti(i.pixelToCoordinateTransform,e.slice()),o=n.getExtent();if(o&&!ia(o,r))return null;const a=this.image.getExtent(),s=this.image.getImage(),l=rt(a),u=Math.floor(s.width*((r[0]-a[0])/l));if(u<0||u>=s.width)return null;const c=Yt(a),h=Math.floor(s.height*((a[3]-r[1])/c));return h<0||h>=s.height?null:this.getImageData(s,u,h)}renderFrame(e,i){const n=this.image,r=n.getExtent(),o=n.getResolution(),[a,s]=Array.isArray(o)?o:[o,o],l=n.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,h=e.viewState,d=h.center,p=h.resolution,f=c*a/(p*l),g=c*s/(p*l);this.prepareContainer(e,i);const y=this.context.canvas.width,_=this.context.canvas.height,b=this.getRenderContext(e);let m=!1,v=!0;if(u.extent){const A=Nn(u.extent,h.projection);v=Ut(A,e.extent),m=v&&!kn(A,e.extent),m&&this.clipUnrotated(b,e,A)}const S=n.getImage(),C=Zn(this.tempTransform,y/2,_/2,f,g,0,l*(r[0]-d[0])/a,l*(d[1]-r[3])/s);this.renderedResolution=s*c/l;const k=S.width*C[0],L=S.height*C[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,e),v&&k>=.5&&L>=.5){const A=C[4],q=C[5],P=u.opacity;P!==1&&(b.save(),b.globalAlpha=P),b.drawImage(S,0,0,+S.width,+S.height,A,q,k,L),P!==1&&b.restore()}return this.postRender(this.context,e),m&&b.restore(),b.imageSmoothingEnabled=!0,this.container}}class pw extends Jk{constructor(e){super(e)}createRenderer(){return new e5(this)}getData(e){return super.getData(e)}}function fw(t){return function(e){const i=e.buffers,n=e.meta,r=e.imageOps,o=e.width,a=e.height,s=i.length,l=i[0].byteLength;if(r){const d=new Array(s);for(let p=0;p<s;++p)d[p]=new ImageData(new Uint8ClampedArray(i[p]),o,a);return t(d,n).data.buffer}const u=new Uint8ClampedArray(l),c=new Array(s),h=new Array(s);for(let d=0;d<s;++d)c[d]=new Uint8ClampedArray(i[d]),h[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let f=0;f<s;++f){const g=c[f];h[f][0]=g[d],h[f][1]=g[d+1],h[f][2]=g[d+2],h[f][3]=g[d+3]}const p=t(h,n);u[d]=p[0],u[d+1]=p[1],u[d+2]=p[2],u[d+3]=p[3]}return u.buffer}}function t5(t,e){const i=Object.keys(t.lib||{}).map(function(o){return"const "+o+" = "+t.lib[o].toString()+";"}),n=i.concat(["const __minion__ = ("+fw.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(n.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return r.addEventListener("message",e),r}class i5 extends bu{constructor(e){let i;super(),this.imageOps_=!!e.imageOps,i=e.threads===0?0:this.imageOps_?1:e.threads||1;const n=new Array(i);if(i)for(let r=0;r<i;++r)n[r]=t5(e,this.onWorkerMessage_.bind(this,r));else n[0]=function(r,o){const a=fw(r.operation);let s=!1;return{postMessage:function(l){setTimeout(function(){s||o({data:{buffer:a(l),meta:l.meta}})},0)},terminate:function(){s=!0}}}(e,this.onWorkerMessage_.bind(this,0));this.workers_=n,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,i,n){this.enqueue_({inputs:e,meta:i,callback:n}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const i=e.inputs[0].width,n=e.inputs[0].height,r=e.inputs.map(function(l){return l.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1)return void this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:i,height:n},r);const a=e.inputs[0].data.length,s=4*Math.ceil(a/4/o);for(let l=0;l<o;++l){const u=l*s,c=[];for(let h=0,d=r.length;h<d;++h)c.push(r[h].slice(u,u+s));this.workers_[l].postMessage({buffers:c,meta:e.meta,imageOps:this.imageOps_,width:i,height:n},c)}}onWorkerMessage_(e,i){this.disposed||(this.dataLookup_[e]=i.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,i=this.workers_.length;let n,r;if(i===1)n=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;n=new Uint8ClampedArray(o),r=new Array(i);const a=4*Math.ceil(o/4/i);for(let s=0;s<i;++s){const l=this.dataLookup_[s].buffer,u=s*a;n.set(new Uint8ClampedArray(l),u),r[s]=this.dataLookup_[s].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(n,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const n5="beforeoperations",r5="afteroperations";class Ay extends fn{constructor(e,i,n){super(e),this.extent=i.extent,this.resolution=i.viewState.resolution/i.pixelRatio,this.data=n}}class gw extends hw{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=function(r){const o=r.length,a=new Array(o);for(let s=0;s<o;++s)a[s]=a5(r[s]);return a}(e.sources);const i=this.changed.bind(this);for(let r=0,o=this.layers_.length;r<o;++r)this.layers_[r].addEventListener(Ft,i);var n;this.useResolutions_=e.resolutions!==null,this.tileQueue_=new Wx(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=this.layers_,n.map(function(r){return r.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:et(this),renderTargets:{}},this.setAttributions(function(r){const o=[];for(let a=0,s=e.sources.length;a<s;++a){const l=e.sources[a],u=l instanceof Ds?l:l.getSource();if(!u)continue;const c=u.getAttributions()?.(r);typeof c=="string"?o.push(c):c!==void 0&&o.push(...c)}return o}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,i){this.processor_&&this.processor_.dispose(),this.processor_=new i5({operation:e,imageOps:this.operationType_==="image",queue:1,lib:i,threads:this.threads_}),this.changed()}updateFrameState_(e,i,n){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=$i(e);r.size[0]=Math.ceil(rt(e)/i),r.size[1]=Math.ceil(Yt(e)/i),r.extent=[o[0]-r.size[0]*i/2,o[1]-r.size[1]*i/2,o[0]+r.size[0]*i/2,o[1]+r.size[1]*i/2],r.time=Date.now();const a=r.viewState;return a.center=o,a.projection=n,a.resolution=i,r}allSourcesReady_(){let e,i=!0;for(let n=0,r=this.layers_.length;n<r;++n)if(e=this.layers_[n].getSource(),!e||e.getState()!=="ready"){i=!1;break}return i}getImage(e,i,n,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),i=this.findNearestResolution(i);const o=this.updateFrameState_(e,i,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const a=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();i===a&&xr(o.extent,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,i=this.layers_.length,n=new Array(i);for(let o=0;o<i;++o){e.layerIndex=o,e.renderTargets={};const a=o5(this.layers_[o],e);if(!a)return;n[o]=a}const r={};this.dispatchEvent(new Ay(n5,e,r)),this.processor_.process(n,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,i,n,r){if(i||!n)return;const o=e.extent,a=e.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!xr(o,this.requestedFrameState_.extent))return;let s;this.renderedImageCanvas_?s=this.renderedImageCanvas_.getImage().getContext("2d"):(s=Ot(Math.round(rt(o)/a),Math.round(Yt(o)/a)),this.renderedImageCanvas_=new Kk(o,a,1,s.canvas)),s.putImageData(n,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Ay(r5,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let i=super.getResolutions();if(!i)for(let n=0,r=this.layers_.length;n<r&&(i=this.layers_[n].getSource().getResolutions(e),!i);++n);return i}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}gw.prototype.dispose;let yo=null;function o5(t,e){const i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(e))return null;const n=e.size[0],r=e.size[1];if(n===0||r===0)return null;const o=i.renderFrame(e,null);let a;if(o instanceof HTMLCanvasElement)a=o;else{if(o&&(a=o.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===n&&a.height===r)return a.getContext("2d").getImageData(0,0,n,r)}if(yo){const s=yo.canvas;s.width!==n||s.height!==r?yo=Ot(n,r,void 0,{willReadFrequently:!0}):yo.clearRect(0,0,n,r)}else yo=Ot(n,r,void 0,{willReadFrequently:!0});return yo.drawImage(a,0,0,n,r),yo.getImageData(0,0,n,r)}function a5(t){let e;return t instanceof Ds?t instanceof aw?e=new oi({source:t}):t instanceof hw&&(e=new pw({source:t})):e=t,e}var s5=class extends Pu{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi===void 0||t.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r,o){const a=this.urls;if(!a)return;let s;return a.length==1?s=a[0]:s=a[Uo(iw(t),a.length)],function(l,u,c,h,d,p){const f=d.getCode().split(/:(?=\d+$)/).pop(),g=c/h,y=[A0(rt(u)/g,4),A0(Yt(u)/g,4)];return p.SIZE=y[0]+","+y[1],p.BBOX=u.join(","),p.BBOXSR=f,p.IMAGESR=f,p.DPI=Math.round(p.DPI?p.DPI*h:90*h),Ig(l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),p)}(s,i,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),n,r,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;e==1||this.hidpi_||(e=1);const r=n.getTileCoordExtent(t,this.tmpExtent_);let o=pi(n.getTileSize(t[0]),this.tmpSize);e!=1&&(o=yx(o,e,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,o,r,e,i,a)}};class l5 extends ma{constructor(e){super({projection:(e=e||{}).projection,tileGrid:e.tileGrid,wrapX:e.wrapX===void 0||e.wrapX,zDirection:e.zDirection,url:e.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(i,n)=>{const r=i.getTileCoord()[0],o=pi(this.tileGrid.getTileSize(r)),a=Ot(o[0],o[1]);a.strokeStyle="grey",a.strokeRect(.5,.5,o[0]+.5,o[1]+.5),a.fillStyle="grey",a.strokeStyle="white",a.textAlign="center",a.textBaseline="middle",a.font="24px sans-serif",a.lineWidth=4,a.strokeText(n,o[0]/2,o[1]/2,o[0]),a.fillText(n,o[0]/2,o[1]/2,o[0]),i.setImage(a.canvas)}})}}class mw extends Pu{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:st("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX===void 0||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)(function(i,n,r,o){const a=document.createElement("script"),s="olc_"+et(n);function l(){delete window[s],a.parentNode.removeChild(a)}a.async=!0,a.src=i+(i.includes("?")?"&":"?")+"callback="+s;const u=setTimeout(function(){l(),r&&r()},1e4);window[s]=function(c){clearTimeout(u),l(),n(c)},document.head.appendChild(a)})(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(e.tileJSON)}}onXHRLoad_(e){const i=e.target;if(!i.status||i.status>=200&&i.status<300){let n;try{n=JSON.parse(i.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const i=st("EPSG:4326"),n=this.getProjection();let r;if(e.bounds!==void 0){const l=Mu(i,n);r=Hb(e.bounds,l)}const o=Iu(n),a=e.minzoom||0,s=ud({extent:o,maxZoom:e.maxzoom||22,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=sw(e.tiles,s),e.attribution&&!this.getAttributions()){const l=r!==void 0?r:o;this.setAttributions(function(u){return Ut(l,u.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class ka extends Pu{constructor(e){const i=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=yv(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0&&e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=Pg(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const i=e.join(`
`);this.setTileUrlFunction(Pg(e.map(this.createFromWMTSTemplate.bind(this))),i)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const i in this.dimensions_)e.push(i+"-"+this.dimensions_[i]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const i=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=i=="KVP"?Ig(e,n):e.replace(/\{(\w+?)\}/g,function(a,s){return s.toLowerCase()in n?n[s.toLowerCase()]:a});const r=this.tileGrid,o=this.dimensions_;return function(a,s,l){if(!a)return;const u={TileMatrix:r.getMatrixId(a[0]),TileCol:a[1],TileRow:a[2]};Object.assign(u,o);let c=e;return c=i=="KVP"?Ig(c,u):c.replace(/\{(\w+?)\}/g,function(h,d){return u[d]}),c}}}const iu="BD:09",vw=(t="BD:09")=>{let e=st(t);return e||(Bm(new gr({code:"BD:09",extent:[-2003772637e-2,-1170804166e-2,2003772637e-2,1247410417e-2],units:"m",axisOrientation:"neu",global:!1})),e)};class Bo extends Pu{constructor(e){const i=e||{},n=i.tileGrid||Bo.getTileGrid(i.projection||"EPSG:3857"),r={projection:i.projection===iu?vw(iu):"EPSG:3857",tileGrid:n,tileUrlFunction:function(o){if(!o)return"";let a=o[0],s=o[1],l=-o[2]-1,u=s<0?"M"+-s:s,c=l<0?"M"+-l:l;return i.key&&i.key!=="vec"?`https://maponline0.bdimg.com/starpic/?qt=satepc&u=x=${u};y=${c};z=${a};v=009;type=sate&fm=46&app=webearth2&v=009&udt=20241109`:"http://online3.map.bdimg.com/onlinelabel/?qt=tile&x="+u+"&y="+c+"&z="+a+"&styles=pl&udt=20151021&scaler=1&p=1"}};super(r)}static getTileGrid(e){return e==="EPSG:4326"||e==="EPSG:4490"?Bo.default4326TileGrid():e==="BD:09"?Bo.defaultBD09TileGrid():Bo.default3857TileGrid()}static default4326TileGrid(){const e=[],i=[];for(let n=1;n<19;n+=1)e.push(1.40625/2**n),i.push(n);return new Qr({extent:[-180,-90,180,90],resolutions:e,origin:[-180,90],matrixIds:i,minZoom:1})}static default3857TileGrid(){const e=[],i=[];for(let n=1;n<19;n+=1)e[n]=Math.pow(2,18-n),i.push(n);return new Qr({resolutions:e,matrixIds:i,origin:[0,0],minZoom:1})}static defaultBD09TileGrid(){const e=[];for(let i=1;i<19;i+=1)e[i]=Math.pow(2,18-i);return new Qr({resolutions:e,origin:[0,0],minZoom:1})}}var nc=[75,60,45,30,15,0],Oy=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function u5(t){var e=function(i){var n,r;i.lng=function(s,l,u){for(;s>u;)s-=u-l;for(;s<l;)s+=u-l;return s}(i.lng,-180,180),i.lat=function(s,l,u){return s=Math.max(s,l),s=Math.min(s,u),s}(i.lat,-74,74),n=new Ua(i.lng,i.lat);for(var o=0;o<nc.length;o++)if(n.lat>=nc[o]){r=Oy[o];break}if(!r){for(o=nc.length-1;o>=0;o--)if(n.lat<=-nc[o]){r=Oy[o];break}}var a=function(s,l){if(s&&l){var u=l[0]+l[1]*Math.abs(s.lng),c=Math.abs(s.lat)/l[9],h=l[2]+l[3]*c+l[4]*c*c+l[5]*c*c*c+l[6]*c*c*c*c+l[7]*c*c*c*c*c+l[8]*c*c*c*c*c*c;return new Ua(u*=s.lng<0?-1:1,h*=s.lat<0?-1:1)}}(i,r);return i=new Ua(a.lng.toFixed(2),a.lat.toFixed(2)),i}(new Ua(t[0],t[1]));return[e.lng,e.lat]}function Ua(t,e){isNaN(t)&&(t=zy(t),t=isNaN(t)?0:t),Dy(t)&&(t=parseFloat(t)),isNaN(e)&&(e=zy(e),e=isNaN(e)?0:e),Dy(e)&&(e=parseFloat(e)),this.lng=t,this.lat=e}function zy(t){var e,i,n,r,o="",a="",s="",l=0;if(!t||/[^A-Za-z0-9\+\/\=]/g.exec(t))return t;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=cf.indexOf(t.charAt(l++))<<2|(n=cf.indexOf(t.charAt(l++)))>>4,i=(15&n)<<4|(r=cf.indexOf(t.charAt(l++)))>>2,a=(3&r)<<6|(s=cf.indexOf(t.charAt(l++))),o+=String.fromCharCode(e),r!=64&&(o+=String.fromCharCode(i)),s!=64&&(o+=String.fromCharCode(a)),e=i=a="",n=r=s="";while(l<t.length);return o}function Dy(t){return typeof t=="string"}function yq(t="map"){const e=vw(iu);return new zs({controls:[],target:t,layers:[new oi({source:new Bo({key:"img",projection:iu}),visible:!0})],view:new Wi({projection:e,center:u5([120.098926,29.343227]),maxZoom:20,minZoom:5,zoom:8})})}function c5(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yw(t,e,i){return i&&c5(t,i),t}function Hc(){return(Hc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function jy(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _w(t,e){if(t==null)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)e.indexOf(i=o[n])>=0||(r[i]=t[i]);return r}function By(t){return((e=t)!=null&&typeof e=="object"&&Array.isArray(e)===!1)==1&&Object.prototype.toString.call(t)==="[object Object]";var e}Ua.isInRange=function(t){return t&&t.lng<=180&&t.lng>=-180&&t.lat<=74&&t.lat>=-74},Ua.prototype.equals=function(t){return t&&lat==t.lat&&lng==t.lng};var bw=Object.prototype,xw=bw.toString,h5=bw.hasOwnProperty,ww=/^\s*function (\w+)/;function Ny(t){var e,i=(e=t?.type)!==null&&e!==void 0?e:t;if(i){var n=i.toString().match(ww);return n?n[1]:""}return""}var sa=function(t){var e,i;return By(t)!==!1&&typeof(e=t.constructor)=="function"&&By(i=e.prototype)!==!1&&i.hasOwnProperty("isPrototypeOf")!==!1},d5=function(t){return t},Ei=d5,nu=function(t,e){return h5.call(t,e)},p5=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},ks=Array.isArray||function(t){return xw.call(t)==="[object Array]"},Ts=function(t){return xw.call(t)==="[object Function]"},Mh=function(t){return sa(t)&&nu(t,"_vueTypes_name")},Sw=function(t){return sa(t)&&(nu(t,"type")||["_vueTypes_name","validator","default","required"].some(function(e){return nu(t,e)}))};function _v(t,e){return Object.defineProperty(t.bind(e),"__original",{value:t})}function No(t,e,i){var n;i===void 0&&(i=!1);var r=!0,o="";n=sa(t)?t:{type:t};var a=Mh(n)?n._vueTypes_name+" - ":"";if(Sw(n)&&n.type!==null){if(n.type===void 0||n.type===!0||!n.required&&e===void 0)return r;ks(n.type)?(r=n.type.some(function(h){return No(h,e,!0)===!0}),o=n.type.map(function(h){return Ny(h)}).join(" or ")):r=(o=Ny(n))==="Array"?ks(e):o==="Object"?sa(e):o==="String"||o==="Number"||o==="Boolean"||o==="Function"?function(h){if(h==null)return"";var d=h.constructor.toString().match(ww);return d?d[1]:""}(e)===o:e instanceof n.type}if(!r){var s=a+'value "'+e+'" should be of type "'+o+'"';return i===!1?(Ei(s),!1):s}if(nu(n,"validator")&&Ts(n.validator)){var l=Ei,u=[];if(Ei=function(h){u.push(h)},r=n.validator(e),Ei=l,!r){var c=(u.length>1?"* ":"")+u.join(`
* `);return u.length=0,i===!1?(Ei(c),r):c}}return r}function Ui(t,e){var i=Object.defineProperties(e,{_vueTypes_name:{value:t,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(r){return r!==void 0||this.default?Ts(r)||No(this,r,!0)===!0?(this.default=ks(r)?function(){return[].concat(r)}:sa(r)?function(){return Object.assign({},r)}:r,this):(Ei(this._vueTypes_name+' - invalid default value: "'+r+'"'),this):this}}}),n=i.validator;return Ts(n)&&(i.validator=_v(n,i)),i}function Gn(t,e){var i=Ui(t,e);return Object.defineProperty(i,"validate",{value:function(n){return Ts(this.validator)&&Ei(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=_v(n,this),this}})}function Vy(t,e,i){var n,r,o=(n=e,r={},Object.getOwnPropertyNames(n).forEach(function(h){r[h]=Object.getOwnPropertyDescriptor(n,h)}),Object.defineProperties({},r));if(o._vueTypes_name=t,!sa(i))return o;var a,s,l=i.validator,u=_w(i,["validator"]);if(Ts(l)){var c=o.validator;c&&(c=(s=(a=c).__original)!==null&&s!==void 0?s:a),o.validator=_v(c?function(h){return c.call(this,h)&&l.call(this,h)}:l,o)}return Object.assign(o,u)}function Wc(t){return t.replace(/^(?!\s*$)/gm,"  ")}var vr=function(){return Gn("boolean",{type:Boolean})},ru=function(){return Gn("string",{type:String})},Fg=function(){return Gn("number",{type:Number})},Ag=function(){return Gn("array",{type:Array})},bv=function(){return Gn("object",{type:Object})};function xv(t){if(!ks(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var e=!1,i=[],n=0;n<t.length;n+=1){var r=t[n];if(Sw(r)){if(Mh(r)&&r._vueTypes_name==="oneOf"){i=i.concat(r.type);continue}if(Ts(r.validator)&&(e=!0),r.type!==!0&&r.type){i=i.concat(r.type);continue}}i.push(r)}return i=i.filter(function(o,a){return i.indexOf(o)===a}),Ui("oneOfType",e?{type:i,validator:function(o){var a=[],s=t.some(function(l){var u=No(Mh(l)&&l._vueTypes_name==="oneOf"?l.type||null:l,o,!0);return typeof u=="string"&&a.push(u),u===!0});return s||Ei("oneOfType - provided value does not match any of the "+a.length+` passed-in validators:
`+Wc(a.join(`
`))),s}}:{type:i})}var An=function(){function t(){}return t.extend=function(e){var i=this;if(ks(e))return e.forEach(function(h){return i.extend(h)}),this;var n=e.name,r=e.validate,o=r!==void 0&&r,a=e.getter,s=a!==void 0&&a,l=_w(e,["name","validate","getter"]);if(nu(this,n))throw new TypeError('[VueTypes error]: Type "'+n+'" already defined');var u,c=l.type;return Mh(c)?(delete l.type,Object.defineProperty(this,n,s?{get:function(){return Vy(n,c,l)}}:{value:function(){var h,d=Vy(n,c,l);return d.validator&&(d.validator=(h=d.validator).bind.apply(h,[d].concat([].slice.call(arguments)))),d}})):(u=s?{get:function(){var h=Object.assign({},l);return o?Gn(n,h):Ui(n,h)},enumerable:!0}:{value:function(){var h,d,p=Object.assign({},l);return h=o?Gn(n,p):Ui(n,p),p.validator&&(h.validator=(d=p.validator).bind.apply(d,[h].concat([].slice.call(arguments)))),h},enumerable:!0},Object.defineProperty(this,n,u))},yw(t,null,[{key:"any",get:function(){return Gn("any",{})}},{key:"func",get:function(){return Gn("function",{type:Function}).def(this.defaults.func)}},{key:"bool",get:function(){return vr().def(this.defaults.bool)}},{key:"string",get:function(){return ru().def(this.defaults.string)}},{key:"number",get:function(){return Fg().def(this.defaults.number)}},{key:"array",get:function(){return Ag().def(this.defaults.array)}},{key:"object",get:function(){return bv().def(this.defaults.object)}},{key:"integer",get:function(){return Ui("integer",{type:Number,validator:function(e){return p5(e)}}).def(this.defaults.integer)}},{key:"symbol",get:function(){return Ui("symbol",{validator:function(e){return typeof e=="symbol"}})}}]),t}();An.defaults={},An.custom=function(t,e){if(e===void 0&&(e="custom validation failed"),typeof t!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Ui(t.name||"<<anonymous function>>",{validator:function(i){var n=t(i);return n||Ei(this._vueTypes_name+" - "+e),n}})},An.oneOf=function(t){if(!ks(t))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var e='oneOf - value should be one of "'+t.join('", "')+'".',i=t.reduce(function(n,r){if(r!=null){var o=r.constructor;n.indexOf(o)===-1&&n.push(o)}return n},[]);return Ui("oneOf",{type:i.length>0?i:void 0,validator:function(n){var r=t.indexOf(n)!==-1;return r||Ei(e),r}})},An.instanceOf=function(t){return Ui("instanceOf",{type:t})},An.oneOfType=xv,An.arrayOf=function(t){return Ui("arrayOf",{type:Array,validator:function(e){var i,n=e.every(function(r){return(i=No(t,r,!0))===!0});return n||Ei(`arrayOf - value validation error:
`+Wc(i)),n}})},An.objectOf=function(t){return Ui("objectOf",{type:Object,validator:function(e){var i,n=Object.keys(e).every(function(r){return(i=No(t,e[r],!0))===!0});return n||Ei(`objectOf - value validation error:
`+Wc(i)),n}})},An.shape=function(t){var e=Object.keys(t),i=e.filter(function(r){var o;return!!(!((o=t[r])===null||o===void 0)&&o.required)}),n=Ui("shape",{type:Object,validator:function(r){var o=this;if(!sa(r))return!1;var a=Object.keys(r);if(i.length>0&&i.some(function(l){return a.indexOf(l)===-1})){var s=i.filter(function(l){return a.indexOf(l)===-1});return Ei(s.length===1?'shape - required property "'+s[0]+'" is not defined.':'shape - required properties "'+s.join('", "')+'" are not defined.'),!1}return a.every(function(l){if(e.indexOf(l)===-1)return o._vueTypes_isLoose===!0||(Ei('shape - shape definition does not include a "'+l+'" property. Allowed keys: "'+e.join('", "')+'".'),!1);var u=No(t[l],r[l],!0);return typeof u=="string"&&Ei('shape - "'+l+`" property validation error:
 `+Wc(u)),u===!0})}});return Object.defineProperty(n,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(n,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),n},An.utils={validate:function(t,e){return No(e,t,!0)===!0},toType:function(t,e,i){return i===void 0&&(i=!1),i?Gn(t,e):Ui(t,e)}},function(t){function e(){return t.apply(this,arguments)||this}jy(e,t)}(function(t){var e;return t===void 0&&(t={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(e=function(i){function n(){return i.apply(this,arguments)||this}return jy(n,i),yw(n,null,[{key:"sensibleDefaults",get:function(){return Hc({},this.defaults)},set:function(r){this.defaults=r!==!1?Hc({},r!==!0?r:t):{}}}]),n}(An)).defaults=Hc({},t),e}());const vi={LAYER_ORDER_CHANGED:"LAYER_ORDER_CHANGED",LAYER_LOCATE:"LAYER_LOCATE",LAYER_OPACITY_CHANGED:"LAYER_OPACITY_CHANGED",LAYER_VISIBLE_CHANGED:"LAYER_VISIBLE_CHANGED",LAYER_ADDED:"LAYER_ADDED",LAYER_REMOVED:"LAYER_REMOVED",LAYER_COPY:"LAYER_COPY",LAYER_ITEMS_CHANGED:"LAYER_ITEMS_CHANGED",LAYER_ITEM_UPDATED:"LAYER_ITEM_UPDATED",LAYER_SWIPE_CHANGED:"LAYER_SWIPE_CHANGED",MAP_SYNC_VIEW:"MAP_SYNC_VIEW",MAP_SYNC_VIEW_END:"MAP_SYNC_VIEW_END",MAP_ZOOM_CHANGED:"MAP_ZOOM_CHANGED",MAP_MESSAGE_INFO:"MAP_MESSAGE_INFO",LAYER_TREE_CONTEXT_MENU:"LAYER_TREE_CONTEXT_MENU"};class Cw{mapID;mapGroup;data;target;constructor(e,i){this.mapID=e,this.mapGroup=i}}function Mw(t){return{all:t=t||new Map,on(e,i){const n=t?.get(e);n&&n.push(i)||t?.set(e,[i])},off(e,i){const n=t?.get(e);n&&n.splice(n.indexOf(i)>>>0,1)},emit(e,i){(t?.get(e)||[]).slice().map(n=>{n(i)}),(t?.get("*")||[]).slice().map(n=>{n(e,i)})}}}Mw();class f5{eventBus;constructor(){this.eventBus=Mw()}eventEmit(e,i){this.eventBus.emit(e,i)}eventOn(e,i){this.eventBus.on(e,i)}eventOff(e,i){this.eventBus.off(e,i)}}const kh=new f5,Uc=0,kw=1,Tw=2,Ew=3,_n=4,Og=5,Lo=6,zg=7,Lw=8,wv=9,Rl=10,Ko=11,Iw=12,rc=[Lw],Wr=[Iw],Vo=[kw],$y=[Ew];class Pw{drawCustom(e,i,n,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,i,n){}drawFeature(e,i,n){}drawGeometryCollection(e,i,n){}drawLineString(e,i,n){}drawMultiLineString(e,i,n){}drawMultiPoint(e,i,n){}drawMultiPolygon(e,i,n){}drawPoint(e,i,n){}drawPolygon(e,i,n){}drawText(e,i,n){}setFillStrokeStyle(e,i){}setImageStyle(e,i){}setTextStyle(e,i){}}class Sl extends Pw{constructor(e,i,n,r){super(),this.tolerance=e,this.maxExtent=i,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const i=this.pixelRatio;return i==1?e:e.map(function(n){return n*i})}appendFlatPointCoordinates(e,i){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let a=o.length;for(let s=0,l=e.length;s<l;s+=i)r[0]=e[s],r[1]=e[s+1],ia(n,r)&&(o[a++]=r[0],o[a++]=r[1]);return a}appendFlatLineCoordinates(e,i,n,r,o,a){const s=this.coordinates;let l=s.length;const u=this.getBufferedMaxExtent();a&&(i+=r);let c=e[i],h=e[i+1];const d=this.tmpCoordinate_;let p,f,g,y=!0;for(p=i+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],g=Lf(u,d),g!==f?(y&&(s[l++]=c,s[l++]=h,y=!1),s[l++]=d[0],s[l++]=d[1]):g===ch?(s[l++]=d[0],s[l++]=d[1],y=!1):y=!0,c=d[0],h=d[1],f=g;return(o&&y||p===i+r)&&(s[l++]=c,s[l++]=h),l}drawCustomCoordinates_(e,i,n,r,o){for(let a=0,s=n.length;a<s;++a){const l=n[a],u=this.appendFlatLineCoordinates(e,i,l,r,!1,!1);o.push(u),i=l}return i}drawCustom(e,i,n,r,o){this.beginGeometry(e,i,o);const a=e.getType(),s=e.getStride(),l=this.coordinates.length;let u,c,h,d,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();p=0;for(let g=0,y=f.length;g<y;++g){const _=[];p=this.drawCustomCoordinates_(u,p,f[g],s,_),d.push(_)}this.instructions.push([_n,l,d,e,n,Of,o]),this.hitDetectionInstructions.push([_n,l,d,e,r||n,Of,o]);break;case"Polygon":case"MultiLineString":h=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),s,h),this.instructions.push([_n,l,h,e,n,Yl,o]),this.hitDetectionInstructions.push([_n,l,h,e,r||n,Yl,o]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,s,!1,!1),this.instructions.push([_n,l,c,e,n,Gr,o]),this.hitDetectionInstructions.push([_n,l,c,e,r||n,Gr,o]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,s),c>l&&(this.instructions.push([_n,l,c,e,n,Gr,o]),this.hitDetectionInstructions.push([_n,l,c,e,r||n,Gr,o]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([_n,l,c,e,n,void 0,o]),this.hitDetectionInstructions.push([_n,l,c,e,r||n,void 0,o])}this.endGeometry(i)}beginGeometry(e,i,n){this.beginGeometryInstruction1_=[Uc,i,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Uc,i,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let i;e.reverse();const n=e.length;let r,o,a=-1;for(i=0;i<n;++i)r=e[i],o=r[0],o==zg?a=i:o==Uc&&(r[2]=i,WC(this.hitDetectionInstructions,a,i),a=-1)}setFillStrokeStyle(e,i){const n=this.state;if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=$n(r||ji)}else n.fillStyle=void 0;if(i){const r=i.getColor();n.strokeStyle=$n(r||Jl);const o=i.getLineCap();n.lineCap=o!==void 0?o:ws;const a=i.getLineDash();n.lineDash=a?a.slice():mr;const s=i.getLineDashOffset();n.lineDashOffset=s||0;const l=i.getLineJoin();n.lineJoin=l!==void 0?l:Ss;const u=i.getWidth();n.lineWidth=u!==void 0?u:1;const c=i.getMiterLimit();n.miterLimit=c!==void 0?c:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const i=e.fillStyle,n=[Rl,i];return typeof i!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ko,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,i){const n=e.fillStyle;typeof n=="string"&&e.currentFillStyle==n||(n!==void 0&&this.instructions.push(i.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,i){const n=e.strokeStyle,r=e.lineCap,o=e.lineDash,a=e.lineDashOffset,s=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||o!=e.currentLineDash&&!co(e.currentLineDash,o)||e.currentLineDashOffset!=a||e.currentLineJoin!=s||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(n!==void 0&&i.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=a,e.currentLineJoin=s,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[zg,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Nb(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Zr(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Gy extends Sl{constructor(e,i,n,r){super(e,i,n,r)}drawFlatCoordinatess_(e,i,n,r){const o=this.state,a=o.fillStyle!==void 0,s=o.strokeStyle!==void 0,l=n.length;this.instructions.push(Vo),this.hitDetectionInstructions.push(Vo);for(let u=0;u<l;++u){const c=n[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,i,c,r,!0,!s),p=[wv,h,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push($y),this.hitDetectionInstructions.push($y)),i=c}return a&&(this.instructions.push(rc),this.hitDetectionInstructions.push(rc)),s&&(this.instructions.push(Wr),this.hitDetectionInstructions.push(Wr)),i}drawCircle(e,i,n){const r=this.state,o=r.fillStyle,a=r.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Rl,ji]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ko,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,mr,0]);const s=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);const c=[Tw,u];this.instructions.push(Vo,c),this.hitDetectionInstructions.push(Vo,c),r.fillStyle!==void 0&&(this.instructions.push(rc),this.hitDetectionInstructions.push(rc)),r.strokeStyle!==void 0&&(this.instructions.push(Wr),this.hitDetectionInstructions.push(Wr)),this.endGeometry(i)}drawPolygon(e,i,n){const r=this.state,o=r.fillStyle,a=r.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Rl,ji]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ko,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,mr,0]);const s=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,s,u),this.endGeometry(i)}drawMultiPolygon(e,i,n){const r=this.state,o=r.fillStyle,a=r.strokeStyle;if(o===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,i,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Rl,ji]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ko,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,mr,0]);const s=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=s.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,s[h],u);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const i=this.coordinates;for(let n=0,r=i.length;n<r;++n)i[n]=Eo(i[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function g5(t,e,i,n,r){const o=[];let a=i,s=0,l=e.slice(i,2);for(;s<t&&a+r<n;){const[u,c]=l.slice(-2),h=e[a+r],d=e[a+r+1],p=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(s+=p,s>=t){const f=(t-s+p)/p,g=Xi(u,h,f),y=Xi(c,d,f);l.push(g,y),o.push(l),l=[g,y],s==t&&(a+=r),s=0}else if(s<t)l.push(e[a+r],e[a+r+1]),a+=r;else{const f=p-s,g=Xi(u,h,f/p),y=Xi(c,d,f/p);l.push(g,y),o.push(l),l=[g,y],s=0,a+=r}}return s>0&&o.push(l),o}function m5(t,e,i,n,r){let o,a,s,l,u,c,h,d,p,f,g=i,y=i,_=0,b=0,m=i;for(a=i;a<n;a+=r){const v=e[a],S=e[a+1];u!==void 0&&(p=v-u,f=S-c,l=Math.sqrt(p*p+f*f),h!==void 0&&(b+=s,o=Math.acos((h*p+d*f)/(s*l)),o>t&&(b>_&&(_=b,g=m,y=a),b=0,m=a-r)),s=l,h=p,d=f),u=v,c=S}return b+=l,b>_?[m,a]:[g,y]}const Th={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},v5={Circle:Gy,Default:Sl,Image:class extends Sl{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!ia(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(n,r);this.instructions.push([Lo,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Lo,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),r=[];for(let s=0,l=n.length;s<l;s+=t.getStride())this.maxExtent&&!ia(this.maxExtent,n.slice(s,s+2))||r.push(n[s],n[s+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,2);this.instructions.push([Lo,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Lo,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends Sl{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),a=[wv,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e,i){const n=this.state,r=n.strokeStyle,o=n.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([Ko,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,mr,0],Vo);const a=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(a,0,a.length,s),this.hitDetectionInstructions.push(Wr),this.endGeometry(e)}drawMultiLineString(t,e,i){const n=this.state,r=n.strokeStyle,o=n.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([Ko,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,mr,0],Vo);const a=t.getEnds(),s=t.getFlatCoordinates(),l=t.getStride();let u=0;for(let c=0,h=a.length;c<h;++c)u=this.drawFlatCoordinates_(s,u,a[c],l);this.hitDetectionInstructions.push(Wr),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Wr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Wr),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Vo)}},Polygon:Gy,Text:class extends Sl{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ji]={fillStyle:ji},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const n=this.textFillState_,r=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!n&&!r)return;const a=this.coordinates;let s=a.length;const l=t.getType();let u=null,c=t.getStride();if(o.placement!=="line"||l!="LineString"&&l!="MultiLineString"&&l!="Polygon"&&l!="MultiPolygon"){let h=o.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),c=2;break;case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||h.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const _=t.getFlatInteriorPoints();u=[];for(let b=0,m=_.length;b<m;b+=3)o.overflow||h.push(_[b+2]/this.resolution),u.push(_[b],_[b+1]);if(u.length===0)return;c=2}const d=this.appendFlatPointCoordinates(u,c);if(d===s)return;if(h&&(d-s)/2!=u.length/c){let _=s/2;h=h.filter((b,m)=>{const v=a[2*(_+m)]===u[m*c]&&a[2*(_+m)+1]===u[m*c+1];return v||--_,v})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i);let p=o.padding;if(p!=jo&&(o.scale[0]<0||o.scale[1]<0)){let _=o.padding[0],b=o.padding[1],m=o.padding[2],v=o.padding[3];o.scale[0]<0&&(b=-b,v=-v),o.scale[1]<0&&(_=-_,m=-m),p=[_,b,m,v]}const f=this.pixelRatio;this.instructions.push([Lo,s,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==jo?jo:p.map(function(_){return _*f}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const g=1/f,y=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=ji,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Lo,s,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ji:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),o.backgroundFill&&(this.state.fillStyle=y,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!Ut(this.maxExtent,t.getExtent()))return;let h;if(u=t.getFlatCoordinates(),l=="LineString")h=[u.length];else if(l=="MultiLineString")h=t.getEnds();else if(l=="Polygon")h=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const g=t.getEndss();h=[];for(let y=0,_=g.length;y<_;++y)h.push(g[y][0])}this.beginGeometry(t,e,i);const d=o.repeat,p=d?void 0:o.textAlign;let f=0;for(let g=0,y=h.length;g<y;++g){let _;_=d?g5(d*this.resolution,u,f,h[g],c):[u.slice(f,h[g])];for(let b=0,m=_.length;b<m;++b){const v=_[b];let S=0,C=v.length;if(p==null){const L=m5(o.maxAngle,v,0,v.length,2);S=L[0],C=L[1]}for(let L=S;L<C;L+=c)a.push(v[L],v[L+1]);const k=a.length;f=h[g],this.drawChars_(s,k),s=k}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||eu,justify:e.justify,textBaseline:e.textBaseline||yh,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const s=this.pixelRatio,l=Th[n.textBaseline],u=this.textOffsetY_*s,c=this.text_,h=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Og,t,e,l,n.overflow,a,n.maxAngle,s,u,r,h*s,c,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([Og,t,e,l,n.overflow,a&&ji,n.maxAngle,s,u,r,h*s,c,o,1/s,this.declutterMode_])}setTextStyle(t,e){let i,n,r;if(t){const o=t.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=$n(o.getColor()||ji)):(n=null,this.textFillState_=n);const a=t.getStroke();if(a){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const p=a.getLineDash(),f=a.getLineDashOffset(),g=a.getWidth(),y=a.getMiterLimit();r.lineCap=a.getLineCap()||ws,r.lineDash=p?p.slice():mr,r.lineDashOffset=f===void 0?0:f,r.lineJoin=a.getLineJoin()||Ss,r.lineWidth=g===void 0?1:g,r.miterLimit=y===void 0?10:y,r.strokeStyle=$n(a.getColor()||Jl)}else r=null,this.textStrokeState_=r;i=this.textState_;const s=t.getFont()||Ex;Lx(s);const l=t.getScaleArray();i.overflow=t.getOverflow(),i.font=s,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||yh,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||jo,i.scale=l===void 0?[1,1]:l;const u=t.getOffsetX(),c=t.getOffsetY(),h=t.getRotateWithView(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=h!==void 0&&h,this.textRotation_=d===void 0?0:d,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:et(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+et(n.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}};class qw{constructor(e,i,n,r){this.tolerance_=e,this.maxExtent_=i,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const i in this.buildersByZIndex_){e[i]=e[i]||{};const n=this.buildersByZIndex_[i];for(const r in n){const o=n[r].finish();e[i][r]=o}}return e}getBuilder(e,i){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let o=r[i];return o===void 0&&(o=new v5[i](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[i]=o),o}}function y5(t,e,i,n,r,o,a,s,l,u,c,h){let d=t[e],p=t[e+1],f=0,g=0,y=0,_=0;function b(){f=d,g=p,d=t[e+=n],p=t[e+1],_+=y,y=Math.sqrt((d-f)*(d-f)+(p-g)*(p-g))}do b();while(e<i-n&&_+y<o);let m=y===0?0:(o-_)/y;const v=Xi(f,d,m),S=Xi(g,p,m),C=e-n,k=_,L=o+s*l(u,r,c);for(;e<i-n&&_+y<L;)b();m=y===0?0:(L-_)/y;const A=Xi(f,d,m),q=Xi(g,p,m);let P;if(h){const E=[v,S,A,q];Gm(E,0,4,2,h,E,E),P=E[0]>E[2]}else P=v>A;const T=Math.PI,R=[],M=C+n===e;let I;if(y=0,_=k,d=t[e=C],p=t[e+1],M){b(),I=Math.atan2(p-g,d-f),P&&(I+=I>0?-T:T);const E=(A+v)/2,O=(q+S)/2;return R[0]=[E,O,(L-o)/2,I,r],R}for(let E=0,O=(r=r.replace(/\n/g," ")).length;E<O;){b();let V=Math.atan2(p-g,d-f);if(P&&(V+=V>0?-T:T),I!==void 0){let te=V-I;if(te+=te>T?-2*T:te<-T?2*T:0,Math.abs(te)>a)return null}I=V;const B=E;let F=0;for(;E<O;++E){const te=s*l(u,r[P?O-E-1:E],c);if(e+n<i&&_+y<o+F+te/2)break;F+=te}if(E===B)continue;const H=P?r.substring(O-B,O-E):r.substring(B,E);m=y===0?0:(o+F/2-_)/y;const ee=Xi(f,d,m),ne=Xi(g,p,m);R.push([ee,ne,F/2,V,H]),o+=F}return R}const Ta=[1/0,1/0,-1/0,-1/0],Pr=[],ir=[],nr=[],qr=[];function Hy(t){return t[3].declutterBox}const Wy=new RegExp("[-----]");function lp(t,e){return e==="start"?e=Wy.test(t)?"right":"left":e==="end"&&(e=Wy.test(t)?"left":"right"),Th[e]}function _5(t,e,i){return i>0&&t.push(`
`,""),t.push(e,""),t}class b5{constructor(e,i,n,r,o){this.overlaps=n,this.pixelRatio=i,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new pv:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,i,n,r){const o=e+i+n+r;if(this.labels_[o])return this.labels_[o];const a=r?this.strokeStates[r]:null,s=n?this.fillStates[n]:null,l=this.textStates[i],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=l.justify?Th[l.justify]:lp(Array.isArray(e)?e[0]:e,l.textAlign||eu),d=r&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(_5,[]),{width:f,height:g,widths:y,heights:_,lineWidths:b}=function(O,V){const B=[],F=[],H=[];let ee=0,ne=0,te=0,N=0;for(let z=0,j=V.length;z<=j;z+=2){const Z=V[z];if(Z===`
`||z===j){ee=Math.max(ee,ne),H.push(ne),ne=0,te+=N,N=0;continue}const W=V[z+1]||O.font,U=_h(W,Z);B.push(U),ne+=U;const ye=IM(W);F.push(ye),N=Math.max(N,ye)}return{width:ee,height:te,widths:B,heights:F,lineWidths:H}}(l,p),m=f+d,v=[],S=(m+2)*c[0],C=(g+d)*c[1],k={width:S<0?Math.floor(S):Math.ceil(S),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:v};c[0]==1&&c[1]==1||v.push("scale",c),r&&(v.push("strokeStyle",a.strokeStyle),v.push("lineWidth",d),v.push("lineCap",a.lineCap),v.push("lineJoin",a.lineJoin),v.push("miterLimit",a.miterLimit),v.push("setLineDash",[a.lineDash]),v.push("lineDashOffset",a.lineDashOffset)),n&&v.push("fillStyle",s.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");const L=.5-h;let A=h*m+L*d;const q=[],P=[];let T,R=0,M=0,I=0,E=0;for(let O=0,V=p.length;O<V;O+=2){const B=p[O];if(B===`
`){M+=R,R=0,A=h*m+L*d,++E;continue}const F=p[O+1]||l.font;F!==T&&(r&&q.push("font",F),n&&P.push("font",F),T=F),R=Math.max(R,_[I]);const H=[B,A+L*y[I]+h*(y[I]-b[E]),.5*(d+R)+M];A+=y[I],r&&q.push("strokeText",H),n&&P.push("fillText",H),++I}return Array.prototype.push.apply(v,q),Array.prototype.push.apply(v,P),this.labels_[o]=k,k}replayTextBackground_(e,i,n,r,o,a,s){e.beginPath(),e.moveTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,i),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())}calculateImageOrLabelDimensions_(e,i,n,r,o,a,s,l,u,c,h,d,p,f,g,y){let _=n-(s*=d[0]),b=r-(l*=d[1]);const m=o+u>e?e-u:o,v=a+c>i?i-c:a,S=f[3]+m*d[0]+f[1],C=f[0]+v*d[1]+f[2],k=_-f[3],L=b-f[0];let A;return(g||h!==0)&&(Pr[0]=k,qr[0]=k,Pr[1]=L,ir[1]=L,ir[0]=k+S,nr[0]=ir[0],nr[1]=L+C,qr[1]=nr[1]),h!==0?(A=Zn([1,0,0,1,0,0],n,r,1,1,h,-n,-r),ti(A,Pr),ti(A,ir),ti(A,nr),ti(A,qr),Kn(Math.min(Pr[0],ir[0],nr[0],qr[0]),Math.min(Pr[1],ir[1],nr[1],qr[1]),Math.max(Pr[0],ir[0],nr[0],qr[0]),Math.max(Pr[1],ir[1],nr[1],qr[1]),Ta)):Kn(Math.min(k,k+S),Math.min(L,L+C),Math.max(k,k+S),Math.max(L,L+C),Ta),p&&(_=Math.round(_),b=Math.round(b)),{drawImageX:_,drawImageY:b,drawImageW:m,drawImageH:v,originX:u,originY:c,declutterBox:{minX:Ta[0],minY:Ta[1],maxX:Ta[2],maxY:Ta[3],value:y},canvasTransform:A,scale:d}}replayImageOrLabel_(e,i,n,r,o,a,s){const l=!(!a&&!s),u=r.declutterBox,c=s?s[2]*r.scale[0]/2:0;return u.minX-c<=i[0]&&u.maxX+c>=0&&u.minY-c<=i[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Pr,ir,nr,qr,a,s),PM(e,r.canvasTransform,o,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const i=this.alignAndScaleFill_;if(i){const n=ti(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),i!==1&&e.scale(i,i),e.rotate(this.viewRotation_)}e.fill(),i&&e.restore()}setStrokeStyle_(e,i){e.strokeStyle=i[1],e.lineWidth=i[2],e.lineCap=i[3],e.lineJoin=i[4],e.miterLimit=i[5],e.lineDashOffset=i[7],e.setLineDash(i[6])}drawLabelWithPointPlacement_(e,i,n,r){const o=this.textStates[i],a=this.createLabel(e,i,r,n),s=this.strokeStates[n],l=this.pixelRatio,u=lp(Array.isArray(e)?e[0]:e,o.textAlign||eu),c=Th[o.textBaseline||yh],h=s&&s.lineWidth?s.lineWidth:0;return{label:a,anchorX:u*(a.width/l-2*o.scale[0])+2*(.5-u)*h,anchorY:c*a.height/l+2*(.5-c)*h}}execute_(e,i,n,r,o,a,s,l){const u=this.zIndexContext_;let c;var h,d;this.pixelCoordinates_&&co(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=$r(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),h=this.renderedTransform_,d=n,h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5]);let p=0;const f=r.length;let g,y,_,b,m,v,S,C,k,L,A,q,P,T=0,R=0,M=0,I=null,E=null;const O=this.coordinateCache_,V=this.viewRotation_,B=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,F={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:V},H=this.instructions!=r||this.overlaps?0:200;let ee,ne,te,N;for(;p<f;){const z=r[p];switch(z[0]){case Uc:ee=z[1],N=z[3],ee.getGeometry()?s===void 0||Ut(s,N.getExtent())?++p:p=z[2]+1:p=z[2],u&&(u.zIndex=z[4]);break;case kw:R>H&&(this.fill_(e),R=0),M>H&&(e.stroke(),M=0),R||M||(e.beginPath(),m=NaN,v=NaN),++p;break;case Tw:T=z[1];const j=c[T],Z=c[T+1],W=c[T+2]-j,U=c[T+3]-Z,ye=Math.sqrt(W*W+U*U);e.moveTo(j+ye,Z),e.arc(j,Z,ye,0,2*Math.PI,!0),++p;break;case Ew:e.closePath(),++p;break;case _n:T=z[1],g=z[2];const ue=z[3],he=z[4],fe=z[5];F.geometry=ue,F.feature=ee,p in O||(O[p]=[]);const Ce=O[p];fe?fe(c,T,g,2,Ce):(Ce[0]=c[T],Ce[1]=c[T+1],Ce.length=2),u&&(u.zIndex=z[6]),he(Ce,F),++p;break;case Lo:T=z[1],g=z[2],k=z[3],y=z[4],_=z[5];let Ie=z[6];const me=z[7],we=z[8],qe=z[9],Ge=z[10];let oe=z[11];const ce=z[12];let X=z[13];b=z[14]||"declutter";const de=z[15];if(!k&&z.length>=20){L=z[19],A=z[20],q=z[21],P=z[22];const ie=this.drawLabelWithPointPlacement_(L,A,q,P);k=ie.label,z[3]=k;const re=z[23];y=(ie.anchorX-re)*this.pixelRatio,z[4]=y;const Me=z[24];_=(ie.anchorY-Me)*this.pixelRatio,z[5]=_,Ie=k.height,z[6]=Ie,X=k.width,z[13]=X}let Se,Le,Fe,K;z.length>25&&(Se=z[25]),z.length>17?(Le=z[16],Fe=z[17],K=z[18]):(Le=jo,Fe=!1,K=!1),Ge&&B?oe+=V:Ge||B||(oe-=V);let ae=0;for(;T<g;T+=2){if(Se&&Se[ae++]<X/this.pixelRatio)continue;const ie=this.calculateImageOrLabelDimensions_(k.width,k.height,c[T],c[T+1],X,Ie,y,_,we,qe,oe,ce,o,Le,Fe||K,ee),re=[e,i,k,ie,me,Fe?I:null,K?E:null];if(l){let Me,ge,De,Ne,bt;if(de){const It=g-T;if(!de[It]){de[It]={args:re,declutterMode:b};continue}const xt=de[It];Me=xt.args,ge=xt.declutterMode,delete de[It],De=Hy(Me)}if(!Me||ge==="declutter"&&l.collides(De)||(Ne=!0),b==="declutter"&&l.collides(ie.declutterBox)||(bt=!0),ge==="declutter"&&b==="declutter"){const It=Ne&&bt;Ne=It,bt=It}Ne&&(ge!=="none"&&l.insert(De),this.replayImageOrLabel_.apply(this,Me)),bt&&(b!=="none"&&l.insert(ie.declutterBox),this.replayImageOrLabel_.apply(this,re))}else this.replayImageOrLabel_.apply(this,re)}++p;break;case Og:const pe=z[1],Pe=z[2],He=z[3],Ze=z[4];P=z[5];const Re=z[6],Ye=z[7],We=z[8];q=z[9];const J=z[10];L=z[11],A=z[12];const Te=[z[13],z[13]];b=z[14]||"declutter";const _e=this.textStates[A],ve=_e.font,xe=[_e.scale[0]*Ye,_e.scale[1]*Ye];let D;ve in this.widths_?D=this.widths_[ve]:(D={},this.widths_[ve]=D);const G=lw(c,pe,Pe,2),Q=Math.abs(xe[0])*uy(ve,L,D);if(Ze||Q<=G){const ie=y5(c,pe,Pe,2,L,(G-Q)*lp(L,this.textStates[A].textAlign),Re,Math.abs(xe[0]),uy,ve,D,B?0:this.viewRotation_);e:if(ie){const re=[];let Me,ge,De,Ne,bt;if(q)for(Me=0,ge=ie.length;Me<ge;++Me){bt=ie[Me],De=bt[4],Ne=this.createLabel(De,A,"",q),y=bt[2]+(xe[0]<0?-J:J),_=He*Ne.height+2*(.5-He)*J*xe[1]/xe[0]-We;const It=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,bt[0],bt[1],Ne.width,Ne.height,y,_,0,0,bt[3],Te,!1,jo,!1,ee);if(l&&b==="declutter"&&l.collides(It.declutterBox))break e;re.push([e,i,Ne,It,1,null,null])}if(P)for(Me=0,ge=ie.length;Me<ge;++Me){bt=ie[Me],De=bt[4],Ne=this.createLabel(De,A,P,""),y=bt[2],_=He*Ne.height-We;const It=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,bt[0],bt[1],Ne.width,Ne.height,y,_,0,0,bt[3],Te,!1,jo,!1,ee);if(l&&b==="declutter"&&l.collides(It.declutterBox))break e;re.push([e,i,Ne,It,1,null,null])}l&&b!=="none"&&l.load(re.map(Hy));for(let It=0,xt=re.length;It<xt;++It)this.replayImageOrLabel_.apply(this,re[It])}}++p;break;case zg:if(a!==void 0){ee=z[1];const ie=a(ee,N,b);if(ie)return ie}++p;break;case Lw:H?R++:this.fill_(e),++p;break;case wv:for(T=z[1],g=z[2],ne=c[T],te=c[T+1],e.moveTo(ne,te),m=ne+.5|0,v=te+.5|0,T+=2;T<g;T+=2)ne=c[T],te=c[T+1],S=ne+.5|0,C=te+.5|0,T!=g-2&&S===m&&C===v||(e.lineTo(ne,te),m=S,v=C);++p;break;case Rl:I=z,this.alignAndScaleFill_=z[2],R&&(this.fill_(e),R=0,M&&(e.stroke(),M=0)),e.fillStyle=z[1],++p;break;case Ko:E=z,M&&(e.stroke(),M=0),this.setStrokeStyle_(e,z),++p;break;case Iw:H?M++:e.stroke(),++p;break;default:++p}}R&&this.fill_(e),M&&e.stroke()}execute(e,i,n,r,o,a){this.viewRotation_=r,this.execute_(e,i,n,this.instructions,o,void 0,void 0,a)}executeHitDetection(e,i,n,r,o){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],i,this.hitDetectionInstructions,!0,r,o)}}const Xa=["Polygon","Circle","LineString","Image","Text","Default"],Eh=["Image","Text"],x5=Xa.filter(t=>!Eh.includes(t));class Rw{constructor(e,i,n,r,o,a,s){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=i,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,s)}clip(e,i){const n=this.getClipCoords(i);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,i){for(const n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const o=e[n];for(const a in o){const s=o[a];r[a]=new b5(this.resolution_,this.pixelRatio_,this.overlaps_,s,i)}}}hasExecutors(e){for(const i in this.executorsByZIndex_){const n=this.executorsByZIndex_[i];for(let r=0,o=e.length;r<o;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,i,n,r,o,a){const s=2*(r=Math.round(r))+1,l=Zn(this.hitDetectionTransform_,r+.5,r+.5,1/i,-1/i,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Ot(s,s,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;let h;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):u||c.clearRect(0,0,s,s),this.renderBuffer_!==void 0&&(h=[1/0,1/0,-1/0,-1/0],Pl(h,e),Zr(h,i*(this.renderBuffer_+r),h));const d=function(S){if(up[S]!==void 0)return up[S];const C=2*S+1,k=S*S,L=new Array(k+1);for(let q=0;q<=S;++q)for(let P=0;P<=S;++P){const T=q*q+P*P;if(T>k)break;let R=L[T];R||(R=[],L[T]=R),R.push(4*((S+q)*C+(S+P))+3),q>0&&R.push(4*((S-q)*C+(S+P))+3),P>0&&(R.push(4*((S+q)*C+(S-P))+3),q>0&&R.push(4*((S-q)*C+(S-P))+3))}const A=[];for(let q=0,P=L.length;q<P;++q)L[q]&&A.push(...L[q]);return up[S]=A,A}(r);let p;function f(S,C,k){const L=c.getImageData(0,0,s,s).data;for(let A=0,q=d.length;A<q;A++)if(L[d[A]]>0){if(!a||k==="none"||p!=="Image"&&p!=="Text"||a.includes(S)){const P=(d[A]-3)/4,T=r-P%s,R=r-(P/s|0),M=o(S,C,T*T+R*R);if(M)return M}c.clearRect(0,0,s,s);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let y,_,b,m,v;for(g.sort(Hn),y=g.length-1;y>=0;--y){const S=g[y].toString();for(b=this.executorsByZIndex_[S],_=Xa.length-1;_>=0;--_)if(p=Xa[_],m=b[p],m!==void 0&&(v=m.executeHitDetection(c,l,n,f,h),v))return v}}getClipCoords(e){const i=this.maxExtent_;if(!i)return null;const n=i[0],r=i[1],o=i[2],a=i[3],s=[n,r,n,a,o,a,o,r];return $r(s,0,8,2,e,s),s}isEmpty(){return ro(this.executorsByZIndex_)}execute(e,i,n,r,o,a,s){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Hn),a=a||Xa;const u=Xa.length;let c,h,d,p,f;for(s&&l.reverse(),c=0,h=l.length;c<h;++c){const g=l[c].toString();for(f=this.executorsByZIndex_[g],d=0,p=a.length;d<p;++d){const y=a[d],_=f[y];if(_!==void 0){const b=s===null?void 0:_.getZIndexContext(),m=b?b.getContext():e,v=this.maxExtent_&&y!=="Image"&&y!=="Text";if(v&&(m.save(),this.clip(m,n)),b&&y!=="Text"&&y!=="Image"?b.pushFunction(S=>_.execute(S,i,n,r,o,s)):_.execute(m,i,n,r,o,s),v&&m.restore(),b){b.offset();const S=l[c]*u+d;this.deferredZIndexContexts_[S]||(this.deferredZIndexContexts_[S]=[]),this.deferredZIndexContexts_[S].push(b)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,i=Object.keys(e).map(Number).sort(Hn);for(let n=0,r=i.length;n<r;++n)e[i[n]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[i[n]].length=0}}const up={};class Fw extends Pw{constructor(e,i,n,r,o,a,s){super(),this.context_=e,this.pixelRatio_=i,this.extent_=n,this.transform_=r,this.transformRotation_=r?Su(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=a,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,i,n,r){if(!this.image_)return;const o=$r(e,i,n,r,this.transform_,this.pixelCoordinates_),a=this.context_,s=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=o.length;c<h;c+=2){const d=o[c]-this.imageAnchorX_,p=o[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,g=p+this.imageAnchorY_;Zn(s,f,g,1,1,u,-f,-g),a.save(),a.transform.apply(a,s),a.translate(f,g),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,i,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=$r(e,i,n,r,this.transform_,this.pixelCoordinates_),a=this.context_;let s=this.textRotation_;for(this.transformRotation_===0&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);i<n;i+=r){const l=o[i]+this.textOffsetX_,u=o[i+1]+this.textOffsetY_;s!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(s),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,i,n,r,o){const a=this.context_,s=$r(e,i,n,r,this.transform_,this.pixelCoordinates_);a.moveTo(s[0],s[1]);let l=s.length;o&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(s[u],s[u+1]);return o&&a.closePath(),n}drawRings_(e,i,n,r){for(let o=0,a=n.length;o<a;++o)i=this.moveToLineTo_(e,i,n[o],r,!0);return i}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ut(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=function(s,l,u){const c=s.getFlatCoordinates();if(!c)return null;const h=s.getStride();return $r(c,0,c.length,h,l,u)}(e,this.transform_,this.pixelCoordinates_),n=i[2]-i[0],r=i[3]-i[1],o=Math.sqrt(n*n+r*r),a=this.context_;a.beginPath(),a.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,i){const n=i.getGeometryFunction()(e);n&&(this.setStyle(i),this.drawGeometry(n))}drawGeometryCollection(e){const i=e.getGeometriesArray();for(let n=0,r=i.length;n<r;++n)this.drawGeometry(i[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ut(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=e.getExtent();if(Ut(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let o=0;const a=e.getEnds(),s=e.getStride();n.beginPath();for(let l=0,u=a.length;l<u;++l)o=this.moveToLineTo_(r,o,a[l],s,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ut(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_;i.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=e.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ut(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),a=e.getStride();i.beginPath();for(let s=0,l=o.length;s<l;++s){const u=o[s];r=this.drawRings_(n,r,u,a)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=e.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(e){const i=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,i.fillStyle=e.fillStyle):(i.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const i=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,i.lineCap=e.lineCap),co(n.lineDash,e.lineDash)||i.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,i.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,i.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,i.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,i.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset,i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const i=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:eu;n?(n.font!=e.font&&(n.font=e.font,i.font=e.font),n.textAlign!=r&&(n.textAlign=r,i.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,i.textBaseline=e.textBaseline)):(i.font=e.font,i.textAlign=r,i.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,i){if(e){const n=e.getColor();this.fillState_={fillStyle:$n(n||ji)}}else this.fillState_=null;if(i){const n=i.getColor(),r=i.getLineCap(),o=i.getLineDash(),a=i.getLineDashOffset(),s=i.getLineJoin(),l=i.getWidth(),u=i.getMiterLimit(),c=o||mr;this.strokeState_={lineCap:r!==void 0?r:ws,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(a||0)*this.pixelRatio_,lineJoin:s!==void 0?s:Ss,lineWidth:(l!==void 0?l:1)*this.pixelRatio_,miterLimit:u!==void 0?u:10,strokeStyle:$n(n||Jl)}}else this.strokeState_=null}setImageStyle(e){let i;if(!e||!(i=e.getSize()))return void(this.image_=null);const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=i[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=i[0]*n}setTextStyle(e){if(e){const i=e.getFill();if(i){const p=i.getColor();this.textFillState_={fillStyle:$n(p||ji)}}else this.textFillState_=null;const n=e.getStroke();if(n){const p=n.getColor(),f=n.getLineCap(),g=n.getLineDash(),y=n.getLineDashOffset(),_=n.getLineJoin(),b=n.getWidth(),m=n.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:ws,lineDash:g||mr,lineDashOffset:y||0,lineJoin:_!==void 0?_:Ss,lineWidth:b!==void 0?b:1,miterLimit:m!==void 0?m:10,strokeStyle:$n(p||Jl)}}else this.textStrokeState_=null;const r=e.getFont(),o=e.getOffsetX(),a=e.getOffsetY(),s=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:Ex,textAlign:h!==void 0?h:eu,textBaseline:d!==void 0?d:yh},this.text_=c!==void 0?Array.isArray(c)?c.reduce((p,f,g)=>p+(g%2?" ":f),""):c:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=s!==void 0&&s,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""}}const Qi=.5;function Aw(t,e,i,n,r,o,a,s,l){const u=l?Nm(r):r,c=Ot(t[0]*Qi,t[1]*Qi);c.imageSmoothingEnabled=!1;const h=c.canvas,d=new Fw(c,Qi,r,null,a,s,l?Mu(null,l):null),p=i.length,f=Math.floor(16777215/p),g={};for(let _=1;_<=p;++_){const b=i[_-1],m=b.getStyleFunction()||n;if(!m)continue;let v=m(b,o);if(!v)continue;Array.isArray(v)||(v=[v]);const S=(_*f).toString(16).padStart(7,"#00000");for(let C=0,k=v.length;C<k;++C){const L=v[C],A=L.getGeometryFunction()(b);if(!A||!Ut(u,A.getExtent()))continue;const q=L.clone(),P=q.getFill();P&&P.setColor(S);const T=q.getStroke();T&&(T.setColor(S),T.setLineDash(null)),q.setText(void 0);const R=L.getImage();if(R){const O=R.getImageSize();if(!O)continue;const V=Ot(O[0],O[1],void 0,{alpha:!1}),B=V.canvas;V.fillStyle=S,V.fillRect(0,0,B.width,B.height),q.setImage(new Cs({img:B,anchor:R.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}const M=q.getZIndex()||0;let I=g[M];I||(I={},g[M]=I,I.Polygon=[],I.Circle=[],I.LineString=[],I.Point=[]);const E=A.getType();if(E==="GeometryCollection"){const O=A.getGeometriesArrayRecursive();for(let V=0,B=O.length;V<B;++V){const F=O[V];I[F.getType().replace("Multi","")].push(F,q)}}else I[E.replace("Multi","")].push(A,q)}}const y=Object.keys(g).map(Number).sort(Hn);for(let _=0,b=y.length;_<b;++_){const m=g[y[_]];for(const v in m){const S=m[v];for(let C=0,k=S.length;C<k;C+=2){d.setStyle(S[C+1]);for(let L=0,A=e.length;L<A;++L)d.setTransform(e[L]),d.drawGeometry(S[C])}}}return c.getImageData(0,0,h.width,h.height)}function Ow(t,e,i){const n=[];if(i){const r=Math.floor(Math.round(t[0])*Qi),o=Math.floor(Math.round(t[1])*Qi),a=4*(Dt(r,0,i.width-1)+Dt(o,0,i.height-1)*i.width),s=i.data[a],l=i.data[a+1],u=i.data[a+2]+256*(l+256*s),c=Math.floor(16777215/e.length);u&&u%c==0&&n.push(e[u/c-1])}return n}const zw={Point:function(t,e,i,n,r,o){const a=i.getImage(),s=i.getText(),l=s&&s.getText(),u=o&&a&&l?{}:void 0;if(a){if(a.getImageState()!=At)return;const c=t.getBuilder(i.getZIndex(),"Image");c.setImageStyle(a,u),c.drawPoint(e,n,r)}if(l){const c=t.getBuilder(i.getZIndex(),"Text");c.setTextStyle(s,u),c.drawText(e,n,r)}},LineString:function(t,e,i,n,r){const o=i.getStroke();if(o){const s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(e,n,r)}const a=i.getText();if(a&&a.getText()){const s=t.getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n,r)}},Polygon:function(t,e,i,n,r){const o=i.getFill(),a=i.getStroke();if(o||a){const l=t.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawPolygon(e,n,r)}const s=i.getText();if(s&&s.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s),l.drawText(e,n,r)}},MultiPoint:function(t,e,i,n,r,o){const a=i.getImage(),s=a&&a.getOpacity()!==0,l=i.getText(),u=l&&l.getText(),c=o&&s&&u?{}:void 0;if(s){if(a.getImageState()!=At)return;const h=t.getBuilder(i.getZIndex(),"Image");h.setImageStyle(a,c),h.drawMultiPoint(e,n,r)}if(u){const h=t.getBuilder(i.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,n,r)}},MultiLineString:function(t,e,i,n,r){const o=i.getStroke();if(o){const s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,n,r)}const a=i.getText();if(a&&a.getText()){const s=t.getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n,r)}},MultiPolygon:function(t,e,i,n,r){const o=i.getFill(),a=i.getStroke();if(a||o){const l=t.getBuilder(i.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawMultiPolygon(e,n,r)}const s=i.getText();if(s&&s.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s),l.drawText(e,n,r)}},GeometryCollection:function(t,e,i,n,r,o){const a=e.getGeometriesArray();let s,l;for(s=0,l=a.length;s<l;++s)(0,zw[a[s].getType()])(t,a[s],i,n,r,o)},Circle:function(t,e,i,n,r){const o=i.getFill(),a=i.getStroke();if(o||a){const l=t.getBuilder(i.getZIndex(),"Circle");l.setFillStrokeStyle(o,a),l.drawCircle(e,n,r)}const s=i.getText();if(s&&s.getText()){const l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s),l.drawText(e,n)}}};function w5(t,e){return parseInt(et(t),10)-parseInt(et(e),10)}function Dg(t,e){const i=Dw(t,e);return i*i}function Dw(t,e){return .5*t/e}function Lh(t,e,i,n,r,o,a,s){const l=[],u=i.getImage();if(u){let d=!0;const p=u.getImageState();p==At||p==Ln?d=!1:p==Hi&&u.load(),d&&l.push(u.ready())}const c=i.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),function(d,p,f,g,y,_,b){const m=f.getGeometryFunction()(p);if(!m)return;const v=m.simplifyTransformed(g,y);f.getRenderer()?jw(d,v,f,p,b):(0,zw[v.getType()])(d,v,f,p,b,_)}(t,e,i,n,o,a,s),h}function jw(t,e,i,n,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,s=o.length;a<s;++a)jw(t,o[a],i,n,r);return}t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer(),r)}class S5 extends fv{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,i,n){const r=i.extent,o=i.viewState,a=o.center,s=o.resolution,l=o.projection,u=o.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),p=i.pixelRatio,f=i.viewHints,g=!(f[Zi]||f[En]),y=this.context,_=Math.round(rt(r)/s*p),b=Math.round(Yt(r)/s*p),m=h.getWrapX()&&l.canWrapX(),v=m?rt(c):null,S=m?Math.ceil((r[2]-c[2])/v)+1:1;let C=m?Math.floor((r[0]-c[0])/v):0;do{let k=this.getRenderTransform(a,s,0,p,_,b,C*v);i.declutter&&(k=k.slice(0)),e.execute(y,[y.canvas.width,y.canvas.height],k,u,g,n===void 0?Xa:n?Eh:x5,n?d&&i.declutter[d]:void 0)}while(++C<S)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ot(this.context.canvas.width,this.context.canvas.height,ky))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,na(this.context),ky.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,i){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const r=e.viewState;this.prepareContainer(e,i);const o=this.context,a=this.replayGroup_;let s=a&&!a.isEmpty();if(!s&&!(this.getLayer().hasListener(wf)||this.getLayer().hasListener(Sf)))return null;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,s&&n.extent&&this.clipping){const l=Nn(n.extent);s=Ut(l,e.extent),this.clipped_=s&&!kn(l,e.extent),this.clipped_&&this.clipUnrotated(o,e,l)}return s&&this.renderWorlds(a,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(i=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=n[0]*Qi,d=n[1]*Qi;c.push(this.getRenderTransform(r,o,a,Qi,h,d,0).slice());const p=u.getSource(),f=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!kn(f,l)){let g=l[0];const y=rt(f);let _,b=0;for(;g<f[0];)--b,_=y*b,c.push(this.getRenderTransform(r,o,a,Qi,h,d,_).slice()),g+=y;for(b=0,g=l[2];g>f[2];)++b,_=y*b,c.push(this.getRenderTransform(r,o,a,Qi,h,d,_).slice()),g-=y}this.hitDetectionImageData_=Aw(n,c,this.renderedFeatures_,u.getStyleFunction(),l,o,a,Dg(o,this.renderedPixelRatio_),null)}i(Ow(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,i,n,r,o){if(!this.replayGroup_)return;const a=i.viewState.resolution,s=i.viewState.rotation,l=this.getLayer(),u={},c=function(f,g,y){const _=et(f),b=u[_];if(b){if(b!==!0&&y<b.distanceSq){if(y===0)return u[_]=!0,o.splice(o.lastIndexOf(b),1),r(f,l,g);b.geometry=g,b.distanceSq=y}}else{if(y===0)return u[_]=!0,r(f,l,g);o.push(u[_]={feature:f,layer:l,geometry:g,distanceSq:y,callback:r})}};let h;const d=[this.replayGroup_],p=this.getLayer().getDeclutter();return d.some(f=>h=f.forEachFeatureAtCoordinate(e,a,s,n,c,p&&i.declutter[p]?i.declutter[p].all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const i=this.getLayer(),n=i.getSource();if(!n)return!1;const r=e.viewHints[Zi],o=e.viewHints[En],a=i.getUpdateWhileAnimating(),s=i.getUpdateWhileInteracting();if(this.ready&&!a&&r||!s&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,p=i.getRevision(),f=i.getRenderBuffer();let g=i.getRenderOrder();g===void 0&&(g=w5);const y=u.center.slice(),_=Zr(l,f*h),b=_.slice(),m=[_.slice()],v=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!kn(v,e.extent)){const R=rt(v),M=Math.max(rt(_)/2,R);_[0]=v[0]-M,_[2]=v[2]+M,zm(y,c);const I=Wb(m[0],c);I[0]<v[0]&&I[2]<v[2]?m.push([I[0]+R,I[1],I[2]+R,I[3]]):I[0]>v[0]&&I[2]>v[2]&&m.push([I[0]-R,I[1],I[2]-R,I[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!e.declutter&&kn(this.wrappedRenderedExtent_,_))return co(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const S=new qw(Dw(h,d),_,h,d);for(let R=0,M=m.length;R<M;++R)n.loadFeatures(m[R],h,c);const C=Dg(h,d);let k=!0;const L=(R,M)=>{let I;const E=R.getStyleFunction()||i.getStyleFunction();if(E&&(I=E(R,h)),I){const O=this.renderFeature(R,C,I,S,void 0,this.getLayer().getDeclutter(),M);k=k&&!O}},A=Nm(_),q=n.getFeaturesInExtent(A);g&&q.sort(g);for(let R=0,M=q.length;R<M;++R)L(q[R],R);this.renderedFeatures_=q,this.ready=k;const P=S.finish(),T=new Rw(_,h,d,n.getOverlaps(),P,i.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=b,this.wrappedRenderedExtent_=_,this.renderedCenter_=y,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=T,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,i,n,r,o,a,s){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let u=0,c=n.length;u<c;++u)l=Lh(r,e,n[u],i,this.boundHandleStyleImageChange_,o,a,s)||l;else l=Lh(r,e,n,i,this.boundHandleStyleImageChange_,o,a,s);return l}}var va=class extends lv{constructor(t){super(t)}createRenderer(){return new S5(this)}},C5=class extends ga{constructor(t){t=t||{};var e=document.createElement("div");super({element:e,target:t.target});var i=this;if(this.minZoom=t.minZoom||0,this.maxZoom=t.maxZoom||18,this.rotation=t.rotation,t.target)this.panel_=t.target;else{e.classList.add("ol-overview","ol-unselectable","ol-control","ol-collapsed"),/top/.test(t.align)&&e.classList.add("ol-control-top"),/right/.test(t.align)&&e.classList.add("ol-control-right");var n=document.createElement("button");n.setAttribute("type","button"),n.addEventListener("touchstart",function(o){i.toggleMap(),o.preventDefault()}),n.addEventListener("click",function(){i.toggleMap()}),e.appendChild(n),this.panel_=document.createElement("div"),this.panel_.classList.add("panel"),e.appendChild(this.panel_)}this.ovmap_=new zs({controls:new an,interactions:new an,target:this.panel_,view:new Wi({zoom:2,center:[0,0],projection:t.projection}),layers:t.layers}),this.oview_=this.ovmap_.getView(),this.extentLayer=new va({name:"Cache extent",source:new Jr,style:t.style||[new qt({image:new Rn({fill:new Zt({color:"rgba(255,0,0, 1)"}),stroke:new Vt({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new Vt({width:5,color:"rgba(255,0,0,0.8)"})})]}),this.ovmap_.addLayer(this.extentLayer);var r=function(o,a){var s=3*o*Math.PI/2,l=-1/a,u=Math.cos(s)*Math.pow(2,l);return function(c){return c=1-Math.cos(c*Math.PI/2),1-Math.cos(s*c)*Math.pow(2,l*c)+u*c}};this.ovmap_.addInteraction(new po({handleDownEvent:function(o){return t.panAnimation!==!1?t.panAnimation=="elastic"||t.elasticPan?i.getMap().getView().animate({center:o.coordinate,easing:r(2,.3),duration:1e3}):i.getMap().getView().animate({center:o.coordinate,duration:300}):i.getMap().getView().setCenter(o.coordinate),!1}}))}getOverviewMap(){return this.ovmap_}toggleMap(){this.element.classList.toggle("ol-collapsed"),this.ovmap_.updateSize(),this.setView()}setPosition(t){/top/.test(t)?this.element.classList.add("ol-control-top"):this.element.classList.remove("ol-control-top"),/right/.test(t)?this.element.classList.add("ol-control-right"):this.element.classList.remove("ol-control-right")}setMap(t){if(this._listener)for(let e in this._listener)Bn(this._listener[e]);this._listener={},super.setMap(t),t&&(this._listener.map=t.on("change:view",function(){this._listener.view&&Bn(this._listener.view),t.getView()&&(this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())}.bind(this)),this._listener.view=t.getView().on("propertychange",this.setView.bind(this)),this.setView())}calcExtent_(t){var e=this.getMap();if(e){var i=this.extentLayer.getSource();i.clear();var n=new Sn,r=e.getSize(),o=e.getView().getResolution(),a=e.getView().getRotation(),s=e.getView().getCenter();if(o){var l=o*r[0]/2,u=o*r[1]/2,c=this.oview_.getResolution();if(l/c>5||u/c>5){var h,d,p,f=Math.cos(a),g=Math.sin(a);for(t=[[-l,-u],[-l,u],[l,u],[l,-u]],h=0;h<4;++h)d=t[h][0],p=t[h][1],t[h][0]=s[0]+d*f-p*g,t[h][1]=s[1]+d*g+p*f;n.setGeometry(new Gi([t]))}else n.setGeometry(new un(s));i.addFeature(n)}}}setView(t){if(!t)return this.setView({key:"rotation"}),this.setView({key:"resolution"}),void this.setView({key:"center"});switch(t.key){case"rotation":this.rotation?this.oview_.setRotation(this.getMap().getView().getRotation()):this.oview_.getRotation()&&this.oview_.setRotation(0);break;case"center":var e=this.getMap().getView().calculateExtent(this.getMap().getSize()),i=this.oview_.calculateExtent(this.ovmap_.getSize());(e[0]<i[0]||e[1]<i[1]||e[2]>i[2]||e[3]>i[3])&&this.oview_.setCenter(this.getMap().getView().getCenter());break;case"resolution":var n=2*Math.round(this.oview_.getZoomForResolution(this.getMap().getView().getResolution())/2)-4;n=Math.min(this.maxZoom,Math.max(this.minZoom,n)),this.oview_.setZoom(n)}this.calcExtent_()}},M5=class extends ga{constructor(t){(t=t||{}).typing===void 0&&(t.typing=300);var e=document.createElement("DIV"),i=(t.className||"")+" ol-scale";t.target||(i+=" ol-unselectable ol-control"),super({element:e,target:t.target}),this._input=document.createElement("INPUT"),this._input.value="-",e.setAttribute("class",i),t.editable===!1&&(this._input.readOnly=!0),e.appendChild(this._input),this._input.addEventListener("change",this.setScale.bind(this)),this.set("ppi",t.ppi||96)}setMap(t){this._listener&&Bn(this._listener),this._listener=null,super.setMap(t),t&&(this._listener=t.on("moveend",this.getScale.bind(this)))}getScale(){var t=this.getMap();if(t){var e=function(i,n){var r=i.getView(),o=r.getProjection(),a=r.getCenter(),s=i.getPixelFromCoordinate(a);s[1]+=1;var l=i.getCoordinateFromPixel(s),u=Wl(zo(a,o,"EPSG:4326"),zo(l,o,"EPSG:4326"));return u*((n||96)/.0254)}(t,this.get("ppi"));return this._input.value=this.formatScale(e),e}}formatScale(t){return"1 / "+(t=t>100?100*Math.round(t/100):Math.round(t)).toLocaleString()}setScale(t){var e=this.getMap();e&&t&&(t.target&&(t=t.target.value),function(i,n,r){if(i&&n){var o=n;if(typeof n=="string"&&((o=(n=n.replace(":","/").split("/"))[1])||(o=n[0]||""),o=o.replace(/[^\d]/g,""),o=parseInt(o),n[1])){var a=parseInt(n[0]);a&&(o/=a)}if(!o)return;var s=i.getView(),l=s.getProjection(),u=s.getCenter(),c=i.getPixelFromCoordinate(u);c[1]+=1;var h=i.getCoordinateFromPixel(c),d=Wl(zo(u,l,"EPSG:4326"),zo(h,l,"EPSG:4326"));d*=(r||96)/.0254,s.setResolution(s.getResolution()*o/d)}}(e,t,this.get("ppi"))),this.getScale()}};function k5(t){const e=t.frameState,i=fh(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new Fw(t.context,e.pixelRatio,e.extent,i,e.viewState.rotation)}var T5=class extends ga{constructor(t){super(t=t||{}),this.setStyle(t.style)}setMap(t){this.getCanvas(t);var e=this.getMap();if(this._listener&&(Bn(this._listener),this._listener=null),super.setMap(t),e)try{e.renderSync()}catch{}t&&(this._listener=t.on("postcompose",this._draw.bind(this)))}getCanvas(t){return function(e){if(!e)return null;var i=e.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return i||(e.getViewport().querySelector(".ol-layers")?((i=document.createElement("canvas")).className="ol-fixedoverlay",e.getViewport().querySelector(".ol-layers").after(i),e.on("precompose",function(n){i.width=e.getSize()[0]*n.frameState.pixelRatio,i.height=e.getSize()[1]*n.frameState.pixelRatio})):i=e.getViewport().querySelector("canvas")),i}(t)}getContext(t){var e=t.context;if(!e&&this.getMap()){var i=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];e=i?i.getContext("2d"):null}return e}setStyle(t){this._style=t||new qt({})}getStyle(){return this._style}getStroke(){return this._style.getStroke()||this._style.setStroke(new Vt({color:"#000",width:1.25})),this._style.getStroke()}getFill(){return this._style.getFill()||this._style.setFill(new Zt({color:"#fff"})),this._style.getFill()}getTextStroke(){var t=this._style.getText();return t||(t=new Yo({})),t.getStroke()||t.setStroke(new Vt({color:"#fff",width:3})),t.getStroke()}getTextFill(){var t=this._style.getText();return t||(t=new Yo({})),t.getFill()||t.setFill(new Zt({color:"#fff"})),t.getFill()}getTextFont(){var t=this._style.getText();return t||(t=new Yo({})),t.getFont()||t.setFont("12px sans-serif"),t.getFont()}_draw(){}},E5=class extends T5{constructor(t){var e=(t=t||{}).style||[new qt({image:new oo({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new Vt({color:"#fff",width:3})})}),new qt({image:new oo({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new Vt({color:"#000",width:1})})})];e instanceof Array||(e=[e]);var i=document.createElement("div");i.className="ol-target ol-unselectable ol-control",super({element:i,style:e,target:t.target}),this.composite=t.composite||"",this.setVisible(t.visible!==!1)}setStyle(t){t instanceof Array||(t=[t]),super.setStyle(t)}setVisible(t){if(this.set("visible",t),this.getMap())try{this.getMap().renderSync()}catch{}}getVisible(){return this.get("visible")}_draw(t){var e=this.getContext(t);if(e&&this.getMap()&&this.getVisible()){var i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var n=e.canvas.width/2/i,r=e.canvas.height/2/i,o=new un(this.getMap().getCoordinateFromPixel([n,r]));this.composite&&(e.globalCompositeOperation=this.composite);for(var a=0;a<this._style.length;a++){var s=this._style[a];if(s instanceof qt){var l=t.vectorContext;l||(l=k5({inversePixelTransform:[1,0,0,1,0,0],context:e,frameState:{pixelRatio:i,extent:t.frameState.extent,coordinateToPixelTransform:t.frameState.coordinateToPixelTransform,viewState:t.frameState.viewState}})),l.setStyle(s),l.drawGeometry(o)}}e.restore()}}},L5=class extends po{constructor(t){super({handleDownEvent:function(e){return this._setPosition(e)},handleMoveEvent:function(e){return this._setPosition(e)}}),this.layers_=[],this.precomposeBind_=this.precompose_.bind(this),this.postcomposeBind_=this.postcompose_.bind(this),t=t||{},this.pos=!1,this.radius=t.radius||100,t.layers&&this.addLayer(t.layers),this.setActive(!0)}setMap(t){var e;if(this.getMap()){for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}if(super.setMap(t),t){for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);try{t.renderSync()}catch{}}}setRadius(t){if(this.radius=t,this.getMap())try{this.getMap().renderSync()}catch{}}getRadius(){return this.radius}addLayer(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){if(this.getMap()){t[e].on(["precompose","prerender"],this.precomposeBind_),t[e].on(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}this.layers_.push(t[e])}}removeLayers(){this.removeLayer(this.layers_)}removeLayer(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var i;for(i=0;i<this.layers_.length&&this.layers_[i]!==t[e];i++);i!=this.layers_.length&&this.getMap()&&(this.layers_[i].un(["precompose","prerender"],this.precomposeBind_),this.layers_[i].un(["postcompose","postrender"],this.postcomposeBind_),this.layers_.splice(i,1))}if(this.getMap())try{this.getMap().renderSync()}catch{}}setPosition(t){if(this.getMap()){this.pos=this.getMap().getPixelFromCoordinate(t);try{this.getMap().renderSync()}catch{}}}getPosition(){return this.pos?this.getMap().getCoordinateFromPixel(this.pos):null}setPixelPosition(t){if(this.pos=t,this.getMap())try{this.getMap().renderSync()}catch{}}getPixelPosition(){return this.pos}_setPosition(t){if((t.type!=="pointermove"||this.get("action")!=="onclick")&&(t.pixel&&(this.pos=t.pixel),this.getMap()))try{this.getMap().renderSync()}catch{}}precompose_(t){if(this.getActive()){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.beginPath();var n=[this.pos[0],this.pos[1]],r=this.radius,o=t.inversePixelTransform;o?r=(n=[n[0]*o[0]-n[1]*o[1]+o[4],-n[0]*o[2]+n[1]*o[3]+o[5]])[0]-((this.pos[0]-r)*o[0]-this.pos[1]*o[1]+o[4]):(n[0]*=i,n[1]*=i,r*=i),e.arc(n[0],n[1],r,0,2*Math.PI),e.clip()}}postcompose_(t){this.getActive()&&t.context.restore()}setActive(t){if(t!==this.getActive()&&(super.setActive(t),this.layers_)){var e;if(t)for(e=0;e<this.layers_.length;e++)this.layers_[e].on(["precompose","prerender"],this.precomposeBind_),this.layers_[e].on(["postcompose","postrender"],this.postcomposeBind_);else for(e=0;e<this.layers_.length;e++)this.layers_[e].un(["precompose","prerender"],this.precomposeBind_),this.layers_[e].un(["postcompose","postrender"],this.postcomposeBind_);if(this.getMap())try{this.getMap().renderSync()}catch{}}}};const cp="element",hp="map",dp="offset",oc="position",pp="positioning";class jg extends gn{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst===void 0||e.insertFirst,this.stopEvent=e.stopEvent===void 0||e.stopEvent,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(cp,this.handleElementChanged),this.addChangeListener(hp,this.handleMapChanged),this.addChangeListener(dp,this.handleOffsetChanged),this.addChangeListener(oc,this.handlePositionChanged),this.addChangeListener(pp,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(cp)}getId(){return this.id}getMap(){return this.get(hp)||null}getOffset(){return this.get(dp)}getPosition(){return this.get(oc)}getPositioning(){return this.get(pp)}handleElementChanged(){kx(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Lt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ht(e,uv,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(cp,e)}setMap(e){this.set(hp,e)}setOffset(e){this.set(dp,e)}setPosition(e){this.set(oc,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const i=this.getMap();if(!i||!i.getTargetElement()||!this.get(oc))return;const n=this.getRect(i.getTargetElement(),i.getSize()),r=this.getElement(),o=this.getRect(r,[MM(r),kM(r)]),a=(e=e||{}).margin===void 0?20:e.margin;if(!kn(n,o)){const s=o[0]-n[0],l=n[2]-o[2],u=o[1]-n[1],c=n[3]-o[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),u<0?h[1]=u-a:c<0&&(h[1]=Math.abs(c)+a),h[0]!==0||h[1]!==0){const d=i.getView().getCenterInternal(),p=i.getPixelFromCoordinateInternal(d);if(!p)return;const f=[p[0]+h[0],p[1]+h[1]],g=e.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}getRect(e,i){const n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[r,o,r+i[0],o+i[1]]}setPositioning(e){this.set(pp,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),i=this.getPosition();if(!e||!e.isRendered()||!i)return void this.setVisible(!1);const n=e.getPixelFromCoordinate(i),r=e.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(e,i){const n=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let a="0%",s="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?a="-100%":o!="bottom-center"&&o!="center-center"&&o!="top-center"||(a="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?s="-100%":o!="center-left"&&o!="center-center"&&o!="center-right"||(s="-50%");const l=`translate(${a}, ${s}) translate(${Math.round(e[0]+r[0])+"px"}, ${Math.round(e[1]+r[1])+"px"})`;this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l)}getOptions(){return this.options}}const fp="units",I5=[1,2,5],nl=25.4/.28;var P5=class extends ga{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+ku,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(fp,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(fp)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(fp,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,n=this.getUnits(),r=n=="degrees"?"degrees":"m";let o=Ul(i,t.resolution,e,r);const a=this.minWidth_*(this.dpi_||nl)/nl,s=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||nl)/nl:void 0;let l=a*o,u="";if(n=="degrees"){const b=br.degrees;l*=b,l<b/60?(u="",o*=3600):l<b?(u="",o*=60):u=""}else if(n=="imperial")l<.9144?(u="in",o/=.0254):l<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(n=="nautical")o/=1852,u="NM";else if(n=="metric")l<1e-6?(u="nm",o*=1e9):l<.001?(u="m",o*=1e6):l<1?(u="mm",o*=1e3):l<1e3?u="m":(u="km",o/=1e3);else{if(n!="us")throw new Error("Invalid units");l<.9144?(u="in",o*=39.37):l<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472)}let c,h,d,p,f,g,y=3*Math.floor(Math.log(a*o)/Math.log(10));for(;;){d=Math.floor(y/3);const b=Math.pow(10,d);if(c=I5[(y%3+3)%3]*b,h=Math.round(c/o),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(s!==void 0&&h>=s){c=p,h=f,d=g;break}if(h>=a)break;p=c,f=h,g=d,++y}const _=this.scaleBar_?this.createScaleBar(h,c,u):c.toFixed(d<0?-d:0)+" "+u;this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const n=this.getScaleForResolution(),r=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),o=this.scaleBarSteps_,a=t/o,s=[this.createMarker("absolute")];for(let l=0;l<o;++l){const u=l%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";s.push(`<div><div class="ol-scale-singlebar ${u}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(l%2==0||o===2?this.createStepText(l,t,!1,e,i):"")+"</div>")}return s.push(this.createStepText(o,t,!0,e,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+s.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,e,i,n,r){const o=(t===0?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+r);return`<div class="ol-scale-step-text" style="margin-left: ${t===0?-3:e/this.scaleBarSteps_*-1}px;text-align: ${t===0?"left":"center"};min-width: ${t===0?0:e/this.scaleBarSteps_*2}px;left: ${i?e+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){return Ul(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||nl)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}};const Uy="drawstart",q5="drawend",R5="drawabort";class ac extends fn{constructor(e,i){super(e),this.feature=i}}function sc(t,e){return fr(t[0],t[1],e[0],e[1])}function Ya(t,e){const i=t.length;return e<0?t[e+i]:e>=i?t[e-i]:t[e]}function lc(t,e,i){let n,r;e<i?(n=e,r=i):(n=i,r=e);const o=Math.ceil(n),a=Math.floor(r);if(o>a)return sc(Ka(t,n),Ka(t,r));let s=0;n<o&&(s+=sc(Ka(t,n),Ya(t,o))),a<r&&(s+=sc(Ya(t,a),Ka(t,r)));for(let l=o;l<a-1;++l)s+=sc(Ya(t,l),Ya(t,l+1));return s}function Bw(t,e,i){if(e instanceof tn)uc(t,e.getCoordinates(),!1,i);else if(e instanceof oa){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r)uc(t,n[r],!1,i)}else if(e instanceof Gi){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r)uc(t,n[r],!0,i)}else if(e instanceof aa){const n=e.getCoordinates();for(let r=0,o=n.length;r<o;++r){const a=n[r];for(let s=0,l=a.length;s<l;++s)uc(t,a[s],!0,i)}}else if(e instanceof tu){const n=e.getGeometries();for(let r=0;r<n.length;++r)Bw(t,n[r],i)}}const gp={index:-1,endIndex:NaN};function uc(t,e,i,n){const r=t[0],o=t[1];for(let a=0,s=e.length-1;a<s;++a){const l=Nw(r,o,e[a],e[a+1]);if(l.squaredDistance===0){const u=a+l.along;return void n.push({coordinates:e,ring:i,startIndex:u,endIndex:u})}}}const mp={along:0,squaredDistance:0};function Nw(t,e,i,n){const r=i[0],o=i[1],a=n[0]-r,s=n[1]-o;let l=0,u=r,c=o;return a===0&&s===0||(l=Dt(((t-r)*a+(e-o)*s)/(a*a+s*s),0,1),u+=a*l,c+=s*l),mp.along=l,mp.squaredDistance=Su(fr(t,e,u,c),10),mp}function Ka(t,e){const i=t.length;let n=Math.floor(e);const r=e-n;n>=i?n-=i:n<0&&(n+=i);let o=n+1;o>=i&&(o-=i);const a=t[n],s=a[0],l=a[1],u=t[o];return[s+(u[0]-s)*r,l+(u[1]-l)*r]}function F5(){const t=function(){const e={},i=[255,255,255,1],n=[0,153,255,1];return e.Polygon=[new qt({fill:new Zt({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new qt({stroke:new Vt({color:i,width:5})}),new qt({stroke:new Vt({color:n,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new qt({image:new Rn({radius:6,fill:new Zt({color:n}),stroke:new Vt({color:i,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}();return function(e,i){return t[e.getGeometry().getType()]}}var Ih,sn,Fl=class extends po{constructor(t){const e=t;e.stopDown||(e.stopDown=qs),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:vs,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const n=this.mode_;if(n==="Circle")i=(r,o,a)=>{const s=o||new hd([NaN,NaN]),l=bn(r[0]),u=Ub(l,bn(r[r.length-1]));return s.setCenterAndRadius(l,Math.sqrt(u),this.geometryLayout_),s};else{let r;n==="Point"?r=un:n==="LineString"?r=tn:n==="Polygon"&&(r=Gi),i=(o,a,s)=>(a?n==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new r(o,this.geometryLayout_),a)}}this.geometryFunction_=i,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new va({source:new Jr({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:F5(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:dv,this.freehandCondition_,t.freehand?this.freehandCondition_=kg:this.freehandCondition_=t.freehandCondition?t.freehandCondition:Kx,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(Cg,this.updateState_)}setTrace(t){let e;e=t?t===!0?kg:t:nk,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===xf&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===Mt.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Mt.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Mt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===Mt.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===Mt.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Mt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Mt.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new lr(Mt.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=hh([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(i);if(n.length===0)return;const r=function(o,a){const s=[];for(let l=0;l<a.length;++l)Bw(o,a[l].getGeometry(),s);return s}(t.coordinate,n);r.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:r,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex;i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const n=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),i=r-n+1}else{const n=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),i=n-r+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const n=[];if(e<i){const r=Math.ceil(e);let o=Math.floor(i);o===i&&(o-=1);for(let a=r;a<=o;++a)n.push(Ya(t.coordinates,a))}else{const r=Math.floor(e);let o=Math.ceil(i);o===i&&(o+=1);for(let a=r;a>=o;--a)n.push(Ya(t.coordinates,a))}n.length&&this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&B0(e.startPx,t.pixel)<this.snapTolerance_)return;const i=function(a,s,l,u){const c=a[0],h=a[1];let d=1/0,p=-1,f=NaN;for(let _=0;_<s.targets.length;++_){const b=s.targets[_],m=b.coordinates;let v,S=1/0;for(let C=0;C<m.length-1;++C){const k=Nw(c,h,m[C],m[C+1]);k.squaredDistance<S&&(S=k.squaredDistance,v=C+k.along)}S<d&&(d=S,b.ring&&s.targetIndex===_&&(b.endIndex>b.startIndex?v<b.startIndex&&(v+=m.length):b.endIndex<b.startIndex&&v>b.startIndex&&(v-=m.length)),f=v,p=_)}const g=s.targets[p];let y=g.ring;if(s.targetIndex===p&&y){const _=Ka(g.coordinates,f);B0(l.getPixelFromCoordinate(_),s.startPx)>u&&(y=!1)}if(y){const _=g.coordinates,b=_.length,m=g.startIndex,v=f;if(m<v){const S=lc(_,m,v);lc(_,m,v-b)<S&&(f-=b)}else{const S=lc(_,m,v);lc(_,m,v+b)<S&&(f+=b)}}return gp.index=p,gp.endIndex=f,gp}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(e.targetIndex!==-1){const s=e.targets[e.targetIndex];this.removeTracedCoordinates_(s.startIndex,s.endIndex)}const a=e.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}e.targetIndex=i.index;const n=e.targets[e.targetIndex];n.endIndex=i.endIndex;const r=Ka(n.coordinates,n.endIndex),o=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&this.mode_!=="Point"||(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let n=!1,r=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")n=!e&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;n=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],r=e?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(n){const a=this.getMap();for(let s=0,l=r.length;s<l;s++){const u=r[s],c=a.getPixelFromCoordinate(u),h=t[0]-c[0],d=t[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(h*h+d*d)<=p,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new Sn(new un(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new Sn);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new tn(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=gh(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Sn(new tn(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new Sn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new ac(Uy,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),r=gh(this.geometryLayout_);let o,a;for(;t.length<r;)t.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=t[0],a[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,r;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(t.slice()),this.geometryFunction_(r,e,i)):o==="Polygon"&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(t.slice()),n&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let r=0;r<t;++r){let o;if(n==="LineString"||n==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,e,i),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(n==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const s=o[o.length-2].slice();o[o.length-1]=s,this.createOrUpdateSketchPoint_(s)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const i=t.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new js([e])):this.type_==="MultiLineString"?t.setGeometry(new oa([e])):this.type_==="MultiPolygon"&&t.setGeometry(new aa([e])),this.dispatchEvent(new ac(q5,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new ac(R5,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let n;if(i&&this.startDrawing_(t[0]),e==="LineString"||e==="Circle")n=this.sketchCoords_;else{if(e!=="Polygon")return;n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&n.shift(),n.pop();for(let o=0;o<t.length;o++)this.addToDrawing_(t[o]);const r=t[t.length-1];this.sketchFeature_=this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Sn(new un(i)),this.updateSketchFeatures_(),this.dispatchEvent(new ac(Uy,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}};(function(t){t.Point="Point",t.LineString="LineString",t.LinearRing="LinearRing",t.Polygon="Polygon",t.MultiPoint="MultiPoint",t.MultiLineString="MultiLineString",t.MultiPolygon="MultiPolygon",t.GeometryCollection="GeometryCollection",t.Circle="Circle",t.Hand="Hand"})(Ih||(Ih={}));class A5{xmap;drawLayer;draw;drawStyle;constructor(e){if(this.xmap=e,e&&!this.drawLayer){const i=new Jr,n=new qt({fill:new Zt({color:"rgba(0, 0, 255, 0.1)"}),stroke:new Vt({color:"#0000ff",width:2}),image:new Rn({radius:7,fill:new Zt({color:"#00f"})})});this.drawLayer=new va({source:i,style:n}),e.map?.addLayer(this.drawLayer)}}setDrawVectorIndex=e=>{this.drawLayer.setZIndex(e)};setDrawLayer(e){if(e){const i=e;if(i)this.drawLayer=i;else{const n=e;this.xmap&&(this.drawLayer=this.xmap.map?.getLayers().item[n])}}}get DrawSource(){return this.drawLayer.getSource()}changeDrawType(e,i=void 0){this.clearInteraction(),i&&(this.drawStyle=i),this.drawStyle||(this.drawStyle=new qt({fill:new Zt({color:"rgba(0, 255, 255, 0.5)"}),stroke:new Vt({color:"#ff0000",width:2}),image:new Rn({radius:7,fill:new Zt({color:"#f00"})})})),this.draw=new Fl({source:this.DrawSource,type:e===Ih.Hand?"LineString":e.toString(),style:this.drawStyle,freehand:e===Ih.Hand,snapTolerance:50}),this.xmap.map?.addInteraction(this.draw)}clearInteraction(){const e=this.xmap.map;e&&this.draw&&(e.removeInteraction(this.draw),e.getInteractions().getArray()?.forEach(i=>{i instanceof Fl&&e.removeInteraction(i)}))}clearLastDraw(){this.draw&&(()=>{const e=this.DrawSource.getFeatures();e.length!==0&&this.DrawSource.removeFeature(e[e.length-1])})()}clearboard(){this.draw&&this.DrawSource.clear()}}class Xy{map;sketch;helpTooltipElement;helpTooltip;measureTooltipElement;measureTooltip;continuePolygonMsg="";continueLineMsg="";draw;source;measureLayer;doubleClickZoom;isInited=!1;tooltipArray=[];sphereOptions;constructor(e){this.map=e,this.init()}init(){const e=this.map.getView();this.sphereOptions={projection:e.getProjection()},this.createHelpTooltip(),this.createMeasureTooltip(),this.doubleClickZoom=this.map.getInteractions().getArray().find(i=>i instanceof Ux),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().addEventListener("mouseout",this.mouseoutHandler.bind(this)),this.source=new Jr,this.measureLayer=new va({source:this.source,style:new qt({fill:new Zt({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Vt({color:"#ffcc33",width:2}),image:new Rn({radius:7,fill:new Zt({color:"#ffcc33"})})})}),this.measureLayer.set("name","measurelayer"),this.map.addLayer(this.measureLayer),this.isInited=!0}mouseoutHandler(){this.helpTooltipElement.classList.add("hidden")}createHelpTooltip(){this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="myol-tooltip hidden",this.helpTooltip=new jg({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),this.map.addOverlay(this.helpTooltip),this.tooltipArray.push(this.helpTooltipElement)}createMeasureTooltip(){this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="myol-tooltip myol-tooltip-measure",this.measureTooltip=new jg({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.measureTooltip),this.tooltipArray.push(this.measureTooltipElement)}listener;formatLength(e){let i,n=Yb(e,this.sphereOptions);return i=n>100?Math.round(n/1e3*100)/100+" km":Math.round(100*n)/100+" m",i}formatArea(e){let i,n=Kb(e,this.sphereOptions);return i=n>1e4?Math.round(n/1e6*100)/100+" km<sup>2</sup>":Math.round(100*n)/100+" m<sup>2</sup>",i}geometryChanged(e){let i,n=e.target,r="";n instanceof Gi?(r=this.formatArea(n),i=n.getInteriorPoint().getCoordinates()):n instanceof tn&&(r=this.formatLength(n),i=n.getLastCoordinate()),this.measureTooltipElement&&(this.measureTooltipElement.innerHTML=r),this.measureTooltip.setPosition(i)}pointerMoveHandler(e){if(e.dragging)return;let i="";if(this.sketch){let n=this.sketch.getGeometry();n instanceof Gi?i=this.continuePolygonMsg:n instanceof tn&&(i=this.continueLineMsg)}this.helpTooltipElement.innerHTML=i,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}addInteraction(e="area"){this.isInited||this.init(),this.map&&this.map.getInteractions().getArray()?.forEach(n=>{n instanceof Fl&&this.map.removeInteraction(n)});const i=e=="area"?"Polygon":"LineString";this.draw=new Fl({source:this.source,type:i,style:new qt({fill:new Zt({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Vt({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new Rn({radius:5,stroke:new Vt({color:"rgba(0, 0, 0, 0.7)"}),fill:new Zt({color:"rgba(255, 255, 255, 0.2)"})})})}),this.map.addInteraction(this.draw),this.draw.on("drawstart",this.drawStartHander.bind(this)),this.draw.on("drawend",this.drawEndHander.bind(this))}drawStartHander(e){this.sketch=e.feature,this.listener=this.sketch.getGeometry().on("change",this.geometryChanged.bind(this))}drawEndHander(){this.measureTooltipElement.className="myol-tooltip myol-tooltip-static",this.measureTooltip.setOffset([0,-7]),this.sketch=null,this.measureTooltipElement=null,this.createMeasureTooltip(),Bn(this.listener)}removeInteraction(){this.draw&&this.map.removeInteraction(this.draw),this.map.getInteractions().getArray()?.forEach(e=>{e instanceof Fl&&this.map.removeInteraction(e)}),this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.tooltipArray.forEach(e=>{e.parentNode?.removeChild(e)}),this.tooltipArray=[],this.helpTooltip&&this.map.removeOverlay(this.helpTooltip),this.measureTooltip&&this.map.removeOverlay(this.measureTooltip),this.measureLayer&&this.map.removeLayer(this.measureLayer),this.map.getLayers()?.forEach(e=>{e.get("name")==="measurelayer"&&this.map.removeLayer(e)}),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().removeEventListener("mouseout",this.mouseoutHandler.bind(this)),this.doubleClickZoom&&this.map.addInteraction(this.doubleClickZoom),this.isInited=!1}}function Rr(t,e){return ti(t.inversePixelTransform,e.slice(0))}(function(t){t[t.RollHorizonl=0]="RollHorizonl",t[t.RollVertical=1]="RollVertical",t[t.FishEye=2]="FishEye"})(sn||(sn={}));class Bg{container;xmap;swipeLayer;SwipeType=sn.RollHorizonl;circleRadius=50;swipeValueX=0;swipeValueY=0;divHeight=0;divWidth=0;line=void 0;preRenderKey;postRenderKey;IsLoaded=!1;constructor(e,i){this.container=e,this.xmap=i,e&&(e.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.line=document.createElement("div"),e.insertBefore(this.line,e.firstElementChild),this.divWidth=e.clientWidth,this.divHeight=e.clientHeight)}rollSwipeLayerbak(e){const i=e.offsetX,n=e.offsetY;if(this.changeSwipe(i,n),this.line)switch(this.SwipeType){case sn.RollHorizonl:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","horizonaldivider"),this.line.setAttribute("class","horizonaldivider");const r=i;this.line.style.height=this.divHeight+"px",this.line.style.width="4px",this.line.style.left=r+"px",this.line.style.removeProperty("top");break;case sn.RollVertical:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","verticaldivider"),this.line.setAttribute("class","verticaldivider");const o=n;this.line.style.height="4px",this.line.style.removeProperty("left"),this.line.style.width=this.divWidth+"px",this.line.style.top=o+"px"}}setSwipeLayer(e){if(this.swipeLayer&&(Bn(this.postRenderKey),Bn(this.preRenderKey)),typeof e=="number"){const i=e;if(this.xmap){const n=this.xmap.map?.getLayers();this.swipeLayer=n?.getArray()[i]}}else{const i=e;this.swipeLayer=i}this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0)}preRenderHandler(e){const i=this.xmap.map?.getSize();if(i===void 0)return;const n=e.context;switch(n.save(),n.beginPath(),this.SwipeType){case sn.RollHorizonl:const r=this.swipeValueX,o=Rr(e,[r,0]),a=Rr(e,[i[0],0]),s=Rr(e,[r,i[1]]),l=Rr(e,i);n.moveTo(o[0],o[1]),n.lineTo(s[0],s[1]),n.lineTo(l[0],l[1]),n.lineTo(a[0],a[1]),n.closePath();break;case sn.RollVertical:const u=this.swipeValueY,c=Rr(e,[0,u]),h=Rr(e,[i[0],u]),d=Rr(e,[0,i[1]]),p=Rr(e,i);n.moveTo(c[0],c[1]),n.lineTo(d[0],d[1]),n.lineTo(p[0],p[1]),n.lineTo(h[0],h[1]),n.closePath();break;case sn.FishEye:const f=this.swipeValueX,g=this.swipeValueY;n.arc(f,g,this.circleRadius,0,2*Math.PI,!1),n.stroke()}n.clip()}postRenderHandler(e){e.context.restore()}changeSwipeType(e,i=50){this.SwipeType=e,e===sn.FishEye?(i>0&&(this.circleRadius=i),this.line.style.display="none"):(this.line.style.display="unset",this.line.style.removeProperty("display"))}changeSwipe(e,i){this.swipeValueX=e,this.swipeValueY=i,this.xmap&&this.xmap.map?.render()}load(){this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0),this.container&&(this.container.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.insertBefore(this.line,this.container.firstElementChild))}unload(){this.swipeLayer&&(Bn(this.postRenderKey),Bn(this.preRenderKey),this.IsLoaded=!1),this.container&&(this.container.removeEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.contains(this.line)&&this.container.removeChild(this.line))}}const O5=Object.prototype.toString;function Sv(t,e){return O5.call(t)===`[object ${e}]`}const z5=t=>t!=null&&t!==null&&Sv(t,"Object");function Yy(t){return Sv(t,"Number")}function Al(t){return Sv(t,"String")}function Vw(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)}function hr(){let t=[];const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var i=0;i<36;i++){const r=Math.floor(16*Math.random());t[i]=e.substring(r,r+1)}t[14]="4";const n=3&Number(t[19])|8;return t[19]=e.substring(n,n+1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function D5(){const t=window.document;var e=document.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.webkitExitFullscreen;if(e)e.call(document);else if(typeof window.ActiveXObject<"u"){var i=new window.ActiveXObject("WScript.Shell");i!==null&&i.SendKeys("{F11}")}}function Ky(t=window.document.documentElement){let e=t;var i=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(i)i.call(e);else if(typeof window.ActiveXObject<"u"){var n=new window.ActiveXObject("WScript.Shell");n!==null&&n.SendKeys("{F11}")}}function $w(){const t=new Event("resize");window.dispatchEvent(t)}function Ng(t={},e={}){let i;for(i in e)t[i]=z5(t[i])?Ng(t[i],e[i]):t[i]=e[i];return t}function j5(t,e,i){let n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n}class B5{xmap;map;mapEventBus;target;swipeLayerIndex=0;MapLayers=new Map;constructor(e,i){this.xmap=e;const n=e.map;n&&(this.map=n,this.mapEventBus=kh,this.initEventListener()),this.target=i}get SwipeLayerIndex(){return this.swipeLayerIndex}get Layers(){return this.MapLayers}changeSwipeLayerByID(e){if(this.MapLayers.has(e)){const i=this.MapLayers.keys(),n=Array.from(i).findIndex(r=>r===e);n>=0&&(this.swipeLayerIndex=n)}}changeSwipeLayerIndex(e){e<this.MapLayers.size&&e>=0&&(this.swipeLayerIndex=e)}initEventListener(){this.mapEventBus.eventOn(vi.LAYER_OPACITY_CHANGED,this.layerOpacityHandler.bind(this)),this.mapEventBus.eventOn(vi.LAYER_VISIBLE_CHANGED,this.layerVisibleHandler.bind(this)),this.mapEventBus.eventOn(vi.LAYER_LOCATE,this.layerLocateHandler.bind(this)),this.mapEventBus.eventOn(vi.LAYER_ORDER_CHANGED,this.layerOrderHandler.bind(this)),this.mapEventBus.eventOn(vi.LAYER_REMOVED,this.removeLayer.bind(this)),this.mapEventBus.eventOn(vi.LAYER_COPY,this.copyLayer.bind(this)),this.mapEventBus.eventOn(vi.LAYER_SWIPE_CHANGED,this.changeSwipeLayerID.bind(this))}removeLayer(e){if(e.mapID!=this.target)return;const{id:i}=e.data;if(this.MapLayers.has(i)){const n=this.MapLayers.get(i);n&&(this.map.removeLayer(n),this.MapLayers.delete(i))}}copyLayer(e){if(e.mapID!=this.target)return;const{id:i,newid:n,ids:r}=e.data;if(this.MapLayers.has(i)){const o=this.MapLayers.get(i);if(o){const a={...o};for(let s of this.MapLayers.values())this.map.removeLayer(s);a.set("lyrID",n),this.MapLayers.set(n,a),r.forEach(s=>{const l=this.MapLayers.get(s);this.map.addLayer(l)})}}}changeSwipeLayerID(e){if(e.mapID!=this.target)return;const{id:i,index:n}=e.data;this.MapLayers.has(i)&&(this.swipeLayerIndex=n)}layerVisibleHandler(e){if(e.mapID!=this.target)return;const{id:i,visible:n}=e.data;if(this.MapLayers.has(i)){const r=this.MapLayers.get(i);r&&r.setVisible(n)}}layerOpacityHandler(e){if(e.mapID!=this.target)return;const{id:i,opacity:n}=e.data;if(this.MapLayers.has(i)){const r=this.MapLayers.get(i);r&&r.setOpacity(n)}}layerOrderHandler(e){if(e.mapID===this.target){const{id:i,index:n,newindex:r}=e.data;this.xmap.changeLayerOrder(n,r)}}layerLocateHandler(e){const i=this.MapLayers.get(e);if(i){const n=i.getSource()?.getProjection(),r=i.get("bounds");if(r)this.xmap.zoomToExtent(r);else{const o=i.get("center");if(o){let a=i.get("level");const s=[o[0],o[1]];o.length===3&&(a=o[2]),this.xmap.zoomToCenter(s,a)}else this.xmap.zoomTo(i.getExtent(),n)}}}hasLayer(e){return this.MapLayers.has(e)}getLayer(e){if(this.MapLayers.has(e))return this.MapLayers.get(e)}changeLayerOpacity(e,i=1){const n=this.getLayer(e);n&&n.setOpacity(i)}changeLayerVisible(e,i=!0){const n=this.getLayer(e);n&&n.setVisible(i)}deleteLayerByID(e){const i=this.getLayer(e);return!!i&&(this.map.removeLayer(i),this.MapLayers.delete(e),!0)}deleteLayerByIndex(e){const i=this.map.getLayers()[e];if(i){let n;for(let r of this.MapLayers)if(r[1]===i){n=r[0];break}n&&this.MapLayers.delete(n),this.map.removeLayer(i)}}deleteLayer(e){if(e){let i;for(let n of this.MapLayers)if(n[1]===e){i=n[0];break}i&&this.MapLayers.delete(i),this.map.removeLayer(e)}}clearLayers(){this.MapLayers.forEach((e,i)=>{this.map.removeLayer(e)}),this.MapLayers.clear()}newEvtArgs(e,i=null){const n=new Cw(this.target,"map");return n.data=e,n.target=i,n}registerLayer(e,i){this.MapLayers.set(i.id,e),i&&this.mapEventBus?.eventEmit(vi.LAYER_ADDED,this.newEvtArgs(i))}}var Zy=6378137,Qy=.0066943799901413165,Ol=484813681109536e-20,be=Math.PI/2,Ae=1e-10,mi=.017453292519943295,Ur=57.29577951308232,Ct=Math.PI/4,ou=2*Math.PI,Jt=3.14159265359,N5={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},V5={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},Jy=/[\s_\-\/\(\)]/g;function Xr(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),r=e.toLowerCase().replace(Jy,""),o=-1;++o<n.length;)if((i=n[o]).toLowerCase().replace(Jy,"")===r)return t[i]}function Vg(t){var e,i,n,r={},o=t.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,l){var u=l.split("=");return u.push(!0),s[u[0].toLowerCase()]=u[1],s},{}),a={proj:"projName",datum:"datumCode",rf:function(s){r.rf=parseFloat(s)},lat_0:function(s){r.lat0=s*mi},lat_1:function(s){r.lat1=s*mi},lat_2:function(s){r.lat2=s*mi},lat_ts:function(s){r.lat_ts=s*mi},lon_0:function(s){r.long0=s*mi},lon_1:function(s){r.long1=s*mi},lon_2:function(s){r.long2=s*mi},alpha:function(s){r.alpha=parseFloat(s)*mi},gamma:function(s){r.rectified_grid_angle=parseFloat(s)},lonc:function(s){r.longc=s*mi},x_0:function(s){r.x0=parseFloat(s)},y_0:function(s){r.y0=parseFloat(s)},k_0:function(s){r.k0=parseFloat(s)},k:function(s){r.k0=parseFloat(s)},a:function(s){r.a=parseFloat(s)},b:function(s){r.b=parseFloat(s)},r:function(s){r.a=r.b=parseFloat(s)},r_a:function(){r.R_A=!0},zone:function(s){r.zone=parseInt(s,10)},south:function(){r.utmSouth=!0},towgs84:function(s){r.datum_params=s.split(",").map(function(l){return parseFloat(l)})},to_meter:function(s){r.to_meter=parseFloat(s)},units:function(s){r.units=s;var l=Xr(V5,s);l&&(r.to_meter=l.to_meter)},from_greenwich:function(s){r.from_greenwich=s*mi},pm:function(s){var l=Xr(N5,s);r.from_greenwich=(l||parseFloat(s))*mi},nadgrids:function(s){s==="@null"?r.datumCode="none":r.nadgrids=s},axis:function(s){var l="ewnsud";s.length===3&&l.indexOf(s.substr(0,1))!==-1&&l.indexOf(s.substr(1,1))!==-1&&l.indexOf(s.substr(2,1))!==-1&&(r.axis=s)},approx:function(){r.approx=!0}};for(e in o)i=o[e],e in a?typeof(n=a[e])=="function"?n(i):r[n]=i:r[e]=i;return typeof r.datumCode=="string"&&r.datumCode!=="WGS84"&&(r.datumCode=r.datumCode.toLowerCase()),r}var $5=/\s/,G5=/[A-Za-z]/,H5=/[A-Za-z84_]/,cc=/[,\]]/,e1=/[\d\.E\-\+]/;function or(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function vp(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce(function(o,a){return Za(a,o),o},n);e&&(t[e]=r)}function Za(t,e){if(Array.isArray(t)){var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1)return Array.isArray(t[0])?(e[i]={},void Za(t[0],e[i])):void(e[i]=t[0]);if(t.length)if(i!=="TOWGS84"){if(i==="AXIS")return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(t.length===3&&Za(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(t.length===4&&Za(t[3],e[i]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void vp(e,i,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],vp(e,i,t),void(e[i].type=i);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return Za(t,e[i]);return vp(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}or.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==4)for(;$5.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},or.prototype.afterquote=function(t){if(t==='"')return this.word+='"',void(this.state=4);if(cc.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)},or.prototype.afterItem=function(t){return t===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):t==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},or.prototype.number=function(t){if(!e1.test(t)){if(cc.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)}this.word+=t},or.prototype.quoted=function(t){t!=='"'?this.word+=t:this.state=5},or.prototype.keyword=function(t){if(H5.test(t))this.word+=t;else{if(t==="["){var e=[];return e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!cc.test(t))throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},or.prototype.neutral=function(t){if(G5.test(t))return this.word=t,void(this.state=2);if(t==='"')return this.word="",void(this.state=4);if(e1.test(t))return this.word=t,void(this.state=3);if(!cc.test(t))throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place);this.afterItem(t)},or.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===-1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var W5=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function On(t){return .017453292519943295*t}function Gw(t){for(var e=Object.keys(t),i=0,n=e.length;i<n;++i){var r=e[i];W5.indexOf(r)!==-1&&U5(t[r]),typeof t[r]=="object"&&Gw(t[r])}}function U5(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var i="",n=0,r=t.AXIS.length;n<r;++n){var o=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?i+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?i+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?i+="e":o[0].indexOf("west")===-1&&(o[0]!=="x"&&o[0]!=="lon"||o[1]!=="west")||(i+="w")}i.length===2&&(i+="u"),i.length===3&&(t.axis=i)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function s(l){return l*(t.to_meter||1)}t.type==="GEOGCS"&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),t.datumCode!=="wgs_1984"&&t.datumCode!=="world_geodetic_system_1984"||(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",On],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",On],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",On],["lat0","latitude_of_origin",On],["lat0","standard_parallel_1",On],["lat1","standard_parallel_1",On],["lat2","standard_parallel_2",On],["azimuth","Azimuth"],["alpha","azimuth",On],["srsCode","name"]].forEach(function(l){return function(u,c){var h=c[0],d=c[1];!(h in u)&&d in u&&(u[h]=u[d],c.length===3&&(u[h]=c[2](u[h])))}(t,l)}),t.long0||!t.longc||t.projName!=="Albers_Conic_Equal_Area"&&t.projName!=="Lambert_Azimuthal_Equal_Area"||(t.long0=t.longc),t.lat_ts||!t.lat1||t.projName!=="Stereographic_South_Pole"&&t.projName!=="Polar Stereographic (variant B)"?!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=On(t.lat0>0?90:-90)):(t.lat0=On(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function Hw(t){var e=new or(t).output(),i=e[0],n={};return Za(e,n),Gw(n),n[i]}function Ti(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Ti[t]=Vg(arguments[1]):Ti[t]=Hw(arguments[1]):Ti[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(n){Array.isArray(n)?Ti.apply(e,n):Ti(n)});if(typeof t=="string"){if(t in Ti)return Ti[t]}else"EPSG"in t?Ti["EPSG:"+t.EPSG]=t:"ESRI"in t?Ti["ESRI:"+t.ESRI]=t:"IAU2000"in t&&(Ti["IAU2000:"+t.IAU2000]=t);return}}(function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=0;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]})(Ti);var X5=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Y5=["3857","900913","3785","102113"];function K5(t){if(!function(n){return typeof n=="string"}(t))return t;if(function(n){return n in Ti}(t))return Ti[t];if(function(n){return X5.some(function(r){return n.indexOf(r)>-1})}(t)){var e=Hw(t);if(function(n){var r=Xr(n,"authority");if(r){var o=Xr(r,"epsg");return o&&Y5.indexOf(o)>-1}}(e))return Ti["EPSG:3857"];var i=function(n){var r=Xr(n,"extension");if(r)return Xr(r,"proj4")}(e);return i?Vg(i):e}return function(n){return n[0]==="+"}(t)?Vg(t):void 0}function t1(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)(i=e[n])!==void 0&&(t[n]=i);return t}function Qn(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function qu(t){return t<0?-1:1}function Oe(t){return Math.abs(t)<=Jt?t:t-qu(t)*ou}function Tn(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(be-e))/n}function au(t,e){for(var i,n,r=.5*t,o=be-2*Math.atan(e),a=0;a<=15;a++)if(i=t*Math.sin(o),o+=n=be-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-o,Math.abs(n)<=1e-10)return o;return-9999}var Z5={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Qn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,r=t.y;if(r*Ur>90&&r*Ur<-90&&n*Ur>180&&n*Ur<-180||Math.abs(Math.abs(r)-be)<=Ae)return null;if(this.sphere)e=this.x0+this.a*this.k0*Oe(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(Ct+.5*r));else{var o=Math.sin(r),a=Tn(this.e,r,o);e=this.x0+this.a*this.k0*Oe(n-this.long0),i=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=be-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if((i=au(this.e,o))===-9999)return null}return e=Oe(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function i1(t){return t}var Q5=[Z5,{init:function(){},forward:i1,inverse:i1,names:["longlat","identity"]}],Xc={},Ph=[];function n1(t,e){var i=Ph.length;return t.names?(Ph[i]=t,t.names.forEach(function(n){Xc[n.toLowerCase()]=i}),this):!0}var J5={start:function(){Q5.forEach(n1)},add:n1,get:function(t){if(!t)return!1;var e=t.toLowerCase();return Xc[e]!==void 0&&Ph[Xc[e]]?Ph[Xc[e]]:void 0}},Cv={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},eT=Cv.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Cv.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Yc={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},militargeographische_institut:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var tT in Yc){var r1=Yc[tT];Yc[r1.datumName]=r1}var Ww={};function iT(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Ww[t]||null,isNull:!1}}function Qa(t){return t/3600*Math.PI/180}function $g(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function nT(t){return t.map(function(e){return[Qa(e.longitudeShift),Qa(e.latitudeShift)]})}function rT(t,e,i){return{name:$g(t,e+8,e+16).trim(),parent:$g(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function oT(t,e,i,n){for(var r=e+176,o=[],a=0;a<i.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(r+16*a,n),longitudeShift:t.getFloat32(r+16*a+4,n),latitudeAccuracy:t.getFloat32(r+16*a+8,n),longitudeAccuracy:t.getFloat32(r+16*a+12,n)};o.push(s)}return o}function Un(t,e){if(!(this instanceof Un))return new Un(t);e=e||function(u){if(u)throw u};var i=K5(t);if(typeof i=="object"){var n=Un.projections.get(i.projName);if(n){if(i.datumCode&&i.datumCode!=="none"){var r=Xr(Yc,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var o=function(u,c,h,d,p){if(!u){var f=Xr(Cv,d);f||(f=eT),u=f.a,c=f.b,h=f.rf}return h&&!c&&(c=(1-1/h)*u),(h===0||Math.abs(u-c)<Ae)&&(p=!0,c=u),{a:u,b:c,rf:h,sphere:p}}(i.a,i.b,i.rf,i.ellps,i.sphere),a=function(u,c,h,d){var p=u*u,f=c*c,g=(p-f)/p,y=0;return d?(p=(u*=1-g*(.16666666666666666+g*(.04722222222222222+.022156084656084655*g)))*u,g=0):y=Math.sqrt(g),{es:g,e:y,ep2:(p-f)/f}}(o.a,o.b,o.rf,i.R_A),s=function(u){return u===void 0?null:u.split(",").map(iT)}(i.nadgrids),l=i.datum||function(u,c,h,d,p,f,g){var y={};return y.datum_type=u===void 0||u==="none"?5:4,c&&(y.datum_params=c.map(parseFloat),y.datum_params[0]===0&&y.datum_params[1]===0&&y.datum_params[2]===0||(y.datum_type=1),y.datum_params.length>3&&(y.datum_params[3]===0&&y.datum_params[4]===0&&y.datum_params[5]===0&&y.datum_params[6]===0||(y.datum_type=2,y.datum_params[3]*=Ol,y.datum_params[4]*=Ol,y.datum_params[5]*=Ol,y.datum_params[6]=y.datum_params[6]/1e6+1))),g&&(y.datum_type=3,y.grids=g),y.a=h,y.b=d,y.es=p,y.ep2=f,y}(i.datumCode,i.datum_params,o.a,o.b,a.es,a.ep2,s);t1(this,i),t1(this,n),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}function Uw(t,e,i){var n,r,o,a,s=t.x,l=t.y,u=t.z?t.z:0;if(l<-be&&l>-1.001*be)l=-be;else if(l>be&&l<1.001*be)l=be;else{if(l<-be)return{x:-1/0,y:-1/0,z:t.z};if(l>be)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),r=Math.sin(l),a=Math.cos(l),o=r*r,{x:((n=i/Math.sqrt(1-e*o))+u)*a*Math.cos(s),y:(n+u)*a*Math.sin(s),z:(n*(1-e)+u)*r}}function Xw(t,e,i,n){var r,o,a,s,l,u,c,h,d,p,f,g,y,_,b,m=1e-12,v=t.x,S=t.y,C=t.z?t.z:0;if(r=Math.sqrt(v*v+S*S),o=Math.sqrt(v*v+S*S+C*C),r/i<m){if(_=0,o/i<m)return b=-n,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(S,v);a=C/o,h=(s=r/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),d=a*l,y=0;do y++,u=e*(c=i/Math.sqrt(1-e*d*d))/(c+(b=r*h+C*d-c*(1-e*d*d))),g=(f=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*h-(p=s*(1-u)*l)*d,h=p,d=f;while(g*g>1e-24&&y<30);return{x:_,y:Math.atan(f/Math.abs(p)),z:b}}function hc(t){return t===1||t===2}function aT(t,e,i){if(function(l,u){return l.datum_type===u.datum_type&&!(l.a!==u.a||Math.abs(l.es-u.es)>5e-11)&&(l.datum_type===1?l.datum_params[0]===u.datum_params[0]&&l.datum_params[1]===u.datum_params[1]&&l.datum_params[2]===u.datum_params[2]:l.datum_type!==2||l.datum_params[0]===u.datum_params[0]&&l.datum_params[1]===u.datum_params[1]&&l.datum_params[2]===u.datum_params[2]&&l.datum_params[3]===u.datum_params[3]&&l.datum_params[4]===u.datum_params[4]&&l.datum_params[5]===u.datum_params[5]&&l.datum_params[6]===u.datum_params[6])}(t,e)||t.datum_type===5||e.datum_type===5)return i;var n=t.a,r=t.es;if(t.datum_type===3){if(o1(t,!1,i)!==0)return;n=Zy,r=Qy}var o=e.a,a=e.b,s=e.es;if(e.datum_type===3&&(o=Zy,a=6356752314e-3,s=Qy),r===s&&n===o&&!hc(t.datum_type)&&!hc(e.datum_type)||(i=Uw(i,r,n),hc(t.datum_type)&&(i=function(l,u,c){if(u===1)return{x:l.x+c[0],y:l.y+c[1],z:l.z+c[2]};if(u===2){var h=c[0],d=c[1],p=c[2],f=c[3],g=c[4],y=c[5],_=c[6];return{x:_*(l.x-y*l.y+g*l.z)+h,y:_*(y*l.x+l.y-f*l.z)+d,z:_*(-g*l.x+f*l.y+l.z)+p}}}(i,t.datum_type,t.datum_params)),hc(e.datum_type)&&(i=function(l,u,c){if(u===1)return{x:l.x-c[0],y:l.y-c[1],z:l.z-c[2]};if(u===2){var h=c[0],d=c[1],p=c[2],f=c[3],g=c[4],y=c[5],_=c[6],b=(l.x-h)/_,m=(l.y-d)/_,v=(l.z-p)/_;return{x:b+y*m-g*v,y:-y*b+m+f*v,z:g*b-f*m+v}}}(i,e.datum_type,e.datum_params)),i=Xw(i,s,o,a),!(e.datum_type===3&&o1(e,!0,i)!==0)))return i}function o1(t,e,i){if(t.grids===null||t.grids.length===0)return-1;var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},o=[];e:for(var a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){r=n;break}if(s.mandatory,s.grid!==null)for(var l=s.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,p=h.ll[0]-d,f=h.ll[1]-d,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,y=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(f>n.y||p>n.x||y<n.y||g<n.x)&&(r=sT(n,e,h),!isNaN(r.x)))break e}else if(s.mandatory)return-1}return isNaN(r.x)?-1:(i.x=-r.x,i.y=r.y,0)}function sT(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=Oe(r.x-Math.PI)+Math.PI;var o=a1(r,i);if(e){if(isNaN(o.x))return n;o.x=r.x-o.x,o.y=r.y-o.y;var a,s,l=9;do{if(s=a1(o,i),isNaN(s.x))break;a={x:r.x-(s.x+o.x),y:r.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return n;n.x=Oe(o.x+i.ll[0]),n.y=o.y+i.ll[1]}else isNaN(o.x)||(n.x=t.x+o.x,n.y=t.y+o.y);return n}function a1(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(n.x),o=Math.floor(n.y),a=n.x-1*r,s=n.y-1*o,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0]||o<0||o>=e.lim[1])return l;i=o*e.lim[0]+r;var u=e.cvs[i][0],c=e.cvs[i][1];i++;var h=e.cvs[i][0],d=e.cvs[i][1];i+=e.lim[0];var p=e.cvs[i][0],f=e.cvs[i][1];i--;var g=e.cvs[i][0],y=e.cvs[i][1],_=a*s,b=a*(1-s),m=(1-a)*(1-s),v=(1-a)*s;return l.x=m*u+b*h+v*g+_*p,l.y=m*c+b*d+v*y+_*f,l}function s1(t,e,i){var n,r,o,a=i.x,s=i.y,l=i.z||0,u={};for(o=0;o<3;o++)if(!e||o!==2||i.z!==void 0)switch(o===0?(n=a,r="ew".indexOf(t.axis[o])!==-1?"x":"y"):o===1?(n=s,r="ns".indexOf(t.axis[o])!==-1?"y":"x"):(n=l,r="z"),t.axis[o]){case"e":case"n":u[r]=n;break;case"w":case"s":u[r]=-n;break;case"u":i[r]!==void 0&&(u.z=n);break;case"d":i[r]!==void 0&&(u.z=-n);break;default:return null}return u}function Yw(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function l1(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function qh(t,e,i,n){var r,o=(i=Array.isArray(i)?Yw(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z!==void 0;if(function(a){l1(a.x),l1(a.y)}(i),t.datum&&e.datum&&function(a,s){return(a.datum.datum_type===1||a.datum.datum_type===2||a.datum.datum_type===3)&&s.datumCode!=="WGS84"||(s.datum.datum_type===1||s.datum.datum_type===2||s.datum.datum_type===3)&&a.datumCode!=="WGS84"}(t,e)&&(i=qh(t,r=new Un("WGS84"),i,n),t=r),n&&t.axis!=="enu"&&(i=s1(t,!1,i)),t.projName==="longlat")i={x:i.x*mi,y:i.y*mi,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=aT(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*Ur,y:i.y*Ur,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&e.axis!=="enu"?s1(e,!0,i):(i&&!o&&delete i.z,i)}Un.projections=J5,Un.projections.start();var u1=Un("WGS84");function yp(t,e,i,n){var r,o,a;return Array.isArray(i)?(r=qh(t,e,i,n)||{x:NaN,y:NaN},i.length>2?t.name!==void 0&&t.name==="geocent"||e.name!==void 0&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(i.slice(3)):[r.x,r.y,i[2]].concat(i.slice(3)):[r.x,r.y].concat(i.slice(2)):[r.x,r.y]):(o=qh(t,e,i,n),(a=Object.keys(i)).length===2||a.forEach(function(s){if(t.name!==void 0&&t.name==="geocent"||e.name!==void 0&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;o[s]=i[s]}),o)}function c1(t){return t instanceof Un?t:t.oProj?t.oProj:Un(t)}function Ri(t,e,i){t=c1(t);var n,r=!1;return e===void 0?(e=t,t=u1,r=!0):(e.x!==void 0||Array.isArray(e))&&(i=e,e=t,t=u1,r=!0),e=c1(e),i?yp(t,e,i):(n={forward:function(o,a){return yp(t,e,o,a)},inverse:function(o,a){return yp(e,t,o,a)}},r&&(n.oProj=e),n)}var Kw="AJSAJS",Zw="AFAFAF",Ja=65,Fi=73,on=79,Cl=86,Ml=90,lT={forward:Qw,inverse:function(t){var e=Mv(t2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:Jw};function Qw(t,e){return e=e||5,function(i,n){var r="00000"+i.easting,o="00000"+i.northing;return i.zoneNumber+i.zoneLetter+(g=i.easting,y=i.northing,_=i.zoneNumber,b=e2(_),m=Math.floor(g/1e5),v=Math.floor(y/1e5)%20,a=m,s=v,l=b,u=l-1,c=Kw.charCodeAt(u),h=Zw.charCodeAt(u),d=c+a-1,p=h+s,f=!1,d>Ml&&(d=d-Ml+Ja-1,f=!0),(d===Fi||c<Fi&&d>Fi||(d>Fi||c<Fi)&&f)&&d++,(d===on||c<on&&d>on||(d>on||c<on)&&f)&&++d===Fi&&d++,d>Ml&&(d=d-Ml+Ja-1),p>Cl?(p=p-Cl+Ja-1,f=!0):f=!1,(p===Fi||h<Fi&&p>Fi||(p>Fi||h<Fi)&&f)&&p++,(p===on||h<on&&p>on||(p>on||h<on)&&f)&&++p===Fi&&p++,p>Cl&&(p=p-Cl+Ja-1),String.fromCharCode(d)+String.fromCharCode(p))+r.substr(r.length-5,n)+o.substr(o.length-5,n);var a,s,l,u,c,h,d,p,f,g,y,_,b,m,v}(function(i){var n,r,o,a,s,l,u,c,h=i.lat,d=i.lon,p=6378137,f=.00669438,g=.9996,y=_p(h),_=_p(d);c=Math.floor((d+180)/6)+1,d===180&&(c=60),h>=56&&h<64&&d>=3&&d<12&&(c=32),h>=72&&h<84&&(d>=0&&d<9?c=31:d>=9&&d<21?c=33:d>=21&&d<33?c=35:d>=33&&d<42&&(c=37)),u=_p(6*(c-1)-180+3),n=f/(1-f),r=p/Math.sqrt(1-f*Math.sin(y)*Math.sin(y)),o=Math.tan(y)*Math.tan(y),a=n*Math.cos(y)*Math.cos(y),s=Math.cos(y)*(_-u),l=p*((1-f/4-3*f*f/64-5*f*f*f/256)*y-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*y)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*y)-35*f*f*f/3072*Math.sin(6*y));var b=g*r*(s+(1-o+a)*s*s*s/6+(5-18*o+o*o+72*a-58*n)*s*s*s*s*s/120)+5e5,m=g*(l+r*Math.tan(y)*(s*s/2+(5-o+9*a+4*a*a)*s*s*s*s/24+(61-58*o+o*o+600*a-330*n)*s*s*s*s*s*s/720));return h<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(b),zoneNumber:c,zoneLetter:uT(h)}}({lat:t[1],lon:t[0]}),e)}function Jw(t){var e=Mv(t2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function _p(t){return t*(Math.PI/180)}function h1(t){return t/Math.PI*180}function Mv(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,a,s,l,u,c,h,d,p,f=.9996,g=6378137,y=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),b=i-5e5,m=e;n<"N"&&(m-=1e7),h=6*(r-1)-180+3,o=.006739496752268451,p=(d=m/f/6367449145945056e-9)+(3*_/2-27*_*_*_/32)*Math.sin(2*d)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*d)+151*_*_*_/96*Math.sin(6*d),a=g/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),u=.99330562*g/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),c=b/(a*f);var v=p-a*Math.tan(p)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);v=h1(v);var S,C=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(C=h+h1(C),t.accuracy){var k=Mv({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});S={top:k.lat,right:k.lon,bottom:v,left:C}}else S={lat:v,lon:C};return S}function uT(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function e2(t){var e=t%6;return e===0&&(e=6),e}function t2(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var a=parseInt(r,10);if(o===0||o+3>i)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var l=e2(a),u=function(b,m){for(var v=Kw.charCodeAt(m-1),S=1e5,C=!1;v!==b.charCodeAt(0);){if(++v===Fi&&v++,v===on&&v++,v>Ml){if(C)throw"Bad character: "+b;v=Ja,C=!0}S+=1e5}return S}(n.charAt(0),l),c=function(b,m){if(b>"V")throw"MGRSPoint given invalid Northing "+b;for(var v=Zw.charCodeAt(m-1),S=0,C=!1;v!==b.charCodeAt(0);){if(++v===Fi&&v++,v===on&&v++,v>Cl){if(C)throw"Bad character: "+b;v=Ja,C=!0}S+=1e5}return S}(n.charAt(1),l);c<cT(s);)c+=2e6;var h=i-o;if(h%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var d,p,f,g=h/2,y=0,_=0;return g>0&&(d=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*d,f=t.substring(o+g),_=parseFloat(f)*d),{easting:y+u,northing:_+c,zoneLetter:s,zoneNumber:a,accuracy:d}}function cT(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function rs(t,e,i){if(!(this instanceof rs))return new rs(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&e===void 0){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0}rs.fromMGRS=function(t){return new rs(Jw(t))},rs.prototype.toMGRS=function(t){return Qw([this.x,this.y],t)};var d1=.046875,p1=.01953125,f1=.01068115234375;function kv(t){var e=[];e[0]=1-t*(.25+t*(d1+t*(p1+t*f1))),e[1]=t*(.75-t*(d1+t*(p1+t*f1)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function Es(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function Tv(t,e,i){for(var n=1/(1-e),r=t,o=20;o;--o){var a=Math.sin(r),s=1-e*a*a;if(r-=s=(Es(r,a,Math.cos(r),i)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<Ae)return r}return r}var Kc={init:function(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=kv(this.es),this.ml0=Es(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,r=t.x,o=t.y,a=Oe(r-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),p=Math.abs(l)>Ae?Math.tan(o):0,f=Math.pow(p,2),g=Math.pow(f,2);e=1-this.es*Math.pow(s,2),u/=Math.sqrt(e);var y=Es(o,s,l,this.en);i=this.a*(this.k0*u*(1+c/6*(1-f+h+c/20*(5-18*f+g+14*h-58*f*h+c/42*(61+179*g-g*f-479*f)))))+this.x0,n=this.a*(this.k0*(y-this.ml0+s*a*u/2*(1+c/12*(5-f+9*h+4*d+c/30*(61+g-58*f+270*h-330*f*h+c/56*(1385+543*g-g*f-3111*f))))))+this.y0}else{var _=l*Math.sin(a);if(Math.abs(Math.abs(_)-1)<Ae)return 93;if(i=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,n=l*Math.cos(a)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(n))>=1){if(_-1>Ae)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,r,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(i=Tv(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(i)<be){var s=Math.sin(i),l=Math.cos(i),u=Math.abs(l)>Ae?Math.tan(i):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),d=Math.pow(u,2),p=Math.pow(d,2);e=1-this.es*Math.pow(s,2);var f=o*Math.sqrt(e)/this.k0,g=Math.pow(f,2);n=i-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*h-g/30*(61+90*d-252*c*d+45*p+46*c-g/56*(1385+3633*d+4095*p+1574*p*d)))),r=Oe(this.long0+f*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*p+8*c*d+6*c-g/42*(61+662*d+1320*p+720*p*d))))/l)}else n=be*qu(a),r=0;else{var y=Math.exp(o/this.k0),_=.5*(y-1/y),b=this.lat0+a/this.k0,m=Math.cos(b);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(_,2))),n=Math.asin(e),a<0&&(n=-n),r=_===0&&m===0?0:Oe(Math.atan2(_,m)+this.long0)}return t.x=r,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function i2(t){var e=Math.exp(t);return e=(e-1/e)/2}function Di(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function hT(t){var e=Math.abs(t);return e=function(i){var n=1+i,r=n-1;return r===0?i:i*Math.log(n)/r}(e*(1+e/(Di(1,e)+1))),t<0?-e:e}function bp(t,e){for(var i,n=2*Math.cos(2*e),r=t.length-1,o=t[r],a=0;--r>=0;)i=n*o-a+t[r],a=o,o=i;return e+i*Math.sin(2*e)}function g1(t,e,i){for(var n,r,o=Math.sin(e),a=Math.cos(e),s=i2(i),l=function(y){var _=Math.exp(y);return(_+1/_)/2}(i),u=2*a*l,c=-2*o*s,h=t.length-1,d=t[h],p=0,f=0,g=0;--h>=0;)n=f,r=p,d=u*(f=d)-n-c*(p=g)+t[h],g=c*f-r+u*p;return[(u=o*l)*d-(c=a*s)*g,u*g+c*d]}var Zc={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Kc.init.apply(this),this.forward=Kc.forward,this.inverse=Kc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=bp(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(r,o){for(var a,s=2*Math.cos(o),l=r.length-1,u=r[l],c=0;--l>=0;)a=s*u-c+r[l],c=u,u=a;return Math.sin(o)*a}(this.gtu,2*n))},forward:function(t){var e=Oe(t.x-this.long0),i=t.y;i=bp(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),o=Math.sin(e),a=Math.cos(e);i=Math.atan2(n,a*r),e=Math.atan2(o*r,Di(n,r*a)),e=hT(Math.tan(e));var s,l,u=g1(this.gtu,2*i,2*e);return i+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=g1(this.utg,2*r,2*n);r+=o[0],n+=o[1],n=Math.atan(i2(n));var a=Math.sin(r),s=Math.cos(r),l=Math.sin(n),u=Math.cos(n);r=Math.atan2(a*u,Di(l,u*s)),e=Oe((n=Math.atan2(l,u*s))+this.long0),i=bp(this.cgb,r)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},dT={init:function(){var t=function(e,i){if(e===void 0){if((e=Math.floor(30*(Oe(i)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*mi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Zc.init.apply(this),this.forward=Zc.forward,this.inverse=Zc.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function xp(t,e){return Math.pow((1-t)/(1+t),e)}var wp={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ct)/(Math.pow(Math.tan(.5*this.lat0+Ct),this.C)*xp(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Ct),this.C)*xp(this.e*Math.sin(i),this.ratexp))-be,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+Ct)/this.K,1/this.C),r=20;r>0&&(i=2*Math.atan(n*xp(this.e*Math.sin(t.y),-.5*this.e))-be,!(Math.abs(i-t.y)<1e-14));--r)t.y=i;return r?(t.x=e,t.y=i,t):null},names:["gauss"]},pT={init:function(){wp.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,r;return t.x=Oe(t.x-this.long0),wp.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Di(t.x,t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),i=Math.cos(a),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,wp.inverse.apply(this,[t]),t.x=Oe(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},fT={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ae&&(this.k0=.5*(1+qu(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ae&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ae&&Math.abs(Math.cos(this.lat_ts))>Ae&&(this.k0=.5*this.cons*Qn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Tn(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Qn(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-be,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,r,o,a,s=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=Oe(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Ae&&Math.abs(l+this.lat0)<=Ae?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(i=2*Math.atan(this.ssfn_(l,u,this.e))-be,r=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=Ae?(o=Tn(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<Ae?(e=2*this.a*this.k0/(1+r*Math.cos(h)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*r*Math.cos(h))),t.y=e*(this.cosX0*n-this.sinX0*r*Math.cos(h))+this.y0),t.x=e*r*Math.sin(h)+this.x0,t))},inverse:function(t){var e,i,n,r,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,i=this.lat0,a<=Ae?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<Ae?this.lat0>0?Oe(this.long0+Math.atan2(t.x,-1*t.y)):Oe(this.long0+Math.atan2(t.x,t.y)):Oe(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=Ae){if(a<=Ae)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),i=this.con*au(this.e,n),e=this.con*Oe(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Ae?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/a),e=Oe(this.long0+Math.atan2(t.x*Math.sin(r),a*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*au(this.e,Math.tan(.5*(be+o)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(be+t))*Math.pow((1-e)/(1+e),.5*i)}},gT={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),o=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},names:["somerc"]},Ea=1e-7,mT={init:function(){var t,e,i,n,r,o,a,s,l,u,c,h=0,d=0,p=0,f=0,g=0,y=0,_=0;this.no_off=function(S){var C=typeof S.PROJECTION=="object"?Object.keys(S.PROJECTION)[0]:S.PROJECTION;return"no_uoff"in S||"no_off"in S||["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(C)!==-1}(this),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var m=!1;if("rectified_grid_angle"in this&&(m=!0),b&&(_=this.alpha),m&&(h=this.rectified_grid_angle*mi),b||m)d=this.longc;else if(p=this.long1,g=this.lat1,f=this.long2,y=this.lat2,Math.abs(g-y)<=Ea||(t=Math.abs(g))<=Ea||Math.abs(t-be)<=Ea||Math.abs(Math.abs(this.lat0)-be)<=Ea||Math.abs(Math.abs(y)-be)<=Ea)throw new Error;var v=1-this.es;e=Math.sqrt(v),Math.abs(this.lat0)>Ae?(s=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*s*s,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/v),this.A=this.B*this.k0*e/t,(r=(n=this.B*e/(i*Math.sqrt(t)))*n-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(Tn(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),b||m?(b?(c=Math.asin(Math.sin(_)/n),m||(h=_)):(c=h,_=Math.asin(n*Math.sin(c))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(c))/this.B):(o=Math.pow(Tn(this.e,g,Math.sin(g)),this.B),a=Math.pow(Tn(this.e,y,Math.sin(y)),this.B),r=this.E/o,l=(a-o)/(a+o),u=((u=this.E*this.E)-a*o)/(u+a*o),(t=p-f)<-Math.pi?f-=ou:t>Math.pi&&(f+=ou),this.lam0=Oe(.5*(p+f)-Math.atan(u*Math.tan(.5*this.B*(p-f))/l)/this.B),c=Math.atan(2*Math.sin(this.B*Oe(p-this.lam0))/(r-1/r)),h=_=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Ct-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ct+r))},forward:function(t){var e,i,n,r,o,a,s,l,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-be)>Ae){if(e=.5*((o=this.E/Math.pow(Tn(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),i=.5*(o+a),r=Math.sin(this.B*t.x),n=(e*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(n)-1)<Ae)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<Ea?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,a)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(u.x=s,u.y=l):(s-=this.u_0,u.x=l*this.cosrot+s*this.sinrot,u.y=s*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,i,n,r,o,a,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((n=Math.exp(-this.BrA*i))-1/n),o=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(s)-1)<Ae)l.x=0,l.y=s<0?-be:be;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=au(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},vT={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ae)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Qn(this.e,e,i),r=Tn(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=Qn(this.e,o,a),l=Tn(this.e,this.lat2,o),u=Tn(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ae?this.ns=Math.log(n/s)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=Ae&&(i=qu(i)*(be-2e-10));var n,r,o=Math.abs(Math.abs(i)-be);if(o>Ae)n=Tn(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(n,this.ns);else{if((o=i*this.ns)<=0)return null;r=0}var a=this.ns*Oe(e-this.long0);return t.x=this.k0*(r*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(a))+this.y0,t},inverse:function(t){var e,i,n,r,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),i=1):(e=-Math.sqrt(a*a+s*s),i=-1);var l=0;if(e!==0&&(l=Math.atan2(i*a,i*s)),e!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),(r=au(this.e,n))===-9999)return null}else r=-be;return o=Oe(l/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},yT={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,r,o,a,s,l=t.x,u=t.y,c=Oe(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),o=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,r,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,a=e,s=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1;while(s===0&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function Ii(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function su(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function lu(t){return .375*t*(1+.25*t*(1+.46875*t))}function uu(t){return .05859375*t*t*(1+.75*t)}function cu(t){return t*t*t*(35/3072)}function os(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function ao(t){return Math.abs(t)<be?t:t-qu(t)*Math.PI}function Rh(t,e,i,n,r){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-i*Math.sin(2*o)+n*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*i*Math.cos(2*o)+4*n*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}var _T={init:function(){this.sphere||(this.e0=su(this.es),this.e1=lu(this.es),this.e2=uu(this.es),this.e3=cu(this.es),this.ml0=this.a*Ii(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,r=t.y;if(n=Oe(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var o=Math.sin(r),a=Math.cos(r),s=os(this.a,this.e,o),l=Math.tan(r)*Math.tan(r),u=n*Math.cos(r),c=u*u,h=this.es*a*a/(1-this.es);e=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),i=this.a*Ii(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=Rh(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-be)<=Ae)return t.x=this.long0,t.y=be,r<0&&(t.y*=-1),t;var s=os(this.a,this.e,Math.sin(a)),l=s*s*s/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),c=n*this.a/s,h=c*c;e=a-s*Math.tan(a)/l*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-h*(u/3+(1+3*u)*u*h/15))/Math.cos(a)}return t.x=Oe(i+this.long0),t.y=ao(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Yr(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}var bT=.3333333333333333,xT=.17222222222222222,wT=.10257936507936508,ST=.06388888888888888,CT=.0664021164021164,MT=.016415012942191543,kT={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-be)<Ae?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Ae?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Yr(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(i){var n,r=[];return r[0]=i*bT,n=i*i,r[0]+=n*xT,r[1]=n*ST,n*=i,r[0]+=n*wT,r[1]+=n*CT,r[2]=n*MT,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Yr(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,r,o,a,s,l,u,c,h=t.x,d=t.y;if(h=Oe(h-this.long0),this.sphere){if(o=Math.sin(d),c=Math.cos(d),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n)<=Ae)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(h),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<Ae)return null;i=Ct-.5*d,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(h),i*=n}}else{switch(s=0,l=0,u=0,n=Math.cos(h),r=Math.sin(h),o=Math.sin(d),a=Yr(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=be+d,a=this.qp-a;break;case this.S_POLE:u=d-be,a=this.qp+a}if(Math.abs(u)<Ae)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),i=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,e=this.xmf*u*l*r;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*r,i=n*(this.mode===this.S_POLE?u:-u)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,o,a,s,l=t.x/this.a,u=t.y/this.a;if(this.sphere){var c,h=0,d=0;if((i=.5*(c=Math.sqrt(l*l+u*u)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=Ae?0:Math.asin(u*d/c),l*=d,u=h*c;break;case this.OBLIQ:i=Math.abs(c)<=Ae?this.lat0:Math.asin(h*this.sinph0+u*d*this.cosph0/c),l*=d*this.cosph0,u=(h-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:u=-u,i=be-i;break;case this.S_POLE:i-=be}e=u!==0||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(a=Math.sqrt(l*l+u*u))<Ae)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*a/this.rq),n=Math.cos(r),l*=r=Math.sin(r),this.mode===this.OBLIQ?(s=n*this.sinb1+u*r*this.cosb1/a,o=this.qp*s,u=a*this.cosb1*n-u*this.sinb1*r):(s=u*r/a,o=this.qp*s,u=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=l*l+u*u))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(l,u),i=function(p,f){var g=p+p;return p+f[0]*Math.sin(g)+f[1]*Math.sin(g+g)+f[2]*Math.sin(g+g+g)}(Math.asin(s),this.apa)}return t.x=Oe(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function so(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var TT={init:function(){Math.abs(this.lat1+this.lat2)<Ae||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Qn(this.e3,this.sin_po,this.cos_po),this.qs1=Yr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Qn(this.e3,this.sin_po,this.cos_po),this.qs2=Yr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Yr(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ae?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Yr(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*Oe(e-this.long0),a=r*Math.sin(o)+this.x0,s=this.rh-r*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,e!==0&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,i)),o=Oe(r/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,r,o,a=so(.5*e);if(t<Ae)return a;for(var s=t*t,l=1;l<=25;l++)if(a+=o=.5*(r=1-(n=t*(i=Math.sin(a)))*n)*r/Math.cos(a)*(e/(1-s)-i/r+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}},ET={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,r,o,a,s,l=t.x,u=t.y;return n=Oe(l-this.long0),e=Math.sin(u),i=Math.cos(u),r=Math.cos(n),(o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=Ae?(a=this.x0+1*this.a*i*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)/o):(a=this.x0+this.infinity_dist*i*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),a=so((n=Math.cos(r))*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),o=Oe(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},LT={init:function(){this.sphere||(this.k0=Qn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,r=t.y,o=Oe(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=Yr(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Oe(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(n,r){var o=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(r)-o)<1e-6)return r<0?-1*be:be;for(var a,s,l,u,c=Math.asin(.5*r),h=0;h<30;h++)if(s=Math.sin(c),l=Math.cos(c),u=n*s,c+=a=Math.pow(1-u*u,2)/(2*l)*(r/(1-n*n)-s/(1-u*u)+.5/n*Math.log((1-u)/(1+u))),Math.abs(a)<=1e-10)return c;return NaN}(this.e,2*t.y*this.k0/this.a),e=Oe(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},IT={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=Oe(e-this.long0),r=ao(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,i=t.y;return t.x=Oe(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ao(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},PT={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=su(this.es),this.e1=lu(this.es),this.e2=uu(this.es),this.e3=cu(this.es),this.ml0=this.a*Ii(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,r=t.x,o=t.y,a=Oe(r-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=Ae?(e=this.a*a,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),i=this.a*(ao(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=Ae)e=this.a*a,i=-1*this.ml0;else{var s=os(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),i=this.a*Ii(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,r,o,a,s,l,u;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Ae)e=Oe(n/this.a+this.long0),i=0;else{var c;for(a=this.lat0+r/this.a,s=n*n/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=Ae){i=l;break}e=Oe(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=Ae)i=0,e=Oe(this.long0+n/this.a);else{var h,d,p,f,g;for(a=(this.ml0+r)/this.a,s=n*n/this.a/this.a+a*a,l=a,o=20;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*Ii(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(h*(f=d/this.a)+1)-f-.5*h*(f*f+s))/(this.es*Math.sin(2*l)*(f*f+s-2*a*f)/(4*h)+(a-f)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=Ae){i=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=Oe(this.long0+Math.asin(n*h/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},qT={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,r=i-this.long0,o=n/Ol*1e-5,a=r,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var u,c=l,h=a,d=1,p=0,f=0,g=0;for(e=1;e<=6;e++)u=p*c+d*h,d=d*c-p*h,p=u,f=f+this.B_re[e]*d-this.B_im[e]*p,g=g+this.B_im[e]*d+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=f*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,r=t.y,o=n-this.x0,a=(r-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)i=u*a+l*s,l=l*a-u*s,u=i,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var p,f=c,g=h,y=a,_=s;for(e=2;e<=6;e++)p=g*c+f*h,f=f*c-g*h,g=p,y+=(e-1)*(this.B_re[e]*f-this.B_im[e]*g),_+=(e-1)*(this.B_im[e]*f+this.B_re[e]*g);f=1,g=0;var b=this.B_re[1],m=this.B_im[1];for(e=2;e<=6;e++)p=g*c+f*h,f=f*c-g*h,g=p,b+=e*(this.B_re[e]*f-this.B_im[e]*g),m+=e*(this.B_im[e]*f+this.B_re[e]*g);var v=b*b+m*m;c=(y*b+_*m)/v,h=(_*b-y*m)/v}var S=c,C=h,k=1,L=0;for(e=1;e<=9;e++)k*=S,L+=this.D[e]*k;var A=this.lat0+L*Ol*1e5,q=this.long0+C;return t.x=q,t.y=A,t},names:["New_Zealand_Map_Grid","nzmg"]},RT={init:function(){},forward:function(t){var e=t.x,i=t.y,n=Oe(e-this.long0),r=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Oe(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},FT={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=kv(this.es)},forward:function(t){var e,i,n=t.x,r=t.y;if(n=Oe(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),a=20;a;--a){var s=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<Ae)break}else r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var l=Math.sin(r),u=Math.cos(r);i=this.a*Es(r,l,u,this.en),e=this.a*n*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=so((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=so(Math.sin(e)/this.n)),i=Oe(i+this.long0),e=ao(e)):(e=Tv(t.y/this.a,this.es,this.en),(n=Math.abs(e))<be?(n=Math.sin(e),i=Oe(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-Ae<be&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},AT={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=Oe(e-this.long0),r=i,o=Math.PI*Math.sin(i);;){var a=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=a,Math.abs(a)<Ae)break}r/=2,Math.PI/2-Math.abs(i)<Ae&&(n=0);var s=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=Oe(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t},names:["Mollweide","moll"]},OT={init:function(){Math.abs(this.lat1+this.lat2)<Ae||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=su(this.es),this.e1=lu(this.es),this.e2=uu(this.es),this.e3=cu(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Qn(this.e,this.sinphi,this.cosphi),this.ml1=Ii(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ae?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Qn(this.e,this.sinphi,this.cosphi),this.ml2=Ii(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ii(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=Ii(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var o=this.ns*Oe(i-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return i!==0&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=Oe(this.long0+o/this.ns),n=ao(this.g-i/this.a),t.x=r,t.y=n,t):(n=Rh(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),r=Oe(this.long0+o/this.ns),t.x=r,t.y=n,t)},names:["Equidistant_Conic","eqdc"]},zT={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,r=t.y,o=Oe(n-this.long0);Math.abs(r)<=Ae&&(e=this.x0+this.R*o,i=this.y0);var a=so(2*Math.abs(r/Math.PI));(Math.abs(o)<=Ae||Math.abs(Math.abs(r)-be)<=Ae)&&(e=this.x0,i=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),d=h*h,p=h*(2/u-1),f=p*p,g=Math.PI*this.R*(s*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);o<0&&(g=-g),e=this.x0+g;var y=l+h;return g=Math.PI*this.R*(p*y-s*Math.sqrt((f+l)*(l+1)-y*y))/(f+l),i=r>=0?this.y0+g:this.y0-g,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,r,o,a,s,l,u,c,h,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(n=t.x/h)*n+(r=t.y/h)*r,h=3*(r*r/(l=-2*(a=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(s=a-2*r*r+n*n)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,i=t.y>=0?(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(n)<Ae?this.long0:Oe(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-r*r)+o*o))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},DT={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,o,a,s,l,u,c,h,d,p,f,g,y,_,b,m,v,S,C,k=t.x,L=t.y,A=Math.sin(t.y),q=Math.cos(t.y),P=Oe(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Ae?(t.x=this.x0+this.a*(be-L)*Math.sin(P),t.y=this.y0-this.a*(be-L)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=Ae?(t.x=this.x0+this.a*(be+L)*Math.sin(P),t.y=this.y0+this.a*(be+L)*Math.cos(P),t):(b=this.sin_p12*A+this.cos_p12*q*Math.cos(P),_=(y=Math.acos(b))?y/Math.sin(y):1,t.x=this.x0+this.a*_*q*Math.sin(P),t.y=this.y0+this.a*_*(this.cos_p12*A-this.sin_p12*q*Math.cos(P)),t):(e=su(this.es),i=lu(this.es),n=uu(this.es),r=cu(this.es),Math.abs(this.sin_p12-1)<=Ae?(o=this.a*Ii(e,i,n,r,be),a=this.a*Ii(e,i,n,r,L),t.x=this.x0+(o-a)*Math.sin(P),t.y=this.y0-(o-a)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=Ae?(o=this.a*Ii(e,i,n,r,be),a=this.a*Ii(e,i,n,r,L),t.x=this.x0+(o+a)*Math.sin(P),t.y=this.y0+(o+a)*Math.cos(P),t):(s=A/q,l=os(this.a,this.e,this.sin_p12),u=os(this.a,this.e,A),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*q)),m=(h=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(P)))===0?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=Ae?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(P)*Math.cos(c)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),y=l*m*(1-(v=m*m)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(S=v*m)/8*(f=d*p)*(1-2*g)+(C=S*m)/120*(g*(4-7*g)-3*d*d*(1-7*g))-C*m/48*f),t.x=this.x0+y*Math.sin(h),t.y=this.y0+y*Math.cos(h),t))},inverse:function(t){var e,i,n,r,o,a,s,l,u,c,h,d,p,f,g,y,_,b,m,v,S,C,k;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y))>2*be*this.a?void 0:(i=e/this.a,n=Math.sin(i),r=Math.cos(i),o=this.long0,Math.abs(e)<=Ae?a=this.lat0:(a=so(r*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-be,o=Math.abs(s)<=Ae?this.lat0>=0?Oe(this.long0+Math.atan2(t.x,-t.y)):Oe(this.long0-Math.atan2(-t.x,t.y)):Oe(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=o,t.y=a,t):(l=su(this.es),u=lu(this.es),c=uu(this.es),h=cu(this.es),Math.abs(this.sin_p12-1)<=Ae?(a=Rh(((d=this.a*Ii(l,u,c,h,be))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,u,c,h),o=Oe(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=Ae?(d=this.a*Ii(l,u,c,h,be),a=Rh(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,l,u,c,h),o=Oe(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=os(this.a,this.e,this.sin_p12),y=Math.cos(g),b=-(_=this.e*this.cos_p12*y)*_/(1-this.es),m=3*this.es*(1-b)*this.sin_p12*this.cos_p12*y/(1-this.es),C=1-b*(S=(v=e/p)-b*(1+b)*Math.pow(v,3)/6-m*(1+3*b)*Math.pow(v,4)/24)*S/2-v*S*S*S/6,f=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*y),o=Oe(this.long0+Math.asin(Math.sin(g)*Math.sin(S)/Math.cos(f))),k=Math.sin(f),a=Math.atan2((k-this.es*C*this.sin_p12)*Math.tan(f),k*(1-this.es)),t.x=o,t.y=a,t))},names:["Azimuthal_Equidistant","aeqd"]},jT={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,o,a,s,l=t.x,u=t.y;return n=Oe(l-this.long0),e=Math.sin(u),i=Math.cos(u),r=Math.cos(n),((o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=Ae)&&(a=1*this.a*i*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=s,t},inverse:function(t){var e,i,n,r,o,a,s;return t.x-=this.x0,t.y-=this.y0,i=so((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),r=Math.cos(i),a=this.long0,Math.abs(e)<=Ae?(s=this.lat0,t.x=a,t.y=s,t):(s=so(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-be,Math.abs(o)<=Ae?(a=this.lat0>=0?Oe(this.long0+Math.atan2(t.x,-t.y)):Oe(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=Oe(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},m1=1,rl=2,ol=3,al=4,Sp=5,Cp=6,jr=1,Ar=2,Or=3,Va=4;function dc(t,e,i,n){var r;return t<Ae?(n.value=jr,r=0):(r=Math.atan2(e,i),Math.abs(r)<=Ct?n.value=jr:r>Ct&&r<=be+Ct?(n.value=Ar,r-=be):r>be+Ct||r<=-(be+Ct)?(n.value=Or,r=r>=0?r-Jt:r+Jt):(n.value=Va,r+=be)),r}function La(t,e){var i=t+e;return i<-Jt?i+=ou:i>+Jt&&(i-=ou),i}var BT={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=be-Ct/2?this.face=Sp:this.lat0<=-(be-Ct/2)?this.face=Cp:Math.abs(this.long0)<=Ct?this.face=m1:Math.abs(this.long0)<=be+Ct?this.face=this.long0>0?rl:al:this.face=ol,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,r,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=this.es!==0?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===Sp)r=be-e,i>=Ct&&i<=be+Ct?(l.value=jr,n=i-be):i>be+Ct||i<=-(be+Ct)?(l.value=Ar,n=i>0?i-Jt:i+Jt):i>-(be+Ct)&&i<=-Ct?(l.value=Or,n=i+be):(l.value=Va,n=i);else if(this.face===Cp)r=be+e,i>=Ct&&i<=be+Ct?(l.value=jr,n=-i+be):i<Ct&&i>=-Ct?(l.value=Ar,n=-i):i<-Ct&&i>=-(be+Ct)?(l.value=Or,n=-i-be):(l.value=Va,n=i>0?-i+Jt:-i-Jt);else{var u,c,h,d,p,f;this.face===rl?i=La(i,+be):this.face===ol?i=La(i,+Jt):this.face===al&&(i=La(i,-be)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(i),u=p*Math.cos(i),c=p*f,h=d,this.face===m1?n=dc(r=Math.acos(u),h,c,l):this.face===rl?n=dc(r=Math.acos(c),h,-u,l):this.face===ol?n=dc(r=Math.acos(-u),h,-c,l):this.face===al?n=dc(r=Math.acos(-c),h,u,l):(r=n=0,l.value=jr)}return a=Math.atan(12/Jt*(n+Math.acos(Math.sin(n)*Math.cos(Ct))-be)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===Ar?a+=be:l.value===Or?a+=Jt:l.value===Va&&(a+=1.5*Jt),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,i,n,r,o,a,s,l,u,c,h,d,p={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=jr:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=Ar,e-=be):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=Or,e=e<0?e+Jt:e-Jt):(f.value=Va,e+=be),u=Jt/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(e))*n*(r=Math.tan(i))*r*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Sp)l=Math.acos(s),p.phi=be-l,f.value===jr?p.lam=a+be:f.value===Ar?p.lam=a<0?a+Jt:a-Jt:f.value===Or?p.lam=a-be:p.lam=a;else if(this.face===Cp)l=Math.acos(s),p.phi=l-be,f.value===jr?p.lam=-a+be:f.value===Ar?p.lam=-a:f.value===Or?p.lam=-a-be:p.lam=a<0?-a-Jt:-a+Jt;else{var g,y,_;u=(g=s)*g,y=(u+=(_=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*_)>=1?0:Math.sqrt(1-u),f.value===Ar?(u=y,y=-_,_=u):f.value===Or?(y=-y,_=-_):f.value===Va&&(u=y,y=_,_=-u),this.face===rl?(u=g,g=-y,y=u):this.face===ol?(g=-g,y=-y):this.face===al&&(u=g,g=y,y=-u),p.phi=Math.acos(-_)-be,p.lam=Math.atan2(y,g),this.face===rl?p.lam=La(p.lam,-be):this.face===ol?p.lam=La(p.lam,-Jt):this.face===al&&(p.lam=La(p.lam,+be))}return this.es!==0&&(c=p.phi<0?1:0,h=Math.tan(p.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Mp=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],sl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],v1=.8487,y1=1.3523,n2=Ur/5,NT=1/n2,kp=18,pc=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},VT={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Oe(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*n2);n<0?n=0:n>=kp&&(n=17);var r={x:pc(Mp[n],i=Ur*(i-NT*n))*e,y:pc(sl[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*v1+this.x0,r.y=r.y*this.a*y1+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*v1),y:Math.abs(t.y-this.y0)/(this.a*y1)};if(e.y>=1)e.x/=Mp[18][0],e.y=t.y<0?-be:be;else{var i=Math.floor(e.y*kp);for(i<0?i=0:i>=kp&&(i=17);;)if(sl[i][0]>e.y)--i;else{if(!(sl[i+1][0]<=e.y))break;++i}var n=sl[i],r=5*(e.y-n[0])/(sl[i+1][0]-n[0]);r=function(o,a,s,l){for(var u=a;l;--l){var c=o(u);if(u-=c,Math.abs(c)<s)break}return u}(function(o){return(pc(n,o)-e.y)/function(a,s){return a[1]+s*(2*a[2]+3*s*a[3])}(n,o)},r,Ae,100),e.x/=pc(Mp[i],r),e.y=(5*i+r)*mi,t.y<0&&(e.y=-e.y)}return e.x=Oe(e.x+this.long0),e},names:["Robinson","robin"]},$T={init:function(){this.name="geocent"},forward:function(t){return Uw(t,this.es,this.a)},inverse:function(t){return Xw(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},fc=0,gc=1,mc=2,vc=3,ll={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},GT={init:function(){if(Object.keys(ll).forEach(function(i){if(this[i]===void 0)this[i]=ll[i].def;else{if(ll[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);ll[i].num&&(this[i]=parseFloat(this[i]))}ll[i].degrees&&(this[i]=this[i]*mi)}.bind(this)),Math.abs(Math.abs(this.lat0)-be)<Ae?this.mode=this.lat0<0?gc:fc:Math.abs(this.lat0)<Ae?this.mode=mc:(this.mode=vc,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,r,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case vc:i=this.sinph0*o+this.cosph0*a*s;break;case mc:i=a*s;break;case gc:i=-o;break;case fc:i=o}switch(e=(i=this.pn1/(this.p-i))*a*Math.sin(t.x),this.mode){case vc:i*=this.cosph0*o-this.sinph0*a*s;break;case mc:i*=o;break;case fc:i*=-a*s;break;case gc:i*=a*s}return r=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*r,i=n*r,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,r={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var o=Di(t.x,t.y);if(Math.abs(o)<Ae)r.x=0,r.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case vc:r.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(r.y))*o,t.x*=s*this.cosph0;break;case mc:r.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case fc:r.y=Math.asin(a),t.y=-t.y;break;case gc:r.y=-Math.asin(a)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]},HT={init:function(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,n,r,o=t.x,a=t.y;if(o-=this.long0,this.shape==="ellipse"){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/Di(this.radius_p*Math.cos(a),Math.sin(a));if(i=s*Math.cos(o)*Math.cos(a),n=s*Math.sin(o)*Math.cos(a),r=s*Math.sin(a),(this.radius_g-i)*i-n*n-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Di(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/Di(n,e)))}else this.shape==="sphere"&&(e=Math.cos(a),i=Math.cos(o)*e,n=Math.sin(o)*e,r=Math.sin(a),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Di(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/Di(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,n,r,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Di(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Di(1,a));var l=s/this.radius_p;if(e=a*a+l*l+o*o,(n=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),o=this.radius_g+r*o,a*=r,s*=r,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(n=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),o=this.radius_g+r*o,a*=r,s*=r,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},ul=1.340264,cl=-.081106,hl=893e-6,dl=.003796,yc=Math.sqrt(3)/2,WT={init:function(){this.es=0,this.long0=this.long0!==void 0?this.long0:0},forward:function(t){var e=Oe(t.x-this.long0),i=t.y,n=Math.asin(yc*Math.sin(i)),r=n*n,o=r*r*r;return t.x=e*Math.cos(n)/(yc*(ul+3*cl*r+o*(7*hl+9*dl*r))),t.y=n*(ul+cl*r+o*(hl+dl*r)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,i,n,r,o=t.y;for(r=0;r<12&&(o-=n=(o*(ul+cl*(e=o*o)+(i=e*e*e)*(hl+dl*e))-t.y)/(ul+3*cl*e+i*(7*hl+9*dl*e)),!(Math.abs(n)<1e-9));++r);return i=(e=o*o)*e*e,t.x=yc*t.x*(ul+3*cl*e+i*(7*hl+9*dl*e))/Math.cos(o),t.y=Math.asin(Math.sin(o)/yc),t.x=Oe(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]},hu=1e-10;function UT(t){var e,i,n,r=Oe(t.x-(this.long0||0)),o=t.y;return e=this.am1+this.m1-Es(o,i=Math.sin(o),n=Math.cos(o),this.en),i=n*r/(e*Math.sqrt(1-this.es*i*i)),t.x=e*Math.sin(i),t.y=this.am1-e*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function XT(t){var e,i,n,r;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,i=Di(t.x,t.y=this.am1-t.y),r=Tv(this.am1+this.m1-i,this.es,this.en),(e=Math.abs(r))<be)e=Math.sin(r),n=i*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(r);else{if(!(Math.abs(e-be)<=hu))throw new Error;n=0}return t.x=Oe(n+(this.long0||0)),t.y=ao(r),t}function YT(t){var e,i,n=Oe(t.x-(this.long0||0)),r=t.y;return i=this.cphi1+this.phi1-r,Math.abs(i)>hu?(t.x=i*Math.sin(e=n*Math.cos(r)/i),t.y=this.cphi1-i*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function KT(t){var e,i;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var n=Di(t.x,t.y=this.cphi1-t.y);if(i=this.cphi1+this.phi1-n,Math.abs(i)>be)throw new Error;return e=Math.abs(Math.abs(i)-be)<=hu?0:n*Math.atan2(t.x,t.y)/Math.cos(i),t.x=Oe(e+(this.long0||0)),t.y=ao(i),t}var ZT={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<hu)throw new Error;this.es?(this.en=kv(this.es),this.m1=Es(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=XT,this.forward=UT):(Math.abs(this.phi1)+hu>=be?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=KT,this.forward=YT)},names:["bonne","Bonne (Werner lat_1=90)"]};Ri.defaultDatum="WGS84",Ri.Proj=Un,Ri.WGS84=new Ri.Proj("WGS84"),Ri.Point=rs,Ri.toPoint=Yw,Ri.defs=Ti,Ri.nadgrid=function(t,e){var i=new DataView(e),n=function(s){var l=s.getInt32(8,!1);return l===11?!1:(l=s.getInt32(8,!0),!0)}(i),r=function(s,l){return{nFields:s.getInt32(8,l),nSubgridFields:s.getInt32(24,l),nSubgrids:s.getInt32(40,l),shiftType:$g(s,56,64).trim(),fromSemiMajorAxis:s.getFloat64(120,l),fromSemiMinorAxis:s.getFloat64(136,l),toSemiMajorAxis:s.getFloat64(152,l),toSemiMinorAxis:s.getFloat64(168,l)}}(i,n),o=function(s,l,u){for(var c=176,h=[],d=0;d<l.nSubgrids;d++){var p=rT(s,c,u),f=oT(s,c,p,u),g=Math.round(1+(p.upperLongitude-p.lowerLongitude)/p.longitudeInterval),y=Math.round(1+(p.upperLatitude-p.lowerLatitude)/p.latitudeInterval);h.push({ll:[Qa(p.lowerLongitude),Qa(p.lowerLatitude)],del:[Qa(p.longitudeInterval),Qa(p.latitudeInterval)],lim:[g,y],count:p.gridNodeCount,cvs:nT(f)}),c+=176+16*p.gridNodeCount}return h}(i,r,n),a={header:r,subgrids:o};return Ww[t]=a,a},Ri.transform=qh,Ri.mgrs=lT,Ri.version="__VERSION__",function(t){t.Proj.projections.add(Kc),t.Proj.projections.add(Zc),t.Proj.projections.add(dT),t.Proj.projections.add(pT),t.Proj.projections.add(fT),t.Proj.projections.add(gT),t.Proj.projections.add(mT),t.Proj.projections.add(vT),t.Proj.projections.add(yT),t.Proj.projections.add(_T),t.Proj.projections.add(kT),t.Proj.projections.add(TT),t.Proj.projections.add(ET),t.Proj.projections.add(LT),t.Proj.projections.add(IT),t.Proj.projections.add(PT),t.Proj.projections.add(qT),t.Proj.projections.add(RT),t.Proj.projections.add(FT),t.Proj.projections.add(AT),t.Proj.projections.add(OT),t.Proj.projections.add(zT),t.Proj.projections.add(DT),t.Proj.projections.add(jT),t.Proj.projections.add(BT),t.Proj.projections.add(VT),t.Proj.projections.add($T),t.Proj.projections.add(GT),t.Proj.projections.add(HT),t.Proj.projections.add(WT),t.Proj.projections.add(ZT)}(Ri);class at{static prjMap=new Map;static tileGridMap=new Map;static EPSG4326Extent=[-180,-90,180,90];static EPSG3857Extent=[-2003750834e-2,-2003750834e-2,2003750834e-2,2003750834e-2];static getProjection(e){const i="EPSG:3857";let n;if(e&&e.epsg){if(n=at.prjMap.get(e.epsg),n)return n;if(n=st(e.epsg),!n){if(!e.proj4)throw Error("Prj4j");Ri.defs(e.epsg,e.proj4),function(r){const o=Object.keys(r.defs),a=o.length;let s,l;for(s=0;s<a;++s){const u=o[s];if(!st(u)){const c=r.defs(u);let h=c.units;h||c.projName!=="longlat"||(h="degrees"),Bm(new gr({code:u,axisOrientation:c.axis,metersPerUnit:c.to_meter,units:h}))}}for(s=0;s<a;++s){const u=o[s],c=st(u);for(l=0;l<a;++l){const h=o[l],d=st(h);if(!Bb(u,h))if(r.defs[u]===r.defs[h])Pf([c,d]);else{const p=r(u,h);sM(c,d,$0(c,d,p.forward),$0(d,c,p.inverse))}}}}(Ri),n=new gr({code:e.epsg,extent:e.prjExtent})}n&&at.prjMap.set(e.epsg,n)}else n=at.prjMap.get(i),n||(n=new gr({code:i}),at.prjMap.set(i,n));return n}static toLonLat(e,i){return at.transformCoordinate(e,i,"EPSG:4326")}static fromLonLat(e,i){return at.transformCoordinate(e,"EPSG:4326",i)}static fromLonLatCoordinate(e,i){return at.transformCoordinate(e,"EPSG:4326",i)}static transformCoordinate(e,i,n){return zo(e,i,n)}static getExtentFrom4326(e,i="EPSG:3857"){return at.getExtentFromTransform(e,"EPSG:4326",i)}static transformExtent(e,i,n="EPSG:3857"){at.getExtentFromTransform(e,i,n)}static getExtentFromTransform(e,i,n="EPSG:3857"){return Hb(e,xs(i,n))}static transformGeometry(e,i,n="EPSG:3857"){return e.transform(i,n)}static transformFeature(e,i,n="EPSG:3857"){const r=e.getGeometry().transform(i,n);if(e.setGeometry)return e.setGeometry(r),e;if(r){const o=new Sn(r);return o.setProperties(e.getProperties()),o}}static transformFeatures(e,i,n="EPSG:3857"){const r=[];return e&&e.forEach(o=>{const a=this.transformFeature(o,i,n);a&&r.push(a)}),r}static createWMTSTileGrid(e){const i=e.rule,n=at.tileGridMap.get(i);if(n)return n;const r=[],o=[];let a=10;for(let c in e.resolutions){const h=Number(c);r[h]=c,o[h]=e.resolutions[c],a=Math.min(h,a)}if(a>0)for(let c=a;c>0;c--){let h=c-1;r[h]==null&&o[c]!=null&&(r[h]=h.toString(),o[h]=2*o[c])}let s=256;s=Array.isArray(e.tileSize)?e.tileSize[0]:e.tileSize;const l={origin:e.origin,extent:e.extent,resolutions:o,matrixIds:r,tileSize:s},u=new Ik(l);return at.tileGridMap.set(i,u),u}static getTDTTileGrid(e=!0){const i=e?"W":"C",n=at.tileGridMap.get(i);if(n)return n;const r=e?at.EPSG3857Extent:at.EPSG4326Extent,o=rt(r)/256,a={};for(var s=1;s<22;++s)a[s.toString()]=o/Math.pow(2,s);const l={rule:i,origin:er(r),resolutions:a,tileSize:[256,256]},u=at.createWMTSTileGrid(l);return u&&at.tileGridMap.set(i,u),u}}class QT{tdtKeys=[];xmap;constructor(e,i){e&&(this.xmap=e,this.tdtKeys=[...i])}setTDTKeys(e){e&&e.length>0&&(this.tdtKeys=[...this.tdtKeys,...e])}addWMTSLayerByOptions2(e,i,n,r){const o=hr(),a="grid",s=n.layer;n.crossOrigin="anonymous",i.source=new ka(n);const l={lyrID:o,lyrName:n.layer,lyrType:a};i.properties?i.properties=Ng(i.properties,l):i.properties=l;const u=new oi(i);e.map.addLayer(u);const c={id:o,name:s,alias:r,minZoom:i.minZoom??1,maxZoom:i.maxZoom??24,visible:i.visible??!0,opacity:i.opacity??1,type:a};return e.registerLayer(u,c),u}addWMTSLayerByOptions(e,i,n){const r=hr(),o="grid",a=i.layer;i.crossOrigin="anonymous",e.source=new ka(i);const s={lyrID:r,lyrName:i.layer,lyrType:o};e.properties?e.properties=Ng(e.properties,s):e.properties=s;const l=new oi(e);this.xmap.map.addLayer(l);const u={id:r,name:a,alias:n,minZoom:e.minZoom??1,maxZoom:e.maxZoom??24,visible:e.visible??!0,opacity:e.opacity??1,type:o};return this.xmap.registerLayer(l,u),l}addWMTSLayer2(e,i,n,r,o,a,s,l,u){const c=a??this.xmap.map.getView().getProjection(),h=o??at.getTDTTileGrid(!0),d=hr(),p="grid",f=new oi({opacity:1,source:new ka({crossOrigin:"anonymous",layer:i,matrixSet:n,format:"image/png",projection:c,url:r,tileGrid:h,style:s??"default",wrapX:!0}),minZoom:l,maxZoom:u,properties:{lyrID:d,lyrName:i,lyrType:p}});this.xmap.map.addLayer(f);const g={id:d,name:i,alias:e,minZoom:l,maxZoom:u,visible:!0,opacity:1,type:p};return this.xmap.registerLayer(f,g),f}addWMTSLayer(e,i,n,r,o,a,s="KVP",l="image/png"){const u=o??this.xmap.map.getView().getProjection(),c=r??at.getTDTTileGrid(!0),h=hr(),d="grid",p=new oi({opacity:1,source:new ka({crossOrigin:"anonymous",layer:e,matrixSet:i,format:l,projection:u,requestEncoding:s,url:n,tileGrid:c,style:a??"default",wrapX:!0}),properties:{lyrID:h,lyrName:e,lyrType:d}});this.xmap.map.addLayer(p);const f={id:h,name:e,minZoom:1,maxZoom:24,visible:!0,opacity:1,type:d};return this.xmap.registerLayer(p,f),p}addWMTSLayerSelf(e,i){const n=e.prjInfo,r=at.getProjection(n),o=e.tileSchema,a=at.createWMTSTileGrid(o),s={minZoom:e.minlevel,maxZoom:e.maxlevel,opacity:1,visible:!0,properties:{bounds:e.bounds,center:e.center,level:e.level}},l={tileGrid:a,projection:r,layer:i,style:e.style||"default",matrixSet:o.rule,url:e.tileUrl,format:"image/png"},u=this.addWMTSLayerByOptions(s,l);return this.xmap.map&&e.bounds&&this.xmap.zoomToExtent(e.bounds),u}getTDTAlias(e){let i="";switch(e){case"vec_c":case"vec_w":case"img_c":case"img_w":i="";break;case"cva_c":case"cva_w":i="";break;case"cia_c":case"cia_w":i="";break;case"ter_c":case"ter_w":i="";break;case"cta_c":case"cta_w":i=""}return i}addTDTLayer(e="img_c",i){if(!this.xmap||!this.xmap.map)throw Error("XMap");const n=this.xmap.map;if(e.indexOf("_")<0)return;const r=e.split("_"),o=r[0],a=r[1],s=a==="w"||a==="W",l=at.getTDTTileGrid(s),u=s?"EPSG:3857":"EPSG:4326",c=this.getTDTUrls(e,this.tdtKeys);let h="grid";(o==="cva"||o==="cia")&&(h="symbol");const d=e,p=new oi({source:new ka({crossOrigin:"anonymous",urls:c,layer:o,style:"default",matrixSet:a,format:"tiles",wrapX:!0,projection:u,tileGrid:l}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:d,lyrName:e,lyrType:h,lyrGroup:""}});n.addLayer(p);const f={id:d,name:e,alias:`${i}[${e}]`,group:"",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:h};return this.xmap.registerLayer(p,f),p}addTDTLayerOnly(e,i){if(!this.xmap||!this.xmap.map)throw Error("XMap");const n=this.xmap;if(e.indexOf("_")<0)return;const r=e.split("_"),o=r[0],a=r[1],s=a==="w"||a==="W",l=at.getTDTTileGrid(s),u=s?"EPSG:3857":"EPSG:4326",c=this.getTDTUrls(e,this.tdtKeys);let h="grid";(o==="cva"||o==="cia")&&(h="symbol");const d=hr(),p=new oi({source:new ka({crossOrigin:"anonymous",urls:c,layer:o,style:"default",matrixSet:a,format:"tiles",wrapX:!0,projection:u,tileGrid:l}),minZoom:1,maxZoom:18,properties:{lyrID:d,lyrName:e,lyrType:h,lyrGroup:""}});return n.map.addLayer(p),p}getTDTUrls(e,i){const n=[],r=i.length;if(r===0)return n;let o=i[0];for(let a=0;a<8;a++){r>1&&(o=i[Vw(0,r-1)]);const s=`https://t${a}.tianditu.gov.cn/${e}/wmts?tk=${o}`;n.push(s)}return n}addWMTSDebugLayer(e){const i=e.getSource();return this.addTileDebugLayer(i.getTileGrid(),i.getProjection())}addTileDebugLayer(e,i){if(!this.xmap||!this.xmap.map)return;const n=new oi({source:new l5({projection:i,tileGrid:e}),properties:{lyrID:"debugLayer",lyrName:"debugLayer",lyrType:"grid"}});return this.xmap.map.addLayer(n),n}addLocalTDTLayerXYZ(e,i){e&&i.forEach(n=>{this.addSingleLocalTDTLayerXYZ(e,n)})}addSingleLocalTDTLayerXYZ(e,i){const n=e;if(n){const r=i.toLocaleLowerCase(),o=this.getTDTAlias(r),a=r.split("_"),s=a[0],l=a[1],u=st(l==="w"||l==="W"?"EPSG:3857":"EPSG:4326");let c="grid";(s==="cva"||s==="cia")&&(c="symbol");const h=hr(),d=n.replace("{layerName}",r),p=new oi({source:new ma({url:d,projection:u}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:h,lyrName:r,lyrType:c,lyrGroup:""}});this.xmap.map.addLayer(p);const f={id:h,name:r,alias:`${o}[${r}]`,group:"",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:c};this.xmap.registerLayer(p,f)}}}const JT={img:"https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer",vec:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",ter:"https://server.arcgisonline.com/arcgis/rest/services/services/World_Physical_Ma/MapServer"},eE={img:"ArcGIS",vec:"ArcGIS",ter:"ArcGIS"};class tE{static createLayer(e){const i="arcgis",n=e.toLocaleLowerCase(),r=JT[n];if(!r)return;const o=eE[n],a=`${i}_${n}`,s="grid";return{layer:new oi({source:new s5({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:s,lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:0,maxZoom:23,visible:!0,opacity:1,type:s}}}}const iE={img:"",vec:""};class nE{static createLayer(e){const i="baidu",n=e.toLocaleLowerCase(),r=iE[n];if(!r)return;const o=`${i}_${n}`;return{layer:new oi({source:new Bo({key:e,projection:iu}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:o,lyrName:o,lyrType:"grid",lyrGroup:i}}),layerItem:{id:o,name:o,alias:r,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const rE={img:"https://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",vec:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}",ter:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=8&x={x}&y={y}&z={z}"},oE={img:"",vec:"",ter:""};class aE{static createLayer(e){const i="google",n=e.toLocaleLowerCase(),r=rE[n];if(!r)return;const o=oE[n],a=`${i}_${n}`,s="grid";return{layer:new oi({source:new ma({url:r,wrapX:!1,projection:"EPSG:4326"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:s,lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:s}}}}const sE={img:"https://www.google.com.hk/maps/vt?lyrs=s&x={x}&y={y}&z={z}",vec:"https://www.google.com.hk/maps/vt?lyrs=m&x={x}&y={y}&z={z}",cva:"https://www.google.com.hk/maps/vt?lyrs=h&x={x}&y={y}&z={z}",ter:"https://www.google.com.hk/maps/vt?lyrs=t,r&x={x}&y={y}&z={z}",img_cia:"https://www.google.com.hk/maps/vt?lyrs=y&x={x}&y={y}&z={z}"},lE={img:"",vec:"",cva:"",ter:"",img_cia:"+"};class uE{static createLayer(e){const i="google",n=e.toLocaleLowerCase(),r=sE[n];if(!r)return;const o=lE[n],a=`${i}_${n}`;return{layer:new oi({source:new ma({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:"grid",lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const cE={img:"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw",vec:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw"},hE={img:"Mapbox",vec:"Mapbox"};class dE{static createLayer(e){const i="mapbox",n=e.toLocaleLowerCase(),r=cE[n];if(!r)return;const o=hE[n],a=`${i}_${n}`;return{layer:new oi({source:new ma({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:"grid",lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}}const pE={img:"https://p{1-3}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",vec:"https://rt{1-3}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&scene=0&version=347"},fE={img:"",vec:""};class gE{static createLayer(e){const i="qq",n=e.toLocaleLowerCase(),r=pE[n];if(!r)return;const o=fE[n],a=`${i}_${n}`;return{layer:new oi({source:new ma({url:r,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:a,lyrName:a,lyrType:"grid",lyrGroup:i}}),layerItem:{id:a,name:a,alias:o,group:i,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"}}}}const _q=[{id:"OSM_VEC",label:"OSM",type:"osm",img:"/img/basicimage/osm.png",layers:["osm"]},{id:"TDT_VEC",label:"-",type:"tdt",img:"/img/basicimage/tdt_vec.png",layers:["vec_w","cva_w"]},{id:"TDT_IMG",label:"-",type:"tdt",img:"/img/basicimage/tdt_img.png",layers:["img_w","cia_w"]},{id:"TDT_TER",label:"",type:"tdt",img:"/img/basicimage/tdt_ter_cta.png",layers:["ter_w","cta_w"]},{id:"ARCGIS_IMG",label:"ArcGIS",type:"arcgis",img:"/img/basicimage/arcgis_img.png",layers:["arcgis_img"]},{id:"ARCGIS_VEC",label:"ArcGIS",type:"arcgis",img:"/img/basicimage/arcgis_vec.png",layers:["arcgis_vec"]},{id:"ARCGIS_TER",label:"ArcGIS",type:"arcgis",img:"/img/basicimage/arcgis_ter.png",layers:["arcgis_ter"]},{id:"Mapbox_VEC",label:"Mapbox",type:"mapbox",img:"/img/basicimage/mapbox_vec.png",layers:["mapbox_vec"]},{id:"Mapbox_IMG",label:"Mapboxv9",type:"mapbox",img:"/img/basicimage/mapbox_img.png",layers:["mapbox_img"]},{id:"Google_VEC",label:"",type:"google",img:"/img/basicimage/google_vec.png",layers:["google_vec"]},{id:"Google_IMG",label:"",type:"google",img:"/img/basicimage/google_img.png",layers:["google_img"]},{id:"Google_IMG_CIA",label:"+",type:"google",img:"/img/basicimage/google_img_cia.png",layers:["google_img_cia"]},{id:"Google_TER",label:"",type:"google",img:"/img/basicimage/google_ter.png",layers:["google_ter"]},{id:"Google_VEC_CVA",label:"",type:"google",img:"/img/basicimage/google_cva.png",layers:["google_cva"]},{id:"BING_VEC",label:"Bing",type:"bing",img:"/img/basicimage/basic_bingimg.jpg",layers:["bing_vec"]},{id:"BING_IMG",label:"Bing",type:"bing",img:"/img/basicimage/basic_tdtimg.jpg",layers:["bing_img"]},{id:"GD_VEC",label:"",type:"gaode",img:"/img/basicimage/gaode_vec.png",layers:["gaode_vec"]},{id:"GD_IMG",label:"",type:"gaode",img:"/img/basicimage/gaode_img.png",layers:["gaode_img"]},{id:"QQ_VEC",label:"",type:"qq",img:"/img/basicimage/qq_vec.png",layers:["qq_vec"]},{id:"QQ_IMG",label:"",type:"qq",img:"/img/basicimage/qq_img.png",layers:["qq_img"]},{id:"BAIDU_VEC",label:"",type:"baidu",img:"/img/basicimage/baidu_vec.png",layers:["baidu_vec"]},{id:"BAIDU_IMG",label:"",type:"baidu",img:"/img/basicimage/baidu_img.png",layers:["baidu_img"]}];class Bs{target;_TDTKeys=["1eafc8f4338343058a4876033f55b7b6","587e4b30b61cde5c55680135140dc980","fac3d52ef3ed4f1d18a79a9776dcf4f4","5f2cd4464e3dff59e381d6716cebbc80","f7b2c7226b59e6578deb7ae495d34526","fdcb5a9013aab146c4d9d6339359cc3e","1eafc8f4338343058a4876033f55b7b6"];map;mapEventBus=kh;isMainSync=!1;digits=4;defaultHomeView={zoom:5,center:[116.46229441189399,40.24876149]};mapGroup="map";_targetContainer="";postionStatusHTMLElement;postionStatus={postion:"",zoom:"",center:"",epsgInfo:"EPSG:3857"};currentPosition;positionProjection=st("EPSG:4326");layerManager;isInitSuccess=!1;_WMTSTool;InteractionsDiction=new Map;ControlsDiction=new Map;isInternet=!0;static initByMapConfig(e){const i=new Bs(e.id,e.group,e.hasLayerManager);return e.projInfo&&(e.viewOptions.Projection=at.getProjection(e.projInfo)),i.initMapView(e.viewOptions),e.layers&&(e.isInternet===!1&&(i.isInternet=!1),e.layers.forEach(n=>{i.isInternet?i.addOnlineLayer(n):i.addOnlineLayer(n,e.tdtXYZLocalURL)})),e.controls&&e.controls.forEach(n=>{i.addDefaultControl(n)}),e.interactions&&e.interactions.forEach(n=>{i.addDefaultInteraction(n)}),i}constructor(e="map",i="map",n=!1){this.target=e,this.mapGroup=i;const r=document.getElementById(e);this._targetContainer=e+"_Container",r&&(this.isInitSuccess=!0),this.map=new zs({target:this.isInitSuccess?this.target:void 0}),this.map.on("moveend",this.onMoveEnd.bind(this)),n&&(this.layerManager=new B5(this,this.target)),this.postionStatusHTMLElement=j5("div","ol-mouse-position xmap-position",r),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.on("moveend",this.onMapMoveEndHandler.bind(this))}mapPrj;pointerMoveHandler(e){this.currentPosition=[...e.coordinate];let i=e.coordinate;const n=this.MapView.getProjection();i=at.toLonLat(i,n);const r=N0(i,this.digits);this.postionStatus.postion=`${r}`,this.refreshPostionStatus()}onMapMoveEndHandler(e){const i=this.MapView,n=i.getZoom();this.postionStatus.zoom=`${n.toFixed(1)}`;let r=i.getCenter();r=at.toLonLat(r,i.getProjection());const o=N0(r,this.digits);this.postionStatus.center=`${o}`,this.refreshPostionStatus()}refreshPostionStatus(){this.postionStatusHTMLElement&&(this.postionStatusHTMLElement.innerHTML=`${this.postionStatus.epsgInfo} ${this.postionStatus.zoom} ${this.postionStatus.center} ${this.postionStatus.postion}`)}get targetContainer(){return this._targetContainer}get CurrentPosition(){return this.currentPosition}get WMTSTool(){return this._WMTSTool||(this._WMTSTool=new QT(this,this._TDTKeys)),this._WMTSTool}initMapView(e){this.isInitSuccess||this.map.setTarget(this.target),e.projection||(e.projection="EPSG:3857"),e.center&&(this.defaultHomeView.center=[...e.center]),e.zoom&&(this.defaultHomeView.zoom=e.zoom),e.center=at.fromLonLat(e.center,e.projection),Al(e.projection)||e.projection===void 0?this.postionStatus.epsgInfo=e.projection??"EPSG:3857":this.postionStatus.epsgInfo=e.projection.getCode();const i=new Wi(e);return this.setView(i),i}get TDTKey(){const e=Vw(0,this._TDTKeys.length-1);return this._TDTKeys[e]}set TDTKeys(e){e&&e.length>0&&this._TDTKeys.push(...e)}addOnlineLayer(e,i=""){const n=e.toLocaleLowerCase();if(n.endsWith("_c")||n.endsWith("_w")){const r=this.WMTSTool.getTDTAlias(n);r&&(this.isInternet?this.WMTSTool.addTDTLayer(n,r):i&&this.WMTSTool.addSingleLocalTDTLayerXYZ(i,n))}else{if(!this.isInternet)throw Error("");if(n==="osm"){const r="grid",o=new oi({source:new Fy,properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:n,lyrName:"osm",lyrType:r,lyrGroup:"osm"}});this.map.addLayer(o);const a={id:n,name:n,alias:"",group:n,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"};this.registerLayer(o,a)}else{const r=n.indexOf("_"),o=n.substring(0,r),a=n.substring(r+1);let s;switch(o){case"arcgis":s=tE.createLayer(a);break;case"gaode":s=aE.createLayer(a);break;case"google":s=uE.createLayer(a);break;case"baidu":s=nE.createLayer(a);break;case"mapbox":s=dE.createLayer(a);break;case"qq":s=gE.createLayer(a)}if(s){const{layer:l,layerItem:u}=s;this.map.addLayer(l),this.registerLayer(l,u)}}}}get LayerManager(){return this.layerManager}removeLayer(e){return this.map.removeLayer(e)}changeLayerOrder(e,i){const n=this.map.getLayers(),r=n.removeAt(e);r&&n.insertAt(i,r)}addDefaultControl(e){const i=e.key.toLocaleLowerCase(),n=this.DefaultControlKeys[i];if(n)switch(n){case"target":const r=new Vt({color:"red",width:2}),o=[new qt({image:new oo({points:4,radius:11,radius2:0,stroke:new Vt({color:"#fff",width:3})})}),new qt({image:new oo({points:4,radius:11,radius2:0,stroke:r})})],a=new E5({style:o,composite:""});e.options.visible===!1&&a.setVisible(!1),this.addControlExt(n,a);break;case"overview":const s=this.map.getLayers(),l=s.getArray(),u=[];e.options?.layers&&e.options.layers.forEach(f=>{if(Al(f)){const g=s.get(f);g&&u.push(g)}else Yy(f)&&f<l.length&&u.push(l[f])}),u.length===0&&u.push(new oi({source:new Fy}));const c=this.MapView.getProjection(),h=new C5({layers:u,minZoom:1,maxZoom:12,rotation:!0,align:"right",projection:c});e.options?.align&&h.setPosition(e.options?.align),this.addControlExt(n,h);break;case"scale":const d=new M5;this.addControlExt(n,d);break;case"scaleline":const p=new P5;this.addControlExt(n,p)}}addDefaultInteraction(e){if(e.key==="FishEyeClip"){const i=this.map.getLayers(),n=i.getArray(),r=e.options.radius??100,o=[];e.options?.layers&&e.options.layers.forEach(s=>{if(Al(s)){const l=i.get(s);l&&o.push(l)}else Yy(s)&&s<n.length&&o.push(n[s])});const a=new L5({radius:r,layers:o});e.options?.active===!1&&a.setActive(!1),this.addInteractionExt(e.key,a)}}dispose(){this.layerManager&&(this.layerManager.clearLayers(),this.layerManager=void 0),this.swipe&&(this.swipe.unload(),this.swipe=void 0),this.clearControlExt(),this.clearInteractionExt(),this.map&&(this.MapView.un("change:resolution",this.onResolutionChanged.bind(this)),this.map.un("moveend",this.onMoveEnd.bind(this)),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.un("moveend",this.onMapMoveEndHandler.bind(this)),this.map.dispose(),this.map=void 0)}setView(e){const i=this.map.getView();i&&i.un("change:resolution",this.onResolutionChanged.bind(this)),e&&(this.map.setView(e),e.on("change:resolution",this.onResolutionChanged.bind(this)))}get MapView(){return this.map.getView()}registerLayer(e,i){this.layerManager&&this.layerManager.registerLayer(e,i)}zoomTo(e,i){if(this.map){const n=this.map.getView(),r=n.getProjection();let o=e;i&&(o=at.getExtentFromTransform(e,i,r));const a=n.getResolutionForExtent(o,this.map.getSize());n.setResolution(a),n.setCenter($i(o))}}zoomToExtent(e){const i=this.MapView,n=i?.getProjection();if(n){const r=at.getExtentFrom4326(e,n),o=i.getResolutionForExtent(r,this.map.getSize());i.setResolution(o);const a=$i(r);i.setCenter(a)}}zoomToCenter(e,i){const n=this.MapView;if(e){const r=at.fromLonLatCoordinate(e,n.getProjection());n.setCenter(r),i!=null&&i>0&&n.setZoom(i)}}goHomeView(){this.zoomToCenter(this.defaultHomeView.center,this.defaultHomeView.zoom)}newEvtArgs(e,i=null){const n=new Cw(this.target,this.mapGroup);return n.data=e,n.target=i,n}enableMapSyncView(){this.mapEventBus.eventOn(vi.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOn(vi.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}disableMapSyncView(){this.mapEventBus.eventOff(vi.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOff(vi.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}mapSyncView(e){if(e.mapGroup===this.mapGroup&&e.mapID!=this.target){const{zoom:i,x:n,y:r}=e.data;this.isMainSync=!0,this.map.un("moveend",this.onMoveEnd.bind(this));const o=this.map.getView();o.setZoom(i),o.setCenter([n,r]),setTimeout(()=>{const a=this.newEvtArgs();this.mapEventBus.eventEmit(vi.MAP_SYNC_VIEW_END,a)},200)}}mapSyncViewEnd(e){e.mapGroup===this.mapGroup&&(e.mapID!=this.target?this.isMainSync=!1:(this.isMainSync=!1,this.map.on("moveend",this.onMoveEnd.bind(this))))}onMoveEnd(e){if(!this.isMainSync){this.isMainSync=!0;const i=e.map.getView(),n=i.getZoom(),[r,o]=i.getCenter(),a=this.newEvtArgs({zoom:n,x:r,y:o},null);this.mapEventBus.eventEmit(vi.MAP_SYNC_VIEW,a)}}onResolutionChanged(e){const i=this.map.getView();if(i){let n=i.getZoom();const r=this.newEvtArgs(n,null);this.mapEventBus.eventEmit(vi.MAP_ZOOM_CHANGED,r),this.postionStatus.zoom=`${n.toFixed(1)}`,this.refreshPostionStatus()}}swipe;get RollSwipe(){if(!this.swipe){const e=document.getElementById(this.target);this.swipe=new Bg(e,this)}return this.swipe}DefaultInteractionKeys={FishEyeClip:"FishEyeClip"};addInteractionExt(e,i){return!(!i||!e||this.InteractionsDiction.has(e))&&(this.map.addInteraction(i),this.InteractionsDiction.set(e,i),!0)}containsInteractionExt(e){return this.InteractionsDiction.has(e)}getInteractionExt(e){return this.InteractionsDiction.get(e)}removeInteractionExt(e){if(this.InteractionsDiction.has(e)){const i=this.InteractionsDiction.get(e);this.map.removeInteraction(i)}}clearInteractionExt(){this.InteractionsDiction.size>0&&(this.InteractionsDiction.forEach((e,i)=>{this.map.removeInteraction(e)}),this.InteractionsDiction.clear())}DefaultControlKeys={overview:"overview",target:"target",scale:"scale",scaleline:"scaleline"};addControlExt(e,i){return!(!i||!e||this.ControlsDiction.has(e))&&(this.map.addControl(i),this.ControlsDiction.set(e,i),!0)}containsControlExt(e){return this.ControlsDiction.has(e)}getControlExt(e){return this.ControlsDiction.get(e)}removeControlExt(e){if(this.ControlsDiction.has(e)){const i=this.ControlsDiction.get(e);this.map.removeControl(i)}}clearControlExt(){this.ControlsDiction.size>0&&(this.ControlsDiction.forEach((e,i)=>{this.map.removeControl(e)}),this.ControlsDiction.clear())}}class r2{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Sn,this.supportedMediaTypes=null}getReadOptions(e,i){if(i){let n=i.dataProjection?st(i.dataProjection):this.readProjection(e);i.extent&&n&&n.getUnits()==="tile-pixels"&&(n=st(n),n.setWorldExtent(i.extent)),i={dataProjection:n,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Xe()}readFeature(e,i){return Xe()}readFeatures(e,i){return Xe()}readGeometry(e,i){return Xe()}readProjection(e){return Xe()}writeFeature(e,i){return Xe()}writeFeatures(e,i){return Xe()}writeGeometry(e,i){return Xe()}}function dd(t,e,i){const n=i?st(i.featureProjection):null,r=i?st(i.dataProjection):null;let o=t;if(n&&r&&!Xo(n,r)){e&&(o=t.clone());const a=e?n:r,s=e?r:n;a.getUnits()==="tile-pixels"?o.transform(a,s):o.applyTransform(xs(a,s))}if(e&&i&&i.decimals!==void 0){const a=Math.pow(10,i.decimals),s=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*a)/a;return l};o===t&&(o=t.clone()),o.applyTransform(s)}return o}const mE={Point:un,LineString:tn,Polygon:Gi,MultiPoint:js,MultiLineString:oa,MultiPolygon:aa};function o2(t,e){const i=t.geometry;if(!i)return[];if(Array.isArray(i))return i.map(o=>o2({...t,geometry:o})).flat();const n=i.type==="MultiPolygon"?"Polygon":i.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const r=i.layout.length;return dd(new xi(n,n==="Polygon"?function(o,a,s){return Array.isArray(a[0])?(px(o,0,a,s)||zf(o=o.slice(),0,a,s),o):(Jm(o,0,a,s)||mh(o=o.slice(),0,a,s),o)}(i.flatCoordinates,i.ends,r):i.flatCoordinates,i.ends?.flat(),r,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function Gg(t,e){if(!t)return null;if(Array.isArray(t)){const i=t.map(n=>Gg(n,e));return new tu(i)}return dd(new mE[t.type](t.flatCoordinates,t.layout,t.ends),!1,e)}class vE extends r2{constructor(){super()}getType(){return"json"}readFeature(e,i){return this.readFeatureFromObject(_c(e),this.getReadOptions(e,i))}readFeatures(e,i){return this.readFeaturesFromObject(_c(e),this.getReadOptions(e,i))}readFeatureFromObject(e,i){return Xe()}readFeaturesFromObject(e,i){return Xe()}readGeometry(e,i){return this.readGeometryFromObject(_c(e),this.getReadOptions(e,i))}readGeometryFromObject(e,i){return Xe()}readProjection(e){return this.readProjectionFromObject(_c(e))}readProjectionFromObject(e){return Xe()}writeFeature(e,i){return JSON.stringify(this.writeFeatureObject(e,i))}writeFeatureObject(e,i){return Xe()}writeFeatures(e,i){return JSON.stringify(this.writeFeaturesObject(e,i))}writeFeaturesObject(e,i){return Xe()}writeGeometry(e,i){return JSON.stringify(this.writeGeometryObject(e,i))}writeGeometryObject(e,i){return Xe()}}function _c(t){return typeof t=="string"?JSON.parse(t)||null:t!==null?t:null}class _1 extends vE{constructor(e){e=e||{},super(),this.dataProjection=st(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=st(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,i){let n=null;n=e.type==="Feature"?e:{type:"Feature",geometry:e,properties:null};const r=Hg(n.geometry);if(this.featureClass===xi)return o2({geometry:r,id:n.id,properties:n.properties},i);const o=new Sn;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&o.setGeometryName(n.geometry_name),o.setGeometry(Gg(r,i)),"id"in n&&o.setId(n.id),n.properties&&o.setProperties(n.properties,!0),o}readFeaturesFromObject(e,i){let n=null;if(e.type==="FeatureCollection"){n=[];const r=e.features;for(let o=0,a=r.length;o<a;++o){const s=this.readFeatureFromObject(r[o],i);s&&n.push(s)}}else n=[this.readFeatureFromObject(e,i)];return n.flat()}readGeometryFromObject(e,i){return function(n,r){const o=Hg(n);return Gg(o,r)}(e,i)}readProjectionFromObject(e){const i=e.crs;let n;if(i)if(i.type=="name")n=st(i.properties.name);else{if(i.type!=="EPSG")throw new Error("Unknown SRS type");n=st("EPSG:"+i.properties.code)}else n=this.dataProjection;return n}writeFeatureObject(e,i){i=this.adaptOptions(i);const n={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(n.id=r),!e.hasProperties())return n;const o=e.getProperties(),a=e.getGeometry();return a&&(n.geometry=Wg(a,i),delete o[e.getGeometryName()]),ro(o)||(n.properties=o),n}writeFeaturesObject(e,i){i=this.adaptOptions(i);const n=[];for(let r=0,o=e.length;r<o;++r)n.push(this.writeFeatureObject(e[r],i));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,i){return Wg(e,this.adaptOptions(i))}}function Hg(t,e){if(!t)return null;let i;switch(t.type){case"Point":i=function(n){const r=n.coordinates;return{type:"Point",flatCoordinates:r,layout:To(r.length)}}(t);break;case"LineString":i=function(n){const r=n.coordinates,o=r.flat();return{type:"LineString",flatCoordinates:o,ends:[o.length],layout:To(r[0]?.length||2)}}(t);break;case"Polygon":i=function(n){const r=n.coordinates,o=[],a=r[0]?.[0]?.length,s=Xl(o,0,r,a);return{type:"Polygon",flatCoordinates:o,ends:s,layout:To(a)}}(t);break;case"MultiPoint":i=function(n){const r=n.coordinates;return{type:"MultiPoint",flatCoordinates:r.flat(),layout:To(r[0]?.length||2)}}(t);break;case"MultiLineString":i=function(n){const r=n.coordinates,o=r[0]?.[0]?.length||2,a=[],s=Xl(a,0,r,o);return{type:"MultiLineString",flatCoordinates:a,ends:s,layout:To(o)}}(t);break;case"MultiPolygon":i=function(n){const r=n.coordinates,o=[],a=r[0]?.[0]?.[0].length||2,s=ox(o,0,r,a);return{type:"MultiPolygon",flatCoordinates:o,ends:s,layout:To(a)}}(t);break;case"GeometryCollection":i=function(n){return n.geometries.map(function(r){return Hg(r)})}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return i}function Wg(t,e){const i=(t=dd(t,!0,e)).getType();let n;switch(i){case"Point":n=function(r){return{type:"Point",coordinates:r.getCoordinates()}}(t);break;case"LineString":n=function(r){return{type:"LineString",coordinates:r.getCoordinates()}}(t);break;case"Polygon":n=function(r,o){let a;return o&&(a=o.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(a)}}(t,e);break;case"MultiPoint":n=function(r){return{type:"MultiPoint",coordinates:r.getCoordinates()}}(t);break;case"MultiLineString":n=function(r){return{type:"MultiLineString",coordinates:r.getCoordinates()}}(t);break;case"MultiPolygon":n=function(r,o){let a;return o&&(a=o.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(a)}}(t,e);break;case"GeometryCollection":n=function(r,o){return o=Object.assign({},o),delete o.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(a){return Wg(a,o)})}}(t,e);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}const Ug=4294967296,b1=1/Ug,x1=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class yE{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,i,n=this.length){for(;this.pos<n;){const r=this.readVarint(),o=r>>3,a=this.pos;this.type=7&r,e(o,i,this),this.pos===a&&this.skip(r)}return i}readMessage(e,i){return this.readFields(e,i,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Ug;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Ug;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const i=this.buf;let n,r;return r=i[this.pos++],n=127&r,r<128?n:(r=i[this.pos++],n|=(127&r)<<7,r<128?n:(r=i[this.pos++],n|=(127&r)<<14,r<128?n:(r=i[this.pos++],n|=(127&r)<<21,r<128?n:(r=i[this.pos],n|=(15&r)<<28,function(o,a,s){const l=s.buf;let u,c;if(c=l[s.pos++],u=(112&c)>>4,c<128||(c=l[s.pos++],u|=(127&c)<<3,c<128)||(c=l[s.pos++],u|=(127&c)<<10,c<128)||(c=l[s.pos++],u|=(127&c)<<17,c<128)||(c=l[s.pos++],u|=(127&c)<<24,c<128)||(c=l[s.pos++],u|=(1&c)<<31,c<128))return _E(o,u,a);throw new Error("Expected varint not more than 10 bytes")}(n,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&x1?x1.decode(this.buf.subarray(i,e)):function(n,r,o){let a="",s=r;for(;s<o;){const l=n[s];let u,c,h,d=null,p=l>239?4:l>223?3:l>191?2:1;if(s+p>o)break;p===1?l<128&&(d=l):p===2?(u=n[s+1],(192&u)==128&&(d=(31&l)<<6|63&u,d<=127&&(d=null))):p===3?(u=n[s+1],c=n[s+2],(192&u)==128&&(192&c)==128&&(d=(15&l)<<12|(63&u)<<6|63&c,(d<=2047||d>=55296&&d<=57343)&&(d=null))):p===4&&(u=n[s+1],c=n[s+2],h=n[s+3],(192&u)==128&&(192&c)==128&&(192&h)==128&&(d=(15&l)<<18|(63&u)<<12|(63&c)<<6|63&h,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,p=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|1023&d),a+=String.fromCharCode(d),s+=p}return a}(this.buf,i,e)}readBytes(){const e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i}readPackedVarint(e=[],i){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(i));return e}readPackedSVarint(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const i=7&e;if(i===0)for(;this.buf[this.pos++]>127;);else if(i===2)this.pos=this.readVarint()+this.pos;else if(i===5)this.pos+=4;else{if(i!==1)throw new Error(`Unimplemented type: ${i}`);this.pos+=8}}writeTag(e,i){this.writeVarint(e<<3|i)}realloc(e){let i=this.length||16;for(;i<this.pos+e;)i*=2;if(i!==this.length){const n=new Uint8Array(i);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*b1),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*b1),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?function(i,n){let r,o;if(i>=0?(r=i%4294967296|0,o=i/4294967296|0):(r=~(-i%4294967296),o=~(-i/4294967296),4294967295^r?r=r+1|0:(r=0,o=o+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(a,s,l){l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos++]=127&a|128,a>>>=7,l.buf[l.pos]=127&a}(r,0,n),function(a,s){const l=(7&a)<<4;s.buf[s.pos++]|=l|((a>>>=3)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a|((a>>>=7)?128:0),a&&(s.buf[s.pos++]=127&a)))))}(o,n)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const i=this.pos;this.pos=function(r,o,a){for(let s,l,u=0;u<o.length;u++){if(s=o.charCodeAt(u),s>55295&&s<57344){if(!l){s>56319||u+1===o.length?(r[a++]=239,r[a++]=191,r[a++]=189):l=s;continue}if(s<56320){r[a++]=239,r[a++]=191,r[a++]=189,l=s;continue}s=l-55296<<10|s-56320|65536,l=null}else l&&(r[a++]=239,r[a++]=191,r[a++]=189,l=null);s<128?r[a++]=s:(s<2048?r[a++]=s>>6|192:(s<65536?r[a++]=s>>12|224:(r[a++]=s>>18|240,r[a++]=s>>12&63|128),r[a++]=s>>6&63|128),r[a++]=63&s|128)}return a}(this.buf,e,this.pos);const n=this.pos-i;n>=128&&w1(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const i=e.length;this.writeVarint(i),this.realloc(i);for(let n=0;n<i;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,i){this.pos++;const n=this.pos;e(i,this);const r=this.pos-n;r>=128&&w1(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeMessage(e,i,n){this.writeTag(e,2),this.writeRawMessage(i,n)}writePackedVarint(e,i){i.length&&this.writeMessage(e,bE,i)}writePackedSVarint(e,i){i.length&&this.writeMessage(e,xE,i)}writePackedBoolean(e,i){i.length&&this.writeMessage(e,CE,i)}writePackedFloat(e,i){i.length&&this.writeMessage(e,wE,i)}writePackedDouble(e,i){i.length&&this.writeMessage(e,SE,i)}writePackedFixed32(e,i){i.length&&this.writeMessage(e,ME,i)}writePackedSFixed32(e,i){i.length&&this.writeMessage(e,kE,i)}writePackedFixed64(e,i){i.length&&this.writeMessage(e,TE,i)}writePackedSFixed64(e,i){i.length&&this.writeMessage(e,EE,i)}writeBytesField(e,i){this.writeTag(e,2),this.writeBytes(i)}writeFixed32Field(e,i){this.writeTag(e,5),this.writeFixed32(i)}writeSFixed32Field(e,i){this.writeTag(e,5),this.writeSFixed32(i)}writeFixed64Field(e,i){this.writeTag(e,1),this.writeFixed64(i)}writeSFixed64Field(e,i){this.writeTag(e,1),this.writeSFixed64(i)}writeVarintField(e,i){this.writeTag(e,0),this.writeVarint(i)}writeSVarintField(e,i){this.writeTag(e,0),this.writeSVarint(i)}writeStringField(e,i){this.writeTag(e,2),this.writeString(i)}writeFloatField(e,i){this.writeTag(e,5),this.writeFloat(i)}writeDoubleField(e,i){this.writeTag(e,1),this.writeDouble(i)}writeBooleanField(e,i){this.writeVarintField(e,+i)}}function _E(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function w1(t,e,i){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(let r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function bE(t,e){for(let i=0;i<t.length;i++)e.writeVarint(t[i])}function xE(t,e){for(let i=0;i<t.length;i++)e.writeSVarint(t[i])}function wE(t,e){for(let i=0;i<t.length;i++)e.writeFloat(t[i])}function SE(t,e){for(let i=0;i<t.length;i++)e.writeDouble(t[i])}function CE(t,e){for(let i=0;i<t.length;i++)e.writeBoolean(t[i])}function ME(t,e){for(let i=0;i<t.length;i++)e.writeFixed32(t[i])}function kE(t,e){for(let i=0;i<t.length;i++)e.writeSFixed32(t[i])}function TE(t,e){for(let i=0;i<t.length;i++)e.writeFixed64(t[i])}function EE(t,e){for(let i=0;i<t.length;i++)e.writeSFixed64(t[i])}class Qc extends r2{constructor(e){super(),e=e||{},this.dataProjection=new gr({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:xi,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,i,n,r){e.pos=i.geometry;const o=e.readVarint()+e.pos;let a=1,s=0,l=0,u=0,c=0,h=0;for(;e.pos<o;){if(!s){const d=e.readVarint();a=7&d,s=d>>3}if(s--,a===1||a===2)l+=e.readSVarint(),u+=e.readSVarint(),a===1&&c>h&&(r.push(c),h=c),n.push(l,u),c+=2;else{if(a!==7)throw new Error("Invalid command found in the PBF");c>h&&(n.push(n[h],n[h+1]),c+=2)}}c>h&&(r.push(c),h=c)}createFeature_(e,i,n){const r=i.type;if(r===0)return null;let o;const a=i.properties;let s;this.idProperty_?(s=a[this.idProperty_],delete a[this.idProperty_]):s=i.id,a[this.layerName_]=i.layer.name;const l=[],u=[];this.readRawGeometry_(e,i,l,u);const c=function(h,d){let p;return h===1?p=d===1?"Point":"MultiPoint":h===2?p=d===1?"LineString":"MultiLineString":h===3&&(p="Polygon"),p}(r,u.length);if(this.featureClass===xi)o=new this.featureClass(c,l,u,2,a,s),o.transform(n.dataProjection);else{let h;if(c=="Polygon"){const p=fx(l,u);h=p.length>1?new aa(l,"XY",p):new Gi(l,"XY",u)}else h=c==="Point"?new un(l,"XY"):c==="LineString"?new tn(l,"XY"):c==="MultiPoint"?new js(l,"XY"):c==="MultiLineString"?new oa(l,"XY",u):null;o=new this.featureClass,this.geometryName_&&o.setGeometryName(this.geometryName_);const d=dd(h,!1,n);o.setGeometry(d),s!==void 0&&o.setId(s),o.setProperties(a,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,i){const n=this.layers_,r=st((i=this.adaptOptions(i)).dataProjection);r.setWorldExtent(i.extent),i.dataProjection=r;const o=new yE(e),a=o.readFields(LE,{}),s=[];for(const l in a){if(n&&!n.includes(l))continue;const u=a[l],c=u?[0,0,u.extent,u.extent]:null;r.setExtent(c);for(let h=0,d=u.length;h<d;++h){const p=qE(o,u,h),f=this.createFeature_(o,p,i);f!==null&&s.push(f)}}return s}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function LE(t,e,i){if(t===3){const n={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(IE,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function IE(t,e,i){if(t===15)e.version=i.readVarint();else if(t===1)e.name=i.readString();else if(t===5)e.extent=i.readVarint();else if(t===2)e.features.push(i.pos);else if(t===3)e.keys.push(i.readString());else if(t===4){let n=null;const r=i.readVarint()+i.pos;for(;i.pos<r;)n=(t=i.readVarint()>>3)===1?i.readString():t===2?i.readFloat():t===3?i.readDouble():t===4?i.readVarint64():t===5?i.readVarint():t===6?i.readSVarint():t===7?i.readBoolean():null;e.values.push(n)}}function PE(t,e,i){if(t==1)e.id=i.readVarint();else if(t==2){const n=i.readVarint()+i.pos;for(;i.pos<n;){const r=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[r]=o}}else t==3?e.type=i.readVarint():t==4&&(e.geometry=i.pos)}function qE(t,e,i){t.pos=e.features[i];const n=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(PE,r,n),r}const RE={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},S1={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class FE extends nw{constructor(e,i){super(e,i),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=[1,0,0,1,0,0],this.tileClipContexts_=null}drawTile(e,i,n,r,o,a,s,l){this.updateExecutorGroup_(e,i.pixelRatio,i.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,i),super.drawTile(e,i,n,r,o,a,s,l)}getTile(e,i,n,r){const o=this.getOrCreateTile(e,i,n,r);if(!o)return null;const a=r.viewState.resolution,s=r.viewHints;return(s[Zi]||s[En])&&o.wantedResolution||(o.wantedResolution=a),o}prepareFrame(e){const i=this.getLayer().getRevision();return this.renderedLayerRevision_!==i&&(this.renderedLayerRevision_=i,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,i,n){const r=this.getLayer(),o=r.getRevision(),a=r.getRenderOrder()||null,s=e.wantedResolution,l=e.getReplayState(r);if(!l.dirty&&l.renderedResolution===s&&l.renderedRevision==o&&l.renderedRenderOrder==a)return;const u=r.getSource(),c=!!r.getDeclutter(),h=u.getTileGrid(),d=u.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),p=u.getSourceTiles(i,n,e),f=et(r);delete e.hitDetectionImageData[f],e.executorGroups[f]=[],l.dirty=!1;for(let g=0,y=p.length;g<y;++g){const _=p[g];if(_.getState()!=jt)continue;const b=_.tileCoord,m=h.getTileCoordExtent(b),v=Pi(d,m),S=Zr(v,r.getRenderBuffer()*s,this.tempExtent),C=xr(m,v)?null:S,k=new qw(0,v,s,i),L=Dg(s,i),A=function(M,I){let E;const O=M.getStyleFunction()||r.getStyleFunction();if(O&&(E=O(M,s)),E){const V=this.renderFeature(M,L,E,k,c,I);l.dirty=l.dirty||V}},q=_.getFeatures();a&&a!==l.renderedRenderOrder&&q.sort(a);for(let M=0,I=q.length;M<I;++M){const E=q[M];C&&!Ut(C,E.getGeometry().getExtent())||A.call(this,E,M)}const P=k.finish(),T=r.getRenderMode()!=="vector"&&c&&p.length===1?null:v,R=new Rw(T,s,i,u.getOverlaps(),P,r.getRenderBuffer(),!0);e.executorGroups[f].push(R)}l.renderedRevision=o,l.renderedRenderOrder=a,l.renderedResolution=s}forEachFeatureAtCoordinate(e,i,n,r,o){const a=i.viewState.resolution,s=i.viewState.rotation;n=n??0;const l=this.getLayer(),u=l.getSource().getTileGridForProjection(i.viewState.projection),c=hh([e]);Zr(c,a*n,c);const h={},d=function(g,y,_){let b=g.getId();b===void 0&&(b=et(g));const m=h[b];if(m){if(m!==!0&&_<m.distanceSq){if(_===0)return h[b]=!0,o.splice(o.lastIndexOf(m),1),r(g,l,y);m.geometry=y,m.distanceSq=_}}else{if(_===0)return h[b]=!0,r(g,l,y);o.push(h[b]={feature:g,layer:l,geometry:y,distanceSq:_,callback:r})}},p=this.renderedTiles;let f;for(let g=0,y=p.length;!f&&g<y;++g){const _=p[g];if(!Ut(u.getTileCoordExtent(_.wrappedTileCoord),c))continue;const b=et(l),m=[_.executorGroups[b]],v=l.getDeclutter();m.some(S=>{const C=v?i.declutter[v].all().map(k=>k.value):null;for(let k=0,L=S.length;k<L;++k)if(f=S[k].forEachFeatureAtCoordinate(e,a,s,n,d,C),f)return!0})}return f}getFeatures(e){return new Promise((i,n)=>{const r=this.getLayer(),o=et(r),a=r.getSource(),s=this.renderedProjection,l=s.getExtent(),u=this.renderedResolution,c=a.getTileGridForProjection(s),h=ti(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(h,u);let p;for(let b=0,m=this.renderedTiles.length;b<m;++b)if(d.toString()===this.renderedTiles[b].tileCoord.toString()){if(p=this.renderedTiles[b],p.getState()===jt){const v=c.getTileCoordExtent(p.tileCoord);a.getWrapX()&&s.canWrapX()&&!kn(l,v)&&zm(h,s);break}p=void 0}if(!p||p.loadingSourceTiles>0)return void i([]);const f=er(c.getTileCoordExtent(p.wrappedTileCoord)),g=[(h[0]-f[0])/u,(f[1]-h[1])/u],y=p.getSourceTiles().reduce(function(b,m){return b.concat(m.getFeatures())},[]);let _=p.hitDetectionImageData[o];if(!_){const b=pi(c.getTileSize(c.getZForResolution(u,a.zDirection))),m=this.renderedRotation_;_=Aw(b,[this.getRenderTransform(c.getTileCoordCenter(p.wrappedTileCoord),u,0,Qi,b[0]*Qi,b[1]*Qi,0)],y,r.getStyleFunction(),c.getTileCoordExtent(p.wrappedTileCoord),p.getReplayState(r).renderedResolution,m),p.hitDetectionImageData[o]=_}i(Ow(g,y,_))})}getFeaturesInExtent(e){const i=[],n=this.getTileCache();if(n.getCount()===0)return i;const r=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=r.getZForResolution(this.renderedResolution),a={};return n.forEach(s=>{if(s.tileCoord[0]!==o||s.getState()!==jt)return;const l=s.getSourceTiles();for(let u=0,c=l.length;u<c;++u){const h=l[u],d=h.getKey();if(d in a)continue;a[d]=!0;const p=h.tileCoord;if(Ut(e,r.getTileCoordExtent(p))){const f=h.getFeatures();if(f)for(let g=0,y=f.length;g<y;++g){const _=f[g],b=_.getGeometry();Ut(e,b.getExtent())&&i.push(_)}}}}),i}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,i){const n=this.context,r=n.globalAlpha;n.globalAlpha=i.opacity;const o=e.viewHints,a=!(o[Zi]||o[En]),s=this.renderedTiles;for(let l=0,u=s.length;l<u;++l){const c=s[l],h=c.executorGroups[et(this.getLayer())],d=this.getLayer().getDeclutter();if(h)for(let p=h.length-1;p>=0;--p)h[p].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(c,e),e.viewState.rotation,a,Eh,d?e.declutter[d]:void 0)}n.globalAlpha=r}renderDeferredInternal(e){const i=this.renderedTiles.reduce((o,a,s)=>(a.executorGroups[et(this.getLayer())].forEach(l=>o.push({executorGroup:l,index:s})),o),[]),n=i.map(({executorGroup:o})=>o.getDeferredZIndexContexts()),r={};for(let o=0,a=i.length;o<a;++o){const s=i[o].executorGroup.getDeferredZIndexContexts();for(const l in s)r[l]=!0}Object.keys(r).sort(Hn).map(Number).forEach(o=>{n.forEach((a,s)=>{a[o]&&(a[o].forEach(l=>{const{executorGroup:u,index:c}=i[s],h=u.getRenderedContext(),d=h.globalAlpha;h.globalAlpha=this.renderedOpacity_;const p=this.tileClipContexts_[c];p&&p.draw(h),l.draw(h),p&&h.restore(),h.globalAlpha=d,l.clear()}),a[o].length=0)})})}getTileRenderTransform(e,i){const n=i.pixelRatio,r=i.viewState,o=r.center,a=r.resolution,s=r.rotation,l=i.size,u=Math.round(l[0]*n),c=Math.round(l[1]*n),h=this.getLayer().getSource().getTileGridForProjection(i.viewState.projection),d=e.tileCoord,p=h.getTileCoordExtent(e.wrappedTileCoord),f=h.getTileCoordExtent(d,this.tempExtent)[0]-p[0];return fh($d(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(o,a,s,n,u,c,f))}postRender(e,i){const n=i.viewHints,r=!(n[Zi]||n[En]);this.renderedPixelToCoordinateTransform_=i.pixelToCoordinateTransform.slice(),this.renderedRotation_=i.viewState.rotation,this.renderedOpacity_=i.layerStatesArray[i.layerIndex].opacity;const o=this.getLayer(),a=o.getRenderMode(),s=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=o.getDeclutter(),u=l?S1[a].filter(m=>!Eh.includes(m)):S1[a],c=i.viewState,h=c.rotation,d=o.getSource(),p=d.getTileGridForProjection(c.projection).getZForResolution(c.resolution,d.zDirection),f=this.renderedTiles,g=[],y=[],_=[];let b=!0;for(let m=f.length-1;m>=0;--m){const v=f[m];b=b&&!v.getReplayState(o).dirty;const S=v.executorGroups[et(o)].filter(T=>T.hasExecutors(u));if(S.length===0)continue;const C=this.getTileRenderTransform(v,i),k=v.tileCoord[0];let L=!1;const A=S[0].getClipCoords(C);let q,P=e;if(A){q=new pv,P=q.getContext();for(let T=0,R=g.length;T<R;++T)if(p!==k&&k<y[T]){const M=g[T];Ut([A[0],A[3],A[4],A[7]],[M[0],M[3],M[4],M[7]])&&(L||(P.save(),L=!0),P.beginPath(),P.moveTo(A[0],A[1]),P.lineTo(A[2],A[3]),P.lineTo(A[4],A[5]),P.lineTo(A[6],A[7]),P.moveTo(M[6],M[7]),P.lineTo(M[4],M[5]),P.lineTo(M[2],M[3]),P.lineTo(M[0],M[1]),P.clip())}g.push(A),y.push(k)}for(let T=0,R=S.length;T<R;++T)S[T].execute(e,[e.canvas.width,e.canvas.height],C,h,r,u,i.declutter?.[l]);L&&(P===e?P.restore():_[m]=q)}e.globalAlpha=s,this.ready=b,this.tileClipContexts_=_,i.declutter||this.renderDeferredInternal(i),super.postRender(e,i)}renderFeature(e,i,n,r,o,a){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)s=Lh(r,e,n[l],i,this.boundHandleStyleImageChange_,void 0,o,a)||s;else s=Lh(r,e,n,i,this.boundHandleStyleImageChange_,void 0,o,a);return s}tileImageNeedsRender_(e){const i=this.getLayer();if(i.getRenderMode()==="vector")return!1;const n=e.getReplayState(i),r=i.getRevision(),o=e.wantedResolution;return n.renderedTileResolution!==o||n.renderedTileRevision!==r}renderTileImage_(e,i){const n=this.getLayer(),r=e.getReplayState(n),o=n.getRevision(),a=e.executorGroups[et(n)];r.renderedTileRevision=o;const s=e.wrappedTileCoord,l=s[0],u=n.getSource();let c=i.pixelRatio;const h=i.viewState.projection,d=u.getTileGridForProjection(h),p=d.getResolution(e.tileCoord[0]),f=i.pixelRatio/e.wantedResolution*p,g=d.getResolution(l),y=e.getContext();c=Math.round(Math.max(c,f/c));const _=u.getTilePixelSize(l,c,h);y.canvas.width=_[0],y.canvas.height=_[1];const b=c/f;if(b!==1){const C=K0(this.tmpTransform_);$d(C,b,b),y.setTransform.apply(y,C)}const m=d.getTileCoordExtent(s,this.tempExtent),v=f/g,S=K0(this.tmpTransform_);$d(S,v,-v),function(C,k,L){fh(C,$m(tx,1,0,0,1,k,L))}(S,-m[0],-m[3]);for(let C=0,k=a.length;C<k;++C)a[C].execute(y,[y.canvas.width*b,y.canvas.height*b],S,0,!0,RE[n.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}var C1,eo=class extends lv{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const i=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i;const n=t.renderMode||"hybrid";_t(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError===void 0||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new FE(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(bh)}getUseInterimTilesOnError(){return this.get(xh)}setPreload(t){this.set(bh,t)}setUseInterimTilesOnError(t){this.set(xh,t)}};class bq{xmap;constructor(e){this.xmap=e}addVTLayerNoBounds(e,i){const n=e?.tileSchema;if(e===void 0||n===null)throw new Error("TileJsonTileJson.GridInfo!");const r=e.prjInfo,o=r?at.getProjection(r):"EPSG:3857";n.extent=r?r.prjExtent:[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7];const a=at.createWMTSTileGrid(n),s=e.minzoom??1,l=e.maxzoom??24,u=new ql({format:new Qc,projection:o,tileGrid:a,minZoom:s,maxZoom:l,urls:e.tiles}),c=e.id??hr(),h=e.name,d=new eo({source:u,properties:{lyrID:c,lyrName:h,lyrType:"mvt",lyrGroup:"",bounds:e.bounds,center:e.center}});this.xmap.map.addLayer(d);const p={id:c,name:h,alias:i,minZoom:s,maxZoom:l,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(d,p),d}addVTLayer(e,i){const n=e?.tileSchema;if(e===void 0||n===null)throw new Error("TileJsonTileJson.GridInfo!");const r=e.prjInfo,o=r?at.getProjection(r):"EPSG:3857";n.extent=r?r.prjExtent:[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7];const a=at.createWMTSTileGrid(n),s=at.getExtentFrom4326(e.bounds,o),l=e.minzoom,u=e.maxzoom,c=new ql({format:new Qc,projection:o,tileGrid:a,minZoom:l,maxZoom:u,extent:s,urls:e.tiles}),h=e.id??hr(),d=e.name,p=new eo({source:c,properties:{lyrID:h,lyrName:d,lyrType:"mvt",lyrGroup:"",bounds:e.bounds,center:e.center}});this.xmap.map.addLayer(p);const f={id:h,name:d,alias:i,minZoom:l,maxZoom:u,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(p,f),p}addVTLayerW(e,i,n,r){const o=new ql({format:new Qc,projection:"EPSG:3857",minZoom:n,maxZoom:r,url:e}),a=hr(),s=i,l=new eo({source:o,properties:{lyrID:a,lyrName:s,lyrType:"mvt",lyrGroup:""}});this.xmap.map.addLayer(l);const u={id:a,name:s,minZoom:n,maxZoom:r,visible:!0,opacity:1,type:"mvt"};return this.xmap.registerLayer(l,u),l}}(function(t){t[t.grid=0]="grid",t[t.mvt=1]="mvt",t[t.symbol=2]="symbol",t[t.vector=3]="vector",t[t.json=4]="json"})(C1||(C1={}));var Xg=Cr({name:"drawtool",props:{xmap:Bs},components:{Icon:Nr},setup(t){let e,i=t.xmap;return Rt(()=>{}),se(()=>t.xmap,n=>{i=n}),{changeType:function(n){!e&&i&&(e=new A5(i));const r=n;e?.changeDrawType(r)},clearPic:function(){e?.clearLastDraw()},clearboard:function(){e?.clearboard(),e?.clearInteraction()}}}});const AE={class:"tool-container drawToolList"},OE={title:""},zE={title:""},DE={title:""},jE={title:""},BE={title:""},NE={title:""};Xg.render=function(t,e,i,n,r,o){const a=Mn("Icon");return ii(),en("ul",AE,[Ve("li",{onClick:e[0]||(e[0]=s=>t.changeType("Point"))},[Ve("span",OE,[mt(a,{icon:"gis:point"})])]),Ve("li",{onClick:e[1]||(e[1]=s=>t.changeType("LineString"))},[Ve("span",zE,[mt(a,{icon:"gis:polyline"})])]),Ve("li",{onClick:e[2]||(e[2]=s=>t.changeType("Polygon"))},[Ve("span",DE,[mt(a,{icon:"gis:polygon-o"})])]),Ve("li",{onClick:e[3]||(e[3]=s=>t.changeType("Hand"))},[Ve("span",jE,[mt(a,{icon:"gis:route-start"})])]),Ve("li",{onClick:e[4]||(e[4]=(...s)=>t.clearPic&&t.clearPic(...s))},[Ve("span",BE,[mt(a,{icon:"ant-design:undo-outlined"})])]),Ve("li",{onClick:e[5]||(e[5]=(...s)=>t.clearboard&&t.clearboard(...s))},[Ve("span",NE,[mt(a,{icon:"ant-design:clear-outlined"})])])])},Xg.__file="src/components/MapTools/drawToolBar.vue";var Yg=Cr({name:"MeasureToolBar",props:{xmap:Bs},components:{Icon:Nr},setup(t){let e,i=t.xmap;return se(()=>t.xmap,n=>{i=n}),{measureLine:()=>{!e&&i?.map&&(e=new Xy(i.map)),e?.addInteraction("line")},measureArea:()=>{!e&&i?.map&&(e=new Xy(i.map)),e?.addInteraction("area")},unloadMeasure:()=>{e&&e.removeInteraction()}}}});const VE={class:"tool-container measureToolList"},$E={title:""},GE={title:""},HE={title:""};Yg.render=function(t,e,i,n,r,o){const a=Mn("Icon");return ii(),en("ul",VE,[Ve("li",{onClick:e[0]||(e[0]=(...s)=>t.measureLine&&t.measureLine(...s))},[Ve("span",$E,[mt(a,{icon:"gis:measure-line"})])]),Ve("li",{onClick:e[1]||(e[1]=(...s)=>t.measureArea&&t.measureArea(...s))},[Ve("span",GE,[mt(a,{icon:"gis:measure-area"})])]),Ve("li",{onClick:e[2]||(e[2]=(...s)=>t.unloadMeasure&&t.unloadMeasure(...s))},[Ve("span",HE,[mt(a,{icon:"ant-design:clear-outlined"})])])])},Yg.__file="src/components/MapTools/measureToolBar.vue";const zi=Ro({layerTree:!1,dataPanel:!0,location:!1,drawTool:!1,measureTool:!1,swipeTool:!1,otherTool:!1});function li(t,e,i,n){return Object.defineProperty(t,e,{get:i,set:n,enumerable:!0}),t}function a2(t,e){for(const i in e)li(t,i,e[i]);return t}var Kg,hn=$(!1),M1="ontouchstart"in window||window.navigator.maxTouchPoints>0,k1=navigator.userAgent||navigator.vendor||window.opera,nt={userAgent:k1,is:function(t){const e=t.toLowerCase(),i=function(a){return/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(silk)/.exec(a)||/(android)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||/(playbook)/.exec(a)||/(bb)/.exec(a)||/(blackberry)/.exec(a)||[]}(e),n=function(a,s){const l=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(vivaldi)[\/]([\w.]+)/.exec(a)||/(chrome|crios)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(a)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(a)||/(firefox|fxios)[\/]([\w.]+)/.exec(a)||/(webkit)[\/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(a)||[];return{browser:l[5]||l[3]||l[1]||"",version:l[4]||l[2]||"0",platform:s[0]||""}}(e,i),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};n.browser&&(r[n.browser]=!0,r.version=n.version,r.versionNumber=parseInt(n.version,10)),n.platform&&(r[n.platform]=!0);const o=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(o===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,n.browser="edge"):r.crios?(r.chrome=!0,n.browser="chrome"):r.fxios&&(r.firefox=!0,n.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(n.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&o!==!0)&&(r.webkit=!0),r.opr&&(n.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(n.browser="blackberry",r.blackberry=!0):r.playbook?(n.browser="playbook",r.playbook=!0):r.android?(n.browser="android",r.android=!0):r.kindle?(n.browser="kindle",r.kindle=!0):r.silk&&(n.browser="silk",r.silk=!0)),r.name=n.browser,r.platform=n.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):window._cordovaNative===void 0&&window.cordova===void 0||(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),hn.value===!0&&(Kg={is:{...r}}),M1===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:a,[a]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}(k1),has:{touch:M1},within:{iframe:window.self!==window.top}},Zg={install(t){const{$q:e}=t;hn.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,nt),hn.value=!1}),e.platform=Ro(this)):e.platform=this}};{let t;li(nt.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(Zg,nt),hn.value===!0&&(Object.assign(Zg,Kg,{has:{touch:!1,webStorage:!1},within:{iframe:!1}}),Kg=null)}var WE=Zg;function le(t){return Rb(Cr(t))}function In(t){return Rb(t)}var fo=(t,e)=>{const i=Ro(t);for(const n in t)li(e,n,()=>i[n],r=>{i[n]=r});return e},Pt={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Pt,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function ni(){}function pd(t){return t.button===0}function qi(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function Nt(t){t.stopPropagation()}function ui(t){t.cancelable!==!1&&t.preventDefault()}function Ke(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function as(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const i=e===!0?n=>{n.__dragPrevented=!0,n.addEventListener("dragstart",ui,Pt.notPassiveCapture)}:n=>{delete n.__dragPrevented,n.removeEventListener("dragstart",ui,Pt.notPassiveCapture)};t.querySelectorAll("a, img").forEach(i)}function Wt(t,e,i){const n=`__q_${e}_evt`;t[n]=t[n]!==void 0?t[n].concat(i):i,i.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Pt[r[3]])})}function Ci(t,e){const i=`__q_${e}_evt`;t[i]!==void 0&&(t[i].forEach(n=>{n[0].removeEventListener(n[1],t[n[2]],Pt[n[3]])}),t[i]=void 0)}function Ns(t,e=250,i){let n=null;function r(){const o=arguments;n!==null&&clearTimeout(n),n=setTimeout(()=>{n=null,t.apply(this,o)},e)}return r.cancel=()=>{n!==null&&clearTimeout(n)},r}var Tp=["sm","md","lg","xl"],{passive:T1}=Pt;fo({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:ni,setDebounce:ni,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0)return void(t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0)));const{visualViewport:i}=window,n=i||window,r=document.scrollingElement||document.documentElement,o=i===void 0||nt.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[i.width*i.scale+window.innerWidth-r.clientWidth,i.height*i.scale+window.innerHeight-r.clientHeight],a=t.config.screen!==void 0&&t.config.screen.bodyClasses===!0;this.__update=h=>{const[d,p]=o();if(p!==this.height&&(this.height=p),d!==this.width)this.width=d;else if(h!==!0)return;let f=this.sizes;this.gt.xs=d>=f.sm,this.gt.sm=d>=f.md,this.gt.md=d>=f.lg,this.gt.lg=d>=f.xl,this.lt.sm=d<f.sm,this.lt.md=d<f.md,this.lt.lg=d<f.lg,this.lt.xl=d<f.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,f=(this.xs===!0?"xs":this.sm===!0&&"sm")||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",f!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${f}`)),this.name=f)};let s,l={},u=16;this.setSizes=h=>{Tp.forEach(d=>{h[d]!==void 0&&(l[d]=h[d])})},this.setDebounce=h=>{u=h};const c=()=>{const h=getComputedStyle(document.body);h.getPropertyValue("--q-size-sm")&&Tp.forEach(d=>{this.sizes[d]=parseInt(h.getPropertyValue(`--q-size-${d}`),10)}),this.setSizes=d=>{Tp.forEach(p=>{d[p]&&(this.sizes[p]=d[p])}),this.__update(!0)},this.setDebounce=d=>{s!==void 0&&n.removeEventListener("resize",s,T1),s=d>0?Ns(this.__update,d):this.__update,n.addEventListener("resize",s,T1)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};hn.value===!0?e.push(c):c()}});var ki=fo({isActive:!1,mode:!1},{__media:void 0,set(t){ki.mode=t,t==="auto"?(ki.__media===void 0&&(ki.__media=window.matchMedia("(prefers-color-scheme: dark)"),ki.__updateMedia=()=>{ki.set("auto")},ki.__media.addListener(ki.__updateMedia)),t=ki.__media.matches):ki.__media!==void 0&&(ki.__media.removeListener(ki.__updateMedia),ki.__media=void 0),ki.isActive=t===!0,document.body.classList.remove("body--"+(t===!0?"light":"dark")),document.body.classList.add("body--"+(t===!0?"dark":"light"))},toggle(){ki.set(ki.isActive===!1)},install({$q:t,ssrContext:e}){const{dark:i}=t.config;t.dark=this,this.__installed!==!0&&this.set(i!==void 0&&i)}});function la(t){return t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function dn(t,e){return la(t)!==!0&&[].concat(e).includes(t.keyCode)}var Qg={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,i)=>t+"-"+e+" of "+i,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function E1(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,i)=>i===0?e.toLowerCase():i>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}var Io=fo({__qLang:{}},{getLocale:E1,set(t=Qg,e){const i={...t,rtl:t.rtl===!0,getLocale:E1};if(i.set=Io.set,Io.__langConfig===void 0||Io.__langConfig.noHtmlAttrs!==!0){const n=document.documentElement;n.setAttribute("dir",i.rtl===!0?"rtl":"ltr"),n.setAttribute("lang",i.isoName)}Object.assign(Io.__qLang,i)},install({$q:t,lang:e,ssrContext:i}){t.lang=Io.__qLang,Io.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys:n=>Reflect.ownKeys(n).filter(r=>r!=="set"&&r!=="getLocale")}),this.set(e||Qg))}}),s2=Io,UE={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},L1=fo({iconMapFn:null,__qIconSet:{}},{set(t,e){const i={...t};i.set=L1.set,Object.assign(L1.__qIconSet,i)},install({$q:t,iconSet:e,ssrContext:i}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,li(t,"iconMapFn",()=>this.iconMapFn,n=>{this.iconMapFn=n}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys:n=>Reflect.ownKeys(n).filter(r=>r!=="set")}),this.set(e||UE))}}),I1="_q_t_",l2="_q_s_",ua="_q_l_",P1="_q_pc_",u2="_q_f_",c2="_q_fo_",h2="_q_tabs_",q1="_q_u_";function wt(){}var R1={};function Cn(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let i,n;if(t.constructor===Array){if(i=t.length,i!==e.length)return!1;for(n=i;n--!=0;)if(Cn(t[n],e[n])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let o=t.entries();for(n=o.next();n.done!==!0;){if(e.has(n.value[0])!==!0)return!1;n=o.next()}for(o=t.entries(),n=o.next();n.done!==!0;){if(Cn(n.value[1],e.get(n.value[0]))!==!0)return!1;n=o.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const o=t.entries();for(n=o.next();n.done!==!0;){if(e.has(n.value[0])!==!0)return!1;n=o.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(i=t.length,i!==e.length)return!1;for(n=i;n--!=0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(o=>t[o]!==void 0);if(i=r.length,i!==Object.keys(e).filter(o=>e[o]!==void 0).length)return!1;for(n=i;n--!=0;){const o=r[n];if(Cn(t[o],e[o])!==!0)return!1}return!0}return t!=t&&e!=e}function Si(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function Jg(t){return Object.prototype.toString.call(t)==="[object Date]"}function du(t){return typeof t=="number"&&isFinite(t)}function d2(t,e){const i=GC(t);i.config.globalProperties=e.config.globalProperties;const{reload:n,...r}=e._context;return Object.assign(i._context,r),i}var F1=["B","KB","MB","GB","TB","PB"];function em(t,e=1){let i=0;for(;parseInt(t,10)>=1024&&i<F1.length-1;)t/=1024,++i;return`${t.toFixed(e)}${F1[i]}`}function Et(t,e,i){return i<=e?e:Math.min(i,Math.max(e,t))}function Fh(t,e,i){if(i<=e)return e;const n=i-e+1;let r=e+(t-e)%n;return r<e&&(r=n+r),r===0?0:r}function yt(t,e=2,i="0"){if(t==null)return t;const n=""+t;return n.length>=e?n:new Array(e-n.length+1).join(i)+n}var tm=XMLHttpRequest,A1=tm.prototype.open,XE=["top","right","bottom","left"],bc=[],xc=0,YE=le({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:t=>XE.includes(t)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,hijackFilter:Function},emits:["start","stop"],setup(t,{emit:e}){const{proxy:i}=ke(),n=$(0),r=$(!1),o=$(!0);let a,s=0,l=null;const u=w(()=>`q-loading-bar q-loading-bar--${t.position}`+(t.color!==void 0?` bg-${t.color}`:"")+(o.value===!0?"":" no-transition")),c=w(()=>t.position==="top"||t.position==="bottom"),h=w(()=>c.value===!0?"height":"width"),d=w(()=>{const m=r.value,v=function({p:S,pos:C,active:k,horiz:L,reverse:A,dir:q}){let P=1,T=1;return L===!0?(A===!0&&(P=-1),C==="bottom"&&(T=-1),{transform:`translate3d(${P*(S-100)}%,${k?0:-200*T}%,0)`}):(A===!0&&(T=-1),C==="right"&&(P=-1),{transform:`translate3d(${k?0:q*P*-200}%,${T*(S-100)}%,0)`})}({p:n.value,pos:t.position,active:m,horiz:c.value,reverse:i.$q.lang.rtl===!0&&["top","bottom"].includes(t.position)?t.reverse===!1:t.reverse,dir:i.$q.lang.rtl===!0?-1:1});return v[h.value]=t.size,v.opacity=m?1:0,v}),p=w(()=>r.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"});function f(m=300){const v=a;return a=Math.max(0,m)||0,s++,s>1?(v===0&&m>0?_():l!==null&&v>0&&m<=0&&(clearTimeout(l),l=null),s):(l!==null&&clearTimeout(l),e("start"),n.value=0,l=setTimeout(()=>{l=null,o.value=!0,m>0&&_()},r._value===!0?500:1),r._value!==!0&&(r.value=!0,o.value=!1),s)}function g(m){return s>0&&(n.value=function(v,S){return typeof S!="number"&&(S=v<25?3*Math.random()+3:v<65?3*Math.random():v<85?2*Math.random():v<99?.6:0),Et(v+S,0,100)}(n.value,m)),s}function y(){if(s=Math.max(0,s-1),s>0)return s;l!==null&&(clearTimeout(l),l=null),e("stop");const m=()=>{o.value=!0,n.value=100,l=setTimeout(()=>{l=null,r.value=!1},1e3)};return n.value===0?l=setTimeout(m,1):m(),s}function _(){n.value<100&&(l=setTimeout(()=>{l=null,g(),_()},a))}let b;return Rt(()=>{var m;t.skipHijack!==!0&&(b=!0,m={start:f,stop:y,hijackFilter:w(()=>t.hijackFilter||null)},xc++,bc.push(m),xc>1||(tm.prototype.open=function(v,S){const C=[];this.addEventListener("loadstart",()=>{bc.forEach(k=>{k.hijackFilter.value!==null&&k.hijackFilter.value(S)!==!0||(k.start(),C.push(k.stop))})},{once:!0}),this.addEventListener("loadend",()=>{C.forEach(k=>{k()})},{once:!0}),A1.apply(this,arguments)}))}),ot(()=>{l!==null&&clearTimeout(l),b===!0&&function(m){bc=bc.filter(v=>v.start!==m),(xc=Math.max(0,xc-1))===0&&(tm.prototype.open=A1)}(f)}),Object.assign(i,{start:f,stop:y,increment:g}),()=>x("div",{class:u.value,style:d.value,...p.value})}}),im={xs:18,sm:24,md:32,lg:38,xl:46},Tr={size:String};function Er(t,e=im){return w(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function ze(t,e){return t!==void 0&&t()||e}function Ru(t,e){if(t!==void 0){const i=t();if(i!=null)return i.slice()}return e}function Xt(t,e){return t!==void 0?e.concat(t()):e}function Ev(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function pn(t,e,i,n,r,o){e.key=n+r;const a=x(t,e,i);return r===!0?Vi(a,o()):a}var O1="0 0 24 24",z1=t=>t,Ep=t=>`ionicons ${t}`,p2={"mdi-":t=>`mdi ${t}`,"icon-":z1,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":Ep,"ion-ios":Ep,"ion-logo":Ep,"iconfont ":z1,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`},f2={o_:"-outlined",r_:"-round",s_:"-sharp"},g2={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},KE=new RegExp("^("+Object.keys(p2).join("|")+")"),ZE=new RegExp("^("+Object.keys(f2).join("|")+")"),D1=new RegExp("^("+Object.keys(g2).join("|")+")"),QE=/^[Mm]\s?[-+]?\.?\d/,JE=/^img:/,e3=/^svguse:/,t3=/^ion-/,i3=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,gt=le({name:"QIcon",props:{...Tr,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=Er(t),r=w(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),o=w(()=>{let a,s=t.name;if(s==="none"||!s)return{none:!0};if(i.iconMapFn!==null){const c=i.iconMapFn(s);if(c!==void 0){if(c.icon===void 0)return{cls:c.cls,content:c.content!==void 0?c.content:" "};if(s=c.icon,s==="none"||!s)return{none:!0}}}if(QE.test(s)===!0){const[c,h=O1]=s.split("|");return{svg:!0,viewBox:h,nodes:c.split("&&").map(d=>{const[p,f,g]=d.split("@@");return x("path",{style:f,d:p,transform:g})})}}if(JE.test(s)===!0)return{img:!0,src:s.substring(4)};if(e3.test(s)===!0){const[c,h=O1]=s.split("|");return{svguse:!0,src:c.substring(7),viewBox:h}}let l=" ";const u=s.match(KE);if(u!==null)a=p2[u[1]](s);else if(i3.test(s)===!0)a=s;else if(t3.test(s)===!0)a=`ionicons ion-${i.platform.is.ios===!0?"ios":"md"}${s.substring(3)}`;else if(D1.test(s)===!0){a="notranslate material-symbols";const c=s.match(D1);c!==null&&(s=s.substring(6),a+=g2[c[1]]),l=s}else{a="notranslate material-icons";const c=s.match(ZE);c!==null&&(s=s.substring(2),a+=f2[c[1]]),l=s}return{cls:a,content:l}});return()=>{const a={class:r.value,style:n.value,"aria-hidden":"true",role:"presentation"};return o.value.none===!0?x(t.tag,a,ze(e.default)):o.value.img===!0?x(t.tag,a,Xt(e.default,[x("img",{src:o.value.src})])):o.value.svg===!0?x(t.tag,a,Xt(e.default,[x("svg",{viewBox:o.value.viewBox||"0 0 24 24"},o.value.nodes)])):o.value.svguse===!0?x(t.tag,a,Xt(e.default,[x("svg",{viewBox:o.value.viewBox},[x("use",{"xlink:href":o.value.src})])])):(o.value.cls!==void 0&&(a.class+=" "+o.value.cls),x(t.tag,a,Xt(e.default,[o.value.content])))}}});le({name:"QAvatar",props:{...Tr,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const i=Er(t),n=w(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=w(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const o=t.icon!==void 0?[x(gt,{name:t.icon})]:void 0;return x("div",{class:n.value,style:i.value},[x("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},Ev(e.default,o))])}}});var n3=["top","middle","bottom"];le({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:t=>n3.includes(t)}},setup(t,{slots:e}){const i=w(()=>t.align!==void 0?{verticalAlign:t.align}:null),n=w(()=>{const r=t.outline===!0&&t.color||t.textColor;return`q-badge flex inline items-center no-wrap q-badge--${t.multiLine===!0?"multi":"single"}-line`+(t.outline===!0?" q-badge--outline":t.color!==void 0?` bg-${t.color}`:"")+(r!==void 0?` text-${r}`:"")+(t.floating===!0?" q-badge--floating":"")+(t.rounded===!0?" q-badge--rounded":"")+(t.transparent===!0?" q-badge--transparent":"")});return()=>x("div",{class:n.value,style:i.value,role:"status","aria-label":t.label},Xt(e.default,t.label!==void 0?[t.label]:[]))}});var dt={dark:{type:Boolean,default:null}};function pt(t,e){return w(()=>t.dark===null?e.dark.isActive:t.dark)}le({name:"QBanner",props:{...dt,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=pt(t,i),r=w(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(n.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),o=w(()=>"q-banner__actions row items-center justify-end col-"+(t.inlineActions===!0?"auto":"all"));return()=>{const a=[x("div",{class:"q-banner__avatar col-auto row items-center self-start"},ze(e.avatar)),x("div",{class:"q-banner__content col text-body2"},ze(e.default))],s=ze(e.action);return s!==void 0&&a.push(x("div",{class:o.value},s)),x("div",{class:r.value+(t.inlineActions===!1&&s!==void 0?" q-banner--top-padding":""),role:"alert"},a)}}}),le({name:"QBar",props:{...dt,dense:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=pt(t,i),r=w(()=>`q-bar row no-wrap items-center q-bar--${t.dense===!0?"dense":"standard"}  q-bar--${n.value===!0?"dark":"light"}`);return()=>x("div",{class:r.value,role:"toolbar"},ze(e.default))}});var m2={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},r3=Object.keys(m2),Lv={align:{type:String,validator:t=>r3.includes(t)}};function Iv(t){return w(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${m2[e]}`})}function Jc(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function v2(t,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(i=>{v2(t,i)}):t.add(e)}function Pv(t){const e=new Set;return t.forEach(i=>{v2(e,i)}),Array.from(e)}function qv(t){return t.appContext.config.globalProperties.$router!==void 0}function to(t){return t.isUnmounted===!0||t.isDeactivated===!0}var o3=["",!0];function j1(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function B1(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function N1(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((i,n)=>i===e[n]):t.length===1&&t[0]===e}function a3(t,e){return Array.isArray(t)===!0?N1(t,e):Array.isArray(e)===!0?N1(e,t):t===e}le({name:"QBreadcrumbs",props:{...Lv,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:t=>["none","xs","sm","md","lg","xl"].includes(t),default:"sm"}},setup(t,{slots:e}){const i=Iv(t),n=w(()=>`flex items-center ${i.value}${t.gutter==="none"?"":` q-gutter-${t.gutter}`}`),r=w(()=>t.separatorColor?` text-${t.separatorColor}`:""),o=w(()=>` text-${t.activeColor}`);return()=>{if(e.default===void 0)return;const a=Pv(ze(e.default));if(a.length===0)return;let s=1;const l=[],u=a.filter(h=>h.type!==void 0&&h.type.name==="QBreadcrumbsEl").length,c=e.separator!==void 0?e.separator:()=>t.separator;return a.forEach(h=>{if(h.type!==void 0&&h.type.name==="QBreadcrumbsEl"){const d=s<u,p=(d===!0?"":" q-breadcrumbs--last")+((h.props!==null&&o3.includes(h.props.disable))!==!0&&d===!0?o.value:"");s++,l.push(x("div",{class:`flex items-center${p}`},[h])),d===!0&&l.push(x("div",{class:"q-breadcrumbs__separator"+r.value},c()))}else l.push(h)}),x("div",{class:"q-breadcrumbs"},[x("div",{class:n.value},l)])}}});var y2={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},Fu={...y2,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function fd({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const i=ke(),{props:n,proxy:r,emit:o}=i,a=qv(i),s=w(()=>n.disable!==!0&&n.href!==void 0),l=w(e===!0?()=>a===!0&&n.disable!==!0&&s.value!==!0&&n.to!==void 0&&n.to!==null&&n.to!=="":()=>a===!0&&s.value!==!0&&n.to!==void 0&&n.to!==null&&n.to!==""),u=w(()=>l.value===!0?b(n.to):null),c=w(()=>u.value!==null),h=w(()=>s.value===!0||c.value===!0),d=w(()=>n.type==="a"||h.value===!0?"a":n.tag||t||"div"),p=w(()=>s.value===!0?{href:n.href,target:n.target}:c.value===!0?{href:u.value.href,target:n.target}:{}),f=w(()=>{if(c.value===!1)return-1;const{matched:v}=u.value,{length:S}=v,C=v[S-1];if(C===void 0)return-1;const k=r.$route.matched;if(k.length===0)return-1;const L=k.findIndex(B1.bind(null,C));if(L!==-1)return L;const A=j1(v[S-2]);return S>1&&j1(C)===A&&k[k.length-1].path!==A?k.findIndex(B1.bind(null,v[S-2])):L}),g=w(()=>c.value===!0&&f.value!==-1&&function(v,S){for(const C in S){const k=S[C],L=v[C];if(typeof k=="string"){if(k!==L)return!1}else if(Array.isArray(L)===!1||L.length!==k.length||k.some((A,q)=>A!==L[q]))return!1}return!0}(r.$route.params,u.value.params)),y=w(()=>g.value===!0&&f.value===r.$route.matched.length-1&&function(v,S){if(Object.keys(v).length!==Object.keys(S).length)return!1;for(const C in v)if(a3(v[C],S[C])===!1)return!1;return!0}(r.$route.params,u.value.params)),_=w(()=>c.value===!0?y.value===!0?` ${n.exactActiveClass} ${n.activeClass}`:n.exact===!0?"":g.value===!0?` ${n.activeClass}`:"":"");function b(v){try{return r.$router.resolve(v)}catch{}return null}function m(v,{returnRouterError:S,to:C=n.to,replace:k=n.replace}={}){if(n.disable===!0)return v.preventDefault(),Promise.resolve(!1);if(v.metaKey||v.altKey||v.ctrlKey||v.shiftKey||v.button!==void 0&&v.button!==0||n.target==="_blank")return Promise.resolve(!1);v.preventDefault();const L=r.$router[k===!0?"replace":"push"](C);return S===!0?L:L.then(()=>{}).catch(()=>{})}return{hasRouterLink:c,hasHrefLink:s,hasLink:h,linkTag:d,resolvedLink:u,linkIsActive:g,linkIsExactActive:y,linkClass:_,linkAttrs:p,getLink:b,navigateToRouterLink:m,navigateOnClick:function(v){if(c.value===!0){const S=C=>m(v,C);o("click",v,S),v.defaultPrevented!==!0&&S()}else o("click",v)}}}le({name:"QBreadcrumbsEl",props:{...Fu,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(t,{slots:e}){const{linkTag:i,linkAttrs:n,linkClass:r,navigateOnClick:o}=fd(),a=w(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(t.disable!==!0?"q-link--focusable"+r.value:"q-breadcrumbs__el--disable"),...n.value,onClick:o})),s=w(()=>"q-breadcrumbs__el-icon"+(t.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const l=[];return t.icon!==void 0&&l.push(x(gt,{class:s.value,name:t.icon})),t.label!==void 0&&l.push(t.label),x(i.value,{...a.value},Xt(e.default,l))}}});var Gt={size:{type:[String,Number],default:"1em"},color:String};function Ht(t){return{cSize:w(()=>t.size in im?`${im[t.size]}px`:t.size),classes:w(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}var Fn=le({name:"QSpinner",props:{...Gt,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[x("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function Ah(t){if(t===window)return{top:0,left:0};const{top:e,left:i}=t.getBoundingClientRect();return{top:e,left:i}}function Ls(t){return t===window?window.innerHeight:t.getBoundingClientRect().height}function nm(t,e){const i=t.style;for(const n in e)i[n]=e[n]}function _2(t,e){if(t==null||t.contains(e)===!0)return!0;for(let i=t.nextElementSibling;i!==null;i=i.nextElementSibling)if(i.contains(e))return!0;return!1}function b2(t,e=250){let i,n=!1;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),i=t.apply(this,arguments)),i}}function V1(t,e,i,n){i.modifiers.stop===!0&&Nt(t);const r=i.modifiers.color;let o=i.modifiers.center;o=o===!0||n===!0;const a=document.createElement("span"),s=document.createElement("span"),l=qi(t),{left:u,top:c,width:h,height:d}=e.getBoundingClientRect(),p=Math.sqrt(h*h+d*d),f=p/2,g=(h-p)/2+"px",y=o?g:l.left-u-f+"px",_=(d-p)/2+"px",b=o?_:l.top-c-f+"px";s.className="q-ripple__inner",nm(s,{height:`${p}px`,width:`${p}px`,transform:`translate3d(${y},${b},0) scale3d(.2,.2,1)`,opacity:0}),a.className="q-ripple"+(r?" text-"+r:""),a.setAttribute("dir","ltr"),a.appendChild(s),e.appendChild(a);const m=()=>{a.remove(),clearTimeout(v)};i.abort.push(m);let v=setTimeout(()=>{s.classList.add("q-ripple__inner--enter"),s.style.transform=`translate3d(${g},${_},0) scale3d(1,1,1)`,s.style.opacity=.2,v=setTimeout(()=>{s.classList.remove("q-ripple__inner--enter"),s.classList.add("q-ripple__inner--leave"),s.style.opacity=0,v=setTimeout(()=>{a.remove(),i.abort.splice(i.abort.indexOf(m),1)},275)},250)},50)}function $1(t,{modifiers:e,value:i,arg:n}){const r=Object.assign({},t.cfg.ripple,e,i);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||n,keyCodes:[].concat(r.keyCodes||13)}}var gd=In({name:"ripple",beforeMount(t,e){const i=e.instance.$.appContext.config.globalProperties.$q.config||{};if(i.ripple===!1)return;const n={cfg:i,enabled:e.value!==!1,modifiers:{},abort:[],start(r){n.enabled===!0&&r.qSkipRipple!==!0&&r.type===(n.modifiers.early===!0?"pointerdown":"click")&&V1(r,t,n,r.qKeyEvent===!0)},keystart:b2(r=>{n.enabled===!0&&r.qSkipRipple!==!0&&dn(r,n.modifiers.keyCodes)===!0&&r.type==="key"+(n.modifiers.early===!0?"down":"up")&&V1(r,t,n,!0)},300)};$1(n,e),t.__qripple=n,Wt(n,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const i=t.__qripple;i!==void 0&&(i.enabled=e.value!==!1,i.enabled===!0&&Object(e.value)===e.value&&$1(i,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(i=>{i()}),Ci(e,"main"),delete t._qripple)}}),Oh={none:0,xs:4,sm:8,md:16,lg:24,xl:32},s3={xs:8,sm:10,md:14,lg:20,xl:24},l3=["button","submit","reset"],u3=/[^\s]\/[^\s]/,x2=["flat","outline","push","unelevated"];function Rv(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}function w2(t){const e=Rv(t);return e!==void 0?{[e]:!0}:{}}var Fv={...Tr,...y2,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...x2.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Lv.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},c3={...Fv,round:Boolean},{passiveCapture:rn}=Pt,Ia=null,Pa=null,qa=null,vt=le({name:"QBtn",props:{...c3,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{classes:r,style:o,innerClasses:a,attributes:s,hasLink:l,linkTag:u,navigateOnClick:c,isActionable:h}=function(M){const I=Er(M,s3),E=Iv(M),{hasRouterLink:O,hasLink:V,linkTag:B,linkAttrs:F,navigateOnClick:H}=fd({fallbackTag:"button"}),ee=w(()=>{const Z=M.fab===!1&&M.fabMini===!1?I.value:{};return M.padding!==void 0?Object.assign({},Z,{padding:M.padding.split(/\s+/).map(W=>W in Oh?Oh[W]+"px":W).join(" "),minWidth:"0",minHeight:"0"}):Z}),ne=w(()=>M.rounded===!0||M.fab===!0||M.fabMini===!0),te=w(()=>M.disable!==!0&&M.loading!==!0),N=w(()=>te.value===!0?M.tabindex||0:-1),z=w(()=>Rv(M,"standard")),j=w(()=>{const Z={tabindex:N.value};return V.value===!0?Object.assign(Z,F.value):l3.includes(M.type)===!0&&(Z.type=M.type),B.value==="a"?(M.disable===!0?Z["aria-disabled"]="true":Z.href===void 0&&(Z.role="button"),O.value!==!0&&u3.test(M.type)===!0&&(Z.type=M.type)):M.disable===!0&&(Z.disabled="",Z["aria-disabled"]="true"),M.loading===!0&&M.percentage!==void 0&&Object.assign(Z,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":M.percentage}),Z});return{classes:w(()=>{let Z;M.color!==void 0?Z=M.flat===!0||M.outline===!0?`text-${M.textColor||M.color}`:`bg-${M.color} text-${M.textColor||"white"}`:M.textColor&&(Z=`text-${M.textColor}`);const W=M.round===!0?"round":"rectangle"+(ne.value===!0?" q-btn--rounded":M.square===!0?" q-btn--square":"");return`q-btn--${z.value} q-btn--${W}`+(Z!==void 0?" "+Z:"")+(te.value===!0?" q-btn--actionable q-focusable q-hoverable":M.disable===!0?" disabled":"")+(M.fab===!0?" q-btn--fab":M.fabMini===!0?" q-btn--fab-mini":"")+(M.noCaps===!0?" q-btn--no-uppercase":"")+(M.dense===!0?" q-btn--dense":"")+(M.stretch===!0?" no-border-radius self-stretch":"")+(M.glossy===!0?" glossy":"")+(M.square?" q-btn--square":"")}),style:ee,innerClasses:w(()=>E.value+(M.stack===!0?" column":" row")+(M.noWrap===!0?" no-wrap text-no-wrap":"")+(M.loading===!0?" q-btn__content--hidden":"")),attributes:j,hasLink:V,linkTag:B,navigateOnClick:H,isActionable:te}}(t),d=$(null),p=$(null);let f,g=null,y=null;const _=w(()=>t.label!==void 0&&t.label!==null&&t.label!==""),b=w(()=>t.disable!==!0&&t.ripple!==!1&&{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),m=w(()=>({center:t.round})),v=w(()=>{const M=Math.max(0,Math.min(100,t.percentage));return M>0?{transition:"transform 0.6s",transform:`translateX(${M-100}%)`}:{}}),S=w(()=>{if(t.loading===!0)return{onMousedown:R,onTouchstart:R,onClick:R,onKeydown:R,onKeyup:R};if(h.value===!0){const M={onClick:k,onKeydown:L,onMousedown:q};return n.$q.platform.has.touch===!0&&(M[`onTouchstart${t.onTouchstart!==void 0?"":"Passive"}`]=A),M}return{onClick:Ke}}),C=w(()=>({ref:d,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:o.value,...s.value,...S.value}));function k(M){if(d.value!==null){if(M!==void 0){if(M.defaultPrevented===!0)return;const I=document.activeElement;if(t.type==="submit"&&I!==document.body&&d.value.contains(I)===!1&&I.contains(d.value)===!1){d.value.focus();const E=()=>{document.removeEventListener("keydown",Ke,!0),document.removeEventListener("keyup",E,rn),d.value!==null&&d.value.removeEventListener("blur",E,rn)};document.addEventListener("keydown",Ke,!0),document.addEventListener("keyup",E,rn),d.value.addEventListener("blur",E,rn)}}c(M)}}function L(M){d.value!==null&&(i("keydown",M),dn(M,[13,32])===!0&&Pa!==d.value&&(Pa!==null&&T(),M.defaultPrevented!==!0&&(d.value.focus(),Pa=d.value,d.value.classList.add("q-btn--active"),document.addEventListener("keyup",P,!0),d.value.addEventListener("blur",P,rn)),Ke(M)))}function A(M){d.value!==null&&(i("touchstart",M),M.defaultPrevented!==!0&&(Ia!==d.value&&(Ia!==null&&T(),Ia=d.value,g=M.target,g.addEventListener("touchcancel",P,rn),g.addEventListener("touchend",P,rn)),f=!0,y!==null&&clearTimeout(y),y=setTimeout(()=>{y=null,f=!1},200)))}function q(M){d.value!==null&&(M.qSkipRipple=f===!0,i("mousedown",M),M.defaultPrevented!==!0&&qa!==d.value&&(qa!==null&&T(),qa=d.value,d.value.classList.add("q-btn--active"),document.addEventListener("mouseup",P,rn)))}function P(M){if(d.value!==null&&(M===void 0||M.type!=="blur"||document.activeElement!==d.value)){if(M!==void 0&&M.type==="keyup"){if(Pa===d.value&&dn(M,[13,32])===!0){const I=new MouseEvent("click",M);I.qKeyEvent=!0,M.defaultPrevented===!0&&ui(I),M.cancelBubble===!0&&Nt(I),d.value.dispatchEvent(I),Ke(M),M.qKeyEvent=!0}i("keyup",M)}T()}}function T(M){const I=p.value;M===!0||Ia!==d.value&&qa!==d.value||I===null||I===document.activeElement||(I.setAttribute("tabindex",-1),I.focus()),Ia===d.value&&(g!==null&&(g.removeEventListener("touchcancel",P,rn),g.removeEventListener("touchend",P,rn)),Ia=g=null),qa===d.value&&(document.removeEventListener("mouseup",P,rn),qa=null),Pa===d.value&&(document.removeEventListener("keyup",P,!0),d.value!==null&&d.value.removeEventListener("blur",P,rn),Pa=null),d.value!==null&&d.value.classList.remove("q-btn--active")}function R(M){Ke(M),M.qSkipRipple=!0}return ot(()=>{T(!0)}),Object.assign(n,{click:M=>{h.value===!0&&k(M)}}),()=>{let M=[];t.icon!==void 0&&M.push(x(gt,{name:t.icon,left:t.stack!==!0&&_.value===!0,role:"img"})),_.value===!0&&M.push(x("span",{class:"block"},[t.label])),M=Xt(e.default,M),t.iconRight!==void 0&&t.round===!1&&M.push(x(gt,{name:t.iconRight,right:t.stack!==!0&&_.value===!0,role:"img"}));const I=[x("span",{class:"q-focus-helper",ref:p})];return t.loading===!0&&t.percentage!==void 0&&I.push(x("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[x("span",{class:"q-btn__progress-indicator fit block",style:v.value})])),I.push(x("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+a.value},M)),t.loading!==null&&I.push(x(si,{name:"q-transition--fade"},()=>t.loading===!0?[x("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[x(Fn)])]:null)),Vi(x(u.value,C.value,I),[[gd,b.value,void 0,m.value]])}}}),S2=le({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:e}){const i=w(()=>{const n=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>t[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return"q-btn-group row no-wrap"+(n.length!==0?" "+n:"")+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>x("div",{class:i.value},ze(e.default))}});function Pn(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),WE.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var C2={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},M2={...C2,contextMenu:Boolean};function Av({showing:t,avoidEmit:e,configureAnchorEl:i}){const{props:n,proxy:r,emit:o}=ke(),a=$(null);let s=null;function l(d){return a.value!==null&&(d===void 0||d.touches===void 0||d.touches.length<=1)}const u={};function c(){Ci(u,"anchor")}function h(){if(n.target===!1||n.target===""||r.$el.parentNode===null)a.value=null;else if(n.target===!0)(function(d){for(a.value=d;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;i()})(r.$el.parentNode);else{let d=n.target;if(typeof n.target=="string")try{d=document.querySelector(n.target)}catch{d=void 0}d!=null?(a.value=d.$el||d,i()):a.value=null}}return i===void 0&&(Object.assign(u,{hide(d){r.hide(d)},toggle(d){r.toggle(d),d.qAnchorHandled=!0},toggleKey(d){dn(d,13)===!0&&u.toggle(d)},contextClick(d){r.hide(d),ui(d),lt(()=>{r.show(d),d.qAnchorHandled=!0})},prevent:ui,mobileTouch(d){if(u.mobileCleanup(d),l(d)!==!0)return;r.hide(d),a.value.classList.add("non-selectable");const p=d.target;Wt(u,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,r.show(d),d.qAnchorHandled=!0},300)},mobileCleanup(d){a.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),t.value===!0&&d!==void 0&&Pn()}}),i=function(d=n.contextMenu){if(n.noParentEvent===!0||a.value===null)return;let p;p=d===!0?r.$q.platform.is.mobile===!0?[[a.value,"touchstart","mobileTouch","passive"]]:[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],Wt(u,"anchor",p)}),se(()=>n.contextMenu,d=>{a.value!==null&&(c(),i(d))}),se(()=>n.target,()=>{a.value!==null&&c(),h()}),se(()=>n.noParentEvent,d=>{a.value!==null&&(d===!0?c():i())}),Rt(()=>{h(),e!==!0&&n.modelValue===!0&&a.value===null&&o("update:modelValue",!1)}),ot(()=>{s!==null&&clearTimeout(s),c()}),{anchorEl:a,canShow:l,anchorEvents:u}}function k2(t,e){const i=$(null);let n;function r(s,l){const u=(l!==void 0?"add":"remove")+"EventListener",c=l!==void 0?l:n;s!==window&&s[u]("scroll",c,Pt.passive),window[u]("scroll",c,Pt.passive),n=l}function o(){i.value!==null&&(r(i.value),i.value=null)}const a=se(()=>t.noParentEvent,()=>{i.value!==null&&(o(),e())});return ot(a),{localScrollTarget:i,unconfigureScrollTarget:o,changeScrollEvent:r}}var Vs={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},$s=["beforeShow","show","beforeHide","hide"];function Gs({showing:t,canShow:e,hideOnRouteChange:i,handleShow:n,handleHide:r,processOnMount:o}){const a=ke(),{props:s,emit:l,proxy:u}=a;let c;function h(_){if(s.disable===!0||_!==void 0&&_.qAnchorHandled===!0||e!==void 0&&e(_)!==!0)return;const b=s["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!0),c=_,lt(()=>{c===_&&(c=void 0)})),s.modelValue!==null&&b!==!1||d(_)}function d(_){t.value!==!0&&(t.value=!0,l("beforeShow",_),n!==void 0?n(_):l("show",_))}function p(_){if(s.disable===!0)return;const b=s["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!1),c=_,lt(()=>{c===_&&(c=void 0)})),s.modelValue!==null&&b!==!1||f(_)}function f(_){t.value!==!1&&(t.value=!1,l("beforeHide",_),r!==void 0?r(_):l("hide",_))}function g(_){s.disable===!0&&_===!0?s["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):_===!0!==t.value&&(_===!0?d:f)(c)}se(()=>s.modelValue,g),i!==void 0&&qv(a)===!0&&se(()=>u.$route.fullPath,()=>{i.value===!0&&t.value===!0&&p()}),o===!0&&Rt(()=>{g(s.modelValue)});const y={show:h,hide:p,toggle:function(_){t.value===!0?p(_):h(_)}};return Object.assign(u,y),y}var $o=[],pu=[];function T2(t){pu=pu.filter(e=>e!==t)}function G1(t){T2(t),pu.length===0&&$o.length!==0&&($o[$o.length-1](),$o=[])}function Hs(t){pu.length===0?t():$o.push(t)}var ss=[],zl=[],h3=1,Po=document.body;function Ov(t,e){const i=document.createElement("div");if(i.id=e!==void 0?`q-portal--${e}--${h3++}`:t,R1.globalNodes!==void 0){const n=R1.globalNodes.class;n!==void 0&&(i.className=n)}return Po.appendChild(i),ss.push(i),zl.push(e),i}function E2(t){const e=ss.indexOf(t);ss.splice(e,1),zl.splice(e,1),t.remove()}var ls=[];function L2(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return Jc(t)}else if(t.__qPortal===!0){const i=Jc(t);return i!==void 0&&i.$options.name==="QPopupProxy"?(t.hide(e),i):t}t=Jc(t)}while(t!=null)}var d3=le({name:"QPortal",setup:(t,{slots:e})=>()=>e.default()});function zv(t,e,i,n){const r=$(!1),o=$(!1);let a=null;const s={},l=n==="dialog"&&function(c){for(c=c.parent;c!=null;){if(c.type.name==="QGlobalDialog")return!0;if(c.type.name==="QDialog"||c.type.name==="QMenu")return!1;c=c.parent}return!1}(t);function u(c){if(o.value=!1,c!==!0)return;G1(s),r.value=!1;const h=ls.indexOf(t.proxy);h!==-1&&ls.splice(h,1),a!==null&&(E2(a),a=null)}return Fb(()=>{u(!0)}),t.proxy.__qPortal=!0,li(t.proxy,"contentEl",()=>e.value),{showPortal:function(c){if(c===!0)return G1(s),void(o.value=!0);var h;o.value=!1,r.value===!1&&(l===!1&&a===null&&(a=Ov(!1,n)),r.value=!0,ls.push(t.proxy),T2(h=s),pu.push(h))},hidePortal:u,portalIsActive:r,portalIsAccessible:o,renderPortal:()=>l===!0?i():r.value===!0?[x(NC,{to:a},x(d3,i))]:void 0}}var Zo={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function md(t,e=()=>{},i=()=>{}){return{transitionProps:w(()=>{const n=`q-transition--${t.transitionShow||e()}`,r=`q-transition--${t.transitionHide||i()}`;return{appear:!0,enterFromClass:`${n}-enter-from`,enterActiveClass:`${n}-enter-active`,enterToClass:`${n}-enter-to`,leaveFromClass:`${r}-leave-from`,leaveActiveClass:`${r}-leave-active`,leaveToClass:`${r}-leave-to`}}),transitionStyle:w(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}function us(){let t;const e=ke();function i(){t=void 0}return Mr(i),ot(i),{removeTick:i,registerTick(n){t=n,lt(()=>{t===n&&(to(e)===!1&&t(),t=void 0)})}}}function Sr(){let t=null;const e=ke();function i(){t!==null&&(clearTimeout(t),t=null)}return Mr(i),ot(i),{removeTimeout:i,registerTimeout(n,r){i(),to(e)===!1&&(t=setTimeout(()=>{t=null,n()},r))}}}var Lp,ya=[Element,String],p3=[null,document,document.body,document.scrollingElement,document.documentElement];function Jn(t,e){let i=function(n){if(n==null)return;if(typeof n=="string")try{return document.querySelector(n)||void 0}catch{return}const r=bi(n);return r?r.$el||r:void 0}(e);if(i===void 0){if(t==null)return window;i=t.closest(".scroll,.scroll-y,.overflow-auto")}return p3.includes(i)?window:i}function wc(t){return(t===window?document.body:t).scrollHeight}function io(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function vd(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function I2(t,e,i=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=io(t);i<=0?r!==e&&rm(t,e):requestAnimationFrame(o=>{const a=o-n,s=r+(e-r)/Math.max(a,i)*a;rm(t,s),s!==e&&I2(t,e,i-a,o)})}function P2(t,e,i=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=vd(t);i<=0?r!==e&&om(t,e):requestAnimationFrame(o=>{const a=o-n,s=r+(e-r)/Math.max(a,i)*a;om(t,s),s!==e&&P2(t,e,i-a,o)})}function rm(t,e){t!==window?t.scrollTop=e:window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e)}function om(t,e){t!==window?t.scrollLeft=e:window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)}function cs(t,e,i){i?I2(t,e,i):rm(t,e)}function Ip(t,e,i){i?P2(t,e,i):om(t,e)}function eh(){if(Lp!==void 0)return Lp;const t=document.createElement("p"),e=document.createElement("div");nm(t,{width:"100%",height:"200px"}),nm(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const i=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;return i===n&&(n=e.clientWidth),e.remove(),Lp=i-n}function f3(t,e=!0){return!(!t||t.nodeType!==Node.ELEMENT_NODE)&&(e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"])))}var Is,Qo=[];function g3(t){Is=t.keyCode===27}function m3(){Is===!0&&(Is=!1)}function v3(t){Is===!0&&(Is=!1,dn(t,27)===!0&&Qo[Qo.length-1](t))}function q2(t){window[t]("keydown",g3),window[t]("blur",m3),window[t]("keyup",v3),Is=!1}function R2(t){nt.is.desktop===!0&&(Qo.push(t),Qo.length===1&&q2("addEventListener"))}function zh(t){const e=Qo.indexOf(t);e!==-1&&(Qo.splice(e,1),Qo.length===0&&q2("removeEventListener"))}var Jo=[];function F2(t){Jo[Jo.length-1](t)}function A2(t){nt.is.desktop===!0&&(Jo.push(t),Jo.length===1&&document.body.addEventListener("focusin",F2))}function am(t){const e=Jo.indexOf(t);e!==-1&&(Jo.splice(e,1),Jo.length===0&&document.body.removeEventListener("focusin",F2))}var H1,W1,{notPassiveCapture:Dh}=Pt,ea=[];function jh(t){const e=t.target;if(e===void 0||e.nodeType===8||e.classList.contains("no-pointer-events")===!0)return;let i=ls.length-1;for(;i>=0;){const n=ls[i].$;if(n.type.name!=="QTooltip"){if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;i--}else i--}for(let n=ea.length-1;n>=0;n--){const r=ea[n];if(r.anchorEl.value!==null&&r.anchorEl.value.contains(e)!==!1||e!==document.body&&(r.innerRef.value===null||r.innerRef.value.contains(e)!==!1))return;t.qClickOutside=!0,r.onClickOutside(t)}}function O2(t){ea.push(t),ea.length===1&&(document.addEventListener("mousedown",jh,Dh),document.addEventListener("touchstart",jh,Dh))}function Bh(t){const e=ea.findIndex(i=>i===t);e!==-1&&(ea.splice(e,1),ea.length===0&&(document.removeEventListener("mousedown",jh,Dh),document.removeEventListener("touchstart",jh,Dh)))}function Nh(t){const e=t.split(" ");return e.length===2&&(["top","center","bottom"].includes(e[0])!==!0?!1:["left","middle","right","start","end"].includes(e[1])===!0||!1)}function z2(t){return!t||t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}var sm={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function Vh(t,e){const i=t.split(" ");return{vertical:i[0],horizontal:sm[`${i[1]}#${e===!0?"rtl":"ltr"}`]}}function U1(t,e,i,n){return{top:t[i.vertical]-e[n.vertical],left:t[i.horizontal]-e[n.horizontal]}}function Dv(t,e=0){if(t.targetEl===null||t.anchorEl===null||e>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0)return void setTimeout(()=>{Dv(t,e+1)},10);const{targetEl:i,offset:n,anchorEl:r,anchorOrigin:o,selfOrigin:a,absoluteOffset:s,fit:l,cover:u,maxHeight:c,maxWidth:h}=t;if(nt.is.ios===!0&&window.visualViewport!==void 0){const L=document.body.style,{offsetLeft:A,offsetTop:q}=window.visualViewport;A!==H1&&(L.setProperty("--q-pe-left",A+"px"),H1=A),q!==W1&&(L.setProperty("--q-pe-top",q+"px"),W1=q)}const{scrollLeft:d,scrollTop:p}=i,f=s===void 0?function(L,A){let{top:q,left:P,right:T,bottom:R,width:M,height:I}=L.getBoundingClientRect();return A!==void 0&&(q-=A[1],P-=A[0],R+=A[1],T+=A[0],M+=A[0],I+=A[1]),{top:q,bottom:R,height:I,left:P,right:T,width:M,middle:P+(T-P)/2,center:q+(R-q)/2}}(r,u===!0?[0,0]:n):function(L,A,q){let{top:P,left:T}=L.getBoundingClientRect();return P+=A.top,T+=A.left,q!==void 0&&(P+=q[1],T+=q[0]),{top:P,bottom:P+1,height:1,left:T,right:T+1,width:1,middle:T,center:P}}(r,s,n);Object.assign(i.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:h,maxHeight:c,visibility:"visible"});const{offsetWidth:g,offsetHeight:y}=i,{elWidth:_,elHeight:b}=l===!0||u===!0?{elWidth:Math.max(f.width,g),elHeight:u===!0?Math.max(f.height,y):y}:{elWidth:g,elHeight:y};let m={maxWidth:h,maxHeight:c};l!==!0&&u!==!0||(m.minWidth=f.width+"px",u===!0&&(m.minHeight=f.height+"px")),Object.assign(i.style,m);const v={top:0,center:(C=b)/2,bottom:C,left:0,middle:(S=_)/2,right:S};var S,C;let k=U1(f,v,o,a);if(s===void 0||n===void 0)Pp(k,f,v,o,a);else{const{top:L,left:A}=k;Pp(k,f,v,o,a);let q=!1;if(k.top!==L){q=!0;const P=2*n[1];f.center=f.top-=P,f.bottom-=P+2}if(k.left!==A){q=!0;const P=2*n[0];f.middle=f.left-=P,f.right-=P+2}q===!0&&(k=U1(f,v,o,a),Pp(k,f,v,o,a))}m={top:k.top+"px",left:k.left+"px"},k.maxHeight!==void 0&&(m.maxHeight=k.maxHeight+"px",f.height>k.maxHeight&&(m.minHeight=m.maxHeight)),k.maxWidth!==void 0&&(m.maxWidth=k.maxWidth+"px",f.width>k.maxWidth&&(m.minWidth=m.maxWidth)),Object.assign(i.style,m),i.scrollTop!==p&&(i.scrollTop=p),i.scrollLeft!==d&&(i.scrollLeft=d)}function Pp(t,e,i,n,r){const o=i.bottom,a=i.right,s=eh(),l=window.innerHeight-s,u=document.body.clientWidth;if(t.top<0||t.top+o>l)if(r.vertical==="center")t.top=e[n.vertical]>l/2?Math.max(0,l-o):0,t.maxHeight=Math.min(o,l);else if(e[n.vertical]>l/2){const c=Math.min(l,n.vertical==="center"?e.center:n.vertical===r.vertical?e.bottom:e.top);t.maxHeight=Math.min(o,c),t.top=Math.max(0,c-o)}else t.top=Math.max(0,n.vertical==="center"?e.center:n.vertical===r.vertical?e.top:e.bottom),t.maxHeight=Math.min(o,l-t.top);if(t.left<0||t.left+a>u)if(t.maxWidth=Math.min(a,u),r.horizontal==="middle")t.left=e[n.horizontal]>u/2?Math.max(0,u-a):0;else if(e[n.horizontal]>u/2){const c=Math.min(u,n.horizontal==="middle"?e.middle:n.horizontal===r.horizontal?e.right:e.left);t.maxWidth=Math.min(a,c),t.left=Math.max(0,c-t.maxWidth)}else t.left=Math.max(0,n.horizontal==="middle"?e.middle:n.horizontal===r.horizontal?e.left:e.right),t.maxWidth=Math.min(a,u-t.left)}["left","middle","right"].forEach(t=>{sm[`${t}#ltr`]=t,sm[`${t}#rtl`]=t});var qp,Au=le({name:"QMenu",inheritAttrs:!1,props:{...M2,...Vs,...dt,...Zo,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Nh},self:{type:String,validator:Nh},offset:{type:Array,validator:z2},scrollTarget:ya,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...$s,"click","escapeKey"],setup(t,{slots:e,emit:i,attrs:n}){let r,o,a,s=null;const l=ke(),{proxy:u}=l,{$q:c}=u,h=$(null),d=$(!1),p=w(()=>t.persistent!==!0&&t.noRouteDismiss!==!0),f=pt(t,c),{registerTick:g,removeTick:y}=us(),{registerTimeout:_}=Sr(),{transitionProps:b,transitionStyle:m}=md(t),{localScrollTarget:v,changeScrollEvent:S,unconfigureScrollTarget:C}=k2(t,H),{anchorEl:k,canShow:L}=Av({showing:d}),{hide:A}=Gs({showing:d,canShow:L,handleShow:function(z){if(s=t.noRefocus===!1?document.activeElement:null,A2(ne),q(),H(),r=void 0,z!==void 0&&(t.touchPosition||t.contextMenu)){const j=qi(z);if(j.left!==void 0){const{top:Z,left:W}=k.value.getBoundingClientRect();r={left:j.left-W,top:j.top-Z}}}o===void 0&&(o=se(()=>c.screen.width+"|"+c.screen.height+"|"+t.self+"|"+t.anchor+"|"+c.lang.rtl,N)),t.noFocus!==!0&&document.activeElement.blur(),g(()=>{N(),t.noFocus!==!0&&B()}),_(()=>{c.platform.is.ios===!0&&(a=t.autoClose,h.value.click()),N(),q(!0),i("show",z)},t.transitionDuration)},handleHide:function(z){y(),P(),F(!0),s===null||z!==void 0&&z.qClickOutside===!0||(((z&&z.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),_(()=>{P(!0),i("hide",z)},t.transitionDuration)},hideOnRouteChange:p,processOnMount:!0}),{showPortal:q,hidePortal:P,renderPortal:T}=zv(l,h,function(){return x(si,b.value,()=>d.value===!0?x("div",{role:"menu",...n,ref:h,tabindex:-1,class:["q-menu q-position-engine scroll"+E.value,n.class],style:[n.style,m.value],...O.value},ze(e.default)):null)},"menu"),R={anchorEl:k,innerRef:h,onClickOutside(z){if(t.persistent!==!0&&d.value===!0)return A(z),(z.type==="touchstart"||z.target.classList.contains("q-dialog__backdrop"))&&Ke(z),!0}},M=w(()=>Vh(t.anchor||(t.cover===!0?"center middle":"bottom start"),c.lang.rtl)),I=w(()=>t.cover===!0?M.value:Vh(t.self||"top start",c.lang.rtl)),E=w(()=>(t.square===!0?" q-menu--square":"")+(f.value===!0?" q-menu--dark q-dark":"")),O=w(()=>t.autoClose===!0?{onClick:ee}:{}),V=w(()=>d.value===!0&&t.persistent!==!0);function B(){Hs(()=>{let z=h.value;z&&z.contains(document.activeElement)!==!0&&(z=z.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||z.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||z.querySelector("[autofocus], [data-autofocus]")||z,z.focus({preventScroll:!0}))})}function F(z){r=void 0,o!==void 0&&(o(),o=void 0),z!==!0&&d.value!==!0||(am(ne),C(),Bh(R),zh(te)),z!==!0&&(s=null)}function H(){k.value===null&&t.scrollTarget===void 0||(v.value=Jn(k.value,t.scrollTarget),S(v.value,N))}function ee(z){a!==!0?(L2(u,z),i("click",z)):a=!1}function ne(z){V.value===!0&&t.noFocus!==!0&&_2(h.value,z.target)!==!0&&B()}function te(z){i("escapeKey"),A(z)}function N(){Dv({targetEl:h.value,offset:t.offset,anchorEl:k.value,anchorOrigin:M.value,selfOrigin:I.value,absoluteOffset:r,fit:t.fit,cover:t.cover,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}return se(V,z=>{z===!0?(R2(te),O2(R)):(zh(te),Bh(R))}),ot(F),Object.assign(u,{focus:B,updatePosition:N}),T}}),Sc=0,fi=new Array(256);for(let t=0;t<256;t++)fi[t]=(t+256).toString(16).substring(1);var y3=(()=>{const t=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const i=new Uint8Array(e);return t.getRandomValues(i),i}}return e=>{const i=[];for(let n=e;n>0;n--)i.push(Math.floor(256*Math.random()));return i}})();function fu(){(qp===void 0||Sc+16>4096)&&(Sc=0,qp=y3(4096));const t=Array.prototype.slice.call(qp,Sc,Sc+=16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,fi[t[0]]+fi[t[1]]+fi[t[2]]+fi[t[3]]+"-"+fi[t[4]]+fi[t[5]]+"-"+fi[t[6]]+fi[t[7]]+"-"+fi[t[8]]+fi[t[9]]+"-"+fi[t[10]]+fi[t[11]]+fi[t[12]]+fi[t[13]]+fi[t[14]]+fi[t[15]]}function X1(t,e){return t??(e===!0?`f_${fu()}`:null)}function yd({getValue:t,required:e=!0}={}){if(hn.value===!0){const n=$(t!==void 0?(i=t())==null?null:i:null);return e===!0&&n.value===null&&Rt(()=>{n.value=`f_${fu()}`}),t!==void 0&&se(t,r=>{n.value=X1(r,e)}),n}var i;return t!==void 0?w(()=>X1(t(),e)):$(`f_${fu()}`)}var _3=Object.keys(Fv),b3=le({name:"QBtnDropdown",props:{...Fv,...Zo,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),r=$(t.modelValue),o=$(null),a=yd(),s=w(()=>{const m={"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a.value,"aria-label":t.toggleAriaLabel||n.$q.lang.label[r.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(m["aria-disabled"]="true"),m}),l=w(()=>"q-btn-dropdown__arrow"+(r.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),u=w(()=>w2(t)),c=w(()=>function(m){return _3.reduce((v,S)=>{const C=m[S];return C!==void 0&&(v[S]=C),v},{})}(t));function h(m){r.value=!0,i("beforeShow",m)}function d(m){i("show",m),i("update:modelValue",!0)}function p(m){r.value=!1,i("beforeHide",m)}function f(m){i("hide",m),i("update:modelValue",!1)}function g(m){i("click",m)}function y(m){Nt(m),b(),i("click",m)}function _(m){o.value!==null&&o.value.show(m)}function b(m){o.value!==null&&o.value.hide(m)}return se(()=>t.modelValue,m=>{o.value!==null&&o.value[m?"show":"hide"]()}),se(()=>t.split,b),Object.assign(n,{show:_,hide:b,toggle:function(m){o.value!==null&&o.value.toggle(m)}}),Rt(()=>{t.modelValue===!0&&_()}),()=>{const m=[x(gt,{class:l.value,name:t.dropdownIcon||n.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&m.push(x(Au,{ref:o,id:a.value,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:h,onShow:d,onBeforeHide:p,onHide:f},e.default)),t.split===!1?x(vt,{class:"q-btn-dropdown q-btn-dropdown--simple",...c.value,...s.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:g},{default:()=>ze(e.label,[]).concat(m),loading:e.loading}):x(S2,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...u.value,glossy:t.glossy,stretch:t.stretch},()=>[x(vt,{class:"q-btn-dropdown--current",...c.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:y},{default:e.label,loading:e.loading}),x(vt,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...s.value,...u.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>m)])}}}),mn={name:String};function Ou(t){return w(()=>({type:"hidden",name:t.name,value:t.modelValue}))}function go(t={}){return(e,i,n)=>{e[i](x("input",{class:"hidden"+(n||""),...t.value}))}}function jv(t){return w(()=>t.name||t.for)}le({name:"QBtnToggle",props:{...mn,modelValue:{required:!0},options:{type:Array,required:!0,validator:t=>t.every(e=>("label"in e||"icon"in e||"slot"in e)&&"value"in e)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(t,{slots:e,emit:i}){const n=w(()=>t.options.find(c=>c.value===t.modelValue)!==void 0),r=go(w(()=>({type:"hidden",name:t.name,value:t.modelValue}))),o=w(()=>w2(t)),a=w(()=>({rounded:t.rounded,dense:t.dense,...o.value})),s=w(()=>t.options.map((c,h)=>{const{attrs:d,value:p,slot:f,...g}=c;return{slot:f,props:{key:h,"aria-pressed":p===t.modelValue?"true":"false",...d,...g,...a.value,disable:t.disable===!0||g.disable===!0,color:p===t.modelValue?l(g,"toggleColor"):l(g,"color"),textColor:p===t.modelValue?l(g,"toggleTextColor"):l(g,"textColor"),noCaps:l(g,"noCaps")===!0,noWrap:l(g,"noWrap")===!0,size:l(g,"size"),padding:l(g,"padding"),ripple:l(g,"ripple"),stack:l(g,"stack")===!0,stretch:l(g,"stretch")===!0,onClick(y){(function(_,b,m){t.readonly!==!0&&(t.modelValue===_?t.clearable===!0&&(i("update:modelValue",null,null),i("clear")):i("update:modelValue",_,b),i("click",m))})(p,c,y)}}}}));function l(c,h){return c[h]===void 0?t[h]:c[h]}function u(){const c=s.value.map(h=>x(vt,h.props,h.slot!==void 0?e[h.slot]:void 0));return t.name!==void 0&&t.disable!==!0&&n.value===!0&&r(c,"push"),Xt(e.default,c)}return()=>x(S2,{class:"q-btn-toggle",...o.value,rounded:t.rounded,stretch:t.stretch,glossy:t.glossy,spread:t.spread},u)}});var D2=le({name:"QCard",props:{...dt,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=pt(t,i),r=w(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>x(t.tag,{class:r.value},ze(e.default))}}),qo=le({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const i=w(()=>"q-card__section q-card__section--"+(t.horizontal===!0?"horiz row no-wrap":"vert"));return()=>x(t.tag,{class:i.value},ze(e.default))}}),x3=le({name:"QCardActions",props:{...Lv,vertical:Boolean},setup(t,{slots:e}){const i=Iv(t),n=w(()=>`q-card__actions ${i.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>x("div",{class:n.value},ze(e.default))}}),Bv={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},w3=Object.keys(Bv);function $h(t){const e={};for(const i of w3)t[i]===!0&&(e[i]=!0);return Object.keys(e).length===0?Bv:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}Bv.all=!0;var S3=["INPUT","TEXTAREA"];function Gh(t,e){return e.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof e.handler=="function"&&S3.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(e.uid)===-1)}function C3(t){const e=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((i,n)=>{const r=parseFloat(i);r&&(e[n]=r)}),e}var M3=In({name:"touch-swipe",beforeMount(t,{value:e,arg:i,modifiers:n}){if(n.mouse!==!0&&nt.has.touch!==!0)return;const r=n.mouseCapture===!0?"Capture":"",o={handler:e,sensitivity:C3(i),direction:$h(n),noop:ni,mouseStart(a){Gh(a,o)&&pd(a)&&(Wt(o,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(a,!0))},touchStart(a){if(Gh(a,o)){const s=a.target;Wt(o,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),o.start(a)}},start(a,s){nt.is.firefox===!0&&as(t,!0);const l=qi(a);o.event={x:l.left,y:l.top,time:Date.now(),mouse:s===!0,dir:!1}},move(a){if(o.event===void 0)return;if(o.event.dir!==!1)return void Ke(a);const s=Date.now()-o.event.time;if(s===0)return;const l=qi(a),u=l.left-o.event.x,c=Math.abs(u),h=l.top-o.event.y,d=Math.abs(h);if(o.event.mouse!==!0){if(c<o.sensitivity[1]&&d<o.sensitivity[1])return void o.end(a)}else{if(window.getSelection().toString()!=="")return void o.end(a);if(c<o.sensitivity[2]&&d<o.sensitivity[2])return}const p=c/s,f=d/s;o.direction.vertical===!0&&c<d&&c<100&&f>o.sensitivity[0]&&(o.event.dir=h<0?"up":"down"),o.direction.horizontal===!0&&c>d&&d<100&&p>o.sensitivity[0]&&(o.event.dir=u<0?"left":"right"),o.direction.up===!0&&c<d&&h<0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&c<d&&h>0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&c>d&&u<0&&d<100&&p>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&c>d&&u>0&&d<100&&p>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(Ke(a),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Pn(),o.styleCleanup=g=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const y=()=>{document.body.classList.remove("no-pointer-events--children")};g===!0?setTimeout(y,50):y()}),o.handler({evt:a,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:s,distance:{x:c,y:d}})):o.end(a)},end(a){o.event!==void 0&&(Ci(o,"temp"),nt.is.firefox===!0&&as(t,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),a!==void 0&&o.event.dir!==!1&&Ke(a),o.event=void 0)}};if(t.__qtouchswipe=o,n.mouse===!0){const a=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";Wt(o,"main",[[t,"mousedown","mouseStart",`passive${a}`]])}nt.has.touch===!0&&Wt(o,"main",[[t,"touchstart","touchStart","passive"+(n.capture===!0?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchswipe;i!==void 0&&(e.oldValue!==e.value&&(typeof e.value!="function"&&i.end(),i.handler=e.value),i.direction=$h(e.modifiers))},beforeUnmount(t){const e=t.__qtouchswipe;e!==void 0&&(Ci(e,"main"),Ci(e,"temp"),nt.is.firefox===!0&&as(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchswipe)}});function zu(){let t=Object.create(null);return{getCache:(e,i)=>t[e]===void 0?t[e]=typeof i=="function"?i():i:t[e],setCache(e,i){t[e]=i},hasCache:e=>Object.hasOwnProperty.call(t,e),clearCache(e){e!==void 0?delete t[e]:t=Object.create(null)}}}var Nv={name:{required:!0},disable:Boolean},Y1={setup:(t,{slots:e})=>()=>x("div",{class:"q-panel scroll",role:"tabpanel"},ze(e.default))},Vv={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},$v=["update:modelValue","beforeTransition","transition"];function Gv(){const{props:t,emit:e,proxy:i}=ke(),{getCache:n}=zu(),{registerTimeout:r}=Sr();let o,a;const s=$(null),l=$(null);function u(q){const P=t.vertical===!0?"up":"left";k((i.$q.lang.rtl===!0?-1:1)*(q.direction===P?1:-1))}const c=w(()=>[[M3,u,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),h=w(()=>t.transitionPrev||"slide-"+(t.vertical===!0?"down":"right")),d=w(()=>t.transitionNext||"slide-"+(t.vertical===!0?"up":"left")),p=w(()=>`--q-transition-duration: ${t.transitionDuration}ms`),f=w(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),g=w(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),y=w(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);function _(){k(1)}function b(){k(-1)}function m(q){e("update:modelValue",q)}function v(q){return q!=null&&q!==""}function S(q){return o.findIndex(P=>P.props.name===q&&P.props.disable!==""&&P.props.disable!==!0)}function C(q){const P=q!==0&&t.animated===!0&&s.value!==-1?"q-transition--"+(q===-1?h.value:d.value):null;l.value!==P&&(l.value=P)}function k(q,P=s.value){let T=P+q;for(;T!==-1&&T<o.length;){const R=o[T];if(R!==void 0&&R.props.disable!==""&&R.props.disable!==!0)return C(q),a=!0,e("update:modelValue",R.props.name),void setTimeout(()=>{a=!1});T+=q}t.infinite===!0&&o.length!==0&&P!==-1&&P!==o.length&&k(q,q===-1?o.length:-1)}function L(){const q=S(t.modelValue);return s.value!==q&&(s.value=q),!0}function A(){const q=v(t.modelValue)===!0&&L()&&o[s.value];return t.keepAlive===!0?[x(Ab,g.value,[x(y.value===!0?n(f.value,()=>({...Y1,name:f.value})):Y1,{key:f.value,style:p.value},()=>q)])]:[x("div",{class:"q-panel scroll",style:p.value,key:f.value,role:"tabpanel"},[q])]}return se(()=>t.modelValue,(q,P)=>{const T=v(q)===!0?S(q):-1;a!==!0&&C(T===-1?0:T<S(P)?-1:1),s.value!==T&&(s.value=T,e("beforeTransition",q,P),r(()=>{e("transition",q,P)},t.transitionDuration))}),Object.assign(i,{next:_,previous:b,goTo:m}),{panelIndex:s,panelDirectives:c,updatePanelsList:function(q){return o=Pv(ze(q.default,[])).filter(P=>P.props!==null&&P.props.slot===void 0&&v(P.props.name)===!0),o.length},updatePanelIndex:L,getPanelContent:function(){if(o.length!==0)return t.animated===!0?[x(si,{name:l.value},A)]:A()},getEnabledPanels:function(){return o.filter(q=>q.props.disable!==""&&q.props.disable!==!0)},getPanels:function(){return o},isValidPanelName:v,keepAliveProps:g,needsUniqueKeepAliveWrapper:y,goToPanelByOffset:k,goToPanel:m,nextPanel:_,previousPanel:b}}var Rp=0,Hv={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Wv=["update:fullscreen","fullscreen"];function Uv(){const t=ke(),{props:e,emit:i,proxy:n}=t;let r,o;const a=$(!1);function s(){a.value===!0?u():l()}function l(){a.value!==!0&&(a.value=!0,o=n.$el.parentNode,o.replaceChild(r,n.$el),document.body.appendChild(n.$el),++Rp===1&&document.body.classList.add("q-body--fullscreen-mixin"))}function u(){a.value===!0&&(o.replaceChild(n.$el,r),a.value=!1,(Rp=Math.max(0,Rp-1))===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),n.$el.scrollIntoView!==void 0&&setTimeout(()=>{n.$el.scrollIntoView()})))}return qv(t)===!0&&se(()=>n.$route.fullPath,()=>{e.noRouteFullscreenExit!==!0&&u()}),se(()=>e.fullscreen,c=>{a.value!==c&&s()}),se(a,c=>{i("update:fullscreen",c),i("fullscreen",c)}),Im(()=>{r=document.createElement("span")}),Rt(()=>{e.fullscreen===!0&&l()}),ot(u),Object.assign(n,{toggleFullscreen:s,setFullscreen:l,exitFullscreen:u}),{inFullscreen:a,toggleFullscreen:s}}var k3=["top","right","bottom","left"],T3=["regular","flat","outline","push","unelevated"];function j2(t,e){const i=$(null);return{refocusTargetEl:w(()=>t.disable===!0?null:x("span",{ref:i,class:"no-outline",tabindex:-1})),refocusTarget:function(n){const r=e.value;n!==void 0&&n.type.indexOf("key")===0?r!==null&&document.activeElement!==r&&r.contains(document.activeElement)===!0&&r.focus():i.value!==null&&(n===void 0||r!==null&&r.contains(n.target)===!0)&&i.value.focus()}}}le({name:"QCarousel",props:{...dt,...Vv,...Hv,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:t=>T3.includes(t),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:t=>k3.includes(t)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Wv,...$v],setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=pt(t,i);let r,o=null;const{updatePanelsList:a,getPanelContent:s,panelDirectives:l,goToPanel:u,previousPanel:c,nextPanel:h,getEnabledPanels:d,panelIndex:p}=Gv(),{inFullscreen:f}=Uv(),g=w(()=>f.value!==!0&&t.height!==void 0?{height:t.height}:{}),y=w(()=>t.vertical===!0?"vertical":"horizontal"),_=w(()=>t.navigationPosition||(t.vertical===!0?"right":"bottom")),b=w(()=>`q-carousel q-panel-parent q-carousel--with${t.padding===!0?"":"out"}-padding`+(f.value===!0?" fullscreen":"")+(n.value===!0?" q-carousel--dark q-dark":"")+(t.arrows===!0?` q-carousel--arrows-${y.value}`:"")+(t.navigation===!0?` q-carousel--navigation-${_.value}`:"")),m=w(()=>{const A=[t.prevIcon||i.iconSet.carousel[t.vertical===!0?"up":"left"],t.nextIcon||i.iconSet.carousel[t.vertical===!0?"down":"right"]];return t.vertical===!1&&i.lang.rtl===!0?A.reverse():A}),v=w(()=>t.navigationIcon||i.iconSet.carousel.navigationIcon),S=w(()=>t.navigationActiveIcon||v.value),C=w(()=>({color:t.controlColor,textColor:t.controlTextColor,round:!0,[t.controlType]:!0,dense:!0}));function k(){const A=du(t.autoplay)===!0?Math.abs(t.autoplay):5e3;o!==null&&clearTimeout(o),o=setTimeout(()=>{o=null,A>=0?h():c()},A)}function L(A,q){return x("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${A} q-carousel__navigation--${_.value}`+(t.controlColor!==void 0?` text-${t.controlColor}`:"")},[x("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},d().map(q))])}return se(()=>t.modelValue,()=>{t.autoplay&&k()}),se(()=>t.autoplay,A=>{A?k():o!==null&&(clearTimeout(o),o=null)}),Rt(()=>{t.autoplay&&k()}),ot(()=>{o!==null&&clearTimeout(o)}),()=>(r=a(e),x("div",{class:b.value,style:g.value},[pn("div",{class:"q-carousel__slides-container"},s(),"sl-cont",t.swipeable,()=>l.value)].concat(function(){const A=[];if(t.navigation===!0){const q=e["navigation-icon"]!==void 0?e["navigation-icon"]:T=>x(vt,{key:"nav"+T.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${T.active===!0?"":"in"}active`,...T.btnProps,onClick:T.onClick}),P=r-1;A.push(L("buttons",(T,R)=>{const M=T.props.name,I=p.value===R;return q({index:R,maxIndex:P,name:M,active:I,btnProps:{icon:I===!0?S.value:v.value,size:"sm",...C.value},onClick:()=>{u(M)}})}))}else if(t.thumbnails===!0){const q=t.controlColor!==void 0?` text-${t.controlColor}`:"";A.push(L("thumbnails",P=>{const T=P.props;return x("img",{key:"tmb#"+T.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${T.name===t.modelValue?"":"in"}active`+q,src:T.imgSrc||T["img-src"],onClick:()=>{u(T.name)}})}))}return t.arrows===!0&&p.value>=0&&((t.infinite===!0||p.value>0)&&A.push(x("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${y.value} absolute flex flex-center`},[x(vt,{icon:m.value[0],...C.value,onClick:c})])),(t.infinite===!0||p.value<r-1)&&A.push(x("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${y.value} absolute flex flex-center`},[x(vt,{icon:m.value[1],...C.value,onClick:h})]))),Xt(e.control,A)}())))}}),le({name:"QCarouselSlide",props:{...Nv,imgSrc:String},setup(t,{slots:e}){const i=w(()=>t.imgSrc?{backgroundImage:`url("${t.imgSrc}")`}:{});return()=>x("div",{class:"q-carousel__slide",style:i.value},ze(e.default))}}),le({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,default:()=>[18,18],validator:t=>t.length===2}},setup(t,{slots:e}){const i=w(()=>`q-carousel__control absolute absolute-${t.position}`),n=w(()=>({margin:`${t.offset[1]}px ${t.offset[0]}px`}));return()=>x("div",{class:i.value,style:n.value},ze(e.default))}}),le({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(t,{slots:e}){const i=w(()=>t.sent===!0?"sent":"received"),n=w(()=>`q-message-text-content q-message-text-content--${i.value}`+(t.textColor!==void 0?` text-${t.textColor}`:"")),r=w(()=>`q-message-text q-message-text--${i.value}`+(t.bgColor!==void 0?` text-${t.bgColor}`:"")),o=w(()=>"q-message-container row items-end no-wrap"+(t.sent===!0?" reverse":"")),a=w(()=>t.size!==void 0?`col-${t.size}`:""),s=w(()=>({msg:t.textHtml===!0?"innerHTML":"textContent",stamp:t.stampHtml===!0?"innerHTML":"textContent",name:t.nameHtml===!0?"innerHTML":"textContent",label:t.labelHtml===!0?"innerHTML":"textContent"}));function l(u,c){const h=c===!0?u.length>1?d=>d:d=>x("div",[d]):d=>x("div",{[s.value.msg]:d});return u.map((d,p)=>{return x("div",{key:p,class:r.value},[x("div",{class:n.value},(f=h(d),e.stamp!==void 0?[f,x("div",{class:"q-message-stamp"},e.stamp())]:t.stamp?[f,x("div",{class:"q-message-stamp",[s.value.stamp]:t.stamp})]:[f]))]);var f})}return()=>{const u=[];e.avatar!==void 0?u.push(e.avatar()):t.avatar!==void 0&&u.push(x("img",{class:`q-message-avatar q-message-avatar--${i.value}`,src:t.avatar,"aria-hidden":"true"}));const c=[];e.name!==void 0?c.push(x("div",{class:`q-message-name q-message-name--${i.value}`},e.name())):t.name!==void 0&&c.push(x("div",{class:`q-message-name q-message-name--${i.value}`,[s.value.name]:t.name})),e.default!==void 0?c.push(l(Pv(e.default()),!0)):t.text!==void 0&&c.push(l(t.text)),u.push(x("div",{class:a.value},c));const h=[];return e.label!==void 0?h.push(x("div",{class:"q-message-label"},e.label())):t.label!==void 0&&h.push(x("div",{class:"q-message-label",[s.value.label]:t.label})),h.push(x("div",{class:o.value},u)),x("div",{class:`q-message q-message-${i.value}`},h)}}});var B2={xs:30,sm:35,md:40,lg:50,xl:60},N2={...dt,...Tr,...mn,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},V2=["update:modelValue"];function $2(t,e){const{props:i,slots:n,emit:r,proxy:o}=ke(),{$q:a}=o,s=pt(i,a),l=$(null),{refocusTargetEl:u,refocusTarget:c}=j2(i,l),h=Er(i,B2),d=w(()=>i.val!==void 0&&Array.isArray(i.modelValue)),p=w(()=>{const q=ur(i.val);return d.value===!0?i.modelValue.findIndex(P=>ur(P)===q):-1}),f=w(()=>d.value===!0?p.value!==-1:ur(i.modelValue)===ur(i.trueValue)),g=w(()=>d.value===!0?p.value===-1:ur(i.modelValue)===ur(i.falseValue)),y=w(()=>f.value===!1&&g.value===!1),_=w(()=>i.disable===!0?-1:i.tabindex||0),b=w(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(i.disable===!0?" disabled":"")+(s.value===!0?` q-${t}--dark`:"")+(i.dense===!0?` q-${t}--dense`:"")+(i.leftLabel===!0?" reverse":"")),m=w(()=>{const q=f.value===!0?"truthy":g.value===!0?"falsy":"indet",P=i.color===void 0||i.keepColor!==!0&&(t==="toggle"?f.value!==!0:g.value===!0)?"":` text-${i.color}`;return`q-${t}__inner relative-position non-selectable q-${t}__inner--${q}${P}`}),v=go(w(()=>{const q={type:"checkbox"};return i.name!==void 0&&Object.assign(q,{".checked":f.value,"^checked":f.value===!0?"checked":void 0,name:i.name,value:d.value===!0?i.val:i.trueValue}),q})),S=w(()=>{const q={tabindex:_.value,role:t==="toggle"?"switch":"checkbox","aria-label":i.label,"aria-checked":y.value===!0?"mixed":f.value===!0?"true":"false"};return i.disable===!0&&(q["aria-disabled"]="true"),q});function C(q){q!==void 0&&(Ke(q),c(q)),i.disable!==!0&&r("update:modelValue",function(){if(d.value===!0){if(f.value===!0){const P=i.modelValue.slice();return P.splice(p.value,1),P}return i.modelValue.concat([i.val])}if(f.value===!0){if(i.toggleOrder!=="ft"||i.toggleIndeterminate===!1)return i.falseValue}else{if(g.value!==!0)return i.toggleOrder!=="ft"?i.trueValue:i.falseValue;if(i.toggleOrder==="ft"||i.toggleIndeterminate===!1)return i.trueValue}return i.indeterminateValue}(),q)}function k(q){q.keyCode!==13&&q.keyCode!==32||Ke(q)}function L(q){q.keyCode!==13&&q.keyCode!==32||C(q)}const A=e(f,y);return Object.assign(o,{toggle:C}),()=>{const q=A();i.disable!==!0&&v(q,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const P=[x("div",{class:m.value,style:h.value,"aria-hidden":"true"},q)];u.value!==null&&P.push(u.value);const T=i.label!==void 0?Xt(n.default,[i.label]):ze(n.default);return T!==void 0&&P.push(x("div",{class:`q-${t}__label q-anchor--skip`},T)),x("div",{ref:l,class:b.value,...S.value,onClick:C,onKeydown:k,onKeyup:L},P)}}var Dl=le({name:"QCheckbox",props:N2,emits:V2,setup(t){const e=x("div",{key:"svg",class:"q-checkbox__bg absolute"},[x("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[x("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),x("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);return $2("checkbox",function(i,n){const r=w(()=>(i.value===!0?t.checkedIcon:n.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>r.value!==null?[x("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[x(gt,{class:"q-checkbox__icon",name:r.value})])]:[e]})}}),E3={xs:8,sm:10,md:14,lg:20,xl:24},G2=le({name:"QChip",props:{...dt,...Tr,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=pt(t,n),o=Er(t,E3),a=w(()=>t.selected===!0||t.icon!==void 0),s=w(()=>t.selected===!0?t.iconSelected||n.iconSet.chip.selected:t.icon),l=w(()=>t.iconRemove||n.iconSet.chip.remove),u=w(()=>t.disable===!1&&(t.clickable===!0||t.selected!==null)),c=w(()=>{const g=t.outline===!0&&t.color||t.textColor;return"q-chip row inline no-wrap items-center"+(t.outline===!1&&t.color!==void 0?` bg-${t.color}`:"")+(g?` text-${g} q-chip--colored`:"")+(t.disable===!0?" disabled":"")+(t.dense===!0?" q-chip--dense":"")+(t.outline===!0?" q-chip--outline":"")+(t.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(t.square===!0?" q-chip--square":"")+(r.value===!0?" q-chip--dark q-dark":"")}),h=w(()=>{const g=t.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0};return{chip:g,remove:{...g,role:"button","aria-hidden":"false","aria-label":t.removeAriaLabel||n.lang.label.remove}}});function d(g){g.keyCode===13&&p(g)}function p(g){t.disable||(i("update:selected",!t.selected),i("click",g))}function f(g){g.keyCode!==void 0&&g.keyCode!==13||(Ke(g),t.disable===!1&&(i("update:modelValue",!1),i("remove")))}return()=>{if(t.modelValue===!1)return;const g={class:c.value,style:o.value};return u.value===!0&&Object.assign(g,h.value.chip,{onClick:p,onKeyup:d}),pn("div",g,function(){const y=[];u.value===!0&&y.push(x("div",{class:"q-focus-helper"})),a.value===!0&&y.push(x(gt,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const _=t.label!==void 0?[x("div",{class:"ellipsis"},[t.label])]:void 0;return y.push(x("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ev(e.default,_))),t.iconRight&&y.push(x(gt,{class:"q-chip__icon q-chip__icon--right",name:t.iconRight})),t.removable===!0&&y.push(x(gt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:l.value,...h.value.remove,onClick:f,onKeyup:f})),y}(),"ripple",t.ripple!==!1&&t.disable!==!0,()=>[[gd,t.ripple]])}}}),Xv={...Tr,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:t=>t>=0&&t<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},H2=100*Math.PI,L3=Math.round(1e3*H2)/1e3,W2=le({name:"QCircularProgress",props:{...Xv,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=Er(t),r=w(()=>{const p=(i.lang.rtl===!0?-1:1)*t.angle;return{transform:t.reverse!==(i.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-p}deg)`:`rotate3d(0, 0, 1, ${p-90}deg)`}}),o=w(()=>t.instantFeedback!==!0&&t.indeterminate!==!0?{transition:`stroke-dashoffset ${t.animationSpeed}ms ease 0s, stroke ${t.animationSpeed}ms ease`}:""),a=w(()=>100/(1-t.thickness/2)),s=w(()=>`${a.value/2} ${a.value/2} ${a.value} ${a.value}`),l=w(()=>Et(t.value,t.min,t.max)),u=w(()=>t.max-t.min),c=w(()=>t.thickness/2*a.value),h=w(()=>{const p=(t.max-l.value)/u.value,f=t.rounded===!0&&l.value<t.max&&p<.25?c.value/2*(1-p/.25):0;return H2*p+f});function d({thickness:p,offset:f,color:g,cls:y,rounded:_}){return x("circle",{class:"q-circular-progress__"+y+(g!==void 0?` text-${g}`:""),style:o.value,fill:"transparent",stroke:"currentColor","stroke-width":p,"stroke-dasharray":L3,"stroke-dashoffset":f,"stroke-linecap":_,cx:a.value,cy:a.value,r:50})}return()=>{const p=[];t.centerColor!==void 0&&t.centerColor!=="transparent"&&p.push(x("circle",{class:`q-circular-progress__center text-${t.centerColor}`,fill:"currentColor",r:50-c.value/2,cx:a.value,cy:a.value})),t.trackColor!==void 0&&t.trackColor!=="transparent"&&p.push(d({cls:"track",thickness:c.value,offset:0,color:t.trackColor})),p.push(d({cls:"circle",thickness:c.value,offset:h.value,color:t.color,rounded:t.rounded===!0?"round":void 0}));const f=[x("svg",{class:"q-circular-progress__svg",style:r.value,viewBox:s.value,"aria-hidden":"true"},p)];return t.showValue===!0&&f.push(x("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:t.fontSize}},e.default!==void 0?e.default():[x("div",l.value)])),x("div",{class:`q-circular-progress q-circular-progress--${t.indeterminate===!0?"in":""}determinate`,style:n.value,role:"progressbar","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.indeterminate===!0?void 0:l.value},Ev(e.internal,f))}}});function Fp(t,e,i){const n=qi(t);let r,o=n.left-e.event.x,a=n.top-e.event.y,s=Math.abs(o),l=Math.abs(a);const u=e.direction;u.horizontal===!0&&u.vertical!==!0?r=o<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?r=a<0?"up":"down":u.up===!0&&a<0?(r="up",s>l&&(u.left===!0&&o<0?r="left":u.right===!0&&o>0&&(r="right"))):u.down===!0&&a>0?(r="down",s>l&&(u.left===!0&&o<0?r="left":u.right===!0&&o>0&&(r="right"))):u.left===!0&&o<0?(r="left",s<l&&(u.up===!0&&a<0?r="up":u.down===!0&&a>0&&(r="down"))):u.right===!0&&o>0&&(r="right",s<l&&(u.up===!0&&a<0?r="up":u.down===!0&&a>0&&(r="down")));let c=!1;if(r===void 0&&i===!1){if(e.event.isFirst===!0||e.event.lastDir===void 0)return{};r=e.event.lastDir,c=!0,r==="left"||r==="right"?(n.left-=o,s=0,o=0):(n.top-=a,l=0,a=0)}return{synthetic:c,payload:{evt:t,touch:e.event.mouse!==!0,mouse:e.event.mouse===!0,position:n,direction:r,isFirst:e.event.isFirst,isFinal:i===!0,duration:Date.now()-e.event.time,distance:{x:s,y:l},offset:{x:o,y:a},delta:{x:n.left-e.event.lastX,y:n.top-e.event.lastY}}}}var I3=0,cn=In({name:"touch-pan",beforeMount(t,{value:e,modifiers:i}){if(i.mouse!==!0&&nt.has.touch!==!0)return;function n(o,a){i.mouse===!0&&a===!0?Ke(o):(i.stop===!0&&Nt(o),i.prevent===!0&&ui(o))}const r={uid:"qvtp_"+I3++,handler:e,modifiers:i,direction:$h(i),noop:ni,mouseStart(o){Gh(o,r)&&pd(o)&&(Wt(r,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),r.start(o,!0))},touchStart(o){if(Gh(o,r)){const a=o.target;Wt(r,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","passiveCapture"],[a,"touchend","end","passiveCapture"]]),r.start(o)}},start(o,a){if(nt.is.firefox===!0&&as(t,!0),r.lastEvt=o,a===!0||i.stop===!0){if(r.direction.all!==!0&&(a!==!0||r.modifiers.mouseAllDir!==!0&&r.modifiers.mousealldir!==!0)){const u=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&ui(u),o.cancelBubble===!0&&Nt(u),Object.assign(u,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[r.uid]:o.qClonedBy.concat(r.uid)}),r.initialEvent={target:o.target,event:u}}Nt(o)}const{left:s,top:l}=qi(o);r.event={x:s,y:l,time:Date.now(),mouse:a===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:l}},move(o){if(r.event===void 0)return;const a=qi(o),s=a.left-r.event.x,l=a.top-r.event.y;if(s===0&&l===0)return;r.lastEvt=o;const u=r.event.mouse===!0,c=()=>{let p;n(o,u),i.preserveCursor!==!0&&i.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Pn(),r.styleCleanup=f=>{if(r.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),u===!0){const g=()=>{document.body.classList.remove("no-pointer-events--children")};f!==void 0?setTimeout(()=>{g(),f()},50):g()}else f!==void 0&&f()}};if(r.event.detected===!0){r.event.isFirst!==!0&&n(o,r.event.mouse);const{payload:p,synthetic:f}=Fp(o,r,!1);return void(p!==void 0&&(r.handler(p)===!1?r.end(o):(r.styleCleanup===void 0&&r.event.isFirst===!0&&c(),r.event.lastX=p.position.left,r.event.lastY=p.position.top,r.event.lastDir=f===!0?void 0:p.direction,r.event.isFirst=!1)))}if(r.direction.all===!0||u===!0&&(r.modifiers.mouseAllDir===!0||r.modifiers.mousealldir===!0))return c(),r.event.detected=!0,void r.move(o);const h=Math.abs(s),d=Math.abs(l);h!==d&&(r.direction.horizontal===!0&&h>d||r.direction.vertical===!0&&h<d||r.direction.up===!0&&h<d&&l<0||r.direction.down===!0&&h<d&&l>0||r.direction.left===!0&&h>d&&s<0||r.direction.right===!0&&h>d&&s>0?(r.event.detected=!0,r.move(o)):r.end(o,!0))},end(o,a){if(r.event!==void 0){if(Ci(r,"temp"),nt.is.firefox===!0&&as(t,!1),a===!0)r.styleCleanup!==void 0&&r.styleCleanup(),r.event.detected!==!0&&r.initialEvent!==void 0&&r.initialEvent.target.dispatchEvent(r.initialEvent.event);else if(r.event.detected===!0){r.event.isFirst===!0&&r.handler(Fp(o===void 0?r.lastEvt:o,r).payload);const{payload:s}=Fp(o===void 0?r.lastEvt:o,r,!0),l=()=>{r.handler(s)};r.styleCleanup!==void 0?r.styleCleanup(l):l()}r.event=void 0,r.initialEvent=void 0,r.lastEvt=void 0}}};if(t.__qtouchpan=r,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Wt(r,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}nt.has.touch===!0&&Wt(r,"main",[[t,"touchstart","touchStart","passive"+(i.capture===!0?"Capture":"")],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchpan;i!==void 0&&(e.oldValue!==e.value&&(typeof value!="function"&&i.end(),i.handler=e.value),i.direction=$h(e.modifiers))},beforeUnmount(t){const e=t.__qtouchpan;e!==void 0&&(e.event!==void 0&&e.end(),Ci(e,"main"),Ci(e,"temp"),nt.is.firefox===!0&&as(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchpan)}}),K1="q-slider__marker-labels",P3=t=>({value:t}),q3=({marker:t})=>x("div",{key:t.value,style:t.style,class:t.classes},t.label),Yv=[34,37,40,33,39,38],U2={...dt,...mn,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},X2=["pan","update:modelValue","change"];function Y2({updateValue:t,updatePosition:e,getDragging:i,formAttrs:n}){const{props:r,emit:o,slots:a,proxy:{$q:s}}=ke(),l=pt(r,s),u=go(n),c=$(!1),h=$(!1),d=$(!1),p=$(!1),f=w(()=>r.vertical===!0?"--v":"--h"),g=w(()=>"-"+(r.switchLabelSide===!0?"switched":"standard")),y=w(()=>r.vertical===!0?r.reverse===!0:r.reverse!==(s.lang.rtl===!0)),_=w(()=>isNaN(r.innerMin)===!0||r.innerMin<r.min?r.min:r.innerMin),b=w(()=>isNaN(r.innerMax)===!0||r.innerMax>r.max?r.max:r.innerMax),m=w(()=>r.disable!==!0&&r.readonly!==!0&&_.value<b.value),v=w(()=>{if(r.step===0)return de=>de;const X=(String(r.step).trim().split(".")[1]||"").length;return de=>parseFloat(de.toFixed(X))}),S=w(()=>r.step===0?1:r.step),C=w(()=>m.value===!0?r.tabindex||0:-1),k=w(()=>r.max-r.min),L=w(()=>b.value-_.value),A=w(()=>U(_.value)),q=w(()=>U(b.value)),P=w(()=>r.vertical===!0?y.value===!0?"bottom":"top":y.value===!0?"right":"left"),T=w(()=>r.vertical===!0?"height":"width"),R=w(()=>r.vertical===!0?"width":"height"),M=w(()=>r.vertical===!0?"vertical":"horizontal"),I=w(()=>{const X={role:"slider","aria-valuemin":_.value,"aria-valuemax":b.value,"aria-orientation":M.value,"data-step":r.step};return r.disable===!0?X["aria-disabled"]="true":r.readonly===!0&&(X["aria-readonly"]="true"),X}),E=w(()=>`q-slider q-slider${f.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(r.vertical===!0?"row":"column")+(r.disable===!0?" disabled":" q-slider--enabled"+(m.value===!0?" q-slider--editable":""))+(d.value==="both"?" q-slider--focus":"")+(r.label||r.labelAlways===!0?" q-slider--label":"")+(r.labelAlways===!0?" q-slider--label-always":"")+(l.value===!0?" q-slider--dark":"")+(r.dense===!0?" q-slider--dense q-slider--dense"+f.value:""));function O(X){const de="q-slider__"+X;return`${de} ${de}${f.value} ${de}${f.value}${g.value}`}function V(X){const de="q-slider__"+X;return`${de} ${de}${f.value}`}const B=w(()=>{const X=r.selectionColor||r.color;return"q-slider__selection absolute"+(X!==void 0?` text-${X}`:"")}),F=w(()=>V("markers")+" absolute overflow-hidden"),H=w(()=>V("track-container")),ee=w(()=>O("pin")),ne=w(()=>O("label")),te=w(()=>O("text-container")),N=w(()=>O("marker-labels-container")+(r.markerLabelsClass!==void 0?` ${r.markerLabelsClass}`:"")),z=w(()=>"q-slider__track relative-position no-outline"+(r.trackColor!==void 0?` bg-${r.trackColor}`:"")),j=w(()=>{const X={[R.value]:r.trackSize};return r.trackImg!==void 0&&(X.backgroundImage=`url(${r.trackImg}) !important`),X}),Z=w(()=>"q-slider__inner absolute"+(r.innerTrackColor!==void 0?` bg-${r.innerTrackColor}`:"")),W=w(()=>{const X=q.value-A.value,de={[P.value]:100*A.value+"%",[T.value]:X===0?"2px":100*X+"%"};return r.innerTrackImg!==void 0&&(de.backgroundImage=`url(${r.innerTrackImg}) !important`),de});function U(X){return k.value===0?0:(X-r.min)/k.value}const ye=w(()=>du(r.markers)===!0?r.markers:S.value),ue=w(()=>{const X=[],de=ye.value,Se=r.max;let Le=r.min;do X.push(Le),Le+=de;while(Le<Se);return X.push(Se),X}),he=w(()=>{const X=` ${K1}${f.value}-`;return K1+`${X}${r.switchMarkerLabelsSide===!0?"switched":"standard"}${X}${y.value===!0?"rtl":"ltr"}`}),fe=w(()=>r.markerLabels===!1?null:function(X){if(X===!1)return null;if(X===!0)return ue.value.map(P3);if(typeof X=="function")return ue.value.map(Se=>{const Le=X(Se);return Si(Le)===!0?{...Le,value:Se}:{value:Se,label:Le}});const de=({value:Se})=>Se>=r.min&&Se<=r.max;return Array.isArray(X)===!0?X.map(Se=>Si(Se)===!0?Se:{value:Se}).filter(de):Object.keys(X).map(Se=>{const Le=X[Se],Fe=Number(Se);return Si(Le)===!0?{...Le,value:Fe}:{value:Fe,label:Le}}).filter(de)}(r.markerLabels).map((X,de)=>({index:de,value:X.value,label:X.label||X.value,classes:he.value+(X.classes!==void 0?" "+X.classes:""),style:{...me(X.value),...X.style||{}}}))),Ce=w(()=>({markerList:fe.value,markerMap:we.value,classes:he.value,getStyle:me})),Ie=w(()=>{const X=L.value===0?"2px":100*ye.value/L.value;return{...W.value,backgroundSize:r.vertical===!0?`2px ${X}%`:`${X}% 2px`}});function me(X){return{[P.value]:100*(X-r.min)/k.value+"%"}}const we=w(()=>{if(r.markerLabels===!1)return null;const X={};return fe.value.forEach(de=>{X[de.value]=de}),X}),qe=w(()=>[[cn,Ge,void 0,{[M.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ge(X){X.isFinal===!0?(p.value!==void 0&&(e(X.evt),X.touch===!0&&t(!0),p.value=void 0,o("pan","end")),c.value=!1,d.value=!1):X.isFirst===!0?(p.value=i(X.evt),e(X.evt),t(),c.value=!0,o("pan","start")):(e(X.evt),t())}function oe(){d.value=!1}function ce(){h.value=!1,c.value=!1,t(!0),oe(),document.removeEventListener("mouseup",ce,!0)}return ot(()=>{document.removeEventListener("mouseup",ce,!0)}),{state:{active:c,focus:d,preventFocus:h,dragging:p,editable:m,classes:E,tabindex:C,attributes:I,roundValueFn:v,keyStep:S,trackLen:k,innerMin:_,innerMinRatio:A,innerMax:b,innerMaxRatio:q,positionProp:P,sizeProp:T,isReversed:y},methods:{onActivate:function(X){e(X,i(X)),t(),h.value=!0,c.value=!0,document.addEventListener("mouseup",ce,!0)},onMobileClick:function(X){e(X,i(X)),t(!0)},onBlur:oe,onKeyup:function(X){Yv.includes(X.keyCode)&&t(!0)},getContent:function(X,de,Se,Le){const Fe=[];r.innerTrackColor!=="transparent"&&Fe.push(x("div",{key:"inner",class:Z.value,style:W.value})),r.selectionColor!=="transparent"&&Fe.push(x("div",{key:"selection",class:B.value,style:X.value})),r.markers!==!1&&Fe.push(x("div",{key:"marker",class:F.value,style:Ie.value})),Le(Fe);const K=[pn("div",{key:"trackC",class:H.value,tabindex:de.value,...Se.value},[x("div",{class:z.value,style:j.value},Fe)],"slide",m.value,()=>qe.value)];return r.markerLabels!==!1&&K[r.switchMarkerLabelsSide===!0?"unshift":"push"](x("div",{key:"markerL",class:N.value},function(){if(a["marker-label-group"]!==void 0)return a["marker-label-group"](Ce.value);const ae=a["marker-label"]||q3;return fe.value.map(pe=>ae({marker:pe,...Ce.value}))}())),K},getThumbRenderFn:function(X){const de=w(()=>h.value!==!1||d.value!==X.focusValue&&d.value!=="both"?"":" q-slider--focus"),Se=w(()=>`q-slider__thumb q-slider__thumb${f.value} q-slider__thumb${f.value}-${y.value===!0?"rtl":"ltr"} absolute non-selectable`+de.value+(X.thumbColor.value!==void 0?` text-${X.thumbColor.value}`:"")),Le=w(()=>({width:r.thumbSize,height:r.thumbSize,[P.value]:100*X.ratio.value+"%",zIndex:d.value===X.focusValue?2:void 0})),Fe=w(()=>X.labelColor.value!==void 0?` text-${X.labelColor.value}`:""),K=w(()=>function(pe){if(r.vertical===!0)return null;const Pe=s.lang.rtl!==r.reverse?1-pe:pe;return{transform:`translateX(calc(${2*Pe-1} * ${r.thumbSize} / 2 + ${50-100*Pe}%))`}}(X.ratio.value)),ae=w(()=>"q-slider__text"+(X.labelTextColor.value!==void 0?` text-${X.labelTextColor.value}`:""));return()=>{const pe=[x("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[x("path",{d:r.thumbPath})]),x("div",{class:"q-slider__focus-ring fit"})];return r.label!==!0&&r.labelAlways!==!0||(pe.push(x("div",{class:ee.value+" absolute fit no-pointer-events"+Fe.value},[x("div",{class:ne.value,style:{minWidth:r.thumbSize}},[x("div",{class:te.value,style:K.value},[x("span",{class:ae.value},X.label.value)])])])),r.name!==void 0&&r.disable!==!0&&u(pe,"push")),x("div",{class:Se.value,style:Le.value,...X.getNodeData()},pe)}},convertRatioToModel:function(X){const{min:de,max:Se,step:Le}=r;let Fe=de+X*(Se-de);if(Le>0){const K=(Fe-_.value)%Le;Fe+=(Math.abs(K)>=Le/2?(K<0?-1:1)*Le:0)-K}return Fe=v.value(Fe),Et(Fe,_.value,b.value)},convertModelToRatio:U,getDraggingRatio:function(X,de){const Se=qi(X),Le=r.vertical===!0?Et((Se.top-de.top)/de.height,0,1):Et((Se.left-de.left)/de.width,0,1);return Et(y.value===!0?1-Le:Le,A.value,q.value)}}}}var R3=()=>({}),Ra=le({name:"QSlider",props:{...U2,modelValue:{required:!0,default:null,validator:t=>typeof t=="number"||t===null},labelValue:[String,Number]},emits:X2,setup(t,{emit:e}){const{proxy:{$q:i}}=ke(),{state:n,methods:r}=Y2({updateValue:f,updatePosition:function(_,b=n.dragging.value){const m=r.getDraggingRatio(_,b);s.value=r.convertRatioToModel(m),a.value=t.snap!==!0||t.step===0?m:r.convertModelToRatio(s.value)},getDragging:function(){return o.value.getBoundingClientRect()},formAttrs:Ou(t)}),o=$(null),a=$(0),s=$(0);function l(){s.value=t.modelValue===null?n.innerMin.value:Et(t.modelValue,n.innerMin.value,n.innerMax.value)}se(()=>`${t.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,l),l();const u=w(()=>r.convertModelToRatio(s.value)),c=w(()=>n.active.value===!0?a.value:u.value),h=w(()=>{const _={[n.positionProp.value]:100*n.innerMinRatio.value+"%",[n.sizeProp.value]:100*(c.value-n.innerMinRatio.value)+"%"};return t.selectionImg!==void 0&&(_.backgroundImage=`url(${t.selectionImg}) !important`),_}),d=r.getThumbRenderFn({focusValue:!0,getNodeData:R3,ratio:c,label:w(()=>t.labelValue!==void 0?t.labelValue:s.value),thumbColor:w(()=>t.thumbColor||t.color),labelColor:w(()=>t.labelColor),labelTextColor:w(()=>t.labelTextColor)}),p=w(()=>n.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:r.onMobileClick}:{onMousedown:r.onActivate,onFocus:g,onBlur:r.onBlur,onKeydown:y,onKeyup:r.onKeyup});function f(_){s.value!==t.modelValue&&e("update:modelValue",s.value),_===!0&&e("change",s.value)}function g(){n.focus.value=!0}function y(_){if(!Yv.includes(_.keyCode))return;Ke(_);const b=([34,33].includes(_.keyCode)?10:1)*n.keyStep.value,m=([34,37,40].includes(_.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*b;s.value=Et(n.roundValueFn.value(s.value+m),n.innerMin.value,n.innerMax.value),f()}return()=>{const _=r.getContent(h,n.tabindex,p,b=>{b.push(d())});return x("div",{ref:o,class:n.classes.value+(t.modelValue===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":t.modelValue},_)}}});function K2(){const t=$(!hn.value);return t.value===!1&&Rt(()=>{t.value=!0}),{isHydrated:t}}var Z2=typeof ResizeObserver<"u",Z1=Z2===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},ca=le({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:e}){let i,n=null,r={width:-1,height:-1};function o(l){l===!0||t.debounce===0||t.debounce==="0"?a():n===null&&(n=setTimeout(a,t.debounce))}function a(){if(n!==null&&(clearTimeout(n),n=null),i){const{offsetWidth:l,offsetHeight:u}=i;l===r.width&&u===r.height||(r={width:l,height:u},e("resize",r))}}const{proxy:s}=ke();if(s.trigger=o,Z2===!0){let l;const u=c=>{i=s.$el.parentNode,i?(l=new ResizeObserver(o),l.observe(i),a()):c!==!0&&lt(()=>{u(!0)})};return Rt(()=>{u()}),ot(()=>{n!==null&&clearTimeout(n),l!==void 0&&(l.disconnect!==void 0?l.disconnect():i&&l.unobserve(i))}),ni}{let l=function(){n!==null&&(clearTimeout(n),n=null),h!==void 0&&(h.removeEventListener!==void 0&&h.removeEventListener("resize",o,Pt.passive),h=void 0)},u=function(){l(),i&&i.contentDocument&&(h=i.contentDocument.defaultView,h.addEventListener("resize",o,Pt.passive),a())};const{isHydrated:c}=K2();let h;return Rt(()=>{lt(()=>{i=s.$el,i&&u()})}),ot(l),()=>{if(c.value===!0)return x("object",{class:"q--avoid-card-border",style:Z1.style,tabindex:-1,type:"text/html",data:Z1.url,"aria-hidden":"true",onLoad:u})}}}}),gu=!1;{const t=document.createElement("div");t.setAttribute("dir","rtl"),Object.assign(t.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(t),t.appendChild(e),t.scrollLeft=-1e3,gu=t.scrollLeft>=0,t.remove()}function F3(t,e,i){const n=i===!0?["left","right"]:["top","bottom"];return`absolute-${e===!0?n[0]:n[1]}${t?` text-${t}`:""}`}var A3=["left","center","right","justify"],Q1=le({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>A3.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,{registerTick:o}=us(),{registerTick:a}=us(),{registerTick:s}=us(),{registerTimeout:l,removeTimeout:u}=Sr(),{registerTimeout:c,removeTimeout:h}=Sr(),d=$(null),p=$(null),f=$(t.modelValue),g=$(!1),y=$(!0),_=$(!1),b=$(!1),m=[],v=$(0),S=$(!1);let C,k=null,L=null;const A=w(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:F3(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),q=w(()=>{const me=v.value,we=f.value;for(let qe=0;qe<me;qe++)if(m[qe].name.value===we)return!0;return!1}),P=w(()=>`q-tabs__content--align-${g.value===!0?"left":b.value===!0?"justify":t.align}`),T=w(()=>`q-tabs row no-wrap items-center q-tabs--${g.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),R=w(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+P.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),M=w(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),I=w(()=>t.vertical!==!0&&r.lang.rtl===!0),E=w(()=>gu===!1&&I.value===!0);function O({name:me,setCurrent:we,skipEmit:qe}){f.value!==me&&(qe!==!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",me),we!==!0&&t["onUpdate:modelValue"]!==void 0||(function(Ge,oe){const ce=Ge!=null&&Ge!==""?m.find(de=>de.name.value===Ge):null,X=oe!=null&&oe!==""?m.find(de=>de.name.value===oe):null;if(Ie===!0)Ie=!1;else if(ce&&X){const de=ce.tabIndicatorRef.value,Se=X.tabIndicatorRef.value;k!==null&&(clearTimeout(k),k=null),de.style.transition="none",de.style.transform="none",Se.style.transition="none",Se.style.transform="none";const Le=de.getBoundingClientRect(),Fe=Se.getBoundingClientRect();Se.style.transform=t.vertical===!0?`translate3d(0,${Le.top-Fe.top}px,0) scale3d(1,${Fe.height?Le.height/Fe.height:1},1)`:`translate3d(${Le.left-Fe.left}px,0,0) scale3d(${Fe.width?Le.width/Fe.width:1},1,1)`,s(()=>{k=setTimeout(()=>{k=null,Se.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Se.style.transform="none"},70)})}X&&g.value===!0&&F(X.rootRef.value)}(f.value,me),f.value=me))}function V(){o(()=>{B({width:d.value.offsetWidth,height:d.value.offsetHeight})})}function B(me){if(M.value===void 0||p.value===null)return;const we=me[M.value.container],qe=Math.min(p.value[M.value.scroll],Array.prototype.reduce.call(p.value.children,(oe,ce)=>oe+(ce[M.value.content]||0),0)),Ge=we>0&&qe>we;g.value=Ge,Ge===!0&&a(H),b.value=we<parseInt(t.breakpoint,10)}function F(me){const{left:we,width:qe,top:Ge,height:oe}=p.value.getBoundingClientRect(),ce=me.getBoundingClientRect();let X=t.vertical===!0?ce.top-Ge:ce.left-we;if(X<0)return p.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(X),void H();X+=t.vertical===!0?ce.height-oe:ce.width-qe,X>0&&(p.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(X),H())}function H(){const me=p.value;if(me===null)return;const we=me.getBoundingClientRect(),qe=t.vertical===!0?me.scrollTop:Math.abs(me.scrollLeft);I.value===!0?(y.value=Math.ceil(qe+we.width)<me.scrollWidth-1,_.value=qe>0):(y.value=qe>0,_.value=t.vertical===!0?Math.ceil(qe+we.height)<me.scrollHeight:Math.ceil(qe+we.width)<me.scrollWidth)}function ee(me){L!==null&&clearInterval(L),L=setInterval(()=>{(function(we){const qe=p.value,{get:Ge,set:oe}=z.value;let ce=!1,X=Ge(qe);const de=we<X?-1:1;return X+=5*de,X<0?(ce=!0,X=0):(de===-1&&X<=we||de===1&&X>=we)&&(ce=!0,X=we),oe(qe,X),H(),ce})(me)===!0&&N()},5)}function ne(){ee(E.value===!0?Number.MAX_SAFE_INTEGER:0)}function te(){ee(E.value===!0?0:Number.MAX_SAFE_INTEGER)}function N(){L!==null&&(clearInterval(L),L=null)}se(I,H),se(()=>t.modelValue,me=>{O({name:me,setCurrent:!0,skipEmit:!0})}),se(()=>t.outsideArrows,V);const z=w(()=>E.value===!0?{get:me=>Math.abs(me.scrollLeft),set:(me,we)=>{me.scrollLeft=-we}}:t.vertical===!0?{get:me=>me.scrollTop,set:(me,we)=>{me.scrollTop=we}}:{get:me=>me.scrollLeft,set:(me,we)=>{me.scrollLeft=we}});function j(me,we){for(const qe in me)if(me[qe]!==we[qe])return!1;return!0}function Z(){let me=null,we={matchedLen:0,queryDiff:9999,hrefLen:0};const qe=m.filter(X=>X.routeData!==void 0&&X.routeData.hasRouterLink.value===!0),{hash:Ge,query:oe}=n.$route,ce=Object.keys(oe).length;for(const X of qe){const de=X.routeData.exact.value===!0;if(X.routeData[de===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Se,query:Le,matched:Fe,href:K}=X.routeData.resolvedLink.value,ae=Object.keys(Le).length;if(de===!0){if(Se!==Ge||ae!==ce||j(oe,Le)===!1)continue;me=X.name.value;break}if(Se!==""&&Se!==Ge||ae!==0&&j(Le,oe)===!1)continue;const pe={matchedLen:Fe.length,queryDiff:ce-ae,hrefLen:K.length-Se.length};if(pe.matchedLen>we.matchedLen)me=X.name.value,we=pe;else if(pe.matchedLen===we.matchedLen){if(pe.queryDiff<we.queryDiff)me=X.name.value,we=pe;else if(pe.queryDiff!==we.queryDiff)continue;pe.hrefLen>we.hrefLen&&(me=X.name.value,we=pe)}}me!==null||m.some(X=>X.routeData===void 0&&X.name.value===f.value)!==!0?O({name:me,setCurrent:!0}):Ie=!1}function W(me){if(u(),S.value!==!0&&d.value!==null&&me.target&&typeof me.target.closest=="function"){const we=me.target.closest(".q-tab");we&&d.value.contains(we)===!0&&(S.value=!0,g.value===!0&&F(we))}}function U(){l(()=>{S.value=!1},30)}function ye(){he.avoidRouteWatcher===!1?c(Z):h()}function ue(){if(C===void 0){const me=se(()=>n.$route.fullPath,ye);C=()=>{me(),C=void 0}}}const he={currentModel:f,tabProps:A,hasFocus:S,hasActiveTab:q,registerTab:function(me){m.push(me),v.value++,V(),me.routeData===void 0||n.$route===void 0?c(()=>{if(g.value===!0){const we=f.value,qe=we!=null&&we!==""?m.find(Ge=>Ge.name.value===we):null;qe&&F(qe.rootRef.value)}}):(ue(),me.routeData.hasRouterLink.value===!0&&ye())},unregisterTab:function(me){m.splice(m.indexOf(me),1),v.value--,V(),C!==void 0&&me.routeData!==void 0&&(m.every(we=>we.routeData===void 0)===!0&&C(),ye())},verifyRouteModel:ye,updateModel:O,onKbdNavigate:function(me,we){const qe=Array.prototype.filter.call(p.value.children,de=>de===we||de.matches&&de.matches(".q-tab.q-focusable")===!0),Ge=qe.length;if(Ge===0)return;if(me===36)return F(qe[0]),qe[0].focus(),!0;if(me===35)return F(qe[Ge-1]),qe[Ge-1].focus(),!0;const oe=me===(t.vertical===!0?38:37),ce=me===(t.vertical===!0?40:39),X=oe===!0?-1:ce===!0?1:void 0;if(X!==void 0){const de=I.value===!0?-1:1,Se=qe.indexOf(we)+X*de;return Se>=0&&Se<Ge&&(F(qe[Se]),qe[Se].focus({preventScroll:!0})),!0}},avoidRouteWatcher:!1};function fe(){k!==null&&clearTimeout(k),N(),C!==void 0&&C()}let Ce,Ie;return uo(h2,he),ot(fe),Mr(()=>{Ce=C!==void 0,fe()}),da(()=>{Ce===!0&&(ue(),Ie=!0,ye()),V()}),()=>x("div",{ref:d,class:T.value,role:"tablist",onFocusin:W,onFocusout:U},[x(ca,{onResize:B}),x("div",{ref:p,class:R.value,onScroll:H},ze(e.default)),x(gt,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(y.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||r.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:ne,onTouchstartPassive:ne,onMouseupPassive:N,onMouseleavePassive:N,onTouchendPassive:N}),x(gt,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(_.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||r.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:te,onTouchstartPassive:te,onMouseupPassive:N,onMouseleavePassive:N,onTouchendPassive:N})])}}),O3=0,Q2=["click","keydown"],J2={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>"t_"+O3++},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function eS(t,e,i,n){const r=Ni(h2,wt);if(r===wt)return wt;const{proxy:o}=ke(),a=$(null),s=$(null),l=$(null),u=w(()=>t.disable!==!0&&t.ripple!==!1&&Object.assign({keyCodes:[13,32],early:!0},t.ripple===!0?{}:t.ripple)),c=w(()=>r.currentModel.value===t.name),h=w(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(t.icon&&t.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(t.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(t.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),d=w(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(t.contentClass!==void 0?` ${t.contentClass}`:"")),p=w(()=>t.disable===!0||r.hasFocus.value===!0||c.value===!1&&r.hasActiveTab.value===!0?-1:t.tabindex||0);function f(_,b){if(b!==!0&&a.value!==null&&a.value.focus(),t.disable!==!0){if(n===void 0)return r.updateModel({name:t.name}),void i("click",_);if(n.hasRouterLink.value===!0){const m=(v={})=>{let S;const C=v.to===void 0||Cn(v.to,t.to)===!0?r.avoidRouteWatcher=fu():null;return n.navigateToRouterLink(_,{...v,returnRouterError:!0}).catch(k=>{S=k}).then(k=>{if(C===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,S===void 0&&(k===void 0||k.message!==void 0&&k.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:t.name})),v.returnRouterError===!0)return S!==void 0?Promise.reject(S):k})};return i("click",_,m),void(_.defaultPrevented!==!0&&m())}i("click",_)}else n!==void 0&&n.hasRouterLink.value===!0&&Ke(_)}function g(_){dn(_,[13,32])?f(_,!0):la(_)!==!0&&_.keyCode>=35&&_.keyCode<=40&&_.altKey!==!0&&_.metaKey!==!0&&r.onKbdNavigate(_.keyCode,o.$el)===!0&&Ke(_),i("keydown",_)}const y={name:w(()=>t.name),rootRef:s,tabIndicatorRef:l,routeData:n};return ot(()=>{r.unregisterTab(y)}),Rt(()=>{r.registerTab(y)}),{renderTab:function(_,b){const m={ref:s,class:h.value,tabindex:p.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:f,onKeydown:g,...b};return Vi(x(_,m,function(){const v=r.tabProps.value.narrowIndicator,S=[],C=x("div",{ref:l,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});t.icon!==void 0&&S.push(x(gt,{class:"q-tab__icon",name:t.icon})),t.label!==void 0&&S.push(x("div",{class:"q-tab__label"},t.label)),t.alert!==!1&&S.push(t.alertIcon!==void 0?x(gt,{class:"q-tab__alert-icon",color:t.alert!==!0?t.alert:void 0,name:t.alertIcon}):x("div",{class:"q-tab__alert"+(t.alert!==!0?` text-${t.alert}`:"")})),v===!0&&S.push(C);const k=[x("div",{class:"q-focus-helper",tabindex:-1,ref:a}),x("div",{class:d.value},Xt(e.default,S))];return v===!1&&k.push(C),k}()),[[gd,u.value]])},$tabs:r}}var pl=le({name:"QTab",props:J2,emits:Q2,setup(t,{slots:e,emit:i}){const{renderTab:n}=eS(t,e,i);return()=>n("div")}}),z3=le({name:"QTabPanels",props:{...Vv,...dt},emits:$v,setup(t,{slots:e}){const i=ke(),n=pt(t,i.proxy.$q),{updatePanelsList:r,getPanelContent:o,panelDirectives:a}=Gv(),s=w(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(e),pn("div",{class:s.value},o(),"pan",t.swipeable,()=>a.value))}}),Ap=le({name:"QTabPanel",props:Nv,setup:(t,{slots:e})=>()=>x("div",{class:"q-tab-panel",role:"tabpanel"},ze(e.default))}),J1=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,e_=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,t_=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Cc=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Mc=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,th={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>J1.test(t),hexaColor:t=>e_.test(t),hexOrHexaColor:t=>t_.test(t),rgbColor:t=>Cc.test(t),rgbaColor:t=>Mc.test(t),rgbOrRgbaColor:t=>Cc.test(t)||Mc.test(t),hexOrRgbColor:t=>J1.test(t)||Cc.test(t),hexaOrRgbaColor:t=>e_.test(t)||Mc.test(t),anyColor:t=>t_.test(t)||Cc.test(t)||Mc.test(t)},D3=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function i_({r:t,g:e,b:i,a:n}){const r=n!==void 0;if(t=Math.round(t),e=Math.round(e),i=Math.round(i),t>255||e>255||i>255||r&&n>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return n=r?(256|Math.round(255*n/100)).toString(16).slice(1):"","#"+(i|e<<8|t<<16|1<<24).toString(16).slice(1)+n}function n_({r:t,g:e,b:i,a:n}){return`rgb${n!==void 0?"a":""}(${t},${e},${i}${n!==void 0?","+n/100:""})`}function tS(t){if(typeof t!="string")throw new TypeError("Expected a string");(t=t.replace(/^#/,"")).length===3?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:t.length===4&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16);return t.length>6?{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:Math.round((255&e)/2.55)}:{r:e>>16,g:e>>8&255,b:255&e}}function r_({h:t,s:e,v:i,a:n}){let r,o,a;e/=100,i/=100,t/=360;const s=Math.floor(6*t),l=6*t-s,u=i*(1-e),c=i*(1-l*e),h=i*(1-(1-l)*e);switch(s%6){case 0:r=i,o=h,a=u;break;case 1:r=c,o=i,a=u;break;case 2:r=u,o=i,a=h;break;case 3:r=u,o=c,a=i;break;case 4:r=h,o=u,a=i;break;case 5:r=i,o=u,a=c}return{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*a),a:n}}function Op({r:t,g:e,b:i,a:n}){const r=Math.max(t,e,i),o=Math.min(t,e,i),a=r-o,s=r===0?0:a/r,l=r/255;let u;switch(r){case o:u=0;break;case t:u=e-i+a*(e<i?6:0),u/=6*a;break;case e:u=i-t+2*a,u/=6*a;break;case i:u=t-e+4*a,u/=6*a}return{h:Math.round(360*u),s:Math.round(100*s),v:Math.round(100*l),a:n}}function o_(t){if(typeof t!="string")throw new TypeError("Expected a string");const e=t.replace(/ /g,""),i=D3.exec(e);if(i===null)return tS(e);const n={r:Math.min(255,parseInt(i[2],10)),g:Math.min(255,parseInt(i[3],10)),b:Math.min(255,parseInt(i[4],10))};if(i[1]){const r=parseFloat(i[5]);n.a=100*Math.min(1,isNaN(r)===!0?1:r)}return n}var j3=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],a_="M5 5 h10 v10 h-10 v-10 z";le({name:"QColor",props:{...dt,...mn,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:t=>["spectrum","tune","palette"].includes(t)},formatModel:{type:String,default:"auto",validator:t=>["auto","hex","rgb","hexa","rgba"].includes(t)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(t,{emit:e}){const{proxy:i}=ke(),{$q:n}=i,r=pt(t,n),{getCache:o}=zu(),a=$(null),s=$(null),l=w(()=>t.formatModel==="auto"?null:t.formatModel.indexOf("hex")!==-1),u=w(()=>t.formatModel==="auto"?null:t.formatModel.indexOf("a")!==-1),c=$(t.formatModel==="auto"?t.modelValue===void 0||t.modelValue===null||t.modelValue===""||t.modelValue.startsWith("#")?"hex":"rgb":t.formatModel.startsWith("hex")?"hex":"rgb"),h=$(t.defaultView),d=$(P(t.modelValue||t.defaultValue)),p=w(()=>t.disable!==!0&&t.readonly!==!0),f=w(()=>t.modelValue===void 0||t.modelValue===null||t.modelValue===""||t.modelValue.startsWith("#")),g=w(()=>l.value!==null?l.value:f.value),y=go(w(()=>({type:"hidden",name:t.name,value:d.value[g.value===!0?"hex":"rgb"]}))),_=w(()=>u.value!==null?u.value:d.value.a!==void 0),b=w(()=>({backgroundColor:d.value.rgb||"#000"})),m=w(()=>"q-color-picker__header-content q-color-picker__header-content--"+(d.value.a!==void 0&&d.value.a<65||function(j){if(typeof j!="string"&&(!j||j.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const Z=typeof j=="string"?o_(j):j,W=Z.r/255,U=Z.g/255,ye=Z.b/255;return .2126*(W<=.03928?W/12.92:Math.pow((W+.055)/1.055,2.4))+.7152*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))+.0722*(ye<=.03928?ye/12.92:Math.pow((ye+.055)/1.055,2.4))}(d.value)>.4?"light":"dark")),v=w(()=>({background:`hsl(${d.value.h},100%,50%)`})),S=w(()=>({top:100-d.value.v+"%",[n.lang.rtl===!0?"right":"left"]:`${d.value.s}%`})),C=w(()=>t.palette!==void 0&&t.palette.length!==0?t.palette:j3),k=w(()=>"q-color-picker"+(t.bordered===!0?" q-color-picker--bordered":"")+(t.square===!0?" q-color-picker--square no-border-radius":"")+(t.flat===!0?" q-color-picker--flat no-shadow":"")+(t.disable===!0?" disabled":"")+(r.value===!0?" q-color-picker--dark q-dark":"")),L=w(()=>t.disable===!0?{"aria-disabled":"true"}:{}),A=w(()=>[[cn,O,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function q(j,Z){d.value.hex=i_(j),d.value.rgb=n_(j),d.value.r=j.r,d.value.g=j.g,d.value.b=j.b,d.value.a=j.a;const W=d.value[g.value===!0?"hex":"rgb"];e("update:modelValue",W),Z===!0&&e("change",W)}function P(j){const Z=u.value!==void 0?u.value:t.formatModel==="auto"?null:t.formatModel.indexOf("a")!==-1;if(typeof j!="string"||j.length===0||th.anyColor(j.replace(/ /g,""))!==!0)return{h:0,s:0,v:0,r:0,g:0,b:0,a:Z===!0?100:void 0,hex:void 0,rgb:void 0};const W=o_(j);return Z===!0&&W.a===void 0&&(W.a=100),W.hex=i_(W),W.rgb=n_(W),Object.assign(W,Op(W))}function T(j,Z,W){const U=a.value;if(U===null)return;const ye=U.clientWidth,ue=U.clientHeight,he=U.getBoundingClientRect();let fe=Math.min(ye,Math.max(0,j-he.left));n.lang.rtl===!0&&(fe=ye-fe);const Ce=Math.min(ue,Math.max(0,Z-he.top)),Ie=Math.round(100*fe/ye),me=Math.round(100*Math.max(0,Math.min(1,-Ce/ue+1))),we=r_({h:d.value.h,s:Ie,v:me,a:_.value===!0?d.value.a:void 0});d.value.s=Ie,d.value.v=me,q(we,W)}function R(j,Z){const W=Math.round(j),U=r_({h:W,s:d.value.s,v:d.value.v,a:_.value===!0?d.value.a:void 0});d.value.h=W,q(U,Z)}function M(j){R(j,!0)}function I(j,Z,W,U,ye){if(U!==void 0&&Nt(U),!/^[0-9]+$/.test(j))return void(ye===!0&&i.$forceUpdate());const ue=Math.floor(Number(j));if(ue<0||ue>W)return void(ye===!0&&i.$forceUpdate());const he={r:Z==="r"?ue:d.value.r,g:Z==="g"?ue:d.value.g,b:Z==="b"?ue:d.value.b,a:_.value===!0?Z==="a"?ue:d.value.a:void 0};if(Z!=="a"){const fe=Op(he);d.value.h=fe.h,d.value.s=fe.s,d.value.v=fe.v}if(q(he,ye),U!==void 0&&ye!==!0&&U.target.selectionEnd!==void 0){const fe=U.target.selectionEnd;lt(()=>{U.target.setSelectionRange(fe,fe)})}}function E(j,Z){let W;const U=j.target.value;if(Nt(j),c.value==="hex"){if(U.length!==(_.value===!0?9:7)||!/^#[0-9A-Fa-f]+$/.test(U))return!0;W=tS(U)}else{let ue;if(!U.endsWith(")"))return!0;if(_.value!==!0&&U.startsWith("rgb(")){if(ue=U.substring(4,U.length-1).split(",").map(he=>parseInt(he,10)),ue.length!==3||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(U))return!0}else{if(_.value!==!0||!U.startsWith("rgba("))return!0;{if(ue=U.substring(5,U.length-1).split(","),ue.length!==4||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(U))return!0;for(let fe=0;fe<3;fe++){const Ce=parseInt(ue[fe],10);if(Ce<0||Ce>255)return!0;ue[fe]=Ce}const he=parseFloat(ue[3]);if(he<0||he>1)return!0;ue[3]=he}}if(ue[0]<0||ue[0]>255||ue[1]<0||ue[1]>255||ue[2]<0||ue[2]>255||_.value===!0&&(ue[3]<0||ue[3]>1))return!0;W={r:ue[0],g:ue[1],b:ue[2],a:_.value===!0?100*ue[3]:void 0}}const ye=Op(W);if(d.value.h=ye.h,d.value.s=ye.s,d.value.v=ye.v,q(W,Z),Z!==!0){const ue=j.target.selectionEnd;lt(()=>{j.target.setSelectionRange(ue,ue)})}}function O(j){j.isFinal?T(j.position.left,j.position.top,!0):V(j)}se(()=>t.modelValue,j=>{const Z=P(j||t.defaultValue);Z.hex!==d.value.hex&&(d.value=Z)}),se(()=>t.defaultValue,j=>{if(!t.modelValue&&j){const Z=P(j);Z.hex!==d.value.hex&&(d.value=Z)}});const V=b2(j=>{T(j.position.left,j.position.top)},20);function B(j){T(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset,!0)}function F(j){T(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)}function H(j){s.value!==null&&(s.value.$el.style.opacity=j?1:0)}function ee(j){c.value=j}function ne(j){h.value=j}function te(){const j={ref:a,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(p.value!==!0?" readonly":""),style:v.value,...p.value===!0?{onClick:B,onMousedown:F}:{}},Z=[x("div",{style:{paddingBottom:"100%"}}),x("div",{class:"q-color-picker__spectrum-white absolute-full"}),x("div",{class:"q-color-picker__spectrum-black absolute-full"}),x("div",{class:"absolute",style:S.value},[d.value.hex!==void 0?x("div",{class:"q-color-picker__spectrum-circle"}):null])],W=[x(Ra,{class:"q-color-picker__hue non-selectable",modelValue:d.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:p.value!==!0,thumbPath:a_,"onUpdate:modelValue":R,onChange:M})];return _.value===!0&&W.push(x(Ra,{class:"q-color-picker__alpha non-selectable",modelValue:d.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==",readonly:p.value!==!0,hideSelection:!0,thumbPath:a_,...o("alphaSlide",{"onUpdate:modelValue":U=>I(U,"a",100),onChange:U=>I(U,"a",100,void 0,!0)})})),[pn("div",j,Z,"spec",p.value,()=>A.value),x("div",{class:"q-color-picker__sliders"},W)]}function N(){return[x("div",{class:"row items-center no-wrap"},[x("div","R"),x(Ra,{modelValue:d.value.r,min:0,max:255,color:"red",dark:r.value,readonly:p.value!==!0,...o("rSlide",{"onUpdate:modelValue":j=>I(j,"r",255),onChange:j=>I(j,"r",255,void 0,!0)})}),x("input",{value:d.value.r,maxlength:3,readonly:p.value!==!0,onChange:Nt,...o("rIn",{onInput:j=>I(j.target.value,"r",255,j),onBlur:j=>I(j.target.value,"r",255,j,!0)})})]),x("div",{class:"row items-center no-wrap"},[x("div","G"),x(Ra,{modelValue:d.value.g,min:0,max:255,color:"green",dark:r.value,readonly:p.value!==!0,...o("gSlide",{"onUpdate:modelValue":j=>I(j,"g",255),onChange:j=>I(j,"g",255,void 0,!0)})}),x("input",{value:d.value.g,maxlength:3,readonly:p.value!==!0,onChange:Nt,...o("gIn",{onInput:j=>I(j.target.value,"g",255,j),onBlur:j=>I(j.target.value,"g",255,j,!0)})})]),x("div",{class:"row items-center no-wrap"},[x("div","B"),x(Ra,{modelValue:d.value.b,min:0,max:255,color:"blue",readonly:p.value!==!0,dark:r.value,...o("bSlide",{"onUpdate:modelValue":j=>I(j,"b",255),onChange:j=>I(j,"b",255,void 0,!0)})}),x("input",{value:d.value.b,maxlength:3,readonly:p.value!==!0,onChange:Nt,...o("bIn",{onInput:j=>I(j.target.value,"b",255,j),onBlur:j=>I(j.target.value,"b",255,j,!0)})})]),_.value===!0?x("div",{class:"row items-center no-wrap"},[x("div","A"),x(Ra,{modelValue:d.value.a,color:"grey",readonly:p.value!==!0,dark:r.value,...o("aSlide",{"onUpdate:modelValue":j=>I(j,"a",100),onChange:j=>I(j,"a",100,void 0,!0)})}),x("input",{value:d.value.a,maxlength:3,readonly:p.value!==!0,onChange:Nt,...o("aIn",{onInput:j=>I(j.target.value,"a",100,j),onBlur:j=>I(j.target.value,"a",100,j,!0)})})]):null]}function z(){return[x("div",{class:"row items-center q-color-picker__palette-rows"+(p.value===!0?" q-color-picker__palette-rows--editable":"")},C.value.map(j=>x("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:j},...p.value===!0?o("palette#"+j,{onClick:()=>{(function(Z){const W=P(Z),U={r:W.r,g:W.g,b:W.b,a:W.a};U.a===void 0&&(U.a=d.value.a),d.value.h=W.h,d.value.s=W.s,d.value.v=W.v,q(U,!0)})(j)}}):{}})))]}return()=>{const j=[x(z3,{modelValue:h.value,animated:!0},()=>[x(Ap,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},te),x(Ap,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},N),x(Ap,{class:"q-color-picker__palette-tab",name:"palette"},z)])];return t.name!==void 0&&t.disable!==!0&&y(j,"push"),t.noHeader!==!0&&j.unshift(function(){const Z=[];return t.noHeaderTabs!==!0&&Z.push(x(Q1,{class:"q-color-picker__header-tabs",modelValue:c.value,dense:!0,align:"justify","onUpdate:modelValue":ee},()=>[x(pl,{label:"HEX"+(_.value===!0?"A":""),name:"hex",ripple:!1}),x(pl,{label:"RGB"+(_.value===!0?"A":""),name:"rgb",ripple:!1})])),Z.push(x("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[x("input",{class:"fit",value:d.value[c.value],...p.value!==!0?{readonly:!0}:{},...o("topIn",{onInput:W=>{H(E(W)===!0)},onChange:Nt,onBlur:W=>{E(W,!0)===!0&&i.$forceUpdate(),H(!1)}})}),x(gt,{ref:s,class:"q-color-picker__error-icon absolute no-pointer-events",name:n.iconSet.type.negative})])),x("div",{class:"q-color-picker__header relative-position overflow-hidden"},[x("div",{class:"q-color-picker__header-bg absolute-full"}),x("div",{class:m.value,style:b.value},Z)])}()),t.noFooter!==!0&&j.push(x("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[x(Q1,{class:"absolute-full",modelValue:h.value,dense:!0,align:"justify","onUpdate:modelValue":ne},()=>[x(pl,{icon:n.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),x(pl,{icon:n.iconSet.colorPicker.tune,name:"tune",ripple:!1}),x(pl,{icon:n.iconSet.colorPicker.palette,name:"palette",ripple:!1})])])),x("div",{class:k.value,...L.value},j)}}});var Kr=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function B3(t,e,i){return Object.prototype.toString.call(t)==="[object Date]"&&(i=t.getDate(),e=t.getMonth()+1,t=t.getFullYear()),function(n){const r=nS(n).gy;let o,a,s,l=r-621;const u=iS(l,!1),c=lm(r,3,u.march);if(s=n-c,s>=0){if(s<=185)return a=1+zt(s,31),o=Ji(s,31)+1,{jy:l,jm:a,jd:o};s-=186}else l-=1,s+=179,u.leap===1&&(s+=1);return a=7+zt(s,30),o=Ji(s,30)+1,{jy:l,jm:a,jd:o}}(lm(t,e,i))}function s_(t,e,i){return nS(function(n,r,o){const a=iS(n,!0);return lm(a.gy,3,a.march)+31*(r-1)-zt(r,7)*(r-7)+o-1}(t,e,i))}function N3(t){return function(e){const i=Kr.length;let n,r,o,a,s,l=Kr[0];if(e<l||e>=Kr[i-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<i&&(n=Kr[s],r=n-l,!(e<n));s+=1)l=n;return a=e-l,r-a<6&&(a=a-r+33*zt(r+4,33)),o=Ji(Ji(a+1,33)-1,4),o===-1&&(o=4),o}(t)===0}function ih(t,e){return e<=6?31:e<=11||N3(t)?30:29}function iS(t,e){const i=Kr.length,n=t+621;let r,o,a,s,l,u=-14,c=Kr[0];if(t<c||t>=Kr[i-1])throw new Error("Invalid Jalaali year "+t);for(l=1;l<i&&(r=Kr[l],o=r-c,!(t<r));l+=1)u=u+8*zt(o,33)+zt(Ji(o,33),4),c=r;s=t-c,u=u+8*zt(s,33)+zt(Ji(s,33)+3,4),Ji(o,33)===4&&o-s==4&&(u+=1);const h=20+u-(zt(n,4)-zt(3*(zt(n,100)+1),4)-150);return e||(o-s<6&&(s=s-o+33*zt(o+4,33)),a=Ji(Ji(s+1,33)-1,4),a===-1&&(a=4)),{leap:a,gy:n,march:h}}function lm(t,e,i){let n=zt(1461*(t+zt(e-8,6)+100100),4)+zt(153*Ji(e+9,12)+2,5)+i-34840408;return n=n-zt(3*zt(t+100100+zt(e-8,6),100),4)+752,n}function nS(t){let e=4*t+139361631;e=e+4*zt(3*zt(4*t+183187720,146097),4)-3908;const i=5*zt(Ji(e,1461),4)+308,n=zt(Ji(i,153),5)+1,r=Ji(zt(i,153),12)+1;return{gy:zt(e,1461)-100100+zt(8-r,6),gm:r,gd:n}}function zt(t,e){return~~(t/e)}function Ji(t,e){return t-~~(t/e)*e}var V3=["gregorian","persian"],Hh={mask:{type:String},locale:Object,calendar:{type:String,validator:t=>V3.includes(t),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},rS=["update:modelValue"];function ar(t){return t.year+"/"+yt(t.month)+"/"+yt(t.day)}function oS(t,e){const i=w(()=>t.disable!==!0&&t.readonly!==!0),n=w(()=>i.value===!0?0:-1),r=w(()=>{const o=[];return t.color!==void 0&&o.push(`bg-${t.color}`),t.textColor!==void 0&&o.push(`text-${t.textColor}`),o.join(" ")});return{editable:i,tabindex:n,headerClass:r,getLocale:function(){return t.locale!==void 0?{...e.lang.date,...t.locale}:e.lang.date},getCurrentDate:function(o){const a=new Date,s=o===!0?null:0;if(t.calendar==="persian"){const l=B3(a);return{year:l.jy,month:l.jm,day:l.jd}}return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:s,minute:s,second:s,millisecond:s}}}}var $3=864e5,um=6e4,aS="YYYY-MM-DDTHH:mm:ss.SSSZ",G3=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,H3=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,zp={};function sS(t,e){return t!==void 0?t:e!==void 0?e.date:Qg.date}function l_(t,e=""){const i=t>0?"-":"+",n=Math.abs(t),r=n%60;return i+yt(Math.floor(n/60))+e+yt(r)}function kl(t,e,i,n,r){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(o,r),t==null||t===""||typeof t!="string")return o;e===void 0&&(e=aS);const a=sS(i,s2.props),s=a.months,l=a.monthsShort,{regex:u,map:c}=function(p,f){const g="("+f.days.join("|")+")",y=p+g;if(zp[y]!==void 0)return zp[y];const _="("+f.daysShort.join("|")+")",b="("+f.months.join("|")+")",m="("+f.monthsShort.join("|")+")",v={};let S=0;const C=p.replace(H3,L=>{switch(S++,L){case"YY":return v.YY=S,"(-?\\d{1,2})";case"YYYY":return v.YYYY=S,"(-?\\d{1,4})";case"M":return v.M=S,"(\\d{1,2})";case"Mo":return v.M=S++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return v.M=S,"(\\d{2})";case"MMM":return v.MMM=S,m;case"MMMM":return v.MMMM=S,b;case"D":return v.D=S,"(\\d{1,2})";case"Do":return v.D=S++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return v.D=S,"(\\d{2})";case"H":return v.H=S,"(\\d{1,2})";case"HH":return v.H=S,"(\\d{2})";case"h":return v.h=S,"(\\d{1,2})";case"hh":return v.h=S,"(\\d{2})";case"m":return v.m=S,"(\\d{1,2})";case"mm":return v.m=S,"(\\d{2})";case"s":return v.s=S,"(\\d{1,2})";case"ss":return v.s=S,"(\\d{2})";case"S":return v.S=S,"(\\d{1})";case"SS":return v.S=S,"(\\d{2})";case"SSS":return v.S=S,"(\\d{3})";case"A":return v.A=S,"(AM|PM)";case"a":return v.a=S,"(am|pm)";case"aa":return v.aa=S,"(a\\.m\\.|p\\.m\\.)";case"ddd":return _;case"dddd":return g;case"Q":case"d":case"E":return"(\\d{1})";case"do":return S++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return S++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return S++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return v.Z=S,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return v.ZZ=S,"(Z|[+-]\\d{2}\\d{2})";case"X":return v.X=S,"(-?\\d+)";case"x":return v.x=S,"(-?\\d{4,})";default:return S--,L[0]==="["&&(L=L.substring(1,L.length-1)),L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),k={map:v,regex:new RegExp("^"+C)};return zp[y]=k,k}(e,a),h=t.match(u);if(h===null)return o;let d="";if(c.X!==void 0||c.x!==void 0){const p=parseInt(h[c.X!==void 0?c.X:c.x],10);if(isNaN(p)===!0||p<0)return o;const f=new Date(p*(c.X!==void 0?1e3:1));o.year=f.getFullYear(),o.month=f.getMonth()+1,o.day=f.getDate(),o.hour=f.getHours(),o.minute=f.getMinutes(),o.second=f.getSeconds(),o.millisecond=f.getMilliseconds()}else{if(c.YYYY!==void 0)o.year=parseInt(h[c.YYYY],10);else if(c.YY!==void 0){const p=parseInt(h[c.YY],10);o.year=p<0?p:2e3+p}if(c.M!==void 0){if(o.month=parseInt(h[c.M],10),o.month<1||o.month>12)return o}else c.MMM!==void 0?o.month=l.indexOf(h[c.MMM])+1:c.MMMM!==void 0&&(o.month=s.indexOf(h[c.MMMM])+1);if(c.D!==void 0){if(o.day=parseInt(h[c.D],10),o.year===null||o.month===null||o.day<1)return o;const p=n!=="persian"?new Date(o.year,o.month,0).getDate():ih(o.year,o.month);if(o.day>p)return o}c.H!==void 0?o.hour=parseInt(h[c.H],10)%24:c.h!==void 0&&(o.hour=parseInt(h[c.h],10)%12,(c.A&&h[c.A]==="PM"||c.a&&h[c.a]==="pm"||c.aa&&h[c.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),c.m!==void 0&&(o.minute=parseInt(h[c.m],10)%60),c.s!==void 0&&(o.second=parseInt(h[c.s],10)%60),c.S!==void 0&&(o.millisecond=parseInt(h[c.S],10)*10**(3-h[c.S].length)),c.Z===void 0&&c.ZZ===void 0||(d=c.Z!==void 0?h[c.Z].replace(":",""):h[c.ZZ],o.timezoneOffset=(d[0]==="+"?-1:1)*(60*d.slice(1,3)+1*d.slice(3,5)))}return o.dateHash=yt(o.year,6)+"/"+yt(o.month)+"/"+yt(o.day),o.timeHash=yt(o.hour)+":"+yt(o.minute)+":"+yt(o.second)+d,o}function Dp(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const i=new Date(e.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const n=e.getTimezoneOffset()-i.getTimezoneOffset();e.setHours(e.getHours()-n);const r=(e-i)/6048e5;return 1+Math.floor(r)}function sr(t,e,i){const n=new Date(t),r="set";switch(e){case"year":case"years":n[`${r}Month`](0);case"month":case"months":n[`${r}Date`](1);case"day":case"days":case"date":n[`${r}Hours`](0);case"hour":case"hours":n[`${r}Minutes`](0);case"minute":case"minutes":n[`${r}Seconds`](0);case"second":case"seconds":n[`${r}Milliseconds`](0)}return n}function kc(t,e,i){return(t.getTime()-t.getTimezoneOffset()*um-(e.getTime()-e.getTimezoneOffset()*um))/i}function lS(t,e,i="days"){const n=new Date(t),r=new Date(e);switch(i){case"years":case"year":return n.getFullYear()-r.getFullYear();case"months":case"month":return 12*(n.getFullYear()-r.getFullYear())+n.getMonth()-r.getMonth();case"days":case"day":case"date":return kc(sr(n,"day"),sr(r,"day"),$3);case"hours":case"hour":return kc(sr(n,"hour"),sr(r,"hour"),36e5);case"minutes":case"minute":return kc(sr(n,"minute"),sr(r,"minute"),um);case"seconds":case"second":return kc(sr(n,"second"),sr(r,"second"),1e3)}}function jp(t){return lS(t,sr(t,"year"),"days")+1}function Fa(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}var u_={YY(t,e,i){const n=this.YYYY(t,e,i)%100;return n>=0?yt(n):"-"+yt(Math.abs(n))},YYYY:(t,e,i)=>i??t.getFullYear(),M:t=>t.getMonth()+1,Mo:t=>Fa(t.getMonth()+1),MM:t=>yt(t.getMonth()+1),MMM:(t,e)=>e.monthsShort[t.getMonth()],MMMM:(t,e)=>e.months[t.getMonth()],Q:t=>Math.ceil((t.getMonth()+1)/3),Qo(t){return Fa(this.Q(t))},D:t=>t.getDate(),Do:t=>Fa(t.getDate()),DD:t=>yt(t.getDate()),DDD:t=>jp(t),DDDo:t=>Fa(jp(t)),DDDD:t=>yt(jp(t),3),d:t=>t.getDay(),do:t=>Fa(t.getDay()),dd:(t,e)=>e.days[t.getDay()].slice(0,2),ddd:(t,e)=>e.daysShort[t.getDay()],dddd:(t,e)=>e.days[t.getDay()],E:t=>t.getDay()||7,w:t=>Dp(t),wo:t=>Fa(Dp(t)),ww:t=>yt(Dp(t)),H:t=>t.getHours(),HH:t=>yt(t.getHours()),h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return yt(this.h(t))},m:t=>t.getMinutes(),mm:t=>yt(t.getMinutes()),s:t=>t.getSeconds(),ss:t=>yt(t.getSeconds()),S:t=>Math.floor(t.getMilliseconds()/100),SS:t=>yt(Math.floor(t.getMilliseconds()/10)),SSS:t=>yt(t.getMilliseconds(),3),A:t=>t.getHours()<12?"AM":"PM",a:t=>t.getHours()<12?"am":"pm",aa:t=>t.getHours()<12?"a.m.":"p.m.",Z:(t,e,i,n)=>l_(n??t.getTimezoneOffset(),":"),ZZ:(t,e,i,n)=>l_(n??t.getTimezoneOffset()),X:t=>Math.floor(t.getTime()/1e3),x:t=>t.getTime()};function uS(t,e,i,n,r){if(t!==0&&!t||t===1/0||t===-1/0)return;const o=new Date(t);if(isNaN(o))return;e===void 0&&(e=aS);const a=sS(i,s2.props);return e.replace(G3,(s,l)=>s in u_?u_[s](o,a,n,r):l===void 0?s:l.split("\\]").join("]"))}var _o=20,W3=["Calendar","Years","Months"],c_=t=>W3.includes(t),Bp=t=>/^-?[\d]+\/[0-1]\d$/.test(t),Aa="  ";function Fr(t){return t.year+"/"+yt(t.month)}function cS(t,e,i){function n(){}return ot(()=>{t.value}),{removeFromHistory:n,addToHistory(){}}}le({name:"QDate",props:{...Hh,...mn,...dt,modelValue:{required:!0,validator:t=>typeof t=="string"||Array.isArray(t)===!0||Object(t)===t||t===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...Hh.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Bp},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Bp},navigationMaxYearMonth:{type:String,validator:Bp},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:c_}},emits:[...rS,"rangeStart","rangeEnd","navigation"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=pt(t,r),{getCache:a}=zu(),{tabindex:s,headerClass:l,getLocale:u,getCurrentDate:c}=oS(t,r);let h;const d=go(Ou(t)),p=$(null),f=$(de()),g=$(u()),y=w(()=>de()),_=w(()=>u()),b=w(()=>c()),m=$(Le(f.value,g.value)),v=$(t.defaultView),S=w(()=>r.lang.rtl===!0?"right":"left"),C=$(S.value),k=$(S.value),L=m.value.year,A=$(L-L%_o-(L<0?_o:0)),q=$(null),P=w(()=>{const D=t.landscape===!0?"landscape":"portrait";return`q-date q-date--${D} q-date--${D}-${t.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(t.bordered===!0?" q-date--bordered":"")+(t.square===!0?" q-date--square no-border-radius":"")+(t.flat===!0?" q-date--flat no-shadow":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-date--readonly":"")}),T=w(()=>t.color||"primary"),R=w(()=>t.textColor||"white"),M=w(()=>t.emitImmediately===!0&&t.multiple!==!0&&t.range!==!0),I=w(()=>Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue!==null&&t.modelValue!==void 0?[t.modelValue]:[]),E=w(()=>I.value.filter(D=>typeof D=="string").map(D=>Se(D,f.value,g.value)).filter(D=>D.dateHash!==null&&D.day!==null&&D.month!==null&&D.year!==null)),O=w(()=>{const D=G=>Se(G,f.value,g.value);return I.value.filter(G=>Si(G)===!0&&G.from!==void 0&&G.to!==void 0).map(G=>({from:D(G.from),to:D(G.to)})).filter(G=>G.from.dateHash!==null&&G.to.dateHash!==null&&G.from.dateHash<G.to.dateHash)}),V=w(()=>t.calendar!=="persian"?D=>new Date(D.year,D.month-1,D.day):D=>{const G=s_(D.year,D.month,D.day);return new Date(G.gy,G.gm-1,G.gd)}),B=w(()=>t.calendar==="persian"?ar:(D,G,Q)=>uS(new Date(D.year,D.month-1,D.day,D.hour,D.minute,D.second,D.millisecond),G===void 0?f.value:G,Q===void 0?g.value:Q,D.year,D.timezoneOffset)),F=w(()=>E.value.length+O.value.reduce((D,G)=>D+1+lS(V.value(G.to),V.value(G.from)),0)),H=w(()=>{if(t.title!==void 0&&t.title!==null&&t.title.length!==0)return t.title;if(q.value!==null){const Q=q.value.init,ie=V.value(Q);return g.value.daysShort[ie.getDay()]+", "+g.value.monthsShort[Q.month-1]+" "+Q.day+Aa+"?"}if(F.value===0)return Aa;if(F.value>1)return`${F.value} ${g.value.pluralDay}`;const D=E.value[0],G=V.value(D);return isNaN(G.valueOf())===!0?Aa:g.value.headerTitle!==void 0?g.value.headerTitle(G,D):g.value.daysShort[G.getDay()]+", "+g.value.monthsShort[D.month-1]+" "+D.day}),ee=w(()=>E.value.concat(O.value.map(D=>D.from)).sort((D,G)=>D.year-G.year||D.month-G.month)[0]),ne=w(()=>E.value.concat(O.value.map(D=>D.to)).sort((D,G)=>G.year-D.year||G.month-D.month)[0]),te=w(()=>{if(t.subtitle!==void 0&&t.subtitle!==null&&t.subtitle.length!==0)return t.subtitle;if(F.value===0)return Aa;if(F.value>1){const D=ee.value,G=ne.value,Q=g.value.monthsShort;return Q[D.month-1]+(D.year!==G.year?" "+D.year+Aa+Q[G.month-1]+" ":D.month!==G.month?Aa+Q[G.month-1]:"")+" "+G.year}return E.value[0].year}),N=w(()=>{const D=[r.iconSet.datetime.arrowLeft,r.iconSet.datetime.arrowRight];return r.lang.rtl===!0?D.reverse():D}),z=w(()=>t.firstDayOfWeek!==void 0?Number(t.firstDayOfWeek):g.value.firstDayOfWeek),j=w(()=>{const D=g.value.daysShort,G=z.value;return G>0?D.slice(G,7).concat(D.slice(0,G)):D}),Z=w(()=>{const D=m.value;return t.calendar!=="persian"?new Date(D.year,D.month,0).getDate():ih(D.year,D.month)}),W=w(()=>typeof t.eventColor=="function"?t.eventColor:()=>t.eventColor),U=w(()=>{if(t.navigationMinYearMonth===void 0)return null;const D=t.navigationMinYearMonth.split("/");return{year:parseInt(D[0],10),month:parseInt(D[1],10)}}),ye=w(()=>{if(t.navigationMaxYearMonth===void 0)return null;const D=t.navigationMaxYearMonth.split("/");return{year:parseInt(D[0],10),month:parseInt(D[1],10)}}),ue=w(()=>{const D={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return U.value!==null&&U.value.year>=m.value.year&&(D.year.prev=!1,U.value.year===m.value.year&&U.value.month>=m.value.month&&(D.month.prev=!1)),ye.value!==null&&ye.value.year<=m.value.year&&(D.year.next=!1,ye.value.year===m.value.year&&ye.value.month<=m.value.month&&(D.month.next=!1)),D}),he=w(()=>{const D={};return E.value.forEach(G=>{const Q=Fr(G);D[Q]===void 0&&(D[Q]=[]),D[Q].push(G.day)}),D}),fe=w(()=>{const D={};return O.value.forEach(G=>{const Q=Fr(G.from),ie=Fr(G.to);if(D[Q]===void 0&&(D[Q]=[]),D[Q].push({from:G.from.day,to:Q===ie?G.to.day:void 0,range:G}),Q<ie){let re;const{year:Me,month:ge}=G.from,De=ge<12?{year:Me,month:ge+1}:{year:Me+1,month:1};for(;(re=Fr(De))<=ie;)D[re]===void 0&&(D[re]=[]),D[re].push({from:void 0,to:re===ie?G.to.day:void 0,range:G}),De.month++,De.month>12&&(De.year++,De.month=1)}}),D}),Ce=w(()=>{if(q.value===null)return;const{init:D,initHash:G,final:Q,finalHash:ie}=q.value,[re,Me]=G<=ie?[D,Q]:[Q,D],ge=Fr(re),De=Fr(Me);if(ge!==Ie.value&&De!==Ie.value)return;const Ne={};return ge===Ie.value?(Ne.from=re.day,Ne.includeFrom=!0):Ne.from=1,De===Ie.value?(Ne.to=Me.day,Ne.includeTo=!0):Ne.to=Z.value,Ne}),Ie=w(()=>Fr(m.value)),me=w(()=>{const D={};if(t.options===void 0){for(let Q=1;Q<=Z.value;Q++)D[Q]=!0;return D}const G=typeof t.options=="function"?t.options:Q=>t.options.includes(Q);for(let Q=1;Q<=Z.value;Q++){const ie=Ie.value+"/"+yt(Q);D[Q]=G(ie)}return D}),we=w(()=>{const D={};if(t.events===void 0)for(let G=1;G<=Z.value;G++)D[G]=!1;else{const G=typeof t.events=="function"?t.events:Q=>t.events.includes(Q);for(let Q=1;Q<=Z.value;Q++){const ie=Ie.value+"/"+yt(Q);D[Q]=G(ie)===!0&&W.value(ie)}}return D}),qe=w(()=>{let D,G;const{year:Q,month:ie}=m.value;if(t.calendar!=="persian")D=new Date(Q,ie-1,1),G=new Date(Q,ie-1,0).getDate();else{const re=s_(Q,ie,1);D=new Date(re.gy,re.gm-1,re.gd);let Me=ie-1,ge=Q;Me===0&&(Me=12,ge--),G=ih(ge,Me)}return{days:D.getDay()-z.value-1,endDay:G}}),Ge=w(()=>{const D=[],{days:G,endDay:Q}=qe.value,ie=G<0?G+7:G;if(ie<6)for(let ge=Q-ie;ge<=Q;ge++)D.push({i:ge,fill:!0});const re=D.length;for(let ge=1;ge<=Z.value;ge++){const De={i:ge,event:we.value[ge],classes:[]};me.value[ge]===!0&&(De.in=!0,De.flat=!0),D.push(De)}if(he.value[Ie.value]!==void 0&&he.value[Ie.value].forEach(ge=>{const De=re+ge-1;Object.assign(D[De],{selected:!0,unelevated:!0,flat:!1,color:T.value,textColor:R.value})}),fe.value[Ie.value]!==void 0&&fe.value[Ie.value].forEach(ge=>{if(ge.from!==void 0){const De=re+ge.from-1,Ne=re+(ge.to||Z.value)-1;for(let bt=De;bt<=Ne;bt++)Object.assign(D[bt],{range:ge.range,unelevated:!0,color:T.value,textColor:R.value});Object.assign(D[De],{rangeFrom:!0,flat:!1}),ge.to!==void 0&&Object.assign(D[Ne],{rangeTo:!0,flat:!1})}else if(ge.to!==void 0){const De=re+ge.to-1;for(let Ne=re;Ne<=De;Ne++)Object.assign(D[Ne],{range:ge.range,unelevated:!0,color:T.value,textColor:R.value});Object.assign(D[De],{flat:!1,rangeTo:!0})}else{const De=re+Z.value-1;for(let Ne=re;Ne<=De;Ne++)Object.assign(D[Ne],{range:ge.range,unelevated:!0,color:T.value,textColor:R.value})}}),Ce.value!==void 0){const ge=re+Ce.value.from-1,De=re+Ce.value.to-1;for(let Ne=ge;Ne<=De;Ne++)D[Ne].color=T.value,D[Ne].editRange=!0;Ce.value.includeFrom===!0&&(D[ge].editRangeFrom=!0),Ce.value.includeTo===!0&&(D[De].editRangeTo=!0)}m.value.year===b.value.year&&m.value.month===b.value.month&&(D[re+b.value.day-1].today=!0);const Me=D.length%7;if(Me>0){const ge=7-Me;for(let De=1;De<=ge;De++)D.push({i:De,fill:!0})}return D.forEach(ge=>{let De="q-date__calendar-item ";ge.fill===!0?De+="q-date__calendar-item--fill":(De+="q-date__calendar-item--"+(ge.in===!0?"in":"out"),ge.range!==void 0&&(De+=" q-date__range"+(ge.rangeTo===!0?"-to":ge.rangeFrom===!0?"-from":"")),ge.editRange===!0&&(De+=` q-date__edit-range${ge.editRangeFrom===!0?"-from":""}${ge.editRangeTo===!0?"-to":""}`),ge.range===void 0&&ge.editRange!==!0||(De+=` text-${ge.color}`)),ge.classes=De}),D}),oe=w(()=>t.disable===!0?{"aria-disabled":"true"}:{});function ce(){const{year:D,month:G,day:Q}=b.value,ie={...m.value,year:D,month:G,day:Q},re=he.value[Fr(ie)];re!==void 0&&re.includes(ie.day)!==!1||We(ie),X(ie.year,ie.month)}function X(D,G){v.value="Calendar",Pe(D,G)}function de(){return t.calendar==="persian"?"YYYY/MM/DD":t.mask}function Se(D,G,Q){return kl(D,G,Q,t.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Le(D,G){const Q=Array.isArray(t.modelValue)===!0?t.modelValue:t.modelValue?[t.modelValue]:[];if(Q.length===0)return Fe();const ie=Q[Q.length-1],re=Se(ie.from!==void 0?ie.from:ie,D,G);return re.dateHash===null?Fe():re}function Fe(){let D,G;if(t.defaultYearMonth!==void 0){const Q=t.defaultYearMonth.split("/");D=parseInt(Q[0],10),G=parseInt(Q[1],10)}else{const Q=b.value!==void 0?b.value:c();D=Q.year,G=Q.month}return{year:D,month:G,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:D+"/"+yt(G)+"/01"}}function K(D){let G=m.value.year,Q=Number(m.value.month)+D;Q===13?(Q=1,G++):Q===0&&(Q=12,G--),Pe(G,Q),M.value===!0&&Ze("month")}function ae(D){Pe(Number(m.value.year)+D,m.value.month),M.value===!0&&Ze("year")}function pe(D){return{year:D.year,month:D.month,day:D.day}}function Pe(D,G,Q){if(U.value!==null&&D<=U.value.year&&((G<U.value.month||D<U.value.year)&&(G=U.value.month),D=U.value.year),ye.value!==null&&D>=ye.value.year&&((G>ye.value.month||D>ye.value.year)&&(G=ye.value.month),D=ye.value.year),Q!==void 0){const{hour:re,minute:Me,second:ge,millisecond:De,timezoneOffset:Ne,timeHash:bt}=Q;Object.assign(m.value,{hour:re,minute:Me,second:ge,millisecond:De,timezoneOffset:Ne,timeHash:bt})}const ie=D+"/"+yt(G)+"/01";ie!==m.value.dateHash&&(C.value=m.value.dateHash<ie==(r.lang.rtl!==!0)?"left":"right",D!==m.value.year&&(k.value=C.value),lt(()=>{A.value=D-D%_o-(D<0?_o:0),Object.assign(m.value,{year:D,month:G,day:1,dateHash:ie})}))}function He(D,G,Q){const ie=D!==null&&D.length===1&&t.multiple===!1?D[0]:D;h=ie;const{reason:re,details:Me}=Re(G,Q);i("update:modelValue",ie,re,Me)}function Ze(D){const G=E.value[0]!==void 0&&E.value[0].dateHash!==null?{...E.value[0]}:{...m.value};lt(()=>{G.year=m.value.year,G.month=m.value.month;const Q=t.calendar!=="persian"?new Date(G.year,G.month,0).getDate():ih(G.year,G.month);G.day=Math.min(Math.max(1,G.day),Q);const ie=Ye(G);h=ie;const{details:re}=Re("",G);i("update:modelValue",ie,D,re)})}function Re(D,G){return G.from!==void 0?{reason:`${D}-range`,details:{...pe(G.target),from:pe(G.from),to:pe(G.to)}}:{reason:`${D}-day`,details:pe(G)}}function Ye(D,G,Q){return D.from!==void 0?{from:B.value(D.from,G,Q),to:B.value(D.to,G,Q)}:B.value(D,G,Q)}function We(D){let G;if(t.multiple===!0)if(D.from!==void 0){const Q=ar(D.from),ie=ar(D.to),re=E.value.filter(ge=>ge.dateHash<Q||ge.dateHash>ie),Me=O.value.filter(({from:ge,to:De})=>De.dateHash<Q||ge.dateHash>ie);G=re.concat(Me).concat(D).map(ge=>Ye(ge))}else{const Q=I.value.slice();Q.push(Ye(D)),G=Q}else G=Ye(D);He(G,"add",D)}function J(D){if(t.noUnset===!0)return;let G=null;if(t.multiple===!0&&Array.isArray(t.modelValue)===!0){const Q=Ye(D);G=D.from!==void 0?t.modelValue.filter(ie=>ie.from===void 0||ie.from!==Q.from&&ie.to!==Q.to):t.modelValue.filter(ie=>ie!==Q),G.length===0&&(G=null)}He(G,"remove",D)}function Te(D,G,Q){const ie=E.value.concat(O.value).map(re=>Ye(re,D,G)).filter(re=>re.from!==void 0?re.from.dateHash!==null&&re.to.dateHash!==null:re.dateHash!==null);i("update:modelValue",(t.multiple===!0?ie:ie[0])||null,Q)}function _e(){if(t.minimal!==!0)return x("div",{class:"q-date__header "+l.value},[x("div",{class:"relative-position"},[x(si,{name:"q-transition--fade"},()=>x("div",{key:"h-yr-"+te.value,class:"q-date__header-subtitle q-date__header-link "+(v.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...a("vY",{onClick(){v.value="Years"},onKeyup(D){D.keyCode===13&&(v.value="Years")}})},[te.value]))]),x("div",{class:"q-date__header-title relative-position flex no-wrap"},[x("div",{class:"relative-position col"},[x(si,{name:"q-transition--fade"},()=>x("div",{key:"h-sub"+H.value,class:"q-date__header-title-label q-date__header-link "+(v.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...a("vC",{onClick(){v.value="Calendar"},onKeyup(D){D.keyCode===13&&(v.value="Calendar")}})},[H.value]))]),t.todayBtn===!0?x(vt,{class:"q-date__header-today self-start",icon:r.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:ce}):null])])}function ve({label:D,type:G,key:Q,dir:ie,goTo:re,boundaries:Me,cls:ge}){return[x("div",{class:"row items-center q-date__arrow"},[x(vt,{round:!0,dense:!0,size:"sm",flat:!0,icon:N.value[0],tabindex:s.value,disable:Me.prev===!1,...a("go-#"+G,{onClick(){re(-1)}})})]),x("div",{class:"relative-position overflow-hidden flex flex-center"+ge},[x(si,{name:"q-transition--jump-"+ie},()=>x("div",{key:Q},[x(vt,{flat:!0,dense:!0,noCaps:!0,label:D,tabindex:s.value,...a("view#"+G,{onClick:()=>{v.value=G}})})]))]),x("div",{class:"row items-center q-date__arrow"},[x(vt,{round:!0,dense:!0,size:"sm",flat:!0,icon:N.value[1],tabindex:s.value,disable:Me.next===!1,...a("go+#"+G,{onClick(){re(1)}})})])]}se(()=>t.modelValue,D=>{if(h===D)h=0;else{const G=Le(f.value,g.value);Pe(G.year,G.month,G)}}),se(v,()=>{p.value!==null&&n.$el.contains(document.activeElement)===!0&&p.value.focus()}),se(()=>m.value.year+"|"+m.value.month,()=>{i("navigation",{year:m.value.year,month:m.value.month})}),se(y,D=>{Te(D,g.value,"mask"),f.value=D}),se(_,D=>{Te(f.value,D,"locale"),g.value=D});const xe={Calendar:()=>[x("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[x("div",{class:"q-date__navigation row items-center no-wrap"},ve({label:g.value.months[m.value.month-1],type:"Months",key:m.value.month,dir:C.value,goTo:K,boundaries:ue.value.month,cls:" col"}).concat(ve({label:m.value.year,type:"Years",key:m.value.year,dir:k.value,goTo:ae,boundaries:ue.value.year,cls:""}))),x("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},j.value.map(D=>x("div",{class:"q-date__calendar-item"},[x("div",D)]))),x("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[x(si,{name:"q-transition--slide-"+C.value},()=>x("div",{key:Ie.value,class:"q-date__calendar-days fit"},Ge.value.map(D=>x("div",{class:D.classes},[D.in===!0?x(vt,{class:D.today===!0?"q-date__today":"",dense:!0,flat:D.flat,unelevated:D.unelevated,color:D.color,textColor:D.textColor,label:D.i,tabindex:s.value,...a("day#"+D.i,{onClick:()=>{(function(G){const Q={...m.value,day:G};if(t.range===!1)return void function(ie,re){const Me=he.value[re];(Me!==void 0&&Me.includes(ie.day)===!0?J:We)(ie)}(Q,Ie.value);if(q.value===null){const ie=Ge.value.find(Me=>Me.fill!==!0&&Me.i===G);if(t.noUnset!==!0&&ie.range!==void 0)return void J({target:Q,from:ie.range.from,to:ie.range.to});if(ie.selected===!0)return void J(Q);const re=ar(Q);q.value={init:Q,initHash:re,final:Q,finalHash:re},i("rangeStart",pe(Q))}else{const ie=q.value.initHash,re=ar(Q),Me=ie<=re?{from:q.value.init,to:Q}:{from:Q,to:q.value.init};q.value=null,We(ie===re?Q:{target:Q,...Me}),i("rangeEnd",{from:pe(Me.from),to:pe(Me.to)})}})(D.i)},onMouseover:()=>{(function(G){if(q.value!==null){const Q={...m.value,day:G};Object.assign(q.value,{final:Q,finalHash:ar(Q)})}})(D.i)}})},D.event!==!1?()=>x("div",{class:"q-date__event bg-"+D.event}):null):x("div",""+D.i)]))))])])],Months(){const D=m.value.year===b.value.year,G=ie=>U.value!==null&&m.value.year===U.value.year&&U.value.month>ie||ye.value!==null&&m.value.year===ye.value.year&&ye.value.month<ie,Q=g.value.monthsShort.map((ie,re)=>{const Me=m.value.month===re+1;return x("div",{class:"q-date__months-item flex flex-center"},[x(vt,{class:D===!0&&b.value.month===re+1?"q-date__today":null,flat:Me!==!0,label:ie,unelevated:Me,color:Me===!0?T.value:null,textColor:Me===!0?R.value:null,tabindex:s.value,disable:G(re+1),...a("month#"+re,{onClick:()=>{(function(ge){Pe(m.value.year,ge),v.value="Calendar",M.value===!0&&Ze("month")})(re+1)}})})])});return t.yearsInMonthView===!0&&Q.unshift(x("div",{class:"row no-wrap full-width"},[ve({label:m.value.year,type:"Years",key:m.value.year,dir:k.value,goTo:ae,boundaries:ue.value.year,cls:" col"})])),x("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},Q)},Years(){const D=A.value,G=D+_o,Q=[],ie=re=>U.value!==null&&U.value.year>re||ye.value!==null&&ye.value.year<re;for(let re=D;re<=G;re++){const Me=m.value.year===re;Q.push(x("div",{class:"q-date__years-item flex flex-center"},[x(vt,{key:"yr"+re,class:b.value.year===re?"q-date__today":null,flat:!Me,label:re,dense:!0,unelevated:Me,color:Me===!0?T.value:null,textColor:Me===!0?R.value:null,tabindex:s.value,disable:ie(re),...a("yr#"+re,{onClick:()=>{Pe(re,m.value.month),v.value=t.defaultView==="Years"?"Months":"Calendar",M.value===!0&&Ze("year")}})})]))}return x("div",{class:"q-date__view q-date__years flex flex-center"},[x("div",{class:"col-auto"},[x(vt,{round:!0,dense:!0,flat:!0,icon:N.value[0],tabindex:s.value,disable:ie(D),...a("y-",{onClick:()=>{A.value-=_o}})})]),x("div",{class:"q-date__years-content col self-stretch row items-center"},Q),x("div",{class:"col-auto"},[x(vt,{round:!0,dense:!0,flat:!0,icon:N.value[1],tabindex:s.value,disable:ie(G),...a("y+",{onClick:()=>{A.value+=_o}})})])])}};return Object.assign(n,{setToday:ce,setView:function(D){c_(D)===!0&&(v.value=D)},offsetCalendar:function(D,G){["month","year"].includes(D)&&(D==="month"?K:ae)(G===!0?-1:1)},setCalendarTo:X,setEditingRange:function(D,G){if(t.range===!1||!D)return void(q.value=null);const Q=Object.assign({...m.value},D),ie=G!==void 0?Object.assign({...m.value},G):Q;q.value={init:Q,initHash:ar(Q),final:ie,finalHash:ar(ie)},X(Q.year,Q.month)}}),()=>{const D=[x("div",{class:"q-date__content col relative-position"},[x(si,{name:"q-transition--fade"},xe[v.value])])],G=ze(e.default);return G!==void 0&&D.push(x("div",{class:"q-date__actions"},G)),t.name!==void 0&&t.disable!==!0&&d(D,"push"),x("div",{class:P.value,...oe.value},[_e(),x("div",{ref:p,class:"q-date__main col column",tabindex:-1},D)])}}});var Np,Vp,Tl,h_,d_,p_,Tc=0,$p=!1,bo=null;function U3(t){(function(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const i=function(a){if(a.path)return a.path;if(a.composedPath)return a.composedPath();const s=[];let l=a.target;for(;l;){if(s.push(l),l.tagName==="HTML")return s.push(document),s.push(window),s;l=l.parentElement}}(e),n=e.shiftKey&&!e.deltaX,r=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),o=n||r?e.deltaY:e.deltaX;for(let a=0;a<i.length;a++){const s=i[a];if(f3(s,r))return r?o<0&&s.scrollTop===0||o>0&&s.scrollTop+s.clientHeight===s.scrollHeight:o<0&&s.scrollLeft===0||o>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0})(t)&&Ke(t)}function f_(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ec(t){$p!==!0&&($p=!0,requestAnimationFrame(()=>{$p=!1;const{height:e}=t.target,{clientHeight:i,scrollTop:n}=document.scrollingElement;Tl!==void 0&&e===window.innerHeight||(Tl=i-e,document.scrollingElement.scrollTop=n),n>Tl&&(document.scrollingElement.scrollTop-=Math.ceil((n-Tl)/8))}))}function g_(t){const e=document.body,i=window.visualViewport!==void 0;if(t==="add"){const{overflowY:n,overflowX:r}=window.getComputedStyle(e);Np=vd(window),Vp=io(window),h_=e.style.left,d_=e.style.top,p_=window.location.href,e.style.left=`-${Np}px`,e.style.top=`-${Vp}px`,r!=="hidden"&&(r==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),n!=="hidden"&&(n==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,nt.is.ios===!0&&(i===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ec,Pt.passiveCapture),window.visualViewport.addEventListener("scroll",Ec,Pt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",f_,Pt.passiveCapture))}nt.is.desktop===!0&&nt.is.mac===!0&&window[`${t}EventListener`]("wheel",U3,Pt.notPassive),t==="remove"&&(nt.is.ios===!0&&(i===!0?(window.visualViewport.removeEventListener("resize",Ec,Pt.passiveCapture),window.visualViewport.removeEventListener("scroll",Ec,Pt.passiveCapture)):window.removeEventListener("scroll",f_,Pt.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=h_,e.style.top=d_,window.location.href===p_&&window.scrollTo(Np,Vp),Tl=void 0)}function cm(t){let e="add";if(t===!0){if(Tc++,bo!==null)return clearTimeout(bo),void(bo=null);if(Tc>1)return}else{if(Tc===0||--Tc>0)return;if(e="remove",nt.is.ios===!0&&nt.is.nativeMobile===!0)return bo!==null&&clearTimeout(bo),void(bo=setTimeout(()=>{g_(e),bo=null},100))}g_(e)}function hS(){let t;return{preventBodyScroll(e){e===t||t===void 0&&e!==!0||(t=e,cm(e))}}}var Lc=0,X3={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},m_={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},_d=le({name:"QDialog",inheritAttrs:!1,props:{...Vs,...Zo,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:t=>["standard","top","bottom","left","right"].includes(t)}},emits:[...$s,"shake","click","escapeKey"],setup(t,{slots:e,emit:i,attrs:n}){const r=ke(),o=$(null),a=$(!1),s=$(!1);let l,u,c=null,h=null;const d=w(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:p}=hS(),{registerTimeout:f}=Sr(),{registerTick:g,removeTick:y}=us(),{transitionProps:_,transitionStyle:b}=md(t,()=>m_[t.position][0],()=>m_[t.position][1]),m=w(()=>b.value+(t.backdropFilter!==void 0?`;backdrop-filter:${t.backdropFilter};-webkit-backdrop-filter:${t.backdropFilter}`:"")),{showPortal:v,hidePortal:S,portalIsAccessible:C,renderPortal:k}=zv(r,o,function(){return x("div",{role:"dialog","aria-modal":T.value===!0?"true":"false",...n,class:M.value},[x(si,{name:"q-transition--fade",appear:!0},()=>T.value===!0?x("div",{class:"q-dialog__backdrop fixed-full",style:m.value,"aria-hidden":"true",tabindex:-1,onClick:H}):null),x(si,_.value,()=>a.value===!0?x("div",{ref:o,class:P.value,style:b.value,tabindex:-1,...R.value},ze(e.default)):null)])},"dialog"),{hide:L}=Gs({showing:a,hideOnRouteChange:d,handleShow:function(ne){A(),h=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,B(t.maximized),v(),s.value=!0,t.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),g(I)):y(),f(()=>{if(r.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:te,bottom:N}=document.activeElement.getBoundingClientRect(),{innerHeight:z}=window,j=window.visualViewport!==void 0?window.visualViewport.height:z;te>0&&N>j/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-j,N>=z?1/0:Math.ceil(document.scrollingElement.scrollTop+N-j/2))),document.activeElement.scrollIntoView()}u=!0,o.value.click(),u=!1}v(!0),s.value=!1,i("show",ne)},t.transitionDuration)},handleHide:function(ne){y(),q(),V(!0),s.value=!0,S(),h!==null&&(((ne&&ne.type.indexOf("key")===0?h.closest('[tabindex]:not([tabindex^="-"])'):void 0)||h).focus(),h=null),f(()=>{S(!0),s.value=!1,i("hide",ne)},t.transitionDuration)},processOnMount:!0}),{addToHistory:A,removeFromHistory:q}=cS(a),P=w(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${X3[t.position]}`+(s.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),T=w(()=>a.value===!0&&t.seamless!==!0),R=w(()=>t.autoClose===!0?{onClick:F}:{}),M=w(()=>["q-dialog fullscreen no-pointer-events q-dialog--"+(T.value===!0?"modal":"seamless"),n.class]);function I(ne){Hs(()=>{let te=o.value;if(te!==null){if(ne!==void 0){const N=te.querySelector(ne);if(N!==null)return void N.focus({preventScroll:!0})}te.contains(document.activeElement)!==!0&&(te=te.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||te.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||te.querySelector("[autofocus], [data-autofocus]")||te,te.focus({preventScroll:!0}))}})}function E(ne){ne&&typeof ne.focus=="function"?ne.focus({preventScroll:!0}):I(),i("shake");const te=o.value;te!==null&&(te.classList.remove("q-animate--scale"),te.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,o.value!==null&&(te.classList.remove("q-animate--scale"),I())},170))}function O(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&E():(i("escapeKey"),L()))}function V(ne){c!==null&&(clearTimeout(c),c=null),ne!==!0&&a.value!==!0||(B(!1),t.seamless!==!0&&(p(!1),am(ee),zh(O))),ne!==!0&&(h=null)}function B(ne){ne===!0?l!==!0&&(Lc<1&&document.body.classList.add("q-body--dialog"),Lc++,l=!0):l===!0&&(Lc<2&&document.body.classList.remove("q-body--dialog"),Lc--,l=!1)}function F(ne){u!==!0&&(L(ne),i("click",ne))}function H(ne){t.persistent!==!0&&t.noBackdropDismiss!==!0?L(ne):t.noShake!==!0&&E()}function ee(ne){t.allowFocusOutside!==!0&&C.value===!0&&_2(o.value,ne.target)!==!0&&I('[tabindex]:not([tabindex="-1"])')}return se(()=>t.maximized,ne=>{a.value===!0&&B(ne)}),se(T,ne=>{p(ne),ne===!0?(A2(ee),R2(O)):(am(ee),zh(O))}),Object.assign(r.proxy,{focus:I,shake:E,__updateRefocusTarget(ne){h=ne||null}}),ot(V),k}});function dS(t,e){if(e&&t===e)return null;const i=t.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(i)===!0)return t;const n=(window.getComputedStyle?window.getComputedStyle(t):t.currentStyle).display;return n==="block"||n==="table"?t:dS(t.parentNode)}function Gp(t,e,i){return!(!t||t===document.body)&&(i===!0&&t===e||(e===document?document.body:e).contains(t.parentNode))}function pS(t,e,i){if(i||((i=document.createRange()).selectNode(t),i.setStart(t,0)),e.count===0)i.setEnd(t,e.count);else if(e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(i.setEnd(t,e.count),e.count=0);else for(let n=0;e.count!==0&&n<t.childNodes.length;n++)i=pS(t.childNodes[n],e,i);return i}le({name:"QDrawer",inheritAttrs:!1,props:{...Vs,...dt,side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...$s,"onLayout","miniState"],setup(t,{slots:e,emit:i,attrs:n}){const r=ke(),{proxy:{$q:o}}=r,a=pt(t,o),{preventBodyScroll:s}=hS(),{registerTimeout:l,removeTimeout:u}=Sr(),c=Ni(ua,wt);if(c===wt)return wt;let h,d,p=null;const f=$(t.behavior==="mobile"||t.behavior!=="desktop"&&c.totalWidth.value<=t.breakpoint),g=w(()=>t.mini===!0&&f.value!==!0),y=w(()=>g.value===!0?t.miniWidth:t.width),_=$(t.showIfAbove===!0&&f.value===!1||t.modelValue===!0),b=w(()=>t.persistent!==!0&&(f.value===!0||F.value===!0));function m(oe,ce){if(k(),oe!==!1&&c.animate(),he(0),f.value===!0){const X=c.instances[E.value];X!==void 0&&X.belowBreakpoint===!0&&X.hide(!1),fe(1),c.isContainer.value!==!0&&s(!0)}else fe(0),oe!==!1&&Ce(!1);l(()=>{oe!==!1&&Ce(!0),ce!==!0&&i("show",oe)},150)}function v(oe,ce){L(),oe!==!1&&c.animate(),fe(0),he(P.value*y.value),we(),ce!==!0?l(()=>{i("hide",oe)},150):u()}const{show:S,hide:C}=Gs({showing:_,hideOnRouteChange:b,handleShow:m,handleHide:v}),{addToHistory:k,removeFromHistory:L}=cS(_),A={belowBreakpoint:f,hide:C},q=w(()=>t.side==="right"),P=w(()=>(o.lang.rtl===!0?-1:1)*(q.value===!0?1:-1)),T=$(0),R=$(!1),M=$(!1),I=$(y.value*P.value),E=w(()=>q.value===!0?"left":"right"),O=w(()=>_.value===!0&&f.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:y.value:0),V=w(()=>t.overlay===!0||t.miniToOverlay===!0||c.view.value.indexOf(q.value?"R":"L")!==-1||o.platform.is.ios===!0&&c.isContainer.value===!0),B=w(()=>t.overlay===!1&&_.value===!0&&f.value===!1),F=w(()=>t.overlay===!0&&_.value===!0&&f.value===!1),H=w(()=>"fullscreen q-drawer__backdrop"+(_.value===!1&&R.value===!1?" hidden":"")),ee=w(()=>({backgroundColor:`rgba(0,0,0,${.4*T.value})`})),ne=w(()=>q.value===!0?c.rows.value.top[2]==="r":c.rows.value.top[0]==="l"),te=w(()=>q.value===!0?c.rows.value.bottom[2]==="r":c.rows.value.bottom[0]==="l"),N=w(()=>{const oe={};return c.header.space===!0&&ne.value===!1&&(V.value===!0?oe.top=`${c.header.offset}px`:c.header.space===!0&&(oe.top=`${c.header.size}px`)),c.footer.space===!0&&te.value===!1&&(V.value===!0?oe.bottom=`${c.footer.offset}px`:c.footer.space===!0&&(oe.bottom=`${c.footer.size}px`)),oe}),z=w(()=>{const oe={width:`${y.value}px`,transform:`translateX(${I.value}px)`};return f.value===!0?oe:Object.assign(oe,N.value)}),j=w(()=>"q-drawer__content fit "+(c.isContainer.value!==!0?"scroll":"overflow-auto")),Z=w(()=>`q-drawer q-drawer--${t.side}`+(M.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(a.value===!0?" q-drawer--dark q-dark":"")+(R.value===!0?" no-transition":_.value===!0?"":" q-layout--prevent-focus")+(f.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(g.value===!0?"mini":"standard")+(V.value===!0||B.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(ne.value===!0?" q-drawer--top-padding":""))),W=w(()=>{const oe=o.lang.rtl===!0?t.side:E.value;return[[cn,Ie,void 0,{[oe]:!0,mouse:!0}]]}),U=w(()=>{const oe=o.lang.rtl===!0?E.value:t.side;return[[cn,me,void 0,{[oe]:!0,mouse:!0}]]}),ye=w(()=>{const oe=o.lang.rtl===!0?E.value:t.side;return[[cn,me,void 0,{[oe]:!0,mouse:!0,mouseAllDir:!0}]]});function ue(){var oe,ce;oe=f,ce=t.behavior==="mobile"||t.behavior!=="desktop"&&c.totalWidth.value<=t.breakpoint,oe.value!==ce&&(oe.value=ce)}function he(oe){oe===void 0?lt(()=>{oe=_.value===!0?0:y.value,he(P.value*oe)}):(c.isContainer.value!==!0||q.value!==!0||f.value!==!0&&Math.abs(oe)!==y.value||(oe+=P.value*c.scrollbarWidth.value),I.value=oe)}function fe(oe){T.value=oe}function Ce(oe){const ce=oe===!0?"remove":c.isContainer.value!==!0?"add":"";ce!==""&&document.body.classList[ce]("q-body--drawer-toggle")}function Ie(oe){if(_.value!==!1)return;const ce=y.value,X=Et(oe.distance.x,0,ce);if(oe.isFinal===!0)return X>=Math.min(75,ce)?S():(c.animate(),fe(0),he(P.value*ce)),void(R.value=!1);he((o.lang.rtl===!0?q.value!==!0:q.value)?Math.max(ce-X,0):Math.min(0,X-ce)),fe(Et(X/ce,0,1)),oe.isFirst===!0&&(R.value=!0)}function me(oe){if(_.value!==!0)return;const ce=y.value,X=oe.direction===t.side,de=(o.lang.rtl===!0?X!==!0:X)?Et(oe.distance.x,0,ce):0;if(oe.isFinal===!0)return Math.abs(de)<Math.min(75,ce)?(c.animate(),fe(1),he(0)):C(),void(R.value=!1);he(P.value*de),fe(Et(1-de/ce,0,1)),oe.isFirst===!0&&(R.value=!0)}function we(){s(!1),Ce(!0)}function qe(oe,ce){c.update(t.side,oe,ce)}function Ge(oe,ce){qe("size",oe===!0?t.miniWidth:ce)}return se(f,oe=>{oe===!0?(h=_.value,_.value===!0&&C(!1)):t.overlay===!1&&t.behavior!=="mobile"&&h!==!1&&(_.value===!0?(he(0),fe(0),we()):S(!1))}),se(()=>t.side,(oe,ce)=>{c.instances[ce]===A&&(c.instances[ce]=void 0,c[ce].space=!1,c[ce].offset=0),c.instances[oe]=A,c[oe].size=y.value,c[oe].space=B.value,c[oe].offset=O.value}),se(c.totalWidth,()=>{c.isContainer.value!==!0&&document.qScrollPrevented===!0||ue()}),se(()=>t.behavior+t.breakpoint,ue),se(c.isContainer,oe=>{_.value===!0&&s(oe!==!0),oe===!0&&ue()}),se(c.scrollbarWidth,()=>{he(_.value===!0?0:void 0)}),se(O,oe=>{qe("offset",oe)}),se(B,oe=>{i("onLayout",oe),qe("space",oe)}),se(q,()=>{he()}),se(y,oe=>{he(),Ge(t.miniToOverlay,oe)}),se(()=>t.miniToOverlay,oe=>{Ge(oe,y.value)}),se(()=>o.lang.rtl,()=>{he()}),se(()=>t.mini,()=>{t.noMiniAnimation||t.modelValue===!0&&(function(){p!==null&&clearTimeout(p),r.proxy&&r.proxy.$el&&r.proxy.$el.classList.add("q-drawer--mini-animate"),M.value=!0,p=setTimeout(()=>{p=null,M.value=!1,r&&r.proxy&&r.proxy.$el&&r.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}(),c.animate())}),se(g,oe=>{i("miniState",oe)}),c.instances[t.side]=A,Ge(t.miniToOverlay,y.value),qe("space",B.value),qe("offset",O.value),t.showIfAbove===!0&&t.modelValue!==!0&&_.value===!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),Rt(()=>{i("onLayout",B.value),i("miniState",g.value),h=t.showIfAbove===!0;const oe=()=>{(_.value===!0?m:v)(!1,!0)};c.totalWidth.value===0?d=se(c.totalWidth,()=>{d(),d=void 0,_.value===!1&&t.showIfAbove===!0&&f.value===!1?S(!1):oe()}):lt(oe)}),ot(()=>{d!==void 0&&d(),p!==null&&(clearTimeout(p),p=null),_.value===!0&&we(),c.instances[t.side]===A&&(c.instances[t.side]=void 0,qe("size",0),qe("offset",0),qe("space",!1))}),()=>{const oe=[];f.value===!0&&(t.noSwipeOpen===!1&&oe.push(Vi(x("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),W.value)),oe.push(pn("div",{ref:"backdrop",class:H.value,style:ee.value,"aria-hidden":"true",onClick:C},void 0,"backdrop",t.noSwipeBackdrop!==!0&&_.value===!0,()=>ye.value)));const ce=g.value===!0&&e.mini!==void 0,X=[x("div",{...n,key:""+ce,class:[j.value,n.class]},ce===!0?e.mini():ze(e.default))];return t.elevated===!0&&_.value===!0&&X.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),oe.push(pn("aside",{ref:"content",class:Z.value,style:z.value},X,"contentclose",t.noSwipeClose!==!0&&f.value===!0,()=>U.value)),x("div",{class:"q-drawer-container"},oe)}}});var Y3=/^https?:\/\//,K3=class{constructor(t,e){this.el=t,this.eVm=e,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(Gp(t.anchorNode,this.el,!0)&&Gp(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null&&this.selection.toString().length!==0}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const e=t.startContainer;return e.nodeType===document.ELEMENT_NODE?e:e.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?dS(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const e=document.createRange(),i=document.getSelection();t!==null?(e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),i.removeAllRanges(),i.addRange(e)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let t,e=-1;const i=document.getSelection(),n=this.el.parentNode;if(i.focusNode&&Gp(i.focusNode,n))for(t=i.focusNode,e=i.focusOffset;t&&t!==n;)t!==this.el&&t.previousSibling?(t=t.previousSibling,e+=t.textContent.length):t=t.parentNode;this.savedPos=e}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const e=window.getSelection(),i=pS(this.el,{count:this.savedPos});i&&(i.collapse(!1),e.removeAllRanges(),e.addRange(i))}}hasParent(t,e){const i=e?this.parent:this.blockParent;return i!==null&&i.nodeName.toLowerCase()===t.toLowerCase()}hasParents(t,e,i=this.parent){return i!==null&&(t.includes(i.nodeName.toLowerCase())===!0||e===!0&&this.hasParents(t,e,i.parentNode))}is(t,e){if(this.selection===null)return!1;switch(t){case"formatBlock":return e==="DIV"&&this.parent===this.el||this.hasParent(e,e==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===e;case"fontName":const i=document.queryCommandValue(t);return i===`"${e}"`||i===e;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const n=document.queryCommandState(t);return e!==void 0?n===e:n}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){return t==="outdent"?this.hasParents(["blockquote","li"],!0):t==="indent"?this.hasParents(["li"],!0):t==="link"?this.selection!==null||this.is("link"):void 0}apply(t,e,i=ni){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(e)&&this.is(t,e)&&(t="outdent",e=null),e==="PRE"&&this.is(t,"PRE")&&(e="P");else{if(t==="print"){i();const n=window.open();return n.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),n.print(),void n.close()}if(t==="link"){const n=this.getParentAttribute("href");if(n===null){const r=this.selectWord(this.selection),o=r?r.toString():"";if(!(o.length||this.range&&this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Y3.test(o)?o:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(r.getRangeAt(0))}else this.eVm.editLinkUrl.value=n,this.range.selectNodeContents(this.parent),this.save();return}if(t==="fullscreen")return this.eVm.toggleFullscreen(),void i();if(t==="viewsource")return this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),void i()}document.execCommand(t,!1,e),i()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const i=e.collapsed?["backward","forward"]:["forward","backward"];e.detach();const n=t.focusNode,r=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",i[0],"character"),t.modify("move",i[1],"word"),t.extend(n,r),t.modify("extend",i[1],"character"),t.modify("extend",i[0],"word"),t}},Z3=le({name:"QTooltip",inheritAttrs:!1,props:{...C2,...Vs,...Zo,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Zo.transitionShow,default:"jump-down"},transitionHide:{...Zo.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Nh},self:{type:String,default:"top middle",validator:Nh},offset:{type:Array,default:()=>[14,14],validator:z2},scrollTarget:ya,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...$s],setup(t,{slots:e,emit:i,attrs:n}){let r,o;const a=ke(),{proxy:{$q:s}}=a,l=$(null),u=$(!1),c=w(()=>Vh(t.anchor,s.lang.rtl)),h=w(()=>Vh(t.self,s.lang.rtl)),d=w(()=>t.persistent!==!0),{registerTick:p,removeTick:f}=us(),{registerTimeout:g}=Sr(),{transitionProps:y,transitionStyle:_}=md(t),{localScrollTarget:b,changeScrollEvent:m,unconfigureScrollTarget:v}=k2(t,I),{anchorEl:S,canShow:C,anchorEvents:k}=Av({showing:u,configureAnchorEl:function(){if(t.noParentEvent===!0||S.value===null)return;const O=s.platform.is.mobile===!0?[[S.value,"touchstart","delayShow","passive"]]:[[S.value,"mouseenter","delayShow","passive"],[S.value,"mouseleave","delayHide","passive"]];Wt(k,"anchor",O)}}),{show:L,hide:A}=Gs({showing:u,canShow:C,handleShow:function(O){q(),p(()=>{o=new MutationObserver(()=>M()),o.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),M(),I()}),r===void 0&&(r=se(()=>s.screen.width+"|"+s.screen.height+"|"+t.self+"|"+t.anchor+"|"+s.lang.rtl,M)),g(()=>{q(!0),i("show",O)},t.transitionDuration)},handleHide:function(O){f(),P(),R(),g(()=>{P(!0),i("hide",O)},t.transitionDuration)},hideOnRouteChange:d,processOnMount:!0});Object.assign(k,{delayShow:function(O){if(s.platform.is.mobile===!0){Pn(),document.body.classList.add("non-selectable");const V=S.value,B=["touchmove","touchcancel","touchend","click"].map(F=>[V,F,"delayHide","passiveCapture"]);Wt(k,"tooltipTemp",B)}g(()=>{L(O)},t.delay)},delayHide:function(O){s.platform.is.mobile===!0&&(Ci(k,"tooltipTemp"),Pn(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),g(()=>{A(O)},t.hideDelay)}});const{showPortal:q,hidePortal:P,renderPortal:T}=zv(a,l,function(){return x(si,y.value,E)},"tooltip");if(s.platform.is.mobile===!0){const O={anchorEl:S,innerRef:l,onClickOutside:B=>(A(B),B.target.classList.contains("q-dialog__backdrop")&&Ke(B),!0)},V=w(()=>t.modelValue===null&&t.persistent!==!0&&u.value===!0);se(V,B=>{(B===!0?O2:Bh)(O)}),ot(()=>{Bh(O)})}function R(){o!==void 0&&(o.disconnect(),o=void 0),r!==void 0&&(r(),r=void 0),v(),Ci(k,"tooltipTemp")}function M(){Dv({targetEl:l.value,offset:t.offset,anchorEl:S.value,anchorOrigin:c.value,selfOrigin:h.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function I(){if(S.value!==null||t.scrollTarget!==void 0){b.value=Jn(S.value,t.scrollTarget);const O=t.noParentEvent===!0?M:A;m(b.value,O)}}function E(){return u.value===!0?x("div",{...n,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,_.value],role:"tooltip"},ze(e.default)):null}return ot(R),Object.assign(a.proxy,{updatePosition:M}),T}}),Du=le({name:"QItem",props:{...dt,...Fu,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=pt(t,n),{hasLink:o,linkAttrs:a,linkClass:s,linkTag:l,navigateOnClick:u}=fd(),c=$(null),h=$(null),d=w(()=>t.clickable===!0||o.value===!0||t.tag==="label"),p=w(()=>t.disable!==!0&&d.value===!0),f=w(()=>"q-item q-item-type row no-wrap"+(t.dense===!0?" q-item--dense":"")+(r.value===!0?" q-item--dark":"")+(o.value===!0&&t.active===null?s.value:t.active===!0?" q-item--active"+(t.activeClass!==void 0?` ${t.activeClass}`:""):"")+(t.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(t.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(t.focused===!0?" q-manual-focusable--focused":""):"")),g=w(()=>t.insetLevel===void 0?null:{["padding"+(n.lang.rtl===!0?"Right":"Left")]:16+56*t.insetLevel+"px"});function y(b){p.value===!0&&(h.value!==null&&(b.qKeyEvent!==!0&&document.activeElement===c.value?h.value.focus():document.activeElement===h.value&&c.value.focus()),u(b))}function _(b){if(p.value===!0&&dn(b,[13,32])===!0){Ke(b),b.qKeyEvent=!0;const m=new MouseEvent("click",b);m.qKeyEvent=!0,c.value.dispatchEvent(m)}i("keyup",b)}return()=>{const b={ref:c,class:f.value,style:g.value,role:"listitem",onClick:y,onKeyup:_};return p.value===!0?(b.tabindex=t.tabindex||"0",Object.assign(b,a.value)):d.value===!0&&(b["aria-disabled"]="true"),x(l.value,b,function(){const m=Ru(e.default,[]);return p.value===!0&&m.unshift(x("div",{class:"q-focus-helper",tabindex:-1,ref:h})),m}())}}}),yr=le({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(t,{slots:e}){const i=w(()=>"q-item__section column q-item__section--"+(t.avatar===!0||t.side===!0||t.thumbnail===!0?"side":"main")+(t.top===!0?" q-item__section--top justify-start":" justify-center")+(t.avatar===!0?" q-item__section--avatar":"")+(t.thumbnail===!0?" q-item__section--thumbnail":"")+(t.noWrap===!0?" q-item__section--nowrap":""));return()=>x("div",{class:i.value},ze(e.default))}});function fS(t,e,i){e.handler?e.handler(t,i,i.caret):i.runCmd(e.cmd,e.param)}function hm(t){return x("div",{class:"q-editor__toolbar-group"},t)}function v_(t,e,i,n=!1){const r=n||e.type==="toggle"&&(e.toggled?e.toggled(t):e.cmd&&t.caret.is(e.cmd,e.param)),o=[];if(e.tip&&t.$q.platform.is.desktop){const a=e.key?x("div",[x("small",`(CTRL + ${String.fromCharCode(e.key)})`)]):null;o.push(x(Z3,{delay:1e3},()=>[x("div",{innerHTML:e.tip}),a]))}return x(vt,{...t.buttonProps.value,icon:e.icon!==null?e.icon:void 0,color:r?e.toggleColor||t.props.toolbarToggleColor:e.color||t.props.toolbarColor,textColor:r&&!t.props.toolbarPush?null:e.textColor||t.props.toolbarTextColor,label:e.label,disable:!!e.disable&&(typeof e.disable!="function"||e.disable(t)),size:"sm",onClick(a){i&&i(),fS(a,e,t)}},()=>o)}function Q3(t){if(t.caret)return t.buttons.value.filter(e=>!t.isViewingSource.value||e.find(i=>i.cmd==="viewsource")).map(e=>hm(e.map(i=>(!t.isViewingSource.value||i.cmd==="viewsource")&&(i.type==="slot"?ze(t.slots[i.slot]):i.type==="dropdown"?function(n,r){const o=r.list==="only-icons";let a,s,l=r.label,u=r.icon!==null?r.icon:void 0;function c(){d.component.proxy.hide()}if(o)s=r.options.map(p=>{const f=p.type===void 0&&n.caret.is(p.cmd,p.param);return f&&(l=p.tip,u=p.icon!==null?p.icon:void 0),v_(n,p,c,f)}),a=n.toolbarBackgroundClass.value,s=[hm(s)];else{const p=n.props.toolbarToggleColor!==void 0?`text-${n.props.toolbarToggleColor}`:null,f=n.props.toolbarTextColor!==void 0?`text-${n.props.toolbarTextColor}`:null,g=r.list==="no-icons";s=r.options.map(y=>{const _=!!y.disable&&y.disable(n),b=y.type===void 0&&n.caret.is(y.cmd,y.param);b&&(l=y.tip,u=y.icon!==null?y.icon:void 0);const m=y.htmlTip;return x(Du,{active:b,activeClass:p,clickable:!0,disable:_,dense:!0,onClick(v){c(),n.contentRef.value!==null&&n.contentRef.value.focus(),n.caret.restore(),fS(v,y,n)}},()=>[g===!0?null:x(yr,{class:b?p:f,side:!0},()=>x(gt,{name:y.icon!==null?y.icon:void 0})),x(yr,m?()=>x("div",{class:"text-no-wrap",innerHTML:y.htmlTip}):y.tip?()=>x("div",{class:"text-no-wrap"},y.tip):void 0)])}),a=[n.toolbarBackgroundClass.value,f]}const h=r.highlight&&l!==r.label,d=x(b3,{...n.buttonProps.value,noCaps:!0,noWrap:!0,color:h?n.props.toolbarToggleColor:n.props.toolbarColor,textColor:h&&!n.props.toolbarPush?null:n.props.toolbarTextColor,label:r.fixedLabel?r.label:l,icon:r.fixedIcon?r.icon!==null?r.icon:void 0:u,contentClass:a,onShow:p=>n.emit("dropdownShow",p),onHide:p=>n.emit("dropdownHide",p),onBeforeShow:p=>n.emit("dropdownBeforeShow",p),onBeforeHide:p=>n.emit("dropdownBeforeHide",p)},()=>s);return d}(t,i):v_(t,i)))))}var y_=/^on[A-Z]/;function gS(){const{attrs:t,vnode:e}=ke(),i={listeners:$({}),attributes:$({})};function n(){const r={},o={};for(const a in t)a!=="class"&&a!=="style"&&y_.test(a)===!1&&(r[a]=t[a]);for(const a in e.props)y_.test(a)===!0&&(o[a]=e.props[a]);i.attributes.value=r,i.listeners.value=o}return _u(n),n(),i}var J3=Object.prototype.toString,Hp=Object.prototype.hasOwnProperty,eL=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(t=>"[object "+t+"]"));function __(t){if(t!==Object(t)||eL.has(J3.call(t))===!0||t.constructor&&Hp.call(t,"constructor")===!1&&Hp.call(t.constructor.prototype,"isPrototypeOf")===!1)return!1;let e;for(e in t);return e===void 0||Hp.call(t,e)}function mS(){let t,e,i,n,r,o,a=arguments[0]||{},s=1,l=!1;const u=arguments.length;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},s=2),Object(a)!==a&&typeof a!="function"&&(a={}),u===s&&(a=this,s--);s<u;s++)if((t=arguments[s])!==null)for(e in t)i=a[e],n=t[e],a!==n&&(l===!0&&n&&((r=Array.isArray(n))||__(n)===!0)?(o=r===!0?Array.isArray(i)===!0?i:[]:__(i)===!0?i:{},a[e]=mS(l,o,n)):n!==void 0&&(a[e]=n));return a}le({name:"QEditor",props:{...dt,...Hv,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:t=>t.length===0||t.every(e=>e.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:t=>["div","p"].includes(t),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...Wv,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=pt(t,r),{inFullscreen:a,toggleFullscreen:s}=Uv(),l=gS(),u=$(null),c=$(null),h=$(null),d=$(!1),p=w(()=>!t.readonly&&!t.disable);let f,g,y=t.modelValue;document.execCommand("defaultParagraphSeparator",!1,t.paragraphTag),f=window.getComputedStyle(document.body).fontFamily;const _=w(()=>t.toolbarBg?` bg-${t.toolbarBg}`:""),b=w(()=>({type:"a",flat:t.toolbarOutline!==!0&&t.toolbarPush!==!0,noWrap:!0,outline:t.toolbarOutline,push:t.toolbarPush,rounded:t.toolbarRounded,dense:!0,color:t.toolbarColor,disable:!p.value,size:"sm"})),m=w(()=>{const N=r.lang.editor,z=r.iconSet.editor;return{bold:{cmd:"bold",icon:z.bold,tip:N.bold,key:66},italic:{cmd:"italic",icon:z.italic,tip:N.italic,key:73},strike:{cmd:"strikeThrough",icon:z.strikethrough,tip:N.strikethrough,key:83},underline:{cmd:"underline",icon:z.underline,tip:N.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:z.unorderedList,tip:N.unorderedList},ordered:{cmd:"insertOrderedList",icon:z.orderedList,tip:N.orderedList},subscript:{cmd:"subscript",icon:z.subscript,tip:N.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:z.superscript,tip:N.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:j=>j.caret&&!j.caret.can("link"),icon:z.hyperlink,tip:N.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:z.toggleFullscreen,tip:N.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:z.viewSource,tip:N.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:z.quote,tip:N.quote,key:81},left:{cmd:"justifyLeft",icon:z.left,tip:N.left},center:{cmd:"justifyCenter",icon:z.center,tip:N.center},right:{cmd:"justifyRight",icon:z.right,tip:N.right},justify:{cmd:"justifyFull",icon:z.justify,tip:N.justify},print:{type:"no-state",cmd:"print",icon:z.print,tip:N.print,key:80},outdent:{type:"no-state",disable:j=>j.caret&&!j.caret.can("outdent"),cmd:"outdent",icon:z.outdent,tip:N.outdent},indent:{type:"no-state",disable:j=>j.caret&&!j.caret.can("indent"),cmd:"indent",icon:z.indent,tip:N.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:z.removeFormat,tip:N.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:z.hr,tip:N.hr},undo:{type:"no-state",cmd:"undo",icon:z.undo,tip:N.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:z.redo,tip:N.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:z.heading1||z.heading,tip:N.heading1,htmlTip:`<h1 class="q-ma-none">${N.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:z.heading2||z.heading,tip:N.heading2,htmlTip:`<h2 class="q-ma-none">${N.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:z.heading3||z.heading,tip:N.heading3,htmlTip:`<h3 class="q-ma-none">${N.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:z.heading4||z.heading,tip:N.heading4,htmlTip:`<h4 class="q-ma-none">${N.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:z.heading5||z.heading,tip:N.heading5,htmlTip:`<h5 class="q-ma-none">${N.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:z.heading6||z.heading,tip:N.heading6,htmlTip:`<h6 class="q-ma-none">${N.heading6}</h6>`},p:{cmd:"formatBlock",param:t.paragraphTag,icon:z.heading,tip:N.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:z.code,htmlTip:`<code>${N.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:z.size1||z.size,tip:N.size1,htmlTip:`<font size="1">${N.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:z.size2||z.size,tip:N.size2,htmlTip:`<font size="2">${N.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:z.size3||z.size,tip:N.size3,htmlTip:`<font size="3">${N.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:z.size4||z.size,tip:N.size4,htmlTip:`<font size="4">${N.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:z.size5||z.size,tip:N.size5,htmlTip:`<font size="5">${N.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:z.size6||z.size,tip:N.size6,htmlTip:`<font size="6">${N.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:z.size7||z.size,tip:N.size7,htmlTip:`<font size="7">${N.size7}</font>`}}}),v=w(()=>{const N=t.definitions||{},z=t.definitions||t.fonts?mS(!0,{},m.value,N,function(j,Z,W,U={}){const ye=Object.keys(U);if(ye.length===0)return{};const ue={default_font:{cmd:"fontName",param:j,icon:W,tip:Z}};return ye.forEach(he=>{const fe=U[he];ue[he]={cmd:"fontName",param:fe,icon:W,tip:fe,htmlTip:`<font face="${fe}">${fe}</font>`}}),ue}(f,r.lang.editor.defaultFont,r.iconSet.editor.font,t.fonts)):m.value;return t.toolbar.map(j=>j.map(Z=>{if(Z.options)return{type:"dropdown",icon:Z.icon,label:Z.label,size:"sm",dense:!0,fixedLabel:Z.fixedLabel,fixedIcon:Z.fixedIcon,highlight:Z.highlight,list:Z.list,options:Z.options.map(U=>z[U])};const W=z[Z];return W?W.type==="no-state"||N[Z]&&(W.cmd===void 0||m.value[W.cmd]&&m.value[W.cmd].type==="no-state")?W:Object.assign({type:"toggle"},W):{type:"slot",slot:Z}}))}),S={$q:r,props:t,slots:e,emit:i,inFullscreen:a,toggleFullscreen:s,runCmd:ee,isViewingSource:d,editLinkUrl:h,toolbarBackgroundClass:_,buttonProps:b,contentRef:c,buttons:v,setContent:H};se(()=>t.modelValue,N=>{y!==N&&(y=N,H(N,!0))}),se(h,N=>{i("link"+(N?"Show":"Hide"))});const C=w(()=>t.toolbar&&t.toolbar.length!==0),k=w(()=>{const N={},z=j=>{j.key&&(N[j.key]={cmd:j.cmd,param:j.param})};return v.value.forEach(j=>{j.forEach(Z=>{Z.options?Z.options.forEach(z):z(Z)})}),N}),L=w(()=>a.value?t.contentStyle:[{minHeight:t.minHeight,height:t.height,maxHeight:t.maxHeight},t.contentStyle]),A=w(()=>"q-editor q-editor--"+(d.value===!0?"source":"default")+(t.disable===!0?" disabled":"")+(a.value===!0?" fullscreen column":"")+(t.square===!0?" q-editor--square no-border-radius":"")+(t.flat===!0?" q-editor--flat":"")+(t.dense===!0?" q-editor--dense":"")+(o.value===!0?" q-editor--dark q-dark":"")),q=w(()=>[t.contentClass,"q-editor__content",{col:a.value,"overflow-auto":a.value||t.maxHeight}]),P=w(()=>t.disable===!0?{"aria-disabled":"true"}:{});function T(){if(c.value!==null){const N="inner"+(d.value===!0?"Text":"HTML"),z=c.value[N];z!==t.modelValue&&(y=z,i("update:modelValue",z))}}function R(N){if(i("keydown",N),N.ctrlKey!==!0||la(N)===!0)return void ne();const z=N.keyCode,j=k.value[z];if(j!==void 0){const{cmd:Z,param:W}=j;Ke(N),ee(Z,W,!1)}}function M(N){ne(),i("click",N)}function I(N){if(c.value!==null){const{scrollTop:z,scrollHeight:j}=c.value;g=j-z}S.caret.save(),i("blur",N)}function E(N){lt(()=>{c.value!==null&&g!==void 0&&(c.value.scrollTop=c.value.scrollHeight-g)}),i("focus",N)}function O(N){const z=u.value;if(z!==null&&z.contains(N.target)===!0&&(N.relatedTarget===null||z.contains(N.relatedTarget)!==!0)){const j="inner"+(d.value===!0?"Text":"HTML");S.caret.restorePosition(c.value[j].length),ne()}}function V(N){const z=u.value;z===null||z.contains(N.target)!==!0||N.relatedTarget!==null&&z.contains(N.relatedTarget)===!0||(S.caret.savePosition(),ne())}function B(){g=void 0}function F(N){S.caret.save()}function H(N,z){if(c.value!==null){z===!0&&S.caret.savePosition();const j="inner"+(d.value===!0?"Text":"HTML");c.value[j]=N,z===!0&&(S.caret.restorePosition(c.value[j].length),ne())}}function ee(N,z,j=!0){te(),S.caret.restore(),S.caret.apply(N,z,()=>{te(),S.caret.save(),j&&ne()})}function ne(){setTimeout(()=>{h.value=null,n.$forceUpdate()},1)}function te(){Hs(()=>{c.value!==null&&c.value.focus({preventScroll:!0})})}return Rt(()=>{S.caret=n.caret=new K3(c.value,S),H(t.modelValue),ne(),document.addEventListener("selectionchange",F)}),ot(()=>{document.removeEventListener("selectionchange",F)}),Object.assign(n,{runCmd:ee,refreshToolbar:ne,focus:te,getContentEl:function(){return c.value}}),()=>{let N;if(C.value){const z=[x("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+_.value},Q3(S))];h.value!==null&&z.push(x("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+_.value},function(j){if(j.caret){const Z=j.props.toolbarColor||j.props.toolbarTextColor;let W=j.editLinkUrl.value;const U=()=>{j.caret.restore(),W!==j.editLinkUrl.value&&document.execCommand("createLink",!1,W===""?" ":W),j.editLinkUrl.value=null};return[x("div",{class:`q-mx-xs text-${Z}`},`${j.$q.lang.editor.url}: `),x("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:W,onInput:ye=>{Nt(ye),W=ye.target.value},onKeydown:ye=>{if(la(ye)!==!0)switch(ye.keyCode){case 13:return ui(ye),U();case 27:ui(ye),j.caret.restore(),j.editLinkUrl.value&&j.editLinkUrl.value!=="https://"||document.execCommand("unlink"),j.editLinkUrl.value=null}}}),hm([x(vt,{key:"qedt_btm_rem",tabindex:-1,...j.buttonProps.value,label:j.$q.lang.label.remove,noCaps:!0,onClick:()=>{j.caret.restore(),document.execCommand("unlink"),j.editLinkUrl.value=null}}),x(vt,{key:"qedt_btm_upd",...j.buttonProps.value,label:j.$q.lang.label.update,noCaps:!0,onClick:U})])]}}(S))),N=x("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},z)}return x("div",{ref:u,class:A.value,style:{height:a.value===!0?"100%":null},...P.value,onFocusin:O,onFocusout:V},[N,x("div",{ref:c,style:L.value,class:q.value,contenteditable:p.value,placeholder:t.placeholder,...l.listeners.value,onInput:T,onKeydown:R,onClick:M,onBlur:I,onFocus:E,onMousedown:B,onTouchstartPassive:B})])}}});var dm=le({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(t,{slots:e}){const i=w(()=>parseInt(t.lines,10)),n=w(()=>"q-item__label"+(t.overline===!0?" q-item__label--overline text-overline":"")+(t.caption===!0?" q-item__label--caption text-caption":"")+(t.header===!0?" q-item__label--header":"")+(i.value===1?" ellipsis":"")),r=w(()=>t.lines!==void 0&&i.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":i.value}:null);return()=>x("div",{style:r.value,class:n.value},ze(e.default))}}),Kv=le({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:e,emit:i}){let n,r,o,a,s=!1,l=null,u=null;function c(){n&&n(),n=null,s=!1,l!==null&&(clearTimeout(l),l=null),u!==null&&(clearTimeout(u),u=null),r!==void 0&&r.removeEventListener("transitionend",o),o=null}function h(g,y,_){y!==void 0&&(g.style.height=`${y}px`),g.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,s=!0,n=_}function d(g,y){g.style.overflowY=null,g.style.height=null,g.style.transition=null,c(),y!==a&&i(y)}function p(g,y){let _=0;r=g,s===!0?(c(),_=g.offsetHeight===g.scrollHeight?0:void 0):(a="hide",g.style.overflowY="hidden"),h(g,_,y),l=setTimeout(()=>{l=null,g.style.height=`${g.scrollHeight}px`,o=b=>{u=null,Object(b)===b&&b.target!==g||d(g,"show")},g.addEventListener("transitionend",o),u=setTimeout(o,1.1*t.duration)},100)}function f(g,y){let _;r=g,s===!0?c():(a="show",g.style.overflowY="hidden",_=g.scrollHeight),h(g,_,y),l=setTimeout(()=>{l=null,g.style.height=0,o=b=>{u=null,Object(b)===b&&b.target!==g||d(g,"hide")},g.addEventListener("transitionend",o),u=setTimeout(o,1.1*t.duration)},100)}return ot(()=>{s===!0&&c()}),()=>x(si,{css:!1,appear:t.appear,onEnter:p,onLeave:f},e.default)}}),tL={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Wp={xs:2,sm:4,md:8,lg:16,xl:24},lo=le({name:"QSeparator",props:{...dt,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=ke(),i=pt(t,e.proxy.$q),n=w(()=>t.vertical===!0?"vertical":"horizontal"),r=w(()=>` q-separator--${n.value}`),o=w(()=>t.inset!==!1?`${r.value}-${tL[t.inset]}`:""),a=w(()=>`q-separator${r.value}${o.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(i.value===!0?" q-separator--dark":"")),s=w(()=>{const l={};if(t.size!==void 0&&(l[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${Wp.md}px`:t.spaced in Wp?`${Wp[t.spaced]}px`:t.spaced,c=t.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>x("hr",{class:a.value,style:s.value,"aria-orientation":n.value})}}),xo=DC({}),iL=Object.keys(Fu);le({name:"QExpansionItem",props:{...Fu,...Vs,...dt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...$s,"click","afterShow","afterHide"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=pt(t,n),o=$(t.modelValue!==null?t.modelValue:t.defaultOpened),a=$(null),s=yd(),{show:l,hide:u,toggle:c}=Gs({showing:o});let h,d;const p=w(()=>`q-expansion-item q-item-type q-expansion-item--${o.value===!0?"expanded":"collapsed"} q-expansion-item--${t.popup===!0?"popup":"standard"}`),f=w(()=>t.contentInsetLevel===void 0?null:{["padding"+(n.lang.rtl===!0?"Right":"Left")]:56*t.contentInsetLevel+"px"}),g=w(()=>t.disable!==!0&&(t.href!==void 0||t.to!==void 0&&t.to!==null&&t.to!=="")),y=w(()=>{const E={};return iL.forEach(O=>{E[O]=t[O]}),E}),_=w(()=>g.value===!0||t.expandIconToggle!==!0),b=w(()=>t.expandedIcon!==void 0&&o.value===!0?t.expandedIcon:t.expandIcon||n.iconSet.expansionItem[t.denseToggle===!0?"denseIcon":"icon"]),m=w(()=>t.disable!==!0&&(g.value===!0||t.expandIconToggle===!0)),v=w(()=>({expanded:o.value===!0,detailsId:s.value,toggle:c,show:l,hide:u})),S=w(()=>{const E=t.toggleAriaLabel!==void 0?t.toggleAriaLabel:n.lang.label[o.value===!0?"collapse":"expand"](t.label);return{role:"button","aria-expanded":o.value===!0?"true":"false","aria-controls":s.value,"aria-label":E}});function C(E){g.value!==!0&&c(E),i("click",E)}function k(E){E.keyCode===13&&L(E,!0)}function L(E,O){O!==!0&&a.value!==null&&a.value.focus(),c(E),Ke(E)}function A(){i("afterShow")}function q(){i("afterHide")}function P(){h===void 0&&(h=fu()),o.value===!0&&(xo[t.group]=h);const E=se(o,V=>{V===!0?xo[t.group]=h:xo[t.group]===h&&delete xo[t.group]}),O=se(()=>xo[t.group],(V,B)=>{B===h&&V!==void 0&&V!==h&&u()});d=()=>{E(),O(),xo[t.group]===h&&delete xo[t.group],d=void 0}}function T(){let E;return e.header!==void 0?E=[].concat(e.header(v.value)):(E=[x(yr,()=>[x(dm,{lines:t.labelLines},()=>t.label||""),t.caption?x(dm,{lines:t.captionLines,caption:!0},()=>t.caption):null])],t.icon&&E[t.switchToggleSide===!0?"push":"unshift"](x(yr,{side:t.switchToggleSide===!0,avatar:t.switchToggleSide!==!0},()=>x(gt,{name:t.icon})))),t.disable!==!0&&t.hideExpandIcon!==!0&&E[t.switchToggleSide===!0?"unshift":"push"](function(){const O={class:["q-focusable relative-position cursor-pointer"+(t.denseToggle===!0&&t.switchToggleSide===!0?" items-end":""),t.expandIconClass],side:t.switchToggleSide!==!0,avatar:t.switchToggleSide},V=[x(gt,{class:"q-expansion-item__toggle-icon"+(t.expandedIcon===void 0&&o.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:b.value})];return m.value===!0&&(Object.assign(O,{tabindex:0,...S.value,onClick:L,onKeyup:k}),V.unshift(x("div",{ref:a,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),x(yr,O,()=>V)}()),E}function R(){const E={ref:"item",style:t.headerStyle,class:t.headerClass,dark:r.value,disable:t.disable,dense:t.dense,insetLevel:t.headerInsetLevel};return _.value===!0&&(E.clickable=!0,E.onClick=C,Object.assign(E,g.value===!0?y.value:S.value)),x(Du,E,T)}function M(){return Vi(x("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:f.value,id:s.value},ze(e.default)),[[ah,o.value]])}function I(){const E=[R(),x(Kv,{duration:t.duration,onShow:A,onHide:q},M)];return t.expandSeparator===!0&&E.push(x(lo,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:r.value}),x(lo,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:r.value})),E}return se(()=>t.group,E=>{d!==void 0&&d(),E!==void 0&&P()}),t.group!==void 0&&P(),ot(()=>{d!==void 0&&d()}),()=>x("div",{class:p.value},[x("div",{class:"q-expansion-item__container relative-position"},I())])}});var nL=["top","right","bottom","left"],pm={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:t=>nL.includes(t)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function vS(t,e){return{formClass:w(()=>"q-fab--form-"+(t.square===!0?"square":"rounded")),stacked:w(()=>t.externalLabel===!1&&["top","bottom"].includes(t.labelPosition)),labelProps:w(()=>{if(t.externalLabel===!0){const i=t.hideLabel===null?e.value===!1:t.hideLabel;return{action:"push",data:{class:[t.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${t.labelPosition}`+(i===!0?" q-fab__label--external-hidden":"")],style:t.labelStyle}}}return{action:["left","top"].includes(t.labelPosition)?"unshift":"push",data:{class:[t.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${t.labelPosition}`+(t.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:t.labelStyle}}})}}var rL=["up","right","down","left"],oL=["left","center","right"];le({name:"QFab",props:{...pm,...Vs,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...pm.hideLabel,default:null},direction:{type:String,default:"right",validator:t=>rL.includes(t)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:t=>oL.includes(t)}},emits:$s,setup(t,{slots:e}){const i=$(null),n=$(t.modelValue===!0),r=yd(),{proxy:{$q:o}}=ke(),{formClass:a,labelProps:s}=vS(t,n),l=w(()=>t.persistent!==!0),{hide:u,toggle:c}=Gs({showing:n,hideOnRouteChange:l}),h=w(()=>({opened:n.value})),d=w(()=>`q-fab z-fab row inline justify-center q-fab--align-${t.verticalActionsAlign} ${a.value}`+(n.value===!0?" q-fab--opened":" q-fab--closed")),p=w(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${t.direction} q-fab__actions--${n.value===!0?"opened":"closed"}`),f=w(()=>{const b={id:r.value,role:"menu"};return n.value!==!0&&(b["aria-hidden"]="true"),b}),g=w(()=>"q-fab__icon-holder  q-fab__icon-holder--"+(n.value===!0?"opened":"closed"));function y(b,m){const v=e[b],S=`q-fab__${b} absolute-full`;return v===void 0?x(gt,{class:S,name:t[m]||o.iconSet.fab[m]}):x("div",{class:S},v(h.value))}function _(){const b=[];return t.hideIcon!==!0&&b.push(x("div",{class:g.value},[y("icon","icon"),y("active-icon","activeIcon")])),t.label===""&&e.label===void 0||b[s.value.action](x("div",s.value.data,e.label!==void 0?e.label(h.value):[t.label])),Xt(e.tooltip,b)}return uo(u2,{showing:n,onChildClick(b){u(b),i.value!==null&&i.value.$el.focus()}}),()=>x("div",{class:d.value},[x(vt,{ref:i,class:a.value,...t,noWrap:!0,stack:t.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true","aria-controls":r.value,onClick:c},_),x("div",{class:p.value,...f.value},ze(e.default))])}});var yS={start:"self-end",center:"self-center",end:"self-start"},aL=Object.keys(yS);le({name:"QFabAction",props:{...pm,icon:{type:String,default:""},anchor:{type:String,validator:t=>aL.includes(t)},to:[String,Object],replace:Boolean},emits:["click"],setup(t,{slots:e,emit:i}){const n=Ni(u2,()=>({showing:{value:!0},onChildClick:ni})),{formClass:r,labelProps:o}=vS(t,n.showing),a=w(()=>{const h=yS[t.anchor];return r.value+(h!==void 0?` ${h}`:"")}),s=w(()=>t.disable===!0||n.showing.value!==!0);function l(h){n.onChildClick(h),i("click",h)}function u(){const h=[];return e.icon!==void 0?h.push(e.icon()):t.icon!==""&&h.push(x(gt,{name:t.icon})),t.label===""&&e.label===void 0||h[o.value.action](x("div",o.value.data,e.label!==void 0?e.label():[t.label])),Xt(e.default,h)}const c=ke();return Object.assign(c.proxy,{click:l}),()=>x(vt,{class:a.value,...t,noWrap:!0,stack:t.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:s.value,onClick:l},u)}});var sL=[!0,!1,"ondemand"],lL={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:t=>sL.includes(t)}};function uL(t,e){const{props:i,proxy:n}=ke(),r=$(!1),o=$(null),a=$(!1);(function({validate:_,resetValidation:b,requiresQForm:m}){const v=Ni(c2,!1);if(v!==!1){const{props:S,proxy:C}=ke();Object.assign(C,{validate:_,resetValidation:b}),se(()=>S.disable,k=>{k===!0?(typeof b=="function"&&b(),v.unbindComponent(C)):v.bindComponent(C)}),Rt(()=>{S.disable!==!0&&v.bindComponent(C)}),ot(()=>{S.disable!==!0&&v.unbindComponent(C)})}})({validate:g,resetValidation:f});let s,l=0;const u=w(()=>i.rules!==void 0&&i.rules!==null&&i.rules.length!==0),c=w(()=>i.disable!==!0&&u.value===!0&&e.value===!1),h=w(()=>i.error===!0||r.value===!0),d=w(()=>typeof i.errorMessage=="string"&&i.errorMessage.length!==0?i.errorMessage:o.value);function p(){i.lazyRules!=="ondemand"&&c.value===!0&&a.value===!0&&y()}function f(){l++,e.value=!1,a.value=!1,r.value=!1,o.value=null,y.cancel()}function g(_=i.modelValue){if(i.disable===!0||u.value===!1)return!0;const b=++l,m=e.value!==!0?()=>{a.value=!0}:()=>{},v=(C,k)=>{C===!0&&m(),r.value=C,o.value=k||null,e.value=!1},S=[];for(let C=0;C<i.rules.length;C++){const k=i.rules[C];let L;if(typeof k=="function"?L=k(_,th):typeof k=="string"&&th[k]!==void 0&&(L=th[k](_)),L===!1||typeof L=="string")return v(!0,L),!1;L!==!0&&L!==void 0&&S.push(L)}return S.length===0?(v(!1),!0):(e.value=!0,Promise.all(S).then(C=>{if(C===void 0||Array.isArray(C)===!1||C.length===0)return b===l&&v(!1),!0;const k=C.find(L=>L===!1||typeof L=="string");return b===l&&v(k!==void 0,k),k===void 0},C=>(b===l&&v(!0),!1)))}se(()=>i.modelValue,()=>{a.value=!0,c.value===!0&&i.lazyRules===!1&&y()}),se(()=>i.reactiveRules,_=>{_===!0?s===void 0&&(s=se(()=>i.rules,p,{immediate:!0,deep:!0})):s!==void 0&&(s(),s=void 0)},{immediate:!0}),se(()=>i.lazyRules,p),se(t,_=>{_===!0?a.value=!0:c.value===!0&&i.lazyRules!=="ondemand"&&y()});const y=Ns(g,0);return ot(()=>{s!==void 0&&s(),y.cancel()}),Object.assign(n,{resetValidation:f,validate:g}),li(n,"hasError",()=>h.value),{isDirtyModel:a,hasRules:u,hasError:h,errorMessage:d,validate:g,resetValidation:f}}function ha(t){return t!=null&&(""+t).length!==0}var _S={...dt,...lL,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},bd={..._S,maxlength:[Number,String]},xd=["update:modelValue","clear","focus","blur"];function wd({requiredForAttr:t=!0,tagProp:e,changeEvent:i=!1}={}){const{props:n,proxy:r}=ke(),o=pt(n,r.$q),a=yd({required:t,getValue:()=>n.for});return{requiredForAttr:t,changeEvent:i,tag:e===!0?w(()=>n.tag):{value:"label"},isDark:o,editable:w(()=>n.disable!==!0&&n.readonly!==!0),innerLoading:$(!1),focused:$(!1),hasPopupOpen:!1,splitAttrs:gS(),targetUid:a,rootRef:$(null),targetRef:$(null),controlRef:$(null)}}function Sd(t){const{props:e,emit:i,slots:n,attrs:r,proxy:o}=ke(),{$q:a}=o;let s=null;t.hasValue===void 0&&(t.hasValue=w(()=>ha(e.modelValue))),t.emitValue===void 0&&(t.emitValue=E=>{i("update:modelValue",E)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:L,onFocusout:A}),Object.assign(t,{clearValue:q,onControlFocusin:L,onControlFocusout:A,focus:k}),t.computedCounter===void 0&&(t.computedCounter=w(()=>{if(e.counter!==!1){const E=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,O=e.maxlength!==void 0?e.maxlength:e.maxValues;return E+(O!==void 0?" / "+O:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:h,resetValidation:d}=uL(t.focused,t.innerLoading),p=t.floatingLabel!==void 0?w(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):w(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),f=w(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),g=w(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),y=w(()=>`q-field row no-wrap items-start q-field--${g.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(p.value===!0?" q-field--float":"")+(b.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&f.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),_=w(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(c.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),b=w(()=>e.labelSlot===!0||e.label!==void 0),m=w(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&c.value!==!0?` text-${e.labelColor}`:"")),v=w(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:p.value,modelValue:e.modelValue,emitValue:t.emitValue})),S=w(()=>{const E={};return t.targetUid.value&&(E.for=t.targetUid.value),e.disable===!0&&(E["aria-disabled"]="true"),E});function C(){const E=document.activeElement;let O=t.targetRef!==void 0&&t.targetRef.value;!O||E!==null&&E.id===t.targetUid.value||(O.hasAttribute("tabindex")===!0||(O=O.querySelector("[tabindex]")),O&&O!==E&&O.focus({preventScroll:!0}))}function k(){Hs(C)}function L(E){s!==null&&(clearTimeout(s),s=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,i("focus",E))}function A(E,O){s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,(document.hasFocus()!==!0||t.hasPopupOpen!==!0&&t.controlRef!==void 0&&t.controlRef.value!==null&&t.controlRef.value.contains(document.activeElement)===!1)&&(t.focused.value===!0&&(t.focused.value=!1,i("blur",E)),O!==void 0&&O())})}function q(E){Ke(E),a.platform.is.mobile!==!0?(t.targetRef!==void 0&&t.targetRef.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),i("update:modelValue",null),t.changeEvent===!0&&i("change",null),i("clear",e.modelValue),lt(()=>{const O=l.value;d(),l.value=O})}function P(E){[13,32].includes(E.keyCode)&&q(E)}function T(){const E=[];return n.prepend!==void 0&&E.push(x("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:ui},n.prepend())),E.push(x("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},function(){const O=[];return e.prefix!==void 0&&e.prefix!==null&&O.push(x("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&O.push(t.getShadowControl()),t.getControl!==void 0?O.push(t.getControl()):n.rawControl!==void 0?O.push(n.rawControl()):n.control!==void 0&&O.push(x("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},n.control(v.value))),b.value===!0&&O.push(x("div",{class:m.value},ze(n.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&O.push(x("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),O.concat(ze(n.default))}())),c.value===!0&&e.noErrorIcon===!1&&E.push(M("error",[x(gt,{name:a.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?E.push(M("inner-loading-append",n.loading!==void 0?n.loading():[x(Fn,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&E.push(M("inner-clearable-append",[x(gt,{class:"q-field__focusable-action",name:e.clearIcon||a.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":a.lang.label.clear,onKeyup:P,onClick:q})])),n.append!==void 0&&E.push(x("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:ui},n.append())),t.getInnerAppend!==void 0&&E.push(M("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&E.push(t.getControlChild()),E}function R(){let E,O;c.value===!0?h.value!==null?(E=[x("div",{role:"alert"},h.value)],O=`q--slot-error-${h.value}`):(E=ze(n.error),O="q--slot-error"):e.hideHint===!0&&t.focused.value!==!0||(e.hint!==void 0?(E=[x("div",e.hint)],O=`q--slot-hint-${e.hint}`):(E=ze(n.hint),O="q--slot-hint"));const V=e.counter===!0||n.counter!==void 0;if(e.hideBottomSpace===!0&&V===!1&&E===void 0)return;const B=x("div",{key:O,class:"q-field__messages col"},E);return x("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:ui},[e.hideBottomSpace===!0?B:x(si,{name:"q-transition--field-message"},()=>B),V===!0?x("div",{class:"q-field__counter"},n.counter!==void 0?n.counter():t.computedCounter.value):null])}function M(E,O){return O===null?null:x("div",{key:E,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},O)}let I=!1;return Mr(()=>{I=!0}),da(()=>{I===!0&&e.autofocus===!0&&o.focus()}),e.autofocus===!0&&Rt(()=>{o.focus()}),ot(()=>{s!==null&&clearTimeout(s)}),Object.assign(o,{focus:k,blur:function(){var E;E=C,$o=$o.filter(V=>V!==E);const O=document.activeElement;O!==null&&t.rootRef.value.contains(O)&&O.blur()}}),function(){const E=t.getControl===void 0&&n.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...S.value}:S.value;return x(t.tag.value,{ref:t.rootRef,class:[y.value,r.class],style:r.style,...E},[n.before!==void 0?x("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:ui},n.before()):null,x("div",{class:"q-field__inner relative-position col self-stretch"},[x("div",{ref:t.controlRef,class:_.value,tabindex:-1,...t.controlEvents},T()),f.value===!0?R():null]),n.after!==void 0?x("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:ui},n.after()):null])}}var cL=le({name:"QField",inheritAttrs:!1,props:{...bd,tag:{type:String,default:"label"}},emits:xd,setup:()=>Sd(wd({tagProp:!0}))});function Oa(t,e,i,n){const r=[];return t.forEach(o=>{n(o)===!0?r.push(o):e.push({failedPropValidation:i,file:o})}),r}function Ic(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),Ke(t)}var bS={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},xS=["rejected"];function wS({editable:t,dnd:e,getFileInput:i,addFilesToQueue:n}){const{props:r,emit:o,proxy:a}=ke(),s=$(null),l=w(()=>r.accept!==void 0?r.accept.split(",").map(g=>(g=g.trim())==="*"?"*/":(g.endsWith("/*")&&(g=g.slice(0,g.length-1)),g.toUpperCase())):null),u=w(()=>parseInt(r.maxFiles,10)),c=w(()=>parseInt(r.maxTotalSize,10));function h(g){if(t.value)if(g!==Object(g)&&(g={target:null}),g.target!==null&&g.target.matches('input[type="file"]')===!0)g.clientX===0&&g.clientY===0&&Nt(g);else{const y=i();y&&y!==g.target&&y.click(g)}}function d(g){t.value&&g&&n(null,g)}function p(g){Ke(g),(g.relatedTarget!==null||nt.is.safari!==!0?g.relatedTarget!==s.value:document.elementsFromPoint(g.clientX,g.clientY).includes(s.value)===!1)&&(e.value=!1)}function f(g){Ic(g);const y=g.dataTransfer.files;y.length!==0&&n(null,y),e.value=!1}return Object.assign(a,{pickFiles:h,addFiles:d}),{pickFiles:h,addFiles:d,onDragover:function(g){Ic(g),e.value!==!0&&(e.value=!0)},onDragleave:p,processFiles:function(g,y,_,b){let m=Array.from(y||g.target.files);const v=[],S=()=>{v.length!==0&&o("rejected",v)};if(r.accept!==void 0&&l.value.indexOf("*/")===-1&&(m=Oa(m,v,"accept",C=>l.value.some(k=>C.type.toUpperCase().startsWith(k)||C.name.toUpperCase().endsWith(k))),m.length===0))return S();if(r.maxFileSize!==void 0){const C=parseInt(r.maxFileSize,10);if(m=Oa(m,v,"max-file-size",k=>k.size<=C),m.length===0)return S()}if(r.multiple!==!0&&m.length!==0&&(m=[m[0]]),m.forEach(C=>{C.__key=C.webkitRelativePath+C.lastModified+C.name+C.size}),b===!0){const C=_.map(k=>k.__key);m=Oa(m,v,"duplicate",k=>C.includes(k.__key)===!1)}if(m.length===0)return S();if(r.maxTotalSize!==void 0){let C=b===!0?_.reduce((k,L)=>k+L.size,0):0;if(m=Oa(m,v,"max-total-size",k=>(C+=k.size,C<=c.value)),m.length===0)return S()}if(typeof r.filter=="function"){const C=r.filter(m);m=Oa(m,v,"filter",k=>C.includes(k))}if(r.maxFiles!==void 0){let C=b===!0?_.length:0;if(m=Oa(m,v,"max-files",()=>(C++,C<=u.value)),m.length===0)return S()}return S(),m.length!==0?m:void 0},getDndNode:function(g){if(e.value===!0)return x("div",{ref:s,class:`q-${g}__dnd absolute-full`,onDragenter:Ic,onDragover:Ic,onDragleave:p,onDrop:f})},maxFilesNumber:u,maxTotalSizeNumber:c}}function SS(t,e){function i(){const n=t.modelValue;try{const r="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(n)===n&&("length"in n?Array.from(n):[n]).forEach(o=>{r.items.add(o)}),{files:r.files}}catch{return{files:void 0}}}return w(e===!0?()=>{if(t.type==="file")return i()}:i)}le({name:"QFile",inheritAttrs:!1,props:{..._S,...mn,...bS,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...xd,...xS],setup(t,{slots:e,emit:i,attrs:n}){const{proxy:r}=ke(),o=wd(),a=$(null),s=$(!1),l=jv(t),{pickFiles:u,onDragover:c,onDragleave:h,processFiles:d,getDndNode:p}=wS({editable:o.editable,dnd:s,getFileInput:P,addFilesToQueue:T}),f=SS(t),g=w(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),y=w(()=>ha(g.value)),_=w(()=>g.value.map(I=>I.name).join(", ")),b=w(()=>em(g.value.reduce((I,E)=>I+E.size,0))),m=w(()=>({totalSize:b.value,filesNumber:g.value.length,maxFiles:t.maxFiles})),v=w(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:l.value,...n,id:o.targetUid.value,disabled:o.editable.value!==!0})),S=w(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),C=w(()=>t.multiple===!0&&t.append===!0);function k(I){const E=g.value.slice();E.splice(I,1),L(E)}function L(I){i("update:modelValue",t.multiple===!0?I:I[0])}function A(I){I.keyCode===13&&ui(I)}function q(I){I.keyCode!==13&&I.keyCode!==32||u(I)}function P(){return a.value}function T(I,E){const O=d(I,E,g.value,C.value),V=P();V!=null&&(V.value=""),O!==void 0&&((t.multiple===!0?t.modelValue&&O.every(B=>g.value.includes(B)):t.modelValue===O[0])||L(C.value===!0?g.value.concat(O):O))}function R(){return[x("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function M(){const I={ref:a,...v.value,...f.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:T};return t.multiple===!0&&(I.multiple=!0),x("input",I)}return Object.assign(o,{fieldClass:S,emitValue:L,hasValue:y,inputRef:a,innerValue:g,floatingLabel:w(()=>y.value===!0||ha(t.displayValue)),computedCounter:w(()=>{if(t.counterLabel!==void 0)return t.counterLabel(m.value);const I=t.maxFiles;return`${g.value.length}${I!==void 0?" / "+I:""} (${b.value})`}),getControlChild:()=>p("file"),getControl:()=>{const I={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return o.editable.value===!0&&Object.assign(I,{onDragover:c,onDragleave:h,onKeydown:A,onKeyup:q}),x("div",I,[M()].concat(function(){if(e.file!==void 0)return g.value.length===0?R():g.value.map((O,V)=>e.file({index:V,file:O,ref:this}));if(e.selected!==void 0)return g.value.length===0?R():e.selected({files:g.value,ref:this});if(t.useChips===!0)return g.value.length===0?R():g.value.map((O,V)=>x(G2,{key:"file-"+V,removable:o.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{k(V)}},()=>x("span",{class:"ellipsis",textContent:O.name})));const E=t.displayValue!==void 0?t.displayValue:_.value;return E.length!==0?[x("div",{class:t.inputClass,style:t.inputStyle,textContent:E})]:R()}()))}}),Object.assign(r,{removeAtIndex:k,removeFile:function(I){const E=g.value.indexOf(I);E!==-1&&k(E)},getNativeElement:()=>a.value}),li(r,"nativeEl",()=>a.value),Sd(o)}}),le({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=Ni(ua,wt);if(r===wt)return wt;const o=$(parseInt(t.heightHint,10)),a=$(!0),s=$(hn.value===!0||r.isContainer.value===!0?0:window.innerHeight),l=w(()=>t.reveal===!0||r.view.value.indexOf("F")!==-1||n.platform.is.ios&&r.isContainer.value===!0),u=w(()=>r.isContainer.value===!0?r.containerHeight.value:s.value),c=w(()=>{if(t.modelValue!==!0)return 0;if(l.value===!0)return a.value===!0?o.value:0;const v=r.scroll.value.position+u.value+o.value-r.height.value;return v>0?v:0}),h=w(()=>t.modelValue!==!0||l.value===!0&&a.value!==!0),d=w(()=>t.modelValue===!0&&h.value===!0&&t.reveal===!0),p=w(()=>"q-footer q-layout__section--marginal "+(l.value===!0?"fixed":"absolute")+"-bottom"+(t.bordered===!0?" q-footer--bordered":"")+(h.value===!0?" q-footer--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus"+(l.value!==!0?" hidden":""):"")),f=w(()=>{const v=r.rows.value.bottom,S={};return v[0]==="l"&&r.left.space===!0&&(S[n.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),v[2]==="r"&&r.right.space===!0&&(S[n.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),S});function g(v,S){r.update("footer",v,S)}function y(v,S){v.value!==S&&(v.value=S)}function _({height:v}){y(o,v),g("size",v)}function b(v){d.value===!0&&y(a,!0),i("focusin",v)}se(()=>t.modelValue,v=>{g("space",v),y(a,!0),r.animate()}),se(c,v=>{g("offset",v)}),se(()=>t.reveal,v=>{v===!1&&y(a,t.modelValue)}),se(a,v=>{r.animate(),i("reveal",v)}),se([o,r.scroll,r.height],function(){if(t.reveal!==!0)return;const{direction:v,position:S,inflectionPoint:C}=r.scroll.value;y(a,v==="up"||S-C<100||r.height.value-u.value-S-o.value<300)}),se(()=>n.screen.height,v=>{r.isContainer.value!==!0&&y(s,v)});const m={};return r.instances.footer=m,t.modelValue===!0&&g("size",o.value),g("space",t.modelValue),g("offset",c.value),ot(()=>{r.instances.footer===m&&(r.instances.footer=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const v=Xt(e.default,[x(ca,{debounce:0,onResize:_})]);return t.elevated===!0&&v.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),x("footer",{class:p.value,style:f.value,onFocusin:b},v)}}}),le({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:e,emit:i}){const n=ke(),r=$(null);let o=0;const a=[];function s(p){const f=typeof p=="boolean"?p:t.noErrorFocus!==!0,g=++o,y=(b,m)=>{i("validation"+(b===!0?"Success":"Error"),m)},_=b=>{const m=b.validate();return typeof m.then=="function"?m.then(v=>({valid:v,comp:b}),v=>({valid:!1,comp:b,err:v})):Promise.resolve({valid:m,comp:b})};return(t.greedy===!0?Promise.all(a.map(_)).then(b=>b.filter(m=>m.valid!==!0)):a.reduce((b,m)=>b.then(()=>_(m).then(v=>{if(v.valid===!1)return Promise.reject(v)})),Promise.resolve()).catch(b=>[b])).then(b=>{if(b===void 0||b.length===0)return g===o&&y(!0),!0;if(g===o){const{comp:m,err:v}=b[0];if(y(!1,m),f===!0){const S=b.find(({comp:C})=>typeof C.focus=="function"&&to(C.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function l(){o++,a.forEach(p=>{typeof p.resetValidation=="function"&&p.resetValidation()})}function u(p){p!==void 0&&Ke(p);const f=o+1;s().then(g=>{f===o&&g===!0&&(t.onSubmit!==void 0?i("submit",p):p!==void 0&&p.target!==void 0&&typeof p.target.submit=="function"&&p.target.submit())})}function c(p){p!==void 0&&Ke(p),i("reset"),lt(()=>{l(),t.autofocus===!0&&t.noResetFocus!==!0&&h()})}function h(){Hs(()=>{if(r.value===null)return;(r.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(r.value.querySelectorAll("[tabindex]"),f=>f.tabIndex!==-1))?.focus({preventScroll:!0})})}uo(c2,{bindComponent(p){a.push(p)},unbindComponent(p){const f=a.indexOf(p);f!==-1&&a.splice(f,1)}});let d=!1;return Mr(()=>{d=!0}),da(()=>{d===!0&&t.autofocus===!0&&h()}),Rt(()=>{t.autofocus===!0&&h()}),Object.assign(n.proxy,{validate:s,resetValidation:l,submit:u,reset:c,focus:h,getValidationComponents:()=>a}),()=>x("form",{class:"q-form",ref:r,onSubmit:u,onReset:c},ze(e.default))}}),le({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=Ni(ua,wt);if(r===wt)return wt;const o=$(parseInt(t.heightHint,10)),a=$(!0),s=w(()=>t.reveal===!0||r.view.value.indexOf("H")!==-1||n.platform.is.ios&&r.isContainer.value===!0),l=w(()=>{if(t.modelValue!==!0)return 0;if(s.value===!0)return a.value===!0?o.value:0;const b=o.value-r.scroll.value.position;return b>0?b:0}),u=w(()=>t.modelValue!==!0||s.value===!0&&a.value!==!0),c=w(()=>t.modelValue===!0&&u.value===!0&&t.reveal===!0),h=w(()=>"q-header q-layout__section--marginal "+(s.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),d=w(()=>{const b=r.rows.value.top,m={};return b[0]==="l"&&r.left.space===!0&&(m[n.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),b[2]==="r"&&r.right.space===!0&&(m[n.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),m});function p(b,m){r.update("header",b,m)}function f(b,m){b.value!==m&&(b.value=m)}function g({height:b}){f(o,b),p("size",b)}function y(b){c.value===!0&&f(a,!0),i("focusin",b)}se(()=>t.modelValue,b=>{p("space",b),f(a,!0),r.animate()}),se(l,b=>{p("offset",b)}),se(()=>t.reveal,b=>{b===!1&&f(a,t.modelValue)}),se(a,b=>{r.animate(),i("reveal",b)}),se(r.scroll,b=>{t.reveal===!0&&f(a,b.direction==="up"||b.position<=t.revealOffset||b.position-b.inflectionPoint<100)});const _={};return r.instances.header=_,t.modelValue===!0&&p("size",o.value),p("space",t.modelValue),p("offset",l.value),ot(()=>{r.instances.header===_&&(r.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const b=Ru(e.default,[]);return t.elevated===!0&&b.push(x("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b.push(x(ca,{debounce:0,onResize:g})),x("header",{class:h.value,style:d.value,onFocusin:y},b)}}});var Zv={ratio:[String,Number]};function Qv(t,e){return w(()=>{const i=Number(t.ratio||(e!==void 0?e.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:100/i+"%"}:null})}le({name:"QImg",props:{...Zv,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:1.7778},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:e,emit:i}){const n=$(t.initialRatio),r=Qv(t,n),o=ke(),{registerTimeout:a,removeTimeout:s}=Sr(),{registerTimeout:l,removeTimeout:u}=Sr(),c=w(()=>t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null),h=w(()=>t.errorSrc!==void 0?{src:t.errorSrc,__qerror:!0}:null),d=[$(null),$(c.value)],p=$(0),f=$(!1),g=$(!1),y=w(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),_=w(()=>({width:t.width,height:t.height})),b=w(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition q-img__image--`),m=w(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));function v(){u(),f.value=!1}function S({target:q}){to(o)===!1&&(s(),n.value=q.naturalHeight===0?.5:q.naturalWidth/q.naturalHeight,C(q,1))}function C(q,P){P!==1e3&&to(o)!==!0&&(q.complete===!0?function(T){to(o)!==!0&&(p.value=1^p.value,d[p.value].value=null,v(),T.getAttribute("__qerror")!=="true"&&(g.value=!1),i("load",T.currentSrc||T.src))}(q):a(()=>{C(q,P+1)},50))}function k(q){s(),v(),g.value=!0,d[p.value].value=h.value,d[1^p.value].value=c.value,i("error",q)}function L(q){const P=d[q].value,T={key:"img_"+q,class:b.value,style:m.value,alt:t.alt,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...P};return p.value===q?Object.assign(T,{class:T.class+"current",onLoad:S,onError:k}):T.class+="loaded",x("div",{class:"q-img__container absolute-full",key:"img"+q},x("img",T))}function A(){return f.value===!1?x("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ze(e[g.value===!0?"error":"default"])):x("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},e.loading!==void 0?e.loading():t.noSpinner===!0?void 0:[x(Fn,{color:t.spinnerColor,size:t.spinnerSize})])}{let q=function(){se(()=>t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null,P=>{s(),g.value=!1,P===null?(v(),d[1^p.value].value=c.value):(u(),t.loadingShowDelay!==0?l(()=>{f.value=!0},t.loadingShowDelay):f.value=!0),d[p.value].value=P},{immediate:!0})};hn.value===!0?Rt(q):q()}return()=>{const q=[];return r.value!==null&&q.push(x("div",{key:"filler",style:r.value})),d[0].value!==null&&q.push(L(0)),d[1].value!==null&&q.push(L(1)),q.push(x(si,{name:"q-transition--fade"},A)),x("div",{key:"main",class:y.value,style:_.value,role:"img","aria-label":t.alt},q)}}});var{passive:wo}=Pt;le({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:ya,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(t,{slots:e,emit:i}){const n=$(!1),r=$(!0),o=$(null),a=$(null);let s,l,u=t.initialIndex;const c=w(()=>"q-infinite-scroll__loading"+(n.value===!0?"":" invisible"));function h(){if(t.disable===!0||n.value===!0||r.value===!1)return;const S=wc(s),C=io(s),k=Ls(s);t.reverse===!1?Math.round(C+k+t.offset)>=Math.round(S)&&d():Math.round(C)<=t.offset&&d()}function d(){if(t.disable===!0||n.value===!0||r.value===!1)return;u++,n.value=!0;const S=wc(s);i("load",u,C=>{r.value===!0&&(n.value=!1,lt(()=>{if(t.reverse===!0){const k=wc(s),L=io(s);cs(s,L+(k-S))}C===!0?f():o.value&&o.value.closest("body")&&l()}))})}function p(){r.value===!1&&(r.value=!0,s.addEventListener("scroll",l,wo)),h()}function f(){r.value===!0&&(r.value=!1,n.value=!1,s.removeEventListener("scroll",l,wo),l!==void 0&&l.cancel!==void 0&&l.cancel())}function g(){if(s&&r.value===!0&&s.removeEventListener("scroll",l,wo),s=Jn(o.value,t.scrollTarget),r.value===!0){if(s.addEventListener("scroll",l,wo),t.reverse===!0){const S=wc(s),C=Ls(s);cs(s,S-C)}h()}}function y(S){S=parseInt(S,10);const C=l;l=S<=0?h:Ns(h,isNaN(S)===!0?100:S),s&&r.value===!0&&(C!==void 0&&s.removeEventListener("scroll",C,wo),s.addEventListener("scroll",l,wo))}function _(S){if(b.value===!0){if(a.value===null)return void(S!==!0&&lt(()=>{_(!0)}));const C=(n.value===!0?"un":"")+"pauseAnimations";Array.from(a.value.getElementsByTagName("svg")).forEach(k=>{k[C]()})}}const b=w(()=>t.disable!==!0&&r.value===!0);se([n,b],()=>{_()}),se(()=>t.disable,S=>{S===!0?f():p()}),se(()=>t.reverse,()=>{n.value===!1&&r.value===!0&&h()}),se(()=>t.scrollTarget,g),se(()=>t.debounce,y);let m=!1;da(()=>{m!==!1&&s&&cs(s,m)}),Mr(()=>{m=!!s&&io(s)}),ot(()=>{r.value===!0&&s.removeEventListener("scroll",l,wo)}),Rt(()=>{y(t.debounce),g(),n.value===!1&&_()});const v=ke();return Object.assign(v.proxy,{poll:()=>{l!==void 0&&l()},trigger:d,stop:f,reset:function(){u=0},resume:p,setIndex:function(S){u=S},updateScrollTarget:g}),()=>{const S=Ru(e.default,[]);return b.value===!0&&S[t.reverse===!1?"push":"unshift"](x("div",{ref:a,class:c.value},ze(e.loading))),x("div",{class:"q-infinite-scroll",ref:o},S)}}}),le({name:"QInnerLoading",props:{...dt,...Zo,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(t,{slots:e}){const i=ke(),n=pt(t,i.proxy.$q),{transitionProps:r,transitionStyle:o}=md(t),a=w(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),s=w(()=>"q-inner-loading__label"+(t.labelClass!==void 0?` ${t.labelClass}`:""));function l(){return t.showing===!0?x("div",{class:a.value,style:o.value},e.default!==void 0?e.default():function(){const u=[x(Fn,{size:t.size,color:t.color})];return t.label!==void 0&&u.push(x("div",{class:s.value,style:t.labelStyle},[t.label])),u}()):null}return()=>x(si,r.value,l)}});var b_={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Wh={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},CS=Object.keys(Wh);CS.forEach(t=>{Wh[t].regex=new RegExp(Wh[t].pattern)});var hL=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+CS.join("")+"])|(.)","g"),x_=/[.*+?^${}()|[\]\\]/g,ei="",dL={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function pL(t,e,i,n){let r,o,a,s,l,u;const c=$(null),h=$(function(){if(p(),c.value===!0){const m=y(_(t.modelValue));return t.fillMask!==!1?b(m):m}return t.modelValue}());function d(m){if(m<r.length)return r.slice(-m);let v="",S=r;const C=S.indexOf(ei);if(C!==-1){for(let k=m-S.length;k>0;k--)v+=ei;S=S.slice(0,C)+v+S.slice(C)}return S}function p(){if(c.value=t.mask!==void 0&&t.mask.length!==0&&(t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)),c.value===!1)return s=void 0,r="",void(o="");const m=b_[t.mask]===void 0?t.mask:b_[t.mask],v=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",S=v.replace(x_,"\\$&"),C=[],k=[],L=[];let A=t.reverseFillMask===!0,q="",P="";m.replace(hL,(I,E,O,V,B)=>{if(V!==void 0){const F=Wh[V];L.push(F),P=F.negate,A===!0&&(k.push("(?:"+P+"+)?("+F.pattern+"+)?(?:"+P+"+)?("+F.pattern+"+)?"),A=!1),k.push("(?:"+P+"+)?("+F.pattern+")?")}else if(O!==void 0)q="\\"+(O==="\\"?"":O),L.push(O),C.push("([^"+q+"]+)?"+q+"?");else{const F=E!==void 0?E:B;q=F==="\\"?"\\\\\\\\":F.replace(x_,"\\\\$&"),L.push(F),C.push("([^"+q+"]+)?"+q+"?")}});const T=new RegExp("^"+C.join("")+"("+(q===""?".":"[^"+q+"]")+"+)?"+(q===""?"":"["+q+"]*")+"$"),R=k.length-1,M=k.map((I,E)=>E===0&&t.reverseFillMask===!0?new RegExp("^"+S+"*"+I):E===R?new RegExp("^"+I+"("+(P===""?".":P)+"+)?"+(t.reverseFillMask===!0?"$":S+"*")):new RegExp("^"+I));a=L,s=I=>{const E=T.exec(t.reverseFillMask===!0?I:I.slice(0,L.length+1));E!==null&&(I=E.slice(1).join(""));const O=[],V=M.length;for(let B=0,F=I;B<V;B++){const H=M[B].exec(F);if(H===null)break;F=F.slice(H.shift().length),O.push(...H)}return O.length!==0?O.join(""):I},r=L.map(I=>typeof I=="string"?I:ei).join(""),o=r.split(ei).join(v)}function f(m,v,S){const C=n.value,k=C.selectionEnd,L=C.value.length-k,A=_(m);v===!0&&p();const q=y(A),P=t.fillMask!==!1?b(q):q,T=h.value!==P;C.value!==P&&(C.value=P),T===!0&&(h.value=P),document.activeElement===C&&lt(()=>{if(P!==o)if(S!=="insertFromPaste"||t.reverseFillMask===!0)if(["deleteContentBackward","deleteContentForward"].indexOf(S)===-1)if(t.reverseFillMask===!0)if(T===!0){const M=Math.max(0,P.length-(P===o?0:Math.min(q.length,L+1)));M===1&&k===1?C.setSelectionRange(M,M,"forward"):g.rightReverse(C,M)}else{const M=P.length-L;C.setSelectionRange(M,M,"backward")}else if(T===!0){const M=Math.max(0,r.indexOf(ei),Math.min(q.length,k)-1);g.right(C,M)}else{const M=k-1;g.right(C,M)}else{const M=t.reverseFillMask===!0?k===0?P.length>q.length?1:0:Math.max(0,P.length-(P===o?0:Math.min(q.length,L)+1))+1:k;C.setSelectionRange(M,M,"forward")}else{const M=C.selectionEnd;let I=k-1;for(let E=l;E<=I&&E<M;E++)r[E]!==ei&&I++;g.right(C,I)}else{const M=t.reverseFillMask===!0?o.length:0;C.setSelectionRange(M,M,"forward")}});const R=t.unmaskedValue===!0?_(P):P;String(t.modelValue)===R||t.modelValue===null&&R===""||i(R,!0)}se(()=>t.type+t.autogrow,p),se(()=>t.mask,m=>{if(m!==void 0)f(h.value,!0);else{const v=_(h.value);p(),t.modelValue!==v&&e("update:modelValue",v)}}),se(()=>t.fillMask+t.reverseFillMask,()=>{c.value===!0&&f(h.value,!0)}),se(()=>t.unmaskedValue,()=>{c.value===!0&&f(h.value)});const g={left(m,v){const S=r.slice(v-1).indexOf(ei)===-1;let C=Math.max(0,v-1);for(;C>=0;C--)if(r[C]===ei){v=C,S===!0&&v++;break}if(C<0&&r[v]!==void 0&&r[v]!==ei)return g.right(m,0);v>=0&&m.setSelectionRange(v,v,"backward")},right(m,v){const S=m.value.length;let C=Math.min(S,v+1);for(;C<=S;C++){if(r[C]===ei){v=C;break}r[C-1]===ei&&(v=C)}if(C>S&&r[v-1]!==void 0&&r[v-1]!==ei)return g.left(m,S);m.setSelectionRange(v,v,"forward")},leftReverse(m,v){const S=d(m.value.length);let C=Math.max(0,v-1);for(;C>=0;C--){if(S[C-1]===ei){v=C;break}if(S[C]===ei&&(v=C,C===0))break}if(C<0&&S[v]!==void 0&&S[v]!==ei)return g.rightReverse(m,0);v>=0&&m.setSelectionRange(v,v,"backward")},rightReverse(m,v){const S=m.value.length,C=d(S),k=C.slice(0,v+1).indexOf(ei)===-1;let L=Math.min(S,v+1);for(;L<=S;L++)if(C[L-1]===ei){(v=L)>0&&k===!0&&v--;break}if(L>S&&C[v-1]!==void 0&&C[v-1]!==ei)return g.leftReverse(m,S);m.setSelectionRange(v,v,"forward")}};function y(m){if(m==null||m==="")return"";if(t.reverseFillMask===!0)return function(k){const L=a,A=r.indexOf(ei);let q=k.length-1,P="";for(let T=L.length-1;T>=0&&q!==-1;T--){const R=L[T];let M=k[q];if(typeof R=="string")P=R+P,M===R&&q--;else{if(M===void 0||!R.regex.test(M))return P;do P=(R.transform!==void 0?R.transform(M):M)+P,q--,M=k[q];while(A===T&&M!==void 0&&R.regex.test(M))}}return P}(m);const v=a;let S=0,C="";for(let k=0;k<v.length;k++){const L=m[S],A=v[k];if(typeof A=="string")C+=A,L===A&&S++;else{if(L===void 0||!A.regex.test(L))return C;C+=A.transform!==void 0?A.transform(L):L,S++}}return C}function _(m){return typeof m!="string"||s===void 0?typeof m=="number"?s(""+m):m:s(m)}function b(m){return o.length-m.length<=0?m:t.reverseFillMask===!0&&m.length!==0?o.slice(0,-m.length)+m:m+o.slice(m.length)}return{innerValue:h,hasMask:c,moveCursorForPaste:function(m,v,S){const C=y(_(m.value));v=Math.max(0,r.indexOf(ei),Math.min(C.length,v)),l=v,m.setSelectionRange(v,S,"forward")},updateMaskValue:f,onMaskedKeydown:function(m){if(e("keydown",m),la(m)===!0||m.altKey===!0)return;const v=n.value,S=v.selectionStart,C=v.selectionEnd;if(m.shiftKey||(u=void 0),m.keyCode===37||m.keyCode===39){m.shiftKey&&u===void 0&&(u=v.selectionDirection==="forward"?S:C);const k=g[(m.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(m.preventDefault(),k(v,u===S?C:S),m.shiftKey){const L=v.selectionStart;v.setSelectionRange(Math.min(u,L),Math.max(u,L),"forward")}}else m.keyCode===8&&t.reverseFillMask!==!0&&S===C?(g.left(v,S),v.setSelectionRange(v.selectionStart,C,"backward")):m.keyCode===46&&t.reverseFillMask===!0&&S===C&&(g.rightReverse(v,C),v.setSelectionRange(S,v.selectionEnd,"forward"))},onMaskedClick:function(m){e("click",m),u=void 0}}}var fL=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,gL=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,mL=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,vL=/[a-z0-9_ -]$/i;function MS(t){return function(e){if(e.type==="compositionend"||e.type==="change"){if(e.target.qComposing!==!0)return;e.target.qComposing=!1,t(e)}else e.type==="compositionupdate"&&e.target.qComposing!==!0&&typeof e.data=="string"&&(nt.is.firefox===!0?vL.test(e.data)===!1:fL.test(e.data)===!0||gL.test(e.data)===!0||mL.test(e.data)===!0)&&(e.target.qComposing=!0)}}var jl=le({name:"QInput",inheritAttrs:!1,props:{...bd,...dL,...mn,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...xd,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:i}){const{proxy:n}=ke(),{$q:r}=n,o={};let a,s,l,u=NaN,c=null;const h=$(null),d=jv(t),{innerValue:p,hasMask:f,moveCursorForPaste:g,updateMaskValue:y,onMaskedKeydown:_,onMaskedClick:b}=pL(t,e,M,h),m=SS(t,!0),v=w(()=>ha(p.value)),S=MS(T),C=wd({changeEvent:!0}),k=w(()=>t.type==="textarea"||t.autogrow===!0),L=w(()=>k.value===!0||["text","search","url","tel","password"].includes(t.type)),A=w(()=>{const F={...C.splitAttrs.listeners.value,onInput:T,onPaste:P,onChange:E,onBlur:O,onFocus:Nt};return F.onCompositionstart=F.onCompositionupdate=F.onCompositionend=S,f.value===!0&&(F.onKeydown=_,F.onClick=b),t.autogrow===!0&&(F.onAnimationend=R),F}),q=w(()=>{const F={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:d.value,...C.splitAttrs.attributes.value,id:C.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return k.value===!1&&(F.type=t.type),t.autogrow===!0&&(F.rows=1),F});function P(F){if(f.value===!0&&t.reverseFillMask!==!0){const H=F.target;g(H,H.selectionStart,H.selectionEnd)}e("paste",F)}function T(F){if(!F||!F.target)return;if(t.type==="file")return void e("update:modelValue",F.target.files);const H=F.target.value;if(F.target.qComposing!==!0){if(f.value===!0)y(H,!1,F.inputType);else if(M(H),L.value===!0&&F.target===document.activeElement){const{selectionStart:ee,selectionEnd:ne}=F.target;ee!==void 0&&ne!==void 0&&lt(()=>{F.target===document.activeElement&&H.indexOf(F.target.value)===0&&F.target.setSelectionRange(ee,ne)})}t.autogrow===!0&&I()}else o.value=H}function R(F){e("animationend",F),I()}function M(F,H){l=()=>{c=null,t.type!=="number"&&o.hasOwnProperty("value")===!0&&delete o.value,t.modelValue!==F&&u!==F&&(u=F,H===!0&&(s=!0),e("update:modelValue",F),lt(()=>{u===F&&(u=NaN)})),l=void 0},t.type==="number"&&(a=!0,o.value=F),t.debounce!==void 0?(c!==null&&clearTimeout(c),o.value=F,c=setTimeout(l,t.debounce)):l()}function I(){requestAnimationFrame(()=>{const F=h.value;if(F!==null){const H=F.parentNode.style,{scrollTop:ee}=F,{overflowY:ne,maxHeight:te}=r.platform.is.firefox===!0?{}:window.getComputedStyle(F),N=ne!==void 0&&ne!=="scroll";N===!0&&(F.style.overflowY="hidden"),H.marginBottom=F.scrollHeight-1+"px",F.style.height="1px",F.style.height=F.scrollHeight+"px",N===!0&&(F.style.overflowY=parseInt(te,10)<F.scrollHeight?"auto":"hidden"),H.marginBottom="",F.scrollTop=ee}})}function E(F){S(F),c!==null&&(clearTimeout(c),c=null),l!==void 0&&l(),e("change",F.target.value)}function O(F){F!==void 0&&Nt(F),c!==null&&(clearTimeout(c),c=null),l!==void 0&&l(),a=!1,s=!1,delete o.value,t.type!=="file"&&setTimeout(()=>{h.value!==null&&(h.value.value=p.value!==void 0?p.value:"")})}function V(){return o.hasOwnProperty("value")===!0?o.value:p.value!==void 0?p.value:""}se(()=>t.type,()=>{h.value&&(h.value.value=t.modelValue)}),se(()=>t.modelValue,F=>{if(f.value===!0){if(s===!0&&(s=!1,String(F)===u))return;y(F)}else p.value!==F&&(p.value=F,t.type==="number"&&o.hasOwnProperty("value")===!0&&(a===!0?a=!1:delete o.value));t.autogrow===!0&&lt(I)}),se(()=>t.autogrow,F=>{F===!0?lt(I):h.value!==null&&i.rows>0&&(h.value.style.height="auto")}),se(()=>t.dense,()=>{t.autogrow===!0&&lt(I)}),ot(()=>{O()}),Rt(()=>{t.autogrow===!0&&I()}),Object.assign(C,{innerValue:p,fieldClass:w(()=>"q-"+(k.value===!0?"textarea":"input")+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:w(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:h,emitValue:M,hasValue:v,floatingLabel:w(()=>v.value===!0&&(t.type!=="number"||isNaN(p.value)===!1)||ha(t.displayValue)),getControl:()=>x(k.value===!0?"textarea":"input",{ref:h,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...q.value,...A.value,...t.type!=="file"?{value:V()}:m.value}),getShadowControl:()=>x("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(k.value===!0?"":" text-no-wrap")},[x("span",{class:"invisible"},V()),x("span",t.shadowText)])});const B=Sd(C);return Object.assign(n,{focus:function(){Hs(()=>{const F=document.activeElement;h.value===null||h.value===F||F!==null&&F.id===C.targetUid.value||h.value.focus({preventScroll:!0})})},select:function(){h.value!==null&&h.value.select()},getNativeElement:()=>h.value}),li(n,"nativeEl",()=>h.value),B}}),w_={threshold:0,root:null,rootMargin:"0px"};function S_(t,e,i){let n,r,o;typeof i=="function"?(n=i,r=w_,o=e.cfg===void 0):(n=i.handler,r=Object.assign({},w_,i.cfg),o=e.cfg===void 0||Cn(e.cfg,r)===!1),e.handler!==n&&(e.handler=n),o===!0&&(e.cfg=r,e.observer!==void 0&&e.observer.unobserve(t),e.observer=new IntersectionObserver(([a])=>{if(typeof e.handler=="function"){if(a.rootBounds===null&&document.body.contains(t)===!0)return e.observer.unobserve(t),void e.observer.observe(t);(e.handler(a,e.observer)===!1||e.once===!0&&a.isIntersecting===!0)&&kS(t)}},r),e.observer.observe(t))}function kS(t){const e=t.__qvisible;e!==void 0&&(e.observer!==void 0&&e.observer.unobserve(t),delete t.__qvisible)}var yL=In({name:"intersection",mounted(t,{modifiers:e,value:i}){const n={once:e.once===!0};S_(t,n,i),t.__qvisible=n},updated(t,e){const i=t.__qvisible;i!==void 0&&S_(t,i,e.value)},beforeUnmount:kS});le({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(t,{slots:e,emit:i}){const n=$(hn.value===!0&&t.ssrPrerender),r=w(()=>t.root!==void 0||t.margin!==void 0||t.threshold!==void 0?{handler:l,cfg:{root:t.root,rootMargin:t.margin,threshold:t.threshold}}:l),o=w(()=>t.disable!==!0&&(hn.value!==!0||t.once!==!0||t.ssrPrerender!==!0)),a=w(()=>[[yL,r.value,void 0,{once:t.once}]]),s=w(()=>`--q-transition-duration: ${t.transitionDuration}ms`);function l(c){n.value!==c.isIntersecting&&(n.value=c.isIntersecting,t.onVisibility!==void 0&&i("visibility",n.value))}function u(){return n.value===!0?[x("div",{key:"content",style:s.value},ze(e.default))]:e.hidden!==void 0?[x("div",{key:"hidden",style:s.value},e.hidden())]:void 0}return()=>{const c=t.transition?[x(si,{name:"q-transition--"+t.transition},u)]:u();return pn(t.tag,{class:"q-intersection"},c,"main",o.value,()=>a.value)}}});var _L=["ul","ol"],TS=le({name:"QList",props:{...dt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:e}){const i=ke(),n=pt(t,i.proxy.$q),r=w(()=>_L.includes(t.tag)?null:"list"),o=w(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(n.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>x(t.tag,{class:o.value,role:r.value},ze(e.default))}}),C_=[34,37,40,33,39,38],bL=Object.keys(Xv);le({name:"QKnob",props:{...mn,...Xv,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=$(t.modelValue),a=$(!1),s=w(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),l=w(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax);let u;function c(){o.value=t.modelValue===null?s.value:Et(t.modelValue,s.value,l.value),P(!0)}se(()=>`${t.modelValue}|${s.value}|${l.value}`,c),c();const h=w(()=>t.disable===!1&&t.readonly===!1),d=w(()=>"q-knob non-selectable"+(h.value===!0?" q-knob--editable":t.disable===!0?" disabled":"")),p=w(()=>(String(t.step).trim().split(".")[1]||"").length),f=w(()=>t.step===0?1:t.step),g=w(()=>t.instantFeedback===!0||a.value===!0),y=r.platform.is.mobile===!0?w(()=>h.value===!0?{onClick:k}:{}):w(()=>h.value===!0?{onMousedown:C,onClick:k,onKeydown:L,onKeyup:q}:{}),_=w(()=>h.value===!0?{tabindex:t.tabindex}:{["aria-"+(t.disable===!0?"disabled":"readonly")]:"true"}),b=w(()=>{const M={};return bL.forEach(I=>{M[I]=t[I]}),M});function m(M){M.isFinal?(A(M.evt,!0),a.value=!1):(M.isFirst&&(S(),a.value=!0),A(M.evt))}const v=w(()=>[[cn,m,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function S(){const{top:M,left:I,width:E,height:O}=n.$el.getBoundingClientRect();u={top:M+O/2,left:I+E/2}}function C(M){S(),A(M)}function k(M){S(),A(M,!0)}function L(M){if(!C_.includes(M.keyCode))return;Ke(M);const I=([34,33].includes(M.keyCode)?10:1)*f.value,E=[34,37,40].includes(M.keyCode)?-I:I;o.value=Et(parseFloat((o.value+E).toFixed(p.value)),s.value,l.value),P()}function A(M,I){const E=qi(M),O=Math.abs(E.top-u.top),V=Math.sqrt(O**2+Math.abs(E.left-u.left)**2);let B=Math.asin(O/V)*(180/Math.PI);B=E.top<u.top?u.left<E.left?90-B:270+B:u.left<E.left?B+90:270-B,r.lang.rtl===!0?B=Fh(-B-t.angle,0,360):t.angle&&(B=Fh(B-t.angle,0,360)),t.reverse===!0&&(B=360-B);let F=t.min+B/360*(t.max-t.min);if(f.value!==0){const H=F%f.value;F=F-H+(Math.abs(H)>=f.value/2?(H<0?-1:1)*f.value:0),F=parseFloat(F.toFixed(p.value))}F=Et(F,s.value,l.value),i("dragValue",F),o.value!==F&&(o.value=F),P(I)}function q(M){C_.includes(M.keyCode)&&P(!0)}function P(M){t.modelValue!==o.value&&i("update:modelValue",o.value),M===!0&&i("change",o.value)}const T=Ou(t);function R(){return x("input",T.value)}return()=>{const M={class:d.value,role:"slider","aria-valuemin":s.value,"aria-valuemax":l.value,"aria-valuenow":t.modelValue,..._.value,...b.value,value:o.value,instantFeedback:g.value,...y.value},I={default:e.default};return h.value===!0&&t.name!==void 0&&(I.internal=R),pn(W2,M,I,"knob",h.value,()=>v.value)}}});var{passive:M_}=Pt,xL=["both","horizontal","vertical"],ES=le({name:"QScrollObserver",props:{axis:{type:String,validator:t=>xL.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:ya},emits:["scroll"],setup(t,{emit:e}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n,r,o=null;function a(){o!==null&&o();const h=Math.max(0,io(n)),d=vd(n),p={top:h-i.position.top,left:d-i.position.left};if(t.axis==="vertical"&&p.top===0||t.axis==="horizontal"&&p.left===0)return;const f=Math.abs(p.top)>=Math.abs(p.left)?p.top<0?"up":"down":p.left<0?"left":"right";i.position={top:h,left:d},i.directionChanged=i.direction!==f,i.delta=p,i.directionChanged===!0&&(i.direction=f,i.inflectionPoint=i.position),e("scroll",{...i})}function s(){n=Jn(r,t.scrollTarget),n.addEventListener("scroll",u,M_),u(!0)}function l(){n!==void 0&&(n.removeEventListener("scroll",u,M_),n=void 0)}function u(h){if(h===!0||t.debounce===0||t.debounce==="0")a();else if(o===null){const[d,p]=t.debounce?[setTimeout(a,t.debounce),clearTimeout]:[requestAnimationFrame(a),cancelAnimationFrame];o=()=>{p(d),o=null}}}se(()=>t.scrollTarget,()=>{l(),s()});const{proxy:c}=ke();return se(()=>c.$q.lang.rtl,a),Rt(()=>{r=c.$el.parentNode,s()}),ot(()=>{o!==null&&o(),l()}),Object.assign(c,{trigger:u,getPosition:()=>i}),ni}});le({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=$(null),o=$(n.screen.height),a=$(t.container===!0?0:n.screen.width),s=$({position:0,direction:"down",inflectionPoint:0}),l=$(0),u=$(hn.value===!0?0:eh()),c=w(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),h=w(()=>t.container===!1?{minHeight:n.screen.height+"px"}:null),d=w(()=>u.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),p=w(()=>u.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function f(v){if(t.container===!0||document.qScrollPrevented!==!0){const S={position:v.position.top,direction:v.direction,directionChanged:v.directionChanged,inflectionPoint:v.inflectionPoint.top,delta:v.delta.top};s.value=S,t.onScroll!==void 0&&i("scroll",S)}}function g(v){const{height:S,width:C}=v;let k=!1;o.value!==S&&(k=!0,o.value=S,t.onScrollHeight!==void 0&&i("scrollHeight",S),_()),a.value!==C&&(k=!0,a.value=C),k===!0&&t.onResize!==void 0&&i("resize",v)}function y({height:v}){l.value!==v&&(l.value=v,_())}function _(){if(t.container===!0){const v=o.value>l.value?eh():0;u.value!==v&&(u.value=v)}}let b=null;const m={instances:{},view:w(()=>t.view),isContainer:w(()=>t.container),rootRef:r,height:o,containerHeight:l,scrollbarWidth:u,totalWidth:w(()=>a.value+u.value),rows:w(()=>{const v=t.view.toLowerCase().split(" ");return{top:v[0].split(""),middle:v[1].split(""),bottom:v[2].split("")}}),header:Ro({size:0,offset:0,space:!1}),right:Ro({size:300,offset:0,space:!1}),footer:Ro({size:0,offset:0,space:!1}),left:Ro({size:300,offset:0,space:!1}),scroll:s,animate(){b!==null?clearTimeout(b):document.body.classList.add("q-body--layout-animate"),b=setTimeout(()=>{b=null,document.body.classList.remove("q-body--layout-animate")},155)},update(v,S,C){m[v][S]=C}};if(uo(ua,m),eh()>0){let v=function(){k=null,L.classList.remove("hide-scrollbar")},S=function(){if(k===null){if(L.scrollHeight>n.screen.height)return;L.classList.add("hide-scrollbar")}else clearTimeout(k);k=setTimeout(v,300)},C=function(A){k!==null&&A==="remove"&&(clearTimeout(k),v()),window[`${A}EventListener`]("resize",S)},k=null;const L=document.body;se(()=>t.container!==!0?"add":"remove",C),t.container!==!0&&C("add"),Fb(()=>{C("remove")})}return()=>{const v=Xt(e.default,[x(ES,{onScroll:f}),x(ca,{onResize:g})]),S=x("div",{class:c.value,style:h.value,ref:t.container===!0?void 0:r,tabindex:-1},v);return t.container===!0?x("div",{class:"q-layout-container overflow-hidden",ref:r},[x(ca,{onResize:y}),x("div",{class:"absolute-full",style:d.value},[x("div",{class:"scroll",style:p.value},[S])])]):S}}});var wL=["horizontal","vertical","cell","none"],SL=le({name:"QMarkupTable",props:{...dt,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:t=>wL.includes(t)}},setup(t,{slots:e}){const i=ke(),n=pt(t,i.proxy.$q),r=w(()=>`q-markup-table q-table__container q-table__card q-table--${t.separator}-separator`+(n.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(t.dense===!0?" q-table--dense":"")+(t.flat===!0?" q-table--flat":"")+(t.bordered===!0?" q-table--bordered":"")+(t.square===!0?" q-table--square":"")+(t.wrapCells===!1?" q-table--no-wrap":""));return()=>x("div",{class:r.value},[x("table",{class:"q-table"},ze(e.default))])}});le({name:"QNoSsr",props:{tag:{type:String,default:"div"},placeholder:String},setup(t,{slots:e}){const{isHydrated:i}=K2();return()=>{if(i.value===!0){const o=ze(e.default);return o===void 0?o:o.length>1?x(t.tag,{},o):o[0]}const n={class:"q-no-ssr-placeholder"},r=ze(e.placeholder);return r!==void 0?r.length>1?x(t.tag,n,r):r[0]:t.placeholder!==void 0?x(t.tag,n,t.placeholder):void 0}}});var CL=le({name:"QRadio",props:{...dt,...Tr,...mn,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),r=pt(t,n.$q),o=Er(t,B2),a=$(null),{refocusTargetEl:s,refocusTarget:l}=j2(t,a),u=w(()=>ur(t.modelValue)===ur(t.val)),c=w(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(r.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),h=w(()=>{const m=t.color===void 0||t.keepColor!==!0&&u.value!==!0?"":` text-${t.color}`;return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${m}`}),d=w(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),p=w(()=>t.disable===!0?-1:t.tabindex||0),f=go(w(()=>{const m={type:"radio"};return t.name!==void 0&&Object.assign(m,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),m}));function g(m){m!==void 0&&(Ke(m),l(m)),t.disable!==!0&&u.value!==!0&&i("update:modelValue",t.val,m)}function y(m){m.keyCode!==13&&m.keyCode!==32||Ke(m)}function _(m){m.keyCode!==13&&m.keyCode!==32||g(m)}Object.assign(n,{set:g});const b=x("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[x("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),x("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);return()=>{const m=d.value!==null?[x("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[x(gt,{class:"q-radio__icon",name:d.value})])]:[b];t.disable!==!0&&f(m,"unshift"," q-radio__native q-ma-none q-pa-none");const v=[x("div",{class:h.value,style:o.value,"aria-hidden":"true"},m)];s.value!==null&&v.push(s.value);const S=t.label!==void 0?Xt(e.default,[t.label]):ze(e.default);return S!==void 0&&v.push(x("div",{class:"q-radio__label q-anchor--skip"},S)),x("div",{ref:a,class:c.value,tabindex:p.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:g,onKeydown:y,onKeyup:_},v)}}}),ML=le({name:"QToggle",props:{...N2,icon:String,iconColor:String},emits:V2,setup:t=>$2("toggle",function(e,i){const n=w(()=>(e.value===!0?t.checkedIcon:i.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),r=w(()=>e.value===!0?t.iconColor:null);return()=>[x("div",{class:"q-toggle__track"}),x("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[x(gt,{name:n.value,color:r.value})]:void 0)]})}),LS={radio:CL,checkbox:Dl,toggle:ML},kL=Object.keys(LS);function Up(t,e){if(typeof t=="function")return t;const i=t!==void 0?t:e;return n=>n[i]}var TL=le({name:"QOptionGroup",props:{...dt,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(Si),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:t=>kL.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:i}){const{proxy:{$q:n}}=ke(),r=Array.isArray(t.modelValue);t.type;const o=pt(t,n),a=w(()=>LS[t.type]),s=w(()=>Up(t.optionValue,"value")),l=w(()=>Up(t.optionLabel,"label")),u=w(()=>Up(t.optionDisable,"disable")),c=w(()=>t.options.map(f=>({val:s.value(f),name:f.name===void 0?t.name:f.name,disable:t.disable||u.value(f),leftLabel:f.leftLabel===void 0?t.leftLabel:f.leftLabel,color:f.color===void 0?t.color:f.color,checkedIcon:f.checkedIcon,uncheckedIcon:f.uncheckedIcon,dark:f.dark===void 0?o.value:f.dark,size:f.size===void 0?t.size:f.size,dense:t.dense,keepColor:f.keepColor===void 0?t.keepColor:f.keepColor}))),h=w(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),d=w(()=>{const f={role:"group"};return t.type==="radio"&&(f.role="radiogroup",t.disable===!0&&(f["aria-disabled"]="true")),f});function p(f){e("update:modelValue",f)}return()=>x("div",{class:h.value,...d.value},t.options.map((f,g)=>{const y=i["label-"+g]!==void 0?()=>i["label-"+g](f):i.label!==void 0?()=>i.label(f):void 0;return x("div",[x(a.value,{label:y===void 0?l.value(f):null,modelValue:t.modelValue,"onUpdate:modelValue":p,...c.value[g]},y)])}))}});le({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=Ni(ua,wt);if(n===wt||Ni(P1,wt)===wt)return wt;const r=w(()=>{const a=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof t.styleFn=="function"){const s=n.isContainer.value===!0?n.containerHeight.value:i.screen.height;return t.styleFn(a,s)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-a+"px":i.screen.height===0?a!==0?`calc(100vh - ${a}px)`:"100vh":i.screen.height-a+"px"}}),o=w(()=>"q-page"+(t.padding===!0?" q-layout-padding":""));return()=>x("main",{class:o.value,style:r.value},ze(e.default))}}),le({name:"QPageContainer",setup(t,{slots:e}){const{proxy:{$q:i}}=ke(),n=Ni(ua,wt);if(n===wt)return wt;uo(P1,!0);const r=w(()=>{const o={};return n.header.space===!0&&(o.paddingTop=`${n.header.size}px`),n.right.space===!0&&(o["padding"+(i.lang.rtl===!0?"Left":"Right")]=`${n.right.size}px`),n.footer.space===!0&&(o.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(o["padding"+(i.lang.rtl===!0?"Right":"Left")]=`${n.left.size}px`),o});return()=>x("div",{class:"q-page-container",style:r.value},ze(e.default))}});var Xp={position:{type:String,default:"bottom-right",validator:t=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(t)},offset:{type:Array,validator:t=>t.length===2},expand:Boolean};function k_(){const{props:t,proxy:{$q:e}}=ke(),i=Ni(ua,wt);if(i===wt)return wt;const n=w(()=>{const c=t.position;return{top:c.indexOf("top")!==-1,right:c.indexOf("right")!==-1,bottom:c.indexOf("bottom")!==-1,left:c.indexOf("left")!==-1,vertical:c==="top"||c==="bottom",horizontal:c==="left"||c==="right"}}),r=w(()=>i.header.offset),o=w(()=>i.right.offset),a=w(()=>i.footer.offset),s=w(()=>i.left.offset),l=w(()=>{let c=0,h=0;const d=n.value,p=e.lang.rtl===!0?-1:1;d.top===!0&&r.value!==0?h=`${r.value}px`:d.bottom===!0&&a.value!==0&&(h=-a.value+"px"),d.left===!0&&s.value!==0?c=p*s.value+"px":d.right===!0&&o.value!==0&&(c=-p*o.value+"px");const f={transform:`translate(${c}, ${h})`};return t.offset&&(f.margin=`${t.offset[1]}px ${t.offset[0]}px`),d.vertical===!0?(s.value!==0&&(f[e.lang.rtl===!0?"right":"left"]=`${s.value}px`),o.value!==0&&(f[e.lang.rtl===!0?"left":"right"]=`${o.value}px`)):d.horizontal===!0&&(r.value!==0&&(f.top=`${r.value}px`),a.value!==0&&(f.bottom=`${a.value}px`)),f}),u=w(()=>`q-page-sticky row flex-center fixed-${t.position} q-page-sticky--${t.expand===!0?"expand":"shrink"}`);return{$layout:i,getStickyContent:function(c){const h=ze(c.default);return x("div",{class:u.value,style:l.value},t.expand===!0?h:[x("div",h)])}}}function Pc(t,e){return[!0,!1].includes(t)?t:e}function Yp(t){let e,i,n=!1;function r(){i=arguments,n!==!0&&(n=!0,e=window.requestAnimationFrame(()=>{t.apply(this,i),i=void 0,n=!1}))}return r.cancel=()=>{window.cancelAnimationFrame(e),n=!1},r}le({name:"QPageScroller",props:{...Xp,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{...Xp.offset,default:()=>[18,18]}},emits:["click"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),{$layout:r,getStickyContent:o}=k_(),a=$(null);let s;const l=w(()=>r.height.value-(r.isContainer.value===!0?r.containerHeight.value:n.screen.height));function u(){return t.reverse===!0?l.value-r.scroll.value.position>t.scrollOffset:r.scroll.value.position>t.scrollOffset}const c=$(u());function h(){const y=u();c.value!==y&&(c.value=y)}function d(){t.reverse===!0?s===void 0&&(s=se(l,h)):p()}function p(){s!==void 0&&(s(),s=void 0)}function f(y){cs(Jn(r.isContainer.value===!0?a.value:r.rootRef.value),t.reverse===!0?r.height.value:0,t.duration),i("click",y)}function g(){return c.value===!0?x("div",{ref:a,class:"q-page-scroller",onClick:f},o(e)):null}return se(r.scroll,h),se(()=>t.reverse,d),d(),ot(p),()=>x(si,{name:"q-transition--fade"},g)}}),le({name:"QPageSticky",props:Xp,setup(t,{slots:e}){const{getStickyContent:i}=k_();return()=>i(e)}}),le({name:"QPagination",props:{...dt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:t=>(typeof t=="string"?parseInt(t,10):t)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:t=>t===""||x2.includes(t)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(t,{emit:e}){const{proxy:i}=ke(),{$q:n}=i,r=pt(t,n),o=w(()=>parseInt(t.min,10)),a=w(()=>parseInt(t.max,10)),s=w(()=>parseInt(t.maxPages,10)),l=w(()=>f.value+" / "+a.value),u=w(()=>Pc(t.boundaryLinks,t.input)),c=w(()=>Pc(t.boundaryNumbers,!t.input)),h=w(()=>Pc(t.directionLinks,t.input)),d=w(()=>Pc(t.ellipses,!t.input)),p=$(null),f=w({get:()=>t.modelValue,set:T=>{if(T=parseInt(T,10),t.disable||isNaN(T))return;const R=Et(T,o.value,a.value);t.modelValue!==R&&e("update:modelValue",R)}});se(()=>`${o.value}|${a.value}`,()=>{f.value=t.modelValue});const g=w(()=>"q-pagination row no-wrap items-center"+(t.disable===!0?" disabled":"")),y=w(()=>t.gutter in Oh?`${Oh[t.gutter]}px`:t.gutter||null),_=w(()=>y.value!==null?`--q-pagination-gutter-parent:-${y.value};--q-pagination-gutter-child:${y.value}`:null),b=w(()=>{const T=[t.iconFirst||n.iconSet.pagination.first,t.iconPrev||n.iconSet.pagination.prev,t.iconNext||n.iconSet.pagination.next,t.iconLast||n.iconSet.pagination.last];return n.lang.rtl===!0?T.reverse():T}),m=w(()=>({"aria-disabled":t.disable===!0?"true":"false",role:"navigation"})),v=w(()=>Rv(t,"flat")),S=w(()=>({[v.value]:!0,round:t.round,rounded:t.rounded,padding:t.padding,color:t.color,textColor:t.textColor,size:t.size,ripple:t.ripple===null||t.ripple})),C=w(()=>{const T={[v.value]:!1};return t.activeDesign!==""&&(T[t.activeDesign]=!0),T}),k=w(()=>({...C.value,color:t.activeColor||t.color,textColor:t.activeTextColor||t.textColor})),L=w(()=>{let T=Math.max(s.value,1+(d.value?2:0)+(c.value?2:0));const R={pgFrom:o.value,pgTo:a.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(a.value).length)}em`}};return s.value&&T<a.value-o.value+1&&(T=1+2*Math.floor(T/2),R.pgFrom=Math.max(o.value,Math.min(a.value-T+1,t.modelValue-Math.floor(T/2))),R.pgTo=Math.min(a.value,R.pgFrom+T-1),c.value&&(R.boundaryStart=!0,R.pgFrom++),d.value&&R.pgFrom>o.value+(c.value?1:0)&&(R.ellipsesStart=!0,R.pgFrom++),c.value&&(R.boundaryEnd=!0,R.pgTo--),d.value&&R.pgTo<a.value-(c.value?1:0)&&(R.ellipsesEnd=!0,R.pgTo--)),R});function A(T){f.value=T}const q=w(()=>{function T(){f.value=p.value,p.value=null}return{"onUpdate:modelValue":R=>{p.value=R},onKeyup:R=>{dn(R,13)===!0&&T()},onBlur:T}});function P(T,R,M){const I={"aria-label":R,"aria-current":"false",...S.value,...T};return M===!0&&Object.assign(I,{"aria-current":"true",...k.value}),R!==void 0&&(t.toFn!==void 0?I.to=t.toFn(R):I.onClick=()=>{A(R)}),x(vt,I)}return Object.assign(i,{set:A,setByOffset:function(T){f.value=f.value+T}}),()=>{const T=[],R=[];let M;if(u.value===!0&&(T.push(P({key:"bls",disable:t.disable||t.modelValue<=o.value,icon:b.value[0]},o.value)),R.unshift(P({key:"ble",disable:t.disable||t.modelValue>=a.value,icon:b.value[3]},a.value))),h.value===!0&&(T.push(P({key:"bdp",disable:t.disable||t.modelValue<=o.value,icon:b.value[1]},t.modelValue-1)),R.unshift(P({key:"bdn",disable:t.disable||t.modelValue>=a.value,icon:b.value[2]},t.modelValue+1))),t.input!==!0){M=[];const{pgFrom:I,pgTo:E,marginalStyle:O}=L.value;if(L.value.boundaryStart===!0){const V=o.value===t.modelValue;T.push(P({key:"bns",style:O,disable:t.disable,label:o.value},o.value,V))}if(L.value.boundaryEnd===!0){const V=a.value===t.modelValue;R.unshift(P({key:"bne",style:O,disable:t.disable,label:a.value},a.value,V))}L.value.ellipsesStart===!0&&T.push(P({key:"bes",style:O,disable:t.disable,label:"",ripple:!1},I-1)),L.value.ellipsesEnd===!0&&R.unshift(P({key:"bee",style:O,disable:t.disable,label:"",ripple:!1},E+1));for(let V=I;V<=E;V++)M.push(P({key:`bpg${V}`,style:O,disable:t.disable,label:V},V,V===t.modelValue))}return x("div",{class:g.value,...m.value},[x("div",{class:"q-pagination__content row no-wrap items-center",style:_.value},[...T,t.input===!0?x(jl,{class:"inline",style:{width:l.value.length/1.5+"em"},type:"number",dense:!0,value:p.value,disable:t.disable,dark:r.value,borderless:!0,inputClass:t.inputClass,inputStyle:t.inputStyle,placeholder:l.value,min:o.value,max:a.value,...q.value}):x("div",{class:"q-pagination__middle row justify-center"},M),...R])])}}});var{passive:qc}=Pt;function Bl(t,e=new WeakMap){if(Object(t)!==t)return t;if(e.has(t))return e.get(t);const i=t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):t instanceof Set?new Set:t instanceof Map?new Map:typeof t.constructor!="function"?Object.create(null):t.prototype!==void 0&&typeof t.prototype.constructor=="function"?t:new t.constructor;if(typeof t.constructor=="function"&&typeof t.valueOf=="function"){const n=t.valueOf();if(Object(n)!==n){const r=new t.constructor(n);return e.set(t,r),r}}return e.set(t,i),t instanceof Set?t.forEach(n=>{i.add(Bl(n,e))}):t instanceof Map&&t.forEach((n,r)=>{i.set(r,Bl(n,e))}),Object.assign(i,...Object.keys(t).map(n=>({[n]:Bl(t[n],e)})))}le({name:"QParallax",props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:t=>t>=0&&t<=1},scrollTarget:ya,onScroll:Function},setup(t,{slots:e,emit:i}){const n=$(0),r=$(null),o=$(null),a=$(null);let s,l,u,c,h,d;se(()=>t.height,()=>{s===!0&&f()}),se(()=>t.scrollTarget,()=>{s===!0&&(b(),_())});let p=m=>{n.value=m,t.onScroll!==void 0&&i("scroll",m)};function f(){let m,v,S;d===window?(m=0,S=v=window.innerHeight):(m=Ah(d).top,v=Ls(d),S=m+v);const C=Ah(r.value).top,k=C+t.height;if(h!==void 0||k>m&&C<S){const L=(S-C)/(t.height+v);g((u-t.height)*L*t.speed),p(L)}}let g=m=>{l.style.transform=`translate3d(-50%,${Math.round(m)}px,0)`};function y(){u=l.naturalHeight||l.videoHeight||Ls(l),s===!0&&f()}function _(){s=!0,d=Jn(r.value,t.scrollTarget),d.addEventListener("scroll",f,qc),window.addEventListener("resize",c,qc),f()}function b(){s===!0&&(s=!1,d.removeEventListener("scroll",f,qc),window.removeEventListener("resize",c,qc),d=void 0,g.cancel(),p.cancel(),c.cancel())}return Rt(()=>{g=Yp(g),p=Yp(p),c=Yp(y),l=e.media!==void 0?o.value.children[0]:a.value,l.onload=l.onloadstart=l.loadedmetadata=y,y(),l.style.display="initial",window.IntersectionObserver!==void 0?(h=new IntersectionObserver(m=>{(m[0].isIntersecting===!0?_:b)()}),h.observe(r.value)):_()}),ot(()=>{b(),h!==void 0&&h.disconnect(),l.onload=l.onloadstart=l.loadedmetadata=null}),()=>x("div",{ref:r,class:"q-parallax",style:{height:`${t.height}px`}},[x("div",{ref:o,class:"q-parallax__media absolute-full"},e.media!==void 0?e.media():[x("img",{ref:a,src:t.src})]),x("div",{class:"q-parallax__content absolute-full column flex-center"},e.content!==void 0?e.content({percentScrolled:n.value}):ze(e.default))])}}),le({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=$(null),a=$(""),s=$("");let l=!1;const u=w(()=>li({initialValue:a.value,validate:t.validate,set:c,cancel:h,updatePosition:d},"value",()=>s.value,v=>{s.value=v}));function c(){t.validate(s.value)!==!1&&(p()===!0&&(i("save",s.value,a.value),i("update:modelValue",s.value)),f())}function h(){p()===!0&&i("cancel",s.value,a.value),f()}function d(){lt(()=>{o.value.updatePosition()})}function p(){return Cn(s.value,a.value)===!1}function f(){l=!0,o.value.hide()}function g(){l=!1,a.value=Bl(t.modelValue),s.value=Bl(t.modelValue),i("beforeShow")}function y(){i("show")}function _(){l===!1&&p()===!0&&(t.autoSave===!0&&t.validate(s.value)===!0?(i("save",s.value,a.value),i("update:modelValue",s.value)):i("cancel",s.value,a.value)),i("beforeHide")}function b(){i("hide")}function m(){const v=e.default!==void 0?[].concat(e.default(u.value)):[];return t.title&&v.unshift(x("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},t.title)),t.buttons===!0&&v.push(x("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[x(vt,{flat:!0,color:t.color,label:t.labelCancel||r.lang.label.cancel,onClick:h}),x(vt,{flat:!0,color:t.color,label:t.labelSet||r.lang.label.set,onClick:c})])),v}return Object.assign(n,{set:c,cancel:h,show(v){o.value!==null&&o.value.show(v)},hide(v){o.value!==null&&o.value.hide(v)},updatePosition:d}),()=>{if(t.disable!==!0)return x(Au,{ref:o,class:"q-popup-edit",cover:t.cover,onBeforeShow:g,onShow:y,onBeforeHide:_,onHide:b,onEscapeKey:h},m)}}});var EL=le({name:"QPopupProxy",props:{...M2,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:e,emit:i,attrs:n}){const{proxy:r}=ke(),{$q:o}=r,a=$(!1),s=$(null),l=w(()=>parseInt(t.breakpoint,10)),{canShow:u}=Av({showing:a});function c(){return o.screen.width<l.value||o.screen.height<l.value?"dialog":"menu"}const h=$(c()),d=w(()=>h.value==="menu"?{maxHeight:"99vh"}:{});function p(g){a.value=!0,i("show",g)}function f(g){a.value=!1,h.value=c(),i("hide",g)}return se(()=>c(),g=>{a.value!==!0&&(h.value=g)}),Object.assign(r,{show(g){u(g)===!0&&s.value.show(g)},hide(g){s.value.hide(g)},toggle(g){s.value.toggle(g)}}),li(r,"currentComponent",()=>({type:h.value,ref:s.value})),()=>{const g={ref:s,...d.value,...n,onShow:p,onHide:f};let y;return h.value==="dialog"?y=_d:(y=Au,Object.assign(g,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),x(y,g,e.default)}}}),LL={xs:2,sm:4,md:6,lg:10,xl:14};function T_(t,e,i){return{transform:e===!0?`translateX(${i.lang.rtl===!0?"-":""}100%) scale3d(${-t},1,1)`:`scale3d(${t},1,1)`}}var IL=le({name:"QLinearProgress",props:{...dt,...Tr,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(t,{slots:e}){const{proxy:i}=ke(),n=pt(t,i.$q),r=Er(t,LL),o=w(()=>t.indeterminate===!0||t.query===!0),a=w(()=>t.reverse!==t.query),s=w(()=>({...r.value!==null?r.value:{},"--q-linear-progress-speed":`${t.animationSpeed}ms`})),l=w(()=>"q-linear-progress"+(t.color!==void 0?` text-${t.color}`:"")+(t.reverse===!0||t.query===!0?" q-linear-progress--reverse":"")+(t.rounded===!0?" rounded-borders":"")),u=w(()=>T_(t.buffer!==void 0?t.buffer:1,a.value,i.$q)),c=w(()=>`with${t.instantFeedback===!0?"out":""}-transition`),h=w(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${c.value} q-linear-progress__track--${n.value===!0?"dark":"light"}`+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),d=w(()=>T_(o.value===!0?1:t.value,a.value,i.$q)),p=w(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${c.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),f=w(()=>({width:100*t.value+"%"})),g=w(()=>`q-linear-progress__stripe absolute-${t.reverse===!0?"right":"left"} q-linear-progress__stripe--${c.value}`);return()=>{const y=[x("div",{class:h.value,style:u.value}),x("div",{class:p.value,style:d.value})];return t.stripe===!0&&o.value===!1&&y.push(x("div",{class:g.value,style:f.value})),x("div",{class:l.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.indeterminate===!0?void 0:t.value},Xt(e.default,y))}}}),PL=40;le({name:"QPullToRefresh",props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:ya},emits:["refresh"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=$("pull"),a=$(0),s=$(!1),l=$(-40),u=$(!1),c=$({}),h=w(()=>({opacity:a.value,transform:`translateY(${l.value}px) rotate(${360*a.value}deg)`})),d=w(()=>"q-pull-to-refresh__puller row flex-center"+(u.value===!0?" q-pull-to-refresh__puller--animating":"")+(t.bgColor!==void 0?` bg-${t.bgColor}`:""));function p(C){if(C.isFinal===!0)return void(s.value===!0&&(s.value=!1,o.value==="pulled"?(o.value="refreshing",v({pos:20}),y()):o.value==="pull"&&v({pos:-40,ratio:0})));if(u.value===!0||o.value==="refreshing")return!1;if(C.isFirst===!0){if(io(b)!==0||C.direction!=="down")return s.value===!0&&(s.value=!1,o.value="pull",v({pos:-40,ratio:0})),!1;s.value=!0;const{top:A,left:q}=_.getBoundingClientRect();c.value={top:A+"px",left:q+"px",width:window.getComputedStyle(_).getPropertyValue("width")}}ui(C.evt);const k=Math.min(140,Math.max(0,C.distance.y));l.value=k-PL,a.value=Et(k/60,0,1);const L=l.value>20?"pulled":"pull";o.value!==L&&(o.value=L)}const f=w(()=>{const C={down:!0};return t.noMouse!==!0&&(C.mouse=!0),[[cn,p,void 0,C]]}),g=w(()=>"q-pull-to-refresh__content"+(s.value===!0?" no-pointer-events":""));function y(){i("refresh",()=>{v({pos:-40,ratio:0},()=>{o.value="pull"})})}let _,b,m=null;function v({pos:C,ratio:k},L){u.value=!0,l.value=C,k!==void 0&&(a.value=k),m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,u.value=!1,L&&L()},300)}function S(){b=Jn(_,t.scrollTarget)}return se(()=>t.scrollTarget,S),Rt(()=>{_=n.$el,S()}),ot(()=>{m!==null&&clearTimeout(m)}),Object.assign(n,{trigger:y,updateScrollTarget:S}),()=>pn("div",{class:"q-pull-to-refresh"},[x("div",{class:g.value},ze(e.default)),x("div",{class:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:c.value},[x("div",{class:d.value,style:h.value},[o.value!=="refreshing"?x(gt,{name:t.icon||r.iconSet.pullToRefresh.icon,color:t.color,size:"32px"}):x(Fn,{size:"24px",color:t.color})])])],"main",t.disable===!1,()=>f.value)}});var Kp=0,E_=1,Zp=2;le({name:"QRange",props:{...U2,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:t=>"min"in t&&"max"in t},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:X2,setup(t,{emit:e}){const{proxy:{$q:i}}=ke(),{state:n,methods:r}=Y2({updateValue:L,updatePosition:function(q,P=n.dragging.value){let T;const R=r.getDraggingRatio(q,P),M=r.convertRatioToModel(R);switch(P.type){case Kp:R<=P.ratioMax?(T={minR:R,maxR:P.ratioMax,min:M,max:P.valueMax},n.focus.value="min"):(T={minR:P.ratioMax,maxR:R,min:P.valueMax,max:M},n.focus.value="max");break;case Zp:R>=P.ratioMin?(T={minR:P.ratioMin,maxR:R,min:P.valueMin,max:M},n.focus.value="max"):(T={minR:R,maxR:P.ratioMin,min:M,max:P.valueMin},n.focus.value="min");break;case E_:const I=R-P.offsetRatio,E=Et(P.ratioMin+I,n.innerMinRatio.value,n.innerMaxRatio.value-P.rangeRatio),O=M-P.offsetModel,V=Et(P.valueMin+O,n.innerMin.value,n.innerMax.value-P.rangeValue);T={minR:E,maxR:E+P.rangeRatio,min:n.roundValueFn.value(V),max:n.roundValueFn.value(V+P.rangeValue)},n.focus.value="both"}l.value=l.value.min===null||l.value.max===null?{min:T.min||t.min,max:T.max||t.max}:{min:T.min,max:T.max},t.snap!==!0||t.step===0?(a.value=T.minR,s.value=T.maxR):(a.value=r.convertModelToRatio(l.value.min),s.value=r.convertModelToRatio(l.value.max))},getDragging:function(q){const{left:P,top:T,width:R,height:M}=o.value.getBoundingClientRect(),I=t.dragOnlyRange===!0?0:t.vertical===!0?m.value.offsetHeight/(2*M):m.value.offsetWidth/(2*R),E={left:P,top:T,width:R,height:M,valueMin:l.value.min,valueMax:l.value.max,ratioMin:c.value,ratioMax:h.value},O=r.getDraggingRatio(q,E);return t.dragOnlyRange!==!0&&O<E.ratioMin+I?E.type=Kp:t.dragOnlyRange===!0||O<E.ratioMax-I?t.dragRange===!0||t.dragOnlyRange===!0?(E.type=E_,Object.assign(E,{offsetRatio:O,offsetModel:r.convertRatioToModel(O),rangeValue:E.valueMax-E.valueMin,rangeRatio:E.ratioMax-E.ratioMin})):E.type=E.ratioMax-O<O-E.ratioMin?Zp:Kp:E.type=Zp,E},formAttrs:w(()=>({type:"hidden",name:t.name,value:`${t.modelValue.min}|${t.modelValue.max}`}))}),o=$(null),a=$(0),s=$(0),l=$({min:0,max:0});function u(){l.value.min=t.modelValue.min===null?n.innerMin.value:Et(t.modelValue.min,n.innerMin.value,n.innerMax.value),l.value.max=t.modelValue.max===null?n.innerMax.value:Et(t.modelValue.max,n.innerMin.value,n.innerMax.value)}se(()=>`${t.modelValue.min}|${t.modelValue.max}|${n.innerMin.value}|${n.innerMax.value}`,u),u();const c=w(()=>r.convertModelToRatio(l.value.min)),h=w(()=>r.convertModelToRatio(l.value.max)),d=w(()=>n.active.value===!0?a.value:c.value),p=w(()=>n.active.value===!0?s.value:h.value),f=w(()=>{const q={[n.positionProp.value]:100*d.value+"%",[n.sizeProp.value]:100*(p.value-d.value)+"%"};return t.selectionImg!==void 0&&(q.backgroundImage=`url(${t.selectionImg}) !important`),q}),g=w(()=>{if(n.editable.value!==!0)return{};if(i.platform.is.mobile===!0)return{onClick:r.onMobileClick};const q={onMousedown:r.onActivate};return t.dragRange!==!0&&t.dragOnlyRange!==!0||Object.assign(q,{onFocus:()=>{n.focus.value="both"},onBlur:r.onBlur,onKeydown:A,onKeyup:r.onKeyup}),q});function y(q){return i.platform.is.mobile!==!0&&n.editable.value===!0&&t.dragOnlyRange!==!0?{onFocus:()=>{n.focus.value=q},onBlur:r.onBlur,onKeydown:A,onKeyup:r.onKeyup}:{}}const _=w(()=>t.dragOnlyRange!==!0?n.tabindex.value:null),b=w(()=>i.platform.is.mobile===!0||!t.dragRange&&t.dragOnlyRange!==!0?null:n.tabindex.value),m=$(null),v=w(()=>y("min")),S=r.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:m,key:"tmin",...v.value,tabindex:_.value}),ratio:d,label:w(()=>t.leftLabelValue!==void 0?t.leftLabelValue:l.value.min),thumbColor:w(()=>t.leftThumbColor||t.thumbColor||t.color),labelColor:w(()=>t.leftLabelColor||t.labelColor),labelTextColor:w(()=>t.leftLabelTextColor||t.labelTextColor)}),C=w(()=>y("max")),k=r.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...C.value,key:"tmax",tabindex:_.value}),ratio:p,label:w(()=>t.rightLabelValue!==void 0?t.rightLabelValue:l.value.max),thumbColor:w(()=>t.rightThumbColor||t.thumbColor||t.color),labelColor:w(()=>t.rightLabelColor||t.labelColor),labelTextColor:w(()=>t.rightLabelTextColor||t.labelTextColor)});function L(q){l.value.min===t.modelValue.min&&l.value.max===t.modelValue.max||e("update:modelValue",{...l.value}),q===!0&&e("change",{...l.value})}function A(q){if(!Yv.includes(q.keyCode))return;Ke(q);const P=([34,33].includes(q.keyCode)?10:1)*n.keyStep.value,T=([34,37,40].includes(q.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(t.vertical===!0?-1:1)*P;if(n.focus.value==="both"){const R=l.value.max-l.value.min,M=Et(n.roundValueFn.value(l.value.min+T),n.innerMin.value,n.innerMax.value-R);l.value={min:M,max:n.roundValueFn.value(M+R)}}else{if(n.focus.value===!1)return;{const R=n.focus.value;l.value={...l.value,[R]:Et(n.roundValueFn.value(l.value[R]+T),R==="min"?n.innerMin.value:l.value.min,R==="max"?n.innerMax.value:l.value.max)}}}L()}return()=>{const q=r.getContent(f,b,g,P=>{P.push(S(),k())});return x("div",{ref:o,class:"q-range "+n.classes.value+(t.modelValue.min===null||t.modelValue.max===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":t.modelValue.min+"|"+t.modelValue.max},q)}}}),le({name:"QRating",props:{...Tr,...mn,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=Er(t),o=go(Ou(t)),a=$(0);let s={};const l=w(()=>t.readonly!==!0&&t.disable!==!0),u=w(()=>`q-rating row inline items-center q-rating--${l.value===!0?"":"non-"}editable`+(t.noDimming===!0?" q-rating--no-dimming":"")+(t.disable===!0?" disabled":"")+(t.color!==void 0&&Array.isArray(t.color)===!1?` text-${t.color}`:"")),c=w(()=>{const _=Array.isArray(t.icon)===!0?t.icon.length:0,b=Array.isArray(t.iconSelected)===!0?t.iconSelected.length:0,m=Array.isArray(t.iconHalf)===!0?t.iconHalf.length:0,v=Array.isArray(t.color)===!0?t.color.length:0,S=Array.isArray(t.colorSelected)===!0?t.colorSelected.length:0,C=Array.isArray(t.colorHalf)===!0?t.colorHalf.length:0;return{iconLen:_,icon:_>0?t.icon[_-1]:t.icon,selIconLen:b,selIcon:b>0?t.iconSelected[b-1]:t.iconSelected,halfIconLen:m,halfIcon:m>0?t.iconHalf[b-1]:t.iconHalf,colorLen:v,color:v>0?t.color[v-1]:t.color,selColorLen:S,selColor:S>0?t.colorSelected[S-1]:t.colorSelected,halfColorLen:C,halfColor:C>0?t.colorHalf[C-1]:t.colorHalf}}),h=w(()=>{if(typeof t.iconAriaLabel=="string"){const _=t.iconAriaLabel.length!==0?`${t.iconAriaLabel} `:"";return b=>`${_}${b}`}if(Array.isArray(t.iconAriaLabel)===!0){const _=t.iconAriaLabel.length;if(_>0)return b=>t.iconAriaLabel[Math.min(b,_)-1]}return(_,b)=>`${b} ${_}`}),d=w(()=>{const _=[],b=c.value,m=Math.ceil(t.modelValue),v=l.value===!0?0:null,S=t.iconHalf===void 0||m===t.modelValue?-1:m;for(let C=1;C<=t.max;C++){const k=a.value===0&&t.modelValue>=C||a.value>0&&a.value>=C,L=S===C&&a.value<C,A=a.value>0&&(L===!0?m:t.modelValue)>=C&&a.value<C,q=L===!0?C<=b.halfColorLen?t.colorHalf[C-1]:b.halfColor:b.selColor!==void 0&&k===!0?C<=b.selColorLen?t.colorSelected[C-1]:b.selColor:C<=b.colorLen?t.color[C-1]:b.color,P=(L===!0?C<=b.halfIconLen?t.iconHalf[C-1]:b.halfIcon:b.selIcon===void 0||k!==!0&&A!==!0?C<=b.iconLen?t.icon[C-1]:b.icon:C<=b.selIconLen?t.iconSelected[C-1]:b.selIcon)||n.iconSet.rating.icon;_.push({name:(L===!0?C<=b.halfIconLen?t.iconHalf[C-1]:b.halfIcon:b.selIcon===void 0||k!==!0&&A!==!0?C<=b.iconLen?t.icon[C-1]:b.icon:C<=b.selIconLen?t.iconSelected[C-1]:b.selIcon)||n.iconSet.rating.icon,attrs:{tabindex:v,role:"radio","aria-checked":t.modelValue===C?"true":"false","aria-label":h.value(C,P)},iconClass:"q-rating__icon"+(k===!0||L===!0?" q-rating__icon--active":"")+(A===!0?" q-rating__icon--exselected":"")+(a.value===C?" q-rating__icon--hovered":"")+(q!==void 0?` text-${q}`:"")})}return _}),p=w(()=>{const _={role:"radiogroup"};return t.disable===!0&&(_["aria-disabled"]="true"),t.readonly===!0&&(_["aria-readonly"]="true"),_});function f(_){if(l.value===!0){const b=Et(parseInt(_,10),1,parseInt(t.max,10)),m=t.noReset!==!0&&t.modelValue===b?0:b;m!==t.modelValue&&i("update:modelValue",m),a.value=0}}function g(_){l.value===!0&&(a.value=_)}function y(){a.value=0}return _u(()=>{s={}}),()=>{const _=[];return d.value.forEach(({iconClass:b,name:m,attrs:v},S)=>{const C=S+1;_.push(x("div",{key:C,ref:k=>{s[`rt${C}`]=k},class:"q-rating__icon-container flex flex-center",...v,onClick(){f(C)},onMouseover(){g(C)},onMouseout:y,onFocus(){g(C)},onBlur:y,onKeyup(k){(function(L,A){switch(L.keyCode){case 13:case 32:return f(A),Ke(L);case 37:case 40:return s["rt"+(A-1)]&&s["rt"+(A-1)].focus(),Ke(L);case 39:case 38:s[`rt${A+1}`]&&s[`rt${A+1}`].focus(),Ke(L)}})(k,C)}},Xt(e[`tip-${C}`],[x(gt,{class:b,name:m})])))}),t.name!==void 0&&t.disable!==!0&&o(_,"push"),x("div",{class:u.value,style:r.value,...p.value},_)}}}),le({name:"QResponsive",props:Zv,setup(t,{slots:e}){const i=Qv(t);return()=>x("div",{class:"q-responsive"},[x("div",{class:"q-responsive__filler overflow-hidden"},[x("div",{style:i.value})]),x("div",{class:"q-responsive__content absolute-full fit"},ze(e.default))])}});var qL=le({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup:t=>()=>[x("div",{class:t.store.scroll.vertical.barClass.value,style:[t.barStyle,t.verticalBarStyle],"aria-hidden":"true",onMousedown:t.store.onVerticalMousedown}),x("div",{class:t.store.scroll.horizontal.barClass.value,style:[t.barStyle,t.horizontalBarStyle],"aria-hidden":"true",onMousedown:t.store.onHorizontalMousedown}),Vi(x("div",{ref:t.store.scroll.vertical.ref,class:t.store.scroll.vertical.thumbClass.value,style:t.store.scroll.vertical.style.value,"aria-hidden":"true"}),t.store.thumbVertDir),Vi(x("div",{ref:t.store.scroll.horizontal.ref,class:t.store.scroll.horizontal.thumbClass.value,style:t.store.scroll.horizontal.style.value,"aria-hidden":"true"}),t.store.thumbHorizDir)]}),L_=["vertical","horizontal"],Qp={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},I_={prevent:!0,mouse:!0,mouseAllDir:!0},P_=t=>t>=250?50:Math.ceil(t/5);le({name:"QScrollArea",props:{...dt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(t,{slots:e,emit:i}){const n=$(!1),r=$(!1),o=$(!1),a={vertical:$(0),horizontal:$(0)},s={vertical:{ref:$(null),position:$(0),size:$(0)},horizontal:{ref:$(null),position:$(0),size:$(0)}},{proxy:l}=ke(),u=pt(t,l.$q);let c,h=null;const d=$(null),p=w(()=>"q-scrollarea"+(u.value===!0?" q-scrollarea--dark":""));Object.assign(a,{verticalInner:w(()=>a.vertical.value-t.verticalOffset[0]-t.verticalOffset[1]),horizontalInner:w(()=>a.horizontal.value-t.horizontalOffset[0]-t.horizontalOffset[1])}),s.vertical.percentage=w(()=>{const M=s.vertical.size.value-a.vertical.value;if(M<=0)return 0;const I=Et(s.vertical.position.value/M,0,1);return Math.round(1e4*I)/1e4}),s.vertical.thumbHidden=w(()=>(t.visible===null?o.value:t.visible)!==!0&&n.value===!1&&r.value===!1||s.vertical.size.value<=a.vertical.value+1),s.vertical.thumbStart=w(()=>t.verticalOffset[0]+s.vertical.percentage.value*(a.verticalInner.value-s.vertical.thumbSize.value)),s.vertical.thumbSize=w(()=>Math.round(Et(a.verticalInner.value*a.verticalInner.value/s.vertical.size.value,P_(a.verticalInner.value),a.verticalInner.value))),s.vertical.style=w(()=>({...t.thumbStyle,...t.verticalThumbStyle,top:`${s.vertical.thumbStart.value}px`,height:`${s.vertical.thumbSize.value}px`,right:`${t.horizontalOffset[1]}px`})),s.vertical.thumbClass=w(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.vertical.barClass=w(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),s.horizontal.percentage=w(()=>{const M=s.horizontal.size.value-a.horizontal.value;if(M<=0)return 0;const I=Et(Math.abs(s.horizontal.position.value)/M,0,1);return Math.round(1e4*I)/1e4}),s.horizontal.thumbHidden=w(()=>(t.visible===null?o.value:t.visible)!==!0&&n.value===!1&&r.value===!1||s.horizontal.size.value<=a.horizontal.value+1),s.horizontal.thumbStart=w(()=>t.horizontalOffset[0]+s.horizontal.percentage.value*(a.horizontalInner.value-s.horizontal.thumbSize.value)),s.horizontal.thumbSize=w(()=>Math.round(Et(a.horizontalInner.value*a.horizontalInner.value/s.horizontal.size.value,P_(a.horizontalInner.value),a.horizontalInner.value))),s.horizontal.style=w(()=>({...t.thumbStyle,...t.horizontalThumbStyle,[l.$q.lang.rtl===!0?"right":"left"]:`${s.horizontal.thumbStart.value}px`,width:`${s.horizontal.thumbSize.value}px`,bottom:`${t.verticalOffset[1]}px`})),s.horizontal.thumbClass=w(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.horizontal.barClass=w(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const f=w(()=>s.vertical.thumbHidden.value===!0&&s.horizontal.thumbHidden.value===!0?t.contentStyle:t.contentActiveStyle);function g(){const M={};return L_.forEach(I=>{const E=s[I];Object.assign(M,{[I+"Position"]:E.position.value,[I+"Percentage"]:E.percentage.value,[I+"Size"]:E.size.value,[I+"ContainerSize"]:a[I].value,[I+"ContainerInnerSize"]:a[I+"Inner"].value})}),M}const y=Ns(()=>{const M=g();M.ref=l,i("scroll",M)},0);function _(M,I,E){L_.includes(M)!==!1&&(M==="vertical"?cs:Ip)(d.value,I,E)}function b({height:M,width:I}){let E=!1;a.vertical.value!==M&&(a.vertical.value=M,E=!0),a.horizontal.value!==I&&(a.horizontal.value=I,E=!0),E===!0&&k()}function m({position:M}){let I=!1;s.vertical.position.value!==M.top&&(s.vertical.position.value=M.top,I=!0),s.horizontal.position.value!==M.left&&(s.horizontal.position.value=M.left,I=!0),I===!0&&k()}function v({height:M,width:I}){s.horizontal.size.value!==I&&(s.horizontal.size.value=I,k()),s.vertical.size.value!==M&&(s.vertical.size.value=M,k())}function S(M,I){const E=s[I];if(M.isFirst===!0){if(E.thumbHidden.value===!0)return;c=E.position.value,r.value=!0}else if(r.value!==!0)return;M.isFinal===!0&&(r.value=!1);const O=Qp[I],V=(E.size.value-a[I].value)/(a[I+"Inner"].value-E.thumbSize.value),B=M.distance[O.dist];L(c+(M.direction===O.dir?1:-1)*B*V,I)}function C(M,I){const E=s[I];if(E.thumbHidden.value!==!0){const O=I==="vertical"?t.verticalOffset[0]:t.horizontalOffset[0],V=M[Qp[I].offset]-O,B=E.thumbStart.value-O;(V<B||V>B+E.thumbSize.value)&&L(Et((V-E.thumbSize.value/2)/(a[I+"Inner"].value-E.thumbSize.value),0,1)*Math.max(0,E.size.value-a[I].value),I),E.ref.value!==null&&E.ref.value.dispatchEvent(new MouseEvent(M.type,M))}}function k(){n.value=!0,h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,n.value=!1},t.delay),t.onScroll!==void 0&&y()}function L(M,I){d.value[Qp[I].scroll]=M}let A=null;function q(){A!==null&&clearTimeout(A),A=setTimeout(()=>{A=null,o.value=!0},l.$q.platform.is.ios?50:0)}function P(){A!==null&&(clearTimeout(A),A=null),o.value=!1}let T=null;se(()=>l.$q.lang.rtl,M=>{d.value!==null&&Ip(d.value,Math.abs(s.horizontal.position.value)*(M===!0?-1:1))}),Mr(()=>{T={top:s.vertical.position.value,left:s.horizontal.position.value}}),da(()=>{if(T===null)return;const M=d.value;M!==null&&(Ip(M,T.left),cs(M,T.top))}),ot(y.cancel),Object.assign(l,{getScrollTarget:()=>d.value,getScroll:g,getScrollPosition:()=>({top:s.vertical.position.value,left:s.horizontal.position.value}),getScrollPercentage:()=>({top:s.vertical.percentage.value,left:s.horizontal.percentage.value}),setScrollPosition:_,setScrollPercentage(M,I,E){_(M,I*(s[M].size.value-a[M].value)*(M==="horizontal"&&l.$q.lang.rtl===!0?-1:1),E)}});const R={scroll:s,thumbVertDir:[[cn,M=>{S(M,"vertical")},void 0,{vertical:!0,...I_}]],thumbHorizDir:[[cn,M=>{S(M,"horizontal")},void 0,{horizontal:!0,...I_}]],onVerticalMousedown(M){C(M,"vertical")},onHorizontalMousedown(M){C(M,"horizontal")}};return()=>x("div",{class:p.value,onMouseenter:q,onMouseleave:P},[x("div",{ref:d,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:t.tabindex!==void 0?t.tabindex:void 0},[x("div",{class:"q-scrollarea__content absolute",style:f.value},Xt(e.default,[x(ca,{debounce:0,onResize:v})])),x(ES,{axis:"both",onScroll:m})]),x(ca,{debounce:0,onResize:b}),x(qL,{store:R,barStyle:t.barStyle,verticalBarStyle:t.verticalBarStyle,horizontalBarStyle:t.horizontalBarStyle})])}});var xn=1e3,RL=["start","center","end","start-force","center-force","end-force"],IS=Array.prototype.filter,FL=window.getComputedStyle(document.body).overflowAnchor===void 0?ni:function(t,e){t!==null&&(t._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(t._qOverflowAnimationFrame),t._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(t===null)return;t._qOverflowAnimationFrame=void 0;const i=t.children||[];IS.call(i,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const n=i[e];n&&n.dataset&&(n.dataset.qVsAnchor="")}))};function hs(t,e){return t+e}function Jp(t,e,i,n,r,o,a,s){const l=t===window?document.scrollingElement||document.documentElement:t,u=r===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-a-s,scrollMaxSize:0,offsetStart:-a,offsetEnd:-s};if(r===!0?(t===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=l.scrollLeft,c.scrollViewSize+=l.clientWidth),c.scrollMaxSize=l.scrollWidth,o===!0&&(c.scrollStart=(gu===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(t===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=l.scrollTop,c.scrollViewSize+=l.clientHeight),c.scrollMaxSize=l.scrollHeight),i!==null)for(let h=i.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=h[u]);if(n!==null)for(let h=n.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=h[u]);if(e!==t){const h=l.getBoundingClientRect(),d=e.getBoundingClientRect();r===!0?(c.offsetStart+=d.left-h.left,c.offsetEnd-=d.width):(c.offsetStart+=d.top-h.top,c.offsetEnd-=d.height),t!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function q_(t,e,i,n){e==="end"&&(e=(t===window?document.body:t)[i===!0?"scrollWidth":"scrollHeight"]),t===window?i===!0?(n===!0&&(e=(gu===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):i===!0?(n===!0&&(e=(gu===!0?t.scrollWidth-t.offsetWidth:0)-e),t.scrollLeft=e):t.scrollTop=e}function fl(t,e,i,n){if(i>=n)return 0;const r=e.length,o=Math.floor(i/xn),a=Math.floor((n-1)/xn)+1;let s=t.slice(o,a).reduce(hs,0);return i%xn!=0&&(s-=e.slice(o*xn,i).reduce(hs,0)),n%xn!=0&&n!==r&&(s-=e.slice(n,a*xn).reduce(hs,0)),s}var PS={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},R_=Object.keys(PS),fm={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...PS};function qS({virtualScrollLength:t,getVirtualScrollTarget:e,getVirtualScrollEl:i,virtualScrollItemSizeComputed:n}){const r=ke(),{props:o,emit:a,proxy:s}=r,{$q:l}=s;let u,c,h,d,p=[];const f=$(0),g=$(0),y=$({}),_=$(null),b=$(null),m=$(null),v=$({from:0,to:0}),S=w(()=>o.tableColspan!==void 0?o.tableColspan:100);n===void 0&&(n=w(()=>o.virtualScrollItemSize));const C=w(()=>n.value+";"+o.virtualScrollHorizontal),k=w(()=>C.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);function L(){M(c,!0)}function A(B){M(B===void 0?c:B)}function q(B,F){const H=e();if(H==null||H.nodeType===8)return;const ee=Jp(H,i(),_.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);h!==ee.scrollViewSize&&I(ee.scrollViewSize),P(H,ee,Math.min(t.value-1,Math.max(0,parseInt(B,10)||0)),0,RL.indexOf(F)!==-1?F:c!==-1&&B>c?"end":"start")}function P(B,F,H,ee,ne){const te=typeof ne=="string"&&ne.indexOf("-force")!==-1,N=te===!0?ne.replace("-force",""):ne,z=N!==void 0?N:"start";let j=Math.max(0,H-y.value[z]),Z=j+y.value.total;Z>t.value&&(Z=t.value,j=Math.max(0,Z-y.value.total)),u=F.scrollStart;const W=j!==v.value.from||Z!==v.value.to;if(W===!1&&N===void 0)return void E(H);const{activeElement:U}=document,ye=m.value;W===!0&&ye!==null&&ye!==U&&ye.contains(U)===!0&&(ye.addEventListener("focusout",R),setTimeout(()=>{ye!==null&&ye.removeEventListener("focusout",R)})),FL(ye,H-j);const ue=N!==void 0?d.slice(j,H).reduce(hs,0):0;if(W===!0){const he=Z>=v.value.from&&j<=v.value.to?v.value.to:Z;v.value={from:j,to:he},f.value=fl(p,d,0,j),g.value=fl(p,d,Z,t.value),requestAnimationFrame(()=>{v.value.to!==Z&&u===F.scrollStart&&(v.value={from:v.value.from,to:Z},g.value=fl(p,d,Z,t.value))})}requestAnimationFrame(()=>{if(u!==F.scrollStart)return;W===!0&&T(j);const he=d.slice(j,H).reduce(hs,0),fe=he+F.offsetStart+f.value,Ce=fe+d[H];let Ie=fe+ee;if(N!==void 0){const me=he-ue,we=F.scrollStart+me;Ie=te!==!0&&we<fe&&Ce<we+F.scrollViewSize?we:N==="end"?Ce-F.scrollViewSize:fe-(N==="start"?0:Math.round((F.scrollViewSize-d[H])/2))}u=Ie,q_(B,Ie,o.virtualScrollHorizontal,l.lang.rtl),E(H)})}function T(B){const F=m.value;if(F){const H=IS.call(F.children,j=>j.classList&&j.classList.contains("q-virtual-scroll--skip")===!1),ee=H.length,ne=o.virtualScrollHorizontal===!0?j=>j.getBoundingClientRect().width:j=>j.offsetHeight;let te,N,z=B;for(let j=0;j<ee;){for(te=ne(H[j]),j++;j<ee&&H[j].classList.contains("q-virtual-scroll--with-prev")===!0;)te+=ne(H[j]),j++;N=te-d[z],N!==0&&(d[z]+=N,p[Math.floor(z/xn)]+=N),z++}}}function R(){m.value!==null&&m.value!==void 0&&m.value.focus()}function M(B,F){const H=1*n.value;F!==!0&&Array.isArray(d)!==!1||(d=[]);const ee=d.length;d.length=t.value;for(let te=t.value-1;te>=ee;te--)d[te]=H;const ne=Math.floor((t.value-1)/xn);p=[];for(let te=0;te<=ne;te++){let N=0;const z=Math.min((te+1)*xn,t.value);for(let j=te*xn;j<z;j++)N+=d[j];p.push(N)}c=-1,u=void 0,f.value=fl(p,d,0,v.value.from),g.value=fl(p,d,v.value.to,t.value),B>=0?(T(v.value.from),lt(()=>{q(B)})):O()}function I(B){if(B===void 0&&typeof window<"u"){const te=e();te!=null&&te.nodeType!==8&&(B=Jp(te,i(),_.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}h=B;const F=parseFloat(o.virtualScrollSliceRatioBefore)||0,H=1+F+(parseFloat(o.virtualScrollSliceRatioAfter)||0),ee=B===void 0||B<=0?1:Math.ceil(B/n.value),ne=Math.max(1,ee,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/H));y.value={total:Math.ceil(ne*H),start:Math.ceil(ne*F),center:Math.ceil(ne*(.5+F)),end:Math.ceil(ne*(1+F)),view:ee}}function E(B){c!==B&&(o.onVirtualScroll!==void 0&&a("virtualScroll",{index:B,from:v.value.from,to:v.value.to-1,direction:B<c?"decrease":"increase",ref:s}),c=B)}se(k,()=>{I()}),se(C,L),I();const O=Ns(function(){const B=e();if(B==null||B.nodeType===8)return;const F=Jp(B,i(),_.value,b.value,o.virtualScrollHorizontal,l.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),H=t.value-1,ee=F.scrollMaxSize-F.offsetStart-F.offsetEnd-g.value;if(u===F.scrollStart)return;if(F.scrollMaxSize<=0)return void P(B,F,0,0);h!==F.scrollViewSize&&I(F.scrollViewSize),T(v.value.from);const ne=Math.floor(F.scrollMaxSize-Math.max(F.scrollViewSize,F.offsetEnd)-Math.min(d[H],F.scrollViewSize/2));if(ne>0&&Math.ceil(F.scrollStart)>=ne)return void P(B,F,H,F.scrollMaxSize-F.offsetEnd-p.reduce(hs,0));let te=0,N=F.scrollStart-F.offsetStart,z=N;if(N<=ee&&N+F.scrollViewSize>=f.value)N-=f.value,te=v.value.from,z=N;else for(let j=0;N>=p[j]&&te<H;j++)N-=p[j],te+=xn;for(;N>0&&te<H;)N-=d[te],N>-F.scrollViewSize?(te++,z=N):z=d[te]+N;P(B,F,te,z)},l.platform.is.ios===!0?120:35);Im(()=>{I()});let V=!1;return Mr(()=>{V=!0}),da(()=>{if(V!==!0)return;const B=e();u!==void 0&&B!=null&&B.nodeType!==8?q_(B,u,o.virtualScrollHorizontal,l.lang.rtl):q(c)}),ot(()=>{O.cancel()}),Object.assign(s,{scrollTo:q,reset:L,refresh:A}),{virtualScrollSliceRange:v,virtualScrollSliceSizeComputed:y,setVirtualScrollSize:I,onVirtualScrollEvt:O,localResetVirtualScroll:M,padVirtualScroll:function(B,F){const H=o.virtualScrollHorizontal===!0?"width":"height",ee={["--q-virtual-scroll-item-"+H]:n.value+"px"};return[B==="tbody"?x(B,{class:"q-virtual-scroll__padding",key:"before",ref:_},[x("tr",[x("td",{style:{[H]:`${f.value}px`,...ee},colspan:S.value})])]):x(B,{class:"q-virtual-scroll__padding",key:"before",ref:_,style:{[H]:`${f.value}px`,...ee}}),x(B,{class:"q-virtual-scroll__content",key:"content",ref:m,tabindex:-1},F.flat()),B==="tbody"?x(B,{class:"q-virtual-scroll__padding",key:"after",ref:b},[x("tr",[x("td",{style:{[H]:`${g.value}px`,...ee},colspan:S.value})])]):x(B,{class:"q-virtual-scroll__padding",key:"after",ref:b,style:{[H]:`${g.value}px`,...ee}})]},scrollTo:q,reset:L,refresh:A}}var F_=t=>["add","add-unique","toggle"].includes(t),AL=Object.keys(bd);function ef(t,e){if(typeof t=="function")return t;const i=t!==void 0?t:e;return n=>n!==null&&typeof n=="object"&&i in n?n[i]:n}var OL=le({name:"QSelect",inheritAttrs:!1,props:{...fm,...mn,...bd,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:F_},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:t=>["default","menu","dialog"].includes(t),default:"default"},virtualScrollItemSize:fm.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...xd,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=$(!1),a=$(!1),s=$(-1),l=$(""),u=$(!1),c=$(!1);let h,d,p,f,g,y,_,b=null,m=null,v=null;const S=$(null),C=$(null),k=$(null),L=$(null),A=$(null),q=jv(t),P=MS(xe),T=w(()=>Array.isArray(t.options)?t.options.length:0),R=w(()=>t.virtualScrollItemSize===void 0?t.optionsDense===!0?24:48:t.virtualScrollItemSize),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:I,localResetVirtualScroll:E,padVirtualScroll:O,onVirtualScrollEvt:V,scrollTo:B,setVirtualScrollSize:F}=qS({virtualScrollLength:T,getVirtualScrollTarget:function(){return _e()},getVirtualScrollEl:_e,virtualScrollItemSizeComputed:R}),H=wd(),ee=w(()=>{const Y=t.mapOptions===!0&&t.multiple!==!0,$e=t.modelValue===void 0||t.modelValue===null&&Y!==!0?[]:t.multiple===!0&&Array.isArray(t.modelValue)?t.modelValue:[t.modelValue];if(t.mapOptions===!0&&Array.isArray(t.options)===!0){const je=t.mapOptions===!0&&h!==void 0?h:[],kt=$e.map(ut=>function(ct,Qt){const Tt=Xs=>Cn(oe.value(Xs),ct);return t.options.find(Tt)||Qt.find(Tt)||ct}(ut,je));return t.modelValue===null&&Y===!0?kt.filter(ut=>ut!==null):kt}return $e}),ne=w(()=>{const Y={};return AL.forEach($e=>{const je=t[$e];je!==void 0&&(Y[$e]=je)}),Y}),te=w(()=>t.optionsDark===null?H.isDark.value:t.optionsDark),N=w(()=>ha(ee.value)),z=w(()=>{let Y="q-field__input q-placeholder col";return t.hideSelected===!0||ee.value.length===0?[Y,t.inputClass]:(Y+=" q-field__input--padding",t.inputClass===void 0?Y:[Y,t.inputClass])}),j=w(()=>(t.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(t.popupContentClass?" "+t.popupContentClass:"")),Z=w(()=>T.value===0),W=w(()=>ee.value.map(Y=>ce.value(Y)).join(", ")),U=w(()=>t.displayValue!==void 0?t.displayValue:W.value),ye=w(()=>t.optionsHtml===!0?()=>!0:Y=>Y!=null&&Y.html===!0),ue=w(()=>t.displayValueHtml===!0||t.displayValue===void 0&&(t.optionsHtml===!0||ee.value.some(ye.value))),he=w(()=>H.focused.value===!0?t.tabindex:-1),fe=w(()=>{const Y={tabindex:t.tabindex,role:"combobox","aria-label":t.label,"aria-readonly":t.readonly===!0?"true":"false","aria-autocomplete":t.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${H.targetUid.value}_lb`};return s.value>=0&&(Y["aria-activedescendant"]=`${H.targetUid.value}_${s.value}`),Y}),Ce=w(()=>({id:`${H.targetUid.value}_lb`,role:"listbox","aria-multiselectable":t.multiple===!0?"true":"false"})),Ie=w(()=>ee.value.map((Y,$e)=>({index:$e,opt:Y,html:ye.value(Y),selected:!0,removeAtIndex:K,toggleOption:pe,tabindex:he.value}))),me=w(()=>{if(T.value===0)return[];const{from:Y,to:$e}=M.value;return t.options.slice(Y,$e).map((je,kt)=>{const ut=X.value(je)===!0,ct=Ze(je)===!0,Qt=Y+kt,Tt={clickable:!0,active:ct,activeClass:Ge.value,manualFocus:!0,focused:!1,disable:ut,tabindex:-1,dense:t.optionsDense,dark:te.value,role:"option","aria-selected":ct===!0?"true":"false",id:`${H.targetUid.value}_${Qt}`,onClick:()=>{pe(je)}};return ut!==!0&&(s.value===Qt&&(Tt.focused=!0),r.platform.is.desktop===!0&&(Tt.onMousemove=()=>{o.value===!0&&Pe(Qt)})),{index:Qt,opt:je,html:ye.value(je),label:ce.value(je),selected:Tt.active,focused:Tt.focused,toggleOption:pe,setOptionIndex:Pe,itemProps:Tt}})}),we=w(()=>t.dropdownIcon!==void 0?t.dropdownIcon:r.iconSet.arrow.dropdown),qe=w(()=>t.optionsCover===!1&&t.outlined!==!0&&t.standout!==!0&&t.borderless!==!0&&t.rounded!==!0),Ge=w(()=>t.optionsSelectedClass!==void 0?t.optionsSelectedClass:t.color!==void 0?`text-${t.color}`:""),oe=w(()=>ef(t.optionValue,"value")),ce=w(()=>ef(t.optionLabel,"label")),X=w(()=>ef(t.optionDisable,"disable")),de=w(()=>ee.value.map(oe.value)),Se=w(()=>{const Y={onInput:xe,onChange:P,onKeydown:Te,onKeyup:We,onKeypress:J,onFocus:Re,onClick($e){d===!0&&Nt($e)}};return Y.onCompositionstart=Y.onCompositionupdate=Y.onCompositionend=P,Y});function Le(Y){return t.emitValue===!0?oe.value(Y):Y}function Fe(Y){if(Y!==-1&&Y<ee.value.length)if(t.multiple===!0){const $e=t.modelValue.slice();i("remove",{index:Y,value:$e.splice(Y,1)[0]}),i("update:modelValue",$e)}else i("update:modelValue",null)}function K(Y){Fe(Y),H.focus()}function ae(Y,$e){const je=Le(Y);if(t.multiple!==!0)return t.fillInput===!0&&G(ce.value(Y),!0,!0),void i("update:modelValue",je);if(ee.value.length===0)return i("add",{index:0,value:je}),void i("update:modelValue",t.multiple===!0?[je]:je);if($e===!0&&Ze(Y)===!0||t.maxValues!==void 0&&t.modelValue.length>=t.maxValues)return;const kt=t.modelValue.slice();i("add",{index:kt.length,value:je}),kt.push(je),i("update:modelValue",kt)}function pe(Y,$e){if(H.editable.value!==!0||Y===void 0||X.value(Y)===!0)return;const je=oe.value(Y);if(t.multiple!==!0)return $e!==!0&&(G(t.fillInput===!0?ce.value(Y):"",!0,!0),Mi()),C.value!==null&&C.value.focus(),void(ee.value.length!==0&&Cn(oe.value(ee.value[0]),je)===!0||i("update:modelValue",t.emitValue===!0?je:Y));if((d!==!0||u.value===!0)&&H.focus(),Re(),ee.value.length===0){const ct=t.emitValue===!0?je:Y;return i("add",{index:0,value:ct}),void i("update:modelValue",t.multiple===!0?[ct]:ct)}const kt=t.modelValue.slice(),ut=de.value.findIndex(ct=>Cn(ct,je));if(ut!==-1)i("remove",{index:ut,value:kt.splice(ut,1)[0]});else{if(t.maxValues!==void 0&&kt.length>=t.maxValues)return;const ct=t.emitValue===!0?je:Y;i("add",{index:kt.length,value:ct}),kt.push(ct)}i("update:modelValue",kt)}function Pe(Y){if(r.platform.is.desktop!==!0)return;const $e=Y!==-1&&Y<T.value?Y:-1;s.value!==$e&&(s.value=$e)}function He(Y=1,$e){if(o.value===!0){let je=s.value;do je=Fh(je+Y,-1,T.value-1);while(je!==-1&&je!==s.value&&X.value(t.options[je])===!0);s.value!==je&&(Pe(je),B(je),$e!==!0&&t.useInput===!0&&t.fillInput===!0&&D(je>=0?ce.value(t.options[je]):f,!0))}}function Ze(Y){const $e=oe.value(Y);return de.value.find(je=>Cn(je,$e))!==void 0}function Re(Y){t.useInput===!0&&C.value!==null&&(Y===void 0||C.value===Y.target&&Y.target.value===W.value)&&C.value.select()}function Ye(Y){dn(Y,27)===!0&&o.value===!0&&(Nt(Y),Mi(),tr()),i("keyup",Y)}function We(Y){const{value:$e}=Y.target;if(Y.keyCode===void 0)if(Y.target.value="",b!==null&&(clearTimeout(b),b=null),m!==null&&(clearTimeout(m),m=null),tr(),typeof $e=="string"&&$e.length!==0){const je=$e.toLocaleLowerCase(),kt=ct=>{const Qt=t.options.find(Tt=>String(ct.value(Tt)).toLocaleLowerCase()===je);return Qt!==void 0&&(ee.value.indexOf(Qt)===-1?pe(Qt):Mi(),!0)},ut=ct=>{kt(oe)!==!0&&ct!==!0&&kt(ce)!==!0&&Q($e,!0,()=>ut(!0))};ut()}else H.clearValue(Y);else Ye(Y)}function J(Y){i("keypress",Y)}function Te(Y){if(i("keydown",Y),la(Y)===!0)return;const $e=l.value.length!==0&&(t.newValueMode!==void 0||t.onNewValue!==void 0),je=Y.shiftKey!==!0&&t.disableTabSelection!==!0&&t.multiple!==!0&&(s.value!==-1||$e===!0);if(Y.keyCode===27)return void ui(Y);if(Y.keyCode===9&&je===!1)return void It();if(Y.target===void 0||Y.target.id!==H.targetUid.value||H.editable.value!==!0)return;if(Y.keyCode===40&&H.innerLoading.value!==!0&&o.value===!1)return Ke(Y),void xt();if(Y.keyCode===8&&(t.useChips===!0||t.clearable===!0)&&t.hideSelected!==!0&&l.value.length===0)return void(t.multiple===!0&&Array.isArray(t.modelValue)===!0?Fe(t.modelValue.length-1):t.multiple!==!0&&t.modelValue!==null&&i("update:modelValue",null));Y.keyCode!==35&&Y.keyCode!==36||typeof l.value=="string"&&l.value.length!==0||(Ke(Y),s.value=-1,He(Y.keyCode===36?1:-1,t.multiple)),Y.keyCode!==33&&Y.keyCode!==34||I.value===void 0||(Ke(Y),s.value=Math.max(-1,Math.min(T.value,s.value+(Y.keyCode===33?-1:1)*I.value.view)),He(Y.keyCode===33?1:-1,t.multiple)),Y.keyCode!==38&&Y.keyCode!==40||(Ke(Y),He(Y.keyCode===38?-1:1,t.multiple));const kt=T.value;if((y===void 0||_<Date.now())&&(y=""),kt>0&&t.useInput!==!0&&Y.key!==void 0&&Y.key.length===1&&Y.altKey===!1&&Y.ctrlKey===!1&&Y.metaKey===!1&&(Y.keyCode!==32||y.length!==0)){o.value!==!0&&xt(Y);const ut=Y.key.toLocaleLowerCase(),ct=y.length===1&&y[0]===ut;_=Date.now()+1500,ct===!1&&(Ke(Y),y+=ut);const Qt=new RegExp("^"+y.split("").map(Xs=>".*+?^${}()|[]\\".indexOf(Xs)!==-1?"\\"+Xs:Xs).join(".*"),"i");let Tt=s.value;if(ct===!0||Tt<0||Qt.test(ce.value(t.options[Tt]))!==!0)do Tt=Fh(Tt+1,-1,kt-1);while(Tt!==s.value&&(X.value(t.options[Tt])===!0||Qt.test(ce.value(t.options[Tt]))!==!0));s.value!==Tt&&lt(()=>{Pe(Tt),B(Tt),Tt>=0&&t.useInput===!0&&t.fillInput===!0&&D(ce.value(t.options[Tt]),!0)})}else if(Y.keyCode===13||Y.keyCode===32&&t.useInput!==!0&&y===""||Y.keyCode===9&&je!==!1)if(Y.keyCode!==9&&Ke(Y),s.value!==-1&&s.value<kt)pe(t.options[s.value]);else{if($e===!0){const ut=(ct,Qt)=>{if(Qt){if(F_(Qt)!==!0)return}else Qt=t.newValueMode;G("",t.multiple!==!0,!0),ct!=null&&((Qt==="toggle"?pe:ae)(ct,Qt==="add-unique"),t.multiple!==!0&&(C.value!==null&&C.value.focus(),Mi()))};if(t.onNewValue!==void 0?i("newValue",l.value,ut):ut(l.value),t.multiple!==!0)return}o.value===!0?It():H.innerLoading.value!==!0&&xt()}}function _e(){return d===!0?A.value:k.value!==null&&k.value.contentEl!==null?k.value.contentEl:void 0}function ve(){if(Z.value===!0)return e["no-option"]!==void 0?e["no-option"]({inputValue:l.value}):void 0;const Y=e.option!==void 0?e.option:je=>x(Du,{key:je.index,...je.itemProps},()=>x(yr,()=>x(dm,()=>x("span",{[je.html===!0?"innerHTML":"textContent"]:je.label}))));let $e=O("div",me.value.map(Y));return e["before-options"]!==void 0&&($e=e["before-options"]().concat($e)),Xt(e["after-options"],$e)}function xe(Y){b!==null&&(clearTimeout(b),b=null),m!==null&&(clearTimeout(m),m=null),Y&&Y.target&&Y.target.qComposing===!0||(D(Y.target.value||""),p=!0,f=l.value,H.focused.value===!0||d===!0&&u.value!==!0||H.focus(),t.onFilter!==void 0&&(b=setTimeout(()=>{b=null,Q(l.value)},t.inputDebounce)))}function D(Y,$e){l.value!==Y&&(l.value=Y,$e===!0||t.inputDebounce===0||t.inputDebounce==="0"?i("inputValue",Y):m=setTimeout(()=>{m=null,i("inputValue",Y)},t.inputDebounce))}function G(Y,$e,je){p=je!==!0,t.useInput===!0&&(D(Y,!0),$e!==!0&&je===!0||(f=Y),$e!==!0&&Q(Y))}function Q(Y,$e,je){if(t.onFilter===void 0||$e!==!0&&H.focused.value!==!0)return;H.innerLoading.value===!0?i("filterAbort"):(H.innerLoading.value=!0,c.value=!0),Y!==""&&t.multiple!==!0&&ee.value.length!==0&&p!==!0&&Y===ce.value(ee.value[0])&&(Y="");const kt=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);v!==null&&clearTimeout(v),v=kt,i("filter",Y,(ut,ct)=>{$e!==!0&&H.focused.value!==!0||v!==kt||(clearTimeout(v),typeof ut=="function"&&ut(),c.value=!1,lt(()=>{H.innerLoading.value=!1,H.editable.value===!0&&($e===!0?o.value===!0&&Mi():o.value===!0?qd(!0):o.value=!0),typeof ct=="function"&&lt(()=>{ct(n)}),typeof je=="function"&&lt(()=>{je(n)})}))},()=>{H.focused.value===!0&&v===kt&&(clearTimeout(v),H.innerLoading.value=!1,c.value=!1),o.value===!0&&(o.value=!1)})}function ie(Y){T0(Y),It()}function re(){F()}function Me(Y){Nt(Y),C.value!==null&&C.value.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function ge(Y){Nt(Y),lt(()=>{u.value=!1})}function De(Y){T0(Y),L.value!==null&&L.value.__updateRefocusTarget(H.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),H.focused.value=!1}function Ne(Y){Mi(),H.focused.value===!1&&i("blur",Y),tr()}function bt(){const Y=document.activeElement;Y!==null&&Y.id===H.targetUid.value||C.value===null||C.value===Y||C.value.focus(),F()}function It(){a.value!==!0&&(s.value=-1,o.value===!0&&(o.value=!1),H.focused.value===!1&&(v!==null&&(clearTimeout(v),v=null),H.innerLoading.value===!0&&(i("filterAbort"),H.innerLoading.value=!1,c.value=!1)))}function xt(Y){H.editable.value===!0&&(d===!0?(H.onControlFocusin(Y),a.value=!0,lt(()=>{H.focus()})):H.focus(),t.onFilter!==void 0?Q(l.value):Z.value===!0&&e["no-option"]===void 0||(o.value=!0))}function Mi(){a.value=!1,It()}function tr(){t.useInput===!0&&G(t.multiple!==!0&&t.fillInput===!0&&ee.value.length!==0&&ce.value(ee.value[0])||"",!0,!0)}function qd(Y){let $e=-1;if(Y===!0){if(ee.value.length!==0){const je=oe.value(ee.value[0]);$e=t.options.findIndex(kt=>Cn(oe.value(kt),je))}E($e)}Pe($e)}function M0(){a.value===!1&&k.value!==null&&k.value.updatePosition()}function k0(Y){Y!==void 0&&Nt(Y),i("popupShow",Y),H.hasPopupOpen=!0,H.onControlFocusin(Y)}function T0(Y){Y!==void 0&&Nt(Y),i("popupHide",Y),H.hasPopupOpen=!1,H.onControlFocusout(Y)}function E0(){d=(r.platform.is.mobile===!0||t.behavior==="dialog")&&t.behavior!=="menu"&&(t.useInput!==!0||e["no-option"]!==void 0||t.onFilter!==void 0||Z.value===!1),g=r.platform.is.ios===!0&&d===!0&&t.useInput===!0?"fade":t.transitionShow}return se(ee,Y=>{h=Y,t.useInput===!0&&t.fillInput===!0&&t.multiple!==!0&&H.innerLoading.value!==!0&&(a.value!==!0&&o.value!==!0||N.value!==!0)&&(p!==!0&&tr(),a.value!==!0&&o.value!==!0||Q(""))},{immediate:!0}),se(()=>t.fillInput,tr),se(o,qd),se(T,function(Y,$e){o.value===!0&&H.innerLoading.value===!1&&(E(-1,!0),lt(()=>{o.value===!0&&H.innerLoading.value===!1&&(Y>$e?E():qd(!0))}))}),_u(E0),jC(M0),E0(),ot(()=>{b!==null&&clearTimeout(b),m!==null&&clearTimeout(m)}),Object.assign(n,{showPopup:xt,hidePopup:Mi,removeAtIndex:Fe,add:ae,toggleOption:pe,getOptionIndex:()=>s.value,setOptionIndex:Pe,moveOptionSelection:He,filter:Q,updateMenuPosition:M0,updateInputValue:G,isOptionSelected:Ze,getEmittingOptionValue:Le,isOptionDisabled:(...Y)=>X.value.apply(null,Y)===!0,getOptionValue:(...Y)=>oe.value.apply(null,Y),getOptionLabel:(...Y)=>ce.value.apply(null,Y)}),Object.assign(H,{innerValue:ee,fieldClass:w(()=>`q-select q-field--auto-height q-select--with${t.useInput!==!0?"out":""}-input q-select--with${t.useChips!==!0?"out":""}-chips q-select--${t.multiple===!0?"multiple":"single"}`),inputRef:S,targetRef:C,hasValue:N,showPopup:xt,floatingLabel:w(()=>t.hideSelected!==!0&&N.value===!0||typeof l.value=="number"||l.value.length!==0||ha(t.displayValue)),getControlChild:()=>{if(H.editable.value!==!1&&(a.value===!0||Z.value!==!0||e["no-option"]!==void 0))return d===!0?function(){const Y=[x(cL,{class:`col-auto ${H.fieldClass.value}`,...ne.value,for:H.targetUid.value,dark:te.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:l.value.length!==0,...H.splitAttrs.listeners.value,onFocus:Me,onBlur:ge},{...e,rawControl:()=>H.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&Y.push(x("div",{ref:A,class:j.value+" scroll",style:t.popupContentStyle,...Ce.value,onClick:ui,onScrollPassive:V},ve())),x(_d,{ref:L,modelValue:a.value,position:t.useInput===!0?"top":void 0,transitionShow:g,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,noRouteDismiss:t.popupNoRouteDismiss,onBeforeShow:k0,onBeforeHide:De,onHide:Ne,onShow:bt},()=>x("div",{class:"q-select__dialog"+(te.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},Y))}():x(Au,{ref:k,class:j.value,style:t.popupContentStyle,modelValue:o.value,fit:t.menuShrink!==!0,cover:t.optionsCover===!0&&Z.value!==!0&&t.useInput!==!0,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,dark:te.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:t.popupNoRouteDismiss,square:qe.value,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,separateClosePopup:!0,...Ce.value,onScrollPassive:V,onBeforeShow:k0,onBeforeHide:ie,onShow:re},ve);H.hasPopupOpen===!0&&(H.hasPopupOpen=!1)},controlEvents:{onFocusin(Y){H.onControlFocusin(Y)},onFocusout(Y){H.onControlFocusout(Y,()=>{tr(),It()})},onClick(Y){if(ui(Y),d!==!0&&o.value===!0)return It(),void(C.value!==null&&C.value.focus());xt(Y)}},getControl:Y=>{const $e=t.hideSelected===!0?[]:e["selected-item"]!==void 0?Ie.value.map(ut=>e["selected-item"](ut)).slice():e.selected!==void 0?[].concat(e.selected()):t.useChips===!0?Ie.value.map((ut,ct)=>x(G2,{key:"option-"+ct,removable:H.editable.value===!0&&X.value(ut.opt)!==!0,dense:!0,textColor:t.color,tabindex:he.value,onRemove(){ut.removeAtIndex(ct)}},()=>x("span",{class:"ellipsis",[ut.html===!0?"innerHTML":"textContent"]:ce.value(ut.opt)}))):[x("span",{[ue.value===!0?"innerHTML":"textContent"]:U.value})],je=Y===!0||a.value!==!0||d!==!0;if(t.useInput===!0)$e.push(function(ut,ct){const Qt=ct===!0?{...fe.value,...H.splitAttrs.attributes.value}:void 0,Tt={ref:ct===!0?C:void 0,key:"i_t",class:z.value,style:t.inputStyle,value:l.value!==void 0?l.value:"",type:"search",...Qt,id:ct===!0?H.targetUid.value:void 0,maxlength:t.maxlength,autocomplete:t.autocomplete,"data-autofocus":ut===!0||t.autofocus===!0||void 0,disabled:t.disable===!0,readonly:t.readonly===!0,...Se.value};return ut!==!0&&d===!0&&(Array.isArray(Tt.class)===!0?Tt.class=[...Tt.class,"no-pointer-events"]:Tt.class+=" no-pointer-events"),x("input",Tt)}(Y,je));else if(H.editable.value===!0){const ut=je===!0?fe.value:void 0;$e.push(x("input",{ref:je===!0?C:void 0,key:"d_t",class:"q-select__focus-target",id:je===!0?H.targetUid.value:void 0,value:U.value,readonly:!0,"data-autofocus":Y===!0||t.autofocus===!0||void 0,...ut,onKeydown:Te,onKeyup:Ye,onKeypress:J})),je===!0&&typeof t.autocomplete=="string"&&t.autocomplete.length!==0&&$e.push(x("input",{class:"q-select__autocomplete-input",autocomplete:t.autocomplete,tabindex:-1,onKeyup:We}))}if(q.value!==void 0&&t.disable!==!0&&de.value.length!==0){const ut=de.value.map(ct=>x("option",{value:ct,selected:!0}));$e.push(x("select",{class:"hidden",name:q.value,multiple:t.multiple},ut))}const kt=t.useInput===!0||je!==!0?void 0:H.splitAttrs.attributes.value;return x("div",{class:"q-field__native row items-center",...kt,...H.splitAttrs.listeners.value},$e)},getInnerAppend:()=>t.loading!==!0&&c.value!==!0&&t.hideDropdownIcon!==!0?[x(gt,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:we.value})]:null}),Sd(H)}}),zL=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],DL=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];le({name:"QSkeleton",props:{...dt,tag:{type:String,default:"div"},type:{type:String,validator:t=>zL.includes(t),default:"rect"},animation:{type:String,validator:t=>DL.includes(t),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(t,{slots:e}){const i=ke(),n=pt(t,i.proxy.$q),r=w(()=>{const a=t.size!==void 0?[t.size,t.size]:[t.width,t.height];return{"--q-skeleton-speed":`${t.animationSpeed}ms`,width:a[0],height:a[1]}}),o=w(()=>`q-skeleton q-skeleton--${n.value===!0?"dark":"light"} q-skeleton--type-${t.type}`+(t.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${t.animation}`:"")+(t.square===!0?" q-skeleton--square":"")+(t.bordered===!0?" q-skeleton--bordered":""));return()=>x(t.tag,{class:o.value,style:r.value},ze(e.default))}});var A_=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];le({name:"QSlideItem",props:{...dt,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=pt(t,r),{getCache:a}=zu(),s=$(null);let l=null,u={},c={},h={};const d=w(()=>r.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),p=w(()=>"q-slide-item q-item-type overflow-hidden"+(o.value===!0?" q-slide-item--dark q-dark":""));function f(){s.value.style.transform="translate(0,0)"}function g(_,b,m){t.onSlide!==void 0&&i("slide",{side:_,ratio:b,isReset:m})}function y(_){const b=s.value;if(_.isFirst)u={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},b.classList.add("no-transition"),A_.forEach(C=>{if(e[C[0]]!==void 0){const k=h[C[0]];k.style.transform="scale(1)",u.size[C[0]]=k.getBoundingClientRect()[C[3]]}}),u.axis=_.direction==="up"||_.direction==="down"?"Y":"X";else{if(_.isFinal)return b.classList.remove("no-transition"),void(u.scale===1?(b.style.transform=`translate${u.axis}(${100*u.dir}%)`,l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,i(u.showing,{reset:f}),i("action",{side:u.showing,reset:f})},230)):(b.style.transform="translate(0,0)",g(u.showing,0,!0)));_.direction=u.axis==="X"?_.offset.x<0?"left":"right":_.offset.y<0?"up":"down"}if(e.left===void 0&&_.direction===d.value.right||e.right===void 0&&_.direction===d.value.left||e.top===void 0&&_.direction==="down"||e.bottom===void 0&&_.direction==="up")return void(b.style.transform="translate(0,0)");let m,v,S;u.axis==="X"?(v=_.direction==="left"?-1:1,m=v===1?d.value.left:d.value.right,S=_.distance.x):(v=_.direction==="up"?-2:2,m=v===2?"top":"bottom",S=_.distance.y),u.dir!==null&&Math.abs(v)!==Math.abs(u.dir)||(u.dir!==v&&(["left","right","top","bottom"].forEach(C=>{c[C]&&(c[C].style.visibility=m===C?"visible":"hidden")}),u.showing=m,u.dir=v),u.scale=Math.max(0,Math.min(1,(S-40)/u.size[m])),b.style.transform=`translate${u.axis}(${S*v/Math.abs(v)}px)`,h[m].style.transform=`scale(${u.scale})`,g(m,u.scale,!1))}return _u(()=>{c={},h={}}),ot(()=>{l!==null&&clearTimeout(l)}),Object.assign(n,{reset:f}),()=>{const _=[],b={left:e[d.value.right]!==void 0,right:e[d.value.left]!==void 0,up:e.bottom!==void 0,down:e.top!==void 0},m=Object.keys(b).filter(S=>b[S]===!0);A_.forEach(S=>{const C=S[0];e[C]!==void 0&&_.push(x("div",{key:C,ref:k=>{c[C]=k},class:`q-slide-item__${C} absolute-full row no-wrap items-${S[1]} justify-${S[2]}`+(t[C+"Color"]!==void 0?` bg-${t[C+"Color"]}`:"")},[x("div",{ref:k=>{h[C]=k}},e[C]())]))});const v=x("div",{key:(m.length===0?"only-":"")+" content",ref:s,class:"q-slide-item__content"},ze(e.default));return m.length===0?_.push(v):_.push(Vi(v,a("dir#"+m.join(""),()=>{const S={prevent:!0,stop:!0,mouse:!0};return m.forEach(C=>{S[C]=!0}),[[cn,y,void 0,S]]}))),x("div",{class:p.value},_)}}}),le({name:"QSpace",setup(){const t=x("div",{class:"q-space"});return()=>t}}),le({name:"QSpinnerAudio",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="matrix(1 0 0 -1 0 80)"><rect width="10" height="20" rx="3"><animate attributeName="height" begin="0s" dur="4.3s" values="20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="15" width="10" height="80" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="80;55;33;5;75;23;73;33;12;14;60;80" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" width="10" height="50" rx="3"><animate attributeName="height" begin="0s" dur="1.4s" values="50;34;78;23;56;23;34;76;80;54;21;50" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="45" width="10" height="30" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="30;45;13;80;56;72;45;76;34;23;67;30" calcMode="linear" repeatCount="indefinite"></animate></rect></g>'})}}),le({name:"QSpinnerBall",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle cx="5" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="27" cy="5" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="49" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),le({name:"QSpinnerBars",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="60" width="15" height="140" rx="6"><animate attributeName="height" begin="0s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="90" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="120" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect>'})}}),le({name:"QSpinnerBox",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect x="25" y="25" width="50" height="50" fill="none" stroke-width="4" stroke="currentColor"><animateTransform id="spinnerBox" attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" dur="0.5s" begin="rectBox.end"></animateTransform></rect><rect x="27" y="27" width="46" height="50" fill="currentColor"><animate id="rectBox" attributeName="height" begin="0s;spinnerBox.end" dur="1.3s" from="50" to="0" fill="freeze"></animate></rect>'})}}),le({name:"QSpinnerClock",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="48" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="currentColor"></circle><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="85" y2="50.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2s" repeatCount="indefinite"></animateTransform></line><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="49.5" y2="74"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="15s" repeatCount="indefinite"></animateTransform></line>'})}}),le({name:"QSpinnerComment",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><path d="M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z" fill="currentColor"></path><circle cx="30" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;1;1" keyTimes="0;0.2;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="50" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.2;0.4;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="70" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.4;0.6;1" dur="1s" repeatCount="indefinite"></animate></circle>'})}}),le({name:"QSpinnerCube",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><g transform="translate(25 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.1s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(25 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.7"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.3s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.2s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g>'})}}),le({name:"QSpinnerDots",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),le({name:"QSpinnerFacebook",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",innerHTML:'<g transform="translate(20 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(50 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.1s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(80 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.2s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g>'})}}),le({name:"QSpinnerGears",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),le({name:"QSpinnerGrid",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="12.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="0s" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5"><animate attributeName="fill-opacity" begin="100ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="300ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="600ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="800ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="400ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="700ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="500ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="200ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),le({name:"QSpinnerHearts",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0.7s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"></path>'})}}),le({name:"QSpinnerHourglass",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>'})}}),le({name:"QSpinnerInfinity",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<path d="M24.3,30C11.4,30,5,43.3,5,50s6.4,20,19.3,20c19.3,0,32.1-40,51.4-40C88.6,30,95,43.3,95,50s-6.4,20-19.3,20C56.4,70,43.6,30,24.3,30z" fill="none" stroke="currentColor" stroke-width="8" stroke-dasharray="10.691205342610678 10.691205342610678" stroke-dashoffset="0"><animate attributeName="stroke-dashoffset" from="0" to="21.382410685221355" begin="0" dur="2s" repeatCount="indefinite" fill="freeze"></animate></path>'})}}),le({name:"QSpinnerIos",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64",innerHTML:'<g stroke-width="4" stroke-linecap="round"><line y1="17" y2="29" transform="translate(32,32) rotate(180)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(210)"><animate attributeName="stroke-opacity" dur="750ms" values="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(240)"><animate attributeName="stroke-opacity" dur="750ms" values=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(270)"><animate attributeName="stroke-opacity" dur="750ms" values=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(300)"><animate attributeName="stroke-opacity" dur="750ms" values=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(330)"><animate attributeName="stroke-opacity" dur="750ms" values=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(0)"><animate attributeName="stroke-opacity" dur="750ms" values=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(30)"><animate attributeName="stroke-opacity" dur="750ms" values=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(60)"><animate attributeName="stroke-opacity" dur="750ms" values=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(90)"><animate attributeName="stroke-opacity" dur="750ms" values=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(120)"><animate attributeName="stroke-opacity" dur="750ms" values=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(150)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line></g>'})}}),le({name:"QSpinnerOrbit",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="44" fill="none" stroke-width="4" stroke-opacity=".5" stroke="currentColor"></circle><circle cx="8" cy="54" r="6" fill="currentColor" stroke-width="3" stroke="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 48" to="360 50 52" dur="2s" repeatCount="indefinite"></animateTransform></circle>'})}}),le({name:"QSpinnerOval",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),le({name:"QSpinnerPie",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M0 50A50 50 0 0 1 50 0L50 50L0 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="0.8s" repeatCount="indefinite"></animateTransform></path><path d="M50 0A50 50 0 0 1 100 50L50 50L50 0" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="1.6s" repeatCount="indefinite"></animateTransform></path><path d="M100 50A50 50 0 0 1 50 100L50 50L100 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2.4s" repeatCount="indefinite"></animateTransform></path><path d="M50 100A50 50 0 0 1 0 50L50 50L50 100" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="3.2s" repeatCount="indefinite"></animateTransform></path>'})}}),le({name:"QSpinnerPuff",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle></g>'})}}),le({name:"QSpinnerRadio",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="scale(0.55)"><circle cx="30" cy="150" r="30" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></circle><path d="M90,150h30c0-49.7-40.3-90-90-90v30C63.1,90,90,116.9,90,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.1" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path><path d="M150,150h30C180,67.2,112.8,0,30,0v30C96.3,30,150,83.7,150,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.2" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path></g>'})}}),le({name:"QSpinnerRings",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,stroke:"currentColor",width:e.value,height:e.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2"><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="1.5s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="1.5s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="1.5s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="3s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="3s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="3s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="8"><animate attributeName="r" begin="0s" dur="1.5s" values="6;1;2;3;4;5;6" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),le({name:"QSpinnerTail",props:Gt,setup(t){const{cSize:e,classes:i}=Ht(t);return()=>x("svg",{class:i.value,width:e.value,height:e.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="currentColor" stop-opacity="0" offset="0%"></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="currentColor" offset="100%"></stop></linearGradient></defs><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="1"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></circle></g>'})}}),le({name:"QSplitter",props:{...dt,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:t=>["%","px"].includes(t)},limits:{type:Array,validator:t=>t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"&&t[0]>=0&&t[0]<=t[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=pt(t,n),o=$(null),a={before:$(null),after:$(null)},s=w(()=>`q-splitter no-wrap ${t.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${t.disable===!0?"disabled":"workable"}`+(r.value===!0?" q-splitter--dark":"")),l=w(()=>t.horizontal===!0?"height":"width"),u=w(()=>t.reverse!==!0?"before":"after"),c=w(()=>t.limits!==void 0?t.limits:t.unit==="%"?[10,90]:[50,1/0]);function h(S){return(t.unit==="%"?S:Math.round(S))+t.unit}const d=w(()=>({[u.value]:{[l.value]:h(t.modelValue)}}));let p,f,g,y,_;function b(S){if(S.isFirst===!0){const k=o.value.getBoundingClientRect()[l.value];return p=t.horizontal===!0?"up":"left",f=t.unit==="%"?100:k,g=Math.min(f,c.value[1],Math.max(c.value[0],t.modelValue)),y=(t.reverse!==!0?1:-1)*(t.horizontal===!0?1:n.lang.rtl===!0?-1:1)*(t.unit==="%"?k===0?0:100/k:1),void o.value.classList.add("q-splitter--active")}if(S.isFinal===!0)return _!==t.modelValue&&i("update:modelValue",_),void o.value.classList.remove("q-splitter--active");const C=g+y*(S.direction===p?-1:1)*S.distance[t.horizontal===!0?"y":"x"];_=Math.min(f,c.value[1],Math.max(c.value[0],C)),a[u.value].value.style[l.value]=h(_),t.emitImmediately===!0&&t.modelValue!==_&&i("update:modelValue",_)}const m=w(()=>[[cn,b,void 0,{[t.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function v(S,C){S<C[0]?i("update:modelValue",C[0]):S>C[1]&&i("update:modelValue",C[1])}return se(()=>t.modelValue,S=>{v(S,c.value)}),se(()=>t.limits,()=>{lt(()=>{v(t.modelValue,c.value)})}),()=>{const S=[x("div",{ref:a.before,class:["q-splitter__panel q-splitter__before"+(t.reverse===!0?" col":""),t.beforeClass],style:d.value.before},ze(e.before)),x("div",{class:["q-splitter__separator",t.separatorClass],style:t.separatorStyle,"aria-disabled":t.disable===!0?"true":void 0},[pn("div",{class:"q-splitter__separator-area absolute-full"},ze(e.separator),"sep",t.disable!==!0,()=>m.value)]),x("div",{ref:a.after,class:["q-splitter__panel q-splitter__after"+(t.reverse===!0?"":" col"),t.afterClass],style:d.value.after},ze(e.after))];return x("div",{class:s.value,ref:o},Xt(e.default,S))}}});var RS=le({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(t,{attrs:e}){const{proxy:{$q:i}}=ke(),n=$(null),r=w(()=>t.stepper.modelValue===t.step.name),o=w(()=>{const y=t.step.disable;return y===!0||y===""}),a=w(()=>{const y=t.step.error;return y===!0||y===""}),s=w(()=>{const y=t.step.done;return o.value===!1&&(y===!0||y==="")}),l=w(()=>{const y=t.step.headerNav,_=y===!0||y===""||y===void 0;return o.value===!1&&t.stepper.headerNav&&_}),u=w(()=>t.step.prefix&&(r.value===!1||t.stepper.activeIcon==="none")&&(a.value===!1||t.stepper.errorIcon==="none")&&(s.value===!1||t.stepper.doneIcon==="none")),c=w(()=>{const y=t.step.icon||t.stepper.inactiveIcon;if(r.value===!0){const _=t.step.activeIcon||t.stepper.activeIcon;return _==="none"?y:_||i.iconSet.stepper.active}if(a.value===!0){const _=t.step.errorIcon||t.stepper.errorIcon;return _==="none"?y:_||i.iconSet.stepper.error}if(o.value===!1&&s.value===!0){const _=t.step.doneIcon||t.stepper.doneIcon;return _==="none"?y:_||i.iconSet.stepper.done}return y}),h=w(()=>{const y=a.value===!0?t.step.errorColor||t.stepper.errorColor:void 0;if(r.value===!0){const _=t.step.activeColor||t.stepper.activeColor||t.step.color;return _!==void 0?_:y}return y!==void 0?y:o.value===!1&&s.value===!0?t.step.doneColor||t.stepper.doneColor||t.step.color||t.stepper.inactiveColor:t.step.color||t.stepper.inactiveColor}),d=w(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(h.value!==void 0?` text-${h.value}`:"")+(a.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(u.value===!0?"prefix":"icon"):"")+(r.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(l.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(o.value===!0?" q-stepper__tab--disabled":"")),p=w(()=>t.stepper.headerNav===!0&&l.value);function f(){n.value!==null&&n.value.focus(),r.value===!1&&t.goToPanel(t.step.name)}function g(y){y.keyCode===13&&r.value===!1&&t.goToPanel(t.step.name)}return()=>{const y={class:d.value};l.value===!0&&(y.onClick=f,y.onKeyup=g,Object.assign(y,o.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0}));const _=[x("div",{class:"q-focus-helper",tabindex:-1,ref:n}),x("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[x("span",{class:"row flex-center"},[u.value===!0?t.step.prefix:x(gt,{name:c.value})])])];if(t.step.title!==void 0&&t.step.title!==null){const b=[x("div",{class:"q-stepper__title"},t.step.title)];t.step.caption!==void 0&&t.step.caption!==null&&b.push(x("div",{class:"q-stepper__caption"},t.step.caption)),_.push(x("div",{class:"q-stepper__label q-stepper__line relative-position"},b))}return Vi(x("div",y,_),[[gd,p.value]])}}});function FS(t){return x("div",{class:"q-stepper__step-content"},[x("div",{class:"q-stepper__step-inner"},ze(t.default))])}var O_={setup:(t,{slots:e})=>()=>FS(e)};le({name:"QStep",props:{...Nv,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(t,{slots:e,emit:i}){const{proxy:{$q:n}}=ke(),r=Ni(l2,wt);if(r===wt)return wt;const{getCache:o}=zu(),a=$(null),s=w(()=>r.value.modelValue===t.name),l=w(()=>n.platform.is.ios!==!0&&n.platform.is.chrome===!0||s.value!==!0||r.value.vertical!==!0?{}:{onScroll(h){const{target:d}=h;d.scrollTop>0&&(d.scrollTop=0),t.onScroll!==void 0&&i("scroll",h)}}),u=w(()=>typeof t.name=="string"||typeof t.name=="number"?t.name:String(t.name));function c(){const h=r.value.vertical;return h===!0&&r.value.keepAlive===!0?x(Ab,r.value.keepAliveProps.value,s.value===!0?[x(r.value.needsUniqueKeepAliveWrapper.value===!0?o(u.value,()=>({...O_,name:u.value})):O_,{key:u.value},e.default)]:void 0):h!==!0||s.value===!0?FS(e):void 0}return()=>x("div",{ref:a,class:"q-stepper__step",role:"tabpanel",...l.value},r.value.vertical===!0?[x(RS,{stepper:r.value,step:t,goToPanel:r.value.goToPanel}),r.value.animated===!0?x(Kv,c):c()]:[c()])}});var jL=/(-\w)/g;le({name:"QStepper",props:{...dt,...Vv,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:$v,setup(t,{slots:e}){const i=ke(),n=pt(t,i.proxy.$q),{updatePanelsList:r,isValidPanelName:o,updatePanelIndex:a,getPanelContent:s,getPanels:l,panelDirectives:u,goToPanel:c,keepAliveProps:h,needsUniqueKeepAliveWrapper:d}=Gv();uo(l2,w(()=>({goToPanel:c,keepAliveProps:h,needsUniqueKeepAliveWrapper:d,...t})));const p=w(()=>"q-stepper q-stepper--"+(t.vertical===!0?"vertical":"horizontal")+(t.flat===!0?" q-stepper--flat":"")+(t.bordered===!0?" q-stepper--bordered":"")+(n.value===!0?" q-stepper--dark q-dark":"")),f=w(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${t.alternativeLabels===!0?"alternative":"standard"}-labels`+(t.flat===!1||t.bordered===!0?" q-stepper__header--border":"")+(t.contracted===!0?" q-stepper__header--contracted":"")+(t.headerClass!==void 0?` ${t.headerClass}`:""));function g(){const y=ze(e.message,[]);if(t.vertical===!0){o(t.modelValue)&&a();const _=x("div",{class:"q-stepper__content"},ze(e.default));return y===void 0?[_]:y.concat(_)}return[x("div",{class:f.value},l().map(_=>{const b=function(m){const v={};for(const S in m){const C=S.replace(jL,k=>k[1].toUpperCase());v[C]=m[S]}return v}(_.props);return x(RS,{key:b.name,stepper:t,step:b,goToPanel:c})})),y,pn("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",t.swipeable,()=>u.value)]}return()=>(r(e),x("div",{class:p.value},Xt(e.navigation,g())))}}),le({name:"QStepperNavigation",setup:(t,{slots:e})=>()=>x("div",{class:"q-stepper__nav"},ze(e.default))});var BL=le({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(t,{slots:e,emit:i}){const n=ke(),{proxy:{$q:r}}=n,o=a=>{i("click",a)};return()=>{if(t.props===void 0)return x("th",{class:t.autoWidth===!0?"q-table--col-auto-width":"",onClick:o},ze(e.default));let a,s;const l=n.vnode.key;if(l){if(a=t.props.colsMap[l],a===void 0)return}else a=t.props.col;if(a.sortable===!0){const c=a.align==="right"?"unshift":"push";s=Ru(e.default,[]),s[c](x(gt,{class:a.__iconClass,name:r.iconSet.table.arrowUp}))}else s=ze(e.default);const u={class:a.__thClass+(t.autoWidth===!0?" q-table--col-auto-width":""),style:a.headerStyle,onClick:c=>{a.sortable===!0&&t.props.sort(a),o(c)}};return x("th",u,s)}}});function AS(t,e){return x("div",t,[x("table",{class:"q-table"},e)])}var NL={list:TS,table:SL},VL=["list","table","__qtable"],$L=le({name:"QVirtualScroll",props:{...fm,type:{type:String,default:"list",validator:t=>VL.includes(t)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:ya},setup(t,{slots:e,attrs:i}){let n;const r=$(null),o=w(()=>t.itemsSize>=0&&t.itemsFn!==void 0?parseInt(t.itemsSize,10):Array.isArray(t.items)?t.items.length:0),{virtualScrollSliceRange:a,localResetVirtualScroll:s,padVirtualScroll:l,onVirtualScrollEvt:u}=qS({virtualScrollLength:o,getVirtualScrollTarget:function(){return n},getVirtualScrollEl:p}),c=w(()=>{if(o.value===0)return[];const _=(b,m)=>({index:a.value.from+m,item:b});return t.itemsFn===void 0?t.items.slice(a.value.from,a.value.to).map(_):t.itemsFn(a.value.from,a.value.to-a.value.from).map(_)}),h=w(()=>"q-virtual-scroll q-virtual-scroll"+(t.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(t.scrollTarget!==void 0?"":" scroll")),d=w(()=>t.scrollTarget!==void 0?{}:{tabindex:0});function p(){return r.value.$el||r.value}function f(){n=Jn(p(),t.scrollTarget),n.addEventListener("scroll",u,Pt.passive)}function g(){n!==void 0&&(n.removeEventListener("scroll",u,Pt.passive),n=void 0)}function y(){let _=l(t.type==="list"?"div":"tbody",c.value.map(e.default));return e.before!==void 0&&(_=e.before().concat(_)),Xt(e.after,_)}return se(o,()=>{s()}),se(()=>t.scrollTarget,()=>{g(),f()}),Im(()=>{s()}),Rt(()=>{f()}),da(()=>{f()}),Mr(()=>{g()}),ot(()=>{g()}),()=>{if(e.default!==void 0)return t.type==="__qtable"?AS({ref:r,class:"q-table__middle "+h.value},y()):x(NL[t.type],{...i,ref:r,class:[i.class,h.value],...d.value},y)}}}),GL={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:t=>t==="ad"||t==="da",default:"ad"}};function HL(t,e,i,n){const r=w(()=>{const{sortBy:a}=e.value;return a&&i.value.find(s=>s.name===a)||null}),o=w(()=>t.sortMethod!==void 0?t.sortMethod:(a,s,l)=>{const u=i.value.find(d=>d.name===s);if(u===void 0||u.field===void 0)return a;const c=l===!0?-1:1,h=typeof u.field=="function"?d=>u.field(d):d=>d[u.field];return a.sort((d,p)=>{let f=h(d),g=h(p);return u.rawSort!==void 0?u.rawSort(f,g,d,p)*c:f==null?-1*c:g==null?1*c:u.sort!==void 0?u.sort(f,g,d,p)*c:du(f)===!0&&du(g)===!0?(f-g)*c:Jg(f)===!0&&Jg(g)===!0?function(y,_){return new Date(y)-new Date(_)}(f,g)*c:typeof f=="boolean"&&typeof g=="boolean"?(f-g)*c:([f,g]=[f,g].map(y=>(y+"").toLocaleString().toLowerCase()),f<g?-1*c:f===g?0:c)})});return{columnToSort:r,computedSortMethod:o,sort:function(a){let s=t.columnSortOrder;if(Si(a)===!0)a.sortOrder&&(s=a.sortOrder),a=a.name;else{const c=i.value.find(h=>h.name===a);c!==void 0&&c.sortOrder&&(s=c.sortOrder)}let{sortBy:l,descending:u}=e.value;l!==a?(l=a,u=s==="da"):t.binaryStateSort===!0?u=!u:u===!0?s==="ad"?l=null:u=!1:s==="ad"?u=!0:l=null,n({sortBy:l,descending:u,page:1})}}}var WL={filter:[String,Object],filterMethod:Function};function z_(t){return t.page<1&&(t.page=1),t.rowsPerPage!==void 0&&t.rowsPerPage<1&&(t.rowsPerPage=0),t}var UL={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]},XL={selection:{type:String,default:"none",validator:t=>["single","multiple","none"].includes(t)},selected:{type:Array,default:()=>[]}};function D_(t){return Array.isArray(t)?t.slice():[]}var YL={expanded:Array},KL={visibleColumns:Array},Rc="q-table__bottom row items-center",j_={};function ZL(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}R_.forEach(t=>{j_[t]={}}),le({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:t=>["horizontal","vertical","cell","none"].includes(t)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...j_,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...dt,...Hv,...KL,...WL,...UL,...YL,...XL,...GL},emits:["request","virtualScroll",...Wv,"update:expanded","update:selected","selection"],setup(t,{slots:e,emit:i}){const n=ke(),{proxy:{$q:r}}=n,o=pt(t,r),{inFullscreen:a,toggleFullscreen:s}=Uv(),l=w(()=>typeof t.rowKey=="function"?t.rowKey:J=>J[t.rowKey]),u=$(null),c=$(null),h=w(()=>t.grid!==!0&&t.virtualScroll===!0),d=w(()=>" q-table__card"+(o.value===!0?" q-table__card--dark q-dark":"")+(t.square===!0?" q-table--square":"")+(t.flat===!0?" q-table--flat":"")+(t.bordered===!0?" q-table--bordered":"")),p=w(()=>`q-table__container q-table--${t.separator}-separator column no-wrap`+(t.grid===!0?" q-table--grid":d.value)+(o.value===!0?" q-table--dark":"")+(t.dense===!0?" q-table--dense":"")+(t.wrapCells===!1?" q-table--no-wrap":"")+(a.value===!0?" fullscreen scroll":"")),f=w(()=>p.value+(t.loading===!0?" q-table--loading":""));se(()=>t.tableStyle+t.tableClass+t.tableHeaderStyle+t.tableHeaderClass+p.value,()=>{h.value===!0&&c.value!==null&&c.value.reset()});const{innerPagination:g,computedPagination:y,isServerSide:_,requestServerInteraction:b,setPagination:m}=function(J,Te){const{props:_e,emit:ve}=J,xe=$(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:_e.rowsPerPageOptions.length!==0?_e.rowsPerPageOptions[0]:5},_e.pagination)),D=w(()=>z_(_e["onUpdate:pagination"]!==void 0?{...xe.value,..._e.pagination}:xe.value)),G=w(()=>D.value.rowsNumber!==void 0);function Q(re){ie({pagination:re,filter:_e.filter})}function ie(re={}){lt(()=>{ve("request",{pagination:re.pagination||D.value,filter:re.filter||_e.filter,getCellValue:Te})})}return{innerPagination:xe,computedPagination:D,isServerSide:G,requestServerInteraction:ie,setPagination:function(re,Me){const ge=z_({...D.value,...re});(function(De,Ne){for(const bt in Ne)if(Ne[bt]!==De[bt])return!1;return!0})(D.value,ge)!==!0?G.value!==!0?_e.pagination!==void 0&&_e["onUpdate:pagination"]!==void 0?ve("update:pagination",ge):xe.value=ge:Q(ge):G.value===!0&&Me===!0&&Q(ge)}}}(n,Fe),{computedFilterMethod:v}=function(J,Te){const _e=w(()=>J.filterMethod!==void 0?J.filterMethod:(ve,xe,D,G)=>{const Q=xe?xe.toLowerCase():"";return ve.filter(ie=>D.some(re=>{const Me=G(re,ie)+"";return(Me==="undefined"||Me==="null"?"":Me.toLowerCase()).indexOf(Q)!==-1}))});return se(()=>J.filter,()=>{lt(()=>{Te({page:1},!0)})},{deep:!0}),{computedFilterMethod:_e}}(t,m),{isRowExpanded:S,setExpanded:C,updateExpanded:k}=function(J,Te){const _e=$(D_(J.expanded));function ve(xe){J.expanded!==void 0?Te("update:expanded",xe):_e.value=xe}return se(()=>J.expanded,xe=>{_e.value=D_(xe)}),{isRowExpanded:function(xe){return _e.value.includes(xe)},setExpanded:ve,updateExpanded:function(xe,D){const G=_e.value.slice(),Q=G.indexOf(xe);D===!0?Q===-1&&(G.push(xe),ve(G)):Q!==-1&&(G.splice(Q,1),ve(G))}}}(t,i),L=w(()=>{let J=t.rows;if(_.value===!0||J.length===0)return J;const{sortBy:Te,descending:_e}=y.value;return t.filter&&(J=v.value(J,t.filter,H.value,Fe)),te.value!==null&&(J=N.value(t.rows===J?J.slice():J,Te,_e)),J}),A=w(()=>L.value.length),q=w(()=>{let J=L.value;if(_.value===!0)return J;const{rowsPerPage:Te}=y.value;return Te!==0&&(j.value===0&&t.rows!==J?J.length>Z.value&&(J=J.slice(0,Z.value)):J=J.slice(j.value,Z.value)),J}),{hasSelectionMode:P,singleSelection:T,multipleSelection:R,allRowsSelected:M,someRowsSelected:I,rowsSelectedNumber:E,isRowSelected:O,clearSelection:V,updateSelection:B}=function(J,Te,_e,ve){const xe=w(()=>{const ge={};return J.selected.map(ve.value).forEach(De=>{ge[De]=!0}),ge}),D=w(()=>J.selection!=="none"),G=w(()=>J.selection==="single"),Q=w(()=>J.selection==="multiple"),ie=w(()=>_e.value.length!==0&&_e.value.every(ge=>xe.value[ve.value(ge)]===!0)),re=w(()=>ie.value!==!0&&_e.value.some(ge=>xe.value[ve.value(ge)]===!0)),Me=w(()=>J.selected.length);return{hasSelectionMode:D,singleSelection:G,multipleSelection:Q,allRowsSelected:ie,someRowsSelected:re,rowsSelectedNumber:Me,isRowSelected:function(ge){return xe.value[ge]===!0},clearSelection:function(){Te("update:selected",[])},updateSelection:function(ge,De,Ne,bt){Te("selection",{rows:De,added:Ne,keys:ge,evt:bt});const It=G.value===!0?Ne===!0?De:[]:Ne===!0?J.selected.concat(De):J.selected.filter(xt=>ge.includes(ve.value(xt))===!1);Te("update:selected",It)}}}(t,i,q,l),{colList:F,computedCols:H,computedColsMap:ee,computedColspan:ne}=function(J,Te,_e){const ve=w(()=>{if(J.columns!==void 0)return J.columns;const Q=J.rows[0];return Q!==void 0?Object.keys(Q).map(ie=>({name:ie,label:ie.toUpperCase(),field:ie,align:du(Q[ie])?"right":"left",sortable:!0})):[]}),xe=w(()=>{const{sortBy:Q,descending:ie}=Te.value;return(J.visibleColumns!==void 0?ve.value.filter(re=>re.required===!0||J.visibleColumns.includes(re.name)===!0):ve.value).map(re=>{const Me=re.align||"right",ge=`text-${Me}`;return{...re,align:Me,__iconClass:`q-table__sort-icon q-table__sort-icon--${Me}`,__thClass:ge+(re.headerClasses!==void 0?" "+re.headerClasses:"")+(re.sortable===!0?" sortable":"")+(re.name===Q?" sorted "+(ie===!0?"sort-desc":""):""),__tdStyle:re.style!==void 0?typeof re.style!="function"?()=>re.style:re.style:()=>null,__tdClass:re.classes!==void 0?typeof re.classes!="function"?()=>ge+" "+re.classes:De=>ge+" "+re.classes(De):()=>ge}})}),D=w(()=>{const Q={};return xe.value.forEach(ie=>{Q[ie.name]=ie}),Q}),G=w(()=>J.tableColspan!==void 0?J.tableColspan:xe.value.length+(_e.value===!0?1:0));return{colList:ve,computedCols:xe,computedColsMap:D,computedColspan:G}}(t,y,P),{columnToSort:te,computedSortMethod:N,sort:z}=HL(t,y,F,m),{firstRowIndex:j,lastRowIndex:Z,isFirstPage:W,isLastPage:U,pagesNumber:ye,computedRowsPerPageOptions:ue,computedRowsNumber:he,firstPage:fe,prevPage:Ce,nextPage:Ie,lastPage:me}=function(J,Te,_e,ve,xe,D){const{props:G,emit:Q,proxy:{$q:ie}}=J,re=w(()=>ve.value===!0?_e.value.rowsNumber||0:D.value),Me=w(()=>{const{page:xt,rowsPerPage:Mi}=_e.value;return(xt-1)*Mi}),ge=w(()=>{const{page:xt,rowsPerPage:Mi}=_e.value;return xt*Mi}),De=w(()=>_e.value.page===1),Ne=w(()=>_e.value.rowsPerPage===0?1:Math.max(1,Math.ceil(re.value/_e.value.rowsPerPage))),bt=w(()=>ge.value===0||_e.value.page>=Ne.value),It=w(()=>(G.rowsPerPageOptions.includes(Te.value.rowsPerPage)?G.rowsPerPageOptions:[Te.value.rowsPerPage].concat(G.rowsPerPageOptions)).map(xt=>({label:xt===0?ie.lang.table.allRows:""+xt,value:xt})));return se(Ne,(xt,Mi)=>{if(xt===Mi)return;const tr=_e.value.page;xt&&!tr?xe({page:1}):xt<tr&&xe({page:xt})}),G["onUpdate:pagination"]!==void 0&&Q("update:pagination",{..._e.value}),{firstRowIndex:Me,lastRowIndex:ge,isFirstPage:De,isLastPage:bt,pagesNumber:Ne,computedRowsPerPageOptions:It,computedRowsNumber:re,firstPage:function(){xe({page:1})},prevPage:function(){const{page:xt}=_e.value;xt>1&&xe({page:xt-1})},nextPage:function(){const{page:xt,rowsPerPage:Mi}=_e.value;ge.value>0&&xt*Mi<re.value&&xe({page:xt+1})},lastPage:function(){xe({page:Ne.value})}}}(n,g,y,_,m,A),we=w(()=>q.value.length===0),qe=w(()=>{const J={};return R_.forEach(Te=>{J[Te]=t[Te]}),J.virtualScrollItemSize===void 0&&(J.virtualScrollItemSize=t.dense===!0?28:48),J});function Ge(){if(t.grid===!0)return function(){const _e=e.item!==void 0?e.item:ve=>{const xe=ve.cols.map(G=>x("div",{class:"q-table__grid-item-row"},[x("div",{class:"q-table__grid-item-title"},[G.label]),x("div",{class:"q-table__grid-item-value"},[G.value])]));if(P.value===!0){const G=e["body-selection"],Q=G!==void 0?G(ve):[x(Dl,{modelValue:ve.selected,color:t.color,dark:o.value,dense:t.dense,"onUpdate:modelValue":(ie,re)=>{B([ve.key],[ve.row],ie,re)}})];xe.unshift(x("div",{class:"q-table__grid-item-row"},Q),x(lo,{dark:o.value}))}const D={class:["q-table__grid-item-card"+d.value,t.cardClass],style:t.cardStyle};return t.onRowClick===void 0&&t.onRowDblclick===void 0||(D.class[0]+=" cursor-pointer",t.onRowClick!==void 0&&(D.onClick=G=>{i("RowClick",G,ve.row,ve.pageIndex)}),t.onRowDblclick!==void 0&&(D.onDblclick=G=>{i("RowDblclick",G,ve.row,ve.pageIndex)})),x("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(ve.selected===!0?" q-table__grid-item--selected":"")},[x("div",D,xe)])};return x("div",{class:["q-table__grid-content row",t.cardContainerClass],style:t.cardContainerStyle},q.value.map((ve,xe)=>_e(Se({key:l.value(ve),row:ve,pageIndex:xe}))))}();const J=t.hideHeader!==!0?Pe:null;if(h.value===!0){const _e=e["top-row"],ve=e["bottom-row"],xe={default:D=>X(D.item,e.body,D.index)};if(_e!==void 0){const D=x("tbody",_e({cols:H.value}));xe.before=J===null?()=>D:()=>[J()].concat(D)}else J!==null&&(xe.before=J);return ve!==void 0&&(xe.after=()=>x("tbody",ve({cols:H.value}))),x($L,{ref:c,class:t.tableClass,style:t.tableStyle,...qe.value,scrollTarget:t.virtualScrollTarget,items:q.value,type:"__qtable",tableColspan:ne.value,onVirtualScroll:oe},xe)}const Te=[de()];return J!==null&&Te.unshift(J()),AS({class:["q-table__middle scroll",t.tableClass],style:t.tableStyle},Te)}function oe(J){i("virtualScroll",J)}function ce(){return[x(IL,{class:"q-table__linear-progress",color:t.color,dark:o.value,indeterminate:!0,trackColor:"transparent"})]}function X(J,Te,_e){const ve=l.value(J),xe=O(ve);if(Te!==void 0)return Te(Se({key:ve,row:J,pageIndex:_e,__trClass:xe?"selected":""}));const D=e["body-cell"],G=H.value.map(ie=>{const re=e[`body-cell-${ie.name}`],Me=re!==void 0?re:D;return Me!==void 0?Me(function(ge){return Le(ge),li(ge,"value",()=>Fe(ge.col,ge.row)),ge}({key:ve,row:J,pageIndex:_e,col:ie})):x("td",{class:ie.__tdClass(J),style:ie.__tdStyle(J)},Fe(ie,J))});if(P.value===!0){const ie=e["body-selection"],re=ie!==void 0?ie(function(Me){return Le(Me),Me}({key:ve,row:J,pageIndex:_e})):[x(Dl,{modelValue:xe,color:t.color,dark:o.value,dense:t.dense,"onUpdate:modelValue":(Me,ge)=>{B([ve],[J],Me,ge)}})];G.unshift(x("td",{class:"q-table--col-auto-width"},re))}const Q={key:ve,class:{selected:xe}};return t.onRowClick!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onClick=ie=>{i("rowClick",ie,J,_e)}),t.onRowDblclick!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onDblclick=ie=>{i("rowDblclick",ie,J,_e)}),t.onRowContextmenu!==void 0&&(Q.class["cursor-pointer"]=!0,Q.onContextmenu=ie=>{i("rowContextmenu",ie,J,_e)}),x("tr",Q,G)}function de(){const J=e.body,Te=e["top-row"],_e=e["bottom-row"];let ve=q.value.map((xe,D)=>X(xe,J,D));return Te!==void 0&&(ve=Te({cols:H.value}).concat(ve)),_e!==void 0&&(ve=ve.concat(_e({cols:H.value}))),x("tbody",ve)}function Se(J){return Le(J),J.cols=J.cols.map(Te=>li({...Te},"value",()=>Fe(Te,J.row))),J}function Le(J){Object.assign(J,{cols:H.value,colsMap:ee.value,sort:z,rowIndex:j.value+J.pageIndex,color:t.color,dark:o.value,dense:t.dense}),P.value===!0&&li(J,"selected",()=>O(J.key),(Te,_e)=>{B([J.key],[J.row],Te,_e)}),li(J,"expand",()=>S(J.key),Te=>{k(J.key,Te)})}function Fe(J,Te){const _e=typeof J.field=="function"?J.field(Te):Te[J.field];return J.format!==void 0?J.format(_e,Te):_e}const K=w(()=>({pagination:y.value,pagesNumber:ye.value,isFirstPage:W.value,isLastPage:U.value,firstPage:fe,prevPage:Ce,nextPage:Ie,lastPage:me,inFullscreen:a.value,toggleFullscreen:s}));function ae(){const J=e.top,Te=e["top-left"],_e=e["top-right"],ve=e["top-selection"],xe=P.value===!0&&ve!==void 0&&E.value>0,D="q-table__top relative-position row items-center";if(J!==void 0)return x("div",{class:D},[J(K.value)]);let G;return xe===!0?G=ve(K.value).slice():(G=[],Te!==void 0?G.push(x("div",{class:"q-table__control"},[Te(K.value)])):t.title&&G.push(x("div",{class:"q-table__control"},[x("div",{class:["q-table__title",t.titleClass]},t.title)]))),_e!==void 0&&(G.push(x("div",{class:"q-table__separator col"})),G.push(x("div",{class:"q-table__control"},[_e(K.value)]))),G.length!==0?x("div",{class:D},G):void 0}const pe=w(()=>I.value===!0?null:M.value);function Pe(){const J=function(){const Te=e.header,_e=e["header-cell"];if(Te!==void 0)return Te(He({header:!0})).slice();const ve=H.value.map(xe=>{const D=e[`header-cell-${xe.name}`],G=D!==void 0?D:_e,Q=He({col:xe});return G!==void 0?G(Q):x(BL,{key:xe.name,props:Q},()=>xe.label)});if(T.value===!0&&t.grid!==!0)ve.unshift(x("th",{class:"q-table--col-auto-width"}," "));else if(R.value===!0){const xe=e["header-selection"],D=xe!==void 0?xe(He({})):[x(Dl,{color:t.color,modelValue:pe.value,dark:o.value,dense:t.dense,"onUpdate:modelValue":Ze})];ve.unshift(x("th",{class:"q-table--col-auto-width"},D))}return[x("tr",{class:t.tableHeaderClass,style:t.tableHeaderStyle},ve)]}();return t.loading===!0&&e.loading===void 0&&J.push(x("tr",{class:"q-table__progress"},[x("th",{class:"relative-position",colspan:ne.value},ce())])),x("thead",J)}function He(J){return Object.assign(J,{cols:H.value,sort:z,colsMap:ee.value,color:t.color,dark:o.value,dense:t.dense}),R.value===!0&&li(J,"selected",()=>pe.value,Ze),J}function Ze(J){I.value===!0&&(J=!1),B(q.value.map(l.value),q.value,J)}const Re=w(()=>{const J=[t.iconFirstPage||r.iconSet.table.firstPage,t.iconPrevPage||r.iconSet.table.prevPage,t.iconNextPage||r.iconSet.table.nextPage,t.iconLastPage||r.iconSet.table.lastPage];return r.lang.rtl===!0?J.reverse():J});function Ye(){if(t.hideBottom===!0)return;if(we.value===!0){if(t.hideNoData===!0)return;const _e=t.loading===!0?t.loadingLabel||r.lang.table.loading:t.filter?t.noResultsLabel||r.lang.table.noResults:t.noDataLabel||r.lang.table.noData,ve=e["no-data"],xe=ve!==void 0?[ve({message:_e,icon:r.iconSet.table.warning,filter:t.filter})]:[x(gt,{class:"q-table__bottom-nodata-icon",name:r.iconSet.table.warning}),_e];return x("div",{class:Rc+" q-table__bottom--nodata"},xe)}const J=e.bottom;if(J!==void 0)return x("div",{class:Rc},[J(K.value)]);const Te=t.hideSelectedBanner!==!0&&P.value===!0&&E.value>0?[x("div",{class:"q-table__control"},[x("div",[(t.selectedRowsLabel||r.lang.table.selectedRecords)(E.value)])])]:[];return t.hidePagination!==!0?x("div",{class:Rc+" justify-end"},function(_e){let ve;const{rowsPerPage:xe}=y.value,D=t.paginationLabel||r.lang.table.pagination,G=e.pagination,Q=t.rowsPerPageOptions.length>1;if(_e.push(x("div",{class:"q-table__separator col"})),Q===!0&&_e.push(x("div",{class:"q-table__control"},[x("span",{class:"q-table__bottom-item"},[t.rowsPerPageLabel||r.lang.table.recordsPerPage]),x(OL,{class:"q-table__select inline q-table__bottom-item",color:t.color,modelValue:xe,options:ue.value,displayValue:xe===0?r.lang.table.allRows:xe,dark:o.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":We})])),G!==void 0)ve=G(K.value);else if(ve=[x("span",xe!==0?{class:"q-table__bottom-item"}:{},[xe?D(j.value+1,Math.min(Z.value,he.value),he.value):D(1,A.value,he.value)])],xe!==0&&ye.value>1){const ie={color:t.color,round:!0,dense:!0,flat:!0};t.dense===!0&&(ie.size="sm"),ye.value>2&&ve.push(x(vt,{key:"pgFirst",...ie,icon:Re.value[0],disable:W.value,onClick:fe})),ve.push(x(vt,{key:"pgPrev",...ie,icon:Re.value[1],disable:W.value,onClick:Ce}),x(vt,{key:"pgNext",...ie,icon:Re.value[2],disable:U.value,onClick:Ie})),ye.value>2&&ve.push(x(vt,{key:"pgLast",...ie,icon:Re.value[3],disable:U.value,onClick:me}))}return _e.push(x("div",{class:"q-table__control"},ve)),_e}(Te)):Te.length!==0?x("div",{class:Rc},Te):void 0}function We(J){m({page:1,rowsPerPage:J.value})}return Object.assign(n.proxy,{requestServerInteraction:b,setPagination:m,firstPage:fe,prevPage:Ce,nextPage:Ie,lastPage:me,isRowSelected:O,clearSelection:V,isRowExpanded:S,setExpanded:C,sort:z,resetVirtualScroll:function(){h.value===!0&&c.value.reset()},scrollTo:function(J,Te){if(c.value!==null)return void c.value.scrollTo(J,Te);J=parseInt(J,10);const _e=u.value.querySelector(`tbody tr:nth-of-type(${J+1})`);if(_e!==null){const ve=u.value.querySelector(".q-table__middle.scroll"),xe=_e.offsetTop-t.virtualScrollStickySizeStart,D=xe<ve.scrollTop?"decrease":"increase";ve.scrollTop=xe,i("virtualScroll",{index:J,from:0,to:g.value.rowsPerPage-1,direction:D})}},getCellValue:Fe}),a2(n.proxy,{filteredSortedRows:()=>L.value,computedRows:()=>q.value,computedRowsNumber:()=>he.value}),()=>{const J=[ae()],Te={ref:u,class:f.value};return t.grid===!0?J.push(function(){const _e=t.gridHeader===!0?[x("table",{class:"q-table"},[Pe()])]:t.loading===!0&&e.loading===void 0?ce():void 0;return x("div",{class:"q-table__middle"},_e)}()):Object.assign(Te,{class:[Te.class,t.cardClass],style:t.cardStyle}),J.push(Ge(),Ye()),t.loading===!0&&e.loading!==void 0&&J.push(e.loading()),x("div",Te,J)}}}),le({name:"QTr",props:{props:Object,noHover:Boolean},setup(t,{slots:e}){const i=w(()=>"q-tr"+(t.props===void 0||t.props.header===!0?"":" "+t.props.__trClass)+(t.noHover===!0?" q-tr--no-hover":""));return()=>x("tr",{class:i.value},ze(e.default))}}),le({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(t,{slots:e}){const i=ke(),n=w(()=>"q-td"+(t.autoWidth===!0?" q-table--col-auto-width":"")+(t.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(t.props===void 0)return x("td",{class:n.value},ze(e.default));const r=i.vnode.key,o=(t.props.colsMap!==void 0?t.props.colsMap[r]:null)||t.props.col;if(o===void 0)return;const{row:a}=t.props;return x("td",{class:n.value+o.__tdClass(a),style:o.__tdStyle(a)},ze(e.default))}}}),le({name:"QRouteTab",props:{...Fu,...J2},emits:Q2,setup(t,{slots:e,emit:i}){const n=fd({useDisableForRouterLinkProps:!1}),{renderTab:r,$tabs:o}=eS(t,e,i,{exact:w(()=>t.exact),...n});return se(()=>`${t.name} | ${t.exact} | ${(n.resolvedLink.value||{}).href}`,o.verifyRouteModel),()=>r(n.linkTag.value,n.linkAttrs.value)}}),le({name:"QTime",props:{...dt,...mn,...Hh,modelValue:{required:!0,validator:t=>typeof t=="string"||t===null},mask:{...Hh.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:rS,setup(t,{slots:e,emit:i}){const n=ke(),{$q:r}=n.proxy,o=pt(t,r),{tabindex:a,headerClass:s,getLocale:l,getCurrentDate:u}=oS(t,r),c=go(Ou(t));let h,d;const p=$(null),f=w(()=>t.calendar!=="persian"&&t.mask!==null?t.mask:"HH:mm"+(t.withSeconds===!0?":ss":"")),g=w(()=>l()),y=w(()=>function(){if(typeof t.defaultDate!="string"){const K=u(!0);return K.dateHash=ar(K),K}return kl(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}()),_=kl(t.modelValue,f.value,g.value,t.calendar,y.value),b=$(function(K,ae){return K.hour!==null&&K.minute===null?"minute":"hour"}(_)),m=$(_),v=$(_.hour===null||_.hour<12),S=w(()=>"q-time q-time--"+(t.landscape===!0?"landscape":"portrait")+(o.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),C=w(()=>{const K=m.value;return{hour:K.hour===null?"--":k.value===!0?yt(K.hour):String(v.value===!0?K.hour===0?12:K.hour:K.hour>12?K.hour-12:K.hour),minute:K.minute===null?"--":yt(K.minute),second:K.second===null?"--":yt(K.second)}}),k=w(()=>t.format24h!==null?t.format24h:r.lang.date.format24h),L=w(()=>{const K=b.value==="hour",ae=K===!0?12:60,pe=m.value[b.value];let Pe=`rotate(${Math.round(pe*(360/ae))-180}deg) translateX(-50%)`;return K===!0&&k.value===!0&&m.value.hour>=12&&(Pe+=" scale(.7)"),{transform:Pe}}),A=w(()=>m.value.hour!==null),q=w(()=>A.value===!0&&m.value.minute!==null),P=w(()=>t.hourOptions!==void 0?K=>t.hourOptions.includes(K):t.options!==void 0?K=>t.options(K,null,null):null),T=w(()=>t.minuteOptions!==void 0?K=>t.minuteOptions.includes(K):t.options!==void 0?K=>t.options(m.value.hour,K,null):null),R=w(()=>t.secondOptions!==void 0?K=>t.secondOptions.includes(K):t.options!==void 0?K=>t.options(m.value.hour,m.value.minute,K):null),M=w(()=>{if(P.value===null)return null;const K=H(0,11,P.value),ae=H(12,11,P.value);return{am:K,pm:ae,values:K.values.concat(ae.values)}}),I=w(()=>T.value!==null?H(0,59,T.value):null),E=w(()=>R.value!==null?H(0,59,R.value):null),O=w(()=>{switch(b.value){case"hour":return M.value;case"minute":return I.value;case"second":return E.value}}),V=w(()=>{let K,ae,pe=0,Pe=1;const He=O.value!==null?O.value.values:void 0;b.value==="hour"?k.value===!0?(K=0,ae=23):(K=0,ae=11,v.value===!1&&(pe=12)):(K=0,ae=55,Pe=5);const Ze=[];for(let Re=K,Ye=K;Re<=ae;Re+=Pe,Ye++){const We=Re+pe,J=He!==void 0&&He.includes(We)===!1,Te=b.value==="hour"&&Re===0?k.value===!0?"00":"12":Re;Ze.push({val:We,index:Ye,disable:J,label:Te})}return Ze}),B=w(()=>[[cn,z,void 0,{stop:!0,prevent:!0,mouse:!0}]]);function F(){const K={...u(),...ZL()};Se(K),Object.assign(m.value,K),b.value="hour"}function H(K,ae,pe){const Pe=Array.apply(null,{length:ae+1}).map((He,Ze)=>{const Re=Ze+K;return{index:Re,val:pe(Re)===!0}}).filter(He=>He.val===!0).map(He=>He.index);return{min:Pe[0],max:Pe[Pe.length-1],values:Pe,threshold:ae+1}}function ee(K,ae,pe){const Pe=Math.abs(K-ae);return Math.min(Pe,pe-Pe)}function ne(K,{min:ae,max:pe,values:Pe,threshold:He}){if(K===ae)return ae;if(K<ae||K>pe)return ee(K,ae,He)<=ee(K,pe,He)?ae:pe;const Ze=Pe.findIndex(We=>K<=We),Re=Pe[Ze-1],Ye=Pe[Ze];return K-Re<=Ye-K?Re:Ye}function te(){return to(n)===!0||O.value!==null&&(O.value.values.length===0||b.value==="hour"&&k.value!==!0&&M.value[v.value===!0?"am":"pm"].values.length===0)}function N(){const K=p.value,{top:ae,left:pe,width:Pe}=K.getBoundingClientRect(),He=Pe/2;return{top:ae+He,left:pe+He,dist:.7*He}}function z(K){if(te()!==!0){if(K.isFirst===!0)return h=N(),void(d=Z(K.evt,h));d=Z(K.evt,h,d),K.isFinal===!0&&(h=!1,d=null,j())}}function j(){b.value==="hour"?b.value="minute":t.withSeconds&&b.value==="minute"&&(b.value="second")}function Z(K,ae,pe){const Pe=qi(K),He=Math.abs(Pe.top-ae.top),Ze=Math.sqrt(Math.pow(Math.abs(Pe.top-ae.top),2)+Math.pow(Math.abs(Pe.left-ae.left),2));let Re,Ye=Math.asin(He/Ze)*(180/Math.PI);if(Ye=Pe.top<ae.top?ae.left<Pe.left?90-Ye:270+Ye:ae.left<Pe.left?Ye+90:270-Ye,b.value==="hour"){if(Re=Ye/30,M.value!==null){const We=k.value!==!0?v.value===!0:M.value.am.values.length!==0&&M.value.pm.values.length!==0?Ze>=ae.dist:M.value.am.values.length!==0;Re=ne(Re+(We===!0?0:12),M.value[We===!0?"am":"pm"])}else Re=Math.round(Re),k.value===!0?Ze<ae.dist?Re<12&&(Re+=12):Re===12&&(Re=0):v.value===!0&&Re===12?Re=0:v.value===!1&&Re!==12&&(Re+=12);k.value===!0&&(v.value=Re<12)}else Re=Math.round(Ye/6)%60,b.value==="minute"&&I.value!==null?Re=ne(Re,I.value):b.value==="second"&&E.value!==null&&(Re=ne(Re,E.value));return pe!==Re&&Ge[b.value](Re),Re}se(()=>t.modelValue,K=>{const ae=kl(K,f.value,g.value,t.calendar,y.value);ae.dateHash===m.value.dateHash&&ae.timeHash===m.value.timeHash||(m.value=ae,ae.hour===null?b.value="hour":v.value=ae.hour<12)}),se([f,g],()=>{lt(()=>{Se()})});const W={hour(){b.value="hour"},minute(){b.value="minute"},second(){b.value="second"}};function U(K){K.keyCode===13&&oe()}function ye(K){K.keyCode===13&&ce()}function ue(K){te()!==!0&&(r.platform.is.desktop!==!0&&Z(K,N()),j())}function he(K){te()!==!0&&Z(K,N())}function fe(K){if(K.keyCode===13)b.value="hour";else if([37,39].includes(K.keyCode)){const ae=K.keyCode===37?-1:1;if(M.value!==null){const pe=k.value===!0?M.value.values:M.value[v.value===!0?"am":"pm"].values;if(pe.length===0)return;if(m.value.hour===null)me(pe[0]);else{const Pe=(pe.length+pe.indexOf(m.value.hour)+ae)%pe.length;me(pe[Pe])}}else{const pe=k.value===!0?24:12;me((k.value!==!0&&v.value===!1?12:0)+(24+(m.value.hour===null?-ae:m.value.hour)+ae)%pe)}}}function Ce(K){if(K.keyCode===13)b.value="minute";else if([37,39].includes(K.keyCode)){const ae=K.keyCode===37?-1:1;if(I.value!==null){const pe=I.value.values;if(pe.length===0)return;if(m.value.minute===null)we(pe[0]);else{const Pe=(pe.length+pe.indexOf(m.value.minute)+ae)%pe.length;we(pe[Pe])}}else we((60+(m.value.minute===null?-ae:m.value.minute)+ae)%60)}}function Ie(K){if(K.keyCode===13)b.value="second";else if([37,39].includes(K.keyCode)){const ae=K.keyCode===37?-1:1;if(E.value!==null){const pe=E.value.values;if(pe.length===0)return;if(m.value.seconds===null)qe(pe[0]);else{const Pe=(pe.length+pe.indexOf(m.value.second)+ae)%pe.length;qe(pe[Pe])}}else qe((60+(m.value.second===null?-ae:m.value.second)+ae)%60)}}function me(K){m.value.hour!==K&&(m.value.hour=K,de())}function we(K){m.value.minute!==K&&(m.value.minute=K,de())}function qe(K){m.value.second!==K&&(m.value.second=K,de())}const Ge={hour:me,minute:we,second:qe};function oe(){v.value===!1&&(v.value=!0,m.value.hour!==null&&(m.value.hour-=12,de()))}function ce(){v.value===!0&&(v.value=!1,m.value.hour!==null&&(m.value.hour+=12,de()))}function X(K){const ae=t.modelValue;b.value!==K&&ae!=null&&ae!==""&&typeof ae!="string"&&(b.value=K)}function de(){return P.value!==null&&P.value(m.value.hour)!==!0?(m.value=kl(),void X("hour")):T.value!==null&&T.value(m.value.minute)!==!0?(m.value.minute=null,m.value.second=null,void X("minute")):t.withSeconds===!0&&R.value!==null&&R.value(m.value.second)!==!0?(m.value.second=null,void X("second")):void(m.value.hour===null||m.value.minute===null||t.withSeconds===!0&&m.value.second===null||Se())}function Se(K){const ae=Object.assign({...m.value},K),pe=t.calendar==="persian"?yt(ae.hour)+":"+yt(ae.minute)+(t.withSeconds===!0?":"+yt(ae.second):""):uS(new Date(ae.year,ae.month===null?null:ae.month-1,ae.day,ae.hour,ae.minute,ae.second,ae.millisecond),f.value,g.value,ae.year,ae.timezoneOffset);ae.changed=pe!==t.modelValue,i("update:modelValue",pe,ae)}function Le(){const K=[x("div",{class:"q-time__link "+(b.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onClick:W.hour,onKeyup:fe},C.value.hour),x("div",":"),x("div",A.value===!0?{class:"q-time__link "+(b.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onKeyup:Ce,onClick:W.minute}:{class:"q-time__link"},C.value.minute)];t.withSeconds===!0&&K.push(x("div",":"),x("div",q.value===!0?{class:"q-time__link "+(b.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onKeyup:Ie,onClick:W.second}:{class:"q-time__link"},C.value.second));const ae=[x("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},K)];return k.value===!1&&ae.push(x("div",{class:"q-time__header-ampm column items-between no-wrap"},[x("div",{class:"q-time__link "+(v.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onClick:oe,onKeyup:U},"AM"),x("div",{class:"q-time__link "+(v.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:a.value,onClick:ce,onKeyup:ye},"PM")])),x("div",{class:"q-time__header flex flex-center no-wrap "+s.value},ae)}function Fe(){const K=m.value[b.value];return x("div",{class:"q-time__content col relative-position"},[x(si,{name:"q-transition--scale"},()=>x("div",{key:"clock"+b.value,class:"q-time__container-parent absolute-full"},[x("div",{ref:p,class:"q-time__container-child fit overflow-hidden"},[Vi(x("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:ue,onMousedown:he},[x("div",{class:"q-time__clock-circle fit"},[x("div",{class:"q-time__clock-pointer"+(m.value[b.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:L.value}),V.value.map(ae=>x("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${ae.index}`+(ae.val===K?" q-time__clock-position--active "+s.value:ae.disable===!0?" q-time__clock-position--disable":"")},[x("span",ae.label)]))])]),B.value)])])),t.nowBtn===!0?x(vt,{class:"q-time__now-button absolute",icon:r.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:a.value,onClick:F}):null])}return n.proxy.setNow=F,()=>{const K=[Fe()],ae=ze(e.default);return ae!==void 0&&K.push(x("div",{class:"q-time__actions"},ae)),t.name!==void 0&&t.disable!==!0&&c(K,"push"),x("div",{class:S.value,tabindex:-1},[Le(),x("div",{class:"q-time__main col overflow-auto"},K)])}}}),le({name:"QTimeline",props:{...dt,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},layout:{type:String,default:"dense",validator:t=>["dense","comfortable","loose"].includes(t)}},setup(t,{slots:e}){const i=ke(),n=pt(t,i.proxy.$q);uo(I1,t);const r=w(()=>`q-timeline q-timeline--${t.layout} q-timeline--${t.layout}--${t.side}`+(n.value===!0?" q-timeline--dark":""));return()=>x("ul",{class:r.value},ze(e.default))}}),le({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(t,{slots:e}){const i=Ni(I1,wt);if(i===wt)return wt;const n=w(()=>`q-timeline__entry q-timeline__entry--${t.side}`+(t.icon!==void 0||t.avatar!==void 0?" q-timeline__entry--icon":"")),r=w(()=>`q-timeline__dot text-${t.color||i.color}`),o=w(()=>i.layout==="comfortable"&&i.side==="left");return()=>{const a=Ru(e.default,[]);if(t.body!==void 0&&a.unshift(t.body),t.heading===!0){const u=[x("div"),x("div"),x(t.tag,{class:"q-timeline__heading-title"},a)];return x("div",{class:"q-timeline__heading"},o.value===!0?u.reverse():u)}let s;t.icon!==void 0?s=[x(gt,{class:"row items-center justify-center",name:t.icon})]:t.avatar!==void 0&&(s=[x("img",{class:"q-timeline__dot-img",src:t.avatar})]);const l=[x("div",{class:"q-timeline__subtitle"},[x("span",{},ze(e.subtitle,[t.subtitle]))]),x("div",{class:r.value},s),x("div",{class:"q-timeline__content"},[x("h6",{class:"q-timeline__title"},ze(e.title,[t.title]))].concat(a))];return x("li",{class:n.value},o.value===!0?l.reverse():l)}}}),le({name:"QToolbar",props:{inset:Boolean},setup(t,{slots:e}){const i=w(()=>"q-toolbar row no-wrap items-center"+(t.inset===!0?" q-toolbar--inset":""));return()=>x("div",{class:i.value,role:"toolbar"},ze(e.default))}}),le({name:"QToolbarTitle",props:{shrink:Boolean},setup(t,{slots:e}){const i=w(()=>"q-toolbar__title ellipsis"+(t.shrink===!0?" col-shrink":""));return()=>x("div",{class:i.value},ze(e.default))}});var QL=["none","strict","leaf","leaf-filtered"];function B_(t){return(100*t).toFixed(2)+"%"}le({name:"QTree",props:{...dt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:t=>QL.includes(t)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:{},noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(t,{slots:e,emit:i}){const{proxy:n}=ke(),{$q:r}=n,o=pt(t,r),a=$({}),s=$(t.ticked||[]),l=$(t.expanded||[]);let u={};_u(()=>{u={}});const c=w(()=>"q-tree q-tree--"+(t.dense===!0?"dense":"standard")+(t.noConnectors===!0?" q-tree--no-connectors":"")+(o.value===!0?" q-tree--dark":"")+(t.color!==void 0?` text-${t.color}`:"")),h=w(()=>t.selected!==void 0),d=w(()=>t.icon||r.iconSet.tree.icon),p=w(()=>t.controlColor||t.color),f=w(()=>t.textColor!==void 0?` text-${t.textColor}`:""),g=w(()=>{const M=t.selectedColor||t.color;return M?` text-${M}`:""}),y=w(()=>t.filterMethod!==void 0?t.filterMethod:(M,I)=>{const E=I.toLowerCase();return M[t.labelKey]&&M[t.labelKey].toLowerCase().indexOf(E)!==-1}),_=w(()=>{const M={},I=(E,O)=>{const V=E.tickStrategy||(O?O.tickStrategy:t.tickStrategy),B=E[t.nodeKey],F=E[t.childrenKey]&&Array.isArray(E[t.childrenKey])&&E[t.childrenKey].length!==0,H=E.disabled!==!0&&h.value===!0&&E.selectable!==!1,ee=E.disabled!==!0&&E.expandable!==!1,ne=V!=="none",te=V==="strict",N=V==="leaf-filtered",z=V==="leaf"||V==="leaf-filtered";let j=E.disabled!==!0&&E.tickable!==!1;z===!0&&j===!0&&O&&O.tickable!==!0&&(j=!1);let Z=E.lazy;Z===!0&&a.value[B]!==void 0&&Array.isArray(E[t.childrenKey])===!0&&(Z=a.value[B]);const W={key:B,parent:O,isParent:F,lazy:Z,disabled:E.disabled,link:E.disabled!==!0&&(H===!0||ee===!0&&(F===!0||Z===!0)),children:[],matchesFilter:!t.filter||y.value(E,t.filter),selected:B===t.selected&&H===!0,selectable:H,expanded:F===!0&&l.value.includes(B),expandable:ee,noTick:E.noTick===!0||te!==!0&&Z&&Z!=="loaded",tickable:j,tickStrategy:V,hasTicking:ne,strictTicking:te,leafFilteredTicking:N,leafTicking:z,ticked:(te===!0||F!==!0)&&s.value.includes(B)};if(M[B]=W,F===!0&&(W.children=E[t.childrenKey].map(U=>I(U,W)),t.filter&&(W.matchesFilter!==!0?W.matchesFilter=W.children.some(U=>U.matchesFilter):W.noTick!==!0&&W.disabled!==!0&&W.tickable===!0&&N===!0&&W.children.every(U=>U.matchesFilter!==!0||U.noTick===!0||U.tickable!==!0)===!0&&(W.tickable=!1)),W.matchesFilter===!0&&(W.noTick!==!0&&te!==!0&&W.children.every(U=>U.noTick)===!0&&(W.noTick=!0),z))){if(W.ticked=!1,W.indeterminate=W.children.some(U=>U.indeterminate===!0),W.tickable=W.tickable===!0&&W.children.some(U=>U.tickable),W.indeterminate!==!0){const U=W.children.reduce((ye,ue)=>ue.ticked===!0?ye+1:ye,0);U===W.children.length?W.ticked=!0:U>0&&(W.indeterminate=!0)}W.indeterminate===!0&&(W.indeterminateNextState=W.children.every(U=>U.tickable!==!0||U.ticked!==!0))}return W};return t.nodes.forEach(E=>I(E,null)),M});function b(M){const I=[].reduce,E=(O,V)=>O||!V?O:Array.isArray(V)===!0?I.call(Object(V),E,O):V[t.nodeKey]===M?V:V[t.childrenKey]?E(null,V[t.childrenKey]):void 0;return E(null,t.nodes)}function m(){const M=[],I=E=>{E[t.childrenKey]&&E[t.childrenKey].length!==0&&E.expandable!==!1&&E.disabled!==!0&&(M.push(E[t.nodeKey]),E[t.childrenKey].forEach(I))};t.nodes.forEach(I),t.expanded!==void 0?i("update:expanded",M):l.value=M}function v(M,I,E=b(M),O=_.value[M]){if(O.lazy&&O.lazy!=="loaded"){if(O.lazy==="loading")return;a.value[M]="loading",Array.isArray(E[t.childrenKey])!==!0&&(E[t.childrenKey]=[]),i("lazyLoad",{node:E,key:M,done:V=>{a.value[M]="loaded",E[t.childrenKey]=Array.isArray(V)===!0?V:[],lt(()=>{const B=_.value[M];B&&B.isParent===!0&&S(M,!0)})},fail:()=>{delete a.value[M],E[t.childrenKey].length===0&&delete E[t.childrenKey]}})}else O.isParent===!0&&O.expandable===!0&&S(M,I)}function S(M,I){let E=l.value;const O=t.expanded!==void 0;if(O===!0&&(E=E.slice()),I){if(t.accordion&&_.value[M]){const V=[];_.value[M].parent?_.value[M].parent.children.forEach(B=>{B.key!==M&&B.expandable===!0&&V.push(B.key)}):t.nodes.forEach(B=>{const F=B[t.nodeKey];F!==M&&V.push(F)}),V.length!==0&&(E=E.filter(B=>V.includes(B)===!1))}E=E.concat([M]).filter((V,B,F)=>F.indexOf(V)===B)}else E=E.filter(V=>V!==M);O===!0?i("update:expanded",E):l.value=E}function C(M,I){let E=s.value;const O=t.ticked!==void 0;O===!0&&(E=E.slice()),E=I?E.concat(M).filter((V,B,F)=>F.indexOf(V)===B):E.filter(V=>M.includes(V)===!1),O===!0&&i("update:ticked",E)}function k(M){return(t.filter?M.filter(I=>_.value[I[t.nodeKey]].matchesFilter):M).map(I=>function(E){const O=E[t.nodeKey],V=_.value[O],B=E.header&&e[`header-${E.header}`]||e["default-header"],F=V.isParent===!0?k(E[t.childrenKey]):[],H=F.length!==0||V.lazy&&V.lazy!=="loaded";let ee=E.body&&e[`body-${E.body}`]||e["default-body"];const ne=B!==void 0||ee!==void 0?function(te,N,z){const j={tree:n,node:te,key:z,color:t.color,dark:o.value};return li(j,"expanded",()=>N.expanded,Z=>{Z!==N.expanded&&v(z,Z)}),li(j,"ticked",()=>N.ticked,Z=>{Z!==N.ticked&&C([z],Z)}),j}(E,V,O):null;return ee!==void 0&&(ee=x("div",{class:"q-tree__node-body relative-position"},[x("div",{class:f.value},[ee(ne)])])),x("div",{key:O,class:"q-tree__node relative-position q-tree__node--"+(H===!0?"parent":"child")},[x("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(V.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(V.selected===!0?" q-tree__node--selected":"")+(V.disabled===!0?" q-tree__node--disabled":""),tabindex:V.link===!0?0:-1,ariaExpanded:F.length>0?V.expanded:null,role:"treeitem",onClick:te=>{T(E,V,te)},onKeypress(te){la(te)!==!0&&(te.keyCode===13?T(E,V,te,!0):te.keyCode===32&&R(E,V,te,!0))}},[x("div",{class:"q-focus-helper",tabindex:-1,ref:te=>{u[V.key]=te}}),V.lazy==="loading"?x(Fn,{class:"q-tree__spinner",color:p.value}):H===!0?x(gt,{class:"q-tree__arrow"+(V.expanded===!0?" q-tree__arrow--rotate":""),name:d.value,onClick(te){R(E,V,te)}}):null,V.hasTicking===!0&&V.noTick!==!0?x(Dl,{class:"q-tree__tickbox",modelValue:V.indeterminate===!0?null:V.ticked,color:p.value,dark:o.value,dense:!0,keepColor:!0,disable:V.tickable!==!0,onKeydown:Ke,"onUpdate:modelValue":te=>{(function(N,z){if(N.indeterminate===!0&&(z=N.indeterminateNextState),N.strictTicking)C([N.key],z);else if(N.leafTicking){const j=[],Z=W=>{W.isParent?(z!==!0&&W.noTick!==!0&&W.tickable===!0&&j.push(W.key),W.leafTicking===!0&&W.children.forEach(Z)):W.noTick===!0||W.tickable!==!0||W.leafFilteredTicking===!0&&W.matchesFilter!==!0||j.push(W.key)};Z(N),C(j,z)}})(V,te)}}):null,x("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(V.selected===!0?g.value:f.value)},[B?B(ne):[L(E),x("div",E[t.labelKey])]])]),H===!0?t.noTransition===!0?V.expanded===!0?x("div",{class:"q-tree__node-collapsible"+f.value,key:`${O}__q`},[ee,x("div",{class:"q-tree__children"+(V.disabled===!0?" q-tree__node--disabled":""),role:"group"},F)]):null:x(Kv,{duration:t.duration,onShow:A,onHide:q},()=>Vi(x("div",{class:"q-tree__node-collapsible"+f.value,key:`${O}__q`},[ee,x("div",{class:"q-tree__children"+(V.disabled===!0?" q-tree__node--disabled":""),role:"group"},F)]),[[ah,V.expanded]])):ee])}(I))}function L(M){if(M.icon!==void 0)return x(gt,{class:"q-tree__icon q-mr-sm",name:M.icon,color:M.iconColor});const I=M.img||M.avatar;return I?x("img",{class:`q-tree__${M.img?"img":"avatar"} q-mr-sm`,src:I}):void 0}function A(){i("afterShow")}function q(){i("afterHide")}function P(M){const I=u[M];I&&I.focus()}function T(M,I,E,O){O!==!0&&I.selectable!==!1&&P(I.key),h.value&&I.selectable?t.noSelectionUnset===!1?i("update:selected",I.key!==t.selected?I.key:null):I.key!==t.selected&&i("update:selected",I.key===void 0?null:I.key):R(M,I,E,O),typeof M.handler=="function"&&M.handler(M)}function R(M,I,E,O){E!==void 0&&Ke(E),O!==!0&&I.selectable!==!1&&P(I.key),v(I.key,!I.expanded,M,I)}return se(()=>t.ticked,M=>{s.value=M}),se(()=>t.expanded,M=>{l.value=M}),t.defaultExpandAll===!0&&m(),Object.assign(n,{getNodeByKey:b,getTickedNodes:function(){return s.value.map(M=>b(M))},getExpandedNodes:function(){return l.value.map(M=>b(M))},isExpanded:function(M){return!(!M||!_.value[M])&&_.value[M].expanded},collapseAll:function(){t.expanded!==void 0?i("update:expanded",[]):l.value=[]},expandAll:m,setExpanded:v,isTicked:function(M){return!(!M||!_.value[M])&&_.value[M].ticked},setTicked:C}),()=>{const M=k(t.nodes);return x("div",{class:c.value,role:"tree"},M.length===0?t.filter?t.noResultsLabel||r.lang.tree.noResults:t.noNodesLabel||r.lang.tree.noNodes:M)}}});var JL={...dt,...bS,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},OS=[...xS,"start","finish","added","removed"],eI=()=>!0;function zS(t){const e={};return t.forEach(i=>{e[i]=eI}),e}var tI=zS(OS);function rr(t){return typeof t=="function"?t:()=>t}var iI={name:"QUploader",props:{url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>t=>t.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},emits:["factoryFailed","uploaded","failed","uploading"],injectPlugin:function({props:t,emit:e,helpers:i}){const n=$([]),r=$([]),o=$(0),a=w(()=>({url:rr(t.url),method:rr(t.method),headers:rr(t.headers),formFields:rr(t.formFields),fieldName:rr(t.fieldName),withCredentials:rr(t.withCredentials),sendRaw:rr(t.sendRaw),batch:rr(t.batch)}));let s;function l(c){if(o.value++,typeof t.factory!="function")return void u(c,{});const h=t.factory(c);if(h)if(typeof h.catch=="function"&&typeof h.then=="function"){r.value.push(h);const d=p=>{i.isAlive()===!0&&(r.value=r.value.filter(f=>f!==h),r.value.length===0&&(s=!1),i.queuedFiles.value=i.queuedFiles.value.concat(c),c.forEach(f=>{i.updateFileStatus(f,"failed")}),e("factoryFailed",p,c),o.value--)};h.then(p=>{s===!0?d(new Error("Aborted")):i.isAlive()===!0&&(r.value=r.value.filter(f=>f!==h),u(c,p))}).catch(d)}else u(c,h||{});else e("factoryFailed",new Error("QUploader: factory() does not return properly"),c),o.value--}function u(c,h){const d=new FormData,p=new XMLHttpRequest,f=(L,A)=>h[L]!==void 0?rr(h[L])(A):a.value[L](A),g=f("url",c);if(!g)return void o.value--;const y=f("formFields",c);y!==void 0&&y.forEach(L=>{d.append(L.name,L.value)});let _,b=0,m=0,v=0,S=0;p.upload.addEventListener("progress",L=>{if(_===!0)return;const A=Math.min(S,L.loaded);i.uploadedSize.value+=A-v,v=A;let q=v-m;for(let P=b;q>0&&P<c.length;P++){const T=c[P];if(!(q>T.size))return void i.updateFileStatus(T,"uploading",q);q-=T.size,b++,m+=T.size,i.updateFileStatus(T,"uploading",T.size)}},!1),p.onreadystatechange=()=>{p.readyState<4||(p.status&&p.status<400?(i.uploadedFiles.value=i.uploadedFiles.value.concat(c),c.forEach(L=>{i.updateFileStatus(L,"uploaded")}),e("uploaded",{files:c,xhr:p})):(_=!0,i.uploadedSize.value-=v,i.queuedFiles.value=i.queuedFiles.value.concat(c),c.forEach(L=>{i.updateFileStatus(L,"failed")}),e("failed",{files:c,xhr:p})),o.value--,n.value=n.value.filter(L=>L!==p))},p.open(f("method",c),g),f("withCredentials",c)===!0&&(p.withCredentials=!0);const C=f("headers",c);C!==void 0&&C.forEach(L=>{p.setRequestHeader(L.name,L.value)});const k=f("sendRaw",c);c.forEach(L=>{i.updateFileStatus(L,"uploading",0),k!==!0&&d.append(f("fieldName",L),L,L.name),L.xhr=p,L.__abort=()=>{p.abort()},S+=L.size}),e("uploading",{files:c,xhr:p}),n.value.push(p),k===!0?p.send(new Blob(c)):p.send(d)}return{isUploading:w(()=>o.value>0),isBusy:w(()=>r.value.length!==0),abort:function(){n.value.forEach(c=>{c.abort()}),r.value.length!==0&&(s=!0)},upload:function(){const c=i.queuedFiles.value.slice(0);i.queuedFiles.value=[],a.value.batch(c)?l(c):c.forEach(h=>{l([h])})}}}};function N_(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}(({name:t,props:e,emits:i,injectPlugin:n})=>{le({name:t,props:{...JL,...e},emits:Si(i)===!0?{...tI,...i}:[...OS,...i],setup:(r,{expose:o})=>function(a,s){const l=ke(),{props:u,slots:c,emit:h,proxy:d}=l,{$q:p}=d,f=pt(u,p),g=w(()=>u.disable!==!0&&u.readonly!==!0),y=$(!1),_=$(null),b=$(null),m={files:$([]),queuedFiles:$([]),uploadedFiles:$([]),uploadedSize:$(0),updateFileStatus:function(ue,he,fe){if(ue.__status=he,he==="idle")return ue.__uploaded=0,ue.__progress=0,ue.__sizeLabel=em(ue.size),void(ue.__progressLabel="0.00%");he!=="failed"&&(ue.__uploaded=he==="uploaded"?ue.size:fe,ue.__progress=he==="uploaded"?1:Math.min(.9999,ue.__uploaded/ue.size),ue.__progressLabel=B_(ue.__progress)),d.$forceUpdate()},isAlive:()=>to(l)===!1},{pickFiles:v,addFiles:S,onDragover:C,onDragleave:k,processFiles:L,getDndNode:A,maxFilesNumber:q,maxTotalSizeNumber:P}=wS({editable:g,dnd:y,getFileInput:z,addFilesToQueue:j});Object.assign(m,a({props:u,slots:c,emit:h,helpers:m,exposeApi:ue=>{Object.assign(m,ue)}})),m.isBusy===void 0&&(m.isBusy=$(!1));const T=$(0),R=w(()=>T.value===0?0:m.uploadedSize.value/T.value),M=w(()=>B_(R.value)),I=w(()=>em(T.value)),E=w(()=>g.value===!0&&m.isUploading.value!==!0&&(u.multiple===!0||m.queuedFiles.value.length===0)&&(u.maxFiles===void 0||m.files.value.length<q.value)&&(u.maxTotalSize===void 0||T.value<P.value)),O=w(()=>g.value===!0&&m.isBusy.value!==!0&&m.isUploading.value!==!0&&m.queuedFiles.value.length!==0);uo(q1,U);const V=w(()=>"q-uploader column no-wrap"+(f.value===!0?" q-uploader--dark q-dark":"")+(u.bordered===!0?" q-uploader--bordered":"")+(u.square===!0?" q-uploader--square no-border-radius":"")+(u.flat===!0?" q-uploader--flat no-shadow":"")+(u.disable===!0?" disabled q-uploader--disable":"")+(y.value===!0?" q-uploader--dnd":"")),B=w(()=>"q-uploader__header"+(u.color!==void 0?` bg-${u.color}`:"")+(u.textColor!==void 0?` text-${u.textColor}`:""));function F(){u.disable===!1&&(m.abort(),m.uploadedSize.value=0,T.value=0,N(),m.files.value=[],m.queuedFiles.value=[],m.uploadedFiles.value=[])}function H(){u.disable===!1&&ne(["uploaded"],()=>{m.uploadedFiles.value=[]})}function ee(){ne(["idle","failed"],({size:ue})=>{T.value-=ue,m.queuedFiles.value=[]})}function ne(ue,he){if(u.disable===!0)return;const fe={files:[],size:0},Ce=m.files.value.filter(Ie=>ue.indexOf(Ie.__status)===-1||(fe.size+=Ie.size,fe.files.push(Ie),Ie.__img!==void 0&&window.URL.revokeObjectURL(Ie.__img.src),!1));fe.files.length!==0&&(m.files.value=Ce,he(fe),h("removed",fe.files))}function te(ue){u.disable||(ue.__status==="uploaded"?m.uploadedFiles.value=m.uploadedFiles.value.filter(he=>he.__key!==ue.__key):ue.__status==="uploading"?ue.__abort():T.value-=ue.size,m.files.value=m.files.value.filter(he=>he.__key!==ue.__key||(he.__img!==void 0&&window.URL.revokeObjectURL(he.__img.src),!1)),m.queuedFiles.value=m.queuedFiles.value.filter(he=>he.__key!==ue.__key),h("removed",[ue]))}function N(){m.files.value.forEach(ue=>{ue.__img!==void 0&&window.URL.revokeObjectURL(ue.__img.src)})}function z(){return b.value||_.value.getElementsByClassName("q-uploader__input")[0]}function j(ue,he){const fe=L(ue,he,m.files.value,!0),Ce=z();Ce!=null&&(Ce.value=""),fe!==void 0&&(fe.forEach(Ie=>{if(m.updateFileStatus(Ie,"idle"),T.value+=Ie.size,u.noThumbnails!==!0&&Ie.type.toUpperCase().startsWith("IMAGE")){const me=new Image;me.src=window.URL.createObjectURL(Ie),Ie.__img=me}}),m.files.value=m.files.value.concat(fe),m.queuedFiles.value=m.queuedFiles.value.concat(fe),h("added",fe),u.autoUpload===!0&&m.upload())}function Z(){O.value===!0&&m.upload()}function W(ue,he,fe){if(ue===!0){const Ce={type:"a",key:he,icon:p.iconSet.uploader[he],flat:!0,dense:!0};let Ie;return he==="add"?(Ce.onClick=v,Ie=U):Ce.onClick=fe,x(vt,Ce,Ie)}}function U(){return x("input",{ref:b,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:u.accept,multiple:u.multiple===!0?"multiple":void 0,capture:u.capture,onMousedown:Nt,onClick:v,onChange:j})}se(m.isUploading,(ue,he)=>{he===!1&&ue===!0?h("start"):he===!0&&ue===!1&&h("finish")}),ot(()=>{m.isUploading.value===!0&&m.abort(),m.files.value.length!==0&&N()});const ye={};for(const ue in m)BC(m[ue])===!0?li(ye,ue,()=>m[ue].value):ye[ue]=m[ue];return Object.assign(ye,{upload:Z,reset:F,removeUploadedFiles:H,removeQueuedFiles:ee,removeFile:te,pickFiles:v,addFiles:S}),a2(ye,{canAddFiles:()=>E.value,canUpload:()=>O.value,uploadSizeLabel:()=>I.value,uploadProgressLabel:()=>M.value}),s({...m,upload:Z,reset:F,removeUploadedFiles:H,removeQueuedFiles:ee,removeFile:te,pickFiles:v,addFiles:S,canAddFiles:E,canUpload:O,uploadSizeLabel:I,uploadProgressLabel:M}),()=>{const ue=[x("div",{class:B.value},c.header!==void 0?c.header(ye):[x("div",{class:"q-uploader__header-content column"},[x("div",{class:"flex flex-center no-wrap q-gutter-xs"},[W(m.queuedFiles.value.length!==0,"removeQueue",ee),W(m.uploadedFiles.value.length!==0,"removeUploaded",H),m.isUploading.value===!0?x(Fn,{class:"q-uploader__spinner"}):null,x("div",{class:"col column justify-center"},[u.label!==void 0?x("div",{class:"q-uploader__title"},[u.label]):null,x("div",{class:"q-uploader__subtitle"},[I.value+" / "+M.value])]),W(E.value,"add"),W(u.hideUploadBtn===!1&&O.value===!0,"upload",m.upload),W(m.isUploading.value,"clear",m.abort)])])]),x("div",{class:"q-uploader__list scroll"},c.list!==void 0?c.list(ye):m.files.value.map(fe=>x("div",{key:fe.__key,class:"q-uploader__file relative-position"+(u.noThumbnails!==!0&&fe.__img!==void 0?" q-uploader__file--img":"")+(fe.__status==="failed"?" q-uploader__file--failed":fe.__status==="uploaded"?" q-uploader__file--uploaded":""),style:u.noThumbnails!==!0&&fe.__img!==void 0?{backgroundImage:'url("'+fe.__img.src+'")',backgroundSize:u.thumbnailFit}:null},[x("div",{class:"q-uploader__file-header row flex-center no-wrap"},[fe.__status==="failed"?x(gt,{class:"q-uploader__file-status",name:p.iconSet.type.negative,color:"negative"}):null,x("div",{class:"q-uploader__file-header-content col"},[x("div",{class:"q-uploader__title"},[fe.name]),x("div",{class:"q-uploader__subtitle row items-center no-wrap"},[fe.__sizeLabel+" / "+fe.__progressLabel])]),fe.__status==="uploading"?x(W2,{value:fe.__progress,min:0,max:1,indeterminate:fe.__progress===0}):x(vt,{round:!0,dense:!0,flat:!0,icon:p.iconSet.uploader[fe.__status==="uploaded"?"done":"clear"],onClick:()=>{te(fe)}})])]))),A("uploader")];m.isBusy.value===!0&&ue.push(x("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[x(Fn)]));const he={ref:_,class:V.value};return E.value===!0&&Object.assign(he,{onDragover:C,onDragleave:k}),x("div",he,ue)}}(n,o)})})(iI),le({name:"QUploaderAddTrigger",setup(){const t=Ni(q1,wt);return t}}),le({name:"QVideo",props:{...Zv,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(t){const e=Qv(t),i=w(()=>"q-video"+(t.ratio!==void 0?" q-video--responsive":""));return()=>x("div",{class:i.value,style:e.value},[x("iframe",{src:t.src,title:t.title,fetchpriority:t.fetchpriority,loading:t.loading,referrerpolicy:t.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}});var nI=In({name:"close-popup",beforeMount(t,{value:e}){const i={depth:N_(e),handler(n){i.depth!==0&&setTimeout(()=>{const r=function(o){return ls.find(a=>a.contentEl!==null&&a.contentEl.contains(o))}(t);r!==void 0&&function(o,a,s){for(;s!==0&&o!=null;){if(o.__qPortal===!0){if(s--,o.$options.name==="QMenu"){o=L2(o,a);continue}o.hide(a)}o=Jc(o)}}(r,n,i.depth)})},handlerKey(n){dn(n,13)===!0&&i.handler(n)}};t.__qclosepopup=i,t.addEventListener("click",i.handler),t.addEventListener("keyup",i.handlerKey)},updated(t,{value:e,oldValue:i}){e!==i&&(t.__qclosepopup.depth=N_(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}}),rI=0,Fc=void 0;function V_(t,e){Fc===void 0&&((Fc=document.createElement("div")).style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(Fc));const i=t.getBoundingClientRect(),n=Fc.getBoundingClientRect(),{marginLeft:r,marginRight:o,marginTop:a,marginBottom:s}=window.getComputedStyle(t),l=parseInt(r,10)+parseInt(o,10),u=parseInt(a,10)+parseInt(s,10);return{left:i.left-n.left,top:i.top-n.top,width:i.right-i.left,height:i.bottom-i.top,widthM:i.right-i.left+(e===!0?0:l),heightM:i.bottom-i.top+(e===!0?0:u),marginH:e===!0?l:0,marginV:e===!0?u:0}}function Ac(t){return{width:t.scrollWidth,height:t.scrollHeight}}var $_=["Top","Right","Bottom","Left"],G_=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],oI=/-block|-inline|block-|inline-/,aI=/(-block|-inline|block-|inline-).*:/;function H_(t,e){const i=window.getComputedStyle(t),n={};for(let r=0;r<e.length;r++){const o=e[r];if(i[o]==="")if(o==="cssText"){const a=i.length;let s="";for(let l=0;l<a;l++)oI.test(i[l])!==!0&&(s+=i[l]+": "+i[i[l]]+"; ");n[o]=s}else if(["borderWidth","borderStyle","borderColor"].indexOf(o)!==-1){const a=o.replace("border","");let s="";for(let l=0;l<$_.length;l++)s+=i["border"+$_[l]+a]+" ";n[o]=s}else if(o==="borderRadius"){let a="",s="";for(let l=0;l<G_.length;l++){const u=i[G_[l]].split(" ");a+=u[0]+" ",s+=(u[1]===void 0?u[0]:u[1])+" "}n[o]=a+"/ "+s}else n[o]=i[o];else n[o]=o==="cssText"?i[o].split(";").filter(a=>aI.test(a)!==!0).join(";"):i[o]}return n}var sI=["absolute","fixed","relative","sticky"];function W_(t){let e=t,i=0;for(;e!==null&&e!==document;){const{position:n,zIndex:r}=window.getComputedStyle(e),o=Number(r);o>i&&(e===t||sI.includes(n)===!0)&&(i=o),e=e.parentNode}return i}function U_(t){const e=typeof t;return e==="function"?t():e==="string"?document.querySelector(t):t}function X_(t){return t&&t.ownerDocument===document&&t.parentNode!==null}function lI(t){let e=()=>!1,i=!1,n=!0;const r={from:(o=t).from,to:o.to!==void 0?o.to:o.from};var o;const a=function(R){return typeof R=="number"?R={duration:R}:typeof R=="function"&&(R={onEnd:R}),{...R,waitFor:R.waitFor===void 0?0:R.waitFor,duration:isNaN(R.duration)===!0?300:parseInt(R.duration,10),easing:typeof R.easing=="string"&&R.easing.length!==0?R.easing:"ease-in-out",delay:isNaN(R.delay)===!0?0:parseInt(R.delay,10),fill:typeof R.fill=="string"&&R.fill.length!==0?R.fill:"none",resize:R.resize===!0,useCSS:R.useCSS===!0||R.usecss===!0,hideFromClone:R.hideFromClone===!0||R.hidefromclone===!0,keepToClone:R.keepToClone===!0||R.keeptoclone===!0,tween:R.tween===!0,tweenFromOpacity:isNaN(R.tweenFromOpacity)===!0?.6:parseFloat(R.tweenFromOpacity),tweenToOpacity:isNaN(R.tweenToOpacity)===!0?.5:parseFloat(R.tweenToOpacity)}}(t),s=U_(r.from);if(X_(s)!==!0)return e;let l,u,c,h;typeof s.qMorphCancel=="function"&&s.qMorphCancel();const d=s.parentNode,p=s.nextElementSibling,f=V_(s,a.resize),{width:g,height:y}=Ac(d),{borderWidth:_,borderStyle:b,borderColor:m,borderRadius:v,backgroundColor:S,transform:C,position:k,cssText:L}=H_(s,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),A=s.classList.toString(),q=s.style.cssText,P=s.cloneNode(!0),T=a.tween===!0?s.cloneNode(!0):void 0;return T!==void 0&&(T.className=T.classList.toString().split(" ").filter(R=>/^bg-/.test(R)===!1).join(" ")),a.hideFromClone===!0&&P.classList.add("q-morph--internal"),P.setAttribute("aria-hidden","true"),P.style.transition="none",P.style.animation="none",P.style.pointerEvents="none",d.insertBefore(P,p),s.qMorphCancel=()=>{i=!0,P.remove(),T!==void 0&&T.remove(),a.hideFromClone===!0&&P.classList.remove("q-morph--internal"),s.qMorphCancel=void 0},typeof t.onToggle=="function"&&t.onToggle(),requestAnimationFrame(()=>{const R=U_(r.to);if(i===!0||X_(R)!==!0)return void(typeof s.qMorphCancel=="function"&&s.qMorphCancel());s!==R&&typeof R.qMorphCancel=="function"&&R.qMorphCancel(),a.keepToClone!==!0&&R.classList.add("q-morph--internal"),P.classList.add("q-morph--internal");const{width:M,height:I}=Ac(d),{width:E,height:O}=Ac(R.parentNode);a.hideFromClone!==!0&&P.classList.remove("q-morph--internal"),R.qMorphCancel=()=>{i=!0,P.remove(),T!==void 0&&T.remove(),a.hideFromClone===!0&&P.classList.remove("q-morph--internal"),a.keepToClone!==!0&&R.classList.remove("q-morph--internal"),s.qMorphCancel=void 0,R.qMorphCancel=void 0};const V=()=>{if(i===!0)return void(typeof R.qMorphCancel=="function"&&R.qMorphCancel());a.hideFromClone!==!0&&(P.classList.add("q-morph--internal"),P.innerHTML="",P.style.left=0,P.style.right="unset",P.style.top=0,P.style.bottom="unset",P.style.transform="none"),a.keepToClone!==!0&&R.classList.remove("q-morph--internal");const B=R.parentNode,{width:F,height:H}=Ac(B),ee=R.cloneNode(a.keepToClone);ee.setAttribute("aria-hidden","true"),a.keepToClone!==!0&&(ee.style.left=0,ee.style.right="unset",ee.style.top=0,ee.style.bottom="unset",ee.style.transform="none",ee.style.pointerEvents="none"),ee.classList.add("q-morph--internal");const ne=R===s&&d===B?P:R.nextElementSibling;B.insertBefore(ee,ne);const{borderWidth:te,borderStyle:N,borderColor:z,borderRadius:j,backgroundColor:Z,transform:W,position:U,cssText:ye}=H_(R,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),ue=R.classList.toString(),he=R.style.cssText;R.style.cssText=ye,R.style.transform="none",R.style.animation="none",R.style.transition="none",R.className=ue.split(" ").filter(Re=>/^bg-/.test(Re)===!1).join(" ");const fe=V_(R,a.resize),Ce=f.left-fe.left,Ie=f.top-fe.top,me=f.width/(fe.width>0?fe.width:10),we=f.height/(fe.height>0?fe.height:100),qe=g-M,Ge=y-I,oe=F-E,ce=H-O,X=Math.max(f.widthM,qe),de=Math.max(f.heightM,Ge),Se=Math.max(fe.widthM,oe),Le=Math.max(fe.heightM,ce),Fe=s===R&&["absolute","fixed"].includes(U)===!1&&["absolute","fixed"].includes(k)===!1;let K=U==="fixed",ae=B;for(;K!==!0&&ae!==document;)K=window.getComputedStyle(ae).position==="fixed",ae=ae.parentNode;if(a.hideFromClone!==!0&&(P.style.display="block",P.style.flex="0 0 auto",P.style.opacity=0,P.style.minWidth="unset",P.style.maxWidth="unset",P.style.minHeight="unset",P.style.maxHeight="unset",P.classList.remove("q-morph--internal")),a.keepToClone!==!0&&(ee.style.display="block",ee.style.flex="0 0 auto",ee.style.opacity=0,ee.style.minWidth="unset",ee.style.maxWidth="unset",ee.style.minHeight="unset",ee.style.maxHeight="unset"),ee.classList.remove("q-morph--internal"),typeof a.classes=="string"&&(R.className+=" "+a.classes),typeof a.style=="string")R.style.cssText+=" "+a.style;else if(Si(a.style)===!0)for(const Re in a.style)R.style[Re]=a.style[Re];const pe=W_(P),Pe=W_(R),He=K===!0?document.documentElement:{scrollLeft:0,scrollTop:0};R.style.position=K===!0?"fixed":"absolute",R.style.left=fe.left-He.scrollLeft+"px",R.style.right="unset",R.style.top=fe.top-He.scrollTop+"px",R.style.margin=0,a.resize===!0&&(R.style.minWidth="unset",R.style.maxWidth="unset",R.style.minHeight="unset",R.style.maxHeight="unset",R.style.overflow="hidden",R.style.overflowX="hidden",R.style.overflowY="hidden"),document.body.appendChild(R),T!==void 0&&(T.style.cssText=L,T.style.transform="none",T.style.animation="none",T.style.transition="none",T.style.position=R.style.position,T.style.left=f.left-He.scrollLeft+"px",T.style.right="unset",T.style.top=f.top-He.scrollTop+"px",T.style.margin=0,T.style.pointerEvents="none",a.resize===!0&&(T.style.minWidth="unset",T.style.maxWidth="unset",T.style.minHeight="unset",T.style.maxHeight="unset",T.style.overflow="hidden",T.style.overflowX="hidden",T.style.overflowY="hidden"),document.body.appendChild(T));const Ze=Re=>{s===R&&n!==!0?(R.style.cssText=q,R.className=A):(R.style.cssText=he,R.className=ue),ee.parentNode===B&&B.insertBefore(R,ee),P.remove(),ee.remove(),T!==void 0&&T.remove(),e=()=>!1,s.qMorphCancel=void 0,R.qMorphCancel=void 0,typeof a.onEnd=="function"&&a.onEnd(n===!0?"to":"from",Re===!0)};if(a.useCSS!==!0&&typeof R.animate=="function"){const Re=a.resize===!0?{transform:`translate(${Ce}px, ${Ie}px)`,width:`${X}px`,height:`${de}px`}:{transform:`translate(${Ce}px, ${Ie}px) scale(${me}, ${we})`},Ye=a.resize===!0?{width:`${Se}px`,height:`${Le}px`}:{},We=a.resize===!0?{width:`${X}px`,height:`${de}px`}:{},J=a.resize===!0?{transform:`translate(${-1*Ce}px, ${-1*Ie}px)`,width:`${Se}px`,height:`${Le}px`}:{transform:`translate(${-1*Ce}px, ${-1*Ie}px) scale(${1/me}, ${1/we})`},Te=T!==void 0?{opacity:a.tweenToOpacity}:{backgroundColor:S},_e=T!==void 0?{opacity:1}:{backgroundColor:Z};h=R.animate([{margin:0,borderWidth:_,borderStyle:b,borderColor:m,borderRadius:v,zIndex:pe,transformOrigin:"0 0",...Re,...Te},{margin:0,borderWidth:te,borderStyle:N,borderColor:z,borderRadius:j,zIndex:Pe,transformOrigin:"0 0",transform:W,...Ye,..._e}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay}),u=T===void 0?void 0:T.animate([{opacity:a.tweenFromOpacity,margin:0,borderWidth:_,borderStyle:b,borderColor:m,borderRadius:v,zIndex:pe,transformOrigin:"0 0",transform:C,...We},{opacity:0,margin:0,borderWidth:te,borderStyle:N,borderColor:z,borderRadius:j,zIndex:Pe,transformOrigin:"0 0",...J}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay}),l=a.hideFromClone===!0||Fe===!0?void 0:P.animate([{margin:`${Ge<0?Ge/2:0}px ${qe<0?qe/2:0}px`,width:`${X+f.marginH}px`,height:`${de+f.marginV}px`},{margin:0,width:0,height:0}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay}),c=a.keepToClone===!0?void 0:ee.animate([Fe===!0?{margin:`${Ge<0?Ge/2:0}px ${qe<0?qe/2:0}px`,width:`${X+f.marginH}px`,height:`${de+f.marginV}px`}:{margin:0,width:0,height:0},{margin:`${ce<0?ce/2:0}px ${oe<0?oe/2:0}px`,width:`${Se+fe.marginH}px`,height:`${Le+fe.marginV}px`}],{duration:a.duration,easing:a.easing,fill:a.fill,delay:a.delay});const ve=xe=>{l!==void 0&&l.cancel(),u!==void 0&&u.cancel(),c!==void 0&&c.cancel(),h.cancel(),h.removeEventListener("finish",ve),h.removeEventListener("cancel",ve),Ze(xe),l=void 0,u=void 0,c=void 0,h=void 0};s.qMorphCancel=()=>{s.qMorphCancel=void 0,i=!0,ve()},R.qMorphCancel=()=>{R.qMorphCancel=void 0,i=!0,ve()},h.addEventListener("finish",ve),h.addEventListener("cancel",ve),e=xe=>i!==!0&&h!==void 0&&(xe===!0?(ve(!0),!0):(n=n!==!0,l!==void 0&&l.reverse(),u!==void 0&&u.reverse(),c!==void 0&&c.reverse(),h.reverse(),!0))}else{const Re="q-morph-anim-"+ ++rI,Ye=document.createElement("style"),We=a.resize===!0?`
            transform: translate(${Ce}px, ${Ie}px);
            width: ${X}px;
            height: ${de}px;
          `:`transform: translate(${Ce}px, ${Ie}px) scale(${me}, ${we});`,J=a.resize===!0?`
            width: ${Se}px;
            height: ${Le}px;
          `:"",Te=a.resize===!0?`
            width: ${X}px;
            height: ${de}px;
          `:"",_e=a.resize===!0?`
            transform: translate(${-1*Ce}px, ${-1*Ie}px);
            width: ${Se}px;
            height: ${Le}px;
          `:`transform: translate(${-1*Ce}px, ${-1*Ie}px) scale(${1/me}, ${1/we});`,ve=T!==void 0?`opacity: ${a.tweenToOpacity};`:`background-color: ${S};`,xe=T!==void 0?"opacity: 1;":`background-color: ${Z};`,D=T===void 0?"":`
            @keyframes ${Re}-from-tween {
              0% {
                opacity: ${a.tweenFromOpacity};
                margin: 0;
                border-width: ${_};
                border-style: ${b};
                border-color: ${m};
                border-radius: ${v};
                z-index: ${pe};
                transform-origin: 0 0;
                transform: ${C};
                ${Te}
              }

              100% {
                opacity: 0;
                margin: 0;
                border-width: ${te};
                border-style: ${N};
                border-color: ${z};
                border-radius: ${j};
                z-index: ${Pe};
                transform-origin: 0 0;
                ${_e}
              }
            }
          `,G=a.hideFromClone===!0||Fe===!0?"":`
            @keyframes ${Re}-from {
              0% {
                margin: ${Ge<0?Ge/2:0}px ${qe<0?qe/2:0}px;
                width: ${X+f.marginH}px;
                height: ${de+f.marginV}px;
              }

              100% {
                margin: 0;
                width: 0;
                height: 0;
              }
            }
          `,Q=Fe===!0?`
            margin: ${Ge<0?Ge/2:0}px ${qe<0?qe/2:0}px;
            width: ${X+f.marginH}px;
            height: ${de+f.marginV}px;
          `:`
            margin: 0;
            width: 0;
            height: 0;
          `,ie=a.keepToClone===!0?"":`
            @keyframes ${Re}-to {
              0% {
                ${Q}
              }

              100% {
                margin: ${ce<0?ce/2:0}px ${oe<0?oe/2:0}px;
                width: ${Se+fe.marginH}px;
                height: ${Le+fe.marginV}px;
              }
            }
          `;Ye.innerHTML=`
          @keyframes ${Re} {
            0% {
              margin: 0;
              border-width: ${_};
              border-style: ${b};
              border-color: ${m};
              border-radius: ${v};
              background-color: ${S};
              z-index: ${pe};
              transform-origin: 0 0;
              ${We}
              ${ve}
            }

            100% {
              margin: 0;
              border-width: ${te};
              border-style: ${N};
              border-color: ${z};
              border-radius: ${j};
              background-color: ${Z};
              z-index: ${Pe};
              transform-origin: 0 0;
              transform: ${W};
              ${J}
              ${xe}
            }
          }

          ${G}

          ${D}

          ${ie}
        `,document.head.appendChild(Ye);let re="normal";P.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${Re}-from`,T!==void 0&&(T.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${Re}-from-tween`),ee.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${Re}-to`,R.style.animation=`${a.duration}ms ${a.easing} ${a.delay}ms ${re} ${a.fill} ${Re}`;const Me=ge=>{ge===Object(ge)&&ge.animationName!==Re||(R.removeEventListener("animationend",Me),R.removeEventListener("animationcancel",Me),Ze(),Ye.remove())};s.qMorphCancel=()=>{s.qMorphCancel=void 0,i=!0,Me()},R.qMorphCancel=()=>{R.qMorphCancel=void 0,i=!0,Me()},R.addEventListener("animationend",Me),R.addEventListener("animationcancel",Me),e=ge=>!!(i!==!0&&R&&P&&ee)&&(ge===!0?(Me(),!0):(n=n!==!0,re=re==="normal"?"reverse":"normal",P.style.animationDirection=re,T.style.animationDirection=re,ee.style.animationDirection=re,R.style.animationDirection=re,!0))}};a.waitFor>0||a.waitFor==="transitionend"||a.waitFor===Object(a.waitFor)&&typeof a.waitFor.then=="function"?(a.waitFor>0?new Promise(B=>setTimeout(B,a.waitFor)):a.waitFor==="transitionend"?new Promise(B=>{const F=()=>{H!==null&&(clearTimeout(H),H=null),R&&(R.removeEventListener("transitionend",F),R.removeEventListener("transitioncancel",F)),B()};let H=setTimeout(F,400);R.addEventListener("transitionend",F),R.addEventListener("transitioncancel",F)}):a.waitFor).then(V).catch(()=>{typeof R.qMorphCancel=="function"&&R.qMorphCancel()}):V()}),R=>e(R)}var Uh={},uI=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],cI=["resize","useCSS","hideFromClone","keepToClone","tween"];function es(t,e){t.clsAction!==e&&(t.clsAction=e,t.el.classList[e]("q-morph--invisible"))}function DS(t){if(t.animating===!0||t.queue.length<2)return;const[e,i]=t.queue;t.animating=!0,e.animating=!0,i.animating=!0,es(e,"remove"),es(i,"remove");const n=lI({from:e.el,to:i.el,onToggle(){es(e,"add"),es(i,"remove")},...i.opts,onEnd(r,o){i.opts.onEnd!==void 0&&i.opts.onEnd(r,o),o!==!0&&(e.animating=!1,i.animating=!1,t.animating=!1,t.cancel=void 0,t.queue.shift(),DS(t))}});t.cancel=()=>{n(!0),t.cancel=void 0}}function jS(t,e){const i=e.opts;cI.forEach(n=>{i[n]=t[n]===!0})}function hI(t,e){if(e.name!==t)e.animating===!1&&es(e,"add");else{const i=Uh[e.group];i===void 0?(Uh[e.group]={name:e.group,model:t,queue:[e],animating:!1},es(e,"remove")):i.model!==t&&(i.model=t,i.queue.push(e),i.animating===!1&&i.queue.length===2&&DS(i))}}function Y_(t,e){let i;Object(e)===e?(i=""+e.model,function(n,r){n.group!==void 0&&(r.group=n.group),n.name!==void 0&&(r.name=n.name);const o=r.opts;uI.forEach(a=>{n[a]!==void 0&&(o[a]=n[a])})}(e,t),jS(e,t)):i=""+e,i!==t.model?(t.model=i,hI(i,t)):t.animating===!1&&t.clsAction!==void 0&&t.el.classList[t.clsAction]("q-morph--invisible")}In({name:"morph",mounted(t,e){const i={el:t,animating:!1,opts:{}};jS(e.modifiers,i),function(n,r){const o=typeof n=="string"&&n.length!==0?n.split(":"):[];r.name=o[0],r.group=o[1],Object.assign(r.opts,{duration:isNaN(o[2])===!0?300:parseFloat(o[2]),waitFor:o[3]})}(e.arg,i),Y_(i,e.value),t.__qmorph=i},updated(t,e){Y_(t.__qmorph,e.value)},beforeUnmount(t){const e=t.__qmorph,i=Uh[e.group];i!==void 0&&i.queue.indexOf(e)!==-1&&(i.queue=i.queue.filter(n=>n!==e),i.queue.length===0&&(i.cancel!==void 0&&i.cancel(),delete Uh[e.group])),e.clsAction==="add"&&t.classList.remove("q-morph--invisible"),delete t.__qmorph}});var dI={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0};function K_(t,e,i){e.handler=i,e.observer!==void 0&&e.observer.disconnect(),e.observer=new MutationObserver(n=>{typeof e.handler=="function"&&(e.handler(n)!==!1&&e.once!==!0||BS(t))}),e.observer.observe(t,e.opts)}function BS(t){const e=t.__qmutation;e!==void 0&&(e.observer!==void 0&&e.observer.disconnect(),delete t.__qmutation)}In({name:"mutation",mounted(t,{modifiers:{once:e,...i},value:n}){const r={once:e,opts:Object.keys(i).length===0?dI:i};K_(t,r,n),t.__qmutation=r},updated(t,{oldValue:e,value:i}){const n=t.__qmutation;n!==void 0&&e!==i&&K_(t,n,i)},beforeUnmount:BS});var{passive:Xh}=Pt;function Z_(t,{value:e,oldValue:i}){typeof e=="function"?(t.handler=e,typeof i!="function"&&(t.scrollTarget.addEventListener("scroll",t.scroll,Xh),t.scroll())):t.scrollTarget.removeEventListener("scroll",t.scroll,Xh)}function Q_(t,{value:e,oldValue:i}){typeof e=="function"?(t.handler=e,typeof i!="function"&&t.scrollTarget.addEventListener("scroll",t.scroll,Pt.passive)):t.scrollTarget.removeEventListener("scroll",t.scroll,Pt.passive)}In({name:"scroll-fire",mounted(t,e){const i={scrollTarget:Jn(t),scroll:Ns(()=>{let n,r;i.scrollTarget===window?(r=t.getBoundingClientRect().bottom,n=window.innerHeight):(r=Ah(t).top+Ls(t),n=Ah(i.scrollTarget).top+Ls(i.scrollTarget)),r>0&&r<n&&(i.scrollTarget.removeEventListener("scroll",i.scroll,Xh),i.handler(t))},25)};Z_(i,e),t.__qscrollfire=i},updated(t,e){e.value!==e.oldValue&&Z_(t.__qscrollfire,e)},beforeUnmount(t){const e=t.__qscrollfire;e.scrollTarget.removeEventListener("scroll",e.scroll,Xh),e.scroll.cancel(),delete t.__qscrollfire}}),In({name:"scroll",mounted(t,e){const i={scrollTarget:Jn(t),scroll(){i.handler(io(i.scrollTarget),vd(i.scrollTarget))}};Q_(i,e),t.__qscroll=i},updated(t,e){t.__qscroll!==void 0&&e.oldValue!==e.value&&Q_(t.__qscroll,e)},beforeUnmount(t){const e=t.__qscroll;e.scrollTarget.removeEventListener("scroll",e.scroll,Pt.passive),delete t.__qscroll}}),In({name:"touch-hold",beforeMount(t,e){const{modifiers:i}=e;if(i.mouse!==!0&&nt.has.touch!==!0)return;const n={handler:e.value,noop:ni,mouseStart(o){typeof n.handler=="function"&&pd(o)===!0&&(Wt(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(o,!0))},touchStart(o){if(o.target!==void 0&&typeof n.handler=="function"){const a=o.target;Wt(n,"temp",[[a,"touchmove","move","passiveCapture"],[a,"touchcancel","end","notPassiveCapture"],[a,"touchend","end","notPassiveCapture"]]),n.start(o)}},start(o,a){n.origin=qi(o);const s=Date.now();nt.is.mobile===!0&&(document.body.classList.add("non-selectable"),Pn(),n.styleCleanup=l=>{n.styleCleanup=void 0;const u=()=>{document.body.classList.remove("non-selectable")};l===!0?(Pn(),setTimeout(u,10)):u()}),n.triggered=!1,n.sensitivity=a===!0?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout(()=>{n.timer=void 0,Pn(),n.triggered=!0,n.handler({evt:o,touch:a!==!0,mouse:a===!0,position:n.origin,duration:Date.now()-s})},n.duration)},move(o){const{top:a,left:s}=qi(o);n.timer!==void 0&&(Math.abs(s-n.origin.left)>=n.sensitivity||Math.abs(a-n.origin.top)>=n.sensitivity)&&(clearTimeout(n.timer),n.timer=void 0)},end(o){Ci(n,"temp"),n.styleCleanup!==void 0&&n.styleCleanup(n.triggered),n.triggered===!0?o!==void 0&&Ke(o):n.timer!==void 0&&(clearTimeout(n.timer),n.timer=void 0)}},r=[600,5,7];if(typeof e.arg=="string"&&e.arg.length!==0&&e.arg.split(":").forEach((o,a)=>{const s=parseInt(o,10);s&&(r[a]=s)}),[n.duration,n.touchSensitivity,n.mouseSensitivity]=r,t.__qtouchhold=n,i.mouse===!0){const o=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Wt(n,"main",[[t,"mousedown","mouseStart",`passive${o}`]])}nt.has.touch===!0&&Wt(n,"main",[[t,"touchstart","touchStart","passive"+(i.capture===!0?"Capture":"")],[t,"touchend","noop","notPassiveCapture"]])},updated(t,e){const i=t.__qtouchhold;i!==void 0&&e.oldValue!==e.value&&(typeof e.value!="function"&&i.end(),i.handler=e.value)},beforeUnmount(t){const e=t.__qtouchhold;e!==void 0&&(Ci(e,"main"),Ci(e,"temp"),e.timer!==void 0&&clearTimeout(e.timer),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchhold)}});var NS={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},pI=new RegExp(`^([\\d+]+|${Object.keys(NS).join("|")})$`,"i");In({name:"touch-repeat",beforeMount(t,{modifiers:e,value:i,arg:n}){const r=Object.keys(e).reduce((l,u)=>{if(pI.test(u)===!0){const c=isNaN(parseInt(u,10))?NS[u.toLowerCase()]:parseInt(u,10);c>=0&&l.push(c)}return l},[]);if(e.mouse!==!0&&nt.has.touch!==!0&&r.length===0)return;const o=typeof n=="string"&&n.length!==0?n.split(":").map(l=>parseInt(l,10)):[0,600,300],a=o.length-1,s={keyboard:r,handler:i,noop:ni,mouseStart(l){s.event===void 0&&typeof s.handler=="function"&&pd(l)===!0&&(Wt(s,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(l,!0))},keyboardStart(l){if(typeof s.handler=="function"&&dn(l,r)===!0){if((o[0]===0||s.event!==void 0)&&(Ke(l),t.focus(),s.event!==void 0))return;Wt(s,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(l,!1,!0)}},touchStart(l){if(l.target!==void 0&&typeof s.handler=="function"){const u=l.target;Wt(s,"temp",[[u,"touchmove","move","passiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),s.start(l)}},start(l,u,c){function h(p){s.styleCleanup=void 0,document.documentElement.style.cursor="";const f=()=>{document.body.classList.remove("non-selectable")};p===!0?(Pn(),setTimeout(f,10)):f()}c!==!0&&(s.origin=qi(l)),nt.is.mobile===!0&&(document.body.classList.add("non-selectable"),Pn(),s.styleCleanup=h),s.event={touch:u!==!0&&c!==!0,mouse:u===!0,keyboard:c===!0,startTime:Date.now(),repeatCount:0};const d=()=>{if(s.timer=void 0,s.event===void 0)return;s.event.repeatCount===0&&(s.event.evt=l,c===!0?s.event.keyCode=l.keyCode:s.event.position=qi(l),nt.is.mobile!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),Pn(),s.styleCleanup=h)),s.event.duration=Date.now()-s.event.startTime,s.event.repeatCount+=1,s.handler(s.event);const p=a<s.event.repeatCount?a:s.event.repeatCount;s.timer=setTimeout(d,o[p])};o[0]===0?d():s.timer=setTimeout(d,o[0])},move(l){s.event!==void 0&&s.timer!==void 0&&function(u,c){const{top:h,left:d}=qi(u);return Math.abs(d-c.left)>=7||Math.abs(h-c.top)>=7}(l,s.origin)===!0&&(clearTimeout(s.timer),s.timer=void 0)},end(l){s.event!==void 0&&(s.styleCleanup!==void 0&&s.styleCleanup(!0),l!==void 0&&s.event.repeatCount>0&&Ke(l),Ci(s,"temp"),s.timer!==void 0&&(clearTimeout(s.timer),s.timer=void 0),s.event=void 0)}};if(t.__qtouchrepeat=s,e.mouse===!0){const l=e.mouseCapture===!0||e.mousecapture===!0?"Capture":"";Wt(s,"main",[[t,"mousedown","mouseStart",`passive${l}`]])}if(nt.has.touch===!0&&Wt(s,"main",[[t,"touchstart","touchStart","passive"+(e.capture===!0?"Capture":"")],[t,"touchend","noop","passiveCapture"]]),r.length!==0){const l=e.keyCapture===!0||e.keycapture===!0?"Capture":"";Wt(s,"main",[[t,"keydown","keyboardStart",`notPassive${l}`]])}},updated(t,{oldValue:e,value:i}){const n=t.__qtouchrepeat;n!==void 0&&e!==i&&(typeof i!="function"&&n.end(),n.handler=i)},beforeUnmount(t){const e=t.__qtouchrepeat;e!==void 0&&(e.timer!==void 0&&clearTimeout(e.timer),Ci(e,"main"),Ci(e,"temp"),e.styleCleanup!==void 0&&e.styleCleanup(),delete t.__qtouchrepeat)}}),nt.is.mobile!==!0||nt.is.nativeMobile!==!0&&nt.is.winphone!==!0&&nt.is.safari!==!0&&nt.is.webkit!==!0&&nt.is.vivaldi;var gl={};function VS(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function $S(){const t=_i.activeEl=_i.isActive===!1?null:VS();(function(e){if(e===Po)return;if((Po=e)===document.body||zl.reduce((n,r)=>r==="dialog"?n+1:n,0)<2)return void ss.forEach(n=>{n.contains(Po)===!1&&Po.appendChild(n)});const i=zl.lastIndexOf("dialog");for(let n=0;n<ss.length;n++){const r=ss[n];n!==i&&zl[n]==="dialog"||r.contains(Po)!==!1||Po.appendChild(r)}})(t===null||t===document.documentElement?document.body:t)}function fI(){_i.isActive=_i.isActive===!1,$S()}function J_(t,e){try{const i=t[e]();return i===void 0?Promise.resolve():i}catch(i){return Promise.reject(i)}}var Oc,_i=fo({isActive:!1,activeEl:null},{isCapable:!1,install({$q:t}){t.fullscreen=this}});gl.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(t=>document.documentElement[t]!==void 0),_i.isCapable=gl.request!==void 0,_i.isCapable===!1?(Oc=()=>Promise.reject("Not capable"),Object.assign(_i,{request:Oc,exit:Oc,toggle:Oc})):(Object.assign(_i,{request(t){const e=t||document.documentElement,{activeEl:i}=_i;return e===i?Promise.resolve():(i!==null&&e.contains(i)===!0?_i.exit():Promise.resolve()).finally(()=>J_(e,gl.request))},exit:()=>_i.isActive===!0?J_(document,gl.exit):Promise.resolve(),toggle:t=>_i.isActive===!0?_i.exit():_i.request(t)}),gl.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(t=>document[t]),_i.isActive=!!VS(),_i.isActive===!0&&$S(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(t=>{document[t]=fI}));var gI=fo({appVisible:!0},{install({$q:t}){li(t,"appVisible",()=>this.appVisible)}});{let t,e;if(document.hidden!==void 0?(t="hidden",e="visibilitychange"):document.msHidden!==void 0?(t="msHidden",e="msvisibilitychange"):document.webkitHidden!==void 0&&(t="webkitHidden",e="webkitvisibilitychange"),e&&document[t]!==void 0){const i=()=>{gI.appVisible=!document[t]};document.addEventListener(e,i,!1)}}function eb(t){return encodeURIComponent(t)}function GS(t){return decodeURIComponent(t)}function mI(t){if(t==="")return t;t.indexOf('"')===0&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t=GS(t.replace(/\+/g," "));try{const e=JSON.parse(t);e!==Object(e)&&Array.isArray(e)!==!0||(t=e)}catch{}return t}function tb(t){const e=new Date;return e.setMilliseconds(e.getMilliseconds()+t),e.toUTCString()}function ib(t,e,i={},n){let r,o;i.expires!==void 0&&(Object.prototype.toString.call(i.expires)==="[object Date]"?r=i.expires.toUTCString():typeof i.expires=="string"?r=function(u){let c=0;const h=u.match(/(\d+)d/),d=u.match(/(\d+)h/),p=u.match(/(\d+)m/),f=u.match(/(\d+)s/);return h&&(c+=864e5*h[1]),d&&(c+=36e5*d[1]),p&&(c+=6e4*p[1]),f&&(c+=1e3*f[1]),c===0?u:tb(c)}(i.expires):(o=parseFloat(i.expires),r=isNaN(o)===!1?tb(864e5*o):i.expires));const a=`${eb(t)}=${s=e,eb(s===Object(s)?JSON.stringify(s):""+s)}`;var s;const l=[a,r!==void 0?"; Expires="+r:"",i.path?"; Path="+i.path:"",i.domain?"; Domain="+i.domain:"",i.sameSite?"; SameSite="+i.sameSite:"",i.httpOnly?"; HttpOnly":"",i.secure?"; Secure":"",i.other?"; "+i.other:""].join("");document.cookie=l}function tf(t,e){const i=document,n=i.cookie?i.cookie.split("; "):[],r=n.length;let o,a,s,l=t?null:{},u=0;for(;u<r;u++)if(o=n[u].split("="),a=GS(o.shift()),s=o.join("="),t){if(t===a){l=mI(s);break}}else l[a]=s;return l}function vI(t){return{get:e=>tf(e),set:(e,i,n)=>ib(e,i,n),has:e=>function(i,n){return tf(i)!==null}(e),remove:(e,i)=>function(n,r,o){ib(n,"",{expires:-1,...r})}(e,i),getAll:()=>tf(null)}}le({name:"BottomSheetComponent",props:{...dt,title:String,message:String,actions:Array,grid:Boolean,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:i}=ke(),n=pt(t,i.$q),r=$(null);function o(){r.value.hide()}function a(c){e("ok",c),o()}function s(){e("hide")}function l(){const c=[];return t.title&&c.push(x(qo,{class:"q-dialog__title"},()=>t.title)),t.message&&c.push(x(qo,{class:"q-dialog__message"},()=>t.message)),c.push(t.grid===!0?x("div",{class:"row items-stretch justify-start",role:"list"},t.actions.map(h=>{const d=h.avatar||h.img;return h.label===void 0?x(lo,{class:"col-all",dark:n.value}):x("div",{class:["q-bottom-sheet__item q-hoverable q-focusable cursor-pointer relative-position",h.class],style:h.style,tabindex:0,role:"listitem",onClick(){a(h)},onKeyup(p){p.keyCode===13&&a(h)}},[x("div",{class:"q-focus-helper"}),h.icon?x(gt,{name:h.icon,color:h.color}):d?x("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:d}):x("div",{class:"q-bottom-sheet__empty-icon"}),x("div",h.label)])})):x("div",{role:"list"},t.actions.map(h=>{const d=h.avatar||h.img;return h.label===void 0?x(lo,{spaced:!0,dark:n.value}):x(Du,{class:["q-bottom-sheet__item",h.classes],style:h.style,tabindex:0,clickable:!0,dark:n.value,onClick(){a(h)}},()=>[x(yr,{avatar:!0},()=>h.icon?x(gt,{name:h.icon,color:h.color}):d?x("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:d}):null),x(yr,()=>h.label)])}))),c}function u(){return[x(D2,{class:["q-bottom-sheet q-bottom-sheet--"+(t.grid===!0?"grid":"list")+(n.value===!0?" q-bottom-sheet--dark q-dark":""),t.cardClass],style:t.cardStyle},l)]}return Object.assign(i,{show:function(){r.value.show()},hide:o}),()=>x(_d,{ref:r,position:"bottom",onHide:s},u)}});var za,nf,yI={install({$q:t,ssrContext:e}){t.cookies=this}};Object.assign(yI,vI()),le({name:"DialogPluginComponent",props:{...dt,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:i}=ke(),{$q:n}=i,r=pt(t,n),o=$(null),a=$(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),s=w(()=>"q-dialog-plugin"+(r.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),l=w(()=>t.color||(r.value===!0?"amber":"primary")),u=w(()=>t.progress===!1?null:Si(t.progress)===!0?{component:t.progress.spinner||Fn,props:{color:t.progress.color||l.value}}:{component:Fn,props:{color:l.value}}),c=w(()=>t.prompt!==void 0||t.options!==void 0),h=w(()=>{if(c.value!==!0)return{};const{model:T,isValid:R,items:M,...I}=t.prompt!==void 0?t.prompt:t.options;return I}),d=w(()=>Si(t.ok)===!0||t.ok===!0?n.lang.label.ok:t.ok),p=w(()=>Si(t.cancel)===!0||t.cancel===!0?n.lang.label.cancel:t.cancel),f=w(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(a.value)!==!0:t.options!==void 0&&t.options.isValid!==void 0&&t.options.isValid(a.value)!==!0),g=w(()=>({color:l.value,label:d.value,ripple:!1,disable:f.value,...Si(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&c.value!==!0||void 0,onClick:b})),y=w(()=>({color:l.value,label:p.value,ripple:!1,...Si(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&c.value!==!0||void 0,onClick:m}));function _(){o.value.hide()}function b(){e("ok",ur(a.value)),_()}function m(){_()}function v(){e("hide")}function S(T){a.value=T}function C(T){f.value!==!0&&t.prompt.type!=="textarea"&&dn(T,13)===!0&&b()}function k(T,R){return t.html===!0?x(qo,{class:T,innerHTML:R}):x(qo,{class:T},()=>R)}function L(){return[x(jl,{color:l.value,dense:!0,autofocus:!0,dark:r.value,...h.value,modelValue:a.value,"onUpdate:modelValue":S,onKeyup:C})]}function A(){return[x(TL,{color:l.value,options:t.options.items,dark:r.value,...h.value,modelValue:a.value,"onUpdate:modelValue":S})]}function q(){const T=[];return t.title&&T.push(k("q-dialog__title",t.title)),t.progress!==!1&&T.push(x(qo,{class:"q-dialog__progress"},()=>x(u.value.component,u.value.props))),t.message&&T.push(k("q-dialog__message",t.message)),t.prompt!==void 0?T.push(x(qo,{class:"scroll q-dialog-plugin__form"},L)):t.options!==void 0&&T.push(x(lo,{dark:r.value}),x(qo,{class:"scroll q-dialog-plugin__form"},A),x(lo,{dark:r.value})),(t.ok||t.cancel)&&T.push(function(){const R=[];return t.cancel&&R.push(x(vt,y.value)),t.ok&&R.push(x(vt,g.value)),x(x3,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>R)}()),T}function P(){return[x(D2,{class:[s.value,t.cardClass],style:t.cardStyle,dark:r.value},q)]}return se(()=>t.prompt&&t.prompt.model,S),se(()=>t.options&&t.options.model,S),Object.assign(i,{show:function(){o.value.show()},hide:_}),()=>x(_d,{ref:o,onHide:v},P)}});var nb=0,So=null,di={},Co={},HS={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:Fn,customClass:""},rb={...HS},zn=fo({isActive:!1},{show(t){di=function(i){if(i&&i.group!==void 0&&Co[i.group]!==void 0)return Object.assign(Co[i.group],i);const n=Si(i)===!0&&i.ignoreDefaults===!0?{...HS,...i}:{...rb,...i};return Co[n.group]=n,n}(t);const{group:e}=di;return zn.isActive=!0,za!==void 0?(di.uid=nb,nf.$forceUpdate()):(di.uid=++nb,So!==null&&clearTimeout(So),So=setTimeout(()=>{So=null;const i=Ov("q-loading");za=d2({name:"QLoading",setup(){function n(){zn.isActive!==!0&&za!==void 0&&(cm(!1),za.unmount(i),E2(i),za=void 0,nf=void 0)}function r(){if(zn.isActive!==!0)return null;const o=[x(di.spinner,{class:"q-loading__spinner",color:di.spinnerColor,size:di.spinnerSize})];return di.message&&o.push(x("div",{class:"q-loading__message"+(di.messageColor?` text-${di.messageColor}`:""),[di.html===!0?"innerHTML":"textContent"]:di.message})),x("div",{class:"q-loading fullscreen flex flex-center z-max "+di.customClass.trim(),key:di.uid},[x("div",{class:"q-loading__backdrop"+(di.backgroundColor?` bg-${di.backgroundColor}`:"")}),x("div",{class:"q-loading__box column items-center "+di.boxClass},o)])}return Rt(()=>{cm(!0)}),()=>x(si,{name:"q-transition--fade",appear:!0,onAfterLeave:n},r)}},zn.__parentApp),nf=za.mount(i)},di.delay)),i=>{i!==void 0&&Object(i)===i?zn.show({...i,group:e}):zn.hide(e)}},hide(t){if(zn.isActive===!0){if(t===void 0)Co={};else{if(Co[t]===void 0)return;{delete Co[t];const e=Object.keys(Co);if(e.length!==0){const i=e[e.length-1];return void zn.show({group:i})}}}So!==null&&(clearTimeout(So),So=null),zn.isActive=!1}},setDefaults(t){Si(t)===!0&&Object.assign(rb,t)},install({$q:t,parentApp:e}){t.loading=this,zn.__parentApp=e,t.config.loading!==void 0&&this.setDefaults(t.config.loading)}}),zc=$(null),ob=fo({isActive:!1},{start:ni,stop:ni,increment:ni,setDefaults:ni,install({$q:t,parentApp:e}){if(t.loadingBar=this,this.__installed===!0)return void(t.config.loadingBar!==void 0&&this.setDefaults(t.config.loadingBar));const i=$(t.config.loadingBar!==void 0?{...t.config.loadingBar}:{});function n(){ob.isActive=!0}function r(){ob.isActive=!1}const o=Ov("q-loading-bar");d2({name:"LoadingBar",devtools:{hide:!0},setup:()=>()=>x(YE,{...i.value,onStart:n,onStop:r,ref:zc})},e).mount(o),Object.assign(this,{start(a){zc.value.start(a)},stop(){zc.value.stop()},increment(){zc.value.increment.apply(null,arguments)},setDefaults(a){Si(a)===!0&&Object.assign(i.value,a)}})}});function _I(t){return Jg(t)===!0?"__q_date|"+t.getTime():function(e){return Object.prototype.toString.call(e)==="[object RegExp]"}(t)===!0?"__q_expr|"+t.source:typeof t=="number"?"__q_numb|"+t:typeof t=="boolean"?"__q_bool|"+(t?"1":"0"):typeof t=="string"?"__q_strn|"+t:typeof t=="function"?"__q_strn|"+t.toString():t===Object(t)?"__q_objt|"+JSON.stringify(t):t}function WS(){const t=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:t,getIndex:t,getKey:t,getAll:()=>{},getAllKeys:()=>[],set:ni,setItem:ni,remove:ni,removeItem:ni,clear:ni,isEmpty:()=>!0}}function US(t){const e=window[t+"Storage"],i=a=>{const s=e.getItem(a);return s?function(l){if(l.length<9)return l;const u=l.substring(0,8),c=l.substring(9);switch(u){case"__q_date":const h=Number(c);return new Date(Number.isNaN(h)===!0?c:h);case"__q_expr":return new RegExp(c);case"__q_numb":return Number(c);case"__q_bool":return c==="1";case"__q_strn":return""+c;case"__q_objt":return JSON.parse(c);default:return l}}(s):null},n=a=>e.getItem(a)!==null,r=(a,s)=>{e.setItem(a,_I(s))},o=a=>{e.removeItem(a)};return{has:n,hasItem:n,getLength:()=>e.length,getItem:i,getIndex:a=>a<e.length?i(e.key(a)):null,getKey:a=>a<e.length?e.key(a):null,getAll:()=>{let a;const s={},l=e.length;for(let u=0;u<l;u++)a=e.key(u),s[a]=i(a);return s},getAllKeys:()=>{const a=[],s=e.length;for(let l=0;l<s;l++)a.push(e.key(l));return a},set:r,setItem:r,remove:o,removeItem:o,clear:()=>{e.clear()},isEmpty:()=>e.length===0}}var XS=nt.has.webStorage===!1?WS():US("local"),bI={install({$q:t}){t.localStorage=XS}};Object.assign(bI,XS);var YS=nt.has.webStorage===!1?WS():US("session"),xI={install({$q:t}){t.sessionStorage=YS}};Object.assign(xI,YS),zS(["ok","hide"]);const wI={class:"tool-container menuToolList"},SI={title:""},CI={title:""},MI={title:""},kI={title:""},TI={class:"q-pa-sm"},EI={class:"sjz"},LI={class:"xcoor"},II={class:"ycoor"},PI={style:{margin:"0 auto"}};var KS=Cr({__name:"menuToolBar",emits:["locate"],setup(t,{emit:e}){const i=e,n=$(!1),r=w(()=>{let g="";return zi.layerTree&&(g="background-color:#ccc"),g});function o(){const g=zi.layerTree;zi.layerTree=!g}const a=w(()=>""),s=w(()=>{let g="";return zi.drawTool&&(g="background-color:#ccc"),g});function l(){const g=zi.drawTool;zi.drawTool=!g}const u=w(()=>{let g="";return zi.measureTool&&(g="background-color:#ccc"),g});function c(){const g=zi.measureTool;zi.measureTool=!g}const h=$(),d=$(),p=$();function f(){h.value!=null&&d.value!=null&&i("locate",h.value,d.value,p.value)}return(g,y)=>(ii(),en("ul",wI,[Ve("li",{onClick:o,style:Fo(r.value)},[Ve("span",SI,[mt(bi(Nr),{icon:"gis:layer-stack-o"})])],4),Ve("li",{onClick:l,style:Fo(s.value)},[Ve("span",CI,[mt(bi(Nr),{icon:"gis:extent-alt"})])],4),Ve("li",{onClick:c,style:Fo(u.value)},[Ve("span",MI,[mt(bi(Nr),{icon:"gis:measure"})])],4),Ve("li",{id:"locationBtn",style:Fo(a.value)},[Ve("span",kI,[mt(bi(Nr),{icon:"gis:position-o"})]),mt(bi(EL),{"model-value":n.value,"transition-show":"flip-up","transition-hide":"flip-down"},{default:Oo(()=>[Ve("div",TI,[y[3]||(y[3]=Ve("div",{class:"text-h6 text-center q-mb-md"},"",-1)),Ve("div",EI,[Ve("div",LI,[mt(bi(jl),{dense:"",style:{width:"200px"},modelValue:h.value,"onUpdate:modelValue":y[0]||(y[0]=_=>h.value=_),label:":",placeholder:""},null,8,["modelValue"])]),Ve("div",II,[mt(bi(jl),{dense:"",style:{width:"200px"},modelValue:d.value,"onUpdate:modelValue":y[1]||(y[1]=_=>d.value=_),label:":",placeholder:""},null,8,["modelValue"])]),Ve("div",null,[mt(bi(jl),{id:"inputNumber",label:":",modelValue:p.value,"onUpdate:modelValue":y[2]||(y[2]=_=>p.value=_),modelModifiers:{number:!0},type:"number",dense:"",style:{"max-width":"200px"},min:1,max:22},null,8,["modelValue"])]),Ve("div",PI,[mt(bi(vt),{color:"primary","text-color":"black",label:"",onClick:f})])])])]),_:1},8,["model-value"])],4)]))}});KS.__file="src/components/MapTools/menuToolBar.vue";var ab=Cr({name:"SwipeToolBar",props:{xmap:{type:Object}},components:{Icon:Nr},setup(t){let e,i=t.xmap;return se(()=>t.xmap,n=>{i=n}),{unload:function(){e&&e.unload()},useFishEyes:function(){if(!i)return;const n=i.LayerManager?.SwipeLayerIndex;if(n!==void 0){if(e)e.unload(),e.load();else{const r=document.getElementById(i.target);e=new Bg(r,i),e.setSwipeLayer(n)}e.changeSwipeType(sn.FishEye,100)}else kh.eventEmit(vi.MAP_MESSAGE_INFO,"!")},useSwipe:function(n=0){if(!i)return;const r=i.LayerManager?.SwipeLayerIndex;if(r!==void 0){if(e)e.unload(),e.load();else{const o=document.getElementById(i.target);e=new Bg(o,i)}e.setSwipeLayer(r),n===0?e.changeSwipeType(sn.RollHorizonl):e.changeSwipeType(sn.RollVertical)}else kh.eventEmit(vi.MAP_MESSAGE_INFO,"!")}}}});const qI={class:"tool-container swipeToolList"},RI={title:""},FI={title:""},AI={title:""},OI={title:""};ab.render=function(t,e,i,n,r,o){const a=Mn("Icon");return ii(),en("ul",qI,[Ve("li",{onClick:e[0]||(e[0]=s=>t.useSwipe(0))},[Ve("span",RI,[mt(a,{icon:"gis:swipe-map-v"})])]),Ve("li",{onClick:e[1]||(e[1]=s=>t.useSwipe(1))},[Ve("span",FI,[mt(a,{icon:"gis:swipe-map-h"})])]),Ve("li",{onClick:e[2]||(e[2]=(...s)=>t.useFishEyes&&t.useFishEyes(...s))},[Ve("span",AI,[mt(a,{icon:"gis:screen-mag"})])]),Ve("li",{onClick:e[3]||(e[3]=(...s)=>t.unload&&t.unload(...s))},[Ve("span",OI,[mt(a,{icon:"gis:earth"})])])])},ab.__file="src/components/MapTools/swipeToolBar.vue";var zI=class extends gn{constructor(t){t=t||{},super();var e,i=this.input=t.input;i||(i=this.input=document.createElement("INPUT"),t.type&&i.setAttribute("type",t.type),t.min!==void 0&&i.setAttribute("min",t.min),t.max!==void 0&&i.setAttribute("max",t.max),t.step!==void 0&&i.setAttribute("step",t.step),t.parent&&t.parent.appendChild(i)),t.disabled&&(i.disabled=!0),t.checked!==void 0&&(i.checked=!!t.checked),t.val!==void 0&&(i.value=t.val),t.hidden&&(i.style.display="none"),i.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),i.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(t,e){var i=function(n){this.moving=!0,this.element.classList.add("ol-moving");var r=function(o){o.type==="pointerup"&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",r),document.removeEventListener("pointercancel",r),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),o.target===t&&e(o),o.stopPropagation(),o.preventDefault()}.bind(this);document.addEventListener("pointermove",r,!1),document.addEventListener("pointerup",r,!1),document.addEventListener("pointercancel",r,!1),n.stopPropagation(),n.preventDefault()}.bind(this);t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",i,!1)}setValue(t){t!==void 0&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},Jv=class extends zI{constructor(t){super(t=t||{});var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):t.html!==void 0&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},DI=class extends Jv{constructor(t){super(t=t||{}),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()}},jI=class extends Jv{constructor(t){super(t=t||{}),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()}},Bt={create:function(t,e){var i;if(e=e||{},t==="TEXT")i=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(i);else for(var n in i=document.createElement(t),/button/i.test(t)&&i.setAttribute("type","button"),e)switch(n){case"className":e.className&&e.className.trim&&i.setAttribute("class",e.className.trim());break;case"text":i.innerText=e.text;break;case"html":e.html instanceof Element?i.appendChild(e.html):e.html!==void 0&&(i.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(i);break;case"options":if(/select/i.test(t))for(var r in e.options)Bt.create("OPTION",{html:r,value:e.options[r],parent:i});break;case"style":Bt.setStyle(i,e.style);break;case"change":case"click":Bt.addListener(i,n,e[n]);break;case"on":for(var o in e.on)Bt.addListener(i,o,e.on[o]);break;case"checked":i.checked=!!e.checked;break;default:i.setAttribute(n,e[n])}return i},createSwitch:function(t){var e=Bt.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),i=Object.assign({input:e},t||{});return new DI(i),e},createCheck:function(t){var e=Bt.create("INPUT",{name:t.name,type:t.type==="radio"?"radio":"checkbox",on:t.on,parent:t.parent}),i=Object.assign({input:e},t||{});return t.type==="radio"?new jI(i):new Jv(i),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):e!==void 0&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,i,n){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){t.addEventListener(r,i,n)})},removeListener:function(t,e,i){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(n){t.removeEventListener(n,i)})},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return Bt.getStyle(t,"display")==="none"},toggle:function(t){t.style.display=t.style.display==="none"?"":"none"},setStyle:function(t,e){for(var i in e)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":typeof e[i]=="number"?t.style[i]=e[i]+"px":t.style[i]=e[i];break;default:t.style[i]=e[i]}},getStyle:function(t,e){var i,n=(t.ownerDocument||document).defaultView;if(n&&n.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),i=n.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,function(r,o){return o.toUpperCase()}),i=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(i)))return function(r){var o=t.style.left,a=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=r||0,r=t.style.pixelLeft+"px",t.style.left=o,t.runtimeStyle.left=a,r}(i);return/px$/.test(i)?parseInt(i):i},outerHeight:function(t){return t.offsetHeight+Bt.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+Bt.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},i=function(n){if(!n)return e;if(Bt.getStyle(n,"position")==="absolute"&&Bt.getStyle(n,"transform")!=="none"){var r=n.getBoundingClientRect();return e.left+=r.left,e.top+=r.top,e}return i(n.offsetParent)};return i(t.offsetParent)},positionRect:function(t,e){var i=0,n=0,r=function(o){if(o)return i+=o.offsetLeft,n+=o.offsetTop,r(o.offsetParent);var a={top:t.offsetTop+n,left:t.offsetLeft+i};return e&&(a.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,a.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),a.bottom=a.top+t.offsetHeight,a.right=a.top+t.offsetWidth,a};return r(t.offsetParent)},scrollDiv:function(t,e){var i,n,r,o,a,s=!1,l=0,u=0,c=typeof(e=e||{}).onmove=="function"?e.onmove:function(){},h=e.vertical?"screenY":"screenX",d=e.vertical?"scrollTop":"scrollLeft",p=!1,f=0,g=function(){a&&(f++,setTimeout(y))},y=function(){if(a){if(--f)return;var k=t.clientHeight,L=t.scrollHeight;n=k/L,a.style.height=100*n+"%",a.style.top=t.scrollTop/L*100+"%",o.style.height=k+"px",k>L-.5?o.classList.add("ol-100pc"):o.classList.remove("ol-100pc")}},_=function(k){k.target.classList.contains("ol-noscroll")||(p=!1,s=k[h],u=new Date,t.classList.add("ol-move"),k.preventDefault(),window.addEventListener("pointermove",b),Bt.addListener(window,["pointerup","pointercancel"],S))},b=function(k){if(s!==!1){var L=(r?-1/n:1)*(s-k[h]);p=p||Math.round(L),t[d]+=L,(i=new Date)-u&&(l=(l+L/(i-u))/2),s=k[h],u=i,L&&c(!0)}else p=!0},m=function(k){var L=k>0?Math.min(100,k/2):Math.max(-100,k/2);k-=L,t[d]+=L,-1<k&&k<1?(p?setTimeout(function(){t.classList.remove("ol-move")}):t.classList.remove("ol-move"),p=!1,c(!1)):setTimeout(function(){m(k)},40)};if(e.vertical&&e.minibar){var v=function(k){t.removeEventListener("pointermove",v),t.parentNode.classList.add("ol-miniscroll"),a=Bt.create("DIV"),o=Bt.create("DIV",{className:"ol-scroll",html:a}),t.parentNode.insertBefore(o,t),a.addEventListener("pointerdown",function(L){r=!0,_(L)}),e.mousewheel&&(Bt.addListener(o,["mousewheel","DOMMouseScroll","onmousewheel"],function(L){C(L)}),Bt.addListener(a,["mousewheel","DOMMouseScroll","onmousewheel"],function(L){C(L)})),t.parentNode.addEventListener("pointerenter",g),window.addEventListener("resize",g),k!==!1&&g()};t.parentNode?v(!1):t.addEventListener("pointermove",v),t.addEventListener("scroll",function(){g()})}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),Bt.addListener(t,["pointerdown"],function(k){r=!1,_(k)}),t.addEventListener("click",function(k){t.classList.contains("ol-move")&&(k.preventDefault(),k.stopPropagation())},!0);var S=function(k){(u=new Date-u)>100||r?l=0:u>0&&(l=((l||0)+(s-k[h])/u)/2),m(e.animate===!1?0:200*l),s=!1,l=0,u=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout(function(){t.classList.remove("ol-hasClick")},500)),r=!1,window.removeEventListener("pointermove",b),Bt.removeListener(window,["pointerup","pointercancel"],S)},C=function(k){var L=Math.max(-1,Math.min(1,k.wheelDelta||-k.detail));return t.classList.add("ol-move"),t[d]-=30*L,t.classList.remove("ol-move"),!1};return e.mousewheel&&Bt.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],C),{refresh:g}},dispatchEvent:function(t,e){var i;try{i=new CustomEvent(t)}catch{(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)},setCursor:function(t,e){t instanceof zs&&(t=t.getTargetElement()),!("ontouchstart"in window)&&t instanceof Element&&(t.style.cursor=e)}},BI=class extends jg{constructor(t){t=t||{};var e=document.createElement("div");t.element=e,super(t),typeof t.offsetBox=="number"?this.offsetBox=[t.offsetBox,t.offsetBox,t.offsetBox,t.offsetBox]:this.offsetBox=t.offsetBox,this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,Bt.create("BUTTON",{className:"closeBox"+(t.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:e}),t.anchor!==!1&&Bt.create("DIV",{className:"anchor",parent:e}),this.content=Bt.create("DIV",{html:t.html||"",className:"ol-popup-content",parent:e}),t.minibar&&Bt.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),t.stopEvent&&(e.addEventListener("mousedown",function(i){i.stopPropagation()}),e.addEventListener("touchstart",function(i){i.stopPropagation()})),this._elt=e,this.setPositioning(t.positioning||"auto"),this.setPopupClass(t.popupClass||t.className||"default"),t.anim&&this.addPopupClass("anim"),t.position&&setTimeout(function(){this.show(t.position)}.bind(this))}getClassPositioning(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t}setClosebox(t){this.closeBox=t,t?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")}setPopupClass(t){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter(function(n){return n.length>0});t?t.split(" ").filter(function(n){return n.length>0}).forEach(function(n){e.push(n)}):e.push("default"),i.forEach(function(n){e.push(n)}),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)}addPopupClass(t){this.element.classList.add(t)}removePopupClass(t){this.element.classList.remove(t)}setPositioning(t){t!==void 0&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),this.autoPositioning.length==1&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,(t=t.replace(/auto/g,"center"))=="center"&&(t="bottom-center"),this.setPositioning_(t))}setPositioning_(t){if(this.element){super.setPositioning(t),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter(function(i){return i.length>0});this.element.classList.add.apply(this.element.classList,e)}}getVisible(){return this.element.classList.contains("visible")}show(t,e){e||typeof t!="string"||(e=t,t=null),t===!0&&(t=this.getPosition());var i=this,n=this.getMap();if(n&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):Bt.create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(s){s.addEventListener("load",function(){try{n.renderSync()}catch{}i.content.dispatchEvent(new Event("scroll"))})})),t)){if(this.autoPositioning){var r=n.getPixelFromCoordinate(t),o=n.getSize(),a=[];this.autoPositioning[0]=="auto"?a[0]=r[1]<o[1]/3?"top":"bottom":a[0]=this.autoPositioning[0],a[1]=r[0]<2*o[0]/3?"left":"right",this.setPositioning_(a[0]+"-"+a[1]),this.offsetBox&&this.setOffset([this.offsetBox[a[1]=="left"?2:0],this.offsetBox[a[0]=="top"?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(t),this.element.parentElement.style.display="",typeof this.onshow=="function"&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){i.element.classList.add("visible")},0)}}hide(){this.getPosition()!=null&&(typeof this.onclose=="function"&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))}},NI=class extends BI{constructor(t){(t=t||{}).popupClass=(t.popupClass||"")+" placemark anim",t.positioning="bottom-center",super(t),this.setPositioning=function(){},t.color&&(this.element.style.color=t.color),t.backgroundColor&&(this.element.style.backgroundColor=t.backgroundColor),t.contentColor&&this.setContentColor(t.contentColor),t.size&&this.setRadius(t.size)}show(t,e){t===!0&&(t=this.getPosition()),this.hide(),super.show(t,e)}setColor(t){this.element.style.color=t}setBackgroundColor(t){this._elt.style.backgroundColor=t}setContentColor(t){var e=this.element.getElementsByClassName("ol-popup-content")[0];e&&(e.style.color=t)}setClassName(t){var e=this.element.className;this.element.className="ol-popup placemark ol-popup-bottom ol-popup-center "+(/visible/.test(e)?"visible ":"")+(/anim/.test(e)?"anim ":"")+t}setRadius(t){this.element.style.fontSize=t+"px"}},gm=Cr({name:"ZoomInOut",props:{xmap:{type:Object},hasLayerTree:vr().def(!1),isInternet:vr().def(!0),hasFullScreen:vr().def(!0)},components:{Icon:Nr},emits:["locate"],setup(t,{emit:e}){const i=w(()=>t.hasLayerTree),n=w(()=>t.hasFullScreen),r=w(()=>{let h=t.isInternet;return t.xmap&&(h=h&&t.xmap.isInternet),h});let o=t.xmap;se(()=>t.xmap,h=>{o=h});const a=$(!1),s=w(()=>a.value?"":""),l=w(()=>{let h="";return a.value&&(h="background-color:#ccc"),h}),u=w(()=>{let h="";return zi.layerTree&&(h="background-color:#ccc"),h});let c;return Rt(()=>{if(o){const h=o.map.getControls();if(h){const d=h.getArray()[0];o.map.removeControl(d)}}}),{isFullScreen:a,toggleMapScreen:function(){if(a.value)D5(),setTimeout(()=>{$w()},300);else{const h=o.targetContainer,d=document.getElementById(h);if(d)Ky(d);else{const p=document.getElementById(o.target);p&&Ky(p)}}a.value=!a.value},fullScreenTip:s,fullScreenStyle:l,zoomInOut:function(h=!0){if(!o)return;let d=o.MapView.getZoom()+(h?1:-1);d<=0&&(d=1),o.MapView.setZoom(d)},layerTreeSelected:u,changeLayerTree:function(){const h=zi.layerTree;zi.layerTree=!h},hasLayerTreeRef:i,isInternetRef:r,goHomeView:function(){o.goHomeView()},doGeoLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(h=>{if(h.coords&&o){const d=[h.coords.longitude,h.coords.latitude];c||(c=new NI({contentColor:"#000",autoPan:{animation:{duration:250}}})),o.map.addOverlay(c),c.show(at.fromLonLat(d,o.MapView.getProjection())),o.zoomToCenter(d,15),setTimeout(()=>{c&&o.map.getOverlays().pop()},2e3)}}):alert("")},hasFullScreenRef:n}}});const VI={class:"tool-container zoomFullList"},$I={title:""},GI={title:""},HI={title:""},WI=["title"],UI={title:""},XI={title:""};gm.render=function(t,e,i,n,r,o){const a=Mn("Icon");return ii(),en("ul",VI,[Ve("li",{onClick:e[0]||(e[0]=s=>t.zoomInOut())},[Ve("span",$I,[mt(a,{icon:"ant-design:plus-outlined"})])]),Ve("li",{onClick:e[1]||(e[1]=s=>t.zoomInOut(!1))},[Ve("span",GI,[mt(a,{icon:"ant-design:minus-outlined"})])]),t.hasLayerTreeRef?(ii(),en("li",{key:0,onClick:e[2]||(e[2]=(...s)=>t.changeLayerTree&&t.changeLayerTree(...s)),style:Fo(t.layerTreeSelected)},[Ve("span",HI,[mt(a,{icon:"gis:layer-stack-o"})])],4)):Ki("v-if",!0),t.hasFullScreenRef?(ii(),en("li",{key:1,onClick:e[3]||(e[3]=(...s)=>t.toggleMapScreen&&t.toggleMapScreen(...s)),style:Fo(t.fullScreenStyle)},[Ve("span",{title:t.fullScreenTip},[t.isFullScreen?(ii(),Ao(a,{key:1,icon:"ant-design:fullscreen-exit-outlined"})):(ii(),Ao(a,{key:0,icon:"ant-design:fullscreen-outlined"}))],8,WI)],4)):Ki("v-if",!0),Ve("li",{onClick:e[4]||(e[4]=(...s)=>t.goHomeView&&t.goHomeView(...s))},[Ve("span",UI,[mt(a,{icon:"ant-design:home-outlined"})])]),t.isInternetRef?(ii(),en("li",{key:2,onClick:e[5]||(e[5]=(...s)=>t.doGeoLocation&&t.doGeoLocation(...s))},[Ve("span",XI,[mt(a,{icon:"ant-design:aim-outlined"})])])):Ki("v-if",!0)])},gm.__file="src/components/MapTools/zoomFullBar.vue";const YI={class:"row q-gutter-sm"};var ZS=Cr({__name:"contextMenu",props:{xmap:{type:Bs,required:!0},replace:{type:Boolean,default:!1},moreMenuList:{type:Array,default:[]},target:{type:[String,Element,Boolean],default:"map"}},emits:["itemClicked"],setup(t,{emit:e}){const i=nI,n=e,r=t,o=[{id:"show-position",label:"",icon:"ic:baseline-info"},{},{id:"zoom-in",label:"",icon:"ic:baseline-zoom-in"},{id:"zoom-out",label:"",icon:"ic:baseline-zoom-out"},{id:"locate-center",label:"",icon:"ion:md-locate"}],a=w(()=>{if(Al(r.target)){const u=r.target;return u.startsWith("#")||u.startsWith(".")?r.target:`#${u}`}return r.target}),s=w(()=>r.replace?r.moreMenuList&&r.moreMenuList.length>0?r.moreMenuList:o:r.moreMenuList&&r.moreMenuList.length>0?[...o,...r.moreMenuList]:o),l=Ni("_q_");return(u,c)=>{const h=Mn("Icon");return ii(),Ao(bi(Au),{"transition-show":"flip-right","transition-hide":"flip-left",target:a.value,"context-menu":""},{default:Oo(()=>[mt(bi(TS),{dense:"",style:{"min-width":"100px"}},{default:Oo(()=>[(ii(!0),en(L0,null,VC(s.value,(d,p)=>(ii(),en(L0,null,[d.id?Vi((ii(),Ao(bi(Du),{key:0,onClick:f=>function(g){const y=r.xmap;switch(g.id){case"show-position":if(!y)throw new Error("XMap");const _=y.CurrentPosition,b=y.MapView.getProjection(),m=b.getCode();let v="";if(m==="EPSG:4326"||m==="EPSG:4490")v=`${_[0]} ${_[1]}`;else{const P=at.transformCoordinate(_,b,st("EPSG:4326"));v=`${_[0].toFixed(4)} ${_[1].toFixed(4)}  <br/>${P[0].toFixed(4)} ${P[1].toFixed(4)}`}l.dialog({title:"",message:v,html:!0});break;case"zoom-in":if(!y)throw new Error("XMap");const S=y.MapView,C=S.getZoom(),k=S.getConstrainedZoom(C+1);S.setZoom(k);break;case"zoom-out":if(!y)throw new Error("XMap");const L=y.MapView,A=L.getZoom(),q=L.getConstrainedZoom(A-1);L.setZoom(q);break;case"locate-center":if(!y)throw new Error("XMap");y.MapView.setCenter(y.CurrentPosition);break;default:n("itemClicked",g)}}(d),clickable:""},{default:Oo(()=>[mt(bi(yr),null,{default:Oo(()=>[Ve("div",YI,[d.icon?(ii(),Ao(h,{key:0,icon:d.icon},null,8,["icon"])):Ki("v-if",!0),Ve("span",null,$C(d.label),1)])]),_:2},1024)]),_:2},1032,["onClick"])),[[bi(i)]]):(ii(),Ao(bi(lo),{key:1}))],64))),256))]),_:1})]),_:1},8,["target"])}}});ZS.__file="src/components/MapTools/contextMenu.vue";var mm=Cr({name:"myOLMap",components:{ZoomFullBar:gm,ContextMenu:ZS},props:{mapid:ru().def("map"),mapgroup:ru().def("map"),hasLayerManager:vr().def(!1),initTDTLayers:Ag().def(["img_w","cia_w"]),viewProjection:xv([String,gr,Object]).def("EPSG:3857"),defaultCenter:Ag().def([108.95,34.5]),viewOptions:bv(),multiWorld:vr().def(!1),enableContextMenu:vr().def(!0)},emits:["mapInited"],setup(t,{emit:e}){const i=t.mapid,n=$(t.mapid),r=$(t.mapid+"_Container"),o=t.mapgroup;let a,s=t.viewProjection;se(()=>t.viewProjection,p=>{h(p),d()});const l=w(()=>t.enableContextMenu),u=$();let c;function h(p){a=t.viewOptions??{projection:p,center:t.defaultCenter,zoom:3,multiWorld:t.multiWorld},!a.center&&t.defaultCenter&&(a.center=t.defaultCenter),c&&(c.dispose(),c=void 0,u.value=void 0),c=new Bs(i,o,t.hasLayerManager),t.hasLayerManager}function d(){c.initMapView(a),u.value=c;let p=c.WMTSTool;if(t.initTDTLayers){const f=t.initTDTLayers;f&&f.length>0&&f.forEach(g=>{const y=g.toLocaleLowerCase(),_=p.getTDTAlias(y);p.addTDTLayer(g,_)})}e("mapInited",{xmap:c,wmtsTool:p})}return Rt(()=>{a||(h(s),d())}),{mapIDRef:n,mapContainerRef:r,mapRef:u,enableMenuComputed:l}}});const KI=["id"],ZI={class:"mainMapPanel"},QI=["id"],JI={class:"mapLeftPanel"},eP={class:"mapRightPanel"},tP={key:0,class:"extendmenu"},iP={style:{position:"relative"}};mm.render=function(t,e,i,n,r,o){const a=Mn("ZoomFullBar"),s=Mn("ContextMenu");return ii(),en("div",{id:t.mapContainerRef,class:"mapContainer"},[Ve("div",ZI,[Ve("div",{id:t.mapIDRef,class:"mainMapPanel"},null,8,QI),Ve("div",null,[Ha(t.$slots,"default")])]),Ve("div",JI,[Ha(t.$slots,"mapLeftPanel")]),Ve("div",eP,[Ha(t.$slots,"mapRightPanel",{},()=>[Ki(" "),t.mapRef?(ii(),en("div",tP,[Ve("div",iP,[mt(a,{xmap:t.mapRef,hasLayerTree:!1},null,8,["xmap"])]),Ki("  "),Ha(t.$slots,"mapRightExtend")])):Ki("v-if",!0)])]),t.enableMenuComputed?(ii(),Ao(s,{key:0,target:t.mapIDRef,xmap:t.mapRef},null,8,["target","xmap"])):Ki("v-if",!0)],8,KI)},mm.__file="src/components/OLXmap/index.vue";var sb=Cr({name:"xmapView",props:{hasLayerTree:vr().def(!1),viewHeight:Fg().isRequired,viewWidth:Fg().isRequired,mapid:ru().def("map"),mapgroup:ru().def("map"),viewProjection:xv([String,gr]).def("EPSG:4326"),initTDTLayers:Array,viewOptions:bv(),multiWorld:vr().def(!1)},components:{OLXMap:mm,DrawToolBar:Xg,MeasureToolBar:Yg,MenuToolBar:KS},emits:["mapInited"],setup(t,{attrs:e,slots:i,emit:n}){const r=$(t.hasLayerTree),o=$(t.viewHeight),a=$(t.viewWidth),s=$(t.initTDTLayers),l=$(),u=$();let c;function h(g){if(g){if(Al(g))g==="EPSG:4326"&&(s.value=t.initTDTLayers??["vec_c","cva_c"]);else{const y=g.getCode();(y==="EPSG:4326"||y==="EPSG:4490")&&(s.value=t.initTDTLayers??["vec_c","cva_c"])}l.value=g}}h(t.viewProjection),se(()=>t.viewProjection,()=>{const g=t.viewProjection;g&&h(g)}),se(()=>t.viewHeight,g=>{o.value=g}),se(()=>t.viewWidth,g=>{a.value=g});const d=w(()=>`height:${o.value-55}px`),p=w(()=>`width:${a.value-20}px;`),f=w(()=>{const g=o.value,y=a.value;return $w(),`position:relative;width:${y};height:${g}px`});return Rt(()=>{}),ot(()=>{let g=c?.map;g&&g.dispose()}),{heightStyle:d,widthStyle:p,layerTreeVisible:w(()=>zi.layerTree),mapInitedHandler:function(g){c=g.xmap,u.value=c,n("mapInited",g)},mapRef:u,mainContainStyle:f,hasLayerTreeRef:r,initTDTLayersRef:s,viewProjectionRef:l,mapMenuState:zi,doLocation:function(g,y,_){if(c.map){const b=c.MapView,m=b.getProjection(),v=at.transformCoordinate([g,y],"EPSG:4326",m);b.setCenter(v),_&&_>=0&&b.setZoom(_)}}}}});const nP={style:{position:"relative"}};function QS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}sb.render=function(t,e,i,n,r,o){const a=Mn("MenuToolBar"),s=Mn("DrawToolBar"),l=Mn("MeasureToolBar"),u=Mn("OLXMap");return ii(),en("div",{class:"mainViewContent",style:Fo(t.mainContainStyle)},[mt(u,{mapid:t.mapid,viewOptions:t.viewOptions,"multi-world":t.multiWorld,mapgroup:t.mapgroup,hasLayerManager:!0,viewProjection:t.viewProjectionRef,initTDTLayers:t.initTDTLayersRef,onMapInited:t.mapInitedHandler},{mapLeftPanel:Oo(()=>[Ki(' class="mapstyle"  '),Ki(' <LayerTree class="layerTree" :style="heightStyle" v-show="layerTreeVisible"></LayerTree> '),Ki("  "),Ha(t.$slots,"mapLeftPanelGroup")]),mapRightExtend:Oo(()=>[Ki(" "),Ve("div",nP,[mt(a,{onLocate:t.doLocation},null,8,["onLocate"]),Vi(mt(s,{xmap:t.mapRef},null,8,["xmap"]),[[ah,t.mapMenuState.drawTool]]),Vi(mt(l,{xmap:t.mapRef},null,8,["xmap"]),[[ah,t.mapMenuState.measureTool]])]),Ki("  "),Ha(t.$slots,"extendMenuGroup")]),_:3},8,["mapid","viewOptions","multi-world","mapgroup","viewProjection","initTDTLayers","onMapInited"])],4)},sb.__file="src/components/XMapView/index.vue";var JS,lb={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Nl(t){return(t=Math.round(t))<0?0:t>255?255:t}function ub(t){return t<0?0:t>1?1:t}function rf(t){return t[t.length-1]==="%"?Nl(parseFloat(t)/100*255):Nl(parseInt(t))}function Dc(t){return t[t.length-1]==="%"?ub(parseFloat(t)/100):ub(parseFloat(t))}function of(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{JS={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in lb)return lb[i].slice();if(i[0]==="#")return i.length===4?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:i.length===7&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=i.indexOf("("),r=i.indexOf(")");if(n!==-1&&r+1===i.length){var o=i.substr(0,n),a=i.substr(n+1,r-(n+1)).split(","),s=1;switch(o){case"rgba":if(a.length!==4)return null;s=Dc(a.pop());case"rgb":return a.length!==3?null:[rf(a[0]),rf(a[1]),rf(a[2]),s];case"hsla":if(a.length!==4)return null;s=Dc(a.pop());case"hsl":if(a.length!==3)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Dc(a[1]),c=Dc(a[2]),h=c<=.5?c*(u+1):c+u-c*u,d=2*c-h;return[Nl(255*of(d,h,l+1/3)),Nl(255*of(d,h,l)),Nl(255*of(d,h,l-1/3)),s];default:return null}}return null}}catch{}class Oi{constructor(e,i,n,r=1){this.r=e,this.g=i,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof Oi)return e;if(typeof e!="string")return;const i=JS(e);return i?new Oi(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[e,i,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(i)},${Math.round(n)},${r})`}toArray(){const{r:e,g:i,b:n,a:r}=this;return r===0?[0,0,0,0]:[255*e/r,255*i/r,255*n/r,r]}toArray01(){const{r:e,g:i,b:n,a:r}=this;return r===0?[0,0,0,0]:[e/r,i/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:i,b:n,a:r}=this;return[e,i,n,r]}}Oi.black=new Oi(0,0,0,1),Oi.white=new Oi(1,1,1,1),Oi.transparent=new Oi(0,0,0,0),Oi.red=new Oi(1,0,0,1),Oi.blue=new Oi(0,0,1,1);var nn=Oi;function mu(t){return typeof t=="object"?["literal",t]:t}function rP(t,e){let i=t.stops;if(!i)return function(a,s){const l=["get",a.property];if(a.default===void 0)return s.type==="string"?["string",l]:l;if(s.type==="enum")return["match",l,Object.keys(s.values),l,a.default];{const u=[s.type==="color"?"to-color":s.type,l,mu(a.default)];return s.type==="array"&&u.splice(1,0,s.value,s.length||null),u}}(t,e);const n=i&&typeof i[0][0]=="object",r=n||t.property!==void 0,o=n||!r;return i=i.map(a=>!r&&e.tokens&&typeof a[1]=="string"?[a[0],oP(a[1])]:[a[0],mu(a[1])]),n?function(a,s,l){const u={},c={},h=[];for(let d=0;d<l.length;d++){const p=l[d],f=p[0].zoom;u[f]===void 0&&(u[f]={zoom:f,type:a.type,property:a.property,default:a.default},c[f]=[],h.push(f)),c[f].push([p[0].value,p[1]])}if(_m({},s)==="exponential"){const d=[vm(a),["linear"],["zoom"]];for(const p of h)ds(d,p,af(u[p],s,c[p]),!1);return d}{const d=["step",["zoom"]];for(const p of h)ds(d,p,af(u[p],s,c[p]),!0);return ym(d),d}}(t,e,i):o?function(a,s,l,u=["zoom"]){const c=_m(a,s);let h,d=!1;if(c==="interval")h=["step",u],d=!0;else{if(c!=="exponential")throw new Error(`Unknown zoom function type "${c}"`);{const p=a.base!==void 0?a.base:1;h=[vm(a),p===1?["linear"]:["exponential",p],u]}}for(const p of l)ds(h,p[0],p[1],d);return ym(h),h}(t,e,i):af(t,e,i)}function vm(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function cb(t,e){const i=mu(function(n,r){return n!==void 0?n:r!==void 0?r:void 0}(t.default,e.default));return i===void 0&&e.type==="resolvedImage"?"":i}function af(t,e,i){const n=_m(t,e),r=["get",t.property];if(n==="categorical"&&typeof i[0][0]=="boolean"){const o=["case"];for(const a of i)o.push(["==",r,a[0]],a[1]);return o.push(cb(t,e)),o}if(n==="categorical"){const o=["match",r];for(const a of i)ds(o,a[0],a[1],!1);return o.push(cb(t,e)),o}if(n==="interval"){const o=["step",["number",r]];for(const a of i)ds(o,a[0],a[1],!0);return ym(o),t.default===void 0?o:["case",["==",["typeof",r],"number"],o,mu(t.default)]}if(n==="exponential"){const o=t.base!==void 0?t.base:1,a=[vm(t),o===1?["linear"]:["exponential",o],["number",r]];for(const s of i)ds(a,s[0],s[1],!1);return t.default===void 0?a:["case",["==",["typeof",r],"number"],a,mu(t.default)]}throw new Error(`Unknown property function type ${n}`)}function ym(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function ds(t,e,i,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(i))}function _m(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function oP(t){const e=["concat"],i=/{([^{}]+)}/g;let n=0;for(let r=i.exec(t);r!==null;r=i.exec(t)){const o=t.slice(n,i.lastIndex-r[0].length);n=i.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}class aP extends Error{constructor(e,i){super(i),this.message=i,this.key=e}}var jn=aP;class e0{constructor(e,i=[]){this.parent=e,this.bindings={};for(const[n,r]of i)this.bindings[n]=r}concat(e){return new e0(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var sP=e0;const Cd={kind:"null"},Ee={kind:"number"},it={kind:"string"},Qe={kind:"boolean"},_r={kind:"color"},ps={kind:"object"},Je={kind:"value"},Md={kind:"collator"},kd={kind:"formatted"},ju={kind:"resolvedImage"};function ln(t,e){return{kind:"array",itemType:t,N:e}}function $t(t){if(t.kind==="array"){const e=$t(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}return t.kind}const lP=[Cd,Ee,it,Qe,_r,kd,ps,ln(Je),ju];function vu(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!vu(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const i of lP)if(!vu(i,e))return null}}return`Expected ${$t(t)} but found ${$t(e)} instead.`}function t0(t,e){return e.some(i=>i.kind===t.kind)}function yu(t,e){return e.some(i=>i==="null"?t===null:i==="array"?Array.isArray(t):i==="object"?t&&!Array.isArray(t)&&typeof t=="object":i===typeof t)}class i0{constructor(e,i,n){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class bm{constructor(e,i,n,r,o){this.text=e.normalize?e.normalize():e,this.image=i,this.scale=n,this.fontStack=r,this.textColor=o}}class Xn{constructor(e){this.sections=e}static fromString(e){return new Xn([new bm(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Xn?e:Xn.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const i of this.sections){if(i.image){e.push(["image",i.image.name]);continue}e.push(i.text);const n={};i.fontStack&&(n["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(n["font-scale"]=i.scale),i.textColor&&(n["text-color"]=["rgba"].concat(i.textColor.toArray())),e.push(n)}return e}}class mo{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new mo({name:e,available:!1}):null}serialize(){return["image",this.name]}}function eC(t,e,i,n){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255?n===void 0||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,i,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[t,e,i,n]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Yh(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof nn||t instanceof i0||t instanceof Xn||t instanceof mo)return!0;if(Array.isArray(t)){for(const e of t)if(!Yh(e))return!1;return!0}if(typeof t=="object"){for(const e in t)if(!Yh(t[e]))return!1;return!0}return!1}function hi(t){if(t===null)return Cd;if(typeof t=="string")return it;if(typeof t=="boolean")return Qe;if(typeof t=="number")return Ee;if(t instanceof nn)return _r;if(t instanceof i0)return Md;if(t instanceof Xn)return kd;if(t instanceof mo)return ju;if(Array.isArray(t)){const e=t.length;let i;for(const n of t){const r=hi(n);if(i){if(i===r)continue;i=Je;break}i=r}return ln(i||Je,e)}return ps}function Vl(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof nn||t instanceof Xn||t instanceof mo?t.toString():JSON.stringify(t)}class n0{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(e.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Yh(e[1]))return i.error("invalid value");const n=e[1];let r=hi(n);const o=i.expectedType;return r.kind!=="array"||r.N!==0||!o||o.kind!=="array"||typeof o.N=="number"&&o.N!==0||(r=o),new n0(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof nn?["rgba"].concat(this.value.toArray()):this.value instanceof Xn?this.value.serialize():this.value}}var Kh=n0,yi=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const sf={string:it,number:Ee,boolean:Qe,object:ps};class r0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let n,r=1;const o=e[0];if(o==="array"){let s,l;if(e.length>2){const u=e[1];if(typeof u!="string"||!(u in sf)||u==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);s=sf[u],r++}else s=Je;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);l=e[2],r++}n=ln(s,l)}else n=sf[o];const a=[];for(;r<e.length;r++){const s=i.parse(e[r],r,Je);if(!s)return null;a.push(s)}return new r0(n,a)}evaluate(e){for(let i=0;i<this.args.length;i++){const n=this.args[i].evaluate(e);if(!vu(this.type,hi(n)))return n;if(i===this.args.length-1)throw new yi(`Expected value to be of type ${$t(this.type)}, but found ${$t(hi(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,i=[e.kind];if(e.kind==="array"){const n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){i.push(n.kind);const r=e.N;(typeof r=="number"||this.args.length>1)&&i.push(r)}}return i.concat(this.args.map(n=>n.serialize()))}}var pr=r0;class Td{constructor(e){this.type=kd,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return i.error("First argument must be an image or text section.");const r=[];let o=!1;for(let a=1;a<=e.length-1;++a){const s=e[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let l=null;if(s["font-scale"]&&(l=i.parse(s["font-scale"],1,Ee),!l))return null;let u=null;if(s["text-font"]&&(u=i.parse(s["text-font"],1,ln(it)),!u))return null;let c=null;if(s["text-color"]&&(c=i.parse(s["text-color"],1,_r),!c))return null;const h=r[r.length-1];h.scale=l,h.font=u,h.textColor=c}else{const l=i.parse(e[a],1,Je);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:l,scale:null,font:null,textColor:null})}}return new Td(r)}evaluate(e){return new Xn(this.sections.map(i=>{const n=i.content.evaluate(e);return hi(n)===ju?new bm("",n,null,null,null):new bm(Vl(n),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))}eachChild(e){for(const i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const i of this.sections){e.push(i.content.serialize());const n={};i.scale&&(n["font-scale"]=i.scale.serialize()),i.font&&(n["text-font"]=i.font.serialize()),i.textColor&&(n["text-color"]=i.textColor.serialize()),e.push(n)}return e}}class Ed{constructor(e){this.type=ju,this.input=e}static parse(e,i){if(e.length!==2)return i.error("Expected two arguments.");const n=i.parse(e[1],1,it);return n?new Ed(n):i.error("No image name provided.")}evaluate(e){const i=this.input.evaluate(e),n=mo.fromString(i);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(i)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const uP={"to-boolean":Qe,"to-color":_r,"to-number":Ee,"to-string":it};class o0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return i.error("Expected one argument.");const r=uP[n],o=[];for(let a=1;a<e.length;a++){const s=i.parse(e[a],a,Je);if(!s)return null;o.push(s)}return new o0(r,o)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let i,n;for(const r of this.args){if(i=r.evaluate(e),n=null,i instanceof nn)return i;if(typeof i=="string"){const o=e.parseColor(i);if(o)return o}else if(Array.isArray(i)&&(n=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:eC(i[0],i[1],i[2],i[3]),!n))return new nn(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new yi(n||`Could not parse color from value '${typeof i=="string"?i:String(JSON.stringify(i))}'`)}if(this.type.kind==="number"){let i=null;for(const n of this.args){if(i=n.evaluate(e),i===null)return 0;const r=Number(i);if(!isNaN(r))return r}throw new yi(`Could not convert ${JSON.stringify(i)} to number.`)}return this.type.kind==="formatted"?Xn.fromString(Vl(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?mo.fromString(Vl(this.args[0].evaluate(e))):Vl(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Td([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ed(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(i=>{e.push(i.serialize())}),e}}var ts=o0;const cP=["Unknown","Point","LineString","Polygon"];var tC=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?cP[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:n}=this.featureTileCoord,r=i*e-t[0],o=n*e-t[1];return this.featureDistanceData.bearing[0]*r+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=nn.parse(t)),e}};class is{constructor(e,i,n,r){this.name=e,this.type=i,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,i){const n=e[0],r=is.definitions[n];if(!r)return i.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter(([u])=>!Array.isArray(u)||u.length===e.length-1);let l=null;for(const[u,c]of s){l=new oC(i.registry,i.path,null,i.scope);const h=[];let d=!1;for(let p=1;p<e.length;p++){const f=e[p],g=Array.isArray(u)?u[p-1]:u.type,y=l.parse(f,1+h.length,g);if(!y){d=!0;break}h.push(y)}if(!d)if(Array.isArray(u)&&u.length!==h.length)l.error(`Expected ${u.length} arguments, but found ${h.length} instead.`);else{for(let p=0;p<h.length;p++){const f=Array.isArray(u)?u[p]:u.type,g=h[p];l.concat(p+1).checkSubtype(f,g.type)}if(l.errors.length===0)return new is(n,o,c,h)}}if(s.length===1)i.errors.push(...l.errors);else{const u=(s.length?s:a).map(([h])=>{return d=h,Array.isArray(d)?`(${d.map($t).join(", ")})`:`(${$t(d.type)}...)`;var d}).join(" | "),c=[];for(let h=1;h<e.length;h++){const d=i.parse(e[h],1+c.length);if(!d)return null;c.push($t(d.type))}i.error(`Expected arguments of type ${u}, but found (${c.join(", ")}) instead.`)}return null}static register(e,i){is.definitions=i;for(const n in i)e[n]=is}}var Ws=is;class Ld{constructor(e,i,n){this.type=Md,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(e.length!==2)return i.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return i.error("Collator options argument must be an object.");const r=i.parse(n["case-sensitive"]!==void 0&&n["case-sensitive"],1,Qe);if(!r)return null;const o=i.parse(n["diacritic-sensitive"]!==void 0&&n["diacritic-sensitive"],1,Qe);if(!o)return null;let a=null;return n.locale&&(a=i.parse(n.locale,1,it),!a)?null:new Ld(r,o,a)}evaluate(e){return new i0(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const no=8192;function a0(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function jc(t,e){return!(t[0]<=e[0])&&!(t[2]>=e[2])&&!(t[1]<=e[1])&&!(t[3]>=e[3])}function hP(t,e){const i=function(o){return(180+o)/360}(t[0]),n=function(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}(t[1]),r=Math.pow(2,e.z);return[Math.round(i*r*no),Math.round(n*r*no)]}function dP(t,e,i){const n=t[0]-e[0],r=t[1]-e[1],o=t[0]-i[0],a=t[1]-i[1];return n*a-o*r==0&&n*o<=0&&r*a<=0}function pP(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function s0(t,e){let i=!1;for(let n=0,r=e.length;n<r;n++){const o=e[n];for(let a=0,s=o.length;a<s-1;a++){if(dP(t,o[a],o[a+1]))return!1;pP(t,o[a],o[a+1])&&(i=!i)}}return i}function fP(t,e){for(let i=0;i<e.length;i++)if(s0(t,e[i]))return!0;return!1}function hb(t,e,i,n){const r=t[0]-i[0],o=t[1]-i[1],a=e[0]-i[0],s=e[1]-i[1],l=n[0]-i[0],u=n[1]-i[1],c=r*u-l*o,h=a*u-l*s;return c>0&&h<0||c<0&&h>0}function gP(t,e,i,n){const r=[e[0]-t[0],e[1]-t[1]];return(o=[n[0]-i[0],n[1]-i[1]])[0]*(a=r)[1]-o[1]*a[0]!=0&&!(!hb(t,e,i,n)||!hb(i,n,t,e));var o,a}function mP(t,e,i){for(const n of i)for(let r=0;r<n.length-1;++r)if(gP(t,e,n[r],n[r+1]))return!0;return!1}function iC(t,e){for(let i=0;i<t.length;++i)if(!s0(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(mP(t[i],t[i+1],e))return!1;return!0}function vP(t,e){for(let i=0;i<e.length;i++)if(iC(t,e[i]))return!0;return!1}function xm(t,e,i){const n=[];for(let r=0;r<t.length;r++){const o=[];for(let a=0;a<t[r].length;a++){const s=hP(t[r][a],i);a0(e,s),o.push(s)}n.push(o)}return n}function db(t,e,i){const n=[];for(let r=0;r<t.length;r++){const o=xm(t[r],e,i);n.push(o)}return n}function nC(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const r=.5*n;let o=t[0]-i[0]>r?-n:i[0]-t[0]>r?n:0;o===0&&(o=t[0]-i[2]>r?-n:i[2]-t[0]>r?n:0),t[0]+=o}a0(e,t)}function pb(t,e,i,n){const r=Math.pow(2,n.z)*no,o=[n.x*no,n.y*no],a=[];if(!t)return a;for(const s of t)for(const l of s){const u=[l.x+o[0],l.y+o[1]];nC(u,e,i,r),a.push(u)}return a}function fb(t,e,i,n){const r=Math.pow(2,n.z)*no,o=[n.x*no,n.y*no],a=[];if(!t)return a;for(const s of t){const l=[];for(const u of s){const c=[u.x+o[0],u.y+o[1]];a0(e,c),l.push(c)}a.push(l)}if(e[2]-e[0]<=r/2){(function(s){s[0]=s[1]=1/0,s[2]=s[3]=-1/0})(e);for(const s of a)for(const l of s)nC(l,e,i,r)}return a}class $l{constructor(e,i){this.type=Qe,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Yh(e[1])){const n=e[1];if(n.type==="FeatureCollection")for(let r=0;r<n.features.length;++r){const o=n.features[r].geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new $l(n,n.features[r].geometry)}else if(n.type==="Feature"){const r=n.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new $l(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new $l(n,n)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,n){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=i.canonicalID();if(!a)return!1;if(n.type==="Polygon"){const s=xm(n.coordinates,o,a),l=pb(i.geometry(),r,o,a);if(!jc(r,o))return!1;for(const u of l)if(!s0(u,s))return!1}if(n.type==="MultiPolygon"){const s=db(n.coordinates,o,a),l=pb(i.geometry(),r,o,a);if(!jc(r,o))return!1;for(const u of l)if(!fP(u,s))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,n){const r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=i.canonicalID();if(!a)return!1;if(n.type==="Polygon"){const s=xm(n.coordinates,o,a),l=fb(i.geometry(),r,o,a);if(!jc(r,o))return!1;for(const u of l)if(!iC(u,s))return!1}if(n.type==="MultiPolygon"){const s=db(n.coordinates,o,a),l=fb(i.geometry(),r,o,a);if(!jc(r,o))return!1;for(const u of l)if(!vP(u,s))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var l0=$l;function Id(t){if(t instanceof Ws&&(t.name==="get"&&t.args.length===1||t.name==="feature-state"||t.name==="has"&&t.args.length===1||t.name==="properties"||t.name==="geometry-type"||t.name==="id"||/^filter-/.test(t.name))||t instanceof l0)return!1;let e=!0;return t.eachChild(i=>{e&&!Id(i)&&(e=!1)}),e}function u0(t){if(t instanceof Ws&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(i=>{e&&!u0(i)&&(e=!1)}),e}function c0(t,e){if(t instanceof Ws&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild(n=>{i&&!c0(n,e)&&(i=!1)}),i}class h0{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const n=e[1];return i.scope.has(n)?new h0(n,i.scope.get(n)):i.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var rC=h0;class d0{constructor(e,i=[],n,r=new sP,o=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=r,this.errors=o,this.expectedType=n}parse(e,i,n,r,o={}){return i?this.concat(i,n,r)._parse(e,o):this._parse(e,o)}_parse(e,i){function n(r,o,a){return a==="assert"?new pr(o,[r]):a==="coerce"?new ts(o,[r]):r}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let a=o.parse(e,this);if(!a)return null;if(this.expectedType){const s=this.expectedType,l=a.type;if(s.kind!=="string"&&s.kind!=="number"&&s.kind!=="boolean"&&s.kind!=="object"&&s.kind!=="array"||l.kind!=="value")if(s.kind!=="color"&&s.kind!=="formatted"&&s.kind!=="resolvedImage"||l.kind!=="value"&&l.kind!=="string"){if(this.checkSubtype(s,l))return null}else a=n(a,s,i.typeAnnotation||"coerce");else a=n(a,s,i.typeAnnotation||"assert")}if(!(a instanceof Kh)&&a.type.kind!=="resolvedImage"&&wm(a)){const s=new tC;try{a=new Kh(a.type,a.evaluate(s))}catch(l){return this.error(l.message),null}}return a}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return e===void 0?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,i,n){const r=typeof e=="number"?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new d0(this.registry,r,i||null,o,this.errors)}error(e,...i){const n=`${this.key}${i.map(r=>`[${r}]`).join("")}`;this.errors.push(new jn(n,e))}checkSubtype(e,i){const n=vu(e,i);return n&&this.error(n),n}}var oC=d0;function wm(t){if(t instanceof rC)return wm(t.boundExpression);if(t instanceof Ws&&t.name==="error"||t instanceof Ld||t instanceof l0)return!1;const e=t instanceof ts||t instanceof pr;let i=!0;return t.eachChild(n=>{i=e?i&&wm(n):i&&n instanceof Kh}),!!i&&Id(t)&&c0(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function aC(t,e){const i=t.length-1;let n,r,o=0,a=i,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),n=t[s],r=t[s+1],n<=e){if(s===i||e<r)return s;o=s+1}else{if(!(n>e))throw new yi("Input is not a number.");a=s-1}return 0}class p0{constructor(e,i,n){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(const[r,o]of n)this.labels.push(r),this.outputs.push(o)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");const n=i.parse(e[1],1,Ee);if(!n)return null;const r=[];let o=null;i.expectedType&&i.expectedType.kind!=="value"&&(o=i.expectedType);for(let a=1;a<e.length;a+=2){const s=a===1?-1/0:e[a],l=e[a+1],u=a,c=a+1;if(typeof s!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=s)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const h=i.parse(l,c,o);if(!h)return null;o=o||h.type,r.push([s,h])}return new p0(o,n,r)}evaluate(e){const i=this.labels,n=this.outputs;if(i.length===1)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=i[0])return n[0].evaluate(e);const o=i.length;return r>=i[o-1]?n[o-1].evaluate(e):n[aC(i,r)].evaluate(e)}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e}}var sC=p0,yP=$a;function $a(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}$a.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},$a.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},$a.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},$a.prototype.solveCurveX=function(t,e){var i,n,r,o,a;for(e===void 0&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?i=r:n=r,r=.5*(n-i)+i}return r},$a.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var _P=QS(yP);function Yi(t,e,i){return t*(1-i)+e*i}var bP=Object.freeze({__proto__:null,number:Yi,color:function(t,e,i){return new nn(Yi(t.r,e.r,i),Yi(t.g,e.g,i),Yi(t.b,e.b,i),Yi(t.a,e.a,i))},array:function(t,e,i){return t.map((n,r)=>Yi(n,e[r],i))}});const lC=.95047,uC=1.08883,cC=4/29,fs=6/29,hC=3*fs*fs,xP=fs*fs*fs,wP=Math.PI/180,SP=180/Math.PI;function lf(t){return t>xP?Math.pow(t,1/3):t/hC+cC}function uf(t){return t>fs?t*t*t:hC*(t-cC)}function hf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function df(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dC(t){const e=df(t.r),i=df(t.g),n=df(t.b),r=lf((.4124564*e+.3575761*i+.1804375*n)/lC),o=lf((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-lf((.0193339*e+.119192*i+.9503041*n)/uC)),alpha:t.a}}function pC(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*uf(e),i=lC*uf(i),n=uC*uf(n),new nn(hf(3.2404542*i-1.5371385*e-.4985314*n),hf(-.969266*i+1.8760108*e+.041556*n),hf(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function CP(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const Bc={forward:dC,reverse:pC,interpolate:function(t,e,i){return{l:Yi(t.l,e.l,i),a:Yi(t.a,e.a,i),b:Yi(t.b,e.b,i),alpha:Yi(t.alpha,e.alpha,i)}}},Nc={forward:function(t){const{l:e,a:i,b:n}=dC(t),r=Math.atan2(n,i)*SP;return{h:r<0?r+360:r,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*wP,i=t.c;return pC({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:CP(t.h,e.h,i),c:Yi(t.c,e.c,i),l:Yi(t.l,e.l,i),alpha:Yi(t.alpha,e.alpha,i)}}};class Zh{constructor(e,i,n,r,o){this.type=e,this.operator=i,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(e,i,n,r){let o=0;if(e.name==="exponential")o=pf(i,e.base,n,r);else if(e.name==="linear")o=pf(i,1,n,r);else if(e.name==="cubic-bezier"){const a=e.controlPoints;o=new _P(a[0],a[1],a[2],a[3]).solve(pf(i,1,n,r))}return o}static parse(e,i){let[n,r,o,...a]=e;if(!Array.isArray(r)||r.length===0)return i.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const u=r[1];if(typeof u!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:u}}else{if(r[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const u=r.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(o=i.parse(o,2,Ee),!o)return null;const s=[];let l=null;n==="interpolate-hcl"||n==="interpolate-lab"?l=_r:i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);for(let u=0;u<a.length;u+=2){const c=a[u],h=a[u+1],d=u+3,p=u+4;if(typeof c!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(s.length&&s[s.length-1][0]>=c)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const f=i.parse(h,p,l);if(!f)return null;l=l||f.type,s.push([c,f])}return l.kind==="number"||l.kind==="color"||l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number"?new Zh(l,n,r,o,s):i.error(`Type ${$t(l)} is not interpolatable.`)}evaluate(e){const i=this.labels,n=this.outputs;if(i.length===1)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=i[0])return n[0].evaluate(e);const o=i.length;if(r>=i[o-1])return n[o-1].evaluate(e);const a=aC(i,r),s=i[a],l=i[a+1],u=Zh.interpolationFactor(this.interpolation,r,s,l),c=n[a].evaluate(e),h=n[a+1].evaluate(e);return this.operator==="interpolate"?bP[this.type.kind.toLowerCase()](c,h,u):this.operator==="interpolate-hcl"?Nc.reverse(Nc.interpolate(Nc.forward(c),Nc.forward(h),u)):Bc.reverse(Bc.interpolate(Bc.forward(c),Bc.forward(h),u))}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)i.push(this.labels[n],this.outputs[n].serialize());return i}}function pf(t,e,i,n){const r=n-i,o=t-i;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}var ta=Zh;class f0{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expectected at least one argument.");let n=null;const r=i.expectedType;r&&r.kind!=="value"&&(n=r);const o=[];for(const s of e.slice(1)){const l=i.parse(s,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,o.push(l)}const a=r&&o.some(s=>vu(r,s.type));return new f0(a?Je:n,o)}evaluate(e){let i,n=null,r=0;for(const o of this.args){if(r++,n=o.evaluate(e),n&&n instanceof mo&&!n.available&&(i||(i=n),n=null,r===this.args.length))return i;if(n!==null)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var fC=f0;class g0{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let o=1;o<e.length-1;o+=2){const a=e[o];if(typeof a!="string")return i.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return i.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=i.parse(e[o+1],o+1);if(!s)return null;n.push([a,s])}const r=i.parse(e[e.length-1],e.length-1,i.expectedType,n);return r?new g0(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[i,n]of this.bindings)e.push(i,n.serialize());return e.push(this.result.serialize()),e}}var gC=g0;class m0{constructor(e,i,n){this.type=e,this.index=i,this.input=n}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,Ee),r=i.parse(e[2],2,ln(i.expectedType||Je));if(!n||!r)return null;const o=r.type;return new m0(o.itemType,n,r)}evaluate(e){const i=this.index.evaluate(e),n=this.input.evaluate(e);if(i<0)throw new yi(`Array index out of bounds: ${i} < 0.`);if(i>=n.length)throw new yi(`Array index out of bounds: ${i} > ${n.length-1}.`);if(i!==Math.floor(i))throw new yi(`Array index must be an integer, but found ${i} instead.`);return n[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var MP=m0;class v0{constructor(e,i){this.type=Qe,this.needle=e,this.haystack=i}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,Je),r=i.parse(e[2],2,Je);return n&&r?t0(n.type,[Qe,it,Ee,Cd,Je])?new v0(n,r):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(n.type)} instead`):null}evaluate(e){const i=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!yu(i,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${$t(hi(i))} instead.`);if(!yu(n,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${$t(hi(n))} instead.`);return n.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var kP=v0;class Qh{constructor(e,i,n){this.type=Ee,this.needle=e,this.haystack=i,this.fromIndex=n}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,Je),r=i.parse(e[2],2,Je);if(!n||!r)return null;if(!t0(n.type,[Qe,it,Ee,Cd,Je]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(n.type)} instead`);if(e.length===4){const o=i.parse(e[3],3,Ee);return o?new Qh(n,r,o):null}return new Qh(n,r)}evaluate(e){const i=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!yu(i,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${$t(hi(i))} instead.`);if(!yu(n,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${$t(hi(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(i,r)}return n.indexOf(i)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var TP=Qh;class y0{constructor(e,i,n,r,o,a){this.inputType=e,this.type=i,this.input=n,this.cases=r,this.outputs=o,this.otherwise=a}static parse(e,i){if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");let n,r;i.expectedType&&i.expectedType.kind!=="value"&&(r=i.expectedType);const o={},a=[];for(let u=2;u<e.length-1;u+=2){let c=e[u];const h=e[u+1];Array.isArray(c)||(c=[c]);const d=i.concat(u);if(c.length===0)return d.error("Expected at least one branch label.");for(const f of c){if(typeof f!="number"&&typeof f!="string")return d.error("Branch labels must be numbers or strings.");if(typeof f=="number"&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof f=="number"&&Math.floor(f)!==f)return d.error("Numeric branch labels must be integer values.");if(n){if(d.checkSubtype(n,hi(f)))return null}else n=hi(f);if(o[String(f)]!==void 0)return d.error("Branch labels must be unique.");o[String(f)]=a.length}const p=i.parse(h,u,r);if(!p)return null;r=r||p.type,a.push(p)}const s=i.parse(e[1],1,Je);if(!s)return null;const l=i.parse(e[e.length-1],e.length-1,r);return l?s.type.kind!=="value"&&i.concat(1).checkSubtype(n,s.type)?null:new y0(n,r,s,o,a,l):null}evaluate(e){const i=this.input.evaluate(e);return(hi(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),n=[],r={};for(const a of i){const s=r[this.cases[a]];s===void 0?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[s][1].push(a)}const o=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,s]of n)s.length===1?e.push(o(s[0])):e.push(s.map(o)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var EP=y0;class _0{constructor(e,i,n){this.type=e,this.branches=i,this.otherwise=n}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");let n;i.expectedType&&i.expectedType.kind!=="value"&&(n=i.expectedType);const r=[];for(let a=1;a<e.length-1;a+=2){const s=i.parse(e[a],a,Qe);if(!s)return null;const l=i.parse(e[a+1],a+1,n);if(!l)return null;r.push([s,l]),n=n||l.type}const o=i.parse(e[e.length-1],e.length-1,n);return o?new _0(n,r,o):null}evaluate(e){for(const[i,n]of this.branches)if(i.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[i,n]of this.branches)e(i),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var LP=_0;class Jh{constructor(e,i,n,r){this.type=e,this.input=i,this.beginIndex=n,this.endIndex=r}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=i.parse(e[1],1,Je),r=i.parse(e[2],2,Ee);if(!n||!r)return null;if(!t0(n.type,[ln(Je),it,Je]))return i.error(`Expected first argument to be of type array or string, but found ${$t(n.type)} instead`);if(e.length===4){const o=i.parse(e[3],3,Ee);return o?new Jh(n.type,n,r,o):null}return new Jh(n.type,n,r)}evaluate(e){const i=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!yu(i,["string","array"]))throw new yi(`Expected first argument to be of type array or string, but found ${$t(hi(i))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return i.slice(n,r)}return i.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var IP=Jh;function gb(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function mC(t,e,i,n){return n.compare(e,i)===0}function Us(t,e,i){const n=t!=="=="&&t!=="!=";return class vC{constructor(o,a,s){this.type=Qe,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");const s=o[0];let l=a.parse(o[1],1,Je);if(!l)return null;if(!gb(s,l.type))return a.concat(1).error(`"${s}" comparisons are not supported for type '${$t(l.type)}'.`);let u=a.parse(o[2],2,Je);if(!u)return null;if(!gb(s,u.type))return a.concat(2).error(`"${s}" comparisons are not supported for type '${$t(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error(`Cannot compare types '${$t(l.type)}' and '${$t(u.type)}'.`);n&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new pr(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new pr(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(c=a.parse(o[3],3,Md),!c)return null}return new vC(l,u,c)}evaluate(o){const a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){const l=hi(a),u=hi(s);if(l.kind!==u.kind||l.kind!=="string"&&l.kind!=="number")throw new yi(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const l=hi(a),u=hi(s);if(l.kind!=="string"||u.kind!=="string")return e(o,a,s)}return this.collator?i(o,a,s,this.collator.evaluate(o)):e(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}serialize(){const o=[t];return this.eachChild(a=>{o.push(a.serialize())}),o}}}const PP=Us("==",function(t,e,i){return e===i},mC),qP=Us("!=",function(t,e,i){return e!==i},function(t,e,i,n){return!mC(0,e,i,n)}),RP=Us("<",function(t,e,i){return e<i},function(t,e,i,n){return n.compare(e,i)<0}),FP=Us(">",function(t,e,i){return e>i},function(t,e,i,n){return n.compare(e,i)>0}),AP=Us("<=",function(t,e,i){return e<=i},function(t,e,i,n){return n.compare(e,i)<=0}),OP=Us(">=",function(t,e,i){return e>=i},function(t,e,i,n){return n.compare(e,i)>=0});class b0{constructor(e,i,n,r,o,a){this.type=it,this.number=e,this.locale=i,this.currency=n,this.unit=r,this.minFractionDigits=o,this.maxFractionDigits=a}static parse(e,i){if(e.length!==3)return i.error("Expected two arguments.");const n=i.parse(e[1],1,Ee);if(!n)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return i.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=i.parse(r.locale,1,it),!o))return null;let a=null;if(r.currency&&(a=i.parse(r.currency,1,it),!a))return null;let s=null;if(r.unit&&(s=i.parse(r.unit,1,it),!s))return null;let l=null;if(r["min-fraction-digits"]&&(l=i.parse(r["min-fraction-digits"],1,Ee),!l))return null;let u=null;return r["max-fraction-digits"]&&(u=i.parse(r["max-fraction-digits"],1,Ee),!u)?null:new b0(n,o,a,s,l,u)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class x0{constructor(e){this.type=Ee,this.input=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=i.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${$t(n.type)} instead.`):new x0(n):null}evaluate(e){const i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new yi(`Expected value to be of type string or array, but found ${$t(hi(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(i=>{e.push(i.serialize())}),e}}const yC={"==":PP,"!=":qP,">":FP,"<":RP,">=":OP,"<=":AP,array:pr,at:MP,boolean:pr,case:LP,coalesce:fC,collator:Ld,format:Td,image:Ed,in:kP,"index-of":TP,interpolate:ta,"interpolate-hcl":ta,"interpolate-lab":ta,length:x0,let:gC,literal:Kh,match:EP,number:pr,"number-format":b0,object:pr,slice:IP,step:sC,string:pr,"to-boolean":ts,"to-color":ts,"to-number":ts,"to-string":ts,var:rC,within:l0};function mb(t,[e,i,n,r]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const o=r?r.evaluate(t):1,a=eC(e,i,n,o);if(a)throw new yi(a);return new nn(e/255*o,i/255*o,n/255*o,o)}function vb(t,e){return t in e}function ff(t,e){const i=e[t];return i===void 0?null:i}function Mo(t){return{type:t}}Ws.register(yC,{error:[{kind:"error"},[it],(t,[e])=>{throw new yi(e.evaluate(t))}],typeof:[it,[Je],(t,[e])=>$t(hi(e.evaluate(t)))],"to-rgba":[ln(Ee,4),[_r],(t,[e])=>e.evaluate(t).toArray()],rgb:[_r,[Ee,Ee,Ee],mb],rgba:[_r,[Ee,Ee,Ee,Ee],mb],has:{type:Qe,overloads:[[[it],(t,[e])=>vb(e.evaluate(t),t.properties())],[[it,ps],(t,[e,i])=>vb(e.evaluate(t),i.evaluate(t))]]},get:{type:Je,overloads:[[[it],(t,[e])=>ff(e.evaluate(t),t.properties())],[[it,ps],(t,[e,i])=>ff(e.evaluate(t),i.evaluate(t))]]},"feature-state":[Je,[it],(t,[e])=>ff(e.evaluate(t),t.featureState||{})],properties:[ps,[],t=>t.properties()],"geometry-type":[it,[],t=>t.geometryType()],id:[Je,[],t=>t.id()],zoom:[Ee,[],t=>t.globals.zoom],pitch:[Ee,[],t=>t.globals.pitch||0],"distance-from-center":[Ee,[],t=>t.distanceFromCenter()],"heatmap-density":[Ee,[],t=>t.globals.heatmapDensity||0],"line-progress":[Ee,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Ee,[],t=>t.globals.skyRadialProgress||0],accumulated:[Je,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[Ee,Mo(Ee),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[Ee,Mo(Ee),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:Ee,overloads:[[[Ee,Ee],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[Ee],(t,[e])=>-e.evaluate(t)]]},"/":[Ee,[Ee,Ee],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[Ee,[Ee,Ee],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[Ee,[],()=>Math.LN2],pi:[Ee,[],()=>Math.PI],e:[Ee,[],()=>Math.E],"^":[Ee,[Ee,Ee],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[Ee,[Ee],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ee,[Ee],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ee,[Ee],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ee,[Ee],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ee,[Ee],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ee,[Ee],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ee,[Ee],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ee,Mo(Ee),(t,e)=>Math.min(...e.map(i=>i.evaluate(t)))],max:[Ee,Mo(Ee),(t,e)=>Math.max(...e.map(i=>i.evaluate(t)))],abs:[Ee,[Ee],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ee,[Ee],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ee,[Ee],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ee,[Ee],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Qe,[it,Je],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[Qe,[Je],(t,[e])=>t.id()===e.value],"filter-type-==":[Qe,[it],(t,[e])=>t.geometryType()===e.value],"filter-<":[Qe,[it,Je],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<r}],"filter-id-<":[Qe,[Je],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[Qe,[it,Je],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>r}],"filter-id->":[Qe,[Je],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[Qe,[it,Je],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[Qe,[Je],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[Qe,[it,Je],(t,[e,i])=>{const n=t.properties()[e.value],r=i.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[Qe,[Je],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[Qe,[Je],(t,[e])=>e.value in t.properties()],"filter-has-id":[Qe,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[Qe,[ln(it)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Qe,[ln(Je)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Qe,[it,ln(Je)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Qe,[it,ln(Je)],(t,[e,i])=>function(n,r,o,a){for(;o<=a;){const s=o+a>>1;if(r[s]===n)return!0;r[s]>n?a=s-1:o=s+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:Qe,overloads:[[[Qe,Qe],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[Mo(Qe),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:Qe,overloads:[[[Qe,Qe],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[Mo(Qe),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[Qe,[Qe],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Qe,[it],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[it,[it],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[it,[it],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[it,Mo(Je),(t,e)=>e.map(i=>Vl(i.evaluate(t))).join("")],"resolved-locale":[it,[Md],(t,[e])=>e.evaluate(t).resolvedLocale()]});var _C=yC;function Sm(t){return{result:"success",value:t}}function Ga(t){return{result:"error",value:t}}function bC(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}class zP{constructor(e,i){this.expression=e,this._warningHistory={},this._evaluator=new tC,this._defaultValue=i?function(n){return n.type==="color"&&(bC(n.default)||Array.isArray(n.default))?new nn(0,0,0,0):n.type==="color"?nn.parse(n.default)||null:n.default===void 0?null:n.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(e,i,n,r,o,a,s,l){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(e,i,n,r,o,a,s,l){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new yi(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"),this._defaultValue}}}function Cm(t,e){const i=new oC(_C,[],e?function(r){const o={color:_r,string:it,number:Ee,enum:it,boolean:Qe,formatted:kd,resolvedImage:ju};return r.type==="array"?ln(o[r.value]||Je,r.length):o[r.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Sm(new zP(n,e)):Ga(i.errors)}class DP{constructor(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent=e!=="constant"&&!u0(i.expression)}evaluateWithoutErrorHandling(e,i,n,r,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,i,n,r,o,a)}evaluate(e,i,n,r,o,a){return this._styleExpression.evaluate(e,i,n,r,o,a)}}class jP{constructor(e,i,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!u0(i.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,i,n,r,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,i,n,r,o,a)}evaluate(e,i,n,r,o,a){return this._styleExpression.evaluate(e,i,n,r,o,a)}interpolationFactor(e,i,n){return this.interpolationType?ta.interpolationFactor(this.interpolationType,e,i,n):0}}function BP(t,e){if((t=Cm(t,e)).result==="error")return t;const i=t.value.expression,n=Id(i);if(!n&&!function(s){return s["property-type"]==="data-driven"}(e))return Ga([new jn("","data expressions not supported")]);const r=c0(i,["zoom","pitch","distance-from-center"]);if(!r&&!function(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}(e))return Ga([new jn("","zoom expressions not supported")]);const o=nh(i);if(!o&&!r)return Ga([new jn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof jn)return Ga([o]);if(o instanceof ta&&!function(s){return!!s.expression&&s.expression.interpolated}(e))return Ga([new jn("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Sm(new DP(n?"constant":"source",t.value));const a=o instanceof ta?o.interpolation:void 0;return Sm(new jP(n?"camera":"composite",t.value,o.labels,a))}function nh(t){let e=null;if(t instanceof gC)e=nh(t.result);else if(t instanceof fC){for(const i of t.args)if(e=nh(i),e)break}else(t instanceof sC||t instanceof ta)&&t.input instanceof Ws&&t.input.name==="zoom"&&(e=t);return e instanceof jn||t.eachChild(i=>{const n=nh(i);n instanceof jn?e=n:!e&&n?e=new jn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new jn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Mm(t){if(Array.isArray(t))return t.map(Mm);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Mm(t[i]);return e}return function(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}(t)}var xC={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function wC(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!wC(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function NP(t,e="fill"){if(t==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};wC(t)||(t=rh(t));const i=t;let n=!0;try{n=function(u){if(!gs(u))return u;let c=Mm(u);return CC(c),c=SC(c),c}(i)}catch{}const r=xC[`filter_${e}`],o=Cm(n,r);let a=null;if(o.result==="error")throw new Error(o.value.map(u=>`${u.key}: ${u.message}`).join(", "));a=(u,c,h)=>o.value.evaluate(u,c,{},h);let s=null,l=null;if(n!==i){const u=Cm(i,r);if(u.result==="error")throw new Error(u.value.map(c=>`${c.key}: ${c.message}`).join(", "));s=(c,h,d,p,f)=>u.value.evaluate(c,h,{},d,void 0,void 0,p,f),l=!Id(u.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:MC(n),needFeature:!!l}}function SC(t){if(!Array.isArray(t))return t;const e=function(i){if(VP.has(i[0])){for(let n=1;n<i.length;n++)if(gs(i[n]))return!0}return i}(t);return e===!0?e:e.map(i=>SC(i))}function CC(t){let e=!1;const i=[];if(t[0]==="case"){for(let n=1;n<t.length-1;n+=2)e=e||gs(t[n]),i.push(t[n+1]);i.push(t[t.length-1])}else if(t[0]==="match"){e=e||gs(t[1]);for(let n=2;n<t.length-1;n+=2)i.push(t[n+1]);i.push(t[t.length-1])}else if(t[0]==="step"){e=e||gs(t[1]);for(let n=1;n<t.length-1;n+=2)i.push(t[n+1])}e&&(t.length=0,t.push("any",...i));for(let n=1;n<t.length;n++)CC(t[n])}function gs(t){if(!Array.isArray(t))return!1;if((e=t[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let i=1;i<t.length;i++)if(gs(t[i]))return!0;return!1}const VP=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function $P(t,e){return t<e?-1:t>e?1:0}function MC(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(let e=1;e<t.length;e++)if(MC(t[e]))return!0;return!1}function rh(t){if(!t)return!0;const e=t[0];if(t.length<=1)return e!=="any";var i;return e==="=="?gf(t[1],t[2],"=="):e==="!="?Vc(gf(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?gf(t[1],t[2],e):e==="any"?(i=t.slice(1),["any"].concat(i.map(rh))):e==="all"?["all"].concat(t.slice(1).map(rh)):e==="none"?["all"].concat(t.slice(1).map(rh).map(Vc)):e==="in"?yb(t[1],t.slice(2)):e==="!in"?Vc(yb(t[1],t.slice(2))):e==="has"?_b(t[1]):e==="!has"?Vc(_b(t[1])):e!=="within"||t}function gf(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function yb(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(i=>typeof i!=typeof e[0])?["filter-in-large",t,["literal",e.sort($P)]]:["filter-in-small",t,["literal",e]]}}function _b(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Vc(t){return["!",t]}var GP=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function HP(t,e){const i={};for(const n in t)n!=="ref"&&(i[n]=t[n]);return GP.forEach(n=>{n in e&&(i[n]=e[n])}),i}function kC(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=HP(t[i],e[t[i].ref]));return t}var bb={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},ml=" ",xb=/(italic|oblique)$/i,wb={},WP=function(t,e,i){var n=wb[t];if(!n){Array.isArray(t)||(t=[t]);for(var r,o,a=400,s="normal",l=[],u=0,c=t.length;u<c;++u){var h=t[u].split(" "),d=h[h.length-1].toLowerCase();for(var p in d=="normal"||d=="italic"||d=="oblique"?(s=o?s:d,o=!0,h.pop(),d=h[h.length-1].toLowerCase()):xb.test(d)&&(d=d.replace(xb,""),s=o?s:h[h.length-1].replace(d,""),o=!0),bb){var f=h.length>1?h[h.length-2].toLowerCase():"";if(d==p||d==p.replace("-","")||f+"-"+d==p){a=r?a:bb[p],h.pop(),f&&p.startsWith(f)&&h.pop();break}}r||typeof d!="number"||(a=d,r=!0);var g=h.join(ml).replace("Klokantech Noto Sans","Noto Sans");g.indexOf(ml)!==-1&&(g='"'+g+'"'),l.push(g)}n=wb[t]=[s,a,l]}return n[0]+ml+n[1]+ml+e+"px"+(i?"/"+i:"")+ml+n[2]},km=QS(WP);const TC="https://api.mapbox.com";function w0(t){return t.indexOf("mapbox://")!==0?"":t.slice(9)}function ed(t,e){const i=w0(t);if(!i)return decodeURI(new URL(t,location.href).href);if(i.indexOf("styles/")!==0)throw new Error(`unexpected style url: ${t}`);const n=i.slice(7);return`${TC}/styles/v1/${n}?&access_token=${e}`}function oh(t,e,i,n){const r=new URL(t,n),o=w0(t);return o?o==="mapbox.satellite"?`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${window.devicePixelRatio>=1.5?"@2x":""}.webp?access_token=${e}`:`https://{a-d}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`:(e&&(r.searchParams.has(i)||r.searchParams.set(i,e)),decodeURI(r.href))}const Sb={},Cb={};let UP=0;function S0(t){return t.id||(t.id=UP++),t.id}function XP(t,e){return S0(t)+"."+et(e)}function EC(t){let e=Sb[t.id];return e||(e={},Sb[S0(t)]=e),e}function YP(t){let e=Cb[t.id];return e||(e={},Cb[S0(t)]=e),e}function mf(t){return t*Math.PI/180}const Yn=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function Pd(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);const i=document.createElement("canvas");return i.width=t,i.height=e,i}function C0(t,e){let i=0;const n=e.length;for(;i<n;++i)if(e[i]<t&&i+1<n){const r=e[i]/e[i+1];return i+Math.log(e[i]/t)/Math.log(r)}return n-1}function El(t,e){const i=Math.floor(t),n=Math.pow(2,t-i);return e[i]/n}const Da={};function Ps(t,e,i={},n){if(e in Da)return n&&(n.request=Da[e][0]),Da[e][1];const r=i.transformRequest&&i.transformRequest(e,t)||e,o=_s(()=>r).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),n&&(n.request=a),fetch(a).then(function(s){return delete Da[e],s.ok?s.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(s){return delete Da[e],Promise.reject(new Error("Error fetching source "+e))})));return Da[e]=[r,o],o}function LC(t,e){if(typeof t!="string")return Promise.resolve(t);if(!t.trim().startsWith("{"))return Ps("Style",t=ed(t,e.accessToken),e);try{const i=JSON.parse(t);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}const Mb={};function IC(t,e,i={}){const n=[e,JSON.stringify(t)].toString();let r=Mb[n];if(!r||i.transformRequest){let o;i.transformRequest&&(o=(s,l)=>{const u=i.transformRequest&&i.transformRequest(l,"Tiles")||l;if(s instanceof HC)s.setLoader((c,h,d)=>{_s(()=>u).then(p=>{fetch(p).then(f=>f.arrayBuffer()).then(f=>{const g=s.getFormat().readFeatures(f,{extent:c,featureProjection:d});s.setFeatures(g)}).catch(f=>s.setState(Kt))})});else{const c=s.getImage();_s(()=>u).then(h=>{h instanceof Request?fetch(h).then(d=>d.blob()).then(d=>{const p=URL.createObjectURL(d);c.addEventListener("load",()=>URL.revokeObjectURL(p)),c.addEventListener("error",()=>URL.revokeObjectURL(p)),c.src=p}).catch(d=>s.setState(Kt)):c.src=h})}});const a=t.url;if(a&&!t.tiles){const s=oh(a,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:yv(s)}),tileLoadFunction:o});else{const l={};r=Ps("Source",s,i,l).then(function(u){return u.tiles=u.tiles.map(function(c){return u.scheme==="tms"&&(c=c.replace("{y}","{-y}")),oh(c,i.accessToken,i.accessTokenParam||"access_token",l.request.url)}),Promise.resolve({tileJson:u,tileLoadFunction:o})})}}else t=Object.assign({},t,{tiles:t.tiles.map(function(s){return t.scheme==="tms"&&(s=s.replace("{y}","{-y}")),oh(s,i.accessToken,i.accessTokenParam||"access_token",e||location.href)})}),r=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:o});Mb[n]=r}return r}function kb(t,e,i,n){const r=[2*i*e.pixelRatio+e.width,2*i*e.pixelRatio+e.height],o=Pd(r[0],r[1]),a=o.getContext("2d");a.drawImage(t,e.x,e.y,e.width,e.height,i*e.pixelRatio,i*e.pixelRatio,e.width,e.height);const s=a.getImageData(0,0,r[0],r[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${255*n.r},${255*n.g},${255*n.b},${n.a})`;const l=s.data;for(let u=0,c=s.width;u<c;++u)for(let h=0,d=s.height;h<d;++h)l[4*(h*c+u)+3]>0&&a.arc(u,h,i*e.pixelRatio,0,2*Math.PI);return a.fill(),o}function KP(t,e,i){const n=Math.max(0,Math.min(1,(i-t)/(e-t)));return n*n*(3-2*n)}function Tb(t,e,i){const n=Pd(e.width,e.height),r=n.getContext("2d");r.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),a=o.data;for(let s=0,l=o.width;s<l;++s)for(let u=0,c=o.height;u<c;++u){const h=4*(u*l+s),d=.75,p=.1,f=KP(d-p,d+p,a[h+3]/255);f>0?(a[h+0]=Math.round(255*i.r*f),a[h+1]=Math.round(255*i.g*f),a[h+2]=Math.round(255*i.b*f),a[h+3]=Math.round(255*f)):a[h+3]=0}return r.putImageData(o,0,0),n}const ZP=Array(256).join("");function Tm(t,e){if(e>=.05){let i="";const n=t.split(`
`),r=ZP.slice(0,Math.round(e/.1));for(let o=0,a=n.length;o<a;++o)o>0&&(i+=`
`),i+=n[o].split("").join(r);return i}return t}let vf;function PC(){return vf||(vf=Pd(1,1).getContext("2d")),vf}function ko(t,e){return PC().measureText(t).width+(t.length-1)*e}const Eb={};function Em(t,e,i,n){if(t.indexOf(`
`)!==-1){const a=t.split(`
`),s=[];for(let l=0,u=a.length;l<u;++l)s.push(Em(a[l],e,i,n));return s.join(`
`)}const r=i+","+e+","+t+","+n;let o=Eb[r];if(!o){const a=t.split(" ");if(a.length>1){const s=PC();s.font=e;const l=s.measureText("M").width*i;let u="";const c=[];for(let h=0,d=a.length;h<d;++h){const p=a[h],f=u+(u?" ":"")+p;ko(f,n)<=l?u=f:(u&&c.push(u),u=p)}u&&c.push(u);for(let h=0,d=c.length;h<d&&d>1;++h){const p=c[h];if(ko(p,n)<.35*l){const f=h>0?ko(c[h-1],n):1/0,g=h<d-1?ko(c[h+1],n):1/0;c.splice(h,1),d-=1,f<g?(c[h-1]+=" "+p,h-=1):c[h]=p+" "+c[h]}}for(let h=0,d=c.length-1;h<d;++h){const p=c[h],f=c[h+1];if(ko(p,n)>.7*l&&ko(f,n)<.6*l){const g=p.split(" "),y=g.pop();ko(y,n)<.2*l&&(c[h]=g.join(" "),c[h+1]=y+" "+f),d-=1}}o=c.join(`
`)}else o=t;o=Tm(o,n),Eb[r]=o}return o}const QP=/font-family: ?([^;]*);/,JP=/("|')/g;let $c;function eq(t){if(!$c){$c={};const e=document.styleSheets;for(let i=0,n=e.length;i<n;++i){const r=e[i];try{const o=r.rules||r.cssRules;if(o)for(let a=0,s=o.length;a<s;++a){const l=o[a];if(l.type==5){const u=l.cssText.match(QP);$c[u[1].replace(JP,"")]=!0}}}catch{}}}return t in $c}const yf={},tq={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},iq={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Lm={},td={zoom:0};let Gc,_f;function Be(t,e,i,n,r,o,a){const s=t.id;o||(o={}),o[s]||(o[s]={});const l=o[s];if(!l[i]){let c=(t[e]||Lm)[i];const h=xC[`${e}_${t.type}`][i];c===void 0&&(c=h.default);let d=(u=c,Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in _C);if(!d&&bC(c)&&(c=rP(c,h),d=!0),d){const p=function(f,g){const y=BP(f,g);if(y.result==="error")throw new Error(y.value.map(_=>`${_.key}: ${_.message}`).join(", "));return y.value}(c,h);l[i]=p.evaluate.bind(p)}else h.type=="color"&&(c=nn.parse(c)),l[i]=function(){return c}}var u;return td.zoom=n,l[i](td,r,a)}function Lb(t,e,i,n,r){return Be(t,"layout",`${n}-allow-overlap`,e,i,r)?Be(t,"layout",`${n}-ignore-placement`,e,i,r)?"none":"obstacle":"declutter"}function nq(t,e,i,n,r){return t in r||(r[t]=NP(e).filter),td.zoom=n,r[t](td,i)}function zr(t,e){if(t){if(t.a===0||e===0)return;const i=t.a;return e=e===void 0?1:e,i===0?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*e+")"}return t}const rq=/\{[^{}}]*\}/g;function bf(t,e){return t.replace(rq,function(i){return e[i.slice(1,-1)]||""})}const oq={};function aq(t,e,i,n=Yn,r=void 0,o=void 0,a=void 0,s=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");let l,u,c;if(oq[XP(e,t)]=Array.from(arguments),o){if(typeof Image<"u"){const k=new Image;let L;_s(()=>o).then(A=>{A instanceof Request?fetch(A).then(q=>q.blob()).then(q=>{L=URL.createObjectURL(q),k.src=L}).catch(()=>{}):(k.crossOrigin="anonymous",k.src=A,L&&URL.revokeObjectURL(L))}),k.onload=function(){l=k,u=[k.width,k.height],t.changed(),k.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const k=self;k.postMessage({action:"loadImage",src:o}),k.addEventListener("message",function(L){L.data.action==="imageLoaded"&&L.data.src===o&&(l=L.data.image,u=[l.width,l.height])})}}const h=kC(e.layers),d={},p=[],f={},g={},y=EC(e),_=YP(e);let b;for(let k=0,L=h.length;k<L;++k){const A=h[k],q=A.id;if(typeof i=="string"&&A.source==i||Array.isArray(i)&&i.indexOf(q)!==-1){const P=A["source-layer"];if(b){if(A.source!==b)throw new Error(`Layer "${q}" does not use source "${b}`)}else{b=A.source;const R=e.sources[b];if(!R)throw new Error(`Source "${b}" is not defined`);const M=R.type;if(M!=="vector"&&M!=="geojson")throw new Error(`Source "${b}" is not of type "vector" or "geojson", but "${M}"`)}let T=d[P];T||(T=[],d[P]=T),T.push({layer:A,index:k}),p.push(q)}}const m=new Vt,v=new Zt,S=[],C=function(k,L,A){const q=k.getProperties(),P=d[q.layer];if(!P)return;let T=n.indexOf(L);T==-1&&(T=C0(L,n));const R=tq[k.getGeometry().getType()],M={id:k.getId(),properties:q,type:R},I=t.get("mapbox-featurestate")[k.getId()];let E=-1;for(let O=0,V=P.length;O<V;++O){const B=P[O],F=B.layer,H=F.id;if(A!==void 0&&A!==H)continue;const ee=F.layout||Lm,ne=F.paint||Lm;if(ee.visibility==="none"||"minzoom"in F&&T<F.minzoom||"maxzoom"in F&&T>=F.maxzoom)continue;const te=F.filter;if(!te||nq(H,te,M,T,_)){let N,z,j,Z,W,U;const ye=B.index;if(R==3&&(F.type=="fill"||F.type=="fill-extrusion"))if(z=Be(F,"paint",F.type+"-opacity",T,M,y,I),F.type+"-pattern"in ne){const de=Be(F,"paint",F.type+"-pattern",T,M,y,I);if(de){const Se=typeof de=="string"?bf(de,q):de.toString();if(l&&r&&r[Se]){++E,U=S[E],U&&U.getFill()&&!U.getStroke()&&!U.getText()||(U=new qt({fill:new Zt}),S[E]=U),j=U.getFill(),U.setZIndex(ye);const Le=Se+"."+z;let Fe=g[Le];if(!Fe){const K=r[Se],ae=Pd(K.width,K.height),pe=ae.getContext("2d");pe.globalAlpha=z,pe.drawImage(l,K.x,K.y,K.width,K.height,0,0,K.width,K.height),Fe=pe.createPattern(ae,"repeat"),g[Le]=Fe}j.setColor(Fe)}}}else N=zr(Be(F,"paint",F.type+"-color",T,M,y,I),z),F.type+"-outline-color"in ne&&(W=zr(Be(F,"paint",F.type+"-outline-color",T,M,y,I),z)),W||(W=N),(N||W)&&(++E,U=S[E],(!U||N&&!U.getFill()||!N&&U.getFill()||W&&!U.getStroke()||!W&&U.getStroke()||U.getText())&&(U=new qt({fill:N?new Zt:void 0,stroke:W?new Vt:void 0}),S[E]=U),N&&(j=U.getFill(),j.setColor(N)),W&&(Z=U.getStroke(),Z.setColor(W),Z.setWidth(.5)),U.setZIndex(ye));if(R!=1&&F.type=="line"){N="line-pattern"in ne?void 0:zr(Be(F,"paint","line-color",T,M,y,I),Be(F,"paint","line-opacity",T,M,y,I));const de=Be(F,"paint","line-width",T,M,y,I);N&&de>0&&(++E,U=S[E],U&&U.getStroke()&&!U.getFill()&&!U.getText()||(U=new qt({stroke:new Vt}),S[E]=U),Z=U.getStroke(),Z.setLineCap(Be(F,"layout","line-cap",T,M,y,I)),Z.setLineJoin(Be(F,"layout","line-join",T,M,y,I)),Z.setMiterLimit(Be(F,"layout","line-miter-limit",T,M,y,I)),Z.setColor(N),Z.setWidth(de),Z.setLineDash(ne["line-dasharray"]?Be(F,"paint","line-dasharray",T,M,y,I).map(function(Se){return Se*de}):null),U.setZIndex(ye))}let ue,he,fe,Ce,Ie,me,we,qe,Ge,oe=!1,ce=null,X=0;if((R==1||R==2)&&"icon-image"in ee){const de=Be(F,"layout","icon-image",T,M,y,I);if(de){let Se;ue=typeof de=="string"?bf(de,q):de.toString();const Le=s?s(t,ue):void 0;if(l&&r&&r[ue]||Le){const Fe=Be(F,"layout","icon-rotation-alignment",T,M,y,I);if(R==2){const K=k.getGeometry();if(K.getFlatMidpoint||K.getFlatMidpoints){const ae=K.getExtent();if(Math.sqrt(Math.max(Math.pow((ae[2]-ae[0])/L,2),Math.pow((ae[3]-ae[1])/L,2)))>150){const pe=K.getType()==="MultiLineString"?K.getFlatMidpoints():K.getFlatMidpoint();if(_f||(Gc=[NaN,NaN],_f=new xi("Point",Gc,[],2,{},void 0)),Se=_f,Gc[0]=pe[0],Gc[1]=pe[1],Be(F,"layout","symbol-placement",T,M,y,I)==="line"&&Fe==="map"){const Pe=K.getStride(),He=K.getFlatCoordinates();for(let Ze=0,Re=He.length-Pe;Ze<Re;Ze+=Pe){const Ye=He[Ze],We=He[Ze+1],J=He[Ze+Pe],Te=He[Ze+Pe+1],_e=Math.min(Ye,J),ve=Math.min(We,Te),xe=Math.max(Ye,J),D=Math.max(We,Te);if(pe[0]>=_e&&pe[0]<=xe&&pe[1]>=ve&&pe[1]<=D){X=Math.atan2(We-Te,J-Ye);break}}}}}}if(R!==2||Se){const K=Be(F,"layout","icon-size",T,M,y,I),ae=ne["icon-color"]!==void 0?Be(F,"paint","icon-color",T,M,y,I):null;if(!ae||ae.a!==0){const pe=Be(F,"paint","icon-halo-color",T,M,y,I),Pe=Be(F,"paint","icon-halo-width",T,M,y,I);let He=`${ue}.${K}.${Pe}.${pe}`;if(ae!==null&&(He+=`.${ae}`),he=f[He],!he){const Ze=Lb(F,T,M,"icon",y);let Re;"icon-offset"in ee&&(Re=Be(F,"layout","icon-offset",T,M,y,I).slice(0),Re[0]*=K,Re[1]*=-K);let Ye=ae?[255*ae.r,255*ae.g,255*ae.b,ae.a]:void 0;if(Le){const We={color:Ye,rotateWithView:Fe==="map",displacement:Re,declutterMode:Ze,scale:K};typeof Le=="string"?We.src=Le:(We.img=Le,We.imgSize=[Le.width,Le.height]),he=new Cs(We)}else{const We=r[ue];let J,Te,_e;Pe?We.sdf?(J=kb(Tb(l,We,ae||[0,0,0,1]),{x:0,y:0,width:We.width,height:We.height,pixelRatio:We.pixelRatio},Pe,pe),Ye=void 0):J=kb(l,We,Pe,pe):(We.sdf?(c||(c=Tb(l,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1,a:1})),J=c):J=l,Te=[We.width,We.height],_e=[We.x,We.y]),he=new Cs({color:Ye,img:J,imgSize:u,size:Te,offset:_e,rotateWithView:Fe==="map",scale:K/We.pixelRatio,displacement:Re,declutterMode:Ze})}f[He]=he}}he&&(++E,U=S[E],U&&U.getImage()&&!U.getFill()&&!U.getStroke()||(U=new qt,S[E]=U),U.setGeometry(Se),he.setRotation(X+mf(Be(F,"layout","icon-rotate",T,M,y,I))),he.setOpacity(Be(F,"paint","icon-opacity",T,M,y,I)),he.setAnchor(iq[Be(F,"layout","icon-anchor",T,M,y,I)]),U.setImage(he),ce=U.getText(),U.setText(void 0),U.setZIndex(ye),oe=!0,fe=!1)}else fe=!0}}}if(R==1&&F.type==="circle"){++E,U=S[E],U&&U.getImage()&&!U.getFill()&&!U.getStroke()||(U=new qt,S[E]=U);const de="circle-radius"in ne?Be(F,"paint","circle-radius",T,M,y,I):5,Se=zr(Be(F,"paint","circle-stroke-color",T,M,y,I),Be(F,"paint","circle-stroke-opacity",T,M,y,I)),Le=Be(F,"paint","circle-translate",T,M,y,I),Fe=zr(Be(F,"paint","circle-color",T,M,y,I),Be(F,"paint","circle-opacity",T,M,y,I)),K=Be(F,"paint","circle-stroke-width",T,M,y,I),ae=de+"."+Se+"."+Fe+"."+K+"."+Le[0]+"."+Le[1];he=f[ae],he||(he=new Rn({radius:de,displacement:[Le[0],-Le[1]],stroke:Se&&K>0?new Vt({width:K,color:Se}):void 0,fill:Fe?new Zt({color:Fe}):void 0,declutterMode:"none"}),f[ae]=he),U.setImage(he),ce=U.getText(),U.setText(void 0),U.setGeometry(void 0),U.setZIndex(ye),oe=!0}if("text-field"in ee){we=Math.round(Be(F,"layout","text-size",T,M,y,I));const de=Be(F,"layout","text-font",T,M,y,I);me=Be(F,"layout","text-line-height",T,M,y,I),Ie=km(a?a(de,e.metadata?e.metadata["ol:webfonts"]:void 0):de,we,me),Ie.includes("sans-serif")||(Ie+=",sans-serif"),qe=Be(F,"layout","text-letter-spacing",T,M,y,I),Ge=Be(F,"layout","text-max-width",T,M,y,I);const Se=Be(F,"layout","text-field",T,M,y,I);Ce=typeof Se=="object"&&Se.sections?Se.sections.length===1?Se.toString():Se.sections.reduce((Le,Fe,K)=>{const ae=Fe.fontStack?Fe.fontStack.split(","):de,pe=km(a?a(ae):ae,we*(Fe.scale||1),me);let Pe=Fe.text;if(Pe===`
`)return Le.push(`
`,""),Le;if(R!=2){Pe=Em(Pe,pe,Ge,qe).split(`
`);for(let He=0,Ze=Pe.length;He<Ze;++He)He>0&&Le.push(`
`,""),Le.push(Pe[He],pe);return Le}Le.push(Tm(Pe,qe),pe)},[]):bf(Se,q).trim(),z=Be(F,"paint","text-opacity",T,M,y,I)}if(Ce&&z&&!fe){oe||(++E,U=S[E],U&&U.getText()&&!U.getFill()&&!U.getStroke()||(U=new qt,S[E]=U),U.setImage(void 0),U.setGeometry(void 0));const de=Lb(F,T,M,"text",y);U.getText()||U.setText(ce),ce=U.getText(),(!ce||"getDeclutterMode"in ce&&ce.getDeclutterMode()!==de)&&(ce=new Yo({padding:[2,2,2,2],declutterMode:de}),U.setText(ce));const Se=Be(F,"layout","text-transform",T,M,y,I);Se=="uppercase"?Ce=Array.isArray(Ce)?Ce.map((ve,xe)=>xe%2?ve:ve.toUpperCase()):Ce.toUpperCase():Se=="lowercase"&&(Ce=Array.isArray(Ce)?Ce.map((ve,xe)=>xe%2?ve:ve.toLowerCase()):Ce.toLowerCase());const Le=Array.isArray(Ce)?Ce:R==2?Tm(Ce,qe):Em(Ce,Ie,Ge,qe);ce.setText(Le),ce.setFont(Ie),ce.setRotation(mf(Be(F,"layout","text-rotate",T,M,y,I)));const Fe=Be(F,"layout","text-anchor",T,M,y,I),K=oe||R==1?"point":Be(F,"layout","symbol-placement",T,M,y,I);let ae;if(K==="line-center"?(ce.setPlacement("line"),ae="center"):ce.setPlacement(K),K==="line"&&typeof ce.setRepeat=="function"){const ve=Be(F,"layout","symbol-spacing",T,M,y,I);ce.setRepeat(2*ve)}ce.setOverflow(K==="point");let pe=Be(F,"paint","text-halo-width",T,M,y,I);const Pe=Be(F,"layout","text-offset",T,M,y,I),He=Be(F,"paint","text-translate",T,M,y,I);let Ze=0,Re=0;if(K=="point"){ae="center",Fe.indexOf("left")!==-1?(ae="left",Re=pe):Fe.indexOf("right")!==-1&&(ae="right",Re=-pe);const ve=Be(F,"layout","text-rotation-alignment",T,M,y,I);ce.setRotateWithView(ve=="map")}else ce.setMaxAngle(mf(Be(F,"layout","text-max-angle",T,M,y,I))*Ce.length/Le.length),ce.setRotateWithView(!1);ce.setTextAlign(ae);let Ye="middle";Fe.indexOf("bottom")==0?(Ye="bottom",Ze=-pe-.5*(me-1)*we):Fe.indexOf("top")==0&&(Ye="top",Ze=pe+.5*(me-1)*we),ce.setTextBaseline(Ye);const We=Be(F,"layout","text-justify",T,M,y,I);ce.setJustify(We==="auto"?void 0:We),ce.setOffsetX(Pe[0]*we+Re+He[0]),ce.setOffsetY(Pe[1]*we+Ze+He[1]),v.setColor(zr(Be(F,"paint","text-color",T,M,y,I),z)),ce.setFill(v);const J=zr(Be(F,"paint","text-halo-color",T,M,y,I),z);if(J&&pe>0){m.setColor(J),pe*=2;const ve=.5*we;m.setWidth(pe<=ve?pe:ve),ce.setStroke(m)}else ce.setStroke(void 0);const Te=Be(F,"layout","text-padding",T,M,y,I),_e=ce.getPadding();Te!==_e[0]&&(_e[0]=Te,_e[1]=Te,_e[2]=Te,_e[3]=Te),U.setZIndex(ye)}}}return E>-1?(S.length=E+1,S):void 0};return t.setStyle(C),t.set("mapbox-source",b),t.set("mapbox-layers",p),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),C}function sq(t,e){const i=t[0],n=i.width,r=i.height,o=i.data,a=new Uint8ClampedArray(o.length),s=2*e.resolution,l=n-1,u=r-1,c=[0,0,0,0],h=2*Math.PI,d=Math.PI/2,p=Math.PI*e.sunEl/180,f=Math.PI*e.sunAz/180,g=Math.cos(p),y=Math.sin(p),_=e.highlightColor,b=e.shadowColor,m=e.accentColor,v=e.encoding;let S,C,k,L,A,q,P,T,R,M,I,E,O,V,B,F,H,ee,ne,te,N,z;function j(Z,W="mapbox"){return W==="mapbox"?.1*(256*Z[0]*256+256*Z[1]+Z[2])-1e4:W==="terrarium"?256*Z[0]+Z[1]+Z[2]/256-32768:void 0}for(C=0;C<=u;++C)for(A=C===0?0:C-1,q=C===u?u:C+1,S=0;S<=l;++S)k=S===0?0:S-1,L=S===l?l:S+1,P=4*(C*n+k),c[0]=o[P],c[1]=o[P+1],c[2]=o[P+2],c[3]=o[P+3],T=e.vert*j(c,v),P=4*(C*n+L),c[0]=o[P],c[1]=o[P+1],c[2]=o[P+2],c[3]=o[P+3],R=e.vert*j(c,v),M=(R-T)/s,P=4*(A*n+S),c[0]=o[P],c[1]=o[P+1],c[2]=o[P+2],c[3]=o[P+3],T=e.vert*j(c,v),P=4*(q*n+S),c[0]=o[P],c[1]=o[P+1],c[2]=o[P+2],c[3]=o[P+3],R=e.vert*j(c,v),I=(R-T)/s,O=Math.atan2(I,-M),O=O<0?d-O:O>d?h-O+d:d-O,E=Math.atan(Math.sqrt(M*M+I*I)),z=y*Math.cos(E)+g*Math.sin(E)*Math.cos(f-O),V=Math.cos(E),B=255*z,ne=Math.min(Math.max(2*e.sunEl,0),1),te=1.875-1.75*e.opacity,N=e.opacity!==.5?d*((Math.pow(te,E)-1)/(Math.pow(te,d)-1)):E,H={r:(1-V)*m.r*ne*255,g:(1-V)*m.g*ne*255,b:(1-V)*m.b*ne*255,a:(1-V)*m.a*ne*255},F=Math.abs(((O+f)/Math.PI+.5)%2-1),ee={r:(_.r*(1-F)+b.r*F)*B,g:(_.g*(1-F)+b.g*F)*B,b:(_.b*(1-F)+b.b*F)*B,a:(_.a*(1-F)+b.a*F)*B},P=4*(C*n+S),a[P]=H.r*(1-F)+ee.r,a[P+1]=H.g*(1-F)+ee.g,a[P+2]=H.b*(1-F)+ee.b,a[P+3]=o[P+3]*e.opacity*ne*Math.sin(N);return new ImageData(a,n,r)}function lq(t,e=512){return t.getExtent()?ud({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Yn}function qC(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((i,n)=>{e.accessToken=i,e.accessTokenParam=n})),e}function uq(t,e,i="",n={},r=void 0){let o,a,s,l,u=!0;return typeof i=="string"||Array.isArray(i)?l=i:(s=i,l=s.source||s.layers,n=s),typeof n=="string"?(o=n,s={}):(o=n.styleUrl,s=n),s.updateSource===!1&&(u=!1),r||(r=s.resolutions),o||typeof e!="string"||e.trim().startsWith("{")||(o=e),o&&(o=o.startsWith("data:")?location.href:ed(o,s.accessToken),s=qC(o,s)),new Promise(function(c,h){LC(e,s).then(function(d){if(d.version!=8)return h(new Error("glStyle version 8 required."));if(!(t instanceof va||t instanceof eo))return h(new Error("Can only apply to VectorLayer or VectorTileLayer"));const p=t instanceof eo?"vector":"geojson";if(l?a=Array.isArray(l)?d.layers.find(function(v){return v.id===l[0]}).source:l:(a=Object.keys(d.sources).find(function(v){return d.sources[v].type===p}),l=a),!a)return h(new Error(`No ${p} source found in the glStyle.`));function f(){if(!u)return Promise.resolve();if(t instanceof eo)return AC(d.sources[a],o,s).then(function(k){const L=t.getSource();L?k!==L&&(L.setTileUrlFunction(k.getTileUrlFunction()),typeof L.setUrls=="function"&&typeof k.getUrls=="function"&&L.setUrls(k.getUrls()),L.format_||(L.format_=k.format_),L.getAttributions()||L.setAttributions(k.getAttributions()),L.getTileLoadFunction()===dw&&L.setTileLoadFunction(k.getTileLoadFunction()),Xo(L.getProjection(),k.getProjection())&&(L.tileGrid=k.getTileGrid())):t.setSource(k);const A=t.getSource().getTileGrid();!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())&&A.getMinZoom()>0&&t.setMaxResolution(El(Math.max(0,A.getMinZoom()-1e-12),A.getResolutions()))});const v=d.sources[a];let S=t.getSource();S&&S.get("mapbox-source")===v||(S=zC(v,o,s));const C=t.getSource();return C?S!==C&&(C.getAttributions()||C.setAttributions(S.getAttributions()),C.format_||(C.format_=S.getFormat()),C.url_=S.getUrl()):t.setSource(S),Promise.resolve()}let g,y,_,b;function m(){if(b||d.sprite&&!y)b?(t.setStyle(b),f().then(c).catch(h)):h(new Error("Something went wrong trying to apply style."));else{if(s.projection&&!r){const v=st(s.projection).getUnits();v!=="m"&&(r=Yn.map(S=>S/br[v]))}b=aq(t,d,l,r,y,_,(v,S=s.webfonts)=>function(C,k="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const L=C.toString();if(L in yf)return yf[L];const A=[];for(let q=0,P=C.length;q<P;++q){C[q]=C[q].replace("Arial Unicode MS","Arial");const T=C[q],R=km(T,1);Lx(R);const M=R.split(" ");A.push([M.slice(3).join(" ").replace(/"/g,""),M[1],M[0]])}for(let q=0,P=A.length;q<P;++q){const T=A[q],R=T[0];if(!eq(R)&&Dn.get(`${T[2]}
${T[1]} 
${R}`)!==100){const M=k.replace("{font-family}",R.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",R.replace(/ /g,"+")).replace("{fontweight}",T[1]).replace("{-fontstyle}",T[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",T[2]);if(!document.querySelector('link[href="'+M+'"]')){const I=document.createElement("link");I.href=M,I.rel="stylesheet",document.head.appendChild(I)}}}return yf[L]=C,C}(v,S),s.getImage),t.getStyle()?f().then(c).catch(h):h(new Error(`Nothing to show for source [${a}]`))}}if(d.sprite){const v=new URL(function(k,L,A){const q=w0(k);if(!q)return decodeURI(new URL(k,A).href);if(q.indexOf("sprites/")!==0)throw new Error(`unexpected sprites url: ${k}`);const P=q.slice(8);return`${TC}/styles/v1/${P}/sprite?access_token=${L}`}(d.sprite,s.accessToken,o||location.href));g=window.devicePixelRatio>=1.5?.5:1;const S=g==.5?"@2x":"";let C=v.origin+v.pathname+S+".json"+v.search;new Promise(function(k,L){Ps("Sprite",C,s).then(k).catch(function(A){C=v.origin+v.pathname+".json"+v.search,Ps("Sprite",C,s).then(k).catch(L)})}).then(function(k){if(k===void 0&&h(new Error("No sprites found.")),y=k,_=v.origin+v.pathname+S+".png"+v.search,s.transformRequest){const L=s.transformRequest(_,"SpriteImage")||_;(L instanceof Request||L instanceof Promise)&&(_=L)}m()}).catch(function(k){h(new Error(`Sprites cannot be loaded: ${C}: ${k.message}`))})}else m()}).catch(h)})}const Br={};function RC(t,e){let i;return t.some(function(n){if(n.id==e)return i=n.source,!0}),i}function FC(t,e,i){const n=new mw({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),r=n.getTileJSON(),o=n.getTileGrid(),a=st(i.projection||"EPSG:3857"),s=function(d,p){const f=d.bounds;if(f){const g=qf([f[0],f[1]],p),y=qf([f[2],f[3]],p);return[g[0],g[1],y[0],y[1]]}return st(p).getExtent()}(r,a),l=a.getExtent(),u=r.minzoom||0,c=r.maxzoom||22,h={attributions:n.getAttributions(),projection:a,tileGrid:new Qr({origin:l?er(l):o.getOrigin(0),extent:s||o.getExtent(),minZoom:u,resolutions:lq(a,e.tileSize).slice(0,c+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?h.urls=r.tiles:h.url=r.tiles,h}function cq(t,e,i,n){const r={id:t.id,type:t.type},o=t.layout||{},a=t.paint||{};r.paint=a;const s=C0(e,i.resolutions||Yn);let l;const u=Be(r,"paint","background-color",s,Br,n);return a["background-opacity"]!==void 0&&(l=Be(r,"paint","background-opacity",s,Br,n)),o.visibility=="none"?void 0:zr(u,l)}function hq(t,e,i){const n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new As({source:new Ds({}),render(r){const o=cq(t,r.viewState.resolution,e,i);return n.style.backgroundColor=o,n}})}function AC(t,e,i){return new Promise(function(n,r){IC(t,e,i).then(function({tileJson:o,tileLoadFunction:a}){const s=FC(t,o,i);s.tileLoadFunction=a,s.format=new Qc,n(new ql(s))}).catch(r)})}function OC(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function dq(t,e,i){return new Promise(function(n,r){IC(t,e,i).then(function({tileJson:o,tileLoadFunction:a}){const s=new mw({interpolate:i.interpolate===void 0||i.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});s.tileGrid=FC(t,o,i).tileGrid,i.projection&&(s.projection=st(i.projection));const l=s.getTileUrlFunction();a&&s.setTileLoadFunction(a),s.setTileUrlFunction(function(u,c,h){const d=OC(h);let p=l(u,c,h);if(p.indexOf(d)!=-1){const f=s.getTileGrid().getTileCoordExtent(u);p=p.replace(d,f.toString())}return p}),s.set("mapbox-source",t),n(s)}).catch(function(o){r(o)})})}function Ib(t,e,i){const n=new oi;return dq(t,e,i).then(function(r){n.setSource(r)}).catch(function(){n.setSource(void 0)}),n}function zC(t,e,i){const n=i.projection?new _1({dataProjection:i.projection}):new _1,r=t.data,o={};if(typeof r=="string"){const s=oh(r,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(s)){const u=(h,d,p)=>{const f=OC(p);return s.replace(f,`${h.join(",")}`)},c=new Jr({attributions:t.attribution,format:n,loader:(h,d,p,f,g)=>{Ps("GeoJSON",typeof u=="function"?u(h,d,p):u,i).then(y=>{const _=c.getFormat().readFeatures(y,{featureProjection:p});c.addFeatures(_),f(_)}).catch(y=>{c.removeLoadedExtent(h),g()})},strategy:Gk});return c.set("mapbox-source",t),c}const l=new Jr({attributions:t.attribution,format:n,url:s,loader:(u,c,h,d,p)=>{Ps("GeoJSON",s,i).then(f=>{const g=l.getFormat().readFeatures(f,{featureProjection:h});l.addFeatures(g),d(g)}).catch(f=>{l.removeLoadedExtent(u),p()})}});return l}o.features=n.readFeatures(r,{featureProjection:"EPSG:3857"});const a=new Jr(Object.assign({attributions:t.attribution,format:n},o));return a.set("mapbox-source",t),a}function pq(t,e,i){let n=null;return function(r){t.paint&&"raster-opacity"in t.paint&&r.frameState.viewState.zoom!==n&&(n=r.frameState.viewState.zoom,delete i[t.id],function(o,a,s,l){const u=Be(o,"paint","raster-opacity",s,Br,l);a.setOpacity(u)}(t,e,n,i))}}function fq(t,e,i,n){const r=EC(t),o=t.layers,a=i.type,s=i.source||RC(o,i.ref),l=t.sources[s];let u;if(a=="background")u=hq(i,n,r);else if(l.type=="vector")u=function(h,d,p){const f=new eo({declutter:!0,visible:!1});return AC(h,d,p).then(function(g){g.set("mapbox-source",h),f.setSource(g)}).catch(function(g){f.setSource(void 0)}),f}(l,e,n);else if(l.type=="raster")u=Ib(l,e,n),u.setVisible(!i.layout||i.layout.visibility!=="none"),u.on("prerender",pq(i,u,r));else if(l.type=="geojson")u=function(h,d,p){return new va({declutter:!0,source:zC(h,d,p),visible:!1})}(l,e,n);else if(l.type=="raster-dem"&&i.type=="hillshade"){const h=function(d,p,f){const g=Ib(d,p,f);return new pw({source:new gw({operationType:"image",operation:sq,sources:[g]})})}(l,e,n);u=h,h.getSource().on("beforeoperations",function(d){const p=d.data;p.resolution=Ul(n.projection||"EPSG:3857",d.resolution,$i(d.extent),"m");const f=C0(d.resolution,n.resolutions||Yn);p.encoding=l.encoding,p.vert=5*Be(i,"paint","hillshade-exaggeration",f,Br,r),p.sunAz=Be(i,"paint","hillshade-illumination-direction",f,Br,r),p.sunEl=35,p.opacity=.3,p.highlightColor=Be(i,"paint","hillshade-highlight-color",f,Br,r),p.shadowColor=Be(i,"paint","hillshade-shadow-color",f,Br,r),p.accentColor=Be(i,"paint","hillshade-accent-color",f,Br,r)}),u.setVisible(!i.layout||i.layout.visibility!=="none")}const c=s;return u&&u.set("mapbox-source",c),u}function Pb(t,e,i,n){const r=[];let o=null;if(e instanceof zs){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const h=n.projection?st(n.projection):o.getProjection();o=new Wi(Object.assign(o.getProperties(),{maxResolution:Yn[0]/br[h.getUnits()],projection:n.projection||o.getProjection()})),e.setView(o)}"center"in t&&!o.getCenter()&&o.setCenter(qf(t.center,o.getProjection())),"zoom"in t&&o.getZoom()===void 0&&o.setResolution(Yn[0]/br[o.getProjection().getUnits()]/Math.pow(2,t.zoom)),o.getCenter()&&o.getZoom()!==void 0||o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",t),e.set("mapbox-metadata",{styleUrl:i,options:n});const a=t.layers;let s,l,u,c=[];for(let h=0,d=a.length;h<d;++h){const p=a[h];p.type!="heatmap"&&(u=p.source||RC(a,p.ref),u&&u==l||(c.length&&(r.push(qb(s,c,t,i,e,n)),c=[]),s=fq(t,i,p,n),s instanceof va||s instanceof eo||(c=[]),l=s.get("mapbox-source")),c.push(p.id))}return r.push(qb(s,c,t,i,e,n)),Promise.all(r)}function xq(t,e,i={}){let n,r;if(r=typeof t=="string"||t instanceof HTMLElement?new zs({target:t}):t,typeof e=="string"){const o=e.startsWith("data:")?location.href:ed(e,i.accessToken);i=qC(o,i),n=new Promise(function(a,s){LC(e,i).then(function(l){Pb(l,r,o,i).then(function(){a(r)}).catch(s)}).catch(function(l){s(new Error(`Could not load ${e}: ${l.message}`))})})}else n=new Promise(function(o,a){Pb(e,r,!i.styleUrl||i.styleUrl.startsWith("data:")?location.href:ed(i.styleUrl,i.accessToken),i).then(function(){o(r)}).catch(a)});return n}function qb(t,e,i,n,r,o={}){let a=24,s=0;const l=i.layers;for(let u=0,c=l.length;u<c;++u){const h=l[u];e.indexOf(h.id)!==-1&&(a=Math.min("minzoom"in h?h.minzoom:0,a),s=Math.max("maxzoom"in h?h.maxzoom:24,s))}return new Promise(function(u,c){const h=function(){const p=t.getSource();if(p&&p.getState()!=="error"){if("getTileGrid"in p){const f=p.getTileGrid();if(f){const g=f.getMinZoom();(a>0||g>0)&&t.setMaxResolution(Math.min(El(Math.max(0,a-1e-12),Yn),El(Math.max(0,g-1e-12),f.getResolutions()))),s<24&&t.setMinResolution(El(s,Yn))}}else a>0&&t.setMaxResolution(El(Math.max(0,a-1e-12),Yn));p instanceof Jr||p instanceof ql?uq(t,i,e,Object.assign({styleUrl:n},o)).then(function(){(function(f,g){function y(){const _=g.get("mapbox-style");if(!_)return;const b=kC(_.layers),m=f.get("mapbox-layers"),v=b.filter(function(S){return m.includes(S.id)}).some(function(S){return!S.layout||!S.layout.visibility||S.layout.visibility==="visible"});f.get("visible")!==v&&f.setVisible(v)}f.on("change",y),y()})(t,r),u()}).catch(c):u()}else c(new Error("Error accessing data for source "+t.get("mapbox-source")))};t.set("mapbox-layers",e);const d=r.getLayers();d.getArray().indexOf(t)===-1&&d.push(t),t.getSource()?h():t.once("change:source",h)})}export{bq as F,kh as H,zi as I,ZS as K,yq as Q,Bs as S,ab as W,sb as X,Xg as b,xq as c,sn as e,_q as m,vi as p,at as s,Bg as t,gm as v,Yg as x,mm as y};
