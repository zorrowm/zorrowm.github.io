import{O as T}from"./vendor-DEnSXaZk.js";import{u as W}from"./vue-router-exp-CLDoDjFh.js";import{F as f,g as b}from"./xframelib-exp-DUbArU78.js";import{M as x}from"./MultiService-BXyHVpPA.js";import{S as B}from"./index-1r0G7BfX.js";import{d as C,e as I,r as S,w as V,b as k,B as O,O as l,S as g,U as c,a2 as u,a6 as j,W as y,P as D}from"./@vue-exp-DhuHfG86.js";import{_ as E}from"./index-9YwdlOdB.js";import"./ol-exp-DNVUl0aT.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-DcFsj1aI.js";import"./monaco-editor-exp-BNK_u0iZ.js";const G={class:"rightOptionList"},U={key:0,class:"layer_info"},w=C({__name:"QueryLayerLoadWidget",setup(N){const L=W();let t;const o=I({name:"",rule:"",projection:""}),r=S([]),s=S("");V(()=>s.value,(a,e)=>{t&&(a&&t.LayerManager.changeLayerVisible("s:"+a,!0),e&&t.LayerManager.changeLayerVisible("s:"+e,!1))});function h(a){if(!a||a.length<=2||a[1]!=":")return;let e;const i=new x(B.ImageAdminClient);b(f.Config.ServiceURL.WMTSService+"/GetServiceBrowse",{layer:a}).then(m=>{if(m.status===200){if(e=m.data,o.name=e.name,o.projection=e.prjInfo?.epsg??"EPSG:3857",o.rule=e.tileSchema?.rule??"W",a.startsWith("m:")){r.value.length=0,s.value="";const M=a.substring(2);i.GetMultiServiceRelServiceList(M,0,0).then(v=>{v.arrayList.forEach(n=>{r.value.push({label:n.servicealias??n.servicename,value:n.servicename});const _="s:"+n.servicename,d={...e};d.name=n.servicename,t.WMTSTool.addWMTSLayerSelf(d,_)}),r.value.length>0&&(s.value=r.value[r.value.length-1].value)}).catch(v=>{})}else t.WMTSTool.addWMTSLayerSelf(e,a);const p=e.bounds;p?t.zoomToExtent(p):t.zoomToCenter(e.center,e.level??5)}})}return k(()=>{t=f.XMap;const a=L.query.layer;h(a)}),O(()=>{}),(a,e)=>(l(),g("div",G,[o.name?(l(),g("ul",U,[c("li",null," 图层名："+u(o.name),1),e[1]||(e[1]=j(" 切片方案： 坐标系： ")),c("li",null," 切片方案："+u(o.rule),1),c("li",null," 坐标系："+u(o.projection),1)])):y("",!0),r.value.length>0?(l(),D(T,{key:1,class:"radioOption",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=i=>s.value=i),options:r.value,color:"primary"},null,8,["modelValue","options"])):y("",!0)]))}}),Z=E(w,[["__scopeId","data-v-3db3d51e"]]);export{Z as default};
