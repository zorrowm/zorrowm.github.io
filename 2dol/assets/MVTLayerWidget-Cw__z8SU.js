import{a6 as L,H as b}from"./vendor-BjjxFmO4.js";import{r as V,D as x}from"./xgis-ol-exp-CshjZaOS.js";import{F as m,f as T}from"./xframelib-exp-B5TZbF78.js";import{b as j}from"./vue-router-exp-CvNwyAs-.js";import{d as k,r,B as C,O as D,S as I,c as i,U as c,a2 as u}from"./@vue-exp-18LRBxdm.js";import{_ as S}from"./index-Dxssf89i.js";import"./ol-exp-BZzGrai6.js";import"./@iconify/vue-exp-C65O8cJc.js";import"./axios-exp-C7rfqWEd.js";import"./monaco-editor-exp-BNK_u0iZ.js";const B={class:"rightPanel"},U={class:"q-pa-md",style:{"max-width":"500px"}},W=k({__name:"MVTLayerWidget",setup(h){j();const p=r(""),f=r(""),v=r("");let t,o,d;const n=r("https://vector.gis.digsur.com/vtile/admin/test1113/tile.json?tk=00065a33-7951-4250-b1b2-ab7b871a4aa3"),s=r("");function y(e){p.value=e.tileSchema?.rule??"W",f.value=e.id,v.value=e.name;const l=V.getProjection(e.prjInfo),a=m.XMap;d||(d=new x(a)),t&&a.LayerManager.deleteLayer(t),t=d.addVTLayer(e),a.MapView.setZoom(e.center[2]);let g=V.fromLonLatCoordinate([e.center[0],e.center[1]],l);a.MapView.setCenter(g)}function _(){if(s.value){const e=JSON.parse(s.value);y(e)}else n.value&&T(n.value).then(e=>{e.data&&y(e.data)})}function M(){if(t){const e=m.XMap;o?(e.map.removeLayer(o),o=void 0):o=e.WMTSTool.addWMTSDebugLayer(t)}}return C(()=>{const e=m.XMap;t&&e.LayerManager.deleteLayer(t),o&&(e.map.removeLayer(o),o=void 0)}),(e,l)=>(D(),I("div",B,[i(L,{clearable:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),label:"tileJson地址","stack-label":"",dense:!1},null,8,["modelValue"]),c("div",U,[i(L,{clearable:"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),filled:"",type:"textarea"},null,8,["modelValue"])]),i(b,{color:"primary",label:"加载TileJson",onClick:_}),i(b,{color:"primary",label:"加载/移除网格",onClick:M}),c("div",null,[c("span",null,"图层ID:"+u(f.value)+" 服务名："+u(v.value)+" 切片方案："+u(p.value),1)])]))}}),G=S(W,[["__scopeId","data-v-e2d9d92a"]]);export{G as default};
