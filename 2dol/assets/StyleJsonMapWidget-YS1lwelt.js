import{a5 as v,K as M}from"./vendor-71nkuPi7.js";import{C as g,l as V}from"./xgis-ol-exp-DhNIKuy9.js";import{B as y,k as S}from"./xframelib-exp-Dh6eGY1k.js";import{d as b,r as l,D as x,U as k,c,V as d,a3 as p,P as D}from"./@vue-exp-Mkau1HGZ.js";import{_ as j}from"./index-Cl6kQhfR.js";import"./@hprose-exp-B7dHRfib.js";import"./@iconify/vue-exp-DwwUNauw.js";import"./ol-exp-64kmBCi6.js";import"./axios-exp-C7rfqWEd.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-ButTbbfG.js";const B=b({__name:"StyleJsonMapWidget",setup(L,{expose:o}){o();const s=l(""),t=l(""),i=l("");let n;const a=l("https://map.gis.digsur.com/Resource/styles/BJ_OSM_NEW/style.json?tk=undefined"),m=l("");function u(e){s.value=e.tileSchema?.rule??"W",t.value=e.id,i.value=e.name;const r=y.XMap;g(r.map,e).then(F=>{const _=r.MapView.getProjection();e.zoom,r.MapView.setZoom(e.zoom),e.center?r.MapView.setCenter(V.fromLonLatCoordinate(e.center,_)):r.MapView.setCenter(V.fromLonLatCoordinate(e.center,_))})}function C(){if(m.value){const e=JSON.parse(m.value);u(e)}else a.value&&S(a.value).then(e=>{e.data&&u(e.data)})}x(()=>{const e=y.XMap;n&&e.LayerManager.deleteLayer(n)});const f={PrjValue:s,serviceID:t,serviceName:i,get mvtLayer(){return n},set mvtLayer(e){n=e},styleJsonURL:a,styleJsonContent:m,loadMVTLayer:u,doClick:C};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),P={class:"rightPanel"},U={class:"q-pa-md",style:{"max-width":"500px"}};function w(L,o,s,t,i,n){return D(),k("div",P,[c(v,{clearable:"",modelValue:t.styleJsonURL,"onUpdate:modelValue":o[0]||(o[0]=a=>t.styleJsonURL=a),label:"StyleJson地址","stack-label":"",dense:!1},null,8,["modelValue"]),d("div",U,[c(v,{clearable:"",modelValue:t.styleJsonContent,"onUpdate:modelValue":o[1]||(o[1]=a=>t.styleJsonContent=a),filled:"",type:"textarea"},null,8,["modelValue"])]),c(M,{color:"primary",label:"加载StyleJson",onClick:t.doClick}),d("div",null,[d("span",null,"图层ID:"+p(t.serviceID)+" 服务名："+p(t.serviceName)+" 切片方案："+p(t.PrjValue),1)])])}const X=j(B,[["render",w],["__scopeId","data-v-cffa1b11"],["__file","StyleJsonMapWidget.vue"]]);export{X as default};
