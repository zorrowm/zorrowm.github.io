import{W as L,K as b}from"./vendor-DEnSXaZk.js";import{r as V,D as x}from"./xgis-ol-exp-B_x7d6gL.js";import{F as m,g as T}from"./xframelib-exp-DUbArU78.js";import{u as j}from"./vue-router-exp-CLDoDjFh.js";import{d as k,r,B as C,O as D,S as I,c as i,U as c,a2 as u}from"./@vue-exp-DhuHfG86.js";import{_ as S}from"./index-9YwdlOdB.js";import"./ol-exp-DNVUl0aT.js";import"./@iconify/vue-exp-DcFsj1aI.js";import"./axios-exp-C7rfqWEd.js";import"./monaco-editor-exp-BNK_u0iZ.js";const W={class:"rightPanel"},B={class:"q-pa-md",style:{"max-width":"500px"}},U=k({__name:"MVTLayerWidget",setup(h){j();const p=r(""),f=r(""),v=r("");let t,o,d;const n=r("https://vector.gis.digsur.com/vtile/admin/test1113/tile.json?tk=00065a33-7951-4250-b1b2-ab7b871a4aa3"),s=r("");function y(e){p.value=e.tileSchema?.rule??"W",f.value=e.id,v.value=e.name;const l=V.getProjection(e.prjInfo),a=m.XMap;d||(d=new x(a)),t&&a.LayerManager.deleteLayer(t),t=d.addVTLayer(e),a.MapView.setZoom(e.center[2]);let M=V.fromLonLatCoordinate([e.center[0],e.center[1]],l);a.MapView.setCenter(M)}function _(){if(s.value){const e=JSON.parse(s.value);y(e)}else n.value&&T(n.value).then(e=>{e.data&&y(e.data)})}function g(){if(t){const e=m.XMap;o?(e.map.removeLayer(o),o=void 0):o=e.WMTSTool.addWMTSDebugLayer(t)}}return C(()=>{const e=m.XMap;t&&e.LayerManager.deleteLayer(t),o&&(e.map.removeLayer(o),o=void 0)}),(e,l)=>(D(),I("div",W,[i(L,{clearable:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),label:"tileJson地址","stack-label":"",dense:!1},null,8,["modelValue"]),c("div",B,[i(L,{clearable:"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),filled:"",type:"textarea"},null,8,["modelValue"])]),i(b,{color:"primary",label:"加载TileJson",onClick:_}),i(b,{color:"primary",label:"加载/移除网格",onClick:g}),c("div",null,[c("span",null,"图层ID:"+u(f.value)+" 服务名："+u(v.value)+" 切片方案："+u(p.value),1)])]))}}),G=S(U,[["__scopeId","data-v-7a8cb959"]]);export{G as default};
