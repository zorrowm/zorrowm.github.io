import{O as _}from"./vendor-DEnSXaZk.js";import{u as T}from"./vue-router-exp-CLDoDjFh.js";import{F as d,g as W}from"./xframelib-exp-DUbArU78.js";import{M as b}from"./MultiService-BXyHVpPA.js";import{S as x}from"./index-1r0G7BfX.js";import{d as B,e as C,r as S,w as I,b as V,B as k,O as l,S as g,U as c,a2 as u,a6 as G,W as y,P as O}from"./@vue-exp-DhuHfG86.js";import{_ as j}from"./index-9YwdlOdB.js";import"./ol-exp-DNVUl0aT.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-DcFsj1aI.js";import"./monaco-editor-exp-BNK_u0iZ.js";const D={class:"rightOptionList"},E={key:0,class:"layer_info"},U=B({__name:"MultiTimeLayerWidget",setup(w){T();let t;const o=C({name:"",rule:"",projection:""}),r=S([]),n=S("");I(()=>n.value,(a,e)=>{t&&(a&&t.LayerManager.changeLayerVisible("s:"+a,!0),e&&t.LayerManager.changeLayerVisible("s:"+e,!1))});function M(a){if(a.length<=2||a[1]!=":")return;let e;const i=new b(x.ImageAdminClient);W(d.Config.ServiceURL.WMTSService+"/GetServiceBrowse",{layer:a}).then(m=>{if(m.status===200){if(e=m.data,o.name=e.name,o.projection=e.prjInfo?.epsg??"EPSG:3857",o.rule=e.tileSchema?.rule??"W",a.startsWith("m:")){r.value.length=0,n.value="";const h=a.substring(2);i.GetMultiServiceRelServiceList(h,0,0).then(v=>{v.arrayList.forEach(s=>{r.value.push({label:s.servicealias??s.servicename,value:s.servicename});const L="s:"+s.servicename,f={...e};f.name=s.servicename,t.WMTSTool.addWMTSLayerSelf(f,L)}),r.value.length>0&&(n.value=r.value[r.value.length-1].value)}).catch(v=>{})}else t.WMTSTool.addWMTSLayerSelf(e,a);const p=e.bounds;p?t.zoomToExtent(p):t.zoomToCenter(e.center,e.level??5)}})}return V(()=>{t=d.XMap,M("m:GuLangYu")}),k(()=>{}),(a,e)=>(l(),g("div",D,[o.name?(l(),g("ul",E,[c("li",null," 图层名："+u(o.name),1),e[1]||(e[1]=G(" 切片方案： 坐标系： ")),c("li",null," 切片方案："+u(o.rule),1),c("li",null," 坐标系："+u(o.projection),1)])):y("",!0),r.value.length>0?(l(),O(_,{key:1,class:"radioOption",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=i=>n.value=i),options:r.value,color:"primary"},null,8,["modelValue","options"])):y("",!0)]))}}),K=j(U,[["__scopeId","data-v-b6650dc7"]]);export{K as default};
