import{a5 as V,K as b}from"./vendor-71nkuPi7.js";import{l as g,z as F}from"./xgis-ol-exp-DhNIKuy9.js";import{B as f,k as j}from"./xframelib-exp-Dh6eGY1k.js";import{b as k}from"./vue-router-exp-ButTbbfG.js";import{d as B,r as n,D as P,U as S,c as s,V as v,a3 as y,P as U}from"./@vue-exp-Mkau1HGZ.js";import{_ as I}from"./index-Cl6kQhfR.js";import"./@hprose-exp-B7dHRfib.js";import"./@iconify/vue-exp-DwwUNauw.js";import"./ol-exp-64kmBCi6.js";import"./axios-exp-C7rfqWEd.js";import"./monaco-editor-exp-B01XOe8A.js";const W=B({__name:"MVTLayerWidget",setup(M,{expose:r}){r();const L=k(),t=n(""),u=n(""),d=n("");let a,o,l;const c=n(""),m=n("");function p(e){t.value=e.tileSchema?.rule??"W",u.value=e.id,d.value=e.name;const x=g.getProjection(e.prjInfo),i=f.XMap;l||(l=new F(i)),a&&i.LayerManager.deleteLayer(a),a=l.addVTLayer(e),i.MapView.setZoom(e.center[2]);let D=g.fromLonLatCoordinate([e.center[0],e.center[1]],x);i.MapView.setCenter(D)}function C(){if(m.value){const e=JSON.parse(m.value);p(e)}else c.value&&j(c.value).then(e=>{e.data&&p(e.data)})}function T(){if(a){const e=f.XMap;o?(e.map.removeLayer(o),o=void 0):o=e.WMTSTool.addWMTSDebugLayer(a)}}P(()=>{const e=f.XMap;a&&e.LayerManager.deleteLayer(a),o&&(e.map.removeLayer(o),o=void 0)});const _={route:L,PrjValue:t,serviceID:u,serviceName:d,get mvtLayer(){return a},set mvtLayer(e){a=e},get debugLayer(){return o},set debugLayer(e){o=e},get vtTool(){return l},set vtTool(e){l=e},tileJsonURL:c,tileJsonContent:m,loadMVTLayer:p,doClick:C,loadGridLayer:T};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),A={class:"rightPanel"},N={class:"q-pa-md",style:{"max-width":"500px"}};function w(M,r,L,t,u,d){return U(),S("div",A,[s(V,{clearable:"",modelValue:t.tileJsonURL,"onUpdate:modelValue":r[0]||(r[0]=a=>t.tileJsonURL=a),label:"tileJson地址","stack-label":"",dense:!1},null,8,["modelValue"]),v("div",N,[s(V,{clearable:"",modelValue:t.tileJsonContent,"onUpdate:modelValue":r[1]||(r[1]=a=>t.tileJsonContent=a),filled:"",type:"textarea"},null,8,["modelValue"])]),s(b,{color:"primary",label:"加载TileJson",onClick:t.doClick}),s(b,{color:"primary",label:"加载/移除网格",onClick:t.loadGridLayer}),v("div",null,[v("span",null,"图层ID:"+y(t.serviceID)+" 服务名："+y(t.serviceName)+" 切片方案："+y(t.PrjValue),1)])])}const Z=I(W,[["render",w],["__scopeId","data-v-dba14bcf"],["__file","MVTLayerWidget.vue"]]);export{Z as default};
