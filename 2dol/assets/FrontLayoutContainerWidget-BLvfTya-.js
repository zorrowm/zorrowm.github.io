import{ad as M,ae as O,af as Q,B as j,A as z,Y as H,J as U}from"./vendor-CcHNtcKJ.js";import{_ as b,w as Y}from"./index-jafnMoOd.js";import{u as J,b as G}from"./vue-router-exp-B0kidEOa.js";import{h as F,N as K,k as Z,e as ee,B as y,m as te}from"./xframelib-exp-CxzDUbp4.js";import{d as I,r as f,w as ne,X as L,$ as N,a0 as r,a1 as R,ae as P,a as oe,_ as V,ah as q,E as S,Y as $,b as ie,L as ae,c as d,a6 as C,aa as le}from"./@vue-exp-DTehQd6t.js";import"./@hprose-exp-CYjcO8Nw.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-Ct1khs4G.js";const se=I({__name:"index",props:{leftWidth:M().def("0px")},setup(n,{expose:o}){o();const a=n,e=f(null);let g,c;ne(()=>a.leftWidth,i=>{i&&e.value&&(e.value.style.width=i)});const l=O(function(i){e.value&&(e.value.style.width=c+i.clientX-g+"px")},20),u=()=>{document.documentElement.style.userSelect="unset",document.documentElement.removeEventListener("mousemove",l),document.documentElement.removeEventListener("mouseup",u),F.dispatchWindowResize()},E={props:a,scalable:e,get startX(){return g},set startX(i){g=i},get startWidth(){return c},set startWidth(i){c=i},onDrag:l,dragEnd:u,startDrag:i=>{g=i.clientX,e.value&&(c=parseInt(window.getComputedStyle(e.value).width,10)),document.documentElement.style.userSelect="none",document.documentElement.addEventListener("mousemove",l),document.documentElement.addEventListener("mouseup",u)}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),re={class:"split-wrapper"},ue={ref:"scalable",class:"scalable"},ce={class:"left-content"},de={class:"right-content"};function fe(n,o,a,e,g,c){return L(),N("div",re,[r("div",ue,[r("div",ce,[R(n.$slots,"left-content",{},()=>[o[0]||(o[0]=P("右边内容区"))],!0)]),r("div",{ref:"separator",class:"separator",onMousedown:e.startDrag},o[1]||(o[1]=[r("i",null,null,-1),r("i",null,null,-1)]),544)],512),r("div",de,[R(n.$slots,"right-content",{},()=>[o[2]||(o[2]=P("右边内容区"))],!0)])])}const ge=b(se,[["render",fe],["__scopeId","data-v-d3df8b51"],["__file","index.vue"]]),me=I({name:"FullScreen",props:{target:Q(),color:M()},setup(n){function o(){a.value?(F.exitFullScreen(),a.value=!1):(F.requestFullScreen(n.target),a.value=!0)}const a=f(!1);return{getTitle:oe(()=>a.value?"退出全屏":"全屏"),isFullscreen:a,toggle:o}}});function pe(n,o,a,e,g,c){const l=V("Icon"),u=q("tooltip");return n.isFullscreen?S((L(),$(l,{key:1,icon:"ant-design:fullscreen-exit-outlined",color:n.color,onClick:n.toggle},null,8,["color","onClick"])),[[u,n.getTitle,void 0,{right:!0}]]):S((L(),$(l,{key:0,icon:"ant-design:fullscreen-outlined",color:n.color,onClick:n.toggle},null,8,["color","onClick"])),[[u,n.getTitle,void 0,{right:!0}]])}const ve=b(me,[["render",pe],["__scopeId","data-v-c8c965ee"],["__file","FullScreen.vue"]]),W="frontLayoutWidget",_e=I({__name:"FrontLayoutContainerWidget",setup(n,{expose:o}){const a=J(),e=G(),g=f(),c=Y,l=f(c),u=f(W);let m;K("widgetsList.txt").then(t=>{t.data&&(m=Z(t.data))});function E(){i.value=!1,v.value=!1,_.value="",y.gui&&(y.gui.destroy(),y.gui=void 0);const t=e.query?.wid;if(t){const s=y.LayoutMap.get(W);s&&(t=="MapViewerWidget"?s.unloadWidget(t.toString()):(s.unloadWidget(t.toString()),setTimeout(()=>{s.unloadWidget("MapViewerWidget")},500)))}a.push({query:void 0})}const i=f(!0);function B(t=!1){i.value=t}o({changeVisible:B,isShow:i});const h=f("0px"),w=f(""),v=f(!1),_=f("");async function T(){if(h.value==="0px"?h.value="40%":h.value="0px",v.value=!v.value,v.value&&!_.value){const t=e.query?.wid?.toString();if(t&&m){const s=m.find(p=>p.layoutID==="frontLayoutWidget"&&p.id===t);s&&(w.value=s.path,_.value=await(await fetch("code"+s.path).catch())?.text(),_.value&&x())}}}function X(){h.value="0px",v.value=!1}function D(t){const s=t.lastIndexOf("/")+1;let p=t.substring(s);return p=decodeURI(p.split("?")[0]),p}function A(){if(w.value){const t=D(w.value);te(y.Axios,"code"+w.value,t)}}function x(){const t=document.getElementById("container");if(t){window.MonacoEnvironment={getWorkerUrl:function(p,Le){return""}};var s=s.create(t,{value:_.value,language:"typescript",lineNumbers:"on",readOnly:!0,readOnlyMessage:{value:"不可以修改哦",supportThemeIcons:!0,supportHtml:!0},automaticLayout:!0,minimap:{enabled:!1},overviewRulerLanes:0,scrollbar:{horizontal:"hidden",handleMouseWheel:!0}})}}ie(()=>{});const k={name:W,router:a,route:e,containerRef:g,widgetCofig:c,configRef:l,layoutIDRef:u,get widgetsList(){return m},set widgetsList(t){m=t},closeFrontLayoutWidget:E,isShow:i,changeVisible:B,leftPanelWidth:h,widgetFilePath:w,drawerLeft:v,drawerContetn:_,SwitchDrawer:T,closeCodePanel:X,getFileName:D,downloadVue:A,InitMonaCoeditor:x,get LayoutContainer(){return ee},SplitPanel:ge,FullScreen:ve};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),he={class:"frontcontainer"},we={id:"container",ref:"containerRef",style:{height:"100%",width:"100%"}},ye={class:"editorBar row justify-center items-middle"},Ce={class:"q-mr-md q-gutter-md"},Se={class:"rightBtn q-px-sm"};function Ee(n,o,a,e,g,c){const l=V("Icon"),u=q("tooltip");return S((L(),N("div",he,[d(j,{view:"hHh lpR fFf"},{default:C(()=>[d(z,null,{default:C(()=>[d(e.SplitPanel,{style:{height:"100vh",width:"100%"},leftWidth:e.leftPanelWidth},{"left-content":C(()=>[r("div",we,[r("div",ye,[r("div",null,le(e.widgetFilePath),1),d(H),r("div",Ce,[S(d(l,{icon:"ant-design:download-outlined",onClick:e.downloadVue},null,512),[[u,"下载vue文件"]]),d(e.FullScreen,{target:e.containerRef},null,8,["target"]),S(d(l,{icon:"ant-design:close-circle-outlined",onClick:e.closeCodePanel},null,512),[[u,"关闭代码页"]])])])],512)]),"right-content":C(()=>[d(e.LayoutContainer,{widgetConfig:e.configRef,layoutID:e.layoutIDRef,enableRouterView:!1},{default:C(()=>[r("div",Se,[r("span",{class:"cursor-pointer",title:"关闭",onClick:e.closeFrontLayoutWidget,style:{"margin-right":"10px"}},[d(l,{icon:"ant-design:close-circle-outlined",width:"32",style:{color:"white !important"}})]),d(U,{flat:"",onClick:o[0]||(o[0]=m=>e.SwitchDrawer()),label:"查看代码",dense:"",icon:"menu"})])]),_:1},8,["widgetConfig","layoutID"])]),_:1},8,["leftWidth"])]),_:1})]),_:1})],512)),[[ae,e.isShow]])}const Re=b(_e,[["render",Ee],["__scopeId","data-v-20efb9dd"],["__file","FrontLayoutContainerWidget.vue"]]);export{Re as default};
