import{a2 as g,ab as b,a3 as n,ah as i,ai as G,W as Q,aj as I,K as L,a1 as M}from"./vendor-DEnSXaZk.js";import{r as U}from"./xgis-ol-exp-B_x7d6gL.js";import{F as d,p as y,D}from"./xframelib-exp-DUbArU78.js";import{d as R,r as V,b as N,w as W,O as p,S as B,D as S,P,_ as a,c as t,a6 as m,a2 as T,W as X,ab as q}from"./@vue-exp-DhuHfG86.js";import"./ol-exp-DNVUl0aT.js";import"./@iconify/vue-exp-DcFsj1aI.js";import"./axios-exp-C7rfqWEd.js";const z={class:"q-pa-sm no-wrap"},h=R({__name:"EpsgSwitchWidget",setup(F){const l=V(),u=V(""),f=V("");function w(){if(!u.value)return;const o=u.value.toLocaleLowerCase();let e="";if(o.startsWith("epsg:"))e=o.substring(5);else{const c=Number(o);y(c)&&(e=c.toString())}if(!e){d.Message.warn("无效的EPSG代码！");return}const r=d.Config.ServiceURL.EPSGServiceURL??"https://epsg.gis.digsur.com",s=d.XMap;D("/epsg/"+e,r).then(c=>{if(c.data){const v=c.data,j="EPSG:"+v.code;f.value=j;const x=(v.kind==="projected"?v.pbox:v.bbox).split(",").map(C=>Number(C)),_={epsg:j,prjExtent:x,proj4:v.proj4},k=U.getProjection(_);k&&s.setProjection(k)}else d.Message.warn("查询EPSG为空")})}let E;return N(()=>{if(d.XMap){const o=d.XMap,e=o.MapView.getProjection().getCode();switch(e){case"EPSG:4490":E="EPSG:4490",l.value="EPSG:4326";break;case"EPSG:4326":l.value="EPSG:4326";break;case"EPSG:3857":l.value="EPSG:3857";break;default:f.value=e,l.value="其他";break}W(()=>l.value,r=>{if(r)switch(r){case"EPSG:4326":E==="EPSG:4490"?o.setProjection(E):o.setProjection(r);break;case"EPSG:3857":o.setProjection(r);break;case"其他":f.value&&o.setProjection(f.value);break}})}}),(o,e)=>{const r=q("media");return p(),B("div",z,[S((p(),P(M,null,{default:a(()=>[S((p(),P(g,{tag:"label"},{default:a(()=>[t(n,{avatar:""},{default:a(()=>[t(b,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),val:"EPSG:4326",color:"primary"},null,8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(i,null,{default:a(()=>e[5]||(e[5]=[m("经纬度")])),_:1}),t(i,{caption:""},{default:a(()=>e[6]||(e[6]=[m("EPSG:4326")])),_:1})]),_:1})]),_:1})),[[G]]),S((p(),P(g,{tag:"label"},{default:a(()=>[t(n,{avatar:""},{default:a(()=>[t(b,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s),val:"EPSG:3857",color:"primary"},null,8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(i,null,{default:a(()=>e[7]||(e[7]=[m("Web墨卡托")])),_:1}),t(i,{caption:""},{default:a(()=>e[8]||(e[8]=[m("EPSG:3857 ")])),_:1})]),_:1})]),_:1})),[[G]]),S((p(),P(g,{tag:"label"},{default:a(()=>[t(n,{avatar:""},{default:a(()=>[t(b,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value=s),val:"other",color:"primary"},null,8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(i,null,{default:a(()=>e[9]||(e[9]=[m("其他")])),_:1}),t(i,{caption:""},{default:a(()=>[m(T(f.value),1)]),_:1})]),_:1}),t(n,{side:""},{default:a(()=>[t(Q,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=s=>u.value=s),label:"输入EPSG查询",dense:!0},{append:a(()=>[u.value!==""?(p(),P(I,{key:0,name:"close",onClick:e[3]||(e[3]=s=>u.value=""),class:"cursor-pointer"})):X("",!0)]),after:a(()=>[t(L,{round:"",dense:"",flat:"",icon:"search",style:{"z-index":"10"},onClick:w})]),_:1},8,["modelValue"])]),_:1})]),_:1})),[[G]])]),_:1})),[[r,"row.gt.sm"]])])}}});export{h as default};
