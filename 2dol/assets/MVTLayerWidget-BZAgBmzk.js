import{a6 as b,J as V}from"./vendor-CcHNtcKJ.js";import{s as g,F as D}from"./xgis-ol-exp-DABivj7e.js";import{B as f,N as j}from"./xframelib-exp-CxzDUbp4.js";import{b as k}from"./vue-router-exp-B0kidEOa.js";import{d as B,r as n,D as N,$ as S,c as i,a0 as v,aa as y,X as I}from"./@vue-exp-DTehQd6t.js";import{_ as P}from"./index-o5kdQfcL.js";import"./@hprose-exp-CYjcO8Nw.js";import"./@iconify/vue-exp-Ct1khs4G.js";import"./ol-exp-DkhKL1MQ.js";import"./axios-exp-B_zfNCMU.js";const U=B({__name:"MVTLayerWidget",setup(M,{expose:r}){r();const L=k(),t=n(""),u=n(""),d=n("");let a,o,l;const c=n(""),m=n("");function p(e){t.value=e.tileSchema?.rule??"W",u.value=e.id,d.value=e.name;const F=g.getProjection(e.prjInfo),s=f.XMap;l||(l=new D(s)),a&&s.LayerManager.deleteLayer(a),a=l.addVTLayer(e),s.MapView.setZoom(e.center[2]);let x=g.fromLonLatCoordinate([e.center[0],e.center[1]],F);s.MapView.setCenter(x)}function C(){if(m.value){const e=JSON.parse(m.value);p(e)}else c.value&&j(c.value).then(e=>{e.data&&p(e.data)})}function T(){if(a){const e=f.XMap;o?(e.map.removeLayer(o),o=void 0):o=e.WMTSTool.addWMTSDebugLayer(a)}}N(()=>{const e=f.XMap;a&&e.LayerManager.deleteLayer(a),o&&(e.map.removeLayer(o),o=void 0)});const _={route:L,PrjValue:t,serviceID:u,serviceName:d,get mvtLayer(){return a},set mvtLayer(e){a=e},get debugLayer(){return o},set debugLayer(e){o=e},get vtTool(){return l},set vtTool(e){l=e},tileJsonURL:c,tileJsonContent:m,loadMVTLayer:p,doClick:C,loadGridLayer:T};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),W={class:"rightPanel"},A={class:"q-pa-md",style:{"max-width":"500px"}};function w(M,r,L,t,u,d){return I(),S("div",W,[i(b,{clearable:"",modelValue:t.tileJsonURL,"onUpdate:modelValue":r[0]||(r[0]=a=>t.tileJsonURL=a),label:"tileJson地址","stack-label":"",dense:!1},null,8,["modelValue"]),v("div",A,[i(b,{clearable:"",modelValue:t.tileJsonContent,"onUpdate:modelValue":r[1]||(r[1]=a=>t.tileJsonContent=a),filled:"",type:"textarea"},null,8,["modelValue"])]),i(V,{color:"primary",label:"加载TileJson",onClick:t.doClick}),i(V,{color:"primary",label:"加载/移除网格",onClick:t.loadGridLayer}),v("div",null,[v("span",null,"图层ID:"+y(t.serviceID)+" 服务名："+y(t.serviceName)+" 切片方案："+y(t.PrjValue),1)])])}const z=P(U,[["render",w],["__scopeId","data-v-dba14bcf"],["__file","MVTLayerWidget.vue"]]);export{z as default};
