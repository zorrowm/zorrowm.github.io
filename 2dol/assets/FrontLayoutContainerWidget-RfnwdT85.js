import{ad as V,ae as j,af as z,B as H,A as U,Y,J}from"./vendor-CcHNtcKJ.js";import{_ as I,w as G}from"./index-Bagyd4Bo.js";import{u as K,b as Z}from"./vue-router-exp-B0kidEOa.js";import{h as F,N as P,k as ee,e as te,B as y,m as ne}from"./xframelib-exp-CxzDUbp4.js";import{d as b,r as f,w as oe,X as L,$ as q,a0 as s,a1 as $,ae as M,a as ae,_ as T,ah as X,E as S,Y as N,b as ie,L as le,c as d,a6 as C,aa as se}from"./@vue-exp-DTehQd6t.js";import"./@hprose-exp-CYjcO8Nw.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-Ct1khs4G.js";const re=b({__name:"index",props:{leftWidth:V().def("0px")},setup(n,{expose:o}){o();const i=n,e=f(null);let g,c;oe(()=>i.leftWidth,a=>{a&&e.value&&(e.value.style.width=a)});const l=j(function(a){e.value&&(e.value.style.width=c+a.clientX-g+"px")},20),r=()=>{document.documentElement.style.userSelect="unset",document.documentElement.removeEventListener("mousemove",l),document.documentElement.removeEventListener("mouseup",r),F.dispatchWindowResize()},E={props:i,scalable:e,get startX(){return g},set startX(a){g=a},get startWidth(){return c},set startWidth(a){c=a},onDrag:l,dragEnd:r,startDrag:a=>{g=a.clientX,e.value&&(c=parseInt(window.getComputedStyle(e.value).width,10)),document.documentElement.style.userSelect="none",document.documentElement.addEventListener("mousemove",l),document.documentElement.addEventListener("mouseup",r)}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),ue={class:"split-wrapper"},ce={ref:"scalable",class:"scalable"},de={class:"left-content"},fe={class:"right-content"};function ge(n,o,i,e,g,c){return L(),q("div",ue,[s("div",ce,[s("div",de,[$(n.$slots,"left-content",{},()=>[o[0]||(o[0]=M("右边内容区"))],!0)]),s("div",{ref:"separator",class:"separator",onMousedown:e.startDrag},o[1]||(o[1]=[s("i",null,null,-1),s("i",null,null,-1)]),544)],512),s("div",fe,[$(n.$slots,"right-content",{},()=>[o[2]||(o[2]=M("右边内容区"))],!0)])])}const me=I(re,[["render",ge],["__scopeId","data-v-d3df8b51"],["__file","index.vue"]]),pe=b({name:"FullScreen",props:{target:z(),color:V()},setup(n){function o(){i.value?(F.exitFullScreen(),i.value=!1):(F.requestFullScreen(n.target),i.value=!0)}const i=f(!1);return{getTitle:ae(()=>i.value?"退出全屏":"全屏"),isFullscreen:i,toggle:o}}});function ve(n,o,i,e,g,c){const l=T("Icon"),r=X("tooltip");return n.isFullscreen?S((L(),N(l,{key:1,icon:"ant-design:fullscreen-exit-outlined",color:n.color,onClick:n.toggle},null,8,["color","onClick"])),[[r,n.getTitle,void 0,{right:!0}]]):S((L(),N(l,{key:0,icon:"ant-design:fullscreen-outlined",color:n.color,onClick:n.toggle},null,8,["color","onClick"])),[[r,n.getTitle,void 0,{right:!0}]])}const _e=I(pe,[["render",ve],["__scopeId","data-v-c8c965ee"],["__file","FullScreen.vue"]]),W="frontLayoutWidget",he=b({__name:"FrontLayoutContainerWidget",setup(n,{expose:o}){const i=K(),e=Z(),g=f(),c=G,l=f(c),r=f(W);let p;P("widgetsList.txt").then(t=>{t.data&&(p=ee(t.data))});function E(){a.value=!1,_.value=!1,h.value="",y.gui&&(y.gui.destroy(),y.gui=void 0);const t=e.query?.wid;if(t){const u=y.LayoutMap.get(W);u&&(t=="MapViewerWidget"?u.unloadWidget(t.toString()):(u.unloadWidget(t.toString()),setTimeout(()=>{u.unloadWidget("MapViewerWidget")},500)))}i.push({query:void 0})}const a=f(!0);function B(t=!1){a.value=t}o({changeVisible:B,isShow:a});const w=f("0px"),v=f(""),_=f(!1),h=f("");async function A(){if(w.value==="0px"?w.value="40%":w.value="0px",_.value=!_.value,_.value&&!h.value){const t=e.query?.wid?.toString();if(t&&p){const u=p.find(m=>m.layoutID==="frontLayoutWidget"&&m.id===t);if(u){v.value=u.path;const m="code"+v.value,R=await P(m).catch(We=>{});h.value=R.data,h.value&&k()}}}}function O(){w.value="0px",_.value=!1}function D(t){const u=t.lastIndexOf("/")+1;let m=t.substring(u);return m=decodeURI(m.split("?")[0]),m}function Q(){if(v.value){const t=D(v.value);ne(y.Axios,"code"+v.value,t)}}function k(){const t=document.getElementById("container");if(t){window.MonacoEnvironment={getWorkerUrl:function(m,R){return""}};var u=u.create(t,{value:h.value,language:"typescript",lineNumbers:"on",readOnly:!0,readOnlyMessage:{value:"不可以修改哦",supportThemeIcons:!0,supportHtml:!0},automaticLayout:!0,minimap:{enabled:!1},overviewRulerLanes:0,scrollbar:{horizontal:"hidden",handleMouseWheel:!0}})}}ie(()=>{});const x={name:W,router:i,route:e,containerRef:g,widgetCofig:c,configRef:l,layoutIDRef:r,get widgetsList(){return p},set widgetsList(t){p=t},closeFrontLayoutWidget:E,isShow:a,changeVisible:B,leftPanelWidth:w,widgetFilePath:v,drawerLeft:_,drawerContetn:h,SwitchDrawer:A,closeCodePanel:O,getFileName:D,downloadVue:Q,InitMonaCoeditor:k,get LayoutContainer(){return te},SplitPanel:me,FullScreen:_e};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),we={class:"frontcontainer"},ye={id:"container",ref:"containerRef",style:{height:"100%",width:"100%"}},Ce={class:"editorBar row justify-center items-middle"},Se={class:"q-mr-md q-gutter-md"},Ee={class:"rightBtn q-px-sm"};function Le(n,o,i,e,g,c){const l=T("Icon"),r=X("tooltip");return S((L(),q("div",we,[d(H,{view:"hHh lpR fFf"},{default:C(()=>[d(U,null,{default:C(()=>[d(e.SplitPanel,{style:{height:"100vh",width:"100%"},leftWidth:e.leftPanelWidth},{"left-content":C(()=>[s("div",ye,[s("div",Ce,[s("div",null,se(e.widgetFilePath),1),d(Y),s("div",Se,[S(d(l,{icon:"ant-design:download-outlined",onClick:e.downloadVue},null,512),[[r,"下载vue文件"]]),d(e.FullScreen,{target:e.containerRef},null,8,["target"]),S(d(l,{icon:"ant-design:close-circle-outlined",onClick:e.closeCodePanel},null,512),[[r,"关闭代码页"]])])])],512)]),"right-content":C(()=>[d(e.LayoutContainer,{widgetConfig:e.configRef,layoutID:e.layoutIDRef,enableRouterView:!1},{default:C(()=>[s("div",Ee,[s("span",{class:"cursor-pointer",title:"关闭",onClick:e.closeFrontLayoutWidget,style:{"margin-right":"10px"}},[d(l,{icon:"ant-design:close-circle-outlined",width:"32",style:{color:"white !important"}})]),d(J,{flat:"",onClick:o[0]||(o[0]=p=>e.SwitchDrawer()),label:"查看代码",dense:"",icon:"menu"})])]),_:1},8,["widgetConfig","layoutID"])]),_:1},8,["leftWidth"])]),_:1})]),_:1})],512)),[[le,e.isShow]])}const Pe=I(he,[["render",Le],["__scopeId","data-v-d74a712a"],["__file","FrontLayoutContainerWidget.vue"]]);export{Pe as default};
