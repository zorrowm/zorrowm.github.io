import{r as ir}from"./vendor-71nkuPi7.js";var xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pn(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}function Tn(p){if(p.__esModule)return p;var v=p.default;if(typeof v=="function"){var d=function f(){return this instanceof f?Reflect.construct(v,arguments,this.constructor):v.apply(this,arguments)};d.prototype=v.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(p).forEach(function(f){var s=Object.getOwnPropertyDescriptor(p,f);Object.defineProperty(d,f,s.get?s:{enumerable:!0,get:function(){return p[f]}})}),d}var O={},V={},Ye={},m={},L={},Sr;function he(){if(Sr)return L;Sr=1,Object.defineProperty(L,"__esModule",{value:!0});var p=new Uint8Array(0),v=1024;function d(u,o,c){return u[o++]=c>>>24&255,u[o++]=c>>>16&255,u[o++]=c>>>8&255,u[o++]=c&255,o}L.writeInt32BE=d;function f(u,o,c){return u[o++]=c&255,u[o++]=c>>>8&255,u[o++]=c>>>16&255,u[o++]=c>>>24&255,o}L.writeInt32LE=f;function s(u){return--u,u|=u>>1,u|=u>>2,u|=u>>4,u|=u>>8,u|=u>>16,u+1}var a=!0;try{e(new Uint8Array([1,2]))}catch{a=!1}function r(u){for(var o=u.length,c=new Array(o),y=0;y<o;++y)c[y]=u[y];return c}function e(u){return a?String.fromCharCode.apply(String,u):String.fromCharCode.apply(String,r(u))}function t(u,o){if(o<0&&(o=u.length),o===0)return["",0];var c=0,y=0,h=o<32767?o:32767,_=new Uint16Array(h+1),w=u.length,g=[];do{for(;c<h&&y<w;c++){var S=u[y++];switch(S>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:_[c]=S;break;case 12:case 13:if(y<w){_[c]=(S&31)<<6|u[y++]&63;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(y+1<w){_[c]=(S&15)<<12|(u[y++]&63)<<6|u[y++]&63;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(y+2<w){var D=((S&7)<<18|(u[y++]&63)<<12|(u[y++]&63)<<6|u[y++]&63)-65536;if(0<=D&&D<=1048575){_[c++]=D>>10&1023|55296,_[c]=D&1023|56320;break}throw new Error("Character outside valid Unicode range: 0x"+D.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+S.toString(16))}}g.push(e(_.subarray(0,c))),o-=c,c=0,h>o&&(h=o)}while(c<o&&y<w);return[g.length===1?g[0]:g.join(""),y]}function i(u){return t(u,u.length)[0]}L.fromUint8Array=i;function n(u){var o=u instanceof Uint8Array?u:new Uint8Array(u),c=o.length;if(c===0)return"";if(c<65535)return e(o);for(var y=c&32767,h=c>>15,_=new Array(y?h+1:h),w=0;w<h;++w)_[w]=e(o.subarray(w<<15,w+1<<15));return y&&(_[h]=e(o.subarray(h<<15,c))),_.join("")}L.toBinaryString=n;var l=function(){function u(o){this.buffer=p,this.size=0,this.offset=0,this.rmark=0,this.wmark=0,o&&(typeof o=="number"?this.buffer=new Uint8Array(o):typeof o=="string"?this.writeString(o):(o instanceof u?this.buffer=o.toBytes():o instanceof Uint8Array?this.buffer=o:o instanceof Uint8ClampedArray?this.buffer=new Uint8Array(o.buffer,o.byteOffset,o.length):this.buffer=new Uint8Array(o),this.size=o.length),this.mark())}return u.toString=function(o){return o===void 0?Object.toString.apply(u):typeof o=="string"?o:o instanceof u?o.toString():o instanceof Uint8Array?i(o):o instanceof ArrayBuffer?i(new Uint8Array(o,0)):e(o)},u.prototype.grow=function(o){var c=this.capacity;if(o=this.size+o,o>c)if(c>0){var y=new Uint8Array(s(o));y.set(this.buffer),this.buffer=y}else this.buffer=new Uint8Array(Math.max(s(o),v))},Object.defineProperty(u.prototype,"capacity",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"position",{get:function(){return this.offset},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"bytes",{get:function(){return this.buffer.subarray(0,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"remains",{get:function(){return this.buffer.subarray(this.offset,this.size)},enumerable:!0,configurable:!0}),u.prototype.mark=function(){this.wmark=this.size,this.rmark=this.offset},u.prototype.reset=function(){this.size=this.wmark,this.offset=this.rmark},u.prototype.clear=function(){this.buffer=p,this.size=0,this.offset=0,this.wmark=0,this.rmark=0},u.prototype.writeByte=function(o){this.grow(1),this.buffer[this.size++]=o},u.prototype.writeInt32BE=function(o){if(o!==(o|0))throw new TypeError("value is out of bounds");this.grow(4),this.size=d(this.buffer,this.size,o)},u.prototype.writeUInt32BE=function(o){if(o<0||o!==(o|0)&&(o&2147483647)+2147483648!==o)throw new TypeError("value is out of bounds");this.grow(4),this.size=d(this.buffer,this.size,o|0)},u.prototype.writeInt32LE=function(o){if(o!==(o|0))throw new TypeError("value is out of bounds");this.grow(4),this.size=f(this.buffer,this.size,o)},u.prototype.writeUInt32LE=function(o){if(o<0||o!==(o|0)&&(o&2147483647)+2147483648!==o)throw new TypeError("value is out of bounds");this.grow(4),this.size=f(this.buffer,this.size,o|0)},u.prototype.write=function(o){var c=o instanceof ArrayBuffer?o.byteLength:o.length;if(c!==0){this.grow(c);var y=this.buffer,h=this.size;o instanceof u?y.set(o.bytes,h):o instanceof ArrayBuffer?y.set(new Uint8Array(o),h):y.set(o,h),this.size+=c}},u.prototype.writeAsciiString=function(o){var c=o.length;if(c!==0){this.grow(c);for(var y=this.buffer.subarray(this.size),h=0;h<c;++h)y[h]=o.charCodeAt(h);this.size+=c}},u.prototype.writeString=function(o){var c=o.length;if(c!==0){this.grow(c*3);for(var y=this.buffer,h=this.size,_=0;_<c;++_){var w=o.charCodeAt(_);if(w<128)y[h++]=w;else if(w<2048)y[h++]=192|w>>6,y[h++]=128|w&63;else if(w<55296||w>57343)y[h++]=224|w>>12,y[h++]=128|w>>6&63,y[h++]=128|w&63;else{if(_+1<c){var g=o.charCodeAt(_+1);if(w<56320&&56320<=g&&g<=57343){var S=((w&1023)<<10|g&1023)+65536;y[h++]=240|S>>18,y[h++]=128|S>>12&63,y[h++]=128|S>>6&63,y[h++]=128|S&63,++_;continue}}throw new Error("Malformed string")}}this.size=h}},u.prototype.readByte=function(){return this.offset>=this.size?-1:this.buffer[this.offset++]},u.prototype.readInt32BE=function(){var o=this.buffer,c=this.offset;if(c+3>=this.size)throw new Error("EOF");var y=o[c++]<<24|o[c++]<<16|o[c++]<<8|o[c++];return this.offset=c,y},u.prototype.readUInt32BE=function(){var o=this.readInt32BE();return o>=0?o:(o&2147483647)+2147483648},u.prototype.readInt32LE=function(){var o=this.buffer,c=this.offset;if(c+3>=this.size)throw new Error("EOF");var y=o[c++]|o[c++]<<8|o[c++]<<16|o[c++]<<24;return this.offset=c,y},u.prototype.readUInt32LE=function(){var o=this.readInt32LE();return o>=0?o:(o&2147483647)+2147483648},u.prototype.read=function(o){return(o<0||this.offset+o>this.size)&&(o=this.size-this.offset),o===0?p:this.buffer.subarray(this.offset,this.offset+=o)},u.prototype.skip=function(o){return o===0?0:(o<0||this.offset+o>this.size?(o=this.size-this.offset,this.offset=this.size):this.offset+=o,o)},u.prototype.readBytes=function(o){var c=this.buffer.indexOf(o,this.offset),y;return c===-1?(y=this.buffer.subarray(this.offset,this.size),this.offset=this.size):(y=this.buffer.subarray(this.offset,c+1),this.offset=c+1),y},u.prototype.readUntil=function(o){var c=this.buffer.indexOf(o,this.offset),y="";return c===this.offset?this.offset++:c===-1?(y=i(this.buffer.subarray(this.offset,this.size)),this.offset=this.size):(y=i(this.buffer.subarray(this.offset,c)),this.offset=c+1),y},u.prototype.readAsciiString=function(o){return n(this.read(o))},u.prototype.readStringAsBytes=function(o){if(o===0)return p;var c=this.buffer.subarray(this.offset,this.size);if(o<0)return this.offset=this.size,c;for(var y=0,h=0,_=c.length;h<o&&y<_;h++){var w=c[y++];switch(w>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(y<_){y++;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(y+1<_){y+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(y+2<_){var g=((w&7)<<18|(c[y++]&63)<<12|(c[y++]&63)<<6|c[y++]&63)-65536;if(0<=g&&g<=1048575){h++;break}throw new Error("Character outside valid Unicode range: 0x"+g.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+w.toString(16))}}return this.offset+=y,c.subarray(0,y)},u.prototype.readString=function(o){var c=t(this.buffer.subarray(this.offset,this.size),o),y=c[0],h=c[1];return this.offset+=h,y},u.prototype.takeBytes=function(){var o=this.bytes;return this.clear(),o},u.prototype.toBytes=function(){return new Uint8Array(this.bytes)},u.prototype.toString=function(){return i(this.bytes)},u.prototype.clone=function(){return new u(this.toBytes())},u.prototype.trunc=function(){this.buffer=this.remains,this.size=this.buffer.length,this.offset=0,this.wmark=0,this.rmark=0},u}();return L.ByteStream=l,L}var pe={},ue={},Ze={},Dr;function Le(){if(Dr)return Ze;Dr=1,Object.defineProperty(Ze,"__esModule",{value:!0});var p=function(){function v(){}return v.prototype.write=function(d,f){d.stream.writeByte(110)},v.prototype.serialize=function(d,f){this.write(d,f)},v}();return Ze.BaseSerializer=p,Ze}var ve={},T={},Br;function W(){if(Br)return T;Br=1,Object.defineProperty(T,"__esModule",{value:!0});function p(i,n){0<=n&&n<=9?i.writeByte(48+n):(n===(n|0)?i.writeByte(105):i.writeByte(108),i.writeAsciiString(""+n),i.writeByte(59))}T.writeInteger=p;function v(i,n){isNaN(n)?i.writeByte(78):isFinite(n)?(i.writeByte(100),i.writeAsciiString(""+n),i.writeByte(59)):(i.writeByte(73),i.writeByte(n>0?43:45))}T.writeDouble=v;function d(i,n){0<=n&&n<=9?i.writeByte(48+Number(n)):(i.writeByte(108),i.writeAsciiString(""+n),i.writeByte(59))}T.writeBigInt=d;function f(i,n){var l=n.length;l>0&&i.writeAsciiString(""+l),i.writeByte(34),i.writeString(n),i.writeByte(34)}T.writeStringBody=f;function s(i,n){var l=n.getUTCFullYear(),u=n.getUTCMonth()+1,o=n.getUTCDate(),c=n.getUTCHours(),y=n.getUTCMinutes(),h=n.getUTCSeconds(),_=n.getUTCMilliseconds();r(i,l,u,o,c,y,h,_,!0)}T.writeUTCDate=s;function a(i,n){var l=n.getFullYear(),u=n.getMonth()+1,o=n.getDate(),c=n.getHours(),y=n.getMinutes(),h=n.getSeconds(),_=n.getMilliseconds();r(i,l,u,o,c,y,h,_,!1)}T.writeLocalDate=a;function r(i,n,l,u,o,c,y,h,_){o===0&&c===0&&y===0&&h===0?e(i,n,l,u):(n===1970&&l===1&&u===1||e(i,n,l,u),t(i,o,c,y,h)),i.writeByte(_?90:59)}T.writeDateTime=r;function e(i,n,l,u){i.writeByte(68),i.writeAsciiString(("0000"+n).slice(-4)),i.writeAsciiString(("00"+l).slice(-2)),i.writeAsciiString(("00"+u).slice(-2))}T.writeDate=e;function t(i,n,l,u,o){i.writeByte(84),i.writeAsciiString(("00"+n).slice(-2)),i.writeAsciiString(("00"+l).slice(-2)),i.writeAsciiString(("00"+u).slice(-2)),o>0&&(i.writeByte(46),i.writeAsciiString(("000"+o).slice(-3)))}return T.writeTime=t,T}var zr;function Qt(){if(zr)return ve;zr=1;var p=ve&&ve.__extends||function(){var s=function(a,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},s(a,r)};return function(a,r){s(a,r);function e(){this.constructor=a}a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(ve,"__esModule",{value:!0});var v=Le(),d=W(),f=function(s){p(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.prototype.write=function(r,e){e=e.valueOf(),Number.isSafeInteger(e)?d.writeInteger(r.stream,e):d.writeDouble(r.stream,e)},a}(v.BaseSerializer);return ve.NumberSerializer=f,ve}var _e={},Ar;function en(){if(Ar)return _e;Ar=1;var p=_e&&_e.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(_e,"__esModule",{value:!0});var v=Le(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){a.stream.writeByte(r.valueOf()?116:102)},s}(v.BaseSerializer);return _e.BooleanSerializer=d,_e}var we={},ge={},br;function q(){if(br)return ge;br=1;var p=ge&&ge.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(ge,"__esModule",{value:!0});var v=Le(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){a.setReference(r)},s.prototype.serialize=function(a,r){a.writeReference(r)||this.write(a,r)},s}(v.BaseSerializer);return ge.ReferenceSerializer=d,ge}var Or;function rn(){if(Or)return we;Or=1;var p=we&&we.__extends||function(){var s=function(a,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},s(a,r)};return function(a,r){s(a,r);function e(){this.constructor=a}a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(we,"__esModule",{value:!0});var v=q(),d=W(),f=function(s){p(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.prototype.write=function(r,e){s.prototype.write.call(this,r,e);var t=r.stream;t.writeByte(115),d.writeStringBody(t,e)},a.prototype.serialize=function(r,e){var t=r.stream;switch(e.length){case 0:t.writeByte(101);break;case 1:t.writeByte(117),t.writeString(e);break;default:s.prototype.serialize.call(this,r,e);break}},a}(v.ReferenceSerializer);return we.StringSerializer=f,we}var xe={},mr;function tn(){if(mr)return xe;mr=1;var p=xe&&xe.__extends||function(){var s=function(a,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},s(a,r)};return function(a,r){s(a,r);function e(){this.constructor=a}a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(xe,"__esModule",{value:!0});var v=q(),d=W(),f=function(s){p(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.prototype.write=function(r,e){s.prototype.write.call(this,r,e);var t=r.stream;r.utc?d.writeUTCDate(t,e):d.writeLocalDate(t,e)},a}(v.ReferenceSerializer);return xe.DateSerializer=f,xe}var Se={},Mr;function nn(){if(Mr)return Se;Mr=1;var p=Se&&Se.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Se,"__esModule",{value:!0});var v=q(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){f.prototype.write.call(this,a,r);var e=a.stream;e.writeByte(98);var t=r instanceof ArrayBuffer?r.byteLength:r.length;t>0&&e.writeAsciiString(""+t),e.writeByte(34),e.write(r),e.writeByte(34)},s}(v.ReferenceSerializer);return Se.BytesSerializer=d,Se}var De={},Cr;function an(){if(Cr)return De;Cr=1;var p=De&&De.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(De,"__esModule",{value:!0});var v=q(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){f.prototype.write.call(this,a,r);var e=a.stream;e.writeByte(103),e.writeByte(123),e.writeAsciiString(r.toString()),e.writeByte(125)},s}(v.ReferenceSerializer);return De.GuidSerializer=d,De}var Be={},Fr;function on(){if(Fr)return Be;Fr=1;var p=Be&&Be.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Be,"__esModule",{value:!0});var v=q(),d=function(f){p(s,f);function s(a){var r=f.call(this)||this;return r.writeNumber=a,r}return s.prototype.write=function(a,r){f.prototype.write.call(this,a,r);var e=a.stream;e.writeByte(97);var t=r.length;t>0&&e.writeAsciiString(""+t),e.writeByte(123);for(var i=0;i<t;i++)this.writeNumber(e,r[i]);e.writeByte(125)},s}(v.ReferenceSerializer);return Be.TypedArraySerializer=d,Be}var ze={},Er;function sn(){if(Er)return ze;Er=1;var p=ze&&ze.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(ze,"__esModule",{value:!0});var v=q(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){f.prototype.write.call(this,a,r);var e=a.stream;e.writeByte(97);var t=r.length;t>0&&e.writeAsciiString(""+t),e.writeByte(123);for(var i=0;i<t;i++)a.serialize(r[i]);e.writeByte(125)},s}(v.ReferenceSerializer);return ze.ArraySerializer=d,ze}var Ae={},Rr;function un(){if(Rr)return Ae;Rr=1;var p=Ae&&Ae.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Ae,"__esModule",{value:!0});var v=q(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){f.prototype.write.call(this,a,r);var e=a.stream;e.writeByte(97);var t=r.size;t>0&&e.writeAsciiString(""+t),e.writeByte(123),r.forEach(function(i){return a.serialize(i)}),e.writeByte(125)},s}(v.ReferenceSerializer);return Ae.SetSerializer=d,Ae}var be={},jr;function cn(){if(jr)return be;jr=1;var p=be&&be.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(be,"__esModule",{value:!0});var v=q(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){f.prototype.write.call(this,a,r);var e=a.stream;e.writeByte(109);var t=r.size;t>0&&e.writeAsciiString(""+t),e.writeByte(123),r.forEach(function(i,n){a.serialize(n),a.serialize(i)}),e.writeByte(125)},s}(v.ReferenceSerializer);return be.MapSerializer=d,be}var Oe={},Ir;function fn(){if(Ir)return Oe;Ir=1;var p=Oe&&Oe.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Oe,"__esModule",{value:!0});var v=q(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.write=function(a,r){f.prototype.write.call(this,a,r);var e=a.stream,t=[];if(r.hasOwnProperty===void 0)for(var i in r)typeof r[i]!="function"&&(t[t.length]=i);else for(var i in r)r.hasOwnProperty(i)&&typeof r[i]!="function"&&(t[t.length]=i);var n=t.length;e.writeByte(109),n>0&&e.writeAsciiString(""+n),e.writeByte(123);for(var l=0;l<n;l++)a.serialize(t[l]),a.serialize(r[t[l]]);e.writeByte(125)},s}(v.ReferenceSerializer);return Oe.DictionarySerializer=d,Oe}var me={},Pr;function ln(){if(Pr)return me;Pr=1;var p=me&&me.__extends||function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},a(r,e)};return function(r,e){a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(me,"__esModule",{value:!0});var v=he(),d=q(),f=W(),s=function(a){p(r,a);function r(e,t,i){i===void 0&&(i=[]);var n=a.call(this)||this;if(n.type=e.constructor,i.length===0)for(var l in e)e.hasOwnProperty(l)&&typeof e[l]!="function"&&(i[i.length]=l.toString());n.fields=i;var u=new v.ByteStream;u.writeByte(99),f.writeStringBody(u,t);var o=i.length;o>0&&u.writeAsciiString(""+o),u.writeByte(123);for(var c=0;c<o;c++)u.writeByte(115),f.writeStringBody(u,i[c]);return u.writeByte(125),n.metadata=u.takeBytes(),n}return r.prototype.write=function(e,t){var i=e.stream,n=this.fields,l=this.metadata,u=n.length,o=e.writeClass(this.type,function(){i.write(l),e.addReferenceCount(u)});a.prototype.write.call(this,e,t),i.writeByte(111),i.writeAsciiString(""+o),i.writeByte(123);for(var c=0;c<u;c++)e.serialize(t[n[c]]);i.writeByte(125)},r}(d.ReferenceSerializer);return me.ObjectSerializer=s,me}var Me={},Tr;function yn(){if(Tr)return Me;Tr=1;var p=Me&&Me.__extends||function(){var s=function(a,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},s(a,r)};return function(a,r){s(a,r);function e(){this.constructor=a}a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(Me,"__esModule",{value:!0});var v=q(),d=W(),f=function(s){p(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.prototype.write=function(r,e){r.addReferenceCount(1);var t=r.stream;t.writeByte(69),t.writeByte(115),d.writeStringBody(t,e.message)},a}(v.ReferenceSerializer);return Me.ErrorSerializer=f,Me}var ce={},qr;function lr(){if(qr)return ce;qr=1,Object.defineProperty(ce,"__esModule",{value:!0});var p=Object.create(null),v=new WeakMap;"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){var i=this.toString();return i.substr(0,i.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/ig,"")},writable:!1,enumerable:!1,configurable:!0});function d(i,n){n===void 0&&(n=i.name),v.set(i,n),p[n]=i}ce.register=d;function f(i){return i in p}ce.isRegistered=f;function s(i){if(!i)return"";var n=v.get(i);return n||(n=i.name,n===""||n==="Object"?"":(v.set(i,n),p[n]=i,n))}ce.getName=s;var a=null;try{a=typeof xr=="object"?xr:window}catch{}function r(i){if(a){for(var n=a,l=i.split("."),u=0;u<l.length;u++)if(n=n[l[u]],n===void 0)return;if(typeof n=="function")return n}}function e(i,n,l,u){if(l<n.length){i[n[l++]]=u;var o=e(i,n,l,".");return o===void 0&&l<n.length&&(o=e(i,n,l,"_")),o}return r(i.join(""))}function t(i){var n=p[i];if(n)return n;if(n=r(i),n)return d(n,i),n;for(var l=[],u=i.indexOf("_");u>=0;)l[l.length]=u,u=i.indexOf("_",u+1);if(l.length>0){var o=i.split("");if(n=e(o,l,0,"."),n===void 0&&(n=e(o,l,0,"_")),n)return d(n,i),n}return n=function(){},Object.defineProperty(n,"name",{value:i}),d(n,i),n}return ce.getType=t,ce}var kr;function ar(){if(kr)return ue;kr=1;var p=ue&&ue.__importStar||function(C){if(C&&C.__esModule)return C;var U={};if(C!=null)for(var de in C)Object.hasOwnProperty.call(C,de)&&(U[de]=C[de]);return U.default=C,U};Object.defineProperty(ue,"__esModule",{value:!0});var v=he(),d=Le(),f=Qt(),s=en(),a=rn(),r=tn(),e=nn(),t=an(),i=on(),n=sn(),l=un(),u=cn(),o=fn(),c=ln(),y=yn(),h=p(lr()),_=W(),w=ir(),g=new Map,S=new d.BaseSerializer,D=new f.NumberSerializer,M=new s.BooleanSerializer,N=new a.StringSerializer,se=new r.DateSerializer,ur=new e.BytesSerializer,cr=new t.GuidSerializer,z=new i.TypedArraySerializer(_.writeInteger),x=new i.TypedArraySerializer(_.writeDouble),B=new n.ArraySerializer,A=new l.SetSerializer,b=new u.MapSerializer,j=new o.DictionarySerializer,k=new y.ErrorSerializer;function fr(C,U){g.set(C,U)}ue.register=fr;function Kt(C){var U=C.constructor;switch(U){case Function:return S;case Number:return D;case Boolean:return M;case String:return N;case Date:return se;case w.Guid:return cr;case Array:return B;case Set:return A;case Map:return b;case ArrayBuffer:case Uint8Array:case Uint8ClampedArray:case v.ByteStream:return ur;case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:return z;case Float32Array:case Float64Array:return x;case Error:return k}var de=g.get(U);if(de!==void 0)return de;if(Array.isArray(C)||Object.prototype.toString.call(C)==="[object Arguments]")return B;if(C instanceof Error)return fr(U,k),k;var Xe=h.getName(U);if(Xe==="")return j;if(Xe==="GeneratorFunction"||Xe==="AsyncFunction")return S;var gr=new c.ObjectSerializer(C,Xe);return fr(U,gr),gr}return ue.getInstance=Kt,ue}var He={},Ur;function hn(){if(Ur)return He;Ur=1;var p=He&&He.__extends||function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},a(r,e)};return function(r,e){a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(He,"__esModule",{value:!0});var v=W(),d=Le(),f=ar();if(typeof BigInt<"u"){var s=function(a){p(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.write=function(e,t){v.writeBigInt(e.stream,t)},r}(d.BaseSerializer);f.register(BigInt,new s)}return He}var Ne={},Hr;function dn(){if(Hr)return Ne;Hr=1;var p=Ne&&Ne.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Ne,"__esModule",{value:!0});var v=q(),d=W(),f=ar();if(typeof BigInt64Array<"u"&&typeof BigUint64Array<"u"){var s=function(r){p(e,r);function e(){return r.call(this)||this}return e.prototype.write=function(t,i){r.prototype.write.call(this,t,i);var n=t.stream;n.writeByte(97);var l=i.length;l>0&&n.writeAsciiString(""+l),n.writeByte(123);for(var u=0;u<l;u++)d.writeBigInt(n,i[u]);n.writeByte(125)},e}(v.ReferenceSerializer),a=new s;f.register(BigInt64Array,a),f.register(BigUint64Array,a)}return Ne}var Nr;function Pt(){if(Nr)return pe;Nr=1;var p=pe&&pe.__importStar||function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var r in s)Object.hasOwnProperty.call(s,r)&&(a[r]=s[r]);return a.default=s,a};Object.defineProperty(pe,"__esModule",{value:!0});var v=p(ar());hn(),dn();var d=function(){function s(){this.ref=new Map,this.last=0}return s.prototype.addCount=function(a){this.last+=a},s.prototype.set=function(a){this.ref.set(a,this.last++)},s.prototype.write=function(a,r){var e=this.ref.get(r);return e!==void 0?(a.writeByte(114),a.writeAsciiString(""+e),a.writeByte(59),!0):!1},s.prototype.reset=function(){this.ref.clear(),this.last=0},s}(),f=function(){function s(a,r,e){r===void 0&&(r=!1),e===void 0&&(e=!1),this.stream=a,this.utc=e,this.ref=new Map,this.last=0,this.simple=r}return Object.defineProperty(s.prototype,"simple",{get:function(){return this.refer===void 0},set:function(a){this.refer=a?void 0:new d},enumerable:!0,configurable:!0}),s.prototype.serialize=function(a){a==null?this.stream.writeByte(110):v.getInstance(a).serialize(this,a)},s.prototype.write=function(a){a==null?this.stream.writeByte(110):v.getInstance(a).write(this,a)},s.prototype.writeReference=function(a){return this.refer?this.refer.write(this.stream,a):!1},s.prototype.setReference=function(a){this.refer&&this.refer.set(a)},s.prototype.addReferenceCount=function(a){this.refer&&this.refer.addCount(a)},s.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.clear(),this.last=0},s.prototype.writeClass=function(a,r){var e=this.ref.get(a);return e===void 0&&(r(),e=this.last++,this.ref.set(a,e)),e},s}();return pe.Writer=f,pe}var Ce={},I={},$r;function H(){if($r)return I;$r=1,Object.defineProperty(I,"__esModule",{value:!0});var p=ir();function v(y,h){h===void 0&&(h=59);var _=y.readUntil(h);return _.length===0?0:parseInt(_,10)}I.readInt=v;function d(y){return parseFloat(y.readUntil(59))}I.readDouble=d;function f(y){return y.readByte()===45?-1/0:1/0}I.readInfinity=f;function s(y){return v(y,123)}I.readCount=s;function a(y){return v(y,34)}I.readLength=a;function r(y){var h=a(y),_=y.readString(h);return y.readByte(),_}I.readString=r;function e(y){var h=a(y),_=y.read(h);return y.readByte(),_}I.readBytes=e;function t(y){var h=a(y),_=y.readAsciiString(h);return y.readByte(),_}I.readAsciiString=t;function i(y){y.readByte();var h=p.Guid.parse(y.readAsciiString(36));return y.readByte(),h}I.readGuid=i;function n(y){var h=y.readByte()-48;return h=h*10+y.readByte()-48,h=h*10+y.readByte()-48,h*10+y.readByte()-48}function l(y){var h=y.readByte()-48;return h*10+y.readByte()-48}function u(y){var h=y.readByte()-48;h=h*10+y.readByte()-48,h=h*10+y.readByte()-48;var _=y.readByte();return _>=48&&_<=57&&(y.skip(2),_=y.readByte(),_>=48&&_<=57&&(y.skip(2),_=y.readByte())),[h,_]}function o(y){var h,_=l(y),w=l(y),g=l(y),S=0,D=y.readByte();return D===46&&(h=u(y),S=h[0],D=h[1]),D===90?new Date(Date.UTC(1970,0,1,_,w,g,S)):new Date(1970,0,1,_,w,g,S)}I.readTime=o;function c(y){var h,_=n(y),w=l(y)-1,g=l(y),S=y.readByte();if(S===84){var D=l(y),M=l(y),N=l(y),se=0;return S=y.readByte(),S===46&&(h=u(y),se=h[0],S=h[1]),S===90?new Date(Date.UTC(_,w,g,D,M,N,se)):new Date(_,w,g,D,M,N,se)}return S===90?new Date(Date.UTC(_,w,g)):new Date(_,w,g)}return I.readDateTime=c,I}var $e={},X={},Je={},Gr;function R(){if(Gr)return Je;Gr=1,Object.defineProperty(Je,"__esModule",{value:!0});function p(d){switch(d){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 105:return"int32 number";case 108:return"long number";case 100:return"double number";case 110:return"null | undefined";case 101:return"empty string";case 116:return"true";case 102:return"false";case 78:return"NaN";case 73:return"Infinity";case 68:case 84:return"Date";case 98:return"Uint8Array";case 117:case 115:return"string";case 103:return"guid string";case 97:return"Array";case 109:return"object | Map";case 99:return"class";case 111:return"Object";case 114:return"Reference";case 69:return"Error";default:throw new Error("Unexpected Tag: 0x"+(d&255).toString(16))}}var v=function(){function d(f){f===void 0&&(f="undefined"),this.type=f}return d.prototype.read=function(f,s){switch(s){case 110:return;case 114:return f.readReference();case 99:return f.readClass(),this.deserialize(f);case 69:throw new Error(f.deserialize(String))}throw new Error("Cannot convert "+p(s)+" to "+this.type+".")},d.prototype.deserialize=function(f){return this.read(f,f.stream.readByte())},d}();return Je.BaseDeserializer=v,Je}var F={},Wr;function P(){if(Wr)return F;Wr=1;var p=F&&F.__importStar||function(o){if(o&&o.__esModule)return o;var c={};if(o!=null)for(var y in o)Object.hasOwnProperty.call(o,y)&&(c[y]=o[y]);return c.default=o,c};Object.defineProperty(F,"__esModule",{value:!0});var v=p(H());function d(o){var c=v.readBytes(o.stream);return o.addReference(c),c}F.readBytes=d;function f(o){var c=v.readAsciiString(o.stream);return o.addReference(c),c}F.readAsciiString=f;function s(o){var c=v.readString(o.stream);return o.addReference(c),c}F.readString=s;function a(o){var c=v.readGuid(o.stream);return o.addReference(c),c}F.readGuid=a;function r(o){var c=v.readDateTime(o.stream);return o.addReference(c),c}F.readDateTime=r;function e(o){var c=v.readTime(o.stream);return o.addReference(c),c}F.readTime=e;function t(o){var c=o.stream,y=v.readCount(c),h=new Array(y);o.addReference(h);for(var _=0;_<y;++_)h[_]=o.deserialize();return c.readByte(),h}F.readArray=t;function i(o){var c=o.stream,y=v.readCount(c),h=new Set;o.addReference(h);for(var _=0;_<y;++_)h.add(o.deserialize());return c.readByte(),h}F.readSet=i;function n(o){var c=o.stream,y=new Map;o.addReference(y);for(var h=v.readCount(c);h>0;--h){var _=o.deserialize(),w=o.deserialize();y.set(_,w)}return c.readByte(),y}F.readMap=n;function l(o){var c=o.stream,y=v.readInt(c,123),h=o.getTypeInfo(y),_=h.type,w=_?new _:{};o.addReference(w);for(var g=h.names,S=g.length,D=0;D<S;++D)w[g[D]]=o.deserialize();return c.readByte(),w}F.readObject=l;function u(o){var c=o.stream,y=v.readInt(c,123),h=o.getTypeInfo(y),_=new Map;o.addReference(_);for(var w=h.names,g=w.length,S=0;S<g;++S)_.set(w[S],o.deserialize());return c.readByte(),_}return F.readObjectAsMap=u,F}var Vr;function pn(){if(Vr)return X;Vr=1;var p=X&&X.__extends||function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},a(r,e)};return function(r,e){a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),v=X&&X.__importStar||function(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var e in a)Object.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r.default=a,r};Object.defineProperty(X,"__esModule",{value:!0});var d=R(),f=v(P()),s=function(a){p(r,a);function r(){return a.call(this,"Array")||this}return r.prototype.read=function(e,t){switch(t){case 97:return f.readArray(e);case 101:return[];case 115:return f.readString(e).split("");case 98:return Array.from(f.readBytes(e));case 114:{var i=e.readReference();return i instanceof Uint8Array?Array.from(i):i instanceof String?i.split(""):i}default:return a.prototype.read.call(this,e,t)}},r.instance=new r,r}(d.BaseDeserializer);return X.ArrayDeserializer=s,X}var E={},Y={},Lr;function vn(){if(Lr)return Y;Lr=1;var p=Y&&Y.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=Y&&Y.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Y,"__esModule",{value:!0});var d=R(),f=v(H()),s=v(P()),a=function(r){p(e,r);function e(){return r.call(this,"int")||this}return e.prototype.read=function(t,i){if(i>=48&&i<=57)return i-48;var n=t.stream;switch(i){case 105:case 108:return f.readInt(n);case 100:return Math.floor(f.readDouble(n));case 116:return 1;case 102:case 101:return 0;case 115:return parseInt(s.readString(t));case 117:return n.readString(1).charCodeAt(1);case 68:return s.readDateTime(t).getTime();case 84:return s.readTime(t).getTime();case 114:{var l=t.readReference();return l instanceof Date?l.getTime():parseInt(l.toString())}default:return r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);return Y.IntDeserializer=a,Y}var Z={},Xr;function Tt(){if(Xr)return Z;Xr=1;var p=Z&&Z.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=Z&&Z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Z,"__esModule",{value:!0});var d=R(),f=v(H()),s=v(P()),a=function(r){p(e,r);function e(){return r.call(this,"number")||this}return e.prototype.read=function(t,i){if(i>=48&&i<=57)return i-48;var n=t.stream;switch(i){case 105:case 108:return f.readInt(n);case 100:return f.readDouble(n);case 78:return NaN;case 73:return f.readInfinity(n);case 116:return 1;case 102:case 101:return 0;case 115:return Number(s.readString(t));case 117:return n.readString(1).charCodeAt(1);case 68:return s.readDateTime(t).getTime();case 84:return s.readTime(t).getTime();case 114:{var l=t.readReference();return l instanceof Date?l.getTime():Number(l.toString())}default:return r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);return Z.NumberDeserializer=a,Z}var Yr;function qt(){if(Yr)return E;Yr=1;var p=E&&E.__extends||function(){var z=function(x,B){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,b){A.__proto__=b}||function(A,b){for(var j in b)b.hasOwnProperty(j)&&(A[j]=b[j])},z(x,B)};return function(x,B){z(x,B);function A(){this.constructor=x}x.prototype=B===null?Object.create(B):(A.prototype=B.prototype,new A)}}();Object.defineProperty(E,"__esModule",{value:!0});var v=he(),d=vn(),f=Tt(),s=R(),a=H(),r=P();function e(z,x){var B=z.stream,A=a.readCount(B),b=new x(A);z.addReference(b);for(var j=d.IntDeserializer.instance,k=0;k<A;++k)b[k]=j.deserialize(z);return B.readByte(),b}E.readIntArray=e;function t(z,x){var B=z.stream,A=a.readCount(B),b=new x(A);z.addReference(b);for(var j=f.NumberDeserializer.instance,k=0;k<A;++k)b[k]=j.deserialize(z);return B.readByte(),b}E.readNumberArray=t;var i=new Int8Array(0),n=function(z){p(x,z);function x(){return z.call(this,"Int8Array")||this}return x.prototype.read=function(B,A){var b;switch(A){case 101:return i;case 97:return e(B,Int8Array);case 98:b=r.readBytes(B);break;case 117:b=new v.ByteStream(B.stream.readString(1)).bytes;break;case 115:b=new v.ByteStream(r.readString(B)).bytes;break;default:return z.prototype.read.call(this,B,A)}return new Int8Array(b.buffer,b.byteOffset,b.length)},x.instance=new x,x}(s.BaseDeserializer);E.Int8ArrayDeserializer=n;var l=new Int16Array(0),u=function(z){p(x,z);function x(){return z.call(this,"Int16Array")||this}return x.prototype.read=function(B,A){switch(A){case 101:return l;case 97:return e(B,Int16Array);default:return z.prototype.read.call(this,B,A)}},x.instance=new x,x}(s.BaseDeserializer);E.Int16ArrayDeserializer=u;var o=new Int32Array(0),c=function(z){p(x,z);function x(){return z.call(this,"Int32Array")||this}return x.prototype.read=function(B,A){switch(A){case 101:return o;case 97:return e(B,Int32Array);default:return z.prototype.read.call(this,B,A)}},x.instance=new x,x}(s.BaseDeserializer);E.Int32ArrayDeserializer=c;var y=new Uint8Array(0),h=function(z){p(x,z);function x(){return z.call(this,"Uint8Array")||this}return x.prototype.read=function(B,A){switch(A){case 98:return r.readBytes(B);case 101:return y;case 97:return e(B,Uint8Array);case 117:return new v.ByteStream(B.stream.readString(1)).bytes;case 115:return new v.ByteStream(r.readString(B)).bytes;case 114:{var b=B.readReference();return b instanceof Uint8Array?b:new v.ByteStream(b.toString()).bytes}default:return z.prototype.read.call(this,B,A)}},x.instance=new x,x}(s.BaseDeserializer);E.Uint8ArrayDeserializer=h;var _=new Uint8ClampedArray(0),w=function(z){p(x,z);function x(){return z.call(this,"Uint8ClampedArray")||this}return x.prototype.read=function(B,A){var b;switch(A){case 101:return _;case 97:return e(B,Uint8ClampedArray);case 98:b=r.readBytes(B);break;case 117:b=new v.ByteStream(B.stream.readString(1)).bytes;break;case 115:b=new v.ByteStream(r.readString(B)).bytes;break;case 114:{var j=B.readReference();if(j instanceof Uint8ClampedArray)return j;j instanceof Uint8Array?b=j:b=new v.ByteStream(j.toString()).bytes;break}default:return z.prototype.read.call(this,B,A)}return new Uint8ClampedArray(b.buffer,b.byteOffset,b.length)},x.instance=new x,x}(s.BaseDeserializer);E.Uint8ClampedArrayDeserializer=w;var g=new Uint16Array(0),S=function(z){p(x,z);function x(){return z.call(this,"Uint16Array")||this}return x.prototype.read=function(B,A){switch(A){case 101:return g;case 97:return e(B,Uint16Array);default:return z.prototype.read.call(this,B,A)}},x.instance=new x,x}(s.BaseDeserializer);E.Uint16ArrayDeserializer=S;var D=new Uint32Array(0),M=function(z){p(x,z);function x(){return z.call(this,"Uint32Array")||this}return x.prototype.read=function(B,A){switch(A){case 101:return D;case 97:return e(B,Uint32Array);default:return z.prototype.read.call(this,B,A)}},x.instance=new x,x}(s.BaseDeserializer);E.Uint32ArrayDeserializer=M;var N=new Float32Array(0),se=function(z){p(x,z);function x(){return z.call(this,"Float32Array")||this}return x.prototype.read=function(B,A){switch(A){case 101:return N;case 97:return t(B,Float32Array);default:return z.prototype.read.call(this,B,A)}},x.instance=new x,x}(s.BaseDeserializer);E.Float32ArrayDeserializer=se;var ur=new Float64Array(0),cr=function(z){p(x,z);function x(){return z.call(this,"Float64Array")||this}return x.prototype.read=function(B,A){switch(A){case 101:return ur;case 97:return t(B,Float64Array);default:return z.prototype.read.call(this,B,A)}},x.instance=new x,x}(s.BaseDeserializer);return E.Float64ArrayDeserializer=cr,E}var Fe={},Zr;function _n(){if(Zr)return Fe;Zr=1;var p=Fe&&Fe.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Fe,"__esModule",{value:!0});var v=R(),d=function(f){p(s,f);function s(){return f.call(this,"function")||this}return s.instance=new s,s}(v.BaseDeserializer);return Fe.FunctionDeserializer=d,Fe}var J={},Jr;function wn(){if(Jr)return J;Jr=1;var p=J&&J.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=J&&J.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(J,"__esModule",{value:!0});var d=R(),f=v(H()),s=v(P()),a=function(r){p(e,r);function e(){return r.call(this,"boolean")||this}return e.prototype.read=function(t,i){var n=t.stream;switch(i){case 116:return!0;case 102:case 101:case 78:case 48:return!1;case 105:case 108:return f.readInt(n)!==0;case 100:return f.readDouble(n)!==0;case 115:return!!s.readString(t);case 117:return"0\0".indexOf(n.readString(1))===-1;case 73:return n.readByte(),!0;case 114:return!!t.readReference().toString();default:return i>=49&&i<=57?!0:r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);return J.BooleanDeserializer=a,J}var K={},Kr;function kt(){if(Kr)return K;Kr=1;var p=K&&K.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=K&&K.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(K,"__esModule",{value:!0});var d=R(),f=v(H()),s=v(P()),a=function(r){p(e,r);function e(){return r.call(this,"string")||this}return e.prototype.read=function(t,i){if(i>=48&&i<=57)return String.fromCharCode(i);var n=t.stream;switch(i){case 105:case 108:case 100:return n.readUntil(59);case 115:return s.readString(t);case 98:return s.readAsciiString(t);case 116:return"true";case 102:return"false";case 101:return"";case 68:return s.readDateTime(t).toString();case 84:return s.readTime(t).toTimeString();case 103:return s.readGuid(t).toString();case 78:return"NaN";case 73:return f.readInfinity(n).toString();case 117:return n.readString(1);case 97:return s.readArray(t).join("");case 114:return t.readReference().toString();default:return r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);return K.StringDeserializer=a,K}var Q={},Qr;function gn(){if(Qr)return Q;Qr=1;var p=Q&&Q.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=Q&&Q.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Q,"__esModule",{value:!0});var d=R(),f=v(H()),s=v(P()),a=function(r){p(e,r);function e(){return r.call(this,"Date")||this}return e.prototype.read=function(t,i){var n=t.stream;switch(i){case 68:return s.readDateTime(t);case 84:return s.readTime(t);case 105:return new Date(f.readInt(n));case 108:return new Date(f.readInt(n));case 100:return new Date(Math.floor(f.readDouble(n)));case 115:return new Date(s.readString(t));case 116:return new Date(1);case 102:case 101:return new Date(0);case 114:{var l=t.readReference();return l instanceof Date?l:new Date(l.toString())}default:return i>=48&&i<=57?new Date(i-48):r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);return Q.DateDeserializer=a,Q}var Ee={},et;function xn(){if(et)return Ee;et=1;var p=Ee&&Ee.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Ee,"__esModule",{value:!0});var v=he(),d=R(),f=qt(),s=P(),a=function(r){p(e,r);function e(){return r.call(this,"ByteStream")||this}return e.prototype.read=function(t,i){switch(i){case 98:return new v.ByteStream(s.readBytes(t));case 101:return new v.ByteStream(0);case 97:return new v.ByteStream(f.readIntArray(t,Uint8Array));case 117:return new v.ByteStream(t.stream.readString(1));case 115:return new v.ByteStream(s.readString(t));case 114:{var n=t.readReference();return n instanceof Uint8Array?new v.ByteStream(n):new v.ByteStream(n.toString())}default:return r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);return Ee.ByteStreamDeserializer=a,Ee}var Re={},rt;function Sn(){if(rt)return Re;rt=1;var p=Re&&Re.__extends||function(){var s=function(a,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},s(a,r)};return function(a,r){s(a,r);function e(){this.constructor=a}a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(Re,"__esModule",{value:!0});var v=R(),d=P(),f=function(s){p(a,s);function a(){return s.call(this,"Set")||this}return a.prototype.read=function(r,e){switch(e){case 101:return new Set;case 97:return d.readSet(r);default:return s.prototype.read.call(this,r,e)}},a.instance=new a,a}(v.BaseDeserializer);return Re.SetDeserializer=f,Re}var ee={},tt;function Dn(){if(tt)return ee;tt=1;var p=ee&&ee.__extends||function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},a(r,e)};return function(r,e){a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),v=ee&&ee.__importStar||function(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var e in a)Object.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r.default=a,r};Object.defineProperty(ee,"__esModule",{value:!0});var d=R(),f=v(P()),s=function(a){p(r,a);function r(){return a.call(this,"Map")||this}return r.prototype.read=function(e,t){switch(t){case 101:return new Map;case 109:return f.readMap(e);case 111:return f.readObjectAsMap(e);default:return a.prototype.read.call(this,e,t)}},r.instance=new r,r}(d.BaseDeserializer);return ee.MapDeserializer=s,ee}var re={},nt;function Bn(){if(nt)return re;nt=1;var p=re&&re.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=re&&re.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(re,"__esModule",{value:!0});var d=R(),f=v(P()),s=ir(),a=function(r){p(e,r);function e(){return r.call(this,"Guid")||this}return e.prototype.read=function(t,i){switch(i){case 103:return f.readGuid(t);case 115:return s.Guid.parse(f.readString(t));case 114:{var n=t.readReference();return n instanceof s.Guid?n:s.Guid.parse(n.toString())}default:return r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);return re.GuidDeserializer=a,re}var je={},it;function zn(){if(it)return je;it=1;var p=je&&je.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(je,"__esModule",{value:!0});var v=R(),d=function(f){p(s,f);function s(){return f.call(this,"Error")||this}return s.prototype.read=function(a,r){switch(r){case 69:return new Error(a.deserialize(String));default:return f.prototype.read.call(this,a,r)}},s.instance=new s,s}(v.BaseDeserializer);return je.ErrorDeserializer=d,je}var Ie={},te={},at;function Ut(){if(at)return te;at=1;var p=te&&te.__extends||function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var o in u)u.hasOwnProperty(o)&&(l[o]=u[o])},t(i,n)};return function(i,n){t(i,n);function l(){this.constructor=i}i.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)}}(),v=te&&te.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i.default=t,i};Object.defineProperty(te,"__esModule",{value:!0});var d=R(),f=kt(),s=v(H()),a=v(P()),r=function(t){p(i,t);function i(){return t.call(this,"any")||this}return i.prototype.read=function(n,l){if(l>=48&&l<=57)return l-48;var u=n.stream;switch(l){case 105:return s.readInt(u);case 115:return a.readString(n);case 98:return a.readBytes(n);case 116:return!0;case 102:return!1;case 101:return"";case 111:return a.readObject(n);case 68:return a.readDateTime(n);case 84:return a.readTime(n);case 103:return a.readGuid(n);case 108:switch(n.longType){case"number":return s.readInt(u);case"bigint":if(typeof BigInt<"u")return BigInt(u.readUntil(59));case"string":return u.readUntil(59)}break;case 100:return s.readDouble(u);case 78:return NaN;case 73:return s.readInfinity(u);case 117:return u.readString(1);case 97:return a.readArray(n);case 109:return n.dictType==="map"?a.readMap(n):e(n);case 69:return new Error(n.deserialize(String));default:return t.prototype.read.call(this,n,l)}},i.instance=new i,i}(d.BaseDeserializer);te.DefaultDeserializer=r;function e(t){var i=t.stream,n=Object.create(null);t.addReference(n);for(var l=s.readCount(i),u=f.StringDeserializer.instance,o=r.instance;l>0;--l){var c=u.deserialize(t),y=o.deserialize(t);n[c]=y}return i.readByte(),n}return te}var ot;function An(){if(ot)return Ie;ot=1;var p=Ie&&Ie.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Ie,"__esModule",{value:!0});var v=Ut(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.read=function(a,r){return r===110?null:f.prototype.read.call(this,a,r)},s.instance=new s,s}(v.DefaultDeserializer);return Ie.NullDeserializer=d,Ie}var st;function or(){if(st)return $e;st=1,Object.defineProperty($e,"__esModule",{value:!0});var p=he(),v=pn(),d=qt(),f=_n(),s=Tt(),a=wn(),r=kt(),e=gn(),t=xn(),i=Sn(),n=Dn(),l=Bn(),u=zn(),o=An(),c=Ut(),y=ir(),h=new Map;function _(g,S){h.set(g,S)}$e.register=_;function w(g){if(g){switch(g){case Function:return f.FunctionDeserializer.instance;case Number:return s.NumberDeserializer.instance;case Boolean:return a.BooleanDeserializer.instance;case String:return r.StringDeserializer.instance;case Date:return e.DateDeserializer.instance;case Array:return v.ArrayDeserializer.instance;case p.ByteStream:return t.ByteStreamDeserializer.instance;case Uint8Array:return d.Uint8ArrayDeserializer.instance;case Uint8ClampedArray:return d.Uint8ClampedArrayDeserializer.instance;case Uint16Array:return d.Uint16ArrayDeserializer.instance;case Uint32Array:return d.Uint32ArrayDeserializer.instance;case Int8Array:return d.Int8ArrayDeserializer.instance;case Int16Array:return d.Int16ArrayDeserializer.instance;case Int32Array:return d.Int32ArrayDeserializer.instance;case Float32Array:return d.Float32ArrayDeserializer.instance;case Float64Array:return d.Float64ArrayDeserializer.instance;case Set:return i.SetDeserializer.instance;case Map:return n.MapDeserializer.instance;case y.Guid:return l.GuidDeserializer.instance;case Error:return u.ErrorDeserializer.instance}var S=h.get(g);if(S!==void 0)return S}return g===null?o.NullDeserializer.instance:c.DefaultDeserializer.instance}return $e.getInstance=w,$e}var fe={},ut;function bn(){if(ut)return fe;ut=1;var p=fe&&fe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)n.hasOwnProperty(l)&&(i[l]=n[l])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v=fe&&fe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(fe,"__esModule",{value:!0});var d=R(),f=or(),s=v(P());if(typeof BigInt<"u"){var a=function(r){p(e,r);function e(){return r.call(this,"bigint")||this}return e.prototype.read=function(t,i){if(i>=48&&i<=57)return BigInt(i-48);var n=t.stream;switch(i){case 105:case 108:case 100:return BigInt(n.readUntil(59));case 116:return BigInt(1);case 102:case 101:return BigInt(0);case 115:return BigInt(s.readString(t));case 117:return BigInt(n.readString(1).charCodeAt(1));case 68:return BigInt(s.readDateTime(t).getTime());case 84:return BigInt(s.readTime(t).getTime());case 114:{var l=t.readReference();return l instanceof Date?BigInt(l.getTime()):BigInt(l.toString())}default:return r.prototype.read.call(this,t,i)}},e.instance=new e,e}(d.BaseDeserializer);f.register(BigInt,a.instance)}return fe}var le={},ct;function On(){if(ct)return le;ct=1;var p=le&&le.__extends||function(){var n=function(l,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var y in c)c.hasOwnProperty(y)&&(o[y]=c[y])},n(l,u)};return function(l,u){n(l,u);function o(){this.constructor=l}l.prototype=u===null?Object.create(u):(o.prototype=u.prototype,new o)}}(),v=le&&le.__importStar||function(n){if(n&&n.__esModule)return n;var l={};if(n!=null)for(var u in n)Object.hasOwnProperty.call(n,u)&&(l[u]=n[u]);return l.default=n,l};Object.defineProperty(le,"__esModule",{value:!0});var d=R(),f=or(),s=v(H());function a(n,l){var u=n.stream,o=s.readCount(u),c=new l(o);n.addReference(c);for(var y=f.getInstance(BigInt),h=0;h<o;++h)c[h]=y.deserialize(n);return u.readByte(),c}if(typeof BigInt64Array<"u"){var r=new BigInt64Array(0),e=function(n){p(l,n);function l(){return n.call(this,"BigInt64Array")||this}return l.prototype.read=function(u,o){switch(o){case 101:return r;case 97:return a(u,BigInt64Array);default:return n.prototype.read.call(this,u,o)}},l.instance=new l,l}(d.BaseDeserializer);f.register(BigInt64Array,e.instance)}if(typeof BigUint64Array<"u"){var t=new BigUint64Array(0),i=function(n){p(l,n);function l(){return n.call(this,"BigUint64Array")||this}return l.prototype.read=function(u,o){switch(o){case 101:return t;case 97:return a(u,BigUint64Array);default:return n.prototype.read.call(this,u,o)}},l.instance=new l,l}(d.BaseDeserializer);f.register(BigUint64Array,i.instance)}return le}var ft;function Ht(){if(ft)return Ce;ft=1;var p=Ce&&Ce.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Ce,"__esModule",{value:!0});var v=H(),d=p(lr()),f=p(or());bn(),On();var s=function(){function r(){this.ref=[]}return Object.defineProperty(r.prototype,"lastIndex",{get:function(){return this.ref.length-1},enumerable:!0,configurable:!0}),r.prototype.add=function(e){this.ref.push(e)},r.prototype.set=function(e,t){this.ref[e]=t},r.prototype.read=function(e){return this.ref[e]},r.prototype.reset=function(){this.ref.length=0},r}(),a=function(){function r(e,t){t===void 0&&(t=!1),this.stream=e,this.ref=[],this.longType="number",this.dictType="object",this.simple=t}return Object.defineProperty(r.prototype,"simple",{get:function(){return this.refer===void 0},set:function(e){this.refer=e?void 0:new s},enumerable:!0,configurable:!0}),r.prototype.deserialize=function(e){return f.getInstance(e).deserialize(this)},r.prototype.read=function(e,t){return f.getInstance(t).read(this,e)},r.prototype.readClass=function(){for(var e=this.stream,t=v.readString(e),i=v.readCount(e),n=new Array(i),l=f.getInstance(String),u=0;u<i;++u)n[u]=l.deserialize(this);e.readByte(),this.ref.push({name:t,names:n,type:d.getType(t)})},r.prototype.getTypeInfo=function(e){return this.ref[e]},r.prototype.readReference=function(){return this.refer?this.refer.read(v.readInt(this.stream)):void 0},r.prototype.addReference=function(e){this.refer&&this.refer.add(e)},r.prototype.setReference=function(e,t){this.refer&&this.refer.set(e,t)},Object.defineProperty(r.prototype,"lastReferenceIndex",{get:function(){return this.refer?this.refer.lastIndex:-1},enumerable:!0,configurable:!0}),r.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.length=0},r}();return Ce.Reader=a,Ce}var Ge={},lt;function mn(){if(lt)return Ge;lt=1,Object.defineProperty(Ge,"__esModule",{value:!0});var p=he(),v=Pt(),d=Ht();function f(a,r,e){var t=new p.ByteStream,i=new v.Writer(t,r,e);return i.serialize(a),t.bytes}Ge.serialize=f;function s(a,r,e){a instanceof p.ByteStream||(a=new p.ByteStream(a));var t=new d.Reader(a,e);return t.deserialize(r)}return Ge.deserialize=s,Ge}var yt;function sr(){if(yt)return m;yt=1;var p=m&&m.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var o in l)Object.hasOwnProperty.call(l,o)&&(u[o]=l[o]);return u.default=l,u};Object.defineProperty(m,"__esModule",{value:!0});var v=he();m.ByteStream=v.ByteStream,m.writeInt32BE=v.writeInt32BE,m.writeInt32LE=v.writeInt32LE,m.fromUint8Array=v.fromUint8Array,m.toBinaryString=v.toBinaryString;var d=Pt();m.Writer=d.Writer;var f=Ht();m.Reader=f.Reader;var s=p(lr());m.TypeManager=s;var a=p(ar());m.Serializer=a;var r=p(or());m.Deserializer=r;var e=p(mn());m.Formatter=e;var t=p(P());m.ReferenceReader=t;var i=p(H());m.ValueReader=i;var n=p(W());return m.ValueWriter=n,m}var ht;function Nt(){if(ht)return Ye;ht=1,Object.defineProperty(Ye,"__esModule",{value:!0});var p=sr(),v=function(){function d(){this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object"}return d.prototype.encode=function(f,s,a){var r=new p.ByteStream,e=new p.Writer(r,this.simple,this.utc),t=a.requestHeaders;this.simple&&(t.simple=!0);var i=0;for(var n in t)i++;return i>0&&(r.writeByte(72),e.serialize(t),e.reset()),r.writeByte(67),e.serialize(f),s.length>0&&(e.reset(),e.serialize(s)),r.writeByte(122),r.takeBytes()},d.prototype.decode=function(f,s){var a=new p.ByteStream(f),r=new p.Reader(a,!1);r.longType=this.longType,r.dictType=this.dictType;var e=a.readByte();if(e===72){var t=r.deserialize();for(var i in t)s.responseHeaders[i]=t[i];r.reset(),e=a.readByte()}switch(e){case 82:return s.responseHeaders.simple&&(r.simple=!0),r.deserialize(s.returnType);case 69:throw new Error(r.deserialize(String));case 122:return s.type===null?null:void 0;default:throw new Error(`Invalid response:\r
`+a.toString())}},d.instance=new d,d}();return Ye.DefaultClientCodec=v,Ye}var Pe={},Ke={},dt;function yr(){if(dt)return Ke;dt=1,Object.defineProperty(Ke,"__esModule",{value:!0});var p=function(){function v(){this.requestHeaders=Object.create(null),this.responseHeaders=Object.create(null)}return v.prototype.copy=function(d,f){if(d)for(var s in d)s!=="requestHeaders"&&s!=="responseHeaders"&&(!d.hasOwnProperty||d.hasOwnProperty(s))&&(f[s]=d[s])},v.prototype.clone=function(){var d=Object.create(this.constructor.prototype);return this.copy(this,d),this.copy(this.requestHeaders,d.requestHeaders),this.copy(this.responseHeaders,d.responseHeaders),d},v}();return Ke.Context=p,Ke}var pt;function $t(){if(pt)return Pe;pt=1;var p=Pe&&Pe.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Pe,"__esModule",{value:!0});var v=yr(),d=function(f){p(s,f);function s(a){var r=f.call(this)||this;return a&&(r.copy(a,r),"requestHeaders"in a&&r.copy(a.requestHeaders,r.requestHeaders)),r}return s.prototype.init=function(a,r){this.client=a,a.uris.length>0&&(this.uri=a.uris[0]),this.returnType===void 0&&(this.returnType=r),this.timeout===void 0&&(this.timeout=a.timeout),this.copy(a.requestHeaders,this.requestHeaders)},s}(v.Context);return Pe.ClientContext=d,Pe}var Te={},Qe={},vt;function hr(){if(vt)return Qe;vt=1,Object.defineProperty(Qe,"__esModule",{value:!0});var p=function(){function v(d){this.defaultHandler=d,this.handlers=[],this.firstHandler=d}return v.prototype.rebuildHandler=function(){for(var d=this.handlers,f=this.defaultHandler,s=d.length,a=s-1;a>=0;--a)f=this.getNextHandler(d[a],f);this.firstHandler=f},Object.defineProperty(v.prototype,"handler",{get:function(){return this.firstHandler},enumerable:!0,configurable:!0}),v.prototype.use=function(){for(var d,f=[],s=0;s<arguments.length;s++)f[s]=arguments[s];(d=this.handlers).push.apply(d,f),this.rebuildHandler()},v.prototype.unuse=function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];for(var s=!1,a=0,r=d.length;a<r;++a){var e=this.handlers.indexOf(d[a]);e>=0&&(this.handlers.splice(e,1),s=!0)}s&&this.rebuildHandler()},v}();return Qe.PluginManager=p,Qe}var _t;function dr(){if(_t)return Te;_t=1;var p=Te&&Te.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Te,"__esModule",{value:!0});var v=hr(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.getNextHandler=function(a,r){return function(e,t,i){return a(e,t,i,r)}},s}(v.PluginManager);return Te.InvokeManager=d,Te}var qe={},wt;function pr(){if(wt)return qe;wt=1;var p=qe&&qe.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(qe,"__esModule",{value:!0});var v=hr(),d=function(f){p(s,f);function s(){return f!==null&&f.apply(this,arguments)||this}return s.prototype.getNextHandler=function(a,r){return function(e,t){return a(e,t,r)}},s}(v.PluginManager);return qe.IOManager=d,qe}var ye={},gt;function vr(){if(gt)return ye;gt=1,Object.defineProperty(ye,"__esModule",{value:!0});function p(r){var e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=r.match(e);if(t){var i=t[4].split(":",2);return{protocol:t[1],host:t[4],hostname:i[0],port:parseInt(i[1],10)||0,path:t[5],query:t[7],fragment:t[9]}}throw new Error("Invalid URI")}ye.parseURI=p;function v(r){for(var e=[Object.create(null)],t=0,i=r.length;t<i;++t){var n=r[t].split("_"),l=n.length-1;if(l>0){for(var u=e,o=0;o<l;o++){var c=n[o];u[0][c]===void 0&&(u[0][c]=[Object.create(null)]),u=u[0][c]}u.push(n[l])}e.push(r[t])}return e}ye.normalize=v;function d(r,e){return function(){switch(arguments.length){case 1:var t=arguments[0];t instanceof Error?e(t):r(t);break;case 2:var i=arguments[0],n=arguments[1];i instanceof Error?e(i):n instanceof Error?e(n):r(i===void 0?n:i);break}}}function f(r,e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new Promise(function(n,l){t.push(d(n,l));try{r.apply(e,t)}catch(u){l(u)}})}}ye.promisify=f;var s=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function a(r,e){e===void 0&&(e=0),e=e^-1;for(var t=0,i=r.length;t<i;++t)e=e>>>8^s[(e^r[t])&255];return e^-1}return ye.crc32=a,ye}var xt;function Gt(){if(xt)return V;xt=1;var p=V&&V.__awaiter||function(u,o,c,y){function h(_){return _ instanceof c?_:new c(function(w){w(_)})}return new(c||(c=Promise))(function(_,w){function g(M){try{D(y.next(M))}catch(N){w(N)}}function S(M){try{D(y.throw(M))}catch(N){w(N)}}function D(M){M.done?_(M.value):h(M.value).then(g,S)}D((y=y.apply(u,o||[])).next())})},v=V&&V.__generator||function(u,o){var c={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},y,h,_,w;return w={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function g(D){return function(M){return S([D,M])}}function S(D){if(y)throw new TypeError("Generator is already executing.");for(;c;)try{if(y=1,h&&(_=D[0]&2?h.return:D[0]?h.throw||((_=h.return)&&_.call(h),0):h.next)&&!(_=_.call(h,D[1])).done)return _;switch(h=0,_&&(D=[D[0]&2,_.value]),D[0]){case 0:case 1:_=D;break;case 4:return c.label++,{value:D[1],done:!1};case 5:c.label++,h=D[1],D=[0];continue;case 7:D=c.ops.pop(),c.trys.pop();continue;default:if(_=c.trys,!(_=_.length>0&&_[_.length-1])&&(D[0]===6||D[0]===2)){c=0;continue}if(D[0]===3&&(!_||D[1]>_[0]&&D[1]<_[3])){c.label=D[1];break}if(D[0]===6&&c.label<_[1]){c.label=_[1],_=D;break}if(_&&c.label<_[2]){c.label=_[2],c.ops.push(D);break}_[2]&&c.ops.pop(),c.trys.pop();continue}D=o.call(u,c)}catch(M){D=[6,M],h=0}finally{y=_=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(V,"__esModule",{value:!0});var d=Nt(),f=$t(),s=dr(),a=pr(),r=vr();function e(u,o){return function(){var c=Array.prototype.slice.call(arguments),y=c.length>0&&c[c.length-1]instanceof f.ClientContext?c.pop():new f.ClientContext;return u.invoke(o,c,y)}}function t(u,o,c,y,h){if(o[y]===void 0){o[y]=Object.create(null),Array.isArray(h)||(h=[h]),c=c+y+"_";for(var _=0;_<h.length;_++){var w=h[_];if(typeof w=="string")o[y][w]=e(u,c+w);else for(var g in w)t(u,o[y],c,g,w[g])}}}function i(u,o){for(var c=r.normalize(o),y=Object.create(null),h=0;h<c.length;h++){var _=c[h];if(typeof _=="string")y[_]===void 0&&(y[_]=e(u,_));else for(var w in _)t(u,y,"",w,_[w])}return y}var n=function(){function u(o,c){this.client=o,this.namespace=c}return u.prototype.get=function(o,c,y){if(typeof c!="symbol"&&c!=="then")return c in o||(o[c]=new Proxy(function(){},new u(this.client,this.namespace?this.namespace+"_"+c:""+c))),o[c]},u.prototype.apply=function(o,c,y){if(this.namespace){var h=y.length>0&&y[y.length-1]instanceof f.ClientContext?y.pop():new f.ClientContext;return this.client.invoke(this.namespace,y,h)}throw new TypeError("target is not a function")},u}(),l=function(){function u(o){var c,y=this;this.returnTypes=Object.create(null),this.requestHeaders=Object.create(null),this.codec=d.DefaultClientCodec.instance,this.timeout=3e4,this.urilist=[],this.transports=Object.create(null),this.invokeManager=new s.InvokeManager(this.call.bind(this)),this.ioManager=new a.IOManager(this.transport.bind(this)),u.transports.forEach(function(h){var _=h.name,w=h.ctor,g=new w;y.transports[_]=g,Object.defineProperty(y,_,{get:function(){return g},set:function(S){g=S,y.transports[_]=S},enumerable:!1,configurable:!1})}),o&&(typeof o=="string"?this.urilist.push(o):(c=this.urilist).push.apply(c,o))}return u.register=function(o,c){u.transports.push({name:o,ctor:c}),c.schemes.forEach(function(y){return u.protocols[y+":"]=o})},Object.defineProperty(u.prototype,"uris",{get:function(){return this.urilist},set:function(o){o.length>0&&(this.urilist=o.slice(0),this.urilist.sort(function(){return Math.random()-.5}))},enumerable:!0,configurable:!0}),u.prototype.useService=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var y,h;switch(o.length){case 1:if(Array.isArray(o[0]))return i(this,o[0]);typeof o[0]=="string"?y=o[0]:h=o[0];break;case 2:y=o[0],h=o[1];break}var _=Object.create(null);if(h){for(var w in h){var g=""+w;y&&(g=y+"_"+w),this.returnTypes[g]=h[w],_[w]=e(this,g)}return _}return new Proxy(_,new n(this,y))},u.prototype.useServiceAsync=function(){return p(this,void 0,void 0,function(){var o;return v(this,function(c){switch(c.label){case 0:return[4,this.invoke("~")];case 1:return o=c.sent(),[2,i(this,o)]}})})},u.prototype.use=function(){for(var o,c,y=[],h=0;h<arguments.length;h++)y[h]=arguments[h];if(y.length<=0)return this;switch(y[0].length){case 4:(o=this.invokeManager).use.apply(o,y);break;case 3:(c=this.ioManager).use.apply(c,y);break;default:throw new TypeError("Invalid parameter type")}return this},u.prototype.unuse=function(){for(var o,c,y=[],h=0;h<arguments.length;h++)y[h]=arguments[h];if(y.length<=0)return this;switch(y[0].length){case 4:(o=this.invokeManager).unuse.apply(o,y);break;case 3:(c=this.ioManager).unuse.apply(c,y);break;default:throw new TypeError("Invalid parameter type")}return this},u.prototype.invoke=function(o,c,y){return c===void 0&&(c=[]),y===void 0&&(y=new f.ClientContext),p(this,void 0,void 0,function(){var h;return v(this,function(_){switch(_.label){case 0:return c===null&&(c=[]),c.length>0?[4,Promise.all(c)]:[3,2];case 1:c=_.sent(),_.label=2;case 2:return h=y instanceof f.ClientContext?y:new f.ClientContext(y),h.init(this,this.returnTypes[o]),[2,this.invokeManager.handler(o,c,h)]}})})},u.prototype.call=function(o,c,y){return p(this,void 0,void 0,function(){var h,_,w;return v(this,function(g){switch(g.label){case 0:return h=this.codec,_=h.encode(o,c,y),[4,this.request(_,y)];case 1:return w=g.sent(),[2,h.decode(w,y)]}})})},u.prototype.request=function(o,c){return this.ioManager.handler(o,c)},u.prototype.transport=function(o,c){return p(this,void 0,void 0,function(){var y,h;return v(this,function(_){if(y=r.parseURI(c.uri),h=u.protocols[y.protocol],h!==void 0)return[2,this.transports[h].transport(o,c)];throw new Error('The protocol "'+y.protocol+'" is not supported.')})})},u.prototype.abort=function(){return p(this,void 0,void 0,function(){var o,c;return v(this,function(y){switch(y.label){case 0:o=[];for(c in this.transports)o.push(this.transports[c].abort());return[4,Promise.all(o)];case 1:return y.sent(),[2]}})})},u.transports=[],u.protocols=Object.create(null),u}();return V.Client=l,V}var We={},St;function Mn(){if(St)return We;St=1,Object.defineProperty(We,"__esModule",{value:!0});var p=Object.create(null);function v(f,s){s===void 0&&(s="@");function a(t){var i;if(t!==void 0){var n=t.trim().split(";"),l=Object.create(null);i=n[0].trim().split("=",2),l.name=i[0],l.value=i[1];for(var u=1;u<n.length;u++){var o=n[u].trim().split("=",2),c=o[0],y=o[1];l[c.toUpperCase()]=y}if(l.PATH){var h=l.PATH.length;h>2&&l.PATH.charAt(0)==='"'&&l.PATH.charAt(h-1)==='"'&&(l.PATH=l.PATH.substr(1,h-2))}else l.PATH="/";l.EXPIRES&&(l.EXPIRES=Date.parse(l.EXPIRES)),l.DOMAIN?l.DOMAIN=l.DOMAIN.toLowerCase():l.DOMAIN=s,l.SECURE=l.SECURE!==void 0,p[l.DOMAIN]===void 0&&(p[l.DOMAIN]=Object.create(null)),p[l.DOMAIN][l.name]=l}}for(var r in f)if(r=r.toLowerCase(),r==="set-cookie"||r==="set-cookie2"){var e=f[r];(Array.isArray(e)?e:[e]).forEach(a)}}We.setCookie=v;function d(f,s,a){f=f??"@",s=s??"/";var r=[];for(var e in p)if(f.indexOf(e)>-1){var t=[];for(var i in p[e]){var n=p[e][i];n.EXPIRES&&new Date().getTime()>n.EXPIRES?t.push(i):s.indexOf(n.PATH)===0&&a===n.SECURE&&n.value!==null&&r.push(n.name+"="+n.value)}for(var l=0,u=t.length;l<u;++l)delete p[e][t[l]]}return r.length>0?r.join("; "):""}return We.getCookie=d,We}var er={},Dt;function Wt(){if(Dt)return er;Dt=1,Object.defineProperty(er,"__esModule",{value:!0});function p(){var v=Object.create(null);return v.promise=new Promise(function(d,f){v.resolve=d,v.reject=f}),v}return er.defer=p,er}var rr={},Bt;function _r(){if(Bt)return rr;Bt=1,Object.defineProperty(rr,"__esModule",{value:!0});var p=function(){function v(d,f,s,a){if(this.method=d,this.name=f,this.target=s,this.paramTypes=a,f===""||f===void 0){if(d.name==="")throw new Error("name must not be empty");f=d.name}}return v}();return rr.Method=p,rr}var tr={},zt;function Vt(){if(zt)return tr;zt=1,Object.defineProperty(tr,"__esModule",{value:!0});var p=_r(),v=function(){function d(){this.methods=Object.create(null),this.names=[]}return d.prototype.getNames=function(){return this.names},d.prototype.get=function(f){return f=f.toLowerCase(),f in this.methods?this.methods[f]:this.methods["*"]},d.prototype.remove=function(f){delete this.methods[f.toLowerCase()];var s=this.names.indexOf(f);s>-1&&this.names.splice(s,1)},d.prototype.add=function(f){var s=f.name;if(s===""||s===void 0){if(s=f.fullname,(s===""||s===void 0)&&(s=f.method.name,s===""))throw new Error("name must not be empty");f.name=s}this.methods[s.toLowerCase()]=f,this.names.indexOf(s)===-1&&this.names.push(s)},d.prototype.addFunction=function(f){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];switch(s.length){case 0:this.add(new p.Method(f));break;case 1:typeof s[0]=="string"?this.add(new p.Method(f,s[0])):this.add(new p.Method(f,void 0,void 0,s[0]));break;case 2:this.add(new p.Method(f,s[0],void 0,s[1]));break}},d.prototype.addMethod=function(){for(var f=[],s=0;s<arguments.length;s++)f[s]=arguments[s];if(typeof f[0]=="string"){var a=f[1][f[0]];if(typeof a=="function")this.add(new p.Method(a,f[0],f[1],f[2]));else throw new Error("obj[name] must be a function")}else switch(f.length){case 2:this.add(new p.Method(f[0],void 0,f[1]));break;case 3:typeof f[2]=="string"?this.add(new p.Method(f[0],f[2],f[1])):this.add(new p.Method(f[0],void 0,f[1],f[2]));break;case 4:this.add(new p.Method(f[0],f[2],f[1],f[3]))}},d.prototype.addMissingMethod=function(f,s){var a=new p.Method(f,"*",s);a.missing=!0,f.length===3&&(a.passContext=!0),this.add(a)},d.prototype.addFunctions=function(f){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var r,e;switch(s.length){case 1:s[0].length>1&&typeof s[0][0]=="string"?r=s[0]:e=s[0];break;case 2:r=s[0],e=s[1];break}var t=f.length;if(r&&r.length!==t)throw new Error("names.length must be equal to functions.length");for(var i=0;i<t;++i)this.add(new p.Method(f[i],r?r[i]:void 0,void 0,e))},d.prototype.addMethods=function(){for(var f=[],s=0;s<arguments.length;s++)f[s]=arguments[s];var a=f[0].length;if(a!==0){var r,e=f[1],t,i;if(typeof f[0][0]=="string"){t=f[0],i=f[2];for(var n=0;n<a;++n){var l=e[t[n]];if(typeof l=="function")this.add(new p.Method(l,t[n],e,i));else throw new Error("obj[name] must be a function")}return}else r=f[0];switch(f.length){case 3:f[2].length>0&&typeof f[2][0]=="string"?t=f[2]:i=f[2];break;case 4:t=f[2],i=f[3]}if(t&&t.length!==a)throw new Error("names.length must be equal to functions.length");for(var n=0;n<a;++n)this.add(new p.Method(r[n],t?t[n]:void 0,e,i))}},d.prototype.addInstanceMethods=function(f,s){for(var a in f)if((!f.hasOwnProperty||f.hasOwnProperty(a))&&typeof f[a]=="function"){var r=s?s+"_"+a:a;this.add(new p.Method(f[a],r,f))}},d}();return tr.MethodManager=v,tr}var ke={},At;function Lt(){if(At)return ke;At=1;var p=ke&&ke.__extends||function(){var d=function(f,s){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var e in r)r.hasOwnProperty(e)&&(a[e]=r[e])},d(f,s)};return function(f,s){d(f,s);function a(){this.constructor=f}f.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(ke,"__esModule",{value:!0});var v=function(d){p(f,d);function f(s){return s===void 0&&(s="timeout"),d.call(this,s)||this}return f}(Error);return ke.TimeoutError=v,ke}var $={},nr={},bt;function Xt(){if(bt)return nr;bt=1,Object.defineProperty(nr,"__esModule",{value:!0});var p=sr(),v=function(){function d(){this.debug=!1,this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object",this.nullType=void 0}return d.prototype.encode=function(f,s){var a=new p.ByteStream,r=new p.Writer(a,this.simple,this.utc),e=s.responseHeaders;this.simple&&(e.simple=!0);var t=0;for(var i in e)t++;return t>0&&(a.writeByte(72),r.serialize(e),r.reset()),f instanceof Error?(a.writeByte(69),r.serialize(this.debug&&f.stack?f.stack:f.message)):(a.writeByte(82),r.serialize(f)),a.writeByte(122),a.takeBytes()},d.prototype.decodeMethod=function(f,s){var a=s.service,r=a.get(f);if(r===void 0)throw new Error("Can't find this method "+f+"().");return s.method=r,r},d.prototype.decodeArguments=function(f,s,a){var r=s.stream,e=r.readByte();if(f.missing)return e===97?(s.reset(),s.read(e,Array)):[];var t=[];if(e===97){s.reset();var i=p.ValueReader.readCount(r),n=f.paramTypes;if(n===void 0)n=new Array(i).fill(this.nullType);else{n.length=i;for(var l=0;l<i;++l)n[l]===void 0&&(n[l]=this.nullType)}t=new Array(i),s.addReference(t);for(var l=0;l<i;++l)t[l]=s.deserialize(n[l]);r.readByte()}return t},d.prototype.decode=function(f,s){if(f.length===0)return this.decodeMethod("~",s),["~",[]];var a=new p.ByteStream(f),r=new p.Reader(a,!1);r.longType=this.longType,r.dictType=this.dictType;var e=a.readByte();if(e===72){var t=r.deserialize(this.nullType);for(var i in t)s.requestHeaders[i]=t[i];r.reset(),e=a.readByte()}switch(e){case 67:s.requestHeaders.simple&&(r.simple=!0);var n=r.deserialize(String),l=this.decodeArguments(this.decodeMethod(n,s),r,s);return[n,l];case 122:return this.decodeMethod("~",s),["~",[]];default:throw new Error(`Invalid request:\r
`+a.toString())}},d.instance=new d,d}();return nr.DefaultServiceCodec=v,nr}var Ot;function Yt(){if(Ot)return $;Ot=1;var p=$&&$.__awaiter||function(i,n,l,u){function o(c){return c instanceof l?c:new l(function(y){y(c)})}return new(l||(l=Promise))(function(c,y){function h(g){try{w(u.next(g))}catch(S){y(S)}}function _(g){try{w(u.throw(g))}catch(S){y(S)}}function w(g){g.done?c(g.value):o(g.value).then(h,_)}w((u=u.apply(i,n||[])).next())})},v=$&&$.__generator||function(i,n){var l={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},u,o,c,y;return y={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function h(w){return function(g){return _([w,g])}}function _(w){if(u)throw new TypeError("Generator is already executing.");for(;l;)try{if(u=1,o&&(c=w[0]&2?o.return:w[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,w[1])).done)return c;switch(o=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return l.label++,{value:w[1],done:!1};case 5:l.label++,o=w[1],w=[0];continue;case 7:w=l.ops.pop(),l.trys.pop();continue;default:if(c=l.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){l=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){l.label=w[1];break}if(w[0]===6&&l.label<c[1]){l.label=c[1],c=w;break}if(c&&l.label<c[2]){l.label=c[2],l.ops.push(w);break}c[2]&&l.ops.pop(),l.trys.pop();continue}w=n.call(i,l)}catch(g){w=[6,g],o=0}finally{u=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},d=$&&$.__spreadArrays||function(){for(var i=0,n=0,l=arguments.length;n<l;n++)i+=arguments[n].length;for(var u=Array(i),o=0,n=0;n<l;n++)for(var c=arguments[n],y=0,h=c.length;y<h;y++,o++)u[o]=c[y];return u};Object.defineProperty($,"__esModule",{value:!0});var f=Xt(),s=dr(),a=pr(),r=_r(),e=Vt(),t=function(){function i(){var n=this;this.codec=f.DefaultServiceCodec.instance,this.maxRequestLength=2147483647,this.invokeManager=new s.InvokeManager(this.execute.bind(this)),this.ioManager=new a.IOManager(this.process.bind(this)),this.methodManager=new e.MethodManager,this.handlers=Object.create(null),this.options=Object.create(null);var l=function(c){var y=i.handlers[c],h=new y(u);u.handlers[c]=h,Object.defineProperty(u,c,{get:function(){return h},set:function(_){h=_,n.handlers[c]=_},enumerable:!0,configurable:!0})},u=this;for(var o in i.handlers)l(o);this.add(new r.Method(this.methodManager.getNames.bind(this.methodManager),"~"))}return i.register=function(n,l){i.handlers[n]=l,l.serverTypes.forEach(function(u){i.serverTypes.has(u)?i.serverTypes.get(u).push(n):i.serverTypes.set(u,[n])})},Object.defineProperty(i.prototype,"names",{get:function(){return this.methodManager.getNames()},enumerable:!0,configurable:!0}),i.prototype.bind=function(n,l){var u=n.constructor,o=i.serverTypes;if(o.has(u))for(var c=o.get(u),y=0,h=c.length;y<h;++y)(l===void 0||l===c[y])&&this.handlers[c[y]].bind(n);else throw new Error("This type server is not supported.");return this},i.prototype.handle=function(n,l){return this.ioManager.handler(n,l)},i.prototype.process=function(n,l){return p(this,void 0,void 0,function(){var u,o,c,y,h,_;return v(this,function(w){switch(w.label){case 0:u=this.codec,w.label=1;case 1:return w.trys.push([1,3,,4]),c=u.decode(n,l),y=c[0],h=c[1],[4,this.invokeManager.handler(y,h,l)];case 2:return o=w.sent(),[3,4];case 3:return _=w.sent(),o=_,[3,4];case 4:return[2,u.encode(o,l)]}})})},i.prototype.execute=function(n,l,u){return p(this,void 0,void 0,function(){var o,c;return v(this,function(y){return o=u.method,c=o.method,o.missing?o.passContext?[2,c.apply(o.target,[n,l,u])]:[2,c.apply(o.target,[n,l])]:(o.passContext&&l.push(u),[2,c.apply(o.target,l)])})})},i.prototype.use=function(){for(var n,l,u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];if(u.length<=0)return this;switch(u[0].length){case 4:(n=this.invokeManager).use.apply(n,u);break;case 3:(l=this.ioManager).use.apply(l,u);break;default:throw new TypeError("Invalid parameter type")}return this},i.prototype.unuse=function(){for(var n,l,u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];if(u.length<=0)return this;switch(u[0].length){case 4:(n=this.invokeManager).unuse.apply(n,u);break;case 3:(l=this.ioManager).unuse.apply(l,u);break;default:throw new TypeError("Invalid parameter type")}return this},i.prototype.get=function(n){return this.methodManager.get(n)},i.prototype.add=function(n){return this.methodManager.add(n),this},i.prototype.remove=function(n){return this.methodManager.remove(n),this},i.prototype.addFunction=function(n){for(var l,u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];return(l=this.methodManager).addFunction.apply(l,d([n],u)),this},i.prototype.addMethod=function(){for(var n,l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return(n=this.methodManager).addMethod.apply(n,d([l[0],l[1]],l.slice(2))),this},i.prototype.addMissingMethod=function(n,l){return this.methodManager.addMissingMethod(n,l),this},i.prototype.addFunctions=function(n){for(var l,u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];return(l=this.methodManager).addFunctions.apply(l,d([n],u)),this},i.prototype.addMethods=function(){for(var n,l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return(n=this.methodManager).addMethods.apply(n,d([l[0],l[1]],l.slice(2))),this},i.prototype.addInstanceMethods=function(n,l){return this.methodManager.addInstanceMethods(n,l),this},i.handlers=Object.create(null),i.serverTypes=new Map,i}();return $.Service=t,$}var Ue={},mt;function Zt(){if(mt)return Ue;mt=1;var p=Ue&&Ue.__extends||function(){var f=function(s,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},f(s,a)};return function(s,a){f(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(Ue,"__esModule",{value:!0});var v=yr(),d=function(f){p(s,f);function s(a){var r=f.call(this)||this;return r.service=a,r}return s}(v.Context);return Ue.ServiceContext=d,Ue}var G={},ne={},Mt;function Jt(){if(Mt)return ne;Mt=1;var p=ne&&ne.__awaiter||function(f,s,a,r){function e(t){return t instanceof a?t:new a(function(i){i(t)})}return new(a||(a=Promise))(function(t,i){function n(o){try{u(r.next(o))}catch(c){i(c)}}function l(o){try{u(r.throw(o))}catch(c){i(c)}}function u(o){o.done?t(o.value):e(o.value).then(n,l)}u((r=r.apply(f,s||[])).next())})},v=ne&&ne.__generator||function(f,s){var a={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},r,e,t,i;return i={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function n(u){return function(o){return l([u,o])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,e&&(t=u[0]&2?e.return:u[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,u[1])).done)return t;switch(e=0,t&&(u=[u[0]&2,t.value]),u[0]){case 0:case 1:t=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,e=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(t=a.trys,!(t=t.length>0&&t[t.length-1])&&(u[0]===6||u[0]===2)){a=0;continue}if(u[0]===3&&(!t||u[1]>t[0]&&u[1]<t[3])){a.label=u[1];break}if(u[0]===6&&a.label<t[1]){a.label=t[1],t=u;break}if(t&&a.label<t[2]){a.label=t[2],a.ops.push(u);break}t[2]&&a.ops.pop(),a.trys.pop();continue}u=s.call(f,a)}catch(o){u=[6,o],e=0}finally{r=t=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ne,"__esModule",{value:!0});var d=function(){function f(){}return f.register=function(s,a){f.handlers[s]=a},f.cancel=function(s){delete f.handlers[s]},f.handler=function(s,a){return p(this,void 0,void 0,function(){var r;return v(this,function(e){if(r=f.handlers[s],r)return[2,r(s,a)];throw new Error("Server is stopped")})})},f.handlers=Object.create(null),f}();return ne.MockAgent=d,ne}var Ct;function Cn(){if(Ct)return G;Ct=1;var p=G&&G.__awaiter||function(e,t,i,n){function l(u){return u instanceof i?u:new i(function(o){o(u)})}return new(i||(i=Promise))(function(u,o){function c(_){try{h(n.next(_))}catch(w){o(w)}}function y(_){try{h(n.throw(_))}catch(w){o(w)}}function h(_){_.done?u(_.value):l(_.value).then(c,y)}h((n=n.apply(e,t||[])).next())})},v=G&&G.__generator||function(e,t){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},n,l,u,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(_){return y([h,_])}}function y(h){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(u=h[0]&2?l.return:h[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,h[1])).done)return u;switch(l=0,u&&(h=[h[0]&2,u.value]),h[0]){case 0:case 1:u=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,l=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!u||h[1]>u[0]&&h[1]<u[3])){i.label=h[1];break}if(h[0]===6&&i.label<u[1]){i.label=u[1],u=h;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(h);break}u[2]&&i.ops.pop(),i.trys.pop();continue}h=t.call(e,i)}catch(_){h=[6,_],l=0}finally{n=u=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0});var d=Zt(),f=Yt(),s=Jt(),a=function(){function e(t){this.address=t}return e.prototype.close=function(){s.MockAgent.cancel(this.address)},e}();G.MockServer=a;var r=function(){function e(t){var i=this;this.service=t,this.handler=function(n,l){return p(i,void 0,void 0,function(){var u,o;return v(this,function(c){if(l.length>this.service.maxRequestLength)throw new Error("Request entity too large");return u=new d.ServiceContext(this.service),o={family:"mock",address:n,port:0},u.remoteAddress=o,u.localAddress=o,u.handler=this,[2,this.service.handle(l,u)]})})}}return e.prototype.bind=function(t){s.MockAgent.register(t.address,this.handler)},e.serverTypes=[a],e}();return G.MockHandler=r,f.Service.register("mock",r),G}var ie={},Ft;function Fn(){if(Ft)return ie;Ft=1;var p=ie&&ie.__awaiter||function(t,i,n,l){function u(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function y(w){try{_(l.next(w))}catch(g){c(g)}}function h(w){try{_(l.throw(w))}catch(g){c(g)}}function _(w){w.done?o(w.value):u(w.value).then(y,h)}_((l=l.apply(t,i||[])).next())})},v=ie&&ie.__generator||function(t,i){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},l,u,o,c;return c={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function y(_){return function(w){return h([_,w])}}function h(_){if(l)throw new TypeError("Generator is already executing.");for(;n;)try{if(l=1,u&&(o=_[0]&2?u.return:_[0]?u.throw||((o=u.return)&&o.call(u),0):u.next)&&!(o=o.call(u,_[1])).done)return o;switch(u=0,o&&(_=[_[0]&2,o.value]),_[0]){case 0:case 1:o=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!o||_[1]>o[0]&&_[1]<o[3])){n.label=_[1];break}if(_[0]===6&&n.label<o[1]){n.label=o[1],o=_;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(_);break}o[2]&&n.ops.pop(),n.trys.pop();continue}_=i.call(t,n)}catch(w){_=[6,w],u=0}finally{l=o=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};Object.defineProperty(ie,"__esModule",{value:!0});var d=Gt(),f=vr(),s=Jt(),a=Wt(),r=Lt(),e=function(){function t(){}return t.prototype.transport=function(i,n){return p(this,void 0,void 0,function(){var l,u,o;return v(this,function(c){return l=f.parseURI(n.uri),u=a.defer(),n.timeout>0&&(o=setTimeout(function(){u.reject(new r.TimeoutError)},n.timeout),u.promise.then(function(){clearTimeout(o)},function(){clearTimeout(o)})),s.MockAgent.handler(l.hostname,i).then(function(y){return u.resolve(y)},function(y){return u.reject(y)}),[2,u.promise]})})},t.prototype.abort=function(){return p(this,void 0,void 0,function(){return v(this,function(i){return[2]})})},t.schemes=["mock"],t}();return ie.MockTransport=e,d.Client.register("mock",e),ie}var Et;function wr(){if(Et)return O;Et=1,Object.defineProperty(O,"__esModule",{value:!0});var p=Gt();O.Client=p.Client;var v=Nt();O.DefaultClientCodec=v.DefaultClientCodec;var d=$t();O.ClientContext=d.ClientContext;var f=yr();O.Context=f.Context;var s=Mn();O.getCookie=s.getCookie,O.setCookie=s.setCookie;var a=Wt();O.defer=a.defer;var r=hr();O.PluginManager=r.PluginManager;var e=dr();O.InvokeManager=e.InvokeManager;var t=pr();O.IOManager=t.IOManager;var i=_r();O.Method=i.Method;var n=Vt();O.MethodManager=n.MethodManager;var l=Lt();O.TimeoutError=l.TimeoutError;var u=vr();O.parseURI=u.parseURI,O.normalize=u.normalize,O.promisify=u.promisify,O.crc32=u.crc32;var o=Yt();O.Service=o.Service;var c=Xt();O.DefaultServiceCodec=c.DefaultServiceCodec;var y=Zt();O.ServiceContext=y.ServiceContext;var h=Cn();O.MockServer=h.MockServer,O.MockHandler=h.MockHandler;var _=Fn();return O.MockTransport=_.MockTransport,O}var qn=wr(),kn=sr(),Ve={},ae={},Rt;function En(){if(Rt)return ae;Rt=1;var p=ae&&ae.__awaiter||function(a,r,e,t){function i(n){return n instanceof e?n:new e(function(l){l(n)})}return new(e||(e=Promise))(function(n,l){function u(y){try{c(t.next(y))}catch(h){l(h)}}function o(y){try{c(t.throw(y))}catch(h){l(h)}}function c(y){y.done?n(y.value):i(y.value).then(u,o)}c((t=t.apply(a,r||[])).next())})},v=ae&&ae.__generator||function(a,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},t,i,n,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(c){return function(y){return o([c,y])}}function o(c){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,i&&(n=c[0]&2?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){e.label=c[1];break}if(c[0]===6&&e.label<n[1]){e.label=n[1],n=c;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(c);break}n[2]&&e.ops.pop(),e.trys.pop();continue}c=r.call(a,e)}catch(y){c=[6,y],i=0}finally{t=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ae,"__esModule",{value:!0});var d=wr();function f(a){var r=Object.create(null);if(a){for(var e=a.split(`\r
`),t=0,i=e.length;t<i;t++)if(e[t]!==""){var n=e[t].split(": ",2).map(function(o){return o.trim()}),l=n[0],u=n[1];(r.hasOwnProperty?r.hasOwnProperty(l):l in r)?Array.isArray(r[l])?r[l].push(u):r[l]=[r[l],u]:r[l]=u}}return r}var s=function(){function a(){this.counter=0,this.requests=Object.create(null),this.httpRequestHeaders=Object.create(null),this.onprogress=null}return a.prototype.setRequestHeaders=function(r,e){for(var t in e)if(!e.hasOwnProperty||e.hasOwnProperty(t)){var i=e[t];i!==void 0&&(Array.isArray(i)?r[t]=i.join(", "):r[t]=i+"")}},a.prototype.getRequestHeaders=function(r){var e=Object.create(null);return this.setRequestHeaders(e,this.httpRequestHeaders),r&&this.setRequestHeaders(e,r),e},a.prototype.transport=function(r,e){return p(this,void 0,void 0,function(){var t,i,n,l,u,o,c,y,h=this;return v(this,function(_){t=this.counter<2147483647?++this.counter:this.counter=0,i=new XMLHttpRequest,n=this,this.requests[t]=i,l=e,u=this.getRequestHeaders(l.httpRequestHeaders),o=new Promise(function(w,g){i.upload.onprogress=i.onprogress=h.onprogress,i.upload.onerror=i.onerror=function(S){delete n.requests[t],g(new Error("network error"))},i.upload.onabort=i.onabort=function(S){delete n.requests[t],g(new Error("transport abort"))},i.upload.ontimeout=i.ontimeout=function(S){delete n.requests[t],g(new d.TimeoutError)},i.onload=function(S){delete n.requests[t],l.httpStatusCode=this.status,l.httpStatusText=this.statusText,this.status>=200&&this.status<300?(l.httpResponseHeaders=f(this.getAllResponseHeaders()),w(new Uint8Array(this.response))):g(new Error(this.status+":"+this.statusText))}}),i.open("POST",e.uri,!0),i.withCredentials=!0,i.responseType="arraybuffer",i.timeout=e.timeout;for(c in u)i.setRequestHeader(c,u[c]);return typeof ArrayBuffer.isView=="function"?i.send(r):typeof r.buffer.slice=="function"?i.send(r.buffer.slice(r.byteOffset,r.length)):(y=new Uint8Array(r.length),y.set(r),i.send(y.buffer)),[2,o]})})},a.prototype.abort=function(){return p(this,void 0,void 0,function(){var r,e;return v(this,function(t){for(r in this.requests)e=this.requests[r],delete this.requests[r],e&&e.abort();return[2]})})},a.schemes=["http","https"],a}();return ae.HttpTransport=s,d.Client.register("http",s),ae}var oe={},jt;function Rn(){if(jt)return oe;jt=1;var p=oe&&oe.__awaiter||function(a,r,e,t){function i(n){return n instanceof e?n:new e(function(l){l(n)})}return new(e||(e=Promise))(function(n,l){function u(y){try{c(t.next(y))}catch(h){l(h)}}function o(y){try{c(t.throw(y))}catch(h){l(h)}}function c(y){y.done?n(y.value):i(y.value).then(u,o)}c((t=t.apply(a,r||[])).next())})},v=oe&&oe.__generator||function(a,r){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},t,i,n,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(c){return function(y){return o([c,y])}}function o(c){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,i&&(n=c[0]&2?i.return:c[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,c[1])).done)return n;switch(i=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){e.label=c[1];break}if(c[0]===6&&e.label<n[1]){e.label=n[1],n=c;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(c);break}n[2]&&e.ops.pop(),e.trys.pop();continue}c=r.call(a,e)}catch(y){c=[6,y],i=0}finally{t=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(oe,"__esModule",{value:!0});var d=wr(),f=sr(),s=function(){function a(){this.counter=0,this.results=Object.create(null),this.websockets=Object.create(null)}return a.prototype.connect=function(r){return p(this,void 0,void 0,function(){var e,t,i,n=this;return v(this,function(l){switch(l.label){case 0:return[4,this.websockets[r]];case 1:return e=l.sent(),e!==void 0&&e.readyState!==WebSocket.CLOSING&&e.readyState!==WebSocket.CLOSED?[2,e]:(t=d.defer(),e=new WebSocket(r,"hprose"),e.binaryType="arraybuffer",e.onopen=function(){return t.resolve(e)},e.onmessage=function(u){return p(n,void 0,void 0,function(){var o,c,y;return v(this,function(h){return o=new f.ByteStream(u.data),c=o.readInt32BE(),y=this.results[r][c],delete this.results[r][c],y&&y.resolve(o.remains),[2]})})},i=function(u){var o=n.results[r];if(o)for(var c in o){var y=o[c];delete o[c],y.reject(u)}delete n.websockets[r]},e.onerror=function(u){return i(new Error("error"))},e.onclose=function(u){u.reason?i(new Error(u.code+":"+u.reason)):i(new Error(""+u.code))},this.websockets[r]=t.promise,[2,t.promise])}})})},a.prototype.transport=function(r,e){return p(this,void 0,void 0,function(){var t,i,n,l,u,o,c,y=this;return v(this,function(h){switch(h.label){case 0:return t=e.uri,i=this.counter<2147483647?++this.counter:this.counter=0,n=d.defer(),[4,this.connect(t)];case 1:return l=h.sent(),this.results[t]===void 0&&(this.results[t]=Object.create(null)),this.results[t][i]=n,e.timeout>0&&(u=setTimeout(function(){delete y.results[t][i],n.reject(new d.TimeoutError)},e.timeout),n.promise.then(function(){clearTimeout(u)},function(){clearTimeout(u)})),o=new f.ByteStream(4+r.length),o.writeInt32BE(i),o.write(r),c=o.takeBytes(),typeof ArrayBuffer.isView=="function"?l.send(c):l.send(c.buffer),[2,n.promise]}})})},a.prototype.abort=function(){return p(this,void 0,void 0,function(){var r,e,t,i,n;return v(this,function(l){switch(l.label){case 0:r=[];for(e in this.websockets)r.push(e);t=0,l.label=1;case 1:return t<r.length?(i=r[t],n=this.websockets[i],delete this.websockets[i],n?[4,n]:[3,3]):[3,4];case 2:l.sent().close(1e3),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},a.schemes=["ws","wss"],a}();return oe.WebSocketTransport=s,d.Client.register("websocket",s),oe}var It;function jn(){if(It)return Ve;It=1,Object.defineProperty(Ve,"__esModule",{value:!0});var p=En();Ve.HttpTransport=p.HttpTransport;var v=Rn();return Ve.WebSocketTransport=v.WebSocketTransport,Ve}var Un=jn();export{Pn as a,qn as b,xr as c,Un as d,Tn as g,kn as l};
