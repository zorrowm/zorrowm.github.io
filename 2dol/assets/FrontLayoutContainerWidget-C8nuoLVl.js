import{ab as V,ac as X,ad as j,C as U,B as z,Y as H,K}from"./vendor-71nkuPi7.js";import{_ as I,w as Y}from"./index-Cl6kQhfR.js";import{u as G,b as J}from"./vue-router-exp-ButTbbfG.js";import{h as F,k as Z,C as ee,N as te,B as y,S as oe,A as ne}from"./xframelib-exp-Dh6eGY1k.js";import{e as ie}from"./monaco-editor-exp-B01XOe8A.js";import{d as b,r as f,w as ae,P as W,U as M,V as s,W as P,a8 as $,a as le,S as q,ad as T,E as S,Q as N,L as se,c as d,$ as C,a3 as re}from"./@vue-exp-Mkau1HGZ.js";import"./@hprose-exp-B7dHRfib.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-DwwUNauw.js";const ue=b({__name:"index",props:{leftWidth:V().def("0px")},setup(o,{expose:n}){n();const a=o,e=f(null);let g,c;ae(()=>a.leftWidth,i=>{i&&e.value&&(e.value.style.width=i)});const l=X(function(i){e.value&&(e.value.style.width=c+i.clientX-g+"px")},20),r=()=>{document.documentElement.style.userSelect="unset",document.documentElement.removeEventListener("mousemove",l),document.documentElement.removeEventListener("mouseup",r),F.dispatchWindowResize()},E={props:a,scalable:e,get startX(){return g},set startX(i){g=i},get startWidth(){return c},set startWidth(i){c=i},onDrag:l,dragEnd:r,startDrag:i=>{g=i.clientX,e.value&&(c=parseInt(window.getComputedStyle(e.value).width,10)),document.documentElement.style.userSelect="none",document.documentElement.addEventListener("mousemove",l),document.documentElement.addEventListener("mouseup",r)}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),ce={class:"split-wrapper"},de={ref:"scalable",class:"scalable"},fe={class:"left-content"},ge={class:"right-content"};function me(o,n,a,e,g,c){return W(),M("div",ce,[s("div",de,[s("div",fe,[P(o.$slots,"left-content",{},()=>[n[0]||(n[0]=$("右边内容区"))],!0)]),s("div",{ref:"separator",class:"separator",onMousedown:e.startDrag},n[1]||(n[1]=[s("i",null,null,-1),s("i",null,null,-1)]),544)],512),s("div",ge,[P(o.$slots,"right-content",{},()=>[n[2]||(n[2]=$("右边内容区"))],!0)])])}const pe=I(ue,[["render",me],["__scopeId","data-v-d3df8b51"],["__file","index.vue"]]),ve=b({name:"FullScreen",props:{target:j(),color:V()},setup(o){function n(){a.value?(F.exitFullScreen(),a.value=!1):(F.requestFullScreen(o.target),a.value=!0)}const a=f(!1);return{getTitle:le(()=>a.value?"退出全屏":"全屏"),isFullscreen:a,toggle:n}}});function _e(o,n,a,e,g,c){const l=q("Icon"),r=T("tooltip");return o.isFullscreen?S((W(),N(l,{key:1,icon:"ant-design:fullscreen-exit-outlined",color:o.color,onClick:o.toggle},null,8,["color","onClick"])),[[r,o.getTitle,void 0,{right:!0}]]):S((W(),N(l,{key:0,icon:"ant-design:fullscreen-outlined",color:o.color,onClick:o.toggle},null,8,["color","onClick"])),[[r,o.getTitle,void 0,{right:!0}]])}const he=I(ve,[["render",_e],["__scopeId","data-v-c8c965ee"],["__file","FullScreen.vue"]]),L="frontLayoutWidget",we=b({__name:"FrontLayoutContainerWidget",setup(o,{expose:n}){const a=G(),e=J(),g=f(),c=Y,l=f(c),r=f(L);let p;Z("widgetsList.txt").then(t=>{t.data&&(p=ee(t.data))});function E(){i.value=!1,v.value=!1,_.value="",y.gui&&(y.gui.destroy(),y.gui=void 0);const t=e.query?.wid;if(t){const u=y.LayoutMap.get(L);u&&(t=="MapViewerWidget"?u.unloadWidget(t.toString()):(u.unloadWidget(t.toString()),setTimeout(()=>{u.unloadWidget("MapViewerWidget")},500)))}a.push({query:void 0})}const i=f(!0);function B(t=!1){i.value=t}n({changeVisible:B,isShow:i});const h=f("0px"),w=f(""),v=f(!1),_=f("");async function A(){if(h.value==="0px"?h.value="40%":h.value="0px",v.value=!v.value,v.value&&!_.value){const t=e.query?.wid?.toString();if(t&&p){const u=p.find(m=>m.layoutID==="frontLayoutWidget"&&m.id===t);if(u){w.value=u.path;const m="./code"+u.path;oe(m,void 0,void 0,void 0,"text").then(R=>{_.value=R.data,_.value&&D()}).catch(R=>{})}}}}function O(){h.value="0px",v.value=!1}function x(t){const u=t.lastIndexOf("/")+1;let m=t.substring(u);return m=decodeURI(m.split("?")[0]),m}function Q(){if(w.value){const t=x(w.value);ne(y.Axios,"code"+w.value,t)}}function D(){const t=document.getElementById("container");t&&(window.MonacoEnvironment={getWorkerUrl:function(u,m){return""}},ie.create(t,{value:_.value,language:"typescript",lineNumbers:"on",readOnly:!0,readOnlyMessage:{value:"不可以修改哦",supportThemeIcons:!0,supportHtml:!0},automaticLayout:!0,minimap:{enabled:!1},overviewRulerLanes:0,scrollbar:{horizontal:"hidden",handleMouseWheel:!0}}))}const k={name:L,router:a,route:e,containerRef:g,widgetCofig:c,configRef:l,layoutIDRef:r,get widgetsList(){return p},set widgetsList(t){p=t},closeFrontLayoutWidget:E,isShow:i,changeVisible:B,leftPanelWidth:h,widgetFilePath:w,drawerLeft:v,drawerContetn:_,SwitchDrawer:A,closeCodePanel:O,getFileName:x,downloadVue:Q,InitMonaCoeditor:D,get LayoutContainer(){return te},SplitPanel:pe,FullScreen:he};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),ye={class:"frontcontainer"},Ce={id:"container",ref:"containerRef",style:{height:"100%",width:"100%"}},Se={class:"editorBar row justify-center items-middle"},Ee={class:"q-mr-md q-gutter-md"},We={class:"rightBtn q-px-sm"};function Le(o,n,a,e,g,c){const l=q("Icon"),r=T("tooltip");return S((W(),M("div",ye,[d(U,{view:"hHh lpR fFf"},{default:C(()=>[d(z,null,{default:C(()=>[d(e.SplitPanel,{style:{height:"100vh",width:"100%"},leftWidth:e.leftPanelWidth},{"left-content":C(()=>[s("div",Ce,[s("div",Se,[s("div",null,re(e.widgetFilePath),1),d(H),s("div",Ee,[S(d(l,{icon:"ant-design:download-outlined",onClick:e.downloadVue},null,512),[[r,"下载vue文件"]]),d(e.FullScreen,{target:e.containerRef},null,8,["target"]),S(d(l,{icon:"ant-design:close-circle-outlined",onClick:e.closeCodePanel},null,512),[[r,"关闭代码页"]])])])],512)]),"right-content":C(()=>[d(e.LayoutContainer,{widgetConfig:e.configRef,layoutID:e.layoutIDRef,enableRouterView:!1},{default:C(()=>[s("div",We,[s("span",{class:"cursor-pointer",title:"关闭",onClick:e.closeFrontLayoutWidget,style:{"margin-right":"10px"}},[d(l,{icon:"ant-design:close-circle-outlined",width:"32",style:{color:"white !important"}})]),d(K,{flat:"",onClick:n[0]||(n[0]=p=>e.SwitchDrawer()),label:"查看代码",dense:"",icon:"menu"})])]),_:1},8,["widgetConfig","layoutID"])]),_:1},8,["leftWidth"])]),_:1})]),_:1})],512)),[[se,e.isShow]])}const $e=I(we,[["render",Le],["__scopeId","data-v-f78d4343"],["__file","FrontLayoutContainerWidget.vue"]]);export{$e as default};
