import{G as O,I as Q,J as R,T as A,Y as j,Z as H,A as z}from"./vendor-qEPl7M71.js";import{u as N}from"./vue-router-exp-U1sBIDGE.js";import{B as s}from"./xframelib-exp-CBRV2soX.js";import{m as W,O as U,M as v,_ as B,e as m}from"./index-8yyKnfk0.js";import{W as F}from"./WidgetsEvent-e0lOKT5_.js";import{M as G}from"./MapTool-lkJYUbBB.js";import{d as P,a as M,L as c,M as f,F as y,a6 as x,S as C,_ as b,e as k,D as Y,a7 as q,a2 as J,Y as E}from"./@vue-exp-Cbz_CXqa.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";function Z(r){r.selected=!r.selected}function K(r){s.LayerManager.removeLayerItem("artificialLayer")}function X(r,d,l){s.LayerManager.addLayerItem({id:r,name:d},l)}function I(r){s.map?G.GetMapPrintData(s.map):s.Message.info("地图组件未加载")}let p;function ee(r){p?(document.body.removeChild(p),p=null):(p=document.createElement("div"),p.className="maskDiv",document.body.appendChild(p),p.style.cssText=`
    position: absolute;
    top:0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index:199;
    background-image: radial-gradient(rgba(139, 138, 138, 0.219) 50%,
    rgba(65, 57, 57, 0.658) 70%,
    rgba(17, 16, 16, 1) 90%);`)}const T=Object.freeze(Object.defineProperty({__proto__:null,AddLayerItem:X,ControlSkyVisible:Z,MapLayerMask:ee,MapPrintData:I,RemoveLayerItem:K},Symbol.toStringTag,{value:"Module"})),ae=P({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:W}},setup(r,{expose:d}){d();const l=r,n=M(l.menuData),L=M(W.length),g=N(),o=new Map,h=M(o);function i(e){switch(e.type){case v.URL:window.open(e.path,"_blank");break;case v.Route:if(e.blank){if(e.path){let t=g.resolve({path:e.path});window.open(t.href,"_blank")}}else e.path&&g.push({path:e.path});break;case v.Action:const a=e.path;a&&T[a]&&T[a](e);break;case v.Widget:if(e.path){const t=s.LayoutMap.get(l.layoutID);if(!t){s.Message.warn(`LayoutID:${l.layoutID}的Manager不存在`);return}_(t,e),e.selected=!e.selected,h.value.set(e.name,e.selected)}else s.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function _(e,a){a.path&&(a.selected?(a.unload?(s.Logger().info("卸载widget: "+a.path),e.unloadWidget(a.path)):(s.Logger().info("隐藏widget: "+a.path),e.changeWidgetVisible(a.path,!1)),a.children&&a.children.forEach(t=>{t.selected&&(s.Logger().info(`递归控制${a.path}的子Widget:`+t.path),_(e,t),t.selected=!t.selected)})):e.isWidgetLoaded(a.path)?(s.Logger().info("显示widget: "+a.path),e.changeWidgetVisible(a.path,!0)):(e.loadWidget(a.path),s.Logger().info("加载Widget："+a.path)))}U(F.WidgetClosed,S);function S(e){const a=s.LayoutMap.get(l.layoutID);n.value.forEach(t=>{t.path===e&&(t.selected=!1,a.unloadWidget(t.path)),t.children&&t.children.forEach(w=>{w.path===e&&(w.selected=!1,a.unloadWidget(w.path))})})}const u=M();function $(e,a){const t=e.label;if(u.value)u.value.label!=t&&(u.value.state=!1),u.value=e,e.state=a;else{u.value=e,e.state=a;return}}function V(e){return h.value?.has(e.name)&&h.value.get(e.name)?"menuBarItem active":"menuBarItem"}const D={props:l,dataRef:n,itemLength:L,router:g,selectedMapList:o,selectedMap:h,menuClickHandler:i,controlMenuWidget:_,removeSelecte:S,currentItem:u,setShowState:$,getClass:V};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),te={class:"row gt-xs q-gutter-xs pageMenuContainer"};function oe(r,d,l,n,L,g){return c(),f("div",te,[(c(!0),f(y,null,x(n.dataRef,(o,h)=>(c(),f(y,{key:o.name},[o.children?(c(),C(H,{key:0,"model-value":o.state,"onUpdate:modelValue":i=>o.state=i,"transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:o.name,onMouseover:i=>n.setShowState(o,!0),class:E(n.getClass(o))},{default:b(()=>[k(O,{style:{"min-width":"100px"},onMouseover:i=>n.setShowState(o,!0),onMouseleave:i=>n.setShowState(o,!1)},{default:b(()=>[(c(!0),f(y,null,x(o.children,(i,_)=>(c(),f(y,{key:i.name},[Y((c(),C(Q,{clickable:"",onClick:S=>n.menuClickHandler(i)},{default:b(()=>[k(R,null,{default:b(()=>[q(J(i.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[A]]),k(j)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","onMouseover","class"])):(c(),C(z,{key:1,color:"black",flat:"",label:o.name,onClick:i=>n.menuClickHandler(o),onMouseover:i=>n.setShowState(o,!1),class:E(n.getClass(o))},null,8,["label","onClick","onMouseover","class"]))],64))),128))])}const ne=B(ae,[["render",oe],["__file","index.vue"]]),se="mapsceneLayout",re=P({__name:"MapToolMenuWidget",setup(r,{expose:d}){d();const l={layoutID:se,PageMenu:ne,get mainMenu(){return m}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function le(r,d,l,n,L,g){return c(),f("div",null,[k(n.PageMenu,{menuData:n.mainMenu,layoutID:n.layoutID},null,8,["menuData"])])}const Me=B(re,[["render",le],["__scopeId","data-v-4ce6a400"],["__file","MapToolMenuWidget.vue"]]);export{Me as default};
