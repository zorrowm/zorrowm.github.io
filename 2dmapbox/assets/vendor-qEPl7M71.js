import{a as oi,r as yd,m as uh,d as G1,f as VM,g as Os,j as pm,k as r4,t as KP,l as qM,q as HM,i as eu,w as Fi,u as Y0,v as QP,x as ek,y as tk,n as Ao,z as ik,c as Ve,b as Xn,A as W1,B as _r,o as ys,C as GM,h as tt,T as rk,D as Dd,E as Ul,G as nk,H as Ty,I as ok,p as Cy,J as sk,K as ak,L as xc,M as E1,N as Ku,O as a2,P as lk,Q as ck,R as uk,S as Ay,U as hk,V as mm,F as dk,W as P2,X as p9,Y as n4,Z as fk,_ as k2,e as WM,$ as ZM,a0 as pk,a1 as mk,a2 as gk}from"./@vue-exp-Cbz_CXqa.js";function _h(e,t,r,s){return Object.defineProperty(e,t,{get:r,set:s,enumerable:!0}),e}const Aa=oi(!1);let cb;function _k(e,t){const r=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(vivaldi)[\/]([\w.]+)/.exec(e)||/(chrome|crios)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(firefox|fxios)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(e)||[];return{browser:r[5]||r[3]||r[1]||"",version:r[4]||r[2]||"0",platform:t[0]||""}}function yk(e){return/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[]}const XM="ontouchstart"in window||window.navigator.maxTouchPoints>0;function vk(e){const t=e.toLowerCase(),r=yk(t),s=_k(t,r),l={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(l[s.browser]=!0,l.version=s.version,l.versionNumber=parseInt(s.version,10)),s.platform&&(l[s.platform]=!0);const d=l.android||l.ios||l.bb||l.blackberry||l.ipad||l.iphone||l.ipod||l.kindle||l.playbook||l.silk||l["windows phone"];if(d===!0||t.indexOf("mobile")!==-1?l.mobile=!0:l.desktop=!0,l["windows phone"]&&(l.winphone=!0,delete l["windows phone"]),l.edga||l.edgios||l.edg?(l.edge=!0,s.browser="edge"):l.crios?(l.chrome=!0,s.browser="chrome"):l.fxios&&(l.firefox=!0,s.browser="firefox"),(l.ipod||l.ipad||l.iphone)&&(l.ios=!0),l.vivaldi&&(s.browser="vivaldi",l.vivaldi=!0),(l.chrome||l.opr||l.safari||l.vivaldi||l.mobile===!0&&l.ios!==!0&&d!==!0)&&(l.webkit=!0),l.opr&&(s.browser="opera",l.opera=!0),l.safari&&(l.blackberry||l.bb?(s.browser="blackberry",l.blackberry=!0):l.playbook?(s.browser="playbook",l.playbook=!0):l.android?(s.browser="android",l.android=!0):l.kindle?(s.browser="kindle",l.kindle=!0):l.silk&&(s.browser="silk",l.silk=!0)),l.name=s.browser,l.platform=s.platform,t.indexOf("electron")!==-1)l.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)l.bex=!0;else{if(window.Capacitor!==void 0?(l.capacitor=!0,l.nativeMobile=!0,l.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(l.cordova=!0,l.nativeMobile=!0,l.nativeMobileWrapper="cordova"),Aa.value===!0&&(cb={is:{...l}}),XM===!0&&l.mac===!0&&(l.desktop===!0&&l.safari===!0||l.nativeMobile===!0&&l.android!==!0&&l.ios!==!0&&l.ipad!==!0)){delete l.mac,delete l.desktop;const y=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(l,{mobile:!0,ios:!0,platform:y,[y]:!0})}l.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete l.desktop,l.mobile=!0)}return l}const m9=navigator.userAgent||navigator.vendor||window.opera,xk={has:{touch:!1,webStorage:!1},within:{iframe:!1}},nn={userAgent:m9,is:vk(m9),has:{touch:XM},within:{iframe:window.self!==window.top}},R2={install(e){const{$q:t}=e;Aa.value===!0?(e.onSSRHydrated.push(()=>{Object.assign(t.platform,nn),Aa.value=!1}),t.platform=yd(this)):t.platform=this}};{let e;_h(nn.has,"webStorage",()=>{if(e!==void 0)return e;try{if(window.localStorage)return e=!0,!0}catch{}return e=!1,!1}),Object.assign(R2,nn),Aa.value===!0&&(Object.assign(R2,cb,xk),cb=null)}function lr(e){return uh(G1(e))}function Bm(e){return uh(e)}const Z1=(e,t)=>{const r=yd(e);for(const s in e)_h(t,s,()=>r[s],l=>{r[s]=l});return t},go={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(go,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch{}function ia(){}function YM(e){return e.button===0}function Pd(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function bk(e){if(e.path)return e.path;if(e.composedPath)return e.composedPath();const t=[];let r=e.target;for(;r;){if(t.push(r),r.tagName==="HTML")return t.push(document),t.push(window),t;r=r.parentElement}}function Qc(e){e.stopPropagation()}function Sa(e){e.cancelable!==!1&&e.preventDefault()}function Cn(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function u1(e,t){if(e===void 0||t===!0&&e.__dragPrevented===!0)return;const r=t===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",Sa,go.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",Sa,go.notPassiveCapture)};e.querySelectorAll("a, img").forEach(r)}function Ea(e,t,r){const s=`__q_${t}_evt`;e[s]=e[s]!==void 0?e[s].concat(r):r,r.forEach(l=>{l[0].addEventListener(l[1],e[l[2]],go[l[3]])})}function bc(e,t){const r=`__q_${t}_evt`;e[r]!==void 0&&(e[r].forEach(s=>{s[0].removeEventListener(s[1],e[s[2]],go[s[3]])}),e[r]=void 0)}function o4(e,t=250,r){let s=null;function l(){const d=arguments,y=()=>{s=null,e.apply(this,d)};s!==null&&clearTimeout(s),s=setTimeout(y,t)}return l.cancel=()=>{s!==null&&clearTimeout(s)},l}const X3=["sm","md","lg","xl"],{passive:g9}=go,wk=Z1({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:ia,setDebounce:ia,install({$q:e,onSSRHydrated:t}){if(e.screen=this,this.__installed===!0){e.config.screen!==void 0&&(e.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:r}=window,s=r||window,l=document.scrollingElement||document.documentElement,d=r===void 0||nn.is.mobile===!0?()=>[Math.max(window.innerWidth,l.clientWidth),Math.max(window.innerHeight,l.clientHeight)]:()=>[r.width*r.scale+window.innerWidth-l.clientWidth,r.height*r.scale+window.innerHeight-l.clientHeight],y=e.config.screen!==void 0&&e.config.screen.bodyClasses===!0;this.__update=V=>{const[X,J]=d();if(J!==this.height&&(this.height=J),X!==this.width)this.width=X;else if(V!==!0)return;let Z=this.sizes;this.gt.xs=X>=Z.sm,this.gt.sm=X>=Z.md,this.gt.md=X>=Z.lg,this.gt.lg=X>=Z.xl,this.lt.sm=X<Z.sm,this.lt.md=X<Z.md,this.lt.lg=X<Z.lg,this.lt.xl=X<Z.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,Z=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",Z!==this.name&&(y===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${Z}`)),this.name=Z)};let n,M={},P=16;this.setSizes=V=>{X3.forEach(X=>{V[X]!==void 0&&(M[X]=V[X])})},this.setDebounce=V=>{P=V};const L=()=>{const V=getComputedStyle(document.body);V.getPropertyValue("--q-size-sm")&&X3.forEach(X=>{this.sizes[X]=parseInt(V.getPropertyValue(`--q-size-${X}`),10)}),this.setSizes=X=>{X3.forEach(J=>{X[J]&&(this.sizes[J]=X[J])}),this.__update(!0)},this.setDebounce=X=>{n!==void 0&&s.removeEventListener("resize",n,g9),n=X>0?o4(this.__update,X):this.__update,s.addEventListener("resize",n,g9)},this.setDebounce(P),Object.keys(M).length!==0?(this.setSizes(M),M=void 0):this.__update(),y===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Aa.value===!0?t.push(L):L()}}),fs=Z1({isActive:!1,mode:!1},{__media:void 0,set(e){fs.mode=e,e==="auto"?(fs.__media===void 0&&(fs.__media=window.matchMedia("(prefers-color-scheme: dark)"),fs.__updateMedia=()=>{fs.set("auto")},fs.__media.addListener(fs.__updateMedia)),e=fs.__media.matches):fs.__media!==void 0&&(fs.__media.removeListener(fs.__updateMedia),fs.__media=void 0),fs.isActive=e===!0,document.body.classList.remove(`body--${e===!0?"light":"dark"}`),document.body.classList.add(`body--${e===!0?"dark":"light"}`)},toggle(){fs.set(fs.isActive===!1)},install({$q:e,ssrContext:t}){const{dark:r}=e.config;e.dark=this,this.__installed!==!0&&this.set(r!==void 0?r:!1)}});function Sk(e,t,r=document.body){if(typeof e!="string")throw new TypeError("Expected a string as propName");if(typeof t!="string")throw new TypeError("Expected a string as value");if(!(r instanceof Element))throw new TypeError("Expected a DOM element");r.style.setProperty(`--q-${e}`,t)}let JM=!1;function Mk(e){JM=e.isComposing===!0}function s4(e){return JM===!0||e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function tu(e,t){return s4(e)===!0?!1:[].concat(t).includes(e.keyCode)}function KM(e){if(e.ios===!0)return"ios";if(e.android===!0)return"android"}function Ek({is:e,has:t,within:r},s){const l=[e.desktop===!0?"desktop":"mobile",`${t.touch===!1?"no-":""}touch`];if(e.mobile===!0){const d=KM(e);d!==void 0&&l.push("platform-"+d)}if(e.nativeMobile===!0){const d=e.nativeMobileWrapper;l.push(d),l.push("native-mobile"),e.ios===!0&&(s[d]===void 0||s[d].iosStatusBarPadding!==!1)&&l.push("q-ios-padding")}else e.electron===!0?l.push("electron"):e.bex===!0&&l.push("bex");return r.iframe===!0&&l.push("within-iframe"),l}function Tk(){const{is:e}=nn,t=document.body.className,r=new Set(t.replace(/ {2}/g," ").split(" "));if(e.nativeMobile!==!0&&e.electron!==!0&&e.bex!==!0){if(e.desktop===!0)r.delete("mobile"),r.delete("platform-ios"),r.delete("platform-android"),r.add("desktop");else if(e.mobile===!0){r.delete("desktop"),r.add("mobile"),r.delete("platform-ios"),r.delete("platform-android");const l=KM(e);l!==void 0&&r.add(`platform-${l}`)}}nn.has.touch===!0&&(r.delete("no-touch"),r.add("touch")),nn.within.iframe===!0&&r.add("within-iframe");const s=Array.from(r).join(" ");t!==s&&(document.body.className=s)}function Ck(e){for(const t in e)Sk(t,e[t])}const Ak={install(e){if(this.__installed!==!0){if(Aa.value===!0)Tk();else{const{$q:t}=e;t.config.brand!==void 0&&Ck(t.config.brand);const r=Ek(nn,t.config);document.body.classList.add.apply(document.body.classList,r)}nn.is.ios===!0&&document.body.addEventListener("touchstart",ia),window.addEventListener("keydown",Mk,!0)}}},QM=()=>!0;function Ik(e){return typeof e=="string"&&e!==""&&e!=="/"&&e!=="#/"}function zk(e){return e.startsWith("#")===!0&&(e=e.substring(1)),e.startsWith("/")===!1&&(e="/"+e),e.endsWith("/")===!0&&(e=e.substring(0,e.length-1)),"#"+e}function Dk(e){if(e.backButtonExit===!1)return()=>!1;if(e.backButtonExit==="*")return QM;const t=["#/"];return Array.isArray(e.backButtonExit)===!0&&t.push(...e.backButtonExit.filter(Ik).map(zk)),()=>t.includes(window.location.hash)}const ub={__history:[],add:ia,remove:ia,install({$q:e}){if(this.__installed===!0)return;const{cordova:t,capacitor:r}=nn.is;if(t!==!0&&r!==!0)return;const s=e.config[t===!0?"cordova":"capacitor"];if(s!==void 0&&s.backButton===!1||r===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=y=>{y.condition===void 0&&(y.condition=QM),this.__history.push(y)},this.remove=y=>{const n=this.__history.indexOf(y);n>=0&&this.__history.splice(n,1)};const l=Dk(Object.assign({backButtonExit:!0},s)),d=()=>{if(this.__history.length){const y=this.__history[this.__history.length-1];y.condition()===!0&&(this.__history.pop(),y.handler())}else l()===!0?navigator.app.exitApp():window.history.back()};t===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",d,!1)}):window.Capacitor.Plugins.App.addListener("backButton",d)}},hb={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:e=>e?`Expand "${e}"`:"Expand",collapse:e=>e?`Collapse "${e}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:e=>e===1?"1 record selected.":(e===0?"No":e)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(e,t,r)=>e+"-"+t+" of "+r,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function _9(){const e=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof e=="string")return e.split(/[-_]/).map((t,r)=>r===0?t.toLowerCase():r>1||t.length<4?t.toUpperCase():t[0].toUpperCase()+t.slice(1).toLowerCase()).join("-")}const mc=Z1({__qLang:{}},{getLocale:_9,set(e=hb,t){const r={...e,rtl:e.rtl===!0,getLocale:_9};{if(r.set=mc.set,mc.__langConfig===void 0||mc.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",r.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",r.isoName)}Object.assign(mc.__qLang,r)}},install({$q:e,lang:t,ssrContext:r}){e.lang=mc.__qLang,mc.__langConfig=e.config.lang,this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(l=>l!=="set"&&l!=="getLocale")}}),this.set(t||hb))}}),Pk={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},L2=Z1({iconMapFn:null,__qIconSet:{}},{set(e,t){const r={...e};r.set=L2.set,Object.assign(L2.__qIconSet,r)},install({$q:e,iconSet:t,ssrContext:r}){e.config.iconMapFn!==void 0&&(this.iconMapFn=e.config.iconMapFn),e.iconSet=this.__qIconSet,_h(e,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(l=>l!=="set")}}),this.set(t||Pk))}}),eE="_q_",Fm="_q_l_",tE="_q_pc_",iE="_q_fo_",rE="_q_tabs_";function jo(){}const O2={};let nE=!1;function kk(){nE=!0}function l2(e,t){if(e===t)return!0;if(e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let r,s;if(e.constructor===Array){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(l2(e[s],t[s])!==!0)return!1;return!0}if(e.constructor===Map){if(e.size!==t.size)return!1;let d=e.entries();for(s=d.next();s.done!==!0;){if(t.has(s.value[0])!==!0)return!1;s=d.next()}for(d=e.entries(),s=d.next();s.done!==!0;){if(l2(s.value[1],t.get(s.value[0]))!==!0)return!1;s=d.next()}return!0}if(e.constructor===Set){if(e.size!==t.size)return!1;const d=e.entries();for(s=d.next();s.done!==!0;){if(t.has(s.value[0])!==!0)return!1;s=d.next()}return!0}if(e.buffer!=null&&e.buffer.constructor===ArrayBuffer){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const l=Object.keys(e).filter(d=>e[d]!==void 0);if(r=l.length,r!==Object.keys(t).filter(d=>t[d]!==void 0).length)return!1;for(s=r;s--!==0;){const d=l[s];if(l2(e[d],t[d])!==!0)return!1}return!0}return e!==e&&t!==t}function Ma(e){return e!==null&&typeof e=="object"&&Array.isArray(e)!==!0}function a4(e){return Object.prototype.toString.call(e)==="[object Date]"}function Rk(e){return Object.prototype.toString.call(e)==="[object RegExp]"}const y9=[R2,Ak,fs,wk,ub,mc,L2];function l4(e,t){const r=VM(e);r.config.globalProperties=t.config.globalProperties;const{reload:s,...l}=t._context;return Object.assign(r._context,l),r}function v9(e,t){t.forEach(r=>{r.install(e),r.__installed=!0})}function Lk(e,t,r){e.config.globalProperties.$q=r.$q,e.provide(eE,r.$q),v9(r,y9),t.components!==void 0&&Object.values(t.components).forEach(s=>{Ma(s)===!0&&s.name!==void 0&&e.component(s.name,s)}),t.directives!==void 0&&Object.values(t.directives).forEach(s=>{Ma(s)===!0&&s.name!==void 0&&e.directive(s.name,s)}),t.plugins!==void 0&&v9(r,Object.values(t.plugins).filter(s=>typeof s.install=="function"&&y9.includes(s)===!1)),Aa.value===!0&&(r.$q.onSSRHydrated=()=>{r.onSSRHydrated.forEach(s=>{s()}),r.$q.onSSRHydrated=()=>{}})}const Ok=function(e,t={}){const r={version:"2.17.4"};nE===!1?(t.config!==void 0&&Object.assign(O2,t.config),r.config={...O2},kk()):r.config=t.config||{},Lk(e,t,{parentApp:e,$q:r,lang:t.lang,iconSet:t.iconSet,onSSRHydrated:[]})},coe={name:"Quasar",version:"2.17.4",install:Ok,lang:mc,iconSet:L2};var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oE(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return e[s]}})}),r}var Bk=Error,Fk=EvalError,Nk=RangeError,$k=ReferenceError,sE=SyntaxError,$m=TypeError,jk=URIError,Uk=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),s=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var l=42;t[r]=l;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var d=Object.getOwnPropertySymbols(t);if(d.length!==1||d[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var y=Object.getOwnPropertyDescriptor(t,r);if(y.value!==l||y.enumerable!==!0)return!1}return!0},x9=typeof Symbol<"u"&&Symbol,Vk=Uk,qk=function(){return typeof x9!="function"||typeof Symbol!="function"||typeof x9("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Vk()},Y3={__proto__:null,foo:{}},Hk=Object,Gk=function(){return{__proto__:Y3}.foo===Y3.foo&&!(Y3 instanceof Hk)},Wk="Function.prototype.bind called on incompatible ",Zk=Object.prototype.toString,Xk=Math.max,Yk="[object Function]",b9=function(t,r){for(var s=[],l=0;l<t.length;l+=1)s[l]=t[l];for(var d=0;d<r.length;d+=1)s[d+t.length]=r[d];return s},Jk=function(t,r){for(var s=[],l=r,d=0;l<t.length;l+=1,d+=1)s[d]=t[l];return s},Kk=function(e,t){for(var r="",s=0;s<e.length;s+=1)r+=e[s],s+1<e.length&&(r+=t);return r},Qk=function(t){var r=this;if(typeof r!="function"||Zk.apply(r)!==Yk)throw new TypeError(Wk+r);for(var s=Jk(arguments,1),l,d=function(){if(this instanceof l){var L=r.apply(this,b9(s,arguments));return Object(L)===L?L:this}return r.apply(t,b9(s,arguments))},y=Xk(0,r.length-s.length),n=[],M=0;M<y;M++)n[M]="$"+M;if(l=Function("binder","return function ("+Kk(n,",")+"){ return binder.apply(this,arguments); }")(d),r.prototype){var P=function(){};P.prototype=r.prototype,l.prototype=new P,P.prototype=null}return l},eR=Qk,c4=Function.prototype.bind||eR,tR=Function.prototype.call,iR=Object.prototype.hasOwnProperty,rR=c4,nR=rR.call(tR,iR),Ur,oR=Bk,sR=Fk,aR=Nk,lR=$k,T1=sE,h1=$m,cR=jk,aE=Function,J3=function(e){try{return aE('"use strict"; return ('+e+").constructor;")()}catch{}},wd=Object.getOwnPropertyDescriptor;if(wd)try{wd({},"")}catch{wd=null}var K3=function(){throw new h1},uR=wd?function(){try{return arguments.callee,K3}catch{try{return wd(arguments,"callee").get}catch{return K3}}}():K3,Nf=qk(),hR=Gk(),No=Object.getPrototypeOf||(hR?function(e){return e.__proto__}:null),Qf={},dR=typeof Uint8Array>"u"||!No?Ur:No(Uint8Array),Sd={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ur:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ur:ArrayBuffer,"%ArrayIteratorPrototype%":Nf&&No?No([][Symbol.iterator]()):Ur,"%AsyncFromSyncIteratorPrototype%":Ur,"%AsyncFunction%":Qf,"%AsyncGenerator%":Qf,"%AsyncGeneratorFunction%":Qf,"%AsyncIteratorPrototype%":Qf,"%Atomics%":typeof Atomics>"u"?Ur:Atomics,"%BigInt%":typeof BigInt>"u"?Ur:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ur:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ur:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ur:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":oR,"%eval%":eval,"%EvalError%":sR,"%Float32Array%":typeof Float32Array>"u"?Ur:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ur:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ur:FinalizationRegistry,"%Function%":aE,"%GeneratorFunction%":Qf,"%Int8Array%":typeof Int8Array>"u"?Ur:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ur:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ur:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Nf&&No?No(No([][Symbol.iterator]())):Ur,"%JSON%":typeof JSON=="object"?JSON:Ur,"%Map%":typeof Map>"u"?Ur:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Nf||!No?Ur:No(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ur:Promise,"%Proxy%":typeof Proxy>"u"?Ur:Proxy,"%RangeError%":aR,"%ReferenceError%":lR,"%Reflect%":typeof Reflect>"u"?Ur:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ur:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Nf||!No?Ur:No(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ur:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Nf&&No?No(""[Symbol.iterator]()):Ur,"%Symbol%":Nf?Symbol:Ur,"%SyntaxError%":T1,"%ThrowTypeError%":uR,"%TypedArray%":dR,"%TypeError%":h1,"%Uint8Array%":typeof Uint8Array>"u"?Ur:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ur:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ur:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ur:Uint32Array,"%URIError%":cR,"%WeakMap%":typeof WeakMap>"u"?Ur:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ur:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ur:WeakSet};if(No)try{null.error}catch(e){var fR=No(No(e));Sd["%Error.prototype%"]=fR}var pR=function e(t){var r;if(t==="%AsyncFunction%")r=J3("async function () {}");else if(t==="%GeneratorFunction%")r=J3("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=J3("async function* () {}");else if(t==="%AsyncGenerator%"){var s=e("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if(t==="%AsyncIteratorPrototype%"){var l=e("%AsyncGenerator%");l&&No&&(r=No(l.prototype))}return Sd[t]=r,r},w9={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jm=c4,B2=nR,mR=jm.call(Function.call,Array.prototype.concat),gR=jm.call(Function.apply,Array.prototype.splice),S9=jm.call(Function.call,String.prototype.replace),F2=jm.call(Function.call,String.prototype.slice),_R=jm.call(Function.call,RegExp.prototype.exec),yR=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,vR=/\\(\\)?/g,xR=function(t){var r=F2(t,0,1),s=F2(t,-1);if(r==="%"&&s!=="%")throw new T1("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&r!=="%")throw new T1("invalid intrinsic syntax, expected opening `%`");var l=[];return S9(t,yR,function(d,y,n,M){l[l.length]=n?S9(M,vR,"$1"):y||d}),l},bR=function(t,r){var s=t,l;if(B2(w9,s)&&(l=w9[s],s="%"+l[0]+"%"),B2(Sd,s)){var d=Sd[s];if(d===Qf&&(d=pR(s)),typeof d>"u"&&!r)throw new h1("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:l,name:s,value:d}}throw new T1("intrinsic "+t+" does not exist!")},X1=function(t,r){if(typeof t!="string"||t.length===0)throw new h1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new h1('"allowMissing" argument must be a boolean');if(_R(/^%?[^%]*%?$/,t)===null)throw new T1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=xR(t),l=s.length>0?s[0]:"",d=bR("%"+l+"%",r),y=d.name,n=d.value,M=!1,P=d.alias;P&&(l=P[0],gR(s,mR([0,1],P)));for(var L=1,V=!0;L<s.length;L+=1){var X=s[L],J=F2(X,0,1),Z=F2(X,-1);if((J==='"'||J==="'"||J==="`"||Z==='"'||Z==="'"||Z==="`")&&J!==Z)throw new T1("property names with quotes must have matching quotes");if((X==="constructor"||!V)&&(M=!0),l+="."+X,y="%"+l+"%",B2(Sd,y))n=Sd[y];else if(n!=null){if(!(X in n)){if(!r)throw new h1("base intrinsic for "+t+" exists, but the property is not available.");return}if(wd&&L+1>=s.length){var ie=wd(n,X);V=!!ie,V&&"get"in ie&&!("originalValue"in ie.get)?n=ie.get:n=n[X]}else V=B2(n,X),n=n[X];V&&!M&&(Sd[y]=n)}}return n},lE={exports:{}},Q3,M9;function u4(){if(M9)return Q3;M9=1;var e=X1,t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Q3=t,Q3}var wR=X1,c2=wR("%Object.getOwnPropertyDescriptor%",!0);if(c2)try{c2([],"length")}catch{c2=null}var cE=c2,E9=u4(),SR=sE,$f=$m,T9=cE,MR=function(t,r,s){if(!t||typeof t!="object"&&typeof t!="function")throw new $f("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new $f("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $f("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $f("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $f("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $f("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,y=arguments.length>5?arguments[5]:null,n=arguments.length>6?arguments[6]:!1,M=!!T9&&T9(t,r);if(E9)E9(t,r,{configurable:y===null&&M?M.configurable:!y,enumerable:l===null&&M?M.enumerable:!l,value:s,writable:d===null&&M?M.writable:!d});else if(n||!l&&!d&&!y)t[r]=s;else throw new SR("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},db=u4(),uE=function(){return!!db};uE.hasArrayLengthDefineBug=function(){if(!db)return null;try{return db([],"length",{value:1}).length!==1}catch{return!0}};var ER=uE,TR=X1,C9=MR,CR=ER(),A9=cE,I9=$m,AR=TR("%Math.floor%"),IR=function(t,r){if(typeof t!="function")throw new I9("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||AR(r)!==r)throw new I9("`length` must be a positive 32-bit integer");var s=arguments.length>2&&!!arguments[2],l=!0,d=!0;if("length"in t&&A9){var y=A9(t,"length");y&&!y.configurable&&(l=!1),y&&!y.writable&&(d=!1)}return(l||d||!s)&&(CR?C9(t,"length",r,!0,!0):C9(t,"length",r)),t};(function(e){var t=c4,r=X1,s=IR,l=$m,d=r("%Function.prototype.apply%"),y=r("%Function.prototype.call%"),n=r("%Reflect.apply%",!0)||t.call(y,d),M=u4(),P=r("%Math.max%");e.exports=function(X){if(typeof X!="function")throw new l("a function is required");var J=n(t,y,arguments);return s(J,1+P(0,X.length-(arguments.length-1)),!0)};var L=function(){return n(t,d,arguments)};M?M(e.exports,"apply",{value:L}):e.exports.apply=L})(lE);var zR=lE.exports,hE=X1,dE=zR,DR=dE(hE("String.prototype.indexOf")),PR=function(t,r){var s=hE(t,!!r);return typeof s=="function"&&DR(t,".prototype.")>-1?dE(s):s};const kR={},RR=Object.freeze(Object.defineProperty({__proto__:null,default:kR},Symbol.toStringTag,{value:"Module"})),LR=oE(RR);var h4=typeof Map=="function"&&Map.prototype,ex=Object.getOwnPropertyDescriptor&&h4?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,N2=h4&&ex&&typeof ex.get=="function"?ex.get:null,z9=h4&&Map.prototype.forEach,d4=typeof Set=="function"&&Set.prototype,tx=Object.getOwnPropertyDescriptor&&d4?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,$2=d4&&tx&&typeof tx.get=="function"?tx.get:null,D9=d4&&Set.prototype.forEach,OR=typeof WeakMap=="function"&&WeakMap.prototype,J0=OR?WeakMap.prototype.has:null,BR=typeof WeakSet=="function"&&WeakSet.prototype,K0=BR?WeakSet.prototype.has:null,FR=typeof WeakRef=="function"&&WeakRef.prototype,P9=FR?WeakRef.prototype.deref:null,NR=Boolean.prototype.valueOf,$R=Object.prototype.toString,jR=Function.prototype.toString,UR=String.prototype.match,f4=String.prototype.slice,th=String.prototype.replace,VR=String.prototype.toUpperCase,k9=String.prototype.toLowerCase,fE=RegExp.prototype.test,R9=Array.prototype.concat,gc=Array.prototype.join,qR=Array.prototype.slice,L9=Math.floor,fb=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ix=Object.getOwnPropertySymbols,pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,C1=typeof Symbol=="function"&&typeof Symbol.iterator=="object",vs=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===C1||!0)?Symbol.toStringTag:null,pE=Object.prototype.propertyIsEnumerable,O9=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function B9(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||fE.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var s=e<0?-L9(-e):L9(e);if(s!==e){var l=String(s),d=f4.call(t,l.length+1);return th.call(l,r,"$&_")+"."+th.call(th.call(d,/([0-9]{3})/g,"$&_"),/_$/,"")}}return th.call(t,r,"$&_")}var mb=LR,F9=mb.custom,N9=_E(F9)?F9:null,mE={__proto__:null,double:'"',single:"'"},HR={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},GR=function e(t,r,s,l){var d=r||{};if(Jc(d,"quoteStyle")&&!Jc(mE,d.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Jc(d,"maxStringLength")&&(typeof d.maxStringLength=="number"?d.maxStringLength<0&&d.maxStringLength!==1/0:d.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var y=Jc(d,"customInspect")?d.customInspect:!0;if(typeof y!="boolean"&&y!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Jc(d,"indent")&&d.indent!==null&&d.indent!=="	"&&!(parseInt(d.indent,10)===d.indent&&d.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Jc(d,"numericSeparator")&&typeof d.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var n=d.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return vE(t,d);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var M=String(t);return n?B9(t,M):M}if(typeof t=="bigint"){var P=String(t)+"n";return n?B9(t,P):P}var L=typeof d.depth>"u"?5:d.depth;if(typeof s>"u"&&(s=0),s>=L&&L>0&&typeof t=="object")return gb(t)?"[Array]":"[Object]";var V=uL(d,s);if(typeof l>"u")l=[];else if(yE(l,t)>=0)return"[Circular]";function X(vt,Be,Ke){if(Be&&(l=qR.call(l),l.push(Be)),Ke){var xt={depth:d.depth};return Jc(d,"quoteStyle")&&(xt.quoteStyle=d.quoteStyle),e(vt,xt,s+1,l)}return e(vt,d,s+1,l)}if(typeof t=="function"&&!$9(t)){var J=tL(t),Z=D_(t,X);return"[Function"+(J?": "+J:" (anonymous)")+"]"+(Z.length>0?" { "+gc.call(Z,", ")+" }":"")}if(_E(t)){var ie=C1?th.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):pb.call(t);return typeof t=="object"&&!C1?k0(ie):ie}if(aL(t)){for(var ae="<"+k9.call(String(t.nodeName)),de=t.attributes||[],fe=0;fe<de.length;fe++)ae+=" "+de[fe].name+"="+gE(WR(de[fe].value),"double",d);return ae+=">",t.childNodes&&t.childNodes.length&&(ae+="..."),ae+="</"+k9.call(String(t.nodeName))+">",ae}if(gb(t)){if(t.length===0)return"[]";var le=D_(t,X);return V&&!cL(le)?"["+_b(le,V)+"]":"[ "+gc.call(le,", ")+" ]"}if(XR(t)){var he=D_(t,X);return!("cause"in Error.prototype)&&"cause"in t&&!pE.call(t,"cause")?"{ ["+String(t)+"] "+gc.call(R9.call("[cause]: "+X(t.cause),he),", ")+" }":he.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+gc.call(he,", ")+" }"}if(typeof t=="object"&&y){if(N9&&typeof t[N9]=="function"&&mb)return mb(t,{depth:L-s});if(y!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(iL(t)){var Ce=[];return z9&&z9.call(t,function(vt,Be){Ce.push(X(Be,t,!0)+" => "+X(vt,t))}),j9("Map",N2.call(t),Ce,V)}if(oL(t)){var Le=[];return D9&&D9.call(t,function(vt){Le.push(X(vt,t))}),j9("Set",$2.call(t),Le,V)}if(rL(t))return rx("WeakMap");if(sL(t))return rx("WeakSet");if(nL(t))return rx("WeakRef");if(JR(t))return k0(X(Number(t)));if(QR(t))return k0(X(fb.call(t)));if(KR(t))return k0(NR.call(t));if(YR(t))return k0(X(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof At<"u"&&t===At)return"{ [object globalThis] }";if(!ZR(t)&&!$9(t)){var Ae=D_(t,X),We=O9?O9(t)===Object.prototype:t instanceof Object||t.constructor===Object,Qe=t instanceof Object?"":"null prototype",ze=!We&&vs&&Object(t)===t&&vs in t?f4.call(yh(t),8,-1):Qe?"Object":"",Ze=We||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",Ue=Ze+(ze||Qe?"["+gc.call(R9.call([],ze||[],Qe||[]),": ")+"] ":"");return Ae.length===0?Ue+"{}":V?Ue+"{"+_b(Ae,V)+"}":Ue+"{ "+gc.call(Ae,", ")+" }"}return String(t)};function gE(e,t,r){var s=r.quoteStyle||t,l=mE[s];return l+e+l}function WR(e){return th.call(String(e),/"/g,"&quot;")}function gb(e){return yh(e)==="[object Array]"&&(!vs||!(typeof e=="object"&&vs in e))}function ZR(e){return yh(e)==="[object Date]"&&(!vs||!(typeof e=="object"&&vs in e))}function $9(e){return yh(e)==="[object RegExp]"&&(!vs||!(typeof e=="object"&&vs in e))}function XR(e){return yh(e)==="[object Error]"&&(!vs||!(typeof e=="object"&&vs in e))}function YR(e){return yh(e)==="[object String]"&&(!vs||!(typeof e=="object"&&vs in e))}function JR(e){return yh(e)==="[object Number]"&&(!vs||!(typeof e=="object"&&vs in e))}function KR(e){return yh(e)==="[object Boolean]"&&(!vs||!(typeof e=="object"&&vs in e))}function _E(e){if(C1)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!pb)return!1;try{return pb.call(e),!0}catch{}return!1}function QR(e){if(!e||typeof e!="object"||!fb)return!1;try{return fb.call(e),!0}catch{}return!1}var eL=Object.prototype.hasOwnProperty||function(e){return e in this};function Jc(e,t){return eL.call(e,t)}function yh(e){return $R.call(e)}function tL(e){if(e.name)return e.name;var t=UR.call(jR.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function yE(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1}function iL(e){if(!N2||!e||typeof e!="object")return!1;try{N2.call(e);try{$2.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function rL(e){if(!J0||!e||typeof e!="object")return!1;try{J0.call(e,J0);try{K0.call(e,K0)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function nL(e){if(!P9||!e||typeof e!="object")return!1;try{return P9.call(e),!0}catch{}return!1}function oL(e){if(!$2||!e||typeof e!="object")return!1;try{$2.call(e);try{N2.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function sL(e){if(!K0||!e||typeof e!="object")return!1;try{K0.call(e,K0);try{J0.call(e,J0)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function aL(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function vE(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,s="... "+r+" more character"+(r>1?"s":"");return vE(f4.call(e,0,t.maxStringLength),t)+s}var l=HR[t.quoteStyle||"single"];l.lastIndex=0;var d=th.call(th.call(e,l,"\\$1"),/[\x00-\x1f]/g,lL);return gE(d,"single",t)}function lL(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+VR.call(t.toString(16))}function k0(e){return"Object("+e+")"}function rx(e){return e+" { ? }"}function j9(e,t,r,s){var l=s?_b(r,s):gc.call(r,", ");return e+" ("+t+") {"+l+"}"}function cL(e){for(var t=0;t<e.length;t++)if(yE(e[t],`
`)>=0)return!1;return!0}function uL(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=gc.call(Array(e.indent+1)," ");else return null;return{base:r,prev:gc.call(Array(t+1),r)}}function _b(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+gc.call(e,","+r)+`
`+t.prev}function D_(e,t){var r=gb(e),s=[];if(r){s.length=e.length;for(var l=0;l<e.length;l++)s[l]=Jc(e,l)?t(e[l],e):""}var d=typeof ix=="function"?ix(e):[],y;if(C1){y={};for(var n=0;n<d.length;n++)y["$"+d[n]]=d[n]}for(var M in e)Jc(e,M)&&(r&&String(Number(M))===M&&M<e.length||C1&&y["$"+M]instanceof Symbol||(fE.call(/[^\w$]/,M)?s.push(t(M,e)+": "+t(e[M],e)):s.push(M+": "+t(e[M],e))));if(typeof ix=="function")for(var P=0;P<d.length;P++)pE.call(e,d[P])&&s.push("["+t(d[P])+"]: "+t(e[d[P]],e));return s}var xE=X1,Y1=PR,hL=GR,dL=$m,P_=xE("%WeakMap%",!0),k_=xE("%Map%",!0),fL=Y1("WeakMap.prototype.get",!0),pL=Y1("WeakMap.prototype.set",!0),mL=Y1("WeakMap.prototype.has",!0),gL=Y1("Map.prototype.get",!0),_L=Y1("Map.prototype.set",!0),yL=Y1("Map.prototype.has",!0),p4=function(e,t){for(var r=e,s;(s=r.next)!==null;r=s)if(s.key===t)return r.next=s.next,s.next=e.next,e.next=s,s},vL=function(e,t){var r=p4(e,t);return r&&r.value},xL=function(e,t,r){var s=p4(e,t);s?s.value=r:e.next={key:t,next:e.next,value:r}},bL=function(e,t){return!!p4(e,t)},wL=function(){var t,r,s,l={assert:function(d){if(!l.has(d))throw new dL("Side channel does not contain "+hL(d))},get:function(d){if(P_&&d&&(typeof d=="object"||typeof d=="function")){if(t)return fL(t,d)}else if(k_){if(r)return gL(r,d)}else if(s)return vL(s,d)},has:function(d){if(P_&&d&&(typeof d=="object"||typeof d=="function")){if(t)return mL(t,d)}else if(k_){if(r)return yL(r,d)}else if(s)return bL(s,d);return!1},set:function(d,y){P_&&d&&(typeof d=="object"||typeof d=="function")?(t||(t=new P_),pL(t,d,y)):k_?(r||(r=new k_),_L(r,d,y)):(s||(s={key:{},next:null}),xL(s,d,y))}};return l},SL=String.prototype.replace,ML=/%20/g,nx={RFC1738:"RFC1738",RFC3986:"RFC3986"},m4={default:nx.RFC3986,formatters:{RFC1738:function(e){return SL.call(e,ML,"+")},RFC3986:function(e){return String(e)}},RFC1738:nx.RFC1738,RFC3986:nx.RFC3986},EL=m4,ox=Object.prototype.hasOwnProperty,_d=Array.isArray,uc=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),TL=function(t){for(;t.length>1;){var r=t.pop(),s=r.obj[r.prop];if(_d(s)){for(var l=[],d=0;d<s.length;++d)typeof s[d]<"u"&&l.push(s[d]);r.obj[r.prop]=l}}},bE=function(t,r){for(var s=r&&r.plainObjects?{__proto__:null}:{},l=0;l<t.length;++l)typeof t[l]<"u"&&(s[l]=t[l]);return s},CL=function e(t,r,s){if(!r)return t;if(typeof r!="object"&&typeof r!="function"){if(_d(t))t.push(r);else if(t&&typeof t=="object")(s&&(s.plainObjects||s.allowPrototypes)||!ox.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var l=t;return _d(t)&&!_d(r)&&(l=bE(t,s)),_d(t)&&_d(r)?(r.forEach(function(d,y){if(ox.call(t,y)){var n=t[y];n&&typeof n=="object"&&d&&typeof d=="object"?t[y]=e(n,d,s):t.push(d)}else t[y]=d}),t):Object.keys(r).reduce(function(d,y){var n=r[y];return ox.call(d,y)?d[y]=e(d[y],n,s):d[y]=n,d},l)},AL=function(t,r){return Object.keys(r).reduce(function(s,l){return s[l]=r[l],s},t)},IL=function(e,t,r){var s=e.replace(/\+/g," ");if(r==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},sx=1024,zL=function(t,r,s,l,d){if(t.length===0)return t;var y=t;if(typeof t=="symbol"?y=Symbol.prototype.toString.call(t):typeof t!="string"&&(y=String(t)),s==="iso-8859-1")return escape(y).replace(/%u[0-9a-f]{4}/gi,function(J){return"%26%23"+parseInt(J.slice(2),16)+"%3B"});for(var n="",M=0;M<y.length;M+=sx){for(var P=y.length>=sx?y.slice(M,M+sx):y,L=[],V=0;V<P.length;++V){var X=P.charCodeAt(V);if(X===45||X===46||X===95||X===126||X>=48&&X<=57||X>=65&&X<=90||X>=97&&X<=122||d===EL.RFC1738&&(X===40||X===41)){L[L.length]=P.charAt(V);continue}if(X<128){L[L.length]=uc[X];continue}if(X<2048){L[L.length]=uc[192|X>>6]+uc[128|X&63];continue}if(X<55296||X>=57344){L[L.length]=uc[224|X>>12]+uc[128|X>>6&63]+uc[128|X&63];continue}V+=1,X=65536+((X&1023)<<10|P.charCodeAt(V)&1023),L[L.length]=uc[240|X>>18]+uc[128|X>>12&63]+uc[128|X>>6&63]+uc[128|X&63]}n+=L.join("")}return n},DL=function(t){for(var r=[{obj:{o:t},prop:"o"}],s=[],l=0;l<r.length;++l)for(var d=r[l],y=d.obj[d.prop],n=Object.keys(y),M=0;M<n.length;++M){var P=n[M],L=y[P];typeof L=="object"&&L!==null&&s.indexOf(L)===-1&&(r.push({obj:y,prop:P}),s.push(L))}return TL(r),t},PL=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},kL=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},RL=function(t,r){return[].concat(t,r)},LL=function(t,r){if(_d(t)){for(var s=[],l=0;l<t.length;l+=1)s.push(r(t[l]));return s}return r(t)},wE={arrayToObject:bE,assign:AL,combine:RL,compact:DL,decode:IL,encode:zL,isBuffer:kL,isRegExp:PL,maybeMap:LL,merge:CL},SE=wL,u2=wE,Q0=m4,OL=Object.prototype.hasOwnProperty,ME={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},pc=Array.isArray,BL=Array.prototype.push,EE=function(e,t){BL.apply(e,pc(t)?t:[t])},FL=Date.prototype.toISOString,U9=Q0.default,Co={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:u2.encode,encodeValuesOnly:!1,filter:void 0,format:U9,formatter:Q0.formatters[U9],indices:!1,serializeDate:function(t){return FL.call(t)},skipNulls:!1,strictNullHandling:!1},NL=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},ax={},$L=function e(t,r,s,l,d,y,n,M,P,L,V,X,J,Z,ie,ae,de,fe){for(var le=t,he=fe,Ce=0,Le=!1;(he=he.get(ax))!==void 0&&!Le;){var Ae=he.get(t);if(Ce+=1,typeof Ae<"u"){if(Ae===Ce)throw new RangeError("Cyclic object value");Le=!0}typeof he.get(ax)>"u"&&(Ce=0)}if(typeof L=="function"?le=L(r,le):le instanceof Date?le=J(le):s==="comma"&&pc(le)&&(le=u2.maybeMap(le,function(bi){return bi instanceof Date?J(bi):bi})),le===null){if(y)return P&&!ae?P(r,Co.encoder,de,"key",Z):r;le=""}if(NL(le)||u2.isBuffer(le)){if(P){var We=ae?r:P(r,Co.encoder,de,"key",Z);return[ie(We)+"="+ie(P(le,Co.encoder,de,"value",Z))]}return[ie(r)+"="+ie(String(le))]}var Qe=[];if(typeof le>"u")return Qe;var ze;if(s==="comma"&&pc(le))ae&&P&&(le=u2.maybeMap(le,P)),ze=[{value:le.length>0?le.join(",")||null:void 0}];else if(pc(L))ze=L;else{var Ze=Object.keys(le);ze=V?Ze.sort(V):Ze}var Ue=M?String(r).replace(/\./g,"%2E"):String(r),vt=l&&pc(le)&&le.length===1?Ue+"[]":Ue;if(d&&pc(le)&&le.length===0)return vt+"[]";for(var Be=0;Be<ze.length;++Be){var Ke=ze[Be],xt=typeof Ke=="object"&&Ke&&typeof Ke.value<"u"?Ke.value:le[Ke];if(!(n&&xt===null)){var yt=X&&M?String(Ke).replace(/\./g,"%2E"):String(Ke),Dt=pc(le)?typeof s=="function"?s(vt,yt):vt:vt+(X?"."+yt:"["+yt+"]");fe.set(t,Ce);var bt=SE();bt.set(ax,fe),EE(Qe,e(xt,Dt,s,l,d,y,n,M,s==="comma"&&ae&&pc(le)?null:P,L,V,X,J,Z,ie,ae,de,bt))}}return Qe},jL=function(t){if(!t)return Co;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||Co.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=Q0.default;if(typeof t.format<"u"){if(!OL.call(Q0.formatters,t.format))throw new TypeError("Unknown format option provided.");s=t.format}var l=Q0.formatters[s],d=Co.filter;(typeof t.filter=="function"||pc(t.filter))&&(d=t.filter);var y;if(t.arrayFormat in ME?y=t.arrayFormat:"indices"in t?y=t.indices?"indices":"repeat":y=Co.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var n=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Co.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Co.addQueryPrefix,allowDots:n,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Co.allowEmptyArrays,arrayFormat:y,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Co.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Co.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Co.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Co.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Co.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Co.encodeValuesOnly,filter:d,format:s,formatter:l,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Co.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Co.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Co.strictNullHandling}},UL=function(e,t){var r=e,s=jL(t),l,d;typeof s.filter=="function"?(d=s.filter,r=d("",r)):pc(s.filter)&&(d=s.filter,l=d);var y=[];if(typeof r!="object"||r===null)return"";var n=ME[s.arrayFormat],M=n==="comma"&&s.commaRoundTrip;l||(l=Object.keys(r)),s.sort&&l.sort(s.sort);for(var P=SE(),L=0;L<l.length;++L){var V=l[L],X=r[V];s.skipNulls&&X===null||EE(y,$L(X,V,n,M,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,P))}var J=y.join(s.delimiter),Z=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?Z+="utf8=%26%2310003%3B&":Z+="utf8=%E2%9C%93&"),J.length>0?Z+J:""},A1=wE,yb=Object.prototype.hasOwnProperty,VL=Array.isArray,eo={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:A1.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},qL=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},TE=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},HL="utf8=%26%2310003%3B",GL="utf8=%E2%9C%93",WL=function(t,r){var s={__proto__:null},l=r.ignoreQueryPrefix?t.replace(/^\?/,""):t;l=l.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var d=r.parameterLimit===1/0?void 0:r.parameterLimit,y=l.split(r.delimiter,d),n=-1,M,P=r.charset;if(r.charsetSentinel)for(M=0;M<y.length;++M)y[M].indexOf("utf8=")===0&&(y[M]===GL?P="utf-8":y[M]===HL&&(P="iso-8859-1"),n=M,M=y.length);for(M=0;M<y.length;++M)if(M!==n){var L=y[M],V=L.indexOf("]="),X=V===-1?L.indexOf("="):V+1,J,Z;X===-1?(J=r.decoder(L,eo.decoder,P,"key"),Z=r.strictNullHandling?null:""):(J=r.decoder(L.slice(0,X),eo.decoder,P,"key"),Z=A1.maybeMap(TE(L.slice(X+1),r),function(ae){return r.decoder(ae,eo.decoder,P,"value")})),Z&&r.interpretNumericEntities&&P==="iso-8859-1"&&(Z=qL(String(Z))),L.indexOf("[]=")>-1&&(Z=VL(Z)?[Z]:Z);var ie=yb.call(s,J);ie&&r.duplicates==="combine"?s[J]=A1.combine(s[J],Z):(!ie||r.duplicates==="last")&&(s[J]=Z)}return s},ZL=function(e,t,r,s){for(var l=s?t:TE(t,r),d=e.length-1;d>=0;--d){var y,n=e[d];if(n==="[]"&&r.parseArrays)y=r.allowEmptyArrays&&(l===""||r.strictNullHandling&&l===null)?[]:[].concat(l);else{y=r.plainObjects?{__proto__:null}:{};var M=n.charAt(0)==="["&&n.charAt(n.length-1)==="]"?n.slice(1,-1):n,P=r.decodeDotInKeys?M.replace(/%2E/g,"."):M,L=parseInt(P,10);!r.parseArrays&&P===""?y={0:l}:!isNaN(L)&&n!==P&&String(L)===P&&L>=0&&r.parseArrays&&L<=r.arrayLimit?(y=[],y[L]=l):P!=="__proto__"&&(y[P]=l)}l=y}return l},XL=function(t,r,s,l){if(t){var d=s.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,y=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,M=s.depth>0&&y.exec(d),P=M?d.slice(0,M.index):d,L=[];if(P){if(!s.plainObjects&&yb.call(Object.prototype,P)&&!s.allowPrototypes)return;L.push(P)}for(var V=0;s.depth>0&&(M=n.exec(d))!==null&&V<s.depth;){if(V+=1,!s.plainObjects&&yb.call(Object.prototype,M[1].slice(1,-1))&&!s.allowPrototypes)return;L.push(M[1])}if(M){if(s.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+s.depth+" and strictDepth is true");L.push("["+d.slice(M.index)+"]")}return ZL(L,r,s,l)}},YL=function(t){if(!t)return eo;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?eo.charset:t.charset,s=typeof t.duplicates>"u"?eo.duplicates:t.duplicates;if(s!=="combine"&&s!=="first"&&s!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var l=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:eo.allowDots:!!t.allowDots;return{allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:eo.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:eo.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:eo.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:eo.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:eo.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:eo.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:eo.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:eo.decoder,delimiter:typeof t.delimiter=="string"||A1.isRegExp(t.delimiter)?t.delimiter:eo.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:eo.depth,duplicates:s,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:eo.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:eo.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:eo.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:eo.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:eo.strictNullHandling}},JL=function(e,t){var r=YL(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?{__proto__:null}:{};for(var s=typeof e=="string"?WL(e,r):e,l=r.plainObjects?{__proto__:null}:{},d=Object.keys(s),y=0;y<d.length;++y){var n=d[y],M=XL(n,s[n],r,typeof e=="string");l=A1.merge(l,M,r)}return r.allowSparse===!0?l:A1.compact(l)},KL=UL,QL=JL,eO=m4,tO={formats:eO,parse:QL,stringify:KL};const uoe=Nm(tO);var zn={},Iy={},zy={},Vo={},Da={};Object.defineProperty(Da,"__esModule",{value:!0});var R_=new Uint8Array(0),iO=1024;function vb(e,t,r){return e[t++]=r>>>24&255,e[t++]=r>>>16&255,e[t++]=r>>>8&255,e[t++]=r&255,t}Da.writeInt32BE=vb;function xb(e,t,r){return e[t++]=r&255,e[t++]=r>>>8&255,e[t++]=r>>>16&255,e[t++]=r>>>24&255,t}Da.writeInt32LE=xb;function V9(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1}var CE=!0;try{d1(new Uint8Array([1,2]))}catch{CE=!1}function rO(e){for(var t=e.length,r=new Array(t),s=0;s<t;++s)r[s]=e[s];return r}function d1(e){return CE?String.fromCharCode.apply(String,e):String.fromCharCode.apply(String,rO(e))}function AE(e,t){if(t<0&&(t=e.length),t===0)return["",0];var r=0,s=0,l=t<32767?t:32767,d=new Uint16Array(l+1),y=e.length,n=[];do{for(;r<l&&s<y;r++){var M=e[s++];switch(M>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d[r]=M;break;case 12:case 13:if(s<y){d[r]=(M&31)<<6|e[s++]&63;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(s+1<y){d[r]=(M&15)<<12|(e[s++]&63)<<6|e[s++]&63;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(s+2<y){var P=((M&7)<<18|(e[s++]&63)<<12|(e[s++]&63)<<6|e[s++]&63)-65536;if(0<=P&&P<=1048575){d[r++]=P>>10&1023|55296,d[r]=P&1023|56320;break}throw new Error("Character outside valid Unicode range: 0x"+P.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+M.toString(16))}}n.push(d1(d.subarray(0,r))),t-=r,r=0,l>t&&(l=t)}while(r<t&&s<y);return[n.length===1?n[0]:n.join(""),s]}function e1(e){return AE(e,e.length)[0]}Da.fromUint8Array=e1;function IE(e){var t=e instanceof Uint8Array?e:new Uint8Array(e),r=t.length;if(r===0)return"";if(r<65535)return d1(t);for(var s=r&32767,l=r>>15,d=new Array(s?l+1:l),y=0;y<l;++y)d[y]=d1(t.subarray(y<<15,y+1<<15));return s&&(d[l]=d1(t.subarray(l<<15,r))),d.join("")}Da.toBinaryString=IE;var nO=function(){function e(t){this.buffer=R_,this.size=0,this.offset=0,this.rmark=0,this.wmark=0,t&&(typeof t=="number"?this.buffer=new Uint8Array(t):typeof t=="string"?this.writeString(t):(t instanceof e?this.buffer=t.toBytes():t instanceof Uint8Array?this.buffer=t:t instanceof Uint8ClampedArray?this.buffer=new Uint8Array(t.buffer,t.byteOffset,t.length):this.buffer=new Uint8Array(t),this.size=t.length),this.mark())}return e.toString=function(t){return t===void 0?Object.toString.apply(e):typeof t=="string"?t:t instanceof e?t.toString():t instanceof Uint8Array?e1(t):t instanceof ArrayBuffer?e1(new Uint8Array(t,0)):d1(t)},e.prototype.grow=function(t){var r=this.capacity;if(t=this.size+t,t>r)if(r>0){var s=new Uint8Array(V9(t));s.set(this.buffer),this.buffer=s}else this.buffer=new Uint8Array(Math.max(V9(t),iO))},Object.defineProperty(e.prototype,"capacity",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.offset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){return this.buffer.subarray(0,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remains",{get:function(){return this.buffer.subarray(this.offset,this.size)},enumerable:!0,configurable:!0}),e.prototype.mark=function(){this.wmark=this.size,this.rmark=this.offset},e.prototype.reset=function(){this.size=this.wmark,this.offset=this.rmark},e.prototype.clear=function(){this.buffer=R_,this.size=0,this.offset=0,this.wmark=0,this.rmark=0},e.prototype.writeByte=function(t){this.grow(1),this.buffer[this.size++]=t},e.prototype.writeInt32BE=function(t){if(t!==(t|0))throw new TypeError("value is out of bounds");this.grow(4),this.size=vb(this.buffer,this.size,t)},e.prototype.writeUInt32BE=function(t){if(t<0||t!==(t|0)&&(t&2147483647)+2147483648!==t)throw new TypeError("value is out of bounds");this.grow(4),this.size=vb(this.buffer,this.size,t|0)},e.prototype.writeInt32LE=function(t){if(t!==(t|0))throw new TypeError("value is out of bounds");this.grow(4),this.size=xb(this.buffer,this.size,t)},e.prototype.writeUInt32LE=function(t){if(t<0||t!==(t|0)&&(t&2147483647)+2147483648!==t)throw new TypeError("value is out of bounds");this.grow(4),this.size=xb(this.buffer,this.size,t|0)},e.prototype.write=function(t){var r=t instanceof ArrayBuffer?t.byteLength:t.length;if(r!==0){this.grow(r);var s=this.buffer,l=this.size;t instanceof e?s.set(t.bytes,l):t instanceof ArrayBuffer?s.set(new Uint8Array(t),l):s.set(t,l),this.size+=r}},e.prototype.writeAsciiString=function(t){var r=t.length;if(r!==0){this.grow(r);for(var s=this.buffer.subarray(this.size),l=0;l<r;++l)s[l]=t.charCodeAt(l);this.size+=r}},e.prototype.writeString=function(t){var r=t.length;if(r!==0){this.grow(r*3);for(var s=this.buffer,l=this.size,d=0;d<r;++d){var y=t.charCodeAt(d);if(y<128)s[l++]=y;else if(y<2048)s[l++]=192|y>>6,s[l++]=128|y&63;else if(y<55296||y>57343)s[l++]=224|y>>12,s[l++]=128|y>>6&63,s[l++]=128|y&63;else{if(d+1<r){var n=t.charCodeAt(d+1);if(y<56320&&56320<=n&&n<=57343){var M=((y&1023)<<10|n&1023)+65536;s[l++]=240|M>>18,s[l++]=128|M>>12&63,s[l++]=128|M>>6&63,s[l++]=128|M&63,++d;continue}}throw new Error("Malformed string")}}this.size=l}},e.prototype.readByte=function(){return this.offset>=this.size?-1:this.buffer[this.offset++]},e.prototype.readInt32BE=function(){var t=this.buffer,r=this.offset;if(r+3>=this.size)throw new Error("EOF");var s=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++];return this.offset=r,s},e.prototype.readUInt32BE=function(){var t=this.readInt32BE();return t>=0?t:(t&2147483647)+2147483648},e.prototype.readInt32LE=function(){var t=this.buffer,r=this.offset;if(r+3>=this.size)throw new Error("EOF");var s=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;return this.offset=r,s},e.prototype.readUInt32LE=function(){var t=this.readInt32LE();return t>=0?t:(t&2147483647)+2147483648},e.prototype.read=function(t){return(t<0||this.offset+t>this.size)&&(t=this.size-this.offset),t===0?R_:this.buffer.subarray(this.offset,this.offset+=t)},e.prototype.skip=function(t){return t===0?0:(t<0||this.offset+t>this.size?(t=this.size-this.offset,this.offset=this.size):this.offset+=t,t)},e.prototype.readBytes=function(t){var r=this.buffer.indexOf(t,this.offset),s;return r===-1?(s=this.buffer.subarray(this.offset,this.size),this.offset=this.size):(s=this.buffer.subarray(this.offset,r+1),this.offset=r+1),s},e.prototype.readUntil=function(t){var r=this.buffer.indexOf(t,this.offset),s="";return r===this.offset?this.offset++:r===-1?(s=e1(this.buffer.subarray(this.offset,this.size)),this.offset=this.size):(s=e1(this.buffer.subarray(this.offset,r)),this.offset=r+1),s},e.prototype.readAsciiString=function(t){return IE(this.read(t))},e.prototype.readStringAsBytes=function(t){if(t===0)return R_;var r=this.buffer.subarray(this.offset,this.size);if(t<0)return this.offset=this.size,r;for(var s=0,l=0,d=r.length;l<t&&s<d;l++){var y=r[s++];switch(y>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(s<d){s++;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(s+1<d){s+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(s+2<d){var n=((y&7)<<18|(r[s++]&63)<<12|(r[s++]&63)<<6|r[s++]&63)-65536;if(0<=n&&n<=1048575){l++;break}throw new Error("Character outside valid Unicode range: 0x"+n.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+y.toString(16))}}return this.offset+=s,r.subarray(0,s)},e.prototype.readString=function(t){var r=AE(this.buffer.subarray(this.offset,this.size),t),s=r[0],l=r[1];return this.offset+=l,s},e.prototype.takeBytes=function(){var t=this.bytes;return this.clear(),t},e.prototype.toBytes=function(){return new Uint8Array(this.bytes)},e.prototype.toString=function(){return e1(this.bytes)},e.prototype.clone=function(){return new e(this.toBytes())},e.prototype.trunc=function(){this.buffer=this.remains,this.size=this.buffer.length,this.offset=0,this.wmark=0,this.rmark=0},e}();Da.ByteStream=nO;var Dy={},Nd={},$d={};Object.defineProperty($d,"__esModule",{value:!0});var oO=function(){function e(){}return e.prototype.write=function(t,r){t.stream.writeByte(110)},e.prototype.serialize=function(t,r){this.write(t,r)},e}();$d.BaseSerializer=oO;var g4={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});function sO(e,t){0<=t&&t<=9?e.writeByte(48+t):(t===(t|0)?e.writeByte(105):e.writeByte(108),e.writeAsciiString(""+t),e.writeByte(59))}zo.writeInteger=sO;function aO(e,t){isNaN(t)?e.writeByte(78):isFinite(t)?(e.writeByte(100),e.writeAsciiString(""+t),e.writeByte(59)):(e.writeByte(73),e.writeByte(t>0?43:45))}zo.writeDouble=aO;function lO(e,t){0<=t&&t<=9?e.writeByte(48+Number(t)):(e.writeByte(108),e.writeAsciiString(""+t),e.writeByte(59))}zo.writeBigInt=lO;function cO(e,t){var r=t.length;r>0&&e.writeAsciiString(""+r),e.writeByte(34),e.writeString(t),e.writeByte(34)}zo.writeStringBody=cO;function uO(e,t){var r=t.getUTCFullYear(),s=t.getUTCMonth()+1,l=t.getUTCDate(),d=t.getUTCHours(),y=t.getUTCMinutes(),n=t.getUTCSeconds(),M=t.getUTCMilliseconds();_4(e,r,s,l,d,y,n,M,!0)}zo.writeUTCDate=uO;function hO(e,t){var r=t.getFullYear(),s=t.getMonth()+1,l=t.getDate(),d=t.getHours(),y=t.getMinutes(),n=t.getSeconds(),M=t.getMilliseconds();_4(e,r,s,l,d,y,n,M,!1)}zo.writeLocalDate=hO;function _4(e,t,r,s,l,d,y,n,M){l===0&&d===0&&y===0&&n===0?bb(e,t,r,s):(t===1970&&r===1&&s===1||bb(e,t,r,s),wb(e,l,d,y,n)),e.writeByte(M?90:59)}zo.writeDateTime=_4;function bb(e,t,r,s){e.writeByte(68),e.writeAsciiString(("0000"+t).slice(-4)),e.writeAsciiString(("00"+r).slice(-2)),e.writeAsciiString(("00"+s).slice(-2))}zo.writeDate=bb;function wb(e,t,r,s,l){e.writeByte(84),e.writeAsciiString(("00"+t).slice(-2)),e.writeAsciiString(("00"+r).slice(-2)),e.writeAsciiString(("00"+s).slice(-2)),l>0&&(e.writeByte(46),e.writeAsciiString(("000"+l).slice(-3)))}zo.writeTime=wb;var dO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(g4,"__esModule",{value:!0});var fO=$d,q9=zo,pO=function(e){dO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){s=s.valueOf(),Number.isSafeInteger(s)?q9.writeInteger(r.stream,s):q9.writeDouble(r.stream,s)},t}(fO.BaseSerializer);g4.NumberSerializer=pO;var y4={},mO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(y4,"__esModule",{value:!0});var gO=$d,_O=function(e){mO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){r.stream.writeByte(s.valueOf()?116:102)},t}(gO.BaseSerializer);y4.BooleanSerializer=_O;var v4={},oa={},yO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(oa,"__esModule",{value:!0});var vO=$d,xO=function(e){yO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){r.setReference(s)},t.prototype.serialize=function(r,s){r.writeReference(s)||this.write(r,s)},t}(vO.BaseSerializer);oa.ReferenceSerializer=xO;var bO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(v4,"__esModule",{value:!0});var wO=oa,SO=zo,MO=function(e){bO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(115),SO.writeStringBody(l,s)},t.prototype.serialize=function(r,s){var l=r.stream;switch(s.length){case 0:l.writeByte(101);break;case 1:l.writeByte(117),l.writeString(s);break;default:e.prototype.serialize.call(this,r,s);break}},t}(wO.ReferenceSerializer);v4.StringSerializer=MO;var x4={},EO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(x4,"__esModule",{value:!0});var TO=oa,H9=zo,CO=function(e){EO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;r.utc?H9.writeUTCDate(l,s):H9.writeLocalDate(l,s)},t}(TO.ReferenceSerializer);x4.DateSerializer=CO;var b4={},AO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(b4,"__esModule",{value:!0});var IO=oa,zO=function(e){AO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(98);var d=s instanceof ArrayBuffer?s.byteLength:s.length;d>0&&l.writeAsciiString(""+d),l.writeByte(34),l.write(s),l.writeByte(34)},t}(IO.ReferenceSerializer);b4.BytesSerializer=zO;var w4={},DO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(w4,"__esModule",{value:!0});var PO=oa,kO=function(e){DO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(103),l.writeByte(123),l.writeAsciiString(s.toString()),l.writeByte(125)},t}(PO.ReferenceSerializer);w4.GuidSerializer=kO;var S4={},RO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(S4,"__esModule",{value:!0});var LO=oa,OO=function(e){RO(t,e);function t(r){var s=e.call(this)||this;return s.writeNumber=r,s}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(97);var d=s.length;d>0&&l.writeAsciiString(""+d),l.writeByte(123);for(var y=0;y<d;y++)this.writeNumber(l,s[y]);l.writeByte(125)},t}(LO.ReferenceSerializer);S4.TypedArraySerializer=OO;var M4={},BO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(M4,"__esModule",{value:!0});var FO=oa,NO=function(e){BO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(97);var d=s.length;d>0&&l.writeAsciiString(""+d),l.writeByte(123);for(var y=0;y<d;y++)r.serialize(s[y]);l.writeByte(125)},t}(FO.ReferenceSerializer);M4.ArraySerializer=NO;var E4={},$O=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(E4,"__esModule",{value:!0});var jO=oa,UO=function(e){$O(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(97);var d=s.size;d>0&&l.writeAsciiString(""+d),l.writeByte(123),s.forEach(function(y){return r.serialize(y)}),l.writeByte(125)},t}(jO.ReferenceSerializer);E4.SetSerializer=UO;var T4={},VO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(T4,"__esModule",{value:!0});var qO=oa,HO=function(e){VO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(109);var d=s.size;d>0&&l.writeAsciiString(""+d),l.writeByte(123),s.forEach(function(y,n){r.serialize(n),r.serialize(y)}),l.writeByte(125)},t}(qO.ReferenceSerializer);T4.MapSerializer=HO;var C4={},GO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(C4,"__esModule",{value:!0});var WO=oa,ZO=function(e){GO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream,d=[];if(s.hasOwnProperty===void 0)for(var y in s)typeof s[y]!="function"&&(d[d.length]=y);else for(var y in s)s.hasOwnProperty(y)&&typeof s[y]!="function"&&(d[d.length]=y);var n=d.length;l.writeByte(109),n>0&&l.writeAsciiString(""+n),l.writeByte(123);for(var M=0;M<n;M++)r.serialize(d[M]),r.serialize(s[d[M]]);l.writeByte(125)},t}(WO.ReferenceSerializer);C4.DictionarySerializer=ZO;var A4={},XO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(A4,"__esModule",{value:!0});var YO=Da,JO=oa,G9=zo,KO=function(e){XO(t,e);function t(r,s,l){l===void 0&&(l=[]);var d=e.call(this)||this;if(d.type=r.constructor,l.length===0)for(var y in r)r.hasOwnProperty(y)&&typeof r[y]!="function"&&(l[l.length]=y.toString());d.fields=l;var n=new YO.ByteStream;n.writeByte(99),G9.writeStringBody(n,s);var M=l.length;M>0&&n.writeAsciiString(""+M),n.writeByte(123);for(var P=0;P<M;P++)n.writeByte(115),G9.writeStringBody(n,l[P]);return n.writeByte(125),d.metadata=n.takeBytes(),d}return t.prototype.write=function(r,s){var l=r.stream,d=this.fields,y=this.metadata,n=d.length,M=r.writeClass(this.type,function(){l.write(y),r.addReferenceCount(n)});e.prototype.write.call(this,r,s),l.writeByte(111),l.writeAsciiString(""+M),l.writeByte(123);for(var P=0;P<n;P++)r.serialize(s[d[P]]);l.writeByte(125)},t}(JO.ReferenceSerializer);A4.ObjectSerializer=KO;var I4={},QO=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(I4,"__esModule",{value:!0});var eB=oa,tB=zo,iB=function(e){QO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){r.addReferenceCount(1);var l=r.stream;l.writeByte(69),l.writeByte(115),tB.writeStringBody(l,s.message)},t}(eB.ReferenceSerializer);I4.ErrorSerializer=iB;var vh={};Object.defineProperty(vh,"__esModule",{value:!0});var Py=Object.create(null),Sb=new WeakMap;"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.toString();return e.substr(0,e.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/ig,"")},writable:!1,enumerable:!1,configurable:!0});function h2(e,t){t===void 0&&(t=e.name),Sb.set(e,t),Py[t]=e}vh.register=h2;function rB(e){return e in Py}vh.isRegistered=rB;function nB(e){if(!e)return"";var t=Sb.get(e);return t||(t=e.name,t===""||t==="Object"?"":(Sb.set(e,t),Py[t]=e,t))}vh.getName=nB;var Mb=null;try{Mb=typeof At=="object"?At:window}catch{}function zE(e){if(Mb){for(var t=Mb,r=e.split("."),s=0;s<r.length;s++)if(t=t[r[s]],t===void 0)return;if(typeof t=="function")return t}}function j2(e,t,r,s){if(r<t.length){e[t[r++]]=s;var l=j2(e,t,r,".");return l===void 0&&r<t.length&&(l=j2(e,t,r,"_")),l}return zE(e.join(""))}function oB(e){var t=Py[e];if(t)return t;if(t=zE(e),t)return h2(t,e),t;for(var r=[],s=e.indexOf("_");s>=0;)r[r.length]=s,s=e.indexOf("_",s+1);if(r.length>0){var l=e.split("");if(t=j2(l,r,0,"."),t===void 0&&(t=j2(l,r,0,"_")),t)return h2(t,e),t}return t=function(){},Object.defineProperty(t,"name",{value:e}),h2(t,e),t}vh.getType=oB;var J1={};J1.__esModule=!0;var sB=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var r=t.toString();return t&&(t instanceof e||e.validator.test(r))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(t){for(var r="",s=0;s<t;s++)r+=((1+Math.random())*65536|0).toString(16).substring(1);return r},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();J1.Guid=sB;var aB=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Nd,"__esModule",{value:!0});var lB=Da,cB=$d,uB=g4,hB=y4,dB=v4,fB=x4,pB=b4,mB=w4,DE=S4,gB=M4,_B=E4,yB=T4,vB=C4,xB=A4,bB=I4,wB=aB(vh),PE=zo,SB=J1,kE=new Map,lx=new cB.BaseSerializer,MB=new uB.NumberSerializer,EB=new hB.BooleanSerializer,TB=new dB.StringSerializer,CB=new fB.DateSerializer,AB=new pB.BytesSerializer,IB=new mB.GuidSerializer,zB=new DE.TypedArraySerializer(PE.writeInteger),DB=new DE.TypedArraySerializer(PE.writeDouble),W9=new gB.ArraySerializer,PB=new _B.SetSerializer,kB=new yB.MapSerializer,RB=new vB.DictionarySerializer,cx=new bB.ErrorSerializer;function Eb(e,t){kE.set(e,t)}Nd.register=Eb;function LB(e){var t=e.constructor;switch(t){case Function:return lx;case Number:return MB;case Boolean:return EB;case String:return TB;case Date:return CB;case SB.Guid:return IB;case Array:return W9;case Set:return PB;case Map:return kB;case ArrayBuffer:case Uint8Array:case Uint8ClampedArray:case lB.ByteStream:return AB;case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:return zB;case Float32Array:case Float64Array:return DB;case Error:return cx}var r=kE.get(t);if(r!==void 0)return r;if(Array.isArray(e)||Object.prototype.toString.call(e)==="[object Arguments]")return W9;if(e instanceof Error)return Eb(t,cx),cx;var s=wB.getName(t);if(s==="")return RB;if(s==="GeneratorFunction"||s==="AsyncFunction")return lx;var l=new xB.ObjectSerializer(e,s);return Eb(t,l),l}Nd.getInstance=LB;var OB=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),BB=zo,FB=$d,NB=Nd;if(typeof BigInt<"u"){var $B=function(e){OB(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.write=function(r,s){BB.writeBigInt(r.stream,s)},t}(FB.BaseSerializer);NB.register(BigInt,new $B)}var jB=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),UB=oa,VB=zo,Z9=Nd;if(typeof BigInt64Array<"u"&&typeof BigUint64Array<"u"){var qB=function(e){jB(t,e);function t(){return e.call(this)||this}return t.prototype.write=function(r,s){e.prototype.write.call(this,r,s);var l=r.stream;l.writeByte(97);var d=s.length;d>0&&l.writeAsciiString(""+d),l.writeByte(123);for(var y=0;y<d;y++)VB.writeBigInt(l,s[y]);l.writeByte(125)},t}(UB.ReferenceSerializer),X9=new qB;Z9.register(BigInt64Array,X9),Z9.register(BigUint64Array,X9)}var HB=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Dy,"__esModule",{value:!0});var Y9=HB(Nd),GB=function(){function e(){this.ref=new Map,this.last=0}return e.prototype.addCount=function(t){this.last+=t},e.prototype.set=function(t){this.ref.set(t,this.last++)},e.prototype.write=function(t,r){var s=this.ref.get(r);return s!==void 0?(t.writeByte(114),t.writeAsciiString(""+s),t.writeByte(59),!0):!1},e.prototype.reset=function(){this.ref.clear(),this.last=0},e}(),WB=function(){function e(t,r,s){r===void 0&&(r=!1),s===void 0&&(s=!1),this.stream=t,this.utc=s,this.ref=new Map,this.last=0,this.simple=r}return Object.defineProperty(e.prototype,"simple",{get:function(){return this.refer===void 0},set:function(t){this.refer=t?void 0:new GB},enumerable:!0,configurable:!0}),e.prototype.serialize=function(t){t==null?this.stream.writeByte(110):Y9.getInstance(t).serialize(this,t)},e.prototype.write=function(t){t==null?this.stream.writeByte(110):Y9.getInstance(t).write(this,t)},e.prototype.writeReference=function(t){return this.refer?this.refer.write(this.stream,t):!1},e.prototype.setReference=function(t){this.refer&&this.refer.set(t)},e.prototype.addReferenceCount=function(t){this.refer&&this.refer.addCount(t)},e.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.clear(),this.last=0},e.prototype.writeClass=function(t,r){var s=this.ref.get(t);return s===void 0&&(r(),s=this.last++,this.ref.set(t,s)),s},e}();Dy.Writer=WB;var ky={},Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});var ZB=J1;function z4(e,t){t===void 0&&(t=59);var r=e.readUntil(t);return r.length===0?0:parseInt(r,10)}Yn.readInt=z4;function XB(e){return parseFloat(e.readUntil(59))}Yn.readDouble=XB;function YB(e){return e.readByte()===45?-1/0:1/0}Yn.readInfinity=YB;function JB(e){return z4(e,123)}Yn.readCount=JB;function Ry(e){return z4(e,34)}Yn.readLength=Ry;function KB(e){var t=Ry(e),r=e.readString(t);return e.readByte(),r}Yn.readString=KB;function QB(e){var t=Ry(e),r=e.read(t);return e.readByte(),r}Yn.readBytes=QB;function eF(e){var t=Ry(e),r=e.readAsciiString(t);return e.readByte(),r}Yn.readAsciiString=eF;function tF(e){e.readByte();var t=ZB.Guid.parse(e.readAsciiString(36));return e.readByte(),t}Yn.readGuid=tF;function iF(e){var t=e.readByte()-48;return t=t*10+e.readByte()-48,t=t*10+e.readByte()-48,t*10+e.readByte()-48}function Qu(e){var t=e.readByte()-48;return t*10+e.readByte()-48}function RE(e){var t=e.readByte()-48;t=t*10+e.readByte()-48,t=t*10+e.readByte()-48;var r=e.readByte();return r>=48&&r<=57&&(e.skip(2),r=e.readByte(),r>=48&&r<=57&&(e.skip(2),r=e.readByte())),[t,r]}function rF(e){var t,r=Qu(e),s=Qu(e),l=Qu(e),d=0,y=e.readByte();return y===46&&(t=RE(e),d=t[0],y=t[1]),y===90?new Date(Date.UTC(1970,0,1,r,s,l,d)):new Date(1970,0,1,r,s,l,d)}Yn.readTime=rF;function nF(e){var t,r=iF(e),s=Qu(e)-1,l=Qu(e),d=e.readByte();if(d===84){var y=Qu(e),n=Qu(e),M=Qu(e),P=0;return d=e.readByte(),d===46&&(t=RE(e),P=t[0],d=t[1]),d===90?new Date(Date.UTC(r,s,l,y,n,M,P)):new Date(r,s,l,y,n,M,P)}return d===90?new Date(Date.UTC(r,s,l)):new Date(r,s,l)}Yn.readDateTime=nF;var jd={},D4={},qo={};Object.defineProperty(qo,"__esModule",{value:!0});function oF(e){switch(e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 105:return"int32 number";case 108:return"long number";case 100:return"double number";case 110:return"null | undefined";case 101:return"empty string";case 116:return"true";case 102:return"false";case 78:return"NaN";case 73:return"Infinity";case 68:case 84:return"Date";case 98:return"Uint8Array";case 117:case 115:return"string";case 103:return"guid string";case 97:return"Array";case 109:return"object | Map";case 99:return"class";case 111:return"Object";case 114:return"Reference";case 69:return"Error";default:throw new Error("Unexpected Tag: 0x"+(e&255).toString(16))}}var sF=function(){function e(t){t===void 0&&(t="undefined"),this.type=t}return e.prototype.read=function(t,r){switch(r){case 110:return;case 114:return t.readReference();case 99:return t.readClass(),this.deserialize(t);case 69:throw new Error(t.deserialize(String))}throw new Error("Cannot convert "+oF(r)+" to "+this.type+".")},e.prototype.deserialize=function(t){return this.read(t,t.stream.readByte())},e}();qo.BaseDeserializer=sF;var Dn={},aF=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Dn,"__esModule",{value:!0});var Hl=aF(Yn);function lF(e){var t=Hl.readBytes(e.stream);return e.addReference(t),t}Dn.readBytes=lF;function cF(e){var t=Hl.readAsciiString(e.stream);return e.addReference(t),t}Dn.readAsciiString=cF;function uF(e){var t=Hl.readString(e.stream);return e.addReference(t),t}Dn.readString=uF;function hF(e){var t=Hl.readGuid(e.stream);return e.addReference(t),t}Dn.readGuid=hF;function dF(e){var t=Hl.readDateTime(e.stream);return e.addReference(t),t}Dn.readDateTime=dF;function fF(e){var t=Hl.readTime(e.stream);return e.addReference(t),t}Dn.readTime=fF;function pF(e){var t=e.stream,r=Hl.readCount(t),s=new Array(r);e.addReference(s);for(var l=0;l<r;++l)s[l]=e.deserialize();return t.readByte(),s}Dn.readArray=pF;function mF(e){var t=e.stream,r=Hl.readCount(t),s=new Set;e.addReference(s);for(var l=0;l<r;++l)s.add(e.deserialize());return t.readByte(),s}Dn.readSet=mF;function gF(e){var t=e.stream,r=new Map;e.addReference(r);for(var s=Hl.readCount(t);s>0;--s){var l=e.deserialize(),d=e.deserialize();r.set(l,d)}return t.readByte(),r}Dn.readMap=gF;function _F(e){var t=e.stream,r=Hl.readInt(t,123),s=e.getTypeInfo(r),l=s.type,d=l?new l:{};e.addReference(d);for(var y=s.names,n=y.length,M=0;M<n;++M)d[y[M]]=e.deserialize();return t.readByte(),d}Dn.readObject=_F;function yF(e){var t=e.stream,r=Hl.readInt(t,123),s=e.getTypeInfo(r),l=new Map;e.addReference(l);for(var d=s.names,y=d.length,n=0;n<y;++n)l.set(d[n],e.deserialize());return t.readByte(),l}Dn.readObjectAsMap=yF;var vF=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),xF=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(D4,"__esModule",{value:!0});var bF=qo,ux=xF(Dn),wF=function(e){vF(t,e);function t(){return e.call(this,"Array")||this}return t.prototype.read=function(r,s){switch(s){case 97:return ux.readArray(r);case 101:return[];case 115:return ux.readString(r).split("");case 98:return Array.from(ux.readBytes(r));case 114:{var l=r.readReference();return l instanceof Uint8Array?Array.from(l):l instanceof String?l.split(""):l}default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(bF.BaseDeserializer);D4.ArrayDeserializer=wF;var sa={},P4={},SF=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),LE=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(P4,"__esModule",{value:!0});var MF=qo,J9=LE(Yn),hx=LE(Dn),EF=function(e){SF(t,e);function t(){return e.call(this,"int")||this}return t.prototype.read=function(r,s){if(s>=48&&s<=57)return s-48;var l=r.stream;switch(s){case 105:case 108:return J9.readInt(l);case 100:return Math.floor(J9.readDouble(l));case 116:return 1;case 102:case 101:return 0;case 115:return parseInt(hx.readString(r));case 117:return l.readString(1).charCodeAt(1);case 68:return hx.readDateTime(r).getTime();case 84:return hx.readTime(r).getTime();case 114:{var d=r.readReference();return d instanceof Date?d.getTime():parseInt(d.toString())}default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(MF.BaseDeserializer);P4.IntDeserializer=EF;var Ly={},TF=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),OE=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Ly,"__esModule",{value:!0});var CF=qo,dx=OE(Yn),fx=OE(Dn),AF=function(e){TF(t,e);function t(){return e.call(this,"number")||this}return t.prototype.read=function(r,s){if(s>=48&&s<=57)return s-48;var l=r.stream;switch(s){case 105:case 108:return dx.readInt(l);case 100:return dx.readDouble(l);case 78:return NaN;case 73:return dx.readInfinity(l);case 116:return 1;case 102:case 101:return 0;case 115:return Number(fx.readString(r));case 117:return l.readString(1).charCodeAt(1);case 68:return fx.readDateTime(r).getTime();case 84:return fx.readTime(r).getTime();case 114:{var d=r.readReference();return d instanceof Date?d.getTime():Number(d.toString())}default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(CF.BaseDeserializer);Ly.NumberDeserializer=AF;var ru=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(sa,"__esModule",{value:!0});var sh=Da,IF=P4,zF=Ly,nu=qo,BE=Yn,I1=Dn;function xh(e,t){var r=e.stream,s=BE.readCount(r),l=new t(s);e.addReference(l);for(var d=IF.IntDeserializer.instance,y=0;y<s;++y)l[y]=d.deserialize(e);return r.readByte(),l}sa.readIntArray=xh;function k4(e,t){var r=e.stream,s=BE.readCount(r),l=new t(s);e.addReference(l);for(var d=zF.NumberDeserializer.instance,y=0;y<s;++y)l[y]=d.deserialize(e);return r.readByte(),l}sa.readNumberArray=k4;var DF=new Int8Array(0),PF=function(e){ru(t,e);function t(){return e.call(this,"Int8Array")||this}return t.prototype.read=function(r,s){var l;switch(s){case 101:return DF;case 97:return xh(r,Int8Array);case 98:l=I1.readBytes(r);break;case 117:l=new sh.ByteStream(r.stream.readString(1)).bytes;break;case 115:l=new sh.ByteStream(I1.readString(r)).bytes;break;default:return e.prototype.read.call(this,r,s)}return new Int8Array(l.buffer,l.byteOffset,l.length)},t.instance=new t,t}(nu.BaseDeserializer);sa.Int8ArrayDeserializer=PF;var kF=new Int16Array(0),RF=function(e){ru(t,e);function t(){return e.call(this,"Int16Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return kF;case 97:return xh(r,Int16Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(nu.BaseDeserializer);sa.Int16ArrayDeserializer=RF;var LF=new Int32Array(0),OF=function(e){ru(t,e);function t(){return e.call(this,"Int32Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return LF;case 97:return xh(r,Int32Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(nu.BaseDeserializer);sa.Int32ArrayDeserializer=OF;var BF=new Uint8Array(0),FF=function(e){ru(t,e);function t(){return e.call(this,"Uint8Array")||this}return t.prototype.read=function(r,s){switch(s){case 98:return I1.readBytes(r);case 101:return BF;case 97:return xh(r,Uint8Array);case 117:return new sh.ByteStream(r.stream.readString(1)).bytes;case 115:return new sh.ByteStream(I1.readString(r)).bytes;case 114:{var l=r.readReference();return l instanceof Uint8Array?l:new sh.ByteStream(l.toString()).bytes}default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(nu.BaseDeserializer);sa.Uint8ArrayDeserializer=FF;var NF=new Uint8ClampedArray(0),$F=function(e){ru(t,e);function t(){return e.call(this,"Uint8ClampedArray")||this}return t.prototype.read=function(r,s){var l;switch(s){case 101:return NF;case 97:return xh(r,Uint8ClampedArray);case 98:l=I1.readBytes(r);break;case 117:l=new sh.ByteStream(r.stream.readString(1)).bytes;break;case 115:l=new sh.ByteStream(I1.readString(r)).bytes;break;case 114:{var d=r.readReference();if(d instanceof Uint8ClampedArray)return d;d instanceof Uint8Array?l=d:l=new sh.ByteStream(d.toString()).bytes;break}default:return e.prototype.read.call(this,r,s)}return new Uint8ClampedArray(l.buffer,l.byteOffset,l.length)},t.instance=new t,t}(nu.BaseDeserializer);sa.Uint8ClampedArrayDeserializer=$F;var jF=new Uint16Array(0),UF=function(e){ru(t,e);function t(){return e.call(this,"Uint16Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return jF;case 97:return xh(r,Uint16Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(nu.BaseDeserializer);sa.Uint16ArrayDeserializer=UF;var VF=new Uint32Array(0),qF=function(e){ru(t,e);function t(){return e.call(this,"Uint32Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return VF;case 97:return xh(r,Uint32Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(nu.BaseDeserializer);sa.Uint32ArrayDeserializer=qF;var HF=new Float32Array(0),GF=function(e){ru(t,e);function t(){return e.call(this,"Float32Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return HF;case 97:return k4(r,Float32Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(nu.BaseDeserializer);sa.Float32ArrayDeserializer=GF;var WF=new Float64Array(0),ZF=function(e){ru(t,e);function t(){return e.call(this,"Float64Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return WF;case 97:return k4(r,Float64Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(nu.BaseDeserializer);sa.Float64ArrayDeserializer=ZF;var R4={},XF=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(R4,"__esModule",{value:!0});var YF=qo,JF=function(e){XF(t,e);function t(){return e.call(this,"function")||this}return t.instance=new t,t}(YF.BaseDeserializer);R4.FunctionDeserializer=JF;var L4={},KF=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),FE=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(L4,"__esModule",{value:!0});var QF=qo,K9=FE(Yn),eN=FE(Dn),tN=function(e){KF(t,e);function t(){return e.call(this,"boolean")||this}return t.prototype.read=function(r,s){var l=r.stream;switch(s){case 116:return!0;case 102:case 101:case 78:case 48:return!1;case 105:case 108:return K9.readInt(l)!==0;case 100:return K9.readDouble(l)!==0;case 115:return!!eN.readString(r);case 117:return"0\0".indexOf(l.readString(1))===-1;case 73:return l.readByte(),!0;case 114:return!!r.readReference().toString();default:return s>=49&&s<=57?!0:e.prototype.read.call(this,r,s)}},t.instance=new t,t}(QF.BaseDeserializer);L4.BooleanDeserializer=tN;var Oy={},iN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),NE=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Oy,"__esModule",{value:!0});var rN=qo,nN=NE(Yn),jf=NE(Dn),oN=function(e){iN(t,e);function t(){return e.call(this,"string")||this}return t.prototype.read=function(r,s){if(s>=48&&s<=57)return String.fromCharCode(s);var l=r.stream;switch(s){case 105:case 108:case 100:return l.readUntil(59);case 115:return jf.readString(r);case 98:return jf.readAsciiString(r);case 116:return"true";case 102:return"false";case 101:return"";case 68:return jf.readDateTime(r).toString();case 84:return jf.readTime(r).toTimeString();case 103:return jf.readGuid(r).toString();case 78:return"NaN";case 73:return nN.readInfinity(l).toString();case 117:return l.readString(1);case 97:return jf.readArray(r).join("");case 114:return r.readReference().toString();default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(rN.BaseDeserializer);Oy.StringDeserializer=oN;var O4={},sN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),$E=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(O4,"__esModule",{value:!0});var aN=qo,px=$E(Yn),mx=$E(Dn),lN=function(e){sN(t,e);function t(){return e.call(this,"Date")||this}return t.prototype.read=function(r,s){var l=r.stream;switch(s){case 68:return mx.readDateTime(r);case 84:return mx.readTime(r);case 105:return new Date(px.readInt(l));case 108:return new Date(px.readInt(l));case 100:return new Date(Math.floor(px.readDouble(l)));case 115:return new Date(mx.readString(r));case 116:return new Date(1);case 102:case 101:return new Date(0);case 114:{var d=r.readReference();return d instanceof Date?d:new Date(d.toString())}default:return s>=48&&s<=57?new Date(s-48):e.prototype.read.call(this,r,s)}},t.instance=new t,t}(aN.BaseDeserializer);O4.DateDeserializer=lN;var B4={},cN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(B4,"__esModule",{value:!0});var ad=Da,uN=qo,hN=sa,Q9=Dn,dN=function(e){cN(t,e);function t(){return e.call(this,"ByteStream")||this}return t.prototype.read=function(r,s){switch(s){case 98:return new ad.ByteStream(Q9.readBytes(r));case 101:return new ad.ByteStream(0);case 97:return new ad.ByteStream(hN.readIntArray(r,Uint8Array));case 117:return new ad.ByteStream(r.stream.readString(1));case 115:return new ad.ByteStream(Q9.readString(r));case 114:{var l=r.readReference();return l instanceof Uint8Array?new ad.ByteStream(l):new ad.ByteStream(l.toString())}default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(uN.BaseDeserializer);B4.ByteStreamDeserializer=dN;var F4={},fN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(F4,"__esModule",{value:!0});var pN=qo,mN=Dn,gN=function(e){fN(t,e);function t(){return e.call(this,"Set")||this}return t.prototype.read=function(r,s){switch(s){case 101:return new Set;case 97:return mN.readSet(r);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(pN.BaseDeserializer);F4.SetDeserializer=gN;var N4={},_N=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),yN=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(N4,"__esModule",{value:!0});var vN=qo,e7=yN(Dn),xN=function(e){_N(t,e);function t(){return e.call(this,"Map")||this}return t.prototype.read=function(r,s){switch(s){case 101:return new Map;case 109:return e7.readMap(r);case 111:return e7.readObjectAsMap(r);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(vN.BaseDeserializer);N4.MapDeserializer=xN;var $4={},bN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),wN=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty($4,"__esModule",{value:!0});var SN=qo,t7=wN(Dn),gx=J1,MN=function(e){bN(t,e);function t(){return e.call(this,"Guid")||this}return t.prototype.read=function(r,s){switch(s){case 103:return t7.readGuid(r);case 115:return gx.Guid.parse(t7.readString(r));case 114:{var l=r.readReference();return l instanceof gx.Guid?l:gx.Guid.parse(l.toString())}default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(SN.BaseDeserializer);$4.GuidDeserializer=MN;var j4={},EN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(j4,"__esModule",{value:!0});var TN=qo,CN=function(e){EN(t,e);function t(){return e.call(this,"Error")||this}return t.prototype.read=function(r,s){switch(s){case 69:return new Error(r.deserialize(String));default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(TN.BaseDeserializer);j4.ErrorDeserializer=CN;var U4={},By={},AN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),jE=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(By,"__esModule",{value:!0});var IN=qo,zN=Oy,H0=jE(Yn),Hu=jE(Dn),UE=function(e){AN(t,e);function t(){return e.call(this,"any")||this}return t.prototype.read=function(r,s){if(s>=48&&s<=57)return s-48;var l=r.stream;switch(s){case 105:return H0.readInt(l);case 115:return Hu.readString(r);case 98:return Hu.readBytes(r);case 116:return!0;case 102:return!1;case 101:return"";case 111:return Hu.readObject(r);case 68:return Hu.readDateTime(r);case 84:return Hu.readTime(r);case 103:return Hu.readGuid(r);case 108:switch(r.longType){case"number":return H0.readInt(l);case"bigint":if(typeof BigInt<"u")return BigInt(l.readUntil(59));case"string":return l.readUntil(59)}break;case 100:return H0.readDouble(l);case 78:return NaN;case 73:return H0.readInfinity(l);case 117:return l.readString(1);case 97:return Hu.readArray(r);case 109:return r.dictType==="map"?Hu.readMap(r):DN(r);case 69:return new Error(r.deserialize(String));default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(IN.BaseDeserializer);By.DefaultDeserializer=UE;function DN(e){var t=e.stream,r=Object.create(null);e.addReference(r);for(var s=H0.readCount(t),l=zN.StringDeserializer.instance,d=UE.instance;s>0;--s){var y=l.deserialize(e),n=d.deserialize(e);r[y]=n}return t.readByte(),r}var PN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(U4,"__esModule",{value:!0});var kN=By,RN=function(e){PN(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.read=function(r,s){return s===110?null:e.prototype.read.call(this,r,s)},t.instance=new t,t}(kN.DefaultDeserializer);U4.NullDeserializer=RN;Object.defineProperty(jd,"__esModule",{value:!0});var LN=Da,ON=D4,Xc=sa,BN=R4,FN=Ly,NN=L4,$N=Oy,jN=O4,UN=B4,VN=F4,qN=N4,HN=$4,GN=j4,WN=U4,ZN=By,XN=J1,VE=new Map;function YN(e,t){VE.set(e,t)}jd.register=YN;function JN(e){if(e){switch(e){case Function:return BN.FunctionDeserializer.instance;case Number:return FN.NumberDeserializer.instance;case Boolean:return NN.BooleanDeserializer.instance;case String:return $N.StringDeserializer.instance;case Date:return jN.DateDeserializer.instance;case Array:return ON.ArrayDeserializer.instance;case LN.ByteStream:return UN.ByteStreamDeserializer.instance;case Uint8Array:return Xc.Uint8ArrayDeserializer.instance;case Uint8ClampedArray:return Xc.Uint8ClampedArrayDeserializer.instance;case Uint16Array:return Xc.Uint16ArrayDeserializer.instance;case Uint32Array:return Xc.Uint32ArrayDeserializer.instance;case Int8Array:return Xc.Int8ArrayDeserializer.instance;case Int16Array:return Xc.Int16ArrayDeserializer.instance;case Int32Array:return Xc.Int32ArrayDeserializer.instance;case Float32Array:return Xc.Float32ArrayDeserializer.instance;case Float64Array:return Xc.Float64ArrayDeserializer.instance;case Set:return VN.SetDeserializer.instance;case Map:return qN.MapDeserializer.instance;case XN.Guid:return HN.GuidDeserializer.instance;case Error:return GN.ErrorDeserializer.instance}var t=VE.get(e);if(t!==void 0)return t}return e===null?WN.NullDeserializer.instance:ZN.DefaultDeserializer.instance}jd.getInstance=JN;var KN=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),QN=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},e$=qo,t$=jd,_x=QN(Dn);if(typeof BigInt<"u"){var i$=function(e){KN(t,e);function t(){return e.call(this,"bigint")||this}return t.prototype.read=function(r,s){if(s>=48&&s<=57)return BigInt(s-48);var l=r.stream;switch(s){case 105:case 108:case 100:return BigInt(l.readUntil(59));case 116:return BigInt(1);case 102:case 101:return BigInt(0);case 115:return BigInt(_x.readString(r));case 117:return BigInt(l.readString(1).charCodeAt(1));case 68:return BigInt(_x.readDateTime(r).getTime());case 84:return BigInt(_x.readTime(r).getTime());case 114:{var d=r.readReference();return d instanceof Date?BigInt(d.getTime()):BigInt(d.toString())}default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(e$.BaseDeserializer);t$.register(BigInt,i$.instance)}var qE=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),r$=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},HE=qo,V4=jd,n$=r$(Yn);function GE(e,t){var r=e.stream,s=n$.readCount(r),l=new t(s);e.addReference(l);for(var d=V4.getInstance(BigInt),y=0;y<s;++y)l[y]=d.deserialize(e);return r.readByte(),l}if(typeof BigInt64Array<"u"){var o$=new BigInt64Array(0),s$=function(e){qE(t,e);function t(){return e.call(this,"BigInt64Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return o$;case 97:return GE(r,BigInt64Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(HE.BaseDeserializer);V4.register(BigInt64Array,s$.instance)}if(typeof BigUint64Array<"u"){var a$=new BigUint64Array(0),l$=function(e){qE(t,e);function t(){return e.call(this,"BigUint64Array")||this}return t.prototype.read=function(r,s){switch(s){case 101:return a$;case 97:return GE(r,BigUint64Array);default:return e.prototype.read.call(this,r,s)}},t.instance=new t,t}(HE.BaseDeserializer);V4.register(BigUint64Array,l$.instance)}var WE=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(ky,"__esModule",{value:!0});var yx=Yn,c$=WE(vh),vx=WE(jd),u$=function(){function e(){this.ref=[]}return Object.defineProperty(e.prototype,"lastIndex",{get:function(){return this.ref.length-1},enumerable:!0,configurable:!0}),e.prototype.add=function(t){this.ref.push(t)},e.prototype.set=function(t,r){this.ref[t]=r},e.prototype.read=function(t){return this.ref[t]},e.prototype.reset=function(){this.ref.length=0},e}(),h$=function(){function e(t,r){r===void 0&&(r=!1),this.stream=t,this.ref=[],this.longType="number",this.dictType="object",this.simple=r}return Object.defineProperty(e.prototype,"simple",{get:function(){return this.refer===void 0},set:function(t){this.refer=t?void 0:new u$},enumerable:!0,configurable:!0}),e.prototype.deserialize=function(t){return vx.getInstance(t).deserialize(this)},e.prototype.read=function(t,r){return vx.getInstance(r).read(this,t)},e.prototype.readClass=function(){for(var t=this.stream,r=yx.readString(t),s=yx.readCount(t),l=new Array(s),d=vx.getInstance(String),y=0;y<s;++y)l[y]=d.deserialize(this);t.readByte(),this.ref.push({name:r,names:l,type:c$.getType(r)})},e.prototype.getTypeInfo=function(t){return this.ref[t]},e.prototype.readReference=function(){return this.refer?this.refer.read(yx.readInt(this.stream)):void 0},e.prototype.addReference=function(t){this.refer&&this.refer.add(t)},e.prototype.setReference=function(t,r){this.refer&&this.refer.set(t,r)},Object.defineProperty(e.prototype,"lastReferenceIndex",{get:function(){return this.refer?this.refer.lastIndex:-1},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.refer&&this.refer.reset(),this.ref.length=0},e}();ky.Reader=h$;var Fy={};Object.defineProperty(Fy,"__esModule",{value:!0});var Tb=Da,d$=Dy,f$=ky;function p$(e,t,r){var s=new Tb.ByteStream,l=new d$.Writer(s,t,r);return l.serialize(e),s.bytes}Fy.serialize=p$;function m$(e,t,r){e instanceof Tb.ByteStream||(e=new Tb.ByteStream(e));var s=new f$.Reader(e,r);return s.deserialize(t)}Fy.deserialize=m$;var Ud=At&&At.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Vo,"__esModule",{value:!0});var Um=Da,hoe=Vo.ByteStream=Um.ByteStream;Vo.writeInt32BE=Um.writeInt32BE;Vo.writeInt32LE=Um.writeInt32LE;Vo.fromUint8Array=Um.fromUint8Array;Vo.toBinaryString=Um.toBinaryString;var g$=Dy,doe=Vo.Writer=g$.Writer,_$=ky,foe=Vo.Reader=_$.Reader,y$=Ud(vh);Vo.TypeManager=y$;var v$=Ud(Nd);Vo.Serializer=v$;var x$=Ud(jd);Vo.Deserializer=x$;var b$=Ud(Fy);Vo.Formatter=b$;var w$=Ud(Dn);Vo.ReferenceReader=w$;var S$=Ud(Yn),poe=Vo.ValueReader=S$,M$=Ud(zo);Vo.ValueWriter=M$;Object.defineProperty(zy,"__esModule",{value:!0});var L_=Vo,E$=function(){function e(){this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object"}return e.prototype.encode=function(t,r,s){var l=new L_.ByteStream,d=new L_.Writer(l,this.simple,this.utc),y=s.requestHeaders;this.simple&&(y.simple=!0);var n=0;for(var M in y)n++;return n>0&&(l.writeByte(72),d.serialize(y),d.reset()),l.writeByte(67),d.serialize(t),r.length>0&&(d.reset(),d.serialize(r)),l.writeByte(122),l.takeBytes()},e.prototype.decode=function(t,r){var s=new L_.ByteStream(t),l=new L_.Reader(s,!1);l.longType=this.longType,l.dictType=this.dictType;var d=s.readByte();if(d===72){var y=l.deserialize();for(var n in y)r.responseHeaders[n]=y[n];l.reset(),d=s.readByte()}switch(d){case 82:return r.responseHeaders.simple&&(l.simple=!0),l.deserialize(r.returnType);case 69:throw new Error(l.deserialize(String));case 122:return r.type===null?null:void 0;default:throw new Error(`Invalid response:\r
`+s.toString())}},e.instance=new e,e}();zy.DefaultClientCodec=E$;var Ny={},Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});var T$=function(){function e(){this.requestHeaders=Object.create(null),this.responseHeaders=Object.create(null)}return e.prototype.copy=function(t,r){if(t)for(var s in t)s!=="requestHeaders"&&s!=="responseHeaders"&&(!t.hasOwnProperty||t.hasOwnProperty(s))&&(r[s]=t[s])},e.prototype.clone=function(){var t=Object.create(this.constructor.prototype);return this.copy(this,t),this.copy(this.requestHeaders,t.requestHeaders),this.copy(this.responseHeaders,t.responseHeaders),t},e}();Vm.Context=T$;var C$=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(Ny,"__esModule",{value:!0});var A$=Vm,I$=function(e){C$(t,e);function t(r){var s=e.call(this)||this;return r&&(s.copy(r,s),"requestHeaders"in r&&s.copy(r.requestHeaders,s.requestHeaders)),s}return t.prototype.init=function(r,s){this.client=r,r.uris.length>0&&(this.uri=r.uris[0]),this.returnType===void 0&&(this.returnType=s),this.timeout===void 0&&(this.timeout=r.timeout),this.copy(r.requestHeaders,this.requestHeaders)},t}(A$.Context);Ny.ClientContext=I$;var qm={},Hm={};Object.defineProperty(Hm,"__esModule",{value:!0});var z$=function(){function e(t){this.defaultHandler=t,this.handlers=[],this.firstHandler=t}return e.prototype.rebuildHandler=function(){for(var t=this.handlers,r=this.defaultHandler,s=t.length,l=s-1;l>=0;--l)r=this.getNextHandler(t[l],r);this.firstHandler=r},Object.defineProperty(e.prototype,"handler",{get:function(){return this.firstHandler},enumerable:!0,configurable:!0}),e.prototype.use=function(){for(var t,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];(t=this.handlers).push.apply(t,r),this.rebuildHandler()},e.prototype.unuse=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var s=!1,l=0,d=t.length;l<d;++l){var y=this.handlers.indexOf(t[l]);y>=0&&(this.handlers.splice(y,1),s=!0)}s&&this.rebuildHandler()},e}();Hm.PluginManager=z$;var D$=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(qm,"__esModule",{value:!0});var P$=Hm,k$=function(e){D$(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getNextHandler=function(r,s){return function(l,d,y){return r(l,d,y,s)}},t}(P$.PluginManager);qm.InvokeManager=k$;var Gm={},R$=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(Gm,"__esModule",{value:!0});var L$=Hm,O$=function(e){R$(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getNextHandler=function(r,s){return function(l,d){return r(l,d,s)}},t}(L$.PluginManager);Gm.IOManager=O$;var bh={};Object.defineProperty(bh,"__esModule",{value:!0});function B$(e){var t=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=e.match(t);if(r){var s=r[4].split(":",2);return{protocol:r[1],host:r[4],hostname:s[0],port:parseInt(s[1],10)||0,path:r[5],query:r[7],fragment:r[9]}}throw new Error("Invalid URI")}bh.parseURI=B$;function F$(e){for(var t=[Object.create(null)],r=0,s=e.length;r<s;++r){var l=e[r].split("_"),d=l.length-1;if(d>0){for(var y=t,n=0;n<d;n++){var M=l[n];y[0][M]===void 0&&(y[0][M]=[Object.create(null)]),y=y[0][M]}y.push(l[d])}t.push(e[r])}return t}bh.normalize=F$;function N$(e,t){return function(){switch(arguments.length){case 1:var r=arguments[0];r instanceof Error?t(r):e(r);break;case 2:var s=arguments[0],l=arguments[1];s instanceof Error?t(s):l instanceof Error?t(l):e(s===void 0?l:s);break}}}function $$(e,t){return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return new Promise(function(l,d){r.push(N$(l,d));try{e.apply(t,r)}catch(y){d(y)}})}}bh.promisify=$$;var j$=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function U$(e,t){t===void 0&&(t=0),t=t^-1;for(var r=0,s=e.length;r<s;++r)t=t>>>8^j$[(t^e[r])&255];return t^-1}bh.crc32=U$;var R0=At&&At.__awaiter||function(e,t,r,s){function l(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function n(L){try{P(s.next(L))}catch(V){y(V)}}function M(L){try{P(s.throw(L))}catch(V){y(V)}}function P(L){L.done?d(L.value):l(L.value).then(n,M)}P((s=s.apply(e,t||[])).next())})},L0=At&&At.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,y;return y={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function n(P){return function(L){return M([P,L])}}function M(P){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,l&&(d=P[0]&2?l.return:P[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,P[1])).done)return d;switch(l=0,d&&(P=[P[0]&2,d.value]),P[0]){case 0:case 1:d=P;break;case 4:return r.label++,{value:P[1],done:!1};case 5:r.label++,l=P[1],P=[0];continue;case 7:P=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(P[0]===6||P[0]===2)){r=0;continue}if(P[0]===3&&(!d||P[1]>d[0]&&P[1]<d[3])){r.label=P[1];break}if(P[0]===6&&r.label<d[1]){r.label=d[1],d=P;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(P);break}d[2]&&r.ops.pop(),r.trys.pop();continue}P=t.call(e,r)}catch(L){P=[6,L],l=0}finally{s=d=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(Iy,"__esModule",{value:!0});var V$=zy,Md=Ny,q$=qm,H$=Gm,ZE=bh;function q4(e,t){return function(){var r=Array.prototype.slice.call(arguments),s=r.length>0&&r[r.length-1]instanceof Md.ClientContext?r.pop():new Md.ClientContext;return e.invoke(t,r,s)}}function XE(e,t,r,s,l){if(t[s]===void 0){t[s]=Object.create(null),Array.isArray(l)||(l=[l]),r=r+s+"_";for(var d=0;d<l.length;d++){var y=l[d];if(typeof y=="string")t[s][y]=q4(e,r+y);else for(var n in y)XE(e,t[s],r,n,y[n])}}}function i7(e,t){for(var r=ZE.normalize(t),s=Object.create(null),l=0;l<r.length;l++){var d=r[l];if(typeof d=="string")s[d]===void 0&&(s[d]=q4(e,d));else for(var y in d)XE(e,s,"",y,d[y])}return s}var G$=function(){function e(t,r){this.client=t,this.namespace=r}return e.prototype.get=function(t,r,s){if(typeof r!="symbol"&&r!=="then")return r in t||(t[r]=new Proxy(function(){},new e(this.client,this.namespace?this.namespace+"_"+r:""+r))),t[r]},e.prototype.apply=function(t,r,s){if(this.namespace){var l=s.length>0&&s[s.length-1]instanceof Md.ClientContext?s.pop():new Md.ClientContext;return this.client.invoke(this.namespace,s,l)}throw new TypeError("target is not a function")},e}(),W$=function(){function e(t){var r,s=this;this.returnTypes=Object.create(null),this.requestHeaders=Object.create(null),this.codec=V$.DefaultClientCodec.instance,this.timeout=3e4,this.urilist=[],this.transports=Object.create(null),this.invokeManager=new q$.InvokeManager(this.call.bind(this)),this.ioManager=new H$.IOManager(this.transport.bind(this)),e.transports.forEach(function(l){var d=l.name,y=l.ctor,n=new y;s.transports[d]=n,Object.defineProperty(s,d,{get:function(){return n},set:function(M){n=M,s.transports[d]=M},enumerable:!1,configurable:!1})}),t&&(typeof t=="string"?this.urilist.push(t):(r=this.urilist).push.apply(r,t))}return e.register=function(t,r){e.transports.push({name:t,ctor:r}),r.schemes.forEach(function(s){return e.protocols[s+":"]=t})},Object.defineProperty(e.prototype,"uris",{get:function(){return this.urilist},set:function(t){t.length>0&&(this.urilist=t.slice(0),this.urilist.sort(function(){return Math.random()-.5}))},enumerable:!0,configurable:!0}),e.prototype.useService=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var s,l;switch(t.length){case 1:if(Array.isArray(t[0]))return i7(this,t[0]);typeof t[0]=="string"?s=t[0]:l=t[0];break;case 2:s=t[0],l=t[1];break}var d=Object.create(null);if(l){for(var y in l){var n=""+y;s&&(n=s+"_"+y),this.returnTypes[n]=l[y],d[y]=q4(this,n)}return d}return new Proxy(d,new G$(this,s))},e.prototype.useServiceAsync=function(){return R0(this,void 0,void 0,function(){var t;return L0(this,function(r){switch(r.label){case 0:return[4,this.invoke("~")];case 1:return t=r.sent(),[2,i7(this,t)]}})})},e.prototype.use=function(){for(var t,r,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(s.length<=0)return this;switch(s[0].length){case 4:(t=this.invokeManager).use.apply(t,s);break;case 3:(r=this.ioManager).use.apply(r,s);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.unuse=function(){for(var t,r,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(s.length<=0)return this;switch(s[0].length){case 4:(t=this.invokeManager).unuse.apply(t,s);break;case 3:(r=this.ioManager).unuse.apply(r,s);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.invoke=function(t,r,s){return r===void 0&&(r=[]),s===void 0&&(s=new Md.ClientContext),R0(this,void 0,void 0,function(){var l;return L0(this,function(d){switch(d.label){case 0:return r===null&&(r=[]),r.length>0?[4,Promise.all(r)]:[3,2];case 1:r=d.sent(),d.label=2;case 2:return l=s instanceof Md.ClientContext?s:new Md.ClientContext(s),l.init(this,this.returnTypes[t]),[2,this.invokeManager.handler(t,r,l)]}})})},e.prototype.call=function(t,r,s){return R0(this,void 0,void 0,function(){var l,d,y;return L0(this,function(n){switch(n.label){case 0:return l=this.codec,d=l.encode(t,r,s),[4,this.request(d,s)];case 1:return y=n.sent(),[2,l.decode(y,s)]}})})},e.prototype.request=function(t,r){return this.ioManager.handler(t,r)},e.prototype.transport=function(t,r){return R0(this,void 0,void 0,function(){var s,l;return L0(this,function(d){if(s=ZE.parseURI(r.uri),l=e.protocols[s.protocol],l!==void 0)return[2,this.transports[l].transport(t,r)];throw new Error('The protocol "'+s.protocol+'" is not supported.')})})},e.prototype.abort=function(){return R0(this,void 0,void 0,function(){var t,r;return L0(this,function(s){switch(s.label){case 0:t=[];for(r in this.transports)t.push(this.transports[r].abort());return[4,Promise.all(t)];case 1:return s.sent(),[2]}})})},e.transports=[],e.protocols=Object.create(null),e}();Iy.Client=W$;var $y={};Object.defineProperty($y,"__esModule",{value:!0});var vd=Object.create(null);function Z$(e,t){t===void 0&&(t="@");function r(d){var y;if(d!==void 0){var n=d.trim().split(";"),M=Object.create(null);y=n[0].trim().split("=",2),M.name=y[0],M.value=y[1];for(var P=1;P<n.length;P++){var L=n[P].trim().split("=",2),V=L[0],X=L[1];M[V.toUpperCase()]=X}if(M.PATH){var J=M.PATH.length;J>2&&M.PATH.charAt(0)==='"'&&M.PATH.charAt(J-1)==='"'&&(M.PATH=M.PATH.substr(1,J-2))}else M.PATH="/";M.EXPIRES&&(M.EXPIRES=Date.parse(M.EXPIRES)),M.DOMAIN?M.DOMAIN=M.DOMAIN.toLowerCase():M.DOMAIN=t,M.SECURE=M.SECURE!==void 0,vd[M.DOMAIN]===void 0&&(vd[M.DOMAIN]=Object.create(null)),vd[M.DOMAIN][M.name]=M}}for(var s in e)if(s=s.toLowerCase(),s==="set-cookie"||s==="set-cookie2"){var l=e[s];(Array.isArray(l)?l:[l]).forEach(r)}}$y.setCookie=Z$;function X$(e,t,r){e=e??"@",t=t??"/";var s=[];for(var l in vd)if(e.indexOf(l)>-1){var d=[];for(var y in vd[l]){var n=vd[l][y];n.EXPIRES&&new Date().getTime()>n.EXPIRES?d.push(y):t.indexOf(n.PATH)===0&&r===n.SECURE&&n.value!==null&&s.push(n.name+"="+n.value)}for(var M=0,P=d.length;M<P;++M)delete vd[l][d[M]]}return s.length>0?s.join("; "):""}$y.getCookie=X$;var jy={};Object.defineProperty(jy,"__esModule",{value:!0});function Y$(){var e=Object.create(null);return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e}jy.defer=Y$;var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});var J$=function(){function e(t,r,s,l){if(this.method=t,this.name=r,this.target=s,this.paramTypes=l,r===""||r===void 0){if(t.name==="")throw new Error("name must not be empty");r=t.name}}return e}();Wm.Method=J$;var Uy={};Object.defineProperty(Uy,"__esModule",{value:!0});var ea=Wm,K$=function(){function e(){this.methods=Object.create(null),this.names=[]}return e.prototype.getNames=function(){return this.names},e.prototype.get=function(t){return t=t.toLowerCase(),t in this.methods?this.methods[t]:this.methods["*"]},e.prototype.remove=function(t){delete this.methods[t.toLowerCase()];var r=this.names.indexOf(t);r>-1&&this.names.splice(r,1)},e.prototype.add=function(t){var r=t.name;if(r===""||r===void 0){if(r=t.fullname,(r===""||r===void 0)&&(r=t.method.name,r===""))throw new Error("name must not be empty");t.name=r}this.methods[r.toLowerCase()]=t,this.names.indexOf(r)===-1&&this.names.push(r)},e.prototype.addFunction=function(t){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];switch(r.length){case 0:this.add(new ea.Method(t));break;case 1:typeof r[0]=="string"?this.add(new ea.Method(t,r[0])):this.add(new ea.Method(t,void 0,void 0,r[0]));break;case 2:this.add(new ea.Method(t,r[0],void 0,r[1]));break}},e.prototype.addMethod=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(typeof t[0]=="string"){var s=t[1][t[0]];if(typeof s=="function")this.add(new ea.Method(s,t[0],t[1],t[2]));else throw new Error("obj[name] must be a function")}else switch(t.length){case 2:this.add(new ea.Method(t[0],void 0,t[1]));break;case 3:typeof t[2]=="string"?this.add(new ea.Method(t[0],t[2],t[1])):this.add(new ea.Method(t[0],void 0,t[1],t[2]));break;case 4:this.add(new ea.Method(t[0],t[2],t[1],t[3]))}},e.prototype.addMissingMethod=function(t,r){var s=new ea.Method(t,"*",r);s.missing=!0,t.length===3&&(s.passContext=!0),this.add(s)},e.prototype.addFunctions=function(t){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var l,d;switch(r.length){case 1:r[0].length>1&&typeof r[0][0]=="string"?l=r[0]:d=r[0];break;case 2:l=r[0],d=r[1];break}var y=t.length;if(l&&l.length!==y)throw new Error("names.length must be equal to functions.length");for(var n=0;n<y;++n)this.add(new ea.Method(t[n],l?l[n]:void 0,void 0,d))},e.prototype.addMethods=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var s=t[0].length;if(s!==0){var l,d=t[1],y,n;if(typeof t[0][0]=="string"){y=t[0],n=t[2];for(var M=0;M<s;++M){var P=d[y[M]];if(typeof P=="function")this.add(new ea.Method(P,y[M],d,n));else throw new Error("obj[name] must be a function")}return}else l=t[0];switch(t.length){case 3:t[2].length>0&&typeof t[2][0]=="string"?y=t[2]:n=t[2];break;case 4:y=t[2],n=t[3]}if(y&&y.length!==s)throw new Error("names.length must be equal to functions.length");for(var M=0;M<s;++M)this.add(new ea.Method(l[M],y?y[M]:void 0,d,n))}},e.prototype.addInstanceMethods=function(t,r){for(var s in t)if((!t.hasOwnProperty||t.hasOwnProperty(s))&&typeof t[s]=="function"){var l=r?r+"_"+s:s;this.add(new ea.Method(t[s],l,t))}},e}();Uy.MethodManager=K$;var Vy={},Q$=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(Vy,"__esModule",{value:!0});var ej=function(e){Q$(t,e);function t(r){return r===void 0&&(r="timeout"),e.call(this,r)||this}return t}(Error);Vy.TimeoutError=ej;var qy={},Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});var O0=Vo,tj=function(){function e(){this.debug=!1,this.simple=!1,this.utc=!1,this.longType="number",this.dictType="object",this.nullType=void 0}return e.prototype.encode=function(t,r){var s=new O0.ByteStream,l=new O0.Writer(s,this.simple,this.utc),d=r.responseHeaders;this.simple&&(d.simple=!0);var y=0;for(var n in d)y++;return y>0&&(s.writeByte(72),l.serialize(d),l.reset()),t instanceof Error?(s.writeByte(69),l.serialize(this.debug&&t.stack?t.stack:t.message)):(s.writeByte(82),l.serialize(t)),s.writeByte(122),s.takeBytes()},e.prototype.decodeMethod=function(t,r){var s=r.service,l=s.get(t);if(l===void 0)throw new Error("Can't find this method "+t+"().");return r.method=l,l},e.prototype.decodeArguments=function(t,r,s){var l=r.stream,d=l.readByte();if(t.missing)return d===97?(r.reset(),r.read(d,Array)):[];var y=[];if(d===97){r.reset();var n=O0.ValueReader.readCount(l),M=t.paramTypes;if(M===void 0)M=new Array(n).fill(this.nullType);else{M.length=n;for(var P=0;P<n;++P)M[P]===void 0&&(M[P]=this.nullType)}y=new Array(n),r.addReference(y);for(var P=0;P<n;++P)y[P]=r.deserialize(M[P]);l.readByte()}return y},e.prototype.decode=function(t,r){if(t.length===0)return this.decodeMethod("~",r),["~",[]];var s=new O0.ByteStream(t),l=new O0.Reader(s,!1);l.longType=this.longType,l.dictType=this.dictType;var d=s.readByte();if(d===72){var y=l.deserialize(this.nullType);for(var n in y)r.requestHeaders[n]=y[n];l.reset(),d=s.readByte()}switch(d){case 67:r.requestHeaders.simple&&(l.simple=!0);var M=l.deserialize(String),P=this.decodeArguments(this.decodeMethod(M,r),l,r);return[M,P];case 122:return this.decodeMethod("~",r),["~",[]];default:throw new Error(`Invalid request:\r
`+s.toString())}},e.instance=new e,e}();Hy.DefaultServiceCodec=tj;var r7=At&&At.__awaiter||function(e,t,r,s){function l(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function n(L){try{P(s.next(L))}catch(V){y(V)}}function M(L){try{P(s.throw(L))}catch(V){y(V)}}function P(L){L.done?d(L.value):l(L.value).then(n,M)}P((s=s.apply(e,t||[])).next())})},n7=At&&At.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,y;return y={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function n(P){return function(L){return M([P,L])}}function M(P){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,l&&(d=P[0]&2?l.return:P[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,P[1])).done)return d;switch(l=0,d&&(P=[P[0]&2,d.value]),P[0]){case 0:case 1:d=P;break;case 4:return r.label++,{value:P[1],done:!1};case 5:r.label++,l=P[1],P=[0];continue;case 7:P=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(P[0]===6||P[0]===2)){r=0;continue}if(P[0]===3&&(!d||P[1]>d[0]&&P[1]<d[3])){r.label=P[1];break}if(P[0]===6&&r.label<d[1]){r.label=d[1],d=P;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(P);break}d[2]&&r.ops.pop(),r.trys.pop();continue}P=t.call(e,r)}catch(L){P=[6,L],l=0}finally{s=d=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},O_=At&&At.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),l=0,t=0;t<r;t++)for(var d=arguments[t],y=0,n=d.length;y<n;y++,l++)s[l]=d[y];return s};Object.defineProperty(qy,"__esModule",{value:!0});var ij=Hy,rj=qm,nj=Gm,oj=Wm,sj=Uy,aj=function(){function e(){var t=this;this.codec=ij.DefaultServiceCodec.instance,this.maxRequestLength=2147483647,this.invokeManager=new rj.InvokeManager(this.execute.bind(this)),this.ioManager=new nj.IOManager(this.process.bind(this)),this.methodManager=new sj.MethodManager,this.handlers=Object.create(null),this.options=Object.create(null);var r=function(d){var y=e.handlers[d],n=new y(s);s.handlers[d]=n,Object.defineProperty(s,d,{get:function(){return n},set:function(M){n=M,t.handlers[d]=M},enumerable:!0,configurable:!0})},s=this;for(var l in e.handlers)r(l);this.add(new oj.Method(this.methodManager.getNames.bind(this.methodManager),"~"))}return e.register=function(t,r){e.handlers[t]=r,r.serverTypes.forEach(function(s){e.serverTypes.has(s)?e.serverTypes.get(s).push(t):e.serverTypes.set(s,[t])})},Object.defineProperty(e.prototype,"names",{get:function(){return this.methodManager.getNames()},enumerable:!0,configurable:!0}),e.prototype.bind=function(t,r){var s=t.constructor,l=e.serverTypes;if(l.has(s))for(var d=l.get(s),y=0,n=d.length;y<n;++y)(r===void 0||r===d[y])&&this.handlers[d[y]].bind(t);else throw new Error("This type server is not supported.");return this},e.prototype.handle=function(t,r){return this.ioManager.handler(t,r)},e.prototype.process=function(t,r){return r7(this,void 0,void 0,function(){var s,l,d,y,n,M;return n7(this,function(P){switch(P.label){case 0:s=this.codec,P.label=1;case 1:return P.trys.push([1,3,,4]),d=s.decode(t,r),y=d[0],n=d[1],[4,this.invokeManager.handler(y,n,r)];case 2:return l=P.sent(),[3,4];case 3:return M=P.sent(),l=M,[3,4];case 4:return[2,s.encode(l,r)]}})})},e.prototype.execute=function(t,r,s){return r7(this,void 0,void 0,function(){var l,d;return n7(this,function(y){return l=s.method,d=l.method,l.missing?l.passContext?[2,d.apply(l.target,[t,r,s])]:[2,d.apply(l.target,[t,r])]:(l.passContext&&r.push(s),[2,d.apply(l.target,r)])})})},e.prototype.use=function(){for(var t,r,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(s.length<=0)return this;switch(s[0].length){case 4:(t=this.invokeManager).use.apply(t,s);break;case 3:(r=this.ioManager).use.apply(r,s);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.unuse=function(){for(var t,r,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(s.length<=0)return this;switch(s[0].length){case 4:(t=this.invokeManager).unuse.apply(t,s);break;case 3:(r=this.ioManager).unuse.apply(r,s);break;default:throw new TypeError("Invalid parameter type")}return this},e.prototype.get=function(t){return this.methodManager.get(t)},e.prototype.add=function(t){return this.methodManager.add(t),this},e.prototype.remove=function(t){return this.methodManager.remove(t),this},e.prototype.addFunction=function(t){for(var r,s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return(r=this.methodManager).addFunction.apply(r,O_([t],s)),this},e.prototype.addMethod=function(){for(var t,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return(t=this.methodManager).addMethod.apply(t,O_([r[0],r[1]],r.slice(2))),this},e.prototype.addMissingMethod=function(t,r){return this.methodManager.addMissingMethod(t,r),this},e.prototype.addFunctions=function(t){for(var r,s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return(r=this.methodManager).addFunctions.apply(r,O_([t],s)),this},e.prototype.addMethods=function(){for(var t,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return(t=this.methodManager).addMethods.apply(t,O_([r[0],r[1]],r.slice(2))),this},e.prototype.addInstanceMethods=function(t,r){return this.methodManager.addInstanceMethods(t,r),this},e.handlers=Object.create(null),e.serverTypes=new Map,e}();qy.Service=aj;var Gy={},lj=At&&At.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)l.hasOwnProperty(d)&&(s[d]=l[d])},e(t,r)};return function(t,r){e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(Gy,"__esModule",{value:!0});var cj=Vm,uj=function(e){lj(t,e);function t(r){var s=e.call(this)||this;return s.service=r,s}return t}(cj.Context);Gy.ServiceContext=uj;var Wy={},Zy={},hj=At&&At.__awaiter||function(e,t,r,s){function l(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function n(L){try{P(s.next(L))}catch(V){y(V)}}function M(L){try{P(s.throw(L))}catch(V){y(V)}}function P(L){L.done?d(L.value):l(L.value).then(n,M)}P((s=s.apply(e,t||[])).next())})},dj=At&&At.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,y;return y={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function n(P){return function(L){return M([P,L])}}function M(P){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,l&&(d=P[0]&2?l.return:P[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,P[1])).done)return d;switch(l=0,d&&(P=[P[0]&2,d.value]),P[0]){case 0:case 1:d=P;break;case 4:return r.label++,{value:P[1],done:!1};case 5:r.label++,l=P[1],P=[0];continue;case 7:P=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(P[0]===6||P[0]===2)){r=0;continue}if(P[0]===3&&(!d||P[1]>d[0]&&P[1]<d[3])){r.label=P[1];break}if(P[0]===6&&r.label<d[1]){r.label=d[1],d=P;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(P);break}d[2]&&r.ops.pop(),r.trys.pop();continue}P=t.call(e,r)}catch(L){P=[6,L],l=0}finally{s=d=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(Zy,"__esModule",{value:!0});var fj=function(){function e(){}return e.register=function(t,r){e.handlers[t]=r},e.cancel=function(t){delete e.handlers[t]},e.handler=function(t,r){return hj(this,void 0,void 0,function(){var s;return dj(this,function(l){if(s=e.handlers[t],s)return[2,s(t,r)];throw new Error("Server is stopped")})})},e.handlers=Object.create(null),e}();Zy.MockAgent=fj;var pj=At&&At.__awaiter||function(e,t,r,s){function l(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function n(L){try{P(s.next(L))}catch(V){y(V)}}function M(L){try{P(s.throw(L))}catch(V){y(V)}}function P(L){L.done?d(L.value):l(L.value).then(n,M)}P((s=s.apply(e,t||[])).next())})},mj=At&&At.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,y;return y={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function n(P){return function(L){return M([P,L])}}function M(P){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,l&&(d=P[0]&2?l.return:P[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,P[1])).done)return d;switch(l=0,d&&(P=[P[0]&2,d.value]),P[0]){case 0:case 1:d=P;break;case 4:return r.label++,{value:P[1],done:!1};case 5:r.label++,l=P[1],P=[0];continue;case 7:P=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(P[0]===6||P[0]===2)){r=0;continue}if(P[0]===3&&(!d||P[1]>d[0]&&P[1]<d[3])){r.label=P[1];break}if(P[0]===6&&r.label<d[1]){r.label=d[1],d=P;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(P);break}d[2]&&r.ops.pop(),r.trys.pop();continue}P=t.call(e,r)}catch(L){P=[6,L],l=0}finally{s=d=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(Wy,"__esModule",{value:!0});var gj=Gy,_j=qy,YE=Zy,JE=function(){function e(t){this.address=t}return e.prototype.close=function(){YE.MockAgent.cancel(this.address)},e}();Wy.MockServer=JE;var KE=function(){function e(t){var r=this;this.service=t,this.handler=function(s,l){return pj(r,void 0,void 0,function(){var d,y;return mj(this,function(n){if(l.length>this.service.maxRequestLength)throw new Error("Request entity too large");return d=new gj.ServiceContext(this.service),y={family:"mock",address:s,port:0},d.remoteAddress=y,d.localAddress=y,d.handler=this,[2,this.service.handle(l,d)]})})}}return e.prototype.bind=function(t){YE.MockAgent.register(t.address,this.handler)},e.serverTypes=[JE],e}();Wy.MockHandler=KE;_j.Service.register("mock",KE);var H4={},o7=At&&At.__awaiter||function(e,t,r,s){function l(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function n(L){try{P(s.next(L))}catch(V){y(V)}}function M(L){try{P(s.throw(L))}catch(V){y(V)}}function P(L){L.done?d(L.value):l(L.value).then(n,M)}P((s=s.apply(e,t||[])).next())})},s7=At&&At.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,y;return y={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function n(P){return function(L){return M([P,L])}}function M(P){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,l&&(d=P[0]&2?l.return:P[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,P[1])).done)return d;switch(l=0,d&&(P=[P[0]&2,d.value]),P[0]){case 0:case 1:d=P;break;case 4:return r.label++,{value:P[1],done:!1};case 5:r.label++,l=P[1],P=[0];continue;case 7:P=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(P[0]===6||P[0]===2)){r=0;continue}if(P[0]===3&&(!d||P[1]>d[0]&&P[1]<d[3])){r.label=P[1];break}if(P[0]===6&&r.label<d[1]){r.label=d[1],d=P;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(P);break}d[2]&&r.ops.pop(),r.trys.pop();continue}P=t.call(e,r)}catch(L){P=[6,L],l=0}finally{s=d=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(H4,"__esModule",{value:!0});var yj=Iy,vj=bh,xj=Zy,bj=jy,wj=Vy,QE=function(){function e(){}return e.prototype.transport=function(t,r){return o7(this,void 0,void 0,function(){var s,l,d;return s7(this,function(y){return s=vj.parseURI(r.uri),l=bj.defer(),r.timeout>0&&(d=setTimeout(function(){l.reject(new wj.TimeoutError)},r.timeout),l.promise.then(function(){clearTimeout(d)},function(){clearTimeout(d)})),xj.MockAgent.handler(s.hostname,t).then(function(n){return l.resolve(n)},function(n){return l.reject(n)}),[2,l.promise]})})},e.prototype.abort=function(){return o7(this,void 0,void 0,function(){return s7(this,function(t){return[2]})})},e.schemes=["mock"],e}();H4.MockTransport=QE;yj.Client.register("mock",QE);Object.defineProperty(zn,"__esModule",{value:!0});var Sj=Iy,moe=zn.Client=Sj.Client,Mj=zy;zn.DefaultClientCodec=Mj.DefaultClientCodec;var Ej=Ny,goe=zn.ClientContext=Ej.ClientContext,Tj=Vm;zn.Context=Tj.Context;var eT=$y;zn.getCookie=eT.getCookie;zn.setCookie=eT.setCookie;var Cj=jy;zn.defer=Cj.defer;var Aj=Hm;zn.PluginManager=Aj.PluginManager;var Ij=qm;zn.InvokeManager=Ij.InvokeManager;var zj=Gm;zn.IOManager=zj.IOManager;var Dj=Wm;zn.Method=Dj.Method;var Pj=Uy;zn.MethodManager=Pj.MethodManager;var kj=Vy;zn.TimeoutError=kj.TimeoutError;var Xy=bh;zn.parseURI=Xy.parseURI;zn.normalize=Xy.normalize;zn.promisify=Xy.promisify;zn.crc32=Xy.crc32;var Rj=qy;zn.Service=Rj.Service;var Lj=Hy;zn.DefaultServiceCodec=Lj.DefaultServiceCodec;var Oj=Gy;zn.ServiceContext=Oj.ServiceContext;var tT=Wy;zn.MockServer=tT.MockServer;zn.MockHandler=tT.MockHandler;var Bj=H4;zn.MockTransport=Bj.MockTransport;var G4={},W4={},a7=At&&At.__awaiter||function(e,t,r,s){function l(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function n(L){try{P(s.next(L))}catch(V){y(V)}}function M(L){try{P(s.throw(L))}catch(V){y(V)}}function P(L){L.done?d(L.value):l(L.value).then(n,M)}P((s=s.apply(e,t||[])).next())})},l7=At&&At.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,y;return y={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function n(P){return function(L){return M([P,L])}}function M(P){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,l&&(d=P[0]&2?l.return:P[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,P[1])).done)return d;switch(l=0,d&&(P=[P[0]&2,d.value]),P[0]){case 0:case 1:d=P;break;case 4:return r.label++,{value:P[1],done:!1};case 5:r.label++,l=P[1],P=[0];continue;case 7:P=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(P[0]===6||P[0]===2)){r=0;continue}if(P[0]===3&&(!d||P[1]>d[0]&&P[1]<d[3])){r.label=P[1];break}if(P[0]===6&&r.label<d[1]){r.label=d[1],d=P;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(P);break}d[2]&&r.ops.pop(),r.trys.pop();continue}P=t.call(e,r)}catch(L){P=[6,L],l=0}finally{s=d=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(W4,"__esModule",{value:!0});var iT=zn;function Fj(e){var t=Object.create(null);if(e){for(var r=e.split(`\r
`),s=0,l=r.length;s<l;s++)if(r[s]!==""){var d=r[s].split(": ",2).map(function(M){return M.trim()}),y=d[0],n=d[1];(t.hasOwnProperty?t.hasOwnProperty(y):y in t)?Array.isArray(t[y])?t[y].push(n):t[y]=[t[y],n]:t[y]=n}}return t}var rT=function(){function e(){this.counter=0,this.requests=Object.create(null),this.httpRequestHeaders=Object.create(null),this.onprogress=null}return e.prototype.setRequestHeaders=function(t,r){for(var s in r)if(!r.hasOwnProperty||r.hasOwnProperty(s)){var l=r[s];l!==void 0&&(Array.isArray(l)?t[s]=l.join(", "):t[s]=l+"")}},e.prototype.getRequestHeaders=function(t){var r=Object.create(null);return this.setRequestHeaders(r,this.httpRequestHeaders),t&&this.setRequestHeaders(r,t),r},e.prototype.transport=function(t,r){return a7(this,void 0,void 0,function(){var s,l,d,y,n,M,P,L,V=this;return l7(this,function(X){s=this.counter<2147483647?++this.counter:this.counter=0,l=new XMLHttpRequest,d=this,this.requests[s]=l,y=r,n=this.getRequestHeaders(y.httpRequestHeaders),M=new Promise(function(J,Z){l.upload.onprogress=l.onprogress=V.onprogress,l.upload.onerror=l.onerror=function(ie){delete d.requests[s],Z(new Error("network error"))},l.upload.onabort=l.onabort=function(ie){delete d.requests[s],Z(new Error("transport abort"))},l.upload.ontimeout=l.ontimeout=function(ie){delete d.requests[s],Z(new iT.TimeoutError)},l.onload=function(ie){delete d.requests[s],y.httpStatusCode=this.status,y.httpStatusText=this.statusText,this.status>=200&&this.status<300?(y.httpResponseHeaders=Fj(this.getAllResponseHeaders()),J(new Uint8Array(this.response))):Z(new Error(this.status+":"+this.statusText))}}),l.open("POST",r.uri,!0),l.withCredentials=!0,l.responseType="arraybuffer",l.timeout=r.timeout;for(P in n)l.setRequestHeader(P,n[P]);return typeof ArrayBuffer.isView=="function"?l.send(t):typeof t.buffer.slice=="function"?l.send(t.buffer.slice(t.byteOffset,t.length)):(L=new Uint8Array(t.length),L.set(t),l.send(L.buffer)),[2,M]})})},e.prototype.abort=function(){return a7(this,void 0,void 0,function(){var t,r;return l7(this,function(s){for(t in this.requests)r=this.requests[t],delete this.requests[t],r&&r.abort();return[2]})})},e.schemes=["http","https"],e}();W4.HttpTransport=rT;iT.Client.register("http",rT);var Z4={},B_=At&&At.__awaiter||function(e,t,r,s){function l(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function n(L){try{P(s.next(L))}catch(V){y(V)}}function M(L){try{P(s.throw(L))}catch(V){y(V)}}function P(L){L.done?d(L.value):l(L.value).then(n,M)}P((s=s.apply(e,t||[])).next())})},F_=At&&At.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,y;return y={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function n(P){return function(L){return M([P,L])}}function M(P){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,l&&(d=P[0]&2?l.return:P[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,P[1])).done)return d;switch(l=0,d&&(P=[P[0]&2,d.value]),P[0]){case 0:case 1:d=P;break;case 4:return r.label++,{value:P[1],done:!1};case 5:r.label++,l=P[1],P=[0];continue;case 7:P=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(P[0]===6||P[0]===2)){r=0;continue}if(P[0]===3&&(!d||P[1]>d[0]&&P[1]<d[3])){r.label=P[1];break}if(P[0]===6&&r.label<d[1]){r.label=d[1],d=P;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(P);break}d[2]&&r.ops.pop(),r.trys.pop();continue}P=t.call(e,r)}catch(L){P=[6,L],l=0}finally{s=d=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(Z4,"__esModule",{value:!0});var d2=zn,c7=Vo,nT=function(){function e(){this.counter=0,this.results=Object.create(null),this.websockets=Object.create(null)}return e.prototype.connect=function(t){return B_(this,void 0,void 0,function(){var r,s,l,d=this;return F_(this,function(y){switch(y.label){case 0:return[4,this.websockets[t]];case 1:return r=y.sent(),r!==void 0&&r.readyState!==WebSocket.CLOSING&&r.readyState!==WebSocket.CLOSED?[2,r]:(s=d2.defer(),r=new WebSocket(t,"hprose"),r.binaryType="arraybuffer",r.onopen=function(){return s.resolve(r)},r.onmessage=function(n){return B_(d,void 0,void 0,function(){var M,P,L;return F_(this,function(V){return M=new c7.ByteStream(n.data),P=M.readInt32BE(),L=this.results[t][P],delete this.results[t][P],L&&L.resolve(M.remains),[2]})})},l=function(n){var M=d.results[t];if(M)for(var P in M){var L=M[P];delete M[P],L.reject(n)}delete d.websockets[t]},r.onerror=function(n){return l(new Error("error"))},r.onclose=function(n){n.reason?l(new Error(n.code+":"+n.reason)):l(new Error(""+n.code))},this.websockets[t]=s.promise,[2,s.promise])}})})},e.prototype.transport=function(t,r){return B_(this,void 0,void 0,function(){var s,l,d,y,n,M,P,L=this;return F_(this,function(V){switch(V.label){case 0:return s=r.uri,l=this.counter<2147483647?++this.counter:this.counter=0,d=d2.defer(),[4,this.connect(s)];case 1:return y=V.sent(),this.results[s]===void 0&&(this.results[s]=Object.create(null)),this.results[s][l]=d,r.timeout>0&&(n=setTimeout(function(){delete L.results[s][l],d.reject(new d2.TimeoutError)},r.timeout),d.promise.then(function(){clearTimeout(n)},function(){clearTimeout(n)})),M=new c7.ByteStream(4+t.length),M.writeInt32BE(l),M.write(t),P=M.takeBytes(),typeof ArrayBuffer.isView=="function"?y.send(P):y.send(P.buffer),[2,d.promise]}})})},e.prototype.abort=function(){return B_(this,void 0,void 0,function(){var t,r,s,l,d;return F_(this,function(y){switch(y.label){case 0:t=[];for(r in this.websockets)t.push(r);s=0,y.label=1;case 1:return s<t.length?(l=t[s],d=this.websockets[l],delete this.websockets[l],d?[4,d]:[3,3]):[3,4];case 2:y.sent().close(1e3),y.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},e.schemes=["ws","wss"],e}();Z4.WebSocketTransport=nT;d2.Client.register("websocket",nT);Object.defineProperty(G4,"__esModule",{value:!0});var Nj=W4,_oe=G4.HttpTransport=Nj.HttpTransport,$j=Z4;G4.WebSocketTransport=$j.WebSocketTransport;var jj=!1;/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let oT;const Yy=e=>oT=e,sT=Symbol();function Cb(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var wc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(wc||(wc={}));const em=typeof window<"u",u7=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null};function Uj(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function X4(e,t,r){const s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){cT(s.response,t,r)},s.onerror=function(){},s.send()}function aT(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function f2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const p2=typeof navigator=="object"?navigator:{userAgent:""},lT=/Macintosh/.test(p2.userAgent)&&/AppleWebKit/.test(p2.userAgent)&&!/Safari/.test(p2.userAgent),cT=em?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!lT?Vj:"msSaveOrOpenBlob"in p2?qj:Hj:()=>{};function Vj(e,t="download",r){const s=document.createElement("a");s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?aT(s.href)?X4(e,t,r):(s.target="_blank",f2(s)):f2(s)):(s.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(s.href)},4e4),setTimeout(function(){f2(s)},0))}function qj(e,t="download",r){if(typeof e=="string")if(aT(e))X4(e,t,r);else{const s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){f2(s)})}else navigator.msSaveOrOpenBlob(Uj(e,r),t)}function Hj(e,t,r,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return X4(e,t,r);const l=e.type==="application/octet-stream",d=/constructor/i.test(String(u7.HTMLElement))||"safari"in u7,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||l&&d||lT)&&typeof FileReader<"u"){const n=new FileReader;n.onloadend=function(){let M=n.result;if(typeof M!="string")throw s=null,new Error("Wrong reader.result type");M=y?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=M:location.assign(M),s=null},n.readAsDataURL(e)}else{const n=URL.createObjectURL(e);s?s.location.assign(n):location.href=n,s=null,setTimeout(function(){URL.revokeObjectURL(n)},4e4)}}function $o(e,t){const r=" "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"&&__VUE_DEVTOOLS_TOAST__(r,t)}function Y4(e){return"_a"in e&&"install"in e}function uT(){if(!("clipboard"in navigator))return $o("Your browser doesn't support the Clipboard API","error"),!0}function hT(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?($o('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function Gj(e){if(!uT())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),$o("Global state copied to clipboard.")}catch(t){if(hT(t))return;$o("Failed to serialize the state. Check the console for more details.","error")}}async function Wj(e){if(!uT())try{dT(e,JSON.parse(await navigator.clipboard.readText())),$o("Global state pasted from clipboard.")}catch(t){if(hT(t))return;$o("Failed to deserialize the state from clipboard. Check the console for more details.","error")}}async function Zj(e){try{cT(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch{$o("Failed to export the state as JSON. Check the console for more details.","error")}}let Yc;function Xj(){Yc||(Yc=document.createElement("input"),Yc.type="file",Yc.accept=".json");function e(){return new Promise((t,r)=>{Yc.onchange=async()=>{const s=Yc.files;if(!s)return t(null);const l=s.item(0);return t(l?{text:await l.text(),file:l}:null)},Yc.oncancel=()=>t(null),Yc.onerror=r,Yc.click()})}return e}async function Yj(e){try{const r=await Xj()();if(!r)return;const{text:s,file:l}=r;dT(e,JSON.parse(s)),$o(`Global state imported from "${l.name}".`)}catch{$o("Failed to import the state from JSON. Check the console for more details.","error")}}function dT(e,t){for(const r in t){const s=e.state.value[r];s?Object.assign(s,t[r]):e.state.value[r]=t[r]}}function Ol(e){return{_custom:{display:e}}}const fT=" Pinia (root)",m2="_root";function Jj(e){return Y4(e)?{id:m2,label:fT}:{id:e.$id,label:e.$id}}function Kj(e){if(Y4(e)){const r=Array.from(e._s.keys()),s=e._s;return{state:r.map(d=>({editable:!0,key:d,value:e.state.value[d]})),getters:r.filter(d=>s.get(d)._getters).map(d=>{const y=s.get(d);return{editable:!1,key:d,value:y._getters.reduce((n,M)=>(n[M]=y[M],n),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function Qj(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Ol(e.type),key:Ol(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function eU(e){switch(e){case wc.direct:return"mutation";case wc.patchFunction:return"$patch";case wc.patchObject:return"$patch";default:return"unknown"}}let n1=!0;const g2=[],fd="pinia:mutations",ms="pinia",{assign:tU}=Object,U2=e=>" "+e;function iU(e,t){HM({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:g2,app:e},r=>{typeof r.now!="function"&&$o("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:fd,label:"Pinia ",color:15064968}),r.addInspector({id:ms,label:"Pinia ",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{Gj(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await Wj(t),r.sendInspectorTree(ms),r.sendInspectorState(ms)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{Zj(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await Yj(t),r.sendInspectorTree(ms),r.sendInspectorState(ms)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:s=>{const l=t._s.get(s);l?typeof l.$reset!="function"?$o(`Cannot reset "${s}" store because it doesn't have a "$reset" method implemented.`,"warn"):(l.$reset(),$o(`Store "${s}" reset.`)):$o(`Cannot reset "${s}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((s,l)=>{const d=s.componentInstance&&s.componentInstance.proxy;if(d&&d._pStores){const y=s.componentInstance.proxy._pStores;Object.values(y).forEach(n=>{s.instanceData.state.push({type:U2(n.$id),key:"state",editable:!0,value:n._isOptionsAPI?{_custom:{value:Os(n.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>n.$reset()}]}}:Object.keys(n.$state).reduce((M,P)=>(M[P]=n.$state[P],M),{})}),n._getters&&n._getters.length&&s.instanceData.state.push({type:U2(n.$id),key:"getters",editable:!1,value:n._getters.reduce((M,P)=>{try{M[P]=n[P]}catch(L){M[P]=L}return M},{})})})}}),r.on.getInspectorTree(s=>{if(s.app===e&&s.inspectorId===ms){let l=[t];l=l.concat(Array.from(t._s.values())),s.rootNodes=(s.filter?l.filter(d=>"$id"in d?d.$id.toLowerCase().includes(s.filter.toLowerCase()):fT.toLowerCase().includes(s.filter.toLowerCase())):l).map(Jj)}}),globalThis.$pinia=t,r.on.getInspectorState(s=>{if(s.app===e&&s.inspectorId===ms){const l=s.nodeId===m2?t:t._s.get(s.nodeId);if(!l)return;l&&(s.nodeId!==m2&&(globalThis.$store=Os(l)),s.state=Kj(l))}}),r.on.editInspectorState((s,l)=>{if(s.app===e&&s.inspectorId===ms){const d=s.nodeId===m2?t:t._s.get(s.nodeId);if(!d)return $o(`store "${s.nodeId}" not found`,"error");const{path:y}=s;Y4(d)?y.unshift("state"):(y.length!==1||!d._customProperties.has(y[0])||y[0]in d.$state)&&y.unshift("$state"),n1=!1,s.set(d,y,s.state.value),n1=!0}}),r.on.editComponentState(s=>{if(s.type.startsWith("")){const l=s.type.replace(/^\s*/,""),d=t._s.get(l);if(!d)return $o(`store "${l}" not found`,"error");const{path:y}=s;if(y[0]!=="state")return $o(`Invalid path for store "${l}":
${y}
Only state can be modified.`);y[0]="$state",n1=!1,s.set(d,y,s.state.value),n1=!0}})})}function rU(e,t){g2.includes(U2(t.$id))||g2.push(U2(t.$id)),HM({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:g2,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const s=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:y,onError:n,name:M,args:P})=>{const L=pT++;r.addTimelineEvent({layerId:fd,event:{time:s(),title:" "+M,subtitle:"start",data:{store:Ol(t.$id),action:Ol(M),args:P},groupId:L}}),y(V=>{ih=void 0,r.addTimelineEvent({layerId:fd,event:{time:s(),title:" "+M,subtitle:"end",data:{store:Ol(t.$id),action:Ol(M),args:P,result:V},groupId:L}})}),n(V=>{ih=void 0,r.addTimelineEvent({layerId:fd,event:{time:s(),logType:"error",title:" "+M,subtitle:"end",data:{store:Ol(t.$id),action:Ol(M),args:P,error:V},groupId:L}})})},!0),t._customProperties.forEach(y=>{Fi(()=>Y0(t[y]),(n,M)=>{r.notifyComponentUpdate(),r.sendInspectorState(ms),n1&&r.addTimelineEvent({layerId:fd,event:{time:s(),title:"Change",subtitle:y,data:{newValue:n,oldValue:M},groupId:ih}})},{deep:!0})}),t.$subscribe(({events:y,type:n},M)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(ms),!n1)return;const P={time:s(),title:eU(n),data:tU({store:Ol(t.$id)},Qj(y)),groupId:ih};n===wc.patchFunction?P.subtitle="":n===wc.patchObject?P.subtitle="":y&&!Array.isArray(y)&&(P.subtitle=y.type),y&&(P.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:y}}),r.addTimelineEvent({layerId:fd,event:P})},{detached:!0,flush:"sync"});const l=t._hotUpdate;t._hotUpdate=uh(y=>{l(y),r.addTimelineEvent({layerId:fd,event:{time:s(),title:" "+t.$id,subtitle:"HMR update",data:{store:Ol(t.$id),info:Ol("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(ms),r.sendInspectorState(ms)});const{$dispose:d}=t;t.$dispose=()=>{d(),r.notifyComponentUpdate(),r.sendInspectorTree(ms),r.sendInspectorState(ms),r.getSettings().logStoreChanges&&$o(`Disposed "${t.$id}" store `)},r.notifyComponentUpdate(),r.sendInspectorTree(ms),r.sendInspectorState(ms),r.getSettings().logStoreChanges&&$o(`"${t.$id}" store installed `)})}let pT=0,ih;function h7(e,t,r){const s=t.reduce((l,d)=>(l[d]=Os(e)[d],l),{});for(const l in s)e[l]=function(){const d=pT,y=r?new Proxy(e,{get(...M){return ih=d,Reflect.get(...M)},set(...M){return ih=d,Reflect.set(...M)}}):e;ih=d;const n=s[l].apply(y,arguments);return ih=void 0,n}}function nU({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(t._isOptionsAPI=!!r.state,!t._p._testing){h7(t,Object.keys(r.actions),t._isOptionsAPI);const s=t._hotUpdate;Os(t)._hotUpdate=function(l){s.apply(this,arguments),h7(t,Object.keys(l._hmrPayload.actions),!!t._isOptionsAPI)}}rU(e,t)}}function yoe(){const e=qM(!0),t=e.run(()=>oi({}));let r=[],s=[];const l=uh({install(d){Yy(l),l._a=d,d.provide(sT,l),d.config.globalProperties.$pinia=l,em&&iU(d,l),s.forEach(y=>r.push(y)),s=[]},use(d){return!this._a&&!jj?s.push(d):r.push(d),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return typeof Proxy<"u"&&l.use(nU),l}const mT=()=>{};function d7(e,t,r,s=mT){e.push(t);const l=()=>{const d=e.indexOf(t);d>-1&&(e.splice(d,1),s())};return!r&&ek()&&tk(l),l}function Uf(e,...t){e.slice().forEach(r=>{r(...t)})}const oU=e=>e(),f7=Symbol(),xx=Symbol();function Ab(e,t){e instanceof Map&&t instanceof Map?t.forEach((r,s)=>e.set(s,r)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r],l=e[r];Cb(l)&&Cb(s)&&e.hasOwnProperty(r)&&!pm(s)&&!r4(s)?e[r]=Ab(l,s):e[r]=s}return e}const sU=Symbol();function aU(e){return!Cb(e)||!e.hasOwnProperty(sU)}const{assign:Ll}=Object;function lU(e){return!!(pm(e)&&e.effect)}function cU(e,t,r,s){const{state:l,actions:d,getters:y}=t,n=r.state.value[e];let M;function P(){n||(r.state.value[e]=l?l():{});const L=ik(r.state.value[e]);return Ll(L,d,Object.keys(y||{}).reduce((V,X)=>(V[X]=uh(Ve(()=>{Yy(r);const J=r._s.get(e);return y[X].call(J,J)})),V),{}))}return M=gT(e,P,t,r,s,!0),M}function gT(e,t,r={},s,l,d){let y;const n=Ll({actions:{}},r),M={deep:!0};let P,L,V=[],X=[],J;const Z=s.state.value[e];!d&&!Z&&(s.state.value[e]={});const ie=oi({});let ae;function de(ze){let Ze;P=L=!1,typeof ze=="function"?(ze(s.state.value[e]),Ze={type:wc.patchFunction,storeId:e,events:J}):(Ab(s.state.value[e],ze),Ze={type:wc.patchObject,payload:ze,storeId:e,events:J});const Ue=ae=Symbol();Ao().then(()=>{ae===Ue&&(P=!0)}),L=!0,Uf(V,Ze,s.state.value[e])}const fe=d?function(){const{state:Ze}=r,Ue=Ze?Ze():{};this.$patch(vt=>{Ll(vt,Ue)})}:mT;function le(){y.stop(),V=[],X=[],s._s.delete(e)}const he=(ze,Ze="")=>{if(f7 in ze)return ze[xx]=Ze,ze;const Ue=function(){Yy(s);const vt=Array.from(arguments),Be=[],Ke=[];function xt(bt){Be.push(bt)}function yt(bt){Ke.push(bt)}Uf(X,{args:vt,name:Ue[xx],store:Ae,after:xt,onError:yt});let Dt;try{Dt=ze.apply(this&&this.$id===e?this:Ae,vt)}catch(bt){throw Uf(Ke,bt),bt}return Dt instanceof Promise?Dt.then(bt=>(Uf(Be,bt),bt)).catch(bt=>(Uf(Ke,bt),Promise.reject(bt))):(Uf(Be,Dt),Dt)};return Ue[f7]=!0,Ue[xx]=Ze,Ue},Ce=uh({actions:{},getters:{},state:[],hotState:ie}),Le={_p:s,$id:e,$onAction:d7.bind(null,X),$patch:de,$reset:fe,$subscribe(ze,Ze={}){const Ue=d7(V,ze,Ze.detached,()=>vt()),vt=y.run(()=>Fi(()=>s.state.value[e],Be=>{(Ze.flush==="sync"?L:P)&&ze({storeId:e,type:wc.direct,events:J},Be)},Ll({},M,Ze)));return Ue},$dispose:le},Ae=yd(em?Ll({_hmrPayload:Ce,_customProperties:uh(new Set)},Le):Le);s._s.set(e,Ae);const Qe=(s._a&&s._a.runWithContext||oU)(()=>s._e.run(()=>(y=qM()).run(()=>t({action:he}))));for(const ze in Qe){const Ze=Qe[ze];if(pm(Ze)&&!lU(Ze)||r4(Ze))d||(Z&&aU(Ze)&&(pm(Ze)?Ze.value=Z[ze]:Ab(Ze,Z[ze])),s.state.value[e][ze]=Ze);else if(typeof Ze=="function"){const Ue=he(Ze,ze);Qe[ze]=Ue,n.actions[ze]=Ze}}if(Ll(Ae,Qe),Ll(Os(Ae),Qe),Object.defineProperty(Ae,"$state",{get:()=>s.state.value[e],set:ze=>{de(Ze=>{Ll(Ze,ze)})}}),em){const ze={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(Ze=>{Object.defineProperty(Ae,Ze,Ll({value:Ae[Ze]},ze))})}return s._p.forEach(ze=>{if(em){const Ze=y.run(()=>ze({store:Ae,app:s._a,pinia:s,options:n}));Object.keys(Ze||{}).forEach(Ue=>Ae._customProperties.add(Ue)),Ll(Ae,Ze)}else Ll(Ae,y.run(()=>ze({store:Ae,app:s._a,pinia:s,options:n})))}),Z&&d&&r.hydrate&&r.hydrate(Ae.$state,Z),P=!0,L=!0,Ae}/*! #__NO_SIDE_EFFECTS__ */function voe(e,t,r){let s,l;const d=typeof t=="function";typeof e=="string"?(s=e,l=d?r:t):(l=e,s=e.id);function y(n,M){const P=QP();return n=n||(P?eu(sT,null):null),n&&Yy(n),n=oT,n._s.has(s)||(d?gT(s,t,l,n):cU(s,l,n)),n._s.get(s)}return y.$id=s,y}function xoe(e){{const t=Os(e),r={};for(const s in t){const l=t[s];(pm(l)||r4(l))&&(r[s]=KP(e,s))}return r}}function boe(e){return e}function woe(e){return e}function Soe(e){return e}const p7=["B","KB","MB","GB","TB","PB"];function uU(e,t=1){let r=0;for(;parseInt(e,10)>=1024&&r<p7.length-1;)e/=1024,++r;return`${e.toFixed(t)}${p7[r]}`}function hU(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Kc(e,t,r){return r<=t?t:Math.min(r,Math.max(t,e))}function mo(e,t=2,r="0"){if(e==null)return e;const s=""+e;return s.length>=t?s:new Array(t-s.length+1).join(r)+s}const _T=864e5,dU=36e5,Ib=6e4,yT="YYYY-MM-DDTHH:mm:ss.SSSZ",fU=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,pU=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,bx={};function mU(e,t){const r="("+t.days.join("|")+")",s=e+r;if(bx[s]!==void 0)return bx[s];const l="("+t.daysShort.join("|")+")",d="("+t.months.join("|")+")",y="("+t.monthsShort.join("|")+")",n={};let M=0;const P=e.replace(pU,V=>{switch(M++,V){case"YY":return n.YY=M,"(-?\\d{1,2})";case"YYYY":return n.YYYY=M,"(-?\\d{1,4})";case"M":return n.M=M,"(\\d{1,2})";case"Mo":return n.M=M++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return n.M=M,"(\\d{2})";case"MMM":return n.MMM=M,y;case"MMMM":return n.MMMM=M,d;case"D":return n.D=M,"(\\d{1,2})";case"Do":return n.D=M++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return n.D=M,"(\\d{2})";case"H":return n.H=M,"(\\d{1,2})";case"HH":return n.H=M,"(\\d{2})";case"h":return n.h=M,"(\\d{1,2})";case"hh":return n.h=M,"(\\d{2})";case"m":return n.m=M,"(\\d{1,2})";case"mm":return n.m=M,"(\\d{2})";case"s":return n.s=M,"(\\d{1,2})";case"ss":return n.s=M,"(\\d{2})";case"S":return n.S=M,"(\\d{1})";case"SS":return n.S=M,"(\\d{2})";case"SSS":return n.S=M,"(\\d{3})";case"A":return n.A=M,"(AM|PM)";case"a":return n.a=M,"(am|pm)";case"aa":return n.aa=M,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return r;case"Q":case"d":case"E":return"(\\d{1})";case"do":return M++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return M++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return M++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return n.Z=M,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return n.ZZ=M,"(Z|[+-]\\d{2}\\d{2})";case"X":return n.X=M,"(-?\\d+)";case"x":return n.x=M,"(-?\\d{4,})";default:return M--,V[0]==="["&&(V=V.substring(1,V.length-1)),V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),L={map:n,regex:new RegExp("^"+P)};return bx[s]=L,L}function vT(e,t){return e!==void 0?e:t!==void 0?t.date:hb.date}function m7(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),l=Math.floor(s/60),d=s%60;return r+mo(l)+t+mo(d)}function gU(e,t,r){let s=e.getFullYear(),l=e.getMonth();const d=e.getDate();return t.year!==void 0&&(s+=r*t.year,delete t.year),t.month!==void 0&&(l+=r*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(s),e.setMonth(l),e.setDate(Math.min(d,K4(e))),t.date!==void 0&&(e.setDate(e.getDate()+r*t.date),delete t.date),e}function _U(e,t,r){const s=t.year!==void 0?t.year:e[`get${r}FullYear`](),l=t.month!==void 0?t.month-1:e[`get${r}Month`](),d=new Date(s,l+1,0).getDate(),y=Math.min(d,t.date!==void 0?t.date:e[`get${r}Date`]());return e[`set${r}Date`](1),e[`set${r}Month`](2),e[`set${r}FullYear`](s),e[`set${r}Month`](l),e[`set${r}Date`](y),delete t.year,delete t.month,delete t.date,e}function J4(e,t,r){const s=xT(t),l=new Date(e),d=s.year!==void 0||s.month!==void 0||s.date!==void 0?gU(l,s,r):l;for(const y in s){const n=hU(y);d[`set${n}`](d[`get${n}`]()+r*s[y])}return d}function xT(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function bT(e,t,r){const s=xT(t),l=r===!0?"UTC":"",d=new Date(e),y=s.year!==void 0||s.month!==void 0||s.date!==void 0?_U(d,s,l):d;for(const n in s){const M=n.charAt(0).toUpperCase()+n.slice(1);y[`set${l}${M}`](s[n])}return y}function yU(e,t,r){const s=vU(e,t,r),l=new Date(s.year,s.month===null?null:s.month-1,s.day===null?1:s.day,s.hour,s.minute,s.second,s.millisecond),d=l.getTimezoneOffset();return s.timezoneOffset===null||s.timezoneOffset===d?l:J4(l,{minutes:s.timezoneOffset-d},1)}function vU(e,t,r,s,l){const d={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(e==null||e===""||typeof e!="string")return d;t===void 0&&(t=yT);const y=vT(r,mc.props),n=y.months,M=y.monthsShort,{regex:P,map:L}=mU(t,y),V=e.match(P);if(V===null)return d;let X="";if(L.X!==void 0||L.x!==void 0){const J=parseInt(V[L.X!==void 0?L.X:L.x],10);if(isNaN(J)===!0||J<0)return d;const Z=new Date(J*(L.X!==void 0?1e3:1));d.year=Z.getFullYear(),d.month=Z.getMonth()+1,d.day=Z.getDate(),d.hour=Z.getHours(),d.minute=Z.getMinutes(),d.second=Z.getSeconds(),d.millisecond=Z.getMilliseconds()}else{if(L.YYYY!==void 0)d.year=parseInt(V[L.YYYY],10);else if(L.YY!==void 0){const J=parseInt(V[L.YY],10);d.year=J<0?J:2e3+J}if(L.M!==void 0){if(d.month=parseInt(V[L.M],10),d.month<1||d.month>12)return d}else L.MMM!==void 0?d.month=M.indexOf(V[L.MMM])+1:L.MMMM!==void 0&&(d.month=n.indexOf(V[L.MMMM])+1);if(L.D!==void 0){if(d.day=parseInt(V[L.D],10),d.year===null||d.month===null||d.day<1)return d;const J=new Date(d.year,d.month,0).getDate();if(d.day>J)return d}L.H!==void 0?d.hour=parseInt(V[L.H],10)%24:L.h!==void 0&&(d.hour=parseInt(V[L.h],10)%12,(L.A&&V[L.A]==="PM"||L.a&&V[L.a]==="pm"||L.aa&&V[L.aa]==="p.m.")&&(d.hour+=12),d.hour=d.hour%24),L.m!==void 0&&(d.minute=parseInt(V[L.m],10)%60),L.s!==void 0&&(d.second=parseInt(V[L.s],10)%60),L.S!==void 0&&(d.millisecond=parseInt(V[L.S],10)*10**(3-V[L.S].length)),(L.Z!==void 0||L.ZZ!==void 0)&&(X=L.Z!==void 0?V[L.Z].replace(":",""):V[L.ZZ],d.timezoneOffset=(X[0]==="+"?-1:1)*(60*X.slice(1,3)+1*X.slice(3,5)))}return d.dateHash=mo(d.year,6)+"/"+mo(d.month)+"/"+mo(d.day),d.timeHash=mo(d.hour)+":"+mo(d.minute)+":"+mo(d.second)+X,d}function xU(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function bU(e,t){return bT(new Date,e,t)}function wU(e){const t=new Date(e).getDay();return t===0?7:t}function _2(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);const s=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-s);const l=(t-r)/(_T*7);return 1+Math.floor(l)}function SU(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function wx(e,t){const r=new Date(e);return t===!0?SU(r):r.getTime()}function MU(e,t,r,s={}){const l=wx(t,s.onlyDate),d=wx(r,s.onlyDate),y=wx(e,s.onlyDate);return(y>l||s.inclusiveFrom===!0&&y===l)&&(y<d||s.inclusiveTo===!0&&y===d)}function EU(e,t){return J4(e,t,1)}function TU(e,t){return J4(e,t,-1)}function fc(e,t,r){const s=new Date(e),l=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":s[`${l}Month`](0);case"month":case"months":s[`${l}Date`](1);case"day":case"days":case"date":s[`${l}Hours`](0);case"hour":case"hours":s[`${l}Minutes`](0);case"minute":case"minutes":s[`${l}Seconds`](0);case"second":case"seconds":s[`${l}Milliseconds`](0)}return s}function CU(e,t,r){const s=new Date(e),l=`set${r===!0?"UTC":""}`;switch(t){case"year":case"years":s[`${l}Month`](11);case"month":case"months":s[`${l}Date`](K4(s));case"day":case"days":case"date":s[`${l}Hours`](23);case"hour":case"hours":s[`${l}Minutes`](59);case"minute":case"minutes":s[`${l}Seconds`](59);case"second":case"seconds":s[`${l}Milliseconds`](999)}return s}function AU(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.max(t,new Date(r))}),t}function IU(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(r=>{t=Math.min(t,new Date(r))}),t}function N_(e,t,r){return(e.getTime()-e.getTimezoneOffset()*Ib-(t.getTime()-t.getTimezoneOffset()*Ib))/r}function wT(e,t,r="days"){const s=new Date(e),l=new Date(t);switch(r){case"years":case"year":return s.getFullYear()-l.getFullYear();case"months":case"month":return(s.getFullYear()-l.getFullYear())*12+s.getMonth()-l.getMonth();case"days":case"day":case"date":return N_(fc(s,"day"),fc(l,"day"),_T);case"hours":case"hour":return N_(fc(s,"hour"),fc(l,"hour"),dU);case"minutes":case"minute":return N_(fc(s,"minute"),fc(l,"minute"),Ib);case"seconds":case"second":return N_(fc(s,"second"),fc(l,"second"),1e3)}}function y2(e){return wT(e,fc(e,"year"),"days")+1}function zU(e){return a4(e)===!0?"date":typeof e=="number"?"number":"string"}function DU(e,t,r){const s=new Date(e);if(t){const l=new Date(t);if(s<l)return l}if(r){const l=new Date(r);if(s>l)return l}return s}function PU(e,t,r){const s=new Date(e),l=new Date(t);if(r===void 0)return s.getTime()===l.getTime();switch(r){case"second":case"seconds":if(s.getSeconds()!==l.getSeconds())return!1;case"minute":case"minutes":if(s.getMinutes()!==l.getMinutes())return!1;case"hour":case"hours":if(s.getHours()!==l.getHours())return!1;case"day":case"days":case"date":if(s.getDate()!==l.getDate())return!1;case"month":case"months":if(s.getMonth()!==l.getMonth())return!1;case"year":case"years":if(s.getFullYear()!==l.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${r}`)}return!0}function K4(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function Vf(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const g7={YY(e,t,r){const s=this.YYYY(e,t,r)%100;return s>=0?mo(s):"-"+mo(Math.abs(s))},YYYY(e,t,r){return r??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return Vf(e.getMonth()+1)},MM(e){return mo(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Vf(this.Q(e))},D(e){return e.getDate()},Do(e){return Vf(e.getDate())},DD(e){return mo(e.getDate())},DDD(e){return y2(e)},DDDo(e){return Vf(y2(e))},DDDD(e){return mo(y2(e),3)},d(e){return e.getDay()},do(e){return Vf(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return _2(e)},wo(e){return Vf(_2(e))},ww(e){return mo(_2(e))},H(e){return e.getHours()},HH(e){return mo(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return mo(this.h(e))},m(e){return e.getMinutes()},mm(e){return mo(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return mo(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return mo(Math.floor(e.getMilliseconds()/10))},SSS(e){return mo(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,r,s){const l=s??e.getTimezoneOffset();return m7(l,":")},ZZ(e,t,r,s){const l=s??e.getTimezoneOffset();return m7(l)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function kU(e,t,r,s,l){if(e!==0&&!e||e===1/0||e===-1/0)return;const d=new Date(e);if(isNaN(d))return;t===void 0&&(t=yT);const y=vT(r,mc.props);return t.replace(fU,(n,M)=>n in g7?g7[n](d,y,s,l):M===void 0?n:M.split("\\]").join("]"))}function RU(e){return a4(e)===!0?new Date(e.getTime()):e}const Moe={isValid:xU,extractDate:yU,buildDate:bU,getDayOfWeek:wU,getWeekOfYear:_2,isBetweenDates:MU,addToDate:EU,subtractFromDate:TU,adjustDate:bT,startOfDate:fc,endOfDate:CU,getMaxDate:AU,getMinDate:IU,getDateDiff:wT,getDayOfYear:y2,inferDateFormat:zU,getDateBetween:DU,isSameDate:PU,daysInMonth:K4,formatDate:kU,clone:RU};var B0,F0,Zr={version:"0.2.0"},Ko=Zr.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function _7(e,t,r){return e<t?t:e>r?r:e}function $_(e){return 100*(-1+e)}Zr.configure=function(e){var t,r;for(t in e)(r=e[t])!==void 0&&e.hasOwnProperty(t)&&(Ko[t]=r);return this},Zr.status=null,Zr.set=function(e){var t=Zr.isStarted();e=_7(e,Ko.minimum,1),Zr.status=e===1?null:e;var r=Zr.render(!t),s=r.querySelector(Ko.barSelector),l=Ko.speed,d=Ko.easing;return LU(function(y){Ko.positionUsing===""&&(Ko.positionUsing=Zr.getPositioningCSS()),j_(s,function(n,M,P){var L;return(L=Ko.positionUsing==="translate3d"?{transform:"translate3d("+$_(n)+"%,0,0)"}:Ko.positionUsing==="translate"?{transform:"translate("+$_(n)+"%,0)"}:{"margin-left":$_(n)+"%"}).transition="all "+M+"ms "+P,L}(e,l,d)),e===1?(j_(r,{transition:"none",opacity:1}),setTimeout(function(){j_(r,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){Zr.remove(),y()},l)},l)):setTimeout(y,l)}),this},Zr.isStarted=function(){return typeof Zr.status=="number"},Zr.start=function(){Zr.status||Zr.set(0);var e=function(){setTimeout(function(){Zr.status&&(Zr.trickle(),e())},Ko.trickleSpeed)};return Ko.trickle&&e(),this},Zr.done=function(e){return e||Zr.status?Zr.inc(.3+.5*Math.random()).set(1):this},Zr.inc=function(e){var t=Zr.status;return t?t>1?void 0:(typeof e!="number"&&(e=t>=0&&t<.2?.1:t>=.2&&t<.5?.04:t>=.5&&t<.8?.02:t>=.8&&t<.99?.005:0),t=_7(t+e,0,.994),Zr.set(t)):Zr.start()},Zr.trickle=function(){return Zr.inc()},B0=0,F0=0,Zr.promise=function(e){return e&&e.state()!=="resolved"?(F0===0&&Zr.start(),B0++,F0++,e.always(function(){--F0==0?(B0=0,Zr.done()):Zr.set((B0-F0)/B0)}),this):this},Zr.render=function(e){if(Zr.isRendered())return document.getElementById("nprogress");y7(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=Ko.template;var r,s=t.querySelector(Ko.barSelector),l=e?"-100":$_(Zr.status||0),d=document.querySelector(Ko.parent);return j_(s,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),Ko.showSpinner||(r=t.querySelector(Ko.spinnerSelector))&&x7(r),d!=document.body&&y7(d,"nprogress-custom-parent"),d.appendChild(t),t},Zr.remove=function(){v7(document.documentElement,"nprogress-busy"),v7(document.querySelector(Ko.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&x7(e)},Zr.isRendered=function(){return!!document.getElementById("nprogress")},Zr.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var LU=function(){var e=[];function t(){var r=e.shift();r&&r(t)}return function(r){e.push(r),e.length==1&&t()}}(),j_=function(){var e=["Webkit","O","Moz","ms"],t={};function r(s,l,d){var y;y=(y=l).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(n,M){return M.toUpperCase()}),l=t[y]||(t[y]=function(n){var M=document.body.style;if(n in M)return n;for(var P,L=e.length,V=n.charAt(0).toUpperCase()+n.slice(1);L--;)if((P=e[L]+V)in M)return P;return n}(y)),s.style[l]=d}return function(s,l){var d,y,n=arguments;if(n.length==2)for(d in l)(y=l[d])!==void 0&&l.hasOwnProperty(d)&&r(s,d,y);else r(s,n[1],n[2])}}();function ST(e,t){return(typeof e=="string"?e:Q4(e)).indexOf(" "+t+" ")>=0}function y7(e,t){var r=Q4(e),s=r+t;ST(r,t)||(e.className=s.substring(1))}function v7(e,t){var r,s=Q4(e);ST(e,t)&&(r=s.replace(" "+t+" "," "),e.className=r.substring(1,r.length-1))}function Q4(e){return(" "+(e&&e.className||"")+" ").replace(/\s+/gi," ")}function x7(e){e&&e.parentNode&&e.parentNode.removeChild(e)}const Eoe={isoName:"zh-CN",nativeName:"()",label:{clear:"",ok:"",cancel:"",close:"",set:"",select:"",reset:"",remove:"",update:"",create:"",search:"",filter:"",refresh:"",expand:e=>e?`"${e}"`:"",collapse:e=>e?`"${e}"`:""},date:{days:"______".split("_"),daysShort:"______".split("_"),months:"___________".split("_"),monthsShort:"___________".split("_"),headerTitle:e=>new Intl.DateTimeFormat("zh-CN",{weekday:"short",month:"short",day:"numeric"}).format(e),firstDayOfWeek:0,format24h:!1,pluralDay:""},table:{noData:"",noResults:"",loading:"...",selectedRecords:e=>""+e+"",recordsPerPage:":",allRows:"",pagination:(e,t,r)=>e+"-"+t+" / "+r,columns:""},editor:{url:"URL",bold:"",italic:"",strikethrough:"",underline:"",unorderedList:"",orderedList:"",subscript:"",superscript:"",hyperlink:"",toggleFullscreen:"",quote:"",left:"",center:"",right:"",justify:"",print:"",outdent:"",indent:"",removeFormat:"",formatting:"",fontSize:"",align:"",hr:"",undo:"",redo:"",heading1:"",heading2:"",heading3:"",heading4:"",heading5:"",heading6:"",paragraph:"",code:"",size1:"",size2:"",size3:"",size4:"",size5:"",size6:"",size7:"",defaultFont:"",viewSource:""},tree:{noNodes:"",noResults:""}};function MT(e,t,r){let s;function l(){s!==void 0&&(ub.remove(s),s=void 0)}return Xn(()=>{e.value===!0&&l()}),{removeFromHistory:l,addToHistory(){s={condition:()=>r.value===!0,handler:t},ub.add(s)}}}function v2(e){if(Object(e.$parent)===e.$parent)return e.$parent;let{parent:t}=e.$;for(;Object(t)===t;){if(Object(t.proxy)===t.proxy)return t.proxy;t=t.parent}}function ET(e,t){typeof t.type=="symbol"?Array.isArray(t.children)===!0&&t.children.forEach(r=>{ET(e,r)}):e.add(t)}function OU(e){const t=new Set;return e.forEach(r=>{ET(t,r)}),Array.from(t)}function TT(e){return e.appContext.config.globalProperties.$router!==void 0}function f1(e){return e.isUnmounted===!0||e.isDeactivated===!0}function iu(){let e=null;const t=_r();function r(){e!==null&&(clearTimeout(e),e=null)}return W1(r),Xn(r),{removeTimeout:r,registerTimeout(s,l){r(),f1(t)===!1&&(e=setTimeout(()=>{e=null,s()},l))}}}function p1(){let e;const t=_r();function r(){e=void 0}return W1(r),Xn(r),{removeTick:r,registerTick(s){e=s,Ao(()=>{e===s&&(f1(t)===!1&&e(),e=void 0)})}}}const Zm={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Xm=["beforeShow","show","beforeHide","hide"];function Ym({showing:e,canShow:t,hideOnRouteChange:r,handleShow:s,handleHide:l,processOnMount:d}){const y=_r(),{props:n,emit:M,proxy:P}=y;let L;function V(fe){e.value===!0?Z(fe):X(fe)}function X(fe){if(n.disable===!0||fe!==void 0&&fe.qAnchorHandled===!0||t!==void 0&&t(fe)!==!0)return;const le=n["onUpdate:modelValue"]!==void 0;le===!0&&(M("update:modelValue",!0),L=fe,Ao(()=>{L===fe&&(L=void 0)})),(n.modelValue===null||le===!1)&&J(fe)}function J(fe){e.value!==!0&&(e.value=!0,M("beforeShow",fe),s!==void 0?s(fe):M("show",fe))}function Z(fe){if(n.disable===!0)return;const le=n["onUpdate:modelValue"]!==void 0;le===!0&&(M("update:modelValue",!1),L=fe,Ao(()=>{L===fe&&(L=void 0)})),(n.modelValue===null||le===!1)&&ie(fe)}function ie(fe){e.value!==!1&&(e.value=!1,M("beforeHide",fe),l!==void 0?l(fe):M("hide",fe))}function ae(fe){n.disable===!0&&fe===!0?n["onUpdate:modelValue"]!==void 0&&M("update:modelValue",!1):fe===!0!==e.value&&(fe===!0?J:ie)(L)}Fi(()=>n.modelValue,ae),r!==void 0&&TT(y)===!0&&Fi(()=>P.$route.fullPath,()=>{r.value===!0&&e.value===!0&&Z()}),d===!0&&ys(()=>{ae(n.modelValue)});const de={show:X,hide:Z,toggle:V};return Object.assign(P,de),de}const m1={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function e6(e,t=()=>{},r=()=>{}){return{transitionProps:Ve(()=>{const s=`q-transition--${e.transitionShow||t()}`,l=`q-transition--${e.transitionHide||r()}`;return{appear:!0,enterFromClass:`${s}-enter-from`,enterActiveClass:`${s}-enter-active`,enterToClass:`${s}-enter-to`,leaveFromClass:`${l}-leave-from`,leaveActiveClass:`${l}-leave-active`,leaveToClass:`${l}-leave-to`}}),transitionStyle:Ve(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}let xd=[],gm=[];function CT(e){gm=gm.filter(t=>t!==e)}function BU(e){CT(e),gm.push(e)}function b7(e){CT(e),gm.length===0&&xd.length!==0&&(xd[xd.length-1](),xd=[])}function Jm(e){gm.length===0?e():xd.push(e)}function FU(e){xd=xd.filter(t=>t!==e)}const g1=[],tm=[];let NU=1,Wu=document.body;function Jy(e,t){const r=document.createElement("div");if(r.id=t!==void 0?`q-portal--${t}--${NU++}`:e,O2.globalNodes!==void 0){const s=O2.globalNodes.class;s!==void 0&&(r.className=s)}return Wu.appendChild(r),g1.push(r),tm.push(t),r}function t6(e){const t=g1.indexOf(e);g1.splice(t,1),tm.splice(t,1),e.remove()}function $U(e){if(e===Wu)return;if(Wu=e,Wu===document.body||tm.reduce((r,s)=>s==="dialog"?r+1:r,0)<2){g1.forEach(r=>{r.contains(Wu)===!1&&Wu.appendChild(r)});return}const t=tm.lastIndexOf("dialog");for(let r=0;r<g1.length;r++){const s=g1[r];(r===t||tm[r]!=="dialog")&&s.contains(Wu)===!1&&Wu.appendChild(s)}}const _1=[];function jU(e){return _1.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function AT(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return v2(e)}else if(e.__qPortal===!0){const r=v2(e);return r!==void 0&&r.$options.name==="QPopupProxy"?(e.hide(t),r):e}e=v2(e)}while(e!=null)}function UU(e,t,r){for(;r!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(r--,e.$options.name==="QMenu"){e=AT(e,t);continue}e.hide(t)}e=v2(e)}}const VU=lr({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function qU(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function i6(e,t,r,s){const l=oi(!1),d=oi(!1);let y=null;const n={},M=s==="dialog"&&qU(e);function P(V){if(V===!0){b7(n),d.value=!0;return}d.value=!1,l.value===!1&&(M===!1&&y===null&&(y=Jy(!1,s)),l.value=!0,_1.push(e.proxy),BU(n))}function L(V){if(d.value=!1,V!==!0)return;b7(n),l.value=!1;const X=_1.indexOf(e.proxy);X!==-1&&_1.splice(X,1),y!==null&&(t6(y),y=null)}return GM(()=>{L(!0)}),e.proxy.__qPortal=!0,_h(e.proxy,"contentEl",()=>t.value),{showPortal:P,hidePortal:L,portalIsActive:l,portalIsAccessible:d,renderPortal:()=>M===!0?r():l.value===!0?[tt(rk,{to:y},tt(VU,r))]:void 0}}function zb(e,t){const r=e.style;for(const s in t)r[s]=t[s]}function HU(e){if(e==null)return;if(typeof e=="string")try{return document.querySelector(e)||void 0}catch{return}const t=Y0(e);if(t)return t.$el||t}function IT(e,t){if(e==null||e.contains(t)===!0)return!0;for(let r=e.nextElementSibling;r!==null;r=r.nextElementSibling)if(r.contains(t))return!0;return!1}const r6=[Element,String],GU=[null,document,document.body,document.scrollingElement,document.documentElement];function n6(e,t){let r=HU(t);if(r===void 0){if(e==null)return window;r=e.closest(".scroll,.scroll-y,.overflow-auto")}return GU.includes(r)?window:r}function o6(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function s6(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function zT(e,t,r=0){const s=arguments[3]===void 0?performance.now():arguments[3],l=o6(e);if(r<=0){l!==t&&Db(e,t);return}requestAnimationFrame(d=>{const y=d-s,n=l+(t-l)/Math.max(y,r)*y;Db(e,n),n!==t&&zT(e,t,r-y,d)})}function DT(e,t,r=0){const s=arguments[3]===void 0?performance.now():arguments[3],l=s6(e);if(r<=0){l!==t&&Pb(e,t);return}requestAnimationFrame(d=>{const y=d-s,n=l+(t-l)/Math.max(y,r)*y;Pb(e,n),n!==t&&DT(e,t,r-y,d)})}function Db(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function Pb(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function w7(e,t,r){if(r){zT(e,t,r);return}Db(e,t)}function Sx(e,t,r){if(r){DT(e,t,r);return}Pb(e,t)}let U_;function x2(){if(U_!==void 0)return U_;const e=document.createElement("p"),t=document.createElement("div");zb(e,{width:"100%",height:"200px"}),zb(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const r=e.offsetWidth;t.style.overflow="scroll";let s=e.offsetWidth;return r===s&&(s=t.clientWidth),t.remove(),U_=r-s,U_}function WU(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}let N0=0,Mx,Ex,G0,Tx=!1,S7,M7,E7,ld=null;function ZU(e){XU(e)&&Cn(e)}function XU(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=bk(e),r=e.shiftKey&&!e.deltaX,s=!r&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),l=r||s?e.deltaY:e.deltaX;for(let d=0;d<t.length;d++){const y=t[d];if(WU(y,s))return s?l<0&&y.scrollTop===0?!0:l>0&&y.scrollTop+y.clientHeight===y.scrollHeight:l<0&&y.scrollLeft===0?!0:l>0&&y.scrollLeft+y.clientWidth===y.scrollWidth}return!0}function T7(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function V_(e){Tx!==!0&&(Tx=!0,requestAnimationFrame(()=>{Tx=!1;const{height:t}=e.target,{clientHeight:r,scrollTop:s}=document.scrollingElement;(G0===void 0||t!==window.innerHeight)&&(G0=r-t,document.scrollingElement.scrollTop=s),s>G0&&(document.scrollingElement.scrollTop-=Math.ceil((s-G0)/8))}))}function C7(e){const t=document.body,r=window.visualViewport!==void 0;if(e==="add"){const{overflowY:s,overflowX:l}=window.getComputedStyle(t);Mx=s6(window),Ex=o6(window),S7=t.style.left,M7=t.style.top,E7=window.location.href,t.style.left=`-${Mx}px`,t.style.top=`-${Ex}px`,l!=="hidden"&&(l==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),s!=="hidden"&&(s==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,nn.is.ios===!0&&(r===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",V_,go.passiveCapture),window.visualViewport.addEventListener("scroll",V_,go.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",T7,go.passiveCapture))}nn.is.desktop===!0&&nn.is.mac===!0&&window[`${e}EventListener`]("wheel",ZU,go.notPassive),e==="remove"&&(nn.is.ios===!0&&(r===!0?(window.visualViewport.removeEventListener("resize",V_,go.passiveCapture),window.visualViewport.removeEventListener("scroll",V_,go.passiveCapture)):window.removeEventListener("scroll",T7,go.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=S7,t.style.top=M7,window.location.href===E7&&window.scrollTo(Mx,Ex),G0=void 0)}function kb(e){let t="add";if(e===!0){if(N0++,ld!==null){clearTimeout(ld),ld=null;return}if(N0>1)return}else{if(N0===0||(N0--,N0>0))return;if(t="remove",nn.is.ios===!0&&nn.is.nativeMobile===!0){ld!==null&&clearTimeout(ld),ld=setTimeout(()=>{C7(t),ld=null},100);return}}C7(t)}function PT(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,kb(t))}}}function ln(e,t){return e!==void 0&&e()||t}function YU(e,t){if(e!==void 0){const r=e();if(r!=null)return r.slice()}return t}function _c(e,t){return e!==void 0?t.concat(e()):t}function kT(e,t){return e===void 0?t:t!==void 0?t.concat(e()):e()}function _m(e,t,r,s,l,d){t.key=s+l;const y=tt(e,t,r);return l===!0?Dd(y,d()):y}const Ed=[];let z1;function JU(e){z1=e.keyCode===27}function KU(){z1===!0&&(z1=!1)}function QU(e){z1===!0&&(z1=!1,tu(e,27)===!0&&Ed[Ed.length-1](e))}function RT(e){window[e]("keydown",JU),window[e]("blur",KU),window[e]("keyup",QU),z1=!1}function LT(e){nn.is.desktop===!0&&(Ed.push(e),Ed.length===1&&RT("addEventListener"))}function V2(e){const t=Ed.indexOf(e);t!==-1&&(Ed.splice(t,1),Ed.length===0&&RT("removeEventListener"))}const Td=[];function OT(e){Td[Td.length-1](e)}function BT(e){nn.is.desktop===!0&&(Td.push(e),Td.length===1&&document.body.addEventListener("focusin",OT))}function Rb(e){const t=Td.indexOf(e);t!==-1&&(Td.splice(t,1),Td.length===0&&document.body.removeEventListener("focusin",OT))}let q_=0;const eV={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},A7={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},FT=lr({name:"QDialog",inheritAttrs:!1,props:{...Zm,...m1,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...Xm,"shake","click","escapeKey"],setup(e,{slots:t,emit:r,attrs:s}){const l=_r(),d=oi(null),y=oi(!1),n=oi(!1);let M=null,P=null,L,V;const X=Ve(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:J}=PT(),{registerTimeout:Z}=iu(),{registerTick:ie,removeTick:ae}=p1(),{transitionProps:de,transitionStyle:fe}=e6(e,()=>A7[e.position][0],()=>A7[e.position][1]),le=Ve(()=>fe.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:he,hidePortal:Ce,portalIsAccessible:Le,renderPortal:Ae}=i6(l,d,Ui,"dialog"),{hide:We}=Ym({showing:y,hideOnRouteChange:X,handleShow:Ke,handleHide:xt,processOnMount:!0}),{addToHistory:Qe,removeFromHistory:ze}=MT(y,We,X),Ze=Ve(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${eV[e.position]}`+(n.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),Ue=Ve(()=>y.value===!0&&e.seamless!==!0),vt=Ve(()=>e.autoClose===!0?{onClick:Qt}:{}),Be=Ve(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${Ue.value===!0?"modal":"seamless"}`,s.class]);Fi(()=>e.maximized,ci=>{y.value===!0&&ji(ci)}),Fi(Ue,ci=>{J(ci),ci===!0?(BT(Sr),LT(bt)):(Rb(Sr),V2(bt))});function Ke(ci){Qe(),P=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,ji(e.maximized),he(),n.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),ie(yt)):ae(),Z(()=>{if(l.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:ur,bottom:cn}=document.activeElement.getBoundingClientRect(),{innerHeight:Di}=window,Te=window.visualViewport!==void 0?window.visualViewport.height:Di;ur>0&&cn>Te/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Te,cn>=Di?1/0:Math.ceil(document.scrollingElement.scrollTop+cn-Te/2))),document.activeElement.scrollIntoView()}V=!0,d.value.click(),V=!1}he(!0),n.value=!1,r("show",ci)},e.transitionDuration)}function xt(ci){ae(),ze(),bi(!0),n.value=!0,Ce(),P!==null&&(((ci&&ci.type.indexOf("key")===0?P.closest('[tabindex]:not([tabindex^="-"])'):void 0)||P).focus(),P=null),Z(()=>{Ce(!0),n.value=!1,r("hide",ci)},e.transitionDuration)}function yt(ci){Jm(()=>{let ur=d.value;if(ur!==null){if(ci!==void 0){const cn=ur.querySelector(ci);if(cn!==null){cn.focus({preventScroll:!0});return}}ur.contains(document.activeElement)!==!0&&(ur=ur.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||ur.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||ur.querySelector("[autofocus], [data-autofocus]")||ur,ur.focus({preventScroll:!0}))}})}function Dt(ci){ci&&typeof ci.focus=="function"?ci.focus({preventScroll:!0}):yt(),r("shake");const ur=d.value;ur!==null&&(ur.classList.remove("q-animate--scale"),ur.classList.add("q-animate--scale"),M!==null&&clearTimeout(M),M=setTimeout(()=>{M=null,d.value!==null&&(ur.classList.remove("q-animate--scale"),yt())},170))}function bt(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&Dt():(r("escapeKey"),We()))}function bi(ci){M!==null&&(clearTimeout(M),M=null),(ci===!0||y.value===!0)&&(ji(!1),e.seamless!==!0&&(J(!1),Rb(Sr),V2(bt))),ci!==!0&&(P=null)}function ji(ci){ci===!0?L!==!0&&(q_<1&&document.body.classList.add("q-body--dialog"),q_++,L=!0):L===!0&&(q_<2&&document.body.classList.remove("q-body--dialog"),q_--,L=!1)}function Qt(ci){V!==!0&&(We(ci),r("click",ci))}function Nt(ci){e.persistent!==!0&&e.noBackdropDismiss!==!0?We(ci):e.noShake!==!0&&Dt()}function Sr(ci){e.allowFocusOutside!==!0&&Le.value===!0&&IT(d.value,ci.target)!==!0&&yt('[tabindex]:not([tabindex="-1"])')}Object.assign(l.proxy,{focus:yt,shake:Dt,__updateRefocusTarget(ci){P=ci||null}}),Xn(bi);function Ui(){return tt("div",{role:"dialog","aria-modal":Ue.value===!0?"true":"false",...s,class:Be.value},[tt(Ul,{name:"q-transition--fade",appear:!0},()=>Ue.value===!0?tt("div",{class:"q-dialog__backdrop fixed-full",style:le.value,"aria-hidden":"true",tabindex:-1,onClick:Nt}):null),tt(Ul,de.value,()=>y.value===!0?tt("div",{ref:d,class:Ze.value,style:fe.value,tabindex:-1,...vt.value},ln(t.default)):null)])}return Ae}}),Lb={xs:18,sm:24,md:32,lg:38,xl:46},K1={size:String};function Q1(e,t=Lb){return Ve(()=>e.size!==void 0?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null)}const I7="0 0 24 24",z7=e=>e,Cx=e=>`ionicons ${e}`,NT={"mdi-":e=>`mdi ${e}`,"icon-":z7,"bt-":e=>`bt ${e}`,"eva-":e=>`eva ${e}`,"ion-md":Cx,"ion-ios":Cx,"ion-logo":Cx,"iconfont ":z7,"ti-":e=>`themify-icon ${e}`,"bi-":e=>`bootstrap-icons ${e}`},$T={o_:"-outlined",r_:"-round",s_:"-sharp"},jT={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},tV=new RegExp("^("+Object.keys(NT).join("|")+")"),iV=new RegExp("^("+Object.keys($T).join("|")+")"),D7=new RegExp("^("+Object.keys(jT).join("|")+")"),rV=/^[Mm]\s?[-+]?\.?\d/,nV=/^img:/,oV=/^svguse:/,sV=/^ion-/,aV=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,Io=lr({name:"QIcon",props:{...K1,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(e,{slots:t}){const{proxy:{$q:r}}=_r(),s=Q1(e),l=Ve(()=>"q-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),d=Ve(()=>{let y,n=e.name;if(n==="none"||!n)return{none:!0};if(r.iconMapFn!==null){const L=r.iconMapFn(n);if(L!==void 0)if(L.icon!==void 0){if(n=L.icon,n==="none"||!n)return{none:!0}}else return{cls:L.cls,content:L.content!==void 0?L.content:" "}}if(rV.test(n)===!0){const[L,V=I7]=n.split("|");return{svg:!0,viewBox:V,nodes:L.split("&&").map(X=>{const[J,Z,ie]=X.split("@@");return tt("path",{style:Z,d:J,transform:ie})})}}if(nV.test(n)===!0)return{img:!0,src:n.substring(4)};if(oV.test(n)===!0){const[L,V=I7]=n.split("|");return{svguse:!0,src:L.substring(7),viewBox:V}}let M=" ";const P=n.match(tV);if(P!==null)y=NT[P[1]](n);else if(aV.test(n)===!0)y=n;else if(sV.test(n)===!0)y=`ionicons ion-${r.platform.is.ios===!0?"ios":"md"}${n.substring(3)}`;else if(D7.test(n)===!0){y="notranslate material-symbols";const L=n.match(D7);L!==null&&(n=n.substring(6),y+=jT[L[1]]),M=n}else{y="notranslate material-icons";const L=n.match(iV);L!==null&&(n=n.substring(2),y+=$T[L[1]]),M=n}return{cls:y,content:M}});return()=>{const y={class:l.value,style:s.value,"aria-hidden":"true",role:"presentation"};return d.value.none===!0?tt(e.tag,y,ln(t.default)):d.value.img===!0?tt(e.tag,y,_c(t.default,[tt("img",{src:d.value.src})])):d.value.svg===!0?tt(e.tag,y,_c(t.default,[tt("svg",{viewBox:d.value.viewBox||"0 0 24 24"},d.value.nodes)])):d.value.svguse===!0?tt(e.tag,y,_c(t.default,[tt("svg",{viewBox:d.value.viewBox},[tt("use",{"xlink:href":d.value.src})])])):(d.value.cls!==void 0&&(y.class+=" "+d.value.cls),tt(e.tag,y,_c(t.default,[d.value.content])))}}}),lV={size:{type:[String,Number],default:"1em"},color:String};function cV(e){return{cSize:Ve(()=>e.size in Lb?`${Lb[e.size]}px`:e.size),classes:Ve(()=>"q-spinner"+(e.color?` text-${e.color}`:""))}}const kd=lr({name:"QSpinner",props:{...lV,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:r}=cV(e);return()=>tt("svg",{class:r.value+" q-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[tt("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});function uV(e,t=250){let r=!1,s;return function(){return r===!1&&(r=!0,setTimeout(()=>{r=!1},t),s=e.apply(this,arguments)),s}}function P7(e,t,r,s){r.modifiers.stop===!0&&Qc(e);const l=r.modifiers.color;let d=r.modifiers.center;d=d===!0||s===!0;const y=document.createElement("span"),n=document.createElement("span"),M=Pd(e),{left:P,top:L,width:V,height:X}=t.getBoundingClientRect(),J=Math.sqrt(V*V+X*X),Z=J/2,ie=`${(V-J)/2}px`,ae=d?ie:`${M.left-P-Z}px`,de=`${(X-J)/2}px`,fe=d?de:`${M.top-L-Z}px`;n.className="q-ripple__inner",zb(n,{height:`${J}px`,width:`${J}px`,transform:`translate3d(${ae},${fe},0) scale3d(.2,.2,1)`,opacity:0}),y.className=`q-ripple${l?" text-"+l:""}`,y.setAttribute("dir","ltr"),y.appendChild(n),t.appendChild(y);const le=()=>{y.remove(),clearTimeout(he)};r.abort.push(le);let he=setTimeout(()=>{n.classList.add("q-ripple__inner--enter"),n.style.transform=`translate3d(${ie},${de},0) scale3d(1,1,1)`,n.style.opacity=.2,he=setTimeout(()=>{n.classList.remove("q-ripple__inner--enter"),n.classList.add("q-ripple__inner--leave"),n.style.opacity=0,he=setTimeout(()=>{y.remove(),r.abort.splice(r.abort.indexOf(le),1)},275)},250)},50)}function k7(e,{modifiers:t,value:r,arg:s}){const l=Object.assign({},e.cfg.ripple,t,r);e.modifiers={early:l.early===!0,stop:l.stop===!0,center:l.center===!0,color:l.color||s,keyCodes:[].concat(l.keyCodes||13)}}const a6=Bm({name:"ripple",beforeMount(e,t){const r=t.instance.$.appContext.config.globalProperties.$q.config||{};if(r.ripple===!1)return;const s={cfg:r,enabled:t.value!==!1,modifiers:{},abort:[],start(l){s.enabled===!0&&l.qSkipRipple!==!0&&l.type===(s.modifiers.early===!0?"pointerdown":"click")&&P7(l,e,s,l.qKeyEvent===!0)},keystart:uV(l=>{s.enabled===!0&&l.qSkipRipple!==!0&&tu(l,s.modifiers.keyCodes)===!0&&l.type===`key${s.modifiers.early===!0?"down":"up"}`&&P7(l,e,s,!0)},300)};k7(s,t),e.__qripple=s,Ea(s,"main",[[e,"pointerdown","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const r=e.__qripple;r!==void 0&&(r.enabled=t.value!==!1,r.enabled===!0&&Object(t.value)===t.value&&k7(r,t))}},beforeUnmount(e){const t=e.__qripple;t!==void 0&&(t.abort.forEach(r=>{r()}),bc(t,"main"),delete e._qripple)}}),UT={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},hV=Object.keys(UT),VT={align:{type:String,validator:e=>hV.includes(e)}};function qT(e){return Ve(()=>{const t=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${UT[t]}`})}function R7(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}function L7(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function dV(e,t){for(const r in t){const s=t[r],l=e[r];if(typeof s=="string"){if(s!==l)return!1}else if(Array.isArray(l)===!1||l.length!==s.length||s.some((d,y)=>d!==l[y]))return!1}return!0}function O7(e,t){return Array.isArray(t)===!0?e.length===t.length&&e.every((r,s)=>r===t[s]):e.length===1&&e[0]===t}function fV(e,t){return Array.isArray(e)===!0?O7(e,t):Array.isArray(t)===!0?O7(t,e):e===t}function pV(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(fV(e[r],t[r])===!1)return!1;return!0}const HT={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},l6={...HT,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function GT({fallbackTag:e,useDisableForRouterLinkProps:t=!0}={}){const r=_r(),{props:s,proxy:l,emit:d}=r,y=TT(r),n=Ve(()=>s.disable!==!0&&s.href!==void 0),M=t===!0?Ve(()=>y===!0&&s.disable!==!0&&n.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""):Ve(()=>y===!0&&n.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),P=Ve(()=>M.value===!0?fe(s.to):null),L=Ve(()=>P.value!==null),V=Ve(()=>n.value===!0||L.value===!0),X=Ve(()=>s.type==="a"||V.value===!0?"a":s.tag||e||"div"),J=Ve(()=>n.value===!0?{href:s.href,target:s.target}:L.value===!0?{href:P.value.href,target:s.target}:{}),Z=Ve(()=>{if(L.value===!1)return-1;const{matched:Ce}=P.value,{length:Le}=Ce,Ae=Ce[Le-1];if(Ae===void 0)return-1;const We=l.$route.matched;if(We.length===0)return-1;const Qe=We.findIndex(L7.bind(null,Ae));if(Qe!==-1)return Qe;const ze=R7(Ce[Le-2]);return Le>1&&R7(Ae)===ze&&We[We.length-1].path!==ze?We.findIndex(L7.bind(null,Ce[Le-2])):Qe}),ie=Ve(()=>L.value===!0&&Z.value!==-1&&dV(l.$route.params,P.value.params)),ae=Ve(()=>ie.value===!0&&Z.value===l.$route.matched.length-1&&pV(l.$route.params,P.value.params)),de=Ve(()=>L.value===!0?ae.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":ie.value===!0?` ${s.activeClass}`:"":"");function fe(Ce){try{return l.$router.resolve(Ce)}catch{}return null}function le(Ce,{returnRouterError:Le,to:Ae=s.to,replace:We=s.replace}={}){if(s.disable===!0)return Ce.preventDefault(),Promise.resolve(!1);if(Ce.metaKey||Ce.altKey||Ce.ctrlKey||Ce.shiftKey||Ce.button!==void 0&&Ce.button!==0||s.target==="_blank")return Promise.resolve(!1);Ce.preventDefault();const Qe=l.$router[We===!0?"replace":"push"](Ae);return Le===!0?Qe:Qe.then(()=>{}).catch(()=>{})}function he(Ce){if(L.value===!0){const Le=Ae=>le(Ce,Ae);d("click",Ce,Le),Ce.defaultPrevented!==!0&&Le()}else d("click",Ce)}return{hasRouterLink:L,hasHrefLink:n,hasLink:V,linkTag:X,resolvedLink:P,linkIsActive:ie,linkIsExactActive:ae,linkClass:de,linkAttrs:J,getLink:fe,navigateToRouterLink:le,navigateOnClick:he}}const B7={none:0,xs:4,sm:8,md:16,lg:24,xl:32},mV={xs:8,sm:10,md:14,lg:20,xl:24},gV=["button","submit","reset"],_V=/[^\s]\/[^\s]/,yV=["flat","outline","push","unelevated"];function WT(e,t){return e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":t}function vV(e){const t=WT(e);return t!==void 0?{[t]:!0}:{}}const c6={...K1,...HT,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...yV.reduce((e,t)=>(e[t]=Boolean)&&e,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...VT.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},xV={...c6,round:Boolean};function bV(e){const t=Q1(e,mV),r=qT(e),{hasRouterLink:s,hasLink:l,linkTag:d,linkAttrs:y,navigateOnClick:n}=GT({fallbackTag:"button"}),M=Ve(()=>{const ae=e.fab===!1&&e.fabMini===!1?t.value:{};return e.padding!==void 0?Object.assign({},ae,{padding:e.padding.split(/\s+/).map(de=>de in B7?B7[de]+"px":de).join(" "),minWidth:"0",minHeight:"0"}):ae}),P=Ve(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),L=Ve(()=>e.disable!==!0&&e.loading!==!0),V=Ve(()=>L.value===!0?e.tabindex||0:-1),X=Ve(()=>WT(e,"standard")),J=Ve(()=>{const ae={tabindex:V.value};return l.value===!0?Object.assign(ae,y.value):gV.includes(e.type)===!0&&(ae.type=e.type),d.value==="a"?(e.disable===!0?ae["aria-disabled"]="true":ae.href===void 0&&(ae.role="button"),s.value!==!0&&_V.test(e.type)===!0&&(ae.type=e.type)):e.disable===!0&&(ae.disabled="",ae["aria-disabled"]="true"),e.loading===!0&&e.percentage!==void 0&&Object.assign(ae,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),ae}),Z=Ve(()=>{let ae;e.color!==void 0?e.flat===!0||e.outline===!0?ae=`text-${e.textColor||e.color}`:ae=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(ae=`text-${e.textColor}`);const de=e.round===!0?"round":`rectangle${P.value===!0?" q-btn--rounded":e.square===!0?" q-btn--square":""}`;return`q-btn--${X.value} q-btn--${de}`+(ae!==void 0?" "+ae:"")+(L.value===!0?" q-btn--actionable q-focusable q-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" q-btn--fab":e.fabMini===!0?" q-btn--fab-mini":"")+(e.noCaps===!0?" q-btn--no-uppercase":"")+(e.dense===!0?" q-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")+(e.square?" q-btn--square":"")}),ie=Ve(()=>r.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" q-btn__content--hidden":""));return{classes:Z,style:M,innerClasses:ie,attributes:J,hasLink:l,linkTag:d,navigateOnClick:n,isActionable:L}}const{passiveCapture:el}=go;let qf=null,Hf=null,Gf=null;const y1=lr({name:"QBtn",props:{...xV,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(e,{slots:t,emit:r}){const{proxy:s}=_r(),{classes:l,style:d,innerClasses:y,attributes:n,hasLink:M,linkTag:P,navigateOnClick:L,isActionable:V}=bV(e),X=oi(null),J=oi(null);let Z=null,ie,ae=null;const de=Ve(()=>e.label!==void 0&&e.label!==null&&e.label!==""),fe=Ve(()=>e.disable===!0||e.ripple===!1?!1:{keyCodes:M.value===!0?[13,32]:[13],...e.ripple===!0?{}:e.ripple}),le=Ve(()=>({center:e.round})),he=Ve(()=>{const Be=Math.max(0,Math.min(100,e.percentage));return Be>0?{transition:"transform 0.6s",transform:`translateX(${Be-100}%)`}:{}}),Ce=Ve(()=>{if(e.loading===!0)return{onMousedown:vt,onTouchstart:vt,onClick:vt,onKeydown:vt,onKeyup:vt};if(V.value===!0){const Be={onClick:Ae,onKeydown:We,onMousedown:ze};if(s.$q.platform.has.touch===!0){const Ke=e.onTouchstart!==void 0?"":"Passive";Be[`onTouchstart${Ke}`]=Qe}return Be}return{onClick:Cn}}),Le=Ve(()=>({ref:X,class:"q-btn q-btn-item non-selectable no-outline "+l.value,style:d.value,...n.value,...Ce.value}));function Ae(Be){if(X.value!==null){if(Be!==void 0){if(Be.defaultPrevented===!0)return;const Ke=document.activeElement;if(e.type==="submit"&&Ke!==document.body&&X.value.contains(Ke)===!1&&Ke.contains(X.value)===!1){X.value.focus();const xt=()=>{document.removeEventListener("keydown",Cn,!0),document.removeEventListener("keyup",xt,el),X.value!==null&&X.value.removeEventListener("blur",xt,el)};document.addEventListener("keydown",Cn,!0),document.addEventListener("keyup",xt,el),X.value.addEventListener("blur",xt,el)}}L(Be)}}function We(Be){X.value!==null&&(r("keydown",Be),tu(Be,[13,32])===!0&&Hf!==X.value&&(Hf!==null&&Ue(),Be.defaultPrevented!==!0&&(X.value.focus(),Hf=X.value,X.value.classList.add("q-btn--active"),document.addEventListener("keyup",Ze,!0),X.value.addEventListener("blur",Ze,el)),Cn(Be)))}function Qe(Be){X.value!==null&&(r("touchstart",Be),Be.defaultPrevented!==!0&&(qf!==X.value&&(qf!==null&&Ue(),qf=X.value,Z=Be.target,Z.addEventListener("touchcancel",Ze,el),Z.addEventListener("touchend",Ze,el)),ie=!0,ae!==null&&clearTimeout(ae),ae=setTimeout(()=>{ae=null,ie=!1},200)))}function ze(Be){X.value!==null&&(Be.qSkipRipple=ie===!0,r("mousedown",Be),Be.defaultPrevented!==!0&&Gf!==X.value&&(Gf!==null&&Ue(),Gf=X.value,X.value.classList.add("q-btn--active"),document.addEventListener("mouseup",Ze,el)))}function Ze(Be){if(X.value!==null&&!(Be!==void 0&&Be.type==="blur"&&document.activeElement===X.value)){if(Be!==void 0&&Be.type==="keyup"){if(Hf===X.value&&tu(Be,[13,32])===!0){const Ke=new MouseEvent("click",Be);Ke.qKeyEvent=!0,Be.defaultPrevented===!0&&Sa(Ke),Be.cancelBubble===!0&&Qc(Ke),X.value.dispatchEvent(Ke),Cn(Be),Be.qKeyEvent=!0}r("keyup",Be)}Ue()}}function Ue(Be){const Ke=J.value;Be!==!0&&(qf===X.value||Gf===X.value)&&Ke!==null&&Ke!==document.activeElement&&(Ke.setAttribute("tabindex",-1),Ke.focus()),qf===X.value&&(Z!==null&&(Z.removeEventListener("touchcancel",Ze,el),Z.removeEventListener("touchend",Ze,el)),qf=Z=null),Gf===X.value&&(document.removeEventListener("mouseup",Ze,el),Gf=null),Hf===X.value&&(document.removeEventListener("keyup",Ze,!0),X.value!==null&&X.value.removeEventListener("blur",Ze,el),Hf=null),X.value!==null&&X.value.classList.remove("q-btn--active")}function vt(Be){Cn(Be),Be.qSkipRipple=!0}return Xn(()=>{Ue(!0)}),Object.assign(s,{click:Be=>{V.value===!0&&Ae(Be)}}),()=>{let Be=[];e.icon!==void 0&&Be.push(tt(Io,{name:e.icon,left:e.stack!==!0&&de.value===!0,role:"img"})),de.value===!0&&Be.push(tt("span",{class:"block"},[e.label])),Be=_c(t.default,Be),e.iconRight!==void 0&&e.round===!1&&Be.push(tt(Io,{name:e.iconRight,right:e.stack!==!0&&de.value===!0,role:"img"}));const Ke=[tt("span",{class:"q-focus-helper",ref:J})];return e.loading===!0&&e.percentage!==void 0&&Ke.push(tt("span",{class:"q-btn__progress absolute-full overflow-hidden"+(e.darkPercentage===!0?" q-btn__progress--dark":"")},[tt("span",{class:"q-btn__progress-indicator fit block",style:he.value})])),Ke.push(tt("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+y.value},Be)),e.loading!==null&&Ke.push(tt(Ul,{name:"q-transition--fade"},()=>e.loading===!0?[tt("span",{key:"loading",class:"absolute-full flex flex-center"},t.loading!==void 0?t.loading():[tt(kd)])]:null)),Dd(tt(P.value,Le.value,Ke),[[a6,fe.value,void 0,le.value]])}}}),Fs={dark:{type:Boolean,default:null}};function Ns(e,t){return Ve(()=>e.dark===null?t.dark.isActive:e.dark)}const wV=lr({name:"QCard",props:{...Fs,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:r}}=_r(),s=Ns(e,r),l=Ve(()=>"q-card"+(s.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>tt(e.tag,{class:l.value},ln(t.default))}}),$0=lr({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const r=Ve(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>tt(e.tag,{class:r.value},ln(t.default))}}),SV=lr({name:"QCardActions",props:{...VT,vertical:Boolean},setup(e,{slots:t}){const r=qT(e),s=Ve(()=>`q-card__actions ${r.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>tt("div",{class:s.value},ln(t.default))}}),MV={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Ax={xs:2,sm:4,md:8,lg:16,xl:24},q2=lr({name:"QSeparator",props:{...Fs,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=_r(),r=Ns(e,t.proxy.$q),s=Ve(()=>e.vertical===!0?"vertical":"horizontal"),l=Ve(()=>` q-separator--${s.value}`),d=Ve(()=>e.inset!==!1?`${l.value}-${MV[e.inset]}`:""),y=Ve(()=>`q-separator${l.value}${d.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(r.value===!0?" q-separator--dark":"")),n=Ve(()=>{const M={};if(e.size!==void 0&&(M[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const P=e.spaced===!0?`${Ax.md}px`:e.spaced in Ax?`${Ax[e.spaced]}px`:e.spaced,L=e.vertical===!0?["Left","Right"]:["Top","Bottom"];M[`margin${L[0]}`]=M[`margin${L[1]}`]=P}return M});return()=>tt("hr",{class:y.value,style:n.value,"aria-orientation":s.value})}});let Ix,H_=0;const Qo=new Array(256);for(let e=0;e<256;e++)Qo[e]=(e+256).toString(16).substring(1);const EV=(()=>{const e=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const r=new Uint8Array(t);return e.getRandomValues(r),r}}return t=>{const r=[];for(let s=t;s>0;s--)r.push(Math.floor(Math.random()*256));return r}})(),F7=4096;function H2(){(Ix===void 0||H_+16>F7)&&(H_=0,Ix=EV(F7));const e=Array.prototype.slice.call(Ix,H_,H_+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,Qo[e[0]]+Qo[e[1]]+Qo[e[2]]+Qo[e[3]]+"-"+Qo[e[4]]+Qo[e[5]]+"-"+Qo[e[6]]+Qo[e[7]]+"-"+Qo[e[8]]+Qo[e[9]]+"-"+Qo[e[10]]+Qo[e[11]]+Qo[e[12]]+Qo[e[13]]+Qo[e[14]]+Qo[e[15]]}function TV(e){return e??null}function N7(e,t){return e??(t===!0?`f_${H2()}`:null)}function u6({getValue:e,required:t=!0}={}){if(Aa.value===!0){const r=e!==void 0?oi(TV(e())):oi(null);return t===!0&&r.value===null&&ys(()=>{r.value=`f_${H2()}`}),e!==void 0&&Fi(e,s=>{r.value=N7(s,t)}),r}return e!==void 0?Ve(()=>N7(e(),t)):oi(`f_${H2()}`)}const $7=/^on[A-Z]/;function CV(){const{attrs:e,vnode:t}=_r(),r={listeners:oi({}),attributes:oi({})};function s(){const l={},d={};for(const y in e)y!=="class"&&y!=="style"&&$7.test(y)===!1&&(l[y]=e[y]);for(const y in t.props)$7.test(y)===!0&&(d[y]=t.props[y]);r.attributes.value=l,r.listeners.value=d}return nk(s),s(),r}function AV({validate:e,resetValidation:t,requiresQForm:r}){const s=eu(iE,!1);if(s!==!1){const{props:l,proxy:d}=_r();Object.assign(d,{validate:e,resetValidation:t}),Fi(()=>l.disable,y=>{y===!0?(typeof t=="function"&&t(),s.unbindComponent(d)):s.bindComponent(d)}),ys(()=>{l.disable!==!0&&s.bindComponent(d)}),Xn(()=>{l.disable!==!0&&s.unbindComponent(d)})}}const j7=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,U7=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,V7=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,G_=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,W_=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,zx={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>j7.test(e),hexaColor:e=>U7.test(e),hexOrHexaColor:e=>V7.test(e),rgbColor:e=>G_.test(e),rgbaColor:e=>W_.test(e),rgbOrRgbaColor:e=>G_.test(e)||W_.test(e),hexOrRgbColor:e=>j7.test(e)||G_.test(e),hexaOrRgbaColor:e=>U7.test(e)||W_.test(e),anyColor:e=>V7.test(e)||G_.test(e)||W_.test(e)},IV=[!0,!1,"ondemand"],zV={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>IV.includes(e)}};function DV(e,t){const{props:r,proxy:s}=_r(),l=oi(!1),d=oi(null),y=oi(!1);AV({validate:ie,resetValidation:Z});let n=0,M;const P=Ve(()=>r.rules!==void 0&&r.rules!==null&&r.rules.length!==0),L=Ve(()=>r.disable!==!0&&P.value===!0&&t.value===!1),V=Ve(()=>r.error===!0||l.value===!0),X=Ve(()=>typeof r.errorMessage=="string"&&r.errorMessage.length!==0?r.errorMessage:d.value);Fi(()=>r.modelValue,()=>{y.value=!0,L.value===!0&&r.lazyRules===!1&&ae()});function J(){r.lazyRules!=="ondemand"&&L.value===!0&&y.value===!0&&ae()}Fi(()=>r.reactiveRules,de=>{de===!0?M===void 0&&(M=Fi(()=>r.rules,J,{immediate:!0,deep:!0})):M!==void 0&&(M(),M=void 0)},{immediate:!0}),Fi(()=>r.lazyRules,J),Fi(e,de=>{de===!0?y.value=!0:L.value===!0&&r.lazyRules!=="ondemand"&&ae()});function Z(){n++,t.value=!1,y.value=!1,l.value=!1,d.value=null,ae.cancel()}function ie(de=r.modelValue){if(r.disable===!0||P.value===!1)return!0;const fe=++n,le=t.value!==!0?()=>{y.value=!0}:()=>{},he=(Le,Ae)=>{Le===!0&&le(),l.value=Le,d.value=Ae||null,t.value=!1},Ce=[];for(let Le=0;Le<r.rules.length;Le++){const Ae=r.rules[Le];let We;if(typeof Ae=="function"?We=Ae(de,zx):typeof Ae=="string"&&zx[Ae]!==void 0&&(We=zx[Ae](de)),We===!1||typeof We=="string")return he(!0,We),!1;We!==!0&&We!==void 0&&Ce.push(We)}return Ce.length===0?(he(!1),!0):(t.value=!0,Promise.all(Ce).then(Le=>{if(Le===void 0||Array.isArray(Le)===!1||Le.length===0)return fe===n&&he(!1),!0;const Ae=Le.find(We=>We===!1||typeof We=="string");return fe===n&&he(Ae!==void 0,Ae),Ae===void 0},Le=>(fe===n&&he(!0),!1)))}const ae=o4(ie,0);return Xn(()=>{M!==void 0&&M(),ae.cancel()}),Object.assign(s,{resetValidation:Z,validate:ie}),_h(s,"hasError",()=>V.value),{isDirtyModel:y,hasRules:P,hasError:V,errorMessage:X,validate:ie,resetValidation:Z}}function ym(e){return e!=null&&(""+e).length!==0}const ZT={...Fs,...zV,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},PV={...ZT,maxlength:[Number,String]},XT=["update:modelValue","clear","focus","blur"];function YT({requiredForAttr:e=!0,tagProp:t,changeEvent:r=!1}={}){const{props:s,proxy:l}=_r(),d=Ns(s,l.$q),y=u6({required:e,getValue:()=>s.for});return{requiredForAttr:e,changeEvent:r,tag:t===!0?Ve(()=>s.tag):{value:"label"},isDark:d,editable:Ve(()=>s.disable!==!0&&s.readonly!==!0),innerLoading:oi(!1),focused:oi(!1),hasPopupOpen:!1,splitAttrs:CV(),targetUid:y,rootRef:oi(null),targetRef:oi(null),controlRef:oi(null)}}function JT(e){const{props:t,emit:r,slots:s,attrs:l,proxy:d}=_r(),{$q:y}=d;let n=null;e.hasValue===void 0&&(e.hasValue=Ve(()=>ym(t.modelValue))),e.emitValue===void 0&&(e.emitValue=Dt=>{r("update:modelValue",Dt)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:Qe,onFocusout:ze}),Object.assign(e,{clearValue:Ze,onControlFocusin:Qe,onControlFocusout:ze,focus:Ae}),e.computedCounter===void 0&&(e.computedCounter=Ve(()=>{if(t.counter!==!1){const Dt=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,bt=t.maxlength!==void 0?t.maxlength:t.maxValues;return Dt+(bt!==void 0?" / "+bt:"")}}));const{isDirtyModel:M,hasRules:P,hasError:L,errorMessage:V,resetValidation:X}=DV(e.focused,e.innerLoading),J=e.floatingLabel!==void 0?Ve(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):Ve(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),Z=Ve(()=>t.bottomSlots===!0||t.hint!==void 0||P.value===!0||t.counter===!0||t.error!==null),ie=Ve(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),ae=Ve(()=>`q-field row no-wrap items-start q-field--${ie.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(J.value===!0?" q-field--float":"")+(fe.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(L.value===!0?" q-field--error":"")+(L.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&Z.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),de=Ve(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(L.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),fe=Ve(()=>t.labelSlot===!0||t.label!==void 0),le=Ve(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&L.value!==!0?` text-${t.labelColor}`:"")),he=Ve(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:J.value,modelValue:t.modelValue,emitValue:e.emitValue})),Ce=Ve(()=>{const Dt={};return e.targetUid.value&&(Dt.for=e.targetUid.value),t.disable===!0&&(Dt["aria-disabled"]="true"),Dt});function Le(){const Dt=document.activeElement;let bt=e.targetRef!==void 0&&e.targetRef.value;bt&&(Dt===null||Dt.id!==e.targetUid.value)&&(bt.hasAttribute("tabindex")===!0||(bt=bt.querySelector("[tabindex]")),bt&&bt!==Dt&&bt.focus({preventScroll:!0}))}function Ae(){Jm(Le)}function We(){FU(Le);const Dt=document.activeElement;Dt!==null&&e.rootRef.value.contains(Dt)&&Dt.blur()}function Qe(Dt){n!==null&&(clearTimeout(n),n=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,r("focus",Dt))}function ze(Dt,bt){n!==null&&clearTimeout(n),n=setTimeout(()=>{n=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,r("blur",Dt)),bt!==void 0&&bt())})}function Ze(Dt){Cn(Dt),y.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),r("update:modelValue",null),e.changeEvent===!0&&r("change",null),r("clear",t.modelValue),Ao(()=>{const bt=M.value;X(),M.value=bt})}function Ue(Dt){[13,32].includes(Dt.keyCode)&&Ze(Dt)}function vt(){const Dt=[];return s.prepend!==void 0&&Dt.push(tt("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Sa},s.prepend())),Dt.push(tt("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},Be())),L.value===!0&&t.noErrorIcon===!1&&Dt.push(xt("error",[tt(Io,{name:y.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?Dt.push(xt("inner-loading-append",s.loading!==void 0?s.loading():[tt(kd,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&Dt.push(xt("inner-clearable-append",[tt(Io,{class:"q-field__focusable-action",name:t.clearIcon||y.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":y.lang.label.clear,onKeyup:Ue,onClick:Ze})])),s.append!==void 0&&Dt.push(tt("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Sa},s.append())),e.getInnerAppend!==void 0&&Dt.push(xt("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&Dt.push(e.getControlChild()),Dt}function Be(){const Dt=[];return t.prefix!==void 0&&t.prefix!==null&&Dt.push(tt("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&Dt.push(e.getShadowControl()),e.getControl!==void 0?Dt.push(e.getControl()):s.rawControl!==void 0?Dt.push(s.rawControl()):s.control!==void 0&&Dt.push(tt("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},s.control(he.value))),fe.value===!0&&Dt.push(tt("div",{class:le.value},ln(s.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&Dt.push(tt("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),Dt.concat(ln(s.default))}function Ke(){let Dt,bt;L.value===!0?V.value!==null?(Dt=[tt("div",{role:"alert"},V.value)],bt=`q--slot-error-${V.value}`):(Dt=ln(s.error),bt="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(Dt=[tt("div",t.hint)],bt=`q--slot-hint-${t.hint}`):(Dt=ln(s.hint),bt="q--slot-hint"));const bi=t.counter===!0||s.counter!==void 0;if(t.hideBottomSpace===!0&&bi===!1&&Dt===void 0)return;const ji=tt("div",{key:bt,class:"q-field__messages col"},Dt);return tt("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:Sa},[t.hideBottomSpace===!0?ji:tt(Ul,{name:"q-transition--field-message"},()=>ji),bi===!0?tt("div",{class:"q-field__counter"},s.counter!==void 0?s.counter():e.computedCounter.value):null])}function xt(Dt,bt){return bt===null?null:tt("div",{key:Dt,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},bt)}let yt=!1;return W1(()=>{yt=!0}),Ty(()=>{yt===!0&&t.autofocus===!0&&d.focus()}),t.autofocus===!0&&ys(()=>{d.focus()}),Xn(()=>{n!==null&&clearTimeout(n)}),Object.assign(d,{focus:Ae,blur:We}),function(){const bt=e.getControl===void 0&&s.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...Ce.value}:Ce.value;return tt(e.tag.value,{ref:e.rootRef,class:[ae.value,l.class],style:l.style,...bt},[s.before!==void 0?tt("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Sa},s.before()):null,tt("div",{class:"q-field__inner relative-position col self-stretch"},[tt("div",{ref:e.controlRef,class:de.value,tabindex:-1,...e.controlEvents},vt()),Z.value===!0?Ke():null]),s.after!==void 0?tt("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Sa},s.after()):null])}}const q7={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},G2={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},KT=Object.keys(G2);KT.forEach(e=>{G2[e].regex=new RegExp(G2[e].pattern)});const kV=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+KT.join("")+"])|(.)","g"),H7=/[.*+?^${}()|[\]\\]/g,po="",RV={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function LV(e,t,r,s){let l,d,y,n,M,P;const L=oi(null),V=oi(J());function X(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}Fi(()=>e.type+e.autogrow,ie),Fi(()=>e.mask,Qe=>{if(Qe!==void 0)ae(V.value,!0);else{const ze=Ae(V.value);ie(),e.modelValue!==ze&&t("update:modelValue",ze)}}),Fi(()=>e.fillMask+e.reverseFillMask,()=>{L.value===!0&&ae(V.value,!0)}),Fi(()=>e.unmaskedValue,()=>{L.value===!0&&ae(V.value)});function J(){if(ie(),L.value===!0){const Qe=Ce(Ae(e.modelValue));return e.fillMask!==!1?We(Qe):Qe}return e.modelValue}function Z(Qe){if(Qe<l.length)return l.slice(-Qe);let ze="",Ze=l;const Ue=Ze.indexOf(po);if(Ue!==-1){for(let vt=Qe-Ze.length;vt>0;vt--)ze+=po;Ze=Ze.slice(0,Ue)+ze+Ze.slice(Ue)}return Ze}function ie(){if(L.value=e.mask!==void 0&&e.mask.length!==0&&X(),L.value===!1){n=void 0,l="",d="";return}const Qe=q7[e.mask]===void 0?e.mask:q7[e.mask],ze=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",Ze=ze.replace(H7,"\\$&"),Ue=[],vt=[],Be=[];let Ke=e.reverseFillMask===!0,xt="",yt="";Qe.replace(kV,(ji,Qt,Nt,Sr,Ui)=>{if(Sr!==void 0){const ci=G2[Sr];Be.push(ci),yt=ci.negate,Ke===!0&&(vt.push("(?:"+yt+"+)?("+ci.pattern+"+)?(?:"+yt+"+)?("+ci.pattern+"+)?"),Ke=!1),vt.push("(?:"+yt+"+)?("+ci.pattern+")?")}else if(Nt!==void 0)xt="\\"+(Nt==="\\"?"":Nt),Be.push(Nt),Ue.push("([^"+xt+"]+)?"+xt+"?");else{const ci=Qt!==void 0?Qt:Ui;xt=ci==="\\"?"\\\\\\\\":ci.replace(H7,"\\\\$&"),Be.push(ci),Ue.push("([^"+xt+"]+)?"+xt+"?")}});const Dt=new RegExp("^"+Ue.join("")+"("+(xt===""?".":"[^"+xt+"]")+"+)?"+(xt===""?"":"["+xt+"]*")+"$"),bt=vt.length-1,bi=vt.map((ji,Qt)=>Qt===0&&e.reverseFillMask===!0?new RegExp("^"+Ze+"*"+ji):Qt===bt?new RegExp("^"+ji+"("+(yt===""?".":yt)+"+)?"+(e.reverseFillMask===!0?"$":Ze+"*")):new RegExp("^"+ji));y=Be,n=ji=>{const Qt=Dt.exec(e.reverseFillMask===!0?ji:ji.slice(0,Be.length+1));Qt!==null&&(ji=Qt.slice(1).join(""));const Nt=[],Sr=bi.length;for(let Ui=0,ci=ji;Ui<Sr;Ui++){const ur=bi[Ui].exec(ci);if(ur===null)break;ci=ci.slice(ur.shift().length),Nt.push(...ur)}return Nt.length!==0?Nt.join(""):ji},l=Be.map(ji=>typeof ji=="string"?ji:po).join(""),d=l.split(po).join(ze)}function ae(Qe,ze,Ze){const Ue=s.value,vt=Ue.selectionEnd,Be=Ue.value.length-vt,Ke=Ae(Qe);ze===!0&&ie();const xt=Ce(Ke),yt=e.fillMask!==!1?We(xt):xt,Dt=V.value!==yt;Ue.value!==yt&&(Ue.value=yt),Dt===!0&&(V.value=yt),document.activeElement===Ue&&Ao(()=>{if(yt===d){const bi=e.reverseFillMask===!0?d.length:0;Ue.setSelectionRange(bi,bi,"forward");return}if(Ze==="insertFromPaste"&&e.reverseFillMask!==!0){const bi=Ue.selectionEnd;let ji=vt-1;for(let Qt=M;Qt<=ji&&Qt<bi;Qt++)l[Qt]!==po&&ji++;fe.right(Ue,ji);return}if(["deleteContentBackward","deleteContentForward"].indexOf(Ze)!==-1){const bi=e.reverseFillMask===!0?vt===0?yt.length>xt.length?1:0:Math.max(0,yt.length-(yt===d?0:Math.min(xt.length,Be)+1))+1:vt;Ue.setSelectionRange(bi,bi,"forward");return}if(e.reverseFillMask===!0)if(Dt===!0){const bi=Math.max(0,yt.length-(yt===d?0:Math.min(xt.length,Be+1)));bi===1&&vt===1?Ue.setSelectionRange(bi,bi,"forward"):fe.rightReverse(Ue,bi)}else{const bi=yt.length-Be;Ue.setSelectionRange(bi,bi,"backward")}else if(Dt===!0){const bi=Math.max(0,l.indexOf(po),Math.min(xt.length,vt)-1);fe.right(Ue,bi)}else{const bi=vt-1;fe.right(Ue,bi)}});const bt=e.unmaskedValue===!0?Ae(yt):yt;String(e.modelValue)!==bt&&(e.modelValue!==null||bt!=="")&&r(bt,!0)}function de(Qe,ze,Ze){const Ue=Ce(Ae(Qe.value));ze=Math.max(0,l.indexOf(po),Math.min(Ue.length,ze)),M=ze,Qe.setSelectionRange(ze,Ze,"forward")}const fe={left(Qe,ze){const Ze=l.slice(ze-1).indexOf(po)===-1;let Ue=Math.max(0,ze-1);for(;Ue>=0;Ue--)if(l[Ue]===po){ze=Ue,Ze===!0&&ze++;break}if(Ue<0&&l[ze]!==void 0&&l[ze]!==po)return fe.right(Qe,0);ze>=0&&Qe.setSelectionRange(ze,ze,"backward")},right(Qe,ze){const Ze=Qe.value.length;let Ue=Math.min(Ze,ze+1);for(;Ue<=Ze;Ue++)if(l[Ue]===po){ze=Ue;break}else l[Ue-1]===po&&(ze=Ue);if(Ue>Ze&&l[ze-1]!==void 0&&l[ze-1]!==po)return fe.left(Qe,Ze);Qe.setSelectionRange(ze,ze,"forward")},leftReverse(Qe,ze){const Ze=Z(Qe.value.length);let Ue=Math.max(0,ze-1);for(;Ue>=0;Ue--)if(Ze[Ue-1]===po){ze=Ue;break}else if(Ze[Ue]===po&&(ze=Ue,Ue===0))break;if(Ue<0&&Ze[ze]!==void 0&&Ze[ze]!==po)return fe.rightReverse(Qe,0);ze>=0&&Qe.setSelectionRange(ze,ze,"backward")},rightReverse(Qe,ze){const Ze=Qe.value.length,Ue=Z(Ze),vt=Ue.slice(0,ze+1).indexOf(po)===-1;let Be=Math.min(Ze,ze+1);for(;Be<=Ze;Be++)if(Ue[Be-1]===po){ze=Be,ze>0&&vt===!0&&ze--;break}if(Be>Ze&&Ue[ze-1]!==void 0&&Ue[ze-1]!==po)return fe.leftReverse(Qe,Ze);Qe.setSelectionRange(ze,ze,"forward")}};function le(Qe){t("click",Qe),P=void 0}function he(Qe){if(t("keydown",Qe),s4(Qe)===!0||Qe.altKey===!0)return;const ze=s.value,Ze=ze.selectionStart,Ue=ze.selectionEnd;if(Qe.shiftKey||(P=void 0),Qe.keyCode===37||Qe.keyCode===39){Qe.shiftKey&&P===void 0&&(P=ze.selectionDirection==="forward"?Ze:Ue);const vt=fe[(Qe.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(Qe.preventDefault(),vt(ze,P===Ze?Ue:Ze),Qe.shiftKey){const Be=ze.selectionStart;ze.setSelectionRange(Math.min(P,Be),Math.max(P,Be),"forward")}}else Qe.keyCode===8&&e.reverseFillMask!==!0&&Ze===Ue?(fe.left(ze,Ze),ze.setSelectionRange(ze.selectionStart,Ue,"backward")):Qe.keyCode===46&&e.reverseFillMask===!0&&Ze===Ue&&(fe.rightReverse(ze,Ue),ze.setSelectionRange(Ze,ze.selectionEnd,"forward"))}function Ce(Qe){if(Qe==null||Qe==="")return"";if(e.reverseFillMask===!0)return Le(Qe);const ze=y;let Ze=0,Ue="";for(let vt=0;vt<ze.length;vt++){const Be=Qe[Ze],Ke=ze[vt];if(typeof Ke=="string")Ue+=Ke,Be===Ke&&Ze++;else if(Be!==void 0&&Ke.regex.test(Be))Ue+=Ke.transform!==void 0?Ke.transform(Be):Be,Ze++;else return Ue}return Ue}function Le(Qe){const ze=y,Ze=l.indexOf(po);let Ue=Qe.length-1,vt="";for(let Be=ze.length-1;Be>=0&&Ue!==-1;Be--){const Ke=ze[Be];let xt=Qe[Ue];if(typeof Ke=="string")vt=Ke+vt,xt===Ke&&Ue--;else if(xt!==void 0&&Ke.regex.test(xt))do vt=(Ke.transform!==void 0?Ke.transform(xt):xt)+vt,Ue--,xt=Qe[Ue];while(Ze===Be&&xt!==void 0&&Ke.regex.test(xt));else return vt}return vt}function Ae(Qe){return typeof Qe!="string"||n===void 0?typeof Qe=="number"?n(""+Qe):Qe:n(Qe)}function We(Qe){return d.length-Qe.length<=0?Qe:e.reverseFillMask===!0&&Qe.length!==0?d.slice(0,-Qe.length)+Qe:Qe+d.slice(Qe.length)}return{innerValue:V,hasMask:L,moveCursorForPaste:de,updateMaskValue:ae,onMaskedKeydown:he,onMaskedClick:le}}const Ky={name:String};function QT(e={}){return(t,r,s)=>{t[r](tt("input",{class:"hidden"+(s||""),...e.value}))}}function eC(e){return Ve(()=>e.name||e.for)}function tC(e,t){function r(){const s=e.modelValue;try{const l="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(s)===s&&("length"in s?Array.from(s):[s]).forEach(d=>{l.items.add(d)}),{files:l.files}}catch{return{files:void 0}}}return t===!0?Ve(()=>{if(e.type==="file")return r()}):Ve(r)}const OV=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,BV=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,FV=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,NV=/[a-z0-9_ -]$/i;function $V(e){return function(r){if(r.type==="compositionend"||r.type==="change"){if(r.target.qComposing!==!0)return;r.target.qComposing=!1,e(r)}else r.type==="compositionupdate"&&r.target.qComposing!==!0&&typeof r.data=="string"&&(nn.is.firefox===!0?NV.test(r.data)===!1:OV.test(r.data)===!0||BV.test(r.data)===!0||FV.test(r.data)===!0)===!0&&(r.target.qComposing=!0)}}const jV=lr({name:"QInput",inheritAttrs:!1,props:{...PV,...RV,...Ky,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...XT,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:r}){const{proxy:s}=_r(),{$q:l}=s,d={};let y=NaN,n,M,P=null,L;const V=oi(null),X=eC(e),{innerValue:J,hasMask:Z,moveCursorForPaste:ie,updateMaskValue:ae,onMaskedKeydown:de,onMaskedClick:fe}=LV(e,t,xt,V),le=tC(e,!0),he=Ve(()=>ym(J.value)),Ce=$V(Be),Le=YT({changeEvent:!0}),Ae=Ve(()=>e.type==="textarea"||e.autogrow===!0),We=Ve(()=>Ae.value===!0||["text","search","url","tel","password"].includes(e.type)),Qe=Ve(()=>{const Qt={...Le.splitAttrs.listeners.value,onInput:Be,onPaste:vt,onChange:Dt,onBlur:bt,onFocus:Qc};return Qt.onCompositionstart=Qt.onCompositionupdate=Qt.onCompositionend=Ce,Z.value===!0&&(Qt.onKeydown=de,Qt.onClick=fe),e.autogrow===!0&&(Qt.onAnimationend=Ke),Qt}),ze=Ve(()=>{const Qt={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:X.value,...Le.splitAttrs.attributes.value,id:Le.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return Ae.value===!1&&(Qt.type=e.type),e.autogrow===!0&&(Qt.rows=1),Qt});Fi(()=>e.type,()=>{V.value&&(V.value.value=e.modelValue)}),Fi(()=>e.modelValue,Qt=>{if(Z.value===!0){if(M===!0&&(M=!1,String(Qt)===y))return;ae(Qt)}else J.value!==Qt&&(J.value=Qt,e.type==="number"&&d.hasOwnProperty("value")===!0&&(n===!0?n=!1:delete d.value));e.autogrow===!0&&Ao(yt)}),Fi(()=>e.autogrow,Qt=>{Qt===!0?Ao(yt):V.value!==null&&r.rows>0&&(V.value.style.height="auto")}),Fi(()=>e.dense,()=>{e.autogrow===!0&&Ao(yt)});function Ze(){Jm(()=>{const Qt=document.activeElement;V.value!==null&&V.value!==Qt&&(Qt===null||Qt.id!==Le.targetUid.value)&&V.value.focus({preventScroll:!0})})}function Ue(){V.value!==null&&V.value.select()}function vt(Qt){if(Z.value===!0&&e.reverseFillMask!==!0){const Nt=Qt.target;ie(Nt,Nt.selectionStart,Nt.selectionEnd)}t("paste",Qt)}function Be(Qt){if(!Qt||!Qt.target)return;if(e.type==="file"){t("update:modelValue",Qt.target.files);return}const Nt=Qt.target.value;if(Qt.target.qComposing===!0){d.value=Nt;return}if(Z.value===!0)ae(Nt,!1,Qt.inputType);else if(xt(Nt),We.value===!0&&Qt.target===document.activeElement){const{selectionStart:Sr,selectionEnd:Ui}=Qt.target;Sr!==void 0&&Ui!==void 0&&Ao(()=>{Qt.target===document.activeElement&&Nt.indexOf(Qt.target.value)===0&&Qt.target.setSelectionRange(Sr,Ui)})}e.autogrow===!0&&yt()}function Ke(Qt){t("animationend",Qt),yt()}function xt(Qt,Nt){L=()=>{P=null,e.type!=="number"&&d.hasOwnProperty("value")===!0&&delete d.value,e.modelValue!==Qt&&y!==Qt&&(y=Qt,Nt===!0&&(M=!0),t("update:modelValue",Qt),Ao(()=>{y===Qt&&(y=NaN)})),L=void 0},e.type==="number"&&(n=!0,d.value=Qt),e.debounce!==void 0?(P!==null&&clearTimeout(P),d.value=Qt,P=setTimeout(L,e.debounce)):L()}function yt(){requestAnimationFrame(()=>{const Qt=V.value;if(Qt!==null){const Nt=Qt.parentNode.style,{scrollTop:Sr}=Qt,{overflowY:Ui,maxHeight:ci}=l.platform.is.firefox===!0?{}:window.getComputedStyle(Qt),ur=Ui!==void 0&&Ui!=="scroll";ur===!0&&(Qt.style.overflowY="hidden"),Nt.marginBottom=Qt.scrollHeight-1+"px",Qt.style.height="1px",Qt.style.height=Qt.scrollHeight+"px",ur===!0&&(Qt.style.overflowY=parseInt(ci,10)<Qt.scrollHeight?"auto":"hidden"),Nt.marginBottom="",Qt.scrollTop=Sr}})}function Dt(Qt){Ce(Qt),P!==null&&(clearTimeout(P),P=null),L!==void 0&&L(),t("change",Qt.target.value)}function bt(Qt){Qt!==void 0&&Qc(Qt),P!==null&&(clearTimeout(P),P=null),L!==void 0&&L(),n=!1,M=!1,delete d.value,e.type!=="file"&&setTimeout(()=>{V.value!==null&&(V.value.value=J.value!==void 0?J.value:"")})}function bi(){return d.hasOwnProperty("value")===!0?d.value:J.value!==void 0?J.value:""}Xn(()=>{bt()}),ys(()=>{e.autogrow===!0&&yt()}),Object.assign(Le,{innerValue:J,fieldClass:Ve(()=>`q-${Ae.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:Ve(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:V,emitValue:xt,hasValue:he,floatingLabel:Ve(()=>he.value===!0&&(e.type!=="number"||isNaN(J.value)===!1)||ym(e.displayValue)),getControl:()=>tt(Ae.value===!0?"textarea":"input",{ref:V,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...ze.value,...Qe.value,...e.type!=="file"?{value:bi()}:le.value}),getShadowControl:()=>tt("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(Ae.value===!0?"":" text-no-wrap")},[tt("span",{class:"invisible"},bi()),tt("span",e.shadowText)])});const ji=JT(Le);return Object.assign(s,{focus:Ze,select:Ue,getNativeElement:()=>V.value}),_h(s,"nativeEl",()=>V.value),ji}});function iC(e,t){const r=oi(null),s=Ve(()=>e.disable===!0?null:tt("span",{ref:r,class:"no-outline",tabindex:-1}));function l(d){const y=t.value;d!==void 0&&d.type.indexOf("key")===0?y!==null&&document.activeElement!==y&&y.contains(document.activeElement)===!0&&y.focus():r.value!==null&&(d===void 0||y!==null&&y.contains(d.target)===!0)&&r.value.focus()}return{refocusTargetEl:s,refocusTarget:l}}const rC={xs:30,sm:35,md:40,lg:50,xl:60},UV=()=>tt("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[tt("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),tt("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),VV=lr({name:"QRadio",props:{...Fs,...K1,...Ky,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:r}){const{proxy:s}=_r(),l=Ns(e,s.$q),d=Q1(e,rC),y=oi(null),{refocusTargetEl:n,refocusTarget:M}=iC(e,y),P=Ve(()=>Os(e.modelValue)===Os(e.val)),L=Ve(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(l.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),V=Ve(()=>{const he=e.color!==void 0&&(e.keepColor===!0||P.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${P.value===!0?"truthy":"falsy"}${he}`}),X=Ve(()=>(P.value===!0?e.checkedIcon:e.uncheckedIcon)||null),J=Ve(()=>e.disable===!0?-1:e.tabindex||0),Z=Ve(()=>{const he={type:"radio"};return e.name!==void 0&&Object.assign(he,{".checked":P.value===!0,"^checked":P.value===!0?"checked":void 0,name:e.name,value:e.val}),he}),ie=QT(Z);function ae(he){he!==void 0&&(Cn(he),M(he)),e.disable!==!0&&P.value!==!0&&r("update:modelValue",e.val,he)}function de(he){(he.keyCode===13||he.keyCode===32)&&Cn(he)}function fe(he){(he.keyCode===13||he.keyCode===32)&&ae(he)}Object.assign(s,{set:ae});const le=UV();return()=>{const he=X.value!==null?[tt("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[tt(Io,{class:"q-radio__icon",name:X.value})])]:[le];e.disable!==!0&&ie(he,"unshift"," q-radio__native q-ma-none q-pa-none");const Ce=[tt("div",{class:V.value,style:d.value,"aria-hidden":"true"},he)];n.value!==null&&Ce.push(n.value);const Le=e.label!==void 0?_c(t.default,[e.label]):ln(t.default);return Le!==void 0&&Ce.push(tt("div",{class:"q-radio__label q-anchor--skip"},Le)),tt("div",{ref:y,class:L.value,tabindex:J.value,role:"radio","aria-label":e.label,"aria-checked":P.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:ae,onKeydown:de,onKeyup:fe},Ce)}}}),nC={...Fs,...K1,...Ky,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},oC=["update:modelValue"];function sC(e,t){const{props:r,slots:s,emit:l,proxy:d}=_r(),{$q:y}=d,n=Ns(r,y),M=oi(null),{refocusTargetEl:P,refocusTarget:L}=iC(r,M),V=Q1(r,rC),X=Ve(()=>r.val!==void 0&&Array.isArray(r.modelValue)),J=Ve(()=>{const Ue=Os(r.val);return X.value===!0?r.modelValue.findIndex(vt=>Os(vt)===Ue):-1}),Z=Ve(()=>X.value===!0?J.value!==-1:Os(r.modelValue)===Os(r.trueValue)),ie=Ve(()=>X.value===!0?J.value===-1:Os(r.modelValue)===Os(r.falseValue)),ae=Ve(()=>Z.value===!1&&ie.value===!1),de=Ve(()=>r.disable===!0?-1:r.tabindex||0),fe=Ve(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(r.disable===!0?" disabled":"")+(n.value===!0?` q-${e}--dark`:"")+(r.dense===!0?` q-${e}--dense`:"")+(r.leftLabel===!0?" reverse":"")),le=Ve(()=>{const Ue=Z.value===!0?"truthy":ie.value===!0?"falsy":"indet",vt=r.color!==void 0&&(r.keepColor===!0||(e==="toggle"?Z.value===!0:ie.value!==!0))?` text-${r.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${Ue}${vt}`}),he=Ve(()=>{const Ue={type:"checkbox"};return r.name!==void 0&&Object.assign(Ue,{".checked":Z.value,"^checked":Z.value===!0?"checked":void 0,name:r.name,value:X.value===!0?r.val:r.trueValue}),Ue}),Ce=QT(he),Le=Ve(()=>{const Ue={tabindex:de.value,role:e==="toggle"?"switch":"checkbox","aria-label":r.label,"aria-checked":ae.value===!0?"mixed":Z.value===!0?"true":"false"};return r.disable===!0&&(Ue["aria-disabled"]="true"),Ue});function Ae(Ue){Ue!==void 0&&(Cn(Ue),L(Ue)),r.disable!==!0&&l("update:modelValue",We(),Ue)}function We(){if(X.value===!0){if(Z.value===!0){const Ue=r.modelValue.slice();return Ue.splice(J.value,1),Ue}return r.modelValue.concat([r.val])}if(Z.value===!0){if(r.toggleOrder!=="ft"||r.toggleIndeterminate===!1)return r.falseValue}else if(ie.value===!0){if(r.toggleOrder==="ft"||r.toggleIndeterminate===!1)return r.trueValue}else return r.toggleOrder!=="ft"?r.trueValue:r.falseValue;return r.indeterminateValue}function Qe(Ue){(Ue.keyCode===13||Ue.keyCode===32)&&Cn(Ue)}function ze(Ue){(Ue.keyCode===13||Ue.keyCode===32)&&Ae(Ue)}const Ze=t(Z,ae);return Object.assign(d,{toggle:Ae}),()=>{const Ue=Ze();r.disable!==!0&&Ce(Ue,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const vt=[tt("div",{class:le.value,style:V.value,"aria-hidden":"true"},Ue)];P.value!==null&&vt.push(P.value);const Be=r.label!==void 0?_c(s.default,[r.label]):ln(s.default);return Be!==void 0&&vt.push(tt("div",{class:`q-${e}__label q-anchor--skip`},Be)),tt("div",{ref:M,class:fe.value,...Le.value,onClick:Ae,onKeydown:Qe,onKeyup:ze},vt)}}const qV=()=>tt("div",{key:"svg",class:"q-checkbox__bg absolute"},[tt("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[tt("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),tt("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),HV=lr({name:"QCheckbox",props:nC,emits:oC,setup(e){const t=qV();function r(s,l){const d=Ve(()=>(s.value===!0?e.checkedIcon:l.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>d.value!==null?[tt("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[tt(Io,{class:"q-checkbox__icon",name:d.value})])]:[t]}return sC("checkbox",r)}}),GV=lr({name:"QToggle",props:{...nC,icon:String,iconColor:String},emits:oC,setup(e){function t(r,s){const l=Ve(()=>(r.value===!0?e.checkedIcon:s.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),d=Ve(()=>r.value===!0?e.iconColor:null);return()=>[tt("div",{class:"q-toggle__track"}),tt("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},l.value!==void 0?[tt(Io,{name:l.value,color:d.value})]:void 0)]}return sC("toggle",t)}}),aC={radio:VV,checkbox:HV,toggle:GV},WV=Object.keys(aC);function Dx(e,t){if(typeof e=="function")return e;const r=e!==void 0?e:t;return s=>s[r]}const ZV=lr({name:"QOptionGroup",props:{...Fs,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(Ma),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>WV.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:t,slots:r}){const{proxy:{$q:s}}=_r(),l=Array.isArray(e.modelValue);e.type;const d=Ns(e,s),y=Ve(()=>aC[e.type]),n=Ve(()=>Dx(e.optionValue,"value")),M=Ve(()=>Dx(e.optionLabel,"label")),P=Ve(()=>Dx(e.optionDisable,"disable")),L=Ve(()=>e.options.map(Z=>({val:n.value(Z),name:Z.name===void 0?e.name:Z.name,disable:e.disable||P.value(Z),leftLabel:Z.leftLabel===void 0?e.leftLabel:Z.leftLabel,color:Z.color===void 0?e.color:Z.color,checkedIcon:Z.checkedIcon,uncheckedIcon:Z.uncheckedIcon,dark:Z.dark===void 0?d.value:Z.dark,size:Z.size===void 0?e.size:Z.size,dense:e.dense,keepColor:Z.keepColor===void 0?e.keepColor:Z.keepColor}))),V=Ve(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),X=Ve(()=>{const Z={role:"group"};return e.type==="radio"&&(Z.role="radiogroup",e.disable===!0&&(Z["aria-disabled"]="true")),Z});function J(Z){t("update:modelValue",Z)}return()=>tt("div",{class:V.value,...X.value},e.options.map((Z,ie)=>{const ae=r["label-"+ie]!==void 0?()=>r["label-"+ie](Z):r.label!==void 0?()=>r.label(Z):void 0;return tt("div",[tt(y.value,{label:ae===void 0?M.value(Z):null,modelValue:e.modelValue,"onUpdate:modelValue":J,...L.value[ie]},ae)])}))}}),XV=lr({name:"DialogPluginComponent",props:{...Fs,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:t}){const{proxy:r}=_r(),{$q:s}=r,l=Ns(e,s),d=oi(null),y=oi(e.prompt!==void 0?e.prompt.model:e.options!==void 0?e.options.model:void 0),n=Ve(()=>"q-dialog-plugin"+(l.value===!0?" q-dialog-plugin--dark q-dark":"")+(e.progress!==!1?" q-dialog-plugin--progress":"")),M=Ve(()=>e.color||(l.value===!0?"amber":"primary")),P=Ve(()=>e.progress===!1?null:Ma(e.progress)===!0?{component:e.progress.spinner||kd,props:{color:e.progress.color||M.value}}:{component:kd,props:{color:M.value}}),L=Ve(()=>e.prompt!==void 0||e.options!==void 0),V=Ve(()=>{if(L.value!==!0)return{};const{model:Be,isValid:Ke,items:xt,...yt}=e.prompt!==void 0?e.prompt:e.options;return yt}),X=Ve(()=>Ma(e.ok)===!0||e.ok===!0?s.lang.label.ok:e.ok),J=Ve(()=>Ma(e.cancel)===!0||e.cancel===!0?s.lang.label.cancel:e.cancel),Z=Ve(()=>e.prompt!==void 0?e.prompt.isValid!==void 0&&e.prompt.isValid(y.value)!==!0:e.options!==void 0?e.options.isValid!==void 0&&e.options.isValid(y.value)!==!0:!1),ie=Ve(()=>({color:M.value,label:X.value,ripple:!1,disable:Z.value,...Ma(e.ok)===!0?e.ok:{flat:!0},"data-autofocus":e.focus==="ok"&&L.value!==!0||void 0,onClick:le})),ae=Ve(()=>({color:M.value,label:J.value,ripple:!1,...Ma(e.cancel)===!0?e.cancel:{flat:!0},"data-autofocus":e.focus==="cancel"&&L.value!==!0||void 0,onClick:he}));Fi(()=>e.prompt&&e.prompt.model,Le),Fi(()=>e.options&&e.options.model,Le);function de(){d.value.show()}function fe(){d.value.hide()}function le(){t("ok",Os(y.value)),fe()}function he(){fe()}function Ce(){t("hide")}function Le(Be){y.value=Be}function Ae(Be){Z.value!==!0&&e.prompt.type!=="textarea"&&tu(Be,13)===!0&&le()}function We(Be,Ke){return e.html===!0?tt($0,{class:Be,innerHTML:Ke}):tt($0,{class:Be},()=>Ke)}function Qe(){return[tt(jV,{color:M.value,dense:!0,autofocus:!0,dark:l.value,...V.value,modelValue:y.value,"onUpdate:modelValue":Le,onKeyup:Ae})]}function ze(){return[tt(ZV,{color:M.value,options:e.options.items,dark:l.value,...V.value,modelValue:y.value,"onUpdate:modelValue":Le})]}function Ze(){const Be=[];return e.cancel&&Be.push(tt(y1,ae.value)),e.ok&&Be.push(tt(y1,ie.value)),tt(SV,{class:e.stackButtons===!0?"items-end":"",vertical:e.stackButtons,align:"right"},()=>Be)}function Ue(){const Be=[];return e.title&&Be.push(We("q-dialog__title",e.title)),e.progress!==!1&&Be.push(tt($0,{class:"q-dialog__progress"},()=>tt(P.value.component,P.value.props))),e.message&&Be.push(We("q-dialog__message",e.message)),e.prompt!==void 0?Be.push(tt($0,{class:"scroll q-dialog-plugin__form"},Qe)):e.options!==void 0&&Be.push(tt(q2,{dark:l.value}),tt($0,{class:"scroll q-dialog-plugin__form"},ze),tt(q2,{dark:l.value})),(e.ok||e.cancel)&&Be.push(Ze()),Be}function vt(){return[tt(wV,{class:[n.value,e.cardClass],style:e.cardStyle,dark:l.value},Ue)]}return Object.assign(r,{show:de,hide:fe}),()=>tt(FT,{ref:d,onHide:Ce},vt)}});function lC(e,t){for(const r in t)r!=="spinner"&&Object(t[r])===t[r]?(e[r]=Object(e[r])!==e[r]?{}:{...e[r]},lC(e[r],t[r])):e[r]=t[r]}function YV(e,t,r){return s=>{let l,d;const y=s.component!==void 0;if(y===!0){const{component:fe,componentProps:le}=s;l=typeof fe=="string"?r.component(fe):fe,d=le||{}}else{const{class:fe,style:le,...he}=s;l=e,d=he,fe!==void 0&&(he.cardClass=fe),le!==void 0&&(he.cardStyle=le)}let n,M=!1;const P=oi(null),L=Jy(!1,"dialog"),V=fe=>{if(P.value!==null&&P.value[fe]!==void 0){P.value[fe]();return}const le=n.$.subTree;if(le&&le.component){if(le.component.proxy&&le.component.proxy[fe]){le.component.proxy[fe]();return}if(le.component.subTree&&le.component.subTree.component&&le.component.subTree.component.proxy&&le.component.subTree.component.proxy[fe]){le.component.subTree.component.proxy[fe]();return}}},X=[],J=[],Z={onOk(fe){return X.push(fe),Z},onCancel(fe){return J.push(fe),Z},onDismiss(fe){return X.push(fe),J.push(fe),Z},hide(){return V("hide"),Z},update(fe){if(n!==null){if(y===!0)Object.assign(d,fe);else{const{class:le,style:he,...Ce}=fe;le!==void 0&&(Ce.cardClass=le),he!==void 0&&(Ce.cardStyle=he),lC(d,Ce)}n.$forceUpdate()}return Z}},ie=fe=>{M=!0,X.forEach(le=>{le(fe)})},ae=()=>{de.unmount(L),t6(L),de=null,n=null,M!==!0&&J.forEach(fe=>{fe()})};let de=l4({name:"QGlobalDialog",setup:()=>()=>tt(l,{...d,ref:P,onOk:ie,onHide:ae,onVnodeMounted(...fe){typeof d.onVnodeMounted=="function"&&d.onVnodeMounted(...fe),Ao(()=>V("show"))}})},r);return n=de.mount(L),Z}}const Toe={install({$q:e,parentApp:t}){e.dialog=this.create=YV(XV,!0,t)}},j0={};function JV(e){Object.assign(ps,{request:e,exit:e,toggle:e})}function cC(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function uC(){const e=ps.activeEl=ps.isActive===!1?null:cC();$U(e===null||e===document.documentElement?document.body:e)}function KV(){ps.isActive=ps.isActive===!1,uC()}function G7(e,t){try{const r=e[t]();return r===void 0?Promise.resolve():r}catch(r){return Promise.reject(r)}}const ps=Z1({isActive:!1,activeEl:null},{isCapable:!1,install({$q:e}){e.fullscreen=this}});j0.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(e=>document.documentElement[e]!==void 0),ps.isCapable=j0.request!==void 0,ps.isCapable===!1?JV(()=>Promise.reject("Not capable")):(Object.assign(ps,{request(e){const t=e||document.documentElement,{activeEl:r}=ps;return t===r?Promise.resolve():(r!==null&&t.contains(r)===!0?ps.exit():Promise.resolve()).finally(()=>G7(t,j0.request))},exit(){return ps.isActive===!0?G7(document,j0.exit):Promise.resolve()},toggle(e){return ps.isActive===!0?ps.exit():ps.request(e)}}),j0.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(e=>document[e]),ps.isActive=!!cC(),ps.isActive===!0&&uC(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(e=>{document[e]=KV}));let Wf,Px,W7=0,cd=null,Bo={},bd={};const hC={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:kd,customClass:""},dC={...hC};function QV(e){if(e&&e.group!==void 0&&bd[e.group]!==void 0)return Object.assign(bd[e.group],e);const t=Ma(e)===!0&&e.ignoreDefaults===!0?{...hC,...e}:{...dC,...e};return bd[t.group]=t,t}const hc=Z1({isActive:!1},{show(e){Bo=QV(e);const{group:t}=Bo;return hc.isActive=!0,Wf!==void 0?(Bo.uid=W7,Px.$forceUpdate()):(Bo.uid=++W7,cd!==null&&clearTimeout(cd),cd=setTimeout(()=>{cd=null;const r=Jy("q-loading");Wf=l4({name:"QLoading",setup(){ys(()=>{kb(!0)});function s(){hc.isActive!==!0&&Wf!==void 0&&(kb(!1),Wf.unmount(r),t6(r),Wf=void 0,Px=void 0)}function l(){if(hc.isActive!==!0)return null;const d=[tt(Bo.spinner,{class:"q-loading__spinner",color:Bo.spinnerColor,size:Bo.spinnerSize})];return Bo.message&&d.push(tt("div",{class:"q-loading__message"+(Bo.messageColor?` text-${Bo.messageColor}`:""),[Bo.html===!0?"innerHTML":"textContent"]:Bo.message})),tt("div",{class:"q-loading fullscreen flex flex-center z-max "+Bo.customClass.trim(),key:Bo.uid},[tt("div",{class:"q-loading__backdrop"+(Bo.backgroundColor?` bg-${Bo.backgroundColor}`:"")}),tt("div",{class:"q-loading__box column items-center "+Bo.boxClass},d)])}return()=>tt(Ul,{name:"q-transition--fade",appear:!0,onAfterLeave:s},l)}},hc.__parentApp),Px=Wf.mount(r)},Bo.delay)),r=>{if(r===void 0||Object(r)!==r){hc.hide(t);return}hc.show({...r,group:t})}},hide(e){if(hc.isActive===!0){if(e===void 0)bd={};else{if(bd[e]===void 0)return;{delete bd[e];const t=Object.keys(bd);if(t.length!==0){const r=t[t.length-1];hc.show({group:r});return}}}cd!==null&&(clearTimeout(cd),cd=null),hc.isActive=!1}},setDefaults(e){Ma(e)===!0&&Object.assign(dC,e)},install({$q:e,parentApp:t}){e.loading=this,hc.__parentApp=t,e.config.loading!==void 0&&this.setDefaults(e.config.loading)}}),eq=lr({name:"QAvatar",props:{...K1,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const r=Q1(e),s=Ve(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),l=Ve(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const d=e.icon!==void 0?[tt(Io,{name:e.icon})]:void 0;return tt("div",{class:s.value,style:r.value},[tt("div",{class:"q-avatar__content row flex-center overflow-hidden",style:l.value},kT(t.default,d))])}}});let tq=0;const b2={},w2={},Bl={},fC={},iq=/^\s*$/,pC=[],rq=[void 0,null,!0,!1,""],h6=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],nq=["top-left","top-right","bottom-left","bottom-right"],t1={positive:{icon:e=>e.iconSet.type.positive,color:"positive"},negative:{icon:e=>e.iconSet.type.negative,color:"negative"},warning:{icon:e=>e.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:e=>e.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function mC(e,t,r){if(!e)return U0("parameter required");let s;const l={textColor:"white"};if(e.ignoreDefaults!==!0&&Object.assign(l,b2),Ma(e)===!1&&(l.type&&Object.assign(l,t1[l.type]),e={message:e}),Object.assign(l,t1[e.type||l.type],e),typeof l.icon=="function"&&(l.icon=l.icon(t)),l.spinner?(l.spinner===!0&&(l.spinner=kd),l.spinner=uh(l.spinner)):l.spinner=!1,l.meta={hasMedia:!!(l.spinner!==!1||l.icon||l.avatar),hasText:Z7(l.message)||Z7(l.caption)},l.position){if(h6.includes(l.position)===!1)return U0("wrong position",e)}else l.position="bottom";if(rq.includes(l.timeout)===!0)l.timeout=5e3;else{const M=Number(l.timeout);if(isNaN(M)||M<0)return U0("wrong timeout",e);l.timeout=Number.isFinite(M)?M:0}l.timeout===0?l.progress=!1:l.progress===!0&&(l.meta.progressClass="q-notification__progress"+(l.progressClass?` ${l.progressClass}`:""),l.meta.progressStyle={animationDuration:`${l.timeout+1e3}ms`});const d=(Array.isArray(e.actions)===!0?e.actions:[]).concat(e.ignoreDefaults!==!0&&Array.isArray(b2.actions)===!0?b2.actions:[]).concat(t1[e.type]!==void 0&&Array.isArray(t1[e.type].actions)===!0?t1[e.type].actions:[]),{closeBtn:y}=l;if(y&&d.push({label:typeof y=="string"?y:t.lang.label.close}),l.actions=d.map(({handler:M,noDismiss:P,...L})=>({flat:!0,...L,onClick:typeof M=="function"?()=>{M(),P!==!0&&n()}:()=>{n()}})),l.multiLine===void 0&&(l.multiLine=l.actions.length>1),Object.assign(l.meta,{class:`q-notification row items-stretch q-notification--${l.multiLine===!0?"multi-line":"standard"}`+(l.color!==void 0?` bg-${l.color}`:"")+(l.textColor!==void 0?` text-${l.textColor}`:"")+(l.classes!==void 0?` ${l.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(l.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(l.multiLine===!0?"":" col"),leftClass:l.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...l.attrs}}),l.group===!1?(l.group=void 0,l.meta.group=void 0):((l.group===void 0||l.group===!0)&&(l.group=[l.message,l.caption,l.multiline].concat(l.actions.map(M=>`${M.label}*${M.icon}`)).join("|")),l.meta.group=l.group+"|"+l.position),l.actions.length===0?l.actions=void 0:l.meta.actionsClass="q-notification__actions row items-center "+(l.multiLine===!0?"justify-end":"col-auto")+(l.meta.hasMedia===!0?" q-notification__actions--with-media":""),r!==void 0){r.notif.meta.timer&&(clearTimeout(r.notif.meta.timer),r.notif.meta.timer=void 0),l.meta.uid=r.notif.meta.uid;const M=Bl[l.position].value.indexOf(r.notif);Bl[l.position].value[M]=l}else{const M=w2[l.meta.group];if(M===void 0){if(l.meta.uid=tq++,l.meta.badge=1,["left","right","center"].indexOf(l.position)!==-1)Bl[l.position].value.splice(Math.floor(Bl[l.position].value.length/2),0,l);else{const P=l.position.indexOf("top")!==-1?"unshift":"push";Bl[l.position].value[P](l)}l.group!==void 0&&(w2[l.meta.group]=l)}else{if(M.meta.timer&&(clearTimeout(M.meta.timer),M.meta.timer=void 0),l.badgePosition!==void 0){if(nq.includes(l.badgePosition)===!1)return U0("wrong badgePosition",e)}else l.badgePosition=`top-${l.position.indexOf("left")!==-1?"right":"left"}`;l.meta.uid=M.meta.uid,l.meta.badge=M.meta.badge+1,l.meta.badgeClass=`q-notification__badge q-notification__badge--${l.badgePosition}`+(l.badgeColor!==void 0?` bg-${l.badgeColor}`:"")+(l.badgeTextColor!==void 0?` text-${l.badgeTextColor}`:"")+(l.badgeClass?` ${l.badgeClass}`:"");const P=Bl[l.position].value.indexOf(M);Bl[l.position].value[P]=w2[l.meta.group]=l}}const n=()=>{oq(l),s=void 0};if(l.timeout>0&&(l.meta.timer=setTimeout(()=>{l.meta.timer=void 0,n()},l.timeout+1e3)),l.group!==void 0)return M=>{M!==void 0?U0("trying to update a grouped one which is forbidden",e):n()};if(s={dismiss:n,config:e,notif:l},r!==void 0){Object.assign(r,s);return}return M=>{if(s!==void 0)if(M===void 0)s.dismiss();else{const P=Object.assign({},s.config,M,{group:!1,position:l.position});mC(P,t,s)}}}function oq(e){e.meta.timer&&(clearTimeout(e.meta.timer),e.meta.timer=void 0);const t=Bl[e.position].value.indexOf(e);if(t!==-1){e.group!==void 0&&delete w2[e.meta.group];const r=pC[""+e.meta.uid];if(r){const{width:s,height:l}=getComputedStyle(r);r.style.left=`${r.offsetLeft}px`,r.style.width=s,r.style.height=l}Bl[e.position].value.splice(t,1),typeof e.onDismiss=="function"&&e.onDismiss()}}function Z7(e){return e!=null&&iq.test(e)!==!0}function U0(e,t){return!1}function sq(){return lr({name:"QNotifications",devtools:{hide:!0},setup(){return()=>tt("div",{class:"q-notifications"},h6.map(e=>tt(ok,{key:e,class:fC[e],tag:"div",name:`q-notification--${e}`},()=>Bl[e].value.map(t=>{const r=t.meta,s=[];if(r.hasMedia===!0&&(t.spinner!==!1?s.push(tt(t.spinner,{class:"q-notification__spinner q-notification__spinner--"+r.leftClass,color:t.spinnerColor,size:t.spinnerSize})):t.icon?s.push(tt(Io,{class:"q-notification__icon q-notification__icon--"+r.leftClass,name:t.icon,color:t.iconColor,size:t.iconSize,role:"img"})):t.avatar&&s.push(tt(eq,{class:"q-notification__avatar q-notification__avatar--"+r.leftClass},()=>tt("img",{src:t.avatar,"aria-hidden":"true"})))),r.hasText===!0){let d;const y={class:"q-notification__message col"};if(t.html===!0)y.innerHTML=t.caption?`<div>${t.message}</div><div class="q-notification__caption">${t.caption}</div>`:t.message;else{const n=[t.message];d=t.caption?[tt("div",n),tt("div",{class:"q-notification__caption"},[t.caption])]:n}s.push(tt("div",y,d))}const l=[tt("div",{class:r.contentClass},s)];return t.progress===!0&&l.push(tt("div",{key:`${r.uid}|p|${r.badge}`,class:r.progressClass,style:r.progressStyle})),t.actions!==void 0&&l.push(tt("div",{class:r.actionsClass},t.actions.map(d=>tt(y1,d)))),r.badge>1&&l.push(tt("div",{key:`${r.uid}|${r.badge}`,class:t.meta.badgeClass,style:t.badgeStyle},[r.badge])),tt("div",{ref:d=>{pC[""+r.uid]=d},key:r.uid,class:r.class,...r.attrs},[tt("div",{class:r.wrapperClass},l)])}))))}})}const Coe={setDefaults(e){Ma(e)===!0&&Object.assign(b2,e)},registerType(e,t){Ma(t)===!0&&(t1[e]=t)},install({$q:e,parentApp:t}){if(e.notify=this.create=r=>mC(r,e),e.notify.setDefaults=this.setDefaults,e.notify.registerType=this.registerType,e.config.notify!==void 0&&this.setDefaults(e.config.notify),this.__installed!==!0){h6.forEach(s=>{Bl[s]=oi([]);const l=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",d=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",y=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${d}`;fC[s]=`q-notifications__list q-notifications__list--${l} fixed column no-wrap ${y}`});const r=Jy("q-notify");l4(sq(),t).mount(r)}}},Aoe=lr({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:r}}=_r(),s=eu(Fm,jo);if(s===jo)return jo;Cy(tE,!0);const l=Ve(()=>{const d={};return s.header.space===!0&&(d.paddingTop=`${s.header.size}px`),s.right.space===!0&&(d[`padding${r.lang.rtl===!0?"Left":"Right"}`]=`${s.right.size}px`),s.footer.space===!0&&(d.paddingBottom=`${s.footer.size}px`),s.left.space===!0&&(d[`padding${r.lang.rtl===!0?"Right":"Left"}`]=`${s.left.size}px`),d});return()=>tt("div",{class:"q-page-container",style:l.value},ln(t.default))}}),{passive:X7}=go,aq=["both","horizontal","vertical"],gC=lr({name:"QScrollObserver",props:{axis:{type:String,validator:e=>aq.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:r6},emits:["scroll"],setup(e,{emit:t}){const r={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let s=null,l,d;Fi(()=>e.scrollTarget,()=>{M(),n()});function y(){s!==null&&s();const V=Math.max(0,o6(l)),X=s6(l),J={top:V-r.position.top,left:X-r.position.left};if(e.axis==="vertical"&&J.top===0||e.axis==="horizontal"&&J.left===0)return;const Z=Math.abs(J.top)>=Math.abs(J.left)?J.top<0?"up":"down":J.left<0?"left":"right";r.position={top:V,left:X},r.directionChanged=r.direction!==Z,r.delta=J,r.directionChanged===!0&&(r.direction=Z,r.inflectionPoint=r.position),t("scroll",{...r})}function n(){l=n6(d,e.scrollTarget),l.addEventListener("scroll",P,X7),P(!0)}function M(){l!==void 0&&(l.removeEventListener("scroll",P,X7),l=void 0)}function P(V){if(V===!0||e.debounce===0||e.debounce==="0")y();else if(s===null){const[X,J]=e.debounce?[setTimeout(y,e.debounce),clearTimeout]:[requestAnimationFrame(y),cancelAnimationFrame];s=()=>{J(X),s=null}}}const{proxy:L}=_r();return Fi(()=>L.$q.lang.rtl,y),ys(()=>{d=L.$el.parentNode,n()}),Xn(()=>{s!==null&&s(),M()}),Object.assign(L,{trigger:P,getPosition:()=>r}),ia}});function lq(){const e=oi(!Aa.value);return e.value===!1&&ys(()=>{e.value=!0}),{isHydrated:e}}const _C=typeof ResizeObserver<"u",Y7=_C===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},vm=lr({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:t}){let r=null,s,l={width:-1,height:-1};function d(M){M===!0||e.debounce===0||e.debounce==="0"?y():r===null&&(r=setTimeout(y,e.debounce))}function y(){if(r!==null&&(clearTimeout(r),r=null),s){const{offsetWidth:M,offsetHeight:P}=s;(M!==l.width||P!==l.height)&&(l={width:M,height:P},t("resize",l))}}const{proxy:n}=_r();if(n.trigger=d,_C===!0){let M;const P=L=>{s=n.$el.parentNode,s?(M=new ResizeObserver(d),M.observe(s),y()):L!==!0&&Ao(()=>{P(!0)})};return ys(()=>{P()}),Xn(()=>{r!==null&&clearTimeout(r),M!==void 0&&(M.disconnect!==void 0?M.disconnect():s&&M.unobserve(s))}),ia}else{let M=function(){r!==null&&(clearTimeout(r),r=null),V!==void 0&&(V.removeEventListener!==void 0&&V.removeEventListener("resize",d,go.passive),V=void 0)},P=function(){M(),s&&s.contentDocument&&(V=s.contentDocument.defaultView,V.addEventListener("resize",d,go.passive),y())};const{isHydrated:L}=lq();let V;return ys(()=>{Ao(()=>{s=n.$el,s&&P()})}),Xn(M),()=>{if(L.value===!0)return tt("object",{class:"q--avoid-card-border",style:Y7.style,tabindex:-1,type:"text/html",data:Y7.url,"aria-hidden":"true",onLoad:P})}}}}),Ioe=lr({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:t,emit:r}){const{proxy:{$q:s}}=_r(),l=oi(null),d=oi(s.screen.height),y=oi(e.container===!0?0:s.screen.width),n=oi({position:0,direction:"down",inflectionPoint:0}),M=oi(0),P=oi(Aa.value===!0?0:x2()),L=Ve(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),V=Ve(()=>e.container===!1?{minHeight:s.screen.height+"px"}:null),X=Ve(()=>P.value!==0?{[s.lang.rtl===!0?"left":"right"]:`${P.value}px`}:null),J=Ve(()=>P.value!==0?{[s.lang.rtl===!0?"right":"left"]:0,[s.lang.rtl===!0?"left":"right"]:`-${P.value}px`,width:`calc(100% + ${P.value}px)`}:null);function Z(he){if(e.container===!0||document.qScrollPrevented!==!0){const Ce={position:he.position.top,direction:he.direction,directionChanged:he.directionChanged,inflectionPoint:he.inflectionPoint.top,delta:he.delta.top};n.value=Ce,e.onScroll!==void 0&&r("scroll",Ce)}}function ie(he){const{height:Ce,width:Le}=he;let Ae=!1;d.value!==Ce&&(Ae=!0,d.value=Ce,e.onScrollHeight!==void 0&&r("scrollHeight",Ce),de()),y.value!==Le&&(Ae=!0,y.value=Le),Ae===!0&&e.onResize!==void 0&&r("resize",he)}function ae({height:he}){M.value!==he&&(M.value=he,de())}function de(){if(e.container===!0){const he=d.value>M.value?x2():0;P.value!==he&&(P.value=he)}}let fe=null;const le={instances:{},view:Ve(()=>e.view),isContainer:Ve(()=>e.container),rootRef:l,height:d,containerHeight:M,scrollbarWidth:P,totalWidth:Ve(()=>y.value+P.value),rows:Ve(()=>{const he=e.view.toLowerCase().split(" ");return{top:he[0].split(""),middle:he[1].split(""),bottom:he[2].split("")}}),header:yd({size:0,offset:0,space:!1}),right:yd({size:300,offset:0,space:!1}),footer:yd({size:0,offset:0,space:!1}),left:yd({size:300,offset:0,space:!1}),scroll:n,animate(){fe!==null?clearTimeout(fe):document.body.classList.add("q-body--layout-animate"),fe=setTimeout(()=>{fe=null,document.body.classList.remove("q-body--layout-animate")},155)},update(he,Ce,Le){le[he][Ce]=Le}};if(Cy(Fm,le),x2()>0){let he=function(){Ae=null,We.classList.remove("hide-scrollbar")},Ce=function(){if(Ae===null){if(We.scrollHeight>s.screen.height)return;We.classList.add("hide-scrollbar")}else clearTimeout(Ae);Ae=setTimeout(he,300)},Le=function(Qe){Ae!==null&&Qe==="remove"&&(clearTimeout(Ae),he()),window[`${Qe}EventListener`]("resize",Ce)},Ae=null;const We=document.body;Fi(()=>e.container!==!0?"add":"remove",Le),e.container!==!0&&Le("add"),GM(()=>{Le("remove")})}return()=>{const he=_c(t.default,[tt(gC,{onScroll:Z}),tt(vm,{onResize:ie})]),Ce=tt("div",{class:L.value,style:V.value,ref:e.container===!0?void 0:l,tabindex:-1},he);return e.container===!0?tt("div",{class:"q-layout-container overflow-hidden",ref:l},[tt(vm,{onResize:ae}),tt("div",{class:"absolute-full",style:X.value},[tt("div",{class:"scroll",style:J.value},[Ce])])]):Ce}}}),d6={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},cq=Object.keys(d6);d6.all=!0;function W2(e){const t={};for(const r of cq)e[r]===!0&&(t[r]=!0);return Object.keys(t).length===0?d6:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const uq=["INPUT","TEXTAREA"];function Z2(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&uq.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function xm(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),R2.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function kx(e,t,r){const s=Pd(e);let l,d=s.left-t.event.x,y=s.top-t.event.y,n=Math.abs(d),M=Math.abs(y);const P=t.direction;P.horizontal===!0&&P.vertical!==!0?l=d<0?"left":"right":P.horizontal!==!0&&P.vertical===!0?l=y<0?"up":"down":P.up===!0&&y<0?(l="up",n>M&&(P.left===!0&&d<0?l="left":P.right===!0&&d>0&&(l="right"))):P.down===!0&&y>0?(l="down",n>M&&(P.left===!0&&d<0?l="left":P.right===!0&&d>0&&(l="right"))):P.left===!0&&d<0?(l="left",n<M&&(P.up===!0&&y<0?l="up":P.down===!0&&y>0&&(l="down"))):P.right===!0&&d>0&&(l="right",n<M&&(P.up===!0&&y<0?l="up":P.down===!0&&y>0&&(l="down")));let L=!1;if(l===void 0&&r===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};l=t.event.lastDir,L=!0,l==="left"||l==="right"?(s.left-=d,n=0,d=0):(s.top-=y,M=0,y=0)}return{synthetic:L,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:s,direction:l,isFirst:t.event.isFirst,isFinal:r===!0,duration:Date.now()-t.event.time,distance:{x:n,y:M},offset:{x:d,y},delta:{x:s.left-t.event.lastX,y:s.top-t.event.lastY}}}}let hq=0;const im=Bm({name:"touch-pan",beforeMount(e,{value:t,modifiers:r}){if(r.mouse!==!0&&nn.has.touch!==!0)return;function s(d,y){r.mouse===!0&&y===!0?Cn(d):(r.stop===!0&&Qc(d),r.prevent===!0&&Sa(d))}const l={uid:"qvtp_"+hq++,handler:t,modifiers:r,direction:W2(r),noop:ia,mouseStart(d){Z2(d,l)&&YM(d)&&(Ea(l,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),l.start(d,!0))},touchStart(d){if(Z2(d,l)){const y=d.target;Ea(l,"temp",[[y,"touchmove","move","notPassiveCapture"],[y,"touchcancel","end","passiveCapture"],[y,"touchend","end","passiveCapture"]]),l.start(d)}},start(d,y){if(nn.is.firefox===!0&&u1(e,!0),l.lastEvt=d,y===!0||r.stop===!0){if(l.direction.all!==!0&&(y!==!0||l.modifiers.mouseAllDir!==!0&&l.modifiers.mousealldir!==!0)){const P=d.type.indexOf("mouse")!==-1?new MouseEvent(d.type,d):new TouchEvent(d.type,d);d.defaultPrevented===!0&&Sa(P),d.cancelBubble===!0&&Qc(P),Object.assign(P,{qKeyEvent:d.qKeyEvent,qClickOutside:d.qClickOutside,qAnchorHandled:d.qAnchorHandled,qClonedBy:d.qClonedBy===void 0?[l.uid]:d.qClonedBy.concat(l.uid)}),l.initialEvent={target:d.target,event:P}}Qc(d)}const{left:n,top:M}=Pd(d);l.event={x:n,y:M,time:Date.now(),mouse:y===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:n,lastY:M}},move(d){if(l.event===void 0)return;const y=Pd(d),n=y.left-l.event.x,M=y.top-l.event.y;if(n===0&&M===0)return;l.lastEvt=d;const P=l.event.mouse===!0,L=()=>{s(d,P);let J;r.preserveCursor!==!0&&r.preservecursor!==!0&&(J=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),P===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),xm(),l.styleCleanup=Z=>{if(l.styleCleanup=void 0,J!==void 0&&(document.documentElement.style.cursor=J),document.body.classList.remove("non-selectable"),P===!0){const ie=()=>{document.body.classList.remove("no-pointer-events--children")};Z!==void 0?setTimeout(()=>{ie(),Z()},50):ie()}else Z!==void 0&&Z()}};if(l.event.detected===!0){l.event.isFirst!==!0&&s(d,l.event.mouse);const{payload:J,synthetic:Z}=kx(d,l,!1);J!==void 0&&(l.handler(J)===!1?l.end(d):(l.styleCleanup===void 0&&l.event.isFirst===!0&&L(),l.event.lastX=J.position.left,l.event.lastY=J.position.top,l.event.lastDir=Z===!0?void 0:J.direction,l.event.isFirst=!1));return}if(l.direction.all===!0||P===!0&&(l.modifiers.mouseAllDir===!0||l.modifiers.mousealldir===!0)){L(),l.event.detected=!0,l.move(d);return}const V=Math.abs(n),X=Math.abs(M);V!==X&&(l.direction.horizontal===!0&&V>X||l.direction.vertical===!0&&V<X||l.direction.up===!0&&V<X&&M<0||l.direction.down===!0&&V<X&&M>0||l.direction.left===!0&&V>X&&n<0||l.direction.right===!0&&V>X&&n>0?(l.event.detected=!0,l.move(d)):l.end(d,!0))},end(d,y){if(l.event!==void 0){if(bc(l,"temp"),nn.is.firefox===!0&&u1(e,!1),y===!0)l.styleCleanup!==void 0&&l.styleCleanup(),l.event.detected!==!0&&l.initialEvent!==void 0&&l.initialEvent.target.dispatchEvent(l.initialEvent.event);else if(l.event.detected===!0){l.event.isFirst===!0&&l.handler(kx(d===void 0?l.lastEvt:d,l).payload);const{payload:n}=kx(d===void 0?l.lastEvt:d,l,!0),M=()=>{l.handler(n)};l.styleCleanup!==void 0?l.styleCleanup(M):M()}l.event=void 0,l.initialEvent=void 0,l.lastEvt=void 0}}};if(e.__qtouchpan=l,r.mouse===!0){const d=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";Ea(l,"main",[[e,"mousedown","mouseStart",`passive${d}`]])}nn.has.touch===!0&&Ea(l,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const r=e.__qtouchpan;r!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&r.end(),r.handler=t.value),r.direction=W2(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),bc(t,"main"),bc(t,"temp"),nn.is.firefox===!0&&u1(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}}),J7=150,zoe=lr({name:"QDrawer",inheritAttrs:!1,props:{...Zm,...Fs,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Xm,"onLayout","miniState"],setup(e,{slots:t,emit:r,attrs:s}){const l=_r(),{proxy:{$q:d}}=l,y=Ns(e,d),{preventBodyScroll:n}=PT(),{registerTimeout:M,removeTimeout:P}=iu(),L=eu(Fm,jo);if(L===jo)return jo;let V,X=null,J;const Z=oi(e.behavior==="mobile"||e.behavior!=="desktop"&&L.totalWidth.value<=e.breakpoint),ie=Ve(()=>e.mini===!0&&Z.value!==!0),ae=Ve(()=>ie.value===!0?e.miniWidth:e.width),de=oi(e.showIfAbove===!0&&Z.value===!1?!0:e.modelValue===!0),fe=Ve(()=>e.persistent!==!0&&(Z.value===!0||bi.value===!0));function le(Rt,Ot){if(Ae(),Rt!==!1&&L.animate(),En(0),Z.value===!0){const sr=L.instances[xt.value];sr!==void 0&&sr.belowBreakpoint===!0&&sr.hide(!1),Pt(1),L.isContainer.value!==!0&&n(!0)}else Pt(0),Rt!==!1&&Jn(!1);M(()=>{Rt!==!1&&Jn(!0),Ot!==!0&&r("show",Rt)},J7)}function he(Rt,Ot){We(),Rt!==!1&&L.animate(),Pt(0),En(Ze.value*ae.value),un(),Ot!==!0?M(()=>{r("hide",Rt)},J7):P()}const{show:Ce,hide:Le}=Ym({showing:de,hideOnRouteChange:fe,handleShow:le,handleHide:he}),{addToHistory:Ae,removeFromHistory:We}=MT(de,Le,fe),Qe={belowBreakpoint:Z,hide:Le},ze=Ve(()=>e.side==="right"),Ze=Ve(()=>(d.lang.rtl===!0?-1:1)*(ze.value===!0?1:-1)),Ue=oi(0),vt=oi(!1),Be=oi(!1),Ke=oi(ae.value*Ze.value),xt=Ve(()=>ze.value===!0?"left":"right"),yt=Ve(()=>de.value===!0&&Z.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:ae.value:0),Dt=Ve(()=>e.overlay===!0||e.miniToOverlay===!0||L.view.value.indexOf(ze.value?"R":"L")!==-1||d.platform.is.ios===!0&&L.isContainer.value===!0),bt=Ve(()=>e.overlay===!1&&de.value===!0&&Z.value===!1),bi=Ve(()=>e.overlay===!0&&de.value===!0&&Z.value===!1),ji=Ve(()=>"fullscreen q-drawer__backdrop"+(de.value===!1&&vt.value===!1?" hidden":"")),Qt=Ve(()=>({backgroundColor:`rgba(0,0,0,${Ue.value*.4})`})),Nt=Ve(()=>ze.value===!0?L.rows.value.top[2]==="r":L.rows.value.top[0]==="l"),Sr=Ve(()=>ze.value===!0?L.rows.value.bottom[2]==="r":L.rows.value.bottom[0]==="l"),Ui=Ve(()=>{const Rt={};return L.header.space===!0&&Nt.value===!1&&(Dt.value===!0?Rt.top=`${L.header.offset}px`:L.header.space===!0&&(Rt.top=`${L.header.size}px`)),L.footer.space===!0&&Sr.value===!1&&(Dt.value===!0?Rt.bottom=`${L.footer.offset}px`:L.footer.space===!0&&(Rt.bottom=`${L.footer.size}px`)),Rt}),ci=Ve(()=>{const Rt={width:`${ae.value}px`,transform:`translateX(${Ke.value}px)`};return Z.value===!0?Rt:Object.assign(Rt,Ui.value)}),ur=Ve(()=>"q-drawer__content fit "+(L.isContainer.value!==!0?"scroll":"overflow-auto")),cn=Ve(()=>`q-drawer q-drawer--${e.side}`+(Be.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(y.value===!0?" q-drawer--dark q-dark":"")+(vt.value===!0?" no-transition":de.value===!0?"":" q-layout--prevent-focus")+(Z.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${ie.value===!0?"mini":"standard"}`+(Dt.value===!0||bt.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Nt.value===!0?" q-drawer--top-padding":""))),Di=Ve(()=>{const Rt=d.lang.rtl===!0?e.side:xt.value;return[[im,lo,void 0,{[Rt]:!0,mouse:!0}]]}),Te=Ve(()=>{const Rt=d.lang.rtl===!0?xt.value:e.side;return[[im,Oi,void 0,{[Rt]:!0,mouse:!0}]]}),On=Ve(()=>{const Rt=d.lang.rtl===!0?xt.value:e.side;return[[im,Oi,void 0,{[Rt]:!0,mouse:!0,mouseAllDir:!0}]]});function Bn(){Do(Z,e.behavior==="mobile"||e.behavior!=="desktop"&&L.totalWidth.value<=e.breakpoint)}Fi(Z,Rt=>{Rt===!0?(V=de.value,de.value===!0&&Le(!1)):e.overlay===!1&&e.behavior!=="mobile"&&V!==!1&&(de.value===!0?(En(0),Pt(0),un()):Ce(!1))}),Fi(()=>e.side,(Rt,Ot)=>{L.instances[Ot]===Qe&&(L.instances[Ot]=void 0,L[Ot].space=!1,L[Ot].offset=0),L.instances[Rt]=Qe,L[Rt].size=ae.value,L[Rt].space=bt.value,L[Rt].offset=yt.value}),Fi(L.totalWidth,()=>{(L.isContainer.value===!0||document.qScrollPrevented!==!0)&&Bn()}),Fi(()=>e.behavior+e.breakpoint,Bn),Fi(L.isContainer,Rt=>{de.value===!0&&n(Rt!==!0),Rt===!0&&Bn()}),Fi(L.scrollbarWidth,()=>{En(de.value===!0?0:void 0)}),Fi(yt,Rt=>{Xr("offset",Rt)}),Fi(bt,Rt=>{r("onLayout",Rt),Xr("space",Rt)}),Fi(ze,()=>{En()}),Fi(ae,Rt=>{En(),hi(e.miniToOverlay,Rt)}),Fi(()=>e.miniToOverlay,Rt=>{hi(Rt,ae.value)}),Fi(()=>d.lang.rtl,()=>{En()}),Fi(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Xi(),L.animate())}),Fi(ie,Rt=>{r("miniState",Rt)});function En(Rt){Rt===void 0?Ao(()=>{Rt=de.value===!0?0:ae.value,En(Ze.value*Rt)}):(L.isContainer.value===!0&&ze.value===!0&&(Z.value===!0||Math.abs(Rt)===ae.value)&&(Rt+=Ze.value*L.scrollbarWidth.value),Ke.value=Rt)}function Pt(Rt){Ue.value=Rt}function Jn(Rt){const Ot=Rt===!0?"remove":L.isContainer.value!==!0?"add":"";Ot!==""&&document.body.classList[Ot]("q-body--drawer-toggle")}function Xi(){X!==null&&clearTimeout(X),l.proxy&&l.proxy.$el&&l.proxy.$el.classList.add("q-drawer--mini-animate"),Be.value=!0,X=setTimeout(()=>{X=null,Be.value=!1,l&&l.proxy&&l.proxy.$el&&l.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function lo(Rt){if(de.value!==!1)return;const Ot=ae.value,sr=Kc(Rt.distance.x,0,Ot);if(Rt.isFinal===!0){sr>=Math.min(75,Ot)===!0?Ce():(L.animate(),Pt(0),En(Ze.value*Ot)),vt.value=!1;return}En((d.lang.rtl===!0?ze.value!==!0:ze.value)?Math.max(Ot-sr,0):Math.min(0,sr-Ot)),Pt(Kc(sr/Ot,0,1)),Rt.isFirst===!0&&(vt.value=!0)}function Oi(Rt){if(de.value!==!0)return;const Ot=ae.value,sr=Rt.direction===e.side,hr=(d.lang.rtl===!0?sr!==!0:sr)?Kc(Rt.distance.x,0,Ot):0;if(Rt.isFinal===!0){Math.abs(hr)<Math.min(75,Ot)===!0?(L.animate(),Pt(1),En(0)):Le(),vt.value=!1;return}En(Ze.value*hr),Pt(Kc(1-hr/Ot,0,1)),Rt.isFirst===!0&&(vt.value=!0)}function un(){n(!1),Jn(!0)}function Xr(Rt,Ot){L.update(e.side,Rt,Ot)}function Do(Rt,Ot){Rt.value!==Ot&&(Rt.value=Ot)}function hi(Rt,Ot){Xr("size",Rt===!0?e.miniWidth:Ot)}return L.instances[e.side]=Qe,hi(e.miniToOverlay,ae.value),Xr("space",bt.value),Xr("offset",yt.value),e.showIfAbove===!0&&e.modelValue!==!0&&de.value===!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",!0),ys(()=>{r("onLayout",bt.value),r("miniState",ie.value),V=e.showIfAbove===!0;const Rt=()=>{(de.value===!0?le:he)(!1,!0)};if(L.totalWidth.value!==0){Ao(Rt);return}J=Fi(L.totalWidth,()=>{J(),J=void 0,de.value===!1&&e.showIfAbove===!0&&Z.value===!1?Ce(!1):Rt()})}),Xn(()=>{J!==void 0&&J(),X!==null&&(clearTimeout(X),X=null),de.value===!0&&un(),L.instances[e.side]===Qe&&(L.instances[e.side]=void 0,Xr("size",0),Xr("offset",0),Xr("space",!1))}),()=>{const Rt=[];Z.value===!0&&(e.noSwipeOpen===!1&&Rt.push(Dd(tt("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Di.value)),Rt.push(_m("div",{ref:"backdrop",class:ji.value,style:Qt.value,"aria-hidden":"true",onClick:Le},void 0,"backdrop",e.noSwipeBackdrop!==!0&&de.value===!0,()=>On.value)));const Ot=ie.value===!0&&t.mini!==void 0,sr=[tt("div",{...s,key:""+Ot,class:[ur.value,s.class]},Ot===!0?t.mini():ln(t.default))];return e.elevated===!0&&de.value===!0&&sr.push(tt("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),Rt.push(_m("aside",{ref:"content",class:cn.value,style:ci.value},sr,"contentclose",e.noSwipeClose!==!0&&Z.value===!0,()=>Te.value)),tt("div",{class:"q-drawer-container"},Rt)}}}),dq=["ul","ol"],Doe=lr({name:"QList",props:{...Fs,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const r=_r(),s=Ns(e,r.proxy.$q),l=Ve(()=>dq.includes(e.tag)?null:"list"),d=Ve(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(s.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>tt(e.tag,{class:d.value,role:l.value},ln(t.default))}}),fq=lr({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(e){return()=>[tt("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),tt("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),Dd(tt("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),Dd(tt("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}}),K7=["vertical","horizontal"],Rx={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Q7={prevent:!0,mouse:!0,mouseAllDir:!0},eS=e=>e>=250?50:Math.ceil(e/5),Poe=lr({name:"QScrollArea",props:{...Fs,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:r}){const s=oi(!1),l=oi(!1),d=oi(!1),y={vertical:oi(0),horizontal:oi(0)},n={vertical:{ref:oi(null),position:oi(0),size:oi(0)},horizontal:{ref:oi(null),position:oi(0),size:oi(0)}},{proxy:M}=_r(),P=Ns(e,M.$q);let L=null,V;const X=oi(null),J=Ve(()=>"q-scrollarea"+(P.value===!0?" q-scrollarea--dark":""));Object.assign(y,{verticalInner:Ve(()=>y.vertical.value-e.verticalOffset[0]-e.verticalOffset[1]),horizontalInner:Ve(()=>y.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1])}),n.vertical.percentage=Ve(()=>{const Be=n.vertical.size.value-y.vertical.value;if(Be<=0)return 0;const Ke=Kc(n.vertical.position.value/Be,0,1);return Math.round(Ke*1e4)/1e4}),n.vertical.thumbHidden=Ve(()=>(e.visible===null?d.value:e.visible)!==!0&&s.value===!1&&l.value===!1||n.vertical.size.value<=y.vertical.value+1),n.vertical.thumbStart=Ve(()=>e.verticalOffset[0]+n.vertical.percentage.value*(y.verticalInner.value-n.vertical.thumbSize.value)),n.vertical.thumbSize=Ve(()=>Math.round(Kc(y.verticalInner.value*y.verticalInner.value/n.vertical.size.value,eS(y.verticalInner.value),y.verticalInner.value))),n.vertical.style=Ve(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${n.vertical.thumbStart.value}px`,height:`${n.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`})),n.vertical.thumbClass=Ve(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(n.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),n.vertical.barClass=Ve(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(n.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),n.horizontal.percentage=Ve(()=>{const Be=n.horizontal.size.value-y.horizontal.value;if(Be<=0)return 0;const Ke=Kc(Math.abs(n.horizontal.position.value)/Be,0,1);return Math.round(Ke*1e4)/1e4}),n.horizontal.thumbHidden=Ve(()=>(e.visible===null?d.value:e.visible)!==!0&&s.value===!1&&l.value===!1||n.horizontal.size.value<=y.horizontal.value+1),n.horizontal.thumbStart=Ve(()=>e.horizontalOffset[0]+n.horizontal.percentage.value*(y.horizontalInner.value-n.horizontal.thumbSize.value)),n.horizontal.thumbSize=Ve(()=>Math.round(Kc(y.horizontalInner.value*y.horizontalInner.value/n.horizontal.size.value,eS(y.horizontalInner.value),y.horizontalInner.value))),n.horizontal.style=Ve(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[M.$q.lang.rtl===!0?"right":"left"]:`${n.horizontal.thumbStart.value}px`,width:`${n.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`})),n.horizontal.thumbClass=Ve(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(n.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),n.horizontal.barClass=Ve(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(n.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const Z=Ve(()=>n.vertical.thumbHidden.value===!0&&n.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle);function ie(){const Be={};return K7.forEach(Ke=>{const xt=n[Ke];Object.assign(Be,{[Ke+"Position"]:xt.position.value,[Ke+"Percentage"]:xt.percentage.value,[Ke+"Size"]:xt.size.value,[Ke+"ContainerSize"]:y[Ke].value,[Ke+"ContainerInnerSize"]:y[Ke+"Inner"].value})}),Be}const ae=o4(()=>{const Be=ie();Be.ref=M,r("scroll",Be)},0);function de(Be,Ke,xt){if(K7.includes(Be)===!1)return;(Be==="vertical"?w7:Sx)(X.value,Ke,xt)}function fe({height:Be,width:Ke}){let xt=!1;y.vertical.value!==Be&&(y.vertical.value=Be,xt=!0),y.horizontal.value!==Ke&&(y.horizontal.value=Ke,xt=!0),xt===!0&&Ae()}function le({position:Be}){let Ke=!1;n.vertical.position.value!==Be.top&&(n.vertical.position.value=Be.top,Ke=!0),n.horizontal.position.value!==Be.left&&(n.horizontal.position.value=Be.left,Ke=!0),Ke===!0&&Ae()}function he({height:Be,width:Ke}){n.horizontal.size.value!==Ke&&(n.horizontal.size.value=Ke,Ae()),n.vertical.size.value!==Be&&(n.vertical.size.value=Be,Ae())}function Ce(Be,Ke){const xt=n[Ke];if(Be.isFirst===!0){if(xt.thumbHidden.value===!0)return;V=xt.position.value,l.value=!0}else if(l.value!==!0)return;Be.isFinal===!0&&(l.value=!1);const yt=Rx[Ke],Dt=(xt.size.value-y[Ke].value)/(y[Ke+"Inner"].value-xt.thumbSize.value),bt=Be.distance[yt.dist],bi=V+(Be.direction===yt.dir?1:-1)*bt*Dt;We(bi,Ke)}function Le(Be,Ke){const xt=n[Ke];if(xt.thumbHidden.value!==!0){const yt=Ke==="vertical"?e.verticalOffset[0]:e.horizontalOffset[0],Dt=Be[Rx[Ke].offset]-yt,bt=xt.thumbStart.value-yt;if(Dt<bt||Dt>bt+xt.thumbSize.value){const bi=Dt-xt.thumbSize.value/2,ji=Kc(bi/(y[Ke+"Inner"].value-xt.thumbSize.value),0,1);We(ji*Math.max(0,xt.size.value-y[Ke].value),Ke)}xt.ref.value!==null&&xt.ref.value.dispatchEvent(new MouseEvent(Be.type,Be))}}function Ae(){s.value=!0,L!==null&&clearTimeout(L),L=setTimeout(()=>{L=null,s.value=!1},e.delay),e.onScroll!==void 0&&ae()}function We(Be,Ke){X.value[Rx[Ke].scroll]=Be}let Qe=null;function ze(){Qe!==null&&clearTimeout(Qe),Qe=setTimeout(()=>{Qe=null,d.value=!0},M.$q.platform.is.ios?50:0)}function Ze(){Qe!==null&&(clearTimeout(Qe),Qe=null),d.value=!1}let Ue=null;Fi(()=>M.$q.lang.rtl,Be=>{X.value!==null&&Sx(X.value,Math.abs(n.horizontal.position.value)*(Be===!0?-1:1))}),W1(()=>{Ue={top:n.vertical.position.value,left:n.horizontal.position.value}}),Ty(()=>{if(Ue===null)return;const Be=X.value;Be!==null&&(Sx(Be,Ue.left),w7(Be,Ue.top))}),Xn(ae.cancel),Object.assign(M,{getScrollTarget:()=>X.value,getScroll:ie,getScrollPosition:()=>({top:n.vertical.position.value,left:n.horizontal.position.value}),getScrollPercentage:()=>({top:n.vertical.percentage.value,left:n.horizontal.percentage.value}),setScrollPosition:de,setScrollPercentage(Be,Ke,xt){de(Be,Ke*(n[Be].size.value-y[Be].value)*(Be==="horizontal"&&M.$q.lang.rtl===!0?-1:1),xt)}});const vt={scroll:n,thumbVertDir:[[im,Be=>{Ce(Be,"vertical")},void 0,{vertical:!0,...Q7}]],thumbHorizDir:[[im,Be=>{Ce(Be,"horizontal")},void 0,{horizontal:!0,...Q7}]],onVerticalMousedown(Be){Le(Be,"vertical")},onHorizontalMousedown(Be){Le(Be,"horizontal")}};return()=>tt("div",{class:J.value,onMouseenter:ze,onMouseleave:Ze},[tt("div",{ref:X,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[tt("div",{class:"q-scrollarea__content absolute",style:Z.value},_c(t.default,[tt(vm,{debounce:0,onResize:he})])),tt(gC,{axis:"both",onScroll:le})]),tt(vm,{debounce:0,onResize:fe}),tt(fq,{store:vt,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}}),Lx=lr({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const r=Ve(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>tt("div",{class:r.value},ln(t.default))}}),pq=lr({name:"QItem",props:{...Fs,...l6,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:r}){const{proxy:{$q:s}}=_r(),l=Ns(e,s),{hasLink:d,linkAttrs:y,linkClass:n,linkTag:M,navigateOnClick:P}=GT(),L=oi(null),V=oi(null),X=Ve(()=>e.clickable===!0||d.value===!0||e.tag==="label"),J=Ve(()=>e.disable!==!0&&X.value===!0),Z=Ve(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(l.value===!0?" q-item--dark":"")+(d.value===!0&&e.active===null?n.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(J.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),ie=Ve(()=>e.insetLevel===void 0?null:{["padding"+(s.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function ae(le){J.value===!0&&(V.value!==null&&(le.qKeyEvent!==!0&&document.activeElement===L.value?V.value.focus():document.activeElement===V.value&&L.value.focus()),P(le))}function de(le){if(J.value===!0&&tu(le,[13,32])===!0){Cn(le),le.qKeyEvent=!0;const he=new MouseEvent("click",le);he.qKeyEvent=!0,L.value.dispatchEvent(he)}r("keyup",le)}function fe(){const le=YU(t.default,[]);return J.value===!0&&le.unshift(tt("div",{class:"q-focus-helper",tabindex:-1,ref:V})),le}return()=>{const le={ref:L,class:Z.value,style:ie.value,role:"listitem",onClick:ae,onKeyup:de};return J.value===!0?(le.tabindex=e.tabindex||"0",Object.assign(le,y.value)):X.value===!0&&(le["aria-disabled"]="true"),tt(M.value,le,fe())}}}),tS=lr({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const r=Ve(()=>parseInt(e.lines,10)),s=Ve(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(r.value===1?" ellipsis":"")),l=Ve(()=>e.lines!==void 0&&r.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":r.value}:null);return()=>tt("div",{style:l.value,class:s.value},ln(t.default))}}),mq=lr({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:r}){let s=!1,l,d,y=null,n=null,M,P;function L(){l&&l(),l=null,s=!1,y!==null&&(clearTimeout(y),y=null),n!==null&&(clearTimeout(n),n=null),d!==void 0&&d.removeEventListener("transitionend",M),M=null}function V(ie,ae,de){ae!==void 0&&(ie.style.height=`${ae}px`),ie.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,s=!0,l=de}function X(ie,ae){ie.style.overflowY=null,ie.style.height=null,ie.style.transition=null,L(),ae!==P&&r(ae)}function J(ie,ae){let de=0;d=ie,s===!0?(L(),de=ie.offsetHeight===ie.scrollHeight?0:void 0):(P="hide",ie.style.overflowY="hidden"),V(ie,de,ae),y=setTimeout(()=>{y=null,ie.style.height=`${ie.scrollHeight}px`,M=fe=>{n=null,(Object(fe)!==fe||fe.target===ie)&&X(ie,"show")},ie.addEventListener("transitionend",M),n=setTimeout(M,e.duration*1.1)},100)}function Z(ie,ae){let de;d=ie,s===!0?L():(P="show",ie.style.overflowY="hidden",de=ie.scrollHeight),V(ie,de,ae),y=setTimeout(()=>{y=null,ie.style.height=0,M=fe=>{n=null,(Object(fe)!==fe||fe.target===ie)&&X(ie,"hide")},ie.addEventListener("transitionend",M),n=setTimeout(M,e.duration*1.1)},100)}return Xn(()=>{s===!0&&L()}),()=>tt(Ul,{css:!1,appear:e.appear,onEnter:J,onLeave:Z},t.default)}}),ud=sk({}),gq=Object.keys(l6),koe=lr({name:"QExpansionItem",props:{...l6,...Zm,...Fs,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Xm,"click","afterShow","afterHide"],setup(e,{slots:t,emit:r}){const{proxy:{$q:s}}=_r(),l=Ns(e,s),d=oi(e.modelValue!==null?e.modelValue:e.defaultOpened),y=oi(null),n=u6(),{show:M,hide:P,toggle:L}=Ym({showing:d});let V,X;const J=Ve(()=>`q-expansion-item q-item-type q-expansion-item--${d.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),Z=Ve(()=>e.contentInsetLevel===void 0?null:{["padding"+(s.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),ie=Ve(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),ae=Ve(()=>{const yt={};return gq.forEach(Dt=>{yt[Dt]=e[Dt]}),yt}),de=Ve(()=>ie.value===!0||e.expandIconToggle!==!0),fe=Ve(()=>e.expandedIcon!==void 0&&d.value===!0?e.expandedIcon:e.expandIcon||s.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),le=Ve(()=>e.disable!==!0&&(ie.value===!0||e.expandIconToggle===!0)),he=Ve(()=>({expanded:d.value===!0,detailsId:n.value,toggle:L,show:M,hide:P})),Ce=Ve(()=>{const yt=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:s.lang.label[d.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":d.value===!0?"true":"false","aria-controls":n.value,"aria-label":yt}});Fi(()=>e.group,yt=>{X!==void 0&&X(),yt!==void 0&&Ze()});function Le(yt){ie.value!==!0&&L(yt),r("click",yt)}function Ae(yt){yt.keyCode===13&&We(yt,!0)}function We(yt,Dt){Dt!==!0&&y.value!==null&&y.value.focus(),L(yt),Cn(yt)}function Qe(){r("afterShow")}function ze(){r("afterHide")}function Ze(){V===void 0&&(V=H2()),d.value===!0&&(ud[e.group]=V);const yt=Fi(d,bt=>{bt===!0?ud[e.group]=V:ud[e.group]===V&&delete ud[e.group]}),Dt=Fi(()=>ud[e.group],(bt,bi)=>{bi===V&&bt!==void 0&&bt!==V&&P()});X=()=>{yt(),Dt(),ud[e.group]===V&&delete ud[e.group],X=void 0}}function Ue(){const yt={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},Dt=[tt(Io,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&d.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:fe.value})];return le.value===!0&&(Object.assign(yt,{tabindex:0,...Ce.value,onClick:We,onKeyup:Ae}),Dt.unshift(tt("div",{ref:y,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),tt(Lx,yt,()=>Dt)}function vt(){let yt;return t.header!==void 0?yt=[].concat(t.header(he.value)):(yt=[tt(Lx,()=>[tt(tS,{lines:e.labelLines},()=>e.label||""),e.caption?tt(tS,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&yt[e.switchToggleSide===!0?"push":"unshift"](tt(Lx,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>tt(Io,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&yt[e.switchToggleSide===!0?"unshift":"push"](Ue()),yt}function Be(){const yt={ref:"item",style:e.headerStyle,class:e.headerClass,dark:l.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return de.value===!0&&(yt.clickable=!0,yt.onClick=Le,Object.assign(yt,ie.value===!0?ae.value:Ce.value)),tt(pq,yt,vt)}function Ke(){return Dd(tt("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:Z.value,id:n.value},ln(t.default)),[[ak,d.value]])}function xt(){const yt=[Be(),tt(mq,{duration:e.duration,onShow:Qe,onHide:ze},Ke)];return e.expandSeparator===!0&&yt.push(tt(q2,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:l.value}),tt(q2,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:l.value})),yt}return e.group!==void 0&&Ze(),Xn(()=>{X!==void 0&&X()}),()=>tt("div",{class:J.value},[tt("div",{class:"q-expansion-item__container relative-position"},xt())])}}),_q={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function yq(){const{props:e,proxy:{$q:t}}=_r(),r=eu(Fm,jo);if(r===jo)return jo;const s=Ve(()=>{const V=e.position;return{top:V.indexOf("top")!==-1,right:V.indexOf("right")!==-1,bottom:V.indexOf("bottom")!==-1,left:V.indexOf("left")!==-1,vertical:V==="top"||V==="bottom",horizontal:V==="left"||V==="right"}}),l=Ve(()=>r.header.offset),d=Ve(()=>r.right.offset),y=Ve(()=>r.footer.offset),n=Ve(()=>r.left.offset),M=Ve(()=>{let V=0,X=0;const J=s.value,Z=t.lang.rtl===!0?-1:1;J.top===!0&&l.value!==0?X=`${l.value}px`:J.bottom===!0&&y.value!==0&&(X=`${-y.value}px`),J.left===!0&&n.value!==0?V=`${Z*n.value}px`:J.right===!0&&d.value!==0&&(V=`${-Z*d.value}px`);const ie={transform:`translate(${V}, ${X})`};return e.offset&&(ie.margin=`${e.offset[1]}px ${e.offset[0]}px`),J.vertical===!0?(n.value!==0&&(ie[t.lang.rtl===!0?"right":"left"]=`${n.value}px`),d.value!==0&&(ie[t.lang.rtl===!0?"left":"right"]=`${d.value}px`)):J.horizontal===!0&&(l.value!==0&&(ie.top=`${l.value}px`),y.value!==0&&(ie.bottom=`${y.value}px`)),ie}),P=Ve(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function L(V){const X=ln(V.default);return tt("div",{class:P.value,style:M.value},e.expand===!0?X:[tt("div",X)])}return{$layout:r,getStickyContent:L}}const Roe=lr({name:"QPageSticky",props:_q,setup(e,{slots:t}){const{getStickyContent:r}=yq();return()=>r(t)}}),Loe=lr({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:r}}=_r(),s=eu(Fm,jo);if(s===jo||eu(tE,jo)===jo)return jo;const d=Ve(()=>{const n=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof e.styleFn=="function"){const M=s.isContainer.value===!0?s.containerHeight.value:r.screen.height;return e.styleFn(n,M)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-n+"px":r.screen.height===0?n!==0?`calc(100vh - ${n}px)`:"100vh":r.screen.height-n+"px"}}),y=Ve(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>tt("main",{class:y.value,style:d.value},ln(t.default))}});function vq(e){return a4(e)===!0?"__q_date|"+e.getTime():Rk(e)===!0?"__q_expr|"+e.source:typeof e=="number"?"__q_numb|"+e:typeof e=="boolean"?"__q_bool|"+(e?"1":"0"):typeof e=="string"?"__q_strn|"+e:typeof e=="function"?"__q_strn|"+e.toString():e===Object(e)?"__q_objt|"+JSON.stringify(e):e}function xq(e){if(e.length<9)return e;const r=e.substring(0,8),s=e.substring(9);switch(r){case"__q_date":const l=Number(s);return new Date(Number.isNaN(l)===!0?s:l);case"__q_expr":return new RegExp(s);case"__q_numb":return Number(s);case"__q_bool":return s==="1";case"__q_strn":return""+s;case"__q_objt":return JSON.parse(s);default:return e}}function bq(){const e=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:e,getIndex:e,getKey:e,getAll:()=>{},getAllKeys:()=>[],set:ia,setItem:ia,remove:ia,removeItem:ia,clear:ia,isEmpty:()=>!0}}function wq(e){const t=window[e+"Storage"],r=y=>{const n=t.getItem(y);return n?xq(n):null},s=y=>t.getItem(y)!==null,l=(y,n)=>{t.setItem(y,vq(n))},d=y=>{t.removeItem(y)};return{has:s,hasItem:s,getLength:()=>t.length,getItem:r,getIndex:y=>y<t.length?r(t.key(y)):null,getKey:y=>y<t.length?t.key(y):null,getAll:()=>{let y;const n={},M=t.length;for(let P=0;P<M;P++)y=t.key(P),n[y]=r(y);return n},getAllKeys:()=>{const y=[],n=t.length;for(let M=0;M<n;M++)y.push(t.key(M));return y},set:l,setItem:l,remove:d,removeItem:d,clear:()=>{t.clear()},isEmpty:()=>t.length===0}}const yC=nn.has.webStorage===!1?bq():wq("session"),Sq={install({$q:e}){e.sessionStorage=yC}};Object.assign(Sq,yC);const Mq=e=>{const t=typeof e;return t!=="function"&&t!=="object"||e===null},Eq=e=>{const t=e.flags===""?void 0:e.flags;return new RegExp(e.source,t)},Z_=(e,t=new WeakMap)=>{if(e===null||Mq(e))return e;if(t.has(e))return t.get(e);if(e instanceof RegExp)return Eq(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof Function)return e;if(e instanceof Map){const s=new Map;return t.set(e,s),e.forEach((l,d)=>{s.set(d,Z_(l,t))}),s}if(e instanceof Set){const s=new Set;t.set(e,s);for(const l of e)s.add(Z_(l,t));return s}if(Array.isArray(e)){const s=[];return t.set(e,s),e.forEach(l=>{s.push(Z_(l,t))}),s}const r={};t.set(e,r);for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Z_(e[s],t));return r},Ooe=(e,t=200)=>{let r=0;return(...s)=>new Promise(l=>{r&&(clearTimeout(r),l("cancel")),r=window.setTimeout(()=>{e.apply(void 0,s),r=0,l("done")},t)})},Boe=()=>`${Date.now().toString(36)}${Math.random().toString(36).substring(2)}`,iS=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),Tq=(e,t,r={})=>{const{excludeKeys:s}=r;for(const l in t)s&&s(l)?e[l]=t[l]:iS(t[l])&&iS(e[l])?e[l]=Tq(e[l],t[l],r):e[l]=t[l];return e};/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */var pd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},X_=function(t){return t.tagName==="IMG"},Cq=function(t){return NodeList.prototype.isPrototypeOf(t)},S2=function(t){return t&&t.nodeType===1},rS=function(t){var r=t.currentSrc||t.src;return r.substr(-4).toLowerCase()===".svg"},nS=function(t){try{return Array.isArray(t)?t.filter(X_):Cq(t)?[].slice.call(t).filter(X_):S2(t)?[t].filter(X_):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(X_):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},Aq=function(t){var r=document.createElement("div");return r.classList.add("medium-zoom-overlay"),r.style.background=t,r},Iq=function(t){var r=t.getBoundingClientRect(),s=r.top,l=r.left,d=r.width,y=r.height,n=t.cloneNode(),M=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,P=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return n.removeAttribute("id"),n.style.position="absolute",n.style.top=s+M+"px",n.style.left=l+P+"px",n.style.width=d+"px",n.style.height=y+"px",n.style.transform="",n},Zf=function(t,r){var s=pd({bubbles:!1,cancelable:!1,detail:void 0},r);if(typeof window.CustomEvent=="function")return new CustomEvent(t,s);var l=document.createEvent("CustomEvent");return l.initCustomEvent(t,s.bubbles,s.cancelable,s.detail),l},Foe=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=window.Promise||function(Ue){function vt(){}Ue(vt,vt)},l=function(Ue){var vt=Ue.target;if(vt===Qe){Z();return}le.indexOf(vt)!==-1&&ie({target:vt})},d=function(){if(!(Ce||!We.original)){var Ue=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(Le-Ue)>Ae.scrollOffset&&setTimeout(Z,150)}},y=function(Ue){var vt=Ue.key||Ue.keyCode;(vt==="Escape"||vt==="Esc"||vt===27)&&Z()},n=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},vt=Ue;if(Ue.background&&(Qe.style.background=Ue.background),Ue.container&&Ue.container instanceof Object&&(vt.container=pd({},Ae.container,Ue.container)),Ue.template){var Be=S2(Ue.template)?Ue.template:document.querySelector(Ue.template);vt.template=Be}return Ae=pd({},Ae,vt),le.forEach(function(Ke){Ke.dispatchEvent(Zf("medium-zoom:update",{detail:{zoom:ze}}))}),ze},M=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(pd({},Ae,Ue))},P=function(){for(var Ue=arguments.length,vt=Array(Ue),Be=0;Be<Ue;Be++)vt[Be]=arguments[Be];var Ke=vt.reduce(function(xt,yt){return[].concat(xt,nS(yt))},[]);return Ke.filter(function(xt){return le.indexOf(xt)===-1}).forEach(function(xt){le.push(xt),xt.classList.add("medium-zoom-image")}),he.forEach(function(xt){var yt=xt.type,Dt=xt.listener,bt=xt.options;Ke.forEach(function(bi){bi.addEventListener(yt,Dt,bt)})}),ze},L=function(){for(var Ue=arguments.length,vt=Array(Ue),Be=0;Be<Ue;Be++)vt[Be]=arguments[Be];We.zoomed&&Z();var Ke=vt.length>0?vt.reduce(function(xt,yt){return[].concat(xt,nS(yt))},[]):le;return Ke.forEach(function(xt){xt.classList.remove("medium-zoom-image"),xt.dispatchEvent(Zf("medium-zoom:detach",{detail:{zoom:ze}}))}),le=le.filter(function(xt){return Ke.indexOf(xt)===-1}),ze},V=function(Ue,vt){var Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return le.forEach(function(Ke){Ke.addEventListener("medium-zoom:"+Ue,vt,Be)}),he.push({type:"medium-zoom:"+Ue,listener:vt,options:Be}),ze},X=function(Ue,vt){var Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return le.forEach(function(Ke){Ke.removeEventListener("medium-zoom:"+Ue,vt,Be)}),he=he.filter(function(Ke){return!(Ke.type==="medium-zoom:"+Ue&&Ke.listener.toString()===vt.toString())}),ze},J=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},vt=Ue.target,Be=function(){var xt={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},yt=void 0,Dt=void 0;if(Ae.container)if(Ae.container instanceof Object)xt=pd({},xt,Ae.container),yt=xt.width-xt.left-xt.right-Ae.margin*2,Dt=xt.height-xt.top-xt.bottom-Ae.margin*2;else{var bt=S2(Ae.container)?Ae.container:document.querySelector(Ae.container),bi=bt.getBoundingClientRect(),ji=bi.width,Qt=bi.height,Nt=bi.left,Sr=bi.top;xt=pd({},xt,{width:ji,height:Qt,left:Nt,top:Sr})}yt=yt||xt.width-Ae.margin*2,Dt=Dt||xt.height-Ae.margin*2;var Ui=We.zoomedHd||We.original,ci=rS(Ui)?yt:Ui.naturalWidth||yt,ur=rS(Ui)?Dt:Ui.naturalHeight||Dt,cn=Ui.getBoundingClientRect(),Di=cn.top,Te=cn.left,On=cn.width,Bn=cn.height,En=Math.min(Math.max(On,ci),yt)/On,Pt=Math.min(Math.max(Bn,ur),Dt)/Bn,Jn=Math.min(En,Pt),Xi=(-Te+(yt-On)/2+Ae.margin+xt.left)/Jn,lo=(-Di+(Dt-Bn)/2+Ae.margin+xt.top)/Jn,Oi="scale("+Jn+") translate3d("+Xi+"px, "+lo+"px, 0)";We.zoomed.style.transform=Oi,We.zoomedHd&&(We.zoomedHd.style.transform=Oi)};return new s(function(Ke){if(vt&&le.indexOf(vt)===-1){Ke(ze);return}var xt=function ji(){Ce=!1,We.zoomed.removeEventListener("transitionend",ji),We.original.dispatchEvent(Zf("medium-zoom:opened",{detail:{zoom:ze}})),Ke(ze)};if(We.zoomed){Ke(ze);return}if(vt)We.original=vt;else if(le.length>0){var yt=le;We.original=yt[0]}else{Ke(ze);return}if(We.original.dispatchEvent(Zf("medium-zoom:open",{detail:{zoom:ze}})),Le=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Ce=!0,We.zoomed=Iq(We.original),document.body.appendChild(Qe),Ae.template){var Dt=S2(Ae.template)?Ae.template:document.querySelector(Ae.template);We.template=document.createElement("div"),We.template.appendChild(Dt.content.cloneNode(!0)),document.body.appendChild(We.template)}if(We.original.parentElement&&We.original.parentElement.tagName==="PICTURE"&&We.original.currentSrc&&(We.zoomed.src=We.original.currentSrc),document.body.appendChild(We.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),We.original.classList.add("medium-zoom-image--hidden"),We.zoomed.classList.add("medium-zoom-image--opened"),We.zoomed.addEventListener("click",Z),We.zoomed.addEventListener("transitionend",xt),We.original.getAttribute("data-zoom-src")){We.zoomedHd=We.zoomed.cloneNode(),We.zoomedHd.removeAttribute("srcset"),We.zoomedHd.removeAttribute("sizes"),We.zoomedHd.removeAttribute("loading"),We.zoomedHd.src=We.zoomed.getAttribute("data-zoom-src"),We.zoomedHd.onerror=function(){clearInterval(bt),We.zoomedHd=null,Be()};var bt=setInterval(function(){We.zoomedHd.complete&&(clearInterval(bt),We.zoomedHd.classList.add("medium-zoom-image--opened"),We.zoomedHd.addEventListener("click",Z),document.body.appendChild(We.zoomedHd),Be())},10)}else if(We.original.hasAttribute("srcset")){We.zoomedHd=We.zoomed.cloneNode(),We.zoomedHd.removeAttribute("sizes"),We.zoomedHd.removeAttribute("loading");var bi=We.zoomedHd.addEventListener("load",function(){We.zoomedHd.removeEventListener("load",bi),We.zoomedHd.classList.add("medium-zoom-image--opened"),We.zoomedHd.addEventListener("click",Z),document.body.appendChild(We.zoomedHd),Be()})}else Be()})},Z=function(){return new s(function(Ue){if(Ce||!We.original){Ue(ze);return}var vt=function Be(){We.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(We.zoomed),We.zoomedHd&&document.body.removeChild(We.zoomedHd),document.body.removeChild(Qe),We.zoomed.classList.remove("medium-zoom-image--opened"),We.template&&document.body.removeChild(We.template),Ce=!1,We.zoomed.removeEventListener("transitionend",Be),We.original.dispatchEvent(Zf("medium-zoom:closed",{detail:{zoom:ze}})),We.original=null,We.zoomed=null,We.zoomedHd=null,We.template=null,Ue(ze)};Ce=!0,document.body.classList.remove("medium-zoom--opened"),We.zoomed.style.transform="",We.zoomedHd&&(We.zoomedHd.style.transform=""),We.template&&(We.template.style.transition="opacity 150ms",We.template.style.opacity=0),We.original.dispatchEvent(Zf("medium-zoom:close",{detail:{zoom:ze}})),We.zoomed.addEventListener("transitionend",vt)})},ie=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},vt=Ue.target;return We.original?Z():J({target:vt})},ae=function(){return Ae},de=function(){return le},fe=function(){return We.original},le=[],he=[],Ce=!1,Le=0,Ae=r,We={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?Ae=t:(t||typeof t=="string")&&P(t),Ae=pd({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},Ae);var Qe=Aq(Ae.background);document.addEventListener("click",l),document.addEventListener("keyup",y),document.addEventListener("scroll",d),window.addEventListener("resize",Z);var ze={open:J,close:Z,toggle:ie,update:n,clone:M,attach:P,detach:L,on:V,off:X,getOptions:ae,getImages:de,getZoomedImage:fe};return ze};function zq(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",r==="top"&&s.firstChild?s.insertBefore(l,s.firstChild):s.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}var Dq=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";zq(Dq);var Pq=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],s=0;s<e.rangeCount;s++)r.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(l){e.addRange(l)}),t&&t.focus()}},kq=Pq,oS={"text/plain":"Text","text/html":"Url",default:"Text"},Rq="Copy to clipboard: #{key}, Enter";function Lq(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function Oq(e,t){var r,s,l,d,y,n,M=!1;t||(t={}),r=t.debug||!1;try{l=kq(),d=document.createRange(),y=document.getSelection(),n=document.createElement("span"),n.textContent=e,n.ariaHidden="true",n.style.all="unset",n.style.position="fixed",n.style.top=0,n.style.clip="rect(0, 0, 0, 0)",n.style.whiteSpace="pre",n.style.webkitUserSelect="text",n.style.MozUserSelect="text",n.style.msUserSelect="text",n.style.userSelect="text",n.addEventListener("copy",function(L){if(L.stopPropagation(),t.format)if(L.preventDefault(),typeof L.clipboardData>"u"){window.clipboardData.clearData();var V=oS[t.format]||oS.default;window.clipboardData.setData(V,e)}else L.clipboardData.clearData(),L.clipboardData.setData(t.format,e);t.onCopy&&(L.preventDefault(),t.onCopy(L.clipboardData))}),document.body.appendChild(n),d.selectNodeContents(n),y.addRange(d);var P=document.execCommand("copy");if(!P)throw new Error("copy command was unsuccessful");M=!0}catch{try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),M=!0}catch{s=Lq("message"in t?t.message:Rq),window.prompt(s,e)}}finally{y&&(typeof y.removeRange=="function"?y.removeRange(d):y.removeAllRanges()),n&&document.body.removeChild(n),l()}return M}var Bq=Oq;const Noe=Nm(Bq),sS={};function Fq(e){let t=sS[e];if(t)return t;t=sS[e]=[];for(let r=0;r<128;r++){const s=String.fromCharCode(r);t.push(s)}for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);t[s]="%"+("0"+s.toString(16).toUpperCase()).slice(-2)}return t}function D1(e,t){typeof t!="string"&&(t=D1.defaultChars);const r=Fq(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(s){let l="";for(let d=0,y=s.length;d<y;d+=3){const n=parseInt(s.slice(d+1,d+3),16);if(n<128){l+=r[n];continue}if((n&224)===192&&d+3<y){const M=parseInt(s.slice(d+4,d+6),16);if((M&192)===128){const P=n<<6&1984|M&63;P<128?l+="":l+=String.fromCharCode(P),d+=3;continue}}if((n&240)===224&&d+6<y){const M=parseInt(s.slice(d+4,d+6),16),P=parseInt(s.slice(d+7,d+9),16);if((M&192)===128&&(P&192)===128){const L=n<<12&61440|M<<6&4032|P&63;L<2048||L>=55296&&L<=57343?l+="":l+=String.fromCharCode(L),d+=6;continue}}if((n&248)===240&&d+9<y){const M=parseInt(s.slice(d+4,d+6),16),P=parseInt(s.slice(d+7,d+9),16),L=parseInt(s.slice(d+10,d+12),16);if((M&192)===128&&(P&192)===128&&(L&192)===128){let V=n<<18&1835008|M<<12&258048|P<<6&4032|L&63;V<65536||V>1114111?l+="":(V-=65536,l+=String.fromCharCode(55296+(V>>10),56320+(V&1023))),d+=9;continue}}l+=""}return l})}D1.defaultChars=";/?:@&=+$,#";D1.componentChars="";const aS={};function Nq(e){let t=aS[e];if(t)return t;t=aS[e]=[];for(let r=0;r<128;r++){const s=String.fromCharCode(r);/^[0-9a-z]$/i.test(s)?t.push(s):t.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<e.length;r++)t[e.charCodeAt(r)]=e[r];return t}function Km(e,t,r){typeof t!="string"&&(r=t,t=Km.defaultChars),typeof r>"u"&&(r=!0);const s=Nq(t);let l="";for(let d=0,y=e.length;d<y;d++){const n=e.charCodeAt(d);if(r&&n===37&&d+2<y&&/^[0-9a-f]{2}$/i.test(e.slice(d+1,d+3))){l+=e.slice(d,d+3),d+=2;continue}if(n<128){l+=s[n];continue}if(n>=55296&&n<=57343){if(n>=55296&&n<=56319&&d+1<y){const M=e.charCodeAt(d+1);if(M>=56320&&M<=57343){l+=encodeURIComponent(e[d]+e[d+1]),d++;continue}}l+="%EF%BF%BD";continue}l+=encodeURIComponent(e[d])}return l}Km.defaultChars=";/?:@&=+$,-_.!~*'()#";Km.componentChars="-_.!~*'()";function f6(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function X2(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const $q=/^([a-z0-9.+-]+:)/i,jq=/:[0-9]*$/,Uq=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Vq=["<",">",'"',"`"," ","\r",`
`,"	"],qq=["{","}","|","\\","^","`"].concat(Vq),Hq=["'"].concat(qq),lS=["%","/","?",";","#"].concat(Hq),cS=["/","?","#"],Gq=255,uS=/^[+a-z0-9A-Z_-]{0,63}$/,Wq=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hS={javascript:!0,"javascript:":!0},dS={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function p6(e,t){if(e&&e instanceof X2)return e;const r=new X2;return r.parse(e,t),r}X2.prototype.parse=function(e,t){let r,s,l,d=e;if(d=d.trim(),!t&&e.split("#").length===1){const P=Uq.exec(d);if(P)return this.pathname=P[1],P[2]&&(this.search=P[2]),this}let y=$q.exec(d);if(y&&(y=y[0],r=y.toLowerCase(),this.protocol=y,d=d.substr(y.length)),(t||y||d.match(/^\/\/[^@\/]+@[^@\/]+/))&&(l=d.substr(0,2)==="//",l&&!(y&&hS[y])&&(d=d.substr(2),this.slashes=!0)),!hS[y]&&(l||y&&!dS[y])){let P=-1;for(let Z=0;Z<cS.length;Z++)s=d.indexOf(cS[Z]),s!==-1&&(P===-1||s<P)&&(P=s);let L,V;P===-1?V=d.lastIndexOf("@"):V=d.lastIndexOf("@",P),V!==-1&&(L=d.slice(0,V),d=d.slice(V+1),this.auth=L),P=-1;for(let Z=0;Z<lS.length;Z++)s=d.indexOf(lS[Z]),s!==-1&&(P===-1||s<P)&&(P=s);P===-1&&(P=d.length),d[P-1]===":"&&P--;const X=d.slice(0,P);d=d.slice(P),this.parseHost(X),this.hostname=this.hostname||"";const J=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!J){const Z=this.hostname.split(/\./);for(let ie=0,ae=Z.length;ie<ae;ie++){const de=Z[ie];if(de&&!de.match(uS)){let fe="";for(let le=0,he=de.length;le<he;le++)de.charCodeAt(le)>127?fe+="x":fe+=de[le];if(!fe.match(uS)){const le=Z.slice(0,ie),he=Z.slice(ie+1),Ce=de.match(Wq);Ce&&(le.push(Ce[1]),he.unshift(Ce[2])),he.length&&(d=he.join(".")+d),this.hostname=le.join(".");break}}}}this.hostname.length>Gq&&(this.hostname=""),J&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const n=d.indexOf("#");n!==-1&&(this.hash=d.substr(n),d=d.slice(0,n));const M=d.indexOf("?");return M!==-1&&(this.search=d.substr(M),d=d.slice(0,M)),d&&(this.pathname=d),dS[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};X2.prototype.parseHost=function(e){let t=jq.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Zq=Object.freeze(Object.defineProperty({__proto__:null,decode:D1,encode:Km,format:f6,parse:p6},Symbol.toStringTag,{value:"Module"})),vC=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,xC=/[\0-\x1F\x7F-\x9F]/,Xq=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,m6=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,bC=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,wC=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Yq=Object.freeze(Object.defineProperty({__proto__:null,Any:vC,Cc:xC,Cf:Xq,P:m6,S:bC,Z:wC},Symbol.toStringTag,{value:"Module"})),Jq=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Kq=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Ox;const Qq=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),eH=(Ox=String.fromCodePoint)!==null&&Ox!==void 0?Ox:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function tH(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Qq.get(e))!==null&&t!==void 0?t:e}var Uo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Uo||(Uo={}));const iH=32;var rh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(rh||(rh={}));function Ob(e){return e>=Uo.ZERO&&e<=Uo.NINE}function rH(e){return e>=Uo.UPPER_A&&e<=Uo.UPPER_F||e>=Uo.LOWER_A&&e<=Uo.LOWER_F}function nH(e){return e>=Uo.UPPER_A&&e<=Uo.UPPER_Z||e>=Uo.LOWER_A&&e<=Uo.LOWER_Z||Ob(e)}function oH(e){return e===Uo.EQUALS||nH(e)}var Fo;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Fo||(Fo={}));var eh;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(eh||(eh={}));class sH{constructor(t,r,s){this.decodeTree=t,this.emitCodePoint=r,this.errors=s,this.state=Fo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=eh.Strict}startEntity(t){this.decodeMode=t,this.state=Fo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case Fo.EntityStart:return t.charCodeAt(r)===Uo.NUM?(this.state=Fo.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=Fo.NamedEntity,this.stateNamedEntity(t,r));case Fo.NumericStart:return this.stateNumericStart(t,r);case Fo.NumericDecimal:return this.stateNumericDecimal(t,r);case Fo.NumericHex:return this.stateNumericHex(t,r);case Fo.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|iH)===Uo.LOWER_X?(this.state=Fo.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=Fo.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,s,l){if(r!==s){const d=s-r;this.result=this.result*Math.pow(l,d)+parseInt(t.substr(r,d),l),this.consumed+=d}}stateNumericHex(t,r){const s=r;for(;r<t.length;){const l=t.charCodeAt(r);if(Ob(l)||rH(l))r+=1;else return this.addToNumericResult(t,s,r,16),this.emitNumericEntity(l,3)}return this.addToNumericResult(t,s,r,16),-1}stateNumericDecimal(t,r){const s=r;for(;r<t.length;){const l=t.charCodeAt(r);if(Ob(l))r+=1;else return this.addToNumericResult(t,s,r,10),this.emitNumericEntity(l,2)}return this.addToNumericResult(t,s,r,10),-1}emitNumericEntity(t,r){var s;if(this.consumed<=r)return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Uo.SEMI)this.consumed+=1;else if(this.decodeMode===eh.Strict)return 0;return this.emitCodePoint(tH(this.result),this.consumed),this.errors&&(t!==Uo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:s}=this;let l=s[this.treeIndex],d=(l&rh.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const y=t.charCodeAt(r);if(this.treeIndex=aH(s,l,this.treeIndex+Math.max(1,d),y),this.treeIndex<0)return this.result===0||this.decodeMode===eh.Attribute&&(d===0||oH(y))?0:this.emitNotTerminatedNamedEntity();if(l=s[this.treeIndex],d=(l&rh.VALUE_LENGTH)>>14,d!==0){if(y===Uo.SEMI)return this.emitNamedEntityData(this.treeIndex,d,this.consumed+this.excess);this.decodeMode!==eh.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:s}=this,l=(s[r]&rh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,l,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,s){const{decodeTree:l}=this;return this.emitCodePoint(r===1?l[t]&~rh.VALUE_LENGTH:l[t+1],s),r===3&&this.emitCodePoint(l[t+2],s),s}end(){var t;switch(this.state){case Fo.NamedEntity:return this.result!==0&&(this.decodeMode!==eh.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Fo.NumericDecimal:return this.emitNumericEntity(0,2);case Fo.NumericHex:return this.emitNumericEntity(0,3);case Fo.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Fo.EntityStart:return 0}}}function SC(e){let t="";const r=new sH(e,s=>t+=eH(s));return function(l,d){let y=0,n=0;for(;(n=l.indexOf("&",n))>=0;){t+=l.slice(y,n),r.startEntity(d);const P=r.write(l,n+1);if(P<0){y=n+r.end();break}y=n+P,n=P===0?y+1:y}const M=t+l.slice(y);return t="",M}}function aH(e,t,r,s){const l=(t&rh.BRANCH_LENGTH)>>7,d=t&rh.JUMP_TABLE;if(l===0)return d!==0&&s===d?r:-1;if(d){const M=s-d;return M<0||M>=l?-1:e[r+M]-1}let y=r,n=y+l-1;for(;y<=n;){const M=y+n>>>1,P=e[M];if(P<s)y=M+1;else if(P>s)n=M-1;else return e[M+l]}return-1}const lH=SC(Jq);SC(Kq);function MC(e,t=eh.Legacy){return lH(e,t)}function cH(e){return Object.prototype.toString.call(e)}function g6(e){return cH(e)==="[object String]"}const uH=Object.prototype.hasOwnProperty;function hH(e,t){return uH.call(e,t)}function Qy(e){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(s){e[s]=r[s]})}}),e}function EC(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))}function _6(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Y2(e){if(e>65535){e-=65536;const t=55296+(e>>10),r=56320+(e&1023);return String.fromCharCode(t,r)}return String.fromCharCode(e)}const TC=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,dH=/&([a-z#][a-z0-9]{1,31});/gi,fH=new RegExp(TC.source+"|"+dH.source,"gi"),pH=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function mH(e,t){if(t.charCodeAt(0)===35&&pH.test(t)){const s=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return _6(s)?Y2(s):e}const r=MC(e);return r!==e?r:e}function gH(e){return e.indexOf("\\")<0?e:e.replace(TC,"$1")}function P1(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(fH,function(t,r,s){return r||mH(t,s)})}const _H=/[&<>"]/,yH=/[&<>"]/g,vH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function xH(e){return vH[e]}function hh(e){return _H.test(e)?e.replace(yH,xH):e}const bH=/[.?*+^$[\]\\(){}|-]/g;function wH(e){return e.replace(bH,"\\$&")}function An(e){switch(e){case 9:case 32:return!0}return!1}function bm(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function wm(e){return m6.test(e)||bC.test(e)}function Sm(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function ev(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const SH={mdurl:Zq,ucmicro:Yq},MH=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:EC,assign:Qy,escapeHtml:hh,escapeRE:wH,fromCodePoint:Y2,has:hH,isMdAsciiPunct:Sm,isPunctChar:wm,isSpace:An,isString:g6,isValidEntityCode:_6,isWhiteSpace:bm,lib:SH,normalizeReference:ev,unescapeAll:P1,unescapeMd:gH},Symbol.toStringTag,{value:"Module"}));function EH(e,t,r){let s,l,d,y;const n=e.posMax,M=e.pos;for(e.pos=t+1,s=1;e.pos<n;){if(d=e.src.charCodeAt(e.pos),d===93&&(s--,s===0)){l=!0;break}if(y=e.pos,e.md.inline.skipToken(e),d===91){if(y===e.pos-1)s++;else if(r)return e.pos=M,-1}}let P=-1;return l&&(P=e.pos),e.pos=M,P}function TH(e,t,r){let s,l=t;const d={ok:!1,pos:0,str:""};if(e.charCodeAt(l)===60){for(l++;l<r;){if(s=e.charCodeAt(l),s===10||s===60)return d;if(s===62)return d.pos=l+1,d.str=P1(e.slice(t+1,l)),d.ok=!0,d;if(s===92&&l+1<r){l+=2;continue}l++}return d}let y=0;for(;l<r&&(s=e.charCodeAt(l),!(s===32||s<32||s===127));){if(s===92&&l+1<r){if(e.charCodeAt(l+1)===32)break;l+=2;continue}if(s===40&&(y++,y>32))return d;if(s===41){if(y===0)break;y--}l++}return t===l||y!==0||(d.str=P1(e.slice(t,l)),d.pos=l,d.ok=!0),d}function CH(e,t,r,s){let l,d=t;const y={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(s)y.str=s.str,y.marker=s.marker;else{if(d>=r)return y;let n=e.charCodeAt(d);if(n!==34&&n!==39&&n!==40)return y;t++,d++,n===40&&(n=41),y.marker=n}for(;d<r;){if(l=e.charCodeAt(d),l===y.marker)return y.pos=d+1,y.str+=P1(e.slice(t,d)),y.ok=!0,y;if(l===40&&y.marker===41)return y;l===92&&d+1<r&&d++,d++}return y.can_continue=!0,y.str+=P1(e.slice(t,d)),y}const AH=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:TH,parseLinkLabel:EH,parseLinkTitle:CH},Symbol.toStringTag,{value:"Module"})),Dc={};Dc.code_inline=function(e,t,r,s,l){const d=e[t];return"<code"+l.renderAttrs(d)+">"+hh(d.content)+"</code>"};Dc.code_block=function(e,t,r,s,l){const d=e[t];return"<pre"+l.renderAttrs(d)+"><code>"+hh(e[t].content)+`</code></pre>
`};Dc.fence=function(e,t,r,s,l){const d=e[t],y=d.info?P1(d.info).trim():"";let n="",M="";if(y){const L=y.split(/(\s+)/g);n=L[0],M=L.slice(2).join("")}let P;if(r.highlight?P=r.highlight(d.content,n,M)||hh(d.content):P=hh(d.content),P.indexOf("<pre")===0)return P+`
`;if(y){const L=d.attrIndex("class"),V=d.attrs?d.attrs.slice():[];L<0?V.push(["class",r.langPrefix+n]):(V[L]=V[L].slice(),V[L][1]+=" "+r.langPrefix+n);const X={attrs:V};return`<pre><code${l.renderAttrs(X)}>${P}</code></pre>
`}return`<pre><code${l.renderAttrs(d)}>${P}</code></pre>
`};Dc.image=function(e,t,r,s,l){const d=e[t];return d.attrs[d.attrIndex("alt")][1]=l.renderInlineAsText(d.children,r,s),l.renderToken(e,t,r)};Dc.hardbreak=function(e,t,r){return r.xhtmlOut?`<br />
`:`<br>
`};Dc.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Dc.text=function(e,t){return hh(e[t].content)};Dc.html_block=function(e,t){return e[t].content};Dc.html_inline=function(e,t){return e[t].content};function ep(){this.rules=Qy({},Dc)}ep.prototype.renderAttrs=function(t){let r,s,l;if(!t.attrs)return"";for(l="",r=0,s=t.attrs.length;r<s;r++)l+=" "+hh(t.attrs[r][0])+'="'+hh(t.attrs[r][1])+'"';return l};ep.prototype.renderToken=function(t,r,s){const l=t[r];let d="";if(l.hidden)return"";l.block&&l.nesting!==-1&&r&&t[r-1].hidden&&(d+=`
`),d+=(l.nesting===-1?"</":"<")+l.tag,d+=this.renderAttrs(l),l.nesting===0&&s.xhtmlOut&&(d+=" /");let y=!1;if(l.block&&(y=!0,l.nesting===1&&r+1<t.length)){const n=t[r+1];(n.type==="inline"||n.hidden||n.nesting===-1&&n.tag===l.tag)&&(y=!1)}return d+=y?`>
`:">",d};ep.prototype.renderInline=function(e,t,r){let s="";const l=this.rules;for(let d=0,y=e.length;d<y;d++){const n=e[d].type;typeof l[n]<"u"?s+=l[n](e,d,t,r,this):s+=this.renderToken(e,d,t)}return s};ep.prototype.renderInlineAsText=function(e,t,r){let s="";for(let l=0,d=e.length;l<d;l++)switch(e[l].type){case"text":s+=e[l].content;break;case"image":s+=this.renderInlineAsText(e[l].children,t,r);break;case"html_inline":case"html_block":s+=e[l].content;break;case"softbreak":case"hardbreak":s+=`
`;break}return s};ep.prototype.render=function(e,t,r){let s="";const l=this.rules;for(let d=0,y=e.length;d<y;d++){const n=e[d].type;n==="inline"?s+=this.renderInline(e[d].children,t,r):typeof l[n]<"u"?s+=l[n](e,d,t,r,this):s+=this.renderToken(e,d,t,r)}return s};function na(){this.__rules__=[],this.__cache__=null}na.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};na.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(s){t.indexOf(s)<0&&t.push(s)})}),e.__cache__={},t.forEach(function(r){e.__cache__[r]=[],e.__rules__.forEach(function(s){s.enabled&&(r&&s.alt.indexOf(r)<0||e.__cache__[r].push(s.fn))})})};na.prototype.at=function(e,t,r){const s=this.__find__(e),l=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__[s].fn=t,this.__rules__[s].alt=l.alt||[],this.__cache__=null};na.prototype.before=function(e,t,r,s){const l=this.__find__(e),d=s||{};if(l===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(l,0,{name:t,enabled:!0,fn:r,alt:d.alt||[]}),this.__cache__=null};na.prototype.after=function(e,t,r,s){const l=this.__find__(e),d=s||{};if(l===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(l+1,0,{name:t,enabled:!0,fn:r,alt:d.alt||[]}),this.__cache__=null};na.prototype.push=function(e,t,r){const s=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};na.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(s){const l=this.__find__(s);if(l<0){if(t)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[l].enabled=!0,r.push(s)},this),this.__cache__=null,r};na.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(e,t)};na.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(s){const l=this.__find__(s);if(l<0){if(t)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[l].enabled=!1,r.push(s)},this),this.__cache__=null,r};na.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Gl(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Gl.prototype.attrIndex=function(t){if(!this.attrs)return-1;const r=this.attrs;for(let s=0,l=r.length;s<l;s++)if(r[s][0]===t)return s;return-1};Gl.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Gl.prototype.attrSet=function(t,r){const s=this.attrIndex(t),l=[t,r];s<0?this.attrPush(l):this.attrs[s]=l};Gl.prototype.attrGet=function(t){const r=this.attrIndex(t);let s=null;return r>=0&&(s=this.attrs[r][1]),s};Gl.prototype.attrJoin=function(t,r){const s=this.attrIndex(t);s<0?this.attrPush([t,r]):this.attrs[s][1]=this.attrs[s][1]+" "+r};function CC(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}CC.prototype.Token=Gl;const IH=/\r\n?|\n/g,zH=/\0/g;function DH(e){let t;t=e.src.replace(IH,`
`),t=t.replace(zH,""),e.src=t}function PH(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function kH(e){const t=e.tokens;for(let r=0,s=t.length;r<s;r++){const l=t[r];l.type==="inline"&&e.md.inline.parse(l.content,e.md,e.env,l.children)}}function RH(e){return/^<a[>\s]/i.test(e)}function LH(e){return/^<\/a\s*>/i.test(e)}function OH(e){const t=e.tokens;if(e.md.options.linkify)for(let r=0,s=t.length;r<s;r++){if(t[r].type!=="inline"||!e.md.linkify.pretest(t[r].content))continue;let l=t[r].children,d=0;for(let y=l.length-1;y>=0;y--){const n=l[y];if(n.type==="link_close"){for(y--;l[y].level!==n.level&&l[y].type!=="link_open";)y--;continue}if(n.type==="html_inline"&&(RH(n.content)&&d>0&&d--,LH(n.content)&&d++),!(d>0)&&n.type==="text"&&e.md.linkify.test(n.content)){const M=n.content;let P=e.md.linkify.match(M);const L=[];let V=n.level,X=0;P.length>0&&P[0].index===0&&y>0&&l[y-1].type==="text_special"&&(P=P.slice(1));for(let J=0;J<P.length;J++){const Z=P[J].url,ie=e.md.normalizeLink(Z);if(!e.md.validateLink(ie))continue;let ae=P[J].text;P[J].schema?P[J].schema==="mailto:"&&!/^mailto:/i.test(ae)?ae=e.md.normalizeLinkText("mailto:"+ae).replace(/^mailto:/,""):ae=e.md.normalizeLinkText(ae):ae=e.md.normalizeLinkText("http://"+ae).replace(/^http:\/\//,"");const de=P[J].index;if(de>X){const Ce=new e.Token("text","",0);Ce.content=M.slice(X,de),Ce.level=V,L.push(Ce)}const fe=new e.Token("link_open","a",1);fe.attrs=[["href",ie]],fe.level=V++,fe.markup="linkify",fe.info="auto",L.push(fe);const le=new e.Token("text","",0);le.content=ae,le.level=V,L.push(le);const he=new e.Token("link_close","a",-1);he.level=--V,he.markup="linkify",he.info="auto",L.push(he),X=P[J].lastIndex}if(X<M.length){const J=new e.Token("text","",0);J.content=M.slice(X),J.level=V,L.push(J)}t[r].children=l=EC(l,y,L)}}}}const AC=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,BH=/\((c|tm|r)\)/i,FH=/\((c|tm|r)\)/ig,NH={c:"",r:"",tm:""};function $H(e,t){return NH[t.toLowerCase()]}function jH(e){let t=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s.type==="text"&&!t&&(s.content=s.content.replace(FH,$H)),s.type==="link_open"&&s.info==="auto"&&t--,s.type==="link_close"&&s.info==="auto"&&t++}}function UH(e){let t=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s.type==="text"&&!t&&AC.test(s.content)&&(s.content=s.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),s.type==="link_open"&&s.info==="auto"&&t--,s.type==="link_close"&&s.info==="auto"&&t++}}function VH(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(BH.test(e.tokens[t].content)&&jH(e.tokens[t].children),AC.test(e.tokens[t].content)&&UH(e.tokens[t].children))}const qH=/['"]/,fS=/['"]/g,pS="";function Y_(e,t,r){return e.slice(0,t)+r+e.slice(t+1)}function HH(e,t){let r;const s=[];for(let l=0;l<e.length;l++){const d=e[l],y=e[l].level;for(r=s.length-1;r>=0&&!(s[r].level<=y);r--);if(s.length=r+1,d.type!=="text")continue;let n=d.content,M=0,P=n.length;e:for(;M<P;){fS.lastIndex=M;const L=fS.exec(n);if(!L)break;let V=!0,X=!0;M=L.index+1;const J=L[0]==="'";let Z=32;if(L.index-1>=0)Z=n.charCodeAt(L.index-1);else for(r=l-1;r>=0&&!(e[r].type==="softbreak"||e[r].type==="hardbreak");r--)if(e[r].content){Z=e[r].content.charCodeAt(e[r].content.length-1);break}let ie=32;if(M<P)ie=n.charCodeAt(M);else for(r=l+1;r<e.length&&!(e[r].type==="softbreak"||e[r].type==="hardbreak");r++)if(e[r].content){ie=e[r].content.charCodeAt(0);break}const ae=Sm(Z)||wm(String.fromCharCode(Z)),de=Sm(ie)||wm(String.fromCharCode(ie)),fe=bm(Z),le=bm(ie);if(le?V=!1:de&&(fe||ae||(V=!1)),fe?X=!1:ae&&(le||de||(X=!1)),ie===34&&L[0]==='"'&&Z>=48&&Z<=57&&(X=V=!1),V&&X&&(V=ae,X=de),!V&&!X){J&&(d.content=Y_(d.content,L.index,pS));continue}if(X)for(r=s.length-1;r>=0;r--){let he=s[r];if(s[r].level<y)break;if(he.single===J&&s[r].level===y){he=s[r];let Ce,Le;J?(Ce=t.md.options.quotes[2],Le=t.md.options.quotes[3]):(Ce=t.md.options.quotes[0],Le=t.md.options.quotes[1]),d.content=Y_(d.content,L.index,Le),e[he.token].content=Y_(e[he.token].content,he.pos,Ce),M+=Le.length-1,he.token===l&&(M+=Ce.length-1),n=d.content,P=n.length,s.length=r;continue e}}V?s.push({token:l,pos:L.index,single:J,level:y}):X&&J&&(d.content=Y_(d.content,L.index,pS))}}}function GH(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!qH.test(e.tokens[t].content)||HH(e.tokens[t].children,e)}function WH(e){let t,r;const s=e.tokens,l=s.length;for(let d=0;d<l;d++){if(s[d].type!=="inline")continue;const y=s[d].children,n=y.length;for(t=0;t<n;t++)y[t].type==="text_special"&&(y[t].type="text");for(t=r=0;t<n;t++)y[t].type==="text"&&t+1<n&&y[t+1].type==="text"?y[t+1].content=y[t].content+y[t+1].content:(t!==r&&(y[r]=y[t]),r++);t!==r&&(y.length=r)}}const Bx=[["normalize",DH],["block",PH],["inline",kH],["linkify",OH],["replacements",VH],["smartquotes",GH],["text_join",WH]];function y6(){this.ruler=new na;for(let e=0;e<Bx.length;e++)this.ruler.push(Bx[e][0],Bx[e][1])}y6.prototype.process=function(e){const t=this.ruler.getRules("");for(let r=0,s=t.length;r<s;r++)t[r](e)};y6.prototype.State=CC;function Pc(e,t,r,s){this.src=e,this.md=t,this.env=r,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const l=this.src;for(let d=0,y=0,n=0,M=0,P=l.length,L=!1;y<P;y++){const V=l.charCodeAt(y);if(!L)if(An(V)){n++,V===9?M+=4-M%4:M++;continue}else L=!0;(V===10||y===P-1)&&(V!==10&&y++,this.bMarks.push(d),this.eMarks.push(y),this.tShift.push(n),this.sCount.push(M),this.bsCount.push(0),L=!1,n=0,M=0,d=y+1)}this.bMarks.push(l.length),this.eMarks.push(l.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Pc.prototype.push=function(e,t,r){const s=new Gl(e,t,r);return s.block=!0,r<0&&this.level--,s.level=this.level,r>0&&this.level++,this.tokens.push(s),s};Pc.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Pc.prototype.skipEmptyLines=function(t){for(let r=this.lineMax;t<r&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Pc.prototype.skipSpaces=function(t){for(let r=this.src.length;t<r;t++){const s=this.src.charCodeAt(t);if(!An(s))break}return t};Pc.prototype.skipSpacesBack=function(t,r){if(t<=r)return t;for(;t>r;)if(!An(this.src.charCodeAt(--t)))return t+1;return t};Pc.prototype.skipChars=function(t,r){for(let s=this.src.length;t<s&&this.src.charCodeAt(t)===r;t++);return t};Pc.prototype.skipCharsBack=function(t,r,s){if(t<=s)return t;for(;t>s;)if(r!==this.src.charCodeAt(--t))return t+1;return t};Pc.prototype.getLines=function(t,r,s,l){if(t>=r)return"";const d=new Array(r-t);for(let y=0,n=t;n<r;n++,y++){let M=0;const P=this.bMarks[n];let L=P,V;for(n+1<r||l?V=this.eMarks[n]+1:V=this.eMarks[n];L<V&&M<s;){const X=this.src.charCodeAt(L);if(An(X))X===9?M+=4-(M+this.bsCount[n])%4:M++;else if(L-P<this.tShift[n])M++;else break;L++}M>s?d[y]=new Array(M-s+1).join(" ")+this.src.slice(L,V):d[y]=this.src.slice(L,V)}return d.join("")};Pc.prototype.Token=Gl;const ZH=65536;function Fx(e,t){const r=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];return e.src.slice(r,s)}function mS(e){const t=[],r=e.length;let s=0,l=e.charCodeAt(s),d=!1,y=0,n="";for(;s<r;)l===124&&(d?(n+=e.substring(y,s-1),y=s):(t.push(n+e.substring(y,s)),n="",y=s+1)),d=l===92,s++,l=e.charCodeAt(s);return t.push(n+e.substring(y)),t}function XH(e,t,r,s){if(t+2>r)return!1;let l=t+1;if(e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)return!1;let d=e.bMarks[l]+e.tShift[l];if(d>=e.eMarks[l])return!1;const y=e.src.charCodeAt(d++);if(y!==124&&y!==45&&y!==58||d>=e.eMarks[l])return!1;const n=e.src.charCodeAt(d++);if(n!==124&&n!==45&&n!==58&&!An(n)||y===45&&An(n))return!1;for(;d<e.eMarks[l];){const he=e.src.charCodeAt(d);if(he!==124&&he!==45&&he!==58&&!An(he))return!1;d++}let M=Fx(e,t+1),P=M.split("|");const L=[];for(let he=0;he<P.length;he++){const Ce=P[he].trim();if(!Ce){if(he===0||he===P.length-1)continue;return!1}if(!/^:?-+:?$/.test(Ce))return!1;Ce.charCodeAt(Ce.length-1)===58?L.push(Ce.charCodeAt(0)===58?"center":"right"):Ce.charCodeAt(0)===58?L.push("left"):L.push("")}if(M=Fx(e,t).trim(),M.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;P=mS(M),P.length&&P[0]===""&&P.shift(),P.length&&P[P.length-1]===""&&P.pop();const V=P.length;if(V===0||V!==L.length)return!1;if(s)return!0;const X=e.parentType;e.parentType="table";const J=e.md.block.ruler.getRules("blockquote"),Z=e.push("table_open","table",1),ie=[t,0];Z.map=ie;const ae=e.push("thead_open","thead",1);ae.map=[t,t+1];const de=e.push("tr_open","tr",1);de.map=[t,t+1];for(let he=0;he<P.length;he++){const Ce=e.push("th_open","th",1);L[he]&&(Ce.attrs=[["style","text-align:"+L[he]]]);const Le=e.push("inline","",0);Le.content=P[he].trim(),Le.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let fe,le=0;for(l=t+2;l<r&&!(e.sCount[l]<e.blkIndent);l++){let he=!1;for(let Le=0,Ae=J.length;Le<Ae;Le++)if(J[Le](e,l,r,!0)){he=!0;break}if(he||(M=Fx(e,l).trim(),!M)||e.sCount[l]-e.blkIndent>=4||(P=mS(M),P.length&&P[0]===""&&P.shift(),P.length&&P[P.length-1]===""&&P.pop(),le+=V-P.length,le>ZH))break;if(l===t+2){const Le=e.push("tbody_open","tbody",1);Le.map=fe=[t+2,0]}const Ce=e.push("tr_open","tr",1);Ce.map=[l,l+1];for(let Le=0;Le<V;Le++){const Ae=e.push("td_open","td",1);L[Le]&&(Ae.attrs=[["style","text-align:"+L[Le]]]);const We=e.push("inline","",0);We.content=P[Le]?P[Le].trim():"",We.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return fe&&(e.push("tbody_close","tbody",-1),fe[1]=l),e.push("table_close","table",-1),ie[1]=l,e.parentType=X,e.line=l,!0}function YH(e,t,r){if(e.sCount[t]-e.blkIndent<4)return!1;let s=t+1,l=s;for(;s<r;){if(e.isEmpty(s)){s++;continue}if(e.sCount[s]-e.blkIndent>=4){s++,l=s;continue}break}e.line=l;const d=e.push("code_block","code",0);return d.content=e.getLines(t,l,4+e.blkIndent,!1)+`
`,d.map=[t,e.line],!0}function JH(e,t,r,s){let l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||l+3>d)return!1;const y=e.src.charCodeAt(l);if(y!==126&&y!==96)return!1;let n=l;l=e.skipChars(l,y);let M=l-n;if(M<3)return!1;const P=e.src.slice(n,l),L=e.src.slice(l,d);if(y===96&&L.indexOf(String.fromCharCode(y))>=0)return!1;if(s)return!0;let V=t,X=!1;for(;V++,!(V>=r||(l=n=e.bMarks[V]+e.tShift[V],d=e.eMarks[V],l<d&&e.sCount[V]<e.blkIndent));)if(e.src.charCodeAt(l)===y&&!(e.sCount[V]-e.blkIndent>=4)&&(l=e.skipChars(l,y),!(l-n<M)&&(l=e.skipSpaces(l),!(l<d)))){X=!0;break}M=e.sCount[t],e.line=V+(X?1:0);const J=e.push("fence","code",0);return J.info=L,J.content=e.getLines(t+1,V,M,!0),J.markup=P,J.map=[t,e.line],!0}function KH(e,t,r,s){let l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];const y=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(l)!==62)return!1;if(s)return!0;const n=[],M=[],P=[],L=[],V=e.md.block.ruler.getRules("blockquote"),X=e.parentType;e.parentType="blockquote";let J=!1,Z;for(Z=t;Z<r;Z++){const le=e.sCount[Z]<e.blkIndent;if(l=e.bMarks[Z]+e.tShift[Z],d=e.eMarks[Z],l>=d)break;if(e.src.charCodeAt(l++)===62&&!le){let Ce=e.sCount[Z]+1,Le,Ae;e.src.charCodeAt(l)===32?(l++,Ce++,Ae=!1,Le=!0):e.src.charCodeAt(l)===9?(Le=!0,(e.bsCount[Z]+Ce)%4===3?(l++,Ce++,Ae=!1):Ae=!0):Le=!1;let We=Ce;for(n.push(e.bMarks[Z]),e.bMarks[Z]=l;l<d;){const Qe=e.src.charCodeAt(l);if(An(Qe))Qe===9?We+=4-(We+e.bsCount[Z]+(Ae?1:0))%4:We++;else break;l++}J=l>=d,M.push(e.bsCount[Z]),e.bsCount[Z]=e.sCount[Z]+1+(Le?1:0),P.push(e.sCount[Z]),e.sCount[Z]=We-Ce,L.push(e.tShift[Z]),e.tShift[Z]=l-e.bMarks[Z];continue}if(J)break;let he=!1;for(let Ce=0,Le=V.length;Ce<Le;Ce++)if(V[Ce](e,Z,r,!0)){he=!0;break}if(he){e.lineMax=Z,e.blkIndent!==0&&(n.push(e.bMarks[Z]),M.push(e.bsCount[Z]),L.push(e.tShift[Z]),P.push(e.sCount[Z]),e.sCount[Z]-=e.blkIndent);break}n.push(e.bMarks[Z]),M.push(e.bsCount[Z]),L.push(e.tShift[Z]),P.push(e.sCount[Z]),e.sCount[Z]=-1}const ie=e.blkIndent;e.blkIndent=0;const ae=e.push("blockquote_open","blockquote",1);ae.markup=">";const de=[t,0];ae.map=de,e.md.block.tokenize(e,t,Z);const fe=e.push("blockquote_close","blockquote",-1);fe.markup=">",e.lineMax=y,e.parentType=X,de[1]=e.line;for(let le=0;le<L.length;le++)e.bMarks[le+t]=n[le],e.tShift[le+t]=L[le],e.sCount[le+t]=P[le],e.bsCount[le+t]=M[le];return e.blkIndent=ie,!0}function QH(e,t,r,s){const l=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let d=e.bMarks[t]+e.tShift[t];const y=e.src.charCodeAt(d++);if(y!==42&&y!==45&&y!==95)return!1;let n=1;for(;d<l;){const P=e.src.charCodeAt(d++);if(P!==y&&!An(P))return!1;P===y&&n++}if(n<3)return!1;if(s)return!0;e.line=t+1;const M=e.push("hr","hr",0);return M.map=[t,e.line],M.markup=Array(n+1).join(String.fromCharCode(y)),!0}function gS(e,t){const r=e.eMarks[t];let s=e.bMarks[t]+e.tShift[t];const l=e.src.charCodeAt(s++);if(l!==42&&l!==45&&l!==43)return-1;if(s<r){const d=e.src.charCodeAt(s);if(!An(d))return-1}return s}function _S(e,t){const r=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];let l=r;if(l+1>=s)return-1;let d=e.src.charCodeAt(l++);if(d<48||d>57)return-1;for(;;){if(l>=s)return-1;if(d=e.src.charCodeAt(l++),d>=48&&d<=57){if(l-r>=10)return-1;continue}if(d===41||d===46)break;return-1}return l<s&&(d=e.src.charCodeAt(l),!An(d))?-1:l}function eG(e,t){const r=e.level+2;for(let s=t+2,l=e.tokens.length-2;s<l;s++)e.tokens[s].level===r&&e.tokens[s].type==="paragraph_open"&&(e.tokens[s+2].hidden=!0,e.tokens[s].hidden=!0,s+=2)}function tG(e,t,r,s){let l,d,y,n,M=t,P=!0;if(e.sCount[M]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[M]-e.listIndent>=4&&e.sCount[M]<e.blkIndent)return!1;let L=!1;s&&e.parentType==="paragraph"&&e.sCount[M]>=e.blkIndent&&(L=!0);let V,X,J;if((J=_S(e,M))>=0){if(V=!0,y=e.bMarks[M]+e.tShift[M],X=Number(e.src.slice(y,J-1)),L&&X!==1)return!1}else if((J=gS(e,M))>=0)V=!1;else return!1;if(L&&e.skipSpaces(J)>=e.eMarks[M])return!1;if(s)return!0;const Z=e.src.charCodeAt(J-1),ie=e.tokens.length;V?(n=e.push("ordered_list_open","ol",1),X!==1&&(n.attrs=[["start",X]])):n=e.push("bullet_list_open","ul",1);const ae=[M,0];n.map=ae,n.markup=String.fromCharCode(Z);let de=!1;const fe=e.md.block.ruler.getRules("list"),le=e.parentType;for(e.parentType="list";M<r;){d=J,l=e.eMarks[M];const he=e.sCount[M]+J-(e.bMarks[M]+e.tShift[M]);let Ce=he;for(;d<l;){const Ke=e.src.charCodeAt(d);if(Ke===9)Ce+=4-(Ce+e.bsCount[M])%4;else if(Ke===32)Ce++;else break;d++}const Le=d;let Ae;Le>=l?Ae=1:Ae=Ce-he,Ae>4&&(Ae=1);const We=he+Ae;n=e.push("list_item_open","li",1),n.markup=String.fromCharCode(Z);const Qe=[M,0];n.map=Qe,V&&(n.info=e.src.slice(y,J-1));const ze=e.tight,Ze=e.tShift[M],Ue=e.sCount[M],vt=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=We,e.tight=!0,e.tShift[M]=Le-e.bMarks[M],e.sCount[M]=Ce,Le>=l&&e.isEmpty(M+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,M,r,!0),(!e.tight||de)&&(P=!1),de=e.line-M>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=vt,e.tShift[M]=Ze,e.sCount[M]=Ue,e.tight=ze,n=e.push("list_item_close","li",-1),n.markup=String.fromCharCode(Z),M=e.line,Qe[1]=M,M>=r||e.sCount[M]<e.blkIndent||e.sCount[M]-e.blkIndent>=4)break;let Be=!1;for(let Ke=0,xt=fe.length;Ke<xt;Ke++)if(fe[Ke](e,M,r,!0)){Be=!0;break}if(Be)break;if(V){if(J=_S(e,M),J<0)break;y=e.bMarks[M]+e.tShift[M]}else if(J=gS(e,M),J<0)break;if(Z!==e.src.charCodeAt(J-1))break}return V?n=e.push("ordered_list_close","ol",-1):n=e.push("bullet_list_close","ul",-1),n.markup=String.fromCharCode(Z),ae[1]=M,e.line=M,e.parentType=le,P&&eG(e,ie),!0}function iG(e,t,r,s){let l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t],y=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(l)!==91)return!1;function n(fe){const le=e.lineMax;if(fe>=le||e.isEmpty(fe))return null;let he=!1;if(e.sCount[fe]-e.blkIndent>3&&(he=!0),e.sCount[fe]<0&&(he=!0),!he){const Ae=e.md.block.ruler.getRules("reference"),We=e.parentType;e.parentType="reference";let Qe=!1;for(let ze=0,Ze=Ae.length;ze<Ze;ze++)if(Ae[ze](e,fe,le,!0)){Qe=!0;break}if(e.parentType=We,Qe)return null}const Ce=e.bMarks[fe]+e.tShift[fe],Le=e.eMarks[fe];return e.src.slice(Ce,Le+1)}let M=e.src.slice(l,d+1);d=M.length;let P=-1;for(l=1;l<d;l++){const fe=M.charCodeAt(l);if(fe===91)return!1;if(fe===93){P=l;break}else if(fe===10){const le=n(y);le!==null&&(M+=le,d=M.length,y++)}else if(fe===92&&(l++,l<d&&M.charCodeAt(l)===10)){const le=n(y);le!==null&&(M+=le,d=M.length,y++)}}if(P<0||M.charCodeAt(P+1)!==58)return!1;for(l=P+2;l<d;l++){const fe=M.charCodeAt(l);if(fe===10){const le=n(y);le!==null&&(M+=le,d=M.length,y++)}else if(!An(fe))break}const L=e.md.helpers.parseLinkDestination(M,l,d);if(!L.ok)return!1;const V=e.md.normalizeLink(L.str);if(!e.md.validateLink(V))return!1;l=L.pos;const X=l,J=y,Z=l;for(;l<d;l++){const fe=M.charCodeAt(l);if(fe===10){const le=n(y);le!==null&&(M+=le,d=M.length,y++)}else if(!An(fe))break}let ie=e.md.helpers.parseLinkTitle(M,l,d);for(;ie.can_continue;){const fe=n(y);if(fe===null)break;M+=fe,l=d,d=M.length,y++,ie=e.md.helpers.parseLinkTitle(M,l,d,ie)}let ae;for(l<d&&Z!==l&&ie.ok?(ae=ie.str,l=ie.pos):(ae="",l=X,y=J);l<d;){const fe=M.charCodeAt(l);if(!An(fe))break;l++}if(l<d&&M.charCodeAt(l)!==10&&ae)for(ae="",l=X,y=J;l<d;){const fe=M.charCodeAt(l);if(!An(fe))break;l++}if(l<d&&M.charCodeAt(l)!==10)return!1;const de=ev(M.slice(1,P));return de?(s||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[de]>"u"&&(e.env.references[de]={title:ae,href:V}),e.line=y),!0):!1}const rG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nG="[a-zA-Z_:][a-zA-Z0-9:._-]*",oG="[^\"'=<>`\\x00-\\x20]+",sG="'[^']*'",aG='"[^"]*"',lG="(?:"+oG+"|"+sG+"|"+aG+")",cG="(?:\\s+"+nG+"(?:\\s*=\\s*"+lG+")?)",IC="<[A-Za-z][A-Za-z0-9\\-]*"+cG+"*\\s*\\/?>",zC="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",uG="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",hG="<[?][\\s\\S]*?[?]>",dG="<![A-Za-z][^>]*>",fG="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",pG=new RegExp("^(?:"+IC+"|"+zC+"|"+uG+"|"+hG+"|"+dG+"|"+fG+")"),mG=new RegExp("^(?:"+IC+"|"+zC+")"),Xf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+rG.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(mG.source+"\\s*$"),/^$/,!1]];function gG(e,t,r,s){let l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;let y=e.src.slice(l,d),n=0;for(;n<Xf.length&&!Xf[n][0].test(y);n++);if(n===Xf.length)return!1;if(s)return Xf[n][2];let M=t+1;if(!Xf[n][1].test(y)){for(;M<r&&!(e.sCount[M]<e.blkIndent);M++)if(l=e.bMarks[M]+e.tShift[M],d=e.eMarks[M],y=e.src.slice(l,d),Xf[n][1].test(y)){y.length!==0&&M++;break}}e.line=M;const P=e.push("html_block","",0);return P.map=[t,M],P.content=e.getLines(t,M,e.blkIndent,!0),!0}function _G(e,t,r,s){let l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let y=e.src.charCodeAt(l);if(y!==35||l>=d)return!1;let n=1;for(y=e.src.charCodeAt(++l);y===35&&l<d&&n<=6;)n++,y=e.src.charCodeAt(++l);if(n>6||l<d&&!An(y))return!1;if(s)return!0;d=e.skipSpacesBack(d,l);const M=e.skipCharsBack(d,35,l);M>l&&An(e.src.charCodeAt(M-1))&&(d=M),e.line=t+1;const P=e.push("heading_open","h"+String(n),1);P.markup="########".slice(0,n),P.map=[t,e.line];const L=e.push("inline","",0);L.content=e.src.slice(l,d).trim(),L.map=[t,e.line],L.children=[];const V=e.push("heading_close","h"+String(n),-1);return V.markup="########".slice(0,n),!0}function yG(e,t,r){const s=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const l=e.parentType;e.parentType="paragraph";let d=0,y,n=t+1;for(;n<r&&!e.isEmpty(n);n++){if(e.sCount[n]-e.blkIndent>3)continue;if(e.sCount[n]>=e.blkIndent){let J=e.bMarks[n]+e.tShift[n];const Z=e.eMarks[n];if(J<Z&&(y=e.src.charCodeAt(J),(y===45||y===61)&&(J=e.skipChars(J,y),J=e.skipSpaces(J),J>=Z))){d=y===61?1:2;break}}if(e.sCount[n]<0)continue;let X=!1;for(let J=0,Z=s.length;J<Z;J++)if(s[J](e,n,r,!0)){X=!0;break}if(X)break}if(!d)return!1;const M=e.getLines(t,n,e.blkIndent,!1).trim();e.line=n+1;const P=e.push("heading_open","h"+String(d),1);P.markup=String.fromCharCode(y),P.map=[t,e.line];const L=e.push("inline","",0);L.content=M,L.map=[t,e.line-1],L.children=[];const V=e.push("heading_close","h"+String(d),-1);return V.markup=String.fromCharCode(y),e.parentType=l,!0}function vG(e,t,r){const s=e.md.block.ruler.getRules("paragraph"),l=e.parentType;let d=t+1;for(e.parentType="paragraph";d<r&&!e.isEmpty(d);d++){if(e.sCount[d]-e.blkIndent>3||e.sCount[d]<0)continue;let P=!1;for(let L=0,V=s.length;L<V;L++)if(s[L](e,d,r,!0)){P=!0;break}if(P)break}const y=e.getLines(t,d,e.blkIndent,!1).trim();e.line=d;const n=e.push("paragraph_open","p",1);n.map=[t,e.line];const M=e.push("inline","",0);return M.content=y,M.map=[t,e.line],M.children=[],e.push("paragraph_close","p",-1),e.parentType=l,!0}const J_=[["table",XH,["paragraph","reference"]],["code",YH],["fence",JH,["paragraph","reference","blockquote","list"]],["blockquote",KH,["paragraph","reference","blockquote","list"]],["hr",QH,["paragraph","reference","blockquote","list"]],["list",tG,["paragraph","reference","blockquote"]],["reference",iG],["html_block",gG,["paragraph","reference","blockquote"]],["heading",_G,["paragraph","reference","blockquote"]],["lheading",yG],["paragraph",vG]];function tv(){this.ruler=new na;for(let e=0;e<J_.length;e++)this.ruler.push(J_[e][0],J_[e][1],{alt:(J_[e][2]||[]).slice()})}tv.prototype.tokenize=function(e,t,r){const s=this.ruler.getRules(""),l=s.length,d=e.md.options.maxNesting;let y=t,n=!1;for(;y<r&&(e.line=y=e.skipEmptyLines(y),!(y>=r||e.sCount[y]<e.blkIndent));){if(e.level>=d){e.line=r;break}const M=e.line;let P=!1;for(let L=0;L<l;L++)if(P=s[L](e,y,r,!1),P){if(M>=e.line)throw new Error("block rule didn't increment state.line");break}if(!P)throw new Error("none of the block rules matched");e.tight=!n,e.isEmpty(e.line-1)&&(n=!0),y=e.line,y<r&&e.isEmpty(y)&&(n=!0,y++,e.line=y)}};tv.prototype.parse=function(e,t,r,s){if(!e)return;const l=new this.State(e,t,r,s);this.tokenize(l,l.line,l.lineMax)};tv.prototype.State=Pc;function Qm(e,t,r,s){this.src=e,this.env=r,this.md=t,this.tokens=s,this.tokens_meta=Array(s.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Qm.prototype.pushPending=function(){const e=new Gl("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Qm.prototype.push=function(e,t,r){this.pending&&this.pushPending();const s=new Gl(e,t,r);let l=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),s.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],l={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(s),this.tokens_meta.push(l),s};Qm.prototype.scanDelims=function(e,t){const r=this.posMax,s=this.src.charCodeAt(e),l=e>0?this.src.charCodeAt(e-1):32;let d=e;for(;d<r&&this.src.charCodeAt(d)===s;)d++;const y=d-e,n=d<r?this.src.charCodeAt(d):32,M=Sm(l)||wm(String.fromCharCode(l)),P=Sm(n)||wm(String.fromCharCode(n)),L=bm(l),V=bm(n),X=!V&&(!P||L||M),J=!L&&(!M||V||P);return{can_open:X&&(t||!J||M),can_close:J&&(t||!X||P),length:y}};Qm.prototype.Token=Gl;function xG(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function bG(e,t){let r=e.pos;for(;r<e.posMax&&!xG(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}const wG=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function SG(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const r=e.pos,s=e.posMax;if(r+3>s||e.src.charCodeAt(r)!==58||e.src.charCodeAt(r+1)!==47||e.src.charCodeAt(r+2)!==47)return!1;const l=e.pending.match(wG);if(!l)return!1;const d=l[1],y=e.md.linkify.matchAtStart(e.src.slice(r-d.length));if(!y)return!1;let n=y.url;if(n.length<=d.length)return!1;n=n.replace(/\*+$/,"");const M=e.md.normalizeLink(n);if(!e.md.validateLink(M))return!1;if(!t){e.pending=e.pending.slice(0,-d.length);const P=e.push("link_open","a",1);P.attrs=[["href",M]],P.markup="linkify",P.info="auto";const L=e.push("text","",0);L.content=e.md.normalizeLinkText(n);const V=e.push("link_close","a",-1);V.markup="linkify",V.info="auto"}return e.pos+=n.length-d.length,!0}function MG(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==10)return!1;const s=e.pending.length-1,l=e.posMax;if(!t)if(s>=0&&e.pending.charCodeAt(s)===32)if(s>=1&&e.pending.charCodeAt(s-1)===32){let d=s-1;for(;d>=1&&e.pending.charCodeAt(d-1)===32;)d--;e.pending=e.pending.slice(0,d),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(r++;r<l&&An(e.src.charCodeAt(r));)r++;return e.pos=r,!0}const v6=[];for(let e=0;e<256;e++)v6.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){v6[e.charCodeAt(0)]=1});function EG(e,t){let r=e.pos;const s=e.posMax;if(e.src.charCodeAt(r)!==92||(r++,r>=s))return!1;let l=e.src.charCodeAt(r);if(l===10){for(t||e.push("hardbreak","br",0),r++;r<s&&(l=e.src.charCodeAt(r),!!An(l));)r++;return e.pos=r,!0}let d=e.src[r];if(l>=55296&&l<=56319&&r+1<s){const n=e.src.charCodeAt(r+1);n>=56320&&n<=57343&&(d+=e.src[r+1],r++)}const y="\\"+d;if(!t){const n=e.push("text_special","",0);l<256&&v6[l]!==0?n.content=d:n.content=y,n.markup=y,n.info="escape"}return e.pos=r+1,!0}function TG(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==96)return!1;const l=r;r++;const d=e.posMax;for(;r<d&&e.src.charCodeAt(r)===96;)r++;const y=e.src.slice(l,r),n=y.length;if(e.backticksScanned&&(e.backticks[n]||0)<=l)return t||(e.pending+=y),e.pos+=n,!0;let M=r,P;for(;(P=e.src.indexOf("`",M))!==-1;){for(M=P+1;M<d&&e.src.charCodeAt(M)===96;)M++;const L=M-P;if(L===n){if(!t){const V=e.push("code_inline","code",0);V.markup=y,V.content=e.src.slice(r,P).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=M,!0}e.backticks[L]=P}return e.backticksScanned=!0,t||(e.pending+=y),e.pos+=n,!0}function CG(e,t){const r=e.pos,s=e.src.charCodeAt(r);if(t||s!==126)return!1;const l=e.scanDelims(e.pos,!0);let d=l.length;const y=String.fromCharCode(s);if(d<2)return!1;let n;d%2&&(n=e.push("text","",0),n.content=y,d--);for(let M=0;M<d;M+=2)n=e.push("text","",0),n.content=y+y,e.delimiters.push({marker:s,length:0,token:e.tokens.length-1,end:-1,open:l.can_open,close:l.can_close});return e.pos+=l.length,!0}function yS(e,t){let r;const s=[],l=t.length;for(let d=0;d<l;d++){const y=t[d];if(y.marker!==126||y.end===-1)continue;const n=t[y.end];r=e.tokens[y.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=e.tokens[n.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",e.tokens[n.token-1].type==="text"&&e.tokens[n.token-1].content==="~"&&s.push(n.token-1)}for(;s.length;){const d=s.pop();let y=d+1;for(;y<e.tokens.length&&e.tokens[y].type==="s_close";)y++;y--,d!==y&&(r=e.tokens[y],e.tokens[y]=e.tokens[d],e.tokens[d]=r)}}function AG(e){const t=e.tokens_meta,r=e.tokens_meta.length;yS(e,e.delimiters);for(let s=0;s<r;s++)t[s]&&t[s].delimiters&&yS(e,t[s].delimiters)}const DC={tokenize:CG,postProcess:AG};function IG(e,t){const r=e.pos,s=e.src.charCodeAt(r);if(t||s!==95&&s!==42)return!1;const l=e.scanDelims(e.pos,s===42);for(let d=0;d<l.length;d++){const y=e.push("text","",0);y.content=String.fromCharCode(s),e.delimiters.push({marker:s,length:l.length,token:e.tokens.length-1,end:-1,open:l.can_open,close:l.can_close})}return e.pos+=l.length,!0}function vS(e,t){const r=t.length;for(let s=r-1;s>=0;s--){const l=t[s];if(l.marker!==95&&l.marker!==42||l.end===-1)continue;const d=t[l.end],y=s>0&&t[s-1].end===l.end+1&&t[s-1].marker===l.marker&&t[s-1].token===l.token-1&&t[l.end+1].token===d.token+1,n=String.fromCharCode(l.marker),M=e.tokens[l.token];M.type=y?"strong_open":"em_open",M.tag=y?"strong":"em",M.nesting=1,M.markup=y?n+n:n,M.content="";const P=e.tokens[d.token];P.type=y?"strong_close":"em_close",P.tag=y?"strong":"em",P.nesting=-1,P.markup=y?n+n:n,P.content="",y&&(e.tokens[t[s-1].token].content="",e.tokens[t[l.end+1].token].content="",s--)}}function zG(e){const t=e.tokens_meta,r=e.tokens_meta.length;vS(e,e.delimiters);for(let s=0;s<r;s++)t[s]&&t[s].delimiters&&vS(e,t[s].delimiters)}const PC={tokenize:IG,postProcess:zG};function DG(e,t){let r,s,l,d,y="",n="",M=e.pos,P=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const L=e.pos,V=e.posMax,X=e.pos+1,J=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(J<0)return!1;let Z=J+1;if(Z<V&&e.src.charCodeAt(Z)===40){for(P=!1,Z++;Z<V&&(r=e.src.charCodeAt(Z),!(!An(r)&&r!==10));Z++);if(Z>=V)return!1;if(M=Z,l=e.md.helpers.parseLinkDestination(e.src,Z,e.posMax),l.ok){for(y=e.md.normalizeLink(l.str),e.md.validateLink(y)?Z=l.pos:y="",M=Z;Z<V&&(r=e.src.charCodeAt(Z),!(!An(r)&&r!==10));Z++);if(l=e.md.helpers.parseLinkTitle(e.src,Z,e.posMax),Z<V&&M!==Z&&l.ok)for(n=l.str,Z=l.pos;Z<V&&(r=e.src.charCodeAt(Z),!(!An(r)&&r!==10));Z++);}(Z>=V||e.src.charCodeAt(Z)!==41)&&(P=!0),Z++}if(P){if(typeof e.env.references>"u")return!1;if(Z<V&&e.src.charCodeAt(Z)===91?(M=Z+1,Z=e.md.helpers.parseLinkLabel(e,Z),Z>=0?s=e.src.slice(M,Z++):Z=J+1):Z=J+1,s||(s=e.src.slice(X,J)),d=e.env.references[ev(s)],!d)return e.pos=L,!1;y=d.href,n=d.title}if(!t){e.pos=X,e.posMax=J;const ie=e.push("link_open","a",1),ae=[["href",y]];ie.attrs=ae,n&&ae.push(["title",n]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=Z,e.posMax=V,!0}function PG(e,t){let r,s,l,d,y,n,M,P,L="";const V=e.pos,X=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const J=e.pos+2,Z=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(Z<0)return!1;if(d=Z+1,d<X&&e.src.charCodeAt(d)===40){for(d++;d<X&&(r=e.src.charCodeAt(d),!(!An(r)&&r!==10));d++);if(d>=X)return!1;for(P=d,n=e.md.helpers.parseLinkDestination(e.src,d,e.posMax),n.ok&&(L=e.md.normalizeLink(n.str),e.md.validateLink(L)?d=n.pos:L=""),P=d;d<X&&(r=e.src.charCodeAt(d),!(!An(r)&&r!==10));d++);if(n=e.md.helpers.parseLinkTitle(e.src,d,e.posMax),d<X&&P!==d&&n.ok)for(M=n.str,d=n.pos;d<X&&(r=e.src.charCodeAt(d),!(!An(r)&&r!==10));d++);else M="";if(d>=X||e.src.charCodeAt(d)!==41)return e.pos=V,!1;d++}else{if(typeof e.env.references>"u")return!1;if(d<X&&e.src.charCodeAt(d)===91?(P=d+1,d=e.md.helpers.parseLinkLabel(e,d),d>=0?l=e.src.slice(P,d++):d=Z+1):d=Z+1,l||(l=e.src.slice(J,Z)),y=e.env.references[ev(l)],!y)return e.pos=V,!1;L=y.href,M=y.title}if(!t){s=e.src.slice(J,Z);const ie=[];e.md.inline.parse(s,e.md,e.env,ie);const ae=e.push("image","img",0),de=[["src",L],["alt",""]];ae.attrs=de,ae.children=ie,ae.content=s,M&&de.push(["title",M])}return e.pos=d,e.posMax=X,!0}const kG=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,RG=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function LG(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==60)return!1;const s=e.pos,l=e.posMax;for(;;){if(++r>=l)return!1;const y=e.src.charCodeAt(r);if(y===60)return!1;if(y===62)break}const d=e.src.slice(s+1,r);if(RG.test(d)){const y=e.md.normalizeLink(d);if(!e.md.validateLink(y))return!1;if(!t){const n=e.push("link_open","a",1);n.attrs=[["href",y]],n.markup="autolink",n.info="auto";const M=e.push("text","",0);M.content=e.md.normalizeLinkText(d);const P=e.push("link_close","a",-1);P.markup="autolink",P.info="auto"}return e.pos+=d.length+2,!0}if(kG.test(d)){const y=e.md.normalizeLink("mailto:"+d);if(!e.md.validateLink(y))return!1;if(!t){const n=e.push("link_open","a",1);n.attrs=[["href",y]],n.markup="autolink",n.info="auto";const M=e.push("text","",0);M.content=e.md.normalizeLinkText(d);const P=e.push("link_close","a",-1);P.markup="autolink",P.info="auto"}return e.pos+=d.length+2,!0}return!1}function OG(e){return/^<a[>\s]/i.test(e)}function BG(e){return/^<\/a\s*>/i.test(e)}function FG(e){const t=e|32;return t>=97&&t<=122}function NG(e,t){if(!e.md.options.html)return!1;const r=e.posMax,s=e.pos;if(e.src.charCodeAt(s)!==60||s+2>=r)return!1;const l=e.src.charCodeAt(s+1);if(l!==33&&l!==63&&l!==47&&!FG(l))return!1;const d=e.src.slice(s).match(pG);if(!d)return!1;if(!t){const y=e.push("html_inline","",0);y.content=d[0],OG(y.content)&&e.linkLevel++,BG(y.content)&&e.linkLevel--}return e.pos+=d[0].length,!0}const $G=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,jG=/^&([a-z][a-z0-9]{1,31});/i;function UG(e,t){const r=e.pos,s=e.posMax;if(e.src.charCodeAt(r)!==38||r+1>=s)return!1;if(e.src.charCodeAt(r+1)===35){const d=e.src.slice(r).match($G);if(d){if(!t){const y=d[1][0].toLowerCase()==="x"?parseInt(d[1].slice(1),16):parseInt(d[1],10),n=e.push("text_special","",0);n.content=_6(y)?Y2(y):Y2(65533),n.markup=d[0],n.info="entity"}return e.pos+=d[0].length,!0}}else{const d=e.src.slice(r).match(jG);if(d){const y=MC(d[0]);if(y!==d[0]){if(!t){const n=e.push("text_special","",0);n.content=y,n.markup=d[0],n.info="entity"}return e.pos+=d[0].length,!0}}}return!1}function xS(e){const t={},r=e.length;if(!r)return;let s=0,l=-2;const d=[];for(let y=0;y<r;y++){const n=e[y];if(d.push(0),(e[s].marker!==n.marker||l!==n.token-1)&&(s=y),l=n.token,n.length=n.length||0,!n.close)continue;t.hasOwnProperty(n.marker)||(t[n.marker]=[-1,-1,-1,-1,-1,-1]);const M=t[n.marker][(n.open?3:0)+n.length%3];let P=s-d[s]-1,L=P;for(;P>M;P-=d[P]+1){const V=e[P];if(V.marker===n.marker&&V.open&&V.end<0){let X=!1;if((V.close||n.open)&&(V.length+n.length)%3===0&&(V.length%3!==0||n.length%3!==0)&&(X=!0),!X){const J=P>0&&!e[P-1].open?d[P-1]+1:0;d[y]=y-P+J,d[P]=J,n.open=!1,V.end=y,V.close=!1,L=-1,l=-2;break}}}L!==-1&&(t[n.marker][(n.open?3:0)+(n.length||0)%3]=L)}}function VG(e){const t=e.tokens_meta,r=e.tokens_meta.length;xS(e.delimiters);for(let s=0;s<r;s++)t[s]&&t[s].delimiters&&xS(t[s].delimiters)}function qG(e){let t,r,s=0;const l=e.tokens,d=e.tokens.length;for(t=r=0;t<d;t++)l[t].nesting<0&&s--,l[t].level=s,l[t].nesting>0&&s++,l[t].type==="text"&&t+1<d&&l[t+1].type==="text"?l[t+1].content=l[t].content+l[t+1].content:(t!==r&&(l[r]=l[t]),r++);t!==r&&(l.length=r)}const Nx=[["text",bG],["linkify",SG],["newline",MG],["escape",EG],["backticks",TG],["strikethrough",DC.tokenize],["emphasis",PC.tokenize],["link",DG],["image",PG],["autolink",LG],["html_inline",NG],["entity",UG]],$x=[["balance_pairs",VG],["strikethrough",DC.postProcess],["emphasis",PC.postProcess],["fragments_join",qG]];function eg(){this.ruler=new na;for(let e=0;e<Nx.length;e++)this.ruler.push(Nx[e][0],Nx[e][1]);this.ruler2=new na;for(let e=0;e<$x.length;e++)this.ruler2.push($x[e][0],$x[e][1])}eg.prototype.skipToken=function(e){const t=e.pos,r=this.ruler.getRules(""),s=r.length,l=e.md.options.maxNesting,d=e.cache;if(typeof d[t]<"u"){e.pos=d[t];return}let y=!1;if(e.level<l){for(let n=0;n<s;n++)if(e.level++,y=r[n](e,!0),e.level--,y){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;y||e.pos++,d[t]=e.pos};eg.prototype.tokenize=function(e){const t=this.ruler.getRules(""),r=t.length,s=e.posMax,l=e.md.options.maxNesting;for(;e.pos<s;){const d=e.pos;let y=!1;if(e.level<l){for(let n=0;n<r;n++)if(y=t[n](e,!1),y){if(d>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(y){if(e.pos>=s)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};eg.prototype.parse=function(e,t,r,s){const l=new this.State(e,t,r,s);this.tokenize(l);const d=this.ruler2.getRules(""),y=d.length;for(let n=0;n<y;n++)d[n](l)};eg.prototype.State=Qm;function HG(e){const t={};e=e||{},t.src_Any=vC.source,t.src_Cc=xC.source,t.src_Z=wC.source,t.src_P=m6.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const r="[><]";return t.src_pseudo_letter="(?:(?!"+r+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+r+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Bb(e){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(s){e[s]=r[s]})}),e}function iv(e){return Object.prototype.toString.call(e)}function GG(e){return iv(e)==="[object String]"}function WG(e){return iv(e)==="[object Object]"}function ZG(e){return iv(e)==="[object RegExp]"}function bS(e){return iv(e)==="[object Function]"}function XG(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const kC={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function YG(e){return Object.keys(e||{}).reduce(function(t,r){return t||kC.hasOwnProperty(r)},!1)}const JG={"http:":{validate:function(e,t,r){const s=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(s)?s.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){const s=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(s)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:s.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){const s=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(s)?s.match(r.re.mailto)[0].length:0}}},KG="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",QG="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function eW(e){e.__index__=-1,e.__text_cache__=""}function tW(e){return function(t,r){const s=t.slice(r);return e.test(s)?s.match(e)[0].length:0}}function wS(){return function(e,t){t.normalize(e)}}function J2(e){const t=e.re=HG(e.__opts__),r=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||r.push(KG),r.push(t.src_xn),t.src_tlds=r.join("|");function s(n){return n.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");const l=[];e.__compiled__={};function d(n,M){throw new Error('(LinkifyIt) Invalid schema "'+n+'": '+M)}Object.keys(e.__schemas__).forEach(function(n){const M=e.__schemas__[n];if(M===null)return;const P={validate:null,link:null};if(e.__compiled__[n]=P,WG(M)){ZG(M.validate)?P.validate=tW(M.validate):bS(M.validate)?P.validate=M.validate:d(n,M),bS(M.normalize)?P.normalize=M.normalize:M.normalize?d(n,M):P.normalize=wS();return}if(GG(M)){l.push(n);return}d(n,M)}),l.forEach(function(n){e.__compiled__[e.__schemas__[n]]&&(e.__compiled__[n].validate=e.__compiled__[e.__schemas__[n]].validate,e.__compiled__[n].normalize=e.__compiled__[e.__schemas__[n]].normalize)}),e.__compiled__[""]={validate:null,normalize:wS()};const y=Object.keys(e.__compiled__).filter(function(n){return n.length>0&&e.__compiled__[n]}).map(XG).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+y+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+y+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),eW(e)}function iW(e,t){const r=e.__index__,s=e.__last_index__,l=e.__text_cache__.slice(r,s);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=s+t,this.raw=l,this.text=l,this.url=l}function Fb(e,t){const r=new iW(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function Ia(e,t){if(!(this instanceof Ia))return new Ia(e,t);t||YG(e)&&(t=e,e={}),this.__opts__=Bb({},kC,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Bb({},JG,e),this.__compiled__={},this.__tlds__=QG,this.__tlds_replaced__=!1,this.re={},J2(this)}Ia.prototype.add=function(t,r){return this.__schemas__[t]=r,J2(this),this};Ia.prototype.set=function(t){return this.__opts__=Bb(this.__opts__,t),this};Ia.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let r,s,l,d,y,n,M,P,L;if(this.re.schema_test.test(t)){for(M=this.re.schema_search,M.lastIndex=0;(r=M.exec(t))!==null;)if(d=this.testSchemaAt(t,r[2],M.lastIndex),d){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+d;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(P=t.search(this.re.host_fuzzy_test),P>=0&&(this.__index__<0||P<this.__index__)&&(s=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(y=s.index+s[1].length,(this.__index__<0||y<this.__index__)&&(this.__schema__="",this.__index__=y,this.__last_index__=s.index+s[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(L=t.indexOf("@"),L>=0&&(l=t.match(this.re.email_fuzzy))!==null&&(y=l.index+l[1].length,n=l.index+l[0].length,(this.__index__<0||y<this.__index__||y===this.__index__&&n>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=y,this.__last_index__=n))),this.__index__>=0};Ia.prototype.pretest=function(t){return this.re.pretest.test(t)};Ia.prototype.testSchemaAt=function(t,r,s){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(t,s,this):0};Ia.prototype.match=function(t){const r=[];let s=0;this.__index__>=0&&this.__text_cache__===t&&(r.push(Fb(this,s)),s=this.__last_index__);let l=s?t.slice(s):t;for(;this.test(l);)r.push(Fb(this,s)),l=l.slice(this.__last_index__),s+=this.__last_index__;return r.length?r:null};Ia.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const r=this.re.schema_at_start.exec(t);if(!r)return null;const s=this.testSchemaAt(t,r[2],r[0].length);return s?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+s,Fb(this,0)):null};Ia.prototype.tlds=function(t,r){return t=Array.isArray(t)?t:[t],r?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(s,l,d){return s!==d[l-1]}).reverse(),J2(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,J2(this),this)};Ia.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Ia.prototype.onCompile=function(){};const v1=2147483647,yc=36,x6=1,Mm=26,rW=38,nW=700,RC=72,LC=128,OC="-",oW=/^xn--/,sW=/[^\0-\x7F]/,aW=/[\x2E\u3002\uFF0E\uFF61]/g,lW={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},jx=yc-x6,vc=Math.floor,Ux=String.fromCharCode;function Ju(e){throw new RangeError(lW[e])}function cW(e,t){const r=[];let s=e.length;for(;s--;)r[s]=t(e[s]);return r}function BC(e,t){const r=e.split("@");let s="";r.length>1&&(s=r[0]+"@",e=r[1]),e=e.replace(aW,".");const l=e.split("."),d=cW(l,t).join(".");return s+d}function FC(e){const t=[];let r=0;const s=e.length;for(;r<s;){const l=e.charCodeAt(r++);if(l>=55296&&l<=56319&&r<s){const d=e.charCodeAt(r++);(d&64512)==56320?t.push(((l&1023)<<10)+(d&1023)+65536):(t.push(l),r--)}else t.push(l)}return t}const uW=e=>String.fromCodePoint(...e),hW=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:yc},SS=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},NC=function(e,t,r){let s=0;for(e=r?vc(e/nW):e>>1,e+=vc(e/t);e>jx*Mm>>1;s+=yc)e=vc(e/jx);return vc(s+(jx+1)*e/(e+rW))},$C=function(e){const t=[],r=e.length;let s=0,l=LC,d=RC,y=e.lastIndexOf(OC);y<0&&(y=0);for(let n=0;n<y;++n)e.charCodeAt(n)>=128&&Ju("not-basic"),t.push(e.charCodeAt(n));for(let n=y>0?y+1:0;n<r;){const M=s;for(let L=1,V=yc;;V+=yc){n>=r&&Ju("invalid-input");const X=hW(e.charCodeAt(n++));X>=yc&&Ju("invalid-input"),X>vc((v1-s)/L)&&Ju("overflow"),s+=X*L;const J=V<=d?x6:V>=d+Mm?Mm:V-d;if(X<J)break;const Z=yc-J;L>vc(v1/Z)&&Ju("overflow"),L*=Z}const P=t.length+1;d=NC(s-M,P,M==0),vc(s/P)>v1-l&&Ju("overflow"),l+=vc(s/P),s%=P,t.splice(s++,0,l)}return String.fromCodePoint(...t)},jC=function(e){const t=[];e=FC(e);const r=e.length;let s=LC,l=0,d=RC;for(const M of e)M<128&&t.push(Ux(M));const y=t.length;let n=y;for(y&&t.push(OC);n<r;){let M=v1;for(const L of e)L>=s&&L<M&&(M=L);const P=n+1;M-s>vc((v1-l)/P)&&Ju("overflow"),l+=(M-s)*P,s=M;for(const L of e)if(L<s&&++l>v1&&Ju("overflow"),L===s){let V=l;for(let X=yc;;X+=yc){const J=X<=d?x6:X>=d+Mm?Mm:X-d;if(V<J)break;const Z=V-J,ie=yc-J;t.push(Ux(SS(J+Z%ie,0))),V=vc(Z/ie)}t.push(Ux(SS(V,0))),d=NC(l,P,n===y),l=0,++n}++l,++s}return t.join("")},dW=function(e){return BC(e,function(t){return oW.test(t)?$C(t.slice(4).toLowerCase()):t})},fW=function(e){return BC(e,function(t){return sW.test(t)?"xn--"+jC(t):t})},UC={version:"2.3.1",ucs2:{decode:FC,encode:uW},decode:$C,encode:jC,toASCII:fW,toUnicode:dW},pW={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},mW={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},gW={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},_W={default:pW,zero:mW,commonmark:gW},yW=/^(vbscript|javascript|file|data):/,vW=/^data:image\/(gif|png|jpeg|webp);/;function xW(e){const t=e.trim().toLowerCase();return yW.test(t)?vW.test(t):!0}const VC=["http:","https:","mailto:"];function bW(e){const t=p6(e,!0);if(t.hostname&&(!t.protocol||VC.indexOf(t.protocol)>=0))try{t.hostname=UC.toASCII(t.hostname)}catch{}return Km(f6(t))}function wW(e){const t=p6(e,!0);if(t.hostname&&(!t.protocol||VC.indexOf(t.protocol)>=0))try{t.hostname=UC.toUnicode(t.hostname)}catch{}return D1(f6(t),D1.defaultChars+"%")}function Vl(e,t){if(!(this instanceof Vl))return new Vl(e,t);t||g6(e)||(t=e||{},e="default"),this.inline=new eg,this.block=new tv,this.core=new y6,this.renderer=new ep,this.linkify=new Ia,this.validateLink=xW,this.normalizeLink=bW,this.normalizeLinkText=wW,this.utils=MH,this.helpers=Qy({},AH),this.options={},this.configure(e),t&&this.set(t)}Vl.prototype.set=function(e){return Qy(this.options,e),this};Vl.prototype.configure=function(e){const t=this;if(g6(e)){const r=e;if(e=_W[r],!e)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this};Vl.prototype.enable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(l){r=r.concat(this[l].ruler.enable(e,!0))},this),r=r.concat(this.inline.ruler2.enable(e,!0));const s=e.filter(function(l){return r.indexOf(l)<0});if(s.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+s);return this};Vl.prototype.disable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(l){r=r.concat(this[l].ruler.disable(e,!0))},this),r=r.concat(this.inline.ruler2.disable(e,!0));const s=e.filter(function(l){return r.indexOf(l)<0});if(s.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+s);return this};Vl.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Vl.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const r=new this.core.State(e,this,t);return this.core.process(r),r.tokens};Vl.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Vl.prototype.parseInline=function(e,t){const r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens};Vl.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const MS=new Set([!0,!1,"alt","title"]);function qC(e,t){return(Array.isArray(e)?e:[]).filter(([r])=>r!==t)}function HC(e,t){e&&e.attrs&&(e.attrs=qC(e.attrs,t))}function SW(e,t){if(!MS.has(e))throw new TypeError(`figcaption must be one of: ${[...MS]}.`);if(e==="alt")return t.content;const r=t.attrs.find(([s])=>s==="title");return Array.isArray(r)&&r[1]?(HC(t,"title"),r[1]):void 0}function $oe(e,t){t=t||{},e.core.ruler.before("linkify","image_figures",function(r){let s=1;for(let l=1,d=r.tokens.length;l<d-1;++l){const y=r.tokens[l];if(y.type!=="inline"||!y.children||y.children.length!==1&&y.children.length!==3||y.children.length===1&&y.children[0].type!=="image")continue;if(y.children.length===3){const[P,L,V]=y.children;if(P.type!=="link_open"||L.type!=="image"||V.type!=="link_close")continue}if(l!==0&&r.tokens[l-1].type!=="paragraph_open"||l!==d-1&&r.tokens[l+1].type!=="paragraph_close")continue;const n=r.tokens[l-1];let M;if(n.type="figure_open",n.tag="figure",r.tokens[l+1].type="figure_close",r.tokens[l+1].tag="figure",t.dataType&&r.tokens[l-1].attrPush(["data-type","image"]),t.link&&y.children.length===1){[M]=y.children;const P=new r.Token("link_open","a",1);P.attrPush(["href",M.attrGet("src")]),y.children.unshift(P),y.children.push(new r.Token("link_close","a",-1))}if(M=y.children.length===1?y.children[0]:y.children[1],t.figcaption){const P=SW(t.figcaption,M);if(P){const[L]=e.parseInline(P,r.env);y.children.push(new r.Token("figcaption_open","figcaption",1)),y.children.push(...L.children),y.children.push(new r.Token("figcaption_close","figcaption",-1)),M.attrs&&(M.attrs=qC(M.attrs,"title"))}}if(t.copyAttrs&&M.attrs){const P=t.copyAttrs===!0?"":t.copyAttrs;n.attrs=M.attrs.filter(([L])=>L.match(P)).map(L=>Array.from(L))}if(t.tabindex&&(r.tokens[l-1].attrPush(["tabindex",s]),s++),t.lazy&&(M.attrs.some(([P])=>P==="loading")||M.attrs.push(["loading","lazy"])),t.async&&(M.attrs.some(([P])=>P==="decoding")||M.attrs.push(["decoding","async"])),t.classes&&typeof t.classes=="string"){let P=!1;for(let L=0,V=M.attrs.length;L<V&&!P;L++){const X=M.attrs[L];X[0]==="class"&&(X[1]=`${X[1]} ${t.classes}`,P=!0)}P||M.attrs.push(["class",t.classes])}if(t.removeSrc){const P=M.attrs.find(([L])=>L==="src");M.attrs.push(["data-src",P[1]]),HC(M,"src")}}})}const MW=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function EW(e,t){const r=e.posMax,s=e.pos;if(e.src.charCodeAt(s)!==126||t||s+2>=r)return!1;e.pos=s+1;let l=!1;for(;e.pos<r;){if(e.src.charCodeAt(e.pos)===126){l=!0;break}e.md.inline.skipToken(e)}if(!l||s+1===e.pos)return e.pos=s,!1;const d=e.src.slice(s+1,e.pos);if(d.match(/(^|[^\\])(\\\\)*\s/))return e.pos=s,!1;e.posMax=e.pos,e.pos=s+1;const y=e.push("sub_open","sub",1);y.markup="~";const n=e.push("text","",0);n.content=d.replace(MW,"$1");const M=e.push("sub_close","sub",-1);return M.markup="~",e.pos=e.posMax+1,e.posMax=r,!0}function joe(e){e.inline.ruler.after("emphasis","sub",EW)}const TW=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function CW(e,t){const r=e.posMax,s=e.pos;if(e.src.charCodeAt(s)!==94||t||s+2>=r)return!1;e.pos=s+1;let l=!1;for(;e.pos<r;){if(e.src.charCodeAt(e.pos)===94){l=!0;break}e.md.inline.skipToken(e)}if(!l||s+1===e.pos)return e.pos=s,!1;const d=e.src.slice(s+1,e.pos);if(d.match(/(^|[^\\])(\\\\)*\s/))return e.pos=s,!1;e.posMax=e.pos,e.pos=s+1;const y=e.push("sup_open","sup",1);y.markup="^";const n=e.push("text","",0);n.content=d.replace(TW,"$1");const M=e.push("sup_close","sup",-1);return M.markup="^",e.pos=e.posMax+1,e.posMax=r,!0}function Uoe(e){e.inline.ruler.after("emphasis","sup",CW)}const Yf=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,GC=new Set,Nb=typeof process=="object"&&process?process:{},WC=(e,t,r,s)=>{typeof Nb.emitWarning=="function"&&Nb.emitWarning(e,t,r,s)};let K2=globalThis.AbortController,ES=globalThis.AbortSignal;if(typeof K2>"u"){ES=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,l){this._onabort.push(l)}},K2=class{constructor(){t()}signal=new ES;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(const l of this.signal._onabort)l(s);this.signal.onabort?.(s)}}};let e=Nb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const t=()=>{e&&(e=!1,WC("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const AW=e=>!GC.has(e),Zu=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),ZC=e=>Zu(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?M2:null:null;class M2 extends Array{constructor(t){super(t),this.fill(0)}}class o1{heap;length;static#l=!1;static create(t){const r=ZC(t);if(!r)return[];o1.#l=!0;const s=new o1(t,r);return o1.#l=!1,s}constructor(t,r){if(!o1.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class XC{#l;#h;#m;#g;#z;#D;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#_;#r;#i;#e;#c;#d;#a;#o;#y;#s;#v;#x;#f;#b;#T;#u;static unsafeExposeInternals(t){return{starts:t.#x,ttls:t.#f,sizes:t.#v,keyMap:t.#r,keyList:t.#i,valList:t.#e,next:t.#c,prev:t.#d,get head(){return t.#a},get tail(){return t.#o},free:t.#y,isBackgroundFetch:r=>t.#t(r),backgroundFetch:(r,s,l,d)=>t.#R(r,s,l,d),moveToTail:r=>t.#I(r),indexes:r=>t.#w(r),rindexes:r=>t.#S(r),isStale:r=>t.#p(r)}}get max(){return this.#l}get maxSize(){return this.#h}get calculatedSize(){return this.#_}get size(){return this.#n}get fetchMethod(){return this.#z}get memoMethod(){return this.#D}get dispose(){return this.#m}get disposeAfter(){return this.#g}constructor(t){const{max:r=0,ttl:s,ttlResolution:l=1,ttlAutopurge:d,updateAgeOnGet:y,updateAgeOnHas:n,allowStale:M,dispose:P,disposeAfter:L,noDisposeOnSet:V,noUpdateTTL:X,maxSize:J=0,maxEntrySize:Z=0,sizeCalculation:ie,fetchMethod:ae,memoMethod:de,noDeleteOnFetchRejection:fe,noDeleteOnStaleGet:le,allowStaleOnFetchRejection:he,allowStaleOnFetchAbort:Ce,ignoreFetchAbort:Le}=t;if(r!==0&&!Zu(r))throw new TypeError("max option must be a nonnegative integer");const Ae=r?ZC(r):Array;if(!Ae)throw new Error("invalid max value: "+r);if(this.#l=r,this.#h=J,this.maxEntrySize=Z||this.#h,this.sizeCalculation=ie,this.sizeCalculation){if(!this.#h&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(de!==void 0&&typeof de!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#D=de,ae!==void 0&&typeof ae!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#z=ae,this.#T=!!ae,this.#r=new Map,this.#i=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#c=new Ae(r),this.#d=new Ae(r),this.#a=0,this.#o=0,this.#y=o1.create(r),this.#n=0,this.#_=0,typeof P=="function"&&(this.#m=P),typeof L=="function"?(this.#g=L,this.#s=[]):(this.#g=void 0,this.#s=void 0),this.#b=!!this.#m,this.#u=!!this.#g,this.noDisposeOnSet=!!V,this.noUpdateTTL=!!X,this.noDeleteOnFetchRejection=!!fe,this.allowStaleOnFetchRejection=!!he,this.allowStaleOnFetchAbort=!!Ce,this.ignoreFetchAbort=!!Le,this.maxEntrySize!==0){if(this.#h!==0&&!Zu(this.#h))throw new TypeError("maxSize must be a positive integer if specified");if(!Zu(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!M,this.noDeleteOnStaleGet=!!le,this.updateAgeOnGet=!!y,this.updateAgeOnHas=!!n,this.ttlResolution=Zu(l)||l===0?l:1,this.ttlAutopurge=!!d,this.ttl=s||0,this.ttl){if(!Zu(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#L()}if(this.#l===0&&this.ttl===0&&this.#h===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#h){const We="LRU_CACHE_UNBOUNDED";AW(We)&&(GC.add(We),WC("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",We,XC))}}getRemainingTTL(t){return this.#r.has(t)?1/0:0}#L(){const t=new M2(this.#l),r=new M2(this.#l);this.#f=t,this.#x=r,this.#O=(d,y,n=Yf.now())=>{if(r[d]=y!==0?n:0,t[d]=y,y!==0&&this.ttlAutopurge){const M=setTimeout(()=>{this.#p(d)&&this.#M(this.#i[d],"expire")},y+1);M.unref&&M.unref()}},this.#C=d=>{r[d]=t[d]!==0?Yf.now():0},this.#E=(d,y)=>{if(t[y]){const n=t[y],M=r[y];if(!n||!M)return;d.ttl=n,d.start=M,d.now=s||l();const P=d.now-M;d.remainingTTL=n-P}};let s=0;const l=()=>{const d=Yf.now();if(this.ttlResolution>0){s=d;const y=setTimeout(()=>s=0,this.ttlResolution);y.unref&&y.unref()}return d};this.getRemainingTTL=d=>{const y=this.#r.get(d);if(y===void 0)return 0;const n=t[y],M=r[y];if(!n||!M)return 1/0;const P=(s||l())-M;return n-P},this.#p=d=>{const y=r[d],n=t[d];return!!n&&!!y&&(s||l())-y>n}}#C=()=>{};#E=()=>{};#O=()=>{};#p=()=>!1;#j(){const t=new M2(this.#l);this.#_=0,this.#v=t,this.#A=r=>{this.#_-=t[r],t[r]=0},this.#B=(r,s,l,d)=>{if(this.#t(s))return 0;if(!Zu(l))if(d){if(typeof d!="function")throw new TypeError("sizeCalculation must be a function");if(l=d(s,r),!Zu(l))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return l},this.#P=(r,s,l)=>{if(t[r]=s,this.#h){const d=this.#h-t[r];for(;this.#_>d;)this.#k(!0)}this.#_+=t[r],l&&(l.entrySize=s,l.totalCalculatedSize=this.#_)}}#A=t=>{};#P=(t,r,s)=>{};#B=(t,r,s,l)=>{if(s||l)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#w({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#F(r)||((t||!this.#p(r))&&(yield r),r===this.#a));)r=this.#d[r]}*#S({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#a;!(!this.#F(r)||((t||!this.#p(r))&&(yield r),r===this.#o));)r=this.#c[r]}#F(t){return t!==void 0&&this.#r.get(this.#i[t])===t}*entries(){for(const t of this.#w())this.#e[t]!==void 0&&this.#i[t]!==void 0&&!this.#t(this.#e[t])&&(yield[this.#i[t],this.#e[t]])}*rentries(){for(const t of this.#S())this.#e[t]!==void 0&&this.#i[t]!==void 0&&!this.#t(this.#e[t])&&(yield[this.#i[t],this.#e[t]])}*keys(){for(const t of this.#w()){const r=this.#i[t];r!==void 0&&!this.#t(this.#e[t])&&(yield r)}}*rkeys(){for(const t of this.#S()){const r=this.#i[t];r!==void 0&&!this.#t(this.#e[t])&&(yield r)}}*values(){for(const t of this.#w())this.#e[t]!==void 0&&!this.#t(this.#e[t])&&(yield this.#e[t])}*rvalues(){for(const t of this.#S())this.#e[t]!==void 0&&!this.#t(this.#e[t])&&(yield this.#e[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,r={}){for(const s of this.#w()){const l=this.#e[s],d=this.#t(l)?l.__staleWhileFetching:l;if(d!==void 0&&t(d,this.#i[s],this))return this.get(this.#i[s],r)}}forEach(t,r=this){for(const s of this.#w()){const l=this.#e[s],d=this.#t(l)?l.__staleWhileFetching:l;d!==void 0&&t.call(r,d,this.#i[s],this)}}rforEach(t,r=this){for(const s of this.#S()){const l=this.#e[s],d=this.#t(l)?l.__staleWhileFetching:l;d!==void 0&&t.call(r,d,this.#i[s],this)}}purgeStale(){let t=!1;for(const r of this.#S({allowStale:!0}))this.#p(r)&&(this.#M(this.#i[r],"expire"),t=!0);return t}info(t){const r=this.#r.get(t);if(r===void 0)return;const s=this.#e[r],l=this.#t(s)?s.__staleWhileFetching:s;if(l===void 0)return;const d={value:l};if(this.#f&&this.#x){const y=this.#f[r],n=this.#x[r];if(y&&n){const M=y-(Yf.now()-n);d.ttl=M,d.start=Date.now()}}return this.#v&&(d.size=this.#v[r]),d}dump(){const t=[];for(const r of this.#w({allowStale:!0})){const s=this.#i[r],l=this.#e[r],d=this.#t(l)?l.__staleWhileFetching:l;if(d===void 0||s===void 0)continue;const y={value:d};if(this.#f&&this.#x){y.ttl=this.#f[r];const n=Yf.now()-this.#x[r];y.start=Math.floor(Date.now()-n)}this.#v&&(y.size=this.#v[r]),t.unshift([s,y])}return t}load(t){this.clear();for(const[r,s]of t){if(s.start){const l=Date.now()-s.start;s.start=Yf.now()-l}this.set(r,s.value,s)}}set(t,r,s={}){if(r===void 0)return this.delete(t),this;const{ttl:l=this.ttl,start:d,noDisposeOnSet:y=this.noDisposeOnSet,sizeCalculation:n=this.sizeCalculation,status:M}=s;let{noUpdateTTL:P=this.noUpdateTTL}=s;const L=this.#B(t,r,s.size||0,n);if(this.maxEntrySize&&L>this.maxEntrySize)return M&&(M.set="miss",M.maxEntrySizeExceeded=!0),this.#M(t,"set"),this;let V=this.#n===0?void 0:this.#r.get(t);if(V===void 0)V=this.#n===0?this.#o:this.#y.length!==0?this.#y.pop():this.#n===this.#l?this.#k(!1):this.#n,this.#i[V]=t,this.#e[V]=r,this.#r.set(t,V),this.#c[this.#o]=V,this.#d[V]=this.#o,this.#o=V,this.#n++,this.#P(V,L,M),M&&(M.set="add"),P=!1;else{this.#I(V);const X=this.#e[V];if(r!==X){if(this.#T&&this.#t(X)){X.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:J}=X;J!==void 0&&!y&&(this.#b&&this.#m?.(J,t,"set"),this.#u&&this.#s?.push([J,t,"set"]))}else y||(this.#b&&this.#m?.(X,t,"set"),this.#u&&this.#s?.push([X,t,"set"]));if(this.#A(V),this.#P(V,L,M),this.#e[V]=r,M){M.set="replace";const J=X&&this.#t(X)?X.__staleWhileFetching:X;J!==void 0&&(M.oldValue=J)}}else M&&(M.set="update")}if(l!==0&&!this.#f&&this.#L(),this.#f&&(P||this.#O(V,l,d),M&&this.#E(M,V)),!y&&this.#u&&this.#s){const X=this.#s;let J;for(;J=X?.shift();)this.#g?.(...J)}return this}pop(){try{for(;this.#n;){const t=this.#e[this.#a];if(this.#k(!0),this.#t(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#u&&this.#s){const t=this.#s;let r;for(;r=t?.shift();)this.#g?.(...r)}}}#k(t){const r=this.#a,s=this.#i[r],l=this.#e[r];return this.#T&&this.#t(l)?l.__abortController.abort(new Error("evicted")):(this.#b||this.#u)&&(this.#b&&this.#m?.(l,s,"evict"),this.#u&&this.#s?.push([l,s,"evict"])),this.#A(r),t&&(this.#i[r]=void 0,this.#e[r]=void 0,this.#y.push(r)),this.#n===1?(this.#a=this.#o=0,this.#y.length=0):this.#a=this.#c[r],this.#r.delete(s),this.#n--,r}has(t,r={}){const{updateAgeOnHas:s=this.updateAgeOnHas,status:l}=r,d=this.#r.get(t);if(d!==void 0){const y=this.#e[d];if(this.#t(y)&&y.__staleWhileFetching===void 0)return!1;if(this.#p(d))l&&(l.has="stale",this.#E(l,d));else return s&&this.#C(d),l&&(l.has="hit",this.#E(l,d)),!0}else l&&(l.has="miss");return!1}peek(t,r={}){const{allowStale:s=this.allowStale}=r,l=this.#r.get(t);if(l===void 0||!s&&this.#p(l))return;const d=this.#e[l];return this.#t(d)?d.__staleWhileFetching:d}#R(t,r,s,l){const d=r===void 0?void 0:this.#e[r];if(this.#t(d))return d;const y=new K2,{signal:n}=s;n?.addEventListener("abort",()=>y.abort(n.reason),{signal:y.signal});const M={signal:y.signal,options:s,context:l},P=(ie,ae=!1)=>{const{aborted:de}=y.signal,fe=s.ignoreFetchAbort&&ie!==void 0;if(s.status&&(de&&!ae?(s.status.fetchAborted=!0,s.status.fetchError=y.signal.reason,fe&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),de&&!fe&&!ae)return V(y.signal.reason);const le=J;return this.#e[r]===J&&(ie===void 0?le.__staleWhileFetching?this.#e[r]=le.__staleWhileFetching:this.#M(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,ie,M.options))),ie},L=ie=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=ie),V(ie)),V=ie=>{const{aborted:ae}=y.signal,de=ae&&s.allowStaleOnFetchAbort,fe=de||s.allowStaleOnFetchRejection,le=fe||s.noDeleteOnFetchRejection,he=J;if(this.#e[r]===J&&(!le||he.__staleWhileFetching===void 0?this.#M(t,"fetch"):de||(this.#e[r]=he.__staleWhileFetching)),fe)return s.status&&he.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),he.__staleWhileFetching;if(he.__returned===he)throw ie},X=(ie,ae)=>{const de=this.#z?.(t,d,M);de&&de instanceof Promise&&de.then(fe=>ie(fe===void 0?void 0:fe),ae),y.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(ie(void 0),s.allowStaleOnFetchAbort&&(ie=fe=>P(fe,!0)))})};s.status&&(s.status.fetchDispatched=!0);const J=new Promise(X).then(P,L),Z=Object.assign(J,{__abortController:y,__staleWhileFetching:d,__returned:void 0});return r===void 0?(this.set(t,Z,{...M.options,status:void 0}),r=this.#r.get(t)):this.#e[r]=Z,Z}#t(t){if(!this.#T)return!1;const r=t;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof K2}async fetch(t,r={}){const{allowStale:s=this.allowStale,updateAgeOnGet:l=this.updateAgeOnGet,noDeleteOnStaleGet:d=this.noDeleteOnStaleGet,ttl:y=this.ttl,noDisposeOnSet:n=this.noDisposeOnSet,size:M=0,sizeCalculation:P=this.sizeCalculation,noUpdateTTL:L=this.noUpdateTTL,noDeleteOnFetchRejection:V=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:X=this.allowStaleOnFetchRejection,ignoreFetchAbort:J=this.ignoreFetchAbort,allowStaleOnFetchAbort:Z=this.allowStaleOnFetchAbort,context:ie,forceRefresh:ae=!1,status:de,signal:fe}=r;if(!this.#T)return de&&(de.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:l,noDeleteOnStaleGet:d,status:de});const le={allowStale:s,updateAgeOnGet:l,noDeleteOnStaleGet:d,ttl:y,noDisposeOnSet:n,size:M,sizeCalculation:P,noUpdateTTL:L,noDeleteOnFetchRejection:V,allowStaleOnFetchRejection:X,allowStaleOnFetchAbort:Z,ignoreFetchAbort:J,status:de,signal:fe};let he=this.#r.get(t);if(he===void 0){de&&(de.fetch="miss");const Ce=this.#R(t,he,le,ie);return Ce.__returned=Ce}else{const Ce=this.#e[he];if(this.#t(Ce)){const ze=s&&Ce.__staleWhileFetching!==void 0;return de&&(de.fetch="inflight",ze&&(de.returnedStale=!0)),ze?Ce.__staleWhileFetching:Ce.__returned=Ce}const Le=this.#p(he);if(!ae&&!Le)return de&&(de.fetch="hit"),this.#I(he),l&&this.#C(he),de&&this.#E(de,he),Ce;const Ae=this.#R(t,he,le,ie),Qe=Ae.__staleWhileFetching!==void 0&&s;return de&&(de.fetch=Le?"stale":"refresh",Qe&&Le&&(de.returnedStale=!0)),Qe?Ae.__staleWhileFetching:Ae.__returned=Ae}}async forceFetch(t,r={}){const s=await this.fetch(t,r);if(s===void 0)throw new Error("fetch() returned undefined");return s}memo(t,r={}){const s=this.#D;if(!s)throw new Error("no memoMethod provided to constructor");const{context:l,forceRefresh:d,...y}=r,n=this.get(t,y);if(!d&&n!==void 0)return n;const M=s(t,n,{options:y,context:l});return this.set(t,M,y),M}get(t,r={}){const{allowStale:s=this.allowStale,updateAgeOnGet:l=this.updateAgeOnGet,noDeleteOnStaleGet:d=this.noDeleteOnStaleGet,status:y}=r,n=this.#r.get(t);if(n!==void 0){const M=this.#e[n],P=this.#t(M);return y&&this.#E(y,n),this.#p(n)?(y&&(y.get="stale"),P?(y&&s&&M.__staleWhileFetching!==void 0&&(y.returnedStale=!0),s?M.__staleWhileFetching:void 0):(d||this.#M(t,"expire"),y&&s&&(y.returnedStale=!0),s?M:void 0)):(y&&(y.get="hit"),P?M.__staleWhileFetching:(this.#I(n),l&&this.#C(n),M))}else y&&(y.get="miss")}#N(t,r){this.#d[r]=t,this.#c[t]=r}#I(t){t!==this.#o&&(t===this.#a?this.#a=this.#c[t]:this.#N(this.#d[t],this.#c[t]),this.#N(this.#o,t),this.#o=t)}delete(t){return this.#M(t,"delete")}#M(t,r){let s=!1;if(this.#n!==0){const l=this.#r.get(t);if(l!==void 0)if(s=!0,this.#n===1)this.#$(r);else{this.#A(l);const d=this.#e[l];if(this.#t(d)?d.__abortController.abort(new Error("deleted")):(this.#b||this.#u)&&(this.#b&&this.#m?.(d,t,r),this.#u&&this.#s?.push([d,t,r])),this.#r.delete(t),this.#i[l]=void 0,this.#e[l]=void 0,l===this.#o)this.#o=this.#d[l];else if(l===this.#a)this.#a=this.#c[l];else{const y=this.#d[l];this.#c[y]=this.#c[l];const n=this.#c[l];this.#d[n]=this.#d[l]}this.#n--,this.#y.push(l)}}if(this.#u&&this.#s?.length){const l=this.#s;let d;for(;d=l?.shift();)this.#g?.(...d)}return s}clear(){return this.#$("delete")}#$(t){for(const r of this.#S({allowStale:!0})){const s=this.#e[r];if(this.#t(s))s.__abortController.abort(new Error("deleted"));else{const l=this.#i[r];this.#b&&this.#m?.(s,l,t),this.#u&&this.#s?.push([s,l,t])}}if(this.#r.clear(),this.#e.fill(void 0),this.#i.fill(void 0),this.#f&&this.#x&&(this.#f.fill(0),this.#x.fill(0)),this.#v&&this.#v.fill(0),this.#a=0,this.#o=0,this.#y.length=0,this.#_=0,this.#n=0,this.#u&&this.#s){const r=this.#s;let s;for(;s=r?.shift();)this.#g?.(...s)}}}const YC=function(e){return/^warnings-/.test(e)},IW=function(e){return YC(e)?e.replace("warnings-",""):e},zW={"01":"1001","02":"1003","03":"1004","04":"1005","05":"1006","06":"1007","07":"1009","08":"1022","09":"1014",10:"1015",11:"1016",12:"1017",13:"1019",14:"1021",15:"1025",16:"1020",17:"1047",18:"1051"},DW=function(e){return zW[e]},PW={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",CLEAR_DAY:"100",CLEAR_NIGHT:"150",PARTLY_CLOUDY_DAY:"101",PARTLY_CLOUDY_NIGHT:"151",CLOUDY:"104",LIGHT_HAZE:"502",MODERATE_HAZE:"511",HEAVY_HAZE:"512",LIGHT_RAIN:"305",MODERATE_RAIN:"306",HEAVY_RAIN:"307",STORM_RAIN:"310",FOG:"501",LIGHT_SNOW:"400",MODERATE_SNOW:"401",HEAVY_SNOW:"402",STORM_SNOW:"403",DUST:"504",SAND:"507",WIND:"1006"},kW=function(e){return PW[e]},RW=function(e){return YC(e)?DW(e.replace("warnings-","")):kW(e)};if(typeof window<"u"){let e=function(){var t=document.body,r=document.getElementById("__svg__icons__");r||(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.style.position="absolute",r.style.width="0",r.style.height="0",r.id="__svg__icons__",r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),r.innerHTML='<symbol  viewBox="0 0 500 500" id="icon-warnings-1001"><path d="M449.4 284.9c2.7.6 5.4-1.4 5.6-4.2 6.8-93.1-55.3-176-140.4-193.6-85.2-17.6-178 33.3-201.2 114.6-25.6 89.7 24.7 139.4 31.3 148.5-48.9-10.5-96.1-79-94.1-133.2-2.7-.6-5.4 1.4-5.6 4.2-6.7 88.5 46 166.1 124.7 188.8-.3 0 21.4 4.6 21.1 4.6l20.3 1.5s56.6 4.5 115.4-33.9h-1c27.6-20.4 49.6-48 60.2-81.1 27.1-83.9-23.6-140.3-30.1-149.3 52.1 10.9 95.9 79.1 93.8 133.1zm-158.8-32c-2.4 23.6-24.1 40-47.2 36.3-.9-.2-1.8-.3-2.7-.5-21.9-5.2-35.5-27.1-30.3-49 5.1-21.6 26.7-35.4 48.7-30.4 19.8 4.3 33.5 23.3 31.5 43.6z" fill="#e99311" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1002"><path d="M163.2 415.8h-15.8c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h15.8c4.4 0 7.9-3.5 7.9-7.9s-3.6-7.9-7.9-7.9zm31.5-31.6h-63.2c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h63.2c4.4 0 7.9-3.5 7.9-7.9s-3.5-7.9-7.9-7.9zm-7.9-23.7c0-4.4-3.5-7.9-7.9-7.9h-47.4c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9H179c4.3 0 7.8-3.5 7.8-7.9z" style="fill:#d9ecff" /><path d="M226.3 321H115.8c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h110.5c4.4 0 7.9-3.5 7.9-7.9 0-4.3-3.5-7.9-7.9-7.9zm31.6-31.5H131.6c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h126.3c4.4 0 7.9-3.5 7.9-7.9s-3.5-7.9-7.9-7.9zm31.6-31.6H163.2c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h126.3c4.4 0 7.9-3.5 7.9-7.9s-3.6-7.9-7.9-7.9z" style="fill:#8cc5ff" /><path d="M336.8 226.3h-221c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h221.1c4.4 0 7.9-3.5 7.9-7.9-.1-4.4-3.6-7.9-8-7.9zM84.2 210.5h221c4.4 0 7.9-3.5 7.9-7.9s-3.5-7.9-7.9-7.9h-221c-4.4 0-7.9 3.5-7.9 7.9s3.6 7.9 7.9 7.9zm252.6-47.3h-221c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h221.1c4.4 0 7.9-3.5 7.9-7.9-.1-4.4-3.6-7.9-8-7.9z" style="fill:#66b1ff" /><path d="M384.2 147.4c4.4 0 7.9-3.5 7.9-7.9s-3.5-7.9-7.9-7.9H131.6c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h252.6zM305.3 100H100c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h205.3c4.4 0 7.9-3.5 7.9-7.9s-3.6-7.9-7.9-7.9zm126.3-31.6H68.4c-4.4 0-7.9 3.5-7.9 7.9s3.5 7.9 7.9 7.9h363.2c4.4 0 7.9-3.5 7.9-7.9 0-4.3-3.6-7.9-7.9-7.9z" style="fill:#409eff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1003"><path d="M391.8 144.5h-.4c-4.1-44.2-41.2-78.8-86.5-78.8-48 0-86.9 38.9-86.9 86.9 0 46.4 36.4 84.3 82.2 86.8v.1h91.6c26.2 0 47.5-21.3 47.5-47.5s-21.3-47.5-47.5-47.5z" fill="#e3e3e3" /><path d="M338.1 168.8c-14-47.8-58.1-82.7-110.5-82.7-62.8 0-113.9 50.4-115.1 112.9-29.2 3.4-51.9 28.3-51.9 58.5 0 32.5 26.4 58.9 58.9 58.9h209.8c40.9 0 74-33.1 74-74 0-38-28.5-69.3-65.2-73.6z" fill="#f6f6f6" /><path d="m135.5 390.6 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.8-7.4-17.6zm63.6 25.1 28.5-69.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-28.5 69.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm73.8-25.1 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.8-7.4-17.6zM61.7 408.5l28.5-69.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-28.5 69.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.3-10.7-7.4-17.6zm274.8 7.2 28.5-69.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-28.5 69.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1004"><path d="M398.6 160.1h-.4c-4.3-46.3-43.2-82.6-90.6-82.6-50.3 0-91 40.8-91 91 0 48.6 38.1 88.3 86.1 90.9v.1h96c27.5 0 49.8-22.3 49.8-49.8s-22.4-49.6-49.9-49.6z" fill="#e3e3e3" /><path d="M342.3 185.6c-14.7-50.1-60.9-86.7-115.7-86.7-65.8 0-119.3 52.8-120.5 118.3-30.6 3.6-54.4 29.6-54.4 61.2 0 34.1 27.6 61.7 61.7 61.7h219.8c42.8 0 77.6-34.7 77.6-77.6-.1-39.6-30-72.4-68.5-76.9z" fill="#f6f6f6" /><path d="M296.3 323.2h-30.5l15.3-26.4c4.7-8.1 1.9-18.5-6.2-23.2-8.1-4.6-18.5-1.9-23.2 6.2l-15.3 26.4-15.3-26.4c-5.2-7.8-15.8-9.9-23.6-4.7-7.1 4.7-9.6 14-5.8 21.7l15.3 26.4h-30.5c-9.4 0-17 7.6-17 16.9 0 9.4 7.6 17 16.9 17H207l-15.3 26.4c-4.7 8.2-1.8 18.5 6.3 23.2 2.6 1.5 5.4 2.2 8.4 2.3 6.1 0 11.7-3.2 14.7-8.5l15.3-26.4 15.3 26.4c4.7 8.1 15.1 10.9 23.2 6.2s10.9-15.1 6.2-23.2l-15.3-26.4h30.5c9.4 0 17-7.6 16.9-17 0-9.4-7.6-16.9-16.9-16.9zm-164.5 21.6h-15.3l7.6-13.2c2.3-4.1.9-9.2-3.1-11.6-4.1-2.3-9.2-.9-11.6 3.1l-7.6 13.2-7.6-13.2c-2.6-3.9-7.9-5-11.8-2.3-3.5 2.4-4.8 7-2.9 10.8l7.6 13.2H71.9c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5h15.3L79.5 375c-2.3 4.1-.9 9.3 3.2 11.6 1.3.7 2.7 1.1 4.2 1.1 3 0 5.8-1.6 7.4-4.2l7.6-13.2 7.6 13.2c2.3 4.1 7.5 5.4 11.6 3.1 4-2.4 5.4-7.5 3.1-11.6l-7.6-13.2h15.3c4.7 0 8.5-3.8 8.5-8.5-.1-4.7-3.9-8.5-8.6-8.5zm269 5.9h-15.3l7.6-13.2c2.3-4.1.9-9.2-3.1-11.6-4.1-2.3-9.2-.9-11.6 3.1l-7.6 13.2-7.6-13.2c-2.6-3.9-7.9-5-11.8-2.3-3.5 2.4-4.8 7-2.9 10.8l7.6 13.2h-15.3c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5h15.3l-7.6 13.2c-2.3 4.1-.9 9.3 3.2 11.6 1.3.7 2.7 1.1 4.2 1.1 3 0 5.8-1.6 7.4-4.2l7.6-13.2 7.6 13.2c2.3 4.1 7.5 5.4 11.6 3.1 4-2.4 5.4-7.5 3.1-11.6l-7.6-13.2h15.3c4.7 0 8.5-3.8 8.5-8.5-.1-4.7-3.9-8.5-8.6-8.5zm-217.5 63H168l7.6-13.2c2.3-4.1.9-9.2-3.1-11.6-4.1-2.3-9.2-.9-11.6 3.1l-7.6 13.2-7.6-13.2c-2.6-3.9-7.9-5-11.8-2.3-3.5 2.4-4.8 7-2.9 10.8l7.6 13.2h-15.3c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5h15.3l-7.6 13.2c-2.3 4.1-.9 9.3 3.2 11.6 1.3.7 2.7 1.1 4.2 1.1 3 0 5.8-1.6 7.4-4.2l7.6-13.2 7.6 13.2c2.3 4.1 7.5 5.4 11.6 3.1 4-2.4 5.4-7.5 3.1-11.6l-7.6-13.2h15.3c4.7 0 8.5-3.8 8.5-8.5-.1-4.7-3.9-8.5-8.6-8.5zm167.3 0h-15.3l7.6-13.2c2.3-4.1.9-9.2-3.1-11.6-4.1-2.3-9.2-.9-11.6 3.1l-7.6 13.2L313 392c-2.6-3.9-7.9-5-11.8-2.3-3.5 2.4-4.8 7-2.9 10.8l7.6 13.2h-15.3c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5H306l-7.6 13.2c-2.3 4.1-.9 9.3 3.2 11.6 1.3.7 2.7 1.1 4.2 1.1 3 0 5.8-1.6 7.4-4.2l7.6-13.2 7.6 13.2c2.3 4.1 7.5 5.4 11.6 3.1 4-2.4 5.4-7.5 3.1-11.6l-7.6-13.2h15.3c4.7 0 8.5-3.8 8.5-8.5s-4-8.5-8.7-8.5z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1005"><path d="M434.9 115.9H65.4c-16.3 0-29.5-13.2-29.5-29.5s13.2-29.5 29.5-29.5h369.5c16.3 0 29.5 13.2 29.5 29.5s-13.3 29.5-29.5 29.5zm0 116.9H65.4c-16.3 0-29.5-13.2-29.5-29.5s13.2-29.5 29.5-29.5h369.5c16.3 0 29.5 13.2 29.5 29.5s-13.3 29.5-29.5 29.5zm-194 116.9H65.4c-16.2 0-29.5-13.3-29.5-29.5s13.3-29.5 29.5-29.5h175.5c16.2 0 29.5 13.3 29.5 29.5s-13.3 29.5-29.5 29.5z" style="fill:#e6e6e6" /><path d="M447.4 318.7h-30.5l15.3-26.4c4.7-8.1 1.9-18.5-6.2-23.2-8.1-4.6-18.5-1.9-23.2 6.2l-15.3 26.4-15.3-26.4c-5.2-7.8-15.8-9.9-23.6-4.7-7.1 4.7-9.6 14-5.8 21.7l15.3 26.4h-30.5c-9.4 0-17 7.6-17 16.9 0 9.4 7.6 17 16.9 17H358L342.8 379c-4.7 8.2-1.8 18.5 6.3 23.2 2.6 1.5 5.4 2.2 8.4 2.3 6.1 0 11.7-3.2 14.7-8.5l15.3-26.4 15.3 26.4c4.7 8.1 15.1 10.9 23.2 6.2s10.9-15.1 6.2-23.2l-15.3-26.4h30.5c9.4 0 17-7.6 16.9-17 0-9.3-7.6-16.9-16.9-16.9z" fill="#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1006"><path d="m195.6 41.7-134 422c.4.1.8.3 1.2.4 12.2 3.8 25.1-2.9 29-15.1L217.7 48.7l-22.1-7z" fill="#f15a24" /><path d="M173.6 34.8 47.7 435.1c-3.7 11.8 2.5 24.3 14 28.6l134-422-22.1-6.9z" fill="#f7931e" /><path fill="#1088e2" d="m217.2 49-83.7 266.3 61.4-31.2L264 64.9z" /><path fill="#0391ff" d="m264 64.9-69.1 219.2 63.7-32.4 53.7-170.4z" /><path fill="#0396ff" d="m312.3 81.3-53.7 170.4 64.3-32.6 38.2-121.2z" /><path fill="#3fa9f5" d="m361.1 97.9-38.2 121.2 76.6-38.9 19.7-62.5z" /><path d="m441.4 125.3-22.2-7.6-19.7 62.5 44.2-22.5c14-7.1 12.5-27.4-2.3-32.4z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1007"><path d="M209.7 433.6c-18.4 0-34.7-2.7-47.4-5.8-8.2-2-13.1-9.8-10.9-17.4 2.2-7.6 10.6-12.1 18.9-10.1 20.3 5 51.5 8.6 84.7-2.2 17.6-5.8 44.2-14.5 56-37.5 7.7-15.1 10.7-38.8-.9-55.3-12.3-17.5-32.7-21.6-56.3-26.3-26-5.2-55.4-11.1-74.9-37.2-28-37.5-13-83.6-8.9-91.1 13.2-24.2 35.1-42.8 63.4-53.7 28.1-10.9 60.5-13.4 93.7-7.4 8.4 1.5 13.8 9 12.1 16.7-1.7 7.7-9.8 12.7-18.2 11.1-54.1-9.9-102.4 7.9-123.2 45.6-1 2.6-13 36.6 6.6 62.8 12.5 16.8 32.7 20.8 56 25.5 26.5 5.3 56.5 11.3 75.7 38.7 18.1 25.7 14.5 60.1 2.9 82.8-17.2 33.8-52.5 45.3-73.6 52.2-19.6 6.3-38.6 8.6-55.7 8.6z" fill="#e9e9e9" /><path d="m424.8 253.9-53.5-32.4c-.5-.3-1.1.1-1.1.8v21.8H95.5c-5.9 0-10.6 5.5-10.6 12.3v12c0 6.8 4.8 12.3 10.6 12.3h274.6v18.8c0 .7.6 1.1 1.1.8l53.5-32.4c4.9-3 4.9-11 .1-14z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1008"><path d="M133.7 240.6h79.9l-39.9 69.1c-5.5 10.3-1.5 23.1 8.8 28.6 9.8 5.2 21.9 1.9 27.8-7.4l39.9-69.1 39.9 69.1c5.8 10.1 18.7 13.5 28.8 7.7 10.1-5.8 13.6-18.7 7.8-28.9l-40-69.1h79.9c11.7 0 21.1-9.5 21.1-21.1 0-11.7-9.5-21.1-21.1-21.1h-79.8l39.9-69.1c5.7-10.2 2-23.1-8.2-28.8-10-5.6-22.6-2.2-28.5 7.6l-39.9 69.1-39.9-69.1c-6.2-9.9-19.3-12.8-29.2-6.6-9.4 5.9-12.6 18-7.4 27.8l39.9 69.1h-79.9c-11.7 0-21.1 9.4-21.1 21.1.1 11.6 9.5 21.1 21.2 21.1z" fill="#3fa9f5" /><path d="M440.3 250c-11.4 0-20.8 9.3-20.8 20.8V379h-339V270.8c0-11.4-9.3-20.8-20.8-20.8-11.4 0-20.8 9.3-20.8 20.8v128.9c0 5.7 2.3 10.9 6.1 14.7.5.5 1 .9 1.5 1.3 1 .8 2.1 1.6 3.3 2.2 1.8 1 3.7 1.7 5.7 2.1 1.3.3 2.7.4 4.2.4h380.5c1.4 0 2.8-.1 4.2-.4 2-.4 3.9-1.1 5.7-2.1 1.2-.6 2.3-1.4 3.3-2.2.5-.4 1-.9 1.5-1.3 3.8-3.8 6.1-9 6.1-14.7V270.8c0-11.5-9.3-20.8-20.7-20.8z" fill="#62bee2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1009"><style>#icon-warnings-1009 .prefix__st2{fill:#707070}</style><path id="icon-warnings-1009_prefix__Layer_00000134940331101932734760000003625063363348333955_" d="M241 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8s22.8-10.2 22.8-22.8c0-9.5-5.7-17.6-13.9-21z" fill="#ff6464" /><path d="M271.9 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.6-10.3-40.7-26.3-52.8zm-39.8 104c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2h11.4c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.5-23.2 51.4-51.4 51.4z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path id="icon-warnings-1009_prefix___1_00000134948746520138197680000008760973766172937091_" class="prefix__st2" d="M296 100.9h36.8c2.1 0 3.9 1.7 3.9 3.9v4.6c0 2.1-1.7 3.9-3.9 3.9H296c-2.1 0-3.9-1.7-3.9-3.9v-4.6c0-2.1 1.8-3.9 3.9-3.9z" /><path id="icon-warnings-1009_prefix___1_00000041281907571917778400000004906923414509739935_" class="prefix__st2" d="M308.3 125.5V88.7c0-2.1 1.7-3.9 3.9-3.9h4.6c2.1 0 3.9 1.7 3.9 3.9v36.8c0 2.1-1.7 3.9-3.9 3.9h-4.6c-2.2 0-3.9-1.7-3.9-3.9z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1010"><path d="M259.6 203.1c-10.6-1.4-20.3 6-21.7 16.6-1.3 9.6 4.8 18.7 14.1 21.2 3.2.6 21.6 4.1 43.3 4.1 15.2 0 32-1.7 46.4-7.3 46.1-18 76.3.3 77.3 1 9.2 5.3 21 2.2 26.3-7 4.9-8.5 2.7-19.3-5.1-25.1-1.9-1.3-47.1-30.3-112.5-4.8-20.7 8-56.2 3.6-68.1 1.3z" fill="#8cc5ff" /><path d="M440.2 286.2c-1.9-1.3-47.1-30.4-112.5-4.8-20.7 8-56.2 3.6-68.2 1.3-10.5-1.5-20.3 5.8-21.8 16.3-1.4 9.7 4.8 18.9 14.3 21.4 3.2.7 21.6 4.1 43.3 4.1 15.2 0 32-1.7 46.4-7.3 46.1-18 76.3.3 77.3 1 8.9 5.9 20.8 3.4 26.7-5.4 5.8-8.8 3.4-20.8-5.5-26.6z" fill="#409eff" /><path d="M412.7 356.3c-9.7 5.3-13.2 17.5-7.8 27.2 1.2 2.1 1.1 4.7-.1 6.7-.9 1.6-2.2 2.4-3.8 2.4H95.9c-1.6 0-2.8-.8-3.8-2.4-1.2-2-1.3-4.5-.1-6.6l152.6-273.8c1.9-3.4 5.8-3.4 7.7 0l14.7 26.7c5.3 9.7 17.5 13.2 27.2 7.9 9.7-5.3 13.2-17.5 7.9-27.2l-14.7-26.6c-8-14.6-22.6-23.3-39-23.3s-30.9 8.7-38.9 23.3L57 364.2c-8 14.5-7.8 32.2.6 46.5 8.2 13.9 22.5 22.1 38.3 22.1H401c15.8 0 30.1-8.3 38.3-22.1 8.4-14.3 8.6-32 .6-46.5-5.3-9.7-17.5-13.2-27.2-7.9z" fill="#f15a24" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1011"><path d="M401.6 324c-9.4 4.1-15.6 10.7-19.2 17.8-2.8 5.4-10.9 4.8-12.6-1.1-4.8-15.7-4.2-32.8-1.2-53.7.8-5.3-4.6-9.4-9.6-7.3-31.6 14-39.3 45-42.1 68.8-.9 7.9-12.3 8.1-13.6.4-.2-1.7-.5-3.3-.7-4.8-.7-5.7-7.7-8-11.7-4-9.3 9.2-15 23.7-16.4 36.3-4.6 41.4 25.5 75.4 65.7 79.8 40.1 4.4 75.2-22.3 79.8-63.8 2.5-22.3-10.4-32.6-8.4-61.5.1-5.3-5.2-8.9-10-6.9z" fill="#ff7b15" /><path d="M365.1 401.8c-2.9 1.3-4.8 3.4-6.1 5.5-1.1 1.9-3.9 1.7-4.6-.5-1.5-5.1-1.3-10.6-.4-17.3.2-1.9-1.7-3.4-3.4-2.6-9.9 4.6-12.7 14.2-13.7 21.9-.4 2.8-4.5 2.8-4.8 0v-.1c-.2-2-2.8-2.8-4.2-1.4-2.9 3.1-4.8 7.8-5.3 11.9-1.5 13.9 8.6 25.3 22.1 26.8s25.3-7.6 26.8-21.5c.8-7.4-3.4-10.9-2.8-20.4-.1-1.7-2-3-3.6-2.3z" fill="#fb9b3b" /><path d="M199.2 49.9 74.1 444c.4.1.7.3 1.1.4 11.4 3.6 23.5-2.7 27.1-14.1L219.8 56.4l-20.6-6.5z" fill="#f15a24" /><path d="M178.6 43.4 61 417.3c-3.5 11 2.3 22.7 13 26.7L199.2 49.9l-20.6-6.5z" fill="#f7931e" /><path fill="#1088e2" d="m219.4 56.6-78.3 248.8 57.5-29.2 64.5-204.7z" /><path fill="#0391ff" d="m263.1 71.5-64.5 204.7L258 246l50.2-159.1z" /><path fill="#0396ff" d="M308.2 86.9 258 246l60.1-30.5 35.7-113.1z" /><path fill="#3fa9f5" d="m353.8 102.4-35.7 113.1 71.5-36.3 18.4-58.4z" /><path d="m428.8 127.9-20.8-7.1-18.4 58.4 41.3-21c13.1-6.6 11.7-25.6-2.1-30.3z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1012"><style>#icon-warnings-1012 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M71 182.6h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1H71c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path class="prefix__st0" d="M429 182.6h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path d="M358.1 137.3c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.1-77.8z" fill="#f6f6f6" /><path d="M142 339.6c0 40.8-33.2 67.5-73.9 64.6-14.5-1-24.9 9.3-24.9 18.9 0 9.6 10.4 18.7 24.9 17.6 60.7-4.4 110.4-40.2 110.4-101.1v-45.4l-36.5-.6v46zm293.1 63.9c-40.6 2.9-73.9-23.8-73.9-64.6v-44l-36.5-.6v44.6c0 60.9 45.9 98 110.4 101.1 14.5.7 25.7-8.7 25.7-18.3 0-9.5-11.1-19.2-25.7-18.2zm-183.4 46.8c-8.4 0-15.3-6.8-15.3-15.3V294.3H267V435c0 8.4-6.8 15.3-15.3 15.3z" style="fill:#79bbff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1013"><style>#icon-warnings-1013 .prefix__st0{fill:#79bbff}#icon-warnings-1013 .prefix__st2{fill:#d9ecff}</style><path class="prefix__st0" d="M144.3 468.6H302l-36.3-205.1z" /><path fill="#409eff" d="m312.6 63.7-83.7 56.5 1.8 137.8 35 5.5L302 468.6h184.8z" /><path class="prefix__st2" d="M262.1 70.8c7.6-10.2 5.4-24.7-4.8-32.3-10.2-7.6-24.7-5.4-32.3 4.8-.1.2-.2.3-.4.5-7.3 10.4-4.8 24.8 5.7 32.1 10.3 7.2 24.4 4.9 31.8-5.1z" /><path d="M175.5 320.7c7.6-10.2 5.4-24.7-4.8-32.3-10.2-7.6-24.7-5.4-32.3 4.8-.1.2-.2.3-.4.5-7.3 10.4-4.8 24.8 5.7 32.1 10.3 7.2 24.4 4.9 31.8-5.1zm27.9-196c10.8-14.1 8.2-34.2-5.8-45.1-14.1-10.8-34.2-8.2-45.1 5.8-.4.5-.8 1.1-1.2 1.7-9.9 14.7-6 34.7 8.7 44.6 14.1 9.5 33.1 6.5 43.4-7z" style="fill:#b3d8ff" /><circle class="prefix__st2" cx="146.4" cy="208.6" r="43.9" /><path class="prefix__st0" d="M113.5 342.4c-26-18.7-62.2-12.9-80.9 13.1-18.7 26-12.9 62.2 13.1 80.9s62.2 12.9 80.9-13.1 12.9-62.2-13.1-80.9z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1014"><path d="M264.9 241.6h83.3l-124.9 169V297.7h-71.5l154-208.3zM94.8 212.8H140l-67.8 91.8v-61.3H33.4L117 130.1zm326.6 3.6h45.2l-67.8 91.8v-61.4H360l83.6-113.2z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#f7ad44" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1015"><style>#icon-warnings-1015 .prefix__st1{fill:#e3e3e3}</style><path d="m57.6 363.6 37.2 78.3 38.7-78.3L94.8 322zm101.9 0 37.2 78.3 38.7-78.3-38.7-41.6zm101.9 0 37.2 78.3 38.6-78.3-38.6-41.6zm101.9 0 37.1 78.3 38.7-78.3-38.7-41.6z" style="fill:#4fc0f2" /><path class="prefix__st1" d="M71 191h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1H71c-27.8 0-50.3-22.5-50.3-50.3S43.2 191 71 191z" /><path class="prefix__st1" d="M429 191h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3S456.8 191 429 191z" /><path d="M358.1 145.7c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 29.9-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.1-77.8z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1016"><path d="M439.9 58.5c-11.7 0-21.1 9.5-21.1 21.1v319.6H81.2V79.6c0-11.7-9.5-21.1-21.1-21.2C48.5 58.5 39 68 39 79.6v340.7c0 11.7 9.4 21.1 21 21.2h379.9c11.7 0 21.1-9.5 21.1-21.1V79.6c0-11.6-9.4-21.1-21.1-21.1z" fill="#62bee2" /><path d="M133.4 240.1h79.9l-39.9 69.1c-5.5 10.3-1.5 23.1 8.8 28.6 9.8 5.2 21.9 1.9 27.8-7.4l39.9-69.1 39.9 69.1c5.8 10.1 18.7 13.5 28.8 7.7 10.1-5.8 13.6-18.7 7.8-28.9l-40-69.1h79.9c11.7 0 21.1-9.5 21.1-21.1 0-11.7-9.5-21.1-21.1-21.1h-79.8l39.9-69.1c5.7-10.2 2-23.1-8.2-28.8-10-5.6-22.6-2.2-28.5 7.6l-39.9 69.1-39.9-69.1c-6.2-9.9-19.3-12.8-29.2-6.6-9.4 5.9-12.6 18-7.4 27.8l39.9 69.1h-79.9c-11.7 0-21.1 9.4-21.1 21.1.1 11.6 9.5 21.1 21.2 21.1z" fill="#3fa9f5" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1017"><path d="M360.3 169.5c-12.3-42-51.2-72.8-97.3-72.8-55.4 0-100.4 44.3-101.3 99.5-25.7 3-45.8 24.9-45.8 51.5 0 28.6 23.2 51.8 51.8 51.8h184.9c36 0 65.2-29.2 65.2-65.2 0-33.4-25.2-60.9-57.5-64.8z" fill="#f6f6f6" /><path d="M198.4 195.8H94.8c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h103.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm59 2.3h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zm48.3 136H148.4c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.6 12.6-12.5 12.6zm79.5 34.6H228c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zM294 403.3H136.8c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6H294c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm-24.6-161.4H94.8c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h174.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1018"><style>#icon-warnings-1018 .prefix__st1{fill:#66b1ff}</style><circle cx="246.2" cy="305.3" r="76.1" fill="#409eff" /><path class="prefix__st1" d="M246.2 197.9c26.4 0 44.3 12.9 49.7 17 .4-4.6.7-10.4.7-17 .4-63.8-25.9-139.6-50.3-139.6-18.4 0-50.1 62.5-50.1 139.6 0 5.7.4 11.2.7 16.7 14.2-10.8 31.5-16.7 49.3-16.7z" /><path d="M155.9 363.2c-8.9-15.6-12.5-33.7-10.1-51.5-5.1 2.4-10.2 5.1-15.1 7.9C75.3 351 22.8 411.7 35 432.9c9.2 15.9 79.2 12.2 145.9-26.4 5-2.9 9.5-6 14.1-9-16.4-6.9-30.2-18.9-39.1-34.3z" fill="#79bbff" /><path class="prefix__st1" d="M369.2 315.4c-4.9-2.7-9.8-5.3-14.8-7.7 2.3 17.7-1.3 35.6-10.2 51-9 15.5-22.9 27.7-39.6 34.5 4.7 3.1 9.3 6.2 14.4 9.2 66.8 38.5 136.8 42.3 146 26.2 12.2-21.1-40.4-81.7-95.8-113.2z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1019"><style>#icon-warnings-1019 .prefix__st0{fill:#ccc}#icon-warnings-1019 .prefix__st1{fill:#999}#icon-warnings-1019 .prefix__st2{fill:#e6e6e6}#icon-warnings-1019 .prefix__st3{fill:#b3b3b3}</style><circle class="prefix__st0" cx="302.6" cy="191.5" r="30.5" /><circle class="prefix__st1" cx="255.4" cy="262.3" r="20.5" /><circle class="prefix__st1" cx="302.7" cy="368.9" r="13.9" /><circle class="prefix__st0" cx="182.6" cy="169.5" r="52.5" /><circle class="prefix__st2" cx="150.1" cy="286" r="39" /><circle class="prefix__st2" cx="326.6" cy="292.5" r="30.5" /><circle class="prefix__st3" cx="372.9" cy="366.9" r="16.1" /><circle class="prefix__st3" cx="228.3" cy="351.2" r="20.5" /><circle class="prefix__st0" cx="266.9" cy="306.9" r="11.9" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1020"><style>#icon-warnings-1020 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M239.3 295.1h.2c2.6-27.6 25.8-49.3 54.1-49.3 30 0 54.3 24.3 54.3 54.3 0 29-22.7 52.7-51.4 54.2v.1h-57.3c-16.4 0-29.7-13.3-29.7-29.7.1-16.3 13.4-29.6 29.8-29.6z" /><path class="prefix__st0" d="M450.7 295.1h-.2c-2.6-27.6-25.8-49.3-54.1-49.3-30 0-54.3 24.3-54.3 54.3 0 29 22.7 52.7 51.4 54.2v.1h57.3c16.4 0 29.7-13.3 29.7-29.7-.1-16.3-13.4-29.6-29.8-29.6z" /><path d="M408.8 268.4c-8.8-29.9-36.3-51.7-69.1-51.7-39.3 0-71.2 31.5-71.9 70.6-18.3 2.1-32.5 17.7-32.5 36.5 0 20.3 16.5 36.8 36.8 36.8h131.2c25.6 0 46.3-20.7 46.3-46.3 0-23.7-17.8-43.2-40.8-45.9z" fill="#f6f6f6" /><path d="M341.6 350.5h40.3l-60.5 81.9v-54.7h-34.7l74.7-101zm-84.3 22.3h21.5l-32.3 43.7v-29.2H228l39.8-53.9zm161.8 3.9h21.6l-32.4 43.8v-29.3h-18.4l39.8-53.9z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#f7ad44" /><path d="M157 41.9 50.2 378.4l.9.3c9.7 3.1 20.1-2.3 23.1-12.1L174.7 47.4 157 41.9z" fill="#f15a24" /><path d="M139.5 36.4 39.1 355.6c-3 9.4 2 19.4 11.1 22.8L157 41.9l-17.5-5.5z" fill="#f7931e" /><path fill="#1088e2" d="m174.3 47.7-66.8 212.4 49-24.9 55.1-174.8z" /><path fill="#0391ff" d="m211.6 60.4-55.1 174.8 50.8-25.8 42.8-135.9z" /><path fill="#0396ff" d="m250.1 73.5-42.8 135.9 51.3-26.1L289 86.7z" /><path fill="#3fa9f5" d="m289 86.7-30.4 96.6 61.1-31 15.7-49.8z" /><path d="m353.1 108.5-17.7-6-15.7 49.8 35.3-17.9c11.1-5.6 9.9-21.9-1.9-25.9z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1021"><path fill="#f58502" d="m267.5 380.5 182.9-47-322.1-68.8 70.8 59.8-179.5 47.9 261.8 100.2 199-37.4z" /><path d="M316.2 38.8c22.5 6.4 43.9 16.1 63.5 28.8 13.5 9.7 27.2 18.7 39.4 28.9 9.2 7.3 13.9 18.9 12.6 30.5-1.7 19.7-3 39.4-3.9 59.1-.1 3.4 1.6 9.1 3.8 9.8 12.6 3.3 20.3 16.2 17.3 28.9-.6 3.4-2 6.5-4.2 9.2l-19-3.1c-1.6 6.4-3.6 12.6-6 18.7l-37.2 82c-2.4 4.9-6.4 8.8-11.2 11.3-17-4.1-33.2-11-47.8-20.6-7.8-11.9 4.3-20.5 5-31.6l-144-65.2c-7.4 8.8-16.7 24.9-20.4 24.7-17.3-4.5-33.8-11.9-48.6-22-1.4-6.1-.7-12.4 1.8-18.1 4.5-12.2 9.6-23.5 14.8-35.1 9.7-21.5 19.5-42.9 30.1-64.2l-13.8-11.3c.6-2.6 1.7-5.1 3.3-7.3 9.8-9.8 19.9-16.3 34.5-8.1 1.8.8 6.8-1.2 9-3.4 11.6-10.6 22.7-21.9 33.1-33.7 14.9-17.7 39.2-24.3 61-16.5 8.8 2.2 17.7 5 26.5 7.4l.4.9z" fill="#666" /><path d="M209.3 100.7C267 143.1 333 173 403 188.4c2-18.9 3.1-36.1 6-52.6 2.9-12.7-3.7-25.7-15.7-30.8-30.1-15.2-60.4-30.2-90.9-44.4-10.2-4.1-20.8-7.1-31.7-8.8-4.9-1.1-10-.2-14.2 2.5-16.4 14.1-31 29.8-47.2 46.4z" fill="#e6e6e6" /><path d="M190.2 176.3c5.2 2.7 10.6 4.8 16.2 6.3 4.5.9 9.2-.1 12.9-2.9 1.7-1.9.8-8.9-1.5-11.6-9.5-11.1-19.6-21.6-30.3-31.6-5.3-4.9-12.6-7.7-18 .4-8.8 11.5-9.1 20-.4 26.4 6.9 4.9 14 8.5 22 13h-.9zM361 253.6c8.1 3 16.3 5.5 24.6 7.6 12.2 2.5 14-7.6 17.2-15.6 3.3-8 .8-13.6-6.1-14.5-17.3-2.4-34.7-3.4-52.1-3.2-7.9.2-9.4 9.8-2.8 14.8 6.2 4 12.6 7.6 19.2 10.8v.1z" style="fill:#fbb03b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1022"><style>#icon-warnings-1022 .prefix__st0{fill:gold}</style><path class="prefix__st0" d="m137.7 310.5 57.7-77.4c5.2-7 5.5-16.6.8-23.9L139 94.3c-6.2-9.6-19.1-12.3-28.6-5.9-9.5 6.3-12.2 19.2-5.9 28.8l49.2 102.7-56.3 75.4c-4.5 6-5.4 14-2.4 20.8l26.5 60.9 45-.1-28.8-66.4zm106.7 0 57.7-77.4c5.2-7 5.5-16.6.8-23.9l-57.2-115c-6.2-9.5-18.9-12.2-28.4-6l-.1.1c-9.5 6.4-12.2 19.2-5.9 28.8l49.2 102.7-56.2 75.4c-4.5 6-5.4 14-2.4 20.8l26.4 60.7 45-.1-28.9-66.1zm112.3 0 57.7-77.4c5.2-7 5.5-16.6.8-23.9L358 94.2c-6.2-9.5-18.9-12.2-28.4-6l-.1.1c-9.5 6.4-12.2 19.2-5.9 28.8l49.2 102.7-56.2 75.4c-4.5 6-5.4 14-2.4 20.8l26.3 60.5 45-.1-28.8-65.9z" /><path class="prefix__st0" d="M419 415.1H81c-10.6 0-19.2-8.6-19.2-19.2s8.6-19.2 19.2-19.2h338c10.6 0 19.2 8.6 19.2 19.2 0 10.5-8.6 19.2-19.2 19.2z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1023"><style>#icon-warnings-1023 .prefix__st5{fill:#3fa9f5}#icon-warnings-1023 .prefix__st6{fill:#abdcff}</style><path d="m184.7 30.4-134 422c.4.1.8.3 1.2.4 12.2 3.8 25.1-2.9 29-15.1L206.8 37.4l-22.1-7z" fill="#f15a24" /><path d="M162.7 23.5 36.8 423.8c-3.7 11.8 2.5 24.3 14 28.6l134-422-22.1-6.9z" fill="#f7931e" /><path fill="#1088e2" d="M206.4 37.7 122.6 304l61.5-31.2 69.1-219.2z" /><path fill="#0391ff" d="m253.2 53.6-69.1 219.2 63.6-32.3L301.5 70z" /><path fill="#0396ff" d="m301.5 70-53.8 170.5 64.3-32.7 38.2-121.2z" /><path class="prefix__st5" d="M350.2 86.6 312 207.8l76.6-38.9 19.7-62.5z" /><path class="prefix__st6" d="m430.6 114-22.2-7.6-19.7 62.5 44.2-22.5c13.9-7 12.5-27.4-2.3-32.4z" /><path class="prefix__st5" d="M345 267.5c-31.3-3.8-49.8-.5-57.7 3.3-15.7 6-24 15.3-24 28.7 0 14.8 17.1 26.9 38.2 26.9 2.2 0 4.3-.1 6.4-.4-11.1-2.6-15.1-13.6-15.1-17.1 0-8.2 4.9-16.5 19.2-18.9 0 0 11.5-2.9 32.5 1.5 29.7 8.6 38.4 18.9 46.4 34.6 10 24.9 1.5 58-14.5 76.8-30.5 35.9-106.1 47.5-106.1 47.5 76.7-14.5 111-48.5 117.8-92.6 4.4-58.4-67-72.2-78.1-36.1 9.9-6.7 20.7-5.3 31.6-1.8 24.9 13.2 21.4 34.1 19.1 45.6-5.1 25.9-24.9 51-54.1 66.3-30.6 13.3-71 19.4-84.5 21.8h82.4c6.8-.3 36.3-1.8 52.1-6.3 43.1-12.4 85.7-41.9 85.7-89.7.2-47.9-47.8-84.1-97.3-90.1z" /><path class="prefix__st6" d="M262.9 434.1c-9 5.5-39.8 16-39.8 16s28.5-2 51.7-9.7c20.8-6.9 30.5-14 40.3-25.1 8.8-10 17.3-40.8-14-55.5-18.2-8.5-43.6-8.7-54 1.7-12.4 12.3-2.8 23.1-2.8 23.1s3.7-9.9 15.9-11.5c3.3-.5 15.9.1 22.5 4.7 5 3.5 12.9 9.7 8.4 25.5-3.5 11.9-12.4 21.2-28.2 30.8z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1024"><style>#icon-warnings-1024 .prefix__st0{fill:#ffb55a}</style><path class="prefix__st0" d="m86.9 284.5 156.8-169.3L413.1 272 256.3 441.3z" /><path class="prefix__st0" d="M134.7 162.9h230.7v230.7H134.7z" /><circle cx="250" cy="278.2" r="115.6" fill="#ffcf00" /><path d="M355.8 306.9V92.7c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c.1-21.5-10.3-40.6-26.3-52.8z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path d="M316 411c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V92.7c0-10.7 8.6-19.2 19.2-19.2h11.4c10.7 0 19.2 8.6 19.2 19.2v11.5h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9H341v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8H341v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8H341v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6 0 28.5-23.1 51.5-51.4 51.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#fff" /><path d="M325 339.8V203c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8s22.8-10.2 22.8-22.8c0-9.5-5.8-17.6-13.9-21z" fill="#ff6464" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1025"><path d="M254.4 456c-9.7 0-17.5-7.9-17.5-17.5v-254c0-9.7 7.9-17.5 17.5-17.5 9.7 0 17.5 7.9 17.5 17.5v253.9c0 9.7-7.8 17.6-17.5 17.6z" fill="#a67c52" /><path d="m397 315.3-51.2-68.5-15.1-20.2c-25-5.1-43.8-27.1-43.8-53.6 0-1.6.1-3.2.2-4.7l-8.8-11.8c-14.8-19.9-44-19.9-58.8 0L152 246.7l-51.2 68.5c-18.7 25-1.3 61.2 29.4 61.2h237.2c30.9.1 48.3-36.1 29.6-61.1z" fill="#67c23a" /><path d="M357.9 224.6c-12.6 3.9-27.2 3.4-42-3.4-10-4.7-18.2-12.7-22.9-22.7-8.9-18.8-7.4-37.4.4-52l-26.4-32c-9.4-11.4-26.9-11.4-36.3 0L172 185.6l-40.6 49.2c-14.8 18-1 43.9 23.3 43.9h188c24.4 0 38.1-26 23.3-43.9l-8.1-10.2z" fill="#aff3d8" /><path d="m315 127.5-18.7-27.4-32.7-48c-7.2-10.6-21.3-10.6-28.5 0l-32.7 48-24.8 36.4c-9.1 13.3-.6 32.5 14.3 32.5h95.9c1.8-17.8 12.3-33 27.2-41.5z" fill="#f0f9eb" /><path d="M388.6 124.1c-6.9 3-11.4 7.8-14.1 13-2.1 4-7.9 3.5-9.2-.7-3.6-11.4-3.1-23.9-.9-39.2.6-3.9-3.4-6.9-7-5.3-23 10.2-28.7 32.8-30.7 50.2-.7 5.7-9 6-9.9.3-.2-1.2-.4-2.4-.5-3.6-.5-4.2-5.6-5.9-8.5-2.9-6.8 6.7-11 17.3-12 26.5-3.3 30.2 18.6 54.9 47.9 58.2 29.3 3.2 54.8-16.3 58.1-46.6 1.8-16.2-7.6-23.8-6.1-44.8.2-4-3.6-6.6-7.1-5.1z" fill="#ff7b15" /><path d="M361.9 180.9c-2.1 1-3.5 2.5-4.4 4-.8 1.4-2.9 1.2-3.3-.3-1.1-3.7-.9-7.7-.2-12.6.2-1.4-1.2-2.5-2.5-1.9-7.2 3.3-9.3 10.3-10 16-.3 2.1-3.3 2.1-3.6 0v-.1c-.2-1.5-2-2.1-3.1-1-2.2 2.3-3.5 5.7-3.8 8.7-1.1 10.1 6.2 18.5 16.1 19.5 9.8 1.1 18.4-5.5 19.5-15.6.6-5.4-2.5-7.9-2.1-14.9 0-1.4-1.3-2.4-2.6-1.8z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1026"><path d="M380.1 318.7c-18.9 0-31.2-2.8-45.6-11.5-2.7-1.7-6-.5-7.5 2.8-6 12.9-11.6 26.8-16.5 41.1-4.1 12.2-18.7 9.6-20-3.5-3.4-33.1-8.8-66-16.1-98.2-15.7-69.9-53.2-138.1-121.7-189.8-5.1-3.8-10.9 3.3-7.9 9.6 29 61.6 41.2 125.8 48.2 192.9 2.6 24.6 4 50.2 4.1 75.4.1 20.6-22.3 27.1-29.6 8.6-.1-.3-.2-.6-.4-.9-14.7-36.7-37.2-71.3-69.5-100-4.7-4.2-10.8 1.9-8.6 8.5 14.3 43.1 23.5 81.1 27.7 114.2 4.3 34.6 2 66.1-7 94.5h182v.1h119.7c-19.2-45.4-8-111.3-2.4-138 1.1-5.1-2.5-9.8-6.7-8.7-7.3 1.8-14.7 2.8-22.2 2.9z" fill="#66b28a" /><path d="M442.9 153.5c-9.9 4.3-16.5 11.4-20.3 18.7-3 5.7-11.4 5.1-13.4-1.1-5.2-16.5-4.5-34.6-1.3-56.7.8-5.6-4.9-10-10.1-7.7-33.3 14.8-41.5 47.4-44.4 72.6-1 8.3-13 8.6-14.4.4-.3-1.8-.5-3.5-.7-5.2-.7-6-8-8.5-12.4-4.3-9.8 9.7-15.9 25-17.3 38.4-4.8 43.7 26.9 79.5 69.3 84.1s79.3-23.6 84.1-67.4c2.6-23.5-11-34.4-8.9-64.9.3-5.2-5.2-9.1-10.2-6.9z" fill="#ff7b15" /><path d="M404.3 235.6c-3.1 1.4-5.1 3.6-6.4 5.9-1.1 2.1-4.1 1.8-4.8-.5-1.6-5.3-1.3-11.2-.3-18.3.3-2-1.8-3.6-3.6-2.7-10.5 4.8-13.4 14.9-14.5 23.1-.4 3-4.8 3-5.2 0v-.2c-.3-2.2-2.9-3-4.4-1.5-3.1 3.3-5.1 8.2-5.6 12.6-1.6 14.7 9 26.7 23.3 28.3 14.2 1.6 26.6-7.9 28.3-22.6.9-7.8-3.6-11.5-3-21.6 0-1.9-2-3.3-3.8-2.5z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1027"><path d="M170.2 275.4c-8.3 5.2-10.8 16.2-5.6 24.5 5 7.9 15.1 10.6 23.3 6.2l44-25.4v50.8c0 9.8 7.9 17.8 17.7 17.8 9.8 0 17.8-7.9 17.8-17.7v-50.8l44 25.4c8.7 4.6 19.4 1.3 24-7.4 4.3-8.2 1.6-18.4-6.2-23.3l-44-25.4 44-25.4c8.5-4.9 11.4-15.8 6.5-24.2-4.9-8.5-15.8-11.4-24.3-6.5l-44 25.4v-50.8c0-9.8-7.9-17.7-17.7-17.7-9.8 0-17.7 7.9-17.7 17.7v50.8L188 194c-8.7-4.6-19.4-1.3-24 7.4-4.3 8.2-1.6 18.4 6.2 23.3l44 25.4-44 25.3z" fill="#4fc0f2" /><path d="M418.6 142.1 258.9 49.6c-5.5-3.2-12.3-3.2-17.8 0L81.4 142.1c-5.5 3.2-8.9 9.1-8.9 15.4v185c0 6.4 3.4 12.2 8.9 15.4l159.7 92.5c5.5 3.2 12.3 3.2 17.8 0l159.7-92.5c5.5-3.2 8.9-9.1 8.9-15.4v-185c0-6.4-3.4-12.2-8.9-15.4zm-26.7 190.1L250 414.4l-141.9-82.2V167.8L250 85.6l141.9 82.2v164.4z" fill="#7fc6f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1028"><style>#icon-warnings-1028 .prefix__st4{fill:#282d33}</style><path d="M132 73.6c-34.8-15.4-75.4.4-90.8 35.2-15.3 34.8.4 75.4 35.2 90.8 34.8 15.3 75.4-.4 90.8-35.2 15.3-34.8-.5-75.5-35.2-90.8z" fill="#f7931e" /><path d="M248.3 394.3c-22.4.1-44.6-4.6-65.1-13.6C113.1 349.8 74.2 274 90 199c15.8-75 82.1-128.6 158.7-128.5 54.7.1 105.6 27.8 135.4 73.6 29.8 45.8 34.6 103.5 12.7 153.6-25.9 58.7-84.2 96.7-148.5 96.6zm0 0" fill="#8cc5ff" /><path d="m409.3 250.9-21.4 16.6-38.6 32.5-1.7-31.5-25 4.5-2.8-29-17.2 9.2-5-3.8-14.8-14.9-4.7 20.2 11.4 11.4-49.8 48.2-13.5 2.1v-26l9.7-39.3-17.7-8.6-1.8-16.9 22.4-23.5 16.6 3.1 6.6 10.2 24.6 4.1-18.5-24.1-18.8-12.3 1.6-6.6 24.6-2.7-2.7-16.4 27.8-9.3 18 16.8 39.9 4.5s17.8-1.4 37.6-2.7c12.2 26.3 16.8 55.5 13.2 84.2zM204.2 76.4l-14 10.3-25 19.3c-.7.5-1 1.4-.9 2.2l2.9 19.9c.2.8.7 1.5 1.4 1.8.8.3 1.6.2 2.3-.2l14.2-9.9 7.7 27.5-44.9 14.6-19.1-6.3c-.9-.3-1.8 0-2.5.6l-8.8 9.4c-.5.6-.8 1.4-.6 2.2l5.5 20.8-15.6-17.6-2.6-9.2c18.9-42.1 55.6-73.4 100-85.4zm-85.4 169.4L117 216l25.9-23.6 22.9 51.4-61.5 52v-18l14-31.1c.2-.2.4-.5.5-.9z" style="fill:#34ca9d" /><path d="M219.3 135.8 218 95.6c28.1-1.6 44.7 2.6 50.9 4.6l-20.2 27.6-29.4 8z" fill="#f2f2f2" /><path class="prefix__st4" d="M118 430.7c-13 0-24.2-2.7-33-8.4-4.4-2.8-4.9-9.1-1.1-12.7 2.8-2.6 6.9-3 10.2-.9 34.2 21.8 132-16.7 234.4-114.5 49.2-46.8 88.6-97.7 111.2-143.4 21.1-42.5 24.6-75.5 10.3-90.7-16.2-17.1-57.7-11.4-108.8 14.7-4 2-8.8.5-10.9-3.4-2.2-4-.6-9.1 3.5-11.1C393.2 29.8 439.7 25.6 461.9 49c19.8 20.8 17.2 59.6-7.5 109.3-23.4 47.1-64.1 99.7-114.7 147.8-81.6 78-167.6 124.6-221.7 124.6zm0 0" /><path d="M140.3 466c-17.1 0-32.6-10.3-39.2-26.1-6.6-15.8-2.9-34.1 9.2-46.2 12.1-12.1 30.4-15.7 46.2-9.2 15.8 6.6 26.2 22 26.1 39.2 0 23.3-18.9 42.3-42.3 42.3z" fill="#e6e6e6" /><path d="M148.3 423.6c-5.4 0-10.3-3.2-12.4-8.2-2.1-5-.9-10.7 2.9-14.6 3.8-3.8 9.6-5 14.6-2.9s8.2 6.9 8.2 12.4c.1 7.3-5.9 13.3-13.3 13.3zm17.4 13.8c-2.7 0-5.1-1.6-6.2-4.1-1-2.5-.5-5.4 1.4-7.3 1.9-1.9 4.8-2.5 7.3-1.4 2.5 1 4.1 3.5 4.1 6.2.1 3.6-2.9 6.6-6.6 6.6z" style="fill:#999" /><path class="prefix__st4" d="m55.5 405.3-.3-.3c-4-3-4.3-9-.6-12.5 2.9-2.7 7.3-2.9 10.4-.6l.1.1c3.2 2.4 4.2 6.8 2.4 10.3-2.3 4.6-8 6-12 3zm-23-27.8c-.1-.1-.1-.3-.2-.4-2-4.7.9-10 5.9-11.1 3.9-.8 7.7 1.2 9.3 4.9 0 .1 0 .1.1.2 1.5 3.5.3 7.6-2.9 9.8-4.3 2.9-10.2 1.3-12.2-3.4zm-6.8-36.2c-.1-.1-.1-.3-.2-.4-2-4.7.9-10 5.9-11.1 3.9-.8 7.7 1.2 9.3 4.9 0 .1 0 .1.1.2 1.5 3.5.3 7.6-2.9 9.8-4.3 2.9-10.2 1.3-12.2-3.4zm6.8-33.7c-.1-.1-.1-.3-.2-.4-2-4.7.9-10 5.9-11.1 3.9-.8 7.7 1.2 9.3 4.9 0 .1 0 .1.1.2 1.5 3.5.3 7.6-2.9 9.8-4.3 2.9-10.2 1.3-12.2-3.4zm14.6-37.9c-.1-.1-.1-.3-.2-.4-2-4.7.9-10 5.9-11.1 3.9-.8 7.7 1.2 9.3 4.9 0 .1 0 .1.1.2 1.5 3.5.3 7.6-2.9 9.8-4.3 3-10.2 1.3-12.2-3.4z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1029"><path d="M250 43.7c115.6 0 209.4 92.3 209.4 206.3 0 79.6-45.8 128.5-112.8 150.7v23.2c.1 16.9-12.8 31-29.6 32.4-16.8 1.4-31.8-10.5-34.4-27.1l-.4-3.3-.1 2.5c-2 16.5-16.4 28.5-33 27.6-16.5-.9-29.5-14.6-29.6-31.1l.1-.9c0 17.8-14.4 32.2-32.2 32.2-17.8 0-32.2-14.4-32.2-32.2v-22.6c-68-22-114.5-71.1-114.5-151.3C40.6 136 134.4 43.7 250 43.7zm-.6 258.4c-10.2 0-31.6 16.3-31.6 40.9 0 23.1 27.8 23.9 31.2 23.9h.3s32.9.8 32.9-23.9c0-24.6-22.6-40.9-32.8-40.9zm-96-145.8c-35.6 0-64.4 29-64.4 64.8s28.8 64.8 64.4 64.8 64.4-29 64.4-64.8c.1-17.1-6.7-33.6-18.8-45.7-12.1-12.2-28.5-19.1-45.6-19.1zm193.2 0c-35.6 0-64.4 29-64.4 64.8s28.8 64.8 64.4 64.8c35.6 0 64.4-29 64.4-64.8.1-17.1-6.7-33.6-18.8-45.7a63.92 63.92 0 0 0-45.6-19.1zm0 0" fill="#ccc" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1030"><path d="M244.5 182.1a16.4 16.4 0 0 0-22.2 5.9l-14.1 24.4-14-24.4c-4.5-7.7-14.4-10.4-22.2-5.9-7.7 4.5-10.4 14.4-6 22.2l14.1 24.4H152c-9 0-16.2 7.3-16.2 16.2 0 9 7.3 16.2 16.2 16.2h28.2l-14.1 24.4c-4.4 7.8-1.8 17.7 6 22.2a16.4 16.4 0 0 0 22.2-5.9l14.1-24.4 14.1 24.4c4.5 7.7 14.4 10.4 22.2 5.9 7.7-4.5 10.4-14.4 6-22.2l-14.1-24.4h28.2c9 0 16.2-7.3 16.2-16.2s-7.3-16.2-16.2-16.2h-28.2l14.1-24.4c4.2-7.8 1.5-17.7-6.2-22.2zm60.6 51.5c8.7 2.2 17.5-3.1 19.7-11.8l5.1-20.4c2.3-8.7-2.9-17.5-11.6-19.8-8.7-2.3-17.5 2.9-19.8 11.6 0 .1-.1.2-.1.3l-5.1 20.4c-2.2 8.7 3.1 17.5 11.8 19.7zm33.8 41.6c8.7 2.2 17.5-3.1 19.7-11.8l5.1-20.4c2.4-8.6-2.7-17.6-11.4-19.9-8.6-2.4-17.6 2.7-19.9 11.4-.1.2-.1.5-.2.7l-5.1 20.4c-2.1 8.6 3.1 17.4 11.8 19.6zm-44.8 44.3c8.7 2.2 17.5-3.1 19.7-11.8l5.1-20.4c2.3-8.7-2.9-17.5-11.6-19.8-8.7-2.3-17.5 2.9-19.8 11.6 0 .1-.1.2-.1.3l-5.1 20.4c-2.2 8.8 3.1 17.6 11.8 19.7z" style="fill:#4fc0f2" /><path d="M418.6 142.1 258.9 49.6c-5.5-3.2-12.3-3.2-17.8 0L81.4 142.1c-5.5 3.2-8.9 9.1-8.9 15.4v185c0 6.4 3.4 12.2 8.9 15.4l159.7 92.5c5.5 3.2 12.3 3.2 17.8 0l159.7-92.5c5.5-3.2 8.9-9.1 8.9-15.4v-185c0-6.4-3.4-12.2-8.9-15.4zm-26.7 190.1L250 414.4l-141.9-82.2V167.8L250 85.6l141.9 82.2v164.4z" fill="#7fc6f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1031"><style>#icon-warnings-1031 .prefix__st2{fill:#4fc0f2}</style><path d="M412.5 173.2h-.5c-4.7-50.5-47.1-90.1-98.9-90.1-54.9 0-99.3 44.5-99.3 99.3 0 53 41.6 96.4 94 99.2v.1h104.7c29.9 0 54.3-24.3 54.3-54.3s-24.4-54.2-54.3-54.2z" fill="#e3e3e3" /><path d="M351.1 201c-16-54.6-66.4-94.5-126.3-94.5-71.8 0-130.2 57.6-131.6 129-33.4 3.9-59.3 32.3-59.3 66.9 0 37.1 30.2 67.3 67.3 67.3H341c46.7 0 84.6-37.8 84.6-84.6 0-43.4-32.6-79.2-74.5-84.1z" fill="#f6f6f6" /><path class="prefix__st2" d="M160.8 276.2c-3 0-5.9-3-5.9-5.9 3-32.6 25.2-59.3 56.3-66.7 31.1-7.4 63.7 5.9 80 34.1v-11.9c0-1.5 1.5-3 3-4.4 1.5-1.5 3-1.5 5.9 0 1.5 1.5 3 3 3 4.4v26.7c0 3-3 5.9-5.9 5.9h-26.7c-3 0-5.9-3-5.9-5.9 0-3 3-5.9 5.9-5.9h14.8c-11.9-23.7-40-38.5-68.2-32.6-28.2 5.9-48.9 29.6-50.4 57.8.1 3-2.9 4.4-5.9 4.4zm69.7 74.1c-14.8 0-28.2-4.4-41.5-11.9-8.9-5.9-16.3-14.8-22.2-23.7v11.9c0 3-3 4.4-5.9 4.4-3 0-4.4-1.5-4.4-4.4v-26.7c0-3 3-5.9 5.9-5.9H189c3 0 5.9 3 5.9 5.9 0 3-3 5.9-5.9 5.9h-14.8c13.3 25.2 41.5 38.5 69.7 34.1 28.2-4.4 48.9-29.6 50.4-57.8 0-3 3-4.4 5.9-4.4 3 0 4.4 3 4.4 5.9-3 37.1-35.6 66.7-74.1 66.7zm0 0" /><path class="prefix__st2" d="M230.5 353.3c-14.8 0-29.6-4.4-43-13.3-7.4-4.4-13.3-10.4-17.8-16.3v3c0 4.4-3 7.4-8.9 7.4s-7.4-3-7.4-7.4V300c0-4.4 3-8.9 8.9-8.9H189c4.4 0 8.9 3 8.9 8.9 0 4.4-3 8.9-8.9 8.9h-10.4c13.3 20.7 38.5 32.6 63.7 28.2 26.7-5.9 45.9-28.2 48.9-54.8 0-4.4 4.4-7.4 7.4-7.4 4.4 0 8.9 4.4 8.9 8.9-4.4 38.4-37 69.5-77 69.5zm-66.7-48.9 5.9 8.9c5.9 8.9 13.3 16.3 22.2 22.2 11.9 7.4 25.2 11.9 38.5 11.9 37 0 68.2-29.6 71.1-65.2 0-1.5-1.5-3-1.5-3-1.5 0-3 1.5-3 1.5-3 29.6-23.7 54.8-53.3 60.8-29.6 5.9-59.3-8.9-72.6-35.6l-1.5-4.4H189c1.5 0 3-1.5 3-3s-1.5-3-3-3h-28.2c-1.5 3-1.5 4.4-1.5 4.4v26.7c0 1.5 1.5 1.5 3 1.5s3-1.5 3-3v-20.7h-1.5zm-3-25.2c-4.4 0-8.9-4.4-8.9-8.9 3-34.1 26.7-62.2 59.3-69.6 29.6-7.4 59.3 4.4 78.5 28.2v-3c0-3 1.5-5.9 4.4-7.4 3-1.5 5.9-1.5 8.9 0 3 3 4.4 4.4 4.4 7.4v26.7c0 4.4-3 8.9-8.9 8.9H272c-4.4 0-8.9-3-8.9-8.9s3-8.9 8.9-8.9h8.9C269 223 242.4 212.6 218.7 217c-26.7 5.9-47.4 28.2-48.9 54.8-.1 4.4-4.5 7.4-9 7.4zm69.7-74.1c-5.9 0-10.4 0-16.3 1.5-29.6 7.4-51.9 32.6-54.8 63.7 0 1.5 1.5 3 1.5 3v3-3c1.5 0 1.5-1.5 3-1.5 3-29.6 23.7-54.8 53.3-60.8 29.6-5.9 59.3 8.9 72.6 35.6l1.5 4.4H272c-1.5 0-3 1.5-3 3s1.5 3 3 3h26.7c1.5 0 3-1.5 3-3v-28.2c0-1.5 0-1.5-1.5-1.5h-3l-1.5 1.5v23.7l-5.9-8.9c-11.9-22.2-35.6-35.5-59.3-35.5zm0 0" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1032"><path d="M412.5 173.2h-.5c-4.7-50.5-47.1-90.1-98.9-90.1-54.9 0-99.3 44.5-99.3 99.3 0 53 41.6 96.4 94 99.2v.1h104.7c29.9 0 54.3-24.3 54.3-54.3s-24.4-54.2-54.3-54.2z" fill="#e3e3e3" /><path d="M351.1 201c-16-54.6-66.4-94.5-126.3-94.5-71.8 0-130.2 57.6-131.6 129-33.4 3.9-59.3 32.3-59.3 66.9 0 37.1 30.2 67.3 67.3 67.3H341c46.7 0 84.6-37.8 84.6-84.6 0-43.4-32.6-79.2-74.5-84.1z" fill="#f6f6f6" /><path d="M353.6 358.7c0-9.7-2.5-18.5-7.2-26.2 1.4-2.2 1.9-5 1.9-7.7 0-9.1-7.2-16.3-16.3-16.3-3.3 0-6.3 1.1-8.8 2.8-6.9-3.3-14.3-5-22.3-5-29.2 0-52.7 23.7-52.7 52.7-.3 29 23.4 52.4 52.4 52.4 3.9 0 7.4-.3 11-1.1 4.4 4.7 10.5 7.4 17.4 7.4 13.5 0 24.3-10.8 24.3-24.3 0-5.2-1.7-9.9-4.4-13.8 3-6.2 4.7-13.4 4.7-20.9z" fill="#4fc0f2" /><path d="M331.1 394c-4 0-7.1-3.4-7.1-7.1 0-1 1-2 2-2s2 1 2 2c0 1.7 1.3 3 3 3s3-1.3 3-3-1.3-3-3-3c-1 0-2-1-2-2s1-2 2-2c1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 1-1 2-2 2s-2-1-2-2c0-4 3.4-7.1 7.1-7.1 3.7 0 7.1 3.4 7.1 7.1 0 2-.7 3.7-2 5 1.3 1.3 2 3 2 5 0 4.1-3.1 7.1-7.1 7.1zm-30.2-51.8c-11 0-19.8 8.9-19.8 19.8s8.9 19.8 19.8 19.8 19.8-8.9 19.8-19.8-8.9-19.8-19.8-19.8zm0 30.6c-5.9 0-10.7-4.8-10.7-10.7s4.8-10.7 10.7-10.7 10.7 4.8 10.7 10.7-4.8 10.7-10.7 10.7z" style="fill:#fff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1033"><path d="M391.8 159.9h-.4c-4.1-44.2-41.2-78.8-86.5-78.8-48 0-86.9 38.9-86.9 86.9 0 46.4 36.4 84.3 82.2 86.8v.1h91.6c26.2 0 47.5-21.3 47.5-47.5s-21.3-47.5-47.5-47.5z" fill="#e3e3e3" /><path d="M338.1 184.2c-14-47.8-58.1-82.7-110.5-82.7-62.8 0-113.9 50.4-115.1 112.9-29.2 3.4-51.9 28.3-51.9 58.5 0 32.5 26.4 58.9 58.9 58.9h209.8c40.9 0 74-33.1 74-74 0-38-28.5-69.3-65.2-73.6z" fill="#f6f6f6" /><path d="M286.3 331.8c0-5.9-4.8-10.7-10.7-10.7h-18.3l9.2-15.9c2.9-5.1 1.2-11.7-3.9-14.6-5.1-2.9-11.7-1.2-14.6 3.9l-9.2 15.8-9.2-15.8c-3-5.1-9.5-6.9-14.6-3.9-5.1 3-6.9 9.5-3.9 14.6l9.2 15.9H202c-5.9 0-10.7 4.8-10.7 10.7 0 5.9 4.8 10.7 10.7 10.7h18.3l-9.2 15.9c-3 5.1-1.2 11.7 3.9 14.6 5.1 3 11.7 1.2 14.6-3.9l9.2-15.9 9.2 15.9c3 5.1 9.5 6.9 14.6 3.9s6.9-9.5 3.9-14.6l-9.2-15.9h18.3c5.9 0 10.7-4.8 10.7-10.7zm-120 24.7c0-4.1-3.3-7.5-7.5-7.5H146l6.4-11.1c2.1-3.6.8-8.2-2.7-10.2-3.6-2.1-8.2-.8-10.2 2.7l-6.4 11.1-6.4-11.1c-2.1-3.6-6.6-4.8-10.2-2.7-3.6 2.1-4.8 6.6-2.7 10.2l6.4 11.1h-12.8c-4.1 0-7.5 3.3-7.5 7.5s3.3 7.5 7.5 7.5h12.8l-6.4 11.1c-2.1 3.6-.8 8.2 2.7 10.2 3.6 2.1 8.2.8 10.2-2.7l6.4-11.1 6.4 11.1c2.1 3.6 6.6 4.8 10.2 2.7 3.6-2.1 4.8-6.6 2.7-10.2L146 364h12.8c4.2 0 7.5-3.3 7.5-7.5zm217.4 0c0-4.1-3.3-7.5-7.5-7.5h-12.8l6.4-11.1c2.1-3.6.8-8.2-2.7-10.2-3.6-2.1-8.2-.8-10.2 2.7l-6.4 11.1-6.4-11.1c-2.1-3.6-6.6-4.8-10.2-2.7-3.6 2.1-4.8 6.6-2.7 10.2l6.4 11.1h-12.8c-4.1 0-7.5 3.3-7.5 7.5s3.3 7.5 7.5 7.5h12.8l-6.4 11.1c-2.1 3.6-.8 8.2 2.7 10.2 3.6 2.1 8.2.8 10.2-2.7l6.4-11.1 6.4 11.1c2.1 3.6 6.6 4.8 10.2 2.7 3.6-2.1 4.8-6.6 2.7-10.2l-6.4-11.1h12.8c4.1 0 7.5-3.3 7.5-7.5z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1034"><style>#icon-warnings-1034 .prefix__st0{fill:#3fa9f5}</style><path class="prefix__st0" d="M241.1 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8 12.6 0 22.8-10.2 22.8-22.8 0-9.5-5.8-17.6-13.9-21z" /><path d="M272 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.5-10.3-40.6-26.3-52.8zm-39.8 104.1c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2H238c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.6-23.1 51.5-51.4 51.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path class="prefix__st0" d="M358 87.6c-7.1 0-12.9 5.8-12.9 12.9v22l-19.1-11c-6.2-3.5-14-1.4-17.6 4.7-3.5 6.2-1.4 14 4.7 17.6l19.1 11-19.1 11c-6.1 3.6-8.3 11.4-4.7 17.6 3.6 6.1 11.4 8.2 17.6 4.7l19.1-11v22c0 7.1 5.8 12.9 12.9 12.9s12.9-5.8 12.9-12.9v-22l19.1 11c6.2 3.6 14 1.4 17.6-4.7s1.4-14-4.7-17.6l-19.1-11 19.1-11c6.2-3.6 8.3-11.4 4.7-17.6-3.6-6.2-11.4-8.3-17.6-4.7l-19.1 11v-22c0-7.1-5.8-12.9-12.9-12.9z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1035"><style>#icon-warnings-1035 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M71 200.5h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1H71c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path class="prefix__st0" d="M429 200.5h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path d="M358.1 155.2c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 29.9-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.2-30.2-73.2-69.1-77.8z" fill="#f6f6f6" /><path d="m174.8 360.9 11.4-27.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-11.4 27.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zM112 375.1l19.2-47.1c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L137 385.3c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm224.6 2 14.1-34.6c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-14.1 34.6c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.8-7.4-17.6zm-54.3 2.9 13.8-33.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-13.8 33.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zM54 382.6 76.3 328c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L79 392.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm328.3 13.8 23.7-58c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-23.7 58c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-171.9 17.4 30.8-75.4c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L235.3 424c-2.8 6.9-10.7 10.2-17.6 7.4-6.8-2.8-10.2-10.7-7.3-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1036"><style>#icon-warnings-1036 .prefix__st0{fill:#53a8ff}#icon-warnings-1036 .prefix__st1{fill:#79bbff}#icon-warnings-1036 .prefix__st2{fill:#409eff}</style><path class="prefix__st0" d="m465.3 232.7-.1-.1c-5.5-9.7-17.9-13.1-27.6-7.6-2.6 1.4-58.7 31.6-147 13.3-11.5-2.4-22.4 6.4-22.5 18.2-.1 10.8 7.5 20.2 18.2 22.3 102 19.8 168.3-16.7 171.4-18.5 9.7-5.4 13.1-17.8 7.6-27.6z" /><path class="prefix__st1" d="M466.5 161.2c-.3-.7-.5-1.1-.8-1.6-5.5-9.7-17.9-13.1-27.6-7.6-2.6 1.4-58.1 31.3-145.6 13.6-12.1-2.4-23.4 6.7-23.6 19.1-.1 10.2 7.1 19 17.2 21 102.4 20.1 168.9-16.6 172-18.3 9.2-5.2 12.9-16.6 8.4-26.2z" /><path class="prefix__st2" d="M464.8 305.6s0-.1-.1-.1c-5.5-9.7-17.9-13.1-27.6-7.6-2.6 1.4-57.8 31.1-144.8 13.7-12.9-2.6-25 7.2-25.1 20.3-.1 9.2 6.3 17.2 15.4 19.1 103.8 21.2 171.5-16 174.6-17.8 9.8-5.4 13.2-17.8 7.6-27.6z" /><path d="M246.6 79.3c-49.4 0-89.5 40.2-89.5 89.5v162.3c0 49.4 40.2 89.5 89.5 89.5 49.4 0 89.5-40.2 89.5-89.5V168.8c0-49.3-40.2-89.5-89.5-89.5zm48.8 251.9c0 26.9-22 48.9-48.9 48.9s-48.9-22-48.9-48.9V168.8c0-26.9 22-48.9 48.9-48.9s48.9 22 48.9 48.9v162.4z" fill="#f7931e" /><path class="prefix__st0" d="M224.4 227.9c-26.9-9-59.2-11.7-88.8-11.7-45.3 0-84.1 6.5-86.7 7-11 1.9-18.4 12.4-16.6 23.4 2 11 12.4 18.3 23.4 16.6 1-.2 97.2-16.3 155.8 3.3.3.1.5.2.8.3 12.5 4.1 25.5-5.1 25.6-18.3v-1.6c.1-8.5-5.4-16.1-13.5-18.8.1-.2.1-.2 0-.2z" /><path class="prefix__st1" d="M224.9 154.9c-26.9-9-59.2-11.7-88.8-11.7-45.3 0-84.1 6.5-86.7 7-11 1.9-18.4 12.4-16.6 23.4 2 11 12.4 18.3 23.4 16.6 1-.2 97.2-16.3 155.8 3.3.1 0 .3.1.4.1 12.9 4.3 26.2-5.3 26.4-18.9v-.4c.1-8.8-5.5-16.6-13.9-19.4.1.1 0 0 0 0z" /><path class="prefix__st2" d="M224 300.8c-26.9-9-59.2-11.7-88.8-11.7-45.3 0-84.1 6.5-86.7 7-11 1.9-18.4 12.4-16.6 23.4 2 11 12.4 18.3 23.4 16.6 1-.2 97.2-16.3 155.8 3.3.4.1.7.2 1.1.4 12.2 4 24.7-5 24.9-17.8v-2.8c.1-8.3-5.2-15.6-13.1-18.2.1-.2 0-.2 0-.2z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1037"><path d="M188.1 304.2 272.6 177 218.8 67c-1.4-2.9-5-4.1-7.9-2.7-1.2.6-2.2 1.6-2.8 2.9L21.9 427.8c-1.4 2.9-.3 6.4 2.6 7.9.8.4 1.7.6 2.7.6l131.2-.4 49.2-91.4c-.1-.1-19.5-40.3-19.5-40.3z" fill="#754c24" /><path d="m478.2 397.9-58.5-122.3-137.9 130 191.1.8c4.3-.1 7.1-4.6 5.3-8.5z" fill="#8c6239" /><path d="m346.1 234.8 34.4-128.9-152.2 183.3 47.1 1.4-76.3 141.8 196.6-185.3-49.6-12.3z" fill="#f7ad44" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1038"><style>#icon-warnings-1038 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M71.1 199.9h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1h-97c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path class="prefix__st0" d="M429.1 199.9h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path d="M358.1 154.6C343.3 104 296.6 67 241.2 67c-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.2-77.8z" fill="#f6f6f6" /><path d="m178.8 350.6 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.7-7.4-17.6zm-54.9-5 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm219.8 14.6 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-55 0 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zM69 345.6l7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L94 355.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.3-10.7-7.4-17.6zM398.6 356l7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-164.8 0 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1039"><style>#icon-warnings-1039 .prefix__st0{fill:#409eff}</style><path class="prefix__st0" d="M438.8 244h-69.1V56.3c0-6.6-6.5-11.9-14.4-11.9H140.9c-8 0-14.4 5.3-14.4 11.9V244H61.2c-5.1 0-9.2 3.4-9.3 7.6 0 2.2 1.1 4.3 3.2 5.8l190.2 137.7c2.7 2 6.8 2 9.5 0L445 257.4c3.8-2.8 4.2-7.6.8-10.8-1.8-1.7-4.3-2.6-7-2.6z" /><path d="M302.6 246.8c15.4-4 25-15.6 29.1-21.5l14.4 15.4c-7 9.5-16 17.4-26.4 23.1-14.4 7.9-27.7 7.5-33.2 7.4-5.9-.2-31.3-.7-50.2-20.2-19-19.7-19.9-44.2-19.9-53 0-19.7 7.3-36.6 20.3-50.8 2.9-3.2 10.9-10.7 22-15.8 18.5-8.5 35.6-5.5 40.4-4.6 4.4.9 17.4 3.8 30.2 14.1 7.4 6 14 14.1 16.9 18.6l-14.7 15.8c-3.3-5.6-14.8-19.2-31.7-23.5-23.7-6.1-58.8 7.8-59.1 47.1-.3 38.4 33.6 55.3 61.9 47.9zm-121.4-89.5c-7.2.2-14.2-2.6-19.5-7.6-5.1-4.8-8-11.5-7.9-18.5 0-7.3 2.6-13.5 7.9-18.6 5.1-5 12-7.8 19.1-7.7 7.9 0 14.4 2.4 19.5 7.4 5.1 4.9 7.8 11.7 7.6 18.7.2 7.1-2.5 13.9-7.6 18.9-5.1 4.9-12 7.6-19.1 7.4z" style="fill:#66b1ff" /><path class="prefix__st0" d="M180.8 117.1c-3.8 0-7 1.3-9.6 4s-3.8 6-3.8 10 1.3 7.3 3.8 10 5.7 4 9.6 4c3.8 0 7-1.3 9.6-4 2.6-2.7 4-6.3 3.9-10.1.1-3.7-1.2-7.3-3.8-10-2.6-2.6-6.1-4-9.7-3.9z" /><path d="M453.6 298.2h-38.2c-3.7 0-7.4 1.2-10.2 3.3L250 418.8 94.7 301.5c-2.8-2.1-6.4-3.3-10.2-3.3H46.4c-1.8 0-3.2 1.3-3.2 2.8 0 .8.4 1.5 1.1 2l199.3 150.6c3.6 2.7 9.1 2.7 12.7 0L455.7 303c1.3-1 1.4-2.8.2-3.9-.6-.5-1.4-.9-2.3-.9z" fill="#8cc5ff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1040"><style>#icon-warnings-1040 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M61 190.3h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1H61c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path class="prefix__st0" d="M418.9 190.3h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path d="M348 145c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.2-30.2-73.2-69.1-77.8z" fill="#f6f6f6" /><path d="M159.5 324.1h-17.9l8.9-15.4c2.8-4.8 1.1-10.9-3.6-13.6s-10.9-1.1-13.6 3.6l-8.9 15.4-8.9-15.4c-2.9-4.7-9.1-6.1-13.7-3.1-4.4 2.8-5.9 8.5-3.5 13.1l8.9 15.4H89.4c-5.5 0-10 4.4-10 9.9s4.4 10 9.9 10h17.9l-8.9 15.4c-2.6 4.9-.7 10.9 4.2 13.5 4.6 2.4 10.3.9 13.1-3.5l8.9-15.4 8.9 15.4c2.7 4.8 8.8 6.4 13.6 3.6 4.8-2.7 6.4-8.8 3.7-13.6l-8.9-15.4h17.9c5.5 0 10-4.4 10-9.9-.2-5.6-4.7-10-10.2-10zm227.7 0h-17.9l8.9-15.4c2.6-4.9.7-10.9-4.2-13.5-4.6-2.4-10.3-.9-13.1 3.5l-8.9 15.4-8.9-15.4c-2.8-4.8-8.8-6.4-13.6-3.6s-6.4 8.8-3.6 13.6l8.9 15.4H317c-5.5 0-10 4.4-10 9.9s4.4 10 9.9 10h17.9l-8.9 15.4c-2.6 4.9-.7 10.9 4.2 13.5 4.6 2.4 10.3.9 13.1-3.5l8.9-15.4 8.9 15.4c2.7 4.8 8.8 6.4 13.6 3.6 4.8-2.7 6.4-8.8 3.7-13.6l-8.9-15.4h17.9c5.5 0 10-4.4 10-9.9-.2-5.6-4.6-10-10.1-10zM264.7 345c5.5 0 10-4.5 9.9-10 0-1.7-.5-3.4-1.3-5l-16.9-29.2h33.8c5.5 0 9.9-4.5 9.9-9.9s-4.5-9.9-9.9-9.9h-33.8l16.9-29.2c2.6-4.9.7-10.9-4.2-13.5-4.6-2.4-10.3-.9-13.1 3.5L239.1 271l-16.9-29.2c-2.7-4.8-8.8-6.4-13.6-3.6-4.8 2.7-6.4 8.8-3.6 13.6l16.9 29.2h-33.8c-5.5 0-9.9 4.5-9.9 9.9s4.5 9.9 9.9 9.9h33.8L205 330.1c-2.6 4.9-.7 10.9 4.2 13.5 4.6 2.4 10.3.9 13.1-3.5l16.9-29.2L256 340c1.8 3.1 5.1 5 8.7 5z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1041"><path d="M374 145.2c-20.2 8.8-33.5 23.1-41.4 38.2-6.1 11.6-23.3 10.4-27.2-2.2-10.5-33.6-9.1-70.4-2.6-115.4 1.7-11.5-10-20.4-20.6-15.7-67.9 30.1-84.4 96.5-90.5 147.8-2 16.9-26.4 17.5-29.2.8-.6-3.7-1.1-7.2-1.5-10.5-1.5-12.3-16.4-17.3-25.2-8.7-20 19.7-32.3 50.8-35.3 78.1-9.9 89 54.8 161.8 141.1 171.3 86.2 9.5 161.4-48 171.2-137.1 5.2-47.9-22.4-70-18.1-132.1.8-11-10.5-18.9-20.7-14.5z" fill="#ff7b15" /><path d="M295.5 312.5c-6.2 2.8-10.4 7.2-13.1 11.9-2.3 4.2-8.4 3.6-9.8-1-3.2-10.9-2.7-22.8-.7-37.2.6-4.1-3.6-7.3-7.4-5.6-21.3 9.8-27.3 30.4-29.5 47.1-.8 6.1-9.7 6.1-10.5 0v-.4c-.6-4.4-6-6.2-9-3-6.4 6.6-10.3 16.8-11.3 25.7-3.3 29.9 18.4 54.3 47.4 57.5 29 3.2 54.2-16.1 57.5-46.1 1.7-15.9-7.4-23.4-6.1-43.9.2-3.8-3.9-6.7-7.5-5z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1042"><path d="M426.7 151.5h-.5c-5.1-55.1-51.4-98.2-107.8-98.2-59.8 0-108.2 48.5-108.2 108.2 0 57.8 45.3 105 102.4 108.1v.2h114.1c32.7 0 59.2-26.5 59.2-59.2s-26.5-59.1-59.2-59.1z" fill="#e3e3e3" /><path d="M359.8 181.8c-17.4-59.5-72.4-103-137.6-103-78.3 0-141.9 62.7-143.3 140.7-36.4 4.3-64.7 35.2-64.7 72.8 0 40.5 32.8 73.3 73.3 73.3h261.4c50.9 0 92.2-41.3 92.2-92.2 0-47.3-35.5-86.2-81.3-91.6z" fill="#f6f6f6" /><path d="M354.8 276.1c-10.3 0-20.1 6.6-24.8 16.8h-12l-25.5-63.1c-1.9-4.9-6.8-8-12-7.8-5.2.2-9.8 3.7-11.4 8.7L242 314.3l-14.9-163.8c-.5-5.7-4.9-10.4-10.6-11.3-5.7-.8-11.2 2.3-13.4 7.6l-58.9 144h-35.4c-6.9 0-12.5 5.6-12.5 12.5s5.6 12.5 12.5 12.5h43.8c5.1 0 9.6-3.1 11.5-7.8l42.8-104.5 15.8 173.8c.5 5.9 5.2 10.6 11.1 11.3 5.9.6 11.4-2.9 13.3-8.6l35.2-109 15.8 39.1c1.9 4.7 6.5 7.8 11.6 7.8h23c.9 1.3 9.1 11.9 22.2 11.8 13.3-.1 26.8-11.4 26.8-26.8-.1-15.2-13.1-26.8-26.9-26.8z" fill="#5da9f5" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1043"><style>#icon-warnings-1043 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M72.1 199.9h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1h-97c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path class="prefix__st0" d="M430.1 199.9h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path d="M359.2 154.6C344.4 104 297.6 67 242.2 67c-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.1-77.8z" fill="#f6f6f6" /><path d="M245.3 293.6h68.3L211.1 432.4v-92.7h-58.7l126.4-171.1zm-142.8 37.8H139l-54.8 74.1V356H52.9l67.5-91.3zm274.1 6.7h36.5l-54.7 74.1v-49.5h-31.3l67.4-91.3z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#f7ad44" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1044"><path d="M134.2 118.1h-1.8c-6.6 0-12-5.4-12-12V76.6c0-6.6 5.4-12 12-12h1.8c6.6 0 12 5.4 12 12v29.5c0 6.6-5.4 12-12 12zm227.8 0c-7.6 0-13.8-6.2-13.8-13.8V76.6c0-6.6 5.4-12 12-12 7.6 0 13.8 6.2 13.8 13.8v27.7c0 6.6-5.4 12-12 12z" style="fill:#fbb03b" /><path fill="#79bbff" d="M89.3 132.5h321.3v38.3H89.3z" /><path d="M379.1 276.1c-52.1 0-94.3 42.3-94.2 94.4 0 52.1 42.2 94.4 94.2 94.4s94.2-42.3 94.2-94.4c.1-52-42.1-94.3-94.2-94.4zm0 40.1c7.2-.2 13.2 1.5 16.9 3l-64.4 77.1c-4.5-7.8-6.9-16.7-6.8-25.7.8-28.2 28-53.8 54.3-54.4zm0 108.7c-5.8.1-11.5-.9-16.9-3l64.4-77.1c6.2 11.2 6.9 20.6 6.8 25.7-.7 28.2-27.9 53.8-54.3 54.4z" fill="#f15a24" /><path d="M278.9 370.6c0-55.3 44.9-100.2 100.2-100.2 28 0 53.3 11.5 71.5 30V104.2H49.4v321h245.8c-10.3-15.7-16.3-34.4-16.3-54.6z" fill="#409eff" /><path d="M84.5 132.5h336.6v48.3H84.5zm0 75.1h48.3v48.3H84.5zm67.1 0h48.3v48.3h-48.3zm-67.1 68.5h48.3v48.3H84.5z" style="fill:#8cc5ff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1045"><style>#icon-warnings-1045 .prefix__st0{fill:#3fa9f5}</style><path class="prefix__st0" d="M322.3 383.7 198 259.4c-11.8-11.8-11.8-30.9 0-42.7 11.8-11.8 30.9-11.8 42.7 0L365 341c11.8 11.8 11.8 30.9 0 42.7-11.8 11.8-30.9 11.8-42.7 0z" /><path class="prefix__st0" d="M228 128.5c-24.6-24.6-60.7-30.6-90.9-18.2l58.1 58.1-45.4 45.4-58.1-58.1c-12.5 30.3-6.4 66.4 18.2 90.9 32.6 32.6 85.5 32.6 118.2 0 32.5-32.6 32.5-85.5-.1-118.1z" /><path d="M247.8 470.7c-58.8 0-114.1-22.9-155.7-64.5-41.6-41.6-64.5-96.9-64.5-155.7 0-58.8 22.9-114.1 64.5-155.7 41.6-41.6 96.9-64.5 155.7-64.5S362 53.1 403.6 94.7c41.6 41.6 64.5 96.9 64.5 155.7 0 58.8-22.9 114.1-64.5 155.7-41.6 41.7-97 64.6-155.8 64.6zm-.6-408.6c-105.1 0-190.3 85.2-190.3 190.3 0 48.7 18.3 93 48.3 126.7l268.6-268.6c-33.6-30.1-78-48.4-126.6-48.4zm3.1 383.6c105.1 0 190.3-85.2 190.3-190.3 0-48.7-18.3-93-48.3-126.7L123.6 397.4c33.6 30 78 48.3 126.7 48.3z" fill="#f15a24" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1046"><path d="M465.7 321.3c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.9-8.6-31.1.1 0 .1 0 0 0z" fill="#409eff" /><path d="M465.7 397.3c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.9-8.6-31.1.1 0 .1 0 0 0z" fill="#79bbff" /><path d="m270 63.2 107.2 185.7c7.2 12.4-1.8 28-16.2 28H146.7c-14.4 0-23.3-15.6-16.2-28L237.7 63.2c7.2-12.4 25.2-12.4 32.3 0zm-16.1 163.1c-4.9 0-8.9 4-8.9 8.9s4 8.9 8.9 8.9 8.9-4 8.9-8.9-4-8.9-8.9-8.9zm10.6-89.6c0-5.9-4.8-10.6-10.6-10.6-5.9 0-10.6 4.8-10.6 10.6 0 .4 0 .9.1 1.3l4.4 71c0 3.4 2.8 6.2 6.2 6.2s6.2-2.8 6.2-6.2l4.4-71c-.1-.5-.1-.9-.1-1.3z" fill="#f15a24" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1047"><style>#icon-warnings-1047 .prefix__st0{fill:#8c6239}#icon-warnings-1047 .prefix__st1{fill:#c7b299}#icon-warnings-1047 .prefix__st2{fill:#ccc}#icon-warnings-1047 .prefix__st3{fill:#a67c52}</style><path class="prefix__st0" d="M79.2 140.1c10.5-.4 18.6-9.2 18.2-19.7-.4-9.9-8.3-17.8-18.2-18.2-10.5.4-18.6 9.2-18.2 19.7.4 9.9 8.3 17.8 18.2 18.2z" /><path class="prefix__st1" d="M33.7 268.6c-7 .1-12.7 5.9-12.6 12.9 0 7.2 5.8 12.9 12.6 12.9s12.6-5.9 12.6-12.9c.1-7.1-5.6-12.8-12.6-12.9z" /><path class="prefix__st0" d="M99.9 190c0-14.7-12.1-26.8-26.8-26.8s-26.8 12-26.8 26.8c0 14.7 12.1 26.8 26.8 26.8s26.8-12.1 26.8-26.8z" /><path class="prefix__st1" d="M87.3 361.9c-7 0-12.6 5.7-12.6 12.6 0 7.1 5.8 12.6 12.6 12.6s12.6-5.8 12.6-12.6c0-6.9-5.6-12.6-12.6-12.6zm109.4-157.7c9.9 0 17.8-8 17.9-17.9 0-9.9-8-17.8-17.9-17.9-9.8-.1-17.8 7.7-17.9 17.5v.4c.1 9.9 8 17.9 17.9 17.9z" /><path class="prefix__st0" d="M250.7 125.3c10 0 18.2-8.2 18.2-18.2 0-10.2-8.4-18.2-18.2-18.2-9.8 0-18.2 8-18.2 18.2s8.3 18.2 18.2 18.2z" /><circle class="prefix__st2" cx="425.6" cy="119" r="15.3" /><circle class="prefix__st3" cx="139.4" cy="281.5" r="39.4" /><path class="prefix__st2" d="M132.9 105.1c14.7 0 26.8-12.1 26.8-26.8s-12.1-26.8-26.8-26.8c-14.7 0-26.8 12.1-26.8 26.8s12 26.8 26.8 26.8z" /><path class="prefix__st0" d="M349.2 270.4c-6.8-.1-12.5 5.3-12.6 12.1v.5c0 7 5.7 12.6 12.6 12.6 7 0 12.6-5.7 12.6-12.6 0-6.9-5.7-12.5-12.6-12.6z" /><path d="M401.2 216.8c14.8 0 26.8-12 26.8-26.8-.7-14.8-13.3-26.3-28.1-25.5-13.8.7-24.9 11.7-25.5 25.5 0 14.7 12.1 26.8 26.8 26.8z" fill="#754c24" /><path class="prefix__st2" d="M405.5 345.7c-14.7 0-26.8 12.1-26.8 26.8 0 14.7 12.1 26.8 26.8 26.8 14.8-.9 26.1-13.6 25.2-28.4-.7-13.5-11.6-24.4-25.2-25.2z" /><path class="prefix__st3" d="M451.9 244.1c-14.9.1-27 12.1-27 27s12.2 27 27 27c14.9-.1 27-12.1 27-27 0-14.8-12.1-26.9-27-27z" /><path class="prefix__st0" d="M355.5 95.5c14.7 0 26.8-12.1 26.8-26.8s-12.1-26.8-26.8-26.8-26.8 12.1-26.8 26.8 12 26.8 26.8 26.8zm-58.4 55.1c-21.8.1-39.4 17.7-39.4 39.4 0 21.8 17.6 39.4 39.4 39.4s39.4-17.6 39.4-39.4c.1-21.8-17.6-39.4-39.4-39.4z" /><circle class="prefix__st2" cx="180.1" cy="421.7" r="36.5" /><circle cx="243.5" cy="281.5" r="26.8" fill="#736357" /><circle class="prefix__st0" cx="289.3" cy="372.5" r="29.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1048"><style>#icon-warnings-1048 .prefix__st0{fill:#409eff}</style><path class="prefix__st0" d="M438.8 278.4h-69.1V51.6c0-8-6.5-14.4-14.4-14.4H140.9c-8 0-14.4 6.5-14.4 14.4v226.9H61.2c-5.1 0-9.2 4.1-9.3 9.2 0 2.7 1.1 5.3 3.2 7l190.2 166.5c2.7 2.4 6.8 2.4 9.5 0L445 294.7c3.8-3.4 4.2-9.2.8-13-1.8-2.1-4.3-3.3-7-3.3z" /><path d="M302.6 239.5c15.4-4 25-15.6 29.1-21.5l14.4 15.4c-7 9.5-16 17.4-26.4 23.1-14.4 7.9-27.7 7.5-33.2 7.4-5.9-.2-31.3-.7-50.2-20.2-19-19.7-19.9-44.2-19.9-53 0-19.7 7.3-36.6 20.3-50.8 2.9-3.2 10.9-10.7 22-15.8 18.5-8.5 35.6-5.5 40.4-4.6 4.4.9 17.4 3.8 30.2 14.1 7.4 6 14 14.1 16.9 18.6L331.5 168c-3.3-5.6-14.8-19.2-31.7-23.5-23.7-6.1-58.8 7.8-59.1 47.1-.3 38.5 33.6 55.4 61.9 47.9zm-121.4-89.4c-7.2.2-14.2-2.6-19.5-7.6-5.1-4.8-8-11.5-7.9-18.5 0-7.3 2.6-13.5 7.9-18.6 5.1-5 12-7.8 19.1-7.7 7.9 0 14.4 2.4 19.5 7.4 5.1 4.9 7.8 11.7 7.6 18.7.2 7.1-2.5 13.9-7.6 18.9-5.1 4.9-12 7.6-19.1 7.4z" style="fill:#66b1ff" /><path class="prefix__st0" d="M180.8 109.8c-3.8 0-7 1.3-9.6 4-2.6 2.7-3.8 6-3.8 10s1.3 7.3 3.8 10 5.7 4 9.6 4c3.8 0 7-1.3 9.6-4 2.6-2.7 4-6.3 3.9-10.1.1-3.7-1.2-7.3-3.8-10-2.6-2.5-6.1-3.9-9.7-3.9z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1049"><path d="M449.4 239.9c2.7.6 5.4-1.4 5.6-4.2 6.8-93.1-55.3-176-140.4-193.6-85.2-17.6-178 33.3-201.2 114.6-25.6 89.7 24.7 139.4 31.3 148.5-48.9-10.5-96.1-79.1-94.1-133.2-2.7-.6-5.4 1.4-5.6 4.2-6.7 88.5 46 166.1 124.7 188.8-.3 0 21.4 4.6 21.1 4.6l20.3 1.5s56.6 4.5 115.4-33.9h-1c27.6-20.4 49.6-48 60.2-81.1 27.1-83.9-23.6-140.3-30.1-149.3 52.1 10.9 95.9 79.1 93.8 133.1zm-158.8-32c-2.4 23.6-24.1 40-47.2 36.3-.9-.2-1.8-.3-2.7-.5-21.9-5.2-35.5-27.1-30.3-49 5.1-21.6 26.7-35.4 48.7-30.4 19.8 4.3 33.5 23.3 31.5 43.6z" fill="#e99311" /><path d="M411.3 276.2h-.2c-2.4-25.6-23.8-45.6-50-45.6-27.8 0-50.2 22.5-50.2 50.2 0 26.8 21 48.7 47.5 50.2v.1h53c15.1 0 27.5-12.3 27.5-27.5-.2-15-12.5-27.4-27.6-27.4z" fill="#e3e3e3" /><path d="M380.2 290.3c-8.1-27.6-33.6-47.8-63.9-47.8-36.3 0-65.9 29.1-66.6 65.3-16.9 2-30 16.4-30 33.8 0 18.8 15.3 34.1 34.1 34.1h121.3c23.6 0 42.8-19.1 42.8-42.8 0-22-16.5-40.1-37.7-42.6z" fill="#f6f6f6" /><path d="m253.4 420.7 10.6-25.9c1.6-4 6.2-5.9 10.2-4.3 4 1.6 5.9 6.2 4.3 10.2l-10.6 25.9c-1.6 4-6.2 5.9-10.2 4.3-4-1.7-5.9-6.2-4.3-10.2zm69.8 14.5 16.5-40.4c1.6-4 6.2-5.9 10.2-4.3 4 1.6 5.9 6.2 4.3 10.2l-16.5 40.4c-1.6 4-6.2 5.9-10.2 4.3-4-1.6-5.9-6.2-4.3-10.2zm39.4-14.5 10.6-25.9c1.6-4 6.2-5.9 10.2-4.3 4 1.6 5.9 6.2 4.3 10.2L377 426.6c-1.6 4-6.2 5.9-10.2 4.3-3.9-1.7-5.8-6.2-4.2-10.2zm-68.7 0 10.6-25.9c1.6-4 6.2-5.9 10.2-4.3 4 1.6 5.9 6.2 4.3 10.2l-10.6 25.9c-1.6 4-6.2 5.9-10.2 4.3-4-1.7-5.9-6.2-4.3-10.2zm-8.2 20.2c1.6-4 6.2-5.9 10.2-4.3 4 1.6 5.9 6.2 4.3 10.2-1.6 4-6.2 5.9-10.2 4.3-4-1.6-5.9-6.2-4.3-10.2z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1050"><style>#icon-warnings-1050 .prefix__st0{fill:#3fa9f5}</style><path class="prefix__st0" d="M251.7 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8 12.6 0 22.8-10.2 22.8-22.8 0-9.5-5.7-17.6-13.9-21z" /><path d="M282.6 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c.1-21.6-10.3-40.7-26.3-52.8zm-39.8 104c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2h11.4c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9H255c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.5-23.2 51.4-51.5 51.4z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path class="prefix__st0" d="M368.7 87.6c-7.1 0-12.9 5.8-12.9 12.9v22l-19.1-11c-6.2-3.5-14-1.4-17.6 4.7-3.5 6.2-1.4 14 4.7 17.6l19.1 11-19.1 11c-6.1 3.6-8.3 11.4-4.7 17.6 3.6 6.1 11.4 8.2 17.6 4.7l19.1-11v22c0 7.1 5.8 12.9 12.9 12.9s12.9-5.8 12.9-12.9v-22l19.1 11c6.2 3.6 14 1.4 17.6-4.7s1.4-14-4.7-17.6l-19.1-11 19.1-11c6.2-3.6 8.3-11.4 4.7-17.6-3.6-6.2-11.4-8.3-17.6-4.7l-19.1 11v-22c-.1-7.2-5.8-12.9-12.9-12.9zm-249 128.3c-5.5 0-9.9 4.5-9.9 9.9v17L95 234.3c-4.8-2.7-10.8-1.1-13.6 3.6-2.7 4.8-1.1 10.8 3.6 13.6l14.7 8.5-14.7 8.5c-4.8 2.8-6.4 8.8-3.6 13.6 2.8 4.7 8.8 6.4 13.6 3.6l14.7-8.5v17c0 5.5 4.5 9.9 9.9 9.9 5.5 0 9.9-4.5 9.9-9.9v-17l14.7 8.5c4.8 2.7 10.8 1.1 13.6-3.6s1.1-10.8-3.6-13.6l-14.7-8.5 14.7-8.5c4.8-2.7 6.4-8.8 3.6-13.6s-8.8-6.4-13.6-3.6l-14.7 8.5v-17c.1-5.5-4.3-9.9-9.8-9.9z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1051"><path d="M209.7 433.6c-18.4 0-34.7-2.7-47.4-5.8-8.2-2-13.1-9.8-10.9-17.4 2.2-7.6 10.6-12.1 18.9-10.1 20.3 5 51.5 8.6 84.7-2.2 17.6-5.8 44.2-14.5 56-37.5 7.7-15.1 10.7-38.8-.9-55.3-12.3-17.5-32.7-21.6-56.3-26.3-26-5.2-55.4-11.1-74.9-37.2-28-37.5-13-83.6-8.9-91.1 13.2-24.2 35.1-42.8 63.4-53.7 28.1-10.9 60.5-13.4 93.7-7.4 8.4 1.5 13.8 9 12.1 16.7-1.7 7.7-9.8 12.7-18.2 11.1-54.1-9.9-102.4 7.9-123.2 45.6-1 2.6-13 36.6 6.6 62.8 12.5 16.8 32.7 20.8 56 25.5 26.5 5.3 56.5 11.3 75.7 38.7 18.1 25.7 14.5 60.1 2.9 82.8-17.2 33.8-52.5 45.3-73.6 52.2-19.6 6.3-38.6 8.6-55.7 8.6z" fill="#e9e9e9" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1052"><style>#icon-warnings-1052 .prefix__st9{fill:#e3e3e3}</style><path d="M141.7 55.8 45.6 358.7c.3.1.5.2.8.3 8.7 2.7 18-2.1 20.8-10.8l90.4-287.4-15.9-5z" fill="#f15a24" /><path d="M125.9 50.8 35.5 338.2c-2.7 8.5 1.8 17.5 10 20.5l96.2-302.9-15.8-5z" fill="#f7931e" /><path fill="#1088e2" d="M157.3 61 97.1 252.2l44.2-22.4 49.6-157.4z" /><path fill="#0391ff" d="m190.9 72.4-49.6 157.4 45.6-23.2 38.6-122.4z" /><path fill="#0396ff" d="m225.5 84.2-38.6 122.4 46.2-23.5 27.4-86.9z" /><path fill="#3fa9f5" d="m260.5 96.2-27.4 86.9 55-27.9 14.1-44.8z" /><path d="m318.2 115.8-16-5.4-14.1 44.8 31.8-16.1c9.9-5.1 8.9-19.7-1.7-23.3z" fill="#abdcff" /><path d="M465.7 324.3c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.8-8.6-31.1.1.1.1.1 0 0z" fill="#409eff" /><path d="M465.7 400.4c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.9-8.6-31.1.1 0 .1 0 0 0z" fill="#79bbff" /><path class="prefix__st9" d="M282.8 213.5h.2c2-22 20.5-39.2 43-39.2 23.9 0 43.2 19.3 43.2 43.2 0 23.1-18.1 41.9-40.9 43.1v.1h-45.5c-13 0-23.6-10.6-23.6-23.6 0-13.1 10.6-23.6 23.6-23.6z" /><path class="prefix__st9" d="M450.9 213.5h-.2c-2-22-20.5-39.2-43-39.2-23.9 0-43.2 19.3-43.2 43.2 0 23.1 18.1 41.9 40.9 43.1v.1h45.5c13 0 23.6-10.6 23.6-23.6 0-13.1-10.6-23.6-23.6-23.6z" /><path d="M417.6 192.2c-7-23.8-28.9-41.1-54.9-41.1-31.2 0-56.6 25-57.2 56.1-14.5 1.7-25.8 14.1-25.8 29.1 0 16.2 13.1 29.3 29.3 29.3h104.3c20.3 0 36.8-16.5 36.8-36.8-.1-18.9-14.3-34.4-32.5-36.6z" fill="#f6f6f6" /><path d="M364.1 257.5h32.1L348 322.6v-43.5h-27.5l59.3-80.3zm-67 17.7h17.1L288.5 310v-23.2h-14.7l31.7-42.9zm128.7 3.1h17.1l-25.7 34.8v-23.2h-14.7l31.7-42.9z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#f7ad44" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1053"><path d="M366.4 128.6c-15-51.4-62.5-88.9-118.8-88.9-67.6 0-122.5 54.1-123.7 121.5-31.4 3.7-55.8 30.4-55.8 62.8 0 35 28.3 63.3 63.3 63.3H357c43.9 0 79.6-35.7 79.6-79.6 0-40.8-30.8-74.4-70.2-79.1z" fill="#f6f6f6" /><path d="M171.6 160.6h-132c-6.9 0-12.6-5.7-12.6-12.6v-5.5c0-6.9 5.7-12.6 12.6-12.6h132c6.9 0 12.6 5.7 12.6 12.6v5.5c0 6.9-5.7 12.6-12.6 12.6zm72 2.9h-30.7c-6.9 0-12.6-5.7-12.6-12.6v-5.5c0-6.9 5.7-12.6 12.6-12.6h30.7c6.9 0 12.6 5.7 12.6 12.6v5.5c0 6.9-5.7 12.6-12.6 12.6zm14.7 53.4H39.6c-6.9 0-12.6-5.7-12.6-12.6v-5.5c0-6.9 5.7-12.6 12.6-12.6h218.7c6.9 0 12.6 5.7 12.6 12.6v5.5c-.1 7-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /><path d="M465.7 335.5c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.9-8.6-31.1.1 0 .1 0 0 0z" fill="#409eff" /><path d="M465.7 411.5c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.8-8.6-31.1.1.1.1 0 0 0z" fill="#79bbff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1054"><style>#icon-warnings-1054 .prefix__st2{fill:#e3e3e3}</style><path d="M465.7 340.9c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.9-8.6-31.1.1 0 .1 0 0 0z" fill="#409eff" /><path d="M465.7 416.9c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.8-8.6-31.1.1.1.1 0 0 0z" fill="#79bbff" /><path class="prefix__st2" d="M103.5 151.8h.4c3.8-41.4 38.6-73.8 81-73.8 44.9 0 81.3 36.4 81.3 81.3 0 43.4-34.1 78.9-76.9 81.2v.1h-85.8c-24.6 0-44.5-19.9-44.5-44.5s19.9-44.3 44.5-44.3z" /><path class="prefix__st2" d="M420 151.8h-.4c-3.8-41.4-38.6-73.8-81-73.8-44.9 0-81.3 36.4-81.3 81.3 0 43.4 34.1 78.9 76.9 81.2v.1H420c24.6 0 44.5-19.9 44.5-44.5s-20-44.3-44.5-44.3z" /><path d="M357.3 111.7C344.2 67 302.8 34.3 253.9 34.3 195 34.3 147.2 81.4 146.1 140c-27.4 3.2-48.6 26.5-48.6 54.7 0 30.4 24.7 55.1 55.1 55.1H349c38.3 0 69.3-31 69.3-69.3.1-35.5-26.6-64.7-61-68.8z" fill="#f6f6f6" /><path d="M256.6 234.6H317l-90.7 122.7v-82h-51.8l111.7-151.2zM130.3 268h32.3l-48.4 65.5v-43.7H86.5l59.7-80.7zm242.4 5.9h32.2l-48.3 65.5v-43.7h-27.7l59.6-80.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#f7ad44" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1055"><path d="M458.7 236c2.7.6 5.4-1.4 5.6-4.2 6.8-93.1-55.3-176-140.4-193.6-85.2-17.6-178 33.3-201.2 114.6-25.6 89.7 24.7 139.4 31.3 148.5-48.9-10.5-96.1-79.1-94.1-133.2-2.7-.6-5.4 1.4-5.6 4.2-6.7 88.5 46 166.1 124.7 188.8-.3 0 21.4 4.6 21.1 4.6l20.3 1.5s56.6 4.5 115.4-33.9h-1c27.6-20.4 49.6-48 60.2-81.1 27.1-83.9-23.6-140.3-30.1-149.3C417 113.8 460.7 182 458.7 236zm-158.8-32c-2.4 23.6-24.1 40-47.2 36.3-.9-.2-1.8-.3-2.7-.5-21.9-5.2-35.5-27.1-30.3-49 5.1-21.6 26.7-35.4 48.7-30.4 19.8 4.3 33.5 23.3 31.5 43.6z" fill="#e99311" /><path d="M465.7 340.4c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.8-8.6-31.1.1.1.1.1 0 0z" fill="#409eff" /><path d="M465.7 416.5c-4-2.2-99.7-55-241.9-7.5-65.6 22-173.5 3.9-174.6 3.7-12.3-2-24 6.3-26.3 18.6-2.1 12.4 6.2 24.1 18.6 26.3 3 .5 46.4 7.8 97.2 7.8 33.1 0 69.3-3.1 99.5-13.2 121.9-40.7 201.8 2.2 205.1 4 10.9 6.2 24.7 2.4 30.9-8.5 0 0 0-.1.1-.1 6.2-11 2.4-24.9-8.6-31.1.1 0 .1 0 0 0z" fill="#79bbff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1056"><path d="M240.2 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8s22.8-10.2 22.8-22.8c.1-9.5-5.7-17.6-13.9-21z" fill="#3fa9f5" /><path d="M271.2 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.6-10.3-40.7-26.3-52.8zm-39.8 104c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2h11.4c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.5-23.2 51.4-51.4 51.4z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path d="M292.2 105.3H329c2.1 0 3.9 1.7 3.9 3.9v4.6c0 2.1-1.7 3.9-3.9 3.9h-36.8c-2.1 0-3.9-1.7-3.9-3.9v-4.6c.1-2.2 1.8-3.9 3.9-3.9z" fill="#666" /><path d="M292.5 105.1h36.8c2.1 0 3.9 1.7 3.9 3.9v4.6c0 2.1-1.7 3.9-3.9 3.9h-36.8c-2.1 0-3.9-1.7-3.9-3.9V109c.1-2.2 1.8-3.9 3.9-3.9z" fill="#707070" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1057"><path d="M325.3 426.4c-77.5-13.4-143.2-53.6-203.5-99.7-2.1-1.6-5.2-1.3-6.9.7l-18.5 22c-1.8 2.2-1.5 5.4.6 7.2.2.1.3.2.5.4 65.9 42.4 145.1 63.6 227.6 71.1 0-.1.2-1.7.2-1.7z" fill="#409eff" /><path d="M162.4 409.6c-2.3-1-5.1 0-6.3 2.2l-9.6 17.2c-1.4 2.4-.5 5.5 1.9 6.9.3.2.7.3 1 .4 81.1 24.4 165.3 37.3 250 38.2l-.1-2.1c-74.8-4-158.7-30.4-236.9-62.8z" fill="#8cc5ff" /><path d="M116.7 128c20.6.6 37.7-15.6 38.3-36.2S139.4 54 118.8 53.4h-2.1c-20.6.6-36.8 17.8-36.2 38.4.5 19.7 16.4 35.6 36.2 36.2zm326.1 58.3-123.3 9.9c-13.8 1.1-27.2 4.9-39.5 11.2l-48 24.4-32.9-90.8c41.5-28.2 73.5-54 86.2-95.7 2.5-8.1-2-16.6-10.1-19.1-8-2.5-16.5 1.9-19 9.8 0 .1-.1.2-.1.3-11.7 37.9-44.7 59.9-94.6 93-17.1 11.4-35.9 23.8-55.8 38.4C36.2 218.6 36.5 287.6 46.4 317c2.7 8 11.3 12.3 19.3 9.6 8-2.7 12.4-11.3 9.7-19.3-.8-2.5-17.9-58.4 38.3-106.7l50.3 89.6c8.4 14.9 22.8 25.3 39.5 28.7l76.2 15.2c13.9 2.8 26.5 10.2 35.6 21.1l66.1 78.8c3.5 4.2 9.1 6 14.4 4.7l.9-.2c7.7-1.9 12.4-9.6 10.6-17.3-.3-1.1-.7-2.2-1.2-3.3l-60.7-117c-5.4-10.3-14.7-17.9-25.9-21.1l-25.1-7 9.5-7.9c11.1-9.2 24-16 37.8-20L448 214.5c7.6-2.2 12-10.2 9.8-17.8-1.9-6.6-8.2-10.9-15-10.4z" style="fill:#f56c6c" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1058"><style>#icon-warnings-1058 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M239.3 295.1h.2c2.6-27.6 25.8-49.3 54.1-49.3 30 0 54.3 24.3 54.3 54.3 0 29-22.7 52.7-51.4 54.2v.1h-57.3c-16.4 0-29.7-13.3-29.7-29.7.1-16.3 13.4-29.6 29.8-29.6z" /><path class="prefix__st0" d="M450.7 295.1h-.2c-2.6-27.6-25.8-49.3-54.1-49.3-30 0-54.3 24.3-54.3 54.3 0 29 22.7 52.7 51.4 54.2v.1h57.3c16.4 0 29.7-13.3 29.7-29.7-.1-16.3-13.4-29.6-29.8-29.6z" /><path d="M408.8 268.4c-8.8-29.9-36.3-51.7-69.1-51.7-39.3 0-71.2 31.5-71.9 70.6-18.3 2.1-32.5 17.7-32.5 36.5 0 20.3 16.5 36.8 36.8 36.8h131.2c25.6 0 46.3-20.7 46.3-46.3 0-23.7-17.8-43.2-40.8-45.9z" fill="#f6f6f6" /><path d="M341.6 350.5h40.3l-60.5 81.9v-54.7h-34.7l74.7-101zm-84.3 22.3h21.5l-32.3 43.7v-29.2H228l39.8-53.9zm161.8 3.9h21.6l-32.4 43.8v-29.3h-18.4l39.8-53.9z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#f7ad44" /><path d="M157 41.9 50.2 378.4l.9.3c9.7 3.1 20.1-2.3 23.1-12.1L174.7 47.4 157 41.9z" fill="#f15a24" /><path d="M139.5 36.4 39.1 355.6c-3 9.4 2 19.4 11.1 22.8L157 41.9l-17.5-5.5z" fill="#f7931e" /><path fill="#1088e2" d="m174.3 47.7-66.8 212.4 49-24.9 55.1-174.8z" /><path fill="#0391ff" d="m211.6 60.4-55.1 174.8 50.8-25.8 42.8-135.9z" /><path fill="#0396ff" d="m250.1 73.5-42.8 135.9 51.3-26.1L289 86.7z" /><path fill="#3fa9f5" d="m289 86.7-30.4 96.6 61.1-31 15.7-49.8z" /><path d="m353.1 108.5-17.7-6-15.7 49.8 35.3-17.9c11.1-5.6 9.9-21.9-1.9-25.9z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1059"><path d="M407.3 284.9c-3.6 0-7 1.3-9.7 3.6L250 417.8 102.4 288.5c-2.7-2.3-6.1-3.6-9.7-3.6H56.4c-1.7 0-3 1.4-3 3.1 0 .9.4 1.7 1 2.2l189.5 166c3.5 3 8.6 3 12.1 0l189.5-166c1.2-1.1 1.4-3 .2-4.3-.6-.6-1.4-1-2.2-1h-36.2z" fill="#a0cfff" /><path d="M244 381.7c3.5 3 8.6 3 12.1 0l189.5-166c1.2-1.1 1.4-3 .2-4.3-.6-.6-1.4-1-2.2-1h-36.3c-3.6 0-7 1.3-9.7 3.6L250 343.3 102.4 214c-2.7-2.3-6.1-3.6-9.7-3.6H56.4c-1.7 0-3 1.4-3 3.1 0 .9.4 1.7 1 2.2l189.6 166z" fill="#66b1ff" /><path d="M245.3 306.2c2.7 2.3 6.6 2.3 9.3 0l185.9-162.8c3.7-3.3 4.1-9 .8-12.8-1.7-1.9-4.2-3.1-6.7-3.1H367V55.7c0-7.8-6.3-14.1-14.1-14.1H143.3c-7.8 0-14.1 6.3-14.1 14.1v71.9H65.4c-5 0-9 4-9.1 9 0 2.6 1.1 5.1 3.1 6.9.1-.1 185.9 162.7 185.9 162.7z" fill="#409eff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1061"><style>#icon-warnings-1061 .prefix__st3{fill:#c69c6d}#icon-warnings-1061 .prefix__st3,#icon-warnings-1061 .prefix__st4,#icon-warnings-1061 .prefix__st5{fill-rule:evenodd;clip-rule:evenodd}#icon-warnings-1061 .prefix__st4{fill:#b3b3b3}#icon-warnings-1061 .prefix__st5{fill:#c7b299}</style><path d="M420.9 179.2c3-7.5-.7-15.9-8.2-18.9-7.5-3-15.9.7-18.9 8.2-2.4 6-61.8 146.5-310.6 152-8 .1-14.5 6.7-14.4 14.7.1 8 6.7 14.5 14.7 14.4h.3c269.3-6 334.5-163.7 337.1-170.4z" fill-rule="evenodd" clip-rule="evenodd" fill="#e6e6e6" /><path d="M181.7 244.2c15.9 0 28.7-12.9 28.7-28.7s-12.9-28.7-28.7-28.7-28.7 12.8-28.7 28.7c0 15.9 12.8 28.7 28.7 28.7z" fill-rule="evenodd" clip-rule="evenodd" fill="#a67c52" /><path class="prefix__st3" d="M293.7 201.9c15.9 0 28.7-12.9 28.7-28.7 0-15.9-12.9-28.7-28.7-28.7-15.9 0-28.7 12.9-28.7 28.7 0 15.9 12.9 28.7 28.7 28.7z" /><path class="prefix__st4" d="M361.2 316.2c-15.9 0-28.7 12.9-28.7 28.7 0 15.9 12.9 28.7 28.7 28.7 15.9 0 28.7-12.9 28.7-28.7 0-15.9-12.8-28.7-28.7-28.7z" /><path class="prefix__st5" d="M287.3 352.2c-9.6 0-17.3 7.8-17.3 17.3 0 9.6 7.8 17.3 17.3 17.3 9.6 0 17.3-7.8 17.3-17.3.1-9.5-7.7-17.3-17.3-17.3z" /><path class="prefix__st3" d="M413.7 265.2c-9.6 0-17.3 7.8-17.3 17.3s7.8 17.3 17.3 17.3c9.6 0 17.3-7.8 17.3-17.3s-7.7-17.3-17.3-17.3z" /><path class="prefix__st5" d="M130.8 276.1c10.2 0 18.5-8.3 18.5-18.5s-8.3-18.5-18.5-18.5-18.5 8.3-18.5 18.5 8.3 18.5 18.5 18.5z" /><path class="prefix__st4" d="M240.9 144.5c8.7 0 15.7-7 15.7-15.7s-7-15.7-15.7-15.7-15.7 7-15.7 15.7 7.1 15.7 15.7 15.7z" /><path d="M231.5 250c0 10.2 8.3 18.5 18.5 18.5s18.5-8.3 18.5-18.5-8.3-18.5-18.5-18.5-18.5 8.3-18.5 18.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#c8aa96" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1064"><style>#icon-warnings-1064 .prefix__st1{fill:#e3e3e3}</style><path d="M396.3 268.4c-31 0-56.3 25.3-56.3 56.3s25.3 56.3 56.3 56.3 56.3-25.3 56.3-56.3-25.4-56.3-56.3-56.3z" fill="#f2f2f2" /><path class="prefix__st1" d="M71.1 199.9h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1h-97c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path d="m178.8 350.6 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.7-7.4-17.6zm-54.9-5 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm167.3 8.7 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.3-10.7-7.4-17.6zM69 345.6l7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L94 355.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.3-10.7-7.4-17.6zm167 5 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /><path d="M420.7 350.3c-1.6 1.9-4.4 2.1-6.3.6l-20.8-17.5c-.1-.1-.2-.3-.3-.4 0 0 0-.1-.1-.1-.4-.4-.7-.8-.8-1.3-.1-.2-.1-.4-.2-.7-.1-.3-.2-.6-.2-.9 0-.1-.1-.2-.1-.3v-27.1c0-2.5 2-4.5 4.5-4.5s4.5 2 4.5 4.5v25.1l19.2 16.1c1.9 1.8 2.2 4.6.6 6.5z" fill="#f15a24" /><path class="prefix__st1" d="M429.1 199.9h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h9.1c9.4-21.1 30.6-35.8 55.1-35.8 22.8 0 42.7 12.8 53 31.6 17.7-7.8 30.1-25.5 30.1-46.1 0-27.8-22.5-50.3-50.3-50.3z" /><path d="M396.3 264.7c7.7 0 15.2 1.5 22 4.2 5.8-10.9 9-23.3 9-36.5 0-40.2-30.2-73.2-69.1-77.8C343.3 104 296.6 67 241.2 67c-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3h211c6.4-26.4 30.3-46.1 58.6-46.1z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1101"><path fill="#f1f1f1" d="M379 272.8H198.3l41.5-113.5 162.4 43.6z" /><path d="M274.7 224c1.6-5 7-7.8 12-6.2l48.1 15.5c5 1.6 7.8 7 6.2 12.1l-8.8 27.4H259l15.7-48.8z" fill="#c3c3c3" /><path d="m322.1 115-100.3 27c-6.5 1.8-6.5 11.1 0 12.8l196.3 52.6c6.5 1.8 11.2-6.3 6.4-11.1l-73.4-73.6c-7.6-7.6-18.6-10.5-29-7.7z" fill="#d35b41" /><path d="M427.8 270.2c-3.3-1.9-82.4-45.9-199.7-6.3-54 18.2-142.9 3.2-143.7 3-10.3-1.5-20 5.6-21.5 16-1.5 10 5.1 19.4 15 21.3 2.4.4 38.3 6.5 80.3 6.5 27.3 0 57.2-2.6 82.1-11 100.3-33.8 166.1 1.8 168.8 3.3 9 5.1 20.6 2 25.9-7 5-9.1 1.8-20.6-7.2-25.8zm0 75.3c-3.3-1.9-82.4-45.9-199.7-6.3-54 18.2-142.9 3.2-143.7 3-10.3-1.5-20 5.6-21.5 16-1.5 10 5.1 19.4 15 21.3 2.4.4 38.3 6.5 80.3 6.5 27.3 0 57.2-2.6 82.1-11 100.3-33.8 166.1 1.8 168.8 3.3 9 5.1 20.6 2 25.9-7 5-9.1 1.8-20.6-7.2-25.8z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1302"><path fill="#8c6239" d="M140.1 467.3h157.7l-36.4-205.1z" /><path fill="#754c24" d="m308.4 62.4-83.7 56.5 1.8 137.8 34.9 5.5 36.4 205.1h184.8z" /><path d="M257.9 69.5c7.6-10.2 5.4-24.7-4.8-32.3-10.2-7.6-24.7-5.4-32.3 4.8-.1.2-.2.3-.4.5-7.3 10.4-4.8 24.8 5.7 32.1 10.3 7.2 24.3 4.9 31.8-5.1zm-86.6 249.9c7.6-10.2 5.4-24.7-4.8-32.3-10.2-7.6-24.7-5.4-32.3 4.8-.1.2-.2.3-.4.5-7.3 10.4-4.8 24.8 5.7 32.1 10.3 7.2 24.3 4.9 31.8-5.1z" style="fill:#c69c6d" /><path d="M199.2 123.4c10.8-14.1 8.2-34.2-5.8-45.1-14.1-10.8-34.2-8.2-45.1 5.8-.4.5-.8 1.1-1.2 1.7-9.9 14.7-6 34.7 8.7 44.6 14.1 9.5 33.1 6.5 43.4-7z" fill="#fbb03b" /><circle cx="142.2" cy="207.3" r="43.9" fill="#603813" /><path d="M109.3 341.1c-26-18.7-62.2-12.9-80.9 13.1s-12.9 62.2 13.1 80.9 62.2 12.9 80.9-13.1c18.7-26 12.9-62.2-13.1-80.9z" fill="#a67c52" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1402"><style>#icon-warnings-1402 .prefix__st0{fill:#f15a24}#icon-warnings-1402 .prefix__st1{fill:#f7931e}#icon-warnings-1402 .prefix__st2{fill:#1088e2}#icon-warnings-1402 .prefix__st3{fill:#0391ff}#icon-warnings-1402 .prefix__st4{fill:#0396ff}#icon-warnings-1402 .prefix__st5{fill:#3fa9f5}#icon-warnings-1402 .prefix__st6{fill:#abdcff}</style><path class="prefix__st0" d="M168.4 83.9 61.6 420.4l.9.3c9.7 3.1 20.1-2.3 23.1-12.1L186.1 89.4l-17.7-5.5z" /><path class="prefix__st1" d="M150.9 78.4 50.5 397.7c-3 9.4 2 19.4 11.1 22.8L168.4 83.9l-17.5-5.5z" /><path class="prefix__st2" d="m185.7 89.7-66.8 212.4 49-24.9L223 102.4z" /><path class="prefix__st3" d="m223 102.4-55.1 174.8 50.8-25.8 42.8-135.9z" /><path class="prefix__st4" d="m261.5 115.5-42.8 135.9 51.3-26 30.4-96.7z" /><path class="prefix__st5" d="M300.4 128.7 270 225.4l61.1-31.1 15.7-49.8z" /><path class="prefix__st6" d="m364.5 150.5-17.7-6-15.7 49.8 35.3-17.9c11.1-5.6 9.9-21.9-1.9-25.9z" /><path class="prefix__st0" d="M338.5 237.8 280.3 421c.2.1.3.1.5.2 5.3 1.7 10.9-1.3 12.6-6.6L348 240.8l-9.5-3z" /><path class="prefix__st1" d="m328.9 234.8-54.7 173.8c-1.6 5.1 1.1 10.6 6.1 12.4l58.2-183.2-9.6-3z" /><path class="prefix__st2" d="m347.8 240.9-36.3 115.6 26.7-13.5 30-95.1z" /><path class="prefix__st3" d="m368.2 247.9-30 95.1 27.6-14 23.3-74z" /><path class="prefix__st4" d="m389.1 255-23.3 74 27.9-14.2 16.6-52.6z" /><path class="prefix__st5" d="m410.3 262.2-16.6 52.6 33.3-16.9 8.5-27.1z" /><path class="prefix__st6" d="m445.2 274.1-9.7-3.3-8.6 27.1 19.2-9.8c6.1-3 5.5-11.9-.9-14z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1601"><path d="M241.1 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8 12.6 0 22.8-10.2 22.8-22.8.1-9.5-5.7-17.6-13.9-21z" fill="#ff6464" /><path d="M272 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.5-10.3-40.6-26.3-52.8zm-39.8 104.1c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2H238c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.6-23.1 51.5-51.4 51.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path d="M415.7 172.3c-8 3.5-13.2 9.1-16.3 15.1-2.4 4.6-9.2 4.1-10.7-.9-4.1-13.3-3.6-27.8-1-45.5.7-4.5-3.9-8-8.1-6.2-26.8 11.9-33.3 38.1-35.7 58.3-.8 6.7-10.4 6.9-11.5.3-.2-1.4-.4-2.8-.6-4.1-.6-4.8-6.5-6.8-9.9-3.4-7.9 7.8-12.7 20.1-13.9 30.8-3.9 35.1 21.6 63.9 55.7 67.6 34 3.7 63.7-18.9 67.6-54.1 2.1-18.9-8.8-27.6-7.1-52.1 0-4.4-4.5-7.5-8.5-5.8z" fill="#ff7b15" /><path d="M384.7 238.3c-2.5 1.1-4.1 2.9-5.2 4.7-.9 1.6-3.3 1.4-3.9-.4-1.3-4.3-1.1-9-.3-14.7.2-1.6-1.4-2.9-2.9-2.2-8.4 3.9-10.8 12-11.6 18.6-.3 2.4-3.8 2.4-4.1 0v-.1c-.2-1.7-2.4-2.4-3.6-1.2-2.5 2.6-4.1 6.6-4.5 10.1-1.3 11.8 7.3 21.4 18.7 22.7 11.4 1.3 21.4-6.4 22.7-18.2.7-6.3-2.9-9.2-2.4-17.3.1-1.5-1.5-2.6-2.9-2z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1602"><path d="M458.9 155.9c-56 37.9-153.3 36.7-264.5 13-105.5-22.4-167.1 29.4-167.1 29.4 96.6-2.2 178.3 28.6 249.9 42.2 169.6 32.3 181.7-84.6 181.7-84.6z" fill="#409eff" /><path d="M408.6 265s-99.2 30.6-179.7-12.6c-69.2-37.1-147.1-40.6-181.1-22.5 0 0 52.9-7.9 142.4 51.1 93.4 61.4 168.1 26.6 218.4-16z" fill="#94d0ff" /><path d="M83.7 131.2c.6-.2 64.5-6.8 113.1 8.3 31.8 10 58.1 14.9 79.7 14.9 17.3 0 31.6-3.2 43.6-9.4 14.9-7.8 26.1-21.3 30.8-37.5 7.5-24.1 4.1-47.7-9.4-66.4S306 11 282.6 10.5c-19.8-.1-38.8 7.9-52.4 22.2-8.1 8.5-7.9 22 .6 30.1 8.5 8.1 22 7.9 30.1-.6 5.4-5.8 13-9 20.9-9.1 9.6.2 19.5 5.3 25 13 5.7 7.8 6.7 17.5 3.2 28.8-1.4 5.4-5 9.9-9.9 12.4-8.9 4.7-32.5 9.8-90.8-8.4C152.2 81 82 88.4 79 88.8c-11.7 1.3-20.1 11.8-18.8 23.5 1.3 11.7 11.9 19.6 23.5 18.9zm311.7 193.1c-22.2-3.7-45.6 3.7-70.4 11.4-15.4 4.8-31.4 9.8-47.6 12.4-73.7 11.8-149.7-59.6-150.4-60.3-8.5-8.2-22-7.9-30.1.6-8.2 8.5-7.9 22 .6 30.1 3.7 3.5 91.4 86.7 186.6 71.7 19.3-3 37.6-8.8 53.7-13.8 19.9-6.2 38.7-12 50.6-10 5.9 1 20.2 5.2 25.8 23.1 5.3 17.4-4.5 35.8-21.9 41.1-10.4 3.2-21.7 1-30.2-5.7-9.2-7.3-22.6-5.9-30 3.3-7.4 9.2-5.9 22.6 3.3 30 32.5 26.1 80 20.9 106.2-11.6 15.7-19.5 20.7-45.6 13.3-69.6-8.8-28.3-31-47.9-59.5-52.7z" style="fill:#d9ecff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1603"><style>#icon-warnings-1603 .prefix__st0{fill:#754c24}#icon-warnings-1603 .prefix__st1{fill:#8c6239}#icon-warnings-1603 .prefix__st2{fill:#c69c6d}</style><path class="prefix__st0" d="m427.2 118.5-40.8 23.2-179 309.8h258.9l-39.1-333z" /><path class="prefix__st1" d="m347.5 209.9-63.1 19.4-138.2 222.2h279.9l-78.6-241.6z" /><path class="prefix__st2" d="m253.8 281.6-99.7 22.2-104 147.7h221.7zm86-91.3c6.8-8.8 5.2-21.6-3.6-28.4-8.8-6.8-21.6-5.2-28.4 3.6-.3.4-.5.7-.8 1.1-6.2 9.3-3.8 21.9 5.5 28.1 8.8 6 20.8 4 27.3-4.4z" /><path d="M184.3 305.3c7.6-10.5 5.2-25.2-5.3-32.7-10.5-7.6-25.2-5.2-32.7 5.3s-5.2 25.2 5.3 32.7c10.5 7.6 25.1 5.2 32.7-5.3z" fill="#a67c52" /><path class="prefix__st2" d="M133.3 236.4c8.4-11.6 5.8-27.8-5.8-36.2s-27.8-5.8-36.2 5.8c-8.4 11.6-5.8 27.8 5.8 36.2 11.7 8.5 27.9 5.9 36.2-5.8z" /><path class="prefix__st1" d="M379.8 100.8c10.8-14.4 8-34.9-6.4-45.7-14.4-10.8-34.9-8-45.7 6.4-.3.3-.5.7-.8 1-10.3 14.8-6.6 35.1 8.2 45.4 14.4 10 34.1 6.9 44.7-7.1z" /><circle class="prefix__st2" cx="232.9" cy="107.4" r="32.7" /><path class="prefix__st0" d="M257 244.6c15-19.6 11.2-47.6-8.4-62.6s-47.6-11.2-62.6 8.4c-.5.6-.9 1.3-1.4 1.9-13.9 20.4-8.7 48.1 11.7 62 19.7 13.5 46.3 9.2 60.7-9.7z" /><path d="M92.8 375.3c-16.7-12.1-40-8.3-52.1 8.4s-8.3 40 8.4 52.1c16.7 12.1 40 8.3 52.1-8.4 12-16.7 8.3-40-8.4-52.1z" fill="#603813" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1604"><style>#icon-warnings-1604 .prefix__st0{fill:#e99311}#icon-warnings-1604 .prefix__st1{fill:#e96a11}</style><path class="prefix__st0" d="M247.3 253.1c34-11.4 71.3-7.7 102.5 10.2 60.5 34.9 81.2 112.2 46.3 172.7-6.7 11.2-15.1 21.3-24.9 29.9 88.4-65.5 107-190.3 41.5-278.7-16.2-21.9-36.8-40.3-60.4-53.9-25.2-14.5-53.3-23.3-82.3-25.8 4.3 40.1-3.3 91.2-22.7 145.6z" /><path class="prefix__st1" d="M271 138.9c23.9 3.8 47 11.9 68 24 23.6 13.6 44.2 32 60.4 53.9 41 55.3 49 124.8 27.7 185.1 36.3-66.1 33.3-150.1-14.5-214.6-16.2-21.9-36.8-40.3-60.4-53.9-25.2-14.5-53.3-23.3-82.3-25.8 1.1 9.8 1.5 20.3 1.1 31.3z" /><path class="prefix__st0" d="M251.3 253.9c7.2-35.2 29-65.6 60.1-83.6 60.5-34.9 137.8-14.2 172.7 46.3 6.4 11.4 10.9 23.7 13.5 36.5C485.1 143.7 386.3 65.3 277 77.8c-27.1 3.1-53.3 11.7-76.9 25.4-25.2 14.6-46.8 34.5-63.5 58.4 36.9 16.1 77.4 48.3 114.7 92.3z" /><path class="prefix__st1" d="M164.3 176.2c15.2-18.8 33.8-34.7 54.8-46.9 23.6-13.6 49.8-22.3 76.9-25.4 68.4-7.8 132.6 19.9 174.2 68.5C431 108 356.8 68.7 277 77.8c-27.1 3.1-53.3 11.7-76.9 25.4-25.2 14.6-46.8 34.5-63.5 58.4 9.1 3.9 18.3 8.8 27.7 14.6z" /><path class="prefix__st0" d="M254 250.8c-26.9-23.8-42.3-57.9-42.4-93.8 0-69.8 56.6-126.4 126.4-126.4 13.1.2 26 2.4 38.4 6.6-100.9-43.9-218.2 2.4-262 103.3-10.9 25-16.5 52-16.5 79.3 0 29.1 6.5 57.8 18.8 84.1 32.5-23.8 80.5-42.7 137.3-53.1z" /><path class="prefix__st1" d="M143.2 287.4c-8.7-22.6-13.2-46.6-13.2-70.9 0-27.3 5.6-54.3 16.5-79.3C173.9 74.1 230.1 32.3 293 20.6c-75.4 1.6-146.6 46.2-178.6 119.9-10.9 25-16.5 52-16.5 79.3 0 29.1 6.5 57.8 18.8 84.1 8-5.8 16.8-11.3 26.5-16.5z" /><path class="prefix__st0" d="M252.7 246.9c-34 11.4-71.3 7.7-102.5-10.2C89.8 201.8 69 124.5 103.9 64c6.7-11.2 15.1-21.3 24.9-29.9-88.4 65.5-107 190.3-41.5 278.7 16.2 21.9 36.8 40.3 60.4 53.9 25.2 14.5 53.3 23.3 82.3 25.8-4.3-40.1 3.3-91.2 22.7-145.6z" /><path class="prefix__st1" d="M229 361.1c-23.9-3.8-47-11.9-68-24-23.6-13.6-44.2-32-60.4-53.9-41-55.3-49-124.8-27.7-185.1-36.3 66.1-33.3 150.1 14.5 214.6 16.2 21.9 36.8 40.3 60.4 53.9 25.2 14.5 53.3 23.3 82.3 25.8-1.1-9.8-1.5-20.3-1.1-31.3z" /><path class="prefix__st0" d="M248.7 246.1c-7.2 35.2-29 65.6-60.1 83.6-60.5 35-137.8 14.3-172.7-46.2C9.5 272.1 5 259.8 2.4 247 14.9 356.3 113.7 434.7 223 422.2c27.1-3.1 53.3-11.7 76.9-25.4 25.2-14.6 46.8-34.5 63.5-58.4-36.9-16.1-77.4-48.3-114.7-92.3z" /><path class="prefix__st1" d="M335.7 323.8c-15.2 18.8-33.8 34.7-54.8 46.9-23.6 13.6-49.8 22.3-76.9 25.4-68.4 7.8-132.6-19.9-174.2-68.5C69 392 143.2 431.3 223 422.2c27.1-3.1 53.3-11.7 76.9-25.4 25.2-14.6 46.8-34.5 63.5-58.4-9.1-3.9-18.3-8.8-27.7-14.6z" /><path class="prefix__st0" d="M246 249.2c26.9 23.8 42.3 57.9 42.4 93.8 0 69.8-56.6 126.4-126.4 126.4-13.1-.2-26-2.4-38.4-6.6 100.9 43.8 218.3-2.5 262.1-103.4 10.9-25 16.5-52 16.5-79.3 0-29.1-6.5-57.8-18.8-84.1-32.6 23.9-80.6 42.8-137.4 53.2z" /><path class="prefix__st1" d="M370.3 283.6c0 27.3-5.6 54.3-16.5 79.3-27.4 63.1-83.5 104.9-146.5 116.6 75.4-1.6 146.6-46.2 178.6-119.9 6.3-14.5 10.8-29.7 13.5-45.3l-30.2-50.8c.7 6.7 1.1 13.4 1.1 20.1z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1605"><path d="m284.7 73.8 182.5 316c7.2 12.4-1.8 28-16.2 28H86.1c-14.4 0-23.3-15.6-16.2-28l182.5-316c7.2-12.4 25.1-12.4 32.3 0z" fill="#f16524" /><path d="M311.1 261.3c-8 3.5-13.2 9.1-16.3 15.1-2.4 4.6-9.2 4.1-10.7-.9-4.1-13.3-3.6-27.8-1-45.5.7-4.5-3.9-8-8.1-6.2-26.8 11.9-33.3 38.1-35.7 58.3-.8 6.7-10.4 6.9-11.5.3-.2-1.4-.4-2.8-.6-4.1-.6-4.8-6.5-6.8-9.9-3.4-7.9 7.8-12.7 20.1-13.9 30.8-3.9 35.1 21.6 63.9 55.7 67.6 34 3.7 63.7-18.9 67.6-54.1 2.1-18.9-8.8-27.6-7.1-52.1 0-4.4-4.5-7.5-8.5-5.8z" fill="#ff7b15" /><path d="M280.1 327.3c-2.5 1.1-4.1 2.9-5.2 4.7-.9 1.6-3.3 1.4-3.9-.4-1.3-4.3-1.1-9-.3-14.7.2-1.6-1.4-2.9-2.9-2.2-8.4 3.9-10.8 12-11.6 18.6-.3 2.4-3.8 2.4-4.1 0v-.1c-.2-1.7-2.4-2.4-3.6-1.2-2.5 2.6-4.1 6.6-4.5 10.1-1.3 11.8 7.3 21.4 18.7 22.7 11.4 1.3 21.4-6.4 22.7-18.2.7-6.3-2.9-9.2-2.4-17.3.1-1.5-1.5-2.6-2.9-2z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1606"><path d="M357 461H59.6c-6.6 0-12-5.4-12-12V51c0-6.6 5.4-12 12-12H357c6.6 0 12 5.4 12 12v398c0 6.6-5.4 12-12 12zM241.3 238V78c0-6.6-5.4-12-12-12H94.2c-6.6 0-12 5.4-12 12v160c0 6.6 5.4 12 12 12h135.1c6.6 0 12-5.4 12-12zM354.5 84.9V78c0-6.6-5.4-12-12-12h-71c-6.6 0-12 5.4-12 12v6.8c0 6.6 5.4 12 12 12h71c6.6.1 12-5.3 12-11.9zm0 51.5v-6.8c0-6.6-5.4-12-12-12h-71c-6.6 0-12 5.4-12 12v6.8c0 6.6 5.4 12 12 12h71c6.6 0 12-5.4 12-12z" fill="#ff931e" /><path d="M307.1 366c-12 10.3-108.4 55-118 61-5.9 3.7-56.2 21-93.8 33.7H357c6.6 0 12-5.4 12-12V219.1c-7.7 24.6-23 72.9-24.5 75.8-2 3.9-25.4 60.8-37.4 71.1z" fill="#ff6c1e" /><path d="M328.5 273.2c-45.3 16.1-69.6-1.1-71.1-2.2-8.2-5.9-19.7-4-25.6 4.2-5.5 7.7-4.3 18.3 2.9 24.5 1.2.9 21.6 16.8 57.5 16.8 13.9 0 30.1-2.4 48.5-8.9 55.8-19.8 81.1-1.7 81.8-1.2 8 6.2 19.5 4.7 25.7-3.3 5.9-7.6 4.9-18.5-2.3-24.9-4.1-3.2-41.9-31.9-117.4-5zm0 66.1c-45.3 16.1-69.6-1.1-71.1-2.2-8.2-5.9-19.7-4-25.6 4.2-5.5 7.7-4.3 18.3 2.9 24.5 1.2.9 21.6 16.8 57.5 16.8 13.9 0 30.1-2.4 48.5-8.9 55.8-19.9 81.1-1.7 81.8-1.2 7.8 6.4 19.3 5.3 25.7-2.4 6.4-7.8 5.3-19.3-2.4-25.7-4-3.4-41.8-32-117.3-5.1zm0 66c-45.3 16.1-69.6-1.1-71.1-2.2-8.2-5.9-19.7-4-25.6 4.2-5.5 7.7-4.3 18.3 2.9 24.5 1.2.9 21.6 16.8 57.5 16.8 13.9 0 30.1-2.4 48.5-8.9 55.9-19.9 81.1-1.7 81.8-1.2 8 6.2 19.5 4.7 25.7-3.3 5.9-7.6 4.9-18.5-2.3-24.9-4.1-3.2-41.8-31.9-117.4-5z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-1607"><style>#icon-warnings-1607 .prefix__st0{fill:#3fa9f5}</style><path class="prefix__st0" d="M241.1 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8 12.6 0 22.8-10.2 22.8-22.8 0-9.5-5.8-17.6-13.9-21z" /><path d="M272 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.5-10.3-40.6-26.3-52.8zm-39.8 104.1c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2H238c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.6-23.1 51.5-51.4 51.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path class="prefix__st0" d="M358 87.6c-7.1 0-12.9 5.8-12.9 12.9v22l-19.1-11c-6.2-3.5-14-1.4-17.6 4.7-3.5 6.2-1.4 14 4.7 17.6l19.1 11-19.1 11c-6.1 3.6-8.3 11.4-4.7 17.6 3.6 6.1 11.4 8.2 17.6 4.7l19.1-11v22c0 7.1 5.8 12.9 12.9 12.9s12.9-5.8 12.9-12.9v-22l19.1 11c6.2 3.6 14 1.4 17.6-4.7s1.4-14-4.7-17.6l-19.1-11 19.1-11c6.2-3.6 8.3-11.4 4.7-17.6-3.6-6.2-11.4-8.3-17.6-4.7l-19.1 11v-22c0-7.1-5.8-12.9-12.9-12.9z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2001"><path d="m195.6 41.7-134 422c.4.1.8.3 1.2.4 12.2 3.8 25.1-2.9 29-15.1L217.7 48.7l-22.1-7z" fill="#f15a24" /><path d="M173.6 34.8 47.7 435.1c-3.7 11.8 2.5 24.3 14 28.6l134-422-22.1-6.9z" fill="#f7931e" /><path fill="#1088e2" d="m217.2 49-83.7 266.3 61.4-31.2L264 64.9z" /><path fill="#0391ff" d="m264 64.9-69.1 219.2 63.7-32.4 53.7-170.4z" /><path fill="#0396ff" d="m312.3 81.3-53.7 170.4 64.3-32.6 38.2-121.2z" /><path fill="#3fa9f5" d="m361.1 97.9-38.2 121.2 76.6-38.9 19.7-62.5z" /><path d="m441.4 125.3-22.2-7.6-19.7 62.5 44.2-22.5c14-7.1 12.5-27.4-2.3-32.4z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2002"><style>#icon-warnings-2002 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M71 198.3h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1H71c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path class="prefix__st0" d="M429 198.3h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path d="M358.1 153c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.1-77.8z" fill="#f6f6f6" /><path d="M119.2 370.4h-6.1l3.1-5.3c3.3-5.9 1.3-13.3-4.6-16.6-5.8-3.3-13.2-1.3-16.6 4.4l-3 5.2-3.1-5.2c-3.4-5.8-10.9-7.8-16.7-4.4-5.8 3.4-7.7 10.8-4.4 16.6l3.1 5.3h-6.1c-6.7 0-12.2 5.5-12.2 12.2 0 6.7 5.5 12.2 12.2 12.2h6.1l-3 5.3c-3.4 5.8-1.4 13.3 4.5 16.7s13.3 1.4 16.7-4.5l3-5.2 3 5.2c3.8 5.6 11.5 7 17 3.2 5-3.4 6.7-9.9 4.1-15.4l-3.1-5.3h6.1c6.7 0 12.2-5.5 12.2-12.2 0-6.7-5.5-12.2-12.2-12.2zm291.8 0h-6.1l3.1-5.3c3.3-5.9 1.3-13.3-4.6-16.6-5.8-3.3-13.2-1.3-16.6 4.4l-3 5.2-3-5.2c-3.4-5.8-10.9-7.8-16.7-4.4-5.8 3.4-7.7 10.8-4.4 16.6l3.1 5.3h-6.1c-6.7 0-12.2 5.5-12.2 12.2 0 6.7 5.5 12.2 12.2 12.2h6.1l-3.1 5.3c-3.4 5.8-1.4 13.3 4.5 16.7 5.8 3.4 13.3 1.4 16.7-4.5l3-5.2 3 5.2c3.8 5.6 11.5 7 17 3.2 5-3.4 6.7-9.9 4.1-15.4l-3.1-5.3h6.1c6.7 0 12.2-5.5 12.2-12.2 0-6.7-5.5-12.2-12.2-12.2zm-249.9-4.6 32.7 68.8 33.9-68.8-33.9-36.5zm89.5 0 32.7 68.8 33.9-68.8-33.9-36.5z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2003"><path d="M360.3 169.5c-12.3-42-51.2-72.8-97.3-72.8-55.4 0-100.4 44.3-101.3 99.5-25.7 3-45.8 24.9-45.8 51.5 0 28.6 23.2 51.8 51.8 51.8h184.9c36 0 65.2-29.2 65.2-65.2 0-33.4-25.2-60.9-57.5-64.8z" fill="#f6f6f6" /><path d="M198.4 195.8H94.8c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h103.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm59 2.3h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zm48.3 136H148.4c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.6 12.6-12.5 12.6zm79.5 34.6H228c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zM294 403.3H136.8c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6H294c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm-24.6-161.4H94.8c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h174.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2004"><path d="M273.9 75.1c-59.4-7.1-94.5-.9-109.5 6.2-29.7 11.3-45.6 29.1-45.6 54.4 0 28.1 32.5 51 72.6 51 4.2 0 8.1-.3 12.1-.7-21-5-28.7-25.8-28.7-32.4 0-15.5 9.3-31.3 36.4-35.8 0 0 21.8-5.6 61.7 2.8 56.4 16.3 72.9 35.9 88.1 65.7 19 47.2 2.9 110-27.4 145.6-57.9 68-201.3 90.1-201.3 90.1C278 394.7 343.1 330.1 356 246.5c8.4-110.9-127.1-137.1-148.3-68.4 18.8-12.8 39.4-10.1 59.9-3.5 47.3 25.1 40.6 64.7 36.3 86.4-9.6 49.1-47.3 96.7-102.6 125.7C143.2 412 66.7 423.6 41 428h156.4c13-.6 68.9-3.3 98.9-11.9C378.1 392.7 459 336.6 459 245.9c0-90.9-91.1-159.5-185.1-170.8z" fill="#3fa9f5" /><path d="M118.1 391.2c-17 10.4-75.5 30.5-75.5 30.5s54.2-3.8 98.1-18.4c39.4-13.1 58-26.6 76.4-47.6 16.8-19.1 32.8-77.5-26.7-105.4-34.6-16.2-82.7-16.6-102.5 3.1-23.6 23.4-5.3 43.8-5.3 43.8s7-18.7 30.2-21.9c6.2-.9 30.1.2 42.7 8.9 9.4 6.6 24.5 18.3 16 48.3-6.5 22.8-23.5 40.4-53.4 58.7z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2005"><path d="M254.4 456c-9.7 0-17.5-7.9-17.5-17.5v-254c0-9.7 7.9-17.5 17.5-17.5 9.7 0 17.5 7.9 17.5 17.5v253.9c0 9.7-7.8 17.6-17.5 17.6z" fill="#a67c52" /><path d="m397 315.3-51.2-68.5-15.1-20.2c-25-5.1-43.8-27.1-43.8-53.6 0-1.6.1-3.2.2-4.7l-8.8-11.8c-14.8-19.9-44-19.9-58.8 0L152 246.7l-51.2 68.5c-18.7 25-1.3 61.2 29.4 61.2h237.2c30.9.1 48.3-36.1 29.6-61.1z" fill="#67c23a" /><path d="M357.9 224.6c-12.6 3.9-27.2 3.4-42-3.4-10-4.7-18.2-12.7-22.9-22.7-8.9-18.8-7.4-37.4.4-52l-26.4-32c-9.4-11.4-26.9-11.4-36.3 0L172 185.6l-40.6 49.2c-14.8 18-1 43.9 23.3 43.9h188c24.4 0 38.1-26 23.3-43.9l-8.1-10.2z" fill="#aff3d8" /><path d="m315 127.5-18.7-27.4-32.7-48c-7.2-10.6-21.3-10.6-28.5 0l-32.7 48-24.8 36.4c-9.1 13.3-.6 32.5 14.3 32.5h95.9c1.8-17.8 12.3-33 27.2-41.5z" fill="#f0f9eb" /><path d="M388.6 124.1c-6.9 3-11.4 7.8-14.1 13-2.1 4-7.9 3.5-9.2-.7-3.6-11.4-3.1-23.9-.9-39.2.6-3.9-3.4-6.9-7-5.3-23 10.2-28.7 32.8-30.7 50.2-.7 5.7-9 6-9.9.3-.2-1.2-.4-2.4-.5-3.6-.5-4.2-5.6-5.9-8.5-2.9-6.8 6.7-11 17.3-12 26.5-3.3 30.2 18.6 54.9 47.9 58.2 29.3 3.2 54.8-16.3 58.1-46.6 1.8-16.2-7.6-23.8-6.1-44.8.2-4-3.6-6.6-7.1-5.1z" fill="#ff7b15" /><path d="M361.9 180.9c-2.1 1-3.5 2.5-4.4 4-.8 1.4-2.9 1.2-3.3-.3-1.1-3.7-.9-7.7-.2-12.6.2-1.4-1.2-2.5-2.5-1.9-7.2 3.3-9.3 10.3-10 16-.3 2.1-3.3 2.1-3.6 0v-.1c-.2-1.5-2-2.1-3.1-1-2.2 2.3-3.5 5.7-3.8 8.7-1.1 10.1 6.2 18.5 16.1 19.5 9.8 1.1 18.4-5.5 19.5-15.6.6-5.4-2.5-7.9-2.1-14.9 0-1.4-1.3-2.4-2.6-1.8z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2006"><path d="M42.5 201.6c0 35.8 29 64.8 64.8 64.8s64.8-29 64.8-64.8-64.8-129.5-64.8-129.5-64.8 93.7-64.8 129.5zm142.7 161.5c0 35.8 29 64.8 64.8 64.8s64.8-29 64.8-64.8S250 233.6 250 233.6s-64.8 93.8-64.8 129.5zm207.6-291S328 165.8 328 201.6s29 64.7 64.8 64.7 64.7-29 64.7-64.8c0-35.7-64.7-129.4-64.7-129.4z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2007"><path fill="#f1f1f1" d="M385.5 339.4H204.9l41.5-113.5 162.4 43.6z" /><path d="M281.2 290.6c1.6-5 7-7.8 12-6.2l48.1 15.5c5 1.6 7.8 7 6.2 12.1l-8.8 27.4h-73.2l15.7-48.8z" fill="#c3c3c3" /><path d="m328.7 181.6-100.3 27.1c-6.5 1.8-6.5 11.1 0 12.8L424.6 274c6.5 1.8 11.2-6.3 6.4-11.1l-73.4-73.6c-7.5-7.6-18.6-10.5-28.9-7.7z" fill="#d35b41" /><path d="M434.3 336.8c-3.3-1.9-82.4-45.9-199.7-6.3-54 18.2-142.9 3.2-143.7 3-10.3-1.5-20 5.6-21.5 16-1.5 10 5.1 19.4 15 21.3 2.4.4 38.3 6.5 80.3 6.5 27.3 0 57.2-2.6 82.1-11 100.3-33.8 166.1 1.8 168.8 3.3 9 5.1 20.6 2 25.9-7 5.1-9.1 1.9-20.6-7.2-25.8zm0 75.3c-3.3-1.9-82.4-45.9-199.7-6.3-54 18.2-142.9 3.2-143.7 3-10.3-1.5-20 5.6-21.5 16-1.5 10 5.1 19.4 15 21.3 2.4.4 38.3 6.5 80.3 6.5 27.3 0 57.2-2.6 82.1-11 100.3-33.8 166.1 1.8 168.8 3.3 9 5.1 20.6 2 25.9-7 5.1-9.1 1.9-20.6-7.2-25.8zM109.1 158.4c20.4 0 37-16.6 37-37s-37-74.1-37-74.1-37 53.6-37 74 16.5 37.1 37 37.1zm67.7 48.4c12.7 0 23.1-10.3 23.1-23.1s-23.1-46.2-23.1-46.2-23.1 33.4-23.1 46.2 10.3 23.1 23.1 23.1zm-97.6 53.8c12.7 0 23.1-10.3 23.1-23.1s-23.1-46.2-23.1-46.2-23.1 33.4-23.1 46.2 10.3 23.1 23.1 23.1z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2008"><path d="M170.2 275.4c-8.3 5.2-10.8 16.2-5.6 24.5 5 7.9 15.1 10.6 23.3 6.2l44-25.4v50.8c0 9.8 7.9 17.8 17.7 17.8 9.8 0 17.8-7.9 17.8-17.7v-50.8l44 25.4c8.7 4.6 19.4 1.3 24-7.4 4.3-8.2 1.6-18.4-6.2-23.3l-44-25.4 44-25.4c8.5-4.9 11.4-15.8 6.5-24.2-4.9-8.5-15.8-11.4-24.3-6.5l-44 25.4v-50.8c0-9.8-7.9-17.7-17.7-17.7-9.8 0-17.7 7.9-17.7 17.7v50.8L188 194c-8.7-4.6-19.4-1.3-24 7.4-4.3 8.2-1.6 18.4 6.2 23.3l44 25.4-44 25.3z" fill="#4fc0f2" /><path d="M418.6 142.1 258.9 49.6c-5.5-3.2-12.3-3.2-17.8 0L81.4 142.1c-5.5 3.2-8.9 9.1-8.9 15.4v185c0 6.4 3.4 12.2 8.9 15.4l159.7 92.5c5.5 3.2 12.3 3.2 17.8 0l159.7-92.5c5.5-3.2 8.9-9.1 8.9-15.4v-185c0-6.4-3.4-12.2-8.9-15.4zm-26.7 190.1L250 414.4l-141.9-82.2V167.8L250 85.6l141.9 82.2v164.4z" fill="#7fc6f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2009"><style>#icon-warnings-2009 .prefix__st0{fill:#3fa9f5}</style><path class="prefix__st0" d="M263.2 286.6v-63.4l54.9 31.7c8.2 4.3 18.4 1.1 22.7-7.1 4.1-7.7 1.5-17.3-5.9-22L280 194.1l54.9-31.7c8-4.6 10.8-14.8 6.2-22.9-4.6-8-14.8-10.8-22.9-6.2 0 0-.1 0-.1.1l-54.9 31.7v-63.4c0-9.3-7.5-16.8-16.8-16.8s-16.8 7.5-16.8 16.8v63.4l-54.9-31.7c-8.2-4.3-18.3-1.2-22.7 7-4.1 7.8-1.5 17.4 5.9 22.1l54.9 31.7-54.8 31.7c-8 4.7-10.7 14.9-6.1 22.9 4.6 8 14.8 10.7 22.8 6.1l54.9-31.7v63.4c0 9.3 7.5 16.8 16.8 16.8s16.8-7.5 16.8-16.8z" /><path d="M457.9 415H46c0-19.5 15.8-35.3 35.3-35.3h341.3c19.5 0 35.3 15.8 35.3 35.3z" fill="#a67c52" /><path class="prefix__st0" d="M102 344.8v-33.4l28.9 16.7c4.3 2.3 9.7.6 11.9-3.7 2.1-4.1.8-9.1-3.1-11.6l-28.9-16.7 28.9-16.7c4.2-2.4 5.7-7.8 3.3-12-2.4-4.2-7.8-5.7-12-3.3h-.1L102 280.8v-33.4c0-4.9-4-8.8-8.8-8.8-4.9 0-8.8 4-8.8 8.8v33.4l-28.9-16.7c-4.3-2.3-9.7-.6-11.9 3.7-2.2 4.1-.8 9.2 3.1 11.6l28.9 16.7-28.9 16.7c-4.2 2.5-5.6 7.9-3.2 12.1 2.4 4.2 7.8 5.6 12 3.2l28.9-16.7v33.4c0 4.9 4 8.8 8.8 8.8 4.8 0 8.8-4 8.8-8.8zm306.6 11.1v-33.4l28.9 16.7c4.3 2.3 9.7.6 11.9-3.7 2.1-4.1.8-9.1-3.1-11.6l-28.9-16.7 28.9-16.7c4.2-2.4 5.7-7.8 3.3-12-2.4-4.2-7.8-5.7-12-3.3h-.1l-28.9 16.7v-33.4c0-4.9-4-8.8-8.8-8.8s-8.8 4-8.8 8.8v33.4l-29-16.7c-4.3-2.3-9.7-.6-11.9 3.7-2.2 4.1-.8 9.2 3.1 11.6l28.9 16.7-28.9 16.7c-4.2 2.5-5.6 7.9-3.2 12.1 2.4 4.2 7.8 5.6 12 3.2l28.9-16.7v33.4c0 4.9 4 8.8 8.8 8.8 4.9 0 8.9-3.9 8.9-8.8z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2010"><style>#icon-warnings-2010 .prefix__st1{fill:#a67c52}#icon-warnings-2010 .prefix__st2{fill:#ccc}</style><circle cx="189.6" cy="89" r="29.2" fill="#c7b299" /><circle class="prefix__st1" cx="425.9" cy="196.5" r="29.2" /><circle class="prefix__st1" cx="128.4" cy="387.4" r="38.2" /><circle class="prefix__st2" cx="272.4" cy="129.6" r="21.9" /><path d="M250.8 344.5c-14 0-25.4 11.4-25.4 25.4 0 14 11.4 25.4 25.4 25.4 14 0 25.4-11.4 25.4-25.4 0-14.1-11.4-25.4-25.4-25.4z" fill="#c69c6d" /><path d="M390.3 136c0-50.1-38.1-90.9-84.9-90.9H270c-11.3 0-20.4 9.1-20.4 20.4S258.7 86 270 86h35.4c24.3 0 44 22.4 44 50s-19.7 50-44 50H65.3c-11.3 0-20.4 9.1-20.4 20.4 0 11.3 9.1 20.4 20.4 20.4h240.1c46.8 0 84.9-40.8 84.9-90.8z" fill="#e6e6e6" /><path class="prefix__st2" d="M350.9 267.8H93.1c-11.3 0-20.4 9.1-20.5 20.4s9.1 20.4 20.4 20.5h257.8c26.9 0 48.8 23.6 48.8 52.7 0 29-21.9 52.7-48.8 52.7h-38c-11.3 0-20.4 9.1-20.5 20.4 0 11.3 9.1 20.4 20.4 20.5h38c49.4 0 89.7-42 89.7-93.6.1-51.6-40.1-93.6-89.5-93.6z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2011"><style>#icon-warnings-2011 .prefix__st1{fill:#f15a24}#icon-warnings-2011 .prefix__st2{fill:#f7931e}#icon-warnings-2011 .prefix__st3{fill:#1088e2}#icon-warnings-2011 .prefix__st4{fill:#0391ff}#icon-warnings-2011 .prefix__st5{fill:#0396ff}#icon-warnings-2011 .prefix__st6{fill:#3fa9f5}#icon-warnings-2011 .prefix__st7{fill:#abdcff}</style><path d="M227.2 397.3c3.6-7.7.3-13.9-7.4-13.9-1.9 0-3.9.4-5.9 1.1 5.2-13.1-.8-23.4-14.1-23.4-13.8 0-30.3 11.2-36.8 25.1l-.3.6c-.7-.1-1.4-.2-2.2-.2-6.8 0-14.9 5.5-18.1 12.4-3.2 6.8-.2 12.4 6.6 12.4h58.9v-.1c7.4-.7 15.9-6.7 19.3-14z" fill="#5ac982" /><path class="prefix__st1" d="M170.2 70.1 63.3 406.6l.9.3c9.7 3.1 20.1-2.3 23.1-12.1L187.8 75.6l-17.6-5.5z" /><path class="prefix__st2" d="M152.6 64.6 52.2 383.9c-3 9.4 2 19.4 11.1 22.8L170.2 70.1l-17.6-5.5z" /><path class="prefix__st3" d="m187.4 75.9-66.8 212.4 49-24.9 55.2-174.8z" /><path class="prefix__st4" d="m224.8 88.6-55.2 174.8 50.8-25.8 42.9-135.9z" /><path class="prefix__st5" d="m263.3 101.7-42.9 135.9 51.3-26 30.5-96.7z" /><path class="prefix__st6" d="m302.2 114.9-30.5 96.7 61.1-31.1 15.7-49.8z" /><path class="prefix__st7" d="m366.2 136.7-17.7-6-15.7 49.8 35.3-17.9c11.1-5.6 9.9-21.9-1.9-25.9z" /><path class="prefix__st1" d="M340.2 224 282 407.2c.2.1.3.1.5.2 5.3 1.7 10.9-1.3 12.6-6.6L349.8 227l-9.6-3z" /><path class="prefix__st2" d="M330.6 221 276 394.8c-1.6 5.1 1.1 10.6 6.1 12.4L340.2 224l-9.6-3z" /><path class="prefix__st3" d="m349.6 227.1-36.4 115.6 26.7-13.5 30-95.1z" /><path class="prefix__st4" d="m369.9 234.1-30 95.1 27.6-14 23.3-74z" /><path class="prefix__st5" d="m390.8 241.2-23.3 74 27.9-14.2 16.6-52.6z" /><path class="prefix__st6" d="M412 248.4 395.4 301l33.3-16.9 8.5-27.1z" /><path class="prefix__st7" d="m446.9 260.3-9.7-3.3-8.6 27.1 19.2-9.8c6.1-3 5.5-11.9-.9-14z" /><path d="M473.9 435.4H26.1c0-13.4 10.8-24.2 24.2-24.2h399.3c13.4 0 24.3 10.9 24.3 24.2z" fill="#a67c52" /><path d="M186.3 397.3c3.6-7.7.3-13.9-7.4-13.9-1.9 0-3.9.4-5.9 1.1 5.2-13.1-.8-23.4-14.1-23.4-13.8 0-30.3 11.2-36.8 25.1l-.3.6c-.7-.1-1.4-.2-2.2-.2-6.8 0-14.9 5.5-18.1 12.4-3.2 6.8-.2 12.4 6.6 12.4H167v-.1c7.5-.7 15.9-6.7 19.3-14zm242.2 0c3.6-7.7.3-13.9-7.4-13.9-1.9 0-3.9.4-5.9 1.1 5.2-13.1-.8-23.4-14.1-23.4-13.8 0-30.3 11.2-36.8 25.1l-.3.6c-.7-.1-1.4-.2-2.2-.2-6.8 0-14.9 5.5-18.1 12.4-3.2 6.8-.2 12.4 6.6 12.4h58.9v-.1c7.4-.7 15.9-6.7 19.3-14z" style="fill:#7ac943" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2012"><path d="M241.1 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8 12.6 0 22.8-10.2 22.8-22.8.1-9.5-5.7-17.6-13.9-21z" fill="#ff6464" /><path d="M272 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.5-10.3-40.6-26.3-52.8zm-39.8 104.1c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2H238c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.6-23.1 51.5-51.4 51.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path d="M415.7 172.3c-8 3.5-13.2 9.1-16.3 15.1-2.4 4.6-9.2 4.1-10.7-.9-4.1-13.3-3.6-27.8-1-45.5.7-4.5-3.9-8-8.1-6.2-26.8 11.9-33.3 38.1-35.7 58.3-.8 6.7-10.4 6.9-11.5.3-.2-1.4-.4-2.8-.6-4.1-.6-4.8-6.5-6.8-9.9-3.4-7.9 7.8-12.7 20.1-13.9 30.8-3.9 35.1 21.6 63.9 55.7 67.6 34 3.7 63.7-18.9 67.6-54.1 2.1-18.9-8.8-27.6-7.1-52.1 0-4.4-4.5-7.5-8.5-5.8z" fill="#ff7b15" /><path d="M384.7 238.3c-2.5 1.1-4.1 2.9-5.2 4.7-.9 1.6-3.3 1.4-3.9-.4-1.3-4.3-1.1-9-.3-14.7.2-1.6-1.4-2.9-2.9-2.2-8.4 3.9-10.8 12-11.6 18.6-.3 2.4-3.8 2.4-4.1 0v-.1c-.2-1.7-2.4-2.4-3.6-1.2-2.5 2.6-4.1 6.6-4.5 10.1-1.3 11.8 7.3 21.4 18.7 22.7 11.4 1.3 21.4-6.4 22.7-18.2.7-6.3-2.9-9.2-2.4-17.3.1-1.5-1.5-2.6-2.9-2z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2013"><path d="M241.1 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8 12.6 0 22.8-10.2 22.8-22.8.1-9.5-5.7-17.6-13.9-21z" fill="#ff6464" /><path d="M272 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.5-10.3-40.6-26.3-52.8zm-39.8 104.1c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2H238c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.6-23.1 51.5-51.4 51.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path d="M415.7 172.3c-8 3.5-13.2 9.1-16.3 15.1-2.4 4.6-9.2 4.1-10.7-.9-4.1-13.3-3.6-27.8-1-45.5.7-4.5-3.9-8-8.1-6.2-26.8 11.9-33.3 38.1-35.7 58.3-.8 6.7-10.4 6.9-11.5.3-.2-1.4-.4-2.8-.6-4.1-.6-4.8-6.5-6.8-9.9-3.4-7.9 7.8-12.7 20.1-13.9 30.8-3.9 35.1 21.6 63.9 55.7 67.6 34 3.7 63.7-18.9 67.6-54.1 2.1-18.9-8.8-27.6-7.1-52.1 0-4.4-4.5-7.5-8.5-5.8z" fill="#ff7b15" /><path d="M384.7 238.3c-2.5 1.1-4.1 2.9-5.2 4.7-.9 1.6-3.3 1.4-3.9-.4-1.3-4.3-1.1-9-.3-14.7.2-1.6-1.4-2.9-2.9-2.2-8.4 3.9-10.8 12-11.6 18.6-.3 2.4-3.8 2.4-4.1 0v-.1c-.2-1.7-2.4-2.4-3.6-1.2-2.5 2.6-4.1 6.6-4.5 10.1-1.3 11.8 7.3 21.4 18.7 22.7 11.4 1.3 21.4-6.4 22.7-18.2.7-6.3-2.9-9.2-2.4-17.3.1-1.5-1.5-2.6-2.9-2z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2014"><style>#icon-warnings-2014 .prefix__st0{fill:#3fa9f5}</style><path class="prefix__st0" d="M241.1 347.6V210.8c0-4.9-4-8.9-8.9-8.9s-8.9 4-8.9 8.9v136.8c-8.1 3.4-13.9 11.5-13.9 21 0 12.6 10.2 22.8 22.8 22.8 12.6 0 22.8-10.2 22.8-22.8 0-9.5-5.8-17.6-13.9-21z" /><path d="M272 314.7V100.5c0-18.8-15.2-34-34-34h-11.4c-18.8 0-34 15.2-34 34v214.2c-16 12.1-26.3 31.2-26.3 52.8 0 36.4 29.6 66 66 66s66-29.6 66-66c0-21.5-10.3-40.6-26.3-52.8zm-39.8 104.1c-28.3 0-51.2-22.9-51.2-51.2 0-12.4 4.4-23.7 11.7-32.6 4-4.9 9-9 14.7-12.1V100.5c0-10.7 8.6-19.2 19.2-19.2H238c10.7 0 19.2 8.6 19.2 19.2V112h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.9 3.9 3.9h13.3v20.9h-13.3c-2.1 0-3.9 1.8-3.9 3.8 0 2.1 1.8 3.8 3.9 3.8h13.3v20.9h-12.9c-2.1 0-3.8 1.8-3.8 3.9 0 2.1 1.8 3.8 3.8 3.8h12.9v145.8c5.6 3.1 10.5 7.3 14.7 12.1 7.3 8.9 11.7 20.3 11.7 32.6-.1 28.6-23.1 51.5-51.4 51.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#707070" /><path class="prefix__st0" d="M358 87.6c-7.1 0-12.9 5.8-12.9 12.9v22l-19.1-11c-6.2-3.5-14-1.4-17.6 4.7-3.5 6.2-1.4 14 4.7 17.6l19.1 11-19.1 11c-6.1 3.6-8.3 11.4-4.7 17.6 3.6 6.1 11.4 8.2 17.6 4.7l19.1-11v22c0 7.1 5.8 12.9 12.9 12.9s12.9-5.8 12.9-12.9v-22l19.1 11c6.2 3.6 14 1.4 17.6-4.7s1.4-14-4.7-17.6l-19.1-11 19.1-11c6.2-3.6 8.3-11.4 4.7-17.6-3.6-6.2-11.4-8.3-17.6-4.7l-19.1 11v-22c0-7.1-5.8-12.9-12.9-12.9z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2015"><path d="M264.9 241.6h83.3l-124.9 169V297.7h-71.5l154-208.3zM94.8 212.8H140l-67.8 91.8v-61.3H33.4L117 130.1zm326.6 3.6h45.2l-67.8 91.8v-61.4H360l83.6-113.2z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#f7ad44" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2016"><style>#icon-warnings-2016 .prefix__st0{fill:#abdcff}#icon-warnings-2016 .prefix__st1{fill:#0396ff}</style><path class="prefix__st0" d="m212.5 380.4 28.3 59.7 29.5-59.7-29.5-31.8z" /><path class="prefix__st1" d="m283.9 324.1 34.5 72.8 35.9-72.8-35.9-38.7z" /><path class="prefix__st0" d="m367.9 380.4 28.3 59.7 29.5-59.7-29.5-31.8z" /><path d="m194.9 40.4-134 422c.4.1.8.3 1.2.4 12.2 3.8 25.1-2.9 29-15.1L217 47.4l-22.1-7z" fill="#f15a24" /><path d="M172.9 33.5 47 433.8c-3.7 11.8 2.5 24.3 14 28.6l134-422-22.1-6.9z" fill="#f7931e" /><path fill="#1088e2" d="M216.5 47.6 132.8 314l61.4-31.3 69.1-219.1z" /><path fill="#0391ff" d="m263.3 63.6-69.1 219.1 63.7-32.3L311.6 80z" /><path class="prefix__st1" d="m311.6 80-53.7 170.4 64.3-32.6 38.2-121.2z" /><path fill="#3fa9f5" d="m360.4 96.6-38.2 121.2 76.6-38.9 19.7-62.5z" /><path class="prefix__st0" d="m440.7 124-22.2-7.6-19.7 62.5 44.2-22.5c14-7.1 12.5-27.4-2.3-32.4z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2017"><path d="M273.9 75.1c-59.4-7.1-94.5-.9-109.5 6.2-29.7 11.3-45.6 29.1-45.6 54.4 0 28.1 32.5 51 72.6 51 4.2 0 8.1-.3 12.1-.7-21-5-28.7-25.8-28.7-32.4 0-15.5 9.3-31.3 36.4-35.8 0 0 21.8-5.6 61.7 2.8 56.4 16.3 72.9 35.9 88.1 65.7 19 47.2 2.9 110-27.4 145.6-57.9 68-201.3 90.1-201.3 90.1C278 394.7 343.1 330.1 356 246.5c8.4-110.9-127.1-137.1-148.3-68.4 18.8-12.8 39.4-10.1 59.9-3.5 47.3 25.1 40.6 64.7 36.3 86.4-9.6 49.1-47.3 96.7-102.6 125.7C143.2 412 66.7 423.6 41 428h156.4c13-.6 68.9-3.3 98.9-11.9C378.1 392.7 459 336.6 459 245.9c0-90.9-91.1-159.5-185.1-170.8z" fill="#3fa9f5" /><path d="M118.1 391.2c-17 10.4-75.5 30.5-75.5 30.5s54.2-3.8 98.1-18.4c39.4-13.1 58-26.6 76.4-47.6 16.8-19.1 32.8-77.5-26.7-105.4-34.6-16.2-82.7-16.6-102.5 3.1-23.6 23.4-5.3 43.8-5.3 43.8s7-18.7 30.2-21.9c6.2-.9 30.1.2 42.7 8.9 9.4 6.6 24.5 18.3 16 48.3-6.5 22.8-23.5 40.4-53.4 58.7z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2018"><path d="M456.4 195.2c-3-6.9-10.9-10.1-17.9-7.2-1 .4-8.5 3.6-20 9-8-4.8-17.6-10.6-27.8-17.2 8.5-4.1 13.9-6.5 14-6.6 6.9-3.1 10-11.1 6.9-18s-11.1-10-18-6.9c-9.7 4.4-19.3 9-28.8 13.8-7.7-5.5-15.3-11.2-22.6-17.1l-3.7-3.1 11.3-5.8c6.6-3.6 9-11.9 5.4-18.5-3.5-6.3-11.2-8.8-17.7-5.8-1 .5-9.3 4.7-21.3 11-11.6-10.1-23.1-20.4-34.4-30.9 7.7-7.3 12.5-12.3 13.1-12.9 5-5.6 4.5-14.2-1.1-19.2-5.4-4.8-13.5-4.6-18.6.5-.1.2-5.1 5.2-13.2 12.9-2-1.9-3.9-3.8-5.9-5.7-5.3-5.3-13.9-5.4-19.2-.1-5.3 5.3-5.4 13.9-.1 19.2l.3.3 4.7 4.6c-12.1 10.5-24.5 20.6-37.3 30.3-6-3.6-12-7.1-18.1-10.4-6.6-3.5-14.9-1-18.4 5.6s-1 14.9 5.6 18.4c.1.1 2.7 1.5 6.8 3.8-2.9 2-5.6 4-8.5 5.9-7.2 4.8-14.8 9.5-22.5 14.2-9-5.7-15.3-9.6-16.1-10.1-6.6-3.6-14.9-1.2-18.5 5.4-3.4 6.2-1.5 14 4.4 17.9l3.4 2.1c-13.7 7.6-27 14.4-38.3 20.1l-7.3-4.3c-6.5-3.7-14.7-1.5-18.5 5 0 0 0 .1-.1.1-2.1 3.7-2.2 8.2-.5 12l-7.1 3.3c-7 2.9-10.3 10.8-7.4 17.8s10.8 10.3 17.8 7.4c.3-.1.6-.3.9-.4 1-.4 9-4.1 21-10 10.4 6.3 23.9 14.8 38.1 24.3-10.6 9-17.2 15-17.9 15.6-5.3 5.3-5.4 13.9-.1 19.2 5 5.1 13.1 5.4 18.5.8.2-.2 8.8-7.9 22.7-19.6 5.4 3.9 10.7 7.9 15.7 11.8 7 5.5 13.6 10.8 19.9 16.1-9.6 10.6-15.7 18.1-16.4 18.9-4.9 5.7-4.3 14.3 1.4 19.2 5.7 4.9 14.3 4.3 19.2-1.4.2-.2.4-.5.6-.8.2-.2 6.2-7.6 16-18.3 8.6 7.6 16.4 14.6 22.9 20.7-9.8 9.4-16.4 16.1-17.1 16.8-5.2 5.4-5 14.1.5 19.2 5.3 5.1 13.7 5 19-.2.2-.2 6.9-7 17.3-16.9l4.9 5c5.1 5.4 13.6 5.7 19.1.6l.1-.1c5.5-5.2 5.7-13.8.6-19.2l-4.8-4.9c7.8-7.1 16.2-14.7 25.2-22.3 7.3 7.8 11.5 12.7 11.6 12.8 4.9 5.7 13.5 6.4 19.2 1.5 5.7-4.9 6.4-13.5 1.5-19.2-.5-.5-4.6-5.3-11.3-12.5 10.7-8.7 22-16.8 33.6-24.2 9.1 9.6 14.3 15.6 14.5 15.8 4.9 5.6 13.5 6.2 19.2 1.3 5.7-4.9 6.3-13.5 1.3-19.2-.5-.5-4.7-5.3-11.3-12.4 18-10.3 35.8-19.5 50.4-26.5 6.2 3.5 10.1 5.7 10.7 6 6.6 3.6 14.8 1.2 18.4-5.4 2.3-4.4 2-9.7-.7-13.8l3.5-1.5c6.9-2.9 10.1-10.8 7.2-17.7.1.2.1.1.1.1zm-131.3-29.1c4.2 3.4 8.5 6.7 12.9 10-10.1 5.4-21.3 11.7-33.1 18.6-5.2-4.5-10.4-9-15.9-13.4-3.3-2.7-6.5-5.1-9.7-7.6 11.4-6.3 22.9-12.5 33.3-18 4.2 3.5 8.3 7 12.5 10.4zm-92.2 53.2c-4.1-3.5-8.2-6.8-12.4-10.1 4-2.7 7.8-5.4 11.9-8 6.1-4 13.4-8.4 21.3-13 5.9 4.5 12 9.2 18.1 14.2 2.9 2.4 5.6 4.7 8.4 7.1-2.6 1.6-5 3-7.6 4.6-8.8 5.6-17.3 11.6-25.4 17.9-4.7-4.3-9.5-8.5-14.3-12.7zm28.9-108.9c8.3 7.7 18 16.7 28.8 26.2-11.2 6-23.3 12.6-34.9 19.2-9.5-6.9-18.4-13-26.4-18.3 12.3-9.8 23.2-18.9 32.5-27.1zm-74.7 57.5c6.5-4.4 12.7-8.7 18.8-13.1 7.1 4.6 15.2 10 23.9 16-4.3 2.6-8.4 5.1-12.1 7.5-6.9 4.5-13.6 9.1-20.1 13.6-7.6-5.4-15.2-10.7-22.9-15.9 4.1-2.7 8.3-5.3 12.4-8.1zm-75.3 43.6c11.5-6 24.2-12.8 36.9-20.1 7.8 5.1 16.4 10.9 25.3 17.1-11.5 8.4-21.6 16.3-30.7 23.6-10.4-7-20.9-13.9-31.5-20.6zm54.6 37.1c10.1-7.9 20.4-15.6 30.8-23.1 6.4 4.9 12.5 9.7 18 14.4 3.8 3.2 7.2 6.4 10.7 9.5-9.9 8.5-18.9 17-26.9 25-7.2-6-14.6-12-22-17.8-3.4-2.6-7.1-5.3-10.6-8zm77.3 65.2c-6.7-6.3-14.8-13.6-23.8-21.6 7.9-7.8 16.6-16 26.2-24.3 8.8 8.3 16.6 15.9 23.5 22.9-9.3 7.9-18 15.7-25.9 23zm46.9-40.5c-7.6-7.7-15.3-15.2-23.1-22.7 6.4-4.7 12.9-9.3 19.6-13.5 5-3.1 9.8-6 14.6-8.9 8 7.3 15.3 14.3 21.9 20.8-11.3 7.6-22.4 15.7-33 24.3zm56.8-39.1c-6.9-6.9-14-13.7-21.1-20.4 12.1-6.9 24.2-13.5 36.5-19.9 9.3 6.3 18.4 12.2 26.7 17.3-13.1 6.7-27.7 14.5-42.1 23z" fill="#ccc" /><path d="M186.5 374.4c-47.1-14.7-90.7 1.8-125.3 31.3 0 0 68.8 77.6 169.4 10.9l29.3 24.7v-67.5L232 397.3c-13.8-8.1-34.3-19.5-45.5-22.9zm-79.8 33.8c0 4.7-3.8 8.5-8.5 8.5s-8.5-3.8-8.5-8.5 3.8-8.5 8.5-8.5c4.7.1 8.5 3.9 8.5 8.5z" fill="#ff7200" /><path d="M392.6 361.1c-33.7-10.5-65 1.3-89.7 22.4 0 0 49.3 55.5 121.3 7.8l21 17.7v-48.4l-20 16.8c-9.9-5.7-24.6-13.8-32.6-16.3zm-52.3 22.8c0 3.4-2.8 6.2-6.2 6.2-3.4 0-6.2-2.8-6.2-6.2 0-3.4 2.8-6.2 6.2-6.2 3.4 0 6.2 2.8 6.2 6.2z" fill="#f7931e" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2019"><path d="M250 25.5S100.3 242.1 100.3 324.9s67 149.7 149.7 149.7 149.7-66.9 149.7-149.7S250 25.5 250 25.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#3fa9f5" /><path d="M361.5 371.8c-14.9.3-23.5 3-55.3 13.2l-4.5 1.4c-21.7 8.7-39.8 13.4-50.8 13.4-18.5 0-49-12.8-49.3-12.9l-6.2-2c-33.3-10.7-41.2-13.2-54.6-13.4-10.4 0-20.8 1.5-31.6 4.4 20.9 57.5 76 98.5 140.7 98.5 64.8 0 120-41.1 140.8-98.7-9.5-2.4-19.3-3.7-29.2-3.9zM238.3 249.6c0 16.8-13.6 30.4-30.4 30.4s-30.4-13.6-30.4-30.4 13.6-30.4 30.4-30.4 30.4 13.7 30.4 30.4zm-30.4-16.5c-9.1 0-16.6 7.4-16.6 16.6s7.4 16.6 16.6 16.6c9.1 0 16.6-7.4 16.6-16.6s-7.5-16.6-16.6-16.6zm114.6 86.7c0 16.8-13.6 30.4-30.4 30.4-16.8 0-30.4-13.6-30.4-30.4 0-16.8 13.6-30.4 30.4-30.4 16.8 0 30.4 13.6 30.4 30.4zm-30.4-16.6c-9.1 0-16.6 7.4-16.6 16.6s7.4 16.6 16.6 16.6 16.6-7.4 16.6-16.6-7.4-16.6-16.6-16.6zm-103 43.2c-5-5-5-13.2 0-18.2l103.6-103.6c5-5 13.2-5 18.2 0s5 13.2 0 18.2L207.3 346.4c-5 5-13.2 5-18.2 0z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2020"><style>#icon-warnings-2020 .prefix__st0{fill:#4fc0f2}</style><path class="prefix__st0" d="M266.2 397.6c0 12.7 10.1 23 22.5 23s22.5-10.3 22.5-23-22.5-48.4-22.5-48.4-22.5 35.7-22.5 48.4z" /><path d="M388.6 158.2h-.4c-4.1-44.2-41.2-78.8-86.5-78.8-48 0-86.9 38.9-86.9 86.9 0 46.4 36.4 84.3 82.2 86.8v.1h91.6c26.2 0 47.5-21.3 47.5-47.5s-21.3-47.5-47.5-47.5z" fill="#e3e3e3" /><path d="M334.9 182.5c-14-47.8-58.1-82.7-110.5-82.7-62.8 0-113.9 50.4-115.1 112.9-29.2 3.4-51.9 28.3-51.9 58.5 0 32.5 26.4 58.9 58.9 58.9h209.8c40.9 0 74-33.1 74-74 0-38-28.5-69.3-65.2-73.6z" fill="#f6f6f6" /><path d="m411.4 143.6 47.1 81.6c7.2 12.4-1.8 28-16.2 28H348c-14.4 0-23.3-15.6-16.2-28l47.1-81.6c7.4-12.5 25.4-12.5 32.5 0zm-16.1 80.8c-2.8 0-5.1 2.3-5.1 5.1s2.3 5.1 5.1 5.1 5.1-2.3 5.1-5.1-2.3-5.1-5.1-5.1zm6-51.1c0-3.3-2.7-6.1-6.1-6.1-3.3 0-6.1 2.7-6.1 6.1v.7l2.5 40.4c0 1.9 1.6 3.5 3.5 3.5s3.5-1.6 3.5-3.5l2.5-40.4c.2-.2.2-.4.2-.7z" fill="#f15a24" /><path class="prefix__st0" d="M350.3 397.6c0 12.7 10.1 23 22.5 23s22.5-10.3 22.5-23-22.5-48.4-22.5-48.4-22.5 35.7-22.5 48.4zm-168.2 0c0 12.7 10.1 23 22.5 23s22.5-10.3 22.5-23-22.5-48.4-22.5-48.4-22.5 35.7-22.5 48.4zm-84 0c0 12.7 10.1 23 22.5 23s22.5-10.3 22.5-23-22.5-48.4-22.5-48.4-22.5 35.7-22.5 48.4z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2021"><path d="m379.9 73.9 61.7 106.9c7.2 12.4-1.8 28-16.2 28H302c-14.4 0-23.3-15.6-16.2-28l61.7-106.9c7.2-12.4 25.2-12.4 32.4 0zm-16.2 100.8c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm7.2-60.4c0-4-3.2-7.2-7.2-7.2s-7.2 3.2-7.2 7.2c0 .3 0 .6.1.9l2.9 47.9c0 2.3 1.9 4.2 4.2 4.2s4.2-1.9 4.2-4.2l2.9-47.9c.1-.3.1-.6.1-.9z" fill="#f15a24" /><path d="m277.1 368.1-10.3-24.5c-12.2 5.2-21.6 15.5-25.7 28.1l25.2 8.4c1.7-5.4 5.7-9.7 10.8-12zm26.2 12 25.2-8.4c-4.5-13.9-15.4-24.9-29.2-29.5l-8.4 25.2c5.9 2.1 10.5 6.8 12.4 12.7zm-36.2 13.6L242.6 404c4.7 11 13.5 19.7 24.5 24.3l10.3-24.5c-4.6-1.9-8.3-5.6-10.3-10.1zm23.6 10.6 8.4 25.2c12.6-4.1 22.8-13.5 28-25.6l-24.5-10.3c-2.3 5.1-6.6 9-11.9 10.7zm0 0" fill="#ed1c24" /><path d="M441.4 367.7c-1.8 0-2.7-1-4.6-3.7-1.8-2.6-4.3-6.1-9.2-6.1s-7.4 3.5-9.2 6.1c-1.9 2.6-2.8 3.7-4.6 3.7s-2.7-1-4.6-3.7c-1.8-2.6-4.3-6.1-9.2-6.1-4.9 0-7.4 3.5-9.2 6.1-1.9 2.6-2.8 3.7-4.6 3.7-1.8 0-2.7-1-4.6-3.7-1.8-2.6-4.3-6.1-9.2-6.1-1.6 0-2.9 1.3-2.9 2.9 0 1.6 1.3 2.9 2.9 2.9 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 4.9 0 7.4-3.5 9.2-6.1 1.9-2.6 2.8-3.7 4.6-3.7 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 4.9 0 7.4-3.5 9.2-6.1 1.9-2.6 2.8-3.7 4.6-3.7 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 1.6 0 2.9-1.3 2.9-2.9 0-1.6-1.3-2.9-2.9-2.9zm-68.8-22c1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 4.9 0 7.4-3.5 9.2-6.1 1.9-2.6 2.8-3.7 4.6-3.7 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 4.9 0 7.4-3.5 9.2-6.1 1.9-2.6 2.8-3.7 4.6-3.7 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 1.6 0 2.9-1.3 2.9-2.9 0-1.6-1.3-2.9-2.9-2.9-1.8 0-2.7-1-4.6-3.7-1.8-2.6-4.3-6.1-9.2-6.1s-7.4 3.5-9.2 6.1c-1.9 2.6-2.8 3.7-4.6 3.7s-2.7-1-4.6-3.7c-1.8-2.6-4.3-6.1-9.2-6.1-4.9 0-7.4 3.5-9.2 6.1-1.9 2.6-2.8 3.7-4.6 3.7-1.8 0-2.7-1-4.6-3.7-1.8-2.6-4.3-6.1-9.2-6.1-1.6 0-2.9 1.3-2.9 2.9 0 1.6 1.3 2.9 2.9 2.9zM341 290c-1.3 0-2.1-1.1-3.7-3.5-1.6-2.6-3.9-6.2-8.5-6.2s-6.9 3.6-8.5 6.2c-1.5 2.5-2.3 3.5-3.7 3.5-1.3 0-2.1-1.1-3.7-3.5-1.7-2.6-3.9-6.2-8.5-6.2s-6.9 3.6-8.5 6.2c-1.5 2.5-2.3 3.5-3.7 3.5s-2.1-1.1-3.7-3.5c-1.6-2.6-3.9-6.2-8.5-6.2-1.6 0-2.9 1.3-2.9 2.9 0 1.6 1.3 2.9 2.9 2.9 1.3 0 2.1 1.1 3.7 3.5 1.6 2.6 3.9 6.2 8.5 6.2s6.9-3.6 8.5-6.2c1.5-2.5 2.3-3.5 3.7-3.5 1.3 0 2.1 1.1 3.7 3.5 1.6 2.6 3.9 6.2 8.5 6.2s6.9-3.6 8.5-6.2c1.5-2.5 2.3-3.5 3.7-3.5 1.3 0 2.1 1.1 3.7 3.5 1.6 2.6 3.9 6.2 8.5 6.2 1.6 0 2.9-1.3 2.9-2.9-.1-1.6-1.3-2.9-2.9-2.9zm7.8-17.9c-1.8 0-2.7-1-4.6-3.7-1.8-2.6-4.3-6.1-9.2-6.1-4.9 0-7.4 3.5-9.2 6.1-1.9 2.6-2.8 3.7-4.6 3.7-1.8 0-2.7-1-4.6-3.7-1.8-2.6-4.3-6.1-9.2-6.1s-7.4 3.5-9.2 6.1c-1.9 2.6-2.8 3.7-4.6 3.7-1.8 0-2.7-1-4.6-3.7-1.8-2.6-4.3-6.1-9.2-6.1-1.6 0-2.9 1.3-2.9 2.9 0 1.6 1.3 2.9 2.9 2.9 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 4.9 0 7.4-3.5 9.2-6.1 1.9-2.6 2.8-3.7 4.6-3.7 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 4.9 0 7.4-3.5 9.2-6.1 1.9-2.6 2.8-3.7 4.6-3.7 1.8 0 2.7 1 4.6 3.7 1.8 2.6 4.3 6.1 9.2 6.1 1.6 0 2.9-1.3 2.9-2.9 0-1.6-1.3-2.9-2.9-2.9z" style="fill:#3fa9f5" /><path d="M331.6 432.5h-234c-16.1 0-29.3-13.2-29.3-29.3v-.2c0-2.7 2.2-4.9 4.9-4.9h282.6c2.7 0 4.9 2.2 4.9 4.9v.2c.1 16.1-13.1 29.3-29.1 29.3zm0 0" fill="#feb692" /><path d="M215.3 125.7c-23.5 9.2-45 22.4-63.7 38.8l63.7 17.1v-55.9zm0 0" fill="#fd6585" /><path d="M76.9 328.9c0 15.6 1.6 30.8 4.8 45.5h133.6v-50.7l-134.5-36c-2.6 13.4-3.9 27.1-3.9 41.2zm0 0" fill="#fdd819" /><path d="m117.2 202.5 98.1 26.3v-47.2l-63.7-17.1c-12.9 11.2-24.5 24-34.4 38zm0 0" fill="#f7afff" /><path d="m94.1 243.8 121.2 32.5V229L117 202.7c-9 12.7-16.7 26.5-22.9 41.1zm0 0" fill="#6096ff" /><path d="M94.1 243.8c-5.9 13.9-10.4 28.7-13.3 44l134.5 36v-47.5L94.1 243.8zm0 0" fill="#3cd500" /><path d="M212.1 130.2c-19.6 8.2-37.8 19.3-54.2 32.9l26.1 7c6.6-3.2 24.8-22.2 28.1-39.9zM105 330.3c0-6.4-1.8-20.2.6-33.1l-22.2-6c-2.2 12.3-3.3 25-3.3 37.6 0 14.3 1.4 28.7 4.2 42.7h9.4c8.1-11.4 11.3-29 11.3-41.2zm70.4-156.6-22.7-6.1c-11.3 10-21.4 21.1-30.4 33.2l20.9 5.6c.4-6.7 1.4-12.9 3.2-17.6 4.2-11.2 15.6-10.2 29-15.1zm-77 68.2 33.6 9c2.3-1.7 10.9-6.3 10.9-38.4l-24.3-6.5c-7.9 11.3-14.7 23.3-20.2 35.9zm8.3 49.7c1.1-5.1-1.5-21 18.7-36.6l-29.3-7.9c-5.1 12.4-9 25.3-11.7 38.4l22.3 6.1zm0 0" fill="#fff" /><path d="M363.7 402.9v-.2c0-4.3-3.5-7.8-7.8-7.8h-23.2c.5-2.9.8-5.9.8-9 0-5.1-.8-10.1-2.4-15-4.8-14.7-16.3-26.4-31-31.3-4.9-1.6-10.1-2.5-15.3-2.5-6.6 0-13 1.3-19.1 3.9-2.9 1.2-5.6 2.7-8.1 4.4l-39.2-164.5c0-.1-.1-.3-.1-.4v-54c0-.3 0-.6-.1-.9 0-.9-.5-1.8-1.3-2.3-.8-.5-1.8-.6-2.7-.3-23.6 9.3-45.3 22.5-64.5 39.3-13.1 11.4-24.8 24.4-34.8 38.5 0 0 0 .1-.1.1 0 0 0 .1-.1.1-9.2 13-17 27-23.2 41.7C85.4 257 80.9 272 78 287.2c-2.6 13.7-3.9 27.7-3.9 41.7 0 15.5 1.6 31 4.8 46.1.3 1.3 1.4 2.3 2.8 2.3h130.9v17.6H73.3c-4.3 0-7.8 3.5-7.8 7.8v.2c0 11.1 5.7 21 14.4 26.8H58.6c-1.6 0-2.9 1.3-2.9 2.9 0 1.6 1.3 2.9 2.9 2.9H354c1.6 0 2.9-1.3 2.9-2.9 0-1.6-1.3-2.9-2.9-2.9h-4.7c8.7-5.8 14.4-15.7 14.4-26.8zm-35.9-17c0 3-.3 6-.9 9h-14.1l-6.6-2.8c.6-2 .9-4.1.9-6.2 0-1.3-.1-2.6-.3-3.9l12-4 7.9-2.6c.7 3.5 1.1 7 1.1 10.5zM301 346.1c10.8 4.4 19.4 13.1 23.7 23.9l-17.4 5.7-2.4.8c-2.2-4.7-5.9-8.4-10.5-10.6l6.6-19.8zm.3 39.8c0 2.3-.5 4.5-1.4 6.6-.4.8-.8 1.6-1.3 2.3H271c-.5-.8-.9-1.5-1.3-2.3-.9-2.1-1.4-4.3-1.4-6.6 0-1.7.3-3.3.8-4.9 1.4-4.6 4.8-8.3 9.2-10.2 2.1-.9 4.3-1.4 6.6-1.4 1.8 0 3.5.3 5.2.9 5 1.7 9 5.7 10.5 10.7.4 1.6.7 3.2.7 4.9zm-16.5-43c3.7 0 7.3.5 10.8 1.4l-6.6 19.8c-1.4-.3-2.8-.4-4.2-.4-2.1 0-4.1.3-6.1.9l-8.1-19.3c4.6-1.6 9.3-2.4 14.2-2.4zm-27.3 9.8c.1-.1.2-.1.3-.2 2.3-1.9 4.9-3.5 7.6-4.9l8.1 19.3c-3.9 2.3-6.9 5.7-8.8 9.7l-19.8-6.6c2.6-6.8 7-12.8 12.6-17.3zm5.9 39.4-6.6 2.8h-14.1c-.6-2.9-.9-5.9-.9-9 0-3.5.4-7.1 1.3-10.5l15.8 5.2 4.1 1.4c-.2 1.3-.3 2.6-.3 3.9-.1 2.1.2 4.2.7 6.2zm-51-20.6H84c-2.8-14-4.2-28.3-4.2-42.7 0-12.6 1.1-25.2 3.3-37.6L212.4 326v45.5zm0-51.5L84.1 285.6c2.7-13.1 6.6-26.1 11.7-38.4l116.6 31.3V320zm0-47.5-28.5-7.6-85.8-23c5.6-12.5 12.3-24.6 20.2-35.9l94.2 25.2v41.3zm0-47.5L122 200.7c8.9-12.1 19.1-23.2 30.4-33.2l56.4 15.1 3.7 1V225zm0-47.3-15.2-4.1-39.6-10.6c16.6-13.8 35-24.9 54.8-33.2v47.9zm5.9 27.3 34.4 144.2c-6.6 5.7-11.5 13.2-14.2 21.7-1.6 4.8-2.4 9.9-2.4 15 0 3 .3 6 .8 9h-18.6V205zm113.3 224.3h-234c-14.6 0-26.4-11.9-26.4-26.4v-.2c0-1.1.9-2.1 2.1-2.1h282.6c1.1 0 2.1.9 2.1 2.1v.2c0 14.5-11.9 26.4-26.4 26.4zm0 0" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2022"><style>#icon-warnings-2022 .prefix__st5{fill:#3fa9f5}#icon-warnings-2022 .prefix__st6{fill:#abdcff}</style><path d="m184.7 30.4-134 422c.4.1.8.3 1.2.4 12.2 3.8 25.1-2.9 29-15.1L206.8 37.4l-22.1-7z" fill="#f15a24" /><path d="M162.7 23.5 36.8 423.8c-3.7 11.8 2.5 24.3 14 28.6l134-422-22.1-6.9z" fill="#f7931e" /><path fill="#1088e2" d="M206.4 37.7 122.6 304l61.5-31.2 69.1-219.2z" /><path fill="#0391ff" d="m253.2 53.6-69.1 219.2 63.6-32.3L301.5 70z" /><path fill="#0396ff" d="m301.5 70-53.8 170.5 64.3-32.7 38.2-121.2z" /><path class="prefix__st5" d="M350.2 86.6 312 207.8l76.6-38.9 19.7-62.5z" /><path class="prefix__st6" d="m430.6 114-22.2-7.6-19.7 62.5 44.2-22.5c13.9-7 12.5-27.4-2.3-32.4z" /><path class="prefix__st5" d="M345 267.5c-31.3-3.8-49.8-.5-57.7 3.3-15.7 6-24 15.3-24 28.7 0 14.8 17.1 26.9 38.2 26.9 2.2 0 4.3-.1 6.4-.4-11.1-2.6-15.1-13.6-15.1-17.1 0-8.2 4.9-16.5 19.2-18.9 0 0 11.5-2.9 32.5 1.5 29.7 8.6 38.4 18.9 46.4 34.6 10 24.9 1.5 58-14.5 76.8-30.5 35.9-106.1 47.5-106.1 47.5 76.7-14.5 111-48.5 117.8-92.6 4.4-58.4-67-72.2-78.1-36.1 9.9-6.7 20.7-5.3 31.6-1.8 24.9 13.2 21.4 34.1 19.1 45.6-5.1 25.9-24.9 51-54.1 66.3-30.6 13.3-71 19.4-84.5 21.8h82.4c6.8-.3 36.3-1.8 52.1-6.3 43.1-12.4 85.7-41.9 85.7-89.7.2-47.9-47.8-84.1-97.3-90.1z" /><path class="prefix__st6" d="M262.9 434.1c-9 5.5-39.8 16-39.8 16s28.5-2 51.7-9.7c20.8-6.9 30.5-14 40.3-25.1 8.8-10 17.3-40.8-14-55.5-18.2-8.5-43.6-8.7-54 1.7-12.4 12.3-2.8 23.1-2.8 23.1s3.7-9.9 15.9-11.5c3.3-.5 15.9.1 22.5 4.7 5 3.5 12.9 9.7 8.4 25.5-3.5 11.9-12.4 21.2-28.2 30.8z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2023"><path d="m335.7 58.3 82.8 143.4c7.2 12.4-1.8 28-16.2 28H236.7c-14.4 0-23.3-15.6-16.2-28l82.8-143.4c7.2-12.5 25.2-12.5 32.4 0zm-16.2 129.6c-4.1 0-7.3 3.3-7.3 7.3s3.3 7.3 7.3 7.3 7.3-3.3 7.3-7.3-3.2-7.3-7.3-7.3zm8.8-73.9c0-4.8-3.9-8.8-8.8-8.8s-8.8 3.9-8.8 8.8c0 .4 0 .7.1 1l3.6 58.6c0 2.8 2.3 5.1 5.1 5.1s5.1-2.3 5.1-5.1l3.6-58.6c.1-.3.1-.7.1-1z" fill="#f15a24" /><path fill="#f58502" d="M267.5 358.9 450.4 312l-322.1-68.9 70.8 59.9-179.5 47.8 261.8 100.3 199-37.4z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2024"><style>#icon-warnings-2024 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M71.1 199.9h.4c4.3-46.8 43.7-83.4 91.6-83.4 50.8 0 92 41.2 92 92 0 49.1-38.5 89.3-87 91.9v.1h-97c-27.8 0-50.3-22.5-50.3-50.3s22.5-50.3 50.3-50.3z" /><path class="prefix__st0" d="M429.1 199.9h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path d="M358.1 154.6C343.3 104 296.6 67 241.2 67c-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3h222.2c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.2-77.8z" fill="#f6f6f6" /><path fill-rule="evenodd" clip-rule="evenodd" fill="#f7ad44" d="M243.7 336.8h47.4l-71 96.2v-64.2h-40.7L267 250.2z" /><path d="m132.2 350.6 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.7-7.4-17.6zm-55.3-5 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zM361.2 356l7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-55.3-5 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-284.3-5.4 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zM416.5 356l7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2025"><path d="M327 320.8h-36c-1 0-1.8-.8-1.8-1.7 0-.4.1-.7.3-1l34.3-53c1.1-1.8.6-4.2-1.2-5.3-.6-.4-1.3-.6-2-.6H259c-2.7 0-5.3 1.5-6.6 3.9l-45.8 82.5c-1.5 2.7-.5 6 2.1 7.5.8.4 1.7.7 2.6.7h36.8c1 0 1.8.8 1.8 1.8 0 .2 0 .3-.1.5l-25.4 87.2L331 330c2.1-2.2 2-5.6-.2-7.7-1.1-1-2.4-1.5-3.8-1.5z" fill="#f7ad44" /><path d="M346.9 369c0 27.2 22 49.1 49.2 49.1 27.2 0 49.2-22 49.2-49.1s-49.2-98.3-49.2-98.3-49.2 71.1-49.2 98.3z" fill="#4fc0f2" /><path d="M434.8 115.8H65.3c-16.3 0-29.5-13.2-29.5-29.5S49 56.8 65.3 56.8h369.5c16.3 0 29.5 13.2 29.5 29.5s-13.3 29.5-29.5 29.5zm0 116.9H65.3c-16.3 0-29.5-13.2-29.5-29.5s13.2-29.5 29.5-29.5h369.5c16.3 0 29.5 13.2 29.5 29.5s-13.3 29.5-29.5 29.5zM162.4 351H65.3c-16.3 0-29.5-13.2-29.5-29.5S49 292 65.3 292h97.2c16.3 0 29.5 13.2 29.5 29.5-.1 16.3-13.3 29.5-29.6 29.5z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2026"><path fill="#f1f1f1" d="M396.7 443H216.1l41.5-113.5L420 373z" /><path d="M385.9 443z" /><path d="M292.5 394.2c1.6-5 7-7.8 12-6.2l48.1 15.5c5 1.6 7.8 7 6.2 12.1L350 443h-73.2l15.7-48.8z" fill="#c3c3c3" /><path d="m185 41.7-134 422c.4.1.8.3 1.2.4 12.2 3.8 25.1-2.9 29-15.1L207.1 48.7l-22.1-7z" fill="#f15a24" /><path d="M163 34.8 37.1 435.1c-3.7 11.8 2.5 24.3 14 28.6l134-422-22.1-6.9z" fill="#f7931e" /><path fill="#1088e2" d="m206.7 49-83.8 266.3 61.5-31.2 69.1-219.2z" /><path fill="#0391ff" d="m253.5 64.9-69.1 219.2 63.6-32.4 53.7-170.4z" /><path fill="#0396ff" d="M301.7 81.3 248 251.7l64.3-32.6 38.2-121.2z" /><path fill="#3fa9f5" d="m350.5 97.9-38.2 121.2 76.6-38.9 19.7-62.5z" /><path d="m430.9 125.3-22.2-7.6-19.7 62.5 44.2-22.5c13.9-7.1 12.4-27.4-2.3-32.4z" fill="#abdcff" /><path d="m339.9 285.1-100.3 27.1c-6.5 1.8-6.5 11.1 0 12.8l196.3 52.6c6.5 1.8 11.2-6.3 6.4-11.1l-73.4-73.6c-7.6-7.6-18.6-10.6-29-7.8z" fill="#d35b41" /><path d="M464 465.2H142.8c0-12.3 10-22.2 22.2-22.2h276.7c12.3 0 22.3 9.9 22.3 22.2z" fill="#754c24" /><path d="M252 429.1c3.6-7.7.3-13.9-7.4-13.9-1.9 0-3.9.4-5.9 1.1 5.2-13.1-.8-23.4-14.1-23.4-13.8 0-30.3 11.2-36.8 25.1l-.3.6c-.7-.1-1.4-.2-2.2-.2-6.8 0-14.9 5.5-18.1 12.4-3.2 6.8-.2 12.4 6.6 12.4h58.9v-.1c7.4-.7 15.8-6.7 19.3-14z" fill="#7ac943" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2027"><path d="M380.1 318.7c-18.9 0-31.2-2.8-45.6-11.5-2.7-1.7-6-.5-7.5 2.8-6 12.9-11.6 26.8-16.5 41.1-4.1 12.2-18.7 9.6-20-3.5-3.4-33.1-8.8-66-16.1-98.2-15.7-69.9-53.2-138.1-121.7-189.8-5.1-3.8-10.9 3.3-7.9 9.6 29 61.6 41.2 125.8 48.2 192.9 2.6 24.6 4 50.2 4.1 75.4.1 20.6-22.3 27.1-29.6 8.6-.1-.3-.2-.6-.4-.9-14.7-36.7-37.2-71.3-69.5-100-4.7-4.2-10.8 1.9-8.6 8.5 14.3 43.1 23.5 81.1 27.7 114.2 4.3 34.6 2 66.1-7 94.5h182v.1h119.7c-19.2-45.4-8-111.3-2.4-138 1.1-5.1-2.5-9.8-6.7-8.7-7.3 1.8-14.7 2.8-22.2 2.9z" fill="#66b28a" /><path d="M442.9 153.5c-9.9 4.3-16.5 11.4-20.3 18.7-3 5.7-11.4 5.1-13.4-1.1-5.2-16.5-4.5-34.6-1.3-56.7.8-5.6-4.9-10-10.1-7.7-33.3 14.8-41.5 47.4-44.4 72.6-1 8.3-13 8.6-14.4.4-.3-1.8-.5-3.5-.7-5.2-.7-6-8-8.5-12.4-4.3-9.8 9.7-15.9 25-17.3 38.4-4.8 43.7 26.9 79.5 69.3 84.1s79.3-23.6 84.1-67.4c2.6-23.5-11-34.4-8.9-64.9.3-5.2-5.2-9.1-10.2-6.9z" fill="#ff7b15" /><path d="M404.3 235.6c-3.1 1.4-5.1 3.6-6.4 5.9-1.1 2.1-4.1 1.8-4.8-.5-1.6-5.3-1.3-11.2-.3-18.3.3-2-1.8-3.6-3.6-2.7-10.5 4.8-13.4 14.9-14.5 23.1-.4 3-4.8 3-5.2 0v-.2c-.3-2.2-2.9-3-4.4-1.5-3.1 3.3-5.1 8.2-5.6 12.6-1.6 14.7 9 26.7 23.3 28.3 14.2 1.6 26.6-7.9 28.3-22.6.9-7.8-3.6-11.5-3-21.6 0-1.9-2-3.3-3.8-2.5z" fill="#fb9b3b" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2028"><style>#icon-warnings-2028 .prefix__st2{fill:gray}</style><path d="M426.7 192h-.5c-5.1-55.1-51.4-98.2-107.8-98.2-59.8 0-108.2 48.5-108.2 108.2 0 57.8 45.3 105 102.4 108.1v.2h114.1c32.7 0 59.2-26.5 59.2-59.2S459.4 192 426.7 192z" fill="#e3e3e3" /><path d="M359.8 222.3c-17.4-59.5-72.4-103-137.6-103-78.3 0-141.9 62.7-143.4 140.7-36.4 4.3-64.7 35.2-64.7 72.8 0 40.5 32.8 73.3 73.3 73.3h261.4c50.9 0 92.2-41.3 92.2-92.2.1-47.2-35.4-86.2-81.2-91.6z" fill="#f6f6f6" /><circle class="prefix__st2" cx="227.9" cy="348.1" r="10.6" /><path class="prefix__st2" d="M240.3 230.5c0-7-5.7-12.7-12.7-12.7s-12.7 5.7-12.7 12.7c0 .5 0 1 .1 1.5l5.2 84.7c0 4.1 3.3 7.4 7.4 7.4s7.4-3.3 7.4-7.4l5.2-84.7c.1-.4.1-1 .1-1.5z" /><path d="m472.2 162.2-33.4-33.4c-4.3-4.3-11.4-4.3-15.7 0l-8.2 8.2 49.2 49.2 8.2-8.2c4.2-4.4 4.2-11.4-.1-15.8z" fill="#ed6024" /><path d="m331.9 276.1 57.5-15.4-49.2-49.2-15.4 57.5c-1.1 4.4 2.8 8.3 7.1 7.1z" fill="#ffba40" /><path d="M460.2 190 411 140.8l-66.4 66.4 49.2 49.2c-.1 0 66.4-66.4 66.4-66.4zm-87.6 30 51.2-51.2 8.4 8.4-51.2 51.3-8.4-8.5z" fill="#5dabe2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-2052"><style>#icon-warnings-2052 .prefix__st0{fill:#a67c52}#icon-warnings-2052 .prefix__st1{fill:#f2f2f2}#icon-warnings-2052 .prefix__st3{fill:#f7931e}#icon-warnings-2052 .prefix__st4{fill:#fbb03b}#icon-warnings-2052 .prefix__st5{fill:#4fc0f2}</style><path class="prefix__st0" d="m143.8 247.2 26.7 26.7c1.3 1.3 3.5 1.3 4.9 0l1.3-1.3c1.3-1.3 1.3-3.5 0-4.9L150 241c-1.3-1.3-3.5-1.3-4.9 0l-1.3 1.3c-1.3 1.4-1.3 3.6 0 4.9z" /><path class="prefix__st1" d="M356.4 331.7c0 53.4-53 67.4-106.4 67.4s-113.2-14.4-113.2-67.9S196 218.6 249.4 218.6s107 59.6 107 113.1z" /><path class="prefix__st1" d="M303 197.4c0 29.5-23.9 53.4-53.4 53.4-24.2 0-44.7-16.1-51.2-38.2-1.4-4.8-2.2-9.9-2.2-15.2 0-29.5 23.9-53.4 53.4-53.4s53.4 23.9 53.4 53.4z" /><circle class="prefix__st3" cx="228.4" cy="176.4" r="6.6" /><circle class="prefix__st3" cx="266.5" cy="176.4" r="6.6" /><path class="prefix__st4" d="M197.6 209.3c6.3-.1 30 5.4 40.8 6.1 9.6.6 17.4 1.6 31.5.4 7.2-.6 27.2-8 32.7-10.9 1.6-.8-.8 15.8-.3 20 .4 3.7.5 5.3 1.6 6.8 1.3 1.6 1 1.2.8 3.2-.9 7.2-18 11.6-25.1 12-9.3.5-30.7 1.2-33.2 1-2.6-.2-54.9-8.3-51.5-13.3 3.7-5.4 4.7-6.9 4.6-10-.4-10.5-2.1-15.3-1.9-15.3z" /><path class="prefix__st0" d="m380.1 230-63.2 46.6c-2.4 1.8-2.9 5.1-1.1 7.5l1.3 1.7c1.8 2.4 5.1 2.9 7.5 1.1l63.2-46.6c2.4-1.8 2.9-5.1 1.1-7.5l-1.3-1.7c-1.8-2.3-5.2-2.8-7.5-1.1zm-136.4-43.9c-1.8-1.9-11.4-6.2-11.7-6.3-6.5-2.5-13-4.3-12.7-3.8 4.7 9.8 10.5 17.8 15.8 20.5 3 1.5 8.6.1 9.6-2.6s.9-5.8-1-7.8z" /><path class="prefix__st4" d="M265.7 247.4s5.4 23.1 6.3 30.9c.6 5.3.4 14.8.6 21.2.2 4.9-1.3 9.9-1.7 19.7 0 1.1 2.9-2.5 4-2.1 1.4.4 1.4 4.5 2.8 5 1.5.6 3.8-3.4 5.4-3.4 1.2 0 2.1 3.2 3.2 3.4 1.7.2 3.4-4.6 5.2-4.7 1.7-.2 3.1 4.7 4.7 4.7 1.7 0 2.4-5 4-5.7.7-.3 2.9 1.8 2.9 1.1-.6-10.2-2.5-23-3.1-30.7-.3-4.5-1.3-13.7-1.8-18.2-.4-3.9-2.8-15.6-2.8-15.6l-3.5-8.9-26.2 3.3z" /><path class="prefix__st5" d="m315.1 90.1-3.4 5.9-5.9-3.4c-2-1.2-4.6-.5-5.8 1.6-1.2 2-.5 4.6 1.6 5.8l5.9 3.4-3.4 5.9c-1.2 2-.5 4.6 1.6 5.8 2 1.2 4.6.5 5.8-1.6l3.4-5.9 5.9 3.4c2 1.2 4.6.5 5.8-1.6 1.2-2 .5-4.6-1.6-5.8l-5.9-3.4 3.4-5.9c1.2-2 .5-4.6-1.6-5.8-2-1.2-4.6-.5-5.8 1.6zm-192.7 95.3-3.4 5.9-5.9-3.4c-2-1.2-4.6-.5-5.8 1.6-1.2 2-.5 4.6 1.6 5.8l5.9 3.4-3.4 5.9c-1.2 2-.5 4.6 1.6 5.8 2 1.2 4.6.5 5.8-1.6l3.4-5.9 5.9 3.4c2 1.2 4.6.5 5.8-1.6 1.2-2 .5-4.6-1.6-5.8l-5.9-3.4 3.4-5.9c1.2-2 .5-4.6-1.6-5.8-2.1-1.1-4.7-.4-5.8 1.6zM396 303.6l-3.4 5.9-5.9-3.4c-2-1.2-4.6-.5-5.8 1.6-1.2 2-.5 4.6 1.6 5.8l5.9 3.4-3.4 5.9c-1.2 2-.5 4.6 1.6 5.8 2 1.2 4.6.5 5.8-1.6l3.4-5.9 5.9 3.4c2 1.2 4.6.5 5.8-1.6 1.2-2 .5-4.6-1.6-5.8l-5.9-3.4 3.4-5.9c1.2-2 .5-4.6-1.6-5.8-2-1.1-4.6-.4-5.8 1.6z" /><circle class="prefix__st5" cx="186.1" cy="101.7" r="8.5" /><circle class="prefix__st5" cx="350.5" cy="176.4" r="8.5" /><circle class="prefix__st5" cx="186.1" cy="316.5" r="8.5" /></symbol><symbol  viewBox="0 0 500 500" id="icon-warnings-9999"><path d="m266.2 69.2 198 342.9c7.2 12.4-1.8 28-16.2 28H52c-14.4 0-23.3-15.6-16.2-28l198-342.9c7.2-12.4 25.2-12.4 32.4 0zM250 356.5c-8.1 0-14.7 6.6-14.7 14.7s6.6 14.7 14.7 14.7 14.7-6.6 14.7-14.7-6.6-14.7-14.7-14.7zm17.5-147.9c0-9.7-7.9-17.5-17.5-17.5-9.7 0-17.5 7.9-17.5 17.5 0 .7 0 1.4.1 2.1l7.2 117.2c0 5.6 4.6 10.2 10.2 10.2s10.2-4.6 10.2-10.2l7.2-117.2c.1-.7.1-1.4.1-2.1z" fill="#f15a24" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-1"><style>#icon-weathers-1 .prefix__st1{fill:#f7b84e}#icon-weathers-1 .prefix__st2{fill:#c98e3f}#icon-weathers-1 .prefix__st3{fill:#ab7934}#icon-weathers-1 .prefix__st4{fill:#f15642}</style><path d="M24.9 249.9c0 124 100.7 224.6 224.8 224.6 124.2 0 224.8-100.5 224.8-224.6 0-124-100.7-224.6-224.8-224.6-124.1 0-224.8 100.5-224.8 224.6z" fill="#fcd063" /><path class="prefix__st1" d="M394 77.7c32.7 39 52.5 89.2 52.5 144.1 0 124-100.7 224.6-224.8 224.6-54.9 0-105.2-19.7-144.3-52.4 41.2 49.2 103.1 80.5 172.4 80.5 124.2 0 224.8-100.6 224.8-224.6 0-69.2-31.4-131-80.6-172.2z" /><path class="prefix__st2" d="M326.4 292H173.1c-4.2 0-7.7 3.1-7.7 7 0 42.6 37.8 77.2 84.3 77.2S334 341.6 334 299c.1-3.9-3.4-7-7.6-7z" /><path class="prefix__st3" d="M333.5 306c.3-2.3.6-4.6.6-7 0-3.9-3.4-7-7.7-7H173.1c-4.2 0-7.7 3.1-7.7 7 0 2.4.3 4.7.6 7h167.5z" /><path class="prefix__st2" d="M137.3 221.8c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1-28.1 12.6-28.1 28.1z" /><path class="prefix__st3" d="M165.4 207.8c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1s-28.1 12.6-28.1 28.1c0 2.4.4 4.8 1 7 3.2-12.2 14.1-21.1 27.1-21.1z" /><path class="prefix__st2" d="M306 221.8c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1c-15.6 0-28.1 12.6-28.1 28.1z" /><path class="prefix__st1" d="M362.2 270.9c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1-11.7.1-21.1 9.5-21.1 21.1zm-267 0c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1-11.7.1-21.1 9.5-21.1 21.1z" /><path class="prefix__st3" d="M334.1 207.8c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1S306 206.4 306 221.9c0 2.4.4 4.8 1 7 3.1-12.2 14-21.1 27.1-21.1z" /><path class="prefix__st4" d="M376.2 67.4c0 23.3 18.9 42.1 42.2 42.1 23.3 0 42.2-18.9 42.2-42.1 0-23.3-18.9-42.1-42.2-42.1-23.3 0-42.2 18.8-42.2 42.1z" /><path class="prefix__st4" d="M320 67.4c0 23.3 18.9 42.1 42.2 42.1 23.3 0 42.2-18.9 42.2-42.1 0-23.3-18.9-42.1-42.2-42.1-23.3 0-42.2 18.8-42.2 42.1z" /><path class="prefix__st4" d="M320 123.5c0 23.3 18.9 42.1 42.2 42.1 23.3 0 42.2-18.9 42.2-42.1 0-23.3-18.9-42.1-42.2-42.1-23.3 0-42.2 18.9-42.2 42.1z" /><path class="prefix__st4" d="M376.2 123.5c0 23.3 18.9 42.1 42.2 42.1 23.3 0 42.2-18.9 42.2-42.1 0-23.3-18.9-42.1-42.2-42.1-23.3 0-42.2 18.9-42.2 42.1z" /><path d="M362.2 95.5c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1c-15.5 0-28.1 12.6-28.1 28.1z" fill="#fff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-100"><style>#icon-weathers-100 .prefix__st0{fill:#ffb55a}</style><path class="prefix__st0" d="M128.9 129h242.2v242.2H128.9z" /><path class="prefix__st0" d="m78.737 249.996 171.26-171.26 171.26 171.26-171.26 171.26z" /><circle cx="249.9" cy="250.1" r="121.1" fill="#ffcf00" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-1006"><path d="m195.6 41.7-134 422c.4.1.8.3 1.2.4 12.2 3.8 25.1-2.9 29-15.1L217.7 48.7l-22.1-7z" fill="#f15a24" /><path d="M173.6 34.8 47.7 435.1c-3.7 11.8 2.5 24.3 14 28.6l134-422-22.1-6.9z" fill="#f7931e" /><path fill="#1088e2" d="m217.2 49-83.7 266.3 61.4-31.2L264 64.9z" /><path fill="#0391ff" d="m264 64.9-69.1 219.2 63.7-32.4 53.7-170.4z" /><path fill="#0396ff" d="m312.3 81.3-53.7 170.4 64.3-32.6 38.2-121.2z" /><path fill="#3fa9f5" d="m361.1 97.9-38.2 121.2 76.6-38.9 19.7-62.5z" /><path d="m441.4 125.3-22.2-7.6-19.7 62.5 44.2-22.5c14-7.1 12.5-27.4-2.3-32.4z" fill="#abdcff" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-101"><path fill="#E3E3E3" d="M405.1 212.9h-.5c-5-53.9-50.3-96.1-105.5-96.1-58.5 0-105.9 47.5-105.9 105.9 0 56.6 44.3 102.7 100.2 105.8v.2H405c32 0 57.9-25.9 57.9-57.9s-25.8-57.9-57.8-57.9z" /><path fill="#FFB55A" d="M87.2 97.8h242.2V340H87.2z" /><path fill="#FFB55A" d="m37.024 218.77 171.26-171.26 171.26 171.26-171.26 171.26z" /><circle fill="#FFCF00" cx="208.2" cy="218.9" r="121.1" /><path fill="#F6F6F6" d="M353.1 265.2c-15.9-54.4-66.2-94.2-125.8-94.2-71.6 0-129.8 57.3-131.1 128.7-33.3 4-59.2 32.2-59.2 66.6 0 37 30 67 67 67h239.1c46.5 0 84.3-37.8 84.3-84.3 0-43.2-32.5-78.8-74.3-83.8z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-102"><path fill="#FFB55A" d="M86.8 106.9H329v242.2H86.8z" /><path fill="#FFB55A" d="m36.541 227.91 171.26-171.26 171.26 171.26L207.8 399.17z" /><circle fill="#FFCF00" cx="207.8" cy="228" r="121.1" /><path fill="#F6F6F6" d="M352.7 274.3c-15.9-54.4-66.2-94.2-125.8-94.2-71.6 0-129.8 57.3-131.1 128.7-33.3 4-59.2 32.2-59.2 66.6 0 37 30 67 67 67h239.1c46.5 0 84.3-37.8 84.3-84.3 0-43.2-32.5-78.8-74.3-83.8z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-103"><path fill="#FFB55A" d="m37.366 249.498 212.13-212.13 212.13 212.13-212.13 212.13z" /><path fill="#FFB55A" d="M99.5 99.5h300v300h-300z" /><circle fill="#FFCF00" cx="249.1" cy="249.3" r="150" /><path fill="#F6F6F6" d="M192.4 263.7c-6.1-20.9-25.3-36-48.1-36-27.4 0-49.6 22-50.2 49.2-12.8 1.5-22.7 12.3-22.7 25.5 0 14.2 11.5 25.7 25.7 25.7h91.5c17.8 0 32.3-14.4 32.3-32.3-.1-16.6-12.5-30.2-28.5-32.1zm223.1-92.6c-6.8-23-27.9-39.8-53.1-39.8-30.3 0-54.8 24.3-55.4 54.3-14.1 1.7-25 13.6-25 28.1 0 15.7 12.7 28.3 28.3 28.3h101c19.7 0 35.6-15.9 35.6-35.6 0-18.3-13.8-33.3-31.4-35.3z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-104"><path fill="#E3E3E3" d="M402.1 177.6h-.5c-5-54.1-50.5-96.4-105.8-96.4-58.7 0-106.2 47.6-106.2 106.2 0 56.7 44.5 103.1 100.5 106.1v.2h112c32.1 0 58.1-26 58.1-58.1s-26-58-58.1-58z" /><path fill="#F6F6F6" d="M382 235.4c-17.4-59.4-72.2-102.8-137.3-102.8-78.1 0-141.6 62.6-143.1 140.4-36.4 4.3-64.6 35.1-64.6 72.6 0 40.4 32.7 73.1 73.1 73.1H371c50.8 0 92-41.2 92-92 .1-46.9-35.3-86-81-91.3z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-150"><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFB55A" d="M390.9 305.8c-95.4 0-172.7-77.3-172.7-172.7 0-17.9 2.7-35 7.7-51.2.5-1.6-.9-3.3-2.7-3.1-78.6 14.6-138.4 82.4-140.8 164.8-2.7 98.6 78.2 180.1 177 177.6 72.9-1.8 134.6-48.7 158.1-114 .5-1.6-.7-3.5-2.6-3.1-7.7 1.2-15.8 1.7-24 1.7z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-151"><path fill="#E3E3E3" d="M405.2 234.7h-.5c-5-53.9-50.3-96.1-105.5-96.1-58.5 0-105.9 47.5-105.9 105.9 0 56.6 44.3 102.7 100.2 105.8v.2h111.6c32 0 57.9-25.9 57.9-57.9s-25.8-57.9-57.8-57.9z" /><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFB55A" d="M403.1 271.9c-95.4 0-172.7-77.3-172.7-172.7 0-17.9 2.7-35 7.7-51.2.5-1.6-.9-3.3-2.7-3.1C156.8 59.5 97 127.3 94.6 209.7c-2.7 98.6 78.2 180.1 177 177.6 72.9-1.8 134.6-48.7 158.1-114 .5-1.6-.7-3.5-2.6-3.1-7.7 1.2-15.8 1.7-24 1.7z" /><path fill="#F6F6F6" d="M353.2 287c-15.9-54.4-66.2-94.2-125.8-94.2-71.6 0-129.8 57.3-131.1 128.7-33.3 4-59.2 32.2-59.2 66.6 0 37 30 67 67 67h239.1c46.5 0 84.3-37.8 84.3-84.3 0-43.2-32.5-78.8-74.3-83.8z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-152"><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFB55A" d="M420.8 278.9c-95.4 0-172.7-77.3-172.7-172.7 0-17.9 2.7-35 7.7-51.2.5-1.6-.9-3.3-2.7-3.1-78.6 14.6-138.4 82.4-140.8 164.8-2.7 98.6 78.2 180.1 177 177.6 72.9-1.8 134.6-48.7 158.1-114 .5-1.6-.7-3.5-2.6-3.1-7.7 1.2-15.8 1.7-24 1.7z" /><path fill="#F6F6F6" d="M368.6 280c-15.9-54.4-66.2-94.2-125.8-94.2-71.6 0-129.8 57.3-131.1 128.7-33.3 3.9-59.2 32.2-59.2 66.6 0 37 30 67 67 67h239.1c46.5 0 84.3-37.8 84.3-84.3.1-43.3-32.4-78.8-74.3-83.8z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-153"><path fill="#FFB55A" d="m393.3 88.5 7.3 14.8 16.2 2.4-11.7 11.5 2.8 16.1-14.6-7.6-14.6 7.6 2.8-16.1-11.9-11.5 16.4-2.4z" /><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFB55A" d="M408.3 290.4c-95.4 0-172.7-77.3-172.7-172.7 0-17.9 2.7-35 7.7-51.2.5-1.6-.9-3.3-2.7-3.1C162 78 102.2 145.8 99.8 228.2c-2.7 98.6 78.2 180.1 177 177.6 72.9-1.8 134.6-48.7 158.1-114 .5-1.6-.7-3.5-2.6-3.1-7.7 1.2-15.8 1.7-24 1.7z" /><path fill="#F6F6F6" d="M220.8 286.8c-6.9-23.6-28.7-40.8-54.5-40.8-31 0-56.2 24.8-56.8 55.7-14.5 1.7-25.6 14-25.6 28.8 0 16.1 13 29 29 29h103.5c20.2 0 36.5-16.4 36.5-36.5.1-18.6-14-34.1-32.1-36.2z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-2"><style>#icon-weathers-2 .prefix__st1{fill:#f7b84e}#icon-weathers-2 .prefix__st2{fill:#c98e3f}#icon-weathers-2 .prefix__st3{fill:#ab7934}</style><path d="M24.9 249.9c0 124 100.7 224.6 224.8 224.6 124.2 0 224.8-100.5 224.8-224.6 0-124-100.7-224.6-224.8-224.6-124.1 0-224.8 100.5-224.8 224.6z" fill="#fcd063" /><path class="prefix__st1" d="M394 77.7c32.7 39 52.5 89.2 52.5 144.1 0 124-100.7 224.6-224.8 224.6-54.9 0-105.2-19.7-144.3-52.4 41.2 49.2 103.1 80.5 172.4 80.5 124.2 0 224.8-100.6 224.8-224.6 0-69.2-31.4-131-80.6-172.2z" /><path class="prefix__st2" d="M326.4 292H173.1c-4.2 0-7.7 3.1-7.7 7 0 42.6 37.8 77.2 84.3 77.2S334 341.6 334 299c.1-3.9-3.4-7-7.6-7z" /><path class="prefix__st3" d="M333.5 306c.3-2.3.6-4.6.6-7 0-3.9-3.4-7-7.7-7H173.1c-4.2 0-7.7 3.1-7.7 7 0 2.4.3 4.7.6 7h167.5z" /><path class="prefix__st2" d="M137.3 221.8c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1-28.1 12.6-28.1 28.1z" /><path class="prefix__st3" d="M165.4 207.8c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1s-28.1 12.6-28.1 28.1c0 2.4.4 4.8 1 7 3.2-12.2 14.1-21.1 27.1-21.1z" /><path class="prefix__st2" d="M306 221.8c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1c-15.6 0-28.1 12.6-28.1 28.1z" /><path class="prefix__st1" d="M362.2 270.9c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1-11.7.1-21.1 9.5-21.1 21.1zm-267 0c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1-11.7.1-21.1 9.5-21.1 21.1z" /><path class="prefix__st3" d="M334.1 207.8c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1S306 206.4 306 221.9c0 2.4.4 4.8 1 7 3.1-12.2 14-21.1 27.1-21.1z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-3"><style>#icon-weathers-3 .prefix__st1{fill:#f7b84e}#icon-weathers-3 .prefix__st2{fill:#c98e3f}#icon-weathers-3 .prefix__st3{fill:#ab7934}</style><path d="M24.9 249.9c0 124 100.7 224.6 224.8 224.6 124.2 0 224.8-100.5 224.8-224.6 0-124-100.7-224.6-224.8-224.6-124.1 0-224.8 100.5-224.8 224.6z" fill="#fcd063" /><path class="prefix__st1" d="M394 77.7c32.7 39 52.5 89.2 52.5 144.1 0 124-100.7 224.6-224.8 224.6-54.9 0-105.2-19.7-144.3-52.4 41.2 49.2 103.1 80.5 172.4 80.5 124.2 0 224.8-100.6 224.8-224.6 0-69.2-31.4-131-80.6-172.2z" /><path class="prefix__st2" d="M95.2 221.8c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1-28.1 12.6-28.1 28.1z" /><path class="prefix__st3" d="M123.3 207.8c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1s-28.1 12.6-28.1 28.1c0 2.4.4 4.8 1 7 3.1-12.2 14-21.1 27.1-21.1z" /><path class="prefix__st2" d="M348.1 221.8c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1-28.1 12.6-28.1 28.1z" /><path class="prefix__st3" d="M376.2 207.8c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1s-28.1 12.6-28.1 28.1c0 2.4.4 4.8 1 7 3.2-12.2 14-21.1 27.1-21.1z" /><path class="prefix__st1" d="M362.2 285c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1s-21.1 9.4-21.1 21.1zm-267 0c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1s-21.1 9.4-21.1 21.1z" /><path class="prefix__st2" d="M320 299c0 11.6-9.5 21.1-21.1 21.1h-98.4c-11.6 0-21.1-9.5-21.1-21.1s9.5-21.1 21.1-21.1h98.4c11.6 0 21.1 9.5 21.1 21.1z" /><path class="prefix__st3" d="M180.8 292h137.9c-2.9-8.1-10.7-14-19.8-14h-98.4c-9-.1-16.8 5.8-19.7 14z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-300"><path fill="#E3E3E3" d="M401.8 194.2h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path fill="#FFB55A" d="m55 156.2 103.7-112 111.9 103.7L167 259.8z" /><path fill="#FFB55A" d="M86.6 75.8h152.6v152.6H86.6z" /><circle fill="#FFCF00" cx="162.9" cy="151.9" r="76.4" /><path fill="#F6F6F6" d="M344.2 220.2c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.1-40.6-30.6-74.1-70-78.7z" /><path d="m174.9 427.5 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.2-10.7-7.4-17.6zm68.4 18.7 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" fill="#4FC0F2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-301"><path fill="#4FC0F2" d="m188.6 442 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-57 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm114 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm57.1 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" /><path fill="#E3E3E3" d="M401.3 188.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path fill="#FFB55A" d="m54.5 150.3 103.7-112L270.1 142 166.6 253.9z" /><path fill="#FFB55A" d="M86.1 69.9h152.6v152.6H86.1z" /><circle fill="#FFCF00" cx="162.4" cy="146" r="76.4" /><path fill="#F6F6F6" d="M343.8 214.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-302"><path fill="#E3E3E3" d="M400.2 158.3h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path fill="#F6F6F6" d="M343.3 184c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3H334c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.1-77.8z" /><path fill-rule="evenodd" clip-rule="evenodd" fill="#F7AD44" d="M232.7 327.4h47.4l-71 96.2v-64.3h-40.7L256 240.8z" /><path fill="#4FC0F2" d="m117.3 380 7.4-18.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-7.4 18.2c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm163.8 26.6 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-303"><path d="M400.2 158.3h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" fill="#e3e3e3" /><path d="M343.3 184c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 30-55 61.9 0 34.4 27.9 62.3 62.3 62.3H334c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.1-77.8z" fill="#f6f6f6" /><path fill-rule="evenodd" clip-rule="evenodd" fill="#f7ad44" d="M232.7 327.4h47.4l-71 96.2v-64.3h-40.7L256 240.8z" /><path d="m59.7 384.1 9.1-22.3c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-9.1 22.3c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm46.8 22.5 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm241.3-22.5 9.1-22.3c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-9.1 22.3c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-66.7 22.5 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-304"><path fill="#E3E3E3" d="M400.2 159.1h-.4c-4.3-46.8-43.7-83.4-91.6-83.4-50.8 0-92 41.2-92 92 0 49.1 38.5 89.3 87 91.9v.1h97c27.8 0 50.3-22.5 50.3-50.3s-22.5-50.3-50.3-50.3z" /><path fill="#F6F6F6" d="M343.3 184.8c-14.8-50.6-61.6-87.6-117-87.6-66.5 0-120.6 53.3-121.8 119.6-31 3.6-55 29.9-55 61.9 0 34.4 27.9 62.3 62.3 62.3H334c43.3 0 78.4-35.1 78.4-78.4 0-40.1-30.2-73.2-69.1-77.8z" /><path fill-rule="evenodd" clip-rule="evenodd" fill="#F7AD44" d="M232.7 328.2h47.4l-71 96.2v-64.3h-40.7L256 241.6z" /><path fill="#4FC0F2" d="m118.5 384.9 9.1-22.3c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-9.1 22.3c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" /><path fill="#E3E3E3" d="M283 402.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.9-10.2-10.7-7.4-17.6zm16.4-40.2c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-305"><path d="M401.3 188.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 214.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m174.4 421.6 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm68.5 18.7 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-306"><path d="M401.3 155.5h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 181.5c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m124.4 388.8 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L149.4 399c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm91.9 18.7 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm99.7-18.7 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L341 399c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-307"><path d="M401.3 155.5h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 181.5c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m105 397.6 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L130 407.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm66.5 18.9 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm74.2-18.9 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm66.5 18.9 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-308"><path d="M401.3 151h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 177c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="M153.6 437.5c-6.8 0-12.4-5.6-12.4-12.4v-59.3c0-6.8 5.6-12.4 12.4-12.4 6.8 0 12.4 5.6 12.4 12.4v59.3c0 6.9-5.6 12.4-12.4 12.4zm55.9-23.2c-6.8 0-12.4-5.6-12.4-12.4v-36.1c0-6.8 5.6-12.4 12.4-12.4 6.8 0 12.4 5.6 12.4 12.4v36.1c0 6.8-5.6 12.4-12.4 12.4zm55.9 16.4c-6.8 0-12.4-5.6-12.4-12.4v-52.5c0-6.8 5.6-12.4 12.4-12.4 6.8 0 12.4 5.6 12.4 12.4v52.5c0 6.9-5.5 12.4-12.4 12.4zM97.7 407.9c-6.8 0-12.4-5.6-12.4-12.4v-29.6c0-6.8 5.6-12.4 12.4-12.4 6.8 0 12.4 5.6 12.4 12.4v29.6c0 6.8-5.6 12.4-12.4 12.4zm223.7-4.3c-6.8 0-12.4-5.6-12.4-12.4v-25.4c0-6.8 5.6-12.4 12.4-12.4 6.8 0 12.4 5.6 12.4 12.4v25.4c0 6.8-5.6 12.4-12.4 12.4zm46.9 5.9h-.8c-6.6 0-12-5.4-12-12V364c0-6.6 5.4-12 12-12h.8c6.6 0 12 5.4 12 12v33.5c0 6.6-5.4 12-12 12z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-309"><path d="m118.6 407.2 24.2-59.4c1.2-2.9 4.4-4.2 7.3-3.1 2.9 1.2 4.2 4.4 3.1 7.3L129 411.4c-1.2 2.9-4.4 4.2-7.3 3.1-2.9-1.2-4.3-4.4-3.1-7.3zm90.1 0 24.2-59.4c1.2-2.9 4.4-4.2 7.3-3.1 2.9 1.2 4.2 4.4 3.1 7.3l-24.2 59.4c-1.2 2.9-4.4 4.2-7.3 3.1-2.9-1.2-4.3-4.4-3.1-7.3zm90.1 0 24.2-59.4c1.2-2.9 4.4-4.2 7.3-3.1 2.9 1.2 4.2 4.4 3.1 7.3l-24.2 59.4c-1.2 2.9-4.4 4.2-7.3 3.1-2.9-1.2-4.3-4.4-3.1-7.3z" style="fill:#4fc0f2" /><path d="M401.3 146.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 172.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-310"><style>#icon-weathers-310 .prefix__st2{fill:#4fc0f2}</style><path d="M401.8 152.4h-.4C397 105.1 357.2 68 308.8 68c-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M344.3 178.4c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1H335c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path class="prefix__st2" d="m138.5 391.3 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm81.7 0 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm77.8 18.9 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L323 420.4c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" /><circle class="prefix__st2" cx="217.9" cy="429.8" r="12.9" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-311"><style>#icon-weathers-311 .prefix__st2{fill:#4fc0f2}</style><path d="M401.3 146.6h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 172.6c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path class="prefix__st2" d="m110 382.7 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L135 392.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm64.8 2.8 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm60.9 18.9 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" /><circle class="prefix__st2" cx="173.9" cy="423.9" r="12.9" /><path class="prefix__st2" d="m304.3 385.5 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-312"><path d="m209 425.6 28.5-69.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L234 435.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm70.7-25.1 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-191.9-24 8.5-20.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-8.5 20.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm262.4 0 8.5-20.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-8.5 20.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-195.3 24 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-13.1 32.1c2.4-7.1 10.1-10.8 17.1-8.4 7.1 2.4 10.8 10.1 8.4 17.1-2.4 7.1-10.1 10.8-17.1 8.4-7-2.4-10.8-10.1-8.4-17.1z" style="fill:#4fc0f2" /><path d="M401.3 146.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 172.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-313"><path d="m147.7 345-17.3 44.9 17.3 44.9 17.2-44.9zm68.2 0-17.3 44.9 17.3 44.9 17.3-44.9zm68.2 0-17.3 44.9 17.3 44.9 17.3-44.9zm68.2 0-17.2 44.9 17.2 44.9 17.3-44.9z" style="fill:#4fc0f2" /><path d="M401.3 146.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 172.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-314"><path d="M218.7 422.7c-4-1.8-5.8-6.4-4-10.4l23.4-53c1.8-4 6.4-5.8 10.4-4 4 1.8 5.8 6.4 4 10.4l-23.4 53c-1.7 3.9-6.4 5.7-10.4 4z" fill="#e6e6e6" /><path d="m134.1 388.9 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm159.5 18.9 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L318.6 418c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /><path d="M401.3 146.6h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 172.6c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-315"><path d="M182.3 418.5c-4-1.8-5.8-6.4-4-10.4l23.4-53c1.8-4 6.4-5.8 10.4-4 4 1.8 5.8 6.4 4 10.4l-23.4 53c-1.8 4-6.4 5.8-10.4 4z" fill="#e6e6e6" /><path d="M401.3 146.6h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 172.6c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m117.2 384.7 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm120.6 18.9 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm62.2 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L325 413.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-316"><path d="M208.3 424.9c-4-1.8-5.8-6.4-4-10.4l23.4-53c1.8-4 6.4-5.8 10.4-4 4 1.8 5.8 6.4 4 10.4l-23.4 53c-1.8 4-6.4 5.8-10.4 4z" fill="#e6e6e6" /><path d="M401.3 153h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9 0-28.1-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 179c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m147.4 391.1 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zM259.6 410l18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm58.1 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zM89.3 391.1l10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-317"><path d="M401.3 153h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M343.8 179c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="M135.6 405c-7.4 0-13.5-6.1-13.5-13.5V362c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v29.5c0 7.4-6.1 13.5-13.5 13.5zm63.1 17.3c-7.4 0-13.5-6.1-13.5-13.5V362c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v46.8c0 7.4-6.1 13.5-13.5 13.5zm63.1-28.5c-7.4 0-13.5-6.1-13.5-13.5v-18.4c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v18.4c0 7.5-6.1 13.5-13.5 13.5zm63.1 17.1c-7.4 0-13.5-6.1-13.5-13.5v-35.5c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v35.5c0 7.4-6 13.5-13.5 13.5z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-318"><style>#icon-weathers-318 .prefix__st2{fill:#4fc0f2}</style><path d="M401.8 157.6h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M344.3 183.6C329.3 132.4 282.1 95 226 95c-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1H335c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path class="prefix__st2" d="M159.3 410c-7.4 0-13.5-6.1-13.5-13.5V367c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v29.5c0 7.5-6 13.5-13.5 13.5zm59.9 17.3c-7.4 0-13.5-6.1-13.5-13.5V367c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v46.8c0 7.5-6.1 13.5-13.5 13.5zm59.9-28.4c-7.4 0-13.5-6.1-13.5-13.5V367c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v18.4c0 7.4-6.1 13.5-13.5 13.5zm59.8 17.1c-7.4 0-13.5-6.1-13.5-13.5V367c0-7.4 6.1-13.5 13.5-13.5s13.5 6.1 13.5 13.5v35.5c.1 7.4-6 13.5-13.5 13.5z" /><circle class="prefix__st2" cx="279.1" cy="421" r="12.9" /><circle class="prefix__st2" cx="158.8" cy="433.9" r="12.9" /><path class="prefix__st2" d="M99.5 390.9c-7.4 0-13.5-6.1-13.5-13.5V367c0-7.4 6.1-13.5 13.5-13.5S113 359.6 113 367v10.4c0 7.5-6.1 13.5-13.5 13.5z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-350"><path d="M401.3 164.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M341.1 141.5c-44.5 0-80.5-36-80.5-80.5 0-8.3 1.3-16.3 3.6-23.9.2-.8-.4-1.6-1.3-1.4-36.6 6.8-64.6 38.5-65.6 76.8-1.3 46 36.5 84 82.5 82.8 34-.8 62.7-22.7 73.7-53.1.3-.8-.4-1.6-1.2-1.5-3.6.5-7.4.8-11.2.8z" fill-rule="evenodd" clip-rule="evenodd" fill="#ffb55a" /><path d="M343.8 190.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m174.4 397.6 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm68.5 18.7 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-351"><path d="m188.6 441.1 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm-57 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm114 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6zm57.1 0 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /><path d="M401.3 187.4h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" fill="#e3e3e3" /><path d="M341.1 154.9c-44.5 0-80.5-36-80.5-80.5 0-8.3 1.3-16.3 3.6-23.9.2-.8-.4-1.6-1.3-1.4-36.6 6.8-64.6 38.5-65.6 76.8-1.3 46 36.5 84 82.5 82.8 34-.8 62.7-22.7 73.7-53.1.3-.8-.4-1.6-1.2-1.5-3.6.5-7.4.8-11.2.8z" fill-rule="evenodd" clip-rule="evenodd" fill="#ffb55a" /><path d="M343.8 203.7c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-399"><path d="M343.8 181.5c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m174.4 388.8 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6L199.4 399c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6zm68.5 18.7 18.3-44.8c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-18.3 44.8c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-2.8-10.2-10.7-7.4-17.6z" style="fill:#4fc0f2" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-4"><style>#icon-weathers-4 .prefix__st1{fill:#f7b84e}</style><path d="M24.9 249.9c0 124 100.7 224.6 224.8 224.6 124.2 0 224.8-100.5 224.8-224.6 0-124-100.7-224.6-224.8-224.6-124.1 0-224.8 100.5-224.8 224.6z" fill="#fcd063" /><path class="prefix__st1" d="M394 77.7c32.7 39 52.5 89.2 52.5 144.1 0 124-100.7 224.6-224.8 224.6-54.9 0-105.2-19.7-144.3-52.4 41.2 49.2 103.1 80.5 172.4 80.5 124.2 0 224.8-100.6 224.8-224.6 0-69.2-31.4-131-80.6-172.2z" /><path d="M311 348.1c-4 0-8.1-1-11.9-3-26.3-14.6-72.5-14.6-98.9 0-10.9 6-25 2.8-31.6-7.1-6.6-10-3.1-22.9 7.8-28.9 41-22.7 105.4-22.7 146.4 0 10.9 6 14.4 19 7.8 28.9-4.2 6.5-11.8 10.1-19.6 10.1zM137.3 235.8c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1-28.1 12.6-28.1 28.1zm168.7 0c0 15.5 12.6 28.1 28.1 28.1s28.1-12.6 28.1-28.1-12.6-28.1-28.1-28.1c-15.6.1-28.1 12.6-28.1 28.1z" style="fill:#c98e3f" /><path d="M176.5 323c41-22.7 105.4-22.7 146.4 0 4.8 2.7 8 6.7 9.7 11.2 3.7-9.3-.2-19.9-9.7-25.2-41-22.7-105.4-22.7-146.4 0-9.6 5.3-13.4 15.9-9.7 25.2 1.7-4.5 5-8.5 9.7-11.2zm-11.1-101.2c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1s-28.1 12.6-28.1 28.1c0 2.4.4 4.8 1 7 3.2-12.1 14.1-21.1 27.1-21.1zm168.7 0c13.1 0 24 9 27.1 21.1.6-2.3 1-4.6 1-7 0-15.5-12.6-28.1-28.1-28.1S306 220.4 306 235.9c0 2.4.4 4.8 1 7 3.1-12.1 14-21.1 27.1-21.1z" fill="#ab7934" /><path class="prefix__st1" d="M362.2 285c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1s-21.1 9.4-21.1 21.1zm-267 0c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1s-21.1 9.4-21.1 21.1z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-400"><style>#icon-weathers-400 .prefix__st0{fill:#e3e3e3}</style><circle class="prefix__st0" cx="196.3" cy="397.3" r="22.6" /><circle class="prefix__st0" cx="277.7" cy="397.3" r="22.6" /><path class="prefix__st0" d="M401.3 163.5h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M343.8 189.5c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-401"><style>#icon-weathers-401 .prefix__st0{fill:#e3e3e3}</style><circle class="prefix__st0" cx="318.3" cy="397.3" r="22.6" /><circle class="prefix__st0" cx="155.7" cy="397.3" r="22.6" /><circle class="prefix__st0" cx="237" cy="397.3" r="22.6" /><path class="prefix__st0" d="M401.3 163.5h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M343.8 189.5c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-402"><style>#icon-weathers-402 .prefix__st0{fill:#e3e3e3}</style><circle class="prefix__st0" cx="283.7" cy="397.8" r="22.6" /><circle class="prefix__st0" cx="121" cy="397.8" r="22.6" /><circle class="prefix__st0" cx="202.3" cy="397.8" r="22.6" /><path class="prefix__st0" d="M401.8 164h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M344.3 190c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1H335c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><circle class="prefix__st0" cx="365" cy="397.8" r="22.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-403"><style>#icon-weathers-403 .prefix__st0{fill:#e3e3e3}</style><circle class="prefix__st0" cx="301.4" cy="383.2" r="22.6" /><circle class="prefix__st0" cx="373.8" cy="395.9" r="12.6" /><circle class="prefix__st0" cx="133.5" cy="383.2" r="22.6" /><circle class="prefix__st0" cx="211.4" cy="395.9" r="13.6" /><circle class="prefix__st0" cx="250" cy="443.5" r="22.6" /><path class="prefix__st0" d="M401.3 164.8h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M343.8 190.8c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-404"><style>#icon-weathers-404 .prefix__st2{fill:#e3e3e3}</style><path d="M363.5 181.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.1-40.6-30.6-74.1-70-78.7z" fill="#f6f6f6" /><path d="m164.4 388.6 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6z" fill="#4fc0f2" /><circle class="prefix__st2" cx="289.9" cy="384.6" r="22.6" /><circle class="prefix__st2" cx="361.6" cy="384.6" r="12.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-405"><style>#icon-weathers-405 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M401.8 166.2h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M344.3 192.2c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1H335c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m145.1 399.5 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6z" fill="#4fc0f2" /><circle class="prefix__st0" cx="270.6" cy="395.5" r="22.6" /><circle class="prefix__st0" cx="342.4" cy="395.5" r="12.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-406"><style>#icon-weathers-406 .prefix__st0{fill:#e3e3e3}#icon-weathers-406 .prefix__st1{fill:#ffb55a}</style><path class="prefix__st0" d="M401.3 188.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path class="prefix__st1" d="m54.5 150.3 103.7-112L270.1 142 166.6 253.9z" /><path class="prefix__st1" d="M86.1 69.9h152.6v152.6H86.1z" /><circle cx="162.4" cy="146" fill="#ffcf00" r="76.4" /><path d="M343.8 214.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="m144.6 421.6 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6z" fill="#4fc0f2" /><circle class="prefix__st0" cx="270.1" cy="417.6" r="22.6" /><circle class="prefix__st0" cx="341.9" cy="417.6" r="12.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-407"><style>#icon-weathers-407 .prefix__st0{fill:#e3e3e3}#icon-weathers-407 .prefix__st1{fill:#ffb55a}</style><path class="prefix__st0" d="M401.3 197.6h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path class="prefix__st1" d="m54.5 159.6 103.7-112 111.9 103.7-103.5 111.9z" /><path class="prefix__st1" d="M86.1 79.2h152.6v152.6H86.1z" /><circle cx="162.4" cy="155.3" fill="#ffcf00" r="76.4" /><path d="M343.8 223.6c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><circle class="prefix__st0" cx="236.9" cy="426.9" r="22.6" /><circle class="prefix__st0" cx="139.9" cy="426.9" r="22.6" /><circle class="prefix__st0" cx="333.8" cy="426.9" r="22.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-408"><style>#icon-weathers-408 .prefix__st1{fill:#e3e3e3}</style><path d="M221.9 429.2c-4-1.8-5.8-6.4-4-10.4l23.4-53c1.8-4 6.4-5.8 10.4-4 4 1.8 5.8 6.4 4 10.4l-23.4 53c-1.7 4-6.4 5.8-10.4 4z" fill="#e6e6e6" /><circle class="prefix__st1" cx="325.2" cy="395.5" r="22.6" /><circle class="prefix__st1" cx="148.5" cy="395.5" r="15.9" /><path class="prefix__st1" d="M401.3 155.5h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M343.8 181.5c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-409"><style>#icon-weathers-409 .prefix__st1{fill:#e3e3e3}</style><path d="M187.3 427.6c-4-1.8-5.8-6.4-4-10.4l23.4-53c1.8-4 6.4-5.8 10.4-4 4 1.8 5.8 6.4 4 10.4l-23.4 53c-1.7 4-6.4 5.8-10.4 4z" fill="#e6e6e6" /><circle class="prefix__st1" cx="277.1" cy="394" r="22.6" /><circle class="prefix__st1" cx="127.3" cy="394" r="15.9" /><path class="prefix__st1" d="M401.3 153.9h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M343.8 179.9c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.5-30.7-74-70-78.7z" fill="#f6f6f6" /><circle class="prefix__st1" cx="352" cy="394" r="22.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-410"><style>#icon-weathers-410 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M401.8 152.3h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M344.3 178.3c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1H335c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><path d="M218.1 415c-4-1.8-5.8-6.4-4-10.4l23.4-53c1.8-4 6.4-5.8 10.4-4 4 1.8 5.8 6.4 4 10.4l-23.4 53c-1.7 4-6.4 5.8-10.4 4z" fill="#e6e6e6" /><circle class="prefix__st0" cx="304.7" cy="381.3" r="22.6" /><circle class="prefix__st0" cx="161.3" cy="381.3" r="15.9" /><circle class="prefix__st0" cx="89.6" cy="381.3" r="15.9" /><circle class="prefix__st0" cx="376.4" cy="381.3" r="22.6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-456"><style>#icon-weathers-456 .prefix__st1{fill:#e3e3e3}</style><path d="m137.3 416.6 10.6-25.9c2.8-6.9 10.7-10.2 17.6-7.4 6.9 2.8 10.2 10.7 7.4 17.6l-10.6 25.9c-2.8 6.9-10.7 10.2-17.6 7.4-6.9-3-10.1-10.7-7.4-17.6z" fill="#4fc0f2" /><circle class="prefix__st1" cx="262.8" cy="412.6" r="22.6" /><circle class="prefix__st1" cx="334.6" cy="412.6" r="12.6" /><path class="prefix__st1" d="M401.3 177.7h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M341.1 154.9c-44.5 0-80.5-36-80.5-80.5 0-8.3 1.3-16.3 3.6-23.9.2-.8-.4-1.6-1.3-1.4-36.6 6.8-64.6 38.5-65.6 76.8-1.3 46 36.5 84 82.5 82.8 34-.8 62.7-22.7 73.7-53.1.3-.8-.4-1.6-1.2-1.5-3.6.5-7.4.8-11.2.8z" fill-rule="evenodd" clip-rule="evenodd" fill="#ffb55a" /><path d="M343.8 203.7c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-457"><style>#icon-weathers-457 .prefix__st0{fill:#e3e3e3}</style><circle class="prefix__st0" cx="241.6" cy="411.5" r="22.6" /><circle class="prefix__st0" cx="144.6" cy="411.5" r="22.6" /><circle class="prefix__st0" cx="338.4" cy="411.5" r="22.6" /><path class="prefix__st0" d="M401.3 181.7h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M341.1 149.2c-44.5 0-80.5-36-80.5-80.5 0-8.3 1.3-16.3 3.6-23.9.2-.8-.4-1.6-1.3-1.4-36.6 6.8-64.6 38.5-65.6 76.8-1.3 46 36.5 84 82.5 82.8 34-.8 62.7-22.7 73.7-53.1.3-.8-.4-1.6-1.2-1.5-3.6.5-7.4.8-11.2.8z" fill-rule="evenodd" clip-rule="evenodd" fill="#ffb55a" /><path d="M343.8 198c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.1-40.6-30.6-74.1-70-78.7z" fill="#f6f6f6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-499"><style>#icon-weathers-499 .prefix__st0{fill:#e3e3e3}</style><path class="prefix__st0" d="M401.3 151h-.4c-4.4-47.3-44.2-84.4-92.6-84.4-51.4 0-93 41.7-93 93 0 49.7 38.9 90.3 88 92.9v.1h98.1c28.1 0 50.9-22.8 50.9-50.9s-22.9-50.7-51-50.7z" /><path d="M343.8 177c-15-51.2-62.2-88.6-118.3-88.6-67.3 0-121.9 54-123.2 120.9-31.3 3.7-55.6 30.3-55.6 62.6 0 34.9 28.2 63.1 63.1 63.1h224.7c43.7 0 79.3-35.5 79.3-79.3-.2-40.6-30.7-74.1-70-78.7z" fill="#f6f6f6" /><circle class="prefix__st0" cx="151.5" cy="382.5" r="22.6" /><circle class="prefix__st0" cx="321.5" cy="382.5" r="22.6" /><circle class="prefix__st0" cx="230.2" cy="418" r="12.9" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-5"><style>#icon-weathers-5 .prefix__st1{fill:#f7b84e}</style><path d="M24.9 249.9c0 124 100.7 224.6 224.8 224.6 124.2 0 224.8-100.5 224.8-224.6 0-124-100.7-224.6-224.8-224.6-124.1 0-224.8 100.5-224.8 224.6z" fill="#fcd063" /><path class="prefix__st1" d="M394 77.7c32.7 39 52.5 89.2 52.5 144.1 0 124-100.7 224.6-224.8 224.6-54.9 0-105.2-19.7-144.3-52.4 41.2 49.2 103.1 80.5 172.4 80.5 124.2 0 224.8-100.6 224.8-224.6 0-69.2-31.4-131-80.6-172.2z" /><path d="M311 348.1c-4 0-8.1-1-11.9-3-26.3-14.6-72.5-14.6-98.9 0-10.9 6-25 2.8-31.6-7.1-6.6-10-3.1-22.9 7.8-28.9 41-22.7 105.4-22.7 146.4 0 10.9 6 14.4 19 7.8 28.9-4.2 6.5-11.8 10.1-19.6 10.1zm-12-154.4c4.2 0 8.2 1.2 11.7 3.5l42.2 28.1c9.7 6.4 12.3 19.5 5.8 29.2-6.4 9.7-19.5 12.3-29.2 5.8l-42.2-28.1c-9.7-6.4-12.3-19.5-5.8-29.2 4-6 10.7-9.3 17.5-9.3zm-98.4 0c6.8 0 13.5 3.3 17.6 9.4 6.5 9.7 3.8 22.8-5.8 29.2l-42.2 28.1c-9.7 6.5-22.8 3.8-29.2-5.8-6.4-9.7-3.8-22.8 5.8-29.2l42.2-28.1c3.3-2.4 7.4-3.6 11.6-3.6z" fill="#c98e3f" /><path d="M176.5 323c41-22.7 105.4-22.7 146.4 0 4.8 2.7 8 6.7 9.7 11.2 3.7-9.3-.2-19.9-9.7-25.2-41-22.7-105.4-22.7-146.4 0-9.6 5.3-13.4 15.9-9.7 25.2 1.7-4.5 5-8.5 9.7-11.2zm41.6-98.9c-6.4-9.7-19.5-12.3-29.2-5.8l-42.2 28.1c-2.8 1.9-4.9 4.3-6.5 7-5.5-9.5-2.9-21.8 6.5-28l42.2-28.1c9.7-6.5 22.8-3.8 29.2 5.8 4.6 6.9 4.5 15.5.6 22.2-.2-.4-.3-.8-.6-1.2zm63.3 0c6.4-9.7 19.5-12.3 29.2-5.8l42.2 28.1c2.8 1.9 4.9 4.3 6.5 7 5.5-9.5 2.8-21.8-6.5-28l-42.2-28.1c-9.7-6.5-22.8-3.8-29.2 5.8-4.6 6.9-4.5 15.5-.6 22.2.2-.4.3-.8.6-1.2z" fill="#ab7934" /><path class="prefix__st1" d="M362.2 285c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1s-21.1 9.4-21.1 21.1zm-267 0c0 11.6 9.4 21.1 21.1 21.1 11.6 0 21.1-9.4 21.1-21.1 0-11.6-9.4-21.1-21.1-21.1s-21.1 9.4-21.1 21.1z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-500"><circle cx="250" cy="250" r="166.8" fill="#ffdc32" /><path d="M169.2 192.8H65.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h103.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zm59 2.4h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm12 43.8H65.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h174.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm91.2 76.1H435c6.9 0 12.6-5.7 12.6-12.6 0-6.9-5.7-12.6-12.6-12.6H331.4c-6.9 0-12.6 5.7-12.6 12.6.1 6.9 5.7 12.6 12.6 12.6zm-58.9 2.4h20.6c6.9 0 12.6-5.7 12.6-12.6 0-6.9-5.7-12.6-12.6-12.6h-20.6c-6.9 0-12.6 5.7-12.6 12.6 0 6.9 5.7 12.6 12.6 12.6zm-12.1 43.7H435c6.9 0 12.6-5.7 12.6-12.6 0-6.9-5.7-12.6-12.6-12.6H260.4c-6.9 0-12.6 5.7-12.6 12.6.1 7 5.7 12.6 12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-501"><path d="M363.6 192.6c-15.1-51.6-62.7-89.3-119.3-89.3-67.9 0-123.1 54.4-124.4 122-31.6 3.7-56.1 30.5-56.1 63.1 0 35.1 28.4 63.5 63.5 63.5H354c44.2 0 80-35.8 80-80 .1-40.8-30.7-74.8-70.4-79.3z" fill="#f6f6f6" /><path d="M355.7 395.8H198.5c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm-192.8 0h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-502"><style>#icon-weathers-502 .prefix__st0{fill:#ccc}#icon-weathers-502 .prefix__st1{fill:#999}#icon-weathers-502 .prefix__st2{fill:#e6e6e6}#icon-weathers-502 .prefix__st3{fill:#b3b3b3}</style><circle class="prefix__st0" cx="302.6" cy="191.5" r="30.5" /><circle class="prefix__st1" cx="255.4" cy="262.3" r="20.5" /><circle class="prefix__st1" cx="302.7" cy="368.9" r="13.9" /><circle class="prefix__st0" cx="182.6" cy="169.5" r="52.5" /><circle class="prefix__st2" cx="150.1" cy="286" r="39" /><circle class="prefix__st2" cx="326.6" cy="292.5" r="30.5" /><circle class="prefix__st3" cx="372.9" cy="366.9" r="16.1" /><circle class="prefix__st3" cx="228.3" cy="351.2" r="20.5" /><circle class="prefix__st0" cx="266.9" cy="306.9" r="11.9" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-503"><style>#icon-weathers-503 .prefix__st0{fill:#e6e6e6}#icon-weathers-503 .prefix__st1{fill:#a67c52}</style><path class="prefix__st0" d="M421.5 381.9h-343c-7.3 0-13.2-5.9-13.2-13.2 0-7.3 5.9-13.2 13.2-13.2h342.9c7.3 0 13.2 5.9 13.2 13.2.1 7.3-5.9 13.2-13.1 13.2z" /><path class="prefix__st1" d="M126.9 195.9c0 9 7.3 16.2 16.2 16.3s16.2-7.3 16.3-16.2c0-9-7.3-16.2-16.2-16.2-9-.1-16.3 7.1-16.3 16.1z" /><path d="M168.2 235.5c0 12.9 10.4 23.3 23.3 23.3s23.3-10.4 23.3-23.3-10.4-23.3-23.3-23.3c-12.9-.1-23.3 10.4-23.3 23.3zm-95-90.2c0 7.8 6.3 14.1 14.1 14.1s14.1-6.3 14.1-14.1-6.3-14.1-14.1-14.1-14.1 6.3-14.1 14.1zm115.2-5.2c0 7.3 5.9 13.2 13.2 13.2s13.2-5.9 13.2-13.2-5.9-13.2-13.2-13.2-13.2 5.9-13.2 13.2z" style="fill:#c69c6d" /><path class="prefix__st0" d="M337.9 118.1c-53.4 0-96.7 43.3-96.7 96.7 0 4.9 5.9 8.8 13.2 8.8s13.2-3.9 13.2-8.8c0-38.9 31.5-70.3 70.3-70.3s70.3 31.5 70.3 70.3-31.5 70.3-70.3 70.3H78.5c-7.3 0-13.2 5.9-13.2 13.2 0 7.3 5.9 13.2 13.2 13.2h263.8c1 0 2-.1 3-.4 50-3.8 89.4-45.4 89.4-96.4 0-53.3-43.3-96.6-96.8-96.6z" /><path d="M81.2 235.5c0 3.4 2.8 6.2 6.2 6.2 3.4 0 6.2-2.8 6.2-6.2 0-3.4-2.8-6.2-6.2-6.2s-6.2 2.8-6.2 6.2z" fill="#c7b299" /><path class="prefix__st1" d="M143.1 153.3c0 3.4 2.8 6.2 6.2 6.2s6.2-2.8 6.2-6.2c0-3.4-2.8-6.2-6.2-6.2s-6.2 2.8-6.2 6.2z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-504"><style>#icon-weathers-504 .prefix__st3{fill:#c69c6d}#icon-weathers-504 .prefix__st3,#icon-weathers-504 .prefix__st4,#icon-weathers-504 .prefix__st5{fill-rule:evenodd;clip-rule:evenodd}#icon-weathers-504 .prefix__st4{fill:#b3b3b3}#icon-weathers-504 .prefix__st5{fill:#c7b299}</style><path d="M420.9 179.2c3-7.5-.7-15.9-8.2-18.9-7.5-3-15.9.7-18.9 8.2-2.4 6-61.8 146.5-310.6 152-8 .1-14.5 6.7-14.4 14.7.1 8 6.7 14.5 14.7 14.4h.3c269.3-6 334.5-163.7 337.1-170.4z" fill-rule="evenodd" clip-rule="evenodd" fill="#e6e6e6" /><path d="M181.7 244.2c15.9 0 28.7-12.9 28.7-28.7s-12.9-28.7-28.7-28.7-28.7 12.8-28.7 28.7c0 15.9 12.8 28.7 28.7 28.7z" fill-rule="evenodd" clip-rule="evenodd" fill="#a67c52" /><path class="prefix__st3" d="M293.7 201.9c15.9 0 28.7-12.9 28.7-28.7 0-15.9-12.9-28.7-28.7-28.7-15.9 0-28.7 12.9-28.7 28.7 0 15.9 12.9 28.7 28.7 28.7z" /><path class="prefix__st4" d="M361.2 316.2c-15.9 0-28.7 12.9-28.7 28.7 0 15.9 12.9 28.7 28.7 28.7 15.9 0 28.7-12.9 28.7-28.7 0-15.9-12.8-28.7-28.7-28.7z" /><path class="prefix__st5" d="M287.3 352.2c-9.6 0-17.3 7.8-17.3 17.3 0 9.6 7.8 17.3 17.3 17.3 9.6 0 17.3-7.8 17.3-17.3.1-9.5-7.7-17.3-17.3-17.3z" /><path class="prefix__st3" d="M413.7 265.2c-9.6 0-17.3 7.8-17.3 17.3s7.8 17.3 17.3 17.3c9.6 0 17.3-7.8 17.3-17.3s-7.7-17.3-17.3-17.3z" /><path class="prefix__st5" d="M130.8 276.1c10.2 0 18.5-8.3 18.5-18.5s-8.3-18.5-18.5-18.5-18.5 8.3-18.5 18.5 8.3 18.5 18.5 18.5z" /><path class="prefix__st4" d="M240.9 144.5c8.7 0 15.7-7 15.7-15.7s-7-15.7-15.7-15.7-15.7 7-15.7 15.7 7.1 15.7 15.7 15.7z" /><path d="M231.5 250c0 10.2 8.3 18.5 18.5 18.5s18.5-8.3 18.5-18.5-8.3-18.5-18.5-18.5-18.5 8.3-18.5 18.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#c8aa96" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-507"><path d="M416 161.8H84c-12.1 0-22-9.9-22-22s9.9-22 22-22h332c12.1 0 22 9.9 22 22s-9.9 22-22 22zm-84 73.4H84c-12.1 0-22-9.9-22-22s9.9-22 22-22h248c12.1 0 22 9.9 22 22 0 12.2-9.9 22-22 22zm-89 73.6H84c-12.1 0-22-9.9-22-22s9.9-22 22-22h159c12.1 0 22 9.9 22 22s-9.9 22-22 22zm-77 73.4H84c-12.1 0-22-9.9-22-22s9.9-22 22-22h82c12.1 0 22 9.9 22 22 0 12.2-9.9 22-22 22z" style="fill:#ffc107" /><path d="M228 382.2c-12.1 0-22-9.9-22-22s9.9-22 22-22 22 9.9 22 22c0 12.2-9.9 22-22 22zm77.5-73.4c-12.1 0-22-9.9-22-22s9.9-22 22-22 22 9.9 22 22-9.9 22-22 22zm86.8-74.2c-12.1 0-22-9.9-22-22s9.9-22 22-22 22 9.9 22 22-9.9 22-22 22z" style="fill:#ffa000" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-508"><style>#icon-weathers-508 .prefix__st0{fill:#ffc107}</style><path class="prefix__st0" d="M416 130.9H84c-12.1 0-22-9.9-22-22s9.9-22 22-22h332c12.1 0 22 9.9 22 22s-9.9 22-22 22zm-53.5 70.5H151c-12.1 0-22-9.9-22-22s9.9-22 22-22h211.5c12.1 0 22 9.9 22 22s-9.9 22-22 22zM323 272H164c-12.1 0-22-9.9-22-22s9.9-22 22-22h159c12.1 0 22 9.9 22 22s-9.9 22-22 22zm-62 70.6h-82c-12.1 0-22-9.9-22-22s9.9-22 22-22h82c12.1 0 22 9.9 22 22s-9.9 22-22 22z" /><path d="M120 342.6c-12.1 0-22-9.9-22-22s9.9-22 22-22 22 9.9 22 22-9.9 22-22 22zM384.5 272c-12.1 0-22-9.9-22-22s9.9-22 22-22 22 9.9 22 22-9.9 22-22 22zM84 201.4c-12.1 0-22-9.9-22-22s9.9-22 22-22 22 9.9 22 22-9.9 22-22 22z" style="fill:#ffa000" /><path class="prefix__st0" d="M296.5 413.1h-31c-12.1 0-22-9.9-22-22s9.9-22 22-22h31c12.1 0 22 9.9 22 22s-9.9 22-22 22z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-509"><path d="M364.1 193.1c-15.1-51.6-62.7-89.3-119.3-89.3-67.9 0-123.1 54.4-124.4 122-31.6 3.7-56.1 30.5-56.1 63.1 0 35.1 28.4 63.5 63.5 63.5h226.7c44.2 0 80-35.8 80-80 .1-40.8-30.7-74.8-70.4-79.3z" fill="#f6f6f6" /><path d="M275.8 435.5H118.5c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.6 12.6-12.5 12.6zm101.4-39.3H220c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zM335 435.5h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6H335c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zm-150.6-39.3h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-510"><path d="M364.2 175.8c-15.1-51.6-62.7-89.3-119.3-89.3-67.9 0-123.1 54.4-124.4 122-31.6 3.7-56.1 30.5-56.1 63.1 0 35.1 28.4 63.5 63.5 63.5h226.7c44.2 0 80-35.8 80-80 .1-40.7-30.7-74.7-70.4-79.3z" fill="#f6f6f6" /><path d="M186.8 193.5H83.2c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h103.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm59 2.3h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zM377.3 379H220.1c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zm-91.2 34.6H128.9c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm57.2 0h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zM184.5 379h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-511"><style>#icon-weathers-511 .prefix__st0{fill:#ccc}#icon-weathers-511 .prefix__st1{fill:#eee}#icon-weathers-511 .prefix__st5{fill:#666}</style><circle class="prefix__st0" cx="323.4" cy="168.2" r="37.3" /><circle class="prefix__st1" cx="265.7" cy="254.8" r="25" /><circle cx="323.6" cy="385" r="16.9" fill="#999" /><circle cx="352.8" cy="291.7" r="37.3" fill="#e6e6e6" /><circle class="prefix__st1" cx="409.3" cy="382.6" r="19.7" /><circle transform="rotate(-80.781 232.654 363.476)" cx="232.6" cy="363.5" fill="#b3b3b3" r="25" /><circle class="prefix__st0" cx="279.9" cy="309.2" r="14.5" /><circle class="prefix__st5" cx="175.9" cy="279.8" r="11.7" /><circle class="prefix__st5" cx="212.5" cy="184.5" r="11.7" /><circle cx="130.6" cy="168.2" r="26.6" fill="#e0e0e0" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-512"><style>#icon-weathers-512 .prefix__st0{fill:#ccc}#icon-weathers-512 .prefix__st1{fill:#eee}</style><circle class="prefix__st0" cx="323.4" cy="168.2" r="37.3" /><circle class="prefix__st1" cx="265.7" cy="254.8" r="25" /><circle cx="323.6" cy="385" r="16.9" fill="#999" /><circle class="prefix__st0" cx="176.7" cy="141.4" r="64.2" /><circle cx="352.8" cy="291.7" r="37.3" fill="#e6e6e6" /><circle class="prefix__st1" cx="409.3" cy="382.6" r="19.7" /><circle transform="rotate(-80.781 232.654 363.476)" cx="232.6" cy="363.5" fill="#b3b3b3" r="25" /><circle class="prefix__st0" cx="279.9" cy="309.2" r="14.5" /><circle cx="167.6" cy="282.9" r="11.7" fill="#666" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-513"><style>#icon-weathers-513 .prefix__st0{fill:#ccc}#icon-weathers-513 .prefix__st1{fill:#eee}#icon-weathers-513 .prefix__st3{fill:#e6e6e6}#icon-weathers-513 .prefix__st4{fill:#b3b3b3}</style><circle class="prefix__st0" cx="323.9" cy="168.7" r="37.3" /><circle class="prefix__st1" cx="266.2" cy="255.3" r="25" /><circle cx="324.1" cy="385.5" r="16.9" fill="#999" /><circle class="prefix__st0" cx="177.2" cy="141.9" r="64.2" /><circle class="prefix__st3" cx="137.5" cy="284.3" r="47.7" /><circle class="prefix__st3" cx="353.3" cy="292.2" r="37.3" /><circle class="prefix__st1" cx="409.8" cy="383.1" r="19.7" /><circle transform="rotate(-80.781 233.154 363.976)" class="prefix__st4" cx="233.1" cy="364" r="25" /><circle class="prefix__st0" cx="280.4" cy="309.7" r="14.5" /><circle class="prefix__st4" cx="90.2" cy="402.6" r="19.7" /><circle cx="156.4" cy="363.8" r="11.7" fill="#666" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-514"><path d="M364.1 175.2c-15.1-51.6-62.7-89.3-119.3-89.3-67.9 0-123.1 54.4-124.4 122-31.6 3.7-56.1 30.5-56.1 63.1 0 35.1 28.4 63.5 63.5 63.5h226.7c44.2 0 80-35.8 80-80 .1-40.7-30.7-74.7-70.4-79.3z" fill="#f6f6f6" /><path d="M186.8 192.9H83.1c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h103.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.5 12.6zm59 2.3h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6-.1 7-5.8 12.6-12.6 12.6zm131.4 183.3H220c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zM286 413H128.8c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6H286c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm-28.3-173.9H83.1c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h174.6c6.9 0 12.6 5.7 12.6 12.6 0 6.8-5.7 12.6-12.6 12.6zm-73.3 139.4h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-515"><path d="M364.2 175.8c-15.1-51.6-62.7-89.3-119.3-89.3-67.9 0-123.1 54.4-124.4 122-31.6 3.7-56.1 30.5-56.1 63.1 0 35.1 28.4 63.5 63.5 63.5h226.7c44.2 0 80-35.8 80-80 .1-40.7-30.7-74.7-70.4-79.3z" fill="#f6f6f6" /><path d="M186.8 193.5H83.2c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h103.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm59 2.3h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zM377.3 379H220.1c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zm-91.2 34.6H128.9c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h157.2c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zm-28.3-174H83.2c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h174.6c6.9 0 12.6 5.7 12.6 12.6 0 6.9-5.7 12.6-12.6 12.6zM184.5 379h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6zm159.3 34.6h-20.6c-6.9 0-12.6-5.7-12.6-12.6 0-6.9 5.7-12.6 12.6-12.6h20.6c6.9 0 12.6 5.7 12.6 12.6 0 7-5.7 12.6-12.6 12.6z" style="fill:#e6e6e6" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-6"><style>#icon-weathers-6 .prefix__st2{fill:#c98e3f}#icon-weathers-6 .prefix__st3{fill:#ab7934}</style><path d="M24.9 250.2c0 124 100.7 224.6 224.8 224.6 124.2 0 224.8-100.5 224.8-224.6 0-124-100.7-224.6-224.8-224.6-124.2 0-224.8 100.6-224.8 224.6z" fill="#fcd063" /><path d="M393.9 78.1c32.7 39 52.5 89.2 52.5 144.1 0 124-100.7 224.6-224.8 224.6-54.9 0-105.2-19.7-144.3-52.4 41.2 49.2 103.1 80.5 172.4 80.5 124.2 0 224.8-100.6 224.8-224.6 0-69.2-31.3-131-80.6-172.2z" fill="#f7b84e" /><path class="prefix__st2" d="M173 362.5h153.3c4.2 0 7.7-3.1 7.7-7 0-42.6-37.8-77.2-84.3-77.2s-84.3 34.6-84.3 77.2c0 3.9 3.4 7 7.6 7z" /><path class="prefix__st3" d="M249.7 292.3c42.4 0 77.6 28.9 83.4 66.4.5-1 .9-2 .9-3.2 0-42.6-37.8-77.2-84.3-77.2s-84.3 34.6-84.3 77.2c0 1.2.4 2.2.9 3.2 5.8-37.4 40.9-66.4 83.4-66.4z" /><path class="prefix__st2" d="m199.3 208.1 18.2-18.1c5.5-5.5 5.5-14.4 0-19.8-5.5-5.5-14.4-5.5-19.9 0l-18.2 18.1-18.2-18.1c-5.5-5.5-14.4-5.5-19.9 0s-5.5 14.4 0 19.8l18.2 18.1-18.2 18.1c-5.5 5.5-5.5 14.4 0 19.8 2.7 2.7 6.3 4.1 9.9 4.1 3.6 0 7.2-1.4 9.9-4.1l18.2-18.1 18.2 18.1c2.7 2.7 6.3 4.1 9.9 4.1 3.6 0 7.2-1.4 9.9-4.1 5.5-5.5 5.5-14.4 0-19.8l-18-18.1z" /><path class="prefix__st3" d="M141.4 184.2c5.5-5.5 14.4-5.5 19.9 0l18.2 18.1 18.2-18.1c5.5-5.5 14.4-5.5 19.9 0 .9.9 1.3 1.9 1.9 2.9 3.2-5.4 2.7-12.3-1.9-16.9-5.5-5.5-14.4-5.5-19.9 0l-18.2 18.1-18.2-18.1c-5.5-5.5-14.4-5.5-19.9 0-4.6 4.6-5.1 11.6-1.9 16.9.5-1 1-2.1 1.9-2.9zm0 56.1 18.2-18.1v-14l-18.2 18.1c-4.6 4.6-5.1 11.6-1.9 16.9.5-1 1-2 1.9-2.9zm57.9-32.2v14l18.2 18.1c.9.9 1.3 1.9 1.9 2.9 3.2-5.4 2.7-12.3-1.9-16.9l-18.2-18.1z" /><path class="prefix__st2" d="M339.8 208.1 358 190c5.5-5.5 5.5-14.4 0-19.8-5.5-5.5-14.4-5.5-19.9 0l-18.2 18.1-18.2-18.1c-5.5-5.5-14.4-5.5-19.9 0s-5.5 14.4 0 19.8l18.2 18.1-18.2 18.1c-5.5 5.5-5.5 14.4 0 19.8 2.7 2.7 6.3 4.1 9.9 4.1s7.2-1.4 9.9-4.1l18.2-18.1L338 246c2.7 2.7 6.3 4.1 9.9 4.1s7.2-1.4 9.9-4.1c5.5-5.5 5.5-14.4 0-19.8l-18-18.1z" /><path class="prefix__st3" d="M282.1 184.2c5.5-5.5 14.4-5.5 19.9 0l18.2 18.1 18.2-18.1c5.5-5.5 14.4-5.5 19.9 0 .9.9 1.3 1.9 1.9 2.9 3.2-5.4 2.7-12.3-1.9-16.9-5.5-5.5-14.4-5.5-19.9 0l-18.2 18.1-18.2-18.1c-5.5-5.5-14.4-5.5-19.9 0-4.6 4.6-5.1 11.6-1.9 16.9.5-1 1-2.1 1.9-2.9zm0 56.1 18.2-18.1-.2-14-18 18.1c-4.6 4.6-5.1 11.6-1.9 16.9.5-1 1-2 1.9-2.9zm57.7-32.2.2 14 18.2 18.1c.9.9 1.3 1.9 1.9 2.9 3.2-5.4 2.7-12.3-1.9-16.9l-18.4-18.1z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-800"><circle cx="250.3" cy="250.8" r="183.5" fill="#f2f2f2" /><path d="M250.3 67.3c-4.1 0-8.2.1-12.3.4 95.6 6.3 171.2 85.9 171.2 183.1S333.6 427.6 238 433.9c4.1.3 8.1.4 12.3.4 101.3 0 183.5-82.1 183.5-183.5S351.7 67.3 250.3 67.3z" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-801"><circle cx="249.9" cy="250.1" fill="#f2f2f2" r="171" /><path d="M359.2 249.8c0-83.6-59.9-153.1-139.1-168 9.7-1.7 19.7-2.6 29.8-2.6 94.4 0 171 76.5 171 171s-76.5 171-171 171c-10.9 0-21.5-1-31.8-3C298.3 404 359.2 334 359.2 249.8z" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-802"><circle cx="250" cy="250" r="171" fill="#f2f2f2" /><path d="M250 79c-15.4 0-30.2 2.1-44.4 5.9C278.5 104.4 332.2 171 332.2 250s-53.7 145.6-126.5 165.1c14.2 3.8 29.1 5.9 44.4 5.9 94.4 0 171-76.5 171-171S344.4 79 250 79z" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-803"><circle cx="250.3" cy="250.1" r="171" fill="#f2f2f2" /><path d="M169.9 250.1c0-77.7 50.9-143.6 121.1-166.1 74.7 18.3 130.3 85.7 130.3 166.1S365.9 397.9 291 416.2c-70.2-22.5-121.1-88.4-121.1-166.1z" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-804"><circle cx="250" cy="250" r="171" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-805"><circle cx="250" cy="249" r="171" fill="#f2f2f2" /><path d="M330.4 249c0-77.7-50.9-143.6-121.1-166.1C134.5 101.2 79 168.6 79 249s55.5 147.8 130.3 166.1c70.2-22.5 121.1-88.4 121.1-166.1z" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-806"><circle cx="250" cy="250" r="171" fill="#f2f2f2" /><path d="M250 79c15.4 0 30.2 2.1 44.4 5.9C221.5 104.4 167.8 171 167.8 250s53.7 145.6 126.5 165.1c-14.2 3.8-29.1 5.9-44.4 5.9-94.4 0-171-76.5-171-171S155.6 79 250 79z" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-807"><circle cx="250" cy="250" r="171" fill="#f2f2f2" /><path d="M140.7 249.6c0-83.6 59.9-153.1 139.1-168-9.7-1.7-19.7-2.6-29.8-2.6-94.4 0-171 76.5-171 171s76.6 171 171 171c10.9 0 21.5-1 31.8-3-80.2-14.1-141.1-84.1-141.1-168.4z" fill="#ffb55a" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-900"><style>#icon-weathers-900 .prefix__st0{fill-rule:evenodd;clip-rule:evenodd;fill:#cfd8dc}#icon-weathers-900 .prefix__st1{fill:#90a4ae}</style><path class="prefix__st0" d="M283.7 291.1V103.4c0-21.8-17.8-39.6-39.6-39.6-22.9 0-41.6 18.7-41.6 41.6v185.8c-27.2 14.5-45.6 43.1-45.6 76.1 0 47.6 38.6 86.2 86.2 86.2s86.2-38.6 86.2-86.2c.1-33.1-18.4-61.7-45.6-76.2z" /><path class="prefix__st1" d="M283.5 133h-28.6c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h28.6v9.8z" /><path d="M266.1 314.7V250H222c-1.1 0-2 .9-2 2v62.8c-20.2 8.9-34.2 29-34.2 52.4 0 31.6 25.6 57.3 57.3 57.3 31.6 0 57.3-25.6 57.3-57.3-.1-23.4-14.2-43.6-34.3-52.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#ff485e" /><path class="prefix__st1" d="M283.5 192.7h-28.6c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h28.6v9.8z" /><path d="M266.1 314.7V250h-12.8v64.7c20.2 8.9 34.2 29 34.2 52.4 0 29.5-22.2 53.7-50.9 56.9 2.1.2 4.2.4 6.4.4 31.6 0 57.3-25.6 57.3-57.3 0-23.3-14.1-43.5-34.2-52.4z" fill-rule="evenodd" clip-rule="evenodd" fill="#d82356" /><path class="prefix__st1" d="M283.5 152.9h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8zm0 19.9h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8zm0 39.8h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8zm0 20h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8z" /><path class="prefix__st0" d="M362.6 133h-37.9c-5.1 0-9.2-4.1-9.2-9.2s4.1-9.2 9.2-9.2h37.9c5.1 0 9.2 4.1 9.2 9.2s-4.1 9.2-9.2 9.2z" /><path class="prefix__st0" d="M352.8 104.9v37.9c0 5.1-4.1 9.2-9.2 9.2s-9.2-4.1-9.2-9.2v-37.9c0-5.1 4.1-9.2 9.2-9.2s9.2 4.1 9.2 9.2z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-901"><style>#icon-weathers-901 .prefix__st0{fill-rule:evenodd;clip-rule:evenodd;fill:#cfd8dc}#icon-weathers-901 .prefix__st1{fill:#90a4ae}</style><path class="prefix__st0" d="M268.9 282V94.3c0-21.8-17.8-39.6-39.6-39.6-22.9 0-41.6 18.7-41.6 41.6V282c-27.2 14.5-45.6 43.1-45.6 76.1 0 47.6 38.6 86.2 86.2 86.2s86.2-38.6 86.2-86.2c0-32.9-18.5-61.6-45.6-76.1z" /><path class="prefix__st1" d="M268.6 123.9H240c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h28.6v9.8z" /><path d="M251.2 305.7V241h-44.1c-1.1 0-2 .9-2 2v62.8c-20.2 8.9-34.2 29-34.2 52.4 0 31.6 25.6 57.3 57.3 57.3 31.6 0 57.3-25.6 57.3-57.3 0-23.5-14.1-43.7-34.3-52.5z" fill-rule="evenodd" clip-rule="evenodd" fill="#81d4fa" /><path class="prefix__st1" d="M268.6 183.6H240c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h28.6v9.8z" /><path d="M251.2 305.7V241h-12.8v64.7c20.2 8.9 34.2 29 34.2 52.4 0 29.5-22.2 53.7-50.9 56.9 2.1.2 4.2.4 6.4.4 31.6 0 57.3-25.6 57.3-57.3.1-23.4-14-43.6-34.2-52.4z" fill-rule="evenodd" clip-rule="evenodd" fill="#29b6f6" /><path class="prefix__st1" d="M268.6 143.8h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8zm0 19.9h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8zm0 39.9h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8zm0 19.9h-16.1c-2.7 0-4.9-2.2-4.9-4.9s2.2-4.9 4.9-4.9h16.1v9.8z" /><path class="prefix__st0" d="M347.8 123.9h-37.9c-5.1 0-9.2-4.1-9.2-9.2s4.1-9.2 9.2-9.2h37.9c5.1 0 9.2 4.1 9.2 9.2-.1 5.1-4.2 9.2-9.2 9.2z" /></symbol><symbol  viewBox="0 0 500 500" id="icon-weathers-999"><style>#icon-weathers-999 .prefix__st2{fill:#909090}</style><path d="M401.5 177.1h-.5c-5-54.1-50.5-96.4-105.8-96.4-58.7 0-106.2 47.6-106.2 106.2 0 56.7 44.5 103.1 100.5 106.1v.2h112c32.1 0 58.1-26 58.1-58.1s-25.9-58-58.1-58z" fill="#e3e3e3" /><path d="M381.5 234.9c-17.4-59.4-72.2-102.8-137.3-102.8-78.1 0-141.6 62.6-143.1 140.4-36.4 4.3-64.6 35.1-64.6 72.6 0 40.4 32.7 73.1 73.1 73.1h260.9c50.8 0 92-41.2 92-92 0-46.9-35.3-86-81-91.3z" fill="#f6f6f6" /><path class="prefix__st2" d="M207.3 373.5c-2.2 0-4.3-1.2-5.3-3.2l-25.5-49.1-13.8 46.5c-.9 3.2-4.3 5-7.4 4.1-3.2-.9-5-4.3-4.1-7.4l17.9-60.8c.7-2.3 2.7-4 5.2-4.3 2.4-.2 4.8 1 5.9 3.2l25.1 48.3 11.6-46.9c.8-3.2 4-5.2 7.3-4.4 3.2.8 5.2 4 4.4 7.3l-15.4 62.4c-.6 2.4-2.6 4.2-5.1 4.5-.4-.2-.6-.2-.8-.2zm36.2 0c-.6 0-1.2-.1-1.8-.3-3.2-1-4.9-4.4-3.9-7.5l20.1-63.6c1-3.2 4.4-4.9 7.5-3.9 3.2 1 4.9 4.4 3.9 7.5l-20.1 63.6c-.8 2.6-3.1 4.2-5.7 4.2zm98.4 0c-2.3 0-4.6-1.4-5.5-3.7l-21.1-50-23.6 50.2c-1.4 3-5 4.3-8 2.9s-4.3-5-2.9-8l29.4-62.4c1-2.1 3.2-3.5 5.5-3.4 2.4 0 4.5 1.5 5.4 3.7l26.4 62.4c1.3 3.1-.1 6.6-3.2 7.9-.8.3-1.6.4-2.4.4z" /><path fill="none" d="M302.1 342h13.4" /><path class="prefix__st2" d="M315.5 348h-13.4c-3.3 0-6-2.7-6-6s2.7-6 6-6h13.4c3.3 0 6 2.7 6 6s-2.7 6-6 6z" /></symbol>',t.insertBefore(r,t.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}const LW=["xlink:href"],OW={name:"i-icon"},Hoe=G1({...OW,props:{name:null,type:{default:"qweather"},size:{default:50}},setup(e){const t=e,r=Ve(()=>typeof t.size=="number"?`${t.size}px`:typeof t.size=="string"?t.size:"50px"),s=Ve(()=>/^warnings-/.test(t.name)?"warnings":"weathers"),l=Ve(()=>{if(t.type==="qweather")return IW(t.name);if(t.type==="caiyun")return RW(t.name)}),d=Ve(()=>`#icon-${s.value}-${l.value}`);return(y,n)=>(xc(),E1("svg",{"aria-hidden":"true",style:a2({width:Y0(r),height:Y0(r)})},[Ku("use",{"xlink:href":Y0(d)},null,8,LW)],4))}}),Goe=lr({name:"QSpace",setup(){const e=tt("div",{class:"q-space"});return()=>e}});function Woe(){return eu(eE)}class Cd extends Error{constructor(t,r){const s=new.target.prototype;super(`${t}: Status code '${r}'`),this.statusCode=r,this.__proto__=s}}class b6 extends Error{constructor(t="A timeout occurred."){const r=new.target.prototype;super(t),this.__proto__=r}}class Nl extends Error{constructor(t="An abort occurred."){const r=new.target.prototype;super(t),this.__proto__=r}}class BW extends Error{constructor(t,r){const s=new.target.prototype;super(t),this.transport=r,this.errorType="UnsupportedTransportError",this.__proto__=s}}class FW extends Error{constructor(t,r){const s=new.target.prototype;super(t),this.transport=r,this.errorType="DisabledTransportError",this.__proto__=s}}class NW extends Error{constructor(t,r){const s=new.target.prototype;super(t),this.transport=r,this.errorType="FailedToStartTransportError",this.__proto__=s}}class TS extends Error{constructor(t){const r=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=r}}class $W extends Error{constructor(t,r){const s=new.target.prototype;super(t),this.innerErrors=r,this.__proto__=s}}class JC{constructor(t,r,s){this.statusCode=t,this.statusText=r,this.content=s}}class rv{get(t,r){return this.send({...r,method:"GET",url:t})}post(t,r){return this.send({...r,method:"POST",url:t})}delete(t,r){return this.send({...r,method:"DELETE",url:t})}getCookieString(t){return""}}var Xt;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"})(Xt||(Xt={}));class Em{constructor(){}log(t,r){}}Em.instance=new Em;const jW="8.0.7";class _o{static isRequired(t,r){if(t==null)throw new Error(`The '${r}' argument is required.`)}static isNotEmpty(t,r){if(!t||t.match(/^\s*$/))throw new Error(`The '${r}' argument should not be empty.`)}static isIn(t,r,s){if(!(t in r))throw new Error(`Unknown ${s} value: ${t}.`)}}class Zn{static get isBrowser(){return!Zn.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Zn.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Zn.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Tm(e,t){let r="";return Rd(e)?(r=`Binary data of length ${e.byteLength}`,t&&(r+=`. Content: '${UW(e)}'`)):typeof e=="string"&&(r=`String data of length ${e.length}`,t&&(r+=`. Content: '${e}'`)),r}function UW(e){const t=new Uint8Array(e);let r="";return t.forEach(s=>{const l=s<16?"0":"";r+=`0x${l}${s.toString(16)} `}),r.substr(0,r.length-1)}function Rd(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}async function KC(e,t,r,s,l,d){const y={},[n,M]=k1();y[n]=M,e.log(Xt.Trace,`(${t} transport) sending data. ${Tm(l,d.logMessageContent)}.`);const P=Rd(l)?"arraybuffer":"text",L=await r.post(s,{content:l,headers:{...y,...d.headers},responseType:P,timeout:d.timeout,withCredentials:d.withCredentials});e.log(Xt.Trace,`(${t} transport) request complete. Response status: ${L.statusCode}.`)}function VW(e){return e===void 0?new Q2(Xt.Information):e===null?Em.instance:e.log!==void 0?e:new Q2(e)}class qW{constructor(t,r){this._subject=t,this._observer=r}dispose(){const t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(r=>{})}}class Q2{constructor(t){this._minLevel=t,this.out=console}log(t,r){if(t>=this._minLevel){const s=`[${new Date().toISOString()}] ${Xt[t]}: ${r}`;switch(t){case Xt.Critical:case Xt.Error:this.out.error(s);break;case Xt.Warning:this.out.warn(s);break;case Xt.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function k1(){let e="X-SignalR-User-Agent";return Zn.isNode&&(e="User-Agent"),[e,HW(jW,GW(),ZW(),WW())]}function HW(e,t,r,s){let l="Microsoft SignalR/";const d=e.split(".");return l+=`${d[0]}.${d[1]}`,l+=` (${e}; `,t&&t!==""?l+=`${t}; `:l+="Unknown OS; ",l+=`${r}`,s?l+=`; ${s}`:l+="; Unknown Runtime Version",l+=")",l}function GW(){if(Zn.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function WW(){if(Zn.isNode)return process.versions.node}function ZW(){return Zn.isNode?"NodeJS":"Browser"}function Vx(e){return e.stack?e.stack:e.message?e.message:`${e}`}function XW(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class YW extends rv{constructor(t){if(super(),this._logger=t,typeof fetch>"u"||Zn.isNode){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(r("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=r("node-fetch"):this._fetchType=fetch,this._fetchType=r("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(XW());if(typeof AbortController>"u"){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=r("abort-controller")}else this._abortControllerType=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new Nl;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const r=new this._abortControllerType;let s;t.abortSignal&&(t.abortSignal.onabort=()=>{r.abort(),s=new Nl});let l=null;if(t.timeout){const M=t.timeout;l=setTimeout(()=>{r.abort(),this._logger.log(Xt.Warning,"Timeout from HTTP request."),s=new b6},M)}t.content===""&&(t.content=void 0),t.content&&(t.headers=t.headers||{},Rd(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");let d;try{d=await this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:t.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:r.signal})}catch(M){throw s||(this._logger.log(Xt.Warning,`Error from HTTP request. ${M}.`),M)}finally{l&&clearTimeout(l),t.abortSignal&&(t.abortSignal.onabort=null)}if(!d.ok){const M=await CS(d,"text");throw new Cd(M||d.statusText,d.status)}const n=await CS(d,t.responseType);return new JC(d.status,d.statusText,n)}getCookieString(t){let r="";return Zn.isNode&&this._jar&&this._jar.getCookies(t,(s,l)=>r=l.join("; ")),r}}function CS(e,t){let r;switch(t){case"arraybuffer":r=e.arrayBuffer();break;case"text":r=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`);default:r=e.text();break}return r}class JW extends rv{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Nl):t.method?t.url?new Promise((r,s)=>{const l=new XMLHttpRequest;l.open(t.method,t.url,!0),l.withCredentials=t.withCredentials===void 0?!0:t.withCredentials,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.content===""&&(t.content=void 0),t.content&&(Rd(t.content)?l.setRequestHeader("Content-Type","application/octet-stream"):l.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const d=t.headers;d&&Object.keys(d).forEach(y=>{l.setRequestHeader(y,d[y])}),t.responseType&&(l.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{l.abort(),s(new Nl)}),t.timeout&&(l.timeout=t.timeout),l.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),l.status>=200&&l.status<300?r(new JC(l.status,l.statusText,l.response||l.responseText)):s(new Cd(l.response||l.responseText||l.statusText,l.status))},l.onerror=()=>{this._logger.log(Xt.Warning,`Error from HTTP request. ${l.status}: ${l.statusText}.`),s(new Cd(l.statusText,l.status))},l.ontimeout=()=>{this._logger.log(Xt.Warning,"Timeout from HTTP request."),s(new b6)},l.send(t.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class KW extends rv{constructor(t){if(super(),typeof fetch<"u"||Zn.isNode)this._httpClient=new YW(t);else if(typeof XMLHttpRequest<"u")this._httpClient=new JW(t);else throw new Error("No usable HttpClient found.")}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Nl):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}}class Ta{static write(t){return`${t}${Ta.RecordSeparator}`}static parse(t){if(t[t.length-1]!==Ta.RecordSeparator)throw new Error("Message is incomplete.");const r=t.split(Ta.RecordSeparator);return r.pop(),r}}Ta.RecordSeparatorCode=30;Ta.RecordSeparator=String.fromCharCode(Ta.RecordSeparatorCode);class QW{writeHandshakeRequest(t){return Ta.write(JSON.stringify(t))}parseHandshakeResponse(t){let r,s;if(Rd(t)){const n=new Uint8Array(t),M=n.indexOf(Ta.RecordSeparatorCode);if(M===-1)throw new Error("Message is incomplete.");const P=M+1;r=String.fromCharCode.apply(null,Array.prototype.slice.call(n.slice(0,P))),s=n.byteLength>P?n.slice(P).buffer:null}else{const n=t,M=n.indexOf(Ta.RecordSeparator);if(M===-1)throw new Error("Message is incomplete.");const P=M+1;r=n.substring(0,P),s=n.length>P?n.substring(P):null}const l=Ta.parse(r),d=JSON.parse(l[0]);if(d.type)throw new Error("Expected a handshake response from the server.");return[s,d]}}var wr;(function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"})(wr||(wr={}));class eZ{constructor(){this.observers=[]}next(t){for(const r of this.observers)r.next(t)}error(t){for(const r of this.observers)r.error&&r.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new qW(this,t)}}class tZ{constructor(t,r,s){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=t,this._connection=r,this._bufferSize=s}async _send(t){const r=this._protocol.writeMessage(t);let s=Promise.resolve();if(this._isInvocationMessage(t)){this._totalMessageCount++;let l=()=>{},d=()=>{};Rd(r)?this._bufferedByteCount+=r.byteLength:this._bufferedByteCount+=r.length,this._bufferedByteCount>=this._bufferSize&&(s=new Promise((y,n)=>{l=y,d=n})),this._messages.push(new iZ(r,this._totalMessageCount,l,d))}try{this._reconnectInProgress||await this._connection.send(r)}catch{this._disconnected()}await s}_ack(t){let r=-1;for(let s=0;s<this._messages.length;s++){const l=this._messages[s];if(l._id<=t.sequenceId)r=s,Rd(l._message)?this._bufferedByteCount-=l._message.byteLength:this._bufferedByteCount-=l._message.length,l._resolver();else if(this._bufferedByteCount<this._bufferSize)l._resolver();else break}r!==-1&&(this._messages=this._messages.slice(r+1))}_shouldProcessMessage(t){if(this._waitForSequenceMessage)return t.type!==wr.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(t))return!0;const r=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,r<=this._latestReceivedSequenceId?(r===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=r,this._ackTimer(),!0)}_resetSequence(t){if(t.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=t.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const t=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:wr.Sequence,sequenceId:t}));const r=this._messages;for(const s of r)await this._connection.send(s._message);this._reconnectInProgress=!1}_dispose(t){t??(t=new Error("Unable to reconnect to server."));for(const r of this._messages)r._rejector(t)}_isInvocationMessage(t){switch(t.type){case wr.Invocation:case wr.StreamItem:case wr.Completion:case wr.StreamInvocation:case wr.CancelInvocation:return!0;case wr.Close:case wr.Sequence:case wr.Ping:case wr.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:wr.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class iZ{constructor(t,r,s,l){this._message=t,this._id=r,this._resolver=s,this._rejector=l}}const rZ=30*1e3,nZ=15*1e3,oZ=1e5;var Un;(function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"})(Un||(Un={}));class w6{static create(t,r,s,l,d,y,n){return new w6(t,r,s,l,d,y,n)}constructor(t,r,s,l,d,y,n){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Xt.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},_o.isRequired(t,"connection"),_o.isRequired(r,"logger"),_o.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=d??rZ,this.keepAliveIntervalInMilliseconds=y??nZ,this._statefulReconnectBufferSize=n??oZ,this._logger=r,this._protocol=s,this.connection=t,this._reconnectPolicy=l,this._handshakeProtocol=new QW,this.connection.onreceive=M=>this._processIncomingData(M),this.connection.onclose=M=>this._connectionClosed(M),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Un.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:wr.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==Un.Disconnected&&this._connectionState!==Un.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Un.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Un.Connecting,this._logger.log(Xt.Debug,"Starting HubConnection.");try{await this._startInternal(),Zn.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Un.Connected,this._connectionStarted=!0,this._logger.log(Xt.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=Un.Disconnected,this._logger.log(Xt.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const t=new Promise((r,s)=>{this._handshakeResolver=r,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{let r=this._protocol.version;this.connection.features.reconnect||(r=1);const s={protocol:this._protocol.name,version:r};if(this._logger.log(Xt.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(s)),this._logger.log(Xt.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await t,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new tZ(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(r){throw this._logger.log(Xt.Debug,`Hub handshake failed with error '${r}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(r),r}}async stop(){const t=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await t}catch{}}_stopInternal(t){if(this._connectionState===Un.Disconnected)return this._logger.log(Xt.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Un.Disconnecting)return this._logger.log(Xt.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const r=this._connectionState;return this._connectionState=Un.Disconnecting,this._logger.log(Xt.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Xt.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(r===Un.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new Nl("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(t,...r){const[s,l]=this._replaceStreamingParams(r),d=this._createStreamInvocation(t,r,l);let y;const n=new eZ;return n.cancelCallback=()=>{const M=this._createCancelInvocation(d.invocationId);return delete this._callbacks[d.invocationId],y.then(()=>this._sendWithProtocol(M))},this._callbacks[d.invocationId]=(M,P)=>{if(P){n.error(P);return}else M&&(M.type===wr.Completion?M.error?n.error(new Error(M.error)):n.complete():n.next(M.item))},y=this._sendWithProtocol(d).catch(M=>{n.error(M),delete this._callbacks[d.invocationId]}),this._launchStreams(s,y),n}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._messageBuffer?this._messageBuffer._send(t):this._sendMessage(this._protocol.writeMessage(t))}send(t,...r){const[s,l]=this._replaceStreamingParams(r),d=this._sendWithProtocol(this._createInvocation(t,r,!0,l));return this._launchStreams(s,d),d}invoke(t,...r){const[s,l]=this._replaceStreamingParams(r),d=this._createInvocation(t,r,!1,l);return new Promise((n,M)=>{this._callbacks[d.invocationId]=(L,V)=>{if(V){M(V);return}else L&&(L.type===wr.Completion?L.error?M(new Error(L.error)):n(L.result):M(new Error(`Unexpected message type: ${L.type}`)))};const P=this._sendWithProtocol(d).catch(L=>{M(L),delete this._callbacks[d.invocationId]});this._launchStreams(s,P)})}on(t,r){!t||!r||(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),this._methods[t].indexOf(r)===-1&&this._methods[t].push(r))}off(t,r){if(!t)return;t=t.toLowerCase();const s=this._methods[t];if(s)if(r){const l=s.indexOf(r);l!==-1&&(s.splice(l,1),s.length===0&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){const r=this._protocol.parseMessages(t,this._logger);for(const s of r)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(s)))switch(s.type){case wr.Invocation:this._invokeClientMethod(s).catch(l=>{this._logger.log(Xt.Error,`Invoke client method threw error: ${Vx(l)}`)});break;case wr.StreamItem:case wr.Completion:{const l=this._callbacks[s.invocationId];if(l){s.type===wr.Completion&&delete this._callbacks[s.invocationId];try{l(s)}catch(d){this._logger.log(Xt.Error,`Stream callback threw error: ${Vx(d)}`)}}break}case wr.Ping:break;case wr.Close:{this._logger.log(Xt.Information,"Close message received from server.");const l=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(l):this._stopPromise=this._stopInternal(l);break}case wr.Ack:this._messageBuffer&&this._messageBuffer._ack(s);break;case wr.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(s);break;default:this._logger.log(Xt.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let r,s;try{[s,r]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(l){const d="Error parsing handshake response: "+l;this._logger.log(Xt.Error,d);const y=new Error(d);throw this._handshakeRejecter(y),y}if(r.error){const l="Server returned handshake error: "+r.error;this._logger.log(Xt.Error,l);const d=new Error(l);throw this._handshakeRejecter(d),d}else this._logger.log(Xt.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let t=this._nextKeepAlive-new Date().getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Un.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(t){const r=t.target.toLowerCase(),s=this._methods[r];if(!s){this._logger.log(Xt.Warning,`No client method with the name '${r}' found.`),t.invocationId&&(this._logger.log(Xt.Warning,`No result given for '${r}' method and invocation ID '${t.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)));return}const l=s.slice(),d=!!t.invocationId;let y,n,M;for(const P of l)try{const L=y;y=await P.apply(this,t.arguments),d&&y&&L&&(this._logger.log(Xt.Error,`Multiple results provided for '${r}'. Sending error to server.`),M=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),n=void 0}catch(L){n=L,this._logger.log(Xt.Error,`A callback for the method '${r}' threw error '${L}'.`)}M?await this._sendWithProtocol(M):d?(n?M=this._createCompletionMessage(t.invocationId,`${n}`,null):y!==void 0?M=this._createCompletionMessage(t.invocationId,null,y):(this._logger.log(Xt.Warning,`No result given for '${r}' method and invocation ID '${t.invocationId}'.`),M=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(M)):y&&this._logger.log(Xt.Error,`Result given for '${r}' method but server is not expecting a result.`)}_connectionClosed(t){this._logger.log(Xt.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new Nl("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Un.Disconnecting?this._completeClose(t):this._connectionState===Un.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===Un.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=Un.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(t??new Error("Connection closed.")),this._messageBuffer=void 0),Zn.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(r=>r.apply(this,[t]))}catch(r){this._logger.log(Xt.Error,`An onclose callback called with error '${t}' threw error '${r}'.`)}}}async _reconnect(t){const r=Date.now();let s=0,l=t!==void 0?t:new Error("Attempting to reconnect due to a unknown error."),d=this._getNextRetryDelay(s++,0,l);if(d===null){this._logger.log(Xt.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(t);return}if(this._connectionState=Un.Reconnecting,t?this._logger.log(Xt.Information,`Connection reconnecting because of error '${t}'.`):this._logger.log(Xt.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(y=>y.apply(this,[t]))}catch(y){this._logger.log(Xt.Error,`An onreconnecting callback called with error '${t}' threw error '${y}'.`)}if(this._connectionState!==Un.Reconnecting){this._logger.log(Xt.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;d!==null;){if(this._logger.log(Xt.Information,`Reconnect attempt number ${s} will start in ${d} ms.`),await new Promise(y=>{this._reconnectDelayHandle=setTimeout(y,d)}),this._reconnectDelayHandle=void 0,this._connectionState!==Un.Reconnecting){this._logger.log(Xt.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Un.Connected,this._logger.log(Xt.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(y=>y.apply(this,[this.connection.connectionId]))}catch(y){this._logger.log(Xt.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${y}'.`)}return}catch(y){if(this._logger.log(Xt.Information,`Reconnect attempt failed because of error '${y}'.`),this._connectionState!==Un.Reconnecting){this._logger.log(Xt.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===Un.Disconnecting&&this._completeClose();return}l=y instanceof Error?y:new Error(y.toString()),d=this._getNextRetryDelay(s++,Date.now()-r,l)}}this._logger.log(Xt.Information,`Reconnect retries have been exhausted after ${Date.now()-r} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(t,r,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:r,previousRetryCount:t,retryReason:s})}catch(l){return this._logger.log(Xt.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${r}) threw error '${l}'.`),null}}_cancelCallbacksWithError(t){const r=this._callbacks;this._callbacks={},Object.keys(r).forEach(s=>{const l=r[s];try{l(null,t)}catch(d){this._logger.log(Xt.Error,`Stream 'error' callback called with '${t}' threw error: ${Vx(d)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,r,s,l){if(s)return l.length!==0?{arguments:r,streamIds:l,target:t,type:wr.Invocation}:{arguments:r,target:t,type:wr.Invocation};{const d=this._invocationId;return this._invocationId++,l.length!==0?{arguments:r,invocationId:d.toString(),streamIds:l,target:t,type:wr.Invocation}:{arguments:r,invocationId:d.toString(),target:t,type:wr.Invocation}}}_launchStreams(t,r){if(t.length!==0){r||(r=Promise.resolve());for(const s in t)t[s].subscribe({complete:()=>{r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:l=>{let d;l instanceof Error?d=l.message:l&&l.toString?d=l.toString():d="Unknown error",r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,d)))},next:l=>{r=r.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,l)))}})}}_replaceStreamingParams(t){const r=[],s=[];for(let l=0;l<t.length;l++){const d=t[l];if(this._isObservable(d)){const y=this._invocationId;this._invocationId++,r[y]=d,s.push(y.toString()),t.splice(l,1)}}return[r,s]}_isObservable(t){return t&&t.subscribe&&typeof t.subscribe=="function"}_createStreamInvocation(t,r,s){const l=this._invocationId;return this._invocationId++,s.length!==0?{arguments:r,invocationId:l.toString(),streamIds:s,target:t,type:wr.StreamInvocation}:{arguments:r,invocationId:l.toString(),target:t,type:wr.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:wr.CancelInvocation}}_createStreamItemMessage(t,r){return{invocationId:t,item:r,type:wr.StreamItem}}_createCompletionMessage(t,r,s){return r?{error:r,invocationId:t,type:wr.Completion}:{invocationId:t,result:s,type:wr.Completion}}_createCloseMessage(){return{type:wr.Close}}}const sZ=[0,2e3,1e4,3e4,null];class AS{constructor(t){this._retryDelays=t!==void 0?[...t,null]:sZ}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}}class Ad{}Ad.Authorization="Authorization";Ad.Cookie="Cookie";class aZ extends rv{constructor(t,r){super(),this._innerClient=t,this._accessTokenFactory=r}async send(t){let r=!0;this._accessTokenFactory&&(!this._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(r=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(t);const s=await this._innerClient.send(t);return r&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(t),await this._innerClient.send(t)):s}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[Ad.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[Ad.Authorization]&&delete t.headers[Ad.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}}var To;(function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"})(To||(To={}));var _s;(function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"})(_s||(_s={}));let lZ=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class IS{get pollAborted(){return this._pollAbort.aborted}constructor(t,r,s){this._httpClient=t,this._logger=r,this._pollAbort=new lZ,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}async connect(t,r){if(_o.isRequired(t,"url"),_o.isRequired(r,"transferFormat"),_o.isIn(r,_s,"transferFormat"),this._url=t,this._logger.log(Xt.Trace,"(LongPolling transport) Connecting."),r===_s.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,l]=k1(),d={[s]:l,...this._options.headers},y={abortSignal:this._pollAbort.signal,headers:d,timeout:1e5,withCredentials:this._options.withCredentials};r===_s.Binary&&(y.responseType="arraybuffer");const n=`${t}&_=${Date.now()}`;this._logger.log(Xt.Trace,`(LongPolling transport) polling: ${n}.`);const M=await this._httpClient.get(n,y);M.statusCode!==200?(this._logger.log(Xt.Error,`(LongPolling transport) Unexpected response code: ${M.statusCode}.`),this._closeError=new Cd(M.statusText||"",M.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,y)}async _poll(t,r){try{for(;this._running;)try{const s=`${t}&_=${Date.now()}`;this._logger.log(Xt.Trace,`(LongPolling transport) polling: ${s}.`);const l=await this._httpClient.get(s,r);l.statusCode===204?(this._logger.log(Xt.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):l.statusCode!==200?(this._logger.log(Xt.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new Cd(l.statusText||"",l.statusCode),this._running=!1):l.content?(this._logger.log(Xt.Trace,`(LongPolling transport) data received. ${Tm(l.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(l.content)):this._logger.log(Xt.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof b6?this._logger.log(Xt.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(Xt.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(Xt.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(t){return this._running?KC(this._logger,"LongPolling",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Xt.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Xt.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const t={},[r,s]=k1();t[r]=s;const l={headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let d;try{await this._httpClient.delete(this._url,l)}catch(y){d=y}d?d instanceof Cd&&(d.statusCode===404?this._logger.log(Xt.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Xt.Trace,`(LongPolling transport) Error sending a DELETE request: ${d}`)):this._logger.log(Xt.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Xt.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(Xt.Trace,t),this.onclose(this._closeError)}}}class cZ{constructor(t,r,s,l){this._httpClient=t,this._accessToken=r,this._logger=s,this._options=l,this.onreceive=null,this.onclose=null}async connect(t,r){return _o.isRequired(t,"url"),_o.isRequired(r,"transferFormat"),_o.isIn(r,_s,"transferFormat"),this._logger.log(Xt.Trace,"(SSE transport) Connecting."),this._url=t,this._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,l)=>{let d=!1;if(r!==_s.Text){l(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let y;if(Zn.isBrowser||Zn.isWebWorker)y=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{const n=this._httpClient.getCookieString(t),M={};M.Cookie=n;const[P,L]=k1();M[P]=L,y=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:{...M,...this._options.headers}})}try{y.onmessage=n=>{if(this.onreceive)try{this._logger.log(Xt.Trace,`(SSE transport) data received. ${Tm(n.data,this._options.logMessageContent)}.`),this.onreceive(n.data)}catch(M){this._close(M);return}},y.onerror=n=>{d?this._close():l(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},y.onopen=()=>{this._logger.log(Xt.Information,`SSE connected to ${this._url}`),this._eventSource=y,d=!0,s()}}catch(n){l(n);return}})}async send(t){return this._eventSource?KC(this._logger,"SSE",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}class uZ{constructor(t,r,s,l,d,y){this._logger=s,this._accessTokenFactory=r,this._logMessageContent=l,this._webSocketConstructor=d,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=y}async connect(t,r){_o.isRequired(t,"url"),_o.isRequired(r,"transferFormat"),_o.isIn(r,_s,"transferFormat"),this._logger.log(Xt.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((l,d)=>{t=t.replace(/^http/,"ws");let y;const n=this._httpClient.getCookieString(t);let M=!1;if(Zn.isNode||Zn.isReactNative){const P={},[L,V]=k1();P[L]=V,s&&(P[Ad.Authorization]=`Bearer ${s}`),n&&(P[Ad.Cookie]=n),y=new this._webSocketConstructor(t,void 0,{headers:{...P,...this._headers}})}else s&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);y||(y=new this._webSocketConstructor(t)),r===_s.Binary&&(y.binaryType="arraybuffer"),y.onopen=P=>{this._logger.log(Xt.Information,`WebSocket connected to ${t}.`),this._webSocket=y,M=!0,l()},y.onerror=P=>{let L=null;typeof ErrorEvent<"u"&&P instanceof ErrorEvent?L=P.error:L="There was an error with the transport",this._logger.log(Xt.Information,`(WebSockets transport) ${L}.`)},y.onmessage=P=>{if(this._logger.log(Xt.Trace,`(WebSockets transport) data received. ${Tm(P.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(P.data)}catch(L){this._close(L);return}},y.onclose=P=>{if(M)this._close(P);else{let L=null;typeof ErrorEvent<"u"&&P instanceof ErrorEvent?L=P.error:L="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",d(new Error(L))}}})}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Xt.Trace,`(WebSockets transport) sending data. ${Tm(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Xt.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(t)&&(t.wasClean===!1||t.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)):t instanceof Error?this.onclose(t):this.onclose())}_isCloseEvent(t){return t&&typeof t.wasClean=="boolean"&&typeof t.code=="number"}}const zS=100;class hZ{constructor(t,r={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,_o.isRequired(t,"url"),this._logger=VW(r.logger),this.baseUrl=this._resolveUrl(t),r=r||{},r.logMessageContent=r.logMessageContent===void 0?!1:r.logMessageContent,typeof r.withCredentials=="boolean"||r.withCredentials===void 0)r.withCredentials=r.withCredentials===void 0?!0:r.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");r.timeout=r.timeout===void 0?100*1e3:r.timeout;let s=null,l=null;if(Zn.isNode&&typeof require<"u"){const d=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=d("ws"),l=d("eventsource")}!Zn.isNode&&typeof WebSocket<"u"&&!r.WebSocket?r.WebSocket=WebSocket:Zn.isNode&&!r.WebSocket&&s&&(r.WebSocket=s),!Zn.isNode&&typeof EventSource<"u"&&!r.EventSource?r.EventSource=EventSource:Zn.isNode&&!r.EventSource&&typeof l<"u"&&(r.EventSource=l),this._httpClient=new aZ(r.httpClient||new KW(this._logger),r.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=r,this.onreceive=null,this.onclose=null}async start(t){if(t=t||_s.Binary,_o.isIn(t,_s,"transferFormat"),this._logger.log(Xt.Debug,`Starting connection with transfer format '${_s[t]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),await this._startInternalPromise,this._connectionState==="Disconnecting"){const r="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Xt.Error,r),await this._stopPromise,Promise.reject(new Nl(r))}else if(this._connectionState!=="Connected"){const r="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Xt.Error,r),Promise.reject(new Nl(r))}this._connectionStarted=!0}send(t){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new S6(this.transport)),this._sendQueue.send(t))}async stop(t){if(this._connectionState==="Disconnected")return this._logger.log(Xt.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Xt.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(r=>{this._stopPromiseResolver=r}),await this._stopInternal(t),await this._stopPromise}async _stopInternal(t){this._stopError=t;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(r){this._logger.log(Xt.Error,`HttpConnection.transport.stop() threw error '${r}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Xt.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(t){let r=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===To.WebSockets)this.transport=this._constructTransport(To.WebSockets),await this._startTransport(r,t);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,l=0;do{if(s=await this._getNegotiationResponse(r),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Nl("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(r=s.url),s.accessToken){const d=s.accessToken;this._accessTokenFactory=()=>d,this._httpClient._accessToken=d,this._httpClient._accessTokenFactory=void 0}l++}while(s.url&&l<zS);if(l===zS&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(r,this._options.transport,s,t)}this.transport instanceof IS&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Xt.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(Xt.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(t){const r={},[s,l]=k1();r[s]=l;const d=this._resolveNegotiateUrl(t);this._logger.log(Xt.Debug,`Sending negotiation request: ${d}.`);try{const y=await this._httpClient.post(d,{content:"",headers:{...r,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(y.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${y.statusCode}'`));const n=JSON.parse(y.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new TS("Client didn't negotiate Stateful Reconnect but the server did.")):n}catch(y){let n="Failed to complete negotiation with the server: "+y;return y instanceof Cd&&y.statusCode===404&&(n=n+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Xt.Error,n),Promise.reject(new TS(n))}}_createConnectUrl(t,r){return r?t+(t.indexOf("?")===-1?"?":"&")+`id=${r}`:t}async _createTransport(t,r,s,l){let d=this._createConnectUrl(t,s.connectionToken);if(this._isITransport(r)){this._logger.log(Xt.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=r,await this._startTransport(d,l),this.connectionId=s.connectionId;return}const y=[],n=s.availableTransports||[];let M=s;for(const P of n){const L=this._resolveTransportOrError(P,r,l,M?.useStatefulReconnect===!0);if(L instanceof Error)y.push(`${P.transport} failed:`),y.push(L);else if(this._isITransport(L)){if(this.transport=L,!M){try{M=await this._getNegotiationResponse(t)}catch(V){return Promise.reject(V)}d=this._createConnectUrl(t,M.connectionToken)}try{await this._startTransport(d,l),this.connectionId=M.connectionId;return}catch(V){if(this._logger.log(Xt.Error,`Failed to start the transport '${P.transport}': ${V}`),M=void 0,y.push(new NW(`${P.transport} failed: ${V}`,To[P.transport])),this._connectionState!=="Connecting"){const X="Failed to select transport before stop() was called.";return this._logger.log(Xt.Debug,X),Promise.reject(new Nl(X))}}}}return y.length>0?Promise.reject(new $W(`Unable to connect to the server with any of the available transports. ${y.join(" ")}`,y)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(t){switch(t){case To.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new uZ(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case To.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new cZ(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case To.LongPolling:return new IS(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,r){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async s=>{let l=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(t,r),await this.features.resend()}catch{l=!0}else{this._stopConnection(s);return}l&&this._stopConnection(s)}:this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(t,r)}_resolveTransportOrError(t,r,s,l){const d=To[t.transport];if(d==null)return this._logger.log(Xt.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(dZ(r,d))if(t.transferFormats.map(n=>_s[n]).indexOf(s)>=0){if(d===To.WebSockets&&!this._options.WebSocket||d===To.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Xt.Debug,`Skipping transport '${To[d]}' because it is not supported in your environment.'`),new BW(`'${To[d]}' is not supported in your environment.`,d);this._logger.log(Xt.Debug,`Selecting transport '${To[d]}'.`);try{return this.features.reconnect=d===To.WebSockets?l:void 0,this._constructTransport(d)}catch(n){return n}}else return this._logger.log(Xt.Debug,`Skipping transport '${To[d]}' because it does not support the requested transfer format '${_s[s]}'.`),new Error(`'${To[d]}' does not support ${_s[s]}.`);else return this._logger.log(Xt.Debug,`Skipping transport '${To[d]}' because it was disabled by the client.`),new FW(`'${To[d]}' is disabled by the client.`,d)}_isITransport(t){return t&&typeof t=="object"&&"connect"in t}_stopConnection(t){if(this._logger.log(Xt.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Xt.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Xt.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),t?this._logger.log(Xt.Error,`Connection disconnected with error '${t}'.`):this._logger.log(Xt.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(r=>{this._logger.log(Xt.Error,`TransportSendQueue.stop() threw error '${r}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(r){this._logger.log(Xt.Error,`HttpConnection.onclose(${t}) threw error '${r}'.`)}}}_resolveUrl(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(!Zn.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const r=window.document.createElement("a");return r.href=t,this._logger.log(Xt.Information,`Normalizing '${t}' to '${r.href}'.`),r.href}_resolveNegotiateUrl(t){const r=new URL(t);r.pathname.endsWith("/")?r.pathname+="negotiate":r.pathname+="/negotiate";const s=new URLSearchParams(r.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this._negotiateVersion.toString()),s.has("useStatefulReconnect")?s.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&s.append("useStatefulReconnect","true"),r.search=s.toString(),r.toString()}}function dZ(e,t){return!e||(t&e)!==0}class S6{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new K_,this._transportResult=new K_,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new K_),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new K_;const t=this._transportResult;this._transportResult=void 0;const r=typeof this._buffer[0]=="string"?this._buffer.join(""):S6._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(r),t.resolve()}catch(s){t.reject(s)}}}static _concatBuffers(t){const r=t.map(d=>d.byteLength).reduce((d,y)=>d+y),s=new Uint8Array(r);let l=0;for(const d of t)s.set(new Uint8Array(d),l),l+=d.byteLength;return s.buffer}}class K_{constructor(){this.promise=new Promise((t,r)=>[this._resolver,this._rejecter]=[t,r])}resolve(){this._resolver()}reject(t){this._rejecter(t)}}const fZ="json";class pZ{constructor(){this.name=fZ,this.version=2,this.transferFormat=_s.Text}parseMessages(t,r){if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];r===null&&(r=Em.instance);const s=Ta.parse(t),l=[];for(const d of s){const y=JSON.parse(d);if(typeof y.type!="number")throw new Error("Invalid payload.");switch(y.type){case wr.Invocation:this._isInvocationMessage(y);break;case wr.StreamItem:this._isStreamItemMessage(y);break;case wr.Completion:this._isCompletionMessage(y);break;case wr.Ping:break;case wr.Close:break;case wr.Ack:this._isAckMessage(y);break;case wr.Sequence:this._isSequenceMessage(y);break;default:r.log(Xt.Information,"Unknown message type '"+y.type+"' ignored.");continue}l.push(y)}return l}writeMessage(t){return Ta.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),t.invocationId!==void 0&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),t.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_isAckMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(t,r){if(typeof t!="string"||t==="")throw new Error(r)}}const mZ={trace:Xt.Trace,debug:Xt.Debug,info:Xt.Information,information:Xt.Information,warn:Xt.Warning,warning:Xt.Warning,error:Xt.Error,critical:Xt.Critical,none:Xt.None};function gZ(e){const t=mZ[e.toLowerCase()];if(typeof t<"u")return t;throw new Error(`Unknown log level: ${e}`)}class Xoe{configureLogging(t){if(_o.isRequired(t,"logging"),_Z(t))this.logger=t;else if(typeof t=="string"){const r=gZ(t);this.logger=new Q2(r)}else this.logger=new Q2(t);return this}withUrl(t,r){return _o.isRequired(t,"url"),_o.isNotEmpty(t,"url"),this.url=t,typeof r=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...r}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:r},this}withHubProtocol(t){return _o.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new AS(t):this.reconnectPolicy=t:this.reconnectPolicy=new AS,this}withServerTimeout(t){return _o.isRequired(t,"milliseconds"),this._serverTimeoutInMilliseconds=t,this}withKeepAliveInterval(t){return _o.isRequired(t,"milliseconds"),this._keepAliveIntervalInMilliseconds=t,this}withStatefulReconnect(t){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=t?.bufferSize,this}build(){const t=this.httpConnectionOptions||{};if(t.logger===void 0&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const r=new hZ(this.url,t);return w6.create(r,this.logger||Em.instance,this.protocol||new pZ,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function _Z(e){return e.log!==void 0}function yZ(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((r,s)=>{const l=parseFloat(r);l&&(t[s]=l)}),t}const vZ=Bm({name:"touch-swipe",beforeMount(e,{value:t,arg:r,modifiers:s}){if(s.mouse!==!0&&nn.has.touch!==!0)return;const l=s.mouseCapture===!0?"Capture":"",d={handler:t,sensitivity:yZ(r),direction:W2(s),noop:ia,mouseStart(y){Z2(y,d)&&YM(y)&&(Ea(d,"temp",[[document,"mousemove","move",`notPassive${l}`],[document,"mouseup","end","notPassiveCapture"]]),d.start(y,!0))},touchStart(y){if(Z2(y,d)){const n=y.target;Ea(d,"temp",[[n,"touchmove","move","notPassiveCapture"],[n,"touchcancel","end","notPassiveCapture"],[n,"touchend","end","notPassiveCapture"]]),d.start(y)}},start(y,n){nn.is.firefox===!0&&u1(e,!0);const M=Pd(y);d.event={x:M.left,y:M.top,time:Date.now(),mouse:n===!0,dir:!1}},move(y){if(d.event===void 0)return;if(d.event.dir!==!1){Cn(y);return}const n=Date.now()-d.event.time;if(n===0)return;const M=Pd(y),P=M.left-d.event.x,L=Math.abs(P),V=M.top-d.event.y,X=Math.abs(V);if(d.event.mouse!==!0){if(L<d.sensitivity[1]&&X<d.sensitivity[1]){d.end(y);return}}else if(window.getSelection().toString()!==""){d.end(y);return}else if(L<d.sensitivity[2]&&X<d.sensitivity[2])return;const J=L/n,Z=X/n;d.direction.vertical===!0&&L<X&&L<100&&Z>d.sensitivity[0]&&(d.event.dir=V<0?"up":"down"),d.direction.horizontal===!0&&L>X&&X<100&&J>d.sensitivity[0]&&(d.event.dir=P<0?"left":"right"),d.direction.up===!0&&L<X&&V<0&&L<100&&Z>d.sensitivity[0]&&(d.event.dir="up"),d.direction.down===!0&&L<X&&V>0&&L<100&&Z>d.sensitivity[0]&&(d.event.dir="down"),d.direction.left===!0&&L>X&&P<0&&X<100&&J>d.sensitivity[0]&&(d.event.dir="left"),d.direction.right===!0&&L>X&&P>0&&X<100&&J>d.sensitivity[0]&&(d.event.dir="right"),d.event.dir!==!1?(Cn(y),d.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),xm(),d.styleCleanup=ie=>{d.styleCleanup=void 0,document.body.classList.remove("non-selectable");const ae=()=>{document.body.classList.remove("no-pointer-events--children")};ie===!0?setTimeout(ae,50):ae()}),d.handler({evt:y,touch:d.event.mouse!==!0,mouse:d.event.mouse,direction:d.event.dir,duration:n,distance:{x:L,y:X}})):d.end(y)},end(y){d.event!==void 0&&(bc(d,"temp"),nn.is.firefox===!0&&u1(e,!1),d.styleCleanup!==void 0&&d.styleCleanup(!0),y!==void 0&&d.event.dir!==!1&&Cn(y),d.event=void 0)}};if(e.__qtouchswipe=d,s.mouse===!0){const y=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";Ea(d,"main",[[e,"mousedown","mouseStart",`passive${y}`]])}nn.has.touch===!0&&Ea(d,"main",[[e,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const r=e.__qtouchswipe;r!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&r.end(),r.handler=t.value),r.direction=W2(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(bc(t,"main"),bc(t,"temp"),nn.is.firefox===!0&&u1(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function xZ(){let e=Object.create(null);return{getCache:(t,r)=>e[t]===void 0?e[t]=typeof r=="function"?r():r:e[t],setCache(t,r){e[t]=r},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const bZ={name:{required:!0},disable:Boolean},DS={setup(e,{slots:t}){return()=>tt("div",{class:"q-panel scroll",role:"tabpanel"},ln(t.default))}},wZ={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},SZ=["update:modelValue","beforeTransition","transition"];function MZ(){const{props:e,emit:t,proxy:r}=_r(),{getCache:s}=xZ(),{registerTimeout:l}=iu();let d,y;const n=oi(null),M=oi(null);function P(Be){const Ke=e.vertical===!0?"up":"left";We((r.$q.lang.rtl===!0?-1:1)*(Be.direction===Ke?1:-1))}const L=Ve(()=>[[vZ,P,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),V=Ve(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),X=Ve(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),J=Ve(()=>`--q-transition-duration: ${e.transitionDuration}ms`),Z=Ve(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),ie=Ve(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),ae=Ve(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Fi(()=>e.modelValue,(Be,Ke)=>{const xt=he(Be)===!0?Ce(Be):-1;y!==!0&&Ae(xt===-1?0:xt<Ce(Ke)?-1:1),n.value!==xt&&(n.value=xt,t("beforeTransition",Be,Ke),l(()=>{t("transition",Be,Ke)},e.transitionDuration))});function de(){We(1)}function fe(){We(-1)}function le(Be){t("update:modelValue",Be)}function he(Be){return Be!=null&&Be!==""}function Ce(Be){return d.findIndex(Ke=>Ke.props.name===Be&&Ke.props.disable!==""&&Ke.props.disable!==!0)}function Le(){return d.filter(Be=>Be.props.disable!==""&&Be.props.disable!==!0)}function Ae(Be){const Ke=Be!==0&&e.animated===!0&&n.value!==-1?"q-transition--"+(Be===-1?V.value:X.value):null;M.value!==Ke&&(M.value=Ke)}function We(Be,Ke=n.value){let xt=Ke+Be;for(;xt!==-1&&xt<d.length;){const yt=d[xt];if(yt!==void 0&&yt.props.disable!==""&&yt.props.disable!==!0){Ae(Be),y=!0,t("update:modelValue",yt.props.name),setTimeout(()=>{y=!1});return}xt+=Be}e.infinite===!0&&d.length!==0&&Ke!==-1&&Ke!==d.length&&We(Be,Be===-1?d.length:-1)}function Qe(){const Be=Ce(e.modelValue);return n.value!==Be&&(n.value=Be),!0}function ze(){const Be=he(e.modelValue)===!0&&Qe()&&d[n.value];return e.keepAlive===!0?[tt(lk,ie.value,[tt(ae.value===!0?s(Z.value,()=>({...DS,name:Z.value})):DS,{key:Z.value,style:J.value},()=>Be)])]:[tt("div",{class:"q-panel scroll",style:J.value,key:Z.value,role:"tabpanel"},[Be])]}function Ze(){if(d.length!==0)return e.animated===!0?[tt(Ul,{name:M.value},ze)]:ze()}function Ue(Be){return d=OU(ln(Be.default,[])).filter(Ke=>Ke.props!==null&&Ke.props.slot===void 0&&he(Ke.props.name)===!0),d.length}function vt(){return d}return Object.assign(r,{next:de,previous:fe,goTo:le}),{panelIndex:n,panelDirectives:L,updatePanelsList:Ue,updatePanelIndex:Qe,getPanelContent:Ze,getEnabledPanels:Le,getPanels:vt,isValidPanelName:he,keepAliveProps:ie,needsUniqueKeepAliveWrapper:ae,goToPanelByOffset:We,goToPanel:le,nextPanel:de,previousPanel:fe}}const Yoe=lr({name:"QTabPanel",props:bZ,setup(e,{slots:t}){return()=>tt("div",{class:"q-tab-panel",role:"tabpanel"},ln(t.default))}}),Joe=lr({name:"QTabPanels",props:{...wZ,...Fs},emits:SZ,setup(e,{slots:t}){const r=_r(),s=Ns(e,r.proxy.$q),{updatePanelsList:l,getPanelContent:d,panelDirectives:y}=MZ(),n=Ve(()=>"q-tab-panels q-panel-parent"+(s.value===!0?" q-tab-panels--dark q-dark":""));return()=>(l(t),_m("div",{class:n.value},d(),"pan",e.swipeable,()=>y.value))}}),QC={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},eA={...QC,contextMenu:Boolean};function M6({showing:e,avoidEmit:t,configureAnchorEl:r}){const{props:s,proxy:l,emit:d}=_r(),y=oi(null);let n=null;function M(J){return y.value===null?!1:J===void 0||J.touches===void 0||J.touches.length<=1}const P={};r===void 0&&(Object.assign(P,{hide(J){l.hide(J)},toggle(J){l.toggle(J),J.qAnchorHandled=!0},toggleKey(J){tu(J,13)===!0&&P.toggle(J)},contextClick(J){l.hide(J),Sa(J),Ao(()=>{l.show(J),J.qAnchorHandled=!0})},prevent:Sa,mobileTouch(J){if(P.mobileCleanup(J),M(J)!==!0)return;l.hide(J),y.value.classList.add("non-selectable");const Z=J.target;Ea(P,"anchor",[[Z,"touchmove","mobileCleanup","passive"],[Z,"touchend","mobileCleanup","passive"],[Z,"touchcancel","mobileCleanup","passive"],[y.value,"contextmenu","prevent","notPassive"]]),n=setTimeout(()=>{n=null,l.show(J),J.qAnchorHandled=!0},300)},mobileCleanup(J){y.value.classList.remove("non-selectable"),n!==null&&(clearTimeout(n),n=null),e.value===!0&&J!==void 0&&xm()}}),r=function(J=s.contextMenu){if(s.noParentEvent===!0||y.value===null)return;let Z;J===!0?l.$q.platform.is.mobile===!0?Z=[[y.value,"touchstart","mobileTouch","passive"]]:Z=[[y.value,"mousedown","hide","passive"],[y.value,"contextmenu","contextClick","notPassive"]]:Z=[[y.value,"click","toggle","passive"],[y.value,"keyup","toggleKey","passive"]],Ea(P,"anchor",Z)});function L(){bc(P,"anchor")}function V(J){for(y.value=J;y.value.classList.contains("q-anchor--skip");)y.value=y.value.parentNode;r()}function X(){if(s.target===!1||s.target===""||l.$el.parentNode===null)y.value=null;else if(s.target===!0)V(l.$el.parentNode);else{let J=s.target;if(typeof s.target=="string")try{J=document.querySelector(s.target)}catch{J=void 0}J!=null?(y.value=J.$el||J,r()):y.value=null}}return Fi(()=>s.contextMenu,J=>{y.value!==null&&(L(),r(J))}),Fi(()=>s.target,()=>{y.value!==null&&L(),X()}),Fi(()=>s.noParentEvent,J=>{y.value!==null&&(J===!0?L():r())}),ys(()=>{X(),t!==!0&&s.modelValue===!0&&y.value===null&&d("update:modelValue",!1)}),Xn(()=>{n!==null&&clearTimeout(n),L()}),{anchorEl:y,canShow:M,anchorEvents:P}}function tA(e,t){const r=oi(null);let s;function l(n,M){const P=`${M!==void 0?"add":"remove"}EventListener`,L=M!==void 0?M:s;n!==window&&n[P]("scroll",L,go.passive),window[P]("scroll",L,go.passive),s=M}function d(){r.value!==null&&(l(r.value),r.value=null)}const y=Fi(()=>e.noParentEvent,()=>{r.value!==null&&(d(),t())});return Xn(y),{localScrollTarget:r,unconfigureScrollTarget:d,changeScrollEvent:l}}const{notPassiveCapture:ey}=go,Id=[];function ty(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let r=_1.length-1;for(;r>=0;){const s=_1[r].$;if(s.type.name==="QTooltip"){r--;continue}if(s.type.name!=="QDialog")break;if(s.props.seamless!==!0)return;r--}for(let s=Id.length-1;s>=0;s--){const l=Id[s];if((l.anchorEl.value===null||l.anchorEl.value.contains(t)===!1)&&(t===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(t)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function iA(e){Id.push(e),Id.length===1&&(document.addEventListener("mousedown",ty,ey),document.addEventListener("touchstart",ty,ey))}function iy(e){const t=Id.findIndex(r=>r===e);t!==-1&&(Id.splice(t,1),Id.length===0&&(document.removeEventListener("mousedown",ty,ey),document.removeEventListener("touchstart",ty,ey)))}let PS,kS;function ry(e){const t=e.split(" ");return!(t.length!==2||["top","center","bottom"].includes(t[0])!==!0||["left","middle","right","start","end"].includes(t[1])!==!0)}function rA(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const $b={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{$b[`${e}#ltr`]=e,$b[`${e}#rtl`]=e});function ny(e,t){const r=e.split(" ");return{vertical:r[0],horizontal:$b[`${r[1]}#${t===!0?"rtl":"ltr"}`]}}function EZ(e,t){let{top:r,left:s,right:l,bottom:d,width:y,height:n}=e.getBoundingClientRect();return t!==void 0&&(r-=t[1],s-=t[0],d+=t[1],l+=t[0],y+=t[0],n+=t[1]),{top:r,bottom:d,height:n,left:s,right:l,width:y,middle:s+(l-s)/2,center:r+(d-r)/2}}function TZ(e,t,r){let{top:s,left:l}=e.getBoundingClientRect();return s+=t.top,l+=t.left,r!==void 0&&(s+=r[1],l+=r[0]),{top:s,bottom:s+1,height:1,left:l,right:l+1,width:1,middle:l,center:s}}function CZ(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function RS(e,t,r,s){return{top:e[r.vertical]-t[s.vertical],left:e[r.horizontal]-t[s.horizontal]}}function E6(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{E6(e,t+1)},10);return}const{targetEl:r,offset:s,anchorEl:l,anchorOrigin:d,selfOrigin:y,absoluteOffset:n,fit:M,cover:P,maxHeight:L,maxWidth:V}=e;if(nn.is.ios===!0&&window.visualViewport!==void 0){const Le=document.body.style,{offsetLeft:Ae,offsetTop:We}=window.visualViewport;Ae!==PS&&(Le.setProperty("--q-pe-left",Ae+"px"),PS=Ae),We!==kS&&(Le.setProperty("--q-pe-top",We+"px"),kS=We)}const{scrollLeft:X,scrollTop:J}=r,Z=n===void 0?EZ(l,P===!0?[0,0]:s):TZ(l,n,s);Object.assign(r.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:V,maxHeight:L,visibility:"visible"});const{offsetWidth:ie,offsetHeight:ae}=r,{elWidth:de,elHeight:fe}=M===!0||P===!0?{elWidth:Math.max(Z.width,ie),elHeight:P===!0?Math.max(Z.height,ae):ae}:{elWidth:ie,elHeight:ae};let le={maxWidth:V,maxHeight:L};(M===!0||P===!0)&&(le.minWidth=Z.width+"px",P===!0&&(le.minHeight=Z.height+"px")),Object.assign(r.style,le);const he=CZ(de,fe);let Ce=RS(Z,he,d,y);if(n===void 0||s===void 0)qx(Ce,Z,he,d,y);else{const{top:Le,left:Ae}=Ce;qx(Ce,Z,he,d,y);let We=!1;if(Ce.top!==Le){We=!0;const Qe=2*s[1];Z.center=Z.top-=Qe,Z.bottom-=Qe+2}if(Ce.left!==Ae){We=!0;const Qe=2*s[0];Z.middle=Z.left-=Qe,Z.right-=Qe+2}We===!0&&(Ce=RS(Z,he,d,y),qx(Ce,Z,he,d,y))}le={top:Ce.top+"px",left:Ce.left+"px"},Ce.maxHeight!==void 0&&(le.maxHeight=Ce.maxHeight+"px",Z.height>Ce.maxHeight&&(le.minHeight=le.maxHeight)),Ce.maxWidth!==void 0&&(le.maxWidth=Ce.maxWidth+"px",Z.width>Ce.maxWidth&&(le.minWidth=le.maxWidth)),Object.assign(r.style,le),r.scrollTop!==J&&(r.scrollTop=J),r.scrollLeft!==X&&(r.scrollLeft=X)}function qx(e,t,r,s,l){const d=r.bottom,y=r.right,n=x2(),M=window.innerHeight-n,P=document.body.clientWidth;if(e.top<0||e.top+d>M)if(l.vertical==="center")e.top=t[s.vertical]>M/2?Math.max(0,M-d):0,e.maxHeight=Math.min(d,M);else if(t[s.vertical]>M/2){const L=Math.min(M,s.vertical==="center"?t.center:s.vertical===l.vertical?t.bottom:t.top);e.maxHeight=Math.min(d,L),e.top=Math.max(0,L-d)}else e.top=Math.max(0,s.vertical==="center"?t.center:s.vertical===l.vertical?t.top:t.bottom),e.maxHeight=Math.min(d,M-e.top);if(e.left<0||e.left+y>P)if(e.maxWidth=Math.min(y,P),l.horizontal==="middle")e.left=t[s.horizontal]>P/2?Math.max(0,P-y):0;else if(t[s.horizontal]>P/2){const L=Math.min(P,s.horizontal==="middle"?t.middle:s.horizontal===l.horizontal?t.right:t.left);e.maxWidth=Math.min(y,L),e.left=Math.max(0,L-e.maxWidth)}else e.left=Math.max(0,s.horizontal==="middle"?t.middle:s.horizontal===l.horizontal?t.left:t.right),e.maxWidth=Math.min(y,P-e.left)}const nA=lr({name:"QMenu",inheritAttrs:!1,props:{...eA,...Zm,...Fs,...m1,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:ry},self:{type:String,validator:ry},offset:{type:Array,validator:rA},scrollTarget:r6,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Xm,"click","escapeKey"],setup(e,{slots:t,emit:r,attrs:s}){let l=null,d,y,n;const M=_r(),{proxy:P}=M,{$q:L}=P,V=oi(null),X=oi(!1),J=Ve(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),Z=Ns(e,L),{registerTick:ie,removeTick:ae}=p1(),{registerTimeout:de}=iu(),{transitionProps:fe,transitionStyle:le}=e6(e),{localScrollTarget:he,changeScrollEvent:Ce,unconfigureScrollTarget:Le}=tA(e,Nt),{anchorEl:Ae,canShow:We}=M6({showing:X}),{hide:Qe}=Ym({showing:X,canShow:We,handleShow:bi,handleHide:ji,hideOnRouteChange:J,processOnMount:!0}),{showPortal:ze,hidePortal:Ze,renderPortal:Ue}=i6(M,V,cn,"menu"),vt={anchorEl:Ae,innerRef:V,onClickOutside(Di){if(e.persistent!==!0&&X.value===!0)return Qe(Di),(Di.type==="touchstart"||Di.target.classList.contains("q-dialog__backdrop"))&&Cn(Di),!0}},Be=Ve(()=>ny(e.anchor||(e.cover===!0?"center middle":"bottom start"),L.lang.rtl)),Ke=Ve(()=>e.cover===!0?Be.value:ny(e.self||"top start",L.lang.rtl)),xt=Ve(()=>(e.square===!0?" q-menu--square":"")+(Z.value===!0?" q-menu--dark q-dark":"")),yt=Ve(()=>e.autoClose===!0?{onClick:Sr}:{}),Dt=Ve(()=>X.value===!0&&e.persistent!==!0);Fi(Dt,Di=>{Di===!0?(LT(ci),iA(vt)):(V2(ci),iy(vt))});function bt(){Jm(()=>{let Di=V.value;Di&&Di.contains(document.activeElement)!==!0&&(Di=Di.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||Di.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||Di.querySelector("[autofocus], [data-autofocus]")||Di,Di.focus({preventScroll:!0}))})}function bi(Di){if(l=e.noRefocus===!1?document.activeElement:null,BT(Ui),ze(),Nt(),d=void 0,Di!==void 0&&(e.touchPosition||e.contextMenu)){const Te=Pd(Di);if(Te.left!==void 0){const{top:On,left:Bn}=Ae.value.getBoundingClientRect();d={left:Te.left-Bn,top:Te.top-On}}}y===void 0&&(y=Fi(()=>L.screen.width+"|"+L.screen.height+"|"+e.self+"|"+e.anchor+"|"+L.lang.rtl,ur)),e.noFocus!==!0&&document.activeElement.blur(),ie(()=>{ur(),e.noFocus!==!0&&bt()}),de(()=>{L.platform.is.ios===!0&&(n=e.autoClose,V.value.click()),ur(),ze(!0),r("show",Di)},e.transitionDuration)}function ji(Di){ae(),Ze(),Qt(!0),l!==null&&(Di===void 0||Di.qClickOutside!==!0)&&(((Di&&Di.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),de(()=>{Ze(!0),r("hide",Di)},e.transitionDuration)}function Qt(Di){d=void 0,y!==void 0&&(y(),y=void 0),(Di===!0||X.value===!0)&&(Rb(Ui),Le(),iy(vt),V2(ci)),Di!==!0&&(l=null)}function Nt(){(Ae.value!==null||e.scrollTarget!==void 0)&&(he.value=n6(Ae.value,e.scrollTarget),Ce(he.value,ur))}function Sr(Di){n!==!0?(AT(P,Di),r("click",Di)):n=!1}function Ui(Di){Dt.value===!0&&e.noFocus!==!0&&IT(V.value,Di.target)!==!0&&bt()}function ci(Di){r("escapeKey"),Qe(Di)}function ur(){E6({targetEl:V.value,offset:e.offset,anchorEl:Ae.value,anchorOrigin:Be.value,selfOrigin:Ke.value,absoluteOffset:d,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function cn(){return tt(Ul,fe.value,()=>X.value===!0?tt("div",{role:"menu",...s,ref:V,tabindex:-1,class:["q-menu q-position-engine scroll"+xt.value,s.class],style:[s.style,le.value],...yt.value},ln(t.default)):null)}return Xn(Qt),Object.assign(P,{focus:bt,updatePosition:ur}),Ue}}),Koe=lr({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const r=Ve(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>tt("div",{class:r.value,role:"toolbar"},ln(t.default))}});var oA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(At,function(){var r,s,l;function d(n,M){if(!r)r=M;else if(!s)s=M;else{var P="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+s+")(sharedChunk); self.onerror = null;",L={};r(L),l=M(L),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(l.workerUrl=window.URL.createObjectURL(new Blob([P],{type:"text/javascript"})))}}d(["exports"],function(n){function M(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var P,L={},V={};function X(){if(P)return V;P=1,Object.defineProperty(V,"__esModule",{value:!0}),V.setMatrixArrayType=function(g){V.ARRAY_TYPE=i=g},V.toRadian=function(g){return g*h},V.equals=function(g,f){return Math.abs(g-f)<=u*Math.max(1,Math.abs(g),Math.abs(f))},V.RANDOM=V.ARRAY_TYPE=V.EPSILON=void 0;var u=1e-6;V.EPSILON=u;var i=typeof Float32Array<"u"?Float32Array:Array;V.ARRAY_TYPE=i;var a=Math.random;V.RANDOM=a;var h=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var g=0,f=arguments.length;f--;)g+=arguments[f]*arguments[f];return Math.sqrt(g)}),V}var J,Z={};function ie(){if(J)return Z;function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(f)}J=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.create=function(){var f=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},Z.clone=function(f){var _=new i.ARRAY_TYPE(4);return _[0]=f[0],_[1]=f[1],_[2]=f[2],_[3]=f[3],_},Z.copy=function(f,_){return f[0]=_[0],f[1]=_[1],f[2]=_[2],f[3]=_[3],f},Z.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},Z.fromValues=function(f,_,w,C){var z=new i.ARRAY_TYPE(4);return z[0]=f,z[1]=_,z[2]=w,z[3]=C,z},Z.set=function(f,_,w,C,z){return f[0]=_,f[1]=w,f[2]=C,f[3]=z,f},Z.transpose=function(f,_){if(f===_){var w=_[1];f[1]=_[2],f[2]=w}else f[0]=_[0],f[1]=_[2],f[2]=_[1],f[3]=_[3];return f},Z.invert=function(f,_){var w=_[0],C=_[1],z=_[2],x=_[3],T=w*x-z*C;return T?(f[0]=x*(T=1/T),f[1]=-C*T,f[2]=-z*T,f[3]=w*T,f):null},Z.adjoint=function(f,_){var w=_[0];return f[0]=_[3],f[1]=-_[1],f[2]=-_[2],f[3]=w,f},Z.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},Z.multiply=h,Z.rotate=function(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=Math.sin(w),E=Math.cos(w);return f[0]=C*E+x*I,f[1]=z*E+T*I,f[2]=C*-I+x*E,f[3]=z*-I+T*E,f},Z.scale=function(f,_,w){var C=_[1],z=_[2],x=_[3],T=w[0],I=w[1];return f[0]=_[0]*T,f[1]=C*T,f[2]=z*I,f[3]=x*I,f},Z.fromRotation=function(f,_){var w=Math.sin(_),C=Math.cos(_);return f[0]=C,f[1]=w,f[2]=-w,f[3]=C,f},Z.fromScaling=function(f,_){return f[0]=_[0],f[1]=0,f[2]=0,f[3]=_[1],f},Z.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},Z.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3])},Z.LDU=function(f,_,w,C){return f[2]=C[2]/C[0],w[0]=C[0],w[1]=C[1],w[3]=C[3]-f[2]*w[1],[f,_,w]},Z.add=function(f,_,w){return f[0]=_[0]+w[0],f[1]=_[1]+w[1],f[2]=_[2]+w[2],f[3]=_[3]+w[3],f},Z.subtract=g,Z.exactEquals=function(f,_){return f[0]===_[0]&&f[1]===_[1]&&f[2]===_[2]&&f[3]===_[3]},Z.equals=function(f,_){var w=f[0],C=f[1],z=f[2],x=f[3],T=_[0],I=_[1],E=_[2],A=_[3];return Math.abs(w-T)<=i.EPSILON*Math.max(1,Math.abs(w),Math.abs(T))&&Math.abs(C-I)<=i.EPSILON*Math.max(1,Math.abs(C),Math.abs(I))&&Math.abs(z-E)<=i.EPSILON*Math.max(1,Math.abs(z),Math.abs(E))&&Math.abs(x-A)<=i.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))},Z.multiplyScalar=function(f,_,w){return f[0]=_[0]*w,f[1]=_[1]*w,f[2]=_[2]*w,f[3]=_[3]*w,f},Z.multiplyScalarAndAdd=function(f,_,w,C){return f[0]=_[0]+w[0]*C,f[1]=_[1]+w[1]*C,f[2]=_[2]+w[2]*C,f[3]=_[3]+w[3]*C,f},Z.sub=Z.mul=void 0;var i=function(f,_){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var w=a(void 0);if(w&&w.has(f))return w.get(f);var C={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(x!=="default"&&Object.prototype.hasOwnProperty.call(f,x)){var T=z?Object.getOwnPropertyDescriptor(f,x):null;T&&(T.get||T.set)?Object.defineProperty(C,x,T):C[x]=f[x]}return C.default=f,w&&w.set(f,C),C}(X());function a(f){if(typeof WeakMap!="function")return null;var _=new WeakMap,w=new WeakMap;return(a=function(C){return C?w:_})(f)}function h(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=w[0],E=w[1],A=w[2],k=w[3];return f[0]=C*I+x*E,f[1]=z*I+T*E,f[2]=C*A+x*k,f[3]=z*A+T*k,f}function g(f,_,w){return f[0]=_[0]-w[0],f[1]=_[1]-w[1],f[2]=_[2]-w[2],f[3]=_[3]-w[3],f}return Z.mul=h,Z.sub=g,Z}var ae,de={};function fe(){if(ae)return de;function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(f)}ae=1,Object.defineProperty(de,"__esModule",{value:!0}),de.create=function(){var f=new i.ARRAY_TYPE(6);return i.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},de.clone=function(f){var _=new i.ARRAY_TYPE(6);return _[0]=f[0],_[1]=f[1],_[2]=f[2],_[3]=f[3],_[4]=f[4],_[5]=f[5],_},de.copy=function(f,_){return f[0]=_[0],f[1]=_[1],f[2]=_[2],f[3]=_[3],f[4]=_[4],f[5]=_[5],f},de.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},de.fromValues=function(f,_,w,C,z,x){var T=new i.ARRAY_TYPE(6);return T[0]=f,T[1]=_,T[2]=w,T[3]=C,T[4]=z,T[5]=x,T},de.set=function(f,_,w,C,z,x,T){return f[0]=_,f[1]=w,f[2]=C,f[3]=z,f[4]=x,f[5]=T,f},de.invert=function(f,_){var w=_[0],C=_[1],z=_[2],x=_[3],T=_[4],I=_[5],E=w*x-C*z;return E?(f[0]=x*(E=1/E),f[1]=-C*E,f[2]=-z*E,f[3]=w*E,f[4]=(z*I-x*T)*E,f[5]=(C*T-w*I)*E,f):null},de.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},de.multiply=h,de.rotate=function(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=_[4],E=_[5],A=Math.sin(w),k=Math.cos(w);return f[0]=C*k+x*A,f[1]=z*k+T*A,f[2]=C*-A+x*k,f[3]=z*-A+T*k,f[4]=I,f[5]=E,f},de.scale=function(f,_,w){var C=_[1],z=_[2],x=_[3],T=_[4],I=_[5],E=w[0],A=w[1];return f[0]=_[0]*E,f[1]=C*E,f[2]=z*A,f[3]=x*A,f[4]=T,f[5]=I,f},de.translate=function(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=_[4],E=_[5],A=w[0],k=w[1];return f[0]=C,f[1]=z,f[2]=x,f[3]=T,f[4]=C*A+x*k+I,f[5]=z*A+T*k+E,f},de.fromRotation=function(f,_){var w=Math.sin(_),C=Math.cos(_);return f[0]=C,f[1]=w,f[2]=-w,f[3]=C,f[4]=0,f[5]=0,f},de.fromScaling=function(f,_){return f[0]=_[0],f[1]=0,f[2]=0,f[3]=_[1],f[4]=0,f[5]=0,f},de.fromTranslation=function(f,_){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=_[0],f[5]=_[1],f},de.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},de.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],1)},de.add=function(f,_,w){return f[0]=_[0]+w[0],f[1]=_[1]+w[1],f[2]=_[2]+w[2],f[3]=_[3]+w[3],f[4]=_[4]+w[4],f[5]=_[5]+w[5],f},de.subtract=g,de.multiplyScalar=function(f,_,w){return f[0]=_[0]*w,f[1]=_[1]*w,f[2]=_[2]*w,f[3]=_[3]*w,f[4]=_[4]*w,f[5]=_[5]*w,f},de.multiplyScalarAndAdd=function(f,_,w,C){return f[0]=_[0]+w[0]*C,f[1]=_[1]+w[1]*C,f[2]=_[2]+w[2]*C,f[3]=_[3]+w[3]*C,f[4]=_[4]+w[4]*C,f[5]=_[5]+w[5]*C,f},de.exactEquals=function(f,_){return f[0]===_[0]&&f[1]===_[1]&&f[2]===_[2]&&f[3]===_[3]&&f[4]===_[4]&&f[5]===_[5]},de.equals=function(f,_){var w=f[0],C=f[1],z=f[2],x=f[3],T=f[4],I=f[5],E=_[0],A=_[1],k=_[2],B=_[3],$=_[4],H=_[5];return Math.abs(w-E)<=i.EPSILON*Math.max(1,Math.abs(w),Math.abs(E))&&Math.abs(C-A)<=i.EPSILON*Math.max(1,Math.abs(C),Math.abs(A))&&Math.abs(z-k)<=i.EPSILON*Math.max(1,Math.abs(z),Math.abs(k))&&Math.abs(x-B)<=i.EPSILON*Math.max(1,Math.abs(x),Math.abs(B))&&Math.abs(T-$)<=i.EPSILON*Math.max(1,Math.abs(T),Math.abs($))&&Math.abs(I-H)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(H))},de.sub=de.mul=void 0;var i=function(f,_){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var w=a(void 0);if(w&&w.has(f))return w.get(f);var C={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(x!=="default"&&Object.prototype.hasOwnProperty.call(f,x)){var T=z?Object.getOwnPropertyDescriptor(f,x):null;T&&(T.get||T.set)?Object.defineProperty(C,x,T):C[x]=f[x]}return C.default=f,w&&w.set(f,C),C}(X());function a(f){if(typeof WeakMap!="function")return null;var _=new WeakMap,w=new WeakMap;return(a=function(C){return C?w:_})(f)}function h(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=_[4],E=_[5],A=w[0],k=w[1],B=w[2],$=w[3],H=w[4],G=w[5];return f[0]=C*A+x*k,f[1]=z*A+T*k,f[2]=C*B+x*$,f[3]=z*B+T*$,f[4]=C*H+x*G+I,f[5]=z*H+T*G+E,f}function g(f,_,w){return f[0]=_[0]-w[0],f[1]=_[1]-w[1],f[2]=_[2]-w[2],f[3]=_[3]-w[3],f[4]=_[4]-w[4],f[5]=_[5]-w[5],f}return de.mul=h,de.sub=g,de}var le,he={};function Ce(){if(le)return he;function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(f)}le=1,Object.defineProperty(he,"__esModule",{value:!0}),he.create=function(){var f=new i.ARRAY_TYPE(9);return i.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},he.fromMat4=function(f,_){return f[0]=_[0],f[1]=_[1],f[2]=_[2],f[3]=_[4],f[4]=_[5],f[5]=_[6],f[6]=_[8],f[7]=_[9],f[8]=_[10],f},he.clone=function(f){var _=new i.ARRAY_TYPE(9);return _[0]=f[0],_[1]=f[1],_[2]=f[2],_[3]=f[3],_[4]=f[4],_[5]=f[5],_[6]=f[6],_[7]=f[7],_[8]=f[8],_},he.copy=function(f,_){return f[0]=_[0],f[1]=_[1],f[2]=_[2],f[3]=_[3],f[4]=_[4],f[5]=_[5],f[6]=_[6],f[7]=_[7],f[8]=_[8],f},he.fromValues=function(f,_,w,C,z,x,T,I,E){var A=new i.ARRAY_TYPE(9);return A[0]=f,A[1]=_,A[2]=w,A[3]=C,A[4]=z,A[5]=x,A[6]=T,A[7]=I,A[8]=E,A},he.set=function(f,_,w,C,z,x,T,I,E,A){return f[0]=_,f[1]=w,f[2]=C,f[3]=z,f[4]=x,f[5]=T,f[6]=I,f[7]=E,f[8]=A,f},he.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},he.transpose=function(f,_){if(f===_){var w=_[1],C=_[2],z=_[5];f[1]=_[3],f[2]=_[6],f[3]=w,f[5]=_[7],f[6]=C,f[7]=z}else f[0]=_[0],f[1]=_[3],f[2]=_[6],f[3]=_[1],f[4]=_[4],f[5]=_[7],f[6]=_[2],f[7]=_[5],f[8]=_[8];return f},he.invert=function(f,_){var w=_[0],C=_[1],z=_[2],x=_[3],T=_[4],I=_[5],E=_[6],A=_[7],k=_[8],B=k*T-I*A,$=-k*x+I*E,H=A*x-T*E,G=w*B+C*$+z*H;return G?(f[0]=B*(G=1/G),f[1]=(-k*C+z*A)*G,f[2]=(I*C-z*T)*G,f[3]=$*G,f[4]=(k*w-z*E)*G,f[5]=(-I*w+z*x)*G,f[6]=H*G,f[7]=(-A*w+C*E)*G,f[8]=(T*w-C*x)*G,f):null},he.adjoint=function(f,_){var w=_[0],C=_[1],z=_[2],x=_[3],T=_[4],I=_[5],E=_[6],A=_[7],k=_[8];return f[0]=T*k-I*A,f[1]=z*A-C*k,f[2]=C*I-z*T,f[3]=I*E-x*k,f[4]=w*k-z*E,f[5]=z*x-w*I,f[6]=x*A-T*E,f[7]=C*E-w*A,f[8]=w*T-C*x,f},he.determinant=function(f){var _=f[3],w=f[4],C=f[5],z=f[6],x=f[7],T=f[8];return f[0]*(T*w-C*x)+f[1]*(-T*_+C*z)+f[2]*(x*_-w*z)},he.multiply=h,he.translate=function(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=_[4],E=_[5],A=_[6],k=_[7],B=_[8],$=w[0],H=w[1];return f[0]=C,f[1]=z,f[2]=x,f[3]=T,f[4]=I,f[5]=E,f[6]=$*C+H*T+A,f[7]=$*z+H*I+k,f[8]=$*x+H*E+B,f},he.rotate=function(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=_[4],E=_[5],A=_[6],k=_[7],B=_[8],$=Math.sin(w),H=Math.cos(w);return f[0]=H*C+$*T,f[1]=H*z+$*I,f[2]=H*x+$*E,f[3]=H*T-$*C,f[4]=H*I-$*z,f[5]=H*E-$*x,f[6]=A,f[7]=k,f[8]=B,f},he.scale=function(f,_,w){var C=w[0],z=w[1];return f[0]=C*_[0],f[1]=C*_[1],f[2]=C*_[2],f[3]=z*_[3],f[4]=z*_[4],f[5]=z*_[5],f[6]=_[6],f[7]=_[7],f[8]=_[8],f},he.fromTranslation=function(f,_){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=_[0],f[7]=_[1],f[8]=1,f},he.fromRotation=function(f,_){var w=Math.sin(_),C=Math.cos(_);return f[0]=C,f[1]=w,f[2]=0,f[3]=-w,f[4]=C,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},he.fromScaling=function(f,_){return f[0]=_[0],f[1]=0,f[2]=0,f[3]=0,f[4]=_[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},he.fromMat2d=function(f,_){return f[0]=_[0],f[1]=_[1],f[2]=0,f[3]=_[2],f[4]=_[3],f[5]=0,f[6]=_[4],f[7]=_[5],f[8]=1,f},he.fromQuat=function(f,_){var w=_[0],C=_[1],z=_[2],x=_[3],T=w+w,I=C+C,E=z+z,A=w*T,k=C*T,B=C*I,$=z*T,H=z*I,G=z*E,U=x*T,Y=x*I,Q=x*E;return f[0]=1-B-G,f[3]=k-Q,f[6]=$+Y,f[1]=k+Q,f[4]=1-A-G,f[7]=H-U,f[2]=$-Y,f[5]=H+U,f[8]=1-A-B,f},he.normalFromMat4=function(f,_){var w=_[0],C=_[1],z=_[2],x=_[3],T=_[4],I=_[5],E=_[6],A=_[7],k=_[8],B=_[9],$=_[10],H=_[11],G=_[12],U=_[13],Y=_[14],Q=_[15],se=w*I-C*T,xe=w*E-z*T,pe=w*A-x*T,ge=C*E-z*I,Pe=C*A-x*I,me=z*A-x*E,Ie=k*U-B*G,Fe=k*Y-$*G,Ne=k*Q-H*G,He=B*Y-$*U,et=B*Q-H*U,rt=$*Q-H*Y,Ye=se*rt-xe*et+pe*He+ge*Ne-Pe*Fe+me*Ie;return Ye?(f[0]=(I*rt-E*et+A*He)*(Ye=1/Ye),f[1]=(E*Ne-T*rt-A*Fe)*Ye,f[2]=(T*et-I*Ne+A*Ie)*Ye,f[3]=(z*et-C*rt-x*He)*Ye,f[4]=(w*rt-z*Ne+x*Fe)*Ye,f[5]=(C*Ne-w*et-x*Ie)*Ye,f[6]=(U*me-Y*Pe+Q*ge)*Ye,f[7]=(Y*pe-G*me-Q*xe)*Ye,f[8]=(G*Pe-U*pe+Q*se)*Ye,f):null},he.projection=function(f,_,w){return f[0]=2/_,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/w,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},he.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},he.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},he.add=function(f,_,w){return f[0]=_[0]+w[0],f[1]=_[1]+w[1],f[2]=_[2]+w[2],f[3]=_[3]+w[3],f[4]=_[4]+w[4],f[5]=_[5]+w[5],f[6]=_[6]+w[6],f[7]=_[7]+w[7],f[8]=_[8]+w[8],f},he.subtract=g,he.multiplyScalar=function(f,_,w){return f[0]=_[0]*w,f[1]=_[1]*w,f[2]=_[2]*w,f[3]=_[3]*w,f[4]=_[4]*w,f[5]=_[5]*w,f[6]=_[6]*w,f[7]=_[7]*w,f[8]=_[8]*w,f},he.multiplyScalarAndAdd=function(f,_,w,C){return f[0]=_[0]+w[0]*C,f[1]=_[1]+w[1]*C,f[2]=_[2]+w[2]*C,f[3]=_[3]+w[3]*C,f[4]=_[4]+w[4]*C,f[5]=_[5]+w[5]*C,f[6]=_[6]+w[6]*C,f[7]=_[7]+w[7]*C,f[8]=_[8]+w[8]*C,f},he.exactEquals=function(f,_){return f[0]===_[0]&&f[1]===_[1]&&f[2]===_[2]&&f[3]===_[3]&&f[4]===_[4]&&f[5]===_[5]&&f[6]===_[6]&&f[7]===_[7]&&f[8]===_[8]},he.equals=function(f,_){var w=f[0],C=f[1],z=f[2],x=f[3],T=f[4],I=f[5],E=f[6],A=f[7],k=f[8],B=_[0],$=_[1],H=_[2],G=_[3],U=_[4],Y=_[5],Q=_[6],se=_[7],xe=_[8];return Math.abs(w-B)<=i.EPSILON*Math.max(1,Math.abs(w),Math.abs(B))&&Math.abs(C-$)<=i.EPSILON*Math.max(1,Math.abs(C),Math.abs($))&&Math.abs(z-H)<=i.EPSILON*Math.max(1,Math.abs(z),Math.abs(H))&&Math.abs(x-G)<=i.EPSILON*Math.max(1,Math.abs(x),Math.abs(G))&&Math.abs(T-U)<=i.EPSILON*Math.max(1,Math.abs(T),Math.abs(U))&&Math.abs(I-Y)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(Y))&&Math.abs(E-Q)<=i.EPSILON*Math.max(1,Math.abs(E),Math.abs(Q))&&Math.abs(A-se)<=i.EPSILON*Math.max(1,Math.abs(A),Math.abs(se))&&Math.abs(k-xe)<=i.EPSILON*Math.max(1,Math.abs(k),Math.abs(xe))},he.sub=he.mul=void 0;var i=function(f,_){if(f&&f.__esModule)return f;if(f===null||u(f)!=="object"&&typeof f!="function")return{default:f};var w=a(void 0);if(w&&w.has(f))return w.get(f);var C={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in f)if(x!=="default"&&Object.prototype.hasOwnProperty.call(f,x)){var T=z?Object.getOwnPropertyDescriptor(f,x):null;T&&(T.get||T.set)?Object.defineProperty(C,x,T):C[x]=f[x]}return C.default=f,w&&w.set(f,C),C}(X());function a(f){if(typeof WeakMap!="function")return null;var _=new WeakMap,w=new WeakMap;return(a=function(C){return C?w:_})(f)}function h(f,_,w){var C=_[0],z=_[1],x=_[2],T=_[3],I=_[4],E=_[5],A=_[6],k=_[7],B=_[8],$=w[0],H=w[1],G=w[2],U=w[3],Y=w[4],Q=w[5],se=w[6],xe=w[7],pe=w[8];return f[0]=$*C+H*T+G*A,f[1]=$*z+H*I+G*k,f[2]=$*x+H*E+G*B,f[3]=U*C+Y*T+Q*A,f[4]=U*z+Y*I+Q*k,f[5]=U*x+Y*E+Q*B,f[6]=se*C+xe*T+pe*A,f[7]=se*z+xe*I+pe*k,f[8]=se*x+xe*E+pe*B,f}function g(f,_,w){return f[0]=_[0]-w[0],f[1]=_[1]-w[1],f[2]=_[2]-w[2],f[3]=_[3]-w[3],f[4]=_[4]-w[4],f[5]=_[5]-w[5],f[6]=_[6]-w[6],f[7]=_[7]-w[7],f[8]=_[8]-w[8],f}return he.mul=h,he.sub=g,he}var Le,Ae={};function We(){if(Le)return Ae;function u(x){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},u(x)}Le=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.create=function(){var x=new i.ARRAY_TYPE(16);return i.ARRAY_TYPE!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=0,x[12]=0,x[13]=0,x[14]=0),x[0]=1,x[5]=1,x[10]=1,x[15]=1,x},Ae.clone=function(x){var T=new i.ARRAY_TYPE(16);return T[0]=x[0],T[1]=x[1],T[2]=x[2],T[3]=x[3],T[4]=x[4],T[5]=x[5],T[6]=x[6],T[7]=x[7],T[8]=x[8],T[9]=x[9],T[10]=x[10],T[11]=x[11],T[12]=x[12],T[13]=x[13],T[14]=x[14],T[15]=x[15],T},Ae.copy=function(x,T){return x[0]=T[0],x[1]=T[1],x[2]=T[2],x[3]=T[3],x[4]=T[4],x[5]=T[5],x[6]=T[6],x[7]=T[7],x[8]=T[8],x[9]=T[9],x[10]=T[10],x[11]=T[11],x[12]=T[12],x[13]=T[13],x[14]=T[14],x[15]=T[15],x},Ae.fromValues=function(x,T,I,E,A,k,B,$,H,G,U,Y,Q,se,xe,pe){var ge=new i.ARRAY_TYPE(16);return ge[0]=x,ge[1]=T,ge[2]=I,ge[3]=E,ge[4]=A,ge[5]=k,ge[6]=B,ge[7]=$,ge[8]=H,ge[9]=G,ge[10]=U,ge[11]=Y,ge[12]=Q,ge[13]=se,ge[14]=xe,ge[15]=pe,ge},Ae.set=function(x,T,I,E,A,k,B,$,H,G,U,Y,Q,se,xe,pe,ge){return x[0]=T,x[1]=I,x[2]=E,x[3]=A,x[4]=k,x[5]=B,x[6]=$,x[7]=H,x[8]=G,x[9]=U,x[10]=Y,x[11]=Q,x[12]=se,x[13]=xe,x[14]=pe,x[15]=ge,x},Ae.identity=h,Ae.transpose=function(x,T){if(x===T){var I=T[1],E=T[2],A=T[3],k=T[6],B=T[7],$=T[11];x[1]=T[4],x[2]=T[8],x[3]=T[12],x[4]=I,x[6]=T[9],x[7]=T[13],x[8]=E,x[9]=k,x[11]=T[14],x[12]=A,x[13]=B,x[14]=$}else x[0]=T[0],x[1]=T[4],x[2]=T[8],x[3]=T[12],x[4]=T[1],x[5]=T[5],x[6]=T[9],x[7]=T[13],x[8]=T[2],x[9]=T[6],x[10]=T[10],x[11]=T[14],x[12]=T[3],x[13]=T[7],x[14]=T[11],x[15]=T[15];return x},Ae.invert=function(x,T){var I=T[0],E=T[1],A=T[2],k=T[3],B=T[4],$=T[5],H=T[6],G=T[7],U=T[8],Y=T[9],Q=T[10],se=T[11],xe=T[12],pe=T[13],ge=T[14],Pe=T[15],me=I*$-E*B,Ie=I*H-A*B,Fe=I*G-k*B,Ne=E*H-A*$,He=E*G-k*$,et=A*G-k*H,rt=U*pe-Y*xe,Ye=U*ge-Q*xe,_t=U*Pe-se*xe,zt=Y*ge-Q*pe,ht=Y*Pe-se*pe,ei=Q*Pe-se*ge,Vt=me*ei-Ie*ht+Fe*zt+Ne*_t-He*Ye+et*rt;return Vt?(x[0]=($*ei-H*ht+G*zt)*(Vt=1/Vt),x[1]=(A*ht-E*ei-k*zt)*Vt,x[2]=(pe*et-ge*He+Pe*Ne)*Vt,x[3]=(Q*He-Y*et-se*Ne)*Vt,x[4]=(H*_t-B*ei-G*Ye)*Vt,x[5]=(I*ei-A*_t+k*Ye)*Vt,x[6]=(ge*Fe-xe*et-Pe*Ie)*Vt,x[7]=(U*et-Q*Fe+se*Ie)*Vt,x[8]=(B*ht-$*_t+G*rt)*Vt,x[9]=(E*_t-I*ht-k*rt)*Vt,x[10]=(xe*He-pe*Fe+Pe*me)*Vt,x[11]=(Y*Fe-U*He-se*me)*Vt,x[12]=($*Ye-B*zt-H*rt)*Vt,x[13]=(I*zt-E*Ye+A*rt)*Vt,x[14]=(pe*Ie-xe*Ne-ge*me)*Vt,x[15]=(U*Ne-Y*Ie+Q*me)*Vt,x):null},Ae.adjoint=function(x,T){var I=T[0],E=T[1],A=T[2],k=T[3],B=T[4],$=T[5],H=T[6],G=T[7],U=T[8],Y=T[9],Q=T[10],se=T[11],xe=T[12],pe=T[13],ge=T[14],Pe=T[15];return x[0]=$*(Q*Pe-se*ge)-Y*(H*Pe-G*ge)+pe*(H*se-G*Q),x[1]=-(E*(Q*Pe-se*ge)-Y*(A*Pe-k*ge)+pe*(A*se-k*Q)),x[2]=E*(H*Pe-G*ge)-$*(A*Pe-k*ge)+pe*(A*G-k*H),x[3]=-(E*(H*se-G*Q)-$*(A*se-k*Q)+Y*(A*G-k*H)),x[4]=-(B*(Q*Pe-se*ge)-U*(H*Pe-G*ge)+xe*(H*se-G*Q)),x[5]=I*(Q*Pe-se*ge)-U*(A*Pe-k*ge)+xe*(A*se-k*Q),x[6]=-(I*(H*Pe-G*ge)-B*(A*Pe-k*ge)+xe*(A*G-k*H)),x[7]=I*(H*se-G*Q)-B*(A*se-k*Q)+U*(A*G-k*H),x[8]=B*(Y*Pe-se*pe)-U*($*Pe-G*pe)+xe*($*se-G*Y),x[9]=-(I*(Y*Pe-se*pe)-U*(E*Pe-k*pe)+xe*(E*se-k*Y)),x[10]=I*($*Pe-G*pe)-B*(E*Pe-k*pe)+xe*(E*G-k*$),x[11]=-(I*($*se-G*Y)-B*(E*se-k*Y)+U*(E*G-k*$)),x[12]=-(B*(Y*ge-Q*pe)-U*($*ge-H*pe)+xe*($*Q-H*Y)),x[13]=I*(Y*ge-Q*pe)-U*(E*ge-A*pe)+xe*(E*Q-A*Y),x[14]=-(I*($*ge-H*pe)-B*(E*ge-A*pe)+xe*(E*H-A*$)),x[15]=I*($*Q-H*Y)-B*(E*Q-A*Y)+U*(E*H-A*$),x},Ae.determinant=function(x){var T=x[0],I=x[1],E=x[2],A=x[3],k=x[4],B=x[5],$=x[6],H=x[7],G=x[8],U=x[9],Y=x[10],Q=x[11],se=x[12],xe=x[13],pe=x[14],ge=x[15];return(T*B-I*k)*(Y*ge-Q*pe)-(T*$-E*k)*(U*ge-Q*xe)+(T*H-A*k)*(U*pe-Y*xe)+(I*$-E*B)*(G*ge-Q*se)-(I*H-A*B)*(G*pe-Y*se)+(E*H-A*$)*(G*xe-U*se)},Ae.multiply=g,Ae.translate=function(x,T,I){var E,A,k,B,$,H,G,U,Y,Q,se,xe,pe=I[0],ge=I[1],Pe=I[2];return T===x?(x[12]=T[0]*pe+T[4]*ge+T[8]*Pe+T[12],x[13]=T[1]*pe+T[5]*ge+T[9]*Pe+T[13],x[14]=T[2]*pe+T[6]*ge+T[10]*Pe+T[14],x[15]=T[3]*pe+T[7]*ge+T[11]*Pe+T[15]):(A=T[1],k=T[2],B=T[3],$=T[4],H=T[5],G=T[6],U=T[7],Y=T[8],Q=T[9],se=T[10],xe=T[11],x[0]=E=T[0],x[1]=A,x[2]=k,x[3]=B,x[4]=$,x[5]=H,x[6]=G,x[7]=U,x[8]=Y,x[9]=Q,x[10]=se,x[11]=xe,x[12]=E*pe+$*ge+Y*Pe+T[12],x[13]=A*pe+H*ge+Q*Pe+T[13],x[14]=k*pe+G*ge+se*Pe+T[14],x[15]=B*pe+U*ge+xe*Pe+T[15]),x},Ae.scale=function(x,T,I){var E=I[0],A=I[1],k=I[2];return x[0]=T[0]*E,x[1]=T[1]*E,x[2]=T[2]*E,x[3]=T[3]*E,x[4]=T[4]*A,x[5]=T[5]*A,x[6]=T[6]*A,x[7]=T[7]*A,x[8]=T[8]*k,x[9]=T[9]*k,x[10]=T[10]*k,x[11]=T[11]*k,x[12]=T[12],x[13]=T[13],x[14]=T[14],x[15]=T[15],x},Ae.rotate=function(x,T,I,E){var A,k,B,$,H,G,U,Y,Q,se,xe,pe,ge,Pe,me,Ie,Fe,Ne,He,et,rt,Ye,_t,zt,ht=E[0],ei=E[1],Vt=E[2],Bt=Math.hypot(ht,ei,Vt);return Bt<i.EPSILON?null:(ht*=Bt=1/Bt,ei*=Bt,Vt*=Bt,A=Math.sin(I),k=Math.cos(I),H=T[1],G=T[2],U=T[3],Q=T[5],se=T[6],xe=T[7],ge=T[9],Pe=T[10],me=T[11],Ie=ht*ht*(B=1-k)+k,He=ht*ei*B-Vt*A,et=ei*ei*B+k,rt=Vt*ei*B+ht*A,Ye=ht*Vt*B+ei*A,_t=ei*Vt*B-ht*A,zt=Vt*Vt*B+k,x[0]=($=T[0])*Ie+(Y=T[4])*(Fe=ei*ht*B+Vt*A)+(pe=T[8])*(Ne=Vt*ht*B-ei*A),x[1]=H*Ie+Q*Fe+ge*Ne,x[2]=G*Ie+se*Fe+Pe*Ne,x[3]=U*Ie+xe*Fe+me*Ne,x[4]=$*He+Y*et+pe*rt,x[5]=H*He+Q*et+ge*rt,x[6]=G*He+se*et+Pe*rt,x[7]=U*He+xe*et+me*rt,x[8]=$*Ye+Y*_t+pe*zt,x[9]=H*Ye+Q*_t+ge*zt,x[10]=G*Ye+se*_t+Pe*zt,x[11]=U*Ye+xe*_t+me*zt,T!==x&&(x[12]=T[12],x[13]=T[13],x[14]=T[14],x[15]=T[15]),x)},Ae.rotateX=function(x,T,I){var E=Math.sin(I),A=Math.cos(I),k=T[4],B=T[5],$=T[6],H=T[7],G=T[8],U=T[9],Y=T[10],Q=T[11];return T!==x&&(x[0]=T[0],x[1]=T[1],x[2]=T[2],x[3]=T[3],x[12]=T[12],x[13]=T[13],x[14]=T[14],x[15]=T[15]),x[4]=k*A+G*E,x[5]=B*A+U*E,x[6]=$*A+Y*E,x[7]=H*A+Q*E,x[8]=G*A-k*E,x[9]=U*A-B*E,x[10]=Y*A-$*E,x[11]=Q*A-H*E,x},Ae.rotateY=function(x,T,I){var E=Math.sin(I),A=Math.cos(I),k=T[0],B=T[1],$=T[2],H=T[3],G=T[8],U=T[9],Y=T[10],Q=T[11];return T!==x&&(x[4]=T[4],x[5]=T[5],x[6]=T[6],x[7]=T[7],x[12]=T[12],x[13]=T[13],x[14]=T[14],x[15]=T[15]),x[0]=k*A-G*E,x[1]=B*A-U*E,x[2]=$*A-Y*E,x[3]=H*A-Q*E,x[8]=k*E+G*A,x[9]=B*E+U*A,x[10]=$*E+Y*A,x[11]=H*E+Q*A,x},Ae.rotateZ=function(x,T,I){var E=Math.sin(I),A=Math.cos(I),k=T[0],B=T[1],$=T[2],H=T[3],G=T[4],U=T[5],Y=T[6],Q=T[7];return T!==x&&(x[8]=T[8],x[9]=T[9],x[10]=T[10],x[11]=T[11],x[12]=T[12],x[13]=T[13],x[14]=T[14],x[15]=T[15]),x[0]=k*A+G*E,x[1]=B*A+U*E,x[2]=$*A+Y*E,x[3]=H*A+Q*E,x[4]=G*A-k*E,x[5]=U*A-B*E,x[6]=Y*A-$*E,x[7]=Q*A-H*E,x},Ae.fromTranslation=function(x,T){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=T[0],x[13]=T[1],x[14]=T[2],x[15]=1,x},Ae.fromScaling=function(x,T){return x[0]=T[0],x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=T[1],x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=T[2],x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x},Ae.fromRotation=function(x,T,I){var E,A,k,B=I[0],$=I[1],H=I[2],G=Math.hypot(B,$,H);return G<i.EPSILON?null:(B*=G=1/G,$*=G,H*=G,E=Math.sin(T),A=Math.cos(T),x[0]=B*B*(k=1-A)+A,x[1]=$*B*k+H*E,x[2]=H*B*k-$*E,x[3]=0,x[4]=B*$*k-H*E,x[5]=$*$*k+A,x[6]=H*$*k+B*E,x[7]=0,x[8]=B*H*k+$*E,x[9]=$*H*k-B*E,x[10]=H*H*k+A,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x)},Ae.fromXRotation=function(x,T){var I=Math.sin(T),E=Math.cos(T);return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=E,x[6]=I,x[7]=0,x[8]=0,x[9]=-I,x[10]=E,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x},Ae.fromYRotation=function(x,T){var I=Math.sin(T),E=Math.cos(T);return x[0]=E,x[1]=0,x[2]=-I,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=I,x[9]=0,x[10]=E,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x},Ae.fromZRotation=function(x,T){var I=Math.sin(T),E=Math.cos(T);return x[0]=E,x[1]=I,x[2]=0,x[3]=0,x[4]=-I,x[5]=E,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x},Ae.fromRotationTranslation=f,Ae.fromQuat2=function(x,T){var I=new i.ARRAY_TYPE(3),E=-T[0],A=-T[1],k=-T[2],B=T[3],$=T[4],H=T[5],G=T[6],U=T[7],Y=E*E+A*A+k*k+B*B;return Y>0?(I[0]=2*($*B+U*E+H*k-G*A)/Y,I[1]=2*(H*B+U*A+G*E-$*k)/Y,I[2]=2*(G*B+U*k+$*A-H*E)/Y):(I[0]=2*($*B+U*E+H*k-G*A),I[1]=2*(H*B+U*A+G*E-$*k),I[2]=2*(G*B+U*k+$*A-H*E)),f(x,T,I),x},Ae.getTranslation=function(x,T){return x[0]=T[12],x[1]=T[13],x[2]=T[14],x},Ae.getScaling=_,Ae.getRotation=function(x,T){var I=new i.ARRAY_TYPE(3);_(I,T);var E=1/I[0],A=1/I[1],k=1/I[2],B=T[0]*E,$=T[1]*A,H=T[2]*k,G=T[4]*E,U=T[5]*A,Y=T[6]*k,Q=T[8]*E,se=T[9]*A,xe=T[10]*k,pe=B+U+xe,ge=0;return pe>0?(ge=2*Math.sqrt(pe+1),x[3]=.25*ge,x[0]=(Y-se)/ge,x[1]=(Q-H)/ge,x[2]=($-G)/ge):B>U&&B>xe?(ge=2*Math.sqrt(1+B-U-xe),x[3]=(Y-se)/ge,x[0]=.25*ge,x[1]=($+G)/ge,x[2]=(Q+H)/ge):U>xe?(ge=2*Math.sqrt(1+U-B-xe),x[3]=(Q-H)/ge,x[0]=($+G)/ge,x[1]=.25*ge,x[2]=(Y+se)/ge):(ge=2*Math.sqrt(1+xe-B-U),x[3]=($-G)/ge,x[0]=(Q+H)/ge,x[1]=(Y+se)/ge,x[2]=.25*ge),x},Ae.fromRotationTranslationScale=function(x,T,I,E){var A=T[0],k=T[1],B=T[2],$=T[3],H=A+A,G=k+k,U=B+B,Y=A*H,Q=A*G,se=A*U,xe=k*G,pe=k*U,ge=B*U,Pe=$*H,me=$*G,Ie=$*U,Fe=E[0],Ne=E[1],He=E[2];return x[0]=(1-(xe+ge))*Fe,x[1]=(Q+Ie)*Fe,x[2]=(se-me)*Fe,x[3]=0,x[4]=(Q-Ie)*Ne,x[5]=(1-(Y+ge))*Ne,x[6]=(pe+Pe)*Ne,x[7]=0,x[8]=(se+me)*He,x[9]=(pe-Pe)*He,x[10]=(1-(Y+xe))*He,x[11]=0,x[12]=I[0],x[13]=I[1],x[14]=I[2],x[15]=1,x},Ae.fromRotationTranslationScaleOrigin=function(x,T,I,E,A){var k=T[0],B=T[1],$=T[2],H=T[3],G=k+k,U=B+B,Y=$+$,Q=k*G,se=k*U,xe=k*Y,pe=B*U,ge=B*Y,Pe=$*Y,me=H*G,Ie=H*U,Fe=H*Y,Ne=E[0],He=E[1],et=E[2],rt=A[0],Ye=A[1],_t=A[2],zt=(1-(pe+Pe))*Ne,ht=(se+Fe)*Ne,ei=(xe-Ie)*Ne,Vt=(se-Fe)*He,Bt=(1-(Q+Pe))*He,Ct=(ge+me)*He,yi=(xe+Ie)*et,Kt=(ge-me)*et,ri=(1-(Q+pe))*et;return x[0]=zt,x[1]=ht,x[2]=ei,x[3]=0,x[4]=Vt,x[5]=Bt,x[6]=Ct,x[7]=0,x[8]=yi,x[9]=Kt,x[10]=ri,x[11]=0,x[12]=I[0]+rt-(zt*rt+Vt*Ye+yi*_t),x[13]=I[1]+Ye-(ht*rt+Bt*Ye+Kt*_t),x[14]=I[2]+_t-(ei*rt+Ct*Ye+ri*_t),x[15]=1,x},Ae.fromQuat=function(x,T){var I=T[0],E=T[1],A=T[2],k=T[3],B=I+I,$=E+E,H=A+A,G=I*B,U=E*B,Y=E*$,Q=A*B,se=A*$,xe=A*H,pe=k*B,ge=k*$,Pe=k*H;return x[0]=1-Y-xe,x[1]=U+Pe,x[2]=Q-ge,x[3]=0,x[4]=U-Pe,x[5]=1-G-xe,x[6]=se+pe,x[7]=0,x[8]=Q+ge,x[9]=se-pe,x[10]=1-G-Y,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x},Ae.frustum=function(x,T,I,E,A,k,B){var $=1/(I-T),H=1/(A-E),G=1/(k-B);return x[0]=2*k*$,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=2*k*H,x[6]=0,x[7]=0,x[8]=(I+T)*$,x[9]=(A+E)*H,x[10]=(B+k)*G,x[11]=-1,x[12]=0,x[13]=0,x[14]=B*k*2*G,x[15]=0,x},Ae.perspectiveNO=w,Ae.perspectiveZO=function(x,T,I,E,A){var k,B=1/Math.tan(T/2);return x[0]=B/I,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=B,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=-1,x[12]=0,x[13]=0,x[15]=0,A!=null&&A!==1/0?(x[10]=A*(k=1/(E-A)),x[14]=A*E*k):(x[10]=-1,x[14]=-E),x},Ae.perspectiveFromFieldOfView=function(x,T,I,E){var A=Math.tan(T.upDegrees*Math.PI/180),k=Math.tan(T.downDegrees*Math.PI/180),B=Math.tan(T.leftDegrees*Math.PI/180),$=Math.tan(T.rightDegrees*Math.PI/180),H=2/(B+$),G=2/(A+k);return x[0]=H,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=G,x[6]=0,x[7]=0,x[8]=-(B-$)*H*.5,x[9]=(A-k)*G*.5,x[10]=E/(I-E),x[11]=-1,x[12]=0,x[13]=0,x[14]=E*I/(I-E),x[15]=0,x},Ae.orthoNO=C,Ae.orthoZO=function(x,T,I,E,A,k,B){var $=1/(T-I),H=1/(E-A),G=1/(k-B);return x[0]=-2*$,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=-2*H,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=G,x[11]=0,x[12]=(T+I)*$,x[13]=(A+E)*H,x[14]=k*G,x[15]=1,x},Ae.lookAt=function(x,T,I,E){var A,k,B,$,H,G,U,Y,Q,se,xe=T[0],pe=T[1],ge=T[2],Pe=E[0],me=E[1],Ie=E[2],Fe=I[0],Ne=I[1],He=I[2];return Math.abs(xe-Fe)<i.EPSILON&&Math.abs(pe-Ne)<i.EPSILON&&Math.abs(ge-He)<i.EPSILON?h(x):(U=xe-Fe,Y=pe-Ne,Q=ge-He,A=me*(Q*=se=1/Math.hypot(U,Y,Q))-Ie*(Y*=se),k=Ie*(U*=se)-Pe*Q,B=Pe*Y-me*U,(se=Math.hypot(A,k,B))?(A*=se=1/se,k*=se,B*=se):(A=0,k=0,B=0),$=Y*B-Q*k,H=Q*A-U*B,G=U*k-Y*A,(se=Math.hypot($,H,G))?($*=se=1/se,H*=se,G*=se):($=0,H=0,G=0),x[0]=A,x[1]=$,x[2]=U,x[3]=0,x[4]=k,x[5]=H,x[6]=Y,x[7]=0,x[8]=B,x[9]=G,x[10]=Q,x[11]=0,x[12]=-(A*xe+k*pe+B*ge),x[13]=-($*xe+H*pe+G*ge),x[14]=-(U*xe+Y*pe+Q*ge),x[15]=1,x)},Ae.targetTo=function(x,T,I,E){var A=T[0],k=T[1],B=T[2],$=E[0],H=E[1],G=E[2],U=A-I[0],Y=k-I[1],Q=B-I[2],se=U*U+Y*Y+Q*Q;se>0&&(U*=se=1/Math.sqrt(se),Y*=se,Q*=se);var xe=H*Q-G*Y,pe=G*U-$*Q,ge=$*Y-H*U;return(se=xe*xe+pe*pe+ge*ge)>0&&(xe*=se=1/Math.sqrt(se),pe*=se,ge*=se),x[0]=xe,x[1]=pe,x[2]=ge,x[3]=0,x[4]=Y*ge-Q*pe,x[5]=Q*xe-U*ge,x[6]=U*pe-Y*xe,x[7]=0,x[8]=U,x[9]=Y,x[10]=Q,x[11]=0,x[12]=A,x[13]=k,x[14]=B,x[15]=1,x},Ae.str=function(x){return"mat4("+x[0]+", "+x[1]+", "+x[2]+", "+x[3]+", "+x[4]+", "+x[5]+", "+x[6]+", "+x[7]+", "+x[8]+", "+x[9]+", "+x[10]+", "+x[11]+", "+x[12]+", "+x[13]+", "+x[14]+", "+x[15]+")"},Ae.frob=function(x){return Math.hypot(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15])},Ae.add=function(x,T,I){return x[0]=T[0]+I[0],x[1]=T[1]+I[1],x[2]=T[2]+I[2],x[3]=T[3]+I[3],x[4]=T[4]+I[4],x[5]=T[5]+I[5],x[6]=T[6]+I[6],x[7]=T[7]+I[7],x[8]=T[8]+I[8],x[9]=T[9]+I[9],x[10]=T[10]+I[10],x[11]=T[11]+I[11],x[12]=T[12]+I[12],x[13]=T[13]+I[13],x[14]=T[14]+I[14],x[15]=T[15]+I[15],x},Ae.subtract=z,Ae.multiplyScalar=function(x,T,I){return x[0]=T[0]*I,x[1]=T[1]*I,x[2]=T[2]*I,x[3]=T[3]*I,x[4]=T[4]*I,x[5]=T[5]*I,x[6]=T[6]*I,x[7]=T[7]*I,x[8]=T[8]*I,x[9]=T[9]*I,x[10]=T[10]*I,x[11]=T[11]*I,x[12]=T[12]*I,x[13]=T[13]*I,x[14]=T[14]*I,x[15]=T[15]*I,x},Ae.multiplyScalarAndAdd=function(x,T,I,E){return x[0]=T[0]+I[0]*E,x[1]=T[1]+I[1]*E,x[2]=T[2]+I[2]*E,x[3]=T[3]+I[3]*E,x[4]=T[4]+I[4]*E,x[5]=T[5]+I[5]*E,x[6]=T[6]+I[6]*E,x[7]=T[7]+I[7]*E,x[8]=T[8]+I[8]*E,x[9]=T[9]+I[9]*E,x[10]=T[10]+I[10]*E,x[11]=T[11]+I[11]*E,x[12]=T[12]+I[12]*E,x[13]=T[13]+I[13]*E,x[14]=T[14]+I[14]*E,x[15]=T[15]+I[15]*E,x},Ae.exactEquals=function(x,T){return x[0]===T[0]&&x[1]===T[1]&&x[2]===T[2]&&x[3]===T[3]&&x[4]===T[4]&&x[5]===T[5]&&x[6]===T[6]&&x[7]===T[7]&&x[8]===T[8]&&x[9]===T[9]&&x[10]===T[10]&&x[11]===T[11]&&x[12]===T[12]&&x[13]===T[13]&&x[14]===T[14]&&x[15]===T[15]},Ae.equals=function(x,T){var I=x[0],E=x[1],A=x[2],k=x[3],B=x[4],$=x[5],H=x[6],G=x[7],U=x[8],Y=x[9],Q=x[10],se=x[11],xe=x[12],pe=x[13],ge=x[14],Pe=x[15],me=T[0],Ie=T[1],Fe=T[2],Ne=T[3],He=T[4],et=T[5],rt=T[6],Ye=T[7],_t=T[8],zt=T[9],ht=T[10],ei=T[11],Vt=T[12],Bt=T[13],Ct=T[14],yi=T[15];return Math.abs(I-me)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(me))&&Math.abs(E-Ie)<=i.EPSILON*Math.max(1,Math.abs(E),Math.abs(Ie))&&Math.abs(A-Fe)<=i.EPSILON*Math.max(1,Math.abs(A),Math.abs(Fe))&&Math.abs(k-Ne)<=i.EPSILON*Math.max(1,Math.abs(k),Math.abs(Ne))&&Math.abs(B-He)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(He))&&Math.abs($-et)<=i.EPSILON*Math.max(1,Math.abs($),Math.abs(et))&&Math.abs(H-rt)<=i.EPSILON*Math.max(1,Math.abs(H),Math.abs(rt))&&Math.abs(G-Ye)<=i.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ye))&&Math.abs(U-_t)<=i.EPSILON*Math.max(1,Math.abs(U),Math.abs(_t))&&Math.abs(Y-zt)<=i.EPSILON*Math.max(1,Math.abs(Y),Math.abs(zt))&&Math.abs(Q-ht)<=i.EPSILON*Math.max(1,Math.abs(Q),Math.abs(ht))&&Math.abs(se-ei)<=i.EPSILON*Math.max(1,Math.abs(se),Math.abs(ei))&&Math.abs(xe-Vt)<=i.EPSILON*Math.max(1,Math.abs(xe),Math.abs(Vt))&&Math.abs(pe-Bt)<=i.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Bt))&&Math.abs(ge-Ct)<=i.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Ct))&&Math.abs(Pe-yi)<=i.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(yi))},Ae.sub=Ae.mul=Ae.ortho=Ae.perspective=void 0;var i=function(x,T){if(x&&x.__esModule)return x;if(x===null||u(x)!=="object"&&typeof x!="function")return{default:x};var I=a(void 0);if(I&&I.has(x))return I.get(x);var E={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in x)if(k!=="default"&&Object.prototype.hasOwnProperty.call(x,k)){var B=A?Object.getOwnPropertyDescriptor(x,k):null;B&&(B.get||B.set)?Object.defineProperty(E,k,B):E[k]=x[k]}return E.default=x,I&&I.set(x,E),E}(X());function a(x){if(typeof WeakMap!="function")return null;var T=new WeakMap,I=new WeakMap;return(a=function(E){return E?I:T})(x)}function h(x){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}function g(x,T,I){var E=T[0],A=T[1],k=T[2],B=T[3],$=T[4],H=T[5],G=T[6],U=T[7],Y=T[8],Q=T[9],se=T[10],xe=T[11],pe=T[12],ge=T[13],Pe=T[14],me=T[15],Ie=I[0],Fe=I[1],Ne=I[2],He=I[3];return x[0]=Ie*E+Fe*$+Ne*Y+He*pe,x[1]=Ie*A+Fe*H+Ne*Q+He*ge,x[2]=Ie*k+Fe*G+Ne*se+He*Pe,x[3]=Ie*B+Fe*U+Ne*xe+He*me,x[4]=(Ie=I[4])*E+(Fe=I[5])*$+(Ne=I[6])*Y+(He=I[7])*pe,x[5]=Ie*A+Fe*H+Ne*Q+He*ge,x[6]=Ie*k+Fe*G+Ne*se+He*Pe,x[7]=Ie*B+Fe*U+Ne*xe+He*me,x[8]=(Ie=I[8])*E+(Fe=I[9])*$+(Ne=I[10])*Y+(He=I[11])*pe,x[9]=Ie*A+Fe*H+Ne*Q+He*ge,x[10]=Ie*k+Fe*G+Ne*se+He*Pe,x[11]=Ie*B+Fe*U+Ne*xe+He*me,x[12]=(Ie=I[12])*E+(Fe=I[13])*$+(Ne=I[14])*Y+(He=I[15])*pe,x[13]=Ie*A+Fe*H+Ne*Q+He*ge,x[14]=Ie*k+Fe*G+Ne*se+He*Pe,x[15]=Ie*B+Fe*U+Ne*xe+He*me,x}function f(x,T,I){var E=T[0],A=T[1],k=T[2],B=T[3],$=E+E,H=A+A,G=k+k,U=E*$,Y=E*H,Q=E*G,se=A*H,xe=A*G,pe=k*G,ge=B*$,Pe=B*H,me=B*G;return x[0]=1-(se+pe),x[1]=Y+me,x[2]=Q-Pe,x[3]=0,x[4]=Y-me,x[5]=1-(U+pe),x[6]=xe+ge,x[7]=0,x[8]=Q+Pe,x[9]=xe-ge,x[10]=1-(U+se),x[11]=0,x[12]=I[0],x[13]=I[1],x[14]=I[2],x[15]=1,x}function _(x,T){var I=T[4],E=T[5],A=T[6],k=T[8],B=T[9],$=T[10];return x[0]=Math.hypot(T[0],T[1],T[2]),x[1]=Math.hypot(I,E,A),x[2]=Math.hypot(k,B,$),x}function w(x,T,I,E,A){var k,B=1/Math.tan(T/2);return x[0]=B/I,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=B,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=-1,x[12]=0,x[13]=0,x[15]=0,A!=null&&A!==1/0?(x[10]=(A+E)*(k=1/(E-A)),x[14]=2*A*E*k):(x[10]=-1,x[14]=-2*E),x}function C(x,T,I,E,A,k,B){var $=1/(T-I),H=1/(E-A),G=1/(k-B);return x[0]=-2*$,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=-2*H,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=2*G,x[11]=0,x[12]=(T+I)*$,x[13]=(A+E)*H,x[14]=(B+k)*G,x[15]=1,x}function z(x,T,I){return x[0]=T[0]-I[0],x[1]=T[1]-I[1],x[2]=T[2]-I[2],x[3]=T[3]-I[3],x[4]=T[4]-I[4],x[5]=T[5]-I[5],x[6]=T[6]-I[6],x[7]=T[7]-I[7],x[8]=T[8]-I[8],x[9]=T[9]-I[9],x[10]=T[10]-I[10],x[11]=T[11]-I[11],x[12]=T[12]-I[12],x[13]=T[13]-I[13],x[14]=T[14]-I[14],x[15]=T[15]-I[15],x}return Ae.perspective=w,Ae.ortho=C,Ae.mul=g,Ae.sub=z,Ae}var Qe,ze={},Ze={};function Ue(){if(Qe)return Ze;function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},u(A)}Qe=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.create=h,Ze.clone=function(A){var k=new i.ARRAY_TYPE(3);return k[0]=A[0],k[1]=A[1],k[2]=A[2],k},Ze.length=g,Ze.fromValues=function(A,k,B){var $=new i.ARRAY_TYPE(3);return $[0]=A,$[1]=k,$[2]=B,$},Ze.copy=function(A,k){return A[0]=k[0],A[1]=k[1],A[2]=k[2],A},Ze.set=function(A,k,B,$){return A[0]=k,A[1]=B,A[2]=$,A},Ze.add=function(A,k,B){return A[0]=k[0]+B[0],A[1]=k[1]+B[1],A[2]=k[2]+B[2],A},Ze.subtract=f,Ze.multiply=_,Ze.divide=w,Ze.ceil=function(A,k){return A[0]=Math.ceil(k[0]),A[1]=Math.ceil(k[1]),A[2]=Math.ceil(k[2]),A},Ze.floor=function(A,k){return A[0]=Math.floor(k[0]),A[1]=Math.floor(k[1]),A[2]=Math.floor(k[2]),A},Ze.min=function(A,k,B){return A[0]=Math.min(k[0],B[0]),A[1]=Math.min(k[1],B[1]),A[2]=Math.min(k[2],B[2]),A},Ze.max=function(A,k,B){return A[0]=Math.max(k[0],B[0]),A[1]=Math.max(k[1],B[1]),A[2]=Math.max(k[2],B[2]),A},Ze.round=function(A,k){return A[0]=Math.round(k[0]),A[1]=Math.round(k[1]),A[2]=Math.round(k[2]),A},Ze.scale=function(A,k,B){return A[0]=k[0]*B,A[1]=k[1]*B,A[2]=k[2]*B,A},Ze.scaleAndAdd=function(A,k,B,$){return A[0]=k[0]+B[0]*$,A[1]=k[1]+B[1]*$,A[2]=k[2]+B[2]*$,A},Ze.distance=C,Ze.squaredDistance=z,Ze.squaredLength=x,Ze.negate=function(A,k){return A[0]=-k[0],A[1]=-k[1],A[2]=-k[2],A},Ze.inverse=function(A,k){return A[0]=1/k[0],A[1]=1/k[1],A[2]=1/k[2],A},Ze.normalize=function(A,k){var B=k[0],$=k[1],H=k[2],G=B*B+$*$+H*H;return G>0&&(G=1/Math.sqrt(G)),A[0]=k[0]*G,A[1]=k[1]*G,A[2]=k[2]*G,A},Ze.dot=T,Ze.cross=function(A,k,B){var $=k[0],H=k[1],G=k[2],U=B[0],Y=B[1],Q=B[2];return A[0]=H*Q-G*Y,A[1]=G*U-$*Q,A[2]=$*Y-H*U,A},Ze.lerp=function(A,k,B,$){var H=k[0],G=k[1],U=k[2];return A[0]=H+$*(B[0]-H),A[1]=G+$*(B[1]-G),A[2]=U+$*(B[2]-U),A},Ze.hermite=function(A,k,B,$,H,G){var U=G*G,Y=U*(2*G-3)+1,Q=U*(G-2)+G,se=U*(G-1),xe=U*(3-2*G);return A[0]=k[0]*Y+B[0]*Q+$[0]*se+H[0]*xe,A[1]=k[1]*Y+B[1]*Q+$[1]*se+H[1]*xe,A[2]=k[2]*Y+B[2]*Q+$[2]*se+H[2]*xe,A},Ze.bezier=function(A,k,B,$,H,G){var U=1-G,Y=U*U,Q=G*G,se=Y*U,xe=3*G*Y,pe=3*Q*U,ge=Q*G;return A[0]=k[0]*se+B[0]*xe+$[0]*pe+H[0]*ge,A[1]=k[1]*se+B[1]*xe+$[1]*pe+H[1]*ge,A[2]=k[2]*se+B[2]*xe+$[2]*pe+H[2]*ge,A},Ze.random=function(A,k){k=k||1;var B=2*i.RANDOM()*Math.PI,$=2*i.RANDOM()-1,H=Math.sqrt(1-$*$)*k;return A[0]=Math.cos(B)*H,A[1]=Math.sin(B)*H,A[2]=$*k,A},Ze.transformMat4=function(A,k,B){var $=k[0],H=k[1],G=k[2],U=B[3]*$+B[7]*H+B[11]*G+B[15];return A[0]=(B[0]*$+B[4]*H+B[8]*G+B[12])/(U=U||1),A[1]=(B[1]*$+B[5]*H+B[9]*G+B[13])/U,A[2]=(B[2]*$+B[6]*H+B[10]*G+B[14])/U,A},Ze.transformMat3=function(A,k,B){var $=k[0],H=k[1],G=k[2];return A[0]=$*B[0]+H*B[3]+G*B[6],A[1]=$*B[1]+H*B[4]+G*B[7],A[2]=$*B[2]+H*B[5]+G*B[8],A},Ze.transformQuat=function(A,k,B){var $=B[0],H=B[1],G=B[2],U=k[0],Y=k[1],Q=k[2],se=H*Q-G*Y,xe=G*U-$*Q,pe=$*Y-H*U,ge=H*pe-G*xe,Pe=G*se-$*pe,me=$*xe-H*se,Ie=2*B[3];return xe*=Ie,pe*=Ie,Pe*=2,me*=2,A[0]=U+(se*=Ie)+(ge*=2),A[1]=Y+xe+Pe,A[2]=Q+pe+me,A},Ze.rotateX=function(A,k,B,$){var H=[],G=[];return H[0]=k[0]-B[0],H[1]=k[1]-B[1],H[2]=k[2]-B[2],G[0]=H[0],G[1]=H[1]*Math.cos($)-H[2]*Math.sin($),G[2]=H[1]*Math.sin($)+H[2]*Math.cos($),A[0]=G[0]+B[0],A[1]=G[1]+B[1],A[2]=G[2]+B[2],A},Ze.rotateY=function(A,k,B,$){var H=[],G=[];return H[0]=k[0]-B[0],H[1]=k[1]-B[1],H[2]=k[2]-B[2],G[0]=H[2]*Math.sin($)+H[0]*Math.cos($),G[1]=H[1],G[2]=H[2]*Math.cos($)-H[0]*Math.sin($),A[0]=G[0]+B[0],A[1]=G[1]+B[1],A[2]=G[2]+B[2],A},Ze.rotateZ=function(A,k,B,$){var H=[],G=[];return H[0]=k[0]-B[0],H[1]=k[1]-B[1],H[2]=k[2]-B[2],G[0]=H[0]*Math.cos($)-H[1]*Math.sin($),G[1]=H[0]*Math.sin($)+H[1]*Math.cos($),G[2]=H[2],A[0]=G[0]+B[0],A[1]=G[1]+B[1],A[2]=G[2]+B[2],A},Ze.angle=function(A,k){var B=A[0],$=A[1],H=A[2],G=k[0],U=k[1],Y=k[2],Q=Math.sqrt(B*B+$*$+H*H)*Math.sqrt(G*G+U*U+Y*Y),se=Q&&T(A,k)/Q;return Math.acos(Math.min(Math.max(se,-1),1))},Ze.zero=function(A){return A[0]=0,A[1]=0,A[2]=0,A},Ze.str=function(A){return"vec3("+A[0]+", "+A[1]+", "+A[2]+")"},Ze.exactEquals=function(A,k){return A[0]===k[0]&&A[1]===k[1]&&A[2]===k[2]},Ze.equals=function(A,k){var B=A[0],$=A[1],H=A[2],G=k[0],U=k[1],Y=k[2];return Math.abs(B-G)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(G))&&Math.abs($-U)<=i.EPSILON*Math.max(1,Math.abs($),Math.abs(U))&&Math.abs(H-Y)<=i.EPSILON*Math.max(1,Math.abs(H),Math.abs(Y))},Ze.forEach=Ze.sqrLen=Ze.len=Ze.sqrDist=Ze.dist=Ze.div=Ze.mul=Ze.sub=void 0;var i=function(A,k){if(A&&A.__esModule)return A;if(A===null||u(A)!=="object"&&typeof A!="function")return{default:A};var B=a(void 0);if(B&&B.has(A))return B.get(A);var $={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in A)if(G!=="default"&&Object.prototype.hasOwnProperty.call(A,G)){var U=H?Object.getOwnPropertyDescriptor(A,G):null;U&&(U.get||U.set)?Object.defineProperty($,G,U):$[G]=A[G]}return $.default=A,B&&B.set(A,$),$}(X());function a(A){if(typeof WeakMap!="function")return null;var k=new WeakMap,B=new WeakMap;return(a=function($){return $?B:k})(A)}function h(){var A=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function g(A){return Math.hypot(A[0],A[1],A[2])}function f(A,k,B){return A[0]=k[0]-B[0],A[1]=k[1]-B[1],A[2]=k[2]-B[2],A}function _(A,k,B){return A[0]=k[0]*B[0],A[1]=k[1]*B[1],A[2]=k[2]*B[2],A}function w(A,k,B){return A[0]=k[0]/B[0],A[1]=k[1]/B[1],A[2]=k[2]/B[2],A}function C(A,k){return Math.hypot(k[0]-A[0],k[1]-A[1],k[2]-A[2])}function z(A,k){var B=k[0]-A[0],$=k[1]-A[1],H=k[2]-A[2];return B*B+$*$+H*H}function x(A){var k=A[0],B=A[1],$=A[2];return k*k+B*B+$*$}function T(A,k){return A[0]*k[0]+A[1]*k[1]+A[2]*k[2]}Ze.sub=f,Ze.mul=_,Ze.div=w,Ze.dist=C,Ze.sqrDist=z,Ze.len=g,Ze.sqrLen=x;var I,E=(I=h(),function(A,k,B,$,H,G){var U,Y;for(k||(k=3),B||(B=0),Y=$?Math.min($*k+B,A.length):A.length,U=B;U<Y;U+=k)I[0]=A[U],I[1]=A[U+1],I[2]=A[U+2],H(I,I,G),A[U]=I[0],A[U+1]=I[1],A[U+2]=I[2];return A});return Ze.forEach=E,Ze}var vt,Be,Ke={};function xt(){if(vt)return Ke;function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(E)}vt=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.create=h,Ke.clone=function(E){var A=new i.ARRAY_TYPE(4);return A[0]=E[0],A[1]=E[1],A[2]=E[2],A[3]=E[3],A},Ke.fromValues=function(E,A,k,B){var $=new i.ARRAY_TYPE(4);return $[0]=E,$[1]=A,$[2]=k,$[3]=B,$},Ke.copy=function(E,A){return E[0]=A[0],E[1]=A[1],E[2]=A[2],E[3]=A[3],E},Ke.set=function(E,A,k,B,$){return E[0]=A,E[1]=k,E[2]=B,E[3]=$,E},Ke.add=function(E,A,k){return E[0]=A[0]+k[0],E[1]=A[1]+k[1],E[2]=A[2]+k[2],E[3]=A[3]+k[3],E},Ke.subtract=g,Ke.multiply=f,Ke.divide=_,Ke.ceil=function(E,A){return E[0]=Math.ceil(A[0]),E[1]=Math.ceil(A[1]),E[2]=Math.ceil(A[2]),E[3]=Math.ceil(A[3]),E},Ke.floor=function(E,A){return E[0]=Math.floor(A[0]),E[1]=Math.floor(A[1]),E[2]=Math.floor(A[2]),E[3]=Math.floor(A[3]),E},Ke.min=function(E,A,k){return E[0]=Math.min(A[0],k[0]),E[1]=Math.min(A[1],k[1]),E[2]=Math.min(A[2],k[2]),E[3]=Math.min(A[3],k[3]),E},Ke.max=function(E,A,k){return E[0]=Math.max(A[0],k[0]),E[1]=Math.max(A[1],k[1]),E[2]=Math.max(A[2],k[2]),E[3]=Math.max(A[3],k[3]),E},Ke.round=function(E,A){return E[0]=Math.round(A[0]),E[1]=Math.round(A[1]),E[2]=Math.round(A[2]),E[3]=Math.round(A[3]),E},Ke.scale=function(E,A,k){return E[0]=A[0]*k,E[1]=A[1]*k,E[2]=A[2]*k,E[3]=A[3]*k,E},Ke.scaleAndAdd=function(E,A,k,B){return E[0]=A[0]+k[0]*B,E[1]=A[1]+k[1]*B,E[2]=A[2]+k[2]*B,E[3]=A[3]+k[3]*B,E},Ke.distance=w,Ke.squaredDistance=C,Ke.length=z,Ke.squaredLength=x,Ke.negate=function(E,A){return E[0]=-A[0],E[1]=-A[1],E[2]=-A[2],E[3]=-A[3],E},Ke.inverse=function(E,A){return E[0]=1/A[0],E[1]=1/A[1],E[2]=1/A[2],E[3]=1/A[3],E},Ke.normalize=function(E,A){var k=A[0],B=A[1],$=A[2],H=A[3],G=k*k+B*B+$*$+H*H;return G>0&&(G=1/Math.sqrt(G)),E[0]=k*G,E[1]=B*G,E[2]=$*G,E[3]=H*G,E},Ke.dot=function(E,A){return E[0]*A[0]+E[1]*A[1]+E[2]*A[2]+E[3]*A[3]},Ke.cross=function(E,A,k,B){var $=k[0]*B[1]-k[1]*B[0],H=k[0]*B[2]-k[2]*B[0],G=k[0]*B[3]-k[3]*B[0],U=k[1]*B[2]-k[2]*B[1],Y=k[1]*B[3]-k[3]*B[1],Q=k[2]*B[3]-k[3]*B[2],se=A[0],xe=A[1],pe=A[2],ge=A[3];return E[0]=xe*Q-pe*Y+ge*U,E[1]=-se*Q+pe*G-ge*H,E[2]=se*Y-xe*G+ge*$,E[3]=-se*U+xe*H-pe*$,E},Ke.lerp=function(E,A,k,B){var $=A[0],H=A[1],G=A[2],U=A[3];return E[0]=$+B*(k[0]-$),E[1]=H+B*(k[1]-H),E[2]=G+B*(k[2]-G),E[3]=U+B*(k[3]-U),E},Ke.random=function(E,A){var k,B,$,H,G,U;A=A||1;do G=(k=2*i.RANDOM()-1)*k+(B=2*i.RANDOM()-1)*B;while(G>=1);do U=($=2*i.RANDOM()-1)*$+(H=2*i.RANDOM()-1)*H;while(U>=1);var Y=Math.sqrt((1-G)/U);return E[0]=A*k,E[1]=A*B,E[2]=A*$*Y,E[3]=A*H*Y,E},Ke.transformMat4=function(E,A,k){var B=A[0],$=A[1],H=A[2],G=A[3];return E[0]=k[0]*B+k[4]*$+k[8]*H+k[12]*G,E[1]=k[1]*B+k[5]*$+k[9]*H+k[13]*G,E[2]=k[2]*B+k[6]*$+k[10]*H+k[14]*G,E[3]=k[3]*B+k[7]*$+k[11]*H+k[15]*G,E},Ke.transformQuat=function(E,A,k){var B=A[0],$=A[1],H=A[2],G=k[0],U=k[1],Y=k[2],Q=k[3],se=Q*B+U*H-Y*$,xe=Q*$+Y*B-G*H,pe=Q*H+G*$-U*B,ge=-G*B-U*$-Y*H;return E[0]=se*Q+ge*-G+xe*-Y-pe*-U,E[1]=xe*Q+ge*-U+pe*-G-se*-Y,E[2]=pe*Q+ge*-Y+se*-U-xe*-G,E[3]=A[3],E},Ke.zero=function(E){return E[0]=0,E[1]=0,E[2]=0,E[3]=0,E},Ke.str=function(E){return"vec4("+E[0]+", "+E[1]+", "+E[2]+", "+E[3]+")"},Ke.exactEquals=function(E,A){return E[0]===A[0]&&E[1]===A[1]&&E[2]===A[2]&&E[3]===A[3]},Ke.equals=function(E,A){var k=E[0],B=E[1],$=E[2],H=E[3],G=A[0],U=A[1],Y=A[2],Q=A[3];return Math.abs(k-G)<=i.EPSILON*Math.max(1,Math.abs(k),Math.abs(G))&&Math.abs(B-U)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(U))&&Math.abs($-Y)<=i.EPSILON*Math.max(1,Math.abs($),Math.abs(Y))&&Math.abs(H-Q)<=i.EPSILON*Math.max(1,Math.abs(H),Math.abs(Q))},Ke.forEach=Ke.sqrLen=Ke.len=Ke.sqrDist=Ke.dist=Ke.div=Ke.mul=Ke.sub=void 0;var i=function(E,A){if(E&&E.__esModule)return E;if(E===null||u(E)!=="object"&&typeof E!="function")return{default:E};var k=a(void 0);if(k&&k.has(E))return k.get(E);var B={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in E)if(H!=="default"&&Object.prototype.hasOwnProperty.call(E,H)){var G=$?Object.getOwnPropertyDescriptor(E,H):null;G&&(G.get||G.set)?Object.defineProperty(B,H,G):B[H]=E[H]}return B.default=E,k&&k.set(E,B),B}(X());function a(E){if(typeof WeakMap!="function")return null;var A=new WeakMap,k=new WeakMap;return(a=function(B){return B?k:A})(E)}function h(){var E=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}function g(E,A,k){return E[0]=A[0]-k[0],E[1]=A[1]-k[1],E[2]=A[2]-k[2],E[3]=A[3]-k[3],E}function f(E,A,k){return E[0]=A[0]*k[0],E[1]=A[1]*k[1],E[2]=A[2]*k[2],E[3]=A[3]*k[3],E}function _(E,A,k){return E[0]=A[0]/k[0],E[1]=A[1]/k[1],E[2]=A[2]/k[2],E[3]=A[3]/k[3],E}function w(E,A){return Math.hypot(A[0]-E[0],A[1]-E[1],A[2]-E[2],A[3]-E[3])}function C(E,A){var k=A[0]-E[0],B=A[1]-E[1],$=A[2]-E[2],H=A[3]-E[3];return k*k+B*B+$*$+H*H}function z(E){return Math.hypot(E[0],E[1],E[2],E[3])}function x(E){var A=E[0],k=E[1],B=E[2],$=E[3];return A*A+k*k+B*B+$*$}Ke.sub=g,Ke.mul=f,Ke.div=_,Ke.dist=w,Ke.sqrDist=C,Ke.len=z,Ke.sqrLen=x;var T,I=(T=h(),function(E,A,k,B,$,H){var G,U;for(A||(A=4),k||(k=0),U=B?Math.min(B*A+k,E.length):E.length,G=k;G<U;G+=A)T[0]=E[G],T[1]=E[G+1],T[2]=E[G+2],T[3]=E[G+3],$(T,T,H),E[G]=T[0],E[G+1]=T[1],E[G+2]=T[2],E[G+3]=T[3];return E});return Ke.forEach=I,Ke}function yt(){if(Be)return ze;function u(me){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},u(me)}Be=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.create=w,ze.identity=function(me){return me[0]=0,me[1]=0,me[2]=0,me[3]=1,me},ze.setAxisAngle=C,ze.getAxisAngle=function(me,Ie){var Fe=2*Math.acos(Ie[3]),Ne=Math.sin(Fe/2);return Ne>i.EPSILON?(me[0]=Ie[0]/Ne,me[1]=Ie[1]/Ne,me[2]=Ie[2]/Ne):(me[0]=1,me[1]=0,me[2]=0),Fe},ze.getAngle=function(me,Ie){var Fe=k(me,Ie);return Math.acos(2*Fe*Fe-1)},ze.multiply=z,ze.rotateX=function(me,Ie,Fe){Fe*=.5;var Ne=Ie[0],He=Ie[1],et=Ie[2],rt=Ie[3],Ye=Math.sin(Fe),_t=Math.cos(Fe);return me[0]=Ne*_t+rt*Ye,me[1]=He*_t+et*Ye,me[2]=et*_t-He*Ye,me[3]=rt*_t-Ne*Ye,me},ze.rotateY=function(me,Ie,Fe){Fe*=.5;var Ne=Ie[0],He=Ie[1],et=Ie[2],rt=Ie[3],Ye=Math.sin(Fe),_t=Math.cos(Fe);return me[0]=Ne*_t-et*Ye,me[1]=He*_t+rt*Ye,me[2]=et*_t+Ne*Ye,me[3]=rt*_t-He*Ye,me},ze.rotateZ=function(me,Ie,Fe){Fe*=.5;var Ne=Ie[0],He=Ie[1],et=Ie[2],rt=Ie[3],Ye=Math.sin(Fe),_t=Math.cos(Fe);return me[0]=Ne*_t+He*Ye,me[1]=He*_t-Ne*Ye,me[2]=et*_t+rt*Ye,me[3]=rt*_t-et*Ye,me},ze.calculateW=function(me,Ie){var Fe=Ie[0],Ne=Ie[1],He=Ie[2];return me[0]=Fe,me[1]=Ne,me[2]=He,me[3]=Math.sqrt(Math.abs(1-Fe*Fe-Ne*Ne-He*He)),me},ze.exp=x,ze.ln=T,ze.pow=function(me,Ie,Fe){return T(me,Ie),A(me,me,Fe),x(me,me),me},ze.slerp=I,ze.random=function(me){var Ie=i.RANDOM(),Fe=i.RANDOM(),Ne=i.RANDOM(),He=Math.sqrt(1-Ie),et=Math.sqrt(Ie);return me[0]=He*Math.sin(2*Math.PI*Fe),me[1]=He*Math.cos(2*Math.PI*Fe),me[2]=et*Math.sin(2*Math.PI*Ne),me[3]=et*Math.cos(2*Math.PI*Ne),me},ze.invert=function(me,Ie){var Fe=Ie[0],Ne=Ie[1],He=Ie[2],et=Ie[3],rt=Fe*Fe+Ne*Ne+He*He+et*et,Ye=rt?1/rt:0;return me[0]=-Fe*Ye,me[1]=-Ne*Ye,me[2]=-He*Ye,me[3]=et*Ye,me},ze.conjugate=function(me,Ie){return me[0]=-Ie[0],me[1]=-Ie[1],me[2]=-Ie[2],me[3]=Ie[3],me},ze.fromMat3=E,ze.fromEuler=function(me,Ie,Fe,Ne){var He=.5*Math.PI/180;Ie*=He,Fe*=He,Ne*=He;var et=Math.sin(Ie),rt=Math.cos(Ie),Ye=Math.sin(Fe),_t=Math.cos(Fe),zt=Math.sin(Ne),ht=Math.cos(Ne);return me[0]=et*_t*ht-rt*Ye*zt,me[1]=rt*Ye*ht+et*_t*zt,me[2]=rt*_t*zt-et*Ye*ht,me[3]=rt*_t*ht+et*Ye*zt,me},ze.str=function(me){return"quat("+me[0]+", "+me[1]+", "+me[2]+", "+me[3]+")"},ze.setAxes=ze.sqlerp=ze.rotationTo=ze.equals=ze.exactEquals=ze.normalize=ze.sqrLen=ze.squaredLength=ze.len=ze.length=ze.lerp=ze.dot=ze.scale=ze.mul=ze.add=ze.set=ze.copy=ze.fromValues=ze.clone=void 0;var i=_(X()),a=_(Ce()),h=_(Ue()),g=_(xt());function f(me){if(typeof WeakMap!="function")return null;var Ie=new WeakMap,Fe=new WeakMap;return(f=function(Ne){return Ne?Fe:Ie})(me)}function _(me,Ie){if(me&&me.__esModule)return me;if(me===null||u(me)!=="object"&&typeof me!="function")return{default:me};var Fe=f(Ie);if(Fe&&Fe.has(me))return Fe.get(me);var Ne={},He=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var et in me)if(et!=="default"&&Object.prototype.hasOwnProperty.call(me,et)){var rt=He?Object.getOwnPropertyDescriptor(me,et):null;rt&&(rt.get||rt.set)?Object.defineProperty(Ne,et,rt):Ne[et]=me[et]}return Ne.default=me,Fe&&Fe.set(me,Ne),Ne}function w(){var me=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0),me[3]=1,me}function C(me,Ie,Fe){Fe*=.5;var Ne=Math.sin(Fe);return me[0]=Ne*Ie[0],me[1]=Ne*Ie[1],me[2]=Ne*Ie[2],me[3]=Math.cos(Fe),me}function z(me,Ie,Fe){var Ne=Ie[0],He=Ie[1],et=Ie[2],rt=Ie[3],Ye=Fe[0],_t=Fe[1],zt=Fe[2],ht=Fe[3];return me[0]=Ne*ht+rt*Ye+He*zt-et*_t,me[1]=He*ht+rt*_t+et*Ye-Ne*zt,me[2]=et*ht+rt*zt+Ne*_t-He*Ye,me[3]=rt*ht-Ne*Ye-He*_t-et*zt,me}function x(me,Ie){var Fe=Ie[0],Ne=Ie[1],He=Ie[2],et=Ie[3],rt=Math.sqrt(Fe*Fe+Ne*Ne+He*He),Ye=Math.exp(et),_t=rt>0?Ye*Math.sin(rt)/rt:0;return me[0]=Fe*_t,me[1]=Ne*_t,me[2]=He*_t,me[3]=Ye*Math.cos(rt),me}function T(me,Ie){var Fe=Ie[0],Ne=Ie[1],He=Ie[2],et=Ie[3],rt=Math.sqrt(Fe*Fe+Ne*Ne+He*He),Ye=rt>0?Math.atan2(rt,et)/rt:0;return me[0]=Fe*Ye,me[1]=Ne*Ye,me[2]=He*Ye,me[3]=.5*Math.log(Fe*Fe+Ne*Ne+He*He+et*et),me}function I(me,Ie,Fe,Ne){var He,et,rt,Ye,_t,zt=Ie[0],ht=Ie[1],ei=Ie[2],Vt=Ie[3],Bt=Fe[0],Ct=Fe[1],yi=Fe[2],Kt=Fe[3];return(et=zt*Bt+ht*Ct+ei*yi+Vt*Kt)<0&&(et=-et,Bt=-Bt,Ct=-Ct,yi=-yi,Kt=-Kt),1-et>i.EPSILON?(He=Math.acos(et),rt=Math.sin(He),Ye=Math.sin((1-Ne)*He)/rt,_t=Math.sin(Ne*He)/rt):(Ye=1-Ne,_t=Ne),me[0]=Ye*zt+_t*Bt,me[1]=Ye*ht+_t*Ct,me[2]=Ye*ei+_t*yi,me[3]=Ye*Vt+_t*Kt,me}function E(me,Ie){var Fe,Ne=Ie[0]+Ie[4]+Ie[8];if(Ne>0)Fe=Math.sqrt(Ne+1),me[3]=.5*Fe,me[0]=(Ie[5]-Ie[7])*(Fe=.5/Fe),me[1]=(Ie[6]-Ie[2])*Fe,me[2]=(Ie[1]-Ie[3])*Fe;else{var He=0;Ie[4]>Ie[0]&&(He=1),Ie[8]>Ie[3*He+He]&&(He=2);var et=(He+1)%3,rt=(He+2)%3;Fe=Math.sqrt(Ie[3*He+He]-Ie[3*et+et]-Ie[3*rt+rt]+1),me[He]=.5*Fe,me[3]=(Ie[3*et+rt]-Ie[3*rt+et])*(Fe=.5/Fe),me[et]=(Ie[3*et+He]+Ie[3*He+et])*Fe,me[rt]=(Ie[3*rt+He]+Ie[3*He+rt])*Fe}return me}ze.clone=g.clone,ze.fromValues=g.fromValues,ze.copy=g.copy,ze.set=g.set,ze.add=g.add,ze.mul=z;var A=g.scale;ze.scale=A;var k=g.dot;ze.dot=k,ze.lerp=g.lerp;var B=g.length;ze.length=B,ze.len=B;var $=g.squaredLength;ze.squaredLength=$,ze.sqrLen=$;var H=g.normalize;ze.normalize=H,ze.exactEquals=g.exactEquals,ze.equals=g.equals;var G,U,Y,Q=(G=h.create(),U=h.fromValues(1,0,0),Y=h.fromValues(0,1,0),function(me,Ie,Fe){var Ne=h.dot(Ie,Fe);return Ne<-.999999?(h.cross(G,U,Ie),h.len(G)<1e-6&&h.cross(G,Y,Ie),h.normalize(G,G),C(me,G,Math.PI),me):Ne>.999999?(me[0]=0,me[1]=0,me[2]=0,me[3]=1,me):(h.cross(G,Ie,Fe),me[0]=G[0],me[1]=G[1],me[2]=G[2],me[3]=1+Ne,H(me,me))});ze.rotationTo=Q;var se,xe,pe=(se=w(),xe=w(),function(me,Ie,Fe,Ne,He,et){return I(se,Ie,He,et),I(xe,Fe,Ne,et),I(me,se,xe,2*et*(1-et)),me});ze.sqlerp=pe;var ge,Pe=(ge=a.create(),function(me,Ie,Fe,Ne){return ge[0]=Fe[0],ge[3]=Fe[1],ge[6]=Fe[2],ge[1]=Ne[0],ge[4]=Ne[1],ge[7]=Ne[2],ge[2]=-Ie[0],ge[5]=-Ie[1],ge[8]=-Ie[2],H(me,E(me,ge))});return ze.setAxes=Pe,ze}var Dt,bt={};function bi(){if(Dt)return bt;function u(I){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u(I)}Dt=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.create=function(){var I=new i.ARRAY_TYPE(8);return i.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},bt.clone=function(I){var E=new i.ARRAY_TYPE(8);return E[0]=I[0],E[1]=I[1],E[2]=I[2],E[3]=I[3],E[4]=I[4],E[5]=I[5],E[6]=I[6],E[7]=I[7],E},bt.fromValues=function(I,E,A,k,B,$,H,G){var U=new i.ARRAY_TYPE(8);return U[0]=I,U[1]=E,U[2]=A,U[3]=k,U[4]=B,U[5]=$,U[6]=H,U[7]=G,U},bt.fromRotationTranslationValues=function(I,E,A,k,B,$,H){var G=new i.ARRAY_TYPE(8);G[0]=I,G[1]=E,G[2]=A,G[3]=k;var U=.5*B,Y=.5*$,Q=.5*H;return G[4]=U*k+Y*A-Q*E,G[5]=Y*k+Q*I-U*A,G[6]=Q*k+U*E-Y*I,G[7]=-U*I-Y*E-Q*A,G},bt.fromRotationTranslation=_,bt.fromTranslation=function(I,E){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*E[0],I[5]=.5*E[1],I[6]=.5*E[2],I[7]=0,I},bt.fromRotation=function(I,E){return I[0]=E[0],I[1]=E[1],I[2]=E[2],I[3]=E[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},bt.fromMat4=function(I,E){var A=a.create();h.getRotation(A,E);var k=new i.ARRAY_TYPE(3);return h.getTranslation(k,E),_(I,A,k),I},bt.copy=w,bt.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},bt.set=function(I,E,A,k,B,$,H,G,U){return I[0]=E,I[1]=A,I[2]=k,I[3]=B,I[4]=$,I[5]=H,I[6]=G,I[7]=U,I},bt.getDual=function(I,E){return I[0]=E[4],I[1]=E[5],I[2]=E[6],I[3]=E[7],I},bt.setDual=function(I,E){return I[4]=E[0],I[5]=E[1],I[6]=E[2],I[7]=E[3],I},bt.getTranslation=function(I,E){var A=E[4],k=E[5],B=E[6],$=E[7],H=-E[0],G=-E[1],U=-E[2],Y=E[3];return I[0]=2*(A*Y+$*H+k*U-B*G),I[1]=2*(k*Y+$*G+B*H-A*U),I[2]=2*(B*Y+$*U+A*G-k*H),I},bt.translate=function(I,E,A){var k=E[0],B=E[1],$=E[2],H=E[3],G=.5*A[0],U=.5*A[1],Y=.5*A[2],Q=E[4],se=E[5],xe=E[6],pe=E[7];return I[0]=k,I[1]=B,I[2]=$,I[3]=H,I[4]=H*G+B*Y-$*U+Q,I[5]=H*U+$*G-k*Y+se,I[6]=H*Y+k*U-B*G+xe,I[7]=-k*G-B*U-$*Y+pe,I},bt.rotateX=function(I,E,A){var k=-E[0],B=-E[1],$=-E[2],H=E[3],G=E[4],U=E[5],Y=E[6],Q=E[7],se=G*H+Q*k+U*$-Y*B,xe=U*H+Q*B+Y*k-G*$,pe=Y*H+Q*$+G*B-U*k,ge=Q*H-G*k-U*B-Y*$;return a.rotateX(I,E,A),I[4]=se*(H=I[3])+ge*(k=I[0])+xe*($=I[2])-pe*(B=I[1]),I[5]=xe*H+ge*B+pe*k-se*$,I[6]=pe*H+ge*$+se*B-xe*k,I[7]=ge*H-se*k-xe*B-pe*$,I},bt.rotateY=function(I,E,A){var k=-E[0],B=-E[1],$=-E[2],H=E[3],G=E[4],U=E[5],Y=E[6],Q=E[7],se=G*H+Q*k+U*$-Y*B,xe=U*H+Q*B+Y*k-G*$,pe=Y*H+Q*$+G*B-U*k,ge=Q*H-G*k-U*B-Y*$;return a.rotateY(I,E,A),I[4]=se*(H=I[3])+ge*(k=I[0])+xe*($=I[2])-pe*(B=I[1]),I[5]=xe*H+ge*B+pe*k-se*$,I[6]=pe*H+ge*$+se*B-xe*k,I[7]=ge*H-se*k-xe*B-pe*$,I},bt.rotateZ=function(I,E,A){var k=-E[0],B=-E[1],$=-E[2],H=E[3],G=E[4],U=E[5],Y=E[6],Q=E[7],se=G*H+Q*k+U*$-Y*B,xe=U*H+Q*B+Y*k-G*$,pe=Y*H+Q*$+G*B-U*k,ge=Q*H-G*k-U*B-Y*$;return a.rotateZ(I,E,A),I[4]=se*(H=I[3])+ge*(k=I[0])+xe*($=I[2])-pe*(B=I[1]),I[5]=xe*H+ge*B+pe*k-se*$,I[6]=pe*H+ge*$+se*B-xe*k,I[7]=ge*H-se*k-xe*B-pe*$,I},bt.rotateByQuatAppend=function(I,E,A){var k=A[0],B=A[1],$=A[2],H=A[3],G=E[0],U=E[1],Y=E[2],Q=E[3];return I[0]=G*H+Q*k+U*$-Y*B,I[1]=U*H+Q*B+Y*k-G*$,I[2]=Y*H+Q*$+G*B-U*k,I[3]=Q*H-G*k-U*B-Y*$,I[4]=(G=E[4])*H+(Q=E[7])*k+(U=E[5])*$-(Y=E[6])*B,I[5]=U*H+Q*B+Y*k-G*$,I[6]=Y*H+Q*$+G*B-U*k,I[7]=Q*H-G*k-U*B-Y*$,I},bt.rotateByQuatPrepend=function(I,E,A){var k=E[0],B=E[1],$=E[2],H=E[3],G=A[0],U=A[1],Y=A[2],Q=A[3];return I[0]=k*Q+H*G+B*Y-$*U,I[1]=B*Q+H*U+$*G-k*Y,I[2]=$*Q+H*Y+k*U-B*G,I[3]=H*Q-k*G-B*U-$*Y,I[4]=k*(Q=A[7])+H*(G=A[4])+B*(Y=A[6])-$*(U=A[5]),I[5]=B*Q+H*U+$*G-k*Y,I[6]=$*Q+H*Y+k*U-B*G,I[7]=H*Q-k*G-B*U-$*Y,I},bt.rotateAroundAxis=function(I,E,A,k){if(Math.abs(k)<i.EPSILON)return w(I,E);var B=Math.hypot(A[0],A[1],A[2]);k*=.5;var $=Math.sin(k),H=$*A[0]/B,G=$*A[1]/B,U=$*A[2]/B,Y=Math.cos(k),Q=E[0],se=E[1],xe=E[2],pe=E[3];I[0]=Q*Y+pe*H+se*U-xe*G,I[1]=se*Y+pe*G+xe*H-Q*U,I[2]=xe*Y+pe*U+Q*G-se*H,I[3]=pe*Y-Q*H-se*G-xe*U;var ge=E[4],Pe=E[5],me=E[6],Ie=E[7];return I[4]=ge*Y+Ie*H+Pe*U-me*G,I[5]=Pe*Y+Ie*G+me*H-ge*U,I[6]=me*Y+Ie*U+ge*G-Pe*H,I[7]=Ie*Y-ge*H-Pe*G-me*U,I},bt.add=function(I,E,A){return I[0]=E[0]+A[0],I[1]=E[1]+A[1],I[2]=E[2]+A[2],I[3]=E[3]+A[3],I[4]=E[4]+A[4],I[5]=E[5]+A[5],I[6]=E[6]+A[6],I[7]=E[7]+A[7],I},bt.multiply=C,bt.scale=function(I,E,A){return I[0]=E[0]*A,I[1]=E[1]*A,I[2]=E[2]*A,I[3]=E[3]*A,I[4]=E[4]*A,I[5]=E[5]*A,I[6]=E[6]*A,I[7]=E[7]*A,I},bt.lerp=function(I,E,A,k){var B=1-k;return z(E,A)<0&&(k=-k),I[0]=E[0]*B+A[0]*k,I[1]=E[1]*B+A[1]*k,I[2]=E[2]*B+A[2]*k,I[3]=E[3]*B+A[3]*k,I[4]=E[4]*B+A[4]*k,I[5]=E[5]*B+A[5]*k,I[6]=E[6]*B+A[6]*k,I[7]=E[7]*B+A[7]*k,I},bt.invert=function(I,E){var A=T(E);return I[0]=-E[0]/A,I[1]=-E[1]/A,I[2]=-E[2]/A,I[3]=E[3]/A,I[4]=-E[4]/A,I[5]=-E[5]/A,I[6]=-E[6]/A,I[7]=E[7]/A,I},bt.conjugate=function(I,E){return I[0]=-E[0],I[1]=-E[1],I[2]=-E[2],I[3]=E[3],I[4]=-E[4],I[5]=-E[5],I[6]=-E[6],I[7]=E[7],I},bt.normalize=function(I,E){var A=T(E);if(A>0){A=Math.sqrt(A);var k=E[0]/A,B=E[1]/A,$=E[2]/A,H=E[3]/A,G=E[4],U=E[5],Y=E[6],Q=E[7],se=k*G+B*U+$*Y+H*Q;I[0]=k,I[1]=B,I[2]=$,I[3]=H,I[4]=(G-k*se)/A,I[5]=(U-B*se)/A,I[6]=(Y-$*se)/A,I[7]=(Q-H*se)/A}return I},bt.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},bt.exactEquals=function(I,E){return I[0]===E[0]&&I[1]===E[1]&&I[2]===E[2]&&I[3]===E[3]&&I[4]===E[4]&&I[5]===E[5]&&I[6]===E[6]&&I[7]===E[7]},bt.equals=function(I,E){var A=I[0],k=I[1],B=I[2],$=I[3],H=I[4],G=I[5],U=I[6],Y=I[7],Q=E[0],se=E[1],xe=E[2],pe=E[3],ge=E[4],Pe=E[5],me=E[6],Ie=E[7];return Math.abs(A-Q)<=i.EPSILON*Math.max(1,Math.abs(A),Math.abs(Q))&&Math.abs(k-se)<=i.EPSILON*Math.max(1,Math.abs(k),Math.abs(se))&&Math.abs(B-xe)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(xe))&&Math.abs($-pe)<=i.EPSILON*Math.max(1,Math.abs($),Math.abs(pe))&&Math.abs(H-ge)<=i.EPSILON*Math.max(1,Math.abs(H),Math.abs(ge))&&Math.abs(G-Pe)<=i.EPSILON*Math.max(1,Math.abs(G),Math.abs(Pe))&&Math.abs(U-me)<=i.EPSILON*Math.max(1,Math.abs(U),Math.abs(me))&&Math.abs(Y-Ie)<=i.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ie))},bt.sqrLen=bt.squaredLength=bt.len=bt.length=bt.dot=bt.mul=bt.setReal=bt.getReal=void 0;var i=f(X()),a=f(yt()),h=f(We());function g(I){if(typeof WeakMap!="function")return null;var E=new WeakMap,A=new WeakMap;return(g=function(k){return k?A:E})(I)}function f(I,E){if(I&&I.__esModule)return I;if(I===null||u(I)!=="object"&&typeof I!="function")return{default:I};var A=g(E);if(A&&A.has(I))return A.get(I);var k={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in I)if($!=="default"&&Object.prototype.hasOwnProperty.call(I,$)){var H=B?Object.getOwnPropertyDescriptor(I,$):null;H&&(H.get||H.set)?Object.defineProperty(k,$,H):k[$]=I[$]}return k.default=I,A&&A.set(I,k),k}function _(I,E,A){var k=.5*A[0],B=.5*A[1],$=.5*A[2],H=E[0],G=E[1],U=E[2],Y=E[3];return I[0]=H,I[1]=G,I[2]=U,I[3]=Y,I[4]=k*Y+B*U-$*G,I[5]=B*Y+$*H-k*U,I[6]=$*Y+k*G-B*H,I[7]=-k*H-B*G-$*U,I}function w(I,E){return I[0]=E[0],I[1]=E[1],I[2]=E[2],I[3]=E[3],I[4]=E[4],I[5]=E[5],I[6]=E[6],I[7]=E[7],I}function C(I,E,A){var k=E[0],B=E[1],$=E[2],H=E[3],G=A[4],U=A[5],Y=A[6],Q=A[7],se=E[4],xe=E[5],pe=E[6],ge=E[7],Pe=A[0],me=A[1],Ie=A[2],Fe=A[3];return I[0]=k*Fe+H*Pe+B*Ie-$*me,I[1]=B*Fe+H*me+$*Pe-k*Ie,I[2]=$*Fe+H*Ie+k*me-B*Pe,I[3]=H*Fe-k*Pe-B*me-$*Ie,I[4]=k*Q+H*G+B*Y-$*U+se*Fe+ge*Pe+xe*Ie-pe*me,I[5]=B*Q+H*U+$*G-k*Y+xe*Fe+ge*me+pe*Pe-se*Ie,I[6]=$*Q+H*Y+k*U-B*G+pe*Fe+ge*Ie+se*me-xe*Pe,I[7]=H*Q-k*G-B*U-$*Y+ge*Fe-se*Pe-xe*me-pe*Ie,I}bt.getReal=a.copy,bt.setReal=a.copy,bt.mul=C;var z=a.dot;bt.dot=z;var x=a.length;bt.length=x,bt.len=x;var T=a.squaredLength;return bt.squaredLength=T,bt.sqrLen=T,bt}var ji,Qt,Nt={};function Sr(){if(ji)return Nt;function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(E)}ji=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.create=h,Nt.clone=function(E){var A=new i.ARRAY_TYPE(2);return A[0]=E[0],A[1]=E[1],A},Nt.fromValues=function(E,A){var k=new i.ARRAY_TYPE(2);return k[0]=E,k[1]=A,k},Nt.copy=function(E,A){return E[0]=A[0],E[1]=A[1],E},Nt.set=function(E,A,k){return E[0]=A,E[1]=k,E},Nt.add=function(E,A,k){return E[0]=A[0]+k[0],E[1]=A[1]+k[1],E},Nt.subtract=g,Nt.multiply=f,Nt.divide=_,Nt.ceil=function(E,A){return E[0]=Math.ceil(A[0]),E[1]=Math.ceil(A[1]),E},Nt.floor=function(E,A){return E[0]=Math.floor(A[0]),E[1]=Math.floor(A[1]),E},Nt.min=function(E,A,k){return E[0]=Math.min(A[0],k[0]),E[1]=Math.min(A[1],k[1]),E},Nt.max=function(E,A,k){return E[0]=Math.max(A[0],k[0]),E[1]=Math.max(A[1],k[1]),E},Nt.round=function(E,A){return E[0]=Math.round(A[0]),E[1]=Math.round(A[1]),E},Nt.scale=function(E,A,k){return E[0]=A[0]*k,E[1]=A[1]*k,E},Nt.scaleAndAdd=function(E,A,k,B){return E[0]=A[0]+k[0]*B,E[1]=A[1]+k[1]*B,E},Nt.distance=w,Nt.squaredDistance=C,Nt.length=z,Nt.squaredLength=x,Nt.negate=function(E,A){return E[0]=-A[0],E[1]=-A[1],E},Nt.inverse=function(E,A){return E[0]=1/A[0],E[1]=1/A[1],E},Nt.normalize=function(E,A){var k=A[0],B=A[1],$=k*k+B*B;return $>0&&($=1/Math.sqrt($)),E[0]=A[0]*$,E[1]=A[1]*$,E},Nt.dot=function(E,A){return E[0]*A[0]+E[1]*A[1]},Nt.cross=function(E,A,k){var B=A[0]*k[1]-A[1]*k[0];return E[0]=E[1]=0,E[2]=B,E},Nt.lerp=function(E,A,k,B){var $=A[0],H=A[1];return E[0]=$+B*(k[0]-$),E[1]=H+B*(k[1]-H),E},Nt.random=function(E,A){A=A||1;var k=2*i.RANDOM()*Math.PI;return E[0]=Math.cos(k)*A,E[1]=Math.sin(k)*A,E},Nt.transformMat2=function(E,A,k){var B=A[0],$=A[1];return E[0]=k[0]*B+k[2]*$,E[1]=k[1]*B+k[3]*$,E},Nt.transformMat2d=function(E,A,k){var B=A[0],$=A[1];return E[0]=k[0]*B+k[2]*$+k[4],E[1]=k[1]*B+k[3]*$+k[5],E},Nt.transformMat3=function(E,A,k){var B=A[0],$=A[1];return E[0]=k[0]*B+k[3]*$+k[6],E[1]=k[1]*B+k[4]*$+k[7],E},Nt.transformMat4=function(E,A,k){var B=A[0],$=A[1];return E[0]=k[0]*B+k[4]*$+k[12],E[1]=k[1]*B+k[5]*$+k[13],E},Nt.rotate=function(E,A,k,B){var $=A[0]-k[0],H=A[1]-k[1],G=Math.sin(B),U=Math.cos(B);return E[0]=$*U-H*G+k[0],E[1]=$*G+H*U+k[1],E},Nt.angle=function(E,A){var k=E[0],B=E[1],$=A[0],H=A[1],G=Math.sqrt(k*k+B*B)*Math.sqrt($*$+H*H);return Math.acos(Math.min(Math.max(G&&(k*$+B*H)/G,-1),1))},Nt.zero=function(E){return E[0]=0,E[1]=0,E},Nt.str=function(E){return"vec2("+E[0]+", "+E[1]+")"},Nt.exactEquals=function(E,A){return E[0]===A[0]&&E[1]===A[1]},Nt.equals=function(E,A){var k=E[0],B=E[1],$=A[0],H=A[1];return Math.abs(k-$)<=i.EPSILON*Math.max(1,Math.abs(k),Math.abs($))&&Math.abs(B-H)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(H))},Nt.forEach=Nt.sqrLen=Nt.sqrDist=Nt.dist=Nt.div=Nt.mul=Nt.sub=Nt.len=void 0;var i=function(E,A){if(E&&E.__esModule)return E;if(E===null||u(E)!=="object"&&typeof E!="function")return{default:E};var k=a(void 0);if(k&&k.has(E))return k.get(E);var B={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in E)if(H!=="default"&&Object.prototype.hasOwnProperty.call(E,H)){var G=$?Object.getOwnPropertyDescriptor(E,H):null;G&&(G.get||G.set)?Object.defineProperty(B,H,G):B[H]=E[H]}return B.default=E,k&&k.set(E,B),B}(X());function a(E){if(typeof WeakMap!="function")return null;var A=new WeakMap,k=new WeakMap;return(a=function(B){return B?k:A})(E)}function h(){var E=new i.ARRAY_TYPE(2);return i.ARRAY_TYPE!=Float32Array&&(E[0]=0,E[1]=0),E}function g(E,A,k){return E[0]=A[0]-k[0],E[1]=A[1]-k[1],E}function f(E,A,k){return E[0]=A[0]*k[0],E[1]=A[1]*k[1],E}function _(E,A,k){return E[0]=A[0]/k[0],E[1]=A[1]/k[1],E}function w(E,A){return Math.hypot(A[0]-E[0],A[1]-E[1])}function C(E,A){var k=A[0]-E[0],B=A[1]-E[1];return k*k+B*B}function z(E){return Math.hypot(E[0],E[1])}function x(E){var A=E[0],k=E[1];return A*A+k*k}Nt.len=z,Nt.sub=g,Nt.mul=f,Nt.div=_,Nt.dist=w,Nt.sqrDist=C,Nt.sqrLen=x;var T,I=(T=h(),function(E,A,k,B,$,H){var G,U;for(A||(A=2),k||(k=0),U=B?Math.min(B*A+k,E.length):E.length,G=k;G<U;G+=A)T[0]=E[G],T[1]=E[G+1],$(T,T,H),E[G]=T[0],E[G+1]=T[1];return E});return Nt.forEach=I,Nt}function Ui(){if(Qt)return L;function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},u(E)}Qt=1,Object.defineProperty(L,"__esModule",{value:!0}),L.vec4=L.vec3=L.vec2=L.quat2=L.quat=L.mat4=L.mat3=L.mat2d=L.mat2=L.glMatrix=void 0;var i=I(X());L.glMatrix=i;var a=I(ie());L.mat2=a;var h=I(fe());L.mat2d=h;var g=I(Ce());L.mat3=g;var f=I(We());L.mat4=f;var _=I(yt());L.quat=_;var w=I(bi());L.quat2=w;var C=I(Sr());L.vec2=C;var z=I(Ue());L.vec3=z;var x=I(xt());function T(E){if(typeof WeakMap!="function")return null;var A=new WeakMap,k=new WeakMap;return(T=function(B){return B?k:A})(E)}function I(E,A){if(E&&E.__esModule)return E;if(E===null||u(E)!=="object"&&typeof E!="function")return{default:E};var k=T(A);if(k&&k.has(E))return k.get(E);var B={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in E)if(H!=="default"&&Object.prototype.hasOwnProperty.call(E,H)){var G=$?Object.getOwnPropertyDescriptor(E,H):null;G&&(G.get||G.set)?Object.defineProperty(B,H,G):B[H]=E[H]}return B.default=E,k&&k.set(E,B),B}return L.vec4=x,L}var ci,ur,cn,Di,Te=Ui(),On=function(){if(ur)return ci;function u(i,a,h,g){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(g-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=a,this.p2x=h,this.p2y=g}return ur=1,ci=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,a){if(a===void 0&&(a=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,g=0;g<8;g++){var f=this.sampleCurveX(h)-i;if(Math.abs(f)<a)return h;var _=this.sampleCurveDerivativeX(h);if(Math.abs(_)<1e-6)break;h-=f/_}var w=0,C=1;for(h=i,g=0;g<20&&(f=this.sampleCurveX(h),!(Math.abs(f-i)<a));g++)i>f?w=h:C=h,h=.5*(C-w)+w;return h},solve:function(i,a){return this.sampleCurveY(this.solveCurveX(i,a))}},ci}(),Bn=M(On);function En(){if(Di)return cn;function u(i,a){this.x=i,this.y=a}return Di=1,cn=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,a){return this.clone()._rotateAround(i,a)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var a=i.x-this.x,h=i.y-this.y;return a*a+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,a){return Math.atan2(this.x*a-this.y*i,this.x*i+this.y*a)},_matMult:function(i){var a=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=a,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var a=Math.cos(i),h=Math.sin(i),g=h*this.x+a*this.y;return this.x=a*this.x-h*this.y,this.y=g,this},_rotateAround:function(i,a){var h=Math.cos(i),g=Math.sin(i),f=a.y+g*(this.x-a.x)+h*(this.y-a.y);return this.x=a.x+h*(this.x-a.x)-g*(this.y-a.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(i){return i instanceof u?i:Array.isArray(i)?new u(i[0],i[1]):i},cn}var Pt=M(En());function Jn(u,i){if(Array.isArray(u)){if(!Array.isArray(i)||u.length!==i.length)return!1;for(let a=0;a<u.length;a++)if(!Jn(u[a],i[a]))return!1;return!0}if(typeof u=="object"&&u!==null&&i!==null){if(typeof i!="object"||Object.keys(u).length!==Object.keys(i).length)return!1;for(const a in u)if(!Jn(u[a],i[a]))return!1;return!0}return u===i}const Xi=Math.PI/180,lo=180/Math.PI;function Oi(u){return u*Xi}function un(u){return u*lo}const Xr=[[0,0],[1,0],[1,1],[0,1]];function Do(u){if(u<=0)return 0;if(u>=1)return 1;const i=u*u,a=i*u;return 4*(u<.5?a:3*(u-i)+a-.75)}function hi(u,i,a,h){const g=new Bn(u,i,a,h);return function(f){return g.solve(f)}}const Rt=hi(.25,.1,.25,1);function Ot(u,i,a){return Math.min(a,Math.max(i,u))}function sr(u,i,a){return(a=Ot((a-u)/(i-u),0,1))*a*(3-2*a)}function hr(u,i,a){const h=a-i,g=((u-i)%h+h)%h+i;return g===i?a:g}function Mr(u,i,a){if(!u.length)return a(null,[]);let h=u.length;const g=new Array(u.length);let f=null;u.forEach((_,w)=>{i(_,(C,z)=>{C&&(f=C),g[w]=z,--h==0&&a(f,g)})})}function Gi(u,...i){for(const a of i)for(const h in a)u[h]=a[h];return u}let Vr=1;function Vn(){return Vr++}function ts(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))}function bs(u,i){u.forEach(a=>{i[a]&&(i[a]=i[a].bind(i))})}function Po(u,i){return u.indexOf(i,u.length-i.length)!==-1}function ws(u,i,a){const h={};for(const g in u)h[g]=i.call(this,u[g],g,u);return h}function vo(u,i,a){const h={};for(const g in u)i.call(this,u[g],g,u)&&(h[g]=u[g]);return h}function to(u){return Array.isArray(u)?u.map(to):typeof u=="object"&&u?ws(u,to):u}const Rc={};function Yi(u){Rc[u]||(typeof console<"u",Rc[u]=!0)}function xo(u,i,a){return(a.y-u.y)*(i.x-u.x)>(i.y-u.y)*(a.x-u.x)}function Lc(u){let i=0;for(let a,h,g=0,f=u.length,_=f-1;g<f;_=g++)a=u[g],h=u[_],i+=(h.x-a.x)*(a.y+h.y);return i}function co([u,i,a]){const h=Oi(i+90),g=Oi(a);return{x:u*Math.cos(h)*Math.sin(g),y:u*Math.sin(h)*Math.sin(g),z:u*Math.cos(g),azimuthal:i,polar:a}}function io(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ka(u){const i={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,g,f)=>{const _=g||f;return i[h]=!_||_.toLowerCase(),""}),i["max-age"]){const a=parseInt(i["max-age"],10);isNaN(a)?delete i["max-age"]:i["max-age"]=a}return i}let Wl=null;function Zl(u,i){return[u[4*i],u[4*i+1],u[4*i+2],u[4*i+3]]}function Oc(u,i,a,h){for(;i<a;){const g=i+a>>1;u[g]<h?i=g+1:a=g}return i}function ut(u,i,a,h){for(;i<a;){const g=i+a>>1;u[g]<=h?i=g+1:a=g}return i}function oe(u){return u>0?1/(1.001-u):1+u}function ce(u){return u>0?1-1/(1.001-u):-u}const Se={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Se.API_URL)return null;try{const u=new URL(Se.API_URL);return u.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":u.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function je(u){return Se.API_URL_REGEX.test(u)}function De(u){return Se.API_SPRITE_REGEX.test(u)}let Ge,lt,Je,at,ft,mt;function kt(){return Ge==null&&(Ge=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ge}const Zt={now:()=>at!==void 0?at:performance.now(),setNow(u){at=u},restoreNow(){at=void 0},frame(u){const i=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(u,i=0){const{width:a,height:h}=u;ft||(ft=document.createElement("canvas"));const g=ft.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(a>ft.width||h>ft.height)&&(ft.width=a,ft.height=h),g.clearRect(-i,-i,a+2*i,h+2*i),g.drawImage(u,0,0,a,h),g.getImageData(-i,-i,a+2*i,h+2*i)},resolveURL:u=>(lt||(lt=document.createElement("a")),lt.href=u,lt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Je==null&&(Je=window.matchMedia("(prefers-reduced-motion: reduce)")),Je.matches)},hasCanvasFingerprintNoise(){if(mt!==void 0)return mt;if(!kt())return mt=!1,!1;const u=new OffscreenCanvas(85,1),i=u.getContext("2d",{willReadFrequently:!0});let a=0;for(let g=0;g<u.width;++g)i.fillStyle=`rgba(${a++},${a++},${a++}, 255)`,i.fillRect(g,0,1,1);const h=i.getImageData(0,0,u.width,u.height);a=0;for(let g=0;g<h.data.length;++g)if(g%4!=3&&a++!==h.data[g])return mt=!0,!0;return mt=!1,!1}};function ni(u,i){const a=u.indexOf("?");if(a<0)return`${u}?${new URLSearchParams(i).toString()}`;const h=new URLSearchParams(u.slice(a));for(const g in i)h.set(g,i[g]);return`${u.slice(0,a)}?${h.toString()}`}function Ii(u,i={persistentParams:[]}){const a=u.indexOf("?");if(a<0)return u;const h=new URLSearchParams,g=new URLSearchParams(u.slice(a));for(const _ of i.persistentParams){const w=g.get(_);w&&h.set(_,w)}const f=h.toString();return`${u.slice(0,a)}${f.length>0?`?${f}`:""}`}const xi="mapbox-tiles";let ki=500,zi=50;const pr=["language","worldview","jobid"];let nr,Vi;function yr(){try{return caches}catch{}}function Fr(){const u=yr();u&&nr==null&&(nr=u.open(xi))}let bn=1/0;const Fn={supported:!1,testSupport:function(u){!ca&&Ir&&(Ss?Ho(u):_n=u)}};let _n,Ir,ca=!1,Ss=!1;const Ms=typeof self<"u"?self:{};function Ho(u){const i=u.createTexture();u.bindTexture(u.TEXTURE_2D,i);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Ir),u.isContextLost())return;Fn.supported=!0}catch{}u.deleteTexture(i),ca=!0}Ms.document&&(Ir=Ms.document.createElement("img"),Ir.onload=function(){_n&&Ho(_n),_n=null,Ss=!0},Ir.onerror=function(){ca=!0,_n=null},Ir.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const nl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(nl);class ua extends Error{constructor(i,a,h){a===401&&je(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=a,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ha=io()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,ol=function(u,i){if(!(/^file:/.test(a=u.url)||/^file:/.test(ha())&&!/^\w+:/.test(a))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(h,g){const f=new AbortController,_=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:ha(),referrerPolicy:h.referrerPolicy,signal:f.signal});let w=!1,C=!1;const z=(x=_.url).indexOf("sku=")>0&&je(x);var x;h.type==="json"&&_.headers.set("Accept","application/json");const T=(E,A,k)=>{if(C)return;if(E&&E.message!=="SecurityError"&&Yi(E.toString()),A&&k)return I(A);const B=Date.now();fetch(_).then($=>{if($.ok){const H=z?$.clone():null;return I($,H,B)}return g(new ua($.statusText,$.status,h.url))}).catch($=>{$.name!=="AbortError"&&g(new Error(`${$.message} ${h.url}`))})},I=(E,A,k)=>{(h.type==="arrayBuffer"?E.arrayBuffer():h.type==="json"?E.json():E.text()).then(B=>{C||(A&&k&&function($,H,G){if(Fr(),nr==null)return;const U=ka(H.headers.get("Cache-Control")||"");if(U["no-store"])return;const Y={status:H.status,statusText:H.statusText,headers:new Headers};H.headers.forEach((xe,pe)=>Y.headers.set(pe,xe)),U["max-age"]&&Y.headers.set("Expires",new Date(G+1e3*U["max-age"]).toUTCString());const Q=Y.headers.get("Expires");if(!Q||new Date(Q).getTime()-G<42e4)return;let se=Ii($.url,{persistentParams:pr});if(H.status===206){const xe=$.headers.get("Range");if(!xe)return;Y.status=200,se=ni(se,{range:xe})}(function(xe,pe){if(Vi===void 0)try{new Response(new ReadableStream),Vi=!0}catch{Vi=!1}Vi?pe(xe.body):xe.blob().then(pe)})(H,xe=>{const pe=new Response((ge=H.status)!==200&&ge!==404&&[101,103,204,205,304].includes(ge)?null:xe,Y);var ge;Fr(),nr?.then(Pe=>Pe.put(se,pe)).catch(Pe=>Yi(Pe.message))})}(_,A,k),w=!0,g(null,B,E.headers.get("Cache-Control"),E.headers.get("Expires")))}).catch(B=>{C||g(new Error(B.message))})};return z?function(E,A){if(Fr(),nr==null)return A(null);nr.then(k=>{let B=Ii(E.url,{persistentParams:pr});const $=E.headers.get("Range");$&&(B=ni(B,{range:$})),k.match(B).then(H=>{const G=function(U){if(!U)return!1;const Y=new Date(U.headers.get("Expires")||0),Q=ka(U.headers.get("Cache-Control")||"");return Y>Date.now()&&!Q["no-cache"]}(H);k.delete(B),G&&k.put(B,H.clone()),A(null,H,G)}).catch(A)}).catch(A)}(_,T):T(null,null),{cancel:()=>{C=!0,w||f.abort()}}}(u,i);if(io()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,i,void 0,!0)}var a;return function(h,g){const f=new XMLHttpRequest;f.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const _ in h.headers)f.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=h.credentials==="include",f.onerror=()=>{g(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let _=f.response;if(h.type==="json")try{_=JSON.parse(f.response)}catch(w){return g(w)}g(null,_,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else g(new ua(f.statusText,f.status,h.url))},f.send(h.body),{cancel:()=>f.abort()}}(u,i)},Xl=function(u,i){return ol(Gi(u,{type:"arrayBuffer"}),i)};function is(u){const i=document.createElement("a");return i.href=u,i.protocol===location.protocol&&i.host===location.host}const Es="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let rs,uo;rs=[],uo=0;const Ts=function(u,i){if(Fn.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),uo>=Se.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:u,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return rs.push(f),f}uo++;let a=!1;const h=()=>{if(!a)for(a=!0,uo--;rs.length&&uo<Se.MAX_PARALLEL_IMAGE_REQUESTS;){const f=rs.shift(),{requestParameters:_,callback:w,cancelled:C}=f;C||(f.cancel=Ts(_,w).cancel)}},g=Xl(u,(f,_,w,C)=>{h(),f?i(f):_&&(self.createImageBitmap?function(z,x){const T=new Blob([new Uint8Array(z)],{type:"image/png"});createImageBitmap(T).then(I=>{x(null,I)}).catch(I=>{x(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(z,x)=>i(z,x,w,C)):function(z,x){const T=new Image;T.onload=()=>{x(null,T),URL.revokeObjectURL(T.src),T.onload=null,requestAnimationFrame(()=>{T.src=Es})},T.onerror=()=>x(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(z)],{type:"image/png"});T.src=z.byteLength?URL.createObjectURL(I):Es}(_,(z,x)=>i(z,x,w,C)))});return{cancel:()=>{g.cancel(),h()}}};var Yl,Mh,Eh,$s={exports:{}},sl={exports:{}},N={exports:{}},K=function(){if(Eh)return $s.exports;Eh=1;var u=(Yl||(Yl=1,sl.exports=function(a,h){var g,f,_,w,C,z,x,T;for(f=a.length-(g=3&a.length),_=h,C=3432918353,z=461845907,T=0;T<f;)x=255&a.charCodeAt(T)|(255&a.charCodeAt(++T))<<8|(255&a.charCodeAt(++T))<<16|(255&a.charCodeAt(++T))<<24,++T,_=27492+(65535&(w=5*(65535&(_=(_^=x=(65535&(x=(x=(65535&x)*C+(((x>>>16)*C&65535)<<16)&4294967295)<<15|x>>>17))*z+(((x>>>16)*z&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(x=0,g){case 3:x^=(255&a.charCodeAt(T+2))<<16;case 2:x^=(255&a.charCodeAt(T+1))<<8;case 1:_^=x=(65535&(x=(x=(65535&(x^=255&a.charCodeAt(T)))*C+(((x>>>16)*C&65535)<<16)&4294967295)<<15|x>>>17))*z+(((x>>>16)*z&65535)<<16)&4294967295}return _^=a.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),sl.exports),i=(Mh||(Mh=1,N.exports=function(a,h){for(var g,f=a.length,_=h^f,w=0;f>=4;)g=1540483477*(65535&(g=255&a.charCodeAt(w)|(255&a.charCodeAt(++w))<<8|(255&a.charCodeAt(++w))<<16|(255&a.charCodeAt(++w))<<24))+((1540483477*(g>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),f-=4,++w;switch(f){case 3:_^=(255&a.charCodeAt(w+2))<<16;case 2:_^=(255&a.charCodeAt(w+1))<<8;case 1:_=1540483477*(65535&(_^=255&a.charCodeAt(w)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),N.exports);return $s.exports=u,$s.exports.murmur3=u,$s.exports.murmur2=i,$s.exports}(),_e=M(K);class qe{constructor(i,...a){Gi(this,a[0]||{}),this.type=i}}class nt extends qe{constructor(i,a={}){super("error",Gi({error:i},a))}}function ot(u,i,a){a[u]&&a[u].indexOf(i)!==-1||(a[u]=a[u]||[],a[u].push(i))}function pt(u,i,a){if(a&&a[u]){const h=a[u].indexOf(i);h!==-1&&a[u].splice(h,1)}}class Jt{on(i,a){return this._listeners=this._listeners||{},ot(i,a,this._listeners),this}off(i,a){return pt(i,a,this._listeners),pt(i,a,this._oneTimeListeners),this}once(i,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},ot(i,a,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,a){const h=typeof i=="string"?new qe(i,a):i,g=h.type;if(this.listens(g)){h.target=this;const f=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const C of f)C.call(this,h);const _=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const C of _)pt(g,C,this._oneTimeListeners),C.call(this,h);const w=this._eventedParent;w&&(Gi(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(h))}else h instanceof nt;return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,a){return this._eventedParent=i,this._eventedParentData=a,this}}var si,Ut={},mi=function(){if(si)return Ut;si=1;var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(f){return(f=Math.round(f))<0?0:f>255?255:f}function a(f){return i(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function h(f){return(_=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:_>1?1:_;var _}function g(f,_,w){return w<0?w+=1:w>1&&(w-=1),6*w<1?f+(_-f)*w*6:2*w<1?_:3*w<2?f+(_-f)*(2/3-w)*6:f}try{Ut.parseCSSColor=function(f){var _,w=f.replace(/ /g,"").toLowerCase();if(w in u)return u[w].slice();if(w[0]==="#")return w.length===4?(_=parseInt(w.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:w.length===7&&(_=parseInt(w.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var C=w.indexOf("("),z=w.indexOf(")");if(C!==-1&&z+1===w.length){var x=w.substr(0,C),T=w.substr(C+1,z-(C+1)).split(","),I=1;switch(x){case"rgba":if(T.length!==4)return null;I=h(T.pop());case"rgb":return T.length!==3?null:[a(T[0]),a(T[1]),a(T[2]),I];case"hsla":if(T.length!==4)return null;I=h(T.pop());case"hsl":if(T.length!==3)return null;var E=(parseFloat(T[0])%360+360)%360/360,A=h(T[1]),k=h(T[2]),B=k<=.5?k*(A+1):k+A-k*A,$=2*k-B;return[i(255*g($,B,E+1/3)),i(255*g($,B,E)),i(255*g($,B,E-1/3)),I];default:return null}}return null}}catch{}return Ut}();class $t{constructor(i,a,h,g=1){this.r=i,this.g=a,this.b=h,this.a=g}static parse(i){if(!i)return;if(i instanceof $t)return i;if(typeof i!="string")return;const a=mi.parseCSSColor(i);return a?new $t(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[i,a,h,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(i)},${Math.round(a)},${Math.round(h)},${g})`}toRenderColor(i){const{r:a,g:h,b:g,a:f}=this;return new Ji(i,a,h,g,f)}}class Ji{constructor(i,a,h,g,f){if(i){const _=i.image.height,w=_*_;a=f===0?0:a/f*(_-1),h=f===0?0:h/f*(_-1),g=f===0?0:g/f*(_-1);const C=Math.floor(a),z=Math.floor(h),x=Math.floor(g),T=Math.ceil(a),I=Math.ceil(h),E=Math.ceil(g),A=a-C,k=h-z,B=g-x,$=i.image.data,H=4*(C+z*w+x*_),G=4*(C+z*w+E*_),U=4*(C+I*w+x*_),Y=4*(C+I*w+E*_),Q=4*(T+z*w+x*_),se=4*(T+z*w+E*_),xe=4*(T+I*w+x*_),pe=4*(T+I*w+E*_);if(H<0||pe>=$.length)throw new Error("out of range");this.r=ai(ai(ai($[H],$[G],B),ai($[U],$[Y],B),k),ai(ai($[Q],$[se],B),ai($[xe],$[pe],B),k),A)/255*f,this.g=ai(ai(ai($[H+1],$[G+1],B),ai($[U+1],$[Y+1],B),k),ai(ai($[Q+1],$[se+1],B),ai($[xe+1],$[pe+1],B),k),A)/255*f,this.b=ai(ai(ai($[H+2],$[G+2],B),ai($[U+2],$[Y+2],B),k),ai(ai($[Q+2],$[se+2],B),ai($[xe+2],$[pe+2],B),k),A)/255*f,this.a=f}else this.r=a,this.g=h,this.b=g,this.a=f}toArray(){const{r:i,g:a,b:h,a:g}=this;return g===0?[0,0,0,0]:[255*i/g,255*a/g,255*h/g,g]}toArray01(){const{r:i,g:a,b:h,a:g}=this;return g===0?[0,0,0,0]:[i/g,a/g,h/g,g]}toArray01Scaled(i){const{r:a,g:h,b:g,a:f}=this;return f===0?[0,0,0]:[a/f*i,h/f*i,g/f*i]}toArray01PremultipliedAlpha(){const{r:i,g:a,b:h,a:g}=this;return[i,a,h,g]}toArray01Linear(){const{r:i,g:a,b:h,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(i/g,2.2),Math.pow(a/g,2.2),Math.pow(h/g,2.2),g]}}function ai(u,i,a){return u*(1-a)+i*a}function Ki(u,i,a){return u.map((h,g)=>ai(h,i[g],a))}$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1),$t.blue=new $t(0,0,1,1);var hn=Object.freeze({__proto__:null,array:Ki,color:function(u,i,a){return new $t(ai(u.r,i.r,a),ai(u.g,i.g,a),ai(u.b,i.b,a),ai(u.a,i.a,a))},number:ai});function Ht(u,...i){for(const a of i)for(const h in a)u[h]=a[h];return u}class wi extends Error{constructor(i,a){super(a),this.message=a,this.key=i}}class Nr{constructor(i,a=[]){this.parent=i,this.bindings={};for(const[h,g]of a)this.bindings[h]=g}concat(i){return new Nr(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const tn={kind:"null"},Wt={kind:"number"},Qi={kind:"string"},rr={kind:"boolean"},Er={kind:"color"},ro={kind:"object"},or={kind:"value"},ns={kind:"collator"},al={kind:"formatted"},ll={kind:"resolvedImage"};function ho(u,i){return{kind:"array",itemType:u,N:i}}function on(u){if(u.kind==="array"){const i=on(u.itemType);return typeof u.N=="number"?`array<${i}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${i}>`}return u.kind}const Th=[tn,Wt,Qi,rr,Er,al,ro,ho(or),ll];function cl(u,i){if(i.kind==="error")return null;if(u.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!cl(u.itemType,i.itemType))&&(typeof u.N!="number"||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if(u.kind==="value"){for(const a of Th)if(!cl(a,i))return null}}return`Expected ${on(u)} but found ${on(i)} instead.`}function Jl(u,i){return i.some(a=>a.kind===u.kind)}function js(u,i){return i.some(a=>a==="null"?u===null:a==="array"?Array.isArray(u):a==="object"?u&&!Array.isArray(u)&&typeof u=="object":a===typeof u)}class su{constructor(i,a,h){this.sensitivity=i?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,a){return this.collator.compare(i,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ko{constructor(i,a,h,g,f){this.text=i.normalize?i.normalize():i,this.image=a,this.scale=h,this.fontStack=g,this.textColor=f}}class no{constructor(i){this.sections=i}static fromString(i){return new no([new ko(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.namePrimary.length!==0)}static factory(i){return i instanceof no?i:no.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const a of this.sections){if(a.image){i.push(["image",a.image.namePrimary]);continue}i.push(a.text);const h={};a.fontStack&&(h["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(h["font-scale"]=a.scale),a.textColor&&(h["text-color"]=["rgba"].concat(a.textColor.toRenderColor(null).toArray())),i.push(h)}return i}}class fo{constructor(i){this.namePrimary=i.namePrimary,i.nameSecondary&&(this.nameSecondary=i.nameSecondary),this.available=i.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(i,a){return i?new fo({namePrimary:i,nameSecondary:a,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function Hd(u,i,a,h){return typeof u=="number"&&u>=0&&u<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[u,i,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[u,i,a,h]:[u,i,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ra(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof $t||u instanceof su||u instanceof no||u instanceof fo)return!0;if(Array.isArray(u)){for(const i of u)if(!Ra(i))return!1;return!0}if(typeof u=="object"){for(const i in u)if(!Ra(u[i]))return!1;return!0}return!1}function dn(u){if(u===null)return tn;if(typeof u=="string")return Qi;if(typeof u=="boolean")return rr;if(typeof u=="number")return Wt;if(u instanceof $t)return Er;if(u instanceof su)return ns;if(u instanceof no)return al;if(u instanceof fo)return ll;if(Array.isArray(u)){const i=u.length;let a;for(const h of u){const g=dn(h);if(a){if(a===g)continue;a=or;break}a=g}return ho(a||or,i)}return ro}function oo(u){const i=typeof u;return u===null?"":i==="string"||i==="number"||i==="boolean"?String(u):u instanceof $t||u instanceof no||u instanceof fo?u.toString():JSON.stringify(u)}class os{constructor(i,a){this.type=i,this.value=a}static parse(i,a){if(i.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Ra(i[1]))return a.error("invalid value");const h=i[1];let g=dn(h);const f=a.expectedType;return g.kind!=="array"||g.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(g=f),new os(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof $t?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof no?this.value.serialize():this.value}}class en{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const au={string:Qi,number:Wt,boolean:rr,object:ro};class ss{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");let h,g=1;const f=i[0];if(f==="array"){let w,C;if(i.length>2){const z=i[1];if(typeof z!="string"||!(z in au)||z==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=au[z],g++}else w=or;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return a.error('The length argument to "array" must be a positive integer literal',2);C=i[2],g++}h=ho(w,C)}else h=au[f];const _=[];for(;g<i.length;g++){const w=a.parse(i[g],g,or);if(!w)return null;_.push(w)}return new ss(h,_)}evaluate(i){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(i);if(!cl(this.type,dn(h)))return h;if(a===this.args.length-1)throw new en(`The expression ${JSON.stringify(this.args[a].serialize())} evaluated to ${on(dn(h))} but was expected to be of type ${on(this.type)}.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,a=[i.kind];if(i.kind==="array"){const h=i.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){a.push(h.kind);const g=i.N;(typeof g=="number"||this.args.length>1)&&a.push(g)}}return a.concat(this.args.map(h=>h.serialize()))}}class Kl{constructor(i){this.type=al,this.sections=i}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const g=[];let f=!1;for(let _=1;_<=i.length-1;++_){const w=i[_];if(f&&typeof w=="object"&&!Array.isArray(w)){f=!1;let C=null;if(w["font-scale"]&&(C=a.parseObjectValue(w["font-scale"],_,"font-scale",Wt),!C))return null;let z=null;if(w["text-font"]&&(z=a.parseObjectValue(w["text-font"],_,"text-font",ho(Qi)),!z))return null;let x=null;if(w["text-color"]&&(x=a.parseObjectValue(w["text-color"],_,"text-color",Er),!x))return null;const T=g[g.length-1];T.scale=C,T.font=z,T.textColor=x}else{const C=a.parse(i[_],_,or);if(!C)return null;const z=C.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,g.push({content:C,scale:null,font:null,textColor:null})}}return new Kl(g)}evaluate(i){return new no(this.sections.map(a=>{const h=a.content.evaluate(i);return dn(h)===ll?new ko("",h,null,null,null):new ko(oo(h),null,a.scale?a.scale.evaluate(i):null,a.font?a.font.evaluate(i).join(","):null,a.textColor?a.textColor.evaluate(i):null)}))}eachChild(i){for(const a of this.sections)i(a.content),a.scale&&i(a.scale),a.font&&i(a.font),a.textColor&&i(a.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const a of this.sections){i.push(a.content.serialize());const h={};a.scale&&(h["font-scale"]=a.scale.serialize()),a.font&&(h["text-font"]=a.font.serialize()),a.textColor&&(h["text-color"]=a.textColor.serialize()),i.push(h)}return i}}class La{constructor(i,a){this.type=ll,this.inputPrimary=i,this.inputSecondary=a}static parse(i,a){if(i.length<2)return a.error("Expected two or more arguments.");const h=a.parse(i[1],1,Qi);if(!h)return a.error("No image name provided.");if(i.length===2)return new La(h);const g=a.parse(i[2],1,Qi);return g?new La(h,g):a.error("Secondary image variant is not a string.")}evaluate(i){const a=fo.fromString(this.inputPrimary.evaluate(i),this.inputSecondary?this.inputSecondary.evaluate(i):void 0);return a&&i.availableImages&&(a.available=i.availableImages.indexOf(a.namePrimary)>-1,a.nameSecondary&&a.available&&i.availableImages&&(a.available=i.availableImages.indexOf(a.nameSecondary)>-1)),a}eachChild(i){i(this.inputPrimary),this.inputSecondary&&i(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Us(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}const Bc={"to-boolean":rr,"to-color":Er,"to-number":Wt,"to-string":Qi};class Vs{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const h=i[0],g=[];let f=tn;if(h==="to-array"){if(!Array.isArray(i[1]))return null;const _=i[1].length;if(a.expectedType){if(a.expectedType.kind!=="array")return a.error(`Expected ${a.expectedType.kind} but found array.`);f=ho(a.expectedType.itemType,_)}else{if(!(_>0&&Ra(i[1][0])))return null;f=ho(dn(i[1][0]),_)}for(let w=0;w<_;w++){const C=i[1][w];let z;if(Us(C)==="array")z=a.parse(C,void 0,f.itemType);else{const x=Us(C);if(x!==f.itemType.kind)return a.error(`Expected ${f.itemType.kind} but found ${x}.`);z=a.registry.literal.parse(["literal",C===void 0?null:C],a)}if(!z)return null;g.push(z)}}else{if((h==="to-boolean"||h==="to-string")&&i.length!==2)return a.error("Expected one argument.");f=Bc[h];for(let _=1;_<i.length;_++){const w=a.parse(i[_],_,or);if(!w)return null;g.push(w)}}return new Vs(f,g)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let a,h;for(const g of this.args){if(a=g.evaluate(i),h=null,a instanceof $t)return a;if(typeof a=="string"){const f=i.parseColor(a);if(f)return f}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Hd(a[0],a[1],a[2],a[3]),!h))return new $t(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new en(h||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const h of this.args){if(a=h.evaluate(i),a===null)return 0;const g=Number(a);if(!isNaN(g))return g}throw new en(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?no.fromString(oo(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?fo.fromString(oo(this.args[0].evaluate(i))):this.type.kind==="array"?this.args.map(a=>a.evaluate(i)):oo(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Kl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new La(this.args[0]).serialize();const i=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(a=>{i.push(a.serialize())}),i}}const rp=["Unknown","Point","LineString","Polygon"];class Oa{constructor(i,a){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=i,this.options=a}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?rp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(i){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,a=this.featureDistanceData.scale,{x:h,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*a-i[0])+this.featureDistanceData.bearing[1]*(g*a-i[1])}return 0}parseColor(i){let a=this._parseColorCache[i];return a||(a=this._parseColorCache[i]=$t.parse(i)),a}getConfig(i){return this.options?this.options.get(i):null}}class bo{constructor(i,a,h,g,f){this.name=i,this.type=a,this._evaluate=h,this.args=g,this._overloadIndex=f}evaluate(i){if(!this._evaluate){const a=bo.definitions[this.name];this._evaluate=Array.isArray(a)?a[2]:a.overloads[this._overloadIndex][1]}return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,a){const h=i[0],g=bo.definitions[h];if(!g)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(g)?g[0]:g.type,_=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,w=[];let C=null,z=-1;for(const[x,T]of _){if(Array.isArray(x)&&x.length!==i.length-1)continue;w.push(x),z++,C=new Ws(a.registry,a.path,null,a.scope,void 0,a._scope,a.options);const I=[];let E=!1;for(let A=1;A<i.length;A++){const k=i[A],B=Array.isArray(x)?x[A-1]:x.type,$=C.parse(k,1+I.length,B);if(!$){E=!0;break}I.push($)}if(!E)if(Array.isArray(x)&&x.length!==I.length)C.error(`Expected ${x.length} arguments, but found ${I.length} instead.`);else{for(let A=0;A<I.length;A++){const k=Array.isArray(x)?x[A]:x.type,B=I[A];C.concat(A+1).checkSubtype(k,B.type)}if(C.errors.length===0)return new bo(h,f,T,I,z)}}if(w.length===1)a.errors.push(...C.errors);else{const x=(w.length?w:_.map(([I])=>I)).map(np).join(" | "),T=[];for(let I=1;I<i.length;I++){const E=a.parse(i[I],1+T.length);if(!E)return null;T.push(on(E.type))}a.error(`Expected arguments of type ${x}, but found (${T.join(", ")}) instead.`)}return null}static register(i,a){bo.definitions=a;for(const h in a)i[h]=bo}}function np(u){return Array.isArray(u)?`(${u.map(on).join(", ")})`:`(${on(u.type)}...)`}class lu{constructor(i,a,h){this.type=ns,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=a}static parse(i,a){if(i.length!==2)return a.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const g=h["case-sensitive"]===void 0?a.parse(!1,1,rr):a.parseObjectValue(h["case-sensitive"],1,"case-sensitive",rr);if(!g)return null;const f=h["diacritic-sensitive"]===void 0?a.parse(!1,1,rr):a.parseObjectValue(h["diacritic-sensitive"],1,"diacritic-sensitive",rr);if(!f)return null;let _=null;return h.locale&&(_=a.parseObjectValue(h.locale,1,"locale",Qi),!_)?null:new lu(g,f,_)}evaluate(i){return new su(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}function cu(u,i,a=0,h=u.length-1,g=Ba){for(;h>a;){if(h-a>600){const C=h-a+1,z=i-a+1,x=Math.log(C),T=.5*Math.exp(2*x/3),I=.5*Math.sqrt(x*T*(C-T)/C)*(z-C/2<0?-1:1);cu(u,i,Math.max(a,Math.floor(i-z*T/C+I)),Math.min(h,Math.floor(i+(C-z)*T/C+I)),g)}const f=u[i];let _=a,w=h;for(qs(u,a,i),g(u[h],f)>0&&qs(u,a,h);_<w;){for(qs(u,_,w),_++,w--;g(u[_],f)<0;)_++;for(;g(u[w],f)>0;)w--}g(u[a],f)===0?qs(u,a,w):(w++,qs(u,w,h)),w<=i&&(a=w+1),i<=w&&(h=w-1)}}function qs(u,i,a){const h=u[i];u[i]=u[a],u[a]=h}function Ba(u,i){return u<i?-1:u>i?1:0}function Ch(u){let i=0;for(let a,h,g=0,f=u.length,_=f-1;g<f;_=g++)a=u[g],h=u[_],i+=(h.x-a.x)*(a.y+h.y);return i}function ul(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function Cs(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function op(u,i,a){const h=u[0]-i[0],g=u[1]-i[1],f=u[0]-a[0],_=u[1]-a[1];return h*_-f*g==0&&h*f<=0&&g*_<=0}function Ql(u,i,a=!1){let h=!1;for(let w=0,C=i.length;w<C;w++){const z=i[w];for(let x=0,T=z.length,I=T-1;x<T;I=x++){const E=z[I],A=z[x];if(op(u,E,A))return a;(f=E)[1]>(g=u)[1]!=(_=A)[1]>g[1]&&g[0]<(_[0]-f[0])*(g[1]-f[1])/(_[1]-f[1])+f[0]&&(h=!h)}}var g,f,_;return h}function Gd(u,i,a,h){const g=h[0]-a[0],f=h[1]-a[1],_=(u[0]-a[0])*f-g*(u[1]-a[1]),w=(i[0]-a[0])*f-g*(i[1]-a[1]);return _>0&&w<0||_<0&&w>0}function uu(u,i,a,h){return(g=[h[0]-a[0],h[1]-a[1]])[0]*(f=[i[0]-u[0],i[1]-u[1]])[1]-g[1]*f[0]!=0&&!(!Gd(u,i,a,h)||!Gd(a,h,u,i));var g,f}const Go=8192;function qi(u,i){const a=(180+u[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(a*g*Go),Math.round(h*g*Go)]}function gi(u,i){for(let a=0;a<i.length;a++)if(Ql(u,i[a]))return!0;return!1}function da(u,i,a){for(const h of a)for(let g=0,f=h.length,_=f-1;g<f;_=g++)if(uu(u,i,h[_],h[g]))return!0;return!1}function Ei(u,i){for(let a=0;a<u.length;++a)if(!Ql(u[a],i))return!1;for(let a=0;a<u.length-1;++a)if(da(u[a],u[a+1],i))return!1;return!0}function fa(u,i){for(let a=0;a<i.length;a++)if(Ei(u,i[a]))return!0;return!1}function Fa(u,i,a){const h=[];for(let g=0;g<u.length;g++){const f=[];for(let _=0;_<u[g].length;_++){const w=qi(u[g][_],a);ul(i,w),f.push(w)}h.push(f)}return h}function Si(u,i,a){const h=[];for(let g=0;g<u.length;g++){const f=Fa(u[g],i,a);h.push(f)}return h}function Ah(u,i,a,h){if(u[0]<a[0]||u[0]>a[2]){const g=.5*h;let f=u[0]-a[0]>g?-h:a[0]-u[0]>g?h:0;f===0&&(f=u[0]-a[2]>g?-h:a[2]-u[0]>g?h:0),u[0]+=f}ul(i,u)}function hl(u,i,a,h){const g=Math.pow(2,h.z)*Go,f=[h.x*Go,h.y*Go],_=[];if(!u)return _;for(const w of u)for(const C of w){const z=[C.x+f[0],C.y+f[1]];Ah(z,i,a,g),_.push(z)}return _}function dl(u,i,a,h){const g=Math.pow(2,h.z)*Go,f=[h.x*Go,h.y*Go],_=[];if(!u)return _;for(const C of u){const z=[];for(const x of C){const T=[x.x+f[0],x.y+f[1]];ul(i,T),z.push(T)}_.push(z)}if(i[2]-i[0]<=g/2){(w=i)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const C of _)for(const z of C)Ah(z,i,a,g)}var w;return _}class pa{constructor(i,a){this.type=rr,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Ra(i[1])){const h=i[1];if(h.type==="FeatureCollection")for(let g=0;g<h.features.length;++g){const f=h.features[g].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new pa(h,h.features[g].geometry)}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new pa(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new pa(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,h){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(!_)return!1;if(h.type==="Polygon"){const w=Fa(h.coordinates,f,_),C=hl(a.geometry(),g,f,_);if(!Cs(g,f))return!1;for(const z of C)if(!Ql(z,w))return!1}if(h.type==="MultiPolygon"){const w=Si(h.coordinates,f,_),C=hl(a.geometry(),g,f,_);if(!Cs(g,f))return!1;for(const z of C)if(!gi(z,w))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,h){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(!_)return!1;if(h.type==="Polygon"){const w=Fa(h.coordinates,f,_),C=dl(a.geometry(),g,f,_);if(!Cs(g,f))return!1;for(const z of C)if(!Ei(z,w))return!1}if(h.type==="MultiPolygon"){const w=Si(h.coordinates,f,_),C=dl(a.geometry(),g,f,_);if(!Cs(g,f))return!1;for(const z of C)if(!fa(z,w))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Na={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},so=1/298.257223563,hu=so*(2-so),fl=Math.PI/180;class pl{static fromTile(i,a,h){const g=Math.PI*(1-2*(i+.5)/Math.pow(2,a)),f=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/fl;return new pl(f,h)}static get units(){return Na}constructor(i,a){if(i===void 0)throw new Error("No latitude given.");if(a&&!Na[a])throw new Error(`Unknown unit ${a}. Use one of: ${Object.keys(Na).join(", ")}`);const h=6378.137*fl*(a?Na[a]:1),g=Math.cos(i*fl),f=1/(1-hu*(1-g*g)),_=Math.sqrt(f);this.kx=h*_*g,this.ky=h*_*f*(1-hu)}distance(i,a){const h=sn(i[0]-a[0])*this.kx,g=(i[1]-a[1])*this.ky;return Math.sqrt(h*h+g*g)}bearing(i,a){const h=sn(a[0]-i[0])*this.kx;return Math.atan2(h,(a[1]-i[1])*this.ky)/fl}destination(i,a,h){const g=h*fl;return this.offset(i,Math.sin(g)*a,Math.cos(g)*a)}offset(i,a,h){return[i[0]+a/this.kx,i[1]+h/this.ky]}lineDistance(i){let a=0;for(let h=0;h<i.length-1;h++)a+=this.distance(i[h],i[h+1]);return a}area(i){let a=0;for(let h=0;h<i.length;h++){const g=i[h];for(let f=0,_=g.length,w=_-1;f<_;w=f++)a+=sn(g[f][0]-g[w][0])*(g[f][1]+g[w][1])*(h?-1:1)}return Math.abs(a)/2*this.kx*this.ky}along(i,a){let h=0;if(a<=0)return i[0];for(let g=0;g<i.length-1;g++){const f=i[g],_=i[g+1],w=this.distance(f,_);if(h+=w,h>a)return Ro(f,_,(a-(h-w))/w)}return i[i.length-1]}pointToSegmentDistance(i,a,h){let[g,f]=a,_=sn(h[0]-g)*this.kx,w=(h[1]-f)*this.ky;if(_!==0||w!==0){const C=(sn(i[0]-g)*this.kx*_+(i[1]-f)*this.ky*w)/(_*_+w*w);C>1?(g=h[0],f=h[1]):C>0&&(g+=_/this.kx*C,f+=w/this.ky*C)}return _=sn(i[0]-g)*this.kx,w=(i[1]-f)*this.ky,Math.sqrt(_*_+w*w)}pointOnLine(i,a){let h=1/0,g=i[0][0],f=i[0][1],_=0,w=0;for(let C=0;C<i.length-1;C++){let z=i[C][0],x=i[C][1],T=sn(i[C+1][0]-z)*this.kx,I=(i[C+1][1]-x)*this.ky,E=0;T===0&&I===0||(E=(sn(a[0]-z)*this.kx*T+(a[1]-x)*this.ky*I)/(T*T+I*I),E>1?(z=i[C+1][0],x=i[C+1][1]):E>0&&(z+=T/this.kx*E,x+=I/this.ky*E)),T=sn(a[0]-z)*this.kx,I=(a[1]-x)*this.ky;const A=T*T+I*I;A<h&&(h=A,g=z,f=x,_=C,w=E)}return{point:[g,f],index:_,t:Math.max(0,Math.min(1,w))}}lineSlice(i,a,h){let g=this.pointOnLine(h,i),f=this.pointOnLine(h,a);if(g.index>f.index||g.index===f.index&&g.t>f.t){const z=g;g=f,f=z}const _=[g.point],w=g.index+1,C=f.index;!ml(h[w],_[0])&&w<=C&&_.push(h[w]);for(let z=w+1;z<=C;z++)_.push(h[z]);return ml(h[C],f.point)||_.push(f.point),_}lineSliceAlong(i,a,h){let g=0;const f=[];for(let _=0;_<h.length-1;_++){const w=h[_],C=h[_+1],z=this.distance(w,C);if(g+=z,g>i&&f.length===0&&f.push(Ro(w,C,(i-(g-z))/z)),g>=a)return f.push(Ro(w,C,(a-(g-z))/z)),f;g>i&&f.push(C)}return f}bufferPoint(i,a){const h=a/this.ky,g=a/this.kx;return[i[0]-g,i[1]-h,i[0]+g,i[1]+h]}bufferBBox(i,a){const h=a/this.ky,g=a/this.kx;return[i[0]-g,i[1]-h,i[2]+g,i[3]+h]}insideBBox(i,a){return sn(i[0]-a[0])>=0&&sn(i[0]-a[2])<=0&&i[1]>=a[1]&&i[1]<=a[3]}}function ml(u,i){return u[0]===i[0]&&u[1]===i[1]}function Ro(u,i,a){const h=sn(i[0]-u[0]);return[u[0]+h*a,u[1]+(i[1]-u[1])*a]}function sn(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}class Hs{constructor(i=[],a=(h,g)=>h<g?-1:h>g?1:0){if(this.data=i,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:a,compare:h}=this,g=a[i];for(;i>0;){const f=i-1>>1,_=a[f];if(h(g,_)>=0)break;a[i]=_,i=f}a[i]=g}_down(i){const{data:a,compare:h}=this,g=this.length>>1,f=a[i];for(;i<g;){let _=1+(i<<1);const w=_+1;if(w<this.length&&h(a[w],a[_])<0&&(_=w),h(a[_],f)>=0)break;a[i]=a[_],i=_}a[i]=f}}var qt=8192;function $a(u,i){return i.dist-u.dist}const gl=100,du=50;function _l(u){const i=[1/0,1/0,-1/0,-1/0];if(i.length!==u.length)return!1;for(let a=0;a<i.length;a++)if(i[a]!==u[a])return!1;return!0}function ec(u){return u[1]-u[0]+1}function Gs(u,i){const a=u[1]>=u[0]&&u[1]<i;return a}function fu(u,i){if(u[0]>u[1])return[null,null];const a=ec(u);if(i){if(a===2)return[u,null];const h=Math.floor(a/2);return[[u[0],u[0]+h],[u[0]+h,u[1]]]}{if(a===1)return[u,null];const h=Math.floor(a/2)-1;return[[u[0],u[0]+h],[u[0]+h+1,u[1]]]}}function Lo(u,i){const a=[1/0,1/0,-1/0,-1/0];if(!Gs(i,u.length))return a;for(let h=i[0];h<=i[1];++h)ul(a,u[h]);return a}function ja(u){const i=[1/0,1/0,-1/0,-1/0];for(let a=0;a<u.length;++a)for(let h=0;h<u[a].length;++h)ul(i,u[a][h]);return i}function yl(u,i,a){if(_l(u)||_l(i))return NaN;let h=0,g=0;return u[2]<i[0]&&(h=i[0]-u[2]),u[0]>i[2]&&(h=u[0]-i[2]),u[1]>i[3]&&(g=u[1]-i[3]),u[3]<i[1]&&(g=i[1]-u[3]),a.distance([0,0],[h,g])}function Wd(u){return 360*u-180}function gt(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function It(u,i){const a=Math.pow(2,i.z),h=(u.y/qt+i.y)/a;return[Wd((u.x/qt+i.x)/a),gt(h)]}function fi(u,i){const a=[];for(let h=0;h<u.length;++h)a.push(It(u[h],i));return a}function Bi(u,i,a){const h=a.pointOnLine(i,u).point;return a.distance(u,h)}function an(u,i,a,h,g){const f=a.slice(h[0],h[1]+1);let _=1/0;for(let w=i[0];w<=i[1];++w)if((_=Math.min(_,Bi(u[w],f,g)))===0)return 0;return _}function vr(u,i,a,h,g){const f=Math.min(g.pointToSegmentDistance(u,a,h),g.pointToSegmentDistance(i,a,h)),_=Math.min(g.pointToSegmentDistance(a,u,i),g.pointToSegmentDistance(h,u,i));return Math.min(f,_)}function wn(u,i,a,h,g){if(!Gs(i,u.length)||!Gs(h,a.length))return NaN;let f=1/0;for(let _=i[0];_<i[1];++_)for(let w=h[0];w<h[1];++w){if(uu(u[_],u[_+1],a[w],a[w+1]))return 0;f=Math.min(f,vr(u[_],u[_+1],a[w],a[w+1],g))}return f}function Pn(u,i,a,h,g){if(!Gs(i,u.length)||!Gs(h,a.length))return NaN;let f=1/0;for(let _=i[0];_<=i[1];++_)for(let w=h[0];w<=h[1];++w)if((f=Math.min(f,g.distance(u[_],a[w])))===0)return f;return f}function as(u,i,a){if(Ql(u,i,!0))return 0;let h=1/0;for(const g of i){const f=g.length;if(f<2)return NaN;if(g[0]!==g[f-1]&&(h=Math.min(h,a.pointToSegmentDistance(u,g[f-1],g[0])))===0||(h=Math.min(h,Bi(u,g,a)))===0)return h}return h}function Nn(u,i,a,h){if(!Gs(i,u.length))return NaN;for(let f=i[0];f<=i[1];++f)if(Ql(u[f],a,!0))return 0;let g=1/0;for(let f=i[0];f<i[1];++f)for(const _ of a)for(let w=0,C=_.length,z=C-1;w<C;z=w++){if(uu(u[f],u[f+1],_[z],_[w]))return 0;g=Math.min(g,vr(u[f],u[f+1],_[z],_[w],h))}return g}function kn(u,i){for(const a of u)for(let h=0;h<=a.length-1;++h)if(Ql(a[h],i,!0))return!0;return!1}function As(u,i,a,h=1/0){const g=ja(u),f=ja(i);if(h!==1/0&&yl(g,f,a)>=h)return h;if(Cs(g,f)){if(kn(u,i))return 0}else if(kn(i,u))return 0;let _=h;for(const w of u)for(let C=0,z=w.length,x=z-1;C<z;x=C++)for(const T of i)for(let I=0,E=T.length,A=E-1;I<E;A=I++){if(uu(w[x],w[C],T[A],T[I]))return 0;_=Math.min(_,vr(w[x],w[C],T[A],T[I],a))}return _}function Wo(u,i,a,h,g,f,_){if(f===null||_===null)return;const w=yl(Lo(h,f),Lo(g,_),a);w<i&&u.push({dist:w,range1:f,range2:_})}function Kn(u,i,a,h,g=1/0){let f=Math.min(h.distance(u[0],a[0][0]),g);if(f===0)return f;const _=new Hs([{dist:0,range1:[0,u.length-1],range2:[0,0]}],$a),w=i?du:gl,C=ja(a);for(;_.length;){const z=_.pop();if(z.dist>=f)continue;const x=z.range1;if(ec(x)<=w){if(!Gs(x,u.length))return NaN;if(i){const T=Nn(u,x,a,h);if((f=Math.min(f,T))===0)return f}else for(let T=x[0];T<=x[1];++T){const I=as(u[T],a,h);if((f=Math.min(f,I))===0)return f}}else{const T=fu(x,i);if(T[0]!==null){const I=yl(Lo(u,T[0]),C,h);I<f&&_.push({dist:I,range1:T[0],range2:[0,0]})}if(T[1]!==null){const I=yl(Lo(u,T[1]),C,h);I<f&&_.push({dist:I,range1:T[1],range2:[0,0]})}}}return f}function Zo(u,i,a,h,g,f=1/0){let _=Math.min(f,g.distance(u[0],a[0]));if(_===0)return _;const w=new Hs([{dist:0,range1:[0,u.length-1],range2:[0,a.length-1]}],$a),C=i?du:gl,z=h?du:gl;for(;w.length;){const x=w.pop();if(x.dist>=_)continue;const T=x.range1,I=x.range2;if(ec(T)<=C&&ec(I)<=z){if(!Gs(T,u.length)||!Gs(I,a.length))return NaN;if(i&&h?_=Math.min(_,wn(u,T,a,I,g)):i||h?i&&!h?_=Math.min(_,an(a,I,u,T,g)):!i&&h&&(_=Math.min(_,an(u,T,a,I,g))):_=Math.min(_,Pn(u,T,a,I,g)),_===0)return _}else{const E=fu(T,i),A=fu(I,h);Wo(w,_,g,u,a,E[0],A[0]),Wo(w,_,g,u,a,E[0],A[1]),Wo(w,_,g,u,a,E[1],A[0]),Wo(w,_,g,u,a,E[1],A[1])}}return _}function Is(u,i,a,h,g=1/0){let f=g;const _=Lo(u,[0,u.length-1]);for(const w of a)if(!(f!==1/0&&yl(_,Lo(w,[0,w.length-1]),h)>=f)&&(f=Math.min(f,Zo(u,i,w,!0,h,f)),f===0))return f;return f}function Ua(u,i,a,h,g=1/0){let f=g;const _=Lo(u,[0,u.length-1]);for(const w of a){if(f!==1/0&&yl(_,ja(w),h)>=f)continue;const C=Kn(u,i,w,h,f);if(isNaN(C))return C;if((f=Math.min(f,C))===0)return f}return f}function ma(u){return u==="Point"||u==="MultiPoint"||u==="LineString"||u==="MultiLineString"||u==="Polygon"||u==="MultiPolygon"}class ls{constructor(i,a){this.type=Wt,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'distance' expression requires either one argument, but found ' ${i.length-1} instead.`);if(Ra(i[1])){const h=i[1];if(h.type==="FeatureCollection"){for(let g=0;g<h.features.length;++g)if(ma(h.features[g].geometry.type))return new ls(h,h.features[g].geometry)}else if(h.type==="Feature"){if(ma(h.geometry.type))return new ls(h,h.geometry)}else if(ma(h.type))return new ls(h,h)}return a.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(i){const a=i.geometry(),h=i.canonicalID();if(a!=null&&h!=null){if(i.geometryType()==="Point")return function(g,f,_){const w=[];for(const z of g)for(const x of z)w.push(It(x,f));const C=new pl(w[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?Zo(w,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",C):_.type==="MultiLineString"?Is(w,!1,_.coordinates,C):_.type==="Polygon"||_.type==="MultiPolygon"?Ua(w,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,C):null}(a,h,this.geometries);if(i.geometryType()==="LineString")return function(g,f,_){const w=[];for(const z of g){const x=[];for(const T of z)x.push(It(T,f));w.push(x)}const C=new pl(w[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Is(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",w,C);if(_.type==="MultiLineString"){let z=1/0;for(let x=0;x<_.coordinates.length;x++){const T=Is(_.coordinates[x],!0,w,C,z);if(isNaN(T))return T;if((z=Math.min(z,T))===0)return z}return z}if(_.type==="Polygon"||_.type==="MultiPolygon"){let z=1/0;for(let x=0;x<w.length;x++){const T=Ua(w[x],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,C,z);if(isNaN(T))return T;if((z=Math.min(z,T))===0)return z}return z}return null}(a,h,this.geometries);if(i.geometryType()==="Polygon")return function(g,f,_){const w=[];for(const z of function(x,T){const I=x.length;if(I<=1)return[x];const E=[];let A,k;for(let B=0;B<I;B++){const $=Ch(x[B]);$!==0&&(x[B].area=Math.abs($),k===void 0&&(k=$<0),k===$<0?(A&&E.push(A),A=[x[B]]):A.push(x[B]))}return A&&E.push(A),E}(g)){const x=[];for(let T=0;T<z.length;++T)x.push(fi(z[T],f));w.push(x)}const C=new pl(w[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return Ua(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",w,C);if(_.type==="MultiLineString"){let z=1/0;for(let x=0;x<_.coordinates.length;x++){const T=Ua(_.coordinates[x],!0,w,C,z);if(isNaN(T))return T;if((z=Math.min(z,T))===0)return z}return z}return _.type==="Polygon"||_.type==="MultiPolygon"?function(z,x,T){let I=1/0;for(const E of z)for(const A of x){const k=As(E,A,T,I);if(isNaN(k))return k;if((I=Math.min(I,k))===0)return I}return I}(_.type==="Polygon"?[_.coordinates]:_.coordinates,w,C):null}(a,h,this.geometries)}return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function ga(u,i){switch(u){case"string":return oo(i);case"number":return+i;case"boolean":return!!i;case"color":return $t.parse(i);case"formatted":return no.fromString(oo(i));case"resolvedImage":return fo.fromString(oo(i))}return i}function er(u,i,a,h){return h!==void 0&&(u=h*Math.round(u/h)),i!==void 0&&u<i&&(u=i),a!==void 0&&u>a&&(u=a),u}class tc{constructor(i,a,h){this.type=i,this.key=a,this.scope=h}static parse(i,a){let h=a.expectedType;if(h==null&&(h=or),i.length<2||i.length>3)return a.error("Invalid number of arguments for 'config' expression.");const g=a.parse(i[1],1);if(!(g instanceof os))return a.error("Key name of 'config' expression must be a string literal.");if(i.length>=3){const f=a.parse(i[2],2);return f instanceof os?new tc(h,oo(g.value),oo(f.value)):a.error("Scope of 'config' expression must be a string literal.")}return new tc(h,oo(g.value))}evaluate(i){const a=[this.key,this.scope,i.scope].filter(Boolean).join(""),h=i.getConfig(a);if(!h)return null;const{type:g,value:f,values:_,minValue:w,maxValue:C,stepValue:z}=h,x=h.default.evaluate(i);let T=x;if(f){const I=i.scope;i.scope=(I||"").split("").slice(1).join(""),T=f.evaluate(i),i.scope=I}return g&&(T=ga(g,T)),T===void 0||w===void 0&&C===void 0&&z===void 0||(typeof T=="number"?T=er(T,w,C,z):Array.isArray(T)&&(T=T.map(I=>typeof I=="number"?er(I,w,C,z):I))),f!==void 0&&T!==void 0&&_&&!_.includes(T)&&(T=x,g&&(T=ga(g,T))),(g&&g!==this.type||T!==void 0&&dn(T)!==this.type)&&(T=ga(this.type.kind,T)),T}eachChild(){}outputDefined(){return!1}serialize(){const i=["config",this.key];return this.scope&&i.concat(this.key),i}}function qr(u){if(u instanceof bo&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof pa||u instanceof ls)return!1;let i=!0;return u.eachChild(a=>{i&&!qr(a)&&(i=!1)}),i}function $r(u){if(u instanceof bo&&u.name==="feature-state")return!1;let i=!0;return u.eachChild(a=>{i&&!$r(a)&&(i=!1)}),i}function Va(u){if(u instanceof tc)return new Set([u.key]);let i=new Set;return u.eachChild(a=>{i=new Set([...i,...Va(a)])}),i}function Xo(u,i){if(u instanceof bo&&i.indexOf(u.name)>=0)return!1;let a=!0;return u.eachChild(h=>{a&&!Xo(h,i)&&(a=!1)}),a}class Ar{constructor(i,a){this.type=a.type,this.name=i,this.boundExpression=a}static parse(i,a){if(i.length!==2||typeof i[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=i[1];return a.scope.has(h)?new Ar(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Oo{constructor(i,a=[],h,g=new Nr,f=[],_,w){this.registry=i,this.path=a,this.key=a.map(C=>typeof C=="string"?`['${C}']`:`[${C}]`).join(""),this.scope=g,this.errors=f,this.expectedType=h,this._scope=_,this.options=w}parse(i,a,h,g,f={}){return a||h?this.concat(a,null,h,g)._parse(i,f):this._parse(i,f)}parseObjectValue(i,a,h,g,f,_={}){return this.concat(a,h,g,f)._parse(i,_)}_parse(i,a){function h(g,f,_){return _==="assert"?new ss(f,[g]):_==="coerce"?new Vs(f,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof i[0]=="string"?this.registry[i[0]]:void 0;if(g){let f=g.parse(i,this);if(!f)return null;if(this.expectedType){const _=this.expectedType,w=f.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||w.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(_,w))return null}else f=h(f,_,a.typeAnnotation||"coerce");else f=h(f,_,a.typeAnnotation||"assert")}if(!(f instanceof os)&&f.type.kind!=="resolvedImage"&&Zs(f)){const _=new Oa(this._scope,this.options);try{f=new os(f.type,f.evaluate(_))}catch(w){return this.error(w.message),null}}return f}return Vs.parse(["to-array",i],this)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,a,h,g){let f=typeof i=="number"?this.path.concat(i):this.path;f=typeof a=="string"?f.concat(a):f;const _=g?this.scope.concat(g):this.scope;return new Oo(this.registry,f,h||null,_,this.errors,this._scope,this.options)}error(i,...a){const h=`${this.key}${a.map(g=>`[${g}]`).join("")}`;this.errors.push(new wi(h,i))}checkSubtype(i,a){const h=cl(i,a);return h&&this.error(h),h}}var Ws=Oo;function Zs(u){if(u instanceof Ar)return Zs(u.boundExpression);if(u instanceof bo&&u.name==="error"||u instanceof lu||u instanceof pa||u instanceof ls||u instanceof tc)return!1;const i=u instanceof Vs||u instanceof ss;let a=!0;return u.eachChild(h=>{a=i?a&&Zs(h):a&&h instanceof os}),!!a&&qr(u)&&Xo(u,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function qa(u,i){const a=u.length-1;let h,g,f=0,_=a,w=0;for(;f<=_;)if(w=Math.floor((f+_)/2),h=u[w],g=u[w+1],h<=i){if(w===a||i<g)return w;f=w+1}else{if(!(h>i))throw new en("Input is not a number.");_=w-1}return 0}class Ha{constructor(i,a,h){this.type=i,this.input=a,this.labels=[],this.outputs=[];for(const[g,f]of h)this.labels.push(g),this.outputs.push(f)}static parse(i,a){if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(i[1],1,Wt);if(!h)return null;const g=[];let f=null;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);for(let _=1;_<i.length;_+=2){const w=_===1?-1/0:i[_],C=i[_+1],z=_,x=_+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(g.length&&g[g.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const T=a.parse(C,x,f);if(!T)return null;f=f||T.type,g.push([w,T])}return new Ha(f,h,g)}evaluate(i){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=a[0])return h[0].evaluate(i);const f=a.length;return g>=a[f-1]?h[f-1].evaluate(i):h[qa(a,g)].evaluate(i)}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&i.push(this.labels[a]),i.push(this.outputs[a].serialize());return i}}const vl=.95047,Ga=1.08883,Ih=4/29,_a=6/29,pu=3*_a*_a,mu=_a*_a*_a,gu=Math.PI/180,Zd=180/Math.PI;function ic(u){return u>mu?Math.pow(u,1/3):u/pu+Ih}function rc(u){return u>_a?u*u*u:pu*(u-Ih)}function sp(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function ap(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function ag(u){const i=ap(u.r),a=ap(u.g),h=ap(u.b),g=ic((.4124564*i+.3575761*a+.1804375*h)/vl),f=ic((.2126729*i+.7151522*a+.072175*h)/1);return{l:116*f-16,a:500*(g-f),b:200*(f-ic((.0193339*i+.119192*a+.9503041*h)/Ga)),alpha:u.a}}function lg(u){let i=(u.l+16)/116,a=isNaN(u.a)?i:i+u.a/500,h=isNaN(u.b)?i:i-u.b/200;return i=1*rc(i),a=vl*rc(a),h=Ga*rc(h),new $t(sp(3.2404542*a-1.5371385*i-.4985314*h),sp(-.969266*a+1.8760108*i+.041556*h),sp(.0556434*a-.2040259*i+1.0572252*h),u.alpha)}function yv(u,i,a){const h=i-u;return u+a*(h>180||h<-180?h-360*Math.round(h/360):h)}const zh={forward:ag,reverse:lg,interpolate:function(u,i,a){return{l:ai(u.l,i.l,a),a:ai(u.a,i.a,a),b:ai(u.b,i.b,a),alpha:ai(u.alpha,i.alpha,a)}}},Dh={forward:function(u){const{l:i,a,b:h}=ag(u),g=Math.atan2(h,a)*Zd;return{h:g<0?g+360:g,c:Math.sqrt(a*a+h*h),l:i,alpha:u.a}},reverse:function(u){const i=u.h*gu,a=u.c;return lg({l:u.l,a:Math.cos(i)*a,b:Math.sin(i)*a,alpha:u.alpha})},interpolate:function(u,i,a){return{h:yv(u.h,i.h,a),c:ai(u.c,i.c,a),l:ai(u.l,i.l,a),alpha:ai(u.alpha,i.alpha,a)}}};var cg=Object.freeze({__proto__:null,hcl:Dh,lab:zh});class zs{constructor(i,a,h,g,f){this.type=i,this.operator=a,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[_,w]of f)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(i,a,h,g){let f=0;if(i.name==="exponential")f=lp(a,i.base,h,g);else if(i.name==="linear")f=lp(a,1,h,g);else if(i.name==="cubic-bezier"){const _=i.controlPoints;f=new Bn(_[0],_[1],_[2],_[3]).solve(lp(a,1,h,g))}return f}static parse(i,a){let[h,g,f,..._]=i;if(!Array.isArray(g)||g.length===0)return a.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const z=g[1];if(typeof z!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:z}}else{if(g[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const z=g.slice(1);if(z.length!==4||z.some(x=>typeof x!="number"||x<0||x>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:z}}}if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(f=a.parse(f,2,Wt),!f)return null;const w=[];let C=null;h==="interpolate-hcl"||h==="interpolate-lab"?C=Er:a.expectedType&&a.expectedType.kind!=="value"&&(C=a.expectedType);for(let z=0;z<_.length;z+=2){const x=_[z],T=_[z+1],I=z+3,E=z+4;if(typeof x!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(w.length&&w[w.length-1][0]>=x)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const A=a.parse(T,E,C);if(!A)return null;C=C||A.type,w.push([x,A])}return C.kind==="number"||C.kind==="color"||C.kind==="array"&&C.itemType.kind==="number"&&typeof C.N=="number"?new zs(C,h,g,f,w):a.error(`Type ${on(C)} is not interpolatable.`)}evaluate(i){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(i);const g=this.input.evaluate(i);if(g<=a[0])return h[0].evaluate(i);const f=a.length;if(g>=a[f-1])return h[f-1].evaluate(i);const _=qa(a,g),w=zs.interpolationFactor(this.interpolation,g,a[_],a[_+1]),C=h[_].evaluate(i),z=h[_+1].evaluate(i);return this.operator==="interpolate"?hn[this.type.kind.toLowerCase()](C,z,w):this.operator==="interpolate-hcl"?Dh.reverse(Dh.interpolate(Dh.forward(C),Dh.forward(z),w)):zh.reverse(zh.interpolate(zh.forward(C),zh.forward(z),w))}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,i,this.input.serialize()];for(let h=0;h<this.labels.length;h++)a.push(this.labels[h],this.outputs[h].serialize());return a}}function lp(u,i,a,h){const g=h-a,f=u-a;return g===0?0:i===1?f/g:(Math.pow(i,f)-1)/(Math.pow(i,g)-1)}class Xd{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expectected at least one argument.");let h=null;const g=a.expectedType;g&&g.kind!=="value"&&(h=g);const f=[];for(const w of i.slice(1)){const C=a.parse(w,1+f.length,h,void 0,{typeAnnotation:"omit"});if(!C)return null;h=h||C.type,f.push(C)}const _=g&&f.some(w=>cl(g,w.type));return new Xd(_?or:h,f)}evaluate(i){let a,h=null,g=0;for(const f of this.args){if(g++,h=f.evaluate(i),h&&h instanceof fo&&!h.available&&(a||(a=h),h=null,g===this.args.length))return a;if(h!==null)break}return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(a=>{i.push(a.serialize())}),i}}class Yd{constructor(i,a){this.type=a.type,this.bindings=[].concat(i),this.result=a}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const a of this.bindings)i(a[1]);i(this.result)}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let f=1;f<i.length-1;f+=2){const _=i[f];if(typeof _!="string")return a.error(`Expected string, but found ${typeof _} instead.`,f);if(/[^a-zA-Z0-9_]/.test(_))return a.error("Variable names must contain only alphanumeric characters or '_'.",f);const w=a.parse(i[f+1],f+1);if(!w)return null;h.push([_,w])}const g=a.parse(i[i.length-1],i.length-1,a.expectedType,h);return g?new Yd(h,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[a,h]of this.bindings)i.push(a,h.serialize());return i.push(this.result.serialize()),i}}class cp{constructor(i,a,h){this.type=i,this.index=a,this.input=h}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,Wt),g=a.parse(i[2],2,ho(a.expectedType||or));return h&&g?new cp(g.type.itemType,h,g):null}evaluate(i){const a=this.index.evaluate(i),h=this.input.evaluate(i);if(a<0)throw new en(`Array index out of bounds: ${a} < 0.`);if(a>h.length-1)throw new en(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a===Math.floor(a))return h[a];const g=Math.floor(a),f=Math.ceil(a),_=h[g],w=h[f];if(typeof _!="number"||typeof w!="number")throw new en(`Cannot interpolate between non-number values at index ${a}.`);const C=a-g;return _*(1-C)+w*C}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class up{constructor(i,a){this.type=rr,this.needle=i,this.haystack=a}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,or),g=a.parse(i[2],2,or);return h&&g?Jl(h.type,[rr,Qi,Wt,tn,or])?new up(h,g):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(h.type)} instead`):null}evaluate(i){const a=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(h==null)return!1;if(!js(a,["boolean","string","number","null"]))throw new en(`Expected first argument to be of type boolean, string, number or null, but found ${on(dn(a))} instead.`);if(!js(h,["string","array"]))throw new en(`Expected second argument to be of type array or string, but found ${on(dn(h))} instead.`);return h.indexOf(a)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Jd{constructor(i,a,h){this.type=Wt,this.needle=i,this.haystack=a,this.fromIndex=h}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,or),g=a.parse(i[2],2,or);if(!h||!g)return null;if(!Jl(h.type,[rr,Qi,Wt,tn,or]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${on(h.type)} instead`);if(i.length===4){const f=a.parse(i[3],3,Wt);return f?new Jd(h,g,f):null}return new Jd(h,g)}evaluate(i){const a=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!js(a,["boolean","string","number","null"]))throw new en(`Expected first argument to be of type boolean, string, number or null, but found ${on(dn(a))} instead.`);if(!js(h,["string","array"]))throw new en(`Expected second argument to be of type array or string, but found ${on(dn(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(i);return h.indexOf(a,g)}return h.indexOf(a)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class hp{constructor(i,a,h,g,f,_){this.inputType=i,this.type=a,this.input=h,this.cases=g,this.outputs=f,this.otherwise=_}static parse(i,a){if(i.length<5)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return a.error("Expected an even number of arguments.");let h,g;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);const f={},_=[];for(let z=2;z<i.length-1;z+=2){let x=i[z];const T=i[z+1];Array.isArray(x)||(x=[x]);const I=a.concat(z);if(x.length===0)return I.error("Expected at least one branch label.");for(const A of x){if(typeof A!="number"&&typeof A!="string")return I.error("Branch labels must be numbers or strings.");if(typeof A=="number"&&Math.abs(A)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof A=="number"&&Math.floor(A)!==A)return I.error("Numeric branch labels must be integer values.");if(h){if(I.checkSubtype(h,dn(A)))return null}else h=dn(A);if(f[String(A)]!==void 0)return I.error("Branch labels must be unique.");f[String(A)]=_.length}const E=a.parse(T,z,g);if(!E)return null;g=g||E.type,_.push(E)}const w=a.parse(i[1],1,or);if(!w)return null;const C=a.parse(i[i.length-1],i.length-1,g);return C?w.type.kind!=="value"&&a.concat(1).checkSubtype(h,w.type)?null:new hp(h,g,w,f,_,C):null}evaluate(i){const a=this.input.evaluate(i);return(dn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),h=[],g={};for(const _ of a){const w=g[this.cases[_]];w===void 0?(g[this.cases[_]]=h.length,h.push([this.cases[_],[_]])):h[w][1].push(_)}const f=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,w]of h)i.push(w.length===1?f(w[0]):w.map(f)),i.push(this.outputs[_].serialize());return i.push(this.otherwise.serialize()),i}}class Ph{constructor(i,a,h){this.type=i,this.branches=a,this.otherwise=h}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const g=[];for(let _=1;_<i.length-1;_+=2){const w=a.parse(i[_],_,rr);if(!w)return null;const C=a.parse(i[_+1],_+1,h);if(!C)return null;g.push([w,C]),h=h||C.type}const f=a.parse(i[i.length-1],i.length-1,h);return f?new Ph(h,g,f):null}evaluate(i){for(const[a,h]of this.branches)if(a.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[a,h]of this.branches)i(a),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(a=>{i.push(a.serialize())}),i}}class Kd{constructor(i,a,h,g){this.type=i,this.input=a,this.beginIndex=h,this.endIndex=g}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,or),g=a.parse(i[2],2,Wt);if(!h||!g)return null;if(!Jl(h.type,[ho(or),Qi,or]))return a.error(`Expected first argument to be of type array or string, but found ${on(h.type)} instead`);if(i.length===4){const f=a.parse(i[3],3,Wt);return f?new Kd(h.type,h,g,f):null}return new Kd(h.type,h,g)}evaluate(i){const a=this.input.evaluate(i),h=this.beginIndex.evaluate(i);if(!js(a,["string","array"]))throw new en(`Expected first argument to be of type array or string, but found ${on(dn(a))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(i);return a.slice(h,g)}return a.slice(h)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function dp(u,i){return u==="=="||u==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function ug(u,i,a,h){return h.compare(i,a)===0}function _u(u,i,a){const h=u!=="=="&&u!=="!=";return class sA{constructor(f,_,w){this.type=rr,this.lhs=f,this.rhs=_,this.collator=w,this.hasUntypedArgument=f.type.kind==="value"||_.type.kind==="value"}static parse(f,_){if(f.length!==3&&f.length!==4)return _.error("Expected two or three arguments.");const w=f[0];let C=_.parse(f[1],1,or);if(!C)return null;if(!dp(w,C.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${on(C.type)}'.`);let z=_.parse(f[2],2,or);if(!z)return null;if(!dp(w,z.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${on(z.type)}'.`);if(C.type.kind!==z.type.kind&&C.type.kind!=="value"&&z.type.kind!=="value")return _.error(`Cannot compare types '${on(C.type)}' and '${on(z.type)}'.`);h&&(C.type.kind==="value"&&z.type.kind!=="value"?C=new ss(z.type,[C]):C.type.kind!=="value"&&z.type.kind==="value"&&(z=new ss(C.type,[z])));let x=null;if(f.length===4){if(C.type.kind!=="string"&&z.type.kind!=="string"&&C.type.kind!=="value"&&z.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(x=_.parse(f[3],3,ns),!x)return null}return new sA(C,z,x)}evaluate(f){const _=this.lhs.evaluate(f),w=this.rhs.evaluate(f);if(h&&this.hasUntypedArgument){const C=dn(_),z=dn(w);if(C.kind!==z.kind||C.kind!=="string"&&C.kind!=="number")throw new en(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${C.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const C=dn(_),z=dn(w);if(C.kind!=="string"||z.kind!=="string")return i(f,_,w)}return this.collator?a(f,_,w,this.collator.evaluate(f)):i(f,_,w)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[u];return this.eachChild(_=>{f.push(_.serialize())}),f}}}const vv=_u("==",function(u,i,a){return i===a},ug),hg=_u("!=",function(u,i,a){return i!==a},function(u,i,a,h){return!ug(0,i,a,h)}),dg=_u("<",function(u,i,a){return i<a},function(u,i,a,h){return h.compare(i,a)<0}),yu=_u(">",function(u,i,a){return i>a},function(u,i,a,h){return h.compare(i,a)>0}),fg=_u("<=",function(u,i,a){return i<=a},function(u,i,a,h){return h.compare(i,a)<=0}),pg=_u(">=",function(u,i,a){return i>=a},function(u,i,a,h){return h.compare(i,a)>=0});class fp{constructor(i,a,h,g,f,_){this.type=Qi,this.number=i,this.locale=a,this.currency=h,this.unit=g,this.minFractionDigits=f,this.maxFractionDigits=_}static parse(i,a){if(i.length!==3)return a.error("Expected two arguments.");const h=a.parse(i[1],1,Wt);if(!h)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return a.error("NumberFormat options argument must be an object.");let f=null;if(g.locale&&(f=a.parseObjectValue(g.locale,2,"locale",Qi),!f))return null;let _=null;if(g.currency&&(_=a.parseObjectValue(g.currency,2,"currency",Qi),!_))return null;let w=null;if(g.unit&&(w=a.parseObjectValue(g.unit,2,"unit",Qi),!w))return null;let C=null;if(g["min-fraction-digits"]&&(C=a.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",Wt),!C))return null;let z=null;return g["max-fraction-digits"]&&(z=a.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",Wt),!z)?null:new fp(h,f,_,w,C,z)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class kh{constructor(i){this.type=Wt,this.input=i}static parse(i,a){if(i.length!==2)return a.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=a.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${on(h.type)} instead.`):new kh(h):null}evaluate(i){const a=this.input.evaluate(i);if(typeof a=="string"||Array.isArray(a))return a.length;throw new en(`Expected value to be of type string or array, but found ${on(dn(a))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(a=>{i.push(a.serialize())}),i}}function Qd(u){return function(){u=1831565813+(u|=0)|0;let i=Math.imul(u^u>>>15,1|u);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}const vu={"==":vv,"!=":hg,">":yu,"<":dg,">=":pg,"<=":fg,array:ss,at:cp,boolean:ss,case:Ph,coalesce:Xd,collator:lu,format:Kl,image:La,in:up,"index-of":Jd,interpolate:zs,"interpolate-hcl":zs,"interpolate-lab":zs,length:kh,let:Yd,literal:os,match:hp,number:ss,"number-format":fp,object:ss,slice:Kd,step:Ha,string:ss,"to-boolean":Vs,"to-color":Vs,"to-number":Vs,"to-string":Vs,var:Ar,within:pa,distance:ls,config:tc};function mg(u,[i,a,h,g]){i=i.evaluate(u),a=a.evaluate(u),h=h.evaluate(u);const f=g?g.evaluate(u):1,_=Hd(i,a,h,f);if(_)throw new en(_);return new $t(i/255*f,a/255*f,h/255*f,f)}function pp(u,[i,a,h,g]){i=i.evaluate(u),a=a.evaluate(u),h=h.evaluate(u);const f=g?g.evaluate(u):1,_=function(z,x,T,I){return typeof z=="number"&&z>=0&&z<=360?typeof x=="number"&&x>=0&&x<=100&&typeof T=="number"&&T>=0&&T<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[z,x,T,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[z,x,T,I]:[z,x,T]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[z,x,T,I]:[z,x,T]).join(", ")}]: 'h' must be between 0 and 360.`}(i,a,h,f);if(_)throw new en(_);const w=`hsla(${i}, ${a}%, ${h}%, ${f})`,C=$t.parse(w);if(!C)throw new en(`Failed to parse HSLA color: ${w}`);return C}function mp(u,i){return u in i}function gp(u,i){const a=i[u];return a===void 0?null:a}function Fc(u){return{type:u}}function gg(u){return{result:"success",value:u}}function xl(u){return{result:"error",value:u}}function ef(u,i){return!!u&&!!u.parameters&&u.parameters.indexOf(i)>-1}function Nc(u){return u["property-type"]==="data-driven"}function _g(u){return ef(u.expression,"measure-light")}function _p(u){return ef(u.expression,"zoom")}function yp(u){return!!u.expression&&u.expression.interpolated}function vp(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function yg(u){return u}function xp(u,i){const a=i.type==="color",h=u.stops&&typeof u.stops[0][0]=="object",g=h||!(h||u.property!==void 0),f=u.type||(yp(i)?"exponential":"interval");if(a&&((u=Ht({},u)).stops&&(u.stops=u.stops.map(z=>[z[0],$t.parse(z[1])])),u.default=$t.parse(u.default?u.default:i.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!cg[u.colorSpace])throw new Error(`Unknown color space: ${u.colorSpace}`);let _,w,C;if(f==="exponential")_=bp;else if(f==="interval")_=bv;else if(f==="categorical"){_=xv,w=Object.create(null);for(const z of u.stops)w[z[0]]=z[1];C=typeof u.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);_=wv}if(h){const z={},x=[];for(let E=0;E<u.stops.length;E++){const A=u.stops[E],k=A[0].zoom;z[k]===void 0&&(z[k]={zoom:k,type:u.type,property:u.property,default:u.default,stops:[]},x.push(k)),z[k].stops.push([A[0].value,A[1]])}const T=[];for(const E of x)T.push([z[E].zoom,xp(z[E],i)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:zs.interpolationFactor.bind(void 0,I),zoomStops:T.map(E=>E[0]),evaluate:({zoom:E},A)=>bp({stops:T,base:u.base},i,E).evaluate(E,A)}}if(g){const z=f==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:zs.interpolationFactor.bind(void 0,z),zoomStops:u.stops.map(x=>x[0]),evaluate:({zoom:x})=>_(u,i,x,w,C)}}return{kind:"source",evaluate(z,x){const T=x&&x.properties?x.properties[u.property]:void 0;return T===void 0?Rh(u.default,i.default):_(u,i,T,w,C)}}}function Rh(u,i,a){return u!==void 0?u:i!==void 0?i:a!==void 0?a:void 0}function xv(u,i,a,h,g){return Rh(typeof a===g?h[a]:void 0,u.default,i.default)}function bv(u,i,a){if(Us(a)!=="number")return Rh(u.default,i.default);const h=u.stops.length;if(h===1||a<=u.stops[0][0])return u.stops[0][1];if(a>=u.stops[h-1][0])return u.stops[h-1][1];const g=qa(u.stops.map(f=>f[0]),a);return u.stops[g][1]}function bp(u,i,a){const h=u.base!==void 0?u.base:1;if(Us(a)!=="number")return Rh(u.default,i.default);const g=u.stops.length;if(g===1||a<=u.stops[0][0])return u.stops[0][1];if(a>=u.stops[g-1][0])return u.stops[g-1][1];const f=qa(u.stops.map(x=>x[0]),a),_=function(x,T,I,E){const A=E-I,k=x-I;return A===0?0:T===1?k/A:(Math.pow(T,k)-1)/(Math.pow(T,A)-1)}(a,h,u.stops[f][0],u.stops[f+1][0]),w=u.stops[f][1],C=u.stops[f+1][1];let z=hn[i.type]||yg;if(u.colorSpace&&u.colorSpace!=="rgb"){const x=cg[u.colorSpace];z=(T,I)=>x.reverse(x.interpolate(x.forward(T),x.forward(I),_))}return typeof w.evaluate=="function"?{evaluate(...x){const T=w.evaluate.apply(void 0,x),I=C.evaluate.apply(void 0,x);if(T!==void 0&&I!==void 0)return z(T,I,_)}}:z(w,C,_)}function wv(u,i,a){return i.type==="color"?a=$t.parse(a):i.type==="formatted"?a=no.fromString(a.toString()):i.type==="resolvedImage"?a=fo.fromString(a.toString()):Us(a)===i.type||i.type==="enum"&&i.values[a]||(a=void 0),Rh(a,u.default,i.default)}bo.register(vu,{error:[{kind:"error"},[Qi],(u,[i])=>{throw new en(i.evaluate(u))}],typeof:[Qi,[or],(u,[i])=>on(dn(i.evaluate(u)))],"to-rgba":[ho(Wt,4),[Er],(u,[i])=>i.evaluate(u).toRenderColor(null).toArray()],rgb:[Er,[Wt,Wt,Wt],mg],rgba:[Er,[Wt,Wt,Wt,Wt],mg],hsl:[Er,[Wt,Wt,Wt],pp],hsla:[Er,[Wt,Wt,Wt,Wt],pp],has:{type:rr,overloads:[[[Qi],(u,[i])=>mp(i.evaluate(u),u.properties())],[[Qi,ro],(u,[i,a])=>mp(i.evaluate(u),a.evaluate(u))]]},get:{type:or,overloads:[[[Qi],(u,[i])=>gp(i.evaluate(u),u.properties())],[[Qi,ro],(u,[i,a])=>gp(i.evaluate(u),a.evaluate(u))]]},"feature-state":[or,[Qi],(u,[i])=>gp(i.evaluate(u),u.featureState||{})],properties:[ro,[],u=>u.properties()],"geometry-type":[Qi,[],u=>u.geometryType()],id:[or,[],u=>u.id()],zoom:[Wt,[],u=>u.globals.zoom],pitch:[Wt,[],u=>u.globals.pitch||0],"distance-from-center":[Wt,[],u=>u.distanceFromCenter()],"measure-light":[Wt,[Qi],(u,[i])=>u.measureLight(i.evaluate(u))],"heatmap-density":[Wt,[],u=>u.globals.heatmapDensity||0],"line-progress":[Wt,[],u=>u.globals.lineProgress||0],"raster-value":[Wt,[],u=>u.globals.rasterValue||0],"raster-particle-speed":[Wt,[],u=>u.globals.rasterParticleSpeed||0],"sky-radial-progress":[Wt,[],u=>u.globals.skyRadialProgress||0],accumulated:[or,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Wt,Fc(Wt),(u,i)=>{let a=0;for(const h of i)a+=h.evaluate(u);return a}],"*":[Wt,Fc(Wt),(u,i)=>{let a=1;for(const h of i)a*=h.evaluate(u);return a}],"-":{type:Wt,overloads:[[[Wt,Wt],(u,[i,a])=>i.evaluate(u)-a.evaluate(u)],[[Wt],(u,[i])=>-i.evaluate(u)]]},"/":[Wt,[Wt,Wt],(u,[i,a])=>i.evaluate(u)/a.evaluate(u)],"%":[Wt,[Wt,Wt],(u,[i,a])=>i.evaluate(u)%a.evaluate(u)],ln2:[Wt,[],()=>Math.LN2],pi:[Wt,[],()=>Math.PI],e:[Wt,[],()=>Math.E],"^":[Wt,[Wt,Wt],(u,[i,a])=>Math.pow(i.evaluate(u),a.evaluate(u))],sqrt:[Wt,[Wt],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[Wt,[Wt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[Wt,[Wt],(u,[i])=>Math.log(i.evaluate(u))],log2:[Wt,[Wt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[Wt,[Wt],(u,[i])=>Math.sin(i.evaluate(u))],cos:[Wt,[Wt],(u,[i])=>Math.cos(i.evaluate(u))],tan:[Wt,[Wt],(u,[i])=>Math.tan(i.evaluate(u))],asin:[Wt,[Wt],(u,[i])=>Math.asin(i.evaluate(u))],acos:[Wt,[Wt],(u,[i])=>Math.acos(i.evaluate(u))],atan:[Wt,[Wt],(u,[i])=>Math.atan(i.evaluate(u))],min:[Wt,Fc(Wt),(u,i)=>Math.min(...i.map(a=>a.evaluate(u)))],max:[Wt,Fc(Wt),(u,i)=>Math.max(...i.map(a=>a.evaluate(u)))],abs:[Wt,[Wt],(u,[i])=>Math.abs(i.evaluate(u))],round:[Wt,[Wt],(u,[i])=>{const a=i.evaluate(u);return a<0?-Math.round(-a):Math.round(a)}],floor:[Wt,[Wt],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[Wt,[Wt],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[rr,[Qi,or],(u,[i,a])=>u.properties()[i.value]===a.value],"filter-id-==":[rr,[or],(u,[i])=>u.id()===i.value],"filter-type-==":[rr,[Qi],(u,[i])=>u.geometryType()===i.value],"filter-<":[rr,[Qi,or],(u,[i,a])=>{const h=u.properties()[i.value],g=a.value;return typeof h==typeof g&&h<g}],"filter-id-<":[rr,[or],(u,[i])=>{const a=u.id(),h=i.value;return typeof a==typeof h&&a<h}],"filter->":[rr,[Qi,or],(u,[i,a])=>{const h=u.properties()[i.value],g=a.value;return typeof h==typeof g&&h>g}],"filter-id->":[rr,[or],(u,[i])=>{const a=u.id(),h=i.value;return typeof a==typeof h&&a>h}],"filter-<=":[rr,[Qi,or],(u,[i,a])=>{const h=u.properties()[i.value],g=a.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[rr,[or],(u,[i])=>{const a=u.id(),h=i.value;return typeof a==typeof h&&a<=h}],"filter->=":[rr,[Qi,or],(u,[i,a])=>{const h=u.properties()[i.value],g=a.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[rr,[or],(u,[i])=>{const a=u.id(),h=i.value;return typeof a==typeof h&&a>=h}],"filter-has":[rr,[or],(u,[i])=>i.value in u.properties()],"filter-has-id":[rr,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[rr,[ho(Qi)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[rr,[ho(or)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[rr,[Qi,ho(or)],(u,[i,a])=>a.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[rr,[Qi,ho(or)],(u,[i,a])=>function(h,g,f,_){for(;f<=_;){const w=f+_>>1;if(g[w]===h)return!0;g[w]>h?_=w-1:f=w+1}return!1}(u.properties()[i.value],a.value,0,a.value.length-1)],all:{type:rr,overloads:[[[rr,rr],(u,[i,a])=>i.evaluate(u)&&a.evaluate(u)],[Fc(rr),(u,i)=>{for(const a of i)if(!a.evaluate(u))return!1;return!0}]]},any:{type:rr,overloads:[[[rr,rr],(u,[i,a])=>i.evaluate(u)||a.evaluate(u)],[Fc(rr),(u,i)=>{for(const a of i)if(a.evaluate(u))return!0;return!1}]]},"!":[rr,[rr],(u,[i])=>!i.evaluate(u)],"is-supported-script":[rr,[Qi],(u,[i])=>{const a=u.globals&&u.globals.isSupportedScript;return!a||a(i.evaluate(u))}],upcase:[Qi,[Qi],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[Qi,[Qi],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[Qi,Fc(or),(u,i)=>i.map(a=>oo(a.evaluate(u))).join("")],"resolved-locale":[Qi,[ns],(u,[i])=>i.evaluate(u).resolvedLocale()],random:[Wt,[Wt,Wt,or],(u,i)=>{const[a,h,g]=i.map(_=>_.evaluate(u));if(a>h||a===h)return a;let f;if(typeof g=="string")f=function(_){let w=0;if(_.length===0)return w;for(let C=0;C<_.length;C++)w=(w<<5)-w+_.charCodeAt(C),w|=0;return w}(g);else{if(typeof g!="number")throw new en(`Invalid seed input: ${g}`);f=g}return a+Qd(f)()*(h-a)}]});class wp{constructor(i,a,h,g){this.expression=i,this._warningHistory={},this._evaluator=new Oa(h,g),this._defaultValue=a?function(f){return f.type==="color"&&(vp(f.default)||Array.isArray(f.default))?new $t(0,0,0,0):f.type==="color"?$t.parse(f.default)||null:f.default===void 0?null:f.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null,this.configDependencies=Va(i)}evaluateWithoutErrorHandling(i,a,h,g,f,_,w,C){return this._evaluator.globals=i,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=C||null,this.expression.evaluate(this._evaluator)}evaluate(i,a,h,g,f,_,w,C){this._evaluator.globals=i,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=C||null;try{const z=this.expression.evaluate(this._evaluator);if(z==null||typeof z=="number"&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new en(`Expected value to be one of ${Object.keys(this._enumValues).map(x=>JSON.stringify(x)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console<"u"),this._defaultValue}}}function tf(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in vu}function xu(u,i,a,h){const g=new Ws(vu,[],i?function(_){const w={color:Er,string:Qi,number:Wt,enum:Qi,boolean:rr,formatted:al,resolvedImage:ll};return _.type==="array"?ho(w[_.value]||or,_.length):w[_.type]}(i):void 0,void 0,void 0,a,h),f=g.parse(u,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?gg(new wp(f,i,a,h)):xl(g.errors)}class rf{constructor(i,a,h){this.kind=i,this._styleExpression=a,this.isLightConstant=h,this.isStateDependent=i!=="constant"&&!$r(a.expression),this.configDependencies=Va(a.expression)}evaluateWithoutErrorHandling(i,a,h,g,f,_){return this._styleExpression.evaluateWithoutErrorHandling(i,a,h,g,f,_)}evaluate(i,a,h,g,f,_){return this._styleExpression.evaluate(i,a,h,g,f,_)}}class Lh{constructor(i,a,h,g,f){this.kind=i,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=i!=="camera"&&!$r(a.expression),this.isLightConstant=f,this.configDependencies=Va(a.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,a,h,g,f,_){return this._styleExpression.evaluateWithoutErrorHandling(i,a,h,g,f,_)}evaluate(i,a,h,g,f,_){return this._styleExpression.evaluate(i,a,h,g,f,_)}interpolationFactor(i,a,h){return this.interpolationType?zs.interpolationFactor(this.interpolationType,i,a,h):0}}function $c(u,i,a,h){if((u=xu(u,i,a,h)).result==="error")return u;const g=u.value.expression,f=qr(g);if(!f&&!Nc(i))return xl([new wi("","data expressions not supported")]);const _=Xo(g,["zoom","pitch","distance-from-center"]);if(!_&&!_p(i))return xl([new wi("","zoom expressions not supported")]);const w=Xo(g,["measure-light"]);if(!w&&!_g(i))return xl([new wi("","measure-light expression not supported")]);const C=Xo(g,["line-progress"]);if(!C&&!function(T){return ef(T.expression,"line-progress")}(i))return xl([new wi("","line-progress expression not supported")]);const z=i.expression&&i.expression.relaxZoomRestriction,x=of(g);return x||_||z?x instanceof wi?xl([x]):x instanceof zs&&!yp(i)?xl([new wi("",'"interpolate" expressions cannot be used with this property')]):gg(x?new Lh(f&&C?"camera":"composite",u.value,x.labels,x instanceof zs?x.interpolation:void 0,w):new rf(f&&C?"constant":"source",u.value,w)):xl([new wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class nf{constructor(i,a){this._parameters=i,this._specification=a,Ht(this,xp(this._parameters,this._specification))}static deserialize(i){return new nf(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function of(u){let i=null;if(u instanceof Yd)i=of(u.result);else if(u instanceof Xd){for(const a of u.args)if(i=of(a),i)break}else(u instanceof Ha||u instanceof zs)&&u.input instanceof bo&&u.input.name==="zoom"&&(i=u);return i instanceof wi||u.eachChild(a=>{const h=of(a);h instanceof wi?i=h:i&&h&&i!==h&&(i=new wi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}var Sp,Mp,vg=function(){if(Mp)return Sp;Mp=1,Sp=i;var u=3;function i(a,h,g){var f=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var _=new Int32Array(this.arrayBuffer);a=_[0],this.d=(h=_[1])+2*(g=_[2]);for(var w=0;w<this.d*this.d;w++){var C=_[u+w],z=_[u+w+1];f.push(C===z?null:_.subarray(C,z))}var x=_[u+f.length+1];this.keys=_.subarray(_[u+f.length],x),this.bboxes=_.subarray(x),this.insert=this._insertReadonly}else{this.d=h+2*g;for(var T=0;T<this.d*this.d;T++)f.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=a,this.padding=g,this.scale=h/a,this.uid=0;var I=g/h*a;this.min=-I,this.max=a+I}return i.prototype.insert=function(a,h,g,f,_){this._forEachCell(h,g,f,_,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(f),this.bboxes.push(_)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(a,h,g,f,_,w){this.cells[_].push(w)},i.prototype.query=function(a,h,g,f,_){var w=this.min,C=this.max;if(a<=w&&h<=w&&C<=g&&C<=f&&!_)return Array.prototype.slice.call(this.keys);var z=[];return this._forEachCell(a,h,g,f,this._queryCell,z,{},_),z},i.prototype._queryCell=function(a,h,g,f,_,w,C,z){var x=this.cells[_];if(x!==null)for(var T=this.keys,I=this.bboxes,E=0;E<x.length;E++){var A=x[E];if(C[A]===void 0){var k=4*A;(z?z(I[k+0],I[k+1],I[k+2],I[k+3]):a<=I[k+2]&&h<=I[k+3]&&g>=I[k+0]&&f>=I[k+1])?(C[A]=!0,w.push(T[A])):C[A]=!1}}},i.prototype._forEachCell=function(a,h,g,f,_,w,C,z){for(var x=this._convertToCellCoord(a),T=this._convertToCellCoord(h),I=this._convertToCellCoord(g),E=this._convertToCellCoord(f),A=x;A<=I;A++)for(var k=T;k<=E;k++){var B=this.d*k+A;if((!z||z(this._convertFromCellCoord(A),this._convertFromCellCoord(k),this._convertFromCellCoord(A+1),this._convertFromCellCoord(k+1)))&&_.call(this,a,h,g,f,B,w,C,z))return}},i.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},i.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,h=u+this.cells.length+1+1,g=0,f=0;f<this.cells.length;f++)g+=this.cells[f].length;var _=new Int32Array(h+g+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var w=h,C=0;C<a.length;C++){var z=a[C];_[u+C]=w,_.set(z,w),w+=z.length}return _[u+a.length]=w,_.set(this.keys,w),_[u+a.length+1]=w+=this.keys.length,_.set(this.bboxes,w),w+=this.bboxes.length,_.buffer},Sp}(),jc=M(vg);const Oh={};function ti(u,i,a={}){Object.defineProperty(u,"_classRegistryKey",{value:i,writable:!1}),Oh[i]={klass:u,omit:a.omit||[]}}ti(Object,"Object"),jc.serialize=function(u,i){const a=u.toArrayBuffer();return i&&i.add(a),{buffer:a}},jc.deserialize=function(u){return new jc(u.buffer)},Object.defineProperty(jc,"name",{value:"Grid"}),ti(jc,"Grid"),ti($t,"Color"),ti(Error,"Error"),ti(no,"Formatted"),ti(ko,"FormattedSection"),ti(ua,"AJAXError"),ti(fo,"ResolvedImage"),ti(nf,"StylePropertyFunction"),ti(wp,"StyleExpression",{omit:["_evaluator"]}),ti(Lh,"ZoomDependentExpression"),ti(rf,"ZoomConstantExpression"),ti(bo,"CompoundExpression",{omit:["_evaluate"]});for(const u in vu)Oh[vu[u]._classRegistryKey]||ti(vu[u],`Expression${u}`);function sf(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Ep(u){return self.ImageBitmap&&u instanceof ImageBitmap}function Uc(u,i){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(sf(u)||Ep(u))return i&&i.add(u),u;if(ArrayBuffer.isView(u)){const a=u;return i&&i.add(a.buffer),a}if(u instanceof ImageData)return i&&i.add(u.data.buffer),u;if(Array.isArray(u)){const a=[];for(const h of u)a.push(Uc(h,i));return a}if(u instanceof Map){const a={$name:"Map"};for(const[h,g]of u.entries())a[h]=Uc(g);return a}if(u instanceof Set){const a={$name:"Set"};let h=0;for(const g of u.values())a[++h]=Uc(g);return a}if(typeof u=="object"){const a=u.constructor,h=a._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const g=a.serialize?a.serialize(u,i):{};if(!a.serialize){for(const f in u)u.hasOwnProperty(f)&&(Oh[h].omit.indexOf(f)>=0||(g[f]=Uc(u[f],i)));u instanceof Error&&(g.message=u.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof u)}function cs(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||sf(u)||Ep(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(cs);if(typeof u=="object"){const i=u.$name||"Object";if(i==="Map"){const g=new Map;for(const f of Object.keys(u))f!=="$name"&&g.set(f,cs(u[f]));return g}if(i==="Set"){const g=new Set;for(const f of Object.keys(u))f!=="$name"&&g.add(cs(u[f]));return g}const{klass:a}=Oh[i];if(!a)throw new Error(`can't deserialize unregistered class ${i}`);if(a.deserialize)return a.deserialize(u);const h=Object.create(a.prototype);for(const g of Object.keys(u))g!=="$name"&&(h[g]=cs(u[g]));return h}throw new Error("can't deserialize object of type "+typeof u)}const di={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519,Osage:u=>u>=66736&&u<=66815,"CJK Unified Ideographs Extension B":u=>u>=131072&&u<=173791};function Tp(u){for(const i of u)if(bu(i.charCodeAt(0)))return!0;return!1}function xg(u){for(const i of u)if(!Sv(i.charCodeAt(0)))return!1;return!0}function Sv(u){return!(di.Arabic(u)||di["Arabic Supplement"](u)||di["Arabic Extended-A"](u)||di["Arabic Presentation Forms-A"](u)||di["Arabic Presentation Forms-B"](u))}function bu(u){return!(u!==746&&u!==747&&(u<4352||!(di["Bopomofo Extended"](u)||di.Bopomofo(u)||di["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||di["CJK Compatibility Ideographs"](u)||di["CJK Compatibility"](u)||di["CJK Radicals Supplement"](u)||di["CJK Strokes"](u)||!(!di["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||di["CJK Unified Ideographs Extension A"](u)||di["CJK Unified Ideographs"](u)||di["Enclosed CJK Letters and Months"](u)||di["Hangul Compatibility Jamo"](u)||di["Hangul Jamo Extended-A"](u)||di["Hangul Jamo Extended-B"](u)||di["Hangul Jamo"](u)||di["Hangul Syllables"](u)||di.Hiragana(u)||di["Ideographic Description Characters"](u)||di.Kanbun(u)||di["Kangxi Radicals"](u)||di["Katakana Phonetic Extensions"](u)||di.Katakana(u)&&u!==12540||!(!di["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!di["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||di["Unified Canadian Aboriginal Syllabics"](u)||di["Unified Canadian Aboriginal Syllabics Extended"](u)||di["Vertical Forms"](u)||di["Yijing Hexagram Symbols"](u)||di["Yi Syllables"](u)||di["Yi Radicals"](u))))}function Cp(u){return!(bu(u)||function(i){return!!(di["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||di["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||di["Letterlike Symbols"](i)||di["Number Forms"](i)||di["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||di["Control Pictures"](i)&&i!==9251||di["Optical Character Recognition"](i)||di["Enclosed Alphanumerics"](i)||di["Geometric Shapes"](i)||di["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||di["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||di["CJK Symbols and Punctuation"](i)||di.Katakana(i)||di["Private Use Area"](i)||di["CJK Compatibility Forms"](i)||di["Small Form Variants"](i)||di["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(u))}function Bh(u){return u>=1424&&u<=2303||di["Arabic Presentation Forms-A"](u)||di["Arabic Presentation Forms-B"](u)}function bg(u,i){return!(!i&&Bh(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||di.Khmer(u))}function Mv(u){for(const i of u)if(Bh(i.charCodeAt(0)))return!0;return!1}const Ap="deferred",Fh="loading",Nh="loaded";let af=null,wo="unavailable",Ds=null;const wg=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(wo="error"),af&&af(u)};function Ip(){zp.fire(new qe("pluginStateChange",{pluginStatus:wo,pluginURL:Ds}))}const zp=new Jt,Dp=function(){return wo},Sg=function(){if(wo!==Ap||!Ds)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");wo=Fh,Ip(),Ds&&Xl({url:Ds},u=>{u?wg(u):(wo=Nh,Ip())})},Ps={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>wo===Nh||Ps.applyArabicShaping!=null,isLoading:()=>wo===Fh,setState(u){wo=u.pluginStatus,Ds=u.pluginURL},isParsed:()=>Ps.applyArabicShaping!=null&&Ps.processBidirectionalText!=null&&Ps.processStyledBidirectionalText!=null,getPluginURL:()=>Ds};class fn{constructor(i,a){this.zoom=i,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch,this.brightness=a.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(i){return function(a,h){for(const g of a)if(!bg(g.charCodeAt(0),h))return!1;return!0}(i,Ps.isLoaded())}}class lf{constructor(i,a,h,g){this.property=i,this.value=a,this.expression=function(f,_,w,C){if(vp(f))return new nf(f,_);if(tf(f)||Array.isArray(f)&&f.length>0){const z=$c(f,_,w,C);if(z.result==="error")throw new Error(z.value.map(x=>`${x.key}: ${x.message}`).join(", "));return z.value}{let z=f;return typeof f=="string"&&_.type==="color"&&(z=$t.parse(f)),{kind:"constant",configDependencies:new Set,evaluate:()=>z}}}(a===void 0?i.specification.default:a,i.specification,h,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,a,h){return this.property.possiblyEvaluate(this,i,a,h)}}class Pp{constructor(i,a,h){this.property=i,this.value=new lf(i,void 0,a,h)}transitioned(i,a){return new Eg(this.property,this.value,a,Gi({},i.transition,this.transition),i.now)}untransitioned(){return new Eg(this.property,this.value,null,{},0)}}class Mg{constructor(i,a,h){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._scope=a,this._options=h,this.configDependencies=new Set}getValue(i){return to(this._values[i].value.value)}setValue(i,a){this._values.hasOwnProperty(i)||(this._values[i]=new Pp(this._values[i].property,this._scope,this._options)),this._values[i].value=new lf(this._values[i].property,a===null?void 0:to(a),this._scope,this._options),this._values[i].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].value.expression.configDependencies]))}setTransitionOrValue(i,a){a&&(this._options=a);const h=this._properties.properties;if(i)for(const g in i){const f=i[g];if(Po(g,"-transition")){const _=g.slice(0,-11);h[_]&&this.setTransition(_,f)}else h.hasOwnProperty(g)&&this.setValue(g,f)}}getTransition(i){return to(this._values[i].transition)}setTransition(i,a){this._values.hasOwnProperty(i)||(this._values[i]=new Pp(this._values[i].property)),this._values[i].transition=to(a)||void 0}serialize(){const i={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(i[a]=h);const g=this.getTransition(a);g!==void 0&&(i[`${a}-transition`]=g)}return i}transitioned(i,a){const h=new Tg(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(i,a._values[g]);return h}untransitioned(){const i=new Tg(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].untransitioned();return i}}class Eg{constructor(i,a,h,g,f){const _=g.delay||0,w=g.duration||0;f=f||0,this.property=i,this.value=a,this.begin=f+_,this.end=this.begin+w,i.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(i,a,h){const g=i.now||0,f=this.value.possiblyEvaluate(i,a,h),_=this.prior;if(_){if(g>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(g<this.begin)return _.possiblyEvaluate(i,a,h);{const w=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(i,a,h),f,Do(w))}}return f}}class Tg{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,a,h){const g=new Su(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(i,a,h);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Ev{constructor(i,a,h){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._scope=a,this._options=h,this.configDependencies=new Set}getValue(i){return to(this._values[i].value)}setValue(i,a){this._values[i]=new lf(this._values[i].property,a===null?void 0:to(a),this._scope,this._options),this._values[i].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].expression.configDependencies]))}serialize(){const i={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(i[a]=h)}return i}possiblyEvaluate(i,a,h){const g=new Su(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(i,a,h);return g}}class wu{constructor(i,a,h){this.property=i,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,a,h,g){return this.property.evaluate(this.value,this.parameters,i,a,h,g)}}class Su{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Ft{constructor(i){this.specification=i}possiblyEvaluate(i,a){return i.expression.evaluate(a)}interpolate(i,a,h){const g=hn[this.specification.type];return g?g(i,a,h):i}}class pi{constructor(i,a){this.specification=i,this.overrides=a}possiblyEvaluate(i,a,h,g){return new wu(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(a,null,{},h,g)}:i.expression,a)}interpolate(i,a,h){if(i.value.kind!=="constant"||a.value.kind!=="constant")return i;if(i.value.value===void 0||a.value.value===void 0)return new wu(this,{kind:"constant",value:void 0},i.parameters);const g=hn[this.specification.type];return g?new wu(this,{kind:"constant",value:g(i.value.value,a.value.value,h)},i.parameters):i}evaluate(i,a,h,g,f,_){return i.kind==="constant"?i.value:i.evaluate(a,h,g,f,_)}}class Mu{constructor(i){this.specification=i}possiblyEvaluate(i,a,h,g){return!!i.expression.evaluate(a,null,{},h,g)}interpolate(){return!1}}class Hr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new fn(0,{});for(const h in i){const g=i[h];g.specification.overridable&&this.overridableProperties.push(h);const f=this.defaultPropertyValues[h]=new lf(g,void 0),_=this.defaultTransitionablePropertyValues[h]=new Pp(g);this.defaultTransitioningPropertyValues[h]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=f.possiblyEvaluate(a)}}}ti(pi,"DataDrivenProperty"),ti(Ft,"DataConstantProperty"),ti(Mu,"ColorRampProperty");var it=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"centerThinning":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,90],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"rain":{"density":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"centerThinning":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function kp(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Vc(u){if(Array.isArray(u))return u.map(Vc);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const a in u)i[a]=Vc(u[a]);return i}return kp(u)}function Rp(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!Rp(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function cf(u,i="",a=null,h="fill"){if(u==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Rp(u)||(u=uf(u));const g=u;let f=!0;try{f=function(x){if(!ya(x))return x;let T=Vc(x);return Lp(T),T=bl(T),T}(g)}catch{}let _=null,w=null;if(h!=="background"&&h!=="sky"&&h!=="slot"){w=it[`filter_${h}`];const x=xu(f,w,i,a);if(x.result==="error")throw new Error(x.value.map(T=>`${T.key}: ${T.message}`).join(", "));_=(T,I,E)=>x.value.evaluate(T,I,{},E)}let C=null,z=null;if(f!==g){const x=xu(g,w,i,a);if(x.result==="error")throw new Error(x.value.map(T=>`${T.key}: ${T.message}`).join(", "));C=(T,I,E,A,k)=>x.value.evaluate(T,I,{},E,void 0,void 0,A,k),z=!qr(x.value.expression)}return{filter:_,dynamicFilter:C||void 0,needGeometry:Cg(f),needFeature:!!z}}function bl(u){if(!Array.isArray(u))return u;const i=function(a){if(Tv.has(a[0])){for(let h=1;h<a.length;h++)if(ya(a[h]))return!0}return a}(u);return i===!0?i:i.map(a=>bl(a))}function Lp(u){let i=!1;const a=[];if(u[0]==="case"){for(let h=1;h<u.length-1;h+=2)i=i||ya(u[h]),a.push(u[h+1]);a.push(u[u.length-1])}else if(u[0]==="match"){i=i||ya(u[1]);for(let h=2;h<u.length-1;h+=2)a.push(u[h+1]);a.push(u[u.length-1])}else if(u[0]==="step"){i=i||ya(u[1]);for(let h=1;h<u.length-1;h+=2)a.push(u[h+1])}i&&(u.length=0,u.push("any",...a));for(let h=1;h<u.length;h++)Lp(u[h])}function ya(u){if(!Array.isArray(u))return!1;if((i=u[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let a=1;a<u.length;a++)if(ya(u[a]))return!0;return!1}const Tv=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Cv(u,i){return u<i?-1:u>i?1:0}function Cg(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let i=1;i<u.length;i++)if(Cg(u[i]))return!0;return!1}function uf(u){if(!u)return!0;const i=u[0];return u.length<=1?i!=="any":i==="=="?Op(u[1],u[2],"=="):i==="!="?qc(Op(u[1],u[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Op(u[1],u[2],i):i==="any"?(a=u.slice(1),["any"].concat(a.map(uf))):i==="all"?["all"].concat(u.slice(1).map(uf)):i==="none"?["all"].concat(u.slice(1).map(uf).map(qc)):i==="in"?Bp(u[1],u.slice(2)):i==="!in"?qc(Bp(u[1],u.slice(2))):i==="has"?hf(u[1]):i!=="!has"||qc(hf(u[1]));var a}function Op(u,i,a){switch(u){case"$type":return[`filter-type-${a}`,i];case"$id":return[`filter-id-${a}`,i];default:return[`filter-${a}`,u,i]}}function Bp(u,i){if(i.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(a=>typeof a!=typeof i[0])?["filter-in-large",u,["literal",i.sort(Cv)]]:["filter-in-small",u,["literal",i]]}}function hf(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function qc(u){return["!",u]}const $h="";function df(u,i){return i?`${u}${$h}${i}`:u}const Ag="-transition",Wa=new Set(["fill","line","background","hillshade","raster"]);class Yo extends Jt{constructor(i,a,h,g,f){if(super(),this.id=i.id,this.fqid=df(this.id,h),this.type=i.type,this.scope=h,this.lut=g,this.options=f,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,i.type!=="custom"){if(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type&&i.type!=="background"&&i.type!=="sky"&&i.type!=="slot"){this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter;const _=xu(this.filter,it[`filter_${i.type}`]);_.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,..._.value.configDependencies]))}if(i.slot&&(this.slot=i.slot),a.layout&&(this._unevaluatedLayout=new Ev(a.layout,this.scope,f),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),a.paint){this._transitionablePaint=new Mg(a.paint,this.scope,f);for(const _ in i.paint)this.setPaintProperty(_,i.paint[_]);for(const _ in i.layout)this.setLayoutProperty(_,i.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Su(a.paint)}}}onAdd(i){}onRemove(i){}isDraped(i){return!this.is3D()&&Wa.has(this.type)}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,a){if(this.type==="custom"&&i==="visibility")return void(this.visibility=a);const h=this._unevaluatedLayout;h._properties.properties[i]&&(h.setValue(i,a),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),i==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(i){return Po(i,Ag)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,a){const h=this._transitionablePaint,g=h._properties.properties;if(Po(i,Ag)){const T=i.slice(0,-11);return g[T]&&h.setTransition(T,a||void 0),!1}if(!g[i])return!1;const f=h._values[i],_=f.value.isDataDriven(),w=f.value;h.setValue(i,a),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),this._handleSpecialPaintPropertyUpdate(i);const C=h._values[i].value,z=C.isDataDriven(),x=Po(i,"pattern")||i==="line-dasharray";return z||_||x||this._handleOverridablePaintPropertyUpdate(i,w,C)}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getDefaultProgramParams(i,a,h){return null}_handleOverridablePaintPropertyUpdate(i,a,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,a)}serialize(){return vo({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(i,a)=>!(i===void 0||a==="layout"&&!Object.keys(i).length||a==="paint"&&!Object.keys(i).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const i in this.paint._values){const a=this.paint.get(i);if(a instanceof wu&&Nc(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(i){this._filterCompiled||(this._featureFilter=cf(this.filter,this.scope,i),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(i){this._stats&&(i.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(i){}queryIntersectsFeature(i,a,h,g,f,_,w,C,z){}queryIntersectsMatchingFeature(i,a,h,g){}}const Ig={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class jh{constructor(i,a){this._structArray=i,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,a){return i._trim(),a&&(i.isTransferred=!0,a.add(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const a=Object.create(this.prototype);return a.arrayBuffer=i.arrayBuffer,a.length=i.length,a.capacity=i.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...i){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...i){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function dr(u,i=1){let a=0,h=0;return{members:u.map(g=>{const f=Ig[g.type].BYTES_PER_ELEMENT,_=a=zg(a,Math.max(i,f)),w=g.components||1;return h=Math.max(h,f),a+=f*w,{name:g.name,type:g.type,components:w,offset:_}}),size:zg(a,Math.max(h,i)),alignment:i}}function zg(u,i){return Math.ceil(u/i)*i}class nc extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const g=2*i;return this.int16[g+0]=a,this.int16[g+1]=h,i}}nc.prototype.bytesPerElement=4,ti(nc,"StructArrayLayout2i4");class ff extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const f=3*i;return this.int16[f+0]=a,this.int16[f+1]=h,this.int16[f+2]=g,i}}ff.prototype.bytesPerElement=6,ti(ff,"StructArrayLayout3i6");class Eu extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,i,a,h,g)}emplace(i,a,h,g,f){const _=4*i;return this.int16[_+0]=a,this.int16[_+1]=h,this.int16[_+2]=g,this.int16[_+3]=f,i}}Eu.prototype.bytesPerElement=8,ti(Eu,"StructArrayLayout4i8");class Fp extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,h,g,f)}emplace(i,a,h,g,f,_){const w=5*i;return this.int16[w+0]=a,this.int16[w+1]=h,this.int16[w+2]=g,this.int16[w+3]=f,this.int16[w+4]=_,i}}Fp.prototype.bytesPerElement=10,ti(Fp,"StructArrayLayout5i10");class Uh extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,a,h,g,f,_,w)}emplace(i,a,h,g,f,_,w,C){const z=6*i,x=12*i,T=3*i;return this.int16[z+0]=a,this.int16[z+1]=h,this.uint8[x+4]=g,this.uint8[x+5]=f,this.uint8[x+6]=_,this.uint8[x+7]=w,this.float32[T+2]=C,i}}Uh.prototype.bytesPerElement=12,ti(Uh,"StructArrayLayout2i4ub1f12");class wl extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,i,a,h,g)}emplace(i,a,h,g,f){const _=4*i;return this.float32[_+0]=a,this.float32[_+1]=h,this.float32[_+2]=g,this.float32[_+3]=f,i}}wl.prototype.bytesPerElement=16,ti(wl,"StructArrayLayout4f16");class oc extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const f=3*i;return this.float32[f+0]=a,this.float32[f+1]=h,this.float32[f+2]=g,i}}oc.prototype.bytesPerElement=12,ti(oc,"StructArrayLayout3f12");class Sl extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,h,g,f)}emplace(i,a,h,g,f,_){const w=6*i,C=3*i;return this.uint16[w+0]=a,this.uint16[w+1]=h,this.uint16[w+2]=g,this.uint16[w+3]=f,this.float32[C+2]=_,i}}Sl.prototype.bytesPerElement=12,ti(Sl,"StructArrayLayout4ui1f12");class pf extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,i,a,h,g)}emplace(i,a,h,g,f){const _=4*i;return this.uint16[_+0]=a,this.uint16[_+1]=h,this.uint16[_+2]=g,this.uint16[_+3]=f,i}}pf.prototype.bytesPerElement=8,ti(pf,"StructArrayLayout4ui8");class Vh extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,h,g,f,_)}emplace(i,a,h,g,f,_,w){const C=6*i;return this.int16[C+0]=a,this.int16[C+1]=h,this.int16[C+2]=g,this.int16[C+3]=f,this.int16[C+4]=_,this.int16[C+5]=w,i}}Vh.prototype.bytesPerElement=12,ti(Vh,"StructArrayLayout6i12");class Tu extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w,C,z,x,T,I){const E=this.length;return this.resize(E+1),this.emplace(E,i,a,h,g,f,_,w,C,z,x,T,I)}emplace(i,a,h,g,f,_,w,C,z,x,T,I,E){const A=12*i;return this.int16[A+0]=a,this.int16[A+1]=h,this.int16[A+2]=g,this.int16[A+3]=f,this.uint16[A+4]=_,this.uint16[A+5]=w,this.uint16[A+6]=C,this.uint16[A+7]=z,this.int16[A+8]=x,this.int16[A+9]=T,this.int16[A+10]=I,this.int16[A+11]=E,i}}Tu.prototype.bytesPerElement=24,ti(Tu,"StructArrayLayout4i4ui4i24");class Np extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,h,g,f,_)}emplace(i,a,h,g,f,_,w){const C=10*i,z=5*i;return this.int16[C+0]=a,this.int16[C+1]=h,this.int16[C+2]=g,this.float32[z+2]=f,this.float32[z+3]=_,this.float32[z+4]=w,i}}Np.prototype.bytesPerElement=20,ti(Np,"StructArrayLayout3i3f20");class $p extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint32[1*i+0]=a,i}}$p.prototype.bytesPerElement=4,ti($p,"StructArrayLayout1ul4");class sc extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const g=2*i;return this.uint16[g+0]=a,this.uint16[g+1]=h,i}}sc.prototype.bytesPerElement=4,ti(sc,"StructArrayLayout2ui4");class jp extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w,C,z,x,T,I,E){const A=this.length;return this.resize(A+1),this.emplace(A,i,a,h,g,f,_,w,C,z,x,T,I,E)}emplace(i,a,h,g,f,_,w,C,z,x,T,I,E,A){const k=20*i,B=10*i;return this.int16[k+0]=a,this.int16[k+1]=h,this.int16[k+2]=g,this.int16[k+3]=f,this.int16[k+4]=_,this.float32[B+3]=w,this.float32[B+4]=C,this.float32[B+5]=z,this.float32[B+6]=x,this.int16[k+14]=T,this.uint32[B+8]=I,this.uint16[k+18]=E,this.uint16[k+19]=A,i}}jp.prototype.bytesPerElement=40,ti(jp,"StructArrayLayout5i4f1i1ul2ui40");class mf extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,a,h,g,f,_,w)}emplace(i,a,h,g,f,_,w,C){const z=8*i;return this.int16[z+0]=a,this.int16[z+1]=h,this.int16[z+2]=g,this.int16[z+4]=f,this.int16[z+5]=_,this.int16[z+6]=w,this.int16[z+7]=C,i}}mf.prototype.bytesPerElement=16,ti(mf,"StructArrayLayout3i2i2i16");class Cu extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,h,g,f)}emplace(i,a,h,g,f,_){const w=4*i,C=8*i;return this.float32[w+0]=a,this.float32[w+1]=h,this.float32[w+2]=g,this.int16[C+6]=f,this.int16[C+7]=_,i}}Cu.prototype.bytesPerElement=16,ti(Cu,"StructArrayLayout2f1f2i16");class Au extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,h,g,f,_)}emplace(i,a,h,g,f,_,w){const C=20*i,z=5*i;return this.uint8[C+0]=a,this.uint8[C+1]=h,this.float32[z+1]=g,this.float32[z+2]=f,this.float32[z+3]=_,this.float32[z+4]=w,i}}Au.prototype.bytesPerElement=20,ti(Au,"StructArrayLayout2ub4f20");class rn extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h)}emplace(i,a,h,g){const f=3*i;return this.uint16[f+0]=a,this.uint16[f+1]=h,this.uint16[f+2]=g,i}}rn.prototype.bytesPerElement=6,ti(rn,"StructArrayLayout3ui6");class Iu extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$,H,G,U,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$,H,G,U,Y)}emplace(i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$,H,G,U,Y,Q){const se=30*i,xe=15*i,pe=60*i;return this.int16[se+0]=a,this.int16[se+1]=h,this.int16[se+2]=g,this.float32[xe+2]=f,this.float32[xe+3]=_,this.uint16[se+8]=w,this.uint16[se+9]=C,this.uint32[xe+5]=z,this.uint32[xe+6]=x,this.uint32[xe+7]=T,this.uint16[se+16]=I,this.uint16[se+17]=E,this.uint16[se+18]=A,this.float32[xe+10]=k,this.float32[xe+11]=B,this.uint8[pe+48]=$,this.uint8[pe+49]=H,this.uint8[pe+50]=G,this.uint32[xe+13]=U,this.int16[se+28]=Y,this.uint8[pe+58]=Q,i}}Iu.prototype.bytesPerElement=60,ti(Iu,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Up extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$,H,G,U,Y,Q,se,xe,pe,ge,Pe,me,Ie,Fe,Ne,He){const et=this.length;return this.resize(et+1),this.emplace(et,i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$,H,G,U,Y,Q,se,xe,pe,ge,Pe,me,Ie,Fe,Ne,He)}emplace(i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$,H,G,U,Y,Q,se,xe,pe,ge,Pe,me,Ie,Fe,Ne,He,et){const rt=20*i,Ye=40*i,_t=80*i;return this.float32[rt+0]=a,this.float32[rt+1]=h,this.int16[Ye+4]=g,this.int16[Ye+5]=f,this.int16[Ye+6]=_,this.int16[Ye+7]=w,this.int16[Ye+8]=C,this.int16[Ye+9]=z,this.int16[Ye+10]=x,this.int16[Ye+11]=T,this.int16[Ye+12]=I,this.uint16[Ye+13]=E,this.uint16[Ye+14]=A,this.uint16[Ye+15]=k,this.uint16[Ye+16]=B,this.uint16[Ye+17]=$,this.uint16[Ye+18]=H,this.uint16[Ye+19]=G,this.uint16[Ye+20]=U,this.uint16[Ye+21]=Y,this.uint16[Ye+22]=Q,this.uint16[Ye+23]=se,this.uint16[Ye+24]=xe,this.uint16[Ye+25]=pe,this.uint16[Ye+26]=ge,this.uint16[Ye+27]=Pe,this.uint32[rt+14]=me,this.float32[rt+15]=Ie,this.float32[rt+16]=Fe,this.float32[rt+17]=Ne,this.float32[rt+18]=He,this.uint8[_t+76]=et,i}}Up.prototype.bytesPerElement=80,ti(Up,"StructArrayLayout2f9i15ui1ul4f1ub80");class zu extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.float32[1*i+0]=a,i}}zu.prototype.bytesPerElement=4,ti(zu,"StructArrayLayout1f4");class Hc extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f){const _=this.length;return this.resize(_+1),this.emplace(_,i,a,h,g,f)}emplace(i,a,h,g,f,_){const w=5*i;return this.float32[w+0]=a,this.float32[w+1]=h,this.float32[w+2]=g,this.float32[w+3]=f,this.float32[w+4]=_,i}}Hc.prototype.bytesPerElement=20,ti(Hc,"StructArrayLayout5f20");class Vp extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,a,h,g,f,_,w)}emplace(i,a,h,g,f,_,w,C){const z=7*i;return this.float32[z+0]=a,this.float32[z+1]=h,this.float32[z+2]=g,this.float32[z+3]=f,this.float32[z+4]=_,this.float32[z+5]=w,this.float32[z+6]=C,i}}Vp.prototype.bytesPerElement=28,ti(Vp,"StructArrayLayout7f28");class gf extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w,C,z,x,T){const I=this.length;return this.resize(I+1),this.emplace(I,i,a,h,g,f,_,w,C,z,x,T)}emplace(i,a,h,g,f,_,w,C,z,x,T,I){const E=11*i;return this.float32[E+0]=a,this.float32[E+1]=h,this.float32[E+2]=g,this.float32[E+3]=f,this.float32[E+4]=_,this.float32[E+5]=w,this.float32[E+6]=C,this.float32[E+7]=z,this.float32[E+8]=x,this.float32[E+9]=T,this.float32[E+10]=I,i}}gf.prototype.bytesPerElement=44,ti(gf,"StructArrayLayout11f44");class Dg extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w,C,z){const x=this.length;return this.resize(x+1),this.emplace(x,i,a,h,g,f,_,w,C,z)}emplace(i,a,h,g,f,_,w,C,z,x){const T=9*i;return this.float32[T+0]=a,this.float32[T+1]=h,this.float32[T+2]=g,this.float32[T+3]=f,this.float32[T+4]=_,this.float32[T+5]=w,this.float32[T+6]=C,this.float32[T+7]=z,this.float32[T+8]=x,i}}Dg.prototype.bytesPerElement=36,ti(Dg,"StructArrayLayout9f36");class qh extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,i,a,h,g)}emplace(i,a,h,g,f){const _=6*i;return this.uint32[3*i+0]=a,this.uint16[_+2]=h,this.uint16[_+3]=g,this.uint16[_+4]=f,i}}qh.prototype.bytesPerElement=12,ti(qh,"StructArrayLayout1ul3ui12");class qp extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint16[1*i+0]=a,i}}qp.prototype.bytesPerElement=2,ti(qp,"StructArrayLayout1ui2");class Hh extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const g=2*i;return this.float32[g+0]=a,this.float32[g+1]=h,i}}Hh.prototype.bytesPerElement=8,ti(Hh,"StructArrayLayout2f8");class Gh extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B){const $=this.length;return this.resize($+1),this.emplace($,i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B)}emplace(i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$){const H=16*i;return this.float32[H+0]=a,this.float32[H+1]=h,this.float32[H+2]=g,this.float32[H+3]=f,this.float32[H+4]=_,this.float32[H+5]=w,this.float32[H+6]=C,this.float32[H+7]=z,this.float32[H+8]=x,this.float32[H+9]=T,this.float32[H+10]=I,this.float32[H+11]=E,this.float32[H+12]=A,this.float32[H+13]=k,this.float32[H+14]=B,this.float32[H+15]=$,i}}Gh.prototype.bytesPerElement=64,ti(Gh,"StructArrayLayout16f64");class _f extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,g,f,_,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,a,h,g,f,_,w)}emplace(i,a,h,g,f,_,w,C){const z=10*i,x=5*i;return this.uint16[z+0]=a,this.uint16[z+1]=h,this.uint16[z+2]=g,this.uint16[z+3]=f,this.float32[x+2]=_,this.float32[x+3]=w,this.float32[x+4]=C,i}}_f.prototype.bytesPerElement=20,ti(_f,"StructArrayLayout4ui3f20");class yf extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.int16[1*i+0]=a,i}}yf.prototype.bytesPerElement=2,ti(yf,"StructArrayLayout1i2");class vf extends Gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint8[1*i+0]=a,i}}vf.prototype.bytesPerElement=1,ti(vf,"StructArrayLayout1ub1");class Pg extends jh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Pg.prototype.size=40;class xf extends jp{get(i){return new Pg(this,i)}}ti(xf,"CollisionBoxArray");class Wh extends jh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}Wh.prototype.size=60;class Hp extends Iu{get(i){return new Wh(this,i)}}ti(Hp,"PlacedSymbolArray");class kg extends jh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(i){this._structArray.uint32[this._pos4+14]=i}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(i){this._structArray.float32[this._pos4+18]=i}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}kg.prototype.size=80;class Gp extends Up{get(i){return new kg(this,i)}}ti(Gp,"SymbolInstanceArray");class Rg extends zu{getoffsetX(i){return this.float32[1*i+0]}}ti(Rg,"GlyphOffsetArray");class bf extends nc{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}ti(bf,"SymbolLineVertexArray");class Lg extends jh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Lg.prototype.size=12;class Og extends qh{get(i){return new Lg(this,i)}}ti(Og,"FeatureIndexArray");class Bg extends sc{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}ti(Bg,"FillExtrusionCentroidArray");class Fg extends jh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Fg.prototype.size=6;class Wp extends ff{get(i){return new Fg(this,i)}}ti(Wp,"FillExtrusionWallArray");const Av=dr([{name:"a_pos",components:2,type:"Int16"}],4),Iv=dr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class yn{constructor(i=[]){this.segments=i}_prepareSegment(i,a,h,g){let f=this.segments[this.segments.length-1];return i>yn.MAX_VERTEX_ARRAY_LENGTH&&Yi(`Max vertices per segment is ${yn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!f||f.vertexLength+i>yn.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==g)&&(f={vertexOffset:a,primitiveOffset:h,vertexLength:0,primitiveLength:0},g!==void 0&&(f.sortKey=g),this.segments.push(f)),f}prepareSegment(i,a,h,g){return this._prepareSegment(i,a.length,h.length,g)}get(){return this.segments}destroy(){for(const i of this.segments)for(const a in i.vaos)i.vaos[a].destroy()}static simpleSegment(i,a,h,g){return new yn([{vertexOffset:i,primitiveOffset:a,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function Ng(u,i){return 256*(u=Ot(Math.floor(u),0,255))+Ot(Math.floor(i),0,255)}yn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ti(yn,"SegmentVector");const zv=dr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Dv=dr([{name:"a_dash",components:4,type:"Uint16"}]);class Zh{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(i,a,h,g){this.ids.push($g(i)),this.positions.push(a,h,g)}eachPosition(i,a){const h=$g(i);let g=0,f=this.ids.length-1;for(;g<f;){const _=g+f>>1;this.ids[_]>=h?f=_:g=_+1}for(;this.ids[g]===h;)a(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(i,a){const h=new Float64Array(i.ids),g=new Uint32Array(i.positions);return Du(h,g,0,h.length-1),a&&(a.add(h.buffer),a.add(g.buffer)),{ids:h,positions:g}}static deserialize(i){const a=new Zh;let h;a.ids=i.ids,a.positions=i.positions;for(const g of a.ids)g!==h&&a.uniqueIds.push(g),h=g;return a.indexed=!0,a}}function $g(u){const i=+u;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:_e(String(u))}function Du(u,i,a,h){for(;a<h;){const g=u[a+h>>1];let f=a-1,_=h+1;for(;;){do f++;while(u[f]<g);do _--;while(u[_]>g);if(f>=_)break;wf(u,f,_),wf(i,3*f,3*_),wf(i,3*f+1,3*_+1),wf(i,3*f+2,3*_+2)}_-a<h-_?(Du(u,i,a,_),a=_+1):(Du(u,i,_+1,h),h=_)}}function wf(u,i,a){const h=u[i];u[i]=u[a],u[a]=h}ti(Zh,"FeaturePositionMap");class Ml{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,a),this.initialized=!0),!!this.location}set(i,a,h){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Gc extends Ml{constructor(i){super(i),this.current=0}set(i,a,h){this.fetchUniformLocation(i,a)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}}class qn extends Ml{constructor(i){super(i),this.current=0}set(i,a,h){this.fetchUniformLocation(i,a)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class Za extends Ml{constructor(i){super(i),this.current=[0,0]}set(i,a,h){this.fetchUniformLocation(i,a)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}}class Zp extends Ml{constructor(i){super(i),this.current=[0,0,0]}set(i,a,h){this.fetchUniformLocation(i,a)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}}class Sf extends Ml{constructor(i){super(i),this.current=[0,0,0,0]}set(i,a,h){this.fetchUniformLocation(i,a)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class Xp extends Ml{constructor(i){super(i),this.current=$t.transparent.toRenderColor(null)}set(i,a,h){this.fetchUniformLocation(i,a)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const jg=new Float32Array(16);class Xh extends Ml{constructor(i){super(i),this.current=jg}set(i,a,h){if(this.fetchUniformLocation(i,a)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let g=1;g<16;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}}const Pv=new Float32Array(9),Ug=new Float32Array(4);class Mf extends Ml{constructor(i){super(i),this.current=Ug}set(i,a,h){if(this.fetchUniformLocation(i,a)){for(let g=0;g<4;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}}}function Yp(u){return[Ng(255*u.r,255*u.g),Ng(255*u.b,255*u.a)]}class Yh{constructor(i,a,h,g){this.value=i,this.uniformNames=a.map(f=>`u_${f}`),this.type=h,this.context=g}setUniform(i,a,h,g,f){const _=g.constantOr(this.value);a.set(i,f,_ instanceof $t?_.toRenderColor(this.context.lut):_)}getBinding(i,a){return this.type==="color"?new Xp(i):new qn(i)}}class Pu{constructor(i,a){this.uniformNames=a.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,a,h,g,f){const _=f==="u_pattern"||f==="u_dash"?this.pattern:f==="u_pixel_ratio"?this.pixelRatio:null;_&&a.set(i,f,_)}getBinding(i,a){return a==="u_pattern"||a==="u_dash"?new Sf(i):new qn(i)}}class El{constructor(i,a,h,g){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(f=>({name:`a_${f}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,a,h,g,f,_,w){const C=this.paintVertexArray.length,z=this.expression.evaluate(new fn(0,{brightness:_}),a,{},f,g,w);this.paintVertexArray.resize(i),this._setPaintValue(C,i,z,this.context)}updatePaintArray(i,a,h,g,f,_,w){const C=this.expression.evaluate({zoom:0,brightness:w},h,g,void 0,f);this._setPaintValue(i,a,C,this.context)}_setPaintValue(i,a,h,g){if(this.type==="color"){const f=Yp(h.toRenderColor(g.lut));for(let _=i;_<a;_++)this.paintVertexArray.emplace(_,f[0],f[1])}else{for(let f=i;f<a;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class va{constructor(i,a,h,g,f,_){this.expression=i,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=g,this.context=f,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(i,a,h,g,f,_,w){const C=this.expression.evaluate(new fn(this.context.zoom,{brightness:_}),a,{},f,g,w),z=this.expression.evaluate(new fn(this.context.zoom+1,{brightness:_}),a,{},f,g,w),x=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(x,i,C,z,this.context)}updatePaintArray(i,a,h,g,f,_,w){const C=this.expression.evaluate({zoom:this.context.zoom,brightness:w},h,g,void 0,f),z=this.expression.evaluate({zoom:this.context.zoom+1,brightness:w},h,g,void 0,f);this._setPaintValue(i,a,C,z,this.context)}_setPaintValue(i,a,h,g,f){if(this.type==="color"){const _=Yp(h.toRenderColor(f.lut)),w=Yp(h.toRenderColor(f.lut));for(let C=i;C<a;C++)this.paintVertexArray.emplace(C,_[0],_[1],w[0],w[1])}else{for(let _=i;_<a;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,a,h,g,f){const _=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=Ot(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);a.set(i,f,w)}getBinding(i,a){return new qn(i)}}class Tl{constructor(i,a,h,g,f){this.expression=i,this.layerId=f,this.paintVertexAttributes=(h==="array"?Dv:zv).members;for(let _=0;_<a.length;++_);this.paintVertexArray=new g}populatePaintArray(i,a,h,g){const f=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(f,i,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(i,a,h,g,f,_,w){this._setPaintValues(i,a,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(i,a,h,g){if(!g||!h)return;const f=g[h];if(!f)return;const{tl:_,br:w,pixelRatio:C}=f;for(let z=i;z<a;z++)this.paintVertexArray.emplace(z,_[0],_[1],w[0],w[1],C)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Cl{constructor(i,a,h=()=>!0){this.binders={},this._buffers=[],this.context=a;const g=[];for(const f in i.paint._values){const _=i.paint.get(f);if(!h(f)||!(_ instanceof wu&&Nc(_.property.specification)))continue;const w=Rv(f,i.type),C=_.value,z=_.property.specification.type,x=!!_.property.useIntegerZoom,T=f==="line-dasharray"||f.endsWith("pattern"),I=f==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(C.kind!=="constant"||I)if(C.kind==="source"||I||T){const E=Vg(f,z,"source");this.binders[f]=T?new Tl(C,w,z,E,i.id):new El(C,w,z,E),g.push(`/a_${f}`)}else{const E=Vg(f,z,"composite");this.binders[f]=new va(C,w,z,x,a,E),g.push(`/z_${f}`)}else this.binders[f]=T?new Pu(C.value,w):new Yh(C.value,w,z,a),g.push(`/u_${f}`)}this.cacheKey=g.sort().join("")}getMaxValue(i){const a=this.binders[i];return a instanceof El||a instanceof va?a.maxValue:0}populatePaintArrays(i,a,h,g,f,_,w){for(const C in this.binders){const z=this.binders[C];z.context=this.context,(z instanceof El||z instanceof va||z instanceof Tl)&&z.populatePaintArray(i,a,h,g,f,_,w)}}setConstantPatternPositions(i){for(const a in this.binders){const h=this.binders[a];h instanceof Pu&&h.setConstantPatternPositions(i)}}updatePaintArrays(i,a,h,g,f,_,w,C){let z=!1;const x=Object.keys(i),T=x.length!==0,I=T?x:a.uniqueIds;this.context.lut=f.lut;for(const E in this.binders){const A=this.binders[E];if(A.context=this.context,(A instanceof El||A instanceof va||A instanceof Tl)&&(A.expression.isStateDependent===!0||A.expression.isLightConstant===!1)){const k=f.paint.get(E);A.expression=k.value;for(const B of I){const $=i[B.toString()];a.eachPosition(B,(H,G,U)=>{const Y=g.feature(H);A.updatePaintArray(G,U,Y,$,_,w,C)})}if(!T)for(const B of h.uniqueIds){const $=i[B.toString()];h.eachPosition(B,(H,G,U)=>{const Y=g.feature(H);A.updatePaintArray(G,U,Y,$,_,w,C)})}z=!0}}return z}defines(){const i=[];for(const a in this.binders){const h=this.binders[a];(h instanceof Yh||h instanceof Pu)&&i.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof El||h instanceof va||h instanceof Tl)for(let g=0;g<h.paintVertexAttributes.length;g++)i.push(h.paintVertexAttributes[g].name)}return i}getBinderUniforms(){const i=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof Yh||h instanceof Pu||h instanceof va)for(const g of h.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const a=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof Yh||g instanceof Pu||g instanceof va)for(const f of g.uniformNames)a.push({name:f,property:h,binding:g.getBinding(i,f)})}return a}setUniforms(i,a,h,g,f){for(const{name:_,property:w,binding:C}of h)this.binders[w].setUniform(i,C,f,g.get(w),_)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const a=this.binders[i];(a instanceof El||a instanceof va||a instanceof Tl)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(i){for(const a in this.binders){const h=this.binders[a];(h instanceof El||h instanceof va||h instanceof Tl)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const a=this.binders[i];(a instanceof El||a instanceof va||a instanceof Tl)&&a.destroy()}}}class Xa{constructor(i,a,h=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new Cl(g,a,h);this.needsUpload=!1,this._featureMap=new Zh,this._featureMapWithoutIds=new Zh,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(i,a,h,g,f,_,w,C){for(const z in this.programConfigurations)this.programConfigurations[z].populatePaintArrays(i,a,g,f,_,w,C);a.id!==void 0?this._featureMap.add(a.id,h,this._bufferOffset,i):(this._featureMapWithoutIds.add(this._idlessCounter,h,this._bufferOffset,i),this._idlessCounter+=1),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,a,h,g,f,_){for(const w of h)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(i,this._featureMap,this._featureMapWithoutIds,a,w,g,f,_||0)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const kv={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Rv(u,i){return kv[u]||[u.replace(`${i}-`,"").replace(/-/g,"_")]}const Lv={"line-pattern":{source:Sl,composite:Sl},"fill-pattern":{source:Sl,composite:Sl},"fill-extrusion-pattern":{source:Sl,composite:Sl},"line-dasharray":{source:pf,composite:pf}},Ov={color:{source:Hh,composite:wl},number:{source:zu,composite:Hh}};function Vg(u,i,a){const h=Lv[u];return h&&h[a]||Ov[i][a]}ti(Yh,"ConstantBinder"),ti(Pu,"PatternConstantBinder"),ti(El,"SourceExpressionBinder"),ti(Tl,"PatternCompositeBinder"),ti(va,"CompositeExpressionBinder"),ti(Cl,"ProgramConfiguration",{omit:["_buffers"]}),ti(Xa,"ProgramConfigurationSet");const So=qt/Math.PI/2,qg=5,p=6,o=16383,c=64,m=[c,32,16],v=-So,b=So;function S(u,i,a,h=So){return a=Oi(a),[u*Math.sin(a)*h,-i*h,u*Math.cos(a)*h]}function D(u,i,a){return S(Math.cos(Oi(u)),Math.sin(Oi(u)),i,a)}const R=63710088e-1,F=2*Math.PI*R;class O{constructor(i,a){if(isNaN(i)||isNaN(a))throw new Error(`Invalid LngLat object: (${i}, ${a})`);if(this.lng=+i,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new O(hr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const a=Math.PI/180,h=this.lat*a,g=i.lat*a,f=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((i.lng-this.lng)*a);return R*Math.acos(Math.min(f,1))}toBounds(i=0){const a=360*i/40075017,h=a/Math.cos(Math.PI/180*this.lat);return new j({lng:this.lng-h,lat:this.lat-a},{lng:this.lng+h,lat:this.lat+a})}toEcef(i){return D(this.lat,this.lng,So+i*So/R)}static convert(i){if(i instanceof O)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new O(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new O(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class j{constructor(i,a){if(i)if(a)this.setSouthWest(i).setNorthEast(a);else if(i.length===4){const h=i;this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]])}else{const h=i;this.setSouthWest(h[0]).setNorthEast(h[1])}}setNorthEast(i){return this._ne=i instanceof O?new O(i.lng,i.lat):O.convert(i),this}setSouthWest(i){return this._sw=i instanceof O?new O(i.lng,i.lat):O.convert(i),this}extend(i){const a=this._sw,h=this._ne;let g,f;if(i instanceof O)g=i,f=i;else{if(!(i instanceof j))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(j.convert(i)):this.extend(O.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(O.convert(i)):this;if(g=i._sw,f=i._ne,!g||!f)return this}return a||h?(a.lng=Math.min(g.lng,a.lng),a.lat=Math.min(g.lat,a.lat),h.lng=Math.max(f.lng,h.lng),h.lat=Math.max(f.lat,h.lat)):(this._sw=new O(g.lng,g.lat),this._ne=new O(f.lng,f.lat)),this}getCenter(){return new O((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new O(this.getWest(),this.getNorth())}getSouthEast(){return new O(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:a,lat:h}=O.convert(i);let g=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&g}static convert(i){if(i)return i instanceof j?i:new j(i)}}const q=0,W=25.5;function te(u){return F*Math.cos(u*Math.PI/180)}function ee(u){return(180+u)/360}function ne(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function re(u,i){return u/te(i)}function ue(u){return 360*u-180}function ye(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function ve(u,i){return u*te(ye(i))}const be=85.051129;function Me(u){return Math.cos(Oi(Ot(u,-be,be)))}function we(u,i){const a=Ot(i,q,W),h=Math.pow(2,a);return Me(u)*F/(512*h)}function Ee(u){return 1/Math.cos(u*Math.PI/180)}function ke(u,i=0){const a=Math.exp(Math.PI*(1-(u.y+i/qt)/(1<<u.z)*2));return 80150034*a/(a*a+1)/qt/(1<<u.z)}class $e{constructor(i,a,h=0){this.x=+i,this.y=+a,this.z=+h}static fromLngLat(i,a=0){const h=O.convert(i);return new $e(ee(h.lng),ne(h.lat),re(a,h.lat))}toLngLat(){return new O(ue(this.x),ye(this.y))}toAltitude(){return ve(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/F*Ee(ye(this.y))}}function Oe(u,i,a,h,g,f,_,w,C){const z=(i+h)/2,x=(a+g)/2,T=new Pt(z,x);w(T),function(I,E,A,k,B,$){const H=A-B,G=k-$;return Math.abs((k-E)*H-(A-I)*G)/Math.hypot(H,G)}(T.x,T.y,f.x,f.y,_.x,_.y)>=C?(Oe(u,i,a,z,x,f,T,w,C),Oe(u,z,x,h,g,T,_,w,C)):u.push(_)}function Re(u,i,a){let h=u[0],g=h.x,f=h.y;i(h);const _=[h];for(let w=1;w<u.length;w++){const C=u[w],{x:z,y:x}=C;i(C),Oe(_,g,f,z,x,h,C,i,a),g=z,f=x,h=C}return _}function st(u,i,a,h){if(h(i,a)){const g=i.add(a)._mult(.5);st(u,i,g,h),st(u,g,a,h)}else u.push(a)}function dt(u,i){let a=u[0];const h=[a];for(let g=1;g<u.length;g++){const f=u[g];st(h,a,f,i),a=f}return h}const Et=Math.pow(2,14)-1,Lt=-Et-1;function jt(u,i){const a=Math.round(u.x*i),h=Math.round(u.y*i);return u.x=Ot(a,Lt,Et),u.y=Ot(h,Lt,Et),(a<u.x||a>u.x+1||h<u.y||h>u.y+1)&&Yi("Geometry exceeds allowed extent, reduce your vector tile buffer size"),u}function Xe(u,i,a){const h=u.loadGeometry(),g=u.extent,f=qt/g;if(i&&a&&a.projection.isReprojectedInTileSpace){const _=1<<i.z,{scale:w,x:C,y:z,projection:x}=a,T=I=>{const E=ue((i.x+I.x/g)/_),A=ye((i.y+I.y/g)/_),k=x.project(E,A);I.x=(k.x*w-C)*g,I.y=(k.y*w-z)*g};for(let I=0;I<h.length;I++)if(u.type!==1)h[I]=Re(h[I],T,1);else{const E=[];for(const A of h[I])A.x<0||A.x>=g||A.y<0||A.y>=g||(T(A),E.push(A));h[I]=E}}for(const _ of h)for(const w of _)jt(w,f);return h}function St(u,i){return{type:u.type,id:u.id,properties:u.properties,geometry:i?Xe(u):[]}}function ct(u,i,a,h,g){u.emplaceBack(2*i+(h+1)/2,2*a+(g+1)/2)}function Mt(u,i,a){u.emplaceBack(i.x,i.y,i.z,a[0]*16384,a[1]*16384,a[2]*16384)}class Tt{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new nc,this.indexArray=new rn,this.segments=new yn,this.programConfigurations=new Xa(i.layers,{zoom:i.zoom,lut:i.lut}),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}updateFootprints(i,a){}populate(i,a,h,g){const f=this.layers[0],_=[];let w=null;f.type==="circle"&&(w=f.layout.get("circle-sort-key"));for(const{feature:z,id:x,index:T,sourceLayerIndex:I}of i){const E=this.layers[0]._featureFilter.needGeometry,A=St(z,E);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),A,h))continue;const k=w?w.evaluate(A,{},h):void 0,B={id:x,properties:z.properties,type:z.type,sourceLayerIndex:I,index:T,geometry:E?A.geometry:Xe(z,h,g),patterns:{},sortKey:k};_.push(B)}w&&_.sort((z,x)=>z.sortKey-x.sortKey);let C=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Vh,C=g.projection);for(const z of _){const{geometry:x,index:T,sourceLayerIndex:I}=z,E=i[T].feature;this.addFeature(z,x,T,a.availableImages,h,C,a.brightness),a.featureIndex.insert(E,x,T,I,this.index)}}update(i,a,h,g,f){const _=Object.keys(i).length!==0;_&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(i,a,_?this.stateDependentLayers:this.layers,h,g,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Av.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,Iv.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,a,h,g,f,_,w){for(const C of a)for(const z of C){const x=z.x,T=z.y;if(x<0||x>=qt||T<0||T>=qt)continue;if(_){const A=_.projectTilePoint(x,T,f),k=_.upVector(f,x,T),B=this.globeExtVertexArray;Mt(B,A,k),Mt(B,A,k),Mt(B,A,k),Mt(B,A,k)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),E=I.vertexLength;ct(this.layoutVertexArray,x,T,-1,-1),ct(this.layoutVertexArray,x,T,1,-1),ct(this.layoutVertexArray,x,T,1,1),ct(this.layoutVertexArray,x,T,-1,1),this.indexArray.emplaceBack(E,E+1,E+2),this.indexArray.emplaceBack(E,E+2,E+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},g,f,w)}}function wt(u,i){for(let a=0;a<u.length;a++)if(tr(i,u[a]))return!0;for(let a=0;a<i.length;a++)if(tr(u,i[a]))return!0;return!!ii(u,i)}function Gt(u,i,a){return!!tr(u,i)||!!Yt(i,u,a)}function ui(u,i){if(u.length===1)return Ri(i,u[0]);for(let a=0;a<i.length;a++){const h=i[a];for(let g=0;g<h.length;g++)if(tr(u,h[g]))return!0}for(let a=0;a<u.length;a++)if(Ri(i,u[a]))return!0;for(let a=0;a<i.length;a++)if(ii(u,i[a]))return!0;return!1}function _i(u,i,a){if(u.length>1){if(ii(u,i))return!0;for(let h=0;h<i.length;h++)if(Yt(i[h],u,a))return!0}for(let h=0;h<u.length;h++)if(Yt(u[h],i,a))return!0;return!1}function ii(u,i){if(u.length===0||i.length===0)return!1;for(let a=0;a<u.length-1;a++){const h=u[a],g=u[a+1];for(let f=0;f<i.length-1;f++)if(vi(h,g,i[f],i[f+1]))return!0}return!1}function vi(u,i,a,h){return xo(u,a,h)!==xo(i,a,h)&&xo(u,i,a)!==xo(u,i,h)}function Yt(u,i,a){const h=a*a;if(i.length===1)return u.distSqr(i[0])<h;for(let g=1;g<i.length;g++)if(Mi(u,i[g-1],i[g])<h)return!0;return!1}function Mi(u,i,a){const h=i.distSqr(a);if(h===0)return u.distSqr(i);const g=((u.x-i.x)*(a.x-i.x)+(u.y-i.y)*(a.y-i.y))/h;return u.distSqr(g<0?i:g>1?a:a.sub(i)._mult(g)._add(i))}function Ri(u,i){let a,h,g,f=!1;for(let _=0;_<u.length;_++){a=u[_];for(let w=0,C=a.length-1;w<a.length;C=w++)h=a[w],g=a[C],h.y>i.y!=g.y>i.y&&i.x<(g.x-h.x)*(i.y-h.y)/(g.y-h.y)+h.x&&(f=!f)}return f}function tr(u,i){let a=!1;for(let h=0,g=u.length-1;h<u.length;g=h++){const f=u[h],_=u[g];f.y>i.y!=_.y>i.y&&i.x<(_.x-f.x)*(i.y-f.y)/(_.y-f.y)+f.x&&(a=!a)}return a}function kr(u,i,a,h,g){for(const _ of u)if(i<=_.x&&a<=_.y&&h>=_.x&&g>=_.y)return!0;const f=[new Pt(i,a),new Pt(i,g),new Pt(h,g),new Pt(h,a)];if(u.length>2){for(const _ of f)if(tr(u,_))return!0}for(let _=0;_<u.length-1;_++)if(cr(u[_],u[_+1],f))return!0;return!1}function cr(u,i,a){const h=a[0],g=a[2];if(u.x<h.x&&i.x<h.x||u.x>g.x&&i.x>g.x||u.y<h.y&&i.y<h.y||u.y>g.y&&i.y>g.y)return!1;const f=xo(u,i,a[0]);return f!==xo(u,i,a[1])||f!==xo(u,i,a[2])||f!==xo(u,i,a[3])}function jr(u,i,a,h,g,f){let _=i.y-u.y,w=u.x-i.x;if(f=f||0){const C=_*_+w*w;if(C===0)return!0;const z=Math.sqrt(C);_/=z,w/=z}return!((a.x-u.x)*_+(a.y-u.y)*w-f<0||(h.x-u.x)*_+(h.y-u.y)*w-f<0||(g.x-u.x)*_+(g.y-u.y)*w-f<0)}function mr(u,i,a,h,g,f,_){return!(jr(u,i,h,g,f,_)||jr(i,a,h,g,f,_)||jr(a,u,h,g,f,_)||jr(h,g,u,i,a,_)||jr(g,f,u,i,a,_)||jr(f,h,u,i,a,_))}function Rr(u,i,a){const h=i.paint.get(u).value;return h.kind==="constant"?h.value:a.programConfigurations.get(i.id).getMaxValue(u)}function Wi(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Dr(u,i,a,h,g){if(!i[0]&&!i[1])return u;const f=Pt.convert(i)._mult(g);a==="viewport"&&f._rotate(-h);const _=[];for(let w=0;w<u.length;w++)_.push(u[w].sub(f));return _}function zr(u,i,a,h){const g=Pt.convert(u)._mult(h);return i==="viewport"&&g._rotate(-a),g}let xr,Yr;ti(Tt,"CircleBucket",{omit:["layers"]});var $n,ks={exports:{}},Xs=($n||($n=1,function(u,i){(function(a){function h(f,_,w){var C=g(256*f,256*(_=Math.pow(2,w)-_-1),w),z=g(256*(f+1),256*(_+1),w);return C[0]+","+C[1]+","+z[0]+","+z[1]}function g(f,_,w){var C=2*Math.PI*6378137/256/Math.pow(2,w);return[f*C-2*Math.PI*6378137/2,_*C-2*Math.PI*6378137/2]}a.getURL=function(f,_,w,C,z,x){return x=x||{},f+"?"+["bbox="+h(w,C,z),"format="+(x.format||"image/png"),"service="+(x.service||"WMS"),"version="+(x.version||"1.1.1"),"request="+(x.request||"GetMap"),"srs="+(x.srs||"EPSG:3857"),"width="+(x.width||256),"height="+(x.height||256),"layers="+_].join("&")},a.getTileBBox=h,a.getMercCoords=g,Object.defineProperty(a,"__esModule",{value:!0})})(i)}(0,ks.exports)),ks.exports);class Hn{constructor(i,a,h){this.z=i,this.x=a,this.y=h,this.key=gr(0,i,i,a,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,a){const h=Xs.getTileBBox(this.x,this.y,this.z),g=function(f,_,w){let C,z="";for(let x=f;x>0;x--)C=1<<x-1,z+=(_&C?1:0)+(w&C?2:0);return z}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ar{constructor(i,a){this.wrap=i,this.canonical=a,this.key=gr(i,a.z,a.z,a.x,a.y)}}class ir{constructor(i,a,h,g,f){this.overscaledZ=i,this.wrap=a,this.canonical=new Hn(h,+g,+f),this.key=a===0&&i===h?this.canonical.key:gr(a,i,h,g,f)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const a=this.canonical.z-i;return i>this.canonical.z?new ir(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ir(i,this.wrap,i,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(i,a=!0){if(this.overscaledZ===i&&a)return this.key;if(i>this.canonical.z)return gr(this.wrap*+a,i,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-i;return gr(this.wrap*+a,i,i,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const a=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.z<this.canonical.z&&i.canonical.x===this.canonical.x>>a&&i.canonical.y===this.canonical.y>>a}children(i){if(this.overscaledZ>=i)return[new ir(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new ir(a,this.wrap,a,h,g),new ir(a,this.wrap,a,h+1,g),new ir(a,this.wrap,a,h,g+1),new ir(a,this.wrap,a,h+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new ir(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new ir(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ar(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function gr(u,i,a,h,g){const f=1<<Math.min(a,22);let _=f*(g%f)+h%f;return u&&a<22&&(_+=f*f*((u<0?-2*u-1:2*u)%(1<<2*(22-a)))),16*(32*_+a)+(i-a)}const Lr=[u=>{let i=u.canonical.x-1,a=u.wrap;return i<0&&(i=(1<<u.canonical.z)-1,a--),new ir(u.overscaledZ,a,u.canonical.z,i,u.canonical.y)},u=>{let i=u.canonical.x+1,a=u.wrap;return i===1<<u.canonical.z&&(i=0,a++),new ir(u.overscaledZ,a,u.canonical.z,i,u.canonical.y)},u=>new ir(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,(u.canonical.y===0?1<<u.canonical.z:u.canonical.y)-1),u=>new ir(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y===(1<<u.canonical.z)-1?0:u.canonical.y+1)];ti(Hn,"CanonicalTileID"),ti(ir,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const vn=dr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Jr}=vn,Qn=dr([{name:"a_pos_3",components:3,type:"Int16"}]);var Ya=dr([{name:"a_pos",type:"Int16",components:2}]);class us{constructor(i,a){this.pos=i,this.dir=a}intersectsPlane(i,a,h){const g=Te.vec3.dot(a,this.dir);if(Math.abs(g)<1e-6)return!1;const f=((i[0]-this.pos[0])*a[0]+(i[1]-this.pos[1])*a[1]+(i[2]-this.pos[2])*a[2])/g;return h[0]=this.pos[0]+this.dir[0]*f,h[1]=this.pos[1]+this.dir[1]*f,h[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(i,a,h){if(Te.vec3.equals(this.pos,i)||a===0)return h[0]=h[1]=h[2]=0,!1;const[g,f,_]=this.dir,w=this.pos[0]-i[0],C=this.pos[1]-i[1],z=this.pos[2]-i[2],x=g*g+f*f+_*_,T=2*(w*g+C*f+z*_),I=T*T-4*x*(w*w+C*C+z*z-a*a);if(I<0){const E=Math.max(-T/2,0),A=w+g*E,k=C+f*E,B=z+_*E,$=Math.hypot(A,k,B);return h[0]=A*a/$,h[1]=k*a/$,h[2]=B*a/$,!1}{const E=(-T-Math.sqrt(I))/(2*x);if(E<0){const A=Math.hypot(w,C,z);return h[0]=w*a/A,h[1]=C*a/A,h[2]=z*a/A,!1}return h[0]=w+g*E,h[1]=C+f*E,h[2]=z+_*E,!0}}}class hs{constructor(i,a,h,g,f){this.TL=i,this.TR=a,this.BR=h,this.BL=g,this.horizon=f}static fromInvProjectionMatrix(i,a,h){const g=[-1,1,1],f=[1,1,1],_=[1,-1,1],w=[-1,-1,1],C=Te.vec3.transformMat4(g,g,i),z=Te.vec3.transformMat4(f,f,i),x=Te.vec3.transformMat4(_,_,i),T=Te.vec3.transformMat4(w,w,i);return new hs(C,z,x,T,a/h)}}function Ys(u,i,a){let h=1/0,g=-1/0;const f=[];for(const _ of u){Te.vec3.sub(f,_,i);const w=Te.vec3.dot(f,a);h=Math.min(h,w),g=Math.max(g,w)}return[h,g]}function xa(u,i){let a=!0;for(let h=0;h<u.planes.length;h++){const g=u.planes[h];let f=0;for(let _=0;_<i.length;_++)f+=Te.vec3.dot(g,i[_])+g[3]>=0;if(f===0)return 0;f!==i.length&&(a=!1)}return a?2:1}function ds(u,i){for(const a of u.projections){const h=Ys(i,u.points[0],a.axis);if(a.projection[1]<h[0]||a.projection[0]>h[1])return 0}return 1}function Al(u,i){let a=0;const h=[0,0,0,0];for(let g=0;g<u.length;g++)h[0]=u[g][0],h[1]=u[g][1],h[2]=u[g][2],h[3]=1,Te.vec4.dot(h,i)>=0&&a++;return a}class Js{constructor(i,a){this.points=i||new Array(8).fill([0,0,0]),this.planes=a||new Array(6).fill([0,0,0,0]),this.bounds=Tr.fromPoints(this.points),this.projections=[],this.frustumEdges=[Te.vec3.sub([],this.points[2],this.points[3]),Te.vec3.sub([],this.points[0],this.points[3]),Te.vec3.sub([],this.points[4],this.points[0]),Te.vec3.sub([],this.points[5],this.points[1]),Te.vec3.sub([],this.points[6],this.points[2]),Te.vec3.sub([],this.points[7],this.points[3])];for(const h of this.frustumEdges){const g=[0,-h[2],h[1]],f=[h[2],0,-h[0]];this.projections.push({axis:g,projection:Ys(this.points,this.points[0],g)}),this.projections.push({axis:f,projection:Ys(this.points,this.points[0],f)})}}static fromInvProjectionMatrix(i,a,h,g){const f=Math.pow(2,h),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const x=Te.vec4.transformMat4([],z,i),T=1/x[3]/a*f;return Te.vec4.mul(x,x,[T,T,g?1/x[3]:T,T])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const x=Te.vec3.sub([],_[z[0]],_[z[1]]),T=Te.vec3.sub([],_[z[2]],_[z[1]]),I=Te.vec3.normalize([],Te.vec3.cross([],x,T)),E=-Te.vec3.dot(I,_[z[1]]);return I.concat(E)}),C=[];for(let z=0;z<_.length;z++)C.push([_[z][0],_[z][1],_[z][2]]);return new Js(C,w)}intersectsPrecise(i,a,h){for(let g=0;g<a.length;g++)if(!Al(i,a[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!Al(i,this.planes[g]))return 0;for(const g of h)for(const f of this.frustumEdges){const _=Te.vec3.cross([],g,f),w=Te.vec3.length(_);if(w===0)continue;Te.vec3.scale(_,_,1/w);const C=Ys(this.points,this.points[0],_),z=Ys(i,this.points[0],_);if(C[0]>z[1]||z[0]>C[1])return 0}return 1}containsPoint(i){for(const a of this.planes){const h=a[3];if(Te.vec3.dot([a[0],a[1],a[2]],i)+h<0)return!1}return!0}}class Tr{static fromPoints(i){const a=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const g of i)Te.vec3.min(a,a,g),Te.vec3.max(h,h,g);return new Tr(a,h)}static fromTileIdAndHeight(i,a,h){const g=1<<i.canonical.z,f=i.canonical.x,_=i.canonical.y;return new Tr([f/g,_/g,a],[(f+1)/g,(_+1)/g,h])}static applyTransform(i,a){const h=i.getCorners();for(let g=0;g<h.length;++g)Te.vec3.transformMat4(h[g],h[g],a);return Tr.fromPoints(h)}static applyTransformFast(i,a){const h=[a[12],a[13],a[14]],g=[...h];for(let f=0;f<3;f++)for(let _=0;_<3;_++){const w=a[4*_+f],C=w*i.min[_],z=w*i.max[_];h[f]+=Math.min(C,z),g[f]+=Math.max(C,z)}return new Tr(h,g)}static projectAabbCorners(i,a){const h=i.getCorners();for(let g=0;g<h.length;++g)Te.vec3.transformMat4(h[g],h[g],a);return h}constructor(i,a){this.min=i,this.max=a,this.center=Te.vec3.scale([],Te.vec3.add([],this.min,this.max),.5)}quadrant(i){const a=[i%2==0,i<2],h=Te.vec3.clone(this.min),g=Te.vec3.clone(this.max);for(let f=0;f<a.length;f++)h[f]=a[f]?this.min[f]:this.center[f],g[f]=a[f]?this.center[f]:this.max[f];return g[2]=this.max[2],new Tr(h,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,a=this.max;return[[i[0],i[1],i[2]],[a[0],i[1],i[2]],[a[0],a[1],i[2]],[i[0],a[1],i[2]],[i[0],i[1],a[2]],[a[0],i[1],a[2]],[a[0],a[1],a[2]],[i[0],a[1],a[2]]]}intersects(i){return this.intersectsAabb(i.bounds)?xa(i,this.getCorners()):0}intersectsFlat(i){return this.intersectsAabb(i.bounds)?xa(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(i,a){return a||this.intersects(i)?ds(i,this.getCorners()):0}intersectsPreciseFlat(i,a){return a||this.intersectsFlat(i)?ds(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(i){for(let a=0;a<3;++a)if(this.min[a]>i.max[a]||i.min[a]>this.max[a])return!1;return!0}intersectsAabbXY(i){return!(this.min[0]>i.max[0]||i.min[0]>this.max[0]||this.min[1]>i.max[1]||i.min[1]>this.max[1])}encapsulate(i){for(let a=0;a<3;a++)this.min[a]=Math.min(this.min[a],i.min[a]),this.max[a]=Math.max(this.max[a],i.max[a])}encapsulatePoint(i){for(let a=0;a<3;a++)this.min[a]=Math.min(this.min[a],i[a]),this.max[a]=Math.max(this.max[a],i[a])}closestPoint(i){return[Math.max(Math.min(this.max[0],i[0]),this.min[0]),Math.max(Math.min(this.max[1],i[1]),this.min[1]),Math.max(Math.min(this.max[2],i[2]),this.min[2])]}}function ku(u){return u*So/R}ti(Tr,"Aabb");const Jp=[new Tr([v,v,v],[b,b,b]),new Tr([v,v,v],[0,0,b]),new Tr([0,v,v],[b,0,b]),new Tr([v,0,v],[0,b,b]),new Tr([0,0,v],[b,b,b])];function Ru(u,i,a,h=!0){const g=Te.vec3.scale([],u._camera.position,u.worldSize),f=[i,a,1,1];Te.vec4.transformMat4(f,f,u.pixelMatrixInverse),Te.vec4.scale(f,f,1/f[3]);const _=Te.vec3.sub([],f,g),w=Te.vec3.normalize([],_),C=u.globeMatrix,z=[C[12],C[13],C[14]],x=Te.vec3.sub([],z,g),T=Te.vec3.length(x),I=Te.vec3.normalize([],x),E=u.worldSize/(2*Math.PI),A=Te.vec3.dot(I,w),k=Math.asin(E/T);if(k<Math.acos(A)){if(!h)return null;const Pe=[],me=[];Te.vec3.scale(Pe,w,T/A),Te.vec3.normalize(me,Te.vec3.sub(me,Pe,x)),Te.vec3.normalize(w,Te.vec3.add(w,x,Te.vec3.scale(w,me,Math.tan(k)*T)))}const B=[];new us(g,w).closestPointOnSphere(z,E,B);const $=Te.vec3.normalize([],Zl(C,0)),H=Te.vec3.normalize([],Zl(C,1)),G=Te.vec3.normalize([],Zl(C,2)),U=Te.vec3.dot($,B),Y=Te.vec3.dot(H,B),Q=Te.vec3.dot(G,B),se=un(Math.asin(-Y/E));let xe=un(Math.atan2(U,Q));xe=u.center.lng+function(Pe,me){const Ie=(me-Pe+180)%360-180;return Ie<-180?Ie+360:Ie}(u.center.lng,xe);const pe=ee(xe),ge=Ot(ne(se),0,1);return new $e(pe,ge)}class Kp{constructor(i,a,h){this.a=Te.vec3.sub([],i,h),this.b=Te.vec3.sub([],a,h),this.center=h;const g=Te.vec3.normalize([],this.a),f=Te.vec3.normalize([],this.b);this.angle=Math.acos(Te.vec3.dot(g,f))}}function Jh(u,i){if(u.angle===0)return null;let a;return a=u.a[i]===0?1/u.angle*.5*Math.PI:1/u.angle*Math.atan(u.b[i]/u.a[i]/Math.sin(u.angle)-1/Math.tan(u.angle)),a<0||a>1?null:function(h,g,f,_){const w=Math.sin(f);return h*(Math.sin((1-_)*f)/w)+g*(Math.sin(_*f)/w)}(u.a[i],u.b[i],u.angle,Ot(a,0,1))+u.center[i]}function ac(u){if(u.z<=1)return Jp[u.z+2*u.y+u.x];const i=Bv(Hg(u));return Tr.fromPoints(i)}function Wc(u,i,a){return Te.vec3.scale(u,u,1-a),Te.vec3.scaleAndAdd(u,u,i,a)}function Y6(u,i,a){for(const h of u)Te.vec3.transformMat4(h,h,i),Te.vec3.scale(h,h,a)}function J6(u,i,a,h){const g=i/u.worldSize,f=u.globeMatrix;if(a.z<=1){const pe=ac(a).getCorners();return Y6(pe,f,g),Tr.fromPoints(pe)}const _=Hg(a,h),w=Bv(_,So+ku(u._tileCoverLift));Y6(w,f,g);const C=Number.MAX_VALUE,z=[-C,-C,-C],x=[C,C,C];if(_.contains(u.center)){for(const Pe of w)Te.vec3.min(x,x,Pe),Te.vec3.max(z,z,Pe);z[2]=0;const pe=u.point,ge=[pe.x*g,pe.y*g,0];return Te.vec3.min(x,x,ge),Te.vec3.max(z,z,ge),new Tr(x,z)}if(u._tileCoverLift>0){for(const pe of w)Te.vec3.min(x,x,pe),Te.vec3.max(z,z,pe);return new Tr(x,z)}const T=[f[12]*g,f[13]*g,f[14]*g],I=_.getCenter(),E=Ot(u.center.lat,-be,be),A=Ot(I.lat,-be,be),k=ee(u.center.lng),B=ne(E);let $=k-ee(I.lng);const H=B-ne(A);$>.5?$-=1:$<-.5&&($+=1);let G=0;if(Math.abs($)>Math.abs(H))G=$>=0?1:3;else{G=H>=0?0:2;const pe=[f[4]*g,f[5]*g,f[6]*g],ge=-Math.sin(Oi(H>=0?_.getSouth():_.getNorth()))*So;Te.vec3.scaleAndAdd(T,T,pe,ge)}const U=w[G],Y=w[(G+1)%4],Q=new Kp(U,Y,T),se=[Jh(Q,0)||U[0],Jh(Q,1)||U[1],Jh(Q,2)||U[2]],xe=Lu(u.zoom);if(xe>0){const pe=function({x:Pe,y:me,z:Ie},Fe,Ne,He,et){const rt=1/(1<<Ie);let Ye=Pe*rt,_t=Ye+rt,zt=me*rt,ht=zt+rt,ei=0;const Vt=(Ye+_t)/2-He;return Vt>.5?ei=-1:Vt<-.5&&(ei=1),Ye=((Ye+ei)*Fe-(He*=Fe))*Ne+He,_t=((_t+ei)*Fe-He)*Ne+He,zt=(zt*Fe-(et*=Fe))*Ne+et,ht=(ht*Fe-et)*Ne+et,[[Ye,ht,0],[_t,ht,0],[_t,zt,0],[Ye,zt,0]]}(a,i,u._pixelsPerMercatorPixel,k,B);for(let Pe=0;Pe<w.length;Pe++)Wc(w[Pe],pe[Pe],xe);const ge=Te.vec3.add([],pe[G],pe[(G+1)%4]);Te.vec3.scale(ge,ge,.5),Wc(se,ge,xe)}for(const pe of w)Te.vec3.min(x,x,pe),Te.vec3.max(z,z,pe);return x[2]=Math.min(U[2],Y[2]),Te.vec3.min(x,x,se),Te.vec3.max(z,z,se),new Tr(x,z)}function Hg({x:u,y:i,z:a},h=!1){const g=1/(1<<a),f=new O(ue(u*g),i===(1<<a)-1&&h?-90:ye((i+1)*g)),_=new O(ue((u+1)*g),i===0&&h?90:ye(i*g));return new j(f,_)}function Bv(u,i=So){const a=Oi(u.getNorth()),h=Oi(u.getSouth()),g=Math.cos(a),f=Math.cos(h),_=Math.sin(a),w=Math.sin(h),C=u.getWest(),z=u.getEast();return[S(f,w,C,i),S(f,w,z,i),S(g,_,z,i),S(g,_,C,i)]}function Qp(u,i,a,h){const g=1<<a.z,f=(u/qt+a.x)/g;return D(ye((i/qt+a.y)/g),ue(f),h)}function Gg({min:u,max:i}){return o/Math.max(i[0]-u[0],i[1]-u[1],i[2]-u[2])}const K6=new Float64Array(16);function Wg(u){const i=Gg(u),a=Te.mat4.fromScaling(K6,[i,i,i]);return Te.mat4.translate(a,a,Te.vec3.negate([],u.min))}function Fv(u){const i=Te.mat4.fromTranslation(K6,u.min),a=1/Gg(u);return Te.mat4.scale(i,i,[a,a,a])}function Nv(u){const i=qt/(2*Math.PI);return u/(2*Math.PI)/i}function Q6(u,i){return qt/(512*Math.pow(2,u))*Gg(ac(i))}function e5(u,i,a,h,g){const f=Nv(a),_=[u,i,-a/(2*Math.PI)],w=Te.mat4.identity(new Float64Array(16));return Te.mat4.translate(w,w,_),Te.mat4.scale(w,w,[f,f,f]),Te.mat4.rotateX(w,w,Oi(-g)),Te.mat4.rotateY(w,w,Oi(-h)),w}function Lu(u){return sr(qg,p,u)}function t5(u,i){const a=D(i.lat,i.lng),h=function(f){const _=D(f._center.lat,f._center.lng),w=Te.vec3.fromValues(0,1,0);let C=Te.vec3.cross([],w,_);const z=Te.mat4.fromRotation([],-f.angle,_);C=Te.vec3.transformMat4(C,C,z),Te.mat4.fromRotation(z,-f._pitch,C);const x=Te.vec3.normalize([],_);return Te.vec3.scale(x,x,ku(f.cameraToCenterDistance/f.pixelsPerMeter)),Te.vec3.transformMat4(x,x,z),Te.vec3.add([],_,x)}(u),g=Te.vec3.subtract([],h,a);return Te.vec3.angle(g,a)}function $v(u,i){return t5(u,i)>Math.PI/2*1.01}const i5=Oi(85),xz=Math.cos(i5),bz=Math.sin(i5),wz=Te.mat4.create(),r5=u=>{const i=[];return u.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),u.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i};function n5(u,i,a,h,g,f,_,w,C){if(f&&u.queryGeometry.isAboveHorizon)return!1;f&&(C*=u.pixelToTileUnitsFactor);const z=u.tileID.canonical,x=a.projection.upVectorScale(z,a.center.lat,a.worldSize).metersToTile;for(const T of i)for(const I of T){const E=I.add(w),A=g&&a.elevation?a.elevation.exaggeration()*g.getElevationAt(E.x,E.y,!0):0,k=a.projection.projectTilePoint(E.x,E.y,z);if(A>0){const G=a.projection.upVector(z,E.x,E.y);k.x+=G[0]*x*A,k.y+=G[1]*x*A,k.z+=G[2]*x*A}const B=f?E:Sz(k.x,k.y,k.z,h),$=f?u.tilespaceRays.map(G=>Ez(G,A)):u.queryGeometry.screenGeometry,H=Te.vec4.transformMat4([],[k.x,k.y,k.z,1],h);if(!_&&f?C*=H[3]/a.cameraToCenterDistance:_&&!f&&(C*=a.cameraToCenterDistance/H[3]),f){const G=ye((I.y/qt+z.y)/(1<<z.z));C/=a.projection.pixelsPerMeter(G,1)/re(1,G)}if(Gt($,B,C))return!0}return!1}function Sz(u,i,a,h){const g=Te.vec4.transformMat4([],[u,i,a,1],h);return new Pt(g[0]/g[3],g[1]/g[3])}const o5=Te.vec3.fromValues(0,0,0),Mz=Te.vec3.fromValues(0,0,1);function Ez(u,i){const a=Te.vec3.create();return o5[2]=i,u.intersectsPlane(o5,Mz,a),new Pt(a[0],a[1])}class s5 extends Tt{}let a5,l5,c5,u5;function h5(u,{width:i,height:a},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*a*h)throw new RangeError("mismatched image size")}else g=new Uint8Array(i*a*h);return u.width=i,u.height=a,u.data=g,u}function d5(u,i,a){const{width:h,height:g}=i;h===u.width&&g===u.height||(jv(u,i,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,h),height:Math.min(u.height,g)},a,null),u.width=h,u.height=g,u.data=i.data)}function jv(u,i,a,h,g,f,_,w){if(g.width===0||g.height===0)return i;if(g.width>u.width||g.height>u.height||a.x>u.width-g.width||a.y>u.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||h.x>i.width-g.width||h.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const C=u.data,z=i.data,x=f===4&&w;for(let T=0;T<g.height;T++){const I=((a.y+T)*u.width+a.x)*f,E=((h.y+T)*i.width+h.x)*f;if(x)for(let A=0;A<g.width;A++){const k=I+A*f+3,B=E+A*f;z[B+0]=255,z[B+1]=255,z[B+2]=255,z[B+3]=C[k]}else if(_)for(let A=0;A<g.width;A++){const k=I+A*f,B=E+A*f,$=C[k+3],H=new $t(C[k+0]/255*$,C[k+1]/255*$,C[k+2]/255*$,$).toRenderColor(_).toArray();z[B+0]=H[0],z[B+1]=H[1],z[B+2]=H[2],z[B+3]=H[3]}else for(let A=0;A<g.width*f;A++)z[E+A]=C[I+A]}return i}ti(s5,"HeatmapBucket",{omit:["layers"]});class Ou{constructor(i,a){h5(this,i,1,a)}resize(i){d5(this,new Ou(i),1)}clone(){return new Ou({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,h,g,f){jv(i,a,h,g,f,1,null)}}class Jo{constructor(i,a){h5(this,i,4,a)}resize(i){d5(this,new Jo(i),4)}replace(i,a){a?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Jo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,h,g,f,_,w){jv(i,a,h,g,f,4,_,w)}}class f5{constructor(i,a){this.width=i.width,this.height=i.height,this.data=a instanceof Uint8Array?new Float32Array(a.buffer):a}}function e0(u){const i={},a=u.resolution||256,h=u.clips?u.clips.length:1,g=u.image||new Jo({width:a,height:h}),f=(_,w,C)=>{i[u.evaluationKey]=C;const z=u.expression.evaluate(i);z&&(g.data[_+w+0]=Math.floor(255*z.r/z.a),g.data[_+w+1]=Math.floor(255*z.g/z.a),g.data[_+w+2]=Math.floor(255*z.b/z.a),g.data[_+w+3]=Math.floor(255*z.a))};if(u.clips)for(let _=0,w=0;_<h;++_,w+=4*a)for(let C=0,z=0;C<a;C++,z+=4){const x=C/(a-1),{start:T,end:I}=u.clips[_];f(w,z,T*(1-x)+I*x)}else for(let _=0,w=0;_<a;_++,w+=4)f(0,w,_/(a-1));return g}ti(Ou,"AlphaImage"),ti(Jo,"RGBAImage");const Tz=dr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Cz}=Tz;function t0(u,i,a=2){const h=i&&i.length,g=h?i[0]*a:u.length;let f=p5(u,0,g,a,!0);const _=[];if(!f||f.next===f.prev)return _;let w,C,z;if(h&&(f=function(x,T,I,E){const A=[];for(let k=0,B=T.length;k<B;k++){const $=p5(x,T[k]*E,k<B-1?T[k+1]*E:x.length,E,!1);$===$.next&&($.steiner=!0),A.push(Lz($))}A.sort(Pz);for(let k=0;k<A.length;k++)I=kz(A[k],I);return I}(u,i,f,a)),u.length>80*a){w=1/0,C=1/0;let x=-1/0,T=-1/0;for(let I=a;I<g;I+=a){const E=u[I],A=u[I+1];E<w&&(w=E),A<C&&(C=A),E>x&&(x=E),A>T&&(T=A)}z=Math.max(x-w,T-C),z=z!==0?32767/z:0}return i0(f,_,a,w,C,z,0),_}function p5(u,i,a,h,g){let f;if(g===function(_,w,C,z){let x=0;for(let T=w,I=C-z;T<C;T+=z)x+=(_[I]-_[T])*(_[T+1]+_[I+1]),I=T;return x}(u,i,a,h)>0)for(let _=i;_<a;_+=h)f=_5(_/h|0,u[_],u[_+1],f);else for(let _=a-h;_>=i;_-=h)f=_5(_/h|0,u[_],u[_+1],f);return f&&Zg(f,f.next)&&(n0(f),f=f.next),f}function Kh(u,i){if(!u)return u;i||(i=u);let a,h=u;do if(a=!1,h.steiner||!Zg(h,h.next)&&Gn(h.prev,h,h.next)!==0)h=h.next;else{if(n0(h),h=i=h.prev,h===h.next)break;a=!0}while(a||h!==i);return i}function i0(u,i,a,h,g,f,_){if(!u)return;!_&&f&&function(C,z,x,T){let I=C;do I.z===0&&(I.z=Uv(I.x,I.y,z,x,T)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==C);I.prevZ.nextZ=null,I.prevZ=null,function(E){let A,k=1;do{let B,$=E;E=null;let H=null;for(A=0;$;){A++;let G=$,U=0;for(let Q=0;Q<k&&(U++,G=G.nextZ,G);Q++);let Y=k;for(;U>0||Y>0&&G;)U!==0&&(Y===0||!G||$.z<=G.z)?(B=$,$=$.nextZ,U--):(B=G,G=G.nextZ,Y--),H?H.nextZ=B:E=B,B.prevZ=H,H=B;$=G}H.nextZ=null,k*=2}while(A>1)}(I)}(u,h,g,f);let w=u;for(;u.prev!==u.next;){const C=u.prev,z=u.next;if(f?Iz(u,h,g,f):Az(u))i.push(C.i,u.i,z.i),n0(u),u=z.next,w=z.next;else if((u=z)===w){_?_===1?i0(u=zz(Kh(u),i),i,a,h,g,f,2):_===2&&Dz(u,i,a,h,g,f):i0(Kh(u),i,a,h,g,f,1);break}}}function Az(u){const i=u.prev,a=u,h=u.next;if(Gn(i,a,h)>=0)return!1;const g=i.x,f=a.x,_=h.x,w=i.y,C=a.y,z=h.y,x=g<f?g<_?g:_:f<_?f:_,T=w<C?w<z?w:z:C<z?C:z,I=g>f?g>_?g:_:f>_?f:_,E=w>C?w>z?w:z:C>z?C:z;let A=h.next;for(;A!==i;){if(A.x>=x&&A.x<=I&&A.y>=T&&A.y<=E&&Ef(g,w,f,C,_,z,A.x,A.y)&&Gn(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function Iz(u,i,a,h){const g=u.prev,f=u,_=u.next;if(Gn(g,f,_)>=0)return!1;const w=g.x,C=f.x,z=_.x,x=g.y,T=f.y,I=_.y,E=w<C?w<z?w:z:C<z?C:z,A=x<T?x<I?x:I:T<I?T:I,k=w>C?w>z?w:z:C>z?C:z,B=x>T?x>I?x:I:T>I?T:I,$=Uv(E,A,i,a,h),H=Uv(k,B,i,a,h);let G=u.prevZ,U=u.nextZ;for(;G&&G.z>=$&&U&&U.z<=H;){if(G.x>=E&&G.x<=k&&G.y>=A&&G.y<=B&&G!==g&&G!==_&&Ef(w,x,C,T,z,I,G.x,G.y)&&Gn(G.prev,G,G.next)>=0||(G=G.prevZ,U.x>=E&&U.x<=k&&U.y>=A&&U.y<=B&&U!==g&&U!==_&&Ef(w,x,C,T,z,I,U.x,U.y)&&Gn(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;G&&G.z>=$;){if(G.x>=E&&G.x<=k&&G.y>=A&&G.y<=B&&G!==g&&G!==_&&Ef(w,x,C,T,z,I,G.x,G.y)&&Gn(G.prev,G,G.next)>=0)return!1;G=G.prevZ}for(;U&&U.z<=H;){if(U.x>=E&&U.x<=k&&U.y>=A&&U.y<=B&&U!==g&&U!==_&&Ef(w,x,C,T,z,I,U.x,U.y)&&Gn(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function zz(u,i){let a=u;do{const h=a.prev,g=a.next.next;!Zg(h,g)&&m5(h,a,a.next,g)&&r0(h,g)&&r0(g,h)&&(i.push(h.i,a.i,g.i),n0(a),n0(a.next),a=u=g),a=a.next}while(a!==u);return Kh(a)}function Dz(u,i,a,h,g,f){let _=u;do{let w=_.next.next;for(;w!==_.prev;){if(_.i!==w.i&&Oz(_,w)){let C=g5(_,w);return _=Kh(_,_.next),C=Kh(C,C.next),i0(_,i,a,h,g,f,0),void i0(C,i,a,h,g,f,0)}w=w.next}_=_.next}while(_!==u)}function Pz(u,i){return u.x-i.x}function kz(u,i){const a=function(g,f){let _=f;const w=g.x,C=g.y;let z,x=-1/0;do{if(C<=_.y&&C>=_.next.y&&_.next.y!==_.y){const k=_.x+(C-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(k<=w&&k>x&&(x=k,z=_.x<_.next.x?_:_.next,k===w))return z}_=_.next}while(_!==f);if(!z)return null;const T=z,I=z.x,E=z.y;let A=1/0;_=z;do{if(w>=_.x&&_.x>=I&&w!==_.x&&Ef(C<E?w:x,C,I,E,C<E?x:w,C,_.x,_.y)){const k=Math.abs(C-_.y)/(w-_.x);r0(_,g)&&(k<A||k===A&&(_.x>z.x||_.x===z.x&&Rz(z,_)))&&(z=_,A=k)}_=_.next}while(_!==T);return z}(u,i);if(!a)return i;const h=g5(a,u);return Kh(h,h.next),Kh(a,a.next)}function Rz(u,i){return Gn(u.prev,u,i.prev)<0&&Gn(i.next,u,u.next)<0}function Uv(u,i,a,h,g){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-a)*g|0)|u<<8))|u<<4))|u<<2))|u<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Lz(u){let i=u,a=u;do(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next;while(i!==u);return a}function Ef(u,i,a,h,g,f,_,w){return(g-_)*(i-w)>=(u-_)*(f-w)&&(u-_)*(h-w)>=(a-_)*(i-w)&&(a-_)*(f-w)>=(g-_)*(h-w)}function Oz(u,i){return u.next.i!==i.i&&u.prev.i!==i.i&&!function(a,h){let g=a;do{if(g.i!==a.i&&g.next.i!==a.i&&g.i!==h.i&&g.next.i!==h.i&&m5(g,g.next,a,h))return!0;g=g.next}while(g!==a);return!1}(u,i)&&(r0(u,i)&&r0(i,u)&&function(a,h){let g=a,f=!1;const _=(a.x+h.x)/2,w=(a.y+h.y)/2;do g.y>w!=g.next.y>w&&g.next.y!==g.y&&_<(g.next.x-g.x)*(w-g.y)/(g.next.y-g.y)+g.x&&(f=!f),g=g.next;while(g!==a);return f}(u,i)&&(Gn(u.prev,u,i.prev)||Gn(u,i.prev,i))||Zg(u,i)&&Gn(u.prev,u,u.next)>0&&Gn(i.prev,i,i.next)>0)}function Gn(u,i,a){return(i.y-u.y)*(a.x-i.x)-(i.x-u.x)*(a.y-i.y)}function Zg(u,i){return u.x===i.x&&u.y===i.y}function m5(u,i,a,h){const g=Yg(Gn(u,i,a)),f=Yg(Gn(u,i,h)),_=Yg(Gn(a,h,u)),w=Yg(Gn(a,h,i));return g!==f&&_!==w||!(g!==0||!Xg(u,a,i))||!(f!==0||!Xg(u,h,i))||!(_!==0||!Xg(a,u,h))||!(w!==0||!Xg(a,i,h))}function Xg(u,i,a){return i.x<=Math.max(u.x,a.x)&&i.x>=Math.min(u.x,a.x)&&i.y<=Math.max(u.y,a.y)&&i.y>=Math.min(u.y,a.y)}function Yg(u){return u>0?1:u<0?-1:0}function r0(u,i){return Gn(u.prev,u,u.next)<0?Gn(u,i,u.next)>=0&&Gn(u,u.prev,i)>=0:Gn(u,i,u.prev)<0||Gn(u,u.next,i)<0}function g5(u,i){const a=Vv(u.i,u.x,u.y),h=Vv(i.i,i.x,i.y),g=u.next,f=i.prev;return u.next=i,i.prev=u,a.next=g,g.prev=a,h.next=a,a.prev=h,f.next=h,h.prev=f,h}function _5(u,i,a,h){const g=Vv(u,i,a);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function n0(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Vv(u,i,a){return{i:u,x:i,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Jg(u,i){const a=u.length;if(a<=1)return[u];const h=[];let g,f;for(let _=0;_<a;_++){const w=Lc(u[_]);w!==0&&(u[_].area=Math.abs(w),f===void 0&&(f=w<0),f===w<0?(g&&h.push(g),g=[u[_]]):g.push(u[_]))}if(g&&h.push(g),i>1)for(let _=0;_<h.length;_++)h[_].length<=i||(cu(h[_],i,1,h[_].length-1,Bz),h[_]=h[_].slice(0,i));return h}function Bz(u,i){return i.area-u.area}function qv(u,i,a){const h=a.patternDependencies;let g=!1;for(const f of i){const _=f.paint.get(`${u}-pattern`);_.isConstant()||(g=!0);const w=_.constantOr(null);w&&(g=!0,h[w]=!0)}return g}function Hv(u,i,a,h,g){const f=g.patternDependencies;for(const _ of i){const w=_.paint.get(`${u}-pattern`).value;if(w.kind!=="constant"){let C=w.evaluate({zoom:h},a,{},g.availableImages);C=C&&C.name?C.name:C,f[C]=!0,a.patterns[_.id]=C}}return a}class Gv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nc,this.indexArray=new rn,this.indexArray2=new sc,this.programConfigurations=new Xa(i.layers,{zoom:i.zoom,lut:i.lut}),this.segments=new yn,this.segments2=new yn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=i.projection}updateFootprints(i,a){}populate(i,a,h,g){this.hasPattern=qv("fill",this.layers,a);const f=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:w,id:C,index:z,sourceLayerIndex:x}of i){const T=this.layers[0]._featureFilter.needGeometry,I=St(w,T);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),I,h))continue;const E=f?f.evaluate(I,{},h,a.availableImages):void 0,A={id:C,properties:w.properties,type:w.type,sourceLayerIndex:x,index:z,geometry:T?I.geometry:Xe(w,h,g),patterns:{},sortKey:E};_.push(A)}f&&_.sort((w,C)=>w.sortKey-C.sortKey);for(const w of _){const{geometry:C,index:z,sourceLayerIndex:x}=w;if(this.hasPattern){const T=Hv("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(T)}else this.addFeature(w,C,z,h,{},a.availableImages,a.brightness);a.featureIndex.insert(i[z].feature,C,z,x,this.index)}}update(i,a,h,g,f){const _=Object.keys(i).length!==0;_&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(i,a,_?this.stateDependentLayers:this.layers,h,g,f)}addFeatures(i,a,h,g,f,_){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,a,h,g,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Cz),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,a,h,g,f,_=[],w){for(const C of Jg(a,500)){let z=0;for(const k of C)z+=k.length;const x=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray),T=x.vertexLength,I=[],E=[];for(const k of C){if(k.length===0)continue;k!==C[0]&&E.push(I.length/2);const B=this.segments2.prepareSegment(k.length,this.layoutVertexArray,this.indexArray2),$=B.vertexLength;this.layoutVertexArray.emplaceBack(k[0].x,k[0].y),this.indexArray2.emplaceBack($+k.length-1,$),I.push(k[0].x),I.push(k[0].y);for(let H=1;H<k.length;H++)this.layoutVertexArray.emplaceBack(k[H].x,k[H].y),this.indexArray2.emplaceBack($+H-1,$+H),I.push(k[H].x),I.push(k[H].y);B.vertexLength+=k.length,B.primitiveLength+=k.length}const A=t0(I,E);for(let k=0;k<A.length;k+=3)this.indexArray.emplaceBack(T+A[k],T+A[k+1],T+A[k+2]);x.vertexLength+=z,x.primitiveLength+=A.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,f,_,g,w)}}let y5,v5,x5,b5;ti(Gv,"FillBucket",{omit:["layers","patternFeatures"]});class Wv{constructor(i,a,h,g){if(this.triangleCount=a.length/3,this.min=new Pt(0,0),this.max=new Pt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||i.length===0)return;const[f,_]=[i[0].clone(),i[0].clone()];for(let T=1;T<i.length;++T){const I=i[T];f.x=Math.min(f.x,I.x),f.y=Math.min(f.y,I.y),_.x=Math.max(_.x,I.x),_.y=Math.max(_.y,I.y)}if(g){const T=Math.ceil(Math.max(_.x-f.x,_.y-f.y)/g);h=Math.max(h,T)}if(h===0)return;this.min=f,this.max=_;const w=this.max.sub(this.min);w.x=Math.max(w.x,1),w.y=Math.max(w.y,1);const C=Math.max(w.x,w.y)/h;this.cellsX=Math.max(1,Math.ceil(w.x/C)),this.cellsY=Math.max(1,Math.ceil(w.y/C)),this.xScale=1/C,this.yScale=1/C;const z=[];for(let T=0;T<this.triangleCount;T++){const I=i[a[3*T+0]].sub(this.min),E=i[a[3*T+1]].sub(this.min),A=i[a[3*T+2]].sub(this.min),k=lc(Math.floor(Math.min(I.x,E.x,A.x)),this.xScale,this.cellsX),B=lc(Math.floor(Math.max(I.x,E.x,A.x)),this.xScale,this.cellsX),$=lc(Math.floor(Math.min(I.y,E.y,A.y)),this.yScale,this.cellsY),H=lc(Math.floor(Math.max(I.y,E.y,A.y)),this.yScale,this.cellsY),G=new Pt(0,0),U=new Pt(0,0),Y=new Pt(0,0),Q=new Pt(0,0);for(let se=$;se<=H;++se){G.y=U.y=se*C,Y.y=Q.y=(se+1)*C;for(let xe=k;xe<=B;++xe)G.x=Y.x=xe*C,U.x=Q.x=(xe+1)*C,(mr(I,E,A,G,U,Q)||mr(I,E,A,G,Q,Y))&&z.push({cellIdx:se*this.cellsX+xe,triIdx:T})}}if(z.length===0)return;z.sort((T,I)=>T.cellIdx-I.cellIdx||T.triIdx-I.triIdx);let x=0;for(;x<z.length;){const T=z[x].cellIdx,I={start:this.payload.length,len:0};for(;x<z.length&&z[x].cellIdx===T;)++I.len,this.payload.push(z[x++].triIdx);this.cells[T]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(i,a){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>i.x||i.y>this.max.y||this.min.y>i.y)return;const h=lc(i.x-this.min.x,this.xScale,this.cellsX),g=lc(i.y-this.min.y,this.yScale,this.cellsY),f=this.cells[g*this.cellsX+h];if(f){this._lazyInitLookup();for(let _=0;_<f.len;_++){const w=this.payload[f.start+_],C=Math.floor(w/8),z=1<<w%8;if(!(this.lookup[C]&z)&&(this.lookup[C]|=z,a.push(w),a.length===this.triangleCount))return}}}query(i,a,h){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>a.x||i.y>this.max.y||this.min.y>a.y)return;this._lazyInitLookup();const g=lc(i.x-this.min.x,this.xScale,this.cellsX),f=lc(a.x-this.min.x,this.xScale,this.cellsX),_=lc(i.y-this.min.y,this.yScale,this.cellsY),w=lc(a.y-this.min.y,this.yScale,this.cellsY);for(let C=_;C<=w;C++)for(let z=g;z<=f;z++){const x=this.cells[C*this.cellsX+z];if(x)for(let T=0;T<x.len;T++){const I=this.payload[x.start+T],E=Math.floor(I/8),A=1<<I%8;if(!(this.lookup[E]&A)&&(this.lookup[E]|=A,h.push(I),h.length===this.triangleCount))return}}}}function lc(u,i,a){return Math.max(0,Math.min(a-1,Math.floor(u*i)))}ti(Wv,"TriangleGridIndex");class w5{constructor(i){this.zoom=i.zoom,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=i.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.footprints=[]}updateFootprints(i,a){for(const h of this.footprints)a.push({footprint:h,id:i})}populate(i,a,h,g){const f=[];for(const{feature:_,id:w,index:C,sourceLayerIndex:z}of i){const x=this.layers[0]._featureFilter.needGeometry,T=St(_,x);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),T,h))continue;const I={id:w,properties:_.properties,type:_.type,sourceLayerIndex:z,index:C,geometry:x?T.geometry:Xe(_,h,g),patterns:{}};f.push(I)}for(const _ of f){const{geometry:w,index:C,sourceLayerIndex:z}=_;this.addFeature(_,w,C,h,{},a.availableImages,a.brightness),a.featureIndex.insert(i[C].feature,w,C,z,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(i){}update(i,a,h,g,f){}destroy(){}addFeature(i,a,h,g,f,_=[],w){for(const C of Jg(a,2)){const z=[],x=[],T=[],I=new Pt(1/0,1/0),E=new Pt(-1/0,-1/0);for(const B of C)if(B.length!==0){B!==C[0]&&T.push(x.length/2);for(let $=0;$<B.length;$++)x.push(B[$].x),x.push(B[$].y),z.push(B[$]),I.x=Math.min(I.x,B[$].x),I.y=Math.min(I.y,B[$].y),E.x=Math.max(E.x,B[$].x),E.y=Math.max(E.y,B[$].y)}const A=t0(x,T),k=new Wv(z,A,8,256);this.footprints.push({vertices:z,indices:A,grid:k,min:I,max:E})}}}ti(w5,"ClipBucket",{omit:["layers"]});const Fz=dr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Nz=dr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),$z=dr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),jz=dr([{name:"a_join_normal_inside",components:3,type:"Int16"}]),Uz=dr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),Vz=dr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:qz}=Fz;var Zv,S5,Xv,M5,Yv,E5,T5,Kg={};function C5(){if(S5)return Zv;S5=1;var u=En();function i(g,f,_,w,C){this.properties={},this.extent=_,this.type=0,this._pbf=g,this._geometry=-1,this._keys=w,this._values=C,g.readFields(a,this,f)}function a(g,f,_){g==1?f.id=_.readVarint():g==2?function(w,C){for(var z=w.readVarint()+w.pos;w.pos<z;){var x=C._keys[w.readVarint()],T=C._values[w.readVarint()];C.properties[x]=T}}(_,f):g==3?f.type=_.readVarint():g==4&&(f._geometry=_.pos)}function h(g){for(var f,_,w=0,C=0,z=g.length,x=z-1;C<z;x=C++)w+=((_=g[x]).x-(f=g[C]).x)*(f.y+_.y);return w}return Zv=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var f,_=g.readVarint()+g.pos,w=1,C=0,z=0,x=0,T=[];g.pos<_;){if(C<=0){var I=g.readVarint();w=7&I,C=I>>3}if(C--,w===1||w===2)z+=g.readSVarint(),x+=g.readSVarint(),w===1&&(f&&T.push(f),f=[]),f.push(new u(z,x));else{if(w!==7)throw new Error("unknown command "+w);f&&f.push(f[0].clone())}}return f&&T.push(f),T},i.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var f=g.readVarint()+g.pos,_=1,w=0,C=0,z=0,x=1/0,T=-1/0,I=1/0,E=-1/0;g.pos<f;){if(w<=0){var A=g.readVarint();_=7&A,w=A>>3}if(w--,_===1||_===2)(C+=g.readSVarint())<x&&(x=C),C>T&&(T=C),(z+=g.readSVarint())<I&&(I=z),z>E&&(E=z);else if(_!==7)throw new Error("unknown command "+_)}return[x,I,T,E]},i.prototype.toGeoJSON=function(g,f,_){var w,C,z=this.extent*Math.pow(2,_),x=this.extent*g,T=this.extent*f,I=this.loadGeometry(),E=i.types[this.type];function A($){for(var H=0;H<$.length;H++){var G=$[H];$[H]=[360*(G.x+x)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(G.y+T)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var k=[];for(w=0;w<I.length;w++)k[w]=I[w][0];A(I=k);break;case 2:for(w=0;w<I.length;w++)A(I[w]);break;case 3:for(I=function($){var H=$.length;if(H<=1)return[$];for(var G,U,Y=[],Q=0;Q<H;Q++){var se=h($[Q]);se!==0&&(U===void 0&&(U=se<0),U===se<0?(G&&Y.push(G),G=[$[Q]]):G.push($[Q]))}return G&&Y.push(G),Y}(I),w=0;w<I.length;w++)for(C=0;C<I[w].length;C++)A(I[w][C])}I.length===1?I=I[0]:E="Multi"+E;var B={type:"Feature",geometry:{type:E,coordinates:I},properties:this.properties};return"id"in this&&(B.id=this.id),B},Zv}function A5(){if(M5)return Xv;M5=1;var u=C5();function i(h,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(a,this,g),this.length=this._features.length}function a(h,g,f){h===15?g.version=f.readVarint():h===1?g.name=f.readString():h===5?g.extent=f.readVarint():h===2?g._features.push(f.pos):h===3?g._keys.push(f.readString()):h===4&&g._values.push(function(_){for(var w=null,C=_.readVarint()+_.pos;_.pos<C;){var z=_.readVarint()>>3;w=z===1?_.readString():z===2?_.readFloat():z===3?_.readDouble():z===4?_.readVarint64():z===5?_.readVarint():z===6?_.readSVarint():z===7?_.readBoolean():null}return w}(f))}return Xv=i,i.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var g=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,g,this.extent,this._keys,this._values)},Xv}function I5(){return T5||(T5=1,Kg.VectorTile=function(){if(E5)return Yv;E5=1;var u=A5();function i(a,h,g){if(a===3){var f=new u(g,g.readVarint()+g.pos);f.length&&(h[f.name]=f)}}return Yv=function(a,h){this.layers=a.readFields(i,{},h)},Yv}(),Kg.VectorTileFeature=C5(),Kg.VectorTileLayer=A5()),Kg}var Tf=I5();class Qh extends Pt{constructor(i,a,h){super(i,a),this.z=h}}class z5 extends Qh{constructor(i,a,h,g){super(i,a,h),this.w=g}}function Qg(u,i,a,h){const g=[],f=h===0?(_,w,C,z,x,T)=>{_.push(new Pt(T,C+(T-w)/(z-w)*(x-C)))}:(_,w,C,z,x,T)=>{_.push(new Pt(w+(T-C)/(x-C)*(z-w),T))};for(const _ of u){const w=[];for(const C of _){if(C.length<=2)continue;const z=[];for(let I=0;I<C.length-1;I++){const E=C[I].x,A=C[I].y,k=C[I+1].x,B=C[I+1].y,$=h===0?E:A,H=h===0?k:B;$<i?H>i&&f(z,E,A,k,B,i):$>a?H<a&&f(z,E,A,k,B,a):z.push(C[I]),H<i&&$>=i&&f(z,E,A,k,B,i),H>a&&$<=a&&f(z,E,A,k,B,a)}let x=C[C.length-1];const T=h===0?x.x:x.y;T>=i&&T<=a&&z.push(x),z.length&&(x=z[z.length-1],z[0].x===x.x&&z[0].y===x.y||z.push(z[0]),w.push(z))}w.length&&g.push(w)}return g}function D5(u,i,a,h){const g=a==="x"?"y":"x",f=(h-u[a])/(i[a]-u[a]);u[g]=u[g]+(i[g]-u[g])*f,u[a]=h,u.hasOwnProperty("z")&&(u.z=ai(u.z,i.z,f)),u.hasOwnProperty("w")&&(u.w=ai(u.w,i.w,f))}function P5(u,i,a,h){const g=a,f=h;for(const _ of["x","y"]){let w=u,C=i;w[_]>=C[_]&&(w=i,C=u),w[_]<g&&C[_]>g&&D5(w,C,_,g),w[_]<f&&C[_]>f&&D5(C,w,_,f)}}const e_=Number.MAX_SAFE_INTEGER;function k5(u,i,a,h){return u.order<i||u.order===e_||!(u.clipMask&a)||function(g,f){return f.length!==0&&f.find(_=>_===g)===void 0}(h,u.clipScope)}function t_(u,i){return u.x-i.x||u.y-i.y}function R5(u,i){return t_(u.min,i.min)===0&&t_(u.max,i.max)===0}function Jv(u,i){return!(u.min.x>i.max.x||u.max.x<i.min.x||u.min.y>i.max.y||u.max.y<i.min.y)}function Kv(u,i){if(u.length!==i.length)return!1;for(let a=0;a<u.length;a++)if(u[a].sourceId!==i[a].sourceId||!R5(u[a],i[a])||u[a].order!==i[a].order||u[a].clipMask!==i[a].clipMask||!Jn(u[a].clipScope,i[a].clipScope))return!1;return!0}function L5(u,i,a){const h=1/qt,g=1/(1<<a.canonical.z),f=(i.x*h+a.canonical.x)*g+a.wrap,_=(i.y*h+a.canonical.y)*g;return{min:new Pt((u.x*h+a.canonical.x)*g+a.wrap,(u.y*h+a.canonical.y)*g),max:new Pt(f,_)}}function Hz(u,i,a){const h=1<<a.canonical.z,g=((i.x-a.wrap)*h-a.canonical.x)*qt,f=(i.y*h-a.canonical.y)*qt;return{min:new Pt(((u.x-a.wrap)*h-a.canonical.x)*qt,(u.y*h-a.canonical.y)*qt),max:new Pt(g,f)}}function O5(u,i,a,h,g,f,_){const w=u.indices,C=u.vertices,z=[];for(let x=h;x<h+g;x+=3){const T=i[a[x+0]+f],I=i[a[x+1]+f],E=i[a[x+2]+f],A=Math.min(T.x,I.x,E.x),k=Math.max(T.x,I.x,E.x),B=Math.min(T.y,I.y,E.y),$=Math.max(T.y,I.y,E.y);z.length=0,u.grid.query(new Pt(A,B),new Pt(k,$),z);for(let H=0;H<z.length;H++){const G=z[H];if(mr(C[w[3*G+0]],C[w[3*G+1]],C[w[3*G+2]],T,I,E,_))return!0}}return!1}function B5(u,i,a,h){if(!u||!a)return!1;let g=u.vertices;if(!i.canonical.equals(h.canonical)||i.wrap!==h.wrap){if(a.vertices.length<u.vertices.length)return B5(a,h,u,i);const f=i.canonical,_=h.canonical,w=Math.pow(2,_.z-f.z);g=u.vertices.map(C=>new Pt((C.x+f.x*qt)*w-_.x*qt,(C.y+f.y*qt)*w-_.y*qt))}return O5(a,g,u.indices,0,u.indices.length,0,0)}function F5(u,i,a,h){const g=Math.pow(2,h.z-a.z);return new Pt((u+a.x*qt)*g-h.x*qt,(i+a.y*qt)*g-h.y*qt)}function N5(u,i){const a=[];i.grid.queryPoint(u,a);const h=i.indices,g=i.vertices;for(let f=0;f<a.length;f++){const _=a[f];if(tr([g[h[3*_+0]],g[h[3*_+1]],g[h[3*_+2]]],u))return!0}return!1}const Qv=[new Pt(0,0),new Pt(qt,0),new Pt(qt,qt),new Pt(0,qt)];function $5(u,i){const a=[];let h=[];if(!i||u.length<2)return[u];if(u.length===2)return cr(u[0],u[1],Qv)?[u]:[];for(let g=0;g<u.length+2;g++){const f=u[g%u.length],_=u[(g+1)%u.length],w=cr(g===0?u[u.length-1]:u[(g-1)%u.length],f,Qv),C=cr(f,_,Qv),z=w||C;z&&h.push(f),z&&C||h.length>0&&(h.length>1&&a.push(h),h=[])}return h.length>1&&a.push(h),a}const e3=Tf.VectorTileFeature.types,Gz=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],Wz=["fill-extrusion-flood-light-ground-radius"],Zz=Math.pow(2,13),Xz=Math.pow(2,15)-1,j5=new Pt(0,1),Bu=2147483648;function o0(u,i,a,h,g,f,_,w){u.emplaceBack((i<<1)+_,(a<<1)+f,(Math.floor(h*Zz)<<1)+g,Math.round(w))}function s0(u,i,a){u.emplaceBack(i.x*qt,i.y*qt,a?1:0)}function i_(u,i,a,h,g,f){u.emplaceBack(i.x,i.y,(a.x<<1)+h,(a.y<<1)+g,f)}function a0(u,i,a){u.emplaceBack(i.x,i.y,i.z,a[0]*16384,a[1]*16384,a[2]*16384)}class U5{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class V5{constructor(){this.centroidXY=new Pt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Pt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Pt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Pt(this.max.x-this.min.x,this.max.y-this.min.y)}}class q5{constructor(){this.acc=new Pt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(i,a){i.min.x===Number.MAX_VALUE&&(i.min.x=i.max.x=a.x,i.min.y=i.max.y=a.y)}appendEdge(i,a,h){this.accCount++,this.acc._add(a);let g=!!this.borders;a.x<i.min.x?(i.min.x=a.x,g=!0):a.x>i.max.x&&(i.max.x=a.x,g=!0),a.y<i.min.y?(i.min.y=a.y,g=!0):a.y>i.max.y&&(i.max.y=a.y,g=!0),((a.x===0||a.x===qt)&&a.x===h.x)!=((a.y===0||a.y===qt)&&a.y===h.y)&&this.processBorderOverlap(a,h),g&&this.checkBorderIntersection(a,h)}checkBorderIntersection(i,a){a.x<0!=i.x<0&&this.addBorderIntersection(0,ai(a.y,i.y,(0-a.x)/(i.x-a.x))),a.x>qt!=i.x>qt&&this.addBorderIntersection(1,ai(a.y,i.y,(qt-a.x)/(i.x-a.x))),a.y<0!=i.y<0&&this.addBorderIntersection(2,ai(a.x,i.x,(0-a.y)/(i.y-a.y))),a.y>qt!=i.y>qt&&this.addBorderIntersection(3,ai(a.x,i.x,(qt-a.y)/(i.y-a.y)))}addBorderIntersection(i,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[i];a<h[0]&&(h[0]=a),a>h[1]&&(h[1]=a)}processBorderOverlap(i,a){if(i.x===a.x){if(i.y===a.y)return;const h=i.x===0?0:1;this.addBorderIntersection(h,a.y),this.addBorderIntersection(h,i.y)}else{const h=i.y===0?2:3;this.addBorderIntersection(h,a.x),this.addBorderIntersection(h,i.x)}}centroid(){return this.accCount===0?new Pt(0,0):new Pt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((i,a)=>i+ +(a[0]!==Number.MAX_VALUE),0):0}}function H5(u,i){const a=u.add(i)._unit(),h=Ot(u.x*a.x+u.y*a.y,-1,1);var g,f,_;return _=Math.acos(h),Math.min(4,Math.max(-4,Math.tan(_)))/4*Xz*((g=u).x*(f=i).y-g.y*f.x<0?-1:1)}const Yz=[u=>u.x<0,u=>u.x>qt,u=>u.y<0,u=>u.y>qt];function Jz(u,i,a,h){const g=[4];if(h===0)return g;a._mult(h);const f=u.sub(a),_=i.sub(a),w=[u,i,f,_];for(let C=0;C<4;C++)for(const z of w)if(Yz[C](z)){g.push(C);break}return g}class G5{constructor(i){this.vertexArray=new Fp,this.indexArray=new rn,this.programConfigurations=new Xa(i.layers,{zoom:i.zoom,lut:i.lut},a=>Wz.includes(a)),this._segments=new yn,this.hiddenByLandmarkVertexArray=new vf,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new yn}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(i,a,h,g=!1){const f=i.length;if(f>2){let _=Math.max(0,this._segments.get().length-1);const w=this._segments._prepareSegment(4*f,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let C;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const z=i[0],x=i[1];C=H5(z.sub(i[f-1])._perp()._unit(),x.sub(z)._perp()._unit())}for(let z=0;z<f;z++){const x=z===f-1?0:z+1,T=i[z],I=i[x],E=i[x===f-1?0:x+1],A=I.sub(T)._perp()._unit(),k=H5(A,E.sub(I)._perp()._unit()),B=C,$=k;if(t3(T,I,a)||g&&X5(T,a)&&X5(I,a)){C=k;continue}const H=w.vertexLength;i_(this.vertexArray,T,I,1,1,B),i_(this.vertexArray,T,I,1,0,B),i_(this.vertexArray,T,I,0,1,$),i_(this.vertexArray,T,I,0,0,$),w.vertexLength+=4;const G=Jz(T,I,A,h);for(const U of G)this._segmentToGroundQuads[_].push({id:H,region:U}),this._segmentToRegionTriCounts[_][U]+=2,w.primitiveLength+=2;C=k}}}prepareBorderSegments(){if(!this.hasData())return;const i=this._segments.get(),a=i.length;for(let h=0;h<a;h++)this._segmentToGroundQuads[h].sort((g,f)=>g.region-f.region);for(let h=0;h<a;h++){const g=this._segmentToGroundQuads[h],f=i[h],_=this._segmentToRegionTriCounts[h];_.reduce((C,z)=>C+z,0);let w=0;for(let C=0;C<=4;C++){const z=_[C];if(z!==0){let x=this.regionSegments[C];x||(x=this.regionSegments[C]=new yn);const T={vertexOffset:f.vertexOffset,primitiveOffset:f.primitiveOffset+w,vertexLength:f.vertexLength,primitiveLength:z};x.get().push(T)}w+=z}for(let C=0;C<g.length;C++){const z=g[C].id;this.indexArray.emplaceBack(z,z+1,z+3),this.indexArray.emplaceBack(z,z+3,z+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(i,a,h,g,f,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,i,a,h,g,f,_)}upload(i){this.hasData()&&(this.vertexBuffer=i.createVertexBuffer(this.vertexArray,Nz.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}uploadPaintProperties(i){this.hasData()&&this.programConfigurations.upload(i)}update(i,a,h,g,f,_){this.hasData()&&this.programConfigurations.updatePaintArrays(i,a,h,g,f,_)}updateHiddenByLandmark(i){if(!this.hasData())return;const a=i.groundVertexCount+i.groundVertexArrayOffset;if(i.groundVertexCount===0)return;const h=i.flags&Bu?1:0;for(let g=i.groundVertexArrayOffset;g<a;++g)this.hiddenByLandmarkVertexArray.emplace(g,h);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(i){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=i.createVertexBuffer(this.hiddenByLandmarkVertexArray,Uz.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let i=0;i<=4;i++){const a=this.regionSegments[i];a&&a.destroy()}}}}class r_{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new rn,this.footprintVertices=new nc,this.footprintSegments=[],this.layoutVertexArray=new Eu,this.centroidVertexArray=new Bg,this.wallVertexArray=new Wp,this.indexArray=new rn,this.programConfigurations=new Xa(i.layers,{zoom:i.zoom,lut:i.lut},a=>Gz.includes(a)),this.segments=new yn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.groundEffect=new G5(i),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(i,a){}populate(i,a,h,g){this.features=[],this.hasPattern=qv("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=ke(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:f,id:_,index:w,sourceLayerIndex:C}of i){const z=this.layers[0]._featureFilter.needGeometry,x=St(f,z);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),x,h))continue;const T={id:_,sourceLayerIndex:C,index:w,geometry:z?x.geometry:Xe(f,h,g),properties:f.properties,type:f.type,patterns:{}},I=this.layoutVertexArray.length,E=e3[T.type]==="Polygon";if(this.hasPattern)this.features.push(Hv("fill-extrusion",this.layers,T,this.zoom,a));else if(this.wallMode)for(const A of T.geometry)for(const k of $5(A,E))this.addFeature(T,[k],w,h,{},a.availableImages,g,a.brightness);else this.addFeature(T,T.geometry,w,h,{},a.availableImages,g,a.brightness);a.featureIndex.insert(f,T.geometry,w,C,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(i,a,h,g,f,_){for(const w of this.features){const C=e3[w.type]==="Polygon",{geometry:z}=w;if(this.wallMode)for(const x of z)for(const T of $5(x,C))this.addFeature(w,[T],w.index,a,h,g,f,_);else this.addFeature(w,z,w.index,a,h,g,f,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(i,a,h,g,f){const _=Object.keys(i).length!==0;if(_&&!this.stateDependentLayers.length)return;const w=_?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(i,a,w,h,g,f),this.groundEffect.update(i,a,w,h,g,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,qz),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.wallVertexBuffer=i.createVertexBuffer(this.wallVertexArray,jz.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,Vz.members,!0)),this.groundEffect.upload(i)),this.groundEffect.uploadPaintProperties(i),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.groundEffect.uploadHiddenByLandmark(i),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,$z.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,a,h,g,f,_,w,C){const z=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(i,{})/this.tileToMeter,x=[new Pt(0,0),new Pt(qt,qt)],T=w.projection,I=T.name==="globe",E=this.wallMode||e3[i.type]==="Polygon",A=new q5;A.centroidDataIndex=this.centroidData.length;const k=new V5,B=this.layers[0].paint.get("fill-extrusion-base").evaluate(i,{},g)<=0,$=this.layers[0].paint.get("fill-extrusion-height").evaluate(i,{},g);let H;if(k.height=$,k.vertexArrayOffset=this.layoutVertexArray.length,k.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Vh),this.wallMode){if(I)return void Yi("Non zero fill-extrusion-line-width is not yet supported on globe.");if(a.length!==1)return;H=function(ge){const Pe=ge[0].x===ge[ge.length-1].x&&ge[0].y===ge[ge.length-1].y;(function(Bt){let Ct=0;const yi=Bt.length;for(let Kt=0;Kt<yi;Kt++)Ct+=(Bt[(Kt+1)%yi].x-Bt[Kt].x)*(Bt[(Kt+1)%yi].y+Bt[Kt].y);return Ct>=0})(ge)||(ge=ge.reverse());const Ie={geometry:[],joinNormals:[],indices:[]},Fe=[],Ne=[],He=[];let et=ge.length;if(et<(Pe?3:2))return Ie;for(;et>=2&&ge[et-1].equals(ge[et-2]);)et--;let rt,Ye,_t,zt,ht,ei=0;for(;ei<et-1&&ge[ei].equals(ge[ei+1]);)ei++;Pe&&(rt=ge[et-2],ht=ge[ei].sub(rt)._unit()._perp());for(let Bt=ei;Bt<et;Bt++){if(_t=Bt===et-1?Pe?ge[ei+1]:void 0:ge[Bt+1],_t&&ge[Bt].equals(_t))continue;ht&&(zt=ht),rt&&(Ye=rt),rt=ge[Bt],ht=_t?_t.sub(rt)._unit()._perp():zt,zt=zt||ht;let Ct=zt.add(ht);Ct.x===0&&Ct.y===0||Ct._unit();const yi=Ct.x*ht.x+Ct.y*ht.y,Kt=yi!==0?1/yi:1/0,ri=zt.x*ht.y-zt.y*ht.x>0;let Pi="miter";const Ni=2;Pi==="miter"&&Kt>Ni&&(Pi="bevel"),Pi==="bevel"&&(Kt>100&&(Pi="flipbevel"),Kt<Ni&&(Pi="miter"));const $i=(Li,Zi,Hi,Or)=>{const Pr=new Pt(Li.x,Li.y),Ci=new Pt(Li.x,Li.y);Pr.x+=Zi.x*Or,Pr.y+=Zi.y*Or,Ci.x-=Zi.x*Math.max(Hi,1),Ci.y-=Zi.y*Math.max(Hi,1),He.push(Zi),Fe.push(Pr),Ne.push(Ci)};if(Pi==="miter")Ct._mult(Kt),$i(rt,Ct,0,0);else if(Pi==="flipbevel")Ct=ht.mult(-1),$i(rt,Ct,0,0),$i(rt,Ct.mult(-1),0,0);else{const Li=-Math.sqrt(Kt*Kt-1),Zi=ri?Li:0,Hi=ri?0:Li;Ye&&$i(rt,zt,Zi,Hi),_t&&$i(rt,ht,Zi,Hi)}}Ie.geometry=[...Fe,...Ne.reverse(),Fe[0]],Ie.joinNormals=[...He,...He.reverse(),He[He.length-1]];const Vt=Ie.geometry.length-1;for(let Bt=0;Bt<Vt/2;Bt++)if(Bt+1<Vt/2){let Ct=Bt,yi=Bt+1,Kt=Vt-1-Bt,ri=Vt-2-Bt;Ct=Ct===0?Vt-1:Ct-1,yi=yi===0?Vt-1:yi-1,Kt=Kt===0?Vt-1:Kt-1,ri=ri===0?Vt-1:ri-1,Ie.indices.push(Kt),Ie.indices.push(yi),Ie.indices.push(Ct),Ie.indices.push(Kt),Ie.indices.push(ri),Ie.indices.push(yi)}return Ie}(a[0]),a=[H.geometry]}const G=(ge,Pe)=>ge<(Pe.length-1)/2||ge===Pe.length-1,U=this.wallMode?[a]:Jg(a,500);for(let ge=U.length-1;ge>=0;ge--){const Pe=U[ge];(Pe.length===0||(Y=Pe[0]).every(me=>me.x<=0)||Y.every(me=>me.x>=qt)||Y.every(me=>me.y<=0)||Y.every(me=>me.y>=qt))&&U.splice(ge,1)}var Y;let Q;if(I)Q=Q5(U,x,g);else{Q=[];for(const ge of U)Q.push({polygon:ge,bounds:x})}const se=E?this.edgeRadius:0,xe=se>0&&this.zoom<17,pe=(ge,Pe)=>{if(ge.length===0)return!1;const me=ge[ge.length-1];return Pe.x===me.x&&Pe.y===me.y};for(const{polygon:ge,bounds:Pe}of Q){let me=0,Ie=0;for(const et of ge)E&&!et[0].equals(et[et.length-1])&&et.push(et[0]),Ie+=E?et.length-1:et.length;const Fe=this.segments.prepareSegment((E?5:4)*Ie,this.layoutVertexArray,this.indexArray);k.footprintSegIdx<0&&(k.footprintSegIdx=this.footprintSegments.length),k.polygonSegIdx<0&&(k.polygonSegIdx=this.polygonSegments.length);const Ne={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},He=new U5;if(He.vertexOffset=this.footprintVertices.length,He.indexOffset=3*this.footprintIndices.length,He.ringIndices=[],E){const et=[],rt=[];me=Fe.vertexLength;for(let _t=0;_t<ge.length;_t++){const zt=ge[_t];zt.length&&_t!==0&&rt.push(et.length/2);const ht=[];let ei,Vt;ei=zt[1].sub(zt[0])._perp()._unit(),He.ringIndices.push(zt.length-1);for(let Bt=1;Bt<zt.length;Bt++){const Ct=zt[Bt],yi=zt[Bt===zt.length-1?1:Bt+1],Kt=Ct.clone();if(se){Vt=yi.sub(Ct)._perp()._unit();const ri=ei.add(Vt)._unit(),Pi=se*Math.min(4,1/(ei.x*ri.x+ei.y*ri.y));Kt.x+=Pi*ri.x,Kt.y+=Pi*ri.y,Kt.x=Math.round(Kt.x),Kt.y=Math.round(Kt.y),ei=Vt}if(!B||se!==0&&!xe||pe(ht,Kt)||ht.push(Kt),o0(this.layoutVertexArray,Kt.x,Kt.y,0,0,1,1,0),this.wallMode){const ri=G(Bt,zt);s0(this.wallVertexArray,H.joinNormals[Bt],!ri)}Fe.vertexLength++,this.footprintVertices.emplaceBack(Ct.x,Ct.y),et.push(Ct.x,Ct.y),I&&a0(this.layoutVertexExtArray,T.projectTilePoint(Kt.x,Kt.y,g),T.upVector(g,Kt.x,Kt.y))}B&&(se===0||xe)&&(ht.length!==0&&pe(ht,ht[0])&&ht.pop(),this.groundEffect.addData(ht,Pe,z))}const Ye=this.wallMode?H.indices:t0(et,rt);for(let _t=0;_t<Ye.length;_t+=3)this.footprintIndices.emplaceBack(He.vertexOffset+Ye[_t+0],He.vertexOffset+Ye[_t+1],He.vertexOffset+Ye[_t+2]),this.indexArray.emplaceBack(me+Ye[_t],me+Ye[_t+2],me+Ye[_t+1]),Fe.primitiveLength++;He.indexCount+=Ye.length,He.vertexCount+=this.footprintVertices.length-He.vertexOffset}for(let et=0;et<ge.length;et++){const rt=ge[et];A.startRing(k,rt[0]);let Ye=rt.length>4&&Y5(rt[rt.length-2],rt[0],rt[1]),_t=se?Kz(rt[rt.length-2],rt[0],rt[1],se):0;const zt=[];let ht,ei,Vt;ei=rt[1].sub(rt[0])._perp()._unit();let Bt=!0;for(let Ct=1,yi=0;Ct<rt.length;Ct++){let Kt=rt[Ct-1],ri=rt[Ct];const Pi=rt[Ct===rt.length-1?1:Ct+1];if(A.appendEdge(k,ri,Kt),t3(ri,Kt,Pe)){se&&(ei=Pi.sub(ri)._perp()._unit(),Bt=!Bt);continue}const Ni=ri.sub(Kt)._perp(),$i=Ni.x/(Math.abs(Ni.x)+Math.abs(Ni.y)),Li=Ni.y>0?1:0,Zi=Kt.dist(ri);if(yi+Zi>32768&&(yi=0),se){Vt=Pi.sub(ri)._perp()._unit();let Ci=Z5(Kt,ri,Pi,W5(ei,Vt),se);isNaN(Ci)&&(Ci=0);const br=ri.sub(Kt)._unit();Kt=Kt.add(br.mult(_t))._round(),ri=ri.add(br.mult(-Ci))._round(),_t=Ci,ei=Vt,B&&this.zoom>=17&&(pe(zt,Kt)||zt.push(Kt),pe(zt,ri)||zt.push(ri))}const Hi=Fe.vertexLength,Or=rt.length>4&&Y5(Kt,ri,Pi);let Pr=J5(yi,Ye,Bt);if(o0(this.layoutVertexArray,Kt.x,Kt.y,$i,Li,0,0,Pr),o0(this.layoutVertexArray,Kt.x,Kt.y,$i,Li,0,1,Pr),this.wallMode){const Ci=G(Ct-1,rt),br=H.joinNormals[Ct-1];s0(this.wallVertexArray,br,Ci),s0(this.wallVertexArray,br,Ci)}if(yi+=Zi,Pr=J5(yi,Or,!Bt),Ye=Or,o0(this.layoutVertexArray,ri.x,ri.y,$i,Li,0,0,Pr),o0(this.layoutVertexArray,ri.x,ri.y,$i,Li,0,1,Pr),this.wallMode){const Ci=G(Ct,rt),br=H.joinNormals[Ct];s0(this.wallVertexArray,br,Ci),s0(this.wallVertexArray,br,Ci)}if(Fe.vertexLength+=4,this.indexArray.emplaceBack(Hi+0,Hi+1,Hi+2),this.indexArray.emplaceBack(Hi+1,Hi+3,Hi+2),Fe.primitiveLength+=2,se){const Ci=me+(Ct===1?rt.length-2:Ct-2),br=Ct===1?me:Ci+1;if(this.indexArray.emplaceBack(Hi+1,Ci,Hi+3),this.indexArray.emplaceBack(Ci,br,Hi+3),Fe.primitiveLength+=2,ht===void 0&&(ht=Hi),!t3(Pi,rt[Ct],Pe)){const Cr=Ct===rt.length-1?ht:Fe.vertexLength;this.indexArray.emplaceBack(Hi+2,Hi+3,Cr),this.indexArray.emplaceBack(Hi+3,Cr+1,Cr),this.indexArray.emplaceBack(Hi+3,br,Cr+1),Fe.primitiveLength+=3}Bt=!Bt}if(I){const Ci=this.layoutVertexExtArray,br=T.projectTilePoint(Kt.x,Kt.y,g),Cr=T.projectTilePoint(ri.x,ri.y,g),Kr=T.upVector(g,Kt.x,Kt.y),Sn=T.upVector(g,ri.x,ri.y);a0(Ci,br,Kr),a0(Ci,br,Kr),a0(Ci,Cr,Sn),a0(Ci,Cr,Sn)}}E&&(me+=rt.length-1),B&&se&&this.zoom>=17&&(zt.length!==0&&pe(zt,zt[0])&&zt.pop(),this.groundEffect.addData(zt,Pe,z,se>0))}this.footprintSegments.push(He),Ne.triangleCount=this.indexArray.length-Ne.triangleArrayOffset,this.polygonSegments.push(Ne),++k.footprintSegLen,++k.polygonSegLen}if(k.vertexCount=this.layoutVertexArray.length-k.vertexArrayOffset,k.groundVertexCount=this.groundEffect.vertexArray.length-k.groundVertexArrayOffset,k.vertexCount!==0){if(k.centroidXY=A.borders?j5:this.encodeCentroid(A,k),this.centroidData.push(k),A.borders){this.featuresOnBorder.push(A);const ge=this.featuresOnBorder.length-1;for(let Pe=0;Pe<A.borders.length;Pe++)A.borders[Pe][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Pe].push(ge)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,f,_,g,C),this.groundEffect.addPaintPropertiesData(i,h,f,_,g,C),this.maxHeight=Math.max(this.maxHeight,$)}}sortBorders(){for(let i=0;i<this.borderFeatureIndices.length;i++)this.borderFeatureIndices[i].sort((a,h)=>this.featuresOnBorder[a].borders[i][0]-this.featuresOnBorder[h].borders[i][0])}splitToSubtiles(){const i=[];for(let w=0;w<this.centroidData.length;w++){const C=this.centroidData[w],z=+(C.min.y+C.max.y>qt),x=2*z+(+(C.min.x+C.max.x>qt)^z);for(let T=0;T<C.polygonSegLen;T++){const I=C.polygonSegIdx+T;i.push({centroidIdx:w,subtile:x,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const a=new rn;i.sort((w,C)=>w.triangleSegmentIdx===C.triangleSegmentIdx?w.subtile-C.subtile:w.triangleSegmentIdx-C.triangleSegmentIdx);let h=0,g=0,f=0;for(const w of i){if(w.triangleSegmentIdx!==h)break;f++}const _=i.length;for(;g!==i.length;){h=i[g].triangleSegmentIdx;let w=0,C=g,z=g;for(let x=C;x<f&&i[x].subtile===w;x++)z++;for(;C!==f;){const x=i[C];w=x.subtile;const T=this.centroidData[x.centroidIdx].min.clone(),I=this.centroidData[x.centroidIdx].max.clone(),E={vertexOffset:this.segments.segments[h].vertexOffset,primitiveOffset:a.length,vertexLength:this.segments.segments[h].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let A=C;A<z;A++){const k=i[A],B=this.polygonSegments[k.polygonSegmentIdx],$=this.centroidData[k.centroidIdx].min,H=this.centroidData[k.centroidIdx].max,G=this.indexArray.uint16;for(let U=B.triangleArrayOffset;U<B.triangleArrayOffset+B.triangleCount;U++)a.emplaceBack(G[3*U],G[3*U+1],G[3*U+2]);E.primitiveLength+=B.triangleCount,T.x=Math.min(T.x,$.x),T.y=Math.min(T.y,$.y),I.x=Math.max(I.x,H.x),I.y=Math.max(I.y,H.y)}E.primitiveLength>0&&this.triangleSubSegments.push({segment:E,min:T,max:I}),C=z;for(let A=C;A<f&&i[A].subtile===i[C].subtile;A++)z++}g=f;for(let x=g;x<_&&i[x].triangleSegmentIdx===i[g].triangleSegmentIdx;x++)f++}a._trim(),this.indexArray=a}getVisibleSegments(i,a,h){const g=new yn;if(this.wallMode){for(const k of this.triangleSubSegments)g.segments.push(k.segment);return g}let f=0,_=0;const w=1<<i.canonical.z;if(a){const k=a.getMinMaxForTile(i);k&&(f=k.min,_=k.max)}_+=this.maxHeight;const C=i.toUnwrapped();let z;const x=[C.canonical.x/w+C.wrap,C.canonical.y/w],T=[(C.canonical.x+1)/w+C.wrap,(C.canonical.y+1)/w],I=(k,B,$)=>[k[0]*(1-$[0])+B[0]*$[0],k[1]*(1-$[1])+B[1]*$[1]],E=[],A=[];for(const k of this.triangleSubSegments){E[0]=k.min.x/qt,E[1]=k.min.y/qt,A[0]=k.max.x/qt,A[1]=k.max.y/qt;const B=I(x,T,E),$=I(x,T,A);if(new Tr([B[0],B[1],f],[$[0],$[1],_]).intersectsPrecise(h)===0){z&&(g.segments.push(z),z=void 0);continue}const H=k.segment;z&&z.vertexOffset!==H.vertexOffset&&(g.segments.push(z),z=void 0),z?(z.vertexLength+=H.vertexLength,z.primitiveLength+=H.primitiveLength):z={vertexOffset:H.vertexOffset,primitiveLength:H.primitiveLength,vertexLength:H.vertexLength,primitiveOffset:H.primitiveOffset,sortKey:void 0,vaos:{}}}return z&&g.segments.push(z),g}encodeCentroid(i,a){const h=i.centroid(),g=a.span(),f=Math.min(7,Math.round(g.x*this.tileToMeter/10)),_=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new Pt(Ot(h.x,1,qt-1)<<3|f,Ot(h.y,1,qt-1)<<3|_)}encodeBorderCentroid(i){if(!i.borders)return new Pt(0,0);const a=i.borders,h=Number.MAX_VALUE;if(a[0][0]!==h||a[1][0]!==h){const g=a[0][0]!==h?0:1;return new Pt(6|(a[0][0]!==h?0:65528),(a[g][0]+a[g][1])/2<<3|6)}{const g=a[2][0]!==h?2:3;return new Pt((a[g][0]+a[g][1])/2<<3|6,6|(a[2][0]!==h?0:65528))}}showCentroid(i){const a=this.centroidData[i.centroidDataIndex];a.flags&=Bu,a.centroidXY.x=0,a.centroidXY.y=0,this.writeCentroidToBuffer(a)}writeCentroidToBuffer(i){this.groundEffect.updateHiddenByLandmark(i);const a=i.vertexArrayOffset,h=i.vertexCount+i.vertexArrayOffset,g=i.flags&Bu?j5:i.centroidXY,f=this.centroidVertexArray.geta_centroid_pos0(a);if(this.centroidVertexArray.geta_centroid_pos1(a)!==g.y||f!==g.x){for(let _=a;_<h;++_)this.centroidVertexArray.emplace(_,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const i of this.centroidData)this.writeCentroidToBuffer(i)}updateReplacement(i,a,h){if(a.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=a.updateTime;const g=a.getReplacementRegionsForTile(i.toUnwrapped());if(Kv(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const f=[];for(const _ of this.activeReplacements){if(_.order<h)continue;const w=Math.max(1,Math.pow(2,_.footprintTileId.canonical.z-i.canonical.z));for(const C of this.centroidData)if(!(C.flags&Bu||_.min.x>C.max.x||C.min.x>_.max.x||_.min.y>C.max.y||C.min.y>_.max.y))for(let z=0;z<C.footprintSegLen;z++){const x=this.footprintSegments[C.footprintSegIdx+z];if(f.length=0,Qz(this.footprintVertices,x.vertexOffset,x.vertexCount,_.footprintTileId.canonical,i.canonical,f),O5(_.footprint,f,this.footprintIndices.uint16,x.indexOffset,x.indexCount,-x.vertexOffset,-w)){C.flags|=Bu;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(i,a,h){let g=!1;for(let f=0;f<h.footprintSegLen;f++){const _=this.footprintSegments[h.footprintSegIdx+f];let w=0;for(const C of _.ringIndices){for(let z=w,x=C+w-1;z<C+w;x=z++){const T=this.footprintVertices.int16[2*(z+_.vertexOffset)+0],I=this.footprintVertices.int16[2*(z+_.vertexOffset)+1],E=this.footprintVertices.int16[2*(x+_.vertexOffset)+1];I>a!=E>a&&i<(this.footprintVertices.int16[2*(x+_.vertexOffset)+0]-T)*(a-I)/(E-I)+T&&(g=!g)}w=C}}return g}getHeightAtTileCoord(i,a){let h=Number.NEGATIVE_INFINITY,g=!0;const f=4*(i+qt)*qt+(a+qt);if(this.partLookup.hasOwnProperty(f)){const _=this.partLookup[f];return _?{height:_.height,hidden:!!(_.flags&Bu)}:void 0}for(const _ of this.centroidData)i>_.max.x||_.min.x>i||a>_.max.y||_.min.y>a||this.footprintContainsPoint(i,a,_)&&_&&_.height>h&&(h=_.height,this.partLookup[f]=_,g=!!(_.flags&Bu));if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:g};this.partLookup[f]=void 0}}function W5(u,i){const a=u.add(i)._unit();return u.x*a.x+u.y*a.y}function Kz(u,i,a,h){const g=i.sub(u)._perp()._unit(),f=a.sub(i)._perp()._unit();return Z5(u,i,a,W5(g,f),h)}function Z5(u,i,a,h,g){const f=Math.sqrt(1-h*h);return Math.min(u.dist(i)/3,i.dist(a)/3,g*f/h)}function t3(u,i,a){return u.x<a[0].x&&i.x<a[0].x||u.x>a[1].x&&i.x>a[1].x||u.y<a[0].y&&i.y<a[0].y||u.y>a[1].y&&i.y>a[1].y}function X5(u,i){return u.x<i[0].x||u.x>i[1].x||u.y<i[0].y||u.y>i[1].y}function Y5(u,i,a){if(u.x<0||u.x>=qt||i.x<0||i.x>=qt||a.x<0||a.x>=qt)return!1;const h=a.sub(i),g=h.perp(),f=u.sub(i);return(h.x*f.x+h.y*f.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(f.x*f.x+f.y*f.y))>-.866&&g.x*f.x+g.y*f.y<0}function J5(u,i,a){const h=i?2|u:-3&u;return a?1|h:-2&h}function K5(){const u=Math.PI/32,i=Math.tan(u),a=R;return a*Math.sqrt(1+2*i*i)-a}function Q5(u,i,a){const h=1<<a.z,g=ue(a.x/h),f=ue((a.x+1)/h),_=ye(a.y/h),w=ye((a.y+1)/h);return function(C,z,x,T,I=0,E){const A=[];if(!C.length||!x||!T)return A;const k=(Q,se)=>{for(const xe of Q)A.push({polygon:xe,bounds:se})},B=Math.ceil(Math.log2(x)),$=Math.ceil(Math.log2(T)),H=B-$,G=[];for(let Q=0;Q<Math.abs(H);Q++)G.push(H>0?0:1);for(let Q=0;Q<Math.min(B,$);Q++)G.push(0),G.push(1);let U=C;if(U=Qg(U,z[0].y-I,z[1].y+I,1),U=Qg(U,z[0].x-I,z[1].x+I,0),!U.length)return A;const Y=[];for(G.length?Y.push({polygons:U,bounds:z,depth:0}):k(U,z);Y.length;){const Q=Y.pop(),se=Q.depth,xe=G[se],pe=Q.bounds[0],ge=Q.bounds[1],Pe=xe===0?pe.x:pe.y,me=xe===0?ge.x:ge.y,Ie=E?E(xe,Pe,me):.5*(Pe+me),Fe=Qg(Q.polygons,Pe-I,Ie+I,xe),Ne=Qg(Q.polygons,Ie-I,me+I,xe);if(Fe.length){const He=[pe,new Pt(xe===0?Ie:ge.x,xe===1?Ie:ge.y)];G.length>se+1?Y.push({polygons:Fe,bounds:He,depth:se+1}):k(Fe,He)}if(Ne.length){const He=[new Pt(xe===0?Ie:pe.x,xe===1?Ie:pe.y),ge];G.length>se+1?Y.push({polygons:Ne,bounds:He,depth:se+1}):k(Ne,He)}}return A}(u,i,Math.ceil((f-g)/11.25),Math.ceil((_-w)/11.25),1,(C,z,x)=>{if(C===0)return .5*(z+x);{const T=ye((a.y+z/qt)/h);return(ne(.5*(ye((a.y+x/qt)/h)+T))*h-a.y)*qt}})}function Qz(u,i,a,h,g,f){const _=Math.pow(2,h.z-g.z);for(let w=0;w<a;w++){let C=u.int16[2*(w+i)+0],z=u.int16[2*(w+i)+1];C=(C+g.x*qt)*_-h.x*qt,z=(z+g.y*qt)*_-h.y*qt,f.push(new Pt(C,z))}}let ew,tw;function l0(u,i){return u.x*i.x+u.y*i.y}function iw(u,i){if(u.length===1){let a=0;const h=i[a++];let g;for(;!g||h.equals(g);)if(g=i[a++],!g)return 1/0;for(;a<i.length;a++){const f=i[a],_=u[0],w=g.sub(h),C=f.sub(h),z=_.sub(h),x=l0(w,w),T=l0(w,C),I=l0(C,C),E=l0(z,w),A=l0(z,C),k=x*I-T*T,B=(I*E-T*A)/k,$=(x*A-T*E)/k,H=h.z*(1-B-$)+g.z*B+f.z*$;if(isFinite(H))return H}return 1/0}{let a=1/0;for(const h of i)a=Math.min(a,h.z);return a}}function rw(u,i,a,h,g,f,_,w){const C=_*g.getElevationAt(u,i,!0,!0),z=f[0]!==0,x=z?f[1]===0?_*(f[0]/7-450):_*function(T,I,E){const A=Math.floor(I[0]/8),k=Math.floor(I[1]/8),B=10*(I[0]-8*A),$=10*(I[1]-8*k),H=T.getElevationAt(A,k,!0,!0),G=T.getMeterToDEM(E),U=Math.floor(.5*(B*G-1)),Y=Math.floor(.5*($*G-1)),Q=T.tileCoordToPixel(A,k),se=2*U+1,xe=2*Y+1,pe=function(Ne,He,et,rt,Ye){return[Ne.getElevationAtPixel(He,et,!0),Ne.getElevationAtPixel(He+Ye,et,!0),Ne.getElevationAtPixel(He,et+Ye,!0),Ne.getElevationAtPixel(He+rt,et+Ye,!0)]}(T,Q.x-U,Q.y-Y,se,xe),ge=Math.abs(pe[0]-pe[1]),Pe=Math.abs(pe[2]-pe[3]),me=Math.abs(pe[0]-pe[2])+Math.abs(pe[1]-pe[3]),Ie=Math.min(.25,.5*G*(ge+Pe)/se),Fe=Math.min(.25,.5*G*me/xe);return H+Math.max(Ie*B,Fe*$)}(g,f,w):C;return{base:C+(a===0?-1:a),top:z?Math.max(x+h,C+a+2):C+h}}ti(r_,"FillExtrusionBucket",{omit:["layers","features"]}),ti(V5,"PartData"),ti(U5,"FootprintSegment"),ti(q5,"BorderCentroidData"),ti(G5,"GroundEffect");const eD=dr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),tD=dr([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:iD}=eD,rD=dr([{name:"a_packed",components:4,type:"Float32"}]),{members:nD}=rD,oD=dr([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:sD}=oD;class nw{constructor(i,a){this.width=i,this.height=a,this.nextRow=0,this.image=new Ou({width:i,height:a}),this.positions={},this.uploaded=!1}getDash(i,a){const h=this.getKey(i,a);return this.positions[h]}trim(){const i=this.width,a=this.height=ts(this.nextRow);this.image.resize({width:i,height:a})}getKey(i,a){return i.join(",")+a}getDashRanges(i,a,h){const g=[];let f=i.length%2==1?-i[i.length-1]*h:0,_=i[0]*h,w=!0;g.push({left:f,right:_,isDash:w,zeroLength:i[0]===0});let C=i[0];for(let z=1;z<i.length;z++){w=!w;const x=i[z];f=C*h,C+=x,_=C*h,g.push({left:f,right:_,isDash:w,zeroLength:x===0})}return g}addRoundDash(i,a,h){const g=a/2;for(let f=-h;f<=h;f++){const _=this.width*(this.nextRow+h+f);let w=0,C=i[w];for(let z=0;z<this.width;z++){z/C.right>1&&(C=i[++w]);const x=Math.abs(z-C.left),T=Math.abs(z-C.right),I=Math.min(x,T);let E;const A=f/h*(g+1);if(C.isDash){const k=g-Math.abs(A);E=Math.sqrt(I*I+k*k)}else E=g-Math.sqrt(I*I+A*A);this.image.data[_+z]=Math.max(0,Math.min(255,E+128))}}}addRegularDash(i,a){for(let C=i.length-1;C>=0;--C){const z=i[C],x=i[C+1];z.zeroLength?i.splice(C,1):x&&x.isDash===z.isDash&&(x.left=z.left,i.splice(C,1))}const h=i[0],g=i[i.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);const f=this.width*this.nextRow;let _=0,w=i[_];for(let C=0;C<this.width;C++){C/w.right>1&&(w=i[++_]);const z=Math.abs(C-w.left),x=Math.abs(C-w.right),T=Math.min(z,x);this.image.data[f+C]=Math.max(0,Math.min(255,(w.isDash?T:-T)+a+128))}}addDash(i,a){const h=this.getKey(i,a);if(this.positions[h])return this.positions[h];const g=a==="round",f=g?7:0,_=2*f+1;if(this.nextRow+_>this.height)return Yi("LineAtlas out of space"),null;i.length===0&&i.push(1);let w=0;for(let x=0;x<i.length;x++)i[x]<0&&(Yi("Negative value is found in line dasharray, replacing values with 0"),i[x]=0),w+=i[x];if(w!==0){const x=this.width/w,T=this.getDashRanges(i,this.width,x);g?this.addRoundDash(T,x,f):this.addRegularDash(T,a==="square"?.5*x:0)}const C=this.nextRow+f;this.nextRow+=_;const z={tl:[C,f],br:[w,0]};return this.positions[h]=z,z}}ti(nw,"LineAtlas");const aD=Tf.VectorTileFeature.types,lD=Math.cos(Math.PI/180*37.5),cD=Math.cos(Math.PI/180*5);class i3{constructor(i){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=i.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Uh,this.layoutVertexArray2=new wl,this.patternVertexArray=new oc,this.indexArray=new rn,this.programConfigurations=new Xa(i.layers,{zoom:i.zoom,lut:i.lut}),this.segments=new yn,this.maxLineLength=0,this.zOffsetVertexArray=new zu,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.tessellationStep=i.tessellationStep?i.tessellationStep:qt/64}updateFootprints(i,a){}populate(i,a,h,g){this.hasPattern=qv("line",this.layers,a);const f=this.layers[0].layout.get("line-sort-key");this.hasZOffset=!this.layers[0].isDraped();const _=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset&&_==="none"&&Yi(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const w=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&w!==void 0;const C=[];for(const{feature:I,id:E,index:A,sourceLayerIndex:k}of i){const B=this.layers[0]._featureFilter.needGeometry,$=St(I,B);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),$,h))continue;const H=f?f.evaluate($,{},h):void 0,G={id:E,properties:I.properties,type:I.type,sourceLayerIndex:k,index:A,geometry:B?$.geometry:Xe(I,h,g),patterns:{},sortKey:H};C.push(G)}f&&C.sort((I,E)=>I.sortKey-E.sortKey);const{lineAtlas:z,featureIndex:x}=a,T=this.addConstantDashes(z);for(const I of C){const{geometry:E,index:A,sourceLayerIndex:k}=I;if(T&&this.addFeatureDashes(I,z),this.hasPattern){const B=Hv("line",this.layers,I,this.zoom,a);this.patternFeatures.push(B)}else this.addFeature(I,E,A,h,z.positions,a.availableImages,a.brightness);x.insert(i[A].feature,E,A,k,this.index)}}addConstantDashes(i){let a=!1;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,f=h.layout.get("line-cap").value;if(g.kind!=="constant"||f.kind!=="constant")a=!0;else{const _=f.value,w=g.value;if(!w)continue;i.addDash(w,_)}}return a}addFeatureDashes(i,a){const h=this.zoom;for(const g of this.layers){const f=g.paint.get("line-dasharray").value,_=g.layout.get("line-cap").value;if(f.kind==="constant"&&_.kind==="constant")continue;let w,C;if(f.kind==="constant"){if(w=f.value,!w)continue}else w=f.evaluate({zoom:h},i);C=_.kind==="constant"?_.value:_.evaluate({zoom:h},i),a.addDash(w,C),i.patterns[g.id]=a.getKey(w,C)}}update(i,a,h,g,f){const _=Object.keys(i).length!==0;_&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(i,a,_?this.stateDependentLayers:this.layers,h,g,f)}addFeatures(i,a,h,g,f,_){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,a,h,g,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,nD)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=i.createVertexBuffer(this.patternVertexArray,sD)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,tD.members,!0)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,iD),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,a,h,g,f,_,w){const C=this.layers[0].layout,z=C.get("line-join").evaluate(i,{}),x=C.get("line-cap").evaluate(i,{}),T=C.get("line-miter-limit"),I=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i),this.lineFeature=i,this.zOffsetValue=C.get("line-z-offset").value;for(const E of a)this.addLine(E,i,g,z,x,T,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,f,_,g,w)}addLine(i,a,h,g,f,_,w){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const C=g==="none";if(this.patternJoinNone=this.hasPattern&&C,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let G=0;G<i.length-1;G++)this.totalDistance+=i[G].dist(i[G+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=aD[a.type]==="Polygon";let x=i.length;for(;x>=2&&i[x-1].equals(i[x-2]);)x--;let T=0;for(;T<x-1&&i[T].equals(i[T+1]);)T++;if(x<(z?3:2))return;g==="bevel"&&(_=1.05);const I=this.segments.prepareSegment(10*x,this.layoutVertexArray,this.indexArray);let E,A,k,B,$,H;this.e1=this.e2=-1,z&&(E=i[x-2],$=i[T].sub(E)._unit()._perp());for(let G=T;G<x;G++){if(k=G===x-1?z?i[T+1]:void 0:i[G+1],k&&i[G].equals(k))continue;$&&(B=$),E&&(A=E),E=i[G],H=this.hasZOffset?this.evaluateElevationValue(A?A.dist(E):0):null,$=k?k.sub(E)._unit()._perp():B,B=B||$;const U=A&&k;let Y=U?g:z||C?"butt":f;const Q=B.x*$.x+B.y*$.y;if(C){const Fe=function(Ne){if(Ne.patternJoinNone){const He=Ne.segmentPoints.length/2,et=Ne.lineSoFar-Ne.segmentStart;for(let rt=0;rt<He;++rt){const Ye=Ne.segmentPoints[2*rt+1],_t=Math.round(Ne.segmentPoints[2*rt])+.5+.25*Ye;Ne.patternVertexArray.emplaceBack(_t,et,Ne.segmentStart),Ne.patternVertexArray.emplaceBack(_t,et,Ne.segmentStart)}Ne.segmentPoints.length=0}Ne.e1=Ne.e2=-1};if(U&&Q<cD){this.updateDistance(A,E),this.addCurrentVertex(E,B,1,1,I,H),Fe(this),this.addCurrentVertex(E,$,-1,-1,I,H);continue}if(A){if(!k){this.updateDistance(A,E),this.addCurrentVertex(E,B,1,1,I,H),Fe(this);continue}Y="miter"}}let se=B.add($);se.x===0&&se.y===0||se._unit();const xe=se.x*$.x+se.y*$.y,pe=xe!==0?1/xe:1/0,ge=2*Math.sqrt(2-2*xe),Pe=xe<lD&&A&&k,me=B.x*$.y-B.y*$.x>0,Ie=this.overscaling<=16?15*qt/(512*this.overscaling):0;if(U&&Y==="round"){if(pe<w)Y="miter";else if(pe<=2){const Fe=r3(E,-10,qt+10);Y=this.hasZOffset&&(Fe||this.hasCrossSlope)?"miter":"fakeround"}}if(Y==="miter"&&pe>_&&(Y="bevel"),Y==="bevel"&&(pe>2&&(Y="flipbevel"),pe<_&&(Y="miter")),A&&!(Y==="miter"&&Pe)&&this.updateDistance(A,E),Y==="miter")if(Pe){const Fe=E.dist(A);if(Fe>2*Ie){const He=E.sub(E.sub(A)._mult(Ie/Fe)._round());this.updateDistance(A,He),this.addCurrentVertex(He,B,0,0,I,H),A=He}this.updateDistance(A,E),se._mult(pe),this.addCurrentVertex(E,se,0,0,I,H);const Ne=E.dist(k);if(Ne>2*Ie){const He=E.add(k.sub(E)._mult(Ie/Ne)._round());this.updateDistance(E,He),this.addCurrentVertex(He,$,0,0,I,H),E=He}}else se._mult(pe),this.addCurrentVertex(E,se,0,0,I,H);else if(Y==="flipbevel"){if(pe>100)se=$.mult(-1);else{const Fe=pe*B.add($).mag()/B.sub($).mag();se._perp()._mult(Fe*(me?-1:1))}this.addCurrentVertex(E,se,0,0,I,H),this.addCurrentVertex(E,se.mult(-1),0,0,I,H)}else if(Y==="bevel"||Y==="fakeround"){H!=null&&A&&this.addCurrentVertex(E,B,-1,-1,I,H);const Fe=E.dist(A)<=2*Ie&&Y!=="bevel",Ne=se.mult(me?1:-1);Ne._mult(pe);const He=$.mult(me?-1:1),et=B.mult(me?-1:1),rt=this.evaluateElevationValue(this.distance);if(H==null&&(this.addHalfVertex(E,Ne.x,Ne.y,!1,!me,0,I,rt),Fe||this.addHalfVertex(E,Ne.x+2*et.x,Ne.y+2*et.y,!1,me,0,I,rt)),Y==="fakeround"){const Ye=Math.round(180*ge/Math.PI/20);this.addHalfVertex(E,et.x,et.y,!1,me,0,I,rt);for(let _t=0;_t<Ye;_t++){let zt=_t/Ye;if(zt!==.5){const ei=zt-.5;zt+=zt*ei*(zt-1)*((1.0904+Q*(Q*(3.55645-1.43519*Q)-3.2452))*ei*ei+(.848013+Q*(.215638*Q-1.06021)))}const ht=He.sub(et)._mult(zt)._add(et)._unit();this.addHalfVertex(E,ht.x,ht.y,!1,me,0,I,rt)}this.addHalfVertex(E,He.x,He.y,!1,me,0,I,rt)}Fe||H!=null||this.addHalfVertex(E,Ne.x+2*He.x,Ne.y+2*He.y,!1,me,0,I,rt),H!=null&&k&&this.addCurrentVertex(E,$,1,1,I,H)}else Y==="butt"?this.addCurrentVertex(E,se,0,0,I,H):Y==="square"?(A||this.addCurrentVertex(E,se,-1,-1,I,H),this.addCurrentVertex(E,se,0,0,I,H),A&&this.addCurrentVertex(E,se,1,1,I,H)):Y==="round"&&(A&&(this.addCurrentVertex(E,B,0,0,I,H),this.addCurrentVertex(E,B,1,1,I,H,!0)),k&&(this.addCurrentVertex(E,$,-1,-1,I,H,!0),this.addCurrentVertex(E,$,0,0,I,H)))}}addVerticesTo(i,a,h,g,f,_,w,C,z,x){const T=(a.w-i.w)/this.tessellationStep|0;let I=0;const E=this.scaledDistance;if(T>1){this.lineSoFar=i.w;const k=(a.x-i.x)/T,B=(a.y-i.y)/T,$=(a.z-i.z)/T,H=(a.w-i.w)/T;for(let G=1;G<T;++G){i.x+=k,i.y+=B,i.z+=$,this.lineSoFar+=H,I+=H;const U=this.evaluateElevationValue(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(i,h,g,x,!1,w,z,U),this.addHalfVertex(i,f,_,x,!0,-C,z,U)}}this.lineSoFar=a.w,this.scaledDistance=E;const A=this.evaluateElevationValue(this.distance);this.addHalfVertex(a,h,g,x,!1,w,z,A),this.addHalfVertex(a,f,_,x,!0,-C,z,A)}evaluateElevationValue(i){return this.hasZOffset?this.zOffsetValue.kind==="constant"?this.zOffsetValue.value:(this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+i)/this.totalFeatureLength):Yi(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0):void 0}addCurrentVertex(i,a,h,g,f,_,w=!1){const C=a.x+a.y*h,z=a.y-a.x*h,x=a.y*g-a.x,T=-a.y-a.x*g;if(_!=null){const E=qt+10,A=_,k=new z5(i.x,i.y,A,this.lineSoFar),B=r3(i,-10,E),$=this.lineSoFar,H=this.distance;if(this.currentVertex)if(B){const G=this.currentVertexIsOutside,U=this.currentVertex,Y=new z5(i.x,i.y,A,this.lineSoFar);if(P5(U,Y,-10,E),!r3(Y,-10,E)){if(G){this.e1=this.e2=-1,this.distance-=U.dist(k),this.lineSoFar=U.w;const Q=this.evaluateElevationValue(U.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(U,C,z,w,!1,h,f,Q),this.addHalfVertex(U,x,T,w,!0,-g,f,Q),this.prevDistance=this.distance}this.distance=this.prevDistance+U.dist(Y),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(U,Y,C,z,x,T,h,g,f,w),this.distance=H,this.scaledDistance=this.distance/this.totalDistance}}else{const G=this.currentVertex;if(this.currentVertexIsOutside){P5(G,k,-10,E),this.e1=this.e2=-1,this.distance-=G.dist(k),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=G.w;const U=this.evaluateElevationValue(G.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(G,C,z,w,!1,h,f,U),this.addHalfVertex(G,x,T,w,!0,-g,f,U),this.prevDistance=this.distance,this.distance=H,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(G,k,C,z,x,T,h,g,f,w)}else B||(this.addHalfVertex(i,C,z,w,!1,h,f,_),this.addHalfVertex(i,x,T,w,!0,-g,f,_));this.currentVertex=k,this.currentVertexIsOutside=B,this.lineSoFar=$}else this.addHalfVertex(i,C,z,w,!1,h,f,_),this.addHalfVertex(i,x,T,w,!0,-g,f,_)}addHalfVertex({x:i,y:a},h,g,f,_,w,C,z){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,w)),this.layoutVertexArray.emplaceBack((i<<1)+(f?1:0),(a<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(w===0?0:w<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const x=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,x),C.primitiveLength++),_?this.e2=x:this.e1=x,z!=null&&this.zOffsetVertexArray.emplaceBack(z)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(i,a){this.prevDistance=this.distance,this.distance+=i.dist(a),this.updateScaledDistance()}}function r3(u,i,a){return u.x<i||u.x>a||u.y<i||u.y>a}let ow,sw;function aw(u,i,a){return i*(qt/(u.tileSize*Math.pow(2,a-u.tileID.overscaledZ)))}ti(i3,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const lw=(u,i,a)=>(1-a)*u+a*i;function cw(u,i){return 1/aw(u,1,i.tileZoom)}function uw(u,i,a,h){return u.translatePosMatrix(h||i.tileID.projMatrix,i,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const hw=u=>{const i=[];dw(u)&&i.push("RENDER_LINE_DASH"),u.paint.get("line-gradient")&&i.push("RENDER_LINE_GRADIENT");const a=u.paint.get("line-trim-offset");a[0]===0&&a[1]===0||i.push("RENDER_LINE_TRIM_OFFSET"),u.paint.get("line-border-width").constantOr(1)!==0&&i.push("RENDER_LINE_BORDER");const h=u.layout.get("line-join").constantOr("miter")==="none",g=!!u.paint.get("line-pattern").constantOr(1);return h&&g&&i.push("LINE_JOIN_NONE"),i};function dw(u){const i=u.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}let n3;const fw=()=>n3||(n3={layout:ow||(ow=new Hr({"line-cap":new pi(it.layout_line["line-cap"]),"line-join":new pi(it.layout_line["line-join"]),"line-miter-limit":new Ft(it.layout_line["line-miter-limit"]),"line-round-limit":new Ft(it.layout_line["line-round-limit"]),"line-sort-key":new pi(it.layout_line["line-sort-key"]),"line-z-offset":new pi(it.layout_line["line-z-offset"]),"line-elevation-reference":new Ft(it.layout_line["line-elevation-reference"]),"line-cross-slope":new Ft(it.layout_line["line-cross-slope"]),visibility:new Ft(it.layout_line.visibility)})),paint:sw||(sw=new Hr({"line-opacity":new pi(it.paint_line["line-opacity"]),"line-color":new pi(it.paint_line["line-color"]),"line-translate":new Ft(it.paint_line["line-translate"]),"line-translate-anchor":new Ft(it.paint_line["line-translate-anchor"]),"line-width":new pi(it.paint_line["line-width"]),"line-gap-width":new pi(it.paint_line["line-gap-width"]),"line-offset":new pi(it.paint_line["line-offset"]),"line-blur":new pi(it.paint_line["line-blur"]),"line-dasharray":new pi(it.paint_line["line-dasharray"]),"line-pattern":new pi(it.paint_line["line-pattern"]),"line-gradient":new Mu(it.paint_line["line-gradient"]),"line-trim-offset":new Ft(it.paint_line["line-trim-offset"]),"line-trim-fade-range":new Ft(it.paint_line["line-trim-fade-range"]),"line-trim-color":new Ft(it.paint_line["line-trim-color"]),"line-emissive-strength":new Ft(it.paint_line["line-emissive-strength"]),"line-border-width":new pi(it.paint_line["line-border-width"]),"line-border-color":new pi(it.paint_line["line-border-color"]),"line-occlusion-opacity":new Ft(it.paint_line["line-occlusion-opacity"])}))},n3);class uD extends pi{possiblyEvaluate(i,a){return a=new fn(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,transition:a.transition}),super.possiblyEvaluate(i,a)}evaluate(i,a,h,g){return a=Gi({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(i,a,h,g)}}let c0;function pw(u,i){return i>0?i+2*u:u}const hD=dr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dD=dr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),fD=dr([{name:"a_projected_pos",components:4,type:"Float32"}],4);dr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const pD=dr([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),mD=dr([{name:"a_texb",components:2,type:"Uint16"}]),gD=dr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),_D=dr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);dr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const mw=dr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),yD=dr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);dr([{name:"triangle",components:3,type:"Uint16"}]),dr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),dr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),dr([{type:"Float32",name:"offsetX"}]),dr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Mo=24;const Il=128;function o3(u,i){const{expression:a}=i;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new fn(u+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=a;let f=0;for(;f<h.length&&h[f]<=u;)f++;f=Math.max(0,f-1);let _=f;for(;_<h.length&&h[_]<u+1;)_++;_=Math.min(h.length-1,_);const w=h[f],C=h[_];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:C,interpolationType:g}:{kind:"camera",minZoom:w,maxZoom:C,minSize:a.evaluate(new fn(w)),maxSize:a.evaluate(new fn(C)),interpolationType:g}}}function n_(u,{uSize:i,uSizeT:a},{lowerSize:h,upperSize:g}){return u.kind==="source"?h/Il:u.kind==="composite"?ai(h/Il,g/Il,a):i}function Cf(u,i,a=1){let h=0,g=0;if(u.kind==="constant")g=u.layoutSize*a;else if(u.kind!=="source"){const{interpolationType:f,minZoom:_,maxZoom:w}=u,C=f?Ot(zs.interpolationFactor(f,i,_,w),0,1):0;u.kind==="camera"?g=ai(u.minSize,u.maxSize,C)*a:h=C*a}return{uSizeT:h,uSize:g}}var vD=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Il,evaluateSizeForFeature:n_,evaluateSizeForZoom:Cf,getSizeData:o3});function xD(u,i,a){return u.sections.forEach(h=>{h.text=function(g,f,_){const w=f.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?g=g.toLocaleUpperCase():w==="lowercase"&&(g=g.toLocaleLowerCase()),Ps.applyArabicShaping&&(g=Ps.applyArabicShaping(g)),g}(h.text,i,a)}),u}const u0={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function bD(u){return u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""}function wD(u){return u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""}var gw,s3,_w,a3={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function SD(){return gw||(gw=1,a3.read=function(u,i,a,h,g){var f,_,w=8*g-h-1,C=(1<<w)-1,z=C>>1,x=-7,T=a?g-1:0,I=a?-1:1,E=u[i+T];for(T+=I,f=E&(1<<-x)-1,E>>=-x,x+=w;x>0;f=256*f+u[i+T],T+=I,x-=8);for(_=f&(1<<-x)-1,f>>=-x,x+=h;x>0;_=256*_+u[i+T],T+=I,x-=8);if(f===0)f=1-z;else{if(f===C)return _?NaN:1/0*(E?-1:1);_+=Math.pow(2,h),f-=z}return(E?-1:1)*_*Math.pow(2,f-h)},a3.write=function(u,i,a,h,g,f){var _,w,C,z=8*f-g-1,x=(1<<z)-1,T=x>>1,I=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=h?0:f-1,A=h?1:-1,k=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(w=isNaN(i)?1:0,_=x):(_=Math.floor(Math.log(i)/Math.LN2),i*(C=Math.pow(2,-_))<1&&(_--,C*=2),(i+=_+T>=1?I/C:I*Math.pow(2,1-T))*C>=2&&(_++,C/=2),_+T>=x?(w=0,_=x):_+T>=1?(w=(i*C-1)*Math.pow(2,g),_+=T):(w=i*Math.pow(2,T-1)*Math.pow(2,g),_=0));g>=8;u[a+E]=255&w,E+=A,w/=256,g-=8);for(_=_<<g|w,z+=g;z>0;u[a+E]=255&_,E+=A,_/=256,z-=8);u[a+E-A]|=128*k}),a3}function yw(){if(_w)return s3;_w=1,s3=i;var u=SD();function i(U){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(U)?U:new Uint8Array(U||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var a=4294967296,h=1/a,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function f(U){return U.type===i.Bytes?U.readVarint()+U.pos:U.pos+1}function _(U,Y,Q){return Q?4294967296*Y+(U>>>0):4294967296*(Y>>>0)+(U>>>0)}function w(U,Y,Q){var se=Y<=16383?1:Y<=2097151?2:Y<=268435455?3:Math.floor(Math.log(Y)/(7*Math.LN2));Q.realloc(se);for(var xe=Q.pos-1;xe>=U;xe--)Q.buf[xe+se]=Q.buf[xe]}function C(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeVarint(U[Q])}function z(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeSVarint(U[Q])}function x(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeFloat(U[Q])}function T(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeDouble(U[Q])}function I(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeBoolean(U[Q])}function E(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeFixed32(U[Q])}function A(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeSFixed32(U[Q])}function k(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeFixed64(U[Q])}function B(U,Y){for(var Q=0;Q<U.length;Q++)Y.writeSFixed64(U[Q])}function $(U,Y){return(U[Y]|U[Y+1]<<8|U[Y+2]<<16)+16777216*U[Y+3]}function H(U,Y,Q){U[Q]=Y,U[Q+1]=Y>>>8,U[Q+2]=Y>>>16,U[Q+3]=Y>>>24}function G(U,Y){return(U[Y]|U[Y+1]<<8|U[Y+2]<<16)+(U[Y+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(U,Y,Q){for(Q=Q||this.length;this.pos<Q;){var se=this.readVarint(),xe=se>>3,pe=this.pos;this.type=7&se,U(xe,Y,this),this.pos===pe&&this.skip(se)}return Y},readMessage:function(U,Y){return this.readFields(U,Y,this.readVarint()+this.pos)},readFixed32:function(){var U=$(this.buf,this.pos);return this.pos+=4,U},readSFixed32:function(){var U=G(this.buf,this.pos);return this.pos+=4,U},readFixed64:function(){var U=$(this.buf,this.pos)+$(this.buf,this.pos+4)*a;return this.pos+=8,U},readSFixed64:function(){var U=$(this.buf,this.pos)+G(this.buf,this.pos+4)*a;return this.pos+=8,U},readFloat:function(){var U=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,U},readDouble:function(){var U=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,U},readVarint:function(U){var Y,Q,se=this.buf;return Y=127&(Q=se[this.pos++]),Q<128?Y:(Y|=(127&(Q=se[this.pos++]))<<7,Q<128?Y:(Y|=(127&(Q=se[this.pos++]))<<14,Q<128?Y:(Y|=(127&(Q=se[this.pos++]))<<21,Q<128?Y:function(xe,pe,ge){var Pe,me,Ie=ge.buf;if(Pe=(112&(me=Ie[ge.pos++]))>>4,me<128||(Pe|=(127&(me=Ie[ge.pos++]))<<3,me<128)||(Pe|=(127&(me=Ie[ge.pos++]))<<10,me<128)||(Pe|=(127&(me=Ie[ge.pos++]))<<17,me<128)||(Pe|=(127&(me=Ie[ge.pos++]))<<24,me<128)||(Pe|=(1&(me=Ie[ge.pos++]))<<31,me<128))return _(xe,Pe,pe);throw new Error("Expected varint not more than 10 bytes")}(Y|=(15&(Q=se[this.pos]))<<28,U,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var U=this.readVarint();return U%2==1?(U+1)/-2:U/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var U=this.readVarint()+this.pos,Y=this.pos;return this.pos=U,U-Y>=12&&g?function(Q,se,xe){return g.decode(Q.subarray(se,xe))}(this.buf,Y,U):function(Q,se,xe){for(var pe="",ge=se;ge<xe;){var Pe,me,Ie,Fe=Q[ge],Ne=null,He=Fe>239?4:Fe>223?3:Fe>191?2:1;if(ge+He>xe)break;He===1?Fe<128&&(Ne=Fe):He===2?(192&(Pe=Q[ge+1]))==128&&(Ne=(31&Fe)<<6|63&Pe)<=127&&(Ne=null):He===3?(me=Q[ge+2],(192&(Pe=Q[ge+1]))==128&&(192&me)==128&&((Ne=(15&Fe)<<12|(63&Pe)<<6|63&me)<=2047||Ne>=55296&&Ne<=57343)&&(Ne=null)):He===4&&(me=Q[ge+2],Ie=Q[ge+3],(192&(Pe=Q[ge+1]))==128&&(192&me)==128&&(192&Ie)==128&&((Ne=(15&Fe)<<18|(63&Pe)<<12|(63&me)<<6|63&Ie)<=65535||Ne>=1114112)&&(Ne=null)),Ne===null?(Ne=65533,He=1):Ne>65535&&(Ne-=65536,pe+=String.fromCharCode(Ne>>>10&1023|55296),Ne=56320|1023&Ne),pe+=String.fromCharCode(Ne),ge+=He}return pe}(this.buf,Y,U)},readBytes:function(){var U=this.readVarint()+this.pos,Y=this.buf.subarray(this.pos,U);return this.pos=U,Y},readPackedVarint:function(U,Y){if(this.type!==i.Bytes)return U.push(this.readVarint(Y));var Q=f(this);for(U=U||[];this.pos<Q;)U.push(this.readVarint(Y));return U},readPackedSVarint:function(U){if(this.type!==i.Bytes)return U.push(this.readSVarint());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readSVarint());return U},readPackedBoolean:function(U){if(this.type!==i.Bytes)return U.push(this.readBoolean());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readBoolean());return U},readPackedFloat:function(U){if(this.type!==i.Bytes)return U.push(this.readFloat());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readFloat());return U},readPackedDouble:function(U){if(this.type!==i.Bytes)return U.push(this.readDouble());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readDouble());return U},readPackedFixed32:function(U){if(this.type!==i.Bytes)return U.push(this.readFixed32());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readFixed32());return U},readPackedSFixed32:function(U){if(this.type!==i.Bytes)return U.push(this.readSFixed32());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readSFixed32());return U},readPackedFixed64:function(U){if(this.type!==i.Bytes)return U.push(this.readFixed64());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readFixed64());return U},readPackedSFixed64:function(U){if(this.type!==i.Bytes)return U.push(this.readSFixed64());var Y=f(this);for(U=U||[];this.pos<Y;)U.push(this.readSFixed64());return U},skip:function(U){var Y=7&U;if(Y===i.Varint)for(;this.buf[this.pos++]>127;);else if(Y===i.Bytes)this.pos=this.readVarint()+this.pos;else if(Y===i.Fixed32)this.pos+=4;else{if(Y!==i.Fixed64)throw new Error("Unimplemented type: "+Y);this.pos+=8}},writeTag:function(U,Y){this.writeVarint(U<<3|Y)},realloc:function(U){for(var Y=this.length||16;Y<this.pos+U;)Y*=2;if(Y!==this.length){var Q=new Uint8Array(Y);Q.set(this.buf),this.buf=Q,this.length=Y}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(U){this.realloc(4),H(this.buf,U,this.pos),this.pos+=4},writeSFixed32:function(U){this.realloc(4),H(this.buf,U,this.pos),this.pos+=4},writeFixed64:function(U){this.realloc(8),H(this.buf,-1&U,this.pos),H(this.buf,Math.floor(U*h),this.pos+4),this.pos+=8},writeSFixed64:function(U){this.realloc(8),H(this.buf,-1&U,this.pos),H(this.buf,Math.floor(U*h),this.pos+4),this.pos+=8},writeVarint:function(U){(U=+U||0)>268435455||U<0?function(Y,Q){var se,xe;if(Y>=0?(se=Y%4294967296|0,xe=Y/4294967296|0):(xe=~(-Y/4294967296),4294967295^(se=~(-Y%4294967296))?se=se+1|0:(se=0,xe=xe+1|0)),Y>=18446744073709552e3||Y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Q.realloc(10),function(pe,ge,Pe){Pe.buf[Pe.pos++]=127&pe|128,pe>>>=7,Pe.buf[Pe.pos++]=127&pe|128,pe>>>=7,Pe.buf[Pe.pos++]=127&pe|128,pe>>>=7,Pe.buf[Pe.pos++]=127&pe|128,Pe.buf[Pe.pos]=127&(pe>>>=7)}(se,0,Q),function(pe,ge){var Pe=(7&pe)<<4;ge.buf[ge.pos++]|=Pe|((pe>>>=3)?128:0),pe&&(ge.buf[ge.pos++]=127&pe|((pe>>>=7)?128:0),pe&&(ge.buf[ge.pos++]=127&pe|((pe>>>=7)?128:0),pe&&(ge.buf[ge.pos++]=127&pe|((pe>>>=7)?128:0),pe&&(ge.buf[ge.pos++]=127&pe|((pe>>>=7)?128:0),pe&&(ge.buf[ge.pos++]=127&pe)))))}(xe,Q)}(U,this):(this.realloc(4),this.buf[this.pos++]=127&U|(U>127?128:0),U<=127||(this.buf[this.pos++]=127&(U>>>=7)|(U>127?128:0),U<=127||(this.buf[this.pos++]=127&(U>>>=7)|(U>127?128:0),U<=127||(this.buf[this.pos++]=U>>>7&127))))},writeSVarint:function(U){this.writeVarint(U<0?2*-U-1:2*U)},writeBoolean:function(U){this.writeVarint(!!U)},writeString:function(U){U=String(U),this.realloc(4*U.length),this.pos++;var Y=this.pos;this.pos=function(se,xe,pe){for(var ge,Pe,me=0;me<xe.length;me++){if((ge=xe.charCodeAt(me))>55295&&ge<57344){if(!Pe){ge>56319||me+1===xe.length?(se[pe++]=239,se[pe++]=191,se[pe++]=189):Pe=ge;continue}if(ge<56320){se[pe++]=239,se[pe++]=191,se[pe++]=189,Pe=ge;continue}ge=Pe-55296<<10|ge-56320|65536,Pe=null}else Pe&&(se[pe++]=239,se[pe++]=191,se[pe++]=189,Pe=null);ge<128?se[pe++]=ge:(ge<2048?se[pe++]=ge>>6|192:(ge<65536?se[pe++]=ge>>12|224:(se[pe++]=ge>>18|240,se[pe++]=ge>>12&63|128),se[pe++]=ge>>6&63|128),se[pe++]=63&ge|128)}return pe}(this.buf,U,this.pos);var Q=this.pos-Y;Q>=128&&w(Y,Q,this),this.pos=Y-1,this.writeVarint(Q),this.pos+=Q},writeFloat:function(U){this.realloc(4),u.write(this.buf,U,this.pos,!0,23,4),this.pos+=4},writeDouble:function(U){this.realloc(8),u.write(this.buf,U,this.pos,!0,52,8),this.pos+=8},writeBytes:function(U){var Y=U.length;this.writeVarint(Y),this.realloc(Y);for(var Q=0;Q<Y;Q++)this.buf[this.pos++]=U[Q]},writeRawMessage:function(U,Y){this.pos++;var Q=this.pos;U(Y,this);var se=this.pos-Q;se>=128&&w(Q,se,this),this.pos=Q-1,this.writeVarint(se),this.pos+=se},writeMessage:function(U,Y,Q){this.writeTag(U,i.Bytes),this.writeRawMessage(Y,Q)},writePackedVarint:function(U,Y){Y.length&&this.writeMessage(U,C,Y)},writePackedSVarint:function(U,Y){Y.length&&this.writeMessage(U,z,Y)},writePackedBoolean:function(U,Y){Y.length&&this.writeMessage(U,I,Y)},writePackedFloat:function(U,Y){Y.length&&this.writeMessage(U,x,Y)},writePackedDouble:function(U,Y){Y.length&&this.writeMessage(U,T,Y)},writePackedFixed32:function(U,Y){Y.length&&this.writeMessage(U,E,Y)},writePackedSFixed32:function(U,Y){Y.length&&this.writeMessage(U,A,Y)},writePackedFixed64:function(U,Y){Y.length&&this.writeMessage(U,k,Y)},writePackedSFixed64:function(U,Y){Y.length&&this.writeMessage(U,B,Y)},writeBytesField:function(U,Y){this.writeTag(U,i.Bytes),this.writeBytes(Y)},writeFixed32Field:function(U,Y){this.writeTag(U,i.Fixed32),this.writeFixed32(Y)},writeSFixed32Field:function(U,Y){this.writeTag(U,i.Fixed32),this.writeSFixed32(Y)},writeFixed64Field:function(U,Y){this.writeTag(U,i.Fixed64),this.writeFixed64(Y)},writeSFixed64Field:function(U,Y){this.writeTag(U,i.Fixed64),this.writeSFixed64(Y)},writeVarintField:function(U,Y){this.writeTag(U,i.Varint),this.writeVarint(Y)},writeSVarintField:function(U,Y){this.writeTag(U,i.Varint),this.writeSVarint(Y)},writeStringField:function(U,Y){this.writeTag(U,i.Bytes),this.writeString(Y)},writeFloatField:function(U,Y){this.writeTag(U,i.Fixed32),this.writeFloat(Y)},writeDoubleField:function(U,Y){this.writeTag(U,i.Fixed64),this.writeDouble(Y)},writeBooleanField:function(U,Y){this.writeVarintField(U,!!Y)}},s3}var o_=M(yw());const l3=3;function MD(u,i,a){i.glyphs=[],u===1&&a.readMessage(ED,i)}function ED(u,i,a){if(u===3){const{id:h,bitmap:g,width:f,height:_,left:w,top:C,advance:z}=a.readMessage(TD,{});i.glyphs.push({id:h,bitmap:new Ou({width:f+2*l3,height:_+2*l3},g),metrics:{width:f,height:_,left:w,top:C,advance:z}})}else u===4?i.ascender=a.readSVarint():u===5&&(i.descender=a.readSVarint())}function TD(u,i,a){u===1?i.id=a.readVarint():u===2?i.bitmap=a.readBytes():u===3?i.width=a.readVarint():u===4?i.height=a.readVarint():u===5?i.left=a.readSVarint():u===6?i.top=a.readSVarint():u===7&&(i.advance=a.readVarint())}const vw=l3,ba={horizontal:1,vertical:2,horizontalOnly:3};class h0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,a){const h=new h0;return h.scale=i||1,h.fontStack=a,h}static forImage(i){const a=new h0;return a.imageName=i,a}}class Af{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,a){const h=new Af;for(let g=0;g<i.sections.length;g++){const f=i.sections[g];f.image?h.addImageSection(f):h.addTextSection(f,a)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCodePoint(i){return this.text.codePointAt(i)}verticalizePunctuation(i){this.text=function(a,h){let g="";for(let f=0;f<a.length;f++){const _=a.charCodeAt(f+1)||null,w=a.charCodeAt(f-1)||null;g+=!h&&(_&&Cp(_)&&!u0[a[f+1]]||w&&Cp(w)&&!u0[a[f-1]])||!u0[a[f]]?a[f]:u0[a[f]]}return g}(this.text,i)}trim(){let i=0;for(let h=0;h<this.text.length&&s_[this.text.charCodeAt(h)];h++)i++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&s_[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(i,a),this.sectionIndex=this.sectionIndex.slice(i,a)}substring(i,a){const h=new Af;return h.text=this.text.substring(i,a),h.sectionIndex=this.sectionIndex.slice(i,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,a)=>Math.max(i,this.sections[a].scale),0)}addTextSection(i,a){this.text+=i.text,this.sections.push(h0.forText(i.scale,i.fontStack||a));const h=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(h)}addImageSection(i){const a=i.image?i.image.namePrimary:"";if(a.length===0)return void Yi("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCodePoint(h),this.sections.push(h0.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Yi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function c3(u,i,a,h,g,f,_,w,C,z,x,T,I,E,A){const k=Af.fromFeature(u,g);T===ba.vertical&&k.verticalizePunctuation(I);let B=[];const $=function(Q,se,xe,pe,ge,Pe){if(!Q)return[];const me=[],Ie=function(et,rt,Ye,_t,zt,ht){let ei=0;for(let Vt=0;Vt<et.length();Vt++){const Bt=et.getSection(Vt);ei+=xw(et.getCodePoint(Vt),Bt,_t,zt,rt,ht)}return ei/Math.max(1,Math.ceil(ei/Ye))}(Q,se,xe,pe,ge,Pe),Fe=Q.text.indexOf("")>=0;let Ne=0;for(let et=0;et<Q.length();et++){const rt=Q.getSection(et),Ye=Q.getCodePoint(et);if(s_[Ye]||(Ne+=xw(Ye,rt,pe,ge,se,Pe)),et<Q.length()-1){const _t=!((He=Ye)<11904||!(di["Bopomofo Extended"](He)||di.Bopomofo(He)||di["CJK Compatibility Forms"](He)||di["CJK Compatibility Ideographs"](He)||di["CJK Compatibility"](He)||di["CJK Radicals Supplement"](He)||di["CJK Strokes"](He)||di["CJK Symbols and Punctuation"](He)||di["CJK Unified Ideographs Extension A"](He)||di["CJK Unified Ideographs"](He)||di["Enclosed CJK Letters and Months"](He)||di["Halfwidth and Fullwidth Forms"](He)||di.Hiragana(He)||di["Ideographic Description Characters"](He)||di["Kangxi Radicals"](He)||di["Katakana Phonetic Extensions"](He)||di.Katakana(He)||di["Vertical Forms"](He)||di["Yi Radicals"](He)||di["Yi Syllables"](He)));(CD[Ye]||_t||rt.imageName)&&me.push(ww(et+1,Ne,Ie,me,AD(Ye,Q.getCodePoint(et+1),_t&&Fe),!1))}}var He;return Sw(ww(Q.length(),Ne,Ie,me,0,!0))}(k,z,f,i,h,E),{processBidirectionalText:H,processStyledBidirectionalText:G}=Ps;if(H&&k.sections.length===1){const Q=H(k.toString(),$);for(const se of Q){const xe=new Af;xe.text=se,xe.sections=k.sections;for(let pe=0;pe<se.length;pe++)xe.sectionIndex.push(0);B.push(xe)}}else if(G){const Q=G(k.text,k.sectionIndex,$);for(const se of Q){const xe=new Af;xe.text=se[0],xe.sectionIndex=se[1],xe.sections=k.sections,B.push(xe)}}else B=function(Q,se){const xe=[],pe=Q.text;let ge=0;for(const Pe of se)xe.push(Q.substring(ge,Pe)),ge=Pe;return ge<pe.length&&xe.push(Q.substring(ge,pe.length)),xe}(k,$);const U=[],Y={positionedLines:U,text:k.toString(),top:x[1],bottom:x[1],left:x[0],right:x[0],writingMode:T,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Q,se,xe,pe,ge,Pe,me,Ie,Fe,Ne,He,et){let rt=0,Ye=0,_t=0;const zt=Ie==="right"?1:Ie==="left"?0:.5;let ht=!1;for(const Kt of ge){const ri=Kt.getSections();for(const Pi of ri){if(Pi.imageName)continue;const Ni=se[Pi.fontStack];if(Ni&&(ht=Ni.ascender!==void 0&&Ni.descender!==void 0,!ht))break}if(!ht)break}let ei=0;for(const Kt of ge){Kt.trim();const ri=Kt.getMaxScale(),Pi=(ri-1)*Mo,Ni={positionedGlyphs:[],lineOffset:0};Q.positionedLines[ei]=Ni;const $i=Ni.positionedGlyphs;let Li=0;if(!Kt.length()){Ye+=Pe,++ei;continue}let Zi=0,Hi=0;for(let Pr=0;Pr<Kt.length();Pr++){const Ci=Kt.getSection(Pr),br=Kt.getSectionIndex(Pr),Cr=Kt.getCodePoint(Pr);let Kr=Ci.scale,Sn=null,Ln=null,Mn=null,gn=Mo,Tn=0;const jn=!(Fe===ba.horizontal||!He&&!bu(Cr)||He&&(s_[Cr]||(Vt=Cr,di.Arabic(Vt)||di["Arabic Supplement"](Vt)||di["Arabic Extended-A"](Vt)||di["Arabic Presentation Forms-A"](Vt)||di["Arabic Presentation Forms-B"](Vt))));if(Ci.imageName){const Eo=pe[Ci.imageName];if(!Eo)continue;Mn=Ci.imageName,Q.iconsInText=Q.iconsInText||!0,Ln=Eo.paddedRect;const Wr=Eo.displaySize;Kr=Kr*Mo/et,Sn={width:Wr[0],height:Wr[1],left:0,top:-vw,advance:jn?Wr[1]:Wr[0],localGlyph:!1},Tn=ht?-Sn.height*Kr:ri*Mo-17-Wr[1]*Kr,gn=Sn.advance;const Rs=(jn?Wr[0]:Wr[1])*Kr-Mo*ri;Rs>0&&Rs>Li&&(Li=Rs)}else{const Eo=xe[Ci.fontStack];if(!Eo)continue;Eo[Cr]&&(Ln=Eo[Cr]);const Wr=se[Ci.fontStack];if(!Wr)continue;const Rs=Wr.glyphs[Cr];if(!Rs)continue;if(Sn=Rs.metrics,gn=Cr!==8203?Mo:0,ht){const Rl=Wr.ascender!==void 0?Math.abs(Wr.ascender):0,Ka=Wr.descender!==void 0?Math.abs(Wr.descender):0,Qa=(Rl+Ka)*Kr;Zi<Qa&&(Zi=Qa,Hi=(Rl-Ka)/2*Kr),Tn=-Rl*Kr}else Tn=(ri-Kr)*Mo-17}jn?(Q.verticalizable=!0,$i.push({glyph:Cr,imageName:Mn,x:rt,y:Ye+Tn,vertical:jn,scale:Kr,localGlyph:Sn.localGlyph,fontStack:Ci.fontStack,sectionIndex:br,metrics:Sn,rect:Ln}),rt+=gn*Kr+Ne):($i.push({glyph:Cr,imageName:Mn,x:rt,y:Ye+Tn,vertical:jn,scale:Kr,localGlyph:Sn.localGlyph,fontStack:Ci.fontStack,sectionIndex:br,metrics:Sn,rect:Ln}),rt+=Sn.advance*Kr+Ne)}$i.length!==0&&(_t=Math.max(rt-Ne,_t),ht?Mw($i,zt,Li,Hi,Pe*ri/2):Mw($i,zt,Li,0,Pe/2)),rt=0;const Or=Pe*ri+Li;Ni.lineOffset=Math.max(Li,Pi),Ye+=Or,++ei}var Vt;const Bt=Ye,{horizontalAlign:Ct,verticalAlign:yi}=u3(me);(function(Kt,ri,Pi,Ni,$i,Li){const Zi=(ri-Pi)*$i,Hi=-Li*Ni;for(const Or of Kt)for(const Pr of Or.positionedGlyphs)Pr.x+=Zi,Pr.y+=Hi})(Q.positionedLines,zt,Ct,yi,_t,Bt),Q.top+=-yi*Bt,Q.bottom=Q.top+Bt,Q.left+=-Ct*_t,Q.right=Q.left+_t,Q.hasBaseline=ht}(Y,i,a,h,B,_,w,C,T,z,I,A),!function(Q){for(const se of Q)if(se.positionedGlyphs.length!==0)return!1;return!0}(U)&&Y}const s_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},CD={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function xw(u,i,a,h,g,f){if(i.imageName){const _=h[i.imageName];return _?_.displaySize[0]*i.scale*Mo/f+g:0}{const _=a[i.fontStack],w=_&&_.glyphs[u];return w?w.metrics.advance*i.scale+g:0}}function bw(u,i,a,h){const g=Math.pow(u-i,2);return h?u<i?g/2:2*g:g+Math.abs(a)*a}function AD(u,i,a){let h=0;return u===10&&(h-=1e4),a&&(h+=150),u!==40&&u!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function ww(u,i,a,h,g,f){let _=null,w=bw(i,a,g,f);for(const C of h){const z=bw(i-C.x,a,g,f)+C.badness;z<=w&&(_=C,w=z)}return{index:u,x:i,priorBreak:_,badness:w}}function Sw(u){return u?Sw(u.priorBreak).concat(u.index):[]}function u3(u){let i=.5,a=.5;switch(u){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:i,verticalAlign:a}}function Mw(u,i,a,h,g){if(!(i||a||h||g))return;const f=u.length-1,_=u[f],w=(_.x+_.metrics.advance*_.scale)*i;for(let C=0;C<=f;C++)u[C].x-=w,u[C].y+=a+h+g}function ID(u,i,a,h){const{horizontalAlign:g,verticalAlign:f}=u3(h),_=a[0]-u.displaySize[0]*g,w=a[1]-u.displaySize[1]*f;return{imagePrimary:u,imageSecondary:i,top:w,bottom:w+u.displaySize[1],left:_,right:_+u.displaySize[0]}}function Ew(u,i,a,h,g,f){const _=u.imagePrimary;let w;if(_.content){const B=_.content,$=_.pixelRatio||1;w=[B[0]/$,B[1]/$,_.displaySize[0]-B[2]/$,_.displaySize[1]-B[3]/$]}const C=i.left*f,z=i.right*f;let x,T,I,E;a==="width"||a==="both"?(E=g[0]+C-h[3],T=g[0]+z+h[1]):(E=g[0]+(C+z-_.displaySize[0])/2,T=E+_.displaySize[0]);const A=i.top*f,k=i.bottom*f;return a==="height"||a==="both"?(x=g[1]+A-h[0],I=g[1]+k+h[2]):(x=g[1]+(A+k-_.displaySize[1])/2,I=x+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:x,right:T,bottom:I,left:E,collisionPadding:w}}class Zc extends Pt{constructor(i,a,h,g,f){super(i,a),this.angle=g,this.z=h,f!==void 0&&(this.segment=f)}clone(){return new Zc(this.x,this.y,this.z,this.angle,this.segment)}}function Tw(u,i,a,h,g){if(i.segment===void 0)return!0;let f=i,_=i.segment+1,w=0;for(;w>-a/2;){if(_--,_<0)return!1;w-=u[_].dist(f),f=u[_]}w+=u[_].dist(u[_+1]),_++;const C=[];let z=0;for(;w<a/2;){const x=u[_],T=u[_+1];if(!T)return!1;let I=u[_-1].angleTo(x)-x.angleTo(T);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:w,angleDelta:I}),z+=I;w-C[0].distance>h;)z-=C.shift().angleDelta;if(z>g)return!1;_++,w+=x.dist(T)}return!0}function Cw(u){let i=0;for(let a=0;a<u.length-1;a++)i+=u[a].dist(u[a+1]);return i}function Aw(u,i,a){return u?.6*i*a:0}function Iw(u,i){return Math.max(u?u.right-u.left:0,i?i.right-i.left:0)}function zD(u,i,a,h,g,f){const _=Aw(a,g,f),w=Iw(a,h)*f;let C=0;const z=Cw(u)/2;for(let x=0;x<u.length-1;x++){const T=u[x],I=u[x+1],E=T.dist(I);if(C+E>z){const A=(z-C)/E,k=ai(T.x,I.x,A),B=ai(T.y,I.y,A),$=new Zc(k,B,0,I.angleTo(T),x);return!_||Tw(u,$,w,_,i)?$:void 0}C+=E}}function DD(u,i,a,h,g,f,_,w,C){const z=Aw(h,f,_),x=Iw(h,g),T=x*_,I=u[0].x===0||u[0].x===C||u[0].y===0||u[0].y===C;return i-T<i/4&&(i=T+i/4),zw(u,I?i/2*w%i:(x/2+2*f)*_*w%i,i,z,a,T,I,!1,C)}function zw(u,i,a,h,g,f,_,w,C){const z=f/2,x=Cw(u);let T=0,I=i-a,E=[];for(let A=0;A<u.length-1;A++){const k=u[A],B=u[A+1],$=k.dist(B),H=B.angleTo(k);for(;I+a<T+$;){I+=a;const G=(I-T)/$,U=ai(k.x,B.x,G),Y=ai(k.y,B.y,G);if(U>=0&&U<C&&Y>=0&&Y<C&&I-z>=0&&I+z<=x){const Q=new Zc(U,Y,0,H,A);h&&!Tw(u,Q,f,h,g)||E.push(Q)}}T+=$}return w||E.length||_||(E=zw(u,T/2,a,h,g,f,_,!0,C)),E}function Dw(u,i,a,h,g){const f=[];for(let _=0;_<u.length;_++){const w=u[_];let C;for(let z=0;z<w.length-1;z++){let x=w[z],T=w[z+1];x.x<i&&T.x<i||(x.x<i?x=new Pt(i,x.y+(i-x.x)/(T.x-x.x)*(T.y-x.y))._round():T.x<i&&(T=new Pt(i,x.y+(i-x.x)/(T.x-x.x)*(T.y-x.y))._round()),x.y<a&&T.y<a||(x.y<a?x=new Pt(x.x+(a-x.y)/(T.y-x.y)*(T.x-x.x),a)._round():T.y<a&&(T=new Pt(x.x+(a-x.y)/(T.y-x.y)*(T.x-x.x),a)._round()),x.x>=h&&T.x>=h||(x.x>=h?x=new Pt(h,x.y+(h-x.x)/(T.x-x.x)*(T.y-x.y))._round():T.x>=h&&(T=new Pt(h,x.y+(h-x.x)/(T.x-x.x)*(T.y-x.y))._round()),x.y>=g&&T.y>=g||(x.y>=g?x=new Pt(x.x+(g-x.y)/(T.y-x.y)*(T.x-x.x),g)._round():T.y>=g&&(T=new Pt(x.x+(g-x.y)/(T.y-x.y)*(T.x-x.x),g)._round()),C&&x.equals(C[C.length-1])||(C=[x],f.push(C)),C.push(T)))))}}return f}function Pw(u){let i=0,a=0;for(const _ of u)i+=_.w*_.h,a=Math.max(a,_.w);u.sort((_,w)=>w.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}];let g=0,f=0;for(const _ of u)for(let w=h.length-1;w>=0;w--){const C=h[w];if(!(_.w>C.w||_.h>C.h)){if(_.x=C.x,_.y=C.y,f=Math.max(f,_.y+_.h),g=Math.max(g,_.x+_.w),_.w===C.w&&_.h===C.h){const z=h.pop();w<h.length&&(h[w]=z)}else _.h===C.h?(C.x+=_.w,C.w-=_.w):_.w===C.w?(C.y+=_.h,C.h-=_.h):(h.push({x:C.x+_.w,y:C.y,w:C.w-_.w,h:_.h}),C.y+=_.h,C.h-=_.h);break}}return{w:g,h:f,fill:i/(g*f)||0}}ti(Zc,"Anchor");const d0=1;class h3{constructor(i,{pixelRatio:a,version:h,stretchX:g,stretchY:f,content:_},w){this.paddedRect=i,this.pixelRatio=a,this.stretchX=g,this.stretchY=f,this.content=_,this.version=h,this.padding=w}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class kw{constructor(i,a,h){const g={},f={};this.haveRenderCallbacks=[];const _=[];this.addImages(i,g,d0,_),this.addImages(a,f,2,_);const{w,h:C}=Pw(_),z=new Jo({width:w||1,height:C||1});for(const x in i){const T=i[x],I=g[x].paddedRect;Jo.copy(T.data,z,{x:0,y:0},{x:I.x+d0,y:I.y+d0},T.data,h,T.sdf)}for(const x in a){const T=a[x],I=f[x].paddedRect;let E=f[x].padding;const A=I.x+E,k=I.y+E,B=T.data.width,$=T.data.height;E=E>1?E-1:E,Jo.copy(T.data,z,{x:0,y:0},{x:A,y:k},T.data,h),Jo.copy(T.data,z,{x:0,y:$-E},{x:A,y:k-E},{width:B,height:E},h),Jo.copy(T.data,z,{x:0,y:0},{x:A,y:k+$},{width:B,height:E},h),Jo.copy(T.data,z,{x:B-E,y:0},{x:A-E,y:k},{width:E,height:$},h),Jo.copy(T.data,z,{x:0,y:0},{x:A+B,y:k},{width:E,height:$},h),Jo.copy(T.data,z,{x:B-E,y:$-E},{x:A-E,y:k-E},{width:E,height:E},h),Jo.copy(T.data,z,{x:0,y:$-E},{x:A+B,y:k-E},{width:E,height:E},h),Jo.copy(T.data,z,{x:0,y:0},{x:A+B,y:k+$},{width:E,height:E},h),Jo.copy(T.data,z,{x:B-E,y:0},{x:A-E,y:k+$},{width:E,height:E},h)}this.image=z,this.iconPositions=g,this.patternPositions=f}addImages(i,a,h,g){for(const f in i){const _=i[f],w={x:0,y:0,w:_.data.width+2*h,h:_.data.height+2*h};g.push(w),a[f]=new h3(w,_,h),_.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(i,a,h){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>i.hasImage(g,h)),i.dispatchRenderCallbacks(this.haveRenderCallbacks,h);for(const g in i.getUpdatedImages(h))this.patchUpdatedImage(this.iconPositions[g],i.getImage(g,h),a),this.patchUpdatedImage(this.patternPositions[g],i.getImage(g,h),a)}patchUpdatedImage(i,a,h){if(!i||!a||i.version===a.version)return;i.version=a.version;const[g,f]=i.tl;h.update(a.data,{position:{x:g,y:f}})}}ti(h3,"ImagePosition"),ti(kw,"ImageAtlas");const f0=1e20;function Rw(u,i,a,h,g,f,_,w,C){for(let z=i;z<i+h;z++)Lw(u,a*f+z,f,g,_,w,C);for(let z=a;z<a+g;z++)Lw(u,z*f+i,1,h,_,w,C)}function Lw(u,i,a,h,g,f,_){f[0]=0,_[0]=-f0,_[1]=f0,g[0]=u[i];for(let w=1,C=0,z=0;w<h;w++){g[w]=u[i+w*a];const x=w*w;do{const T=f[C];z=(g[w]-g[T]+x-T*T)/(w-T)/2}while(z<=_[C]&&--C>-1);C++,f[C]=w,_[C]=z,_[C+1]=f0}for(let w=0,C=0;w<h;w++){for(;_[C+1]<w;)C++;const z=f[C],x=w-z;u[i+w*a]=g[z]+x*x}}const zl=2,d3={none:0,ideographs:1,all:2};class If{constructor(i,a,h){this.requestManager=i,this.localGlyphMode=a,this.localFontFamily=h,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i,a){this.urls[a]=i}getGlyphs(i,a,h){const g=[],f=this.urls[a]||Se.GLYPHS_URL;for(const _ in i)for(const w of i[_])g.push({stack:_,id:w});Mr(g,({stack:_,id:w},C)=>{let z=this.entries[_];z||(z=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let x=z.glyphs[w];if(x!==void 0)return void C(null,{stack:_,id:w,glyph:x});if(x=this._tinySDF(z,_,w),x)return z.glyphs[w]=x,void C(null,{stack:_,id:w,glyph:x});const T=Math.floor(w/256);if(256*T>65535)return Yi("glyphs > 65535 not supported"),void C(null,{stack:_,id:w,glyph:x});if(z.ranges[T])return void C(null,{stack:_,id:w,glyph:x});let I=z.requests[T];I||(I=z.requests[T]=[],If.loadGlyphRange(_,T,f,this.requestManager,(E,A)=>{if(A){z.ascender=A.ascender,z.descender=A.descender;for(const k in A.glyphs)this._doesCharSupportLocalGlyph(+k)||(z.glyphs[+k]=A.glyphs[+k]);z.ranges[T]=!0}for(const k of I)k(E,A);delete z.requests[T]})),I.push((E,A)=>{E?C(E):A&&C(null,{stack:_,id:w,glyph:A.glyphs[w]||null})})},(_,w)=>{if(_)h(_);else if(w){const C={};for(const{stack:z,id:x,glyph:T}of w)C[z]===void 0&&(C[z]={}),C[z].glyphs===void 0&&(C[z].glyphs={}),C[z].glyphs[x]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},C[z].ascender=this.entries[z].ascender,C[z].descender=this.entries[z].descender;h(null,C)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==d3.none&&(this.localGlyphMode===d3.all?!!this.localFontFamily:!!this.localFontFamily&&(di["CJK Unified Ideographs"](i)||di["Hangul Syllables"](i)||di.Hiragana(i)||di.Katakana(i)||di["CJK Symbols and Punctuation"](i)||di["CJK Unified Ideographs Extension A"](i)||di["CJK Unified Ideographs Extension B"](i)||di.Osage(i)))}_tinySDF(i,a,h){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(h))return;let f=i.tinySDF;if(!f){let k="400";/bold/i.test(a)?k="900":/medium/i.test(a)?k="500":/light/i.test(a)&&(k="200"),f=i.tinySDF=new If.TinySDF({fontFamily:g,fontWeight:k,fontSize:24*zl,buffer:3*zl,radius:8*zl}),f.fontWeight=k}if(this.localGlyphs[f.fontWeight][h])return this.localGlyphs[f.fontWeight][h];const _=String.fromCodePoint(h),{data:w,width:C,height:z,glyphWidth:x,glyphHeight:T,glyphLeft:I,glyphTop:E,glyphAdvance:A}=f.draw(_);return this.localGlyphs[f.fontWeight][h]={id:h,bitmap:new Ou({width:C,height:z},w),metrics:{width:x/zl,height:T/zl,left:I/zl,top:E/zl-27,advance:A/zl,localGlyph:!0}}}}If.loadGlyphRange=function(u,i,a,h,g){const f=256*i,_=f+255,w=h.transformRequest(h.normalizeGlyphsURL(a).replace("{fontstack}",u).replace("{range}",`${f}-${_}`),nl.Glyphs);Xl(w,(C,z)=>{if(C)g(C);else if(z){const x={},T=function(I){return new o_(I).readFields(MD,{})}(z);for(const I of T.glyphs)x[I.id]=I;g(null,{glyphs:x,ascender:T.ascender,descender:T.descender})}})},If.TinySDF=class{constructor({fontSize:u=24,buffer:i=3,radius:a=8,cutoff:h=.25,fontFamily:g="sans-serif",fontWeight:f="normal",fontStyle:_="normal"}={}){this.buffer=i,this.cutoff=h,this.radius=a;const w=this.size=u+4*i,C=this._createCanvas(w),z=this.ctx=C.getContext("2d",{willReadFrequently:!0});z.font=`${_} ${f} ${u}px ${g}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(u){const i=document.createElement("canvas");return i.width=i.height=u,i}draw(u){const{width:i,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:g,actualBoundingBoxRight:f}=this.ctx.measureText(u),_=Math.ceil(a),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-g))),C=Math.min(this.size-this.buffer,_+Math.ceil(h)),z=w+2*this.buffer,x=C+2*this.buffer,T=Math.max(z*x,0),I=new Uint8ClampedArray(T),E={data:I,width:z,height:x,glyphWidth:w,glyphHeight:C,glyphTop:_,glyphLeft:0,glyphAdvance:i};if(w===0||C===0)return E;const{ctx:A,buffer:k,gridInner:B,gridOuter:$}=this;A.clearRect(k,k,w,C),A.fillText(u,k,k+_);const H=A.getImageData(k,k,w,C);$.fill(f0,0,T),B.fill(0,0,T);for(let G=0;G<C;G++)for(let U=0;U<w;U++){const Y=H.data[4*(G*w+U)+3]/255;if(Y===0)continue;const Q=(G+k)*z+U+k;if(Y===1)$[Q]=0,B[Q]=f0;else{const se=.5-Y;$[Q]=se>0?se*se:0,B[Q]=se<0?se*se:0}}Rw($,0,0,z,x,z,this.f,this.v,this.z),Rw(B,k,k,w,C,z,this.f,this.v,this.z);for(let G=0;G<T;G++){const U=Math.sqrt($[G])-Math.sqrt(B[G]);I[G]=Math.round(255-255*(U/this.radius+this.cutoff))}return E}};const Fu=d0;function Ow(u,i,a,h,g=1){const f=[],_=u.imagePrimary,w=_.pixelRatio,C=_.paddedRect.w-2*Fu,z=_.paddedRect.h-2*Fu,x=(u.right-u.left)*g,T=(u.bottom-u.top)*g,I=_.stretchX||[[0,C]],E=_.stretchY||[[0,z]],A=(me,Ie)=>me+Ie[1]-Ie[0],k=I.reduce(A,0),B=E.reduce(A,0),$=C-k,H=z-B;let G=0,U=k,Y=0,Q=B,se=0,xe=$,pe=0,ge=H;if(_.content&&h){const me=_.content;G=a_(I,0,me[0]),Y=a_(E,0,me[1]),U=a_(I,me[0],me[2]),Q=a_(E,me[1],me[3]),se=me[0]-G,pe=me[1]-Y,xe=me[2]-me[0]-U,ge=me[3]-me[1]-Q}const Pe=(me,Ie,Fe,Ne)=>{const He=l_(me.stretch-G,U,x,u.left*g),et=c_(me.fixed-se,xe,me.stretch,k),rt=l_(Ie.stretch-Y,Q,T,u.top*g),Ye=c_(Ie.fixed-pe,ge,Ie.stretch,B),_t=l_(Fe.stretch-G,U,x,u.left*g),zt=c_(Fe.fixed-se,xe,Fe.stretch,k),ht=l_(Ne.stretch-Y,Q,T,u.top*g),ei=c_(Ne.fixed-pe,ge,Ne.stretch,B),Vt=new Pt(He,rt),Bt=new Pt(_t,rt),Ct=new Pt(_t,ht),yi=new Pt(He,ht),Kt=new Pt(et/w,Ye/w),ri=new Pt(zt/w,ei/w),Pi=i*Math.PI/180;if(Pi){const Or=Math.sin(Pi),Pr=Math.cos(Pi),Ci=[Pr,-Or,Or,Pr];Vt._matMult(Ci),Bt._matMult(Ci),yi._matMult(Ci),Ct._matMult(Ci)}const Ni=me.stretch+me.fixed,$i=Fe.stretch+Fe.fixed,Li=Ie.stretch+Ie.fixed,Zi=Ne.stretch+Ne.fixed,Hi=u.imageSecondary;return{tl:Vt,tr:Bt,bl:yi,br:Ct,texPrimary:{x:_.paddedRect.x+Fu+Ni,y:_.paddedRect.y+Fu+Li,w:$i-Ni,h:Zi-Li},texSecondary:Hi?{x:Hi.paddedRect.x+Fu+Ni,y:Hi.paddedRect.y+Fu+Li,w:$i-Ni,h:Zi-Li}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kt,pixelOffsetBR:ri,minFontScaleX:xe/w/x,minFontScaleY:ge/w/T,isSDF:a}};if(h&&(_.stretchX||_.stretchY)){const me=Bw(I,$,k),Ie=Bw(E,H,B);for(let Fe=0;Fe<me.length-1;Fe++){const Ne=me[Fe],He=me[Fe+1];for(let et=0;et<Ie.length-1;et++)f.push(Pe(Ne,Ie[et],He,Ie[et+1]))}}else f.push(Pe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:z+1}));return f}function a_(u,i,a){let h=0;for(const g of u)h+=Math.max(i,Math.min(a,g[1]))-Math.max(i,Math.min(a,g[0]));return h}function Bw(u,i,a){const h=[{fixed:-Fu,stretch:0}];for(const[g,f]of u){const _=h[h.length-1];h.push({fixed:g-_.stretch,stretch:_.stretch}),h.push({fixed:g-_.stretch,stretch:_.stretch+(f-g)})}return h.push({fixed:i+Fu,stretch:a}),h}function l_(u,i,a,h){return u/i*a+h}function c_(u,i,a,h){return u-i*a/h}function PD(u,i,a,h){const g=i+u.positionedLines[h].lineOffset;return h===0?a+g/2:a+(g+(i+u.positionedLines[h-1].lineOffset))/2}function kD(u,i=1,a=!1){let h=1/0,g=1/0,f=-1/0,_=-1/0;const w=u[0];for(let E=0;E<w.length;E++){const A=w[E];(!E||A.x<h)&&(h=A.x),(!E||A.y<g)&&(g=A.y),(!E||A.x>f)&&(f=A.x),(!E||A.y>_)&&(_=A.y)}const C=Math.min(f-h,_-g);let z=C/2;const x=new Hs([],RD);if(C===0)return new Pt(h,g);for(let E=h;E<f;E+=C)for(let A=g;A<_;A+=C)x.push(new zf(E+z,A+z,z,u));let T=function(E){let A=0,k=0,B=0;const $=E[0];for(let H=0,G=$.length,U=G-1;H<G;U=H++){const Y=$[H],Q=$[U],se=Y.x*Q.y-Q.x*Y.y;k+=(Y.x+Q.x)*se,B+=(Y.y+Q.y)*se,A+=3*se}return new zf(k/A,B/A,0,E)}(u),I=x.length;for(;x.length;){const E=x.pop();(E.d>T.d||!T.d)&&(T=E),E.max-T.d<=i||(z=E.h/2,x.push(new zf(E.p.x-z,E.p.y-z,z,u)),x.push(new zf(E.p.x+z,E.p.y-z,z,u)),x.push(new zf(E.p.x-z,E.p.y+z,z,u)),x.push(new zf(E.p.x+z,E.p.y+z,z,u)),I+=4)}return T.p}function RD(u,i){return i.max-u.max}class zf{constructor(i,a,h,g){this.p=new Pt(i,a),this.h=h,this.d=function(f,_){let w=!1,C=1/0;for(let z=0;z<_.length;z++){const x=_[z];for(let T=0,I=x.length,E=I-1;T<I;E=T++){const A=x[T],k=x[E];A.y>f.y!=k.y>f.y&&f.x<(k.x-A.x)*(f.y-A.y)/(k.y-A.y)+A.x&&(w=!w),C=Math.min(C,Mi(f,A,k))}}return(w?1:-1)*Math.sqrt(C)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const f3=Number.POSITIVE_INFINITY,LD=Math.sqrt(2);function Fw(u,[i,a]){let h=0,g=0;if(a===f3){i<0&&(i=0);const f=i/LD;switch(u){case"top-right":case"top-left":g=f-7;break;case"bottom-right":case"bottom-left":g=7-f;break;case"bottom":g=7-i;break;case"top":g=i-7}switch(u){case"top-right":case"bottom-right":h=-f;break;case"top-left":case"bottom-left":h=f;break;case"left":h=i;break;case"right":h=-i}}else{switch(i=Math.abs(i),a=Math.abs(a),u){case"top-right":case"top-left":case"top":g=a-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-a}switch(u){case"top-right":case"bottom-right":case"right":h=-i;break;case"top-left":case"bottom-left":case"left":h=i}}return[h,g]}function p3(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function OD(u,i,a,h,g,f,_,w,C,z,x,T,I,E,A){let k=f.textMaxSize.evaluate(i,{},T);k===void 0?k=_*f.textScaleFactor:k*=f.textScaleFactor;const B=u.layers[0].layout,$=B.get("icon-offset").evaluate(i,{},T),H=$w(a.horizontal)||a.vertical,G=I.name==="globe",U=Mo,Y=_*f.textScaleFactor/U,Q=u.tilePixelRatio*k/U,se=(Ne=u.overscaling,u.zoom>18&&Ne>2&&(Ne>>=1),Math.max(qt/(512*Ne),1)*B.get("symbol-spacing")),xe=B.get("text-padding")*u.tilePixelRatio,pe=B.get("icon-padding")*u.tilePixelRatio,ge=Oi(B.get("text-max-angle")),Pe=B.get("text-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",me=B.get("icon-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",Ie=B.get("symbol-placement"),Fe=se/2;var Ne;const He=B.get("icon-text-fit").evaluate(i,{},T),et=B.get("icon-text-fit-padding").evaluate(i,{},T),rt=He!=="none";let Ye;u.hasAnyIconTextFit===!1&&rt&&(u.hasAnyIconTextFit=!0),h&&rt&&(u.allowVerticalPlacement&&a.vertical&&(Ye=Ew(h,a.vertical,He,et,$,Y)),H&&(h=Ew(h,H,He,et,$,Y)));const _t=(zt,ht,ei)=>{if(ht.x<0||ht.x>=qt||ht.y<0||ht.y>=qt)return;let Vt=null;if(G){const{x:Bt,y:Ct,z:yi}=I.projectTilePoint(ht.x,ht.y,ei);Vt={anchor:new Zc(Bt,Ct,yi,0,void 0),up:I.upVector(ei,ht.x,ht.y)}}(function(Bt,Ct,yi,Kt,ri,Pi,Ni,$i,Li,Zi,Hi,Or,Pr,Ci,br,Cr,Kr,Sn,Ln,Mn,gn,Tn,jn,Eo,Wr,Rs,Rl){const Ka=Bt.addToLineVertexArray(Ct,Kt);let Qa,rd,Vu,nd,P0,s9,a9,l9=0,c9=0,u9=0,h9=0,V3=-1,q3=-1;const cc={};let d9=_e("");const od=yi?yi.anchor:Ct,H3=Li.layout.get("icon-text-fit").evaluate(gn,{},Wr)!=="none";let G3=0,W3=0;if(Li._unevaluatedLayout.getValue("text-radial-offset")===void 0?[G3,W3]=Li.layout.get("text-offset").evaluate(gn,{},Wr).map(Ks=>Ks*Mo):(G3=Li.layout.get("text-radial-offset").evaluate(gn,{},Wr)*Mo,W3=f3),Bt.allowVerticalPlacement&&ri.vertical){const Ks=ri.vertical;if(br)s9=m3(Ks),$i&&(a9=m3($i));else{const Qs=Li.layout.get("text-rotate").evaluate(gn,{},Wr)+90;Vu=u_(Zi,od,Ct,Hi,Or,Pr,Ks,Ci,Qs,Cr),$i&&(nd=u_(Zi,od,Ct,Hi,Or,Pr,$i,Sn,Qs))}}if(Pi){const Ks=Li.layout.get("icon-rotate").evaluate(gn,{},Wr),Qs=Ow(Pi,Ks,jn,H3,Tn.iconScaleFactor),Ff=$i?Ow($i,Ks,jn,H3,Tn.iconScaleFactor):void 0;rd=u_(Zi,od,Ct,Hi,Or,Pr,Pi,Sn,Ks),l9=4*Qs.length;const f9=Bt.iconSizeData;let sd=null;f9.kind==="source"?(sd=[Il*Li.layout.get("icon-size").evaluate(gn,{},Wr)*Tn.iconScaleFactor],sd[0]>Nu&&Yi(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${p0}. Reduce your "icon-size".`)):f9.kind==="composite"&&(sd=[Il*Tn.compositeIconSizes[0].evaluate(gn,{},Wr)*Tn.iconScaleFactor,Il*Tn.compositeIconSizes[1].evaluate(gn,{},Wr)*Tn.iconScaleFactor],(sd[0]>Nu||sd[1]>Nu)&&Yi(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${p0}. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,Qs,sd,Mn,Ln,gn,!1,yi,Ct,Ka.lineStartIndex,Ka.lineLength,-1,Eo,Wr,Rs,Rl),V3=Bt.icon.placedSymbolArray.length-1,Ff&&(c9=4*Ff.length,Bt.addSymbols(Bt.icon,Ff,sd,Mn,Ln,gn,ba.vertical,yi,Ct,Ka.lineStartIndex,Ka.lineLength,-1,Eo,Wr,Rs,Rl),q3=Bt.icon.placedSymbolArray.length-1)}for(const Ks in ri.horizontal){const Qs=ri.horizontal[Ks];Qa||(d9=_e(Qs.text),br?P0=m3(Qs):Qa=u_(Zi,od,Ct,Hi,Or,Pr,Qs,Ci,Li.layout.get("text-rotate").evaluate(gn,{},Wr),Cr));const Ff=Qs.positionedLines.length===1;if(u9+=Nw(Bt,yi,Ct,Qs,Ni,Li,br,gn,Cr,Ka,ri.vertical?ba.horizontal:ba.horizontalOnly,Ff?Object.keys(ri.horizontal):[Ks],cc,V3,Tn,Eo,Wr,Rs),Ff)break}ri.vertical&&(h9+=Nw(Bt,yi,Ct,ri.vertical,Ni,Li,br,gn,Cr,Ka,ba.vertical,["vertical"],cc,q3,Tn,Eo,Wr,Rs));let qu=-1;const Z3=(Ks,Qs)=>Ks?Math.max(Ks,Qs):Qs;qu=Z3(P0,qu),qu=Z3(s9,qu),qu=Z3(a9,qu);const JP=qu>-1?1:0;Bt.glyphOffsetArray.length>=65535&&Yi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),gn.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,gn.sortKey),Bt.symbolInstances.emplaceBack(Ct.x,Ct.y,od.x,od.y,od.z,cc.right>=0?cc.right:-1,cc.center>=0?cc.center:-1,cc.left>=0?cc.left:-1,cc.vertical>=0?cc.vertical:-1,V3,q3,d9,Qa!==void 0?Qa:Bt.collisionBoxArray.length,Qa!==void 0?Qa+1:Bt.collisionBoxArray.length,Vu!==void 0?Vu:Bt.collisionBoxArray.length,Vu!==void 0?Vu+1:Bt.collisionBoxArray.length,rd!==void 0?rd:Bt.collisionBoxArray.length,rd!==void 0?rd+1:Bt.collisionBoxArray.length,nd||Bt.collisionBoxArray.length,nd?nd+1:Bt.collisionBoxArray.length,Hi,u9,h9,l9,c9,JP,0,G3,W3,qu,0,H3?1:0)})(u,ht,Vt,zt,a,h,g,Ye,u.layers[0],u.collisionBoxArray,i.index,i.sourceLayerIndex,u.index,xe,Pe,C,0,pe,me,$,i,f,z,x,T,E,A)};if(Ie==="line")for(const zt of Dw(i.geometry,0,0,qt,qt)){const ht=DD(zt,se,ge,a.vertical||H,h,U,Q,u.overscaling,qt);for(const ei of ht)H&&BD(u,H.text,Fe,ei)||_t(zt,ei,T)}else if(Ie==="line-center"){for(const zt of i.geometry)if(zt.length>1){const ht=zD(zt,ge,a.vertical||H,h,U,Q);ht&&_t(zt,ht,T)}}else if(i.type==="Polygon")for(const zt of Jg(i.geometry,0)){const ht=kD(zt,16);_t(zt[0],new Zc(ht.x,ht.y,0,0,void 0),T)}else if(i.type==="LineString")for(const zt of i.geometry)_t(zt,new Zc(zt[0].x,zt[0].y,0,0,void 0),T);else if(i.type==="Point")for(const zt of i.geometry)for(const ht of zt)_t([ht],new Zc(ht.x,ht.y,0,0,void 0),T)}const p0=255,Nu=p0*Il;function Nw(u,i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B,$){const H=function(Y,Q,se,xe,pe,ge,Pe,me){const Ie=[];if(Q.positionedLines.length===0)return Ie;const Fe=xe.layout.get("text-rotate").evaluate(ge,{})*Math.PI/180,Ne=function(_t){const zt=_t[0],ht=_t[1],ei=zt*ht;return ei>0?[zt,-ht]:ei<0?[-zt,ht]:zt===0?[ht,zt]:[ht,-zt]}(se);let He=Math.abs(Q.top-Q.bottom);for(const _t of Q.positionedLines)He-=_t.lineOffset;const et=Q.positionedLines.length,rt=He/et;let Ye=Q.top-se[1];for(let _t=0;_t<et;++_t){const zt=Q.positionedLines[_t];Ye=PD(Q,rt,Ye,_t);for(const ht of zt.positionedGlyphs){if(!ht.rect)continue;const ei=ht.rect||{};let Vt=vw+1,Bt=!0,Ct=1,yi=0;if(ht.imageName){const Mn=Pe[ht.imageName];if(!Mn)continue;if(Mn.sdf){Yi("SDF images are not supported in formatted text and will be ignored.");continue}Bt=!1,Ct=Mn.pixelRatio,Vt=d0/Ct}const Kt=(pe||me)&&ht.vertical,ri=ht.metrics.advance*ht.scale/2,Pi=ht.metrics,Ni=ht.rect;if(Ni===null)continue;me&&Q.verticalizable&&(yi=ht.imageName?ri-ht.metrics.width*ht.scale/2:0);const $i=pe?[ht.x+ri,ht.y]:[0,0];let Li=[0,0],Zi=[0,0],Hi=!1;pe||(Kt?(Zi=[ht.x+ri+Ne[0],ht.y+Ne[1]-yi],Hi=!0):Li=[ht.x+ri+se[0],ht.y+se[1]-yi]);const Or=Ni.w*ht.scale/(Ct*(ht.localGlyph?zl:1)),Pr=Ni.h*ht.scale/(Ct*(ht.localGlyph?zl:1));let Ci,br,Cr,Kr;if(Kt){const Mn=ht.y-Ye,gn=new Pt(-ri,ri-Mn),Tn=-Math.PI/2,jn=new Pt(...Zi);Ci=new Pt(-ri+Li[0],Li[1]),Ci._rotateAround(Tn,gn)._add(jn),Ci.x+=-Mn+ri,Ci.y-=(Pi.left-Vt)*ht.scale;const Eo=ht.imageName?Pi.advance*ht.scale:Mo*ht.scale,Wr=String.fromCodePoint(ht.glyph);bD(Wr)?Ci.x+=(1-Vt)*ht.scale:wD(Wr)?Ci.x+=Eo-Pi.height*ht.scale+(-Vt-1)*ht.scale:Ci.x+=ht.imageName||Pi.width+2*Vt===Ni.w&&Pi.height+2*Vt===Ni.h?(Eo-Pr)/2:(Eo-(Pi.height+2*Vt)*ht.scale)/2,br=new Pt(Ci.x,Ci.y-Or),Cr=new Pt(Ci.x+Pr,Ci.y),Kr=new Pt(Ci.x+Pr,Ci.y-Or)}else{const Mn=(Pi.left-Vt)*ht.scale-ri+Li[0],gn=(-Pi.top-Vt)*ht.scale+Li[1],Tn=Mn+Or,jn=gn+Pr;Ci=new Pt(Mn,gn),br=new Pt(Tn,gn),Cr=new Pt(Mn,jn),Kr=new Pt(Tn,jn)}if(Fe){let Mn;Mn=pe?new Pt(0,0):Hi?new Pt(Ne[0],Ne[1]):new Pt(se[0],se[1]),Ci._rotateAround(Fe,Mn),br._rotateAround(Fe,Mn),Cr._rotateAround(Fe,Mn),Kr._rotateAround(Fe,Mn)}const Sn=new Pt(0,0),Ln=new Pt(0,0);Ie.push({tl:Ci,tr:br,bl:Cr,br:Kr,texPrimary:ei,texSecondary:void 0,writingMode:Q.writingMode,glyphOffset:$i,sectionIndex:ht.sectionIndex,isSDF:Bt,pixelOffsetTL:Sn,pixelOffsetBR:Ln,minFontScaleX:0,minFontScaleY:0})}}return Ie}(0,h,C,f,_,w,g,u.allowVerticalPlacement),G=u.textSizeData;let U=null;G.kind==="source"?(U=[Il*f.layout.get("text-size").evaluate(w,{},B)*A.textScaleFactor],U[0]>Nu&&Yi(`${u.layerIds[0]}: Value for "text-size" is >= ${p0}. Reduce your "text-size".`)):G.kind==="composite"&&(U=[Il*A.compositeTextSizes[0].evaluate(w,{},B)*A.textScaleFactor,Il*A.compositeTextSizes[1].evaluate(w,{},B)*A.textScaleFactor],(U[0]>Nu||U[1]>Nu)&&Yi(`${u.layerIds[0]}: Value for "text-size" is >= ${p0}. Reduce your "text-size".`)),u.addSymbols(u.text,H,U,C,_,w,x,i,a,z.lineStartIndex,z.lineLength,E,k,B,$,!1);for(const Y of T)I[Y]=u.text.placedSymbolArray.length-1;return 4*H.length}function $w(u){for(const i in u)return u[i];return null}function u_(u,i,a,h,g,f,_,w,C,z){let x=_.top,T=_.bottom,I=_.left,E=_.right;const A=_.collisionPadding;if(A&&(I-=A[0],x-=A[1],E+=A[2],T+=A[3]),C){const k=new Pt(I,x),B=new Pt(E,x),$=new Pt(I,T),H=new Pt(E,T),G=Oi(C);let U=new Pt(0,0);z&&(U=new Pt(z[0],z[1])),k._rotateAround(G,U),B._rotateAround(G,U),$._rotateAround(G,U),H._rotateAround(G,U),I=Math.min(k.x,B.x,$.x,H.x),E=Math.max(k.x,B.x,$.x,H.x),x=Math.min(k.y,B.y,$.y,H.y),T=Math.max(k.y,B.y,$.y,H.y)}return u.emplaceBack(i.x,i.y,i.z,a.x,a.y,I,x,E,T,w,h,g,f),u.length-1}function m3(u){u.collisionPadding&&(u.top-=u.collisionPadding[1],u.bottom+=u.collisionPadding[3]);const i=u.bottom-u.top;return i>0?Math.max(10,i):null}function BD(u,i,a,h){const g=u.compareText;if(i in g){const f=g[i];for(let _=f.length-1;_>=0;_--)if(h.dist(f[_])<a)return!0}else g[i]=[];return g[i].push(h),!1}function jw(u,i){const a=u.fovAboveCenter,h=u.elevation?u.elevation.getMinElevationBelowMSL()*i:0,g=(u._camera.position[2]*u.worldSize-h)/Math.cos(u._pitch),f=Math.sin(a)*g/Math.sin(Math.max(Math.PI/2-u._pitch-a,.01));let _=Math.sin(u._pitch)*f+g;const w=g*(1/u._horizonShift);return u.elevation&&u.elevation.exaggeration()!==0||(_*=1+Math.max(u.zoom-17,0)),Math.min(1.01*_,w)}function m0(u,i){if(!i.isReprojectedInTileSpace)return{scale:1<<u.z,x:u.x,y:u.y,x2:u.x+1,y2:u.y+1,projection:i};const a=Math.pow(2,-u.z),h=u.x*a,g=(u.x+1)*a,f=u.y*a,_=(u.y+1)*a,w=ue(h),C=ue(g),z=ye(f),x=ye(_),T=i.project(w,z),I=i.project(C,z),E=i.project(C,x),A=i.project(w,x);let k=Math.min(T.x,I.x,E.x,A.x),B=Math.min(T.y,I.y,E.y,A.y),$=Math.max(T.x,I.x,E.x,A.x),H=Math.max(T.y,I.y,E.y,A.y);const G=a/16;function U(Q,se,xe,pe,ge,Pe){const me=(xe+ge)/2,Ie=(pe+Pe)/2,Fe=i.project(ue(me),ye(Ie)),Ne=Math.max(0,k-Fe.x,B-Fe.y,Fe.x-$,Fe.y-H);k=Math.min(k,Fe.x),$=Math.max($,Fe.x),B=Math.min(B,Fe.y),H=Math.max(H,Fe.y),Ne>G&&(U(Q,Fe,xe,pe,me,Ie),U(Fe,se,me,Ie,ge,Pe))}U(T,I,h,f,g,f),U(I,E,g,f,g,_),U(E,A,g,_,h,_),U(A,T,h,_,h,f),k-=G,B-=G,$+=G,H+=G;const Y=1/Math.max($-k,H-B);return{scale:Y,x:k*Y,y:B*Y,x2:$*Y,y2:H*Y,projection:i}}function Uw(u,{x:i,y:a},h=0){return new Pt(((i-h)*u.scale-u.x)*qt,(a*u.scale-u.y)*qt)}const FD=Te.mat4.identity(new Float32Array(16));class $u{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,a){return{x:0,y:0,z:0}}unproject(i,a){return new O(0,0)}projectTilePoint(i,a,h){return{x:i,y:a,z:0}}locationPoint(i,a,h=!0){return i._coordinatePoint(i.locationCoordinate(a),h)}pixelsPerMeter(i,a){return re(1,i)*a}pixelSpaceConversion(i,a,h){return 1}farthestPixelDistance(i){return jw(i,i.pixelsPerMeter)}pointCoordinate(i,a,h,g){const f=i.horizonLineFromTop(!1),_=new Pt(a,Math.max(f,h));return i.rayIntersectionCoordinate(i.pointRayIntersection(_,g))}pointCoordinate3D(i,a,h){const g=new Pt(a,h);if(i.elevation)return i.elevation.pointCoordinate(g);{const f=this.pointCoordinate(i,g.x,g.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(i,a){if(i.elevation&&i.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(i,a.x,a.y);const h=i.horizonLineFromTop();return a.y<h}createInversionMatrix(i,a){return FD}createTileMatrix(i,a,h){let g,f,_;const w=h.canonical,C=Te.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const z=m0(w,this);g=1,f=z.x+h.wrap*z.scale,_=z.y,Te.mat4.scale(C,C,[g/z.scale,g/z.scale,i.pixelsPerMeter/a])}else g=a/i.zoomScale(w.z),f=(w.x+Math.pow(2,w.z)*h.wrap)*g,_=w.y*g;return Te.mat4.translate(C,C,[f,_,0]),Te.mat4.scale(C,C,[g/qt,g/qt,1]),C}upVector(i,a,h){return[0,0,1]}upVectorScale(i,a,h){return{metersToTile:1}}}class ND extends $u{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[a,h]=this.parallels=i.parallels||[29.5,45.5],g=Math.sin(Oi(a));this.n=(g+Math.sin(Oi(h)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(i,a){const{n:h,c:g,r0:f}=this,_=Oi(i-this.center[0]),w=Oi(a),C=Math.sqrt(g-2*h*Math.sin(w))/h;return{x:C*Math.sin(_*h),y:C*Math.cos(_*h)-f,z:0}}unproject(i,a){const{n:h,c:g,r0:f}=this,_=f+a;let w=Math.atan2(i,Math.abs(_))*Math.sign(_);_*h<0&&(w-=Math.PI*Math.sign(i)*Math.sign(_));const C=Oi(this.center[0])*h;w=hr(w,-Math.PI-C,Math.PI-C);const z=Ot(un(w/h)+this.center[0],-180,180),x=Math.asin(Ot((g-(i*i+_*_)*h*h)/(2*h),-1,1)),T=Ot(un(x),-be,be);return new O(z,T)}}const g0=1.340264,_0=-.081106,y0=893e-6,v0=.003796,h_=Math.sqrt(3)/2;class $D extends $u{project(i,a){a=a/180*Math.PI,i=i/180*Math.PI;const h=Math.asin(h_*Math.sin(a)),g=h*h,f=g*g*g;return{x:.5*(i*Math.cos(h)/(h_*(g0+3*_0*g+f*(7*y0+9*v0*g)))/Math.PI+.5),y:1-.5*(h*(g0+_0*g+f*(y0+v0*g))/Math.PI+1),z:0}}unproject(i,a){i=(2*i-.5)*Math.PI;let h=a=(2*(1-a)-1)*Math.PI,g=h*h,f=g*g*g;for(let x,T,I,E=0;E<12&&(T=h*(g0+_0*g+f*(y0+v0*g))-a,I=g0+3*_0*g+f*(7*y0+9*v0*g),x=T/I,h=Ot(h-x,-Math.PI/3,Math.PI/3),g=h*h,f=g*g*g,!(Math.abs(x)<1e-12));++E);const _=h_*i*(g0+3*_0*g+f*(7*y0+9*v0*g))/Math.cos(h),w=Math.asin(Math.sin(h)/h_),C=Ot(180*_/Math.PI,-180,180),z=Ot(180*w/Math.PI,-be,be);return new O(C,z)}}class jD extends $u{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,a){return{x:.5+i/360,y:.5-a/360,z:0}}unproject(i,a){const h=360*(i-.5),g=Ot(360*(.5-a),-be,be);return new O(h,g)}}const Df=Math.PI/2;function d_(u){return Math.tan((Df+u)/2)}class UD extends $u{constructor(i){super(i),this.center=i.center||[0,30];const[a,h]=this.parallels=i.parallels||[30,30];let g=Oi(a),f=Oi(h);this.southernCenter=g+f<0,this.southernCenter&&(g=-g,f=-f);const _=Math.cos(g),w=d_(g);this.n=g===f?Math.sin(g):Math.log(_/Math.cos(f))/Math.log(d_(f)/w),this.f=_*Math.pow(d_(g),this.n)/this.n}project(i,a){a=Oi(a),this.southernCenter&&(a=-a),i=Oi(i-this.center[0]);const h=1e-6,{n:g,f}=this;f>0?a<-Df+h&&(a=-Df+h):a>Df-h&&(a=Df-h);const _=f/Math.pow(d_(a),g);let w=_*Math.sin(g*i),C=f-_*Math.cos(g*i);return w=.5*(w/Math.PI+.5),C=.5*(C/Math.PI+.5),{x:w,y:this.southernCenter?C:1-C,z:0}}unproject(i,a){i=(2*i-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:h,f:g}=this,f=g-a,_=Math.sign(f),w=Math.sign(h)*Math.sqrt(i*i+f*f);let C=Math.atan2(i,Math.abs(f))*_;f*h<0&&(C-=Math.PI*Math.sign(i)*_);const z=Ot(un(C/h)+this.center[0],-180,180),x=Ot(un(2*Math.atan(Math.pow(g/w,1/h))-Df),-be,be);return new O(z,this.southernCenter?-x:x)}}class Vw extends $u{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,a){return{x:ee(i),y:ne(a),z:0}}unproject(i,a){const h=ue(i),g=ye(a);return new O(h,g)}}const qw=Oi(be);class VD extends $u{project(i,a){const h=(a=Oi(a))*a,g=h*h;return{x:.5*((i=Oi(i))*(.8707-.131979*h+g*(g*(.003971*h-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+h*(.015085+g*(.028874*h-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(i,a){i=(2*i-.5)*Math.PI;let h=a=(2*(1-a)-1)*Math.PI,g=25,f=0,_=h*h;do{_=h*h;const z=_*_;f=(h*(1.007226+_*(.015085+z*(.028874*_-.044475-.005916*z)))-a)/(1.007226+_*(.045255+z*(.259866*_-.311325-.005916*11*z))),h=Ot(h-f,-qw,qw)}while(Math.abs(f)>1e-6&&--g>0);_=h*h;const w=Ot(un(i/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),C=un(h);return new O(w,C)}}const Hw=Oi(be);class qD extends $u{project(i,a){a=Oi(a),i=Oi(i);const h=Math.cos(a),g=2/Math.PI,f=Math.acos(h*Math.cos(i/2)),_=Math.sin(f)/f,w=.5*(i*g+2*h*Math.sin(i/2)/_)||0,C=.5*(a+Math.sin(a)/_)||0;return{x:.5*(w/Math.PI+.5),y:1-.5*(C/Math.PI+1),z:0}}unproject(i,a){let h=i=(2*i-.5)*Math.PI,g=a=(2*(1-a)-1)*Math.PI,f=25;const _=1e-6;let w=0,C=0;do{const z=Math.cos(g),x=Math.sin(g),T=2*x*z,I=x*x,E=z*z,A=Math.cos(h/2),k=Math.sin(h/2),B=2*A*k,$=k*k,H=1-E*A*A,G=H?1/H:0,U=H?Math.acos(z*A)*Math.sqrt(1/H):0,Y=.5*(2*U*z*k+2*h/Math.PI)-i,Q=.5*(U*x+g)-a,se=.5*G*(E*$+U*z*A*I)+1/Math.PI,xe=G*(B*T/4-U*x*k),pe=.125*G*(T*k-U*x*E*B),ge=.5*G*(I*A+U*$*z)+.5,Pe=xe*pe-ge*se;w=(Q*xe-Y*ge)/Pe,C=(Y*pe-Q*se)/Pe,h=Ot(h-w,-Math.PI,Math.PI),g=Ot(g-C,-Hw,Hw)}while((Math.abs(w)>_||Math.abs(C)>_)&&--f>0);return new O(un(h),un(g))}}class Gw extends $u{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Oi(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,a){const{scale:h,cosPhi:g}=this;return{x:Oi(i)*g*h+.5,y:-Math.sin(Oi(a))/g*h+.5,z:0}}unproject(i,a){const{scale:h,cosPhi:g}=this,f=-(a-.5)/h,_=Ot(un((i-.5)/h)/g,-180,180),w=Math.asin(Ot(f*g,-1,1)),C=Ot(un(w),-be,be);return new O(_,C)}}class HD extends Vw{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,a,h){const g=Qp(i,a,h),f=Wg(ac(h));return Te.vec3.transformMat4(g,g,f),{x:g[0],y:g[1],z:g[2]}}locationPoint(i,a){const h=D(a.lat,a.lng),g=Te.vec3.normalize([],h),f=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(a),i._centerAltitude):i._centerAltitude,_=re(1,0)*qt*f;Te.vec3.scaleAndAdd(h,h,g,_);const w=Te.mat4.identity(new Float64Array(16));return Te.mat4.multiply(w,i.pixelMatrix,i.globeMatrix),Te.vec3.transformMat4(h,h,w),new Pt(h[0],h[1])}pixelsPerMeter(i,a){return re(1,0)*a}pixelSpaceConversion(i,a,h){const g=re(1,i)*a,f=ai(re(1,45)*a,g,h);return this.pixelsPerMeter(i,a)/f}createTileMatrix(i,a,h){const g=Fv(ac(h.canonical));return Te.mat4.multiply(new Float64Array(16),i.globeMatrix,g)}createInversionMatrix(i,a){const{center:h}=i,g=Wg(ac(a));return Te.mat4.rotateY(g,g,Oi(h.lng)),Te.mat4.rotateX(g,g,Oi(h.lat)),Te.mat4.scale(g,g,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(i,a,h,g){return Ru(i,a,h,!0)||new $e(0,0)}pointCoordinate3D(i,a,h){const g=this.pointCoordinate(i,a,h,0);return[g.x,g.y,g.z]}isPointAboveHorizon(i,a){return!Ru(i,a.x,a.y,!1)}farthestPixelDistance(i){const a=function(g,f){const _=g.cameraToCenterDistance,w=g._centerAltitude*f,C=g._camera,z=g._camera.forward(),x=Te.vec3.add([],Te.vec3.scale([],z,-_),[0,0,w]),T=g.worldSize/(2*Math.PI),I=[0,0,-T],E=g.width/g.height,A=Math.tan(g.fovAboveCenter),k=Te.vec3.scale([],C.up(),A),B=Te.vec3.scale([],C.right(),A*E),$=Te.vec3.normalize([],Te.vec3.add([],Te.vec3.add([],z,k),B)),H=[];let G;if(new us(x,$).closestPointOnSphere(I,T,H)){const U=Te.vec3.add([],H,I),Y=Te.vec3.sub([],U,x);G=Math.cos(g.fovAboveCenter)*Te.vec3.length(Y)}else{const U=Te.vec3.sub([],x,I),Y=Te.vec3.sub([],I,x);Te.vec3.normalize(Y,Y);const Q=Te.vec3.length(U)-T;G=Math.sqrt(Q*(Q+2*T));const se=Math.acos(G/(T+Q))-Math.acos(Te.vec3.dot(z,Y));G*=Math.cos(se)}return 1.01*G}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),h=Lu(i.zoom);if(h>0){const g=jw(i,re(1,i.center.lat)*i.worldSize),f=i.worldSize/(2*Math.PI),_=Math.max(i.width,i.height)/i.worldSize*Math.PI;return ai(a,g+f*(1-Math.cos(_)),Math.pow(h,10))}return a}upVector(i,a,h){return Qp(a,h,i,1)}upVectorScale(i){return{metersToTile:ku(Gg(ac(i)))}}}function Ww(u){const i=u.parallels,a=!!i&&Math.abs(i[0]+i[1])<.01;switch(u.name){case"mercator":return new Vw(u);case"equirectangular":return new jD(u);case"naturalEarth":return new VD(u);case"equalEarth":return new $D(u);case"winkelTripel":return new qD(u);case"albers":return a?new Gw(u):new ND(u);case"lambertConformalConic":return a?new Gw(u):new UD(u);case"globe":return new HD(u)}throw new Error(`Invalid projection name: ${u.name}`)}const GD=Tf.VectorTileFeature.types,WD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function f_(u,i,a,h,g,f,_,w,C,z,x,T,I){const E=w?Math.min(Nu,Math.round(w[0])):0,A=w?Math.min(Nu,Math.round(w[1])):0;u.emplaceBack(i,a,Math.round(32*h),Math.round(32*g),f,_,(E<<1)+(C?1:0),A,16*z,16*x,256*T,256*I)}function p_(u,i,a){u.emplaceBack(i,a)}function m_(u,i,a,h,g,f,_){u.emplaceBack(i,a,h,g,f,_)}function g_(u,i,a,h,g){u.emplaceBack(i,a,h,g),u.emplaceBack(i,a,h,g),u.emplaceBack(i,a,h,g),u.emplaceBack(i,a,h,g)}function ZD(u){for(const i of u.sections)if(Mv(i.text))return!0;return!1}class g3{constructor(i){this.layoutVertexArray=new Tu,this.indexArray=new rn,this.programConfigurations=i,this.segments=new yn,this.dynamicLayoutVertexArray=new wl,this.opacityVertexArray=new $p,this.placedSymbolArray=new Hp,this.iconTransitioningVertexArray=new sc,this.globeExtVertexArray=new Np,this.zOffsetVertexArray=new zu}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(i,a,h,g,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,hD.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,fD.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,WD,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=i.createVertexBuffer(this.iconTransitioningVertexArray,mD.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,dD.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||f)&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,pD.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}ti(g3,"SymbolBuffers");class _3{constructor(i,a,h){this.layoutVertexArray=new i,this.layoutAttributes=a,this.indexArray=new h,this.segments=new yn,this.collisionVertexArray=new Au,this.collisionVertexArrayExt=new wl}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,gD.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,_D.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ti(_3,"CollisionBuffers");class __{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.lut=i.lut,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Te.mat4.identity([]),this.placementViewportMatrix=Te.mat4.identity([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=o3(this.zoom,a["text-size"]),this.iconSizeData=o3(this.zoom,a["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),f=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(_=>ba[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=i.sourceID,this.projection=i.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=h.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new g3(new Xa(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("text")||i.startsWith("symbol"))),this.icon=new g3(new Xa(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("icon")||i.startsWith("symbol"))),this.glyphOffsetArray=new Rg,this.lineVertexArray=new bf,this.symbolInstances=new Gp}calculateGlyphDependencies(i,a,h,g,f){for(const _ of i){const w=_.codePointAt(0);if(w===void 0)break;if(a[w]=!0,g&&f&&w<=65535){const C=u0[_];C&&(a[C.charCodeAt(0)]=!0)}}}updateFootprints(i,a){}updateReplacement(i,a){if(a.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=a.updateTime;const h=a.getReplacementRegionsForTile(i.toUnwrapped(),!0);return!Kv(this.activeReplacements,h)&&(this.activeReplacements=h,!0)}populate(i,a,h,g){const f=this.layers[0],_=f.layout,w=this.projection.name==="globe",C=_.get("text-font"),z=_.get("text-field"),x=_.get("icon-image"),T=(z.value.kind!=="constant"||z.value.value instanceof no&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),I=x.value.kind!=="constant"||!!x.value.value||Object.keys(x.parameters).length>0,E=_.get("symbol-sort-key");if(this.features=[],!T&&!I)return;const A=a.iconDependencies,k=a.glyphDependencies,B=a.availableImages,$=new fn(this.zoom);for(const{feature:H,id:G,index:U,sourceLayerIndex:Y}of i){const Q=f._featureFilter.needGeometry,se=St(H,Q);if(!f._featureFilter.filter($,se,h))continue;if(Q||(se.geometry=Xe(H,h,g)),w&&H.type!==1&&h.z<=5){const Pe=se.geometry,me=.98078528056,Ie=(Fe,Ne)=>{const He=Qp(Fe.x,Fe.y,h,1),et=Qp(Ne.x,Ne.y,h,1);return Te.vec3.dot(He,et)<me};for(let Fe=0;Fe<Pe.length;Fe++)Pe[Fe]=dt(Pe[Fe],Ie)}let xe,pe;if(T){const Pe=f.getValueAndResolveTokens("text-field",se,h,B),me=no.factory(Pe);ZD(me)&&(this.hasRTLText=!0),(!this.hasRTLText||Dp()==="unavailable"||this.hasRTLText&&Ps.isParsed())&&(xe=xD(me,f,se))}if(I){const Pe=f.getValueAndResolveTokens("icon-image",se,h,B);pe=Pe instanceof fo?Pe:fo.fromString(Pe)}if(!xe&&!pe)continue;const ge=this.sortFeaturesByKey?E.evaluate(se,{},h):void 0;if(this.features.push({id:G,text:xe,icon:pe,index:U,sourceLayerIndex:Y,geometry:se.geometry,properties:H.properties,type:GD[H.type],sortKey:ge}),pe&&(A[pe.namePrimary]=!0,pe.nameSecondary&&(A[pe.nameSecondary]=!0)),xe){const Pe=C.evaluate(se,{},h).join(","),me=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ba.vertical)>=0;for(const Ie of xe.sections)if(Ie.image)A[Ie.image.namePrimary]=!0;else{const Fe=Tp(xe.toString()),Ne=Ie.fontStack||Pe,He=k[Ne]=k[Ne]||{};this.calculateGlyphDependencies(Ie.text,He,me,this.allowVerticalPlacement,Fe)}}}_.get("symbol-placement")==="line"&&(this.features=function(H){const G={},U={},Y=[];let Q=0;function se(Pe){Y.push(H[Pe]),Q++}function xe(Pe,me,Ie){const Fe=U[Pe];return delete U[Pe],U[me]=Fe,Y[Fe].geometry[0].pop(),Y[Fe].geometry[0]=Y[Fe].geometry[0].concat(Ie[0]),Fe}function pe(Pe,me,Ie){const Fe=G[me];return delete G[me],G[Pe]=Fe,Y[Fe].geometry[0].shift(),Y[Fe].geometry[0]=Ie[0].concat(Y[Fe].geometry[0]),Fe}function ge(Pe,me,Ie){const Fe=Ie?me[0][me[0].length-1]:me[0][0];return`${Pe}:${Fe.x}:${Fe.y}`}for(let Pe=0;Pe<H.length;Pe++){const me=H[Pe],Ie=me.geometry,Fe=me.text?me.text.toString():null;if(!Fe){se(Pe);continue}const Ne=ge(Fe,Ie),He=ge(Fe,Ie,!0);if(Ne in U&&He in G&&U[Ne]!==G[He]){const et=pe(Ne,He,Ie),rt=xe(Ne,He,Y[et].geometry);delete G[Ne],delete U[He],U[ge(Fe,Y[rt].geometry,!0)]=rt,Y[et].geometry=null}else Ne in U?xe(Ne,He,Ie):He in G?pe(Ne,He,Ie):(se(Pe),G[Ne]=Q-1,U[He]=Q-1)}return Y.filter(Pe=>Pe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((H,G)=>H.sortKey-G.sortKey)}update(i,a,h,g,f){const _=Object.keys(i).length!==0;if(_&&!this.stateDependentLayers.length)return;const w=_?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(i,a,w,h,g,f),this.icon.programConfigurations.updatePaintArrays(i,a,w,h,g,f)}updateZOffset(){const i=(f,_,w)=>{h+=_,h>f.length&&f.resize(h);for(let C=-_;C<0;C++)f.emplace(C+h,w)},a=(f,_,w)=>{g+=_,g>f.length&&f.resize(g);for(let C=-_;C<0;C++)f.emplace(C+g,w)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let h=0,g=0;for(let f=0;f<this.symbolInstances.length;f++){const _=this.symbolInstances.get(f),{numHorizontalGlyphVertices:w,numVerticalGlyphVertices:C,numIconVertices:z}=_,x=_.zOffset,T=z>0;if((w>0||C>0)&&(i(this.text.zOffsetVertexArray,w,x),i(this.text.zOffsetVertexArray,C,x)),T){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:E}=_;I>=0&&a(this.icon.zOffsetVertexArray,z,x),E>=0&&a(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,x)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Ww(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,a){const h=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:g,y:f}of a)this.lineVertexArray.emplaceBack(g,f);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,a,h,g,f,_,w,C,z,x,T,I,E,A,k,B){const $=i.indexArray,H=i.layoutVertexArray,G=i.globeExtVertexArray,U=i.segments.prepareSegment(4*a.length,H,$,this.canOverlap?_.sortKey:void 0),Y=this.glyphOffsetArray.length,Q=U.vertexLength,se=this.allowVerticalPlacement&&w===ba.vertical?Math.PI/2:0,xe=_.text&&_.text.sections;for(let ge=0;ge<a.length;ge++){const{tl:Pe,tr:me,bl:Ie,br:Fe,texPrimary:Ne,texSecondary:He,pixelOffsetTL:et,pixelOffsetBR:rt,minFontScaleX:Ye,minFontScaleY:_t,glyphOffset:zt,isSDF:ht,sectionIndex:ei}=a[ge],Vt=U.vertexLength,Bt=zt[1];if(f_(H,z.x,z.y,Pe.x,Bt+Pe.y,Ne.x,Ne.y,h,ht,et.x,et.y,Ye,_t),f_(H,z.x,z.y,me.x,Bt+me.y,Ne.x+Ne.w,Ne.y,h,ht,rt.x,et.y,Ye,_t),f_(H,z.x,z.y,Ie.x,Bt+Ie.y,Ne.x,Ne.y+Ne.h,h,ht,et.x,rt.y,Ye,_t),f_(H,z.x,z.y,Fe.x,Bt+Fe.y,Ne.x+Ne.w,Ne.y+Ne.h,h,ht,rt.x,rt.y,Ye,_t),C){const{x:Ct,y:yi,z:Kt}=C.anchor,[ri,Pi,Ni]=C.up;m_(G,Ct,yi,Kt,ri,Pi,Ni),m_(G,Ct,yi,Kt,ri,Pi,Ni),m_(G,Ct,yi,Kt,ri,Pi,Ni),m_(G,Ct,yi,Kt,ri,Pi,Ni),g_(i.dynamicLayoutVertexArray,Ct,yi,Kt,se)}else g_(i.dynamicLayoutVertexArray,z.x,z.y,z.z,se);if(B){const Ct=He||Ne;p_(i.iconTransitioningVertexArray,Ct.x,Ct.y),p_(i.iconTransitioningVertexArray,Ct.x+Ct.w,Ct.y),p_(i.iconTransitioningVertexArray,Ct.x,Ct.y+Ct.h),p_(i.iconTransitioningVertexArray,Ct.x+Ct.w,Ct.y+Ct.h)}$.emplaceBack(Vt,Vt+1,Vt+2),$.emplaceBack(Vt+1,Vt+2,Vt+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zt[0]),ge!==a.length-1&&ei===a[ge+1].sectionIndex||i.programConfigurations.populatePaintArrays(H.length,_,_.index,{},E,A,k,xe&&xe[ei])}const pe=C?C.anchor:z;i.placedSymbolArray.emplaceBack(pe.x,pe.y,pe.z,z.x,z.y,Y,this.glyphOffsetArray.length-Y,Q,x,T,z.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],w,0,!1,0,I,0)}_commitLayoutVertex(i,a,h,g,f,_,w){i.emplaceBack(a,h,g,f,_,Math.round(w.x),Math.round(w.y))}_addCollisionDebugVertices(i,a,h,g,f,_,w){const C=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),z=C.vertexLength,x=w.tileAnchorX,T=w.tileAnchorY;for(let E=0;E<4;E++)h.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(h.collisionVertexArrayExt,a,i.padding,w.zOffset),this._commitLayoutVertex(h.layoutVertexArray,g,f,_,x,T,new Pt(i.x1,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,f,_,x,T,new Pt(i.x2,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,f,_,x,T,new Pt(i.x2,i.y2)),this._commitLayoutVertex(h.layoutVertexArray,g,f,_,x,T,new Pt(i.x1,i.y2)),C.vertexLength+=4;const I=h.indexArray;I.emplaceBack(z,z+1),I.emplaceBack(z+1,z+2),I.emplaceBack(z+2,z+3),I.emplaceBack(z+3,z),C.primitiveLength+=4}_addTextDebugCollisionBoxes(i,a,h,g,f,_){for(let w=g;w<f;w++){const C=h.get(w),z=this.getSymbolInstanceTextSize(i,_,a,w);this._addCollisionDebugVertices(C,z,this.textCollisionBox,C.projectedAnchorX,C.projectedAnchorY,C.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(i,a,h,g,f,_){for(let w=g;w<f;w++){const C=h.get(w),z=this.getSymbolInstanceIconSize(i,a,_.placedIconSymbolIndex);this._addCollisionDebugVertices(C,z,this.iconCollisionBox,C.projectedAnchorX,C.projectedAnchorY,C.projectedAnchorZ,_)}}generateCollisionDebugBuffers(i,a,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _3(mf,mw.members,sc),this.iconCollisionBox=new _3(mf,mw.members,sc);const g=Cf(this.iconSizeData,i),f=Cf(this.textSizeData,i,h);for(let _=0;_<this.symbolInstances.length;_++){const w=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(f,i,a,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(f,i,a,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(g,i,a,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(g,i,a,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(i,a,h,g){const f=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:g),_=n_(this.textSizeData,i,f)/Mo;return this.tilePixelRatio*_}getSymbolInstanceIconSize(i,a,h){const g=this.icon.placedSymbolArray.get(h),f=n_(this.iconSizeData,i,g);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(i,a,h,g){i.emplaceBack(a,-h,-h,g),i.emplaceBack(a,h,-h,g),i.emplaceBack(a,h,h,g),i.emplaceBack(a,-h,h,g)}_updateTextDebugCollisionBoxes(i,a,h,g,f,_,w){for(let C=g;C<f;C++){const z=h.get(C),x=this.getSymbolInstanceTextSize(i,_,a,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,x,z.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(i,a,h,g,f,_,w){for(let C=g;C<f;C++){const z=h.get(C),x=this.getSymbolInstanceIconSize(i,a,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,x,z.padding,_.zOffset)}}updateCollisionDebugBuffers(i,a,h,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=Cf(this.iconSizeData,i,g),_=Cf(this.textSizeData,i,h);for(let w=0;w<this.symbolInstances.length;w++){const C=this.symbolInstances.get(w);this._updateTextDebugCollisionBoxes(_,i,a,C.textBoxStartIndex,C.textBoxEndIndex,C,h),this._updateTextDebugCollisionBoxes(_,i,a,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C,h),this._updateIconDebugCollisionBoxes(f,i,a,C.iconBoxStartIndex,C.iconBoxEndIndex,C,g),this._updateIconDebugCollisionBoxes(f,i,a,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex,C,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,a,h,g,f,_,w,C,z){const x={};if(a<h){const{x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U,featureIndex:Y}=i.get(a);x.textBox={x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U},x.textFeatureIndex=Y}if(g<f){const{x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U,featureIndex:Y}=i.get(g);x.verticalTextBox={x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U},x.verticalTextFeatureIndex=Y}if(_<w){const{x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U,featureIndex:Y}=i.get(_);x.iconBox={x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U},x.iconFeatureIndex=Y}if(C<z){const{x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U,featureIndex:Y}=i.get(C);x.verticalIconBox={x1:T,y1:I,x2:E,y2:A,padding:k,projectedAnchorX:B,projectedAnchorY:$,projectedAnchorZ:H,tileAnchorX:G,tileAnchorY:U},x.verticalIconFeatureIndex=Y}return x}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(i,a){const h=i.placedSymbolArray.get(a),g=h.vertexStartIndex+4*h.numGlyphs;for(let f=h.vertexStartIndex;f<g;f+=4)i.indexArray.emplaceBack(f,f+1,f+2),i.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(i),h=Math.cos(i),g=[],f=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);const C=this.symbolInstances.get(w);g.push(0|Math.round(a*C.tileAnchorX+h*C.tileAnchorY)),f.push(C.featureIndex)}return _.sort((w,C)=>g[w]-g[C]||f[C]-f[w]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let i=0;i<this.symbolInstances.length;++i)this.symbolInstanceIndexesSortedZOffset.push(i)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((i,a)=>this.symbolInstances.get(a).zOffset-this.symbolInstances.get(i).zOffset)}addToSortKeyRanges(i,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:w,placedIconSymbolIndex:C,verticalPlacedIconSymbolIndex:z}=h;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),f>=0&&f!==g&&this.addIndicesForPlacedSymbol(this.text,f),_>=0&&_!==f&&_!==g&&this.addIndicesForPlacedSymbol(this.text,_),w>=0&&this.addIndicesForPlacedSymbol(this.text,w),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Zw,Xw,y3;ti(__,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),__.addDynamicAttributes=g_;class Yw{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:tn,this.defaultValue=i}evaluate(i){if(i.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(i.formattedSection))return a.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ti(Yw,"FormatSectionOverride",{omit:["defaultValue"]});const v3=()=>y3||(y3={layout:Zw||(Zw=new Hr({"symbol-placement":new Ft(it.layout_symbol["symbol-placement"]),"symbol-spacing":new Ft(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ft(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pi(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ft(it.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ft(it.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Ft(it.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Ft(it.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ft(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ft(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ft(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new pi(it.layout_symbol["icon-size"]),"icon-size-scale-range":new Ft(it.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new pi(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new pi(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new pi(it.layout_symbol["icon-image"]),"icon-rotate":new pi(it.layout_symbol["icon-rotate"]),"icon-padding":new Ft(it.layout_symbol["icon-padding"]),"icon-keep-upright":new Ft(it.layout_symbol["icon-keep-upright"]),"icon-offset":new pi(it.layout_symbol["icon-offset"]),"icon-anchor":new pi(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ft(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ft(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ft(it.layout_symbol["text-rotation-alignment"]),"text-field":new pi(it.layout_symbol["text-field"]),"text-font":new pi(it.layout_symbol["text-font"]),"text-size":new pi(it.layout_symbol["text-size"]),"text-size-scale-range":new Ft(it.layout_symbol["text-size-scale-range"]),"text-max-width":new pi(it.layout_symbol["text-max-width"]),"text-line-height":new pi(it.layout_symbol["text-line-height"]),"text-letter-spacing":new pi(it.layout_symbol["text-letter-spacing"]),"text-justify":new pi(it.layout_symbol["text-justify"]),"text-radial-offset":new pi(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ft(it.layout_symbol["text-variable-anchor"]),"text-anchor":new pi(it.layout_symbol["text-anchor"]),"text-max-angle":new Ft(it.layout_symbol["text-max-angle"]),"text-writing-mode":new Ft(it.layout_symbol["text-writing-mode"]),"text-rotate":new pi(it.layout_symbol["text-rotate"]),"text-padding":new Ft(it.layout_symbol["text-padding"]),"text-keep-upright":new Ft(it.layout_symbol["text-keep-upright"]),"text-transform":new pi(it.layout_symbol["text-transform"]),"text-offset":new pi(it.layout_symbol["text-offset"]),"text-allow-overlap":new Ft(it.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ft(it.layout_symbol["text-ignore-placement"]),"text-optional":new Ft(it.layout_symbol["text-optional"]),visibility:new Ft(it.layout_symbol.visibility)})),paint:Xw||(Xw=new Hr({"icon-opacity":new pi(it.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new pi(it.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new pi(it.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new pi(it.paint_symbol["text-emissive-strength"]),"icon-color":new pi(it.paint_symbol["icon-color"]),"icon-halo-color":new pi(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new pi(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pi(it.paint_symbol["icon-halo-blur"]),"icon-translate":new Ft(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ft(it.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new pi(it.paint_symbol["icon-image-cross-fade"]),"text-opacity":new pi(it.paint_symbol["text-opacity"]),"text-occlusion-opacity":new pi(it.paint_symbol["text-occlusion-opacity"]),"text-color":new pi(it.paint_symbol["text-color"],{runtimeType:Er,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new pi(it.paint_symbol["text-halo-color"]),"text-halo-width":new pi(it.paint_symbol["text-halo-width"]),"text-halo-blur":new pi(it.paint_symbol["text-halo-blur"]),"text-translate":new Ft(it.paint_symbol["text-translate"]),"text-translate-anchor":new Ft(it.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ft(it.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Ft(it.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Ft(it.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Ft(it.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new pi(it.paint_symbol["symbol-z-offset"])}))},y3);class y_ extends Yo{constructor(i,a,h,g){super(i,v3(),a,h,g),this._colorAdjustmentMatrix=Te.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=i.paint!==void 0&&("icon-occlusion-opacity"in i.paint||"text-occlusion-opacity"in i.paint)}recalculate(i,a){super.recalculate(i,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const f of h)g.indexOf(f)<0&&g.push(f);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(i,a,h,g){return this._saturation===i&&this._contrast===a&&this._brightnessMin===h&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(f,_,w,C){f=ce(f),_=oe(_);const z=Te.mat4.create(),x=f/3,T=1-2*x,I=[T,x,x,0,x,T,x,0,x,x,T,0,0,0,0,1],E=.5-.5*_,A=C-w;return Te.mat4.multiply(z,[A,0,0,0,0,A,0,0,0,0,A,0,w,w,w,1],[_,0,0,0,0,_,0,0,0,0,_,0,E,E,E,1]),Te.mat4.multiply(z,z,I),z}(i,a,h,g),this._saturation=i,this._contrast=a,this._brightnessMin=h,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(i,a,h,g){const f=this.layout.get(i).evaluate(a,{},h,g),_=this._unevaluatedLayout._values[i];return _.isDataDriven()||tf(_.value)||!f?f:function(w,C){return C.replace(/{([^{}]+)}/g,(z,x)=>x in w?String(w[x]):"")}(a.properties,f)}createBucket(i){return new __(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of v3().paint.overridableProperties){if(!y_.hasPaintOverride(this.layout,i))continue;const a=this.paint.get(i),h=new Yw(a),g=new wp(h,a.property.specification,this.scope,this.options);let f=null;f=a.value.kind==="constant"||a.value.kind==="source"?new rf("source",g):new Lh("composite",g,a.value.zoomStops,a.value._interpolationType),this.paint._values[i]=new wu(a.property,f,a.parameters)}}_handleOverridablePaintPropertyUpdate(i,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&y_.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,a){const h=i.get("text-field"),g=v3().paint.properties[a];let f=!1;const _=w=>{for(const C of w)if(g.overrides&&g.overrides.hasOverride(C))return void(f=!0)};if(h.value.kind==="constant"&&h.value.value instanceof no)_(h.value.value.sections);else if(h.value.kind==="source"){const w=z=>{f||(z instanceof os&&dn(z.value)===al?_(z.value.sections):z instanceof Kl?_(z.sections):z.eachChild(w))},C=h.value;C._styleExpression&&w(C._styleExpression.expression)}return f}getProgramIds(){return["symbol"]}getDefaultProgramParams(i,a,h){return{config:new Cl(this,{zoom:a,lut:h}),overrideFog:!1}}}let Jw,Kw,Qw,e8;var x3=dr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function b3(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function w3(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class S3{constructor(i,a,h,g){this.context=i,this.format=h,this.useMipmap=g&&g.useMipmap,this.texture=i.gl.createTexture(),this.update(a,{premultiply:g&&g.premultiply})}update(i,a){const h=i&&i instanceof HTMLVideoElement&&i.width===0?i.videoWidth:i.width,g=i&&i instanceof HTMLVideoElement&&i.height===0?i.videoHeight:i.height,{context:f}=this,{gl:_}=f,{x:w,y:C}=a&&a.position?a.position:{x:0,y:0},z=Math.max(w+h,this.size?this.size[0]:0),x=Math.max(C+g,this.size?this.size[1]:0);!this.size||this.size[0]===z&&this.size[1]===x||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!a||a.premultiply!==!1));const T=i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||ImageBitmap&&i instanceof ImageBitmap;if(!this.size&&z>0&&x>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max(z,x)))+1:1;_.texStorage2D(_.TEXTURE_2D,I,this.format,z,x),this.size=[z,x]}if(this.size)if(T)_.texSubImage2D(_.TEXTURE_2D,0,w,C,b3(this.format),w3(this.format),i);else{const I=i.data;I&&_.texSubImage2D(_.TEXTURE_2D,0,w,C,h,g,b3(this.format),w3(this.format),I)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(i,a,h=!1){const{context:g}=this,{gl:f}=g;f.bindTexture(f.TEXTURE_2D,this.texture),i!==this.minFilter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap&&!h?i===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),a!==this.wrapS&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a),this.wrapS=a)}bindExtraParam(i,a,h,g){const{context:f}=this,{gl:_}=f;_.bindTexture(_.TEXTURE_2D,this.texture),a!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,a),this.magFilter=a),i!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?i===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),h!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,h),this.wrapS=h),g!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class v_{constructor(i,a){this.context=i,this.texture=a}bind(i,a){const{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),i!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,i),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,i),this.minFilter=i),a!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,a),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,a),this.wrapS=a)}}function x_(u,i,a,h,g,f,_,w){const C=[u,i,1,a,h,1,g,f,1],z=[_,w,1],x=Te.mat3.adjoint([],C),[T,I,E]=Te.vec3.transformMat3(z,z,x);return Te.mat3.multiply(C,C,[T,0,0,0,I,0,0,0,E])}function t8(u,i,a,h,g,f,_,w){const C=function(z,x,T,I,E,A,k,B){const $=x_(0,0,1,0,1,1,0,1),H=x_(z,x,T,I,E,A,k,B),G=Te.mat3.adjoint([],$);return Te.mat3.multiply(H,H,G)}(u,i,a,h,g,f,_,w);return[C[2]/C[8]/qt,C[5]/C[8]/qt]}function b_(u){return[u[0],Math.min(Math.max(u[1],-be),be)]}class i8 extends Jt{constructor(i,a,h,g){super(),this.id=i,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=a,this._dirty=!1}load(i,a){if(this._loaded=a||!1,this.fire(new qe("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return i&&(this.coordinates=i),this._loaded=!0,void this._finishLoading();this._imageRequest=Ts(this.map._requestManager.transformRequest(this.url,nl.Image),(h,g)=>{this._imageRequest=null,this._loaded=!0,h?this.fire(new nt(h)):g&&(this.image=g instanceof HTMLImageElement?Zt.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}setTexture(i){if(!(i.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new v_(this.map.painter.context,i.handle),this.width=i.dimensions[0],this.height=i.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new qe("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(i){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof v_||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(i){if(this.coordinates=i,this._boundsArray=void 0,this._unsupportedCoords=!1,!i.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let a=i[0][1],h=i[0][1];for(const f of i)f[1]>h&&(h=f[1]),f[1]<a&&(a=f[1]);const g=(h+a)/2;if(g>be?this.onNorthPole=!0:g<-be&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const f=i.map($e.fromLngLat);this.tileID=function(_){let w=1/0,C=1/0,z=-1/0,x=-1/0;for(const k of _)w=Math.min(w,k.x),C=Math.min(C,k.y),z=Math.max(z,k.x),x=Math.max(x,k.y);const T=Math.max(z-w,x-C),I=Math.max(0,Math.floor(-Math.log(T)/Math.LN2)),E=Math.pow(2,I);let A=Math.floor((w+z)/2*E);return A>1&&(A-=1),new Hn(I,A,Math.floor((C+x)/2*E))}(f),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new qe("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(i){for(const $ in this.tiles){const H=this.tiles[$];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const a=m0(new Hn(0,0,0),this.map.transform.projection),h=[a.projection.project(this.coordinates[0][0],this.coordinates[0][1]),a.projection.project(this.coordinates[1][0],this.coordinates[1][1]),a.projection.project(this.coordinates[2][0],this.coordinates[2][1]),a.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function($){const H=$[1].x-$[0].x,G=$[1].y-$[0].y,U=$[2].x-$[1].x,Y=$[2].y-$[1].y,Q=$[3].x-$[2].x,se=$[3].y-$[2].y,xe=$[0].x-$[3].x,pe=$[0].y-$[3].y,ge=H*Y-U*G,Pe=U*se-Q*Y,me=Q*pe-xe*se,Ie=xe*G-H*pe;return ge>0&&Pe>0&&me>0&&Ie>0||ge<0&&Pe<0&&me<0&&Ie<0}(h))return void(this._unsupportedCoords=!0);const g=m0(this.tileID,this.map.transform.projection),[f,_,w,C]=this.coordinates.map($=>{const H=g.projection.project($[0],$[1]);return Uw(g,H)._round()});this.perspectiveTransform=t8(f.x,f.y,_.x,_.y,w.x,w.y,C.x,C.y);const z=this._boundsArray=new Eu;z.emplaceBack(f.x,f.y,0,0),z.emplaceBack(_.x,_.y,qt,0),z.emplaceBack(C.x,C.y,0,qt),z.emplaceBack(w.x,w.y,qt,qt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=i.createVertexBuffer(z,x3.members),this.boundsSegments=yn.simpleSegment(0,0,4,2);const x=[],T=[b_((I=this.coordinates)[0]),b_(I[1]),b_(I[2]),b_(I[3])];var I;const[E,A,k,B]=function($){let H=$[0][0],G=H,U=$[0][1],Y=U;for(let Q=1;Q<$.length;Q++)$[Q][0]<H?H=$[Q][0]:$[Q][0]>G&&(G=$[Q][0]),$[Q][1]<U?U=$[Q][1]:$[Q][1]>Y&&(Y=$[Q][1]);return[H,U,G-H,Y-U]}(T);{const $=new Eu,[H,G,U,Y]=function(et){let rt=et[0].x,Ye=rt,_t=et[0].y,zt=_t;for(let ht=1;ht<et.length;ht++)et[ht].x<rt?rt=et[ht].x:et[ht].x>Ye&&(Ye=et[ht].x),et[ht].y<_t?_t=et[ht].y:et[ht].y>zt&&(zt=et[ht].y);return[rt,_t,Ye-rt,zt-_t]}(h),Q=et=>[(et.x-H)/U,(et.y-G)/Y],[se,xe,pe,ge]=h.map(Q),Pe=function(et,rt,Ye,_t,zt,ht,ei,Vt){const Bt=x_(0,0,1,0,1,1,0,1),Ct=x_(et,rt,Ye,_t,zt,ht,ei,Vt),yi=Te.mat3.adjoint([],Ct);return Te.mat3.multiply(Bt,Bt,yi)}(se[0],se[1],xe[0],xe[1],pe[0],pe[1],ge[0],ge[1]);this.elevatedGlobePerspectiveTransform=t8(se[0],se[1],xe[0],xe[1],pe[0],pe[1],ge[0],ge[1]);const me=(et,rt)=>{x.push(et.lng);const Ye=Math.round((et.lng-E)/k*qt),_t=Math.round((et.lat-A)/B*qt),zt=Q(rt),ht=Te.vec3.transformMat3([],[zt[0],zt[1],1],Pe),ei=Math.round(ht[0]/ht[2]*qt),Vt=Math.round(ht[1]/ht[2]*qt);$.emplaceBack(Ye,_t,ei,Vt)},Ie=h[3].x-h[0].x,Fe=h[3].y-h[0].y,Ne=h[2].x-h[1].x,He=h[2].y-h[1].y;for(let et=0;et<65;et++){const rt=et/64,Ye=[h[0].x+rt*Ie,h[0].y+rt*Fe],_t=[h[1].x+rt*Ne,h[1].y+rt*He],zt=_t[0]-Ye[0],ht=_t[1]-Ye[1];for(let ei=0;ei<65;ei++){const Vt=ei/64,Bt={x:Ye[0]+zt*Vt,y:Ye[1]+ht*Vt,z:0};me(a.projection.unproject(Bt.x,Bt.y),Bt)}}this.elevatedGlobeVertexBuffer=i.createVertexBuffer($,x3.members)}{this.maxLongitudeTriangleSize=0;let $=[],H=new rn;const G=(U,Y,Q)=>{H.emplaceBack(U,Y,Q);const se=x[U],xe=x[Y],pe=x[Q],ge=Math.min(Math.min(se,xe),pe),Pe=Math.max(Math.max(se,xe),pe)-ge;Pe>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Pe),$.push(ge+Pe/2)};for(let U=0;U<64;U++)for(let Y=0;Y<64;Y++){const Q=65*U+Y,se=Q+1,xe=Q+65,pe=xe+1;G(Q,xe,se),G(se,xe,pe)}[$,H]=function(U,Y){const Q=Array.from({length:U.length},(pe,ge)=>ge);Q.sort((pe,ge)=>U[pe]-U[ge]);const se=[],xe=new rn;for(let pe=0;pe<Q.length;pe++){const ge=Q[pe];se.push(U[ge]);const Pe=3*ge,me=Pe+1;xe.emplaceBack(Y.uint16[Pe],Y.uint16[me],Y.uint16[me+1])}return[se,xe]}($,H),this.elevatedGlobeTrianglesCenterLongitudes=$,this.elevatedGlobeIndexBuffer=i.createIndexBuffer(H)}this.elevatedGlobeSegments=yn.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,k/qt,0,B/qt,0,0,A,E,0])}prepare(){const i=Object.keys(this.tiles).length!==0;if(this.tileID&&!i)return;const a=this.map.painter.context,h=a.gl;!this._dirty||this.texture instanceof v_||(this.texture?this.texture.update(this.image):(this.texture=new S3(a,this.image,h.RGBA8),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),i&&this._prepareData(a)}loadTile(i,a){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},a(null)):(i.state="errored",a(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(i){const a=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!a)return null;const h=this.elevatedGlobeTrianglesCenterLongitudes;let g=(f=i+180)+360*Math.round((h[0]-f)/360);var f;const _=new yn,w=(T,I)=>{_.segments.push({vertexOffset:0,primitiveOffset:T,vertexLength:a.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},C=.51*this.maxLongitudeTriangleSize;if(Math.abs(h[0]-g)<=C){const T=ut(h,0,h.length,g+C);return T===h.length||w(T,Oc(h,T+1,h.length,g+360-C)-T),_}g<h[0]&&(g+=360);const z=Oc(h,0,h.length,g-C);if(z===h.length)return w(0,h.length),_;w(0,z-0);const x=ut(h,z+1,h.length,g+C);return x!==h.length&&w(x,h.length-x),_}}const XD=(Math.pow(256,2)-1)/16907520;class r8 extends Yo{constructor(i,a,h,g){super(i,{layout:Qw||(Qw=new Hr({visibility:new Ft(it.layout_raster.visibility)})),paint:e8||(e8=new Hr({"raster-opacity":new Ft(it.paint_raster["raster-opacity"]),"raster-color":new Mu(it.paint_raster["raster-color"]),"raster-color-mix":new Ft(it.paint_raster["raster-color-mix"]),"raster-color-range":new Ft(it.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ft(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ft(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ft(it.paint_raster["raster-brightness-max"]),"raster-saturation":new Ft(it.paint_raster["raster-saturation"]),"raster-contrast":new Ft(it.paint_raster["raster-contrast"]),"raster-resampling":new Ft(it.paint_raster["raster-resampling"]),"raster-fade-duration":new Ft(it.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ft(it.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ft(it.paint_raster["raster-array-band"]),"raster-elevation":new Ft(it.paint_raster["raster-elevation"])}))},a,h,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(i){return!(i&&i._source instanceof i8&&(i._source.onNorthPole||i._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(i){i!=="raster-color"&&i!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(i){if(!this.hasColorMap()||!this._curRampRange)return;const a=this._transitionablePaint._values["raster-color"].value.expression,[h,g]=i||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(h)&&isNaN(g)||h===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=e0({expression:a,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:h,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[h,g])}}let n8,o8,s8,a8,l8;class c8 extends Yo{constructor(i,a,h,g){super(i,{layout:n8||(n8=new Hr({visibility:new Ft(it["layout_raster-particle"].visibility)})),paint:o8||(o8=new Hr({"raster-particle-array-band":new Ft(it["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Ft(it["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Mu(it["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Ft(it["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Ft(it["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Ft(it["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Ft(it["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Ft(it["paint_raster-particle"]["raster-particle-elevation"])}))},a,h,g),this._updateColorRamp(),this.lastInvalidatedAt=Zt.now()}onRemove(i){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(i){return!1}_handleSpecialPaintPropertyUpdate(i){i!=="raster-particle-color"&&i!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),i==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const i=this._transitionablePaint._values["raster-particle-color"].value.expression,a=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=e0({expression:i,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:a}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Zt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class YD extends Yo{constructor(i,a){super(i,{},a,null),this.implementation=i,i.slot&&(this.slot=i.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(i){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}function M3(u,i,a){const h=[0,0,1],g=Te.quat.identity([]);return Te.quat.rotateY(g,g,a?-Oi(u)+Math.PI:Oi(u)),Te.quat.rotateX(g,g,-Oi(i)),Te.vec3.transformQuat(h,h,g),Te.vec3.normalize(h,h)}function u8(u,i){const a=w_(u.projection,u.zoom,u.width,u.height),h=function(f,_,w,C,z){const x=new O(w.lng-180*ju,w.lat),T=new O(w.lng+180*ju,w.lat),I=f.project(x.lng,x.lat),E=f.project(T.lng,T.lat),A=-Math.atan2(E.y-I.y,E.x-I.x),k=$e.fromLngLat(w);k.y=Ot(k.y,-1+ju,1-ju);const B=k.toLngLat(),$=f.project(B.lng,B.lat),H=$e.fromLngLat(B);H.x+=ju;const G=H.toLngLat(),U=f.project(G.lng,G.lat),Y=d8(U.x-$.x,U.y-$.y,A),Q=$e.fromLngLat(B);Q.y+=ju;const se=Q.toLngLat(),xe=f.project(se.lng,se.lat),pe=d8(xe.x-$.x,xe.y-$.y,A),ge=Math.abs(Y.x)/Math.abs(pe.y),Pe=Te.mat4.identity([]);Te.mat4.rotateZ(Pe,Pe,-A*(1-(z?0:C)));const me=Te.mat4.identity([]);return Te.mat4.scale(me,me,[1,1-(1-ge)*C,1]),me[4]=-pe.x/pe.y*C,Te.mat4.rotateZ(me,me,A),Te.mat4.multiply(me,Pe,me),me}(u.projection,0,u.center,a,i),g=h8(u);return Te.mat4.scale(h,h,[g,g,1]),h}function h8(u){const i=u.projection,a=w_(u.projection,u.zoom,u.width,u.height),h=E3(i,u.center),g=E3(i,O.convert(i.center));return Math.pow(2,h*a+(1-a)*g)}function w_(u,i,a,h,g=1/0){const f=u.range;if(!f)return 0;const _=Math.min(g,Math.max(a,h)),w=Math.log(_/1024)/Math.LN2;return sr(f[0]+w,f[1]+w,i)}const ju=1/4e4;function E3(u,i){const a=Ot(i.lat,-be,be),h=new O(i.lng-180*ju,a),g=new O(i.lng+180*ju,a),f=u.project(h.lng,a),_=u.project(g.lng,a),w=$e.fromLngLat(h),C=$e.fromLngLat(g),z=_.x-f.x,x=_.y-f.y,T=C.x-w.x,I=C.y-w.y,E=Math.sqrt((T*T+I*I)/(z*z+x*x));return Math.log(E)/Math.LN2}function d8(u,i,a){const h=Math.cos(a),g=Math.sin(a);return{x:u*h-i*g,y:u*g+i*h}}function f8(u,i,a){Te.mat4.identity(u),Te.mat4.rotateZ(u,u,Oi(i[2])),Te.mat4.rotateX(u,u,Oi(i[0])),Te.mat4.rotateY(u,u,Oi(i[1])),Te.mat4.scale(u,u,a),Te.mat4.multiply(u,u,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function S_(u,i,a,h,g,f,_,w){const C=[a[0]-i[0],a[1]-i[1],0],z=[h[0]-i[0],h[1]-i[1],0];if(Te.vec3.length(C)<1e-12||Te.vec3.length(z)<1e-12)return Te.quat.identity(u);const x=Te.vec3.cross([],C,z);Te.vec3.normalize(x,x),Te.vec3.subtract(z,h,i),C[2]=(f-g)*w,z[2]=(_-g)*w;const T=C;return Te.vec3.cross(T,C,z),Te.vec3.normalize(T,T),Te.quat.rotationTo(u,x,T)}function T3(u,i,a=!1){const h=Lu(i.zoom),g=function(f,_,w){const C=_.worldSize,z=[f[12],f[13],f[14]],x=ye(z[1]/C),T=ue(z[0]/C),I=Te.mat4.identity([]),E=re(1,x)*C,A=re(1,0)*C*we(x,_.zoom),k=1/Nv(C);let B=A*k;if(w){const U=w_(_.projection,_.zoom,_.width,_.height,1024);B=k*_.projection.pixelSpaceConversion(_.center.lat,C,U)}const $=D(x,T);Te.vec3.add($,$,Te.vec3.scale([],Te.vec3.normalize([],$),E*B*z[2]));const H=function(U){const Y=[U[0],U[1],U[2]];let Q=[0,1,0];const se=Te.vec3.cross([],Q,Y);return Te.vec3.cross(Q,Y,se),Te.vec3.squaredLength(Q)===0&&(Q=[0,1,0],Te.vec3.cross(se,Y,Q)),Te.vec3.normalize(se,se),Te.vec3.normalize(Q,Q),Te.vec3.normalize(Y,Y),[se[0],se[1],se[2],0,Q[0],Q[1],Q[2],0,Y[0],Y[1],Y[2],0,U[0],U[1],U[2],1]}($);Te.mat4.scale(I,I,[B,B,B*E]),Te.mat4.translate(I,I,[-z[0],-z[1],-z[2]]);const G=Te.mat4.multiply([],_.globeMatrix,H);return Te.mat4.multiply(G,G,I),Te.mat4.multiply(G,G,f),G}(u,i,a);if(h>0){const f=function(_,w){const C=w.worldSize,z=re(1,0)*C*we(w.center.lat,w.zoom)/Nv(C),x=re(1,w.center.lat)*C,T=Te.mat4.identity([]);return Te.mat4.rotateY(T,T,Oi(w.center.lng)),Te.mat4.rotateX(T,T,Oi(w.center.lat)),Te.mat4.translate(T,T,[0,0,So]),Te.mat4.scale(T,T,[z,z,z*x]),Te.mat4.translate(T,T,[w.point.x-.5*C,w.point.y-.5*C,0]),Te.mat4.multiply(T,T,_),Te.mat4.multiply(T,w.globeMatrix,T)}(u,i);return function(_,w,C){const z=(A,k,B)=>{const $=Te.vec3.length(A),H=Te.vec3.length(k),G=Wc(A,k,B);return Te.vec3.scale(G,G,1/Te.vec3.length(G)*ai($,H,B))},x=z([_[0],_[1],_[2]],[w[0],w[1],w[2]],C),T=z([_[4],_[5],_[6]],[w[4],w[5],w[6]],C),I=z([_[8],_[9],_[10]],[w[8],w[9],w[10]],C),E=Wc([_[12],_[13],_[14]],[w[12],w[13],w[14]],C);return[x[0],x[1],x[2],0,T[0],T[1],T[2],0,I[0],I[1],I[2],0,E[0],E[1],E[2],1]}(g,f,h)}return g}function p8(u,i,a,h){const g=Tr.projectAabbCorners(h,a);let f=Number.MAX_VALUE,_=-1;for(let z=0;z<g.length;++z){const x=g[z];x[0]=(.5*x[0]+.5)*i.width,x[1]=(.5-.5*x[1])*i.height,x[2]<f&&(_=z,f=x[2])}const w=z=>new Pt(g[z][0],g[z][1]);let C;switch(_){case 0:case 6:C=[w(1),w(5),w(4),w(7),w(3),w(2),w(1)];break;case 1:case 7:C=[w(0),w(4),w(5),w(6),w(2),w(3),w(0)];break;case 3:case 5:C=[w(1),w(0),w(4),w(7),w(6),w(2),w(1)];break;default:C=[w(1),w(5),w(6),w(7),w(3),w(0),w(1)]}if(wt(u,C))return f}const JD=dr([{name:"a_pos_3f",components:3,type:"Float32"}]),KD=dr([{name:"a_color_3f",components:3,type:"Float32"}]),QD=dr([{name:"a_color_4f",components:4,type:"Float32"}]),eP=dr([{name:"a_uv_2f",components:2,type:"Float32"}]),tP=dr([{name:"a_normal_3f",components:3,type:"Float32"}]),iP=dr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),rP=dr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),m8={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class M_{constructor(i,a,h,g){this.message=(i?`${i}: `:"")+h,g&&(this.identifier=g),a!=null&&a.__line__&&(this.line=a.__line__)}}function g8(u,i){const a=u.indexOf("://")===-1;try{return new URL(u,a&&i?"http://example.com":void 0),!0}catch{return!1}}class _8{constructor(i,a){this.feature=i,this.instancedDataOffset=a,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class y8{constructor(){this.instancedDataArray=new Gh,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class C3{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.fqid),this.projection=i.projection,this.index=i.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(i,a){}populate(i,a,h,g){this.tileToMeter=ke(h);const f=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:w,index:C,sourceLayerIndex:z}of i){const x=w??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),T=St(_,f);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),T,h))continue;const I={id:x,sourceLayerIndex:z,index:C,geometry:f?T.geometry:Xe(_,h,g),properties:_.properties,type:_.type,patterns:{}},E=this.addFeature(I,I.geometry,T);E&&a.featureIndex.insert(_,I.geometry,C,z,this.index,this.instancesPerModel[E].instancedDataArray.length,qt/32)}this.lookup=null}update(i,a,h,g){for(const f in this.instancesPerModel){const _=this.instancesPerModel[f];for(const w in i)_.idToFeaturesIndex.hasOwnProperty(w)&&(this.evaluate(_.features[_.idToFeaturesIndex[w]],i[w],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let i=!1;for(const a in this.instancesPerModel){const h=this.instancesPerModel[a];for(const g of h.features){const f=this.layers[0],_=g.feature,w=this.canonical,C=f.paint.get("model-rotation").evaluate(_,{},w),z=f.paint.get("model-scale").evaluate(_,{},w),x=f.paint.get("model-translation").evaluate(_,{},w);Te.vec3.exactEquals(g.rotation,C)&&Te.vec3.exactEquals(g.scale,z)&&Te.vec3.exactEquals(g.translation,x)||(this.evaluate(g,g.featureStates,h,!0),i=!0)}}return i}updateReplacement(i,a,h,g){if(a.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=a.updateTime;const f=a.getReplacementRegionsForTile(i.toUnwrapped(),!0);if(Kv(this.activeReplacements,f))return!1;this.activeReplacements=f;let _=!1;for(const w in this.instancesPerModel){const C=this.instancesPerModel[w],z=C.instancedDataArray;for(const x of C.features){const T=x.instancedDataOffset,I=x.instancedDataCount;for(let E=0;E<I;E++){const A=16*(E+T);let k=z.float32[A+0];const B=k>qt;k=B?k-qt:k;const $=Math.floor(k),H=z.float32[A+1];let G=!1;for(const U of this.activeReplacements)if(!k5(U,h,m8.Model,g)&&!(U.min.x>$||$>U.max.x||U.min.y>H||H>U.max.y)&&(G=N5(F5($,H,i.canonical,U.footprintTileId.canonical),U.footprint),G))break;z.float32[A]=G?k+qt:k,_=_||G!==B}}}return _}isEmpty(){for(const i in this.instancesPerModel)if(this.instancesPerModel[i].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(i){if(!this.uploaded)for(const a in this.instancesPerModel){const h=this.instancesPerModel[a];h.instancedDataArray.length<0||h.instancedDataArray.length===0||(h.instancedDataBuffer?h.instancedDataBuffer.updateData(h.instancedDataArray):h.instancedDataBuffer=i.createVertexBuffer(h.instancedDataArray,iP.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const a in this.instancesPerModel){const h=this.instancesPerModel[a];h.instancedDataArray.length!==0&&h.instancedDataBuffer&&h.instancedDataBuffer.destroy()}const i=this.layers[0].modelManager;if(i&&this.modelUris)for(const a of this.modelUris)i.removeModel(a,"")}addFeature(i,a,h){const g=this.layers[0],f=g.layout.get("model-id").evaluate(h,{},this.canonical);if(!f)return Yi(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),f;g8(f,!1)&&(this.modelUris.includes(f)||this.modelUris.push(f)),this.instancesPerModel[f]||(this.instancesPerModel[f]=new y8);const _=this.instancesPerModel[f],w=_.instancedDataArray,C=new _8(h,w.length);for(const z of a)for(const x of z){if(x.x<0||x.x>=qt||x.y<0||x.y>=qt)continue;const T=(this.lookupDim-1)/qt,I=this.lookupDim*(x.y*T|0)+x.x*T|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const E=w.length;w.resize(E+1),_.instancesEvaluatedElevation.push(0),w.float32[16*E]=x.x,w.float32[16*E+1]=x.y}return C.instancedDataCount=_.instancedDataArray.length-C.instancedDataOffset,C.instancedDataCount>0&&(i.id&&(_.idToFeaturesIndex[i.id]=_.features.length),_.features.push(C),this.evaluate(C,{},_,!1)),f}getModelUris(){return this.modelUris}evaluate(i,a,h,g){const f=this.layers[0],_=i.feature,w=this.canonical,C=i.rotation=f.paint.get("model-rotation").evaluate(_,a,w),z=i.scale=f.paint.get("model-scale").evaluate(_,a,w),x=i.translation=f.paint.get("model-translation").evaluate(_,a,w),T=f.paint.get("model-color").evaluate(_,a,w);T.a=f.paint.get("model-color-mix-intensity").evaluate(_,a,w);const I=[];this.maxVerticalOffset<x[2]&&(this.maxVerticalOffset=x[2]),this.maxScale=Math.max(Math.max(this.maxScale,z[0]),Math.max(z[1],z[2])),f8(I,C,z);const E=Math.round(100*T.a)+T.b/1.05;for(let A=0;A<i.instancedDataCount;++A){const k=i.instancedDataOffset+A,B=16*k,$=h.instancedDataArray.float32;let H=0;g&&(H=$[B+6]-h.instancesEvaluatedElevation[k]);const G=0|$[B+1];$[B]=(0|$[B])+T.r/1.05,$[B+1]=G+T.g/1.05,$[B+2]=E,$[B+3]=1/(w.z>10?this.tileToMeter:ke(w,G)),$[B+4]=x[0],$[B+5]=x[1],$[B+6]=x[2]+H,$[B+7]=I[0],$[B+8]=I[1],$[B+9]=I[2],$[B+10]=I[4],$[B+11]=I[5],$[B+12]=I[6],$[B+13]=I[8],$[B+14]=I[9],$[B+15]=I[10],h.instancesEvaluatedElevation[k]=x[2]}}}let v8,x8;ti(C3,"ModelBucket",{omit:["layers"]}),ti(y8,"PerModelAttributes"),ti(_8,"ModelFeature");const ed=64,Pf={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function b8(u,i,a,h,g,f,_,w,C,z=!1){const x=a.zoom,T=a.project(h),I=we(h.lat,x),E=1/I;Te.mat4.identity(u),Te.mat4.translate(u,u,[T.x+_[0]*E,T.y+_[1]*E,_[2]]);let A=1,k=1;const B=a.worldSize;if(z){if(a.projection.name==="mercator"){let U=0;a.elevation&&(U=a.elevation.getAtPointOrZero(new $e(T.x/B,T.y/B),0));const Y=Te.vec4.transformMat4([],[T.x,T.y,U,1],a.projMatrix)[3]/a.cameraToCenterDistance;A=Y,k=Y*we(a.center.lat,x)}else if(a.projection.name==="globe"){const U=T3(u,a),Y=Te.mat4.multiply([],a.projMatrix,U),Q=[0,0,0,1];Te.vec4.transformMat4(Q,Q,Y);const se=Q[3]/a.cameraToCenterDistance,xe=Lu(x),pe=a.projection.pixelsPerMeter(h.lat,B)*we(h.lat,x),ge=a.projection.pixelsPerMeter(a.center.lat,B)*we(a.center.lat,x);A=se/ai(pe,Me(a.center.lat),xe),k=se*I/pe,A*=ge,k*=ge}}else A=E;Te.mat4.scale(u,u,[A,A,k]);const $=[...u],H=i.orientation,G=[];if(f8(G,[H[0]+g[0],H[1]+g[1],H[2]+g[2]],f),Te.mat4.multiply(u,$,G),w&&a.elevation){let U=0;const Y=[];if(C&&a.elevation){U=function(xe,pe,ge,Pe,me){const Ie=pe.elevation;if(!Ie)return 0;const Fe=Tr.projectAabbCorners(ge,Pe),Ne=re(1,me.lat)*pe.worldSize,He=function(yi,Kt){const ri=[0,0,1],Pi=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Ni of Pi){const $i=yi[Ni.corners[0]],Li=yi[Ni.corners[1]],Zi=yi[Ni.corners[2]],Hi=[Li[0]-$i[0],Li[1]-$i[1],Kt*(Li[2]-$i[2])],Or=Te.vec3.cross(Hi,Hi,[Zi[0]-$i[0],Zi[1]-$i[1],Kt*(Zi[2]-$i[2])]);Te.vec3.normalize(Or,Or),Ni.dotProductWithUp=Te.vec3.dot(Or,ri)}return Pi.sort((Ni,$i)=>Ni.dotProductWithUp-$i.dotProductWithUp),Pi[0].corners}(Fe,Ne),et=Fe[He[0]],rt=Fe[He[1]],Ye=Fe[He[2]],_t=Fe[He[3]],zt=Ie.getAtPointOrZero(new $e(et[0]/pe.worldSize,et[1]/pe.worldSize),0),ht=Ie.getAtPointOrZero(new $e(rt[0]/pe.worldSize,rt[1]/pe.worldSize),0),ei=Ie.getAtPointOrZero(new $e(Ye[0]/pe.worldSize,Ye[1]/pe.worldSize),0),Vt=Ie.getAtPointOrZero(new $e(_t[0]/pe.worldSize,_t[1]/pe.worldSize),0),Bt=(zt+Vt)/2,Ct=(ht+ei)/2;return Bt>Ct?ht<ei?S_(xe,rt,_t,et,ht,Vt,zt,Ne):S_(xe,Ye,et,_t,ei,zt,Vt,Ne):zt<Vt?S_(xe,et,rt,Ye,zt,ht,ei,Ne):S_(xe,_t,Ye,rt,Vt,ei,ht,Ne),Math.max(Bt,Ct)}(Y,a,i.aabb,u,h);const Q=Te.mat4.fromQuat([],Y),se=Te.mat4.multiply([],Q,G);Te.mat4.multiply(u,$,se)}else U=a.elevation.getAtPointOrZero(new $e(T.x/B,T.y/B),0);U!==0&&(u[14]+=U)}}function x0(u,i,a=!1){u.uploaded||(u.gfxTexture=new S3(i,u.image,a?i.gl.R8:i.gl.RGBA8,{useMipmap:u.sampler.minFilter>=i.gl.NEAREST_MIPMAP_NEAREST}),u.uploaded=!0,u.image=null)}function nP(u,i,a){u.indexBuffer=i.createIndexBuffer(u.indexArray,!1,!0),u.vertexBuffer=i.createVertexBuffer(u.vertexArray,JD.members,!1,!0),u.normalArray&&(u.normalBuffer=i.createVertexBuffer(u.normalArray,tP.members,!1,!0)),u.texcoordArray&&(u.texcoordBuffer=i.createVertexBuffer(u.texcoordArray,eP.members,!1,!0)),u.colorArray&&(u.colorBuffer=i.createVertexBuffer(u.colorArray,(u.colorArray.bytesPerElement===12?KD:QD).members,!1,!0)),u.featureArray&&(u.pbrBuffer=i.createVertexBuffer(u.featureArray,rP.members,!0)),u.segments=yn.simpleSegment(0,0,u.vertexArray.length,u.indexArray.length);const h=u.material;h.pbrMetallicRoughness.baseColorTexture&&x0(h.pbrMetallicRoughness.baseColorTexture,i),h.pbrMetallicRoughness.metallicRoughnessTexture&&x0(h.pbrMetallicRoughness.metallicRoughnessTexture,i),h.normalTexture&&x0(h.normalTexture,i),h.occlusionTexture&&x0(h.occlusionTexture,i,a),h.emissionTexture&&x0(h.emissionTexture,i)}function A3(u,i,a){if(u.meshes)for(const h of u.meshes)nP(h,i,a);if(u.children)for(const h of u.children)A3(h,i,a)}function E_(u){if(u.meshes)for(const i of u.meshes)i.indexArray.destroy(),i.vertexArray.destroy(),i.colorArray&&i.colorArray.destroy(),i.normalArray&&i.normalArray.destroy(),i.texcoordArray&&i.texcoordArray.destroy(),i.featureArray&&i.featureArray.destroy();if(u.children)for(const i of u.children)E_(i)}function I3(u){if(u.meshes)for(const a of u.meshes)a.vertexBuffer&&(a.vertexBuffer.destroy(),a.indexBuffer.destroy(),a.normalBuffer&&a.normalBuffer.destroy(),a.texcoordBuffer&&a.texcoordBuffer.destroy(),a.colorBuffer&&a.colorBuffer.destroy(),a.pbrBuffer&&a.pbrBuffer.destroy(),a.segments.destroy(),a.material&&((i=a.material).pbrMetallicRoughness.baseColorTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),i.pbrMetallicRoughness.metallicRoughnessTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),i.normalTexture&&i.normalTexture.gfxTexture&&i.normalTexture.gfxTexture.destroy(),i.emissionTexture&&i.emissionTexture.gfxTexture&&i.emissionTexture.gfxTexture.destroy(),i.occlusionTexture&&i.occlusionTexture.gfxTexture&&i.occlusionTexture.gfxTexture.destroy()));var i;if(u.children)for(const a of u.children)I3(a)}class kf{constructor(i,a,h){this._demTile=i,this._dem=this._demTile.dem,this._scale=a,this._offset=h}static create(i,a,h){const g=h||i.findDEMTileFor(a);if(!g||!g.dem)return;const f=g.dem,_=g.tileID,w=1<<a.canonical.z-_.canonical.z;return new kf(g,f.dim/qt/w,[(a.canonical.x/w-_.canonical.x)*f.dim,(a.canonical.y/w-_.canonical.y)*f.dim])}tileCoordToPixel(i,a){const h=a*this._scale+this._offset[1],g=Math.floor(i*this._scale+this._offset[0]),f=Math.floor(h);return new Pt(g,f)}getElevationAt(i,a,h,g){const f=i*this._scale+this._offset[0],_=a*this._scale+this._offset[1],w=Math.floor(f),C=Math.floor(_),z=this._dem;return g=!!g,h?ai(ai(z.get(w,C,g),z.get(w,C+1,g),_-C),ai(z.get(w+1,C,g),z.get(w+1,C+1,g),_-C),f-w):z.get(w,C,g)}getElevationAtPixel(i,a,h){return this._dem.get(i,a,!!h)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*re(1,i)*this._dem.stride}}const z3=new Float32Array(262144),td=new Uint8Array(262144);function w8(u){let i=0;if(u.meshes)for(const a of u.meshes)i=Math.max(i,a.aabb.max[2]);if(u.children)for(const a of u.children)i=Math.max(i,w8(a));return i}function S8(u,i,a){if(u.meshes)for(const h of u.meshes){if(h.aabb.min[0]===1/0)continue;const g=Tr.applyTransform(h.aabb,u.matrix);a.insert(i,g.min[0],g.min[1],g.max[0],g.max[1])}if(u.children)for(const h of u.children)S8(h,i,a)}const M8=["","wall","door","roof","window","lamp","logo"];class E8{constructor(i){this.node=i,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:i.id,geometry:[],properties:{height:w8(i)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new Tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let i=0;const a=new Tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const h of this.node.meshes)this.node.lightMeshIndex!==i&&(h.transformedAabb=Tr.applyTransformFast(h.aabb,this.node.matrix),a.encapsulate(h.transformedAabb)),i++;this.aabb=a}return this.aabb}}class T_{constructor(i,a,h,g,f,_,w){this.id=h,this.layers=i,this.layerIds=this.layers.map(C=>C.fqid),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.modelTraits|=Pf.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=Pf.HasMapboxMeshFeatures),f&&(this.modelTraits|=Pf.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=_,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const C of a)this.nodesInfo.push(new E8(C)),S8(C,w.featureIndexArray.length,w.grid),w.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,w.bucketLayerIDs.length-1,0)}updateFootprints(i,a){for(const h of this.getNodesInfo()){const g=h.node;g.footprint&&a.push({footprint:g.footprint,id:i})}}update(i){const a=Object.keys(i).length!==0;if(a&&!this.stateDependentLayers.length)return;const h=a?this.stateDependentLayers:this.layers;for(const g of h)this.evaluate(g,i)}populate(){}uploadPending(){return!this.uploaded||this.needsUpload}upload(i){if(!this.needsUpload)return;const a=this.getNodesInfo();for(const h of a){const g=h.node;this.uploaded?this.updatePbrBuffer(g):A3(g,i,!0)}for(const h of a)E_(h.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(i){let a=!1;if(!i.meshes)return a;for(const h of i.meshes)h.pbrBuffer&&(h.pbrBuffer.updateData(h.featureArray),a=!0);return a}needsReEvaluation(i,a,h){const g=i.transform.projectionOptions,f=i.style.getBrightness(),_=this.brightness!==f;return!!(!this.uploaded||this.dirty||g.name!==this.projection.name||b0(h.paint.get("model-color").value,_)||b0(h.paint.get("model-color-mix-intensity").value,_)||b0(h.paint.get("model-roughness").value,_)||b0(h.paint.get("model-emissive-strength").value,_)||b0(h.paint.get("model-height-based-emissive-strength-multiplier").value,_))&&(this.projection=g,this.brightness=f,!0)}evaluateScale(i,a){if(i.transform.zoom===this.zoom)return;this.zoom=i.transform.zoom;const h=this.getNodesInfo(),g=this.id.canonical;for(const f of h){const _=f.feature;f.evaluatedScale=a.paint.get("model-scale").evaluate(_,{},g)}}evaluate(i,a){const h=this.getNodesInfo();for(const g of h){if(!g.node.meshes)continue;const f=g.feature,_=a&&a[f.id],w=g.node.meshes&&g.node.meshes[0].featureData,C=g.evaluatedColor[2],z=g.evaluatedRMEA[2],x=this.id.canonical;if(g.hasTranslucentParts=!1,w){for(let T=0;T<M8.length;T++){const I=M8[T];I.length&&(f.properties.part=I);const E=i.paint.get("model-color").evaluate(f,_,x).toRenderColor(null),A=i.paint.get("model-color-mix-intensity").evaluate(f,_,x);g.evaluatedColor[T]=[E.r,E.g,E.b,A],g.evaluatedRMEA[T][0]=i.paint.get("model-roughness").evaluate(f,_,x),g.evaluatedRMEA[T][2]=i.paint.get("model-emissive-strength").evaluate(f,_,x),g.evaluatedRMEA[T][3]=E.a,g.emissionHeightBasedParams[T]=i.paint.get("model-height-based-emissive-strength-multiplier").evaluate(f,_,x),!g.hasTranslucentParts&&E.a<1&&(g.hasTranslucentParts=!0)}delete f.properties.part,sP(g,C!==g.evaluatedColor[2]||z!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=i.paint.get("model-emissive-strength").evaluate(f,_,x);g.evaluatedScale=i.paint.get("model-scale").evaluate(f,_,x),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(i,a,h,g){const f=i.findDEMTileFor(h);if(f&&(f.tileID.canonical!==this.terrainTile||a!==this.terrainExaggeration)){if(f.dem&&f.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=f.tileID.overscaledZ;const _=kf.create(i,h,f);if(!_)return;this.modelTraits&Pf.HasMapboxMeshFeatures&&this.updateDEM(i,_,h,g);for(const w of this.getNodesInfo()){const C=w.node;if(!C.footprint||!C.footprint.vertices||!C.footprint.vertices.length)continue;const z=C.footprint.vertices;let x=_.getElevationAt(z[0].x,z[0].y,!0,!0);for(let T=1;T<z.length;T++)x=Math.min(x,_.getElevationAt(z[T].x,z[T].y,!0,!0));C.elevation=x}}this.terrainTile=f.tileID.canonical,this.terrainExaggeration=a}}updateDEM(i,a,h,g){let f=a._dem._modifiedForSources[g];if(f===void 0&&(a._dem._modifiedForSources[g]=[],f=a._dem._modifiedForSources[g]),f.includes(h.canonical))return;const _=a._dem.dim;f.push(h.canonical);let w=!1;for(const C of this.getNodesInfo()){const z=C.node;if(!z.footprint||!z.footprint.grid)continue;const x=z.footprint.grid,T=a.tileCoordToPixel(x.min.x,x.min.y),I=a.tileCoordToPixel(x.max.x,x.max.y),E=Math.min(Math.min(_-I.y,T.x),Math.min(T.y,_-I.x));if(E<0)continue;const A=Ot(E,2,5);let k=Math.max(0,T.x-A),B=Math.max(0,T.y-A),$=Math.min(I.x+A,_-1),H=Math.min(I.y+A,_-1);for(let Q=B;Q<=H;++Q)for(let se=k;se<=$;++se)td[Q*_+se]=255;let G=0,U=0;for(let Q=0;Q<x.cellsY;++Q)for(let se=0;se<x.cellsX;++se){if(!x.cells[Q*x.cellsX+se])continue;const xe=a.tileCoordToPixel(x.min.x+se/x.xScale,x.min.y+Q/x.yScale),pe=a.tileCoordToPixel(x.min.x+(se+1)/x.xScale,x.min.y+(Q+1)/x.yScale);for(let ge=xe.y;ge<=Math.min(pe.y+1,_-1);++ge)for(let Pe=xe.x;Pe<=Math.min(pe.x+1,_-1);++Pe)td[ge*_+Pe]===255&&(td[ge*_+Pe]=0,G+=a.getElevationAtPixel(Pe,ge),U++)}const Y=G/U;k=Math.max(1,T.x-A),B=Math.max(1,T.y-A),$=Math.min(I.x+A,_-2),H=Math.min(I.y+A,_-2),w=!0;for(let Q=B;Q<=H;++Q)for(let se=k;se<=$;++se)td[Q*_+se]===0&&(z3[Q*_+se]=a._dem.set(se,Q,Y));for(let Q=1;Q<A;++Q){k=Math.max(1,T.x-Q),B=Math.max(1,T.y-Q),$=Math.min(I.x+Q,_-2),H=Math.min(I.y+Q,_-2);for(let se=B;se<=H;++se)for(let xe=k;xe<=$;++xe){const pe=se*_+xe;if(td[pe]===255){let ge=0,Pe=0,me=-1,Ie=-1;for(let Fe=-1;Fe<=1;++Fe)for(let Ne=-1;Ne<=1;++Ne){const He=(se+Fe)*_+xe+Ne;if(td[He]>=Q)continue;const et=z3[He],rt=Math.abs(et);rt>Pe&&(ge=et,Pe=rt,me=Ne,Ie=Fe)}if(Pe>.1){const Fe=1-(Q+.5*Math.abs(me*Ie))/A;let Ne=a._dem.get(xe,se)+ge*Fe;const He=a._dem.get(xe+me,se+Ie),et=a._dem.get(xe-me,se-Ie,!0);(Ne-He)*(Ne-et)>0&&(Ne=(He+et)/2),z3[pe]=a._dem.set(xe,se,Ne),td[pe]=Q}}}}}w&&(a._demTile.needsDEMTextureUpload=!0,a._dem._timestamp=Zt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const i=this.getNodesInfo();for(const a of i)E_(a.node),I3(a.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(i,a){if(a.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=a.updateTime;const h=a.getReplacementRegionsForTile(i.toUnwrapped()),g=this.getNodesInfo();for(let f=0;f<this.nodesInfo.length;f++){const _=g[f].node;g[f].hiddenByReplacement=!!_.footprint&&!h.find(w=>w.footprint===_.footprint)}}getHeightAtTileCoord(i,a){const h=this.getNodesInfo(),g=[],f=[0,0,0],_=Te.mat4.identity([]);for(let w=0;w<this.nodesInfo.length;w++){const C=h[w],z=C.node.meshes[0],x=z.transformedAabb;if(i<x.min[0]||a<x.min[1]||i>x.max[0]||a>x.max[1])continue;if(C.node.hidden===!0)return{height:1/0,maxHeight:C.feature.properties.height,hidden:!1,verticalScale:C.evaluatedScale[2]};Te.mat4.invert(_,C.node.matrix),f[0]=i,f[1]=a,Te.vec3.transformMat4(f,f,_);const T=(f[0]-z.aabb.min[0])/(z.aabb.max[0]-z.aabb.min[0])*ed|0,I=Math.min(63,(f[1]-z.aabb.min[1])/(z.aabb.max[1]-z.aabb.min[1])*ed|0)*ed+Math.min(63,T),E=z.heightmap[I];if(!(E<0&&C.node.footprint))return C.hiddenByReplacement?void 0:{height:E,maxHeight:C.feature.properties.height,hidden:!1,verticalScale:C.evaluatedScale[2]};if(C.node.footprint.grid.query(new Pt(i,a),new Pt(i,a),g),g.length>0)return{height:void 0,maxHeight:C.feature.properties.height,hidden:C.hiddenByReplacement,verticalScale:C.evaluatedScale[2]}}}}function b0(u,i){return!u.isLightConstant&&i}function oP(u,i,a,h,g,f,_,w){let C=(61440&i|(61440&i)>>4)>>8,z=(3840&i|(3840&i)>>4)>>4,x=240&i|(240&i)>>4;a[3]>0&&(C=ai(C,255*a[0],a[3]),z=ai(z,255*a[1],a[3]),x=ai(x,255*a[2],a[3]));const T=C<<8|z,I=x<<8|Math.floor(255*h[3]),E=function(Q){const se=Ot(Q,0,2);return Math.min(Math.round(.5*se*255),255)}(h[2])<<8|15*h[0]<<4|15*h[1],A=Ot(g[0],0,1),k=Ot(g[1],0,1),B=Ot(g[2],0,1),$=Ot(g[3],0,1);let H,G,U,Y;if(A!==k&&_!==f&&k!==A){const Q=_-f;G=1/(Q*(k-A)),U=-(f+Q*A)/(Q*(k-A));const se=Ot(g[4],-1,1);Y=Math.pow(10,se),H=255*B<<8|255*$}else H=65535,G=0,U=1,Y=1;if(u.emplaceBack(T,I,E,H,G,U,Y),w){const Q=w.length;w.clear();for(let se=0;se<Q;se++)w.emplaceBack(T,I,E,H,G,U,Y)}}function sP(u,i,a){const h=u.node;let g=0;const f=a&Pf.HasMeshoptCompression;for(const _ of h.meshes){if(h.lights&&h.lightMeshIndex===g||!_.featureData)continue;_.featureArray=new _f,_.featureArray.reserve(_.featureData.length);let w=i;for(const C of _.featureData){const z=f?65535&C:C>>16&65535,x=f?C>>16&65535:65535&C,T=(15&x)<8?15&x:0,I=u.evaluatedRMEA[T],E=u.evaluatedColor[T],A=u.emissionHeightBasedParams[T];let k;if(w&&T===2&&h.lights&&(k=new _f,k.resize(10*h.lights.length)),oP(_.featureArray,z,E,I,A,_.aabb.min[2],_.aabb.max[2],k),k&&w){w=!1;const B=h.meshes[h.lightMeshIndex];B.featureArray=k,B.featureArray._trim()}}_.featureArray._trim(),g++}}ti(T_,"Tiled3dModelBucket",{omit:["layers"]}),ti(E8,"Tiled3dModelFeature");const aP=["id","tile","layer","source","sourceLayer","state"];class w0{constructor(i,a,h,g,f){this.type="Feature",this._vectorTileFeature=i,this._z=a,this._x=h,this._y=g,this.properties=i.properties,this.id=f}clone(){const i=new w0(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(i.state={...this.state}),this.layer&&(i.layer={...this.layer}),this.namespace&&(i.namespace=this.namespace),i}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const a of aP)this[a]!==void 0&&(i[a]=this[a]);return i}}function T8(u,i,a,h){const g=1<<u.z;i.lat=ye((h/qt+u.y)/g),i.lng=ue((a/qt+u.x)/g)}const lP={circle:class extends Yo{constructor(u,i,a,h){super(u,{layout:xr||(xr=new Hr({"circle-sort-key":new pi(it.layout_circle["circle-sort-key"]),visibility:new Ft(it.layout_circle.visibility)})),paint:Yr||(Yr=new Hr({"circle-radius":new pi(it.paint_circle["circle-radius"]),"circle-color":new pi(it.paint_circle["circle-color"]),"circle-blur":new pi(it.paint_circle["circle-blur"]),"circle-opacity":new pi(it.paint_circle["circle-opacity"]),"circle-translate":new Ft(it.paint_circle["circle-translate"]),"circle-translate-anchor":new Ft(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ft(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ft(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pi(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pi(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pi(it.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ft(it.paint_circle["circle-emissive-strength"])}))},i,a,h)}createBucket(u){return new Tt(u)}queryRadius(u){const i=u;return Rr("circle-radius",this,i)+Rr("circle-stroke-width",this,i)+Wi(this.paint.get("circle-translate"))}queryIntersectsFeature(u,i,a,h,g,f,_,w){const C=zr(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),z=this.paint.get("circle-radius").evaluate(i,a)+this.paint.get("circle-stroke-width").evaluate(i,a);return n5(u,h,f,_,w,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",C,z)}getProgramIds(){return["circle"]}getDefaultProgramParams(u,i,a){const h=r5(this);return{config:new Cl(this,{zoom:i,lut:a}),defines:h,overrideFog:!1}}},heatmap:class extends Yo{createBucket(u){return new s5(u)}constructor(u,i,a,h){super(u,{layout:a5||(a5=new Hr({visibility:new Ft(it.layout_heatmap.visibility)})),paint:l5||(l5=new Hr({"heatmap-radius":new pi(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pi(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ft(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Mu(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ft(it.paint_heatmap["heatmap-opacity"])}))},i,a,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=e0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(u){return Rr("heatmap-radius",this,u)}queryIntersectsFeature(u,i,a,h,g,f,_,w){const C=this.paint.get("heatmap-radius").evaluate(i,a);return n5(u,h,f,_,w,!0,!0,new Pt(0,0),C)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(u,i,a){return u==="heatmap"?{config:new Cl(this,{zoom:i,lut:a}),overrideFog:!1}:{}}},hillshade:class extends Yo{constructor(u,i,a,h){super(u,{layout:c5||(c5=new Hr({visibility:new Ft(it.layout_hillshade.visibility)})),paint:u5||(u5=new Hr({"hillshade-illumination-direction":new Ft(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ft(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ft(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ft(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ft(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ft(it.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ft(it.paint_hillshade["hillshade-emissive-strength"])}))},i,a,h)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(u,i,a){return{overrideFog:!1}}},fill:class extends Yo{constructor(u,i,a,h){super(u,{layout:y5||(y5=new Hr({"fill-sort-key":new pi(it.layout_fill["fill-sort-key"]),visibility:new Ft(it.layout_fill.visibility),"fill-elevation-reference":new Ft(it.layout_fill["fill-elevation-reference"])})),paint:v5||(v5=new Hr({"fill-antialias":new Ft(it.paint_fill["fill-antialias"]),"fill-opacity":new pi(it.paint_fill["fill-opacity"]),"fill-color":new pi(it.paint_fill["fill-color"]),"fill-outline-color":new pi(it.paint_fill["fill-outline-color"]),"fill-translate":new Ft(it.paint_fill["fill-translate"]),"fill-translate-anchor":new Ft(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new pi(it.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ft(it.paint_fill["fill-emissive-strength"]),"fill-z-offset":new pi(it.paint_fill["fill-z-offset"])}))},i,a,h)}getProgramIds(){const u=this.paint.get("fill-pattern"),i=u&&u.constantOr(1),a=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getDefaultProgramParams(u,i,a){return{config:new Cl(this,{zoom:i,lut:a}),overrideFog:!1}}recalculate(u,i){super.recalculate(u,i);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Gv(u)}queryRadius(){return Wi(this.paint.get("fill-translate"))}queryIntersectsFeature(u,i,a,h,g,f){return!u.queryGeometry.isAboveHorizon&&ui(Dr(u.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Yo{constructor(u,i,a,h){super(u,{layout:ew||(ew=new Hr({visibility:new Ft(it["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ft(it["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:tw||(tw=new Hr({"fill-extrusion-opacity":new Ft(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pi(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ft(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ft(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new pi(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pi(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pi(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Ft(it["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Ft(it["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Ft(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ft(it["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ft(it["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ft(it["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ft(it["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ft(it["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ft(it["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ft(it["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new pi(it["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new pi(it["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ft(it["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ft(it["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ft(it["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ft(it["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new pi(it["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new pi(it["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Ft(it["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},i,a,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new r_(u)}queryRadius(){return Wi(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(u,i,a,h,g,f,_,w,C){const z=zr(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),x=this.paint.get("fill-extrusion-height").evaluate(i,a),T=this.paint.get("fill-extrusion-base").evaluate(i,a),I=[0,0],E=w&&f.elevation,A=f.elevation?f.elevation.exaggeration():1,k=u.tile.getBucket(this);if(E&&k instanceof r_){const U=k.centroidVertexArray,Y=C+1;Y<U.length&&(I[0]=U.geta_centroid_pos0(Y),I[1]=U.geta_centroid_pos1(Y))}if(I[0]===0&&I[1]===1)return!1;f.projection.name==="globe"&&(h=Q5([h],[new Pt(0,0),new Pt(qt,qt)],u.tileID.canonical).map(U=>U.polygon).flat());const B=E?w:null,[$,H]=function(U,Y,Q,se,xe,pe,ge,Pe,me,Ie,Fe){return U.projection.name==="globe"?function(Ne,He,et,rt,Ye,_t,zt,ht,ei,Vt,Bt){const Ct=[],yi=[],Kt=Ne.projection.upVectorScale(Bt,Ne.center.lat,Ne.worldSize).metersToTile,ri=[0,0,0,1],Pi=[0,0,0,1],Ni=(Li,Zi,Hi,Or)=>{Li[0]=Zi,Li[1]=Hi,Li[2]=Or,Li[3]=1},$i=K5();et>0&&(et+=$i),rt+=$i;for(const Li of He){const Zi=[],Hi=[];for(const Or of Li){const Pr=Or.x+Ye.x,Ci=Or.y+Ye.y,br=Ne.projection.projectTilePoint(Pr,Ci,Bt),Cr=Ne.projection.upVector(Bt,Or.x,Or.y);let Kr=et,Sn=rt;if(zt){const Ln=rw(Pr,Ci,et,rt,zt,ht,ei,Vt);Kr+=Ln.base,Sn+=Ln.top}et!==0?Ni(ri,br.x+Cr[0]*Kt*Kr,br.y+Cr[1]*Kt*Kr,br.z+Cr[2]*Kt*Kr):Ni(ri,br.x,br.y,br.z),Ni(Pi,br.x+Cr[0]*Kt*Sn,br.y+Cr[1]*Kt*Sn,br.z+Cr[2]*Kt*Sn),Te.vec3.transformMat4(ri,ri,_t),Te.vec3.transformMat4(Pi,Pi,_t),Zi.push(new Qh(ri[0],ri[1],ri[2])),Hi.push(new Qh(Pi[0],Pi[1],Pi[2]))}Ct.push(Zi),yi.push(Hi)}return[Ct,yi]}(U,Y,Q,se,xe,pe,ge,Pe,me,Ie,Fe):ge?function(Ne,He,et,rt,Ye,_t,zt,ht,ei){const Vt=[],Bt=[],Ct=[0,0,0,1];for(const yi of Ne){const Kt=[],ri=[];for(const Pi of yi){const Ni=Pi.x+rt.x,$i=Pi.y+rt.y,Li=rw(Ni,$i,He,et,_t,zt,ht,ei);Ct[0]=Ni,Ct[1]=$i,Ct[2]=Li.base,Ct[3]=1,Te.vec4.transformMat4(Ct,Ct,Ye),Ct[3]=Math.max(Ct[3],1e-5);const Zi=new Qh(Ct[0]/Ct[3],Ct[1]/Ct[3],Ct[2]/Ct[3]);Ct[0]=Ni,Ct[1]=$i,Ct[2]=Li.top,Ct[3]=1,Te.vec4.transformMat4(Ct,Ct,Ye),Ct[3]=Math.max(Ct[3],1e-5);const Hi=new Qh(Ct[0]/Ct[3],Ct[1]/Ct[3],Ct[2]/Ct[3]);Kt.push(Zi),ri.push(Hi)}Vt.push(Kt),Bt.push(ri)}return[Vt,Bt]}(Y,Q,se,xe,pe,ge,Pe,me,Ie):function(Ne,He,et,rt,Ye){const _t=[],zt=[],ht=Ye[8]*He,ei=Ye[9]*He,Vt=Ye[10]*He,Bt=Ye[11]*He,Ct=Ye[8]*et,yi=Ye[9]*et,Kt=Ye[10]*et,ri=Ye[11]*et;for(const Pi of Ne){const Ni=[],$i=[];for(const Li of Pi){const Zi=Li.x+rt.x,Hi=Li.y+rt.y,Or=Ye[0]*Zi+Ye[4]*Hi+Ye[12],Pr=Ye[1]*Zi+Ye[5]*Hi+Ye[13],Ci=Ye[2]*Zi+Ye[6]*Hi+Ye[14],br=Ye[3]*Zi+Ye[7]*Hi+Ye[15],Cr=Or+ht,Kr=Pr+ei,Sn=Ci+Vt,Ln=Math.max(br+Bt,1e-5),Mn=Or+Ct,gn=Pr+yi,Tn=Ci+Kt,jn=Math.max(br+ri,1e-5);Ni.push(new Qh(Cr/Ln,Kr/Ln,Sn/Ln)),$i.push(new Qh(Mn/jn,gn/jn,Tn/jn))}_t.push(Ni),zt.push($i)}return[_t,zt]}(Y,Q,se,xe,pe)}(f,h,T,x,z,_,B,I,A,f.center.lat,u.tileID.canonical),G=u.queryGeometry;return function(U,Y,Q){let se=1/0;ui(Q,Y)&&(se=iw(Q,Y[0]));for(let xe=0;xe<Y.length;xe++){const pe=Y[xe],ge=U[xe];for(let Pe=0;Pe<pe.length-1;Pe++){const me=pe[Pe],Ie=[me,pe[Pe+1],ge[Pe+1],ge[Pe],me];wt(Q,Ie)&&(se=Math.min(se,iw(Q,Ie)))}}return se!==1/0&&se}($,H,G.isPointQuery()?G.screenBounds:G.screenGeometry)}},line:class extends Yo{constructor(u,i,a,h){const g=fw();super(u,g,i,a,h),g.layout&&(this.layout=new Su(g.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Ha,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(u,i){super.recalculate(u,i),this.paint._values["line-floorwidth"]=(()=>{if(c0)return c0;const a=fw();return c0=new uD(a.paint.properties["line-width"].specification),c0.useIntegerZoom=!0,c0})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new i3(u)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(u,i,a){const h=hw(this);return{config:new Cl(this,{zoom:i,lut:a}),defines:h,overrideFog:!1}}queryRadius(u){const i=u,a=pw(Rr("line-width",this,i),Rr("line-gap-width",this,i)),h=Rr("line-offset",this,i);return a/2+Math.abs(h)+Wi(this.paint.get("line-translate"))}queryIntersectsFeature(u,i,a,h,g,f){if(u.queryGeometry.isAboveHorizon)return!1;const _=Dr(u.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,u.pixelToTileUnitsFactor),w=u.pixelToTileUnitsFactor/2*pw(this.paint.get("line-width").evaluate(i,a),this.paint.get("line-gap-width").evaluate(i,a)),C=this.paint.get("line-offset").evaluate(i,a);return C&&(h=function(z,x){const T=[],I=new Pt(0,0);for(let E=0;E<z.length;E++){const A=z[E],k=[];for(let B=0;B<A.length;B++){const $=A[B],H=A[B+1],G=B===0?I:$.sub(A[B-1])._unit()._perp(),U=B===A.length-1?I:H.sub($)._unit()._perp(),Y=G._add(U)._unit();Y._mult(1/(Y.x*U.x+Y.y*U.y)),k.push(Y._mult(x)._add($))}T.push(k)}return T}(h,C*u.pixelToTileUnitsFactor)),function(z,x,T){for(let I=0;I<x.length;I++){const E=x[I];if(z.length>=3){for(let A=0;A<E.length;A++)if(tr(z,E[A]))return!0}if(_i(z,E,T))return!0}return!1}(_,h,w)}isTileClipped(){return!0}isDraped(u){const i=this.layout.get("line-z-offset"),a=i.isConstant()&&!i.constantOr(0),h=this.layout.get("line-elevation-reference");return!(h==="sea"||h==="ground")&&(a||h!=="none")}},symbol:y_,background:class extends Yo{constructor(u,i,a,h){super(u,{layout:Jw||(Jw=new Hr({visibility:new Ft(it.layout_background.visibility)})),paint:Kw||(Kw=new Hr({"background-pitch-alignment":new Ft(it.paint_background["background-pitch-alignment"]),"background-color":new Ft(it.paint_background["background-color"]),"background-pattern":new Ft(it.paint_background["background-pattern"]),"background-opacity":new Ft(it.paint_background["background-opacity"]),"background-emissive-strength":new Ft(it.paint_background["background-emissive-strength"])}))},i,a,h)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(u,i,a){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:r8,"raster-particle":c8,sky:class extends Yo{constructor(u,i,a,h){super(u,{layout:s8||(s8=new Hr({visibility:new Ft(it.layout_sky.visibility)})),paint:a8||(a8=new Hr({"sky-type":new Ft(it.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ft(it.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ft(it.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ft(it.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ft(it.paint_sky["sky-gradient-radius"]),"sky-gradient":new Mu(it.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ft(it.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ft(it.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ft(it.paint_sky["sky-opacity"])}))},i,a,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="sky-gradient"?this._updateColorRamp():u!=="sky-atmosphere-sun"&&u!=="sky-atmosphere-halo-color"&&u!=="sky-atmosphere-color"&&u!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=e0({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(u){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=u.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(u,i){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),g=!h,f=u.style.light,_=f.properties.get("position");return g&&f.properties.get("anchor")==="viewport"&&Yi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?M3(_.azimuthal,90-_.polar,i):M3(h[0],90-h[1],i)}const a=this.paint.get("sky-gradient-center");return M3(a[0],90-a[1],i)}isSky(){return!0}markSkyboxValid(u){this._skyboxInvalidated=!1,this._lightPosition=u.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const u=this.paint.get("sky-type");return u==="atmosphere"?["skyboxCapture","skybox"]:u==="gradient"?["skyboxGradient"]:null}},slot:class extends Yo{constructor(u,i,a,h){super(u,{paint:l8||(l8=new Hr({}))},i,null)}},model:class extends Yo{constructor(u,i,a,h){super(u,{layout:v8||(v8=new Hr({visibility:new Ft(it.layout_model.visibility),"model-id":new pi(it.layout_model["model-id"])})),paint:x8||(x8=new Hr({"model-opacity":new Ft(it.paint_model["model-opacity"]),"model-rotation":new pi(it.paint_model["model-rotation"]),"model-scale":new pi(it.paint_model["model-scale"]),"model-translation":new pi(it.paint_model["model-translation"]),"model-color":new pi(it.paint_model["model-color"]),"model-color-mix-intensity":new pi(it.paint_model["model-color-mix-intensity"]),"model-type":new Ft(it.paint_model["model-type"]),"model-cast-shadows":new Ft(it.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ft(it.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ft(it.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new pi(it.paint_model["model-emissive-strength"]),"model-roughness":new pi(it.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new pi(it.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ft(it.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Ft(it.paint_model["model-front-cutoff"])}))},i,a,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new C3(u)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(u){return u instanceof T_?qt-1:0}queryIntersectsFeature(u,i,a,h,g,f){if(!this.modelManager)return!1;const _=this.modelManager,w=u.tile.getBucket(this);if(!(w&&w instanceof C3))return!1;const C=w;for(const z in C.instancesPerModel){const x=C.instancesPerModel[z],T=i.id!==void 0?i.id:i.properties&&i.properties.hasOwnProperty("id")?i.properties.id:void 0;if(x.idToFeaturesIndex.hasOwnProperty(T)){const I=x.features[x.idToFeaturesIndex[T]],E=_.getModel(z,this.scope);if(!E)return!1;let A=Te.mat4.create();const k=new O(0,0),B=C.canonical;let $=Number.MAX_VALUE;for(let H=0;H<I.instancedDataCount;++H){const G=16*(I.instancedDataOffset+H),U=x.instancedDataArray.float32,Y=[U[G+4],U[G+5],U[G+6]];T8(B,k,U[G],0|U[G+1]),b8(A,E,f,k,I.rotation,I.scale,Y,!1,!1,!1),f.projection.name==="globe"&&(A=T3(A,f));const Q=Te.mat4.multiply([],f.projMatrix,A),se=u.queryGeometry,xe=p8(se.isPointQuery()?se.screenBounds:se.screenGeometry,f,Q,E.aabb);xe!=null&&($=Math.min(xe,$))}return $!==Number.MAX_VALUE&&$}}return!1}_handleOverridablePaintPropertyUpdate(u,i,a){return!(!this.layout||i.isDataDriven()||a.isDataDriven()||u!=="model-color"&&u!=="model-color-mix-intensity"&&u!=="model-rotation"&&u!=="model-scale"&&u!=="model-translation"&&u!=="model-emissive-strength")}_isPropertyZoomDependent(u){const i=this._transitionablePaint._values[u];return i!=null&&i.value!=null&&i.value.expression!=null&&i.value.expression instanceof Lh}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(u,i,a,h){const g=u.tile,f=g.getBucket(this);let _=null,w=Number.MAX_VALUE;if(!(f&&f instanceof T_))return{queryFeature:_,intersectionZ:w};const C=f.getNodesInfo()[i];if(C.hiddenByReplacement||!C.node.meshes||!a.filter(new fn(g.tileID.overscaledZ),C.feature,g.tileID.canonical))return{queryFeature:_,intersectionZ:w};const z=C.node,x=h.calculatePosMatrix(g.tileID.toUnwrapped(),h.worldSize),T=C.evaluatedScale;let I=0;h.elevation&&z.elevation&&(I=z.elevation*h.elevation.exaggeration()),Te.mat4.translate(x,x,[(z.anchor?z.anchor[0]:0)*(T[0]-1),(z.anchor?z.anchor[1]:0)*(T[1]-1),I]),Te.mat4.scale(x,x,T);const E=u.queryGeometry,A=E.isPointQuery()?E.screenBounds:E.screenGeometry,k=function(U){const Y=Te.mat4.multiply([],x,U.matrix);Te.mat4.multiply(Y,h.expandedFarZProjMatrix,Y);for(let Q=0;Q<U.meshes.length;++Q){const se=U.meshes[Q];if(Q===U.lightMeshIndex)continue;const xe=p8(A,h,Y,se.aabb);xe!=null&&(w=Math.min(xe,w))}if(U.children)for(const Q of U.children)k(Q)};if(k(z),w===Number.MAX_VALUE)return{queryFeature:_,intersectionZ:w};const B=new O(0,0);T8(g.tileID.canonical,B,C.node.anchor[0],C.node.anchor[1]);const{z:$,x:H,y:G}=g.tileID.canonical;return _=new w0({},$,H,G,C.feature.id),_.properties=C.feature.properties,_.geometry={type:"Point",coordinates:[B.lng,B.lat]},_.layer={...this.serialize(),id:this.fqid},_.state={},_.tile=g.tileID.canonical,{queryFeature:_,intersectionZ:w}}},clip:class extends Yo{constructor(u,i,a,h){super(u,{layout:x5||(x5=new Hr({"clip-layer-types":new Ft(it.layout_clip["clip-layer-types"]),"clip-layer-scope":new Ft(it.layout_clip["clip-layer-scope"])})),paint:b5||(b5=new Hr({}))},i,a,h)}recalculate(u,i){super.recalculate(u,i)}createBucket(u){return new w5(u)}isTileClipped(){return!0}is3D(){return!0}}};class cP{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class uP{constructor(){this.tasks={},this.taskQueue=[],bs(["process"],this),this.invoker=new cP(this.process),this.nextId=0}add(i,a){const h=this.nextId++,g=function({type:f,isSymbolTile:_,zoom:w}){return w=w||0,f==="message"?0:f!=="maybePrepare"||_?f!=="parseTile"||_?f==="parseTile"&&_?300-w:f==="maybePrepare"&&_?400-w:500:200-w:100-w}(a);if(g===0){try{i()}finally{}return null}return this.tasks[h]={fn:i,metadata:a,priority:g,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const a=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let i=null,a=1/0;for(let g=0;g<this.taskQueue.length;g++){const f=this.tasks[this.taskQueue[g]];f.priority<a&&(a=f.priority,i=g)}if(i===null)return null;const h=this.taskQueue[i];return this.taskQueue.splice(i,1),h}remove(){this.invoker.remove()}}class C8{constructor(i,a,h){this.target=i,this.parent=a,this.mapId=h,this.callbacks={},this.cancelCallbacks={},bs(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new uP}send(i,a,h,g,f=!1,_){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=_,this.callbacks[w]=h);const C=new Set;return this.target.postMessage({id:w,type:i,hasCallback:!!h,targetMapId:g,mustQueue:f,sourceMapId:this.mapId,data:Uc(a,C)},C),{cancel:()=>{h&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(i){const a=i.data,h=a.id;if(h&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){const g=this.cancelCallbacks[h];delete this.cancelCallbacks[h],g&&g.cancel()}else if(a.mustQueue||io()){const g=this.callbacks[h],f=this.scheduler.add(()=>this.processTask(h,a),g&&g.metadata||{type:"message"});f&&(this.cancelCallbacks[h]=f)}else this.processTask(h,a)}processTask(i,a){if(delete this.cancelCallbacks[i],a.type==="<response>"){const h=this.callbacks[i];delete this.callbacks[i],h&&(a.error?h(cs(a.error)):h(null,cs(a.data)))}else{const h=new Set,g=a.hasCallback?(_,w)=>{this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:_?Uc(_):null,data:Uc(w,h)},h)}:()=>{},f=cs(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,f,g);else if(this.parent.getWorkerSource){const _=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,_[0],f.source,f.scope)[_[1]](f,g)}else g(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class Rf{constructor(i,a){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=Vn();const h=this.workerPool.acquire(this.id);for(let g=0;g<h.length;g++){const f=new Rf.Actor(h[g],a,this.id);f.name=`Worker ${g}`,this.actors.push(f)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,a,h){Mr(this.actors,(g,f)=>{g.send(i,a,f)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}Rf.Actor=C8;class A8{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,a){const h=this.toIdx(i,a);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(i,a){return this.leaves[this.toIdx(i,a)]}toIdx(i,a){return a*this.size+i}}function I8(u,i,a,h){let g=0,f=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(h[_])<1e-15){if(a[_]<u[_]||a[_]>i[_])return null}else{const w=1/h[_];let C=(u[_]-a[_])*w,z=(i[_]-a[_])*w;if(C>z){const x=C;C=z,z=x}if(C>g&&(g=C),z<f&&(f=z),g>f)return null}return g}function z8(u,i,a,h,g,f,_,w,C,z,x){const T=h-u,I=g-i,E=f-a,A=_-u,k=w-i,B=C-a,$=x[1]*B-x[2]*k,H=x[2]*A-x[0]*B,G=x[0]*k-x[1]*A,U=T*$+I*H+E*G;if(Math.abs(U)<1e-15)return null;const Y=1/U,Q=z[0]-u,se=z[1]-i,xe=z[2]-a,pe=(Q*$+se*H+xe*G)*Y;if(pe<0||pe>1)return null;const ge=se*E-xe*I,Pe=xe*T-Q*E,me=Q*I-se*T,Ie=(x[0]*ge+x[1]*Pe+x[2]*me)*Y;return Ie<0||pe+Ie>1?null:(A*ge+k*Pe+B*me)*Y}function D8(u,i,a){return(u-i)/(a-i)}function P8(u,i,a,h,g,f,_,w,C){const z=1<<a,x=f-h,T=_-g,I=(u+1)/z*x+h,E=(i+0)/z*T+g,A=(i+1)/z*T+g;w[0]=(u+0)/z*x+h,w[1]=E,C[0]=I,C[1]=A}class k8{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(f){const _=Math.ceil(Math.log2(f.dim/8)),w=[];let C=Math.ceil(Math.pow(2,_));const z=1/C,x=(E,A,k,B,$)=>{const H=B?1:0,G=(E+1)*k-H,U=A*k,Y=(A+1)*k-H;$[0]=E*k,$[1]=U,$[2]=G,$[3]=Y};let T=new A8(C);const I=[];for(let E=0;E<C*C;E++){x(E%C,Math.floor(E/C),z,!1,I);const A=Uu(I[0],I[1],f),k=Uu(I[2],I[1],f),B=Uu(I[2],I[3],f),$=Uu(I[0],I[3],f);T.minimums.push(Math.min(A,k,B,$)),T.maximums.push(Math.max(A,k,B,$)),T.leaves.push(1)}for(w.push(T),C/=2;C>=1;C/=2){const E=w[w.length-1];T=new A8(C);for(let A=0;A<C*C;A++){x(A%C,Math.floor(A/C),2,!0,I);const k=E.getElevation(I[0],I[1]),B=E.getElevation(I[2],I[1]),$=E.getElevation(I[2],I[3]),H=E.getElevation(I[0],I[3]),G=E.isLeaf(I[0],I[1]),U=E.isLeaf(I[2],I[1]),Y=E.isLeaf(I[2],I[3]),Q=E.isLeaf(I[0],I[3]),se=Math.min(k.min,B.min,$.min,H.min),xe=Math.max(k.max,B.max,$.max,H.max),pe=G&&U&&Y&&Q;T.maximums.push(xe),T.minimums.push(se),T.leaves.push(xe-se<=5&&pe?1:0)}w.push(T)}return w}(this.dem),h=a.length-1,g=a[h];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(a,0,0,h,0)}raycastRoot(i,a,h,g,f,_,w=1){return I8([i,a,-100],[h,g,this.maximums[0]*w],f,_)}raycast(i,a,h,g,f,_,w=1){if(!this.nodeCount)return null;const C=this.raycastRoot(i,a,h,g,f,_,w);if(C==null)return null;const z=[],x=[],T=[],I=[],E=[{idx:0,t:C,nodex:0,nodey:0,depth:0}];for(;E.length>0;){const{idx:A,t:k,nodex:B,nodey:$,depth:H}=E.pop();if(this.leaves[A]){P8(B,$,H,i,a,h,g,T,I);const U=1<<H,Y=(B+0)/U,Q=(B+1)/U,se=($+0)/U,xe=($+1)/U,pe=Uu(Y,se,this.dem)*w,ge=Uu(Q,se,this.dem)*w,Pe=Uu(Q,xe,this.dem)*w,me=Uu(Y,xe,this.dem)*w,Ie=z8(T[0],T[1],pe,I[0],T[1],ge,I[0],I[1],Pe,f,_),Fe=z8(I[0],I[1],Pe,T[0],I[1],me,T[0],T[1],pe,f,_),Ne=Math.min(Ie!==null?Ie:Number.MAX_VALUE,Fe!==null?Fe:Number.MAX_VALUE);if(Ne!==Number.MAX_VALUE)return Ne;{const He=Te.vec3.scaleAndAdd([],f,_,k);if(R8(pe,ge,me,Pe,D8(He[0],T[0],I[0]),D8(He[1],T[1],I[1]))>=He[2])return k}continue}let G=0;for(let U=0;U<this._siblingOffset.length;U++){P8((B<<1)+this._siblingOffset[U][0],($<<1)+this._siblingOffset[U][1],H+1,i,a,h,g,T,I),T[2]=-100,I[2]=this.maximums[this.childOffsets[A]+U]*w;const Y=I8(T,I,f,_);if(Y!=null){const Q=Y;z[U]=Q;let se=!1;for(let xe=0;xe<G&&!se;xe++)Q>=z[x[xe]]&&(x.splice(xe,0,U),se=!0);se||(x[G]=U),G++}}for(let U=0;U<G;U++){const Y=x[U];E.push({idx:this.childOffsets[A]+Y,t:z[Y],nodex:(B<<1)+this._siblingOffset[Y][0],nodey:($<<1)+this._siblingOffset[Y][1],depth:H+1})}}return null}_addNode(i,a,h){return this.minimums.push(i),this.maximums.push(a),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(i,a,h,g,f){if(i[g].isLeaf(a,h)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const _=g-1,w=i[_];let C=0,z=0;for(let x=0;x<this._siblingOffset.length;x++){const T=2*a+this._siblingOffset[x][0],I=2*h+this._siblingOffset[x][1],E=w.getElevation(T,I),A=w.isLeaf(T,I),k=this._addNode(E.min,E.max,A);A&&(C|=1<<x),z||(z=k)}for(let x=0;x<this._siblingOffset.length;x++)C&1<<x||this._construct(i,2*a+this._siblingOffset[x][0],2*h+this._siblingOffset[x][1],_,z+x)}}function R8(u,i,a,h,g,f){return ai(ai(u,a,f),ai(i,h,f),g)}function Uu(u,i,a){const h=a.dim,g=Ot(u*h-.5,0,h-1),f=Ot(i*h-.5,0,h-1),_=Math.floor(g),w=Math.floor(f),C=Math.min(_+1,h-1),z=Math.min(w+1,h-1);return R8(a.get(_,w),a.get(C,w),a.get(_,z),a.get(C,z),g-_,f-w)}const hP={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function dP(u,i,a){return(256*u*256+256*i+a)/10-1e4}function fP(u,i,a){return 256*u+i+a/256-32768}class C_{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,a,h,g=!1){if(this.uid=i,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void Yi(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const f=this.dim=a.height-2,_=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.floatView=new Float32Array(a.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let C=0;C<f;C++)_[this._idx(-1,C)]=_[this._idx(0,C)],_[this._idx(f,C)]=_[this._idx(f-1,C)],_[this._idx(C,-1)]=_[this._idx(C,0)],_[this._idx(C,f)]=_[this._idx(C,f-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(f,-1)]=_[this._idx(f-1,0)],_[this._idx(-1,f)]=_[this._idx(0,f-1)],_[this._idx(f,f)]=_[this._idx(f-1,f-1)]}const w=h==="terrarium"?fP:dP;for(let C=0;C<_.length;++C){const z=4*C;this.floatView[C]=w(this.pixels[z],this.pixels[z+1],this.pixels[z+2])}this._timestamp=Zt.now()}_buildQuadTree(){this._tree=new k8(this)}get(i,a,h=!1){h&&(i=Ot(i,-1,this.dim),a=Ot(a,-1,this.dim));const g=this._idx(i,a);return this.floatView[g]}set(i,a,h){const g=this._idx(i,a),f=this.floatView[g];return this.floatView[g]=h,h-f}static getUnpackVector(i){return hP[i]}_idx(i,a){if(i<-1||i>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(i+1)}static pack(i,a){const h=[0,0,0,0],g=C_.getUnpackVector(a);let f=Math.floor((i+g[3])/g[2]);return h[2]=f%256,f=Math.floor(f/256),h[1]=f%256,f=Math.floor(f/256),h[0]=f,h}getPixels(){return new f5({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,a,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=a*this.dim,f=a*this.dim+this.dim,_=h*this.dim,w=h*this.dim+this.dim;switch(a){case-1:g=f-1;break;case 1:f=g+1}switch(h){case-1:_=w-1;break;case 1:w=_+1}const C=-a*this.dim,z=-h*this.dim;for(let x=_;x<w;x++)for(let T=g;T<f;T++){const I=4*this._idx(T,x),E=4*this._idx(T+C,x+z);this.pixels[I+0]=i.pixels[E+0],this.pixels[I+1]=i.pixels[E+1],this.pixels[I+2]=i.pixels[E+2],this.pixels[I+3]=i.pixels[E+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function pP(u,i,a){u===1?i.headerLength=a.readFixed32():u===2?i.x=a.readVarint():u===3?i.y=a.readVarint():u===4?i.z=a.readVarint():u===5&&i.layers.push(function(h,g){return h.readFields(vP,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)}(a,a.readVarint()+a.pos))}function mP(u,i,a){u===1?(i.delta_filter=function(h,g){return h.readFields(gP,{blockSize:0},g)}(a,a.readVarint()+a.pos),i.filter="delta_filter"):u===2?(a.readVarint(),i.filter="zigzag_filter"):u===3?(a.readVarint(),i.filter="bitshuffle_filter"):u===4&&(a.readVarint(),i.filter="byteshuffle_filter")}function gP(u,i,a){u===1&&(i.blockSize=a.readVarint())}function _P(u,i,a){u===1?(a.readVarint(),i.codec="gzip_data"):u===2?(a.readVarint(),i.codec="jpeg_image"):u===3?(a.readVarint(),i.codec="webp_image"):u===4&&(a.readVarint(),i.codec="png_image")}function yP(u,i,a){let h=0,g=0;u===1?i.firstByte=a.readFixed64():u===2?i.lastByte=a.readFixed64():u===3?i.filters.push(function(f,_){return f.readFields(mP,{},_)}(a,a.readVarint()+a.pos)):u===4?i.codec=function(f,_){return f.readFields(_P,{},_)}(a,a.readVarint()+a.pos):u===5?g=a.readFloat():u===6?h=a.readFloat():u===7?i.bands.push(a.readString()):u===8?i.offset=a.readDouble():u===9&&(i.scale=a.readDouble()),i.offset===0&&(i.offset=g),i.scale===0&&(i.scale=h)}function vP(u,i,a){u===1?i.version=a.readVarint():u===2?i.name=a.readString():u===3?i.units=a.readString():u===4?i.tileSize=a.readVarint():u===5?i.buffer=a.readVarint():u===6?i.pixelFormat=a.readVarint():u===7&&i.dataIndex.push(function(h,g){return h.readFields(yP,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)}(a,a.readVarint()+a.pos))}function xP(u,i,a){if(u===2)(function(h,g,f){h.readFields(bP,f,g)})(a,a.readVarint()+a.pos,i);else if(u===3)throw new Error("Not implemented")}function bP(u,i,a){if(u===1){let h=0;const g=a.readVarint()+a.pos;for(;a.pos<g;)i[h++]=a.readVarint()}}ti(C_,"DEMData"),ti(k8,"DemMinMaxQuadTree",{omit:["dem"]});class wP{constructor(i){this.capacity=i,this.cache=new Map}get(i){if(!this.cache.has(i))return;const a=this.cache.get(i);return this.cache.delete(i),this.cache.set(i,a),a}put(i,a){this.cache.has(i)?this.cache.delete(i):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(i,a)}}function SP(u,i){if(i.length!==4)throw new Error(`Expected data of dimension 4 but got ${i.length}.`);let a=i[3];for(let h=2;h>=1;h--){const g=h===1?1:0,f=h===2?1:0;for(let _=0;_<i[0];_++){const w=i[1]*_;for(let C=g;C<i[1];C++){const z=i[2]*(C+w);for(let x=f;x<i[2];x++){const T=i[3]*(x+z);for(let I=0;I<i[3];I++){const E=T+I;u[E]+=u[E-a]}}}}a*=i[h]}return u}function MP(u){for(let i=0,a=u.length;i<a;i++)u[i]=u[i]>>>1^-(1&u[i]);return u}function EP(u,i){switch(i){case"uint32":return u;case"uint16":for(let a=0;a<u.length;a+=2){const h=u[a],g=u[a+1];u[a]=(240&h)>>4|(61440&h)>>8|(240&g)<<4|61440&g,u[a+1]=15&h|(3840&h)>>4|(15&g)<<8|(3840&g)<<4}return u;case"uint8":for(let a=0;a<u.length;a+=4){const h=u[a],g=u[a+1],f=u[a+2],_=u[a+3];u[a+0]=(192&h)>>6|(192&g)>>4|(192&f)>>2|192&_,u[a+1]=(48&h)>>4|(48&g)>>2|48&f|(48&_)<<2,u[a+2]=(12&h)>>2|12&g|(12&f)<<2|(12&_)<<4,u[a+3]=3&h|(3&g)<<2|(3&f)<<4|(3&_)<<6}return u;default:throw new Error(`Invalid pixel format, "${i}"`)}}var wa=Uint8Array,S0=Uint16Array,TP=Int32Array,L8=new wa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),O8=new wa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),CP=new wa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),B8=function(u,i){for(var a=new S0(31),h=0;h<31;++h)a[h]=i+=1<<u[h-1];var g=new TP(a[30]);for(h=1;h<30;++h)for(var f=a[h];f<a[h+1];++f)g[f]=f-a[h]<<5|h;return{b:a,r:g}},F8=B8(L8,2),N8=F8.b,AP=F8.r;N8[28]=258,AP[258]=28;for(var IP=B8(O8,0).b,$8=new S0(32768),Rn=0;Rn<32768;++Rn){var Lf=(43690&Rn)>>1|(21845&Rn)<<1;$8[Rn]=((65280&(Lf=(61680&(Lf=(52428&Lf)>>2|(13107&Lf)<<2))>>4|(3855&Lf)<<4))>>8|(255&Lf)<<8)>>1}var M0=function(u,i,a){for(var h=u.length,g=0,f=new S0(i);g<h;++g)u[g]&&++f[u[g]-1];var _,w=new S0(i);for(g=1;g<i;++g)w[g]=w[g-1]+f[g-1]<<1;_=new S0(1<<i);var C=15-i;for(g=0;g<h;++g)if(u[g])for(var z=g<<4|u[g],x=i-u[g],T=w[u[g]-1]++<<x,I=T|(1<<x)-1;T<=I;++T)_[$8[T]>>C]=z;return _},E0=new wa(288);for(Rn=0;Rn<144;++Rn)E0[Rn]=8;for(Rn=144;Rn<256;++Rn)E0[Rn]=9;for(Rn=256;Rn<280;++Rn)E0[Rn]=7;for(Rn=280;Rn<288;++Rn)E0[Rn]=8;var j8=new wa(32);for(Rn=0;Rn<32;++Rn)j8[Rn]=5;var zP=M0(E0,9),DP=M0(j8,5),D3=function(u){for(var i=u[0],a=1;a<u.length;++a)u[a]>i&&(i=u[a]);return i},Dl=function(u,i,a){var h=i/8|0;return(u[h]|u[h+1]<<8)>>(7&i)&a},P3=function(u,i){var a=i/8|0;return(u[a]|u[a+1]<<8|u[a+2]<<16)>>(7&i)},PP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pl=function(u,i,a){var h=new Error(i||PP[u]);if(h.code=u,Error.captureStackTrace&&Error.captureStackTrace(h,Pl),!a)throw h;return h},kP=new wa(0),RP=typeof TextDecoder<"u"&&new TextDecoder;try{RP.decode(kP,{stream:!0})}catch{}const LP={gzip_data:"gzip"};class Ja extends Error{constructor(i){super(i),this.name="MRTError"}}const OP={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},U8={uint32:1,uint16:2,uint8:4},BP={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let k3;class R3{constructor(i=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=i}getLayer(i){const a=this.layers[i];if(!a)throw new Ja(`Layer '${i}' not found`);return a}getHeaderLength(i){const a=new Uint8Array(i),h=new DataView(i);if(a[0]!==13)throw new Ja("File is not a valid MRT.");return h.getUint32(1,!0)}parseHeader(i){const a=new Uint8Array(i),h=this.getHeaderLength(i);if(a.length<h)throw new Ja(`Expected header with length >= ${h} but got buffer of length ${a.length}`);const g=function(f,_){return f.readFields(pP,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new k3(a.subarray(0,h)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new Ja(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const f of g.layers)this.layers[f.name]=new FP(f,{cacheSize:this._cacheSize});return this}createDecodingTask(i){const a=[],h=this.getLayer(i.layerName);for(let g of i.blockIndices){const f=h.dataIndex[g],_=f.firstByte-i.firstByte,w=f.lastByte-i.firstByte;if(h._blocksInProgress.has(g))continue;const C={layerName:h.name,firstByte:_,lastByte:w,pixelFormat:h.pixelFormat,blockIndex:g,blockShape:[f.bands.length].concat(h.bandShape),buffer:h.buffer,codec:f.codec.codec,filters:f.filters.map(z=>z.filter)};h._blocksInProgress.add(g),a.push(C)}return new V8(a,()=>{a.forEach(g=>h._blocksInProgress.delete(g.blockIndex))},(g,f)=>{if(a.forEach(_=>h._blocksInProgress.delete(_.blockIndex)),g)throw g;f.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class FP{constructor({version:i,name:a,units:h,tileSize:g,pixelFormat:f,buffer:_,dataIndex:w},C){if(this.version=i,this.version!==1)throw new Ja(`Cannot parse raster layer encoded with MRT version ${i}`);this.name=a,this.units=h,this.tileSize=g,this.buffer=_,this.pixelFormat=OP[f],this.dataIndex=w,this.bandShape=[g+2*_,g+2*_,U8[this.pixelFormat]],this._decodedBlocks=new wP(C?C.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return U8[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:i})=>i).flat()}processDecodedData(i){const a=i.blockIndex.toString();this._decodedBlocks.get(a)||this._decodedBlocks.put(a,i.data)}getBlockForBand(i){let a=0;switch(typeof i){case"string":for(const[h,g]of this.dataIndex.entries()){for(const[f,_]of g.bands.entries())if(_===i)return{bandIndex:a+f,blockIndex:h,blockBandIndex:f};a+=g.bands.length}break;case"number":for(const[h,g]of this.dataIndex.entries()){if(i>=a&&i<a+g.bands.length)return{bandIndex:i,blockIndex:h,blockBandIndex:i-a};a+=g.bands.length}break;default:throw new Ja(`Invalid band \`${JSON.stringify(i)}\`. Expected string or integer.`)}throw new Ja(`Band not found: ${JSON.stringify(i)}`)}getDataRange(i){let a=1/0,h=-1/0;const g=[],f=new Set;for(const _ of i){const{blockIndex:w}=this.getBlockForBand(_);if(w<0)throw new Ja(`Invalid band: ${JSON.stringify(_)}`);const C=this.dataIndex[w];g.includes(w)||g.push(w),f.add(w),a=Math.min(a,C.firstByte),h=Math.max(h,C.lastByte)}if(f.size>this.cacheSize)throw new Ja(`Number of blocks to decode (${f.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:a,lastByte:h,blockIndices:g}}hasBand(i){const{blockIndex:a}=this.getBlockForBand(i);return a>=0}hasDataForBand(i){const{blockIndex:a}=this.getBlockForBand(i);return a>=0&&!!this._decodedBlocks.get(a.toString())}getBandView(i){const{blockIndex:a,blockBandIndex:h}=this.getBlockForBand(i),g=this._decodedBlocks.get(a.toString());if(!g)throw new Ja(`Data for band ${JSON.stringify(i)} of layer "${this.name}" not decoded.`);const f=this.dataIndex[a],_=this.bandShape.reduce((z,x)=>z*x,1),w=h*_,C=g.subarray(w,w+_);return{data:C,bytes:new Uint8Array(C.buffer).subarray(C.byteOffset,C.byteOffset+C.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:f.offset,scale:f.scale}}}R3.setPbf=function(u){k3=u};class V8{constructor(i,a,h){this.tasks=i,this._onCancel=a,this._onComplete=h,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(i,a){this._finalized||(this._onComplete(i,a),this._finalized=!0)}}R3.performDecoding=function(u,i){const a=new Uint8Array(u);return Promise.all(i.tasks.map(h=>{const{layerName:g,firstByte:f,lastByte:_,pixelFormat:w,blockShape:C,blockIndex:z,filters:x,codec:T}=h,I=a.subarray(f,_+1),E=new Uint32Array(C[0]*C[1]*C[2]);let A;if(T!=="gzip_data")throw new Ja(`Unhandled codec: ${T}`);return A=function(k,B){if(!globalThis.DecompressionStream&&B==="gzip_data")return Promise.resolve(((U=function(se){se[0]==31&&se[1]==139&&se[2]==8||Pl(6,"invalid gzip data");var xe=se[3],pe=10;4&xe&&(pe+=2+(se[10]|se[11]<<8));for(var ge=(xe>>3&1)+(xe>>4&1);ge>0;ge-=!se[pe++]);return pe+(2&xe)}(G=k))+8>G.length&&Pl(6,"invalid gzip data"),function(se,xe,pe,ge){var Pe=se.length;if(!Pe||xe.f&&!xe.l)return pe||new wa(0);var me=!pe,Ie=me||xe.i!=2,Fe=xe.i;me&&(pe=new wa(3*Pe));var Ne,He,et=function(Vu){var nd=pe.length;if(Vu>nd){var P0=new wa(Math.max(2*nd,Vu));P0.set(pe),pe=P0}},rt=xe.f||0,Ye=xe.p||0,_t=xe.b||0,zt=xe.l,ht=xe.d,ei=xe.m,Vt=xe.n,Bt=8*Pe;do{if(!zt){rt=Dl(se,Ye,1);var Ct=Dl(se,Ye+1,3);if(Ye+=3,!Ct){var yi=se[(Ci=4+((Ye+7)/8|0))-4]|se[Ci-3]<<8,Kt=Ci+yi;if(Kt>Pe){Fe&&Pl(0);break}Ie&&et(_t+yi),pe.set(se.subarray(Ci,Kt),_t),xe.b=_t+=yi,xe.p=Ye=8*Kt,xe.f=rt;continue}if(Ct==1)zt=zP,ht=DP,ei=9,Vt=5;else if(Ct==2){var ri=Dl(se,Ye,31)+257,Pi=Dl(se,Ye+10,15)+4,Ni=ri+Dl(se,Ye+5,31)+1;Ye+=14;for(var $i=new wa(Ni),Li=new wa(19),Zi=0;Zi<Pi;++Zi)Li[CP[Zi]]=Dl(se,Ye+3*Zi,7);Ye+=3*Pi;var Hi=D3(Li),Or=(1<<Hi)-1,Pr=M0(Li,Hi);for(Zi=0;Zi<Ni;){var Ci,br=Pr[Dl(se,Ye,Or)];if(Ye+=15&br,(Ci=br>>4)<16)$i[Zi++]=Ci;else{var Cr=0,Kr=0;for(Ci==16?(Kr=3+Dl(se,Ye,3),Ye+=2,Cr=$i[Zi-1]):Ci==17?(Kr=3+Dl(se,Ye,7),Ye+=3):Ci==18&&(Kr=11+Dl(se,Ye,127),Ye+=7);Kr--;)$i[Zi++]=Cr}}var Sn=$i.subarray(0,ri),Ln=$i.subarray(ri);ei=D3(Sn),Vt=D3(Ln),zt=M0(Sn,ei),ht=M0(Ln,Vt)}else Pl(1);if(Ye>Bt){Fe&&Pl(0);break}}Ie&&et(_t+131072);for(var Mn=(1<<ei)-1,gn=(1<<Vt)-1,Tn=Ye;;Tn=Ye){var jn=(Cr=zt[P3(se,Ye)&Mn])>>4;if((Ye+=15&Cr)>Bt){Fe&&Pl(0);break}if(Cr||Pl(2),jn<256)pe[_t++]=jn;else{if(jn==256){Tn=Ye,zt=null;break}var Eo=jn-254;jn>264&&(Eo=Dl(se,Ye,(1<<(Rl=L8[Zi=jn-257]))-1)+N8[Zi],Ye+=Rl);var Wr=ht[P3(se,Ye)&gn],Rs=Wr>>4;if(Wr||Pl(3),Ye+=15&Wr,Ln=IP[Rs],Rs>3){var Rl=O8[Rs];Ln+=P3(se,Ye)&(1<<Rl)-1,Ye+=Rl}if(Ye>Bt){Fe&&Pl(0);break}Ie&&et(_t+131072);var Ka=_t+Eo;if(_t<Ln){var Qa=0-Ln,rd=Math.min(Ln,Ka);for(Qa+_t<0&&Pl(3);_t<rd;++_t)pe[_t]=(void 0)[Qa+_t]}for(;_t<Ka;++_t)pe[_t]=pe[_t-Ln]}}xe.l=zt,xe.p=Tn,xe.b=_t,xe.f=rt,zt&&(rt=1,xe.m=ei,xe.d=ht,xe.n=Vt)}while(!rt);return _t!=pe.length&&me?(Ne=pe,((He=_t)==null||He>Ne.length)&&(He=Ne.length),new wa(Ne.subarray(0,He))):pe.subarray(0,_t)}(G.subarray(U,-8),{i:2},new wa((($=G)[(H=$.length)-4]|$[H-3]<<8|$[H-2]<<16|$[H-1]<<24)>>>0))));var $,H,G,U;const Y=LP[B];if(!Y)throw new Error(`Unhandled codec: ${B}`);const Q=new globalThis.DecompressionStream(Y);return new Response(new Blob([k]).stream().pipeThrough(Q)).arrayBuffer().then(se=>new Uint8Array(se))}(I,T).then(k=>(function(B,$){B.readFields(xP,$)}(new k3(k),E),new BP[w](E.buffer))),A.then(k=>{for(let B=x.length-1;B>=0;B--)switch(x[B]){case"delta_filter":SP(k,C);break;case"zigzag_filter":MP(k);break;case"bitshuffle_filter":EP(k,w);break;default:throw new Ja(`Unhandled filter "${x[B]}"`)}return{layerName:g,blockIndex:z,data:k}}).catch(k=>{throw k})}))},ti(V8,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var T0={workerUrl:"",workerClass:null,workerParams:void 0};const L3="mapboxgl_preloaded_worker_pool";class C0{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<C0.workerCount;)this.workers.push(T0.workerClass!=null?new T0.workerClass:new self.Worker(T0.workerUrl,T0.workerParams));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.workers&&this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[L3]}numActive(){return Object.keys(this.active).length}}let A0;function A_(){return A0||(A0=new C0),A0}C0.workerCount=2;let I0,O3,kl,Of,B3,Bf=null;function q8(){return io()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:O3||Se.DRACO_URL}function H8(){if(io()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Of)return Of;const u=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Of=WebAssembly.validate(u)?Se.MESHOPT_SIMD_URL:Se.MESHOPT_URL,Of}const I_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},NP={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},z0={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function G8(u,i,a){const h=a.json.bufferViews.length,g=a.buffers.length;i.bufferView=h,a.json.bufferViews[h]={buffer:g,byteLength:u.byteLength},a.buffers[g]=u}const F3="KHR_draco_mesh_compression";function $P(u,i){const a=u.extensions&&u.extensions[F3];if(!a)return;const h=new kl.Decoder,g=Y8(i,a.bufferView),f=new kl.Mesh;if(!h.DecodeArrayToMesh(g,g.byteLength,f))throw new Error("Failed to decode Draco mesh");const _=i.json.accessors[u.indices],w=I_[_.componentType],C=_.count*w.BYTES_PER_ELEMENT,z=kl._malloc(C);w===Uint16Array?h.GetTrianglesUInt16Array(f,C,z):h.GetTrianglesUInt32Array(f,C,z),G8(kl.memory.buffer.slice(z,z+C),_,i),kl._free(z);for(const x of Object.keys(a.attributes)){const T=h.GetAttributeByUniqueId(f,a.attributes[x]),I=i.json.accessors[u.attributes[x]],E=NP[I.componentType],A=I.count*z0[I.type]*I_[I.componentType].BYTES_PER_ELEMENT,k=kl._malloc(A);h.GetAttributeDataArrayForAllPoints(f,T,kl[E],A,k),G8(kl.memory.buffer.slice(k,k+A),I,i),kl._free(k)}h.destroy(),f.destroy(),delete u.extensions[F3]}const z_="EXT_meshopt_compression";function jP(u,i){if(!u.extensions||!u.extensions[z_])return;const a=u.extensions[z_],h=new Uint8Array(i.buffers[a.buffer],a.byteOffset||0,a.byteLength||0),g=new Uint8Array(a.count*a.byteStride);B3.decodeGltfBuffer(g,a.count,a.byteStride,h,a.mode,a.filter),u.buffer=i.buffers.length,u.byteOffset=0,i.buffers[u.buffer]=g.buffer,delete u.extensions[z_]}const W8=1179937895,Z8=new TextDecoder("utf8");function X8(u,i){return new URL(u,i).href}function UP(u,i,a,h){return fetch(X8(u.uri,h)).then(g=>g.arrayBuffer()).then(g=>{i.buffers[a]=g})}function Y8(u,i){const a=u.json.bufferViews[i];return new Uint8Array(u.buffers[a.buffer],a.byteOffset||0,a.byteLength)}function VP(u,i,a,h){if(u.uri){const g=X8(u.uri,h);return fetch(g).then(f=>f.blob()).then(f=>createImageBitmap(f)).then(f=>{i.images[a]=f})}if(u.bufferView!==void 0){const g=Y8(i,u.bufferView),f=new Blob([g],{type:u.mimeType});return createImageBitmap(f).then(_=>{i.images[a]=_})}}function J8(u,i=0,a){const h={json:null,images:[],buffers:[]};if(new Uint32Array(u,i,1)[0]===W8){const x=new Uint32Array(u,i);let T=2;const I=(x[T++]>>2)-3,E=x[T++]>>2;if(T++,h.json=JSON.parse(Z8.decode(x.subarray(T,T+E))),T+=E,T<I){const A=x[T++];T++;const k=i+(T<<2);h.buffers[0]=u.slice(k,k+A)}}else h.json=JSON.parse(Z8.decode(new Uint8Array(u,i)));const{buffers:g,images:f,meshes:_,extensionsUsed:w,bufferViews:C}=h.json;let z=Promise.resolve();if(g){const x=[];for(let T=0;T<g.length;T++){const I=g[T];I.uri?x.push(UP(I,h,T,a)):h.buffers[T]||(h.buffers[T]=null)}z=Promise.all(x)}return z.then(()=>{const x=[],T=w&&w.includes(F3),I=w&&w.includes(z_);if(T&&x.push(function(){if(!kl)return I0??(I0=function(E){let A,k=null;function B(){A=new Uint8Array(k.buffer)}function $(){throw new Error("Unexpected Draco error.")}const H={a:{a:$,d:function(G,U,Y){return A.copyWithin(G,U,U+Y)},c:function(G){const U=A.length,Y=Math.max(G>>>0,Math.ceil(1.2*U)),Q=Math.ceil((Y-U)/65536);try{return k.grow(Q),B(),!0}catch{return!1}},b:$}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(E,H):E.then(G=>G.arrayBuffer()).then(G=>WebAssembly.instantiate(G,H))).then(G=>{const{Rb:U,Qb:Y,P:Q,T:se,X:xe,Ja:pe,La:ge,Qa:Pe,Va:me,Wa:Ie,eb:Fe,jb:Ne,f:He,e:et,yb:rt,zb:Ye,Ab:_t,Bb:zt,Db:ht,Gb:ei}=G.instance.exports;k=et;const Vt=(()=>{let Bt=0,Ct=0,yi=0,Kt=0;return ri=>{yi&&(U(Kt),U(Bt),Ct+=yi,yi=Bt=0),Bt||(Ct+=128,Bt=Y(Ct));const Pi=ri.length+7&-8;let Ni=Bt;Pi>=Ct&&(yi=Pi,Ni=Kt=Y(Pi));for(let $i=0;$i<ri.length;$i++)A[Ni+$i]=ri[$i];return Ni}})();return B(),He(),{memory:et,_free:U,_malloc:Y,Mesh:class{constructor(){this.ptr=Q()}destroy(){se(this.ptr)}},Decoder:class{constructor(){this.ptr=pe()}destroy(){Ne(this.ptr)}DecodeArrayToMesh(Bt,Ct,yi){const Kt=Vt(Bt),ri=ge(this.ptr,Kt,Ct,yi.ptr);return!!xe(ri)}GetAttributeByUniqueId(Bt,Ct){return{ptr:Pe(this.ptr,Bt.ptr,Ct)}}GetTrianglesUInt16Array(Bt,Ct,yi){me(this.ptr,Bt.ptr,Ct,yi)}GetTrianglesUInt32Array(Bt,Ct,yi){Ie(this.ptr,Bt.ptr,Ct,yi)}GetAttributeDataArrayForAllPoints(Bt,Ct,yi,Kt,ri){Fe(this.ptr,Bt.ptr,Ct.ptr,yi,Kt,ri)}},DT_INT8:rt(),DT_UINT8:Ye(),DT_INT16:_t(),DT_UINT16:zt(),DT_UINT32:ht(),DT_FLOAT32:ei()}})}(fetch(q8())),I0.then(E=>{kl=E,I0=void 0}))}()),I&&x.push(function(){if(B3)return;const E=function(A){let k;const B=WebAssembly.instantiateStreaming(A,{}).then(G=>{k=G.instance,k.exports.__wasm_call_ctors()}),$={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},H={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:B,supported:!0,decodeGltfBuffer(G,U,Y,Q,se,xe){(function(pe,ge,Pe,me,Ie,Fe,Ne){const He=pe.exports.sbrk,et=me+3&-4,rt=He(et*Ie),Ye=He(Fe.length),_t=new Uint8Array(pe.exports.memory.buffer);_t.set(Fe,Ye);const zt=ge(rt,me,Ie,Ye,Fe.length);if(zt===0&&Ne&&Ne(rt,et,Ie),Pe.set(_t.subarray(rt,rt+me*Ie)),He(rt-He(0)),zt!==0)throw new Error(`Malformed buffer data: ${zt}`)})(k,k.exports[H[se]],G,U,Y,Q,k.exports[$[xe]])}}}(fetch(H8()));return E.ready.then(()=>{B3=E})}()),f)for(let E=0;E<f.length;E++)x.push(VP(f[E],h,E,a));return(x.length?Promise.all(x):Promise.resolve()).then(()=>{if(T&&_)for(const{primitives:E}of _)for(const A of E)$P(A,h);if(I&&_&&C)for(const E of C)jP(E,h);return h})})}function id(u,i){const a=u.json.bufferViews[i.bufferView],h=I_[i.componentType];return new h(u.buffers[a.buffer],(i.byteOffset||0)+(a.byteOffset||0),i.count*(a.byteStride&&a.byteStride!==z0[i.type]*h.BYTES_PER_ELEMENT?a.byteStride/h.BYTES_PER_ELEMENT:z0[i.type]))}function N3(u,i,a,h){const g=I_[i.componentType],f=function(x){switch(x){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),_=u.json.bufferViews[i.bufferView],w=_.byteStride?_.byteStride/g.BYTES_PER_ELEMENT:z0[i.type],C=a.float32,z=C.length/a.capacity;for(let x=0,T=0;x<i.count*w;x+=w,T+=z)for(let I=0;I<z;I++)C[T+I]=h[x+I]*f;a._trim()}function qP(u,i,a){const h=u.indices,g=u.attributes,f={};f.indexArray=new rn;const _=i.json.accessors[h],w=_.count/3;f.indexArray.reserve(w);const C=id(i,_);for(let I=0;I<w;I++)f.indexArray.emplaceBack(C[3*I],C[3*I+1],C[3*I+2]);f.indexArray._trim(),f.vertexArray=new oc;const z=i.json.accessors[g.POSITION];f.vertexArray.reserve(z.count);const x=id(i,z);for(let I=0;I<z.count;I++)f.vertexArray.emplaceBack(x[3*I],x[3*I+1],x[3*I+2]);if(f.vertexArray._trim(),f.aabb=new Tr(z.min,z.max),f.centroid=function(I,E){const A=[0,0,0],k=I.length;if(k>0){for(let B=0;B<k;B++){const $=3*I[B];A[0]+=E[$],A[1]+=E[$+1],A[2]+=E[$+2]}A[0]/=k,A[1]/=k,A[2]/=k}return A}(C,x),g.COLOR_0!==void 0){const I=i.json.accessors[g.COLOR_0],E=z0[I.type],A=id(i,I);f.colorArray=E===3?new oc:new wl,f.colorArray.resize(I.count),N3(i,I,f.colorArray,A)}if(g.NORMAL!==void 0){f.normalArray=new oc;const I=i.json.accessors[g.NORMAL];f.normalArray.resize(I.count);const E=id(i,I);N3(i,I,f.normalArray,E)}if(g.TEXCOORD_0!==void 0&&a.length>0){f.texcoordArray=new Hh;const I=i.json.accessors[g.TEXCOORD_0];f.texcoordArray.resize(I.count);const E=id(i,I);N3(i,I,f.texcoordArray,E)}if(g._FEATURE_ID_RGBA4444!==void 0){const I=i.json.accessors[g._FEATURE_ID_RGBA4444];i.json.extensionsUsed&&i.json.extensionsUsed.includes("EXT_meshopt_compression")&&(f.featureData=id(i,I))}g._FEATURE_RGBA4444!==void 0&&(f.featureData=new Uint32Array(id(i,i.json.accessors[g._FEATURE_RGBA4444]).buffer));const T=u.material;return f.material=function(I,E){const{emissiveFactor:A=[0,0,0],alphaMode:k="OPAQUE",alphaCutoff:B=.5,normalTexture:$,occlusionTexture:H,emissiveTexture:G,doubleSided:U}=I,{baseColorFactor:Y=[1,1,1,1],metallicFactor:Q=1,roughnessFactor:se=1,baseColorTexture:xe,metallicRoughnessTexture:pe}=I.pbrMetallicRoughness||{},ge=H?E[H.index]:void 0;if(H&&H.extensions&&H.extensions.KHR_texture_transform&&ge){const Pe=H.extensions.KHR_texture_transform;ge.offsetScale=[Pe.offset[0],Pe.offset[1],Pe.scale[0],Pe.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new $t(...Y),metallicFactor:Q,roughnessFactor:se,baseColorTexture:xe?E[xe.index]:void 0,metallicRoughnessTexture:pe?E[pe.index]:void 0},doubleSided:U,emissiveFactor:A,alphaMode:k,alphaCutoff:B,normalTexture:$?E[$.index]:void 0,occlusionTexture:ge,emissionTexture:G?E[G.index]:void 0,defined:I.defined===void 0}}(T!==void 0?i.json.materials[T]:{defined:!1},a),f}function K8(u,i,a){const{matrix:h,rotation:g,translation:f,scale:_,mesh:w,extras:C,children:z}=u,x={};if(x.matrix=h||Te.mat4.fromRotationTranslationScale([],g||[0,0,0,1],f||[0,0,0],_||[1,1,1]),w!==void 0){x.meshes=a[w];const T=x.anchor=[0,0];for(const I of x.meshes){const{min:E,max:A}=I.aabb;T[0]+=E[0]+A[0],T[1]+=E[1]+A[1]}T[0]=Math.floor(T[0]/x.meshes.length/2),T[1]=Math.floor(T[1]/x.meshes.length/2)}if(C&&(C.id&&(x.id=C.id),C.lights&&(x.lights=function(T){if(!T.length)return[];const I=function($){const H=atob($),G=new Uint8Array(H.length);for(let U=0;U<H.length;U++)G[U]=H.codePointAt(U);return G}(T),E=[],A=I.length/24,k=new Uint16Array(I.buffer),B=new Float32Array(I.buffer);for(let $=0;$<A;$++){const H=k[2*$*6]/30,G=k[2*$*6+1]/30,U=k[2*$*6+10]/100,Y=B[6*$+1],Q=B[6*$+2],se=B[6*$+3],xe=B[6*$+4],pe=se-Y,ge=xe-Q,Pe=Math.hypot(pe,ge);E.push({pos:[Y+.5*pe,Q+.5*ge,G],normal:[ge/Pe,-pe/Pe,0],width:Pe,height:H,depth:U,points:[Y,Q,se,xe]})}return E}(C.lights))),z){const T=[];for(const I of z)T.push(K8(i.json.nodes[I],i,a));x.children=T}return x}function HP(u){if(u.vertices.length===0||u.indices.length===0)return null;const i=new Wv(u.vertices,u.indices,8,256),[a,h]=[i.min.clone(),i.max.clone()];return{vertices:u.vertices,indices:u.indices,grid:i,min:a,max:h}}function GP(u){if(!u.extras||!u.extras.ground)return null;const i=u.extras.ground;if(!i||!Array.isArray(i)||i.length===0)return null;const a=i[0];if(!a||!Array.isArray(a)||a.length===0)return null;const h=[];for(const _ of a){if(!Array.isArray(_)||_.length!==2)continue;const w=_[0],C=_[1];typeof w=="number"&&typeof C=="number"&&h.push(new Pt(w,C))}if(h.length<3)return null;h.length>1&&h[h.length-1].equals(h[0])&&h.pop();let g=0;for(let _=0;_<h.length;_++){const w=h[_],C=h[(_+1)%h.length],z=h[(_+2)%h.length];g+=(w.x-C.x)*(z.y-C.y)-(z.x-C.x)*(w.y-C.y)}g>0&&h.reverse();const f=t0(h.flatMap(_=>[_.x,_.y]),[]);return f.length===0?null:{vertices:h,indices:f}}function WP(u,i){const a=[],h=[];let g=0;const f=[];for(const _ of u){g=a.length;const w=_.vertexArray.float32,C=_.indexArray.uint16;for(let z=0;z<_.vertexArray.length;z++)f[0]=w[3*z+0],f[1]=w[3*z+1],f[2]=w[3*z+2],Te.vec3.transformMat4(f,f,i),a.push(new Pt(f[0],f[1]));for(let z=0;z<3*_.indexArray.length;z++)h.push(C[z]+g)}if(h.length%3!=0)return null;for(let _=0;_<h.length;_+=3){const w=a[h[_+0]],C=a[h[_+1]],z=a[h[_+2]];(w.x-C.x)*(z.y-C.y)-(z.x-C.x)*(w.y-C.y)>0&&([h[_+1],h[_+2]]=[h[_+2],h[_+1]])}return{vertices:a,indices:h}}function Q8(u){const i=function(C,z){const x=[],T=WebGL2RenderingContext;if(C.json.textures)for(const I of C.json.textures){const E={magFilter:T.LINEAR,minFilter:T.NEAREST,wrapS:T.REPEAT,wrapT:T.REPEAT};I.sampler!==void 0&&Object.assign(E,C.json.samplers[I.sampler]),x.push({image:z[I.source],sampler:E,uploaded:!1})}return x}(u,u.images),a=function(C,z){const x=[];for(const T of C.json.meshes){const I=[];for(const E of T.primitives)I.push(qP(E,C,z));x.push(I)}return x}(u,i),{scenes:h,scene:g,nodes:f}=u.json,_=h?h[g||0].nodes:f,w=[];for(const C of _)w.push(K8(f[C],u,a));return function(C,z,x){const T={},I=new Set;for(let E=0;E<C.length;E++){const A=x[z[E]];if(!A.extras)continue;const k=A.extras["mapbox:footprint:version"],B=A.extras["mapbox:footprint:id"];(k||B)&&I.add(E),k==="1.0.0"&&B&&(T[B]=E)}for(let E=0;E<C.length;E++){if(I.has(E))continue;const A=C[E],k=x[z[E]];if(!k.extras)continue;let B=null;A.id in T&&(B=WP(C[T[A.id]].meshes,A.matrix)),B||(B=GP(k)),B&&(A.footprint=HP(B))}if(I.size>0){const E=Array.from(I.values()).sort((A,k)=>A-k);for(let A=E.length-1;A>=0;A--)C.splice(E[A],1)}}(w,_,u.json.nodes),w}function ZP(u){u.heightmap=new Float32Array(4096),u.heightmap.fill(-1);const i=u.vertexArray.float32,a=u.aabb.min[0]-1,h=u.aabb.min[1]-1,g=ed/(u.aabb.max[0]-a+2),f=ed/(u.aabb.max[1]-h+2);for(let _=0;_<i.length;_+=3){const w=i[_+2],C=(i[_+0]-a)*g|0,z=(i[_+1]-h)*f|0;w>u.heightmap[z*ed+C]&&(u.heightmap[z*ed+C]=w)}}function XP(u,i){const a={};a.indexArray=new rn,a.indexArray.reserve(4*u.length),a.vertexArray=new oc,a.vertexArray.reserve(10*u.length),a.colorArray=new wl,a.vertexArray.reserve(10*u.length);let h=0;for(const _ of u){const w=Math.min(10,Math.max(4,1.3*_.height))*i,C=[-_.normal[1],_.normal[0],0],z=Math.min(.29,.1*_.width/_.depth),x=_.width-2*_.depth*i*(z+.01),T=Te.vec3.scaleAndAdd([],_.pos,C,x/2),I=Te.vec3.scaleAndAdd([],_.pos,C,-x/2),E=[T[0],T[1],T[2]+_.height],A=[I[0],I[1],I[2]+_.height],k=Te.vec3.scaleAndAdd([],_.normal,C,z);Te.vec3.scale(k,k,w);const B=Te.vec3.scaleAndAdd([],_.normal,C,-z);Te.vec3.scale(B,B,w),Te.vec3.add(k,T,k),Te.vec3.add(B,I,B),T[2]+=.1,I[2]+=.1,a.vertexArray.emplaceBack(k[0],k[1],k[2]),a.vertexArray.emplaceBack(B[0],B[1],B[2]),a.vertexArray.emplaceBack(T[0],T[1],T[2]),a.vertexArray.emplaceBack(I[0],I[1],I[2]),a.vertexArray.emplaceBack(E[0],E[1],E[2]),a.vertexArray.emplaceBack(A[0],A[1],A[2]),a.vertexArray.emplaceBack(T[0],T[1],T[2]),a.vertexArray.emplaceBack(I[0],I[1],I[2]),a.vertexArray.emplaceBack(k[0],k[1],k[2]),a.vertexArray.emplaceBack(B[0],B[1],B[2]);const $=x/w/2;a.colorArray.emplaceBack(-$-z,-1,$,.8),a.colorArray.emplaceBack($+z,-1,$,.8),a.colorArray.emplaceBack(-$,0,$,1.3),a.colorArray.emplaceBack($,0,$,1.3),a.colorArray.emplaceBack($+z,-.8,$,.7),a.colorArray.emplaceBack($+z,-.8,$,.7),a.colorArray.emplaceBack(0,0,$,1.3),a.colorArray.emplaceBack(0,0,$,1.3),a.colorArray.emplaceBack($+z,-1.2,$,.8),a.colorArray.emplaceBack($+z,-1.2,$,.8),a.indexArray.emplaceBack(6+h,4+h,8+h),a.indexArray.emplaceBack(7+h,9+h,5+h),a.indexArray.emplaceBack(0+h,1+h,2+h),a.indexArray.emplaceBack(1+h,3+h,2+h),h+=10}const g={defined:!0,emissiveFactor:[0,0,0]},f={};return f.baseColorFactor=$t.white,g.pbrMetallicRoughness=f,a.material=g,a.aabb=new Tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),a}class e9{constructor(i){this._stringToNumber={},this._numberToString=[];for(let a=0;a<i.length;a++){const h=i[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}class t9{constructor(i,a){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new jc(qt,16,0),this.featureIndexArray=new Og,this.promoteId=a,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(i,a,h,g,f,_=0,w=0){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,f,_);const z=this.grid;for(let x=0;x<a.length;x++){const T=a[x],I=[1/0,1/0,-1/0,-1/0];for(let E=0;E<T.length;E++){const A=T[E];I[0]=Math.min(I[0],A.x),I[1]=Math.min(I[1],A.y),I[2]=Math.max(I[2],A.x),I[3]=Math.max(I[3],A.y)}w!==0&&(I[0]-=w,I[1]-=w,I[2]+=w,I[3]+=w),I[0]<qt&&I[1]<qt&&I[2]>=0&&I[3]>=0&&z.insert(C,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Tf.VectorTile(new o_(this.rawTileData)).layers,this.sourceLayerCoder=new e9(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,a,h){this.loadVTLayers(),this.serializedLayersCache.clear();const g=cf(i.filter),f=i.tileResult,_=i.transform,w=f.bufferedTilespaceBounds,C=this.grid.query(w.min.x,w.min.y,w.max.x,w.max.y,(I,E,A,k)=>kr(f.bufferedTilespaceGeometry,I,E,A,k));C.sort(YP);let z=null;_.elevation&&C.length>0&&(z=kf.create(_.elevation,this.tileID));const x={};let T;for(let I=0;I<C.length;I++){const E=C[I];if(E===T)continue;T=E;const A=this.featureIndexArray.get(E);let k=null;if(this.is3DTile){const B=this.bucketLayerIDs[0][0],$=a[B];if($.type!=="model")continue;const{queryFeature:H,intersectionZ:G}=$.queryIntersectsMatchingFeature(f,A.featureIndex,g,_);H&&this.appendToResult(x,B,A.featureIndex,H,G)}else this.loadMatchingFeature(x,A,g,i.layers,i.availableImages,a,h,(B,$,H,G=0)=>(k||(k=Xe(B,this.tileID.canonical,i.tileTransform)),$.queryIntersectsFeature(f,B,H,k,this.z,i.transform,i.pixelPosMatrix,z,G)))}return x}loadMatchingFeature(i,a,h,g,f,_,w,C){const{featureIndex:z,bucketIndex:x,sourceLayerIndex:T,layoutVertexArrayOffset:I}=a,E=this.bucketLayerIDs[x];if(g.length&&!function($,H){for(let G=0;G<$.length;G++)if(H.indexOf($[G])>=0)return!0;return!1}(g,E))return;const A=this.sourceLayerCoder.decode(T),k=this.vtLayers[A].feature(z);if(h.needGeometry){const $=St(k,!0);if(!h.filter(new fn(this.tileID.overscaledZ),$,this.tileID.canonical))return}else if(!h.filter(new fn(this.tileID.overscaledZ),k))return;const B=this.getId(k,A);for(let $=0;$<E.length;$++){const H=E[$];if(g.length&&g.indexOf(H)<0)continue;const G=_[H];if(!G)continue;let U={};B!==void 0&&w&&(U=w.getState(G.sourceLayer||"_geojsonTileLayer",B));const Y=!C||C(k,G,U,I);if(!Y)continue;const Q=new w0(k,this.z,this.x,this.y,B);let se=this.serializedLayersCache.get(H);se||(se=G.serialize(),se.id=H,this.serializedLayersCache.set(H,se)),Q.layer=Gi({},se),Q.tile=this.tileID.canonical,Q.layer.paint=i9(se.paint,G.paint,k,U,f),Q.layer.layout=i9(se.layout,G.layout,k,U,f),this.appendToResult(i,H,z,Q,Y)}}appendToResult(i,a,h,g,f){let _=i[a];_===void 0&&(_=i[a]=[]),_.push({featureIndex:h,feature:g,intersectionZ:f})}lookupSymbolFeatures(i,a,h,g,f,_,w){const C={};this.loadVTLayers();const z=cf(g);for(const x of i)this.loadMatchingFeature(C,{bucketIndex:a,sourceLayerIndex:h,featureIndex:x,layoutVertexArrayOffset:0},z,f,_,w);return C}loadFeature(i){const{featureIndex:a,sourceLayerIndex:h}=i;this.loadVTLayers();const g=this.sourceLayerCoder.decode(h),f=this.vtFeatures[g];if(f[a])return f[a];const _=this.vtLayers[g].feature(a);return f[a]=_,_}hasLayer(i){for(const a of this.bucketLayerIDs)for(const h of a)if(i===h)return!0;return!1}getId(i,a){let h=i.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];g!=null&&(h=i.properties[g]),typeof h=="boolean"&&(h=Number(h))}return h}}function i9(u,i,a,h,g){return ws(u,(f,_)=>{const w=i instanceof Su?i.get(_):null;return w&&w.evaluate?w.evaluate(a,h,g):w})}function YP(u,i){return i-u}ti(t9,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const r9=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class $3{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,h]=new Uint8Array(i,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const f=r9[15&h];if(!f)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(i,2,1),[w]=new Uint32Array(i,4,1);return new $3(w,_,f,i)}constructor(i,a=64,h=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const f=r9.indexOf(this.ArrayType),_=2*i*this.ArrayType.BYTES_PER_ELEMENT,w=i*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-w%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+C,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+_+w+C),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+C,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=i)}add(i,a){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=a,h}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return j3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,a,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:_,nodeSize:w}=this,C=[0,f.length-1,0],z=[];for(;C.length;){const x=C.pop()||0,T=C.pop()||0,I=C.pop()||0;if(T-I<=w){for(let B=I;B<=T;B++){const $=_[2*B],H=_[2*B+1];$>=i&&$<=h&&H>=a&&H<=g&&z.push(f[B])}continue}const E=I+T>>1,A=_[2*E],k=_[2*E+1];A>=i&&A<=h&&k>=a&&k<=g&&z.push(f[E]),(x===0?i<=A:a<=k)&&(C.push(I),C.push(E-1),C.push(1-x)),(x===0?h>=A:g>=k)&&(C.push(E+1),C.push(T),C.push(1-x))}return z}within(i,a,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:f,nodeSize:_}=this,w=[0,g.length-1,0],C=[],z=h*h;for(;w.length;){const x=w.pop()||0,T=w.pop()||0,I=w.pop()||0;if(T-I<=_){for(let B=I;B<=T;B++)o9(f[2*B],f[2*B+1],i,a)<=z&&C.push(g[B]);continue}const E=I+T>>1,A=f[2*E],k=f[2*E+1];o9(A,k,i,a)<=z&&C.push(g[E]),(x===0?i-h<=A:a-h<=k)&&(w.push(I),w.push(E-1),w.push(1-x)),(x===0?i+h>=A:a+h>=k)&&(w.push(E+1),w.push(T),w.push(1-x))}return C}}function j3(u,i,a,h,g,f){if(g-h<=a)return;const _=h+g>>1;n9(u,i,_,h,g,f),j3(u,i,a,h,_-1,1-f),j3(u,i,a,_+1,g,1-f)}function n9(u,i,a,h,g,f){for(;g>h;){if(g-h>600){const z=g-h+1,x=a-h+1,T=Math.log(z),I=.5*Math.exp(2*T/3),E=.5*Math.sqrt(T*I*(z-I)/z)*(x-z/2<0?-1:1);n9(u,i,a,Math.max(h,Math.floor(a-x*I/z+E)),Math.min(g,Math.floor(a+(z-x)*I/z+E)),f)}const _=i[2*a+f];let w=h,C=g;for(D0(u,i,h,a),i[2*g+f]>_&&D0(u,i,h,g);w<C;){for(D0(u,i,w,C),w++,C--;i[2*w+f]<_;)w++;for(;i[2*C+f]>_;)C--}i[2*h+f]===_?D0(u,i,h,C):(C++,D0(u,i,C,g)),C<=a&&(h=C+1),a<=C&&(g=C-1)}}function D0(u,i,a,h){U3(u,a,h),U3(i,2*a,2*h),U3(i,2*a+1,2*h+1)}function U3(u,i,a){const h=u[i];u[i]=u[a],u[a]=h}function o9(u,i,a,h){const g=u-a,f=i-h;return g*g+f*f}n.$=Mg,n.A=class extends M_{},n.B=Us,n.C=Ht,n.D=kp,n.E=Jt,n.F=yp,n.G=Nc,n.H=_p,n.I=h3,n.J=tf,n.K=Vc,n.L=$c,n.M=xu,n.N=$r,n.O=Xo,n.P=Pt,n.Q=qr,n.R=nl,n.S=bo,n.T=S3,n.U=mi,n.V=M_,n.W=Rp,n.X=vp,n.Y=_g,n.Z=function(u){const i=u.value;let a=[];if(!i)return a;const h=Us(i);return h!=="string"?(a=a.concat([new M_(u.key,i,`string expected, "${h}" found`)]),a):(g8(i,!0)||(a=a.concat([new M_(u.key,i,`invalid url "${i}"`)])),a)},n._=it,n.a=function(u){return Se.API_CDN_URL_REGEX.test(u)},n.a$=nc,n.a0=Hr,n.a1=Ft,n.a2=class{constructor(u){this.specification=u}possiblyEvaluate(u,i){return co(u.expression.evaluate(i))}interpolate(u,i,a){return{x:ai(u.x,i.x,a),y:ai(u.y,i.y,a),z:ai(u.z,i.z,a),azimuthal:ai(u.azimuthal,i.azimuthal,a),polar:ai(u.polar,i.polar,a)}}},n.a3=fn,n.a4=Lh,n.a5=$e,n.a6=Te,n.a7=sr,n.a8=Su,n.a9=Lu,n.aA=ir,n.aB=r8,n.aC=c8,n.aD=i8,n.aE=function(u,i){const a=document.createElement("video");a.muted=!0,a.onloadstart=function(){i(null,a)};for(let h=0;h<u.length;h++){const g=document.createElement("source");is(u[h])||(a.crossOrigin="Anonymous"),g.src=u[h],a.appendChild(g)}return{cancel:()=>{}}},n.aF=v_,n.aG=function(u){return fetch(u).then(i=>i.arrayBuffer()).then(i=>J8(i,0,u))},n.aH=Q8,n.aI=class{constructor(u,i,a,h){this.id=u,this.position=i!=null?new O(i[0],i[1]):new O(0,0),this.orientation=a??[0,0,0],this.nodes=h,this.uploaded=!1,this.aabb=new Tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(u,i){if(Te.mat4.multiply(u.matrix,i,u.matrix),u.meshes)for(const a of u.meshes){const h=Tr.applyTransformFast(a.aabb,u.matrix);this.aabb.encapsulate(h)}if(u.children)for(const a of u.children)this._applyTransformations(a,u.matrix)}computeBoundsAndApplyParent(){const u=Te.mat4.identity([]);for(const i of this.nodes)this._applyTransformations(i,u)}computeModelMatrix(u,i,a,h,g,f,_=!1){b8(this.matrix,this,u.transform,this.position,i,a,h,g,f,_)}upload(u){if(!this.uploaded){for(const i of this.nodes)A3(i,u);for(const i of this.nodes)E_(i);this.uploaded=!0}}destroy(){for(const u of this.nodes)I3(u)}},n.aJ=bs,n.aK=function(u){return u.indexOf($h)>=0},n.aL=m0,n.aM=ue,n.aN=ye,n.aO=Eu,n.aP=rn,n.aQ=Vn,n.aR=xf,n.aS=__,n.aT=function(){Ps.isLoading()||Ps.isLoaded()||Dp()!=="deferred"||Sg()},n.aU=cf,n.aV=St,n.aW=w0,n.aX=ka,n.aY=i3,n.aZ=Gv,n.a_=Xe,n.aa=ai,n.ab=qt,n.ac=Ki,n.ad=class{constructor(u){this.specification=u}possiblyEvaluate(u,i){return function([a,h]){const g=co([1,a,h]);return{x:g.x,y:g.y,z:g.z}}(u.expression.evaluate(i))}interpolate(u,i,a){return{x:ai(u.x,i.x,a),y:ai(u.y,i.y,a),z:ai(u.z,i.z,a)}}},n.ae=function(u,i,a=0,h=!0){const g=new Pt(a,a),f=u.sub(g),_=i.add(g),w=[f,new Pt(_.x,f.y),_,new Pt(f.x,_.y)];return h&&w.push(f.clone()),w},n.af=function(u,i){const a=[];for(let h=0;h<u.length;h++){const g=hr(h-1,-1,u.length-1),f=hr(h+1,-1,u.length-1),_=u[h],w=u[f],C=u[g].sub(_).unit(),z=w.sub(_).unit(),x=z.angleWithSep(C.x,C.y),T=C.add(z).unit().mult(-1*i/Math.sin(x/2));a.push(_.add(T))}return a},n.ag=Uw,n.ah=kr,n.ai=function(u,i,a=0){return Te.vec3.fromValues(((i.x-a)*u.scale-u.x)*qt,(i.y*u.scale-u.y)*qt,ve(i.z,i.y))},n.aj=us,n.ak=aw,n.al=function(u){let i=1/0,a=1/0,h=-1/0,g=-1/0;for(const f of u)i=Math.min(i,f.x),a=Math.min(a,f.y),h=Math.max(h,f.x),g=Math.max(g,f.y);return{min:new Pt(i,a),max:new Pt(h,g)}},n.am=ee,n.an=tr,n.ao=Re,n.ap=Ot,n.aq=So,n.ar=function(u,i){const a={};for(let h=0;h<i.length;h++){const g=i[h];g in u&&(a[g]=u[g])}return a},n.as=j,n.at=ne,n.au=class{constructor(u){this.entries={},this.scheduler=u}request(u,i,a,h){const g=this.entries[u]=this.entries[u]||{callbacks:[]};if(g.result){const[f,_]=g.result;return this.scheduler?this.scheduler.add(()=>{h(f,_)},i):h(f,_),()=>{}}return g.callbacks.push(h),g.cancel||(g.cancel=a((f,_)=>{g.result=[f,_];for(const w of g.callbacks)this.scheduler?this.scheduler.add(()=>{w(f,_)},i):w(f,_);setTimeout(()=>delete this.entries[u],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(f=>f!==h),g.callbacks.length||(g.cancel(),delete this.entries[u]))}}},n.av=df,n.aw=function(u,i,a){const h=JSON.stringify(u.request);return u.data&&(this.deduped.entries[h]={result:[null,u.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:u.isSymbolTile,zoom:u.tileZoom},g=>{const f=Xl(u.request,(_,w,C,z)=>{_?g(_):w&&g(null,{vectorTile:a?void 0:new Tf.VectorTile(new o_(w)),rawData:w,cacheControl:C,expires:z})});return()=>{f.cancel(),g()}},i)},n.ax=function(u){bn++,bn>zi&&(u.getActor().send("enforceCacheSizeLimit",ki),bn=0)},n.ay=kt,n.az=function(u){return u<=1?1:Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},n.b=function(u){return Se.API_FONTS_REGEX.test(u)},n.b$=hs,n.b0=qp,n.b1=Ya,n.b2=yn,n.b3=t0,n.b4=x3,n.b5=function(u,i){const a=Lu(i.zoom);if(a===0)return ac(u);const h=Hg(u),g=Bv(h),f=ee(h.getWest())*i.worldSize,_=ee(h.getEast())*i.worldSize,w=ne(h.getNorth())*i.worldSize,C=ne(h.getSouth())*i.worldSize,z=[f,w,0],x=[_,w,0],T=[f,C,0],I=[_,C,0],E=Te.mat4.invert([],i.globeMatrix);return Te.vec3.transformMat4(z,z,E),Te.vec3.transformMat4(x,x,E),Te.vec3.transformMat4(T,T,E),Te.vec3.transformMat4(I,I,E),g[0]=Wc(g[0],T,a),g[1]=Wc(g[1],I,a),g[2]=Wc(g[2],x,a),g[3]=Wc(g[3],z,a),Tr.fromPoints(g)},n.b6=Wg,n.b7=Qp,n.b8=Wc,n.b9=ff,n.bA=$t,n.bB=hr,n.bC=Oi,n.bD=Zl,n.bE=re,n.bF=function(u,i,a){u[4*i+0]=a[0],u[4*i+1]=a[1],u[4*i+2]=a[2],u[4*i+3]=a[3]},n.bG=Xh,n.bH=Za,n.bI=Zp,n.bJ=qn,n.bK=Gc,n.bL=O,n.bM=Ww,n.bN=ar,n.bO=Js,n.bP=h8,n.bQ=Hn,n.bR=J6,n.bS=function(u,i,a,h,g,f,_,w,C){if(C.name==="globe")return J6(u,i,new Hn(a,h,g),!1);const z=m0({z:a,x:h,y:g},C);return new Tr([(f+z.x/z.scale)*i,i*(z.y/z.scale),_],[(f+z.x2/z.scale)*i,i*(z.y2/z.scale),w])},n.bT=function(u,i,a){let h=0;for(let g=0;g<2;++g)u[g]>0&&(h+=(u[g]-0)*(u[g]-0)),i[g]<0&&(h+=(0-i[g])*(0-i[g]));return h},n.bU=be,n.bV=p,n.bW=function(u){const i=Te.mat4.identity(new Float64Array(16));Te.mat4.multiply(i,u.pixelMatrix,u.globeMatrix);const a=[0,v,0],h=[0,b,0];return Te.vec3.transformMat4(a,a,i),Te.vec3.transformMat4(h,h,i),[a[0]>0&&a[0]<=u.width&&a[1]>0&&a[1]<=u.height&&!$v(u,new O(u.center.lat,90)),h[0]>0&&h[0]<=u.width&&h[1]>0&&h[1]<=u.height&&!$v(u,new O(u.center.lat,-90))]},n.bX=function(u,i){const{scale:a}=u.tileTransform,h=a*qt/(u.tileSize*Math.pow(2,i.zoom-u.tileID.overscaledZ+u.tileID.canonical.z));return Te.mat2.scale(new Float32Array(4),i.inverseAdjustmentMatrix,[h,h])},n.bY=w_,n.bZ=u8,n.b_=function(u){const i=u8(u,!0);return Te.mat2.invert([],[i[0],i[1],i[4],i[5]])},n.ba=Qn,n.bb=R3,n.bc=o_,n.bd=Xl,n.be=function(u){const i=[];for(const a in u)i.push(u[a]);return i},n.bf=function(u,i){const a=[];for(const h in u)h in i||a.push(h);return a},n.bg=Mr,n.bh=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bi=Jn,n.bj=function(u,i){const{x:a,y:h}=u.point,g=e5(a,h,u.worldSize/u._pixelsPerMercatorPixel,0,0);return Te.mat4.multiply(g,g,Fv(ac(i)))},n.bk=Cf,n.bl=ba,n.bm=n_,n.bn=function(u,i,a,h,g){const f=5*i+2;u.float32[f+0]=a,u.float32[f+1]=h,u.float32[f+2]=g},n.bo=g_,n.bp=Dw,n.bq=wt,n.br=Mo,n.bs=k5,n.bt=m8,n.bu=F5,n.bv=N5,n.bw=p3,n.bx=Fw,n.by=u3,n.bz=$3,n.c=De,n.c$=Lr,n.c0=function(u){const{x:i,y:a}=u.point,{lng:h,lat:g}=u._center;return e5(i,a,u.worldSize,h,g)},n.c1=un,n.c2=gr,n.c3=qg,n.c4=function(u){const i=Math.round((u+45+360)%360/90)%4;return Xr[i]},n.c5=45,n.c6=te,n.c7=Sf,n.c8=function(u,i,a){const h=Math.sqrt(u*u+i*i+a*a),g=h>0?Math.acos(a/h)*lo:0;let f=u!==0||i!==0?Math.atan2(-i,-u)*lo+90:0;return f<0&&(f+=360),[h,f,g]},n.c9=ke,n.cA=function(u){const i=be-5;u=Ot(u,-i,i)/i*90;const a=Math.pow(Math.abs(Math.sin(Oi(u))),3);return Math.round(a*(m.length-1))},n.cB=function(u,i,a,h){const g=i.getNorth(),f=i.getSouth(),_=i.getWest(),w=i.getEast(),C=1<<u.z,z=w-_,x=g-f,T=z/c,I=-x/m[a],E=[0,T,0,I,0,0,g,_,0];if(u.z>0){const A=180/h;Te.mat3.multiply(E,E,[A/z+1,0,0,0,A/x+1,0,-.5*A/T,.5*A/I,1])}return E[2]=C,E[5]=u.x,E[8]=u.y,E},n.cC=ac,n.cD=function(u,i,a){const h=Te.mat4.identity(new Float64Array(16)),g=(i/(1<<u)-.5)*Math.PI*2;return Te.mat4.rotateY(h,a.globeMatrix,g),Float32Array.from(h)},n.cE=class{isDataAvailableAtPoint(u){const i=this._source();if(this.isUsingMockSource()||!i||u.y<0||u.y>1)return!1;const a=i.getSource().maxzoom,h=1<<a,g=Math.floor(u.x),f=Math.floor((u.x-g)*h),_=Math.floor(u.y*h),w=this.findDEMTileFor(new ir(a,g,a,f,_));return!(!w||!w.dem)}getAtPointOrZero(u,i=0){return this.getAtPoint(u,i)||0}getAtPoint(u,i,a=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const h=this._source();if(!h||u.y<0||u.y>1)return i;const g=h.getSource().maxzoom,f=1<<g,_=Math.floor(u.x),w=u.x-_,C=new ir(g,_,g,Math.floor(w*f),Math.floor(u.y*f)),z=this.findDEMTileFor(C);if(!z||!z.dem)return i;const x=z.dem,T=1<<z.tileID.canonical.z,I=(w*T-z.tileID.canonical.x)*x.dim,E=(u.y*T-z.tileID.canonical.y)*x.dim,A=Math.floor(I),k=Math.floor(E);return(a?this.exaggeration():1)*ai(ai(x.get(A,k),x.get(A,k+1),E-k),ai(x.get(A+1,k),x.get(A+1,k+1),E-k),I-A)}getAtTileOffset(u,i,a){const h=1<<u.canonical.z;return this.getAtPointOrZero(new $e(u.wrap+(u.canonical.x+i/qt)/h,(u.canonical.y+a/qt)/h))}getAtTileOffsetFunc(u,i,a,h){return g=>{const f=this.getAtTileOffset(u,g.x,g.y),_=h.upVector(u.canonical,g.x,g.y),w=h.upVectorScale(u.canonical,i,a).metersToTile;return Te.vec3.scale(_,_,f*w),_}}getForTilePoints(u,i,a,h){if(this.isUsingMockSource())return!1;const g=kf.create(this,u,h);return!!g&&(i.forEach(f=>{f[2]=this.exaggeration()*g.getElevationAt(f[0],f[1],a)}),!0)}getMinMaxForTile(u){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(u);if(!i||!i.dem)return null;const a=i.dem.tree,h=i.tileID,g=1<<u.canonical.z-h.canonical.z;let f=u.canonical.x/g-h.canonical.x,_=u.canonical.y/g-h.canonical.y,w=0;for(let C=0;C<u.canonical.z-h.canonical.z&&!a.leaves[w];C++){f*=2,_*=2;const z=2*Math.floor(_)+Math.floor(f);w=a.childOffsets[w]+z,f%=1,_%=1}return{min:this.exaggeration()*a.minimums[w],max:this.exaggeration()*a.maximums[w]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(u,i,a){throw new Error("Pure virtual method called.")}pointCoordinate(u){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(u){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const u=this.visibleDemTiles;if(u.length===0)return null;let i=!1,a=Number.MAX_VALUE,h=Number.MIN_VALUE;for(const g of u){const f=this.getMinMaxForTile(g.tileID);f&&(a=Math.min(a,f.min),h=Math.max(h,f.max),i=!0)}return i?{min:a,max:h}:null}},n.cF=f5,n.cG=ku,n.cH=function(u,i){return[Math.pow(u[0],2.2)*i,Math.pow(u[1],2.2)*i,Math.pow(u[2],2.2)*i]},n.cI=Q6,n.cJ=ce,n.cK=oe,n.cL=256,n.cM=function(u,i){const a=[0,0,0],h=Wg(ac(i.canonical));return Te.vec3.transformMat4(a,a,h),Te.vec3.transformMat4(a,a,u),a},n.cN=u=>({u_camera_to_center_distance:new qn(u),u_extrude_scale:new Mf(u),u_device_pixel_ratio:new qn(u),u_matrix:new Xh(u),u_inv_rot_matrix:new Xh(u),u_merc_center:new Za(u),u_tile_id:new Zp(u),u_zoom_transition:new qn(u),u_up_dir:new Zp(u),u_emissive_strength:new qn(u)}),n.cO=u=>({u_matrix:new Xh(u),u_pixels_to_tile_units:new Mf(u),u_device_pixel_ratio:new qn(u),u_units_to_pixels:new Za(u),u_dash_image:new Gc(u),u_gradient_image:new Gc(u),u_image_height:new qn(u),u_texsize:new Za(u),u_tile_units_to_pixels:new qn(u),u_alpha_discard_threshold:new qn(u),u_trim_offset:new Za(u),u_trim_fade_range:new Za(u),u_trim_color:new Sf(u),u_emissive_strength:new qn(u),u_zbias_factor:new qn(u),u_tile_to_meter:new qn(u)}),n.cP=u=>({u_matrix:new Xh(u),u_texsize:new Za(u),u_pixels_to_tile_units:new Mf(u),u_device_pixel_ratio:new qn(u),u_image:new Gc(u),u_units_to_pixels:new Za(u),u_tile_units_to_pixels:new qn(u),u_alpha_discard_threshold:new qn(u),u_trim_offset:new Za(u),u_emissive_strength:new qn(u),u_zbias_factor:new qn(u),u_tile_to_meter:new qn(u)}),n.cQ=Cu,n.cR=yD,n.cS=vD,n.cT=r5,n.cU=(u,i,a,h,g,f)=>{const _=u.transform,w=_.projection.name==="globe";let C;if(f.paint.get("circle-pitch-alignment")==="map")if(w){const x=Q6(_.zoom,i.canonical)*_._pixelsPerMercatorPixel;C=Float32Array.from([x,0,0,x])}else C=_.calculatePixelsToTileUnitsMatrix(a);else C=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:u.transform.getCameraToCenterDistance(_.projection),u_matrix:u.translatePosMatrix(i.projMatrix,a,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Zt.devicePixelRatio,u_extrude_scale:C,u_inv_rot_matrix:wz,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:f.paint.get("circle-emissive-strength")};if(w){z.u_inv_rot_matrix=h,z.u_merc_center=g,z.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],z.u_zoom_transition=Lu(_.zoom);const x=g[0]*qt,T=g[1]*qt;z.u_up_dir=_.projection.upVector(new Hn(0,0,0),x,T)}return z},n.cV=hw,n.cW=(u,i,a,h,g,f)=>{const _=u.transform,w=_.pitch<15?lw(.07,.7,Ot((14-_.zoom)/5,0,1)):.07;return{u_matrix:uw(u,i,a,h),u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:_.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:g,u_image:0,u_tile_units_to_pixels:cw(i,_),u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:f,u_emissive_strength:a.paint.get("line-emissive-strength"),u_zbias_factor:w,u_tile_to_meter:ke(i.tileID.canonical,0)}},n.cX=(u,i,a,h,g,f,_)=>{const w=u.transform,C=w.calculatePixelsToTileUnitsMatrix(i),z=w.pitch<15?lw(.07,.7,Ot((14-w.zoom)/5,0,1)):.07;return{u_matrix:uw(u,i,a,h),u_pixels_to_tile_units:C,u_device_pixel_ratio:f,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:dw(a)&&i.lineAtlasTexture?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:cw(i,u.transform),u_alpha_discard_threshold:0,u_trim_offset:_,u_trim_fade_range:a.paint.get("line-trim-fade-range"),u_trim_color:a.paint.get("line-trim-color").toRenderColor(a.lut).toArray01(),u_emissive_strength:a.paint.get("line-emissive-strength"),u_zbias_factor:z,u_tile_to_meter:ke(i.tileID.canonical,0)}},n.cY=ts,n.cZ=e0,n.c_=K5,n.ca=Tr,n.cb=co,n.cc=function(u){return[Math.pow(u[0],1/2.2),Math.pow(u[1],1/2.2),Math.pow(u[2],1/2.2)]},n.cd=function(u){return u({pluginStatus:wo,pluginURL:Ds}),zp.on("pluginStateChange",u),u},n.ce=Rf,n.cf=A_,n.cg=If,n.ch=d3,n.ci=ha,n.cj=wg,n.ck=Ii,n.cl=_e,n.cm=to,n.cn=function(u){const i=u.indexOf($h);return i>=0?u.slice(0,i):u},n.co=function(u){const i=u.indexOf($h);return i>=0?u.slice(i+1):""},n.cp=function(u){const i=[],a=u.id;return a===void 0&&i.push({message:`layers.${a}: missing required property "id"`}),u.render===void 0&&i.push({message:`layers.${a}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&i.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),i},n.cq=function(u,i,a,h){return u.type==="custom"?new YD(u,i):new lP[u.type](u,i,a,h)},n.cr=vo,n.cs=zp,n.ct=ol,n.cu=Xp,n.cv=class extends Ml{constructor(u){super(u),this.current=Pv}set(u,i,a){if(this.fetchUniformLocation(u,i)){for(let h=0;h<9;h++)if(a[h]!==this.current[h]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},n.cw=Do,n.cx=function(u,i,a){const h=Lu(a.zoom),g=u.style.map._antialias,f=i.options.extStandardDerivativesForceOff||u.terrain&&u.terrain.exaggeration()>0;return h===0&&!g&&!f},n.cy=function(u){const i=u.pixelsPerMeter,a=i/re(1,u.center.lat),h=Te.mat4.identity(new Float64Array(16));return Te.mat4.translate(h,h,[u.point.x,u.point.y,0]),Te.mat4.scale(h,h,[a,a,i]),Float32Array.from(h)},n.cz=Hg,n.d=function(u){return Se.API_TILEJSON_REGEX.test(u)},n.d$=M,n.d0=r_,n.d1=Bu,n.d2=450,n.d3=7,n.d4=XD,n.d5=dr,n.d6=yf,n.d7=256,n.d8=Fv,n.d9=oc,n.dA=t5,n.dB=function(u){const i=[0,0,0],a=Te.mat4.identity(new Float64Array(16));return Te.mat4.multiply(a,u.pixelMatrix,u.globeMatrix),Te.vec3.transformMat4(i,i,a),new Pt(i[0],i[1])},n.dC=function(u,i,a=!1){if(wo===Ap||wo===Fh||wo===Nh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ds=Zt.resolveURL(u),wo=Ap,af=i,Ip(),a||Sg()},n.dD=Dp,n.dE=function(){A_().acquire(L3)},n.dF=function(){const u=A0;u&&(u.isPreloaded()&&u.numActive()===1&&(u.release(L3),A0=null))},n.dG=C0,n.dH=function(u){const i=yr();if(!i)return;const a=i.delete(xi);u&&a.catch(u).then(()=>u())},n.dI=T0,n.dJ=q8,n.dK=function(u){O3=Zt.resolveURL(u),Bf||(Bf=new Rf(A_(),new Jt)),Bf.broadcast("setDracoUrl",O3)},n.dL=H8,n.dM=function(u){Of=Zt.resolveURL(u),Bf||(Bf=new Rf(A_(),new Jt)),Bf.broadcast("setMeshoptUrl",Of)},n.dN=ti,n.dO=Ou,n.dP=zl,n.dQ=e9,n.dR=t9,n.dS=nw,n.dT=ws,n.dU=kw,n.dV=function(u,i,a,h,g,f,_,w,C,z,x=1,T){u.createArrays(),u.tilePixelRatio=qt/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;const I=u.layers[0].layout,E=u.layers[0]._unevaluatedLayout._values,A={};if(A.scaleFactor=x,A.textSizeScaleRange=I.get("text-size-scale-range"),A.iconSizeScaleRange=I.get("icon-size-scale-range"),A.textScaleFactor=Ot(A.scaleFactor,A.textSizeScaleRange[0],A.textSizeScaleRange[1]),A.iconScaleFactor=Ot(A.scaleFactor,A.iconSizeScaleRange[0],A.iconSizeScaleRange[1]),u.textSizeData.kind==="composite"){const{minZoom:H,maxZoom:G}=u.textSizeData;A.compositeTextSizes=[E["text-size"].possiblyEvaluate(new fn(H),w),E["text-size"].possiblyEvaluate(new fn(G),w)]}if(u.iconSizeData.kind==="composite"){const{minZoom:H,maxZoom:G}=u.iconSizeData;A.compositeIconSizes=[E["icon-size"].possiblyEvaluate(new fn(H),w),E["icon-size"].possiblyEvaluate(new fn(G),w)]}A.layoutTextSize=E["text-size"].possiblyEvaluate(new fn(C+1),w),A.layoutIconSize=E["icon-size"].possiblyEvaluate(new fn(C+1),w),A.textMaxSize=E["text-size"].possiblyEvaluate(new fn(18),w);const k=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",B=I.get("text-size");let $=!1;for(const H of u.features)if(H.icon&&H.icon.nameSecondary){$=!0;break}for(const H of u.features){const G=I.get("text-font").evaluate(H,{},w).join(","),U=B.evaluate(H,{},w)*A.textScaleFactor,Y=A.layoutTextSize.evaluate(H,{},w)*A.textScaleFactor,Q=(A.layoutIconSize.evaluate(H,{},w),{horizontal:{},vertical:void 0}),se=H.text;let xe,pe=[0,0];if(se){const me=se.toString(),Ie=I.get("text-letter-spacing").evaluate(H,{},w)*Mo,Fe=I.get("text-line-height").evaluate(H,{},w)*Mo,Ne=xg(me)?Ie:0,He=I.get("text-anchor").evaluate(H,{},w),et=I.get("text-variable-anchor");if(!et){const ht=I.get("text-radial-offset").evaluate(H,{},w);pe=ht?Fw(He,[ht*Mo,f3]):I.get("text-offset").evaluate(H,{},w).map(ei=>ei*Mo)}let rt=k?"center":I.get("text-justify").evaluate(H,{},w);const Ye=I.get("symbol-placement")==="point",_t=Ye?I.get("text-max-width").evaluate(H,{},w)*Mo:1/0,zt=ht=>{u.allowVerticalPlacement&&Tp(me)&&(Q.vertical=c3(se,i,a,g,G,_t,Fe,He,ht,Ne,pe,ba.vertical,!0,Y,U))};if(!k&&et){const ht=rt==="auto"?et.map(Vt=>p3(Vt)):[rt];let ei=!1;for(let Vt=0;Vt<ht.length;Vt++){const Bt=ht[Vt];if(!Q.horizontal[Bt])if(ei)Q.horizontal[Bt]=Q.horizontal[0];else{const Ct=c3(se,i,a,g,G,_t,Fe,"center",Bt,Ne,pe,ba.horizontal,!1,Y,U);Ct&&(Q.horizontal[Bt]=Ct,ei=Ct.positionedLines.length===1)}}zt("left")}else{if(rt==="auto"&&(rt=p3(He)),Ye||I.get("text-writing-mode").indexOf("horizontal")>=0||!Tp(me)){const ht=c3(se,i,a,g,G,_t,Fe,He,rt,Ne,pe,ba.horizontal,!1,Y,U);ht&&(Q.horizontal[rt]=ht)}zt(Ye?"left":rt)}}let ge=!1;if(H.icon&&H.icon.namePrimary){const me=h[H.icon.namePrimary];me&&(xe=ID(g[H.icon.namePrimary],H.icon.nameSecondary?g[H.icon.nameSecondary]:void 0,I.get("icon-offset").evaluate(H,{},w),I.get("icon-anchor").evaluate(H,{},w)),ge=me.sdf,u.sdfIcons===void 0?u.sdfIcons=me.sdf:u.sdfIcons!==me.sdf&&Yi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(me.pixelRatio!==u.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}const Pe=$w(Q.horizontal)||Q.vertical;u.iconsInText||(u.iconsInText=!!Pe&&Pe.iconsInText),(Pe||xe)&&OD(u,H,Q,xe,h,A,Y,0,pe,ge,_,w,z,T,$)}f&&u.generateCollisionDebugBuffers(C,u.collisionBoxArray,A.textScaleFactor)},n.dW=Tf,n.dX=C_,n.dY=En,n.dZ=I5,n.d_=yw,n.da=Hc,n.db=Vp,n.dc=function(u,i,a,h,g){return Ot((u-i)/(a-i)*(g-h)+h,h,g)},n.dd=Qd,n.de=we,n.df=class{constructor(u,i,a,h){this.context=u,this.format=h,this.size=a,this.texture=u.gl.createTexture();const[g,f,_]=this.size,{gl:w}=u;w.bindTexture(w.TEXTURE_3D,this.texture),u.pixelStoreUnpackFlipY.set(!1),u.pixelStoreUnpack.set(1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),w.texImage3D(w.TEXTURE_3D,0,this.format,g,f,_,0,b3(this.format),w3(this.format),i.data)}bind(u,i){const{context:a}=this,{gl:h}=a;h.bindTexture(h.TEXTURE_3D,this.texture),u!==this.minFilter&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MAG_FILTER,u),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MIN_FILTER,u),this.minFilter=u),i!==this.wrapS&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_S,i),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_T,i),this.wrapS=i)}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}},n.dg=T3,n.dh=[1,1,1],n.di=kf,n.dj=Pf,n.dk=sc,n.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Pt(1/0,1/0),max:new Pt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(u,i=!1){const a=L5(new Pt(0,0),new Pt(qt,qt),u),h=[];if(i&&!Jv(a,this._globalClipBounds))return h;for(const g of this._activeRegions){if(g.hiddenByOverlap||!Jv(a,g))continue;const f=Hz(g.min,g.max,u);h.push({min:f.min,max:f.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return h}setSources(u){this._setSources(u.map(i=>({getSourceId:()=>i.cache.id,getFootprints:()=>{const a=[];for(const h of i.cache.getVisibleCoordinates()){const g=i.cache.getTile(h).buckets[i.layer];g&&g.updateFootprints(h.toUnwrapped(),a)}return a},getOrder:()=>i.order,getClipMask:()=>i.clipMask,getClipScope:()=>i.clipScope})))}_addSource(u){const i=u.getFootprints();if(i.length===0)return;const a=u.getOrder(),h=u.getClipMask(),g=u.getClipScope();for(const f of i){if(!f.footprint)continue;const _=L5(f.footprint.min,f.footprint.max,f.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:f.id,footprint:f.footprint,order:a,clipMask:h,clipScope:g})}this._sourceIds.push(u.getSourceId())}_computeReplacement(){this._activeRegions.sort((i,a)=>i.priority-a.priority||t_(i.min,a.min)||t_(i.max,a.max)||i.order-a.order||i.clipMask-a.clipMask||function(h,g){const f=(_,w)=>_+w;return h.length-g.length||h.reduce(f,"").localeCompare(g.reduce(f,""))}(i.clipScope,a.clipScope));let u=this._activeRegions.length!==this._prevRegions.length;if(!u){let i=0;for(;!u&&i!==this._activeRegions.length;){const a=this._activeRegions[i],h=this._prevRegions[i];u=a.priority!==h.priority||!R5(a,h)||a.order!==h.order||a.clipMask!==h.clipMask||!Jn(a.clipScope,h.clipScope),++i}}if(u){++this._updateTime;for(const a of this._activeRegions)a.order!==e_&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,a.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,a.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,a.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,a.max.y));const i=a=>{const h=this._activeRegions;if(a>=h.length)return a;const g=h[a].priority;for(;a<h.length&&h[a].priority===g;)++a;return a};if(this._sourceIds.length>1){let a=0,h=i(a);for(;a!==h;){let g=a;const f=a;for(;g!==h;){const _=this._activeRegions[g];_.hiddenByOverlap=!1;for(let w=0;w<f;w++){const C=this._activeRegions[w];if(!C.hiddenByOverlap&&_.order===e_&&Jv(_,C)&&(_.hiddenByOverlap=B5(_.footprint,_.tileId,C.footprint,C.tileId),_.hiddenByOverlap))break}++g}a=h,h=i(a)}}}}_setSources(u){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let i=u.length-1;i>=0;i--)this._addSource(u[i]);this._computeReplacement()}},n.dm=class{constructor(u){this._createGrid(u),this._createPoles(u)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const u of this._poleSegments)u.destroy();for(const u of this._gridSegments)u.withSkirts.destroy(),u.withoutSkirts.destroy()}_fillGridMeshWithLods(u,i){const a=new nc,h=new rn,g=[],f=u+1+2,_=i[0]+1,w=i[0]+1+(1+i.length),C=(z,x,T)=>{let I=z===f-1?z-2:z===0?z:z-1;return I+=T?24575:0,[I,x]};for(let z=0;z<f;++z)a.emplaceBack(...C(z,0,!0));for(let z=0;z<_;++z)for(let x=0;x<f;++x)a.emplaceBack(...C(x,z,(x===0||x===f-1)&&!0));for(let z=0;z<i.length;++z){const x=i[z];for(let T=0;T<f;++T)a.emplaceBack(...C(T,x,!0))}for(let z=0;z<i.length;++z){const x=h.length,T=i[z]+1+2,I=new rn;for(let k=0;k<T-1;k++){const B=k===T-2,$=B?f*(w-i.length+z-k):f;for(let H=0;H<f-1;H++){const G=k*f+H;k===0||B||H===0||H===f-2?(I.emplaceBack(G+1,G,G+$),I.emplaceBack(G+$,G+$+1,G+1)):(h.emplaceBack(G+1,G,G+$),h.emplaceBack(G+$,G+$+1,G+1))}}const E=yn.simpleSegment(0,x,a.length,h.length-x);for(let k=0;k<I.uint16.length;k+=3)h.emplaceBack(I.uint16[k],I.uint16[k+1],I.uint16[k+2]);const A=yn.simpleSegment(0,x,a.length,h.length-x);g.push({withoutSkirts:E,withSkirts:A})}return{vertices:a,indices:h,segments:g}}_createGrid(u){const i=this._fillGridMeshWithLods(c,m);this._gridSegments=i.segments,this._gridBuffer=u.createVertexBuffer(i.vertices,Ya.members),this._gridIndexBuffer=u.createIndexBuffer(i.indices,!0)}_createPoles(u){const i=new rn;for(let _=0;_<=c;_++)i.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=u.createIndexBuffer(i,!0);const a=new Hc,h=new Hc,g=new Hc,f=new Hc;this._poleSegments=[];for(let _=0,w=0;_<qg;_++){const C=360/(1<<_);a.emplaceBack(0,-So,0,.5,0),h.emplaceBack(0,-So,0,.5,1),g.emplaceBack(0,-So,0,.5,.5),f.emplaceBack(0,-So,0,.5,.5);for(let z=0;z<=c;z++){let x=z/c,T=0;const I=ai(0,C,x),[E,A,k]=S(xz,bz,I,So);a.emplaceBack(E,A,k,x,T),h.emplaceBack(E,A,k,x,1-T);const B=Oi(I);x=.5+.5*Math.sin(B),T=.5+.5*Math.cos(B),g.emplaceBack(E,A,k,x,T),f.emplaceBack(E,A,k,x,1-T)}this._poleSegments.push(yn.simpleSegment(w,0,66,64)),w+=66}this._poleNorthVertexBuffer=u.createVertexBuffer(a,Jr,!1),this._poleSouthVertexBuffer=u.createVertexBuffer(h,Jr,!1),this._texturedPoleNorthVertexBuffer=u.createVertexBuffer(g,Jr,!1),this._texturedPoleSouthVertexBuffer=u.createVertexBuffer(f,Jr,!1)}getGridBuffers(u,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[u].withSkirts:this._gridSegments[u].withoutSkirts]}getPoleBuffers(u,i){return[i?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,i?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[u]]}},n.dn=e_,n.dp=hi,n.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.dr=Rt,n.ds=Ee,n.dt=D,n.du=function([u,i,a]){const h=Math.hypot(u,i,a),g=Math.atan2(u,a),f=.5*Math.PI-Math.acos(-i/h);return new O(un(g),un(f))},n.dv=E3,n.dw=R,n.dx=function(u){const i=u.navigator?u.navigator.userAgent:null;return!!function(a){if(Wl==null){const h=a.navigator?a.navigator.userAgent:null;Wl=!!a.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return Wl}(u)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dy=function(u,i){ki=u,zi=i},n.dz=$v,n.e=Se,n.e0=function(u){let i=0;if(new Uint32Array(u,0,1)[0]!==W8){const a=new Uint32Array(u,0,7),[,,h,g,f,_]=a;i=a.byteLength+g+f+_+f,(h!==u.byteLength||i>=u.byteLength)&&Yi("Invalid b3dm header information.")}return J8(u,i)},n.e1=function(u,i){const a=Q8(u);for(const h of a){for(const g of h.meshes)ZP(g);h.lights&&(h.lightMeshIndex=h.meshes.length,h.meshes.push(XP(h.lights,i)))}return a},n.e2=T_,n.e3=C8,n.e4=Ps,n.e5=function(u){Fr(),nr?.then(i=>{i.keys().then(a=>{for(let h=0;h<a.length-u;h++)i.delete(a[h])})})},n.f=function(u){return u.indexOf("mapbox:")===0},n.g=function(u,i){return ol(Gi(u,{method:"GET"}),i)},n.h=je,n.i=function(u){return Se.API_STYLE_REGEX.test(u)&&!De(u)},n.j=function(u){return decodeURIComponent(atob(u).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(u){return btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,(i,a)=>String.fromCharCode(+("0x"+a))))},n.l=Gi,n.m=Fn,n.n=function(u,i){return ol(Gi(u,{type:"json"}),i)},n.o=Ts,n.p=function(u,i){return ol(Gi(u,{method:"POST"}),i)},n.q=Zt,n.r=Jo,n.s=function(u){try{const i=self[u];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=nt,n.u=function(){return function u(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()},n.v=function(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)},n.w=Yi,n.x=qe,n.y=2,n.z=Pw}),d(["./shared"],function(n){function M(ut){const oe=ut?ut.url.toString():void 0;return oe?performance.getEntriesByName(oe):[]}function P(ut){if(typeof ut=="number"||typeof ut=="boolean"||typeof ut=="string"||ut==null)return JSON.stringify(ut);if(Array.isArray(ut)){let ce="[";for(const Se of ut)ce+=`${P(Se)},`;return`${ce}]`}let oe="{";for(const ce of Object.keys(ut).sort())oe+=`${ce}:${P(ut[ce])},`;return`${oe}}`}function L(ut){let oe="";for(const ce of n.bh)oe+=`/${P(ut[ce])}`;return oe}class V{constructor(oe){this.keyCache={},this._layers={},this._layerConfigs={},oe&&this.replace(oe)}replace(oe,ce){this._layerConfigs={},this._layers={},this.update(oe,[],ce)}update(oe,ce,Se){this._options=Se;for(const De of oe)this._layerConfigs[De.id]=De,(this._layers[De.id]=n.cq(De,this.scope,null,this._options)).compileFilter(Se),this.keyCache[De.id]&&delete this.keyCache[De.id];for(const De of ce)delete this.keyCache[De],delete this._layerConfigs[De],delete this._layers[De];this.familiesBySource={};const je=function(De,Ge){const lt={};for(let at=0;at<De.length;at++){const ft=Ge&&Ge[De[at].id]||L(De[at]);Ge&&(Ge[De[at].id]=ft);let mt=lt[ft];mt||(mt=lt[ft]=[]),mt.push(De[at])}const Je=[];for(const at in lt)Je.push(lt[at]);return Je}(n.be(this._layerConfigs),this.keyCache);for(const De of je){const Ge=De.map(kt=>this._layers[kt.id]),lt=Ge[0];if(lt.visibility==="none")continue;const Je=lt.source||"";let at=this.familiesBySource[Je];at||(at=this.familiesBySource[Je]={});const ft=lt.sourceLayer||"_geojsonTileLayer";let mt=at[ft];mt||(mt=at[ft]=[]),mt.push(Ge)}}}const X=1*n.dP;class J{constructor(oe){const ce={},Se=[];for(const lt in oe){const Je=oe[lt],at=ce[lt]={};for(const ft in Je.glyphs){const mt=Je.glyphs[+ft];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const kt=mt.metrics.localGlyph?X:1,Zt={x:0,y:0,w:mt.bitmap.width+2*kt,h:mt.bitmap.height+2*kt};Se.push(Zt),at[ft]=Zt}}const{w:je,h:De}=n.z(Se),Ge=new n.dO({width:je||1,height:De||1});for(const lt in oe){const Je=oe[lt];for(const at in Je.glyphs){const ft=Je.glyphs[+at];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const mt=ce[lt][at],kt=ft.metrics.localGlyph?X:1;n.dO.copy(ft.bitmap,Ge,{x:0,y:0},{x:mt.x+kt,y:mt.y+kt},ft.bitmap)}}this.image=Ge,this.positions=ce}}n.dN(J,"GlyphAtlas");class Z{constructor(oe){this.tileID=new n.aA(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.tileZoom=oe.tileZoom,this.uid=oe.uid,this.zoom=oe.zoom,this.lut=oe.lut,this.canonical=oe.tileID.canonical,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.scope=oe.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.request&&oe.request.collectResourceTiming,this.promoteId=oe.promoteId,this.isSymbolTile=oe.isSymbolTile,this.tileTransform=n.aL(oe.tileID.canonical,oe.projection),this.projection=oe.projection,this.worldview=oe.worldview,this.localizableLayerIds=oe.localizableLayerIds,this.brightness=oe.brightness,this.extraShadowCaster=!!oe.extraShadowCaster,this.tessellationStep=oe.tessellationStep,this.scaleFactor=oe.scaleFactor}parse(oe,ce,Se,je,De){this.status="parsing",this.data=oe,this.collisionBoxArray=new n.aR;const Ge=new n.dQ(Object.keys(oe.layers).sort()),lt=new n.dR(this.tileID,this.promoteId);lt.bucketLayerIDs=[];const Je={},at=new n.dS(256,256),ft={featureIndex:lt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:at,availableImages:Se,brightness:this.brightness},mt=ce.familiesBySource[this.source];for(const zi in mt){const pr=oe.layers[zi];if(!pr)continue;let nr=!1,Vi=!1,yr=!1;for(const Fn of mt[zi])Fn[0].type==="symbol"?nr=!0:Vi=!0,Fn[0].is3D()&&Fn[0].type!=="model"&&(yr=!0);if(this.extraShadowCaster&&!yr||this.isSymbolTile===!0&&!nr||this.isSymbolTile===!1&&!Vi)continue;pr.version===1&&n.w(`Vector tile source "${this.source}" layer "${zi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fr=Ge.encode(zi),bn=[];for(let Fn=0,_n=0;Fn<pr.length;Fn++){const Ir=pr.feature(Fn),ca=lt.getId(Ir,zi);if(this.localizableLayerIds&&this.localizableLayerIds.has(zi)){const Ss=Ir.properties?Ir.properties.worldview:null;if(this.worldview&&typeof Ss=="string")if(Ss==="all")Ir.properties.$localized=!0;else{if(!Ss.split(",").includes(this.worldview))continue;Ir.properties.$localized=!0,Ir.properties.worldview=this.worldview}}bn.push({feature:Ir,id:ca,index:_n,sourceLayerIndex:Fr}),_n++}for(const Fn of mt[zi]){const _n=Fn[0];(!this.extraShadowCaster||_n.is3D()&&_n.type!=="model")&&(this.isSymbolTile!==void 0&&_n.type==="symbol"!==this.isSymbolTile||_n.minzoom&&this.zoom<Math.floor(_n.minzoom)||_n.maxzoom&&this.zoom>=_n.maxzoom||_n.visibility!=="none"&&(ie(Fn,this.zoom,ft.brightness,Se),(Je[_n.id]=_n.createBucket({index:lt.bucketLayerIDs.length,layers:Fn,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fr,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(bn,ft,this.tileID.canonical,this.tileTransform),lt.bucketLayerIDs.push(Fn.map(Ir=>n.av(Ir.id,Ir.scope)))))}}let kt,Zt,ni,Ii;at.trim();const xi={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ki=()=>{if(kt)return this.status="done",De(kt);if(this.extraShadowCaster)this.status="done",De(null,{buckets:n.be(Je).filter(zi=>!zi.isEmpty()),featureIndex:lt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:ft.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Zt&&ni&&Ii){const zi=new J(Zt),pr=new n.dU(ni,Ii,this.lut);for(const nr in Je){const Vi=Je[nr];Vi instanceof n.aS?(ie(Vi.layers,this.zoom,ft.brightness,Se),n.dV(Vi,Zt,zi.positions,ni,pr.iconPositions,this.showCollisionBoxes,Se,this.tileID.canonical,this.tileZoom,this.projection,this.scaleFactor,this.brightness)):Vi.hasPattern&&(Vi instanceof n.aY||Vi instanceof n.aZ||Vi instanceof n.d0)&&(ie(Vi.layers,this.zoom,ft.brightness,Se),Vi.addFeatures(ft,this.tileID.canonical,pr.patternPositions,Se,this.tileTransform,this.brightness))}this.status="done",De(null,{buckets:n.be(Je).filter(nr=>!nr.isEmpty()),featureIndex:lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:zi.image,lineAtlas:at,imageAtlas:pr,brightness:ft.brightness})}};if(!this.extraShadowCaster){const zi=n.dT(ft.glyphDependencies,Vi=>Object.keys(Vi).map(Number));Object.keys(zi).length?je.send("getGlyphs",{uid:this.uid,stacks:zi,scope:this.scope},(Vi,yr)=>{kt||(kt=Vi,Zt=yr,ki())},void 0,!1,xi):Zt={};const pr=Object.keys(ft.iconDependencies);pr.length?je.send("getImages",{icons:pr,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Vi,yr)=>{kt||(kt=Vi,ni=yr,ki())},void 0,!1,xi):ni={};const nr=Object.keys(ft.patternDependencies);nr.length?je.send("getImages",{icons:nr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Vi,yr)=>{kt||(kt=Vi,Ii=yr,ki())},void 0,!1,xi):Ii={}}ki()}}function ie(ut,oe,ce,Se){const je=new n.a3(oe,{brightness:ce});for(const De of ut)De.recalculate(je,Se)}class ae extends n.E{constructor(oe,ce,Se,je,De,Ge){super(),this.actor=oe,this.layerIndex=ce,this.availableImages=Se,this.loadVectorData=De||n.aw,this.loading={},this.loaded={},this.deduped=new n.au(oe.scheduler),this.isSpriteLoaded=je,this.scheduler=oe.scheduler,this.brightness=Ge}loadTile(oe,ce){const Se=oe.uid,je=oe&&oe.request,De=je&&je.collectResourceTiming,Ge=this.loading[Se]=new Z(oe);Ge.abort=this.loadVectorData(oe,(lt,Je)=>{const at=!this.loading[Se];if(delete this.loading[Se],at||lt||!Je)return Ge.status="done",at||(this.loaded[Se]=Ge),ce(lt);const ft=Je.rawData,mt={};Je.expires&&(mt.expires=Je.expires),Je.cacheControl&&(mt.cacheControl=Je.cacheControl),Ge.vectorTile=Je.vectorTile||new n.dW.VectorTile(new n.bc(ft));const kt=()=>{Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,(Zt,ni)=>{if(Zt||!ni)return ce(Zt);const Ii={};if(De){const xi=M(je);xi.length>0&&(Ii.resourceTiming=JSON.parse(JSON.stringify(xi)))}ce(null,n.l({rawTileData:ft.slice(0)},ni,mt,Ii))})};this.isSpriteLoaded?kt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(kt,{type:"parseTile",isSymbolTile:oe.isSymbolTile,zoom:oe.tileZoom}):kt()}),this.loaded=this.loaded||{},this.loaded[Se]=Ge})}reloadTile(oe,ce){const Se=this.loaded,je=oe.uid;if(Se&&Se[je]){const De=Se[je];De.scaleFactor=oe.scaleFactor,De.showCollisionBoxes=oe.showCollisionBoxes,De.projection=oe.projection,De.brightness=oe.brightness,De.tileTransform=n.aL(oe.tileID.canonical,oe.projection),De.extraShadowCaster=oe.extraShadowCaster,De.lut=oe.lut;const Ge=(lt,Je)=>{const at=De.reloadCallback;at&&(delete De.reloadCallback,De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,at)),ce(lt,Je)};De.status==="parsing"?De.reloadCallback=Ge:De.status==="done"&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Ge):Ge())}else ce(null,void 0)}abortTile(oe,ce){const Se=oe.uid,je=this.loading[Se];je&&(je.abort&&je.abort(),delete this.loading[Se]),ce()}removeTile(oe,ce){const Se=this.loaded,je=oe.uid;Se&&Se[je]&&delete Se[je],ce()}}class de{loadTile(oe,ce){const{uid:Se,encoding:je,rawImageData:De,padding:Ge}=oe,lt=ImageBitmap&&De instanceof ImageBitmap?this.getImageData(De,Ge):De;ce(null,new n.dX(Se,lt,je,Ge<1))}getImageData(oe,ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(oe.width,oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=oe.width,this.offscreenCanvas.height=oe.height,this.offscreenCanvasContext.drawImage(oe,0,0,oe.width,oe.height);const Se=this.offscreenCanvasContext.getImageData(-ce,-ce,oe.width+2*ce,oe.height+2*ce);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Se}}n.bb.setPbf(n.bc);class fe{decodeRasterArray({task:oe,buffer:ce},Se){n.bb.performDecoding(ce,oe).then(je=>{Se(null,je)},je=>{Se(je)})}}const le=n.dW.VectorTileFeature.prototype.toGeoJSON;class he{constructor(oe){this._feature=oe,this.extent=n.ab,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))}loadGeometry(){if(this._feature.type===1){const oe=[];for(const ce of this._feature.geometry)oe.push([new n.P(ce[0],ce[1])]);return oe}{const oe=[];for(const ce of this._feature.geometry){const Se=[];for(const je of ce)Se.push(new n.P(je[0],je[1]));oe.push(Se)}return oe}}toGeoJSON(oe,ce,Se){return le.call(this,oe,ce,Se)}}class Ce{constructor(oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ab,this.length=oe.length,this._features=oe}feature(oe){return new he(this._features[oe])}}const Le=64/4096,Ae=128;class We{constructor(){this.features=new Map}clear(){this.features.clear()}load(oe=[],ce){for(const Se of oe){const je=Se.id;if(je==null)continue;let De=this.features.get(je);De&&this.updateCache(De,ce),Se.geometry?(De=ze(Se),this.updateCache(De,ce),this.features.set(je,De)):this.features.delete(je),this.updateCache(De,ce)}}updateCache(oe,ce){for(const{canonical:Se,uid:je}of Object.values(ce)){const{z:De,x:Ge,y:lt}=Se;Qe(oe,Math.pow(2,De),Ge,lt)&&delete ce[je]}}getTile(oe,ce,Se){const je=Math.pow(2,oe),De=[];for(const Ge of this.features.values())Qe(Ge,je,ce,Se)&&De.push(Be(Ge,je,ce,Se));return{features:De}}getFeatures(){return[...this.features.values()]}}function Qe({minX:ut,minY:oe,maxX:ce,maxY:Se},je,De,Ge){return ut<(De+1+Le)/je&&oe<(Ge+1+Le)/je&&ce>(De-Le)/je&&Se>(Ge-Le)/je}function ze(ut){const{id:oe,geometry:ce,properties:Se}=ut;if(!ce)return;if(ce.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:je,coordinates:De}=ce,Ge={id:oe,type:1,geometry:[],tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},lt=Ge.geometry;if(je==="Point")Ze(De,lt,Ge);else if(je==="MultiPoint")for(const Je of De)Ze(Je,lt,Ge);else if(je==="LineString")Ge.type=2,Ue(De,lt,Ge);else if(je==="MultiLineString")Ge.type=2,vt(De,lt,Ge);else if(je==="Polygon")Ge.type=3,vt(De,lt,Ge,!0);else{if(je!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Ge.type=3;for(const Je of De)vt(Je,lt,Ge,!0)}return Ge}function Ze([ut,oe],ce,Se){const je=n.am(ut);let De=n.at(oe);De=De<0?0:De>1?1:De,ce.push(je,De),Se.minX=Math.min(Se.minX,je),Se.minY=Math.min(Se.minY,De),Se.maxX=Math.max(Se.maxX,je),Se.maxY=Math.max(Se.maxY,De)}function Ue(ut,oe,ce,Se=!1,je=!1){const De=[];for(const Ge of ut)Ze(Ge,De,ce);oe.push(De),Se&&function(Ge,lt){let Je=0;for(let at=0,ft=Ge.length,mt=ft-2;at<ft;mt=at,at+=2)Je+=(Ge[at]-Ge[mt])*(Ge[at+1]+Ge[mt+1]);if(Je>0===lt)for(let at=0,ft=Ge.length;at<ft/2;at+=2){const mt=Ge[at],kt=Ge[at+1];Ge[at]=Ge[ft-2-at],Ge[at+1]=Ge[ft-1-at],Ge[ft-2-at]=mt,Ge[ft-1-at]=kt}}(De,je)}function vt(ut,oe,ce,Se=!1){for(let je=0;je<ut.length;je++)Ue(ut[je],oe,ce,Se,je===0)}function Be(ut,oe,ce,Se){const{id:je,type:De,geometry:Ge,tags:lt}=ut,Je=[];if(De===1)(function(at,ft,mt,kt,Zt){for(let ni=0;ni<at.length;ni+=2){const Ii=Math.round(n.ab*(at[ni+0]*ft-mt)),xi=Math.round(n.ab*(at[ni+1]*ft-kt));Zt.push([Ii,xi])}})(Ge,oe,ce,Se,Je);else for(const at of Ge)Ke(at,oe,ce,Se,Je);return{id:je,type:De,geometry:Je,tags:lt}}function Ke(ut,oe,ce,Se,je){const De=-Ae,Ge=n.ab+Ae;let lt;for(let Je=0;Je<ut.length-2;Je+=2){let at=Math.round(n.ab*(ut[Je+0]*oe-ce)),ft=Math.round(n.ab*(ut[Je+1]*oe-Se)),mt=Math.round(n.ab*(ut[Je+2]*oe-ce)),kt=Math.round(n.ab*(ut[Je+3]*oe-Se));const Zt=mt-at,ni=kt-ft;at<De&&mt<De||(at<De?(ft+=Math.round(ni*((De-at)/Zt)),at=De):mt<De&&(kt=ft+Math.round(ni*((De-at)/Zt)),mt=De),ft<De&&kt<De||(ft<De?(at+=Math.round(Zt*((De-ft)/ni)),ft=De):kt<De&&(mt=at+Math.round(Zt*((De-ft)/ni)),kt=De),at>=Ge&&mt>=Ge||(at>=Ge?(ft+=Math.round(ni*((Ge-at)/Zt)),at=Ge):mt>=Ge&&(kt=ft+Math.round(ni*((Ge-at)/Zt)),mt=Ge),ft>=Ge&&kt>=Ge||(ft>=Ge?(at+=Math.round(Zt*((Ge-ft)/ni)),ft=Ge):kt>=Ge&&(mt=at+Math.round(Zt*((Ge-ft)/ni)),kt=Ge),lt&&at===lt[lt.length-1][0]&&ft===lt[lt.length-1][1]||(lt=[[at,ft]],je.push(lt)),lt.push([mt,kt])))))}}var xt,yt,Dt,bt={exports:{}},bi=function(){if(Dt)return bt.exports;Dt=1;var ut=n.d_(),oe=function(){if(yt)return xt;yt=1;var ft=n.dY(),mt=n.dZ().VectorTileFeature;function kt(ni,Ii){this.options=Ii||{},this.features=ni,this.length=ni.length}function Zt(ni,Ii){this.id=typeof ni.id=="number"?ni.id:void 0,this.type=ni.type,this.rawGeometry=ni.type===1?[ni.geometry]:ni.geometry,this.properties=ni.tags,this.extent=Ii||4096}return xt=kt,kt.prototype.feature=function(ni){return new Zt(this.features[ni],this.options.extent)},Zt.prototype.loadGeometry=function(){var ni=this.rawGeometry;this.geometry=[];for(var Ii=0;Ii<ni.length;Ii++){for(var xi=ni[Ii],ki=[],zi=0;zi<xi.length;zi++)ki.push(new ft(xi[zi][0],xi[zi][1]));this.geometry.push(ki)}return this.geometry},Zt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ni=this.geometry,Ii=1/0,xi=-1/0,ki=1/0,zi=-1/0,pr=0;pr<ni.length;pr++)for(var nr=ni[pr],Vi=0;Vi<nr.length;Vi++){var yr=nr[Vi];Ii=Math.min(Ii,yr.x),xi=Math.max(xi,yr.x),ki=Math.min(ki,yr.y),zi=Math.max(zi,yr.y)}return[Ii,ki,xi,zi]},Zt.prototype.toGeoJSON=mt.prototype.toGeoJSON,xt}();function ce(ft){var mt=new ut;return function(kt,Zt){for(var ni in kt.layers)Zt.writeMessage(3,Se,kt.layers[ni])}(ft,mt),mt.finish()}function Se(ft,mt){var kt;mt.writeVarintField(15,ft.version||1),mt.writeStringField(1,ft.name||""),mt.writeVarintField(5,ft.extent||4096);var Zt={keys:[],values:[],keycache:{},valuecache:{}};for(kt=0;kt<ft.length;kt++)Zt.feature=ft.feature(kt),mt.writeMessage(2,je,Zt);var ni=Zt.keys;for(kt=0;kt<ni.length;kt++)mt.writeStringField(3,ni[kt]);var Ii=Zt.values;for(kt=0;kt<Ii.length;kt++)mt.writeMessage(4,at,Ii[kt])}function je(ft,mt){var kt=ft.feature;kt.id!==void 0&&mt.writeVarintField(1,kt.id),mt.writeMessage(2,De,ft),mt.writeVarintField(3,kt.type),mt.writeMessage(4,Je,kt)}function De(ft,mt){var kt=ft.feature,Zt=ft.keys,ni=ft.values,Ii=ft.keycache,xi=ft.valuecache;for(var ki in kt.properties){var zi=kt.properties[ki],pr=Ii[ki];if(zi!==null){pr===void 0&&(Zt.push(ki),Ii[ki]=pr=Zt.length-1),mt.writeVarint(pr);var nr=typeof zi;nr!=="string"&&nr!=="boolean"&&nr!=="number"&&(zi=JSON.stringify(zi));var Vi=nr+":"+zi,yr=xi[Vi];yr===void 0&&(ni.push(zi),xi[Vi]=yr=ni.length-1),mt.writeVarint(yr)}}}function Ge(ft,mt){return(mt<<3)+(7&ft)}function lt(ft){return ft<<1^ft>>31}function Je(ft,mt){for(var kt=ft.loadGeometry(),Zt=ft.type,ni=0,Ii=0,xi=kt.length,ki=0;ki<xi;ki++){var zi=kt[ki],pr=1;Zt===1&&(pr=zi.length),mt.writeVarint(Ge(1,pr));for(var nr=Zt===3?zi.length-1:zi.length,Vi=0;Vi<nr;Vi++){Vi===1&&Zt!==1&&mt.writeVarint(Ge(2,nr-1));var yr=zi[Vi].x-ni,Fr=zi[Vi].y-Ii;mt.writeVarint(lt(yr)),mt.writeVarint(lt(Fr)),ni+=yr,Ii+=Fr}Zt===3&&mt.writeVarint(Ge(7,1))}}function at(ft,mt){var kt=typeof ft;kt==="string"?mt.writeStringField(1,ft):kt==="boolean"?mt.writeBooleanField(7,ft):kt==="number"&&(ft%1!=0?mt.writeDoubleField(3,ft):ft<0?mt.writeSVarintField(6,ft):mt.writeVarintField(5,ft))}return bt.exports=ce,bt.exports.fromVectorTileJs=ce,bt.exports.fromGeojsonVt=function(ft,mt){mt=mt||{};var kt={};for(var Zt in ft)kt[Zt]=new oe(ft[Zt].features,mt),kt[Zt].name=Zt,kt[Zt].version=mt.version,kt[Zt].extent=mt.extent;return ce({layers:kt})},bt.exports.GeoJSONWrapper=oe,bt.exports}(),ji=n.d$(bi);const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ut=>ut},Nt=Math.fround||(Sr=new Float32Array(1),ut=>(Sr[0]=+ut,Sr[0]));var Sr;const Ui=3,ci=5,ur=6;class cn{constructor(oe){this.options=Object.assign(Object.create(Qt),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:ce,minZoom:Se,maxZoom:je}=this.options,De=`prepare ${oe.length} points`;this.points=oe;const Ge=[];for(let Je=0;Je<oe.length;Je++){const at=oe[Je];if(!at.geometry)continue;const[ft,mt]=at.geometry.coordinates,kt=Nt(On(ft)),Zt=Nt(Bn(mt));Ge.push(kt,Zt,1/0,Je,-1,1),this.options.reduce&&Ge.push(0)}let lt=this.trees[je+1]=this._createTree(Ge);for(let Je=je;Je>=Se;Je--){const at=+Date.now();lt=this.trees[Je]=this._createTree(this._cluster(lt,Je))}return this}getClusters(oe,ce){let Se=((oe[0]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,oe[1]));let De=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)Se=-180,De=180;else if(Se>De){const mt=this.getClusters([Se,je,180,Ge],ce),kt=this.getClusters([-180,je,De,Ge],ce);return mt.concat(kt)}const lt=this.trees[this._limitZoom(ce)],Je=lt.range(On(Se),Bn(Ge),On(De),Bn(je)),at=lt.data,ft=[];for(const mt of Je){const kt=this.stride*mt;ft.push(at[kt+ci]>1?Di(at,kt,this.clusterProps):this.points[at[kt+Ui]])}return ft}getChildren(oe){const ce=this._getOriginId(oe),Se=this._getOriginZoom(oe),je="No cluster with the specified id.",De=this.trees[Se];if(!De)throw new Error(je);const Ge=De.data;if(ce*this.stride>=Ge.length)throw new Error(je);const lt=this.options.radius/(this.options.extent*Math.pow(2,Se-1)),Je=De.within(Ge[ce*this.stride],Ge[ce*this.stride+1],lt),at=[];for(const ft of Je){const mt=ft*this.stride;Ge[mt+4]===oe&&at.push(Ge[mt+ci]>1?Di(Ge,mt,this.clusterProps):this.points[Ge[mt+Ui]])}if(at.length===0)throw new Error(je);return at}getLeaves(oe,ce,Se){const je=[];return this._appendLeaves(je,oe,ce=ce||10,Se=Se||0,0),je}getTile(oe,ce,Se){const je=this.trees[this._limitZoom(oe)],De=Math.pow(2,oe),{extent:Ge,radius:lt}=this.options,Je=lt/Ge,at=(Se-Je)/De,ft=(Se+1+Je)/De,mt={features:[]};return this._addTileFeatures(je.range((ce-Je)/De,at,(ce+1+Je)/De,ft),je.data,ce,Se,De,mt),ce===0&&this._addTileFeatures(je.range(1-Je/De,at,1,ft),je.data,De,Se,De,mt),ce===De-1&&this._addTileFeatures(je.range(0,at,Je/De,ft),je.data,-1,Se,De,mt),mt.features.length?mt:null}getClusterExpansionZoom(oe){let ce=this._getOriginZoom(oe)-1;for(;ce<=this.options.maxZoom;){const Se=this.getChildren(oe);if(ce++,Se.length!==1)break;oe=Se[0].properties.cluster_id}return ce}_appendLeaves(oe,ce,Se,je,De){const Ge=this.getChildren(ce);for(const lt of Ge){const Je=lt.properties;if(Je&&Je.cluster?De+Je.point_count<=je?De+=Je.point_count:De=this._appendLeaves(oe,Je.cluster_id,Se,je,De):De<je?De++:oe.push(lt),oe.length===Se)break}return De}_createTree(oe){const ce=new n.bz(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Se=0;Se<oe.length;Se+=this.stride)ce.add(oe[Se],oe[Se+1]);return ce.finish(),ce.data=oe,ce}_addTileFeatures(oe,ce,Se,je,De,Ge){for(const lt of oe){const Je=lt*this.stride,at=ce[Je+ci]>1;let ft,mt,kt;if(at)ft=Te(ce,Je,this.clusterProps),mt=ce[Je],kt=ce[Je+1];else{const Ii=this.points[ce[Je+Ui]];ft=Ii.properties;const[xi,ki]=Ii.geometry.coordinates;mt=On(xi),kt=Bn(ki)}const Zt={type:1,geometry:[[Math.round(this.options.extent*(mt*De-Se)),Math.round(this.options.extent*(kt*De-je))]],tags:ft};let ni;ni=at||this.options.generateId?ce[Je+Ui]:this.points[ce[Je+Ui]].id,ni!==void 0&&(Zt.id=ni),Ge.features.push(Zt)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ce){const{radius:Se,extent:je,reduce:De,minPoints:Ge}=this.options,lt=Se/(je*Math.pow(2,ce)),Je=oe.data,at=[],ft=this.stride;for(let mt=0;mt<Je.length;mt+=ft){if(Je[mt+2]<=ce)continue;Je[mt+2]=ce;const kt=Je[mt],Zt=Je[mt+1],ni=oe.within(Je[mt],Je[mt+1],lt),Ii=Je[mt+ci];let xi=Ii;for(const ki of ni){const zi=ki*ft;Je[zi+2]>ce&&(xi+=Je[zi+ci])}if(xi>Ii&&xi>=Ge){let ki,zi=kt*Ii,pr=Zt*Ii,nr=-1;const Vi=(mt/ft<<5)+(ce+1)+this.points.length;for(const yr of ni){const Fr=yr*ft;if(Je[Fr+2]<=ce)continue;Je[Fr+2]=ce;const bn=Je[Fr+ci];zi+=Je[Fr]*bn,pr+=Je[Fr+1]*bn,Je[Fr+4]=Vi,De&&(ki||(ki=this._map(Je,mt,!0),nr=this.clusterProps.length,this.clusterProps.push(ki)),De(ki,this._map(Je,Fr)))}Je[mt+4]=Vi,at.push(zi/xi,pr/xi,1/0,Vi,-1,xi),De&&at.push(nr)}else{for(let ki=0;ki<ft;ki++)at.push(Je[mt+ki]);if(xi>1)for(const ki of ni){const zi=ki*ft;if(!(Je[zi+2]<=ce)){Je[zi+2]=ce;for(let pr=0;pr<ft;pr++)at.push(Je[zi+pr])}}}}return at}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ce,Se){if(oe[ce+ci]>1){const Ge=this.clusterProps[oe[ce+ur]];return Se?Object.assign({},Ge):Ge}const je=this.points[oe[ce+Ui]].properties,De=this.options.map(je);return Se&&De===je?Object.assign({},De):De}}function Di(ut,oe,ce){return{type:"Feature",id:ut[oe+Ui],properties:Te(ut,oe,ce),geometry:{type:"Point",coordinates:[(Se=ut[oe],360*(Se-.5)),En(ut[oe+1])]}};var Se}function Te(ut,oe,ce){const Se=ut[oe+ci],je=Se>=1e4?`${Math.round(Se/1e3)}k`:Se>=1e3?Math.round(Se/100)/10+"k":Se,De=ut[oe+ur],Ge=De===-1?{}:Object.assign({},ce[De]);return Object.assign(Ge,{cluster:!0,cluster_id:ut[oe+Ui],point_count:Se,point_count_abbreviated:je})}function On(ut){return ut/360+.5}function Bn(ut){const oe=Math.sin(ut*Math.PI/180),ce=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ce<0?0:ce>1?1:ce}function En(ut){const oe=(180-360*ut)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Pt(ut,oe,ce,Se){let je=Se;const De=oe+(ce-oe>>1);let Ge,lt=ce-oe;const Je=ut[oe],at=ut[oe+1],ft=ut[ce],mt=ut[ce+1];for(let kt=oe+3;kt<ce;kt+=3){const Zt=Jn(ut[kt],ut[kt+1],Je,at,ft,mt);if(Zt>je)Ge=kt,je=Zt;else if(Zt===je){const ni=Math.abs(kt-De);ni<lt&&(Ge=kt,lt=ni)}}je>Se&&(Ge-oe>3&&Pt(ut,oe,Ge,Se),ut[Ge+2]=je,ce-Ge>3&&Pt(ut,Ge,ce,Se))}function Jn(ut,oe,ce,Se,je,De){let Ge=je-ce,lt=De-Se;if(Ge!==0||lt!==0){const Je=((ut-ce)*Ge+(oe-Se)*lt)/(Ge*Ge+lt*lt);Je>1?(ce=je,Se=De):Je>0&&(ce+=Ge*Je,Se+=lt*Je)}return Ge=ut-ce,lt=oe-Se,Ge*Ge+lt*lt}function Xi(ut,oe,ce,Se){const je={id:ut??null,type:oe,geometry:ce,tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")lo(je,ce);else if(oe==="Polygon")lo(je,ce[0]);else if(oe==="MultiLineString")for(const De of ce)lo(je,De);else if(oe==="MultiPolygon")for(const De of ce)lo(je,De[0]);return je}function lo(ut,oe){for(let ce=0;ce<oe.length;ce+=3)ut.minX=Math.min(ut.minX,oe[ce]),ut.minY=Math.min(ut.minY,oe[ce+1]),ut.maxX=Math.max(ut.maxX,oe[ce]),ut.maxY=Math.max(ut.maxY,oe[ce+1])}function Oi(ut,oe,ce,Se){if(!oe.geometry)return;const je=oe.geometry.coordinates;if(je&&je.length===0)return;const De=oe.geometry.type,Ge=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2);let lt=[],Je=oe.id;if(ce.promoteId?Je=oe.properties[ce.promoteId]:ce.generateId&&(Je=Se||0),De==="Point")un(je,lt);else if(De==="MultiPoint")for(const at of je)un(at,lt);else if(De==="LineString")Xr(je,lt,Ge,!1);else if(De==="MultiLineString"){if(ce.lineMetrics){for(const at of je)lt=[],Xr(at,lt,Ge,!1),ut.push(Xi(Je,"LineString",lt,oe.properties));return}Do(je,lt,Ge,!1)}else if(De==="Polygon")Do(je,lt,Ge,!0);else{if(De!=="MultiPolygon"){if(De==="GeometryCollection"){for(const at of oe.geometry.geometries)Oi(ut,{id:Je,geometry:at,properties:oe.properties},ce,Se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of je){const ft=[];Do(at,ft,Ge,!0),lt.push(ft)}}ut.push(Xi(Je,De,lt,oe.properties))}function un(ut,oe){oe.push(hi(ut[0]),Rt(ut[1]),0)}function Xr(ut,oe,ce,Se){let je,De,Ge=0;for(let Je=0;Je<ut.length;Je++){const at=hi(ut[Je][0]),ft=Rt(ut[Je][1]);oe.push(at,ft,0),Je>0&&(Ge+=Se?(je*ft-at*De)/2:Math.sqrt(Math.pow(at-je,2)+Math.pow(ft-De,2))),je=at,De=ft}const lt=oe.length-3;oe[2]=1,Pt(oe,0,lt,ce),oe[lt+2]=1,oe.size=Math.abs(Ge),oe.start=0,oe.end=oe.size}function Do(ut,oe,ce,Se){for(let je=0;je<ut.length;je++){const De=[];Xr(ut[je],De,ce,Se),oe.push(De)}}function hi(ut){return ut/360+.5}function Rt(ut){const oe=Math.sin(ut*Math.PI/180),ce=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ce<0?0:ce>1?1:ce}function Ot(ut,oe,ce,Se,je,De,Ge,lt){if(Se/=oe,De>=(ce/=oe)&&Ge<Se)return ut;if(Ge<ce||De>=Se)return null;const Je=[];for(const at of ut){const ft=at.geometry;let mt=at.type;const kt=je===0?at.minX:at.minY,Zt=je===0?at.maxX:at.maxY;if(kt>=ce&&Zt<Se){Je.push(at);continue}if(Zt<ce||kt>=Se)continue;let ni=[];if(mt==="Point"||mt==="MultiPoint")sr(ft,ni,ce,Se,je);else if(mt==="LineString")hr(ft,ni,ce,Se,je,!1,lt.lineMetrics);else if(mt==="MultiLineString")Gi(ft,ni,ce,Se,je,!1);else if(mt==="Polygon")Gi(ft,ni,ce,Se,je,!0);else if(mt==="MultiPolygon")for(const Ii of ft){const xi=[];Gi(Ii,xi,ce,Se,je,!0),xi.length&&ni.push(xi)}if(ni.length){if(lt.lineMetrics&&mt==="LineString"){for(const Ii of ni)Je.push(Xi(at.id,mt,Ii,at.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(ni.length===1?(mt="LineString",ni=ni[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=ni.length===3?"Point":"MultiPoint"),Je.push(Xi(at.id,mt,ni,at.tags))}}return Je.length?Je:null}function sr(ut,oe,ce,Se,je){for(let De=0;De<ut.length;De+=3){const Ge=ut[De+je];Ge>=ce&&Ge<=Se&&Vr(oe,ut[De],ut[De+1],ut[De+2])}}function hr(ut,oe,ce,Se,je,De,Ge){let lt=Mr(ut);const Je=je===0?Vn:ts;let at,ft,mt=ut.start;for(let xi=0;xi<ut.length-3;xi+=3){const ki=ut[xi],zi=ut[xi+1],pr=ut[xi+2],nr=ut[xi+3],Vi=ut[xi+4],yr=je===0?ki:zi,Fr=je===0?nr:Vi;let bn=!1;Ge&&(at=Math.sqrt(Math.pow(ki-nr,2)+Math.pow(zi-Vi,2))),yr<ce?Fr>ce&&(ft=Je(lt,ki,zi,nr,Vi,ce),Ge&&(lt.start=mt+at*ft)):yr>Se?Fr<Se&&(ft=Je(lt,ki,zi,nr,Vi,Se),Ge&&(lt.start=mt+at*ft)):Vr(lt,ki,zi,pr),Fr<ce&&yr>=ce&&(ft=Je(lt,ki,zi,nr,Vi,ce),bn=!0),Fr>Se&&yr<=Se&&(ft=Je(lt,ki,zi,nr,Vi,Se),bn=!0),!De&&bn&&(Ge&&(lt.end=mt+at*ft),oe.push(lt),lt=Mr(ut)),Ge&&(mt+=at)}let kt=ut.length-3;const Zt=ut[kt],ni=ut[kt+1],Ii=je===0?Zt:ni;Ii>=ce&&Ii<=Se&&Vr(lt,Zt,ni,ut[kt+2]),kt=lt.length-3,De&&kt>=3&&(lt[kt]!==lt[0]||lt[kt+1]!==lt[1])&&Vr(lt,lt[0],lt[1],lt[2]),lt.length&&oe.push(lt)}function Mr(ut){const oe=[];return oe.size=ut.size,oe.start=ut.start,oe.end=ut.end,oe}function Gi(ut,oe,ce,Se,je,De){for(const Ge of ut)hr(Ge,oe,ce,Se,je,De,!1)}function Vr(ut,oe,ce,Se){ut.push(oe,ce,Se)}function Vn(ut,oe,ce,Se,je,De){const Ge=(De-oe)/(Se-oe);return Vr(ut,De,ce+(je-ce)*Ge,1),Ge}function ts(ut,oe,ce,Se,je,De){const Ge=(De-ce)/(je-ce);return Vr(ut,oe+(Se-oe)*Ge,De,1),Ge}function bs(ut,oe){const ce=[];for(let Se=0;Se<ut.length;Se++){const je=ut[Se],De=je.type;let Ge;if(De==="Point"||De==="MultiPoint"||De==="LineString")Ge=Po(je.geometry,oe);else if(De==="MultiLineString"||De==="Polygon"){Ge=[];for(const lt of je.geometry)Ge.push(Po(lt,oe))}else if(De==="MultiPolygon"){Ge=[];for(const lt of je.geometry){const Je=[];for(const at of lt)Je.push(Po(at,oe));Ge.push(Je)}}ce.push(Xi(je.id,De,Ge,je.tags))}return ce}function Po(ut,oe){const ce=[];ce.size=ut.size,ut.start!==void 0&&(ce.start=ut.start,ce.end=ut.end);for(let Se=0;Se<ut.length;Se+=3)ce.push(ut[Se]+oe,ut[Se+1],ut[Se+2]);return ce}function ws(ut,oe){if(ut.transformed)return ut;const ce=1<<ut.z,Se=ut.x,je=ut.y;for(const De of ut.features){const Ge=De.geometry,lt=De.type;if(De.geometry=[],lt===1)for(let Je=0;Je<Ge.length;Je+=2)De.geometry.push(vo(Ge[Je],Ge[Je+1],oe,ce,Se,je));else for(let Je=0;Je<Ge.length;Je++){const at=[];for(let ft=0;ft<Ge[Je].length;ft+=2)at.push(vo(Ge[Je][ft],Ge[Je][ft+1],oe,ce,Se,je));De.geometry.push(at)}}return ut.transformed=!0,ut}function vo(ut,oe,ce,Se,je,De){return[Math.round(ce*(ut*Se-je)),Math.round(ce*(oe*Se-De))]}function to(ut,oe,ce,Se,je){const De=oe===je.maxZoom?0:je.tolerance/((1<<oe)*je.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:ut.length,source:null,x:ce,y:Se,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const lt of ut)Rc(Ge,lt,De,je);return Ge}function Rc(ut,oe,ce,Se){const je=oe.geometry,De=oe.type,Ge=[];if(ut.minX=Math.min(ut.minX,oe.minX),ut.minY=Math.min(ut.minY,oe.minY),ut.maxX=Math.max(ut.maxX,oe.maxX),ut.maxY=Math.max(ut.maxY,oe.maxY),De==="Point"||De==="MultiPoint")for(let lt=0;lt<je.length;lt+=3)Ge.push(je[lt],je[lt+1]),ut.numPoints++,ut.numSimplified++;else if(De==="LineString")Yi(Ge,je,ut,ce,!1,!1);else if(De==="MultiLineString"||De==="Polygon")for(let lt=0;lt<je.length;lt++)Yi(Ge,je[lt],ut,ce,De==="Polygon",lt===0);else if(De==="MultiPolygon")for(let lt=0;lt<je.length;lt++){const Je=je[lt];for(let at=0;at<Je.length;at++)Yi(Ge,Je[at],ut,ce,!0,at===0)}if(Ge.length){let lt=oe.tags||null;if(De==="LineString"&&Se.lineMetrics){lt={};for(const at in oe.tags)lt[at]=oe.tags[at];lt.mapbox_clip_start=je.start/je.size,lt.mapbox_clip_end=je.end/je.size}const Je={geometry:Ge,type:De==="Polygon"||De==="MultiPolygon"?3:De==="LineString"||De==="MultiLineString"?2:1,tags:lt};oe.id!==null&&(Je.id=oe.id),ut.features.push(Je)}}function Yi(ut,oe,ce,Se,je,De){const Ge=Se*Se;if(Se>0&&oe.size<(je?Ge:Se))return void(ce.numPoints+=oe.length/3);const lt=[];for(let Je=0;Je<oe.length;Je+=3)(Se===0||oe[Je+2]>Ge)&&(ce.numSimplified++,lt.push(oe[Je],oe[Je+1])),ce.numPoints++;je&&function(Je,at){let ft=0;for(let mt=0,kt=Je.length,Zt=kt-2;mt<kt;Zt=mt,mt+=2)ft+=(Je[mt]-Je[Zt])*(Je[mt+1]+Je[Zt+1]);if(ft>0===at)for(let mt=0,kt=Je.length;mt<kt/2;mt+=2){const Zt=Je[mt],ni=Je[mt+1];Je[mt]=Je[kt-2-mt],Je[mt+1]=Je[kt-1-mt],Je[kt-2-mt]=Zt,Je[kt-1-mt]=ni}}(lt,De),ut.push(lt)}const xo={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Lc{constructor(oe,ce){const Se=(ce=this.options=function(De,Ge){for(const lt in Ge)De[lt]=Ge[lt];return De}(Object.create(xo),ce)).debug;if(ce.maxZoom<0||ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ce.promoteId&&ce.generateId)throw new Error("promoteId and generateId cannot be used together.");let je=function(De,Ge){const lt=[];if(De.type==="FeatureCollection")for(let Je=0;Je<De.features.length;Je++)Oi(lt,De.features[Je],Ge,Je);else Oi(lt,De.type==="Feature"?De:{geometry:De},Ge);return lt}(oe,ce);this.tiles={},this.tileCoords=[],Se&&(this.stats={},this.total=0),je=function(De,Ge){const lt=Ge.buffer/Ge.extent;let Je=De;const at=Ot(De,1,-1-lt,lt,0,-1,2,Ge),ft=Ot(De,1,1-lt,2+lt,0,-1,2,Ge);return(at||ft)&&(Je=Ot(De,1,-lt,1+lt,0,-1,2,Ge)||[],at&&(Je=bs(at,1).concat(Je)),ft&&(Je=Je.concat(bs(ft,-1)))),Je}(je,ce),je.length&&this.splitTile(je,0,0,0),Se&&je.length}splitTile(oe,ce,Se,je,De,Ge,lt){const Je=[oe,ce,Se,je],at=this.options,ft=at.debug;for(;Je.length;){je=Je.pop(),Se=Je.pop(),ce=Je.pop(),oe=Je.pop();const mt=1<<ce,kt=co(ce,Se,je);let Zt=this.tiles[kt];if(!Zt&&(ft>1,Zt=this.tiles[kt]=to(oe,ce,Se,je,at),this.tileCoords.push({z:ce,x:Se,y:je}),ft)){ft>1;const bn=`z${ce}`;this.stats[bn]=(this.stats[bn]||0)+1,this.total++}if(Zt.source=oe,De==null){if(ce===at.indexMaxZoom||Zt.numPoints<=at.indexMaxPoints)continue}else{if(ce===at.maxZoom||ce===De)continue;if(De!=null){const bn=De-ce;if(Se!==Ge>>bn||je!==lt>>bn)continue}}if(Zt.source=null,oe.length===0)continue;ft>1;const ni=.5*at.buffer/at.extent,Ii=.5-ni,xi=.5+ni,ki=1+ni;let zi=null,pr=null,nr=null,Vi=null,yr=Ot(oe,mt,Se-ni,Se+xi,0,Zt.minX,Zt.maxX,at),Fr=Ot(oe,mt,Se+Ii,Se+ki,0,Zt.minX,Zt.maxX,at);oe=null,yr&&(zi=Ot(yr,mt,je-ni,je+xi,1,Zt.minY,Zt.maxY,at),pr=Ot(yr,mt,je+Ii,je+ki,1,Zt.minY,Zt.maxY,at),yr=null),Fr&&(nr=Ot(Fr,mt,je-ni,je+xi,1,Zt.minY,Zt.maxY,at),Vi=Ot(Fr,mt,je+Ii,je+ki,1,Zt.minY,Zt.maxY,at),Fr=null),ft>1,Je.push(zi||[],ce+1,2*Se,2*je),Je.push(pr||[],ce+1,2*Se,2*je+1),Je.push(nr||[],ce+1,2*Se+1,2*je),Je.push(Vi||[],ce+1,2*Se+1,2*je+1)}}getTile(oe,ce,Se){oe=+oe,ce=+ce,Se=+Se;const je=this.options,{extent:De,debug:Ge}=je;if(oe<0||oe>24)return null;const lt=1<<oe,Je=co(oe,ce=ce+lt&lt-1,Se);if(this.tiles[Je])return ws(this.tiles[Je],De);Ge>1;let at,ft=oe,mt=ce,kt=Se;for(;!at&&ft>0;)ft--,mt>>=1,kt>>=1,at=this.tiles[co(ft,mt,kt)];return at&&at.source?(Ge>1,this.splitTile(at.source,ft,mt,kt,oe,ce,Se),Ge>1,this.tiles[Je]?ws(this.tiles[Je],De):null):null}}function co(ut,oe,ce){return 32*((1<<ut)*ce+oe)+ut}function io(ut,oe){const ce=ut.tileID.canonical;if(!this._geoJSONIndex)return void oe(null,null);const Se=this._geoJSONIndex.getTile(ce.z,ce.x,ce.y);if(!Se)return void oe(null,null);const je=new Ce(Se.features);let De=ji(je);De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),oe(null,{vectorTile:je,rawData:De.buffer})}class ka extends ae{constructor(oe,ce,Se,je,De,Ge){super(oe,ce,Se,je,io,Ge),De&&(this.loadGeoJSON=De),this._dynamicIndex=new We}loadData(oe,ce){const Se=oe&&oe.request,je=Se&&Se.collectResourceTiming;this.loadGeoJSON(oe,(De,Ge)=>{if(De||!Ge)return ce(De);if(typeof Ge!="object")return ce(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{try{if(oe.filter){const Je=n.M(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Je.result==="error")throw new Error(Je.value.map(at=>`${at.key}: ${at.message}`).join(", "));Ge.features=Ge.features.filter(at=>Je.value.evaluate({zoom:0},at))}oe.dynamic?(Ge.type==="Feature"&&(Ge={type:"FeatureCollection",features:[Ge]}),oe.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Ge.features,this.loaded),oe.cluster&&(Ge.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=oe.cluster?new cn(function({superclusterOptions:Je,clusterProperties:at}){if(!at||!Je)return Je;const ft={},mt={},kt={accumulated:null,zoom:0},Zt={properties:null},ni=Object.keys(at);for(const Ii of ni){const[xi,ki]=at[Ii],zi=n.M(ki),pr=n.M(typeof xi=="string"?[xi,["accumulated"],["get",Ii]]:xi);ft[Ii]=zi.value,mt[Ii]=pr.value}return Je.map=Ii=>{Zt.properties=Ii;const xi={};for(const ki of ni)xi[ki]=ft[ki].evaluate(kt,Zt);return xi},Je.reduce=(Ii,xi)=>{Zt.properties=xi;for(const ki of ni)kt.accumulated=Ii[ki],Ii[ki]=mt[ki].evaluate(kt,Zt)},Je}(oe)).load(Ge.features):oe.dynamic?this._dynamicIndex:function(Je,at){return new Lc(Je,at)}(Ge,oe.geojsonVtOptions)}catch(Je){return ce(Je)}const lt={};if(je){const Je=M(Se);Je&&(lt.resourceTiming={},lt.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Je)))}ce(null,lt)}})}reloadTile(oe,ce){const Se=this.loaded;return Se&&Se[oe.uid]?oe.partial?ce(null,void 0):super.reloadTile(oe,ce):this.loadTile(oe,ce)}loadGeoJSON(oe,ce){if(oe.request)n.n(oe.request,ce);else{if(typeof oe.data!="string")return ce(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));try{return ce(null,JSON.parse(oe.data))}catch{return ce(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(oe,ce){try{ce(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(Se){ce(Se)}}getClusterChildren(oe,ce){try{ce(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(Se){ce(Se)}}getClusterLeaves(oe,ce){try{ce(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(Se){ce(Se)}}}class Wl{constructor(oe,ce){this.tileID=new n.aA(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.tileZoom=oe.tileZoom,this.uid=oe.uid,this.zoom=oe.zoom,this.canonical=oe.tileID.canonical,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=oe.projection,this.brightness=ce}parse(oe,ce,Se,je){this.status="parsing";const De=new n.aA(Se.tileID.overscaledZ,Se.tileID.wrap,Se.tileID.canonical.z,Se.tileID.canonical.x,Se.tileID.canonical.y),Ge=[],lt=ce.familiesBySource[Se.source],Je=new n.dR(De,Se.promoteId);return Je.bucketLayerIDs=[],Je.is3DTile=!0,n.e0(oe).then(at=>{if(!at)return je(new Error("Could not parse tile"));const ft=n.e1(at,1/n.c9(Se.tileID.canonical)),mt=at.json.extensionsUsed&&at.json.extensionsUsed.includes("MAPBOX_mesh_features")||at.json.asset.extras&&at.json.asset.extras.MAPBOX_mesh_features,kt=at.json.extensionsUsed&&at.json.extensionsUsed.includes("EXT_meshopt_compression"),Zt=new n.a3(this.zoom,{brightness:this.brightness});for(const ni in lt)for(const Ii of lt[ni]){const xi=Ii[0];Je.bucketLayerIDs.push(Ii.map(zi=>n.av(zi.id,zi.scope))),xi.recalculate(Zt,[]);const ki=new n.e2(Ii,ft,De,mt,kt,this.brightness,Je);mt||(ki.needsUpload=!0),Ge.push(ki),ki.evaluate(xi)}this.status="done",je(null,{buckets:Ge,featureIndex:Je,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(at=>je(new Error(at.message)))}}class Zl{constructor(oe,ce,Se,je,De,Ge){this.actor=oe,this.layerIndex=ce,this.availableImages=Se,this.brightness=Ge,this.loading={},this.loaded={}}loadTile(oe,ce){const Se=oe.uid,je=this.loading[Se]=new Wl(oe,this.brightness);n.bd(oe.request,(De,Ge)=>{const lt=!this.loading[Se];return delete this.loading[Se],lt||De?(je.status="done",lt||(this.loaded[Se]=je),ce(De)):Ge&&Ge.byteLength!==0?void je.parse(Ge,this.layerIndex,oe,(Je,at)=>{je.status="done",this.loaded=this.loaded||{},this.loaded[Se]=je,Je||!at?ce(Je):ce(null,at)}):(je.status="done",this.loaded[Se]=je,ce())})}reloadTile(oe,ce){const Se=this.loaded,je=oe.uid;if(Se&&Se[je]){const De=Se[je];De.projection=oe.projection,De.brightness=oe.brightness;const Ge=(lt,Je)=>{De.reloadCallback&&(delete De.reloadCallback,this.loadTile(oe,ce)),ce(lt,Je)};De.status==="parsing"?De.reloadCallback=Ge:De.status==="done"&&this.loadTile(oe,ce)}}abortTile(oe,ce){const Se=oe.uid;this.loading[Se]&&delete this.loading[Se],ce()}removeTile(oe,ce){const Se=this.loaded,je=oe.uid;Se&&Se[je]&&delete Se[je],ce()}}class Oc{constructor(oe){this.self=oe,this.actor=new n.e3(oe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=n.bM({name:"mercator"}),this.workerSourceTypes={vector:ae,geojson:ka,"batched-model":Zl},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ce,Se)=>{if(this.workerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.workerSourceTypes[ce]=Se},this.self.registerRTLTextPlugin=ce=>{if(n.e4.isParsed())throw new Error("RTL text plugin already registered.");n.e4.applyArabicShaping=ce.applyArabicShaping,n.e4.processBidirectionalText=ce.processBidirectionalText,n.e4.processStyledBidirectionalText=ce.processStyledBidirectionalText}}clearCaches(oe,ce,Se){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe],delete this.rasterArrayWorkerSource,Se()}checkIfReady(oe,ce,Se){Se()}setReferrer(oe,ce){this.referrer=ce}spriteLoaded(oe,{scope:ce,isLoaded:Se}){if(this.isSpriteLoaded[oe]||(this.isSpriteLoaded[oe]={}),this.isSpriteLoaded[oe][ce]=Se,this.workerSources[oe]&&this.workerSources[oe][ce])for(const je in this.workerSources[oe][ce]){const De=this.workerSources[oe][ce][je];for(const Ge in De){const lt=De[Ge];lt instanceof ae&&(lt.isSpriteLoaded=Se,lt.fire(new n.x("isSpriteLoaded")))}}}setImages(oe,{scope:ce,images:Se},je){if(this.availableImages[oe]||(this.availableImages[oe]={}),this.availableImages[oe][ce]=Se,this.workerSources[oe]&&this.workerSources[oe][ce]){for(const De in this.workerSources[oe][ce]){const Ge=this.workerSources[oe][ce][De];for(const lt in Ge)Ge[lt].availableImages=Se}je()}else je()}setProjection(oe,ce){this.projections[oe]=n.bM(ce)}setBrightness(oe,ce,Se){this.brightness=ce,Se()}setLayers(oe,ce,Se){this.getLayerIndex(oe,ce.scope).replace(ce.layers,ce.options),Se()}updateLayers(oe,ce,Se){this.getLayerIndex(oe,ce.scope).update(ce.layers,ce.removedIds,ce.options),Se()}loadTile(oe,ce,Se){ce.projection=this.projections[oe]||this.defaultProjection,this.getWorkerSource(oe,ce.type,ce.source,ce.scope).loadTile(ce,Se)}loadDEMTile(oe,ce,Se){this.getDEMWorkerSource(oe,ce.source,ce.scope).loadTile(ce,Se)}decodeRasterArray(oe,ce,Se){this.getRasterArrayWorkerSource().decodeRasterArray(ce,Se)}reloadTile(oe,ce,Se){ce.projection=this.projections[oe]||this.defaultProjection,this.getWorkerSource(oe,ce.type,ce.source,ce.scope).reloadTile(ce,Se)}abortTile(oe,ce,Se){this.getWorkerSource(oe,ce.type,ce.source,ce.scope).abortTile(ce,Se)}removeTile(oe,ce,Se){this.getWorkerSource(oe,ce.type,ce.source,ce.scope).removeTile(ce,Se)}removeSource(oe,ce,Se){if(!(this.workerSources[oe]&&this.workerSources[oe][ce.scope]&&this.workerSources[oe][ce.scope][ce.type]&&this.workerSources[oe][ce.scope][ce.type][ce.source]))return;const je=this.workerSources[oe][ce.scope][ce.type][ce.source];delete this.workerSources[oe][ce.scope][ce.type][ce.source],je.removeSource!==void 0?je.removeSource(ce,Se):Se()}loadWorkerSource(oe,ce,Se){try{this.self.importScripts(ce.url),Se()}catch(je){Se(je.toString())}}syncRTLPluginState(oe,ce,Se){try{n.e4.setState(ce);const je=n.e4.getPluginURL();if(n.e4.isLoaded()&&!n.e4.isParsed()&&je!=null){this.self.importScripts(je);const De=n.e4.isParsed();Se(De?void 0:new Error(`RTL Text Plugin failed to import scripts from ${je}`),De)}}catch(je){Se(je.toString())}}setDracoUrl(oe,ce){this.dracoUrl=ce}getAvailableImages(oe,ce){this.availableImages[oe]||(this.availableImages[oe]={});let Se=this.availableImages[oe][ce];return Se||(Se=[]),Se}getLayerIndex(oe,ce){this.layerIndexes[oe]||(this.layerIndexes[oe]={});let Se=this.layerIndexes[oe][ce];return Se||(Se=this.layerIndexes[oe][ce]=new V,Se.scope=ce),Se}getWorkerSource(oe,ce,Se,je){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][je]||(this.workerSources[oe][je]={}),this.workerSources[oe][je][ce]||(this.workerSources[oe][je][ce]={}),this.isSpriteLoaded[oe]||(this.isSpriteLoaded[oe]={}),this.workerSources[oe][je][ce][Se]||(this.workerSources[oe][je][ce][Se]=new this.workerSourceTypes[ce]({send:(De,Ge,lt,Je,at,ft)=>{this.actor.send(De,Ge,lt,oe,at,ft)},scheduler:this.actor.scheduler},this.getLayerIndex(oe,je),this.getAvailableImages(oe,je),this.isSpriteLoaded[oe][je],void 0,this.brightness)),this.workerSources[oe][je][ce][Se]}getDEMWorkerSource(oe,ce,Se){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][Se]||(this.demWorkerSources[oe][Se]={}),this.demWorkerSources[oe][Se][ce]||(this.demWorkerSources[oe][Se][ce]=new de),this.demWorkerSources[oe][Se][ce]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new fe),this.rasterArrayWorkerSource}enforceCacheSizeLimit(oe,ce){n.e5(ce)}getWorkerPerformanceMetrics(oe,ce,Se){Se(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Oc(self)),Oc}),d(["./shared"],function(n){var M="3.8.0";const P={create:"create",load:"load",fullLoad:"fullLoad"},L={mark(p){performance.mark(p)},measure(p,o,c){performance.measure(p,o,c)}};function V(p){const o=p.name.split("?")[0];return n.a(o)&&o.includes("mapbox-gl.js")?"javascript":n.a(o)&&o.includes("mapbox-gl.css")?"css":n.b(o)?"fontRange":n.c(o)?"sprite":n.i(o)?"style":n.d(o)?"tilejson":"other"}var X,J={},Z=function(){if(X)return J;function p(m){return!o(m)}function o(m){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,S,D=new Blob([""],{type:"text/javascript"}),R=URL.createObjectURL(D);try{S=new Worker(R),b=!0}catch{b=!1}return S&&S.terminate(),URL.revokeObjectURL(R),b}()?function(){var b=document.createElement("canvas");b.width=b.height=1;var S=b.getContext("2d");if(!S)return!1;var D=S.getImageData(0,0,1,1);return D&&D.width===b.width}()?(c[v=m&&m.failIfMajorPerformanceCaveat]===void 0&&(c[v]=function(b){var S,D=function(R){var F=document.createElement("canvas"),O=Object.create(p.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=R,F.getContext("webgl2",O)}(b);if(!D)return!1;try{S=D.createShader(D.VERTEX_SHADER)}catch{return!1}return!(!S||D.isContextLost())&&(D.shaderSource(S,"void main() {}"),D.compileShader(S),D.getShaderParameter(S,D.COMPILE_STATUS)===!0)}(v)),c[v]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var v}X=1,J.supported=p,J.notSupportedReason=o;var c={};return p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},J}();function ie(p,o,c){const m=document.createElement(p);return o!=null&&(m.className=o),c&&c.appendChild(m),m}function ae(p,o,c){const m=document.createElementNS("http://www.w3.org/2000/svg",p);for(const v of Object.keys(o))m.setAttributeNS(null,v,String(o[v]));return c&&c.appendChild(m),m}const de=typeof document<"u"?document.documentElement&&document.documentElement.style:null,fe=de&&de.userSelect!==void 0?"userSelect":"WebkitUserSelect";let le;function he(){de&&fe&&(le=de[fe],de[fe]="none")}function Ce(){de&&fe&&(de[fe]=le)}function Le(p){p.preventDefault(),p.stopPropagation(),window.removeEventListener("click",Le,!0)}function Ae(){window.addEventListener("click",Le,!0),window.setTimeout(()=>{window.removeEventListener("click",Le,!0)},0)}function We(p,o){const c=p.getBoundingClientRect();return Ze(p,c,o)}function Qe(p,o){const c=p.getBoundingClientRect(),m=[];for(let v=0;v<o.length;v++)m.push(Ze(p,c,o[v]));return m}function ze(p){return window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function Ze(p,o,c){const m=p.offsetWidth===o.width?1:p.offsetWidth/o.width;return new n.P((c.clientX-o.left)*m,(c.clientY-o.top)*m)}const Ue="01",vt="NO_ACCESS_TOKEN";class Be{constructor(o,c,m){this._transformRequestFn=o,this._customAccessToken=c,this._silenceAuthErrors=!!m,this._createSkuToken()}_createSkuToken(){const o=function(){let c="";for(let m=0;m<10;m++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ue,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}}normalizeStyleURL(o,c){if(!n.f(o))return o;const m=xt(o);return m.params.push(`sdk=js-${M}`),m.path=`/styles/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||c)}normalizeGlyphsURL(o,c){if(!n.f(o))return o;const m=xt(o);return m.path=`/fonts/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||c)}normalizeModelURL(o,c){if(!n.f(o))return o;const m=xt(o);return m.path=`/models/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||c)}normalizeSourceURL(o,c,m,v){if(!n.f(o))return o;const b=xt(o);return b.path=`/v4/${b.authority}.json`,b.params.push("secure"),m&&b.params.push(`language=${m}`),v&&b.params.push(`worldview=${v}`),this._makeAPIURL(b,this._customAccessToken||c)}normalizeSpriteURL(o,c,m,v){const b=xt(o);return n.f(o)?(b.path=`/styles/v1${b.path}/sprite${c}${m}`,this._makeAPIURL(b,this._customAccessToken||v)):(b.path+=`${c}${m}`,yt(b))}normalizeTileURL(o,c,m){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!n.f(o))return o;const v=xt(o);v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||m&&v.authority!=="raster"&&m===512?"@2x":""}${n.m.supported?".webp":"$1"}`),v.authority==="raster"?v.path=`/${n.e.RASTER_URL_PREFIX}${v.path}`:v.authority==="rasterarrays"?v.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${v.path}`:v.authority==="3dtiles"?v.path=`/${n.e.TILES3D_URL_PREFIX}${v.path}`:(v.path=v.path.replace(/^.+\/v4\//,"/"),v.path=`/${n.e.TILE_URL_VERSION}${v.path}`);const b=this._customAccessToken||function(S){for(const D of S){const R=D.match(/^access_token=(.*)$/);if(R)return R[1]}return null}(v.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&b&&this._skuToken&&v.params.push(`sku=${this._skuToken}`),this._makeAPIURL(v,b)}canonicalizeTileURL(o,c){const m=xt(o);if(!m.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!m.path.match(/\.[\w]+$/))return o;let v="mapbox://";m.path.match(/^\/raster\/v1\//)?v+=`raster/${m.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:m.path.match(/^\/rasterarrays\/v1\//)?v+=`rasterarrays/${m.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:v+=`tiles/${m.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let b=m.params;return c&&(b=b.filter(S=>!S.match(/^access_token=/))),b.length&&(v+=`?${b.join("&")}`),v}canonicalizeTileset(o,c){const m=!!c&&n.f(c),v=[];for(const b of o.tiles||[])n.h(b)?v.push(this.canonicalizeTileURL(b,m)):v.push(b);return v}_makeAPIURL(o,c){const m="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",v=xt(n.e.API_URL);if(o.protocol=v.protocol,o.authority=v.authority,o.protocol==="http"){const b=o.params.indexOf("secure");b>=0&&o.params.splice(b,1)}if(v.path!=="/"&&(o.path=`${v.path}${o.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return yt(o);if(c=c||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${m}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${m}`)}return o.params=o.params.filter(b=>b.indexOf("access_token")===-1),o.params.push(`access_token=${c||""}`),yt(o)}}const Ke=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function xt(p){const o=p.match(Ke);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function yt(p){const o=p.params.length?`?${p.params.join("&")}`:"";return`${p.protocol}://${p.authority}${p.path}${o}`}const Dt="mapbox.eventData";function bt(p){if(!p)return null;const o=p.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(n.j(o[1]))}catch{return null}}class bi{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const c=bt(n.e.ACCESS_TOKEN);let m="";return m=c&&c.u?n.k(c.u):n.e.ACCESS_TOKEN||"",o?`${Dt}.${o}:${m}`:`${Dt}:${m}`}fetchEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),m=this.getStorageKey("uuid");if(o)try{const v=localStorage.getItem(c);v&&(this.eventData=JSON.parse(v));const b=localStorage.getItem(m);b&&(this.anonId=b)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),m=this.getStorageKey("uuid"),v=this.anonId;if(o&&v)try{localStorage.setItem(m,v),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,c,m,v){if(!n.e.EVENTS_URL)return;const b=xt(n.e.EVENTS_URL);b.params.push(`access_token=${v||n.e.ACCESS_TOKEN||""}`);const S={event:this.type,created:new Date(o).toISOString()},D=c?n.l(S,c):S,R={url:yt(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([D])};this.pendingRequest=n.p(R,F=>{this.pendingRequest=null,m(F),this.saveEventData(),this.processRequests(v)})}queueRequest(o,c){this.queue.push(o),this.processRequests(c)}}const ji=new class extends bi{constructor(p){super("appUserTurnstile"),this._customAccessToken=p}postTurnstileEvent(p,o){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(p)&&p.some(c=>n.f(c)||n.h(c))&&this.queueRequest(Date.now(),o)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=bt(n.e.ACCESS_TOKEN),c=o?o.u:n.e.ACCESS_TOKEN;let m=c!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),m=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),S=new Date(v),D=(v-this.eventData.lastSuccess)/864e5;m=m||D>=1||D<-1||b.getDate()!==S.getDate()}else m=!0;m?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:M,skuId:Ue,"enabled.telemetry":!1,userId:this.anonId},b=>{b||(this.eventData.lastSuccess=v,this.eventData.tokenU=c)},p):this.processRequests()}},Qt=ji.postTurnstileEvent.bind(ji),Nt=new class extends bi{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(p,o,c,m){this.skuToken=o,this.errorCb=m,n.e.EVENTS_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},c):this.errorCb(new Error(vt)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:M,skuId:Ue,skuToken:this.skuToken,userId:this.anonId},m=>{m?this.errorCb(m):o&&(this.success[o]=!0)},p))}remove(){this.errorCb=null}},Sr=Nt.postMapLoadEvent.bind(Nt),Ui=new class extends bi{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(p){let o=this.mapInstanceIdMap.get(p);return o||(o=n.u(),this.mapInstanceIdMap.set(p,o)),o}getEventId(p){const o=this.eventIdPerMapInstanceMap.get(p)||0;return this.eventIdPerMapInstanceMap.set(p,o+1),o}postStyleLoadEvent(p,o){const{map:c,style:m,importedStyles:v}=o;if(!n.e.EVENTS_URL||!p&&!n.e.ACCESS_TOKEN)return;const b=this.getMapInstanceId(c),S={mapInstanceId:b,eventId:this.getEventId(b),style:m};v.length&&(S.importedStyles=v),this.queueRequest({timestamp:Date.now(),payload:S},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:c}=this.queue.shift();this.postEvent(o,c,()=>{},p)}},ci=Ui.postStyleLoadEvent.bind(Ui),ur=new class extends bi{constructor(){super("gljs.performance")}postPerformanceEvent(p,o){n.e.EVENTS_URL&&(p||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:c}=this.queue.shift(),m=function(v){const b=performance.getEntriesByType("resource"),S=performance.getEntriesByType("mark"),D=function(W){const te={};if(W){for(const ee in W)if(ee!=="other")for(const ne of W[ee]){const re=`${ee}ResolveRangeMin`,ue=`${ee}ResolveRangeMax`,ye=`${ee}RequestCount`,ve=`${ee}RequestCachedCount`;te[re]=Math.min(te[re]||1/0,ne.startTime),te[ue]=Math.max(te[ue]||-1/0,ne.responseEnd);const be=Me=>{te[Me]===void 0&&(te[Me]=0),++te[Me]};ne.transferSize!==void 0&&ne.transferSize===0&&be(ve),be(ye)}}return te}(function(W,te){const ee={};if(W)for(const ne of W){const re=te(ne);ee[re]===void 0&&(ee[re]=[]),ee[re].push(ne)}return ee}(b,V)),R=window.devicePixelRatio,F=navigator.connection||navigator.mozConnection||navigator.webkitConnection,O=F?F.effectiveType:void 0,j={counters:[],metadata:[],attributes:[]},q=(W,te,ee)=>{ee!=null&&W.push({name:te,value:ee.toString()})};for(const W in D)q(j.counters,W,D[W]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(q(j.counters,"interactionRangeMin",v.interactionRange[0]),q(j.counters,"interactionRangeMax",v.interactionRange[1])),S)for(const W of Object.keys(P)){const te=P[W],ee=S.find(ne=>ne.name===te);ee&&q(j.counters,te,ee.startTime)}return q(j.counters,"visibilityHidden",v.visibilityHidden),q(j.attributes,"style",function(W){if(W)for(const te of W){const ee=te.name.split("?")[0];if(n.i(ee)){const ne=ee.split("/").slice(-2);if(ne.length===2)return`mapbox://styles/${ne[0]}/${ne[1]}`}}}(b)),q(j.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),q(j.attributes,"fogEnabled",v.fogEnabled?"true":"false"),q(j.attributes,"projection",v.projection),q(j.attributes,"zoom",v.zoom),q(j.metadata,"devicePixelRatio",R),q(j.metadata,"connectionEffectiveType",O),q(j.metadata,"navigatorUserAgent",navigator.userAgent),q(j.metadata,"screenWidth",window.screen.width),q(j.metadata,"screenHeight",window.screen.height),q(j.metadata,"windowWidth",window.innerWidth),q(j.metadata,"windowHeight",window.innerHeight),q(j.metadata,"mapWidth",v.width/R),q(j.metadata,"mapHeight",v.height/R),q(j.metadata,"webglRenderer",v.renderer),q(j.metadata,"webglVendor",v.vendor),q(j.metadata,"sdkVersion",M),q(j.metadata,"sdkIdentifier","mapbox-gl-js"),j}(c);for(const v of m.metadata);for(const v of m.counters);for(const v of m.attributes);this.postEvent(o,m,()=>{},p)}},cn=ur.postPerformanceEvent.bind(ur),Di=new class extends bi{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(p,o,c,m){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const v=xt(n.e.API_URL+n.e.SESSION_PATH);v.params.push(`sku=${o||""}`),v.params.push(`access_token=${m||n.e.ACCESS_TOKEN||""}`);const b={url:yt(v),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(b,S=>{this.pendingRequest=null,c(S),this.saveEventData(),this.processRequests(m)})}getSessionAPI(p,o,c,m){this.skuToken=o,this.errorCb=m,n.e.SESSION_PATH&&n.e.API_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},c):this.errorCb(new Error(vt)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||this.getSession(c,this.skuToken,m=>{m?this.errorCb(m):o&&(this.success[o]=!0)},p)}remove(){this.errorCb=null}},Te=Di.getSessionAPI.bind(Di),On=new Set;function Bn(p,o){o?On.add(p):On.delete(p)}class En{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,c){this._updatedSourceCaches[o]=c,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const c=o.scope;this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._updatedLayers[c].add(o.id),this.setDirty()}removeLayer(o){const c=o.scope;this._removedLayers[c]=this._removedLayers[c]||{},this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._removedLayers[c][o.id]=o,this._updatedLayers[c].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const c in this._updatedLayers)o[c]=o[c]||{},o[c].updatedIds=Array.from(this._updatedLayers[c].values());for(const c in this._removedLayers)o[c]=o[c]||{},o[c].removedIds=Object.keys(this._removedLayers[c]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(o){this._updatedImages.add(o),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Pt(p){const{userImage:o}=p;return!!(o&&o.render&&o.render())&&(p.data.replace(new Uint8Array(o.data.buffer)),!0)}class Jn extends n.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(o){this.images[o]={},this.loaded[o]=!1,this.updatedImages[o]={},this.patterns[o]={},this.callbackDispatchedThisFrame[o]={},this.atlasImage[o]=new n.r({width:1,height:1})}isLoaded(){for(const o in this.loaded)if(!this.loaded[o])return!1;return!0}setLoaded(o,c){if(this.loaded[c]!==o&&(this.loaded[c]=o,o)){for(const{ids:m,callback:v}of this.requestors)this._notify(m,c,v);this.requestors=[]}}hasImage(o,c){return!!this.getImage(o,c)}getImage(o,c){return this.images[c][o]}addImage(o,c,m){this._validate(o,m)&&(this.images[c][o]=m)}_validate(o,c){let m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new n.t(new Error(`Image "${o}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new n.t(new Error(`Image "${o}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new n.t(new Error(`Image "${o}" has invalid "content" value`))),m=!1),m}_validateStretch(o,c){if(!o)return!0;let m=0;for(const v of o){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,c,m){m.version=this.images[c][o].version+1,this.images[c][o]=m,this.updatedImages[c][o]=!0}removeImage(o,c){const m=this.images[c][o];delete this.images[c][o],delete this.patterns[c][o],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(o){return Object.keys(this.images[o])}getImages(o,c,m){let v=!0;const b=!!this.loaded[c];if(!b)for(const S of o)this.images[c][S]||(v=!1);b||v?this._notify(o,c,m):this.requestors.push({ids:o,scope:c,callback:m})}getUpdatedImages(o){return this.updatedImages[o]}_notify(o,c,m){const v={};for(const b of o){this.images[c][b]||this.fire(new n.x("styleimagemissing",{id:b}));const S=this.images[c][b];S?v[b]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:n.w(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,v)}getPixelSize(o){const{width:c,height:m}=this.atlasImage[o];return{width:c,height:m}}getPattern(o,c,m){const v=this.patterns[c][o],b=this.getImage(o,c);if(!b)return null;if(v&&v.position.version===b.version)return v.position;if(v)v.position.version=b.version;else{const S={w:b.data.width+2*n.y,h:b.data.height+2*n.y,x:0,y:0},D=new n.I(S,b,n.y);this.patterns[c][o]={bin:S,position:D}}return this._updatePatternAtlas(c,m),this.patterns[c][o].position}bind(o,c){const m=o.gl;let v=this.atlasTexture[c];v?this.dirty&&(v.update(this.atlasImage[c]),this.dirty=!1):(v=new n.T(o,this.atlasImage[c],m.RGBA8),this.atlasTexture[c]=v),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(o,c){const m=[];for(const D in this.patterns[o])m.push(this.patterns[o][D].bin);const{w:v,h:b}=n.z(m),S=this.atlasImage[o];S.resize({width:v||1,height:b||1});for(const D in this.patterns[o]){const{bin:R,position:F}=this.patterns[o][D];let O=F.padding;const j=R.x+O,q=R.y+O,W=this.images[o][D].data,te=W.width,ee=W.height;O=O>1?O-1:O,n.r.copy(W,S,{x:0,y:0},{x:j,y:q},{width:te,height:ee},c),n.r.copy(W,S,{x:0,y:ee-O},{x:j,y:q-O},{width:te,height:O},c),n.r.copy(W,S,{x:0,y:0},{x:j,y:q+ee},{width:te,height:O},c),n.r.copy(W,S,{x:te-O,y:0},{x:j-O,y:q},{width:O,height:ee},c),n.r.copy(W,S,{x:0,y:0},{x:j+te,y:q},{width:O,height:ee},c),n.r.copy(W,S,{x:te-O,y:ee-O},{x:j-O,y:q-O},{width:O,height:O},c),n.r.copy(W,S,{x:0,y:ee-O},{x:j+te,y:q-O},{width:O,height:O},c),n.r.copy(W,S,{x:0,y:0},{x:j+te,y:q+ee},{width:O,height:O},c),n.r.copy(W,S,{x:te-O,y:0},{x:j-O,y:q+ee},{width:O,height:O},c)}this.dirty=!0}beginFrame(){for(const o in this.images)this.callbackDispatchedThisFrame[o]={}}dispatchRenderCallbacks(o,c){for(const m of o){if(this.callbackDispatchedThisFrame[c][m])continue;this.callbackDispatchedThisFrame[c][m]=!0;const v=this.images[c][m];Pt(v)&&this.updateImage(m,c,v)}}}function Xi(p){const o=p.key,c=p.value,m=p.valueSpec||{},v=p.objectElementValidators||{},b=p.style,S=p.styleSpec;let D=[];const R=n.B(c);if(R!=="object")return[new n.V(o,c,`object expected, ${R} found`)];for(const F in c){const O=F.split(".")[0];let j;v[O]?j=v[O]:m[O]?j=Yi:v["*"]?j=v["*"]:m["*"]&&(j=Yi),j?D=D.concat(j({key:(o&&`${o}.`)+F,value:c[F],valueSpec:m[O]||m["*"],style:b,styleSpec:S,object:c,objectKey:F},c)):D.push(new n.A(o,c[F],`unknown property "${F}"`))}for(const F in m)v[F]||m[F].required&&m[F].default===void 0&&c[F]===void 0&&D.push(new n.V(o,c,`missing required property "${F}"`));return D}function lo(p){const o=p.value,c=p.valueSpec,m=p.style,v=p.styleSpec,b=p.key,S=p.arrayElementValidator||Yi;if(n.B(o)!=="array")return[new n.V(b,o,`array expected, ${n.B(o)} found`)];if(c.length&&o.length!==c.length)return[new n.V(b,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new n.V(b,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let D={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};v.$version<7&&(D.function=c.function),n.B(c.value)==="object"&&(D=c.value);let R=[];for(let F=0;F<o.length;F++)R=R.concat(S({array:o,arrayIndex:F,value:o[F],valueSpec:D,style:m,styleSpec:v,key:`${b}[${F}]`},!0));return R}function Oi(p){const o=p.key,c=p.value,m=p.valueSpec;let v=n.B(c);if(v==="number"&&c!=c&&(v="NaN"),v!=="number")return[new n.V(o,c,`number expected, ${v} found`)];if("minimum"in m){let b=m.minimum;if(n.B(m.minimum)==="array"&&(b=m.minimum[p.arrayIndex]),c<b)return[new n.V(o,c,`${c} is less than the minimum value ${b}`)]}if("maximum"in m){let b=m.maximum;if(n.B(m.maximum)==="array"&&(b=m.maximum[p.arrayIndex]),c>b)return[new n.V(o,c,`${c} is greater than the maximum value ${b}`)]}return[]}function un(p){const o=p.valueSpec,c=n.D(p.value.type);let m,v,b,S={};const D=c!=="categorical"&&p.value.property===void 0,R=!D,F=n.B(p.value.stops)==="array"&&n.B(p.value.stops[0])==="array"&&n.B(p.value.stops[0][0])==="object",O=Xi({key:p.key,value:p.value,valueSpec:p.styleSpec.function,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(W){if(c==="identity")return[new n.V(W.key,W.value,'identity function may not have a "stops" property')];let te=[];const ee=W.value;return te=te.concat(lo({key:W.key,value:ee,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:j})),n.B(ee)==="array"&&ee.length===0&&te.push(new n.V(W.key,ee,"array must have at least one stop")),te},default:function(W){return Yi({key:W.key,value:W.value,valueSpec:o,style:W.style,styleSpec:W.styleSpec})}}});return c==="identity"&&D&&O.push(new n.V(p.key,p.value,'missing required property "property"')),c==="identity"||p.value.stops||O.push(new n.V(p.key,p.value,'missing required property "stops"')),c==="exponential"&&p.valueSpec.expression&&!n.F(p.valueSpec)&&O.push(new n.V(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(R&&!n.G(p.valueSpec)?O.push(new n.V(p.key,p.value,"property functions not supported")):D&&!n.H(p.valueSpec)&&O.push(new n.V(p.key,p.value,"zoom functions not supported"))),c!=="categorical"&&!F||p.value.property!==void 0||O.push(new n.V(p.key,p.value,'"property" property is required')),O;function j(W){let te=[];const ee=W.value,ne=W.key;if(n.B(ee)!=="array")return[new n.V(ne,ee,`array expected, ${n.B(ee)} found`)];if(ee.length!==2)return[new n.V(ne,ee,`array length 2 expected, length ${ee.length} found`)];if(F){if(n.B(ee[0])!=="object")return[new n.V(ne,ee,`object expected, ${n.B(ee[0])} found`)];if(ee[0].zoom===void 0)return[new n.V(ne,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new n.V(ne,ee,"object stop key must have value")];const re=n.D(ee[0].zoom);if(typeof re!="number")return[new n.V(ne,ee[0].zoom,"stop zoom values must be numbers")];if(b&&b>re)return[new n.V(ne,ee[0].zoom,"stop zoom values must appear in ascending order")];re!==b&&(b=re,v=void 0,S={}),te=te.concat(Xi({key:`${ne}[0]`,value:ee[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Oi,value:q}}))}else te=te.concat(q({key:`${ne}[0]`,value:ee[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},ee));return n.J(n.K(ee[1]))?te.concat([new n.V(`${ne}[1]`,ee[1],"expressions are not allowed in function stops.")]):te.concat(Yi({key:`${ne}[1]`,value:ee[1],valueSpec:o,style:W.style,styleSpec:W.styleSpec}))}function q(W,te){const ee=n.B(W.value),ne=n.D(W.value),re=W.value!==null?W.value:te;if(m){if(ee!==m)return[new n.V(W.key,re,`${ee} stop domain type must match previous stop domain type ${m}`)]}else m=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean"&&typeof ne!="number"&&typeof ne!="string"&&typeof ne!="boolean")return[new n.V(W.key,re,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&c!=="categorical"){let ue=`number expected, ${ee} found`;return n.G(o)&&c===void 0&&(ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(W.key,re,ue)]}return c!=="categorical"||ee!=="number"||typeof ne=="number"&&isFinite(ne)&&Math.floor(ne)===ne?c!=="categorical"&&ee==="number"&&typeof ne=="number"&&typeof v=="number"&&v!==void 0&&ne<v?[new n.V(W.key,re,"stop domain values must appear in ascending order")]:(v=ne,c==="categorical"&&ne in S?[new n.V(W.key,re,"stop domain values must be unique")]:(S[ne]=!0,[])):[new n.V(W.key,re,`integer expected, found ${String(ne)}`)]}}function Xr(p){const o=(p.expressionContext==="property"?n.L:n.M)(n.K(p.value),p.valueSpec);if(o.result==="error")return o.value.map(m=>new n.V(`${p.key}${m.key}`,p.value,m.message));const c=o.value.expression||o.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!c.outputDefined())return[new n.V(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!n.N(c))return[new n.V(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter")return Do(c,p);if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!n.O(c,["zoom","feature-state"]))return[new n.V(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!n.Q(c))return[new n.V(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Do(p,o){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const v of o.valueSpec.expression.parameters)c.delete(v);if(c.size===0)return[];const m=[];return p instanceof n.S&&c.has(p.name)?[new n.V(o.key,o.value,`["${p.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(p.eachChild(v=>{m.push(...Do(v,o))}),m)}function hi(p){const o=p.key,c=p.value,m=p.valueSpec,v=[];return Array.isArray(m.values)?m.values.indexOf(n.D(c))===-1&&v.push(new n.V(o,c,`expected one of [${m.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(m.values).indexOf(n.D(c))===-1&&v.push(new n.V(o,c,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(c)} found`)),v}function Rt(p){return n.W(n.K(p.value))?Xr(n.C({},p,{expressionContext:"filter",valueSpec:p.styleSpec[`filter_${p.layerType||"fill"}`]})):Ot(p)}function Ot(p){const o=p.value,c=p.key;if(n.B(o)!=="array")return[new n.V(c,o,`array expected, ${n.B(o)} found`)];const m=p.styleSpec;let v,b=[];if(o.length<1)return[new n.V(c,o,"filter array must have at least 1 element")];switch(b=b.concat(hi({key:`${c}[0]`,value:o[0],valueSpec:m.filter_operator,style:p.style,styleSpec:p.styleSpec})),n.D(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&n.D(o[1])==="$type"&&b.push(new n.V(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&b.push(new n.V(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(v=n.B(o[1]),v!=="string"&&b.push(new n.V(`${c}[1]`,o[1],`string expected, ${v} found`)));for(let S=2;S<o.length;S++)v=n.B(o[S]),n.D(o[1])==="$type"?b=b.concat(hi({key:`${c}[${S}]`,value:o[S],valueSpec:m.geometry_type,style:p.style,styleSpec:p.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&b.push(new n.V(`${c}[${S}]`,o[S],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let S=1;S<o.length;S++)b=b.concat(Ot({key:`${c}[${S}]`,value:o[S],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":v=n.B(o[1]),o.length!==2?b.push(new n.V(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):v!=="string"&&b.push(new n.V(`${c}[1]`,o[1],`string expected, ${v} found`))}return b}function sr(p,o){const c=p.key,m=p.style,v=p.layer,b=p.styleSpec,S=p.value,D=p.objectKey,R=b[`${o}_${p.layerType}`];if(!R)return[];const F=D.match(/^(.*)-transition$/);if(o==="paint"&&F&&R[F[1]]&&R[F[1]].transition)return Yi({key:c,value:S,valueSpec:b.transition,style:m,styleSpec:b});const O=p.valueSpec||R[D];if(!O)return[new n.A(c,S,`unknown property "${D}"`)];let j;if(n.B(S)==="string"&&n.G(O)&&!O.tokens&&(j=/^{([^}]+)}$/.exec(S))){const W=`\`{ "type": "identity", "property": ${j?JSON.stringify(j[1]):'"_"'} }\``;return[new n.V(c,S,`"${D}" does not support interpolation syntax
Use an identity property function instead: ${W}.`)]}const q=[];if(p.layerType==="symbol")D!=="text-field"||!m||m.glyphs||m.imports||q.push(new n.V(c,S,'use of "text-field" requires a style "glyphs" property')),D==="text-font"&&n.X(n.K(S))&&n.D(S.type)==="identity"&&q.push(new n.V(c,S,'"text-font" does not support identity functions'));else if(p.layerType==="model"&&o==="paint"&&v&&v.layout&&v.layout.hasOwnProperty("model-id")&&n.G(O)&&(n.Y(O)||n.H(O))){const W=n.L(n.K(S),O),te=W.value.expression||W.value._styleExpression.expression;te&&!n.O(te,["measure-light"])&&(D==="model-emissive-strength"&&n.Q(te)&&n.N(te)||q.push(new n.V(c,S,`${D} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return q.concat(Yi({key:p.key,value:S,valueSpec:O,style:m,styleSpec:b,expressionContext:"property",propertyType:o,propertyKey:D}))}function hr(p){return sr(p,"paint")}function Mr(p){return sr(p,"layout")}function Gi(p){let o=[];const c=p.value,m=p.key,v=p.style,b=p.styleSpec;c.type||c.ref||o.push(new n.V(m,c,'either "type" or "ref" is required'));let S=n.D(c.type);const D=n.D(c.ref);if(c.id){const R=n.D(c.id);for(let F=0;F<p.arrayIndex;F++){const O=v.layers[F];n.D(O.id)===R&&o.push(new n.V(m,c.id,`duplicate layer id "${c.id}", previously used at line ${O.id.__line__}`))}}if("ref"in c){let R;["type","source","source-layer","filter","layout"].forEach(F=>{F in c&&o.push(new n.V(m,c[F],`"${F}" is prohibited for ref layers`))}),v.layers.forEach(F=>{n.D(F.id)===D&&(R=F)}),R?R.ref?o.push(new n.V(m,c.ref,"ref cannot reference another ref layer")):S=n.D(R.type):typeof D=="string"&&o.push(new n.V(m,c.ref,`ref layer "${D}" not found`))}else if(S!=="background"&&S!=="sky"&&S!=="slot")if(c.source){const R=v.sources&&v.sources[c.source],F=R&&n.D(R.type);R?F==="vector"&&S==="raster"?o.push(new n.V(m,c.source,`layer "${c.id}" requires a raster source`)):F==="raster"&&S!=="raster"?o.push(new n.V(m,c.source,`layer "${c.id}" requires a vector source`)):F!=="vector"||c["source-layer"]?F==="raster-dem"&&S!=="hillshade"?o.push(new n.V(m,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="raster-array"||["raster","raster-particle"].includes(S)?S!=="line"||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||F==="geojson"&&R.lineMetrics?S==="raster-particle"&&F!=="raster-array"&&o.push(new n.V(m,c.source,`layer "${c.id}" requires a 'raster-array' source.`)):o.push(new n.V(m,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new n.V(m,c.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new n.V(m,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new n.V(m,c.source,`source "${c.source}" not found`))}else o.push(new n.V(m,c,'missing required property "source"'));return o=o.concat(Xi({key:m,value:c,valueSpec:b.layer,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Yi({key:`${m}.type`,value:c.type,valueSpec:b.layer.type,style:p.style,styleSpec:p.styleSpec,object:c,objectKey:"type"}),filter:R=>Rt(n.C({layerType:S},R)),layout:R=>Xi({layer:c,key:R.key,value:R.value,valueSpec:{},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":F=>Mr(n.C({layerType:S},F))}}),paint:R=>Xi({layer:c,key:R.key,value:R.value,valueSpec:{},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":F=>hr(n.C({layerType:S,layer:c},F))}})}})),o}function Vr(p){const o=p.value,c=p.key,m=n.B(o);return m!=="string"?[new n.V(c,o,`string expected, ${m} found`)]:[]}const Vn={promoteId:function({key:p,value:o}){if(n.B(o)==="string")return Vr({key:p,value:o});{const c=[];for(const m in o)c.push(...Vr({key:`${p}.${m}`,value:o[m]}));return c}}};function ts(p){const o=p.value,c=p.key,m=p.styleSpec,v=p.style;if(!o.type)return[new n.V(c,o,'"type" is required')];const b=n.D(o.type);let S=[];switch(["vector","raster","raster-dem","raster-array"].includes(b)&&(o.url||o.tiles||S.push(new n.A(c,o,'Either "url" or "tiles" is required.'))),b){case"vector":case"raster":case"raster-dem":case"raster-array":return S=S.concat(Xi({key:c,value:o,valueSpec:m[`source_${b.replace("-","_")}`],style:p.style,styleSpec:m,objectElementValidators:Vn})),S;case"geojson":if(S=Xi({key:c,value:o,valueSpec:m.source_geojson,style:v,styleSpec:m,objectElementValidators:Vn}),o.cluster)for(const D in o.clusterProperties){const[R,F]=o.clusterProperties[D],O=typeof R=="string"?[R,["accumulated"],["get",D]]:R;S.push(...Xr({key:`${c}.${D}.map`,value:F,expressionContext:"cluster-map"})),S.push(...Xr({key:`${c}.${D}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return S;case"video":return Xi({key:c,value:o,valueSpec:m.source_video,style:v,styleSpec:m});case"image":return Xi({key:c,value:o,valueSpec:m.source_image,style:v,styleSpec:m});case"canvas":return[new n.V(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hi({key:`${c}.type`,value:o.type,valueSpec:{values:bs(m)},style:v,styleSpec:m})}}function bs(p){return p.source.reduce((o,c)=>{const m=p[c];return m.type.type==="enum"&&(o=o.concat(Object.keys(m.type.values))),o},[])}function Po(p){const o=p.value,c=p.styleSpec,m=c.light,v=p.style;let b=[];const S=n.B(o);if(o===void 0)return b;if(S!=="object")return b=b.concat([new n.V("light",o,`object expected, ${S} found`)]),b;for(const D in o){const R=D.match(/^(.*)-transition$/);b=b.concat(R&&m[R[1]]&&m[R[1]].transition?Yi({key:D,value:o[D],valueSpec:c.transition,style:v,styleSpec:c}):m[D]?Yi({key:D,value:o[D],valueSpec:m[D],style:v,styleSpec:c}):[new n.V(D,o[D],`unknown property "${D}"`)])}return b}function ws(p){const o=p.value;let c=[];if(!o)return c;const m=n.B(o);if(m!=="object")return c=c.concat([new n.V("light-3d",o,`object expected, ${m} found`)]),c;const v=p.styleSpec,b=v["light-3d"],S=p.key,D=p.style,R=p.style.lights;for(const j of["type","id"])if(!(j in o))return c=c.concat([new n.V("light-3d",o,`missing property ${j} on light`)]),c;if(o.type&&R)for(let j=0;j<p.arrayIndex;j++){const q=n.D(o.type),W=R[j];n.D(W.type)===q&&c.push(new n.V(S,o.id,`duplicate light type "${o.type}", previously defined at line ${W.id.__line__}`))}const F=`properties_light_${o.type}`;if(!(F in v))return c=c.concat([new n.V("light-3d",o,`Invalid light type ${o.type}`)]),c;const O=v[F];for(const j in o)if(j==="properties"){const q=o[j],W=n.B(q);if(W!=="object")return c=c.concat([new n.V("properties",q,`object expected, ${W} found`)]),c;for(const te in q)c=c.concat(O[te]?Yi({key:te,value:q[te],valueSpec:O[te],style:D,styleSpec:v}):[new n.A(p.key,q[te],`unknown property "${te}"`)])}else{const q=j.match(/^(.*)-transition$/);c=c.concat(q&&b[q[1]]&&b[q[1]].transition?Yi({key:j,value:o[j],valueSpec:v.transition,style:D,styleSpec:v}):b[j]?Yi({key:j,value:o[j],valueSpec:b[j],style:D,styleSpec:v}):[new n.A(j,o[j],`unknown property "${j}"`)])}return c}function vo(p){const o=p.value,c=p.key,m=p.style,v=p.styleSpec,b=v.terrain;let S=[];const D=n.B(o);if(o===void 0||D==="null")return S;if(D!=="object")return S=S.concat([new n.V("terrain",o,`object expected, ${D} found`)]),S;for(const R in o){const F=R.match(/^(.*)-transition$/);S=S.concat(F&&b[F[1]]&&b[F[1]].transition?Yi({key:R,value:o[R],valueSpec:v.transition,style:m,styleSpec:v}):b[R]?Yi({key:R,value:o[R],valueSpec:b[R],style:m,styleSpec:v}):[new n.A(R,o[R],`unknown property "${R}"`)])}if(o.source){const R=m.sources&&m.sources[o.source],F=R&&n.D(R.type);R?F!=="raster-dem"&&S.push(new n.V(c,o.source,`terrain cannot be used with a source of type ${String(F)}, it only be used with a "raster-dem" source type`)):S.push(new n.V(c,o.source,`source "${o.source}" not found`))}else S.push(new n.V(c,o,'terrain is missing required property "source"'));return S}function to(p){const o=p.value,c=p.style,m=p.styleSpec,v=m.fog;let b=[];const S=n.B(o);if(o===void 0)return b;if(S!=="object")return b=b.concat([new n.V("fog",o,`object expected, ${S} found`)]),b;for(const D in o){const R=D.match(/^(.*)-transition$/);b=b.concat(R&&v[R[1]]&&v[R[1]].transition?Yi({key:D,value:o[D],valueSpec:m.transition,style:c,styleSpec:m}):v[D]?Yi({key:D,value:o[D],valueSpec:v[D],style:c,styleSpec:m}):[new n.A(D,o[D],`unknown property "${D}"`)])}return b}const Rc={"*":()=>[],array:lo,boolean:function(p){const o=p.value,c=p.key,m=n.B(o);return m!=="boolean"?[new n.V(c,o,`boolean expected, ${m} found`)]:[]},number:Oi,color:function(p){const o=p.key,c=p.value,m=n.B(c);return m!=="string"?[new n.V(o,c,`color expected, ${m} found`)]:n.U.parseCSSColor(c)===null?[new n.V(o,c,`color expected, "${c}" found`)]:[]},enum:hi,filter:Rt,function:un,layer:Gi,object:Xi,source:ts,model:n.Z,light:Po,"light-3d":ws,terrain:vo,fog:to,string:Vr,formatted:function(p){return Vr(p).length===0?[]:Xr(p)},resolvedImage:function(p){return Vr(p).length===0?[]:Xr(p)},projection:function(p){const o=p.value,c=p.styleSpec,m=c.projection,v=p.style;let b=[];const S=n.B(o);if(S==="object")for(const D in o)b=b.concat(Yi({key:D,value:o[D],valueSpec:m[D],style:v,styleSpec:c}));else S!=="string"&&(b=b.concat([new n.V("projection",o,`object or string expected, ${S} found`)]));return b},import:function(p){const{value:o,styleSpec:c}=p,{data:m,...v}=o;Object.defineProperty(v,"__line__",{value:o.__line__,enumerable:!1});let b=Xi(n.C({},p,{value:v,valueSpec:c.import}));return n.D(v.id)===""&&b.push(new n.V(`${p.key}.id`,v,"import id can't be an empty string")),m&&(b=b.concat(Lc(m,c,{key:`${p.key}.data`}))),b}};function Yi(p,o=!1){const c=p.value,m=p.valueSpec,v=p.styleSpec;if(m.expression&&n.X(n.D(c)))return un(p);if(m.expression&&n.J(n.K(c)))return Xr(p);if(m.type&&Rc[m.type]){const b=Rc[m.type](p);return o===!0&&b.length>0&&n.B(p.value)==="array"?Xr(p):b}return Xi(n.C({},p,{valueSpec:m.type?v[m.type]:m}))}function xo(p){const o=p.value,c=p.key,m=Vr(p);return m.length||(o.indexOf("{fontstack}")===-1&&m.push(new n.V(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&m.push(new n.V(c,o,'"glyphs" url must include a "{range}" token'))),m}function Lc(p,o=n._,c={}){return Yi({key:c.key||"",value:p,valueSpec:o.$root,styleSpec:o,style:p,objectElementValidators:{glyphs:xo,"*":()=>[]}})}function co(p,o=n._){return De(Lc(p,o))}const io=p=>De(ts(p)),ka=p=>De(Po(p)),Wl=p=>De(ws(p)),Zl=p=>De(vo(p)),Oc=p=>De(to(p)),ut=p=>De(Gi(p)),oe=p=>De(Rt(p)),ce=p=>De(hr(p)),Se=p=>De(Mr(p)),je=p=>De(n.Z(p));function De(p){return p.slice().sort((o,c)=>o.line&&c.line?o.line-c.line:0)}function Ge(p,o){let c=!1;if(o&&o.length)for(const m of o)m instanceof n.A?n.w(m.message):(p.fire(new n.t(new Error(m.message))),c=!0);return c}let lt;class Je extends n.E{constructor(o,c="flat"){super(),this._transitionable=new n.$(lt||(lt=new n.a0({anchor:new n.a1(n._.light.anchor),position:new n.a2(n._.light.position),color:new n.a1(n._.light.color),intensity:new n.a1(n._.light.intensity)}))),this.setLight(o,c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c,m={}){this._validate(ka,o,m)||(this._transitionable.setTransitionOrValue(o),this.id=c)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,m){return(!m||m.validate!==!1)&&Ge(this,o.call(co,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n._})))}}let at=class extends n.E{constructor(p,o,c,m){super(),this.scope=c,this._transitionable=new n.$(new n.a0({source:new n.a1(n._.terrain.source),exaggeration:new n.a1(n._.terrain.exaggeration)}),c,m),this._transitionable.setTransitionOrValue(p,m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(p,o){this._transitionable.setTransitionOrValue(p,o)}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}getExaggeration(p){return this._transitioning.possiblyEvaluate(new n.a3(p)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const p=this._transitionable._values.exaggeration;if(!p)return null;const o=p.value.expression;if(!o)return null;let c=-1,m=-1,v=1;for(const b of o.zoomStops)v=o.evaluate(new n.a3(b)),v>.01?(c=b,m=-1):m=b;return v<.01&&c>0&&m>c?[c,m]:null}isZoomDependent(){const p=this._transitionable._values.exaggeration;return p!=null&&p.value!=null&&p.value.expression!=null&&p.value.expression instanceof n.a4}};const ft=45,mt=65,kt=.05;function Zt(p,o,c,m){const v=n.a7(ft,mt,c),[b,S]=ni(p,m);let D=1-Math.min(1,Math.exp((o-b)/(S-b)*-6));return D*=D*D,D=Math.min(1,1.00747*D),D*v*p.alpha}function ni(p,o){const c=.5/Math.tan(.5*o);return[p.range[0]+c,p.range[1]+c]}function Ii(p,o,c,m,v){const b=n.a6.vec3.transformMat4([],[o,c,m],v.mercatorFogMatrix);return Zt(p,n.a6.vec3.length(b),v.pitch,v._fov)}function xi(p,o,c,m,v,b,S){const D=[[c,m,0],[v,m,0],[v,b,0],[c,b,0]];let R=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(const O of D){const j=n.a6.vec3.transformMat4([],O,o),q=n.a6.vec3.length(j);R=Math.min(R,q),F=Math.max(F,q)}return[Zt(p,R,S.pitch,S._fov),Zt(p,F,S.pitch,S._fov)]}class ki extends n.E{constructor(o,c,m,v){super();const b=new n.a0({range:new n.a1(n._.fog.range),color:new n.a1(n._.fog.color),"high-color":new n.a1(n._.fog["high-color"]),"space-color":new n.a1(n._.fog["space-color"]),"horizon-blend":new n.a1(n._.fog["horizon-blend"]),"star-intensity":new n.a1(n._.fog["star-intensity"]),"vertical-range":new n.a1(n._.fog["vertical-range"])});this._transitionable=new n.$(b,m,new Map(v)),this.set(o,v),this._transitioning=this._transitionable.untransitioned(),this._transform=c,this.properties=new n.a8(b),this.scope=m}get state(){const o=this._transform,c=o.projection.name==="globe",m=n.a9(o.zoom),v=this.properties.get("range"),b=[.5,3];return{range:c?[n.aa(b[0],v[0],m),n.aa(b[1],v[1],m)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,c,m={}){if(this._validate(Oc,o,m))return;const v=n.l({},o);for(const b of Object.keys(n._.fog))v[b]===void 0&&(v[b]=n._.fog[b].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,c)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.a7(ft,mt,o))*c.a}getOpacityAtLatLng(o,c){return this._transform.projection.supportsFog?function(m,v,b){const S=n.a5.fromLngLat(v),D=b.elevation?b.elevation.getAtPointOrZero(S):0;return Ii(m,S.x,S.y,D,b)}(this.state,o,c):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const c=this._transform.calculateFogTileMatrix(o.toUnwrapped());return xi(this.state,c,0,0,n.ab,n.ab,this._transform)}getOpacityForBounds(o,c,m,v,b){return this._transform.projection.supportsFog?xi(this.state,o,c,m,v,b,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?ni(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const c=[4,5,6,7];for(const m of c){const v=o.points[m];let b;if(v[2]>=0)b=v;else{const S=o.points[m-4];b=n.ac(S,v,S[2]/(S[2]-v[2]))}if(Ii(this.state,b[0],b[1],0,this._transform)>=kt)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,m){return(!m||m.validate!==!1)&&Ge(this,o.call(co,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n._})))}}class zi extends n.E{constructor(o,c,m,v){super(),this.scope=m,this._options=o,this.properties=new n.a8(c),this._transitionable=new n.$(c,m,new Map(v)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,c){this._options=o,this._transitionable.setTransitionOrValue(o.properties,c)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let pr,nr;class Vi{constructor(o,c,m,v){this.screenBounds=o,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(o,c){let m,v;if(o instanceof n.P||typeof o[0]=="number"){const b=n.P.convert(o);m=[b],v=c.isPointAboveHorizon(b)}else{const b=n.P.convert(o[0]),S=n.P.convert(o[1]);m=[b,S],v=n.ae(b,S).every(D=>c.isPointAboveHorizon(D))}return new Vi(m,c.getCameraPoint(),v,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return n.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const c=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],v=n.ae(c,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<m.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?v[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(v[3]=this.cameraPoint)),n.af(v,o)}bufferedCameraGeometryGlobe(o){const c=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],v=n.ae(c,m,o),b=this.cameraPoint.clone();switch(3*((b.y>c.y)+(b.y>m.y))+((b.x>c.x)+(b.x>m.x))){case 0:v[0]=b,v[4]=b.clone();break;case 1:v.splice(1,0,b);break;case 2:v[1]=b;break;case 3:v.splice(4,0,b);break;case 5:v.splice(2,0,b);break;case 6:v[3]=b;break;case 7:v.splice(3,0,b);break;case 8:v[2]=b}return v}containsTile(o,c,m,v=0){const b=o.queryPadding/c._pixelsPerMercatorPixel+1,S=m?this._bufferedCameraMercator(b,c):this._bufferedScreenMercator(b,c);let D=o.tileID.wrap+(S.unwrapped?v:0);const R=S.polygon.map(ne=>n.ag(o.tileTransform,ne,D));if(!n.ah(R,0,0,n.ab,n.ab))return;D=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const F=this.screenGeometryMercator.polygon.map(ne=>n.ai(o.tileTransform,ne,D)),O=F.map(ne=>new n.P(ne[0],ne[1])),j=c.getFreeCameraOptions().position||new n.a5(0,0,0),q=n.ai(o.tileTransform,j,D),W=F.map(ne=>{const re=n.a6.vec3.sub(ne,ne,q);return n.a6.vec3.normalize(re,re),new n.aj(q,re)}),te=n.ak(o,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:O,tilespaceRays:W,bufferedTilespaceGeometry:R,bufferedTilespaceBounds:(ee=n.al(R),ee.min.x=n.ap(ee.min.x,0,n.ab),ee.min.y=n.ap(ee.min.y,0,n.ab),ee.max.x=n.ap(ee.max.x,0,n.ab),ee.max.y=n.ap(ee.max.y,0,n.ab),ee),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:te};var ee}_bufferedScreenMercator(o,c){const m=bn(o);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{let v;return v=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),c):{polygon:this.bufferedScreenGeometry(o).map(b=>c.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[m]=v,v}}_bufferedCameraMercator(o,c){const m=bn(o);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{let v;return v=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),c):{polygon:this.bufferedCameraGeometry(o).map(b=>c.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[m]=v,v}}_projectAndResample(o,c){const m=function(b,S){const D=n.a6.mat4.multiply([],S.pixelMatrix,S.globeMatrix),R=[0,-n.aq,0,1],F=[0,n.aq,0,1],O=[0,0,0,1];n.a6.vec4.transformMat4(R,R,D),n.a6.vec4.transformMat4(F,F,D),n.a6.vec4.transformMat4(O,O,D);const j=new n.P(R[0]/R[3],R[1]/R[3]),q=new n.P(F[0]/F[3],F[1]/F[3]),W=n.an(b,j)&&R[3]<O[3],te=n.an(b,q)&&F[3]<O[3];if(!W&&!te)return null;const ee=function(we,Ee,ke){for(let $e=1;$e<we.length;$e++){const Oe=Fr(Ee.pointCoordinate3D(we[$e-1]).x),Re=Fr(Ee.pointCoordinate3D(we[$e]).x);if(ke<0){if(Oe<Re)return{idx:$e,t:-Oe/(Re-1-Oe)}}else if(Re<Oe)return{idx:$e,t:(1-Oe)/(Re+1-Oe)}}return null}(b,S,W?-1:1);if(!ee)return null;const{idx:ne,t:re}=ee;let ue=ne>1?yr(b.slice(0,ne),S):[],ye=ne<b.length?yr(b.slice(ne),S):[];ue=ue.map(we=>new n.P(Fr(we.x),we.y)),ye=ye.map(we=>new n.P(Fr(we.x),we.y));const ve=[...ue];ve.length===0&&ve.push(ye[ye.length-1]);const be=n.aa(ve[ve.length-1].y,(ye.length===0?ue[0]:ye[0]).y,re);let Me;return Me=W?[new n.P(0,be),new n.P(0,0),new n.P(1,0),new n.P(1,be)]:[new n.P(1,be),new n.P(1,1),new n.P(0,1),new n.P(0,be)],ve.push(...Me),ye.length===0?ve.push(ue[0]):ve.push(...ye),{polygon:ve.map(we=>new n.a5(we.x,we.y)),unwrapped:!1}}(o,c);if(m)return m;const v=function(b,S){let D=!1,R=-1/0,F=0;for(let j=0;j<b.length-1;j++)b[j].x>R&&(R=b[j].x,F=j);for(let j=0;j<b.length-1;j++){const q=(F+j)%(b.length-1),W=b[q],te=b[q+1];Math.abs(W.x-te.x)>.5&&(W.x<te.x?(W.x+=1,q===0&&(b[b.length-1].x+=1)):(te.x+=1,q+1===b.length-1&&(b[0].x+=1)),D=!0)}const O=n.am(S.center.lng);return D&&O<Math.abs(O-1)&&b.forEach(j=>{j.x-=1}),{polygon:b,unwrapped:D}}(yr(o,c).map(b=>new n.P(Fr(b.x),b.y)),c);return{polygon:v.polygon.map(b=>new n.a5(b.x,b.y)),unwrapped:v.unwrapped}}}function yr(p,o){return n.ao(p,c=>{const m=o.pointCoordinate3D(c);c.x=m.x,c.y=m.y},1/256)}function Fr(p){return p<0?1+p%1:p%1}function bn(p){return 100*p|0}function Fn(p,o,c,m,v){const b=function(D,R){if(D)return v(D);if(R){if(p.url&&R.tiles&&p.tiles&&delete p.tiles,R.variants){if(!Array.isArray(R.variants))return v(new Error("variants must be an array"));for(const O of R.variants){if(O==null||typeof O!="object"||O.constructor!==Object)return v(new Error("variant must be an object"));if(!Array.isArray(O.capabilities))return v(new Error("capabilities must be an array"));if(O.capabilities.length===1&&O.capabilities[0]==="meshopt"){R=n.l(R,O);break}}}const F=n.ar(n.l({},R,p),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);F.tiles=o.canonicalizeTileset(F,p.url),v(null,F)}},S=function(D,R,F){if(!D)return null;if(!R&&!F)return D;F=F||D.worldview_default;const O=Object.values(D.language||{});if(O.length===0)return null;const j=Object.values(D.worldview||{});if(j.length===0)return null;const q=O.every(te=>te===R),W=j.every(te=>te===F);return q&&W?D:R in(D.language_options||{})||F in(D.worldview_options||{})?null:D.language_options&&D.worldview_options?D:null}(p.data,c,m);return S?n.q.frame(()=>b(null,S)):p.url?n.n(o.transformRequest(o.normalizeSourceURL(p.url,null,c,m),n.R.Source),b):n.q.frame(()=>{const{data:D,...R}=p;b(null,R)})}class _n{constructor(o,c,m){this.bounds=n.as.convert(this.validateBounds(o)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const c=Math.pow(2,o.z),m=Math.floor(n.am(this.bounds.getWest())*c),v=Math.floor(n.at(this.bounds.getNorth())*c),b=Math.ceil(n.am(this.bounds.getEast())*c),S=Math.ceil(n.at(this.bounds.getSouth())*c);return o.x>=m&&o.x<b&&o.y>=v&&o.y<S}}class Ir extends n.E{constructor(o,c,m,v){if(super(),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.ar(c,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},c),this._collectResourceTiming=!!c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new n.au}load(o){this._loaded=!1,this.fire(new n.x("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,m=this.map.getWorldview();this._tileJSONRequest=Fn(this._options,this.map._requestManager,c,m,(v,b)=>{if(this._tileJSONRequest=null,this._loaded=!0,v)this.fire(new n.t(v));else if(b){if(n.l(this,b),this.hasWorldviews=!!b.worldview_options,b.worldview_default&&(this.worldviewDefault=b.worldview_default),b.vector_layers){this.vectorLayers=b.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const S of b.vector_layers)this.vectorLayerIds.push(S.id),b.worldview&&b.worldview[S.source]&&this.localizableLayerIds.add(S.id)}b.bounds&&(this.tileBounds=new _n(b.bounds,this.minzoom,this.maxzoom)),Qt(b.tiles,this.map._requestManager._customAccessToken),this.fire(new n.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.x("data",{dataType:"source",sourceDataType:"content"}))}o&&o(v)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(o,c){const m=o.tileID.canonical.url(this.tiles,this.scheme),v=this.map._requestManager.normalizeTileURL(m),b=this.map._requestManager.transformRequest(v,n.R.Tile),S=this.map.style?this.map.style.getLut(this.scope):null,D=S?{image:S.image.clone()}:null,R={request:b,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:D,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(m)&&(R.worldview=this.map.getWorldview()||this.worldviewDefault,R.localizableLayerIds=this.localizableLayerIds),R.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",R,F.bind(this));else if(o.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",R,F.bind(this),void 0,!0);else{const O=n.aw.call({deduped:this._deduped},R,(j,q)=>{j||!q?F.call(this,j):(R.data={cacheControl:q.cacheControl,expires:q.expires,rawData:q.rawData.slice(0)},o.actor&&o.actor.send("loadTile",R,F.bind(this),void 0,!0))},!0);o.request={cancel:O}}function F(O,j){return delete o.request,o.aborted?c(null):O&&O.status!==404?c(O):(j&&j.resourceTiming&&(o.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&o.setExpiryData(j),o.loadVectorData(j,this.map.painter),n.ax(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ca extends n.E{constructor(o,c,m,v){super(),this.id=o,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},c),n.l(this,n.ar(c,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new n.x("dataloading",{dataType:"source"})),this._tileJSONRequest=Fn(this._options,this.map._requestManager,null,null,(c,m)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new n.t(c)):m&&(n.l(this,m),m.raster_layers&&(this.rasterLayers=m.raster_layers,this.rasterLayerIds=this.rasterLayers.map(v=>v.id)),m.bounds&&(this.tileBounds=new _n(m.bounds,this.minzoom,this.maxzoom)),Qt(m.tiles),this.fire(new n.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.x("data",{dataType:"source",sourceDataType:"content"}))),o&&o(c)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,c){const m=n.q.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);o.request=n.o(this.map._requestManager.transformRequest(v,n.R.Tile),(b,S,D,R)=>(delete o.request,o.aborted?(o.state="unloaded",c(null)):b?(o.state="errored",c(b)):S?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:D,expires:R}),o.setTexture(S,this.map.painter),o.state="loaded",n.ax(this.dispatcher),void c(null)):c(null)))}abortTile(o,c){o.request&&(o.request.cancel(),delete o.request),c&&c()}unloadTile(o,c){o.texture&&o.texture instanceof n.T?(o.destroy(!0),o.texture&&o.texture instanceof n.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),c&&c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ss extends ca{constructor(o,c,m,v){super(o,c,m,v),this.type="raster-array",this.maxzoom=22,this._options=n.l({type:"raster-array"},c)}triggerRepaint(o){const c=this.map.painter._terrain,m=this.map.style.getSourceCache(this.id);c&&c.enabled&&m&&c._clearRenderCacheForTile(m.id,o.tileID),this.map.triggerRepaint()}loadTile(o,c){const m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),v=this.map._requestManager.transformRequest(m,n.R.Tile);o.requestParams=v,o.actor||(o.actor=this.dispatcher.getActor()),o.request=o.fetchHeader(void 0,(b,S,D,R)=>{if(delete o.request,o.aborted)return o.state="unloaded",c(null);if(b)return b.code===20?void 0:(o.state="errored",c(b));this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:D,expires:R}),o.state="empty",c(null)})}unloadTile(o,c){const m=o.texture;m&&m instanceof n.T?(o.destroy(!0),this.map.painter.saveTileTexture(m)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,c,m){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(c,m,(v,b)=>{if(v)return o.state="errored",this.fire(new n.t(v)),void this.triggerRepaint(o);b&&(o.setTexture(b,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const c=this.rasterLayers.find(({id:b})=>b===o),m=c&&c.fields,v=m&&m.bands&&m.bands;return v?v[0]:0}getTextureDescriptor(o,c,m){if(!o)return;const v=c.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!v)return;let b=null;c instanceof n.aB?b=c.paint.get("raster-array-band"):c instanceof n.aC&&(b=c.paint.get("raster-particle-array-band"));const S=b||this.getInitialBand(v);if(S!=null)if(o.textureDescriptor){if(!o.updateNeeded(v,S)||m)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,v,S)}}const Ms={vector:Ir,raster:ca,"raster-dem":class extends ca{constructor(p,o,c,m){super(p,o,c,m),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(p,o){const c=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(v,b){v&&(p.state="errored",o(v)),b&&(p.dem=b,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",o(null))}p.request=n.o(this.map._requestManager.transformRequest(c,n.R.Tile),function(v,b,S,D){if(delete p.request,p.aborted)p.state="unloaded",o(null);else if(v)p.state="errored",o(v);else if(b){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:S,expires:D});const R=ImageBitmap&&b instanceof ImageBitmap&&n.ay(),F=1-(b.width-n.az(b.width))/2;F<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const O=R?b:n.q.getImageData(b,F),j={uid:p.uid,coord:p.tileID,source:this.id,scope:this.scope,rawImageData:O,encoding:this.encoding,padding:F};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",j,m.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(p){const o=p.canonical,c=Math.pow(2,o.z),m=(o.x-1+c)%c,v=o.x===0?p.wrap-1:p.wrap,b=(o.x+1+c)%c,S=o.x+1===c?p.wrap+1:p.wrap,D={};return D[new n.aA(p.overscaledZ,v,o.z,m,o.y).key]={backfilled:!1},D[new n.aA(p.overscaledZ,S,o.z,b,o.y).key]={backfilled:!1},o.y>0&&(D[new n.aA(p.overscaledZ,v,o.z,m,o.y-1).key]={backfilled:!1},D[new n.aA(p.overscaledZ,p.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},D[new n.aA(p.overscaledZ,S,o.z,b,o.y-1).key]={backfilled:!1}),o.y+1<c&&(D[new n.aA(p.overscaledZ,v,o.z,m,o.y+1).key]={backfilled:!1},D[new n.aA(p.overscaledZ,p.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},D[new n.aA(p.overscaledZ,S,o.z,b,o.y+1).key]={backfilled:!1}),D}},"raster-array":Ss,geojson:class extends n.E{constructor(p,o,c,m){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(m),this._data=o.data,this._options=n.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const v=n.ab/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*v,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*v,extent:n.ab,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:n.ab,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*v,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}updateData(p){if(!this._options.dynamic)return this.fire(new n.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof p!="string"&&(p.type==="Feature"&&(p={type:"FeatureCollection",features:[p]}),p.type!=="FeatureCollection"))return this.fire(new n.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof p!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const c of this._data.features)o.set(c.id,c);for(const c of p.features)o.set(c.id,c);this._data.features=[...o.values()]}else this._data=p;return this._updateWorkerData(!0),this}getClusterExpansionZoom(p,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id,scope:this.scope},o),this}getClusterChildren(p,o){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id,scope:this.scope},o),this}getClusterLeaves(p,o,c,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:p,limit:o,offset:c},m),this}_updateWorkerData(p=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.x("dataloading",{dataType:"source"})),this._loaded=!1;const o=n.l({append:p},this.workerOptions);o.scope=this.scope;const c=this._data;typeof c=="string"?(o.request=this.map._requestManager.transformRequest(n.q.resolveURL(c),n.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(m,v)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new n.t(m));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b.resourceTiming=v.resourceTiming[this.id]),p&&(this._partialReload=!0),this.fire(new n.x("data",b)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(p),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,o){const c=p.actor?"reloadTile":"loadTile";p.actor=this.actor;const m=this.map.style?this.map.style.getLut(this.scope):null,v=m?{image:m.image.clone()}:null,b=this._partialReload,S={type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:v,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:b};p.request=this.actor.send(c,S,(D,R)=>b&&!R?(p.state="loaded",o(null)):(delete p.request,p.destroy(),p.aborted?o(null):D?o(D):(p.loadVectorData(R,this.map.painter,c==="reloadTile"),o(null))),void 0,c==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p,o){this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id,scope:this.scope}),p.destroy()}onRemove(p){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aD{constructor(p,o,c,m){super(p,o,c,m),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const o of p.urls)this.urls.push(this.map._requestManager.transformRequest(o,n.R.Source).url);n.aE(this.urls,(o,c)=>{this._loaded=!0,o?this.fire(new n.t(o)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const o=this.video.seekable;p<o.start(0)||p>o.end(0)?this.fire(new n.t(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,o=p.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(p,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aD,model:class extends n.E{constructor(p,o,c,m){super(),this.id=p,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const p=[];for(const o in this._options.models){const c=this._options.models[o],m=n.aG(this.map._requestManager.transformRequest(c.uri,n.R.Model).url).then(v=>{if(!v)return;const b=n.aH(v),S=new n.aI(o,c.position,c.orientation,b);S.computeBoundsAndApplyParent(),this.models.push(S)}).catch(v=>{this.fire(new n.t(new Error(`Could not load model ${o} from ${c.uri}: ${v.message}`)))});p.push(m)}return Promise.allSettled(p).then(()=>{this._loaded=!0,this.fire(new n.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this.fire(new n.t(new Error(`Could not load models: ${o.message}`)))})}onAdd(p){this.map=p,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(p,o){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(p,o,c,m){super(),this.type="batched-model",this.id=p,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=c,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(m)}onAdd(p){this.map=p,this.load()}load(p){this._loaded=!1,this.fire(new n.x("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map.getWorldview();this._tileJSONRequest=Fn(this._options,this.map._requestManager,o,c,(m,v)=>{this._tileJSONRequest=null,this._loaded=!0,m?(c&&c.length,this.fire(new n.t(m))):v&&(n.l(this,v),v.bounds&&(this.tileBounds=new _n(v.bounds,this.minzoom,this.maxzoom)),Qt(v.tiles,this.map._requestManager._customAccessToken),this.fire(new n.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.x("data",{dataType:"source",sourceDataType:"content"}))),p&&p(m)})}hasTransition(){return!1}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}loaded(){return this._loaded}loadTile(p,o){const c=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),m={request:this.map._requestManager.transformRequest(c,n.R.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:p.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,lut:null,maxZoom:null,promoteId:null,pixelRatio:null,scaleFactor:null};if(p.actor&&p.state!=="expired")if(p.state==="loading")p.reloadCallback=o;else{if(p.buckets){const b=Object.values(p.buckets);for(const S of b)S.dirty=!0;return void(p.state="loaded")}p.request=p.actor.send("reloadTile",m,v.bind(this))}else p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",m,v.bind(this),void 0,!0);function v(b,S){return p.aborted?o(null):b&&b.status!==404?o(b):(this.map._refreshExpiredTiles&&S&&p.setExpiryData(S),p.loadModelData(S,this.map.painter),p.state="loaded",void o(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aD{constructor(p,o,c,m){super(p,o,c,m),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new n.t(new n.V(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.t(new n.V(`sources.${p}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new n.t(new n.V(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new n.t(new n.V(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.t(new n.V(`sources.${p}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(p){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!p&&!this._playing||this.texture instanceof n.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends n.E{constructor(p,o,c,m){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=o,this.setEventedParent(m),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new _n(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.ar(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this.map=p,this._loaded=!1,this.fire(new n.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:o,y:c,z:m}=p.canonical;return this._implementation.hasTile({x:o,y:c,z:m})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,o){const{x:c,y:m,z:v}=p.tileID.canonical,b=new AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:c,y:m,z:v},{signal:b.signal})).then(function(S){return delete p.request,p.aborted?(p.state="unloaded",o(null)):S===void 0?(p.state="errored",o(null)):S===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",o(null)):function(D){return D instanceof ImageData||D instanceof HTMLCanvasElement||D instanceof ImageBitmap||D instanceof HTMLImageElement}(S)?(this.loadTileData(p,S),p.state="loaded",void o(null)):(p.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(S=>{S.code!==20&&(p.state="errored",o(S))}),p.request.cancel=()=>b.abort()}loadTileData(p,o){p.setTexture(o,this.map.painter)}unloadTile(p,o){if(p.texture&&p.texture instanceof n.T?(p.destroy(!0),p.texture&&p.texture instanceof n.T&&this.map.painter.saveTileTexture(p.texture)):p.destroy(),this._implementation.unloadTile){const{x:c,y:m,z:v}=p.tileID.canonical;this._implementation.unloadTile({x:c,y:m,z:v})}o&&o()}abortTile(p,o){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){const p=n.av(this.id,this.scope);this.map.style.clearSource(p)}_update(){this.fire(new n.x("data",{dataType:"source",sourceDataType:"content"}))}}},Ho=function(p,o,c,m){const v=new Ms[o.type](p,o,c,m);if(v.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${v.id}`);return n.aJ(["load","abort","unload","serialize","prepare"],v),v};function nl(p,o){const c=n.a6.mat4.identity([]);return n.a6.mat4.scale(c,c,[.5*p.width,.5*-p.height,1]),n.a6.mat4.translate(c,c,[1,-1,0]),n.a6.mat4.multiply(c,c,p.calculateProjMatrix(o.toUnwrapped())),Float32Array.from(c)}function ua(p,o,c,m,v,b,S,D,R=!1){const F=p.tilesIn(c,D,R);F.sort(ol);const O=[];for(const q of F)O.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(o,p._state,q,m,v,b,S,nl(p.transform,q.tile.tileID),R)});const j=function(q){const W={},te={};for(const ee of q){const ne=ee.queryResults,re=ee.wrappedTileID,ue=te[re]=te[re]||{};for(const ye in ne){const ve=ne[ye],be=ue[ye]=ue[ye]||{},Me=W[ye]=W[ye]||[];for(const we of ve)be[we.featureIndex]||(be[we.featureIndex]=!0,Me.push(we))}}return W}(O);for(const q in j)j[q].forEach(W=>{const te=W.feature,ee=te.layer;ee&&ee.type!=="background"&&ee.type!=="sky"&&ee.type!=="slot"&&(n.aK(q)||(te.source=ee.source,ee["source-layer"]&&(te.sourceLayer=ee["source-layer"])),te.state=te.id!==void 0?p.getFeatureState(ee["source-layer"],te.id):{})});return j}function ha(p,o){const c=p.getRenderableIds().map(b=>p.getTileByID(b)),m=[],v={};for(let b=0;b<c.length;b++){const S=c[b],D=S.tileID.canonical.key;v[D]||(v[D]=!0,S.querySourceFeatures(m,o))}return m}function ol(p,o){const c=p.tileID,m=o.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function Xl(p,o){const c={};if(!o)return c;for(const m of p){const v=m.layerIds.map(b=>o.getLayer(b)).filter(Boolean);if(v.length!==0){m.layers=v,m.stateDependentLayerIds&&(m.stateDependentLayers=m.stateDependentLayerIds.map(b=>v.filter(S=>S.id===b)[0]));for(const b of v)c[b.fqid]=m}}return c}const is=32,Es=33,rs=new Uint16Array(8184);for(let p=0;p<2046;p++){let o=p+2,c=0,m=0,v=0,b=0,S=0,D=0;for(1&o?v=b=S=is:c=m=D=is;(o>>=1)>1;){const F=c+v>>1,O=m+b>>1;1&o?(v=c,b=m,c=S,m=D):(c=v,m=b,v=S,b=D),S=F,D=O}const R=4*p;rs[R+0]=c,rs[R+1]=m,rs[R+2]=v,rs[R+3]=b}const uo=new Uint16Array(2178),Ts=new Uint8Array(1089),Yl=new Uint16Array(1089);function Mh(p){return p===0?-.03125:p===32?.03125:0}const Eh={type:2,extent:n.ab,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ab+1,0),new n.P(n.ab+1,n.ab+1),new n.P(0,n.ab+1),new n.P(0,0)]]};class $s{constructor(o,c,m,v,b){this.tileID=o,this.uid=n.aQ(),this.uses=0,this.tileSize=c,this.tileZoom=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=b,v&&v.style&&(this._lastUpdatedBrightness=v.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(o){const c=o+this.timeAdded;c<n.q.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aL(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,c,m){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=Xl(o.buckets,c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const b=this.buckets[v];if(b instanceof n.aS){if(this.hasSymbolBuckets=!0,!m)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const b=this.buckets[v];if(b instanceof n.aS&&b.hasRTLText){this.hasRTLText=!0,n.aT();break}}this.queryPadding=0;for(const v in this.buckets){const b=this.buckets[v],S=c.style.getOwnLayer(v);if(!S)continue;const D=S.queryRadius(b);this.queryPadding=Math.max(this.queryPadding,D)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new n.aR}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,c,m){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets={...this.buckets,...Xl(o.buckets,c.style)},o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const v in this.buckets){const b=this.buckets[v];b.uploadPending()&&b.upload(o)}const c=o.gl,m=this.imageAtlas;if(m&&!m.uploaded){const v=!!Object.keys(m.patternPositions).length;this.imageAtlasTexture=new n.T(o,m.image,c.RGBA8,{useMipmap:v}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(o,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(o,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(o,c,m){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,m),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const v=c.style.getBrightness();(this._lastUpdatedBrightness||v)&&(this._lastUpdatedBrightness&&v&&Math.abs(this._lastUpdatedBrightness-v)<.001||(this._lastUpdatedBrightness=v,this.updateBuckets(c)))}queryRenderedFeatures(o,c,m,v,b,S,D,R,F){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:m,pixelPosMatrix:R,transform:D,filter:v,layers:b,availableImages:S,tileTransform:this.tileTransform},o,c):{}}querySourceFeatures(o,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),b=c?c.sourceLayer:"",S=v._geojsonTileLayer||v[b];if(!S)return;const D=n.aU(c&&c.filter),{z:R,x:F,y:O}=this.tileID.canonical,j={z:R,x:F,y:O};for(let q=0;q<S.length;q++){const W=S.feature(q);if(D.needGeometry){const ne=n.aV(W,!0);if(!D.filter(new n.a3(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!D.filter(new n.a3(this.tileID.overscaledZ),W))continue;const te=m.getId(W,b),ee=new n.aW(W,R,F,O,te);ee.tile=j,o.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const c=this.expirationTime;if(o.cacheControl){const m=n.aX(o.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const b=this.expirationTime-c;b?this.expirationTime=m+Math.max(b,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o){if(!this.latestFeatureIndex)return;const c=this.latestFeatureIndex.loadVTLayers(),m=o.style.listImages(),v=o.style.getBrightness();for(const b in this.buckets){if(!o.style.hasLayer(b))continue;const S=this.buckets[b],D=S.layers[0],R=D.sourceLayer||"_geojsonTileLayer",F=c[R],O=o.style.getSourceCache(D.source,D.scope);let j={};O&&(j=O._state.getState(R,void 0)),S.update(j,F,m,this.imageAtlas&&this.imageAtlas.patternPositions||{},v),(S instanceof n.aY||S instanceof n.aZ)&&o._terrain&&o._terrain.enabled&&O&&S.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(O.id,this.tileID);const q=o&&o.style&&o.style.getOwnLayer(b);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.q.now()+o}setTexture(o,c){const m=c.context,v=m.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o):(this.texture=new n.T(m,o,v.RGBA8,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(o,c){const m={};for(const v of c)m[v]=!0;this.dependencies[o]=m}hasDependency(o,c){for(const m of o){const v=this.dependencies[m];if(v){for(const b of c)if(v[b])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const m=n.a_(Eh,this.tileID.canonical,this.tileTransform)[0],v=new n.a$,b=new n.b0;for(let S=0;S<m.length;S++){const{x:D,y:R}=m[S];v.emplaceBack(D,R),b.emplaceBack(S)}b.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(b),this._tileDebugBuffer=o.createVertexBuffer(v,n.b1.members),this._tileDebugSegments=n.b2.simpleSegment(0,0,v.length,b.length)}_makeTileBoundsBuffers(o,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const m=n.a_(Eh,this.tileID.canonical,this.tileTransform)[0];let v,b;if(this.isRaster){const S=function(D,R){const F=n.aL(D,R),O=Math.pow(2,D.z);for(let ne=0;ne<Es;ne++)for(let re=0;re<Es;re++){const ue=n.aM((D.x+(re+Mh(re))/is)/O),ye=n.aN((D.y+(ne+Mh(ne))/is)/O),ve=R.project(ue,ye),be=ne*Es+re;uo[2*be+0]=Math.round((ve.x*F.scale-F.x)*n.ab),uo[2*be+1]=Math.round((ve.y*F.scale-F.y)*n.ab)}Ts.fill(0),Yl.fill(0);for(let ne=2045;ne>=0;ne--){const re=4*ne,ue=rs[re+0],ye=rs[re+1],ve=rs[re+2],be=rs[re+3],Me=ue+ve>>1,we=ye+be>>1,Ee=Me+we-ye,ke=we+ue-Me,$e=ye*Es+ue,Oe=be*Es+ve,Re=we*Es+Me,st=Math.hypot((uo[2*$e+0]+uo[2*Oe+0])/2-uo[2*Re+0],(uo[2*$e+1]+uo[2*Oe+1])/2-uo[2*Re+1])>=16;Ts[Re]=Ts[Re]||(st?1:0),ne<1022&&(Ts[Re]=Ts[Re]||Ts[(ye+ke>>1)*Es+(ue+Ee>>1)]||Ts[(be+ke>>1)*Es+(ve+Ee>>1)])}const j=new n.aO,q=new n.aP;let W=0;function te(ne,re){const ue=re*Es+ne;return Yl[ue]===0&&(j.emplaceBack(uo[2*ue+0],uo[2*ue+1],ne*n.ab/is,re*n.ab/is),Yl[ue]=++W),Yl[ue]-1}function ee(ne,re,ue,ye,ve,be){const Me=ne+ue>>1,we=re+ye>>1;if(Math.abs(ne-ve)+Math.abs(re-be)>1&&Ts[we*Es+Me])ee(ve,be,ne,re,Me,we),ee(ue,ye,ve,be,Me,we);else{const Ee=te(ne,re),ke=te(ue,ye),$e=te(ve,be);q.emplaceBack(Ee,ke,$e)}}return ee(0,0,is,is,is,0),ee(is,is,0,0,0,is),{vertices:j,indices:q}}(this.tileID.canonical,c);v=S.vertices,b=S.indices}else{v=new n.aO,b=new n.aP;for(const{x:D,y:R}of m)v.emplaceBack(D,R,0,0);const S=n.b3(v.int16,void 0,4);for(let D=0;D<S.length;D+=3)b.emplaceBack(S[D],S[D+1],S[D+2])}this._tileBoundsBuffer=o.createVertexBuffer(v,n.b4.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(b),this._tileBoundsSegments=n.b2.simpleSegment(0,0,v.length,b.length)}_makeGlobeTileDebugBuffers(o,c){const m=c.projection;if(!m||m.name!=="globe"||c.freezeTileCoverage)return;const v=this.tileID.canonical,b=n.b5(v,c),S=n.b6(b),D=n.a9(c.zoom);let R;D>0&&(R=n.a6.mat4.invert(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,v,c,S,R,D),this._makeGlobeTileDebugTextBuffer(o,v,c,S,R,D)}_globePoint(o,c,m,v,b,S,D){let R=n.b7(o,c,m);if(S){const F=1<<m.z,O=n.am(v.center.lng),j=n.at(v.center.lat),q=(m.x+.5)/F-O;let W=0;q>.5?W=-1:q<-.5&&(W=1);let te=(o/n.ab+m.x)/F+W,ee=(c/n.ab+m.y)/F;te=(te-O)*v._pixelsPerMercatorPixel+O,ee=(ee-j)*v._pixelsPerMercatorPixel+j;const ne=[te*v.worldSize,ee*v.worldSize,0];n.a6.vec3.transformMat4(ne,ne,S),R=n.b8(R,ne,D)}return n.a6.vec3.transformMat4(R,R,b)}_makeGlobeTileDebugBorderBuffer(o,c,m,v,b,S){const D=new n.a$,R=new n.b0,F=new n.b9,O=(q,W,te,ee,ne)=>{const re=(te-q)/(ne-1),ue=(ee-W)/(ne-1),ye=D.length;for(let ve=0;ve<ne;ve++){const be=q+ve*re,Me=W+ve*ue;D.emplaceBack(be,Me);const we=this._globePoint(be,Me,c,m,v,b,S);F.emplaceBack(we[0],we[1],we[2]),R.emplaceBack(ye+ve)}},j=n.ab;O(0,0,j,0,16),O(j,0,j,j,16),O(j,j,0,j,16),O(0,j,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(R),this._tileDebugBuffer=o.createVertexBuffer(D,n.b1.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(F,n.ba.members),this._tileDebugSegments=n.b2.simpleSegment(0,0,D.length,R.length)}_makeGlobeTileDebugTextBuffer(o,c,m,v,b,S){const D=n.ab/4,R=new n.a$,F=new n.aP,O=new n.b9,j=25;F.reserve(32),R.reserve(j),O.reserve(j);const q=(W,te)=>j*W+te;for(let W=0;W<j;W++){const te=W*D;for(let ee=0;ee<j;ee++){const ne=ee*D;R.emplaceBack(ne,te);const re=this._globePoint(ne,te,c,m,v,b,S);O.emplaceBack(re[0],re[1],re[2])}}for(let W=0;W<4;W++)for(let te=0;te<4;te++){const ee=q(W,te),ne=q(W,te+1),re=q(W+1,te),ue=q(W+1,te+1);F.emplaceBack(ee,ne,re),F.emplaceBack(re,ne,ue)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(F),this._tileDebugTextBuffer=o.createVertexBuffer(R,n.b1.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(O,n.ba.members),this._tileDebugTextSegments=n.b2.simpleSegment(0,0,j,32)}destroy(o=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bb.setPbf(n.bc);class sl extends $s{constructor(o,c,m,v,b){super(o,c,m,v,b),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(o,c){const m=c.context,v=m.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o,{premultiply:!1}):this.texture=new n.T(m,o,v.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,c){const m=this._mrt=new n.bb(30),v=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=n.bd(v,(b,S,D,R)=>{if(b)c(b);else try{const F=m.getHeaderLength(S);if(F>o)return void(this.request=this.fetchHeader(F,c));m.parseHeader(S),this._isHeaderLoaded=!0;let O=0;for(const j of Object.values(m.layers))O=Math.max(O,j.dataIndex[j.dataIndex.length-1].last_byte);S.byteLength>=O&&(this.entireBuffer=S),c(null,this.entireBuffer||S,D,R)}catch(F){c(F)}}),this.request}fetchBand(o,c,m){const v=this._mrt;if(!this._isHeaderLoaded||!v)return void m(new Error("Tile header is not ready"));const b=this.actor;if(!b)return void m(new Error("Can't fetch tile band without an actor"));let S;const D=(j,q)=>{S.complete(j,q),j?m(j):(this.updateTextureDescriptor(o,c),m(null,this.textureDescriptor&&this.textureDescriptor.img))},R=(j,q)=>{if(j)return m(j);const W=b.send("decodeRasterArray",{buffer:q,task:S},D,void 0,!0);this._workQueue.push(()=>{W&&W.cancel(),S.cancel()})},F=v.getLayer(o);if(!F)return void m(new Error(`Unknown sourceLayer "${o}"`));if(F.hasDataForBand(c))return this.updateTextureDescriptor(o,c),void m(null,this.textureDescriptor?this.textureDescriptor.img:null);const O=F.getDataRange([c]);if(S=v.createDecodingTask(O),!S||S.tasks.length)if(this.flushQueues(),this.entireBuffer)R(null,this.entireBuffer.slice(O.firstByte,O.lastByte+1));else{const j=Object.assign({},this.requestParams,{headers:{Range:`bytes=${O.firstByte}-${O.lastByte}`}}),q=n.bd(j,R);this._fetchQueue.push(()=>{q.cancel(),S.cancel()})}else m(null)}updateNeeded(o,c){return(!this.textureDescriptor||this.textureDescriptor.band!==c||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,c){if(!this._mrt)return;const m=this._mrt.getLayer(o);if(!m||!m.hasBand(c)||!m.hasDataForBand(c))return;const{bytes:v,tileSize:b,buffer:S,offset:D,scale:R}=m.getBandView(c),F=b+2*S,O={data:v,width:F,height:F},j=this.texture;j&&j instanceof n.T&&j.update(O,{premultiply:!1}),this.textureDescriptor={layer:o,band:c,img:O,buffer:S,offset:D,tileSize:b,format:m.pixelFormat,mix:[R,256*R,65536*R,16777216*R]}}}class N{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(const o in this.data)for(const c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,m){const v=o.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const b={value:c,timeout:void 0};if(m!==void 0&&(b.timeout=setTimeout(()=>{this.remove(o,b)},m)),this.data[v].push(b),this.order.push(v),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){const c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;const m=o.wrapped().key,v=c===void 0?0:this.data[m].indexOf(c),b=this.data[m][v];return this.data[m].splice(v,1),b.timeout&&clearTimeout(b.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(b.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){const c=[];for(const m in this.data)for(const v of this.data[m])o(v.value)||c.push(v);for(const m of c)this.remove(m.value.tileID,m)}}class K{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,m){const v=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][v]=this.stateChanges[o][v]||{},n.l(this.stateChanges[o][v],m),this.deletedStates[o]===null){this.deletedStates[o]={};for(const b in this.state[o])b!==v&&(this.deletedStates[o][b]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][v]===null){this.deletedStates[o][v]={};for(const b in this.state[o][v])m[b]||(this.deletedStates[o][v][b]=null)}else for(const b in m)this.deletedStates[o]&&this.deletedStates[o][v]&&this.deletedStates[o][v][b]===null&&delete this.deletedStates[o][v][b]}removeFeatureState(o,c,m){if(this.deletedStates[o]===null)return;const v=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},m&&c!==void 0)this.deletedStates[o][v]!==null&&(this.deletedStates[o][v]=this.deletedStates[o][v]||{},this.deletedStates[o][v][m]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][v])for(m in this.deletedStates[o][v]={},this.stateChanges[o][v])this.deletedStates[o][v][m]=null;else this.deletedStates[o][v]=null;else this.deletedStates[o]=null}getState(o,c){const m=this.state[o]||{},v=this.stateChanges[o]||{},b=this.deletedStates[o];if(b===null)return{};if(c!==void 0){const D=String(c),R=n.l({},m[D],v[D]);if(b){const F=b[c];if(F===null)return{};for(const O in F)delete R[O]}return R}const S=n.l({},m,v);if(b)for(const D in b)delete S[D];return S}initializeTileState(o,c){o.refreshFeatureState(c)}coalesceChanges(o,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const b={};for(const S in this.stateChanges[v])this.state[v][S]||(this.state[v][S]={}),n.l(this.state[v][S],this.stateChanges[v][S]),b[S]=this.state[v][S];m[v]=b}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const b={};if(this.deletedStates[v]===null)for(const S in this.state[v])b[S]={},this.state[v][S]={};else for(const S in this.deletedStates[v]){if(this.deletedStates[v][S]===null)this.state[v][S]={};else if(this.state[v][S])for(const D of Object.keys(this.deletedStates[v][S]))delete this.state[v][S][D];b[S]=this.state[v][S]}m[v]=m[v]||{},n.l(m[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in o)o[v].refreshFeatureState(c)}}class _e extends n.E{constructor(o,c,m){super(),this.id=o,this._onlySymbols=m,c.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new K,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,c){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,c)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(o),m.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return n.be(this._tiles).map(o=>o.tileID).sort(qe).map(o=>o.key)}getRenderableIds(o,c){const m=[];for(const v in this._tiles)this._isIdRenderable(+v,o,c)&&m.push(this._tiles[v]);return o?m.sort((v,b)=>{const S=v.tileID,D=b.tileID,R=new n.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),F=new n.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-D.overscaledZ||F.y-R.y||F.x-R.x}).map(v=>v.tileID.key):m.map(v=>v.tileID).sort(qe).map(v=>v.key)}hasRenderableParent(o){const c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c,m){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())&&(m||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,c){const m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,o,c)))}_tileLoaded(o,c,m,v){if(v)if(o.state="errored",v.status!==404)this._source.fire(new n.t(v,{tile:o}));else{if(this._source.fire(new n.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const b=this.map.painter.terrain;this.update(this.transform,b.getScaledDemTileSize(),!0),b.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=n.q.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new n.x("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const b=c[v];if(o.neighboringTiles&&o.neighboringTiles[b]){const S=this.getTileByID(b);m(o,S),m(S,o)}}function m(v,b){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let S=b.tileID.canonical.x-v.tileID.canonical.x;const D=b.tileID.canonical.y-v.tileID.canonical.y,R=Math.pow(2,v.tileID.canonical.z),F=b.tileID.key;S===0&&D===0||Math.abs(D)>1||(Math.abs(S)>1&&(Math.abs(S+R)===1?S+=R:Math.abs(S-R)===1&&(S-=R)),b.dem&&v.dem&&(v.dem.backfillBorder(b.dem,S,D),v.neighboringTiles&&v.neighboringTiles[F]&&(v.neighboringTiles[F].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,m,v){for(const b in this._tiles){let S=this._tiles[b];if(v[b]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>m)continue;let D=S.tileID;for(;S&&S.tileID.overscaledZ>c+1;){const F=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[F.key],S&&S.hasData()&&(D=F)}let R=D;for(;R.overscaledZ>c;)if(R=R.scaledTo(R.overscaledZ-1),o[R.key]){v[D.key]=D;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){const m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=o.overscaledZ-1;m>=c;m--){const v=o.scaledTo(m),b=this._getLoadedTile(v);if(b)return b}}_getLoadedTile(o){const c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,c){c=c||this._source.tileSize;const m=Math.ceil(o.width/c)+1,v=Math.ceil(o.height/c)+1,b=Math.floor(m*v*5),S=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,b):b,D=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(D)}handleWrapJump(o){const c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){const m={};for(const v in this._tiles){const b=this._tiles[v];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),m[b.tileID.key]=b}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(o,c,m,v){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!m)return;this.updateCacheSize(o,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const b=this._source.type==="batched-model";let S,D=this._source.maxzoom;const R=this.map&&this.map.painter?this.map.painter._terrain:null;if(R&&R.sourceCache===this&&R.attenuationRange()){const j=R.attenuationRange()[0],q=Math.floor(j)-Math.log2(R.getDemUpscale());D>q&&(D=q)}if(this.used||this.usedForTerrain){if(this._source.tileID)S=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(j=>new n.aA(j.canonical.z,j.wrap,j.canonical.z,j.canonical.x,j.canonical.y));else if(this.tileCoverLift!==0){const j=o.clone();j.tileCoverLift=this.tileCoverLift,S=j.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:D,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:b}),this._source.minzoom<=1&&o.projection.name==="globe"&&(S.push(new n.aA(1,0,1,0,0)),S.push(new n.aA(1,0,1,1,0)),S.push(new n.aA(1,0,1,0,1)),S.push(new n.aA(1,0,1,1,1)))}else if(S=o.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:D,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:b}),this._source.hasTile){const j=this._source.hasTile.bind(this._source);S=S.filter(q=>j(q))}}else S=[];if(S.length>0&&this.castsShadows&&v&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!nt(this._source.type)){const j=o.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!m}),q=Math.min(j,this._source.maxzoom);if(b){const W=o.extendTileCover(S,q);for(const te of W)S.push(te)}else{const W=o.extendTileCover(S,q,v);for(const te of W)this._shadowCasterTiles[te.key]=!0,S.push(te)}}const F=this._updateRetainedTiles(S);if(nt(this._source.type)&&S.length!==0){const j={},q={},W=Object.keys(F);for(const ee of W){const ne=F[ee],re=this._tiles[ee];if(!re||re.fadeEndTime&&re.fadeEndTime<=n.q.now())continue;const ue=this.findLoadedParent(ne,Math.max(ne.overscaledZ-_e.maxOverzooming,this._source.minzoom));ue&&(this._addTile(ue.tileID),j[ue.tileID.key]=ue.tileID),q[ee]=ne}const te=S[S.length-1].overscaledZ;for(const ee in this._tiles){const ne=this._tiles[ee];if(F[ee]||!ne.hasData())continue;let re=ne.tileID;for(;re.overscaledZ>te;){re=re.scaledTo(re.overscaledZ-1);const ue=this._tiles[re.key];if(ue&&ue.hasData()&&q[re.key]){F[ee]=ne.tileID;break}}}for(const ee in j)F[ee]||(this._coveredTiles[ee]=!0,F[ee]=j[ee])}for(const j in F)this._tiles[j].clearFadeHold();const O=n.bf(this._tiles,F);for(const j of O){const q=this._tiles[j];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(+j)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const c={};if(o.length===0)return c;const m={},v=o.reduce((F,O)=>Math.min(F,O.overscaledZ),1/0),b=o[0].overscaledZ,S=Math.max(b-_e.maxOverzooming,this._source.minzoom),D=Math.max(b+_e.maxUnderzooming,this._source.minzoom),R={};for(const F of o){const O=this._addTile(F);c[F.key]=F,O.hasData()||v<this._source.maxzoom&&(R[F.key]=F)}this._retainLoadedChildren(R,v,D,c);for(const F of o){let O=this._tiles[F.key];if(O.hasData())continue;if(F.canonical.z>=this._source.maxzoom){const q=F.children(this._source.maxzoom)[0],W=this.getTile(q);if(W&&W.hasData()){c[q.key]=q;continue}}else{const q=F.children(this._source.maxzoom);if(c[q[0].key]&&c[q[1].key]&&c[q[2].key]&&c[q[3].key])continue}let j=O.wasRequested();for(let q=F.overscaledZ-1;q>=S;--q){const W=F.scaledTo(q);if(m[W.key]||(m[W.key]=!0,O=this.getTile(W),!O&&j&&(O=this._addTile(W)),O&&(c[W.key]=W,j=O.wasRequested(),O.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const c=[];let m,v=this._tiles[o].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}c.push(v.key);const b=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(b),m)break;v=b}for(const b of c)this._loadedParentTiles[b]=m}}_addTile(o){let c=this._tiles[o.key];if(c)return c.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));const m=!!c;if(!m){const v=this.map?this.map.painter:null,b=this._source.tileSize*o.overscaleFactor();c=this._source.type==="raster-array"?new sl(o,b,this.transform.tileZoom,v,this._isRaster):new $s(o,b,this.transform.tileZoom,v,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))}return c?(c.uses++,this._tiles[o.key]=c,m||this._source.fire(new n.x("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const m=c.getExpiryTimeout();m&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},m))}_removeTile(o){const c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"||c.state==="empty"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,c,m){const v=[],b=this.transform;if(!b)return v;const S=b.projection.name==="globe",D=n.am(b.center.lng);for(const R in this._tiles){const F=this._tiles[R];if(m&&F.clearQueryDebugViz(),F.holdingForFade())continue;let O;if(S){const j=F.tileID.canonical;if(j.z===0){const q=[Math.abs(n.ap(D,...ot(j,-1))-D),Math.abs(n.ap(D,...ot(j,1))-D)];O=[0,2*q.indexOf(Math.min(...q))-1]}else{const q=[Math.abs(n.ap(D,...ot(j,-1))-D),Math.abs(n.ap(D,...ot(j,0))-D),Math.abs(n.ap(D,...ot(j,1))-D)];O=[q.indexOf(Math.min(...q))-1]}}else O=[0];for(const j of O){const q=o.containsTile(F,b,c,j);q&&v.push(q)}}return v}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,c){const m=this.getRenderableIds(o,c).map(b=>this._tiles[b].tileID),v=this.transform.projection.name==="globe";for(const b of m)b.projMatrix=this.transform.calculateProjMatrix(b.toUnwrapped()),b.expandedProjMatrix=v?this.transform.calculateProjMatrix(b.toUnwrapped(),!1,!0):b.projMatrix;return m}sortCoordinatesByDistance(o){const c=o.slice(),m=this.transform._camera.position,v=this.transform._camera.forward(),b={};for(const S of c){const D=1/(1<<S.canonical.z);b[S.key]=((S.canonical.x+.5)*D+S.wrap-m[0])*v[0]+((S.canonical.y+.5)*D-m[1])*v[1]-m[2]*v[2]}return c.sort((S,D)=>b[S.key]-b[D.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(nt(this._source.type))for(const o in this._tiles){const c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(o,c,m){this._state.updateState(o=o||"_geojsonTileLayer",c,m)}removeFeatureState(o,c,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,m)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,m){const v=this._tiles[o];v&&v.setDependencies(c,m)}reloadTilesForDependencies(o,c){for(const m in this._tiles)this._tiles[m].hasDependency(o,c)&&this._reloadTile(+m,"reloading");this._cache.filter(m=>!m.hasDependency(o,c))}_preloadTiles(o,c){if(!this._sourceLoaded){const R=()=>{this._sourceLoaded&&(this._source.off("data",R),this._preloadTiles(o,c))};return void this._source.on("data",R)}const m=new Map,v=Array.isArray(o)?o:[o],b=this.map.painter.terrain,S=this.usedForTerrain&&b?b.getScaledDemTileSize():this._source.tileSize;for(const R of v){const F=R.coveringTiles({tileSize:S,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const O of F)m.set(O.key,O);this.usedForTerrain&&R.updateElevation(!1)}const D=Array.from(m.values());n.bg(D,(R,F)=>{const O=new $s(R,this._source.tileSize*R.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(O,j=>{this._source.type==="raster-dem"&&O.dem&&this._backfillDEM(O),F(j,O)})},c)}}function qe(p,o){const c=Math.abs(2*p.wrap)-+(p.wrap<0),m=Math.abs(2*o.wrap)-+(o.wrap<0);return p.overscaledZ-o.overscaledZ||m-c||o.canonical.y-p.canonical.y||o.canonical.x-p.canonical.x}function nt(p){return p==="raster"||p==="image"||p==="video"||p==="custom"}function ot(p,o){const c=1<<p.z;return[p.x/c+o,(p.x+1)/c+o]}_e.maxOverzooming=10,_e.maxUnderzooming=3;class pt{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,c=!1;for(const m in this.style._mergedLayers){const v=this.style._mergedLayers[m];if(v.type==="fill-extrusion")this.layers.push({layer:v,visible:o,visibilityChanged:c});else if(v.type==="model"){const b=this.style.getLayerSource(v);b&&b.type==="batched-model"&&this.layers.push({layer:v,visible:o,visibilityChanged:c})}}}onNewFrame(o){this.layersGotHidden=!1;for(const c of this.layers){const m=c.layer;let v=!1;m.type==="fill-extrusion"?v=!m.isHidden(o)&&m.paint.get("fill-extrusion-opacity")>0:m.type==="model"&&(v=!m.isHidden(o)&&m.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!v&&c.visible,c.visible=v}}updateZOffset(o,c){this.currentBuildingBuckets=[];for(const v of this.layers){const b=v.layer,S=this.style.getLayerSourceCache(b);let D=1;b.type==="fill-extrusion"&&(D=v.visible?b.paint.get("fill-extrusion-vertical-scale"):0);let R=S?S.getTile(c):null;if(!R&&S&&c.canonical.z>S.getSource().minzoom){let F=c.scaledTo(Math.min(S.getSource().maxzoom,c.overscaledZ-1));for(;F.overscaledZ>=S.getSource().minzoom&&(R=S.getTile(F),!R&&F.overscaledZ!==0);)F=F.scaledTo(F.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:R?R.getBucket(b):null,tileID:R?R.tileID:c,verticalScale:D})}o.hasAnyZOffset=!1;let m=!1;for(let v=0;v<o.symbolInstances.length;v++){const b=o.symbolInstances.get(v),S=b.zOffset,D=this._getHeightAtTileOffset(c,b.tileAnchorX,b.tileAnchorY);b.zOffset=D!==Number.NEGATIVE_INFINITY?D:S,m||S===b.zOffset||(m=!0),o.hasAnyZOffset||b.zOffset===0||(o.hasAnyZOffset=!0)}m&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,c,m,v){let b=c,S=m;if(o.canonical.z!==v.canonical.z){const D=v.canonical,R=1/(1<<o.canonical.z-D.z);b=(c+o.canonical.x*n.ab)*R-D.x*n.ab|0,S=(m+o.canonical.y*n.ab)*R-D.y*n.ab|0}return{tileX:b,tileY:S}}_getHeightAtTileOffset(o,c,m){let v,b;for(let S=0;S<this.layers.length;++S){if(this.layers[S].layer.type!=="fill-extrusion")continue;const{bucket:D,tileID:R,verticalScale:F}=this.currentBuildingBuckets[S];if(!D)continue;const{tileX:O,tileY:j}=this._mapCoordToOverlappingTile(o,c,m,R),q=D.getHeightAtTileCoord(O,j);q&&q.height!==void 0&&(q.hidden?v=q.height:b=Math.max(q.height*F,b||0))}if(b!==void 0)return b;for(let S=0;S<this.layers.length;++S){const D=this.layers[S];if(D.layer.type!=="model"||!D.visible)continue;const{bucket:R,tileID:F}=this.currentBuildingBuckets[S];if(!R)continue;const{tileX:O,tileY:j}=this._mapCoordToOverlappingTile(o,c,m,F),q=R.getHeightAtTileCoord(O,j);if(q&&!q.hidden)return q.height===void 0&&v!==void 0?Math.min(q.maxHeight,v)*q.verticalScale:q.height?q.height*q.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Jt(p,o){const c={};for(const m in p)m!=="ref"&&(c[m]=p[m]);return n.bh.forEach(m=>{m in o&&(c[m]=o[m])}),c}function si(p){p=p.slice();const o=Object.create(null);for(let c=0;c<p.length;c++)o[p[c].id]=p[c];for(let c=0;c<p.length;c++)"ref"in p[c]&&(p[c]=Jt(p[c],o[p[c].ref]));return p}const Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function mi(p,o,c){c.push({command:Ut.addSource,args:[p,o[p]]})}function $t(p,o,c){o.push({command:Ut.removeSource,args:[p]}),c[p]=!0}function Ji(p,o,c,m){$t(p,c,m),mi(p,o,c)}function ai(p,o,c){let m;for(m in p[c])if(p[c].hasOwnProperty(m)&&m!=="data"&&!n.bi(p[c][m],o[c][m]))return!1;for(m in o[c])if(o[c].hasOwnProperty(m)&&m!=="data"&&!n.bi(p[c][m],o[c][m]))return!1;return!0}function Ki(p,o,c,m,v,b){let S;for(S in o=o||{},p=p||{})p.hasOwnProperty(S)&&(n.bi(p[S],o[S])||c.push({command:b,args:[m,S,o[S],v]}));for(S in o)o.hasOwnProperty(S)&&!p.hasOwnProperty(S)&&(n.bi(p[S],o[S])||c.push({command:b,args:[m,S,o[S],v]}))}function hn(p){return p.id}function Ht(p,o){return p[o.id]=o,p}class wi{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.ap(o,0,1);let c=1,m=this._distances[c];const v=o*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const b=c-1,S=this._distances[b],D=m-S,R=D>0?(v-S)/D:0;return this.points[b].mult(1-R).add(this.points[c].mult(R))}}class Nr{constructor(o,c,m){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(c/m);for(let S=0;S<this.xCellCount*this.yCellCount;S++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,m,v,b){this._forEachCell(c,m,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(o,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(o,c,m,v,b,S){this.boxCells[b].push(S)}_insertCircleCell(o,c,m,v,b,S){this.circleCells[b].push(S)}_query(o,c,m,v,b,S){if(m<0||o>this.width||v<0||c>this.height)return!b&&[];const D=[];if(o<=0&&c<=0&&this.width<=m&&this.height<=v){if(b)return!0;for(let R=0;R<this.boxKeys.length;R++)D.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const F=this.circles[3*R],O=this.circles[3*R+1],j=this.circles[3*R+2];D.push({key:this.circleKeys[R],x1:F-j,y1:O-j,x2:F+j,y2:O+j})}return S?D.filter(S):D}return this._forEachCell(o,c,m,v,this._queryCell,D,{hitTest:b,seenUids:{box:{},circle:{}}},S),b?D.length>0:D}_queryCircle(o,c,m,v,b){const S=o-m,D=o+m,R=c-m,F=c+m;if(D<0||S>this.width||F<0||R>this.height)return!v&&[];const O=[];return this._forEachCell(S,R,D,F,this._queryCellCircle,O,{hitTest:v,circle:{x:o,y:c,radius:m},seenUids:{box:{},circle:{}}},b),v?O.length>0:O}query(o,c,m,v,b){return this._query(o,c,m,v,!1,b)}hitTest(o,c,m,v,b){return this._query(o,c,m,v,!0,b)}hitTestCircle(o,c,m,v){return this._queryCircle(o,c,m,!0,v)}_queryCell(o,c,m,v,b,S,D,R){const F=D.seenUids,O=this.boxCells[b];if(O!==null){const q=this.bboxes;for(const W of O)if(!F.box[W]){F.box[W]=!0;const te=4*W;if(o<=q[te+2]&&c<=q[te+3]&&m>=q[te+0]&&v>=q[te+1]&&(!R||R(this.boxKeys[W]))){if(D.hitTest)return S.push(!0),!0;S.push({key:this.boxKeys[W],x1:q[te],y1:q[te+1],x2:q[te+2],y2:q[te+3]})}}}const j=this.circleCells[b];if(j!==null){const q=this.circles;for(const W of j)if(!F.circle[W]){F.circle[W]=!0;const te=3*W;if(this._circleAndRectCollide(q[te],q[te+1],q[te+2],o,c,m,v)&&(!R||R(this.circleKeys[W]))){if(D.hitTest)return S.push(!0),!0;{const ee=q[te],ne=q[te+1],re=q[te+2];S.push({key:this.circleKeys[W],x1:ee-re,y1:ne-re,x2:ee+re,y2:ne+re})}}}}}_queryCellCircle(o,c,m,v,b,S,D,R){const F=D.circle,O=D.seenUids,j=this.boxCells[b];if(j!==null){const W=this.bboxes;for(const te of j)if(!O.box[te]){O.box[te]=!0;const ee=4*te;if(this._circleAndRectCollide(F.x,F.y,F.radius,W[ee+0],W[ee+1],W[ee+2],W[ee+3])&&(!R||R(this.boxKeys[te])))return S.push(!0),!0}}const q=this.circleCells[b];if(q!==null){const W=this.circles;for(const te of q)if(!O.circle[te]){O.circle[te]=!0;const ee=3*te;if(this._circlesCollide(W[ee],W[ee+1],W[ee+2],F.x,F.y,F.radius)&&(!R||R(this.circleKeys[te])))return S.push(!0),!0}}}_forEachCell(o,c,m,v,b,S,D,R){const F=this._convertToXCellCoord(o),O=this._convertToYCellCoord(c),j=this._convertToXCellCoord(m),q=this._convertToYCellCoord(v);for(let W=F;W<=j;W++)for(let te=O;te<=q;te++)if(b.call(this,o,c,m,v,this.xCellCount*te+W,S,D,R))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,m,v,b,S){const D=v-o,R=b-c,F=m+S;return F*F>D*D+R*R}_circleAndRectCollide(o,c,m,v,b,S,D){const R=(S-v)/2,F=Math.abs(o-(v+R));if(F>R+m)return!1;const O=(D-b)/2,j=Math.abs(c-(b+O));if(j>O+m)return!1;if(F<=R||j<=O)return!0;const q=F-R,W=j-O;return q*q+W*W<=m*m}}const tn={unknown:0,flipRequired:1,flipNotRequired:2},Wt=Math.tan(85*Math.PI/180);function Qi(p,o,c,m,v,b,S){const D=n.a6.mat4.create();if(c)if(b.name==="globe"){const R=n.bj(v,o);n.a6.mat4.multiply(D,D,R)}else{const R=n.a6.mat2.invert([],S);D[0]=R[0],D[1]=R[1],D[4]=R[2],D[5]=R[3],m||n.a6.mat4.rotateZ(D,D,v.angle)}else n.a6.mat4.multiply(D,v.labelPlaneMatrix,p);return D}function rr(p,o,c,m,v,b,S){const D=Qi(p,o,c,m,v,b,S);return b.name==="globe"&&c||(D[2]=D[6]=D[10]=D[14]=0),D}function Er(p,o,c,m,v,b,S){if(c){if(b.name==="globe"){const D=Qi(p,o,c,m,v,b,S);return n.a6.mat4.invert(D,D),n.a6.mat4.multiply(D,p,D),D}{const D=n.a6.mat4.clone(p),R=n.a6.mat4.identity([]);return R[0]=S[0],R[1]=S[1],R[4]=S[2],R[5]=S[3],n.a6.mat4.multiply(D,D,R),m||n.a6.mat4.rotateZ(D,D,-v.angle),D}}return v.glCoordMatrix}function ro(p,o,c,m){const v=[p,o,c,1];c?n.a6.vec4.transformMat4(v,v,m):su(v,v,m);const b=v[3];return v[0]/=b,v[1]/=b,v[2]/=b,v}function or(p,o){return Math.min(.5+p/o*.5,1.5)}function ns(p,o){const c=p[0]/p[3],m=p[1]/p[3];return c>=-o[0]&&c<=o[0]&&m>=-o[1]&&m<=o[1]}function al(p,o,c,m,v,b,S,D,R,F){const O=c.transform,j=m?p.textSizeData:p.iconSizeData,q=n.bk(j,c.transform.zoom),W=O.projection.name==="globe",te=[256/c.width*2+1,256/c.height*2+1],ee=m?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ee.clear();let ne=null;W&&(ne=m?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const re=p.lineVertexArray,ue=m?p.text.placedSymbolArray:p.icon.placedSymbolArray,ye=c.transform.width/c.transform.height;let ve,be=!1;for(let Me=0;Me<ue.length;Me++){const we=ue.get(Me),{numGlyphs:Ee,writingMode:ke}=we;if(ke!==n.bl.vertical||be||ve===n.bl.horizontal||(be=!0),ve=ke,(we.hidden||ke===n.bl.vertical)&&!be){js(Ee,ee);continue}be=!1;const $e=new n.P(we.tileAnchorX,we.tileAnchorY);let{x:Oe,y:Re,z:st}=O.projection.projectTilePoint($e.x,$e.y,F.canonical);if(R){const[wt,Gt,ui]=R($e);Oe+=wt,Re+=Gt,st+=ui}const dt=[Oe,Re,st,1];if(n.a6.vec4.transformMat4(dt,dt,o),!ns(dt,te)){js(Ee,ee);continue}const Et=dt[3],Lt=or(c.transform.getCameraToCenterDistance(O.projection),Et),jt=n.bm(j,q,we),Xe=S?jt/Lt:jt*Lt,St=ro(Oe,Re,st,v);if(St[3]<=0){js(Ee,ee);continue}let ct={};const Mt=S?null:R,Tt=on(we,Xe,!1,D,o,v,b,p.glyphOffsetArray,re,ee,ne,St,$e,ct,ye,Mt,O.projection,F,S);be=Tt.useVertical,Mt&&Tt.needsFlipping&&(ct={}),(Tt.notEnoughRoom||be||Tt.needsFlipping&&on(we,Xe,!0,D,o,v,b,p.glyphOffsetArray,re,ee,ne,St,$e,ct,ye,Mt,O.projection,F,S).notEnoughRoom)&&js(Ee,ee)}m?(p.text.dynamicLayoutVertexBuffer.updateData(ee),ne&&p.text.globeExtVertexBuffer&&p.text.globeExtVertexBuffer.updateData(ne)):(p.icon.dynamicLayoutVertexBuffer.updateData(ee),ne&&p.icon.globeExtVertexBuffer&&p.icon.globeExtVertexBuffer.updateData(ne))}function ll(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee){const{lineStartIndex:ne,glyphStartIndex:re,segment:ue}=D,ye=re+D.numGlyphs,ve=ne+D.lineLength,be=o.getoffsetX(re),Me=o.getoffsetX(ye-1),we=Jl(p*be,c,m,v,b,S,ue,ne,ve,R,F,O,j,q,!0,W,te,ee);if(!we)return null;const Ee=Jl(p*Me,c,m,v,b,S,ue,ne,ve,R,F,O,j,q,!0,W,te,ee);return Ee?{first:we,last:Ee}:null}function ho(p,o,c,m){return p===n.bl.horizontal&&Math.abs(m)>Math.abs(c)?{useVertical:!0}:p===n.bl.vertical?m>0?{needsFlipping:!0}:null:o!==tn.unknown&&function(v,b){return v===0||Math.abs(b/v)>Wt}(c,m)?o===tn.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function on(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne,re,ue){const ye=o/24,ve=p.lineOffsetX*ye,be=p.lineOffsetY*ye,{lineStartIndex:Me,glyphStartIndex:we,numGlyphs:Ee,segment:ke,writingMode:$e,flipState:Oe}=p,Re=Me+p.lineLength,st=dt=>{if(O){const[Xe,St,ct]=dt.up,Mt=F.length;n.bn(O,Mt+0,Xe,St,ct),n.bn(O,Mt+1,Xe,St,ct),n.bn(O,Mt+2,Xe,St,ct),n.bn(O,Mt+3,Xe,St,ct)}const[Et,Lt,jt]=dt.point;n.bo(F,Et,Lt,jt,dt.angle)};if(Ee>1){const dt=ll(ye,D,ve,be,c,j,q,p,R,b,W,ee,!1,ne,re,ue);if(!dt)return{notEnoughRoom:!0};if(m&&!c){let[Et,Lt,jt]=dt.first.point,[Xe,St,ct]=dt.last.point;[Et,Lt]=ro(Et,Lt,jt,S),[Xe,St]=ro(Xe,St,ct,S);const Mt=ho($e,Oe,(Xe-Et)*te,St-Lt);if(p.flipState=Mt&&Mt.needsFlipping?tn.flipRequired:tn.flipNotRequired,Mt)return Mt}st(dt.first);for(let Et=we+1;Et<we+Ee-1;Et++){const Lt=Jl(ye*D.getoffsetX(Et),ve,be,c,j,q,ke,Me,Re,R,b,W,ee,!1,!1,ne,re,ue);if(!Lt)return F.length-=4*(Et-we),{notEnoughRoom:!0};st(Lt)}st(dt.last)}else{if(m&&!c){const Et=ro(q.x,q.y,0,v),Lt=Me+ke+1,jt=new n.P(R.getx(Lt),R.gety(Lt)),Xe=ro(jt.x,jt.y,0,v),St=Xe[3]>0?Xe:cl(q,jt,Et,1,v,void 0,ne,re.canonical),ct=ho($e,Oe,(St[0]-Et[0])*te,St[1]-Et[1]);if(p.flipState=ct&&ct.needsFlipping?tn.flipRequired:tn.flipNotRequired,ct)return ct}const dt=Jl(ye*D.getoffsetX(we),ve,be,c,j,q,ke,Me,Re,R,b,W,ee,!1,!1,ne,re,ue);if(!dt)return{notEnoughRoom:!0};st(dt)}return{}}function Th(p,o,c,m,v){const{x:b,y:S,z:D}=m.projectTilePoint(p.x,p.y,o);if(!v)return ro(b,S,D,c);const[R,F,O]=v(p);return ro(b+R,S+F,D+O,c)}function cl(p,o,c,m,v,b,S,D){const R=Th(p.sub(o)._unit()._add(p),D,v,S,b);return n.a6.vec3.sub(R,c,R),n.a6.vec3.normalize(R,R),n.a6.vec3.scaleAndAdd(R,c,R,m)}function Jl(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne,re){const ue=m?p-o:p+o;let ye=ue>0?1:-1,ve=0;m&&(ye*=-1,ve=Math.PI),ye<0&&(ve+=Math.PI);let be=D+S+(ye>0?0:1)|0,Me=v,we=v,Ee=0,ke=0;const $e=Math.abs(ue),Oe=[],Re=[];let st=b,dt=st;const Et=()=>cl(dt,st,we,$e-Ee+1,O,q,ee,ne.canonical);for(;Ee+ke<=$e;){if(be+=ye,be<D||be>=R)return null;if(we=Me,dt=st,Oe.push(we),W&&Re.push(dt),st=new n.P(F.getx(be),F.gety(be)),Me=j[be],!Me){const Gt=Th(st,ne.canonical,O,ee,q);Me=Gt[3]>0?j[be]=Gt:Et()}Ee+=ke,ke=n.a6.vec3.distance(we,Me)}te&&q&&(j[be]&&(Me=Et(),ke=n.a6.vec3.distance(we,Me)),j[be]=Me);const Lt=($e-Ee)/ke,jt=st.sub(dt)._mult(Lt)._add(dt),Xe=n.a6.vec3.sub([],Me,we),St=n.a6.vec3.scaleAndAdd([],we,Xe,Lt);let ct=[0,0,1],Mt=Xe[0],Tt=Xe[1];if(re&&(ct=ee.upVector(ne.canonical,jt.x,jt.y),ct[0]!==0||ct[1]!==0||ct[2]!==1)){const Gt=[ct[2],0,-ct[0]],ui=n.a6.vec3.cross([],ct,Gt);n.a6.vec3.normalize(Gt,Gt),n.a6.vec3.normalize(ui,ui),Mt=n.a6.vec3.dot(Xe,Gt),Tt=n.a6.vec3.dot(Xe,ui)}if(c){const Gt=n.a6.vec3.cross([],ct,Xe);n.a6.vec3.normalize(Gt,Gt),n.a6.vec3.scaleAndAdd(St,St,Gt,c*ye)}const wt=ve+Math.atan2(Tt,Mt);return Oe.push(St),W&&Re.push(jt),{point:St,angle:wt,path:Oe,tilePath:Re,up:ct}}function js(p,o){const c=o.length,m=c+4*p;o.resize(m),o.float32.fill(-1/0,4*c,4*m)}function su(p,o,c){const m=o[0],v=o[1];return p[0]=c[0]*m+c[4]*v+c[12],p[1]=c[1]*m+c[5]*v+c[13],p[3]=c[3]*m+c[7]*v+c[15],p}const ko=100;class no{constructor(o,c,m=new Nr(o.width+200,o.height+200,25),v=new Nr(o.width+200,o.height+200,25)){this.transform=o,this.grid=m,this.ignoredGrid=v,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+ko,this.screenBottomBoundary=o.height+ko,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=c}placeCollisionBox(o,c,m,v,b,S,D,R){let F=m.projectedAnchorX,O=m.projectedAnchorY,j=m.projectedAnchorZ;const q=m.elevation,W=m.tileID,te=o.getProjection();if(q&&W){const[Me,we,Ee]=te.upVector(W.canonical,m.tileAnchorX,m.tileAnchorY),ke=te.upVectorScale(W.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;F+=Me*q*ke,O+=we*q*ke,j+=Ee*q*ke}const ee=this.projectAndGetPerspectiveRatio(D,F,O,j,m.tileID,te.name==="globe"||!!q||this.transform.pitch>0,te),ne=S*ee.perspectiveRatio,re=(m.x1*c+v.x-m.padding)*ne+ee.point.x,ue=(m.y1*c+v.y-m.padding)*ne+ee.point.y,ye=(m.x2*c+v.x+m.padding)*ne+ee.point.x,ve=(m.y2*c+v.y+m.padding)*ne+ee.point.y,be=ee.perspectiveRatio<=.55||ee.occluded;return!this.isInsideGrid(re,ue,ye,ve)||!b&&this.grid.hitTest(re,ue,ye,ve,R)||be?{box:[],offscreen:!1,occluded:ee.occluded}:{box:[re,ue,ye,ve],offscreen:this.isOffscreen(re,ue,ye,ve),occluded:!1}}placeCollisionCircles(o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee){const ne=[],re=this.transform.elevation,ue=o.getProjection(),ye=re?re.getAtTileOffsetFunc(ee,this.transform.center.lat,this.transform.worldSize,ue):null,ve=new n.P(m.tileAnchorX,m.tileAnchorY);let{x:be,y:Me,z:we}=ue.projectTilePoint(ve.x,ve.y,ee.canonical);if(ye){const[jt,Xe,St]=ye(ve);be+=jt,Me+=Xe,we+=St}const Ee=ue.name==="globe",ke=this.projectAndGetPerspectiveRatio(D,be,Me,we,ee,Ee||!!re||this.transform.pitch>0,ue),{perspectiveRatio:$e}=ke,Oe=(j?S/$e:S*$e)/n.br,Re=ro(be,Me,we,R),st=ke.signedDistanceFromCamera>0?ll(Oe,b,m.lineOffsetX*Oe,m.lineOffsetY*Oe,!1,Re,ve,m,v,R,{},re&&!j?ye:null,j&&!!re,ue,ee,j):null;let dt=!1,Et=!1,Lt=!0;if(st&&!ke.occluded){const jt=.5*W*$e+te,Xe=new n.P(-100,-100),St=new n.P(this.screenRightBoundary,this.screenBottomBoundary),ct=new wi,{first:Mt,last:Tt}=st,wt=Mt.path.length;let Gt=[];for(let ii=wt-1;ii>=1;ii--)Gt.push(Mt.path[ii]);for(let ii=1;ii<Tt.path.length;ii++)Gt.push(Tt.path[ii]);const ui=2.5*jt;F&&(Gt=Gt.map(([ii,vi,Yt],Mi)=>(ye&&!Ee&&(Yt=ye(Mi<wt-1?Mt.tilePath[wt-1-Mi]:Tt.tilePath[Mi-wt+2])[2]),ro(ii,vi,Yt,F))),Gt.some(ii=>ii[3]<=0)&&(Gt=[]));let _i=[];if(Gt.length>0){let ii=1/0,vi=-1/0,Yt=1/0,Mi=-1/0;for(const Ri of Gt)ii=Math.min(ii,Ri[0]),Yt=Math.min(Yt,Ri[1]),vi=Math.max(vi,Ri[0]),Mi=Math.max(Mi,Ri[1]);vi>=Xe.x&&ii<=St.x&&Mi>=Xe.y&&Yt<=St.y&&(_i=[Gt.map(Ri=>new n.P(Ri[0],Ri[1]))],(ii<Xe.x||vi>St.x||Yt<Xe.y||Mi>St.y)&&(_i=n.bp(_i,Xe.x,Xe.y,St.x,St.y)))}for(const ii of _i){ct.reset(ii,.25*jt);let vi=0;vi=ct.length<=.5*jt?1:Math.ceil(ct.paddedLength/ui)+1;for(let Yt=0;Yt<vi;Yt++){const Mi=Yt/Math.max(vi-1,1),Ri=ct.lerp(Mi),tr=Ri.x+ko,kr=Ri.y+ko;ne.push(tr,kr,jt,0);const cr=tr-jt,jr=kr-jt,mr=tr+jt,Rr=kr+jt;if(Lt=Lt&&this.isOffscreen(cr,jr,mr,Rr),Et=Et||this.isInsideGrid(cr,jr,mr,Rr),!c&&this.grid.hitTestCircle(tr,kr,jt,q)&&(dt=!0,!O))return{circles:[],offscreen:!1,collisionDetected:dt,occluded:!1}}}}return{circles:!O&&dt||!Et?[]:ne,offscreen:Lt,collisionDetected:dt,occluded:ke.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let m=1/0,v=1/0,b=-1/0,S=-1/0;for(const O of o){const j=new n.P(O.x+ko,O.y+ko);m=Math.min(m,j.x),v=Math.min(v,j.y),b=Math.max(b,j.x),S=Math.max(S,j.y),c.push(j)}const D=this.grid.query(m,v,b,S).concat(this.ignoredGrid.query(m,v,b,S)),R={},F={};for(const O of D){const j=O.key;if(R[j.bucketInstanceId]===void 0&&(R[j.bucketInstanceId]={}),R[j.bucketInstanceId][j.featureIndex])continue;const q=[new n.P(O.x1,O.y1),new n.P(O.x2,O.y1),new n.P(O.x2,O.y2),new n.P(O.x1,O.y2)];n.bq(c,q)&&(R[j.bucketInstanceId][j.featureIndex]=!0,F[j.bucketInstanceId]===void 0&&(F[j.bucketInstanceId]=[]),F[j.bucketInstanceId].push(j.featureIndex))}return F}insertCollisionBox(o,c,m,v,b){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:b},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,m,v,b){const S=c?this.ignoredGrid:this.grid,D={bucketInstanceId:m,featureIndex:v,collisionGroupID:b};for(let R=0;R<o.length;R+=4)S.insertCircle(D,o[R],o[R+1],o[R+2])}projectAndGetPerspectiveRatio(o,c,m,v,b,S,D){const R=[c,m,v,1];let F=!1;v||this.transform.pitch>0?(n.a6.vec4.transformMat4(R,R,o),this.fogState&&b&&D.name!=="globe"&&(F=function(q,W,te,ee,ne,re){const ue=re.calculateFogTileMatrix(ne),ye=[W,te,ee];return n.a6.vec3.transformMat4(ye,ye,ue),Zt(q,n.a6.vec3.length(ye),re.pitch,re._fov)}(this.fogState,c,m,v,b.toUnwrapped(),this.transform)>.9)):su(R,R,o);const O=R[3];return{point:new n.P((R[0]/O+1)/2*this.transform.width+ko,(-R[1]/O+1)/2*this.transform.height+ko),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(D)/O*.5,1.5),signedDistanceFromCamera:O,occluded:S&&R[2]>O||F}}isOffscreen(o,c,m,v){return m<ko||o>=this.screenRightBoundary||v<ko||c>this.screenBottomBoundary}isInsideGrid(o,c,m,v){return m>=0&&o<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const o=n.a6.mat4.identity([]);return n.a6.mat4.translate(o,o,[-100,-100,0]),o}}function fo(p,o,c){const m=o.createTileMatrix(p,p.worldSize,c.toUnwrapped());return n.a6.mat4.multiply(new Float32Array(16),p.projMatrix,m)}function Hd(p,o,c){if(o.projection.name===c.projection.name)return p.projMatrix;const m=c.clone();return m.setProjection(o.projection),fo(m,o.getProjection(),p)}function Ra(p,o,c){return o.name===c.projection.name?p.projMatrix:fo(c,o,p)}class dn{constructor(o,c,m,v){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class oo{constructor(o,c,m,v,b,S=!1){this.text=new dn(o?o.text:null,c,m,b),this.icon=new dn(o?o.icon:null,c,v,b),this.clipped=S}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class os{constructor(o,c,m,v=!1){this.text=o,this.icon=c,this.skipFade=m,this.clipped=v}}class en{constructor(){this.invProjMatrix=n.a6.mat4.create(),this.viewportMatrix=n.a6.mat4.create(),this.circles=[]}}class au{constructor(o,c,m,v,b){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=b}}class ss{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[o]}}function Kl(p,o,c,m,v){const{horizontalAlign:b,verticalAlign:S}=n.by(p),D=-(b-.5)*o,R=-(S-.5)*c,F=n.bx(p,m);return new n.P(D+F[0]*v,R+F[1]*v)}function La(p,o,c,m,v){const b=new n.P(p,o);return c&&b._rotate(m?v:-v),b}class Us{constructor(o,c,m,v,b,S){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new no(this.transform,b),this.buildingIndex=S,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new ss(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,c,m,v,b=1){const S=m.getBucket(c),D=m.latestFeatureIndex;if(!S||!D||c.fqid!==S.layerIds[0])return;const R=S.layers[0].layout,F=S.layers[0].paint,O=m.collisionBoxArray,j=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),q=m.tileSize/n.ab,W=m.tileID.toUnwrapped();this.transform.setProjection(S.projection);const te=(ee=m.tileID,ne=S.getProjection(),re=this.transform,ne.name===this.projection?re.calculateProjMatrix(ee.toUnwrapped()):fo(re,ne,ee));var ee,ne,re;const ue=R.get("text-pitch-alignment")==="map",ye=R.get("text-rotation-alignment")==="map";c.compileFilter(c.options);const ve=c.dynamicFilter(),be=c.dynamicFilterNeedsFeature(),Me=this.transform.calculatePixelsToTileUnitsMatrix(m),we=rr(te,m.tileID.canonical,ue,ye,this.transform,S.getProjection(),Me);let Ee=null;if(ue){const Et=Er(te,m.tileID.canonical,ue,ye,this.transform,S.getProjection(),Me);Ee=n.a6.mat4.multiply([],this.transform.labelPlaneMatrix,Et)}let ke=null;ve&&m.latestFeatureIndex&&(ke={unwrappedTileID:W,dynamicFilter:ve,dynamicFilterNeedsFeature:be}),this.retainedQueryData[S.bucketInstanceId]=new au(S.bucketInstanceId,D,S.sourceLayerIndex,S.index,m.tileID);const $e=S.layers[0].layout.get("text-size-scale-range"),Oe=n.ap(b,$e[0],$e[1]),Re=S.layers[0].layout.get("icon-size-scale-range"),st=n.ap(b,Re[0],Re[1]),dt={bucket:S,layout:R,paint:F,posMatrix:te,textLabelPlaneMatrix:we,labelToScreenMatrix:Ee,clippingData:ke,scale:j,textPixelRatio:q,holdingForFade:m.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:n.bk(S.textSizeData,this.transform.zoom,Oe),partiallyEvaluatedIconSize:n.bk(S.iconSizeData,this.transform.zoom,st),collisionGroup:this.collisionGroups.get(S.sourceID),latestFeatureIndex:m.latestFeatureIndex};if(v)for(const Et of S.sortKeyRanges){const{sortKey:Lt,symbolInstanceStart:jt,symbolInstanceEnd:Xe}=Et;o.push({sortKey:Lt,symbolInstanceStart:jt,symbolInstanceEnd:Xe,parameters:dt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:dt})}attemptAnchorPlacement(o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne,re,ue){const{textOffset0:ye,textOffset1:ve,crossTileID:be}=q,Me=[ye,ve],we=Kl(o,m,v,Me,b),Ee=this.collisionIndex.placeCollisionBox(te,b,c,La(we.x,we.y,S,D,this.transform.angle),j,R,F,O.predicate);if(ne){const ke=te.getSymbolInstanceIconSize(ue,this.transform.zoom,q.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(te,ke,ne,La(we.x,we.y,S,D,this.transform.angle),j,R,F,O.predicate).box.length===0)return}if(Ee.box.length>0){let ke;return this.prevPlacement&&this.prevPlacement.variableOffsets[be]&&this.prevPlacement.placements[be]&&this.prevPlacement.placements[be].text&&(ke=this.prevPlacement.variableOffsets[be].anchor),this.variableOffsets[be]={textOffset:Me,width:m,height:v,anchor:o,textScale:b,prevAnchor:ke},this.markUsedJustification(te,o,q,ee),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ee,q),this.placedOrientations[be]=ee),{shift:we,placedGlyphBoxes:Ee}}}placeLayerBucketPart(o,c,m,v,b=1){const{bucket:S,layout:D,paint:R,posMatrix:F,textLabelPlaneMatrix:O,labelToScreenMatrix:j,clippingData:q,textPixelRatio:W,holdingForFade:te,collisionBoxArray:ee,partiallyEvaluatedTextSize:ne,partiallyEvaluatedIconSize:re,collisionGroup:ue,latestFeatureIndex:ye}=o.parameters,ve=D.get("text-optional"),be=D.get("icon-optional"),Me=D.get("text-allow-overlap"),we=D.get("icon-allow-overlap"),Ee=D.get("text-rotation-alignment")==="map",ke=D.get("text-pitch-alignment")==="map",$e=D.get("symbol-z-elevate"),Oe=R.get("symbol-z-offset"),Re=D.get("symbol-elevation-reference")==="sea",st=D.get("text-size-scale-range"),dt=D.get("icon-size-scale-range"),Et=n.ap(b,st[0],st[1]),Lt=n.ap(b,dt[0],dt[1]);this.transform.setProjection(S.projection);let jt=Me&&(we||!S.hasIconData()||be),Xe=we&&(Me||!S.hasTextData()||ve);const St=!Oe.isConstant();!S.collisionArrays&&ee&&S.deserializeCollisionBoxes(ee),m&&v&&S.updateCollisionDebugBuffers(this.transform.zoom,ee,Et,Lt);const ct=(Mt,Tt,wt)=>{const{crossTileID:Gt,numVerticalGlyphVertices:ui}=Mt;let _i=null;if(q&&q.dynamicFilterNeedsFeature||St){const ar=this.retainedQueryData[S.bucketInstanceId];_i=ye.loadFeature({featureIndex:Mt.featureIndex,bucketIndex:ar.bucketIndex,sourceLayerIndex:ar.sourceLayerIndex,layoutVertexArrayOffset:0})}if(q&&!(0,q.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},_i,this.retainedQueryData[S.bucketInstanceId].tileID.canonical,new n.P(Mt.tileAnchorX,Mt.tileAnchorY),this.transform.calculateDistanceTileData(q.unwrappedTileID)))return this.placements[Gt]=new os(!1,!1,!1,!0),void c.add(Gt);const ii=Oe.evaluate(_i,{});if(c.has(Gt))return;if(te)return void(this.placements[Gt]=new os(!1,!1,!1));let vi=!1,Yt=!1,Mi=!0,Ri=!1,tr=!1,kr=null,cr={box:null,offscreen:null,occluded:null},jr={box:null,offscreen:null,occluded:null},mr=null,Rr=null,Wi=null,Dr=0,zr=0,xr=0;wt.textFeatureIndex?Dr=wt.textFeatureIndex:Mt.useRuntimeCollisionCircles&&(Dr=Mt.featureIndex),wt.verticalTextFeatureIndex&&(zr=wt.verticalTextFeatureIndex);const Yr=ar=>{ar.tileID=this.retainedQueryData[S.bucketInstanceId].tileID;const ir=this.transform.elevation;ar.elevation=Re?ii:ii+(ir?ir.getAtTileOffset(ar.tileID,ar.tileAnchorX,ar.tileAnchorY):0),ar.elevation+=Mt.zOffset},$n=wt.textBox;if($n){Yr($n);const ar=gr=>{let Lr=n.bl.horizontal;if(S.allowVerticalPlacement&&!gr&&this.prevPlacement){const vn=this.prevPlacement.placedOrientations[Gt];vn&&(this.placedOrientations[Gt]=vn,Lr=vn,this.markUsedOrientation(S,Lr,Mt))}return Lr},ir=(gr,Lr)=>{if(S.allowVerticalPlacement&&ui>0&&wt.verticalTextBox){for(const vn of S.writingModes)if(vn===n.bl.vertical?(cr=Lr(),jr=cr):cr=gr(),cr&&cr.box&&cr.box.length)break}else cr=gr()};if(D.get("text-variable-anchor")){let gr=D.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Gt]){const Jr=this.prevPlacement.variableOffsets[Gt];gr.indexOf(Jr.anchor)>0&&(gr=gr.filter(Qn=>Qn!==Jr.anchor),gr.unshift(Jr.anchor))}const Lr=(Jr,Qn,Ya)=>{const us=S.getSymbolInstanceTextSize(ne,Mt,this.transform.zoom,Tt),hs=(Jr.x2-Jr.x1)*us+2*Jr.padding,Ys=(Jr.y2-Jr.y1)*us+2*Jr.padding,xa=Mt.hasIconTextFit&&!we?Qn:null;xa&&Yr(xa);let ds={box:[],offscreen:!1,occluded:!1};const Al=Me?2*gr.length:gr.length;for(let Js=0;Js<Al;++Js){const Tr=this.attemptAnchorPlacement(gr[Js%gr.length],Jr,hs,Ys,us,Ee,ke,W,F,ue,Js>=gr.length,Mt,Tt,S,Ya,xa,ne,re);if(Tr&&(ds=Tr.placedGlyphBoxes,ds&&ds.box&&ds.box.length)){vi=!0,kr=Tr.shift;break}}return ds};ir(()=>Lr($n,wt.iconBox,n.bl.horizontal),()=>{const Jr=wt.verticalTextBox;return Jr&&Yr(Jr),S.allowVerticalPlacement&&!(cr&&cr.box&&cr.box.length)&&ui>0&&Jr?Lr(Jr,wt.verticalIconBox,n.bl.vertical):{box:null,offscreen:null,occluded:null}}),cr&&(vi=cr.box,Mi=cr.offscreen,Ri=cr.occluded);const vn=ar(!(!cr||!cr.box));if(!vi&&this.prevPlacement){const Jr=this.prevPlacement.variableOffsets[Gt];Jr&&(this.variableOffsets[Gt]=Jr,this.markUsedJustification(S,Jr.anchor,Mt,vn))}}else{const gr=(Lr,vn)=>{const Jr=S.getSymbolInstanceTextSize(ne,Mt,this.transform.zoom,Tt,b),Qn=this.collisionIndex.placeCollisionBox(S,Jr,Lr,new n.P(0,0),Me,W,F,ue.predicate);return Qn&&Qn.box&&Qn.box.length&&(this.markUsedOrientation(S,vn,Mt),this.placedOrientations[Gt]=vn),Qn};ir(()=>gr($n,n.bl.horizontal),()=>{const Lr=wt.verticalTextBox;return S.allowVerticalPlacement&&ui>0&&Lr?(Yr(Lr),gr(Lr,n.bl.vertical)):{box:null,offscreen:null,occluded:null}}),ar(!!(cr&&cr.box&&cr.box.length))}}if(mr=cr,vi=mr&&mr.box&&mr.box.length>0,Mi=mr&&mr.offscreen,Ri=mr&&mr.occluded,Mt.useRuntimeCollisionCircles){const ar=S.text.placedSymbolArray.get(Mt.centerJustifiedTextSymbolIndex>=0?Mt.centerJustifiedTextSymbolIndex:Mt.verticalPlacedTextSymbolIndex),ir=n.bm(S.textSizeData,ne,ar),gr=D.get("text-padding");Rr=this.collisionIndex.placeCollisionCircles(S,Me,ar,S.lineVertexArray,S.glyphOffsetArray,ir,F,O,j,m,ke,ue.predicate,Mt.collisionCircleDiameter*ir/n.br,gr,this.retainedQueryData[S.bucketInstanceId].tileID),vi=Me||Rr.circles.length>0&&!Rr.collisionDetected,Mi=Mi&&Rr.offscreen,Ri=Rr.occluded}if(wt.iconFeatureIndex&&(xr=wt.iconFeatureIndex),wt.iconBox){const ar=ir=>{Yr(ir);const gr=Mt.hasIconTextFit&&kr?La(kr.x,kr.y,Ee,ke,this.transform.angle):new n.P(0,0),Lr=S.getSymbolInstanceIconSize(re,this.transform.zoom,Mt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(S,Lr,ir,gr,we,W,F,ue.predicate)};jr&&jr.box&&jr.box.length&&wt.verticalIconBox?(Wi=ar(wt.verticalIconBox),Yt=Wi.box.length>0):(Wi=ar(wt.iconBox),Yt=Wi.box.length>0),Mi=Mi&&Wi.offscreen,tr=Wi.occluded}const ks=ve||Mt.numHorizontalGlyphVertices===0&&ui===0,Xs=be||Mt.numIconVertices===0;if(ks||Xs?Xs?ks||(Yt=Yt&&vi):vi=Yt&&vi:Yt=vi=Yt&&vi,vi&&mr&&mr.box&&this.collisionIndex.insertCollisionBox(mr.box,D.get("text-ignore-placement"),S.bucketInstanceId,jr&&jr.box&&zr?zr:Dr,ue.ID),Yt&&Wi&&this.collisionIndex.insertCollisionBox(Wi.box,D.get("icon-ignore-placement"),S.bucketInstanceId,xr,ue.ID),Rr&&(vi&&this.collisionIndex.insertCollisionCircles(Rr.circles,D.get("text-ignore-placement"),S.bucketInstanceId,Dr,ue.ID),m)){const ar=S.bucketInstanceId;let ir=this.collisionCircleArrays[ar];ir===void 0&&(ir=this.collisionCircleArrays[ar]=new en);for(let gr=0;gr<Rr.circles.length;gr+=4)ir.circles.push(Rr.circles[gr+0]),ir.circles.push(Rr.circles[gr+1]),ir.circles.push(Rr.circles[gr+2]),ir.circles.push(Rr.collisionDetected?1:0)}const Hn=S.projection.name!=="globe";jt=jt&&(Hn||!Ri),Xe=Xe&&(Hn||!tr),this.placements[Gt]=new os(vi||jt,Yt||Xe,Mi||S.justReloaded),c.add(Gt)};if($e&&this.buildingIndex&&(this.buildingIndex.updateZOffset(S,this.retainedQueryData[S.bucketInstanceId].tileID),S.updateZOffset()),S.sortFeaturesByY){const Mt=S.getSortedSymbolIndexes(this.transform.angle);for(let Tt=Mt.length-1;Tt>=0;--Tt){const wt=Mt[Tt];ct(S.symbolInstances.get(wt),wt,S.collisionArrays[wt])}S.hasAnyZOffset&&n.w(`${S.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(S.hasAnyZOffset){const Mt=S.getSortedIndexesByZOffset();for(let Tt=0;Tt<Mt.length;++Tt){const wt=Mt[Tt];ct(S.symbolInstances.get(wt),wt,S.collisionArrays[wt])}}else for(let Mt=o.symbolInstanceStart;Mt<o.symbolInstanceEnd;Mt++)ct(S.symbolInstances.get(Mt),Mt,S.collisionArrays[Mt]);if(m&&S.bucketInstanceId in this.collisionCircleArrays){const Mt=this.collisionCircleArrays[S.bucketInstanceId];n.a6.mat4.invert(Mt.invProjMatrix,F),Mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(o,c,m,v){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:S,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:R,crossTileID:F}=m,O=n.bw(c),j=v===n.bl.vertical?R:O==="left"?b:O==="center"?S:O==="right"?D:-1;b>=0&&(o.text.placedSymbolArray.get(b).crossTileID=j>=0&&b!==j?0:F),S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=j>=0&&S!==j?0:F),D>=0&&(o.text.placedSymbolArray.get(D).crossTileID=j>=0&&D!==j?0:F),R>=0&&(o.text.placedSymbolArray.get(R).crossTileID=j>=0&&R!==j?0:F)}markUsedOrientation(o,c,m){const v=c===n.bl.horizontal||c===n.bl.horizontalOnly?c:0,b=c===n.bl.vertical?c:0,{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:F}=m,O=o.text.placedSymbolArray;S>=0&&(O.get(S).placedOrientation=v),D>=0&&(O.get(D).placedOrientation=v),R>=0&&(O.get(R).placedOrientation=v),F>=0&&(O.get(F).placedOrientation=b)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(o):1,b=c?c.opacities:{},S=c?c.variableOffsets:{},D=c?c.placedOrientations:{};for(const R in this.placements){const F=this.placements[R],O=b[R];O?(this.opacities[R]=new oo(O,v,F.text,F.icon,null,F.clipped),m=m||F.text!==O.text.placed||F.icon!==O.icon.placed):(this.opacities[R]=new oo(null,v,F.text,F.icon,F.skipFade,F.clipped),m=m||F.text||F.icon)}for(const R in b){const F=b[R];if(!this.opacities[R]){const O=new oo(F,v,!1,!1);O.isHidden()||(this.opacities[R]=O,m=m||F.text.placed||F.icon.placed)}}for(const R in S)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=S[R]);for(const R in D)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=D[R]);m?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c,m,v){const b=new Set;for(const S of c){const D=S.getBucket(o);D&&S.latestFeatureIndex&&o.fqid===D.layerIds[0]&&(this.updateBucketOpacities(D,b,S,S.collisionBoxArray,m,v,S.tileID,o.scope),D.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(D,S.tileID),D.updateZOffset()))}}updateBucketOpacities(o,c,m,v,b,S,D,R){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const F=o.layers[0].layout,O=o.layers[0].paint,j=!!o.layers[0].dynamicFilter(),q=new oo(null,0,!1,!1,!0),W=F.get("text-allow-overlap"),te=F.get("icon-allow-overlap"),ee=F.get("text-variable-anchor"),ne=F.get("text-rotation-alignment")==="map",re=F.get("text-pitch-alignment")==="map",ue=O.get("symbol-z-offset"),ye=F.get("symbol-elevation-reference")==="sea",ve=!ue.isConstant(),be=new oo(null,0,W&&(te||!o.hasIconData()||F.get("icon-optional")),te&&(W||!o.hasTextData()||F.get("text-optional")),!0);!o.collisionArrays&&v&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(v);const Me=(Ee,ke,$e)=>{for(let Oe=0;Oe<ke/4;Oe++)Ee.opacityVertexArray.emplaceBack($e)};let we=0;S&&o.updateReplacement(D,S);for(let Ee=0;Ee<o.symbolInstances.length;Ee++){const ke=o.symbolInstances.get(Ee),{numHorizontalGlyphVertices:$e,numVerticalGlyphVertices:Oe,crossTileID:Re,numIconVertices:st,tileAnchorX:dt,tileAnchorY:Et}=ke;let Lt=null;const jt=this.retainedQueryData[o.bucketInstanceId];ve&&ke&&jt&&(Lt=m.latestFeatureIndex.loadFeature({featureIndex:ke.featureIndex,bucketIndex:jt.bucketIndex,sourceLayerIndex:jt.sourceLayerIndex,layoutVertexArrayOffset:0}));const Xe=ue.evaluate(Lt,{}),St=c.has(Re);let ct=this.opacities[Re];St?ct=q:ct||(ct=be,this.opacities[Re]=ct),c.add(Re);const Mt=$e>0||Oe>0,Tt=st>0,wt=this.placedOrientations[Re],Gt=wt===n.bl.vertical,ui=wt===n.bl.horizontal||wt===n.bl.horizontalOnly;!Mt&&!Tt||ct.isHidden()||we++;let _i=!1;if((Mt||Tt)&&S)for(const ii of o.activeReplacements){if(n.bs(ii,b,n.bt.Symbol,R)||ii.min.x>dt||dt>ii.max.x||ii.min.y>Et||Et>ii.max.y)continue;const vi=n.bu(dt,Et,D.canonical,ii.footprintTileId.canonical);if(_i=n.bv(vi,ii.footprint),_i)break}if(Mt){const ii=_i?Ba:qs(ct.text);Me(o.text,$e,Gt?Ba:ii),Me(o.text,Oe,ui?Ba:ii);const vi=ct.text.isHidden(),{leftJustifiedTextSymbolIndex:Yt,centerJustifiedTextSymbolIndex:Mi,rightJustifiedTextSymbolIndex:Ri,verticalPlacedTextSymbolIndex:tr}=ke,kr=o.text.placedSymbolArray,cr=vi||Gt?1:0;Yt>=0&&(kr.get(Yt).hidden=cr),Mi>=0&&(kr.get(Mi).hidden=cr),Ri>=0&&(kr.get(Ri).hidden=cr),tr>=0&&(kr.get(tr).hidden=vi||ui?1:0);const jr=this.variableOffsets[Re];jr&&this.markUsedJustification(o,jr.anchor,ke,wt);const mr=this.placedOrientations[Re];mr&&(this.markUsedJustification(o,"left",ke,mr),this.markUsedOrientation(o,mr,ke))}if(Tt){const ii=_i?Ba:qs(ct.icon),{placedIconSymbolIndex:vi,verticalPlacedIconSymbolIndex:Yt}=ke,Mi=o.icon.placedSymbolArray,Ri=ct.icon.isHidden()?1:0;vi>=0&&(Me(o.icon,st,Gt?Ba:ii),Mi.get(vi).hidden=Ri),Yt>=0&&(Me(o.icon,ke.numVerticalIconVertices,ui?Ba:ii),Mi.get(Yt).hidden=Ri)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const ii=o.collisionArrays[Ee];if(ii){let vi=new n.P(0,0),Yt=!0;if(ii.textBox||ii.verticalTextBox){if(ee){const Ri=this.variableOffsets[Re];Ri?(vi=Kl(Ri.anchor,Ri.width,Ri.height,Ri.textOffset,Ri.textScale),ne&&vi._rotate(re?this.transform.angle:-this.transform.angle)):Yt=!1}j&&(Yt=!ct.clipped),ii.textBox&&Bc(o.textCollisionBox.collisionVertexArray,ct.text.placed,!Yt||Gt,Xe,ye,vi.x,vi.y),ii.verticalTextBox&&Bc(o.textCollisionBox.collisionVertexArray,ct.text.placed,!Yt||ui,Xe,ye,vi.x,vi.y)}const Mi=Yt&&!!(!ui&&ii.verticalIconBox);ii.iconBox&&Bc(o.iconCollisionBox.collisionVertexArray,ct.icon.placed,Mi,Xe,ye,ke.hasIconTextFit?vi.x:0,ke.hasIconTextFit?vi.y:0),ii.verticalIconBox&&Bc(o.iconCollisionBox.collisionVertexArray,ct.icon.placed,!Mi,Xe,ye,ke.hasIconTextFit?vi.x:0,ke.hasIconTextFit?vi.y:0)}}}if(o.fullyClipped=we===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const Ee=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Ee.invProjMatrix,o.placementViewportMatrix=Ee.viewportMatrix,o.collisionCircleArray=Ee.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>o}setStale(){this.stale=!0}}function Bc(p,o,c,m,v,b,S){p.emplaceBack(o?1:0,c?1:0,b||0,S||0,m,v?1:0),p.emplaceBack(o?1:0,c?1:0,b||0,S||0,m,v?1:0),p.emplaceBack(o?1:0,c?1:0,b||0,S||0,m,v?1:0),p.emplaceBack(o?1:0,c?1:0,b||0,S||0,m,v?1:0)}const Vs=Math.pow(2,25),rp=Math.pow(2,24),Oa=Math.pow(2,17),bo=Math.pow(2,16),np=Math.pow(2,9),lu=Math.pow(2,8),cu=Math.pow(2,1);function qs(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const o=p.placed?1:0,c=Math.floor(127*p.opacity);return c*Vs+o*rp+c*Oa+o*bo+c*np+o*lu+c*cu+o}const Ba=0;class Ch{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,c,m,v,b,S){const D=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(D,v,o[this._currentTileIndex],this._sortAcrossTiles,S),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((R,F)=>R.sortKey-F.sortKey));this._currentPartIndex<D.length;){const R=D[this._currentPartIndex];if(c.placeLayerBucketPart(R,this._seenCrossTileIDs,m,R.symbolInstanceStart===0,S),this._currentPartIndex++,b())return!0}return!1}}class ul{constructor(o,c,m,v,b,S,D,R,F){this.placement=new Us(o,b,S,D,R,F),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(o,c,m,v,b){const S=n.q.now(),D=()=>{const R=n.q.now()-S;return!this._forceFullPlacement&&R>2};for(;this._currentPlacementIndex>=0;){const R=c[o[this._currentPlacementIndex]],F=this.placement.collisionIndex.transform.zoom;if(R.type==="symbol"&&(!R.minzoom||R.minzoom<=F)&&(!R.maxzoom||R.maxzoom>F)){const O=R,j=O.layout.get("symbol-z-elevate"),q=O.layout.get("symbol-sort-key").constantOr(1)!==void 0,W=O.layout.get("symbol-z-order"),te=W==="viewport-y"||W==="auto"&&!(W!=="viewport-y"&&q),ee=O.layout.get("text-allow-overlap")||O.layout.get("icon-allow-overlap")||O.layout.get("text-ignore-placement")||O.layout.get("icon-ignore-placement"),ne=te&&ee,re=this._inProgressLayer=this._inProgressLayer||new Ch(O),ue=n.av(R.source,R.scope);if(re.continuePlacement(j||ne?v[ue]:m[ue],this.placement,this._showCollisionBoxes,R,D,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Cs=512/n.ab/2;class op{constructor(o,c,m){this.tileID=o,this.bucketInstanceId=m,this.index=new n.bz(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=o.canonical.x*n.ab,b=o.canonical.y*n.ab;for(let S=0;S<c.length;S++){const{key:D,crossTileID:R,tileAnchorX:F,tileAnchorY:O}=c.get(S),j=Math.floor((v+F)*Cs),q=Math.floor((b+O)*Cs);this.index.add(j,q),this.keys.push(D),this.crossTileIDs.push(R)}this.index.finish()}findMatches(o,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),b=Cs/Math.pow(2,c.canonical.z-this.tileID.canonical.z),S=c.canonical.x*n.ab,D=c.canonical.y*n.ab;for(let R=0;R<o.length;R++){const F=o.get(R);if(F.crossTileID)continue;const{key:O,tileAnchorX:j,tileAnchorY:q}=F,W=Math.floor((S+j)*b),te=Math.floor((D+q)*b),ee=this.index.range(W-v,te-v,W+v,te+v);for(const ne of ee){const re=this.crossTileIDs[ne];if(this.keys[ne]===O&&!m.has(re)){m.add(re),F.crossTileID=re;break}}}}}class Ql{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gd{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const c=Math.round((o-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],b={};for(const S in v){const D=v[S];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+c),b[D.tileID.key]=D}this.indexes[m]=b}this.lng=o}addBucket(o,c,m){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const v=this.usedCrossTileIDs[o.overscaledZ];for(const b in this.indexes){const S=this.indexes[b];if(Number(b)>o.overscaledZ)for(const D in S){const R=S[D];R.tileID.isChildOf(o)&&R.findMatches(c.symbolInstances,o,v)}else{const D=S[o.scaledTo(Number(b)).key];D&&D.findMatches(c.symbolInstances,o,v)}}for(let b=0;b<c.symbolInstances.length;b++){const S=c.symbolInstances.get(b);S.crossTileID||(S.crossTileID=m.generate(),v.add(S.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new op(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(const m of c.crossTileIDs)this.usedCrossTileIDs[o].delete(m)}removeStaleBuckets(o){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const b in v)o[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[b]),delete v[b],c=!0)}return c}}class uu{constructor(){this.layerIndexes={},this.crossTileIDs=new Ql,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,m,v){let b=this.layerIndexes[o.fqid];b===void 0&&(b=this.layerIndexes[o.fqid]=new Gd);let S=!1;const D={};v.name!=="globe"&&b.handleWrapJump(m);for(const R of c){const F=R.getBucket(o);F&&o.fqid===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(R.tileID,F,this.crossTileIDs)&&(S=!0),D[F.bucketInstanceId]=!0)}return b.removeStaleBuckets(D)&&(S=!0),S}pruneUnusedLayers(o){const c={};o.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const Go=771;class qi{constructor(o,c,m,v){this.blendFunction=o,this.blendColor=c,this.mask=m,this.blendEquation=v}}qi.Replace=[1,0,1,0],qi.disabled=new qi(qi.Replace,n.bA.transparent,[!1,!1,!1,!1]),qi.unblended=new qi(qi.Replace,n.bA.transparent,[!0,!0,!0,!0]),qi.alphaBlended=new qi([1,Go,1,Go],n.bA.transparent,[!0,!0,!0,!0]),qi.alphaBlendedNonPremultiplied=new qi([770,Go,770,Go],n.bA.transparent,[!0,!0,!0,!0]),qi.multiply=new qi([774,0,774,0],n.bA.transparent,[!0,!0,!0,!0]);class gi{constructor(o,c,m){this.func=o,this.mask=c,this.range=m}}gi.ReadOnly=!1,gi.ReadWrite=!0,gi.disabled=new gi(519,gi.ReadOnly,[0,1]);const da=7680;class Ei{constructor(o,c,m,v,b,S){this.test=o,this.ref=c,this.mask=m,this.fail=v,this.depthFail=b,this.pass=S}}Ei.disabled=new Ei({func:519,mask:0},0,0,da,da,da);const fa=1029,Fa=2305;class Si{constructor(o,c,m){this.enable=o,this.mode=c,this.frontFace=m}}function Ah(p,o){const c=n.bD(p,3);n.a6.mat4.fromQuat(p,o),n.bF(p,3,c)}function hl(p,o){const c=n.a6.quat.identity([]);return n.a6.quat.rotateZ(c,c,-o),n.a6.quat.rotateX(c,c,-p),c}function dl(p,o){const c=[p[0],p[1],0],m=[o[0],o[1],0];if(n.a6.vec3.length(c)>=1e-15){const S=n.a6.vec3.normalize([],c);n.a6.vec3.scale(m,S,n.a6.vec3.dot(m,S)),o[0]=m[0],o[1]=m[1]}const v=n.a6.vec3.cross([],o,p);if(n.a6.vec3.len(v)<1e-15)return null;const b=Math.atan2(-v[1],v[0]);return hl(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),b)}Si.disabled=new Si(!1,fa,Fa),Si.backCCW=new Si(!0,fa,Fa),Si.backCW=new Si(!0,fa,2304),Si.frontCW=new Si(!0,1028,2304),Si.frontCCW=new Si(!0,1028,Fa);class pa{constructor(o,c){this.position=o,this.orientation=c}get position(){return this._position}set position(o){if(o){const c=o instanceof n.a5?o:new n.a5(o[0],o[1],o[2]);this._renderWorldCopies&&(c.x=n.bB(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(o,c){if(this.orientation=null,!this.position)return;const m=this.position,v=this._elevation?this._elevation.getAtPointOrZero(n.a5.fromLngLat(o)):0,b=n.a5.fromLngLat(o,v),S=[b.x-m.x,b.y-m.y,b.z-m.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=dl(S,c)}setPitchBearing(o,c){this.orientation=hl(n.bC(o),n.bC(-c))}}class Na{constructor(o,c){this._transform=n.a6.mat4.identity([]),this.orientation=c,this.position=o}get mercatorPosition(){const o=this.position;return new n.a5(o[0],o[1],o[2])}get position(){const o=n.bD(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var c;o&&n.bF(this._transform,3,[(c=o)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||n.a6.quat.identity([]),o&&Ah(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,c){this._orientation=hl(o,c),Ah(this._transform,this._orientation)}forward(){const o=n.bD(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=n.bD(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=n.bD(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,c){const m=new Float64Array(16);return n.a6.mat4.invert(m,this.getWorldToCamera(o,c)),m}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,c,m){const v=this.position;n.a6.vec3.scale(v,v,-o);const b=new Float64Array(16);return n.a6.mat4.fromScaling(b,[m,m,m]),n.a6.mat4.translate(b,b,v),b[10]*=c,b}getWorldToCamera(o,c){const m=new Float64Array(16),v=new Float64Array(4),b=this.position;return n.a6.quat.conjugate(v,this._orientation),n.a6.vec3.scale(b,b,-o),n.a6.mat4.fromQuat(m,v),n.a6.mat4.translate(m,m,b),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=c,m[9]*=c,m[10]*=c,m[11]*=c,m}getCameraToClipPerspective(o,c,m,v){const b=new Float64Array(16);return n.a6.mat4.perspective(b,o,c,m,v),b}getCameraToClipOrthographic(o,c,m,v,b,S){const D=new Float64Array(16);return n.a6.mat4.ortho(D,o,c,m,v,b,S),D}getDistanceToElevation(o,c=!1){const m=o===0?0:n.bE(o,c?n.aN(this.position[1]):this.position[1]),v=this.forward();return(m-this.position[2])/v[2]}clone(){return new Na([...this.position],[...this.orientation])}}const so={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class hu{constructor(o=0,c=0,m=0,v=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=m,this.right=v}interpolate(o,c,m){return c.top!=null&&o.top!=null&&(this.top=n.aa(o.top,c.top,m)),c.bottom!=null&&o.bottom!=null&&(this.bottom=n.aa(o.bottom,c.bottom,m)),c.left!=null&&o.left!=null&&(this.left=n.aa(o.left,c.left,m)),c.right!=null&&o.right!=null&&(this.right=n.aa(o.right,c.right,m)),this}getCenter(o,c){const m=n.ap((this.left+o-this.right)/2,0,o),v=n.ap((this.top+c-this.bottom)/2,0,c);return new n.P(m,v)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new hu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const fl=(p,o,c)=>(1-c)*p+c*o,pl=p=>p*p*p*p*p;class ml{constructor(o,c,m,v,b,S,D){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=m??0,this._maxPitch=v??60,this.setProjection(S),this.setMaxBounds(D),this.width=0,this.height=0,this._center=new n.bL(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new hu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Na,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const o=new ml(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,c=!1){const m=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||m)&&this._updateCameraOnTerrain(),(o||m)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return n.ar(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=n.bM(this.projectionOptions);const m=this.getProjection(),v=!n.bi(c,m);return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bM({name:"mercator"});const c=o!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bE(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bB(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const c=-o*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=n.a6.mat2.create(),n.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const c=n.ap(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=n.bC(o),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,c=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!c||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const m=this._elevation;c||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&m.exaggeration()&&this._centerAltitudeValidForExaggeration!==m.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*m.exaggeration(),this._centerAltitudeValidForExaggeration=m.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=m.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let v=0,b=0;for(let S=0;S<c.length;S++){const D=new n.P(c[S][0]*this.width,m+c[S][1]*(this.height-m)),R=o.pointCoordinate(D);if(!R)continue;const F=1/Math.hypot(R[0]-this._camera.position[0],R[1]-this._camera.position[1]);v+=R[3]*F,b+=F}return b===0?NaN:v/b}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*c,v=this._mercatorZfromZoom(o),b=this._mercatorZfromZoom(this._maxZoom),S=Math.max(v-m,b);this._setZoom(this._zoomFromMercatorZ(S))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let m;m=o.z<this._camera.position[2]?[c.x,c.y,c.z]:[o.x,o.y,o.z];const v=n.a6.vec3.length(n.a6.vec3.sub([],this._camera.position,m));return n.ap(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let c=!1;if(o.orientation&&!n.a6.quat.exactEquals(o.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(o.orientation)),o.position){const m=[o.position.x,o.position.y,o.position.z];n.a6.vec3.exactEquals(m,this._camera.position)||(this._setCameraPosition(m),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,c=new pa;return c.position=new n.a5(o[0],o[1],o[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(o){if(!n.a6.quat.length(o))return!1;n.a6.quat.normalize(o,o);const c=n.a6.vec3.transformQuat([],[0,0,-1],o),m=n.a6.vec3.transformQuat([],[0,-1,0],o);if(m[2]<0)return!1;const v=dl(c,m);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(o){const c=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;o[2]=n.ap(o[2],v/m,v/c),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,m){this._unmodified=!1,this._edgeInsets.interpolate(o,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){const c=[new n.bN(0,o)];if(this.renderWorldCopies){const m=this.pointCoordinate(new n.P(0,0)),v=this.pointCoordinate(new n.P(this.width,0)),b=this.pointCoordinate(new n.P(this.width,this.height)),S=this.pointCoordinate(new n.P(0,this.height)),D=Math.floor(Math.min(m.x,v.x,b.x,S.x)),R=Math.floor(Math.max(m.x,v.x,b.x,S.x)),F=1;for(let O=D-F;O<=R+F;O++)O!==0&&c.push(new n.bN(O,o))}return c}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,c,m){let v=[];const b=m!==void 0,S=!b;if(S&&this.zoom<c||b&&m[0]===0&&m[1]===0)return v;const D=new Set,R=(O,j,q,W,te)=>{const ee=n.c2(j,O,q,W,te);D.has(ee)||(v.push(new n.aA(O,j,q,W,te)),D.add(ee))};for(let O=0;O<o.length;O++){const j=o[O];if(S&&j.canonical.z!==c)continue;const q=j.canonical,W=j.overscaledZ,te=j.wrap,ee=1<<q.z,ne=q.x+1<ee,re=q.x>0,ue=q.y+1<ee,ye=q.y>0,ve=j.wrap-(re?0:1),be=j.wrap+(ne?0:1),Me=re?q.x-1:ee-1,we=ne?q.x+1:0;if(b)m[0]<0?(R(W,be,q.z,we,q.y),m[1]<0&&ue&&(R(W,te,q.z,q.x,q.y+1),R(W,be,q.z,we,q.y+1)),m[1]>0&&ye&&(R(W,te,q.z,q.x,q.y-1),R(W,be,q.z,we,q.y-1))):m[0]>0?(R(W,ve,q.z,Me,q.y),m[1]<0&&ue&&(R(W,te,q.z,q.x,q.y+1),R(W,ve,q.z,Me,q.y+1)),m[1]>0&&ye&&(R(W,te,q.z,q.x,q.y-1),R(W,ve,q.z,Me,q.y-1))):m[1]<0&&ue?R(W,te,q.z,q.x,q.y+1):ye&&R(W,te,q.z,q.x,q.y-1);else{const Ee=j.visibleQuadrants;1&Ee&&(R(W,ve,q.z,Me,q.y),ye&&(R(W,te,q.z,q.x,q.y-1),R(W,ve,q.z,Me,q.y-1))),2&Ee&&(R(W,be,q.z,we,q.y),ye&&(R(W,te,q.z,q.x,q.y-1),R(W,be,q.z,we,q.y-1))),4&Ee&&(R(W,ve,q.z,Me,q.y),ue&&(R(W,te,q.z,q.x,q.y+1),R(W,ve,q.z,Me,q.y+1))),8&Ee&&(R(W,be,q.z,we,q.y),ue&&(R(W,te,q.z,q.x,q.y+1),R(W,be,q.z,we,q.y+1)))}}const F=[];for(const O of v)v.some(j=>O.isChildOf(j))||F.push(O);if(v=F.filter(O=>!o.some(j=>!!(O.overscaledZ<c&&j.isChildOf(O))||O.equals(j)||O.isChildOf(j))),S){const O=1<<c,j=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),q=[O*j.x,O*j.y],W=4,te=W*W;v=v.filter(ee=>{const ne=ee.canonical.x+.5-q[0],re=ee.canonical.y+.5-q[1];return ne*ne+re*re<te})}return v}coveringTiles(o){let c=this.coveringZoomLevel(o);const m=c,v=this.elevation&&this.elevation.exaggeration(),b=v&&!o.isTerrainDEM,S=this.projection.name==="mercator";if(o.minzoom!==void 0&&c<o.minzoom)return[];o.maxzoom!==void 0&&c>o.maxzoom&&(c=o.maxzoom);const D=this.locationCoordinate(this.center),R=this.center.lat,F=1<<c,O=[F*D.x,F*D.y,0],j=this.projection.name==="globe",q=!j,W=n.bO.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,q),te=j?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ee=F*n.bE(1,this.center.lat),ne=this._camera.position[2]/n.bE(1,this.center.lat),re=[F*te.x,F*te.y,ne*(q?1:ee)],ue=j||v,ye=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),ve=this.isLODDisabled(!0)?c:0;let be;if(this._elevation&&o.isTerrainDEM)be=1e4*this._elevation.exaggeration();else if(this._elevation){const Xe=this._elevation.getMinMaxForVisibleTiles();be=Xe?Xe.max:this._centerAltitude}else be=this._centerAltitude;const Me=o.isTerrainDEM?-be:this._elevation?this._elevation.getMinElevationBelowMSL():0,we=this.projection.isReprojectedInTileSpace?n.bP(this):1,Ee=Xe=>{const ct=new n.a5(Xe.x+25e-6,Xe.y,Xe.z),Mt=new n.a5(Xe.x,Xe.y+25e-6,Xe.z),Tt=Xe.toLngLat(),wt=ct.toLngLat(),Gt=Mt.toLngLat(),ui=this.locationCoordinate(Tt),_i=this.locationCoordinate(wt),ii=this.locationCoordinate(Gt),vi=Math.hypot(_i.x-ui.x,_i.y-ui.y),Yt=Math.hypot(ii.x-ui.x,ii.y-ui.y);return Math.sqrt(vi*Yt)*we/25e-6},ke=Xe=>{const St=be,ct=Me;return{aabb:n.bS(this,F,0,0,0,Xe,ct,St,this.projection),zoom:0,x:0,y:0,minZ:ct,maxZ:St,wrap:Xe,fullyVisible:!1}},$e=[];let Oe=[];const Re=c,st=o.reparseOverscaled?m:c,dt=(ne-this._centerAltitude)*ee,Et=Xe=>{if(!this._elevation||!Xe.tileID||!S)return;const St=this._elevation.getMinMaxForTile(Xe.tileID),ct=Xe.aabb;St?(ct.min[2]=St.min,ct.max[2]=St.max,ct.center[2]=(ct.min[2]+ct.max[2])/2):(Xe.shouldSplit=jt(Xe),Xe.shouldSplit||(ct.min[2]=ct.max[2]=ct.center[2]=this._centerAltitude))},Lt=(Xe,St)=>{if(.707*St<Xe)return 1;const ct=St/Xe;return ct/(1.4144271570014144+(Math.pow(1.1,ct-1.4144271570014144+1)-1)/(1.1-1)-1)},jt=Xe=>{if(Xe.zoom<ve)return!0;if(Xe.zoom===Re)return!1;if(Xe.shouldSplit!=null)return Xe.shouldSplit;const St=Xe.aabb.distanceX(re),ct=Xe.aabb.distanceY(re);let Mt=dt,Tt=1;if(j){Mt=Xe.aabb.distanceZ(re);const Yt=Math.pow(2,Xe.zoom),Mi=n.aN((Xe.y+1)/Yt),Ri=n.aN(Xe.y/Yt),tr=Math.min(Math.max(R,Mi),Ri),kr=n.c6(tr)/n.c6(R);if(Tt=tr===R?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,kr/this._mercatorScaleRatio),this.zoom<=n.c3&&Xe.zoom===Re-1&&kr>=.9)return!0}else if(b&&(Mt=Xe.aabb.distanceZ(re)*ee),this.projection.isReprojectedInTileSpace&&m<=5){const Yt=Math.pow(2,Xe.zoom),Mi=Ee(new n.a5((Xe.x+.5)/Yt,(Xe.y+.5)/Yt));Tt=Mi>.85?1:Mi}if(!S){const Yt=Math.sqrt(St*St+ct*ct+Mt*Mt);let Mi=(1<<Re-Xe.zoom)*ye*Tt;return Mi*=Lt(Math.max(Mt,dt),Yt),Yt<Mi}let wt=Number.MAX_VALUE,Gt=0;const ui=Xe.aabb.getCorners(),_i=[];for(const Yt of ui){n.a6.vec3.sub(_i,Yt,re),j||(b?_i[2]*=ee:_i[2]=dt);const Mi=n.a6.vec3.dot(_i,this._camera.forward());Mi<wt&&(wt=Mi,Gt=Math.abs(_i[2]))}let ii=(1<<Re-Xe.zoom)*ye*Tt;if(ii*=Lt(Math.max(Gt,dt),wt),wt<ii)return!0;const vi=Xe.aabb.closestPoint(O);return vi[0]===O[0]&&vi[1]===O[1]};if(this.renderWorldCopies)for(let Xe=1;Xe<=3;Xe++)$e.push(ke(-Xe)),$e.push(ke(Xe));for($e.push(ke(0));$e.length>0;){const Xe=$e.pop(),St=Xe.x,ct=Xe.y;let Mt=Xe.fullyVisible;const Tt=()=>this.projection.name==="globe"&&(Xe.y===0||Xe.y===(1<<Xe.zoom)-1);if(!Mt){let wt=ue?Xe.aabb.intersects(W):Xe.aabb.intersectsFlat(W);if(wt===0&&Tt()){const Gt=new n.bQ(Xe.zoom,St,ct);wt=n.bR(this,F,Gt,!0).intersects(W)}if(wt===0)continue;Mt=wt===2}if(Xe.zoom!==Re&&jt(Xe))for(let wt=0;wt<4;wt++){const Gt=(St<<1)+wt%2,ui=(ct<<1)+(wt>>1),_i={aabb:S?Xe.aabb.quadrant(wt):n.bS(this,F,Xe.zoom+1,Gt,ui,Xe.wrap,Xe.minZ,Xe.maxZ,this.projection),zoom:Xe.zoom+1,x:Gt,y:ui,wrap:Xe.wrap,fullyVisible:Mt,tileID:void 0,shouldSplit:void 0,minZ:Xe.minZ,maxZ:Xe.maxZ};b&&!j&&(_i.tileID=new n.aA(Xe.zoom+1===Re?st:Xe.zoom+1,Xe.wrap,Xe.zoom+1,Gt,ui),Et(_i)),$e.push(_i)}else{const wt=Xe.zoom===Re?st:Xe.zoom;if(o.minzoom&&o.minzoom>wt)continue;let Gt=0;if(!Mt){let vi=ue?Xe.aabb.intersectsPrecise(W):Xe.aabb.intersectsPreciseFlat(W);if(vi===0&&Tt()){const Yt=new n.bQ(Xe.zoom,St,ct);vi=n.bR(this,F,Yt,!0).intersectsPrecise(W)}if(vi===0)continue;if(o.calculateQuadrantVisibility)if(W.containsPoint(Xe.aabb.center))Gt=15;else for(let Yt=0;Yt<4;Yt++)Xe.aabb.quadrant(Yt).intersects(W)!==0&&(Gt|=1<<Yt)}const ui=O[0]-(.5+St+(Xe.wrap<<Xe.zoom))*(1<<c-Xe.zoom),_i=O[1]-.5-ct,ii=Xe.tileID?Xe.tileID:new n.aA(wt,Xe.wrap,Xe.zoom,St,ct);o.calculateQuadrantVisibility&&(ii.visibleQuadrants=Gt),Oe.push({tileID:ii,distanceSq:ui*ui+_i*_i})}}if(this.fogCullDistSq){const Xe=this.fogCullDistSq,St=this.horizonLineFromTop();Oe=Oe.filter(ct=>{const Mt=[0,0,0,1],Tt=[n.ab,n.ab,0,1],wt=this.calculateFogTileMatrix(ct.tileID.toUnwrapped());n.a6.vec4.transformMat4(Mt,Mt,wt),n.a6.vec4.transformMat4(Tt,Tt,wt);const Gt=n.a6.vec4.min([],Mt,Tt),ui=n.a6.vec4.max([],Mt,Tt),_i=n.bT(Gt,ui);if(_i===0)return!0;let ii=!1;const vi=this._elevation;if(vi&&_i>Xe&&St!==0){const Yt=this.calculateProjMatrix(ct.tileID.toUnwrapped());let Mi;o.isTerrainDEM||(Mi=vi.getMinMaxForTile(ct.tileID)),Mi||(Mi={min:Me,max:be});const Ri=n.c4(this.rotation),tr=[Ri[0]*n.ab,Ri[1]*n.ab,Mi.max];n.a6.vec3.transformMat4(tr,tr,Yt),ii=(1-tr[1])*this.height*.5<St}return _i<Xe||ii})}return Oe.sort((Xe,St)=>Xe.distanceSq-St.distanceSq).map(Xe=>Xe.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const c=n.ap(o.lat,-n.bU,n.bU),m=this.projection.project(o.lng,c);return new n.P(m.x*this.worldSize,m.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bE(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,c){let m,v;const b=this.centerPoint;if(this.projection.name==="globe"){const D=this.worldSize;m=(c.x-b.x)/D,v=(c.y-b.y)/D}else{const D=this.pointCoordinate(c),R=this.pointCoordinate(b);m=D.x-R.x,v=D.y-R.y}const S=this.locationCoordinate(o);this.setLocation(new n.a5(S.x-m,S.y-v))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o){return this.projection.locationPoint(this,o)}locationPoint3D(o){return this.projection.locationPoint(this,o,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o){return this.coordinateLocation(this.pointCoordinate3D(o))}locationCoordinate(o,c){const m=c?n.bE(c,o.lat):void 0,v=this.projection.project(o.lng,o.lat);return new n.a5(v.x,v.y,m)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,c){const m=c??this._centerAltitude,v=[o.x,o.y,0,1],b=[o.x,o.y,1,1];n.a6.vec4.transformMat4(v,v,this.pixelMatrixInverse),n.a6.vec4.transformMat4(b,b,this.pixelMatrixInverse);const S=b[3];n.a6.vec4.scale(v,v,1/v[3]),n.a6.vec4.scale(b,b,1/S);const D=v[2],R=b[2];return{p0:v,p1:b,t:D===R?0:(m-D)/(R-D)}}screenPointToMercatorRay(o){const c=[o.x,o.y,0,1],m=[o.x,o.y,1,1];return n.a6.vec4.transformMat4(c,c,this.pixelMatrixInverse),n.a6.vec4.transformMat4(m,m,this.pixelMatrixInverse),n.a6.vec4.scale(c,c,1/c[3]),n.a6.vec4.scale(m,m,1/m[3]),c[2]=n.bE(c[2],this._center.lat)*this.worldSize,m[2]=n.bE(m[2],this._center.lat)*this.worldSize,n.a6.vec4.scale(c,c,1/this.worldSize),n.a6.vec4.scale(m,m,1/this.worldSize),new n.aj([c[0],c[1],c[2]],n.a6.vec3.normalize([],n.a6.vec3.sub([],m,c)))}rayIntersectionCoordinate(o){const{p0:c,p1:m,t:v}=o,b=n.bE(c[2],this._center.lat),S=n.bE(m[2],this._center.lat);return new n.a5(n.aa(c[0],m[0],v)/this.worldSize,n.aa(c[1],m[1],v)/this.worldSize,n.aa(b,S,v))}pointCoordinate(o,c=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,c)}pointCoordinate3D(o){if(!this.elevation)return this.pointCoordinate(o);let c=this.projection.pointCoordinate3D(this,o.x,o.y);if(c)return new n.a5(c[0],c[1],c[2]);let m=0,v=this.horizonLineFromTop();if(o.y>v)return this.pointCoordinate(o);const b=.02*v,S=o.clone();for(let D=0;D<10&&v-m>b;D++){S.y=n.aa(m,v,.66);const R=this.projection.pointCoordinate3D(this,S.x,S.y);R?(v=S.y,c=R):m=S.y}return c?new n.a5(c[0],c[1],c[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=n.bV)return!this.isPointAboveHorizon(o);const c=this.pointCoordinate(o);return c.y>=0&&c.y<=1}_coordinatePoint(o,c){const m=c&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,v=[o.x*this.worldSize,o.y*this.worldSize,m+o.toAltitude(),1];return n.a6.vec4.transformMat4(v,v,this.pixelMatrix),v[3]>0?new n.P(v[0]/v[3],v[1]/v[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:c}=this._edgeInsets,m=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,b=this.pointLocation3D(new n.P(c,o)),S=this.pointLocation3D(new n.P(v,o)),D=this.pointLocation3D(new n.P(v,m)),R=this.pointLocation3D(new n.P(c,m));let F=Math.min(b.lng,S.lng,D.lng,R.lng),O=Math.max(b.lng,S.lng,D.lng,R.lng),j=Math.min(b.lat,S.lat,D.lat,R.lat),q=Math.max(b.lat,S.lat,D.lat,R.lat);const W=Math.pow(2,-this.zoom)/16*270,te=this.projection.name==="globe"?1:4,ee=(ne,re,ue,ye,ve)=>{const be=(ne+ue)/2,Me=(re+ye)/2,we=new n.P(be,Me),{lng:Ee,lat:ke}=this.pointLocation3D(we),$e=Math.max(0,F-Ee,j-ke,Ee-O,ke-q);F=Math.min(F,Ee),O=Math.max(O,Ee),j=Math.min(j,ke),q=Math.max(q,ke),(ve<te||$e>W)&&(ee(ne,re,be,Me,ve+1),ee(be,Me,ue,ye,ve+1))};if(ee(c,o,v,o,1),ee(v,o,v,m,1),ee(v,m,c,m,1),ee(c,m,c,o,1),this.projection.name==="globe"){const[ne,re]=n.bW(this);ne?(q=90,O=180,F=-180):re&&(j=-90,O=180,F=-180)}return new n.as(new n.bL(F,j),new n.bL(O,q))}_getBoundsRectangular(o,c){const{top:m,left:v}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,D=new n.P(v,m),R=new n.P(S,m),F=new n.P(S,b),O=new n.P(v,b);let j=this.pointCoordinate(D,o),q=this.pointCoordinate(R,o);const W=this.pointCoordinate(F,c),te=this.pointCoordinate(O,c),ee=(ne,re)=>(re.y-ne.y)/(re.x-ne.x);return j.y>1&&q.y>=0?j=new n.a5((1-te.y)/ee(te,j)+te.x,1):j.y<0&&q.y<=1&&(j=new n.a5(-te.y/ee(te,j)+te.x,0)),q.y>1&&j.y>=0?q=new n.a5((1-W.y)/ee(W,q)+W.x,1):q.y<0&&j.y<=1&&(q=new n.a5(-W.y/ee(W,q)+W.x,0)),new n.as().extend(this.coordinateLocation(j)).extend(this.coordinateLocation(q)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(W))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=o.visibleDemTiles.reduce((m,v)=>{if(v.dem){const b=v.dem.tree;m.min=Math.min(m.min,b.minimums[0]),m.max=Math.max(m.max,b.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*o.exaggeration(),c.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,m=this.height/2-c*(1-this._horizonShift);return o?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-n.bU,this.maxLat=n.bU,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.am(this.minLng)*this.tileSize,this.worldMaxX=n.am(this.maxLng)*this.tileSize,this.worldMinY=n.at(this.maxLat)*this.tileSize,this.worldMaxY=n.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,c){return this.projection.createTileMatrix(this,c,o)}calculateDistanceTileData(o){const c=o.key,m=this._distanceTileDataCache;if(m[c])return m[c];const v=o.canonical,b=1/this.height,S=this.cameraWorldSize,D=S/this.zoomScale(v.z),R=(v.x+Math.pow(2,v.z)*o.wrap)*D,F=v.y*D,O=this.point;O.x*=S/this.worldSize,O.y*=S/this.worldSize;const j=this.angle,q=Math.sin(-j),W=-Math.cos(-j);return m[c]={bearing:[q,W],center:[(O.x-R)*b,(O.y-F)*b],scale:D/n.ab*b},m[c]}calculateFogTileMatrix(o){const c=o.key,m=this._fogTileMatrixCache;if(m[c])return m[c];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return n.a6.mat4.multiply(v,this.worldToFogMatrix,v),m[c]=new Float32Array(v),m[c]}calculateProjMatrix(o,c=!1,m=!1){const v=o.key;let b;if(b=m?this._expandedProjMatrixCache:c?this._alignedProjMatrixCache:this._projMatrixCache,b[v])return b[v];const S=this.calculatePosMatrix(o,this.worldSize);let D;return D=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.expandedFarZProjMatrix:c?this.alignedProjMatrix:this.projMatrix,n.a6.mat4.multiply(S,D,S),b[v]=new Float32Array(S),b[v]}calculatePixelsToTileUnitsMatrix(o){const c=o.tileID.key,m=this._pixelsToTileUnitsCache;if(m[c])return m[c];const v=n.bX(o,this);return m[c]=v,m[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,c=n.a6.mat4.fromScaling([],[o,o,o]);return n.a6.mat4.multiply(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const c=n.bE(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(c),v=this._camera.forward(),b=n.bE(1,this._center.lat);m[2]/=b,v[2]/=b,n.a6.vec3.normalize(v,v);const S=o.raycast(m,v,o.exaggeration());if(S){const D=n.a6.vec3.scaleAndAdd([],m,v,S),R=new n.a5(D[0],D[1],n.bE(D[2],n.aN(D[1]))),F=(R.z+n.a6.vec3.length([R.x-m[0],R.y-m[1],R.z-m[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(F),this._centerAltitude=R.toAltitude(),this._center=this.coordinateLocation(R),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const c=this._elevation,m=n.bE(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(m),b=c.getAtPointOrZero(new n.a5(...v)),S=this.pixelsPerMeter/this.worldSize*b,D=this._minimumHeightOverTerrain(),R=v[2]-S;if(R<=D)if(R<0||o){const F=this.locationCoordinate(this._center,this._centerAltitude),O=[v[0],v[1],F.z-v[2]],j=n.a6.vec3.length(O);O[2]-=(D-R)/this._pixelsPerMercatorPixel;const q=n.a6.vec3.length(O);if(q===0)return;n.a6.vec3.scale(O,O,j/q*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],F.z*this._pixelsPerMercatorPixel-O[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const q=this.center;return q.lat=n.ap(q.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(q.lng=n.ap(q.lng,this.minLng,this.maxLng)),this.center=q,void(this._constraining=!1)}const c=this._unmodified,{x:m,y:v}=this.point;let b=0,S=m,D=v;const R=this.width/2,F=this.height/2,O=this.worldMinY*this.scale,j=this.worldMaxY*this.scale;if(v-F<O&&(D=O+F),v+F>j&&(D=j-F),j-O<this.height&&(b=Math.max(b,this.height/(j-O)),D=(j+O)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const q=this.worldMinX*this.scale,W=this.worldMaxX*this.scale,te=this.worldSize/2-(q+W)/2;S=(m+te+this.worldSize)%this.worldSize-te,S-R<q&&(S=q+R),S+R>W&&(S=W-R),W-q<this.width&&(b=Math.max(b,this.width/(W-q)),S=(W+q)/2)}S===m&&D===v||(this.center=this.unproject(new n.P(S,D))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,c=this.projection.name==="globe",m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bE(1,this.center.lat)/n.bE(1,n.c5));const v=n.bY(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this.projection.zAxisUnit==="meters"?m:1,S=this._camera.getWorldToCamera(this.worldSize,b);let D;const R=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(R[8]=2*-o.x/this.width,R[9]=2*o.y/this.height,this.isOrthographic){let ke=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),$e=ke*this.aspect,Oe=-$e,Re=-ke;$e-=o.x,Oe-=o.x,ke+=o.y,Re+=o.y,D=this._camera.getCameraToClipOrthographic(Oe,$e,Re,ke,this._nearZ,this._farZ),((st,dt,Et,Lt)=>{for(let jt=0;jt<16;jt++)st[jt]=fl(dt[jt],Et[jt],Lt)})(D,D,R,pl(this.pitch>=15?1:this.pitch/15))}else D=R;const F=n.a6.mat4.mul([],R,S);let O=n.a6.mat4.mul([],D,S);if(this.projection.isReprojectedInTileSpace){const ke=this.locationCoordinate(this.center),$e=n.a6.mat4.identity([]);n.a6.mat4.translate($e,$e,[ke.x*this.worldSize,ke.y*this.worldSize,0]),n.a6.mat4.multiply($e,$e,n.bZ(this)),n.a6.mat4.translate($e,$e,[-ke.x*this.worldSize,-ke.y*this.worldSize,0]),n.a6.mat4.multiply(O,O,$e),n.a6.mat4.multiply(F,F,$e),this.inverseAdjustmentMatrix=n.b_(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.a6.mat4.scale([],O,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=O,this.invProjMatrix=n.a6.mat4.invert(new Float64Array(16),this.projMatrix),c){const ke=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);ke[8]=2*-o.x/this.width,ke[9]=2*o.y/this.height,this.expandedFarZProjMatrix=n.a6.mat4.mul([],ke,S)}else this.expandedFarZProjMatrix=this.projMatrix;const j=n.a6.mat4.invert([],D);this.frustumCorners=n.b$.fromInvProjectionMatrix(j,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bO.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!c);const q=new Float32Array(16);n.a6.mat4.identity(q),n.a6.mat4.scale(q,q,[1,-1,1]),n.a6.mat4.rotateX(q,q,this._pitch),n.a6.mat4.rotateZ(q,q,this.angle);const W=n.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.a6.mat4.clone(W);const te=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;W[8]=2*-o.x/this.width,W[9]=2*(o.y+te)/this.height,this.skyboxMatrix=n.a6.mat4.multiply(q,W,q);const ee=this.point,ne=ee.x,re=ee.y,ue=this.width%2/2,ye=this.height%2/2,ve=Math.cos(this.angle),be=Math.sin(this.angle),Me=ne-Math.round(ne)+ve*ue+be*ye,we=re-Math.round(re)+ve*ye+be*ue,Ee=new Float64Array(O);if(n.a6.mat4.translate(Ee,Ee,[Me>.5?Me-1:Me,we>.5?we-1:we,0]),this.alignedProjMatrix=Ee,O=n.a6.mat4.create(),n.a6.mat4.scale(O,O,[this.width/2,-this.height/2,1]),n.a6.mat4.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=n.a6.mat4.create(),n.a6.mat4.scale(O,O,[1,-1,1]),n.a6.mat4.translate(O,O,[-1,-1,0]),n.a6.mat4.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=n.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,F),this._calcFogMatrices(),this._distanceTileDataCache={},O=n.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c0(this);const ke=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.a6.vec3.transformMat4(ke,ke,S),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,m=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,b=[o,o,c];n.a6.vec3.scale(b,b,v),n.a6.vec3.scale(m,m,-1),n.a6.vec3.multiply(m,m,b);const S=n.a6.mat4.create();n.a6.mat4.translate(S,S,m),n.a6.mat4.scale(S,S,b),this.mercatorFogMatrix=S,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,c,v)}_computeCameraPosition(o){const c=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),v=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-o/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-m[0]*b,v.y/this.worldSize-m[1]*b,o/this.worldSize*this._centerAltitude-m[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=this._camera.position[2],v=o[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(b=Math.min((c-m)/v,1)),this._camera.position=n.a6.vec3.scaleAndAdd([],this._camera.position,o,b),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,c=this._camera.forward(),{pitch:m,bearing:v}=this._camera.getPitchBearing(),b=n.bE(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,S=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.bC(this._maxPitch)),D=Math.max((o[2]-b)/Math.cos(m),S),R=this._zoomFromMercatorZ(D);n.a6.vec3.scaleAndAdd(o,o,c,D),this._pitch=n.ap(m,n.bC(this.minPitch),n.bC(this.maxPitch)),this.angle=n.bB(v,-Math.PI,Math.PI),this._setZoom(n.ap(R,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.a5(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let c=0,m=n.bV,v=0,b=1/0;for(;m-c>1e-6&&m>c;){const S=c+.5*(m-c),D=this.tileSize*Math.pow(2,S),R=this.getCameraToCenterDistance(this.projection,S,D),F=this.scaleZoom(R/(o*this.tileSize)),O=Math.abs(S-F);O<b&&(b=O,v=S),S<F?c=S:m=S}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,c){const m=Math.min(o.x,c.x),v=Math.max(o.x,c.x),b=Math.min(o.y,c.y),S=Math.max(o.y,c.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const D=[new n.P(m,b),new n.P(v,S),new n.P(m,S),new n.P(v,b)],R=this.renderWorldCopies?-3:0,F=this.renderWorldCopies?4:1;for(const O of D){const j=this.pointRayIntersection(O);if(j.t<0)return!0;const q=this.rayIntersectionCoordinate(j);if(q.x<R||q.y<0||q.x>F||q.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c1(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(o,c){const m=n.a6.vec3.length(n.a6.vec3.sub([],this._camera.position,o)),v=this._zoomFromMercatorZ(m)+c;return m-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([c,m,v],b){const S=[c,m,v,1];n.a6.vec4.transformMat4(S,S,b);const D=S[3]=Math.max(S[3],1e-6);return S[0]/=D,S[1]/=D,S[2]/=D,S}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,o))}}getCameraToCenterDistance(o,c=this.zoom,m=this.worldSize){const v=n.bY(o,c,this.width,this.height,1024),b=o.pixelSpaceConversion(this.center.lat,m,v);let S=.5/Math.tan(.5*this._fov)*this.height*b;return this.isOrthographic&&(S=fl(1,S,pl(this.pitch>=15?1:this.pitch/15))),S}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.a6.mat4.multiply(o,o,this.globeMatrix),o}getFrustum(o){return n.bO.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const Ro=(p,o)=>{if(o>0&&p.terrain&&n.w("Cutoff is currently disabled on terrain"),o<=0||p.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const c=p.transform,m=Math.max(Math.abs(c._zoom-(p.minCutoffZoom-1)),1),v=c.isLODDisabled(!1)?n.a7(60,45,c.pitch):n.a7(30,15,c.pitch),b=c._farZ-c._nearZ,S=o*c.height,D=((1-(R=v))*c.cameraToCenterDistance+R*(c._farZ+S))*m;var R;return{shouldRenderCutoff:v<1,uniformValues:{u_cutoff_params:[c._nearZ,c._farZ,(D-c._nearZ)/b,(D-S-c._nearZ)/b]}}},sn={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Hs{constructor(o,c){this.aabb=o,this.lastCascade=c}}class qt{add(o,c){const m=this.receivers[o.key];m!==void 0?(m.aabb.min[0]=Math.min(m.aabb.min[0],c.min[0]),m.aabb.min[1]=Math.min(m.aabb.min[1],c.min[1]),m.aabb.min[2]=Math.min(m.aabb.min[2],c.min[2]),m.aabb.max[0]=Math.max(m.aabb.max[0],c.max[0]),m.aabb.max[1]=Math.max(m.aabb.max[1],c.max[1]),m.aabb.max[2]=Math.max(m.aabb.max[2],c.max[2])):this.receivers[o.key]=new Hs(c,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,c,m){const v=n.ca.fromPoints(o.points);let b=0;for(const S in this.receivers){const D=this.receivers[S];if(!D||!v.intersectsAabb(D.aabb))continue;D.aabb.min=v.closestPoint(D.aabb.min),D.aabb.max=v.closestPoint(D.aabb.max);const R=D.aabb.getCorners();for(let F=0;F<m.length;F++){let O=!0;for(const j of R){const q=[j[0]*c,j[1]*c,j[2]];if(n.a6.vec3.transformMat4(q,q,m[F].matrix),q[0]<-1||q[0]>1||q[1]<-1||q[1]>1){O=!1;break}}if(D.lastCascade=F,b=Math.max(b,F),O)break}}return b+1}}class $a{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new qt,this._depthMode=new gi(o.context.gl.LEQUAL,gi.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(sn,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(sn,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(sn,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,c){const m=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!c||!c.properties)return;const v=c.properties.get("shadow-intensity");if(!c.shadowsEnabled()||v<=0||(this._shadowLayerCount=m.style.order.reduce((te,ee)=>{const ne=m.style._mergedLayers[ee];return te+(ne.hasShadowPass()&&!ne.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const b=m.context,S=sn.shadowMapResolution,D=sn.shadowMapResolution;if(this._cascades.length===0||sn.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let te=0;te<sn.cascadeCount;++te){const ee=m._shadowMapDebug,ne=b.gl,re=b.createFramebuffer(S,D,ee,"texture"),ue=new n.T(b,{width:S,height:D,data:null},ne.DEPTH_COMPONENT16);if(re.depthAttachment.set(ue.texture),ee){const ye=new n.T(b,{width:S,height:D,data:null},ne.RGBA8);re.colorAttachment.set(ye.texture)}this._cascades.push({framebuffer:re,texture:ue,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bO,scale:0})}}this.shadowDirection=du(c);let R=0;if(o.elevation){const te=o.elevation,ee=[1e4,-1e4];te.visibleDemTiles.filter(ne=>ne.dem).forEach(ne=>{const re=ne.dem.tree;ee[0]=Math.min(ee[0],re.minimums[0]),ee[1]=Math.max(ee[1],re.maximums[0])}),ee[0]!==1e4&&(R=(ee[1]-ee[0])*te.exaggeration())}const F=1.5*o.cameraToCenterDistance,O=3*F,j=new Float64Array(16);for(let te=0;te<this._cascades.length;++te){const ee=this._cascades[te];let ne=o.height/50,re=1;sn.cascadeCount===1?re=O:te===0?re=F:(ne=F,re=O);const[ue,ye]=ec(o,this.shadowDirection,ne,re,sn.shadowMapResolution,R);ee.scale=o.scale,ee.matrix=ue,ee.boundingSphereRadius=ye,n.a6.mat4.invert(j,ee.matrix),ee.frustum=n.bO.fromInvProjectionMatrix(j,1,0,!0),ee.far=re}const q=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[q].far,this._cascades[q].far],this._uniformValues.u_shadow_intensity=v,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/sn.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=sn.shadowMapResolution,this._uniformValues.u_shadowmap_0=so.ShadowMap0,this._uniformValues.u_shadowmap_1=so.ShadowMap0+1,this._groundShadowTiles=m.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const W=m.transform.elevation;for(const te of this._groundShadowTiles){let ee={min:0,max:0};if(W){const ne=W.getMinMaxForTile(te);ne&&(ee=ne)}this.addShadowReceiver(te.toUnwrapped(),ee.min,ee.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,c){if(!this.enabled)return;const m=this.painter,v=m.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(m.transform.getFrustum(0),m.transform.worldSize,this._cascades),v.viewport.set([0,0,sn.shadowMapResolution,sn.shadowMapResolution]);for(let b=0;b<this._numCascadesToRender;++b){m.currentShadowCascade=b,v.bindFramebuffer.set(this._cascades[b].framebuffer.framebuffer),v.clear({color:n.bA.white,depth:1});for(const S of o.order){const D=o._mergedLayers[S];if(!D.hasShadowPass()||D.isHidden(m.transform.zoom))continue;const R=o.getLayerSourceCache(D),F=R?c[R.id]:void 0;(D.type==="model"||F&&F.length)&&m.renderLayer(m,R,D,F)}}m.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,c=o.style,m=o.context,v=c.directionalLight,b=c.ambientLight;if(!v||!b)return;const S=[],D=Ro(o,o.longestCutoffRange);D.shouldRenderCutoff&&S.push("RENDER_CUTOFF"),S.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&S.push("NORMAL_OFFSET");const R=_l(c,v,b),F=new gi(m.gl.LEQUAL,gi.ReadOnly,o.depthRangeFor3D);for(const O of this._groundShadowTiles){const j=O.toUnwrapped(),q=o.isTileAffectedByFog(O),W=o.getOrCreateProgram("groundShadow",{defines:S,overrideFog:q});this.setupShadows(j,W),o.uploadCommonUniforms(m,W,j,null,D);const te={u_matrix:o.transform.calculateProjMatrix(j),u_ground_shadow_factor:R};W.draw(o,m.gl.TRIANGLES,F,Ei.disabled,qi.multiply,Si.disabled,te,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,{},o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?qi.unblended:qi.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const c=this.painter.transform,m=c.calculatePosMatrix(o,c.worldSize);return n.a6.mat4.multiply(m,this._cascades[this.painter.currentShadowCascade].matrix,m),Float32Array.from(m)}calculateShadowPassMatrixFromMatrix(o){return n.a6.mat4.multiply(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,c,m,v=0){if(!this.enabled)return;const b=this.painter.transform,S=this.painter.context,D=S.gl,R=this._uniformValues,F=new Float64Array(16),O=b.calculatePosMatrix(o,b.worldSize);for(let j=0;j<this._cascades.length;j++)n.a6.mat4.multiply(F,this._cascades[j].matrix,O),R[j===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(F),S.activeTexture.set(D.TEXTURE0+so.ShadowMap0+j),this._cascades[j].texture.bind(D.NEAREST,D.CLAMP_TO_EDGE);if(this.useNormalOffset=!!m,this.useNormalOffset){const j=n.c9(o.canonical),q=2/b.tileSize*n.ab/sn.shadowMapResolution,W=q*this._cascades[0].boundingSphereRadius,te=q*this._cascades[this._cascades.length-1].boundingSphereRadius,ee=(m==="vector-tile"?1:3)/Math.pow(2,v-o.canonical.z-(1-b.zoom+Math.floor(b.zoom)));R.u_shadow_normal_offset=[j,W*ee,te*ee],R.u_shadow_bias=[6e-5,.0012,.012]}else R.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(S,R)}setupShadowsFromMatrix(o,c,m=!1){if(!this.enabled)return;const v=this.painter.context,b=v.gl,S=this._uniformValues,D=new Float64Array(16);for(let R=0;R<sn.cascadeCount;R++)n.a6.mat4.multiply(D,this._cascades[R].matrix,o),S[R===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(D),v.activeTexture.set(b.TEXTURE0+so.ShadowMap0+R),this._cascades[R].texture.bind(b.NEAREST,b.CLAMP_TO_EDGE);if(this.useNormalOffset=m,m){const R=sn.normalOffset;S.u_shadow_normal_offset=[1,R,R],S.u_shadow_bias=[6e-5,.0012,.012]}else S.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(v,S)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,c,m,v){if(v[2]>=0)return{};const b=function(R,F,O){const j=O/(1<<R.canonical.z);return new n.ca([R.canonical.x*j+R.wrap*O,R.canonical.y*j+R.wrap*O,0],[(R.canonical.x+1)*j+R.wrap*O,(R.canonical.y+1)*j+R.wrap*O,F])}(o,c,m).getCorners(),S=c/-v[2];v[0]<0?(n.a6.vec3.add(b[0],b[0],[v[0]*S,0,0]),n.a6.vec3.add(b[3],b[3],[v[0]*S,0,0])):v[0]>0&&(n.a6.vec3.add(b[1],b[1],[v[0]*S,0,0]),n.a6.vec3.add(b[2],b[2],[v[0]*S,0,0])),v[1]<0?(n.a6.vec3.add(b[0],b[0],[0,v[1]*S,0]),n.a6.vec3.add(b[1],b[1],[0,v[1]*S,0])):v[1]>0&&(n.a6.vec3.add(b[2],b[2],[0,v[1]*S,0]),n.a6.vec3.add(b[3],b[3],[0,v[1]*S,0]));const D={};return D.vertices=b,D.planes=[gl(b[1],b[0],b[4]),gl(b[2],b[1],b[5]),gl(b[3],b[2],b[6]),gl(b[0],b[3],b[7])],D}addShadowReceiver(o,c,m){this._receivers.add(o,n.ca.fromTileIdAndHeight(o,c,m))}getMaxCascadeForTile(o){const c=this._receivers.get(o);return c&&c.lastCascade?c.lastCascade:0}}function gl(p,o,c){const m=n.a6.vec3.sub([],c,o),v=n.a6.vec3.sub([],p,o),b=n.a6.vec3.cross([],m,v),S=n.a6.vec3.length(b);return S===0?[0,0,1,0]:(n.a6.vec3.scale(b,b,1/S),[b[0],b[1],b[2],-n.a6.vec3.dot(b,o)])}function du(p){const o=p.properties.get("direction"),c=n.c8(o.x,o.y,o.z);c[2]=n.ap(c[2],0,75);const m=n.cb([c[0],c[1],c[2]]);return n.a6.vec3.fromValues(m.x,m.y,m.z)}function _l(p,o,c){const m=o.properties.get("color"),v=o.properties.get("intensity"),b=o.properties.get("direction"),S=[b.x,b.y,b.z],D=c.properties.get("color"),R=c.properties.get("intensity"),F=Math.max(n.a6.vec3.dot([0,0,1],S),0),O=[0,0,0];n.a6.vec3.scale(O,D.toRenderColor(p.getLut(o.scope)).toArray01Linear().slice(0,3),R);const j=[0,0,0];return n.a6.vec3.scale(j,m.toRenderColor(p.getLut(c.scope)).toArray01Linear().slice(0,3),F*v),n.cc([O[0]>0?O[0]/(O[0]+j[0]):0,O[1]>0?O[1]/(O[1]+j[1]):0,O[2]>0?O[2]/(O[2]+j[2]):0])}function ec(p,o,c,m,v,b){const S=p.zoom,D=p.scale,R=p.worldSize,F=1/R,O=p.aspect,j=Math.sqrt(1+O*O)*Math.tan(.5*p.fovX),q=j*j,W=m-c,te=m+c;let ee,ne;q>W/te?(ee=m,ne=m*j):(ee=.5*te*(1+q),ne=.5*Math.sqrt(W*W+2*(m*m+c*c)*q+te*te*q*q));const re=p.projection.pixelsPerMeter(p.center.lat,R),ue=p._camera.getCameraToWorldMercator(),ye=[0,0,-ee*F];n.a6.vec3.transformMat4(ye,ye,ue);let ve=ne*F;const be=p._edgeInsets;if(!(be.left===0&&be.top===0&&be.right===0&&be.bottom===0||be.left===be.right&&be.top===be.bottom)){const Mt=p._camera.getWorldToCamera(p.worldSize,p.projection.zAxisUnit==="meters"?re:1),Tt=p._camera.getCameraToClipPerspective(p._fov,p.width/p.height,c,m);Tt[8]=2*-p.centerOffset.x/p.width,Tt[9]=2*p.centerOffset.y/p.height;const wt=new Float64Array(16);n.a6.mat4.mul(wt,Tt,Mt);const Gt=new Float64Array(16);n.a6.mat4.invert(Gt,wt);const ui=n.bO.fromInvProjectionMatrix(Gt,R,S,!0);for(const _i of ui.points){const ii=((Me=_i)[0]/=D,Me[1]/=D,Me[2]=n.bE(Me[2],p._center.lat),Me);ve=Math.max(ve,n.a6.vec3.len(n.a6.vec3.subtract([],ye,ii)))}}var Me;ve*=v/(v-1);const we=Math.acos(o[2]),Ee=Math.atan2(-o[0],-o[1]),ke=new Na;ke.position=ye,ke.setPitchBearing(we,Ee);const $e=ke.getWorldToCamera(R,re),Oe=ve*R,Re=Math.min(p._mercatorZfromZoom(17)*R*-2,-2*Oe),st=ke.getCameraToClipOrthographic(-Oe,Oe,-Oe,Oe,Re,(Oe+b*re)/o[2]),dt=new Float64Array(16);n.a6.mat4.multiply(dt,st,$e);const Et=n.a6.vec3.fromValues(Math.floor(1e6*ye[0])/1e6*R,Math.floor(1e6*ye[1])/1e6*R,0),Lt=.5*v,jt=[0,0,0];n.a6.vec3.transformMat4(jt,Et,dt),n.a6.vec3.scale(jt,jt,Lt);const Xe=[Math.floor(jt[0]),Math.floor(jt[1]),Math.floor(jt[2])],St=[0,0,0];n.a6.vec3.sub(St,jt,Xe),n.a6.vec3.scale(St,St,-1/Lt);const ct=new Float64Array(16);return n.a6.mat4.identity(ct),n.a6.mat4.translate(ct,ct,St),n.a6.mat4.multiply(dt,ct,dt),[dt,Oe]}class Gs extends n.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.numModelsLoading={}}loadModel(o,c){return n.aG(this.requestManager.transformRequest(c,n.R.Model).url).then(m=>{if(!m)return;const v=n.aH(m),b=new n.aI(o,void 0,void 0,v);return b.computeBoundsAndApplyParent(),b}).catch(m=>{if(m&&m.status===404)return null;this.fire(new n.t(new Error(`Could not load model ${o} from ${c}: ${m.message}`)))})}load(o,c){this.models[c]||(this.models[c]={});const m=Object.keys(o);this.numModelsLoading[c]=(this.numModelsLoading[c]||0)+m.length;const v=[];for(const b of m)v.push(this.loadModel(b,o[b]));Promise.allSettled(v).then(b=>{for(let S=0;S<b.length;S++){const{status:D,value:R}=b[S];D==="fulfilled"&&R&&(this.models[c][m[S]]={model:R,numReferences:1})}this.numModelsLoading[c]-=m.length,this.fire(new n.x("data",{dataType:"style"}))}).catch(b=>{this.fire(new n.t(new Error(`Could not load models: ${b.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,c){return!!this.getModel(o,c)}getModel(o,c){return this.models[c]||(this.models[c]={}),this.models[c][o]?this.models[c][o].model:void 0}addModel(o,c,m){this.models[m]||(this.models[m]={}),this.hasModel(o,m)&&this.models[m][o].numReferences++,this.load({[o]:this.requestManager.normalizeModelURL(c)},m)}addModels(o,c){this.models[c]||(this.models[c]={});const m={};for(const v in o)this.models[c][v]={},m[v]=this.requestManager.normalizeModelURL(o[v]);this.load(m,c)}addModelsFromBucket(o,c){this.models[c]||(this.models[c]={});const m={};for(const v of o)this.hasModel(v,c)?this.models[c][v].numReferences++:m[v]=this.requestManager.normalizeModelURL(v);this.load(m,c)}removeModel(o,c){if(this.models[c]&&this.models[c][o]&&(this.models[c][o].numReferences--,this.models[c][o].numReferences===0)){const m=this.models[c][o].model;delete this.models[c][o],m.destroy()}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,c){this.models[c]||(this.models[c]={});for(const m in this.models[c])this.models[c][m].model&&this.models[c][m].model.upload(o.context)}}const fu=new n.a0({data:new n.a1(n._.colorTheme.data)}),Lo=(p,o)=>Ge(p,o&&o.filter(c=>c.identifier!=="source.canvas")),ja=n.ar(Ut,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),yl=n.ar(Ut,["setCenter","setZoom","setBearing","setPitch"]),Wd={version:8,layers:[],sources:{}},gt={duration:300,delay:0};class It extends n.E{constructor(o,c={}){super(),this.map=o,this.scope=c.scope||"",this.globalId=null,this.fragments=[],this.importDepth=c.importDepth||0,this.importsCache=c.importsCache||new Map,this.resolvedImports=c.resolvedImports||new Set,this.transition=n.l({},gt),this._buildingIndex=new pt(this),this.crossTileSymbolIndex=new uu,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._mergedLayerSelectors=new Map,this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=c.styleChanges||new En,this.dispatcher=c.dispatcher?c.dispatcher:new n.ce(n.cf(),this),c.imageManager?this.imageManager=c.imageManager:(this.imageManager=new Jn,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=c.glyphManager?c.glyphManager:new n.cg(o._requestManager,c.localFontFamily?n.ch.all:c.localIdeographFontFamily?n.ch.ideographs:n.ch.none,c.localFontFamily||c.localIdeographFontFamily),c.modelManager?this.modelManager=c.modelManager:(this.modelManager=new Gs(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=c.configOptions?c.configOptions:new Map,this._configDependentLayers=c.configDependentLayers?c.configDependentLayers:new Set,this._config=c.config,this._initialConfig=c.initialConfig,this.dispatcher.broadcast("setReferrer",n.ci());const m=this;this._rtlTextPluginCallback=It.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(b,S)=>{if(n.cj(b),S&&S.every(D=>D))for(const D in m._sourceCaches){const R=m._sourceCaches[D],F=R.getSource().type;F!=="vector"&&F!=="geojson"||R.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const b=this.getOwnSource(v.sourceId);if(b&&b.vectorLayerIds)for(const S in this._layers){const D=this._layers[S];D.source===b.id&&this._validateLayer(D)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(n.f(o))return o;const c=n.ck(o);if(!c.startsWith("http"))try{return new URL(c,location.href).toString()}catch{return c}return c}return`json://${n.cl(JSON.stringify(o))}`}_diffStyle(o,c,m){this.globalId=this._getGlobalId(o);const v=(b,S)=>{try{S(null,this.setState(b,m))}catch(D){S(D,!1)}};if(typeof o=="string"){const b=this.map._requestManager.normalizeStyleURL(o),S=this.map._requestManager.transformRequest(b,n.R.Style);n.n(S,(D,R)=>{D?this.fire(new n.t(D)):R&&v(R,c)})}else typeof o=="object"&&v(o,c)}loadURL(o,c={}){this.fire(new n.x("dataloading",{dataType:"style"}));const m=typeof c.validate=="boolean"?c.validate:!n.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,c.accessToken),this.resolvedImports.add(o);const v=this.importsCache.get(o);if(v)return this._load(v,m);const b=this.map._requestManager.transformRequest(o,n.R.Style);this._request=n.n(b,(S,D)=>{if(this._request=null,S)this.fire(new n.t(S));else if(D)return this.importsCache.set(o,D),this._load(D,m)})}loadJSON(o,c={}){this.fire(new n.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=n.q.frame(()=>{this._request=null,this._load(o,c.validate!==!1)})}loadEmpty(){this.fire(new n.x("dataloading",{dataType:"style"})),this._load(Wd,!1)}_loadImports(o,c,m){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const v=[];for(const b of o){const S=this._createFragmentStyle(b),D=new Promise(O=>{S.once("style.import.load",O),S.once("error",O)}).then(()=>this.mergeAll());if(v.push(D),this.resolvedImports.has(b.url)){S.loadEmpty();continue}const R=b.data||this.importsCache.get(b.url);R?(S.loadJSON(R,{validate:c}),this._isInternalStyle(R)&&(S.globalId=null)):b.url?S.loadURL(b.url,{validate:c}):S.loadEmpty();const F={style:S,id:b.id,config:b.config};if(m){const O=this.fragments.findIndex(({id:j})=>j===m);this.fragments=this.fragments.slice(0,O).concat(F).concat(this.fragments.slice(O))}else this.fragments.push(F)}return Promise.allSettled(v)}getImportGlobalIds(o=this,c=new Set){for(const m of o.fragments)m.style.globalId&&c.add(m.style.globalId),this.getImportGlobalIds(m.style,c);return[...c.values()]}_createFragmentStyle(o){const c=this.scope?n.av(o.id,this.scope):o.id;let m;const v=this._initialConfig&&this._initialConfig[c];(o.config||v)&&(m=n.l({},o.config,v));const b=new It(this.map,{scope:c,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:m,configOptions:this.options,configDependentLayers:this._configDependentLayers});return b.setEventedParent(this.map,{style:b}),b}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,c){const m=o.schema;if(this._isInternalStyle(o)){const S=n.l({},Wd,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(S,c)}if(this.updateConfig(this._config,m),c&&Lo(this,co(o)))return;this._loaded=!0,this.stylesheet=n.cm(o);const v=()=>{for(const F in o.sources)this.addSource(F,o.sources[F],{validate:!1,isInitialLoad:!0});o.sprite?this._loadSprite(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(o.glyphs,this.scope);const S=si(this.stylesheet.layers);if(this._order=S.map(F=>F.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const F=this.stylesheet.lights[0];this.light=new Je(F.properties,F.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Je(this.stylesheet.light)),this._layers={};for(const F of S){const O=n.cq(F,this.scope,this._styleColorTheme.lut,this.options);O.configDependencies.size!==0&&this._configDependentLayers.add(O.fqid),O.setEventedParent(this,{layer:{id:O.id}}),this._layers[O.id]=O;const j=this.getOwnLayerSourceCache(O),q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();j&&O.canCastShadows()&&q&&(j.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const D=this.stylesheet.terrain;D&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(D,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.x("data",{dataType:"style"}));const R=this.isRootStyle();o.imports?this._loadImports(o.imports,c).then(()=>{this._reloadImports(),this.fire(new n.x(R?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.x(R?"style.load":"style.import.load")))},b=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=b,b){const S=this._evaluateColorThemeData(b);this._loadColorTheme(S).then(()=>{v()}).catch(D=>{n.w(`Couldn't load color theme from the stylesheet: ${D}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,c,m,v,b,S,D,R;const F={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(O=>{if(O.stylesheet){if(O.light!=null&&(o=O.light),O.stylesheet.lights)for(const j of O.stylesheet.lights)j.type==="ambient"&&O.ambientLight!=null&&(c=O.ambientLight),j.type==="directional"&&O.directionalLight!=null&&(m=O.directionalLight);v=this._prioritizeTerrain(v,O.terrain,O.stylesheet.terrain),O.stylesheet.fog&&O.fog!=null&&(b=O.fog),O.stylesheet.camera!=null&&(R=O.stylesheet.camera),O.stylesheet.projection!=null&&(S=O.stylesheet.projection),O.stylesheet.transition!=null&&(D=O.stylesheet.transition),F[O.scope]=O._styleColorTheme}}),this.light=o,this.ambientLight=c,this.directionalLight=m,this.fog=b,this._styleColorThemeForScope=F,v===null?delete this.terrain:this.terrain=v,this.camera=R||{"camera-projection":"perspective"},this.projection=S||{name:"mercator"},this.transition=n.l({},gt,D),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const c=m=>{for(const v of m.fragments)c(v.style);o(m)};c(this)}_prioritizeTerrain(o,c,m){const v=o&&o.drapeRenderMode===0;return m===null?c&&c.drapeRenderMode===0?c:v?o:null:c!=null&&(!o||v||c&&c.drapeRenderMode===1)?c:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(c=>{o=this._prioritizeTerrain(o,c.terrain,c.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(c=>{c.stylesheet.projection!=null&&(o=c.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},c={},m={};this.forEachFragmentStyle(v=>{for(const b in v._sourceCaches){const S=n.av(b,v.scope);o[S]=v._sourceCaches[b]}for(const b in v._otherSourceCaches){const S=n.av(b,v.scope);c[S]=v._otherSourceCaches[b]}for(const b in v._symbolSourceCaches){const S=n.av(b,v.scope);m[S]=v._symbolSourceCaches[b]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=c,this._mergedSymbolSourceCaches=m}mergeLayers(){const o={},c=[],m={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._mergedLayerSelectors.clear(),this.forEachFragmentStyle(b=>{for(const D of b._order){const R=b._layers[D];if(R.type==="slot"){const F=n.cn(D);if(o[F])continue;o[F]=[]}R.slot&&o[R.slot]?o[R.slot].push(R):c.push(R)}const{featuresets:S}=b.stylesheet||{};if(S)for(const D in S){const{selectors:R}=S[D];for(const F of R){const O=b._layers[F.layer],j=this._mergedLayerSelectors.get(O.fqid)||[];let q;if(F.properties)for(const W in F.properties){const te=n.M(F.properties[W]);te.result==="success"&&(q=q||{},q[W]=te.value)}j.push({featuresetId:D,featureNamespace:F.featureNamespace,properties:q}),this._mergedLayerSelectors.set(O.fqid,j)}}}),this._mergedOrder=[];const v=(b=[])=>{for(const S of b)if(S.type==="slot"){const D=n.cn(S.id);o[D]&&v(o[D]),this._mergedSlots.push(D)}else{const D=n.av(S.id,S.scope);this._mergedOrder.push(D),m[D]=S,S.is3D()&&(this._has3DLayers=!0),S.type==="circle"&&(this._hasCircleLayers=!0),S.type==="symbol"&&(this._hasSymbolLayers=!0),S.type==="clip"&&(this._clipLayerPresent=!0)}};v(c),this._mergedOrder.sort((b,S)=>{const D=m[b],R=m[S];return D.hasInitialOcclusionOpacityProperties?R.is3D()?1:0:D.is3D()&&R.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=m,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=n.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(c,m,v){const b=n.l({},m);for(const D of Object.keys(n._.colorTheme))b[D]===void 0&&(b[D]=n._.colorTheme[D].default);const S=new n.$(fu,c,new Map(v));return S.setTransitionOrValue(b,v),S.untransitioned().possiblyEvaluate(new n.a3(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const c=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((m,v)=>{const b="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void m();let S=o;S.startsWith(b)||(S=b+S);const D="mapbox-reserved-lut",R=new Image;R.src=S,R.onerror=()=>{this._styleColorTheme.lutLoading=!1,v(new Error("Failed to load image data"))},R.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==c)return void m();this._styleColorTheme.lutLoading=!1;const{width:F,height:O,data:j}=n.q.getImageData(R);if(O>32)return void v(new Error("The height of the image must be less than or equal to 32 pixels."));if(F!==O*O)return void v(new Error("The width of the image must be equal to the height squared."));this.getImage(D)&&this.removeImage(D),this.addImage(D,{data:new n.r({width:F,height:O},j),pixelRatio:1,sdf:!1,version:0});const q=this.imageManager.getImage(D,this.scope);q?(this._styleColorTheme.lut={image:q.data,data:o},m()):v(new Error("Missing LUT image."))}})}getLut(o){const c=this._styleColorThemeForScope[o];return c?c.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(c,m,v){let b,S,D;const R=n.q.devicePixelRatio>1?"@2x":"";let F=n.n(m.transformRequest(m.normalizeSpriteURL(c,R,".json"),n.R.SpriteJSON),(q,W)=>{F=null,D||(D=q,b=W,j())}),O=n.o(m.transformRequest(m.normalizeSpriteURL(c,R,".png"),n.R.SpriteImage),(q,W)=>{O=null,D||(D=q,S=W,j())});function j(){if(D)v(D);else if(b&&S){const q=n.q.getImageData(S),W={};for(const te in b){const{width:ee,height:ne,x:re,y:ue,sdf:ye,pixelRatio:ve,stretchX:be,stretchY:Me,content:we}=b[te],Ee=new n.r({width:ee,height:ne});n.r.copy(q,Ee,{x:re,y:ue},{x:0,y:0},{width:ee,height:ne},null),W[te]={data:Ee,pixelRatio:ve,sdf:ye,stretchX:be,stretchY:Me,content:we}}v(null,W)}}return{cancel(){F&&(F.cancel(),F=null),O&&(O.cancel(),O=null)}}}(o,this.map._requestManager,(c,m)=>{if(this._spriteRequest=null,c)this.fire(new n.t(c));else if(m)for(const v in m)this.imageManager.addImage(v,this.scope,m[v]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.x("data",{dataType:"style"}))})}_validateLayer(o){const c=this.getOwnSource(o.source);if(!c)return;const m=o.sourceLayer;m&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(m)===-1)&&this.fire(new n.t(new Error(`Source layer "${m}" does not exist on source "${c.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,c)=>{const m=this.fragments[c];return m&&m.style&&(o.data=m.style.serialize()),o})}_serializeSources(){const o={};for(const c in this._sourceCaches){const m=this._sourceCaches[c].getSource();o[m.id]||(o[m.id]=m.serialize())}return o}_serializeLayers(o){const c=[];for(const m of o){const v=this._layers[m];v&&v.type!=="custom"&&c.push(v.serialize())}return c}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const c=this.getOwnLayer(o);if(c)return c;this.fire(new n.t(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const c=this.getOwnSource(o);if(c)return c;this.fire(new n.t(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,c){const m=this.map.painter;if(m)for(let v=o.minzoom||0;v<(o.maxzoom||25.5);v++){const b=o.getProgramIds();if(b)for(const S of b){const D=o.getDefaultProgramParams(S,c.zoom,this._styleColorTheme.lut);D&&(m.style=this,this.fog&&(m._fogVisible=!0,D.overrideFog=!0,m.getOrCreateProgram(S,D)),m._fogVisible=!1,D.overrideFog=!1,m.getOrCreateProgram(S,D),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(D.overrideRtt=!0,m.getOrCreateProgram(S,D)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const c=this.calculateLightsBrightness();o.brightness=c||0,c!==this._brightness&&(this._brightness=c,this.dispatcher.broadcast("setBrightness",c));const m=this._changes.isDirty();let v=!1;if(this._changes.isDirty()){const S=this._changes.getLayerUpdatesByScope();for(const D in S){const{updatedIds:R,removedIds:F}=S[D];(R||F)&&(this._updateWorkerLayers(D,R,F),v=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this._changes.reset()}const b={};for(const S in this._mergedSourceCaches){const D=this._mergedSourceCaches[S];b[S]=D.used,D.used=!1,D.tileCoverLift=0}for(const S of this._mergedOrder){const D=this._mergedLayers[S];if(D.recalculate(o,this._availableImages),!D.isHidden(o.zoom)){const R=this.getLayerSourceCache(D);R&&(R.used=!0,R.tileCoverLift=Math.max(R.tileCoverLift,D.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(D,o)}):this.precompilePrograms(D,o))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&v&&this.mergeLayers();for(const S in b){const D=this._mergedSourceCaches[S];b[S]!==D.used&&D.getSource().fire(new n.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:D.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new n.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=this._changes.getUpdatedImages();if(o.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changes.resetUpdatedImages()}}_updateWorkerLayers(o,c,m){const v=this.getFragmentStyle(o);v&&this.dispatcher.broadcast("updateLayers",{layers:c?v._serializeLayers(c):[],scope:o,removedIds:m||[],options:v.options})}setState(o,c){if(this._checkLoaded(),Lo(this,co(o)))return!1;(o=n.cm(o)).layers=si(o.layers);const m=function(S,D){if(!S)return[{command:Ut.setStyle,args:[D]}];let R=[];try{if(!n.bi(S.version,D.version))return[{command:Ut.setStyle,args:[D]}];if(n.bi(S.center,D.center)||R.push({command:Ut.setCenter,args:[D.center]}),n.bi(S.zoom,D.zoom)||R.push({command:Ut.setZoom,args:[D.zoom]}),n.bi(S.bearing,D.bearing)||R.push({command:Ut.setBearing,args:[D.bearing]}),n.bi(S.pitch,D.pitch)||R.push({command:Ut.setPitch,args:[D.pitch]}),n.bi(S.sprite,D.sprite)||R.push({command:Ut.setSprite,args:[D.sprite]}),n.bi(S.glyphs,D.glyphs)||R.push({command:Ut.setGlyphs,args:[D.glyphs]}),n.bi(S.imports,D.imports)||function(W=[],te=[],ee){te=te||[];const ne=(W=W||[]).map(hn),re=te.map(hn),ue=W.reduce(Ht,{}),ye=te.reduce(Ht,{}),ve=ne.slice();let be,Me,we,Ee;for(be=0,Me=0;be<ne.length;be++)we=ne[be],ye.hasOwnProperty(we)?Me++:(ee.push({command:Ut.removeImport,args:[we]}),ve.splice(ve.indexOf(we,Me),1));for(be=0,Me=0;be<re.length;be++)we=re[re.length-1-be],ve[ve.length-1-be]!==we&&(ue.hasOwnProperty(we)?(ee.push({command:Ut.removeImport,args:[we]}),ve.splice(ve.lastIndexOf(we,ve.length-Me),1)):Me++,Ee=ve[ve.length-be],ee.push({command:Ut.addImport,args:[ye[we],Ee]}),ve.splice(ve.length-be,0,we));for(const ke of te){const $e=ue[ke.id];$e&&!n.bi($e,ke)&&ee.push({command:Ut.updateImport,args:[ke.id,ke]})}}(S.imports,D.imports,R),n.bi(S.transition,D.transition)||R.push({command:Ut.setTransition,args:[D.transition]}),n.bi(S.light,D.light)||R.push({command:Ut.setLight,args:[D.light]}),n.bi(S.fog,D.fog)||R.push({command:Ut.setFog,args:[D.fog]}),n.bi(S.projection,D.projection)||R.push({command:Ut.setProjection,args:[D.projection]}),n.bi(S.lights,D.lights)||R.push({command:Ut.setLights,args:[D.lights]}),n.bi(S.camera,D.camera)||R.push({command:Ut.setCamera,args:[D.camera]}),!n.bi(S["color-theme"],D["color-theme"]))return[{command:Ut.setStyle,args:[D]}];const F={},O=[];(function(W,te,ee,ne){let re;for(re in te=te||{},W=W||{})W.hasOwnProperty(re)&&(te.hasOwnProperty(re)||$t(re,ee,ne));for(re in te){if(!te.hasOwnProperty(re))continue;const ue=te[re];W.hasOwnProperty(re)?n.bi(W[re],ue)||(W[re].type==="geojson"&&ue.type==="geojson"&&ai(W,te,re)?ee.push({command:Ut.setGeoJSONSourceData,args:[re,ue.data]}):Ji(re,te,ee,ne)):mi(re,te,ee)}})(S.sources,D.sources,O,F);const j=[];S.layers&&S.layers.forEach(W=>{W.source&&F[W.source]?R.push({command:Ut.removeLayer,args:[W.id]}):j.push(W)});let q=S.terrain;q&&F[q.source]&&(R.push({command:Ut.setTerrain,args:[void 0]}),q=void 0),R=R.concat(O),n.bi(q,D.terrain)||R.push({command:Ut.setTerrain,args:[D.terrain]}),function(W,te,ee){te=te||[];const ne=(W=W||[]).map(hn),re=te.map(hn),ue=W.reduce(Ht,{}),ye=te.reduce(Ht,{}),ve=ne.slice(),be=Object.create(null);let Me,we,Ee,ke,$e,Oe,Re;for(Me=0,we=0;Me<ne.length;Me++)Ee=ne[Me],ye.hasOwnProperty(Ee)?we++:(ee.push({command:Ut.removeLayer,args:[Ee]}),ve.splice(ve.indexOf(Ee,we),1));for(Me=0,we=0;Me<re.length;Me++)Ee=re[re.length-1-Me],ve[ve.length-1-Me]!==Ee&&(ue.hasOwnProperty(Ee)?(ee.push({command:Ut.removeLayer,args:[Ee]}),ve.splice(ve.lastIndexOf(Ee,ve.length-we),1)):we++,Oe=ve[ve.length-Me],ee.push({command:Ut.addLayer,args:[ye[Ee],Oe]}),ve.splice(ve.length-Me,0,Ee),be[Ee]=!0);for(Me=0;Me<re.length;Me++)if(Ee=re[Me],ke=ue[Ee],$e=ye[Ee],!be[Ee]&&!n.bi(ke,$e))if(n.bi(ke.source,$e.source)&&n.bi(ke["source-layer"],$e["source-layer"])&&n.bi(ke.type,$e.type)){for(Re in Ki(ke.layout,$e.layout,ee,Ee,null,Ut.setLayoutProperty),Ki(ke.paint,$e.paint,ee,Ee,null,Ut.setPaintProperty),n.bi(ke.slot,$e.slot)||ee.push({command:Ut.setSlot,args:[Ee,$e.slot]}),n.bi(ke.filter,$e.filter)||ee.push({command:Ut.setFilter,args:[Ee,$e.filter]}),n.bi(ke.minzoom,$e.minzoom)&&n.bi(ke.maxzoom,$e.maxzoom)||ee.push({command:Ut.setLayerZoomRange,args:[Ee,$e.minzoom,$e.maxzoom]}),ke)ke.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&Re!=="slot"&&(Re.indexOf("paint.")===0?Ki(ke[Re],$e[Re],ee,Ee,Re.slice(6),Ut.setPaintProperty):n.bi(ke[Re],$e[Re])||ee.push({command:Ut.setLayerProperty,args:[Ee,Re,$e[Re]]}));for(Re in $e)$e.hasOwnProperty(Re)&&!ke.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&Re!=="slot"&&(Re.indexOf("paint.")===0?Ki(ke[Re],$e[Re],ee,Ee,Re.slice(6),Ut.setPaintProperty):n.bi(ke[Re],$e[Re])||ee.push({command:Ut.setLayerProperty,args:[Ee,Re,$e[Re]]}))}else ee.push({command:Ut.removeLayer,args:[Ee]}),Oe=ve[ve.lastIndexOf(Ee)+1],ee.push({command:Ut.addLayer,args:[$e,Oe]})}(j,D.layers,R)}catch{R=[{command:Ut.setStyle,args:[D]}]}return R}(this.serialize(),o).filter(S=>!(S.command in yl));if(m.length===0)return!1;const v=m.filter(S=>!(S.command in ja));if(v.length>0)throw new Error(`Unimplemented: ${v.map(S=>S.command).join(", ")}.`);const b=[];return m.forEach(S=>{b.push(this[S.command].apply(this,S.args))}),c&&Promise.all(b).then(c),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(o,c){return this.getImage(o)?this.fire(new n.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(o,this.scope,c),this._afterImageUpdated(o),this)}updateImage(o,c){this.imageManager.updateImage(o,this.scope,c)}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._afterImageUpdated(o),this):this.fire(new n.t(new Error("No image with this name exists.")))}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(o),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new n.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(o,c,m={}){return this._checkLoaded(),this._validate(je,`models.${o}`,c,null,m)||(this.modelManager.addModel(o,c,this.scope),this._changes.setDirty()),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this):this.fire(new n.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,c,m={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(io,`sources.${o}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=Ho(o,c,this.dispatcher,this);v.scope=this.scope,v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(v.id),source:v.serialize(),sourceId:v.id}));const b=S=>{const D=(S?"symbol:":"other:")+v.id,R=n.av(D,this.scope),F=this._sourceCaches[D]=new _e(R,v,S);(S?this._symbolSourceCaches:this._otherSourceCaches)[v.id]=F,F.onAdd(this.map)};b(!1),c.type!=="vector"&&c.type!=="geojson"||b(!0),v.onAdd&&v.onAdd(this.map),m.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const c=this.getOwnSource(o);if(!c)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===o)return this.fire(new n.t(new Error(`Source "${o}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new n.t(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const m=this.getOwnSourceCaches(o);for(const v of m){const b=n.cn(v.id);delete this._sourceCaches[b],this._changes.discardSourceCacheUpdate(v.id),v.fire(new n.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,c){this._checkLoaded(),this.getOwnSource(o).setData(c),this._changes.setDirty()}getOwnSource(o){const c=this.getOwnSourceCache(o);return c&&c.getSource()}getOwnSources(){const o=[];for(const c in this._otherSourceCaches){const m=this.getOwnSourceCache(c);m&&o.push(m.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const c in o){const m=o[c]._tiles;for(const v in m){const b=m[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const c=this._getTransitionParameters();for(const v of o){if(this._validate(Wl,"lights",v))return;switch(v.type){case"ambient":if(this.ambientLight){const b=this.ambientLight;b.set(v),b.updateTransitions(c)}else this.ambientLight=new zi(v,pr||(pr=new n.a0({color:new n.a1(n._.properties_light_ambient.color),intensity:new n.a1(n._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const b=this.directionalLight;b.set(v),b.updateTransitions(c)}else this.directionalLight=new zi(v,nr||(nr=new n.a0({direction:new n.ad(n._.properties_light_directional.direction),color:new n.a1(n._.properties_light_directional.color),intensity:new n.a1(n._.properties_light_directional.intensity),"cast-shadows":new n.a1(n._.properties_light_directional["cast-shadows"]),"shadow-intensity":new n.a1(n._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const m=new n.a3(this.z||0,c);this.ambientLight&&this.ambientLight.recalculate(m),this.directionalLight&&this.directionalLight.recalculate(m),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,c=this.ambientLight;if(!o||!c)return;const m=q=>.2126*(q[0]<=.03928?q[0]/12.92:Math.pow((q[0]+.055)/1.055,2.4))+.7152*(q[1]<=.03928?q[1]/12.92:Math.pow((q[1]+.055)/1.055,2.4))+.0722*(q[2]<=.03928?q[2]/12.92:Math.pow((q[2]+.055)/1.055,2.4)),v=o.properties.get("color").toRenderColor(null).toArray01(),b=o.properties.get("intensity"),S=o.properties.get("direction"),D=1-n.c8(S.x,S.y,S.z)[2]/90,R=m(v)*b*D,F=c.properties.get("color").toRenderColor(null).toArray01(),O=c.properties.get("intensity"),j=m(F)*O;return Number(((R+j)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(!o)return this;if(n.aK(o)){const c=n.co(o),m=this.fragments.find(({id:b})=>b===c);if(!m)throw new Error(`Style import '${o}' not found`);const v=n.cn(o);return m.style.getFragmentStyle(v)}{const c=this.fragments.find(({id:m})=>m===o);if(!c)throw new Error(`Style import '${o}' not found`);return c.style}}getFeaturesetDescriptors(o){const c=this.getFragmentStyle(o);if(!c||!c.stylesheet.featuresets)return[];const m=[];for(const v in c.stylesheet.featuresets)m.push({featuresetId:v,importId:c.scope?c.scope:void 0});return m}getFeaturesetLayers(o,c){const m=this.getFragmentStyle(c),v=m.stylesheet.featuresets;if(!v||!v[o])return this.fire(new n.t(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const b=[];for(const S of v[o].selectors){const D=m.getOwnLayer(S.layer);D&&b.push(D)}return b}getConfigProperty(o,c){const m=this.getFragmentStyle(o);if(!m)return null;const v=n.av(c,m.scope),b=m.options.get(v),S=b?b.value||b.default:null;return S?S.serialize():null}setConfigProperty(o,c,m){const v=this.getFragmentStyle(o);if(!v)return;const b=v.stylesheet.schema;if(!b||!b[c])return;const S=n.M(m);if(S.result!=="success")return void Lo(this,S.value);const D=S.value.expression,R=n.av(c,v.scope),F=v.options.get(R);if(!F)return;let O;const{minValue:j,maxValue:q,stepValue:W,type:te,values:ee}=b[c],ne=n.M(b[c].default);ne.result==="success"&&(O=ne.value.expression),O?(this.options.set(R,{...F,value:D,default:O,minValue:j,maxValue:q,stepValue:W,type:te,values:ee}),this.updateConfigDependencies(c)):this.fire(new n.t(new Error(`No schema defined for the config option "${c}" in the "${o}" fragment.`)))}getConfig(o){const c=this.getFragmentStyle(o);if(!c)return null;const m=c.stylesheet.schema;if(!m)return null;const v={};for(const b in m){const S=n.av(b,c.scope),D=c.options.get(S),R=D?D.value||D.default:null;v[b]=R?R.serialize():null}return v}setConfig(o,c){const m=this.getFragmentStyle(o);m&&(m.updateConfig(c,m.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const c=this.getFragmentStyle(o);return c?c.stylesheet.schema:null}setSchema(o,c){const m=this.getFragmentStyle(o);m&&(m.stylesheet.schema=c,m.updateConfig(m._config,c),this.updateConfigDependencies())}updateConfig(o,c){if(this._config=o,o||c)if(c)for(const m in c){let v,b;const S=n.M(c[m].default);if(S.result==="success"&&(v=S.value.expression),o&&o[m]!==void 0){const q=n.M(o[m]);q.result==="success"&&(b=q.value.expression)}const{minValue:D,maxValue:R,stepValue:F,type:O,values:j}=c[m];if(v){const q=n.av(m,this.scope);this.options.set(q,{default:v,value:b,minValue:D,maxValue:R,stepValue:F,type:O,values:j})}else this.fire(new n.t(new Error(`No schema defined for config option "${m}".`)))}else this.fire(new n.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const c of this._configDependentLayers){const m=this.getLayer(c);if(m){if(o&&!m.configDependencies.has(o))continue;m.possiblyEvaluateVisibility(),this._updateLayer(m)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(c=>{if(c._styleColorTheme.colorTheme){const m=c._evaluateColorThemeData(c._styleColorTheme.colorTheme);(!c._styleColorTheme.lut&&m!==""||c._styleColorTheme.lut&&m!==c._styleColorTheme.lut.data)&&c.setColorTheme(c._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(o,c,m={}){this._checkLoaded();const v=o.id;if(this._layers[v])return void this.fire(new n.t(new Error(`Layer with id "${v}" already exists on this map`)));let b;if(o.type==="custom"){if(Lo(this,n.cp(o)))return;b=n.cq(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(v,o.source),o=n.cm(o),o=n.l(o,{source:v})),this._validate(ut,`layers.${v}`,o,{arrayIndex:-1},m))return;b=n.cq(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}})}b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid);let S=this._order.length;if(c){const O=this._order.indexOf(c);if(O===-1)return void this.fire(new n.t(new Error(`Layer with id "${c}" does not exist on this map.`)));b.slot===this._layers[c].slot?S=O:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,v),this._layerOrderChanged=!0,this._layers[v]=b;const D=this.getOwnLayerSourceCache(b),R=!!this.directionalLight&&this.directionalLight.shadowsEnabled();D&&b.canCastShadows()&&R&&(D.castsShadows=!0);const F=this._changes.getRemovedLayer(b);if(F&&b.source&&D&&b.type!=="custom"){this._changes.discardLayerRemoval(b);const O=n.av(b.source,b.scope);F.type!==b.type?this._changes.updateSourceCache(O,"clear"):(this._changes.updateSourceCache(O,"reload"),D.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),b.scope=this.scope,this.mergeLayers()}moveLayer(o,c){this._checkLoaded();const m=this._checkLayer(o);if(!m||o===c)return;const v=this._order.indexOf(o);this._order.splice(v,1);let b=this._order.length;if(c){const S=this._order.indexOf(c);if(S===-1)return void this.fire(new n.t(new Error(`Layer with id "${c}" does not exist on this map.`)));m.slot===this._layers[c].slot?b=S:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(b,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const c=this._checkLayer(o);if(!c)return;c.setEventedParent(null);const m=this._order.indexOf(o);this._order.splice(m,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(c.fqid),this._changes.removeLayer(c);const v=this.getOwnLayerSourceCache(c);if(v&&v.castsShadows){let b=!1;for(const S in this._layers)if(this._layers[S].source===c.source&&this._layers[S].canCastShadows()){b=!0;break}v.castsShadows=b}c.onRemove&&c.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const c in this._layers)if(this._layers[c].type===o)return!0;return!1}setLayerZoomRange(o,c,m){this._checkLoaded();const v=this._checkLayer(o);v&&(v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,c){this._checkLoaded();const m=this._checkLayer(o);m&&m.slot!==c&&(m.slot=c,this._updateLayer(m))}setFilter(o,c,m={}){this._checkLoaded();const v=this._checkLayer(o);if(v&&!n.bi(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(oe,`layers.${v.id}.filter`,c,{layerType:v.type},m)||(v.filter=n.cm(c),this._updateLayer(v)))}getFilter(o){const c=this._checkLayer(o);if(c)return n.cm(c.filter)}setLayoutProperty(o,c,m,v={}){this._checkLoaded();const b=this._checkLayer(o);if(b&&!n.bi(b.getLayoutProperty(c),m)){if(m!=null&&(!v||v.validate!==!1)&&Lo(b,Se.call(co,{key:`layers.${o}.layout.${c}`,layerType:b.type,objectKey:c,value:m,styleSpec:n._,style:{glyphs:!0,sprite:!0}})))return;b.setLayoutProperty(c,m),b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid),this._updateLayer(b)}}getLayoutProperty(o,c){const m=this._checkLayer(o);if(m)return m.getLayoutProperty(c)}setPaintProperty(o,c,m,v={}){this._checkLoaded();const b=this._checkLayer(o);if(!b||n.bi(b.getPaintProperty(c),m)||m!=null&&(!v||v.validate!==!1)&&Lo(b,ce.call(co,{key:`layers.${o}.paint.${c}`,layerType:b.type,objectKey:c,value:m,styleSpec:n._})))return;const S=b.setPaintProperty(c,m);b.configDependencies.size!==0&&this._configDependentLayers.add(b.fqid),S&&this._updateLayer(b),this._changes.updatePaintProperties(b)}getPaintProperty(o,c){const m=this._checkLayer(o);if(m)return m.getPaintProperty(c)}setFeatureState(o,c){this._checkLoaded();const m=o.featureset;if(m){if("featuresetId"in m){const F=this.getFragmentStyle(m.importId),O=F.getFeaturesetLayers(m.featuresetId);for(const{source:j,sourceLayer:q}of O)F.setFeatureState({id:o.id,source:j,sourceLayer:q},c)}else if("layerId"in m){const F=this.getLayer(m.layerId);this.setFeatureState({id:o.id,source:F.source,sourceLayer:F.sourceLayer},c)}return}const v=o.source,b=o.sourceLayer,S=this._checkSource(v);if(!S)return;const D=S.type;if(D==="geojson"&&b)return void this.fire(new n.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(D==="vector"&&!b)return void this.fire(new n.t(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new n.t(new Error("The feature id parameter must be provided.")));const R=this.getOwnSourceCaches(v);for(const F of R)F.setFeatureState(b,o.id,c)}removeFeatureState(o,c){this._checkLoaded();const m=o.featureset;if(m){if("featuresetId"in m){const F=this.getFragmentStyle(m.importId),O=F.getFeaturesetLayers(m.featuresetId);for(const{source:j,sourceLayer:q}of O)F.removeFeatureState({id:o.id,source:j,sourceLayer:q},c)}else if("layerId"in m){const F=this.getLayer(m.layerId);this.removeFeatureState({id:o.id,source:F.source,sourceLayer:F.sourceLayer},c)}return}const v=o.source,b=this._checkSource(v);if(!b)return;const S=b.type,D=S==="vector"?o.sourceLayer:void 0;if(S==="vector"&&!D)return void this.fire(new n.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new n.t(new Error("A feature id is required to remove its specific state property.")));const R=this.getOwnSourceCaches(v);for(const F of R)F.removeFeatureState(D,o.id,c)}getFeatureState(o){this._checkLoaded();const c=o.featureset;if(c){let S;if("featuresetId"in c){const D=this.getFragmentStyle(c.importId),R=D.getFeaturesetLayers(c.featuresetId);for(const{source:F,sourceLayer:O}of R){const j=D.getFeatureState({id:o.id,source:F,sourceLayer:O});if(j&&!S)S=j;else if(!n.bi(S,j))return void this.fire(new n.t(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o){const D=this.getLayer(c.layerId);S=this.getFeatureState({id:o.id,source:D.source,sourceLayer:D.sourceLayer})}return S}const m=o.source,v=o.sourceLayer,b=this._checkSource(m);if(b){if(b.type!=="vector"||v)return o.id===void 0&&this.fire(new n.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(m)[0].getFeatureState(v,o.id);this.fire(new n.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=n.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),c=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return n.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:c,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},m=>m!==void 0)}_updateFilteredLayers(o){for(const c of Object.values(this._mergedLayers))o(c)&&this._updateLayer(c)}_updateLayer(o){this._changes.updateLayer(o);const c=this.getLayerSourceCache(o),m=n.av(o.source,o.scope),v=this._changes.getUpdatedSourceCaches();o.source&&!v[m]&&c&&c.getSource().type!=="raster"&&(this._changes.updateSourceCache(m,"reload"),c.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const c=D=>this._mergedLayers[D].is3D(),m=this.order,v={},b=[];for(let D=m.length-1;D>=0;D--){const R=m[D];if(c(R)){v[R]=D;for(const F of o){const O=F[R];if(O)for(const j of O)b.push(j)}}}b.sort((D,R)=>R.intersectionZ-D.intersectionZ);const S=[];for(let D=m.length-1;D>=0;D--){const R=m[D];if(c(R))for(let F=b.length-1;F>=0;F--){const O=b[F].feature;if(O.layer&&v[O.layer.id]<D)break;S.push(O),b.pop()}else for(const F of o){const O=F[R];if(O)for(const j of O)S.push(j.feature)}}return S}queryRenderedFeatures(o,c,m){c&&!Array.isArray(c)&&c.filter&&this._validate(oe,"queryRenderedFeatures.filter",c.filter,null,c);let v,b=!1;const S=new Set;if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new n.t(new Error("parameters.layers must be an Array."))),[];v=[];for(const O of c.layers){const j=this._mergedLayers[O];if(!j)return this.fire(new n.t(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];j.is3D()&&(b=!0),S.add(j.source),v.push(O)}}else b=this.has3DLayers();const D=this._queryRenderedFeatures(o,m,{layerIds:v,filter:c.filter,has3DLayers:b,includedSources:S}),R=this._flattenAndSortRenderedFeatures(D),F=[];for(const O of R)n.co(O.layer.id)===this.scope&&F.push(O);return F}queryRenderedFeaturesForInteractions(o,c,m){let v=[];for(const{featureset:R,filter:F,radius:O}of c){let j=!1;const q=[],W=new Set;if("featuresetId"in R){const ee=this.getFeaturesetLayers(R.featuresetId,R.importId);if(ee.length===0)continue;for(const ne of ee)ne.is3D()&&(j=!0),W.add(ne.source),q.push(ne.fqid)}else if("layerId"in R){const ee=this._mergedLayers[R.layerId];if(!ee)return this.fire(new n.t(new Error(`The layer '${R.layerId}' does not exist in the map's style and cannot be queried for features.`))),[];ee.is3D()&&(j=!0),W.add(ee.source),q.push(R.layerId)}let te=o;if(O)if(o instanceof n.P||typeof o[0]=="number"){const ee=n.P.convert(o);te=[[ee.x-O,ee.y-O],[ee.x+O,ee.y+O]]}else{const ee=n.P.convert(o[0]),ne=n.P.convert(o[1]);te=[[ee.x-O,ee.y-O],[ne.x+O,ne.y+O]]}v=v.concat(this._queryRenderedFeatures(te,m,{layerIds:q,filter:F,has3DLayers:j,includedSources:W}))}const b=this._flattenAndSortRenderedFeatures(v),S=(R,F,O)=>{const j=R.clone();if(delete j.layer,j.featureset=F,O&&O.featureNamespace&&(j.namespace=O.featureNamespace),O&&O.properties){const q={},W=this.map.transform.zoom;for(const te of Object.keys(O.properties)){const ee=O.properties[te].evaluate({zoom:W},R._vectorTileFeature,R.state,R.tile,this._availableImages);ee!=null&&(q[te]=ee)}j.properties=q}return j},D=[];for(const R of b){const F=R.layer.id,O=n.cn(F),j=n.co(F);for(const{featureset:q}of c){if("layerId"in q&&q.layerId!==F)continue;if("layerId"in q&&q.layerId===F){const te=S(R,q);D.push(te);continue}if("featuresetId"in q&&(q.importId!==j||!this.getFeaturesetLayers(q.featuresetId,q.importId).map(te=>te.id).includes(O)))continue;const W=this._mergedLayerSelectors.get(F)||[];for(const te of W){const ee=S(R,q,te);D.push(ee)}}}return D}_queryRenderedFeatures(o,c,m){const{layerIds:v,filter:b,has3DLayers:S,includedSources:D}=m,R=[],F=Vi.createFromScreenPoints(o,c);for(const O in this._mergedSourceCaches){if(!this._mergedSourceCaches[O].getSource())continue;const j=this._mergedSourceCaches[O].getSource().id;v&&!D.has(j)||R.push(ua(this._mergedSourceCaches[O],this._mergedLayers,F,b,v||[],this._availableImages,c,S,!!this.map._showQueryGeometry))}return this.placement&&R.push(function(O,j,q,W,te,ee,ne,re){const ue={},ye=ne.queryRenderedSymbols(q),ve=[];for(const be of Object.keys(ye).map(Number))ve.push(re[be]);ve.sort(ol);for(const be of ve){const Me=be.featureIndex.lookupSymbolFeatures(ye[be.bucketInstanceId],be.bucketIndex,be.sourceLayerIndex,W,te,ee,O);for(const we in Me){const Ee=ue[we]=ue[we]||[],ke=Me[we];ke.sort(($e,Oe)=>{const Re=be.featureSortOrder;if(Re){const st=Re.indexOf($e.featureIndex);return Re.indexOf(Oe.featureIndex)-st}return Oe.featureIndex-$e.featureIndex});for(const $e of ke)Ee.push($e)}}for(const be in ue)ue[be].forEach(Me=>{const we=Me.feature,Ee=O[be],ke=j(Ee);if(!ke)return;const $e=ke.getFeatureState(we.layer["source-layer"],we.id);we.state=$e,n.aK(Ee.id)||(we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]))});return ue}(this._mergedLayers,this.getLayerSourceCache.bind(this),F.screenGeometry,b,v||[],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData)),R}querySourceFeatures(o,c){const m=c&&c.filter;m&&this._validate(oe,"querySourceFeatures.filter",m,null,c);let v=[];const b=this.getOwnSourceCaches(o);for(const S of b)v=v.concat(ha(S,c));return v}addSourceType(o,c,m){return It.getSourceType(o)?m(new Error(`A source type called "${o}" already exists.`)):(It.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},m):m(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,c,m={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const D in o)if(!n.bi(o[D],v[D])){b=!0;break}if(!b)return;const S=this._getTransitionParameters();this.light.setLight(o,c,m),this.light.updateTransitions(S)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,c=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),c===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let m=o;const v=o.source==null;if(c===1){if(this.disableElevatedTerrain)return;if(typeof m.source=="object"){const D="terrain-dem-src";this.addSource(D,m.source),m=n.cm(m),m=n.l(m,{source:D})}const b=n.l({},m),S={};if(this.terrain&&v){b.source=this.terrain.get().source;const D=this.terrain?this.getFragmentStyle(this.terrain.scope):null;D&&(S.style=D.serialize())}if(this._validate(Zl,"terrain",b,S))return}if(!this.terrain||this.terrain.scope!==this.scope&&!v||this.terrain&&c!==this.terrain.drapeRenderMode){if(!m)return;this._createTerrain(m,c),this.fire(new n.x("data",{dataType:"style"}))}else{const b=this.terrain,S=b.get();for(const D of Object.keys(n._.terrain))!m.hasOwnProperty(D)&&n._.terrain[D].default&&(m[D]=n._.terrain[D].default);for(const D in o)if(!n.bi(o[D],S[D])){b.set(o,this.options),this.stylesheet.terrain=o;const R=this._getTransitionParameters({duration:0});b.updateTransitions(R),this.fire(new n.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const c=this.fog=new ki(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=c.get();const m=this._getTransitionParameters({duration:0});c.updateTransitions(m)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog;if(!n.bi(c.get(),o)){c.set(o,this.options),this.stylesheet.fog=c.get();const m=this._getTransitionParameters({duration:0});c.updateTransitions(m)}}else this._createFog(o);this._markersNeedUpdate=!0}setColorTheme(o){this._checkLoaded();const c=()=>{for(const v in this._layers)this._layers[v].lut=this._styleColorTheme.lut;for(const v in this._sourceCaches)this._sourceCaches[v].clearTiles()};if(this._styleColorTheme.colorTheme=o,!o)return this._styleColorTheme.lut=null,void c();const m=this._evaluateColorThemeData(o);this._loadColorTheme(m).then(()=>{this.fire(new n.x("colorthemeset")),c()}).catch(v=>{n.w(`Couldn't set color theme: ${v}`)})}_getTransitionParameters(o){return{now:n.q.now(),transition:n.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],c=[];for(const m of this._mergedOrder)this.isLayerDraped(this._mergedLayers[m])?o.push(m):c.push(m);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...c)}_createTerrain(o,c){const m=this.terrain=new at(o,c,this.scope,this.options);c===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const v=this._getTransitionParameters({duration:0});m.updateTransitions(v)}_force3DLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="symbol"&&this._updateLayer(c)}}_validate(o,c,m,v,b={}){if(b&&b.validate===!1)return!1;const S=n.l({},this.serialize());return Lo(this,o.call(co,n.l({key:c,style:S,value:m,styleSpec:n._},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(o){const c=this.getSourceCaches(o);for(const m of c)m.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const c=this.getSourceCaches(o);for(const m of c)m.resume(),m.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}updateSources(o){let c;this.directionalLight&&(c=du(this.directionalLight));for(const m in this._mergedSourceCaches)this._mergedSourceCaches[m].update(o,void 0,void 0,c)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const c=this._sourceCaches[o];c.resume(),c.reload()}}_updatePlacement(o,c,m,v,b,S,D=!1){let R=!1,F=!1;const O={},j={};for(const q of this._mergedOrder){const W=this._mergedLayers[q];if(W.type!=="symbol")continue;const te=n.av(W.source,W.scope);let ee=O[te];if(!ee){const re=this.getLayerSourceCache(W);if(!re)continue;const ue=re.getRenderableIds(!0).map(ye=>re.getTileByID(ye));j[te]=ue.slice(),ee=O[te]=ue.sort((ye,ve)=>ve.tileID.overscaledZ-ye.tileID.overscaledZ||(ye.tileID.isLessThan(ve.tileID)?-1:1))}const ne=this.crossTileSymbolIndex.addLayer(W,ee,c.center.lng,c.projection);R=R||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),D=D||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new n.x("neworder")),(D||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),c.zoom))&&(this.pauseablePlacement=new ul(c,this._mergedOrder,D,m,v,b,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,O,j,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),F=!0),R&&this.pauseablePlacement.placement.setStale()),F||R){this._buildingIndex.onNewFrame(c.zoom);for(let q=0;q<this._mergedOrder.length;q++){const W=this._mergedLayers[this._mergedOrder[q]];if(W.type!=="symbol")continue;const te=this.isLayerClipped(W);this.placement.updateLayerOpacities(W,O[n.av(W.source,W.scope)],q,te?S:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,c){this._checkLoaded();const m=this.stylesheet.imports=this.stylesheet.imports||[];if(m.findIndex(({id:b})=>b===o.id)!==-1)return void this.fire(new n.t(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!c)return m.push(o),this._loadImports([o],!0);const v=m.findIndex(({id:b})=>b===c);return v===-1&&this.fire(new n.t(new Error(`Import with id "${c}" does not exist on this map.`))),this.stylesheet.imports=m.slice(0,v).concat(o).concat(m.slice(v)),this._loadImports([o],!0,c)}updateImport(o,c){this._checkLoaded();const m=this.stylesheet.imports||[],v=this.getImportIndex(o);return v===-1?this:typeof c=="string"?(this.setImportUrl(o,c),this):(c.url&&c.url!==m[v].url&&this.setImportUrl(o,c.url),n.bi(c.config,m[v].config)||this.setImportConfig(o,c.config),n.bi(c.data,m[v].data)||this.setImportData(o,c.data),this)}moveImport(o,c){this._checkLoaded();let m=this.stylesheet.imports||[];const v=this.getImportIndex(o);if(v===-1)return this;const b=this.getImportIndex(c);if(b===-1)return this;const S=m[v],D=this.fragments[v];return m=m.filter(({id:R})=>R!==o),this.fragments=this.fragments.filter(({id:R})=>R!==o),this.stylesheet.imports=m.slice(0,b).concat(S).concat(m.slice(b)),this.fragments=this.fragments.slice(0,b).concat(D).concat(this.fragments.slice(b)),this.mergeLayers(),this}setImportUrl(o,c){this._checkLoaded();const m=this.stylesheet.imports||[],v=this.getImportIndex(o);if(v===-1)return this;m[v].url=c;const b=this.fragments[v];return b.style=this._createFragmentStyle(m[v]),b.style.on("style.import.load",()=>this.mergeAll()),b.style.loadURL(c),this}setImportData(o,c){this._checkLoaded();const m=this.getImportIndex(o),v=this.stylesheet.imports||[];return m===-1?this:c?(this.fragments[m].style.setState(c),this._reloadImports(),this):(delete v[m].data,this.setImportUrl(o,v[m].url))}setImportConfig(o,c){this._checkLoaded();const m=this.getImportIndex(o),v=this.stylesheet.imports||[];if(m===-1)return this;c?v[m].config=c:delete v[m].config;const b=this.fragments[m],S=b.style.stylesheet&&b.style.stylesheet.schema;return b.config=c,b.style.updateConfig(c,S),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const c=this.stylesheet.imports||[],m=this.getImportIndex(o);m!==-1&&(c.splice(m,1),this.fragments[m].style._remove(),this.fragments.splice(m,1),this._reloadImports())}getImportIndex(o){const c=(this.stylesheet.imports||[]).findIndex(m=>m.id===o);return c===-1&&this.fire(new n.t(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),c}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const c in this._mergedOtherSourceCaches){const m=this._mergedOtherSourceCaches[c];m&&o.push(m.getSource())}return o}getSource(o,c){const m=this.getSourceCache(o,c);return m&&m.getSource()}getLayerSource(o){const c=this.getLayerSourceCache(o);return c&&c.getSource()}getSourceCache(o,c){const m=n.av(o,c);return this._mergedOtherSourceCaches[m]}getLayerSourceCache(o){const c=n.av(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[c]:this._mergedOtherSourceCaches[c]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const c=[];return this._mergedOtherSourceCaches[o]&&c.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&c.push(this._mergedSymbolSourceCaches[o]),c}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const c in o){const m=o[c];m==="reload"?this.reloadSource(c):m==="clear"&&this.clearSource(c)}}updateLayers(o){const c=this._changes.getUpdatedPaintProperties();for(const m of c){const v=this.getLayer(m);v&&v.updateTransitions(o)}}getImages(o,c,m){this.imageManager.getImages(c.icons,c.scope,m),this._updateTilesForChangedImages();const v=b=>{b&&b.setDependencies(c.tileID.key,c.type,c.icons)};v(this._otherSourceCaches[c.source]),v(this._symbolSourceCaches[c.source])}getGlyphs(o,c,m){this.glyphManager.getGlyphs(c.stacks,c.scope,m)}getResource(o,c,m){return n.ct(c,m)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const c=[];return this._otherSourceCaches[o]&&c.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&c.push(this._symbolSourceCaches[o]),c}_isSourceCacheLoaded(o){const c=this.getOwnSourceCaches(o);return c.length===0?(this.fire(new n.t(new Error(`There is no source with ID '${o}'`))),!1):c.every(m=>m.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,c){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const m=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D()){if(m||c&&c.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}It.getSourceType=function(p){return Ms[p]},It.setSourceType=function(p,o){Ms[p]=o},It.registerForPluginStateChange=n.cd;var fi=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Bi=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,an=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,vr="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",wn=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Pn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,as=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Nn=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,kn=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,As=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Wo=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Kn=[];ga(fi,Kn),ga(an,Kn),ga(Bi,Kn);const Zo={"_prelude_fog.vertex.glsl":Pn,"_prelude_terrain.vertex.glsl":wn,"_prelude_shadow.vertex.glsl":As,"_prelude_fog.fragment.glsl":as,"_prelude_shadow.fragment.glsl":Wo,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Nn,"_prelude_raster_particle.glsl":kn},Is={};er("",wn),er(as,Pn),er(Wo,As),er(Nn,""),er(kn,"");const Ua=er(Bi,an),ma=fi;var ls={background:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:er("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:er(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:er("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:er("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:er("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:er(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:er(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:er(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:er(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:er("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:er("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:er(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:er(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:er("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:er(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,vr),skyboxGradient:er(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,vr),skyboxCapture:er(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:er(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:er(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:er(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:er(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:er("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:er("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),occlusion:er("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function ga(p,o){const c=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let m of c)if(m=m.trim(),m[0]==="#"&&m.includes("if")&&!m.includes("endif")){m=m.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=m.split(" ");for(const b of v)o.includes(b)||o.push(b)}}function er(p,o){const c=/#include\s+"([^"]+)"/g,m=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let v=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);v&&(v=v.map(F=>{const O=F.split(" ");return O[O.length-1]}),v=[...new Set(v)]);const b={},S=[],D=[];if(p=p.replace(c,(F,O)=>(D.push(O),"")),(o=o.replace(c,(F,O)=>(S.push(O),""))).includes("flat out"))return;let R=[...Kn];ga(p,R),ga(o,R);for(const F of[...S,...D])Zo[F],Is[F]||(Is[F]=[],ga(Zo[F],Is[F])),R=[...R,...Is[F]];return{fragmentSource:p=p.replace(m,(F,O,j,q,W)=>(b[W]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${W}
in ${j} ${q} ${W};
#else
uniform ${j} ${q} u_${W};
#endif
`:O==="initialize"?`
#ifdef HAS_UNIFORM_u_${W}
    ${j} ${q} ${W} = u_${W};
#endif
`:O==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${W}
    in ${j} ${q} ${W};
#endif
`:O==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(m,(F,O,j,q,W)=>{const te=q==="float"?"vec2":q,ee=W.match(/color/)?"color":te;return O==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${W}
in ${j} ${q} a_${W};
#endif
`:b[W]?O==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${j} ${te} a_${W};
out ${j} ${q} ${W};
#else
uniform ${j} ${q} u_${W};
#endif
`:O==="initialize"?ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${j} ${q} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ee}(a_${W}, u_${W}_t);
#else
    ${j} ${q} ${W} = u_${W};
#endif
`:O==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${W}
    in ${j} ${q} a_${W};
    out ${j} ${q} ${W};
#endif
`:O==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${W}
    ${W} = a_${W};
#endif
`:void 0:O==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${j} ${te} a_${W};
#else
uniform ${j} ${q} u_${W};
#endif
`:O==="define-instanced"?ee==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${W}0;
in vec4 a_${W}1;
in vec4 a_${W}2;
in vec4 a_${W}3;
#else
uniform ${j} ${q} u_${W};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${j} ${te} a_${W};
#else
uniform ${j} ${q} u_${W};
#endif
`:O==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${W}
    ${j} ${q} ${W} = a_${W};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${j} ${q} ${W} = a_${W};
#else
    ${j} ${q} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${j} ${q} ${W} = unpack_mix_${ee}(a_${W}, u_${W}_t);
#else
    ${j} ${q} ${W} = u_${W};
#endif
`}),staticAttributes:v,usedDefines:R,vertexIncludes:S,fragmentIncludes:D}}class tc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,c,m,v,b,S,D,R){this.context=o;let F=this.boundPaintVertexBuffers.length!==v.length;for(let j=0;!F&&j<v.length;j++)this.boundPaintVertexBuffers[j]!==v[j]&&(F=!0);let O=this.boundDynamicVertexBuffers.length!==D.length;for(let j=0;!O&&j<D.length;j++)this.boundDynamicVertexBuffers[j]!==D[j]&&(O=!0);if(!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||F||O||this.boundIndexBuffer!==b||this.boundVertexOffset!==S)this.freshBind(c,m,v,b,S,D,R);else{o.bindVertexArrayOES.set(this.vao);for(const j of D)j&&(j.bind(),R&&j.instanceCount&&j.setVertexAttribDivisor(o.gl,c,R));b&&b.dynamicDraw&&b.bind()}}freshBind(o,c,m,v,b,S,D){const R=o.numAttributes,F=this.context,O=F.gl;this.vao&&this.destroy(),this.vao=F.gl.createVertexArray(),F.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=S,c.enableAttributes(O,o),c.bind(),c.setVertexAttribPointers(O,o,b);for(const j of m)j.enableAttributes(O,o),j.bind(),j.setVertexAttribPointers(O,o,b);for(const j of S)j&&(j.enableAttributes(O,o),j.bind(),j.setVertexAttribPointers(O,o,b),D&&j.instanceCount&&j.setVertexAttribDivisor(O,o,D));v&&v.bind(),F.currentNumAttributes=R}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function qr(p,o){const c=Math.pow(2,o.canonical.z),m=o.canonical.y;return[new n.a5(0,m/c).toLngLat().lat,new n.a5(0,(m+1)/c).toLngLat().lat]}function $r(p,o,c,m,v,b,S){const D=p.context,R=D.gl,F=c.hillshadeFBO;if(!F)return;p.prepareDrawTile();const O=p.isTileAffectedByFog(o),j=p.getOrCreateProgram("hillshade",{overrideFog:O});D.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,F.colorAttachment.get());const q=((ne,re,ue,ye)=>{const ve=ue.paint.get("hillshade-shadow-color"),be=ue.paint.get("hillshade-highlight-color"),Me=ue.paint.get("hillshade-accent-color"),we=ue.paint.get("hillshade-emissive-strength");let Ee=n.bC(ue.paint.get("hillshade-illumination-direction"));if(ue.paint.get("hillshade-illumination-anchor")==="viewport")Ee-=ne.transform.angle;else if(ne.style&&ne.style.enable3dLights()&&ne.style.directionalLight){const $e=ne.style.directionalLight.properties.get("direction"),Oe=n.c8($e.x,$e.y,$e.z);Ee=n.bC(Oe[1])}const ke=!ne.options.moving;return{u_matrix:ye||ne.transform.calculateProjMatrix(re.tileID.toUnwrapped(),ke),u_image:0,u_latrange:qr(0,re.tileID),u_light:[ue.paint.get("hillshade-exaggeration"),Ee],u_shadow:ve.toRenderColor(ue.lut),u_highlight:be.toRenderColor(ue.lut),u_emissive_strength:we,u_accent:Me.toRenderColor(ue.lut)}})(p,c,m,p.terrain?o.projMatrix:null);p.uploadCommonUniforms(D,j,o.toUnwrapped());const{tileBoundsBuffer:W,tileBoundsIndexBuffer:te,tileBoundsSegments:ee}=p.getTileBoundsBuffers(c);j.draw(p,R.TRIANGLES,v,b,S,Si.disabled,q,m.id,W,te,ee)}function Va(p,o,c){if(!o.needsDEMTextureUpload)return;const m=p.context,v=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||p.getTileTexture(c.stride);const b=c.getPixels();o.demTexture?o.demTexture.update(b,{premultiply:!1}):o.demTexture=new n.T(m,b,v.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function Xo(p,o,c){const m=p.context,v=m.gl;if(!o.dem)return;const b=o.dem;if(m.activeTexture.set(v.TEXTURE1),Va(p,o,b),!o.demTexture)return;o.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);const S=b.dim;m.activeTexture.set(v.TEXTURE0);let D=o.hillshadeFBO;if(!D){const q=new n.T(m,{width:S,height:S,data:null},v.RGBA8);q.bind(v.LINEAR,v.CLAMP_TO_EDGE),D=o.hillshadeFBO=m.createFramebuffer(S,S,!0,"renderbuffer"),D.colorAttachment.set(q.texture)}m.bindFramebuffer.set(D.framebuffer),m.viewport.set([0,0,S,S]);const{tileBoundsBuffer:R,tileBoundsIndexBuffer:F,tileBoundsSegments:O}=p.getMercatorTileBoundsBuffers(),j=[];p.linearFloatFilteringSupported()&&j.push("TERRAIN_DEM_FLOAT_FORMAT"),p.getOrCreateProgram("hillshadePrepare",{defines:j}).draw(p,v.TRIANGLES,gi.disabled,Ei.disabled,qi.unblended,Si.disabled,((q,W)=>{const te=W.stride,ee=n.a6.mat4.create();return n.a6.mat4.ortho(ee,0,n.ab,-n.ab,0,0,1),n.a6.mat4.translate(ee,ee,[0,-n.ab,0]),{u_matrix:ee,u_image:1,u_dimension:[te,te],u_zoom:q.overscaledZ}})(o.tileID,b),c.id,R,F,O),o.needsHillshadePrepare=!1}class Ar{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Oo extends Ar{getDefault(){return n.bA.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Ws extends Ar{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class Zs extends Ar{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class qa extends Ar{getDefault(){return[!0,!0,!0,!0]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ha extends Ar{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class vl extends Ar{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Ga extends Ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Ih extends Ar{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class _a extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class pu extends Ar{getDefault(){return[0,1]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class mu extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class gu extends Ar{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Zd extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class ic extends Ar{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class rc extends Ar{getDefault(){return n.bA.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class sp extends Ar{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class ap extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class ag extends Ar{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class lg extends Ar{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let yv=class extends Ar{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class zh extends Ar{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Dh extends Ar{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class cg extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class zs extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class lp extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Xd extends Ar{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Yd extends Ar{getDefault(){return null}set(o){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class cp extends Ar{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class up extends Ar{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Jd extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class hp extends Ar{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Ph extends Ar{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class Kd extends Ph{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class dp extends Ph{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ug extends Ph{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,this.attachment(),c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class _u extends dp{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const vv=(p,o,c)=>({u_matrix:p,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:c}),hg=(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(m),u_merc_matrix:c,u_zoom_transition:v,u_merc_center:b,u_image0:0,u_frustum_tl:S,u_frustum_tr:D,u_frustum_br:R,u_frustum_bl:F,u_globe_pos:O,u_globe_radius:j,u_viewport:q,u_grid_matrix:ee?Float32Array.from(ee):new Float32Array(9),u_skirt_height:W,u_far_z_cutoff:te});function dg(p,o){return p!=null&&o!=null&&!(!p.hasData()||!o.hasData())&&p.demTexture!=null&&o.demTexture!=null&&p.tileID.key!==o.tileID.key}const yu=new class{constructor(){this.operations={}}newMorphing(p,o,c,m,v){if(p in this.operations){const b=this.operations[p];b.to.tileID.key!==c.tileID.key&&(b.queued=c)}else this.operations[p]={startTime:m,phase:0,duration:v,from:o,to:c,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const o=this.operations[p];return{from:o.from,to:o.to,phase:o.phase}}update(p){for(const o in this.operations){const c=this.operations[o];for(c.phase=(p-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,p)){delete this.operations[o];break}}}_nextOp(p,o){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=o,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},fg={0:null,1:"TERRAIN_VERTEX_MORPHING"};function pg(p,o,c){if(o===0)return 0;const m=o<1&&c===514?.25/o:1;return 6*Math.pow(1.5,22-p)*Math.max(o,1)*m}function fp(p,o){const c=1<<p.z;return!o&&(p.x===0||p.x===c-1)||p.y===0||p.y===c-1}const kh=p=>({u_matrix:p});function Qd(p,o,c,m,v){if(v>0){const b=n.q.now(),S=(b-p.timeAdded)/v,D=o?(b-o.timeAdded)/v:-1,R=c.getSource(),F=m.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),O=!o||Math.abs(o.tileID.overscaledZ-F)>Math.abs(p.tileID.overscaledZ-F),j=O&&p.refreshedUponExpiration?1:n.ap(O?S:1-D,0,1);return p.refreshedUponExpiration&&S>=1&&(p.refreshedUponExpiration=!1),o?{opacity:1,mix:1-j}:{opacity:j,mix:0}}return{opacity:1,mix:0}}class vu extends _e{constructor(o){const c={type:"raster-dem",maxzoom:o.transform.maxZoom},m=new n.ce(n.cf(),null),v=Ho("mock-dem",c,m,o.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,c){o.state="loaded",c(null)}}class mg extends _e{constructor(o){const c=Ho("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new n.ce(n.cf(),null),o.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,c,m){if(o.freezeTileCoverage)return;this.transform=o;const v=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,S)=>{if(b[S.key]="",!this._tiles[S.key]){const D=new $s(S,this._source.tileSize*S.overscaleFactor(),o.tileZoom);D.state="loaded",this._tiles[S.key]=D}return b},{});for(const b in this._tiles)b in v||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(o){const c=this.proxyCachedFBO[o];if(c!==void 0){const m=Object.values(c);this.renderCachePool.push(...m),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class pp extends n.aA{constructor(o,c,m){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=c,this.projMatrix=m}}class mp extends n.cE{constructor(o,c){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,v,b]=function(R){const F=new n.a$,O=new n.aP,j=131;F.reserve(17161),O.reserve(33800);const q=n.ab/128,W=n.ab+q/2,te=W+q;for(let ne=-q;ne<te;ne+=q)for(let re=-q;re<te;re+=q){const ue=re<0||re>W||ne<0||ne>W?24575:0,ye=n.ap(Math.round(re),0,n.ab),ve=n.ap(Math.round(ne),0,n.ab);F.emplaceBack(ye+ue,ve)}const ee=(ne,re)=>{const ue=re*j+ne;O.emplaceBack(ue+1,ue,ue+j),O.emplaceBack(ue+j,ue+j+1,ue+1)};for(let ne=1;ne<129;ne++)for(let re=1;re<129;re++)ee(re,ne);return[0,129].forEach(ne=>{for(let re=0;re<130;re++)ee(re,ne),ee(ne,re)}),[F,O,32768]}(),S=o.context;this.gridBuffer=S.createVertexBuffer(m,n.b1.members),this.gridIndexBuffer=S.createIndexBuffer(v),this.gridSegments=n.b2.simpleSegment(0,0,m.length,v.length),this.gridNoSkirtSegments=n.b2.simpleSegment(0,0,m.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new mg(c.map),this.orthoMatrix=n.a6.mat4.create(),n.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ab,0,n.ab,0,1);const D=S.gl;this._overlapStencilMode=new Ei({func:D.GEQUAL,mask:255},0,255,D.KEEP,D.KEEP,D.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new vu(c.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,c,m){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const v=o.terrain.properties,b=o.terrain.drapeRenderMode===0,S=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const D=o.terrain&&o.terrain.scope,R=v.get("source"),F=b?this._mockSourceCache:o.getSourceCache(R,D);if(!F)return void n.w(`Couldn't find terrain source "${R}".`);if(this.sourceCache=F,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=S?this.calculateExaggeration(c):v.get("exaggeration"),!c.projection.requiresDraping&&S&&this._exaggeration===0)return void this._disable();this.enabled=!0;const O=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const j=this.getScaledDemTileSize();this.sourceCache.update(c,j,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,O(),this._initializing=!0),O(),c.updateElevation(!0,m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0,this._previousZoom=c.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const c=this._previousCameraAltitude,m=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=m;const v=c!=null?m-c:Number.MAX_VALUE;if(Math.abs(v)<2)return this._exaggeration;const b=o.zoom,S=this._style.terrain;if(!this._previousUpdateTimestamp)return S.getExaggeration(b);let D=b-this._previousZoom;const R=this._previousUpdateTimestamp;let F=b;this._evaluationZoom!=null&&(F=this._evaluationZoom,Math.abs(b-F)>.5&&(D=.5*(b-F+D)),D*v<0&&(F+=D)),this._evaluationZoom=F;const O=S.getExaggeration(F),j=O===S.getExaggeration(Math.max(0,F-.1));if(j&&Math.abs(O-this._exaggeration)<.01)return O;let q=Math.min(.1,.00375*(this._updateTimestamp-R));return(j||O<.1||Math.abs(D)<1e-4)&&(q=Math.min(.2,4*q)),n.aa(this._exaggeration,O,q)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=m._centerAltitude===0&&this.getAtPointOrZero(n.a5.fromLngLat(m.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=c.getIds().map(R=>{const F=c.getTileByID(R).tileID;return F.projMatrix=m.calculateProjMatrix(F.toUnwrapped()),F});(function(R,F){const O=F.transform.pointCoordinate(F.transform.getCameraPoint()),j=new n.P(O.x,O.y);R.sort((q,W)=>{if(W.overscaledZ-q.overscaledZ)return W.overscaledZ-q.overscaledZ;const te=new n.P(q.canonical.x+(1<<q.canonical.z)*q.wrap,q.canonical.y),ee=new n.P(W.canonical.x+(1<<W.canonical.z)*W.wrap,W.canonical.y),ne=j.mult(1<<q.canonical.z);return ne.x-=.5,ne.y-=.5,ne.distSqr(te)-ne.distSqr(ee)})})(v,this.painter);const b=this.proxyToSource||{};this.proxyToSource={},v.forEach(R=>{this.proxyToSource[R.key]={}}),this.terrainTileForTile={};const S=this._style._mergedSourceCaches;for(const R in S){const F=S[R];if(!F.used||(F!==this.sourceCache&&this.resetTileLookupCache(F.id),this._setupProxiedCoordsForOrtho(F,o[R],b),F.usedForTerrain))continue;const O=o[R];F.getSource().reparseOverscaled&&this._assignTerrainTiles(O)}this.proxiedCoords[c.id]=v.map(R=>new pp(R,R.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1;const D={};this._visibleDemTiles=[];for(const R of this.proxyCoords){const F=this.terrainTileForTile[R.key];if(!F)continue;const O=F.tileID.key;O in D||(this._visibleDemTiles.push(F),D[O]=O)}}_assignTerrainTiles(o){this._initializing||o.forEach(c=>{if(this.terrainTileForTile[c.key])return;const m=this._findTileCoveringTileID(c,this.sourceCache);m&&(this.terrainTileForTile[c.key]=m)})}_prepareDEMTextures(){const o=this.painter.context,c=o.gl;for(const m in this.terrainTileForTile){const v=this.terrainTileForTile[m],b=v.dem;!b||v.demTexture&&!v.needsDEMTextureUpload||(o.activeTexture.set(c.TEXTURE1),Va(this.painter,v,b))}}_prepareDemTileUniforms(o,c,m,v){if(!c||c.demTexture==null)return!1;const b=o.tileID.canonical,S=Math.pow(2,c.tileID.canonical.z-b.z),D=v||"";return m[`u_dem_tl${D}`]=[b.x*S%1,b.y*S%1],m[`u_dem_scale${D}`]=S,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const c=this._visibleDemTiles.reduce((m,v)=>{if(!v.dem)return m;const b=v.dem.tree.minimums[0];return b>0&&o++,m+b},0);return o?c/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,c=o.gl;o.activeTexture.set(c.TEXTURE2);const m=this._getLoadedAreaMinimum(),v=new n.cF({width:1,height:1},new Float32Array([m]));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(v,{premultiply:!1}):b=this._emptyDEMTexture=new n.T(o,v,c.R32F,{premultiply:!1}),b}setupElevationDraw(o,c,m){const v=this.painter.context,b=v.gl,S={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};S.u_exaggeration=this.exaggeration();let D=null,R=null,F=1;if(m&&m.morphing&&this._useVertexMorphing){const W=m.morphing.srcDemTile,te=m.morphing.dstDemTile;F=m.morphing.phase,W&&te&&(this._prepareDemTileUniforms(o,W,S,"_prev")&&(R=W),this._prepareDemTileUniforms(o,te,S)&&(D=te))}const O=W=>W&&W.demTexture&&this.painter.linearFloatFilteringSupported()?b.LINEAR:b.NEAREST;let j=null;var q;if(this.enabled?R&&D?(j=D.demTexture,v.activeTexture.set(b.TEXTURE4),R.demTexture.bind(O(R),b.CLAMP_TO_EDGE),S.u_dem_lerp=F):(D=this.terrainTileForTile[o.tileID.key],j=this._prepareDemTileUniforms(o,D,S)?D.demTexture:this.emptyDEMTexture):j=this.emptyDEMTexture,v.activeTexture.set(b.TEXTURE2),j&&(S.u_dem_size=(q=j).size[0]===1?1:q.size[0]-2,j.bind(O(D),b.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(m&&m.useDepthForOcclusion,c,S),m&&m.useMeterToDem&&D){const W=(1<<D.tileID.canonical.z)*n.bE(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;S.u_meter_to_dem=W}if(m&&m.labelPlaneMatrixInv&&(S.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),c.setTerrainUniformValues(v,S),this.painter.transform.projection.name==="globe"){const W=this.globeUniformValues(this.painter.transform,o.tileID.canonical,m&&m.useDenormalizedUpVectorScale);c.setGlobeUniformValues(v,W)}}globeUniformValues(o,c,m){const v=o.projection;return{u_tile_tl_up:v.upVector(c,0,0),u_tile_tr_up:v.upVector(c,n.ab,0),u_tile_br_up:v.upVector(c,n.ab,n.ab),u_tile_bl_up:v.upVector(c,0,n.ab),u_tile_up_scale:m?n.cG(1):v.upVectorScale(c,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const c=this.painter,m=this.painter.context;o.length!==0&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,b,S,D,R){if(v.transform.projection.name==="globe")(function(F,O,j,q,W){const te=F.context,ee=te.gl;let ne,re;const ue=F.transform,ye=n.cx(F,te,ue),ve=(st,dt)=>{if(re===dt)return;const Et=[fg[dt],"PROJECTION_GLOBE_VIEW"];ye&&Et.push("CUSTOM_ANTIALIASING");const Lt=F.isTileAffectedByFog(st);ne=F.getOrCreateProgram("globeRaster",{defines:Et,overrideFog:Lt}),re=dt},be=F.colorModeForRenderPass(),Me=new gi(ee.LEQUAL,gi.ReadWrite,F.depthRangeFor3D);yu.update(W);const we=n.cy(ue),Ee=[n.am(ue.center.lng),n.at(ue.center.lat)],ke=F.globeSharedBuffers,$e=[ue.width*n.q.devicePixelRatio,ue.height*n.q.devicePixelRatio],Oe=Float32Array.from(ue.globeMatrix),Re={useDenormalizedUpVectorScale:!0};{const st=F.transform,dt=pg(st.zoom,O.exaggeration(),O.sourceCache._source.tileSize);re=-1;const Et=ee.TRIANGLES;for(const Lt of q){const jt=j.getTile(Lt),Xe=Ei.disabled,St=O.prevTerrainTileForTile[Lt.key],ct=O.terrainTileForTile[Lt.key];dg(St,ct)&&yu.newMorphing(Lt.key,St,ct,W,250),te.activeTexture.set(ee.TEXTURE0),jt.texture&&jt.texture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const Mt=yu.getMorphValuesForProxy(Lt.key),Tt=Mt?1:0;Mt&&n.C(Re,{morphing:{srcDemTile:Mt.from,dstDemTile:Mt.to,phase:n.cw(Mt.phase)}});const wt=n.cz(Lt.canonical),Gt=n.cA(wt.getCenter().lat),ui=n.cB(Lt.canonical,wt,Gt,st.worldSize/st._pixelsPerMercatorPixel),_i=n.b6(n.cC(Lt.canonical)),ii=hg(st.expandedFarZProjMatrix,Oe,we,_i,n.a9(st.zoom),Ee,st.frustumCorners.TL,st.frustumCorners.TR,st.frustumCorners.BR,st.frustumCorners.BL,st.globeCenterInViewSpace,st.globeRadius,$e,dt,st._farZ,ui);if(ve(Lt,Tt),ne&&(O.setupElevationDraw(jt,ne,Re),F.uploadCommonUniforms(te,ne,Lt.toUnwrapped()),ke)){const[vi,Yt,Mi]=ke.getGridBuffers(Gt,dt!==0);ne.draw(F,Et,Me,Xe,be,Si.backCCW,ii,"globe_raster",vi,Yt,Mi)}}}if(ke&&(F.renderDefaultNorthPole||F.renderDefaultSouthPole)){const st=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ye&&st.push("CUSTOM_ANTIALIASING"),ne=F.getOrCreateProgram("globeRaster",{defines:st});for(const dt of q){const{x:Et,y:Lt,z:jt}=dt.canonical,Xe=Lt===0,St=Lt===(1<<jt)-1,[ct,Mt,Tt,wt]=ke.getPoleBuffers(jt,!1);if(wt&&(Xe||St)){const Gt=j.getTile(dt);te.activeTexture.set(ee.TEXTURE0),Gt.texture&&Gt.texture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);let ui=n.cD(jt,Et,ue);const _i=n.b6(n.cC(dt.canonical)),ii=(vi,Yt)=>vi.draw(F,ee.TRIANGLES,Me,Ei.disabled,be,Si.disabled,hg(ue.expandedFarZProjMatrix,ui,ui,_i,0,Ee,ue.frustumCorners.TL,ue.frustumCorners.TR,ue.frustumCorners.BR,ue.frustumCorners.BL,ue.globeCenterInViewSpace,ue.globeRadius,$e,0,ue._farZ),"globe_pole_raster",Yt,Tt,wt);O.setupElevationDraw(Gt,ne,Re),F.uploadCommonUniforms(te,ne,dt.toUnwrapped()),Xe&&F.renderDefaultNorthPole&&ii(ne,ct),St&&F.renderDefaultSouthPole&&(ui=n.a6.mat4.scale(n.a6.mat4.create(),ui,[1,-1,1]),ii(ne,Mt))}}}})(v,b,S,D,R);else{const F=v.context,O=F.gl;let j,q;const W=v.shadowRenderer,te=Ro(v,v.longestCutoffRange),ee=be=>{if(q===be)return;const Me=[];Me.push(fg[be]),te.shouldRenderCutoff&&Me.push("RENDER_CUTOFF"),W&&(Me.push("RENDER_SHADOWS","DEPTH_TEXTURE"),W.useNormalOffset&&Me.push("NORMAL_OFFSET")),j=v.getOrCreateProgram("terrainRaster",{defines:Me}),q=be},ne=v.colorModeForRenderPass(),re=new gi(O.LEQUAL,gi.ReadWrite,v.depthRangeFor3D);yu.update(R);const ue=v.transform,ye=pg(ue.zoom,b.exaggeration(),b.sourceCache._source.tileSize);let ve=[0,0,0];if(W){const be=v.style.directionalLight,Me=v.style.ambientLight;be&&Me&&(ve=_l(v.style,be,Me))}{q=-1;const be=O.TRIANGLES,[Me,we]=[b.gridIndexBuffer,b.gridSegments];for(const Ee of D){const ke=S.getTile(Ee),$e=Ei.disabled,Oe=b.prevTerrainTileForTile[Ee.key],Re=b.terrainTileForTile[Ee.key];dg(Oe,Re)&&yu.newMorphing(Ee.key,Oe,Re,R,250),F.activeTexture.set(O.TEXTURE0),ke.texture&&ke.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE);const st=yu.getMorphValuesForProxy(Ee.key),dt=st?1:0;let Et;st&&(Et={morphing:{srcDemTile:st.from,dstDemTile:st.to,phase:n.cw(st.phase)}});const Lt=vv(Ee.projMatrix,fp(Ee.canonical,ue.renderWorldCopies)?ye/10:ye,ve);if(ee(dt),!j)continue;b.setupElevationDraw(ke,j,Et);const jt=Ee.toUnwrapped();W&&W.setupShadows(jt,j),v.uploadCommonUniforms(F,j,jt,null,te),j.draw(v,be,re,$e,ne,Si.backCCW,Lt,"terrain_raster",b.gridBuffer,Me,we)}}}}(c,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const c=this.painter,m=this.painter.context,v=this.proxySourceCache,b=this.proxiedCoords[v.id],S=this._drapedRenderBatches.shift(),D=c.style.order,R=[];let F=0;for(const O of b){const j=v.getTileByID(O.proxyTileKey),q=v.proxyCachedFBO[O.key]?v.proxyCachedFBO[O.key][o]:void 0,W=q!==void 0?v.renderCache[q]:this.pool[F++],te=q!==void 0;if(j.texture=W.tex,te&&!W.dirty){R.push(j.tileID);continue}let ee;m.bindFramebuffer.set(W.fb.framebuffer),this.renderedToTile=!1,W.dirty&&(m.clear({color:n.bA.transparent,stencil:0}),W.dirty=!1);for(let ne=S.start;ne<=S.end;++ne){const re=c.style._mergedLayers[D[ne]];if(re.isHidden(c.transform.zoom))continue;const ue=c.style.getLayerSourceCache(re),ye=ue?this.proxyToSource[O.key][ue.id]:[O];if(!ye)continue;const ve=ye;m.viewport.set([0,0,W.fb.width,W.fb.height]),ee!==(ue?ue.id:null)&&(this._setupStencil(W,ye,re,ue),ee=ue?ue.id:null),c.renderLayer(c,ue,re,ve)}if(this._drapedRenderBatches.length===0)for(const ne of this._pendingGroundEffectLayers){const re=c.style._mergedLayers[D[ne]];if(re.isHidden(c.transform.zoom))continue;const ue=c.style.getLayerSourceCache(re),ye=ue?this.proxyToSource[O.key][ue.id]:[O];if(!ye)continue;const ve=ye;m.viewport.set([0,0,W.fb.width,W.fb.height]),ee!==(ue?ue.id:null)&&(this._setupStencil(W,ye,re,ue),ee=ue?ue.id:null),c.renderLayer(c,ue,re,ve)}this.renderedToTile?(W.dirty=!0,R.push(j.tileID)):te||--F,F===5&&(F=0,this.renderToBackBuffer(R))}return this.renderToBackBuffer(R),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),S.end+1}postRender(){}isLayerOrderingCorrect(o){const c=o.order.length;let m=-1,v=c;for(let b=0;b<c;++b)this._style.isLayerDraped(o._mergedLayers[o.order[b]])?m=Math.max(m,b):v=Math.min(v,b);return v>m}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{o=Math.min(o,c.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,c,m){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const S=b.tileID,D=1<<S.overscaledZ,{x:R,y:F}=S.canonical,O=R/D,j=(R+1)/D,q=F/D,W=(F+1)/D;return{minx:O,miny:q,maxx:j,maxy:W,t:b.dem.tree.raycastRoot(O,q,j,W,o,c,m),tile:b}});v.sort((b,S)=>(b.t!==null?b.t:Number.MAX_VALUE)-(S.t!==null?S.t:Number.MAX_VALUE));for(const b of v){if(b.t==null)return null;const S=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,o,c,m);if(S!=null)return S}return null}_createFBO(){const o=this.painter.context,c=o.gl,m=this.drapeBufferSize;o.activeTexture.set(c.TEXTURE0);const v=new n.T(o,{width:m[0],height:m[1],data:null},c.RGBA8);v.bind(c.LINEAR,c.CLAMP_TO_EDGE);const b=o.createFramebuffer(m[0],m[1],!0,null);return b.colorAttachment.set(v.texture),b.depthAttachment=new _u(o,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:b,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const c=this._style._mergedLayers[o],m=c.isHidden(this.painter.transform.zoom);return c.type==="hillshade"||c.type==="custom"?!m&&c.shouldRedrape():!m&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const m of this._style.getSources())if(m instanceof Ir){o=!0;break}if(!o)return;const c={};for(let m=0;m<this._style.order.length;++m){const v=this._style._mergedLayers[this._style.order[m]],b=this._style.getLayerSourceCache(v);if(b&&!c[b.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof n.a4){c[b.id]=!0;for(const S of this.proxyCoords){const D=this.proxyToSource[S.key][b.id];if(D)for(const R of D)this._clearRenderCacheForTile(b.id,R)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const m in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[m]._source instanceof ca){o=!0;break}if(!o)return;const c={};for(let m=0;m<this._style.order.length;++m){const v=this._style._mergedLayers[this._style.order[m]],b=this._style.getLayerSourceCache(v);if(!b||c[b.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const S=v.paint.get("raster-fade-duration");for(const D of this.proxyCoords){const R=this.proxyToSource[D.key][b.id];if(R)for(const F of R){const O=Qd(b.getTile(F),b.findLoadedParent(F,0),b,this.painter.transform,S);(O.opacity!==1||O.mix!==0)&&this._clearRenderCacheForTile(b.id,F)}}}}_setupDrapedRenderBatches(){const o=this._style.order,c=o.length;if(c===0)return;const m=[];this._pendingGroundEffectLayers=[];let v,b=0,S=this._style._mergedLayers[o[b]];for(;!this._style.isLayerDraped(S)&&S.isHidden(this.painter.transform.zoom)&&++b<c;)S=this._style._mergedLayers[o[b]];for(;b<c;++b){const D=this._style._mergedLayers[o[b]];D.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(D)?v===void 0&&(v=b):(D.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(b),v!==void 0&&(m.push({start:v,end:b-1}),v=void 0)))}if(v!==void 0&&m.push({start:v,end:b-1}),m.length!==0){const D=m[m.length-1];this._pendingGroundEffectLayers.every(R=>R>D.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=m}_setupRenderCache(o){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const S=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let D=0;D<S.length;++D){const R=Object.values(S[D]);c.renderCachePool.push(...R)}}return}this._clearRasterLayersFromRenderCache();const m=this.proxyCoords,v=this._tilesDirty;for(let S=m.length-1;S>=0;S--){const D=m[S];if(c.getTileByID(D.key),c.proxyCachedFBO[D.key]!==void 0){const R=o[D.key],F=this.proxyToSource[D.key];let O=0;for(const j in F){const q=F[j],W=R[j];if(!W||W.length!==q.length||q.some((te,ee)=>te!==W[ee]||v[j]&&v[j].hasOwnProperty(te.key))){O=-1;break}++O}for(const j in c.proxyCachedFBO[D.key])c.renderCache[c.proxyCachedFBO[D.key][j]].dirty=O<0||O!==Object.values(R).length}}const b=[...this._drapedRenderBatches];b.sort((S,D)=>D.end-D.start-(S.end-S.start));for(const S of b)for(const D of m){if(c.proxyCachedFBO[D.key])continue;let R=c.renderCachePool.pop();R===void 0&&c.renderCache.length<50&&(R=c.renderCache.length,c.renderCache.push(this._createFBO())),R!==void 0&&(c.proxyCachedFBO[D.key]={},c.proxyCachedFBO[D.key][S.start]=R,c.renderCache[R].dirty=!0)}this._tilesDirty={}}_setupStencil(o,c,m,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,S=b.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let D;if(m.isTileClipped())D=c.length,this._overlapStencilMode.test={func:S.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);D=1,this._overlapStencilMode.test={func:S.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+D>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=D,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Ei.disabled}_renderTileClippingMasks(o,c){const m=this.painter,v=this.painter.context,b=v.gl;m._tileClippingMaskIDs={},v.setColorMode(qi.disabled),v.setDepthMode(gi.disabled);const S=m.getOrCreateProgram("clippingMask");for(const D of o){const R=m._tileClippingMaskIDs[D.key]=--c;S.draw(m,b.TRIANGLES,gi.disabled,new Ei({func:b.ALWAYS,mask:0},R,255,b.KEEP,b.KEEP,b.REPLACE),qi.disabled,Si.disabled,kh(D.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(o){const c=this.painter.transform;if(o.x<0||o.x>c.width||o.y<0||o.y>c.height)return null;const m=[o.x,o.y,1,1];n.a6.vec4.transformMat4(m,m,c.pixelMatrixInverse),n.a6.vec4.scale(m,m,1/m[3]),m[0]/=c.worldSize,m[1]/=c.worldSize;const v=c._camera.position,b=n.bE(1,c.center.lat),S=[v[0],v[1],v[2]/b,0],D=n.a6.vec3.subtract([],m.slice(0,3),S);n.a6.vec3.normalize(D,D);const R=this.raycast(S,D,this._exaggeration);return R!==null&&R?(n.a6.vec3.scaleAndAdd(S,S,D,R),S[3]=S[2],S[2]*=b,S):null}_setupProxiedCoordsForOrtho(o,c,m){if(o.getSource()instanceof n.aD)return this._setupProxiedCoordsForImageSource(o,c,m);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const v=this.proxiedCoords[o.id]=[],b=this.proxyCoords;for(let R=0;R<b.length;R++){const F=b[R],O=this._findTileCoveringTileID(F,o);if(O){const j=this._createProxiedId(F,O,m[F.key]&&m[F.key][o.id]);v.push(j),this.proxyToSource[F.key][o.id]=[j]}}let S=!1;const D=new Set;for(let R=0;R<c.length;R++){const F=o.getTile(c[R]);if(!F||!F.hasData())continue;const O=this._findTileCoveringTileID(F.tileID,this.proxySourceCache);if(O&&O.tileID.canonical.z!==F.tileID.canonical.z){const j=this.proxyToSource[O.tileID.key][o.id],q=this._createProxiedId(O.tileID,F,m[O.tileID.key]&&m[O.tileID.key][o.id]);j?j.splice(j.length-1,0,q):this.proxyToSource[O.tileID.key][o.id]=[q];const W=this.proxyToSource[O.tileID.key][o.id];D.has(W)||D.add(W),v.push(q),S=!0}}if(this._sourceTilesOverlap[o.id]=S,S&&this._debugParams.sortTilesHiZFirst)for(const R of D)R.sort((F,O)=>O.overscaledZ-F.overscaledZ)}_setupProxiedCoordsForImageSource(o,c,m){if(!o.getSource().loaded())return;const v=this.proxiedCoords[o.id]=[],b=this.proxyCoords,S=o.getSource(),D=S.tileID;if(!D)return;const R=new n.P(D.x,D.y)._div(1<<D.z),F=S.coordinates.map(n.a5.fromLngLat).reduce((j,q)=>(j.min.x=Math.min(j.min.x,q.x-R.x),j.min.y=Math.min(j.min.y,q.y-R.y),j.max.x=Math.max(j.max.x,q.x-R.x),j.max.y=Math.max(j.max.y,q.y-R.y),j),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),O=(j,q)=>{const W=j.wrap+j.canonical.x/(1<<j.canonical.z),te=j.canonical.y/(1<<j.canonical.z),ee=n.ab/(1<<j.canonical.z),ne=q.wrap+q.canonical.x/(1<<q.canonical.z),re=q.canonical.y/(1<<q.canonical.z);return W+ee<ne+F.min.x||W>ne+F.max.x||te+ee<re+F.min.y||te>re+F.max.y};for(let j=0;j<b.length;j++){const q=b[j];for(let W=0;W<c.length;W++){const te=o.getTile(c[W]);if(!te||!te.hasData()||O(q,te.tileID))continue;const ee=this._createProxiedId(q,te,m[q.key]&&m[q.key][o.id]),ne=this.proxyToSource[q.key][o.id];ne?ne.push(ee):this.proxyToSource[q.key][o.id]=[ee],v.push(ee)}}}_createProxiedId(o,c,m){let v=this.orthoMatrix;if(m){const b=m.find(S=>S.key===c.tileID.key);if(b)return b}if(c.tileID.key!==o.key){const b=o.canonical.z-c.tileID.canonical.z;let S,D,R;v=n.a6.mat4.create();const F=c.tileID.wrap-o.wrap<<o.overscaledZ;b>0?(S=n.ab>>b,D=S*((c.tileID.canonical.x<<b)-o.canonical.x+F),R=S*((c.tileID.canonical.y<<b)-o.canonical.y)):(S=n.ab<<-b,D=n.ab*(c.tileID.canonical.x-(o.canonical.x+F<<-b)),R=n.ab*(c.tileID.canonical.y-(o.canonical.y<<-b))),n.a6.mat4.ortho(v,0,S,0,S,0,1),n.a6.mat4.translate(v,v,[D,R,0])}return new pp(c.tileID,o.key,v)}_findTileCoveringTileID(o,c){let m=c.getTile(o);if(m&&m.hasData())return m;const v=this._findCoveringTileCache[c.id],b=v[o.key];if(m=b?c.getTileByID(b):null,m&&m.hasData()||b===null)return m;let S=m?m.tileID:o,D=S.overscaledZ;const R=c.getSource().minzoom,F=[];if(!b){const j=c.getSource().maxzoom;if(o.canonical.z>=j){const q=o.canonical.z-j;c.getSource().reparseOverscaled?(D=Math.max(o.canonical.z+2,c.transform.tileZoom),S=new n.aA(D,o.wrap,j,o.canonical.x>>q,o.canonical.y>>q)):q!==0&&(D=j,S=new n.aA(D,o.wrap,j,o.canonical.x>>q,o.canonical.y>>q))}S.key!==o.key&&(F.push(S.key),m=c.getTile(S))}const O=j=>{F.forEach(q=>{v[q]=j}),F.length=0};for(D-=1;D>=R&&(!m||!m.hasData());D--){m&&O(m.tileID.key);const j=S.calculateScaledKey(D);if(m=c.getTileByID(j),m&&m.hasData())break;const q=v[j];if(q===null)break;q===void 0?F.push(j):m=c.getTileByID(q)}return O(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,c){let m=this._tilesDirty[o];m||(m=this._tilesDirty[o]={}),m[c.key]=!0}}function gp(p,o,c){const m=function(D,R,F){const O=n.a6.vec3.dot(R,D),j=n.a6.vec3.dot(F,[.2126,.7152,.0722]),q=(te,ee,ne)=>(1-ne)*te+ne*ee,W=q(1-.3*Math.min(j,1),1,Math.min(O+1,1));return q(.92,1,Math.asin(n.ap(R[2],-1,1))/Math.PI+.5)*W}(p,[0,0,1],o),v=[0,0,0];n.a6.vec3.scale(v,c.slice(0,3),m);const b=[0,0,0];n.a6.vec3.scale(b,o.slice(0,3),p[2]);const S=[0,0,0];return n.a6.vec3.add(S,v,b),n.cc(S)}const Fc=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],gg=["stars","rain_particle","snow_particle","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class xl{static cacheKey(o,c,m,v){let b=`${c}${v?v.cacheKey:""}`;for(const S of m)o.usedDefines.includes(S)&&(b+=`/${S}`);return b}constructor(o,c,m,v,b,S){const D=o.gl;this.program=D.createProgram(),this.configuration=v,this.name=c,this.fixedDefines=[...S];const R=v?v.getBinderAttributes():[],F=(m.staticAttributes||[]).concat(R);let O=v?v.defines():[];O=O.concat(S.map(ne=>`#define ${ne}`));const j=`#version 300 es
`;let q=j+O.concat("precision mediump float;",ma,Ua.fragmentSource).join(`
`);for(const ne of m.fragmentIncludes)q+=`
${Zo[ne]}`;q+=`
${m.fragmentSource}`;let W=j+O.concat("precision highp float;",ma,Ua.vertexSource).join(`
`);for(const ne of m.vertexIncludes)W+=`
${Zo[ne]}`;W+=`
${m.vertexSource}`;const te=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);D.shaderSource(te,q),D.compileShader(te),D.attachShader(this.program,te);const ee=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())this.failedToCreate=!0;else{D.shaderSource(ee,W),D.compileShader(ee),D.attachShader(this.program,ee),this.attributes={},this.numAttributes=F.length;for(let ne=0;ne<this.numAttributes;ne++)if(F[ne]){const re=F[ne].startsWith("a_")?F[ne]:`a_${F[ne]}`;D.bindAttribLocation(this.program,ne,re),this.attributes[re]=ne}D.linkProgram(this.program),D.deleteShader(ee),D.deleteShader(te),this.fixedUniforms=b(o),this.binderUniforms=v?v.getUniforms(o):[],(S.includes("TERRAIN")||c.indexOf("symbol")!==-1||c.indexOf("circle")!==-1)&&(this.terrainUniforms=(ne=>({u_dem:new n.bK(ne),u_dem_prev:new n.bK(ne),u_dem_tl:new n.bH(ne),u_dem_scale:new n.bJ(ne),u_dem_tl_prev:new n.bH(ne),u_dem_scale_prev:new n.bJ(ne),u_dem_size:new n.bJ(ne),u_dem_lerp:new n.bJ(ne),u_exaggeration:new n.bJ(ne),u_depth:new n.bK(ne),u_depth_size_inv:new n.bH(ne),u_depth_range_unpack:new n.bH(ne),u_occluder_half_size:new n.bJ(ne),u_occlusion_depth_offset:new n.bJ(ne),u_meter_to_dem:new n.bJ(ne),u_label_plane_matrix_inv:new n.bG(ne)}))(o)),S.includes("GLOBE")&&(this.globeUniforms=(ne=>({u_tile_tl_up:new n.bI(ne),u_tile_tr_up:new n.bI(ne),u_tile_br_up:new n.bI(ne),u_tile_bl_up:new n.bI(ne),u_tile_up_scale:new n.bJ(ne)}))(o)),S.includes("FOG")&&(this.fogUniforms=(ne=>({u_fog_matrix:new n.bG(ne),u_fog_range:new n.bH(ne),u_fog_color:new n.c7(ne),u_fog_horizon_blend:new n.bJ(ne),u_fog_vertical_limit:new n.bH(ne),u_fog_temporal_offset:new n.bJ(ne),u_frustum_tl:new n.bI(ne),u_frustum_tr:new n.bI(ne),u_frustum_br:new n.bI(ne),u_frustum_bl:new n.bI(ne),u_globe_pos:new n.bI(ne),u_globe_radius:new n.bJ(ne),u_globe_transition:new n.bJ(ne),u_is_globe:new n.bK(ne),u_viewport:new n.bH(ne)}))(o)),S.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ne=>({u_cutoff_params:new n.c7(ne)}))(o)),S.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ne=>({u_lighting_ambient_color:new n.bI(ne),u_lighting_directional_dir:new n.bI(ne),u_lighting_directional_color:new n.bI(ne),u_ground_radiance:new n.bI(ne)}))(o)),S.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ne=>({u_light_matrix_0:new n.bG(ne),u_light_matrix_1:new n.bG(ne),u_fade_range:new n.bH(ne),u_shadow_normal_offset:new n.bI(ne),u_shadow_intensity:new n.bJ(ne),u_shadow_texel_size:new n.bJ(ne),u_shadow_map_resolution:new n.bJ(ne),u_shadow_direction:new n.bI(ne),u_shadow_bias:new n.bI(ne),u_shadowmap_0:new n.bK(ne),u_shadowmap_1:new n.bK(ne)}))(o))}}setTerrainUniformValues(o,c){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const v in c)m[v]&&m[v].set(this.program,v,c[v])}}setGlobeUniformValues(o,c){if(!this.globeUniforms)return;const m=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const v in c)m[v]&&m[v].set(this.program,v,c[v])}}setFogUniformValues(o,c){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const v in c)m[v].set(this.program,v,c[v])}}setCutoffUniformValues(o,c){if(!this.cutoffUniforms)return;const m=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const v in c)m[v].set(this.program,v,c[v])}}setLightsUniformValues(o,c){if(!this.lightsUniforms)return;const m=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const v in c)m[v].set(this.program,v,c[v])}}setShadowUniformValues(o,c){if(this.failedToCreate||!this.shadowUniforms)return;const m=this.shadowUniforms;o.program.set(this.program);for(const v in c)m[v].set(this.program,v,c[v])}_drawDebugWireframe(o,c,m,v,b,S,D,R,F,O){const j=o.options.wireframe;if(j.terrain===!1&&j.layers2D===!1&&j.layers3D===!1)return;const q=o.context;if(!(!(!j.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!j.layers2D||o._terrain&&o._terrain.renderingToTexture||!Fc.includes(this.name))||!(!j.layers3D||!gg.includes(this.name))))return;const W=q.gl,te=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,b,q);if(!te)return;const ee=[...this.fixedDefines];ee.push("DEBUG_WIREFRAME");const ne=o.getOrCreateProgram(this.name,{config:this.configuration,defines:ee});q.program.set(ne.program);const re=(ve,be,Me)=>{if(be[ve]&&Me[ve])for(const we in be[ve])Me[ve][we]&&Me[ve][we].set(Me.program,we,be[ve][we].current)};F&&F.setUniforms(ne.program,q,ne.binderUniforms,D,{zoom:R}),re("fixedUniforms",this,ne),re("terrainUniforms",this,ne),re("globeUniforms",this,ne),re("fogUniforms",this,ne),re("lightsUniforms",this,ne),re("shadowUniforms",this,ne),te.bind(),q.setColorMode(new qi([W.ONE,W.ONE_MINUS_SRC_ALPHA,W.ZERO,W.ONE],n.bA.transparent,[!0,!0,!0,!1])),q.setDepthMode(new gi(c.func===W.LESS?W.LEQUAL:c.func,gi.ReadOnly,c.range)),q.setStencilMode(Ei.disabled);const ue=3*S.primitiveLength*2,ye=3*S.primitiveOffset*2*2;O&&O>1?W.drawElementsInstanced(W.LINES,ue,W.UNSIGNED_SHORT,ye,O):W.drawElements(W.LINES,ue,W.UNSIGNED_SHORT,ye),b.bind(),q.program.set(this.program),q.setDepthMode(c),q.setStencilMode(m),q.setColorMode(v)}checkUniforms(o,c,m){if(this.fixedDefines.includes(c)){for(const v of Object.keys(m))if(!m[v].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${v} not set but required by ${c} being defined`)}}draw(o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne){const re=o.context,ue=re.gl;if(this.failedToCreate)return;re.program.set(this.program),re.setDepthMode(m),re.setStencilMode(v),re.setColorMode(b),re.setCullFace(S);for(const be of Object.keys(this.fixedUniforms))this.fixedUniforms[be].set(this.program,be,D[be]);te&&te.setUniforms(this.program,re,this.binderUniforms,q,{zoom:W});const ye={[ue.POINTS]:1,[ue.LINES]:2,[ue.TRIANGLES]:3,[ue.LINE_STRIP]:1}[c];this.checkUniforms(R,"RENDER_SHADOWS",this.shadowUniforms);const ve=ne&&ne>0?1:void 0;for(const be of j.get()){const Me=be.vaos||(be.vaos={});(Me[R]||(Me[R]=new tc)).bind(re,this,F,te?te.getPaintVertexBuffers():[],O,be.vertexOffset,ee||[],ve),ne&&ne>1?ue.drawElementsInstanced(c,be.primitiveLength*ye,ue.UNSIGNED_SHORT,be.primitiveOffset*ye*2,ne):O?ue.drawElements(c,be.primitiveLength*ye,ue.UNSIGNED_SHORT,be.primitiveOffset*ye*2):ue.drawArrays(c,be.vertexOffset,be.vertexLength),c===ue.TRIANGLES&&O&&this._drawDebugWireframe(o,m,v,b,O,be,q,W,te,ne)}}}function ef(p,o){const c=Math.pow(2,o.tileID.overscaledZ),m=o.tileSize*Math.pow(2,p.transform.tileZoom)/c,v=m*(o.tileID.canonical.x+o.tileID.wrap*c),b=m*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.ak(o,1,p.transform.tileZoom),u_pixel_coord_upper:[v>>16,b>>16],u_pixel_coord_lower:[65535&v,65535&b]}}const Nc={terrain:0,flat:1},_g=n.a6.mat4.create(),_p=(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne,re)=>{const ue=o.style.light,ye=ue.properties.get("position"),ve=[ye.x,ye.y,ye.z],be=n.a6.mat3.create();ue.properties.get("anchor")==="viewport"&&(n.a6.mat3.fromRotation(be,-o.transform.angle),n.a6.vec3.transformMat3(ve,ve,be));const Me=ue.properties.get("color"),we=o.transform,Ee={u_matrix:p,u_lightpos:ve,u_lightintensity:ue.properties.get("intensity"),u_lightcolor:[Me.r,Me.g,Me.b],u_vertical_gradient:+c,u_opacity:m,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:_g,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Nc[F],u_base_type:Nc[O],u_ao:v,u_edge_radius:b,u_width_scale:S,u_flood_light_color:te,u_vertical_scale:ee,u_flood_light_intensity:ne,u_ground_shadow_factor:re};return we.projection.name==="globe"&&(Ee.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],Ee.u_zoom_transition=j,Ee.u_inv_rot_matrix=W,Ee.u_merc_center=q,Ee.u_up_dir=we.projection.upVector(new n.bQ(0,0,0),q[0]*n.ab,q[1]*n.ab),Ee.u_height_lift=R),Ee},yp=(p,o,c,m,v,b)=>({u_matrix:p,u_edge_radius:o,u_width_scale:c,u_vertical_scale:m,u_height_type:Nc[v],u_base_type:Nc[b]}),vp=(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne)=>{const re=_p(p,o,c,m,v,b,S,D,F,O,j,q,W,te,ee,ne,1,[0,0,0]),ue={u_height_factor:-Math.pow(2,D.overscaledZ)/R.tileSize/8};return n.l(re,ef(o,R),ue)},yg=(p,o)=>({u_matrix:p,u_emissive_strength:o}),xp=(p,o,c,m)=>n.l(yg(p,o),ef(c,m)),Rh=(p,o,c)=>({u_matrix:p,u_world:c,u_emissive_strength:o}),xv=(p,o,c,m,v)=>n.l(xp(p,o,c,m),{u_world:v}),bv=(p,o,c,m)=>{const v=n.ab/c.tileSize;return{u_matrix:p,u_camera_to_center_distance:o.getCameraToCenterDistance(m),u_extrude_scale:[o.pixelsToGLUnits[0]/v,o.pixelsToGLUnits[1]/v]}},bp=(p,o,c=1)=>({u_matrix:p,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:c}),wv=n.a6.mat4.create(),wp=(p,o,c,m,v,b,S)=>{const D=p.transform,R=D.projection.name==="globe",F=R?n.cI(D.zoom,o.canonical)*D._pixelsPerMercatorPixel:n.ak(c,1,b),O={u_matrix:o.projMatrix,u_extrude_scale:F,u_intensity:S,u_inv_rot_matrix:wv,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(R){O.u_inv_rot_matrix=m,O.u_merc_center=v,O.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],O.u_zoom_transition=n.a9(D.zoom);const j=v[0]*n.ab,q=v[1]*n.ab;O.u_up_dir=D.projection.upVector(new n.bQ(0,0,0),j,q)}return O};function tf(p,[o,c,m,v],[b,S]){if(b===S)return[0,0,0,0];const D=255*(p-1)/(p*(S-b));return[o*D,c*D,m*D,v*D]}function xu(p,o,[c,m]){return c===m?0:.5/p+(o-c)*(p-1)/(p*(m-c))}const rf=(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne,re,ue,ye,ve)=>({u_matrix:p,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:m,u_grid_matrix:v,u_tl_parent:b,u_scale_parent:F,u_fade_t:O.mix,u_opacity:O.opacity*j.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:j.paint.get("raster-brightness-min"),u_brightness_high:j.paint.get("raster-brightness-max"),u_saturation_factor:n.cJ(j.paint.get("raster-saturation")),u_contrast_factor:n.cK(j.paint.get("raster-contrast")),u_spin_weights:Lh(j.paint.get("raster-hue-rotate")),u_perspective_transform:q,u_raster_elevation:W,u_zoom_transition:S,u_merc_center:D,u_cutoff_params:R,u_colorization_mix:tf(n.cL,ee,re),u_colorization_offset:xu(n.cL,ne,re),u_color_ramp:te,u_texture_offset:[ye/(ue+2*ye),ue/(ue+2*ye)],u_texture_res:[ue+2*ye,ue+2*ye],u_emissive_strength:ve});function Lh(p){p*=Math.PI/180;const o=Math.sin(p),c=Math.cos(p);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}const $c=.05,nf=(p,o,c,m,v,b,S,D,R,F,O,j)=>({u_matrix:p,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:m,u_grid_matrix:v,u_tl_parent:b,u_scale_parent:F,u_fade_t:O.mix,u_opacity:O.opacity,u_image0:0,u_image1:1,u_raster_elevation:j,u_zoom_transition:S,u_merc_center:D,u_cutoff_params:R}),of=(p,o,c,m,v,b,S,D,R,F)=>({u_particle_texture:p,u_particle_texture_side_len:o,u_tile_offset:c,u_velocity:m,u_color_ramp:b,u_velocity_res:v,u_max_speed:S,u_uv_offset:D,u_data_scale:[255*R[0],255*R[1]],u_data_offset:F,u_particle_pos_scale:1.1,u_particle_pos_offset:[$c,$c]}),Sp=(p,o,c,m,v,b,S,D,R,F)=>({u_particle_texture:p,u_particle_texture_side_len:o,u_velocity:c,u_velocity_res:m,u_max_speed:v,u_speed_factor:b,u_reset_rate:S,u_rand_seed:Math.random(),u_uv_offset:D,u_data_scale:[255*R[0],255*R[1]],u_data_offset:F,u_particle_pos_scale:1.1,u_particle_pos_offset:[$c,$c]}),Mp=n.a6.mat4.create(),vg=(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne,re,ue,ye,ve,be)=>{const Me=v.transform,we={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Me.getCameraToCenterDistance(ue),u_rotate_symbol:+c,u_aspect_ratio:Me.width/Me.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:S,u_coord_matrix:D,u_is_text:+F,u_elevation_from_sea:R?1:0,u_pitch_with_map:+m,u_texsize:O,u_texsize_icon:j,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Mp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Mp,u_up_vector:[0,-1,0],u_color_adj_mat:ye,u_icon_transition:ve||0,u_gamma_scale:m?v.transform.getCameraToCenterDistance(ue)*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:+q,u_scale_factor:be||1};return ue.name==="globe"&&(we.u_tile_id=[W.canonical.x,W.canonical.y,1<<W.canonical.z],we.u_zoom_transition=te,we.u_inv_rot_matrix=ne,we.u_merc_center=ee,we.u_camera_forward=Me._camera.forward(),we.u_ecef_origin=n.cM(Me.globeMatrix,W.toUnwrapped()),we.u_tile_matrix=Float32Array.from(Me.globeMatrix),we.u_up_vector=re),we},jc=(p,o,c,m)=>({u_matrix:p,u_emissive_strength:o,u_opacity:c,u_color:m}),Oh=(p,o,c,m,v,b,S,D,R)=>n.l(function(F,O,j,q,W,te){const{width:ee,height:ne}=q.imageManager.getPixelSize(O),re=Math.pow(2,te.tileID.overscaledZ),ue=te.tileSize*Math.pow(2,q.transform.tileZoom)/re,ye=ue*(te.tileID.canonical.x+te.tileID.wrap*re),ve=ue*te.tileID.canonical.y;return{u_image:0,u_pattern_tl:j.tl,u_pattern_br:j.br,u_texsize:[ee,ne],u_pattern_size:j.displaySize,u_pattern_units_to_pixels:W?[q.transform.width,-1*q.transform.height]:[1/n.ak(te,1,q.transform.tileZoom),1/n.ak(te,1,q.transform.tileZoom)],u_pixel_coord_upper:[ye>>16,ve>>16],u_pixel_coord_lower:[65535&ye,65535&ve]}}(0,b,S,m,D,R),{u_matrix:p,u_emissive_strength:o,u_opacity:c}),ti=new Float32Array(n.a6.mat4.identity([])),sf=(p,o,c,m,v,b,S,D,R,F,O,j,q,W=[0,0,0],te)=>{const ee=v.style.light,ne=ee.properties.get("position"),re=[-ne.x,-ne.y,ne.z],ue=n.a6.mat3.create();ee.properties.get("anchor")==="viewport"&&(n.a6.mat3.fromRotation(ue,-v.transform.angle),n.a6.vec3.transformMat3(re,re,ue));const ye=O.alphaMode==="MASK",ve=ee.properties.get("color").toRenderColor(null),be=q.paint.get("model-ambient-occlusion-intensity"),Me=q.paint.get("model-color").constantOr(n.bA.white).toRenderColor(null),we=q.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:p,u_lighting_matrix:o,u_normal_matrix:c,u_node_matrix:m||ti,u_lightpos:re,u_lightintensity:ee.properties.get("intensity"),u_lightcolor:[ve.r,ve.g,ve.b],u_camera_pos:W,u_opacity:b,u_baseTextureIsAlpha:0,u_alphaMask:+ye,u_alphaCutoff:O.alphaCutoff,u_baseColorFactor:[S.r,S.g,S.b,S.a],u_emissiveFactor:[D[0],D[1],D[2],1],u_metallicFactor:R,u_roughnessFactor:F,u_baseColorTexture:so.BaseColor,u_metallicRoughnessTexture:so.MetallicRoughness,u_normalTexture:so.Normal,u_occlusionTexture:so.Occlusion,u_emissionTexture:so.Emission,u_lutTexture:so.LUT,u_color_mix:[Me.r,Me.g,Me.b,we],u_aoIntensity:be,u_emissive_strength:j,u_occlusionTextureTransform:te||[0,0,0,0]}},Ep=(p,o=ti,c=ti)=>({u_matrix:p,u_instance:o,u_node_matrix:c}),Uc={fillExtrusion:p=>({u_matrix:new n.bG(p),u_lightpos:new n.bI(p),u_lightintensity:new n.bJ(p),u_lightcolor:new n.bI(p),u_vertical_gradient:new n.bJ(p),u_opacity:new n.bJ(p),u_edge_radius:new n.bJ(p),u_width_scale:new n.bJ(p),u_ao:new n.bH(p),u_height_type:new n.bK(p),u_base_type:new n.bK(p),u_tile_id:new n.bI(p),u_zoom_transition:new n.bJ(p),u_inv_rot_matrix:new n.bG(p),u_merc_center:new n.bH(p),u_up_dir:new n.bI(p),u_height_lift:new n.bJ(p),u_flood_light_color:new n.bI(p),u_vertical_scale:new n.bJ(p),u_flood_light_intensity:new n.bJ(p),u_ground_shadow_factor:new n.bI(p)}),fillExtrusionDepth:p=>({u_matrix:new n.bG(p),u_edge_radius:new n.bJ(p),u_width_scale:new n.bJ(p),u_vertical_scale:new n.bJ(p),u_height_type:new n.bK(p),u_base_type:new n.bK(p)}),fillExtrusionPattern:p=>({u_matrix:new n.bG(p),u_lightpos:new n.bI(p),u_lightintensity:new n.bJ(p),u_lightcolor:new n.bI(p),u_vertical_gradient:new n.bJ(p),u_height_factor:new n.bJ(p),u_edge_radius:new n.bJ(p),u_width_scale:new n.bJ(p),u_ao:new n.bH(p),u_height_type:new n.bK(p),u_base_type:new n.bK(p),u_tile_id:new n.bI(p),u_zoom_transition:new n.bJ(p),u_inv_rot_matrix:new n.bG(p),u_merc_center:new n.bH(p),u_up_dir:new n.bI(p),u_height_lift:new n.bJ(p),u_image:new n.bK(p),u_texsize:new n.bH(p),u_pixel_coord_upper:new n.bH(p),u_pixel_coord_lower:new n.bH(p),u_tile_units_to_pixels:new n.bJ(p),u_opacity:new n.bJ(p)}),fillExtrusionGroundEffect:p=>({u_matrix:new n.bG(p),u_opacity:new n.bJ(p),u_ao_pass:new n.bJ(p),u_meter_to_tile:new n.bJ(p),u_ao:new n.bH(p),u_flood_light_intensity:new n.bJ(p),u_flood_light_color:new n.bI(p),u_attenuation:new n.bJ(p),u_edge_radius:new n.bJ(p),u_fb:new n.bK(p),u_fb_size:new n.bJ(p),u_dynamic_offset:new n.bJ(p)}),fill:p=>({u_matrix:new n.bG(p),u_emissive_strength:new n.bJ(p)}),fillPattern:p=>({u_matrix:new n.bG(p),u_emissive_strength:new n.bJ(p),u_image:new n.bK(p),u_texsize:new n.bH(p),u_pixel_coord_upper:new n.bH(p),u_pixel_coord_lower:new n.bH(p),u_tile_units_to_pixels:new n.bJ(p)}),fillOutline:p=>({u_matrix:new n.bG(p),u_emissive_strength:new n.bJ(p),u_world:new n.bH(p)}),fillOutlinePattern:p=>({u_matrix:new n.bG(p),u_emissive_strength:new n.bJ(p),u_world:new n.bH(p),u_image:new n.bK(p),u_texsize:new n.bH(p),u_pixel_coord_upper:new n.bH(p),u_pixel_coord_lower:new n.bH(p),u_tile_units_to_pixels:new n.bJ(p)}),circle:n.cN,collisionBox:p=>({u_matrix:new n.bG(p),u_camera_to_center_distance:new n.bJ(p),u_extrude_scale:new n.bH(p)}),collisionCircle:p=>({u_matrix:new n.bG(p),u_inv_matrix:new n.bG(p),u_camera_to_center_distance:new n.bJ(p),u_viewport_size:new n.bH(p)}),debug:p=>({u_color:new n.cu(p),u_matrix:new n.bG(p),u_overlay:new n.bK(p),u_overlay_scale:new n.bJ(p)}),clippingMask:p=>({u_matrix:new n.bG(p)}),heatmap:p=>({u_extrude_scale:new n.bJ(p),u_intensity:new n.bJ(p),u_matrix:new n.bG(p),u_inv_rot_matrix:new n.bG(p),u_merc_center:new n.bH(p),u_tile_id:new n.bI(p),u_zoom_transition:new n.bJ(p),u_up_dir:new n.bI(p)}),heatmapTexture:p=>({u_image:new n.bK(p),u_color_ramp:new n.bK(p),u_opacity:new n.bJ(p)}),hillshade:p=>({u_matrix:new n.bG(p),u_image:new n.bK(p),u_latrange:new n.bH(p),u_light:new n.bH(p),u_shadow:new n.cu(p),u_highlight:new n.cu(p),u_emissive_strength:new n.bJ(p),u_accent:new n.cu(p)}),hillshadePrepare:p=>({u_matrix:new n.bG(p),u_image:new n.bK(p),u_dimension:new n.bH(p),u_zoom:new n.bJ(p)}),line:n.cO,linePattern:n.cP,raster:p=>({u_matrix:new n.bG(p),u_normalize_matrix:new n.bG(p),u_globe_matrix:new n.bG(p),u_merc_matrix:new n.bG(p),u_grid_matrix:new n.cv(p),u_tl_parent:new n.bH(p),u_scale_parent:new n.bJ(p),u_fade_t:new n.bJ(p),u_opacity:new n.bJ(p),u_image0:new n.bK(p),u_image1:new n.bK(p),u_brightness_low:new n.bJ(p),u_brightness_high:new n.bJ(p),u_saturation_factor:new n.bJ(p),u_contrast_factor:new n.bJ(p),u_spin_weights:new n.bI(p),u_perspective_transform:new n.bH(p),u_raster_elevation:new n.bJ(p),u_zoom_transition:new n.bJ(p),u_merc_center:new n.bH(p),u_cutoff_params:new n.c7(p),u_colorization_mix:new n.c7(p),u_colorization_offset:new n.bJ(p),u_color_ramp:new n.bK(p),u_texture_offset:new n.bH(p),u_texture_res:new n.bH(p),u_emissive_strength:new n.bJ(p)}),rasterParticle:p=>({u_matrix:new n.bG(p),u_normalize_matrix:new n.bG(p),u_globe_matrix:new n.bG(p),u_merc_matrix:new n.bG(p),u_grid_matrix:new n.cv(p),u_tl_parent:new n.bH(p),u_scale_parent:new n.bJ(p),u_fade_t:new n.bJ(p),u_opacity:new n.bJ(p),u_image0:new n.bK(p),u_image1:new n.bK(p),u_raster_elevation:new n.bJ(p),u_zoom_transition:new n.bJ(p),u_merc_center:new n.bH(p),u_cutoff_params:new n.c7(p)}),rasterParticleTexture:p=>({u_texture:new n.bK(p),u_opacity:new n.bJ(p)}),rasterParticleDraw:p=>({u_particle_texture:new n.bK(p),u_particle_texture_side_len:new n.bJ(p),u_tile_offset:new n.bH(p),u_velocity:new n.bK(p),u_color_ramp:new n.bK(p),u_velocity_res:new n.bH(p),u_max_speed:new n.bJ(p),u_uv_offset:new n.bH(p),u_data_scale:new n.bH(p),u_data_offset:new n.bJ(p),u_particle_pos_scale:new n.bJ(p),u_particle_pos_offset:new n.bH(p)}),rasterParticleUpdate:p=>({u_particle_texture:new n.bK(p),u_particle_texture_side_len:new n.bJ(p),u_velocity:new n.bK(p),u_velocity_res:new n.bH(p),u_max_speed:new n.bJ(p),u_speed_factor:new n.bJ(p),u_reset_rate:new n.bJ(p),u_rand_seed:new n.bJ(p),u_uv_offset:new n.bH(p),u_data_scale:new n.bH(p),u_data_offset:new n.bJ(p),u_particle_pos_scale:new n.bJ(p),u_particle_pos_offset:new n.bH(p)}),symbol:p=>({u_is_size_zoom_constant:new n.bK(p),u_is_size_feature_constant:new n.bK(p),u_size_t:new n.bJ(p),u_size:new n.bJ(p),u_camera_to_center_distance:new n.bJ(p),u_rotate_symbol:new n.bK(p),u_aspect_ratio:new n.bJ(p),u_fade_change:new n.bJ(p),u_matrix:new n.bG(p),u_label_plane_matrix:new n.bG(p),u_coord_matrix:new n.bG(p),u_is_text:new n.bK(p),u_elevation_from_sea:new n.bK(p),u_pitch_with_map:new n.bK(p),u_texsize:new n.bH(p),u_texsize_icon:new n.bH(p),u_texture:new n.bK(p),u_texture_icon:new n.bK(p),u_gamma_scale:new n.bJ(p),u_device_pixel_ratio:new n.bJ(p),u_tile_id:new n.bI(p),u_zoom_transition:new n.bJ(p),u_inv_rot_matrix:new n.bG(p),u_merc_center:new n.bH(p),u_camera_forward:new n.bI(p),u_tile_matrix:new n.bG(p),u_up_vector:new n.bI(p),u_ecef_origin:new n.bI(p),u_is_halo:new n.bK(p),u_icon_transition:new n.bJ(p),u_color_adj_mat:new n.bG(p),u_scale_factor:new n.bJ(p)}),background:p=>({u_matrix:new n.bG(p),u_emissive_strength:new n.bJ(p),u_opacity:new n.bJ(p),u_color:new n.cu(p)}),backgroundPattern:p=>({u_matrix:new n.bG(p),u_emissive_strength:new n.bJ(p),u_opacity:new n.bJ(p),u_image:new n.bK(p),u_pattern_tl:new n.bH(p),u_pattern_br:new n.bH(p),u_texsize:new n.bH(p),u_pattern_size:new n.bH(p),u_pixel_coord_upper:new n.bH(p),u_pixel_coord_lower:new n.bH(p),u_pattern_units_to_pixels:new n.bH(p)}),terrainRaster:p=>({u_matrix:new n.bG(p),u_image0:new n.bK(p),u_skirt_height:new n.bJ(p),u_ground_shadow_factor:new n.bI(p)}),skybox:p=>({u_matrix:new n.bG(p),u_sun_direction:new n.bI(p),u_cubemap:new n.bK(p),u_opacity:new n.bJ(p),u_temporal_offset:new n.bJ(p)}),skyboxGradient:p=>({u_matrix:new n.bG(p),u_color_ramp:new n.bK(p),u_center_direction:new n.bI(p),u_radius:new n.bJ(p),u_opacity:new n.bJ(p),u_temporal_offset:new n.bJ(p)}),skyboxCapture:p=>({u_matrix_3f:new n.cv(p),u_sun_direction:new n.bI(p),u_sun_intensity:new n.bJ(p),u_color_tint_r:new n.c7(p),u_color_tint_m:new n.c7(p),u_luminance:new n.bJ(p)}),globeRaster:p=>({u_proj_matrix:new n.bG(p),u_globe_matrix:new n.bG(p),u_normalize_matrix:new n.bG(p),u_merc_matrix:new n.bG(p),u_zoom_transition:new n.bJ(p),u_merc_center:new n.bH(p),u_image0:new n.bK(p),u_grid_matrix:new n.cv(p),u_skirt_height:new n.bJ(p),u_far_z_cutoff:new n.bJ(p),u_frustum_tl:new n.bI(p),u_frustum_tr:new n.bI(p),u_frustum_br:new n.bI(p),u_frustum_bl:new n.bI(p),u_globe_pos:new n.bI(p),u_globe_radius:new n.bJ(p),u_viewport:new n.bH(p)}),globeAtmosphere:p=>({u_frustum_tl:new n.bI(p),u_frustum_tr:new n.bI(p),u_frustum_br:new n.bI(p),u_frustum_bl:new n.bI(p),u_horizon:new n.bJ(p),u_transition:new n.bJ(p),u_fadeout_range:new n.bJ(p),u_color:new n.c7(p),u_high_color:new n.c7(p),u_space_color:new n.c7(p),u_temporal_offset:new n.bJ(p),u_horizon_angle:new n.bJ(p)}),model:p=>({u_matrix:new n.bG(p),u_lighting_matrix:new n.bG(p),u_normal_matrix:new n.bG(p),u_node_matrix:new n.bG(p),u_lightpos:new n.bI(p),u_lightintensity:new n.bJ(p),u_lightcolor:new n.bI(p),u_camera_pos:new n.bI(p),u_opacity:new n.bJ(p),u_baseColorFactor:new n.c7(p),u_emissiveFactor:new n.c7(p),u_metallicFactor:new n.bJ(p),u_roughnessFactor:new n.bJ(p),u_baseTextureIsAlpha:new n.bK(p),u_alphaMask:new n.bK(p),u_alphaCutoff:new n.bJ(p),u_baseColorTexture:new n.bK(p),u_metallicRoughnessTexture:new n.bK(p),u_normalTexture:new n.bK(p),u_occlusionTexture:new n.bK(p),u_emissionTexture:new n.bK(p),u_lutTexture:new n.bK(p),u_color_mix:new n.c7(p),u_aoIntensity:new n.bJ(p),u_emissive_strength:new n.bJ(p),u_occlusionTextureTransform:new n.c7(p)}),modelDepth:p=>({u_matrix:new n.bG(p),u_instance:new n.bG(p),u_node_matrix:new n.bG(p)}),groundShadow:p=>({u_matrix:new n.bG(p),u_ground_shadow_factor:new n.bI(p)}),stars:p=>({u_matrix:new n.bG(p),u_up:new n.bI(p),u_right:new n.bI(p),u_intensity_multiplier:new n.bJ(p)}),snowParticle:p=>({u_modelview:new n.bG(p),u_projection:new n.bG(p),u_time:new n.bJ(p),u_cam_pos:new n.bI(p),u_velocityConeAperture:new n.bJ(p),u_velocity:new n.bJ(p),u_horizontalOscillationRadius:new n.bJ(p),u_horizontalOscillationRate:new n.bJ(p),u_boxSize:new n.bJ(p),u_billboardSize:new n.bJ(p),u_simpleShapeParameters:new n.bH(p),u_screenSize:new n.bH(p),u_thinningCenterPos:new n.bH(p),u_thinningShape:new n.bI(p),u_thinningAffectedRatio:new n.bJ(p),u_thinningParticleOffset:new n.bJ(p),u_particleColor:new n.c7(p),u_direction:new n.bI(p)}),rainParticle:p=>({u_modelview:new n.bG(p),u_projection:new n.bG(p),u_time:new n.bJ(p),u_cam_pos:new n.bI(p),u_texScreen:new n.bK(p),u_velocityConeAperture:new n.bJ(p),u_velocity:new n.bJ(p),u_boxSize:new n.bJ(p),u_rainDropletSize:new n.bH(p),u_distortionStrength:new n.bJ(p),u_rainDirection:new n.bI(p),u_color:new n.c7(p),u_screenSize:new n.bH(p),u_thinningCenterPos:new n.bH(p),u_thinningShape:new n.bI(p),u_thinningAffectedRatio:new n.bJ(p),u_thinningParticleOffset:new n.bJ(p),u_shapeDirectionalPower:new n.bJ(p),u_mode:new n.bJ(p)}),occlusion:p=>({u_matrix:new n.bG(p),u_anchorPos:new n.bI(p),u_screenSizePx:new n.bH(p),u_occluderSizePx:new n.bH(p),u_color:new n.c7(p)})};class cs{constructor(o,c,m,v){this.id=cs.uniqueIdxCounter,cs.uniqueIdxCounter++,this.context=o;const b=o.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||v||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=cs.uniqueIdxCounter,cs.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}cs.uniqueIdxCounter=0;const di={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Tp{constructor(o,c,m,v,b,S){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.instanceCount=S,this.context=o;const D=o.gl;this.buffer=D.createBuffer(),o.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||b||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&o.enableVertexAttribArray(v)}}setVertexAttribPointers(o,c,m){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],S=c.attributes[b.name];S!==void 0&&o.vertexAttribPointer(S,b.components,o[di[b.type]],!1,this.itemSize,b.offset+this.itemSize*(m||0))}}setVertexAttribDivisor(o,c,m){for(let v=0;v<this.attributes.length;v++){const b=c.attributes[this.attributes[v].name];b!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(b,m)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class xg{constructor(o,c,m,v,b){this.context=o,this.width=c,this.height=m;const S=this.framebuffer=o.gl.createFramebuffer();v&&(this.colorAttachment=new Kd(o,S)),b&&(this.depthAttachmentType=b,this.depthAttachment=b==="renderbuffer"?new dp(o,S):new ug(o,S))}destroy(){const o=this.context.gl;if(this.colorAttachment){const c=this.colorAttachment.get();c&&o.deleteTexture(c)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const c=this.depthAttachment.get();c&&o.deleteRenderbuffer(c)}else{const c=this.depthAttachment.get();c&&o.deleteTexture(c)}o.deleteFramebuffer(this.framebuffer)}}class Sv{constructor(o,c){this.gl=o,this.clearColor=new Oo(this),this.clearDepth=new Ws(this),this.clearStencil=new Zs(this),this.colorMask=new qa(this),this.depthMask=new Ha(this),this.stencilMask=new vl(this),this.stencilFunc=new Ga(this),this.stencilOp=new Ih(this),this.stencilTest=new _a(this),this.depthRange=new pu(this),this.depthTest=new mu(this),this.depthFunc=new gu(this),this.blend=new Zd(this),this.blendFunc=new ic(this),this.blendColor=new rc(this),this.blendEquation=new sp(this),this.cullFace=new ap(this),this.cullFaceSide=new ag(this),this.frontFace=new lg(this),this.program=new yv(this),this.activeTexture=new zh(this),this.viewport=new Dh(this),this.bindFramebuffer=new cg(this),this.bindRenderbuffer=new zs(this),this.bindTexture=new lp(this),this.bindVertexBuffer=new Xd(this),this.bindElementBuffer=new Yd(this),this.bindVertexArrayOES=new cp(this),this.pixelStoreUnpack=new up(this),this.pixelStoreUnpackPremultiplyAlpha=new Jd(this),this.pixelStoreUnpackFlipY=new hp(this),this.options=c?{...c}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c,m){return new cs(this,o,c,m)}createVertexBuffer(o,c,m,v,b){return new Tp(this,o,c,m,v,b)}createRenderbuffer(o,c,m){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,o,c,m),this.bindRenderbuffer.set(null),b}createFramebuffer(o,c,m,v){return new xg(this,o,c,m,v)}clear({color:o,depth:c,stencil:m,colorMask:v}){const b=this.gl;let S=0;o&&(S|=b.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(v||[!0,!0,!0,!0])),c!==void 0&&(S|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(S|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),b.clear(S)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){n.bi(o.blendFunction,qi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let bu;function Cp(p,o,c,m,v,b,S){const D=p.context,R=D.gl,F=p.transform,O=p.getOrCreateProgram("collisionBox"),j=[];let q=0,W=0;for(let ve=0;ve<m.length;ve++){const be=m[ve],Me=o.getTile(be),we=Me.getBucket(c);if(!we)continue;const Ee=Hd(be,we,F);let ke=Ee;v[0]===0&&v[1]===0||(ke=p.translatePosMatrix(Ee,Me,v,b));const $e=S?we.textCollisionBox:we.iconCollisionBox,Oe=we.collisionCircleArray;if(Oe.length>0){const Re=n.a6.mat4.create(),st=ke;n.a6.mat4.mul(Re,we.placementInvProjMatrix,F.glCoordMatrix),n.a6.mat4.mul(Re,Re,we.placementViewportMatrix),j.push({circleArray:Oe,circleOffset:W,transform:st,invTransform:Re,projection:we.getProjection()}),q+=Oe.length/4,W=q}$e&&(p.terrain&&p.terrain.setupElevationDraw(Me,O),O.draw(p,R.LINES,gi.disabled,Ei.disabled,p.colorModeForRenderPass(),Si.disabled,bv(ke,F,Me,we.getProjection()),c.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,null,F.zoom,null,[$e.collisionVertexBuffer,$e.collisionVertexBufferExt]))}if(!S||!j.length)return;const te=p.getOrCreateProgram("collisionCircle"),ee=new n.cQ;ee.resize(4*q),ee._trim();let ne=0;for(const ve of j)for(let be=0;be<ve.circleArray.length/4;be++){const Me=4*be,we=ve.circleArray[Me+0],Ee=ve.circleArray[Me+1],ke=ve.circleArray[Me+2],$e=ve.circleArray[Me+3];ee.emplace(ne++,we,Ee,ke,$e,0),ee.emplace(ne++,we,Ee,ke,$e,1),ee.emplace(ne++,we,Ee,ke,$e,2),ee.emplace(ne++,we,Ee,ke,$e,3)}(!bu||bu.length<2*q)&&(bu=function(ve){const be=2*ve,Me=new n.aP;Me.resize(be),Me._trim();for(let we=0;we<be;we++){const Ee=6*we;Me.uint16[Ee+0]=4*we+0,Me.uint16[Ee+1]=4*we+1,Me.uint16[Ee+2]=4*we+2,Me.uint16[Ee+3]=4*we+2,Me.uint16[Ee+4]=4*we+3,Me.uint16[Ee+5]=4*we+0}return Me}(q));const re=D.createIndexBuffer(bu,!0),ue=D.createVertexBuffer(ee,n.cR.members,!0);for(const ve of j){const be={u_matrix:ve.transform,u_inv_matrix:ve.invTransform,u_camera_to_center_distance:(ye=F).getCameraToCenterDistance(ve.projection),u_viewport_size:[ye.width,ye.height]};te.draw(p,R.TRIANGLES,gi.disabled,Ei.disabled,p.colorModeForRenderPass(),Si.disabled,be,c.id,ue,re,n.b2.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,F.zoom)}var ye;ue.destroy(),re.destroy()}const Bh=n.a6.mat4.create();function bg(p){const o=p._camera.getWorldToCamera(p.worldSize,1),c=n.a6.mat4.multiply([],o,p.globeMatrix);n.a6.mat4.invert(c,c);const m=[0,0,0],v=[0,1,0,0];return n.a6.vec4.transformMat4(v,v,c),m[0]=v[0],m[1]=v[1],m[2]=v[2],n.a6.vec3.normalize(m,m),m}function Mv({width:p,height:o,anchor:c,textOffset:m,textScale:v},b){const{horizontalAlign:S,verticalAlign:D}=n.by(c),R=-(S-.5)*p,F=-(D-.5)*o,O=n.bx(c,m);return new n.P((R/v+O[0])*b,(F/v+O[1])*b)}function Ap(p,o,c,m,v,b,S,D,R,F,O){const j=p.text.placedSymbolArray,q=p.text.dynamicLayoutVertexArray,W=p.icon.dynamicLayoutVertexArray,te={},ee=p.getProjection(),ne=Ra(D,ee,b),re=b.elevation,ue=ee.upVectorScale(D.canonical,b.center.lat,b.worldSize).metersToTile;q.clear();for(let ye=0;ye<j.length;ye++){const ve=j.get(ye),{tileAnchorX:be,tileAnchorY:Me,numGlyphs:we}=ve,Ee=ve.hidden||!ve.crossTileID||p.allowVerticalPlacement&&!ve.placedOrientation?null:m[ve.crossTileID];if(Ee){let ke=0,$e=0,Oe=0;if(re){const ct=re?re.getAtTileOffset(D,be,Me):0,[Mt,Tt,wt]=ee.upVector(D.canonical,be,Me);ke=ct*Mt*ue,$e=ct*Tt*ue,Oe=ct*wt*ue}let[Re,st,dt,Et]=ro(ve.projectedAnchorX+ke,ve.projectedAnchorY+$e,ve.projectedAnchorZ+Oe,c?ne:S);const Lt=or(b.getCameraToCenterDistance(ee),Et);let jt=v.evaluateSizeForFeature(p.textSizeData,F,ve)*Lt/n.br;c&&(jt*=p.tilePixelRatio/R);const Xe=Mv(Ee,jt);c?({x:Re,y:st,z:dt}=ee.projectTilePoint(be+Xe.x,Me+Xe.y,D.canonical),[Re,st,dt]=ro(Re+ke,st+$e,dt+Oe,S)):(o&&Xe._rotate(-b.angle),Re+=Xe.x,st+=Xe.y,dt=0);const St=p.allowVerticalPlacement&&ve.placedOrientation===n.bl.vertical?Math.PI/2:0;for(let ct=0;ct<we;ct++)n.bo(q,Re,st,dt,St);O&&ve.associatedIconIndex>=0&&(te[ve.associatedIconIndex]={x:Re,y:st,z:dt,angle:St})}else js(we,q)}if(O){W.clear();const ye=p.icon.placedSymbolArray;for(let ve=0;ve<ye.length;ve++){const be=ye.get(ve),{numGlyphs:Me}=be,we=te[ve];if(be.hidden||!we)js(Me,W);else{const{x:Ee,y:ke,z:$e,angle:Oe}=we;for(let Re=0;Re<Me;Re++)n.bo(W,Ee,ke,$e,Oe)}}p.icon.dynamicLayoutVertexBuffer.updateData(W)}p.text.dynamicLayoutVertexBuffer.updateData(q)}function Fh(p,o,c,m,v,b,S={}){const D=c.paint.get("icon-translate"),R=c.paint.get("text-translate"),F=c.paint.get("icon-translate-anchor"),O=c.paint.get("text-translate-anchor"),j=c.layout.get("icon-rotation-alignment"),q=c.layout.get("text-rotation-alignment"),W=c.layout.get("icon-pitch-alignment"),te=c.layout.get("text-pitch-alignment"),ee=c.layout.get("icon-keep-upright"),ne=c.layout.get("text-keep-upright"),re=c.paint.get("icon-color-saturation"),ue=c.paint.get("icon-color-contrast"),ye=c.paint.get("icon-color-brightness-min"),ve=c.paint.get("icon-color-brightness-max"),be=c.layout.get("symbol-elevation-reference")==="sea",Me=p.context,we=Me.gl,Ee=p.transform,ke=j==="map",$e=q==="map",Oe=W==="map",Re=te==="map",st=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let dt=!1;const Et=p.depthModeForSublayer(0,gi.ReadOnly),Lt=[n.am(Ee.center.lng),n.at(Ee.center.lat)],jt=c.layout.get("text-variable-anchor"),Xe=Ee.projection.name==="globe",St=[],ct=[0,-1,0];for(const Mt of m){const Tt=o.getTile(Mt),wt=Tt.getBucket(c);if(!wt||wt.projection.name==="mercator"&&Xe||wt.fullyClipped)continue;const Gt=wt.projection.name==="globe",ui=Gt?n.a9(Ee.zoom):0,_i=Ra(Mt,wt.getProjection(),Ee),ii=Ee.calculatePixelsToTileUnitsMatrix(Tt),vi=jt&&wt.hasTextData(),Yt=wt.hasIconTextFit()&&vi&&wt.hasIconData(),Mi=wt.getProjection().createInversionMatrix(Ee,Mt.canonical),Ri=zr=>{Ee.depthOcclusionForSymbolsAndCircles&&(c.hasInitialOcclusionOpacityProperties||p.terrain)&&(zr.push("DEPTH_D24"),zr.push("DEPTH_OCCLUSION"))},tr=()=>{const zr=ke&&c.layout.get("symbol-placement")!=="point",xr=[];Ri(xr);const Yr=zr||Yt,$n=c.paint.get("icon-image-cross-fade").constantOr(0);p.terrainRenderModeElevated()&&Oe&&xr.push("PITCH_WITH_MAP_TERRAIN"),Gt&&(xr.push("PROJECTION_GLOBE_VIEW"),Yr&&xr.push("PROJECTED_POS_ON_VIEWPORT")),$n>0&&xr.push("ICON_TRANSITION"),wt.icon.zOffsetVertexBuffer&&xr.push("Z_OFFSET"),re===0&&ue===0&&ye===0&&ve===1||xr.push("COLOR_ADJUSTMENT"),wt.sdfIcons&&xr.push("RENDER_SDF");const ks=wt.icon.programConfigurations.get(c.id),Xs=p.getOrCreateProgram("symbol",{config:ks,defines:xr}),Hn=Tt.imageAtlasTexture?Tt.imageAtlasTexture.size:[0,0],ar=wt.iconSizeData,ir=n.bk(ar,Ee.zoom),gr=Oe||Ee.pitch!==0,Lr=Qi(_i,Tt.tileID.canonical,Oe,ke,Ee,wt.getProjection(),ii),vn=Er(_i,Tt.tileID.canonical,Oe,ke,Ee,wt.getProjection(),ii),Jr=p.translatePosMatrix(vn,Tt,D,F,!0),Qn=p.translatePosMatrix(_i,Tt,D,F),Ya=Yr?Bh:Lr,us=ke&&!Oe&&!zr;let hs=ct;!Xe&&!Ee.mercatorFromTransition||ke||(hs=bg(Ee));const Ys=Gt?hs:ct,xa=c.getColorAdjustmentMatrix(re,ue,ye,ve),ds=vg(ar.kind,ir,us,Oe,p,Qn,Ya,Jr,be,!1,Hn,[0,0],!0,Mt,ui,Lt,Mi,Ys,wt.getProjection(),xa,$n),Al=Tt.imageAtlasTexture?Tt.imageAtlasTexture:null,Js=c.layout.get("icon-size").constantOr(0)!==1||wt.iconsNeedLinear,Tr=wt.sdfIcons||p.options.rotating||p.options.zooming||Js||gr?we.LINEAR:we.NEAREST,ku=wt.sdfIcons&&c.paint.get("icon-halo-width").constantOr(1)!==0,Jp=p.terrain&&Oe&&zr?n.a6.mat4.invert(n.a6.mat4.create(),Lr):Bh;if(zr&&wt.icon){const Ru=Ee.elevation,Kp=Ru?Ru.getAtTileOffsetFunc(Mt,Ee.center.lat,Ee.worldSize,wt.getProjection()):null,Jh=rr(_i,Tt.tileID.canonical,Oe,ke,Ee,wt.getProjection(),ii);al(wt,_i,p,!1,Jh,vn,Oe,ee,Kp,Mt)}return{program:Xs,buffers:wt.icon,uniformValues:ds,atlasTexture:Al,atlasTextureIcon:null,atlasInterpolation:Tr,atlasInterpolationIcon:null,isSDF:wt.sdfIcons,hasHalo:ku,tile:Tt,labelPlaneMatrixInv:Jp}},kr=()=>{const zr=$e&&c.layout.get("symbol-placement")!=="point",xr=[],Yr=zr||jt||Yt;p.terrainRenderModeElevated()&&Re&&xr.push("PITCH_WITH_MAP_TERRAIN"),Gt&&(xr.push("PROJECTION_GLOBE_VIEW"),Yr&&xr.push("PROJECTED_POS_ON_VIEWPORT")),wt.text.zOffsetVertexBuffer&&xr.push("Z_OFFSET"),wt.iconsInText&&xr.push("RENDER_TEXT_AND_SYMBOL"),xr.push("RENDER_SDF"),Ri(xr);const $n=wt.text.programConfigurations.get(c.id),ks=p.getOrCreateProgram("symbol",{config:$n,defines:xr});let Xs,Hn=[0,0],ar=null;const ir=wt.textSizeData;wt.iconsInText&&(Hn=Tt.imageAtlasTexture?Tt.imageAtlasTexture.size:[0,0],ar=Tt.imageAtlasTexture?Tt.imageAtlasTexture:null,Xs=Re||Ee.pitch!==0||p.options.rotating||p.options.zooming||ir.kind==="composite"||ir.kind==="camera"?we.LINEAR:we.NEAREST);const gr=Tt.glyphAtlasTexture?Tt.glyphAtlasTexture.size:[0,0],Lr=c.layout.get("text-size-scale-range"),vn=n.ap(p.scaleFactor,Lr[0],Lr[1]),Jr=n.bk(ir,Ee.zoom,vn),Qn=Qi(_i,Tt.tileID.canonical,Re,$e,Ee,wt.getProjection(),ii),Ya=Er(_i,Tt.tileID.canonical,Re,$e,Ee,wt.getProjection(),ii),us=p.translatePosMatrix(Ya,Tt,R,O,!0),hs=p.translatePosMatrix(_i,Tt,R,O),Ys=Yr?Bh:Qn,xa=$e&&!Re&&!zr;let ds=ct;!Xe&&!Ee.mercatorFromTransition||$e||(ds=bg(Ee));const Al=vg(ir.kind,Jr,xa,Re,p,hs,Ys,us,be,!0,gr,Hn,!0,Mt,ui,Lt,Mi,Gt?ds:ct,wt.getProjection(),null,null,vn),Js=Tt.glyphAtlasTexture?Tt.glyphAtlasTexture:null,Tr=we.LINEAR,ku=c.paint.get("text-halo-width").constantOr(1)!==0,Jp=p.terrain&&Re&&zr?n.a6.mat4.invert(n.a6.mat4.create(),Qn):Bh;if(zr&&wt.text){const Ru=Ee.elevation,Kp=Ru?Ru.getAtTileOffsetFunc(Mt,Ee.center.lat,Ee.worldSize,wt.getProjection()):null,Jh=rr(_i,Tt.tileID.canonical,Re,$e,Ee,wt.getProjection(),ii);al(wt,_i,p,!0,Jh,Ya,Re,ne,Kp,Mt)}return{program:ks,buffers:wt.text,uniformValues:Al,atlasTexture:Js,atlasTextureIcon:ar,atlasInterpolation:Tr,atlasInterpolationIcon:Xs,isSDF:!0,hasHalo:ku,tile:Tt,labelPlaneMatrixInv:Jp}},cr=wt.icon.segments.get().length,jr=wt.text.segments.get().length,mr=cr&&!S.onlyText?tr():null,Rr=jr&&!S.onlyIcons?kr():null,Wi=c.paint.get("icon-opacity").constantOr(1),Dr=c.paint.get("text-opacity").constantOr(1);if(st&&wt.canOverlap){dt=!0;const zr=Wi&&!S.onlyText?wt.icon.segments.get():[],xr=Dr&&!S.onlyIcons?wt.text.segments.get():[];for(const Yr of zr)St.push({segments:new n.b2([Yr]),sortKey:Yr.sortKey,state:mr});for(const Yr of xr)St.push({segments:new n.b2([Yr]),sortKey:Yr.sortKey,state:Rr})}else S.onlyText||St.push({segments:Wi?wt.icon.segments:new n.b2([]),sortKey:0,state:mr}),S.onlyIcons||St.push({segments:Dr?wt.text.segments:new n.b2([]),sortKey:0,state:Rr})}dt&&St.sort((Mt,Tt)=>Mt.sortKey-Tt.sortKey);for(const Mt of St){const Tt=Mt.state;if(Tt)if(p.terrain?p.terrain.setupElevationDraw(Tt.tile,Tt.program,{useDepthForOcclusion:Ee.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Tt.labelPlaneMatrixInv}):p.setupDepthForOcclusion(Ee.depthOcclusionForSymbolsAndCircles,Tt.program),Me.activeTexture.set(we.TEXTURE0),Tt.atlasTexture&&Tt.atlasTexture.bind(Tt.atlasInterpolation,we.CLAMP_TO_EDGE,!0),Tt.atlasTextureIcon&&(Me.activeTexture.set(we.TEXTURE1),Tt.atlasTextureIcon&&Tt.atlasTextureIcon.bind(Tt.atlasInterpolationIcon,we.CLAMP_TO_EDGE,!0)),p.uploadCommonLightUniforms(p.context,Tt.program),Tt.hasHalo){const wt=Tt.uniformValues;wt.u_is_halo=1,Nh(Tt.buffers,Mt.segments,c,p,Tt.program,Et,v,b,wt,2),wt.u_is_halo=0}else{if(Tt.isSDF){const wt=Tt.uniformValues;Tt.hasHalo&&(wt.u_is_halo=1,Nh(Tt.buffers,Mt.segments,c,p,Tt.program,Et,v,b,wt,1)),wt.u_is_halo=0}Nh(Tt.buffers,Mt.segments,c,p,Tt.program,Et,v,b,Tt.uniformValues,1)}}}function Nh(p,o,c,m,v,b,S,D,R,F){const O=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.iconTransitioningVertexBuffer,p.globeExtVertexBuffer,p.zOffsetVertexBuffer];v.draw(m,m.context.gl.TRIANGLES,b,S,D,Si.disabled,R,c.id,p.layoutVertexBuffer,p.indexBuffer,o,c.paint,m.transform.zoom,p.programConfigurations.get(c.id),O,F)}function af(p,o,c,m,v,b,S){const D=p.context.gl,R=c.paint.get("fill-pattern"),F=c.is3D(),O=F?p.stencilModeFor3D():Ei.disabled,j=R&&R.constantOr(1);let q,W,te,ee,ne;S?(W=j&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=D.LINES):(W=j?"fillPattern":"fill",q=D.TRIANGLES);for(const re of m){const ue=o.getTile(re);if(j&&!ue.patternsLoaded())continue;const ye=ue.getBucket(c);if(!ye)continue;p.prepareDrawTile();const ve=ye.programConfigurations.get(c.id),be=p.isTileAffectedByFog(re),Me=p.getOrCreateProgram(W,{config:ve,overrideFog:be});j&&(p.context.activeTexture.set(D.TEXTURE0),ue.imageAtlasTexture&&ue.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),ve.updatePaintBuffers());const we=R.constantOr(null);if(we&&ue.imageAtlas){const $e=ue.imageAtlas.patternPositions[we.toString()];$e&&ve.setConstantPatternPositions($e)}const Ee=p.translatePosMatrix(re.projMatrix,ue,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor")),ke=c.paint.get("fill-emissive-strength");if(S){ee=ye.indexBuffer2,ne=ye.segments2;const $e=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[D.drawingBufferWidth,D.drawingBufferHeight];te=W==="fillOutlinePattern"&&j?xv(Ee,ke,p,ue,$e):Rh(Ee,ke,$e)}else ee=ye.indexBuffer,ne=ye.segments,te=j?xp(Ee,ke,p,ue):yg(Ee,ke);p.uploadCommonUniforms(p.context,Me,re.toUnwrapped()),Me.draw(p,q,v,F?O:p.stencilModeForClipping(re),b,Si.disabled,te,c.id,ye.layoutVertexBuffer,ee,ne,c.paint,p.transform.zoom,ve,void 0)}}function wo(p,o,c,m,v,b,S,D){c.resetLayerRenderingStats(p);const R=p.context,F=R.gl,O=p.transform,j=c.paint.get("fill-extrusion-pattern"),q=j.constantOr(1),W=c.paint.get("fill-extrusion-opacity"),te=p.style.enable3dLights(),ee=c.paint.get(te&&!q?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ne=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ee],re=c.layout.get("fill-extrusion-edge-radius"),ue=re>0&&!c.paint.get("fill-extrusion-rounded-roof"),ye=ue?0:re,ve=O.projection.name==="globe"?n.c_():0,be=O.projection.name==="globe",Me=be?n.a9(O.zoom):0,we=[n.am(O.center.lng),n.at(O.center.lat)],Ee=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(c.lut).toArray01().slice(0,3),ke=c.paint.get("fill-extrusion-flood-light-intensity"),$e=c.paint.get("fill-extrusion-vertical-scale"),Oe=c.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Re=c.paint.get("fill-extrusion-height-alignment"),st=c.paint.get("fill-extrusion-base-alignment"),dt=Ro(p,c.paint.get("fill-extrusion-cutoff-fade-range")),Et=[];let Lt;be&&Et.push("PROJECTION_GLOBE_VIEW"),ne[0]>0&&Et.push("FAUX_AO"),ue&&Et.push("ZERO_ROOF_RADIUS"),D&&Et.push("HAS_CENTROID"),ke>0&&Et.push("FLOOD_LIGHT"),dt.shouldRenderCutoff&&Et.push("RENDER_CUTOFF"),Oe&&Et.push("RENDER_WALL_MODE");const jt=p.renderPass==="shadow",Xe=p.shadowRenderer,St=jt&&!!Xe;p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!0);let ct=[0,0,0];if(Xe){const wt=p.style.directionalLight,Gt=p.style.ambientLight;wt&&Gt&&(ct=_l(p.style,wt,Gt)),jt||(Et.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Xe.useNormalOffset&&Et.push("NORMAL_OFFSET")),Lt=Et.concat(["SHADOWS_SINGLE_CASCADE"])}const Mt=St?"fillExtrusionDepth":q?"fillExtrusionPattern":"fillExtrusion",Tt=c.getLayerRenderingStats();for(const wt of m){const Gt=o.getTile(wt),ui=Gt.getBucket(c);if(!ui||ui.projection.name!==O.projection.name)continue;let _i=!1;Xe&&(_i=Xe.getMaxCascadeForTile(wt.toUnwrapped())===0);const ii=p.isTileAffectedByFog(wt),vi=ui.programConfigurations.get(c.id),Yt=p.getOrCreateProgram(Mt,{config:vi,defines:_i?Lt:Et,overrideFog:ii});if(p.terrain&&p.terrain.setupElevationDraw(Gt,Yt,{useMeterToDem:!0}),!ui.centroidVertexBuffer){const mr=Yt.attributes.a_centroid_pos;mr!==void 0&&F.vertexAttrib2f(mr,0,0)}!jt&&Xe&&Xe.setupShadows(Gt.tileID.toUnwrapped(),Yt,"vector-tile",Gt.tileID.overscaledZ),q&&(p.context.activeTexture.set(F.TEXTURE0),Gt.imageAtlasTexture&&Gt.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),vi.updatePaintBuffers());const Mi=j.constantOr(null);if(Mi&&Gt.imageAtlas){const mr=Gt.imageAtlas.patternPositions[Mi.toString()];mr&&vi.setConstantPatternPositions(mr)}const Ri=c.paint.get("fill-extrusion-vertical-gradient"),tr=1/ui.tileToMeter;let kr;if(jt&&Xe){if(Sg(Gt.tileID,ui,p))continue;const mr=Xe.calculateShadowPassMatrixFromTile(Gt.tileID.toUnwrapped());kr=yp(mr,ye,tr,$e,Re,st)}else{const mr=p.translatePosMatrix(wt.expandedProjMatrix,Gt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Rr=O.projection.createInversionMatrix(O,wt.canonical);kr=q?vp(mr,p,Ri,W,ne,ye,tr,wt,Gt,ve,Re,st,Me,we,Rr,Ee,$e):_p(mr,p,Ri,W,ne,ye,tr,wt,ve,Re,st,Me,we,Rr,Ee,$e,ke,ct)}p.uploadCommonUniforms(R,Yt,wt.toUnwrapped(),null,dt);let cr=ui.segments;if(O.projection.name==="mercator"&&!jt&&(cr=ui.getVisibleSegments(Gt.tileID,p.terrain,p.transform.getFrustum(0)),!cr.get().length))continue;if(Tt)if(jt)for(const mr of cr.get())Tt.numRenderedVerticesInShadowPass+=mr.primitiveLength;else for(const mr of cr.get())Tt.numRenderedVerticesInTransparentPass+=mr.primitiveLength;const jr=[];(p.terrain||D)&&jr.push(ui.centroidVertexBuffer),be&&jr.push(ui.layoutVertexExtBuffer),Oe&&jr.push(ui.wallVertexBuffer),Yt.draw(p,R.gl.TRIANGLES,v,b,S,Si.backCCW,kr,c.id,ui.layoutVertexBuffer,ui.indexBuffer,cr,c.paint,p.transform.zoom,vi,jr)}p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!1)}function Ds(p,o,c,m,v,b,S,D,R,F,O,j,q,W,te,ee,ne,re,ue){const ye=p.context,ve=ye.gl,be=p.transform,Me=p.transform.zoom,we=[],Ee=Ro(p,c.paint.get("fill-extrusion-cutoff-fade-range"));F==="clear"?(we.push("CLEAR_SUBPASS"),ue&&(we.push("CLEAR_FROM_TEXTURE"),ye.activeTexture.set(ve.TEXTURE0),ue.bind(ve.LINEAR,ve.CLAMP_TO_EDGE))):F==="sdf"&&we.push("SDF_SUBPASS"),ne&&we.push("HAS_CENTROID"),Ee.shouldRenderCutoff&&we.push("RENDER_CUTOFF");const ke=c.layout.get("fill-extrusion-edge-radius"),$e=(Oe,Re,st,dt,Et)=>{const Lt=Re.programConfigurations.get(c.id),jt=p.isTileAffectedByFog(Oe),Xe=p.getOrCreateProgram("fillExtrusionGroundEffect",{config:Lt,defines:we,overrideFog:jt}),St=((Mt,Tt,wt,Gt,ui,_i,ii,vi,Yt,Mi,Ri)=>({u_matrix:Tt,u_opacity:wt,u_ao_pass:Gt?1:0,u_meter_to_tile:ui,u_ao:_i,u_flood_light_intensity:ii,u_flood_light_color:vi,u_attenuation:Yt,u_edge_radius:Mi,u_fb:0,u_fb_size:Ri,u_dynamic_offset:1}))(0,dt,O,R,Et,[j,q*Et],W,te,ee,Me>=17?0:ke*Et,ue?ue.size[0]:0),ct=[];ne&&ct.push(Re.hiddenByLandmarkVertexBuffer),p.uploadCommonUniforms(ye,Xe,Oe.toUnwrapped(),null,Ee),Xe.draw(p,ye.gl.TRIANGLES,v,b,S,D,St,c.id,Re.vertexBuffer,Re.indexBuffer,st,c.paint,Me,Lt,ct)};for(const Oe of m){const Re=o.getTile(Oe),st=Re.getBucket(c);if(!st||st.projection.name!==be.projection.name||!st.groundEffect||st.groundEffect&&!st.groundEffect.hasData())continue;const dt=st.groundEffect,Et=1/st.tileToMeter;{const Lt=p.translatePosMatrix(Oe.projMatrix,Re,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),jt=dt.getDefaultSegment();$e(Oe,dt,jt,Lt,Et)}if(re)for(let Lt=0;Lt<4;Lt++){const jt=n.c$[Lt](Oe),Xe=o.getTile(jt);if(!Xe)continue;const St=Xe.getBucket(c);if(!St||St.projection.name!==be.projection.name||!St.groundEffect||St.groundEffect&&!St.groundEffect.hasData())continue;const ct=St.groundEffect;let Mt,Tt;Lt===0?(Mt=[-n.ab,0,0],Tt=1):Lt===1?(Mt=[n.ab,0,0],Tt=0):Lt===2?(Mt=[0,-n.ab,0],Tt=3):(Mt=[0,n.ab,0],Tt=2);const wt=ct.regionSegments[Tt];if(!wt)continue;const Gt=new Float32Array(16);n.a6.mat4.translate(Gt,Oe.projMatrix,Mt),$e(Oe,ct,wt,p.translatePosMatrix(Gt,Re,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Et)}}}function wg(p,o,c,m,v,b,S){m.centroidVertexArray.length===0&&m.createCentroidsBuffer();const D=b?b.findDEMTileFor(c):null;if(!(D&&D.dem||S))return;const R=re=>new n.P(Math.ceil((re+n.d2)*n.d3),0),F=re=>{const ue=o.getSource().minzoom,ye=be=>{const Me=o.getTileByID(be);if(Me&&Me.hasData())return Me.getBucket(v)},ve=[0,-1,1];for(const be of ve){if(re.overscaledZ+be<ue)continue;const Me=ye(re.calculateScaledKey(re.overscaledZ+be));if(Me)return Me}},O=[0,0,0],j=(re,ue)=>(O[0]=Math.min(re.min.y,ue.min.y),O[1]=Math.max(re.max.y,ue.max.y),O[2]=n.ab-ue.min.x>re.max.x?ue.min.x-n.ab:re.max.x,O),q=(re,ue)=>(O[0]=Math.min(re.min.x,ue.min.x),O[1]=Math.max(re.max.x,ue.max.x),O[2]=n.ab-ue.min.y>re.max.y?ue.min.y-n.ab:re.max.y,O),W=[(re,ue)=>j(re,ue),(re,ue)=>j(ue,re),(re,ue)=>q(re,ue),(re,ue)=>q(ue,re)],te=(re,ue,ye,ve,be,Me,we)=>{if(!b)return 0;const Ee=[[Me?ye:re,Me?re:ye,0],[Me?ye:ue,Me?ue:ye,0]],ke=we<0?n.ab+we:we,$e=[Me?ke:(re+ue)/2,Me?(re+ue)/2:ke,0];return ye===0&&we<0||ye!==0&&we>0?b.getForTilePoints(be,[$e],!0,ve):Ee.push($e),b.getForTilePoints(c,Ee,!0,D),Math.max(Ee[0][2],Ee[1][2],$e[2])/b.exaggeration()};for(let re=0;re<4;re++){const ue=m.borderFeatureIndices[re];if(ue.length===0)continue;const ye=n.c$[re](c),ve=F(ye);if(!(ve&&ve instanceof n.d0)||m.borderDoneWithNeighborZ[re]===ve.canonical.z)continue;ve.centroidVertexArray.length===0&&ve.createCentroidsBuffer();const be=b?b.findDEMTileFor(ye):null;if(!(be&&be.dem||S))continue;const Me=(re<2?1:5)-re,we=ve.borderDoneWithNeighborZ[Me]!==m.canonical.z,Ee=ve.borderFeatureIndices[Me];let ke=0;if(m.canonical.z!==ve.canonical.z){for(const $e of ue)m.showCentroid(m.featuresOnBorder[$e]);if(we)for(const $e of Ee)ve.showCentroid(ve.featuresOnBorder[$e]);m.borderDoneWithNeighborZ[re]=ve.canonical.z,ve.borderDoneWithNeighborZ[Me]=m.canonical.z}for(const $e of ue){const Oe=m.featuresOnBorder[$e],Re=m.centroidData[Oe.centroidDataIndex],st=Oe.borders[re];let dt;for(;ke<Ee.length;){dt=ve.featuresOnBorder[Ee[ke]];const Et=dt.borders[Me];if(Et[1]>st[0]+3||Et[0]>st[0]-3)break;ve.showCentroid(dt),ke++}if(dt&&ke<Ee.length){const Et=ke;let Lt=0;for(;!(dt.borders[Me][0]>st[1]-3)&&(Lt++,++ke!==Ee.length);)dt=ve.featuresOnBorder[Ee[ke]];dt=ve.featuresOnBorder[Ee[Et]];let jt=!1;if(Lt>=1){const ct=dt.borders[Me];Math.abs(st[0]-ct[0])<3&&Math.abs(st[1]-ct[1])<3&&(Lt=1,jt=!0,ke=Et+1)}else if(Lt===0){m.showCentroid(Oe);continue}const Xe=ve.centroidData[dt.centroidDataIndex];S&&jt&&(((ee=Re).flags|(ne=Xe).flags)&n.d1?(ee.flags|=n.d1,ne.flags|=n.d1):(ee.flags&=~n.d1,ne.flags&=~n.d1));const St=Oe.intersectsCount()>1||dt.intersectsCount()>1;if(Lt>1)ke=Et,Re.centroidXY=Xe.centroidXY=new n.P(0,0);else if(be&&be.dem&&!St){const ct=W[re](Re,Xe),Mt=re%2?n.ab-1:0,Tt=te(ct[0],Math.min(n.ab-1,ct[1]),Mt,be,ye,re<2,ct[2]);Re.centroidXY=Xe.centroidXY=R(Tt)}else St?Re.centroidXY=Xe.centroidXY=new n.P(0,0):(Re.centroidXY=m.encodeBorderCentroid(Oe),Xe.centroidXY=ve.encodeBorderCentroid(dt));m.writeCentroidToBuffer(Re),ve.writeCentroidToBuffer(Xe)}else m.showCentroid(Oe)}m.borderDoneWithNeighborZ[re]=ve.canonical.z,ve.borderDoneWithNeighborZ[Me]=m.canonical.z}var ee,ne;(m.needsCentroidUpdate||!m.centroidVertexBuffer&&m.centroidVertexArray.length!==0)&&m.uploadCentroid(p)}const Ip=[1,0,0],zp=[0,1,0],Dp=[0,0,1];function Sg(p,o,c){const m=c.transform,v=c.shadowRenderer;if(!v)return!0;const b=p.toUnwrapped(),S=m.tileSize*v._cascades[c.currentShadowCascade].scale;let D=o.maxHeight;if(m.elevation){const ee=m.elevation.getMinMaxForTile(p);ee&&(D+=ee.max)}const R=[...v.shadowDirection];R[2]=-R[2];const F=v.computeSimplifiedTileShadowVolume(b,D,S,R);if(!F)return!1;const O=[Ip,zp,Dp,R,[R[0],0,R[2]],[0,R[1],R[2]]],j=m.projection.name==="globe",q=m.scaleZoom(S),W=n.bO.fromInvProjectionMatrix(m.invProjMatrix,m.worldSize,q,!j),te=v.getCurrentCascadeFrustum();return W.intersectsPrecise(F.vertices,F.planes,O)===0||te.intersectsPrecise(F.vertices,F.planes,O)===0}function Ps(p){return[p[0]*n.d4,p[1]*n.d4,p[2]*n.d4,0]}function fn(p,o,c,m,v,b,S,D,R){const F=m.getSource(),O=c.globeSharedBuffers;if(!O)return;let j,q,W;if(o&&(j=m.getTile(o)),F instanceof n.aD?(q=F.texture,W=n.cD(0,0,c.transform)):j&&o&&(q=j.texture,W=n.cD(o.canonical.z,o.canonical.x,c.transform)),!q||!W)return;p||(W=n.a6.mat4.scale(n.a6.mat4.create(),W,[1,-1,1]));const te=c.context,ee=te.gl,ne=v.paint.get("raster-resampling")==="nearest"?ee.NEAREST:ee.LINEAR,re=c.colorModeForDrapableLayerRenderPass(b),ue=S.defines;ue.push("GLOBE_POLES");const ye=new gi(ee.LEQUAL,gi.ReadWrite,c.depthRangeFor3D),ve=Float32Array.from(c.transform.expandedFarZProjMatrix),be=Float32Array.from(n.b6(n.cC(new n.bQ(0,0,0))));c.terrain&&c.terrain.prepareDrawTile(),te.activeTexture.set(ee.TEXTURE0),q.bind(ne,ee.CLAMP_TO_EDGE),te.activeTexture.set(ee.TEXTURE1),q.bind(ne,ee.CLAMP_TO_EDGE),q.useMipmap&&te.extTextureFilterAnisotropic&&c.transform.pitch>20&&ee.texParameterf(ee.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax);const[Me,we,Ee,ke]=o?O.getPoleBuffers(o.canonical.z,!1):O.getPoleBuffers(0,!0),$e=v.paint.get("raster-elevation");let Oe;p?(Oe=Me,c.renderDefaultNorthPole=$e!==0):(Oe=we,c.renderDefaultSouthPole=$e!==0);const Re=Ps(S.mix),st=((Et,Lt,jt,Xe,St,ct,Mt,Tt,wt,Gt,ui,_i,ii)=>rf(Et,Lt,jt,new Float32Array(16),new Float32Array(9),[0,0],Xe,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ct,[0,0],Tt,2,Gt,ui,_i,1,0,ii))(ve,be,W,n.a9(c.transform.zoom),0,v,0,$e,0,Re,S.offset,S.range,b),dt=c.getOrCreateProgram("raster",{defines:ue});c.uploadCommonUniforms(te,dt,null),dt.draw(c,ee.TRIANGLES,ye,R,re,D,st,v.id,Oe,Ee,ke)}function lf(p){const o=p._nearZ,c=p.projection.farthestPixelDistance(p),m=c-o,v=.2*p.height,b=o+v;return[o,c,(b-v-o)/m,(b-o)/m]}function Pp(p,o,c,m){if(p)return o instanceof Ss&&p instanceof sl?o.getTextureDescriptor(p,c,!0):{texture:p.texture,mix:Ps(m.mix),offset:m.offset,buffer:0,tileSize:1}}var Mg=n.d5([{name:"a_index",type:"Int16",components:1}]);class Eg{constructor(o,c,m,v){const b={width:m[0],height:m[1],data:null},S=o.gl;this.targetColorTexture=new n.T(o,b,S.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(o,b,S.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(c,v),this.lastInvalidatedAt=0}updateParticleTexture(o,c){if(this.particleTextureDimension===c.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const m=this.context.gl,v=c.width*c.height;this.particleTexture0=new n.T(this.context,c,m.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,c,m.RGBA8,{premultiply:!1,useMipmap:!1});const b=new n.d6;b.reserve(v);for(let S=0;S<v;S++)b.emplaceBack(S);this.particleIndexBuffer=this.context.createVertexBuffer(b,Mg.members,!0),this.particleSegment=n.b2.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=c.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Tg(p,o,c){if(!p)return null;const m=o.getTextureDescriptor(p,c,!0);if(!m)return null;let{texture:v,mix:b,offset:S,tileSize:D,buffer:R,format:F}=m;if(!v||!F)return null;let O=!1;return F==="uint32"&&(O=!0,b[3]=0,b=tf(n.d7,b,[0,c.paint.get("raster-particle-max-speed")]),S=xu(n.d7,S,[0,c.paint.get("raster-particle-max-speed")])),{texture:v,textureOffset:[R/(D+2*R),D/(D+2*R)],tileSize:D,scalarData:O,scale:b,offset:S,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[F]]}}function Ev(p){const o=p._nearZ,c=p.projection.farthestPixelDistance(p),m=c-o,v=.2*p.height,b=o+v;return[o,c,(b-v-o)/m,(b-o)/m]}const wu=new n.bA(1,0,0,1),Su=new n.bA(0,1,0,1),Ft=new n.bA(0,0,1,1),pi=new n.bA(1,0,1,1),Mu=new n.bA(0,1,1,1);function Hr(p,o,c,m,v,b,S){const D=p.context,R=p.transform,F=D.gl,O=R.projection.name==="globe",j=O?["PROJECTION_GLOBE_VIEW"]:[];let q=n.a6.mat4.clone(c.projMatrix);if(O&&n.a9(R.zoom)>0){const Re=n.b5(c.canonical,R),st=n.d8(Re);q=n.a6.mat4.multiply(new Float32Array(16),R.globeMatrix,st),n.a6.mat4.multiply(q,R.projMatrix,q)}const W=n.a6.mat4.create();W[12]+=2*v/(n.q.devicePixelRatio*R.width),W[13]+=2*b/(n.q.devicePixelRatio*R.height),n.a6.mat4.multiply(q,W,q);const te=p.getOrCreateProgram("debug",{defines:j}),ee=o.getTileByID(c.key);p.terrain&&p.terrain.setupElevationDraw(ee,te);const ne=gi.disabled,re=Ei.disabled,ue=p.colorModeForRenderPass(),ye="$debug";D.activeTexture.set(F.TEXTURE0),p.emptyTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),O?ee._makeGlobeTileDebugBuffers(p.context,R):ee._makeDebugTileBoundsBuffers(p.context,R.projection);const ve=ee._tileDebugBuffer||p.debugBuffer,be=ee._tileDebugIndexBuffer||p.debugIndexBuffer,Me=ee._tileDebugSegments||p.debugSegments;if(te.draw(p,F.LINE_STRIP,ne,re,ue,Si.disabled,bp(q,m),ye,ve,be,Me,null,null,null,[ee._globeTileDebugBorderBuffer]),S){const Re=ee.latestRawTileData,st=Math.floor((Re&&Re.byteLength||0)/1024);let dt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(dt+=` => ${c.overscaledZ}`),dt+=` ${ee.state}`,dt+=` ${st}kb`,function(Et,Lt){Et.initDebugOverlayCanvas();const jt=Et.debugOverlayCanvas,Xe=Et.context.gl,St=Et.debugOverlayCanvas.getContext("2d");St.clearRect(0,0,jt.width,jt.height),St.shadowColor="white",St.shadowBlur=2,St.lineWidth=1.5,St.strokeStyle="white",St.textBaseline="top",St.font="bold 36px Open Sans, sans-serif",St.fillText(Lt,5,5),St.strokeText(Lt,5,5),Et.debugOverlayTexture.update(jt),Et.debugOverlayTexture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE)}(p,dt)}const we=o.getTile(c).tileSize,Ee=512/Math.min(we,512)*(c.overscaledZ/R.zoom)*.5,ke=ee._tileDebugTextBuffer||p.debugBuffer,$e=ee._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Oe=ee._tileDebugTextSegments||p.debugSegments;te.draw(p,F.TRIANGLES,ne,re,qi.alphaBlended,Si.disabled,bp(q,n.bA.transparent,Ee),ye,ke,$e,Oe,null,null,null,[ee._globeTileDebugTextBuffer])}function it(p,o,c,m){Vc(p,0,o+c/2,p.transform.width,c,m)}function kp(p,o,c,m){Vc(p,o-c/2,0,c,p.transform.height,m)}function Vc(p,o,c,m,v,b){const S=p.context,D=S.gl;D.enable(D.SCISSOR_TEST),D.scissor(o*n.q.devicePixelRatio,c*n.q.devicePixelRatio,m*n.q.devicePixelRatio,v*n.q.devicePixelRatio),S.clear({color:b}),D.disable(D.SCISSOR_TEST)}const Rp=n.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:cf}=Rp;function bl(p,o,c,m){p.emplaceBack(o,c,m)}class Lp{constructor(o){this.vertexArray=new n.d9,this.indices=new n.aP,bl(this.vertexArray,-1,-1,1),bl(this.vertexArray,1,-1,1),bl(this.vertexArray,-1,1,1),bl(this.vertexArray,1,1,1),bl(this.vertexArray,-1,-1,-1),bl(this.vertexArray,1,-1,-1),bl(this.vertexArray,-1,1,-1),bl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,cf),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=n.b2.simpleSegment(0,0,36,12)}}function ya(p,o,c,m,v,b){const S=p.context.gl,D=o.paint.get("sky-atmosphere-color"),R=o.paint.get("sky-atmosphere-halo-color"),F=o.paint.get("sky-atmosphere-sun-intensity"),O=((j,q,W,te,ee)=>({u_matrix_3f:j,u_sun_direction:q,u_sun_intensity:W,u_color_tint_r:[te.r,te.g,te.b,te.a],u_color_tint_m:[ee.r,ee.g,ee.b,ee.a],u_luminance:5e-5}))(n.a6.mat3.fromMat4(n.a6.mat3.create(),m),v,F,D,R);S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+b,o.skyboxTexture,0),c.draw(p,S.TRIANGLES,gi.disabled,Ei.disabled,qi.unblended,Si.frontCW,O,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Tv=n.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Cv{constructor(o){const c=new n.da;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const m=new n.aP;m.emplaceBack(0,1,2),m.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(c,Tv.members),this.indexBuffer=o.createIndexBuffer(m),this.segments=n.b2.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Cg=n.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class uf{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Op{constructor(o){this.colorModeAlphaBlendedWriteRGB=new qi([1,Go,1,Go],n.bA.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new qi([1,0,1,0],n.bA.transparent,[!1,!1,!1,!0]),this.params=new uf,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const c=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Cv(c);const m=this.params.sizeRange,v=this.params.intensityRange,b=function(O){const j=n.dd(30),q=[];for(let W=0;W<O;++W){const te=2*Math.PI*j(),ee=Math.acos(1-2*j())-.5*Math.PI;q.push(n.a6.vec3.fromValues(Math.cos(ee)*Math.cos(te),Math.cos(ee)*Math.sin(te),Math.sin(ee)))}return q}(this.params.starsCount),S=n.dd(300),D=new n.db,R=new n.aP;let F=0;for(let O=0;O<b.length;++O){const j=n.a6.vec3.scale([],b[O],200),q=Math.max(0,1+.01*m*(1*S()-.5)),W=Math.max(0,1+.01*v*(1*S()-.5));D.emplaceBack(j[0],j[1],j[2],-1,-1,q,W),D.emplaceBack(j[0],j[1],j[2],1,-1,q,W),D.emplaceBack(j[0],j[1],j[2],1,1,q,W),D.emplaceBack(j[0],j[1],j[2],-1,1,q,W),R.emplaceBack(F+0,F+1,F+2),R.emplaceBack(F+0,F+2,F+3),F+=4}this.starsVx=c.createVertexBuffer(D,Cg.members),this.starsIdx=c.createIndexBuffer(R),this.starsSegments=n.b2.simpleSegment(0,0,D.length,R.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,c){const m=o.context,v=m.gl,b=o.transform,S=new gi(v.LEQUAL,gi.ReadOnly,[0,1]),D=n.a9(b.zoom),R=o.style.getLut(c.scope),F=c.properties.get("color").toRenderColor(R).toArray01(),O=c.properties.get("high-color").toRenderColor(R).toArray01(),j=c.properties.get("space-color").toRenderColor(R).toArray01PremultipliedAlpha(),q=5e-4,W=n.dc(c.properties.get("horizon-blend"),0,1,q,.25),te=n.cx(o,m,b)&&W===q?b.worldSize/(2*Math.PI*1.025)-1:b.globeRadius,ee=o.frameCounter/1e3%1,ne=n.a6.vec3.length(b.globeCenterInViewSpace),re=Math.sqrt(Math.pow(ne,2)-Math.pow(te,2)),ue=Math.acos(re/ne),ye=ve=>{const be=b.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ve&&be.push("ALPHA_PASS");const Me=o.getOrCreateProgram("globeAtmosphere",{defines:be}),we=((ke,$e,Oe,Re,st,dt,Et,Lt,jt,Xe,St,ct)=>({u_frustum_tl:ke,u_frustum_tr:$e,u_frustum_br:Oe,u_frustum_bl:Re,u_horizon:st,u_transition:dt,u_fadeout_range:Et,u_color:Lt,u_high_color:jt,u_space_color:Xe,u_temporal_offset:St,u_horizon_angle:ct}))(b.frustumCorners.TL,b.frustumCorners.TR,b.frustumCorners.BR,b.frustumCorners.BL,b.frustumCorners.horizon,D,W,F,O,j,ee,ue);o.uploadCommonUniforms(m,Me);const Ee=this.atmosphereBuffer;Ee&&Me.draw(o,v.TRIANGLES,S,Ei.disabled,ve?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Si.backCW,we,ve?"atmosphere_glow_alpha":"atmosphere_glow",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)};ye(!1),ye(!0)}drawStars(o,c){const m=n.ap(c.properties.get("star-intensity"),0,1);if(m===0)return;const v=o.context,b=v.gl,S=o.transform,D=o.getOrCreateProgram("stars"),R=n.a6.quat.identity([]);n.a6.quat.rotateX(R,R,-S._pitch),n.a6.quat.rotateZ(R,R,-S.angle),n.a6.quat.rotateX(R,R,n.bC(S._center.lat)),n.a6.quat.rotateY(R,R,-n.bC(S._center.lng));const F=n.a6.mat4.fromQuat(new Float32Array(16),R),O=n.a6.mat4.multiply([],S.starsProjMatrix,F),j=n.a6.mat3.fromMat4([],F),q=n.a6.mat3.invert([],j),W=[0,1,0];n.a6.vec3.transformMat3(W,W,q),n.a6.vec3.scale(W,W,this.params.sizeMultiplier);const te=[1,0,0];n.a6.vec3.transformMat3(te,te,q),n.a6.vec3.scale(te,te,this.params.sizeMultiplier);const ee=(ne=W,re=te,ue=m,{u_matrix:Float32Array.from(O),u_up:ne,u_right:re,u_intensity_multiplier:ue});var ne,re,ue;o.uploadCommonUniforms(v,D),this.starsVx&&this.starsIdx&&D.draw(o,b.TRIANGLES,gi.disabled,Ei.disabled,this.colorModeAlphaBlendedWriteRGB,Si.disabled,ee,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Bp(p,o){const c=[...p],m=o.cameraWorldSizeForFog/o.worldSize,v=n.a6.mat4.identity([]);return n.a6.mat4.scale(v,v,[m,m,1]),n.a6.mat4.multiply(c,v,c),n.a6.mat4.multiply(c,o.worldToFogMatrix,c),c}function hf(p,o,c,m,v){const b=c.material,S=m.context,{baseColorTexture:D,metallicRoughnessTexture:R}=b.pbrMetallicRoughness,{normalTexture:F,occlusionTexture:O,emissionTexture:j}=b;function q(te,ee,ne){if(te&&(p.push(ee),S.activeTexture.set(S.gl.TEXTURE0+ne),te.gfxTexture)){const{minFilter:re,magFilter:ue,wrapS:ye,wrapT:ve}=te.sampler;te.gfxTexture.bindExtraParam(re,ue,ye,ve)}}q(D,"HAS_TEXTURE_u_baseColorTexture",so.BaseColor),q(R,"HAS_TEXTURE_u_metallicRoughnessTexture",so.MetallicRoughness),q(F,"HAS_TEXTURE_u_normalTexture",so.Normal),q(O,"HAS_TEXTURE_u_occlusionTexture",so.Occlusion),q(j,"HAS_TEXTURE_u_emissionTexture",so.Emission),v&&(v.texture||(v.texture=new n.df(m.context,v.image,[v.image.height,v.image.height,v.image.height],S.gl.RGBA8)),S.activeTexture.set(S.gl.TEXTURE0+so.LUT),v.texture&&v.texture.bind(S.gl.LINEAR,S.gl.CLAMP_TO_EDGE),p.push("APPLY_LUT_ON_GPU")),c.texcoordBuffer&&(p.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(c.texcoordBuffer)),c.colorBuffer&&(p.push(c.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(c.colorBuffer)),c.normalBuffer&&(p.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(c.normalBuffer)),c.pbrBuffer&&(p.push("HAS_ATTRIBUTE_a_pbr"),p.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(c.pbrBuffer)),b.alphaMode!=="OPAQUE"&&b.alphaMode!=="MASK"||p.push("UNPREMULT_TEXTURE_IN_SHADER"),b.defined||p.push("DIFFUSE_SHADED"),p.push("USE_STANDARD_DERIVATIVES");const W=m.shadowRenderer;W&&(p.push("RENDER_SHADOWS","DEPTH_TEXTURE"),W.useNormalOffset&&p.push("NORMAL_OFFSET"))}function qc(p,o,c,m,v,b){const S=c.paint.get("model-opacity"),D=o.context,R=new gi(o.context.gl.LEQUAL,gi.ReadWrite,o.depthRangeFor3D),F=o.transform,O=p.mesh,j=O.material,q=j.pbrMetallicRoughness,W=o.style.fog;let te;te=o.transform.projection.zAxisUnit==="pixels"?[...p.nodeModelMatrix]:n.a6.mat4.multiply([],m.zScaleMatrix,p.nodeModelMatrix),n.a6.mat4.multiply(te,m.negCameraPosMatrix,te);const ee=n.a6.mat4.invert([],te);n.a6.mat4.transpose(ee,ee);const ne=c.paint.get("model-emissive-strength").constantOr(0),re=sf(new Float32Array(p.worldViewProjection),new Float32Array(te),new Float32Array(ee),null,o,S,q.baseColorFactor.toRenderColor(null),j.emissiveFactor,q.metallicFactor,q.roughnessFactor,j,ne,c),ue={defines:[]},ye=[],ve=o.shadowRenderer;ve&&(ve.useNormalOffset=!1),hf(ue.defines,ye,O,o,c.lut);let be=null;if(W){const Ee=Bp(p.nodeModelMatrix,o.transform);if(be=new Float32Array(Ee),F.projection.name!=="globe"){const ke=O.aabb.min,$e=O.aabb.max,[Oe,Re]=W.getOpacityForBounds(Ee,ke[0],ke[1],$e[0],$e[1]);ue.overrideFog=Oe>=kt||Re>=kt}}const Me=Ro(o,c.paint.get("model-cutoff-fade-range"));Me.shouldRenderCutoff&&ue.defines.push("RENDER_CUTOFF");const we=o.getOrCreateProgram("model",ue);o.uploadCommonUniforms(D,we,null,be,Me),o.renderPass!=="shadow"&&ve&&ve.setupShadowsFromMatrix(p.nodeModelMatrix,we),we.draw(o,D.gl.TRIANGLES,R,v,b,O.material.doubleSided?Si.disabled:Si.backCCW,re,c.id,O.vertexBuffer,O.indexBuffer,O.segments,c.paint,o.transform.zoom,void 0,ye)}function $h(p,o,c,m,v,b,S){let D;D=p.projection.name==="globe"?n.dg(c,p):[...c],n.a6.mat4.multiply(D,D,o.matrix);const R=n.a6.mat4.multiply([],m,D);if(o.meshes)for(const F of o.meshes){if(F.material.alphaMode!=="BLEND"){S.push({mesh:F,depth:0,modelIndex:v,worldViewProjection:R,nodeModelMatrix:D});continue}const O=n.a6.vec3.transformMat4([],F.centroid,R);O[2]>0&&b.push({mesh:F,depth:O[2],modelIndex:v,worldViewProjection:R,nodeModelMatrix:D})}if(o.children)for(const F of o.children)$h(p,F,c,m,v,b,S)}function df(p,o,c,m){const v=c.shadowRenderer;if(!v)return;const b=v.getShadowPassDepthMode(),S=v.getShadowPassColorMode(),D=v.calculateShadowPassMatrixFromMatrix(o),R=Ep(D);c.getOrCreateProgram("modelDepth",{defines:c._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(c,c.context.gl.TRIANGLES,b,Ei.disabled,S,Si.backCCW,R,m.id,p.vertexBuffer,p.indexBuffer,p.segments,m.paint,c.transform.zoom,void 0,void 0)}function Ag(p,o,c){const m=o.updateZoomBasedPaintProperties(),v=function(b,S,D){let R,F,O,j=b.terrain?b.terrain.exaggeration():0;if(b.terrain&&j>0){const q=b.terrain,W=q.findDEMTileFor(D);W&&W.dem?R=n.di.create(q,D,W):j=0}if(j===0&&(S.terrainElevationMin=0,S.terrainElevationMax=0),j===S.validForExaggeration&&(j===0||R&&R._demTile&&R._demTile.tileID===S.validForDEMTile.id&&R._dem._timestamp===S.validForDEMTile.timestamp))return!1;for(const q in S.instancesPerModel){const W=S.instancesPerModel[q];for(let te=0;te<W.instancedDataArray.length;++te){const ee=(R?j*R.getElevationAt(0|W.instancedDataArray.float32[16*te],0|W.instancedDataArray.float32[16*te+1],!0,!0):0)+W.instancesEvaluatedElevation[te];W.instancedDataArray.float32[16*te+6]=ee,F=F?Math.min(S.terrainElevationMin,ee):ee,O=O?Math.max(S.terrainElevationMax,ee):ee}}return S.terrainElevationMin=F||0,S.terrainElevationMax=O||0,S.validForExaggeration=j,S.validForDEMTile=R&&R._demTile?{id:R._demTile.tileID,timestamp:R._dem._timestamp}:{id:void 0,timestamp:0},!0}(p,o,c);(m||v)&&(o.uploaded=!1,o.upload(p.context))}const Wa={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.ca([0,0,0],[n.ab,n.ab,0])};function Yo(p,o){const c=1<<p.canonical.z,m=o.getFreeCameraOptions().position,v=o.elevation,b=p.canonical.x/c,S=(p.canonical.x+1)/c,D=p.canonical.y/c,R=(p.canonical.y+1)/c;let F=o._centerAltitude;if(v){const W=v.getMinMaxForTile(p);W&&W.max>F&&(F=W.max)}const O=n.ap(m.x,b,S)-m.x,j=n.ap(m.y,D,R)-m.y,q=n.bE(F,o.center.lat)-m.z;return o._zoomFromMercatorZ(Math.sqrt(O*O+j*j+q*q))}function Ig(p,o,c,m,v,b,S){const D=p.context,R=p.renderPass==="shadow",F=p.shadowRenderer,O=R&&F?F.getShadowPassDepthMode():new gi(D.gl.LEQUAL,gi.ReadWrite,p.depthRangeFor3D),j=p.isTileAffectedByFog(b);if(c.meshes)for(const q of c.meshes){const W=["MODEL_POSITION_ON_GPU"],te=[];let ee,ne,re;m.instancedDataArray.length>20&&W.push("INSTANCED_ARRAYS");const ue=Ro(p,o.paint.get("model-cutoff-fade-range"));if(ue.shouldRenderCutoff&&W.push("RENDER_CUTOFF"),R&&F)ee=p.getOrCreateProgram("modelDepth",{defines:W}),ne=Ep(S.shadowTileMatrix,S.shadowTileMatrix,Float32Array.from(c.matrix)),re=F.getShadowPassColorMode();else{hf(W,te,q,p,o.lut),ee=p.getOrCreateProgram("model",{defines:W,overrideFog:j});const ve=q.material,be=ve.pbrMetallicRoughness,Me=o.paint.get("model-opacity"),we=o.paint.get("model-emissive-strength").constantOr(0);ne=sf(b.expandedProjMatrix,Float32Array.from(c.matrix),new Float32Array(16),null,p,Me,be.baseColorFactor.toRenderColor(null),ve.emissiveFactor,be.metallicFactor,be.roughnessFactor,ve,we,o,v),F&&(S.shadowUniformsInitialized?ee.setShadowUniformValues(D,F.getShadowUniformValues()):(F.setupShadows(b.toUnwrapped(),ee,"model-tile",b.overscaledZ),S.shadowUniformsInitialized=!0)),re=ue.shouldRenderCutoff||Me<1||ve.alphaMode!=="OPAQUE"?qi.alphaBlended:qi.unblended}p.uploadCommonUniforms(D,ee,b.toUnwrapped(),null,ue);const ye=q.material.doubleSided?Si.disabled:Si.backCCW;if(m.instancedDataArray.length>20)te.push(m.instancedDataBuffer),ee.draw(p,D.gl.TRIANGLES,O,Ei.disabled,re,ye,ne,o.id,q.vertexBuffer,q.indexBuffer,q.segments,o.paint,p.transform.zoom,void 0,te,m.instancedDataArray.length);else{const ve=R?"u_instance":"u_normal_matrix";for(let be=0;be<m.instancedDataArray.length;++be)ne[ve]=new Float32Array(m.instancedDataArray.arrayBuffer,64*be,16),ee.draw(p,D.gl.TRIANGLES,O,Ei.disabled,re,ye,ne,o.id,q.vertexBuffer,q.indexBuffer,q.segments,o.paint,p.transform.zoom,void 0,te)}}if(c.children)for(const q of c.children)Ig(p,o,q,m,v,b,S)}const jh=[1,-1,1];function Gr(p,o,c,m){if(!c.modelManager)return!0;const v=c.modelManager;if(!c.shadowRenderer)return!0;const b=c.shadowRenderer,S=o.aabb;let D=!0,R=p.maxHeight;if(R===0){let O=0;for(const j in p.instancesPerModel){const q=v.getModel(j,m);q?O=Math.max(O,Math.max(Math.max(q.aabb.max[0],q.aabb.max[1]),q.aabb.max[2])):D=!1}R=p.maxScale*O*1.41+p.maxVerticalOffset,D&&(p.maxHeight=R)}S.max[2]=R,S.min[2]+=p.terrainElevationMin,S.max[2]+=p.terrainElevationMax,n.a6.vec3.transformMat4(S.min,S.min,o.tileMatrix),n.a6.vec3.transformMat4(S.max,S.max,o.tileMatrix);const F=S.intersects(b.getCurrentCascadeFrustum());return c.currentShadowCascade===0&&(p.isInsideFirstShadowMapFrustum=F===2),F===0}function dr(p,o){const c=p.uniformValues.u_cutoff_params[0],m=p.uniformValues.u_cutoff_params[1],v=p.uniformValues.u_cutoff_params[2],b=p.uniformValues.u_cutoff_params[3];return m===c||b===v?1:n.ap(((o-c)/(m-c)-v)/(b-v),0,1)}function zg(p,o,c,m){if(o.pitch<20)return 1;const v=o.getWorldToCameraMatrix();n.a6.mat4.multiply(v,v,p);const b=n.a6.vec4.fromValues(c.min[0],c.min[1],c.min[2],1);let S=n.a6.vec4.transformMat4(n.a6.vec4.create(),b,v),D=S,R=S;b[1]=c.max[1],S=n.a6.vec4.transformMat4(n.a6.vec4.create(),b,v),D=S[1]<D[1]?S:D,R=S[1]>R[1]?S:R,b[0]=c.max[0],S=n.a6.vec4.transformMat4(n.a6.vec4.create(),b,v),D=S[1]<D[1]?S:D,R=S[1]>R[1]?S:R,b[1]=c.min[1],S=n.a6.vec4.transformMat4(n.a6.vec4.create(),b,v),D=S[1]<D[1]?S:D,R=S[1]>R[1]?S:R;const F=n.ap(m[0],0,1),O=100*o.pixelsPerMeter*n.ap(m[1],0,1),j=n.ap(m[2],0,1),q=n.a6.vec4.lerp(n.a6.vec4.create(),D,R,F),W=Math.tan(.5*o.fovX),te=-q[2]*W;if(O===0)return q[1]<-Math.abs(te)?j:1;const ee=(-Math.abs(te)-q[1])/O,ne=(ue,ye,ve)=>(1-ve)*ue+ve*ye,re=n.ap(ne(1,j,ee),j,1);return ne(1,re,n.ap((o.pitch-20)/20,0,1))}class nc{}class ff{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,c,m){{const j=this._storage.get(c.id);if(j)return j.lastUsedFrameIdx=o,j.buf}const v=m.gl,b=v.getBufferParameter(v.ELEMENT_ARRAY_BUFFER,v.BUFFER_SIZE),S=new ArrayBuffer(b),D=new Int16Array(S);v.getBufferSubData(v.ELEMENT_ARRAY_BUFFER,0,new Int16Array(S));const R=new n.dk;for(let j=0;j<b/2;j+=3){const q=D[j],W=D[j+1],te=D[j+2];R.emplaceBack(q,W),R.emplaceBack(W,te),R.emplaceBack(te,q)}const F=m.bindVertexArrayOES.current,O=new nc;return O.buf=new cs(m,R),O.lastUsedFrameIdx=o,this._storage.set(c.id,O),m.bindVertexArrayOES.set(F),O.buf}update(o){for(const[c,m]of this._storage)o-m.lastUsedFrameIdx>30&&(m.buf.destroy(),this._storage.delete(c))}destroy(){for(const[o,c]of this._storage)c.buf.destroy(),this._storage.delete(o)}}class Eu{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}class Fp{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}const Uh={symbol:function(p,o,c,m,v){if(p.renderPass!=="translucent")return;const b=Ei.disabled,S=p.colorModeForRenderPass(),D=c.layout.get("text-variable-anchor"),R=c.layout.get("text-size-scale-range"),F=n.ap(p.scaleFactor,R[0],R[1]);D&&function(q,W,te,ee,ne,re,ue,ye){const ve=W.transform,be=ne==="map",Me=re==="map";for(const we of q){const Ee=ee.getTile(we),ke=Ee.getBucket(te);if(!ke||!ke.text||!ke.text.segments.get().length)continue;const $e=n.bk(ke.textSizeData,ve.zoom,ye),Oe=Ra(we,ke.getProjection(),ve),Re=ve.calculatePixelsToTileUnitsMatrix(Ee),st=Qi(Oe,Ee.tileID.canonical,Me,be,ve,ke.getProjection(),Re),dt=ke.hasIconTextFit()&&ke.hasIconData();if($e){const Et=Math.pow(2,ve.zoom-Ee.tileID.overscaledZ);Ap(ke,be,Me,ue,n.cS,ve,st,we,Et,$e,dt)}}}(m,p,c,o,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),v,F);const O=c.paint.get("icon-opacity").constantOr(1)!==0,j=c.paint.get("text-opacity").constantOr(1)!==0;c.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(O||j)?Fh(p,o,c,m,b,S):(O&&Fh(p,o,c,m,b,S,{onlyIcons:!0}),j&&Fh(p,o,c,m,b,S,{onlyText:!0})),o.map.showCollisionBoxes&&(Cp(p,o,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Cp(p,o,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(p,o,c,m){if(p.renderPass!=="translucent")return;const v=c.paint.get("circle-opacity"),b=c.paint.get("circle-stroke-width"),S=c.paint.get("circle-stroke-opacity"),D=c.layout.get("circle-sort-key").constantOr(1)!==void 0,R=c.paint.get("circle-emissive-strength");if(v.constantOr(1)===0&&(b.constantOr(1)===0||S.constantOr(1)===0))return;const F=p.context,O=F.gl,j=p.transform,q=p.depthModeForSublayer(0,gi.ReadOnly),W=Ei.disabled,te=p.colorModeForDrapableLayerRenderPass(R),ee=j.projection.name==="globe",ne=[n.am(j.center.lng),n.at(j.center.lat)],re=[];for(let ye=0;ye<m.length;ye++){const ve=m[ye],be=o.getTile(ve),Me=be.getBucket(c);if(!Me||Me.projection.name!==j.projection.name)continue;const we=Me.programConfigurations.get(c.id),Ee=n.cT(c),ke=p.isTileAffectedByFog(ve);ee&&Ee.push("PROJECTION_GLOBE_VIEW"),Ee.push("DEPTH_D24"),p.terrain&&j.depthOcclusionForSymbolsAndCircles&&Ee.push("DEPTH_OCCLUSION");const $e=p.getOrCreateProgram("circle",{config:we,defines:Ee,overrideFog:ke}),Oe=Me.layoutVertexBuffer,Re=Me.globeExtVertexBuffer,st=Me.indexBuffer,dt=j.projection.createInversionMatrix(j,ve.canonical),Et={programConfiguration:we,program:$e,layoutVertexBuffer:Oe,globeExtVertexBuffer:Re,indexBuffer:st,uniformValues:n.cU(p,ve,be,dt,ne,c),tile:be};if(D){const Lt=Me.segments.get();for(const jt of Lt)re.push({segments:new n.b2([jt]),sortKey:jt.sortKey,state:Et})}else re.push({segments:Me.segments,sortKey:0,state:Et})}D&&re.sort((ye,ve)=>ye.sortKey-ve.sortKey);const ue={useDepthForOcclusion:j.depthOcclusionForSymbolsAndCircles};for(const ye of re){const{programConfiguration:ve,program:be,layoutVertexBuffer:Me,globeExtVertexBuffer:we,indexBuffer:Ee,uniformValues:ke,tile:$e}=ye.state,Oe=ye.segments;p.terrain&&p.terrain.setupElevationDraw($e,be,ue),p.uploadCommonUniforms(F,be,$e.tileID.toUnwrapped()),be.draw(p,O.TRIANGLES,q,W,te,Si.disabled,ke,c.id,Me,Ee,Oe,c.paint,j.zoom,ve,[we])}},heatmap:function(p,o,c,m){if(c.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const v=p.context,b=v.gl,S=Ei.disabled,D=new qi([b.ONE,b.ONE,b.ONE,b.ONE],n.bA.transparent,[!0,!0,!0,!0]);(function(W,te,ee,ne){const re=W.gl,ue=te.width*ne,ye=te.height*ne;W.activeTexture.set(re.TEXTURE1),W.viewport.set([0,0,ue,ye]);let ve=ee.heatmapFbo;if(!ve||ve&&(ve.width!==ue||ve.height!==ye)){ve&&ve.destroy();const be=re.createTexture();re.bindTexture(re.TEXTURE_2D,be),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,re.LINEAR),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,re.LINEAR),ve=ee.heatmapFbo=W.createFramebuffer(ue,ye,!0,null),function(Me,we,Ee,ke,$e,Oe){const Re=Me.gl;Re.texImage2D(Re.TEXTURE_2D,0,Me.extRenderToTextureHalfFloat?Re.RGBA16F:Re.RGBA,$e,Oe,0,Re.RGBA,Me.extRenderToTextureHalfFloat?Re.HALF_FLOAT:Re.UNSIGNED_BYTE,null),ke.colorAttachment.set(Ee)}(W,0,be,ve,ue,ye)}else re.bindTexture(re.TEXTURE_2D,ve.colorAttachment.get()),W.bindFramebuffer.set(ve.framebuffer)})(v,p,c,p.transform.projection.name==="globe"?.5:.25),v.clear({color:n.bA.transparent});const R=p.transform,F=R.projection.name==="globe",O=F?["PROJECTION_GLOBE_VIEW"]:[],j=F?Si.frontCCW:Si.disabled,q=[n.am(R.center.lng),n.at(R.center.lat)];for(let W=0;W<m.length;W++){const te=m[W];if(o.hasRenderableParent(te))continue;const ee=o.getTile(te),ne=ee.getBucket(c);if(!ne||ne.projection.name!==R.projection.name)continue;const re=p.isTileAffectedByFog(te),ue=ne.programConfigurations.get(c.id),ye=p.getOrCreateProgram("heatmap",{config:ue,defines:O,overrideFog:re}),{zoom:ve}=p.transform;p.terrain&&p.terrain.setupElevationDraw(ee,ye),p.uploadCommonUniforms(v,ye,te.toUnwrapped());const be=R.projection.createInversionMatrix(R,te.canonical);ye.draw(p,b.TRIANGLES,gi.disabled,S,D,j,wp(p,te,ee,be,q,ve,c.paint.get("heatmap-intensity")),c.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,c.paint,p.transform.zoom,ue,F?[ne.globeExtVertexBuffer]:null)}v.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(v,b){const S=v.context,D=S.gl,R=b.heatmapFbo;if(!R)return;S.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,R.colorAttachment.get()),S.activeTexture.set(D.TEXTURE1);let F=b.colorRampTexture;F||(F=b.colorRampTexture=new n.T(S,b.colorRamp,D.RGBA8)),F.bind(D.LINEAR,D.CLAMP_TO_EDGE),v.getOrCreateProgram("heatmapTexture").draw(v,D.TRIANGLES,gi.disabled,Ei.disabled,v.colorModeForRenderPass(),Si.disabled,((O,j,q,W)=>({u_image:0,u_color_ramp:1,u_opacity:j.paint.get("heatmap-opacity")}))(0,b),b.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,b.paint,v.transform.zoom)}(p,c))},line:function(p,o,c,m){if(p.renderPass!=="translucent")return;const v=c.paint.get("line-opacity"),b=c.paint.get("line-width");if(v.constantOr(1)===0||b.constantOr(1)===0)return;const S=c.paint.get("line-emissive-strength"),D=c.paint.get("line-occlusion-opacity"),R=c.layout.get("line-elevation-reference")==="sea",F=p.context,O=F.gl,j=!c.isDraped();if(j&&p.transform.projection.name==="globe")return;const q=c.layout.get("line-cross-slope"),W=q!==void 0,te=q<1,ee=j?new gi(p.depthOcclusion?O.GREATER:O.LEQUAL,gi.ReadOnly,p.depthRangeFor3D):p.depthModeForSublayer(0,gi.ReadOnly),ne=p.colorModeForDrapableLayerRenderPass(S),re=p.terrain&&p.terrain.renderingToTexture,ue=re?1:n.q.devicePixelRatio,ye=c.paint.get("line-dasharray"),ve=ye.constantOr(1),be=c.layout.get("line-cap"),Me=ye.constantOr(null),we=be.constantOr(null),Ee=c.paint.get("line-pattern"),ke=Ee.constantOr(1),$e=Ee.constantOr(null),Oe=c.paint.get("line-opacity").constantOr(1);let Re=!ke&&Oe!==1||p.depthOcclusion&&D>0&&D<1;const st=c.paint.get("line-gradient"),dt=ke?"linePattern":"line",Et=n.cV(c);let Lt;if(re&&p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(Re=!1),D!==0&&p.depthOcclusion){const Xe=c.paint._values["line-opacity"];Xe&&Xe.value&&Xe.value.kind==="constant"?Lt=Xe.value:n.w(`Occlusion opacity for layer ${c.id} is supported only when line-opacity isn't data-driven.`)}if(j&&(p.forceTerrainMode=!0),!j&&D!==0&&p.terrain&&!re)return void n.w(`Occlusion opacity for layer ${c.id} is supported on terrain only if the layer has line-z-offset enabled.`);const jt=Re&&j?p.stencilModeFor3D():Ei.disabled;j&&(Et.push("ELEVATED"),W&&Et.push(te?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),R&&Et.push("ELEVATION_REFERENCE_SEA"));for(const Xe of m){const St=o.getTile(Xe);if(ke&&!St.patternsLoaded())continue;const ct=St.getBucket(c);if(!ct)continue;p.prepareDrawTile();const Mt=ct.programConfigurations.get(c.id),Tt=p.isTileAffectedByFog(Xe),wt=p.getOrCreateProgram(dt,{config:Mt,defines:Et,overrideFog:Tt,overrideRtt:!j&&void 0});if($e&&St.imageAtlas){const Yt=St.imageAtlas.patternPositions[$e.toString()];Yt&&Mt.setConstantPatternPositions(Yt)}if(!ke&&Me&&we&&St.lineAtlas){const Yt=St.lineAtlas.getDash(Me,we);Yt&&Mt.setConstantPatternPositions(Yt)}let[Gt,ui]=c.paint.get("line-trim-offset");(we==="round"||we==="square")&&Gt!==ui&&(Gt===0&&(Gt-=1),ui===1&&(ui+=1));const _i=re?Xe.projMatrix:null,ii=ke?n.cW(p,St,c,_i,ue,[Gt,ui]):n.cX(p,St,c,_i,ct.lineClipsArray.length,ue,[Gt,ui]);if(st){const Yt=ct.gradients[c.id];let Mi=Yt.texture;if(c.gradientVersion!==Yt.version){let Ri=256;if(c.stepInterpolant){const tr=o.getSource().maxzoom,kr=Xe.canonical.z===tr?Math.ceil(1<<p.transform.maxZoom-Xe.canonical.z):1;Ri=n.ap(n.cY(ct.maxLineLength/n.ab*1024*kr),256,F.maxTextureSize)}Yt.gradient=n.cZ({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:Ri,image:Yt.gradient||void 0,clips:ct.lineClipsArray}),Yt.texture?Yt.texture.update(Yt.gradient):Yt.texture=new n.T(F,Yt.gradient,O.RGBA8),Yt.version=c.gradientVersion,Mi=Yt.texture}F.activeTexture.set(O.TEXTURE1),Mi.bind(c.stepInterpolant?O.NEAREST:O.LINEAR,O.CLAMP_TO_EDGE)}ve&&(F.activeTexture.set(O.TEXTURE0),St.lineAtlasTexture&&St.lineAtlasTexture.bind(O.LINEAR,O.REPEAT),Mt.updatePaintBuffers()),ke&&(F.activeTexture.set(O.TEXTURE0),St.imageAtlasTexture&&St.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Mt.updatePaintBuffers()),j&&!R&&p.terrain.setupElevationDraw(St,wt),p.uploadCommonUniforms(F,wt,Xe.toUnwrapped());const vi=Yt=>{Lt!=null&&(Lt.value=Oe*D),wt.draw(p,O.TRIANGLES,ee,Yt,ne,Si.disabled,ii,c.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,c.paint,p.transform.zoom,Mt,[ct.layoutVertexBuffer2,ct.patternVertexBuffer,ct.zOffsetVertexBuffer]),Lt!=null&&(Lt.value=Oe)};if(Re&&!j){const Yt=p.stencilModeForClipping(Xe).ref;Yt===0&&re&&F.clear({stencil:0});const Mi={func:O.EQUAL,mask:255};ii.u_alpha_discard_threshold=.8,vi(new Ei(Mi,Yt,255,O.KEEP,O.KEEP,O.INVERT)),ii.u_alpha_discard_threshold=0,vi(new Ei(Mi,Yt,255,O.KEEP,O.KEEP,O.KEEP))}else Re&&j&&(ii.u_alpha_discard_threshold=.001),vi(j?jt:p.stencilModeForClipping(Xe))}j&&(p.forceTerrainMode=!1),Re&&(p.resetStencilClippingMasks(),re&&F.clear({stencil:0})),D===0||p.depthOcclusion||re||p.layersWithOcclusionOpacity.push(p.currentLayer)},fill:function(p,o,c,m){const v=c.paint.get("fill-color"),b=c.paint.get("fill-opacity"),S=c.is3D(),D=new gi(p.context.gl.LEQUAL,gi.ReadWrite,p.depthRangeFor3D);if(b.constantOr(1)===0)return;const R=c.paint.get("fill-emissive-strength"),F=p.colorModeForDrapableLayerRenderPass(R),O=c.paint.get("fill-pattern"),j=p.opaquePassEnabledForLayer()&&!O.constantOr(1)&&v.constantOr(n.bA.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===j){const q=S?D:p.depthModeForSublayer(1,p.renderPass==="opaque"?gi.ReadWrite:gi.ReadOnly);af(p,o,c,m,q,F,!1)}if(!S&&p.renderPass==="translucent"&&c.paint.get("fill-antialias")){const q=S?D:p.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,gi.ReadOnly);af(p,o,c,m,q,F,!0)}},"fill-extrusion":function(p,o,c,m){const v=c.paint.get("fill-extrusion-opacity"),b=p.context,S=b.gl,D=p.terrain,R=D&&D.renderingToTexture;if(v===0)return;const F=p.conflationActive&&p.style.isLayerClipped(c,o.getSource()),O=p.style.order.indexOf(c.fqid);if(F&&function(j,q,W,te,ee){for(const ne of te){const re=q.getTile(ne).getBucket(W);re&&(re.updateReplacement(ne,j.replacementSource,ee),re.uploadCentroid(j.context))}}(p,o,c,m,O),D||F)for(const j of m){const q=o.getTile(j).getBucket(c);q&&wg(p.context,o,j,q,c,D,F)}if(p.renderPass==="shadow"&&p.shadowRenderer){const j=p.shadowRenderer;if(D&&v<.65&&c._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.a4)return;const q=j.getShadowPassDepthMode(),W=j.getShadowPassColorMode();wo(p,o,c,m,q,Ei.disabled,W,F)}else if(p.renderPass==="translucent"){const j=!c.paint.get("fill-extrusion-pattern").constantOr(1),q=c.paint.get("fill-extrusion-color").constantOr(n.bA.white);if(!R&&q.a!==0){const W=new gi(p.context.gl.LEQUAL,gi.ReadWrite,p.depthRangeFor3D);v===1&&j?wo(p,o,c,m,W,Ei.disabled,qi.unblended,F):(wo(p,o,c,m,W,Ei.disabled,qi.disabled,F),wo(p,o,c,m,W,p.stencilModeFor3D(),p.colorModeForRenderPass(),F),p.resetStencilClippingMasks())}if(p.style.enable3dLights()&&j&&(!D&&p.transform.projection.name!=="globe"||R)){const W=c.paint.get("fill-extrusion-opacity"),te=c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ee=c.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ne=c.paint.get("fill-extrusion-flood-light-intensity"),re=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(c.lut).toArray01().slice(0,3),ue=te>0&&ee>0,ye=ne>0,ve=(Me,we,Ee)=>(1-Ee)*Me+Ee*we,be=Me=>{const we=p.depthModeForSublayer(1,gi.ReadOnly,S.LEQUAL,!0),Ee=c.paint.get(Me?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),ke=ve(.1,3,Ee),$e=p._showOverdrawInspector;if(!$e){const Oe=new Ei({func:S.ALWAYS,mask:255},255,255,S.KEEP,S.KEEP,S.REPLACE),Re=new qi([S.ONE,S.ONE,S.ONE,S.ONE],n.bA.transparent,[!1,!1,!1,!0],S.MIN);Ds(p,o,c,m,we,Oe,Re,Si.disabled,Me,"sdf",W,te,ee,ne,re,ke,F,!1)}{const Oe=$e?Ei.disabled:new Ei({func:S.EQUAL,mask:255},255,255,S.KEEP,S.DECR,S.DECR),Re=$e?p.colorModeForRenderPass():new qi([S.ONE_MINUS_DST_ALPHA,S.DST_ALPHA,S.ONE,S.ONE],n.bA.transparent,[!0,!0,!0,!0]);Ds(p,o,c,m,we,Oe,Re,Si.disabled,Me,"color",W,te,ee,ne,re,ke,F,!1)}};if(R){const Me=(we,Ee,ke)=>{const $e=p.depthModeForSublayer(1,gi.ReadOnly,S.LEQUAL,!1),Oe=c.paint.get(we?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Re=ve(.1,3,Oe);{const st=new qi([S.ONE,S.ONE,S.ONE,S.ONE],n.bA.transparent,[!1,!1,!1,!0]);Ds(p,o,c,m,$e,Ei.disabled,st,Si.disabled,we,"clear",W,te,ee,ne,re,Re,F,Ee)}{const st=new Ei({func:S.ALWAYS,mask:255},255,255,S.KEEP,S.KEEP,S.REPLACE),dt=new qi([S.ONE,S.ONE,S.ONE,S.ONE],n.bA.transparent,[!1,!1,!1,!0],S.MIN);Ds(p,o,c,m,$e,st,dt,Si.disabled,we,"sdf",W,te,ee,ne,re,Re,F,Ee)}{const st=we?S.ZERO:S.ONE_MINUS_DST_ALPHA,dt=new Ei({func:S.EQUAL,mask:255},255,255,S.KEEP,S.DECR,S.DECR),Et=new qi([st,S.DST_ALPHA,S.ONE_MINUS_DST_ALPHA,S.ZERO],n.bA.transparent,[!0,!0,!0,!0]);Ds(p,o,c,m,$e,dt,Et,Si.disabled,we,"color",W,te,ee,ne,re,Re,F,Ee)}{const st=new qi([S.ONE,S.ONE,S.ONE,we?S.ZERO:S.ONE],n.bA.transparent,[!1,!1,!1,!0],we?S.FUNC_ADD:S.MAX);Ds(p,o,c,m,$e,Ei.disabled,st,Si.disabled,we,"clear",W,te,ee,ne,re,Re,F,Ee,ke)}};if(ue||ye){let we;if(p.prepareDrawTile(),D){const Ee=D.drapeBufferSize[0],ke=D.drapeBufferSize[1];we=D.framebufferCopyTexture,we&&(!we||we.size[0]===Ee&&we.size[1]===ke)||(we&&we.destroy(),we=D.framebufferCopyTexture=new n.T(b,new n.r({width:Ee,height:ke}),S.RGBA8)),we.bind(S.LINEAR,S.CLAMP_TO_EDGE),S.copyTexSubImage2D(S.TEXTURE_2D,0,0,0,0,0,Ee,ke)}ue&&Me(!0,!1,we),ye&&Me(!1,!0,we)}}else ue&&be(!0),ye&&be(!1),(ue||ye)&&p.resetStencilClippingMasks()}}},hillshade:function(p,o,c,m){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent"||p.style.disableElevatedTerrain)return;const v=p.context,b=p.terrain&&p.terrain.renderingToTexture,[S,D]=p.renderPass!=="translucent"||b?[{},m]:p.stencilConfigForOverlap(m);for(const R of D){const F=o.getTile(R);if(F.needsHillshadePrepare&&p.renderPass==="offscreen")Xo(p,F,c);else if(p.renderPass==="translucent"){const O=p.depthModeForSublayer(0,gi.ReadOnly),j=c.paint.get("hillshade-emissive-strength"),q=p.colorModeForDrapableLayerRenderPass(j),W=b&&p.terrain?p.terrain.stencilModeForRTTOverlap(R):S[R.overscaledZ];$r(p,R,F,c,O,W,q)}}v.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,o,c,m,v,b){if(p.renderPass!=="translucent"||c.paint.get("raster-opacity")===0)return;const S=p.transform.projection.name==="globe",D=c.paint.get("raster-elevation")!==0,R=D&&S;if(p.renderElevatedRasterBackface&&!R)return;const F=p.context,O=F.gl,j=o.getSource(),q=function(Me,we,Ee,ke){const $e=we.paint.get("raster-color"),Oe=Me.type==="raster-array",Re=[],st=we.paint.get("raster-resampling"),dt=we.paint.get("raster-color-mix");let Et=we.paint.get("raster-color-range");const Lt=[dt[0],dt[1],dt[2],0],jt=dt[3];let Xe=st==="nearest"?ke.NEAREST:ke.LINEAR;if(Oe&&(Re.push("RASTER_ARRAY"),$e||Re.push("RASTER_COLOR"),st==="linear"&&Re.push("RASTER_ARRAY_LINEAR"),Xe=ke.NEAREST,!Et&&Me.rasterLayers)){const St=Me.rasterLayers.find(({id:ct})=>ct===we.sourceLayer);St&&St.fields&&St.fields.range&&(Et=St.fields.range)}if(Et=Et||[0,1],$e){Re.push("RASTER_COLOR"),Ee.activeTexture.set(ke.TEXTURE2),we.updateColorRamp(Et);let St=we.colorRampTexture;St||(St=we.colorRampTexture=new n.T(Ee,we.colorRamp,ke.RGBA8)),St.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)}return{mix:Lt,range:Et,offset:jt,defines:Re,resampling:Xe}}(j,c,F,O);if(j instanceof n.aD&&!m.length&&!S)return;const W=c.paint.get("raster-emissive-strength"),te=p.colorModeForDrapableLayerRenderPass(W),ee=p.terrain&&p.terrain.renderingToTexture,ne=!p.options.moving,re=c.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;if(j instanceof n.aD&&!m.length&&(j.onNorthPole||j.onSouthPole)){const Me=D?p.stencilModeFor3D():Ei.disabled;return void fn(!!j.onNorthPole,null,p,o,c,W,q,Si.disabled,Me)}if(!m.length)return;const[ue,ye]=j instanceof n.aD||ee?[{},m]:p.stencilConfigForOverlap(m),ve=ye[ye.length-1].overscaledZ;R&&q.defines.push("PROJECTION_GLOBE_VIEW"),D&&q.defines.push("RENDER_CUTOFF");const be=(Me,we,Ee)=>{for(const ke of Me){const $e=ke.toUnwrapped(),Oe=o.getTile(ke);if(ee&&(!Oe||!Oe.hasData()))continue;F.activeTexture.set(O.TEXTURE0);const Re=Pp(Oe,j,c,q);if(!Re||!Re.texture)continue;const{texture:st,mix:dt,offset:Et,tileSize:Lt,buffer:jt}=Re;let Xe,St;ee?(Xe=gi.disabled,St=ke.projMatrix):D?(Xe=new gi(O.LEQUAL,gi.ReadWrite,p.depthRangeFor3D),St=S?Float32Array.from(p.transform.expandedFarZProjMatrix):p.transform.calculateProjMatrix($e,ne)):(Xe=p.depthModeForSublayer(ke.overscaledZ-ve,c.paint.get("raster-opacity")===1?gi.ReadWrite:gi.ReadOnly,O.LESS),St=p.transform.calculateProjMatrix($e,ne));const ct=p.terrain&&ee?p.terrain.stencilModeForRTTOverlap(ke):ue[ke.overscaledZ],Mt=b?0:c.paint.get("raster-fade-duration");Oe.registerFadeDuration(Mt);const Tt=o.findLoadedParent(ke,0),wt=Qd(Oe,Tt,o,p.transform,Mt);let Gt,ui;p.terrain&&p.terrain.prepareDrawTile(),F.activeTexture.set(O.TEXTURE0),st.bind(re,O.CLAMP_TO_EDGE),F.activeTexture.set(O.TEXTURE1),Tt?(Tt.texture&&Tt.texture.bind(re,O.CLAMP_TO_EDGE),Gt=Math.pow(2,Tt.tileID.overscaledZ-Oe.tileID.overscaledZ),ui=[Oe.tileID.canonical.x*Gt%1,Oe.tileID.canonical.y*Gt%1]):st.bind(re,O.CLAMP_TO_EDGE),st.useMipmap&&F.extTextureFilterAnisotropic&&p.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);const _i=p.transform;let ii;const vi=D?lf(_i):[0,0,0,0];let Yt,Mi,Ri,tr,kr,cr=0;if(R&&j instanceof n.aD&&j.coordinates.length>3)Yt=Float32Array.from(n.b6(n.cC(new n.bQ(0,0,0)))),Mi=Float32Array.from(_i.globeMatrix),Ri=Float32Array.from(n.cy(_i)),tr=[n.am(_i.center.lng),n.at(_i.center.lat)],ii=j.elevatedGlobePerspectiveTransform,kr=j.elevatedGlobeGridMatrix||new Float32Array(9);else if(R){const Wi=n.cz(ke.canonical);cr=n.cA(Wi.getCenter().lat),Yt=Float32Array.from(n.b6(n.cC(ke.canonical))),Mi=Float32Array.from(_i.globeMatrix),Ri=Float32Array.from(n.cy(_i)),tr=[n.am(_i.center.lng),n.at(_i.center.lat)],ii=[0,0],kr=Float32Array.from(n.cB(ke.canonical,Wi,cr,_i.worldSize/_i._pixelsPerMercatorPixel))}else ii=j instanceof n.aD?j.perspectiveTransform:[0,0],Yt=new Float32Array(16),Mi=new Float32Array(9),Ri=new Float32Array(16),tr=[0,0],kr=new Float32Array(9);const jr=rf(St,Yt,Mi,Ri,kr,ui||[0,0],n.a9(p.transform.zoom),tr,vi,Gt||1,wt,c,ii,D?c.paint.get("raster-elevation"):0,2,dt,Et,q.range,Lt,jt,W),mr=p.isTileAffectedByFog(ke),Rr=p.getOrCreateProgram("raster",{defines:q.defines,overrideFog:mr});if(p.uploadCommonUniforms(F,Rr,$e),j instanceof n.aD){const Wi=j.elevatedGlobeVertexBuffer,Dr=j.elevatedGlobeIndexBuffer;if(ee||!S)j.boundsBuffer&&j.boundsSegments&&Rr.draw(p,O.TRIANGLES,Xe,Ei.disabled,te,Si.disabled,jr,c.id,j.boundsBuffer,p.quadTriangleIndexBuffer,j.boundsSegments);else if(Wi&&Dr){const zr=_i.zoom<=n.c3?j.elevatedGlobeSegments:j.getSegmentsForLongitude(_i.center.lng);zr&&Rr.draw(p,O.TRIANGLES,Xe,Ei.disabled,te,we,jr,c.id,Wi,Dr,zr)}}else if(R){Xe=new gi(O.LEQUAL,gi.ReadOnly,p.depthRangeFor3D);const Wi=p.globeSharedBuffers;if(Wi){const[Dr,zr,xr]=Wi.getGridBuffers(cr,!1);Rr.draw(p,O.TRIANGLES,Xe,Ee||ct,p.colorModeForRenderPass(),we,jr,c.id,Dr,zr,xr)}}else{const{tileBoundsBuffer:Wi,tileBoundsIndexBuffer:Dr,tileBoundsSegments:zr}=p.getTileBoundsBuffers(Oe);Rr.draw(p,O.TRIANGLES,Xe,ct,te,Si.disabled,jr,c.id,Wi,Dr,zr)}}if(!(j instanceof n.aD)&&R)for(const ke of Me){const $e=ke.canonical.y===(1<<ke.canonical.z)-1;ke.canonical.y===0&&fn(!0,ke,p,o,c,W,q,we,Ee||Ei.disabled),$e&&fn(!1,ke,p,o,c,W,q,we===Si.frontCW?Si.backCW:Si.frontCW,Ee||Ei.disabled)}};R?be(ye,p.renderElevatedRasterBackface?Si.backCW:Si.frontCW,p.stencilModeFor3D()):be(ye,Si.disabled,void 0),p.resetStencilClippingMasks()},"raster-particle":function(p,o,c,m,v,b){p.renderPass==="offscreen"&&function(S,D,R,F){if(!F.length)return;const O=S.context,j=O.gl,q=D.getSource();if(!(q instanceof Ss))return;const W=Math.ceil(Math.sqrt(R.paint.get("raster-particle-count")));let te=R.particlePositionRGBAImage;if(!te||te.width!==W){const ye=function(ve){const be=ve*ve,Me=new Uint8Array(4*be),we=function(ke){return ke|=0,ke=Math.imul(2747636419^ke,2654435769),ke=Math.imul(ke^ke>>>16,2654435769),((ke=Math.imul(ke^ke>>>16,2654435769))>>>0)/4294967296},Ee=1/1.1;for(let ke=0;ke<be;ke++){const $e=Ee*(we(2*ke+0)+$c),Oe=Ee*(we(2*ke+1)+$c),Re=255*$e%1,st=255*Oe%1,dt=Re,Et=Oe-st/255,Lt=st;Me[4*ke+0]=255*($e-Re/255),Me[4*ke+1]=255*dt,Me[4*ke+2]=255*Et,Me[4*ke+3]=255*Lt}return Me}(W);te=R.particlePositionRGBAImage=new n.r({width:W,height:W},ye)}let ee=R.particleFramebuffer;ee?ee.width!==W&&(ee.destroy(),ee=R.particleFramebuffer=O.createFramebuffer(W,W,!0,null)):ee=R.particleFramebuffer=O.createFramebuffer(W,W,!0,null);const ne=[];for(const ye of F){const ve=D.getTile(ye);if(!(ve instanceof sl))continue;const be=Tg(ve,q,R);if(!be)continue;const Me=[ve.tileSize,ve.tileSize];let we=R.tileFramebuffer;we||(we=R.tileFramebuffer=O.createFramebuffer(Me[0],Me[1],!0,null));let Ee=ve.rasterParticleState;Ee||(Ee=ve.rasterParticleState=new Eg(O,ye,Me,te));const ke=Ee.update(R.lastInvalidatedAt);Ee.particleTextureDimension!==W&&Ee.updateParticleTexture(ye,te);const $e=Ee.targetColorTexture;Ee.targetColorTexture=Ee.backgroundColorTexture,Ee.backgroundColorTexture=$e;const Oe=Ee.particleTexture0;Ee.particleTexture0=Ee.particleTexture1,Ee.particleTexture1=Oe,ne.push([ye,be,Ee,ke])}if(ne.length===0)return;const re=n.q.now(),ue=R.previousDrawTimestamp?.001*(re-R.previousDrawTimestamp):.0167;if(R.previousDrawTimestamp=re,R.hasColorMap()){O.activeTexture.set(j.TEXTURE0+2);let ye=R.colorRampTexture;ye||(ye=R.colorRampTexture=new n.T(O,R.colorRamp,j.RGBA8)),ye.bind(j.LINEAR,j.CLAMP_TO_EDGE)}O.bindFramebuffer.set(R.tileFramebuffer.framebuffer),function(ye,ve,be){const Me=ye.context,we=Me.gl,Ee=ve.tileFramebuffer;Me.activeTexture.set(we.TEXTURE0);const ke={u_texture:0,u_opacity:1.05*(Oe=ve.paint.get("raster-particle-fade-opacity-factor"))/(Oe+.05)},$e=ye.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Oe;for(const Re of be){const[,,st,dt]=Re;Ee.colorAttachment.set(st.targetColorTexture.texture),Me.viewport.set([0,0,Ee.width,Ee.height]),Me.clear({color:n.bA.transparent}),dt&&(st.backgroundColorTexture.bind(we.NEAREST,we.CLAMP_TO_EDGE),$e.draw(ye,we.TRIANGLES,gi.disabled,Ei.disabled,qi.alphaBlended,Si.disabled,ke,ve.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments))}}(S,R,ne),function(ye,ve,be,Me){const we=ye.context,Ee=we.gl,ke=be.tileFramebuffer,$e=ye.transform.projection.name==="globe",Oe=be.paint.get("raster-particle-max-speed");for(const Re of Me){const[st,dt,Et]=Re;we.activeTexture.set(Ee.TEXTURE0+0),dt.texture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),ke.colorAttachment.set(Et.targetColorTexture.texture);const Lt=ye.getOrCreateProgram("rasterParticleDraw",{defines:dt.defines,overrideFog:!1});we.activeTexture.set(Ee.TEXTURE0+1);const jt=dt.scalarData?[]:[0,1,2,3].map(ct=>n.c$[ct](st));jt.push(st);const Xe=st.canonical.x,St=st.canonical.y;for(const ct of jt){const Mt=ve.getTile($e?ct.wrapped():ct);if(!Mt)continue;const Tt=Mt.rasterParticleState;if(!Tt)continue;const wt=ct.canonical.x+(1<<ct.canonical.z)*(ct.wrap-st.wrap),Gt=ct.canonical.y;Tt.particleTexture0.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE);const ui=of(1,Tt.particleTexture0.size[0],[wt-Xe,Gt-St],0,dt.texture.size,2,Oe,dt.textureOffset,dt.scale,dt.offset);Lt.draw(ye,Ee.POINTS,gi.disabled,Ei.disabled,qi.alphaBlended,Si.disabled,ui,be.id,Tt.particleIndexBuffer,void 0,Tt.particleSegment)}}}(S,D,R,ne),O.bindFramebuffer.set(R.particleFramebuffer.framebuffer),function(ye,ve,be,Me){const we=ye.context,Ee=we.gl,ke=ve.paint.get("raster-particle-max-speed"),$e=Me*ve.paint.get("raster-particle-speed-factor")*.15,Oe=function(st){return Math.pow(st,6)}(.01+1*ve.paint.get("raster-particle-reset-rate-factor")),Re=ve.particleFramebuffer;we.viewport.set([0,0,Re.width,Re.height]);for(const st of be){const[,dt,Et]=st;we.activeTexture.set(Ee.TEXTURE0+0),dt.texture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),we.activeTexture.set(Ee.TEXTURE0+1);const Lt=Et.particleTexture0;Lt.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE);const jt=Sp(1,Lt.size[0],0,dt.texture.size,ke,$e,Oe,dt.textureOffset,dt.scale,dt.offset);Re.colorAttachment.set(Et.particleTexture1.texture),we.clear({color:n.bA.transparent}),ye.getOrCreateProgram("rasterParticleUpdate",{defines:dt.defines}).draw(ye,Ee.TRIANGLES,gi.disabled,Ei.disabled,qi.unblended,Si.disabled,jt,ve.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments)}}(S,R,ne,ue)}(p,o,c,m),p.renderPass==="translucent"&&(function(S,D,R,F,O){const j=S.context,q=j.gl,W=D.getSource().tileSize,te=5*(1-n.a7(n.bV,n.bV+1,S.transform.zoom))*W+R.paint.get("raster-particle-elevation"),ee=!S.options.moving,ne=S.transform.projection.name==="globe";if(!F.length)return;const[re,ue]=S.stencilConfigForOverlap(F),ye=[];ne&&ye.push("PROJECTION_GLOBE_VIEW");const ve=S.stencilModeFor3D();for(const be of ue){const Me=be.toUnwrapped(),we=D.getTile(be);if(!we.rasterParticleState)continue;const Ee=we.rasterParticleState,ke=100;we.registerFadeDuration(ke);const $e=D.findLoadedParent(be,0),Oe=Qd(we,$e,D,S.transform,ke);let Re,st;S.terrain&&S.terrain.prepareDrawTile(),j.activeTexture.set(q.TEXTURE0),Ee.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),j.activeTexture.set(q.TEXTURE1),$e&&$e.rasterParticleState?($e.rasterParticleState.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Re=Math.pow(2,$e.tileID.overscaledZ-we.tileID.overscaledZ),st=[we.tileID.canonical.x*Re%1,we.tileID.canonical.y*Re%1]):Ee.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE);const dt=ne?Float32Array.from(S.transform.expandedFarZProjMatrix):S.transform.calculateProjMatrix(Me,ee),Et=S.transform,Lt=Ev(Et),jt=n.cz(be.canonical),Xe=n.cA(jt.getCenter().lat);let St,ct,Mt,Tt,wt;ne?(St=Float32Array.from(n.b6(n.cC(be.canonical))),ct=Float32Array.from(Et.globeMatrix),Mt=Float32Array.from(n.cy(Et)),Tt=[n.am(Et.center.lng),n.at(Et.center.lat)],wt=Float32Array.from(n.cB(be.canonical,jt,Xe,Et.worldSize/Et._pixelsPerMercatorPixel))):(St=new Float32Array(16),ct=new Float32Array(9),Mt=new Float32Array(16),Tt=[0,0],wt=new Float32Array(9));const Gt=nf(dt,St,ct,Mt,wt,st||[0,0],n.a9(S.transform.zoom),Tt,Lt,Re||1,Oe,te),ui=S.isTileAffectedByFog(be),_i=S.getOrCreateProgram("rasterParticle",{defines:ye,overrideFog:ui});if(S.uploadCommonUniforms(j,_i,Me),ne){const ii=new gi(q.LEQUAL,gi.ReadOnly,S.depthRangeFor3D),vi=0,Yt=S.globeSharedBuffers;if(Yt){const[Mi,Ri,tr]=Yt.getGridBuffers(Xe,vi!==0);_i.draw(S,q.TRIANGLES,ii,ve,qi.alphaBlended,S.renderElevatedRasterBackface?Si.frontCCW:Si.backCCW,Gt,R.id,Mi,Ri,tr)}}else{const ii=S.depthModeForSublayer(0,gi.ReadOnly),vi=re[be.overscaledZ],{tileBoundsBuffer:Yt,tileBoundsIndexBuffer:Mi,tileBoundsSegments:Ri}=S.getTileBoundsBuffers(we);_i.draw(S,q.TRIANGLES,ii,vi,qi.alphaBlended,Si.disabled,Gt,R.id,Yt,Mi,Ri)}}S.resetStencilClippingMasks()}(p,o,c,m),p.style.map.triggerRepaint())},background:function(p,o,c,m){const v=c.paint.get("background-color"),b=c.paint.get("background-opacity"),S=c.paint.get("background-emissive-strength"),D=c.paint.get("background-pitch-alignment")==="viewport";if(b===0)return;const R=p.context,F=R.gl,O=p.transform,j=O.tileSize,q=c.paint.get("background-pattern");let W;if(q!==void 0&&(q===null||(W=p.imageManager.getPattern(q.toString(),c.scope,p.style.getLut(c.scope)),!W)))return;const te=!q&&v.a===1&&b===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==te)return;const ee=Ei.disabled,ne=p.depthModeForSublayer(0,te==="opaque"?gi.ReadWrite:gi.ReadOnly),re=p.colorModeForDrapableLayerRenderPass(S),ue=q?"backgroundPattern":"background";let ye,ve=m;if(ve||(ye=p.getBackgroundTiles(),ve=Object.values(ye).map(be=>be.tileID)),q&&(R.activeTexture.set(F.TEXTURE0),p.imageManager.bind(p.context,c.scope)),D){const be=p.getOrCreateProgram(ue,{overrideFog:!1,overrideRtt:!0}),Me=new Float32Array(n.a6.mat4.identity([])),we=new n.aA(0,0,0,0,0),Ee=q?Oh(Me,S,b,p,0,c.scope,W,D,{tileID:we,tileSize:j}):jc(Me,S,b,v.toRenderColor(c.lut));be.draw(p,F.TRIANGLES,ne,ee,re,Si.disabled,Ee,c.id,p.viewportBuffer,p.quadTriangleIndexBuffer,p.viewportSegments)}else for(const be of ve){const Me=p.isTileAffectedByFog(be),we=p.getOrCreateProgram(ue,{overrideFog:Me}),Ee=be.toUnwrapped(),ke=m?be.projMatrix:p.transform.calculateProjMatrix(Ee);p.prepareDrawTile();const $e=o?o.getTile(be):ye?ye[be.key]:new $s(be,j,O.zoom,p),Oe=q?Oh(ke,S,b,p,0,c.scope,W,D,{tileID:be,tileSize:j}):jc(ke,S,b,v.toRenderColor(c.lut));p.uploadCommonUniforms(R,we,Ee);const{tileBoundsBuffer:Re,tileBoundsIndexBuffer:st,tileBoundsSegments:dt}=p.getTileBoundsBuffers($e);we.draw(p,F.TRIANGLES,ne,ee,re,Si.disabled,Oe,c.id,Re,st,dt)}},sky:function(p,o,c){const m=p._atmosphere?n.a9(p.transform.zoom):1,v=c.paint.get("sky-opacity")*m;if(v===0)return;const b=p.context,S=c.paint.get("sky-type"),D=new gi(b.gl.LEQUAL,gi.ReadOnly,[0,1]),R=p.frameCounter/1e3%1;S==="atmosphere"?p.renderPass==="offscreen"?c.needsSkyboxCapture(p)&&(function(F,O,j,q){const W=F.context,te=W.gl;let ee=O.skyboxFbo;if(!ee){ee=O.skyboxFbo=W.createFramebuffer(32,32,!0,null),O.skyboxGeometry=new Lp(W),O.skyboxTexture=W.gl.createTexture(),te.bindTexture(te.TEXTURE_CUBE_MAP,O.skyboxTexture),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MAG_FILTER,te.LINEAR);for(let ye=0;ye<6;++ye)te.texImage2D(te.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,te.RGBA,32,32,0,te.RGBA,te.UNSIGNED_BYTE,null)}W.bindFramebuffer.set(ee.framebuffer),W.viewport.set([0,0,32,32]);const ne=O.getCenter(F,!0),re=F.getOrCreateProgram("skyboxCapture"),ue=new Float64Array(16);n.a6.mat4.identity(ue),n.a6.mat4.rotateY(ue,ue,.5*-Math.PI),ya(F,O,re,ue,ne,0),n.a6.mat4.identity(ue),n.a6.mat4.rotateY(ue,ue,.5*Math.PI),ya(F,O,re,ue,ne,1),n.a6.mat4.identity(ue),n.a6.mat4.rotateX(ue,ue,.5*-Math.PI),ya(F,O,re,ue,ne,2),n.a6.mat4.identity(ue),n.a6.mat4.rotateX(ue,ue,.5*Math.PI),ya(F,O,re,ue,ne,3),n.a6.mat4.identity(ue),ya(F,O,re,ue,ne,4),n.a6.mat4.identity(ue),n.a6.mat4.rotateY(ue,ue,Math.PI),ya(F,O,re,ue,ne,5),W.viewport.set([0,0,F.width,F.height])}(p,c),c.markSkyboxValid(p)):p.renderPass==="sky"&&function(F,O,j,q,W){const te=F.context,ee=te.gl,ne=F.transform,re=F.getOrCreateProgram("skybox");te.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_CUBE_MAP,O.skyboxTexture);const ue=((ye,ve,be,Me,we)=>({u_matrix:ye,u_sun_direction:ve,u_cubemap:0,u_opacity:Me,u_temporal_offset:we}))(ne.skyboxMatrix,O.getCenter(F,!1),0,q,W);F.uploadCommonUniforms(te,re),re.draw(F,ee.TRIANGLES,j,Ei.disabled,F.colorModeForRenderPass(),Si.backCW,ue,"skybox",O.skyboxGeometry.vertexBuffer,O.skyboxGeometry.indexBuffer,O.skyboxGeometry.segment)}(p,c,D,v,R):S==="gradient"&&p.renderPass==="sky"&&function(F,O,j,q,W){const te=F.context,ee=te.gl,ne=F.transform,re=F.getOrCreateProgram("skyboxGradient");O.skyboxGeometry||(O.skyboxGeometry=new Lp(te)),te.activeTexture.set(ee.TEXTURE0);let ue=O.colorRampTexture;ue||(ue=O.colorRampTexture=new n.T(te,O.colorRamp,ee.RGBA8)),ue.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const ye=((ve,be,Me,we,Ee)=>({u_matrix:ve,u_color_ramp:0,u_center_direction:be,u_radius:n.bC(Me),u_opacity:we,u_temporal_offset:Ee}))(ne.skyboxMatrix,O.getCenter(F,!1),O.paint.get("sky-gradient-radius"),q,W);F.uploadCommonUniforms(te,re),re.draw(F,ee.TRIANGLES,j,Ei.disabled,F.colorModeForRenderPass(),Si.backCW,ye,"skyboxGradient",O.skyboxGeometry.vertexBuffer,O.skyboxGeometry.indexBuffer,O.skyboxGeometry.segment)}(p,c,D,v,R)},debug:function(p,o,c,m,v,b){for(let S=0;S<c.length;S++)if(v){const F=new n.bA(m.r*.8,m.g*.8,m.b*.8,1);Hr(p,o,c[S],m,-1,-1,b),Hr(p,o,c[S],m,-1,1,b),Hr(p,o,c[S],m,1,1,b),Hr(p,o,c[S],m,1,-1,b),Hr(p,o,c[S],F,0,0,b)}else Hr(p,o,c[S],m,0,0,b)},custom:function(p,o,c,m){const v=p.context,b=c.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&c.isDraped(o)){if(p.renderPass==="offscreen"){const S=b.prerender;if(S){if(p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const D=p.transform.pointMerc;S.call(b,v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),n.a9(p.transform.zoom),[D.x,D.y],p.transform.pixelsPerMeterRatio)}else S.call(b,v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const D=b.renderToTile;if(D){const R=m[0].canonical,F=new n.a5(R.x+m[0].wrap*(1<<R.z),R.y,R.z);v.setDepthMode(gi.disabled),v.setStencilMode(Ei.disabled),v.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),D.call(b,v.gl,F),v.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),v.setStencilMode(Ei.disabled);const S=b.renderingMode==="3d"?new gi(p.context.gl.LEQUAL,gi.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,gi.ReadOnly);if(v.setDepthMode(S),p.transform.projection.name==="globe"){const D=p.transform.pointMerc;b.render(v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),n.a9(p.transform.zoom),[D.x,D.y],p.transform.pixelsPerMeterRatio)}else b.render(v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState(),v.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(p,o,c,m){if(p.renderPass==="opaque")return;const v=c.paint.get("model-opacity");if(v===0)return;const b=c.paint.get("model-cast-shadows");if(p.renderPass==="shadow"&&(!b||p.terrain&&v<.65&&c._transitionablePaint._values["model-opacity"].value.expression instanceof n.a4))return;const S=p.shadowRenderer,D=c.paint.get("model-receive-shadows");S&&(S.useNormalOffset=!0,D||(S.enabled=!1));const R=()=>{S&&(S.useNormalOffset=!0,D||(S.enabled=!0))},F=o.getSource();if(p.renderPass==="light-beam"&&F.type!=="batched-model")return;if(F.type==="vector"||F.type==="geojson")return function(re,ue,ye,ve,be){const Me=re.transform;if(Me.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${Me.projection.name} projection is not yet implemented`);const we=Me.getFreeCameraOptions().position;if(!re.modelManager)return;const Ee=re.modelManager;ye.modelManager=Ee;const ke=re.shadowRenderer;if(!ye._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const $e=ye._unevaluatedLayout._values["model-id"],Oe={...ye.layout.get("model-id").parameters},Re=re.style.order.indexOf(ye.fqid);for(const st of ve){const dt=ue.getTile(st).getBucket(ye);if(!dt||dt.projection.name!==Me.projection.name)continue;const Et=dt.getModelUris();Et&&!dt.modelsRequested&&(Ee.addModelsFromBucket(Et,be),dt.modelsRequested=!0);const Lt=Yo(st,Me);Oe.zoom=Lt;const jt=$e.possiblyEvaluate(Oe);if(Ag(re,dt,st),Wa.shadowUniformsInitialized=!1,Wa.useSingleShadowCascade=!!ke&&ke.getMaxCascadeForTile(st.toUnwrapped())===0,re.renderPass==="shadow"&&ke){if(re.currentShadowCascade===1&&dt.isInsideFirstShadowMapFrustum)continue;const ct=Me.calculatePosMatrix(st.toUnwrapped(),Me.worldSize);if(Wa.tileMatrix.set(ct),Wa.shadowTileMatrix=Float32Array.from(ke.calculateShadowPassMatrixFromMatrix(ct)),Wa.aabb.min.fill(0),Wa.aabb.max[0]=Wa.aabb.max[1]=n.ab,Wa.aabb.max[2]=0,Gr(dt,Wa,re,ye.scope))continue}const Xe=1<<st.canonical.z,St=[((we.x-st.wrap)*Xe-st.canonical.x)*n.ab,(we.y*Xe-st.canonical.y)*n.ab,we.z*Xe*n.ab];re.conflationActive&&Object.keys(dt.instancesPerModel).length>0&&re.style.isLayerClipped(ye,ue.getSource())&&dt.updateReplacement(st,re.replacementSource,Re,be)&&(dt.uploaded=!1,dt.upload(re.context));for(let ct in dt.instancesPerModel){const Mt=dt.instancesPerModel[ct];Mt.features.length>0&&(ct=jt.evaluate(Mt.features[0].feature,{}));const Tt=Ee.getModel(ct,be);if(Tt&&Tt.uploaded)for(const wt of Tt.nodes)Ig(re,ye,wt,Mt,St,st,Wa)}}}(p,o,c,m,F.type==="vector"?c.scope:""),void R();if(!F.loaded())return;if(F.type==="batched-model")return function(re,ue,ye,ve){ye.resetLayerRenderingStats(re);const be=re.context,Me=re.transform,we=re.style.fog,Ee=re.shadowRenderer;if(Me.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${Me.projection.name} projection is not yet implemented`);const ke=re.transform.getFreeCameraOptions().position,$e=n.a6.vec3.scale([],[ke.x,ke.y,ke.z],re.transform.worldSize),Oe=n.a6.vec3.negate([],$e),Re=n.a6.mat4.identity([]),st=n.de(Me.center.lat,Me.zoom),dt=n.a6.mat4.fromScaling([],[1,1,1/st]);n.a6.mat4.translate(Re,Re,Oe);const Et=ye.paint.get("model-opacity"),Lt=new gi(be.gl.LEQUAL,gi.ReadWrite,re.depthRangeFor3D),jt=new gi(be.gl.LEQUAL,gi.ReadOnly,re.depthRangeFor3D),Xe=new n.ca([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),St=re.renderPass==="shadow",ct=St&&Ee?Ee.getCurrentCascadeFrustum():Me.getFrustum(Me.scaleZoom(Me.worldSize)),Mt=ye.paint.get("model-front-cutoff"),Tt=Mt[2]<1,wt=Ro(re,ye.paint.get("model-cutoff-fade-range")),Gt=ye.getLayerRenderingStats();(function(ui,_i,ii,vi){const Yt=ui.terrain?ui.terrain.exaggeration():0,Mi=ui.transform.zoom;for(const Ri of vi){const tr=_i.getTile(Ri).getBucket(ii);tr&&(ui.conflationActive&&tr.updateReplacement(Ri,ui.replacementSource),tr.evaluateScale(ui,ii),ui.terrain&&Yt>0&&tr.elevationUpdate(ui.terrain,Yt,Ri,ii.source),tr.needsReEvaluation(ui,Mi,ii)&&tr.evaluate(ii))}})(re,ue,ye,ve),function(){let ui,_i,ii;Tt?(ui=ve.length-1,_i=-1,ii=-1):(ui=0,_i=ve.length,ii=1);const vi=new Float64Array(16),Yt=n.a6.vec3.create(),Mi=new n.P(0,0);for(let Ri=ui;Ri!==_i;Ri+=ii){const tr=ve[Ri],kr=ue.getTile(tr).getBucket(ye);if(!kr||!kr.uploaded)continue;let cr=!1;Ee&&(cr=Ee.getMaxCascadeForTile(tr.toUnwrapped())===0);const jr=Me.calculatePosMatrix(tr.toUnwrapped(),Me.worldSize),mr=kr.modelTraits;!St&&Tt&&(n.a6.mat4.invert(vi,jr),n.a6.vec3.transformMat4(Yt,$e,vi),Mi.x=Yt[0],Mi.y=Yt[1]);const Rr=[];for(const Wi of kr.getNodesInfo()){if(Wi.hiddenByReplacement||!Wi.node.meshes)continue;const Dr=Wi.node;let zr=0;re.terrain&&Dr.elevation&&(zr=Dr.elevation*re.terrain.exaggeration());const xr=(()=>{const vn=Wi.aabb;return Xe.min=[...vn.min],Xe.max=[...vn.max],Xe.min[2]+=zr,Xe.max[2]+=zr,n.a6.vec3.transformMat4(Xe.min,Xe.min,jr),n.a6.vec3.transformMat4(Xe.max,Xe.max,jr),Xe})(),Yr=Wi.evaluatedScale;if(Yr[0]<=1&&Yr[1]<=1&&Yr[2]<=1&&xr.intersects(ct)===0)continue;if(!St&&Tt){const vn=.16666666666666666;Wi.cameraCollisionOpacity=$e[0]>xr.min[0]&&$e[0]<xr.max[0]&&$e[1]>xr.min[1]&&$e[1]<xr.max[1]&&$e[2]*st<xr.max[2]&&Dr.footprint&&n.bv(Mi,Dr.footprint)?Math.max(Wi.cameraCollisionOpacity-vn,0):Math.min(1,Wi.cameraCollisionOpacity+vn)}const $n=[...jr],ks=Dr.anchor?Dr.anchor[0]:0,Xs=Dr.anchor?Dr.anchor[1]:0;n.a6.mat4.translate($n,$n,[ks*(Yr[0]-1),Xs*(Yr[1]-1),zr]),n.a6.vec3.exactEquals(Yr,n.dh)||n.a6.mat4.scale($n,$n,Yr);const Hn=n.a6.mat4.multiply([],$n,Dr.matrix),ar=n.a6.mat4.multiply([],Me.expandedFarZProjMatrix,Hn),ir=n.a6.mat4.multiply([],Me.expandedFarZProjMatrix,$n),gr=n.a6.vec4.transformMat4([],[ks,Xs,zr,1],ar)[2];Dr.hidden=!1;let Lr=Et;St||(Tt&&(Lr*=Wi.cameraCollisionOpacity,Lr*=zg($n,Me,Wi.aabb,Mt)),Lr*=dr(wt,gr)),Lr!==0?Rr.push({nodeInfo:Wi,depth:gr,opacity:Lr,wvpForNode:ar,wvpForTile:ir,nodeModelMatrix:Hn,tileModelMatrix:$n}):Dr.hidden=!0}St||Rr.sort((Wi,Dr)=>!Tt||Wi.opacity===1&&Dr.opacity===1?Wi.depth<Dr.depth?-1:1:Wi.opacity===1?-1:Dr.opacity===1?1:Wi.depth>Dr.depth?-1:1);for(const Wi of Rr){const Dr=Wi.nodeInfo,zr=Dr.node;let xr=n.a6.mat4.multiply([],dt,Wi.tileModelMatrix);n.a6.mat4.multiply(xr,Re,xr);const Yr=n.a6.mat4.invert([],xr);n.a6.mat4.transpose(Yr,Yr),n.a6.mat4.scale(Yr,Yr,jh),xr=n.a6.mat4.multiply(xr,xr,zr.matrix);const $n=re.renderPass==="light-beam",ks=mr&n.dj.HasMapboxMeshFeatures,Xs=ks?0:Dr.evaluatedRMEA[0][2];for(let Hn=0;Hn<zr.meshes.length;++Hn){const ar=zr.meshes[Hn],ir=Hn===zr.lightMeshIndex;let gr=Wi.wvpForNode;if(ir){if(!$n&&!re.terrain&&re.shadowRenderer){re.currentLayer<re.firstLightBeamLayer&&(re.firstLightBeamLayer=re.currentLayer);continue}gr=Wi.wvpForTile}else if($n)continue;const Lr={defines:[]},vn=[];if(!St&&Ee&&(Ee.useNormalOffset=!!ar.normalBuffer),hf(Lr.defines,vn,ar,re,ye.lut),ks||Lr.defines.push("DIFFUSE_SHADED"),cr&&Lr.defines.push("SHADOWS_SINGLE_CASCADE"),Gt&&(St?Gt.numRenderedVerticesInShadowPass+=ar.vertexArray.length:Gt.numRenderedVerticesInTransparentPass+=ar.vertexArray.length),St){df(ar,Wi.nodeModelMatrix,re,ye);continue}let Jr=null;if(we){const xa=Bp(Wi.nodeModelMatrix,re.transform);if(Jr=new Float32Array(xa),Me.projection.name!=="globe"){const ds=ar.aabb.min,Al=ar.aabb.max,[Js,Tr]=we.getOpacityForBounds(xa,ds[0],ds[1],Al[0],Al[1]);Lr.overrideFog=Js>=kt||Tr>=kt}}const Qn=ar.material;let Ya;Qn.occlusionTexture&&Qn.occlusionTexture.offsetScale&&(Ya=Qn.occlusionTexture.offsetScale,Lr.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const us=re.getOrCreateProgram("model",Lr);!St&&Ee&&Ee.setupShadowsFromMatrix(Wi.tileModelMatrix,us,Ee.useNormalOffset),re.uploadCommonUniforms(be,us,null,Jr);const hs=Qn.pbrMetallicRoughness;hs.metallicFactor=.9,hs.roughnessFactor=.5;const Ys=sf(new Float32Array(gr),new Float32Array(xr),new Float32Array(Yr),new Float32Array(zr.matrix),re,Wi.opacity,hs.baseColorFactor.toRenderColor(null),Qn.emissiveFactor,hs.metallicFactor,hs.roughnessFactor,Qn,Xs,ye,[0,0,0],Ya);!ir&&(Dr.hasTranslucentParts||Wi.opacity<1)&&us.draw(re,be.gl.TRIANGLES,Lt,Ei.disabled,qi.disabled,Si.backCCW,Ys,ye.id,ar.vertexBuffer,ar.indexBuffer,ar.segments,ye.paint,re.transform.zoom,void 0,vn),us.draw(re,be.gl.TRIANGLES,ir?jt:Lt,Ei.disabled,ir||Wi.opacity<1||Dr.hasTranslucentParts?qi.alphaBlended:qi.unblended,Si.backCCW,Ys,ye.id,ar.vertexBuffer,ar.indexBuffer,ar.segments,ye.paint,re.transform.zoom,void 0,vn)}}}}()}(p,o,c,m),void R();if(F.type!=="model")return;const O=F.getModels(),j=[],q=p.transform.getFreeCameraOptions().position,W=n.a6.vec3.scale([],[q.x,q.y,q.z],p.transform.worldSize);n.a6.vec3.negate(W,W);const te=[],ee=[];let ne=0;for(const re of O){const ue=c.paint.get("model-rotation").constantOr(null),ye=c.paint.get("model-scale").constantOr(null),ve=c.paint.get("model-translation").constantOr(null);re.computeModelMatrix(p,ue,ye,ve,!0,!0,!1);const be=n.a6.mat4.identity([]),Me=n.de(re.position.lat,p.transform.zoom),we=n.a6.mat4.fromScaling([],[1,1,1/Me]);n.a6.mat4.translate(be,be,W),j.push({zScaleMatrix:we,negCameraPosMatrix:be});for(const Ee of re.nodes)$h(p.transform,Ee,re.matrix,p.transform.expandedFarZProjMatrix,ne,te,ee);ne++}if(te.sort((re,ue)=>ue.depth-re.depth),p.renderPass!=="shadow"){if(v===1)for(const re of ee)qc(re,p,c,j[re.modelIndex],Ei.disabled,p.colorModeForRenderPass());else{for(const re of ee)qc(re,p,c,j[re.modelIndex],Ei.disabled,qi.disabled);for(const re of ee)qc(re,p,c,j[re.modelIndex],p.stencilModeFor3D(),p.colorModeForRenderPass());p.resetStencilClippingMasks()}for(const re of te)qc(re,p,c,j[re.modelIndex],Ei.disabled,p.colorModeForRenderPass());R()}else{for(const re of ee)df(re.mesh,re.nodeModelMatrix,p,c);for(const re of te)df(re.mesh,re.nodeModelMatrix,p,c);R()}}},wl={model:function(p,o,c){const m=o.getSource();if(!m.loaded())return;if(m.type==="vector"||m.type==="geojson")return void(c.modelManager&&c.modelManager.upload(c,m.type==="vector"?p.scope:""));if(m.type==="batched-model"||m.type!=="model")return;const v=m.getModels();for(const b of v)b.upload(c.context)},raster:function(p,o,c){const m=o.getSource();if(!(m instanceof Ss&&m.loaded()))return;const v=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!v)return;const b=p.paint.get("raster-array-band")||m.getInitialBand(v);if(b==null)return;const S=o.getIds().map(D=>o.getTileByID(D));for(const D of S)D.updateNeeded(v,b)&&m.prepareTile(D,v,b)},"raster-particle":function(p,o,c){const m=o.getSource();if(!(m instanceof Ss&&m.loaded()))return;const v=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!v)return;const b=p.paint.get("raster-particle-array-band")||m.getInitialBand(v);if(b==null)return;const S=o.getIds().map(D=>o.getTileByID(D));for(const D of S)D.updateNeeded(v,b)&&m.prepareTile(D,v,b)}};class oc{constructor(o,c,m,v,b){this.context=new Sv(o,c),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=b,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const S=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const R of S)this._debugParams.enabledLayers[R]=!0;b.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),b.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),b.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),b.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),b.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),b.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const R of S)b.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],R);this.occlusionParams=new Eu(b),this.setup(),this.numSublayers=_e.maxUnderzooming+_e.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new $a(this),this._wireframeDebugCache=new ff,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const D=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,D,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=v}updateTerrain(o,c){const m=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new mp(this,o));const v=this._terrain;this.transform.elevation=m?v:null,v.update(o,this.transform,c),this.transform.elevation&&!v.enabled&&(this.transform.elevation=null)}_updateFog(o){const c=o.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,v]=c.getFovAdjustedRange(this.transform._fov);if(m>v)return void(this.transform.fogCullDistSq=null);const b=m+.78*(v-m);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new mp(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,c){if(this.width=o*n.q.devicePixelRatio,this.height=c*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._mergedLayers[m].resize()}setup(){const o=this.context,c=new n.a$;c.emplaceBack(0,0),c.emplaceBack(n.ab,0),c.emplaceBack(0,n.ab),c.emplaceBack(n.ab,n.ab),this.tileExtentBuffer=o.createVertexBuffer(c,n.b1.members),this.tileExtentSegments=n.b2.simpleSegment(0,0,4,2);const m=new n.a$;m.emplaceBack(0,0),m.emplaceBack(n.ab,0),m.emplaceBack(0,n.ab),m.emplaceBack(n.ab,n.ab),this.debugBuffer=o.createVertexBuffer(m,n.b1.members),this.debugSegments=n.b2.simpleSegment(0,0,4,5);const v=new n.a$;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(v,n.b1.members),this.viewportSegments=n.b2.simpleSegment(0,0,4,2);const b=new n.aO;b.emplaceBack(0,0,0,0),b.emplaceBack(n.ab,0,n.ab,0),b.emplaceBack(0,n.ab,0,n.ab),b.emplaceBack(n.ab,n.ab,n.ab,n.ab),this.mercatorBoundsBuffer=o.createVertexBuffer(b,n.b4.members),this.mercatorBoundsSegments=n.b2.simpleSegment(0,0,4,2);const S=new n.aP;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(S);const D=new n.b0;for(const F of[0,1,3,2,0])D.emplaceBack(F);this.debugIndexBuffer=o.createIndexBuffer(D),this.emptyTexture=new n.T(o,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=n.a6.mat4.create();const R=this.context.gl;this.stencilClearMode=new Ei({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,gi.disabled,this.stencilClearMode,qi.disabled,Si.disabled,kh(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,c,m){if(!c||this.currentStencilSource===c.id||!o.isTileClipped()||!m||m.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let D=!1;for(const R of m)if(this._tileClippingMaskIDs[R.key]===void 0){D=!0;break}if(!D)return}this.currentStencilSource=c.id;const v=this.context,b=v.gl;this.nextStencilID+m.length>256&&this.clearStencil(),v.setColorMode(qi.disabled),v.setDepthMode(gi.disabled);const S=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of m){const R=c.getTile(D),F=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,{tileBoundsBuffer:O,tileBoundsIndexBuffer:j,tileBoundsSegments:q}=this.getTileBoundsBuffers(R);S.draw(this,b.TRIANGLES,gi.disabled,new Ei({func:b.ALWAYS,mask:0},F,255,b.KEEP,b.KEEP,b.REPLACE),qi.disabled,Si.disabled,kh(D.projMatrix),"$clipping",O,j,q)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,c=this.context.gl;return new Ei({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const c=this.context.gl;return new Ei({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){const c=this.context.gl,m=o.sort((S,D)=>D.overscaledZ-S.overscaledZ),v=m[m.length-1].overscaledZ,b=m[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const S={};for(let D=0;D<b;D++)S[D+v]=new Ei({func:c.GEQUAL,mask:255},D+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[S,m]}return[{[v]:Ei.disabled},m]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new qi([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new n.bA(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qi.unblended:qi.alphaBlended}colorModeForDrapableLayerRenderPass(o){const c=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new qi([c.ONE,c.ONE_MINUS_SRC_ALPHA,c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA],new n.bA(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,c,m,v=!1){if(this.depthOcclusion)return new gi(this.context.gl.GREATER,gi.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!v)return gi.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new gi(m||this.context.gl.LEQUAL,c,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,c=Math.ceil(this.width),m=Math.ceil(this.height),v=this.context.bindFramebuffer.get(),b=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===c&&this.depthFBO.height===m||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),c!==0&&m!==0&&(this.depthFBO=new xg(this.context,c,m,!1,"texture"),this.depthTexture=new n.T(this.context,{width:c,height:m,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(v),o.bindTexture(o.TEXTURE_2D,b),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,c,m,0,0,c,m,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,c)=>o+c/this._fpsHistory.length,0))}render(o,c){const m=n.q.now();this._dt=m-this._timeStamp,this._timeStamp=m,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=c;const v=this.style._mergedLayers,b=this.style._getOrder(!(!this.terrain||!this.terrain.enabled)).filter(Oe=>{const Re=v[Oe];return!(Re.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Re.type]});let S=!1,D=!1;for(const Oe of b){const Re=v[Oe];Re.type==="circle"&&(S=!0),Re.type==="symbol"&&(Re.hasInitialOcclusionOpacityProperties?D=!0:S=!0)}const R=b.map(Oe=>v[Oe]),F=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let O=0,j=!1;for(const Oe in F){const Re=F[Oe];Re.used&&(Re.prepare(this.context),Re.getSource().usedInConflation&&++O)}let q=!1;for(const Oe of R)Oe.isHidden(this.transform.zoom)||(Oe.type==="clip"&&(q=!0),this.prepareLayer(Oe));const W={},te={},ee={},ne={},re={};for(const Oe in F){const Re=F[Oe];W[Oe]=Re.getVisibleCoordinates(),te[Oe]=W[Oe].slice().reverse(),ee[Oe]=Re.getVisibleCoordinates(!0).reverse(),ne[Oe]=Re.getShadowCasterCoordinates(),re[Oe]=Re.sortCoordinatesByDistance(W[Oe])}const ue=Oe=>{const Re=this.style.getLayerSourceCache(Oe);return Re&&Re.used?Re.getSource():null};if(O||q||this._clippingActiveLastFrame){const Oe=[],Re=[];let st=0;for(const dt of R)this.isSourceForClippingOrConflation(dt,ue(dt))&&(Oe.push(dt),Re.push(st)),st++;if(Oe&&(q||Oe.length>1)||this._clippingActiveLastFrame){q=!1;const dt=[];for(let Et=0;Et<Oe.length;Et++){const Lt=Oe[Et],jt=Re[Et],Xe=this.style.getLayerSourceCache(Lt);if(!Xe||!Xe.used||!Xe.getSource().usedInConflation&&Lt.type!=="clip")continue;let St=n.dn,ct=n.bt.None;const Mt=[];let Tt=!0;if(Lt.type==="clip"){St=jt;for(const wt of Lt.layout.get("clip-layer-types"))ct|=wt==="model"?n.bt.Model:wt==="symbol"?n.bt.Symbol:n.bt.FillExtrusion;for(const wt of Lt.layout.get("clip-layer-scope"))Mt.push(wt);Lt.isHidden(this.transform.zoom)?Tt=!1:q=!0}Tt&&dt.push({layer:Lt.fqid,cache:Xe,order:St,clipMask:ct,clipScope:Mt})}this.replacementSource.setSources(dt),j=!0}}this._clippingActiveLastFrame=q,j||this.replacementSource.clear(),this.conflationActive=j,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Oe=0;Oe<R.length;Oe++){const Re=R[Oe],st=Re.cutoffRange();if(this.longestCutoffRange=Math.max(st,this.longestCutoffRange),st>0){const dt=ue(Re);dt&&(this.minCutoffZoom=Math.max(dt.minzoom,this.minCutoffZoom)),Re.minzoom&&(this.minCutoffZoom=Math.max(Re.minzoom,this.minCutoffZoom))}Re.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Oe),this._lastOcclusionLayer=Oe)}const ye=this.style&&this.style.fog;ye?(this._fogVisible=ye.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=ye.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(ee),this.opaquePassCutoff=0);const ve=this._shadowRenderer;if(ve){ve.updateShadowParameters(this.transform,this.style.directionalLight);for(const Oe in F)for(const Re of W[Oe]){let st={min:0,max:0};this.terrain&&(st=this.terrain.getMinMaxForTile(Re)||st),ve.addShadowReceiver(Re.toUnwrapped(),st.min,st.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Op(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!On.has(this.context.gl))return;this.renderPass="offscreen";for(const Oe of R){const Re=o.getLayerSourceCache(Oe);if(!Oe.hasOffscreenPass()||Oe.isHidden(this.transform.zoom))continue;const st=Re?te[Re.id]:void 0;(Oe.type==="custom"||Oe.type==="raster"||Oe.type==="raster-particle"||Oe.isSky()||st&&st.length)&&this.renderLayer(this,Re,Oe,st)}this.depthRangeFor3D=[0,1-(R.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,ne)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const be=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Me=(()=>{if(c.showOverdrawInspector)return n.bA.black;const Oe=this.style.fog;if(Oe&&this.transform.projection.supportsFog){const Re=this.style.getLut(Oe.scope);if(!be){const st=Oe.properties.get("color").toRenderColor(Re).toArray01();return new n.bA(...st)}if(be){const st=Oe.properties.get("space-color").toRenderColor(Re).toArray01();return new n.bA(...st)}}return n.bA.transparent})();if(this.context.clear({color:Me,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&be&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Oe=R[this.currentLayer],Re=o.getLayerSourceCache(Oe);if(Oe.isSky())continue;const st=Re?(Oe.is3D()?re:te)[Re.id]:void 0;this._renderTileClippingMasks(Oe,Re,st),this.renderLayer(this,Re,Oe,st)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&be&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Oe=R[this.currentLayer],Re=o.getLayerSourceCache(Oe);Oe.isSky()&&this.renderLayer(this,Re,Oe,Re?te[Re.id]:void 0)}function we(Oe,Re){let st;return Re&&(st=(Oe.type==="symbol"?ee:Oe.is3D()?re:te)[Re.id]),st}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<b.length;){const Oe=R[this.currentLayer];if(Oe.type==="raster"||Oe.type==="raster-particle"){const Re=o.getLayerSourceCache(Oe);this.renderLayer(this,Re,Oe,we(Oe,Re))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ee=0;ve&&(Ee=ve.getShadowCastingLayerCount());let ke=!1,$e=-1;for(let Oe=0;Oe<b.length;++Oe){const Re=R[Oe];Re.isHidden(this.transform.zoom)||Re.is3D()&&($e=Oe)}for(D&&$e===-1&&(S=!0);this.currentLayer<b.length;){const Oe=R[this.currentLayer],Re=o.getLayerSourceCache(Oe);if(Oe.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Oe)){if(Oe.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(S&&!ke&&this.terrain&&!this.transform.isOrthographic&&(ke=!0,this.blitDepth()),D&&$e!==-1&&this.currentLayer===$e+1&&!this.transform.isOrthographic&&this.blitDepth(),Oe.is3D()||this.terrain||this._renderTileClippingMasks(Oe,Re,Re?W[Re.id]:void 0),this.renderLayer(this,Re,Oe,we(Oe,Re)),!this.terrain&&ve&&Ee>0&&Oe.hasShadowPass()&&--Ee==0&&(ve.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const st=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=st;this.currentLayer++){const dt=R[this.currentLayer];if(!dt.hasLightBeamPass())continue;const Et=o.getLayerSourceCache(dt);this.renderLayer(this,Et,dt,Et?te[Et.id]:void 0)}this.currentLayer=st,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const st=this.currentLayer;this.depthOcclusion=!0;for(const dt of this.layersWithOcclusionOpacity){this.currentLayer=dt;const Et=R[this.currentLayer],Lt=o.getLayerSourceCache(Et),jt=Lt?te[Lt.id]:void 0;Et.is3D()||this.terrain||this._renderTileClippingMasks(Et,Lt,Lt?W[Lt.id]:void 0),this.renderLayer(this,Lt,Et,jt)}this.depthOcclusion=!1,this.currentLayer=st,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Oe=null;R.forEach(Re=>{const st=o.getLayerSourceCache(Re);st&&!Re.isHidden(this.transform.zoom)&&st.getVisibleCoordinates().length&&(!Oe||Oe.getSource().maxzoom<st.getSource().maxzoom)&&(Oe=st)}),Oe&&this.options.showTileBoundaries&&Uh.debug(this,Oe,Oe.getVisibleCoordinates(),n.bA.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Uh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.bA(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Oe){const Re=Oe.transform.padding;it(Oe,Oe.transform.height-(Re.top||0),3,wu),it(Oe,Re.bottom||0,3,Su),kp(Oe,Re.left||0,3,Ft),kp(Oe,Oe.transform.width-(Re.right||0),3,pi);const st=Oe.transform.centerPoint;(function(dt,Et,Lt,jt){Vc(dt,Et-1,Lt-10,2,20,jt),Vc(dt,Et-10,Lt-1,20,2,jt)})(Oe,st.x,Oe.transform.height-st.y,Mu)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),j||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:c}=this.transform.projection,m=!c||!c.includes(o.type);if(wl[o.type]&&(m||this.terrain&&o.type==="custom")){const v=this.style.getLayerSourceCache(o);wl[o.type](o,v,this)}this.gpuTimingEnd()}renderLayer(o,c,m,v){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="sky"||m.type==="custom"||m.type==="model"||m.type==="raster"||m.type==="raster-particle"||v&&v.length)&&(this.id=m.id,this.gpuTimingStart(m),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(m.type)&&(!o.terrain||m.type!=="custom")||m.type==="clip"||Uh[m.type](o,c,m,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery,m=this.context.gl;let v=this.gpuTimers[o.id];v||(v=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:m.createQuery()}),v.calls++,m.beginQuery(c.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,c=this.context.gl,m=c.createQuery();this.deferredRenderGpuTimeQueries.push(m),c.beginQuery(o.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const c={};for(const m in o){const v=o[m],b=this.context.extTimerQuery,S=b.getQueryParameter(v.query,this.context.gl.QUERY_RESULT)/1e6;b.deleteQueryEXT(v.query),c[m]=S}return c}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.gl;let m=0;for(const v of o)m+=c.getQueryParameter(v,c.QUERY_RESULT)/1e6,c.deleteQuery(v);return m}translatePosMatrix(o,c,m,v,b){if(!m[0]&&!m[1])return o;const S=b?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(S){const F=Math.sin(S),O=Math.cos(S);m=[m[0]*O-m[1]*F,m[0]*F+m[1]*O]}const D=[b?m[0]:n.ak(c,m[0],this.transform.zoom),b?m[1]:n.ak(c,m[1],this.transform.zoom),0],R=new Float32Array(16);return n.a6.mat4.translate(R,o,D),R}saveTileTexture(o){const c=o.size[0],m=this._tileTextures[c];m?m.push(o):this._tileTextures[c]=[o]}getTileTexture(o){const c=this._tileTextures[o];return c&&c.length>0?c.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,c,m){const v=m===void 0?this.terrain&&this.terrain.renderingToTexture:m,b=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(b.push("LIGHTING_3D_MODE"),b.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):v||b.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||b.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(b.push("TERRAIN"),this.linearFloatFilteringSupported()&&b.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&b.push("GLOBE"),!this._fogVisible||v||c!==void 0&&!c||b.push("FOG","FOG_DITHERING"),v&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}getOrCreateProgram(o,c){this.cache=this.cache||{};const m=c&&c.defines||[],v=c&&c.config,b=this.currentGlobalDefines(o,c&&c.overrideFog,c&&c.overrideRtt).concat(m),S=xl.cacheKey(ls[o],o,b,v);return this.cache[S]||(this.cache[S]=new xl(this.context,o,ls[o],v,Uc[o],b)),this.cache[S]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,c){if(this.style.enable3dLights()){const m=this.style.directionalLight,v=this.style.ambientLight;if(m&&v){const b=((S,D,R)=>{const F=S.properties.get("direction"),O=S.properties.get("color").toRenderColor(R.getLut(S.scope)).toArray01(),j=S.properties.get("intensity"),q=D.properties.get("color").toRenderColor(R.getLut(D.scope)).toArray01(),W=D.properties.get("intensity"),te=[F.x,F.y,F.z],ee=n.cH(q,W),ne=n.cH(O,j);return{u_lighting_ambient_color:ee,u_lighting_directional_dir:te,u_lighting_directional_color:ne,u_ground_radiance:gp(te,ne,ee)}})(m,v,this.style);c.setLightsUniformValues(o,b)}}}uploadCommonUniforms(o,c,m,v,b){if(this.uploadCommonLightUniforms(o,c),this.terrain&&this.terrain.renderingToTexture)return;const S=this.style.fog;if(S){const D=S.getOpacity(this.transform.pitch),R=((F,O,j,q,W,te,ee,ne,re,ue,ye,ve)=>{const be=F.transform,Me=O.properties.get("color").toRenderColor(F.style.getLut(O.scope)).toArray01();Me[3]=q;const we=F.frameCounter/1e3%1,[Ee,ke]=O.properties.get("vertical-range");return{u_fog_matrix:j?be.calculateFogTileMatrix(j):ve||F.identityMat,u_fog_range:O.getFovAdjustedRange(be._fov),u_fog_color:Me,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ee,ke),ke],u_fog_temporal_offset:we,u_frustum_tl:W,u_frustum_tr:te,u_frustum_br:ee,u_frustum_bl:ne,u_globe_pos:re,u_globe_radius:ue,u_viewport:ye,u_globe_transition:n.a9(be.zoom),u_is_globe:+(be.projection.name==="globe")}})(this,S,m,D,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],v);c.setFogUniformValues(o,R)}b&&c.setCutoffUniformValues(o,b.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,c=o.createTexture();return o.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,c=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const v of m)c[v.key]=o[v.key]||new $s(v,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,c){return!(!o.is3D()||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!c||c.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let c=this._cachedTileFogOpacities[o.key];return c||(this._cachedTileFogOpacities[o.key]=c=this.style.fog.getOpacityForTile(o)),c[0]>=kt||c[1]>=kt}setupDepthForOcclusion(o,c,m){const v=this.context,b=v.gl,S=!!m;var D;m||(m={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),v.activeTexture.set(b.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),m.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],m.u_depth_range_unpack=[2/((D=this.depthRangeFor3D)[1]-D[0]),-1-2*D[0]/(D[1]-D[0])],m.u_occluder_half_size=.5*this.occlusionParams.occluderSize,m.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),v.activeTexture.set(b.TEXTURE0),S||c.setTerrainUniformValues(v,m)}}function Sl(p,o){let c=!1,m=null;const v=()=>{m=null,c&&(p(),m=setTimeout(v,o),c=!1)};return()=>(c=!0,m||v(),m)}class pf{constructor(o){this._hashName=o&&encodeURIComponent(o),n.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Sl(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const c=Vh(o);if(this._hashName){const m=this._hashName;let v=!1;const b=location.hash.slice(1).split("&").map(S=>{const D=S.split("=")[0];return D===m?(v=!0,`${D}=${c}`):S}).filter(S=>S);return v||b.push(`${m}=${c}`),`#${b.join("&")}`}return`#${c}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(c=m)}),(c&&c[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(m=>isNaN(m))){const m=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(c[3]||0):o.getBearing();return o.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Vh(p,o){const c=p.getCenter(),m=Math.round(100*p.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),S=Math.round(c.lng*b)/b,D=Math.round(c.lat*b)/b,R=p.getBearing(),F=p.getPitch();let O=o?`/${S}/${D}/${m}`:`${m}/${D}/${S}`;return(R||F)&&(O+="/"+Math.round(10*R)/10),F&&(O+=`/${Math.round(F)}`),O}const Tu={linearity:.3,easing:n.dp(0,0,.3,1)},Np=n.l({deceleration:2500,maxSpeed:1400},Tu),$p=n.l({deceleration:20,maxSpeed:1400},Tu),sc=n.l({deceleration:1e3,maxSpeed:360},Tu),jp=n.l({deceleration:1e3,maxSpeed:90},Tu);class mf{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,c=n.q.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const b=Au(c.pan.mag(),m,n.l({},Np,o||{}));v.offset=c.pan.mult(b.amount/c.pan.mag()),v.center=this._map.transform.center,Cu(v,b)}if(c.zoom){const b=Au(c.zoom,m,$p);v.zoom=this._map.transform.zoom+b.amount,Cu(v,b)}if(c.bearing){const b=Au(c.bearing,m,sc);v.bearing=this._map.transform.bearing+n.ap(b.amount,-179,179),Cu(v,b)}if(c.pitch){const b=Au(c.pitch,m,jp);v.pitch=this._map.transform.pitch+b.amount,Cu(v,b)}if(v.zoom||v.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function Cu(p,o){(!p.duration||p.duration<o.duration)&&(p.duration=o.duration,p.easing=o.easing)}function Au(p,o,c){const{maxSpeed:m,linearity:v,deceleration:b}=c,S=n.ap(p*v/(o/1e3),-m,m),D=Math.abs(S)/(b*v);return{easing:c.easing,duration:1e3*D,amount:S*(D/2)}}class rn extends n.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,m,v={}){const b=We(c.getCanvasContainer(),m),S=c.unproject(b);super(o,n.l({point:b,lngLat:S,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class Iu extends n.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,m){const v=o==="touchend"?m.changedTouches:m.touches,b=Qe(c.getCanvasContainer(),v),S=b.map(R=>c.unproject(R)),D=b.reduce((R,F,O,j)=>R.add(F.div(j.length)),new n.P(0,0));super(o,{points:b,point:D,lngLats:S,lngLat:c.unproject(D),originalEvent:m}),this._defaultPrevented=!1}}class Up extends n.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c){super("wheel",{originalEvent:c}),this._defaultPrevented=!1}}class zu{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new Up(this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new rn(o.type,this._map,o))}mouseup(o){this._map.fire(new rn(o.type,this._map,o))}preclick(o){const c=n.l({},o);c.type="preclick",this._map.fire(new rn(c.type,this._map,c))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(o),this._map.fire(new rn(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new rn(o.type,this._map,o))}mouseover(o){this._map.fire(new rn(o.type,this._map,o))}mouseout(o){this._map.fire(new rn(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Iu(o.type,this._map,o))}touchmove(o){this._map.fire(new Iu(o.type,this._map,o))}touchend(o){this._map.fire(new Iu(o.type,this._map,o))}touchcancel(o){this._map.fire(new Iu(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hc{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new rn(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new rn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vp{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(he(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;const m=c,v=this._startPos,b=this._lastPos;if(!v||!b||b.equals(m)||!this._box&&m.dist(v)<this._clickTolerance)return;this._lastPos=m,this._box||(this._box=ie("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const S=Math.min(v.x,m.x),D=Math.max(v.x,m.x),R=Math.min(v.y,m.y),F=Math.max(v.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${S}px,${R}px)`,this._box.style.width=D-S+"px",this._box.style.height=F-R+"px")})}mouseupWindow(o,c){if(!this._active)return;const m=this._startPos,v=c;if(m&&o.button===0){if(this.reset(),Ae(),m.x!==v.x||m.y!==v.y)return this._map.fire(new n.x("boxzoomend",{originalEvent:o})),{cameraAnimation:b=>b.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Ce(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new n.x(o,{originalEvent:c}))}}function gf(p,o){const c={};for(let m=0;m<p.length;m++)c[p[m].identifier]=o[m];return c}class Dg{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const b=new n.P(0,0);for(const S of v)b._add(S);return b.div(v.length)}(c),this.touches=gf(m,c)))}touchmove(o,c,m){if(this.aborted||!this.centroid)return;const v=gf(m,c);for(const b in this.touches){const S=v[b];(!S||S.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(o,c,m){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class qh{constructor(o){this.singleTap=new Dg(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,c,m){this.singleTap.touchstart(o,c,m)}touchmove(o,c,m){this.singleTap.touchmove(o,c,m)}touchend(o,c,m){const v=this.singleTap.touchend(o,c,m);if(v){const b=o.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(v)<30;if(b&&S||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class qp{constructor(){this._zoomIn=new qh({numTouches:1,numTaps:2}),this._zoomOut=new qh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,m){this._zoomIn.touchstart(o,c,m),this._zoomOut.touchstart(o,c,m)}touchmove(o,c,m){this._zoomIn.touchmove(o,c,m),this._zoomOut.touchmove(o,c,m)}touchend(o,c,m){const v=this._zoomIn.touchend(o,c,m),b=this._zoomOut.touchend(o,c,m);return v?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(v)},{originalEvent:o})}):b?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(b)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Hh={0:1,2:2};class Gh{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,c){return!1}_move(o,c){return{}}mousedown(o,c){if(this._lastPoint)return;const m=ze(o);this._correctButton(o,m)&&(this._lastPoint=c,this._eventButton=m)}mousemoveWindow(o,c){const m=this._lastPoint;if(m){if(o.preventDefault(),this._eventButton!=null&&function(v,b){const S=Hh[b];return v.buttons===void 0||(v.buttons&S)!==S}(o,this._eventButton))this.reset();else if(this._moved||!(c.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(m,c)}}mouseupWindow(o){this._lastPoint&&ze(o)===this._eventButton&&(this._moved&&Ae(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _f extends Gh{mousedown(o,c){super.mousedown(o,c),this._lastPoint&&(this._active=!0)}_correctButton(o,c){return c===0&&!o.ctrlKey}_move(o,c){return{around:c,panDelta:c.sub(o)}}}class yf extends Gh{_correctButton(o,c){return c===0&&o.ctrlKey||c===2}_move(o,c){const m=.8*(c.x-o.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(o){o.preventDefault()}}class vf extends Gh{_correctButton(o,c){return c===0&&o.ctrlKey||c===2}_move(o,c){const m=-.5*(c.y-o.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(o){o.preventDefault()}}class Pg{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),n.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(o,c,m){return this._calculateTransform(o,c,m)}touchmove(o,c,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(m.length===1&&!n.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,c,m)}}touchend(o,c,m){this._calculateTransform(o,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,m){m.length>0&&(this._active=!0);const v=gf(m,c),b=new n.P(0,0),S=new n.P(0,0);let D=0;for(const F in v){const O=v[F],j=this._touches[F];j&&(b._add(O),S._add(O.sub(j)),D++,v[F]=O)}if(this._touches=v,D<this._minTouches||!S.mag())return;const R=S.div(D);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(D),panDelta:R}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ie("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class xf{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,c,m){return{}}touchstart(o,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,m){const v=this._firstTwoTouches;if(!v)return;o.preventDefault();const[b,S]=v,D=Wh(m,c,b),R=Wh(m,c,S);if(!D||!R)return;const F=this._aroundCenter?null:D.add(R).div(2);return this._move([D,R],F,o)}touchend(o,c,m){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,S=Wh(m,c,v),D=Wh(m,c,b);S&&D||(this._active&&Ae(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wh(p,o,c){for(let m=0;m<p.length;m++)if(p[m].identifier===c)return o[m]}function Hp(p,o){return Math.log(p/o)/Math.LN2}class kg extends xf{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){const m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Hp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hp(this._distance,m),pinchAround:c}}}function Gp(p,o){return 180*p.angleWith(o)/Math.PI}class Rg extends xf{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c){const m=this._vector;if(this._vector=o[0].sub(o[1]),m&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Gp(this._vector,m),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const c=25/(Math.PI*this._minDiameter)*360,m=this._startVector;if(!m)return!1;const v=Gp(o,m);return Math.abs(v)<c}}function bf(p){return Math.abs(p.y)>Math.abs(p.x)}class Lg extends xf{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,bf(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,m){const v=this._lastPoints;if(!v)return;const b=o[0].sub(v[0]),S=o[1].sub(v[1]);return this._map._cooperativeGestures&&!n.dq()&&m.touches.length<3||(this._valid=this.gestureBeginsVertically(b,S,m.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(b.y+S.y)/2*-.5})}gestureBeginsVertically(o,c,m){if(this._valid!==void 0)return this._valid;const v=o.mag()>=2,b=c.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove==null&&(this._firstMove=m),m-this._firstMove<100&&void 0;const S=o.y>0==c.y>0;return bf(o)&&bf(c)&&S}}const Og={panStep:100,bearingStep:15,pitchStep:10};class Bg{constructor(){const o=Og;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,m=0,v=0,b=0,S=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?m=-1:(o.preventDefault(),b=-1);break;case 39:o.shiftKey?m=1:(o.preventDefault(),b=1);break;case 38:o.shiftKey?v=1:(o.preventDefault(),S=-1);break;case 40:o.shiftKey?v=-1:(o.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:D=>{const R=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:Fg,zoom:c?Math.round(R)+c*(o.shiftKey?2:1):R,bearing:D.getBearing()+m*this._bearingStep,pitch:D.getPitch()+v*this._pitchStep,offset:[-b*this._panStep,-S*this._panStep],center:D.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fg(p){return p*(2-p)}const Wp=4.000244140625,Av=1/450;class Iv{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._handler=c,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Av,n.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||n.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const m=n.q.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%Wp==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=We(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const F=this._type==="wheel"&&Math.abs(this._delta)>Wp?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&O!==0&&(O=1/O);const j=c(),q=Math.pow(2,j),W=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(W*O))),this._type==="wheel"&&(this._startZoom=j,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:c(),v=this._startZoom,b=this._easing;let S,D=!1;if(this._type==="wheel"&&v&&b){const F=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),O=b(F);S=n.aa(v,m,O),F<1?this._frameId||(this._frameId=!0):D=!0}else S=m,D=!0;this._active=!0,D&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let R=S-c();return R*this._lastDelta<0&&(R=0),{noInertia:!0,needsRenderFrame:!D,zoomDelta:R,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=n.dr;if(this._prevEase){const m=this._prevEase,v=(n.q.now()-m.start)/m.duration,b=m.easing(v+.01)-m.easing(v),S=.27/Math.sqrt(b*b+1e-4)*.01,D=Math.sqrt(.0729-S*S);c=n.dp(S,D,.25,1)}return this._prevEase={start:n.q.now(),duration:o,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ie("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class yn{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ng{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,c){return o.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(o.shiftKey?-1:1),around:m.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zv{constructor(){this._tap=new qh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,c,m){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=c[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(o,c,m))}touchmove(o,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,o.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(o,c,m)}touchend(o,c,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(o,c,m)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dv{constructor(o,c,m){this._el=o,this._mousePan=c,this._touchPan=m}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zh{constructor(o,c,m){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $g{constructor(o,c,m,v){this._el=o,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Du=p=>p.zoom||p.drag||p.pitch||p.rotate;class wf extends n.x{}class Ml{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,c){const m=n.a6.vec3.sub([],c,o);this.radius=n.a6.vec3.length(m[2]<0?n.a6.vec3.div([],m,this.constants):[m[0],m[1],0])}projectRay(o){n.a6.vec3.div(o,o,this.constants),n.a6.vec3.normalize(o,o),n.a6.vec3.mul(o,o,this.constants);const c=n.a6.vec3.scale([],o,this.radius);if(c[2]>0){const m=n.a6.vec3.scale([],[0,0,1],n.a6.vec3.dot(c,[0,0,1])),v=n.a6.vec3.scale([],n.a6.vec3.normalize([],[c[0],c[1],0]),this.radius),b=n.a6.vec3.add([],c,n.a6.vec3.scale([],n.a6.vec3.sub([],n.a6.vec3.add([],v,m),c),2));c[0]=b[0],c[1]=b[1]}return c}}function Gc(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class qn{constructor(o,c){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mf(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ml,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),n.aJ(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,b,S]of this._listeners){const D=v===document?this.handleWindowEvent:this.handleEvent;v.addEventListener(b,D,S)}}destroy(){for(const[o,c,m]of this._listeners){const v=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(c,v,m)}}_addDefaultHandlers(o){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new zu(c,o));const v=c.boxZoom=new Vp(c,o);this._add("boxZoom",v);const b=new qp,S=new Ng;c.doubleClickZoom=new yn(S,b),this._add("tapZoom",b),this._add("clickZoom",S);const D=new zv;this._add("tapDragZoom",D);const R=c.touchPitch=new Lg(c);this._add("touchPitch",R);const F=new yf(o),O=new vf(o);c.dragRotate=new Zh(o,F,O),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]);const j=new _f(o),q=new Pg(c,o);c.dragPan=new Dv(m,j,q),this._add("mousePan",j),this._add("touchPan",q,["touchZoom","touchRotate"]);const W=new Rg,te=new kg;c.touchZoomRotate=new $g(m,te,W,D),this._add("touchRotate",W,["touchPan","touchZoom"]),this._add("touchZoom",te,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Hc(c));const ee=c.scrollZoom=new Iv(c,this);this._add("scrollZoom",ee,["mousePan"]);const ne=c.keyboard=new Bg;this._add("keyboard",ne);for(const re of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[re]&&c[re].enable(o[re])}_add(o,c,m){this._handlers.push({handlerName:o,handler:c,allowed:m}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Du(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,c,m){for(const v in o)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const c=[];for(const m of o)this._el.contains(m.target)&&c.push(m);return c}handleEvent(o,c){this._updatingCamera=!0;const m=o.type==="renderFrame",v=m?void 0:o,b={needsRenderFrame:!1},S={},D={},R=o.touches?this._getMapTouches(o.touches):void 0,F=R?Qe(this._el,R):m?void 0:We(this._el,o);for(const{handlerName:q,handler:W,allowed:te}of this._handlers){if(!W.isEnabled())continue;let ee;this._blockedByActive(D,te,q)?W.reset():W[c||o.type]&&(ee=W[c||o.type](o,F,R),this.mergeHandlerResult(b,S,ee,q,v),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||W.isActive())&&(D[q]=W)}const O={};for(const q in this._previousActiveHandlers)D[q]||(O[q]=v);this._previousActiveHandlers=D,(Object.keys(O).length||Gc(b))&&(this._changes.push([b,S,O]),this._triggerRenderFrame()),(Object.keys(D).length||Gc(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:j}=b;j&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],j(this._map))}mergeHandlerResult(o,c,m,v,b){if(!m)return;n.l(o,m);const S={handlerName:v,originalEvent:m.originalEvent||b};m.zoomDelta!==void 0&&(c.zoom=S),m.panDelta!==void 0&&(c.drag=S),m.pitchDelta!==void 0&&(c.pitch=S),m.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){const o={},c={},m={};for(const[v,b,S]of this._changes)v.panDelta&&(o.panDelta=(o.panDelta||new n.P(0,0))._add(v.panDelta)),v.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(o.around=v.around),v.aroundCoord!==void 0&&(o.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(o.pinchAround=v.pinchAround),v.noInertia&&(o.noInertia=v.noInertia),n.l(c,b),n.l(m,S);this._updateMapTransform(o,c,m),this._changes=[]}_updateMapTransform(o,c,m){const v=this._map,b=v.transform,S=ue=>[ue.x,ue.y,ue.z];if((ue=>{const ye=this._eventsInProgress.drag;return ye&&!this._handlersById[ye.handlerName].isActive()})()&&!Gc(o)){const ue=b.zoom;b.cameraElevationReference="sea",this._originalZoom!=null&&b._orthographicProjectionAtLowPitch&&b.projection.name!=="globe"&&b.pitch===0?(b.cameraElevationReference="ground",b.zoom=this._originalZoom):(b.recenterOnTerrain(),b.cameraElevationReference="ground"),ue!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&v._stop(!0),!Gc(o))return void this._fireEvents(c,m,!0);let{panDelta:D,zoomDelta:R,bearingDelta:F,pitchDelta:O,around:j,aroundCoord:q,pinchAround:W}=o;b._isCameraConstrained&&(R>0&&(R=0),b._isCameraConstrained=!1),W!==void 0&&(j=W),(R||(ue=>c[ue]&&!this._eventsInProgress[ue])("drag"))&&j&&(this._dragOrigin=S(b.pointCoordinate3D(j)),this._originalZoom=b.zoom,this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",v._stop(!0),j=j||v.transform.centerPoint,F&&(b.bearing+=F),O&&(b.pitch+=O),b._updateCameraState();const te=[0,0,0];if(D)if(b.projection.name==="mercator"){const ue=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(j).dir),ye=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(j.sub(D)).dir);te[0]=ye[0]-ue[0],te[1]=ye[1]-ue[1]}else{const ue=b.pointCoordinate(j);if(b.projection.name==="globe"){D=D.rotate(-b.angle);const ye=b._pixelsPerMercatorPixel/b.worldSize;te[0]=-D.x*n.ds(n.aN(ue.y))*ye,te[1]=-D.y*n.ds(b.center.lat)*ye}else{const ye=b.pointCoordinate(j.sub(D));ue&&ye&&(te[0]=ye.x-ue.x,te[1]=ye.y-ue.y)}}const ee=b.zoom,ne=[0,0,0];if(R){const ue=S(q||b.pointCoordinate3D(j)),ye={dir:n.a6.vec3.normalize([],n.a6.vec3.sub([],ue,b._camera.position))};if(ye.dir[2]<0){const ve=b.zoomDeltaToMovement(ue,R);n.a6.vec3.scale(ne,ye.dir,ve)}}const re=n.a6.vec3.add(te,te,ne);b._translateCameraConstrained(re),R&&Math.abs(b.zoom-ee)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,m,!0)}_fireEvents(o,c,m){const v=Du(this._eventsInProgress),b=Du(o),S={};for(const O in o){const{originalEvent:j}=o[O];this._eventsInProgress[O]||(S[`${O}start`]=j),this._eventsInProgress[O]=o[O]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const O in S)this._fireEvent(O,S[O]);b&&this._fireEvent("move",b.originalEvent);for(const O in o){const{originalEvent:j}=o[O];this._fireEvent(O,j)}const D={};let R;for(const O in this._eventsInProgress){const{handlerName:j,originalEvent:q}=this._eventsInProgress[O];this._handlersById[j].isActive()||(delete this._eventsInProgress[O],R=c[j]||q,D[`${O}end`]=R)}for(const O in D)this._fireEvent(O,D[O]);const F=Du(this._eventsInProgress);if(m&&(v||b)&&!F){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;O?(j(O.bearing||this._map.getBearing())&&(O.bearing=0),this._map.easeTo(O,{originalEvent:R})):(this._map.fire(new n.x("moveend",{originalEvent:R})),j(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new n.x(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new wf("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Za="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Zp extends n.E{constructor(o,c){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,n.aJ(["_renderFrameCallback"],this)}getCenter(){return new n.bL(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,m){return o=n.P.convert(o).mult(-1),this.panTo(this.transform.center,n.l({offset:o},c),m)}panTo(o,c,m){return this.easeTo(n.l({center:o},c),m)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,m){return this.easeTo(n.l({zoom:o},c),m)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,m){return this.easeTo(n.l({bearing:o},c),m)}resetNorth(o,c){return this.rotateTo(0,n.l({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=n.as.convert(o);const m=c&&c.bearing||0,v=c&&c.pitch||0,b=o.getNorthWest(),S=o.getSouthEast();return this._cameraForBounds(this.transform,b,S,m,v,c)}_extendPadding(o){const c={top:0,right:0,bottom:0,left:0};return o==null?n.l({},c,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:n.l({},c,o)}_extendCameraOptions(o){return(o=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,c){const m=c.max[0]-c.min[0],v=c.max[1]-c.min[1];return m/v>o.aspect?m/(2*Math.tan(.5*o.fovX)*o.aspect):v/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,c,m,v,b,S){const D=o.clone(),R=this._extendCameraOptions(S);D.bearing=v,D.pitch=b;const F=n.bL.convert(c),O=n.bL.convert(m),j=.5*(F.lat+O.lat),q=.5*(F.lng+O.lng),W=n.dt(j,q),te=n.a6.vec3.normalize([],W),ee=n.a6.vec3.normalize([],n.a6.vec3.cross([],te,[0,1,0])),ne=n.a6.vec3.cross([],ee,te),re=[ee[0],ee[1],ee[2],0,ne[0],ne[1],ne[2],0,te[0],te[1],te[2],0,0,0,0,1],ue=[W,n.dt(F.lat,F.lng),n.dt(O.lat,F.lng),n.dt(O.lat,O.lng),n.dt(F.lat,O.lng),n.dt(j,F.lng),n.dt(j,O.lng),n.dt(F.lat,q),n.dt(O.lat,q)];let ye=n.ca.fromPoints(ue.map(ct=>[n.a6.vec3.dot(ee,ct),n.a6.vec3.dot(ne,ct),n.a6.vec3.dot(te,ct)]));const ve=n.a6.vec3.transformMat4([],ye.center,re);n.a6.vec3.squaredLength(ve)===0&&n.a6.vec3.set(ve,0,0,1),n.a6.vec3.normalize(ve,ve),n.a6.vec3.scale(ve,ve,n.aq),D.center=n.du(ve);const be=D.getWorldToCameraMatrix(),Me=n.a6.mat4.invert(new Float64Array(16),be);ye=n.ca.applyTransform(ye,n.a6.mat4.multiply([],be,re));const we=this._extendAABB(ye,D,R,v);if(!we)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ye=we,n.a6.vec3.transformMat4(ve,ve,be);const Ee=.5*(ye.max[2]-ye.min[2]),ke=this._minimumAABBFrustumDistance(D,ye),$e=n.a6.vec3.scale([],[0,0,1],Ee),Oe=n.a6.vec3.add($e,ve,$e),Re=ke+(D.pitch===0?0:n.a6.vec3.distance(ve,Oe)),st=D.globeCenterInViewSpace,dt=n.a6.vec3.sub([],ve,[st[0],st[1],st[2]]);n.a6.vec3.normalize(dt,dt),n.a6.vec3.scale(dt,dt,Re);const Et=n.a6.vec3.add([],ve,dt);n.a6.vec3.transformMat4(Et,Et,Me);const Lt=n.dw/n.aq,jt=n.a6.vec3.length(Et),Xe=n.bE(Math.max(jt*Lt-n.dw,Number.EPSILON),0),St=Math.min(D.zoomFromMercatorZAdjusted(Xe),R.maxZoom);return St>.5*(n.c3+n.bV)?(D.setProjection({name:"mercator"}),D.zoom=St,this._cameraForBounds(D,c,m,v,b,S)):{center:D.center,zoom:St,bearing:v,pitch:b}}_extendAABB(o,c,m,v){const b=.5*((m.padding.left||0)+(m.padding.right||0)),S=.5*((m.padding.top||0)+(m.padding.bottom||0)),D=S,R=b,F=b,O=S,j=c.width-(R+F),q=c.height-(D+O),W=n.a6.vec3.sub([],o.max,o.min),te=Math.min(j/W[0],q/W[1]),ee=Math.min(c.scaleZoom(c.scale*te),m.maxZoom);if(isNaN(ee))return null;const ne=c.scale/c.zoomScale(ee),re=new n.ca([o.min[0]-R*ne,o.min[1]-O*ne,o.min[2]],[o.max[0]+F*ne,o.max[1]+D*ne,o.max[2]]),ue=(typeof m.offset.x=="number"&&typeof m.offset.y=="number"?new n.P(m.offset.x,m.offset.y):n.P.convert(m.offset)).rotate(-n.bC(v));return re.center[0]-=ue.x*ne,re.center[1]+=ue.y*ne,re}queryTerrainElevation(o,c){const m=this.transform.elevation;return m?(c=n.l({},{exaggerated:!0},c),m.getAtPoint(n.a5.fromLngLat(o),null,c.exaggerated)):null}_cameraForBounds(o,c,m,v,b,S){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,c,m,v,b,S);const D=o.clone(),R=this._extendCameraOptions(S);D.bearing=v,D.pitch=b;const F=n.bL.convert(c),O=n.bL.convert(m),j=new n.bL(F.lng,O.lat),q=new n.bL(O.lng,F.lat),W=D.project(F),te=D.project(O),ee=this.queryTerrainElevation(F),ne=this.queryTerrainElevation(O),re=this.queryTerrainElevation(j),ue=this.queryTerrainElevation(q),ye=[[W.x,W.y,Math.min(ee||0,ne||0,re||0,ue||0)],[te.x,te.y,Math.max(ee||0,ne||0,re||0,ue||0)]];let ve=n.ca.fromPoints(ye);const be=D.getWorldToCameraMatrix(),Me=n.a6.mat4.invert(new Float64Array(16),be);ve=n.ca.applyTransform(ve,be);const we=this._extendAABB(ve,D,R,v);if(!we)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ve=we;const Ee=.5*n.a6.vec3.sub([],ve.max,ve.min)[2],ke=this._minimumAABBFrustumDistance(D,ve),$e=[0,0,1,0];n.a6.vec4.transformMat4($e,$e,be),n.a6.vec4.normalize($e,$e);const Oe=n.a6.vec3.scale([],$e,ke+Ee),Re=n.a6.vec3.add([],ve.center,Oe);n.a6.vec3.transformMat4(ve.center,ve.center,Me),n.a6.vec3.transformMat4(Re,Re,Me);const st=D.unproject(new n.P(ve.center[0],ve.center[1])),dt=n.dv(D.projection,st),Et=Math.pow(2,dt),Lt=Math.min(D._zoomFromMercatorZ(Re[2]*D.pixelsPerMeter*Et/D.worldSize),R.maxZoom);return D.mercatorFromTransition&&Lt<.5*(n.c3+n.bV)?(D.setProjection({name:"globe"}),D.zoom=Lt,this._cameraForBounds(D,c,m,v,b,S)):{center:st,zoom:Lt,bearing:v,pitch:b}}fitBounds(o,c,m){const v=this.cameraForBounds(o,c);return this._fitInternal(v,c,m)}fitScreenCoordinates(o,c,m,v,b){const S=n.P.convert(o),D=n.P.convert(c),R=new n.P(Math.min(S.x,D.x),Math.min(S.y,D.y)),F=new n.P(Math.max(S.x,D.x),Math.max(S.y,D.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(S,D))return this;const O=this.transform.pointLocation3D(R),j=this.transform.pointLocation3D(F),q=this.transform.pointLocation3D(new n.P(R.x,F.y)),W=this.transform.pointLocation3D(new n.P(F.x,R.y)),te=[Math.min(O.lng,j.lng,q.lng,W.lng),Math.min(O.lat,j.lat,q.lat,W.lat)],ee=[Math.max(O.lng,j.lng,q.lng,W.lng),Math.max(O.lat,j.lat,q.lat,W.lat)],ne=v&&v.pitch?v.pitch:this.getPitch(),re=this._cameraForBounds(this.transform,te,ee,m,ne,v);return this._fitInternal(re,v,b)}_fitInternal(o,c,m){return o?(c=n.l(o,c)).linear?this.easeTo(c,m):this.flyTo(c,m):this}jumpTo(o,c){this.stop();const m=o.preloadOnly?this.transform.clone():this.transform;let v=!1,b=!1,S=!1;"zoom"in o&&m.zoom!==+o.zoom&&(v=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=n.bL.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(b=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(S=!0,m.pitch=+o.pitch);const D=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!m.isPaddingEqual(D))if(o.retainPadding===!1){const R=m.clone();R.padding=D,m.setLocationAtPoint(m.center,R.centerPoint)}else m.padding=D;return o.preloadOnly?(this._preloadTiles(m),this):(this.fire(new n.x("movestart",c)).fire(new n.x("move",c)),v&&this.fire(new n.x("zoomstart",c)).fire(new n.x("zoom",c)).fire(new n.x("zoomend",c)),b&&this.fire(new n.x("rotatestart",c)).fire(new n.x("rotate",c)).fire(new n.x("rotateend",c)),S&&this.fire(new n.x("pitchstart",c)).fire(new n.x("pitch",c)).fire(new n.x("pitchend",c)),this.fire(new n.x("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(Za),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,c){const m=this.transform;if(!m.projection.supportsFreeCamera)return n.w(Za),this;this.stop();const v=m.zoom,b=m.pitch,S=m.bearing;m.setFreeCameraOptions(o);const D=v!==m.zoom,R=b!==m.pitch,F=S!==m.bearing;return this.fire(new n.x("movestart",c)).fire(new n.x("move",c)),D&&this.fire(new n.x("zoomstart",c)).fire(new n.x("zoom",c)).fire(new n.x("zoomend",c)),F&&this.fire(new n.x("rotatestart",c)).fire(new n.x("rotate",c)).fire(new n.x("rotateend",c)),R&&this.fire(new n.x("pitchstart",c)).fire(new n.x("pitch",c)).fire(new n.x("pitchend",c)),this.fire(new n.x("moveend",c)),this}easeTo(o,c){this._stop(!1,o.easeId),((o=n.l({offset:[0,0],duration:500,easing:n.dr},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const m=this.transform,v=this.getZoom(),b=this.getBearing(),S=this.getPitch(),D=this.getPadding(),R="zoom"in o?+o.zoom:v,F="bearing"in o?this._normalizeBearing(o.bearing,b):b,O="pitch"in o?+o.pitch:S,j=this._extendPadding(o.padding),q=n.P.convert(o.offset);let W,te,ee;if(m.projection.name==="globe"){const $e=n.a5.fromLngLat(m.center),Oe=q.rotate(-m.angle);$e.x+=Oe.x/m.worldSize,$e.y+=Oe.y/m.worldSize;const Re=$e.toLngLat(),st=n.bL.convert(o.center||Re);this._normalizeCenter(st),W=m.centerPoint.add(Oe),te=new n.P($e.x,$e.y).mult(m.worldSize),ee=new n.P(n.am(st.lng),n.at(st.lat)).mult(m.worldSize).sub(te)}else{W=m.centerPoint.add(q);const $e=m.pointLocation(W),Oe=n.bL.convert(o.center||$e);this._normalizeCenter(Oe),te=m.project($e),ee=m.project(Oe).sub(te)}const ne=m.zoomScale(R-v);let re,ue;o.around&&(re=n.bL.convert(o.around),ue=m.locationPoint(re));const ye=this._zooming||R!==v,ve=this._rotating||b!==F,be=this._pitching||O!==S,Me=!m.isPaddingEqual(j),we=o.retainPadding===!1?m.clone():m,Ee=$e=>Oe=>{if(ye&&($e.zoom=n.aa(v,R,Oe)),ve&&($e.bearing=n.aa(b,F,Oe)),be&&($e.pitch=n.aa(S,O,Oe)),Me&&(we.interpolatePadding(D,j,Oe),W=we.centerPoint.add(q)),re)$e.setLocationAtPoint(re,ue);else{const Re=$e.zoomScale($e.zoom-v),st=R>v?Math.min(2,ne):Math.max(.5,ne),dt=Math.pow(st,1-Oe),Et=$e.unproject(te.add(ee.mult(Oe*dt)).mult(Re));$e.setLocationAtPoint($e.renderWorldCopies?Et.wrap():Et,W)}return o.preloadOnly||this._fireMoveEvents(c),$e};if(o.preloadOnly){const $e=this._emulate(Ee,o.duration,m);return this._preloadTiles($e),this}const ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ye,this._rotating=ve,this._pitching=be,this._padding=Me,this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,ke),this._ease(Ee(m),$e=>{m.cameraElevationReference==="sea"&&m.recenterOnTerrain(),this._afterEase(c,$e)},o),this}_prepareEase(o,c,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),c||m.moving||this.fire(new n.x("movestart",o)),this._zooming&&!m.zooming&&this.fire(new n.x("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new n.x("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new n.x("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.x("move",o)),this._zooming&&this.fire(new n.x("zoom",o)),this._rotating&&this.fire(new n.x("rotate",o)),this._pitching&&this.fire(new n.x("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const m=this._zooming,v=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new n.x("zoomend",o)),v&&this.fire(new n.x("rotateend",o)),b&&this.fire(new n.x("pitchend",o)),this.fire(new n.x("moveend",o))}flyTo(o,c){if(this._prefersReducedMotion(o)){const ct=n.ar(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(ct,c)}this.stop(),o=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dr},o);const m=this.transform,v=this.getZoom(),b=this.getBearing(),S=this.getPitch(),D=this.getPadding(),R="zoom"in o?n.ap(+o.zoom,m.minZoom,m.maxZoom):v,F="bearing"in o?this._normalizeBearing(o.bearing,b):b,O="pitch"in o?+o.pitch:S,j=this._extendPadding(o.padding),q=m.zoomScale(R-v),W=n.P.convert(o.offset);let te=m.centerPoint.add(W);const ee=m.pointLocation(te),ne=n.bL.convert(o.center||ee);this._normalizeCenter(ne);const re=m.project(ee),ue=m.project(ne).sub(re);let ye=o.curve;const ve=Math.max(m.width,m.height),be=ve/q,Me=ue.mag();if("minZoom"in o){const ct=n.ap(Math.min(o.minZoom,v,R),m.minZoom,m.maxZoom),Mt=ve/m.zoomScale(ct-v);ye=Math.sqrt(Mt/Me*2)}const we=ye*ye;function Ee(ct){const Mt=(be*be-ve*ve+(ct?-1:1)*we*we*Me*Me)/(2*(ct?be:ve)*we*Me);return Math.log(Math.sqrt(Mt*Mt+1)-Mt)}function ke(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function $e(ct){return(Math.exp(ct)+Math.exp(-ct))/2}const Oe=Ee(0);let Re=function(ct){return $e(Oe)/$e(Oe+ye*ct)},st=function(ct){return ve*(($e(Oe)*(ke(Mt=Oe+ye*ct)/$e(Mt))-ke(Oe))/we)/Me;var Mt},dt=(Ee(1)-Oe)/ye;if(Math.abs(Me)<1e-6||!isFinite(dt)){if(Math.abs(ve-be)<1e-6)return this.easeTo(o,c);const ct=be<ve?-1:1;dt=Math.abs(Math.log(be/ve))/ye,st=function(){return 0},Re=function(Mt){return Math.exp(ct*ye*Mt)}}o.duration="duration"in o?+o.duration:1e3*dt/("screenSpeed"in o?+o.screenSpeed/ye:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Et=b!==F,Lt=O!==S,jt=!m.isPaddingEqual(j),Xe=o.retainPadding===!1?m.clone():m,St=ct=>Mt=>{const Tt=Mt*dt,wt=1/Re(Tt);ct.zoom=Mt===1?R:v+ct.scaleZoom(wt),Et&&(ct.bearing=n.aa(b,F,Mt)),Lt&&(ct.pitch=n.aa(S,O,Mt)),jt&&(Xe.interpolatePadding(D,j,Mt),te=Xe.centerPoint.add(W));const Gt=Mt===1?ne:ct.unproject(re.add(ue.mult(st(Tt))).mult(wt));return ct.setLocationAtPoint(ct.renderWorldCopies?Gt.wrap():Gt,te),ct._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(c),ct};if(o.preloadOnly){const ct=this._emulate(St,o.duration,m);return this._preloadTiles(ct),this}return this._zooming=!0,this._rotating=Et,this._pitching=Lt,this._padding=jt,this._prepareEase(c,!1),this._ease(St(m),()=>this._afterEase(c),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const m=this._onEaseEnd;this._onEaseEnd=void 0,m.call(this,c)}if(!o){const m=this.handlers;m&&m.stop(!1)}return this}_ease(o,c,m){m.animate===!1||m.duration===0?(o(1),c()):(this._easeStart=n.q.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,c){o=n.bB(o,-180,180);const m=Math.abs(o-c);return Math.abs(o-360-c)<m&&(o-=360),Math.abs(o+360-c)<m&&(o+=360),o}_normalizeCenter(o){const c=this.transform;if(c.maxBounds||c.projection.name!=="globe"&&!c.renderWorldCopies)return;const m=o.lng-c.center.lng;o.lng+=m>180?-360:m<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,c,m){const v=Math.ceil(15*c/1e3),b=[],S=o(m.clone());for(let D=0;D<=v;D++){const R=S(D/v);b.push(R.clone())}return b}_preloadTiles(o,c){}}class Sf{constructor(o={}){this.options=o,n.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const c=this.options&&this.options.compact,m=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=ie("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ie("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",m);const v=ie("span","mapboxgl-ctrl-icon",this._compactButton);return v.setAttribute("aria-hidden","true"),v.setAttribute("title",m),this._innerContainer=ie("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(o){const m=c.reduce((v,b,S)=>(b.value&&(v+=`${b.key}=${b.value}${S<c.length-1?"&":""}`),v),"?");o.href=`${n.e.FEEDBACK_URL}/${m}#${Vh(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style._mergedSourceCaches;for(const v in c){const b=c[v];if(b.used){const S=b.getSource();S.attribution&&o.indexOf(S.attribution)<0&&o.push(S.attribution)}}o.sort((v,b)=>v.length-b.length),o=o.filter((v,b)=>{for(let S=b+1;S<o.length;S++)if(o[S].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const m=o.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,o.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Xp{constructor(){n.aJ(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=ie("div","mapboxgl-ctrl");const c=ie("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const c in o){const m=o[c].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class jg{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===o)return void(v.cancelled=!0)}run(o=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Xh{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const c=n.cw((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,c,m){this._start=this.getValue(c),this._end=o,this._startTime=c,this._endTime=c+m}}const Pv={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ug=["mouseenter","mouseover","mouseleave","mouseout"];class Mf extends n.x{constructor(o,c,m,v){const{point:b,lngLat:S,originalEvent:D,target:R}=o;super(o.type,{point:b,lngLat:S,originalEvent:D,target:R}),this.preventDefault=()=>{o.preventDefault()},this.id=c,this.interaction=m,this.feature=v}}class Yp{constructor(o){this.map=o,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(o,c){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const{type:m,filter:v}=c;if(v){const S=n.M(v,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(S.result==="error")throw new Error(S.value.map(D=>`${D.key}: ${D.message}`).join(", "));this.filters.set(o,S.value)}const b=this.interactionsByType.get(m)||new Map;b.size===0&&(Ug.includes(m)?this.map.on(m,c.featureset,this.handleType):this.map.on(m,this.handleType),this.interactionsByType.set(m,b)),b.set(o,c),this.typeById.set(o,m)}remove(o){const c=this.typeById.get(o);if(!c)return;this.typeById.delete(o),this.filters.delete(o);const m=this.interactionsByType.get(c);m&&(m.delete(o),m.size===0&&this.map.off(c,this.handleType))}handleType(o){const c=this.interactionsByType.get(o.type),m=Array.from(c).reverse(),v=[];for(const[,D]of m)D.featureset&&v.push({featureset:D.featureset,filter:D.filter,radius:D.radius});let b=this.map.style.queryRenderedFeaturesForInteractions(o.point,v,this.map.transform);!b.length&&Ug.includes(o.type)&&(b=[null]);let S=!1;for(const D of b){for(const[R,F]of m){const{handler:O,featureset:j}=F;if(j&&(D==null||n.bi(D.featureset,j))&&O(new Mf(o,R,F,D))!==!1){S=!0;break}}if(S)break}if(!S)for(const[D,R]of m){const{handler:F,featureset:O}=R;if(!O&&F(new Mf(o,D,R,null))!==!1)break}}}function Yh(p,o){if(Array.isArray(p)&&Array.isArray(o)){const c=new Set(p),m=new Set(o);return c.size===m.size&&p.every(v=>m.has(v))}return n.bi(p,o)}const Pu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1},El={showCompass:!0,showZoom:!0,visualizePitch:!1};class va{constructor(o,c,m=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new yf({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,m&&(this.mousePitch=new vf({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(o,c){this.mouseRotate.mousedown(o,c),this.mousePitch&&this.mousePitch.mousedown(o,c),he()}move(o,c){const m=this.map,v=this.mouseRotate.mousemoveWindow(o,c),b=v&&v.bearingDelta;if(b&&m.setBearing(m.getBearing()+b),this.mousePitch){const S=this.mousePitch.mousemoveWindow(o,c),D=S&&S.pitchDelta;D&&m.setPitch(m.getPitch()+D)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Ce(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(n.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),We(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,We(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Qe(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=Qe(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Tl(p,o,c){if(p=new n.bL(p.lng,p.lat),o){const m=new n.bL(p.lng-360,p.lat),v=new n.bL(p.lng+360,p.lat),b=360*Math.ceil(Math.abs(p.lng-c.center.lng)/360),S=c.locationPoint(p).distSqr(o),D=o.x<0||o.y<0||o.x>c.width||o.y>c.height;c.locationPoint(m).distSqr(o)<S&&(D||Math.abs(m.lng-c.center.lng)<b)?p=m:c.locationPoint(v).distSqr(o)<S&&(D||Math.abs(v.lng-c.center.lng)<b)&&(p=v)}for(;Math.abs(p.lng-c.center.lng)>180;){const m=c.locationPoint(p);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;p.lng>c.center.lng?p.lng-=360:p.lng+=360}return p}const Cl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Xa extends n.E{constructor(o,c){if(super(),(o instanceof HTMLElement||c)&&(o=n.l({element:o},c)),n.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=o&&o.occludedOpacity||.2,o&&o.element)this._element=o.element,this._offset=n.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=ie("div");const b=41,S=27,D=ae("svg",{display:"block",height:b*this._scale+"px",width:S*this._scale+"px",viewBox:`0 0 ${S} ${b}`},this._element),R=ae("radialGradient",{id:"shadowGradient"},ae("defs",{},D));ae("stop",{offset:"10%","stop-opacity":.4},R),ae("stop",{offset:"100%","stop-opacity":.05},R),ae("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},D),ae("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},D),ae("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},D),ae("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},D),this._offset=n.P.convert(o&&o.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const m=this._element.classList;for(const b in Cl)m.remove(`mapboxgl-marker-anchor-${b}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`);const v=o&&o.className?o.className.trim().split(/\s+/):[];m.add(...v),this._popup=null}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.bL.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const c=o.code,m=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(o){const c=o.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,c=this._pos;if(!o||!c)return!1;const m=o.unproject(c),v=o.getFreeCameraOptions();if(!v.position)return!1;const b=v.position.toLngLat();return b.distanceTo(m)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const c=this._pos;if(!c||c.x<0||c.x>o.transform.width||c.y<0||c.y>o.transform.height)return void this._clearFadeTimer();const m=o.unproject(c);let v;o._showingGlobe()&&n.dz(o.transform,this._lngLat)?v=0:(v=1-o._queryFogOpacity(m),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${Cl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const o=this._pos,c=this._map,m=this.getPitchAlignment();if(!c||!o||m!=="map")return"";if(!c._showingGlobe()){const R=c.getPitch();return R?`rotateX(${R}deg)`:""}const v=n.c1(n.dA(c.transform,this._lngLat)),b=o.sub(n.dB(c.transform)),S=Math.abs(b.x)+Math.abs(b.y);if(S===0)return"";const D=v/S;return`rotateX(${-b.y*D}deg) rotateY(${b.x*D}deg)`}_calculateZTransform(){const o=this._pos,c=this._map;if(!c||!o)return"";let m=0;const v=this.getRotationAlignment();if(v==="map")if(c._showingGlobe()){const b=c.project(new n.bL(this._lngLat.lng,this._lngLat.lat+.001)),S=c.project(new n.bL(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);m=n.c1(Math.atan2(S.y,S.x))-90}else m=-c.getBearing();else if(v==="horizon"){const b=n.a7(4,6,c.getZoom()),S=n.dB(c.transform);S.y+=b*c.transform.height;const D=o.sub(S),R=n.c1(Math.atan2(D.y,D.x));m=(R>90?R-270:R+90)*(1-b)}return m+=this._rotation,m?`rotateZ(${m}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=Tl(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=n.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const c=this._map;if(!c)return;const m=this._pointerdownPos,v=this._positionDelta;if(m&&v){if(!this._isDragging){const b=this._clickTolerance||c._clickTolerance;if(o.point.dist(m)<b)return;this._isDragging=!0}this._pos=o.point.sub(v),this._lngLat=c.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.x("dragstart"))),this.fire(new n.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.x("dragend")),this._state="inactive"}_addDragHandler(o){const c=this._map,m=this._pos;c&&m&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(m),this._pointerdownPos=o.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const c=this._map;return c&&(o?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const kv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Rv={maxWidth:100,unit:"metric"},Lv={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ov={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Vg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function So(p=new n.P(0,0),o="bottom"){if(typeof p=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(o){case"top":return new n.P(0,p);case"top-left":return new n.P(c,c);case"top-right":return new n.P(-c,c);case"bottom":return new n.P(0,-p);case"bottom-left":return new n.P(c,-c);case"bottom-right":return new n.P(-c,-c);case"left":return new n.P(p,0);case"right":return new n.P(-p,0)}return new n.P(0,0)}return p instanceof n.P||Array.isArray(p)?n.P.convert(p):n.P.convert(p[o]||[0,0])}return{version:M,supported:Z.supported,setRTLTextPlugin:n.dC,getRTLTextPluginStatus:n.dD,Map:class extends Zp{constructor(p){L.mark(P.create);const o=p;if((p=n.l({},Pu,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&n.dx(window)&&(p.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ml(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._repaint=!!p.repaint,this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new jg,this._domRenderTaskQueue=new jg,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aQ(),this._locale=n.l({},Pv,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._tessellationStep=p.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=p.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Xh(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=p.scaleFactor,this._requestManager=new Be(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,this._contextCreateOptions=p.contextCreateOptions?{...p.contextCreateOptions}:{},typeof p.container=="string"){const c=document.getElementById(p.container);if(!c)throw new Error(`Container '${p.container.toString()}' not found.`);this._container=c}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),n.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Fp),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new qn(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,(p.style||!p.testMode)&&this.setStyle(p.style||n.e.DEFAULT_STYLE,{config:p.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),p.hash&&(this._hash=new pf(typeof p.hash=="string"&&p.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch});const c=p.bounds;c&&(this.resize(),this.fitBounds(c,n.l({},p.fitBoundsOptions,{duration:0})))}this.resize(),p.attributionControl&&this.addControl(new Sf({customAttribution:p.customAttribution})),this._logoControl=new Xp,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new n.x(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new n.x(`${c.dataType}dataloading`,c))}),this._interactions=new Yp(this)}_getMapId(){return this._mapId}addControl(p,o){if(o===void 0&&(o=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new n.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=p.onAdd(this);this._controls.push(p);const m=this._controlPositions[o];return o.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new n.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(p);return o>-1&&this._controls.splice(o,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new n.x("movestart",p)).fire(new n.x("move",p)),this.fire(new n.x("resize",p)),o&&this.fire(new n.x("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(n.as.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new n.x("zoomstart")).fire(new n.x("zoom")).fire(new n.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new n.x("zoomstart")).fire(new n.x("zoom")).fire(new n.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new n.x("pitchstart")).fire(new n.x("pitch")).fire(new n.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new n.x("pitchstart")).fire(new n.x("pitch")).fire(new n.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(p){return this._scaleFactor=p,this.painter.scaleFactor=p,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(o=>o==="auto"?navigator.language:o):p}setLanguage(p){const o=this._parseLanguage(p);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,o=p.projection.name;let c;o==="globe"&&p.zoom>=n.bV?(p.setMercatorFromTransition(),c=!0):o==="mercator"&&p.zoom<n.bV&&(p.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,o){return this._updateProjection(p||o||{name:"mercator"})}_updateProjection(p){let o;return o=p.name==="globe"&&this.transform.zoom>=n.bV?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(p){return this.transform.locationPoint3D(n.bL.convert(p))}unproject(p){return this.transform.pointLocation3D(n.P.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,o,c){const m=v=>{let b=[];if(Array.isArray(o)){const S=o.filter(D=>this.getLayer(D));b=S.length?this.queryRenderedFeatures(v,{layers:S}):[]}else b=this.queryRenderedFeatures(v,{featureset:o});return b};if(p==="mouseenter"||p==="mouseover"){let v=!1;return{listener:c,targets:o,delegates:{mousemove:S=>{const D=m(S.point);D.length?v||(v=!0,c.call(this,new rn(p,this,S.originalEvent,{features:D}))):v=!1},mouseout:()=>{v=!1}}}}if(p==="mouseleave"||p==="mouseout"){let v=!1;return{listener:c,targets:o,delegates:{mousemove:D=>{m(D.point).length?v=!0:v&&(v=!1,c.call(this,new rn(p,this,D.originalEvent)))},mouseout:D=>{v&&(v=!1,c.call(this,new rn(p,this,D.originalEvent)))}}}}{const v=b=>{const S=m(b.point);S.length&&(b.features=S,c.call(this,b),delete b.features)};return{listener:c,targets:o,delegates:{[p]:v}}}}on(p,o,c){if(typeof o=="function"||c===void 0)return super.on(p,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const m=this._createDelegatedListener(p,o,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(p,o,c){if(typeof o=="function"||c===void 0)return super.once(p,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const m=this._createDelegatedListener(p,o,c);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(p,o,c){if(typeof o=="function"||c===void 0)return super.off(p,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const m=this._delegatedListeners?this._delegatedListeners[p]:void 0;return m&&(v=>{for(let b=0;b<v.length;b++){const S=v[b];if(S.listener===c&&Yh(S.targets,o)){for(const D in S.delegates)this.off(D,S.delegates[D]);return v.splice(b,1),this}}})(m),this}queryRenderedFeatures(p,o){if(!this.style)return[];if(o!==void 0||p===void 0||p instanceof n.P||Array.isArray(p)||(o=p,p=void 0),p=p||[[0,0],[this.transform.width,this.transform.height]],"featureset"in(o=o||{}))return this._isFeaturesetDescriptorValid(o.featureset)?this.style.queryRenderedFeaturesForInteractions(p,[o],this.transform):[];if(o.layers&&Array.isArray(o.layers)){for(const c of o.layers)if(!this._isValidId(c))return[]}return this.style.queryRenderedFeatures(p,o,this.transform)}querySourceFeatures(p,o){return!p||typeof p=="string"&&!this._isValidId(p)?[]:this.style.querySourceFeatures(p,o)}isPointOnSurface(p){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&n.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(p))}addInteraction(p,o){return this._interactions.add(p,o),this}removeInteraction(p){return this._interactions.remove(p),this}setStyle(p,o){return o=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&p&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(p,(c,m)=>{c?(n.w(`Unable to perform style diff: ${String(c.message||c.error||c)}. Rebuilding the style from scratch.`),this._updateStyle(p,o)):m&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(p,o))}_getUIString(p){const o=this._locale[p];if(o==null)throw new Error(`Missing UI string '${p}'`);return o}_updateStyle(p,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p){const c=n.l({},o);o&&o.config&&(c.initialConfig=o.config,delete c.config),this.style=new It(this,c).load(p),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new It(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(p){return p==null?(this.fire(new n.t(new Error("IDs can't be empty."))),!1):!n.aK(p)||(this.fire(new n.t(new Error(`IDs can't contain special symbols: "${p}".`))),!1)}_isFeaturesetDescriptorValid(p){return"featuresetId"in p?this._isValidId(p.featuresetId):"layerId"in p&&this._isValidId(p.layerId)}_areTargetsValid(p){if(Array.isArray(p)){for(const o of p)if(!this._isValidId(o))return!1;return!0}return this._isFeaturesetDescriptorValid(p)}addSource(p,o){return this._isValidId(p)?(this._lazyInitEmptyStyle(),this.style.addSource(p,o),this._update(!0)):this}isSourceLoaded(p){return!!this._isValidId(p)&&!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(p,o,c){this._lazyInitEmptyStyle(),this.style.addSourceType(p,o,c)}removeSource(p){return this._isValidId(p)?(this.style.removeSource(p),this._updateTerrain(),this._update(!0)):this}getSource(p){return this._isValidId(p)?this.style.getOwnSource(p):null}addImage(p,o,{pixelRatio:c=1,sdf:m=!1,stretchX:v,stretchY:b,content:S}={}){if(this._lazyInitEmptyStyle(),o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:D,height:R,data:F}=n.q.getImageData(o);this.style.addImage(p,{data:new n.r({width:D,height:R},F),pixelRatio:c,stretchX:v,stretchY:b,content:S,sdf:m,version:0})}else if(o.width===void 0||o.height===void 0)this.fire(new n.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:D,height:R}=o,F=o;this.style.addImage(p,{data:new n.r({width:D,height:R},new Uint8Array(F.data)),pixelRatio:c,stretchX:v,stretchY:b,content:S,sdf:m,version:0,userImage:F}),F.onAdd&&F.onAdd(this,p)}}updateImage(p,o){this._lazyInitEmptyStyle();const c=this.style.getImage(p);if(!c)return void this.fire(new n.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?n.q.getImageData(o):o,{width:v,height:b,data:S}=m;if(v===void 0||b===void 0)return void this.fire(new n.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||b!==c.data.height)return void this.fire(new n.t(new Error(`The width and height of the updated image (${v}, ${b})
                must be that same as the previous version of the image
                (${c.data.width}, ${c.data.height})`)));const D=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);c.data.replace(S,D),this.style.updateImage(p,c)}hasImage(p){return p?!!this.style&&!!this.style.getImage(p):(this.fire(new n.t(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,o){n.o(this._requestManager.transformRequest(p,n.R.Image),(c,m)=>{o(c,m instanceof HTMLImageElement?n.q.getImageData(m):m)})}listImages(){return this.style.listImages()}addModel(p,o){this._lazyInitEmptyStyle(),this.style.addModel(p,o)}hasModel(p){return p?this.style.hasModel(p):(this.fire(new n.t(new Error("Missing required model id"))),!1)}removeModel(p){this.style.removeModel(p)}listModels(){return this.style.listModels()}addLayer(p,o){return this._isValidId(p.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(p,o),this._update(!0)):this}getSlot(p){const o=this.getLayer(p);return o&&o.slot||null}setSlot(p,o){return this.style.setSlot(p,o),this.style.mergeLayers(),this._update(!0)}addImport(p,o){return this.style.addImport(p,o),this}updateImport(p,o){return typeof o!="string"&&o.id!==p?(this.removeImport(p),this.addImport(o)):(this.style.updateImport(p,o),this._update(!0))}removeImport(p){return this.style.removeImport(p),this}moveImport(p,o){return this.style.moveImport(p,o),this._update(!0)}moveLayer(p,o){return this._isValidId(p)?(this.style.moveLayer(p,o),this._update(!0)):this}removeLayer(p){return this._isValidId(p)?(this.style.removeLayer(p),this._update(!0)):this}getLayer(p){if(!this._isValidId(p))return null;const o=this.style.getOwnLayer(p);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(p,o,c){return this._isValidId(p)?(this.style.setLayerZoomRange(p,o,c),this._update(!0)):this}setFilter(p,o,c={}){return this._isValidId(p)?(this.style.setFilter(p,o,c),this._update(!0)):this}getFilter(p){return this._isValidId(p)?this.style.getFilter(p):null}setPaintProperty(p,o,c,m={}){return this._isValidId(p)?(this.style.setPaintProperty(p,o,c,m),this._update(!0)):this}getPaintProperty(p,o){return this._isValidId(p)?this.style.getPaintProperty(p,o):null}setLayoutProperty(p,o,c,m={}){return this._isValidId(p)?(this.style.setLayoutProperty(p,o,c,m),this._update(!0)):this}getLayoutProperty(p,o){return this._isValidId(p)?this.style.getLayoutProperty(p,o):null}getSchema(p){return this.style.getSchema(p)}setSchema(p,o){return this.style.setSchema(p,o),this._update(!0)}getConfig(p){return this.style.getConfig(p)}setConfig(p,o){return this.style.setConfig(p,o),this._update(!0)}getConfigProperty(p,o){return this.style.getConfigProperty(p,o)}setConfigProperty(p,o,c){return this.style.setConfigProperty(p,o,c),this._update(!0)}getFeaturesetDescriptors(p){return this.style.getFeaturesetDescriptors(p)}setLights(p){if(this._lazyInitEmptyStyle(),p&&p.length===1&&p[0].type==="flat"){const o=p[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(p),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const p=this.style.getLights()||[];return p.length===0&&p.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),p}setLight(p,o={}){return this.setLights([{id:"flat",type:"flat",properties:p}])}getLight(){return this.style.getFlatLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(p){return this._lazyInitEmptyStyle(),this.style.setColorTheme(p),this._update(!0)}setCamera(p){return this.style.setCamera(p),this._triggerCameraUpdate(p)}_triggerCameraUpdate(p){return this._update(this.transform.setOrthographicProjectionAtLowPitch(p["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bL.convert(p),this.transform):0}setFeatureState(p,o){return p.source&&!this._isValidId(p.source)?this:(this.style.setFeatureState(p,o),this._update())}removeFeatureState(p,o){return p.source&&!this._isValidId(p.source)?this:(this.style.removeFeatureState(p,o),this._update())}getFeatureState(p){return p.source&&!this._isValidId(p.source)?null:this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let c,m,v,b=this._container;for(;b&&(!m||!v);){const S=window.getComputedStyle(b).transform;S&&S!=="none"&&(c=S.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(m=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(v=c[3])),b=b.parentElement}this._containerWidth=m?Math.abs(p/m):p,this._containerHeight=v?Math.abs(o/v):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=ie("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=ie("div","mapboxgl-canvas-container",p);this._canvas=ie("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=ie("div","mapboxgl-control-container",p),m=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(v=>{m[v]=ie("div",`mapboxgl-ctrl-${v}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,o){const c=n.q.devicePixelRatio||1;this._canvas.width=c*Math.ceil(p),this._canvas.height=c*Math.ceil(o),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${o}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const o=this._markers.indexOf(p);o!==-1&&this._markers.splice(o,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const o=this._popups.indexOf(p);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const p=n.l({},Z.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",p);o?(Bn(o,!0),this.painter=new oc(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(o)):this.fire(new n.t(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.x("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new n.x("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let o;this.fire(new n.x("renderstart")),++this._frameId;const c=this.painter.context.extTimerQuery,m=n.q.now(),v=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=v.createQuery(),v.beginQuery(c.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const F=this.transform.zoom,O=this.transform.pitch,j=n.q.now(),q=new n.a3(F,{now:j,fadeDuration:b,pitch:O,transition:this.style.transition});this.style.update(q)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let S=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),S=this._updateAverageElevation(m),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):S=this._updateAverageElevation(m);const D=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),D&&(this._placementDirty=D.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,L.mark(P.load),this.fire(new n.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const F=n.q.now()-m;v.endQuery(c.TIME_ELAPSED_EXT),setTimeout(()=>{const O=v.getQueryParameter(o,v.QUERY_RESULT)/1e6;v.deleteQuery(o),this.fire(new n.x("gpu-timing-frame",{cpuTime:F,gpuTime:O}))},50)}if(this.listens("gpu-timing-layer")){const F=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(F);this.fire(new n.x("gpu-timing-layer",{layerTimes:O}))},50)}if(this.listens("gpu-timing-deferred-render")){const F=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const O=this.painter.queryGpuTimeDeferredRender(F);this.fire(new n.x("gpu-timing-deferred-render",{gpuTime:O}))},50)}const R=this._sourcesDirty||this._styleDirty||this._placementDirty||S;if(R||this._repaint)this.triggerRepaint();else{const F=this.idle();if(F&&(S=this._updateAverageElevation(m,!0)),S)this.triggerRepaint();else if(this._triggerFrame(!1),F&&(this.fire(new n.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const O=this._calculateSpeedIndex();this.fire(new n.x("speedindexcompleted",{speedIndex:O})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,L.mark(P.fullLoad),this._performanceMetricsCollection&&cn(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const o of this._markers)p&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!p||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(p,o=!1){const c=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);const m=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(m||(o||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const v=this.transform.averageElevation;let b=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=p;const S=Math.abs(v-b);if(S>1){if(this._isInitialLoad||m)return this._averageElevation.jumpTo(b),c(b);this._averageElevation.easeTo(b,p,300)}else if(S>1e-4)return this._averageElevation.jumpTo(b),c(b)}return!!this._averageElevation.isEasing(p)&&c(this._averageElevation.getValue(p))}_authenticate(){Te(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===vt||p.status===401)){const o=this.painter.context.gl;Bn(o,!1),this._logoControl instanceof Xp&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Sr(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&ci(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const c=this.painter.context.gl,m=c.createFramebuffer();function v(b){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b,0);const S=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,S),S}return c.bindFramebuffer(c.FRAMEBUFFER,m),this._canvasPixelComparison(v(p),o.canvasCopies.map(v),o.timeStamps)}_canvasPixelComparison(p,o,c){let m=c[1]-c[0];const v=p.length/4;for(let b=0;b<o.length;b++){const S=o[b];let D=0;for(let R=0;R<S.length;R+=4)S[R]===p[R]&&S[R+1]===p[R+1]&&S[R+2]===p[R+2]&&S[R+3]===p[R+3]&&(D+=1);m+=(c[b+2]-c[b+1])*(1-D/v)}return m}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),On.delete(this.painter.context.gl),Di.remove(),Nt.remove(),this._removed=!0,this.fire(new n.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=n.q.frame(o=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(o)}))}_preloadTiles(p){const o=this.style?this.style.getSourceCaches():[];return n.bg(o,(c,m)=>c._preloadTiles(p,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(p){this._showParseStatus!==p&&(this._showParseStatus=p,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(p){this._showLayers2DWireframe!==p&&(this._showLayers2DWireframe=p,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(p){this._showLayers3DWireframe!==p&&(this._showLayers3DWireframe=p,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,this._tp.refreshUI(),p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,this._tp.refreshUI(),p&&this._update())}_setCacheLimits(p,o){n.dy(p,o)}get version(){return M}},NavigationControl:class{constructor(p={}){this.options=n.l({},El,p),this._container=ie("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),ie("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),ie("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:o}):c.resetNorth({},{originalEvent:o}))}),this._compassIcon=ie("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const o=p.getZoom(),c=o===p.getMaxZoom(),m=o===p.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new va(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,o){const c=ie("button",p,this._container);return c.type="button",c.addEventListener("click",o),c}_setButtonTitle(p,o){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${o}`);p.setAttribute("aria-label",c),p.firstElementChild&&p.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends n.E{constructor(p={}){super();const o=navigator.geolocation;this.options=n.l({geolocation:o},kv,p),n.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Sl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=ie("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const o=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,p(c)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(c=>o(c.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(p){const o=this._map.getMaxBounds(),c=p.coords;return!!o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new n.x("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.x("geolocate",p)),this._finish()}}_updateCamera(p){const o=new n.bL(p.coords.longitude,p.coords.latitude),c=p.coords.accuracy,m=this._map.getBearing(),v=n.l({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(c),v,{geolocateSource:!0})}_updateMarker(p){if(p){const o=new n.bL(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,o=n.bE(1,p._center.lat)*p.worldSize,c=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.x("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=ie("button","mapboxgl-ctrl-geolocate",this._container),ie("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ie("div","mapboxgl-user-location"),this._dotElement.appendChild(ie("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ie("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Xa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ie("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.x("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Sf,ScaleControl:class{constructor(p={}){this.options=n.l({},Rv,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,o=this._map,c=o._containerHeight/2,m=o._containerWidth/2-p/2,v=o.unproject([m,c]),b=o.unproject([m+p,c]),S=v.distanceTo(b);if(this.options.unit==="imperial"){const D=3.2808*S;D>5280?this._setScale(p,D/5280,"mile"):this._setScale(p,D,"foot")}else this.options.unit==="nautical"?this._setScale(p,S/1852,"nautical-mile"):S>=1e3?this._setScale(p,S/1e3,"kilometer"):this._setScale(p,S,"meter")}_setScale(p,o,c){this._map._requestDomTask(()=>{const m=function(b){const S=Math.pow(10,`${Math.floor(b)}`.length-1);let D=b/S;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(R){const F=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*F)/F}(D),S*D}(o),v=m/o;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(m):`${m}&nbsp;${Lv[c]}`,this._container.style.width=p*v+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=ie("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p={}){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:n.w("Full screen control 'container' must be a DOM element.")),n.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=ie("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=ie("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ie("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(p){super(),this.options=n.l(Object.create(Ov),p),n.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new n.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new n.x("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=n.bL.convert(p),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const o=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=p;m=c.firstChild,m;)o.appendChild(m);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=ie("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(p),this.options.closeButton){const c=this._closeButton=ie("button","mapboxgl-popup-close-button",o);c.type="button",c.setAttribute("aria-label","Close popup"),c.setAttribute("aria-hidden","true"),c.innerHTML="&#215;",c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let o;return this._classList.delete(p)?o=!1:(this._classList.add(p),o=!0),this._updateClassList(),o}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const o=this._map,c=this._container,m=this._pos;if(!o||!c||!m)return"bottom";const v=c.offsetWidth,b=c.offsetHeight,S=m.x<v/2,D=m.x>o.transform.width-v/2;if(m.y+p<b)return S?"top-left":D?"top-right":"top";if(m.y>o.transform.height-b){if(S)return"bottom-left";if(D)return"bottom-right"}return S?"left":D?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),p.className=o.join(" ")}_update(p){const o=this._map,c=this._content;if(!o||!this._lngLat&&!this._trackPointer||!c)return;let m=this._container;if(m||(m=this._container=ie("div","mapboxgl-popup",o.getContainer()),this._tip=ie("div","mapboxgl-popup-tip",m),m.appendChild(c)),this.options.maxWidth&&m.style.maxWidth!==this.options.maxWidth&&(m.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tl(this._lngLat,this._pos,o.transform)),!this._trackPointer||p){const v=this._pos=this._trackPointer&&p instanceof n.P?p:o.project(this._lngLat),b=So(this.options.offset),S=this._anchor=this._getAnchor(b.y),D=So(this.options.offset,S),R=v.add(D).round();o._requestDomTask(()=>{this._container&&S&&(this._container.style.transform=`${Cl[S]} translate(${R.x}px,${R.y}px)`)})}if(!this._marker&&o._showingGlobe()){const v=n.dz(o.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Vg);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:Xa,Style:It,LngLat:n.bL,LngLatBounds:n.as,Point:n.P,MercatorCoordinate:n.a5,FreeCameraOptions:pa,Evented:n.E,config:n.e,prewarm:n.dE,clearPrewarmedResources:n.dF,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(p){n.e.ACCESS_TOKEN=p},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(p){n.e.API_URL=p},get workerCount(){return n.dG.workerCount},set workerCount(p){n.dG.workerCount=p},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){n.e.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){n.dH(p)},get workerUrl(){return n.dI.workerUrl},set workerUrl(p){n.dI.workerUrl=p},get workerClass(){return n.dI.workerClass},set workerClass(p){n.dI.workerClass=p},get workerParams(){return n.dI.workerParams},set workerParams(p){n.dI.workerParams=p},get dracoUrl(){return n.dJ()},set dracoUrl(p){n.dK(p)},get meshoptUrl(){return n.dL()},set meshoptUrl(p){n.dM(p)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var y=l;return y})})(oA);var Qoe=oA.exports;const AZ=lr({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const r=Ve(()=>{const s=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(l=>e[l]===!0).map(l=>`q-btn-group--${l}`).join(" ");return`q-btn-group row no-wrap${s.length!==0?" "+s:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>tt("div",{class:r.value},ln(t.default))}}),IZ=Object.keys(c6);function zZ(e){return IZ.reduce((t,r)=>{const s=e[r];return s!==void 0&&(t[r]=s),t},{})}const ese=lr({name:"QBtnDropdown",props:{...c6,...m1,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:r}){const{proxy:s}=_r(),l=oi(e.modelValue),d=oi(null),y=u6(),n=Ve(()=>{const he={"aria-expanded":l.value===!0?"true":"false","aria-haspopup":"true","aria-controls":y.value,"aria-label":e.toggleAriaLabel||s.$q.lang.label[l.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(he["aria-disabled"]="true"),he}),M=Ve(()=>"q-btn-dropdown__arrow"+(l.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),P=Ve(()=>vV(e)),L=Ve(()=>zZ(e));Fi(()=>e.modelValue,he=>{d.value!==null&&d.value[he?"show":"hide"]()}),Fi(()=>e.split,le);function V(he){l.value=!0,r("beforeShow",he)}function X(he){r("show",he),r("update:modelValue",!0)}function J(he){l.value=!1,r("beforeHide",he)}function Z(he){r("hide",he),r("update:modelValue",!1)}function ie(he){r("click",he)}function ae(he){Qc(he),le(),r("click",he)}function de(he){d.value!==null&&d.value.toggle(he)}function fe(he){d.value!==null&&d.value.show(he)}function le(he){d.value!==null&&d.value.hide(he)}return Object.assign(s,{show:fe,hide:le,toggle:de}),ys(()=>{e.modelValue===!0&&fe()}),()=>{const he=[tt(Io,{class:M.value,name:e.dropdownIcon||s.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&he.push(tt(nA,{ref:d,id:y.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:V,onShow:X,onBeforeHide:J,onHide:Z},t.default)),e.split===!1?tt(y1,{class:"q-btn-dropdown q-btn-dropdown--simple",...L.value,...n.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:ie},{default:()=>ln(t.label,[]).concat(he),loading:t.loading}):tt(AZ,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...P.value,glossy:e.glossy,stretch:e.stretch},()=>[tt(y1,{class:"q-btn-dropdown--current",...L.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:ae},{default:t.label,loading:t.loading}),tt(y1,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...n.value,...P.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>he)])}}});function LS(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const tse=Bm({name:"close-popup",beforeMount(e,{value:t}){const r={depth:LS(t),handler(s){r.depth!==0&&setTimeout(()=>{const l=jU(e);l!==void 0&&UU(l,s,r.depth)})},handlerKey(s){tu(s,13)===!0&&r.handler(s)}};e.__qclosepopup=r,e.addEventListener("click",r.handler),e.addEventListener("keyup",r.handlerKey)},updated(e,{value:t,oldValue:r}){t!==r&&(e.__qclosepopup.depth=LS(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});var tp=PZ,DZ=Object.prototype.hasOwnProperty;function PZ(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var s in r)DZ.call(r,s)&&(e[s]=r[s])}return e}var aA={exports:{}};(function(e,t){(function(){var r={};e.exports=r,r.simpleFilter=function(s,l){return l.filter(function(d){return r.test(s,d)})},r.test=function(s,l){return r.match(s,l)!==null},r.match=function(s,l,d){d=d||{};var y=0,n=[],M=l.length,P=0,L=0,V=d.pre||"",X=d.post||"",J=d.caseSensitive&&l||l.toLowerCase(),Z;s=d.caseSensitive&&s||s.toLowerCase();for(var ie=0;ie<M;ie++)Z=l[ie],J[ie]===s[y]?(Z=V+Z+X,y+=1,L+=1+L):L=0,P+=L,n[n.length]=Z;return y===s.length?(P=J===s?1/0:P,{rendered:n.join(""),score:P}):null},r.filter=function(s,l,d){return!l||l.length===0?[]:typeof s!="string"?l:(d=d||{},l.reduce(function(y,n,M,P){var L=n;d.extract&&(L=d.extract(n));var V=r.match(s,L,d);return V!=null&&(y[y.length]={string:V.rendered,score:V.score,index:M,original:n}),y},[]).sort(function(y,n){var M=n.score-y.score;return M||y.index-n.index}))}})()})(aA);var kZ=aA.exports,aa=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};aa.prototype.show=function(){this.element.style.display="block"};aa.prototype.hide=function(){this.element.style.display="none"};aa.prototype.add=function(e){this.items.push(e)};aa.prototype.clear=function(){this.items=[],this.active=0};aa.prototype.isEmpty=function(){return!this.items.length};aa.prototype.isVisible=function(){return this.element.style.display==="block"};aa.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};aa.prototype.drawItem=function(e,t){var r=document.createElement("li"),s=document.createElement("a");t&&(r.className+=" active"),s.innerHTML=e.string,r.appendChild(s),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};aa.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};aa.prototype.move=function(e){this.active=e,this.draw()};aa.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};aa.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};aa.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var RZ=aa,LZ=tp,OZ=kZ,BZ=RZ,xs=function(e,t,r){return r=r||{},this.options=LZ({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=e,this.data=t||[],this.list=new BZ(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(s){this.handleKeyUp(s.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(s){this.handleKeyDown(s)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(s){this.handlePaste(s)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};xs.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};xs.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};xs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};xs.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};xs.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var r=0;r<t.length&&(this.list.add(t[r]),r!==this.options.limit-1);r++);this.list.draw()}.bind(this))};xs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};xs.prototype.update=function(e){this.data=e,this.handleKeyUp()};xs.prototype.clear=function(){this.data=[],this.list.clear()};xs.prototype.normalize=function(e){return e=e.toLowerCase(),e};xs.prototype.match=function(e,t){return e.indexOf(t)>-1};xs.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};xs.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(s){return this.getItemValue(s)}.bind(this)},r;this.options.filter?(r=OZ.filter(this.query,this.data,t),r=r.map(function(s){return{original:s.original,string:this.render(s.original,s.string)}}.bind(this))):r=this.data.map(function(s){var l=this.render(s);return{original:s,string:l}}.bind(this)),e(r)};xs.prototype.getItemValue=function(e){return e};xs.prototype.render=function(e,t){if(t)return t;for(var r=e.original?this.getItemValue(e.original):this.getItemValue(e),s=this.normalize(r),l=s.lastIndexOf(this.query);l>-1;){var d=l+this.query.length;r=r.slice(0,l)+"<strong>"+r.slice(l,d)+"</strong>"+r.slice(d),l=s.slice(0,l).lastIndexOf(this.query)}return r};xs.prototype.renderError=function(e){this.list.drawError(e)};var FZ=xs,lA=FZ,NZ=lA;typeof window<"u"&&(window.Suggestions=lA);var $Z="Expected a function",OS=NaN,jZ="[object Symbol]",UZ=/^\s+|\s+$/g,VZ=/^[-+]0x[0-9a-f]+$/i,qZ=/^0b[01]+$/i,HZ=/^0o[0-7]+$/i,GZ=parseInt,WZ=typeof At=="object"&&At&&At.Object===Object&&At,ZZ=typeof self=="object"&&self&&self.Object===Object&&self,XZ=WZ||ZZ||Function("return this")(),YZ=Object.prototype,JZ=YZ.toString,KZ=Math.max,QZ=Math.min,Hx=function(){return XZ.Date.now()};function eX(e,t,r){var s,l,d,y,n,M,P=0,L=!1,V=!1,X=!0;if(typeof e!="function")throw new TypeError($Z);t=BS(t)||0,jb(r)&&(L=!!r.leading,V="maxWait"in r,d=V?KZ(BS(r.maxWait)||0,t):d,X="trailing"in r?!!r.trailing:X);function J(Le){var Ae=s,We=l;return s=l=void 0,P=Le,y=e.apply(We,Ae),y}function Z(Le){return P=Le,n=setTimeout(de,t),L?J(Le):y}function ie(Le){var Ae=Le-M,We=Le-P,Qe=t-Ae;return V?QZ(Qe,d-We):Qe}function ae(Le){var Ae=Le-M,We=Le-P;return M===void 0||Ae>=t||Ae<0||V&&We>=d}function de(){var Le=Hx();if(ae(Le))return fe(Le);n=setTimeout(de,ie(Le))}function fe(Le){return n=void 0,X&&s?J(Le):(s=l=void 0,y)}function le(){n!==void 0&&clearTimeout(n),P=0,s=M=l=n=void 0}function he(){return n===void 0?y:fe(Hx())}function Ce(){var Le=Hx(),Ae=ae(Le);if(s=arguments,l=this,M=Le,Ae){if(n===void 0)return Z(M);if(V)return n=setTimeout(de,t),J(M)}return n===void 0&&(n=setTimeout(de,t)),y}return Ce.cancel=le,Ce.flush=he,Ce}function jb(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function tX(e){return!!e&&typeof e=="object"}function iX(e){return typeof e=="symbol"||tX(e)&&JZ.call(e)==jZ}function BS(e){if(typeof e=="number")return e;if(iX(e))return OS;if(jb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=jb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(UZ,"");var r=qZ.test(e);return r||HZ.test(e)?GZ(e.slice(2),r?2:8):VZ.test(e)?OS:+e}var rX=eX,T6={exports:{}},x1=typeof Reflect=="object"?Reflect:null,FS=x1&&typeof x1.apply=="function"?x1.apply:function(t,r,s){return Function.prototype.apply.call(t,r,s)},E2;x1&&typeof x1.ownKeys=="function"?E2=x1.ownKeys:Object.getOwnPropertySymbols?E2=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:E2=function(t){return Object.getOwnPropertyNames(t)};var cA=Number.isNaN||function(t){return t!==t};function xn(){xn.init.call(this)}T6.exports=xn;T6.exports.once=aX;xn.EventEmitter=xn;xn.prototype._events=void 0;xn.prototype._eventsCount=0;xn.prototype._maxListeners=void 0;var NS=10;function nv(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(xn,"defaultMaxListeners",{enumerable:!0,get:function(){return NS},set:function(e){if(typeof e!="number"||e<0||cA(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");NS=e}});xn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||cA(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function uA(e){return e._maxListeners===void 0?xn.defaultMaxListeners:e._maxListeners}xn.prototype.getMaxListeners=function(){return uA(this)};xn.prototype.emit=function(t){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var l=t==="error",d=this._events;if(d!==void 0)l=l&&d.error===void 0;else if(!l)return!1;if(l){var y;if(r.length>0&&(y=r[0]),y instanceof Error)throw y;var n=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw n.context=y,n}var M=d[t];if(M===void 0)return!1;if(typeof M=="function")FS(M,this,r);else for(var P=M.length,L=mA(M,P),s=0;s<P;++s)FS(L[s],this,r);return!0};function hA(e,t,r,s){var l,d,y;if(nv(r),d=e._events,d===void 0?(d=e._events=Object.create(null),e._eventsCount=0):(d.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),d=e._events),y=d[t]),y===void 0)y=d[t]=r,++e._eventsCount;else if(typeof y=="function"?y=d[t]=s?[r,y]:[y,r]:s?y.unshift(r):y.push(r),l=uA(e),l>0&&y.length>l&&!y.warned){y.warned=!0;var n=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");n.name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=y.length}return e}xn.prototype.addListener=function(t,r){return hA(this,t,r,!1)};xn.prototype.on=xn.prototype.addListener;xn.prototype.prependListener=function(t,r){return hA(this,t,r,!0)};function nX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dA(e,t,r){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},l=nX.bind(s);return l.listener=r,s.wrapFn=l,l}xn.prototype.once=function(t,r){return nv(r),this.on(t,dA(this,t,r)),this};xn.prototype.prependOnceListener=function(t,r){return nv(r),this.prependListener(t,dA(this,t,r)),this};xn.prototype.removeListener=function(t,r){var s,l,d,y,n;if(nv(r),l=this._events,l===void 0)return this;if(s=l[t],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete l[t],l.removeListener&&this.emit("removeListener",t,s.listener||r));else if(typeof s!="function"){for(d=-1,y=s.length-1;y>=0;y--)if(s[y]===r||s[y].listener===r){n=s[y].listener,d=y;break}if(d<0)return this;d===0?s.shift():oX(s,d),s.length===1&&(l[t]=s[0]),l.removeListener!==void 0&&this.emit("removeListener",t,n||r)}return this};xn.prototype.off=xn.prototype.removeListener;xn.prototype.removeAllListeners=function(t){var r,s,l;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var d=Object.keys(s),y;for(l=0;l<d.length;++l)y=d[l],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(l=r.length-1;l>=0;l--)this.removeListener(t,r[l]);return this};function fA(e,t,r){var s=e._events;if(s===void 0)return[];var l=s[t];return l===void 0?[]:typeof l=="function"?r?[l.listener||l]:[l]:r?sX(l):mA(l,l.length)}xn.prototype.listeners=function(t){return fA(this,t,!0)};xn.prototype.rawListeners=function(t){return fA(this,t,!1)};xn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):pA.call(e,t)};xn.prototype.listenerCount=pA;function pA(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}xn.prototype.eventNames=function(){return this._eventsCount>0?E2(this._events):[]};function mA(e,t){for(var r=new Array(t),s=0;s<t;++s)r[s]=e[s];return r}function oX(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function sX(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function aX(e,t){return new Promise(function(r,s){function l(y){e.removeListener(t,d),s(y)}function d(){typeof e.removeListener=="function"&&e.removeListener("error",l),r([].slice.call(arguments))}gA(e,t,d,{once:!0}),t!=="error"&&lX(e,l,{once:!0})})}function lX(e,t,r){typeof e.on=="function"&&gA(e,"error",t,r)}function gA(e,t,r,s){if(typeof e.on=="function")s.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function l(d){s.once&&e.removeEventListener(t,l),r(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var _A=T6.exports,cX={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function uX(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function hX(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var r=t[1],s=t[2].split(";"),l=null,d=s.reduce(function(y,n){var M=uX(n);return M?M.key==="rel"?(l||(l=M.value),y):(y[M.key]=M.value,y):y},{});return l?{url:r,rel:l,params:d}:null}function dX(e){return e?e.split(/,\s*</).reduce(function(t,r){var s=hX(r);if(!s)return t;var l=s.rel.split(/\s+/);return l.forEach(function(d){t[d]||(t[d]={url:s.url,params:s.params})}),t},{}):{}}var fX=dX,pX=fX;function C6(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=pX(this.headers.link)}C6.prototype.hasNextPage=function(){return!!this.links.next};C6.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var mX=C6,ov={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},$S=ov;function gX(e){var t=e.type||$S.ERROR_HTTP,r;if(e.body)try{r=JSON.parse(e.body)}catch{r=e.body}else r=null;var s=e.message||null;s||(typeof r=="string"?s=r:r&&typeof r.message=="string"?s=r.message:t===$S.ERROR_REQUEST_ABORTED&&(s="Request aborted")),this.message=s,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=r}var _X=gX;function yX(e){var t=e.indexOf(":"),r=e.substring(0,t).trim().toLowerCase(),s=e.substring(t+1).trim();return{name:r,value:s}}function vX(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(r){var s=yX(r);t[s.name]=s.value}),t}var xX=vX,bX=mX,jS=_X,Gx=ov,wX=xX,oy={};function SX(e){var t=oy[e.id];t&&(t.abort(),delete oy[e.id])}function MX(e,t){return new bX(e,{body:t.response,headers:wX(t.getAllResponseHeaders()),statusCode:t.status})}function US(e){var t=e.total,r=e.loaded,s=100*r/t;return{total:t,transferred:r,percent:s}}function yA(e,t){return new Promise(function(r,s){t.onprogress=function(y){e.emitter.emit(Gx.EVENT_PROGRESS_DOWNLOAD,US(y))};var l=e.file;l&&(t.upload.onprogress=function(y){e.emitter.emit(Gx.EVENT_PROGRESS_UPLOAD,US(y))}),t.onerror=function(y){s(y)},t.onabort=function(){var y=new jS({request:e,type:Gx.ERROR_REQUEST_ABORTED});s(y)},t.onload=function(){if(delete oy[e.id],t.status<200||t.status>=400){var y=new jS({request:e,body:t.response,statusCode:t.status});s(y);return}r(t)};var d=e.body;typeof d=="string"?t.send(d):d?t.send(JSON.stringify(d)):l?t.send(l):t.send(),oy[e.id]=t}).then(function(r){return MX(e,r)})}function vA(e,t){var r=e.url(t),s=new window.XMLHttpRequest;return s.open(e.method,r),Object.keys(e.headers).forEach(function(l){s.setRequestHeader(l,e.headers[l])}),s}function EX(e){return Promise.resolve().then(function(){var t=vA(e,e.client.accessToken);return yA(e,t)})}var TX={browserAbort:SX,sendRequestXhr:yA,browserSend:EX,createRequestXhr:vA},sy={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */sy.exports;(function(e,t){(function(r){var s=t,l=e&&e.exports==s&&e,d=typeof At=="object"&&At;(d.global===d||d.window===d)&&(r=d);var y=function(Z){this.message=Z};y.prototype=new Error,y.prototype.name="InvalidCharacterError";var n=function(Z){throw new y(Z)},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=/[\t\n\f\r ]/g,L=function(Z){Z=String(Z).replace(P,"");var ie=Z.length;ie%4==0&&(Z=Z.replace(/==?$/,""),ie=Z.length),(ie%4==1||/[^+a-zA-Z0-9/]/.test(Z))&&n("Invalid character: the string to be decoded is not correctly encoded.");for(var ae=0,de,fe,le="",he=-1;++he<ie;)fe=M.indexOf(Z.charAt(he)),de=ae%4?de*64+fe:fe,ae++%4&&(le+=String.fromCharCode(255&de>>(-2*ae&6)));return le},V=function(Z){Z=String(Z),/[^\0-\xFF]/.test(Z)&&n("The string to be encoded contains characters outside of the Latin1 range.");for(var ie=Z.length%3,ae="",de=-1,fe,le,he,Ce,Le=Z.length-ie;++de<Le;)fe=Z.charCodeAt(de)<<16,le=Z.charCodeAt(++de)<<8,he=Z.charCodeAt(++de),Ce=fe+le+he,ae+=M.charAt(Ce>>18&63)+M.charAt(Ce>>12&63)+M.charAt(Ce>>6&63)+M.charAt(Ce&63);return ie==2?(fe=Z.charCodeAt(de)<<8,le=Z.charCodeAt(++de),Ce=fe+le,ae+=M.charAt(Ce>>10)+M.charAt(Ce>>4&63)+M.charAt(Ce<<2&63)+"="):ie==1&&(Ce=Z.charCodeAt(de),ae+=M.charAt(Ce>>2)+M.charAt(Ce<<4&63)+"=="),ae},X={encode:V,decode:L,version:"0.1.0"};if(s&&!s.nodeType)if(l)l.exports=X;else for(var J in X)X.hasOwnProperty(J)&&(s[J]=X[J]);else r.base64=X})(At)})(sy,sy.exports);var CX=sy.exports,AX=CX,Wx={};function IX(e){if(Wx[e])return Wx[e];var t=e.split("."),r=t[0],s=t[1];if(!s)throw new Error("Invalid token");var l=zX(s),d={usage:r,user:l.u};return hd(l,"a")&&(d.authorization=l.a),hd(l,"exp")&&(d.expires=l.exp*1e3),hd(l,"iat")&&(d.created=l.iat*1e3),hd(l,"scopes")&&(d.scopes=l.scopes),hd(l,"client")&&(d.client=l.client),hd(l,"ll")&&(d.lastLogin=l.ll),hd(l,"iu")&&(d.impersonator=l.iu),Wx[e]=d,d}function zX(e){try{return JSON.parse(AX.decode(e))}catch{throw new Error("Invalid token")}}function hd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var xA=IX,bA={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function l(M,P,L){this.fn=M,this.context=P,this.once=L||!1}function d(M,P,L,V,X){if(typeof L!="function")throw new TypeError("The listener must be a function");var J=new l(L,V||M,X),Z=r?r+P:P;return M._events[Z]?M._events[Z].fn?M._events[Z]=[M._events[Z],J]:M._events[Z].push(J):(M._events[Z]=J,M._eventsCount++),M}function y(M,P){--M._eventsCount===0?M._events=new s:delete M._events[P]}function n(){this._events=new s,this._eventsCount=0}n.prototype.eventNames=function(){var P=[],L,V;if(this._eventsCount===0)return P;for(V in L=this._events)t.call(L,V)&&P.push(r?V.slice(1):V);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(L)):P},n.prototype.listeners=function(P){var L=r?r+P:P,V=this._events[L];if(!V)return[];if(V.fn)return[V.fn];for(var X=0,J=V.length,Z=new Array(J);X<J;X++)Z[X]=V[X].fn;return Z},n.prototype.listenerCount=function(P){var L=r?r+P:P,V=this._events[L];return V?V.fn?1:V.length:0},n.prototype.emit=function(P,L,V,X,J,Z){var ie=r?r+P:P;if(!this._events[ie])return!1;var ae=this._events[ie],de=arguments.length,fe,le;if(ae.fn){switch(ae.once&&this.removeListener(P,ae.fn,void 0,!0),de){case 1:return ae.fn.call(ae.context),!0;case 2:return ae.fn.call(ae.context,L),!0;case 3:return ae.fn.call(ae.context,L,V),!0;case 4:return ae.fn.call(ae.context,L,V,X),!0;case 5:return ae.fn.call(ae.context,L,V,X,J),!0;case 6:return ae.fn.call(ae.context,L,V,X,J,Z),!0}for(le=1,fe=new Array(de-1);le<de;le++)fe[le-1]=arguments[le];ae.fn.apply(ae.context,fe)}else{var he=ae.length,Ce;for(le=0;le<he;le++)switch(ae[le].once&&this.removeListener(P,ae[le].fn,void 0,!0),de){case 1:ae[le].fn.call(ae[le].context);break;case 2:ae[le].fn.call(ae[le].context,L);break;case 3:ae[le].fn.call(ae[le].context,L,V);break;case 4:ae[le].fn.call(ae[le].context,L,V,X);break;default:if(!fe)for(Ce=1,fe=new Array(de-1);Ce<de;Ce++)fe[Ce-1]=arguments[Ce];ae[le].fn.apply(ae[le].context,fe)}}return!0},n.prototype.on=function(P,L,V){return d(this,P,L,V,!1)},n.prototype.once=function(P,L,V){return d(this,P,L,V,!0)},n.prototype.removeListener=function(P,L,V,X){var J=r?r+P:P;if(!this._events[J])return this;if(!L)return y(this,J),this;var Z=this._events[J];if(Z.fn)Z.fn===L&&(!X||Z.once)&&(!V||Z.context===V)&&y(this,J);else{for(var ie=0,ae=[],de=Z.length;ie<de;ie++)(Z[ie].fn!==L||X&&!Z[ie].once||V&&Z[ie].context!==V)&&ae.push(Z[ie]);ae.length?this._events[J]=ae.length===1?ae[0]:ae:y(this,J)}return this},n.prototype.removeAllListeners=function(P){var L;return P?(L=r?r+P:P,this._events[L]&&y(this,L)):(this._events=new s,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=r,n.EventEmitter=n,e.exports=n})(bA);var DX=bA.exports;function PX(e){return e.map(encodeURIComponent).join(",")}function wA(e){return Array.isArray(e)?PX(e):encodeURIComponent(String(e))}function SA(e,t,r){if(r===!1||r===null)return e;var s=/\?/.test(e)?"&":"?",l=encodeURIComponent(t);return r!==void 0&&r!==""&&r!==!0&&(l+="="+wA(r)),""+e+s+l}function kX(e,t){if(!t)return e;var r=e;return Object.keys(t).forEach(function(s){var l=t[s];l!==void 0&&(Array.isArray(l)&&(l=l.filter(function(d){return d!=null}).join(",")),r=SA(r,s,l))}),r}function RX(e,t){if(!t||e.slice(0,4)==="http")return e;var r=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+r+e}function LX(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(r,s){var l=t[s];if(l===void 0)throw new Error("Unspecified route parameter "+s);var d=wA(l);return"/"+d}):e}var OX={appendQueryObject:kX,appendQueryParam:SA,prependOrigin:RX,interpolateRouteParams:LX},BX=xA,A6=tp,FX=DX,Q_=OX,VS=ov,NX=1;function dh(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};t.body&&(r["content-type"]="application/json");var s=A6(r,t.headers),l=Object.keys(s).reduce(function(d,y){return d[y.toLowerCase()]=s[y],d},{});this.id=NX++,this._options=t,this.emitter=new FX,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=l}dh.prototype.url=function(t){var r=Q_.prependOrigin(this.path,this.origin);r=Q_.appendQueryObject(r,this.query);var s=this.params,l=t??this.client.accessToken;if(l){r=Q_.appendQueryParam(r,"access_token",l);var d=BX(l).user;s=A6({ownerId:d},s)}return r=Q_.interpolateRouteParams(r,s),r};dh.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(r){return t.response=r,t.emitter.emit(VS.EVENT_RESPONSE,r),r},function(r){throw t.error=r,t.emitter.emit(VS.EVENT_ERROR,r),r})};dh.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};dh.prototype.eachPage=function(t){var r=this;function s(y){function n(){delete r._nextPageRequest;var M=y.nextPage();M&&(r._nextPageRequest=M,d(M))}t(null,y,n)}function l(y){t(y,null,function(){})}function d(y){y.send().then(s,l)}d(this)};dh.prototype.clone=function(){return this._extend()};dh.prototype._extend=function(t){var r=A6(this._options,t);return new dh(this.client,r)};var $X=dh,jX=xA,UX=$X,VX=ov;function MA(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");jX(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||VX.API_ORIGIN}MA.prototype.createRequest=function(t){return new UX(this,t)};var EA=MA,TA=TX,CA=EA;function R1(e){CA.call(this,e)}R1.prototype=Object.create(CA.prototype);R1.prototype.constructor=R1;R1.prototype.sendRequest=TA.browserSend;R1.prototype.abortRequest=TA.browserAbort;function qX(e){return new R1(e)}var AA=qX,HX=AA,GX=HX,WX=Object.prototype.toString,ZX=function(e){var t;return WX.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},XX=ZX,YX=tp,IA="value",Zx=`
  `,In={};In.assert=function(e,t){return t=t||{},function(r){var s=fh(e,r);if(s){var l=I6(s,t);throw t.apiName&&(l=t.apiName+": "+l),new Error(l)}}};In.shape=function(t){var r=eY(t);return function(l){var d=fh(In.plainObject,l);if(d)return d;for(var y,n,M=[],P=0;P<r.length;P++)y=r[P].key,n=r[P].value,d=fh(n,l[y]),d&&M.push([y].concat(d));return M.length<2?M[0]:function(L){M=M.map(function(J){var Z=J[0],ie=I6(J,L).split(`
`).join(Zx);return"- "+Z+": "+ie});var V=L.path.join("."),X=V===IA?"":" of "+V;return"The following properties"+X+" have invalid values:"+Zx+M.join(Zx)}}};In.strictShape=function(t){var r=In.shape(t);return function(l){var d=r(l);if(d)return d;var y=Object.keys(l).reduce(function(n,M){return t[M]===void 0&&n.push(M),n},[]);if(y.length!==0)return function(){return"The following keys are invalid: "+y.join(", ")}}};In.arrayOf=function(t){return zA(t)};In.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return zA(t)};function zA(e){var t=Array.isArray(e),r=function(s){return t?e[s]:e};return function(l){var d=fh(In.plainArray,l);if(d)return d;if(t&&l.length!==e.length)return"an array with "+e.length+" items";for(var y=0;y<l.length;y++)if(d=fh(r(y),l[y]),d)return[y].concat(d)}}In.required=function(t){function r(s){return s==null?function(l){return DA(l,PA(l.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return r.__required=!0,r};In.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(s){var l=t.map(function(d){return fh(d,s)}).filter(Boolean);if(l.length===t.length)return l.every(function(d){return d.length===1&&typeof d[0]=="string"})?JX(l.map(function(d){return d[0]})):l.reduce(function(d,y){return y.length>d.length?y:d})}};In.equal=function(t){return function(s){if(s!==t)return JSON.stringify(t)}};In.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),r=t.map(function(s){return In.equal(s)});return In.oneOfType.apply(this,r)};In.range=function(t){var r=t[0],s=t[1];return function(d){var y=fh(In.number,d);if(y||d<r||d>s)return"number between "+r+" & "+s+" (inclusive)"}};In.any=function(){};In.boolean=function(t){if(typeof t!="boolean")return"boolean"};In.number=function(t){if(typeof t!="number")return"number"};In.plainArray=function(t){if(!Array.isArray(t))return"array"};In.plainObject=function(t){if(!XX(t))return"object"};In.string=function(t){if(typeof t!="string")return"string"};In.func=function(t){if(typeof t!="function")return"function"};function fh(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var r=e(t);if(r)return Array.isArray(r)?r:[r]}}function I6(e,t){var r=e.length,s=e[r-1],l=e.slice(0,r-1);return l.length===0&&(l=[IA]),t=YX(t,{path:l}),typeof s=="function"?s(t):DA(t,KX(s))}function JX(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function KX(e){return"must be "+QX(e)+"."}function QX(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function DA(e,t){var r=PA(e.path),s=e.path.join(".")+" "+t,l=r?"Item at position ":"";return l+s}function PA(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function eY(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}In.validate=fh;In.processMessage=I6;var tY=In,iY=tp,b1=tY;function rY(e){if(typeof window<"u")return e instanceof At.Blob||e instanceof At.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function nY(e,t){return b1.assert(b1.strictShape(e),t)}function oY(e){var t="date";if(typeof e=="boolean")return t;try{var r=new Date(e);if(r.getTime&&isNaN(r.getTime()))return t}catch{return t}}function sY(e){return b1.tuple(b1.number,b1.number)(e)}var aY=iY(b1,{file:rY,date:oY,coordinates:sY,assertShape:nY});function lY(e,t){var r=function(s,l){return t.indexOf(s)!==-1&&l!==void 0};return typeof t=="function"&&(r=t),Object.keys(e).filter(function(s){return r(s,e[s])}).reduce(function(s,l){return s[l]=e[l],s},{})}var cY=lY;function uY(e,t){return Object.keys(e).reduce(function(r,s){return r[s]=t(s,e[s]),r},{})}var hY=uY,dY=hY;function fY(e){return dY(e,function(t,r){return typeof r=="boolean"?JSON.stringify(r):r})}var pY=fY,mY=EA,gY=AA;function _Y(e){return function(t){var r;mY.prototype.isPrototypeOf(t)?r=t:r=gY(t);var s=Object.create(e);return s.client=r,s}}var yY=_Y,kA=tp,Br=aY,ay=cY,RA=pY,vY=yY,z6={},LA=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];z6.forwardGeocode=function(e){Br.assertShape({query:Br.required(Br.string),mode:Br.oneOf("mapbox.places","mapbox.places-permanent"),countries:Br.arrayOf(Br.string),proximity:Br.oneOf(Br.coordinates,"ip"),types:Br.arrayOf(Br.oneOf(LA)),autocomplete:Br.boolean,bbox:Br.arrayOf(Br.number),limit:Br.number,language:Br.arrayOf(Br.string),routing:Br.boolean,fuzzyMatch:Br.boolean,worldview:Br.string,session_token:Br.string})(e),e.mode=e.mode||"mapbox.places";var t=RA(kA({country:e.countries},ay(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:ay(e,["mode","query"]),query:t})};z6.reverseGeocode=function(e){Br.assertShape({query:Br.required(Br.coordinates),mode:Br.oneOf("mapbox.places","mapbox.places-permanent"),countries:Br.arrayOf(Br.string),types:Br.arrayOf(Br.oneOf(LA)),bbox:Br.arrayOf(Br.number),limit:Br.number,language:Br.arrayOf(Br.string),reverseMode:Br.oneOf("distance","score"),routing:Br.boolean,worldview:Br.string,session_token:Br.string})(e),e.mode=e.mode||"mapbox.places";var t=RA(kA({country:e.countries},ay(e,["country","types","bbox","limit","language","reverseMode","routing","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:ay(e,["mode","query"]),query:t})};var xY=vY(z6);let bY="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",OA=e=>crypto.getRandomValues(new Uint8Array(e)),BA=(e,t,r)=>{let s=(2<<Math.log(e.length-1)/Math.LN2)-1,l=-~(1.6*s*t/e.length);return(d=t)=>{let y="";for(;;){let n=r(l),M=l;for(;M--;)if(y+=e[n[M]&s]||"",y.length===d)return y}}},wY=(e,t=21)=>BA(e,t,OA),SY=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");const MY=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:wY,customRandom:BA,nanoid:SY,random:OA,urlAlphabet:bY},Symbol.toStringTag,{value:"Module"})),EY=oE(MY);var TY=EY.nanoid;function FA(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.3.0",this.pluginSessionID=this.generateSessionID(),this.sessionIncrementer=0,this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}FA.prototype={select:function(e,t){var r=this.getEventPayload("search.select",t,{selectedFeature:e});if(r&&!(r.resultIndex===this.lastSentIndex&&r.queryString===this.lastSentInput||r.resultIndex==-1))return this.lastSentIndex=r.resultIndex,this.lastSentInput=r.queryString,this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(t)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var r=this.getEventPayload("search.keystroke",t,{key:e.key});if(r)return this.push(r)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var r=this.getRequestOptions(e);this.request(r,function(s){if(s)return this.handleError(s,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t,r={}){if(e==="search.select"&&!r.selectedFeature||e==="search.keystroke"&&!r.key)return null;var s;if(!t.options.proximity)s=null;else if(typeof t.options.proximity=="object")s=[t.options.proximity.longitude,t.options.proximity.latitude];else if(t.options.proximity==="ip"){var l=t._headers?t._headers["ip-proximity"]:null;l&&typeof l=="string"?s=l.split(",").map(parseFloat):s=[999,999]}else s=t.options.proximity;var d=t._map?t._map.getZoom():void 0,y={event:e,version:this.getEventSchemaVersion(e),created:+new Date,sessionIdentifier:this.getSessionId(),country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:s,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:d,keyboardLocale:this.locale};if(e==="search.select"?y.queryString=t.inputString:e!="search.select"&&t._inputEl?y.queryString=t._inputEl.value:y.queryString=t.inputString,["search.keystroke","search.select"].includes(e)&&(y.path="geocoding/v5/mapbox.places"),e==="search.keystroke"&&r.key)y.lastAction=r.key;else if(e==="search.select"&&r.selectedFeature){var n=r.selectedFeature,M=this.getSelectedIndex(n,t);if(y.resultIndex=M,y.resultPlaceName=n.place_name,y.resultId=n.id,n.properties&&(y.resultMapboxId=n.properties.mapbox_id),t._typeahead){var P=t._typeahead.data;P&&P.length>0&&(y.suggestionIds=this.getSuggestionIds(P),y.suggestionNames=this.getSuggestionNames(P),y.suggestionTypes=this.getSuggestionTypes(P),y.suggestionSources=this.getSuggestionSources(P))}}return this.validatePayload(y)?y:null},request:function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},r.open(e.method,e.host+"/"+e.path,!0);for(var s in e.headers){var l=e.headers[s];r.setRequestHeader(s,l)}r.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return TY()},getSessionId:function(){return this.pluginSessionID+"."+this.sessionIncrementer},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var r=t._typeahead.data,s=e.id,l=r.map(function(y){return y.id}),d=l.indexOf(s);return d}},getSuggestionIds:function(e){return e.map(function(t){return t.properties?t.properties.mapbox_id||"":t.id||""})},getSuggestionNames:function(e){return e.map(function(t){return t.place_name||""})},getSuggestionTypes:function(e){return e.map(function(t){return t.place_type&&Array.isArray(t.place_type)&&t.place_type[0]||""})},getSuggestionSources:function(e){return e.map(function(t){return t._source||""})},getEventSchemaVersion:function(e){return["search.keystroke","search.select"].includes(e)?"2.2":"2.0"},validatePayload:function(e){if(!e||!e.event)return!1;var t=["event","created","sessionIdentifier","queryString"],r=["event","created","sessionIdentifier","queryString","lastAction"],s=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],l=e.event;return l==="search.start"?this.objectHasRequiredProps(e,t):l==="search.keystroke"?this.objectHasRequiredProps(e,r):l==="search.select"?this.objectHasRequiredProps(e,s):!0},objectHasRequiredProps:function(e,t){return t.every(function(r){return r==="queryString"?typeof e[r]=="string"&&e[r].length>0:e[r]!==void 0})},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com")},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var CY=FA,AY={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},IY={placeholder:AY},NA={exports:{}};(function(e){(function(t,r,s){e.exports?e.exports=s():t[r]=s()})(At,"subtag",function(){var t="",r=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function s(M){return M.match(r)||[]}function l(M){return s(M).filter(function(P,L){return P&&L})}function d(M){return M=s(M),{language:M[1]||t,extlang:M[2]||t,script:M[3]||t,region:M[4]||t}}function y(M,P,L){Object.defineProperty(M,P,{value:L,enumerable:!0})}function n(M,P,L){function V(X){return s(X)[M]||t}y(V,"pattern",P),y(d,L,V)}return n(1,/^[a-zA-Z]{2,3}$/,"language"),n(2,/^[a-zA-Z]{3}$/,"extlang"),n(3,/^[a-zA-Z]{4}$/,"script"),n(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),y(d,"split",l),d})})(NA);var zY=NA.exports;function $A(){}$A.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,r){window.navigator.geolocation.getCurrentPosition(t,r,e)})}};var DY=$A;function PY(e,t){const r=jA(e),s=["address","street","place","country"];var l;if(typeof t=="function")return t(r);const d=s.indexOf(t);return d===-1?l=s:l=s.slice(d),l.reduce(function(y,n){return r[n]?(y!==""&&(y=y+", "),y+r[n]):y},"")}function jA(e){const t=e.address||"",r=e.text||"",s=e.place_name||"",d={address:s.split(",")[0],houseNumber:t,street:r,placeName:s};return e.context.forEach(function(y){const n=y.id.split(".")[0];d[n]=y.text}),d}const kY=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var RY={transformFeatureToGeolocationText:PY,getAddressInfo:jA,REVERSE_GEOCODE_COORD_RGX:kY},LY=NZ,OY=rX,md=tp,BY=_A.EventEmitter,qS=cX,Xx=GX,Yx=xY,FY=CY,NY=IY,$Y=zY,jY=DY,HS=RY;const Gu={FORWARD:0,LOCAL:1,REVERSE:2};function UY(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function UA(e){this._eventEmitter=new BY,this.options=md({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new jY}UA.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},_headers:{},addTo:function(e){function t(r,s){if(!document.body.contains(s))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const l=r.onAdd();s.appendChild(l)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element ",e,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=Yx(Xx({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new FY(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",OY(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(P){this.eventManager.keyevent(P,this)}.bind(this));var s=document.createElement("div");s.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var l=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(l),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),s.appendChild(this._clearEl),s.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(s),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var d=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(d),s.appendChild(this._geolocateEl),this._showGeolocateButton()}var y=this._typeahead=new LY(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),y.getItemValue=this.options.getItemValue;var n=y.list.draw,M=this._footerNode=UY();return y.list.draw=function(){n.call(this),M.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),M.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(M)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const r={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const s=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(s),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(r).send().then(function(s){const l=s.body.features[0];if(l){const d=HS.transformFeatureToGeolocationText(l,this.options.addressAccuracy);this._setInputValue(d),l.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:l})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),r.innerHTML=t,r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,r=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var s=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,l=s?s.value:"";if(!l)return this.fresh=!0,e.keyCode!==r&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[r,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&s.value.length>=this.options.minLength&&this._geocode(s.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&qS[e.properties.short_code])t=md({},this.options.flyTo),this._map&&this._map.fitBounds(qS[e.properties.short_code].bbox,t);else if(e.bbox){var r=e.bbox;t=md({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{var s={zoom:this.options.zoom};t=md({},s,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var r;return e.localGeocoderOnly?r=Gu.LOCAL:e.reverseGeocode&&HS.REVERSE_GEOCODE_COORD_RGX.test(t)?r=Gu.REVERSE:r=Gu.FORWARD,r},_setupConfig:function(e,t){const r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],s=/[\s,]+/;var l=this,d=r.reduce(function(n,M){if(l.options[M]===void 0||l.options[M]===null)return n;["countries","types","language"].indexOf(M)>-1?n[M]=l.options[M].split(s):n[M]=l.options[M];const P=typeof l.options[M].longitude=="number"&&typeof l.options[M].latitude=="number";if(M==="proximity"&&P){const L=l.options[M].longitude,V=l.options[M].latitude;n[M]=[L,V]}return n},{});switch(e){case Gu.REVERSE:{var y=t.split(s).map(function(n){return parseFloat(n,10)});l.options.flipCoordinates||y.reverse(),d.types&&d.types[0],d=md(d,{query:y,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(n){n in d&&delete d[n]})}break;case Gu.FORWARD:{const n=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(n)&&(t=t.replace(/,/g," ")),d=md(d,{query:t})}break}return d.session_token=this.eventManager.getSessionId(),d},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),r=this._setupConfig(t,e);var s;switch(t){case Gu.LOCAL:s=Promise.resolve();break;case Gu.FORWARD:s=this.geocoderService.forwardGeocode(r).send();break;case Gu.REVERSE:s=this.geocoderService.reverseGeocode(r).send();break}var l=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],d=[],y=null;return s.catch(function(n){y=n}.bind(this)).then(function(n){this._hideLoadingIcon();var M={};return n?n.statusCode=="200"&&(M=n.body,M.request=n.request,M.headers=n.headers,this._headers=n.headers):M={type:"FeatureCollection",features:[]},M.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),M.features&&M.features.length&&M.features.map(function(P){P._source="mapbox"}),M.features=M.features?l.concat(M.features):l,this.options.externalGeocoder?(d=this.options.externalGeocoder(e,M.features)||Promise.resolve([]),d.then(function(P){return M.features=M.features?P.concat(M.features):P,M},function(){return M})):M}.bind(this)).then(function(n){if(y)throw y;this.options.filter&&n.features.length&&(n.features=n.features.filter(this.options.filter)),n.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",n),this._typeahead.update(n.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",n))}.bind(this)).catch(function(n){this._hideLoadingIcon(),this._hideAttribution(),l.length&&this.options.localGeocoder||d.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(l)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:l}),this._eventEmitter.emit("error",{error:n})}.bind(this)),s},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this.eventManager.sessionIncrementer++,this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var r=t.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=$Y.language(e),r=NY.placeholder[t];if(r)return r}return"Search"},setInput:function(e,t){return t===void 0&&(t=!1),this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&(t?this._geocode(e):this._onChange()),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.options.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=Yx(Xx({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=Yx(Xx({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},r=md({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(r),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var VY=UA;const ise=Nm(VY),rse=lr({name:"QPopupProxy",props:{...eA,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:r,attrs:s}){const{proxy:l}=_r(),{$q:d}=l,y=oi(!1),n=oi(null),M=Ve(()=>parseInt(e.breakpoint,10)),{canShow:P}=M6({showing:y});function L(){return d.screen.width<M.value||d.screen.height<M.value?"dialog":"menu"}const V=oi(L()),X=Ve(()=>V.value==="menu"?{maxHeight:"99vh"}:{});Fi(()=>L(),ie=>{y.value!==!0&&(V.value=ie)});function J(ie){y.value=!0,r("show",ie)}function Z(ie){y.value=!1,V.value=L(),r("hide",ie)}return Object.assign(l,{show(ie){P(ie)===!0&&n.value.show(ie)},hide(ie){n.value.hide(ie)},toggle(ie){n.value.toggle(ie)}}),_h(l,"currentComponent",()=>({type:V.value,ref:n.value})),()=>{const ie={ref:n,...X.value,...s,onShow:J,onHide:Z};let ae;return V.value==="dialog"?ae=FT:(ae=nA,Object.assign(ie,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),tt(ae,ie,t.default)}}});function qY(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=0;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var Ld=1,Od=2,w1=3,HY=4,Ub=5,GS=6378137,GY=6356752314e-3,WS=.0066943799901413165,rm=484813681109536e-20,li=Math.PI/2,WY=.16666666666666666,ZY=.04722222222222222,XY=.022156084656084655,Ti=1e-10,es=.017453292519943295,nh=57.29577951308232,pn=Math.PI/4,Cm=Math.PI*2,ao=3.14159265359,la={};la.greenwich=0;la.lisbon=-9.131906111111;la.paris=2.337229166667;la.bogota=-74.080916666667;la.madrid=-3.687938888889;la.rome=12.452333333333;la.bern=7.439583333333;la.jakarta=106.807719444444;la.ferro=-17.666666666667;la.brussels=4.367975;la.stockholm=18.058277777778;la.athens=23.7163375;la.oslo=10.722916666667;const YY={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ZS=/[\s_\-\/\(\)]/g;function ph(e,t){if(e[t])return e[t];for(var r=Object.keys(e),s=t.toLowerCase().replace(ZS,""),l=-1,d,y;++l<r.length;)if(d=r[l],y=d.toLowerCase().replace(ZS,""),y===s)return e[d]}function Vb(e){var t={},r=e.split("+").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,M){var P=M.split("=");return P.push(!0),n[P[0].toLowerCase()]=P[1],n},{}),s,l,d,y={proj:"projName",datum:"datumCode",rf:function(n){t.rf=parseFloat(n)},lat_0:function(n){t.lat0=n*es},lat_1:function(n){t.lat1=n*es},lat_2:function(n){t.lat2=n*es},lat_ts:function(n){t.lat_ts=n*es},lon_0:function(n){t.long0=n*es},lon_1:function(n){t.long1=n*es},lon_2:function(n){t.long2=n*es},alpha:function(n){t.alpha=parseFloat(n)*es},gamma:function(n){t.rectified_grid_angle=parseFloat(n)},lonc:function(n){t.longc=n*es},x_0:function(n){t.x0=parseFloat(n)},y_0:function(n){t.y0=parseFloat(n)},k_0:function(n){t.k0=parseFloat(n)},k:function(n){t.k0=parseFloat(n)},a:function(n){t.a=parseFloat(n)},b:function(n){t.b=parseFloat(n)},r:function(n){t.a=t.b=parseFloat(n)},r_a:function(){t.R_A=!0},zone:function(n){t.zone=parseInt(n,10)},south:function(){t.utmSouth=!0},towgs84:function(n){t.datum_params=n.split(",").map(function(M){return parseFloat(M)})},to_meter:function(n){t.to_meter=parseFloat(n)},units:function(n){t.units=n;var M=ph(YY,n);M&&(t.to_meter=M.to_meter)},from_greenwich:function(n){t.from_greenwich=n*es},pm:function(n){var M=ph(la,n);t.from_greenwich=(M||parseFloat(n))*es},nadgrids:function(n){n==="@null"?t.datumCode="none":t.nadgrids=n},axis:function(n){var M="ewnsud";n.length===3&&M.indexOf(n.substr(0,1))!==-1&&M.indexOf(n.substr(1,1))!==-1&&M.indexOf(n.substr(2,1))!==-1&&(t.axis=n)},approx:function(){t.approx=!0}};for(s in r)l=r[s],s in y?(d=y[s],typeof d=="function"?d(l):t[d]=l):t[s]=l;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var Am=1,VA=2,qA=3,ly=4,HA=5,D6=-1,JY=/\s/,KY=/[A-Za-z]/,QY=/[A-Za-z84_]/,sv=/[,\]]/,GA=/[\d\.E\-\+]/;function ou(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Am}ou.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==ly)for(;JY.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Am:return this.neutral(e);case VA:return this.keyword(e);case ly:return this.quoted(e);case HA:return this.afterquote(e);case qA:return this.number(e);case D6:return}};ou.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=ly;return}if(sv.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};ou.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Am;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Am,this.currentObject=this.stack.pop(),this.currentObject||(this.state=D6);return}};ou.prototype.number=function(e){if(GA.test(e)){this.word+=e;return}if(sv.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};ou.prototype.quoted=function(e){if(e==='"'){this.state=HA;return}this.word+=e};ou.prototype.keyword=function(e){if(QY.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Am;return}if(sv.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};ou.prototype.neutral=function(e){if(KY.test(e)){this.word=e,this.state=VA;return}if(e==='"'){this.word="",this.state=ly;return}if(GA.test(e)){this.word=e,this.state=qA;return}if(sv.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};ou.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===D6)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function eJ(e){var t=new ou(e);return t.output()}function Jx(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var s=t?{}:e,l=r.reduce(function(d,y){return s1(y,d),d},s);t&&(e[t]=l)}function s1(e,t){if(!Array.isArray(e)){t[e]=!0;return}var r=e.shift();if(r==="PARAMETER"&&(r=e.shift()),e.length===1){if(Array.isArray(e[0])){t[r]={},s1(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=!0;return}if(r==="TOWGS84"){t[r]=e;return}if(r==="AXIS"){r in t||(t[r]=[]),t[r].push(e);return}Array.isArray(r)||(t[r]={});var s;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&s1(e[2],t[r]);return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]},e.length===4&&s1(e[3],t[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],Jx(t,r,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],Jx(t,r,e),t[r].type=r;return;default:for(s=-1;++s<e.length;)if(!Array.isArray(e[s]))return s1(e,t[r]);return Jx(t,r,e)}}var tJ=.017453292519943295,iJ=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rJ(e,t){var r=t[0],s=t[1];!(r in e)&&s in e&&(e[r]=e[s],t.length===3&&(e[r]=t[2](e[r])))}function dc(e){return e*tJ}function WA(e){for(var t=Object.keys(e),r=0,s=t.length;r<s;++r){var l=t[r];iJ.indexOf(l)!==-1&&nJ(e[l]),typeof e[l]=="object"&&WA(e[l])}}function nJ(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var r="",s=0,l=e.AXIS.length;s<l;++s){var d=[e.AXIS[s][0].toLowerCase(),e.AXIS[s][1].toLowerCase()];d[0].indexOf("north")!==-1||(d[0]==="y"||d[0]==="lat")&&d[1]==="north"?r+="n":d[0].indexOf("south")!==-1||(d[0]==="y"||d[0]==="lat")&&d[1]==="south"?r+="s":d[0].indexOf("east")!==-1||(d[0]==="x"||d[0]==="lon")&&d[1]==="east"?r+="e":(d[0].indexOf("west")!==-1||(d[0]==="x"||d[0]==="lon")&&d[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(e.axis=r)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var y=e.GEOGCS;e.type==="GEOGCS"&&(y=e),y&&(y.DATUM?e.datumCode=y.DATUM.name.toLowerCase():e.datumCode=y.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),y.DATUM&&y.DATUM.SPHEROID&&(e.ellps=y.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=y.DATUM.SPHEROID.a,e.rf=parseFloat(y.DATUM.SPHEROID.rf,10)),y.DATUM&&y.DATUM.TOWGS84&&(e.datum_params=y.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function n(L){var V=e.to_meter||1;return L*V}var M=function(L){return rJ(e,L)},P=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",dc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",dc],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",dc],["lat0","latitude_of_origin",dc],["lat0","standard_parallel_1",dc],["lat1","standard_parallel_1",dc],["lat2","standard_parallel_2",dc],["azimuth","Azimuth"],["alpha","azimuth",dc],["srsCode","name"]];P.forEach(M),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=dc(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=dc(e.lat0>0?90:-90))}function ZA(e){var t=eJ(e),r=t[0],s={};return s1(t,s),WA(s),s[r]}function Ls(e){var t=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?Ls[e]=Vb(arguments[1]):Ls[e]=ZA(arguments[1]):Ls[e]=r}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(s){Array.isArray(s)?Ls.apply(t,s):Ls(s)});if(typeof e=="string"){if(e in Ls)return Ls[e]}else"EPSG"in e?Ls["EPSG:"+e.EPSG]=e:"ESRI"in e?Ls["ESRI:"+e.ESRI]=e:"IAU2000"in e&&(Ls["IAU2000:"+e.IAU2000]=e);return}}qY(Ls);function oJ(e){return typeof e=="string"}function sJ(e){return e in Ls}var aJ=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function lJ(e){return aJ.some(function(t){return e.indexOf(t)>-1})}var cJ=["3857","900913","3785","102113"];function uJ(e){var t=ph(e,"authority");if(t){var r=ph(t,"epsg");return r&&cJ.indexOf(r)>-1}}function hJ(e){var t=ph(e,"extension");if(t)return ph(t,"proj4")}function dJ(e){return e[0]==="+"}function fJ(e){if(oJ(e)){if(sJ(e))return Ls[e];if(lJ(e)){var t=ZA(e);if(uJ(t))return Ls["EPSG:3857"];var r=hJ(t);return r?Vb(r):t}if(dJ(e))return Vb(e)}else return e}function XS(e,t){e=e||{};var r,s;if(!t)return e;for(s in t)r=t[s],r!==void 0&&(e[s]=r);return e}function Cc(e,t,r){var s=e*t;return r/Math.sqrt(1-s*s)}function tg(e){return e<0?-1:1}function Ai(e){return Math.abs(e)<=ao?e:e-tg(e)*Cm}function $l(e,t,r){var s=e*r,l=.5*e;return s=Math.pow((1-s)/(1+s),l),Math.tan(.5*(li-t))/s}function Im(e,t){for(var r=.5*e,s,l,d=li-2*Math.atan(t),y=0;y<=15;y++)if(s=e*Math.sin(d),l=li-2*Math.atan(t*Math.pow((1-s)/(1+s),r))-d,d+=l,Math.abs(l)<=1e-10)return d;return-9999}function pJ(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Cc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function mJ(e){var t=e.x,r=e.y;if(r*nh>90&&r*nh<-90&&t*nh>180&&t*nh<-180)return null;var s,l;if(Math.abs(Math.abs(r)-li)<=Ti)return null;if(this.sphere)s=this.x0+this.a*this.k0*Ai(t-this.long0),l=this.y0+this.a*this.k0*Math.log(Math.tan(pn+.5*r));else{var d=Math.sin(r),y=$l(this.e,r,d);s=this.x0+this.a*this.k0*Ai(t-this.long0),l=this.y0-this.a*this.k0*Math.log(y)}return e.x=s,e.y=l,e}function gJ(e){var t=e.x-this.x0,r=e.y-this.y0,s,l;if(this.sphere)l=li-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var d=Math.exp(-r/(this.a*this.k0));if(l=Im(this.e,d),l===-9999)return null}return s=Ai(this.long0+t/(this.a*this.k0)),e.x=s,e.y=l,e}var _J=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const yJ={init:pJ,forward:mJ,inverse:gJ,names:_J};function vJ(){}function YS(e){return e}var xJ=["longlat","identity"];const bJ={init:vJ,forward:YS,inverse:YS,names:xJ};var wJ=[yJ,bJ],T2={},cy=[];function XA(e,t){var r=cy.length;return e.names?(cy[r]=e,e.names.forEach(function(s){T2[s.toLowerCase()]=r}),this):!0}function SJ(e){if(!e)return!1;var t=e.toLowerCase();if(typeof T2[t]<"u"&&cy[T2[t]])return cy[T2[t]]}function MJ(){wJ.forEach(XA)}const EJ={start:MJ,add:XA,get:SJ};var fr={};fr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};fr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};fr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};fr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};fr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};fr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};fr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};fr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};fr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};fr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};fr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};fr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};fr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};fr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};fr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};fr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};fr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};fr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};fr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};fr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};fr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};fr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};fr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};fr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};fr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};fr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};fr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};fr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};fr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};fr.hough={a:6378270,rf:297,ellipseName:"Hough"};fr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};fr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};fr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};fr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};fr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};fr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};fr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};fr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};fr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};fr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};fr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};fr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var TJ=fr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};fr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function CJ(e,t,r,s){var l=e*e,d=t*t,y=(l-d)/l,n=0;s?(e*=1-y*(WY+y*(ZY+y*XY)),l=e*e,y=0):n=Math.sqrt(y);var M=(l-d)/d;return{es:y,e:n,ep2:M}}function AJ(e,t,r,s,l){if(!e){var d=ph(fr,s);d||(d=TJ),e=d.a,t=d.b,r=d.rf}return r&&!t&&(t=(1-1/r)*e),(r===0||Math.abs(e-t)<Ti)&&(l=!0,t=e),{a:e,b:t,rf:r,sphere:l}}var C2={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},militargeographische_institut:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var IJ in C2){var JS=C2[IJ];C2[JS.datumName]=JS}function zJ(e,t,r,s,l,d,y){var n={};return e===void 0||e==="none"?n.datum_type=Ub:n.datum_type=HY,t&&(n.datum_params=t.map(parseFloat),(n.datum_params[0]!==0||n.datum_params[1]!==0||n.datum_params[2]!==0)&&(n.datum_type=Ld),n.datum_params.length>3&&(n.datum_params[3]!==0||n.datum_params[4]!==0||n.datum_params[5]!==0||n.datum_params[6]!==0)&&(n.datum_type=Od,n.datum_params[3]*=rm,n.datum_params[4]*=rm,n.datum_params[5]*=rm,n.datum_params[6]=n.datum_params[6]/1e6+1)),y&&(n.datum_type=w1,n.grids=y),n.a=r,n.b=s,n.es=l,n.ep2=d,n}var YA={};function DJ(e,t){var r=new DataView(t),s=RJ(r),l=LJ(r,s),d=OJ(r,l,s),y={header:l,subgrids:d};return YA[e]=y,y}function PJ(e){if(e===void 0)return null;var t=e.split(",");return t.map(kJ)}function kJ(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:YA[e]||null,isNull:!1}}function a1(e){return e/3600*Math.PI/180}function RJ(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),!0)}function LJ(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:qb(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function qb(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function OJ(e,t,r){for(var s=176,l=[],d=0;d<t.nSubgrids;d++){var y=FJ(e,s,r),n=NJ(e,s,y,r),M=Math.round(1+(y.upperLongitude-y.lowerLongitude)/y.longitudeInterval),P=Math.round(1+(y.upperLatitude-y.lowerLatitude)/y.latitudeInterval);l.push({ll:[a1(y.lowerLongitude),a1(y.lowerLatitude)],del:[a1(y.longitudeInterval),a1(y.latitudeInterval)],lim:[M,P],count:y.gridNodeCount,cvs:BJ(n)}),s+=176+y.gridNodeCount*16}return l}function BJ(e){return e.map(function(t){return[a1(t.longitudeShift),a1(t.latitudeShift)]})}function FJ(e,t,r){return{name:qb(e,t+8,t+16).trim(),parent:qb(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function NJ(e,t,r,s){for(var l=t+176,d=16,y=[],n=0;n<r.gridNodeCount;n++){var M={latitudeShift:e.getFloat32(l+n*d,s),longitudeShift:e.getFloat32(l+n*d+4,s),latitudeAccuracy:e.getFloat32(l+n*d+8,s),longitudeAccuracy:e.getFloat32(l+n*d+12,s)};y.push(M)}return y}function Sc(e,t){if(!(this instanceof Sc))return new Sc(e);t=t||function(P){if(P)throw P};var r=fJ(e);if(typeof r!="object"){t("Could not parse to valid json: "+e);return}var s=Sc.projections.get(r.projName);if(!s){t("Could not get projection name from: "+e);return}if(r.datumCode&&r.datumCode!=="none"){var l=ph(C2,r.datumCode);l&&(r.datum_params=r.datum_params||(l.towgs84?l.towgs84.split(","):null),r.ellps=l.ellipse,r.datumName=l.datumName?l.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var d=AJ(r.a,r.b,r.rf,r.ellps,r.sphere),y=CJ(d.a,d.b,d.rf,r.R_A),n=PJ(r.nadgrids),M=r.datum||zJ(r.datumCode,r.datum_params,d.a,d.b,y.es,y.ep2,n);XS(this,r),XS(this,s),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=y.es,this.e=y.e,this.ep2=y.ep2,this.datum=M,this.init(),t(null,this)}Sc.projections=EJ;Sc.projections.start();function $J(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===Ld?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Od?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function JA(e,t,r){var s=e.x,l=e.y,d=e.z?e.z:0,y,n,M,P;if(l<-li&&l>-1.001*li)l=-li;else if(l>li&&l<1.001*li)l=li;else{if(l<-li)return{x:-1/0,y:-1/0,z:e.z};if(l>li)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),n=Math.sin(l),P=Math.cos(l),M=n*n,y=r/Math.sqrt(1-t*M),{x:(y+d)*P*Math.cos(s),y:(y+d)*P*Math.sin(s),z:(y*(1-t)+d)*n}}function KA(e,t,r,s){var l=1e-12,d=l*l,y=30,n,M,P,L,V,X,J,Z,ie,ae,de,fe,le,he=e.x,Ce=e.y,Le=e.z?e.z:0,Ae,We,Qe;if(n=Math.sqrt(he*he+Ce*Ce),M=Math.sqrt(he*he+Ce*Ce+Le*Le),n/r<l){if(Ae=0,M/r<l)return We=li,Qe=-s,{x:e.x,y:e.y,z:e.z}}else Ae=Math.atan2(Ce,he);P=Le/M,L=n/M,V=1/Math.sqrt(1-t*(2-t)*L*L),Z=L*(1-t)*V,ie=P*V,le=0;do le++,J=r/Math.sqrt(1-t*ie*ie),Qe=n*Z+Le*ie-J*(1-t*ie*ie),X=t*J/(J+Qe),V=1/Math.sqrt(1-X*(2-X)*L*L),ae=L*(1-X)*V,de=P*V,fe=de*Z-ae*ie,Z=ae,ie=de;while(fe*fe>d&&le<y);return We=Math.atan(de/Math.abs(ae)),{x:Ae,y:We,z:Qe}}function jJ(e,t,r){if(t===Ld)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===Od){var s=r[0],l=r[1],d=r[2],y=r[3],n=r[4],M=r[5],P=r[6];return{x:P*(e.x-M*e.y+n*e.z)+s,y:P*(M*e.x+e.y-y*e.z)+l,z:P*(-n*e.x+y*e.y+e.z)+d}}}function UJ(e,t,r){if(t===Ld)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===Od){var s=r[0],l=r[1],d=r[2],y=r[3],n=r[4],M=r[5],P=r[6],L=(e.x-s)/P,V=(e.y-l)/P,X=(e.z-d)/P;return{x:L+M*V-n*X,y:-M*L+V+y*X,z:n*L-y*V+X}}}function e2(e){return e===Ld||e===Od}function VJ(e,t,r){if($J(e,t)||e.datum_type===Ub||t.datum_type===Ub)return r;var s=e.a,l=e.es;if(e.datum_type===w1){var d=KS(e,!1,r);if(d!==0)return;s=GS,l=WS}var y=t.a,n=t.b,M=t.es;if(t.datum_type===w1&&(y=GS,n=GY,M=WS),l===M&&s===y&&!e2(e.datum_type)&&!e2(t.datum_type))return r;if(r=JA(r,l,s),e2(e.datum_type)&&(r=jJ(r,e.datum_type,e.datum_params)),e2(t.datum_type)&&(r=UJ(r,t.datum_type,t.datum_params)),r=KA(r,M,y,n),t.datum_type===w1){var P=KS(t,!0,r);if(P!==0)return}return r}function KS(e,t,r){if(e.grids===null||e.grids.length===0)return-1;var s={x:-r.x,y:r.y},l={x:Number.NaN,y:Number.NaN},d=[];e:for(var y=0;y<e.grids.length;y++){var n=e.grids[y];if(d.push(n.name),n.isNull){l=s;break}if(n.mandatory,n.grid===null){if(n.mandatory)return-1;continue}for(var M=n.grid.subgrids,P=0,L=M.length;P<L;P++){var V=M[P],X=(Math.abs(V.del[1])+Math.abs(V.del[0]))/1e4,J=V.ll[0]-X,Z=V.ll[1]-X,ie=V.ll[0]+(V.lim[0]-1)*V.del[0]+X,ae=V.ll[1]+(V.lim[1]-1)*V.del[1]+X;if(!(Z>s.y||J>s.x||ae<s.y||ie<s.x)&&(l=qJ(s,t,V),!isNaN(l.x)))break e}}return isNaN(l.x)?-1:(r.x=-l.x,r.y=l.y,0)}function qJ(e,t,r){var s={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return s;var l={x:e.x,y:e.y};l.x-=r.ll[0],l.y-=r.ll[1],l.x=Ai(l.x-Math.PI)+Math.PI;var d=QS(l,r);if(t){if(isNaN(d.x))return s;d.x=l.x-d.x,d.y=l.y-d.y;var y=9,n=1e-12,M,P;do{if(P=QS(d,r),isNaN(P.x))break;M={x:l.x-(P.x+d.x),y:l.y-(P.y+d.y)},d.x+=M.x,d.y+=M.y}while(y--&&Math.abs(M.x)>n&&Math.abs(M.y)>n);if(y<0)return s;s.x=Ai(d.x+r.ll[0]),s.y=d.y+r.ll[1]}else isNaN(d.x)||(s.x=e.x+d.x,s.y=e.y+d.y);return s}function QS(e,t){var r={x:e.x/t.del[0],y:e.y/t.del[1]},s={x:Math.floor(r.x),y:Math.floor(r.y)},l={x:r.x-1*s.x,y:r.y-1*s.y},d={x:Number.NaN,y:Number.NaN},y;if(s.x<0||s.x>=t.lim[0]||s.y<0||s.y>=t.lim[1])return d;y=s.y*t.lim[0]+s.x;var n={x:t.cvs[y][0],y:t.cvs[y][1]};y++;var M={x:t.cvs[y][0],y:t.cvs[y][1]};y+=t.lim[0];var P={x:t.cvs[y][0],y:t.cvs[y][1]};y--;var L={x:t.cvs[y][0],y:t.cvs[y][1]},V=l.x*l.y,X=l.x*(1-l.y),J=(1-l.x)*(1-l.y),Z=(1-l.x)*l.y;return d.x=J*n.x+X*M.x+Z*L.x+V*P.x,d.y=J*n.y+X*M.y+Z*L.y+V*P.y,d}function eM(e,t,r){var s=r.x,l=r.y,d=r.z||0,y,n,M,P={};for(M=0;M<3;M++)if(!(t&&M===2&&r.z===void 0))switch(M===0?(y=s,"ew".indexOf(e.axis[M])!==-1?n="x":n="y"):M===1?(y=l,"ns".indexOf(e.axis[M])!==-1?n="y":n="x"):(y=d,n="z"),e.axis[M]){case"e":P[n]=y;break;case"w":P[n]=-y;break;case"n":P[n]=y;break;case"s":P[n]=-y;break;case"u":r[n]!==void 0&&(P.z=y);break;case"d":r[n]!==void 0&&(P.z=-y);break;default:return null}return P}function QA(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function HJ(e){tM(e.x),tM(e.y)}function tM(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function GJ(e,t){return(e.datum.datum_type===Ld||e.datum.datum_type===Od||e.datum.datum_type===w1)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Ld||t.datum.datum_type===Od||t.datum.datum_type===w1)&&e.datumCode!=="WGS84"}function uy(e,t,r,s){var l;Array.isArray(r)?r=QA(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var d=r.z!==void 0;if(HJ(r),e.datum&&t.datum&&GJ(e,t)&&(l=new Sc("WGS84"),r=uy(e,l,r,s),e=l),s&&e.axis!=="enu"&&(r=eM(e,!1,r)),e.projName==="longlat")r={x:r.x*es,y:r.y*es,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r),!r)return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=VJ(e.datum,t.datum,r),!!r)return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),t.projName==="longlat"?r={x:r.x*nh,y:r.y*nh,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),s&&t.axis!=="enu"?eM(t,!0,r):(r&&!d&&delete r.z,r)}var iM=Sc("WGS84");function Kx(e,t,r,s){var l,d,y;return Array.isArray(r)?(l=uy(e,t,r,s)||{x:NaN,y:NaN},r.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof l.z=="number"?[l.x,l.y,l.z].concat(r.slice(3)):[l.x,l.y,r[2]].concat(r.slice(3)):[l.x,l.y].concat(r.slice(2)):[l.x,l.y]):(d=uy(e,t,r,s),y=Object.keys(r),y.length===2||y.forEach(function(n){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(n==="x"||n==="y"||n==="z")return}else if(n==="x"||n==="y")return;d[n]=r[n]}),d)}function rM(e){return e instanceof Sc?e:e.oProj?e.oProj:Sc(e)}function rl(e,t,r){e=rM(e);var s=!1,l;return typeof t>"u"?(t=e,e=iM,s=!0):(typeof t.x<"u"||Array.isArray(t))&&(r=t,t=e,e=iM,s=!0),t=rM(t),r?Kx(e,t,r):(l={forward:function(d,y){return Kx(e,t,d,y)},inverse:function(d,y){return Kx(t,e,d,y)}},s&&(l.oProj=t),l)}var nM=6,eI="AJSAJS",tI="AFAFAF",l1=65,ta=73,tl=79,W0=86,Z0=90;const WJ={forward:iI,inverse:ZJ,toPoint:rI};function iI(e,t){return t=t||5,JJ(XJ({lat:e[1],lon:e[0]}),t)}function ZJ(e){var t=P6(oI(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function rI(e){var t=P6(oI(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Qx(e){return e*(Math.PI/180)}function oM(e){return 180*(e/Math.PI)}function XJ(e){var t=e.lat,r=e.lon,s=6378137,l=.00669438,d=.9996,y,n,M,P,L,V,X,J=Qx(t),Z=Qx(r),ie,ae;ae=Math.floor((r+180)/6)+1,r===180&&(ae=60),t>=56&&t<64&&r>=3&&r<12&&(ae=32),t>=72&&t<84&&(r>=0&&r<9?ae=31:r>=9&&r<21?ae=33:r>=21&&r<33?ae=35:r>=33&&r<42&&(ae=37)),y=(ae-1)*6-180+3,ie=Qx(y),n=l/(1-l),M=s/Math.sqrt(1-l*Math.sin(J)*Math.sin(J)),P=Math.tan(J)*Math.tan(J),L=n*Math.cos(J)*Math.cos(J),V=Math.cos(J)*(Z-ie),X=s*((1-l/4-3*l*l/64-5*l*l*l/256)*J-(3*l/8+3*l*l/32+45*l*l*l/1024)*Math.sin(2*J)+(15*l*l/256+45*l*l*l/1024)*Math.sin(4*J)-35*l*l*l/3072*Math.sin(6*J));var de=d*M*(V+(1-P+L)*V*V*V/6+(5-18*P+P*P+72*L-58*n)*V*V*V*V*V/120)+5e5,fe=d*(X+M*Math.tan(J)*(V*V/2+(5-P+9*L+4*L*L)*V*V*V*V/24+(61-58*P+P*P+600*L-330*n)*V*V*V*V*V*V/720));return t<0&&(fe+=1e7),{northing:Math.round(fe),easting:Math.round(de),zoneNumber:ae,zoneLetter:YJ(t)}}function P6(e){var t=e.northing,r=e.easting,s=e.zoneLetter,l=e.zoneNumber;if(l<0||l>60)return null;var d=.9996,y=6378137,n=.00669438,M,P=(1-Math.sqrt(1-n))/(1+Math.sqrt(1-n)),L,V,X,J,Z,ie,ae,de,fe,le=r-5e5,he=t;s<"N"&&(he-=1e7),ae=(l-1)*6-180+3,M=n/(1-n),ie=he/d,de=ie/(y*(1-n/4-3*n*n/64-5*n*n*n/256)),fe=de+(3*P/2-27*P*P*P/32)*Math.sin(2*de)+(21*P*P/16-55*P*P*P*P/32)*Math.sin(4*de)+151*P*P*P/96*Math.sin(6*de),L=y/Math.sqrt(1-n*Math.sin(fe)*Math.sin(fe)),V=Math.tan(fe)*Math.tan(fe),X=M*Math.cos(fe)*Math.cos(fe),J=y*(1-n)/Math.pow(1-n*Math.sin(fe)*Math.sin(fe),1.5),Z=le/(L*d);var Ce=fe-L*Math.tan(fe)/J*(Z*Z/2-(5+3*V+10*X-4*X*X-9*M)*Z*Z*Z*Z/24+(61+90*V+298*X+45*V*V-252*M-3*X*X)*Z*Z*Z*Z*Z*Z/720);Ce=oM(Ce);var Le=(Z-(1+2*V+X)*Z*Z*Z/6+(5-2*X+28*V-3*X*X+8*M+24*V*V)*Z*Z*Z*Z*Z/120)/Math.cos(fe);Le=ae+oM(Le);var Ae;if(e.accuracy){var We=P6({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});Ae={top:We.lat,right:We.lon,bottom:Ce,left:Le}}else Ae={lat:Ce,lon:Le};return Ae}function YJ(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function JJ(e,t){var r="00000"+e.easting,s="00000"+e.northing;return e.zoneNumber+e.zoneLetter+KJ(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+s.substr(s.length-5,t)}function KJ(e,t,r){var s=nI(r),l=Math.floor(e/1e5),d=Math.floor(t/1e5)%20;return QJ(l,d,s)}function nI(e){var t=e%nM;return t===0&&(t=nM),t}function QJ(e,t,r){var s=r-1,l=eI.charCodeAt(s),d=tI.charCodeAt(s),y=l+e-1,n=d+t,M=!1;y>Z0&&(y=y-Z0+l1-1,M=!0),(y===ta||l<ta&&y>ta||(y>ta||l<ta)&&M)&&y++,(y===tl||l<tl&&y>tl||(y>tl||l<tl)&&M)&&(y++,y===ta&&y++),y>Z0&&(y=y-Z0+l1-1),n>W0?(n=n-W0+l1-1,M=!0):M=!1,(n===ta||d<ta&&n>ta||(n>ta||d<ta)&&M)&&n++,(n===tl||d<tl&&n>tl||(n>tl||d<tl)&&M)&&(n++,n===ta&&n++),n>W0&&(n=n-W0+l1-1);var P=String.fromCharCode(y)+String.fromCharCode(n);return P}function oI(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,r=null,s="",l,d=0;!/[A-Z]/.test(l=e.charAt(d));){if(d>=2)throw"MGRSPoint bad conversion from: "+e;s+=l,d++}var y=parseInt(s,10);if(d===0||d+3>t)throw"MGRSPoint bad conversion from: "+e;var n=e.charAt(d++);if(n<="A"||n==="B"||n==="Y"||n>="Z"||n==="I"||n==="O")throw"MGRSPoint zone letter "+n+" not handled: "+e;r=e.substring(d,d+=2);for(var M=nI(y),P=eK(r.charAt(0),M),L=tK(r.charAt(1),M);L<iK(n);)L+=2e6;var V=t-d;if(V%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var X=V/2,J=0,Z=0,ie,ae,de,fe,le;return X>0&&(ie=1e5/Math.pow(10,X),ae=e.substring(d,d+X),J=parseFloat(ae)*ie,de=e.substring(d+X),Z=parseFloat(de)*ie),fe=J+P,le=Z+L,{easting:fe,northing:le,zoneLetter:n,zoneNumber:y,accuracy:ie}}function eK(e,t){for(var r=eI.charCodeAt(t-1),s=1e5,l=!1;r!==e.charCodeAt(0);){if(r++,r===ta&&r++,r===tl&&r++,r>Z0){if(l)throw"Bad character: "+e;r=l1,l=!0}s+=1e5}return s}function tK(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=tI.charCodeAt(t-1),s=0,l=!1;r!==e.charCodeAt(0);){if(r++,r===ta&&r++,r===tl&&r++,r>W0){if(l)throw"Bad character: "+e;r=l1,l=!0}s+=1e5}return s}function iK(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function L1(e,t,r){if(!(this instanceof L1))return new L1(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var s=e.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=e,this.y=t,this.z=r||0}L1.fromMGRS=function(e){return new L1(rI(e))};L1.prototype.toMGRS=function(e){return iI([this.x,this.y],e)};var rK=1,nK=.25,sM=.046875,aM=.01953125,lM=.01068115234375,oK=.75,sK=.46875,aK=.013020833333333334,lK=.007120768229166667,cK=.3645833333333333,uK=.005696614583333333,hK=.3076171875;function k6(e){var t=[];t[0]=rK-e*(nK+e*(sM+e*(aM+e*lM))),t[1]=e*(oK-e*(sM+e*(aM+e*lM)));var r=e*e;return t[2]=r*(sK-e*(aK+e*lK)),r*=e,t[3]=r*(cK-e*uK),t[4]=r*e*hK,t}function ip(e,t,r,s){return r*=t,t*=t,s[0]*e-r*(s[1]+t*(s[2]+t*(s[3]+t*s[4])))}var dK=20;function R6(e,t,r){for(var s=1/(1-t),l=e,d=dK;d;--d){var y=Math.sin(l),n=1-t*y*y;if(n=(ip(l,y,Math.cos(l),r)-e)*(n*Math.sqrt(n))*s,l-=n,Math.abs(n)<Ti)return l}return l}function fK(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=k6(this.es),this.ml0=ip(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function pK(e){var t=e.x,r=e.y,s=Ai(t-this.long0),l,d,y,n=Math.sin(r),M=Math.cos(r);if(this.es){var L=M*s,V=Math.pow(L,2),X=this.ep2*Math.pow(M,2),J=Math.pow(X,2),Z=Math.abs(M)>Ti?Math.tan(r):0,ie=Math.pow(Z,2),ae=Math.pow(ie,2);l=1-this.es*Math.pow(n,2),L=L/Math.sqrt(l);var de=ip(r,n,M,this.en);d=this.a*(this.k0*L*(1+V/6*(1-ie+X+V/20*(5-18*ie+ae+14*X-58*ie*X+V/42*(61+179*ae-ae*ie-479*ie)))))+this.x0,y=this.a*(this.k0*(de-this.ml0+n*s*L/2*(1+V/12*(5-ie+9*X+4*J+V/30*(61+ae-58*ie+270*X-330*ie*X+V/56*(1385+543*ae-ae*ie-3111*ie))))))+this.y0}else{var P=M*Math.sin(s);if(Math.abs(Math.abs(P)-1)<Ti)return 93;if(d=.5*this.a*this.k0*Math.log((1+P)/(1-P))+this.x0,y=M*Math.cos(s)/Math.sqrt(1-Math.pow(P,2)),P=Math.abs(y),P>=1){if(P-1>Ti)return 93;y=0}else y=Math.acos(y);r<0&&(y=-y),y=this.a*this.k0*(y-this.lat0)+this.y0}return e.x=d,e.y=y,e}function mK(e){var t,r,s,l,d=(e.x-this.x0)*(1/this.a),y=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+y/this.k0,r=R6(t,this.es,this.en),Math.abs(r)<li){var V=Math.sin(r),X=Math.cos(r),J=Math.abs(X)>Ti?Math.tan(r):0,Z=this.ep2*Math.pow(X,2),ie=Math.pow(Z,2),ae=Math.pow(J,2),de=Math.pow(ae,2);t=1-this.es*Math.pow(V,2);var fe=d*Math.sqrt(t)/this.k0,le=Math.pow(fe,2);t=t*J,s=r-t*le/(1-this.es)*.5*(1-le/12*(5+3*ae-9*Z*ae+Z-4*ie-le/30*(61+90*ae-252*Z*ae+45*de+46*Z-le/56*(1385+3633*ae+4095*de+1574*de*ae)))),l=Ai(this.long0+fe*(1-le/6*(1+2*ae+Z-le/20*(5+28*ae+24*de+8*Z*ae+6*Z-le/42*(61+662*ae+1320*de+720*de*ae))))/X)}else s=li*tg(y),l=0;else{var n=Math.exp(d/this.k0),M=.5*(n-1/n),P=this.lat0+y/this.k0,L=Math.cos(P);t=Math.sqrt((1-Math.pow(L,2))/(1+Math.pow(M,2))),s=Math.asin(t),y<0&&(s=-s),M===0&&L===0?l=0:l=Ai(Math.atan2(M,L)+this.long0)}return e.x=l,e.y=s,e}var gK=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const A2={init:fK,forward:pK,inverse:mK,names:gK};function sI(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function ra(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),s=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(s,2))}function _K(e){var t=1+e,r=t-1;return r===0?e:e*Math.log(t)/r}function yK(e){var t=Math.abs(e);return t=_K(t*(1+t/(ra(1,t)+1))),e<0?-t:t}function L6(e,t){for(var r=2*Math.cos(2*t),s=e.length-1,l=e[s],d=0,y;--s>=0;)y=-d+r*l+e[s],d=l,l=y;return t+y*Math.sin(2*t)}function vK(e,t){for(var r=2*Math.cos(t),s=e.length-1,l=e[s],d=0,y;--s>=0;)y=-d+r*l+e[s],d=l,l=y;return Math.sin(t)*y}function xK(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function aI(e,t,r){for(var s=Math.sin(t),l=Math.cos(t),d=sI(r),y=xK(r),n=2*l*y,M=-2*s*d,P=e.length-1,L=e[P],V=0,X=0,J=0,Z,ie;--P>=0;)Z=X,ie=V,X=L,V=J,L=-Z+n*X-M*V+e[P],J=-ie+M*X+n*V;return n=s*y,M=l*d,[n*L-M*J,n*J+M*L]}function bK(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(A2.init.apply(this),this.forward=A2.forward,this.inverse=A2.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),r=r*t,this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r=r*t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),r=r*t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175))),r=r*t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r=r*t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),r=r*t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r=r*t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r=r*t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r=r*t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var s=L6(this.cbg,this.lat0);this.Zb=-this.Qn*(s+vK(this.gtu,2*s))}function wK(e){var t=Ai(e.x-this.long0),r=e.y;r=L6(this.cbg,r);var s=Math.sin(r),l=Math.cos(r),d=Math.sin(t),y=Math.cos(t);r=Math.atan2(s,y*l),t=Math.atan2(d*l,ra(s,l*y)),t=yK(Math.tan(t));var n=aI(this.gtu,2*r,2*t);r=r+n[0],t=t+n[1];var M,P;return Math.abs(t)<=2.623395162778?(M=this.a*(this.Qn*t)+this.x0,P=this.a*(this.Qn*r+this.Zb)+this.y0):(M=1/0,P=1/0),e.x=M,e.y=P,e}function SK(e){var t=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,t=t/this.Qn;var s,l;if(Math.abs(t)<=2.623395162778){var d=aI(this.utg,2*r,2*t);r=r+d[0],t=t+d[1],t=Math.atan(sI(t));var y=Math.sin(r),n=Math.cos(r),M=Math.sin(t),P=Math.cos(t);r=Math.atan2(y*P,ra(M,P*n)),t=Math.atan2(M,P*n),s=Ai(t+this.long0),l=L6(this.cgb,r)}else s=1/0,l=1/0;return e.x=s,e.y=l,e}var MK=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const I2={init:bK,forward:wK,inverse:SK,names:MK};function EK(e,t){if(e===void 0){if(e=Math.floor((Ai(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var TK="etmerc";function CK(){var e=EK(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*es,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,I2.init.apply(this),this.forward=I2.forward,this.inverse=I2.inverse}var AK=["Universal Transverse Mercator System","utm"];const IK={init:CK,names:AK,dependsOn:TK};function O6(e,t){return Math.pow((1-e)/(1+e),t)}var zK=20;function DK(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+pn)/(Math.pow(Math.tan(.5*this.lat0+pn),this.C)*O6(this.e*e,this.ratexp))}function PK(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+pn),this.C)*O6(this.e*Math.sin(r),this.ratexp))-li,e.x=this.C*t,e}function kK(e){for(var t=1e-14,r=e.x/this.C,s=e.y,l=Math.pow(Math.tan(.5*s+pn)/this.K,1/this.C),d=zK;d>0&&(s=2*Math.atan(l*O6(this.e*Math.sin(e.y),-.5*this.e))-li,!(Math.abs(s-e.y)<t));--d)e.y=s;return d?(e.x=r,e.y=s,e):null}var RK=["gauss"];const B6={init:DK,forward:PK,inverse:kK,names:RK};function LK(){B6.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function OK(e){var t,r,s,l;return e.x=Ai(e.x-this.long0),B6.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),s=Math.cos(e.x),l=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*s),e.x=l*r*Math.sin(e.x),e.y=l*(this.cosc0*t-this.sinc0*r*s),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function BK(e){var t,r,s,l,d;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,d=ra(e.x,e.y)){var y=2*Math.atan2(d,this.R2);t=Math.sin(y),r=Math.cos(y),l=Math.asin(r*this.sinc0+e.y*t*this.cosc0/d),s=Math.atan2(e.x*t,d*this.cosc0*r-e.y*this.sinc0*t)}else l=this.phic0,s=0;return e.x=s,e.y=l,B6.inverse.apply(this,[e]),e.x=Ai(e.x+this.long0),e}var FK=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const NK={init:LK,forward:OK,inverse:BK,names:FK};function $K(e,t,r){return t*=r,Math.tan(.5*(li+e))*Math.pow((1-t)/(1+t),.5*r)}function jK(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ti&&(this.k0=.5*(1+tg(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ti&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ti&&Math.abs(Math.cos(this.lat_ts))>Ti&&(this.k0=.5*this.cons*Cc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/$l(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Cc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-li,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function UK(e){var t=e.x,r=e.y,s=Math.sin(r),l=Math.cos(r),d,y,n,M,P,L,V=Ai(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Ti&&Math.abs(r+this.lat0)<=Ti?(e.x=NaN,e.y=NaN,e):this.sphere?(d=2*this.k0/(1+this.sinlat0*s+this.coslat0*l*Math.cos(V)),e.x=this.a*d*l*Math.sin(V)+this.x0,e.y=this.a*d*(this.coslat0*s-this.sinlat0*l*Math.cos(V))+this.y0,e):(y=2*Math.atan(this.ssfn_(r,s,this.e))-li,M=Math.cos(y),n=Math.sin(y),Math.abs(this.coslat0)<=Ti?(P=$l(this.e,r*this.con,this.con*s),L=2*this.a*this.k0*P/this.cons,e.x=this.x0+L*Math.sin(t-this.long0),e.y=this.y0-this.con*L*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Ti?(d=2*this.a*this.k0/(1+M*Math.cos(V)),e.y=d*n):(d=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*M*Math.cos(V))),e.y=d*(this.cosX0*n-this.sinX0*M*Math.cos(V))+this.y0),e.x=d*M*Math.sin(V)+this.x0,e))}function VK(e){e.x-=this.x0,e.y-=this.y0;var t,r,s,l,d,y=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var n=2*Math.atan(y/(2*this.a*this.k0));return t=this.long0,r=this.lat0,y<=Ti?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(n)*this.sinlat0+e.y*Math.sin(n)*this.coslat0/y),Math.abs(this.coslat0)<Ti?this.lat0>0?t=Ai(this.long0+Math.atan2(e.x,-1*e.y)):t=Ai(this.long0+Math.atan2(e.x,e.y)):t=Ai(this.long0+Math.atan2(e.x*Math.sin(n),y*this.coslat0*Math.cos(n)-e.y*this.sinlat0*Math.sin(n))),e.x=t,e.y=r,e)}else if(Math.abs(this.coslat0)<=Ti){if(y<=Ti)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,s=y*this.cons/(2*this.a*this.k0),r=this.con*Im(this.e,s),t=this.con*Ai(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else l=2*Math.atan(y*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,y<=Ti?d=this.X0:(d=Math.asin(Math.cos(l)*this.sinX0+e.y*Math.sin(l)*this.cosX0/y),t=Ai(this.long0+Math.atan2(e.x*Math.sin(l),y*this.cosX0*Math.cos(l)-e.y*this.sinX0*Math.sin(l)))),r=-1*Im(this.e,Math.tan(.5*(li+d)));return e.x=t,e.y=r,e}var qK=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const HK={init:jK,forward:UK,inverse:VK,names:qK,ssfn_:$K};function GK(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,s=this.rf,l=1/s,d=2*l-Math.pow(l,2),y=this.e=Math.sqrt(d);this.R=this.k0*r*Math.sqrt(1-d)/(1-d*Math.pow(t,2)),this.alpha=Math.sqrt(1+d/(1-d)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),M=Math.log(Math.tan(Math.PI/4+e/2)),P=Math.log((1+y*t)/(1-y*t));this.K=n-this.alpha*M+this.alpha*y/2*P}function WK(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),s=-this.alpha*(t+r)+this.K,l=2*(Math.atan(Math.exp(s))-Math.PI/4),d=this.alpha*(e.x-this.lambda0),y=Math.atan(Math.sin(d)/(Math.sin(this.b0)*Math.tan(l)+Math.cos(this.b0)*Math.cos(d))),n=Math.asin(Math.cos(this.b0)*Math.sin(l)-Math.sin(this.b0)*Math.cos(l)*Math.cos(d));return e.y=this.R/2*Math.log((1+Math.sin(n))/(1-Math.sin(n)))+this.y0,e.x=this.R*y+this.x0,e}function ZK(e){for(var t=e.x-this.x0,r=e.y-this.y0,s=t/this.R,l=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),d=Math.asin(Math.cos(this.b0)*Math.sin(l)+Math.sin(this.b0)*Math.cos(l)*Math.cos(s)),y=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(l))),n=this.lambda0+y/this.alpha,M=0,P=d,L=-1e3,V=0;Math.abs(P-L)>1e-7;){if(++V>20)return;M=1/this.alpha*(Math.log(Math.tan(Math.PI/4+d/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(P))/2)),L=P,P=2*Math.atan(Math.exp(M))-Math.PI/2}return e.x=n,e.y=P,e}var XK=["somerc"];const YK={init:GK,forward:WK,inverse:ZK,names:XK};var i1=1e-7;function JK(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(r)!==-1}function KK(){var e,t,r,s,l,d,y,n,M,P,L=0,V,X=0,J=0,Z=0,ie=0,ae=0,de=0;this.no_off=JK(this),this.no_rot="no_rot"in this;var fe=!1;"alpha"in this&&(fe=!0);var le=!1;if("rectified_grid_angle"in this&&(le=!0),fe&&(de=this.alpha),le&&(L=this.rectified_grid_angle*es),fe||le)X=this.longc;else if(J=this.long1,ie=this.lat1,Z=this.long2,ae=this.lat2,Math.abs(ie-ae)<=i1||(e=Math.abs(ie))<=i1||Math.abs(e-li)<=i1||Math.abs(Math.abs(this.lat0)-li)<=i1||Math.abs(Math.abs(ae)-li)<=i1)throw new Error;var he=1-this.es;t=Math.sqrt(he),Math.abs(this.lat0)>Ti?(n=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*n*n,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/he),this.A=this.B*this.k0*t/e,s=this.B*t/(r*Math.sqrt(e)),l=s*s-1,l<=0?l=0:(l=Math.sqrt(l),this.lat0<0&&(l=-l)),this.E=l+=s,this.E*=Math.pow($l(this.e,this.lat0,n),this.B)):(this.B=1/t,this.A=this.k0,this.E=s=l=1),fe||le?(fe?(V=Math.asin(Math.sin(de)/s),le||(L=de)):(V=L,de=Math.asin(s*Math.sin(V))),this.lam0=X-Math.asin(.5*(l-1/l)*Math.tan(V))/this.B):(d=Math.pow($l(this.e,ie,Math.sin(ie)),this.B),y=Math.pow($l(this.e,ae,Math.sin(ae)),this.B),l=this.E/d,M=(y-d)/(y+d),P=this.E*this.E,P=(P-y*d)/(P+y*d),e=J-Z,e<-Math.pi?Z-=Cm:e>Math.pi&&(Z+=Cm),this.lam0=Ai(.5*(J+Z)-Math.atan(P*Math.tan(.5*this.B*(J-Z))/M)/this.B),V=Math.atan(2*Math.sin(this.B*Ai(J-this.lam0))/(l-1/l)),L=de=Math.asin(s*Math.sin(V))),this.singam=Math.sin(V),this.cosgam=Math.cos(V),this.sinrot=Math.sin(L),this.cosrot=Math.cos(L),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(de))),this.lat0<0&&(this.u_0=-this.u_0)),l=.5*V,this.v_pole_n=this.ArB*Math.log(Math.tan(pn-l)),this.v_pole_s=this.ArB*Math.log(Math.tan(pn+l))}function QK(e){var t={},r,s,l,d,y,n,M,P;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-li)>Ti){if(y=this.E/Math.pow($l(this.e,e.y,Math.sin(e.y)),this.B),n=1/y,r=.5*(y-n),s=.5*(y+n),d=Math.sin(this.B*e.x),l=(r*this.singam-d*this.cosgam)/s,Math.abs(Math.abs(l)-1)<Ti)throw new Error;P=.5*this.ArB*Math.log((1-l)/(1+l)),n=Math.cos(this.B*e.x),Math.abs(n)<i1?M=this.A*e.x:M=this.ArB*Math.atan2(r*this.cosgam+d*this.singam,n)}else P=e.y>0?this.v_pole_n:this.v_pole_s,M=this.ArB*e.y;return this.no_rot?(t.x=M,t.y=P):(M-=this.u_0,t.x=P*this.cosrot+M*this.sinrot,t.y=M*this.cosrot-P*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function eQ(e){var t,r,s,l,d,y,n,M={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),s=Math.exp(-this.BrA*r),l=.5*(s-1/s),d=.5*(s+1/s),y=Math.sin(this.BrA*t),n=(y*this.cosgam+l*this.singam)/d,Math.abs(Math.abs(n)-1)<Ti)M.x=0,M.y=n<0?-li:li;else{if(M.y=this.E/Math.sqrt((1+n)/(1-n)),M.y=Im(this.e,Math.pow(M.y,1/this.B)),M.y===1/0)throw new Error;M.x=-this.rB*Math.atan2(l*this.cosgam-y*this.singam,Math.cos(this.BrA*t))}return M.x+=this.lam0,M}var tQ=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const iQ={init:KK,forward:QK,inverse:eQ,names:tQ};function rQ(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ti)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),s=Cc(this.e,t,r),l=$l(this.e,this.lat1,t),d=Math.sin(this.lat2),y=Math.cos(this.lat2),n=Cc(this.e,d,y),M=$l(this.e,this.lat2,d),P=$l(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ti?this.ns=Math.log(s/n)/Math.log(l/M):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=s/(this.ns*Math.pow(l,this.ns)),this.rh=this.a*this.f0*Math.pow(P,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function nQ(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=Ti&&(r=tg(r)*(li-2*Ti));var s=Math.abs(Math.abs(r)-li),l,d;if(s>Ti)l=$l(this.e,r,Math.sin(r)),d=this.a*this.f0*Math.pow(l,this.ns);else{if(s=r*this.ns,s<=0)return null;d=0}var y=this.ns*Ai(t-this.long0);return e.x=this.k0*(d*Math.sin(y))+this.x0,e.y=this.k0*(this.rh-d*Math.cos(y))+this.y0,e}function oQ(e){var t,r,s,l,d,y=(e.x-this.x0)/this.k0,n=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(y*y+n*n),r=1):(t=-Math.sqrt(y*y+n*n),r=-1);var M=0;if(t!==0&&(M=Math.atan2(r*y,r*n)),t!==0||this.ns>0){if(r=1/this.ns,s=Math.pow(t/(this.a*this.f0),r),l=Im(this.e,s),l===-9999)return null}else l=-li;return d=Ai(M/this.ns+this.long0),e.x=d,e.y=l,e}var sQ=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const aQ={init:rQ,forward:nQ,inverse:oQ,names:sQ};function lQ(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function cQ(e){var t,r,s,l,d,y,n,M=e.x,P=e.y,L=Ai(M-this.long0);return t=Math.pow((1+this.e*Math.sin(P))/(1-this.e*Math.sin(P)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(P/2+this.s45),this.alfa)/t)-this.s45),s=-L*this.alfa,l=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(s)),d=Math.asin(Math.cos(r)*Math.sin(s)/Math.cos(l)),y=this.n*d,n=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(l/2+this.s45),this.n),e.y=n*Math.cos(y)/1,e.x=n*Math.sin(y)/1,this.czech||(e.y*=-1,e.x*=-1),e}function uQ(e){var t,r,s,l,d,y,n,M,P=e.x;e.x=e.y,e.y=P,this.czech||(e.y*=-1,e.x*=-1),y=Math.sqrt(e.x*e.x+e.y*e.y),d=Math.atan2(e.y,e.x),l=d/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/y,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(l)),r=Math.asin(Math.cos(s)*Math.sin(l)/Math.cos(t)),e.x=this.long0-r/this.alfa,n=t,M=0;var L=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45),Math.abs(n-e.y)<1e-10&&(M=1),n=e.y,L+=1;while(M===0&&L<15);return L>=15?null:e}var hQ=["Krovak","krovak"];const dQ={init:lQ,forward:cQ,inverse:uQ,names:hQ};function Bs(e,t,r,s,l){return e*l-t*Math.sin(2*l)+r*Math.sin(4*l)-s*Math.sin(6*l)}function ig(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function rg(e){return .375*e*(1+.25*e*(1+.46875*e))}function ng(e){return .05859375*e*e*(1+.75*e)}function og(e){return e*e*e*(35/3072)}function O1(e,t,r){var s=t*r;return e/Math.sqrt(1-s*s)}function wh(e){return Math.abs(e)<li?e:e-tg(e)*Math.PI}function hy(e,t,r,s,l){var d,y;d=e/t;for(var n=0;n<15;n++)if(y=(e-(t*d-r*Math.sin(2*d)+s*Math.sin(4*d)-l*Math.sin(6*d)))/(t-2*r*Math.cos(2*d)+4*s*Math.cos(4*d)-6*l*Math.cos(6*d)),d+=y,Math.abs(y)<=1e-10)return d;return NaN}function fQ(){this.sphere||(this.e0=ig(this.es),this.e1=rg(this.es),this.e2=ng(this.es),this.e3=og(this.es),this.ml0=this.a*Bs(this.e0,this.e1,this.e2,this.e3,this.lat0))}function pQ(e){var t,r,s=e.x,l=e.y;if(s=Ai(s-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(l)*Math.sin(s)),r=this.a*(Math.atan2(Math.tan(l),Math.cos(s))-this.lat0);else{var d=Math.sin(l),y=Math.cos(l),n=O1(this.a,this.e,d),M=Math.tan(l)*Math.tan(l),P=s*Math.cos(l),L=P*P,V=this.es*y*y/(1-this.es),X=this.a*Bs(this.e0,this.e1,this.e2,this.e3,l);t=n*P*(1-L*M*(1/6-(8-M+8*V)*L/120)),r=X-this.ml0+n*d/y*L*(.5+(5-M+6*V)*L/24)}return e.x=t+this.x0,e.y=r+this.y0,e}function mQ(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,s,l;if(this.sphere){var d=r+this.lat0;s=Math.asin(Math.sin(d)*Math.cos(t)),l=Math.atan2(Math.tan(t),Math.cos(d))}else{var y=this.ml0/this.a+r,n=hy(y,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(n)-li)<=Ti)return e.x=this.long0,e.y=li,r<0&&(e.y*=-1),e;var M=O1(this.a,this.e,Math.sin(n)),P=M*M*M/this.a/this.a*(1-this.es),L=Math.pow(Math.tan(n),2),V=t*this.a/M,X=V*V;s=n-M*Math.tan(n)/P*V*V*(.5-(1+3*L)*V*V/24),l=V*(1-X*(L/3+(1+3*L)*L*X/15))/Math.cos(n)}return e.x=Ai(l+this.long0),e.y=wh(s),e}var gQ=["Cassini","Cassini_Soldner","cass"];const _Q={init:fQ,forward:pQ,inverse:mQ,names:gQ};function ah(e,t){var r;return e>1e-7?(r=e*t,(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))):2*t}var yQ=1,vQ=2,xQ=3,bQ=4;function wQ(){var e=Math.abs(this.lat0);if(Math.abs(e-li)<Ti?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Ti?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=ah(this.e,1),this.mmf=.5/(1-this.es),this.apa=DQ(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ah(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function SQ(e){var t,r,s,l,d,y,n,M,P,L,V=e.x,X=e.y;if(V=Ai(V-this.long0),this.sphere){if(d=Math.sin(X),L=Math.cos(X),s=Math.cos(V),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+L*s:1+this.sinph0*d+this.cosph0*L*s,r<=Ti)return null;r=Math.sqrt(2/r),t=r*L*Math.sin(V),r*=this.mode===this.EQUIT?d:this.cosph0*d-this.sinph0*L*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(X+this.lat0)<Ti)return null;r=pn-X*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),t=r*Math.sin(V),r*=s}}else{switch(n=0,M=0,P=0,s=Math.cos(V),l=Math.sin(V),d=Math.sin(X),y=ah(this.e,d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(n=y/this.qp,M=Math.sqrt(1-n*n)),this.mode){case this.OBLIQ:P=1+this.sinb1*n+this.cosb1*M*s;break;case this.EQUIT:P=1+M*s;break;case this.N_POLE:P=li+X,y=this.qp-y;break;case this.S_POLE:P=X-li,y=this.qp+y;break}if(Math.abs(P)<Ti)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:P=Math.sqrt(2/P),this.mode===this.OBLIQ?r=this.ymf*P*(this.cosb1*n-this.sinb1*M*s):r=(P=Math.sqrt(2/(1+M*s)))*n*this.ymf,t=this.xmf*P*M*l;break;case this.N_POLE:case this.S_POLE:y>=0?(t=(P=Math.sqrt(y))*l,r=s*(this.mode===this.S_POLE?P:-P)):t=r=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e}function MQ(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,s,l,d,y,n,M,P;if(this.sphere){var L=0,V,X=0;if(V=Math.sqrt(t*t+r*r),l=V*.5,l>1)return null;switch(l=2*Math.asin(l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(X=Math.sin(l),L=Math.cos(l)),this.mode){case this.EQUIT:l=Math.abs(V)<=Ti?0:Math.asin(r*X/V),t*=X,r=L*V;break;case this.OBLIQ:l=Math.abs(V)<=Ti?this.lat0:Math.asin(L*this.sinph0+r*X*this.cosph0/V),t*=X*this.cosph0,r=(L-Math.sin(l)*this.sinph0)*V;break;case this.N_POLE:r=-r,l=li-l;break;case this.S_POLE:l-=li;break}s=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{if(P=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,r*=this.dd,M=Math.sqrt(t*t+r*r),M<Ti)return e.x=this.long0,e.y=this.lat0,e;y=2*Math.asin(.5*M/this.rq),d=Math.cos(y),t*=y=Math.sin(y),this.mode===this.OBLIQ?(P=d*this.sinb1+r*y*this.cosb1/M,n=this.qp*P,r=M*this.cosb1*d-r*this.sinb1*y):(P=r*y/M,n=this.qp*P,r=M*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),n=t*t+r*r,!n)return e.x=this.long0,e.y=this.lat0,e;P=1-n/this.qp,this.mode===this.S_POLE&&(P=-P)}s=Math.atan2(t,r),l=PQ(Math.asin(P),this.apa)}return e.x=Ai(this.long0+s),e.y=l,e}var EQ=.3333333333333333,TQ=.17222222222222222,CQ=.10257936507936508,AQ=.06388888888888888,IQ=.0664021164021164,zQ=.016415012942191543;function DQ(e){var t,r=[];return r[0]=e*EQ,t=e*e,r[0]+=t*TQ,r[1]=t*AQ,t*=e,r[0]+=t*CQ,r[1]+=t*IQ,r[2]=t*zQ,r}function PQ(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var kQ=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const RQ={init:wQ,forward:SQ,inverse:MQ,names:kQ,S_POLE:yQ,N_POLE:vQ,EQUIT:xQ,OBLIQ:bQ};function mh(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function LQ(){Math.abs(this.lat1+this.lat2)<Ti||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Cc(this.e3,this.sin_po,this.cos_po),this.qs1=ah(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Cc(this.e3,this.sin_po,this.cos_po),this.qs2=ah(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ah(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ti?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function OQ(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var s=ah(this.e3,this.sin_phi),l=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,d=this.ns0*Ai(t-this.long0),y=l*Math.sin(d)+this.x0,n=this.rh-l*Math.cos(d)+this.y0;return e.x=y,e.y=n,e}function BQ(e){var t,r,s,l,d,y;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),s=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),s=-1),l=0,t!==0&&(l=Math.atan2(s*e.x,s*e.y)),s=t*this.ns0/this.a,this.sphere?y=Math.asin((this.c-s*s)/(2*this.ns0)):(r=(this.c-s*s)/this.ns0,y=this.phi1z(this.e3,r)),d=Ai(l/this.ns0+this.long0),e.x=d,e.y=y,e}function FQ(e,t){var r,s,l,d,y,n=mh(.5*t);if(e<Ti)return n;for(var M=e*e,P=1;P<=25;P++)if(r=Math.sin(n),s=Math.cos(n),l=e*r,d=1-l*l,y=.5*d*d/s*(t/(1-M)-r/d+.5/e*Math.log((1-l)/(1+l))),n=n+y,Math.abs(y)<=1e-7)return n;return null}var NQ=["Albers_Conic_Equal_Area","Albers","aea"];const $Q={init:LQ,forward:OQ,inverse:BQ,names:NQ,phi1z:FQ};function jQ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function UQ(e){var t,r,s,l,d,y,n,M,P=e.x,L=e.y;return s=Ai(P-this.long0),t=Math.sin(L),r=Math.cos(L),l=Math.cos(s),y=this.sin_p14*t+this.cos_p14*r*l,d=1,y>0||Math.abs(y)<=Ti?(n=this.x0+this.a*d*r*Math.sin(s)/y,M=this.y0+this.a*d*(this.cos_p14*t-this.sin_p14*r*l)/y):(n=this.x0+this.infinity_dist*r*Math.sin(s),M=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*l)),e.x=n,e.y=M,e}function VQ(e){var t,r,s,l,d,y;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(l=Math.atan2(t,this.rc),r=Math.sin(l),s=Math.cos(l),y=mh(s*this.sin_p14+e.y*r*this.cos_p14/t),d=Math.atan2(e.x*r,t*this.cos_p14*s-e.y*this.sin_p14*r),d=Ai(this.long0+d)):(y=this.phic0,d=0),e.x=d,e.y=y,e}var qQ=["gnom"];const HQ={init:jQ,forward:UQ,inverse:VQ,names:qQ};function GQ(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*li:li;for(var s=Math.asin(.5*t),l,d,y,n,M=0;M<30;M++)if(d=Math.sin(s),y=Math.cos(s),n=e*d,l=Math.pow(1-n*n,2)/(2*y)*(t/(1-e*e)-d/(1-n*n)+.5/e*Math.log((1-n)/(1+n))),s+=l,Math.abs(l)<=1e-10)return s;return NaN}function WQ(){this.sphere||(this.k0=Cc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function ZQ(e){var t=e.x,r=e.y,s,l,d=Ai(t-this.long0);if(this.sphere)s=this.x0+this.a*d*Math.cos(this.lat_ts),l=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var y=ah(this.e,Math.sin(r));s=this.x0+this.a*this.k0*d,l=this.y0+this.a*y*.5/this.k0}return e.x=s,e.y=l,e}function XQ(e){e.x-=this.x0,e.y-=this.y0;var t,r;return this.sphere?(t=Ai(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=GQ(this.e,2*e.y*this.k0/this.a),t=Ai(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e}var YQ=["cea"];const JQ={init:WQ,forward:ZQ,inverse:XQ,names:YQ};function KQ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function QQ(e){var t=e.x,r=e.y,s=Ai(t-this.long0),l=wh(r-this.lat0);return e.x=this.x0+this.a*s*this.rc,e.y=this.y0+this.a*l,e}function eee(e){var t=e.x,r=e.y;return e.x=Ai(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=wh(this.lat0+(r-this.y0)/this.a),e}var tee=["Equirectangular","Equidistant_Cylindrical","eqc"];const iee={init:KQ,forward:QQ,inverse:eee,names:tee};var cM=20;function ree(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ig(this.es),this.e1=rg(this.es),this.e2=ng(this.es),this.e3=og(this.es),this.ml0=this.a*Bs(this.e0,this.e1,this.e2,this.e3,this.lat0)}function nee(e){var t=e.x,r=e.y,s,l,d,y=Ai(t-this.long0);if(d=y*Math.sin(r),this.sphere)Math.abs(r)<=Ti?(s=this.a*y,l=-1*this.a*this.lat0):(s=this.a*Math.sin(d)/Math.tan(r),l=this.a*(wh(r-this.lat0)+(1-Math.cos(d))/Math.tan(r)));else if(Math.abs(r)<=Ti)s=this.a*y,l=-1*this.ml0;else{var n=O1(this.a,this.e,Math.sin(r))/Math.tan(r);s=n*Math.sin(d),l=this.a*Bs(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+n*(1-Math.cos(d))}return e.x=s+this.x0,e.y=l+this.y0,e}function oee(e){var t,r,s,l,d,y,n,M,P;if(s=e.x-this.x0,l=e.y-this.y0,this.sphere)if(Math.abs(l+this.a*this.lat0)<=Ti)t=Ai(s/this.a+this.long0),r=0;else{y=this.lat0+l/this.a,n=s*s/this.a/this.a+y*y,M=y;var L;for(d=cM;d;--d)if(L=Math.tan(M),P=-1*(y*(M*L+1)-M-.5*(M*M+n)*L)/((M-y)/L-1),M+=P,Math.abs(P)<=Ti){r=M;break}t=Ai(this.long0+Math.asin(s*Math.tan(M)/this.a)/Math.sin(r))}else if(Math.abs(l+this.ml0)<=Ti)r=0,t=Ai(this.long0+s/this.a);else{y=(this.ml0+l)/this.a,n=s*s/this.a/this.a+y*y,M=y;var V,X,J,Z,ie;for(d=cM;d;--d)if(ie=this.e*Math.sin(M),V=Math.sqrt(1-ie*ie)*Math.tan(M),X=this.a*Bs(this.e0,this.e1,this.e2,this.e3,M),J=this.e0-2*this.e1*Math.cos(2*M)+4*this.e2*Math.cos(4*M)-6*this.e3*Math.cos(6*M),Z=X/this.a,P=(y*(V*Z+1)-Z-.5*V*(Z*Z+n))/(this.es*Math.sin(2*M)*(Z*Z+n-2*y*Z)/(4*V)+(y-Z)*(V*J-2/Math.sin(2*M))-J),M-=P,Math.abs(P)<=Ti){r=M;break}V=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=Ai(this.long0+Math.asin(s*V/this.a)/Math.sin(r))}return e.x=t,e.y=r,e}var see=["Polyconic","poly"];const aee={init:ree,forward:nee,inverse:oee,names:see};function lee(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function cee(e){var t,r=e.x,s=e.y,l=s-this.lat0,d=r-this.long0,y=l/rm*1e-5,n=d,M=1,P=0;for(t=1;t<=10;t++)M=M*y,P=P+this.A[t]*M;var L=P,V=n,X=1,J=0,Z,ie,ae=0,de=0;for(t=1;t<=6;t++)Z=X*L-J*V,ie=J*L+X*V,X=Z,J=ie,ae=ae+this.B_re[t]*X-this.B_im[t]*J,de=de+this.B_im[t]*X+this.B_re[t]*J;return e.x=de*this.a+this.x0,e.y=ae*this.a+this.y0,e}function uee(e){var t,r=e.x,s=e.y,l=r-this.x0,d=s-this.y0,y=d/this.a,n=l/this.a,M=1,P=0,L,V,X=0,J=0;for(t=1;t<=6;t++)L=M*y-P*n,V=P*y+M*n,M=L,P=V,X=X+this.C_re[t]*M-this.C_im[t]*P,J=J+this.C_im[t]*M+this.C_re[t]*P;for(var Z=0;Z<this.iterations;Z++){var ie=X,ae=J,de,fe,le=y,he=n;for(t=2;t<=6;t++)de=ie*X-ae*J,fe=ae*X+ie*J,ie=de,ae=fe,le=le+(t-1)*(this.B_re[t]*ie-this.B_im[t]*ae),he=he+(t-1)*(this.B_im[t]*ie+this.B_re[t]*ae);ie=1,ae=0;var Ce=this.B_re[1],Le=this.B_im[1];for(t=2;t<=6;t++)de=ie*X-ae*J,fe=ae*X+ie*J,ie=de,ae=fe,Ce=Ce+t*(this.B_re[t]*ie-this.B_im[t]*ae),Le=Le+t*(this.B_im[t]*ie+this.B_re[t]*ae);var Ae=Ce*Ce+Le*Le;X=(le*Ce+he*Le)/Ae,J=(he*Ce-le*Le)/Ae}var We=X,Qe=J,ze=1,Ze=0;for(t=1;t<=9;t++)ze=ze*We,Ze=Ze+this.D[t]*ze;var Ue=this.lat0+Ze*rm*1e5,vt=this.long0+Qe;return e.x=vt,e.y=Ue,e}var hee=["New_Zealand_Map_Grid","nzmg"];const dee={init:lee,forward:cee,inverse:uee,names:hee};function fee(){}function pee(e){var t=e.x,r=e.y,s=Ai(t-this.long0),l=this.x0+this.a*s,d=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=l,e.y=d,e}function mee(e){e.x-=this.x0,e.y-=this.y0;var t=Ai(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e}var gee=["Miller_Cylindrical","mill"];const _ee={init:fee,forward:pee,inverse:mee,names:gee};var yee=20;function vee(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=k6(this.es)}function xee(e){var t,r,s=e.x,l=e.y;if(s=Ai(s-this.long0),this.sphere){if(!this.m)l=this.n!==1?Math.asin(this.n*Math.sin(l)):l;else for(var d=this.n*Math.sin(l),y=yee;y;--y){var n=(this.m*l+Math.sin(l)-d)/(this.m+Math.cos(l));if(l-=n,Math.abs(n)<Ti)break}t=this.a*this.C_x*s*(this.m+Math.cos(l)),r=this.a*this.C_y*l}else{var M=Math.sin(l),P=Math.cos(l);r=this.a*ip(l,M,P,this.en),t=this.a*s*P/Math.sqrt(1-this.es*M*M)}return e.x=t,e.y=r,e}function bee(e){var t,r,s,l;return e.x-=this.x0,s=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,s=s/(this.C_x*(this.m+Math.cos(t))),this.m?t=mh((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=mh(Math.sin(t)/this.n)),s=Ai(s+this.long0),t=wh(t)):(t=R6(e.y/this.a,this.es,this.en),l=Math.abs(t),l<li?(l=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*l*l)/(this.a*Math.cos(t)),s=Ai(r)):l-Ti<li&&(s=this.long0)),e.x=s,e.y=t,e}var wee=["Sinusoidal","sinu"];const See={init:vee,forward:xee,inverse:bee,names:wee};function Mee(){}function Eee(e){for(var t=e.x,r=e.y,s=Ai(t-this.long0),l=r,d=Math.PI*Math.sin(r);;){var y=-(l+Math.sin(l)-d)/(1+Math.cos(l));if(l+=y,Math.abs(y)<Ti)break}l/=2,Math.PI/2-Math.abs(r)<Ti&&(s=0);var n=.900316316158*this.a*s*Math.cos(l)+this.x0,M=1.4142135623731*this.a*Math.sin(l)+this.y0;return e.x=n,e.y=M,e}function Tee(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var s=Ai(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var l=Math.asin(r);return e.x=s,e.y=l,e}var Cee=["Mollweide","moll"];const Aee={init:Mee,forward:Eee,inverse:Tee,names:Cee};function Iee(){Math.abs(this.lat1+this.lat2)<Ti||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ig(this.es),this.e1=rg(this.es),this.e2=ng(this.es),this.e3=og(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Cc(this.e,this.sinphi,this.cosphi),this.ml1=Bs(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ti?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Cc(this.e,this.sinphi,this.cosphi),this.ml2=Bs(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Bs(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function zee(e){var t=e.x,r=e.y,s;if(this.sphere)s=this.a*(this.g-r);else{var l=Bs(this.e0,this.e1,this.e2,this.e3,r);s=this.a*(this.g-l)}var d=this.ns*Ai(t-this.long0),y=this.x0+s*Math.sin(d),n=this.y0+this.rh-s*Math.cos(d);return e.x=y,e.y=n,e}function Dee(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,r,s,l;this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var d=0;if(r!==0&&(d=Math.atan2(t*e.x,t*e.y)),this.sphere)return l=Ai(this.long0+d/this.ns),s=wh(this.g-r/this.a),e.x=l,e.y=s,e;var y=this.g-r/this.a;return s=hy(y,this.e0,this.e1,this.e2,this.e3),l=Ai(this.long0+d/this.ns),e.x=l,e.y=s,e}var Pee=["Equidistant_Conic","eqdc"];const kee={init:Iee,forward:zee,inverse:Dee,names:Pee};function Ree(){this.R=this.a}function Lee(e){var t=e.x,r=e.y,s=Ai(t-this.long0),l,d;Math.abs(r)<=Ti&&(l=this.x0+this.R*s,d=this.y0);var y=mh(2*Math.abs(r/Math.PI));(Math.abs(s)<=Ti||Math.abs(Math.abs(r)-li)<=Ti)&&(l=this.x0,r>=0?d=this.y0+Math.PI*this.R*Math.tan(.5*y):d=this.y0+Math.PI*this.R*-Math.tan(.5*y));var n=.5*Math.abs(Math.PI/s-s/Math.PI),M=n*n,P=Math.sin(y),L=Math.cos(y),V=L/(P+L-1),X=V*V,J=V*(2/P-1),Z=J*J,ie=Math.PI*this.R*(n*(V-Z)+Math.sqrt(M*(V-Z)*(V-Z)-(Z+M)*(X-Z)))/(Z+M);s<0&&(ie=-ie),l=this.x0+ie;var ae=M+V;return ie=Math.PI*this.R*(J*ae-n*Math.sqrt((Z+M)*(M+1)-ae*ae))/(Z+M),r>=0?d=this.y0+ie:d=this.y0-ie,e.x=l,e.y=d,e}function Oee(e){var t,r,s,l,d,y,n,M,P,L,V,X,J;return e.x-=this.x0,e.y-=this.y0,V=Math.PI*this.R,s=e.x/V,l=e.y/V,d=s*s+l*l,y=-Math.abs(l)*(1+d),n=y-2*l*l+s*s,M=-2*y+1+2*l*l+d*d,J=l*l/M+(2*n*n*n/M/M/M-9*y*n/M/M)/27,P=(y-n*n/3/M)/M,L=2*Math.sqrt(-P/3),V=3*J/P/L,Math.abs(V)>1&&(V>=0?V=1:V=-1),X=Math.acos(V)/3,e.y>=0?r=(-L*Math.cos(X+Math.PI/3)-n/3/M)*Math.PI:r=-(-L*Math.cos(X+Math.PI/3)-n/3/M)*Math.PI,Math.abs(s)<Ti?t=this.long0:t=Ai(this.long0+Math.PI*(d-1+Math.sqrt(1+2*(s*s-l*l)+d*d))/2/s),e.x=t,e.y=r,e}var Bee=["Van_der_Grinten_I","VanDerGrinten","vandg"];const Fee={init:Ree,forward:Lee,inverse:Oee,names:Bee};function Nee(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function $ee(e){var t=e.x,r=e.y,s=Math.sin(e.y),l=Math.cos(e.y),d=Ai(t-this.long0),y,n,M,P,L,V,X,J,Z,ie,ae,de,fe,le,he,Ce,Le,Ae,We,Qe,ze,Ze,Ue;return this.sphere?Math.abs(this.sin_p12-1)<=Ti?(e.x=this.x0+this.a*(li-r)*Math.sin(d),e.y=this.y0-this.a*(li-r)*Math.cos(d),e):Math.abs(this.sin_p12+1)<=Ti?(e.x=this.x0+this.a*(li+r)*Math.sin(d),e.y=this.y0+this.a*(li+r)*Math.cos(d),e):(Ae=this.sin_p12*s+this.cos_p12*l*Math.cos(d),Ce=Math.acos(Ae),Le=Ce?Ce/Math.sin(Ce):1,e.x=this.x0+this.a*Le*l*Math.sin(d),e.y=this.y0+this.a*Le*(this.cos_p12*s-this.sin_p12*l*Math.cos(d)),e):(y=ig(this.es),n=rg(this.es),M=ng(this.es),P=og(this.es),Math.abs(this.sin_p12-1)<=Ti?(L=this.a*Bs(y,n,M,P,li),V=this.a*Bs(y,n,M,P,r),e.x=this.x0+(L-V)*Math.sin(d),e.y=this.y0-(L-V)*Math.cos(d),e):Math.abs(this.sin_p12+1)<=Ti?(L=this.a*Bs(y,n,M,P,li),V=this.a*Bs(y,n,M,P,r),e.x=this.x0+(L+V)*Math.sin(d),e.y=this.y0+(L+V)*Math.cos(d),e):(X=s/l,J=O1(this.a,this.e,this.sin_p12),Z=O1(this.a,this.e,s),ie=Math.atan((1-this.es)*X+this.es*J*this.sin_p12/(Z*l)),ae=Math.atan2(Math.sin(d),this.cos_p12*Math.tan(ie)-this.sin_p12*Math.cos(d)),ae===0?We=Math.asin(this.cos_p12*Math.sin(ie)-this.sin_p12*Math.cos(ie)):Math.abs(Math.abs(ae)-Math.PI)<=Ti?We=-Math.asin(this.cos_p12*Math.sin(ie)-this.sin_p12*Math.cos(ie)):We=Math.asin(Math.sin(d)*Math.cos(ie)/Math.sin(ae)),de=this.e*this.sin_p12/Math.sqrt(1-this.es),fe=this.e*this.cos_p12*Math.cos(ae)/Math.sqrt(1-this.es),le=de*fe,he=fe*fe,Qe=We*We,ze=Qe*We,Ze=ze*We,Ue=Ze*We,Ce=J*We*(1-Qe*he*(1-he)/6+ze/8*le*(1-2*he)+Ze/120*(he*(4-7*he)-3*de*de*(1-7*he))-Ue/48*le),e.x=this.x0+Ce*Math.sin(ae),e.y=this.y0+Ce*Math.cos(ae),e))}function jee(e){e.x-=this.x0,e.y-=this.y0;var t,r,s,l,d,y,n,M,P,L,V,X,J,Z,ie,ae,de,fe,le,he,Ce,Le,Ae,We;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*li*this.a?void 0:(r=t/this.a,s=Math.sin(r),l=Math.cos(r),d=this.long0,Math.abs(t)<=Ti?y=this.lat0:(y=mh(l*this.sin_p12+e.y*s*this.cos_p12/t),n=Math.abs(this.lat0)-li,Math.abs(n)<=Ti?this.lat0>=0?d=Ai(this.long0+Math.atan2(e.x,-e.y)):d=Ai(this.long0-Math.atan2(-e.x,e.y)):d=Ai(this.long0+Math.atan2(e.x*s,t*this.cos_p12*l-e.y*this.sin_p12*s))),e.x=d,e.y=y,e)):(M=ig(this.es),P=rg(this.es),L=ng(this.es),V=og(this.es),Math.abs(this.sin_p12-1)<=Ti?(X=this.a*Bs(M,P,L,V,li),t=Math.sqrt(e.x*e.x+e.y*e.y),J=X-t,y=hy(J/this.a,M,P,L,V),d=Ai(this.long0+Math.atan2(e.x,-1*e.y)),e.x=d,e.y=y,e):Math.abs(this.sin_p12+1)<=Ti?(X=this.a*Bs(M,P,L,V,li),t=Math.sqrt(e.x*e.x+e.y*e.y),J=t-X,y=hy(J/this.a,M,P,L,V),d=Ai(this.long0+Math.atan2(e.x,e.y)),e.x=d,e.y=y,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),ae=Math.atan2(e.x,e.y),Z=O1(this.a,this.e,this.sin_p12),de=Math.cos(ae),fe=this.e*this.cos_p12*de,le=-fe*fe/(1-this.es),he=3*this.es*(1-le)*this.sin_p12*this.cos_p12*de/(1-this.es),Ce=t/Z,Le=Ce-le*(1+le)*Math.pow(Ce,3)/6-he*(1+3*le)*Math.pow(Ce,4)/24,Ae=1-le*Le*Le/2-Ce*Le*Le*Le/6,ie=Math.asin(this.sin_p12*Math.cos(Le)+this.cos_p12*Math.sin(Le)*de),d=Ai(this.long0+Math.asin(Math.sin(ae)*Math.sin(Le)/Math.cos(ie))),We=Math.sin(ie),y=Math.atan2((We-this.es*Ae*this.sin_p12)*Math.tan(ie),We*(1-this.es)),e.x=d,e.y=y,e))}var Uee=["Azimuthal_Equidistant","aeqd"];const Vee={init:Nee,forward:$ee,inverse:jee,names:Uee};function qee(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Hee(e){var t,r,s,l,d,y,n,M,P=e.x,L=e.y;return s=Ai(P-this.long0),t=Math.sin(L),r=Math.cos(L),l=Math.cos(s),y=this.sin_p14*t+this.cos_p14*r*l,d=1,(y>0||Math.abs(y)<=Ti)&&(n=this.a*d*r*Math.sin(s),M=this.y0+this.a*d*(this.cos_p14*t-this.sin_p14*r*l)),e.x=n,e.y=M,e}function Gee(e){var t,r,s,l,d,y,n;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=mh(t/this.a),s=Math.sin(r),l=Math.cos(r),y=this.long0,Math.abs(t)<=Ti?(n=this.lat0,e.x=y,e.y=n,e):(n=mh(l*this.sin_p14+e.y*s*this.cos_p14/t),d=Math.abs(this.lat0)-li,Math.abs(d)<=Ti?(this.lat0>=0?y=Ai(this.long0+Math.atan2(e.x,-e.y)):y=Ai(this.long0-Math.atan2(-e.x,e.y)),e.x=y,e.y=n,e):(y=Ai(this.long0+Math.atan2(e.x*s,t*this.cos_p14*l-e.y*this.sin_p14*s)),e.x=y,e.y=n,e))}var Wee=["ortho"];const Zee={init:qee,forward:Hee,inverse:Gee,names:Wee};var Wn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Xee(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=li-pn/2?this.face=Wn.TOP:this.lat0<=-(li-pn/2)?this.face=Wn.BOTTOM:Math.abs(this.long0)<=pn?this.face=Wn.FRONT:Math.abs(this.long0)<=li+pn?this.face=this.long0>0?Wn.RIGHT:Wn.LEFT:this.face=Wn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Yee(e){var t={x:0,y:0},r,s,l,d,y,n,M={value:0};if(e.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):r=e.y,s=e.x,this.face===Wn.TOP)d=li-r,s>=pn&&s<=li+pn?(M.value=mn.AREA_0,l=s-li):s>li+pn||s<=-(li+pn)?(M.value=mn.AREA_1,l=s>0?s-ao:s+ao):s>-(li+pn)&&s<=-pn?(M.value=mn.AREA_2,l=s+li):(M.value=mn.AREA_3,l=s);else if(this.face===Wn.BOTTOM)d=li+r,s>=pn&&s<=li+pn?(M.value=mn.AREA_0,l=-s+li):s<pn&&s>=-pn?(M.value=mn.AREA_1,l=-s):s<-pn&&s>=-(li+pn)?(M.value=mn.AREA_2,l=-s-li):(M.value=mn.AREA_3,l=s>0?-s+ao:-s-ao);else{var P,L,V,X,J,Z,ie;this.face===Wn.RIGHT?s=S1(s,+li):this.face===Wn.BACK?s=S1(s,+ao):this.face===Wn.LEFT&&(s=S1(s,-li)),X=Math.sin(r),J=Math.cos(r),Z=Math.sin(s),ie=Math.cos(s),P=J*ie,L=J*Z,V=X,this.face===Wn.FRONT?(d=Math.acos(P),l=t2(d,V,L,M)):this.face===Wn.RIGHT?(d=Math.acos(L),l=t2(d,V,-P,M)):this.face===Wn.BACK?(d=Math.acos(-P),l=t2(d,V,-L,M)):this.face===Wn.LEFT?(d=Math.acos(-L),l=t2(d,V,P,M)):(d=l=0,M.value=mn.AREA_0)}return n=Math.atan(12/ao*(l+Math.acos(Math.sin(l)*Math.cos(pn))-li)),y=Math.sqrt((1-Math.cos(d))/(Math.cos(n)*Math.cos(n))/(1-Math.cos(Math.atan(1/Math.cos(l))))),M.value===mn.AREA_1?n+=li:M.value===mn.AREA_2?n+=ao:M.value===mn.AREA_3&&(n+=1.5*ao),t.x=y*Math.cos(n),t.y=y*Math.sin(n),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function Jee(e){var t={lam:0,phi:0},r,s,l,d,y,n,M,P,L,V={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,s=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?V.value=mn.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(V.value=mn.AREA_1,r-=li):e.x<0&&-e.x>=Math.abs(e.y)?(V.value=mn.AREA_2,r=r<0?r+ao:r-ao):(V.value=mn.AREA_3,r+=li),L=ao/12*Math.tan(r),y=Math.sin(L)/(Math.cos(L)-1/Math.sqrt(2)),n=Math.atan(y),l=Math.cos(r),d=Math.tan(s),M=1-l*l*d*d*(1-Math.cos(Math.atan(1/Math.cos(n)))),M<-1?M=-1:M>1&&(M=1),this.face===Wn.TOP)P=Math.acos(M),t.phi=li-P,V.value===mn.AREA_0?t.lam=n+li:V.value===mn.AREA_1?t.lam=n<0?n+ao:n-ao:V.value===mn.AREA_2?t.lam=n-li:t.lam=n;else if(this.face===Wn.BOTTOM)P=Math.acos(M),t.phi=P-li,V.value===mn.AREA_0?t.lam=-n+li:V.value===mn.AREA_1?t.lam=-n:V.value===mn.AREA_2?t.lam=-n-li:t.lam=n<0?-n-ao:-n+ao;else{var X,J,Z;X=M,L=X*X,L>=1?Z=0:Z=Math.sqrt(1-L)*Math.sin(n),L+=Z*Z,L>=1?J=0:J=Math.sqrt(1-L),V.value===mn.AREA_1?(L=J,J=-Z,Z=L):V.value===mn.AREA_2?(J=-J,Z=-Z):V.value===mn.AREA_3&&(L=J,J=Z,Z=-L),this.face===Wn.RIGHT?(L=X,X=-J,J=L):this.face===Wn.BACK?(X=-X,J=-J):this.face===Wn.LEFT&&(L=X,X=J,J=-L),t.phi=Math.acos(-Z)-li,t.lam=Math.atan2(J,X),this.face===Wn.RIGHT?t.lam=S1(t.lam,-li):this.face===Wn.BACK?t.lam=S1(t.lam,-ao):this.face===Wn.LEFT&&(t.lam=S1(t.lam,+li))}if(this.es!==0){var ie,ae,de;ie=t.phi<0?1:0,ae=Math.tan(t.phi),de=this.b/Math.sqrt(ae*ae+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-de*de)/(this.one_minus_f*de)),ie&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function t2(e,t,r,s){var l;return e<Ti?(s.value=mn.AREA_0,l=0):(l=Math.atan2(t,r),Math.abs(l)<=pn?s.value=mn.AREA_0:l>pn&&l<=li+pn?(s.value=mn.AREA_1,l-=li):l>li+pn||l<=-(li+pn)?(s.value=mn.AREA_2,l=l>=0?l-ao:l+ao):(s.value=mn.AREA_3,l+=li)),l}function S1(e,t){var r=e+t;return r<-ao?r+=Cm:r>+ao&&(r-=Cm),r}var Kee=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Qee={init:Xee,forward:Yee,inverse:Jee,names:Kee};var Hb=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],X0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],lI=.8487,cI=1.3523,uI=nh/5,ete=1/uI,c1=18,dy=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},tte=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function ite(e,t,r,s){for(var l=t;s;--s){var d=e(l);if(l-=d,Math.abs(d)<r)break}return l}function rte(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function nte(e){var t=Ai(e.x-this.long0),r=Math.abs(e.y),s=Math.floor(r*uI);s<0?s=0:s>=c1&&(s=c1-1),r=nh*(r-ete*s);var l={x:dy(Hb[s],r)*t,y:dy(X0[s],r)};return e.y<0&&(l.y=-l.y),l.x=l.x*this.a*lI+this.x0,l.y=l.y*this.a*cI+this.y0,l}function ote(e){var t={x:(e.x-this.x0)/(this.a*lI),y:Math.abs(e.y-this.y0)/(this.a*cI)};if(t.y>=1)t.x/=Hb[c1][0],t.y=e.y<0?-li:li;else{var r=Math.floor(t.y*c1);for(r<0?r=0:r>=c1&&(r=c1-1);;)if(X0[r][0]>t.y)--r;else if(X0[r+1][0]<=t.y)++r;else break;var s=X0[r],l=5*(t.y-s[0])/(X0[r+1][0]-s[0]);l=ite(function(d){return(dy(s,d)-t.y)/tte(s,d)},l,Ti,100),t.x/=dy(Hb[r],l),t.y=(5*r+l)*es,e.y<0&&(t.y=-t.y)}return t.x=Ai(t.x+this.long0),t}var ste=["Robinson","robin"];const ate={init:rte,forward:nte,inverse:ote,names:ste};function lte(){this.name="geocent"}function cte(e){var t=JA(e,this.es,this.a);return t}function ute(e){var t=KA(e,this.es,this.a,this.b);return t}var hte=["Geocentric","geocentric","geocent","Geocent"];const dte={init:lte,forward:cte,inverse:ute,names:hte};var gs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},V0={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function fte(){if(Object.keys(V0).forEach(function(r){if(typeof this[r]>"u")this[r]=V0[r].def;else{if(V0[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);V0[r].num&&(this[r]=parseFloat(this[r]))}V0[r].degrees&&(this[r]=this[r]*es)}.bind(this)),Math.abs(Math.abs(this.lat0)-li)<Ti?this.mode=this.lat0<0?gs.S_POLE:gs.N_POLE:Math.abs(this.lat0)<Ti?this.mode=gs.EQUIT:(this.mode=gs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function pte(e){e.x-=this.long0;var t=Math.sin(e.y),r=Math.cos(e.y),s=Math.cos(e.x),l,d;switch(this.mode){case gs.OBLIQ:d=this.sinph0*t+this.cosph0*r*s;break;case gs.EQUIT:d=r*s;break;case gs.S_POLE:d=-t;break;case gs.N_POLE:d=t;break}switch(d=this.pn1/(this.p-d),l=d*r*Math.sin(e.x),this.mode){case gs.OBLIQ:d*=this.cosph0*t-this.sinph0*r*s;break;case gs.EQUIT:d*=t;break;case gs.N_POLE:d*=-(r*s);break;case gs.S_POLE:d*=r*s;break}var y,n;return y=d*this.cg+l*this.sg,n=1/(y*this.sw*this.h1+this.cw),l=(l*this.cg-d*this.sg)*this.cw*n,d=y*n,e.x=l*this.a,e.y=d*this.a,e}function mte(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},r,s,l;l=1/(this.pn1-e.y*this.sw),r=this.pn1*e.x*l,s=this.pn1*e.y*this.cw*l,e.x=r*this.cg+s*this.sg,e.y=s*this.cg-r*this.sg;var d=ra(e.x,e.y);if(Math.abs(d)<Ti)t.x=0,t.y=e.y;else{var y,n;switch(n=1-d*d*this.pfact,n=(this.p-Math.sqrt(n))/(this.pn1/d+d/this.pn1),y=Math.sqrt(1-n*n),this.mode){case gs.OBLIQ:t.y=Math.asin(y*this.sinph0+e.y*n*this.cosph0/d),e.y=(y-this.sinph0*Math.sin(t.y))*d,e.x*=n*this.cosph0;break;case gs.EQUIT:t.y=Math.asin(e.y*n/d),e.y=y*d,e.x*=n;break;case gs.N_POLE:t.y=Math.asin(y),e.y=-e.y;break;case gs.S_POLE:t.y=-Math.asin(y);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var gte=["Tilted_Perspective","tpers"];const _te={init:fte,forward:pte,inverse:mte,names:gte};function yte(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function vte(e){var t=e.x,r=e.y,s,l,d,y;if(t=t-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var n=this.radius_p/ra(this.radius_p*Math.cos(r),Math.sin(r));if(l=n*Math.cos(t)*Math.cos(r),d=n*Math.sin(t)*Math.cos(r),y=n*Math.sin(r),(this.radius_g-l)*l-d*d-y*y*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;s=this.radius_g-l,this.flip_axis?(e.x=this.radius_g_1*Math.atan(d/ra(y,s)),e.y=this.radius_g_1*Math.atan(y/s)):(e.x=this.radius_g_1*Math.atan(d/s),e.y=this.radius_g_1*Math.atan(y/ra(d,s)))}else this.shape==="sphere"&&(s=Math.cos(r),l=Math.cos(t)*s,d=Math.sin(t)*s,y=Math.sin(r),s=this.radius_g-l,this.flip_axis?(e.x=this.radius_g_1*Math.atan(d/ra(y,s)),e.y=this.radius_g_1*Math.atan(y/s)):(e.x=this.radius_g_1*Math.atan(d/s),e.y=this.radius_g_1*Math.atan(y/ra(d,s))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function xte(e){var t=-1,r=0,s=0,l,d,y,n;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*ra(1,s)):(r=Math.tan(e.x/this.radius_g_1),s=Math.tan(e.y/this.radius_g_1)*ra(1,r));var M=s/this.radius_p;if(l=r*r+M*M+t*t,d=2*this.radius_g*t,y=d*d-4*l*this.C,y<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=(-d-Math.sqrt(y))/(2*l),t=this.radius_g+n*t,r*=n,s*=n,e.x=Math.atan2(r,t),e.y=Math.atan(s*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+s*s)):(r=Math.tan(e.x/this.radius_g_1),s=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+r*r)),l=r*r+s*s+t*t,d=2*this.radius_g*t,y=d*d-4*l*this.C,y<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=(-d-Math.sqrt(y))/(2*l),t=this.radius_g+n*t,r*=n,s*=n,e.x=Math.atan2(r,t),e.y=Math.atan(s*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var bte=["Geostationary Satellite View","Geostationary_Satellite","geos"];const wte={init:yte,forward:vte,inverse:xte,names:bte};var nm=1.340264,om=-.081106,sm=893e-6,am=.003796,fy=Math.sqrt(3)/2;function Ste(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Mte(e){var t=Ai(e.x-this.long0),r=e.y,s=Math.asin(fy*Math.sin(r)),l=s*s,d=l*l*l;return e.x=t*Math.cos(s)/(fy*(nm+3*om*l+d*(7*sm+9*am*l))),e.y=s*(nm+om*l+d*(sm+am*l)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Ete(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,r=12,s=e.y,l,d,y,n,M,P;for(P=0;P<r&&(l=s*s,d=l*l*l,y=s*(nm+om*l+d*(sm+am*l))-e.y,n=nm+3*om*l+d*(7*sm+9*am*l),s-=M=y/n,!(Math.abs(M)<t));++P);return l=s*s,d=l*l*l,e.x=fy*e.x*(nm+3*om*l+d*(7*sm+9*am*l))/Math.cos(s),e.y=Math.asin(Math.sin(s)/fy),e.x=Ai(e.x+this.long0),e}var Tte=["eqearth","Equal Earth","Equal_Earth"];const Cte={init:Ste,forward:Mte,inverse:Ete,names:Tte};var zm=1e-10;function Ate(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<zm)throw new Error;this.es?(this.en=k6(this.es),this.m1=ip(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=zte,this.forward=Ite):(Math.abs(this.phi1)+zm>=li?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Pte,this.forward=Dte)}function Ite(e){var t=Ai(e.x-(this.long0||0)),r=e.y,s,l,d;return s=this.am1+this.m1-ip(r,l=Math.sin(r),d=Math.cos(r),this.en),l=d*t/(s*Math.sqrt(1-this.es*l*l)),e.x=s*Math.sin(l),e.y=this.am1-s*Math.cos(l),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function zte(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,s,l;if(r=ra(e.x,e.y=this.am1-e.y),l=R6(this.am1+this.m1-r,this.es,this.en),(t=Math.abs(l))<li)t=Math.sin(l),s=r*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(l);else if(Math.abs(t-li)<=zm)s=0;else throw new Error;return e.x=Ai(s+(this.long0||0)),e.y=wh(l),e}function Dte(e){var t=Ai(e.x-(this.long0||0)),r=e.y,s,l;return l=this.cphi1+this.phi1-r,Math.abs(l)>zm?(e.x=l*Math.sin(s=t*Math.cos(r)/l),e.y=this.cphi1-l*Math.cos(s)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Pte(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,s=ra(e.x,e.y=this.cphi1-e.y);if(r=this.cphi1+this.phi1-s,Math.abs(r)>li)throw new Error;return Math.abs(Math.abs(r)-li)<=zm?t=0:t=s*Math.atan2(e.x,e.y)/Math.cos(r),e.x=Ai(t+(this.long0||0)),e.y=wh(r),e}var kte=["bonne","Bonne (Werner lat_1=90)"];const Rte={init:Ate,names:kte};function Lte(e){e.Proj.projections.add(A2),e.Proj.projections.add(I2),e.Proj.projections.add(IK),e.Proj.projections.add(NK),e.Proj.projections.add(HK),e.Proj.projections.add(YK),e.Proj.projections.add(iQ),e.Proj.projections.add(aQ),e.Proj.projections.add(dQ),e.Proj.projections.add(_Q),e.Proj.projections.add(RQ),e.Proj.projections.add($Q),e.Proj.projections.add(HQ),e.Proj.projections.add(JQ),e.Proj.projections.add(iee),e.Proj.projections.add(aee),e.Proj.projections.add(dee),e.Proj.projections.add(_ee),e.Proj.projections.add(See),e.Proj.projections.add(Aee),e.Proj.projections.add(kee),e.Proj.projections.add(Fee),e.Proj.projections.add(Vee),e.Proj.projections.add(Zee),e.Proj.projections.add(Qee),e.Proj.projections.add(ate),e.Proj.projections.add(dte),e.Proj.projections.add(_te),e.Proj.projections.add(wte),e.Proj.projections.add(Cte),e.Proj.projections.add(Rte)}rl.defaultDatum="WGS84";rl.Proj=Sc;rl.WGS84=new rl.Proj("WGS84");rl.Point=L1;rl.toPoint=QA;rl.defs=Ls;rl.nadgrid=DJ;rl.transform=uy;rl.mgrs=WJ;rl.version="__VERSION__";Lte(rl);var hI={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(At,function(){var r=function(N,K){var _e={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},qe={on:function(ot,pt,Jt){if(_e[ot]===void 0)throw new Error("Invalid event type: "+ot);_e[ot].push({selector:pt,fn:Jt})},render:function(ot){K.store.featureChanged(ot)}},nt=function(ot,pt){for(var Jt=_e[ot],si=Jt.length;si--;){var Ut=Jt[si];if(Ut.selector(pt)){Ut.fn.call(qe,pt)||K.store.render(),K.ui.updateMapClasses();break}}};return N.start.call(qe),{render:N.render,stop:function(){N.stop&&N.stop()},trash:function(){N.trash&&(N.trash(),K.store.render())},combineFeatures:function(){N.combineFeatures&&N.combineFeatures()},uncombineFeatures:function(){N.uncombineFeatures&&N.uncombineFeatures()},drag:function(ot){nt("drag",ot)},click:function(ot){nt("click",ot)},mousemove:function(ot){nt("mousemove",ot)},mousedown:function(ot){nt("mousedown",ot)},mouseup:function(ot){nt("mouseup",ot)},mouseout:function(ot){nt("mouseout",ot)},keydown:function(ot){nt("keydown",ot)},keyup:function(ot){nt("keyup",ot)},touchstart:function(ot){nt("touchstart",ot)},touchmove:function(ot){nt("touchmove",ot)},touchend:function(ot){nt("touchend",ot)},tap:function(ot){nt("tap",ot)}}};function s(N){return N&&N.__esModule&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N}function l(N){if(N.__esModule)return N;var K=N.default;if(typeof K=="function"){var _e=function qe(){if(this instanceof qe){var nt=[null];nt.push.apply(nt,arguments);var ot=Function.bind.apply(K,nt);return new ot}return K.apply(this,arguments)};_e.prototype=K.prototype}else _e={};return Object.defineProperty(_e,"__esModule",{value:!0}),Object.keys(N).forEach(function(qe){var nt=Object.getOwnPropertyDescriptor(N,qe);Object.defineProperty(_e,qe,nt.get?nt:{enumerable:!0,get:function(){return N[qe]}})}),_e}var d={},y={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},n=y;function M(N){var K=0;if(N&&N.length>0){K+=Math.abs(P(N[0]));for(var _e=1;_e<N.length;_e++)K-=Math.abs(P(N[_e]))}return K}function P(N){var K,_e,qe,nt,ot,pt,Jt=0,si=N.length;if(si>2){for(pt=0;pt<si;pt++)pt===si-2?(qe=si-2,nt=si-1,ot=0):pt===si-1?(qe=si-1,nt=0,ot=1):(qe=pt,nt=pt+1,ot=pt+2),K=N[qe],_e=N[nt],Jt+=(L(N[ot][0])-L(K[0]))*Math.sin(L(_e[1]));Jt=Jt*n.RADIUS*n.RADIUS/2}return Jt}function L(N){return N*Math.PI/180}d.geometry=function N(K){var _e,qe=0;switch(K.type){case"Polygon":return M(K.coordinates);case"MultiPolygon":for(_e=0;_e<K.coordinates.length;_e++)qe+=M(K.coordinates[_e]);return qe;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(_e=0;_e<K.geometries.length;_e++)qe+=N(K.geometries[_e]);return qe}},d.ring=P;var V={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},X={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},J={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},Z={POLYGON:"polygon",LINE:"line_string",POINT:"point"},ie={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},ae={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},de={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},fe={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},le={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},he={ACTIVE:"true",INACTIVE:"false"},Ce=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Le=-85,Ae=Object.freeze({__proto__:null,classes:V,sources:X,cursors:J,types:Z,geojsonTypes:ie,modes:ae,events:de,updateActions:fe,meta:le,activeStates:he,interactions:Ce,LAT_MIN:-90,LAT_RENDERED_MIN:Le,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),We={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Qe(N,K){var _e=We[N.geometry.type]-We[K.geometry.type];return _e===0&&N.geometry.type===ie.POLYGON?N.area-K.area:_e}function ze(N){return N.map(function(K){return K.geometry.type===ie.POLYGON&&(K.area=d.geometry({type:ie.FEATURE,property:{},geometry:K.geometry})),K}).sort(Qe).map(function(K){return delete K.area,K})}function Ze(N,K){return K===void 0&&(K=0),[[N.point.x-K,N.point.y-K],[N.point.x+K,N.point.y+K]]}function Ue(N){if(this._items={},this._nums={},this._length=N?N.length:0,N)for(var K=0,_e=N.length;K<_e;K++)this.add(N[K]),N[K]!==void 0&&(typeof N[K]=="string"?this._items[N[K]]=K:this._nums[N[K]]=K)}Ue.prototype.add=function(N){return this.has(N)||(this._length++,typeof N=="string"?this._items[N]=this._length:this._nums[N]=this._length),this},Ue.prototype.delete=function(N){return this.has(N)===!1||(this._length--,delete this._items[N],delete this._nums[N]),this},Ue.prototype.has=function(N){return(typeof N=="string"||typeof N=="number")&&(this._items[N]!==void 0||this._nums[N]!==void 0)},Ue.prototype.values=function(){var N=this,K=[];return Object.keys(this._items).forEach(function(_e){K.push({k:_e,v:N._items[_e]})}),Object.keys(this._nums).forEach(function(_e){K.push({k:JSON.parse(_e),v:N._nums[_e]})}),K.sort(function(_e,qe){return _e.v-qe.v}).map(function(_e){return _e.k})},Ue.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var vt=[le.FEATURE,le.MIDPOINT,le.VERTEX],Be={click:function(N,K,_e){return Ke(N,K,_e,_e.options.clickBuffer)},touch:function(N,K,_e){return Ke(N,K,_e,_e.options.touchBuffer)}};function Ke(N,K,_e,qe){if(_e.map===null)return[];var nt=N?Ze(N,qe):K,ot={};_e.options.styles&&(ot.layers=_e.options.styles.map(function(Ut){return Ut.id}).filter(function(Ut){return _e.map.getLayer(Ut)!=null}));var pt=_e.map.queryRenderedFeatures(nt,ot).filter(function(Ut){return vt.indexOf(Ut.properties.meta)!==-1}),Jt=new Ue,si=[];return pt.forEach(function(Ut){var mi=Ut.properties.id;Jt.has(mi)||(Jt.add(mi),si.push(Ut))}),ze(si)}function xt(N,K){var _e=Be.click(N,null,K),qe={mouse:J.NONE};return _e[0]&&(qe.mouse=_e[0].properties.active===he.ACTIVE?J.MOVE:J.POINTER,qe.feature=_e[0].properties.meta),K.events.currentModeName().indexOf("draw")!==-1&&(qe.mouse=J.ADD),K.ui.queueMapClasses(qe),K.ui.updateMapClasses(),_e[0]}function yt(N,K){var _e=N.x-K.x,qe=N.y-K.y;return Math.sqrt(_e*_e+qe*qe)}function Dt(N,K,_e){_e===void 0&&(_e={});var qe=_e.fineTolerance!=null?_e.fineTolerance:4,nt=_e.grossTolerance!=null?_e.grossTolerance:12,ot=_e.interval!=null?_e.interval:500;N.point=N.point||K.point,N.time=N.time||K.time;var pt=yt(N.point,K.point);return pt<qe||pt<nt&&K.time-N.time<ot}function bt(N,K,_e){_e===void 0&&(_e={});var qe=_e.tolerance!=null?_e.tolerance:25,nt=_e.interval!=null?_e.interval:250;return N.point=N.point||K.point,N.time=N.time||K.time,yt(N.point,K.point)<qe&&K.time-N.time<nt}var bi={exports:{}},ji=bi.exports=function(N,K){if(K||(K=16),N===void 0&&(N=128),N<=0)return"0";for(var _e=Math.log(Math.pow(2,N))/Math.log(K),qe=2;_e===1/0;qe*=2)_e=Math.log(Math.pow(2,N/qe))/Math.log(K)*qe;var nt=_e-Math.floor(_e),ot="";for(qe=0;qe<Math.floor(_e);qe++)ot=Math.floor(Math.random()*K).toString(K)+ot;if(nt){var pt=Math.pow(K,nt);ot=Math.floor(Math.random()*pt).toString(K)+ot}var Jt=parseInt(ot,K);return Jt!==1/0&&Jt>=Math.pow(2,N)?ji(N,K):ot};ji.rack=function(N,K,_e){var qe=function(ot){var pt=0;do{if(pt++>10){if(!_e)throw new Error("too many ID collisions, use more bits");N+=_e}var Jt=ji(N,K)}while(Object.hasOwnProperty.call(nt,Jt));return nt[Jt]=ot,Jt},nt=qe.hats={};return qe.get=function(ot){return qe.hats[ot]},qe.set=function(ot,pt){return qe.hats[ot]=pt,qe},qe.bits=N||128,qe.base=K||16,qe};var Qt=s(bi.exports),Nt=function(N,K){this.ctx=N,this.properties=K.properties||{},this.coordinates=K.geometry.coordinates,this.id=K.id||Qt(),this.type=K.geometry.type};Nt.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Nt.prototype.incomingCoords=function(N){this.setCoordinates(N)},Nt.prototype.setCoordinates=function(N){this.coordinates=N,this.changed()},Nt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Nt.prototype.setProperty=function(N,K){this.properties[N]=K},Nt.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:ie.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Nt.prototype.internal=function(N){var K={id:this.id,meta:le.FEATURE,"meta:type":this.type,active:he.INACTIVE,mode:N};if(this.ctx.options.userProperties)for(var _e in this.properties)K["user_"+_e]=this.properties[_e];return{type:ie.FEATURE,properties:K,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Sr=function(N,K){Nt.call(this,N,K)};(Sr.prototype=Object.create(Nt.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Sr.prototype.updateCoordinate=function(N,K,_e){this.coordinates=arguments.length===3?[K,_e]:[N,K],this.changed()},Sr.prototype.getCoordinate=function(){return this.getCoordinates()};var Ui=function(N,K){Nt.call(this,N,K)};(Ui.prototype=Object.create(Nt.prototype)).isValid=function(){return this.coordinates.length>1},Ui.prototype.addCoordinate=function(N,K,_e){this.changed();var qe=parseInt(N,10);this.coordinates.splice(qe,0,[K,_e])},Ui.prototype.getCoordinate=function(N){var K=parseInt(N,10);return JSON.parse(JSON.stringify(this.coordinates[K]))},Ui.prototype.removeCoordinate=function(N){this.changed(),this.coordinates.splice(parseInt(N,10),1)},Ui.prototype.updateCoordinate=function(N,K,_e){var qe=parseInt(N,10);this.coordinates[qe]=[K,_e],this.changed()};var ci=function(N,K){Nt.call(this,N,K),this.coordinates=this.coordinates.map(function(_e){return _e.slice(0,-1)})};(ci.prototype=Object.create(Nt.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(N){return N.length>2})},ci.prototype.incomingCoords=function(N){this.coordinates=N.map(function(K){return K.slice(0,-1)}),this.changed()},ci.prototype.setCoordinates=function(N){this.coordinates=N,this.changed()},ci.prototype.addCoordinate=function(N,K,_e){this.changed();var qe=N.split(".").map(function(nt){return parseInt(nt,10)});this.coordinates[qe[0]].splice(qe[1],0,[K,_e])},ci.prototype.removeCoordinate=function(N){this.changed();var K=N.split(".").map(function(qe){return parseInt(qe,10)}),_e=this.coordinates[K[0]];_e&&(_e.splice(K[1],1),_e.length<3&&this.coordinates.splice(K[0],1))},ci.prototype.getCoordinate=function(N){var K=N.split(".").map(function(qe){return parseInt(qe,10)}),_e=this.coordinates[K[0]];return JSON.parse(JSON.stringify(_e[K[1]]))},ci.prototype.getCoordinates=function(){return this.coordinates.map(function(N){return N.concat([N[0]])})},ci.prototype.updateCoordinate=function(N,K,_e){this.changed();var qe=N.split("."),nt=parseInt(qe[0],10),ot=parseInt(qe[1],10);this.coordinates[nt]===void 0&&(this.coordinates[nt]=[]),this.coordinates[nt][ot]=[K,_e]};var ur={MultiPoint:Sr,MultiLineString:Ui,MultiPolygon:ci},cn=function(N,K,_e,qe,nt){var ot=_e.split("."),pt=parseInt(ot[0],10),Jt=ot[1]?ot.slice(1).join("."):null;return N[pt][K](Jt,qe,nt)},Di=function(N,K){if(Nt.call(this,N,K),delete this.coordinates,this.model=ur[K.geometry.type],this.model===void 0)throw new TypeError(K.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(K.geometry.coordinates)};function Te(N){this.map=N.map,this.drawConfig=JSON.parse(JSON.stringify(N.options||{})),this._ctx=N}(Di.prototype=Object.create(Nt.prototype))._coordinatesToFeatures=function(N){var K=this,_e=this.model.bind(this);return N.map(function(qe){return new _e(K.ctx,{id:Qt(),type:ie.FEATURE,properties:{},geometry:{coordinates:qe,type:K.type.replace("Multi","")}})})},Di.prototype.isValid=function(){return this.features.every(function(N){return N.isValid()})},Di.prototype.setCoordinates=function(N){this.features=this._coordinatesToFeatures(N),this.changed()},Di.prototype.getCoordinate=function(N){return cn(this.features,"getCoordinate",N)},Di.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(N){return N.type===ie.POLYGON?N.getCoordinates():N.coordinates})))},Di.prototype.updateCoordinate=function(N,K,_e){cn(this.features,"updateCoordinate",N,K,_e),this.changed()},Di.prototype.addCoordinate=function(N,K,_e){cn(this.features,"addCoordinate",N,K,_e),this.changed()},Di.prototype.removeCoordinate=function(N){cn(this.features,"removeCoordinate",N),this.changed()},Di.prototype.getFeatures=function(){return this.features},Te.prototype.setSelected=function(N){return this._ctx.store.setSelected(N)},Te.prototype.setSelectedCoordinates=function(N){var K=this;this._ctx.store.setSelectedCoordinates(N),N.reduce(function(_e,qe){return _e[qe.feature_id]===void 0&&(_e[qe.feature_id]=!0,K._ctx.store.get(qe.feature_id).changed()),_e},{})},Te.prototype.getSelected=function(){return this._ctx.store.getSelected()},Te.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Te.prototype.isSelected=function(N){return this._ctx.store.isSelected(N)},Te.prototype.getFeature=function(N){return this._ctx.store.get(N)},Te.prototype.select=function(N){return this._ctx.store.select(N)},Te.prototype.deselect=function(N){return this._ctx.store.deselect(N)},Te.prototype.deleteFeature=function(N,K){return K===void 0&&(K={}),this._ctx.store.delete(N,K)},Te.prototype.addFeature=function(N){return this._ctx.store.add(N)},Te.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Te.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Te.prototype.setActionableState=function(N){N===void 0&&(N={});var K={trash:N.trash||!1,combineFeatures:N.combineFeatures||!1,uncombineFeatures:N.uncombineFeatures||!1};return this._ctx.events.actionable(K)},Te.prototype.changeMode=function(N,K,_e){return K===void 0&&(K={}),_e===void 0&&(_e={}),this._ctx.events.changeMode(N,K,_e)},Te.prototype.updateUIClasses=function(N){return this._ctx.ui.queueMapClasses(N)},Te.prototype.activateUIButton=function(N){return this._ctx.ui.setActiveButton(N)},Te.prototype.featuresAt=function(N,K,_e){if(_e===void 0&&(_e="click"),_e!=="click"&&_e!=="touch")throw new Error("invalid buffer type");return Be[_e](N,K,this._ctx)},Te.prototype.newFeature=function(N){var K=N.geometry.type;return K===ie.POINT?new Sr(this._ctx,N):K===ie.LINE_STRING?new Ui(this._ctx,N):K===ie.POLYGON?new ci(this._ctx,N):new Di(this._ctx,N)},Te.prototype.isInstanceOf=function(N,K){if(N===ie.POINT)return K instanceof Sr;if(N===ie.LINE_STRING)return K instanceof Ui;if(N===ie.POLYGON)return K instanceof ci;if(N==="MultiFeature")return K instanceof Di;throw new Error("Unknown feature class: "+N)},Te.prototype.doRender=function(N){return this._ctx.store.featureChanged(N)},Te.prototype.onSetup=function(){},Te.prototype.onDrag=function(){},Te.prototype.onClick=function(){},Te.prototype.onMouseMove=function(){},Te.prototype.onMouseDown=function(){},Te.prototype.onMouseUp=function(){},Te.prototype.onMouseOut=function(){},Te.prototype.onKeyUp=function(){},Te.prototype.onKeyDown=function(){},Te.prototype.onTouchStart=function(){},Te.prototype.onTouchMove=function(){},Te.prototype.onTouchEnd=function(){},Te.prototype.onTap=function(){},Te.prototype.onStop=function(){},Te.prototype.onTrash=function(){},Te.prototype.onCombineFeature=function(){},Te.prototype.onUncombineFeature=function(){},Te.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var On={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Bn=Object.keys(On);function En(N){var K=Object.keys(N);return function(_e,qe){qe===void 0&&(qe={});var nt={},ot=K.reduce(function(pt,Jt){return pt[Jt]=N[Jt],pt},new Te(_e));return{start:function(){var pt=this;nt=ot.onSetup(qe),Bn.forEach(function(Jt){var si,Ut=On[Jt],mi=function(){return!1};N[Ut]&&(mi=function(){return!0}),pt.on(Jt,mi,(si=Ut,function($t){return ot[si](nt,$t)}))})},stop:function(){ot.onStop(nt)},trash:function(){ot.onTrash(nt)},combineFeatures:function(){ot.onCombineFeatures(nt)},uncombineFeatures:function(){ot.onUncombineFeatures(nt)},render:function(pt,Jt){ot.toDisplayFeatures(nt,pt,Jt)}}}}function Pt(N){return[].concat(N).filter(function(K){return K!==void 0})}function Jn(){var N=this;if(!(N.ctx.map&&N.ctx.map.getSource(X.HOT)!==void 0))return si();var K=N.ctx.events.currentModeName();N.ctx.ui.queueMapClasses({mode:K});var _e=[],qe=[];N.isDirty?qe=N.getAllIds():(_e=N.getChangedIds().filter(function(Ut){return N.get(Ut)!==void 0}),qe=N.sources.hot.filter(function(Ut){return Ut.properties.id&&_e.indexOf(Ut.properties.id)===-1&&N.get(Ut.properties.id)!==void 0}).map(function(Ut){return Ut.properties.id})),N.sources.hot=[];var nt=N.sources.cold.length;N.sources.cold=N.isDirty?[]:N.sources.cold.filter(function(Ut){var mi=Ut.properties.id||Ut.properties.parent;return _e.indexOf(mi)===-1});var ot=nt!==N.sources.cold.length||qe.length>0;function pt(Ut,mi){var $t=N.get(Ut).internal(K);N.ctx.events.currentModeRender($t,function(Ji){N.sources[mi].push(Ji)})}if(_e.forEach(function(Ut){return pt(Ut,"hot")}),qe.forEach(function(Ut){return pt(Ut,"cold")}),ot&&N.ctx.map.getSource(X.COLD).setData({type:ie.FEATURE_COLLECTION,features:N.sources.cold}),N.ctx.map.getSource(X.HOT).setData({type:ie.FEATURE_COLLECTION,features:N.sources.hot}),N._emitSelectionChange&&(N.ctx.map.fire(de.SELECTION_CHANGE,{features:N.getSelected().map(function(Ut){return Ut.toGeoJSON()}),points:N.getSelectedCoordinates().map(function(Ut){return{type:ie.FEATURE,properties:{},geometry:{type:ie.POINT,coordinates:Ut.coordinates}}})}),N._emitSelectionChange=!1),N._deletedFeaturesToEmit.length){var Jt=N._deletedFeaturesToEmit.map(function(Ut){return Ut.toGeoJSON()});N._deletedFeaturesToEmit=[],N.ctx.map.fire(de.DELETE,{features:Jt})}function si(){N.isDirty=!1,N.clearChangedIds()}si(),N.ctx.map.fire(de.RENDER,{})}function Xi(N){var K,_e=this;this._features={},this._featureIds=new Ue,this._selectedFeatureIds=new Ue,this._selectedCoordinates=[],this._changedFeatureIds=new Ue,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=N,this.sources={hot:[],cold:[]},this.render=function(){K||(K=requestAnimationFrame(function(){K=null,Jn.call(_e)}))},this.isDirty=!1}function lo(N,K){var _e=N._selectedCoordinates.filter(function(qe){return N._selectedFeatureIds.has(qe.feature_id)});N._selectedCoordinates.length===_e.length||K.silent||(N._emitSelectionChange=!0),N._selectedCoordinates=_e}Xi.prototype.createRenderBatch=function(){var N=this,K=this.render,_e=0;return this.render=function(){_e++},function(){N.render=K,_e>0&&N.render()}},Xi.prototype.setDirty=function(){return this.isDirty=!0,this},Xi.prototype.featureChanged=function(N){return this._changedFeatureIds.add(N),this},Xi.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Xi.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Xi.prototype.getAllIds=function(){return this._featureIds.values()},Xi.prototype.add=function(N){return this.featureChanged(N.id),this._features[N.id]=N,this._featureIds.add(N.id),this},Xi.prototype.delete=function(N,K){var _e=this;return K===void 0&&(K={}),Pt(N).forEach(function(qe){_e._featureIds.has(qe)&&(_e._featureIds.delete(qe),_e._selectedFeatureIds.delete(qe),K.silent||_e._deletedFeaturesToEmit.indexOf(_e._features[qe])===-1&&_e._deletedFeaturesToEmit.push(_e._features[qe]),delete _e._features[qe],_e.isDirty=!0)}),lo(this,K),this},Xi.prototype.get=function(N){return this._features[N]},Xi.prototype.getAll=function(){var N=this;return Object.keys(this._features).map(function(K){return N._features[K]})},Xi.prototype.select=function(N,K){var _e=this;return K===void 0&&(K={}),Pt(N).forEach(function(qe){_e._selectedFeatureIds.has(qe)||(_e._selectedFeatureIds.add(qe),_e._changedFeatureIds.add(qe),K.silent||(_e._emitSelectionChange=!0))}),this},Xi.prototype.deselect=function(N,K){var _e=this;return K===void 0&&(K={}),Pt(N).forEach(function(qe){_e._selectedFeatureIds.has(qe)&&(_e._selectedFeatureIds.delete(qe),_e._changedFeatureIds.add(qe),K.silent||(_e._emitSelectionChange=!0))}),lo(this,K),this},Xi.prototype.clearSelected=function(N){return N===void 0&&(N={}),this.deselect(this._selectedFeatureIds.values(),{silent:N.silent}),this},Xi.prototype.setSelected=function(N,K){var _e=this;return K===void 0&&(K={}),N=Pt(N),this.deselect(this._selectedFeatureIds.values().filter(function(qe){return N.indexOf(qe)===-1}),{silent:K.silent}),this.select(N.filter(function(qe){return!_e._selectedFeatureIds.has(qe)}),{silent:K.silent}),this},Xi.prototype.setSelectedCoordinates=function(N){return this._selectedCoordinates=N,this._emitSelectionChange=!0,this},Xi.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Xi.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Xi.prototype.getSelected=function(){var N=this;return this._selectedFeatureIds.values().map(function(K){return N.get(K)})},Xi.prototype.getSelectedCoordinates=function(){var N=this;return this._selectedCoordinates.map(function(K){return{coordinates:N.get(K.feature_id).getCoordinate(K.coord_path)}})},Xi.prototype.isSelected=function(N){return this._selectedFeatureIds.has(N)},Xi.prototype.setFeatureProperty=function(N,K,_e){this.get(N).setProperty(K,_e),this.featureChanged(N)},Xi.prototype.storeMapConfig=function(){var N=this;Ce.forEach(function(K){N.ctx.map[K]&&(N._mapInitialConfig[K]=N.ctx.map[K].isEnabled())})},Xi.prototype.restoreMapConfig=function(){var N=this;Object.keys(this._mapInitialConfig).forEach(function(K){N._mapInitialConfig[K]?N.ctx.map[K].enable():N.ctx.map[K].disable()})},Xi.prototype.getInitialConfigValue=function(N){return this._mapInitialConfig[N]===void 0||this._mapInitialConfig[N]};var Oi=function(){for(var N=arguments,K={},_e=0;_e<arguments.length;_e++){var qe=N[_e];for(var nt in qe)un.call(qe,nt)&&(K[nt]=qe[nt])}return K},un=Object.prototype.hasOwnProperty,Xr=s(Oi),Do=["mode","feature","mouse"];function hi(N){var K=null,_e=null,qe={onRemove:function(){return N.map.off("load",qe.connect),clearInterval(_e),qe.removeLayers(),N.store.restoreMapConfig(),N.ui.removeButtons(),N.events.removeEventListeners(),N.ui.clearMapClasses(),N.boxZoomInitial&&N.map.boxZoom.enable(),N.map=null,N.container=null,N.store=null,K&&K.parentNode&&K.parentNode.removeChild(K),K=null,this},connect:function(){N.map.off("load",qe.connect),clearInterval(_e),qe.addLayers(),N.store.storeMapConfig(),N.events.addEventListeners()},onAdd:function(nt){var ot=nt.fire;return nt.fire=function(pt,Jt){var si=arguments;return ot.length===1&&arguments.length!==1&&(si=[Xr({},{type:pt},Jt)]),ot.apply(nt,si)},N.map=nt,N.events=function(pt){var Jt=Object.keys(pt.options.modes).reduce(function(Ht,wi){return Ht[wi]=En(pt.options.modes[wi]),Ht},{}),si={},Ut={},mi={},$t=null,Ji=null;mi.drag=function(Ht,wi){wi({point:Ht.point,time:new Date().getTime()})?(pt.ui.queueMapClasses({mouse:J.DRAG}),Ji.drag(Ht)):Ht.originalEvent.stopPropagation()},mi.mousedrag=function(Ht){mi.drag(Ht,function(wi){return!Dt(si,wi)})},mi.touchdrag=function(Ht){mi.drag(Ht,function(wi){return!bt(Ut,wi)})},mi.mousemove=function(Ht){if((Ht.originalEvent.buttons!==void 0?Ht.originalEvent.buttons:Ht.originalEvent.which)===1)return mi.mousedrag(Ht);var wi=xt(Ht,pt);Ht.featureTarget=wi,Ji.mousemove(Ht)},mi.mousedown=function(Ht){si={time:new Date().getTime(),point:Ht.point};var wi=xt(Ht,pt);Ht.featureTarget=wi,Ji.mousedown(Ht)},mi.mouseup=function(Ht){var wi=xt(Ht,pt);Ht.featureTarget=wi,Dt(si,{point:Ht.point,time:new Date().getTime()})?Ji.click(Ht):Ji.mouseup(Ht)},mi.mouseout=function(Ht){Ji.mouseout(Ht)},mi.touchstart=function(Ht){if(pt.options.touchEnabled){Ut={time:new Date().getTime(),point:Ht.point};var wi=Be.touch(Ht,null,pt)[0];Ht.featureTarget=wi,Ji.touchstart(Ht)}},mi.touchmove=function(Ht){if(pt.options.touchEnabled)return Ji.touchmove(Ht),mi.touchdrag(Ht)},mi.touchend=function(Ht){if(Ht.originalEvent.preventDefault(),pt.options.touchEnabled){var wi=Be.touch(Ht,null,pt)[0];Ht.featureTarget=wi,bt(Ut,{time:new Date().getTime(),point:Ht.point})?Ji.tap(Ht):Ji.touchend(Ht)}};var ai=function(Ht){return!(Ht===8||Ht===46||Ht>=48&&Ht<=57)};function Ki(Ht,wi,Nr){Nr===void 0&&(Nr={}),Ji.stop();var tn=Jt[Ht];if(tn===void 0)throw new Error(Ht+" is not valid");$t=Ht;var Wt=tn(pt,wi);Ji=r(Wt,pt),Nr.silent||pt.map.fire(de.MODE_CHANGE,{mode:Ht}),pt.store.setDirty(),pt.store.render()}mi.keydown=function(Ht){(Ht.srcElement||Ht.target).classList.contains("mapboxgl-canvas")&&(Ht.keyCode!==8&&Ht.keyCode!==46||!pt.options.controls.trash?ai(Ht.keyCode)?Ji.keydown(Ht):Ht.keyCode===49&&pt.options.controls.point?Ki(ae.DRAW_POINT):Ht.keyCode===50&&pt.options.controls.line_string?Ki(ae.DRAW_LINE_STRING):Ht.keyCode===51&&pt.options.controls.polygon&&Ki(ae.DRAW_POLYGON):(Ht.preventDefault(),Ji.trash()))},mi.keyup=function(Ht){ai(Ht.keyCode)&&Ji.keyup(Ht)},mi.zoomend=function(){pt.store.changeZoom()},mi.data=function(Ht){if(Ht.dataType==="style"){var wi=pt.setup,Nr=pt.map,tn=pt.options,Wt=pt.store;tn.styles.some(function(Qi){return Nr.getLayer(Qi.id)})||(wi.addLayers(),Wt.setDirty(),Wt.render())}};var hn={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){$t=pt.options.defaultMode,Ji=r(Jt[$t](pt),pt)},changeMode:Ki,actionable:function(Ht){var wi=!1;Object.keys(Ht).forEach(function(Nr){if(hn[Nr]===void 0)throw new Error("Invalid action type");hn[Nr]!==Ht[Nr]&&(wi=!0),hn[Nr]=Ht[Nr]}),wi&&pt.map.fire(de.ACTIONABLE,{actions:hn})},currentModeName:function(){return $t},currentModeRender:function(Ht,wi){return Ji.render(Ht,wi)},fire:function(Ht,wi){mi[Ht]&&mi[Ht](wi)},addEventListeners:function(){pt.map.on("mousemove",mi.mousemove),pt.map.on("mousedown",mi.mousedown),pt.map.on("mouseup",mi.mouseup),pt.map.on("data",mi.data),pt.map.on("touchmove",mi.touchmove),pt.map.on("touchstart",mi.touchstart),pt.map.on("touchend",mi.touchend),pt.container.addEventListener("mouseout",mi.mouseout),pt.options.keybindings&&(pt.container.addEventListener("keydown",mi.keydown),pt.container.addEventListener("keyup",mi.keyup))},removeEventListeners:function(){pt.map.off("mousemove",mi.mousemove),pt.map.off("mousedown",mi.mousedown),pt.map.off("mouseup",mi.mouseup),pt.map.off("data",mi.data),pt.map.off("touchmove",mi.touchmove),pt.map.off("touchstart",mi.touchstart),pt.map.off("touchend",mi.touchend),pt.container.removeEventListener("mouseout",mi.mouseout),pt.options.keybindings&&(pt.container.removeEventListener("keydown",mi.keydown),pt.container.removeEventListener("keyup",mi.keyup))},trash:function(Ht){Ji.trash(Ht)},combineFeatures:function(){Ji.combineFeatures()},uncombineFeatures:function(){Ji.uncombineFeatures()},getMode:function(){return $t}}}(N),N.ui=function(pt){var Jt={},si=null,Ut={mode:null,feature:null,mouse:null},mi={mode:null,feature:null,mouse:null};function $t(Ht){mi=Xr(mi,Ht)}function Ji(){var Ht,wi;if(pt.container){var Nr=[],tn=[];Do.forEach(function(Wt){mi[Wt]!==Ut[Wt]&&(Nr.push(Wt+"-"+Ut[Wt]),mi[Wt]!==null&&tn.push(Wt+"-"+mi[Wt]))}),Nr.length>0&&(Ht=pt.container.classList).remove.apply(Ht,Nr),tn.length>0&&(wi=pt.container.classList).add.apply(wi,tn),Ut=Xr(Ut,mi)}}function ai(Ht,wi){wi===void 0&&(wi={});var Nr=document.createElement("button");return Nr.className=V.CONTROL_BUTTON+" "+wi.className,Nr.setAttribute("title",wi.title),wi.container.appendChild(Nr),Nr.addEventListener("click",function(tn){if(tn.preventDefault(),tn.stopPropagation(),tn.target===si)return Ki(),void wi.onDeactivate();hn(Ht),wi.onActivate()},!0),Nr}function Ki(){si&&(si.classList.remove(V.ACTIVE_BUTTON),si=null)}function hn(Ht){Ki();var wi=Jt[Ht];wi&&wi&&Ht!=="trash"&&(wi.classList.add(V.ACTIVE_BUTTON),si=wi)}return{setActiveButton:hn,queueMapClasses:$t,updateMapClasses:Ji,clearMapClasses:function(){$t({mode:null,feature:null,mouse:null}),Ji()},addButtons:function(){var Ht=pt.options.controls,wi=document.createElement("div");return wi.className=V.CONTROL_GROUP+" "+V.CONTROL_BASE,Ht&&(Ht[Z.LINE]&&(Jt[Z.LINE]=ai(Z.LINE,{container:wi,className:V.CONTROL_BUTTON_LINE,title:"LineString tool "+(pt.options.keybindings?"(l)":""),onActivate:function(){return pt.events.changeMode(ae.DRAW_LINE_STRING)},onDeactivate:function(){return pt.events.trash()}})),Ht[Z.POLYGON]&&(Jt[Z.POLYGON]=ai(Z.POLYGON,{container:wi,className:V.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(pt.options.keybindings?"(p)":""),onActivate:function(){return pt.events.changeMode(ae.DRAW_POLYGON)},onDeactivate:function(){return pt.events.trash()}})),Ht[Z.POINT]&&(Jt[Z.POINT]=ai(Z.POINT,{container:wi,className:V.CONTROL_BUTTON_POINT,title:"Marker tool "+(pt.options.keybindings?"(m)":""),onActivate:function(){return pt.events.changeMode(ae.DRAW_POINT)},onDeactivate:function(){return pt.events.trash()}})),Ht.trash&&(Jt.trash=ai("trash",{container:wi,className:V.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){pt.events.trash()}})),Ht.combine_features&&(Jt.combine_features=ai("combineFeatures",{container:wi,className:V.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){pt.events.combineFeatures()}})),Ht.uncombine_features&&(Jt.uncombine_features=ai("uncombineFeatures",{container:wi,className:V.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){pt.events.uncombineFeatures()}}))),wi},removeButtons:function(){Object.keys(Jt).forEach(function(Ht){var wi=Jt[Ht];wi.parentNode&&wi.parentNode.removeChild(wi),delete Jt[Ht]})}}}(N),N.container=nt.getContainer(),N.store=new Xi(N),K=N.ui.addButtons(),N.options.boxSelect&&(N.boxZoomInitial=nt.boxZoom.isEnabled(),nt.boxZoom.disable(),nt.dragPan.disable(),nt.dragPan.enable()),nt.loaded()?qe.connect():(nt.on("load",qe.connect),_e=setInterval(function(){nt.loaded()&&qe.connect()},16)),N.events.start(),K},addLayers:function(){N.map.addSource(X.COLD,{data:{type:ie.FEATURE_COLLECTION,features:[]},type:"geojson"}),N.map.addSource(X.HOT,{data:{type:ie.FEATURE_COLLECTION,features:[]},type:"geojson"}),N.options.styles.forEach(function(nt){N.map.addLayer(nt)}),N.store.setDirty(!0),N.store.render()},removeLayers:function(){N.options.styles.forEach(function(nt){N.map.getLayer(nt.id)&&N.map.removeLayer(nt.id)}),N.map.getSource(X.COLD)&&N.map.removeSource(X.COLD),N.map.getSource(X.HOT)&&N.map.removeSource(X.HOT)}};return N.setup=qe,qe}var Rt=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Ot(N){return function(K){var _e=K.featureTarget;return!!_e&&!!_e.properties&&_e.properties.meta===N}}function sr(N){return!!N.originalEvent&&!!N.originalEvent.shiftKey&&N.originalEvent.button===0}function hr(N){return!!N.featureTarget&&!!N.featureTarget.properties&&N.featureTarget.properties.active===he.ACTIVE&&N.featureTarget.properties.meta===le.FEATURE}function Mr(N){return!!N.featureTarget&&!!N.featureTarget.properties&&N.featureTarget.properties.active===he.INACTIVE&&N.featureTarget.properties.meta===le.FEATURE}function Gi(N){return N.featureTarget===void 0}function Vr(N){return!!N.featureTarget&&!!N.featureTarget.properties&&N.featureTarget.properties.meta===le.FEATURE}function Vn(N){var K=N.featureTarget;return!!K&&!!K.properties&&K.properties.meta===le.VERTEX}function ts(N){return!!N.originalEvent&&N.originalEvent.shiftKey===!0}function bs(N){return N.keyCode===27}function Po(N){return N.keyCode===13}var ws=Object.freeze({__proto__:null,isOfMetaType:Ot,isShiftMousedown:sr,isActiveFeature:hr,isInactiveFeature:Mr,noTarget:Gi,isFeature:Vr,isVertex:Vn,isShiftDown:ts,isEscapeKey:bs,isEnterKey:Po,isTrue:function(){return!0}}),vo=to;function to(N,K){this.x=N,this.y=K}to.prototype={clone:function(){return new to(this.x,this.y)},add:function(N){return this.clone()._add(N)},sub:function(N){return this.clone()._sub(N)},multByPoint:function(N){return this.clone()._multByPoint(N)},divByPoint:function(N){return this.clone()._divByPoint(N)},mult:function(N){return this.clone()._mult(N)},div:function(N){return this.clone()._div(N)},rotate:function(N){return this.clone()._rotate(N)},rotateAround:function(N,K){return this.clone()._rotateAround(N,K)},matMult:function(N){return this.clone()._matMult(N)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(N){return this.x===N.x&&this.y===N.y},dist:function(N){return Math.sqrt(this.distSqr(N))},distSqr:function(N){var K=N.x-this.x,_e=N.y-this.y;return K*K+_e*_e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(N){return Math.atan2(this.y-N.y,this.x-N.x)},angleWith:function(N){return this.angleWithSep(N.x,N.y)},angleWithSep:function(N,K){return Math.atan2(this.x*K-this.y*N,this.x*N+this.y*K)},_matMult:function(N){var K=N[0]*this.x+N[1]*this.y,_e=N[2]*this.x+N[3]*this.y;return this.x=K,this.y=_e,this},_add:function(N){return this.x+=N.x,this.y+=N.y,this},_sub:function(N){return this.x-=N.x,this.y-=N.y,this},_mult:function(N){return this.x*=N,this.y*=N,this},_div:function(N){return this.x/=N,this.y/=N,this},_multByPoint:function(N){return this.x*=N.x,this.y*=N.y,this},_divByPoint:function(N){return this.x/=N.x,this.y/=N.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var N=this.y;return this.y=this.x,this.x=-N,this},_rotate:function(N){var K=Math.cos(N),_e=Math.sin(N),qe=K*this.x-_e*this.y,nt=_e*this.x+K*this.y;return this.x=qe,this.y=nt,this},_rotateAround:function(N,K){var _e=Math.cos(N),qe=Math.sin(N),nt=K.x+_e*(this.x-K.x)-qe*(this.y-K.y),ot=K.y+qe*(this.x-K.x)+_e*(this.y-K.y);return this.x=nt,this.y=ot,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},to.convert=function(N){return N instanceof to?N:Array.isArray(N)?new to(N[0],N[1]):N};var Rc=s(vo);function Yi(N,K){var _e=K.getBoundingClientRect();return new Rc(N.clientX-_e.left-(K.clientLeft||0),N.clientY-_e.top-(K.clientTop||0))}function xo(N,K,_e,qe){return{type:ie.FEATURE,properties:{meta:le.VERTEX,parent:N,coord_path:_e,active:qe?he.ACTIVE:he.INACTIVE},geometry:{type:ie.POINT,coordinates:K}}}function Lc(N,K,_e){var qe=K.geometry.coordinates,nt=_e.geometry.coordinates;if(qe[1]>85||qe[1]<Le||nt[1]>85||nt[1]<Le)return null;var ot={lng:(qe[0]+nt[0])/2,lat:(qe[1]+nt[1])/2};return{type:ie.FEATURE,properties:{meta:le.MIDPOINT,parent:N,lng:ot.lng,lat:ot.lat,coord_path:_e.properties.coord_path},geometry:{type:ie.POINT,coordinates:[ot.lng,ot.lat]}}}function co(N,K,_e){K===void 0&&(K={}),_e===void 0&&(_e=null);var qe,nt=N.geometry,ot=nt.type,pt=nt.coordinates,Jt=N.properties&&N.properties.id,si=[];function Ut($t,Ji){var ai="",Ki=null;$t.forEach(function(hn,Ht){var wi=Ji!=null?Ji+"."+Ht:String(Ht),Nr=xo(Jt,hn,wi,mi(wi));if(K.midpoints&&Ki){var tn=Lc(Jt,Ki,Nr);tn&&si.push(tn)}Ki=Nr;var Wt=JSON.stringify(hn);ai!==Wt&&si.push(Nr),Ht===0&&(ai=Wt)})}function mi($t){return!!K.selectedPaths&&K.selectedPaths.indexOf($t)!==-1}return ot===ie.POINT?si.push(xo(Jt,pt,_e,mi(_e))):ot===ie.POLYGON?pt.forEach(function($t,Ji){Ut($t,_e!==null?_e+"."+Ji:String(Ji))}):ot===ie.LINE_STRING?Ut(pt,_e):ot.indexOf(ie.MULTI_PREFIX)===0&&(qe=ot.replace(ie.MULTI_PREFIX,""),pt.forEach(function($t,Ji){var ai={type:ie.FEATURE,properties:N.properties,geometry:{type:qe,coordinates:$t}};si=si.concat(co(ai,K,Ji))})),si}var io={enable:function(N){setTimeout(function(){N.map&&N.map.doubleClickZoom&&N._ctx&&N._ctx.store&&N._ctx.store.getInitialConfigValue&&N._ctx.store.getInitialConfigValue("doubleClickZoom")&&N.map.doubleClickZoom.enable()},0)},disable:function(N){setTimeout(function(){N.map&&N.map.doubleClickZoom&&N.map.doubleClickZoom.disable()},0)}},ka={exports:{}},Wl=function(N){if(!N||!N.type)return null;var K=Zl[N.type];if(!K)return null;if(K==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:N}]};if(K==="feature")return{type:"FeatureCollection",features:[N]};if(K==="featurecollection")return N},Zl={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Oc=s(Wl),ut=Object.freeze({__proto__:null,default:function N(K){switch(K&&K.type||null){case"FeatureCollection":return K.features=K.features.reduce(function(_e,qe){return _e.concat(N(qe))},[]),K;case"Feature":return K.geometry?N(K.geometry).map(function(_e){var qe={type:"Feature",properties:JSON.parse(JSON.stringify(K.properties)),geometry:_e};return K.id!==void 0&&(qe.id=K.id),qe}):[K];case"MultiPoint":return K.coordinates.map(function(_e){return{type:"Point",coordinates:_e}});case"MultiPolygon":return K.coordinates.map(function(_e){return{type:"Polygon",coordinates:_e}});case"MultiLineString":return K.coordinates.map(function(_e){return{type:"LineString",coordinates:_e}});case"GeometryCollection":return K.geometries.map(N).reduce(function(_e,qe){return _e.concat(qe)},[]);case"Point":case"Polygon":case"LineString":return[K]}}}),oe=Wl,ce=l(ut),Se=function(N){return function K(_e){return Array.isArray(_e)&&_e.length&&typeof _e[0]=="number"?[_e]:_e.reduce(function(qe,nt){return Array.isArray(nt)&&Array.isArray(nt[0])?qe.concat(K(nt)):(qe.push(nt),qe)},[])}(N)};ce instanceof Function||(ce=ce.default);var je={exports:{}},De=je.exports=function(N){return new Ge(N)};function Ge(N){this.value=N}function lt(N,K,_e){var qe=[],nt=[],ot=!0;return function pt(Jt){var si=_e?Je(Jt):Jt,Ut={},mi=!0,$t={node:si,node_:Jt,path:[].concat(qe),parent:nt[nt.length-1],parents:nt,key:qe.slice(-1)[0],isRoot:qe.length===0,level:qe.length,circular:null,update:function(Ki,hn){$t.isRoot||($t.parent.node[$t.key]=Ki),$t.node=Ki,hn&&(mi=!1)},delete:function(Ki){delete $t.parent.node[$t.key],Ki&&(mi=!1)},remove:function(Ki){mt($t.parent.node)?$t.parent.node.splice($t.key,1):delete $t.parent.node[$t.key],Ki&&(mi=!1)},keys:null,before:function(Ki){Ut.before=Ki},after:function(Ki){Ut.after=Ki},pre:function(Ki){Ut.pre=Ki},post:function(Ki){Ut.post=Ki},stop:function(){ot=!1},block:function(){mi=!1}};if(!ot)return $t;function Ji(){if(typeof $t.node=="object"&&$t.node!==null){$t.keys&&$t.node_===$t.node||($t.keys=at($t.node)),$t.isLeaf=$t.keys.length==0;for(var Ki=0;Ki<nt.length;Ki++)if(nt[Ki].node_===Jt){$t.circular=nt[Ki];break}}else $t.isLeaf=!0,$t.keys=null;$t.notLeaf=!$t.isLeaf,$t.notRoot=!$t.isRoot}Ji();var ai=K.call($t,$t.node);return ai!==void 0&&$t.update&&$t.update(ai),Ut.before&&Ut.before.call($t,$t.node),mi&&(typeof $t.node!="object"||$t.node===null||$t.circular||(nt.push($t),Ji(),kt($t.keys,function(Ki,hn){qe.push(Ki),Ut.pre&&Ut.pre.call($t,$t.node[Ki],Ki);var Ht=pt($t.node[Ki]);_e&&Zt.call($t.node,Ki)&&($t.node[Ki]=Ht.node),Ht.isLast=hn==$t.keys.length-1,Ht.isFirst=hn==0,Ut.post&&Ut.post.call($t,Ht),qe.pop()}),nt.pop()),Ut.after&&Ut.after.call($t,$t.node)),$t}(N).node}function Je(N){if(typeof N=="object"&&N!==null){var K;if(mt(N))K=[];else if(ft(N)==="[object Date]")K=new Date(N.getTime?N.getTime():N);else if(function(nt){return ft(nt)==="[object RegExp]"}(N))K=new RegExp(N);else if(function(nt){return ft(nt)==="[object Error]"}(N))K={message:N.message};else if(function(nt){return ft(nt)==="[object Boolean]"}(N))K=new Boolean(N);else if(function(nt){return ft(nt)==="[object Number]"}(N))K=new Number(N);else if(function(nt){return ft(nt)==="[object String]"}(N))K=new String(N);else if(Object.create&&Object.getPrototypeOf)K=Object.create(Object.getPrototypeOf(N));else if(N.constructor===Object)K={};else{var _e=N.constructor&&N.constructor.prototype||N.__proto__||{},qe=function(){};qe.prototype=_e,K=new qe}return kt(at(N),function(nt){K[nt]=N[nt]}),K}return N}Ge.prototype.get=function(N){for(var K=this.value,_e=0;_e<N.length;_e++){var qe=N[_e];if(!K||!Zt.call(K,qe)){K=void 0;break}K=K[qe]}return K},Ge.prototype.has=function(N){for(var K=this.value,_e=0;_e<N.length;_e++){var qe=N[_e];if(!K||!Zt.call(K,qe))return!1;K=K[qe]}return!0},Ge.prototype.set=function(N,K){for(var _e=this.value,qe=0;qe<N.length-1;qe++){var nt=N[qe];Zt.call(_e,nt)||(_e[nt]={}),_e=_e[nt]}return _e[N[qe]]=K,K},Ge.prototype.map=function(N){return lt(this.value,N,!0)},Ge.prototype.forEach=function(N){return this.value=lt(this.value,N,!1),this.value},Ge.prototype.reduce=function(N,K){var _e=arguments.length===1,qe=_e?this.value:K;return this.forEach(function(nt){this.isRoot&&_e||(qe=N.call(this,qe,nt))}),qe},Ge.prototype.paths=function(){var N=[];return this.forEach(function(K){N.push(this.path)}),N},Ge.prototype.nodes=function(){var N=[];return this.forEach(function(K){N.push(this.node)}),N},Ge.prototype.clone=function(){var N=[],K=[];return function _e(qe){for(var nt=0;nt<N.length;nt++)if(N[nt]===qe)return K[nt];if(typeof qe=="object"&&qe!==null){var ot=Je(qe);return N.push(qe),K.push(ot),kt(at(qe),function(pt){ot[pt]=_e(qe[pt])}),N.pop(),K.pop(),ot}return qe}(this.value)};var at=Object.keys||function(N){var K=[];for(var _e in N)K.push(_e);return K};function ft(N){return Object.prototype.toString.call(N)}var mt=Array.isArray||function(N){return Object.prototype.toString.call(N)==="[object Array]"},kt=function(N,K){if(N.forEach)return N.forEach(K);for(var _e=0;_e<N.length;_e++)K(N[_e],_e,N)};kt(at(Ge.prototype),function(N){De[N]=function(K){var _e=[].slice.call(arguments,1),qe=new Ge(K);return qe[N].apply(qe,_e)}});var Zt=Object.hasOwnProperty||function(N,K){return K in N},ni=je.exports,Ii=xi;function xi(N){if(!(this instanceof xi))return new xi(N);this._bbox=N||[1/0,1/0,-1/0,-1/0],this._valid=!!N}xi.prototype.include=function(N){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],N[0]),this._bbox[1]=Math.min(this._bbox[1],N[1]),this._bbox[2]=Math.max(this._bbox[2],N[0]),this._bbox[3]=Math.max(this._bbox[3],N[1]),this},xi.prototype.equals=function(N){var K;return K=N instanceof xi?N.bbox():N,this._bbox[0]==K[0]&&this._bbox[1]==K[1]&&this._bbox[2]==K[2]&&this._bbox[3]==K[3]},xi.prototype.center=function(N){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},xi.prototype.union=function(N){var K;return this._valid=!0,K=N instanceof xi?N.bbox():N,this._bbox[0]=Math.min(this._bbox[0],K[0]),this._bbox[1]=Math.min(this._bbox[1],K[1]),this._bbox[2]=Math.max(this._bbox[2],K[2]),this._bbox[3]=Math.max(this._bbox[3],K[3]),this},xi.prototype.bbox=function(){return this._valid?this._bbox:null},xi.prototype.contains=function(N){if(!N)return this._fastContains();if(!this._valid)return null;var K=N[0],_e=N[1];return this._bbox[0]<=K&&this._bbox[1]<=_e&&this._bbox[2]>=K&&this._bbox[3]>=_e},xi.prototype.intersect=function(N){return this._valid?(K=N instanceof xi?N.bbox():N,!(this._bbox[0]>K[2]||this._bbox[2]<K[0]||this._bbox[3]<K[1]||this._bbox[1]>K[3])):null;var K},xi.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var N="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",N)},xi.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var ki=function(N){if(!N)return[];var K=ce(oe(N)),_e=[];return K.features.forEach(function(qe){qe.geometry&&(_e=_e.concat(Se(qe.geometry.coordinates)))}),_e},zi=ni,pr=Ii,nr={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Vi=Object.keys(nr);function yr(N){for(var K=pr(),_e=ki(N),qe=0;qe<_e.length;qe++)K.include(_e[qe]);return K}ka.exports=function(N){return yr(N).bbox()},ka.exports.polygon=function(N){return yr(N).polygon()},ka.exports.bboxify=function(N){return zi(N).map(function(K){K&&Vi.some(function(_e){return!!K[_e]&&nr[_e].indexOf(K.type)!==-1})&&(K.bbox=yr(K).bbox(),this.update(K))})};var Fr=s(ka.exports),bn=-90;function Fn(N,K){var _e=bn,qe=90,nt=bn,ot=90,pt=270,Jt=-270;N.forEach(function(Ut){var mi=Fr(Ut),$t=mi[1],Ji=mi[3],ai=mi[0],Ki=mi[2];$t>_e&&(_e=$t),Ji<qe&&(qe=Ji),Ji>nt&&(nt=Ji),$t<ot&&(ot=$t),ai<pt&&(pt=ai),Ki>Jt&&(Jt=Ki)});var si=K;return _e+si.lat>85&&(si.lat=85-_e),nt+si.lat>90&&(si.lat=90-nt),qe+si.lat<-85&&(si.lat=-85-qe),ot+si.lat<bn&&(si.lat=bn-ot),pt+si.lng<=-270&&(si.lng+=360*Math.ceil(Math.abs(si.lng)/360)),Jt+si.lng>=270&&(si.lng-=360*Math.ceil(Math.abs(si.lng)/360)),si}function _n(N,K){var _e=Fn(N.map(function(qe){return qe.toGeoJSON()}),K);N.forEach(function(qe){var nt,ot=qe.getCoordinates(),pt=function(si){var Ut={lng:si[0]+_e.lng,lat:si[1]+_e.lat};return[Ut.lng,Ut.lat]},Jt=function(si){return si.map(function(Ut){return pt(Ut)})};qe.type===ie.POINT?nt=pt(ot):qe.type===ie.LINE_STRING||qe.type===ie.MULTI_POINT?nt=ot.map(pt):qe.type===ie.POLYGON||qe.type===ie.MULTI_LINE_STRING?nt=ot.map(Jt):qe.type===ie.MULTI_POLYGON&&(nt=ot.map(function(si){return si.map(function(Ut){return Jt(Ut)})})),qe.incomingCoords(nt)})}var Ir={onSetup:function(N){var K=this,_e={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:N.featureIds||[]};return this.setSelected(_e.initiallySelectedFeatureIds.filter(function(qe){return K.getFeature(qe)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),_e},fireUpdate:function(){this.map.fire(de.UPDATE,{action:fe.MOVE,features:this.getSelected().map(function(N){return N.toGeoJSON()})})},fireActionable:function(){var N=this,K=this.getSelected(),_e=K.filter(function(Jt){return N.isInstanceOf("MultiFeature",Jt)}),qe=!1;if(K.length>1){qe=!0;var nt=K[0].type.replace("Multi","");K.forEach(function(Jt){Jt.type.replace("Multi","")!==nt&&(qe=!1)})}var ot=_e.length>0,pt=K.length>0;this.setActionableState({combineFeatures:qe,uncombineFeatures:ot,trash:pt})},getUniqueIds:function(N){return N.length?N.map(function(K){return K.properties.id}).filter(function(K){return K!==void 0}).reduce(function(K,_e){return K.add(_e),K},new Ue).values():[]},stopExtendedInteractions:function(N){N.boxSelectElement&&(N.boxSelectElement.parentNode&&N.boxSelectElement.parentNode.removeChild(N.boxSelectElement),N.boxSelectElement=null),this.map.dragPan.enable(),N.boxSelecting=!1,N.canBoxSelect=!1,N.dragMoving=!1,N.canDragMove=!1},onStop:function(){io.enable(this)},onMouseMove:function(N,K){return Vr(K)&&N.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(N),!0},onMouseOut:function(N){return!N.dragMoving||this.fireUpdate()}};Ir.onTap=Ir.onClick=function(N,K){return Gi(K)?this.clickAnywhere(N,K):Ot(le.VERTEX)(K)?this.clickOnVertex(N,K):Vr(K)?this.clickOnFeature(N,K):void 0},Ir.clickAnywhere=function(N){var K=this,_e=this.getSelectedIds();_e.length&&(this.clearSelectedFeatures(),_e.forEach(function(qe){return K.doRender(qe)})),io.enable(this),this.stopExtendedInteractions(N)},Ir.clickOnVertex=function(N,K){this.changeMode(ae.DIRECT_SELECT,{featureId:K.featureTarget.properties.parent,coordPath:K.featureTarget.properties.coord_path,startPos:K.lngLat}),this.updateUIClasses({mouse:J.MOVE})},Ir.startOnActiveFeature=function(N,K){this.stopExtendedInteractions(N),this.map.dragPan.disable(),this.doRender(K.featureTarget.properties.id),N.canDragMove=!0,N.dragMoveLocation=K.lngLat},Ir.clickOnFeature=function(N,K){var _e=this;io.disable(this),this.stopExtendedInteractions(N);var qe=ts(K),nt=this.getSelectedIds(),ot=K.featureTarget.properties.id,pt=this.isSelected(ot);if(!qe&&pt&&this.getFeature(ot).type!==ie.POINT)return this.changeMode(ae.DIRECT_SELECT,{featureId:ot});pt&&qe?(this.deselect(ot),this.updateUIClasses({mouse:J.POINTER}),nt.length===1&&io.enable(this)):!pt&&qe?(this.select(ot),this.updateUIClasses({mouse:J.MOVE})):pt||qe||(nt.forEach(function(Jt){return _e.doRender(Jt)}),this.setSelected(ot),this.updateUIClasses({mouse:J.MOVE})),this.doRender(ot)},Ir.onMouseDown=function(N,K){return hr(K)?this.startOnActiveFeature(N,K):this.drawConfig.boxSelect&&sr(K)?this.startBoxSelect(N,K):void 0},Ir.startBoxSelect=function(N,K){this.stopExtendedInteractions(N),this.map.dragPan.disable(),N.boxSelectStartLocation=Yi(K.originalEvent,this.map.getContainer()),N.canBoxSelect=!0},Ir.onTouchStart=function(N,K){if(hr(K))return this.startOnActiveFeature(N,K)},Ir.onDrag=function(N,K){return N.canDragMove?this.dragMove(N,K):this.drawConfig.boxSelect&&N.canBoxSelect?this.whileBoxSelect(N,K):void 0},Ir.whileBoxSelect=function(N,K){N.boxSelecting=!0,this.updateUIClasses({mouse:J.ADD}),N.boxSelectElement||(N.boxSelectElement=document.createElement("div"),N.boxSelectElement.classList.add(V.BOX_SELECT),this.map.getContainer().appendChild(N.boxSelectElement));var _e=Yi(K.originalEvent,this.map.getContainer()),qe=Math.min(N.boxSelectStartLocation.x,_e.x),nt=Math.max(N.boxSelectStartLocation.x,_e.x),ot=Math.min(N.boxSelectStartLocation.y,_e.y),pt=Math.max(N.boxSelectStartLocation.y,_e.y),Jt="translate("+qe+"px, "+ot+"px)";N.boxSelectElement.style.transform=Jt,N.boxSelectElement.style.WebkitTransform=Jt,N.boxSelectElement.style.width=nt-qe+"px",N.boxSelectElement.style.height=pt-ot+"px"},Ir.dragMove=function(N,K){N.dragMoving=!0,K.originalEvent.stopPropagation();var _e={lng:K.lngLat.lng-N.dragMoveLocation.lng,lat:K.lngLat.lat-N.dragMoveLocation.lat};_n(this.getSelected(),_e),N.dragMoveLocation=K.lngLat},Ir.onTouchEnd=Ir.onMouseUp=function(N,K){var _e=this;if(N.dragMoving)this.fireUpdate();else if(N.boxSelecting){var qe=[N.boxSelectStartLocation,Yi(K.originalEvent,this.map.getContainer())],nt=this.featuresAt(null,qe,"click"),ot=this.getUniqueIds(nt).filter(function(pt){return!_e.isSelected(pt)});ot.length&&(this.select(ot),ot.forEach(function(pt){return _e.doRender(pt)}),this.updateUIClasses({mouse:J.MOVE}))}this.stopExtendedInteractions(N)},Ir.toDisplayFeatures=function(N,K,_e){K.properties.active=this.isSelected(K.properties.id)?he.ACTIVE:he.INACTIVE,_e(K),this.fireActionable(),K.properties.active===he.ACTIVE&&K.geometry.type!==ie.POINT&&co(K).forEach(_e)},Ir.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Ir.onCombineFeatures=function(){var N=this.getSelected();if(!(N.length===0||N.length<2)){for(var K=[],_e=[],qe=N[0].type.replace("Multi",""),nt=0;nt<N.length;nt++){var ot=N[nt];if(ot.type.replace("Multi","")!==qe)return;ot.type.includes("Multi")?ot.getCoordinates().forEach(function(Jt){K.push(Jt)}):K.push(ot.getCoordinates()),_e.push(ot.toGeoJSON())}if(_e.length>1){var pt=this.newFeature({type:ie.FEATURE,properties:_e[0].properties,geometry:{type:"Multi"+qe,coordinates:K}});this.addFeature(pt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([pt.id]),this.map.fire(de.COMBINE_FEATURES,{createdFeatures:[pt.toGeoJSON()],deletedFeatures:_e})}this.fireActionable()}},Ir.onUncombineFeatures=function(){var N=this,K=this.getSelected();if(K.length!==0){for(var _e=[],qe=[],nt=function(pt){var Jt=K[pt];N.isInstanceOf("MultiFeature",Jt)&&(Jt.getFeatures().forEach(function(si){N.addFeature(si),si.properties=Jt.properties,_e.push(si.toGeoJSON()),N.select([si.id])}),N.deleteFeature(Jt.id,{silent:!0}),qe.push(Jt.toGeoJSON()))},ot=0;ot<K.length;ot++)nt(ot);_e.length>1&&this.map.fire(de.UNCOMBINE_FEATURES,{createdFeatures:_e,deletedFeatures:qe}),this.fireActionable()}};var ca=Ot(le.VERTEX),Ss=Ot(le.MIDPOINT),Ms={fireUpdate:function(){this.map.fire(de.UPDATE,{action:fe.CHANGE_COORDINATES,features:this.getSelected().map(function(N){return N.toGeoJSON()})})},fireActionable:function(N){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:N.selectedCoordPaths.length>0})},startDragging:function(N,K){this.map.dragPan.disable(),N.canDragMove=!0,N.dragMoveLocation=K.lngLat},stopDragging:function(N){this.map.dragPan.enable(),N.dragMoving=!1,N.canDragMove=!1,N.dragMoveLocation=null},onVertex:function(N,K){this.startDragging(N,K);var _e=K.featureTarget.properties,qe=N.selectedCoordPaths.indexOf(_e.coord_path);ts(K)||qe!==-1?ts(K)&&qe===-1&&N.selectedCoordPaths.push(_e.coord_path):N.selectedCoordPaths=[_e.coord_path];var nt=this.pathsToCoordinates(N.featureId,N.selectedCoordPaths);this.setSelectedCoordinates(nt)},onMidpoint:function(N,K){this.startDragging(N,K);var _e=K.featureTarget.properties;N.feature.addCoordinate(_e.coord_path,_e.lng,_e.lat),this.fireUpdate(),N.selectedCoordPaths=[_e.coord_path]},pathsToCoordinates:function(N,K){return K.map(function(_e){return{feature_id:N,coord_path:_e}})},onFeature:function(N,K){N.selectedCoordPaths.length===0?this.startDragging(N,K):this.stopDragging(N)},dragFeature:function(N,K,_e){_n(this.getSelected(),_e),N.dragMoveLocation=K.lngLat},dragVertex:function(N,K,_e){for(var qe=N.selectedCoordPaths.map(function(Jt){return N.feature.getCoordinate(Jt)}),nt=Fn(qe.map(function(Jt){return{type:ie.FEATURE,properties:{},geometry:{type:ie.POINT,coordinates:Jt}}}),_e),ot=0;ot<qe.length;ot++){var pt=qe[ot];N.feature.updateCoordinate(N.selectedCoordPaths[ot],pt[0]+nt.lng,pt[1]+nt.lat)}},clickNoTarget:function(){this.changeMode(ae.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(ae.SIMPLE_SELECT)},clickActiveFeature:function(N){N.selectedCoordPaths=[],this.clearSelectedCoordinates(),N.feature.changed()},onSetup:function(N){var K=N.featureId,_e=this.getFeature(K);if(!_e)throw new Error("You must provide a featureId to enter direct_select mode");if(_e.type===ie.POINT)throw new TypeError("direct_select mode doesn't handle point features");var qe={featureId:K,feature:_e,dragMoveLocation:N.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:N.coordPath?[N.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(K,qe.selectedCoordPaths)),this.setSelected(K),io.disable(this),this.setActionableState({trash:!0}),qe},onStop:function(){io.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(N,K,_e){N.featureId===K.properties.id?(K.properties.active=he.ACTIVE,_e(K),co(K,{map:this.map,midpoints:!0,selectedPaths:N.selectedCoordPaths}).forEach(_e)):(K.properties.active=he.INACTIVE,_e(K)),this.fireActionable(N)},onTrash:function(N){N.selectedCoordPaths.sort(function(K,_e){return _e.localeCompare(K,"en",{numeric:!0})}).forEach(function(K){return N.feature.removeCoordinate(K)}),this.fireUpdate(),N.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(N),N.feature.isValid()===!1&&(this.deleteFeature([N.featureId]),this.changeMode(ae.SIMPLE_SELECT,{}))},onMouseMove:function(N,K){var _e=hr(K),qe=ca(K),nt=Ss(K),ot=N.selectedCoordPaths.length===0;return _e&&ot||qe&&!ot?this.updateUIClasses({mouse:J.MOVE}):this.updateUIClasses({mouse:J.NONE}),(qe||_e||nt)&&N.dragMoving&&this.fireUpdate(),this.stopDragging(N),!0},onMouseOut:function(N){return N.dragMoving&&this.fireUpdate(),!0}};Ms.onTouchStart=Ms.onMouseDown=function(N,K){return ca(K)?this.onVertex(N,K):hr(K)?this.onFeature(N,K):Ss(K)?this.onMidpoint(N,K):void 0},Ms.onDrag=function(N,K){if(N.canDragMove===!0){N.dragMoving=!0,K.originalEvent.stopPropagation();var _e={lng:K.lngLat.lng-N.dragMoveLocation.lng,lat:K.lngLat.lat-N.dragMoveLocation.lat};N.selectedCoordPaths.length>0?this.dragVertex(N,K,_e):this.dragFeature(N,K,_e),N.dragMoveLocation=K.lngLat}},Ms.onClick=function(N,K){return Gi(K)?this.clickNoTarget(N,K):hr(K)?this.clickActiveFeature(N,K):Mr(K)?this.clickInactive(N,K):void this.stopDragging(N)},Ms.onTap=function(N,K){return Gi(K)?this.clickNoTarget(N,K):hr(K)?this.clickActiveFeature(N,K):Mr(K)?this.clickInactive(N,K):void 0},Ms.onTouchEnd=Ms.onMouseUp=function(N){N.dragMoving&&this.fireUpdate(),this.stopDragging(N)};var Ho={};function nl(N,K){return!!N.lngLat&&N.lngLat.lng===K[0]&&N.lngLat.lat===K[1]}Ho.onSetup=function(){var N=this.newFeature({type:ie.FEATURE,properties:{},geometry:{type:ie.POINT,coordinates:[]}});return this.addFeature(N),this.clearSelectedFeatures(),this.updateUIClasses({mouse:J.ADD}),this.activateUIButton(Z.POINT),this.setActionableState({trash:!0}),{point:N}},Ho.stopDrawingAndRemove=function(N){this.deleteFeature([N.point.id],{silent:!0}),this.changeMode(ae.SIMPLE_SELECT)},Ho.onTap=Ho.onClick=function(N,K){this.updateUIClasses({mouse:J.MOVE}),N.point.updateCoordinate("",K.lngLat.lng,K.lngLat.lat),this.map.fire(de.CREATE,{features:[N.point.toGeoJSON()]}),this.changeMode(ae.SIMPLE_SELECT,{featureIds:[N.point.id]})},Ho.onStop=function(N){this.activateUIButton(),N.point.getCoordinate().length||this.deleteFeature([N.point.id],{silent:!0})},Ho.toDisplayFeatures=function(N,K,_e){var qe=K.properties.id===N.point.id;if(K.properties.active=qe?he.ACTIVE:he.INACTIVE,!qe)return _e(K)},Ho.onTrash=Ho.stopDrawingAndRemove,Ho.onKeyUp=function(N,K){if(bs(K)||Po(K))return this.stopDrawingAndRemove(N,K)};var ua={onSetup:function(){var N=this.newFeature({type:ie.FEATURE,properties:{},geometry:{type:ie.POLYGON,coordinates:[[]]}});return this.addFeature(N),this.clearSelectedFeatures(),io.disable(this),this.updateUIClasses({mouse:J.ADD}),this.activateUIButton(Z.POLYGON),this.setActionableState({trash:!0}),{polygon:N,currentVertexPosition:0}},clickAnywhere:function(N,K){if(N.currentVertexPosition>0&&nl(K,N.polygon.coordinates[0][N.currentVertexPosition-1]))return this.changeMode(ae.SIMPLE_SELECT,{featureIds:[N.polygon.id]});this.updateUIClasses({mouse:J.ADD}),N.polygon.updateCoordinate("0."+N.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),N.currentVertexPosition++,N.polygon.updateCoordinate("0."+N.currentVertexPosition,K.lngLat.lng,K.lngLat.lat)},clickOnVertex:function(N){return this.changeMode(ae.SIMPLE_SELECT,{featureIds:[N.polygon.id]})},onMouseMove:function(N,K){N.polygon.updateCoordinate("0."+N.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),Vn(K)&&this.updateUIClasses({mouse:J.POINTER})}};ua.onTap=ua.onClick=function(N,K){return Vn(K)?this.clickOnVertex(N,K):this.clickAnywhere(N,K)},ua.onKeyUp=function(N,K){bs(K)?(this.deleteFeature([N.polygon.id],{silent:!0}),this.changeMode(ae.SIMPLE_SELECT)):Po(K)&&this.changeMode(ae.SIMPLE_SELECT,{featureIds:[N.polygon.id]})},ua.onStop=function(N){this.updateUIClasses({mouse:J.NONE}),io.enable(this),this.activateUIButton(),this.getFeature(N.polygon.id)!==void 0&&(N.polygon.removeCoordinate("0."+N.currentVertexPosition),N.polygon.isValid()?this.map.fire(de.CREATE,{features:[N.polygon.toGeoJSON()]}):(this.deleteFeature([N.polygon.id],{silent:!0}),this.changeMode(ae.SIMPLE_SELECT,{},{silent:!0})))},ua.toDisplayFeatures=function(N,K,_e){var qe=K.properties.id===N.polygon.id;if(K.properties.active=qe?he.ACTIVE:he.INACTIVE,!qe)return _e(K);if(K.geometry.coordinates.length!==0){var nt=K.geometry.coordinates[0].length;if(!(nt<3)){if(K.properties.meta=le.FEATURE,_e(xo(N.polygon.id,K.geometry.coordinates[0][0],"0.0",!1)),nt>3){var ot=K.geometry.coordinates[0].length-3;_e(xo(N.polygon.id,K.geometry.coordinates[0][ot],"0."+ot,!1))}if(nt<=4){var pt=[[K.geometry.coordinates[0][0][0],K.geometry.coordinates[0][0][1]],[K.geometry.coordinates[0][1][0],K.geometry.coordinates[0][1][1]]];if(_e({type:ie.FEATURE,properties:K.properties,geometry:{coordinates:pt,type:ie.LINE_STRING}}),nt===3)return}return _e(K)}}},ua.onTrash=function(N){this.deleteFeature([N.polygon.id],{silent:!0}),this.changeMode(ae.SIMPLE_SELECT)};var ha={onSetup:function(N){var K,_e,qe=(N=N||{}).featureId,nt="forward";if(qe){if(!(K=this.getFeature(qe)))throw new Error("Could not find a feature with the provided featureId");var ot=N.from;if(ot&&ot.type==="Feature"&&ot.geometry&&ot.geometry.type==="Point"&&(ot=ot.geometry),ot&&ot.type==="Point"&&ot.coordinates&&ot.coordinates.length===2&&(ot=ot.coordinates),!ot||!Array.isArray(ot))throw new Error("Please use the `from` property to indicate which point to continue the line from");var pt=K.coordinates.length-1;if(K.coordinates[pt][0]===ot[0]&&K.coordinates[pt][1]===ot[1])_e=pt+1,K.addCoordinate.apply(K,[_e].concat(K.coordinates[pt]));else{if(K.coordinates[0][0]!==ot[0]||K.coordinates[0][1]!==ot[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");nt="backwards",_e=0,K.addCoordinate.apply(K,[_e].concat(K.coordinates[0]))}}else K=this.newFeature({type:ie.FEATURE,properties:{},geometry:{type:ie.LINE_STRING,coordinates:[]}}),_e=0,this.addFeature(K);return this.clearSelectedFeatures(),io.disable(this),this.updateUIClasses({mouse:J.ADD}),this.activateUIButton(Z.LINE),this.setActionableState({trash:!0}),{line:K,currentVertexPosition:_e,direction:nt}},clickAnywhere:function(N,K){if(N.currentVertexPosition>0&&nl(K,N.line.coordinates[N.currentVertexPosition-1])||N.direction==="backwards"&&nl(K,N.line.coordinates[N.currentVertexPosition+1]))return this.changeMode(ae.SIMPLE_SELECT,{featureIds:[N.line.id]});this.updateUIClasses({mouse:J.ADD}),N.line.updateCoordinate(N.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),N.direction==="forward"?(N.currentVertexPosition++,N.line.updateCoordinate(N.currentVertexPosition,K.lngLat.lng,K.lngLat.lat)):N.line.addCoordinate(0,K.lngLat.lng,K.lngLat.lat)},clickOnVertex:function(N){return this.changeMode(ae.SIMPLE_SELECT,{featureIds:[N.line.id]})},onMouseMove:function(N,K){N.line.updateCoordinate(N.currentVertexPosition,K.lngLat.lng,K.lngLat.lat),Vn(K)&&this.updateUIClasses({mouse:J.POINTER})}};ha.onTap=ha.onClick=function(N,K){if(Vn(K))return this.clickOnVertex(N,K);this.clickAnywhere(N,K)},ha.onKeyUp=function(N,K){Po(K)?this.changeMode(ae.SIMPLE_SELECT,{featureIds:[N.line.id]}):bs(K)&&(this.deleteFeature([N.line.id],{silent:!0}),this.changeMode(ae.SIMPLE_SELECT))},ha.onStop=function(N){io.enable(this),this.activateUIButton(),this.getFeature(N.line.id)!==void 0&&(N.line.removeCoordinate(""+N.currentVertexPosition),N.line.isValid()?this.map.fire(de.CREATE,{features:[N.line.toGeoJSON()]}):(this.deleteFeature([N.line.id],{silent:!0}),this.changeMode(ae.SIMPLE_SELECT,{},{silent:!0})))},ha.onTrash=function(N){this.deleteFeature([N.line.id],{silent:!0}),this.changeMode(ae.SIMPLE_SELECT)},ha.toDisplayFeatures=function(N,K,_e){var qe=K.properties.id===N.line.id;if(K.properties.active=qe?he.ACTIVE:he.INACTIVE,!qe)return _e(K);K.geometry.coordinates.length<2||(K.properties.meta=le.FEATURE,_e(xo(N.line.id,K.geometry.coordinates[N.direction==="forward"?K.geometry.coordinates.length-2:1],""+(N.direction==="forward"?K.geometry.coordinates.length-2:1),!1)),_e(K))};var ol={simple_select:Ir,direct_select:Ms,draw_point:Ho,draw_polygon:ua,draw_line_string:ha},Xl={defaultMode:ae.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Rt,modes:ol,controls:{},userProperties:!1},is={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Es={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function rs(N,K){return N.map(function(_e){return _e.source?_e:Xr(_e,{id:_e.id+"."+K,source:K==="hot"?X.HOT:X.COLD})})}var uo={exports:{}};(function(N,K){var _e="__lodash_hash_undefined__",qe=9007199254740991,nt="[object Arguments]",ot="[object Array]",pt="[object Boolean]",Jt="[object Date]",si="[object Error]",Ut="[object Function]",mi="[object Map]",$t="[object Number]",Ji="[object Object]",ai="[object Promise]",Ki="[object RegExp]",hn="[object Set]",Ht="[object String]",wi="[object Symbol]",Nr="[object WeakMap]",tn="[object ArrayBuffer]",Wt="[object DataView]",Qi=/^\[object .+?Constructor\]$/,rr=/^(?:0|[1-9]\d*)$/,Er={};Er["[object Float32Array]"]=Er["[object Float64Array]"]=Er["[object Int8Array]"]=Er["[object Int16Array]"]=Er["[object Int32Array]"]=Er["[object Uint8Array]"]=Er["[object Uint8ClampedArray]"]=Er["[object Uint16Array]"]=Er["[object Uint32Array]"]=!0,Er[nt]=Er[ot]=Er[tn]=Er[pt]=Er[Wt]=Er[Jt]=Er[si]=Er[Ut]=Er[mi]=Er[$t]=Er[Ji]=Er[Ki]=Er[hn]=Er[Ht]=Er[Nr]=!1;var ro=typeof At=="object"&&At&&At.Object===Object&&At,or=typeof self=="object"&&self&&self.Object===Object&&self,ns=ro||or||Function("return this")(),al=K&&!K.nodeType&&K,ll=al&&N&&!N.nodeType&&N,ho=ll&&ll.exports===al,on=ho&&ro.process,Th=function(){try{return on&&on.binding&&on.binding("util")}catch{}}(),cl=Th&&Th.isTypedArray;function Jl(gt,It){for(var fi=-1,Bi=gt==null?0:gt.length;++fi<Bi;)if(It(gt[fi],fi,gt))return!0;return!1}function js(gt){var It=-1,fi=Array(gt.size);return gt.forEach(function(Bi,an){fi[++It]=[an,Bi]}),fi}function su(gt){var It=-1,fi=Array(gt.size);return gt.forEach(function(Bi){fi[++It]=Bi}),fi}var ko,no,fo,Hd=Array.prototype,Ra=Function.prototype,dn=Object.prototype,oo=ns["__core-js_shared__"],os=Ra.toString,en=dn.hasOwnProperty,au=(ko=/[^.]+$/.exec(oo&&oo.keys&&oo.keys.IE_PROTO||""))?"Symbol(src)_1."+ko:"",ss=dn.toString,Kl=RegExp("^"+os.call(en).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),La=ho?ns.Buffer:void 0,Us=ns.Symbol,Bc=ns.Uint8Array,Vs=dn.propertyIsEnumerable,rp=Hd.splice,Oa=Us?Us.toStringTag:void 0,bo=Object.getOwnPropertySymbols,np=La?La.isBuffer:void 0,lu=(no=Object.keys,fo=Object,function(gt){return no(fo(gt))}),cu=Ro(ns,"DataView"),qs=Ro(ns,"Map"),Ba=Ro(ns,"Promise"),Ch=Ro(ns,"Set"),ul=Ro(ns,"WeakMap"),Cs=Ro(Object,"create"),op=$a(cu),Ql=$a(qs),Gd=$a(Ba),uu=$a(Ch),Go=$a(ul),qi=Us?Us.prototype:void 0,gi=qi?qi.valueOf:void 0;function da(gt){var It=-1,fi=gt==null?0:gt.length;for(this.clear();++It<fi;){var Bi=gt[It];this.set(Bi[0],Bi[1])}}function Ei(gt){var It=-1,fi=gt==null?0:gt.length;for(this.clear();++It<fi;){var Bi=gt[It];this.set(Bi[0],Bi[1])}}function fa(gt){var It=-1,fi=gt==null?0:gt.length;for(this.clear();++It<fi;){var Bi=gt[It];this.set(Bi[0],Bi[1])}}function Fa(gt){var It=-1,fi=gt==null?0:gt.length;for(this.__data__=new fa;++It<fi;)this.add(gt[It])}function Si(gt){var It=this.__data__=new Ei(gt);this.size=It.size}function Ah(gt,It){var fi=_l(gt),Bi=!fi&&du(gt),an=!fi&&!Bi&&ec(gt),vr=!fi&&!Bi&&!an&&yl(gt),wn=fi||Bi||an||vr,Pn=wn?function(kn,As){for(var Wo=-1,Kn=Array(kn);++Wo<kn;)Kn[Wo]=As(Wo);return Kn}(gt.length,String):[],as=Pn.length;for(var Nn in gt)!en.call(gt,Nn)||wn&&(Nn=="length"||an&&(Nn=="offset"||Nn=="parent")||vr&&(Nn=="buffer"||Nn=="byteLength"||Nn=="byteOffset")||qt(Nn,as))||Pn.push(Nn);return Pn}function hl(gt,It){for(var fi=gt.length;fi--;)if(gl(gt[fi][0],It))return fi;return-1}function dl(gt){return gt==null?gt===void 0?"[object Undefined]":"[object Null]":Oa&&Oa in Object(gt)?function(It){var fi=en.call(It,Oa),Bi=It[Oa];try{It[Oa]=void 0;var an=!0}catch{}var vr=ss.call(It);return an&&(fi?It[Oa]=Bi:delete It[Oa]),vr}(gt):function(It){return ss.call(It)}(gt)}function pa(gt){return ja(gt)&&dl(gt)==nt}function Na(gt,It,fi,Bi,an){return gt===It||(gt==null||It==null||!ja(gt)&&!ja(It)?gt!=gt&&It!=It:function(vr,wn,Pn,as,Nn,kn){var As=_l(vr),Wo=_l(wn),Kn=As?ot:Hs(vr),Zo=Wo?ot:Hs(wn),Is=(Kn=Kn==nt?Ji:Kn)==Ji,Ua=(Zo=Zo==nt?Ji:Zo)==Ji,ma=Kn==Zo;if(ma&&ec(vr)){if(!ec(wn))return!1;As=!0,Is=!1}if(ma&&!Is)return kn||(kn=new Si),As||yl(vr)?fl(vr,wn,Pn,as,Nn,kn):function(qr,$r,Va,Xo,Ar,Oo,Ws){switch(Va){case Wt:if(qr.byteLength!=$r.byteLength||qr.byteOffset!=$r.byteOffset)return!1;qr=qr.buffer,$r=$r.buffer;case tn:return!(qr.byteLength!=$r.byteLength||!Oo(new Bc(qr),new Bc($r)));case pt:case Jt:case $t:return gl(+qr,+$r);case si:return qr.name==$r.name&&qr.message==$r.message;case Ki:case Ht:return qr==$r+"";case mi:var Zs=js;case hn:var qa=1&Xo;if(Zs||(Zs=su),qr.size!=$r.size&&!qa)return!1;var Ha=Ws.get(qr);if(Ha)return Ha==$r;Xo|=2,Ws.set(qr,$r);var vl=fl(Zs(qr),Zs($r),Xo,Ar,Oo,Ws);return Ws.delete(qr),vl;case wi:if(gi)return gi.call(qr)==gi.call($r)}return!1}(vr,wn,Kn,Pn,as,Nn,kn);if(!(1&Pn)){var ls=Is&&en.call(vr,"__wrapped__"),ga=Ua&&en.call(wn,"__wrapped__");if(ls||ga){var er=ls?vr.value():vr,tc=ga?wn.value():wn;return kn||(kn=new Si),Nn(er,tc,Pn,as,kn)}}return ma?(kn||(kn=new Si),function(qr,$r,Va,Xo,Ar,Oo){var Ws=1&Va,Zs=pl(qr),qa=Zs.length,Ha=pl($r).length;if(qa!=Ha&&!Ws)return!1;for(var vl=qa;vl--;){var Ga=Zs[vl];if(!(Ws?Ga in $r:en.call($r,Ga)))return!1}var Ih=Oo.get(qr);if(Ih&&Oo.get($r))return Ih==$r;var _a=!0;Oo.set(qr,$r),Oo.set($r,qr);for(var pu=Ws;++vl<qa;){var mu=qr[Ga=Zs[vl]],gu=$r[Ga];if(Xo)var Zd=Ws?Xo(gu,mu,Ga,$r,qr,Oo):Xo(mu,gu,Ga,qr,$r,Oo);if(!(Zd===void 0?mu===gu||Ar(mu,gu,Va,Xo,Oo):Zd)){_a=!1;break}pu||(pu=Ga=="constructor")}if(_a&&!pu){var ic=qr.constructor,rc=$r.constructor;ic==rc||!("constructor"in qr)||!("constructor"in $r)||typeof ic=="function"&&ic instanceof ic&&typeof rc=="function"&&rc instanceof rc||(_a=!1)}return Oo.delete(qr),Oo.delete($r),_a}(vr,wn,Pn,as,Nn,kn)):!1}(gt,It,fi,Bi,Na,an))}function so(gt){return!(!Lo(gt)||function(It){return!!au&&au in It}(gt))&&(Gs(gt)?Kl:Qi).test($a(gt))}function hu(gt){if(fi=(It=gt)&&It.constructor,Bi=typeof fi=="function"&&fi.prototype||dn,It!==Bi)return lu(gt);var It,fi,Bi,an=[];for(var vr in Object(gt))en.call(gt,vr)&&vr!="constructor"&&an.push(vr);return an}function fl(gt,It,fi,Bi,an,vr){var wn=1&fi,Pn=gt.length,as=It.length;if(Pn!=as&&!(wn&&as>Pn))return!1;var Nn=vr.get(gt);if(Nn&&vr.get(It))return Nn==It;var kn=-1,As=!0,Wo=2&fi?new Fa:void 0;for(vr.set(gt,It),vr.set(It,gt);++kn<Pn;){var Kn=gt[kn],Zo=It[kn];if(Bi)var Is=wn?Bi(Zo,Kn,kn,It,gt,vr):Bi(Kn,Zo,kn,gt,It,vr);if(Is!==void 0){if(Is)continue;As=!1;break}if(Wo){if(!Jl(It,function(Ua,ma){if(ls=ma,!Wo.has(ls)&&(Kn===Ua||an(Kn,Ua,fi,Bi,vr)))return Wo.push(ma);var ls})){As=!1;break}}else if(Kn!==Zo&&!an(Kn,Zo,fi,Bi,vr)){As=!1;break}}return vr.delete(gt),vr.delete(It),As}function pl(gt){return function(It,fi,Bi){var an=fi(It);return _l(It)?an:function(vr,wn){for(var Pn=-1,as=wn.length,Nn=vr.length;++Pn<as;)vr[Nn+Pn]=wn[Pn];return vr}(an,Bi(It))}(gt,Wd,sn)}function ml(gt,It){var fi,Bi,an=gt.__data__;return((Bi=typeof(fi=It))=="string"||Bi=="number"||Bi=="symbol"||Bi=="boolean"?fi!=="__proto__":fi===null)?an[typeof It=="string"?"string":"hash"]:an.map}function Ro(gt,It){var fi=function(Bi,an){return Bi?.[an]}(gt,It);return so(fi)?fi:void 0}da.prototype.clear=function(){this.__data__=Cs?Cs(null):{},this.size=0},da.prototype.delete=function(gt){var It=this.has(gt)&&delete this.__data__[gt];return this.size-=It?1:0,It},da.prototype.get=function(gt){var It=this.__data__;if(Cs){var fi=It[gt];return fi===_e?void 0:fi}return en.call(It,gt)?It[gt]:void 0},da.prototype.has=function(gt){var It=this.__data__;return Cs?It[gt]!==void 0:en.call(It,gt)},da.prototype.set=function(gt,It){var fi=this.__data__;return this.size+=this.has(gt)?0:1,fi[gt]=Cs&&It===void 0?_e:It,this},Ei.prototype.clear=function(){this.__data__=[],this.size=0},Ei.prototype.delete=function(gt){var It=this.__data__,fi=hl(It,gt);return!(fi<0)&&(fi==It.length-1?It.pop():rp.call(It,fi,1),--this.size,!0)},Ei.prototype.get=function(gt){var It=this.__data__,fi=hl(It,gt);return fi<0?void 0:It[fi][1]},Ei.prototype.has=function(gt){return hl(this.__data__,gt)>-1},Ei.prototype.set=function(gt,It){var fi=this.__data__,Bi=hl(fi,gt);return Bi<0?(++this.size,fi.push([gt,It])):fi[Bi][1]=It,this},fa.prototype.clear=function(){this.size=0,this.__data__={hash:new da,map:new(qs||Ei),string:new da}},fa.prototype.delete=function(gt){var It=ml(this,gt).delete(gt);return this.size-=It?1:0,It},fa.prototype.get=function(gt){return ml(this,gt).get(gt)},fa.prototype.has=function(gt){return ml(this,gt).has(gt)},fa.prototype.set=function(gt,It){var fi=ml(this,gt),Bi=fi.size;return fi.set(gt,It),this.size+=fi.size==Bi?0:1,this},Fa.prototype.add=Fa.prototype.push=function(gt){return this.__data__.set(gt,_e),this},Fa.prototype.has=function(gt){return this.__data__.has(gt)},Si.prototype.clear=function(){this.__data__=new Ei,this.size=0},Si.prototype.delete=function(gt){var It=this.__data__,fi=It.delete(gt);return this.size=It.size,fi},Si.prototype.get=function(gt){return this.__data__.get(gt)},Si.prototype.has=function(gt){return this.__data__.has(gt)},Si.prototype.set=function(gt,It){var fi=this.__data__;if(fi instanceof Ei){var Bi=fi.__data__;if(!qs||Bi.length<199)return Bi.push([gt,It]),this.size=++fi.size,this;fi=this.__data__=new fa(Bi)}return fi.set(gt,It),this.size=fi.size,this};var sn=bo?function(gt){return gt==null?[]:(gt=Object(gt),function(It,fi){for(var Bi=-1,an=It==null?0:It.length,vr=0,wn=[];++Bi<an;){var Pn=It[Bi];fi(Pn,Bi,It)&&(wn[vr++]=Pn)}return wn}(bo(gt),function(It){return Vs.call(gt,It)}))}:function(){return[]},Hs=dl;function qt(gt,It){return!!(It=It??qe)&&(typeof gt=="number"||rr.test(gt))&&gt>-1&&gt%1==0&&gt<It}function $a(gt){if(gt!=null){try{return os.call(gt)}catch{}try{return gt+""}catch{}}return""}function gl(gt,It){return gt===It||gt!=gt&&It!=It}(cu&&Hs(new cu(new ArrayBuffer(1)))!=Wt||qs&&Hs(new qs)!=mi||Ba&&Hs(Ba.resolve())!=ai||Ch&&Hs(new Ch)!=hn||ul&&Hs(new ul)!=Nr)&&(Hs=function(gt){var It=dl(gt),fi=It==Ji?gt.constructor:void 0,Bi=fi?$a(fi):"";if(Bi)switch(Bi){case op:return Wt;case Ql:return mi;case Gd:return ai;case uu:return hn;case Go:return Nr}return It});var du=pa(function(){return arguments}())?pa:function(gt){return ja(gt)&&en.call(gt,"callee")&&!Vs.call(gt,"callee")},_l=Array.isArray,ec=np||function(){return!1};function Gs(gt){if(!Lo(gt))return!1;var It=dl(gt);return It==Ut||It=="[object GeneratorFunction]"||It=="[object AsyncFunction]"||It=="[object Proxy]"}function fu(gt){return typeof gt=="number"&&gt>-1&&gt%1==0&&gt<=qe}function Lo(gt){var It=typeof gt;return gt!=null&&(It=="object"||It=="function")}function ja(gt){return gt!=null&&typeof gt=="object"}var yl=cl?function(gt){return function(It){return gt(It)}}(cl):function(gt){return ja(gt)&&fu(gt.length)&&!!Er[dl(gt)]};function Wd(gt){return(It=gt)!=null&&fu(It.length)&&!Gs(It)?Ah(gt):hu(gt);var It}N.exports=function(gt,It){return Na(gt,It)}})(uo,uo.exports);var Ts=s(uo.exports);function Yl(N,K){return N.length===K.length&&JSON.stringify(N.map(function(_e){return _e}).sort())===JSON.stringify(K.map(function(_e){return _e}).sort())}var Mh={Polygon:ci,LineString:Ui,Point:Sr,MultiPolygon:Di,MultiLineString:Di,MultiPoint:Di},Eh=Object.freeze({__proto__:null,CommonSelectors:ws,constrainFeatureMovement:Fn,createMidPoint:Lc,createSupplementaryPoints:co,createVertex:xo,doubleClickZoom:io,euclideanDistance:yt,featuresAt:Be,getFeatureAtAndSetCursors:xt,isClick:Dt,isEventAtCoordinates:nl,isTap:bt,mapEventToBoundingBox:Ze,ModeHandler:r,moveFeatures:_n,sortFeatures:ze,stringSetsAreEqual:Yl,StringSet:Ue,theme:Rt,toDenseArray:Pt}),$s=function(N,K){var _e={options:N=function(nt){nt===void 0&&(nt={});var ot=Xr(nt);return nt.controls||(ot.controls={}),nt.displayControlsDefault===!1?ot.controls=Xr(Es,nt.controls):ot.controls=Xr(is,nt.controls),(ot=Xr(Xl,ot)).styles=rs(ot.styles,"cold").concat(rs(ot.styles,"hot")),ot}(N)};K=function(nt,ot){return ot.modes=ae,ot.getFeatureIdsAt=function(pt){return Be.click({point:pt},null,nt).map(function(Jt){return Jt.properties.id})},ot.getSelectedIds=function(){return nt.store.getSelectedIds()},ot.getSelected=function(){return{type:ie.FEATURE_COLLECTION,features:nt.store.getSelectedIds().map(function(pt){return nt.store.get(pt)}).map(function(pt){return pt.toGeoJSON()})}},ot.getSelectedPoints=function(){return{type:ie.FEATURE_COLLECTION,features:nt.store.getSelectedCoordinates().map(function(pt){return{type:ie.FEATURE,properties:{},geometry:{type:ie.POINT,coordinates:pt.coordinates}}})}},ot.set=function(pt){if(pt.type===void 0||pt.type!==ie.FEATURE_COLLECTION||!Array.isArray(pt.features))throw new Error("Invalid FeatureCollection");var Jt=nt.store.createRenderBatch(),si=nt.store.getAllIds().slice(),Ut=ot.add(pt),mi=new Ue(Ut);return(si=si.filter(function($t){return!mi.has($t)})).length&&ot.delete(si),Jt(),Ut},ot.add=function(pt){var Jt=JSON.parse(JSON.stringify(Oc(pt))).features.map(function(si){if(si.id=si.id||Qt(),si.geometry===null)throw new Error("Invalid geometry: null");if(nt.store.get(si.id)===void 0||nt.store.get(si.id).type!==si.geometry.type){var Ut=Mh[si.geometry.type];if(Ut===void 0)throw new Error("Invalid geometry type: "+si.geometry.type+".");var mi=new Ut(nt,si);nt.store.add(mi)}else{var $t=nt.store.get(si.id);$t.properties=si.properties,Ts($t.properties,si.properties)||nt.store.featureChanged($t.id),Ts($t.getCoordinates(),si.geometry.coordinates)||$t.incomingCoords(si.geometry.coordinates)}return si.id});return nt.store.render(),Jt},ot.get=function(pt){var Jt=nt.store.get(pt);if(Jt)return Jt.toGeoJSON()},ot.getAll=function(){return{type:ie.FEATURE_COLLECTION,features:nt.store.getAll().map(function(pt){return pt.toGeoJSON()})}},ot.delete=function(pt){return nt.store.delete(pt,{silent:!0}),ot.getMode()!==ae.DIRECT_SELECT||nt.store.getSelectedIds().length?nt.store.render():nt.events.changeMode(ae.SIMPLE_SELECT,void 0,{silent:!0}),ot},ot.deleteAll=function(){return nt.store.delete(nt.store.getAllIds(),{silent:!0}),ot.getMode()===ae.DIRECT_SELECT?nt.events.changeMode(ae.SIMPLE_SELECT,void 0,{silent:!0}):nt.store.render(),ot},ot.changeMode=function(pt,Jt){return Jt===void 0&&(Jt={}),pt===ae.SIMPLE_SELECT&&ot.getMode()===ae.SIMPLE_SELECT?(Yl(Jt.featureIds||[],nt.store.getSelectedIds())||(nt.store.setSelected(Jt.featureIds,{silent:!0}),nt.store.render()),ot):(pt===ae.DIRECT_SELECT&&ot.getMode()===ae.DIRECT_SELECT&&Jt.featureId===nt.store.getSelectedIds()[0]||nt.events.changeMode(pt,Jt,{silent:!0}),ot)},ot.getMode=function(){return nt.events.getMode()},ot.trash=function(){return nt.events.trash({silent:!0}),ot},ot.combineFeatures=function(){return nt.events.combineFeatures({silent:!0}),ot},ot.uncombineFeatures=function(){return nt.events.uncombineFeatures({silent:!0}),ot},ot.setFeatureProperty=function(pt,Jt,si){return nt.store.setFeatureProperty(pt,Jt,si),ot},ot}(_e,K),_e.api=K;var qe=hi(_e);return K.onAdd=qe.onAdd,K.onRemove=qe.onRemove,K.types=Z,K.options=N,K};function sl(N){$s(N,this)}return sl.modes=ol,sl.constants=Ae,sl.lib=Eh,sl})})(hI);var Ote=hI.exports;const nse=Nm(Ote);var dI={};Object.defineProperty(dI,"__esModule",{value:!0});var uM={enable:function(t){setTimeout(function(){!t.map||!t.map.doubleClickZoom||!t._ctx||!t._ctx.store||!t._ctx.store.getInitialConfigValue||t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()},0)},disable:function(t){setTimeout(function(){!t.map||!t.map.doubleClickZoom||t.map.doubleClickZoom.disable()},0)}},Bte={onSetup:function(t){var r=this.newFeature({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});return this.addFeature(r),this.clearSelectedFeatures(),uM.disable(this),this.updateUIClasses({mouse:"add"}),this.setActionableState({trash:!0}),{rectangle:r}},onTap:function(t,r){t.startPoint&&this.onMouseMove(t,r),this.onClick(t,r)},onClick:function(t,r){t.startPoint&&t.startPoint[0]!==r.lngLat.lng&&t.startPoint[1]!==r.lngLat.lat&&(this.updateUIClasses({mouse:"pointer"}),t.endPoint=[r.lngLat.lng,r.lngLat.lat],this.changeMode("simple_select",{featuresId:t.rectangle.id}));var s=[r.lngLat.lng,r.lngLat.lat];t.startPoint=s},onMouseMove:function(t,r){t.startPoint&&(t.rectangle.updateCoordinate("0.0",t.startPoint[0],t.startPoint[1]),t.rectangle.updateCoordinate("0.1",r.lngLat.lng,t.startPoint[1]),t.rectangle.updateCoordinate("0.2",r.lngLat.lng,r.lngLat.lat),t.rectangle.updateCoordinate("0.3",t.startPoint[0],r.lngLat.lat),t.rectangle.updateCoordinate("0.4",t.startPoint[0],t.startPoint[1]))},onKeyUp:function(t,r){if(r.keyCode===27)return this.changeMode("simple_select")},onStop:function(t){uM.enable(this),this.updateUIClasses({mouse:"none"}),this.activateUIButton(),this.getFeature(t.rectangle.id)!==void 0&&(t.rectangle.removeCoordinate("0.4"),t.rectangle.isValid()?this.map.fire("draw.create",{features:[t.rectangle.toGeoJSON()]}):(this.deleteFeature([t.rectangle.id],{silent:!0}),this.changeMode("simple_select",{},{silent:!0})))},toDisplayFeatures:function(t,r,s){var l=r.properties.id===t.rectangle.id;if(r.properties.active=l?"true":"false",!l)return s(r);if(t.startPoint)return s(r)},onTrash:function(t){this.deleteFeature([t.rectangle.id],{silent:!0}),this.changeMode("simple_select")}},ose=dI.default=Bte;const Fte={ratio:[String,Number]};function Nte(e,t){return Ve(()=>{const r=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(r)!==!0&&r>0?{paddingBottom:`${100/r}%`}:null})}const $te=1.7778,sse=lr({name:"QImg",props:{...Fte,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:$te},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:r}){const s=oi(e.initialRatio),l=Nte(e,s),d=_r(),{registerTimeout:y,removeTimeout:n}=iu(),{registerTimeout:M,removeTimeout:P}=iu(),L=Ve(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),V=Ve(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),X=[oi(null),oi(L.value)],J=oi(0),Z=oi(!1),ie=oi(!1),ae=Ve(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),de=Ve(()=>({width:e.width,height:e.height})),fe=Ve(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),le=Ve(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function he(){if(P(),e.loadingShowDelay===0){Z.value=!0;return}M(()=>{Z.value=!0},e.loadingShowDelay)}function Ce(){P(),Z.value=!1}function Le({target:Ue}){f1(d)===!1&&(n(),s.value=Ue.naturalHeight===0?.5:Ue.naturalWidth/Ue.naturalHeight,Ae(Ue,1))}function Ae(Ue,vt){vt===1e3||f1(d)===!0||(Ue.complete===!0?We(Ue):y(()=>{Ae(Ue,vt+1)},50))}function We(Ue){f1(d)!==!0&&(J.value=J.value^1,X[J.value].value=null,Ce(),Ue.getAttribute("__qerror")!=="true"&&(ie.value=!1),r("load",Ue.currentSrc||Ue.src))}function Qe(Ue){n(),Ce(),ie.value=!0,X[J.value].value=V.value,X[J.value^1].value=L.value,r("error",Ue)}function ze(Ue){const vt=X[Ue].value,Be={key:"img_"+Ue,class:fe.value,style:le.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...vt};return J.value===Ue?Object.assign(Be,{class:Be.class+"current",onLoad:Le,onError:Qe}):Be.class+="loaded",tt("div",{class:"q-img__container absolute-full",key:"img"+Ue},tt("img",Be))}function Ze(){return Z.value===!1?tt("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ln(t[ie.value===!0?"error":"default"])):tt("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[tt(kd,{color:e.spinnerColor,size:e.spinnerSize})])}{let Ue=function(){Fi(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,vt=>{n(),ie.value=!1,vt===null?(Ce(),X[J.value^1].value=L.value):he(),X[J.value].value=vt},{immediate:!0})};Aa.value===!0?ys(Ue):Ue()}return()=>{const Ue=[];return l.value!==null&&Ue.push(tt("div",{key:"filler",style:l.value})),X[0].value!==null&&Ue.push(ze(0)),X[1].value!==null&&Ue.push(ze(1)),Ue.push(tt(Ul,{name:"q-transition--fade"},Ze)),tt("div",{key:"main",class:ae.value,style:de.value,role:"img","aria-label":e.alt},Ue)}}}),jte={xs:8,sm:10,md:14,lg:20,xl:24},Ute=lr({name:"QChip",props:{...Fs,...K1,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:r}){const{proxy:{$q:s}}=_r(),l=Ns(e,s),d=Q1(e,jte),y=Ve(()=>e.selected===!0||e.icon!==void 0),n=Ve(()=>e.selected===!0?e.iconSelected||s.iconSet.chip.selected:e.icon),M=Ve(()=>e.iconRemove||s.iconSet.chip.remove),P=Ve(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),L=Ve(()=>{const ae=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(ae?` text-${ae} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(P.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(l.value===!0?" q-chip--dark q-dark":"")}),V=Ve(()=>{const ae=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},de={...ae,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||s.lang.label.remove};return{chip:ae,remove:de}});function X(ae){ae.keyCode===13&&J(ae)}function J(ae){e.disable||(r("update:selected",!e.selected),r("click",ae))}function Z(ae){(ae.keyCode===void 0||ae.keyCode===13)&&(Cn(ae),e.disable===!1&&(r("update:modelValue",!1),r("remove")))}function ie(){const ae=[];P.value===!0&&ae.push(tt("div",{class:"q-focus-helper"})),y.value===!0&&ae.push(tt(Io,{class:"q-chip__icon q-chip__icon--left",name:n.value}));const de=e.label!==void 0?[tt("div",{class:"ellipsis"},[e.label])]:void 0;return ae.push(tt("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},kT(t.default,de))),e.iconRight&&ae.push(tt(Io,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&ae.push(tt(Io,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:M.value,...V.value.remove,onClick:Z,onKeyup:Z})),ae}return()=>{if(e.modelValue===!1)return;const ae={class:L.value,style:d.value};return P.value===!0&&Object.assign(ae,V.value.chip,{onClick:J,onKeyup:X}),_m("div",ae,ie(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[a6,e.ripple]])}}});function Jf(e,t,r,s){const l=[];return e.forEach(d=>{s(d)===!0?l.push(d):t.push({failedPropValidation:r,file:d})}),l}function i2(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Cn(e)}const Vte={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},qte=["rejected"];function Hte({editable:e,dnd:t,getFileInput:r,addFilesToQueue:s}){const{props:l,emit:d,proxy:y}=_r(),n=oi(null),M=Ve(()=>l.accept!==void 0?l.accept.split(",").map(fe=>(fe=fe.trim(),fe==="*"?"*/":(fe.endsWith("/*")&&(fe=fe.slice(0,fe.length-1)),fe.toUpperCase()))):null),P=Ve(()=>parseInt(l.maxFiles,10)),L=Ve(()=>parseInt(l.maxTotalSize,10));function V(fe){if(e.value)if(fe!==Object(fe)&&(fe={target:null}),fe.target!==null&&fe.target.matches('input[type="file"]')===!0)fe.clientX===0&&fe.clientY===0&&Qc(fe);else{const le=r();le&&le!==fe.target&&le.click(fe)}}function X(fe){e.value&&fe&&s(null,fe)}function J(fe,le,he,Ce){let Le=Array.from(le||fe.target.files);const Ae=[],We=()=>{Ae.length!==0&&d("rejected",Ae)};if(l.accept!==void 0&&M.value.indexOf("*/")===-1&&(Le=Jf(Le,Ae,"accept",Qe=>M.value.some(ze=>Qe.type.toUpperCase().startsWith(ze)||Qe.name.toUpperCase().endsWith(ze))),Le.length===0))return We();if(l.maxFileSize!==void 0){const Qe=parseInt(l.maxFileSize,10);if(Le=Jf(Le,Ae,"max-file-size",ze=>ze.size<=Qe),Le.length===0)return We()}if(l.multiple!==!0&&Le.length!==0&&(Le=[Le[0]]),Le.forEach(Qe=>{Qe.__key=Qe.webkitRelativePath+Qe.lastModified+Qe.name+Qe.size}),Ce===!0){const Qe=he.map(ze=>ze.__key);Le=Jf(Le,Ae,"duplicate",ze=>Qe.includes(ze.__key)===!1)}if(Le.length===0)return We();if(l.maxTotalSize!==void 0){let Qe=Ce===!0?he.reduce((ze,Ze)=>ze+Ze.size,0):0;if(Le=Jf(Le,Ae,"max-total-size",ze=>(Qe+=ze.size,Qe<=L.value)),Le.length===0)return We()}if(typeof l.filter=="function"){const Qe=l.filter(Le);Le=Jf(Le,Ae,"filter",ze=>Qe.includes(ze))}if(l.maxFiles!==void 0){let Qe=Ce===!0?he.length:0;if(Le=Jf(Le,Ae,"max-files",()=>(Qe++,Qe<=P.value)),Le.length===0)return We()}if(We(),Le.length!==0)return Le}function Z(fe){i2(fe),t.value!==!0&&(t.value=!0)}function ie(fe){Cn(fe),(fe.relatedTarget!==null||nn.is.safari!==!0?fe.relatedTarget!==n.value:document.elementsFromPoint(fe.clientX,fe.clientY).includes(n.value)===!1)===!0&&(t.value=!1)}function ae(fe){i2(fe);const le=fe.dataTransfer.files;le.length!==0&&s(null,le),t.value=!1}function de(fe){if(t.value===!0)return tt("div",{ref:n,class:`q-${fe}__dnd absolute-full`,onDragenter:i2,onDragover:i2,onDragleave:ie,onDrop:ae})}return Object.assign(y,{pickFiles:V,addFiles:X}),{pickFiles:V,addFiles:X,onDragover:Z,onDragleave:ie,processFiles:J,getDndNode:de,maxFilesNumber:P,maxTotalSizeNumber:L}}const ase=lr({name:"QFile",inheritAttrs:!1,props:{...ZT,...Ky,...Vte,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...XT,...qte],setup(e,{slots:t,emit:r,attrs:s}){const{proxy:l}=_r(),d=YT(),y=oi(null),n=oi(!1),M=eC(e),{pickFiles:P,onDragover:L,onDragleave:V,processFiles:X,getDndNode:J}=Hte({editable:d.editable,dnd:n,getFileInput:Ue,addFilesToQueue:vt}),Z=tC(e),ie=Ve(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),ae=Ve(()=>ym(ie.value)),de=Ve(()=>ie.value.map(yt=>yt.name).join(", ")),fe=Ve(()=>uU(ie.value.reduce((yt,Dt)=>yt+Dt.size,0))),le=Ve(()=>({totalSize:fe.value,filesNumber:ie.value.length,maxFiles:e.maxFiles})),he=Ve(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:M.value,...s,id:d.targetUid.value,disabled:d.editable.value!==!0})),Ce=Ve(()=>"q-file q-field--auto-height"+(n.value===!0?" q-file--dnd":"")),Le=Ve(()=>e.multiple===!0&&e.append===!0);function Ae(yt){const Dt=ie.value.slice();Dt.splice(yt,1),Qe(Dt)}function We(yt){const Dt=ie.value.indexOf(yt);Dt!==-1&&Ae(Dt)}function Qe(yt){r("update:modelValue",e.multiple===!0?yt:yt[0])}function ze(yt){yt.keyCode===13&&Sa(yt)}function Ze(yt){(yt.keyCode===13||yt.keyCode===32)&&P(yt)}function Ue(){return y.value}function vt(yt,Dt){const bt=X(yt,Dt,ie.value,Le.value),bi=Ue();bi!=null&&(bi.value=""),bt!==void 0&&((e.multiple===!0?e.modelValue&&bt.every(ji=>ie.value.includes(ji)):e.modelValue===bt[0])||Qe(Le.value===!0?ie.value.concat(bt):bt))}function Be(){return[tt("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Ke(){if(t.file!==void 0)return ie.value.length===0?Be():ie.value.map((Dt,bt)=>t.file({index:bt,file:Dt,ref:this}));if(t.selected!==void 0)return ie.value.length===0?Be():t.selected({files:ie.value,ref:this});if(e.useChips===!0)return ie.value.length===0?Be():ie.value.map((Dt,bt)=>tt(Ute,{key:"file-"+bt,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{Ae(bt)}},()=>tt("span",{class:"ellipsis",textContent:Dt.name})));const yt=e.displayValue!==void 0?e.displayValue:de.value;return yt.length!==0?[tt("div",{class:e.inputClass,style:e.inputStyle,textContent:yt})]:Be()}function xt(){const yt={ref:y,...he.value,...Z.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:vt};return e.multiple===!0&&(yt.multiple=!0),tt("input",yt)}return Object.assign(d,{fieldClass:Ce,emitValue:Qe,hasValue:ae,inputRef:y,innerValue:ie,floatingLabel:Ve(()=>ae.value===!0||ym(e.displayValue)),computedCounter:Ve(()=>{if(e.counterLabel!==void 0)return e.counterLabel(le.value);const yt=e.maxFiles;return`${ie.value.length}${yt!==void 0?" / "+yt:""} (${fe.value})`}),getControlChild:()=>J("file"),getControl:()=>{const yt={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(yt,{onDragover:L,onDragleave:V,onKeydown:ze,onKeyup:Ze}),tt("div",yt,[xt()].concat(Ke()))}}),Object.assign(l,{removeAtIndex:Ae,removeFile:We,getNativeElement:()=>y.value}),_h(l,"nativeEl",()=>y.value),JT(d)}});function Ac(e,t){return Array.from(e.getElementsByTagName(t))}function py(e){return e[0]==="#"?e:`#${e}`}function Gte(e,t,r){return Array.from(e.getElementsByTagNameNS(r,t))}function za(e){return e?.normalize(),e&&e.textContent||""}function Ic(e,t,r){const s=e.getElementsByTagName(t),l=s.length?s[0]:null;return l&&r&&r(l),l}function ql(e,t,r){const s={};if(!e)return s;const l=e.getElementsByTagName(t),d=l.length?l[0]:null;return d&&r?r(d,s):s}function B1(e,t,r){const s=za(Ic(e,t));return s&&r?r(s)||{}:{}}function r1(e,t,r){const s=parseFloat(za(Ic(e,t)));if(!isNaN(s))return r&&r(s),s}function fI(e,t){const r={};for(const s of t)B1(e,s,l=>{r[s]=l});return r}function pI(e){return e?.nodeType===1}function mI(e,t){const r={},s=t=="stroke"||t==="fill"?t:t+"-color";return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?r[s]="#"+e:e.length===8&&(r[t+"-opacity"]=parseInt(e.substring(0,2),16)/255,r[s]="#"+e.substring(6,8)+e.substring(4,6)+e.substring(2,4)),r}function my(e,t,r){const s={};return r1(e,t,l=>{s[r]=l}),s}function F6(e,t){return ql(e,"color",r=>mI(za(r),t))}function gI(e){return ql(e,"Icon",(t,r)=>(B1(t,"href",s=>{r.icon=s}),r))}function Wte(e){return ql(e,"IconStyle",t=>Object.assign(F6(t,"icon"),my(t,"scale","icon-scale"),my(t,"heading","icon-heading"),ql(t,"hotSpot",r=>{const s=parseFloat(r.getAttribute("x")||""),l=parseFloat(r.getAttribute("y")||""),d=r.getAttribute("xunits")||"",y=r.getAttribute("yunits")||"";return!isNaN(s)&&!isNaN(l)?{"icon-offset":[s,l],"icon-offset-units":[d,y]}:{}}),gI(t)))}function Zte(e){return ql(e,"LabelStyle",t=>Object.assign(F6(t,"label"),my(t,"scale","label-scale")))}function Xte(e){return ql(e,"LineStyle",t=>Object.assign(F6(t,"stroke"),my(t,"width","stroke-width")))}function Yte(e){return ql(e,"PolyStyle",(t,r)=>Object.assign(r,ql(t,"color",s=>mI(za(s),"fill")),B1(t,"fill",s=>{if(s==="0")return{"fill-opacity":0}}),B1(t,"outline",s=>{if(s==="0")return{"stroke-opacity":0}})))}function N6(e){return Object.assign({},Yte(e),Xte(e),Zte(e),Wte(e))}const Kf=e=>Number(e),Gb={string:e=>e,int:Kf,uint:Kf,short:Kf,ushort:Kf,float:Kf,double:Kf,bool:e=>!!e};function _I(e,t){return ql(e,"ExtendedData",(r,s)=>{for(const l of Ac(r,"Data"))s[l.getAttribute("name")||""]=za(Ic(l,"value"));for(const l of Ac(r,"SimpleData")){const d=l.getAttribute("name")||"",y=t[d]||Gb.string;s[d]=y(za(l))}return s})}function yI(e){const t=Ic(e,"description");for(const r of Array.from(t?.childNodes||[]))if(r.nodeType===4)return{description:{"@type":"html",value:za(r)}};return{}}function vI(e){return ql(e,"TimeSpan",t=>({timespan:{begin:za(Ic(t,"begin")),end:za(Ic(t,"end"))}}))}function xI(e){return ql(e,"TimeStamp",t=>({timestamp:za(Ic(t,"when"))}))}function bI(e,t){return B1(e,"styleUrl",r=>(r=py(r),t[r]?Object.assign({styleUrl:r},t[r]):{styleUrl:r}))}const Jte=/\s*/g,Kte=/^\s*|\s*$/g,Qte=/\s+/;function wI(e){return e.replace(Jte,"").split(",").map(parseFloat).filter(t=>!isNaN(t)).slice(0,3)}function Wb(e){return e.replace(Kte,"").split(Qte).map(wI).filter(t=>t.length>=2)}function eie(e){let t=Ac(e,"coord");t.length===0&&(t=Gte(e,"coord","*"));const r=t.map(s=>za(s).split(" ").map(parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:Ac(e,"when").map(s=>za(s))}}function SI(e){if(e.length===0)return e;const t=e[0],r=e[e.length-1];let s=!0;for(let l=0;l<Math.max(t.length,r.length);l++)if(t[l]!==r[l]){s=!1;break}return s?e:e.concat([e[0]])}function z2(e){return za(Ic(e,"coordinates"))}function MI(e){let t=[],r=[];for(let s=0;s<e.childNodes.length;s++){const l=e.childNodes.item(s);if(pI(l))switch(l.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const d=MI(l);t=t.concat(d.geometries),r=r.concat(d.coordTimes);break}case"Point":{const d=wI(z2(l));d.length>=2&&t.push({type:"Point",coordinates:d});break}case"LinearRing":case"LineString":{const d=Wb(z2(l));d.length>=2&&t.push({type:"LineString",coordinates:d});break}case"Polygon":{const d=[];for(const y of Ac(l,"LinearRing")){const n=SI(Wb(z2(y)));n.length>=4&&d.push(n)}d.length&&t.push({type:"Polygon",coordinates:d});break}case"Track":case"gx:Track":{const d=eie(l);if(!d)break;const{times:y,geometry:n}=d;t.push(n),y.length&&r.push(y);break}}}return{geometries:t,coordTimes:r}}function tie(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function iie(e,t,r,s){const{coordTimes:l,geometries:d}=MI(e),y=tie(d);if(!y&&s.skipNullGeometry)return null;const n={type:"Feature",geometry:y,properties:Object.assign(fI(e,["name","address","visibility","open","phoneNumber","description"]),yI(e),bI(e,t),N6(e),_I(e,r),vI(e),xI(e),l.length?{coordinateProperties:{times:l.length===1?l[0]:l}}:{})};n.properties?.visibility!==void 0&&(n.properties.visibility=n.properties.visibility!=="0");const M=e.getAttribute("id");return M!==null&&M!==""&&(n.id=M),n}function rie(e){return Ic(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[SI(Wb(z2(e)))]}}:sie(e)}const nie=Math.PI/180;function oie(e,t,r){const s=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[t[0].map(l=>{const d=l[1]-s[1],y=l[0]-s[0],n=Math.sqrt(Math.pow(d,2)+Math.pow(y,2)),M=Math.atan2(d,y)+r*nie;return[s[0]+Math.cos(M)*n,s[1]+Math.sin(M)*n]})]}function sie(e){const t=Ic(e,"LatLonBox");if(t){const r=r1(t,"north"),s=r1(t,"west"),l=r1(t,"east"),d=r1(t,"south"),y=r1(t,"rotation");if(typeof r=="number"&&typeof d=="number"&&typeof s=="number"&&typeof l=="number"){const n=[s,d,l,r];let M=[[[s,r],[l,r],[l,d],[s,d],[s,r]]];return typeof y=="number"&&(M=oie(n,M,y)),{bbox:n,geometry:{type:"Polygon",coordinates:M}}}}return null}function aie(e,t,r,s){const l=rie(e),d=l?.geometry||null;if(!d&&s.skipNullGeometry)return null;const y={type:"Feature",geometry:d,properties:Object.assign({"@geometry-type":"groundoverlay"},fI(e,["name","address","visibility","open","phoneNumber","description"]),yI(e),bI(e,t),N6(e),gI(e),_I(e,r),vI(e),xI(e))};l?.bbox&&(y.bbox=l.bbox),y.properties?.visibility!==void 0&&(y.properties.visibility=y.properties.visibility!=="0");const n=e.getAttribute("id");return n!==null&&n!==""&&(y.id=n),y}function lie(e){let t=e.getAttribute("id");const r=e.parentNode;return!t&&pI(r)&&r.localName==="CascadingStyle"&&(t=r.getAttribute("kml:id")||r.getAttribute("id")),py(t||"")}function cie(e){const t={};for(const r of Ac(e,"Style"))t[lie(r)]=N6(r);for(const r of Ac(e,"StyleMap")){const s=py(r.getAttribute("id")||"");B1(r,"styleUrl",l=>{l=py(l),t[l]&&(t[s]=t[l])})}return t}function uie(e){const t={};for(const r of Ac(e,"SimpleField"))t[r.getAttribute("name")||""]=Gb[r.getAttribute("type")||""]||Gb.string;return t}function*hie(e,t={skipNullGeometry:!1}){const r=cie(e),s=uie(e);for(const l of Ac(e,"Placemark")){const d=iie(l,r,s,t);d&&(yield d)}for(const l of Ac(e,"GroundOverlay")){const d=aie(l,r,s,t);d&&(yield d)}}function lse(e,t={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(hie(e,t))}}const cse=lr({name:"QTooltip",inheritAttrs:!1,props:{...QC,...Zm,...m1,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...m1.transitionShow,default:"jump-down"},transitionHide:{...m1.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ry},self:{type:String,default:"top middle",validator:ry},offset:{type:Array,default:()=>[14,14],validator:rA},scrollTarget:r6,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Xm],setup(e,{slots:t,emit:r,attrs:s}){let l,d;const y=_r(),{proxy:{$q:n}}=y,M=oi(null),P=oi(!1),L=Ve(()=>ny(e.anchor,n.lang.rtl)),V=Ve(()=>ny(e.self,n.lang.rtl)),X=Ve(()=>e.persistent!==!0),{registerTick:J,removeTick:Z}=p1(),{registerTimeout:ie}=iu(),{transitionProps:ae,transitionStyle:de}=e6(e),{localScrollTarget:fe,changeScrollEvent:le,unconfigureScrollTarget:he}=tA(e,bi),{anchorEl:Ce,canShow:Le,anchorEvents:Ae}=M6({showing:P,configureAnchorEl:bt}),{show:We,hide:Qe}=Ym({showing:P,canShow:Le,handleShow:vt,handleHide:Be,hideOnRouteChange:X,processOnMount:!0});Object.assign(Ae,{delayShow:yt,delayHide:Dt});const{showPortal:ze,hidePortal:Ze,renderPortal:Ue}=i6(y,M,Qt,"tooltip");if(n.platform.is.mobile===!0){const Nt={anchorEl:Ce,innerRef:M,onClickOutside(Ui){return Qe(Ui),Ui.target.classList.contains("q-dialog__backdrop")&&Cn(Ui),!0}},Sr=Ve(()=>e.modelValue===null&&e.persistent!==!0&&P.value===!0);Fi(Sr,Ui=>{(Ui===!0?iA:iy)(Nt)}),Xn(()=>{iy(Nt)})}function vt(Nt){ze(),J(()=>{d=new MutationObserver(()=>xt()),d.observe(M.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),xt(),bi()}),l===void 0&&(l=Fi(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,xt)),ie(()=>{ze(!0),r("show",Nt)},e.transitionDuration)}function Be(Nt){Z(),Ze(),Ke(),ie(()=>{Ze(!0),r("hide",Nt)},e.transitionDuration)}function Ke(){d!==void 0&&(d.disconnect(),d=void 0),l!==void 0&&(l(),l=void 0),he(),bc(Ae,"tooltipTemp")}function xt(){E6({targetEl:M.value,offset:e.offset,anchorEl:Ce.value,anchorOrigin:L.value,selfOrigin:V.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function yt(Nt){if(n.platform.is.mobile===!0){xm(),document.body.classList.add("non-selectable");const Sr=Ce.value,Ui=["touchmove","touchcancel","touchend","click"].map(ci=>[Sr,ci,"delayHide","passiveCapture"]);Ea(Ae,"tooltipTemp",Ui)}ie(()=>{We(Nt)},e.delay)}function Dt(Nt){n.platform.is.mobile===!0&&(bc(Ae,"tooltipTemp"),xm(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),ie(()=>{Qe(Nt)},e.hideDelay)}function bt(){if(e.noParentEvent===!0||Ce.value===null)return;const Nt=n.platform.is.mobile===!0?[[Ce.value,"touchstart","delayShow","passive"]]:[[Ce.value,"mouseenter","delayShow","passive"],[Ce.value,"mouseleave","delayHide","passive"]];Ea(Ae,"anchor",Nt)}function bi(){if(Ce.value!==null||e.scrollTarget!==void 0){fe.value=n6(Ce.value,e.scrollTarget);const Nt=e.noParentEvent===!0?xt:Qe;le(fe.value,Nt)}}function ji(){return P.value===!0?tt("div",{...s,ref:M,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,de.value],role:"tooltip"},ln(t.default)):null}function Qt(){return tt(Ul,ae.value,ji)}return Xn(Ke),Object.assign(y.proxy,{updatePosition:xt}),Ue}});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function hM(e){return Object.prototype.toString.call(e)==="[object Object]"}function die(e){var t,r;return hM(e)===!1?!1:(t=e.constructor,t===void 0?!0:(r=t.prototype,!(hM(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},lm.apply(this,arguments)}function EI(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}const fie={silent:!1,logLevel:"warn"},pie=["validator"],TI=Object.prototype,CI=TI.toString,mie=TI.hasOwnProperty,AI=/^\s*function (\w+)/;function dM(e){var t;const r=(t=e?.type)!==null&&t!==void 0?t:e;if(r){const s=r.toString().match(AI);return s?s[1]:""}return""}const Bd=die;function gie(){}let yo=gie;const F1=(e,t)=>mie.call(e,t),_ie=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e},N1=Array.isArray||function(e){return CI.call(e)==="[object Array]"},$1=e=>CI.call(e)==="[object Function]",gy=(e,t)=>Bd(e)&&F1(e,"_vueTypes_name")&&(!t||e._vueTypes_name===t),II=e=>Bd(e)&&(F1(e,"type")||["_vueTypes_name","validator","default","required"].some(t=>F1(e,t)));function $6(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function Vd(e,t,r=!1){let s,l=!0,d="";s=Bd(e)?e:{type:e};const y=gy(s)?s._vueTypes_name+" - ":"";if(II(s)&&s.type!==null){if(s.type===void 0||s.type===!0||!s.required&&t==null)return l;N1(s.type)?(l=s.type.some(n=>Vd(n,t,!0)===!0),d=s.type.map(n=>dM(n)).join(" or ")):(d=dM(s),l=d==="Array"?N1(t):d==="Object"?Bd(t):d==="String"||d==="Number"||d==="Boolean"||d==="Function"?function(n){if(n==null)return"";const M=n.constructor.toString().match(AI);return M?M[1].replace(/^Async/,""):""}(t)===d:t instanceof s.type)}if(!l){const n=`${y}value "${t}" should be of type "${d}"`;return r===!1?(yo(n),!1):n}if(F1(s,"validator")&&$1(s.validator)){const n=yo,M=[];if(yo=P=>{M.push(P)},l=s.validator(t),yo=n,!l){const P=(M.length>1?"* ":"")+M.join(`
* `);return M.length=0,r===!1?(yo(P),l):P}}return l}function Ca(e,t){const r=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get(){return this.required=!0,this}},def:{value(l){return l===void 0?this.type===Boolean||Array.isArray(this.type)&&this.type.includes(Boolean)?void(this.default=void 0):(F1(this,"default")&&delete this.default,this):$1(l)||Vd(this,l,!0)===!0?(this.default=N1(l)?()=>[...l]:Bd(l)?()=>Object.assign({},l):l,this):(yo(`${this._vueTypes_name} - invalid default value: "${l}"`),this)}}}),{validator:s}=r;return $1(s)&&(r.validator=$6(s,r)),r}function Mc(e,t){const r=Ca(e,t);return Object.defineProperty(r,"validate",{value(s){return $1(this.validator)&&yo(`${this._vueTypes_name} - calling .validate() will overwrite the current custom validator function. Validator info:
${JSON.stringify(this)}`),this.validator=$6(s,this),this}})}function fM(e,t,r){const s=function(M){const P={};return Object.getOwnPropertyNames(M).forEach(L=>{P[L]=Object.getOwnPropertyDescriptor(M,L)}),Object.defineProperties({},P)}(t);if(s._vueTypes_name=e,!Bd(r))return s;const{validator:l}=r,d=EI(r,pie);if($1(l)){let{validator:M}=s;M&&(M=(n=(y=M).__original)!==null&&n!==void 0?n:y),s.validator=$6(M?function(P){return M.call(this,P)&&l.call(this,P)}:l,s)}var y,n;return Object.assign(s,d)}function av(e){return e.replace(/^(?!\s*$)/gm,"  ")}const yie=()=>Mc("any",{}),vie=()=>Mc("function",{type:Function}),pM=()=>Mc("boolean",{type:Boolean}),xie=()=>Mc("string",{type:String}),bie=()=>Mc("number",{type:Number}),wie=()=>Mc("array",{type:Array}),Sie=()=>Mc("object",{type:Object}),Mie=()=>Ca("integer",{type:Number,validator(e){const t=_ie(e);return t===!1&&yo(`integer - "${e}" is not an integer`),t}}),Eie=()=>Ca("symbol",{validator(e){const t=typeof e=="symbol";return t===!1&&yo(`symbol - invalid value "${e}"`),t}}),Tie=()=>Object.defineProperty({type:null,validator(e){const t=e===null;return t===!1&&yo("nullable - value should be null"),t}},"_vueTypes_name",{value:"nullable"});function Cie(e,t="custom validation failed"){if(typeof e!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Ca(e.name||"<<anonymous function>>",{type:null,validator(r){const s=e(r);return s||yo(`${this._vueTypes_name} - ${t}`),s}})}function Aie(e){if(!N1(e))throw new TypeError("[VueTypes error]: You must provide an array as argument.");const t=`oneOf - value should be one of "${e.map(s=>typeof s=="symbol"?s.toString():s).join('", "')}".`,r={validator(s){const l=e.indexOf(s)!==-1;return l||yo(t),l}};if(e.indexOf(null)===-1){const s=e.reduce((l,d)=>{if(d!=null){const y=d.constructor;l.indexOf(y)===-1&&l.push(y)}return l},[]);s.length>0&&(r.type=s)}return Ca("oneOf",r)}function Iie(e){if(!N1(e))throw new TypeError("[VueTypes error]: You must provide an array as argument");let t=!1,r=!1,s=[];for(let d=0;d<e.length;d+=1){const y=e[d];if(II(y)){if($1(y.validator)&&(t=!0),gy(y,"oneOf")&&y.type){s=s.concat(y.type);continue}if(gy(y,"nullable")){r=!0;continue}if(y.type===!0||!y.type){yo('oneOfType - invalid usage of "true" and "null" as types.');continue}s=s.concat(y.type)}else s.push(y)}s=s.filter((d,y)=>s.indexOf(d)===y);const l=r===!1&&s.length>0?s:null;return Ca("oneOfType",t?{type:l,validator(d){const y=[],n=e.some(M=>{const P=Vd(M,d,!0);return typeof P=="string"&&y.push(P),P===!0});return n||yo(`oneOfType - provided value does not match any of the ${y.length} passed-in validators:
${av(y.join(`
`))}`),n}}:{type:l})}function zie(e){return Ca("arrayOf",{type:Array,validator(t){let r="";const s=t.every(l=>(r=Vd(e,l,!0),r===!0));return s||yo(`arrayOf - value validation error:
${av(r)}`),s}})}function Die(e){return Ca("instanceOf",{type:e})}function Pie(e){return Ca("objectOf",{type:Object,validator(t){let r="";const s=Object.keys(t).every(l=>(r=Vd(e,t[l],!0),r===!0));return s||yo(`objectOf - value validation error:
${av(r)}`),s}})}function kie(e){const t=Object.keys(e),r=t.filter(l=>{var d;return!((d=e[l])===null||d===void 0||!d.required)}),s=Ca("shape",{type:Object,validator(l){if(!Bd(l))return!1;const d=Object.keys(l);if(r.length>0&&r.some(y=>d.indexOf(y)===-1)){const y=r.filter(n=>d.indexOf(n)===-1);return yo(y.length===1?`shape - required property "${y[0]}" is not defined.`:`shape - required properties "${y.join('", "')}" are not defined.`),!1}return d.every(y=>{if(t.indexOf(y)===-1)return this._vueTypes_isLoose===!0||(yo(`shape - shape definition does not include a "${y}" property. Allowed keys: "${t.join('", "')}".`),!1);const n=Vd(e[y],l[y],!0);return typeof n=="string"&&yo(`shape - "${y}" property validation error:
 ${av(n)}`),n===!0})}});return Object.defineProperty(s,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(s,"loose",{get(){return this._vueTypes_isLoose=!0,this}}),s}const Rie=["name","validate","getter"],Lie=(e=>((e=class{static get any(){return yie()}static get func(){return vie().def(this.defaults.func)}static get bool(){return this.defaults.bool===void 0?pM():pM().def(this.defaults.bool)}static get string(){return xie().def(this.defaults.string)}static get number(){return bie().def(this.defaults.number)}static get array(){return wie().def(this.defaults.array)}static get object(){return Sie().def(this.defaults.object)}static get integer(){return Mie().def(this.defaults.integer)}static get symbol(){return Eie()}static get nullable(){return Tie()}static extend(t){if(yo("VueTypes.extend is deprecated. Use the ES6+ method instead. See https://dwightjack.github.io/vue-types/advanced/extending-vue-types.html#extending-namespaced-validators-in-es6 for details."),N1(t))return t.forEach(M=>this.extend(M)),this;const{name:r,validate:s=!1,getter:l=!1}=t,d=EI(t,Rie);if(F1(this,r))throw new TypeError(`[VueTypes error]: Type "${r}" already defined`);const{type:y}=d;if(gy(y))return delete d.type,Object.defineProperty(this,r,l?{get:()=>fM(r,y,d)}:{value(...M){const P=fM(r,y,d);return P.validator&&(P.validator=P.validator.bind(P,...M)),P}});let n;return n=l?{get(){const M=Object.assign({},d);return s?Mc(r,M):Ca(r,M)},enumerable:!0}:{value(...M){const P=Object.assign({},d);let L;return L=s?Mc(r,P):Ca(r,P),P.validator&&(L.validator=P.validator.bind(L,...M)),L},enumerable:!0},Object.defineProperty(this,r,n)}}).defaults={},e.sensibleDefaults=void 0,e.config=fie,e.custom=Cie,e.oneOf=Aie,e.instanceOf=Die,e.oneOfType=Iie,e.arrayOf=zie,e.objectOf=Pie,e.shape=kie,e.utils={validate:(t,r)=>Vd(r,t,!0)===!0,toType:(t,r,s=!1)=>s?Mc(t,r):Ca(t,r)},e))();function Oie(e={func:()=>{},bool:!0,string:"",number:0,array:()=>[],object:()=>({}),integer:0}){var t;return(t=class extends Lie{static get sensibleDefaults(){return lm({},this.defaults)}static set sensibleDefaults(r){this.defaults=r!==!1?lm({},r!==!0?r:e):{}}}).defaults=lm({},e),t}let use=class extends Oie(){};var Bie=typeof global=="object"&&global&&global.Object===Object&&global,Fie=typeof self=="object"&&self&&self.Object===Object&&self,zI=Bie||Fie||Function("return this")(),_y=zI.Symbol,DI=Object.prototype,Nie=DI.hasOwnProperty,$ie=DI.toString,q0=_y?_y.toStringTag:void 0;function jie(e){var t=Nie.call(e,q0),r=e[q0];try{e[q0]=void 0;var s=!0}catch{}var l=$ie.call(e);return s&&(t?e[q0]=r:delete e[q0]),l}var Uie=Object.prototype,Vie=Uie.toString;function qie(e){return Vie.call(e)}var Hie="[object Null]",Gie="[object Undefined]",mM=_y?_y.toStringTag:void 0;function Wie(e){return e==null?e===void 0?Gie:Hie:mM&&mM in Object(e)?jie(e):qie(e)}function Zie(e){return e!=null&&typeof e=="object"}var Xie="[object Symbol]";function Yie(e){return typeof e=="symbol"||Zie(e)&&Wie(e)==Xie}var Jie=/\s/;function Kie(e){for(var t=e.length;t--&&Jie.test(e.charAt(t)););return t}var Qie=/^\s+/;function ere(e){return e&&e.slice(0,Kie(e)+1).replace(Qie,"")}function yy(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var gM=NaN,tre=/^[-+]0x[0-9a-f]+$/i,ire=/^0b[01]+$/i,rre=/^0o[0-7]+$/i,nre=parseInt;function _M(e){if(typeof e=="number")return e;if(Yie(e))return gM;if(yy(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=yy(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ere(e);var r=ire.test(e);return r||rre.test(e)?nre(e.slice(2),r?2:8):tre.test(e)?gM:+e}var eb=function(){return zI.Date.now()},ore="Expected a function",sre=Math.max,are=Math.min;function lre(e,t,r){var s,l,d,y,n,M,P=0,L=!1,V=!1,X=!0;if(typeof e!="function")throw new TypeError(ore);t=_M(t)||0,yy(r)&&(L=!!r.leading,V="maxWait"in r,d=V?sre(_M(r.maxWait)||0,t):d,X="trailing"in r?!!r.trailing:X);function J(Le){var Ae=s,We=l;return s=l=void 0,P=Le,y=e.apply(We,Ae),y}function Z(Le){return P=Le,n=setTimeout(de,t),L?J(Le):y}function ie(Le){var Ae=Le-M,We=Le-P,Qe=t-Ae;return V?are(Qe,d-We):Qe}function ae(Le){var Ae=Le-M,We=Le-P;return M===void 0||Ae>=t||Ae<0||V&&We>=d}function de(){var Le=eb();if(ae(Le))return fe(Le);n=setTimeout(de,ie(Le))}function fe(Le){return n=void 0,X&&s?J(Le):(s=l=void 0,y)}function le(){n!==void 0&&clearTimeout(n),P=0,s=M=l=n=void 0}function he(){return n===void 0?y:fe(eb())}function Ce(){var Le=eb(),Ae=ae(Le);if(s=arguments,l=this,M=Le,Ae){if(n===void 0)return Z(M);if(V)return clearTimeout(n),n=setTimeout(de,t),J(M)}return n===void 0&&(n=setTimeout(de,t)),y}return Ce.cancel=le,Ce.flush=he,Ce}var cre="Expected a function";function dse(e,t,r){var s=!0,l=!0;if(typeof e!="function")throw new TypeError(cre);return yy(r)&&(s="leading"in r?!!r.leading:s,l="trailing"in r?!!r.trailing:l),lre(e,t,{leading:s,maxWait:t,trailing:l})}var PI={exports:{}};function ure(e,t){var r=e.getCenter(),s=e.getZoom(),l=e.getBearing(),d=e.getPitch();t.forEach(function(y){y.jumpTo({center:r,zoom:s,bearing:l,pitch:d})})}function hre(){var e,t=arguments.length;if(t===1)e=arguments[0];else{e=[];for(var r=0;r<t;r++)e.push(arguments[r])}var s=[];e.forEach(function(n,M){s[M]=y.bind(null,n,e.filter(function(P,L){return L!==M}))});function l(){e.forEach(function(n,M){n.on("move",s[M])})}function d(){e.forEach(function(n,M){n.off("move",s[M])})}function y(n,M){d(),ure(n,M),l()}return l(),function(){d(),s=[],e=[]}}var dre=hre;(function(e){var t=dre,r=_A.EventEmitter;function s(l,d,y,n){if(this.options=n||{},this._mapA=l,this._mapB=d,this._horizontal=this.options.orientation==="horizontal",this._onDown=this._onDown.bind(this),this._onMove=this._onMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._ev=new r,this._swiper=document.createElement("div"),this._swiper.className=this._horizontal?"compare-swiper-horizontal":"compare-swiper-vertical",this._controlContainer=document.createElement("div"),this._controlContainer.className=this._horizontal?"mapboxgl-compare mapboxgl-compare-horizontal":"mapboxgl-compare",this._controlContainer.className=this._controlContainer.className,this._controlContainer.appendChild(this._swiper),typeof y=="string"&&document.body.querySelectorAll){var M=document.body.querySelectorAll(y)[0];if(!M)throw new Error("Cannot find element with specified container selector.");M.appendChild(this._controlContainer)}else if(y instanceof Element&&y.appendChild)y.appendChild(this._controlContainer);else throw new Error("Invalid container specified. Must be CSS selector or HTML element.");this._bounds=d.getContainer().getBoundingClientRect();var P=(this._horizontal?this._bounds.height:this._bounds.width)/2;this._setPosition(P),this._clearSync=t(l,d),this._onResize=function(){this._bounds=d.getContainer().getBoundingClientRect(),this.currentPosition&&this._setPosition(this.currentPosition)}.bind(this),d.on("resize",this._onResize),this.options&&this.options.mousemove&&(l.getContainer().addEventListener("mousemove",this._onMove),d.getContainer().addEventListener("mousemove",this._onMove)),this._swiper.addEventListener("mousedown",this._onDown),this._swiper.addEventListener("touchstart",this._onDown)}s.prototype={_setPointerEvents:function(l){this._controlContainer.style.pointerEvents=l,this._swiper.style.pointerEvents=l},_onDown:function(l){l.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp))},_setPosition:function(l){l=Math.min(l,this._horizontal?this._bounds.height:this._bounds.width);var d=this._horizontal?"translate(0, "+l+"px)":"translate("+l+"px, 0)";this._controlContainer.style.transform=d,this._controlContainer.style.WebkitTransform=d;var y=this._horizontal?"rect(0, 999em, "+l+"px, 0)":"rect(0, "+l+"px, "+this._bounds.height+"px, 0)",n=this._horizontal?"rect("+l+"px, 999em, "+this._bounds.height+"px,0)":"rect(0, 999em, "+this._bounds.height+"px,"+l+"px)";this._mapA.getContainer().style.clip=y,this._mapB.getContainer().style.clip=n,this.currentPosition=l},_onMove:function(l){this.options&&this.options.mousemove&&this._setPointerEvents(l.touches?"auto":"none"),this._horizontal?this._setPosition(this._getY(l)):this._setPosition(this._getX(l))},_onMouseUp:function(){document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),this.fire("slideend",{currentPosition:this.currentPosition})},_onTouchEnd:function(){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd),this.fire("slideend",{currentPosition:this.currentPosition})},_getX:function(l){l=l.touches?l.touches[0]:l;var d=l.clientX-this._bounds.left;return d<0&&(d=0),d>this._bounds.width&&(d=this._bounds.width),d},_getY:function(l){l=l.touches?l.touches[0]:l;var d=l.clientY-this._bounds.top;return d<0&&(d=0),d>this._bounds.height&&(d=this._bounds.height),d},setSlider:function(l){this._setPosition(l)},on:function(l,d){return this._ev.on(l,d),this},fire:function(l,d){return this._ev.emit(l,d),this},off:function(l,d){return this._ev.removeListener(l,d),this},remove:function(){this._clearSync(),this._mapB.off("resize",this._onResize);var l=this._mapA.getContainer();l&&(l.style.clip=null,l.removeEventListener("mousemove",this._onMove));var d=this._mapB.getContainer();d&&(d.style.clip=null,d.removeEventListener("mousemove",this._onMove)),this._swiper.removeEventListener("mousedown",this._onDown),this._swiper.removeEventListener("touchstart",this._onDown),this._controlContainer.remove()}},window.mapboxgl?mapboxgl.Compare=s:e.exports=s})(PI);var fre=PI.exports;const fse=Nm(fre);var lv={},pre=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},kI={},Pa={};let j6;const mre=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Pa.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Pa.getSymbolTotalCodewords=function(t){return mre[t]};Pa.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Pa.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');j6=t};Pa.isKanjiModeEnabled=function(){return typeof j6<"u"};Pa.toSJIS=function(t){return j6(t)};var cv={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},e.from=function(s,l){if(e.isValid(s))return s;try{return t(s)}catch{return l}}})(cv);function RI(){this.buffer=[],this.length=0}RI.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var gre=RI;function sg(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}sg.prototype.set=function(e,t,r,s){const l=e*this.size+t;this.data[l]=r,s&&(this.reservedBit[l]=!0)};sg.prototype.get=function(e,t){return this.data[e*this.size+t]};sg.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};sg.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var _re=sg,LI={};(function(e){const t=Pa.getSymbolSize;e.getRowColCoords=function(s){if(s===1)return[];const l=Math.floor(s/7)+2,d=t(s),y=d===145?26:Math.ceil((d-13)/(2*l-2))*2,n=[d-7];for(let M=1;M<l-1;M++)n[M]=n[M-1]-y;return n.push(6),n.reverse()},e.getPositions=function(s){const l=[],d=e.getRowColCoords(s),y=d.length;for(let n=0;n<y;n++)for(let M=0;M<y;M++)n===0&&M===0||n===0&&M===y-1||n===y-1&&M===0||l.push([d[n],d[M]]);return l}})(LI);var OI={};const yre=Pa.getSymbolSize,yM=7;OI.getPositions=function(t){const r=yre(t);return[[0,0],[r-yM,0],[0,r-yM]]};var BI={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},e.from=function(l){return e.isValid(l)?parseInt(l,10):void 0},e.getPenaltyN1=function(l){const d=l.size;let y=0,n=0,M=0,P=null,L=null;for(let V=0;V<d;V++){n=M=0,P=L=null;for(let X=0;X<d;X++){let J=l.get(V,X);J===P?n++:(n>=5&&(y+=t.N1+(n-5)),P=J,n=1),J=l.get(X,V),J===L?M++:(M>=5&&(y+=t.N1+(M-5)),L=J,M=1)}n>=5&&(y+=t.N1+(n-5)),M>=5&&(y+=t.N1+(M-5))}return y},e.getPenaltyN2=function(l){const d=l.size;let y=0;for(let n=0;n<d-1;n++)for(let M=0;M<d-1;M++){const P=l.get(n,M)+l.get(n,M+1)+l.get(n+1,M)+l.get(n+1,M+1);(P===4||P===0)&&y++}return y*t.N2},e.getPenaltyN3=function(l){const d=l.size;let y=0,n=0,M=0;for(let P=0;P<d;P++){n=M=0;for(let L=0;L<d;L++)n=n<<1&2047|l.get(P,L),L>=10&&(n===1488||n===93)&&y++,M=M<<1&2047|l.get(L,P),L>=10&&(M===1488||M===93)&&y++}return y*t.N3},e.getPenaltyN4=function(l){let d=0;const y=l.data.length;for(let M=0;M<y;M++)d+=l.data[M];return Math.abs(Math.ceil(d*100/y/5)-10)*t.N4};function r(s,l,d){switch(s){case e.Patterns.PATTERN000:return(l+d)%2===0;case e.Patterns.PATTERN001:return l%2===0;case e.Patterns.PATTERN010:return d%3===0;case e.Patterns.PATTERN011:return(l+d)%3===0;case e.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(d/3))%2===0;case e.Patterns.PATTERN101:return l*d%2+l*d%3===0;case e.Patterns.PATTERN110:return(l*d%2+l*d%3)%2===0;case e.Patterns.PATTERN111:return(l*d%3+(l+d)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}e.applyMask=function(l,d){const y=d.size;for(let n=0;n<y;n++)for(let M=0;M<y;M++)d.isReserved(M,n)||d.xor(M,n,r(l,M,n))},e.getBestMask=function(l,d){const y=Object.keys(e.Patterns).length;let n=0,M=1/0;for(let P=0;P<y;P++){d(P),e.applyMask(P,l);const L=e.getPenaltyN1(l)+e.getPenaltyN2(l)+e.getPenaltyN3(l)+e.getPenaltyN4(l);e.applyMask(P,l),L<M&&(M=L,n=P)}return n}})(BI);var uv={};const oh=cv,r2=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n2=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];uv.getBlocksCount=function(t,r){switch(r){case oh.L:return r2[(t-1)*4+0];case oh.M:return r2[(t-1)*4+1];case oh.Q:return r2[(t-1)*4+2];case oh.H:return r2[(t-1)*4+3];default:return}};uv.getTotalCodewordsCount=function(t,r){switch(r){case oh.L:return n2[(t-1)*4+0];case oh.M:return n2[(t-1)*4+1];case oh.Q:return n2[(t-1)*4+2];case oh.H:return n2[(t-1)*4+3];default:return}};var FI={},hv={};const cm=new Uint8Array(512),vy=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)cm[r]=t,vy[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)cm[r]=cm[r-255]})();hv.log=function(t){if(t<1)throw new Error("log("+t+")");return vy[t]};hv.exp=function(t){return cm[t]};hv.mul=function(t,r){return t===0||r===0?0:cm[vy[t]+vy[r]]};(function(e){const t=hv;e.mul=function(s,l){const d=new Uint8Array(s.length+l.length-1);for(let y=0;y<s.length;y++)for(let n=0;n<l.length;n++)d[y+n]^=t.mul(s[y],l[n]);return d},e.mod=function(s,l){let d=new Uint8Array(s);for(;d.length-l.length>=0;){const y=d[0];for(let M=0;M<l.length;M++)d[M]^=t.mul(l[M],y);let n=0;for(;n<d.length&&d[n]===0;)n++;d=d.slice(n)}return d},e.generateECPolynomial=function(s){let l=new Uint8Array([1]);for(let d=0;d<s;d++)l=e.mul(l,new Uint8Array([1,t.exp(d)]));return l}})(FI);const NI=FI;function U6(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}U6.prototype.initialize=function(t){this.degree=t,this.genPoly=NI.generateECPolynomial(this.degree)};U6.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const s=NI.mod(r,this.genPoly),l=this.degree-s.length;if(l>0){const d=new Uint8Array(this.degree);return d.set(s,l),d}return s};var vre=U6,$I={},Sh={},V6={};V6.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var kc={};const jI="[0-9]+",xre="[A-Z $%*+\\-./:]+";let Dm="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Dm=Dm.replace(/u/g,"\\u");const bre="(?:(?![A-Z0-9 $%*+\\-./:]|"+Dm+`)(?:.|[\r
]))+`;kc.KANJI=new RegExp(Dm,"g");kc.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");kc.BYTE=new RegExp(bre,"g");kc.NUMERIC=new RegExp(jI,"g");kc.ALPHANUMERIC=new RegExp(xre,"g");const wre=new RegExp("^"+Dm+"$"),Sre=new RegExp("^"+jI+"$"),Mre=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");kc.testKanji=function(t){return wre.test(t)};kc.testNumeric=function(t){return Sre.test(t)};kc.testAlphanumeric=function(t){return Mre.test(t)};(function(e){const t=V6,r=kc;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(d,y){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!t.isValid(y))throw new Error("Invalid version: "+y);return y>=1&&y<10?d.ccBits[0]:y<27?d.ccBits[1]:d.ccBits[2]},e.getBestModeForData=function(d){return r.testNumeric(d)?e.NUMERIC:r.testAlphanumeric(d)?e.ALPHANUMERIC:r.testKanji(d)?e.KANJI:e.BYTE},e.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},e.isValid=function(d){return d&&d.bit&&d.ccBits};function s(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+l)}}e.from=function(d,y){if(e.isValid(d))return d;try{return s(d)}catch{return y}}})(Sh);(function(e){const t=Pa,r=uv,s=cv,l=Sh,d=V6,y=7973,n=t.getBCHDigit(y);function M(X,J,Z){for(let ie=1;ie<=40;ie++)if(J<=e.getCapacity(ie,Z,X))return ie}function P(X,J){return l.getCharCountIndicator(X,J)+4}function L(X,J){let Z=0;return X.forEach(function(ie){const ae=P(ie.mode,J);Z+=ae+ie.getBitsLength()}),Z}function V(X,J){for(let Z=1;Z<=40;Z++)if(L(X,Z)<=e.getCapacity(Z,J,l.MIXED))return Z}e.from=function(J,Z){return d.isValid(J)?parseInt(J,10):Z},e.getCapacity=function(J,Z,ie){if(!d.isValid(J))throw new Error("Invalid QR Code version");typeof ie>"u"&&(ie=l.BYTE);const ae=t.getSymbolTotalCodewords(J),de=r.getTotalCodewordsCount(J,Z),fe=(ae-de)*8;if(ie===l.MIXED)return fe;const le=fe-P(ie,J);switch(ie){case l.NUMERIC:return Math.floor(le/10*3);case l.ALPHANUMERIC:return Math.floor(le/11*2);case l.KANJI:return Math.floor(le/13);case l.BYTE:default:return Math.floor(le/8)}},e.getBestVersionForData=function(J,Z){let ie;const ae=s.from(Z,s.M);if(Array.isArray(J)){if(J.length>1)return V(J,ae);if(J.length===0)return 1;ie=J[0]}else ie=J;return M(ie.mode,ie.getLength(),ae)},e.getEncodedBits=function(J){if(!d.isValid(J)||J<7)throw new Error("Invalid QR Code version");let Z=J<<12;for(;t.getBCHDigit(Z)-n>=0;)Z^=y<<t.getBCHDigit(Z)-n;return J<<12|Z}})($I);var UI={};const Zb=Pa,VI=1335,Ere=21522,vM=Zb.getBCHDigit(VI);UI.getEncodedBits=function(t,r){const s=t.bit<<3|r;let l=s<<10;for(;Zb.getBCHDigit(l)-vM>=0;)l^=VI<<Zb.getBCHDigit(l)-vM;return(s<<10|l)^Ere};var qI={};const Tre=Sh;function j1(e){this.mode=Tre.NUMERIC,this.data=e.toString()}j1.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};j1.prototype.getLength=function(){return this.data.length};j1.prototype.getBitsLength=function(){return j1.getBitsLength(this.data.length)};j1.prototype.write=function(t){let r,s,l;for(r=0;r+3<=this.data.length;r+=3)s=this.data.substr(r,3),l=parseInt(s,10),t.put(l,10);const d=this.data.length-r;d>0&&(s=this.data.substr(r),l=parseInt(s,10),t.put(l,d*3+1))};var Cre=j1;const Are=Sh,tb=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function U1(e){this.mode=Are.ALPHANUMERIC,this.data=e}U1.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};U1.prototype.getLength=function(){return this.data.length};U1.prototype.getBitsLength=function(){return U1.getBitsLength(this.data.length)};U1.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let s=tb.indexOf(this.data[r])*45;s+=tb.indexOf(this.data[r+1]),t.put(s,11)}this.data.length%2&&t.put(tb.indexOf(this.data[r]),6)};var Ire=U1;const zre=Sh;function V1(e){this.mode=zre.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}V1.getBitsLength=function(t){return t*8};V1.prototype.getLength=function(){return this.data.length};V1.prototype.getBitsLength=function(){return V1.getBitsLength(this.data.length)};V1.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var Dre=V1;const Pre=Sh,kre=Pa;function q1(e){this.mode=Pre.KANJI,this.data=e}q1.getBitsLength=function(t){return t*13};q1.prototype.getLength=function(){return this.data.length};q1.prototype.getBitsLength=function(){return q1.getBitsLength(this.data.length)};q1.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=kre.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var Rre=q1,HI={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,s,l){var d={},y={};y[s]=0;var n=t.PriorityQueue.make();n.push(s,0);for(var M,P,L,V,X,J,Z,ie,ae;!n.empty();){M=n.pop(),P=M.value,V=M.cost,X=r[P]||{};for(L in X)X.hasOwnProperty(L)&&(J=X[L],Z=V+J,ie=y[L],ae=typeof y[L]>"u",(ae||ie>Z)&&(y[L]=Z,n.push(L,Z),d[L]=P))}if(typeof l<"u"&&typeof y[l]>"u"){var de=["Could not find a path from ",s," to ",l,"."].join("");throw new Error(de)}return d},extract_shortest_path_from_predecessor_list:function(r,s){for(var l=[],d=s;d;)l.push(d),r[d],d=r[d];return l.reverse(),l},find_path:function(r,s,l){var d=t.single_source_shortest_paths(r,s,l);return t.extract_shortest_path_from_predecessor_list(d,l)},PriorityQueue:{make:function(r){var s=t.PriorityQueue,l={},d;r=r||{};for(d in s)s.hasOwnProperty(d)&&(l[d]=s[d]);return l.queue=[],l.sorter=r.sorter||s.default_sorter,l},default_sorter:function(r,s){return r.cost-s.cost},push:function(r,s){var l={value:r,cost:s};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(HI);var Lre=HI.exports;(function(e){const t=Sh,r=Cre,s=Ire,l=Dre,d=Rre,y=kc,n=Pa,M=Lre;function P(de){return unescape(encodeURIComponent(de)).length}function L(de,fe,le){const he=[];let Ce;for(;(Ce=de.exec(le))!==null;)he.push({data:Ce[0],index:Ce.index,mode:fe,length:Ce[0].length});return he}function V(de){const fe=L(y.NUMERIC,t.NUMERIC,de),le=L(y.ALPHANUMERIC,t.ALPHANUMERIC,de);let he,Ce;return n.isKanjiModeEnabled()?(he=L(y.BYTE,t.BYTE,de),Ce=L(y.KANJI,t.KANJI,de)):(he=L(y.BYTE_KANJI,t.BYTE,de),Ce=[]),fe.concat(le,he,Ce).sort(function(Ae,We){return Ae.index-We.index}).map(function(Ae){return{data:Ae.data,mode:Ae.mode,length:Ae.length}})}function X(de,fe){switch(fe){case t.NUMERIC:return r.getBitsLength(de);case t.ALPHANUMERIC:return s.getBitsLength(de);case t.KANJI:return d.getBitsLength(de);case t.BYTE:return l.getBitsLength(de)}}function J(de){return de.reduce(function(fe,le){const he=fe.length-1>=0?fe[fe.length-1]:null;return he&&he.mode===le.mode?(fe[fe.length-1].data+=le.data,fe):(fe.push(le),fe)},[])}function Z(de){const fe=[];for(let le=0;le<de.length;le++){const he=de[le];switch(he.mode){case t.NUMERIC:fe.push([he,{data:he.data,mode:t.ALPHANUMERIC,length:he.length},{data:he.data,mode:t.BYTE,length:he.length}]);break;case t.ALPHANUMERIC:fe.push([he,{data:he.data,mode:t.BYTE,length:he.length}]);break;case t.KANJI:fe.push([he,{data:he.data,mode:t.BYTE,length:P(he.data)}]);break;case t.BYTE:fe.push([{data:he.data,mode:t.BYTE,length:P(he.data)}])}}return fe}function ie(de,fe){const le={},he={start:{}};let Ce=["start"];for(let Le=0;Le<de.length;Le++){const Ae=de[Le],We=[];for(let Qe=0;Qe<Ae.length;Qe++){const ze=Ae[Qe],Ze=""+Le+Qe;We.push(Ze),le[Ze]={node:ze,lastCount:0},he[Ze]={};for(let Ue=0;Ue<Ce.length;Ue++){const vt=Ce[Ue];le[vt]&&le[vt].node.mode===ze.mode?(he[vt][Ze]=X(le[vt].lastCount+ze.length,ze.mode)-X(le[vt].lastCount,ze.mode),le[vt].lastCount+=ze.length):(le[vt]&&(le[vt].lastCount=ze.length),he[vt][Ze]=X(ze.length,ze.mode)+4+t.getCharCountIndicator(ze.mode,fe))}}Ce=We}for(let Le=0;Le<Ce.length;Le++)he[Ce[Le]].end=0;return{map:he,table:le}}function ae(de,fe){let le;const he=t.getBestModeForData(de);if(le=t.from(fe,he),le!==t.BYTE&&le.bit<he.bit)throw new Error('"'+de+'" cannot be encoded with mode '+t.toString(le)+`.
 Suggested mode is: `+t.toString(he));switch(le===t.KANJI&&!n.isKanjiModeEnabled()&&(le=t.BYTE),le){case t.NUMERIC:return new r(de);case t.ALPHANUMERIC:return new s(de);case t.KANJI:return new d(de);case t.BYTE:return new l(de)}}e.fromArray=function(fe){return fe.reduce(function(le,he){return typeof he=="string"?le.push(ae(he,null)):he.data&&le.push(ae(he.data,he.mode)),le},[])},e.fromString=function(fe,le){const he=V(fe,n.isKanjiModeEnabled()),Ce=Z(he),Le=ie(Ce,le),Ae=M.find_path(Le.map,"start","end"),We=[];for(let Qe=1;Qe<Ae.length-1;Qe++)We.push(Le.table[Ae[Qe]].node);return e.fromArray(J(We))},e.rawSplit=function(fe){return e.fromArray(V(fe,n.isKanjiModeEnabled()))}})(qI);const dv=Pa,ib=cv,Ore=gre,Bre=_re,Fre=LI,Nre=OI,Xb=BI,Yb=uv,$re=vre,xy=$I,jre=UI,Ure=Sh,rb=qI;function Vre(e,t){const r=e.size,s=Nre.getPositions(t);for(let l=0;l<s.length;l++){const d=s[l][0],y=s[l][1];for(let n=-1;n<=7;n++)if(!(d+n<=-1||r<=d+n))for(let M=-1;M<=7;M++)y+M<=-1||r<=y+M||(n>=0&&n<=6&&(M===0||M===6)||M>=0&&M<=6&&(n===0||n===6)||n>=2&&n<=4&&M>=2&&M<=4?e.set(d+n,y+M,!0,!0):e.set(d+n,y+M,!1,!0))}}function qre(e){const t=e.size;for(let r=8;r<t-8;r++){const s=r%2===0;e.set(r,6,s,!0),e.set(6,r,s,!0)}}function Hre(e,t){const r=Fre.getPositions(t);for(let s=0;s<r.length;s++){const l=r[s][0],d=r[s][1];for(let y=-2;y<=2;y++)for(let n=-2;n<=2;n++)y===-2||y===2||n===-2||n===2||y===0&&n===0?e.set(l+y,d+n,!0,!0):e.set(l+y,d+n,!1,!0)}}function Gre(e,t){const r=e.size,s=xy.getEncodedBits(t);let l,d,y;for(let n=0;n<18;n++)l=Math.floor(n/3),d=n%3+r-8-3,y=(s>>n&1)===1,e.set(l,d,y,!0),e.set(d,l,y,!0)}function nb(e,t,r){const s=e.size,l=jre.getEncodedBits(t,r);let d,y;for(d=0;d<15;d++)y=(l>>d&1)===1,d<6?e.set(d,8,y,!0):d<8?e.set(d+1,8,y,!0):e.set(s-15+d,8,y,!0),d<8?e.set(8,s-d-1,y,!0):d<9?e.set(8,15-d-1+1,y,!0):e.set(8,15-d-1,y,!0);e.set(s-8,8,1,!0)}function Wre(e,t){const r=e.size;let s=-1,l=r-1,d=7,y=0;for(let n=r-1;n>0;n-=2)for(n===6&&n--;;){for(let M=0;M<2;M++)if(!e.isReserved(l,n-M)){let P=!1;y<t.length&&(P=(t[y]>>>d&1)===1),e.set(l,n-M,P),d--,d===-1&&(y++,d=7)}if(l+=s,l<0||r<=l){l-=s,s=-s;break}}}function Zre(e,t,r){const s=new Ore;r.forEach(function(M){s.put(M.mode.bit,4),s.put(M.getLength(),Ure.getCharCountIndicator(M.mode,e)),M.write(s)});const l=dv.getSymbolTotalCodewords(e),d=Yb.getTotalCodewordsCount(e,t),y=(l-d)*8;for(s.getLengthInBits()+4<=y&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const n=(y-s.getLengthInBits())/8;for(let M=0;M<n;M++)s.put(M%2?17:236,8);return Xre(s,e,t)}function Xre(e,t,r){const s=dv.getSymbolTotalCodewords(t),l=Yb.getTotalCodewordsCount(t,r),d=s-l,y=Yb.getBlocksCount(t,r),n=s%y,M=y-n,P=Math.floor(s/y),L=Math.floor(d/y),V=L+1,X=P-L,J=new $re(X);let Z=0;const ie=new Array(y),ae=new Array(y);let de=0;const fe=new Uint8Array(e.buffer);for(let Ae=0;Ae<y;Ae++){const We=Ae<M?L:V;ie[Ae]=fe.slice(Z,Z+We),ae[Ae]=J.encode(ie[Ae]),Z+=We,de=Math.max(de,We)}const le=new Uint8Array(s);let he=0,Ce,Le;for(Ce=0;Ce<de;Ce++)for(Le=0;Le<y;Le++)Ce<ie[Le].length&&(le[he++]=ie[Le][Ce]);for(Ce=0;Ce<X;Ce++)for(Le=0;Le<y;Le++)le[he++]=ae[Le][Ce];return le}function Yre(e,t,r,s){let l;if(Array.isArray(e))l=rb.fromArray(e);else if(typeof e=="string"){let P=t;if(!P){const L=rb.rawSplit(e);P=xy.getBestVersionForData(L,r)}l=rb.fromString(e,P||40)}else throw new Error("Invalid data");const d=xy.getBestVersionForData(l,r);if(!d)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=d;else if(t<d)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+d+`.
`);const y=Zre(t,r,l),n=dv.getSymbolSize(t),M=new Bre(n);return Vre(M,t),qre(M),Hre(M,t),nb(M,r,0),t>=7&&Gre(M,t),Wre(M,y),isNaN(s)&&(s=Xb.getBestMask(M,nb.bind(null,M,r))),Xb.applyMask(s,M),nb(M,r,s),{modules:M,version:t,errorCorrectionLevel:r,maskPattern:s,segments:l}}kI.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let s=ib.M,l,d;return typeof r<"u"&&(s=ib.from(r.errorCorrectionLevel,ib.M),l=xy.from(r.version),d=Xb.from(r.maskPattern),r.toSJISFunc&&dv.setToSJISFunction(r.toSJISFunc)),Yre(t,l,s,d)};var GI={},q6={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let s=r.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+r);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(d){return[d,d]}))),s.length===6&&s.push("F","F");const l=parseInt(s.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+s.slice(0,6).join("")}}e.getOptions=function(s){s||(s={}),s.color||(s.color={});const l=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,d=s.width&&s.width>=21?s.width:void 0,y=s.scale||4;return{width:d,scale:d?4:y,margin:l,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},e.getScale=function(s,l){return l.width&&l.width>=s+l.margin*2?l.width/(s+l.margin*2):l.scale},e.getImageWidth=function(s,l){const d=e.getScale(s,l);return Math.floor((s+l.margin*2)*d)},e.qrToImageData=function(s,l,d){const y=l.modules.size,n=l.modules.data,M=e.getScale(y,d),P=Math.floor((y+d.margin*2)*M),L=d.margin*M,V=[d.color.light,d.color.dark];for(let X=0;X<P;X++)for(let J=0;J<P;J++){let Z=(X*P+J)*4,ie=d.color.light;if(X>=L&&J>=L&&X<P-L&&J<P-L){const ae=Math.floor((X-L)/M),de=Math.floor((J-L)/M);ie=V[n[ae*y+de]?1:0]}s[Z++]=ie.r,s[Z++]=ie.g,s[Z++]=ie.b,s[Z]=ie.a}}})(q6);(function(e){const t=q6;function r(l,d,y){l.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=y,d.width=y,d.style.height=y+"px",d.style.width=y+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(d,y,n){let M=n,P=y;typeof M>"u"&&(!y||!y.getContext)&&(M=y,y=void 0),y||(P=s()),M=t.getOptions(M);const L=t.getImageWidth(d.modules.size,M),V=P.getContext("2d"),X=V.createImageData(L,L);return t.qrToImageData(X.data,d,M),r(V,P,L),V.putImageData(X,0,0),P},e.renderToDataURL=function(d,y,n){let M=n;typeof M>"u"&&(!y||!y.getContext)&&(M=y,y=void 0),M||(M={});const P=e.render(d,y,M),L=M.type||"image/png",V=M.rendererOpts||{};return P.toDataURL(L,V.quality)}})(GI);var WI={};const Jre=q6;function xM(e,t){const r=e.a/255,s=t+'="'+e.hex+'"';return r<1?s+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':s}function ob(e,t,r){let s=e+t;return typeof r<"u"&&(s+=" "+r),s}function Kre(e,t,r){let s="",l=0,d=!1,y=0;for(let n=0;n<e.length;n++){const M=Math.floor(n%t),P=Math.floor(n/t);!M&&!d&&(d=!0),e[n]?(y++,n>0&&M>0&&e[n-1]||(s+=d?ob("M",M+r,.5+P+r):ob("m",l,0),l=0,d=!1),M+1<t&&e[n+1]||(s+=ob("h",y),y=0)):l++}return s}WI.render=function(t,r,s){const l=Jre.getOptions(r),d=t.modules.size,y=t.modules.data,n=d+l.margin*2,M=l.color.light.a?"<path "+xM(l.color.light,"fill")+' d="M0 0h'+n+"v"+n+'H0z"/>':"",P="<path "+xM(l.color.dark,"stroke")+' d="'+Kre(y,d,l.margin)+'"/>',L='viewBox="0 0 '+n+" "+n+'"',X='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+L+' shape-rendering="crispEdges">'+M+P+`</svg>
`;return typeof s=="function"&&s(null,X),X};const Qre=pre,Jb=kI,ZI=GI,ene=WI;function H6(e,t,r,s,l){const d=[].slice.call(arguments,1),y=d.length,n=typeof d[y-1]=="function";if(!n&&!Qre())throw new Error("Callback required as last argument");if(n){if(y<2)throw new Error("Too few arguments provided");y===2?(l=r,r=t,t=s=void 0):y===3&&(t.getContext&&typeof l>"u"?(l=s,s=void 0):(l=s,s=r,r=t,t=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(r=t,t=s=void 0):y===2&&!t.getContext&&(s=r,r=t,t=void 0),new Promise(function(M,P){try{const L=Jb.create(r,s);M(e(L,t,s))}catch(L){P(L)}})}try{const M=Jb.create(r,s);l(null,e(M,t,s))}catch(M){l(M)}}lv.create=Jb.create;lv.toCanvas=H6.bind(null,ZI.render);lv.toDataURL=H6.bind(null,ZI.renderToDataURL);lv.toString=H6.bind(null,function(e,t,r){return ene.render(e,r)});const tne=["top","right","bottom","left"],bM=["start","end"],wM=tne.reduce((e,t)=>e.concat(t,t+"-"+bM[0],t+"-"+bM[1]),[]),Pm=Math.min,gd=Math.max,ine={left:"right",right:"left",bottom:"top",top:"bottom"},rne={start:"end",end:"start"};function Kb(e,t,r){return gd(e,Pm(t,r))}function qd(e,t){return typeof e=="function"?e(t):e}function zc(e){return e.split("-")[0]}function jl(e){return e.split("-")[1]}function XI(e){return e==="x"?"y":"x"}function G6(e){return e==="y"?"height":"width"}function Fd(e){return["top","bottom"].includes(zc(e))?"y":"x"}function W6(e){return XI(Fd(e))}function YI(e,t,r){r===void 0&&(r=!1);const s=jl(e),l=W6(e),d=G6(l);let y=l==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[d]>t.floating[d]&&(y=wy(y)),[y,wy(y)]}function nne(e){const t=wy(e);return[by(e),t,by(t)]}function by(e){return e.replace(/start|end/g,t=>rne[t])}function one(e,t,r){const s=["left","right"],l=["right","left"],d=["top","bottom"],y=["bottom","top"];switch(e){case"top":case"bottom":return r?t?l:s:t?s:l;case"left":case"right":return t?d:y;default:return[]}}function sne(e,t,r,s){const l=jl(e);let d=one(zc(e),r==="start",s);return l&&(d=d.map(y=>y+"-"+l),t&&(d=d.concat(d.map(by)))),d}function wy(e){return e.replace(/left|right|bottom|top/g,t=>ine[t])}function ane(e){return{top:0,right:0,bottom:0,left:0,...e}}function JI(e){return typeof e!="number"?ane(e):{top:e,right:e,bottom:e,left:e}}function um(e){const{x:t,y:r,width:s,height:l}=e;return{width:s,height:l,top:r,left:t,right:t+s,bottom:r+l,x:t,y:r}}function SM(e,t,r){let{reference:s,floating:l}=e;const d=Fd(t),y=W6(t),n=G6(y),M=zc(t),P=d==="y",L=s.x+s.width/2-l.width/2,V=s.y+s.height/2-l.height/2,X=s[n]/2-l[n]/2;let J;switch(M){case"top":J={x:L,y:s.y-l.height};break;case"bottom":J={x:L,y:s.y+s.height};break;case"right":J={x:s.x+s.width,y:V};break;case"left":J={x:s.x-l.width,y:V};break;default:J={x:s.x,y:s.y}}switch(jl(t)){case"start":J[y]-=X*(r&&P?-1:1);break;case"end":J[y]+=X*(r&&P?-1:1);break}return J}const lne=async(e,t,r)=>{const{placement:s="bottom",strategy:l="absolute",middleware:d=[],platform:y}=r,n=d.filter(Boolean),M=await(y.isRTL==null?void 0:y.isRTL(t));let P=await y.getElementRects({reference:e,floating:t,strategy:l}),{x:L,y:V}=SM(P,s,M),X=s,J={},Z=0;for(let ie=0;ie<n.length;ie++){const{name:ae,fn:de}=n[ie],{x:fe,y:le,data:he,reset:Ce}=await de({x:L,y:V,initialPlacement:s,placement:X,strategy:l,middlewareData:J,rects:P,platform:y,elements:{reference:e,floating:t}});L=fe??L,V=le??V,J={...J,[ae]:{...J[ae],...he}},Ce&&Z<=50&&(Z++,typeof Ce=="object"&&(Ce.placement&&(X=Ce.placement),Ce.rects&&(P=Ce.rects===!0?await y.getElementRects({reference:e,floating:t,strategy:l}):Ce.rects),{x:L,y:V}=SM(P,X,M)),ie=-1)}return{x:L,y:V,placement:X,strategy:l,middlewareData:J}};async function fv(e,t){var r;t===void 0&&(t={});const{x:s,y:l,platform:d,rects:y,elements:n,strategy:M}=e,{boundary:P="clippingAncestors",rootBoundary:L="viewport",elementContext:V="floating",altBoundary:X=!1,padding:J=0}=qd(t,e),Z=JI(J),ae=n[X?V==="floating"?"reference":"floating":V],de=um(await d.getClippingRect({element:(r=await(d.isElement==null?void 0:d.isElement(ae)))==null||r?ae:ae.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(n.floating)),boundary:P,rootBoundary:L,strategy:M})),fe=V==="floating"?{x:s,y:l,width:y.floating.width,height:y.floating.height}:y.reference,le=await(d.getOffsetParent==null?void 0:d.getOffsetParent(n.floating)),he=await(d.isElement==null?void 0:d.isElement(le))?await(d.getScale==null?void 0:d.getScale(le))||{x:1,y:1}:{x:1,y:1},Ce=um(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:n,rect:fe,offsetParent:le,strategy:M}):fe);return{top:(de.top-Ce.top+Z.top)/he.y,bottom:(Ce.bottom-de.bottom+Z.bottom)/he.y,left:(de.left-Ce.left+Z.left)/he.x,right:(Ce.right-de.right+Z.right)/he.x}}const cne=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:l,rects:d,platform:y,elements:n,middlewareData:M}=t,{element:P,padding:L=0}=qd(e,t)||{};if(P==null)return{};const V=JI(L),X={x:r,y:s},J=W6(l),Z=G6(J),ie=await y.getDimensions(P),ae=J==="y",de=ae?"top":"left",fe=ae?"bottom":"right",le=ae?"clientHeight":"clientWidth",he=d.reference[Z]+d.reference[J]-X[J]-d.floating[Z],Ce=X[J]-d.reference[J],Le=await(y.getOffsetParent==null?void 0:y.getOffsetParent(P));let Ae=Le?Le[le]:0;(!Ae||!await(y.isElement==null?void 0:y.isElement(Le)))&&(Ae=n.floating[le]||d.floating[Z]);const We=he/2-Ce/2,Qe=Ae/2-ie[Z]/2-1,ze=Pm(V[de],Qe),Ze=Pm(V[fe],Qe),Ue=ze,vt=Ae-ie[Z]-Ze,Be=Ae/2-ie[Z]/2+We,Ke=Kb(Ue,Be,vt),xt=!M.arrow&&jl(l)!=null&&Be!==Ke&&d.reference[Z]/2-(Be<Ue?ze:Ze)-ie[Z]/2<0,yt=xt?Be<Ue?Be-Ue:Be-vt:0;return{[J]:X[J]+yt,data:{[J]:Ke,centerOffset:Be-Ke-yt,...xt&&{alignmentOffset:yt}},reset:xt}}});function une(e,t,r){return(e?[...r.filter(l=>jl(l)===e),...r.filter(l=>jl(l)!==e)]:r.filter(l=>zc(l)===l)).filter(l=>e?jl(l)===e||(t?by(l)!==l:!1):!0)}const hne=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var r,s,l;const{rects:d,middlewareData:y,placement:n,platform:M,elements:P}=t,{crossAxis:L=!1,alignment:V,allowedPlacements:X=wM,autoAlignment:J=!0,...Z}=qd(e,t),ie=V!==void 0||X===wM?une(V||null,J,X):X,ae=await fv(t,Z),de=((r=y.autoPlacement)==null?void 0:r.index)||0,fe=ie[de];if(fe==null)return{};const le=YI(fe,d,await(M.isRTL==null?void 0:M.isRTL(P.floating)));if(n!==fe)return{reset:{placement:ie[0]}};const he=[ae[zc(fe)],ae[le[0]],ae[le[1]]],Ce=[...((s=y.autoPlacement)==null?void 0:s.overflows)||[],{placement:fe,overflows:he}],Le=ie[de+1];if(Le)return{data:{index:de+1,overflows:Ce},reset:{placement:Le}};const Ae=Ce.map(ze=>{const Ze=jl(ze.placement);return[ze.placement,Ze&&L?ze.overflows.slice(0,2).reduce((Ue,vt)=>Ue+vt,0):ze.overflows[0],ze.overflows]}).sort((ze,Ze)=>ze[1]-Ze[1]),Qe=((l=Ae.filter(ze=>ze[2].slice(0,jl(ze[0])?2:3).every(Ze=>Ze<=0))[0])==null?void 0:l[0])||Ae[0][0];return Qe!==n?{data:{index:de+1,overflows:Ce},reset:{placement:Qe}}:{}}}},dne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:l,middlewareData:d,rects:y,initialPlacement:n,platform:M,elements:P}=t,{mainAxis:L=!0,crossAxis:V=!0,fallbackPlacements:X,fallbackStrategy:J="bestFit",fallbackAxisSideDirection:Z="none",flipAlignment:ie=!0,...ae}=qd(e,t);if((r=d.arrow)!=null&&r.alignmentOffset)return{};const de=zc(l),fe=Fd(n),le=zc(n)===n,he=await(M.isRTL==null?void 0:M.isRTL(P.floating)),Ce=X||(le||!ie?[wy(n)]:nne(n)),Le=Z!=="none";!X&&Le&&Ce.push(...sne(n,ie,Z,he));const Ae=[n,...Ce],We=await fv(t,ae),Qe=[];let ze=((s=d.flip)==null?void 0:s.overflows)||[];if(L&&Qe.push(We[de]),V){const Be=YI(l,y,he);Qe.push(We[Be[0]],We[Be[1]])}if(ze=[...ze,{placement:l,overflows:Qe}],!Qe.every(Be=>Be<=0)){var Ze,Ue;const Be=(((Ze=d.flip)==null?void 0:Ze.index)||0)+1,Ke=Ae[Be];if(Ke)return{data:{index:Be,overflows:ze},reset:{placement:Ke}};let xt=(Ue=ze.filter(yt=>yt.overflows[0]<=0).sort((yt,Dt)=>yt.overflows[1]-Dt.overflows[1])[0])==null?void 0:Ue.placement;if(!xt)switch(J){case"bestFit":{var vt;const yt=(vt=ze.filter(Dt=>{if(Le){const bt=Fd(Dt.placement);return bt===fe||bt==="y"}return!0}).map(Dt=>[Dt.placement,Dt.overflows.filter(bt=>bt>0).reduce((bt,bi)=>bt+bi,0)]).sort((Dt,bt)=>Dt[1]-bt[1])[0])==null?void 0:vt[0];yt&&(xt=yt);break}case"initialPlacement":xt=n;break}if(l!==xt)return{reset:{placement:xt}}}return{}}}};async function fne(e,t){const{placement:r,platform:s,elements:l}=e,d=await(s.isRTL==null?void 0:s.isRTL(l.floating)),y=zc(r),n=jl(r),M=Fd(r)==="y",P=["left","top"].includes(y)?-1:1,L=d&&M?-1:1,V=qd(t,e);let{mainAxis:X,crossAxis:J,alignmentAxis:Z}=typeof V=="number"?{mainAxis:V,crossAxis:0,alignmentAxis:null}:{mainAxis:V.mainAxis||0,crossAxis:V.crossAxis||0,alignmentAxis:V.alignmentAxis};return n&&typeof Z=="number"&&(J=n==="end"?Z*-1:Z),M?{x:J*L,y:X*P}:{x:X*P,y:J*L}}const pne=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:l,y:d,placement:y,middlewareData:n}=t,M=await fne(t,e);return y===((r=n.offset)==null?void 0:r.placement)&&(s=n.arrow)!=null&&s.alignmentOffset?{}:{x:l+M.x,y:d+M.y,data:{...M,placement:y}}}}},mne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:l}=t,{mainAxis:d=!0,crossAxis:y=!1,limiter:n={fn:ae=>{let{x:de,y:fe}=ae;return{x:de,y:fe}}},...M}=qd(e,t),P={x:r,y:s},L=await fv(t,M),V=Fd(zc(l)),X=XI(V);let J=P[X],Z=P[V];if(d){const ae=X==="y"?"top":"left",de=X==="y"?"bottom":"right",fe=J+L[ae],le=J-L[de];J=Kb(fe,J,le)}if(y){const ae=V==="y"?"top":"left",de=V==="y"?"bottom":"right",fe=Z+L[ae],le=Z-L[de];Z=Kb(fe,Z,le)}const ie=n.fn({...t,[X]:J,[V]:Z});return{...ie,data:{x:ie.x-r,y:ie.y-s,enabled:{[X]:d,[V]:y}}}}}},gne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:l,rects:d,platform:y,elements:n}=t,{apply:M=()=>{},...P}=qd(e,t),L=await fv(t,P),V=zc(l),X=jl(l),J=Fd(l)==="y",{width:Z,height:ie}=d.floating;let ae,de;V==="top"||V==="bottom"?(ae=V,de=X===(await(y.isRTL==null?void 0:y.isRTL(n.floating))?"start":"end")?"left":"right"):(de=V,ae=X==="end"?"top":"bottom");const fe=ie-L.top-L.bottom,le=Z-L.left-L.right,he=Pm(ie-L[ae],fe),Ce=Pm(Z-L[de],le),Le=!t.middlewareData.shift;let Ae=he,We=Ce;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(We=le),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(Ae=fe),Le&&!X){const ze=gd(L.left,0),Ze=gd(L.right,0),Ue=gd(L.top,0),vt=gd(L.bottom,0);J?We=Z-2*(ze!==0||Ze!==0?ze+Ze:gd(L.left,L.right)):Ae=ie-2*(Ue!==0||vt!==0?Ue+vt:gd(L.top,L.bottom))}await M({...t,availableWidth:We,availableHeight:Ae});const Qe=await y.getDimensions(n.floating);return Z!==Qe.width||ie!==Qe.height?{reset:{rects:!0}}:{}}}};function il(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ec(e){return il(e).getComputedStyle(e)}const MM=Math.min,hm=Math.max,Sy=Math.round;function KI(e){const t=Ec(e);let r=parseFloat(t.width),s=parseFloat(t.height);const l=e.offsetWidth,d=e.offsetHeight,y=Sy(r)!==l||Sy(s)!==d;return y&&(r=l,s=d),{width:r,height:s,fallback:y}}function gh(e){return ez(e)?(e.nodeName||"").toLowerCase():""}let o2;function QI(){if(o2)return o2;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(o2=e.brands.map(t=>t.brand+"/"+t.version).join(" "),o2):navigator.userAgent}function Tc(e){return e instanceof il(e).HTMLElement}function lh(e){return e instanceof il(e).Element}function ez(e){return e instanceof il(e).Node}function EM(e){return typeof ShadowRoot>"u"?!1:e instanceof il(e).ShadowRoot||e instanceof ShadowRoot}function pv(e){const{overflow:t,overflowX:r,overflowY:s,display:l}=Ec(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!["inline","contents"].includes(l)}function _ne(e){return["table","td","th"].includes(gh(e))}function Qb(e){const t=/firefox/i.test(QI()),r=Ec(e),s=r.backdropFilter||r.WebkitBackdropFilter;return r.transform!=="none"||r.perspective!=="none"||!!s&&s!=="none"||t&&r.willChange==="filter"||t&&!!r.filter&&r.filter!=="none"||["transform","perspective"].some(l=>r.willChange.includes(l))||["paint","layout","strict","content"].some(l=>{const d=r.contain;return d!=null&&d.includes(l)})}function tz(){return!/^((?!chrome|android).)*safari/i.test(QI())}function Z6(e){return["html","body","#document"].includes(gh(e))}function iz(e){return lh(e)?e:e.contextElement}const rz={x:1,y:1};function M1(e){const t=iz(e);if(!Tc(t))return rz;const r=t.getBoundingClientRect(),{width:s,height:l,fallback:d}=KI(t);let y=(d?Sy(r.width):r.width)/s,n=(d?Sy(r.height):r.height)/l;return y&&Number.isFinite(y)||(y=1),n&&Number.isFinite(n)||(n=1),{x:y,y:n}}function km(e,t,r,s){var l,d;t===void 0&&(t=!1),r===void 0&&(r=!1);const y=e.getBoundingClientRect(),n=iz(e);let M=rz;t&&(s?lh(s)&&(M=M1(s)):M=M1(e));const P=n?il(n):window,L=!tz()&&r;let V=(y.left+(L&&((l=P.visualViewport)==null?void 0:l.offsetLeft)||0))/M.x,X=(y.top+(L&&((d=P.visualViewport)==null?void 0:d.offsetTop)||0))/M.y,J=y.width/M.x,Z=y.height/M.y;if(n){const ie=il(n),ae=s&&lh(s)?il(s):s;let de=ie.frameElement;for(;de&&s&&ae!==ie;){const fe=M1(de),le=de.getBoundingClientRect(),he=getComputedStyle(de);le.x+=(de.clientLeft+parseFloat(he.paddingLeft))*fe.x,le.y+=(de.clientTop+parseFloat(he.paddingTop))*fe.y,V*=fe.x,X*=fe.y,J*=fe.x,Z*=fe.y,V+=le.x,X+=le.y,de=il(de).frameElement}}return{width:J,height:Z,top:X,right:V+J,bottom:X+Z,left:V,x:V,y:X}}function ch(e){return((ez(e)?e.ownerDocument:e.document)||window.document).documentElement}function mv(e){return lh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function nz(e){return km(ch(e)).left+mv(e).scrollLeft}function Rm(e){if(gh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||EM(e)&&e.host||ch(e);return EM(t)?t.host:t}function oz(e){const t=Rm(e);return Z6(t)?t.ownerDocument.body:Tc(t)&&pv(t)?t:oz(t)}function My(e,t){var r;t===void 0&&(t=[]);const s=oz(e),l=s===((r=e.ownerDocument)==null?void 0:r.body),d=il(s);return l?t.concat(d,d.visualViewport||[],pv(s)?s:[]):t.concat(s,My(s))}function TM(e,t,r){return t==="viewport"?um(function(s,l){const d=il(s),y=ch(s),n=d.visualViewport;let M=y.clientWidth,P=y.clientHeight,L=0,V=0;if(n){M=n.width,P=n.height;const X=tz();(X||!X&&l==="fixed")&&(L=n.offsetLeft,V=n.offsetTop)}return{width:M,height:P,x:L,y:V}}(e,r)):lh(t)?um(function(s,l){const d=km(s,!0,l==="fixed"),y=d.top+s.clientTop,n=d.left+s.clientLeft,M=Tc(s)?M1(s):{x:1,y:1};return{width:s.clientWidth*M.x,height:s.clientHeight*M.y,x:n*M.x,y:y*M.y}}(t,r)):um(function(s){const l=ch(s),d=mv(s),y=s.ownerDocument.body,n=hm(l.scrollWidth,l.clientWidth,y.scrollWidth,y.clientWidth),M=hm(l.scrollHeight,l.clientHeight,y.scrollHeight,y.clientHeight);let P=-d.scrollLeft+nz(s);const L=-d.scrollTop;return Ec(y).direction==="rtl"&&(P+=hm(l.clientWidth,y.clientWidth)-n),{width:n,height:M,x:P,y:L}}(ch(e)))}function CM(e){return Tc(e)&&Ec(e).position!=="fixed"?e.offsetParent:null}function AM(e){const t=il(e);let r=CM(e);for(;r&&_ne(r)&&Ec(r).position==="static";)r=CM(r);return r&&(gh(r)==="html"||gh(r)==="body"&&Ec(r).position==="static"&&!Qb(r))?t:r||function(s){let l=Rm(s);for(;Tc(l)&&!Z6(l);){if(Qb(l))return l;l=Rm(l)}return null}(e)||t}function yne(e,t,r){const s=Tc(t),l=ch(t),d=km(e,!0,r==="fixed",t);let y={scrollLeft:0,scrollTop:0};const n={x:0,y:0};if(s||!s&&r!=="fixed")if((gh(t)!=="body"||pv(l))&&(y=mv(t)),Tc(t)){const M=km(t,!0);n.x=M.x+t.clientLeft,n.y=M.y+t.clientTop}else l&&(n.x=nz(l));return{x:d.left+y.scrollLeft-n.x,y:d.top+y.scrollTop-n.y,width:d.width,height:d.height}}const vne={getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:s,strategy:l}=e;const d=r==="clippingAncestors"?function(P,L){const V=L.get(P);if(V)return V;let X=My(P).filter(ae=>lh(ae)&&gh(ae)!=="body"),J=null;const Z=Ec(P).position==="fixed";let ie=Z?Rm(P):P;for(;lh(ie)&&!Z6(ie);){const ae=Ec(ie),de=Qb(ie);(Z?de||J:de||ae.position!=="static"||!J||!["absolute","fixed"].includes(J.position))?J=ae:X=X.filter(fe=>fe!==ie),ie=Rm(ie)}return L.set(P,X),X}(t,this._c):[].concat(r),y=[...d,s],n=y[0],M=y.reduce((P,L)=>{const V=TM(t,L,l);return P.top=hm(V.top,P.top),P.right=MM(V.right,P.right),P.bottom=MM(V.bottom,P.bottom),P.left=hm(V.left,P.left),P},TM(t,n,l));return{width:M.right-M.left,height:M.bottom-M.top,x:M.left,y:M.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:r,strategy:s}=e;const l=Tc(r),d=ch(r);if(r===d)return t;let y={scrollLeft:0,scrollTop:0},n={x:1,y:1};const M={x:0,y:0};if((l||!l&&s!=="fixed")&&((gh(r)!=="body"||pv(d))&&(y=mv(r)),Tc(r))){const P=km(r);n=M1(r),M.x=P.x+r.clientLeft,M.y=P.y+r.clientTop}return{width:t.width*n.x,height:t.height*n.y,x:t.x*n.x-y.scrollLeft*n.x+M.x,y:t.y*n.y-y.scrollTop*n.y+M.y}},isElement:lh,getDimensions:function(e){return Tc(e)?KI(e):e.getBoundingClientRect()},getOffsetParent:AM,getDocumentElement:ch,getScale:M1,async getElementRects(e){let{reference:t,floating:r,strategy:s}=e;const l=this.getOffsetParent||AM,d=this.getDimensions;return{reference:yne(t,await l(r),s),floating:{x:0,y:0,...await d(r)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Ec(e).direction==="rtl"},xne=(e,t,r)=>{const s=new Map,l={platform:vne,...r},d={...l.platform,_c:s};return lne(e,t,{...l,platform:d})},zd={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:e=>[...e,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function Lm(e,t){let r=zd.themes[e]||{},s;do s=r[t],typeof s>"u"?r.$extend?r=zd.themes[r.$extend]||{}:(r=null,s=zd[t]):r=null;while(r);return s}function bne(e){const t=[e];let r=zd.themes[e]||{};do r.$extend&&!r.$resetCss?(t.push(r.$extend),r=zd.themes[r.$extend]||{}):r=null;while(r);return t.map(s=>`v-popper--theme-${s}`)}function IM(e){const t=[e];let r=zd.themes[e]||{};do r.$extend?(t.push(r.$extend),r=zd.themes[r.$extend]||{}):r=null;while(r);return t}let H1=!1;if(typeof window<"u"){H1=!1;try{const e=Object.defineProperty({},"passive",{get(){H1=!0}});window.addEventListener("test",null,e)}catch{}}let sz=!1;typeof window<"u"&&typeof navigator<"u"&&(sz=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const az=["auto","top","bottom","left","right"].reduce((e,t)=>e.concat([t,`${t}-start`,`${t}-end`]),[]),zM={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},DM={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function PM(e,t){const r=e.indexOf(t);r!==-1&&e.splice(r,1)}function sb(){return new Promise(e=>requestAnimationFrame(()=>{requestAnimationFrame(e)}))}const Fl=[];let dd=null;const kM={};function RM(e){let t=kM[e];return t||(t=kM[e]=[]),t}let e4=function(){};typeof window<"u"&&(e4=window.Element);function Qr(e){return function(t){return Lm(t.theme,e)}}const ab="__floating-vue__popper",lz=()=>G1({name:"VPopper",provide(){return{[ab]:{parentPopper:this}}},inject:{[ab]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:Qr("disabled")},positioningDisabled:{type:Boolean,default:Qr("positioningDisabled")},placement:{type:String,default:Qr("placement"),validator:e=>az.includes(e)},delay:{type:[String,Number,Object],default:Qr("delay")},distance:{type:[Number,String],default:Qr("distance")},skidding:{type:[Number,String],default:Qr("skidding")},triggers:{type:Array,default:Qr("triggers")},showTriggers:{type:[Array,Function],default:Qr("showTriggers")},hideTriggers:{type:[Array,Function],default:Qr("hideTriggers")},popperTriggers:{type:Array,default:Qr("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:Qr("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:Qr("popperHideTriggers")},container:{type:[String,Object,e4,Boolean],default:Qr("container")},boundary:{type:[String,e4],default:Qr("boundary")},strategy:{type:String,validator:e=>["absolute","fixed"].includes(e),default:Qr("strategy")},autoHide:{type:[Boolean,Function],default:Qr("autoHide")},handleResize:{type:Boolean,default:Qr("handleResize")},instantMove:{type:Boolean,default:Qr("instantMove")},eagerMount:{type:Boolean,default:Qr("eagerMount")},popperClass:{type:[String,Array,Object],default:Qr("popperClass")},computeTransformOrigin:{type:Boolean,default:Qr("computeTransformOrigin")},autoMinSize:{type:Boolean,default:Qr("autoMinSize")},autoSize:{type:[Boolean,String],default:Qr("autoSize")},autoMaxSize:{type:Boolean,default:Qr("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:Qr("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:Qr("preventOverflow")},overflowPadding:{type:[Number,String],default:Qr("overflowPadding")},arrowPadding:{type:[Number,String],default:Qr("arrowPadding")},arrowOverflow:{type:Boolean,default:Qr("arrowOverflow")},flip:{type:Boolean,default:Qr("flip")},shift:{type:Boolean,default:Qr("shift")},shiftCrossAxis:{type:Boolean,default:Qr("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:Qr("noAutoFocus")},disposeTimeout:{type:Number,default:Qr("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(e=>e.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var e;return(e=this[ab])==null?void 0:e.parentPopper},hasPopperShowTriggerHover(){var e,t;return((e=this.popperTriggers)==null?void 0:e.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(e){e?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((e,t)=>(e[t]="$_computePosition",e),{})},created(){this.autoMinSize,this.autoMaxSize},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:e=null,skipDelay:t=!1,force:r=!1}={}){var s,l;(s=this.parentPopper)!=null&&s.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(r||!this.disabled)&&(((l=this.parentPopper)==null?void 0:l.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(e,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:e=null,skipDelay:t=!1}={}){var r;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((r=this.parentPopper)==null?void 0:r.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(e,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var e;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((e=this.referenceNode)==null?void 0:e.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const e={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&e.middleware.push(pne({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?e.middleware.push(hne({alignment:this.placement.split("-")[1]??""})):e.placement=this.placement,this.preventOverflow&&(this.shift&&e.middleware.push(mne({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&e.middleware.push(dne({padding:this.overflowPadding,boundary:this.boundary}))),e.middleware.push(cne({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&e.middleware.push({name:"arrowOverflow",fn:({placement:s,rects:l,middlewareData:d})=>{let y;const{centerOffset:n}=d.arrow;return s.startsWith("top")||s.startsWith("bottom")?y=Math.abs(n)>l.reference.width/2:y=Math.abs(n)>l.reference.height/2,{data:{overflow:y}}}}),this.autoMinSize||this.autoSize){const s=this.autoSize?this.autoSize:this.autoMinSize?"min":null;e.middleware.push({name:"autoSize",fn:({rects:l,placement:d,middlewareData:y})=>{var n;if((n=y.autoSize)!=null&&n.skip)return{};let M,P;return d.startsWith("top")||d.startsWith("bottom")?M=l.reference.width:P=l.reference.height,this.$_innerNode.style[s==="min"?"minWidth":s==="max"?"maxWidth":"width"]=M!=null?`${M}px`:null,this.$_innerNode.style[s==="min"?"minHeight":s==="max"?"maxHeight":"height"]=P!=null?`${P}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,e.middleware.push(gne({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:s,availableHeight:l})=>{this.$_innerNode.style.maxWidth=s!=null?`${s}px`:null,this.$_innerNode.style.maxHeight=l!=null?`${l}px`:null}})));const r=await xne(this.$_referenceNode,this.$_popperNode,e);Object.assign(this.result,{x:r.x,y:r.y,placement:r.placement,strategy:r.strategy,arrow:{...r.middlewareData.arrow,...r.middlewareData.arrowOverflow}})},$_scheduleShow(e,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),dd&&this.instantMove&&dd.instantMove&&dd!==this.parentPopper){dd.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(e,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(dd=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(e){const t=this.delay;return parseInt(t&&t[e]||t||0)},async $_applyShow(e=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=e,!this.isShown&&(this.$_ensureTeleport(),await sb(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...My(this.$_referenceNode),...My(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),r=this.$_popperNode.querySelector(".v-popper__wrapper"),s=r.parentNode.getBoundingClientRect(),l=t.x+t.width/2-(s.left+r.offsetLeft),d=t.y+t.height/2-(s.top+r.offsetTop);this.result.transformOrigin=`${l}px ${d}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const e=this.showGroup;if(e){let t;for(let r=0;r<Fl.length;r++)t=Fl[r],t.showGroup!==e&&(t.hide(),t.$emit("close-group"))}Fl.push(this),document.body.classList.add("v-popper--some-open");for(const t of IM(this.theme))RM(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await sb(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(e=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=e,PM(Fl,this),Fl.length===0&&document.body.classList.remove("v-popper--some-open");for(const r of IM(this.theme)){const s=RM(r);PM(s,this),s.length===0&&document.body.classList.remove(`v-popper--some-open--${r}`)}dd===this&&(dd=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await sb(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let e=this.container;if(typeof e=="string"?e=window.document.querySelector(e):e===!1&&(e=this.$_targetNodes[0].parentNode),!e)throw new Error("No container for popover: "+this.container);e.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const e=r=>{this.isShown&&!this.$_hideInProgress||(r.usedByTooltip=!0,!this.$_preventShow&&this.show({event:r}))};this.$_registerTriggerListeners(this.$_targetNodes,zM,this.triggers,this.showTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],zM,this.popperTriggers,this.popperShowTriggers,e);const t=r=>{r.usedByTooltip||this.hide({event:r})};this.$_registerTriggerListeners(this.$_targetNodes,DM,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],DM,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(e,t,r){this.$_events.push({targetNodes:e,eventType:t,handler:r}),e.forEach(s=>s.addEventListener(t,r,H1?{passive:!0}:void 0))},$_registerTriggerListeners(e,t,r,s,l){let d=r;s!=null&&(d=typeof s=="function"?s(d):s),d.forEach(y=>{const n=t[y];n&&this.$_registerEventListeners(e,n,l)})},$_removeEventListeners(e){const t=[];this.$_events.forEach(r=>{const{targetNodes:s,eventType:l,handler:d}=r;!e||e===l?s.forEach(y=>y.removeEventListener(l,d)):t.push(r)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(e,t=!1){this.$_showFrameLocked||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(e,t){for(const r of this.$_targetNodes){const s=r.getAttribute(e);s&&(r.removeAttribute(e),r.setAttribute(t,s))}},$_applyAttrsToTarget(e){for(const t of this.$_targetNodes)for(const r in e){const s=e[r];s==null?t.removeAttribute(r):t.setAttribute(r,s)}},$_updateParentShownChildren(e){let t=this.parentPopper;for(;t;)e?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const e=this.$_referenceNode.getBoundingClientRect();if(dm>=e.left&&dm<=e.right&&fm>=e.top&&fm<=e.bottom){const t=this.$_popperNode.getBoundingClientRect(),r=dm-Xu,s=fm-Yu,l=t.left+t.width/2-Xu+(t.top+t.height/2)-Yu+t.width+t.height,d=Xu+r*l,y=Yu+s*l;return s2(Xu,Yu,d,y,t.left,t.top,t.left,t.bottom)||s2(Xu,Yu,d,y,t.left,t.top,t.right,t.top)||s2(Xu,Yu,d,y,t.right,t.top,t.right,t.bottom)||s2(Xu,Yu,d,y,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(sz){const e=H1?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>LM(t),e),document.addEventListener("touchend",t=>OM(t,!0),e)}else window.addEventListener("mousedown",e=>LM(e),!0),window.addEventListener("click",e=>OM(e,!1),!0);window.addEventListener("resize",Mne)}function LM(e,t){for(let r=0;r<Fl.length;r++){const s=Fl[r];try{s.mouseDownContains=s.popperNode().contains(e.target)}catch{}}}function OM(e,t){wne(e,t)}function wne(e,t){const r={};for(let s=Fl.length-1;s>=0;s--){const l=Fl[s];try{const d=l.containsGlobalTarget=l.mouseDownContains||l.popperNode().contains(e.target);l.pendingHide=!1,requestAnimationFrame(()=>{if(l.pendingHide=!1,!r[l.randomId]&&BM(l,d,e)){if(l.$_handleGlobalClose(e,t),!e.closeAllPopover&&e.closePopover&&d){let n=l.parentPopper;for(;n;)r[n.randomId]=!0,n=n.parentPopper;return}let y=l.parentPopper;for(;y&&BM(y,y.containsGlobalTarget,e);)y.$_handleGlobalClose(e,t),y=y.parentPopper}})}catch{}}}function BM(e,t,r){return r.closeAllPopover||r.closePopover&&t||Sne(e,r)&&!t}function Sne(e,t){if(typeof e.autoHide=="function"){const r=e.autoHide(t);return e.lastAutoHide=r,r}return e.autoHide}function Mne(){for(let e=0;e<Fl.length;e++)Fl[e].$_computePosition()}let Xu=0,Yu=0,dm=0,fm=0;typeof window<"u"&&window.addEventListener("mousemove",e=>{Xu=dm,Yu=fm,dm=e.clientX,fm=e.clientY},H1?{passive:!0}:void 0);function s2(e,t,r,s,l,d,y,n){const M=((y-l)*(t-d)-(n-d)*(e-l))/((n-d)*(r-e)-(y-l)*(s-t)),P=((r-e)*(t-d)-(s-t)*(e-l))/((n-d)*(r-e)-(y-l)*(s-t));return M>=0&&M<=1&&P>=0&&P<=1}const Ene={extends:lz()},gv=(e,t)=>{const r=e.__vccOpts||e;for(const[s,l]of t)r[s]=l;return r};function Tne(e,t,r,s,l,d){return xc(),E1("div",{ref:"reference",class:n4(["v-popper",{"v-popper--shown":e.slotData.isShown}])},[P2(e.$slots,"default",pk(mk(e.slotData)))],2)}const Cne=gv(Ene,[["render",Tne]]);function Ane(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var r=e.indexOf("Trident/");if(r>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var l=e.indexOf("Edge/");return l>0?parseInt(e.substring(l+5,e.indexOf(".",l)),10):-1}let D2;function t4(){t4.init||(t4.init=!0,D2=Ane()!==-1)}var _v={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){t4(),Ao(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",D2&&this.$el.appendChild(e),e.data="about:blank",D2||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!D2&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Ine=hk();ck("data-v-b329ee4c");const zne={class:"resize-observer",tabindex:"-1"};uk();const Dne=Ine((e,t,r,s,l,d)=>(xc(),Ay("div",zne)));_v.render=Dne;_v.__scopeId="data-v-b329ee4c";_v.__file="src/components/ResizeObserver.vue";const cz=(e="theme")=>({computed:{themeClass(){return bne(this[e])}}}),Pne=G1({name:"VPopperContent",components:{ResizeObserver:_v},mixins:[cz()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(e){return e!=null&&!isNaN(e)?`${e}px`:null}}}),kne=["id","aria-hidden","tabindex","data-popper-placement"],Rne={ref:"inner",class:"v-popper__inner"},Lne=Ku("div",{class:"v-popper__arrow-outer"},null,-1),One=Ku("div",{class:"v-popper__arrow-inner"},null,-1),Bne=[Lne,One];function Fne(e,t,r,s,l,d){const y=mm("ResizeObserver");return xc(),E1("div",{id:e.popperId,ref:"popover",class:n4(["v-popper__popper",[e.themeClass,e.classes.popperClass,{"v-popper__popper--shown":e.shown,"v-popper__popper--hidden":!e.shown,"v-popper__popper--show-from":e.classes.showFrom,"v-popper__popper--show-to":e.classes.showTo,"v-popper__popper--hide-from":e.classes.hideFrom,"v-popper__popper--hide-to":e.classes.hideTo,"v-popper__popper--skip-transition":e.skipTransition,"v-popper__popper--arrow-overflow":e.result&&e.result.arrow.overflow,"v-popper__popper--no-positioning":!e.result}]]),style:a2(e.result?{position:e.result.strategy,transform:`translate3d(${Math.round(e.result.x)}px,${Math.round(e.result.y)}px,0)`}:void 0),"aria-hidden":e.shown?"false":"true",tabindex:e.autoHide?0:void 0,"data-popper-placement":e.result?e.result.placement:void 0,onKeyup:t[2]||(t[2]=fk(n=>e.autoHide&&e.$emit("hide"),["esc"]))},[Ku("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=n=>e.autoHide&&e.$emit("hide"))}),Ku("div",{class:"v-popper__wrapper",style:a2(e.result?{transformOrigin:e.result.transformOrigin}:void 0)},[Ku("div",Rne,[e.mounted?(xc(),E1(dk,{key:0},[Ku("div",null,[P2(e.$slots,"default")]),e.handleResize?(xc(),Ay(y,{key:0,onNotify:t[1]||(t[1]=n=>e.$emit("resize",n))})):p9("",!0)],64)):p9("",!0)],512),Ku("div",{ref:"arrow",class:"v-popper__arrow-container",style:a2(e.result?{left:e.toPx(e.result.arrow.x),top:e.toPx(e.result.arrow.y)}:void 0)},Bne,4)],4)],46,kne)}const uz=gv(Pne,[["render",Fne]]),hz={methods:{show(...e){return this.$refs.popper.show(...e)},hide(...e){return this.$refs.popper.hide(...e)},dispose(...e){return this.$refs.popper.dispose(...e)},onResize(...e){return this.$refs.popper.onResize(...e)}}};let i4=function(){};typeof window<"u"&&(i4=window.Element);const Nne=G1({name:"VPopperWrapper",components:{Popper:Cne,PopperContent:uz},mixins:[hz,cz("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,i4,Boolean],default:void 0},boundary:{type:[String,i4],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(e=>e!==this.$refs.popperContent.$el)}}});function $ne(e,t,r,s,l,d){const y=mm("PopperContent"),n=mm("Popper");return xc(),Ay(n,ZM({ref:"popper"},e.$props,{theme:e.finalTheme,"target-nodes":e.getTargetNodes,"popper-node":()=>e.$refs.popperContent.$el,class:[e.themeClass],onShow:t[0]||(t[0]=()=>e.$emit("show")),onHide:t[1]||(t[1]=()=>e.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=M=>e.$emit("update:shown",M)),onApplyShow:t[3]||(t[3]=()=>e.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>e.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>e.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>e.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>e.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>e.$emit("resize"))}),{default:k2(({popperId:M,isShown:P,shouldMountContent:L,skipTransition:V,autoHide:X,show:J,hide:Z,handleResize:ie,onResize:ae,classes:de,result:fe})=>[P2(e.$slots,"default",{shown:P,show:J,hide:Z}),WM(y,{ref:"popperContent","popper-id":M,theme:e.finalTheme,shown:P,mounted:L,"skip-transition":V,"auto-hide":X,"handle-resize":ie,classes:de,result:fe,onHide:Z,onResize:ae},{default:k2(()=>[P2(e.$slots,"popper",{shown:P,hide:Z})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const X6=gv(Nne,[["render",$ne]]),jne={...X6,name:"VDropdown",vPopperTheme:"dropdown"},Une={...X6,name:"VMenu",vPopperTheme:"menu"},Vne={...X6,name:"VTooltip",vPopperTheme:"tooltip"},qne=G1({name:"VTooltipDirective",components:{Popper:lz(),PopperContent:uz},mixins:[hz],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:e=>Lm(e.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:e=>Lm(e.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(e){if(typeof this.content=="function"&&this.$_isShown&&(e||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,r=this.content(this);r.then?r.then(s=>this.onResult(t,s)):this.onResult(t,r)}},onResult(e,t){e===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),Hne=["innerHTML"],Gne=["textContent"];function Wne(e,t,r,s,l,d){const y=mm("PopperContent"),n=mm("Popper");return xc(),Ay(n,ZM({ref:"popper"},e.$attrs,{theme:e.theme,"target-nodes":e.targetNodes,"popper-node":()=>e.$refs.popperContent.$el,onApplyShow:e.onShow,onApplyHide:e.onHide}),{default:k2(({popperId:M,isShown:P,shouldMountContent:L,skipTransition:V,autoHide:X,hide:J,handleResize:Z,onResize:ie,classes:ae,result:de})=>[WM(y,{ref:"popperContent",class:n4({"v-popper--tooltip-loading":e.loading}),"popper-id":M,theme:e.theme,shown:P,mounted:L,"skip-transition":V,"auto-hide":X,"handle-resize":Z,classes:ae,result:de,onHide:J,onResize:ie},{default:k2(()=>[e.html?(xc(),E1("div",{key:0,innerHTML:e.finalContent},null,8,Hne)):(xc(),E1("div",{key:1,textContent:gk(e.finalContent)},null,8,Gne))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const Zne=gv(qne,[["render",Wne]]),dz="v-popper--has-tooltip";function Xne(e,t){let r=e.placement;if(!r&&t)for(const s of az)t[s]&&(r=s);return r||(r=Lm(e.theme||"tooltip","placement")),r}function fz(e,t,r){let s;const l=typeof t;return l==="string"?s={content:t}:t&&l==="object"?s=t:s={content:!1},s.placement=Xne(s,r),s.targetNodes=()=>[e],s.referenceNode=()=>e,s}let lb,Om,Yne=0;function Jne(){if(lb)return;Om=oi([]),lb=VM({name:"VTooltipDirectiveApp",setup(){return{directives:Om}},render(){return this.directives.map(t=>tt(Zne,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const e=document.createElement("div");document.body.appendChild(e),lb.mount(e)}function Kne(e,t,r){Jne();const s=oi(fz(e,t,r)),l=oi(!1),d={id:Yne++,options:s,shown:l};return Om.value.push(d),e.classList&&e.classList.add(dz),e.$_popper={options:s,item:d,show(){l.value=!0},hide(){l.value=!1}}}function pz(e){if(e.$_popper){const t=Om.value.indexOf(e.$_popper.item);t!==-1&&Om.value.splice(t,1),delete e.$_popper,delete e.$_popperOldShown,delete e.$_popperMountTarget}e.classList&&e.classList.remove(dz)}function FM(e,{value:t,modifiers:r}){const s=fz(e,t,r);if(!s.content||Lm(s.theme||"tooltip","disabled"))pz(e);else{let l;e.$_popper?(l=e.$_popper,l.options.value=s):l=Kne(e,t,r),typeof t.shown<"u"&&t.shown!==e.$_popperOldShown&&(e.$_popperOldShown=t.shown,t.shown?l.show():l.hide())}}const Qne={beforeMount:FM,updated:FM,beforeUnmount(e){pz(e)}};function NM(e){e.addEventListener("mousedown",Ey),e.addEventListener("click",Ey),e.addEventListener("touchstart",mz,H1?{passive:!0}:!1)}function $M(e){e.removeEventListener("mousedown",Ey),e.removeEventListener("click",Ey),e.removeEventListener("touchstart",mz),e.removeEventListener("touchend",gz),e.removeEventListener("touchcancel",_z)}function Ey(e){const t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function mz(e){if(e.changedTouches.length===1){const t=e.currentTarget;t.$_vclosepopover_touch=!0;const r=e.changedTouches[0];t.$_vclosepopover_touchPoint=r,t.addEventListener("touchend",gz),t.addEventListener("touchcancel",_z)}}function gz(e){const t=e.currentTarget;if(t.$_vclosepopover_touch=!1,e.changedTouches.length===1){const r=e.changedTouches[0],s=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(r.screenY-s.screenY)<20&&Math.abs(r.screenX-s.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function _z(e){const t=e.currentTarget;t.$_vclosepopover_touch=!1}const eoe={beforeMount(e,{value:t,modifiers:r}){e.$_closePopoverModifiers=r,(typeof t>"u"||t)&&NM(e)},updated(e,{value:t,oldValue:r,modifiers:s}){e.$_closePopoverModifiers=s,t!==r&&(typeof t>"u"||t?NM(e):$M(e))},beforeUnmount(e){$M(e)}},pse=Qne,mse=eoe,gse=jne,_se=Une,yse=Vne,jM={threshold:0,root:null,rootMargin:"0px"};function UM(e,t,r){let s,l,d;typeof r=="function"?(s=r,l=jM,d=t.cfg===void 0):(s=r.handler,l=Object.assign({},jM,r.cfg),d=t.cfg===void 0||l2(t.cfg,l)===!1),t.handler!==s&&(t.handler=s),d===!0&&(t.cfg=l,t.observer!==void 0&&t.observer.unobserve(e),t.observer=new IntersectionObserver(([y])=>{if(typeof t.handler=="function"){if(y.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(y,t.observer)===!1||t.once===!0&&y.isIntersecting===!0)&&yz(e)}},l),t.observer.observe(e))}function yz(e){const t=e.__qvisible;t!==void 0&&(t.observer!==void 0&&t.observer.unobserve(e),delete e.__qvisible)}const toe=Bm({name:"intersection",mounted(e,{modifiers:t,value:r}){const s={once:t.once===!0};UM(e,s,r),e.__qvisible=s},updated(e,t){const r=e.__qvisible;r!==void 0&&UM(e,r,t.value)},beforeUnmount:yz}),vse=lr({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:r}){const s=oi(Aa.value===!0?e.ssrPrerender:!1),l=Ve(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:M,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:M),d=Ve(()=>e.disable!==!0&&(Aa.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),y=Ve(()=>[[toe,l.value,void 0,{once:e.once}]]),n=Ve(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function M(L){s.value!==L.isIntersecting&&(s.value=L.isIntersecting,e.onVisibility!==void 0&&r("visibility",s.value))}function P(){if(s.value===!0)return[tt("div",{key:"content",style:n.value},ln(t.default))];if(t.hidden!==void 0)return[tt("div",{key:"hidden",style:n.value},t.hidden())]}return()=>{const L=e.transition?[tt(Ul,{name:"q-transition--"+e.transition},P)]:P();return _m(e.tag,{class:"q-intersection"},L,"main",d.value,()=>y.value)}}});let ioe=0;const roe=["click","keydown"],noe={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ioe++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ooe(e,t,r,s){const l=eu(rE,jo);if(l===jo)return jo;const{proxy:d}=_r(),y=oi(null),n=oi(null),M=oi(null),P=Ve(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),L=Ve(()=>l.currentModel.value===e.name),V=Ve(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(L.value===!0?" q-tab--active"+(l.tabProps.value.activeClass?" "+l.tabProps.value.activeClass:"")+(l.tabProps.value.activeColor?` text-${l.tabProps.value.activeColor}`:"")+(l.tabProps.value.activeBgColor?` bg-${l.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&l.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||l.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),X=Ve(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(l.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),J=Ve(()=>e.disable===!0||l.hasFocus.value===!0||L.value===!1&&l.hasActiveTab.value===!0?-1:e.tabindex||0);function Z(le,he){if(he!==!0&&y.value!==null&&y.value.focus(),e.disable!==!0){l.updateModel({name:e.name}),r("click",le);return}}function ie(le){tu(le,[13,32])?Z(le,!0):s4(le)!==!0&&le.keyCode>=35&&le.keyCode<=40&&le.altKey!==!0&&le.metaKey!==!0&&l.onKbdNavigate(le.keyCode,d.$el)===!0&&Cn(le),r("keydown",le)}function ae(){const le=l.tabProps.value.narrowIndicator,he=[],Ce=tt("div",{ref:M,class:["q-tab__indicator",l.tabProps.value.indicatorClass]});e.icon!==void 0&&he.push(tt(Io,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&he.push(tt("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&he.push(e.alertIcon!==void 0?tt(Io,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):tt("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),le===!0&&he.push(Ce);const Le=[tt("div",{class:"q-focus-helper",tabindex:-1,ref:y}),tt("div",{class:X.value},_c(t.default,he))];return le===!1&&Le.push(Ce),Le}const de={name:Ve(()=>e.name),rootRef:n,tabIndicatorRef:M,routeData:s};Xn(()=>{l.unregisterTab(de)}),ys(()=>{l.registerTab(de)});function fe(le,he){const Ce={ref:n,class:V.value,tabindex:J.value,role:"tab","aria-selected":L.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:Z,onKeydown:ie,...he};return Dd(tt(le,Ce,ae()),[[a6,P.value]])}return{renderTab:fe,$tabs:l}}const xse=lr({name:"QTab",props:noe,emits:roe,setup(e,{slots:t,emit:r}){const{renderTab:s}=ooe(e,t,r);return()=>s("div")}});let vz=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,vz=e.scrollLeft>=0,e.remove()}function soe(e,t,r){const s=r===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?s[0]:s[1]}${e?` text-${e}`:""}`}const aoe=["left","center","right","justify"],bse=lr({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>aoe.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:r}){const{proxy:s}=_r(),{$q:l}=s,{registerTick:d}=p1(),{registerTick:y}=p1(),{registerTick:n}=p1(),{registerTimeout:M,removeTimeout:P}=iu(),{registerTimeout:L,removeTimeout:V}=iu(),X=oi(null),J=oi(null),Z=oi(e.modelValue),ie=oi(!1),ae=oi(!0),de=oi(!1),fe=oi(!1),le=[],he=oi(0),Ce=oi(!1);let Le=null,Ae=null,We;const Qe=Ve(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:soe(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),ze=Ve(()=>{const hi=he.value,Rt=Z.value;for(let Ot=0;Ot<hi;Ot++)if(le[Ot].name.value===Rt)return!0;return!1}),Ze=Ve(()=>`q-tabs__content--align-${ie.value===!0?"left":fe.value===!0?"justify":e.align}`),Ue=Ve(()=>`q-tabs row no-wrap items-center q-tabs--${ie.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),vt=Ve(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Ze.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),Be=Ve(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Ke=Ve(()=>e.vertical!==!0&&l.lang.rtl===!0),xt=Ve(()=>vz===!1&&Ke.value===!0);Fi(Ke,Qt),Fi(()=>e.modelValue,hi=>{yt({name:hi,setCurrent:!0,skipEmit:!0})}),Fi(()=>e.outsideArrows,Dt);function yt({name:hi,setCurrent:Rt,skipEmit:Ot}){Z.value!==hi&&(Ot!==!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",hi),(Rt===!0||e["onUpdate:modelValue"]===void 0)&&(bi(Z.value,hi),Z.value=hi))}function Dt(){d(()=>{bt({width:X.value.offsetWidth,height:X.value.offsetHeight})})}function bt(hi){if(Be.value===void 0||J.value===null)return;const Rt=hi[Be.value.container],Ot=Math.min(J.value[Be.value.scroll],Array.prototype.reduce.call(J.value.children,(hr,Mr)=>hr+(Mr[Be.value.content]||0),0)),sr=Rt>0&&Ot>Rt;ie.value=sr,sr===!0&&y(Qt),fe.value=Rt<parseInt(e.breakpoint,10)}function bi(hi,Rt){const Ot=hi!=null&&hi!==""?le.find(hr=>hr.name.value===hi):null,sr=Rt!=null&&Rt!==""?le.find(hr=>hr.name.value===Rt):null;if(Do===!0)Do=!1;else if(Ot&&sr){const hr=Ot.tabIndicatorRef.value,Mr=sr.tabIndicatorRef.value;Le!==null&&(clearTimeout(Le),Le=null),hr.style.transition="none",hr.style.transform="none",Mr.style.transition="none",Mr.style.transform="none";const Gi=hr.getBoundingClientRect(),Vr=Mr.getBoundingClientRect();Mr.style.transform=e.vertical===!0?`translate3d(0,${Gi.top-Vr.top}px,0) scale3d(1,${Vr.height?Gi.height/Vr.height:1},1)`:`translate3d(${Gi.left-Vr.left}px,0,0) scale3d(${Vr.width?Gi.width/Vr.width:1},1,1)`,n(()=>{Le=setTimeout(()=>{Le=null,Mr.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Mr.style.transform="none"},70)})}sr&&ie.value===!0&&ji(sr.rootRef.value)}function ji(hi){const{left:Rt,width:Ot,top:sr,height:hr}=J.value.getBoundingClientRect(),Mr=hi.getBoundingClientRect();let Gi=e.vertical===!0?Mr.top-sr:Mr.left-Rt;if(Gi<0){J.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Gi),Qt();return}Gi+=e.vertical===!0?Mr.height-hr:Mr.width-Ot,Gi>0&&(J.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Gi),Qt())}function Qt(){const hi=J.value;if(hi===null)return;const Rt=hi.getBoundingClientRect(),Ot=e.vertical===!0?hi.scrollTop:Math.abs(hi.scrollLeft);Ke.value===!0?(ae.value=Math.ceil(Ot+Rt.width)<hi.scrollWidth-1,de.value=Ot>0):(ae.value=Ot>0,de.value=e.vertical===!0?Math.ceil(Ot+Rt.height)<hi.scrollHeight:Math.ceil(Ot+Rt.width)<hi.scrollWidth)}function Nt(hi){Ae!==null&&clearInterval(Ae),Ae=setInterval(()=>{Di(hi)===!0&&ci()},5)}function Sr(){Nt(xt.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ui(){Nt(xt.value===!0?0:Number.MAX_SAFE_INTEGER)}function ci(){Ae!==null&&(clearInterval(Ae),Ae=null)}function ur(hi,Rt){const Ot=Array.prototype.filter.call(J.value.children,Vr=>Vr===Rt||Vr.matches&&Vr.matches(".q-tab.q-focusable")===!0),sr=Ot.length;if(sr===0)return;if(hi===36)return ji(Ot[0]),Ot[0].focus(),!0;if(hi===35)return ji(Ot[sr-1]),Ot[sr-1].focus(),!0;const hr=hi===(e.vertical===!0?38:37),Mr=hi===(e.vertical===!0?40:39),Gi=hr===!0?-1:Mr===!0?1:void 0;if(Gi!==void 0){const Vr=Ke.value===!0?-1:1,Vn=Ot.indexOf(Rt)+Gi*Vr;return Vn>=0&&Vn<sr&&(ji(Ot[Vn]),Ot[Vn].focus({preventScroll:!0})),!0}}const cn=Ve(()=>xt.value===!0?{get:hi=>Math.abs(hi.scrollLeft),set:(hi,Rt)=>{hi.scrollLeft=-Rt}}:e.vertical===!0?{get:hi=>hi.scrollTop,set:(hi,Rt)=>{hi.scrollTop=Rt}}:{get:hi=>hi.scrollLeft,set:(hi,Rt)=>{hi.scrollLeft=Rt}});function Di(hi){const Rt=J.value,{get:Ot,set:sr}=cn.value;let hr=!1,Mr=Ot(Rt);const Gi=hi<Mr?-1:1;return Mr+=Gi*5,Mr<0?(hr=!0,Mr=0):(Gi===-1&&Mr<=hi||Gi===1&&Mr>=hi)&&(hr=!0,Mr=hi),sr(Rt,Mr),Qt(),hr}function Te(hi,Rt){for(const Ot in hi)if(hi[Ot]!==Rt[Ot])return!1;return!0}function On(){let hi=null,Rt={matchedLen:0,queryDiff:9999,hrefLen:0};const Ot=le.filter(Gi=>Gi.routeData!==void 0&&Gi.routeData.hasRouterLink.value===!0),{hash:sr,query:hr}=s.$route,Mr=Object.keys(hr).length;for(const Gi of Ot){const Vr=Gi.routeData.exact.value===!0;if(Gi.routeData[Vr===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Vn,query:ts,matched:bs,href:Po}=Gi.routeData.resolvedLink.value,ws=Object.keys(ts).length;if(Vr===!0){if(Vn!==sr||ws!==Mr||Te(hr,ts)===!1)continue;hi=Gi.name.value;break}if(Vn!==""&&Vn!==sr||ws!==0&&Te(ts,hr)===!1)continue;const vo={matchedLen:bs.length,queryDiff:Mr-ws,hrefLen:Po.length-Vn.length};if(vo.matchedLen>Rt.matchedLen){hi=Gi.name.value,Rt=vo;continue}else if(vo.matchedLen!==Rt.matchedLen)continue;if(vo.queryDiff<Rt.queryDiff)hi=Gi.name.value,Rt=vo;else if(vo.queryDiff!==Rt.queryDiff)continue;vo.hrefLen>Rt.hrefLen&&(hi=Gi.name.value,Rt=vo)}if(hi===null&&le.some(Gi=>Gi.routeData===void 0&&Gi.name.value===Z.value)===!0){Do=!1;return}yt({name:hi,setCurrent:!0})}function Bn(hi){if(P(),Ce.value!==!0&&X.value!==null&&hi.target&&typeof hi.target.closest=="function"){const Rt=hi.target.closest(".q-tab");Rt&&X.value.contains(Rt)===!0&&(Ce.value=!0,ie.value===!0&&ji(Rt))}}function En(){M(()=>{Ce.value=!1},30)}function Pt(){Oi.avoidRouteWatcher===!1?L(On):V()}function Jn(){if(We===void 0){const hi=Fi(()=>s.$route.fullPath,Pt);We=()=>{hi(),We=void 0}}}function Xi(hi){le.push(hi),he.value++,Dt(),hi.routeData===void 0||s.$route===void 0?L(()=>{if(ie.value===!0){const Rt=Z.value,Ot=Rt!=null&&Rt!==""?le.find(sr=>sr.name.value===Rt):null;Ot&&ji(Ot.rootRef.value)}}):(Jn(),hi.routeData.hasRouterLink.value===!0&&Pt())}function lo(hi){le.splice(le.indexOf(hi),1),he.value--,Dt(),We!==void 0&&hi.routeData!==void 0&&(le.every(Rt=>Rt.routeData===void 0)===!0&&We(),Pt())}const Oi={currentModel:Z,tabProps:Qe,hasFocus:Ce,hasActiveTab:ze,registerTab:Xi,unregisterTab:lo,verifyRouteModel:Pt,updateModel:yt,onKbdNavigate:ur,avoidRouteWatcher:!1};Cy(rE,Oi);function un(){Le!==null&&clearTimeout(Le),ci(),We!==void 0&&We()}let Xr,Do;return Xn(un),W1(()=>{Xr=We!==void 0,un()}),Ty(()=>{Xr===!0&&(Jn(),Do=!0,Pt()),Dt()}),()=>tt("div",{ref:X,class:Ue.value,role:"tablist",onFocusin:Bn,onFocusout:En},[tt(vm,{onResize:bt}),tt("div",{ref:J,class:vt.value,onScroll:Qt},ln(t.default)),tt(Io,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(ae.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||l.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Sr,onTouchstartPassive:Sr,onMouseupPassive:ci,onMouseleavePassive:ci,onTouchendPassive:ci}),tt(Io,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(de.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||l.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Ui,onTouchstartPassive:Ui,onMouseupPassive:ci,onMouseleavePassive:ci,onTouchendPassive:ci})])}}),wse=lr({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:r}){const s=_r(),l=oi(null);let d=0;const y=[];function n(J){const Z=typeof J=="boolean"?J:e.noErrorFocus!==!0,ie=++d,ae=(le,he)=>{r(`validation${le===!0?"Success":"Error"}`,he)},de=le=>{const he=le.validate();return typeof he.then=="function"?he.then(Ce=>({valid:Ce,comp:le}),Ce=>({valid:!1,comp:le,err:Ce})):Promise.resolve({valid:he,comp:le})};return(e.greedy===!0?Promise.all(y.map(de)).then(le=>le.filter(he=>he.valid!==!0)):y.reduce((le,he)=>le.then(()=>de(he).then(Ce=>{if(Ce.valid===!1)return Promise.reject(Ce)})),Promise.resolve()).catch(le=>[le])).then(le=>{if(le===void 0||le.length===0)return ie===d&&ae(!0),!0;if(ie===d){const{comp:he,err:Ce}=le[0];if(ae(!1,he),Z===!0){const Le=le.find(({comp:Ae})=>typeof Ae.focus=="function"&&f1(Ae.$)===!1);Le!==void 0&&Le.comp.focus()}}return!1})}function M(){d++,y.forEach(J=>{typeof J.resetValidation=="function"&&J.resetValidation()})}function P(J){J!==void 0&&Cn(J);const Z=d+1;n().then(ie=>{Z===d&&ie===!0&&(e.onSubmit!==void 0?r("submit",J):J!==void 0&&J.target!==void 0&&typeof J.target.submit=="function"&&J.target.submit())})}function L(J){J!==void 0&&Cn(J),r("reset"),Ao(()=>{M(),e.autofocus===!0&&e.noResetFocus!==!0&&V()})}function V(){Jm(()=>{if(l.value===null)return;const J=l.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),Z=>Z.tabIndex!==-1);J?.focus({preventScroll:!0})})}Cy(iE,{bindComponent(J){y.push(J)},unbindComponent(J){const Z=y.indexOf(J);Z!==-1&&y.splice(Z,1)}});let X=!1;return W1(()=>{X=!0}),Ty(()=>{X===!0&&e.autofocus===!0&&V()}),ys(()=>{e.autofocus===!0&&V()}),Object.assign(s.proxy,{validate:n,resetValidation:M,submit:P,reset:L,focus:V,getValidationComponents:()=>y}),()=>tt("form",{class:"q-form",ref:l,onSubmit:P,onReset:L},ln(t.default))}});export{AZ as $,y1 as A,hoe as B,goe as C,Toe as D,mse as E,nA as F,Doe as G,_oe as H,pq as I,Lx as J,Goe as K,XC as L,Tq as M,Coe as N,Qoe as O,ps as P,coe as Q,foe as R,wk as S,tse as T,Boe as U,poe as V,doe as W,uoe as X,q2 as Y,ese as Z,ise as _,Vl as a,rse as a0,a6 as a1,tS as a2,rl as a3,VV as a4,jV as a5,Poe as a6,wV as a7,sse as a8,Io as a9,Roe as aA,Loe as aB,wse as aC,wie as aD,vse as aE,bse as aF,xse as aG,lse as aa,ase as ab,xoe as ac,koe as ad,Woe as ae,cse as af,zoe as ag,xie as ah,dse as ai,Sie as aj,bie as ak,pM as al,Iie as am,$0 as an,SV as ao,FT as ap,nse as aq,ose as ar,HV as as,fse as at,lv as au,Xoe as av,To as aw,Yoe as ax,Joe as ay,Sq as az,Uoe as b,Noe as c,moe as d,voe as e,Moe as f,woe as g,Soe as h,yoe as i,hc as j,Ooe as k,Eoe as l,Foe as m,boe as n,gse as o,_se as p,yse as q,$oe as r,joe as s,Zr as t,Z_ as u,pse as v,Aoe as w,Ioe as x,Hoe as y,Koe as z};
