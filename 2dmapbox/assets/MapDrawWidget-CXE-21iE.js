import{$ as C,a0 as x,A as u,G as M,I as d,a1 as m}from"./vendor-qEPl7M71.js";import{B as f}from"./xframelib-exp-CBRV2soX.js";import{M as E}from"./MapDrawTool-Cb72cPis.js";import{d as P,a as R,o as F,C as S,M as _,N as k,e as a,_ as l,F as L,L as p,D as w,S as c,a7 as D}from"./@vue-exp-Cbz_CXqa.js";import{_ as N}from"./index-8yyKnfk0.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-U1sBIDGE.js";const Q=P({__name:"MapDrawWidget",setup(B,{expose:e}){e();let t;function o(r){switch(s.value&&(s.value=!1),r){case 0:t.DrawPoint();break;case 1:t.DrawLine();break;case 2:t.DrawPolygon();break;case 3:t.DrawRectangle();break}}function v(){t?.RemoveCurrentDraw()}const s=R(!1);function n(r){var i=document.getElementById("clickMenuPopup");i&&(i.style.top=r.point.y+"px",i.style.left=r.point.x+"px"),s.value=!s.value}function b(){if(t){const i=t.GetDrawResult();if(i&&i.features&&i.features.length){const y=JSON.stringify(i);var r=document.createElement("a");r.href=URL.createObjectURL(new Blob([y],{type:"application/json"})),r.download="draw.geojson",r.click()}}}F(()=>{f.map&&(t=new E(f.map),t.AddDrawControl({displayControlsDefault:!1,controls:{point:!0,line_string:!0,rectangle:!0,polygon:!0,trash:!0}}),f.map.on("contextmenu",n))}),S(()=>{t&&(t.RemoveDrawControl(),f.map.off("contextmenu",n))});const g={get mapdraw(){return t},set mapdraw(r){t=r},BeginDraw:o,DeleteSelectDraw:v,visible:s,RightClickMenu:n,DownloadDrawData:b};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),j={class:"contentPanel"},I={style:{width:"150px"}};function $(B,e,t,o,v,s){return p(),_(L,null,[k("div",j,[a(C,{push:""},{default:l(()=>[a(u,{color:"primary",push:"",label:"点",icon:"mdi-map-marker ",onClick:e[0]||(e[0]=n=>o.BeginDraw(0))}),a(u,{color:"primary",push:"",label:"线",icon:"timeline",onClick:e[1]||(e[1]=n=>o.BeginDraw(1))}),a(u,{color:"primary",push:"",label:"面",icon:"mdi-vector-polygon",onClick:e[2]||(e[2]=n=>o.BeginDraw(2))}),a(u,{color:"primary",push:"",label:"矩形",icon:"mdi-vector-rectangle",onClick:e[3]||(e[3]=n=>o.BeginDraw(3))}),a(u,{color:"primary",push:"",label:"删除",icon:"close",onClick:e[4]||(e[4]=n=>o.DeleteSelectDraw())}),a(u,{color:"primary",push:"",label:"下载",icon:"close",onClick:e[5]||(e[5]=n=>o.DownloadDrawData())})]),_:1})]),a(x,{"model-value":o.visible,target:"#clickMenuPopup","transition-show":"flip-up","transition-hide":"flip-down",onHide:e[10]||(e[10]=n=>o.visible=!1)},{default:l(()=>[k("div",I,[a(M,{bordered:"",separator:""},{default:l(()=>[w((p(),c(d,{clickable:"",onClick:e[6]||(e[6]=n=>o.BeginDraw(0))},{default:l(()=>e[11]||(e[11]=[D(" 点 ")])),_:1})),[[m]]),w((p(),c(d,{clickable:"",onClick:e[7]||(e[7]=n=>o.BeginDraw(1))},{default:l(()=>e[12]||(e[12]=[D(" 线 ")])),_:1})),[[m]]),w((p(),c(d,{clickable:"",onClick:e[8]||(e[8]=n=>o.BeginDraw(2))},{default:l(()=>e[13]||(e[13]=[D(" 面 ")])),_:1})),[[m]]),w((p(),c(d,{clickable:"",onClick:e[9]||(e[9]=n=>o.BeginDraw(3))},{default:l(()=>e[14]||(e[14]=[D(" 矩形 ")])),_:1})),[[m]])]),_:1})])]),_:1},8,["model-value"])],64)}const q=N(Q,[["render",$],["__scopeId","data-v-a3cee521"],["__file","MapDrawWidget.vue"]]);export{q as default};
