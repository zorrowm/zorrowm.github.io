import{au as h,$ as S,a8 as x,A as f}from"./vendor-qEPl7M71.js";import{B as o}from"./xframelib-exp-CBRV2soX.js";import{d as v,a as k,o as w,C as B,i as C,M,e as l,_ as L,S as U,X as b,L as g}from"./@vue-exp-Cbz_CXqa.js";import{_ as P}from"./index-XTFg7KW3.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-U1sBIDGE.js";const $=v({__name:"MapLinkShareWidget",setup(_,{expose:r}){r();let e;const t=k(""),n=C("$AppURL");async function m(){const a=await s(!1),i=document.getElementById("qrcode");i&&(i.innerHTML="");var p={errorCorrectionLevel:"H",type:"image/jpeg",quality:.3};h.toDataURL(a,p,(c,d)=>{if(c){o.Message.err(`构建二维码出现异常:${c}`);return}t.value=d})}async function s(a=!0){if(!e){o.Message.info("当前地图未加载");return}const i=e.getStyle(),p=e.getCenter(),c=e.getZoom(),y=n+`#/product/apiexamples?wid=SharePageWidget&style=${JSON.stringify({center:p,zoom:c,style:i})}`;if(a)await navigator.clipboard.writeText(y),o.Message.success("内容已复制到剪贴板");else return n+"#/product/apiexamples?wid=SharePageWidget&style={key})}"}w(()=>{o.map&&(e=o.map)}),B(()=>{});const u={get map(){return e},set map(a){e=a},imgUrl:t,currentUrl:n,GetShareQrcode:m,GetStyleParam:s};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),G={class:"contentPanel"};function Q(_,r,e,t,n,m){return g(),M("div",G,[l(S,{push:""},{default:L(()=>[l(f,{color:"primary",push:"",label:"获取地址",icon:"mdi-share-variant",onClick:r[0]||(r[0]=s=>t.GetStyleParam())}),l(f,{color:"primary",push:"",label:"获取二维码",icon:"mdi-qrcode",onClick:r[1]||(r[1]=s=>t.GetShareQrcode())})]),_:1}),t.imgUrl?(g(),U(x,{key:0,src:t.imgUrl,"spinner-color":"white",style:{height:"150px","max-width":"150px"}},null,8,["src"])):b("",!0)])}const H=P($,[["render",Q],["__scopeId","data-v-0a41068e"],["__file","MapLinkShareWidget.vue"]]);export{H as default};
