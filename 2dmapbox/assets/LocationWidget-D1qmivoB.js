import{O as j,a3 as z,a4 as G,a5 as u,A as D}from"./vendor-qEPl7M71.js";import{B as k,f as c,n as q}from"./xframelib-exp-CBRV2soX.js";import{d as N,_ as H}from"./index-XTFg7KW3.js";import{W as Q}from"./WidgetsEvent-e0lOKT5_.js";import{d as X,a as x,o as Z,C as O,S as R,_ as m,L as g,N as t,M,a6 as J,e as d,F as w,X as K}from"./@vue-exp-Cbz_CXqa.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-U1sBIDGE.js";const Y=X({__name:"LocationWidget",setup(W,{expose:e}){let p="LocationWidget",l="",E;function L(a){l=a.id}function n(a){p=a.pid,a.pid&&N(Q.WidgetClosed,p)}const v=x(!0);function V(a=!1){v.value=a,l&&a&&q.openWindowPanel(l)}e({changeVisible:V,isShow:v});let i,r;const P=x([{label:"十进制",status:!0},{label:"度分秒",status:!1},{label:"平面坐标",status:!1}]),B=x([{label:"三度带",status:!0},{label:"六度带",status:!1}]),f=x(0),o=x({x:0,y:0,xdeg:0,xmin:0,xsec:0,ydeg:0,ymin:0,ysec:0,zoneType:0,zonex:0,zoney:0,height:0});function A(a){const s=a.getCenter();o.value.x=s.lng,o.value.y=s.lat,y()}function S(){f.value==1?C():f.value==2&&b()}function F(){switch(f.value){case 0:y();break;case 1:C(!0),y();break;case 2:b(!0),y();break}}function C(a=!1){a?(o.value.x=o.value.xdeg+o.value.xmin/60+o.value.xsec/3600,o.value.y=o.value.ydeg+o.value.ymin/60+o.value.ysec/3600):(o.value.xdeg=Math.floor(o.value.x),o.value.xmin=Math.floor((o.value.x-o.value.xdeg)*60),o.value.xsec=Math.floor(((o.value.x-o.value.xdeg)*60-o.value.xmin)*60),o.value.ydeg=Math.floor(o.value.y),o.value.ymin=Math.floor((o.value.y-o.value.ydeg)*60),o.value.ysec=Math.floor(((o.value.y-o.value.ydeg)*60-o.value.ymin)*60))}function b(a=!1){if(a){const s=z("EPSG:3857","EPSG:4326",[o.value.zonex,o.value.zoney]);s&&(o.value.x=s[0],o.value.y=s[1])}else{const s=z("EPSG:4326","EPSG:3857",[o.value.x,o.value.y]);s&&(o.value.zonex=s[0],o.value.zoney=s[1])}}function y(){r?r.setLngLat([o.value.x,o.value.y]):r=new j.Marker().setLngLat([o.value.x,o.value.y]).addTo(i)}async function I(){r&&i.setCenter(r.getLngLat())}function T(){i.getCanvas().style.cursor="crosshair",i.once("click",a=>{o.value.x=a.lngLat.lng,o.value.y=a.lngLat.lat,f.value==1?C():f.value==2&&b(),y(),i.getCanvas().style.cursor=""})}Z(()=>{k.map?(i=k.map,A(i)):k.Message.info("未获取到地图")}),O(()=>{r&&r.remove()});const U={get widgetID(){return p},set widgetID(a){p=a},get windowID(){return l},set windowID(a){l=a},get viewer(){return E},set viewer(a){E=a},loadedHandle:L,doClosePanel:n,isShow:v,changeVisible:V,get map(){return i},set map(a){i=a},get marker(){return r},set marker(a){r=a},types:P,zoneTypes:B,type:f,dataModel:o,getCurrentCenter:A,changeCoorType:S,changeValue:F,convertDegMinSec:C,convertZone:b,CreateUpdatePointEntity:y,ZoomTo:I,ClickPoint:T,get XWindow(){return c}};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),_={class:"q-pa-sm panelCls"},$={class:"q-pb-md titleTypeCls row"},h={class:"contentCls row justify-center items-center q-col-gutter-sm"},ee={class:"col-9"},le={class:"col-9"},oe={class:"col-9 row justify-between"},ne={class:"col-9 row justify-between"},ae={class:"col-9"},te={class:"col-9"},de={class:"footerCls q-pt-md row justify-between"};function se(W,e,p,l,E,L){return g(),R(l.XWindow,{isDark:!1,top:"10px",left:"10px",nWidth:"350px",nHeight:"250px",title:"坐标拾取",pid:"LocationWidget",onLoaded:l.loadedHandle,onClose:l.doClosePanel},{default:m(()=>[t("div",_,[t("div",$,[(g(!0),M(w,null,J(l.types,(n,v)=>(g(),M("div",{class:"col-4",key:v},[d(G,{modelValue:l.type,"onUpdate:modelValue":[e[0]||(e[0]=V=>l.type=V),e[1]||(e[1]=V=>l.changeCoorType())],"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",label:n.label,val:v,dense:""},null,8,["modelValue","label","val"])]))),128))]),t("div",h,[l.type==0?(g(),M(w,{key:0},[e[24]||(e[24]=t("div",{class:"col-3"}," 经度: ",-1)),t("div",ee,[d(u,{outlined:"",modelValue:l.dataModel.x,"onUpdate:modelValue":[e[2]||(e[2]=n=>l.dataModel.x=n),e[3]||(e[3]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},null,8,["modelValue"])]),e[25]||(e[25]=t("div",{class:"col-3"}," 纬度: ",-1)),t("div",le,[d(u,{outlined:"",modelValue:l.dataModel.y,"onUpdate:modelValue":[e[4]||(e[4]=n=>l.dataModel.y=n),e[5]||(e[5]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},null,8,["modelValue"])])],64)):l.type==1?(g(),M(w,{key:1},[e[32]||(e[32]=t("div",{class:"col-3"}," 经度: ",-1)),t("div",oe,[d(u,{class:"inputCls",outlined:"",modelValue:l.dataModel.xdeg,"onUpdate:modelValue":[e[6]||(e[6]=n=>l.dataModel.xdeg=n),e[7]||(e[7]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},{append:m(()=>e[26]||(e[26]=[t("span",null,"度",-1)])),_:1},8,["modelValue"]),d(u,{class:"inputCls",outlined:"",modelValue:l.dataModel.xmin,"onUpdate:modelValue":[e[8]||(e[8]=n=>l.dataModel.xmin=n),e[9]||(e[9]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},{append:m(()=>e[27]||(e[27]=[t("span",null,"分",-1)])),_:1},8,["modelValue"]),d(u,{class:"inputCls",outlined:"",modelValue:l.dataModel.xsec,"onUpdate:modelValue":[e[10]||(e[10]=n=>l.dataModel.xsec=n),e[11]||(e[11]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},{append:m(()=>e[28]||(e[28]=[t("span",null,"秒",-1)])),_:1},8,["modelValue"])]),e[33]||(e[33]=t("div",{class:"col-3"}," 纬度: ",-1)),t("div",ne,[d(u,{class:"inputCls",outlined:"",modelValue:l.dataModel.ydeg,"onUpdate:modelValue":[e[12]||(e[12]=n=>l.dataModel.ydeg=n),e[13]||(e[13]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},{append:m(()=>e[29]||(e[29]=[t("span",null,"度",-1)])),_:1},8,["modelValue"]),d(u,{class:"inputCls",outlined:"",modelValue:l.dataModel.ymin,"onUpdate:modelValue":[e[14]||(e[14]=n=>l.dataModel.ymin=n),e[15]||(e[15]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},{append:m(()=>e[30]||(e[30]=[t("span",null,"分",-1)])),_:1},8,["modelValue"]),d(u,{class:"inputCls",outlined:"",modelValue:l.dataModel.ysec,"onUpdate:modelValue":[e[16]||(e[16]=n=>l.dataModel.ysec=n),e[17]||(e[17]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},{append:m(()=>e[31]||(e[31]=[t("span",null,"秒",-1)])),_:1},8,["modelValue"])])],64)):l.type==2?(g(),M(w,{key:2},[e[34]||(e[34]=t("div",{class:"col-3"}," 纵坐标: ",-1)),t("div",ae,[d(u,{outlined:"",modelValue:l.dataModel.zonex,"onUpdate:modelValue":[e[18]||(e[18]=n=>l.dataModel.zonex=n),e[19]||(e[19]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},null,8,["modelValue"])]),e[35]||(e[35]=t("div",{class:"col-3"}," 横坐标: ",-1)),t("div",te,[d(u,{outlined:"",modelValue:l.dataModel.zoney,"onUpdate:modelValue":[e[20]||(e[20]=n=>l.dataModel.zoney=n),e[21]||(e[21]=n=>l.changeValue())],modelModifiers:{number:!0},dense:""},null,8,["modelValue"])])],64)):K("",!0)]),t("div",de,[d(D,{class:"btnCls",color:"primary",label:"图上拾取",onClick:e[22]||(e[22]=n=>l.ClickPoint())}),d(D,{class:"btnCls",color:"primary",label:"坐标定位",onClick:e[23]||(e[23]=n=>l.ZoomTo())})])])]),_:1})}const Ve=H(Y,[["render",se],["__scopeId","data-v-550b286b"],["__file","LocationWidget.vue"]]);export{Ve as default};
