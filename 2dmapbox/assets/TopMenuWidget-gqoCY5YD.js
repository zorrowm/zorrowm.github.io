import{J as R,ad as oe,ae as O,a1 as le,I as z,G as E,a6 as se,T as ie,Y as ce,Z as ue,A as D,ac as de,x as pe,af as fe,ag as _e}from"./vendor-qEPl7M71.js";import{F as he}from"./FullScreen-iS1AEBEp.js";import{h as me,g as H,B as w}from"./xframelib-exp-CBRV2soX.js";import{b as G,_ as M,d as ge,u as ve,p as Se}from"./index-8yyKnfk0.js";import{b as B,u as Q}from"./vue-router-exp-U1sBIDGE.js";import{d as W,z as y,c as v,w as be,o as we,a as g,V as j,L as u,S as _,_ as p,e as d,O as ke,a7 as U,a2 as q,W as Y,D as J,M as b,F as k,a6 as V,X as T,a9 as ye,Y as A,r as Ie,N as L}from"./@vue-exp-Cbz_CXqa.js";import{O as Me}from"./urlUtils-BY_cFLPx.js";import{L as Ce}from"./layoutTool-Ym0BJ3T4.js";import{W as xe}from"./WidgetsEvent-e0lOKT5_.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";const Le=W({__name:"ItemMultiple",props:{trueItem:{default:function(){return null},type:Object},initLevel:{type:Number,default:0}},setup(a,{expose:o}){o();const s=G(),e=B(),i=a,{trueItem:l,initLevel:t}=y(i),r=v(()=>s.leftCollapsed&&!s.overlayMenu?"margin-left:-16px":"");be(e,()=>{h()}),we(()=>{h()});const c=g(!1),h=()=>{for(let n of l.value.children)if(n.path===e.path||n.parent_code===e.name){c.value=!0;return}c.value=!1},m={appState:s,route:e,props:i,trueItem:l,initLevel:t,shortStyle:r,itemOpen:c,changeOpen:h};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}});function Re(a,o,s,e,i,l){const t=j("Icon");return u(),_(oe,{modelValue:e.itemOpen,"onUpdate:modelValue":o[0]||(o[0]=r=>e.itemOpen=r),group:e.trueItem.name,"header-inset-level":e.initLevel},{header:p(()=>[d(R,{avatar:"",style:ke(e.shortStyle)},{default:p(()=>[d(t,{icon:e.trueItem.meta?.icon},null,8,["icon"])]),_:1},8,["style"]),d(R,{style:{"margin-left":"-10px"}},{default:p(()=>[U(q(e.trueItem.meta?.title),1)]),_:1})]),default:p(()=>[Y(a.$slots,"default")]),_:3},8,["modelValue","group","header-inset-level"])}const N=M(Le,[["render",Re],["__file","ItemMultiple.vue"]]),Oe={__name:"ItemSingle",props:{trueItem:{default:function(){return{}},type:Object},initLevel:{type:Number,default:0}},setup(a,{expose:o}){o();const s=O(),e=v(()=>s.dark.isActive?"bg-grey-10 text-white":"bg-primary text-white"),i=Q(),l=B(),t=a,{trueItem:r,initLevel:c}=y(t),h=f=>{f.path&&H(f.path)||f.link?window.open(f.path):i.push({name:f.name})},m=v(()=>l.name===r.value.name),n={$q:s,darkThemeSideBar:e,router:i,route:l,props:t,trueItem:r,initLevel:c,toPath:h,checkActive:m,computed:v,toRefs:y,get useRoute(){return B},get useRouter(){return Q},get H5Tool(){return me},get isValidURL(){return H},get useQuasar(){return O}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}};function Be(a,o,s,e,i,l){const t=j("Icon");return J((u(),_(z,{clickable:"",exact:"","inset-level":e.initLevel,active:e.checkActive,"active-class":a.darkThemeSelect,onClick:o[0]||(o[0]=r=>e.toPath(e.trueItem))},{default:p(()=>[d(R,{avatar:""},{default:p(()=>[d(t,{icon:e.trueItem.meta?.icon},null,8,["icon"])]),_:1}),d(R,{style:{"margin-left":"-10px"}},{default:p(()=>[U(q(e.trueItem.meta?.title),1)]),_:1})]),_:1},8,["inset-level","active","active-class"])),[[le]])}const F=M(Oe,[["render",Be],["__scopeId","data-v-30bc520c"],["__file","ItemSingle.vue"]]),De={__name:"SideMenuBarItem",props:{childrenItem:{default:function(){return{}},type:Object},initLevel:{type:Number,default:0}},setup(a,{expose:o}){o();const s=a,{childrenItem:e,initLevel:i}=y(s),l=v(()=>e.value.children&&e.value.children.length!==0?N:F),t={props:s,childrenItem:e,initLevel:i,chooseComponent:l,computed:v,toRefs:y,ItemMultiple:N,ItemSingle:F};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}};function Te(a,o,s,e,i,l){const t=j("SideMenuBarItem",!0);return u(),_(ye(e.chooseComponent),{"true-item":e.childrenItem,"init-level":e.initLevel},{default:p(()=>[e.childrenItem.children&&e.childrenItem.children.length!==0?(u(!0),b(k,{key:0},V(e.childrenItem.children,r=>(u(),_(t,{key:r.path,"children-item":r,"init-level":e.initLevel+.3},null,8,["children-item","init-level"]))),128)):T("",!0)]),_:1},8,["true-item","init-level"])}const Ae=M(De,[["render",Te],["__file","SideMenuBarItem.vue"]]),Qe={__name:"index",props:{topMenuChildren:{type:Object||Array,required:!1,default:()=>null}},setup(a,{expose:o}){o();const s=O(),e=v(()=>s.dark.isActive?"bg-grey-10 text-white":"bg-white text-dark"),i=a,{topMenuChildren:l}=y(i);w.Loading("SideMenuBar");const t={$q:s,darkThemeSideBar:e,props:i,topMenuChildren:l,computed:v,toRefs:y,get Global(){return w},get useQuasar(){return O},SideMenuBarItem:Ae};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}};function Ve(a,o,s,e,i,l){return u(),_(se,{style:{height:"calc(100%)"},class:A(e.darkThemeSideBar)},{default:p(()=>[Y(a.$slots,"default",{},void 0,!0),d(E,{class:"menu-list"},{default:p(()=>[(u(!0),b(k,null,V(e.topMenuChildren,(t,r)=>(u(),_(e.SideMenuBarItem,{key:r,"children-item":t,"init-level":0,style:{}},null,8,["children-item"]))),128))]),_:1})]),_:3},8,["class"])}const je=M(Qe,[["render",Ve],["__scopeId","data-v-4f4fae95"],["__file","index.vue"]]);var S=(a=>(a[a.Widget=0]="Widget",a[a.Route=1]="Route",a[a.URL=2]="URL",a[a.Action=3]="Action",a))(S||{});const Ue=W({__name:"PageMenu",props:{data:{type:Array,required:!0}},setup(a,{expose:o}){o();const s=a,e=g(s.data),i=Q(),l=B();function t(n){if(n.children){let f=!1;if(n.children.forEach(I=>{if(I.name==l.name||I.path===l.path){f=!0;return}}),f)return" pagemenuActive"}else if(n.name==l.name||n.path===l.path)return"pagemenuActive";return""}const r=g();function c(n,f){const I=n.label;if(r.value)r.value.label!=I&&(r.value.state=!1),r.value=n,n.state=f;else{r.value=n,n.state=f;return}}function h(n){if(!(!n||n.children)&&(n.path||n.name))switch(n.kind){case void 0:case S.Route:n.blank?Me(i,n.path,{}):n.name?i.push({name:n.name}):n.path&&i.push({path:n.path});break;case S.URL:window.open(n.path,"_blank");break;case S.Action:w.EventBus.emit("IPageMenu.Action",n);break;case S.Widget:w.EventBus.emit("LayoutLoadWidget",n);break}}const m={props:s,dataRef:e,router:i,route:l,getSelectedStyle:t,currentItem:r,setShowState:c,menuClickHandler:h};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),We={class:"row gt-xs q-py-sm q-gutter-xs"};function qe(a,o,s,e,i,l){return u(),b("div",We,[(u(!0),b(k,null,V(e.dataRef,(t,r)=>(u(),b(k,{key:t.label},[t.children?(u(),_(ue,{key:0,"model-value":t.state,"onUpdate:modelValue":c=>t.state=c,"transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:t.label,class:A([e.getSelectedStyle(t),"pageMenuItem"]),onMouseover:c=>e.setShowState(t,!0)},{default:p(()=>[d(E,{style:{"min-width":"100px"},onMouseover:c=>e.setShowState(t,!0),onMouseleave:c=>e.setShowState(t,!1)},{default:p(()=>[(u(!0),b(k,null,V(t.children,(c,h)=>(u(),b(k,{key:c.label},[J((u(),_(z,{clickable:"",class:A([e.getSelectedStyle(c),"pageMenuItem"]),onClick:m=>e.menuClickHandler(c)},{default:p(()=>[d(R,null,{default:p(()=>[U(q(c.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[ie]]),d(ce)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"])):(u(),_(D,{key:1,flat:"",label:t.label,class:A([e.getSelectedStyle(t),"pageMenuItem"]),onClick:c=>e.menuClickHandler(t),onMouseover:c=>e.setShowState(t,!1)},null,8,["label","class","onClick","onMouseover"]))],64))),128))])}const Pe=M(Ue,[["render",qe],["__file","PageMenu.vue"]]);function He(a){a&&ge(xe.ModalContainerWidget_LoadModal,a)}const Ne=W({__name:"TopMenuWidget",setup(a,{expose:o}){o();const s=[{label:"首页",icon:"ant-design:home-outlined",kind:S.Route,path:"/index"},{label:"大屏展示",kind:S.Route,path:"/map"},{label:"API示例",kind:S.Route,path:"/apiexamples"},{label:"开发文档",kind:S.Route,path:"/mdHelp"}],e=g(!1),i=g(!1),l=O(),t=g(w.Config.UI?.SiteTitle),r=G(),c=ve(),{leftCollapsed:h}=de(r),m=g(r.headerSetting.centerTitle),n=g(r.headerSetting.showFullScreen),f=g(r.headerSetting.showCollapseIcon);function I(){r.toggleCollapse()}const X=Ie({headerHeight:Ce.getHeaderHeight()}),Z=g(window.document.documentElement),K=B(),$=()=>{l.dialog({title:"退出",message:"您确定要退出登录吗？",cancel:!0}).onOk(()=>{c.clear(),w.Message.msg("成功退出登录"),window.open(window.location.pathname,"_self")}).onCancel(()=>{})},ee=v(()=>!w.Config.UI?.IsNoLogin);function te(){He({modalID:"changeMyPWD",extraData:{title:"修改密码"},width:500,rowData:void 0})}const C=Q();function ne(x){switch(x){case"0":C.push("/index");break;case"2":C.push("/productPage");break;case"4":C.push("/apiexamples");break;case"5":C.push("/wsntest");break}}const ae=v(()=>{const x=Se.children;return x||(w.Message.warn("无法获取路由列表！"),[])});function re(){}const P={menuList:s,rightDrawerOpen:e,isShow:i,$q:l,siteTitle:t,appState:r,userState:c,leftCollapsed:h,iscenterTitle:m,showFullScreen:n,showCollapseIcon:f,toggleCollapse:I,state:X,fullScreenElem:Z,route:K,doLogout:$,isNOLogin:ee,showUserModal:te,router:C,routerPush:ne,topMenuChildren:ae,toggleRightDrawer:re,FullScreen:he,SideMenuBar:je,PageMenu:Pe};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),Fe={class:"row"},ze={class:"col-11 row justify-end items-center"},Ee={class:"col-1 justify-end q-pa-md"},Ge={class:"q-gutter-sm row items-center no-wrap"};function Ye(a,o,s,e,i,l){const t=j("Icon");return u(),b(k,null,[L("div",Fe,[L("div",ze,[d(e.PageMenu,{data:e.menuList})]),L("div",Ee,[L("div",Ge,[d(D,{class:"lt-sm",dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer}),d(D,{dense:"",flat:"",href:"https://github.com",target:"_blank"},{default:p(()=>[d(t,{icon:"fa-github"}),d(fe,null,{default:p(()=>o[1]||(o[1]=[U("github")])),_:1})]),_:1}),L("span",null,[e.showCollapseIcon?(u(),_(t,{key:0,icon:e.leftCollapsed?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined",onClick:e.toggleCollapse},null,8,["icon"])):T("",!0)]),e.showFullScreen&&e.$q.screen.gt.sm?(u(),_(e.FullScreen,{key:0,target:e.fullScreenElem},null,8,["target"])):T("",!0)])])]),e.$q.screen.lt.sm?(u(),_(pe,{key:0,view:"hHH lpR fFf"},{default:p(()=>[d(_e,{modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[0]||(o[0]=r=>e.rightDrawerOpen=r),side:"right",bordered:""},{default:p(()=>[d(D,{dense:"",flat:"",round:"",icon:"menu",onClick:e.toggleRightDrawer}),d(e.SideMenuBar,{"top-menu-children":e.topMenuChildren},null,8,["top-menu-children"])]),_:1},8,["modelValue"])]),_:1})):T("",!0)],64)}const it=M(Ne,[["render",Ye],["__file","TopMenuWidget.vue"]]);export{it as default};
