import{J as C,a2 as d}from"./vendor-qEPl7M71.js";import{B as g}from"./xframelib-exp-CBRV2soX.js";import{d as x,a as v,o as B,C as X,D as I,S as M,_ as m,L as b,e as p,a7 as T,a2 as D,N,O as V,V as w,ab as A}from"./@vue-exp-Cbz_CXqa.js";import{_ as W}from"./index-8yyKnfk0.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-U1sBIDGE.js";const $=x({__name:"CompassWidget",setup(h,{expose:l}){l();let a;const s=()=>{a.setBearing(0)};let i=v(),n=v();const r=()=>{const t=a.transform.angle*(180/Math.PI);i.value=`transform: rotate(${t}deg)`,c(t)},c=t=>{let e;t<0?e=360+Math.floor(t):e=Math.floor(t),e>0&&(e=Math.floor(360-e));let o;e>=340||e<20?o="北":e>=20&&e<70?o="东北":e>=70&&e<110?o="东":e>=110&&e<160?o="东南":e>=160&&e<200?o="南":e>=200&&e<250?o="西南":e>=250&&e<290?o="西":e>=290&&e<340&&(o="西北"),e===0?n.value=`${o}`:n.value=`${e}°${o}`};let f=0;const y=t=>{f=t.changedTouches[0].pageX.toFixed(0)},S=t=>{const o=t.changedTouches[0].pageX.toFixed(0)-f;a.setBearing(o)};B(async()=>{u()});function u(){g.map&&(a=g.map,a&&a.on("rotate",r))}X(()=>{a&&a.off("rotate",r)});const _={get map(){return a},set map(t){a=t},resetBearing:s,get rotateStyle(){return i},set rotateStyle(t){i=t},get angel(){return n},set angel(t){n=t},rotateCompassArrow:r,angelCalculate:c,get startX(){return f},set startX(t){f=t},handelmovestart:y,handelmove:S,MapInit:u};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}});function k(h,l,a,s,i,n){const r=w("Icon"),c=A("drag");return I((b(),M(C,{class:"compassgroup"},{default:m(()=>[p(d,{class:"infoAngel"},{default:m(()=>[T(D(s.angel),1)]),_:1}),p(d,{class:"infoAngel2"},{default:m(()=>l[0]||(l[0]=[N("div",null,null,-1)])),_:1}),p(d,{caption:"",style:V(s.rotateStyle),onMouseup:s.resetBearing,onTouchstart:s.handelmovestart,onTouchmove:s.handelmove},{default:m(()=>[p(r,{icon:"mylocal:compass"})]),_:1},8,["style"])]),_:1})),[[c]])}const U=W($,[["render",k],["__scopeId","data-v-f6943b66"],["__file","CompassWidget.vue"]]);export{U as default};
