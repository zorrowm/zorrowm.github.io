import{$ as y,a0 as x,A as u,G as M,I as d,a1 as m}from"./vendor-qEPl7M71.js";import{B as v}from"./xframelib-exp-CBRV2soX.js";import{M as E}from"./MapDrawTool-Cb72cPis.js";import{d as F,a as P,o as R,C as S,M as L,N as b,e as r,_ as i,F as N,L as p,D as f,S as w,a7 as D}from"./@vue-exp-Cbz_CXqa.js";import{_ as Q}from"./index-XTFg7KW3.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-U1sBIDGE.js";const j=F({__name:"MapDrawWidget",setup(g,{expose:e}){e();let n;function o(a){switch(s.value&&(s.value=!1),a){case 0:n.DrawPoint();break;case 1:n.DrawLine();break;case 2:n.DrawPolygon();break;case 3:n.DrawRectangle();break}}function k(){n?.RemoveCurrentDraw()}const s=P(!1);function t(a){var l=document.getElementById("clickMenuPopup");l&&(l.style.top=a.point.y+"px",l.style.left=a.point.x+"px"),s.value=!s.value}function B(){if(n){const l=n.GetDrawResult();if(l&&l.features&&l.features.length){const C=JSON.stringify(l);var a=document.createElement("a");a.href=URL.createObjectURL(new Blob([C],{type:"application/json"})),a.download="draw.geojson",a.click()}}}R(()=>{v.map&&(n=new E(v.map),n.AddDrawControl({displayControlsDefault:!1}),v.map.on("contextmenu",t))}),S(()=>{n&&(n.RemoveDrawControl(),v.map.off("contextmenu",t))});const c={get mapdraw(){return n},set mapdraw(a){n=a},BeginDraw:o,DeleteSelectDraw:k,visible:s,RightClickMenu:t,DownloadDrawData:B};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),I={class:"contentPanel"},$={style:{width:"150px"}};function G(g,e,n,o,k,s){return p(),L(N,null,[b("div",I,[r(y,{push:""},{default:i(()=>[r(u,{color:"primary",push:"",label:"点",icon:"mdi-map-marker ",onClick:e[0]||(e[0]=t=>o.BeginDraw(0))}),r(u,{color:"primary",push:"",label:"线",icon:"timeline",onClick:e[1]||(e[1]=t=>o.BeginDraw(1))}),r(u,{color:"primary",push:"",label:"面",icon:"mdi-vector-polygon",onClick:e[2]||(e[2]=t=>o.BeginDraw(2))}),r(u,{color:"primary",push:"",label:"矩形",icon:"mdi-vector-rectangle",onClick:e[3]||(e[3]=t=>o.BeginDraw(3))}),r(u,{color:"primary",push:"",label:"删除",icon:"close",onClick:e[4]||(e[4]=t=>o.DeleteSelectDraw())}),r(u,{color:"primary",push:"",label:"下载",icon:"mdi-arrow-down-bold-box",onClick:e[5]||(e[5]=t=>o.DownloadDrawData())})]),_:1})]),r(x,{"model-value":o.visible,target:"#clickMenuPopup","transition-show":"flip-up","transition-hide":"flip-down",onHide:e[11]||(e[11]=t=>o.visible=!1)},{default:i(()=>[b("div",$,[r(M,{bordered:"",separator:""},{default:i(()=>[f((p(),w(d,{clickable:"",onClick:e[6]||(e[6]=t=>o.BeginDraw(0))},{default:i(()=>e[12]||(e[12]=[D(" 点 ")])),_:1})),[[m]]),f((p(),w(d,{clickable:"",onClick:e[7]||(e[7]=t=>o.BeginDraw(1))},{default:i(()=>e[13]||(e[13]=[D(" 线 ")])),_:1})),[[m]]),f((p(),w(d,{clickable:"",onClick:e[8]||(e[8]=t=>o.BeginDraw(2))},{default:i(()=>e[14]||(e[14]=[D(" 面 ")])),_:1})),[[m]]),f((p(),w(d,{clickable:"",onClick:e[9]||(e[9]=t=>o.BeginDraw(3))},{default:i(()=>e[15]||(e[15]=[D(" 矩形 ")])),_:1})),[[m]]),f((p(),w(d,{clickable:"",onClick:e[10]||(e[10]=t=>o.DownloadDrawData())},{default:i(()=>e[16]||(e[16]=[D(" 下载 ")])),_:1})),[[m]])]),_:1})])]),_:1},8,["model-value"])],64)}const q=Q(j,[["render",G],["__scopeId","data-v-e21c100f"],["__file","MapDrawWidget.vue"]]);export{q as default};
