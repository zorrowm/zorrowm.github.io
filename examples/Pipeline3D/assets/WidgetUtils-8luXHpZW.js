import{d as v,ac as S,r as b,L as W,H as p,M as g,O as k,a4 as M,S as w,N as x,I as D,a6 as B,_ as V}from"./@vue-exp-BMz8X7Pi.js";import{N as r}from"./xframelib-exp-BHnis-8Y.js";import{m as L,M as h,d as z}from"./index-Bvhcfk1J.js";import{b as E}from"./vue-router-exp-COsaUipG.js";function R(a){a.selected=!a.selected}function A(a){r.LayerManager.removeLayerItem("artificialLayer")}function N(a,c,o){r.LayerManager.addLayerItem({id:a,name:c},o)}const C=Object.freeze(Object.defineProperty({__proto__:null,AddLayerItem:N,ControlSkyVisible:R,RemoveLayerItem:A},Symbol.toStringTag,{value:"Module"})),O=v({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:L},iconColor:{type:String,default:"#f00"},itemSize:{type:String,default:"50px"}},setup(a,{expose:c}){c(),S(e=>({"48e81495":a.itemSize+10,bcab66f8:s.value,af747dc2:a.itemSize}));const o=a,s=b(L.length),l=E(),u=new Map,d=b(u);function n(e){switch(e.type){case h.URL:window.open(e.path,"_blank");break;case h.Route:if(e.blank){if(e.path){let i=l.resolve({path:e.path});window.open(i.href,"_blank")}}else e.path&&l.push({path:e.path});break;case h.Action:const t=e.path;t&&C[t]&&C[t](e);break;case h.Widget:if(e.path){const i=r.LayoutMap.get(o.layoutID);if(!i){r.Message.warn(`LayoutID:${o.layoutID}的Manager不存在`);return}f(i,e),e.selected=!e.selected,d.value.set(e.name,e.selected)}else r.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function f(e,t){t.path&&(t.selected?(t.unload?(r.Logger().info("卸载widget: "+t.path),e.unloadWidget(t.path)):(r.Logger().info("隐藏widget: "+t.path),e.changeWidgetVisible(t.path,!1)),t.children&&t.children.forEach(i=>{i.selected&&(r.Logger().info(`递归控制${t.path}的子Widget:`+i.path),f(e,i),i.selected=!i.selected)})):e.isWidgetLoaded(t.path)?(r.Logger().info("显示widget: "+t.path),e.changeWidgetVisible(t.path,!0)):(e.loadWidget(t.path),r.Logger().info("加载Widget："+t.path)))}function _(e){var t;return(t=d.value)!=null&&t.has(e.name)&&d.value.get(e.name)?"menuBarItem active":"menuBarItem"}const y={props:o,itemLength:s,router:l,selectedMapList:u,selectedMap:d,itemClick:n,controlMenuWidget:f,getClass:_};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),$={class:"menuBar"},j=["title","onClick"];function T(a,c,o,s,l,u){const d=W("Icon");return p(),g("ul",$,[(p(!0),g(k,null,M(o.menuData,(n,f)=>(p(),g("li",{key:f,class:w(s.getClass(n))},[x("span",{title:n.name,onClick:_=>s.itemClick(n)},[n.icon?(p(),D(d,{key:0,icon:n.icon,color:o.iconColor},null,8,["icon","color"])):(p(),g(k,{key:1},[B(V(n.name),1)],64))],8,j)],2))),128))])}const G=z(O,[["render",T],["__scopeId","data-v-2e1c9d38"],["__file","index.vue"]]);function F(a,c){let o;for(const s of a)if(s.path===c){o=s;break}else if(s.children){const l=F(s.children,c);if(l){o=l;break}}return o}export{G as W,F as f};
