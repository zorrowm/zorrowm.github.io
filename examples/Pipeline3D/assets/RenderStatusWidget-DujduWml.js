import{k as H,n as C,l as V,d as $}from"./index-Bvhcfk1J.js";import{S as M}from"./SystemsEvent-CcMw5DLH.js";import{N as y}from"./xframelib-exp-BHnis-8Y.js";import{d as L,u as O,v as F,M as W,H as P}from"./@vue-exp-BMz8X7Pi.js";import"./vendor-09XKH5X6.js";import"./@hprose-exp-zVZHOVCF.js";import"./vue-router-exp-COsaUipG.js";import"./axios-exp-DvxIUWKU.js";const x=L({name:"RenderStatusWidget",components:{},setup(){let t,r,d="",s="",a=!1,c=0,i,n;function o(){return y.CesiumViewer&&(t||(t=y.CesiumViewer)),t}function _(){if(!i){const e=o();e&&(i=Cesium.FrameRateMonitor.fromScene(e.scene))}return i}function m(){const e=o();e&&(r=e.cameraPosition,f())}function w(e){const u=o();if(!u)return;const v=u.scene,h=v.camera,S=v.globe.ellipsoid,E=h.pickEllipsoid(e.startPosition,S);if(E){const g=S.cartesianToCartographic(E);s=Cesium.Math.toDegrees(g.longitude).toFixed(4),d=Cesium.Math.toDegrees(g.latitude).toFixed(4)}f()}function f(){let e="";s!=""&&(e=`鼠标位置：${s}, ${d}`);const u=`帧频：${c}FPS ${r==null?void 0:r.toString()} ${e}`;C(u)}function p(){const e=_();e.lastFramesPerSecond===void 0?c=0:c=Math.ceil(e.lastFramesPerSecond),f()}function l(){const e=o();e&&e.scene&&(e.scene.postRender.addEventListener(p),n=new Cesium.ScreenSpaceEventHandler(e.scene.canvas),n.setInputAction(w,Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.camera.changed.addEventListener(m),n.setInputAction(m,Cesium.ScreenSpaceEventType.WHEEL),m()),a&&(a=!1,V(M.CesiumWidgetLoaded,l))}O(()=>{o()?l():(a=!0,H(M.CesiumWidgetLoaded,l))});function R(){i&&i.destroy(),n&&(n.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),n.removeInputAction(Cesium.ScreenSpaceEventType.WHEEL),n.destroy()),t&&(t.scene.postRender.removeEventListener(p),t.camera.changed.removeEventListener(m))}return F(()=>{R(),C("状态组件卸载了")}),{}},template:""});function T(t,r,d,s,a,c){return P(),W("span")}const j=$(x,[["render",T],["__file","RenderStatusWidget.vue"]]);export{j as default};
