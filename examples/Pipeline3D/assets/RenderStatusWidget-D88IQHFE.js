import{k as P,n as w,l as W,d as k}from"./index-uk12gd3X.js";import{S as R}from"./SystemsEvent-CcMw5DLH.js";import{N as x}from"./xframelib-exp-BYnL-see.js";import{d as D,u as T,v as I,M as U,H as A}from"./@vue-exp-BMz8X7Pi.js";import"./vendor-Dka75WDo.js";import"./@hprose-exp-CwcCDL56.js";import"./vue-router-exp-COsaUipG.js";import"./axios-exp-DvxIUWKU.js";const B=D({name:"RenderStatusWidget",components:{},setup(){let n,c="",d="",l,m="",u="",M="",C="",f="",p=!1,g=0;const V=180/Math.PI;let i,o;function r(){return x.CesiumViewer&&(n||(n=x.CesiumViewer)),n}function O(){if(!i){const e=r();e&&(i=Cesium.FrameRateMonitor.fromScene(e.scene))}return i}function h(){const e=r();if(!e)return;const t=e.scene.camera;l=Math.ceil(t.positionCartographic.height),d=a(t.positionCartographic.longitude).toFixed(2),c=a(t.positionCartographic.latitude).toFixed(2),v()}function H(e){const t=r();if(!t)return;const $=t.scene,s=$.camera;m=a(s.pitch).toFixed(2),u=a(s.heading).toFixed(2),M=a(s.roll).toFixed(2);const y=$.globe.ellipsoid,F=s.pickEllipsoid(e.startPosition,y);if(F){const _=y.cartesianToCartographic(F);f=Cesium.Math.toDegrees(_.longitude).toFixed(4),C=Cesium.Math.toDegrees(_.latitude).toFixed(4)}v()}function a(e){return e*V}function v(){let e="";f!=""&&(e=`鼠标位置：${f}, ${C}`);const t=`帧频：${g}FPS 经度:${d}° 纬度:${c}° 高度:${l}米 偏航角:${u}° 俯仰角:${m}°  翻转角:${M}° ${e}`;w(t)}function E(){const e=O();e.lastFramesPerSecond===void 0?g=0:g=Math.ceil(e.lastFramesPerSecond),v()}function S(){const e=r();e&&e.scene&&(e.scene.postRender.addEventListener(E),o=new Cesium.ScreenSpaceEventHandler(e.scene.canvas),o.setInputAction(H,Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.camera.changed.addEventListener(h),h()),p&&(p=!1,W(R.CesiumWidgetLoaded,S))}T(()=>{r()?S():(p=!0,P(R.CesiumWidgetLoaded,S))});function L(){i&&i.destroy(),o&&(o.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),o.destroy()),n&&(n.scene.postRender.removeEventListener(E),n.camera.changed.removeEventListener(h))}return I(()=>{L(),w("状态组件卸载了")}),{}},template:""});function b(n,c,d,l,m,u){return A(),U("span")}const X=k(B,[["render",b],["__file","RenderStatusWidget.vue"]]);export{X as default};
