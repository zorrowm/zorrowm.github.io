import{d as e,G as s,r as l,A as n,I as o,J as a,R as t,V as i,f as r,Y as c,q as u,n as d,b as g,L as p,M as m,t as f,N as v,O as h,P as y,X as w}from"./vendor.5af50741.js";import{_ as S}from"./logo.50226ed7.js";import{_ as x}from"./index.d6011a7c.js";import"./expansion-moment.d5a89207.js";import"./expansion-axios.5452c070.js";const I=e({setup(){var e,g;const p=n.t,m=s({username:"",password:""}),f=l(),v=l(),h=l(null==(e=n.Config.UI)?void 0:e.SiteTitle),S=o(),x=a();let I=decodeURIComponent((null==(g=x.query)?void 0:g.redirect)||"/");const k=t();let T;if(k)return i(k),void(S&&S.replace(I).then((e=>{"login"==x.name&&S.replace("/")})));return r((async()=>{var e,s,l,o;if(I&&(T=null==(s=null==(e=x.query)?void 0:e.tk)?void 0:s.toString()),T){const e=await c(T),s=null==e?void 0:e.data;if(s)if(s.isSuccess){u(s.resultValue),d(s.resultValue.doubleToken),null==(l=n.Message)||l.msg(p("sys.login.loginSuccessTitle"));const e=t();e&&((null==I?void 0:I.indexOf("?"))>0?I+="&tk="+e.token:I+="?tk="+e.token,S.replace(I).then((e=>{"login"==x.name&&S.replace("/")})))}else null==(o=n.Message)||o.warn(p("sys.login.loginTokenFailInfo"))}})),{formState:m,systemTitle:h,handleSubmit:async()=>{var e,s,l,o,a;if(""===m.username.trim()||""==m.password.trim())return null==(e=n.Message)?void 0:e.warn(p("sys.login.loginEmtyWarnInfo"));let i={username:m.username.trim(),pwd:y.MD5(m.password)};const r=await w(i);if(r)if(r.isSuccess){const e=decodeURIComponent((null==(l=x.query)?void 0:l.redirect)||"/");if(S)if(e.startsWith("http://")||e.startsWith("https://")){const s=t();window.open(e+"#/?tk="+s.token,"_self")}else S.replace(e).then((e=>{"login"==x.name&&S.replace("/")}));null==(o=n.Message)||o.msg(p("sys.login.loginSuccessTitle"))}else null==(a=n.Message)||a.warn(r.ResultDescription||p("sys.login.loginFailTitle"));else null==(s=n.Message)||s.warn(p("sys.login.loginFailTitle"))},t:p,onblur:function(){f.value&&(f.value.placeholder=p("sys.login.accountPlaceholder")),v.value&&(v.value.placeholder=p("sys.login.passwordPlaceholder"))},nameInput:f,pwdInput:v}}}),k={class:"container"},T={class:"login-logo"},b=m("img",{src:S,alt:""},null,-1),M={class:"login-title"},j={class:"login"},P={class:"login-top"},U={class:"login-center clearfix"},V=m("div",{class:"login-center-img"},[m("img",{src:"./img/login/name.png"})],-1),q={class:"login-center-input"},C=["placeholder"],F={class:"login-center-input-text"},R={class:"login-center clearfix"},B=m("div",{class:"login-center-img"},[m("img",{src:"./img/login/password.png"})],-1),W={class:"login-center-input"},_=["placeholder"],D={class:"login-center-input-text"};var N=x(I,[["render",function(e,s,l,n,o,a){return g(),p("div",k,[m("div",T,[b,m("span",M,f(e.systemTitle),1)]),m("div",j,[m("div",P,f(e.t("sys.login.signInFormTitle")),1),m("div",U,[V,m("div",q,[v(m("input",{ref:"nameInput",type:"text",placeholder:e.t("sys.login.accountPlaceholder"),onfocus:"this.placeholder=''",onBlur:s[0]||(s[0]=s=>e.onblur()),"onUpdate:modelValue":s[1]||(s[1]=s=>e.formState.username=s)},null,40,C),[[h,e.formState.username]]),m("div",F,f(e.t("sys.login.userName")),1)])]),m("div",R,[B,m("div",W,[v(m("input",{ref:"pwdInput",type:"password",placeholder:e.t("sys.login.passwordPlaceholder"),onfocus:"this.placeholder=''",onBlur:s[2]||(s[2]=s=>e.onblur()),"onUpdate:modelValue":s[3]||(s[3]=s=>e.formState.password=s)},null,40,_),[[h,e.formState.password]]),m("div",D,f(e.t("sys.login.password")),1)])]),m("div",{class:"login-button",onClick:s[4]||(s[4]=(...s)=>e.handleSubmit&&e.handleSubmit(...s))},f(e.t("sys.login.loginButton")),1)])])}]]);export{N as default};
