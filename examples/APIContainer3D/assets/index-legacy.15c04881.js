!function(){function e(e,n,t,r,o,a,s){try{var l=e[a](s),u=l.value}catch(i){return void t(i)}l.done?n(u):Promise.resolve(u).then(r,o)}function n(n){return function(){var t=this,r=arguments;return new Promise((function(o,a){var s=n.apply(t,r);function l(n){e(s,o,a,l,u,"next",n)}function u(n){e(s,o,a,l,u,"throw",n)}l(void 0)}))}}System.register(["./vendor-legacy.61b454ae.js","./logo-legacy.9119228e.js","./index-legacy.97525b29.js","./expansion-moment-legacy.137cccc6.js","./expansion-axios-legacy.08657a3d.js"],(function(e){"use strict";var t,r,o,a,s,l,u,i,c,d,f,g,p,m,v,y,h,w,x,b,k,S,_,R,T,M,P,j;return{setters:[function(e){t=e.d,r=e.G,o=e.r,a=e.I,s=e.J,l=e.f,u=e.Y,i=e.q,c=e.n,d=e.A,f=e.R,g=e.i,p=e.b,m=e.L,v=e.j,y=e.w,h=e.M,w=e.t,x=e.c,b=e.P,k=e.X,S=e.Q,_=e.T,R=e.W,T=e.Z,M=e.a0},function(e){P=e._},function(e){j=e._},function(){},function(){}],execute:function(){var I=t({setup:function(){var e,t=d.t,g=r({username:"",password:""}),p=o(),m=o(),v=o("统一用户验证服务"),y=a(),h=s(),w=x();function x(){var e=document.URL.indexOf("redirect=");if(e>0)return document.URL.substring(e+9)}var S=function(){var e=n(regeneratorRuntime.mark((function e(){var n,r,o,a,s,l,u,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==g.username.trim()&&""!=g.password.trim()){e.next=2;break}return e.abrupt("return",null===(n=d.Message)||void 0===n?void 0:n.warn(t("sys.login.loginEmtyWarnInfo")));case 2:return r={username:g.username.trim(),pwd:b.MD5(g.password)},e.next=5,k(r);case 5:if(o=e.sent){e.next=9;break}return null===(a=d.Message)||void 0===a||a.warn(t("sys.login.loginFailTitle")),e.abrupt("return");case 9:o.isSuccess?(l=x()||"/",y&&(l.startsWith("http://")||l.startsWith("https://")?(u=f(),window.open(l+"?tk="+u.token,"_self")):y.replace(l).then((function(e){"login"==h.name&&y.replace("/")}))),null===(s=d.Message)||void 0===s||s.msg(t("sys.login.loginSuccessTitle"))):null===(i=d.Message)||void 0===i||i.warn(o.ResultDescription||t("sys.login.loginFailTitle"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l(n(regeneratorRuntime.mark((function n(){var r,o,a,s,l,g,p,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((w=x())&&(e=null===(r=h.query)||void 0===r||null===(o=r.tk)||void 0===o?void 0:o.toString()),!e){n.next=11;break}return n.next=7,u(e);case 7:a=n.sent,(s=null==a?void 0:a.data)&&(s.isSuccess?(i(s.resultValue),c(s.resultValue.doubleToken),null===(l=d.Message)||void 0===l||l.msg(t("sys.login.loginSuccessTitle")),(g=f())&&((null===(p=w)||void 0===p?void 0:p.indexOf("?"))>0?w+="&tk="+g.token:w+="?tk="+g.token,y.replace(w).then((function(e){"login"==h.name&&y.replace("/")})))):null===(m=d.Message)||void 0===m||m.warn(t("sys.login.loginTokenFailInfo")));case 11:case"end":return n.stop()}}),n)})))),{t:t,formState:g,onblur:function(){p.value&&(p.value.placeholder=t("sys.login.accountPlaceholder")),m.value&&(m.value.placeholder=t("sys.login.passwordPlaceholder"))},nameInput:p,pwdInput:m,systemTitle:v,handleSubmit:S}}}),U={class:"bgc-image"},L=h("img",{src:P,alt:"",class:"logo"},null,-1),O={style:{"text-align":"center"}};e("default",j(I,[["render",function(e,n,t,r,o,a){var s=g("UserOutlined"),l=S,u=_,i=g("LockOutlined"),c=R,d=T,f=M;return p(),m("div",U,[L,v(f,{class:"login-view",ref:"formRef",model:e.formState,rules:e.rules},{default:y((function(){return[h("p",O,w(e.systemTitle),1),v(u,{name:"username",ref:"name"},{default:y((function(){return[v(l,{placeholder:e.t("sys.login.accountPlaceholder"),class:"login-input",value:e.formState.username,"onUpdate:value":n[0]||(n[0]=function(n){return e.formState.username=n})},{prefix:y((function(){return[v(s,{style:{color:"rgba(0, 0, 0, 0.5)"}})]})),_:1},8,["placeholder","value"])]})),_:1},512),v(u,{name:"password"},{default:y((function(){return[v(c,{placeholder:e.t("sys.login.passwordPlaceholder"),class:"login-input",value:e.formState.password,"onUpdate:value":n[1]||(n[1]=function(n){return e.formState.password=n})},{prefix:y((function(){return[v(i,{style:{color:"rgba(0, 0, 0, 0.5)"}})]})),_:1},8,["placeholder","value"])]})),_:1}),v(u,null,{default:y((function(){return[v(d,{onClick:e.handleSubmit,class:"login-button"},{default:y((function(){return[x(w(e.t("sys.login.loginButton")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])])}]]))}}}))}();
