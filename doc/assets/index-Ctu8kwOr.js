const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./defaultLayout-tIUk_UHE.js","./quasar-exp-DKoj9TJe.js","./@vue-exp-RtJr_9pC.js","./quasar-exp-C3uUh-au.css","./xframelib-exp-BhjES3Zs.js","./axios-exp-C7rfqWEd.js","./vendor--wirEDCR.js","./vendor-DCpwJf6Q.css","./@iconify/vue-exp-B_wUckqc.js","./xframelib-exp-254NBRTd.css","./vue-router-exp-BSdmxD3c.js","./SystemsEvent-CkjXkOdI.js","./defaultLayout-CpMcDPNp.css","./MakedownShow-B-8N9Bfc.js","./404-BTtZ8LLq.js","./404-BgZbMdPa.css","./index-CzDvSfxj.js","./initXframe-CmWBs6Rc.js"])))=>i.map(i=>d[i]);
import{d as G,H as K,w as Q,e as J,i as X,V as Z,N as ee,a1 as te,n as oe,m as ne,c as re}from"./@vue-exp-RtJr_9pC.js";import{e as I,f as se,t as m}from"./vendor--wirEDCR.js";import{s as ie,d as ae,r as ce,b as le,l as ue,D as de,P as fe,e as pe,N as he}from"./quasar-exp-DKoj9TJe.js";import{W as d,E as me,k as ge,b as P,d as ve,c as D,p as ye,m as $,y as W,a as B,h as _e,n as Se,o as we}from"./xframelib-exp-BhjES3Zs.js";import{i as Re,c as Ee,a as be}from"./vue-router-exp-BSdmxD3c.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-B_wUckqc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const ke="modulepreload",Ce=function(e,t){return new URL(e,t).href},H={},S=function(t,o,s){let n=Promise.resolve();if(o&&o.length>0){const i=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),a=c?.nonce||c?.getAttribute("nonce");n=Promise.allSettled(o.map(l=>{if(l=Ce(l,s),l in H)return;H[l]=!0;const f=l.endsWith(".css"),v=f?'[rel="stylesheet"]':"";if(!!s)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===l&&(!f||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${v}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":ke,f||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),f)return new Promise((u,h)=>{p.addEventListener("load",u),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return n.then(i=>{for(const c of i||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},Ie={SatusMessage:"statusmessage",LoadingMessage:"loadingMessage"};function Le(e,t){d.EventBus.on(e,t)}function Pe(e,t){d.EventBus.off(e,t)}function Rt(e,t){d.EventBus.emit(e,t)}function He(e){d.EventBus.emit(Ie.SatusMessage,e)}let A=!1;function T(e="end"){if(e==="end")setTimeout(()=>{document.getElementById("apploading")?.remove()},300),A=!0;else if(e)if(A){const t=`加载Widget：${e}……`;He(t)}else{const t=document.getElementById("app-loading-info");t&&(t.innerHTML=`正在加载：${e}……`)}}const Ae=G({name:"App",setup(){function e(t){if(!t.isExceptionInfo){const o=`${t.message}
$${t.result}`;d.Message.warn(o)}d.Logger().warn(t,"请求错误")}K(()=>{d.Loading("App.vue")}),Q(()=>ve.isLock,t=>{d.Logger().debug("监听状态变化",t)}),J(()=>{me(),Le(P.AxiosRequestErrorEvent,e)}),X(()=>{ge(),Pe(P.AxiosRequestErrorEvent,e)})}}),Fe=(e,t)=>{const o=e.__vccOpts||e;for(const[s,n]of t)o[s]=n;return o};function Ne(e,t,o,s,n,r){const i=te("router-view");return Z(),ee(i)}const g=Fe(Ae,[["render",Ne]]);var M=(e=>(e.SIDEBAR="sidebar",e.MIX_SIDEBAR="mix-sidebar",e.MIX="mix",e.TOP_MENU="top-menu",e))(M||{}),V=(e=>(e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e.VERTICAL_RIGHT="vertical-right",e.INLINE="inline",e))(V||{});const Oe={leftDrawerOpen:!0,reloadFlag:!0,showTabMenu:!0,TabMenuHeight:30,showBreadCrumbs:!0,leftCollapsed:!1,overlayMenu:!1,layoutContentHeight:700,layoutContentWidth:600,showSettingButton:!0,openKeepAlive:!0,useErrorHandle:!1,showLogo:!0,showFooter:!1,footerHeight:20,headerSetting:{fixed:!0,show:!0,height:64,centerTitle:!0,showFullScreen:!0,showCollapseIcon:!0,showNotice:!0},menuSetting:{collapsed:!1,minWidth:48,menuWidth:250,accordion:!0,mode:V.HORIZONTAL,type:M.SIDEBAR}},y="PROJ_SETTINGS_KEY",_=new $("",sessionStorage),F={...Oe},xe=I("app",{state:()=>{_?.remove(y);const t=_.get(y)||F,o=t.headerSetting?.height??64,n=t.showFooter?t.footerHeight:0;t.layoutContentHeight=document.body.clientHeight-n-o,t.leftCollapsed=t.menuSetting?.collapsed;let r=0;return t.leftCollapsed?r=t.menuSetting?.minWidth:r=t.menuSetting?.menuWidth??250,t.layoutContentWidth=document.body.clientWidth-r,t},getters:{layoutHeaderHeight(e){return e.headerSetting.height??64},layoutFooterHeight(e){return e.showFooter?e.footerHeight:0},layoutSiderWidth(e){return!e.menuSetting||!e.menuSetting.show?0:e.menuSetting.collapsed?e.menuSetting.minWidth:e.menuSetting.menuWidth??250}},actions:{async reloadPage(e=0){this.reloadFlag=!1,await oe(),e?setTimeout(()=>{this.reloadFlag=!0},e):this.reloadFlag=!0},getCacheStore(){let e=_.get(y);return e||(e=F),e},saveCacheStore(){_.set(y,this.$state)},clear(){_?.remove(y)},setProjectConfig(e){e&&(ye(this.$state,e),this.saveCacheStore())},setMenuSetting(e){this.setProjectConfig({menuSetting:e})},toggleCollapse(){this.leftCollapsed=!this.leftCollapsed,this.menuSetting.collapsed=this.leftCollapsed,this.layoutContentWidth=document.body.clientWidth-this.layoutSiderWidth,this.saveCacheStore();const e=new Event("resize");window.dispatchEvent(e)},resizeHandler(){this.layoutContentWidth=document.body.clientWidth-this.layoutSiderWidth,this.layoutContentHeight=document.body.clientHeight-this.layoutFooterHeight-this.layoutHeaderHeight,this.saveCacheStore()}}});function qe(){xe().resizeHandler()}D.windowResizeHandler(qe);const De=I("asyncRoute",{state:()=>({menus:[],keepAliveComponents:[]}),getters:{},actions:{setRoutes(e){this.menus=e}}}),w="USER_SYS_KEY",R=new $("",sessionStorage),$e=I("user",{state:()=>R.get(w)||{},getters:{DefaultMaxRole(e){const t=e.roles?.[0];let o="普通用户";switch(t?.level){case 0:o="超级管理员";break;case 1:o="管理员";break;case 2:o="普通用户";break}return o},DefaultMaxRoleLevel(e){const t=e.roles?.[0];let o=-1;return t&&(o=t.level),o},AdminSystemList(e){const t=[];return e.roles?.forEach(o=>{(o.level===0||o.level===1)&&o.syslist&&o.syslist.forEach(s=>{t.findIndex(r=>r.id===s.id)<0&&t.push(s)})}),t}},actions:{init(e){this.id=e.id,this.name=e.name,this.doubletoken=e.doubletoken,this.roles=e.roles,this.bindid=e.bindid,R.set(w,{id:e.id,name:e.name,roles:e.roles})},getCurrentSystemRole(e){const t=this.roles;if(t){for(const o of t)if(o.syslist?.find(n=>n.id===e))return o}},clear(){this.id=void 0,this.name=void 0,this.doubletoken=void 0,this.roles=void 0,this.bindid=void 0,R.remove(w),W(),B()}}}),E=ie(()=>(T("PiniaStore"),se())),We={path:"/",name:"DefaultLayout",component:()=>S(()=>import("./defaultLayout-tIUk_UHE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url),redirect:"/markdown",meta:{title:"",keepAlive:!0},children:[{path:"markdown",name:"markdown",component:()=>S(()=>import("./MakedownShow-B-8N9Bfc.js"),__vite__mapDeps([13,6,2,1,3,7,4,5,8,9,10,11]),import.meta.url),meta:{index:1,title:"Makedown阅读",icon:"ant-design:file-markdown-outlined"}}]},N="error",Be={path:"/:pathMatch(.*)*",name:"NotFound",meta:{index:99,title:"不存在",hidden:!0,isSystem:!0}},Te={path:"/error",name:N,redirect:"/error/404",meta:{index:80,title:"错误页",hidden:!0,isSystem:!0},children:[{path:"404",name:`${N}-404`,meta:{title:"404",hidden:!0,isSystem:!0},component:()=>S(()=>import("./404-BTtZ8LLq.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,15]),import.meta.url)}]},Me=[Be,Te],Ve=[{path:"/redirect/:path*",name:"Redirect",component:{},meta:{index:70,title:"重定向",icon:"SettingOutlined",hidden:!0,isSystem:!0},children:[{path:"",name:"Redirect2",component:()=>S(()=>import("./index-CzDvSfxj.js"),__vite__mapDeps([16,10,2]),import.meta.url),meta:{title:"重定向",hidden:!0,keepAlive:!1}}]}],Ue="vue-widget-quasar-clivite-template",je="0.0.1",Ye="2025-01-03,a vue widget quasar-cli vite  project",ze="vue-widget-quasar-clivite-template",Ge="zorrowm <zorrowm@126.com>",Ke="module",Qe={lint:"eslint --fix --ext .ts,.vue ./",format:'prettier --write "**/*.{ts,vue,scss,html,md,json}" --ignore-path .gitignore',dev:"cross-env DEBUG=vite:deps VITE_CJS_IGNORE_WARNING=true  quasar dev",build:"quasar build","build:pwa":"quasar build -m pwa",clean:"quasar clean && rimraf components.d.ts package-lock.json pnpm-lock.yaml && rimraf node_modules/.q-cache"},Je={"@quasar/extras":"^1.16.15","@quasar/quasar-ui-qmarkdown":"^2.0.2","@vueuse/core":"^12.2.0",nprogress:"1.0.0-1",pinia:"^2.3.0",quasar:"^2.17.5",vue:"^3.5.13","vue-router":"^4.5.0","vue-types":"^5.1.3",xframelib:"^0.9.0"},Xe={"@iconify/vue":"^4.2.0","@quasar/app-vite":"2.0.4","@rollup/plugin-alias":"^5.1.1","@types/node":"^22.10.2","@types/nprogress":"^0.2.3","@typescript-eslint/eslint-plugin":"^8.18.2","@typescript-eslint/parser":"^8.18.2","@vue-macros/volar":"^0.30.8","@vue/compiler-sfc":"^3.5.13",autoprefixer:"^10.4.20","cross-env":"^7.0.3",dotenv:"^16.4.7",eslint:"^9.17.0","eslint-config-prettier":"^9.1.0","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-vue":"^9.32.0",prettier:"^3.4.2",prismjs:"^1.29.0",rimraf:"^6.0.1","rollup-plugin-visualizer":"^5.13.1",sass:"^1.83.0",typescript:"^5.7.2","unplugin-vue-components":"^0.28.0","vite-plugin-commonjs":"^0.10.4","vite-plugin-vue-inspector":"^5.3.1","vite-plugin-webworker-service":"^1.1.0","vite-tsconfig-paths":"^5.1.4"},Ze={node:"^24 || ^22 || ^20 || ^18",npm:">= 6.13.4",yarn:">= 1.21.1"},et={name:Ue,version:je,description:Ye,productName:ze,author:Ge,type:Ke,private:!0,scripts:Qe,dependencies:Je,devDependencies:Xe,engines:Ze},{name:tt,version:ot}=et,U={pkg:{name:tt,version:ot},lastBuildTime:ae.formatDate("YYYY-MM-DD HH:mm:ss")};function Et(){const{pkg:e}=U,t=`${e.name}_${e.version}`;return D.MD5(t)}function bt(){const{pkg:e}=U;return e}function nt(e){const t=[];let o=[];return Object.keys(e).forEach(s=>{const n=e[s];n&&o.push(...n)}),o=o.sort((s,n)=>{let r=0,i=0;return s.meta&&(s.meta.index!=null?r=Number(s.meta.index):r=100),n.meta&&(n.meta.index!=null?i=Number(n.meta.index):i=100),r-i}),t.push(...o),o.length=0,t}const rt=Object.assign({"./error.ts":Me,"./redirect.ts":Ve}),st=nt(rt);m.configure({showSpinner:!1});const O="/login",it="/";function at(e){const t=d.Config.UI?.SiteTitle;return e?`${e} - ${t}`:`${t}`}function x(e){return e==="NotFound"?!1:j(C,e)}function j(e,t){let o=!1;const s=e.length;for(let n=0;n<s;n++){const r=e[n];if(o=r.name==t,o)break;if(r.children&&(o=j(r.children,t),o))break}return o}function Y(e,t,o=""){let s=!1;const n=e.length;for(let r=0;r<n;r++){const i=e[r];let c=i.path;if(c.startsWith("/")||(c=`${o}/${c}`),s=c==t,s)break;if(t.startsWith(c)&&i.children&&(s=Y(i.children,t,c),s))break}return s}function ct(e){let t="";e.beforeEach((o,s,n)=>{m.start();const r=o.name;t=o.path;const i=$e();if(r==="NotFound"&&!Y(z,t)){n({path:"/error",query:{url:o.path}});return}if(_e()){const a=Se();if(!d.User&&i.id&&(we(),r==="NotFound"&&a&&a.routes&&a.routes.length>0))return;if(r==="login")n({path:it}),m.done();else{const l=e.hasRoute(r);(x(r)||l)&&(!a&&r==="NotFound"?(W(),B(),n({path:O,query:{redirect:o.fullPath},replace:!0})):n(),m.done())}}else if(!o.query?.tk?.toString())if(x(r))n(),breadcrumbsState.setBreadcurmbs(o.matched,o.query);else{const l=d.Config.ServiceURL.UILoginURL;if(l){const f=document.URL;window.open(l+"?redirect="+f,"_self")}else n({path:O,query:{redirect:o.fullPath},replace:!0});m.done()}}),e.afterEach((o,s,n)=>{const r=De();if(document.title=at(o.meta.title),Re(n)){d.Logger().debug("failed navigation",n);return}const i=r.keepAliveComponents,c=o.matched.find(a=>a.name==o.name)?.components?.default.name;if(c&&!i?.includes(c)&&o.meta?.keepAlive)i.push(c);else if(!o.meta?.keepAlive||o.name=="Redirect"){const a=r.keepAliveComponents.findIndex(l=>l==c);a!=-1&&i?.splice(a,1)}m.done()}),e.onError(o=>{d.Logger().debug(o,"路由错误"),d.Message.warn("加载视图错误:"+o.message)})}T("Router路由");const z=[We],C=[...st],lt=d.Config.UI.IsNoLogin?[...z,...C]:C,b=ce(function(){const t=Ee({scrollBehavior:()=>({left:0,top:0}),routes:lt,history:be("/./")});return d.Config.UI?.IsNoLogin||ct(t),t});async function ut(e,t){const o=e(g);o.use(le,t);const s=typeof E=="function"?await E({}):E;o.use(s);const n=ne(typeof b=="function"?await b({store:s}):b);return s.use(({store:r})=>{r.router=n}),{app:o,store:s,router:n}}const dt={config:{},lang:ue,plugins:{Dialog:de,AppFullscreen:fe,Loading:pe,Notify:he}};let k=typeof g.preFetch=="function"?g.preFetch:g.__c!==void 0&&typeof g.__c.preFetch=="function"?g.__c.preFetch:!1;function q(e,t){const o=e?e.matched?e:t.resolve(e).route:t.currentRoute.value;if(!o)return[];const s=o.matched.filter(n=>n.components!==void 0);return s.length===0?[]:Array.prototype.concat.apply([],s.map(n=>Object.keys(n.components).map(r=>{const i=n.components[r];return{path:n.path,c:i}})))}function ft({router:e,store:t,publicPath:o}){e.beforeResolve((s,n,r)=>{const i=window.location.href.replace(window.location.origin,""),c=q(s,e),a=q(n,e);let l=!1;const f=c.filter((u,h)=>l||(l=!a[h]||a[h].c!==u.c||u.path.indexOf("/:")>-1)).filter(u=>u.c!==void 0&&(typeof u.c.preFetch=="function"||u.c.__c!==void 0&&typeof u.c.__c.preFetch=="function")).map(u=>u.c.__c!==void 0?u.c.__c.preFetch:u.c.preFetch);if(k!==!1&&(f.unshift(k),k=!1),f.length===0)return r();let v=!1;const L=u=>{v=!0,r(u)},p=()=>{v===!1&&r()};f.reduce((u,h)=>u.then(()=>v===!1&&h({store:t,currentRoute:s,previousRoute:n,redirect:L,urlPath:i,publicPath:o})),Promise.resolve()).then(p).catch(u=>{p()})})}const pt="/./";async function ht({app:e,router:t,store:o},s){let n=!1;const r=a=>{try{return t.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(n=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l,window.location.reload())},c=window.location.href.replace(window.location.origin,"");for(let a=0;n===!1&&a<s.length;a++)try{await s[a]({app:e,router:t,store:o,ssrContext:null,redirect:i,urlPath:c,publicPath:pt})}catch(l){if(l&&l.url){i(l.url);return}return}n!==!0&&(e.use(t),ft({router:t,store:o}),e.mount("#q-app"))}ut(re,dt).then(e=>{const[t,o]=Promise.allSettled!==void 0?["allSettled",s=>s.map(n=>{if(n.status!=="rejected")return n.value.default})]:["all",s=>s.map(n=>n.default)];return Promise[t]([S(()=>import("./initXframe-CmWBs6Rc.js"),__vite__mapDeps([17,1,2,3,8,4,5,6,7,9,10]),import.meta.url)]).then(s=>{const n=o(s).filter(r=>typeof r=="function");ht(e,n)})});export{T as E,Le as O,S as _,bt as a,xe as b,Fe as c,Rt as d,Pe as e,Et as g};
