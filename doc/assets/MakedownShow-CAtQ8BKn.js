import{Q as E}from"./vendor--wirEDCR.js";import{f as A}from"./xframelib-exp-BhjES3Zs.js";import{w as y,m as C,x as I,a as L,y as q}from"./quasar-exp-DKoj9TJe.js";import{d as D,r as g,e as M,i as B,q as O,b as Q,V as b,N as k,O as v,u as T,K as P,Z as S,k as R,j as $,y as H,w as F}from"./@vue-exp-RtJr_9pC.js";import{u as x,b as N}from"./vue-router-exp-BSdmxD3c.js";import{O as U,e as V}from"./index-BbXRCyuh.js";import{m as j,S as _}from"./SystemsEvent-CkjXkOdI.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-B_wUckqc.js";async function K(w){const f=/^#*$/,u=w.split(`
`),a=[];let l=!1;for(const r of u){const n=r;if(n){if(n.startsWith("```")){l=!l;continue}if(!l&&n[0]==="#"){const s=n.indexOf("# ");if(s>=0){const i=n.substring(0,s+1);if(f.test(i)){const c=n.substring(s+2).trim(),p=c.toLocaleLowerCase().replaceAll(" ","-"),t={id:encodeURI(p),level:s,label:c};a.push(t)}}}}}return a}const W=D({name:"BaseContent",__name:"BaseContent",props:{contentActiveStyle:{default:""},scrollable:{type:Boolean,default:!1},padding:{type:Boolean,default:!1},updateScroll:{}},setup(w,{expose:f}){const u={right:"2px",borderRadius:"3px",width:"7px"},a=w,l=x(),r=g(null),n=g(""),s=g(!1),i=(t,e=0)=>{r.value?.setScrollPosition("vertical",t,e)},c=()=>r.value?.getScrollPosition(),p=t=>{t.verticalPercentage>=.1?s.value=!0:s.value=!1,a.updateScroll&&a.updateScroll(t)},o=()=>{i(0,300)};return M(()=>{n.value=l.fullPath;const t=y.getItem(n.value);t&&i(t.top)}),B(()=>{y.remove(n.value)}),O(()=>{const t=y.getItem(l.fullPath);t&&i(t.top)}),Q(()=>{const t=c();y.set(n.value,t)}),f({scrollToPosition:i}),(t,e)=>(b(),k(q,{class:"fit page",padding:t.padding},{default:v(()=>[t.scrollable?(b(),k(T(C),{key:0,ref_key:"scrollArea",ref:r,"thumb-style":u,visible:!1,style:{height:"100%"},"content-active-style":t.contentActiveStyle,onScroll:p},{default:v(()=>[P(t.$slots,"default")]),_:3},8,["content-active-style"])):P(t.$slots,"default",{key:1}),S(I,{position:"bottom-right",offset:[18,18]},{default:v(()=>[S(R,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:v(()=>[$(S(L,{color:"primary",fab:"",padding:"10px",icon:"expand_less",onClick:o},null,512),[[H,s.value]])]),_:1})]),_:1})]),_:3},8,["padding"]))}}),nt=D({__name:"MakedownShow",setup(w){const f=g(),u=g(""),a=j(),l=x(),r=N();F(()=>l.query,o=>{o.id&&s()},{deep:!0});function n(){let o="";if(window.MDList&&window.MDList.length>0){const t=window.MDList[0];if(t.children&&t.children.length>0){const e=t.children[0];e&&(e.children&&e.children.length>0?o=e.children[0].name:o=e.name)}else o=t.name}return o}function s(){if(!window.MDList||window.MDList.length===0)return;const o=l.query.id;if(o){const t=c(o,window.MDList);t&&A(t).then(e=>{u.value=e.data,a.toc=[],K(e.data).then(m=>{a.toc=m})})}}function i({verticalPosition:o}){const t=a.toc;let e;for(const m in t){const h=t[m],d=document.getElementById(h.id);if(d!==null&&d.offsetTop>=o){e===void 0&&(e=h.id);break}}e!==void 0&&(a.activeToc=e)}M(()=>{if(U(_.ScrollPositionEvent,p),!l.query.id){const t=n();t&&r.push({path:"/markdown",query:{id:t}});return}s()});function c(o,t){let e;if(t){const m=t.length;for(let h=0;h<m;h++){const d=t[h];if(d.children){if(e=c(o,d.children),e)break}else if(d.name===o){e=d.path;break}}}return e}function p(o){const t=document.getElementById(o);if(t){const e=t.offsetTop;f.value.scrollToPosition(e,200)}}return B(()=>{V(_.ScrollPositionEvent,p)}),(o,t)=>(b(),k(W,{class:"q-pa-md",scrollable:"",ref_key:"baseScrollRef",ref:f,updateScroll:i},{default:v(()=>[S(T(E),{src:u.value},null,8,["src"])]),_:1},512))}});export{nt as default};
