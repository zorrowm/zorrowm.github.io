import{Q as E}from"./vendor--wirEDCR.js";import{f as M}from"./xframelib-exp-BhjES3Zs.js";import{w as g,m as A,x as C,a as D,y as I}from"./quasar-exp-DKoj9TJe.js";import{d as _,r as v,e as k,i as B,q as O,b as Q,V as y,N as b,O as m,u as T,K as w,Z as S,k as R,j as q,y as $,w as H}from"./@vue-exp-RtJr_9pC.js";import{u as x}from"./vue-router-exp-BSdmxD3c.js";import{O as L,e as N}from"./index-Ctu8kwOr.js";import{m as U,S as P}from"./SystemsEvent-CkjXkOdI.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-B_wUckqc.js";async function V(h){const d=/^#*$/,p=h.split(`
`),l=[];let i=!1;for(const f of p){const a=f;if(a){if(a.startsWith("```")){i=!i;continue}if(!i&&a[0]==="#"){const s=a.indexOf("# ");if(s>=0){const c=a.substring(0,s+1);if(d.test(c)){const e=a.substring(s+2).trim(),o=e.toLocaleLowerCase().replaceAll(" ","-"),t={id:encodeURI(o),level:s,label:e};l.push(t)}}}}}return l}const j=_({name:"BaseContent",__name:"BaseContent",props:{contentActiveStyle:{default:""},scrollable:{type:Boolean,default:!1},padding:{type:Boolean,default:!1},updateScroll:{}},setup(h,{expose:d}){const p={right:"2px",borderRadius:"3px",width:"7px"},l=h,i=x(),f=v(null),a=v(""),s=v(!1),c=(t,r=0)=>{f.value?.setScrollPosition("vertical",t,r)},e=()=>f.value?.getScrollPosition(),o=t=>{t.verticalPercentage>=.1?s.value=!0:s.value=!1,l.updateScroll&&l.updateScroll(t)},n=()=>{c(0,300)};return k(()=>{a.value=i.fullPath;const t=g.getItem(a.value);t&&c(t.top)}),B(()=>{g.remove(a.value)}),O(()=>{const t=g.getItem(i.fullPath);t&&c(t.top)}),Q(()=>{const t=e();g.set(a.value,t)}),d({scrollToPosition:c}),(t,r)=>(y(),b(I,{class:"fit page",padding:t.padding},{default:m(()=>[t.scrollable?(y(),b(T(A),{key:0,ref_key:"scrollArea",ref:f,"thumb-style":p,visible:!1,style:{height:"100%"},"content-active-style":t.contentActiveStyle,onScroll:o},{default:m(()=>[w(t.$slots,"default")]),_:3},8,["content-active-style"])):w(t.$slots,"default",{key:1}),S(C,{position:"bottom-right",offset:[18,18]},{default:m(()=>[S(R,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:m(()=>[q(S(D,{color:"primary",fab:"",padding:"10px",icon:"expand_less",onClick:n},null,512),[[$,s.value]])]),_:1})]),_:1})]),_:3},8,["padding"]))}}),tt=_({__name:"MakedownShow",setup(h){const d=v(),p=v(""),l=U(),i=x();H(()=>i.query,e=>{e.id&&f()},{deep:!0});function f(){const e=i.query.id;if(e&&window.MDList){const o=s(e,window.MDList);o&&M(o).then(n=>{p.value=n.data,V(n.data).then(t=>{l.toc=t})})}}function a({verticalPosition:e}){const o=l.toc;let n;for(const t in o){const r=o[t],u=document.getElementById(r.id);if(u!==null&&u.offsetTop>=e){n===void 0&&(n=r.id);break}}n!==void 0&&(l.activeToc=n)}k(()=>{f(),L(P.ScrollPositionEvent,c)});function s(e,o){let n;if(o){const t=o.length;for(let r=0;r<t;r++){const u=o[r];if(u.children){if(n=s(e,u.children),n)break}else if(u.name===e){n=u.path;break}}}return n}function c(e){const o=document.getElementById(e);if(o){const n=o.offsetTop;d.value.scrollToPosition(n,200)}}return B(()=>{N(P.ScrollPositionEvent,c)}),(e,o)=>(y(),b(j,{class:"q-pa-md",scrollable:"",ref_key:"baseScrollRef",ref:d,updateScroll:a},{default:m(()=>[S(T(E),{src:p.value},null,8,["src"])]),_:1},512))}});export{tt as default};
