import{r as _n,d as Ie,o as q,b as Z,e as me,f as Ee,g as V,j as ge,k as Bn,l as He,T as Fn,m as Xr,q as rn,t as In,v as se,F as pe,x as Ce,a as te,c as fe,y as Ft,z as Gr,n as It,A as Kr,B as Vr,C as on,D as Yr,w as _e,E as Jr,G as he,H as st,I as an,J as Qr,K as Zr,L as eo,M as to,N as no,O as ro}from"./vendor.de069ad6.js";import{W as oo}from"./axios-exp.cd5cf947.js";const io=Object.prototype.toString;function Ke(e,t){return io.call(e)===`[object ${t}]`}function ao(e){return Ke(e,"Function")}const Lt=e=>e!=null&&e!==null&&Ke(e,"Object");function oi(e){return Ke(e,"Number")}function Ln(e){return Ke(e,"String")}function so(e){return e&&Array.isArray(e)}var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(w,s){var f=w[0],d=w[1],l=w[2],g=w[3];d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&l|~d&g)+s[0]-680876936|0)<<7|f>>>25)+d|0)&d|~f&l)+s[1]-389564586|0)<<12|g>>>20)+f|0)&f|~g&d)+s[2]+606105819|0)<<17|l>>>15)+g|0)&g|~l&f)+s[3]-1044525330|0)<<22|d>>>10)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&l|~d&g)+s[4]-176418897|0)<<7|f>>>25)+d|0)&d|~f&l)+s[5]+1200080426|0)<<12|g>>>20)+f|0)&f|~g&d)+s[6]-1473231341|0)<<17|l>>>15)+g|0)&g|~l&f)+s[7]-45705983|0)<<22|d>>>10)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&l|~d&g)+s[8]+1770035416|0)<<7|f>>>25)+d|0)&d|~f&l)+s[9]-1958414417|0)<<12|g>>>20)+f|0)&f|~g&d)+s[10]-42063|0)<<17|l>>>15)+g|0)&g|~l&f)+s[11]-1990404162|0)<<22|d>>>10)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&l|~d&g)+s[12]+1804603682|0)<<7|f>>>25)+d|0)&d|~f&l)+s[13]-40341101|0)<<12|g>>>20)+f|0)&f|~g&d)+s[14]-1502002290|0)<<17|l>>>15)+g|0)&g|~l&f)+s[15]+1236535329|0)<<22|d>>>10)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&g|l&~g)+s[1]-165796510|0)<<5|f>>>27)+d|0)&l|d&~l)+s[6]-1069501632|0)<<9|g>>>23)+f|0)&d|f&~d)+s[11]+643717713|0)<<14|l>>>18)+g|0)&f|g&~f)+s[0]-373897302|0)<<20|d>>>12)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&g|l&~g)+s[5]-701558691|0)<<5|f>>>27)+d|0)&l|d&~l)+s[10]+38016083|0)<<9|g>>>23)+f|0)&d|f&~d)+s[15]-660478335|0)<<14|l>>>18)+g|0)&f|g&~f)+s[4]-405537848|0)<<20|d>>>12)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&g|l&~g)+s[9]+568446438|0)<<5|f>>>27)+d|0)&l|d&~l)+s[14]-1019803690|0)<<9|g>>>23)+f|0)&d|f&~d)+s[3]-187363961|0)<<14|l>>>18)+g|0)&f|g&~f)+s[8]+1163531501|0)<<20|d>>>12)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d&g|l&~g)+s[13]-1444681467|0)<<5|f>>>27)+d|0)&l|d&~l)+s[2]-51403784|0)<<9|g>>>23)+f|0)&d|f&~d)+s[7]+1735328473|0)<<14|l>>>18)+g|0)&f|g&~f)+s[12]-1926607734|0)<<20|d>>>12)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d^l^g)+s[5]-378558|0)<<4|f>>>28)+d|0)^d^l)+s[8]-2022574463|0)<<11|g>>>21)+f|0)^f^d)+s[11]+1839030562|0)<<16|l>>>16)+g|0)^g^f)+s[14]-35309556|0)<<23|d>>>9)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d^l^g)+s[1]-1530992060|0)<<4|f>>>28)+d|0)^d^l)+s[4]+1272893353|0)<<11|g>>>21)+f|0)^f^d)+s[7]-155497632|0)<<16|l>>>16)+g|0)^g^f)+s[10]-1094730640|0)<<23|d>>>9)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d^l^g)+s[13]+681279174|0)<<4|f>>>28)+d|0)^d^l)+s[0]-358537222|0)<<11|g>>>21)+f|0)^f^d)+s[3]-722521979|0)<<16|l>>>16)+g|0)^g^f)+s[6]+76029189|0)<<23|d>>>9)+l|0,d=((d+=((l=((l+=((g=((g+=((f=((f+=(d^l^g)+s[9]-640364487|0)<<4|f>>>28)+d|0)^d^l)+s[12]-421815835|0)<<11|g>>>21)+f|0)^f^d)+s[15]+530742520|0)<<16|l>>>16)+g|0)^g^f)+s[2]-995338651|0)<<23|d>>>9)+l|0,d=((d+=((g=((g+=(d^((f=((f+=(l^(d|~g))+s[0]-198630844|0)<<6|f>>>26)+d|0)|~l))+s[7]+1126891415|0)<<10|g>>>22)+f|0)^((l=((l+=(f^(g|~d))+s[14]-1416354905|0)<<15|l>>>17)+g|0)|~f))+s[5]-57434055|0)<<21|d>>>11)+l|0,d=((d+=((g=((g+=(d^((f=((f+=(l^(d|~g))+s[12]+1700485571|0)<<6|f>>>26)+d|0)|~l))+s[3]-1894986606|0)<<10|g>>>22)+f|0)^((l=((l+=(f^(g|~d))+s[10]-1051523|0)<<15|l>>>17)+g|0)|~f))+s[1]-2054922799|0)<<21|d>>>11)+l|0,d=((d+=((g=((g+=(d^((f=((f+=(l^(d|~g))+s[8]+1873313359|0)<<6|f>>>26)+d|0)|~l))+s[15]-30611744|0)<<10|g>>>22)+f|0)^((l=((l+=(f^(g|~d))+s[6]-1560198380|0)<<15|l>>>17)+g|0)|~f))+s[13]+1309151649|0)<<21|d>>>11)+l|0,d=((d+=((g=((g+=(d^((f=((f+=(l^(d|~g))+s[4]-145523070|0)<<6|f>>>26)+d|0)|~l))+s[11]-1120210379|0)<<10|g>>>22)+f|0)^((l=((l+=(f^(g|~d))+s[2]+718787259|0)<<15|l>>>17)+g|0)|~f))+s[9]-343485551|0)<<21|d>>>11)+l|0,w[0]=f+w[0]|0,w[1]=d+w[1]|0,w[2]=l+w[2]|0,w[3]=g+w[3]|0}function r(w){var s,f=[];for(s=0;s<64;s+=4)f[s>>2]=w.charCodeAt(s)+(w.charCodeAt(s+1)<<8)+(w.charCodeAt(s+2)<<16)+(w.charCodeAt(s+3)<<24);return f}function u(w){var s,f=[];for(s=0;s<64;s+=4)f[s>>2]=w[s]+(w[s+1]<<8)+(w[s+2]<<16)+(w[s+3]<<24);return f}function c(w){var s,f,d,l,g,R,F=w.length,D=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=F;s+=64)n(D,r(w.substring(s-64,s)));for(f=(w=w.substring(s-64)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0;s<f;s+=1)d[s>>2]|=w.charCodeAt(s)<<(s%4<<3);if(d[s>>2]|=128<<(s%4<<3),s>55)for(n(D,d),s=0;s<16;s+=1)d[s]=0;return l=(l=8*F).toString(16).match(/(.*?)(.{0,8})$/),g=parseInt(l[2],16),R=parseInt(l[1],16)||0,d[14]=g,d[15]=R,n(D,d),D}function h(w){var s,f,d,l,g,R,F=w.length,D=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=F;s+=64)n(D,u(w.subarray(s-64,s)));for(f=(w=s-64<F?w.subarray(s-64):new Uint8Array(0)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0;s<f;s+=1)d[s>>2]|=w[s]<<(s%4<<3);if(d[s>>2]|=128<<(s%4<<3),s>55)for(n(D,d),s=0;s<16;s+=1)d[s]=0;return l=(l=8*F).toString(16).match(/(.*?)(.{0,8})$/),g=parseInt(l[2],16),R=parseInt(l[1],16)||0,d[14]=g,d[15]=R,n(D,d),D}function y(w){var s,f="";for(s=0;s<4;s+=1)f+=t[w>>8*s+4&15]+t[w>>8*s&15];return f}function b(w){var s;for(s=0;s<w.length;s+=1)w[s]=y(w[s]);return w.join("")}function C(w){return/[\u0080-\uFFFF]/.test(w)&&(w=unescape(encodeURIComponent(w))),w}function x(w,s){var f,d=w.length,l=new ArrayBuffer(d),g=new Uint8Array(l);for(f=0;f<d;f+=1)g[f]=w.charCodeAt(f);return s?g:l}function S(w){return String.fromCharCode.apply(null,new Uint8Array(w))}function k(w,s,f){var d=new Uint8Array(w.byteLength+s.byteLength);return d.set(new Uint8Array(w)),d.set(new Uint8Array(s),w.byteLength),f?d:d.buffer}function T(w){var s,f=[],d=w.length;for(s=0;s<d-1;s+=2)f.push(parseInt(w.substr(s,2),16));return String.fromCharCode.apply(String,f)}function B(){this.reset()}return b(c("hello")),typeof ArrayBuffer>"u"||ArrayBuffer.prototype.slice||function(){function w(s,f){return(s=0|s||0)<0?Math.max(s+f,0):Math.min(s,f)}ArrayBuffer.prototype.slice=function(s,f){var d,l,g,R,F=this.byteLength,D=w(s,F),O=F;return f!==e&&(O=w(f,F)),D>O?new ArrayBuffer(0):(d=O-D,l=new ArrayBuffer(d),g=new Uint8Array(l),R=new Uint8Array(this,D,d),g.set(R),l)}}(),B.prototype.append=function(w){return this.appendBinary(C(w)),this},B.prototype.appendBinary=function(w){this._buff+=w,this._length+=w.length;var s,f=this._buff.length;for(s=64;s<=f;s+=64)n(this._hash,r(this._buff.substring(s-64,s)));return this._buff=this._buff.substring(s-64),this},B.prototype.end=function(w){var s,f,d=this._buff,l=d.length,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<l;s+=1)g[s>>2]|=d.charCodeAt(s)<<(s%4<<3);return this._finish(g,l),f=b(this._hash),w&&(f=T(f)),this.reset(),f},B.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},B.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},B.prototype.setState=function(w){return this._buff=w.buff,this._length=w.length,this._hash=w.hash,this},B.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},B.prototype._finish=function(w,s){var f,d,l,g=s;if(w[g>>2]|=128<<(g%4<<3),g>55)for(n(this._hash,w),g=0;g<16;g+=1)w[g]=0;f=(f=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(f[2],16),l=parseInt(f[1],16)||0,w[14]=d,w[15]=l,n(this._hash,w)},B.hash=function(w,s){return B.hashBinary(C(w),s)},B.hashBinary=function(w,s){var f=b(c(w));return s?T(f):f},B.ArrayBuffer=function(){this.reset()},B.ArrayBuffer.prototype.append=function(w){var s,f=k(this._buff.buffer,w,!0),d=f.length;for(this._length+=w.byteLength,s=64;s<=d;s+=64)n(this._hash,u(f.subarray(s-64,s)));return this._buff=s-64<d?new Uint8Array(f.buffer.slice(s-64)):new Uint8Array(0),this},B.ArrayBuffer.prototype.end=function(w){var s,f,d=this._buff,l=d.length,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<l;s+=1)g[s>>2]|=d[s]<<(s%4<<3);return this._finish(g,l),f=b(this._hash),w&&(f=T(f)),this.reset(),f},B.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},B.ArrayBuffer.prototype.getState=function(){var w=B.prototype.getState.call(this);return w.buff=S(w.buff),w},B.ArrayBuffer.prototype.setState=function(w){return w.buff=x(w.buff,!0),B.prototype.setState.call(this,w)},B.ArrayBuffer.prototype.destroy=B.prototype.destroy,B.ArrayBuffer.prototype._finish=B.prototype._finish,B.ArrayBuffer.hash=function(w,s){var f=b(h(new Uint8Array(w)));return s?T(f):f},B}();const ct=[];class ne{static addHandler(t,n,r){t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent?t.attachEvent("on"+n,r):t["on"+n]=r}static windowResizeHandler(t){ne.addHandler(window,"resize",t)}static fullscreenEnabled(){const t=window.document;return document.fullscreenEnabled||window.fullScreen||t.mozFullscreenEnabled||t.webkitIsFullScreen}static fullScreen(t,n){if(n){const r=window.document;let u=window.document.exitFullscreen||r.msExitFullscreen||r.mozCancelFullScreen||r.webkitCancelFullScreen;typeof u<"u"&&u?u.call(window.document):typeof window.ActiveXObject<"u"&&new window.ActiveXObject("WScript.Shell")?.SendKeys("{F11}")}else{let r=t;r||(r=window.document.documentElement);let u=r.requestFullScreen||r.webkitRequestFullScreen||r.mozRequestFullScreen||r.msRequestFullScreen;typeof u<"u"&&u?u.call(r):typeof window.ActiveXObject<"u"&&new window.ActiveXObject("WScript.Shell")?.SendKeys("{F11}")}}static requestFullScreen(t=window.document.documentElement){let n=t;var r=n.requestFullScreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullScreen;if(r)r.call(n);else if(typeof window.ActiveXObject<"u"){var u=new window.ActiveXObject("WScript.Shell");u!==null&&u.SendKeys("{F11}")}}static exitFullScreen(){const t=window.document;var n=document.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.webkitExitFullscreen;if(n)n.call(document);else if(typeof window.ActiveXObject<"u"){var r=new window.ActiveXObject("WScript.Shell");r!==null&&r.SendKeys("{F11}")}}static fullScreenElement(){return window.document.fullscreenElement||window.document.webkitFullscreenElement||window.document.mozFullscreenElement||window.document.msFullscreenElement}static isFullScreen(){return!!ne.fullScreenElement()}static onFullScreenChanged(t){let n;"onfullscreenchange"in window.document?n="fullscreenchange":"onwebkitfullscreenchange"in window.document?n="webkitfullscreenchange":"onmozfullscreenchange"in window.document&&(n="mozfullscreenchange"),n?document.addEventListener(n,function(){const r=ne.isFullScreen();t(r)}):document.addEventListener("MSFullscreenChange",function(){const r=ne.isFullScreen();t(r)})}static stringifyCircularHandler(t,n){if(typeof n=="object"&&n!==null){if(ct.indexOf(n)!==-1)return;ct.push(n)}return n}static jsonStringify(t){if(!t)return"";const n=JSON.stringify(t,ne.stringifyCircularHandler);return ct.length=0,n}static jsonParse(t){const n=ne.jsonStringify(t);if(n.length>1)return JSON.parse(n)}static getObjectURL(t){let n;const r=window;return r.createObjcectURL!=null?n=r.createOjcectURL(t):window.URL!=null?n=window.URL.createObjectURL(t):window.webkitURL!=null&&(n=window.webkitURL.createObjectURL(t)),n}static getFileShortMD5(t,n){const r=File.prototype,u=r.slice||r.mozSlice||r.webkitSlice,c=t,h=2097152,y=new ut.ArrayBuffer,b=new FileReader;b.onload=function(C){y.append(C.target?.result);const x=y.end();n({isOK:!0,data:x})},b.onerror=function(){const C="\u8BA1\u7B97\u6587\u4EF6\u7B80\u5355\u6458\u8981\u9519\u8BEF\uFF01";console.warn(C),n({isOK:!1,data:C})},function(){const C=0+h>=c.size?c.size:0+h;b.readAsArrayBuffer(u.call(c,0,C))}()}static getFileMD5(t,n){const r=File.prototype,u=r.slice||r.mozSlice||r.webkitSlice,c=t,h=2097152,y=Math.ceil(c.size/h);let b=0;const C=new ut.ArrayBuffer,x=new FileReader;function S(){const k=b*h,T=k+h>=c.size?c.size:k+h;x.readAsArrayBuffer(u.call(c,k,T))}x.onload=function(k){if(C.append(k.target?.result),b++,b<y)S();else{const T=C.end();n({isOK:!0,data:T})}},x.onerror=function(){const k=`${c.name}:\u8BA1\u7B97\u6587\u4EF6\u7B80\u5355\u6458\u8981\u9519\u8BEF\uFF01`;console.warn(k),n({isOK:!1,data:k})},S()}static MD5(t,n=!1){return ut.hash(t,n)}static copyTextByCommand(t){return new Promise((n,r)=>{const u=document.createElement("input");u.value=t,document.body.appendChild(u),u.select(),document.execCommand("copy"),u.remove(),n(!0)})}static copyText=t=>navigator.clipboard?navigator.clipboard.writeText(t).then(function(){return!0},function(n){return!1}):ne.copyTextByCommand(t);static copyElementTextByCommand(t){const n=document.createRange();n.selectNode(document.getElementById(t));const r=window.getSelection();r.rangeCount>0&&r.removeAllRanges(),r.addRange(n);try{return document.execCommand("copy"),r.removeRange(n),!0}catch(u){return r.removeRange(n),console.error("Command\u590D\u5236\u6587\u672C\u9519\u8BEF",u),!1}}static copyElementText(t){if(!navigator.clipboard)return ne.copyElementTextByCommand(t);const n=document.createRange();n.selectNode(document.getElementById(t));const r=window.getSelection();return r.rangeCount>0&&r.removeAllRanges(),r.addRange(n),navigator.clipboard.writeText(r).then(function(){return r.removeRange(n),!0},function(u){return r.removeRange(n),console.error("Clipboard\u590D\u5236\u6587\u672C\u9519\u8BEF",u),!1})}static setGrayMode(t){ne.toggleClass(t,"grayMode",document.documentElement)}static toggleClass(t,n,r){const u=r||document.body;let{className:c}=u;c=c.replace(n,""),u.className=t?`${c} ${n} `:c}static setCssVar(t,n,r=document.documentElement){r.style.setProperty(t,n)}static dispatchWindowResize(){const t=new Event("resize");window.dispatchEvent(t)}static dispatchElementEvent(t,n="click",r){let u;if(u=Ln(t)?document.getElementById(t):t,u){const c=new Event(n,{bubbles:!0,cancelable:!0});r&&u.addEventListener("ev",h=>{r(h)},!1),u.dispatchEvent(c)}}}class Dn{static isNullOrEmpty=t=>t===null||t===""||t===void 0||t.length===0;static isNotEmpty=t=>!(t===null||t===""||t===void 0||t.length===0);static toHump(t){return t.replace(/[\-\/\_](\w)/g,(n,r)=>r.toUpperCase()).replace("views","")}}class Dt{prefixKey;storage;constructor(t="",n=localStorage){this.prefixKey=t,this.storage=n}getKey(t){return`${this.prefixKey}${t}`.toUpperCase()}set(t,n,r=604800){const u=JSON.stringify({value:n,expire:r!==null?new Date().getTime()+1e3*r:null});this.storage.setItem(this.getKey(t),u)}get(t,n=null){const r=this.storage.getItem(this.getKey(t));if(r)try{const u=JSON.parse(r),{value:c,expire:h}=u;if(h===null||h>=Date.now())return c;this.remove(this.getKey(t))}catch{return n}return n}getJsonObject(t){const n=this.storage.getItem(this.getKey(t));if(n)try{const r=JSON.parse(n);if(r.expire===null||r.expire>=Date.now())return r;this.remove(this.getKey(t))}catch{return}}remove(t){this.storage.removeItem(this.getKey(t))}clear(){this.storage.clear()}setCookie(t,n,r=604800){document.cookie=`${this.getKey(t)}=${n}; Max-Age=${r}`}getCookie(t){const n=document.cookie.split("; ");for(let r=0,u=n.length;r<u;r++){const c=n[r].split("=");if(c[0]===this.getKey(t))return c[1]}return""}removeCookie(t){this.setCookie(t,1,-1)}clearCookie(){const t=document.cookie.match(/[^ =;]+(?==)/g);if(t)for(let n=t.length;n--;)document.cookie=t[n]+"=0;expire="+new Date(0).toUTCString()}}new Dt("",localStorage);function bt(){let e=[];const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n=0;n<36;n++){const u=Math.floor(16*Math.random());e[n]=t.substring(u,u+1)}e[14]="4";const r=3&Number(e[19])|8;return e[19]=t.substring(r,r+1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}var sn;function uo(e){return{all:e=e||new Map,on(t,n){const r=e?.get(t);r&&r.push(n)||e?.set(t,[n])},off(t,n){const r=e?.get(t);r&&r.splice(r.indexOf(n)>>>0,1)},emit(t,n){(e?.get(t)||[]).slice().map(r=>{r(n)}),(e?.get("*")||[]).slice().map(r=>{r(t,n)})}}}(function(e){e[e.RGBA=0]="RGBA",e[e.Hex=1]="Hex",e[e.Hsla=2]="Hsla"})(sn||(sn={}));const Ve=uo(),re={HproseServiceErrorEvent:"HproseServiceError",WebAPIErrorEvent:"WebAPIError",AlertInfoEvent:"AlertInfoEvent",CommonWarnEvent:"CommonWarnEvent",WidgetLoadedEvent:"WidgetLoaded",WidgetUnLoadedEvent:"WidgetUnLoaded",WidgetVisibleChanged:"WidgetVisibleChanged",AxiosRequestErrorEvent:"AxiosRequestErrorEvent"},co=(e,t)=>{const n=document.createElement("a");n.download=t,n.style.display="none";const r=new Blob([e],{type:"application/octet-stream"});n.href=URL.createObjectURL(r),document.body.appendChild(n),n.click(),document.body.removeChild(n)},lo=(e,t)=>{const n=JSON.stringify(e,null,2);t?co(n,t+".json"):Ve.emit(re.CommonWarnEvent,"\u53C2\u6570JsonID\u4E0D\u80FD\u4E3A\u7A7A\uFF01")};var un,cn,lt,Ne={exports:{}};cn=ve,lt=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function u(B,w){var s=B[w];if(typeof s.bind=="function")return s.bind(B);try{return Function.prototype.bind.call(s,B)}catch{return function(){return Function.prototype.apply.apply(s,[B,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(B){return B==="debug"&&(B="log"),typeof console!==t&&(B==="trace"&&n?c:console[B]!==void 0?u(console,B):console.log!==void 0?u(console,"log"):e)}function y(B,w){for(var s=0;s<r.length;s++){var f=r[s];this[f]=s<B?e:this.methodFactory(f,B,w)}this.log=this.debug}function b(B,w,s){return function(){typeof console!==t&&(y.call(this,w,s),this[B].apply(this,arguments))}}function C(B,w,s){return h(B)||b.apply(this,arguments)}function x(B,w,s){var f,d=this;w=w??"WARN";var l="loglevel";function g(){var F;if(typeof window!==t&&l){try{F=window.localStorage[l]}catch{}if(typeof F===t)try{var D=window.document.cookie,O=D.indexOf(encodeURIComponent(l)+"=");O!==-1&&(F=/^([^;]+)/.exec(D.slice(O))[1])}catch{}return d.levels[F]===void 0&&(F=void 0),F}}typeof B=="string"?l+=":"+B:typeof B=="symbol"&&(l=void 0),d.name=B,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=s||C,d.getLevel=function(){return f},d.setLevel=function(F,D){if(typeof F=="string"&&d.levels[F.toUpperCase()]!==void 0&&(F=d.levels[F.toUpperCase()]),!(typeof F=="number"&&F>=0&&F<=d.levels.SILENT))throw"log.setLevel() called with invalid level: "+F;if(f=F,D!==!1&&function(O){var z=(r[O]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=z)}catch{}try{window.document.cookie=encodeURIComponent(l)+"="+z+";"}catch{}}}(F),y.call(d,F,B),typeof console===t&&F<d.levels.SILENT)return"No console available for logging"},d.setDefaultLevel=function(F){w=F,g()||d.setLevel(F,!1)},d.resetLevel=function(){d.setLevel(w,!1),function(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch{}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}()},d.enableAll=function(F){d.setLevel(d.levels.TRACE,F)},d.disableAll=function(F){d.setLevel(d.levels.SILENT,F)};var R=g();R==null&&(R=w),d.setLevel(R,!1)}var S=new x,k={};S.getLogger=function(B){if(typeof B!="symbol"&&typeof B!="string"||B==="")throw new TypeError("You must supply a name when creating a logger.");var w=k[B];return w||(w=k[B]=new x(B,S.getLevel(),S.methodFactory)),w};var T=typeof window!==t?window.log:void 0;return S.noConflict=function(){return typeof window!==t&&window.log===S&&(window.log=T),S},S.getLoggers=function(){return k},S.default=S,S},(un=Ne).exports?un.exports=lt():cn.log=lt();let ln=!1;const j={Config:SysConfig,EventBus:Ve,DefaultProxyClient:null,Axios:oo,Logger:e=>{ln||(SysConfig.UI.ProductLog?Ne.exports.enableAll():Ne.exports.setDefaultLevel("warn"),ln=!0);const t=e||"default";return Ne.exports.getLogger(t)}},kn="access_token",we=new Dt("user",localStorage);function Se(){return we.get(kn)}function Rn(){we.remove(kn)}function fo(){return Se()?.refresh}function kt(e,t,n,r="json",u){const c={baseURL:j.Config.ServiceURL.DefaultWebAPI,timeout:6e4,params:e,paramsSerializer:{serialize:function(h){return ro.stringify(h,{indices:!1,arrayFormat:"repeat"})}},headers:{"Content-Type":"application/json",Authorization:"bearer "+Se()?.token},responseType:r,cancelToken:u};if(n)for(let h in n)c.headers[h]=n[h];return j.SystemID&&(c.headers.sysid=j.SystemID,j.SystemGroup&&(c.headers.sysgroup=j.SystemGroup)),t&&(c.baseURL=t),c}function Le(e,t,n,r,u="json",c,h){const y=kt(n,t,r,u,c);return h&&h>=2e4&&(y.timeout=h),j.Axios?.get(e,y).catch(function(b){Rt(b,t,e,"Get")})}function Rt(e,t,n,r="Get"){const u=`${t}${n}`;if(e&&e.response){let c=!1;const h=e.response.status;switch(h){case 400:e.message="\u9519\u8BEF\u8BF7\u6C42";break;case 401:e.message="\u672A\u6388\u6743\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55";break;case 403:e.message="\u62D2\u7EDD\u8BBF\u95EE";break;case 404:e.message="\u8BF7\u6C42\u9519\u8BEF,\u672A\u627E\u5230\u8BE5\u8D44\u6E90";break;case 405:e.message="\u8BF7\u6C42\u65B9\u6CD5\u672A\u5141\u8BB8";break;case 408:e.message="\u8BF7\u6C42\u8D85\u65F6";break;case 500:const b=e.response.data;if(b){const C=b.indexOf(":"),x=b.indexOf(`
`);if(C>0&&x-C>2){const S=b.substring(C+2,x);S.indexOf("System.Exception")>0?e.message="\u540E\u53F0\u670D\u52A1\u5185\u90E8\u51FA\u9519\uFF01":(c=!0,e.message=S)}}else e.message="\u670D\u52A1\u5668\u7AEF\u51FA\u9519";break;case 501:e.message="\u7F51\u7EDC\u672A\u5B9E\u73B0";break;case 502:e.message="\u7F51\u7EDC\u9519\u8BEF";break;case 503:e.message="\u670D\u52A1\u4E0D\u53EF\u7528";break;case 504:e.message="\u7F51\u7EDC\u8D85\u65F6";break;case 505:e.message="http\u7248\u672C\u4E0D\u652F\u6301\u8BE5\u8BF7\u6C42";break;default:e.message=`\u8FDE\u63A5\u9519\u8BEF${e.response.status}`}let y={address:u,code:h,isExceptionInfo:c,message:e.message,result:e.response.data};if(j.EventBus.emit(re.AxiosRequestErrorEvent,y),c)throw new Error(e.message)}else{if(e?.message)throw new Error(e.message);console.error(e,"Http\u8BF7\u6C42\u9519\u8BEF!")}}function ii(e,t,n,r,u,c="json",h){const y=kt(r,t,u,c);h&&h>=2e4&&(y.timeout=h),y.headers["Content-Type"]="multipart/form-data";const b=function(C){let x=new FormData;return C&&Object.keys(C).forEach(S=>{if(!C)return;let k=C[S];k!=null&&(so(k)?k.forEach(T=>{x.append(S,dn(T))}):x.append(S,dn(k)))}),x}(n);return j.Axios?.post(e,b,y).catch(function(C){Rt(C,t,e,"Post")})}function ho(e,t,n,r,u,c="json",h){const y=kt(r,t,u,c);return h&&h>=2e4&&(y.timeout=h),j.Axios?.post(e,n,y).catch(function(b){Rt(b,t,e,"Post")})}function dn(e){return e instanceof Blob?e:e.toString()}var fn={exports:{}},po=typeof window<"u"?window:ve!==void 0?ve:typeof self<"u"?self:{},go=function(e){if(!e)return!1;var t=vo.call(e);return t==="[object Function]"||typeof e=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},vo=Object.prototype.toString,dt=function(e){return e.replace(/^\s+|\s+$/g,"")},yo=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)mo.call(n,r)&&(e[r]=n[r])}return e},mo=Object.prototype.hasOwnProperty,hn=po,wo=go,bo=function(e){if(!e)return{};for(var t,n={},r=dt(e).split(`
`),u=0;u<r.length;u++){var c=r[u],h=c.indexOf(":"),y=dt(c.slice(0,h)).toLowerCase(),b=dt(c.slice(h+1));n[y]===void 0?n[y]=b:(t=n[y],Object.prototype.toString.call(t)==="[object Array]"?n[y].push(b):n[y]=[n[y],b])}return n},Co=yo;function Mn(e,t,n){var r=e;return wo(t)?(n=t,typeof e=="string"&&(r={uri:e})):r=Co(t,{uri:e}),r.callback=n,r}function ue(e,t,n){return Tn(t=Mn(e,t,n))}function Tn(e){if(e.callback===void 0)throw new Error("callback argument missing");var t=!1,n=function(f,d,l){t||(t=!0,e.callback(f,d,l))};function r(){var f=void 0;if(f=b.response?b.response:b.responseText||function(d){try{if(d.responseType==="document")return d.responseXML;var l=d.responseXML&&d.responseXML.documentElement.nodeName==="parsererror";if(d.responseType===""&&!l)return d.responseXML}catch{}return null}(b),w)try{f=JSON.parse(f)}catch{}return f}function u(f){return clearTimeout(C),f instanceof Error||(f=new Error(""+(f||"Unknown XMLHttpRequest Error"))),f.statusCode=0,n(f,s)}function c(){if(!y){var f;clearTimeout(C),f=e.useXDR&&b.status===void 0?200:b.status===1223?204:b.status;var d=s,l=null;return f!==0?(d={body:r(),statusCode:f,method:S,headers:{},url:x,rawRequest:b},b.getAllResponseHeaders&&(d.headers=bo(b.getAllResponseHeaders()))):l=new Error("Internal XMLHttpRequest Error"),n(l,d,d.body)}}var h,y,b=e.xhr||null;b||(b=e.cors||e.useXDR?new ue.XDomainRequest:new ue.XMLHttpRequest);var C,x=b.url=e.uri||e.url,S=b.method=e.method||"GET",k=e.body||e.data,T=b.headers=e.headers||{},B=!!e.sync,w=!1,s={body:void 0,headers:{},statusCode:0,method:S,url:x,rawRequest:b};if("json"in e&&e.json!==!1&&(w=!0,T.accept||T.Accept||(T.Accept="application/json"),S!=="GET"&&S!=="HEAD"&&(T["content-type"]||T["Content-Type"]||(T["Content-Type"]="application/json"),k=JSON.stringify(e.json===!0?k:e.json))),b.onreadystatechange=function(){b.readyState===4&&setTimeout(c,0)},b.onload=c,b.onerror=u,b.onprogress=function(){},b.onabort=function(){y=!0},b.ontimeout=u,b.open(S,x,!B,e.username,e.password),B||(b.withCredentials=!!e.withCredentials),!B&&e.timeout>0&&(C=setTimeout(function(){if(!y){y=!0,b.abort("timeout");var f=new Error("XMLHttpRequest timeout");f.code="ETIMEDOUT",u(f)}},e.timeout)),b.setRequestHeader)for(h in T)T.hasOwnProperty(h)&&b.setRequestHeader(h,T[h]);else if(e.headers&&!function(f){for(var d in f)if(f.hasOwnProperty(d))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(b.responseType=e.responseType),"beforeSend"in e&&typeof e.beforeSend=="function"&&e.beforeSend(b),b.send(k||null),b}fn.exports=ue,fn.exports.default=ue,ue.XMLHttpRequest=hn.XMLHttpRequest||function(){},ue.XDomainRequest="withCredentials"in new ue.XMLHttpRequest?ue.XMLHttpRequest:hn.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){ue[e==="delete"?"del":e]=function(t,n,r){return(n=Mn(t,n,r)).method=e.toUpperCase(),Tn(n)}});class qe{hproseURL;client;hproseProxy;static httpTransport;constructor(t){if(t&&!Dn.isNullOrEmpty(t)){if(qe.httpTransport||(qe.httpTransport=new eo),this.client=new to(t),!this.client)throw Error("Hprose Client\u521D\u59CB\u5316\u9519\u8BEF");this.hproseURL=t,this.init()}}init(){this.client&&this.client.useServiceAsync().then(t=>{this.hproseProxy=t}).catch(t=>{String(t).indexOf("find this method ~")>0?(this.hproseProxy=this.client?.useService(),console.warn("\u65E7\u7248\u672C\u4E0D\u652F\u6301useServiceAsync")):Ve.emit(re.HproseServiceErrorEvent,"\u521D\u59CB\u5316\u9ED8\u8BA4Hprose!"),console.warn(t)})}async getProxy(){if(!this.hproseProxy)try{this.client&&(this.hproseProxy=await this.client.useServiceAsync())}catch(t){console.warn(t),this.hproseProxy=this.client?.useService()}return this.hproseProxy}async invoke(t,n,r){if(this.client)return await this.client.invoke(t,n,r)}encode(t,n,r){if(this.client)return this.client.codec.encode(t,n,r)}decode(t,n){if(this.client)return this.client.codec.decode(t,n)}}class Eo{hproseClient;hpProxyObj;defaultContext=new st;constructor(t){this.hproseClient=new qe(t),this.hpProxyObj=null}getClientContext(t,n){const r={};n&&(r.requestHeaders=n);const u=Se();r.httpRequestHeaders=t||{};const c=r.httpRequestHeaders;return u&&(c.token=u.token),j.SystemID&&(c.sysid=j.SystemID,j.SystemGroup&&(c.sysgroup=j.SystemGroup)),new st(r)}async getHproseProxy(){if(!this.hproseClient)throw new Error("HproseClient\u5BF9\u8C61\u4E3A\u6784\u5EFA\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5");if(!this.hpProxyObj){const t=await this.hproseClient.getProxy();this.hpProxyObj=t}return this.hpProxyObj||Ve.emit(re.HproseServiceErrorEvent,"HproseProxy\u5BF9\u8C61\u4E3A\u7A7A\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5\uFF01"),this.hpProxyObj}async hproseInvoke(t,n,r){if(!this.hproseClient)throw new Error("HproseClient\u5BF9\u8C61\u4E3A\u6784\u5EFA\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5");return await this.hproseClient.invoke(t,n,r)}async hproseInvokeContext(t,n,...r){if(!this.hproseClient)throw new Error("HproseClient\u5BF9\u8C61\u4E3A\u6784\u5EFA\uFF0C\u65E0\u6CD5\u8C03\u7528Hprose\u65B9\u6CD5");const u=Se();return console.log(u,"userToken3"),u&&(n||(n=new st({httpRequestHeaders:{token:u.token}}))),await this.hproseClient.invoke(t,r,n)}async hproseInvokeEncode(t){const n=new an(t).toBytes(),r=await this.hproseClient.client?.request(n,this.defaultContext);return r&&this.hproseClient.client?.codec.decode(r,this.defaultContext)}encodeRequest(t,...n){const r=this.hproseClient.client?.codec?.encode(t,n,this.defaultContext);return an.toString(r)}}class So{message;eventBus;constructor(t,n){t&&(this.message=t),n&&(this.eventBus=n)}msg(t,n=3,r="success"){if(this.message)if(typeof this.message=="function")this.message({type:r,message:t,duration:n});else switch(r){case"info":this.message.info(t,n);break;case"success":this.message.success(t,n);break;case"warning":this.message.warn?this.message.warn(t,n):this.message.warning&&this.message.warning(t,n);break;case"error":this.message.error(t,n)}else{switch(r){case"info":case"success":console.log(t);break;case"warning":console.warn(t);break;case"error":r="dark",console.error(t)}this.eventBus&&this.eventBus.emit(re.AlertInfoEvent,{type:r,info:t})}}info(t,n=3){this.msg(t,n,"info")}warn(t,n=3){this.msg(t,n,"warning")}err(t,n=3){this.msg(t,n,"error")}success(t,n=3){this.msg(t,n,"success")}}const ai=function(e,t,n){!j.Config.DefaultHproseAPI&&j.Config.ServiceURL&&(j.Config.DefaultHproseAPI=j.Config.ServiceURL.DefaultHproseAPI),j.Config.DefaultHproseAPI&&Dn.isNotEmpty(j.Config.DefaultHproseAPI)&&(j.DefaultProxyClient=new Eo(j.Config.DefaultHproseAPI));const r=j.Config.UI.GrayMode;r&&ne.setGrayMode(r);const u=new So(e,j.EventBus);j.Message=u,j.SystemID=t,j.SystemGroup=n,j.EventBus.on(re.HproseServiceErrorEvent,c=>{const h=`\u5F53\u524D\u540E\u53F0\u4E1A\u52A1\u670D\u52A1\u4E0D\u53EF\u7528!${c}`;console.warn("Hprose\u8BF7\u6C42\u9519\u8BEF",h)}),j.EventBus.on(re.WebAPIErrorEvent,c=>{const h=`WebAPI\u540E\u53F0\u670D\u52A1\u4E0D\u53EF\u7528!${c}`;console.warn("WebAPI\u8BF7\u6C42\u9519\u8BEF",h)}),j.EventBus.on(re.AxiosRequestErrorEvent,c=>{const h=`Http\u8BF7\u6C42'${c.code}'\u9519\u8BEF: ${c.message}`;console.warn("Http\u8BF7\u6C42\u9519\u8BEF",h)}),j.EventBus.on(re.CommonWarnEvent,c=>{u.warn(c)})},jn="is_LockScreen",pn=we.get(jn,!1),Be={isLock:pn,lockTime:pn=="true"?On():0};function gn(e){Be.isLock=e,we.set(jn,e,10),e&&(Rn(),console.log("\u9501\u5C4F\u4E86\u2026\u2026"))}function On(){let e=3600;return j.Config.UI?.LockTime&&j.Config.UI?.LockTime>=10&&(e=j.Config.UI.LockTime),e}let ft;function Ct(){clearInterval(ft),!(window.location.href.indexOf("/login")>0||Be.isLock)&&(gn(!1),Be.lockTime=On(),ft=setInterval(()=>{if(Be.lockTime--,Be.lockTime<=0)return gn(!0),clearInterval(ft)},1e3))}function si(){Ct(),document.addEventListener("mousedown",Ct)}function ui(){document.removeEventListener("mousedown",Ct)}function ht(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}(function e(t,n,r){function u(y,b){if(!n[y]){if(!t[y]){if(!b&&ht)return ht(y);if(c)return c(y,!0);var C=new Error("Cannot find module '"+y+"'");throw C.code="MODULE_NOT_FOUND",C}var x=n[y]={exports:{}};t[y][0].call(x.exports,function(S){var k=t[y][1][S];return u(k||S)},x,x.exports,e,t,n,r)}return n[y].exports}for(var c=ht,h=0;h<r.length;h++)u(r[h]);return u})({1:[function(e,t,n){(function(r){var u,c,h=r.MutationObserver||r.WebKitMutationObserver;if(h){var y=0,b=new h(k),C=r.document.createTextNode("");b.observe(C,{characterData:!0}),u=function(){C.data=y=++y%2}}else if(r.setImmediate||r.MessageChannel===void 0)u="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var B=r.document.createElement("script");B.onreadystatechange=function(){k(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},r.document.documentElement.appendChild(B)}:function(){setTimeout(k,0)};else{var x=new r.MessageChannel;x.port1.onmessage=k,u=function(){x.port2.postMessage(0)}}var S=[];function k(){var B,w;c=!0;for(var s=S.length;s;){for(w=S,S=[],B=-1;++B<s;)w[B]();s=S.length}c=!1}function T(B){S.push(B)!==1||c||u()}t.exports=T}).call(this,ve!==void 0?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,n){var r=e(1);function u(){}var c={},h=["REJECTED"],y=["FULFILLED"],b=["PENDING"];function C(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,l!==u&&T(this,l)}function x(l,g,R){this.promise=l,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function S(l,g,R){r(function(){var F;try{F=g(R)}catch(D){return c.reject(l,D)}F===l?c.reject(l,new TypeError("Cannot resolve promise with itself")):c.resolve(l,F)})}function k(l){var g=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof g=="function")return function(){g.apply(l,arguments)}}function T(l,g){var R=!1;function F(U){R||(R=!0,c.reject(l,U))}function D(U){R||(R=!0,c.resolve(l,U))}function O(){g(D,F)}var z=B(O);z.status==="error"&&F(z.value)}function B(l,g){var R={};try{R.value=l(g),R.status="success"}catch(F){R.status="error",R.value=F}return R}function w(l){return l instanceof this?l:c.resolve(new this(u),l)}function s(l){var g=new this(u);return c.reject(g,l)}function f(l){var g=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=l.length,F=!1;if(!R)return this.resolve([]);for(var D=new Array(R),O=0,z=-1,U=new this(u);++z<R;)H(l[z],z);return U;function H(Q,G){function K($){D[G]=$,++O!==R||F||(F=!0,c.resolve(U,D))}g.resolve(Q).then(K,function($){F||(F=!0,c.reject(U,$))})}}function d(l){var g=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=l.length,F=!1;if(!R)return this.resolve([]);for(var D=-1,O=new this(u);++D<R;)z(l[D]);return O;function z(U){g.resolve(U).then(function(H){F||(F=!0,c.resolve(O,H))},function(H){F||(F=!0,c.reject(O,H))})}}t.exports=C,C.prototype.catch=function(l){return this.then(null,l)},C.prototype.then=function(l,g){if(typeof l!="function"&&this.state===y||typeof g!="function"&&this.state===h)return this;var R=new this.constructor(u);return this.state!==b?S(R,this.state===y?l:g,this.outcome):this.queue.push(new x(R,l,g)),R},x.prototype.callFulfilled=function(l){c.resolve(this.promise,l)},x.prototype.otherCallFulfilled=function(l){S(this.promise,this.onFulfilled,l)},x.prototype.callRejected=function(l){c.reject(this.promise,l)},x.prototype.otherCallRejected=function(l){S(this.promise,this.onRejected,l)},c.resolve=function(l,g){var R=B(k,g);if(R.status==="error")return c.reject(l,R.value);var F=R.value;if(F)T(l,F);else{l.state=y,l.outcome=g;for(var D=-1,O=l.queue.length;++D<O;)l.queue[D].callFulfilled(g)}return l},c.reject=function(l,g){l.state=h,l.outcome=g;for(var R=-1,F=l.queue.length;++R<F;)l.queue[R].callRejected(g);return l},C.resolve=w,C.reject=s,C.all=f,C.race=d},{1:1}],3:[function(e,t,n){(function(r){typeof r.Promise!="function"&&(r.Promise=e(2))}).call(this,ve!==void 0?ve:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,n){var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function u(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var h=c();function y(){try{if(!h||!h.open)return!1;var o=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!o||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function b(o,i){o=o||[],i=i||{};try{return new Blob(o,i)}catch(p){if(p.name!=="TypeError")throw p;for(var a=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),v=0;v<o.length;v+=1)a.append(o[v]);return a.getBlob(i.type)}}typeof Promise>"u"&&e(3);var C=Promise;function x(o,i){i&&o.then(function(a){i(null,a)},function(a){i(a)})}function S(o,i,a){typeof i=="function"&&o.then(i),typeof a=="function"&&o.catch(a)}function k(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}function T(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var B="local-forage-detect-blob-support",w=void 0,s={},f=Object.prototype.toString,d="readonly",l="readwrite";function g(o){for(var i=o.length,a=new ArrayBuffer(i),v=new Uint8Array(a),p=0;p<i;p++)v[p]=o.charCodeAt(p);return a}function R(o){return new C(function(i){var a=o.transaction(B,l),v=b([""]);a.objectStore(B).put(v,"key"),a.onabort=function(p){p.preventDefault(),p.stopPropagation(),i(!1)},a.oncomplete=function(){var p=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);i(m||!p||parseInt(p[1],10)>=43)}}).catch(function(){return!1})}function F(o){return typeof w=="boolean"?C.resolve(w):R(o).then(function(i){return w=i})}function D(o){var i=s[o.name],a={};a.promise=new C(function(v,p){a.resolve=v,a.reject=p}),i.deferredOperations.push(a),i.dbReady?i.dbReady=i.dbReady.then(function(){return a.promise}):i.dbReady=a.promise}function O(o){var i=s[o.name].deferredOperations.pop();if(i)return i.resolve(),i.promise}function z(o,i){var a=s[o.name].deferredOperations.pop();if(a)return a.reject(i),a.promise}function U(o,i){return new C(function(a,v){if(s[o.name]=s[o.name]||Ot(),o.db){if(!i)return a(o.db);D(o),o.db.close()}var p=[o.name];i&&p.push(o.version);var m=h.open.apply(h,p);i&&(m.onupgradeneeded=function(E){var A=m.result;try{A.createObjectStore(o.storeName),E.oldVersion<=1&&A.createObjectStore(B)}catch(_){if(_.name!=="ConstraintError")throw _;console.warn('The database "'+o.name+'" has been upgraded from version '+E.oldVersion+" to version "+E.newVersion+', but the storage "'+o.storeName+'" already exists.')}}),m.onerror=function(E){E.preventDefault(),v(m.error)},m.onsuccess=function(){var E=m.result;E.onversionchange=function(A){A.target.close()},a(E),O(o)}})}function H(o){return U(o,!1)}function Q(o){return U(o,!0)}function G(o,i){if(!o.db)return!0;var a=!o.db.objectStoreNames.contains(o.storeName),v=o.version<o.db.version,p=o.version>o.db.version;if(v&&(o.version!==i&&console.warn('The database "'+o.name+`" can't be downgraded from version `+o.db.version+" to version "+o.version+"."),o.version=o.db.version),p||a){if(a){var m=o.db.version+1;m>o.version&&(o.version=m)}return!0}return!1}function K(o){return new C(function(i,a){var v=new FileReader;v.onerror=a,v.onloadend=function(p){var m=btoa(p.target.result||"");i({__local_forage_encoded_blob:!0,data:m,type:o.type})},v.readAsBinaryString(o)})}function $(o){return b([g(atob(o.data))],{type:o.type})}function ie(o){return o&&o.__local_forage_encoded_blob}function De(o){var i=this,a=i._initReady().then(function(){var v=s[i._dbInfo.name];if(v&&v.dbReady)return v.dbReady});return S(a,o,o),a}function Je(o){D(o);for(var i=s[o.name],a=i.forages,v=0;v<a.length;v++){var p=a[v];p._dbInfo.db&&(p._dbInfo.db.close(),p._dbInfo.db=null)}return o.db=null,H(o).then(function(m){return o.db=m,G(o)?Q(o):m}).then(function(m){o.db=i.db=m;for(var E=0;E<a.length;E++)a[E]._dbInfo.db=m}).catch(function(m){throw z(o,m),m})}function oe(o,i,a,v){v===void 0&&(v=1);try{var p=o.db.transaction(o.storeName,i);a(null,p)}catch(m){if(v>0&&(!o.db||m.name==="InvalidStateError"||m.name==="NotFoundError"))return C.resolve().then(function(){if(!o.db||m.name==="NotFoundError"&&!o.db.objectStoreNames.contains(o.storeName)&&o.version<=o.db.version)return o.db&&(o.version=o.db.version+1),Q(o)}).then(function(){return Je(o).then(function(){oe(o,i,a,v-1)})}).catch(a);a(m)}}function Ot(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Yn(o){var i=this,a={db:null};if(o)for(var v in o)a[v]=o[v];var p=s[a.name];p||(p=Ot(),s[a.name]=p),p.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=De);var m=[];function E(){return C.resolve()}for(var A=0;A<p.forages.length;A++){var _=p.forages[A];_!==i&&m.push(_._initReady().catch(E))}var I=p.forages.slice(0);return C.all(m).then(function(){return a.db=p.db,H(a)}).then(function(L){return a.db=L,G(a,i._defaultConfig.version)?Q(a):L}).then(function(L){a.db=p.db=L,i._dbInfo=a;for(var M=0;M<I.length;M++){var N=I[M];N!==i&&(N._dbInfo.db=a.db,N._dbInfo.version=a.version)}})}function Jn(o,i){var a=this;o=k(o);var v=new C(function(p,m){a.ready().then(function(){oe(a._dbInfo,d,function(E,A){if(E)return m(E);try{var _=A.objectStore(a._dbInfo.storeName).get(o);_.onsuccess=function(){var I=_.result;I===void 0&&(I=null),ie(I)&&(I=$(I)),p(I)},_.onerror=function(){m(_.error)}}catch(I){m(I)}})}).catch(m)});return x(v,i),v}function Qn(o,i){var a=this,v=new C(function(p,m){a.ready().then(function(){oe(a._dbInfo,d,function(E,A){if(E)return m(E);try{var _=A.objectStore(a._dbInfo.storeName).openCursor(),I=1;_.onsuccess=function(){var L=_.result;if(L){var M=L.value;ie(M)&&(M=$(M));var N=o(M,L.key,I++);N!==void 0?p(N):L.continue()}else p()},_.onerror=function(){m(_.error)}}catch(L){m(L)}})}).catch(m)});return x(v,i),v}function Zn(o,i,a){var v=this;o=k(o);var p=new C(function(m,E){var A;v.ready().then(function(){return A=v._dbInfo,f.call(i)==="[object Blob]"?F(A.db).then(function(_){return _?i:K(i)}):i}).then(function(_){oe(v._dbInfo,l,function(I,L){if(I)return E(I);try{var M=L.objectStore(v._dbInfo.storeName);_===null&&(_=void 0);var N=M.put(_,o);L.oncomplete=function(){_===void 0&&(_=null),m(_)},L.onabort=L.onerror=function(){var W=N.error?N.error:N.transaction.error;E(W)}}catch(W){E(W)}})}).catch(E)});return x(p,a),p}function er(o,i){var a=this;o=k(o);var v=new C(function(p,m){a.ready().then(function(){oe(a._dbInfo,l,function(E,A){if(E)return m(E);try{var _=A.objectStore(a._dbInfo.storeName).delete(o);A.oncomplete=function(){p()},A.onerror=function(){m(_.error)},A.onabort=function(){var I=_.error?_.error:_.transaction.error;m(I)}}catch(I){m(I)}})}).catch(m)});return x(v,i),v}function tr(o){var i=this,a=new C(function(v,p){i.ready().then(function(){oe(i._dbInfo,l,function(m,E){if(m)return p(m);try{var A=E.objectStore(i._dbInfo.storeName).clear();E.oncomplete=function(){v()},E.onabort=E.onerror=function(){var _=A.error?A.error:A.transaction.error;p(_)}}catch(_){p(_)}})}).catch(p)});return x(a,o),a}function nr(o){var i=this,a=new C(function(v,p){i.ready().then(function(){oe(i._dbInfo,d,function(m,E){if(m)return p(m);try{var A=E.objectStore(i._dbInfo.storeName).count();A.onsuccess=function(){v(A.result)},A.onerror=function(){p(A.error)}}catch(_){p(_)}})}).catch(p)});return x(a,o),a}function rr(o,i){var a=this,v=new C(function(p,m){o<0?p(null):a.ready().then(function(){oe(a._dbInfo,d,function(E,A){if(E)return m(E);try{var _=A.objectStore(a._dbInfo.storeName),I=!1,L=_.openKeyCursor();L.onsuccess=function(){var M=L.result;M?o===0||I?p(M.key):(I=!0,M.advance(o)):p(null)},L.onerror=function(){m(L.error)}}catch(M){m(M)}})}).catch(m)});return x(v,i),v}function or(o){var i=this,a=new C(function(v,p){i.ready().then(function(){oe(i._dbInfo,d,function(m,E){if(m)return p(m);try{var A=E.objectStore(i._dbInfo.storeName).openKeyCursor(),_=[];A.onsuccess=function(){var I=A.result;I?(_.push(I.key),I.continue()):v(_)},A.onerror=function(){p(A.error)}}catch(I){p(I)}})}).catch(p)});return x(a,o),a}function ir(o,i){i=T.apply(this,arguments);var a=this.config();(o=typeof o!="function"&&o||{}).name||(o.name=o.name||a.name,o.storeName=o.storeName||a.storeName);var v,p=this;if(o.name){var m=o.name===a.name&&p._dbInfo.db?C.resolve(p._dbInfo.db):H(o).then(function(E){var A=s[o.name],_=A.forages;A.db=E;for(var I=0;I<_.length;I++)_[I]._dbInfo.db=E;return E});v=o.storeName?m.then(function(E){if(E.objectStoreNames.contains(o.storeName)){var A=E.version+1;D(o);var _=s[o.name],I=_.forages;E.close();for(var L=0;L<I.length;L++){var M=I[L];M._dbInfo.db=null,M._dbInfo.version=A}var N=new C(function(W,P){var X=h.open(o.name,A);X.onerror=function(ae){X.result.close(),P(ae)},X.onupgradeneeded=function(){X.result.deleteObjectStore(o.storeName)},X.onsuccess=function(){var ae=X.result;ae.close(),W(ae)}});return N.then(function(W){_.db=W;for(var P=0;P<I.length;P++){var X=I[P];X._dbInfo.db=W,O(X._dbInfo)}}).catch(function(W){throw(z(o,W)||C.resolve()).catch(function(){}),W})}}):m.then(function(E){D(o);var A=s[o.name],_=A.forages;E.close();for(var I=0;I<_.length;I++)_[I]._dbInfo.db=null;var L=new C(function(M,N){var W=h.deleteDatabase(o.name);W.onerror=function(){var P=W.result;P&&P.close(),N(W.error)},W.onblocked=function(){console.warn('dropInstance blocked for database "'+o.name+'" until all open connections are closed')},W.onsuccess=function(){var P=W.result;P&&P.close(),M(P)}});return L.then(function(M){A.db=M;for(var N=0;N<_.length;N++)O(_[N]._dbInfo)}).catch(function(M){throw(z(o,M)||C.resolve()).catch(function(){}),M})})}else v=C.reject("Invalid arguments");return x(v,i),v}var ar={_driver:"asyncStorage",_initStorage:Yn,_support:y(),iterate:Qn,getItem:Jn,setItem:Zn,removeItem:er,clear:tr,length:nr,key:rr,keys:or,dropInstance:ir};function sr(){return typeof openDatabase=="function"}var ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ur="~~local_forage_type~",Nt=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",Qe=ke.length,Ze="arbf",et="blob",Ut="si08",zt="ui08",Wt="uic8",Pt="si16",Ht="si32",qt="ur16",$t="ui32",Xt="fl32",Gt="fl64",Kt=Qe+Ze.length,Vt=Object.prototype.toString;function Yt(o){var i,a,v,p,m,E=.75*o.length,A=o.length,_=0;o[o.length-1]==="="&&(E--,o[o.length-2]==="="&&E--);var I=new ArrayBuffer(E),L=new Uint8Array(I);for(i=0;i<A;i+=4)a=ce.indexOf(o[i]),v=ce.indexOf(o[i+1]),p=ce.indexOf(o[i+2]),m=ce.indexOf(o[i+3]),L[_++]=a<<2|v>>4,L[_++]=(15&v)<<4|p>>2,L[_++]=(3&p)<<6|63&m;return I}function tt(o){var i,a=new Uint8Array(o),v="";for(i=0;i<a.length;i+=3)v+=ce[a[i]>>2],v+=ce[(3&a[i])<<4|a[i+1]>>4],v+=ce[(15&a[i+1])<<2|a[i+2]>>6],v+=ce[63&a[i+2]];return a.length%3==2?v=v.substring(0,v.length-1)+"=":a.length%3==1&&(v=v.substring(0,v.length-2)+"=="),v}function cr(o,i){var a="";if(o&&(a=Vt.call(o)),o&&(a==="[object ArrayBuffer]"||o.buffer&&Vt.call(o.buffer)==="[object ArrayBuffer]")){var v,p=ke;o instanceof ArrayBuffer?(v=o,p+=Ze):(v=o.buffer,a==="[object Int8Array]"?p+=Ut:a==="[object Uint8Array]"?p+=zt:a==="[object Uint8ClampedArray]"?p+=Wt:a==="[object Int16Array]"?p+=Pt:a==="[object Uint16Array]"?p+=qt:a==="[object Int32Array]"?p+=Ht:a==="[object Uint32Array]"?p+=$t:a==="[object Float32Array]"?p+=Xt:a==="[object Float64Array]"?p+=Gt:i(new Error("Failed to get type for BinaryArray"))),i(p+tt(v))}else if(a==="[object Blob]"){var m=new FileReader;m.onload=function(){var E=ur+o.type+"~"+tt(this.result);i(ke+et+E)},m.readAsArrayBuffer(o)}else try{i(JSON.stringify(o))}catch(E){console.error("Couldn't convert value into a JSON string: ",o),i(null,E)}}function lr(o){if(o.substring(0,Qe)!==ke)return JSON.parse(o);var i,a=o.substring(Kt),v=o.substring(Qe,Kt);if(v===et&&Nt.test(a)){var p=a.match(Nt);i=p[1],a=a.substring(p[0].length)}var m=Yt(a);switch(v){case Ze:return m;case et:return b([m],{type:i});case Ut:return new Int8Array(m);case zt:return new Uint8Array(m);case Wt:return new Uint8ClampedArray(m);case Pt:return new Int16Array(m);case qt:return new Uint16Array(m);case Ht:return new Int32Array(m);case $t:return new Uint32Array(m);case Xt:return new Float32Array(m);case Gt:return new Float64Array(m);default:throw new Error("Unkown type: "+v)}}var nt={serialize:cr,deserialize:lr,stringToBuffer:Yt,bufferToString:tt};function Jt(o,i,a,v){o.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,v)}function dr(o){var i=this,a={db:null};if(o)for(var v in o)a[v]=typeof o[v]!="string"?o[v].toString():o[v];var p=new C(function(m,E){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(A){return E(A)}a.db.transaction(function(A){Jt(A,a,function(){i._dbInfo=a,m()},function(_,I){E(I)})},E)});return a.serializer=nt,p}function le(o,i,a,v,p,m){o.executeSql(a,v,p,function(E,A){A.code===A.SYNTAX_ERR?E.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(_,I){I.rows.length?m(_,A):Jt(_,i,function(){_.executeSql(a,v,p,m)},m)},m):m(E,A)},m)}function fr(o,i){var a=this;o=k(o);var v=new C(function(p,m){a.ready().then(function(){var E=a._dbInfo;E.db.transaction(function(A){le(A,E,"SELECT * FROM "+E.storeName+" WHERE key = ? LIMIT 1",[o],function(_,I){var L=I.rows.length?I.rows.item(0).value:null;L&&(L=E.serializer.deserialize(L)),p(L)},function(_,I){m(I)})})}).catch(m)});return x(v,i),v}function hr(o,i){var a=this,v=new C(function(p,m){a.ready().then(function(){var E=a._dbInfo;E.db.transaction(function(A){le(A,E,"SELECT * FROM "+E.storeName,[],function(_,I){for(var L=I.rows,M=L.length,N=0;N<M;N++){var W=L.item(N),P=W.value;if(P&&(P=E.serializer.deserialize(P)),(P=o(P,W.key,N+1))!==void 0)return void p(P)}p()},function(_,I){m(I)})})}).catch(m)});return x(v,i),v}function Qt(o,i,a,v){var p=this;o=k(o);var m=new C(function(E,A){p.ready().then(function(){i===void 0&&(i=null);var _=i,I=p._dbInfo;I.serializer.serialize(i,function(L,M){M?A(M):I.db.transaction(function(N){le(N,I,"INSERT OR REPLACE INTO "+I.storeName+" (key, value) VALUES (?, ?)",[o,L],function(){E(_)},function(W,P){A(P)})},function(N){if(N.code===N.QUOTA_ERR){if(v>0)return void E(Qt.apply(p,[o,_,a,v-1]));A(N)}})})}).catch(A)});return x(m,a),m}function pr(o,i,a){return Qt.apply(this,[o,i,a,1])}function gr(o,i){var a=this;o=k(o);var v=new C(function(p,m){a.ready().then(function(){var E=a._dbInfo;E.db.transaction(function(A){le(A,E,"DELETE FROM "+E.storeName+" WHERE key = ?",[o],function(){p()},function(_,I){m(I)})})}).catch(m)});return x(v,i),v}function vr(o){var i=this,a=new C(function(v,p){i.ready().then(function(){var m=i._dbInfo;m.db.transaction(function(E){le(E,m,"DELETE FROM "+m.storeName,[],function(){v()},function(A,_){p(_)})})}).catch(p)});return x(a,o),a}function yr(o){var i=this,a=new C(function(v,p){i.ready().then(function(){var m=i._dbInfo;m.db.transaction(function(E){le(E,m,"SELECT COUNT(key) as c FROM "+m.storeName,[],function(A,_){var I=_.rows.item(0).c;v(I)},function(A,_){p(_)})})}).catch(p)});return x(a,o),a}function mr(o,i){var a=this,v=new C(function(p,m){a.ready().then(function(){var E=a._dbInfo;E.db.transaction(function(A){le(A,E,"SELECT key FROM "+E.storeName+" WHERE id = ? LIMIT 1",[o+1],function(_,I){var L=I.rows.length?I.rows.item(0).key:null;p(L)},function(_,I){m(I)})})}).catch(m)});return x(v,i),v}function wr(o){var i=this,a=new C(function(v,p){i.ready().then(function(){var m=i._dbInfo;m.db.transaction(function(E){le(E,m,"SELECT key FROM "+m.storeName,[],function(A,_){for(var I=[],L=0;L<_.rows.length;L++)I.push(_.rows.item(L).key);v(I)},function(A,_){p(_)})})}).catch(p)});return x(a,o),a}function br(o){return new C(function(i,a){o.transaction(function(v){v.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(p,m){for(var E=[],A=0;A<m.rows.length;A++)E.push(m.rows.item(A).name);i({db:o,storeNames:E})},function(p,m){a(m)})},function(v){a(v)})})}function Cr(o,i){i=T.apply(this,arguments);var a=this.config();(o=typeof o!="function"&&o||{}).name||(o.name=o.name||a.name,o.storeName=o.storeName||a.storeName);var v,p=this;return v=o.name?new C(function(m){var E;E=o.name===a.name?p._dbInfo.db:openDatabase(o.name,"","",0),o.storeName?m({db:E,storeNames:[o.storeName]}):m(br(E))}).then(function(m){return new C(function(E,A){m.db.transaction(function(_){function I(W){return new C(function(P,X){_.executeSql("DROP TABLE IF EXISTS "+W,[],function(){P()},function(ae,it){X(it)})})}for(var L=[],M=0,N=m.storeNames.length;M<N;M++)L.push(I(m.storeNames[M]));C.all(L).then(function(){E()}).catch(function(W){A(W)})},function(_){A(_)})})}):C.reject("Invalid arguments"),x(v,i),v}var Er={_driver:"webSQLStorage",_initStorage:dr,_support:sr(),iterate:hr,getItem:fr,setItem:pr,removeItem:gr,clear:vr,length:yr,key:mr,keys:wr,dropInstance:Cr};function Sr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Zt(o,i){var a=o.name+"/";return o.storeName!==i.storeName&&(a+=o.storeName+"/"),a}function xr(){var o="_localforage_support_test";try{return localStorage.setItem(o,!0),localStorage.removeItem(o),!1}catch{return!0}}function Ar(){return!xr()||localStorage.length>0}function _r(o){var i=this,a={};if(o)for(var v in o)a[v]=o[v];return a.keyPrefix=Zt(o,i._defaultConfig),Ar()?(i._dbInfo=a,a.serializer=nt,C.resolve()):C.reject()}function Br(o){var i=this,a=i.ready().then(function(){for(var v=i._dbInfo.keyPrefix,p=localStorage.length-1;p>=0;p--){var m=localStorage.key(p);m.indexOf(v)===0&&localStorage.removeItem(m)}});return x(a,o),a}function Fr(o,i){var a=this;o=k(o);var v=a.ready().then(function(){var p=a._dbInfo,m=localStorage.getItem(p.keyPrefix+o);return m&&(m=p.serializer.deserialize(m)),m});return x(v,i),v}function Ir(o,i){var a=this,v=a.ready().then(function(){for(var p=a._dbInfo,m=p.keyPrefix,E=m.length,A=localStorage.length,_=1,I=0;I<A;I++){var L=localStorage.key(I);if(L.indexOf(m)===0){var M=localStorage.getItem(L);if(M&&(M=p.serializer.deserialize(M)),(M=o(M,L.substring(E),_++))!==void 0)return M}}});return x(v,i),v}function Lr(o,i){var a=this,v=a.ready().then(function(){var p,m=a._dbInfo;try{p=localStorage.key(o)}catch{p=null}return p&&(p=p.substring(m.keyPrefix.length)),p});return x(v,i),v}function Dr(o){var i=this,a=i.ready().then(function(){for(var v=i._dbInfo,p=localStorage.length,m=[],E=0;E<p;E++){var A=localStorage.key(E);A.indexOf(v.keyPrefix)===0&&m.push(A.substring(v.keyPrefix.length))}return m});return x(a,o),a}function kr(o){var i=this.keys().then(function(a){return a.length});return x(i,o),i}function Rr(o,i){var a=this;o=k(o);var v=a.ready().then(function(){var p=a._dbInfo;localStorage.removeItem(p.keyPrefix+o)});return x(v,i),v}function Mr(o,i,a){var v=this;o=k(o);var p=v.ready().then(function(){i===void 0&&(i=null);var m=i;return new C(function(E,A){var _=v._dbInfo;_.serializer.serialize(i,function(I,L){if(L)A(L);else try{localStorage.setItem(_.keyPrefix+o,I),E(m)}catch(M){M.name!=="QuotaExceededError"&&M.name!=="NS_ERROR_DOM_QUOTA_REACHED"||A(M),A(M)}})})});return x(p,a),p}function Tr(o,i){if(i=T.apply(this,arguments),!(o=typeof o!="function"&&o||{}).name){var a=this.config();o.name=o.name||a.name,o.storeName=o.storeName||a.storeName}var v,p=this;return v=o.name?new C(function(m){o.storeName?m(Zt(o,p._defaultConfig)):m(o.name+"/")}).then(function(m){for(var E=localStorage.length-1;E>=0;E--){var A=localStorage.key(E);A.indexOf(m)===0&&localStorage.removeItem(A)}}):C.reject("Invalid arguments"),x(v,i),v}var jr={_driver:"localStorageWrapper",_initStorage:_r,_support:Sr(),iterate:Ir,getItem:Fr,setItem:Mr,removeItem:Rr,clear:Br,length:kr,key:Lr,keys:Dr,dropInstance:Tr},Or=function(o,i){return o===i||typeof o=="number"&&typeof i=="number"&&isNaN(o)&&isNaN(i)},Nr=function(o,i){for(var a=o.length,v=0;v<a;){if(Or(o[v],i))return!0;v++}return!1},en=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},Ae={},tn={},be={INDEXEDDB:ar,WEBSQL:Er,LOCALSTORAGE:jr},Ur=[be.INDEXEDDB._driver,be.WEBSQL._driver,be.LOCALSTORAGE._driver],Re=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Re),zr={description:"",driver:Ur.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Wr(o,i){o[i]=function(){var a=arguments;return o.ready().then(function(){return o[i].apply(o,a)})}}function ot(){for(var o=1;o<arguments.length;o++){var i=arguments[o];if(i)for(var a in i)i.hasOwnProperty(a)&&(en(i[a])?arguments[0][a]=i[a].slice():arguments[0][a]=i[a])}return arguments[0]}var Pr=function(){function o(i){for(var a in u(this,o),be)if(be.hasOwnProperty(a)){var v=be[a],p=v._driver;this[a]=p,Ae[p]||this.defineDriver(v)}this._defaultConfig=ot({},zr),this._config=ot({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(i){if((i===void 0?"undefined":r(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in i){if(a==="storeName"&&(i[a]=i[a].replace(/\W/g,"_")),a==="version"&&typeof i[a]!="number")return new Error("Database version must be a number.");this._config[a]=i[a]}return!("driver"in i)||!i.driver||this.setDriver(this._config.driver)}return typeof i=="string"?this._config[i]:this._config},o.prototype.defineDriver=function(i,a,v){var p=new C(function(m,E){try{var A=i._driver,_=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver)return void E(_);for(var I=rt.concat("_initStorage"),L=0,M=I.length;L<M;L++){var N=I[L];if((!Nr(Re,N)||i[N])&&typeof i[N]!="function")return void E(_)}var W=function(){for(var X=function(qr){return function(){var $r=new Error("Method "+qr+" is not implemented by the current driver"),nn=C.reject($r);return x(nn,arguments[arguments.length-1]),nn}},ae=0,it=Re.length;ae<it;ae++){var at=Re[ae];i[at]||(i[at]=X(at))}};W();var P=function(X){Ae[A]&&console.info("Redefining LocalForage driver: "+A),Ae[A]=i,tn[A]=X,m()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(P,E):P(!!i._support):P(!0)}catch(X){E(X)}});return S(p,a,v),p},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(i,a,v){var p=Ae[i]?C.resolve(Ae[i]):C.reject(new Error("Driver not found."));return S(p,a,v),p},o.prototype.getSerializer=function(i){var a=C.resolve(nt);return S(a,i),a},o.prototype.ready=function(i){var a=this,v=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return S(v,i,i),v},o.prototype.setDriver=function(i,a,v){var p=this;en(i)||(i=[i]);var m=this._getSupportedDrivers(i);function E(){p._config.driver=p.driver()}function A(L){return p._extend(L),E(),p._ready=p._initStorage(p._config),p._ready}function _(L){return function(){var M=0;function N(){for(;M<L.length;){var W=L[M];return M++,p._dbInfo=null,p._ready=null,p.getDriver(W).then(A).catch(N)}E();var P=new Error("No available storage method found.");return p._driverSet=C.reject(P),p._driverSet}return N()}}var I=this._driverSet!==null?this._driverSet.catch(function(){return C.resolve()}):C.resolve();return this._driverSet=I.then(function(){var L=m[0];return p._dbInfo=null,p._ready=null,p.getDriver(L).then(function(M){p._driver=M._driver,E(),p._wrapLibraryMethodsWithReady(),p._initDriver=_(m)})}).catch(function(){E();var L=new Error("No available storage method found.");return p._driverSet=C.reject(L),p._driverSet}),S(this._driverSet,a,v),this._driverSet},o.prototype.supports=function(i){return!!tn[i]},o.prototype._extend=function(i){ot(this,i)},o.prototype._getSupportedDrivers=function(i){for(var a=[],v=0,p=i.length;v<p;v++){var m=i[v];this.supports(m)&&a.push(m)}return a},o.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,a=rt.length;i<a;i++)Wr(this,rt[i])},o.prototype.createInstance=function(i){return new o(i)},o}(),Hr=new Pr;t.exports=Hr},{3:3}]},{},[4])(4);var Nn={exports:{}};(function(e){((t,n)=>{e.exports=n()})(0,()=>{const t=typeof window=="object"?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let n=null,r=!1;const u=t.WebStreamsPolyfill||{},c=t.isSecureContext;let h=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const y=c||"MozAppearance"in document.documentElement.style?"iframe":"navigate",b={createWriteStream:function(x,S,k){let T={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},B=0,w=null,s=null,f=null;if(Number.isFinite(S)?([k,S]=[S,k],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),T.size=k,T.writableStrategy=S):S&&S.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),T.size=k,T.writableStrategy=S):T=S||{},!h){n||(n=c?C(b.mitm):function(R){const F="width=200,height=100",D=document.createDocumentFragment(),O={frame:t.open(R,"popup",F),loaded:!1,isIframe:!1,isPopup:!0,remove(){O.frame.close()},addEventListener(...U){D.addEventListener(...U)},dispatchEvent(...U){D.dispatchEvent(...U)},removeEventListener(...U){D.removeEventListener(...U)},postMessage(...U){O.frame.postMessage(...U)}},z=U=>{U.source===O.frame&&(O.loaded=!0,t.removeEventListener("message",z),O.dispatchEvent(new Event("load")))};return t.addEventListener("message",z),O}(b.mitm)),s=new MessageChannel,x=encodeURIComponent(x.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const l={transferringReadable:r,pathname:T.pathname||Math.random().toString().slice(-6)+"/"+x,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+x}};T.size&&(l.headers["Content-Length"]=T.size);const g=[l,"*",[s.port2]];if(r){const R=y==="iframe"?void 0:{transform(D,O){if(!(D instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");B+=D.length,O.enqueue(D),w&&(location.href=w,w=null)},flush(){w&&(location.href=w)}};f=new b.TransformStream(R,T.writableStrategy,T.readableStrategy);const F=f.readable;s.port1.postMessage({readableStream:F},[F])}s.port1.onmessage=R=>{R.data.download?y==="navigate"?(n.remove(),n=null,B?location.href=R.data.download:w=R.data.download):(n.isPopup&&(n.remove(),n=null,y==="iframe"&&C(b.mitm)),C(R.data.download)):R.data.abort&&(d=[],s.port1.postMessage("abort"),s.port1.onmessage=null,s.port1.close(),s.port2.close(),s=null)},n.loaded?n.postMessage(...g):n.addEventListener("load",()=>{n.postMessage(...g)},{once:!0})}let d=[];return!h&&f&&f.writable||new b.WritableStream({write(l){if(!(l instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");h?d.push(l):(s.port1.postMessage(l),B+=l.length,w&&(location.href=w,w=null))},close(){if(h){const l=new Blob(d,{type:"application/octet-stream; charset=utf-8"}),g=document.createElement("a");g.href=URL.createObjectURL(l),g.download=x,g.click()}else s.port1.postMessage("end")},abort(){d=[],s.port1.postMessage("abort"),s.port1.onmessage=null,s.port1.close(),s.port2.close(),s=null}},T.writableStrategy)},WritableStream:t.WritableStream||u.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function C(x){if(!x)throw new Error("meh");const S=document.createElement("iframe");return S.hidden=!0,S.src=x,S.loaded=!1,S.name="iframe",S.isIframe=!0,S.postMessage=(...k)=>S.contentWindow.postMessage(...k),S.addEventListener("load",()=>{S.loaded=!0},{once:!0}),document.body.appendChild(S),S}try{new Response(new ReadableStream),c&&!("serviceWorker"in navigator)&&(h=!0)}catch{h=!0}return(x=>{try{x()}catch{}})(()=>{const{readable:x}=new TransformStream,S=new MessageChannel;S.port1.postMessage(x,[x]),S.port1.close(),S.port2.close(),r=!0,Object.defineProperty(b,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})}),b})})(Nn);Nn.exports;function xo(e={},t={}){let n;for(n in t)Lt(t[n])?e[n]=xo(e[n],t[n]):e[n]=t[n];return e}function Ao(e,t){const n=`${e}_${t}`;return ne.MD5(n)}function _o(e){const t=function(y){if(!y)return;const b=y,C=[];if(b)for(let x of b){const S=Un(x);S&&C.push(S)}return C}(e.bussinessRoutes),n=function(y){if(!y)return;const b=y;if(b&&b.length>0){const C=[];return b.forEach(x=>{const S=zn(x);S&&C.push(S)}),C}}(e.widgetMenuConfig),r=function(y){if(y&&y.length>0){const b=[];return y.forEach(C=>{const x=function(S){return S?{id:S.id,label:S.label,container:S.container,preload:S.preload,afterid:S.afterid,bindid:S.bindid,group:S.group}:void 0}(C);x&&b.push(x)}),b}}(e.widgetConfig),u=function(y){if(y&&y.length>0)return y}(e.functionList),c=e.pkgObject.version,h=e.pkgObject.name;return{id:Ao(h,c),name:j.Config.UI.SiteTitle,group:j.Config.UI.Group,product:h,version:c,routes:t,widgetMenu:n,widgets:r,functions:u}}function Un(e){if(e){let t=0;e.meta?.hidden&&(t=1);let n={path:e.path,name:e.name,title:e.meta?.title,type:t,index:e.meta?.index};if(e.children){const r=[];for(let u of e.children){const c=Un(u);c&&r.push(c)}r.length>0&&(n.children=r)}return n}}function zn(e){if(!e)return;const t={name:e.name,index:e.index,path:e.path,type:e.type};return e.children&&e.children.length>0&&(t.children=[],e.children.forEach(n=>{const r=zn(n);r&&t.children?.push(r)})),t}function ci(e,t){const n=_o(e);lo(n,t),j.Message?.msg("\u5BFC\u51FA\u7CFB\u7EDF\u529F\u80FD\u6743\u9650\u6587\u4EF6\u6210\u529F\uFF01")}let Wn=!0;try{String.fromCharCode.apply(String,[1,2])}catch{Wn=!1,Object.defineProperty(Array.prototype,"subarray",{value:Array.prototype.slice})}var Et=2654435769;function Pn(e,t){var n=e.length,r=n<<2;if(t){var u=e[n-1];if(u<(r-=4)-3||u>r)return null;r=u}for(var c=new Uint8Array(r),h=0;h<r;++h)c[h]=e[h>>2]>>((3&h)<<3);return c}function $e(e,t){var n,r=e.length,u=r>>2;(3&r)!=0&&++u,t?(n=new Uint32Array(u+1))[u]=r:n=new Uint32Array(u);for(var c=0;c<r;++c)n[c>>2]|=e[c]<<((3&c)<<3);return n}function ye(e){return 4294967295&e}function Xe(e,t,n,r,u,c){return(n>>>5^t<<2)+(t>>>3^n<<4)^(e^t)+(c[3&r^u]^n)}function Hn(e){if(e.length<16){var t=new Uint8Array(16);t.set(e),e=t}return e}function Ge(e){for(var t=e.length,n=new Uint8Array(3*t),r=0,u=0;u<t;u++){var c=e.charCodeAt(u);if(c<128)n[r++]=c;else if(c<2048)n[r++]=192|c>>6,n[r++]=128|63&c;else{if(!(c<55296||c>57343)){if(u+1<t){var h=e.charCodeAt(u+1);if(c<56320&&56320<=h&&h<=57343){var y=65536+((1023&c)<<10|1023&h);n[r++]=240|y>>18,n[r++]=128|y>>12&63,n[r++]=128|y>>6&63,n[r++]=128|63&y,u++;continue}}throw new Error("Malformed string")}n[r++]=224|c>>12,n[r++]=128|c>>6&63,n[r++]=128|63&c}}return n.subarray(0,r)}function vn(e){var t=e.length;return t===0?"":t<32767?function(n,r){for(var u=new Array(r),c=0,h=0,y=n.length;c<r&&h<y;c++){var b=n[h++];switch(b>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u[c]=b;break;case 12:case 13:if(!(h<y))throw new Error("Unfinished UTF-8 octet sequence");u[c]=(31&b)<<6|63&n[h++];break;case 14:if(!(h+1<y))throw new Error("Unfinished UTF-8 octet sequence");u[c]=(15&b)<<12|(63&n[h++])<<6|63&n[h++];break;case 15:if(!(h+2<y))throw new Error("Unfinished UTF-8 octet sequence");var C=((7&b)<<18|(63&n[h++])<<12|(63&n[h++])<<6|63&n[h++])-65536;if(!(0<=C&&C<=1048575))throw new Error("Character outside valid Unicode range: 0x"+C.toString(16));u[c++]=C>>10&1023|55296,u[c]=1023&C|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+b.toString(16))}}return c<r&&(u.length=c),String.fromCharCode.apply(String,u)}(e,t):function(n,r){for(var u=[],c=new Array(32768),h=0,y=0,b=n.length;h<r&&y<b;h++){var C=n[y++];switch(C>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c[h]=C;break;case 12:case 13:if(!(y<b))throw new Error("Unfinished UTF-8 octet sequence");c[h]=(31&C)<<6|63&n[y++];break;case 14:if(!(y+1<b))throw new Error("Unfinished UTF-8 octet sequence");c[h]=(15&C)<<12|(63&n[y++])<<6|63&n[y++];break;case 15:if(!(y+2<b))throw new Error("Unfinished UTF-8 octet sequence");var x=((7&C)<<18|(63&n[y++])<<12|(63&n[y++])<<6|63&n[y++])-65536;if(!(0<=x&&x<=1048575))throw new Error("Character outside valid Unicode range: 0x"+x.toString(16));c[h++]=x>>10&1023|55296,c[h]=1023&x|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+C.toString(16))}if(h>=32766){var S=h+1;c.length=S,u.push(String.fromCharCode.apply(String,c)),r-=S,h=-1}}return h>0&&(c.length=h,u.push(String.fromCharCode.apply(String,c))),u.join("")}(e,t)}function Bo(e){var t=e.length;if(t===0)return"";var n=Wn?e:function(y){for(var b=y.length,C=new Array(y.length),x=0;x<b;++x)C[x]=y[x];return C}(e);if(t<65535)return String.fromCharCode.apply(String,n);for(var r=32767&t,u=t>>15,c=new Array(r?u+1:u),h=0;h<u;++h)c[h]=String.fromCharCode.apply(String,n.subarray(h<<15,h+1<<15));return r&&(c[u]=String.fromCharCode.apply(String,n.subarray(u<<15,t))),c.join("")}function yn(e,t){return typeof e=="string"&&(e=Ge(e)),typeof t=="string"&&(t=Ge(t)),e==null||e.length===0?e:Pn(function(n,r){var u,c,h,y,b,C,x=n.length,S=x-1;for(c=n[S],h=0,C=0|Math.floor(6+52/x);C>0;--C){for(y=(h=ye(h+Et))>>>2&3,b=0;b<S;++b)u=n[b+1],c=n[b]=ye(n[b]+Xe(h,u,c,b,y,r));u=n[0],c=n[S]=ye(n[S]+Xe(h,u,c,S,y,r))}return n}($e(e,!0),$e(Hn(t),!1)),!1)}function mn(e,t){return typeof e=="string"&&(e=function(n){for(var r=window.atob(n),u=r.length,c=new Uint8Array(u),h=0;h<u;h++)c[h]=r.charCodeAt(h);return c}(e)),typeof t=="string"&&(t=Ge(t)),e==null||e.length===0?e:Pn(function(n,r){var u,c,h,y,b,C=n.length,x=C-1;for(u=n[0],h=ye(Math.floor(6+52/C)*Et);h!==0;h=ye(h-Et)){for(y=h>>>2&3,b=x;b>0;--b)c=n[b-1],u=n[b]=ye(n[b]-Xe(h,u,c,b,y,r));c=n[x],u=n[0]=ye(n[0]-Xe(h,u,c,0,y,r))}return n}($e(e,!1),$e(Hn(t),!1)),!0)}const St={toBytes:Ge,toString:vn,encrypt:yn,encryptToString:function(e,t){return window.btoa(Bo(yn(e,t)))},decrypt:mn,decryptToString:function(e,t){return vn(mn(e,t))}},ee=_n({panelGroups:{}}),qn=()=>({useGroupAccordion:e=>fe(()=>ee.panelGroups[e].accordion),setGroupAccordionStatus:(e,t)=>{ee.panelGroups[e]={...ee.panelGroups[e],accordion:t}},panelExpanded:(e,t)=>fe(()=>ee.panelGroups[e]?.panelExpandStatus?.[t]||!1),setPanelExpandedStatus:(e,t,n)=>{ee.panelGroups[e]={...ee.panelGroups[e],panelExpandStatus:{...ee.panelGroups[e]?.panelExpandStatus||{},[t]:n}}},togglePanelExpandedStatus:(e,t)=>{ee.panelGroups[e].accordion&&(ee.panelGroups[e].panelExpandStatus[t]||Object.keys(ee.panelGroups[e].panelExpandStatus).forEach(n=>{ee.panelGroups[e].panelExpandStatus[n]=!1})),ee.panelGroups[e].panelExpandStatus[t]=!ee.panelGroups[e].panelExpandStatus[t]}}),pt=e=>e>255?255:e<0?0:e,Me=(e,t)=>{const n=e.replace("#",""),r=parseInt(n,16),u=pt((r>>16)+t),c=pt((r>>8&255)+t);return"#"+(pt((255&r)+t)|c<<8|u<<16).toString(16)};var gt=Ie({name:"VueCollapsiblePanelGroup",props:{accordion:{type:Boolean,default:!1},baseColor:{type:String,default:"#333333"}},setup(e){const t=te(`group-${bt()}`),{setGroupAccordionStatus:n}=qn(),r={"--base-color":e.baseColor,"--border-color":Me(e.baseColor,180),"--bg-color-header":Me(e.baseColor,140),"--bg-color-header-hover":Me(e.baseColor,190),"--bg-color-header-active":Me(e.baseColor,200),"--bg-color-body":"#fff"};return n(t.value,e.accordion),{idGroup:t,cssColorVars:r}}});const Fo=["data-id-group"];gt.render=function(e,t,n,r,u,c){return q(),Z("div",{"data-id-group":e.idGroup,style:Ee(e.cssColorVars),class:"vcpg"},[me(e.$slots,"default")],12,Fo)},gt.__scopeId="data-v-23ab5317",gt.__file="src/controls/collapsepanel/VCollapsiblePanelGroup.vue";var vt=Ie({name:"VueCollapsiblePanel",props:{expanded:{type:Boolean,default:!0}},setup(e,t){const n=`panel-${bt()}`,r=te(),u=te(),c=te(),{panelExpanded:h,togglePanelExpandedStatus:y,setPanelExpandedStatus:b}=qn(),C=fe(()=>({hasContent:t.slots.content&&t.slots.content()[0].children.length>0,dataKey:bt()})),x=fe(()=>r.value?.parentElement?.getAttribute("data-id-group")||""),S=fe(()=>h(x.value,n).value&&C.value.hasContent);return Ft(()=>{b(x.value,n,e.expanded)}),Gr(()=>{(async()=>(await It(),u.value&&c.value&&(u.value.style.height=`${Math.min(c.value.scrollHeight,u.value.scrollHeight)}px`)))()}),{body:C,panelRef:r,bodyRef:u,bodyContentRef:c,isExpanded:S,collapse:k=>{k.style.height="0"},expand:k=>{k.style.height=`${k.scrollHeight}px`},toggle:()=>{!C.value.hasContent||y(x.value,n)},toggleIcon:`
    <svg
        width="24px"
        height="24px"
        viewBox="0 0 24 24"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M6.34292 7.75734L4.92871 9.17155L11.9998 16.2426L19.0708 9.17158L17.6566 7.75737L11.9998 13.4142L6.34292 7.75734Z"/>
    </svg>
`}}});const Io={class:"vcp__header-title"},Lo={key:0,class:"vcp__header-icon"},Do=["innerHTML"],ko={key:0,ref:"bodyRef",class:"vcp__body"},Ro={ref:"bodyContentRef",class:"vcp__body-content"};function yt(e){return window.TouchEvent&&e instanceof TouchEvent}vt.render=function(e,t,n,r,u,c){return q(),Z("section",{ref:"panelRef",class:Xr(["vcp",{"vcp--expanded":e.isExpanded,"vcp--expandable":e.body.hasContent}])},[V("header",{class:"vcp__header",onClick:t[0]||(t[0]=(...h)=>e.toggle&&e.toggle(...h))},[V("div",Io,[me(e.$slots,"title")]),e.body.hasContent?(q(),Z("div",Lo,[me(e.$slots,"icon",{},()=>[V("span",{innerHTML:e.toggleIcon},null,8,Do)])])):ge("v-if",!0)]),Bn(Fn,{"data-key":e.body.dataKey,name:"slide",onBeforeEnter:e.collapse,onEnter:e.expand,onBeforeLeave:e.expand,onLeave:e.collapse},{default:He(()=>[e.isExpanded?(q(),Z("div",ko,[V("div",Ro,[me(e.$slots,"content")],512)],512)):ge("v-if",!0)]),_:3},8,["data-key","onBeforeEnter","onEnter","onBeforeLeave","onLeave"])],2)},vt.__scopeId="data-v-08c94cf8",vt.__file="src/controls/collapsepanel/VCollapsiblePanel.vue";class Y{e;constructor(t){this.e=t}stopPropagation(){this.e.stopPropagation()}preventDefault(){this.e.preventDefault()}get clientX(){return yt(this.e)?(this.e.type==="touchend"?this.e.changedTouches:this.e.touches).item(0).clientX:this.e.clientX}get clientY(){return yt(this.e)?(this.e.type==="touchend"?this.e.changedTouches:this.e.touches).item(0).clientY:this.e.clientY}get clientCoord(){return new Mt(this.clientX,this.clientY)}static bindDown(t,n,r,u=!1){const c=y=>{n(new Y(y))},h=y=>{y.touches.length===1&&n(new Y(y)),y.touches.length>1&&r&&r(new Y(y))};return t.addEventListener("mousedown",c,u),t.addEventListener("touchstart",h,u),()=>{t.removeEventListener("mousedown",c,u),t.removeEventListener("touchstart",h,u)}}static bindMove(t,n,r=!1){const u=h=>{n(new Y(h))},c=h=>{h.touches.length===1&&n(new Y(h))};return t.addEventListener("mousemove",u,r),t.addEventListener("touchmove",c,r),()=>{t.removeEventListener("mousemove",u,r),t.removeEventListener("touchmove",c,r)}}static bindUp(t,n,r=!1){const u=h=>{n(new Y(h))},c=h=>{h.touches.length===0&&n(new Y(h))};return t.addEventListener("mouseup",u,r),t.addEventListener("touchend",c,r),()=>{t.removeEventListener("mouseup",u,r),t.removeEventListener("touchend",c,r)}}originalEvent({mouse:t,touch:n}){yt(this.e)?n&&n(this.e):t&&t(this.e)}}class Mt{x;y;constructor(t,n){this.x=t,this.y=n}clone(){return new Mt(this.x,this.y)}}class Mo{handle;container;options;unbindDown;unbindMove;unbindUp;constructor(t,n,r={}){this.handle=t,this.container=n,this.options=r,t&&(this.unbindDown=Y.bindDown(t,this.mousedown),t.classList.add("draggable-handle"))}teardown(){this.handle?.classList.remove("draggable-handle"),this.unbindDown&&this.unbindDown(),this.unbindUp&&this.unbindUp(),this.unbindMove&&this.unbindMove()}offsetX;offsetY;mousedown=t=>{if(t.preventDefault(),this.handle){const{left:n,top:r}=this.handle.getBoundingClientRect();this.offsetX=t.clientX-n,this.offsetY=t.clientY-r}this.options.onMoveStart&&this.options.onMoveStart(),this.unbindMove=Y.bindMove(document,this.mousemove),this.unbindUp=Y.bindUp(document,this.mouseup)};mousemove=t=>{this.container&&(this.container.style.left=t.clientX-this.offsetX+"px",this.container.style.top=t.clientY-this.offsetY+"px"),this.options.onMove&&this.options.onMove()};mouseup=t=>{this.options.onMoveEnd&&this.options.onMoveEnd(),this.unbindUp(),this.unbindMove(),this.unbindUp=this.unbindMove=void 0}}class To{_group;onChange;zIndex;constructor(t,n){this._group=t,this.onChange=n,this.a(r=>r.push(this))}set group(t){this._group=t;const n=ze(this._group),r=ze(t);n.splice(n.indexOf(this),1),r.push(this),wn()}get group(){return this._group}unregister(){this.a(t=>t.splice(t.indexOf(this),1))}raise(){this.a(t=>{t.splice(t.indexOf(this),1),t.push(this)})}a(t){t(ze(this._group)),wn()}}const Ue=new Map;function ze(e){return Ue.has(e)||Ue.set(e,[]),Ue.get(e)}function $n(e,t){return e>t?-$n(t,e):e<0&&t>=0?1:e-t}function wn(){let e=0;for(const t of function(n){const r=[];return n.forEach((u,c)=>r.push(c)),r}(Ue).sort($n))for(const n of ze(t))e!=n.zIndex&&(n.zIndex=e,n.onChange(e)),e++}function xt(e){if(e){const{width:t,height:n}=e.style;e.style.width="auto",e.style.height="auto";const r=We(e);return e.style.width=t,e.style.height=n,r}return{width:0,height:0,top:0,left:0,bottom:0,right:0}}function We(e){const t=e.getBoundingClientRect(),n=t.width,r=t.height,u=t.top,c=t.left;return{width:n,height:r,top:u,left:c,bottom:u+r,right:c+n}}class jo{container;options;handles;constructor(t,n){if(this.container=t,this.options=n,t&&n){this.handles=Xn.map(b=>new b(t,this));const{width:r,height:u}=xt(t),c=n.maxWidth||window.innerWidth,h=n.maxHeight||window.innerHeight;let y=!1;(r<n.minWidth||r>c)&&(t.style.width=`${bn(r,n.minWidth,c)}px`,y=!0),(u<n.minHeight||u>h)&&(t.style.height=`${bn(u,n.minHeight,h)}px`,y=!0),y&&n.onResize&&n.onResize()}}teardown(){this.handles?.forEach(t=>t.teardown())}}const Xn=[];class de{container;helper;handle;handleSize=8;unbindDown;unbindMove;unbindUp;constructor(t,n){this.container=t,this.helper=n,this.handle=this.createHandleElement(),this.unbindDown=Y.bindDown(this.handle,this.mousedown)}teardown(){this.unbindDown(),this.unbindUp&&this.unbindUp(),this.unbindMove&&this.unbindMove(),this.handle.parentElement.removeChild(this.handle)}x0;y0;left0;top0;width0;height0;mousedown=t=>{t.preventDefault(),t.stopPropagation();const{left:n,top:r,width:u,height:c}=We(this.container);this.x0=t.clientX,this.y0=t.clientY,this.left0=n,this.top0=r,this.width0=u,this.height0=c,this.calcSafeBoundaries(),this.helper.options&&this.helper.options.onResizeStart&&this.helper.options.onResizeStart(),this.unbindMove=Y.bindMove(document,this.mousemove),this.unbindUp=Y.bindUp(document,this.mouseup)};minLeft;maxLeft;minRight;maxRight;minTop;maxTop;minBottom;maxBottom;calcSafeBoundaries(){if(!this.helper.options)return;const{left:t,top:n,right:r,bottom:u}=We(this.container),c=this.helper.options,h=c.maxWidth||window.innerWidth,y=c.maxHeight||window.innerHeight;this.minLeft=Math.max(r-h,0),this.maxLeft=r-c.minWidth,this.minRight=t+c.minWidth,this.maxRight=Math.min(t+h,window.innerWidth),this.minTop=Math.max(u-y,0),this.maxTop=u-c.minHeight,this.minBottom=n+c.minHeight,this.maxBottom=Math.min(n+y,window.innerHeight)}mousemove=t=>{t.preventDefault(),t.stopPropagation(),this.setPosition(t),this.fixPosition(),this.helper.options&&this.helper.options.onResize&&this.helper.options.onResize()};fixPosition(){const{width:t,height:n,left:r,top:u,right:c,bottom:h}=We(this.container),y=this.helper.options;!y||(r<this.minLeft?(this.container.style.width=t+r-this.minLeft+"px",this.container.style.left=`${this.minLeft}px`):r>this.maxLeft?(this.container.style.width=`${y.minWidth}px`,this.container.style.left=`${this.maxLeft}px`):c<this.minRight?this.container.style.width=`${y.minWidth}px`:c>this.maxRight&&(this.container.style.width=this.maxRight-r+"px"),u<this.minTop?(this.container.style.height=n+u-this.minTop+"px",this.container.style.top=`${this.minTop}px`):u>this.maxTop?(this.container.style.height=`${y.minHeight}px`,this.container.style.top=`${this.maxTop}px`):h<this.minBottom?this.container.style.height=`${y.minHeight}px`:h>this.maxBottom&&(this.container.style.height=this.maxBottom-u+"px"))}mouseup=t=>{t.preventDefault(),t.stopPropagation(),this.helper.options&&this.helper.options.onResizeEnd&&this.helper.options.onResizeEnd(),this.unbindUp(),this.unbindMove(),this.unbindUp=this.unbindMove=void 0};createHandleElement(){const t=document.createElement("div"),n=t.style;return n.position="absolute",this.applyStyle(n),this.container.appendChild(t),t}}function bn(e,t,n){return e<t?t:e>n?n:e}Xn.push(class extends de{setPosition(e){this.container.style.width=this.width0+e.clientX-this.x0+"px",this.container.style.height=this.height0+e.clientY-this.y0+"px"}applyStyle(e){e.width=2*this.handleSize+"px",e.height=2*this.handleSize+"px",e.right=-this.handleSize+"px",e.bottom=-this.handleSize+"px",e.cursor="nwse-resize"}},class extends de{setPosition(e){this.container.style.height=this.height0+e.clientY-this.y0+"px"}applyStyle(e){e.right=`${this.handleSize}px`,e.left=`${this.handleSize}px`,e.height=2*this.handleSize+"px",e.bottom=-this.handleSize+"px",e.cursor="ns-resize"}},class extends de{setPosition(e){this.container.style.left=this.left0+e.clientX-this.x0+"px",this.container.style.width=this.width0-(e.clientX-this.x0)+"px",this.container.style.height=this.height0+e.clientY-this.y0+"px"}applyStyle(e){e.left=-this.handleSize+"px",e.bottom=-this.handleSize+"px",e.width=2*this.handleSize+"px",e.height=2*this.handleSize+"px",e.cursor="nesw-resize"}},class extends de{setPosition(e){this.container.style.left=this.left0+e.clientX-this.x0+"px",this.container.style.width=this.width0-(e.clientX-this.x0)+"px"}applyStyle(e){e.left=-this.handleSize+"px",e.bottom=`${this.handleSize}px`,e.width=2*this.handleSize+"px",e.top=`${this.handleSize}px`,e.cursor="ew-resize"}},class extends de{setPosition(e){this.container.style.left=this.left0+e.clientX-this.x0+"px",this.container.style.width=this.width0-(e.clientX-this.x0)+"px",this.container.style.top=this.top0+e.clientY-this.y0+"px",this.container.style.height=this.height0-(e.clientY-this.y0)+"px"}applyStyle(e){e.left=-this.handleSize+"px",e.top=-this.handleSize+"px",e.width=2*this.handleSize+"px",e.height=2*this.handleSize+"px",e.cursor="nwse-resize"}},class extends de{setPosition(e){this.container.style.top=this.top0+e.clientY-this.y0+"px",this.container.style.height=this.height0-(e.clientY-this.y0)+"px"}applyStyle(e){e.left=`${this.handleSize}px`,e.right=`${this.handleSize}px`,e.height=2*this.handleSize+"px",e.top=-this.handleSize+"px",e.cursor="ns-resize"}},class extends de{setPosition(e){this.container.style.top=this.top0+e.clientY-this.y0+"px",this.container.style.height=this.height0-(e.clientY-this.y0)+"px",this.container.style.width=this.width0+e.clientX-this.x0+"px"}applyStyle(e){e.right=-this.handleSize+"px",e.top=-this.handleSize+"px",e.height=2*this.handleSize+"px",e.width=2*this.handleSize+"px",e.cursor="nesw-resize"}},class extends de{setPosition(e){this.container.style.width=this.width0+e.clientX-this.x0+"px"}applyStyle(e){e.right=-this.handleSize+"px",e.top=`${this.handleSize}px`,e.bottom=`${this.handleSize}px`,e.width=2*this.handleSize+"px",e.cursor="ew-resize"}});var Pe=Ie({name:"",props:{disabled:{type:Boolean,default:!1},windowStyle:{type:Object,required:!0}},components:{},setup(e){const t=te(!1),n=te(!1);return{hover:t,active:n,style:function(){let r=e.windowStyle.button;return t.value&&(r={...r,...this.windowStyle.buttonHover}),n.value&&(r={...r,...this.windowStyle.buttonActive}),r},mouseup:function(r){this.active&&this.$emit("click")},mousedown:function(r){r.preventDefault(),n.value=!0;const u=Y.bindUp(document,()=>{n.value=!1,u()})}}}});const Oo=["disabled"];Pe.render=function(e,t,n,r,u,c){return q(),Z("div",{class:"btn",style:Ee(e.style()),onMouseenter:t[0]||(t[0]=h=>e.hover=!0),onMouseleave:t[1]||(t[1]=h=>e.hover=!1),onMousedown:t[2]||(t[2]=rn((...h)=>e.mousedown&&e.mousedown(...h),["stop"])),onTouchstart:t[3]||(t[3]=rn((...h)=>e.mousedown&&e.mousedown(...h),["stop"])),onMouseup:t[4]||(t[4]=(...h)=>e.mouseup&&e.mouseup(...h)),onTouchend:t[5]||(t[5]=(...h)=>e.mouseup&&e.mouseup(...h)),disabled:e.disabled},[me(e.$slots,"default")],44,Oo)},Pe.__scopeId="data-v-71662210",Pe.__file="src/controls/vuewindow/window/Button.vue";const At=new Set;function Cn(e){return e!==null?parseFloat(e):0}function Te(e){const t=window.getComputedStyle(e),n=Math.ceil([t.paddingLeft,t.width,t.paddingRight].map(Cn).reduce((u,c)=>u+c)),r=Math.ceil([t.paddingTop,t.height,t.paddingBottom].map(Cn).reduce((u,c)=>u+c));return{width:n,height:r}}class No{width;height;constructor(t,n){this.width=t,this.height=n}}function Uo(e){const t=e.windowEl;if(t){const n=parseFloat(t.style.left||"NaN"),r=parseFloat(t.style.top||"NaN");if(!isNaN(n)&&!isNaN(r))return{left:n,top:r}}return null}function zo(e,t,n,r){const u=e-n,c=t-r;return u*u+c*c}window.addEventListener("resize",e=>{At.forEach(t=>{t&&ao(t.fixPosition)&&t.fixPosition()})});const je=[];var En=Ie({name:"Window",props:{windowStyle:{type:Object,required:!0},isOpen:{type:Boolean,required:!1,default:!0},title:{type:String,required:!0,default:""},closeButton:{type:Boolean,required:!1,default:!0},resizable:{type:Boolean,required:!1,default:!1},isScrollable:{type:Boolean,required:!1,default:!1},padding:{type:Number,required:!1,default:8},activateWhenOpen:{type:Boolean,required:!1,default:!0},positionHint:{type:String,required:!1,default:""},zGroup:{type:Number,required:!1,default:1},overflow:{type:String,required:!1,default:"visible"},minWidth:{type:Number,required:!1,default:1},minHeight:{type:Number,required:!1,default:0},maxWidth:{type:Number,required:!1,default:0},maxHeight:{type:Number,required:!1,default:0},height:{type:Number,required:!1},width:{type:Number,required:!1},top:{type:Number,required:!1},left:{type:Number,required:!1}},components:{myButton:Pe},setup(e,{emit:t}){const n=no();if(!n)return;const{proxy:r}=n;let u=0,c,h,y;const b=te(e.isOpen),C=()=>{je.push(r),y=new To(e.zGroup,x),e.isOpen&&function(F){F&&(It(()=>{u++==0&&(d(r),function(){const D=S.value,{width:O,height:z}=xt(D);let U,H;if(e.left!==void 0!=(e.top!==void 0))throw new Error("Either of left or top is specified. Both must be set or not set.");if(typeof e.left=="number")U=e.left,H=e.top;else{const Q=e.positionHint||"auto";switch(Q){case"auto":{let G=20,K=50,$=0;do{if(je.every(ie=>{if(!ie.isOpen||r==ie)return!0;const De=Uo(ie);if(De==null)return!0;const{left:Je,top:oe}=De;return zo(Je,oe,G,K)>16}))break;G=(G+40)%(window.innerWidth-200),K=(K+40)%(window.innerHeight-200)}while(++$<100);U=G,H=K}break;case"center":U=(window.innerWidth-O)/2,H=(window.innerHeight-z)/2,console.log(U,H,window.innerWidth,window.innerHeight,"111111");break;default:try{const G=Q.split("/").map(Number);if(G.length!=2)throw null;const[K,$]=G;if(!isFinite(K)||!isFinite($))throw null;U=K>=0?K:window.innerWidth-O+K,H=$>=0?$:window.innerHeight-z+$}catch{throw new Error(`invalid position string: ${Q}`)}}}D&&(D.style.left=`${U}px`,D.style.top=`${H}px`)}()),e.resizable&&l(),R(),c=new Mo(k.value,S.value,{onMove:()=>R(),onMoveStart:()=>t("move-start"),onMoveEnd:()=>t("move-end")}),e.resizable&&function(){const{height:D}=xt(k.value);h=new jo(S.value,{onResize:()=>l(),onResizeStart:()=>t("resize-start"),onResizeEnd:()=>t("resize-end"),minWidth:e.minWidth,minHeight:e.minHeight+D,maxWidth:e.maxWidth,maxHeight:e.maxHeight?e.maxHeight+D:void 0})}()}),e.activateWhenOpen&&B())}(!0),At.add(r)};function x(F){w.value.zIndex=`${F}`}const S=te(null),k=te(null),T=te(null);function B(){y.raise(),t("activate")}const w=te({...e.windowStyle.window,zIndex:"auto",overflow:e.overflow}),s=fe(()=>e.windowStyle.titlebar),f=fe(()=>{const F={...e.windowStyle.content};return e.resizable?F.padding="0":e.padding!=null&&(F.padding=`${e.padding}px`),e.isScrollable&&(F.overflow="auto"),F});function d(F){const{width:D,height:O,top:z,left:U}=F,H=S;if(H&&D!=null&&(H.value.style.width=`${D}px`),O!=null){const Q=k.value;if(Q){const G=Te(Q).height;H.value.style.height=`${O+G}px`}}H&&U!=null&&(H.value.style.left=`${U}px`),H&&z!=null&&(H.value.style.top=`${z}px`)}function l(F=!0){const D=S.value,O=k.value,z=T.value;if(z&&D&&O){const{width:U,height:H}=Te(z),{width:Q,height:G}=Te(D),K=Te(O).height,$=Q-(z.offsetWidth-U),ie=G-K-(z.offsetHeight-H);z.style.width=`${$}px`,z.style.height=`${ie}px`,g(),t("resize",new No($,ie)),F&&(t("update:width",$),t("update:height",ie))}}function g(){const F=S.value;if(F){const D=F.getBoundingClientRect();D.left<0&&(w.value.left="0px"),D.top<0&&(w.value.top="0px"),D.right>window.innerWidth&&(w.value.left=window.innerWidth-D.width+"px"),D.bottom>window.innerHeight&&(w.value.top=window.innerHeight-D.height+"px")}}function R(F=!0){g();const D=S.value;if(D){const{left:O,top:z}=D.getBoundingClientRect();F&&(t("update:left",O),t("update:top",z))}}return _e(()=>e.isOpen,F=>{b.value=F}),_e(()=>e.zGroup,F=>{y.group=F}),_e(()=>e.width,F=>{d({width:F}),l(!1)}),_e(()=>e.height,F=>{d({height:F}),l(!1)}),Ft(()=>{C()}),Qr(()=>{At.delete(this),y.unregister(),h&&h.teardown(),c&&c.teardown(),je.splice(je.indexOf(r),1)}),{isOpen:b,windowEl:S,titlebar:k,content:T,activate:B,styleWindow:w,styleTitlebar:s,styleContent:f,closeButtonClick:function(){b.value=!1,t("closebuttonclick")},fixPosition:g}}});const Wo={class:"title"};var Sn;En.render=function(e,t,n,r,u,c){const h=In("myButton");return q(),se(Fn,{name:"fade",onAfterLeave:t[2]||(t[2]=y=>e.$emit("close")),onAfterEnter:t[3]||(t[3]=y=>e.$emit("open")),persisted:""},{default:He(()=>[Kr(V("div",{class:"window",style:Ee(e.styleWindow),ref:"windowEl",onMousedown:t[0]||(t[0]=(...y)=>e.activate&&e.activate(...y)),onTouchstart:t[1]||(t[1]=(...y)=>e.activate&&e.activate(...y))},[V("div",{class:"titlebar",style:Ee(e.styleTitlebar),ref:"titlebar"},[V("div",Wo,[e.$slots.title?me(e.$slots,"title",{key:0}):(q(),Z(pe,{key:1},[on(Yr(e.title),1)],64))]),e.closeButton?(q(),se(h,{key:0,windowStyle:e.windowStyle,onClick:e.closeButtonClick},{default:He(()=>[on("\xD7")]),_:1},8,["windowStyle","onClick"])):ge("v-if",!0)],4),V("div",{class:"content",style:Ee(e.styleContent),ref:"content"},[me(e.$slots,"default")],4)],36),[[Vr,e.isOpen]])]),_:3})},En.__file="src/controls/vuewindow/window/index.vue",function(e){e[e.StyleBlack=0]="StyleBlack",e[e.StyleWhite=1]="StyleWhite",e[e.StyleMetal=2]="StyleMetal",e[e.StyleGrayblue=3]="StyleGrayblue"}(Sn||(Sn={}));var J;(function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.centerBack=2]="centerBack",e[e.centerMain=3]="centerMain",e[e.centerFront=4]="centerFront",e[e.left=5]="left",e[e.right=6]="right"})(J||(J={}));class Po{layoutState;layoutMap=new Map;preConditionMap=new Map;widgetsLoadedSet=new Set;widgetConfig=new Array;_LayoutID;constructor(t,n,r){this.layoutState=t,this._LayoutID=r,n.forEach(u=>{if(u.layoutID===r&&(this.widgetConfig.push(u),u.afterid))if(this.preConditionMap.has(u.afterid))this.preConditionMap.get(u.afterid)?.add(u);else{const c=new Set;c.add(u),this.preConditionMap.set(u.afterid,c)}})}getLayoutID(){return this._LayoutID}getWidgetConfig(){return this.widgetConfig}preloadWidgets(){this.widgetConfig.filter(t=>t.preload&&!t.afterid).forEach(t=>{this._loadWidget(t)})}async loadWidget(t){if(!t)return;let n;return Lt(t)?n=t:Ln(t)&&(n=this.widgetConfig.find(r=>r.id===t)),n?n.afterid?(this.isWidgetLoaded(n.afterid)||await this.loadWidget(n.afterid),this._loadWidget(n)):this._loadWidget(n):void 0}loadOtherDependenceWidgets(t){this.preConditionMap.has(t)&&this.preConditionMap.get(t)?.forEach(n=>{n.preload&&this._loadWidget(n)})}_loadWidget(t){if(!this.widgetsLoadedSet.has(t.id))return t.component().then(n=>{if(n.default){const r=Zr(n.default);this.getContainerComponents(t.container).value.set(t.id,r),this.widgetsLoadedSet.add(t.id),It().then(()=>{j.EventBus.emit(re.WidgetLoadedEvent,{layoutID:this._LayoutID,widgetID:t.id}),this.loadOtherDependenceWidgets(t.id)})}})}hasDependentWidgets(t){let n=!1;if(this.preConditionMap.has(t)){const r=this.preConditionMap.get(t);if(r){for(const u of r)if(this.isWidgetLoaded(u.id)){n=!0;break}}}return n}unloadWidget(t){if(!t||!this.isWidgetLoaded(t))return;const n=this.widgetConfig.find(r=>r.id===t);if(n){if(this.preConditionMap.has(t)){const c=this.preConditionMap.get(t);if(c)for(const h of c)this.unloadWidget(h.id)}const r=this.getContainerComponents(n.container),u=r.value.get(t);u&&u.unmounted&&u.unmounted(),r.value.delete(t),this.widgetsLoadedSet.delete(t),j.EventBus.emit(re.WidgetUnLoadedEvent,{layoutID:this._LayoutID,widgetID:t})}}isWidgetLoaded(t){return this.widgetsLoadedSet.has(t)}splitTwoContainer(t=!1){const n=this.layoutState.centerMainContainer,r=this.layoutState.centerBackContainer;t?(n&&(n.style.left="0",n.style.width="100%"),r&&(r.style.width="100%")):(n&&(n.style.left="50%",n.style.width="50%"),r&&(r.style.width="50%"))}getLayoutContainer(t){switch(t){case J.top:return this.layoutState.topContainer;case J.bottom:return this.layoutState.bottomContainer;case J.left:return this.layoutState.leftContainer;case J.right:return this.layoutState.rightContainer;case J.centerBack:return this.layoutState.centerBackContainer;case J.centerMain:return this.layoutState.centerMainContainer;case J.centerFront:return this.layoutState.centerFrontContainer}}changeContainerVisible(t,n=!1){const r=this.getLayoutContainer(t);r&&(r.style.visibility=n?"visible":"hidden")}changeWidgetVisible(t,n=!1){const r=this.getWidgetComponent(t);r&&j.EventBus.emit(re.WidgetVisibleChanged,{id:t,layoutID:this._LayoutID,name:r.name,visible:n})}getWidgetComponent(t){if(this.widgetsLoadedSet.has(t)){const n=this.widgetConfig.find(r=>r.id===t);if(n)return this.getContainerComponents(n.container).value.get(t)}}getWigetItem(t){return this.widgetConfig.find(n=>n.id===t)}getGroupWigetItems(t){return this.widgetConfig.filter(n=>n.group===t)}getContainerComponents(t){if(this.layoutMap.has(t))return this.layoutMap.get(t);{const n=te(new Map);return this.layoutMap.set(t,n),n}}addContainerComponent(t,n){}}var mt=Ie({name:"MainContainer",props:{widgetConfig:{type:Array,required:!0,default:()=>[]},layoutID:{type:String,default:void 0},layoutStyle:{type:Object},enableRouterView:{type:Boolean,default:!0}},emits:["containerLoaded"],setup(e,{attrs:t,slots:n,emit:r}){const u=e.layoutID,c=te(e.enableRouterView);_e(()=>e.enableRouterView,()=>{c.value=e.enableRouterView});const h=_n({topContainer:void 0,centerBackContainer:void 0,centerMainContainer:void 0,centerFrontContainer:void 0,bottomContainer:void 0,leftContainer:void 0,rightContainer:void 0}),y=new Po(h,e.widgetConfig,u),b=B(J.top),C=B(J.centerBack),x=B(J.centerFront),S=B(J.left),k=B(J.right),T=B(J.bottom);function B(s){return y?.getContainerComponents(s)}const w=fe(()=>e.layoutStyle);return Ft(()=>{y&&(y.preloadWidgets(),u===void 0&&(j.LayoutManager=y),r("containerLoaded",{layoutID:u,layoutManager:y}))}),{...Jr(h),topContainerComponents:b,centerbackComponents:C,centerfrontComponents:x,leftContainerComponents:S,rightContainerComponents:k,bottomContainerComponents:T,containerStyle:w,isEnableRouterView:c}}});const Ho={ref:"topContainer",class:"topContainer"},qo={key:0,ref:"centerMainContainer",class:"centerdiv mainContainer"},$o={ref:"centerBackContainer",class:"centerdiv backContainer"},Xo={ref:"centerFrontContainer",class:"centerdiv centerContainer"},Go={ref:"leftContainer",class:"leftContainer"},Ko={ref:"rightContainer",class:"rightContainer"},Vo={ref:"bottomContainer",class:"bottomContainer"};mt.render=function(e,t,n,r,u,c){const h=In("router-view");return q(),Z("div",{class:"layoutContainer",style:Ee(e.containerStyle)},[V("div",Ho,[(q(!0),Z(pe,null,Ce(e.topContainerComponents,([y,b])=>(q(),se(he(b),{key:y}))),128))],512),V("div",null,[ge(" \u4E3B\u8981\u5BB9\u5668-\u5E95\u90E8 "),e.isEnableRouterView?(q(),Z("div",qo,[Bn(h,null,{default:He(({Component:y})=>[(q(),se(he(y)))]),_:1})],512)):ge("v-if",!0),ge(" \u4E0A\u4E00\u5C42-\u4E3B\u5BB9\u5668 "),V("div",$o,[(q(!0),Z(pe,null,Ce(e.centerbackComponents,([y,b])=>(q(),se(he(b),{key:y}))),128))],512),ge(" \u6700\u4E0A\u6D6E\u52A8-\u4E3B\u5BB9\u5668 "),V("div",Xo,[(q(!0),Z(pe,null,Ce(e.centerfrontComponents,([y,b])=>(q(),se(he(b),{key:y}))),128))],512),V("div",Go,[(q(!0),Z(pe,null,Ce(e.leftContainerComponents,([y,b])=>(q(),se(he(b),{key:y}))),128))],512),V("div",Ko,[(q(!0),Z(pe,null,Ce(e.rightContainerComponents,([y,b])=>(q(),se(he(b),{key:y}))),128))],512)]),V("div",Vo,[(q(!0),Z(pe,null,Ce(e.bottomContainerComponents,([y,b])=>(q(),se(he(b),{key:y}))),128))],512)],4)},mt.__scopeId="data-v-4d081e5c",mt.__file="src/controls/layoutcontainer/layout.vue";const xe={Login:"/api/User/Login",ChangeMyPwd:"/api/User/ChangeMyPwd",Logout:"/api/Check/ExitLogin",RefreshToken:"/api/Check/RefreshToken",CheckToken:"/api/Check/CheckToken",GetSystemRights:"/api/System/GetSystem"},_t="access_token",Yo=j.Config.ServiceURL.LoginAuthURL;function xn(){const e=fo();e&&Le(xe.RefreshToken,Yo,{refreshToken:e}).then(t=>{Gn(t.data)})}function Jo(){const e=we.getJsonObject(_t);if(!e)return;const t=new Date().getTime(),n=new Date(e.expire).getTime()-t;n>0&&(n<=5e3?xn():setTimeout(xn,n-5e3))}function Gn(e){const t=new Date().getTime();let n=new Date(e.accessToken.expires).getTime()-t;if(n>=36e5?(n=18e5,console.warn("\u5BA2\u6237\u7AEF\u65F6\u95F4\u4E0E\u670D\u52A1\u5668\u4E0D\u4E00\u81F4\uFF1A\u8FC7\u53BB\u65F6\u95F4\uFF01")):n<-6e5&&(n=18e5,console.warn("\u5BA2\u6237\u7AEF\u65F6\u95F4\u4E0E\u670D\u52A1\u5668\u4E0D\u4E00\u81F4\uFF1A\u672A\u6765\u65F6\u95F4\uFF01")),n>0){let r=Se();r?(r.token=e.accessToken.tokenContent,r.expire=e.accessToken.expires,r.refresh=e.refreshToken.tokenContent):r={token:e.accessToken.tokenContent,expire:e.accessToken.expires,refresh:e.refreshToken.tokenContent},we.set(_t,r,n/1e3),Jo()}else we.remove(_t)}const Bt="Wm314243",Ye=j.Config.ServiceURL.LoginAuthURL;async function li(e){const t={username:e.username,pwd:St.encryptToString(e.pwd,Bt)},n=(await Le(xe.Login,Ye,t))?.data;return n&&Gn(n.doubletoken),n}function di(e){const t={oldpwd:St.encryptToString(e.oldpwd,Bt),newpwd:St.encryptToString(e.newpwd,Bt)};return Le(xe.ChangeMyPwd,Ye,t)}function fi(){const e=Se();e&&(ho(xe.Logout,Ye,{token:e.token,reftoken:e.refresh}),Rn())}function hi(e){return Le(xe.CheckToken,Ye,{token:e})}const Tt="ROLE_SYSTEM_RIGHT",jt=new Dt("",sessionStorage);function Qo(){return jt.get(Tt)}function An(e){jt.set(Tt,e)}function Zo(){jt.remove(Tt)}function Fe(e){if(e)for(let t=0;t<e.length;t++){const n=e[t];n.children&&n.children.length>0?(Fe(n.children),n.children.length===0&&(e.splice(t,1),t--)):n.selected||(e.splice(t,1),t--)}}function Kn(e,t,n="name"){e&&t&&e.forEach(r=>{const u=t.find(c=>c[n]===r[n]);u&&(r.children?u.children&&Kn(r.children,u.children,n):(!u.children||u.children.length===0)&&u.selected&&(r.selected=u.selected))})}function Oe(e,t,n,r="name"){const u=e[n],c=t[n];u?c&&Kn(u,c,r):c&&(e[n]=c)}function ei(e){if(e&&e.length>0){const t=e.length;let n,r=!1;if(t>0){r=Lt(e[0]);const u=r?e[0]:JSON.parse(e[0]);if(t>1)for(let c=1;c<e.length;c++){const h=e[c],y=r?h:JSON.parse(h);Oe(u,y,"routes","name"),Oe(u,y,"widgetMenu","name"),Oe(u,y,"widgets","id"),Oe(u,y,"functions","id")}n=u}return n&&(Fe(n.routes),Fe(n.widgetMenu),Fe(n.widgets),Fe(n.functions)),n}}const wt=[];function ti(){return Qo()}async function pi(e,t=!1){Zo();const n=xe.GetSystemRights,r=j.Config.ServiceURL.LoginAuthURL,u=await Le(n,r,{systemid:e});if(!u||!u.data)return void j.Message?.warn("\u65E0\u6CD5\u83B7\u53D6\u529F\u80FD\u6388\u6743\u5217\u8868\uFF01");const c=u.data;if(c&&c.length>0){if(t){const h=JSON.parse(c[0]);return An(h),h}{const h=ei(c);return An(h),h}}}function Vn(e,t){const n={...e};return n.meta||(n.meta={}),t.index!=null&&(n.meta.index=t.index),t.title!=null&&(n.meta.title=t.title),e.children&&(n.children=[],t.children&&t.children.forEach(r=>{const u=e.children?.find(c=>c.path===r.path);if(u){const c=Vn(u,r);c&&n.children?.push(c)}})),n}function gi(e,t=2){if(t===0)return e;const n=ti();return n&&n.routes?(wt.length>0||e.forEach(r=>{const u=n.routes?.find(c=>c.name===r.name);if(u){const c=Vn(r,u);c&&wt.push(c)}}),wt):void 0}export{gi as $,j as B,Se as E,pi as F,si as J,Zo as L,Jo as M,di as N,fi as O,ho as Q,ti as U,J as V,Dt as X,ui as Z,Gn as a,ai as b,li as c,Le as d,ii as e,mt as f,oi as g,hi as j,xo as l,ci as o,ne as r};
