import{d as $,av as w,t as S,o as u,b as f,v as c,l as p,g as _,k as g,D as k,F as y,x as W,ay as b,j as L,aq as A,az as D,aA as P,r as U,c as V,w as C,E as x,S as E,af as F,a as B,y as j,aB as q}from"./vendor.de069ad6.js";import{I as z}from"./@iconify/vue-exp.b199edd5.js";import{_ as v,e as O,a as T}from"./index.f27a7adf.js";import{u as G,b as H}from"./vue-router-exp.aee9d5fb.js";import{B as J}from"./xframelib-exp.e4d795a1.js";import"./lodash-es-exp.d3c3d62f.js";import"./axios-exp.cd5cf947.js";const Q=$({name:"menu-item",components:{Icon:z},props:{menuInfo:w()},setup(e){function n(i){return i?.sort((s,o)=>{let a=0,l=0;return s.meta&&s.meta.index!=null&&(a=Number(s.meta.index)),o.meta&&o.meta.index!=null&&(l=Number(o.meta.index)),a-l})}return{getSortedItems:n}}});const X={class:"anticon"},Y={class:"iconClass"},Z={style:{"padding-left":"15px"}},ee={class:"anticon"},ne={class:"iconClass"};function te(e,n,i,r,s,o){const a=S("Icon"),l=A,t=S("menu-item",!0),m=D;return e.menuInfo.meta.hidden?L("",!0):(u(),f(y,{key:0},[e.menuInfo.children?.length?(u(),c(m,b({key:e.menuInfo.name},e.$attrs),{title:p(()=>[_("span",X,[g(a,{icon:e.menuInfo.meta.icon},null,8,["icon"])]),_("span",Y,k(e.menuInfo.meta.title),1)]),default:p(()=>[(u(!0),f(y,null,W(e.getSortedItems(e.menuInfo.children),d=>(u(),f(y,{key:d.name},[d.children?(u(),c(t,{"menu-info":d,key:d.name},null,8,["menu-info"])):(u(),c(l,{key:d.name},{default:p(()=>[_("span",Z,k(d.meta.title),1)]),_:2},1024))],64))),128))]),_:1},16)):(u(),c(l,{key:e.menuInfo.name},{default:p(()=>[_("span",ee,[g(a,{icon:e.menuInfo.meta.icon},null,8,["icon"])]),_("span",ne,k(e.menuInfo.meta.title),1)]),_:1}))],64))}const M=v(Q,[["render",te]]),oe=$({components:{MenuItem:M},props:{collapsed:{type:Boolean},layoutName:P().def("BackLayout")},setup(e){const n=G(),i=H(),r=e.layoutName,s=()=>[n.matched[1]?.name],o=U({openKeys:s(),selectedKeys:[n.name]}),a=V(()=>{const t=O();if(!t)return[];const m=t.find(d=>d.name===r)?.children;return m&&m.sort((h,I)=>{let K=0,R=0;return h.meta&&h.meta.index!=null&&(K=Number(h.meta.index)),I.meta&&I.meta.index!=null&&(R=Number(I.meta.index)),K-R})});C(()=>e.collapsed,t=>{o.openKeys=t?[]:s(),o.selectedKeys=[n.name]}),C(()=>n.fullPath,()=>{n.name=="login"||e.collapsed||(o.openKeys=s(),o.selectedKeys=[n.name],J.Logger().debug(o.openKeys,"openKeys"))});const l=({item:t,key:m,keyPath:d})=>{/http(s)?:/.test(m)?window.open(m):i.push({name:m})};return{...x(o),clickMenuItem:l,menus:a}}});function se(e,n,i,r,s,o){const a=M,l=E;return u(),f("div",null,[g(l,{"open-keys":e.openKeys,"onUpdate:openKeys":n[0]||(n[0]=t=>e.openKeys=t),"selected-keys":e.selectedKeys,"onUpdate:selectedKeys":n[1]||(n[1]=t=>e.selectedKeys=t),mode:"inline",collapsed:e.collapsed,onClick:e.clickMenuItem,class:"menu"},{default:p(()=>[(u(!0),f(y,null,W(e.menus,t=>(u(),c(a,{key:t.name,"menu-info":t},null,8,["menu-info"]))),128))]),_:1},8,["open-keys","selected-keys","collapsed","onClick"])])}const N=v(oe,[["render",se]]),ae=$({name:"SideMenuWidget",components:{SideMenu:N},setup(e,n){const i=T(),{leftCollapsed:r}=F(i),s=B(i.menuSetting?.minWidth),o=B(i.menuSetting?.menuWidth);return j(()=>{}),{leftCollapsed:r,sideWidth:o,collapsedWidth:s}}});function le(e,n,i,r,s,o){const a=N,l=q;return u(),c(l,{collapsed:e.leftCollapsed,"onUpdate:collapsed":n[0]||(n[0]=t=>e.leftCollapsed=t),trigger:null,collapsible:"",class:"sideMenuDiv",collapsedWidth:e.collapsedWidth,width:e.sideWidth},{default:p(()=>[g(a,{collapsed:e.leftCollapsed,"layout-name":"BackLayout"},null,8,["collapsed"])]),_:1},8,["collapsed","collapsedWidth","width"])}const _e=v(ae,[["render",le]]);export{_e as default};
