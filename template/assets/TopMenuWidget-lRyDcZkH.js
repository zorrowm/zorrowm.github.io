import{k as R,z as ne,u as M,R as re,j as ae,i as oe,A as le,e as O,x as ie,c as se,o as ce}from"./quasar-exp-BsaNoQ7w.js";import{F as ue}from"./FullScreen-CiM9rot9.js";import{h as de,y as q,B as S}from"./xframelib-exp-CMLeiWD4.js";import{b as F,_ as C,u as me,o as pe}from"./index-BQ7ovaqR.js";import{u as B,b as P}from"./vue-router-exp-CO9L2VdX.js";import{d as N,Y as w,c as f,w as he,o as fe,r as g,a0 as D,b as d,f as p,a4 as s,j as c,a1 as _e,ac as j,a7 as H,n as W,k as T,e as Q,F as U,ab as z,g as x,ae as ge,a2 as ve,q as be,l as L,ag as we}from"./@vue-exp-Bws36Ke9.js";import{E as u,P as Ie}from"./PageMenu-DHOqdaIr.js";import{cy as Se}from"./vendor-DJm_4oaR.js";import{L as ke}from"./layoutTool-CN9JyUHn.js";import{d as ye}from"./WidgetsTool-TGcRel5R.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./lottie-web-exp-CIY4INm7.js";import"./urlUtils-BslGeNE1.js";const Le=N({__name:"ItemMultiple",props:{trueItem:{default:function(){return null},type:Object},initLevel:{type:Number,default:0}},setup(i,{expose:r}){r();const o=F(),e=B(),a=i,{trueItem:l,initLevel:t}=w(a),n=f(()=>o.leftCollapsed&&!o.overlayMenu?"margin-left:-16px":"");he(e,()=>{v()}),fe(()=>{v()});const h=g(!1),v=()=>{for(let b of l.value.children)if(b.path===e.path||b.parent_code===e.name){h.value=!0;return}h.value=!1},I={appState:o,route:e,props:a,trueItem:l,initLevel:t,shortStyle:n,itemOpen:h,changeOpen:v};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}});function Me(i,r,o,e,a,l){const t=D("Icon");return d(),p(ne,{modelValue:e.itemOpen,"onUpdate:modelValue":r[0]||(r[0]=n=>e.itemOpen=n),group:e.trueItem.name,"header-inset-level":e.initLevel},{header:s(()=>[c(R,{avatar:"",style:_e(e.shortStyle)},{default:s(()=>[c(t,{icon:e.trueItem.meta?.icon},null,8,["icon"])]),_:1},8,["style"]),c(R,{style:{"margin-left":"-10px"}},{default:s(()=>[j(H(e.trueItem.meta?.title??e.trueItem.label),1)]),_:1})]),default:s(()=>[W(i.$slots,"default")]),_:3},8,["modelValue","group","header-inset-level"])}const A=C(Le,[["render",Me],["__file","ItemMultiple.vue"]]),Ce={__name:"ItemSingle",props:{trueItem:{default:function(){return{}},type:Object},initLevel:{type:Number,default:0}},setup(i,{expose:r}){r();const o=M(),e=f(()=>o.dark.isActive?"bg-grey-10 text-white":"bg-primary text-white"),a=P(),l=B(),t=i,{trueItem:n,initLevel:h}=w(t),v=_=>{if(_.kind){const m=_;switch(m.kind){case u.Route:m.blank?OpenURL(a,m.path,{}):m.name?a.push({name:m.name}):m.path&&a.push({path:m.path});break;case u.URL:window.open(m.path,"_blank");break;case u.Action:Global.EventBus.emit("IPageMenu.Action",m);break;case u.Widget:Global.EventBus.emit("LayoutLoadWidget",m);break}}else _.path&&q(_.path)||_.link?window.open(_.path):a.push({name:_.name})},I=f(()=>l.name===n.value.name||l.path===n.value.path),b={$q:o,darkThemeSideBar:e,router:a,route:l,props:t,trueItem:n,initLevel:h,toPath:v,checkActive:I,computed:f,toRefs:w,get useRoute(){return B},get useRouter(){return P},get H5Tool(){return de},get isValidURL(){return q},get useQuasar(){return M},get EnumPageMenu(){return u}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}};function xe(i,r,o,e,a,l){const t=D("Icon");return T((d(),p(ae,{clickable:"",exact:"","inset-level":e.initLevel,active:e.checkActive,"active-class":i.darkThemeSelect,onClick:r[0]||(r[0]=n=>e.toPath(e.trueItem))},{default:s(()=>[c(R,{avatar:""},{default:s(()=>[c(t,{icon:e.trueItem.meta?.icon??e.trueItem.icon},null,8,["icon"])]),_:1}),c(R,{style:{"margin-left":"-10px"}},{default:s(()=>[j(H(e.trueItem.meta?.title??e.trueItem.label),1)]),_:1})]),_:1},8,["inset-level","active","active-class"])),[[re]])}const E=C(Ce,[["render",xe],["__scopeId","data-v-77886570"],["__file","ItemSingle.vue"]]),Re={__name:"SideMenuBarItem",props:{childrenItem:{default:function(){return{}},type:Object},initLevel:{type:Number,default:0}},setup(i,{expose:r}){r();const o=i,{childrenItem:e,initLevel:a}=w(o),l=f(()=>e.value.children&&e.value.children.length!==0?A:E),t={props:o,childrenItem:e,initLevel:a,chooseComponent:l,computed:f,toRefs:w,ItemMultiple:A,ItemSingle:E};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}};function Be(i,r,o,e,a,l){const t=D("SideMenuBarItem",!0);return d(),p(ge(e.chooseComponent),{"true-item":e.childrenItem,"init-level":e.initLevel},{default:s(()=>[e.childrenItem.children&&e.childrenItem.children.length!==0?(d(!0),Q(U,{key:0},z(e.childrenItem.children,n=>(d(),p(t,{key:n.path,"children-item":n,"init-level":e.initLevel+.3},null,8,["children-item","init-level"]))),128)):x("",!0)]),_:1},8,["true-item","init-level"])}const De=C(Re,[["render",Be],["__file","SideMenuBarItem.vue"]]),Oe={__name:"index",props:{topMenuChildren:{type:Object||Array,required:!1,default:()=>null}},setup(i,{expose:r}){r();const o=M(),e=f(()=>o.dark.isActive?"bg-grey-10 text-white":"bg-white text-dark"),a=i,{topMenuChildren:l}=w(a);S.Loading("SideMenuBar");const t={$q:o,darkThemeSideBar:e,props:a,topMenuChildren:l,computed:f,toRefs:w,get Global(){return S},get useQuasar(){return M},SideMenuBarItem:De};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}};function Pe(i,r,o,e,a,l){return d(),p(le,{style:{height:"calc(100%)"},class:ve(e.darkThemeSideBar)},{default:s(()=>[W(i.$slots,"default",{},void 0,!0),c(oe,{class:"menu-list"},{default:s(()=>[(d(!0),Q(U,null,z(e.topMenuChildren,(t,n)=>(d(),p(e.SideMenuBarItem,{key:n,"children-item":t,"init-level":0,style:{}},null,8,["children-item"]))),128))]),_:1})]),_:3},8,["class"])}const Te=C(Oe,[["render",Pe],["__scopeId","data-v-4f4fae95"],["__file","index.vue"]]),je=N({__name:"TopMenuWidget",setup(i,{expose:r}){r();const o=[{label:"首页",icon:"ant-design:home-outlined",kind:u.Route,path:"/product/index"},{label:"帝测时空云平台",kind:u.Route,path:"/product/productPage"},{label:"解决方案",children:[{label:"智慧农业",kind:u.URL,path:"https://www.baidu.com"},{label:"智慧水利",kind:u.Route,path:"/river"},{label:"智慧物流",kind:u.URL,path:"https://www.126.com"}]},{label:"项目案例",children:[{label:"农业项目",kind:u.URL,path:"https://www.baidu.com"},{label:"水利项目",kind:u.Route,path:"/river"}]},{label:"API示例",kind:u.Route,path:"/product/apiexamples"},{label:"联系我们",kind:u.URL,path:"/product/contract"}],e=g(!1),a=g(!1),l=M(),t=g(S.Config.UI?.SiteTitle),n=F(),h=me(),{leftCollapsed:v}=Se(n),I=g(n.headerSetting.centerTitle),b=g(n.headerSetting.showFullScreen),_=g(n.headerSetting.showCollapseIcon);function m(){n.toggleCollapse()}const G=be({headerHeight:ke.getHeaderHeight()}),Y=g(window.document.documentElement),J=B(),K=()=>{l.dialog({title:"退出",message:"您确定要退出登录吗？",cancel:!0}).onOk(()=>{h.clear(),S.Message.msg("成功退出登录"),window.open(window.location.pathname,"_self")}).onCancel(()=>{})},X=f(()=>!S.Config.UI?.IsNoLogin);function Z(){ye({modalID:"changeMyPWD",extraData:{title:"修改密码"},width:500,rowData:void 0})}const k=P();function $(y){switch(y){case"0":k.push("/index");break;case"2":k.push("/productPage");break;case"4":k.push("/apiexamples");break;case"5":k.push("/wsntest");break}}const ee=f(()=>{const y=pe.children;return y||(S.Message.warn("无法获取路由列表！"),[])});function te(){e.value=!e.value}const V={menuList:o,rightDrawerOpen:e,isShow:a,$q:l,siteTitle:t,appState:n,userState:h,leftCollapsed:v,iscenterTitle:I,showFullScreen:b,showCollapseIcon:_,toggleCollapse:m,state:G,fullScreenElem:Y,route:J,doLogout:K,isNOLogin:X,showUserModal:Z,router:k,routerPush:$,topMenuChildren:ee,toggleRightDrawer:te,FullScreen:ue,SideMenuBar:Te,get PageMenu(){return Ie}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),Qe={class:"row"},Ue={class:"col-11 row justify-end items-center"},Ve={class:"col-1 justify-center q-py-md"},qe={class:"q-gutter-sm row items-center no-wrap"};function Ae(i,r,o,e,a,l){const t=D("Icon"),n=we("tooltip");return d(),Q(U,null,[L("div",Qe,[L("div",Ue,[c(e.PageMenu,{data:e.menuList})]),L("div",Ve,[L("div",qe,[T((d(),p(O,{class:"lt-sm",dense:"",flat:"",size:"md",round:"",onClick:e.toggleRightDrawer},{default:s(()=>[c(t,{icon:"whh:dropmenu",width:"100",height:"100"})]),_:1})),[[n,"菜单列表"]]),c(O,{dense:"",flat:"",href:"https://github.com",target:"_blank"},{default:s(()=>[c(t,{icon:"fa-github"}),c(se,null,{default:s(()=>r[1]||(r[1]=[j("github")])),_:1})]),_:1}),L("span",null,[e.showCollapseIcon&&e.$q.screen.gt.sm?(d(),p(t,{key:0,icon:e.leftCollapsed?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined",onClick:e.toggleCollapse},null,8,["icon"])):x("",!0)]),e.showFullScreen&&e.$q.screen.gt.sm?(d(),p(e.FullScreen,{key:0,target:e.fullScreenElem},null,8,["target"])):x("",!0)])])]),e.$q.screen.lt.sm?(d(),p(ie,{key:0,view:"hHH lpR fFf"},{default:s(()=>[c(ce,{modelValue:e.rightDrawerOpen,"onUpdate:modelValue":r[0]||(r[0]=h=>e.rightDrawerOpen=h),side:"right",bordered:""},{default:s(()=>[T((d(),p(O,{dense:"",flat:"",round:"",onClick:e.toggleRightDrawer},{default:s(()=>[c(t,{icon:"codicon:chrome-close"})]),_:1})),[[n,"菜单列表"]]),c(e.SideMenuBar,{"top-menu-children":e.menuList})]),_:1},8,["modelValue"])]),_:1})):x("",!0)],64)}const at=C(je,[["render",Ae],["__file","TopMenuWidget.vue"]]);export{at as default};
