import{A as V,F as y,a0 as x,T as I,aa as E,e as S,a4 as C}from"./quasar-exp-BsaNoQ7w.js";import{i as Q,j as M,k as w,_ as T}from"./index-BQ7ovaqR.js";import{T as A}from"./TableEvent-Bxu_GHGl.js";import{b as O,U as j}from"./ApiExampleDemo-fezgN7i-.js";import{cC as q,cB as D}from"./vendor-DJm_4oaR.js";import{B as f,h as N}from"./xframelib-exp-CMLeiWD4.js";import{d as H,r as p,w as L,o as P,a as z,b as G,f as J,a4 as v,j as n,l,ac as B,k as K,v as W}from"./@vue-exp-Bws36Ke9.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./vue-router-exp-CO9L2VdX.js";import"./lottie-web-exp-CIY4INm7.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";const g="addEditForm2",X=H({name:"addEditForm2",__name:"addEditForm",props:{data:q([Object]).def({}),extra:D().isRequired},setup(m,{expose:e}){e();const i=m,o=p({});L(()=>i.data,a=>{a?o.value={...a}:o.value={}},{immediate:!0,deep:!0});function r(a){a?_():o.value={}}P(()=>{Q(g,r)}),z(()=>{M(g,r)});let d;const s=p(null),F=p(null);function R(){F.value?.pickFiles()}function b(a){const t=a[0],u=new FileReader;u.onload=function(c){o.value.picture=c.target.result},u.readAsDataURL(t)}function h(){s.value&&s.value.pickFiles()}async function k(a){const t=a[0],u=t.name,c=await N.readFileBytes(t);d={name:u,content:c}}async function _(){const a={...o.value};if(d){const t=d;a.profiles=[{name:t.name,file:t.content}]}if(i.extra.title==="新建"){a.gradeid="1";const t=await O(a);t&&t.data?(f.Message.info("新建成功！"),w(A.RefeshTable,void 0)):f.Message.info("新建失败！")}else{const t=await j(a);t&&t.response&&t.response.status==200&&t.data?(f.Message.info("编辑成功！"),w(A.RefeshTable,void 0)):f.Message.info("编辑失败！")}}const U={name:g,props:i,formRef:o,OkCancelHandler:r,get uploadFiles(){return d},set uploadFiles(a){d=a},profileUploader:s,imgUploader:F,doImageUpload:R,pictureUpload:b,doUpload:h,fileUpload:k,onSubmit:_};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),Y={class:"row q-col-gutter-x-md dialog_form q-pa-md"},Z={class:"col-6"},$={class:"col-6"},ee={class:"col-12"},oe={class:"col-12"};function ae(m,e,i,o,r,d){return G(),J(C,{class:"modalContent column"},{default:v(()=>[n(V,{class:"col"},{default:v(()=>[l("div",Y,[l("div",Z,[l("h5",null,[n(y,{name:"star",color:"red"}),e[2]||(e[2]=B("姓名： "))]),n(x,{outlined:"",dense:"",modelValue:o.formRef.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.formRef.name=s),type:"text"},null,8,["modelValue"])]),l("div",$,[e[3]||(e[3]=l("h5",null,"年龄：",-1)),n(x,{outlined:"",dense:"",modelValue:o.formRef.age,"onUpdate:modelValue":e[1]||(e[1]=s=>o.formRef.age=s),type:"text"},null,8,["modelValue"])]),l("div",ee,[e[4]||(e[4]=l("h5",null,"个人照片",-1)),n(I,{src:o.formRef.picture??"img/noimage.gif","spinner-color":"white",style:{height:"80px","max-width":"80px"},onClick:o.doImageUpload},null,8,["src"]),e[5]||(e[5]=B()),n(E,{ref:"imgUploader","max-files":1,class:"hidden",accept:"image/*","field-name":"file",onAdded:o.pictureUpload},null,512)]),l("div",oe,[e[6]||(e[6]=l("h5",null,"上传简历",-1)),K(n(S,{"no-wrap":"",label:"上传",icon:"mdi-cloud-upload-outline",color:"primary",onClick:o.doUpload},{default:v(()=>[n(E,{ref:"profileUploader","max-files":1,class:"hidden",accept:".doc, .docx, .pdf","field-name":"file",onAdded:o.fileUpload},null,512)]),_:1},512),[[W,m.$q.screen.gt.sm]])])])]),_:1})]),_:1})}const ge=T(X,[["render",ae],["__scopeId","data-v-42a4fe15"],["__file","addEditForm.vue"]]);export{ge as default};
