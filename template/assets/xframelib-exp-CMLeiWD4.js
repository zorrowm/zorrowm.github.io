import{e as fe,n as ie,a1 as me,a9 as qn,q as xo,f as Z,J as To,a4 as _e,aa as Yr,l as J,F as Ie,ab as Be,g as ne,r as Y,d as De,b as X,k as Ro,v as Lo,ac as en,a7 as un,ad as Gr,j as pt,P as Mo,ae as be,w as Te,c as $e,o as hn,Y as Jr,a2 as xe,M as Qr,a as Zr,I as Nt,u as ei,a0 as _t,D as ti,B as Ao,H as ni}from"./@vue-exp-Bws36Ke9.js";import{a as oi}from"./axios-exp-C7rfqWEd.js";import{cm as le,cn as ri,co as ct,cp as ii}from"./vendor-DJm_4oaR.js";import{I as $t}from"./@iconify/vue-exp-Q9Q0SWJB.js";function Wt(n){return window.TouchEvent&&n instanceof TouchEvent}class ue{e;constructor(e){this.e=e}stopPropagation(){this.e.stopPropagation()}preventDefault(){this.e.preventDefault()}get clientX(){return Wt(this.e)?(this.e.type==="touchend"?this.e.changedTouches:this.e.touches).item(0).clientX:this.e.clientX}get clientY(){return Wt(this.e)?(this.e.type==="touchend"?this.e.changedTouches:this.e.touches).item(0).clientY:this.e.clientY}get clientCoord(){return new dn(this.clientX,this.clientY)}static bindDown(e,t,o,r=!1){const i=c=>{t(new ue(c))},s=c=>{c.touches.length===1&&t(new ue(c)),c.touches.length>1&&o&&o(new ue(c))};return e.addEventListener("mousedown",i,r),e.addEventListener("touchstart",s,r),()=>{e.removeEventListener("mousedown",i,r),e.removeEventListener("touchstart",s,r)}}static bindMove(e,t,o=!1){const r=s=>{t(new ue(s))},i=s=>{s.touches.length===1&&t(new ue(s))};return e.addEventListener("mousemove",r,o),e.addEventListener("touchmove",i,o),()=>{e.removeEventListener("mousemove",r,o),e.removeEventListener("touchmove",i,o)}}static bindUp(e,t,o=!1){const r=s=>{t(new ue(s))},i=s=>{s.touches.length===0&&t(new ue(s))};return e.addEventListener("mouseup",r,o),e.addEventListener("touchend",i,o),()=>{e.removeEventListener("mouseup",r,o),e.removeEventListener("touchend",i,o)}}originalEvent({mouse:e,touch:t}){Wt(this.e)?t&&t(this.e):e&&e(this.e)}}class dn{x;y;constructor(e,t){this.x=e,this.y=t}clone(){return new dn(this.x,this.y)}}class si{handle;container;options;unbindDown;unbindMove;unbindUp;constructor(e,t,o={}){this.handle=e,this.container=t,this.options=o,e&&(this.unbindDown=ue.bindDown(e,this.mousedown),e.classList.add("draggable-handle"))}teardown(){this.handle?.classList.remove("draggable-handle"),this.unbindDown&&this.unbindDown(),this.unbindUp&&this.unbindUp(),this.unbindMove&&this.unbindMove()}offsetX;offsetY;mousedown=e=>{e.preventDefault(),this.handle&&(this.offsetX=e.clientX,this.offsetY=e.clientY),this.options.onMoveStart&&this.options.onMoveStart(),this.unbindMove=ue.bindMove(document,this.mousemove),this.unbindUp=ue.bindUp(document,this.mouseup)};mousemove=e=>{this.container&&(this.container.style.left=`calc(${e.clientX-this.offsetX}px + ${this.container.style.left})`,this.container.style.top=`calc(${e.clientY-this.offsetY}px + ${this.container.style.top})`,this.offsetX=e.clientX,this.offsetY=e.clientY),this.options.onMove&&this.options.onMove()};mouseup=e=>{this.options.onMoveEnd&&this.options.onMoveEnd(),this.unbindUp(),this.unbindMove(),this.unbindUp=this.unbindMove=void 0}}class ai{_group;onChange;zIndex;constructor(e,t){this._group=e,this.onChange=t,this.a(o=>o.push(this))}set group(e){this._group=e;const t=ut(this._group),o=ut(e);t.splice(t.indexOf(this),1),o.push(this),Fn()}get group(){return this._group}unregister(){this.a(e=>e.splice(e.indexOf(this),1))}raise(){this.a(e=>{e.splice(e.indexOf(this),1),e.push(this)})}a(e){e(ut(this._group)),Fn()}}const lt=new Map,ci=0;function ut(n){return lt.has(n)||lt.set(n,[]),lt.get(n)}function Do(n,e){return n>e?-Do(e,n):n<0&&e>=0?1:n-e}function Fn(){let n=ci;for(const e of function(t){const o=[];return t.forEach((r,i)=>o.push(i)),o}(lt).sort(Do))for(const t of ut(e))n!=t.zIndex&&(t.zIndex=n,t.onChange(n)),n++}function tn(n){if(n){const{width:e,height:t}=n.style;n.style.width="auto",n.style.height="auto";const o=ht(n);return n.style.width=e,n.style.height=t,o}return{width:0,height:0,top:0,left:0,bottom:0,right:0}}function ht(n){const e=n.getBoundingClientRect(),t=e.width,o=e.height,r=e.top,i=e.left;return{width:t,height:o,top:r,left:i,bottom:r+o,right:i+t}}class li{container;options;handles;constructor(e,t){if(this.container=e,this.options=t,e&&t){this.handles=Po.map(f=>new f(e,this));const{width:o,height:r}=tn(e),i=t.maxWidth||window.innerWidth,s=t.maxHeight||window.innerHeight;let c=!1;(o<t.minWidth||o>i)&&(e.style.width=`${Xn(o,t.minWidth,i)}px`,c=!0),(r<t.minHeight||r>s)&&(e.style.height=`${Xn(r,t.minHeight,s)}px`,c=!0),c&&t.onResize&&t.onResize()}}teardown(){this.handles?.forEach(e=>e.teardown())}}const Po=[];class ke{container;helper;handle;handleSize=8;unbindDown;unbindMove;unbindUp;constructor(e,t){this.container=e,this.helper=t,this.handle=this.createHandleElement(),this.unbindDown=ue.bindDown(this.handle,this.mousedown)}teardown(){this.unbindDown(),this.unbindUp&&this.unbindUp(),this.unbindMove&&this.unbindMove(),this.handle.parentElement.removeChild(this.handle)}x0;y0;left0;top0;width0;height0;mousedown=e=>{e.preventDefault(),e.stopPropagation();const{left:t,top:o,width:r,height:i}=ht(this.container);this.x0=e.clientX,this.y0=e.clientY,this.left0=t,this.top0=o,this.width0=r,this.height0=i,this.calcSafeBoundaries(),this.helper.options&&this.helper.options.onResizeStart&&this.helper.options.onResizeStart(),this.unbindMove=ue.bindMove(document,this.mousemove),this.unbindUp=ue.bindUp(document,this.mouseup)};minLeft;maxLeft;minRight;maxRight;minTop;maxTop;minBottom;maxBottom;calcSafeBoundaries(){if(!this.helper.options)return;const{left:e,top:t,right:o,bottom:r}=ht(this.container),i=this.helper.options,s=i.maxWidth||window.innerWidth,c=i.maxHeight||window.innerHeight;this.minLeft=Math.max(o-s,0),this.maxLeft=o-i.minWidth,this.minRight=e+i.minWidth,this.maxRight=Math.min(e+s,window.innerWidth),this.minTop=Math.max(r-c,0),this.maxTop=r-i.minHeight,this.minBottom=t+i.minHeight,this.maxBottom=Math.min(t+c,window.innerHeight)}mousemove=e=>{e.preventDefault(),e.stopPropagation(),this.setPosition(e),this.fixPosition(),this.helper.options&&this.helper.options.onResize&&this.helper.options.onResize()};fixPosition(){const{width:e,height:t,left:o,top:r,right:i,bottom:s}=ht(this.container),c=this.helper.options;c&&(o<this.minLeft?(this.container.style.width=e+o-this.minLeft+"px",this.container.style.left=`${this.minLeft}px`):o>this.maxLeft?(this.container.style.width=`${c.minWidth}px`,this.container.style.left=`${this.maxLeft}px`):i<this.minRight?this.container.style.width=`${c.minWidth}px`:i>this.maxRight&&(this.container.style.width=this.maxRight-o+"px"),r<this.minTop?(this.container.style.height=t+r-this.minTop+"px",this.container.style.top=`${this.minTop}px`):r>this.maxTop?(this.container.style.height=`${c.minHeight}px`,this.container.style.top=`${this.maxTop}px`):s<this.minBottom?this.container.style.height=`${c.minHeight}px`:s>this.maxBottom&&(this.container.style.height=this.maxBottom-r+"px"))}mouseup=e=>{e.preventDefault(),e.stopPropagation(),this.helper.options&&this.helper.options.onResizeEnd&&this.helper.options.onResizeEnd(),this.unbindUp(),this.unbindMove(),this.unbindUp=this.unbindMove=void 0};createHandleElement(){const e=document.createElement("div"),t=e.style;return t.position="absolute",this.applyStyle(t),this.container.appendChild(e),e}}function Xn(n,e,t){return n<e?e:n>t?t:n}Po.push(class extends ke{setPosition(n){this.container.style.width=this.width0+n.clientX-this.x0+"px",this.container.style.height=this.height0+n.clientY-this.y0+"px"}applyStyle(n){n.width=2*this.handleSize+"px",n.height=2*this.handleSize+"px",n.right=-this.handleSize+"px",n.bottom=-this.handleSize+"px",n.cursor="nwse-resize"}},class extends ke{setPosition(n){this.container.style.height=this.height0+n.clientY-this.y0+"px"}applyStyle(n){n.right=`${this.handleSize}px`,n.left=`${this.handleSize}px`,n.height=2*this.handleSize+"px",n.bottom=-this.handleSize+"px",n.cursor="ns-resize"}},class extends ke{setPosition(n){this.container.style.left=this.left0+n.clientX-this.x0+"px",this.container.style.width=this.width0-(n.clientX-this.x0)+"px",this.container.style.height=this.height0+n.clientY-this.y0+"px"}applyStyle(n){n.left=-this.handleSize+"px",n.bottom=-this.handleSize+"px",n.width=2*this.handleSize+"px",n.height=2*this.handleSize+"px",n.cursor="nesw-resize"}},class extends ke{setPosition(n){this.container.style.left=this.left0+n.clientX-this.x0+"px",this.container.style.width=this.width0-(n.clientX-this.x0)+"px"}applyStyle(n){n.left=-this.handleSize+"px",n.bottom=`${this.handleSize}px`,n.width=2*this.handleSize+"px",n.top=`${this.handleSize}px`,n.cursor="ew-resize"}},class extends ke{setPosition(n){this.container.style.left=this.left0+n.clientX-this.x0+"px",this.container.style.width=this.width0-(n.clientX-this.x0)+"px",this.container.style.top=this.top0+n.clientY-this.y0+"px",this.container.style.height=this.height0-(n.clientY-this.y0)+"px"}applyStyle(n){n.left=-this.handleSize+"px",n.top=-this.handleSize+"px",n.width=2*this.handleSize+"px",n.height=2*this.handleSize+"px",n.cursor="nwse-resize"}},class extends ke{setPosition(n){this.container.style.top=this.top0+n.clientY-this.y0+"px",this.container.style.height=this.height0-(n.clientY-this.y0)+"px"}applyStyle(n){n.left=`${this.handleSize}px`,n.right=`${this.handleSize}px`,n.height=2*this.handleSize+"px",n.top=-this.handleSize+"px",n.cursor="ns-resize"}},class extends ke{setPosition(n){this.container.style.top=this.top0+n.clientY-this.y0+"px",this.container.style.height=this.height0-(n.clientY-this.y0)+"px",this.container.style.width=this.width0+n.clientX-this.x0+"px"}applyStyle(n){n.right=-this.handleSize+"px",n.top=-this.handleSize+"px",n.height=2*this.handleSize+"px",n.width=2*this.handleSize+"px",n.cursor="nesw-resize"}},class extends ke{setPosition(n){this.container.style.width=this.width0+n.clientX-this.x0+"px"}applyStyle(n){n.right=-this.handleSize+"px",n.top=`${this.handleSize}px`,n.bottom=`${this.handleSize}px`,n.width=2*this.handleSize+"px",n.cursor="ew-resize"}});var dt=De({name:"",props:{disabled:{type:Boolean,default:!1},windowStyle:{type:Object,required:!0}},components:{},setup(n){const e=Y(!1),t=Y(!1);return{hover:e,active:t,style:function(){let o=n.windowStyle.button;return e.value&&(o={...o,...this.windowStyle.buttonHover}),t.value&&(o={...o,...this.windowStyle.buttonActive}),o},mouseup:function(o){this.active&&this.$emit("click")},mousedown:function(o){o.preventDefault(),t.value=!0;const r=ue.bindUp(document,()=>{t.value=!1,r()})}}}});const ui=["disabled"];dt.render=function(n,e,t,o,r,i){return X(),fe("div",{class:"btn",style:me(n.style()),onMouseenter:e[0]||(e[0]=s=>n.hover=!0),onMouseleave:e[1]||(e[1]=s=>n.hover=!1),onMousedown:e[2]||(e[2]=qn((...s)=>n.mousedown&&n.mousedown(...s),["stop"])),onTouchstart:e[3]||(e[3]=qn((...s)=>n.mousedown&&n.mousedown(...s),["stop"])),onMouseup:e[4]||(e[4]=(...s)=>n.mouseup&&n.mouseup(...s)),onTouchend:e[5]||(e[5]=(...s)=>n.mouseup&&n.mouseup(...s)),disabled:n.disabled},[ie(n.$slots,"default")],44,ui)},dt.__scopeId="data-v-71662210",dt.__file="src/controls/vuewindow/window/Button.vue";const hi=Object.prototype.toString;function St(n,e){return hi.call(n)===`[object ${e}]`}function di(n){return St(n,"Function")}const fn=n=>n!=null&&n!==null&&St(n,"Object");function Vn(n){return St(n,"Number")}function Bo(n){return St(n,"String")}function fi(n){return n&&Array.isArray(n)}const Ds=n=>/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(n);var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ct(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kn,Yn={exports:{}},pi=(Kn||(Kn=1,Yn.exports=function(n){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(d,l){var v=d[0],m=d[1],p=d[2],y=d[3];m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&p|~m&y)+l[0]-680876936|0)<<7|v>>>25)+m|0)&m|~v&p)+l[1]-389564586|0)<<12|y>>>20)+v|0)&v|~y&m)+l[2]+606105819|0)<<17|p>>>15)+y|0)&y|~p&v)+l[3]-1044525330|0)<<22|m>>>10)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&p|~m&y)+l[4]-176418897|0)<<7|v>>>25)+m|0)&m|~v&p)+l[5]+1200080426|0)<<12|y>>>20)+v|0)&v|~y&m)+l[6]-1473231341|0)<<17|p>>>15)+y|0)&y|~p&v)+l[7]-45705983|0)<<22|m>>>10)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&p|~m&y)+l[8]+1770035416|0)<<7|v>>>25)+m|0)&m|~v&p)+l[9]-1958414417|0)<<12|y>>>20)+v|0)&v|~y&m)+l[10]-42063|0)<<17|p>>>15)+y|0)&y|~p&v)+l[11]-1990404162|0)<<22|m>>>10)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&p|~m&y)+l[12]+1804603682|0)<<7|v>>>25)+m|0)&m|~v&p)+l[13]-40341101|0)<<12|y>>>20)+v|0)&v|~y&m)+l[14]-1502002290|0)<<17|p>>>15)+y|0)&y|~p&v)+l[15]+1236535329|0)<<22|m>>>10)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&y|p&~y)+l[1]-165796510|0)<<5|v>>>27)+m|0)&p|m&~p)+l[6]-1069501632|0)<<9|y>>>23)+v|0)&m|v&~m)+l[11]+643717713|0)<<14|p>>>18)+y|0)&v|y&~v)+l[0]-373897302|0)<<20|m>>>12)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&y|p&~y)+l[5]-701558691|0)<<5|v>>>27)+m|0)&p|m&~p)+l[10]+38016083|0)<<9|y>>>23)+v|0)&m|v&~m)+l[15]-660478335|0)<<14|p>>>18)+y|0)&v|y&~v)+l[4]-405537848|0)<<20|m>>>12)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&y|p&~y)+l[9]+568446438|0)<<5|v>>>27)+m|0)&p|m&~p)+l[14]-1019803690|0)<<9|y>>>23)+v|0)&m|v&~m)+l[3]-187363961|0)<<14|p>>>18)+y|0)&v|y&~v)+l[8]+1163531501|0)<<20|m>>>12)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m&y|p&~y)+l[13]-1444681467|0)<<5|v>>>27)+m|0)&p|m&~p)+l[2]-51403784|0)<<9|y>>>23)+v|0)&m|v&~m)+l[7]+1735328473|0)<<14|p>>>18)+y|0)&v|y&~v)+l[12]-1926607734|0)<<20|m>>>12)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m^p^y)+l[5]-378558|0)<<4|v>>>28)+m|0)^m^p)+l[8]-2022574463|0)<<11|y>>>21)+v|0)^v^m)+l[11]+1839030562|0)<<16|p>>>16)+y|0)^y^v)+l[14]-35309556|0)<<23|m>>>9)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m^p^y)+l[1]-1530992060|0)<<4|v>>>28)+m|0)^m^p)+l[4]+1272893353|0)<<11|y>>>21)+v|0)^v^m)+l[7]-155497632|0)<<16|p>>>16)+y|0)^y^v)+l[10]-1094730640|0)<<23|m>>>9)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m^p^y)+l[13]+681279174|0)<<4|v>>>28)+m|0)^m^p)+l[0]-358537222|0)<<11|y>>>21)+v|0)^v^m)+l[3]-722521979|0)<<16|p>>>16)+y|0)^y^v)+l[6]+76029189|0)<<23|m>>>9)+p|0,m=((m+=((p=((p+=((y=((y+=((v=((v+=(m^p^y)+l[9]-640364487|0)<<4|v>>>28)+m|0)^m^p)+l[12]-421815835|0)<<11|y>>>21)+v|0)^v^m)+l[15]+530742520|0)<<16|p>>>16)+y|0)^y^v)+l[2]-995338651|0)<<23|m>>>9)+p|0,m=((m+=((y=((y+=(m^((v=((v+=(p^(m|~y))+l[0]-198630844|0)<<6|v>>>26)+m|0)|~p))+l[7]+1126891415|0)<<10|y>>>22)+v|0)^((p=((p+=(v^(y|~m))+l[14]-1416354905|0)<<15|p>>>17)+y|0)|~v))+l[5]-57434055|0)<<21|m>>>11)+p|0,m=((m+=((y=((y+=(m^((v=((v+=(p^(m|~y))+l[12]+1700485571|0)<<6|v>>>26)+m|0)|~p))+l[3]-1894986606|0)<<10|y>>>22)+v|0)^((p=((p+=(v^(y|~m))+l[10]-1051523|0)<<15|p>>>17)+y|0)|~v))+l[1]-2054922799|0)<<21|m>>>11)+p|0,m=((m+=((y=((y+=(m^((v=((v+=(p^(m|~y))+l[8]+1873313359|0)<<6|v>>>26)+m|0)|~p))+l[15]-30611744|0)<<10|y>>>22)+v|0)^((p=((p+=(v^(y|~m))+l[6]-1560198380|0)<<15|p>>>17)+y|0)|~v))+l[13]+1309151649|0)<<21|m>>>11)+p|0,m=((m+=((y=((y+=(m^((v=((v+=(p^(m|~y))+l[4]-145523070|0)<<6|v>>>26)+m|0)|~p))+l[11]-1120210379|0)<<10|y>>>22)+v|0)^((p=((p+=(v^(y|~m))+l[2]+718787259|0)<<15|p>>>17)+y|0)|~v))+l[9]-343485551|0)<<21|m>>>11)+p|0,d[0]=v+d[0]|0,d[1]=m+d[1]|0,d[2]=p+d[2]|0,d[3]=y+d[3]|0}function o(d){var l,v=[];for(l=0;l<64;l+=4)v[l>>2]=d.charCodeAt(l)+(d.charCodeAt(l+1)<<8)+(d.charCodeAt(l+2)<<16)+(d.charCodeAt(l+3)<<24);return v}function r(d){var l,v=[];for(l=0;l<64;l+=4)v[l>>2]=d[l]+(d[l+1]<<8)+(d[l+2]<<16)+(d[l+3]<<24);return v}function i(d){var l,v,m,p,y,B,D=d.length,T=[1732584193,-271733879,-1732584194,271733878];for(l=64;l<=D;l+=64)t(T,o(d.substring(l-64,l)));for(v=(d=d.substring(l-64)).length,m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<v;l+=1)m[l>>2]|=d.charCodeAt(l)<<(l%4<<3);if(m[l>>2]|=128<<(l%4<<3),l>55)for(t(T,m),l=0;l<16;l+=1)m[l]=0;return p=(p=8*D).toString(16).match(/(.*?)(.{0,8})$/),y=parseInt(p[2],16),B=parseInt(p[1],16)||0,m[14]=y,m[15]=B,t(T,m),T}function s(d){var l,v,m,p,y,B,D=d.length,T=[1732584193,-271733879,-1732584194,271733878];for(l=64;l<=D;l+=64)t(T,r(d.subarray(l-64,l)));for(v=(d=l-64<D?d.subarray(l-64):new Uint8Array(0)).length,m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<v;l+=1)m[l>>2]|=d[l]<<(l%4<<3);if(m[l>>2]|=128<<(l%4<<3),l>55)for(t(T,m),l=0;l<16;l+=1)m[l]=0;return p=(p=8*D).toString(16).match(/(.*?)(.{0,8})$/),y=parseInt(p[2],16),B=parseInt(p[1],16)||0,m[14]=y,m[15]=B,t(T,m),T}function c(d){var l,v="";for(l=0;l<4;l+=1)v+=e[d>>8*l+4&15]+e[d>>8*l&15];return v}function f(d){var l;for(l=0;l<d.length;l+=1)d[l]=c(d[l]);return d.join("")}function g(d){return/[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),d}function S(d,l){var v,m=d.length,p=new ArrayBuffer(m),y=new Uint8Array(p);for(v=0;v<m;v+=1)y[v]=d.charCodeAt(v);return l?y:p}function k(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function $(d,l,v){var m=new Uint8Array(d.byteLength+l.byteLength);return m.set(new Uint8Array(d)),m.set(new Uint8Array(l),d.byteLength),m}function P(d){var l,v=[],m=d.length;for(l=0;l<m-1;l+=2)v.push(parseInt(d.substr(l,2),16));return String.fromCharCode.apply(String,v)}function M(){this.reset()}return f(i("hello")),typeof ArrayBuffer>"u"||ArrayBuffer.prototype.slice||function(){function d(l,v){return(l=0|l||0)<0?Math.max(l+v,0):Math.min(l,v)}ArrayBuffer.prototype.slice=function(l,v){var m,p,y,B,D=this.byteLength,T=d(l,D),A=D;return v!==n&&(A=d(v,D)),T>A?new ArrayBuffer(0):(m=A-T,p=new ArrayBuffer(m),y=new Uint8Array(p),B=new Uint8Array(this,T,m),y.set(B),p)}}(),M.prototype.append=function(d){return this.appendBinary(g(d)),this},M.prototype.appendBinary=function(d){this._buff+=d,this._length+=d.length;var l,v=this._buff.length;for(l=64;l<=v;l+=64)t(this._hash,o(this._buff.substring(l-64,l)));return this._buff=this._buff.substring(l-64),this},M.prototype.end=function(d){var l,v,m=this._buff,p=m.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(l=0;l<p;l+=1)y[l>>2]|=m.charCodeAt(l)<<(l%4<<3);return this._finish(y,p),v=f(this._hash),d&&(v=P(v)),this.reset(),v},M.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},M.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},M.prototype.setState=function(d){return this._buff=d.buff,this._length=d.length,this._hash=d.hash,this},M.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},M.prototype._finish=function(d,l){var v,m,p,y=l;if(d[y>>2]|=128<<(y%4<<3),y>55)for(t(this._hash,d),y=0;y<16;y+=1)d[y]=0;v=(v=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),m=parseInt(v[2],16),p=parseInt(v[1],16)||0,d[14]=m,d[15]=p,t(this._hash,d)},M.hash=function(d,l){return M.hashBinary(g(d),l)},M.hashBinary=function(d,l){var v=f(i(d));return l?P(v):v},M.ArrayBuffer=function(){this.reset()},M.ArrayBuffer.prototype.append=function(d){var l,v=$(this._buff.buffer,d),m=v.length;for(this._length+=d.byteLength,l=64;l<=m;l+=64)t(this._hash,r(v.subarray(l-64,l)));return this._buff=l-64<m?new Uint8Array(v.buffer.slice(l-64)):new Uint8Array(0),this},M.ArrayBuffer.prototype.end=function(d){var l,v,m=this._buff,p=m.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(l=0;l<p;l+=1)y[l>>2]|=m[l]<<(l%4<<3);return this._finish(y,p),v=f(this._hash),d&&(v=P(v)),this.reset(),v},M.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},M.ArrayBuffer.prototype.getState=function(){var d=M.prototype.getState.call(this);return d.buff=k(d.buff),d},M.ArrayBuffer.prototype.setState=function(d){return d.buff=S(d.buff,!0),M.prototype.setState.call(this,d)},M.ArrayBuffer.prototype.destroy=M.prototype.destroy,M.ArrayBuffer.prototype._finish=M.prototype._finish,M.ArrayBuffer.hash=function(d,l){var v=f(s(new Uint8Array(d)));return l?P(v):v},M}()),Yn.exports),zt=Ct(pi);const jt=[];class de{static addHandler(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o}static removeHandler(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent?e.detachEvent("on"+t,o):delete e["on"+t]}static windowResizeHandler(e){de.addHandler(window,"resize",e)}static offWindowResizeHandler(e){de.removeHandler(window,"resize",e)}static fullscreenEnabled(){const e=window.document;return document.fullscreenEnabled||window.fullScreen||e.mozFullscreenEnabled||e.webkitIsFullScreen}static fullScreen(e,t){if(t){const o=window.document;let r=window.document.exitFullscreen||o.msExitFullscreen||o.mozCancelFullScreen||o.webkitCancelFullScreen;typeof r<"u"&&r?r.call(window.document):typeof window.ActiveXObject<"u"&&new window.ActiveXObject("WScript.Shell")?.SendKeys("{F11}")}else{let o=e;o||(o=window.document.documentElement);let r=o.requestFullScreen||o.webkitRequestFullScreen||o.mozRequestFullScreen||o.msRequestFullScreen;typeof r<"u"&&r?r.call(o):typeof window.ActiveXObject<"u"&&new window.ActiveXObject("WScript.Shell")?.SendKeys("{F11}")}}static requestFullScreen(e=window.document.documentElement){let t=e;var o=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(o)o.call(t);else if(typeof window.ActiveXObject<"u"){var r=new window.ActiveXObject("WScript.Shell");r!==null&&r.SendKeys("{F11}")}}static exitFullScreen(){const e=window.document;var t=document.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.webkitExitFullscreen;if(t)t.call(document);else if(typeof window.ActiveXObject<"u"){var o=new window.ActiveXObject("WScript.Shell");o!==null&&o.SendKeys("{F11}")}}static fullScreenElement(){return window.document.fullscreenElement||window.document.webkitFullscreenElement||window.document.mozFullscreenElement||window.document.msFullscreenElement}static isFullScreen(){return!!de.fullScreenElement()}static onFullScreenChanged(e){let t;"onfullscreenchange"in window.document?t="fullscreenchange":"onwebkitfullscreenchange"in window.document?t="webkitfullscreenchange":"onmozfullscreenchange"in window.document&&(t="mozfullscreenchange"),t?document.addEventListener(t,function(){const o=de.isFullScreen();e(o)}):document.addEventListener("MSFullscreenChange",function(){const o=de.isFullScreen();e(o)})}static stringifyCircularHandler(e,t){if(typeof t=="object"&&t!==null){if(jt.indexOf(t)!==-1)return;jt.push(t)}return t}static jsonStringify(e){if(!e)return"";const t=JSON.stringify(e,de.stringifyCircularHandler);return jt.length=0,t}static jsonParse(e){const t=de.jsonStringify(e);if(t.length>1)return JSON.parse(t)}static getObjectURL(e){let t;const o=window;return o.createObjcectURL!=null?t=o.createOjcectURL(e):window.URL!=null?t=window.URL.createObjectURL(e):window.webkitURL!=null&&(t=window.webkitURL.createObjectURL(e)),t}static getFileShortMD5(e,t){const o=File.prototype,r=o.slice||o.mozSlice||o.webkitSlice,i=e,s=2097152,c=new zt.ArrayBuffer,f=new FileReader;f.onload=function(g){c.append(g.target?.result);const S=c.end();t({isOK:!0,data:S})},f.onerror=function(){t({isOK:!1,data:"计算文件简单摘要错误！"})},function(){const g=0+s>=i.size?i.size:0+s;f.readAsArrayBuffer(r.call(i,0,g))}()}static getFileMD5(e,t){const o=File.prototype,r=o.slice||o.mozSlice||o.webkitSlice,i=e,s=2097152,c=Math.ceil(i.size/s);let f=0;const g=new zt.ArrayBuffer,S=new FileReader;function k(){const $=f*s,P=$+s>=i.size?i.size:$+s;S.readAsArrayBuffer(r.call(i,$,P))}S.onload=function($){if(g.append($.target?.result),f++,f<c)k();else{const P=g.end();t({isOK:!0,data:P})}},S.onerror=function(){const $=`${i.name}:计算文件简单摘要错误！`;t({isOK:!1,data:$})},k()}static MD5(e,t=!1){return zt.hash(e,t)}static copyTextByCommand(e){return new Promise((t,o)=>{const r=document.createElement("input");r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),r.remove(),t(!0)})}static copyText=e=>navigator.clipboard?navigator.clipboard.writeText(e).then(function(){return!0},function(t){return!1}):de.copyTextByCommand(e);static copyElementTextByCommand(e){const t=document.createRange();t.selectNode(document.getElementById(e));const o=window.getSelection();o.rangeCount>0&&o.removeAllRanges(),o.addRange(t);try{return document.execCommand("copy"),o.removeRange(t),!0}catch{return o.removeRange(t),!1}}static copyElementText(e){if(!navigator.clipboard)return de.copyElementTextByCommand(e);const t=document.createRange();t.selectNode(document.getElementById(e));const o=window.getSelection();return o.rangeCount>0&&o.removeAllRanges(),o.addRange(t),navigator.clipboard.writeText(o).then(function(){return o.removeRange(t),!0},function(r){return o.removeRange(t),!1})}static setGrayMode(e){de.toggleClass(e,"grayMode",document.documentElement)}static toggleClass(e,t,o){const r=o||document.body;let{className:i}=r;i=i.replace(t,""),r.className=e?`${i} ${t} `:i}static setCssVar(e,t,o=document.documentElement){o.style.setProperty(e,t)}static dispatchWindowResize(){const e=new Event("resize");window.dispatchEvent(e)}static dispatchElementEvent(e,t="click",o){let r;if(r=Bo(e)?document.getElementById(e):e,r){const i=new Event(t,{bubbles:!0,cancelable:!0});o&&r.addEventListener("ev",s=>{o(s)},!1),r.dispatchEvent(i)}}static getRandomNum(e,t){var o=t-e,r=Math.random();return e+Math.round(r*o)}static merge(e={},t={}){let o,r,i,s;for(e||(e={}),r=0,i=t.length;r<i;r++)for(o in s=t[r],s)e[o]=s[o];return e}static setOptions(e,t){e.hasOwnProperty("options")||(e.options=e.options?Object.create(e.options):{});for(let o in t)e.options[o]=t[o];return e.options}static formatNum(e,t){let o=Math.pow(10,t===void 0?6:t);return Math.round(e*o)/o}static trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}static splitWords(e){return this.trim(e).split(/\s+/)}static emptyImageUrl(){return"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}static debounce(e,t){let o=null;return function(){o&&clearTimeout(o),o=setTimeout(e,t)}}static throttle(e,t){let o=!0;return function(){if(!o)return!1;o=!1,setTimeout(()=>{e(),o=!0},t)}}static dataURLtoBlob(e){let t=e.split(",");if(!t||t.length===0)return;let o=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,s=new Uint8Array(i);for(;i--;)s[i]=r.charCodeAt(i);return new Blob([s],{type:o})}static getElement(e){return typeof e=="string"?document.getElementById(e):e}static getStyle(e,t){let o=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!o||o==="auto")&&document.defaultView){let r=document.defaultView.getComputedStyle(e,null);o=r?r[t]:null}return o==="auto"?null:o}static create(e,t,o){let r=document.createElement(e);return r.className=t||"",o&&o.appendChild(r),r}static removeElement(e){let t=e.parentNode;t&&t.removeChild(e)}static emptyElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)}static hasClass(e,t){if(e.classList!==void 0)return e.classList.contains(t);let o=this.getClass(e);return o.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(o)}static addClass(e,t){if(e.classList!==void 0){let o=this.splitWords(t);for(let r=0,i=o.length;r<i;r++)e.classList.add(o[r])}else if(!this.hasClass(e,t)){let o=this.getClass(e);this.setClass(e,(o?o+" ":"")+t)}}static removeClass(e,t){e.classList!==void 0?e.classList.remove(t):this.setClass(e,this.trim((" "+this.getClass(e)+" ").replace(" "+t+" "," ")))}static setClass(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}static getClass(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}static createSvgElement(e,t,o,r){let i=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");i.setAttribute("class","svg-path"),i.setAttribute("width",e),i.setAttribute("height",t),i.setAttribute("viewBox",`0 0 ${e} ${t}`);let s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",o),i.appendChild(s),r&&r.appendChild(i),i}static parseDom(e,t=!0,o=""){t=t??!1;let r=document.createElement("div");return r.className=o||"",r.innerHTML=e,t?r:r.childNodes}static createVideoHTML(e,t,o){let r=this.create("video",t,o),i=this.create("source","",r);i.setAttribute("src",e),i.setAttribute("type","video/map4");let s=this.create("source","",r);return s.setAttribute("src",e),s.setAttribute("type","video/quicktime"),r}static readFileBytes(e){return new Promise((t,o)=>{const r=new FileReader;r.onload=function(i){const s=r.result,c=s.indexOf("64,"),f=s.substring(c+3);t(f)},r.readAsDataURL(e)})}}class pn{static isNullOrEmpty=e=>e===null||e===""||e===void 0||e.length===0;static isNotEmpty=e=>!(e===null||e===""||e===void 0||e.length===0);static toHump(e){return e.replace(/[\-\/\_](\w)/g,(t,o)=>o.toUpperCase()).replace("views","")}static getFileName(e){const t=e.lastIndexOf("/")+1;let o=e.substring(t);return o=decodeURI(o.split("?")[0]),o}}class No{prefixKey;storage;constructor(e="",t=localStorage){this.prefixKey=e,this.storage=t}getKey(e){return`${this.prefixKey}${e}`.toUpperCase()}set(e,t,o=604800){const r=JSON.stringify({value:t,expire:o!==null?new Date().getTime()+1e3*o:null});this.storage.setItem(this.getKey(e),r)}get(e,t=null){const o=this.storage.getItem(this.getKey(e));if(o)try{const r=JSON.parse(o),{value:i,expire:s}=r;if(s===null||s>=Date.now())return i;this.remove(this.getKey(e))}catch{return t}return t}getJsonObject(e){const t=this.storage.getItem(this.getKey(e));if(t)try{const o=JSON.parse(t);if(o.expire===null||o.expire>=Date.now())return o;this.remove(this.getKey(e))}catch{return}}remove(e){this.storage.removeItem(this.getKey(e))}clear(){this.storage.clear()}setCookie(e,t,o=604800){document.cookie=`${this.getKey(e)}=${t}; Max-Age=${o}`}getCookie(e){const t=document.cookie.split("; ");for(let o=0,r=t.length;o<r;o++){const i=t[o].split("=");if(i[0]===this.getKey(e))return i[1]}return""}removeCookie(e){this.setCookie(e,1,-1)}clearCookie(){const e=document.cookie.match(/[^ =;]+(?==)/g);if(e)for(let t=e.length;t--;)document.cookie=e[t]+"=0;expire="+new Date(0).toUTCString()}}function gi(){let n=[];const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var t=0;t<36;t++){const r=Math.floor(16*Math.random());n[t]=e.substring(r,r+1)}n[14]="4";const o=3&Number(n[19])|8;return n[19]=e.substring(o,o+1),n[8]=n[13]=n[18]=n[23]="-",n.join("")}var Gn;function gn(n){return{all:n=n||new Map,on(e,t){const o=n.get(e);o?o.push(t):n.set(e,[t])},off(e,t){const o=n.get(e);o&&(t?o.splice(o.indexOf(t)>>>0,1):n.set(e,[]))},emit(e,t){let o=n.get(e);o&&o.slice().map(r=>{r(t)}),o=n.get("*"),o&&o.slice().map(r=>{r(e,t)})}}}(function(n){n[n.RGBA=0]="RGBA",n[n.Hex=1]="Hex",n[n.Hsla=2]="Hsla"})(Gn||(Gn={}));const We=gn(),ae={HproseServiceErrorEvent:"HproseServiceError",WebAPIErrorEvent:"WebAPIError",AlertInfoEvent:"AlertInfoEvent",CommonWarnEvent:"CommonWarnEvent",WidgetLoadedEvent:"WidgetLoaded",WidgetLoaded:"WidgetLoaded",WidgetToUnloadEvent:"WidgetToUnloadEvent",WidgetUnLoadedEvent:"WidgetUnLoaded",WidgetLoadedErrorEvent:"WidgetLoadedError",WidgetVisibleChanged:"WidgetVisibleChanged",AxiosRequestErrorEvent:"AxiosRequestErrorEvent",LayoutContainerLoaded:"LayoutContainerLoaded"},mn=(n,e)=>{const t=document.createElement("a");t.download=e,t.style.display="none";const o=new Blob([n],{type:"application/octet-stream"});t.href=URL.createObjectURL(o),document.body.appendChild(t),t.click(),document.body.removeChild(t)};function Ps(n,e){const t=window.URL||window.webkitURL||window,o=new Blob([n]),r=document.createElement("a");r.href=t.createObjectURL(o),r.download=e,r.click(),t.revokeObjectURL(r.href)}const mi=(n,e)=>{const t=JSON.stringify(n,null,2);e?mn(t,e+".json"):We.emit(ae.CommonWarnEvent,"参数JsonID不能为空！")},Bs=(n,e,t)=>{n.get(e,{responseType:"blob"}).then(function(o){mn(o.data,t)}).catch(o=>{We.emit(ae.CommonWarnEvent,"下载文件报错！")})};var Jn,Ot={exports:{}},Qn,Zn,Ut,Ht=(Jn||(Jn=1,Zn=Ot.exports,Ut=function(){var n=function(){},e="undefined",t=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],r={},i=null;function s(P,M){var d=P[M];if(typeof d.bind=="function")return d.bind(P);try{return Function.prototype.bind.call(d,P)}catch{return function(){return Function.prototype.apply.apply(d,[P,arguments])}}}function c(){console.log&&(console.log.apply||Function.prototype.apply.apply(console.log,[console,arguments]))}function f(){for(var P=this.getLevel(),M=0;M<o.length;M++){var d=o[M];this[d]=M<P?n:this.methodFactory(d,P,this.name)}if(this.log=this.debug,typeof console===e&&P<this.levels.SILENT)return"No console available for logging"}function g(P){return function(){typeof console!==e&&(f.call(this),this[P].apply(this,arguments))}}function S(P,M,d){return function(l){return l==="debug"&&(l="log"),typeof console!==e&&(l==="trace"&&t?c:console[l]!==void 0?s(console,l):console.log!==void 0?s(console,"log"):n)}(P)||g.apply(this,arguments)}function k(P,M){var d,l,v,m=this,p="loglevel";function y(){var T;if(typeof window!==e&&p){try{T=window.localStorage[p]}catch{}if(typeof T===e)try{var A=window.document.cookie,j=encodeURIComponent(p),O=A.indexOf(j+"=");O!==-1&&(T=/^([^;]+)/.exec(A.slice(O+j.length+1))[1])}catch{}return m.levels[T]===void 0&&(T=void 0),T}}function B(T){var A=T;if(typeof A=="string"&&m.levels[A.toUpperCase()]!==void 0&&(A=m.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=m.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+T)}typeof P=="string"?p+=":"+P:typeof P=="symbol"&&(p=void 0),m.name=P,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=M||S,m.getLevel=function(){return v??l??d},m.setLevel=function(T,A){return v=B(T),A!==!1&&function(j){var O=(o[j]||"silent").toUpperCase();if(typeof window!==e&&p){try{return void(window.localStorage[p]=O)}catch{}try{window.document.cookie=encodeURIComponent(p)+"="+O+";"}catch{}}}(v),f.call(m)},m.setDefaultLevel=function(T){l=B(T),y()||m.setLevel(T,!1)},m.resetLevel=function(){v=null,function(){if(typeof window!==e&&p){try{window.localStorage.removeItem(p)}catch{}try{window.document.cookie=encodeURIComponent(p)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),f.call(m)},m.enableAll=function(T){m.setLevel(m.levels.TRACE,T)},m.disableAll=function(T){m.setLevel(m.levels.SILENT,T)},m.rebuild=function(){if(i!==m&&(d=B(i.getLevel())),f.call(m),i===m)for(var T in r)r[T].rebuild()},d=B(i?i.getLevel():"WARN");var D=y();D!=null&&(v=B(D)),f.call(m)}(i=new k).getLogger=function(P){if(typeof P!="symbol"&&typeof P!="string"||P==="")throw new TypeError("You must supply a name when creating a logger.");var M=r[P];return M||(M=r[P]=new k(P,i.methodFactory)),M};var $=typeof window!==e?window.log:void 0;return i.noConflict=function(){return typeof window!==e&&window.log===i&&(window.log=$),i},i.getLoggers=function(){return r},i.default=i,i},(Qn=Ot).exports?Qn.exports=Ut():Zn.log=Ut()),Ot.exports);class $o{message;eventBus;constructor(e,t=void 0){e&&(this.message=e),t&&(this.eventBus=t)}msg(e,t=3,o="success"){if(this.message)if(typeof this.message=="function")this.message({type:o,message:e,duration:t});else switch(o){case"info":this.message.info(e,t);break;case"success":this.message.success(e,t);break;case"warning":this.message.warn?this.message.warn(e,t):this.message.warning&&this.message.warning(e,t);break;case"error":this.message.error(e,t)}else{switch(o){case"info":case"success":break;case"warning":break;case"error":o="dark"}this.eventBus&&this.eventBus.emit(ae.AlertInfoEvent,{type:o,info:e})}}info(e,t=3){this.msg(e,t,"info")}warn(e,t=3){this.msg(e,t,"warning")}err(e,t=3){this.msg(e,t,"error")}success(e,t=3){this.msg(e,t,"success")}}let eo=!1;const W={Config:SysConfig,EventBus:We,DefaultProxyClient:null,Axios:oi,Message:new $o(void 0,We),LayoutMap:new Map,getLayoutManager:n=>{if(!W.WidgetConfigList||W.WidgetConfigList.length===0)return;const e=W.WidgetConfigList.find(t=>t.id===n);if(e){const t=e.layoutID;if(t&&W.LayoutMap.has(t))return W.LayoutMap.get(t)}},Logger:n=>{eo||(SysConfig.UI.ProductLog?Ht.enableAll():Ht.setDefaultLevel("warn"),eo=!0);const e=n||"default";return Ht.getLogger(e)}},Wo="access_token",Ve=new No("user",localStorage);function ze(){return Ve.get(Wo)}function zo(){Ve.remove(Wo)}function vi(){return ze()?.refresh}function vn(n,e,t,o="json",r){const i={baseURL:W.Config.ServiceURL.DefaultWebAPI,timeout:6e4,params:n,paramsSerializer:{serialize:function(s){return ri.stringify(s,{indices:!1,arrayFormat:"repeat"})}},headers:{"Content-Type":"application/json",Authorization:"bearer "+ze()?.token},responseType:o,cancelToken:r};if(t)for(let s in t)i.headers[s]=t[s];return W.SystemID&&(i.headers.sysid=W.SystemID,W.SystemGroup&&(i.headers.sysgroup=W.SystemGroup)),e!==void 0&&(i.baseURL=e),i}function ye(n,e,t,o,r="json",i,s){const c=vn(t,e,o,r,i);return s&&s>=2e4&&(c.timeout=s),W.Axios?.get(n,c).catch(function(f){yn(f,c.baseURL,n,"Get")})}function yn(n,e,t,o="Get"){const r=`${e}${t}`;if(n&&n.response){let i=!1;const s=n.response.status;switch(s){case 400:n.message="错误请求";break;case 401:n.message="未授权，请重新登录";break;case 403:n.message="拒绝访问";break;case 404:n.message="请求错误,未找到该资源";break;case 405:n.message="请求方法未允许";break;case 408:n.message="请求超时";break;case 500:const f=n.response.data;if(f){const g=f.indexOf(":"),S=f.indexOf(`
`);if(g>0&&S-g>2){const k=f.substring(g+2,S);k.indexOf("System.Exception")>0?n.message="后台服务内部出错！":(i=!0,n.message=k)}else i=!0,n.message=f}else n.message="服务器端出错";break;case 501:n.message="网络未实现";break;case 502:n.message="网络错误";break;case 503:n.message="服务不可用";break;case 504:n.message="网络超时";break;case 505:n.message="http版本不支持该请求";break;default:n.message=`连接错误${n.response.status}`}let c={address:r,code:s,isExceptionInfo:i,message:n.message,result:n.response.data};if(W.EventBus.emit(ae.AxiosRequestErrorEvent,c),i)throw new Error(n.message)}else if(n?.message)throw new Error(n.message)}function Ns(n,e,t,o,r,i="json",s){const c=vn(o,e,r,i);c.headers["Content-Type"]="multipart/form-data";const f=function(g){let S=new FormData;return g&&Object.keys(g).forEach(k=>{if(!g)return;let $=g[k];$!=null&&(fi($)?$.forEach(P=>{S.append(k,to(P))}):S.append(k,to($)))}),S}(t);return W.Axios?.post(n,f,c).catch(function(g){yn(g,e,c.baseURL,"Post")})}function yi(n,e,t,o,r,i="json",s){const c=vn(o,e,r,i);return W.Axios?.post(n,t,c).catch(function(f){yn(f,e,n,"Post")})}function $s(n,e,t=!1){return n.startsWith("http")?ye("",n,e):t||e?ye(n,void 0,e):ye(n,"",void 0)}function to(n){return n instanceof Blob?n:n.toString()}function Ws(n,e,t){const o=e??pn.getFileName(n);ye("",n,t,void 0,"blob").then(r=>{r.data&&mn(r.data,o)})}var no,oo,qt,ro,Ft,io,Xt,so,ao,Ze={exports:{}};function wi(){return oo?no:(oo=1,n=typeof window<"u"?window:Ne!==void 0?Ne:typeof self<"u"?self:{},no=n);var n}function bi(){if(ro)return qt;ro=1,qt=function(e){if(!e)return!1;var t=n.call(e);return t==="[object Function]"||typeof e=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString;return qt}function _i(){if(io)return Ft;io=1;var n=function(e){return e.replace(/^\s+|\s+$/g,"")};return Ft=function(e){if(!e)return{};for(var t,o={},r=n(e).split(`
`),i=0;i<r.length;i++){var s=r[i],c=s.indexOf(":"),f=n(s.slice(0,c)).toLowerCase(),g=n(s.slice(c+1));o[f]===void 0?o[f]=g:(t=o[f],Object.prototype.toString.call(t)==="[object Array]"?o[f].push(g):o[f]=[o[f],g])}return o},Ft}var Si=function(){if(ao)return Ze.exports;ao=1;var n=wi(),e=bi(),t=_i(),o=function(){if(so)return Xt;so=1,Xt=function(){for(var f={},g=0;g<arguments.length;g++){var S=arguments[g];for(var k in S)c.call(S,k)&&(f[k]=S[k])}return f};var c=Object.prototype.hasOwnProperty;return Xt}();function r(c,f,g){var S=c;return e(f)?(g=f,typeof c=="string"&&(S={uri:c})):S=o(f,{uri:c}),S.callback=g,S}function i(c,f,g){return s(f=r(c,f,g))}function s(c){if(c.callback===void 0)throw new Error("callback argument missing");var f=!1,g=function(A,j,O){f||(f=!0,c.callback(A,j,O))};function S(){var A=void 0;if(A=d.response?d.response:d.responseText||function(j){try{if(j.responseType==="document")return j.responseXML;var O=j.responseXML&&j.responseXML.documentElement.nodeName==="parsererror";if(j.responseType===""&&!O)return j.responseXML}catch{}return null}(d),D)try{A=JSON.parse(A)}catch{}return A}function k(A){return clearTimeout(l),A instanceof Error||(A=new Error(""+(A||"Unknown XMLHttpRequest Error"))),A.statusCode=0,g(A,T)}function $(){if(!M){var A;clearTimeout(l),A=c.useXDR&&d.status===void 0?200:d.status===1223?204:d.status;var j=T,O=null;return A!==0?(j={body:S(),statusCode:A,method:m,headers:{},url:v,rawRequest:d},d.getAllResponseHeaders&&(j.headers=t(d.getAllResponseHeaders()))):O=new Error("Internal XMLHttpRequest Error"),g(O,j,j.body)}}var P,M,d=c.xhr||null;d||(d=c.cors||c.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var l,v=d.url=c.uri||c.url,m=d.method=c.method||"GET",p=c.body||c.data,y=d.headers=c.headers||{},B=!!c.sync,D=!1,T={body:void 0,headers:{},statusCode:0,method:m,url:v,rawRequest:d};if("json"in c&&c.json!==!1&&(D=!0,y.accept||y.Accept||(y.Accept="application/json"),m!=="GET"&&m!=="HEAD"&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),p=JSON.stringify(c.json===!0?p:c.json))),d.onreadystatechange=function(){d.readyState===4&&setTimeout($,0)},d.onload=$,d.onerror=k,d.onprogress=function(){},d.onabort=function(){M=!0},d.ontimeout=k,d.open(m,v,!B,c.username,c.password),B||(d.withCredentials=!!c.withCredentials),!B&&c.timeout>0&&(l=setTimeout(function(){if(!M){M=!0,d.abort("timeout");var A=new Error("XMLHttpRequest timeout");A.code="ETIMEDOUT",k(A)}},c.timeout)),d.setRequestHeader)for(P in y)y.hasOwnProperty(P)&&d.setRequestHeader(P,y[P]);else if(c.headers&&!function(A){for(var j in A)if(A.hasOwnProperty(j))return!1;return!0}(c.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in c&&(d.responseType=c.responseType),"beforeSend"in c&&typeof c.beforeSend=="function"&&c.beforeSend(d),d.send(p||null),d}return Ze.exports=i,Ze.exports.default=i,i.XMLHttpRequest=n.XMLHttpRequest||function(){},i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:n.XDomainRequest,function(c,f){for(var g=0;g<c.length;g++)f(c[g])}(["get","put","post","patch","head","delete"],function(c){i[c==="delete"?"del":c]=function(f,g,S){return(g=r(f,g,S)).method=c.toUpperCase(),s(g)}}),Ze.exports}(),Ci=Ct(Si);const Ei=[200,201,202,204,308],ki=[408,502,503,504];class Ii{endpoint;file;headers;method;chunkSize;attempts;delayBeforeAttempt;md5;chunk;chunkCount;chunkByteSize;maxFileBytes;endpointValue;totalChunks;attemptCount;offline;paused;success;currentXhr;reader;eventTarget;fileName;constructor(e){this.endpoint=e.endpoint,this.file=e.file,this.fileName=encodeURI(this.file.name),this.headers=e.headers||{},this.method=e.method||"PUT",this.chunkSize=e.chunkSize||5120,this.attempts=e.attempts||5,this.delayBeforeAttempt=e.delayBeforeAttempt||1,this.md5=e.md5||"",this.maxFileBytes=1024*(e.maxFileSize||0),this.chunkCount=0,this.chunkByteSize=1024*this.chunkSize,this.totalChunks=Math.ceil(this.file.size/this.chunkByteSize),this.attemptCount=0,this.offline=!1,this.paused=!1,this.success=!1,this.reader=new FileReader,this.eventTarget=gn(),this.validateOptions(),this.getEndpoint().then(()=>this.sendChunks()),typeof window<"u"&&(window.addEventListener("online",()=>{this.offline&&(this.offline=!1,this.dispatch("online"),this.sendChunks())}),window.addEventListener("offline",()=>{this.offline=!0,this.dispatch("offline")}))}on(e,t){this.eventTarget.on(e,t)}abort(){this.pause(),this.currentXhr?.abort()}pause(){this.paused=!0}resume(){this.paused&&(this.paused=!1,this.sendChunks())}dispatch(e,t){this.eventTarget.emit(e,t)}validateOptions(){if(!this.endpoint||typeof this.endpoint!="function"&&typeof this.endpoint!="string")throw new TypeError("endpoint必须为：文件上传URL字符串，或返回地址的函数！");if(!(this.file instanceof File))throw new TypeError("file必须为文件对象");if(this.headers&&typeof this.headers!="object")throw new TypeError("文件头必须为对象或空！");if(this.chunkSize&&(typeof this.chunkSize!="number"||this.chunkSize<=0||this.chunkSize%256!=0))throw new TypeError("chunkSize必须大于0,并是256的整数倍");if(this.maxFileBytes>0&&this.maxFileBytes<this.file.size)throw new Error(`文件大小超过最大允许值：(${this.file.size} > ${this.maxFileBytes})`);if(this.attempts&&(typeof this.attempts!="number"||this.attempts<=0))throw new TypeError("重试次数必须为正数！");if(this.delayBeforeAttempt&&(typeof this.delayBeforeAttempt!="number"||this.delayBeforeAttempt<0))throw new TypeError("延时重试时间必须为正数！默认为1")}getEndpoint(){return typeof this.endpoint=="string"?(this.endpointValue=this.endpoint,Promise.resolve(this.endpoint)):this.endpoint(this.file).then(e=>(this.endpointValue=e,this.endpointValue))}getChunk(){return new Promise(e=>{const t=this.totalChunks===1?this.file.size:this.chunkByteSize,o=t*this.chunkCount;this.reader.onload=()=>{this.reader.result!==null&&(this.chunk=new Blob([this.reader.result],{type:"application/octet-stream"})),e(()=>{})},this.reader.readAsArrayBuffer(this.file.slice(o,o+t))})}xhrPromise(e){const t=o=>{o.upload.onprogress=r=>{const i=100/this.totalChunks,s=i*this.file.size,c=i*this.chunkCount,f=r.loaded/(r.total??s)*i;this.dispatch("progress",Math.min(c+f,100))}};return new Promise((o,r)=>{this.currentXhr=Ci({...e,beforeSend:t},(i,s)=>(this.currentXhr=void 0,i?r(i):o(s)))})}sendChunk(){if(!this.chunk)return;const e=this.chunkCount*this.chunkByteSize,t=e+this.chunk.size-1,o={...this.headers,FileName:this.fileName,FileMD5:this.md5,"Content-Type":this.file.type,"Content-Range":`bytes ${e}-${t}/${this.file.size}`};if(this.dispatch("attempt",{chunkNumber:this.chunkCount,chunkSize:this.chunk.size}),this.endpointValue)return this.xhrPromise({headers:o,url:this.endpointValue,method:this.method,body:this.chunk});this.dispatch("error",{message:"文件上传endpointValue不能为空！取消上传！",chunk:this.chunkCount,attempts:this.attemptCount})}manageRetries(){if(this.attemptCount<this.attempts)return setTimeout(()=>this.sendChunks(),1e3*this.delayBeforeAttempt),void this.dispatch("attemptFailure",{message:`上传分片：${this.chunkCount}失败。还会再尝试 ${this.attempts-this.attemptCount}次！`,chunkNumber:this.chunkCount,attemptsLeft:this.attempts-this.attemptCount});this.dispatch("error",{message:`上传分片错误： ${this.chunkCount}。停止尝试，取消上传！`,chunk:this.chunkCount,attempts:this.attemptCount})}sendChunks(){!(this.paused||this.offline||this.success)&&this.getChunk().then(()=>this.sendChunk()).then(e=>{if(this.attemptCount=this.attemptCount+1,e!=null&&Ei.includes(e.statusCode)){this.dispatch("chunkSuccess",{chunk:this.chunkCount,attempts:this.attemptCount,response:e}),this.attemptCount=0,this.chunkCount=this.chunkCount+1,this.chunkCount<this.totalChunks?this.sendChunks():(this.success=!0,this.dispatch("success"));const t=this.chunkCount/this.totalChunks*this.file.size*100/this.file.size;this.dispatch("progress",t)}else if(e!=null&&ki.includes(e.statusCode)){if(this.paused||this.offline)return;this.manageRetries()}else{if(this.paused||this.offline)return;this.dispatch("error",{message:`服务器错误:${e?.statusCode}，停止上传。`,chunkNumber:this.chunkCount,attempts:this.attemptCount})}}).catch(e=>{this.paused||this.offline||this.manageRetries()})}}const zs=n=>new Ii(n);class gt{hproseURL;client;hproseProxy;static httpTransport;constructor(e){if(e&&!pn.isNullOrEmpty(e)){if(gt.httpTransport||(gt.httpTransport=new ii.HttpTransport),this.client=new ct.Client(e),!this.client)throw Error("Hprose Client初始化错误");this.hproseURL=e,this.init()}}init(){this.client&&this.client.useServiceAsync().then(e=>{this.hproseProxy=e}).catch(e=>{String(e).indexOf("find this method ~")>0?this.hproseProxy=this.client?.useService():We.emit(ae.HproseServiceErrorEvent,"初始化默认Hprose!")})}async getProxy(){if(!this.hproseProxy)try{this.client&&(this.hproseProxy=await this.client.useServiceAsync())}catch{this.hproseProxy=this.client?.useService()}return this.hproseProxy}async invoke(e,t,o){if(this.client)return await this.client.invoke(e,t,o)}encode(e,t,o){if(this.client)return this.client.codec.encode(e,t,o)}decode(e,t){if(this.client)return this.client.codec.decode(e,t)}}class nn{hproseClient;hpProxyObj;defaultContext=new ct.ClientContext;constructor(e){this.hproseClient=new gt(e),this.hpProxyObj=null}getClientContext(e,t){const o={};t&&(o.requestHeaders=t);const r=ze();o.httpRequestHeaders=e||{};const i=o.httpRequestHeaders;return r&&(i.token=r.token),W.SystemID&&(i.sysid=W.SystemID,W.SystemGroup&&(i.sysgroup=W.SystemGroup)),new ct.ClientContext(o)}async getHproseProxy(){if(!this.hproseClient)throw new Error("HproseClient对象为构建，无法调用Hprose方法");if(!this.hpProxyObj){const e=await this.hproseClient.getProxy();this.hpProxyObj=e}return this.hpProxyObj||We.emit(ae.HproseServiceErrorEvent,"HproseProxy对象为空，无法调用Hprose方法！"),this.hpProxyObj}async hproseInvoke(e,t,o){if(!this.hproseClient)throw new Error("HproseClient对象为构建，无法调用Hprose方法");return await this.hproseClient.invoke(e,t,o)}async hproseInvokeContext(e,t,...o){if(!this.hproseClient)throw new Error("HproseClient对象为构建，无法调用Hprose方法");const r=ze();return r&&(t||(t=new ct.ClientContext({httpRequestHeaders:{token:r.token}}))),await this.hproseClient.invoke(e,o,t)}async hproseInvokeEncode(e){const t=new le.ByteStream(e).toBytes(),o=await this.hproseClient.client?.request(t,this.defaultContext);return o&&this.hproseClient.client?.codec.decode(o,this.defaultContext)}encodeRequest(e,...t){const o=this.hproseClient.client?.codec?.encode(e,t,this.defaultContext);return le.ByteStream.toString(o)}}const js=function(n,e,t){!W.Config.DefaultHproseAPI&&W.Config.ServiceURL&&(W.Config.DefaultHproseAPI=W.Config.ServiceURL.DefaultHproseAPI),W.Config.DefaultHproseAPI&&pn.isNotEmpty(W.Config.DefaultHproseAPI)&&(W.DefaultProxyClient=new nn(W.Config.DefaultHproseAPI));const o=W.Config.UI.GrayMode;o&&de.setGrayMode(o);const r=new $o(n,W.EventBus);W.Message=r,W.SystemID=e,W.SystemGroup=t,W.EventBus.on(ae.HproseServiceErrorEvent,i=>{const s=`当前后台业务服务不可用!${i}`}),W.EventBus.on(ae.WebAPIErrorEvent,i=>{const s=`WebAPI后台服务不可用!${i}`}),W.EventBus.on(ae.AxiosRequestErrorEvent,i=>{const s=`Http请求'${i.code}'错误: ${i.message}`}),W.EventBus.on(ae.CommonWarnEvent,i=>{r.warn(i)})},qe=xo({isLock:!1,lockTime:0});function on(n){qe.isLock=n,n&&zo()}let Vt;function Xe(){clearInterval(Vt),!(window.location.href.indexOf("/login")>0||qe.isLock)&&(on(!1),qe.lockTime=function(){let n=3600;return W.Config.UI?.LockTime&&W.Config.UI?.LockTime>=10&&(n=W.Config.UI.LockTime),n}(),Vt=setInterval(()=>{if(qe.lockTime--,qe.lockTime<=0)return on(!0),clearInterval(Vt)},1e3))}function Os(){Xe(),document.addEventListener("mousedown",Xe),document.addEventListener("mousemove",Xe)}function Us(){document.removeEventListener("mousedown",Xe),document.removeEventListener("mousemove",Xe)}function Kt(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var co,lo={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var uo,xi=(co||(co=1,lo.exports=function n(e,t,o){function r(c,f){if(!t[c]){if(!e[c]){if(!f&&Kt)return Kt(c);if(i)return i(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var S=t[c]={exports:{}};e[c][0].call(S.exports,function(k){var $=e[c][1][k];return r($||k)},S,S.exports,n,e,t,o)}return t[c].exports}for(var i=Kt,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(n,e,t){(function(o){var r,i,s=o.MutationObserver||o.WebKitMutationObserver;if(s){var c=0,f=new s($),g=o.document.createTextNode("");f.observe(g,{characterData:!0}),r=function(){g.data=c=++c%2}}else if(o.setImmediate||o.MessageChannel===void 0)r="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var M=o.document.createElement("script");M.onreadystatechange=function(){$(),M.onreadystatechange=null,M.parentNode.removeChild(M),M=null},o.document.documentElement.appendChild(M)}:function(){setTimeout($,0)};else{var S=new o.MessageChannel;S.port1.onmessage=$,r=function(){S.port2.postMessage(0)}}var k=[];function $(){var M,d;i=!0;for(var l=k.length;l;){for(d=k,k=[],M=-1;++M<l;)d[M]();l=k.length}i=!1}function P(M){k.push(M)!==1||i||r()}e.exports=P}).call(this,Ne!==void 0?Ne:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,e,t){var o=n(1);function r(){}var i={},s=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,p!==r&&P(this,p)}function S(p,y,B){this.promise=p,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}function k(p,y,B){o(function(){var D;try{D=y(B)}catch(T){return i.reject(p,T)}D===p?i.reject(p,new TypeError("Cannot resolve promise with itself")):i.resolve(p,D)})}function $(p){var y=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof y=="function")return function(){y.apply(p,arguments)}}function P(p,y){var B=!1;function D(O){B||(B=!0,i.reject(p,O))}function T(O){B||(B=!0,i.resolve(p,O))}function A(){y(T,D)}var j=M(A);j.status==="error"&&D(j.value)}function M(p,y){var B={};try{B.value=p(y),B.status="success"}catch(D){B.status="error",B.value=D}return B}function d(p){return p instanceof this?p:i.resolve(new this(r),p)}function l(p){var y=new this(r);return i.reject(y,p)}function v(p){var y=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=p.length,D=!1;if(!B)return this.resolve([]);for(var T=new Array(B),A=0,j=-1,O=new this(r);++j<B;)L(p[j],j);return O;function L(H,F){function ce(oe){T[F]=oe,++A!==B||D||(D=!0,i.resolve(O,T))}y.resolve(H).then(ce,function(oe){D||(D=!0,i.reject(O,oe))})}}function m(p){var y=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=p.length,D=!1;if(!B)return this.resolve([]);for(var T=-1,A=new this(r);++T<B;)j(p[T]);return A;function j(O){y.resolve(O).then(function(L){D||(D=!0,i.resolve(A,L))},function(L){D||(D=!0,i.reject(A,L))})}}e.exports=g,g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,y){if(typeof p!="function"&&this.state===c||typeof y!="function"&&this.state===s)return this;var B=new this.constructor(r);return this.state!==f?k(B,this.state===c?p:y,this.outcome):this.queue.push(new S(B,p,y)),B},S.prototype.callFulfilled=function(p){i.resolve(this.promise,p)},S.prototype.otherCallFulfilled=function(p){k(this.promise,this.onFulfilled,p)},S.prototype.callRejected=function(p){i.reject(this.promise,p)},S.prototype.otherCallRejected=function(p){k(this.promise,this.onRejected,p)},i.resolve=function(p,y){var B=M($,y);if(B.status==="error")return i.reject(p,B.value);var D=B.value;if(D)P(p,D);else{p.state=c,p.outcome=y;for(var T=-1,A=p.queue.length;++T<A;)p.queue[T].callFulfilled(y)}return p},i.reject=function(p,y){p.state=s,p.outcome=y;for(var B=-1,D=p.queue.length;++B<D;)p.queue[B].callRejected(y);return p},g.resolve=d,g.reject=l,g.all=v,g.race=m},{1:1}],3:[function(n,e,t){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,Ne!==void 0?Ne:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,e,t){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function r(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function i(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var s=i();function c(){try{if(!s||!s.open)return!1;var a=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),u=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!a||u)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(a,u){a=a||[],u=u||{};try{return new Blob(a,u)}catch(w){if(w.name!=="TypeError")throw w;for(var h=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),b=0;b<a.length;b+=1)h.append(a[b]);return h.getBlob(u.type)}}typeof Promise>"u"&&n(3);var g=Promise;function S(a,u){u&&a.then(function(h){u(null,h)},function(h){u(h)})}function k(a,u,h){typeof u=="function"&&a.then(u),typeof h=="function"&&a.catch(h)}function $(a){return typeof a!="string"&&(a=String(a)),a}function P(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var M="local-forage-detect-blob-support",d=void 0,l={},v=Object.prototype.toString,m="readonly",p="readwrite";function y(a){for(var u=a.length,h=new ArrayBuffer(u),b=new Uint8Array(h),w=0;w<u;w++)b[w]=a.charCodeAt(w);return h}function B(a){return new g(function(u){var h=a.transaction(M,p),b=f([""]);h.objectStore(M).put(b,"key"),h.onabort=function(w){w.preventDefault(),w.stopPropagation(),u(!1)},h.oncomplete=function(){var w=navigator.userAgent.match(/Chrome\/(\d+)/),_=navigator.userAgent.match(/Edge\//);u(_||!w||parseInt(w[1],10)>=43)}}).catch(function(){return!1})}function D(a){return typeof d=="boolean"?g.resolve(d):B(a).then(function(u){return d=u})}function T(a){var u=l[a.name],h={};h.promise=new g(function(b,w){h.resolve=b,h.reject=w}),u.deferredOperations.push(h),u.dbReady?u.dbReady=u.dbReady.then(function(){return h.promise}):u.dbReady=h.promise}function A(a){var u=l[a.name].deferredOperations.pop();if(u)return u.resolve(),u.promise}function j(a,u){var h=l[a.name].deferredOperations.pop();if(h)return h.reject(u),h.promise}function O(a,u){return new g(function(h,b){if(l[a.name]=l[a.name]||En(),a.db){if(!u)return h(a.db);T(a),a.db.close()}var w=[a.name];u&&w.push(a.version);var _=s.open.apply(s,w);u&&(_.onupgradeneeded=function(C){var I=_.result;try{I.createObjectStore(a.storeName),C.oldVersion<=1&&I.createObjectStore(M)}catch(x){if(x.name!=="ConstraintError")throw x}}),_.onerror=function(C){C.preventDefault(),b(_.error)},_.onsuccess=function(){var C=_.result;C.onversionchange=function(I){I.target.close()},h(C),A(a)}})}function L(a){return O(a,!1)}function H(a){return O(a,!0)}function F(a,u){if(!a.db)return!0;var h=!a.db.objectStoreNames.contains(a.storeName),b=a.version<a.db.version,w=a.version>a.db.version;if(b&&(a.version,a.version=a.db.version),w||h){if(h){var _=a.db.version+1;_>a.version&&(a.version=_)}return!0}return!1}function ce(a){return new g(function(u,h){var b=new FileReader;b.onerror=h,b.onloadend=function(w){var _=btoa(w.target.result||"");u({__local_forage_encoded_blob:!0,data:_,type:a.type})},b.readAsBinaryString(a)})}function oe(a){return f([y(atob(a.data))],{type:a.type})}function we(a){return a&&a.__local_forage_encoded_blob}function Ge(a){var u=this,h=u._initReady().then(function(){var b=l[u._dbInfo.name];if(b&&b.dbReady)return b.dbReady});return k(h,a,a),h}function It(a){T(a);for(var u=l[a.name],h=u.forages,b=0;b<h.length;b++){var w=h[b];w._dbInfo.db&&(w._dbInfo.db.close(),w._dbInfo.db=null)}return a.db=null,L(a).then(function(_){return a.db=_,F(a)?H(a):_}).then(function(_){a.db=u.db=_;for(var C=0;C<h.length;C++)h[C]._dbInfo.db=_}).catch(function(_){throw j(a,_),_})}function ge(a,u,h,b){b===void 0&&(b=1);try{var w=a.db.transaction(a.storeName,u);h(null,w)}catch(_){if(b>0&&(!a.db||_.name==="InvalidStateError"||_.name==="NotFoundError"))return g.resolve().then(function(){if(!a.db||_.name==="NotFoundError"&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),H(a)}).then(function(){return It(a).then(function(){ge(a,u,h,b-1)})}).catch(h);h(_)}}function En(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Zo(a){var u=this,h={db:null};if(a)for(var b in a)h[b]=a[b];var w=l[h.name];w||(w=En(),l[h.name]=w),w.forages.push(u),u._initReady||(u._initReady=u.ready,u.ready=Ge);var _=[];function C(){return g.resolve()}for(var I=0;I<w.forages.length;I++){var x=w.forages[I];x!==u&&_.push(x._initReady().catch(C))}var R=w.forages.slice(0);return g.all(_).then(function(){return h.db=w.db,L(h)}).then(function(N){return h.db=N,F(h,u._defaultConfig.version)?H(h):N}).then(function(N){h.db=w.db=N,u._dbInfo=h;for(var z=0;z<R.length;z++){var q=R[z];q!==u&&(q._dbInfo.db=h.db,q._dbInfo.version=h.version)}})}function er(a,u){var h=this;a=$(a);var b=new g(function(w,_){h.ready().then(function(){ge(h._dbInfo,m,function(C,I){if(C)return _(C);try{var x=I.objectStore(h._dbInfo.storeName).get(a);x.onsuccess=function(){var R=x.result;R===void 0&&(R=null),we(R)&&(R=oe(R)),w(R)},x.onerror=function(){_(x.error)}}catch(R){_(R)}})}).catch(_)});return S(b,u),b}function tr(a,u){var h=this,b=new g(function(w,_){h.ready().then(function(){ge(h._dbInfo,m,function(C,I){if(C)return _(C);try{var x=I.objectStore(h._dbInfo.storeName).openCursor(),R=1;x.onsuccess=function(){var N=x.result;if(N){var z=N.value;we(z)&&(z=oe(z));var q=a(z,N.key,R++);q!==void 0?w(q):N.continue()}else w()},x.onerror=function(){_(x.error)}}catch(N){_(N)}})}).catch(_)});return S(b,u),b}function nr(a,u,h){var b=this;a=$(a);var w=new g(function(_,C){var I;b.ready().then(function(){return I=b._dbInfo,v.call(u)==="[object Blob]"?D(I.db).then(function(x){return x?u:ce(u)}):u}).then(function(x){ge(b._dbInfo,p,function(R,N){if(R)return C(R);try{var z=N.objectStore(b._dbInfo.storeName);x===null&&(x=void 0);var q=z.put(x,a);N.oncomplete=function(){x===void 0&&(x=null),_(x)},N.onabort=N.onerror=function(){var V=q.error?q.error:q.transaction.error;C(V)}}catch(V){C(V)}})}).catch(C)});return S(w,h),w}function or(a,u){var h=this;a=$(a);var b=new g(function(w,_){h.ready().then(function(){ge(h._dbInfo,p,function(C,I){if(C)return _(C);try{var x=I.objectStore(h._dbInfo.storeName).delete(a);I.oncomplete=function(){w()},I.onerror=function(){_(x.error)},I.onabort=function(){var R=x.error?x.error:x.transaction.error;_(R)}}catch(R){_(R)}})}).catch(_)});return S(b,u),b}function rr(a){var u=this,h=new g(function(b,w){u.ready().then(function(){ge(u._dbInfo,p,function(_,C){if(_)return w(_);try{var I=C.objectStore(u._dbInfo.storeName).clear();C.oncomplete=function(){b()},C.onabort=C.onerror=function(){var x=I.error?I.error:I.transaction.error;w(x)}}catch(x){w(x)}})}).catch(w)});return S(h,a),h}function ir(a){var u=this,h=new g(function(b,w){u.ready().then(function(){ge(u._dbInfo,m,function(_,C){if(_)return w(_);try{var I=C.objectStore(u._dbInfo.storeName).count();I.onsuccess=function(){b(I.result)},I.onerror=function(){w(I.error)}}catch(x){w(x)}})}).catch(w)});return S(h,a),h}function sr(a,u){var h=this,b=new g(function(w,_){a<0?w(null):h.ready().then(function(){ge(h._dbInfo,m,function(C,I){if(C)return _(C);try{var x=I.objectStore(h._dbInfo.storeName),R=!1,N=x.openKeyCursor();N.onsuccess=function(){var z=N.result;z?a===0||R?w(z.key):(R=!0,z.advance(a)):w(null)},N.onerror=function(){_(N.error)}}catch(z){_(z)}})}).catch(_)});return S(b,u),b}function ar(a){var u=this,h=new g(function(b,w){u.ready().then(function(){ge(u._dbInfo,m,function(_,C){if(_)return w(_);try{var I=C.objectStore(u._dbInfo.storeName).openKeyCursor(),x=[];I.onsuccess=function(){var R=I.result;R?(x.push(R.key),R.continue()):b(x)},I.onerror=function(){w(I.error)}}catch(R){w(R)}})}).catch(w)});return S(h,a),h}function cr(a,u){u=P.apply(this,arguments);var h=this.config();(a=typeof a!="function"&&a||{}).name||(a.name=a.name||h.name,a.storeName=a.storeName||h.storeName);var b,w=this;if(a.name){var _=a.name===h.name&&w._dbInfo.db?g.resolve(w._dbInfo.db):L(a).then(function(C){var I=l[a.name],x=I.forages;I.db=C;for(var R=0;R<x.length;R++)x[R]._dbInfo.db=C;return C});b=a.storeName?_.then(function(C){if(C.objectStoreNames.contains(a.storeName)){var I=C.version+1;T(a);var x=l[a.name],R=x.forages;C.close();for(var N=0;N<R.length;N++){var z=R[N];z._dbInfo.db=null,z._dbInfo.version=I}var q=new g(function(V,K){var re=s.open(a.name,I);re.onerror=function(Se){re.result.close(),K(Se)},re.onupgradeneeded=function(){re.result.deleteObjectStore(a.storeName)},re.onsuccess=function(){var Se=re.result;Se.close(),V(Se)}});return q.then(function(V){x.db=V;for(var K=0;K<R.length;K++){var re=R[K];re._dbInfo.db=V,A(re._dbInfo)}}).catch(function(V){throw(j(a,V)||g.resolve()).catch(function(){}),V})}}):_.then(function(C){T(a);var I=l[a.name],x=I.forages;C.close();for(var R=0;R<x.length;R++)x[R]._dbInfo.db=null;var N=new g(function(z,q){var V=s.deleteDatabase(a.name);V.onerror=function(){var K=V.result;K&&K.close(),q(V.error)},V.onblocked=function(){},V.onsuccess=function(){var K=V.result;K&&K.close(),z(K)}});return N.then(function(z){I.db=z;for(var q=0;q<x.length;q++)A(x[q]._dbInfo)}).catch(function(z){throw(j(a,z)||g.resolve()).catch(function(){}),z})})}else b=g.reject("Invalid arguments");return S(b,u),b}var lr={_driver:"asyncStorage",_initStorage:Zo,_support:c(),iterate:tr,getItem:er,setItem:nr,removeItem:or,clear:rr,length:ir,key:sr,keys:ar,dropInstance:cr};function ur(){return typeof openDatabase=="function"}var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr="~~local_forage_type~",kn=/^~~local_forage_type~([^~]+)~/,Je="__lfsc__:",xt=Je.length,Tt="arbf",Rt="blob",In="si08",xn="ui08",Tn="uic8",Rn="si16",Ln="si32",Mn="ur16",An="ui32",Dn="fl32",Pn="fl64",Bn=xt+Tt.length,Nn=Object.prototype.toString;function $n(a){var u,h,b,w,_,C=.75*a.length,I=a.length,x=0;a[a.length-1]==="="&&(C--,a[a.length-2]==="="&&C--);var R=new ArrayBuffer(C),N=new Uint8Array(R);for(u=0;u<I;u+=4)h=Ce.indexOf(a[u]),b=Ce.indexOf(a[u+1]),w=Ce.indexOf(a[u+2]),_=Ce.indexOf(a[u+3]),N[x++]=h<<2|b>>4,N[x++]=(15&b)<<4|w>>2,N[x++]=(3&w)<<6|63&_;return R}function Lt(a){var u,h=new Uint8Array(a),b="";for(u=0;u<h.length;u+=3)b+=Ce[h[u]>>2],b+=Ce[(3&h[u])<<4|h[u+1]>>4],b+=Ce[(15&h[u+1])<<2|h[u+2]>>6],b+=Ce[63&h[u+2]];return h.length%3==2?b=b.substring(0,b.length-1)+"=":h.length%3==1&&(b=b.substring(0,b.length-2)+"=="),b}function dr(a,u){var h="";if(a&&(h=Nn.call(a)),a&&(h==="[object ArrayBuffer]"||a.buffer&&Nn.call(a.buffer)==="[object ArrayBuffer]")){var b,w=Je;a instanceof ArrayBuffer?(b=a,w+=Tt):(b=a.buffer,h==="[object Int8Array]"?w+=In:h==="[object Uint8Array]"?w+=xn:h==="[object Uint8ClampedArray]"?w+=Tn:h==="[object Int16Array]"?w+=Rn:h==="[object Uint16Array]"?w+=Mn:h==="[object Int32Array]"?w+=Ln:h==="[object Uint32Array]"?w+=An:h==="[object Float32Array]"?w+=Dn:h==="[object Float64Array]"?w+=Pn:u(new Error("Failed to get type for BinaryArray"))),u(w+Lt(b))}else if(h==="[object Blob]"){var _=new FileReader;_.onload=function(){var C=hr+a.type+"~"+Lt(this.result);u(Je+Rt+C)},_.readAsArrayBuffer(a)}else try{u(JSON.stringify(a))}catch(C){u(null,C)}}function fr(a){if(a.substring(0,xt)!==Je)return JSON.parse(a);var u,h=a.substring(Bn),b=a.substring(xt,Bn);if(b===Rt&&kn.test(h)){var w=h.match(kn);u=w[1],h=h.substring(w[0].length)}var _=$n(h);switch(b){case Tt:return _;case Rt:return f([_],{type:u});case In:return new Int8Array(_);case xn:return new Uint8Array(_);case Tn:return new Uint8ClampedArray(_);case Rn:return new Int16Array(_);case Mn:return new Uint16Array(_);case Ln:return new Int32Array(_);case An:return new Uint32Array(_);case Dn:return new Float32Array(_);case Pn:return new Float64Array(_);default:throw new Error("Unkown type: "+b)}}var Mt={serialize:dr,deserialize:fr,stringToBuffer:$n,bufferToString:Lt};function Wn(a,u,h,b){a.executeSql("CREATE TABLE IF NOT EXISTS "+u.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],h,b)}function pr(a){var u=this,h={db:null};if(a)for(var b in a)h[b]=typeof a[b]!="string"?a[b].toString():a[b];var w=new g(function(_,C){try{h.db=openDatabase(h.name,String(h.version),h.description,h.size)}catch(I){return C(I)}h.db.transaction(function(I){Wn(I,h,function(){u._dbInfo=h,_()},function(x,R){C(R)})},C)});return h.serializer=Mt,w}function Ee(a,u,h,b,w,_){a.executeSql(h,b,w,function(C,I){I.code===I.SYNTAX_ERR?C.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[u.storeName],function(x,R){R.rows.length?_(x,I):Wn(x,u,function(){x.executeSql(h,b,w,_)},_)},_):_(C,I)},_)}function gr(a,u){var h=this;a=$(a);var b=new g(function(w,_){h.ready().then(function(){var C=h._dbInfo;C.db.transaction(function(I){Ee(I,C,"SELECT * FROM "+C.storeName+" WHERE key = ? LIMIT 1",[a],function(x,R){var N=R.rows.length?R.rows.item(0).value:null;N&&(N=C.serializer.deserialize(N)),w(N)},function(x,R){_(R)})})}).catch(_)});return S(b,u),b}function mr(a,u){var h=this,b=new g(function(w,_){h.ready().then(function(){var C=h._dbInfo;C.db.transaction(function(I){Ee(I,C,"SELECT * FROM "+C.storeName,[],function(x,R){for(var N=R.rows,z=N.length,q=0;q<z;q++){var V=N.item(q),K=V.value;if(K&&(K=C.serializer.deserialize(K)),(K=a(K,V.key,q+1))!==void 0)return void w(K)}w()},function(x,R){_(R)})})}).catch(_)});return S(b,u),b}function zn(a,u,h,b){var w=this;a=$(a);var _=new g(function(C,I){w.ready().then(function(){u===void 0&&(u=null);var x=u,R=w._dbInfo;R.serializer.serialize(u,function(N,z){z?I(z):R.db.transaction(function(q){Ee(q,R,"INSERT OR REPLACE INTO "+R.storeName+" (key, value) VALUES (?, ?)",[a,N],function(){C(x)},function(V,K){I(K)})},function(q){if(q.code===q.QUOTA_ERR){if(b>0)return void C(zn.apply(w,[a,x,h,b-1]));I(q)}})})}).catch(I)});return S(_,h),_}function vr(a,u,h){return zn.apply(this,[a,u,h,1])}function yr(a,u){var h=this;a=$(a);var b=new g(function(w,_){h.ready().then(function(){var C=h._dbInfo;C.db.transaction(function(I){Ee(I,C,"DELETE FROM "+C.storeName+" WHERE key = ?",[a],function(){w()},function(x,R){_(R)})})}).catch(_)});return S(b,u),b}function wr(a){var u=this,h=new g(function(b,w){u.ready().then(function(){var _=u._dbInfo;_.db.transaction(function(C){Ee(C,_,"DELETE FROM "+_.storeName,[],function(){b()},function(I,x){w(x)})})}).catch(w)});return S(h,a),h}function br(a){var u=this,h=new g(function(b,w){u.ready().then(function(){var _=u._dbInfo;_.db.transaction(function(C){Ee(C,_,"SELECT COUNT(key) as c FROM "+_.storeName,[],function(I,x){var R=x.rows.item(0).c;b(R)},function(I,x){w(x)})})}).catch(w)});return S(h,a),h}function _r(a,u){var h=this,b=new g(function(w,_){h.ready().then(function(){var C=h._dbInfo;C.db.transaction(function(I){Ee(I,C,"SELECT key FROM "+C.storeName+" WHERE id = ? LIMIT 1",[a+1],function(x,R){var N=R.rows.length?R.rows.item(0).key:null;w(N)},function(x,R){_(R)})})}).catch(_)});return S(b,u),b}function Sr(a){var u=this,h=new g(function(b,w){u.ready().then(function(){var _=u._dbInfo;_.db.transaction(function(C){Ee(C,_,"SELECT key FROM "+_.storeName,[],function(I,x){for(var R=[],N=0;N<x.rows.length;N++)R.push(x.rows.item(N).key);b(R)},function(I,x){w(x)})})}).catch(w)});return S(h,a),h}function Cr(a){return new g(function(u,h){a.transaction(function(b){b.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(w,_){for(var C=[],I=0;I<_.rows.length;I++)C.push(_.rows.item(I).name);u({db:a,storeNames:C})},function(w,_){h(_)})},function(b){h(b)})})}function Er(a,u){u=P.apply(this,arguments);var h=this.config();(a=typeof a!="function"&&a||{}).name||(a.name=a.name||h.name,a.storeName=a.storeName||h.storeName);var b,w=this;return b=a.name?new g(function(_){var C;C=a.name===h.name?w._dbInfo.db:openDatabase(a.name,"","",0),a.storeName?_({db:C,storeNames:[a.storeName]}):_(Cr(C))}).then(function(_){return new g(function(C,I){_.db.transaction(function(x){function R(V){return new g(function(K,re){x.executeSql("DROP TABLE IF EXISTS "+V,[],function(){K()},function(Se,Pt){re(Pt)})})}for(var N=[],z=0,q=_.storeNames.length;z<q;z++)N.push(R(_.storeNames[z]));g.all(N).then(function(){C()}).catch(function(V){I(V)})},function(x){I(x)})})}):g.reject("Invalid arguments"),S(b,u),b}var kr={_driver:"webSQLStorage",_initStorage:pr,_support:ur(),iterate:mr,getItem:gr,setItem:vr,removeItem:yr,clear:wr,length:br,key:_r,keys:Sr,dropInstance:Er};function Ir(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function jn(a,u){var h=a.name+"/";return a.storeName!==u.storeName&&(h+=a.storeName+"/"),h}function xr(){var a="_localforage_support_test";try{return localStorage.setItem(a,!0),localStorage.removeItem(a),!1}catch{return!0}}function Tr(){return!xr()||localStorage.length>0}function Rr(a){var u=this,h={};if(a)for(var b in a)h[b]=a[b];return h.keyPrefix=jn(a,u._defaultConfig),Tr()?(u._dbInfo=h,h.serializer=Mt,g.resolve()):g.reject()}function Lr(a){var u=this,h=u.ready().then(function(){for(var b=u._dbInfo.keyPrefix,w=localStorage.length-1;w>=0;w--){var _=localStorage.key(w);_.indexOf(b)===0&&localStorage.removeItem(_)}});return S(h,a),h}function Mr(a,u){var h=this;a=$(a);var b=h.ready().then(function(){var w=h._dbInfo,_=localStorage.getItem(w.keyPrefix+a);return _&&(_=w.serializer.deserialize(_)),_});return S(b,u),b}function Ar(a,u){var h=this,b=h.ready().then(function(){for(var w=h._dbInfo,_=w.keyPrefix,C=_.length,I=localStorage.length,x=1,R=0;R<I;R++){var N=localStorage.key(R);if(N.indexOf(_)===0){var z=localStorage.getItem(N);if(z&&(z=w.serializer.deserialize(z)),(z=a(z,N.substring(C),x++))!==void 0)return z}}});return S(b,u),b}function Dr(a,u){var h=this,b=h.ready().then(function(){var w,_=h._dbInfo;try{w=localStorage.key(a)}catch{w=null}return w&&(w=w.substring(_.keyPrefix.length)),w});return S(b,u),b}function Pr(a){var u=this,h=u.ready().then(function(){for(var b=u._dbInfo,w=localStorage.length,_=[],C=0;C<w;C++){var I=localStorage.key(C);I.indexOf(b.keyPrefix)===0&&_.push(I.substring(b.keyPrefix.length))}return _});return S(h,a),h}function Br(a){var u=this.keys().then(function(h){return h.length});return S(u,a),u}function Nr(a,u){var h=this;a=$(a);var b=h.ready().then(function(){var w=h._dbInfo;localStorage.removeItem(w.keyPrefix+a)});return S(b,u),b}function $r(a,u,h){var b=this;a=$(a);var w=b.ready().then(function(){u===void 0&&(u=null);var _=u;return new g(function(C,I){var x=b._dbInfo;x.serializer.serialize(u,function(R,N){if(N)I(N);else try{localStorage.setItem(x.keyPrefix+a,R),C(_)}catch(z){z.name!=="QuotaExceededError"&&z.name!=="NS_ERROR_DOM_QUOTA_REACHED"||I(z),I(z)}})})});return S(w,h),w}function Wr(a,u){if(u=P.apply(this,arguments),!(a=typeof a!="function"&&a||{}).name){var h=this.config();a.name=a.name||h.name,a.storeName=a.storeName||h.storeName}var b,w=this;return b=a.name?new g(function(_){a.storeName?_(jn(a,w._defaultConfig)):_(a.name+"/")}).then(function(_){for(var C=localStorage.length-1;C>=0;C--){var I=localStorage.key(C);I.indexOf(_)===0&&localStorage.removeItem(I)}}):g.reject("Invalid arguments"),S(b,u),b}var zr={_driver:"localStorageWrapper",_initStorage:Rr,_support:Ir(),iterate:Ar,getItem:Mr,setItem:$r,removeItem:Nr,clear:Lr,length:Br,key:Dr,keys:Pr,dropInstance:Wr},jr=function(a,u){return a===u||typeof a=="number"&&typeof u=="number"&&isNaN(a)&&isNaN(u)},Or=function(a,u){for(var h=a.length,b=0;b<h;){if(jr(a[b],u))return!0;b++}return!1},On=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},Ue={},Un={},Pe={INDEXEDDB:lr,WEBSQL:kr,LOCALSTORAGE:zr},Ur=[Pe.INDEXEDDB._driver,Pe.WEBSQL._driver,Pe.LOCALSTORAGE._driver],Qe=["dropInstance"],At=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qe),Hr={description:"",driver:Ur.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qr(a,u){a[u]=function(){var h=arguments;return a.ready().then(function(){return a[u].apply(a,h)})}}function Dt(){for(var a=1;a<arguments.length;a++){var u=arguments[a];if(u)for(var h in u)u.hasOwnProperty(h)&&(On(u[h])?arguments[0][h]=u[h].slice():arguments[0][h]=u[h])}return arguments[0]}var Fr=function(){function a(u){for(var h in r(this,a),Pe)if(Pe.hasOwnProperty(h)){var b=Pe[h],w=b._driver;this[h]=w,Ue[w]||this.defineDriver(b)}this._defaultConfig=Dt({},Hr),this._config=Dt({},this._defaultConfig,u),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(u){if((u===void 0?"undefined":o(u))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var h in u){if(h==="storeName"&&(u[h]=u[h].replace(/\W/g,"_")),h==="version"&&typeof u[h]!="number")return new Error("Database version must be a number.");this._config[h]=u[h]}return!("driver"in u)||!u.driver||this.setDriver(this._config.driver)}return typeof u=="string"?this._config[u]:this._config},a.prototype.defineDriver=function(u,h,b){var w=new g(function(_,C){try{var I=u._driver,x=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver)return void C(x);for(var R=At.concat("_initStorage"),N=0,z=R.length;N<z;N++){var q=R[N];if((!Or(Qe,q)||u[q])&&typeof u[q]!="function")return void C(x)}var V=function(){for(var re=function(Vr){return function(){var Kr=new Error("Method "+Vr+" is not implemented by the current driver"),Hn=g.reject(Kr);return S(Hn,arguments[arguments.length-1]),Hn}},Se=0,Pt=Qe.length;Se<Pt;Se++){var Bt=Qe[Se];u[Bt]||(u[Bt]=re(Bt))}};V();var K=function(re){Ue[I],Ue[I]=u,Un[I]=re,_()};"_support"in u?u._support&&typeof u._support=="function"?u._support().then(K,C):K(!!u._support):K(!0)}catch(re){C(re)}});return k(w,h,b),w},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(u,h,b){var w=Ue[u]?g.resolve(Ue[u]):g.reject(new Error("Driver not found."));return k(w,h,b),w},a.prototype.getSerializer=function(u){var h=g.resolve(Mt);return k(h,u),h},a.prototype.ready=function(u){var h=this,b=h._driverSet.then(function(){return h._ready===null&&(h._ready=h._initDriver()),h._ready});return k(b,u,u),b},a.prototype.setDriver=function(u,h,b){var w=this;On(u)||(u=[u]);var _=this._getSupportedDrivers(u);function C(){w._config.driver=w.driver()}function I(N){return w._extend(N),C(),w._ready=w._initStorage(w._config),w._ready}function x(N){return function(){var z=0;function q(){for(;z<N.length;){var V=N[z];return z++,w._dbInfo=null,w._ready=null,w.getDriver(V).then(I).catch(q)}C();var K=new Error("No available storage method found.");return w._driverSet=g.reject(K),w._driverSet}return q()}}var R=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=R.then(function(){var N=_[0];return w._dbInfo=null,w._ready=null,w.getDriver(N).then(function(z){w._driver=z._driver,C(),w._wrapLibraryMethodsWithReady(),w._initDriver=x(_)})}).catch(function(){C();var N=new Error("No available storage method found.");return w._driverSet=g.reject(N),w._driverSet}),k(this._driverSet,h,b),this._driverSet},a.prototype.supports=function(u){return!!Un[u]},a.prototype._extend=function(u){Dt(this,u)},a.prototype._getSupportedDrivers=function(u){for(var h=[],b=0,w=u.length;b<w;b++){var _=u[b];this.supports(_)&&h.push(_)}return h},a.prototype._wrapLibraryMethodsWithReady=function(){for(var u=0,h=At.length;u<h;u++)qr(this,At[u])},a.prototype.createInstance=function(u){return new a(u)},a}(),Xr=new Fr;e.exports=Xr},{3:3}]},{},[4])(4)),lo.exports),et=Ct(xi),ho={exports:{}},Ti=(uo||(uo=1,function(n){((e,t)=>{n.exports=t()})(0,()=>{const e=typeof window=="object"?window:this;e.HTMLElement;let t=null,o=!1;const r=e.WebStreamsPolyfill||{},i=e.isSecureContext;let s=/constructor/i.test(e.HTMLElement)||!!e.safari||!!e.WebKitPoint;const c=i||"MozAppearance"in document.documentElement.style?"iframe":"navigate",f={createWriteStream:function(S,k,$){let P={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},M=0,d=null,l=null,v=null;if(Number.isFinite(k)?([$,k]=[k,$],P.size=$,P.writableStrategy=k):k&&k.highWaterMark?(P.size=$,P.writableStrategy=k):P=k||{},!s){t||(t=i?g(f.mitm):function(B){const D="width=200,height=100",T=document.createDocumentFragment(),A={frame:e.open(B,"popup",D),loaded:!1,isIframe:!1,isPopup:!0,remove(){A.frame.close()},addEventListener(...O){T.addEventListener(...O)},dispatchEvent(...O){T.dispatchEvent(...O)},removeEventListener(...O){T.removeEventListener(...O)},postMessage(...O){A.frame.postMessage(...O)}},j=O=>{O.source===A.frame&&(A.loaded=!0,e.removeEventListener("message",j),A.dispatchEvent(new Event("load")))};return e.addEventListener("message",j),A}(f.mitm)),l=new MessageChannel,S=encodeURIComponent(S.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const p={transferringReadable:o,pathname:P.pathname||Math.random().toString().slice(-6)+"/"+S,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+S}};P.size&&(p.headers["Content-Length"]=P.size);const y=[p,"*",[l.port2]];if(o){const B=c==="iframe"?void 0:{transform(T,A){if(!(T instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");M+=T.length,A.enqueue(T),d&&(location.href=d,d=null)},flush(){d&&(location.href=d)}};v=new f.TransformStream(B,P.writableStrategy,P.readableStrategy);const D=v.readable;l.port1.postMessage({readableStream:D},[D])}l.port1.onmessage=B=>{B.data.download?c==="navigate"?(t.remove(),t=null,M?location.href=B.data.download:d=B.data.download):(t.isPopup&&(t.remove(),t=null,c==="iframe"&&g(f.mitm)),g(B.data.download)):B.data.abort&&(m=[],l.port1.postMessage("abort"),l.port1.onmessage=null,l.port1.close(),l.port2.close(),l=null)},t.loaded?t.postMessage(...y):t.addEventListener("load",()=>{t.postMessage(...y)},{once:!0})}let m=[];return!s&&v&&v.writable||new f.WritableStream({write(p){if(!(p instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");s?m.push(p):(l.port1.postMessage(p),M+=p.length,d&&(location.href=d,d=null))},close(){if(s){const p=new Blob(m,{type:"application/octet-stream; charset=utf-8"}),y=document.createElement("a");y.href=URL.createObjectURL(p),y.download=S,y.click()}else l.port1.postMessage("end")},abort(){m=[],l.port1.postMessage("abort"),l.port1.onmessage=null,l.port1.close(),l.port2.close(),l=null}},P.writableStrategy)},WritableStream:e.WritableStream||r.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function g(S){if(!S)throw new Error("meh");const k=document.createElement("iframe");return k.hidden=!0,k.src=S,k.loaded=!1,k.name="iframe",k.isIframe=!0,k.postMessage=(...$)=>k.contentWindow.postMessage(...$),k.addEventListener("load",()=>{k.loaded=!0},{once:!0}),document.body.appendChild(k),k}try{new Response(new ReadableStream),i&&!("serviceWorker"in navigator)&&(s=!0)}catch{s=!0}return(S=>{try{S()}catch{}})(()=>{const{readable:S}=new TransformStream,k=new MessageChannel;k.port1.postMessage(S,[S]),k.port1.close(),k.port2.close(),o=!0,Object.defineProperty(f,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})}),f})}(ho)),ho.exports),Ri=Ct(Ti);class Hs{fileID;downloadURL;ChunkUnitM=1048576;chunkByteSize;totalChunks=1;currentDB;keys;fileMetaData=null;finishNum=0;eventTarget;cancelSource;isStarting=!1;fileName;cacheSize=6;requestTimeout=6e4;constructor(e,t,o=3,r=6,i=6e4){this.fileID=e,this.downloadURL=t,this.chunkByteSize=o*this.ChunkUnitM,this.eventTarget=gn(),this.initIndexDB(),r>=3&&(this.cacheSize=r),i>this.requestTimeout&&(this.requestTimeout=i)}on(e,t){this.eventTarget.on(e,t)}dispatch(e,t){this.eventTarget.emit(e,t)}dispatchError(e){this.eventTarget.emit("error",e)}dispatchInfo(e){this.eventTarget.emit("info",e)}async queryDownloadFileMeta(e,t="",o){this.dispatchInfo("开始获取文件信息");const r=await ye(t,e,o);let i=null;return r&&r.status===200&&(i=r.data),i}async getIFileMeta(){if(this.fileMetaData===null){const e=await this.currentDB?.getItem("fileinfo");this.fileMetaData=e||null}return this.fileMetaData}initIndexDB(){this.currentDB=et.createInstance({name:this.fileID,driver:et.INDEXEDDB})}async init(e){if(this.finishNum=0,e){const t="fileinfo";this.fileMetaData={id:e.id,name:e.name,length:e.length,downloadID:e.downloadID,chunkSize:this.chunkByteSize},this.fileName=e.name,this.currentDB?.setItem(t,this.fileMetaData)}if(this.fileMetaData!=null){const t=this.fileMetaData.chunkSize;t!=null&&t>0&&(this.chunkByteSize=t)}this.fileMetaData&&(this.totalChunks=Math.ceil(this.fileMetaData.length/this.chunkByteSize)),this.dispatchInfo("完成初始化文件信息，总分片："+this.totalChunks),this.currentDB&&(this.keys=await this.currentDB.keys())}getTotalChunks(){return this.totalChunks}pause(){this.cancelSource&&this.isStarting&&(this.cancelSource.cancel(),this.isStarting=!1),this.dispatchInfo("已暂停下载任务")}restart(){this.dispatchInfo("正在重启下载任务"),this.download()}delete(){this.cancelSource&&this.cancelSource.cancel(),et.dropInstance({name:this.fileID}),this.currentDB=void 0,this.keys&&(this.keys.length=0,this.keys=void 0),this.finishNum=0,this.downloadProgress(),this.outputProgress(0),this.dispatchInfo("已删除下载任务")}sleep(e){return new Promise(t=>setTimeout(t,e))}async download(e,t){let o=e;if(!o&&this.downloadURL&&(o=this.downloadURL),!o)throw Error("下载URL不能为空!");this.currentDB||this.initIndexDB();const r=W.Axios.CancelToken;this.cancelSource=r.source(),this.isStarting=!0;const i={key:this.fileMetaData?.downloadID};let s=0;const c=this.cacheSize;let f=0;for(let g=0;g<this.totalChunks;g++){if(this.keys&&this.keys?.indexOf(g.toString())>=0){s++,s>this.finishNum&&(this.finishNum=s,this.downloadProgress());continue}const S=g*this.chunkByteSize;let k=S+this.chunkByteSize-1;this.fileMetaData&&k>this.fileMetaData.length&&(k=this.fileMetaData.length-1);const $={range:`bytes=${S}-${k}`};for(;f>=c;)await this.sleep(200);const P=g.toString();this.dispatchInfo(`开始下载分片${g+1}/${this.totalChunks}`),f++,ye(o,t,i,$,"arraybuffer",this.cancelSource?.token,this.requestTimeout).then(async M=>{const d=M.data;f--,await this.currentDB?.setItem(P,d),s++,s>this.finishNum&&(this.finishNum=s,this.downloadProgress());const l=parseInt(P)+1;this.dispatchInfo(`完成下载分片${l}/${this.totalChunks}`),this.savefile()}).catch(M=>{f--;const d=parseInt(P)+1;this.dispatchError(`下载第${d}）个分片内容失败！`)})}this.finishNum===this.totalChunks&&this.savefile()}downloadProgress(){const e=100*this.finishNum/this.totalChunks;this.dispatch("downloadProgress",e)}outputProgress(e){const t=100*e/this.totalChunks;this.dispatch("saveProgress",t)}async savefile(){if(this.finishNum===this.totalChunks){if(!this.fileName)return void this.dispatchError("下载错误：文件名为空!");this.dispatchInfo("开始保存下载文件:"+this.fileName);const e=Ri.createWriteStream(this.fileName).getWriter();let t=0;for(let o=0;o<this.totalChunks;o++){const r=o.toString();let i=await this.currentDB?.getItem(r);if(i||(i=await this.currentDB?.getItem(r)),!i)return void this.dispatchError(`输出分片第${o+1}）个内容为空，错误退出！`);let s=new Response(i).body;if(s===null)return void this.dispatchError(`输出分片第${o+1}）个内容为空，错误退出！`);const c=s.getReader();for(;;){const{done:f,value:g}=await c.read();if(f)break;await e.write(g)}t++,this.outputProgress(t),this.dispatchInfo(`完成第${o+1}个分片输出`)}e.close(),et.dropInstance({name:this.fileID}),this.dispatch("success"),this.isStarting=!1,this.dispatchInfo("完成文件下载")}}}function Li(n={},e={}){let t;for(t in e)fn(e[t])?n[t]=Li(n[t],e[t]):n[t]=e[t];return n}function Mi(n,e){const t=`${n}_${e}`;return de.MD5(t)}function Ai(n){const e=function(c){if(!c)return;const f=c,g=[];if(f)for(let S of f){const k=jo(S);k&&g.push(k)}return g}(n.bussinessRoutes),t=function(c){if(!c)return;const f=c;if(f&&f.length>0){const g=[];return f.forEach(S=>{const k=Oo(S);k&&g.push(k)}),g}}(n.widgetMenuConfig),o=function(c){if(c&&c.length>0){const f=[];return c.forEach(g=>{const S=function(k){return k?{id:k.id,label:k.label,layoutID:k.layoutID,container:k.container,preload:k.preload,afterid:k.afterid,bindid:k.bindid,group:k.group}:void 0}(g);S&&f.push(S)}),f}}(n.widgetConfig),r=function(c){if(c&&c.length>0)return c}(n.functionList),i=n.pkgObject.version,s=n.pkgObject.name;return{id:Mi(s,i),name:W.Config.UI.SiteTitle,group:W.Config.UI.Group,product:s,version:i,routes:e,widgetMenu:t,widgets:o,functions:r}}function jo(n){if(n){let e=0;n.meta?.hidden&&(e=1);let t={path:n.path,name:n.name,title:n.meta?.title,type:e,index:n.meta?.index};if(n.children){const o=[];for(let r of n.children){const i=jo(r);i&&o.push(i)}o.length>0&&(t.children=o)}return t}}function Oo(n){if(!n)return;const e={name:n.name,index:n.index,path:n.path,type:n.type};return n.children&&n.children.length>0&&(e.children=[],n.children.forEach(t=>{const o=Oo(t);o&&e.children?.push(o)})),e}function qs(n,e){const t=Ai(n);mi(t,e),W.Message?.msg("导出系统功能权限文件成功！")}let Uo=!0;try{String.fromCharCode.apply(String,[1,2])}catch{Uo=!1,Object.defineProperty(Array.prototype,"subarray",{value:Array.prototype.slice})}var rn=2654435769;function Ho(n,e){var t=n.length,o=t<<2;if(e){var r=n[t-1];if(r<(o-=4)-3||r>o)return null;o=r}for(var i=new Uint8Array(o),s=0;s<o;++s)i[s]=n[s>>2]>>((3&s)<<3);return i}function mt(n,e){var t,o=n.length,r=o>>2;3&o&&++r,e?(t=new Uint32Array(r+1))[r]=o:t=new Uint32Array(r);for(var i=0;i<o;++i)t[i>>2]|=n[i]<<((3&i)<<3);return t}function Re(n){return 4294967295&n}function vt(n,e,t,o,r,i){return(t>>>5^e<<2)+(e>>>3^t<<4)^(n^e)+(i[3&o^r]^t)}function qo(n){if(n.length<16){var e=new Uint8Array(16);e.set(n),n=e}return n}function yt(n){for(var e=n.length,t=new Uint8Array(3*e),o=0,r=0;r<e;r++){var i=n.charCodeAt(r);if(i<128)t[o++]=i;else if(i<2048)t[o++]=192|i>>6,t[o++]=128|63&i;else{if(!(i<55296||i>57343)){if(r+1<e){var s=n.charCodeAt(r+1);if(i<56320&&56320<=s&&s<=57343){var c=65536+((1023&i)<<10|1023&s);t[o++]=240|c>>18,t[o++]=128|c>>12&63,t[o++]=128|c>>6&63,t[o++]=128|63&c,r++;continue}}throw new Error("Malformed string")}t[o++]=224|i>>12,t[o++]=128|i>>6&63,t[o++]=128|63&i}}return t.subarray(0,o)}function fo(n){var e=n.length;return e===0?"":e<32767?function(t,o){for(var r=new Array(o),i=0,s=0,c=t.length;i<o&&s<c;i++){var f=t[s++];switch(f>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[i]=f;break;case 12:case 13:if(!(s<c))throw new Error("Unfinished UTF-8 octet sequence");r[i]=(31&f)<<6|63&t[s++];break;case 14:if(!(s+1<c))throw new Error("Unfinished UTF-8 octet sequence");r[i]=(15&f)<<12|(63&t[s++])<<6|63&t[s++];break;case 15:if(!(s+2<c))throw new Error("Unfinished UTF-8 octet sequence");var g=((7&f)<<18|(63&t[s++])<<12|(63&t[s++])<<6|63&t[s++])-65536;if(!(0<=g&&g<=1048575))throw new Error("Character outside valid Unicode range: 0x"+g.toString(16));r[i++]=g>>10&1023|55296,r[i]=1023&g|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+f.toString(16))}}return i<o&&(r.length=i),String.fromCharCode.apply(String,r)}(n,e):function(t,o){for(var r=[],i=new Array(32768),s=0,c=0,f=t.length;s<o&&c<f;s++){var g=t[c++];switch(g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i[s]=g;break;case 12:case 13:if(!(c<f))throw new Error("Unfinished UTF-8 octet sequence");i[s]=(31&g)<<6|63&t[c++];break;case 14:if(!(c+1<f))throw new Error("Unfinished UTF-8 octet sequence");i[s]=(15&g)<<12|(63&t[c++])<<6|63&t[c++];break;case 15:if(!(c+2<f))throw new Error("Unfinished UTF-8 octet sequence");var S=((7&g)<<18|(63&t[c++])<<12|(63&t[c++])<<6|63&t[c++])-65536;if(!(0<=S&&S<=1048575))throw new Error("Character outside valid Unicode range: 0x"+S.toString(16));i[s++]=S>>10&1023|55296,i[s]=1023&S|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+g.toString(16))}if(s>=32766){var k=s+1;i.length=k,r.push(String.fromCharCode.apply(String,i)),o-=k,s=-1}}return s>0&&(i.length=s,r.push(String.fromCharCode.apply(String,i))),r.join("")}(n,e)}function Di(n){var e=n.length;if(e===0)return"";var t=Uo?n:function(c){for(var f=c.length,g=new Array(c.length),S=0;S<f;++S)g[S]=c[S];return g}(n);if(e<65535)return String.fromCharCode.apply(String,t);for(var o=32767&e,r=e>>15,i=new Array(o?r+1:r),s=0;s<r;++s)i[s]=String.fromCharCode.apply(String,t.subarray(s<<15,s+1<<15));return o&&(i[r]=String.fromCharCode.apply(String,t.subarray(r<<15,e))),i.join("")}function po(n,e){return typeof n=="string"&&(n=yt(n)),typeof e=="string"&&(e=yt(e)),n==null||n.length===0?n:Ho(function(t,o){var r,i,s,c,f,g,S=t.length,k=S-1;for(i=t[k],s=0,g=0|Math.floor(6+52/S);g>0;--g){for(c=(s=Re(s+rn))>>>2&3,f=0;f<k;++f)r=t[f+1],i=t[f]=Re(t[f]+vt(s,r,i,f,c,o));r=t[0],i=t[k]=Re(t[k]+vt(s,r,i,k,c,o))}return t}(mt(n,!0),mt(qo(e),!1)),!1)}function go(n,e){return typeof n=="string"&&(n=function(t){for(var o=window.atob(t),r=o.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=o.charCodeAt(s);return i}(n)),typeof e=="string"&&(e=yt(e)),n==null||n.length===0?n:Ho(function(t,o){var r,i,s,c,f,g=t.length,S=g-1;for(r=t[0],s=Re(Math.floor(6+52/g)*rn);s!==0;s=Re(s-rn)){for(c=s>>>2&3,f=S;f>0;--f)i=t[f-1],r=t[f]=Re(t[f]-vt(s,r,i,f,c,o));i=t[S],r=t[0]=Re(t[0]-vt(s,r,i,0,c,o))}return t}(mt(n,!1),mt(qo(e),!1)),!0)}const sn={toBytes:yt,toString:fo,encrypt:po,encryptToString:function(n,e){return window.btoa(Di(po(n,e)))},decrypt:go,decryptToString:function(n,e){return fo(go(n,e))}};class Le extends Error{constructor(e,t){const o=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=o}}class wn extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class ve extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Pi extends Error{constructor(e,t){const o=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=o}}class Bi extends Error{constructor(e,t){const o=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=o}}class Ni extends Error{constructor(e,t){const o=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=o}}class mo extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class $i extends Error{constructor(e,t){const o=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=o}}class Fo{constructor(e,t,o){this.statusCode=e,this.statusText=t,this.content=o}}class Et{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var E;(function(n){n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None"})(E||(E={}));class Ke{constructor(){}log(e,t){}}Ke.instance=new Ke;class ee{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,o){if(!(e in t))throw new Error(`Unknown ${o} value: ${e}.`)}}class Q{static get isBrowser(){return!Q.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Q.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Q.isNode&&typeof window=="object"&&window.document===void 0}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Ye(n,e){let t="";return Ae(n)?(t=`Binary data of length ${n.byteLength}`,e&&(t+=`. Content: '${function(o){const r=new Uint8Array(o);let i="";return r.forEach(s=>{i+=`0x${s<16?"0":""}${s.toString(16)} `}),i.substr(0,i.length-1)}(n)}'`)):typeof n=="string"&&(t=`String data of length ${n.length}`,e&&(t+=`. Content: '${n}'`)),t}function Ae(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}async function Xo(n,e,t,o,r,i){const s={},[c,f]=je();s[c]=f,n.log(E.Trace,`(${e} transport) sending data. ${Ye(r,i.logMessageContent)}.`);const g=Ae(r)?"arraybuffer":"text",S=await t.post(o,{content:r,headers:{...s,...i.headers},responseType:g,timeout:i.timeout,withCredentials:i.withCredentials});n.log(E.Trace,`(${e} transport) request complete. Response status: ${S.statusCode}.`)}class Wi{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}}class wt{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const o=`[${new Date().toISOString()}] ${E[e]}: ${t}`;switch(e){case E.Critical:case E.Error:this.out.error(o);break;case E.Warning:this.out.warn(o);break;case E.Information:this.out.info(o);break;default:this.out.log(o)}}}}function je(){let n="X-SignalR-User-Agent";return Q.isNode&&(n="User-Agent"),[n,zi("8.0.7",ji(),Ui(),Oi())]}function zi(n,e,t,o){let r="Microsoft SignalR/";const i=n.split(".");return r+=`${i[0]}.${i[1]}`,r+=` (${n}; `,r+=e&&e!==""?`${e}; `:"Unknown OS; ",r+=`${t}`,r+=o?`; ${o}`:"; Unknown Runtime Version",r+=")",r}function ji(){if(!Q.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function Oi(){if(Q.isNode)return process.versions.node}function Ui(){return Q.isNode?"NodeJS":"Browser"}function Yt(n){return n.stack?n.stack:n.message?n.message:`${n}`}class Hi extends Et{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||Q.isNode){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(t("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=t("node-fetch"):this._fetchType=fetch,this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}());if(typeof AbortController>"u"){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new ve;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let o;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),o=new ve});let r,i=null;if(e.timeout){const f=e.timeout;i=setTimeout(()=>{t.abort(),this._logger.log(E.Warning,"Timeout from HTTP request."),o=new wn},f)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Ae(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{r=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(f){throw o||(this._logger.log(E.Warning,`Error from HTTP request. ${f}.`),f)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!r.ok){const f=await vo(r,"text");throw new Le(f||r.statusText,r.status)}const s=vo(r,e.responseType),c=await s;return new Fo(r.status,r.statusText,c)}getCookieString(e){let t="";return Q.isNode&&this._jar&&this._jar.getCookies(e,(o,r)=>t=r.join("; ")),t}}function vo(n,e){let t;switch(e){case"arraybuffer":t=n.arrayBuffer();break;case"text":default:t=n.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`)}return t}class qi extends Et{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new ve):e.method?e.url?new Promise((t,o)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=e.withCredentials===void 0||e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(Ae(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const i=e.headers;i&&Object.keys(i).forEach(s=>{r.setRequestHeader(s,i[s])}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),o(new ve)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new Fo(r.status,r.statusText,r.response||r.responseText)):o(new Le(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(E.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),o(new Le(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(E.Warning,"Timeout from HTTP request."),o(new wn)},r.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Fi extends Et{constructor(e){if(super(),typeof fetch<"u"||Q.isNode)this._httpClient=new Hi(e);else{if(typeof XMLHttpRequest>"u")throw new Error("No usable HttpClient found.");this._httpClient=new qi(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new ve):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class pe{static write(e){return`${e}${pe.RecordSeparator}`}static parse(e){if(e[e.length-1]!==pe.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(pe.RecordSeparator);return t.pop(),t}}pe.RecordSeparatorCode=30,pe.RecordSeparator=String.fromCharCode(pe.RecordSeparatorCode);class Xi{writeHandshakeRequest(e){return pe.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,o;if(Ae(e)){const s=new Uint8Array(e),c=s.indexOf(pe.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");const f=c+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(s.slice(0,f))),o=s.byteLength>f?s.slice(f).buffer:null}else{const s=e,c=s.indexOf(pe.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");const f=c+1;t=s.substring(0,f),o=s.length>f?s.substring(f):null}const r=pe.parse(t),i=JSON.parse(r[0]);if(i.type)throw new Error("Expected a handshake response from the server.");return[o,i]}}var U;(function(n){n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n[n.Ack=8]="Ack",n[n.Sequence=9]="Sequence"})(U||(U={}));class Vi{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Wi(this,e)}}class Ki{constructor(e,t,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=o}async _send(e){const t=this._protocol.writeMessage(e);let o=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let r=()=>{},i=()=>{};Ae(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((s,c)=>{r=s,i=c})),this._messages.push(new Yi(t,this._totalMessageCount,r,i))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await o}_ack(e){let t=-1;for(let o=0;o<this._messages.length;o++){const r=this._messages[o];if(r._id<=e.sequenceId)t=o,Ae(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;r._resolver()}}t!==-1&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type===U.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){e.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:U.Sequence,sequenceId:e}));const t=this._messages;for(const o of t)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(e){e!=null||(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case U.Invocation:case U.StreamItem:case U.Completion:case U.StreamInvocation:case U.CancelInvocation:return!0;case U.Close:case U.Sequence:case U.Ping:case U.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:U.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class Yi{constructor(e,t,o,r){this._message=e,this._id=t,this._resolver=o,this._rejector=r}}var G;(function(n){n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting"})(G||(G={}));class bn{static create(e,t,o,r,i,s,c){return new bn(e,t,o,r,i,s,c)}constructor(e,t,o,r,i,s,c){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(E.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},ee.isRequired(e,"connection"),ee.isRequired(t,"logger"),ee.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=i??3e4,this.keepAliveIntervalInMilliseconds=s??15e3,this._statefulReconnectBufferSize=c??1e5,this._logger=t,this._protocol=o,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new Xi,this.connection.onreceive=f=>this._processIncomingData(f),this.connection.onclose=f=>this._connectionClosed(f),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=G.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:U.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==G.Disconnected&&this._connectionState!==G.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==G.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=G.Connecting,this._logger.log(E.Debug,"Starting HubConnection.");try{await this._startInternal(),Q.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=G.Connected,this._connectionStarted=!0,this._logger.log(E.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=G.Disconnected,this._logger.log(E.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((t,o)=>{this._handshakeResolver=t,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const o={protocol:this._protocol.name,version:t};if(this._logger.log(E.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(E.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new Ki(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(t){throw this._logger.log(E.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===G.Disconnected)return this._logger.log(E.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===G.Disconnecting)return this._logger.log(E.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=G.Disconnecting,this._logger.log(E.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(E.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===G.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new ve("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[o,r]=this._replaceStreamingParams(t),i=this._createStreamInvocation(e,t,r);let s;const c=new Vi;return c.cancelCallback=()=>{const f=this._createCancelInvocation(i.invocationId);return delete this._callbacks[i.invocationId],s.then(()=>this._sendWithProtocol(f))},this._callbacks[i.invocationId]=(f,g)=>{g?c.error(g):f&&(f.type===U.Completion?f.error?c.error(new Error(f.error)):c.complete():c.next(f.item))},s=this._sendWithProtocol(i).catch(f=>{c.error(f),delete this._callbacks[i.invocationId]}),this._launchStreams(o,s),c}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[o,r]=this._replaceStreamingParams(t),i=this._sendWithProtocol(this._createInvocation(e,t,!0,r));return this._launchStreams(o,i),i}invoke(e,...t){const[o,r]=this._replaceStreamingParams(t),i=this._createInvocation(e,t,!1,r);return new Promise((s,c)=>{this._callbacks[i.invocationId]=(g,S)=>{S?c(S):g&&(g.type===U.Completion?g.error?c(new Error(g.error)):s(g.result):c(new Error(`Unexpected message type: ${g.type}`)))};const f=this._sendWithProtocol(i).catch(g=>{c(g),delete this._callbacks[i.invocationId]});this._launchStreams(o,f)})}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const o=this._methods[e];if(o)if(t){const r=o.indexOf(t);r!==-1&&(o.splice(r,1),o.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const o of t)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(o))switch(o.type){case U.Invocation:this._invokeClientMethod(o).catch(r=>{this._logger.log(E.Error,`Invoke client method threw error: ${Yt(r)}`)});break;case U.StreamItem:case U.Completion:{const r=this._callbacks[o.invocationId];if(r){o.type===U.Completion&&delete this._callbacks[o.invocationId];try{r(o)}catch(i){this._logger.log(E.Error,`Stream callback threw error: ${Yt(i)}`)}}break}case U.Ping:break;case U.Close:{this._logger.log(E.Information,"Close message received from server.");const r=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}case U.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case U.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(E.Warning,`Invalid message type: ${o.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,o;try{[o,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){const i="Error parsing handshake response: "+r;this._logger.log(E.Error,i);const s=new Error(i);throw this._handshakeRejecter(s),s}if(t.error){const r="Server returned handshake error: "+t.error;this._logger.log(E.Error,r);const i=new Error(r);throw this._handshakeRejecter(i),i}return this._logger.log(E.Debug,"Server handshake complete."),this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle!==void 0))){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===G.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),o=this._methods[t];if(!o)return this._logger.log(E.Warning,`No client method with the name '${t}' found.`),void(e.invocationId&&(this._logger.log(E.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const r=o.slice(),i=!!e.invocationId;let s,c,f;for(const g of r)try{const S=s;s=await g.apply(this,e.arguments),i&&s&&S&&(this._logger.log(E.Error,`Multiple results provided for '${t}'. Sending error to server.`),f=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),c=void 0}catch(S){c=S,this._logger.log(E.Error,`A callback for the method '${t}' threw error '${S}'.`)}f?await this._sendWithProtocol(f):i?(c?f=this._createCompletionMessage(e.invocationId,`${c}`,null):s!==void 0?f=this._createCompletionMessage(e.invocationId,null,s):(this._logger.log(E.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),f=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(f)):s&&this._logger.log(E.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(E.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new ve("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===G.Disconnecting?this._completeClose(e):this._connectionState===G.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===G.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=G.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),Q.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(E.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let o=0,r=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),i=this._getNextRetryDelay(o++,0,r);if(i===null)return this._logger.log(E.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=G.Reconnecting,e?this._logger.log(E.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(E.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(s=>s.apply(this,[e]))}catch(s){this._logger.log(E.Error,`An onreconnecting callback called with error '${e}' threw error '${s}'.`)}if(this._connectionState!==G.Reconnecting)return void this._logger.log(E.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;i!==null;){if(this._logger.log(E.Information,`Reconnect attempt number ${o} will start in ${i} ms.`),await new Promise(s=>{this._reconnectDelayHandle=setTimeout(s,i)}),this._reconnectDelayHandle=void 0,this._connectionState!==G.Reconnecting)return void this._logger.log(E.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=G.Connected,this._logger.log(E.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(s=>s.apply(this,[this.connection.connectionId]))}catch(s){this._logger.log(E.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${s}'.`)}return}catch(s){if(this._logger.log(E.Information,`Reconnect attempt failed because of error '${s}'.`),this._connectionState!==G.Reconnecting)return this._logger.log(E.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===G.Disconnecting&&this._completeClose());r=s instanceof Error?s:new Error(s.toString()),i=this._getNextRetryDelay(o++,Date.now()-t,r)}}this._logger.log(E.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:o})}catch(r){return this._logger.log(E.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach(o=>{const r=t[o];try{r(null,e)}catch(i){this._logger.log(E.Error,`Stream 'error' callback called with '${e}' threw error: ${Yt(i)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,o,r){if(o)return r.length!==0?{arguments:t,streamIds:r,target:e,type:U.Invocation}:{arguments:t,target:e,type:U.Invocation};{const i=this._invocationId;return this._invocationId++,r.length!==0?{arguments:t,invocationId:i.toString(),streamIds:r,target:e,type:U.Invocation}:{arguments:t,invocationId:i.toString(),target:e,type:U.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(const o in e)e[o].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:r=>{let i;i=r instanceof Error?r.message:r&&r.toString?r.toString():"Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,i)))},next:r=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,r)))}})}}_replaceStreamingParams(e){const t=[],o=[];for(let r=0;r<e.length;r++){const i=e[r];if(this._isObservable(i)){const s=this._invocationId;this._invocationId++,t[s]=i,o.push(s.toString()),e.splice(r,1)}}return[t,o]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,o){const r=this._invocationId;return this._invocationId++,o.length!==0?{arguments:t,invocationId:r.toString(),streamIds:o,target:e,type:U.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:U.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:U.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:U.StreamItem}}_createCompletionMessage(e,t,o){return t?{error:t,invocationId:e,type:U.Completion}:{invocationId:e,result:o,type:U.Completion}}_createCloseMessage(){return{type:U.Close}}}const Gi=[0,2e3,1e4,3e4,null];class yo{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Gi}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Me{}Me.Authorization="Authorization",Me.Cookie="Cookie";class Ji extends Et{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const o=await this._innerClient.send(e);return t&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):o}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Me.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Me.Authorization]&&delete e.headers[Me.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var te,se;(function(n){n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling"})(te||(te={})),function(n){n[n.Text=1]="Text",n[n.Binary=2]="Binary"}(se||(se={}));class Qi{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class wo{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,o){this._httpClient=e,this._logger=t,this._pollAbort=new Qi,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(ee.isRequired(e,"url"),ee.isRequired(t,"transferFormat"),ee.isIn(t,se,"transferFormat"),this._url=e,this._logger.log(E.Trace,"(LongPolling transport) Connecting."),t===se.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,r]=je(),i={[o]:r,...this._options.headers},s={abortSignal:this._pollAbort.signal,headers:i,timeout:1e5,withCredentials:this._options.withCredentials};t===se.Binary&&(s.responseType="arraybuffer");const c=`${e}&_=${Date.now()}`;this._logger.log(E.Trace,`(LongPolling transport) polling: ${c}.`);const f=await this._httpClient.get(c,s);f.statusCode!==200?(this._logger.log(E.Error,`(LongPolling transport) Unexpected response code: ${f.statusCode}.`),this._closeError=new Le(f.statusText||"",f.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,s)}async _poll(e,t){try{for(;this._running;)try{const o=`${e}&_=${Date.now()}`;this._logger.log(E.Trace,`(LongPolling transport) polling: ${o}.`);const r=await this._httpClient.get(o,t);r.statusCode===204?(this._logger.log(E.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):r.statusCode!==200?(this._logger.log(E.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new Le(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(E.Trace,`(LongPolling transport) data received. ${Ye(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(E.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof wn?this._logger.log(E.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(E.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(E.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Xo(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(E.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(E.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,o]=je();e[t]=o;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let i;try{await this._httpClient.delete(this._url,r)}catch(s){i=s}i?i instanceof Le&&(i.statusCode===404?this._logger.log(E.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(E.Trace,`(LongPolling transport) Error sending a DELETE request: ${i}`)):this._logger.log(E.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(E.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(E.Trace,e),this.onclose(this._closeError)}}}class Zi{constructor(e,t,o,r){this._httpClient=e,this._accessToken=t,this._logger=o,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,t){return ee.isRequired(e,"url"),ee.isRequired(t,"transferFormat"),ee.isIn(t,se,"transferFormat"),this._logger.log(E.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,r)=>{let i,s=!1;if(t===se.Text){if(Q.isBrowser||Q.isWebWorker)i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const c=this._httpClient.getCookieString(e),f={};f.Cookie=c;const[g,S]=je();f[g]=S,i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...f,...this._options.headers}})}try{i.onmessage=c=>{if(this.onreceive)try{this._logger.log(E.Trace,`(SSE transport) data received. ${Ye(c.data,this._options.logMessageContent)}.`),this.onreceive(c.data)}catch(f){return void this._close(f)}},i.onerror=c=>{s?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},i.onopen=()=>{this._logger.log(E.Information,`SSE connected to ${this._url}`),this._eventSource=i,s=!0,o()}}catch(c){return void r(c)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})}async send(e){return this._eventSource?Xo(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class es{constructor(e,t,o,r,i,s){this._logger=o,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=i,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=s}async connect(e,t){let o;return ee.isRequired(e,"url"),ee.isRequired(t,"transferFormat"),ee.isIn(t,se,"transferFormat"),this._logger.log(E.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((r,i)=>{let s;e=e.replace(/^http/,"ws");const c=this._httpClient.getCookieString(e);let f=!1;if(Q.isNode||Q.isReactNative){const g={},[S,k]=je();g[S]=k,o&&(g[Me.Authorization]=`Bearer ${o}`),c&&(g[Me.Cookie]=c),s=new this._webSocketConstructor(e,void 0,{headers:{...g,...this._headers}})}else o&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);s||(s=new this._webSocketConstructor(e)),t===se.Binary&&(s.binaryType="arraybuffer"),s.onopen=g=>{this._logger.log(E.Information,`WebSocket connected to ${e}.`),this._webSocket=s,f=!0,r()},s.onerror=g=>{let S=null;S=typeof ErrorEvent<"u"&&g instanceof ErrorEvent?g.error:"There was an error with the transport",this._logger.log(E.Information,`(WebSockets transport) ${S}.`)},s.onmessage=g=>{if(this._logger.log(E.Trace,`(WebSockets transport) data received. ${Ye(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(S){return void this._close(S)}},s.onclose=g=>{if(f)this._close(g);else{let S=null;S=typeof ErrorEvent<"u"&&g instanceof ErrorEvent?g.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",i(new Error(S))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(E.Trace,`(WebSockets transport) sending data. ${Ye(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(E.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||e.wasClean!==!1&&e.code===1e3?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}class ts{constructor(e,t={}){var o;if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,ee.isRequired(e,"url"),this._logger=(o=t.logger)===void 0?new wt(E.Information):o===null?Ke.instance:o.log!==void 0?o:new wt(o),this.baseUrl=this._resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent!==void 0&&t.logMessageContent,typeof t.withCredentials!="boolean"&&t.withCredentials!==void 0)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=t.withCredentials===void 0||t.withCredentials,t.timeout=t.timeout===void 0?1e5:t.timeout;let r=null,i=null;if(Q.isNode&&typeof require<"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;r=s("ws"),i=s("eventsource")}Q.isNode||typeof WebSocket>"u"||t.WebSocket?Q.isNode&&!t.WebSocket&&r&&(t.WebSocket=r):t.WebSocket=WebSocket,Q.isNode||typeof EventSource>"u"||t.EventSource?Q.isNode&&!t.EventSource&&i!==void 0&&(t.EventSource=i):t.EventSource=EventSource,this._httpClient=new Ji(t.httpClient||new Fi(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||se.Binary,ee.isIn(e,se,"transferFormat"),this._logger.log(E.Debug,`Starting connection with transfer format '${se[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(E.Error,t),await this._stopPromise,Promise.reject(new ve(t))}if(this._connectionState!=="Connected"){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(E.Error,t),Promise.reject(new ve(t))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new _n(this.transport)),this._sendQueue.send(e))}async stop(e){return this._connectionState==="Disconnected"?(this._logger.log(E.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):this._connectionState==="Disconnecting"?(this._logger.log(E.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),await this._stopInternal(e),void await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(E.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(E.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==te.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(te.WebSockets),await this._startTransport(t,e)}else{let o=null,r=0;do{if(o=await this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ve("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(t=o.url),o.accessToken){const i=o.accessToken;this._accessTokenFactory=()=>i,this._httpClient._accessToken=i,this._httpClient._accessTokenFactory=void 0}r++}while(o.url&&r<100);if(r===100&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,o,e)}this.transport instanceof wo&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(E.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(E.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(e){const t={},[o,r]=je();t[o]=r;const i=this._resolveNegotiateUrl(e);this._logger.log(E.Debug,`Sending negotiation request: ${i}.`);try{const s=await this._httpClient.post(i,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(s.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${s.statusCode}'`));const c=JSON.parse(s.content);return(!c.negotiateVersion||c.negotiateVersion<1)&&(c.connectionToken=c.connectionId),c.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new mo("Client didn't negotiate Stateful Reconnect but the server did.")):c}catch(s){let c="Failed to complete negotiation with the server: "+s;return s instanceof Le&&s.statusCode===404&&(c+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(E.Error,c),Promise.reject(new mo(c))}}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}async _createTransport(e,t,o,r){let i=this._createConnectUrl(e,o.connectionToken);if(this._isITransport(t))return this._logger.log(E.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(i,r),void(this.connectionId=o.connectionId);const s=[],c=o.availableTransports||[];let f=o;for(const g of c){const S=this._resolveTransportOrError(g,t,r,f?.useStatefulReconnect===!0);if(S instanceof Error)s.push(`${g.transport} failed:`),s.push(S);else if(this._isITransport(S)){if(this.transport=S,!f){try{f=await this._getNegotiationResponse(e)}catch(k){return Promise.reject(k)}i=this._createConnectUrl(e,f.connectionToken)}try{return await this._startTransport(i,r),void(this.connectionId=f.connectionId)}catch(k){if(this._logger.log(E.Error,`Failed to start the transport '${g.transport}': ${k}`),f=void 0,s.push(new Ni(`${g.transport} failed: ${k}`,te[g.transport])),this._connectionState!=="Connecting"){const $="Failed to select transport before stop() was called.";return this._logger.log(E.Debug,$),Promise.reject(new ve($))}}}}return s.length>0?Promise.reject(new $i(`Unable to connect to the server with any of the available transports. ${s.join(" ")}`,s)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case te.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new es(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case te.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Zi(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case te.LongPolling:return new wo(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let r=!1;if(this.features.reconnect){try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{r=!0}r&&this._stopConnection(o)}else this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(e,t)}_resolveTransportOrError(e,t,o,r){const i=te[e.transport];if(i==null)return this._logger.log(E.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function(s,c){return!s||!!(c&s)}(t,i))return this._logger.log(E.Debug,`Skipping transport '${te[i]}' because it was disabled by the client.`),new Bi(`'${te[i]}' is disabled by the client.`,i);{if(!(e.transferFormats.map(s=>se[s]).indexOf(o)>=0))return this._logger.log(E.Debug,`Skipping transport '${te[i]}' because it does not support the requested transfer format '${se[o]}'.`),new Error(`'${te[i]}' does not support ${se[o]}.`);if(i===te.WebSockets&&!this._options.WebSocket||i===te.ServerSentEvents&&!this._options.EventSource)return this._logger.log(E.Debug,`Skipping transport '${te[i]}' because it is not supported in your environment.'`),new Pi(`'${te[i]}' is not supported in your environment.`,i);this._logger.log(E.Debug,`Selecting transport '${te[i]}'.`);try{return this.features.reconnect=i===te.WebSockets?r:void 0,this._constructTransport(i)}catch(s){return s}}}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(E.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState!=="Disconnected"){if(this._connectionState==="Connecting")throw this._logger.log(E.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(E.Error,`Connection disconnected with error '${e}'.`):this._logger.log(E.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(E.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(E.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}else this._logger.log(E.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!Q.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(E.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const o=new URLSearchParams(t.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),t.search=o.toString(),t.toString()}}class _n{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new tt,this._transportResult=new tt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new tt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new tt;const e=this._transportResult;this._transportResult=void 0;const t=typeof this._buffer[0]=="string"?this._buffer.join(""):_n._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(o){e.reject(o)}}}static _concatBuffers(e){const t=e.map(i=>i.byteLength).reduce((i,s)=>i+s),o=new Uint8Array(t);let r=0;for(const i of e)o.set(new Uint8Array(i),r),r+=i.byteLength;return o.buffer}}class tt{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class ns{constructor(){this.name="json",this.version=2,this.transferFormat=se.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=Ke.instance);const o=pe.parse(e),r=[];for(const i of o){const s=JSON.parse(i);if(typeof s.type!="number")throw new Error("Invalid payload.");switch(s.type){case U.Invocation:this._isInvocationMessage(s);break;case U.StreamItem:this._isStreamItemMessage(s);break;case U.Completion:this._isCompletionMessage(s);break;case U.Ping:case U.Close:break;case U.Ack:this._isAckMessage(s);break;case U.Sequence:this._isSequenceMessage(s);break;default:t.log(E.Information,"Unknown message type '"+s.type+"' ignored.");continue}r.push(s)}return r}writeMessage(e){return pe.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}}const os={trace:E.Trace,debug:E.Debug,info:E.Information,information:E.Information,warn:E.Warning,warning:E.Warning,error:E.Error,critical:E.Critical,none:E.None};class rs{configureLogging(e){if(ee.isRequired(e,"logging"),e.log!==void 0)this.logger=e;else if(typeof e=="string"){const t=function(o){const r=os[o.toLowerCase()];if(r!==void 0)return r;throw new Error(`Unknown log level: ${o}`)}(e);this.logger=new wt(t)}else this.logger=new wt(e);return this}withUrl(e,t){return ee.isRequired(e,"url"),ee.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions=typeof t=="object"?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return ee.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new yo(e):this.reconnectPolicy=e:this.reconnectPolicy=new yo,this}withServerTimeout(e){return ee.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return ee.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new ts(this.url,e);return bn.create(t,this.logger||Ke.instance,this.protocol||new ns,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Fs(n){const e=new rs().configureLogging(E.Information).withUrl(n).withAutomaticReconnect({nextRetryDelayInMilliseconds:()=>5e3}).build();return e.keepAliveIntervalInMilliseconds=15e3,e.serverTimeoutInMilliseconds=18e5,e.start().then(()=>{W.Logger().info("启动SignalR连接！")}),e.onclose(async()=>{W.Logger().info("断开SignalR连接!")}),e.onreconnecting(()=>{W.Logger().warn("SignalR服务已断线，重连中...！")}),e.onreconnected(()=>{W.Logger().warn("SignalR重连成功!")}),e}const an=new Set;function bo(n){return n!==null?parseFloat(n):0}function nt(n){const e=window.getComputedStyle(n),t=Math.ceil([e.paddingLeft,e.width,e.paddingRight].map(bo).reduce((r,i)=>r+i)),o=Math.ceil([e.paddingTop,e.height,e.paddingBottom].map(bo).reduce((r,i)=>r+i));return{width:t,height:o}}class is{width;height;constructor(e,t){this.width=e,this.height=t}}function ss(n){const e=n.windowEl;if(e){const t=parseFloat(e.style.left||"NaN"),o=parseFloat(e.style.top||"NaN");if(!isNaN(t)&&!isNaN(o))return{left:t,top:o}}return null}function as(n,e,t,o){const r=n-t,i=e-o;return r*r+i*i}window.addEventListener("resize",n=>{an.forEach(e=>{e&&di(e.fixPosition)&&e.fixPosition()})});const ot=[];var _o=De({name:"VWindow",props:{windowStyle:{type:Object,required:!0},isOpen:{type:Boolean,required:!1,default:!0},title:{type:String,required:!0,default:""},closeButton:{type:Boolean,required:!1,default:!0},resizable:{type:Boolean,required:!1,default:!1},isScrollable:{type:Boolean,required:!1,default:!1},padding:{type:Number,required:!1,default:8},activateWhenOpen:{type:Boolean,required:!1,default:!0},positionHint:{type:String,required:!1,default:""},zGroup:{type:Number,required:!1,default:1},overflow:{type:String,required:!1,default:"visible"},minWidth:{type:Number,required:!1,default:1},minHeight:{type:Number,required:!1,default:0},maxWidth:{type:Number,required:!1,default:0},maxHeight:{type:Number,required:!1,default:0},height:{type:Number,required:!1},width:{type:Number,required:!1},top:{type:Number,required:!1},left:{type:Number,required:!1}},components:{myButton:dt},setup(n,{emit:e}){const t=ni();if(!t)return;const{proxy:o}=t;let r=0,i,s,c;const f=Y(n.isOpen),g=()=>{ot.push(o),c=new ai(n.zGroup,S),n.isOpen&&function(D){Ao(()=>{r++==0&&(m(o),function(){const T=k.value,{width:A,height:j}=tn(T);let O,L;if(n.left!==void 0!=(n.top!==void 0))throw new Error("Either of left or top is specified. Both must be set or not set.");if(typeof n.left=="number")O=n.left,L=n.top;else{const H=n.positionHint||"auto";switch(H){case"auto":{let F=20,ce=50,oe=0;do{if(ot.every(we=>{if(!we.isOpen||o==we)return!0;const Ge=ss(we);if(Ge==null)return!0;const{left:It,top:ge}=Ge;return as(It,ge,F,ce)>16}))break;F=(F+40)%(window.innerWidth-200),ce=(ce+40)%(window.innerHeight-200)}while(++oe<100);O=F,L=ce}break;case"center":O=(window.innerWidth-A)/2,L=(window.innerHeight-j)/2;break;default:try{const F=H.split("/").map(Number);if(F.length!=2)throw null;const[ce,oe]=F;if(!isFinite(ce)||!isFinite(oe))throw null;O=ce>=0?ce:window.innerWidth-A+ce,L=oe>=0?oe:window.innerHeight-j+oe}catch{throw new Error(`invalid position string: ${H}`)}}}T&&(T.style.left=`${O}px`,T.style.top=`${L}px`)}()),n.resizable&&p(),B(),i=new si($.value,k.value,{onMove:()=>B(),onMoveStart:()=>e("move-start"),onMoveEnd:()=>e("move-end")}),n.resizable&&function(){const{height:T}=tn($.value);s=new li(k.value,{onResize:()=>p(),onResizeStart:()=>e("resize-start"),onResizeEnd:()=>e("resize-end"),minWidth:n.minWidth,minHeight:n.minHeight+T,maxWidth:n.maxWidth,maxHeight:n.maxHeight?n.maxHeight+T:void 0})}()}),n.activateWhenOpen&&M()}(),an.add(o)};function S(D){d.value.zIndex=`${D}`}const k=Y(null),$=Y(null),P=Y(null);function M(){c.raise(),e("activate")}const d=Y({...n.windowStyle.window,zIndex:"auto",overflow:n.overflow}),l=$e(()=>n.windowStyle.titlebar),v=$e(()=>{const D={...n.windowStyle.content};return n.resizable?D.padding="0":n.padding!=null&&(D.padding=`${n.padding}px`),n.isScrollable&&(D.overflow="auto"),D});function m(D){const{width:T,height:A,top:j,left:O}=D,L=k;if(L&&T!=null&&(L.value.style.width=`${T}px`),A!=null){const H=$.value;if(H){const F=nt(H).height;L.value.style.height=`${A+F}px`}}L&&O!=null&&(L.value.style.left=`${O}px`),L&&j!=null&&(L.value.style.top=`${j}px`)}function p(D=!0){const T=k.value,A=$.value,j=P.value;if(j&&T&&A){const{width:O,height:L}=nt(j),{width:H,height:F}=nt(T),ce=nt(A).height,oe=H-(j.offsetWidth-O),we=F-ce-(j.offsetHeight-L);j.style.width=`${oe}px`,j.style.height=`${we}px`,y(),e("resize",new is(oe,we)),D&&(e("update:width",oe),e("update:height",we))}}function y(){const D=k.value;if(D){const T=D.getBoundingClientRect();T.left<0&&(d.value.left="0px"),T.top<0&&(d.value.top="0px"),T.right>window.innerWidth&&(d.value.left=window.innerWidth-T.width+"px"),T.bottom>window.innerHeight&&(d.value.top=window.innerHeight-T.height+"px")}}function B(D=!0){y();const T=k.value;if(T){const{left:A,top:j}=T.getBoundingClientRect();D&&(e("update:left",A),e("update:top",j))}}return Te(()=>n.isOpen,D=>{f.value=D}),Te(()=>n.zGroup,D=>{c.group=D}),Te(()=>n.width,D=>{m({width:D}),p(!1)}),Te(()=>n.height,D=>{m({height:D}),p(!1)}),hn(()=>{g()}),ei(()=>{an.delete(this),c.unregister(),s&&s.teardown(),i&&i.teardown(),ot.splice(ot.indexOf(o),1)}),{isOpen:f,windowEl:k,titlebar:$,content:P,activate:M,styleWindow:d,styleTitlebar:l,styleContent:v,closeButtonClick:function(){f.value=!1,e("closebuttonclick")},fixPosition:y}}});const cs={class:"title"};var So;_o.render=function(n,e,t,o,r,i){const s=_t("myButton");return X(),Z(To,{name:"fade",onAfterLeave:e[2]||(e[2]=c=>n.$emit("close")),onAfterEnter:e[3]||(e[3]=c=>n.$emit("open")),persisted:""},{default:_e(()=>[Ro(J("div",{class:"window",style:me(n.styleWindow),ref:"windowEl",onMousedown:e[0]||(e[0]=(...c)=>n.activate&&n.activate(...c)),onTouchstart:e[1]||(e[1]=(...c)=>n.activate&&n.activate(...c))},[J("div",{class:"titlebar",style:me(n.styleTitlebar),ref:"titlebar"},[J("div",cs,[n.$slots.title?ie(n.$slots,"title",{key:0}):(X(),fe(Ie,{key:1},[en(un(n.title),1)],64))]),n.closeButton?(X(),Z(s,{key:0,windowStyle:n.windowStyle,onClick:n.closeButtonClick},{default:_e(()=>e[4]||(e[4]=[en("×")])),_:1},8,["windowStyle","onClick"])):ne("v-if",!0)],4),J("div",{class:"content",style:me(n.styleContent),ref:"content"},[ie(n.$slots,"default")],4)],36),[[Lo,n.isOpen]])]),_:3})},_o.__file="src/controls/vuewindow/window/index.vue",function(n){n[n.StyleBlack=0]="StyleBlack",n[n.StyleWhite=1]="StyleWhite",n[n.StyleMetal=2]="StyleMetal",n[n.StyleGrayblue=3]="StyleGrayblue"}(So||(So={}));const Xs={window:{color:"#fff",boxShadow:"0 0 6pt rgba(255, 255, 255, 0.75)",backgroundColor:"rgba(31, 31, 31, 0.9)"},titlebar:{backgroundColor:"rgba(63, 63, 63, 0.9)"},content:{},button:{color:"white"},buttonHover:{backgroundColor:"rgba(255, 255, 255, 0.25)"},buttonActive:{color:"black",backgroundColor:"rgba(255, 255, 255, 0.5)"}},Vs={window:{color:"#000",boxShadow:"0 4pt 8pt rgba(0, 0, 0, 0.5)",background:"linear-gradient(to bottom, rgb(215, 215, 215), rgb(191, 191, 191))"},titlebar:{background:"linear-gradient(to bottom, rgb(215, 215, 215), rgb(191, 191, 191))"},content:{},button:{color:"#000"},buttonHover:{backgroundColor:"rgba(0, 0, 0, 0.25)"},buttonActive:{color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.5)"}};var he;(function(n){n[n.top=0]="top",n[n.bottom=1]="bottom",n[n.centerBack=2]="centerBack",n[n.centerMain=3]="centerMain",n[n.centerFront=4]="centerFront",n[n.left=5]="left",n[n.right=6]="right"})(he||(he={}));class ls{layoutState;layoutMap=new Map;preConditionMap=new Map;widgetsLoadedSet=new Set;widgetConfig=new Array;_LayoutID;_mapItemRefs;constructor(e,t,o,r){this.layoutState=e,this._LayoutID=o,this._mapItemRefs=r,t.forEach(i=>{if(i.layoutID===o&&(this.widgetConfig.push(i),i.afterid))if(this.preConditionMap.has(i.afterid))this.preConditionMap.get(i.afterid)?.add(i);else{const s=new Set;s.add(i),this.preConditionMap.set(i.afterid,s)}})}getLayoutID(){return this._LayoutID}getWidgetConfig(){return this.widgetConfig}preloadWidgets(){this.widgetConfig.filter(e=>e.preload&&!e.afterid).forEach(e=>{this._loadWidget(e)})}async loadWidget(e){if(!e)return;let t;if(fn(e)?t=e:Bo(e)&&(t=this.widgetConfig.find(o=>o.id===e)),t){if(t.afterid){if(this.isWidgetLoaded(t.afterid))return this._loadWidget(t);{let o=function(c){c.layoutID===r._LayoutID&&c.widgetID===i&&(r._loadWidget(s),W.EventBus.off(ae.WidgetLoadedEvent,o))};const r=this,i=t.afterid,s=t;return W.EventBus.on(ae.WidgetLoadedEvent,o),this.loadWidget(t.afterid)}}return this._loadWidget(t)}}loadOtherDependenceWidgets(e){this.preConditionMap.has(e)&&this.preConditionMap.get(e)?.forEach(t=>{t.preload&&this._loadWidget(t)})}_loadWidget(e){if(!this.widgetsLoadedSet.has(e.id))return e.component?e.component().then(t=>{if(t.default){const o=ti(t.default);o.id=e.id,e.layout&&(o.style=e.layout),e.cssClass&&(o.cssClass=e.cssClass),e.layoutID&&(o.layoutID=e.layoutID),e.label&&(o.label=e.label),e.jsURL&&(o.jsURL=e.jsURL),e.cssURL&&(o.cssURL=e.cssURL),this.getContainerComponents(e.container).value.set(e.id,o),this.widgetsLoadedSet.add(e.id),Ao().then(()=>{W.EventBus.emit(ae.WidgetLoadedEvent,{layoutID:this._LayoutID,widgetID:e.id}),this.loadOtherDependenceWidgets(e.id)})}}).catch(t=>{W.Logger().error("加载Widget失败！",e,t),W.EventBus.emit(ae.WidgetLoadedErrorEvent,e)}):void 0;this.changeWidgetVisible(e.id,!0)}hasDependentWidgets(e){let t=!1;if(this.preConditionMap.has(e)){const o=this.preConditionMap.get(e);if(o){for(const r of o)if(this.isWidgetLoaded(r.id)){t=!0;break}}}return t}unloadWidget(e){if(!e||!this.isWidgetLoaded(e))return;const t=this.widgetConfig.find(o=>o.id===e);if(t){if(this.preConditionMap.has(e)){const o=this.preConditionMap.get(e);if(o)for(const r of o)this.unloadWidget(r.id)}this.getContainerComponents(t.container).value.delete(e),this.widgetsLoadedSet.delete(e),this._mapItemRefs&&this._mapItemRefs.delete(e),W.EventBus.emit(ae.WidgetUnLoadedEvent,{layoutID:this._LayoutID,widgetID:e})}}isWidgetLoaded(e){return this.widgetsLoadedSet.has(e)}splitTwoContainer(e=!1){const t=this.layoutState.centerMainContainer,o=this.layoutState.centerBackContainer;e?(t&&(t.style.left="0",t.style.width="100%"),o&&(o.style.width="100%")):(t&&(t.style.left="50%",t.style.width="50%"),o&&(o.style.width="50%"))}getLayoutContainer(e){switch(e){case he.top:return this.layoutState.topContainer;case he.bottom:return this.layoutState.bottomContainer;case he.left:return this.layoutState.leftContainer;case he.right:return this.layoutState.rightContainer;case he.centerBack:return this.layoutState.centerBackContainer;case he.centerMain:return this.layoutState.centerMainContainer;case he.centerFront:return this.layoutState.centerFrontContainer}}changeContainerVisible(e,t=!1){const o=this.getLayoutContainer(e);o&&(o.style.visibility=t?"visible":"hidden")}changeWidgetVisible(e,t=!1){const o=this.getWidgetComponent(e);o&&o.changeVisible&&o.changeVisible(t)}isWidgetVisible(e){const t=this.getWidgetComponent(e);return!!t&&(!t.isShow||t.isShow.value)}getWidgetComponent(e){if(this.widgetsLoadedSet.has(e)&&this._mapItemRefs)return this._mapItemRefs.get(e)}getWigetItem(e){return this.widgetConfig.find(t=>t.id===e)}getGroupWigetItems(e){return this.widgetConfig.filter(t=>t.group===e)}getContainerComponents(e){if(this.layoutMap.has(e))return this.layoutMap.get(e);{const t=Y(new Map);return this.layoutMap.set(e,t),t}}getWidgetLoadedIDList(){const e=[];return this.widgetsLoadedSet.forEach(t=>{e.push(t)}),e}unloadAllWidgets(e){const t=[];this.widgetsLoadedSet.forEach(o=>{e&&e.length>0?e.findIndex(r=>r===o)<0&&t.push(o):t.push(o)}),t.forEach(o=>this.unloadWidget(o))}unloadWidgets(e){e&&e.length>0&&e.forEach(t=>{this.unloadWidget(t)})}static getLayoutManager(e,t){if(t){const o=t.find(r=>r.id===e);if(o&&o.layoutID)return W.LayoutMap.get(o.layoutID)}}}var bt=De({name:"SuspenseWithError",setup(){const n=Y(null);return Gr(e=>(n.value="当前页面存在问题，无法渲染……",!0)),{error:n}}});bt.render=function(n,e,t,o,r,i){return n.error?ie(n.$slots,"error",{key:0},()=>[en(un(n.error),1)]):(X(),Z(Yr,{key:1},{default:_e(()=>[ie(n.$slots,"default")]),fallback:_e(()=>[ie(n.$slots,"fallback")]),_:3}))},bt.__file="src/controls/routertransition/SuspenseWithError.vue";var Vo=De({name:"RouterTransition",__name:"RouterTransition",setup:n=>(e,t)=>{const o=_t("router-view");return X(),Z(bt,null,{default:_e(()=>[pt(o,null,{default:_e(({Component:r,route:i})=>[ne(" <transition> "),(X(),Z(Mo,null,[i.meta.keepAlive?(X(),Z(be(r),{key:i.name})):ne("v-if",!0)],1024)),i.meta.keepAlive?ne("v-if",!0):(X(),Z(be(r),{key:i.name})),ne(" </transition> ")]),_:1})]),_:1})}});Vo.__file="src/controls/routertransition/RouterTransition.vue";var Gt=De({name:"LayoutContainer",props:{widgetConfig:{type:Array,required:!0,default:()=>[]},layoutID:{type:String,default:void 0},layoutStyle:{type:Object},enableRouterView:{type:Boolean,default:!0}},emits:["containerLoaded"],components:{RouterTransition:Vo},setup(n,{attrs:e,slots:t,emit:o}){const r=n.layoutID,i=Y(n.enableRouterView);Te(()=>n.enableRouterView,()=>{i.value=n.enableRouterView});const s=xo({topContainer:void 0,centerBackContainer:void 0,centerMainContainer:void 0,centerFrontContainer:void 0,bottomContainer:void 0,leftContainer:void 0,rightContainer:void 0}),c=new Map,f=new ls(s,n.widgetConfig,r,c),g=d(he.top),S=d(he.centerBack),k=d(he.centerFront),$=d(he.left),P=d(he.right),M=d(he.bottom);function d(v){return f?.getContainerComponents(v)}const l=$e(()=>n.layoutStyle);return hn(()=>{f&&(r?W.LayoutMap.set(r,f):(W.LayoutManager=f,W.LayoutMap.set("",f)),f.preloadWidgets(),o("containerLoaded",{layoutID:r,layoutManager:f}),W.EventBus.emit(ae.LayoutContainerLoaded,{layoutID:r,layoutManager:f}))}),{...Jr(s),topContainerComponents:g,centerbackComponents:S,centerfrontComponents:k,leftContainerComponents:$,rightContainerComponents:P,bottomContainerComponents:M,containerStyle:l,isEnableRouterView:i,setItemRef:(v,m)=>{v&&c.set(m,v)}}}});const us={ref:"topContainer",class:"topContainer"},hs={key:0,ref:"centerMainContainer",class:"centerdiv mainContainer"},ds={ref:"centerBackContainer",class:"centerdiv backContainer"},fs={ref:"centerFrontContainer",class:"centerdiv centerFrontContainer"},ps={ref:"leftContainer",class:"leftContainer"},gs={ref:"rightContainer",class:"rightContainer"},ms={ref:"bottomContainer",class:"bottomContainer"};Gt.render=function(n,e,t,o,r,i){const s=_t("router-transition");return X(),fe("div",{class:"layoutContainer",style:me(n.containerStyle)},[J("div",us,[ie(n.$slots,"top"),(X(!0),fe(Ie,null,Be(n.topContainerComponents,([c,f])=>(X(),Z(be(f),{ref_for:!0,ref:g=>n.setItemRef(g,c),key:c,style:me(f.style),class:xe(f.cssClass)},null,8,["style","class"]))),128))],512),J("div",null,[ne(" 主要容器-底部 "),n.isEnableRouterView?(X(),fe("div",hs,[ie(n.$slots,"main",{},()=>[pt(s)])],512)):ne("v-if",!0),ne(" 上一层-主容器 "),J("div",ds,[ie(n.$slots,"back"),(X(!0),fe(Ie,null,Be(n.centerbackComponents,([c,f])=>(X(),Z(be(f),{ref_for:!0,ref:g=>n.setItemRef(g,c),key:c,style:me(f.style),class:xe(f.cssClass)},null,8,["style","class"]))),128))],512),ne(" 最上浮动-主容器 "),J("div",fs,[ie(n.$slots,"front"),(X(!0),fe(Ie,null,Be(n.centerfrontComponents,([c,f])=>(X(),Z(be(f),{ref_for:!0,ref:g=>n.setItemRef(g,c),key:c,style:me(f.style),class:xe(f.cssClass)},null,8,["style","class"]))),128))],512),J("div",ps,[ie(n.$slots,"left"),(X(!0),fe(Ie,null,Be(n.leftContainerComponents,([c,f])=>(X(),Z(be(f),{ref_for:!0,ref:g=>n.setItemRef(g,c),key:c,style:me(f.style),class:xe(f.cssClass)},null,8,["style","class"]))),128))],512),J("div",gs,[ie(n.$slots,"right"),(X(!0),fe(Ie,null,Be(n.rightContainerComponents,([c,f])=>(X(),Z(be(f),{ref_for:!0,ref:g=>n.setItemRef(g,c),key:c,style:me(f.style),class:xe(f.cssClass)},null,8,["style","class"]))),128))],512)]),J("div",ms,[ie(n.$slots,"bottom"),(X(!0),fe(Ie,null,Be(n.bottomContainerComponents,([c,f])=>(X(),Z(be(f),{ref_for:!0,ref:g=>n.setItemRef(g,c),key:c,style:me(f.style),class:xe(f.cssClass)},null,8,["style","class"]))),128))],512),ne(" 增加默认插槽 "),ie(n.$slots,"default")],4)},Gt.__scopeId="data-v-4d081e5c",Gt.__file="src/controls/layoutcontainer/layout.vue";var vs=De({name:"RouterTransition",__name:"RouterTransitionAnimate",props:{enterActive:{type:String,required:!1,default:"animated fadeIn"},leaveActive:{type:String,required:!1,default:"animated fadeOut"}},setup:n=>(e,t)=>{const o=_t("router-view");return X(),Z(bt,null,{default:_e(()=>[pt(o,null,{default:_e(({Component:r,route:i})=>[pt(Qr,{appear:"","enter-active-class":e.enterActive,"leave-active-class":e.leaveActive},{default:_e(()=>[(X(),Z(Mo,null,[i.meta.keepAlive?(X(),Z(be(r),{key:i.name})):ne("v-if",!0)],1024)),i.meta.keepAlive?ne("v-if",!0):(X(),Z(be(r),{key:i.name}))]),_:2},1032,["enter-active-class","leave-active-class"])]),_:1})]),_:1})}});vs.__file="src/controls/routertransition/RouterTransitionAnimate.vue";const He=new Map,ft=Y(new Map);class rt{static addWindowPanel(e){He.set(e.id,e)}static removeWindowPanel(e){He.has(e)&&(He.delete(e),ft.value.delete(e))}static minimizeWindowPanel(e){He.has(e)&&ft.value.set(e,-1)}static openWindowPanel(e){He.has(e)&&ft.value.set(e,1)}}const ys=["src"],ws={key:1,class:"paneltitle"},bs={class:"dragPanelBar"},_s={class:"dragPanelContent"},Ss={class:"drag-pointer-group"};var Co=De({__name:"XWindow",props:{top:{type:[String,Number],default:0},left:{type:[String,Number],default:0},nWidth:{type:[String,Number],default:"300px"},nHeight:{type:[String,Number],default:"400px"},icon:{type:String,default:"img/logo.png"},title:{type:String,default:""},titleHeight:{type:[String,Number],default:"40px"},hasMin:{type:Boolean,default:!0},hasMax:{type:Boolean,default:!1},hasClose:{type:Boolean,default:!0},isDark:{type:Boolean,default:!1},pid:{type:String,default:""},tag:{type:[String,Array,Object,Number],default:""}},emits:["close","open","loaded","minimize"],setup(n,{expose:e,emit:t}){const o=gi(),r=n,i=t,s=Y(),c=Y(),f=$e(()=>r.isDark),g=Y({x:0,y:0}),S=250,k=100,$=Y({width:0,height:0}),P=L=>{s.value&&(s.value.style.left=`${L.x}px`,s.value.style.top=`${L.y}px`)};Te(()=>g.value,L=>{P(L)});const M=L=>{s.value&&(s.value.style.width=`${L.width}px`,s.value.style.height=`${L.height}px`)};Te(()=>$.value,L=>{M(L)});const d={eventListenerController:null,startingEdges:null,newEdges:null,clickStart:null,mount:()=>{Object.entries(d.refs).forEach(([L,H])=>{H.value&&H.value.addEventListener("mousedown",F=>{d.mouseDown(F,L)})})},mouseDown:(L,H)=>{L.button==0&&(L.preventDefault(),d.startingEdges={left:g.value.x,top:g.value.y,right:g.value.x+$.value.width,bottom:g.value.y+$.value.height},d.newEdges={...d.startingEdges},d.clickStart={x:L.clientX,y:L.clientY},d.eventListenerController=new AbortController,document.addEventListener("mousemove",F=>{d.mouseMove(F,H)},{signal:d.eventListenerController.signal}),document.addEventListener("mouseup",F=>{d.mouseUp(F,H)},{signal:d.eventListenerController.signal}))},mouseMove:(L,H)=>{if(d.startingEdges!=null&&d.newEdges!=null&&d.clickStart!=null&&d.refs[H].value){if(L.preventDefault(),H.toLowerCase().includes("north")){d.newEdges.top=Math.max(d.startingEdges.top+L.clientY-d.clickStart.y,0);const F=d.newEdges.bottom-d.newEdges.top-k;F<0&&(d.newEdges.top+=F)}else H.toLowerCase().includes("south")&&(d.newEdges.bottom=Math.min(d.startingEdges.bottom+L.clientY-d.clickStart.y,document.body.clientHeight));if(H.toLowerCase().includes("west")){d.newEdges.left=Math.max(d.startingEdges.left+L.clientX-d.clickStart.x,0);const F=d.newEdges.right-d.newEdges.left-S;F<0&&(d.newEdges.left+=F)}else H.toLowerCase().includes("east")&&(d.newEdges.right=Math.min(d.startingEdges.right+L.clientX-d.clickStart.x,document.body.clientWidth));d.update()}},update:()=>{d.newEdges==null||d.startingEdges==null||(g.value={x:Math.max(d.newEdges.left,0),y:Math.max(d.newEdges.top,0)},$.value={width:Math.min(Math.max(d.newEdges.right-d.newEdges.left,S),document.body.clientWidth),height:Math.min(Math.max(d.newEdges.bottom-d.newEdges.top,k),document.body.clientHeight)})},mouseUp:(L,H)=>{L.button!=0||d.startingEdges==null||(L.preventDefault(),d.startingEdges=null,d.newEdges=null,d.clickStart=null,d.eventListenerController&&(d.eventListenerController.abort(),d.eventListenerController=null))},refs:{northWest:Y(null),north:Y(null),northEast:Y(null),west:Y(null),east:Y(null),southWest:Y(null),south:Y(null),southEast:Y(null)}},l={startingMouse:null,startingPosition:null,mouseDown:L=>{L.button==0&&(L.preventDefault(),l.startingMouse={x:L.clientX,y:L.clientY},l.startingPosition=g.value,document.addEventListener("mousemove",l.mouseMove),document.addEventListener("mouseup",l.mouseUp))},mouseMove:L=>{!l.startingMouse||!l.startingPosition||(L.preventDefault(),g.value={x:Math.min(Math.max(l.startingPosition.x+L.clientX-l.startingMouse.x,0),document.body.clientWidth-$.value.width),y:Math.min(Math.max(l.startingPosition.y+L.clientY-l.startingMouse.y,0),document.body.clientHeight-$.value.height)})},mouseUp:L=>{L.button!=0||!l.startingMouse||!l.startingPosition||(L.preventDefault(),l.startingMouse=null,l.startingPosition=null,document.removeEventListener("mousemove",l.mouseMove),document.removeEventListener("mouseup",l.mouseUp))}};function v(L){return{id:o,icon:r.icon,title:r.title,pid:r.pid,data:L??r.tag}}const m=$e(()=>ft.value.get(o)!==-1),p=Y(!1),y=Y(!0);function B(){i("minimize",v()),rt.minimizeWindowPanel(o)}function D(){p.value=!p.value}function T(){i("close",v(!1)),rt.removeWindowPanel(o),y.value=!1}const A=$e(()=>p.value?"heroicons-outline:square-2-stack":"ant-design:border-outlined"),j={id:o,isShow:m,close:T,open:function(){i("open",v(!0)),y.value=!0},showHidePanel:B};function O(L){if(Vn(L))return L;{const H=Number(L);if(H==H)return H;if(L.endsWith("px")){const F=L.substring(0,L.length-2);return Number(F)}if(L.endsWith("%")){const F=L.substring(0,L.length-1);return Number(F)/100*document.body.clientWidth}return 300}}return e(j),hn(()=>{(function(){let L=90;if(r.hasMin||(L-=30),r.hasMax||(L-=30),r.hasClose||(L-=30),de.setCssVar("--right-bar-width",L+"px",c.value),!c.value)return;const H=Vn(r.titleHeight)?r.titleHeight+"px":r.titleHeight;c.value.style.height=H,c.value.style.lineHeight=H})(),function(){const L=v(j);rt.addWindowPanel(L),i("loaded",L)}(),g.value.x=O(r.left),g.value.y=O(r.top),P(g.value),$.value={width:O(r.nWidth),height:O(r.nHeight)},M($.value),d.mount()}),Zr(()=>{rt.removeWindowPanel(o)}),(L,H)=>(X(),Z(To,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:_e(()=>[y.value?Ro((X(),fe("div",{key:0,ref_key:"dragPanelRef",ref:s,class:xe(["dragWindowPanel",{maxPanel:p.value,dragWindowPanel_dark:f.value}])},[J("div",{class:"dragPanelTitle",ref_key:"dragPanelTitleRef",ref:c,onMousedown:H[0]||(H[0]=(...F)=>l.mouseDown&&l.mouseDown(...F))},[ie(L.$slots,"title",{},()=>[r.icon?(X(),fe("img",{key:0,src:r.icon,width:"24",height:"24"},null,8,ys)):ne("v-if",!0),r.title?(X(),fe("span",ws,un(r.title),1)):ne("v-if",!0)]),J("div",bs,[n.hasMin?(X(),Z(Nt($t),{key:0,icon:"ant-design:minus-outlined",onClick:B})):ne("v-if",!0),n.hasMax?(X(),Z(Nt($t),{key:1,icon:A.value,onClick:D},null,8,["icon"])):ne("v-if",!0),n.hasClose?(X(),Z(Nt($t),{key:2,icon:"ant-design:close-outlined",onClick:T})):ne("v-if",!0)])],544),J("div",_s,[ie(L.$slots,"default")]),J("div",Ss,[J("div",{class:"cursor-nw-resize",ref:d.refs.northWest},null,512),J("div",{class:"cursor-n-resize",ref:d.refs.north},null,512),J("div",{class:"cursor-ne-resize",ref:d.refs.northEast},null,512),J("div",{class:"cursor-w-resize",ref:d.refs.west},null,512),H[1]||(H[1]=J("span",{style:{"pointer-events":"all",visibility:"hidden"}},null,-1)),J("div",{class:"cursor-e-resize",ref:d.refs.east},null,512),J("div",{class:"cursor-sw-resize",ref:d.refs.southWest},null,512),J("div",{class:"cursor-s-resize",ref:d.refs.south},null,512),J("div",{class:"cursor-se-resize",ref:d.refs.southEast},null,512)])],2)),[[Lo,m.value]]):ne("v-if",!0)]),_:3}))}});function Ks(n){const e=new le.Writer(new le.ByteStream);return e.serialize(n),e.stream.toString()}function Ys(n){return n==null||n===""?n:new le.Reader(new le.ByteStream(n)).deserialize()}Co.__scopeId="data-v-39ea9741",Co.__file="src/controls/xwindow/XWindow.vue";class Ko{debug=!1;simple=!1;utc=!1;longType="number";dictType="object";nullType=void 0;static Instance=new Ko;textEncoder=new TextEncoder;textDecoder=new TextDecoder;constructor(){}encodeResponse(e,t={}){var o=new le.ByteStream,r=new le.Writer(o,this.simple,this.utc),i=t;this.simple;var s=0;for(var c in i)s++;s>0&&(o.writeByte(72),r.serialize(i),r.reset()),e instanceof Error?(o.writeByte(69),r.serialize(this.debug&&e.stack?e.stack:e.message)):(o.writeByte(82),r.serialize(e)),o.writeByte(122);const f=o.takeBytes();return this.textDecoder.decode(f)}decodeRequest(e,t={}){const o=this.textEncoder.encode(e);if(o.length===0)return["~",[]];var r=new le.ByteStream(o),i=new le.Reader(r,!1);i.longType=this.longType,i.dictType=this.dictType;var s=r.readByte();if(s===72){var c=i.deserialize(this.nullType);for(var f in c)t[f]=c[f];i.reset(),s=r.readByte()}switch(s){case 67:return[i.deserialize(String),this.decodeArguments(i)];case 122:return["~",[]];default:throw new Error(`Invalid request:\r
`+r.toString())}}decodeArguments(e){var t=e.stream;let o=[];if(t.readByte()===97){e.reset();var r=le.ValueReader.readCount(t);const s=new Array(r).fill(this.nullType);o=new Array(r),e.addReference(o);for(var i=0;i<r;++i)o[i]=e.deserialize(s[i]);t.readByte()}return o}encodeRequest(e,t,o={}){var r=new le.ByteStream,i=new le.Writer(r,this.simple,this.utc),s=o;this.simple&&(s.simple=!0);var c=0;for(var f in s)c++;c>0&&(r.writeByte(72),i.serialize(s),i.reset()),r.writeByte(67),i.serialize(e),t.length>0&&(i.reset(),i.serialize(t)),r.writeByte(122);const g=r.takeBytes();return this.textDecoder.decode(g)}decodeResponse(e,t={}){const o=this.textEncoder.encode(e);var r=new le.ByteStream(o),i=new le.Reader(r,!1);i.longType=this.longType,i.dictType=this.dictType;var s=r.readByte();if(s===72){var c=i.deserialize();for(var f in c)t[f]=c[f];i.reset(),s=r.readByte()}switch(s){case 82:return t.simple&&(i.simple=!0),i.deserialize();case 69:throw new Error(i.deserialize(String));case 122:return;default:throw new Error(`Invalid response:\r
`+r.toString())}}}const it=new Map,Jt=new Map;let st;const Gs={getDefaultClient(){if(st||(st=new nn(SysConfig.DefaultHproseAPI)),!st)throw Error("HproseProxy对象为空");return st},registerHprose(n,e){const t=Jt.get(n);if(!t){const o=new nn(e);it.set(n,o)}return t},getHprose:n=>Jt?.get(n),getProxyHprose:n=>it.get(n),unregisterHprose(n){it.get(n)&&(Jt.delete(n),it.delete(n))}},Eo=5e3,Cs=36e5,Oe={Login:"/api/User/Login",ChangeMyPwd:"/api/User/ChangeMyPwd",Logout:"/api/Check/ExitLogin",RefreshToken:"/api/Check/RefreshToken",CheckToken:"/api/Check/CheckToken",GetSystemRights:"/api/System/GetSystem"},cn="access_token",Es=W.Config.ServiceURL.LoginAuthURL;function ko(){const n=vi();n&&ye(Oe.RefreshToken,Es,{refreshToken:n}).then(e=>{Yo(e.data)})}function ks(){const n=Ve.getJsonObject(cn);if(!n)return;const e=new Date().getTime(),t=new Date(n.expire).getTime()-e;t>0&&(t<=Eo?ko():setTimeout(ko,t-Eo))}function Yo(n){const e=new Date().getTime();let t=new Date(n.accessToken.expires).getTime()-e;if((t>=Cs||t<-6e5)&&(t=18e5),t>0){let o=ze();o?(o.token=n.accessToken.tokenContent,o.expire=n.accessToken.expires,o.refresh=n.refreshToken.tokenContent):o={token:n.accessToken.tokenContent,expire:n.accessToken.expires,refresh:n.refreshToken.tokenContent},Ve.set(cn,o,t/1e3),ks()}else Ve.remove(cn)}const ln="Wm314243",kt=W.Config.ServiceURL.LoginAuthURL;async function Js(n){const e={username:n.username,pwd:sn.encryptToString(n.pwd,ln)},t=(await ye(Oe.Login,kt,e))?.data;return t&&(Yo(t.doubletoken),on(!1)),t}function Qs(n){const e={oldpwd:sn.encryptToString(n.oldpwd,ln),newpwd:sn.encryptToString(n.newpwd,ln)};return ye(Oe.ChangeMyPwd,kt,e)}function Zs(){const n=ze();n&&(yi(Oe.Logout,kt,{token:n.token,reftoken:n.refresh}),zo())}function ea(n){return ye(Oe.CheckToken,kt,{token:n})}const Sn="ROLE_SYSTEM_RIGHT",Cn=new No("",sessionStorage);function Is(){return Cn.get(Sn)}function Io(n){Cn.set(Sn,n)}function xs(){Cn.remove(Sn)}function Fe(n){if(n)for(let e=0;e<n.length;e++){const t=n[e];t.children&&t.children.length>0?(Fe(t.children),t.children.length===0&&(n.splice(e,1),e--)):t.selected||(n.splice(e,1),e--)}}function Go(n,e,t="name"){n&&e&&n.forEach(o=>{const r=e.find(i=>i[t]===o[t]);r&&(o.children?r.children&&Go(o.children,r.children,t):(!r.children||r.children.length===0)&&r.selected&&(o.selected=r.selected))})}function at(n,e,t,o="name"){const r=n[t],i=e[t];r?i&&Go(r,i,o):i&&(n[t]=i)}function Ts(n){if(n&&n.length>0){const e=n.length;let t,o=!1;if(e>0){o=fn(n[0]);const r=o?n[0]:JSON.parse(n[0]);if(e>1)for(let i=1;i<n.length;i++){const s=n[i],c=o?s:JSON.parse(s);at(r,c,"routes","name"),at(r,c,"widgetMenu","name"),at(r,c,"widgets","id"),at(r,c,"functions","id")}t=r}return t&&(Fe(t.routes),Fe(t.widgetMenu),Fe(t.widgets),Fe(t.functions)),t}}const Qt=[],Zt=[];function Jo(){return Is()}async function ta(n,e=!1){xs();const t=Oe.GetSystemRights,o=W.Config.ServiceURL.LoginAuthURL,r=await ye(t,o,{systemid:n});if(!r||!r.data)return void W.Message?.warn("无法获取功能授权列表！");const i=r.data;if(i&&i.length>0){if(e){const s=JSON.parse(i[0]);return Io(s),s}{const s=Ts(i);return Io(s),s}}}function Qo(n,e){const t={...n};return t.meta||(t.meta={}),e.index!=null&&(t.meta.index=e.index),e.title!=null&&(t.meta.title=e.title),n.children&&(t.children=[],e.children&&e.children.forEach(o=>{const r=n.children?.find(i=>i.path===o.path);if(r){const i=Qo(r,o);i&&t.children?.push(i)}})),t}function na(n,e=2){if(e===0)return n;const t=Jo();return t&&t.routes?(Zt.length>0||n.forEach(o=>{const r=t.routes?.find(i=>i.name===o.name);if(r){const i=Qo(o,r);i&&Zt.push(i)}}),Zt):void 0}function oa(n,e=2){if(e===0)return n;const t=Jo();return t&&t.widgets?(Qt.length>0||n?.forEach(o=>{t.widgets?.find(r=>r.id===o.id)&&Qt.push(o)}),Qt):void 0}export{_o as $,na as A,W as B,Ks as C,ze as D,Ys as E,Ws as F,js as G,Yo as H,Js as I,mi as J,Vn as K,qe as L,ea as M,Vo as N,ks as P,Ko as Q,Qs as T,yi as V,Ns as X,Os as Y,Us as Z,No as _,Li as a,Jo as b,Zs as c,ta as d,he as e,oa as f,Gt as g,de as h,Co as i,rt as j,$s as k,Bs as l,qs as m,Fs as n,ye as o,Ps as p,Gs as q,Vs as r,ae as s,Xs as t,zs as u,Hs as v,Bo as w,mn as x,Ds as y,xs as z};
