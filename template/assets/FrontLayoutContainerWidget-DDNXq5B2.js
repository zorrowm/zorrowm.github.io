import{x as B,v as k,q,e as M}from"./quasar-exp-BsaNoQ7w.js";import{w as V,_ as N}from"./index-BQ7ovaqR.js";import{b as O,u as Q}from"./vue-router-exp-CO9L2VdX.js";import{k as j,E as A,g as H,B as g,l as T}from"./xframelib-exp-CMLeiWD4.js";import{e as U}from"./monaco-editor-exp-BNK_u0iZ.js";import{S as z}from"./index-DqC68tPp.js";import{F as G}from"./FullScreen-CiM9rot9.js";import{d as J,r as a,k as y,v as K,e as X,j as i,a4 as m,b as Y,l as u,a7 as Z,a0 as $,ag as ee}from"./@vue-exp-Bws36Ke9.js";import"./vendor-DJm_4oaR.js";import"./lottie-web-exp-CIY4INm7.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";const C="frontLayoutWidget",te=J({__name:"FrontLayoutContainerWidget",setup(I,{expose:v}){const w=O(),t=Q(),L=a(),_=V,d=a(_),p=a(C);let l;j("widgetsList.txt").then(e=>{e.data&&(l=A(e.data))});function b(){h.value=!1,r.value=!1,s.value="",g.gui&&(g.gui.destroy(),g.gui=void 0);const e=t.query?.wid;if(e){const o=g.LayoutMap.get(C);o&&(e=="MapViewerWidget"?o.unloadWidget(e.toString()):(o.unloadWidget(e.toString()),setTimeout(()=>{o.unloadWidget("MapViewerWidget")},500)))}w.push({query:void 0})}const h=a(!0);function W(e=!1){h.value=e}v({changeVisible:W,isShow:h});const c=a("0px"),f=a(""),r=a(!1),s=a("");async function D(){if(c.value==="0px"?c.value="40%":c.value="0px",r.value=!r.value,r.value&&!s.value){const e=t.query?.wid?.toString();if(e&&l){const o=l.find(n=>n.layoutID==="frontLayoutWidget"&&n.id===e);if(o){f.value=o.path;const n="./code"+o.path;requestGet(n,void 0,void 0,void 0,"text").then(F=>{s.value=F.data,s.value&&S()}).catch(F=>{})}}}}function R(){c.value="0px",r.value=!1}function x(e){const o=e.lastIndexOf("/")+1;let n=e.substring(o);return n=decodeURI(n.split("?")[0]),n}function P(){if(f.value){const e=x(f.value);T(g.Axios,"code"+f.value,e)}}function S(){const e=document.getElementById("container");e&&(window.MonacoEnvironment={getWorkerUrl:function(o,n){return""}},U.create(e,{value:s.value,language:"typescript",lineNumbers:"on",readOnly:!0,readOnlyMessage:{value:"不可以修改哦",supportThemeIcons:!0,supportHtml:!0},automaticLayout:!0,minimap:{enabled:!1},overviewRulerLanes:0,scrollbar:{horizontal:"hidden",handleMouseWheel:!0}}))}const E={name:C,router:w,route:t,containerRef:L,widgetCofig:_,configRef:d,layoutIDRef:p,get widgetsList(){return l},set widgetsList(e){l=e},closeFrontLayoutWidget:b,isShow:h,changeVisible:W,leftPanelWidth:c,widgetFilePath:f,drawerLeft:r,drawerContetn:s,SwitchDrawer:D,closeCodePanel:R,getFileName:x,downloadVue:P,InitMonaCoeditor:S,get LayoutContainer(){return H},SplitPanel:z,FullScreen:G};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),oe={class:"frontcontainer"},ie={id:"container",ref:"containerRef",style:{height:"100%",width:"100%"}},ne={class:"editorBar row justify-center items-middle"},ae={class:"q-mr-md q-gutter-md"},le={class:"rightBtn q-px-sm"};function re(I,v,w,t,L,_){const d=$("Icon"),p=ee("tooltip");return y((Y(),X("div",oe,[i(B,{view:"hHh lpR fFf"},{default:m(()=>[i(k,null,{default:m(()=>[i(t.SplitPanel,{style:{height:"100vh",width:"100%"},leftWidth:t.leftPanelWidth},{"left-content":m(()=>[u("div",ie,[u("div",ne,[u("div",null,Z(t.widgetFilePath),1),i(q),u("div",ae,[y(i(d,{icon:"ant-design:download-outlined",onClick:t.downloadVue},null,512),[[p,"下载vue文件"]]),i(t.FullScreen,{target:t.containerRef},null,8,["target"]),y(i(d,{icon:"ant-design:close-circle-outlined",onClick:t.closeCodePanel},null,512),[[p,"关闭代码页"]])])])],512)]),"right-content":m(()=>[i(t.LayoutContainer,{widgetConfig:t.configRef,layoutID:t.layoutIDRef,enableRouterView:!1},{default:m(()=>[u("div",le,[u("span",{class:"cursor-pointer",title:"关闭",onClick:t.closeFrontLayoutWidget,style:{"margin-right":"10px"}},[i(d,{icon:"ant-design:close-circle-outlined",width:"32",style:{color:"white !important"}})]),i(M,{flat:"",onClick:v[0]||(v[0]=l=>t.SwitchDrawer()),label:"查看代码",dense:"",icon:"menu"})])]),_:1},8,["widgetConfig","layoutID"])]),_:1},8,["leftWidth"])]),_:1})]),_:1})],512)),[[K,t.isShow]])}const Ce=N(te,[["render",re],["__scopeId","data-v-f4b76038"],["__file","FrontLayoutContainerWidget.vue"]]);export{Ce as default};
