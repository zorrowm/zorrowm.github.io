import{i as C,j as L,k as A,H as B,m as M,O as S,e as Q}from"./quasar-exp-B7YDMHDE.js";import{O as U}from"./urlUtils-DZs0CCYb.js";import{b as $,u as W}from"./vue-router-exp-B23Vo4Jw.js";import{W as w}from"./xframelib-exp-uSJ3EBow.js";import{d as V,r as R,b as s,e as i,F as h,a9 as x,f as b,a3 as v,i as _,j as q,a1 as g,aa as D,a6 as O}from"./@vue-exp-CzdoyapG.js";var u=(t=>(t[t.Widget=0]="Widget",t[t.Route=1]="Route",t[t.URL=2]="URL",t[t.Action=3]="Action",t))(u||{});function j(t,p=[]){return t.forEach(o=>{if(o.children){const r={label:o.meta?.title??"无",children:new Array};p.push(r),j(o.children,r.children)}else p.push({label:o.meta?.title??"无",kind:1,name:o.name})}),p}const F={class:"row gt-xs q-py-md q-gutter-xs"},Y=V({__name:"PageMenu",props:{data:{type:Array,required:!0}},setup(t){const o=R(t.data),r=$(),d=W();function k(e){if(e.children){let n=!1;if(e.children.forEach(a=>{if(a.name==d.name||a.path===d.path){n=!0;return}}),n)return" pagemenuActive"}else if(e.name==d.name||e.path===d.path)return"pagemenuActive";return""}const c=R();function f(e,n){const a=e.label;if(c.value)c.value.label!=a&&(c.value.state=!1),c.value=e,e.state=n;else{c.value=e,e.state=n;return}}function y(e){if(!(!e||e.children)&&(e.path||e.name))switch(e.kind){case void 0:case u.Route:e.blank?U(r,e.path,{}):e.name?r.push({name:e.name}):e.path&&r.push({path:e.path});break;case u.URL:window.open(e.path,"_blank");break;case u.Action:w.EventBus.emit("IPageMenu.Action",e);break;case u.Widget:w.EventBus.emit("LayoutLoadWidget",e);break}}return(e,n)=>(s(),i("div",F,[(s(!0),i(h,null,x(o.value,(a,H)=>(s(),i(h,{key:a.label},[a.children?(s(),b(S,{key:0,"model-value":a.state,"onUpdate:modelValue":l=>a.state=l,"transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:a.label,class:g([k(a),"pageMenuItem"]),onMouseover:l=>f(a,!0)},{default:v(()=>[_(C,{style:{"min-width":"100px"},onMouseover:l=>f(a,!0),onMouseleave:l=>f(a,!1)},{default:v(()=>[(s(!0),i(h,null,x(a.children,(l,N)=>(s(),i(h,{key:l.label},[q((s(),b(L,{clickable:"",class:g([k(l),"pageMenuItem"]),onClick:z=>y(l)},{default:v(()=>[_(A,null,{default:v(()=>[D(O(l.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[B]]),_(M)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"])):(s(),b(Q,{key:1,flat:"",label:a.label,class:g([k(a),"pageMenuItem"]),onClick:l=>y(a),onMouseover:l=>f(a,!1)},null,8,["label","class","onClick","onMouseover"]))],64))),128))]))}});export{u as E,Y as _,j as g};
