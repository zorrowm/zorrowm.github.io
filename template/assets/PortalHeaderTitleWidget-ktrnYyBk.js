import{bF as J,bu as K,bw as x,bv as I,bA as X,bB as S,bC as h,bD as R,bz as Y}from"./vendor-B1f7FUIB.js";import{F as Z}from"./FullScreen-DuJBCOWS.js";import{D as $}from"./DarkMode-C3f8d41E.js";import{n as ee,b as te,u as oe,p as F,i as ae,j as ne,_ as le}from"./index-CvUQtR9N.js";import{B as w}from"./xframelib-exp-B9KgMBHw.js";import{S as L}from"./SystemsEvent-DUQCZw_Q.js";import{a as se,d as B}from"./WidgetsTool-D2n2VlBU.js";import{u as ie,b as re}from"./vue-router-exp-DWvvxSx9.js";import{g as D,P as ue}from"./PageMenu-C2CfLeD-.js";import{d as de,r as i,w as ce,c as me,o as ge,a as fe,e as T,l as t,j as o,a6 as c,g as C,a0 as b,f as m,a3 as n,$ as pe,b as r,ab as v}from"./@vue-exp-DMKPrOh0.js";import"./@hprose-exp-BEudjurc.js";import"./pdfjs-dist-exp-C7mOU4gj.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-5llPk3YT.js";import"./WidgetsEvent-e0lOKT5_.js";import"./urlUtils-DSORhQjc.js";const _e=de({__name:"PortalHeaderTitleWidget",setup(E,{expose:a}){a();const u=i([]),e=ee();D(e,u.value);const g=K(),k=i(w.Config.UI?.SiteTitle),l=te(),d=oe();d.id&&D(F.children,u.value);const{leftCollapsed:P}=J(l),H=i(l.headerSetting.centerTitle),Q=i(l.headerSetting.showFullScreen),N=i(l.headerSetting.showCollapseIcon);function O(){l.toggleCollapse()}const U=i(window.document.documentElement),f=ie(),y=re(),p=i(f.name);ce(()=>f.name,s=>{s&&(p.value=s.toString())});function W(s){return p.value===s?"border-bottom:solid 3px #33f":"border-bottom:unset;"}const q=()=>{g.dialog({title:"退出",message:"您确定要退出登录吗？",cancel:!0}).onOk(()=>{d.clear(),w.Message.msg("成功退出登录"),window.open(window.location.pathname,"_self")}).onCancel(()=>{})},A=me(()=>!w.Config.UI?.IsNoLogin&&d.name);function V(){B({modalID:"changeMyPWD",extraData:{title:"修改密码"},width:500,rowData:void 0})}function j(){y.push({path:"/"})}function z(){B({modalID:"loginModal",extraData:{title:"内部管理系统"},rowData:{},width:700})}function _(){se({modalID:"loginModal"}),D(F.children,u.value)}ge(()=>{ae(L.UserLoginSuccess,_)}),fe(()=>{ne(L.UserLoginSuccess,_)});const M={menuList:u,menuRoutes:e,$q:g,siteTitle:k,appState:l,userState:d,leftCollapsed:P,iscenterTitle:H,showFullScreen:Q,showCollapseIcon:N,toggleCollapse:O,fullScreenElem:U,route:f,router:y,nameRef:p,getRightStyle:W,doLogout:q,isNOLogin:A,showUserModal:V,goBackHome:j,showLoginDialog:z,onSuccessHandler:_,FullScreen:Z,DarkMode:$,get PageMenu(){return ue}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),Se={class:"test11"},he={class:"topHeaderWidget"},we={key:0},De={class:"rightmenu"},Ce={class:"absolute-top-right q-ma-md",style:{width:"140px"}},be={class:"q-gutter-md row items-center no-wrap"},ve={style:{"text-transform":"none"}};function ke(E,a,u,e,g,k){const l=pe("Icon");return r(),T("div",Se,[t("div",he,[o(e.PageMenu,{data:e.menuList,class:"q-mx-md"},null,8,["data"]),t("div",{class:"centerTitle",onClick:e.goBackHome},[e.iscenterTitle?(r(),T("span",we,c(e.siteTitle),1)):C("",!0),a[0]||(a[0]=t("div",{class:"title"},"Worldwide Coordinate Systems Online Service",-1))]),t("ul",De,[t("li",null,[t("a",{href:"/#/epsg/4326",style:b(e.getRightStyle("epsg-info"))},"EPSG详情",4)]),t("li",null,[t("a",{href:"/#/index",style:b(e.getRightStyle("transform"))},"坐标转换",4)]),t("li",null,[t("a",{href:"/#/api",style:b(e.getRightStyle("api"))},"API接口",4)])])]),t("div",Ce,[t("div",be,[t("span",null,[e.showCollapseIcon?(r(),m(l,{key:0,icon:e.leftCollapsed?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined",onClick:e.toggleCollapse},null,8,["icon"])):C("",!0)]),e.showFullScreen&&e.$q.screen.gt.sm?(r(),m(e.FullScreen,{key:0,target:e.fullScreenElem},null,8,["target"])):C("",!0),o(e.DarkMode),e.isNOLogin?(r(),m(x,{key:2,flat:"","text-color":"white"},{default:n(()=>[t("span",ve,c(e.userState.name),1),o(Y,null,{default:n(()=>[o(X,{dense:""},{default:n(()=>[o(S,null,{default:n(()=>[o(h,null,{default:n(()=>[t("div",null,[a[2]||(a[2]=v(" 角色： ")),a[3]||(a[3]=t("br",null,null,-1)),t("strong",null,c(e.userState.DefaultMaxRole),1)])]),_:1})]),_:1}),o(R),o(S,{clickable:"",class:"outlist"},{default:n(()=>[o(h,{onClick:e.showUserModal},{default:n(()=>[t("div",null,[o(l,{icon:"ant-design:info-circle-outlined"}),a[4]||(a[4]=t("span",null,"修改密码",-1))])]),_:1})]),_:1}),o(R),o(S,{clickable:"",class:"outlist"},{default:n(()=>[o(h,{onClick:e.doLogout},{default:n(()=>[t("div",null,[o(l,{icon:"ant-design:logout-outlined"}),a[5]||(a[5]=t("span",null,"退出登录",-1))])]),_:1})]),_:1})]),_:1})]),_:1}),o(I,null,{default:n(()=>[v("角色:"+c(e.userState.DefaultMaxRole),1)]),_:1})]),_:1})):(r(),m(x,{key:1,dense:"",flat:"",onClick:e.showLoginDialog},{default:n(()=>[o(l,{icon:"grommet-icons:login"}),o(I,null,{default:n(()=>a[1]||(a[1]=[v("用户登录")])),_:1})]),_:1}))])])])}const We=le(_e,[["render",ke],["__scopeId","data-v-a4b58946"],["__file","PortalHeaderTitleWidget.vue"]]);export{We as default};
