import{bw as a}from"./vendor-B1f7FUIB.js";import{z as k,B as l,C as J,_ as y,g as E,H as F,p as I}from"./xframelib-exp-B9KgMBHw.js";import{d as R,b as U,e as A,j as s}from"./@vue-exp-DMKPrOh0.js";import{_ as L}from"./index-CvUQtR9N.js";import"./@hprose-exp-BEudjurc.js";import"./pdfjs-dist-exp-C7mOU4gj.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-5llPk3YT.js";import"./vue-router-exp-DWvvxSx9.js";const O=R({__name:"HttpFileDownload",setup(m,{expose:g}){g();function p(){k(l.Axios,"http://192.168.1.18:8003/api/Deployment/GetDeploymentFile?id=4faeef96-72b6-4771-a07d-56ac7a48780f&type=0","2.jpg")}function n(){J("img/background.png","",void 0,void 0,"blob").then(o=>{o.data&&y(o.data,"background.png")}).catch(()=>{l.Message.warn("下载错误")})}function w(){h({url:"https://assets.msn.cn/weathermapdata/1/static/background/v2.0/jpg/sunny.jpg",target:"_blank",fileName:"124.png"})}function f(){k(l.Axios,"https://file.gis.digsur.com/swagger/v1/swagger.json","2.json")}function v(){E("https://file.gis.digsur.com/swagger/v1/swagger.json").then(o=>{o.data&&F(o.data,"test")}).catch(()=>{l.Message.warn("下载错误")})}function x(){F({name:"test",age:16,class:"3-4",telephone:"13401030446"},"student")}function B(){E("SampleData/README.md").then(o=>{o.data&&I(o.data,"test.md")})}function r(o){const i=o.lastIndexOf("/")+1;let c=o.substring(i);return c=decodeURI(c.split("?")[0]),c}function h({url:o,target:i="_blank",fileName:c}){const C=new URL(o).host==location.host;return new Promise((u,j)=>{if(C){const t=document.createElement("a");if(t.href=o,t.target=i,t.download!==void 0&&(t.download=c||r(o)),document.createEvent){const e=document.createEvent("MouseEvents");return e.initEvent("click",!0,!0),t.dispatchEvent(e),u(!0)}return o.indexOf("?")===-1&&(o+="?download"),window.open(o,i),u(!0)}else{const t=document.createElement("canvas"),e=document.createElement("img");e.setAttribute("crossOrigin","Anonymous"),e.src=o,e.onload=b=>{t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t.toBlob(_=>{if(_){const d=document.createElement("a");d.href=window.URL.createObjectURL(_),d.download=r(o),d.click(),URL.revokeObjectURL(d.href),u(!0)}})},e.onerror=b=>j(b)}})}const D={doImageDownlaod:p,doImageDownload2:n,doJsonDownload3:w,doJsonDownload:f,doJsonDownlaod2:v,doJsonDownlaod3:x,doTextDownlaod:B,getFileName:r,DownloadByUrl:h};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),H={class:"q-pa-md q-gutter-md"};function N(m,g,p,n,w,f){return U(),A("div",H,[s(a,{color:"white","text-color":"black",label:"图片下载",onClick:n.doImageDownlaod}),s(a,{color:"white","text-color":"black",label:"图片下载2",onClick:n.doImageDownload2}),s(a,{color:"white","text-color":"black",label:"图片下载3(废弃)",onClick:m.doImageDownload3},null,8,["onClick"]),s(a,{color:"primary",label:"Json下载",onClick:n.doJsonDownload}),s(a,{color:"purple",label:"Json下载2",onClick:n.doJsonDownlaod2}),s(a,{color:"amber",label:"Json对象下载",onClick:n.doJsonDownlaod3}),s(a,{color:"secondary",label:"文本下载",onClick:n.doTextDownlaod})])}const W=L(O,[["render",N],["__file","HttpFileDownload.vue"]]);export{W as default};
