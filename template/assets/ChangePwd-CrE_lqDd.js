import{a0 as m,a4 as c}from"./quasar-exp-BsaNoQ7w.js";import{i as C,j as g,_ as v}from"./index-BQ7ovaqR.js";import{cC as F,cB as S}from"./vendor-DJm_4oaR.js";import{B as n,T as b}from"./xframelib-exp-CMLeiWD4.js";import{d as V,o as h,a as y,r as j,q as M,b as O,e as E,j as u,a4 as $}from"./@vue-exp-Bws36Ke9.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./vue-router-exp-CO9L2VdX.js";import"./lottie-web-exp-CIY4INm7.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";const w="changeMyPWD";let q;const f={validateForm:q,name:w,props:{data:F([Boolean,Object]).def(!1),extra:S().isRequired},setup(r,{emit:a}){function d(l){l?p():t.value.resetFields()}h(()=>{C(w,d)}),y(()=>{g(w,d)});const t=j(),s=M({oldPassword:"",newPassword:"",newPassword2:"",showLevel:!1}),B={newPassword:[{required:!0,validator:async(l,o)=>o===""?Promise.reject("输入新密码"):o===s.oldPassword?Promise.reject("新旧密码不能一样!"):Promise.resolve(),trigger:"change"}],newPassword2:[{required:!0,validator:async(l,o)=>o===""?Promise.reject("请再次输入密码"):o!==s.newPassword?Promise.reject("两次输入的不一致!"):Promise.resolve(),trigger:"change"}]};f.validateForm=()=>t.value.validate();function p(){if(s.newPassword!=s.newPassword2){n.Message.warn("两次新密码不一致");return}const l=s.oldPassword,o=s.newPassword;b({oldpwd:l,newpwd:o}).then(i=>{i?.data?n.Message.info("修改密码成功！"):n.Message.warn("修改密码失败！")}).catch(i=>{n.Message.warn("修改密码失败:"+i.message)})}return{rules:B,formState:s,formRef:t,labelCol:{span:6},wrapperCol:{span:14},onSubmit:p}}},U=V(f);function k(r,a,d,t,s,P){return O(),E("div",null,[u(c,{ref:"formRef",validation:"",model:r.formState,"label-col":r.labelCol,"wrapper-col":r.wrapperCol,rules:r.rules},{default:$(()=>[u(m,{modelValue:r.formState.oldPassword,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formState.oldPassword=e),type:"password",label:"旧密码","lazy-rules":"",rules:[e=>e&&e.length>0||"请输入密码"]},null,8,["modelValue","rules"]),u(m,{modelValue:r.formState.newPassword,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formState.newPassword=e),label:"新密码",type:"password",hint:"请输入新密码","lazy-rules":"",rules:[e=>e&&e.length>0&&e!=r.formState.oldPassword||"请输入新密码"]},null,8,["modelValue","rules"]),u(m,{modelValue:r.formState.newPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formState.newPassword=e),label:"确认密码",type:"password",hint:"再次输入新密码",rules:[e=>e&&e.length>0&&e!=r.formState.newPassword||"请输入新密码"]},null,8,["modelValue","rules"])]),_:1},8,["model","label-col","wrapper-col","rules"])])}const G=v(U,[["render",k],["__file","ChangePwd.vue"]]);export{G as default};
