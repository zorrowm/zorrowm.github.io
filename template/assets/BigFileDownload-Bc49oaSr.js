import{J as p}from"./xframelib-exp-uSJ3EBow.js";import{d as f,q as w,X as g,r as v,b as y,e as D,k as n,a6 as b,aa as s}from"./@vue-exp-CzdoyapG.js";import"./axios-exp-C7rfqWEd.js";import"./vendor-CSzZZ-de.js";import"./lottie-web-exp-CIY4INm7.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./@iconify/vue-exp-BLEeEXwl.js";const c={class:"q-pa-md q-gutter-md"},a="3a491563ee764790a44c0e77d8b15a4e",q=f({__name:"BigFileDownload",setup(k){const i=w({});g(i);const l=v(""),e=new p(a,"https://file.gis.digsur.com/api/Downloads/DownloadFile",10);e.on("downloadProgress",o=>{const t=document.getElementById("downloadProgress");t&&(t.value=o)}),e.on("saveProgress",o=>{const t=document.getElementById("saveProgress");t&&(t.value=o)}),e.on("success",()=>{const o=document.getElementById("downloadProgress");o&&(o.value=100)}),e.on("info",o=>{l.value=o}),e.on("error",o=>{});async function r(){const o=await e.getIFileMeta();if(o===null){const t=await e.queryDownloadFileMeta("https://file.gis.digsur.com/api/Downloads/GetDownloadFileInfo","",{key:a,name:"test.tif"});await e.init(t)}else await e.init(o);e.download()}function d(){e.pause()}function u(){e.restart()}function m(){e.delete()}return(o,t)=>(y(),D("div",c,[t[0]||(t[0]=n("div",{class:"text-center text-bold"},"大文件分片下载",-1)),n("button",{onClick:r},"开始分段下载"),n("span",null,b(l.value),1),t[1]||(t[1]=n("br",null,null,-1)),t[2]||(t[2]=n("input",{type:"range",id:"downloadProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),t[3]||(t[3]=s(" 下载进度 ")),t[4]||(t[4]=n("br",null,null,-1)),t[5]||(t[5]=n("input",{type:"range",id:"saveProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),t[6]||(t[6]=s(" 输出文件进度 ")),t[7]||(t[7]=n("br",null,null,-1)),n("button",{onClick:d},"暂停"),n("button",{onClick:u},"重启"),n("button",{onClick:m},"清空缓存")]))}});export{q as default};
