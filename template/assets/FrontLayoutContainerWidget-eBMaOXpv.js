import{v as q,q as D,e as F,x as M}from"./quasar-exp-B7YDMHDE.js";import{d as B,r as n,j as m,v as V,b as N,e as P,i,a3 as c,k as a,a6 as E,I as Q,$,ae as G}from"./@vue-exp-CzdoyapG.js";import{w as O,_ as j}from"./index-DylLUN-r.js";import{b as H,u as K}from"./vue-router-exp-B23Vo4Jw.js";import{r as T,s as U,W as f,K as z,G as A}from"./xframelib-exp-uSJ3EBow.js";import{e as J}from"./monaco-editor-exp-BNK_u0iZ.js";import{S as X}from"./index-BWY1CakQ.js";import{F as Y}from"./FullScreen-BFNHdAi8.js";import"./vendor-CSzZZ-de.js";import"./lottie-web-exp-CIY4INm7.js";import"./xgis-cesium-exp-Cbv1lISI.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-BLEeEXwl.js";const Z={class:"frontcontainer"},ee={class:"editorBar row justify-center items-middle"},te={class:"q-mr-md q-gutter-md"},oe={class:"rightBtn q-px-sm"},w="frontLayoutWidget",ie=B({__name:"FrontLayoutContainerWidget",setup(ne,{expose:y}){const _=H(),p=K(),h=n(),C=n(O),x=n(w);let g;T("widgetsList.txt").then(e=>{e.data&&(g=U(e.data))});function W(){v.value=!1,r.value=!1,u.value="",f.gui&&(f.gui.destroy(),f.gui=void 0);const e=p.query?.wid;if(e){const t=f.LayoutMap.get(w);t&&(e=="MapViewerWidget"?t.unloadWidget(e.toString()):(t.unloadWidget(e.toString()),setTimeout(()=>{t.unloadWidget("MapViewerWidget")},500)))}_.push({query:void 0})}const v=n(!0);function I(e=!1){v.value=e}y({changeVisible:I,isShow:v});const l=n("0px"),s=n(""),r=n(!1),u=n("");async function L(){if(l.value==="0px"?l.value="40%":l.value="0px",r.value=!r.value,r.value&&!u.value){const e=p.query?.wid?.toString();if(e&&g){const t=g.find(o=>o.layoutID==="frontLayoutWidget"&&o.id===e);if(t){s.value=t.path;const o="./code"+t.path;requestGet(o,void 0,void 0,void 0,"text").then(d=>{u.value=d.data,u.value&&k()}).catch(d=>{})}}}}function b(){l.value="0px",r.value=!1}function S(e){const t=e.lastIndexOf("/")+1;let o=e.substring(t);return o=decodeURI(o.split("?")[0]),o}function R(){if(s.value){const e=S(s.value);z(f.Axios,"code"+s.value,e)}}function k(){const e=document.getElementById("container");e&&(window.MonacoEnvironment={getWorkerUrl:function(t,o){return""}},J.create(e,{value:u.value,language:"typescript",lineNumbers:"on",readOnly:!0,readOnlyMessage:{value:"不可以修改哦",supportThemeIcons:!0,supportHtml:!0},automaticLayout:!0,minimap:{enabled:!1},overviewRulerLanes:0,scrollbar:{horizontal:"hidden",handleMouseWheel:!0}}))}return(e,t)=>{const o=$("Icon"),d=G("tooltip");return m((N(),P("div",Z,[i(M,{view:"hHh lpR fFf"},{default:c(()=>[i(q,null,{default:c(()=>[i(X,{style:{height:"100vh",width:"100%"},leftWidth:l.value},{"left-content":c(()=>[a("div",{id:"container",ref_key:"containerRef",ref:h,style:{height:"100%",width:"100%"}},[a("div",ee,[a("div",null,E(s.value),1),i(D),a("div",te,[m(i(o,{icon:"ant-design:download-outlined",onClick:R},null,512),[[d,"下载vue文件"]]),i(Y,{target:h.value},null,8,["target"]),m(i(o,{icon:"ant-design:close-circle-outlined",onClick:b},null,512),[[d,"关闭代码页"]])])])],512)]),"right-content":c(()=>[i(Q(A),{widgetConfig:C.value,layoutID:x.value,enableRouterView:!1},{default:c(()=>[a("div",oe,[a("span",{class:"cursor-pointer",title:"关闭",onClick:W,style:{"margin-right":"10px"}},[i(o,{icon:"ant-design:close-circle-outlined",width:"32",style:{color:"white !important"}})]),i(F,{flat:"",onClick:t[0]||(t[0]=le=>L()),label:"查看代码",dense:"",icon:"menu"})])]),_:1},8,["widgetConfig","layoutID"])]),_:1},8,["leftWidth"])]),_:1})]),_:1})],512)),[[V,v.value]])}}}),_e=j(ie,[["__scopeId","data-v-f4b76038"]]);export{_e as default};
