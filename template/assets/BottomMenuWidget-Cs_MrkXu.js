import{i as q,j as F,k as P,G as z,m as G,O as T,e as J}from"./quasar-exp-BsaNoQ7w.js";import{i as R,j as K,M as v,_ as U,m as X}from"./index-BQ7ovaqR.js";import{O as Y}from"./urlUtils-BslGeNE1.js";import{b as Z,u as I}from"./vue-router-exp-CO9L2VdX.js";import{s as L,B as H}from"./xframelib-exp-CMLeiWD4.js";import{d as O,r as y,o as ee,a as te,b as s,e as g,F as _,ab as D,f as C,a4 as M,j as b,k as Q,a2 as W,ac as ae,a7 as oe,v as ne,l as E}from"./@vue-exp-Bws36Ke9.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./vendor-DJm_4oaR.js";import"./lottie-web-exp-CIY4INm7.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";const se=O({__name:"index",props:{data:{},layoutManager:{}},setup(l,{expose:u}){u();const r=l,a=y(r.data),h=Z(),k=I();function t(e){if(e.children){let n=!1;if(e.children.forEach(i=>{if(i.selected){n=!0;return}}),n)return" pagemenuActive"}else if(e.selected)return"pagemenuActive";return""}const c=y();function o(e,n){const i=e.label;if(c.value)c.value.label!=i&&(c.value.state=!1),c.value=e,e.state=n;else{c.value=e,e.state=n;return}}let d;function x(e){if(e.path&&e.path)switch(e.type){case v.Route:e.blank?Y(h,e.path,{}):h.push({path:e.path});break;case v.URL:window.open(e.path,"_blank");break;case v.Action:H.EventBus.emit("IWidgetMenu.Action",e);break;case v.Widget:const n=r.layoutManager;d=e,e.selected?(e.selected=!1,e.unload?n.unloadWidget(e.path):n.changeWidgetVisible(e.path,!1)):(e.selected=!0,n.isWidgetLoaded(e.path)?n.changeWidgetVisible(e.path,!0):n.loadWidget(e.path));break}}function S(e){if(e&&e.layoutID===r.layoutManager.getLayoutID()){const i=e.widgetID;if(d&&d.path===i&&!d.selected)return;const A=a.value.length;let f;for(let m=0;m<A;m++){const p=a.value[m];if(p.type===v.Widget){if(p.path===i){f=p;break}else if(p.children){const N=p.children.length;for(let w=0;w<N;w++){const V=p.children[w];if(V.path===i){f=V;break}}}if(f)break}}f&&f.selected&&(f.selected=!1)}}ee(()=>{R(L.WidgetUnLoadedEvent,S)}),te(()=>{K(L.WidgetUnLoadedEvent,S)});const B={props:r,dataRef:a,router:h,route:k,getSelectedStyle:t,currentItem:c,setShowState:o,get CurrentMenuItem(){return d},set CurrentMenuItem(e){d=e},menuClickHandler:x,onWidgetLoadedHanlder:S};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),le={class:"row gt-xs q-ma-auto q-gutter-xs flex-center"};function re(l,u,r,a,h,k){return s(),g("div",le,[(s(!0),g(_,null,D(a.dataRef,(t,c)=>(s(),g(_,{key:t.name},[t.path?(s(),C(J,{key:1,color:"white",flat:"",label:t.name,class:W(t.selected?"pagemenuActive":""),onClick:o=>a.menuClickHandler(t),onMouseover:o=>a.setShowState(t,!1)},null,8,["label","class","onClick","onMouseover"])):(s(),C(T,{key:0,"model-value":t.state,"onUpdate:modelValue":o=>t.state=o,color:"white","transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:t.name,class:W(a.getSelectedStyle(t)),onMouseover:o=>a.setShowState(t,!0)},{default:M(()=>[b(q,{style:{"min-width":"100px"},onMouseover:o=>a.setShowState(t,!0),onMouseleave:o=>a.setShowState(t,!1)},{default:M(()=>[(s(!0),g(_,null,D(t.children,(o,d)=>(s(),g(_,{key:o.name},[Q((s(),C(F,{clickable:"",class:W(a.getSelectedStyle(o)),onClick:x=>a.menuClickHandler(o)},{default:M(()=>[b(P,null,{default:M(()=>[ae(oe(o.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[z]]),b(G)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"]))],64))),128))])}const j=U(se,[["render",re],["__file","index.vue"]]),$="bottomMenuWidget",ie=O({name:$,components:{BottomMainMenu:j},props:{},setup(){const l=y(H.LayoutMap.get("bigScreenLayout")),u=y(!0);function r(a){a.name===$&&(u.value=a.visible)}return R(L.WidgetVisibleChanged,r),{isVisible:u,menuSetting:X,dpLayoutManager:l}}}),ce={ref:"footerMenu",class:"footer"},de={class:"layoutfooter"},ue={class:"menuContainer"};function fe(l,u,r,a,h,k){const t=j;return Q((s(),g("div",ce,[E("div",de,[E("div",ue,[b(t,{data:l.menuSetting,layoutManager:l.dpLayoutManager},null,8,["data","layoutManager"])])])],512)),[[ne,l.isVisible]])}const Ce=U(ie,[["render",fe],["__scopeId","data-v-5c23d621"],["__file","BottomMenuWidget.vue"]]);export{Ce as default};
