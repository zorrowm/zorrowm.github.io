import{v as g}from"./xframelib-exp-CMLeiWD4.js";import{d as c,q as F,Y as B,r as v,b as E,e as b,l as n,a7 as y,ac as d}from"./@vue-exp-Bws36Ke9.js";import{_ as x}from"./index-BQ7ovaqR.js";import"./axios-exp-C7rfqWEd.js";import"./vendor-DJm_4oaR.js";import"./lottie-web-exp-CIY4INm7.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";import"./quasar-exp-BsaNoQ7w.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./vue-router-exp-CO9L2VdX.js";const u="3a491563ee764790a44c0e77d8b15a4e",C=c({__name:"BigFileDownload",setup(m,{expose:e}){e();const s=F({}),l=B(s),i=v(""),t=new g(u,"https://file.gis.digsur.com/api/Downloads/DownloadFile",10);t.on("downloadProgress",o=>{const a=document.getElementById("downloadProgress");a&&(a.value=o)}),t.on("saveProgress",o=>{const a=document.getElementById("saveProgress");a&&(a.value=o)}),t.on("success",()=>{const o=document.getElementById("downloadProgress");o&&(o.value=100)}),t.on("info",o=>{i.value=o}),t.on("error",o=>{});async function p(){const o=await t.getIFileMeta();if(o===null){const a=await t.queryDownloadFileMeta("https://file.gis.digsur.com/api/Downloads/GetDownloadFileInfo","",{key:u,name:"test.tif"});await t.init(a)}else await t.init(o);t.download()}function f(){t.pause()}function w(){t.restart()}function D(){t.delete()}const r={data:s,refData:l,stateInfo:i,keyID:u,bigfileDownload:t,testDownload:p,pauseDownload:f,restartDownload:w,deleteCache:D};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),k={class:"q-pa-md q-gutter-md"};function I(m,e,s,l,i,t){return E(),b("div",k,[e[0]||(e[0]=n("div",{class:"text-center text-bold"},"大文件分片下载",-1)),n("button",{onClick:l.testDownload},"开始分段下载"),n("span",null,y(l.stateInfo),1),e[1]||(e[1]=n("br",null,null,-1)),e[2]||(e[2]=n("input",{type:"range",id:"downloadProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),e[3]||(e[3]=d(" 下载进度 ")),e[4]||(e[4]=n("br",null,null,-1)),e[5]||(e[5]=n("input",{type:"range",id:"saveProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),e[6]||(e[6]=d(" 输出文件进度 ")),e[7]||(e[7]=n("br",null,null,-1)),n("button",{onClick:l.pauseDownload},"暂停"),n("button",{onClick:l.restartDownload},"重启"),n("button",{onClick:l.deleteCache},"清空缓存")])}const R=x(C,[["render",I],["__file","BigFileDownload.vue"]]);export{R as default};
