import{bk as xo,bl as Ao,bm as Eo,bn as ot,bo as ql,bp as _o,bq as Io,br as Lo,bs as Ho,bt as Fo,bu as Ro,bv as Mo,bw as No,bx as Po,by as Oo,bz as Bo,bA as Do,bB as jo,bC as Vo,bD as ml,bE as Wo,bF as zo,bG as Uo,bH as Go,bI as qo,bJ as Xo,bK as Ko,bL as Yo,bM as Zo,bN as Jo,bO as Qo,bP as en,bQ as tn,bR as ln,bS as on,bT as nn,bU as an,bV as rn,bW as sn,bX as cn,bY as fe,bZ as Xl,b_ as w,b$ as Kl,c0 as un,c1 as dn,c2 as fn,c3 as gl,c4 as mn,c5 as gn,c6 as vn,c7 as hn,c8 as pn,c9 as bn,ca as Ze,cb as yn,cc as kn,cd as $e,ce as ke,cf as wn,cg as Cn,ch as $n,ci as Tn,cj as Sn,ck as xn,cl as An}from"./vendor-CSzZZ-de.js";import{d as j,p as A,i as u,q as ee,r as R,w as I,o as G,u as he,x as Ie,F as Le,y as ne,c as J,z as En,A as ue,B as de,s as ve,T as _n,h as Yl,C as In}from"./@vue-exp-CzdoyapG.js";import{M as Ln,r as Hn,s as Fn,a as Rn}from"./markdown-it-exp-FPpfilTW.js";const r="md-editor",D="https://unpkg.com",Mn=`${D}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,vl={main:`${D}/prettier@3.3.3/standalone.js`,markdown:`${D}/prettier@3.3.3/plugins/markdown.js`},Nn={css:`${D}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${D}/cropperjs@1.6.2/dist/cropper.min.js`},Pn=`${D}/screenfull@5.2.0/dist/screenfull.js`,On=`${D}/mermaid@11.3.0/dist/mermaid.min.js`,Bn={js:`${D}/katex@0.16.11/dist/katex.min.js`,css:`${D}/katex@0.16.11/dist/katex.min.css`},nt={a11y:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${D}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${D}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},Zl=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Jl=["markdownTotal","=","scrollSwitch"],hl={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},X={editorExtensions:{highlight:{js:Mn,css:nt},prettier:{standaloneJs:vl.main,parserMarkdownJs:vl.markdown},cropper:{...Nn},screenfull:{js:Pn},mermaid:{js:On},katex:{...Bn}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,l)=>l,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},He=170,te=({instance:e,ctx:l,props:t={}},n="default")=>{const o=e?.$slots[n]||l?.slots[n];return(o?o(e):"")||t[n]},Dn={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"},disabled:{type:Boolean,default:void 0}},we=j({name:`${r}-dropdown`,props:Dn,setup(e,l){const t=`${r}-dropdown-hidden`,n=ee({overlayClass:[t],overlayStyle:{},triggerHover:!1,overlayHover:!1}),o=R(),i=R(),a=()=>{var c,s;if(e.disabled)return!1;n.triggerHover=!0;const g=o.value,v=i.value;if(!g||!v)return;const y=g.getBoundingClientRect(),k=g.offsetTop,p=g.offsetLeft,b=y.height,h=y.width,C=g.getRootNode(),T=((c=C.querySelector(e.relative))==null?void 0:c.scrollLeft)||0,S=((s=C.querySelector(e.relative))==null?void 0:s.clientWidth)||0;let x=p-v.offsetWidth/2+h/2-T;x+v.offsetWidth>T+S&&(x=T+S-v.offsetWidth),x<0&&(x=0),n.overlayStyle={...n.overlayStyle,top:k+b+"px",left:x+"px"},e.onChange(!0)},m=()=>{if(e.disabled)return!1;n.overlayHover=!0};I(()=>e.visible,c=>{c?n.overlayClass=n.overlayClass.filter(s=>s!==t):n.overlayClass.push(t)});let f=-1;const d=c=>{o.value===c.target?n.triggerHover=!1:n.overlayHover=!1,clearTimeout(f),f=window.setTimeout(()=>{!n.overlayHover&&!n.triggerHover&&e.onChange(!1)},10)};return G(()=>{o.value.addEventListener("mouseenter",a),o.value.addEventListener("mouseleave",d),i.value.addEventListener("mouseenter",m),i.value.addEventListener("mouseleave",d)}),he(()=>{o.value.removeEventListener("mouseenter",a),o.value.removeEventListener("mouseleave",d),i.value.removeEventListener("mouseenter",m),i.value.removeEventListener("mouseleave",d)}),()=>{const c=te({ctx:l}),s=te({props:e,ctx:l},"overlay"),g=Ie(c instanceof Array?c[0]:c,{ref:o,key:"cloned-dropdown-trigger"}),v=u("div",{class:[`${r}-dropdown`,n.overlayClass],style:n.overlayStyle,ref:i},[u("div",{class:`${r}-dropdown-overlay`},[s instanceof Array?s[0]:s])]);return[g,v]}}}),jn={title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},Pe=j({name:"DropdownToolbar",props:jn,emits:["onChange"],setup(e,l){const t=A("editorId");return()=>{const n=te({props:e,ctx:l},"trigger"),o=te({props:e,ctx:l},"overlay"),i=te({props:e,ctx:l});return u(we,{relative:`#${t}-toolbar-wrapper`,visible:e.visible,onChange:a=>{e.onChange instanceof Function?e.onChange(a):l.emit("onChange",a)},overlay:o},{default:()=>[u("div",{class:`${r}-toolbar-item`,title:e.title||""},[i||n])]})}}});Pe.install=e=>(e.component(Pe.name,Pe),e);var Vn=Object.defineProperty,Wn=(e,l,t)=>l in e?Vn(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,zn=(e,l,t)=>Wn(e,l+"",t);class Un{constructor(){zn(this,"pools",{})}remove(l,t,n){const i=this.pools[l]&&this.pools[l][t];i&&(this.pools[l][t]=i.filter(a=>a!==n))}clear(l){this.pools[l]={}}on(l,t){return this.pools[l]||(this.pools[l]={}),this.pools[l][t.name]||(this.pools[l][t.name]=[]),this.pools[l][t.name].push(t.callback),this.pools[l][t.name].includes(t.callback)}emit(l,t,...n){this.pools[l]||(this.pools[l]={});const i=this.pools[l][t];i&&i.forEach(a=>{try{a(...n)}catch{}})}}const $=new Un,Ge="onSave",rt="changeCatalogVisible",Ql="changeFullscreen",pl="pageFullscreenChanged",bl="fullscreenChanged",yl="previewChanged",kl="previewOnlyChanged",wl="htmlPreviewChanged",Cl="catalogVisibleChanged",Oe="buildFinished",pe="errorCatcher",P="replace",qe="uploadImage",at="openModals",eo="ctrlZ",to="ctrlShiftZ",Ee="catalogChanged",lo="pushCatalog",st="rerender",oo="eventListener",no="taskStateChanged",$l=(e,l)=>{const t=n=>{const o=e.parentElement||document.body,i=o.offsetWidth,a=o.offsetHeight,{clientWidth:m,clientHeight:f}=document.documentElement,d=n.offsetX,c=n.offsetY,s=v=>{let y=v.x+document.body.scrollLeft-document.body.clientLeft-d,k=v.y+document.body.scrollTop-document.body.clientTop-c;y=y<1?1:y<m-i-1?y:m-i-1,k=k<1?1:k<f-a-1?k:f-a-1,l?l(y,k):(o.style.left=`${y}px`,o.style.top=`${k}px`)};document.addEventListener("mousemove",s);const g=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",g)};document.addEventListener("mouseup",g)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}},se=(e,l,t="")=>{var n;const o=document.getElementById(l.id);if(o)t!==""&&(Reflect.get(window,t)?(n=l.onload)==null||n.call(o,new Event("load")):l.onload&&o.addEventListener("load",l.onload));else{const i={...l};i.onload=null;const a=qn(e,i);l.onload&&a.addEventListener("load",l.onload),document.head.appendChild(a)}},Gn=(e,l)=>{const t=document.getElementById(l.id);t?.remove(),se(e,l)},qn=(e,l)=>{const t=document.createElement(e);return Object.keys(l).forEach(n=>{l[n]!==void 0&&(t[n]=l[n])}),t},Tl=(()=>{const e=t=>{if(!t)return;const n=t.firstChild;let o=1,i=0,a=0,m=!1,f,d,c,s=1;const g=()=>{n.style.transform=`translate(${i}px, ${a}px) scale(${o})`};t.addEventListener("touchstart",v=>{v.touches.length===1?(m=!0,f=v.touches[0].clientX-i,d=v.touches[0].clientY-a):v.touches.length===2&&(c=Math.hypot(v.touches[0].clientX-v.touches[1].clientX,v.touches[0].clientY-v.touches[1].clientY),s=o)},{passive:!1}),t.addEventListener("touchmove",v=>{if(v.preventDefault(),m&&v.touches.length===1)i=v.touches[0].clientX-f,a=v.touches[0].clientY-d,g();else if(v.touches.length===2){const k=Math.hypot(v.touches[0].clientX-v.touches[1].clientX,v.touches[0].clientY-v.touches[1].clientY)/c,p=o;o=s*(1+(k-1));const b=(v.touches[0].clientX+v.touches[1].clientX)/2,h=(v.touches[0].clientY+v.touches[1].clientY)/2,C=n.getBoundingClientRect(),T=(b-C.left)/p,S=(h-C.top)/p;i-=T*(o-p),a-=S*(o-p),g()}},{passive:!1}),t.addEventListener("touchend",()=>{m=!1}),t.addEventListener("wheel",v=>{v.preventDefault();const y=.02,k=o;v.deltaY<0?o+=y:o=Math.max(.1,o-y);const p=n.getBoundingClientRect(),b=v.clientX-p.left,h=v.clientY-p.top;i-=b/k*(o-k),a-=h/k*(o-k),g()},{passive:!1}),t.addEventListener("mousedown",v=>{m=!0,f=v.clientX-i,d=v.clientY-a}),t.addEventListener("mousemove",v=>{m&&(i=v.clientX-f,a=v.clientY-d,g())}),t.addEventListener("mouseup",()=>{m=!1}),t.addEventListener("mouseleave",()=>{m=!1})};return t=>{t.forEach(n=>{e(n)})}})(),Xn=(e,l="image.png")=>{const t=e.split(","),n=t[0].match(/:(.*?);/);if(n){const o=n[1],i=atob(t[1]);let a=i.length;const m=new Uint8Array(a);for(;a--;)m[a]=i.charCodeAt(a);return new File([m],l,{type:o})}return null},Kn=(e,l)=>{if(!e)return e;const t=l.split(`
`),n=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{n.push("<span></span>")}),n.push("</span>"),`<span class="${r}-code-block">${e}</span>${n.join("")}`},Yn=(e,l)=>{if(!e||!l)return 0;const t=e?.getBoundingClientRect();if(l===document.documentElement)return t.top-l.clientTop;const n=l?.getBoundingClientRect();return t.top-n.top},Sl=(()=>{let e=0;return()=>++e})(),ce={hljs:`${r}-hljs`,hlcss:`${r}-hlCss`,prettier:`${r}-prettier`,prettierMD:`${r}-prettierMD`,cropperjs:`${r}-cropper`,croppercss:`${r}-cropperCss`,screenfull:`${r}-screenfull`,mermaidM:`${r}-mermaid-m`,mermaid:`${r}-mermaid`,katexjs:`${r}-katex`,katexcss:`${r}-katexCss`},Zn=(e,l)=>{const t=A("editorId"),{noImgZoomIn:n}=e,o=ql(()=>{const i=document.querySelectorAll(`#${t}-preview img:not(.not-zoom):not(.medium-zoom-image)`);i.length!==0&&Io(i,{background:"#00000073"})});G(()=>{!n&&e.setting.preview&&o()}),I([l,ue(e.setting,"preview")],()=>{!n&&e.setting.preview&&o()})},Jn=(e,l,t)=>{const n=A("editorId"),o=A("rootRef"),i=A("usedLanguageText"),a=()=>{o.value.querySelectorAll(`#${n} .${r}-preview .${r}-code`).forEach(d=>{let c=-1;const s=d.querySelector(`.${r}-copy-button`);s&&(s.onclick=g=>{g.preventDefault(),clearTimeout(c);const y=(d.querySelector("input:checked + pre code")||d.querySelector("pre code")).textContent,k=_o(e.formatCopiedText(y)),{text:p,successTips:b,failTips:h}=i.value.copyCode,C=k?b:h;s.dataset.isIcon?s.dataset.tips=C:s.innerHTML=C,c=window.setTimeout(()=>{s.dataset.isIcon?s.dataset.tips=p:s.innerHTML=p},1500)})})},m=()=>{de(a)},f=d=>{d&&de(a)};I([l,t],m),I(()=>e.setting.preview,f),I(()=>e.setting.htmlPreview,f),I(()=>i.value,a),G(a)},Qn=e=>{const l=A("highlight"),t=ve(X.editorExtensions.highlight.instance);return G(()=>{e.noHighlight||t.value||(se("link",{...l.value.css,rel:"stylesheet",id:ce.hlcss}),se("script",{...l.value.js,id:ce.hljs,onload(){t.value=window.hljs}},"hljs"))}),I(()=>l.value.css,()=>{e.noHighlight||X.editorExtensions.highlight.instance||Gn("link",{...l.value.css,rel:"stylesheet",id:ce.hlcss})}),t},Be=new xo({max:1e3,ttl:6e5}),ea=e=>{const l=A("theme"),t=A("rootRef"),{editorExtensions:n,editorExtensionsAttrs:o,mermaidConfig:i}=X,a=ve(n.mermaid.instance),m=ve(-1),f=()=>{const c=a.value;!e.noMermaid&&c&&(c.initialize(i({startOnLoad:!1,theme:l.value==="dark"?"dark":"default"})),m.value=m.value+1)};return I(()=>l.value,()=>{Be.clear(),f()}),G(()=>{var c,s;if(e.noMermaid||a.value)return;const g=n.mermaid.js;/\.mjs/.test(g)?(se("link",{...(c=o.mermaid)==null?void 0:c.js,rel:"modulepreload",href:g,id:ce.mermaidM}),import(g).then(v=>{a.value=v.default,f()})):se("script",{...(s=o.mermaid)==null?void 0:s.js,src:g,id:ce.mermaid,onload(){a.value=window.mermaid,f()}},"mermaid")}),{mermaidRef:a,reRenderRef:m,replaceMermaid:async()=>{if(!e.noMermaid&&a.value){const c=t.value.querySelectorAll(`div.${r}-mermaid`),s=document.createElement("div"),g=document.body.offsetWidth>1366?document.body.offsetWidth:1366,v=document.body.offsetHeight>768?document.body.offsetHeight:768;s.style.width=g+"px",s.style.height=v+"px",s.style.position="fixed",s.style.zIndex="-10000",s.style.top="-10000";let y=c.length;y>0&&document.body.appendChild(s),await Promise.allSettled(Array.from(c).map(k=>(async b=>{var h;let C=Be.get(b.innerText);if(!C){const T=ot();let S={svg:""};try{S=await a.value.render(T,b.innerText,s),C=await e.sanitizeMermaid(S.svg);const x=document.createElement("p");x.className=`${r}-mermaid`,x.setAttribute("data-processed",""),x.innerHTML=C,(h=x.children[0])==null||h.removeAttribute("height"),Be.set(b.innerText,x.innerHTML),b.dataset.line!==void 0&&(x.dataset.line=b.dataset.line),b.replaceWith(x)}catch{}--y===0&&s.remove()}})(k)))}}}},ta=e=>{const l=ve(X.editorExtensions.katex.instance);return G(()=>{if(e.noKatex||l.value)return;const{editorExtensions:t}=X;se("script",{src:t.katex.js,id:ce.katexjs,onload(){l.value=window.katex}},"katex"),se("link",{rel:"stylesheet",href:t.katex.css,id:ce.katexcss})}),l},la=(e,l)=>{const t=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(n,o,i,a,m)=>{const f=n[o],d=f.content.trim();if(f.info==="mermaid"){let c;n[o].map&&n[o].level===0&&(c=n[o].map[0],n[o].attrSet("data-line",String(c)));const s=Be.get(d);return s?`<p class="${r}-mermaid" ${c!==void 0?"data-line="+c:""} data-processed>${s}</p>`:`<div class="${r}-mermaid" ${c!==void 0?"data-line="+c:""} data-mermaid-theme=${l.themeRef.value}>${d}</div>`}return t(n,o,i,a,m)}},ze=(e,l)=>{const t=e.attrs?e.attrs.slice():[];return l.forEach(n=>{const o=e.attrIndex(n[0]);o<0?t.push(n):(t[o]=t[o].slice(),t[o][1]+=` ${n[1]}`)}),t},oa=(e,l)=>{const t=[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}];let n,o,i;for(const a of t)if(e.src.startsWith(a.open,e.pos)){const m=e.pos+a.open.length;for(n=m;(n=e.src.indexOf(a.close,n))!==-1;){for(i=n-1;e.src[i]==="\\";)i-=1;if((n-i)%2===1)break;n+=a.close.length}if(n===-1)return l||(e.pending+=a.open),e.pos=m,!0;if(n-m===0)return l||(e.pending+=a.open+a.close),e.pos=m+a.close.length,!0;if(!l){const f=e.src.slice(m,n);o=e.push("math_inline","math",0),o.markup=a.open,o.content=f}return e.pos=n+a.close.length,!0}return!1},na=(e,l,t,n)=>{const o=[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}];let i,a,m,f,d=!1,c=e.bMarks[l]+e.tShift[l],s=e.eMarks[l];for(const g of o)if(e.src.slice(c,c+g.open.length)===g.open&&e.src.slice(s-g.close.length,s)===g.close){if(c+=g.open.length,i=e.src.slice(c,s),n)return!0;for(i.trim().slice(-g.close.length)===g.close&&(i=i.trim().slice(0,-g.close.length),d=!0),m=l;!d&&(m++,!(m>=t||(c=e.bMarks[m]+e.tShift[m],s=e.eMarks[m],c<s&&e.tShift[m]<e.blkIndent)));)e.src.slice(c,s).trim().slice(-g.close.length)===g.close&&(f=e.src.slice(0,s).lastIndexOf(g.close),a=e.src.slice(c,f),d=!0);e.line=m+1;const v=e.push("math_block","math",0);return v.block=!0,v.content=(i&&i.trim()?i+`
`:"")+e.getLines(l+1,m,e.tShift[l],!0)+(a&&a.trim()?a:""),v.map=[l,e.line],v.markup=g.open,!0}return!1},aa=(e,{katexRef:l})=>{const t=(o,i,a,m,f)=>{const d=o[i],c={attrs:ze(d,[["class",`${r}-katex-inline`]])};if(l.value){const s=l.value.renderToString(d.content,X.katexConfig({throwOnError:!1}));return`<span ${f.renderAttrs(c)} data-processed>${s}</span>`}else return`<span ${f.renderAttrs(c)}>${d.content}</span>`},n=(o,i,a,m,f)=>{const d=o[i],c={attrs:ze(d,[["class",`${r}-katex-block`]])};if(l.value){const s=l.value.renderToString(d.content,X.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${f.renderAttrs(c)} data-processed>${s}</p>`}else return`<p ${f.renderAttrs(c)}>${d.content}</p>`};e.inline.ruler.before("escape","math_inline",oa),e.block.ruler.after("blockquote","math_block",na,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=t,e.renderer.rules.math_block=n},ia=(e,l)=>{l=l||{};const t=3,n=l.marker||"!",o=n.charCodeAt(0),i=n.length;let a="",m="";const f=(c,s,g,v,y)=>{const k=c[s];return k.type==="admonition_open"?c[s].attrPush(["class",`${r}-admonition ${r}-admonition-${k.info}`]):k.type==="admonition_title_open"&&c[s].attrPush(["class",`${r}-admonition-title`]),y.renderToken(c,s,g)},d=c=>{const s=c.trim().split(" ",2);m="",a=s[0],s.length>1&&(m=c.substring(a.length+2))};e.block.ruler.before("code","admonition",(c,s,g,v)=>{let y,k,p,b=!1,h=c.bMarks[s]+c.tShift[s],C=c.eMarks[s];if(o!==c.src.charCodeAt(h))return!1;for(y=h+1;y<=C&&n[(y-h)%i]===c.src[y];y++);const T=Math.floor((y-h)/i);if(T!==t)return!1;y-=(y-h)%i;const S=c.src.slice(h,y),x=c.src.slice(y,C);if(d(x),v)return!0;for(k=s;k++,!(k>=g||(h=c.bMarks[k]+c.tShift[k],C=c.eMarks[k],h<C&&c.sCount[k]<c.blkIndent));)if(o===c.src.charCodeAt(h)&&!(c.sCount[k]-c.blkIndent>=4)){for(y=h+1;y<=C&&n[(y-h)%i]===c.src[y];y++);if(!(Math.floor((y-h)/i)<T)&&(y-=(y-h)%i,y=c.skipSpaces(y),!(y<C))){b=!0;break}}const M=c.parentType,L=c.lineMax;return c.parentType="root",c.lineMax=k,p=c.push("admonition_open","div",1),p.markup=S,p.block=!0,p.info=a,p.map=[s,k],m&&(p=c.push("admonition_title_open","p",1),p.markup=S+" "+a,p.map=[s,k],p=c.push("inline","",0),p.content=m,p.map=[s,c.line-1],p.children=[],p=c.push("admonition_title_close","p",-1),p.markup=S+" "+a),c.md.block.tokenize(c,s+1,k),p=c.push("admonition_close","div",-1),p.markup=c.src.slice(h,y),p.block=!0,c.parentType=M,c.lineMax=L,c.line=k+(b?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=f,e.renderer.rules.admonition_title_open=f,e.renderer.rules.admonition_title_close=f,e.renderer.rules.admonition_close=f},ra=(e,l)=>{e.renderer.rules.heading_open=(t,n)=>{var o;const i=t[n],a=((o=t[n+1].children)==null?void 0:o.reduce((f,d)=>f+(["text","code_inline","math_inline"].includes(d.type)&&d.content||""),""))||"",m=i.markup.length;return l.headsRef.value.push({text:a,level:m}),i.map&&i.level===0&&i.attrSet("id",l.mdHeadingId(a,m,l.headsRef.value.length)),e.renderer.renderToken(t,n,l)},e.renderer.rules.heading_close=(t,n,o,i,a)=>a.renderToken(t,n,o)},sa={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${r}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${r}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`},ca=(e,l)=>typeof l[e]=="string"?l[e]:sa[e],ua=ca,da=(e,l)=>{const t=e.renderer.rules.fence,n=e.utils.unescapeAll,o=/\[(\w*)(?::([\w ]*))?\]/,i=/::(open|close)/,a=s=>s.info?n(s.info).trim():"",m=s=>{const g=a(s),[v=null,y=""]=(o.exec(g)||[]).slice(1);return[v,y]},f=s=>{const g=a(s);return g?g.split(/(\s+)/g)[0]:""},d=s=>{const g=s.info.match(i)||[],v=g[1]==="open"||g[1]!=="close"&&l.codeFoldable&&s.content.trim().split(`
`).length<l.autoFoldThreshold,y=g[1]||l.codeFoldable?"details":"div",k=g[1]||l.codeFoldable?"summary":"div";return{open:v,tagContainer:y,tagHeader:k}},c=(s,g,v,y,k)=>{var p;if(s[g].hidden)return"";const b=(p=l.usedLanguageTextRef.value)==null?void 0:p.copyCode.text,h=l.customIconRef.value.copy||b,C=!!l.customIconRef.value.copy,T=`<span class="${r}-collapse-tips">${ua("collapse-tips",l.customIconRef.value)}</span>`,[S]=m(s[g]);if(S===null){const{open:z,tagContainer:K,tagHeader:ie}=d(s[g]),oe=[["class",`${r}-code`]];z&&oe.push(["open",""]);const Q={attrs:ze(s[g],oe)};s[g].info=s[g].info.replace(i,"");const W=t(s,g,v,y,k);return`
        <${K} ${k.renderAttrs(Q)}>
          <${ie} class="${r}-code-head">
            <div class="${r}-code-flag"><span></span><span></span><span></span></div>
            <div class="${r}-code-action">
              <span class="${r}-code-lang">${s[g].info.trim()}</span>
              <span class="${r}-copy-button" data-tips="${b}"${C?" data-is-icon=true":""}>${h}</span>
              ${K==="details"?T:""}
            </div>
          </${ie}>
          ${W}
        </${K}>
      `}let x,M,L,E,H="",N="",O="";const{open:B,tagContainer:q,tagHeader:U}=d(s[g]),le=[["class",`${r}-code`]];B&&le.push(["open",""]);const ae={attrs:ze(s[g],le)};for(let z=g;z<s.length&&(x=s[z],[M,L]=m(x),M===S);z++){x.info=x.info.replace(o,"").replace(i,""),x.hidden=!0;const K=`${r}-codetab-${l.editorId}-${g}-${z-g}`;E=z-g>0?"":"checked",H+=`
        <li>
          <input
            type="radio"
            id="label-${r}-codetab-label-1-${l.editorId}-${g}-${z-g}"
            name="${r}-codetab-label-${l.editorId}-${g}"
            class="${K}"
            ${E}
          >
          <label
            for="label-${r}-codetab-label-1-${l.editorId}-${g}-${z-g}"
            onclick="this.getRootNode().querySelectorAll('.${K}').forEach(e => e.click())"
          >
            ${L||f(x)}
          </label>
        </li>`,N+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${r}-codetab-pre-${l.editorId}-${g}"
            class="${K}"
            ${E}
            role="presentation">
          ${t(s,z,v,y,k)}
        </div>`,O+=`
        <input
          type="radio"
          name="${r}-codetab-lang-${l.editorId}-${g}"
          class="${K}"
          ${E}
          role="presentation">
        <span class=${r}-code-lang role="note">${f(x)}</span>`}return`
      <${q} ${k.renderAttrs(ae)}>
        <${U} class="${r}-code-head">
          <div class="${r}-code-flag">
            <ul class="${r}-codetab-label" role="tablist">${H}</ul>
          </div>
          <div class="${r}-code-action">
            <span class="${r}-codetab-lang">${O}</span>
            <span class="${r}-copy-button" data-tips="${b}"${C?" data-is-icon=true":""}>${h}</span>
            ${q==="details"?T:""}
          </div>
        </${U}>
        ${N}
      </${q}>
    `};e.renderer.rules.fence=c,e.renderer.rules.code_block=c},xl=(e,l,t)=>{const n=e.attrIndex(l),o=[l,t];n<0?e.attrPush(o):(e.attrs=e.attrs||[],e.attrs[n]=o)},fa=e=>e.type==="inline",ma=e=>e.type==="paragraph_open",ga=e=>e.type==="list_item_open",va=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,ha=(e,l)=>fa(e[l])&&ma(e[l-1])&&ga(e[l-2])&&va(e[l]),pa=(e,l)=>{const t=e[l].level-1;for(let n=l-1;n>=0;n--)if(e[n].level===t)return n;return-1},ba=e=>{const l=new e("html_inline","",0);return l.content="<label>",l},ya=e=>{const l=new e("html_inline","",0);return l.content="</label>",l},ka=(e,l,t)=>{const n=new t("html_inline","",0);return n.content='<label class="task-list-item-label" for="'+l+'">'+e+"</label>",n.attrs=[{for:l}],n},wa=(e,l,t)=>{const n=new l("html_inline","",0),o=t.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?n.content='<input class="task-list-item-checkbox"'+o+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(n.content='<input class="task-list-item-checkbox" checked=""'+o+'type="checkbox">'),n},Ca=(e,l,t)=>{if(e.children=e.children||[],e.children.unshift(wa(e,l,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),t.label)if(t.labelAfter){e.children.pop();const n="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(ka(e.content,n,l))}else e.children.unshift(ba(l)),e.children.push(ya(l))},$a=(e,l={})=>{e.core.ruler.after("inline","github-task-lists",t=>{const n=t.tokens;for(let o=2;o<n.length;o++)ha(n,o)&&(Ca(n[o],t.Token,l),xl(n[o-2],"class","task-list-item"+(l.enabled?" enabled":" ")),xl(n[pa(n,o-2)],"class","contains-task-list"))})},Ta=e=>{e.core.ruler.push("init-line-number",l=>(l.tokens.forEach(t=>{t.map&&(t.attrs||(t.attrs=[]),t.attrs.push(["data-line",t.map[0].toString()]))}),!0))},Sa=(e,l)=>{const{editorConfig:t,markdownItConfig:n,markdownItPlugins:o}=X,i=A("editorId"),a=A("language"),m=A("usedLanguageText"),f=A("showCodeRowNumber"),d=A("theme"),c=A("customIcon"),s=A("rootRef"),g=R([]),v=Qn(e),y=ta(e),{reRenderRef:k,replaceMermaid:p}=ea(e),b=Ln({html:!0,breaks:!0,linkify:!0});n(b,{editorId:i});const h=[{type:"image",plugin:Hn,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:ia,options:{}},{type:"taskList",plugin:$a,options:{}},{type:"heading",plugin:ra,options:{mdHeadingId:e.mdHeadingId,headsRef:g}},{type:"code",plugin:da,options:{editorId:i,usedLanguageTextRef:m,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:c}},{type:"sub",plugin:Fn,options:{}},{type:"sup",plugin:Rn,options:{}}];e.noKatex||h.push({type:"katex",plugin:aa,options:{katexRef:y}}),e.noMermaid||h.push({type:"mermaid",plugin:la,options:{themeRef:d}}),o(h,{editorId:i}).forEach(H=>{b.use(H.plugin,H.options)});const C=b.options.highlight;b.set({highlight:(H,N,O)=>{if(C){const U=C(H,N,O);if(U)return U}let B;!e.noHighlight&&v.value?v.value.getLanguage(N)?B=v.value.highlight(H,{language:N,ignoreIllegals:!0}).value:B=v.value.highlightAuto(H).value:B=b.utils.escapeHtml(H);const q=f?Kn(B.replace(/^\n+|\n+$/g,""),H.replace(/^\n+|\n+$/g,"")):`<span class="${r}-code-block">${B.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${N}" language=${N}>${q}</code></pre>`}}),Ta(b);const T=R(`_article-key_${ot()}`),S=R(e.sanitize(b.render(e.modelValue))),x=()=>{$.emit(i,Oe,S.value),e.onHtmlChanged(S.value),e.onGetCatalog(g.value),$.emit(i,Ee,g.value),de(()=>{p().then(()=>{Tl(s.value.querySelectorAll(`#${i} .${r}-mermaid`))})})},M=()=>{g.value=[],S.value=e.sanitize(b.render(e.modelValue)),x()},L=J(()=>(e.noKatex||y.value)&&(e.noHighlight||v.value));let E=-1;return I([ue(e,"modelValue"),L,k,a],()=>{E=window.setTimeout(()=>{M()},l?0:t.renderDelay)}),I(()=>e.setting.preview,()=>{e.setting.preview&&de(()=>{p().then(()=>{Tl(s.value.querySelectorAll(`#${i} .${r}-mermaid`))}),$.emit(i,Ee,g.value)})}),G(x),G(()=>{$.on(i,{name:lo,callback(){$.emit(i,Ee,g.value)}}),$.on(i,{name:st,callback:()=>{T.value=`_article-key_${ot()}`,M()}})}),he(()=>{clearTimeout(E)}),{html:S,key:T}},Al={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},xa=(e,l)=>{const t=A("editorId"),n=A("rootRef");let o=()=>{};const i=()=>{if(!n.value)return!1;const a=n.value.querySelectorAll(".task-list-item.enabled"),m=f=>{var d;f.preventDefault();const c=f.target.checked?"unChecked":"checked",s=(d=f.target.parentElement)==null?void 0:d.dataset.line;if(!s)return;const g=Number(s),v=e.modelValue.split(`
`),y=v[Number(g)].replace(Al[c].regexp,Al[c].value);e.previewOnly?(v[Number(g)]=y,e.onChange(v.join(`
`))):$.emit(t,no,g+1,y)};a.forEach(f=>{f.addEventListener("click",m)}),o=()=>{a.forEach(f=>{f.removeEventListener("click",m)})}};he(()=>{o()}),I([l],()=>{o(),de(i)},{immediate:!0})},ao={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number}},Aa={...ao,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e}},io=j({name:"ContentPreview",props:ao,setup(e){const l=A("editorId"),t=A("previewTheme"),n=A("showCodeRowNumber"),{html:o,key:i}=Sa(e,e.previewOnly);return Jn(e,o,i),Zn(e,o),xa(e,o),()=>u(Le,null,[e.setting.preview&&u("div",{id:`${l}-preview-wrapper`,class:`${r}-preview-wrapper`,key:"content-preview-wrapper"},[u("div",{key:i.value,id:`${l}-preview`,class:[`${r}-preview`,`${t?.value}-theme`,n&&`${r}-scrn`],innerHTML:o.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&u("div",{id:`${l}-html-wrapper`,class:`${r}-preview-wrapper`,key:"html-preview-wrapper"},[u("div",{class:`${r}-html`},[o.value])])])}}),Ea=(e,l,t)=>{const{editorId:n}=t,o=ee({buildFinished:!1,html:""});I(()=>e.modelValue,()=>{o.buildFinished=!1}),G(()=>{$.on(n,{name:Oe,callback(i){o.buildFinished=!0,o.html=i}}),$.on(n,{name:Ge,callback(){const i=new Promise(a=>{if(o.buildFinished)a(o.html);else{const m=f=>{a(f),$.remove(n,Oe,m)};$.on(n,{name:Oe,callback:m})}});e.onSave?e.onSave(e.modelValue,i):l.emit("onSave",e.modelValue,i)}})})},ro=(e,l)=>{const t=X.editorExtensions.highlight,n=X.editorExtensionsAttrs.highlight,o=Ma(e);ne("editorId",o),ne("rootRef",l),ne("theme",J(()=>e.theme)),ne("language",J(()=>e.language)),ne("highlight",J(()=>{const{js:a}=t,m={...nt,...t.css},{js:f,css:d={}}=n||{},c=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,s=m[e.codeTheme]?m[e.codeTheme][c]:nt.atom[c],g=m[e.codeTheme]&&d[e.codeTheme]?d[e.codeTheme][c]:d.atom?d.atom[c]:{};return{js:{src:a,...f},css:{href:s,...g}}})),ne("showCodeRowNumber",e.showCodeRowNumber);const i=J(()=>{const a={...hl,...X.editorConfig.languageUserDefined};return Ao(Eo(hl["en-US"]),a[e.language]||{})});return ne("usedLanguageText",i),ne("previewTheme",J(()=>e.previewTheme)),ne("customIcon",J(()=>e.customIcon)),{editorId:o}},_a=(e,l)=>(ne("tabWidth",e.tabWidth),ne("disabled",J(()=>e.disabled)),ro(e,l)),Ia=e=>{const{noPrettier:l,noUploadImg:t}=e,{editorExtensions:n,editorExtensionsAttrs:o}=X,i=l||n.prettier.prettierInstance,a=l||n.prettier.parserMarkdownInstance,m=t||n.cropper.instance;G(()=>{if(!m){const{js:f={},css:d={}}=o.cropper||{};se("link",{...d,rel:"stylesheet",href:n.cropper.css,id:ce.croppercss}),se("script",{...f,src:n.cropper.js,id:ce.cropperjs})}if(!i){const{standaloneJs:f={}}=o.prettier||{};se("script",{...f,src:n.prettier.standaloneJs,id:ce.prettier})}if(!a){const{parserMarkdownJs:f={}}=o.prettier||{};se("script",{...f,src:n.prettier.parserMarkdownJs,id:ce.prettierMD})}})},La=(e,l,t)=>{const{editorId:n}=t;G(()=>{$.on(n,{name:pe,callback:o=>{e.onError instanceof Function?e.onError(o):l.emit("onError",o)}})})},Ha=(e,l,t)=>{const{editorId:n}=t,o=ee({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),i=ee({...o}),a=(d,c)=>{const s=c===void 0?!o[d]:c;switch(d){case"preview":{o.htmlPreview=!1,o.previewOnly=!1;break}case"htmlPreview":{o.preview=!1,o.previewOnly=!1;break}case"previewOnly":{s?!o.preview&&!o.htmlPreview&&(o.preview=!0):(i.preview||(o.preview=!1),i.htmlPreview||(o.htmlPreview=!1));break}}i[d]=s,o[d]=s};let m="";const f=()=>{o.pageFullscreen||o.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=m};return I(()=>[o.pageFullscreen,o.fullscreen],f),G(()=>{$.on(n,{name:qe,callback(d,c){const s=g=>{$.emit(n,P,"image",{desc:"",urls:g}),c?.()};e.onUploadImg?e.onUploadImg(d,s):l.emit("onUploadImg",d,s)}}),m=document.body.style.overflow,f()}),[o,a]},Fa=(e,l)=>{const{editorId:t}=l,n=R(!1);return G(()=>{$.on(t,{name:rt,callback:o=>{o===void 0?n.value=!n.value:n.value=o}})}),n},Ra=(e,l,t)=>{const{editorId:n,catalogVisible:o,setting:i,updateSetting:a,codeRef:m}=t;I(()=>i.pageFullscreen,d=>{$.emit(n,pl,d)}),I(()=>i.fullscreen,d=>{$.emit(n,bl,d)}),I(()=>i.preview,d=>{$.emit(n,yl,d)}),I(()=>i.previewOnly,d=>{$.emit(n,kl,d)}),I(()=>i.htmlPreview,d=>{$.emit(n,wl,d)}),I(o,d=>{$.emit(n,Cl,d)});const f={on(d,c){switch(d){case"pageFullscreen":{$.on(n,{name:pl,callback(s){c(s)}});break}case"fullscreen":{$.on(n,{name:bl,callback(s){c(s)}});break}case"preview":{$.on(n,{name:yl,callback(s){c(s)}});break}case"previewOnly":{$.on(n,{name:kl,callback(s){c(s)}});break}case"htmlPreview":{$.on(n,{name:wl,callback(s){c(s)}});break}case"catalog":{$.on(n,{name:Cl,callback(s){c(s)}});break}}},togglePageFullscreen(d){a("pageFullscreen",d)},toggleFullscreen(d){$.emit(n,Ql,d)},togglePreview(d){a("preview",d)},togglePreviewOnly(d){a("previewOnly",d)},toggleHtmlPreview(d){a("htmlPreview",d)},toggleCatalog(d){$.emit(n,rt,d)},triggerSave(){$.emit(n,Ge)},insert(d){$.emit(n,P,"universal",{generate:d})},focus(d){var c;(c=m.value)==null||c.focus(d)},rerender(){$.emit(n,st)},getSelectedText(){var d;return(d=m.value)==null?void 0:d.getSelectedText()},resetHistory(){var d;(d=m.value)==null||d.resetHistory()},domEventHandlers(d){$.emit(n,oo,d)},execCommand(d){$.emit(n,P,d)},getEditorView(){var d;return(d=m.value)==null?void 0:d.getEditorView()}};l.expose(f)},Ma=e=>{const l=En();return e.id||e.editorId||`${r}-${l}`},Na=e=>e,so={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:Na},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30}},Pa={...so,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:Zl},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:Jl},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e}},co=["onHtmlChanged","onGetCatalog","onChange","update:modelValue"],Oa=[...co,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],Ba=(e,l,t)=>{const{editorId:n}=t,o={rerender(){$.emit(n,st)}};l.expose(o)},De=j({name:"MdPreview",props:so,emits:co,setup(e,l){const{noKatex:t,noMermaid:n,noHighlight:o}=e,i=R(),{editorId:a}=ro(e,i);return Ba(e,l,{editorId:a}),he(()=>{$.clear(a)}),()=>u("div",{id:a,class:[r,e.class,e.theme==="dark"&&`${r}-dark`,`${r}-previewOnly`],style:e.style,ref:i},[u(io,{modelValue:e.modelValue,onChange:m=>{e.onChange&&e.onChange(m),l.emit("onChange",m),l.emit("update:modelValue",m)},onHtmlChanged:m=>{e.onHtmlChanged?e.onHtmlChanged(m):l.emit("onHtmlChanged",m)},onGetCatalog:m=>{e.onGetCatalog?e.onGetCatalog(m):l.emit("onGetCatalog",m)},mdHeadingId:e.mdHeadingId,noMermaid:n,sanitize:e.sanitize,noKatex:t,formatCopiedText:e.formatCopiedText,noHighlight:o,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null)])}});De.install=e=>(e.component(De.name,De),e);const Da=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[u("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),u("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),ja={bold:Lo,underline:Ho,italic:Fo,"strike-through":Ro,title:Mo,sub:No,sup:Po,quote:Oo,"unordered-list":Bo,"ordered-list":Do,task:jo,"code-row":Vo,code:ml,link:Wo,image:zo,table:Uo,revoke:Go,next:qo,save:Xo,prettier:ml,minimize:Ko,maximize:Yo,"fullscreen-exit":Zo,fullscreen:Jo,"preview-only":Qo,preview:en,"preview-html":tn,catalog:ln,github:Da,mermaid:on,formula:nn,close:an,delete:rn,upload:sn},Va=j({name:`${r}-icon-set`,props:{name:{type:String,default:""}},setup(e){return()=>Yl(ja[e.name],{class:`${r}-icon`})}}),F=j({name:`${r}-icon`,props:{name:{type:String,default:""}},setup(e){const l=A("customIcon");return()=>{const t=l.value[e.name];return typeof t=="object"?typeof t.component=="object"?Yl(t.component,t.props):u("span",{innerHTML:t.component},null):u(Va,{name:e.name},null)}}}),Wa={title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},Te=j({name:"MdModal",props:Wa,emits:["onClose"],setup(e,l){const t=A("theme"),n=A("rootRef"),o=R(e.visible),i=R([`${r}-modal`]),a=R(),m=R(),f=R(),d=ve();let c=()=>{};const s=ee({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),g=J(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});I(()=>e.isFullscreen,k=>{k?c():de(()=>{c=$l(m.value,(p,b)=>{s.initPos.left=p+"px",s.initPos.top=b+"px"})})}),I(()=>e.visible,k=>{k?(s.maskStyle.zIndex=X.editorConfig.zIndex+Sl(),s.modalStyle.zIndex=X.editorConfig.zIndex+Sl(),i.value.push("zoom-in"),o.value=k,de(()=>{const p=a.value.offsetWidth/2,b=a.value.offsetHeight/2,h=document.documentElement.clientWidth/2,C=document.documentElement.clientHeight/2;s.initPos.left=h-p+"px",s.initPos.top=C-b+"px",e.isFullscreen||(c=$l(m.value,(T,S)=>{s.initPos.left=T+"px",s.initPos.top=S+"px"}))}),setTimeout(()=>{i.value=i.value.filter(p=>p!=="zoom-in")},140)):(i.value.push("zoom-out"),c(),setTimeout(()=>{i.value=i.value.filter(p=>p!=="zoom-out"),o.value=k},130))});const v=J(()=>({display:o.value?"block":"none"})),y=J(()=>typeof e.style=="string"?[e.style,v.value].join("; "):e.style instanceof Object?{...v.value,...e.style}:v.value);return G(()=>{var k;const p=(k=n.value)==null?void 0:k.getRootNode();f.value=p instanceof Document?document.body:p}),()=>{const k=te({ctx:l}),p=te({props:e,ctx:l},"title");return f.value?u(_n,{to:f.value},{default:()=>[u("div",{ref:d,class:`${r}-modal-container`,"data-theme":t.value},[u("div",{class:e.class,style:y.value},[e.showMask&&u("div",{class:`${r}-modal-mask`,style:s.maskStyle,onClick:()=>{e.onClose?e.onClose():l.emit("onClose")}},null),u("div",{class:i.value,style:{...s.modalStyle,...s.initPos,...g.value},ref:a},[u("div",{class:`${r}-modal-header`,ref:m},[p||""]),u("div",{class:`${r}-modal-body`},[k]),u("div",{class:`${r}-modal-func`},[e.showAdjust&&u("div",{class:`${r}-modal-adjust`,onClick:b=>{b.stopPropagation(),e.isFullscreen?s.initPos=s.historyPos:(s.historyPos=s.initPos,s.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[u(F,{name:e.isFullscreen?"minimize":"maximize"},null)]),u("div",{class:`${r}-modal-close`,onClick:b=>{b.stopPropagation(),e.onClose?e.onClose():l.emit("onClose")}},[u(F,{name:"close"},null)])])])])])]}):""}}});Te.install=e=>(e.component(Te.name,Te),e);const za=`.${r}-preview > [data-line]`,Ce=(e,l)=>+getComputedStyle(e).getPropertyValue(l).replace("px",""),Ua=(e,l)=>{const t=ql(()=>{e.removeEventListener("scroll",n),e.addEventListener("scroll",n),l.removeEventListener("scroll",n),l.addEventListener("scroll",n)},50),n=o=>{const i=e.clientHeight,a=l.clientHeight,m=e.scrollHeight,f=l.scrollHeight,d=(m-i)/(f-a);o.target===e?(l.removeEventListener("scroll",n),l.scrollTo({top:e.scrollTop/d}),t()):(e.removeEventListener("scroll",n),e.scrollTo({top:l.scrollTop*d}),t())};return[()=>{t().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",n),l.removeEventListener("scroll",n)}]},Ga=(e,l,t)=>{const{view:n}=t,o=cn(),i=b=>n.lineBlockAt(n.state.doc.line(b+1).from).top,a=b=>n.lineBlockAt(n.state.doc.line(b+1).from).bottom;let m=[],f=[],d=[];const c=()=>{m=[],f=Array.from(l.querySelectorAll(za)),d=f.map(S=>Number(S.dataset.line));const b=[...d],{lines:h}=n.state.doc;let C=b.shift()||0,T=b.shift()||h;for(let S=0;S<h;S++)S===T&&(C=S,T=b.shift()||h),m.push({start:C,end:T-1})},s=(b,h)=>{let C=1;for(let T=f.length-1;T-1>=0;T--){const S=f[T],x=f[T-1];if(S.offsetTop+S.offsetHeight>h&&x.offsetTop<h){C=Number(x.dataset.line);break}}for(let T=m.length-1;T>=0;T--){const S=a(m[T].end),x=i(m[T].start);if(S>b&&x<=b){C=C<m[T].start?C:m[T].start;break}}return C};let g=0,v=0;const y=()=>{var b,h,C;if(v!==0)return!1;g++;const{scrollDOM:T,contentHeight:S}=n;let x=Ce(l,"padding-top");const M=n.lineBlockAtHeight(T.scrollTop),{number:L}=n.state.doc.lineAt(M.from),E=m[L-1];if(!E)return!1;let H=1;const N=l.querySelector(`[data-line="${E.start}"]`)||((b=l.firstElementChild)==null?void 0:b.firstElementChild),O=l.querySelector(`[data-line="${E.end+1}"]`)||((h=l.lastElementChild)==null?void 0:h.lastElementChild),B=T.scrollHeight-T.clientHeight,q=l.scrollHeight-l.clientHeight;let U=i(E.start),le=a(E.end),ae=N.offsetTop,z=O.offsetTop-ae;U===0&&(ae=0,N===O?(x=0,le=S-T.offsetHeight,z=q):z=O.offsetTop),H=(T.scrollTop-U)/(le-U);const K=O==((C=l.lastElementChild)==null?void 0:C.lastElementChild)?O.offsetTop+O.clientHeight:O.offsetTop;if(le>=B||K>q){const oe=s(B,q);U=i(oe),H=(T.scrollTop-U)/(B-U);const Q=l.querySelector(`[data-line="${oe}"]`);U>0&&Q&&(ae=Q.offsetTop),z=q-ae+Ce(l,"padding-top")}const ie=ae-x+z*H;o(l,ie,()=>{g--})},k=()=>{var b,h,C,T,S,x;if(g!==0)return;v++;const{scrollDOM:M}=n,L=l.scrollTop,E=l.scrollHeight,H=M.scrollHeight-M.clientHeight,N=l.scrollHeight-l.clientHeight;let O=(b=l.firstElementChild)==null?void 0:b.firstElementChild,B=(h=l.firstElementChild)==null?void 0:h.lastElementChild;if(d.length>0){let Q=Math.ceil(d[d.length-1]*(L/E)),W=d.findLastIndex(Y=>Y<=Q);W=W===-1?0:W,Q=d[W];for(let Y=W;Y>=0&&Y<d.length;)if(f[Y].offsetTop>L){if(Y-1>=0){Y--;continue}Q=-1,W=Y;break}else{if(Y+1<d.length&&f[Y+1].offsetTop<L){Y++;continue}Q=d[Y],W=Y;break}switch(W){case-1:{O=(C=l.firstElementChild)==null?void 0:C.firstElementChild,B=f[W];break}case d.length-1:{O=f[W],B=(T=l.firstElementChild)==null?void 0:T.lastElementChild;break}default:O=f[W],B=f[W+1===f.length?W:W+1]}}let q=O===((S=l.firstElementChild)==null?void 0:S.firstElementChild)?0:O.offsetTop-Ce(O,"margin-top"),U=B.offsetTop,le=0;const{start:ae,end:z}=m[Number(O.dataset.line||0)];let K=i(ae);const ie=i(z+1===n.state.doc.lines?z:z+1);let oe=0;if(ie>H||B.offsetTop+B.offsetHeight>N){const Q=s(H,N),W=l.querySelector(`[data-line="${Q}"]`);q=W?W.offsetTop-Ce(W,"margin-top"):q,K=i(Q),le=(L-q)/(N-q),oe=H-K}else O===((x=l.firstElementChild)==null?void 0:x.firstElementChild)?(O===B&&(U=B.offsetTop+B.offsetHeight+ +getComputedStyle(B).marginBottom.replace("px","")),oe=ie,le=Math.max(L/U,0)):(le=Math.max((L-q)/(U-q),0),oe=ie-K);o(e,K+oe*le,()=>{v--})},p=b=>{var h;const{scrollDOM:C,contentHeight:T}=n,S=C.clientHeight;if(T<=S||l.firstElementChild.clientHeight<=l.clientHeight||n.state.doc.lines<=((h=m[m.length-1])==null?void 0:h.end))return!1;b.target===e?y():k()};return[()=>{c(),e.addEventListener("scroll",p),l.addEventListener("scroll",p),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",p),l.removeEventListener("scroll",p)}]},qa={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},uo=j({props:qa,setup(e){const l=A("scrollElementRef"),t=A("roorNodeRef"),n=R();return I(()=>e.tocItem.active,o=>{o&&(n.value?e.onActive(e.tocItem,n.value):de(()=>{e.onActive(e.tocItem,n.value)}))},{immediate:!0}),()=>{const{tocItem:o,mdHeadingId:i,onClick:a,scrollElementOffsetTop:m}=e;return u("div",{ref:n,class:[`${r}-catalog-link`,o.active&&`${r}-catalog-active`],onClick:f=>{a(f,o),f.stopPropagation();const d=i(o.text,o.level,o.index),c=t.value.getElementById(d),s=l.value;if(c&&s){let g=c.offsetParent,v=c.offsetTop;if(s.contains(g))for(;g&&s!=g;)v+=g?.offsetTop,g=g?.offsetParent;const y=c.previousElementSibling;let k=0;y||(k=Ce(c,"margin-top")),s?.scrollTo({top:v-m-k,behavior:"smooth"})}}},[u("span",{title:o.text},[o.text]),o.children&&o.children.length>0&&u("div",{class:`${r}-catalog-wrapper`},[o.children.map(f=>u(uo,{mdHeadingId:i,key:`${o.text}-link-${f.level}-${f.text}`,tocItem:f,onActive:e.onActive,onClick:a,scrollElementOffsetTop:m},null))])])}}}),Xa={editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1}},_e=j({name:"MdCatalog",props:Xa,emits:["onClick","onActive"],setup(e,l){const t=e.editorId,n=`#${t}-preview-wrapper`,o=ee({list:[],show:!1,scrollElement:e.scrollElement||n}),i=ve(),a=R(),m=R(),f=R(),d=R(),c=R({});ne("scrollElementRef",m),ne("roorNodeRef",d);const s=J(()=>{const b=[];return o.list.forEach((h,C)=>{const{text:T,level:S}=h,x={level:S,text:T,index:C+1,active:i.value===h};if(b.length===0)b.push(x);else{let M=b[b.length-1];if(x.level>M.level)for(let L=M.level+1;L<=6;L++){const{children:E}=M;if(!E){M.children=[x];break}if(M=E[E.length-1],x.level<=M.level){E.push(x);break}}else b.push(x)}}),b}),g=()=>{var b;if(o.scrollElement instanceof HTMLElement)return o.scrollElement;let h=document;return(o.scrollElement===n||e.isScrollElementInShadow)&&(h=(b=a.value)==null?void 0:b.getRootNode()),h.querySelector(o.scrollElement)},v=b=>{if(b.length===0)return i.value=void 0,o.list=[],!1;const{activeHead:h}=b.reduce((C,T,S)=>{var x;const M=(x=d.value)==null?void 0:x.getElementById(e.mdHeadingId(T.text,T.level,S+1));if(M instanceof HTMLElement){const L=Yn(M,m.value);if(L<e.offsetTop&&L>C.minTop)return{activeHead:T,minTop:L}}return C},{activeHead:b[0],minTop:Number.MIN_SAFE_INTEGER});i.value=h,o.list=b},y=(b,h)=>{c.value.top=h.offsetTop+Ce(h,"padding-top")+"px",e.onActive?e.onActive(b,h):l.emit("onActive",b,h)},k=()=>{v(o.list)},p=b=>{var h,C;const T=g();m.value=T,f.value=T===document.documentElement?document:T,(h=f.value)==null||h.removeEventListener("scroll",k),v(b),(C=f.value)==null||C.addEventListener("scroll",k)};return G(()=>{d.value=a.value.getRootNode(),$.on(t,{name:Ee,callback:p}),$.emit(t,lo)}),he(()=>{var b;$.remove(t,Ee,p),(b=f.value)==null||b.removeEventListener("scroll",k)}),()=>u("div",{class:[`${r}-catalog`,e.theme==="dark"&&`${r}-catalog-dark`,e.class||""],ref:a},[s.value.length>0&&u(Le,null,[u("div",{class:`${r}-catalog-indicator`,style:c.value},null),u("div",{class:`${r}-catalog-container`},[s.value.map(b=>u(uo,{mdHeadingId:e.mdHeadingId,tocItem:b,key:`link-${b.level}-${b.text}`,onActive:y,onClick:(h,C)=>{e.onClick?e.onClick(h,C):l.emit("onClick",h,C)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});_e.install=e=>(e.component(_e.name,_e),e);const Ka={title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},je=j({name:"NormalToolbar",props:Ka,emits:["onClick"],setup(e,l){return()=>{const t=te({props:e,ctx:l},"trigger"),n=te({props:e,ctx:l});return u("div",{class:`${r}-toolbar-item`,title:e.title,onClick:o=>{e.onClick instanceof Function?e.onClick(o):l.emit("onClick",o)}},[n||t])}}});je.install=e=>(e.component(je.name,je),e);function Ya(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!In(e)}const Za={title:{type:String,default:""},modalTitle:{type:[String,Object],default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},Ve=j({name:"ModalToolbar",props:Za,emits:["onClick","onClose","onAdjust"],setup(e,l){return()=>{const t=te({props:e,ctx:l},"trigger"),n=te({props:e,ctx:l},"modalTitle"),o=te({props:e,ctx:l});return u(Le,null,[u("div",{class:`${r}-toolbar-item`,title:e.title,onClick:()=>{e.onClick instanceof Function?e.onClick():l.emit("onClick")}},[t]),u(Te,{style:e.style,class:e.class,width:e.width,height:e.height,title:n,visible:e.visible,showMask:e.showMask,onClose:()=>{e.onClose instanceof Function?e.onClose():l.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:i=>{e.onAdjust instanceof Function?e.onAdjust(i):l.emit("onAdjust",i)}},Ya(o)?o:{default:()=>[o]})])}}});Ve.install=e=>(e.component(Ve.name,Ve),e);var Ja=Object.defineProperty,Qa=(e,l,t)=>l in e?Ja(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,me=(e,l,t)=>Qa(e,typeof l!="symbol"?l+"":l,t);const ei=j({name:`${r}-divider`,setup(){return()=>u("div",{class:`${r}-divider`},null)}}),ti={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String}},li=e=>{const l=A("editorId"),{editorExtensions:t,editorExtensionsAttrs:n}=X;let o=t.screenfull.instance;const i=R(!1),a=d=>{if(!o){$.emit(l,pe,{name:"fullscreen",message:"fullscreen is undefined"});return}o.isEnabled&&(i.value=!0,(d===void 0?!o.isFullscreen:d)?o.request():o.exit())},m=()=>{o&&o.isEnabled&&o.on("change",()=>{(i.value||e.setting.fullscreen)&&(i.value=!1,e.updateSetting("fullscreen"))})},f=()=>{o=window.screenfull,m()};return G(()=>{var d;m(),o||se("script",{...(d=n.screenfull)==null?void 0:d.js,src:t.screenfull.js,id:ce.screenfull,onload:f},"screenfull")}),G(()=>{$.on(l,{name:Ql,callback:a})}),{fullscreenHandler:a}},oi={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},ni=j({name:"TableShape",props:oi,setup(e){const l=ee({x:-1,y:-1}),t=J(()=>JSON.stringify(e.tableShape)),n=()=>{const i=[...JSON.parse(t.value)];return(!i[2]||i[2]<i[0])&&(i[2]=i[0]),(!i[3]||i[3]<i[3])&&(i[3]=i[1]),i},o=R(n());return I([t],()=>{o.value=n()}),()=>u("div",{class:`${r}-table-shape`,onMouseleave:()=>{o.value=n(),l.x=-1,l.y=-1}},[new Array(o.value[1]).fill("").map((i,a)=>u("div",{class:`${r}-table-shape-row`,key:`table-shape-row-${a}`},[new Array(o.value[0]).fill("").map((m,f)=>u("div",{class:`${r}-table-shape-col`,key:`table-shape-col-${f}`,onMouseenter:()=>{l.x=a,l.y=f,f+1===o.value[0]&&f+1<o.value[2]?o.value[0]++:f+2<o.value[0]&&o.value[0]>e.tableShape[0]&&o.value[0]--,a+1===o.value[1]&&a+1<o.value[3]?o.value[1]++:a+2<o.value[1]&&o.value[1]>e.tableShape[1]&&o.value[1]--},onClick:()=>{e.onSelected(l)}},[u("div",{class:[`${r}-table-shape-col-default`,a<=l.x&&f<=l.y&&`${r}-table-shape-col-include`]},null)]))]))])}}),ai={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},ii=j({name:`${r}-modal-link`,props:ai,setup(e){const l=A("usedLanguageText"),t=A("editorId"),n=J(()=>{var i,a;switch(e.type){case"link":return(i=l.value.linkModalTips)==null?void 0:i.linkTitle;case"image":return(a=l.value.linkModalTips)==null?void 0:a.imageTitle;default:return""}}),o=ee({desc:"",url:""});return I(()=>e.visible,i=>{i||setTimeout(()=>{o.desc="",o.url=""},200)}),()=>u(Te,{title:n.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var i,a,m,f,d;return[u("div",{class:`${r}-form-item`},[u("label",{class:`${r}-label`,for:`link-desc-${t}`},[(i=l.value.linkModalTips)==null?void 0:i.descLabel]),u("input",{placeholder:(a=l.value.linkModalTips)==null?void 0:a.descLabelPlaceHolder,class:`${r}-input`,id:`link-desc-${t}`,type:"text",value:o.desc,onChange:c=>{o.desc=c.target.value},autocomplete:"off"},null)]),u("div",{class:`${r}-form-item`},[u("label",{class:`${r}-label`,for:`link-url-${t}`},[(m=l.value.linkModalTips)==null?void 0:m.urlLabel]),u("input",{placeholder:(f=l.value.linkModalTips)==null?void 0:f.urlLabelPlaceHolder,class:`${r}-input`,id:`link-url-${t}`,type:"text",value:o.url,onChange:c=>{o.url=c.target.value},autocomplete:"off"},null)]),u("div",{class:`${r}-form-item`},[u("button",{class:[`${r}-btn`,`${r}-btn-row`],type:"button",onClick:()=>{e.onOk(o),o.desc="",o.url=""}},[(d=l.value.linkModalTips)==null?void 0:d.buttonOK])])]}})}}),ri={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},si=j({name:`${r}-modal-clip`,props:ri,setup(e){const l=A("usedLanguageText"),t=A("editorId"),n=A("rootRef");let o=X.editorExtensions.cropper.instance;const i=R(),a=R(),m=R(),f=ee({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let d=null;I(()=>e.visible,()=>{e.visible&&!f.cropperInited&&(o=o||window.Cropper,i.value.onchange=()=>{if(!o){$.emit(t,pe,{name:"Cropper",message:"Cropper is undefined"});return}const s=i.value.files||[];if(f.imgSelected=!0,s?.length>0){const g=new FileReader;g.onload=v=>{f.imgSrc=v.target.result},g.readAsDataURL(s[0])}})}),I(()=>[f.imgSelected],()=>{m.value.style=""}),I([ue(()=>f.isFullscreen),ue(()=>f.imgSrc)],()=>{f.imgSrc&&de(()=>{d?.destroy(),m.value.style="",a.value&&(d=new o(a.value,{viewMode:2,preview:n.value.getRootNode().querySelector(`.${r}-clip-preview-target`)}))})});const c=()=>{d.clear(),d.destroy(),d=null,i.value.value="",f.imgSelected=!1};return()=>{var s;return u(Te,{class:`${r}-modal-clip`,title:(s=l.value.clipModalTips)==null?void 0:s.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:f.isFullscreen,onAdjust:g=>{f.isFullscreen=g},width:"668px",height:"421px"},{default:()=>{var g,v,y;return[u("div",{class:`${r}-form-item ${r}-clip`},[u("div",{class:`${r}-clip-main`},[f.imgSelected?u("div",{class:`${r}-clip-cropper`},[u("img",{src:f.imgSrc,ref:a,style:{display:"none"},alt:""},null),u("div",{class:`${r}-clip-delete`,onClick:c},[u(F,{name:"delete"},null)])]):u("div",{class:`${r}-clip-upload`,onClick:()=>{i.value.click()},role:"button",tabindex:"0","aria-label":(g=l.value.imgTitleItem)==null?void 0:g.upload},[u(F,{name:"upload"},null)])]),u("div",{class:`${r}-clip-preview`},[u("div",{class:`${r}-clip-preview-target`,ref:m},null)])]),u("div",{class:`${r}-form-item`},[u("button",{class:`${r}-btn`,type:"button",onClick:()=>{if(d){const k=d.getCroppedCanvas();$.emit(t,qe,[Xn(k.toDataURL("image/png"))],e.onOk),c()}}},[((v=l.value.clipModalTips)==null?void 0:v.buttonUpload)||((y=l.value.linkModalTips)==null?void 0:y.buttonOK)])]),u("input",{ref:i,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),ci={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},ui=j({name:`${r}-modals`,props:ci,setup(e){return()=>u(Le,null,[u(ii,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),u(si,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),di=j({name:"MDEditorToolbar",props:ti,setup(e){const l=A("editorId"),t=A("usedLanguageText"),n=A("theme"),o=A("previewTheme"),i=A("language"),a=A("disabled"),{fullscreenHandler:m}=li(e),f=`${l}-toolbar-wrapper`,d=R(),c=ee({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),s=(h,C)=>{if(a?.value)return!1;$.emit(l,P,h,C)},g=ee({type:"link",linkVisible:!1,clipVisible:!1}),v=R();G(()=>{$.on(l,{name:at,callback(h){g.type=h,g.linkVisible=!0}})});const y=J(()=>{const h=e.toolbars.filter(x=>!e.toolbarsExclude.includes(x)),C=h.indexOf("="),T=C===-1?h:h.slice(0,C+1),S=C===-1?[]:h.slice(C,Number.MAX_SAFE_INTEGER);return[T,S]}),k=R(),p=()=>{$.emit(l,qe,Array.from(k.value.files||[])),k.value.value=""};G(()=>{k.value.addEventListener("change",p)});const b=h=>{var C,T,S,x,M,L,E,H,N,O,B,q,U,le,ae,z,K,ie,oe,Q,W,Y,Ke,dt,ft,mt,gt,vt,ht,pt,bt,yt,kt,wt,Ct,$t,Tt,St,xt,At,Et,_t,It,Lt,Ht,Ft,Rt,Mt,Nt,Pt,Ot,Bt,Dt,jt,Vt,Wt,zt,Ut,Gt,qt,Xt,Kt,Yt,Zt,Jt,Qt,el,tl,ll,ol,nl,al,il,rl,sl,cl,ul,dl,fl;if(Zl.includes(h))switch(h){case"-":return u(ei,null,null);case"bold":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(C=t.value.toolbarTips)==null?void 0:C.bold,onClick:()=>{s("bold")}},[u(F,{name:"bold"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(T=t.value.toolbarTips)==null?void 0:T.bold])]);case"underline":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(S=t.value.toolbarTips)==null?void 0:S.underline,onClick:()=>{s("underline")}},[u(F,{name:"underline"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(x=t.value.toolbarTips)==null?void 0:x.underline])]);case"italic":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(M=t.value.toolbarTips)==null?void 0:M.italic,onClick:()=>{s("italic")}},[u(F,{name:"italic"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(L=t.value.toolbarTips)==null?void 0:L.italic])]);case"strikeThrough":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(E=t.value.toolbarTips)==null?void 0:E.strikeThrough,onClick:()=>{s("strikeThrough")}},[u(F,{name:"strike-through"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(H=t.value.toolbarTips)==null?void 0:H.strikeThrough])]);case"title":return u(we,{relative:`#${f}`,visible:c.title,onChange:_=>{c.title=_},disabled:a?.value,overlay:u("ul",{class:`${r}-menu`,onClick:()=>{c.title=!1},role:"menu"},[u("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h1")},role:"menuitem",tabindex:"0"},[(N=t.value.titleItem)==null?void 0:N.h1]),u("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h2")},role:"menuitem",tabindex:"0"},[(O=t.value.titleItem)==null?void 0:O.h2]),u("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h3")},role:"menuitem",tabindex:"0"},[(B=t.value.titleItem)==null?void 0:B.h3]),u("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h4")},role:"menuitem",tabindex:"0"},[(q=t.value.titleItem)==null?void 0:q.h4]),u("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h5")},role:"menuitem",tabindex:"0"},[(U=t.value.titleItem)==null?void 0:U.h5]),u("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h6")},role:"menuitem",tabindex:"0"},[(le=t.value.titleItem)==null?void 0:le.h6])])},{default:()=>{var _,Z;return[u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(_=t.value.toolbarTips)==null?void 0:_.title},[u(F,{name:"title"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.title])])]}});case"sub":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(ae=t.value.toolbarTips)==null?void 0:ae.sub,onClick:()=>{s("sub")}},[u(F,{name:"sub"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(z=t.value.toolbarTips)==null?void 0:z.sub])]);case"sup":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(K=t.value.toolbarTips)==null?void 0:K.sup,onClick:()=>{s("sup")}},[u(F,{name:"sup"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(ie=t.value.toolbarTips)==null?void 0:ie.sup])]);case"quote":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(oe=t.value.toolbarTips)==null?void 0:oe.quote,onClick:()=>{s("quote")}},[u(F,{name:"quote"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Q=t.value.toolbarTips)==null?void 0:Q.quote])]);case"unorderedList":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(W=t.value.toolbarTips)==null?void 0:W.unorderedList,onClick:()=>{s("unorderedList")}},[u(F,{name:"unordered-list"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Y=t.value.toolbarTips)==null?void 0:Y.unorderedList])]);case"orderedList":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(Ke=t.value.toolbarTips)==null?void 0:Ke.orderedList,onClick:()=>{s("orderedList")}},[u(F,{name:"ordered-list"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(dt=t.value.toolbarTips)==null?void 0:dt.orderedList])]);case"task":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(ft=t.value.toolbarTips)==null?void 0:ft.task,onClick:()=>{s("task")}},[u(F,{name:"task"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(mt=t.value.toolbarTips)==null?void 0:mt.task])]);case"codeRow":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(gt=t.value.toolbarTips)==null?void 0:gt.codeRow,onClick:()=>{s("codeRow")}},[u(F,{name:"code-row"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(vt=t.value.toolbarTips)==null?void 0:vt.codeRow])]);case"code":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(ht=t.value.toolbarTips)==null?void 0:ht.code,onClick:()=>{s("code")}},[u(F,{name:"code"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(pt=t.value.toolbarTips)==null?void 0:pt.code])]);case"link":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(bt=t.value.toolbarTips)==null?void 0:bt.link,onClick:()=>{if(a?.value)return!1;g.type="link",g.linkVisible=!0}},[u(F,{name:"link"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(yt=t.value.toolbarTips)==null?void 0:yt.link])]);case"image":return e.noUploadImg?u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(kt=t.value.toolbarTips)==null?void 0:kt.image,onClick:()=>{if(a?.value)return!1;g.type="image",g.linkVisible=!0}},[u(F,{name:"image"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(wt=t.value.toolbarTips)==null?void 0:wt.image])]):u(we,{relative:`#${f}`,visible:c.image,onChange:_=>{c.image=_},disabled:a?.value,overlay:u("ul",{class:`${r}-menu`,onClick:()=>{c.title=!1},role:"menu"},[u("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{g.type="image",g.linkVisible=!0},role:"menuitem",tabindex:"0"},[(Ct=t.value.imgTitleItem)==null?void 0:Ct.link]),u("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{k.value.click()},role:"menuitem",tabindex:"0"},[($t=t.value.imgTitleItem)==null?void 0:$t.upload]),u("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{g.clipVisible=!0},role:"menuitem",tabindex:"0"},[(Tt=t.value.imgTitleItem)==null?void 0:Tt.clip2upload])])},{default:()=>{var _,Z;return[u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(_=t.value.toolbarTips)==null?void 0:_.image},[u(F,{name:"image"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.image])])]}});case"table":return u(we,{relative:`#${f}`,visible:c.table,onChange:_=>{c.table=_},disabled:a?.value,key:"bar-table",overlay:u(ni,{tableShape:e.tableShape,onSelected:_=>{s("table",{selectedShape:_})}},null)},{default:()=>{var _,Z;return[u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(_=t.value.toolbarTips)==null?void 0:_.table},[u(F,{name:"table"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.table])])]}});case"revoke":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(St=t.value.toolbarTips)==null?void 0:St.revoke,onClick:()=>{if(a?.value)return!1;$.emit(l,eo)}},[u(F,{name:"revoke"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(xt=t.value.toolbarTips)==null?void 0:xt.revoke])]);case"next":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(At=t.value.toolbarTips)==null?void 0:At.next,onClick:()=>{if(a?.value)return!1;$.emit(l,to)}},[u(F,{name:"next"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Et=t.value.toolbarTips)==null?void 0:Et.next])]);case"save":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(_t=t.value.toolbarTips)==null?void 0:_t.save,onClick:()=>{if(a?.value)return!1;$.emit(l,Ge)}},[u(F,{name:"save"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(It=t.value.toolbarTips)==null?void 0:It.save])]);case"prettier":return e.noPrettier?"":u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(Lt=t.value.toolbarTips)==null?void 0:Lt.prettier,onClick:()=>{s("prettier")}},[u(F,{name:"prettier"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Ht=t.value.toolbarTips)==null?void 0:Ht.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&u("div",{class:[`${r}-toolbar-item`,e.setting.pageFullscreen&&`${r}-toolbar-active`,a?.value&&`${r}-disabled`],title:(Ft=t.value.toolbarTips)==null?void 0:Ft.pageFullscreen,onClick:()=>{if(a?.value)return!1;e.updateSetting("pageFullscreen")}},[u(F,{name:e.setting.pageFullscreen?"minimize":"maximize"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Rt=t.value.toolbarTips)==null?void 0:Rt.pageFullscreen])]);case"fullscreen":return u("div",{class:[`${r}-toolbar-item`,e.setting.fullscreen&&`${r}-toolbar-active`,a?.value&&`${r}-disabled`],title:(Mt=t.value.toolbarTips)==null?void 0:Mt.fullscreen,onClick:()=>{if(a?.value)return!1;m()}},[u(F,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Nt=t.value.toolbarTips)==null?void 0:Nt.fullscreen])]);case"preview":return u("div",{class:[`${r}-toolbar-item`,e.setting.preview&&`${r}-toolbar-active`,a?.value&&`${r}-disabled`],title:(Pt=t.value.toolbarTips)==null?void 0:Pt.preview,onClick:()=>{if(a?.value)return!1;e.updateSetting("preview")}},[u(F,{name:"preview"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Ot=t.value.toolbarTips)==null?void 0:Ot.preview])]);case"previewOnly":return u("div",{class:[`${r}-toolbar-item`,e.setting.previewOnly&&`${r}-toolbar-active`,a?.value&&`${r}-disabled`],title:(Bt=t.value.toolbarTips)==null?void 0:Bt.previewOnly,onClick:()=>{if(a?.value)return!1;e.updateSetting("previewOnly")}},[u(F,{name:"preview-only"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Dt=t.value.toolbarTips)==null?void 0:Dt.previewOnly])]);case"htmlPreview":return u("div",{class:[`${r}-toolbar-item`,e.setting.htmlPreview&&`${r}-toolbar-active`,a?.value&&`${r}-disabled`],title:(jt=t.value.toolbarTips)==null?void 0:jt.htmlPreview,onClick:()=>{if(a?.value)return!1;e.updateSetting("htmlPreview")}},[u(F,{name:"preview-html"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Vt=t.value.toolbarTips)==null?void 0:Vt.htmlPreview])]);case"catalog":return u("div",{class:[`${r}-toolbar-item`,e.catalogVisible&&`${r}-toolbar-active`,a?.value&&`${r}-disabled`],title:(Wt=t.value.toolbarTips)==null?void 0:Wt.catalog,onClick:()=>{if(a?.value)return!1;$.emit(l,rt)},key:"bar-catalog"},[u(F,{name:"catalog"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(zt=t.value.toolbarTips)==null?void 0:zt.catalog])]);case"github":return u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(Ut=t.value.toolbarTips)==null?void 0:Ut.github,onClick:()=>{if(a?.value)return!1;dn("https://github.com/imzbf/md-editor-v3")}},[u(F,{name:"github"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Gt=t.value.toolbarTips)==null?void 0:Gt.github])]);case"mermaid":return u(we,{relative:`#${f}`,visible:c.mermaid,onChange:_=>{c.mermaid=_},disabled:a?.value,overlay:u("ul",{class:`${r}-menu`,onClick:()=>{c.mermaid=!1},role:"menu"},[u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("flow")},role:"menuitem",tabindex:"0"},[(qt=t.value.mermaid)==null?void 0:qt.flow]),u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("sequence")},role:"menuitem",tabindex:"0"},[(Xt=t.value.mermaid)==null?void 0:Xt.sequence]),u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("gantt")},role:"menuitem",tabindex:"0"},[(Kt=t.value.mermaid)==null?void 0:Kt.gantt]),u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("class")},role:"menuitem",tabindex:"0"},[(Yt=t.value.mermaid)==null?void 0:Yt.class]),u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("state")},role:"menuitem",tabindex:"0"},[(Zt=t.value.mermaid)==null?void 0:Zt.state]),u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("pie")},role:"menuitem",tabindex:"0"},[(Jt=t.value.mermaid)==null?void 0:Jt.pie]),u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("relationship")},role:"menuitem",tabindex:"0"},[(Qt=t.value.mermaid)==null?void 0:Qt.relationship]),u("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("journey")},role:"menuitem",tabindex:"0"},[(el=t.value.mermaid)==null?void 0:el.journey])]),key:"bar-mermaid"},{default:()=>{var _,Z;return[u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(_=t.value.toolbarTips)==null?void 0:_.mermaid},[u(F,{name:"mermaid"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.mermaid])])]}});case"katex":return u(we,{relative:`#${f}`,visible:c.katex,onChange:_=>{c.katex=_},disabled:a?.value,overlay:u("ul",{class:`${r}-menu`,onClick:()=>{c.katex=!1},role:"menu"},[u("li",{class:`${r}-menu-item ${r}-menu-item-katex`,onClick:()=>{s("katexInline")},role:"menuitem",tabindex:"0"},[(tl=t.value.katex)==null?void 0:tl.inline]),u("li",{class:`${r}-menu-item ${r}-menu-item-katex`,onClick:()=>{s("katexBlock")},role:"menuitem",tabindex:"0"},[(ll=t.value.katex)==null?void 0:ll.block])]),key:"bar-katex"},{default:()=>{var _,Z;return[u("div",{class:[`${r}-toolbar-item`,a?.value&&`${r}-disabled`],title:(_=t.value.toolbarTips)==null?void 0:_.katex},[u(F,{name:"formula"},null),e.showToolbarName&&u("div",{class:`${r}-toolbar-item-name`},[(Z=t.value.toolbarTips)==null?void 0:Z.katex])])]}})}else if(e.defToolbars instanceof Array){const _=e.defToolbars[h];return _?Ie(_,{theme:((ol=_.props)==null?void 0:ol.theme)||n.value,previewTheme:((nl=_.props)==null?void 0:nl.theme)||o.value,language:((al=_.props)==null?void 0:al.theme)||i.value,codeTheme:((il=_.props)==null?void 0:il.codeTheme)||e.codeTheme,disabled:((rl=_.props)==null?void 0:rl.disabled)||a?.value,insert(Ye){$.emit(l,P,"universal",{generate:Ye})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const _=e.defToolbars.children[h];return _?Ie(_,{theme:((sl=_.props)==null?void 0:sl.theme)||n.value,previewTheme:((cl=_.props)==null?void 0:cl.theme)||o.value,language:((ul=_.props)==null?void 0:ul.theme)||i.value,codeTheme:((dl=_.props)==null?void 0:dl.codeTheme)||e.codeTheme,disabled:((fl=_.props)==null?void 0:fl.disabled)||a?.value,insert(Ye){$.emit(l,P,"universal",{generate:Ye})}}):""}else return""};return I(()=>e.toolbars,()=>{de(()=>{d.value&&un(d.value)})},{immediate:!0}),()=>{var h;const C=y.value[0].map(S=>b(S)),T=y.value[1].map(S=>b(S));return u(Le,null,[e.toolbars.length>0&&u("div",{class:`${r}-toolbar-wrapper`,ref:d,id:f},[u("div",{class:[`${r}-toolbar`,e.showToolbarName&&`${r}-stn`]},[u("div",{class:`${r}-toolbar-left`,ref:v},[C]),u("div",{class:`${r}-toolbar-right`},[T])])]),u("label",{for:`${f}_label`,style:{display:"none"},"aria-label":(h=t.value.imgTitleItem)==null?void 0:h.upload},null),u("input",{id:`${f}_label`,ref:k,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),u(ui,{linkVisible:g.linkVisible,clipVisible:g.clipVisible,type:g.type,onCancel:()=>{g.linkVisible=!1,g.clipVisible=!1},onOk:S=>{S&&s(g.type,{desc:S.desc,url:S.url,transform:g.type==="image"}),g.linkVisible=!1,g.clipVisible=!1}},null)])}}}),fi=(e,l,t)=>{const n=A("editorId");let o=()=>{},i=()=>{};const a=()=>{var m;o();const f=(m=t.value)==null?void 0:m.view.contentDOM.getRootNode(),d=f.querySelector(`#${n} .cm-scroller`),c=f.querySelector(`[id="${n}-preview-wrapper"]`),s=f.querySelector(`[id="${n}-html-wrapper"]`);(c||s)&&([i,o]=(c?Ga:Ua)(d,c||s,t.value),e.scrollAuto&&i())};I([l,ue(e.setting,"preview"),ue(e.setting,"htmlPreview"),ue(e.setting,"fullscreen"),ue(e.setting,"pageFullscreen")],()=>{de(a)}),I(()=>e.scrollAuto,m=>{m?i():o()}),I(()=>e.setting.previewOnly,m=>{m?o():i()}),G(a)},Je=async(e,l,t)=>{var n;let o="",i=0,a=0,m=!0,f=!1;const d=l.getSelectedText(),c=X.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){const s=e.replace(/^h(\d)/,(g,v)=>new Array(Number(v)).fill("#",0,v).join(""));o=`${s} ${d}`,i=s.length+1}else if(e==="prettier"){const s=window.prettier||X.editorExtensions.prettier.prettierInstance,g=[((n=window.prettierPlugins)==null?void 0:n.markdown)||X.editorExtensions.prettier.parserMarkdownInstance];!s||g[0]===void 0?($.emit(t.editorId,pe,{name:"prettier",message:"prettier is undefined"}),o=l.getValue()):o=await s.format(l.getValue(),{parser:"markdown",plugins:g}),m=!1,f=!0}else switch(e){case"bold":{o=`**${d}**`,i=2,a=-2;break}case"underline":{o=`<u>${d}</u>`,i=3,a=-4;break}case"italic":{o=`*${d}*`,i=1,a=-1;break}case"strikeThrough":{o=`~~${d}~~`,i=2,a=-2;break}case"sub":{o=`~${d}~`,i=1,a=-1;break}case"sup":{o=`^${d}^`,i=1,a=-1;break}case"codeRow":{o="`"+d+"`",i=1,a=-1;break}case"quote":{o=`> ${d}`,i=2;break}case"orderedList":{o=`1. ${d}`,i=3;break}case"unorderedList":{o=`- ${d}`,i=2;break}case"task":{o=`- [ ] ${d}`,i=6;break}case"code":{const s=t.text||d||"",g=t.mode||"language";o=`\`\`\`${g}
${s}
\`\`\`
`,i=3,a=3+g.length-o.length;break}case"table":{o="|";const{selectedShape:s={x:1,y:1}}=t,{x:g,y:v}=s;for(let y=0;y<=v;y++)o+=" col |";o+=`
|`;for(let y=0;y<=v;y++)o+=" - |";for(let y=0;y<=g;y++){o+=`
|`;for(let k=0;k<=v;k++)o+=" content |"}i=2,a=5-o.length;break}case"link":{const{desc:s,url:g}=t;o=`[${s}](${g})`,m=!1;break}case"image":{const{desc:s,url:g,urls:v}=t;v instanceof Array?o=v.reduce((y,k)=>{const{url:p="",alt:b="",title:h=""}=typeof k=="object"?k:{url:k};return y+`![${b}](${p}${h?" '"+h+"'":""})
`},""):o=`![${s}](${g})
`,m=!1;break}case"flow":{o=`\`\`\`mermaid
${c?.flow||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,i=11,a=-5;break}case"sequence":{o=`\`\`\`mermaid
${c?.sequence||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,i=11,a=-5;break}case"gantt":{o=`\`\`\`mermaid
${c?.gantt||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,i=11,a=-5;break}case"class":{o=`\`\`\`mermaid
${c?.class||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,i=11,a=-5;break}case"state":{o=`\`\`\`mermaid
${c?.state||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,i=11,a=-5;break}case"pie":{o=`\`\`\`mermaid
${c?.pie||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,i=11,a=-5;break}case"relationship":{o=`\`\`\`mermaid
${c?.relationship||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,i=11,a=-5;break}case"journey":{o=`\`\`\`mermaid
${c?.journey||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,i=11,a=-5;break}case"katexInline":{o="$$",i=1,a=-1;break}case"katexBlock":{o=`$$

$$
`,i=3,a=-4;break}case"universal":{const{generate:s}=t,g=s(d);o=g.targetValue,m=g.select??!0,i=g.deviationStart||0,a=g.deviationEnd||0}}return{text:o,options:{select:m,deviationStart:i,deviationEnd:a,replaceAll:f}}},mi="#e5c07b",El="var(--md-color)",gi="#56b6c2",vi="#ffffff",xe="var(--md-color)",_l="#e5c07b",hi="#e5c07b",pi="var(--md-color)",Il="#d19a66",bi="#c678dd",yi="#21252b",ki="#2c313a",Ll="var(--md-bk-color)",Qe="var(--md-bk-color)",wi="#ceedfa33",Hl="#528bff",Ci=fe.theme({"&":{color:xe,backgroundColor:Ll},".cm-content":{caretColor:Hl},".cm-cursor, .cm-dropCursor":{borderLeftColor:Hl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:wi},".cm-panels":{backgroundColor:yi,color:xe},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Ll,color:xe,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:ki},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Qe},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Qe,borderBottomColor:Qe},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:xe}}},{dark:!0}),$i=Xl.define([{tag:w.keyword,color:bi},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:El},{tag:[w.function(w.variableName),w.labelName],color:hi},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:Il},{tag:[w.definition(w.name),w.separator],color:xe},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:mi},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:gi},{tag:[w.meta,w.comment],color:_l},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:_l,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:El},{tag:[w.atom,w.bool,w.special(w.variableName)],color:Il},{tag:[w.processingInstruction,w.string,w.inserted],color:pi},{tag:w.invalid,color:vi}]),Fl=[Ci,Kl($i)],Ti="#e5c07b",Rl="#3f4a54",Si="#56b6c2",xi="#fff",Ae="#3f4a54",Ml="#2d8cf0",Ai="#2d8cf0",Ei="#3f4a54",Nl="#d19a66",_i="#c678dd",Ii="#f6f6f6",Li="#ceedfa33",Pl="var(--md-bk-color)",et="var(--md-bk-color)",Hi="#bad5fa",Ol="#3f4a54",Fi=fe.theme({"&":{color:Ae,backgroundColor:Pl},".cm-content":{caretColor:Ol},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ol},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Hi},".cm-panels":{backgroundColor:Ii,color:Ae},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Pl,color:Ae,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:Li},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:et},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:et,borderBottomColor:et},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Ae}}}),Ri=Xl.define([{tag:w.keyword,color:_i},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:Rl},{tag:[w.function(w.variableName),w.labelName],color:Ai},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:Nl},{tag:[w.definition(w.name),w.separator],color:Ae},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:Ti},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:Si},{tag:[w.meta,w.comment],color:Ml},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:Ml,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:Rl},{tag:[w.atom,w.bool,w.special(w.variableName)],color:Nl},{tag:[w.processingInstruction,w.string,w.inserted],color:Ei},{tag:w.invalid,color:xi}]),Bl=[Fi,Kl(Ri)],Fe=(e,l,t,n,o)=>(i,a,m,f)=>{const d=`${e}${l}`.slice(f-m);i.dispatch(i.state.replaceSelection(`${d}${t}${n}`));const c=m+a.label.length+(o==="title"?t.length:0);i.dispatch({selection:$e.create([$e.range(m+a.label.length+(o==="title"?1:-l.length),c),$e.cursor(c)],1)}),i.focus()},Dl=e=>(l,t,n,o)=>{const i=e.slice(o-n);l.dispatch(l.state.replaceSelection(`${i} `))},jl=e=>{const l=t=>{const n=t.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return n===null||n.from==n.to&&t.explicit?null:{from:n.from,options:[...["h2","h3","h4","h5","h6"].map((o,i)=>{const a=new Array(i+2).fill("#").join("");return{label:a,type:"text",apply:Dl(a)}}),...["unchecked","checked"].map(o=>{const i=o==="checked"?"- [x]":"- [ ]";return{label:i,type:"text",apply:Dl(i)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(o=>({label:`${o[0]}${o[1]}`,type:"text",apply:Fe(o[0],o[1],"",o[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:Fe("$","","","$","type")},{label:"$$",type:"text",apply:Fe("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(o=>({label:`!!! ${o}`,type:"text",apply:Fe("!!!",` ${o}`," Title",`

!!!`,"title")}))]}};return bn({override:e?[l,...e]:[l]})},ye=e=>{const l=new ke;return n=>(l.get(e.state)?e.dispatch({effects:l.reconfigure(n)}):e.dispatch({effects:Sn.appendConfig.of(l.of(n))}),!0)};class Mi{constructor(l){me(this,"view"),me(this,"maxLength",Number.MAX_SAFE_INTEGER),me(this,"toggleTabSize"),me(this,"togglePlaceholder"),me(this,"setExtensions"),me(this,"toggleDisabled"),me(this,"toggleReadOnly"),me(this,"toggleMaxlength"),this.view=l,this.toggleTabSize=ye(this.view),this.togglePlaceholder=ye(this.view),this.setExtensions=ye(this.view),this.toggleDisabled=ye(this.view),this.toggleReadOnly=ye(this.view),this.toggleMaxlength=ye(this.view)}getValue(){return this.view.state.doc.toString()}setValue(l,t=0,n=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:n,insert:l}})}getSelectedText(){const{from:l,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(l,t)}replaceSelectedText(l,t={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},n){try{if(t.replaceAll){if(this.setValue(l),l.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+l.length>this.maxLength)throw new Error("The input text is too long");const{from:o}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(l)),t.select){const i=o+l.length+t.deviationEnd;this.view.dispatch({selection:{anchor:o+t.deviationStart,head:i}})}this.view.focus()}catch(o){if(o.message==="The input text is too long")$.emit(n,pe,{name:"overlength",message:o.message,data:l});else throw o}}setTabSize(l){this.toggleTabSize([Ze.tabSize.of(l),yn.of(" ".repeat(l))])}setPlaceholder(l){this.togglePlaceholder(kn(l))}focus(l){if(this.view.focus(),!l)return;let t=0,n=0,o=0;switch(l){case"start":break;case"end":{t=n=o=this.getValue().length;break}default:t=l.rangeAnchor||l.cursorPos,n=l.rangeHead||l.cursorPos,o=l.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:$e.create([$e.range(t,n),$e.cursor(o)],1)})}setDisabled(l){this.toggleDisabled([fe.editable.of(!l)])}setReadOnly(l){this.toggleReadOnly([Ze.readOnly.of(l)])}setMaxLength(l){this.maxLength=l,this.toggleMaxlength([Ze.changeFilter.of(t=>t.newDoc.length<=l)])}}const Ni=(e,l)=>{const t=A("editorId"),n=i=>{i instanceof Promise?i.then(a=>{$.emit(t,P,"universal",{generate(){return{targetValue:a}}})}).catch(a=>{}):$.emit(t,P,"universal",{generate(){return{targetValue:i}}})};return i=>{var a,m,f;if(!i.clipboardData)return;if(i.clipboardData.files.length>0){const{files:k}=i.clipboardData;$.emit(t,qe,Array.from(k).filter(p=>/image\/.*/.test(p.type))),i.preventDefault();return}const d=i.clipboardData.getData("text/plain"),c=((a=l.value)==null?void 0:a.view.state.selection.main.to)||0,s=((m=l.value)==null?void 0:m.view.state.doc.lineAt(c).from)||0,g=((f=l.value)==null?void 0:f.view.state.doc.sliceString(s,c))||"",v=/!\[.*\]\(\s*$/.test(g),y=/!\[.*\]\((.*)\s?.*\)/.test(d);if(v){const k=e.transformImgUrl(d);n(k),i.preventDefault();return}else if(y){const k=d.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));k?Promise.all(k.map(p=>e.transformImgUrl(p))).then(p=>{n(p.reduce((b,h,C)=>b.replace(k[C],h),d))}):n(d),i.preventDefault();return}if(e.autoDetectCode&&i.clipboardData.types.includes("vscode-editor-data")){const k=JSON.parse(i.clipboardData.getData("vscode-editor-data"));$.emit(t,P,"code",{mode:k.mode,text:i.clipboardData.getData("text/plain")}),i.preventDefault();return}e.maxlength&&d.length+e.modelValue.length>e.maxlength&&$.emit(t,pe,{name:"overlength",message:"The input text is too long",data:d})}},Pi=(e,l)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>($.emit(e,P,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:An,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:T=>($.emit(e,Ge,T.state.doc.toString()),!0),shift:()=>($.emit(e,P,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>($.emit(e,P,"underline"),!0),shift:()=>($.emit(e,P,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>($.emit(e,P,"italic"),!0),shift:()=>($.emit(e,at,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>($.emit(e,P,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>($.emit(e,P,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>($.emit(e,P,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>($.emit(e,P,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>($.emit(e,P,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>($.emit(e,P,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>($.emit(e,P,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>($.emit(e,P,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>($.emit(e,P,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>($.emit(e,P,"code"),!0),any(T,S){return(S.ctrlKey||S.metaKey)&&S.altKey&&S.code==="KeyC"?($.emit(e,P,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>($.emit(e,at,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>l.noPrettier?!1:($.emit(e,P,"prettier"),!0)},{any:(T,S)=>(S.ctrlKey||S.metaKey)&&S.altKey&&S.shiftKey&&S.code==="KeyT"?($.emit(e,P,"table"),!0):!1},...xn];fe.EDIT_CONTEXT=!1;const Oi=e=>{const l=A("tabWidth"),t=A("editorId"),n=A("theme"),o=R(),i=ve(),a=R(!1),m=new ke,f=new ke,d=new ke,c=new ke,s=new ke,g=Pi(t,e),v=()=>[...g,...wn,...Cn,$n],k={paste:Ni(e,i),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{a.value=!0},compositionend:(h,C)=>{a.value=!1,e.updateModelValue(C.state.doc.toString())},input:h=>{e.onInput&&e.onInput(h);const{data:C}=h;e.maxlength&&e.modelValue.length+C.length>e.maxlength&&$.emit(t,pe,{name:"overlength",message:"The input text is too long",data:C})}},p=[fn.of(v()),c.of(gl()),m.of(mn({codeLanguages:Tn})),fe.lineWrapping,fe.updateListener.of(h=>{h.docChanged&&(e.onChange(h.state.doc.toString()),a.value||e.updateModelValue(h.state.doc.toString()))}),s.of(fe.domEventHandlers(k)),gn()],b=()=>{const h=[...p,f.of(n.value==="light"?Bl:Fl),d.of(jl(e.completions))];return X.codeMirrorExtensions(n.value,h,v(),{editorId:t})};return G(()=>{const h=new fe({doc:e.modelValue,parent:o.value,extensions:[b()]}),C=new Mi(h);i.value=C,setTimeout(()=>{C.setTabSize(l),C.setDisabled(e.disabled),C.setReadOnly(e.readonly),e.placeholder&&C.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&C.setMaxLength(e.maxlength),e.autofocus&&h.focus()},0),$.on(t,{name:eo,callback(){vn(h)}}),$.on(t,{name:to,callback(){hn(h)}}),$.on(t,{name:P,async callback(T,S={}){var x,M;if(T==="image"&&S.transform){const L=e.transformImgUrl(S.url);if(L instanceof Promise)L.then(async E=>{var H;const{text:N,options:O}=await Je(T,i.value,{...S,url:E});(H=i.value)==null||H.replaceSelectedText(N,O,t)}).catch(E=>{});else{const{text:E,options:H}=await Je(T,i.value,{...S,url:L});(x=i.value)==null||x.replaceSelectedText(E,H,t)}}else{const{text:L,options:E}=await Je(T,i.value,S);(M=i.value)==null||M.replaceSelectedText(L,E,t)}}}),$.on(t,{name:oo,callback:pn(T=>{var S;const x={...k},M=Object.keys(k);for(const L in T){const E=L;M.includes(E)?x[E]=(H,N)=>{T[E](H,N),H.defaultPrevented||k[E](H,N)}:x[E]=T[E]}(S=i.value)==null||S.view.dispatch({effects:s.reconfigure(fe.domEventHandlers(x))})})}),$.on(t,{name:no,callback:(T,S)=>{const x=h.state.doc.line(T);h.dispatch(h.state.update({changes:{from:x.from,to:x.to,insert:S}}))}})}),I(n,()=>{var h;(h=i.value)==null||h.view.dispatch({effects:f.reconfigure(n.value==="light"?Bl:Fl)})},{deep:!0}),I(()=>e.completions,()=>{var h;(h=i.value)==null||h.view.dispatch({effects:d.reconfigure(jl(e.completions))})},{deep:!0}),I(()=>e.modelValue,()=>{var h,C;((h=i.value)==null?void 0:h.getValue())!==e.modelValue&&((C=i.value)==null||C.setValue(e.modelValue))}),I(()=>e.placeholder,()=>{var h;(h=i.value)==null||h.setPlaceholder(e.placeholder)}),I(()=>e.disabled,()=>{var h;(h=i.value)==null||h.setDisabled(e.disabled)}),I(()=>e.readonly,()=>{var h;(h=i.value)==null||h.setDisabled(e.readonly)}),I(()=>e.maxlength,()=>{var h;e.maxlength&&((h=i.value)==null||h.setMaxLength(e.maxlength))}),{inputWrapperRef:o,codeMirrorUt:i,resetHistory(){var h,C;(h=i.value)==null||h.view.dispatch({effects:c.reconfigure([])}),(C=i.value)==null||C.view.dispatch({effects:c.reconfigure(gl())})}}},Bi=(e,l,t)=>{const n=ee({resizedWidth:e.inputBoxWidth}),o=ee({width:e.inputBoxWidth}),i=ee({left:e.inputBoxWidth,display:"initial"}),a=R(e.setting.preview||e.setting.htmlPreview),m=c=>{var s,g,v;const y=((s=l.value)==null?void 0:s.offsetWidth)||0,k=((g=l.value)==null?void 0:g.getBoundingClientRect().x)||0;let p=c.x-k;p<He?p=He:p>y-He&&(p=y-He);const b=`${p}px`;o.width=b,i.left=b,n.resizedWidth=b,(v=e.oninputBoxWidthChange)==null||v.call(e,b)},f=()=>{document.addEventListener("mousemove",m)},d=()=>{document.removeEventListener("mousemove",m)};return I([t],()=>{var c,s;(c=t.value)==null||c.addEventListener("mousedown",f),(s=t.value)==null||s.addEventListener("mouseup",d)},{immediate:!0}),he(()=>{var c,s;(c=t.value)==null||c.removeEventListener("mousedown",f),(s=t.value)==null||s.removeEventListener("mouseup",d)}),I(()=>e.inputBoxWidth,c=>{c&&(n.resizedWidth=c,o.width=c,i.left=c)}),I([ue(e.setting,"htmlPreview"),ue(e.setting,"preview"),ue(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(o.width="0%",i.display="none",a.value=!0):!e.setting.htmlPreview&&!e.setting.preview?(o.width="100%",i.display="none",a.value=!1):(o.width=n.resizedWidth,i.display="initial",a.value=!0)},{immediate:!0}),{inputWrapperStyle:o,resizeOperateStyle:i,showPreviewWrapper:a}},Di=j({name:"MDEditorContent",props:Aa,setup(e,l){const t=A("editorId"),n=R(""),o=R(),i=R(),{inputWrapperRef:a,codeMirrorUt:m,resetHistory:f}=Oi(e),{inputWrapperStyle:d,resizeOperateStyle:c,showPreviewWrapper:s}=Bi(e,o,i);return fi(e,n,m),l.expose({getSelectedText(){var g;return(g=m.value)==null?void 0:g.getSelectedText()},focus(g){var v;(v=m.value)==null||v.focus(g)},resetHistory:f,getEditorView(){var g;return(g=m.value)==null?void 0:g.view}}),()=>u("div",{class:`${r}-content${s.value?" has-preview":""}`,ref:o},[u("div",{class:`${r}-input-wrapper`,style:d,ref:a},null),(e.setting.htmlPreview||e.setting.preview)&&u("div",{class:`${r}-resize-operate`,style:c,ref:i},null),s.value&&u(io,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:g=>{n.value=g,e.onHtmlChanged(g)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.catalogVisible&&u(_e,{theme:e.theme,class:`${r}-catalog-editor`,editorId:t,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2},null)])}}),ji=j({props:{modelValue:{type:String,default:""}},setup(e){const l=A("usedLanguageText");return()=>{var t,n;return u("div",{class:`${r}-footer-item`},[u("label",{class:`${r}-footer-label`},[`${(t=l.value.footer)==null?void 0:t.markdownTotal}:`]),u("span",null,[((n=e.modelValue)==null?void 0:n.length)||0])])}}}),Vi={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},disabled:{type:Boolean,default:void 0}},Wi=j({name:`${r}-checkbox`,props:Vi,setup(e){return()=>u("div",{class:[`${r}-checkbox`,e.checked&&`${r}-checkbox-checked`,e.disabled&&`${r}-disabled`],onClick:()=>{e.disabled||e.onChange(!e.checked)}},null)}}),zi={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},Ui=j({props:zi,setup(e){const l=A("usedLanguageText"),t=A("disabled");return()=>{var n;return u("div",{class:[`${r}-footer-item`,t?.value&&`${r}-disabled`]},[u("label",{class:`${r}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(n=l?.value.footer)==null?void 0:n.scrollAuto]),u(Wi,{checked:e.scrollAuto,onChange:e.onScrollAutoChange,disabled:t?.value},null)])}}}),Gi={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},qi=j({name:"MDEditorFooter",props:Gi,setup(e){const l=A("theme"),t=A("language"),n=A("disabled"),o=J(()=>{const a=e.footers.indexOf("="),m=a===-1?e.footers:e.footers.slice(0,a),f=a===-1?[]:e.footers.slice(a,Number.MAX_SAFE_INTEGER);return[m,f]}),i=a=>{var m,f,d,c,s,g;if(Jl.includes(a))switch(a){case"markdownTotal":return u(ji,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&u(Ui,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else if(e.defFooters instanceof Array){const v=e.defFooters[a];return v?Ie(v,{theme:((m=v.props)==null?void 0:m.theme)||l.value,language:((f=v.props)==null?void 0:f.language)||t.value,disabled:((d=v.props)==null?void 0:d.disabled)||n?.value}):""}else if(e.defFooters&&e.defFooters.children instanceof Array){const v=e.defFooters.children[a];return v?Ie(v,{theme:((c=v.props)==null?void 0:c.theme)||l.value,language:((s=v.props)==null?void 0:s.language)||t.value,disabled:((g=v.props)==null?void 0:g.disabled)||n?.value}):""}else return""};return()=>{const a=o.value[0].map(f=>i(f)),m=o.value[1].map(f=>i(f));return u("div",{class:`${r}-footer`},[u("div",{class:`${r}-footer-left`},[a]),u("div",{class:`${r}-footer-right`},[m])])}}}),tt=j({name:"MdEditorV3",props:Pa,emits:Oa,setup(e,l){const{noKatex:t,noMermaid:n,noPrettier:o,noUploadImg:i,noHighlight:a}=e,m=ee({scrollAuto:e.scrollAuto}),f=R(),d=R(),{editorId:c}=_a(e,f),[s,g]=Ha(e,l,{editorId:c}),v=Fa(e,{editorId:c});return Ea(e,l,{editorId:c}),Ia(e),La(e,l,{editorId:c}),Ra(e,l,{editorId:c,catalogVisible:v,setting:s,updateSetting:g,codeRef:d}),he(()=>{$.clear(c)}),()=>{const y=te({props:e,ctx:l},"defToolbars"),k=te({props:e,ctx:l},"defFooters");return u("div",{id:c,class:[r,e.class,e.theme==="dark"&&`${r}-dark`,s.fullscreen||s.pageFullscreen?`${r}-fullscreen`:""],style:e.style,ref:f},[e.toolbars.length>0&&u(di,{noPrettier:o,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:s,updateSetting:g,tableShape:e.tableShape,defToolbars:y,noUploadImg:i,showToolbarName:e.showToolbarName,catalogVisible:v.value,codeTheme:e.codeTheme},null),u(Di,{ref:d,modelValue:e.modelValue,setting:s,mdHeadingId:e.mdHeadingId,noMermaid:n,noPrettier:o,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:t,scrollAuto:m.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:a,updateModelValue:p=>{l.emit("update:modelValue",p)},onChange:p=>{e.onChange&&e.onChange(p),l.emit("onChange",p)},onHtmlChanged:p=>{e.onHtmlChanged&&e.onHtmlChanged(p),l.emit("onHtmlChanged",p)},onGetCatalog:p=>{e.onGetCatalog&&e.onGetCatalog(p),l.emit("onGetCatalog",p)},onBlur:p=>{e.onBlur&&e.onBlur(p),l.emit("onBlur",p)},onFocus:p=>{e.onFocus&&e.onFocus(p),l.emit("onFocus",p)},onInput:p=>{e.onInput&&e.onInput(p),l.emit("onInput",p)},completions:e.completions,catalogVisible:v.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:p=>{e.onDrop&&e.onDrop(p),l.emit("onDrop",p)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:p=>{e.oninputBoxWidthChange&&e.oninputBoxWidthChange(p),l.emit("oninputBoxWidthChange",p)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.footers.length>0&&u(qi,{modelValue:e.modelValue,footers:e.footers,defFooters:k,noScrollAuto:!s.preview&&!s.htmlPreview||s.previewOnly,scrollAuto:m.scrollAuto,onScrollAutoChange:p=>m.scrollAuto=p},null)])}}});tt.install=e=>(e.component(tt.name,tt),e.use(je).use(Pe).use(Ve).use(_e).use(De),e);const Xi={onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},lt=j({name:"NormalFooterToolbar",props:Xi,emits:["onClick"],setup(e,l){return()=>{const t=te({props:e,ctx:l});return u("div",{class:`${r}-footer-item`,onClick:n=>{e.onClick instanceof Function?e.onClick(n):l.emit("onClick",n)}},[t])}}});lt.install=e=>(e.component(lt.name,lt),e);var Vl={exports:{}},V={},it={exports:{}},be={};function fo(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Ki(e,l,t){}function Yi(e,l,t){}var Zi=/javascript\s*\:/img;function Ji(e,l){return Zi.test(l)?"":l}be.whiteList=fo();be.getDefaultWhiteList=fo;be.onAttr=Ki;be.onIgnoreAttr=Yi;be.safeAttrValue=Ji;var Qi={indexOf:function(e,l){var t,n;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,n=e.length;t<n;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var n,o;if(Array.prototype.forEach)return e.forEach(l,t);for(n=0,o=e.length;n<o;n++)l.call(t,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Se=Qi;function er(e,l){e=Se.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,n=!1,o=0,i=0,a="";function m(){if(!n){var c=Se.trim(e.slice(o,i)),s=c.indexOf(":");if(s!==-1){var g=Se.trim(c.slice(0,s)),v=Se.trim(c.slice(s+1));if(g){var y=l(o,a.length,g,v,c);y&&(a+=y+"; ")}}}o=i+1}for(;i<t;i++){var f=e[i];if(f==="/"&&e[i+1]==="*"){var d=e.indexOf("*/",i+2);if(d===-1)break;i=d+1,o=i+1,n=!1}else f==="("?n=!0:f===")"?n=!1:f===";"?n||m():f===`
`&&m()}return Se.trim(a)}var tr=er,Re=be,lr=tr;function Wl(e){return e==null}function or(e){var l={};for(var t in e)l[t]=e[t];return l}function mo(e){e=or(e||{}),e.whiteList=e.whiteList||Re.whiteList,e.onAttr=e.onAttr||Re.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Re.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Re.safeAttrValue,this.options=e}mo.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,n=t.whiteList,o=t.onAttr,i=t.onIgnoreAttr,a=t.safeAttrValue,m=lr(e,function(f,d,c,s,g){var v=n[c],y=!1;if(v===!0?y=v:typeof v=="function"?y=v(s):v instanceof RegExp&&(y=v.test(s)),y!==!0&&(y=!1),s=a(c,s),!!s){var k={position:d,sourcePosition:f,source:g,isWhite:y};if(y){var p=o(c,s,k);return Wl(p)?c+":"+s:p}else{var p=i(c,s,k);if(!Wl(p))return p}}});return m};var nr=mo;(function(e,l){var t=be,n=nr;function o(a,m){var f=new n(m);return f.process(a)}l=e.exports=o,l.FilterCSS=n;for(var i in t)l[i]=t[i];typeof window<"u"&&(window.filterCSS=e.exports)})(it,it.exports);var ct=it.exports,ut={indexOf:function(e,l){var t,n;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,n=e.length;t<n;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var n,o;if(Array.prototype.forEach)return e.forEach(l,t);for(n=0,o=e.length;n<o;n++)l.call(t,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var l=/\s|\n|\t/,t=l.exec(e);return t?t.index:-1}},ar=ct.FilterCSS,ir=ct.getDefaultWhiteList,Ue=ut;function go(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var vo=new ar;function rr(e,l,t){}function sr(e,l,t){}function cr(e,l,t){}function ur(e,l,t){}function ho(e){return e.replace(fr,"&lt;").replace(mr,"&gt;")}function dr(e,l,t,n){if(t=Co(t),l==="href"||l==="src"){if(t=Ue.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(l==="background"){if(Me.lastIndex=0,Me.test(t))return""}else if(l==="style"){if(zl.lastIndex=0,zl.test(t)||(Ul.lastIndex=0,Ul.test(t)&&(Me.lastIndex=0,Me.test(t))))return"";n!==!1&&(n=n||vo,t=n.process(t))}return t=$o(t),t}var fr=/</g,mr=/>/g,gr=/"/g,vr=/&quot;/g,hr=/&#([a-zA-Z0-9]*);?/gim,pr=/&colon;?/gim,br=/&newline;?/gim,Me=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,zl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Ul=/u\s*r\s*l\s*\(.*/gi;function po(e){return e.replace(gr,"&quot;")}function bo(e){return e.replace(vr,'"')}function yo(e){return e.replace(hr,function(t,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function ko(e){return e.replace(pr,":").replace(br," ")}function wo(e){for(var l="",t=0,n=e.length;t<n;t++)l+=e.charCodeAt(t)<32?" ":e.charAt(t);return Ue.trim(l)}function Co(e){return e=bo(e),e=yo(e),e=ko(e),e=wo(e),e}function $o(e){return e=po(e),e=ho(e),e}function yr(){return""}function kr(e,l){typeof l!="function"&&(l=function(){});var t=!Array.isArray(e);function n(a){return t?!0:Ue.indexOf(e,a)!==-1}var o=[],i=!1;return{onIgnoreTag:function(a,m,f){if(n(a))if(f.isClosing){var d="[/removed]",c=f.position+d.length;return o.push([i!==!1?i:f.position,c]),i=!1,d}else return i||(i=f.position),"[removed]";else return l(a,m,f)},remove:function(a){var m="",f=0;return Ue.forEach(o,function(d){m+=a.slice(f,d[0]),f=d[1]}),m+=a.slice(f),m}}}function wr(e){for(var l="",t=0;t<e.length;){var n=e.indexOf("<!--",t);if(n===-1){l+=e.slice(t);break}l+=e.slice(t,n);var o=e.indexOf("-->",n);if(o===-1)break;t=o+3}return l}function Cr(e){var l=e.split("");return l=l.filter(function(t){var n=t.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),l.join("")}V.whiteList=go();V.getDefaultWhiteList=go;V.onTag=rr;V.onIgnoreTag=sr;V.onTagAttr=cr;V.onIgnoreTagAttr=ur;V.safeAttrValue=dr;V.escapeHtml=ho;V.escapeQuote=po;V.unescapeQuote=bo;V.escapeHtmlEntities=yo;V.escapeDangerHtml5Entities=ko;V.clearNonPrintableCharacter=wo;V.friendlyAttrValue=Co;V.escapeAttrValue=$o;V.onIgnoreTagStripAll=yr;V.StripTagBody=kr;V.stripCommentTag=wr;V.stripBlankChar=Cr;V.attributeWrapSign='"';V.cssFilter=vo;V.getDefaultCSSWhiteList=ir;var Xe={},ge=ut;function $r(e){var l=ge.spaceIndex(e),t;return l===-1?t=e.slice(1,-1):t=e.slice(1,l+1),t=ge.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function Tr(e){return e.slice(0,2)==="</"}function Sr(e,l,t){var n="",o=0,i=!1,a=!1,m=0,f=e.length,d="",c="";e:for(m=0;m<f;m++){var s=e.charAt(m);if(i===!1){if(s==="<"){i=m;continue}}else if(a===!1){if(s==="<"){n+=t(e.slice(o,m)),i=m,o=m;continue}if(s===">"||m===f-1){n+=t(e.slice(o,i)),c=e.slice(i,m+1),d=$r(c),n+=l(i,n.length,d,c,Tr(c)),o=m+1,i=!1;continue}if(s==='"'||s==="'")for(var g=1,v=e.charAt(m-g);v.trim()===""||v==="=";){if(v==="="){a=s;continue e}v=e.charAt(m-++g)}}else if(s===a){a=!1;continue}}return o<f&&(n+=t(e.substr(o))),n}var xr=/[^a-zA-Z0-9\\_:.-]/gim;function Ar(e,l){var t=0,n=0,o=[],i=!1,a=e.length;function m(g,v){if(g=ge.trim(g),g=g.replace(xr,"").toLowerCase(),!(g.length<1)){var y=l(g,v||"");y&&o.push(y)}}for(var f=0;f<a;f++){var d=e.charAt(f),c,s;if(i===!1&&d==="="){i=e.slice(t,f),t=f+1,n=e.charAt(t)==='"'||e.charAt(t)==="'"?t:_r(e,f+1);continue}if(i!==!1&&f===n){if(s=e.indexOf(d,f+1),s===-1)break;c=ge.trim(e.slice(n+1,s)),m(i,c),i=!1,f=s,t=f+1;continue}if(/\s|\n|\t/.test(d))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(s=Er(e,f),s===-1){c=ge.trim(e.slice(t,f)),m(c),i=!1,t=f+1;continue}else{f=s-1;continue}else if(s=Ir(e,f-1),s===-1){c=ge.trim(e.slice(t,f)),c=Gl(c),m(i,c),i=!1,t=f+1;continue}else continue}return t<e.length&&(i===!1?m(e.slice(t)):m(i,Gl(ge.trim(e.slice(t))))),ge.trim(o.join(" "))}function Er(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="="?l:-1}}function _r(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="'"||t==='"'?l:-1}}function Ir(e,l){for(;l>0;l--){var t=e[l];if(t!==" ")return t==="="?l:-1}}function Lr(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Gl(e){return Lr(e)?e.substr(1,e.length-2):e}Xe.parseTag=Sr;Xe.parseAttr=Ar;var Hr=ct.FilterCSS,re=V,To=Xe,Fr=To.parseTag,Rr=To.parseAttr,We=ut;function Ne(e){return e==null}function Mr(e){var l=We.spaceIndex(e);if(l===-1)return{html:"",closing:e[e.length-2]==="/"};e=We.trim(e.slice(l+1,-1));var t=e[e.length-1]==="/";return t&&(e=We.trim(e.slice(0,-1))),{html:e,closing:t}}function Nr(e){var l={};for(var t in e)l[t]=e[t];return l}function Pr(e){var l={};for(var t in e)Array.isArray(e[t])?l[t.toLowerCase()]=e[t].map(function(n){return n.toLowerCase()}):l[t.toLowerCase()]=e[t];return l}function So(e){e=Nr(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag,e.onIgnoreTag=re.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Pr(e.whiteList||e.allowList):e.whiteList=re.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":re.attributeWrapSign,e.onTag=e.onTag||re.onTag,e.onTagAttr=e.onTagAttr||re.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||re.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||re.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||re.safeAttrValue,e.escapeHtml=e.escapeHtml||re.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Hr(e.css))}So.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,n=t.whiteList,o=t.onTag,i=t.onIgnoreTag,a=t.onTagAttr,m=t.onIgnoreTagAttr,f=t.safeAttrValue,d=t.escapeHtml,c=l.attributeWrapSign,s=l.cssFilter;t.stripBlankChar&&(e=re.stripBlankChar(e)),t.allowCommentTag||(e=re.stripCommentTag(e));var g=!1;t.stripIgnoreTagBody&&(g=re.StripTagBody(t.stripIgnoreTagBody,i),i=g.onIgnoreTag);var v=Fr(e,function(y,k,p,b,h){var C={sourcePosition:y,position:k,isClosing:h,isWhite:Object.prototype.hasOwnProperty.call(n,p)},T=o(p,b,C);if(!Ne(T))return T;if(C.isWhite){if(C.isClosing)return"</"+p+">";var S=Mr(b),x=n[p],M=Rr(S.html,function(L,E){var H=We.indexOf(x,L)!==-1,N=a(p,L,E,H);return Ne(N)?H?(E=f(p,L,E,s),E?L+"="+c+E+c:L):(N=m(p,L,E,H),Ne(N)?void 0:N):N});return b="<"+p,M&&(b+=" "+M),S.closing&&(b+=" /"),b+=">",b}else return T=i(p,b,C),Ne(T)?d(b):T},d);return g&&(v=g.remove(v)),v};var Or=So;(function(e,l){var t=V,n=Xe,o=Or;function i(m,f){var d=new o(f);return d.process(m)}l=e.exports=i,l.filterXSS=i,l.FilterXSS=o,function(){for(var m in t)l[m]=t[m];for(var f in n)l[f]=n[f]}(),typeof window<"u"&&(window.filterXSS=e.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(Vl,Vl.exports);export{tt as E,_e as M,De as a};
