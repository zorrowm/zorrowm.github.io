import{d as C,r as u,o as D,a as w,b as l,e as c,F as y,a9 as M,a1 as S,k as x,f as E,aa as B,a6 as V,af as z,$}from"./@vue-exp-CzdoyapG.js";import{W as n,b}from"./xframelib-exp-uSJ3EBow.js";import{m as L,i as A,j as O,M as d,_ as R}from"./index-DylLUN-r.js";import{b as U}from"./vue-router-exp-B23Vo4Jw.js";function j(o){o.selected=!o.selected}function H(o){n.LayerManager.removeLayerItem("artificialLayer")}function T(o,i,f){n.LayerManager.addLayerItem({id:o,name:i},f)}const k=Object.freeze(Object.defineProperty({__proto__:null,AddLayerItem:T,ControlSkyVisible:j,RemoveLayerItem:H},Symbol.toStringTag,{value:"Module"})),F={class:"menuBar"},N=["title","onClick"],P=C({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:L},iconColor:{type:String,default:"#f00"},itemSize:{type:String,default:"50px"}},setup(o){z(e=>({"21bb504e":o.itemSize+10,b1972080:f.value,b990f94a:o.itemSize}));const i=o,f=u(L.length),p=U(),r=u(new Map);function v(e){switch(e.type){case d.URL:window.open(e.path,"_blank");break;case d.Route:if(e.blank){if(e.path){let t=p.resolve({path:e.path});window.open(t.href,"_blank")}}else e.path&&p.push({path:e.path});break;case d.Action:const a=e.path;a&&k[a]&&(k[a](e),e.selected!=null&&(e.selected=!e.selected,r.value.set(e.name,e.selected)));break;case d.Widget:if(e.path){const t=n.LayoutMap.get(i.layoutID);if(!t){n.Message.warn(`LayoutID:${i.layoutID}的Manager不存在`);return}g(t,e),e.selected=!e.selected,r.value.set(e.name,e.selected)}else n.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function g(e,a){a.path&&(a.selected?(a.unload?(n.Logger().info("卸载widget: "+a.path),e.unloadWidget(a.path)):(n.Logger().info("隐藏widget: "+a.path),e.changeWidgetVisible(a.path,!1)),a.children&&a.children.forEach(t=>{t.selected&&(n.Logger().info(`递归控制${a.path}的子Widget:`+t.path),g(e,t),t.selected=!t.selected)})):e.isWidgetLoaded(a.path)?(n.Logger().info("显示widget: "+a.path),e.changeWidgetVisible(a.path,!0)):(e.loadWidget(a.path),n.Logger().info("加载Widget："+a.path)))}function _(e){return r.value?.has(e.name)&&r.value.get(e.name)?"menuBarItem active":"menuBarItem"}function h(e){if(e.layoutID===i.layoutID){const a=e.widgetID,t=i.menuData.find(s=>s.type===0&&s.path===a&&s.unload!=!1);t&&(t.selected=!1,r.value.delete(t.name))}}return D(()=>{A(b.WidgetUnLoadedEvent,h)}),w(()=>{O(b.WidgetUnLoadedEvent,h)}),(e,a)=>{const t=$("Icon");return l(),c("ul",F,[(l(!0),c(y,null,M(o.menuData,(s,W)=>(l(),c("li",{key:W,class:S(_(s))},[x("span",{title:s.name,onClick:G=>v(s)},[s.icon?(l(),E(t,{key:0,icon:s.icon,color:o.iconColor},null,8,["icon","color"])):(l(),c(y,{key:1},[B(V(s.name),1)],64))],8,N)],2))),128))])}}}),Y=R(P,[["__scopeId","data-v-daa10b1c"]]);export{Y as C};
