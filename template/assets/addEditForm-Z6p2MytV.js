import{b_ as y,bZ as C,bQ as D,bU as S,ci as E,c6 as T,cr as R,bw as j,cm as O}from"./vendor-B1f7FUIB.js";import{D as m}from"./DBService-CNScdGN7.js";import{i as q,j as N,k as g,_ as H}from"./index-CvUQtR9N.js";import{T as b}from"./TableEvent-Bxu_GHGl.js";import{d as B,r as F,w as P,o as M,a as L,b as Z,f as z,a3 as U,j as n,l as d,ab as A,k as G,v as J}from"./@vue-exp-DMKPrOh0.js";import"./@hprose-exp-BEudjurc.js";import"./pdfjs-dist-exp-C7mOU4gj.js";import"./xframelib-exp-B9KgMBHw.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-5llPk3YT.js";import"./vue-router-exp-DWvvxSx9.js";const K=B({name:"addEditForm"}),W=B({...K,props:{data:y([Object]).def({}),extra:C().isRequired},setup(c,{expose:e}){e();const i="addEditForm",o=c,t=F({});P(()=>o.data,a=>{a?t.value={...a}:t.value={}},{immediate:!0,deep:!0});function r(a){a?h():t.value={}}M(()=>{q(i,r)}),L(()=>{N(i,r)});let l;const p=F(null),x=F(null);function k(){x.value?.pickFiles()}function V(a){const s=a[0],u=new FileReader;u.onload=function(f){t.value.picture=f.target.result},u.readAsDataURL(s)}function I(){p.value&&p.value.pickFiles()}function Q(a){const s=a[0],u=s.name,f=new FileReader;f.onload=function(v){let _=null;typeof v.target.result=="object"?_=new Blob([v.target.result]):_=v.target.result,l={name:u,content:_}},f.readAsArrayBuffer(s)}function h(){o.extra.title==="新建"?m.addItem(t.value).then(a=>{a&&l&&m.saveProfile(a,l[0]).then(()=>{l=void 0}),g(b.RefeshTable,void 0)}):m.updateItem(t.value.id,t.value).then(()=>{l?m.saveProfile(t.value.id,l).then(()=>{l=void 0,g(b.RefeshTable,void 0)}):g(b.RefeshTable,void 0)})}const w={name:i,props:o,formRef:t,OkCancelHandler:r,get uploadFiles(){return l},set uploadFiles(a){l=a},profileUploader:p,imgUploader:x,doImageUpload:k,pictureUpload:V,doUpload:I,fileUpload:Q,onSubmit:h};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),X={class:"row q-col-gutter-x-md dialog_form q-pa-md"},Y={class:"col-6"},$={class:"col-6"},ee={class:"col-12"},oe={class:"col-12"};function le(c,e,i,o,t,r){return Z(),z(O,{class:"modalContent column"},{default:U(()=>[n(D,{class:"col"},{default:U(()=>[d("div",X,[d("div",Y,[d("h5",null,[n(S,{name:"star",color:"red"}),e[2]||(e[2]=A("姓名： "))]),n(E,{outlined:"",dense:"",modelValue:o.formRef.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.formRef.name=l),type:"text"},null,8,["modelValue"])]),d("div",$,[e[3]||(e[3]=d("h5",null,"年龄：",-1)),n(E,{outlined:"",dense:"",modelValue:o.formRef.age,"onUpdate:modelValue":e[1]||(e[1]=l=>o.formRef.age=l),type:"text"},null,8,["modelValue"])]),d("div",ee,[e[4]||(e[4]=d("h5",null,"个人照片",-1)),n(T,{src:o.formRef.picture??"img/noimage.gif","spinner-color":"white",style:{height:"80px","max-width":"80px"},onClick:o.doImageUpload},null,8,["src"]),e[5]||(e[5]=A()),n(R,{ref:"imgUploader","max-files":1,class:"hidden",accept:"image/*","field-name":"file",onAdded:o.pictureUpload},null,512)]),d("div",oe,[e[6]||(e[6]=d("h5",null,"上传简历",-1)),G(n(j,{"no-wrap":"",label:"上传",icon:"mdi-cloud-upload-outline",color:"primary",onClick:o.doUpload},{default:U(()=>[n(R,{ref:"profileUploader","max-files":1,class:"hidden",accept:".doc, .docx, .pdf","field-name":"file",onAdded:o.fileUpload},null,512)]),_:1},512),[[J,c.$q.screen.gt.sm]])])])]),_:1})]),_:1})}const pe=H(W,[["render",le],["__scopeId","data-v-4dc8d530"],["__file","addEditForm.vue"]]);export{pe as default};
