import{u as J,e as I,c as R,i as K,j as S,k as h,m as b,h as X}from"./quasar-exp-BsaNoQ7w.js";import{F as Y}from"./FullScreen-CiM9rot9.js";import{D as Z}from"./DarkMode-CfCe27xz.js";import{cy as $}from"./vendor-DJm_4oaR.js";import{n as ee,b as te,u as oe,p as L,i as ae,j as ne,_ as le}from"./index-BQ7ovaqR.js";import{B as w}from"./xframelib-exp-CMLeiWD4.js";import{S as F}from"./SystemsEvent-DUQCZw_Q.js";import{a as se,d as T}from"./WidgetsTool-TGcRel5R.js";import{u as ie,b as re}from"./vue-router-exp-CO9L2VdX.js";import{g as D,P as ue}from"./PageMenu-DHOqdaIr.js";import{d as de,r as i,w as ce,c as me,o as ge,a as fe,e as B,l as t,j as o,a7 as c,g as C,a1 as v,f as m,a4 as n,a0 as pe,b as r,ac as k}from"./@vue-exp-Bws36Ke9.js";import"./lottie-web-exp-CIY4INm7.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";import"./urlUtils-BslGeNE1.js";const _e=de({__name:"PortalHeaderTitleWidget",setup(E,{expose:a}){a();const u=i([]),e=ee();D(e,u.value);const g=J(),y=i(w.Config.UI?.SiteTitle),l=te(),d=oe();d.id&&D(L.children,u.value);const{leftCollapsed:P}=$(l),H=i(l.headerSetting.centerTitle),Q=i(l.headerSetting.showFullScreen),N=i(l.headerSetting.showCollapseIcon);function O(){l.toggleCollapse()}const U=i(window.document.documentElement),f=ie(),M=re(),p=i(f.name);ce(()=>f.name,s=>{s&&(p.value=s.toString())});function W(s){return p.value===s?"border-bottom:solid 3px #33f":"border-bottom:unset;"}const q=()=>{g.dialog({title:"退出",message:"您确定要退出登录吗？",cancel:!0}).onOk(()=>{d.clear(),w.Message.msg("成功退出登录"),window.open(window.location.pathname,"_self")}).onCancel(()=>{})},j=me(()=>!w.Config.UI?.IsNoLogin&&d.name);function A(){T({modalID:"changeMyPWD",extraData:{title:"修改密码"},width:500,rowData:void 0})}function V(){M.push({path:"/"})}function z(){T({modalID:"loginModal",extraData:{title:"内部管理系统"},rowData:{},width:700})}function _(){se({modalID:"loginModal"}),D(L.children,u.value)}ge(()=>{ae(F.UserLoginSuccess,_)}),fe(()=>{ne(F.UserLoginSuccess,_)});const x={menuList:u,menuRoutes:e,$q:g,siteTitle:y,appState:l,userState:d,leftCollapsed:P,iscenterTitle:H,showFullScreen:Q,showCollapseIcon:N,toggleCollapse:O,fullScreenElem:U,route:f,router:M,nameRef:p,getRightStyle:W,doLogout:q,isNOLogin:j,showUserModal:A,goBackHome:V,showLoginDialog:z,onSuccessHandler:_,FullScreen:Y,DarkMode:Z,get PageMenu(){return ue}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),Se={class:"test11"},he={class:"topHeaderWidget"},we={key:0},De={class:"rightmenu"},Ce={class:"absolute-top-right q-ma-md",style:{width:"140px"}},ve={class:"q-gutter-md row items-center no-wrap"},ke={style:{"text-transform":"none"}};function ye(E,a,u,e,g,y){const l=pe("Icon");return r(),B("div",Se,[t("div",he,[o(e.PageMenu,{data:e.menuList,class:"q-mx-md"},null,8,["data"]),t("div",{class:"centerTitle",onClick:e.goBackHome},[e.iscenterTitle?(r(),B("span",we,c(e.siteTitle),1)):C("",!0),a[0]||(a[0]=t("div",{class:"title"},"Worldwide Coordinate Systems Online Service",-1))]),t("ul",De,[t("li",null,[t("a",{href:"/#/epsg/4326",style:v(e.getRightStyle("epsg-info"))},"EPSG详情",4)]),t("li",null,[t("a",{href:"/#/index",style:v(e.getRightStyle("transform"))},"坐标转换",4)]),t("li",null,[t("a",{href:"/#/api",style:v(e.getRightStyle("api"))},"API接口",4)])])]),t("div",Ce,[t("div",ve,[t("span",null,[e.showCollapseIcon?(r(),m(l,{key:0,icon:e.leftCollapsed?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined",onClick:e.toggleCollapse},null,8,["icon"])):C("",!0)]),e.showFullScreen&&e.$q.screen.gt.sm?(r(),m(e.FullScreen,{key:0,target:e.fullScreenElem},null,8,["target"])):C("",!0),o(e.DarkMode),e.isNOLogin?(r(),m(I,{key:2,flat:"","text-color":"white"},{default:n(()=>[t("span",ke,c(e.userState.name),1),o(X,null,{default:n(()=>[o(K,{dense:""},{default:n(()=>[o(S,null,{default:n(()=>[o(h,null,{default:n(()=>[t("div",null,[a[2]||(a[2]=k(" 角色： ")),a[3]||(a[3]=t("br",null,null,-1)),t("strong",null,c(e.userState.DefaultMaxRole),1)])]),_:1})]),_:1}),o(b),o(S,{clickable:"",class:"outlist"},{default:n(()=>[o(h,{onClick:e.showUserModal},{default:n(()=>[t("div",null,[o(l,{icon:"ant-design:info-circle-outlined"}),a[4]||(a[4]=t("span",null,"修改密码",-1))])]),_:1})]),_:1}),o(b),o(S,{clickable:"",class:"outlist"},{default:n(()=>[o(h,{onClick:e.doLogout},{default:n(()=>[t("div",null,[o(l,{icon:"ant-design:logout-outlined"}),a[5]||(a[5]=t("span",null,"退出登录",-1))])]),_:1})]),_:1})]),_:1})]),_:1}),o(R,null,{default:n(()=>[k("角色:"+c(e.userState.DefaultMaxRole),1)]),_:1})]),_:1})):(r(),m(I,{key:1,dense:"",flat:"",onClick:e.showLoginDialog},{default:n(()=>[o(l,{icon:"grommet-icons:login"}),o(R,null,{default:n(()=>a[1]||(a[1]=[k("用户登录")])),_:1})]),_:1}))])])])}const qe=le(_e,[["render",ye],["__scopeId","data-v-a4b58946"],["__file","PortalHeaderTitleWidget.vue"]]);export{qe as default};
