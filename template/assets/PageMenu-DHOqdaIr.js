import{i as C,j as L,k as M,G as A,m as B,O as Q,e as U}from"./quasar-exp-BsaNoQ7w.js";import{O}from"./urlUtils-BslGeNE1.js";import{b as V,u as W}from"./vue-router-exp-CO9L2VdX.js";import{B as w}from"./xframelib-exp-CMLeiWD4.js";import{d as j,r as R,b as s,e as f,F as v,ab as x,f as b,a4 as k,j as S,k as q,a2 as g,ac as D,a7 as H}from"./@vue-exp-Bws36Ke9.js";import{_ as F}from"./index-BQ7ovaqR.js";var p=(l=>(l[l.Widget=0]="Widget",l[l.Route=1]="Route",l[l.URL=2]="URL",l[l.Action=3]="Action",l))(p||{});function N(l,c=[]){return l.forEach(r=>{if(r.children){const t={label:r.meta?.title??"无",children:new Array};c.push(t),N(r.children,t.children)}else c.push({label:r.meta?.title??"无",kind:1,name:r.name})}),c}const z=j({__name:"PageMenu",props:{data:{type:Array,required:!0}},setup(l,{expose:c}){c();const r=l,t=R(r.data),d=V(),i=W();function a(e){if(e.children){let u=!1;if(e.children.forEach(h=>{if(h.name==i.name||h.path===i.path){u=!0;return}}),u)return" pagemenuActive"}else if(e.name==i.name||e.path===i.path)return"pagemenuActive";return""}const n=R();function o(e,u){const h=e.label;if(n.value)n.value.label!=h&&(n.value.state=!1),n.value=e,e.state=u;else{n.value=e,e.state=u;return}}function y(e){if(!(!e||e.children)&&(e.path||e.name))switch(e.kind){case void 0:case p.Route:e.blank?O(d,e.path,{}):e.name?d.push({name:e.name}):e.path&&d.push({path:e.path});break;case p.URL:window.open(e.path,"_blank");break;case p.Action:w.EventBus.emit("IPageMenu.Action",e);break;case p.Widget:w.EventBus.emit("LayoutLoadWidget",e);break}}const _={props:r,dataRef:t,router:d,route:i,getSelectedStyle:a,currentItem:n,setShowState:o,menuClickHandler:y};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),G={class:"row gt-xs q-py-md q-gutter-xs"};function P(l,c,r,t,d,i){return s(),f("div",G,[(s(!0),f(v,null,x(t.dataRef,(a,n)=>(s(),f(v,{key:a.label},[a.children?(s(),b(Q,{key:0,"model-value":a.state,"onUpdate:modelValue":o=>a.state=o,"transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:a.label,class:g([t.getSelectedStyle(a),"pageMenuItem"]),onMouseover:o=>t.setShowState(a,!0)},{default:k(()=>[S(C,{style:{"min-width":"100px"},onMouseover:o=>t.setShowState(a,!0),onMouseleave:o=>t.setShowState(a,!1)},{default:k(()=>[(s(!0),f(v,null,x(a.children,(o,y)=>(s(),f(v,{key:o.label},[q((s(),b(L,{clickable:"",class:g([t.getSelectedStyle(o),"pageMenuItem"]),onClick:_=>t.menuClickHandler(o)},{default:k(()=>[S(M,null,{default:k(()=>[D(H(o.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[A]]),S(B)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"])):(s(),b(U,{key:1,flat:"",label:a.label,class:g([t.getSelectedStyle(a),"pageMenuItem"]),onClick:o=>t.menuClickHandler(a),onMouseover:o=>t.setShowState(a,!1)},null,8,["label","class","onClick","onMouseover"]))],64))),128))])}const $=F(z,[["render",P],["__file","PageMenu.vue"]]);export{p as E,$ as P,N as g};
