import{d as v,ag as S,r as b,$ as w,b as d,e as g,V as L,aa as x,a1 as W,l as M,f as B,ab as D,a6 as V}from"./@vue-exp-DMKPrOh0.js";import{B as s}from"./xframelib-exp-B9KgMBHw.js";import{m as k,M as h,_ as z}from"./index-CvUQtR9N.js";import{b as E}from"./vue-router-exp-DWvvxSx9.js";function $(o){o.selected=!o.selected}function A(o){s.LayerManager.removeLayerItem("artificialLayer")}function R(o,p,i){s.LayerManager.addLayerItem({id:o,name:p},i)}const C=Object.freeze(Object.defineProperty({__proto__:null,AddLayerItem:R,ControlSkyVisible:$,RemoveLayerItem:A},Symbol.toStringTag,{value:"Module"})),j=v({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:k},iconColor:{type:String,default:"#f00"},itemSize:{type:String,default:"50px"}},setup(o,{expose:p}){p(),S(e=>({"91172c2e":o.itemSize+10,"251a17b0":c.value,"6946674b":o.itemSize}));const i=o,c=b(k.length),f=E(),_=new Map,n=b(_);function r(e){switch(e.type){case h.URL:window.open(e.path,"_blank");break;case h.Route:if(e.blank){if(e.path){let t=f.resolve({path:e.path});window.open(t.href,"_blank")}}else e.path&&f.push({path:e.path});break;case h.Action:const a=e.path;a&&C[a]&&C[a](e);break;case h.Widget:if(e.path){const t=s.LayoutMap.get(i.layoutID);if(!t){s.Message.warn(`LayoutID:${i.layoutID}的Manager不存在`);return}l(t,e),e.selected=!e.selected,n.value.set(e.name,e.selected)}else s.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function l(e,a){a.path&&(a.selected?(a.unload?(s.Logger().info("卸载widget: "+a.path),e.unloadWidget(a.path)):(s.Logger().info("隐藏widget: "+a.path),e.changeWidgetVisible(a.path,!1)),a.children&&a.children.forEach(t=>{t.selected&&(s.Logger().info(`递归控制${a.path}的子Widget:`+t.path),l(e,t),t.selected=!t.selected)})):e.isWidgetLoaded(a.path)?(s.Logger().info("显示widget: "+a.path),e.changeWidgetVisible(a.path,!0)):(e.loadWidget(a.path),s.Logger().info("加载Widget："+a.path)))}function u(e){return n.value?.has(e.name)&&n.value.get(e.name)?"menuBarItem active":"menuBarItem"}const y={props:i,itemLength:c,router:f,selectedMapList:_,selectedMap:n,itemClick:r,controlMenuWidget:l,getClass:u};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),O={class:"menuBar"},T=["title","onClick"];function N(o,p,i,c,f,_){const n=w("Icon");return d(),g("ul",O,[(d(!0),g(L,null,x(i.menuData,(r,l)=>(d(),g("li",{key:l,class:W(c.getClass(r))},[M("span",{title:r.name,onClick:u=>c.itemClick(r)},[r.icon?(d(),B(n,{key:0,icon:r.icon,color:i.iconColor},null,8,["icon","color"])):(d(),g(L,{key:1},[D(V(r.name),1)],64))],8,T)],2))),128))])}const G=z(j,[["render",N],["__scopeId","data-v-7c2890a9"],["__file","index.vue"]]);export{G as C};
