import{d as N,V as j,O,i as U,j as Y,k as x,a1 as H,M as W,a2 as D,e as G}from"./quasar-exp-BsaNoQ7w.js";import{A as J,P as K,T as X}from"./TopFunBar-DoB4Gx3Q.js";import{B as Z}from"./BaseContent-Bj_GXZNN.js";import{b as $,i as ee,j as ae,_ as te}from"./index-BQ7ovaqR.js";import{B as A,p as ne}from"./xframelib-exp-CMLeiWD4.js";import{D as p}from"./DBService-CSAZW8Q8.js";import{T as E}from"./TableEvent-Bxu_GHGl.js";import{d as oe}from"./WidgetsTool-TGcRel5R.js";import{r as d,d as le,c as Q,w as re,o as ie,a as se,b as m,f as M,a4 as n,j as l,k as ue,e as b,F as de,ab as ce,ac as me,a7 as fe,v as ge,l as pe,a1 as be}from"./@vue-exp-Bws36Ke9.js";import"./vendor-DJm_4oaR.js";import"./lottie-web-exp-CIY4INm7.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./vue-router-exp-CO9L2VdX.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";const we=[{value:"preview",name:"查看",icon:"ant-design:eye-outlined"},{value:"edit",name:"编辑",icon:"ant-design:form-outlined"},{value:"delete",name:"删除",icon:"ant-design:delete-outlined",isdelete:!0}],ve=[{name:"查看关联对象",icon:"ant-design:apartment-outlined",value:"relateView"},{name:"发布服务",icon:"ant-design:aim-outlined",value:"publishService"},{name:"清理缓存",icon:"ant-design:clear-outlined",value:"clearCache"}];function he(){return we}function _e(){return ve}const R=[{name:"id",align:"center",label:"索引",field:"id",sortable:!0},{name:"name",align:"center",label:"姓名",field:"name"},{name:"age",align:"center",label:"年龄",field:"age",sortable:!0},{name:"picture",required:!0,label:"照片",align:"center",field:"picture"},{name:"profile",required:!0,label:"档案",align:"center",field:"pid"},{name:"modifytime",required:!0,label:"更新时间",align:"center",field:"lastModified",format:i=>i?N.formatDate(i,"YYYY-MM-DD"):"无",sortable:!0},{name:"opt",align:"center",label:"操作",field:"opt"}],L=d([]);R.forEach(({name:i})=>{L.value.push(i)});const ke=le({name:"StandardTable",__name:"index",setup(i,{expose:s}){s();const w=$(),e=Q(()=>w.showTabMenu?"padding-bottom: 30px;":""),f=d({sortBy:"id",descending:!1,page:1,rowsPerPage:10}),c=d(1),a=d(0),u=Q(()=>Math.ceil(a.value/f.value.rowsPerPage)),v=d(""),h=d([]),_=d("");re(()=>c.value,t=>{r()});function k(t,o){let g="",y;switch(t){case"add":g="addEditForm",y={title:"新建",footer:"true"};break;case"edit":g="addEditForm",y={title:"编辑",footer:"true"};break}g&&oe({modalID:g,extraData:y,rowData:o,width:700})}function V(t){return[...he()]}function q(t){return _e()}const F=(t,o)=>{switch(A.Logger().trace("表格菜单点击",t,o),t){case"preview":break;case"edit":S(o);break;case"delete":p.deleteItem(o.id).then(g=>{r(),A.Message.info("删除成功")});break}},I=(t,o)=>{switch(t){case"searchWord":_.value=o,r();break;case"creatNew":P();break;case"batchDelete":B();break;case"refresh":r();break}},C=d([]);async function r(t=void 0){t&&(t.page&&(c.value=t.page),t.pageSize&&(f.value.rowsPerPage=t.pageSize)),a.value=await p.getCount(),c.value>u.value&&(c.value=u.value),p.getPageList(_.value,c.value,f.value.rowsPerPage).then(o=>{C.value=o})}function B(){h.value.length>0&&p.batchDelete(h.value).then(()=>r())}function P(){k("add",{name:"",age:10})}function S(t){k("edit",t)}async function z(t){const o=await p.getProfile(t);o&&ne(o.file,o.name)}ie(()=>{ee(E.RefeshTable,r),r()}),se(()=>{ae(E.RefeshTable,r)});const T={appState:w,sizeStyle:e,pagination:f,currentPage:c,rowSum:a,pagesNumber:u,filter:v,selected:h,keywordRef:_,showModal:k,getRightDefaultMenus:V,getRightMoreMenus:q,doActionClick:F,topBarClick:I,rows:C,query:r,batchDelete:B,add:P,edit:S,doDowload:z,ActionMenu:J,BaseContent:Z,get columns(){return R},get visibleColumns(){return L},PaginationLine:K,TopFunBar:X};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),ye=["src"],De={key:1},Me={key:1},Ce={class:"full-width row justify-end"};function Be(i,s,w,e,f,c){return m(),M(e.BaseContent,{class:"q-pa-sm",style:be(e.sizeStyle)},{default:n(()=>[l(j,{class:"fit sticky-header-table",selection:"multiple",selected:e.selected,"onUpdate:selected":s[1]||(s[1]=a=>e.selected=a),dense:i.$q.screen.lt.md,separator:"cell",flat:"",bordered:"",rows:e.rows,filter:e.filter,columns:e.columns,"row-key":"name","visible-columns":e.visibleColumns,pagination:e.pagination,"onUpdate:pagination":s[2]||(s[2]=a=>e.pagination=a)},{top:n(a=>[l(e.TopFunBar,{target:a,batch:e.selected.length===0,title:"服务列表",onTopBarClick:e.topBarClick},{rightAppend:n(()=>[ue(l(O,{outlined:"",label:"自选列",icon:"view_list","no-wrap":""},{default:n(()=>[l(U,null,{default:n(()=>[(m(!0),b(de,null,ce(e.columns,u=>(m(),M(Y,{tag:"label",key:u.name},{default:n(()=>[l(x,{avatar:""},{default:n(()=>[l(H,{modelValue:e.visibleColumns,"onUpdate:modelValue":s[0]||(s[0]=v=>e.visibleColumns=v),val:u.name},null,8,["modelValue","val"])]),_:2},1024),l(x,null,{default:n(()=>[l(W,null,{default:n(()=>[me(fe(u.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512),[[ge,i.$q.screen.gt.sm]])]),_:2},1032,["target","batch"])]),"body-cell-picture":n(a=>[l(D,{props:a},{default:n(()=>[a.row.picture?(m(),b("img",{key:0,src:a.row.picture,width:"80",height:"80"},null,8,ye)):(m(),b("span",De,"暂无"))]),_:2},1032,["props"])]),"body-cell-profile":n(a=>[l(D,{props:a},{default:n(()=>[a.row.pid?(m(),M(G,{key:0,label:"下载档案",color:"primary",onClick:u=>e.doDowload(a.row.pid)},null,8,["onClick"])):(m(),b("span",Me,"暂无"))]),_:2},1032,["props"])]),"body-cell-opt":n(a=>[l(D,{props:a,"auto-width":!0},{default:n(()=>[l(e.ActionMenu,{currentRow:a.row,onDoActionClick:e.doActionClick,"default-menus":e.getRightDefaultMenus(a.row),"append-menus":e.getRightMoreMenus(a.row)},null,8,["currentRow","default-menus","append-menus"])]),_:2},1032,["props"])]),bottom:n(()=>[pe("div",Ce,[l(e.PaginationLine,{"rows-number":e.rowSum,"rows-per-page":e.pagination.rowsPerPage,max:e.pagesNumber},null,8,["rows-number","rows-per-page","max"])])]),_:1},8,["selected","dense","rows","filter","columns","visible-columns","pagination"])]),_:1},8,["style"])}const Ue=te(ke,[["render",Be],["__file","index.vue"]]);export{Ue as default};
