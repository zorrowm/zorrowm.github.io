import{A as R,F as A,a0 as h,T as I,aa as U,e as Q,a4 as T}from"./quasar-exp-B7YDMHDE.js";import{d as C,r as f,w as D,o as j,a as q,b as N,f as O,a3 as p,i as n,k as l,aa as w,j as S,v as H}from"./@vue-exp-CzdoyapG.js";import{D as s}from"./DBService-DJHD52el.js";import{cE as M,cD as P}from"./vendor-CSzZZ-de.js";import{i as L,j as $,k as c,_ as z}from"./index-DylLUN-r.js";import{T as v}from"./TableEvent-Bxu_GHGl.js";import"./xframelib-exp-uSJ3EBow.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-BLEeEXwl.js";import"./dexie-exp-BSZCzc8U.js";import"./lottie-web-exp-CIY4INm7.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Cbv1lISI.js";import"./vue-router-exp-B23Vo4Jw.js";const G={class:"row q-col-gutter-x-md dialog_form q-pa-md"},J={class:"col-6"},K={class:"col-6"},W={class:"col-12"},X={class:"col-12"},_="addEditForm",Y=C({name:"addEditForm",__name:"addEditForm",props:{data:M([Object]).def({}),extra:P().isRequired},setup(k){const g=k,o=f({});D(()=>g.data,a=>{a?o.value={...a}:o.value={}},{immediate:!0,deep:!0});function b(a){a?B():o.value={}}j(()=>{L(_,b)}),q(()=>{$(_,b)});let d;const r=f(null),x=f(null);function F(){x.value?.pickFiles()}function E(a){const e=a[0],t=new FileReader;t.onload=function(i){o.value.picture=i.target.result},t.readAsDataURL(e)}function V(){r.value&&r.value.pickFiles()}function y(a){const e=a[0],t=e.name,i=new FileReader;i.onload=function(u){let m=null;typeof u.target.result=="object"?m=new Blob([u.target.result]):m=u.target.result,d={name:t,content:m}},i.readAsArrayBuffer(e)}function B(){g.extra.title==="新建"?s.addItem(o.value).then(a=>{a&&d&&s.saveProfile(a,d[0]).then(()=>{d=void 0}),c(v.RefeshTable,void 0)}):s.updateItem(o.value.id,o.value).then(()=>{d?s.saveProfile(o.value.id,d).then(()=>{d=void 0,c(v.RefeshTable,void 0)}):c(v.RefeshTable,void 0)})}return(a,e)=>(N(),O(T,{class:"modalContent column"},{default:p(()=>[n(R,{class:"col"},{default:p(()=>[l("div",G,[l("div",J,[l("h5",null,[n(A,{name:"star",color:"red"}),e[2]||(e[2]=w("姓名： "))]),n(h,{outlined:"",dense:"",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),type:"text"},null,8,["modelValue"])]),l("div",K,[e[3]||(e[3]=l("h5",null,"年龄：",-1)),n(h,{outlined:"",dense:"",modelValue:o.value.age,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.age=t),type:"text"},null,8,["modelValue"])]),l("div",W,[e[4]||(e[4]=l("h5",null,"个人照片",-1)),n(I,{src:o.value.picture??"img/noimage.gif","spinner-color":"white",style:{height:"80px","max-width":"80px"},onClick:F},null,8,["src"]),e[5]||(e[5]=w()),n(U,{ref_key:"imgUploader",ref:x,"max-files":1,class:"hidden",accept:"image/*","field-name":"file",onAdded:E},null,512)]),l("div",X,[e[6]||(e[6]=l("h5",null,"上传简历",-1)),S(n(Q,{"no-wrap":"",label:"上传",icon:"mdi-cloud-upload-outline",color:"primary",onClick:V},{default:p(()=>[n(U,{ref_key:"profileUploader",ref:r,"max-files":1,class:"hidden",accept:".doc, .docx, .pdf","field-name":"file",onAdded:y},null,512)]),_:1},512),[[H,a.$q.screen.gt.sm]])])])]),_:1})]),_:1}))}}),pe=z(Y,[["__scopeId","data-v-0bb7bf9f"]]);export{pe as default};
