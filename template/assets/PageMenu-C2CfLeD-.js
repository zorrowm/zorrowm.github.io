import{bA as x,bB as A,bC as B,bV as L,bD as M,c4 as Q,bw as U}from"./vendor-B1f7FUIB.js";import{O as V}from"./urlUtils-DSORhQjc.js";import{b as D,u as W}from"./vue-router-exp-DWvvxSx9.js";import{B as w}from"./xframelib-exp-B9KgMBHw.js";import{d as q,r as C,b as s,e as f,V as b,aa as R,f as k,a3 as v,j as S,k as H,a1 as g,ab as O,a6 as j}from"./@vue-exp-DMKPrOh0.js";import{_ as N}from"./index-CvUQtR9N.js";var p=(l=>(l[l.Widget=0]="Widget",l[l.Route=1]="Route",l[l.URL=2]="URL",l[l.Action=3]="Action",l))(p||{});function z(l,c=[]){return l.forEach(r=>{if(r.children){const t={label:r.meta?.title??"无",children:new Array};c.push(t),z(r.children,t.children)}else c.push({label:r.meta?.title??"无",kind:1,name:r.name})}),c}const F=q({__name:"PageMenu",props:{data:{type:Array,required:!0}},setup(l,{expose:c}){c();const r=l,t=C(r.data),d=D(),i=W();function a(e){if(e.children){let u=!1;if(e.children.forEach(h=>{if(h.name==i.name||h.path===i.path){u=!0;return}}),u)return" pagemenuActive"}else if(e.name==i.name||e.path===i.path)return"pagemenuActive";return""}const n=C();function o(e,u){const h=e.label;if(n.value)n.value.label!=h&&(n.value.state=!1),n.value=e,e.state=u;else{n.value=e,e.state=u;return}}function y(e){if(!(!e||e.children)&&(e.path||e.name))switch(e.kind){case void 0:case p.Route:e.blank?V(d,e.path,{}):e.name?d.push({name:e.name}):e.path&&d.push({path:e.path});break;case p.URL:window.open(e.path,"_blank");break;case p.Action:w.EventBus.emit("IPageMenu.Action",e);break;case p.Widget:w.EventBus.emit("LayoutLoadWidget",e);break}}const _={props:r,dataRef:t,router:d,route:i,getSelectedStyle:a,currentItem:n,setShowState:o,menuClickHandler:y};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),P={class:"row gt-xs q-py-md q-gutter-xs"};function T(l,c,r,t,d,i){return s(),f("div",P,[(s(!0),f(b,null,R(t.dataRef,(a,n)=>(s(),f(b,{key:a.label},[a.children?(s(),k(Q,{key:0,"model-value":a.state,"onUpdate:modelValue":o=>a.state=o,"transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:a.label,class:g([t.getSelectedStyle(a),"pageMenuItem"]),onMouseover:o=>t.setShowState(a,!0)},{default:v(()=>[S(x,{style:{"min-width":"100px"},onMouseover:o=>t.setShowState(a,!0),onMouseleave:o=>t.setShowState(a,!1)},{default:v(()=>[(s(!0),f(b,null,R(a.children,(o,y)=>(s(),f(b,{key:o.label},[H((s(),k(A,{clickable:"",class:g([t.getSelectedStyle(o),"pageMenuItem"]),onClick:_=>t.menuClickHandler(o)},{default:v(()=>[S(B,null,{default:v(()=>[O(j(o.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[L]]),S(M)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"])):(s(),k(U,{key:1,flat:"",label:a.label,class:g([t.getSelectedStyle(a),"pageMenuItem"]),onClick:o=>t.menuClickHandler(a),onMouseover:o=>t.setShowState(a,!1)},null,8,["label","class","onClick","onMouseover"]))],64))),128))])}const $=N(F,[["render",T],["__file","PageMenu.vue"]]);export{p as E,$ as P,z as g};
