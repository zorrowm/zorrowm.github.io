import{A as y,F as C,a0 as A,T as Q,aa as R,e as T,a4 as D}from"./quasar-exp-BsaNoQ7w.js";import{D as m}from"./DBService-CSAZW8Q8.js";import{cC as S,cB as j}from"./vendor-DJm_4oaR.js";import{i as O,j as q,k as g,_ as N}from"./index-BQ7ovaqR.js";import{T as F}from"./TableEvent-Bxu_GHGl.js";import{d as H,r as _,w as P,o as M,a as L,b as z,f as G,a4 as b,j as d,l as t,ac as w,k as J,v as K}from"./@vue-exp-Bws36Ke9.js";import"./xframelib-exp-CMLeiWD4.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-Q9Q0SWJB.js";import"./lottie-web-exp-CIY4INm7.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Hv7oMXHX.js";import"./vue-router-exp-CO9L2VdX.js";const U="addEditForm",W=H({name:"addEditForm",__name:"addEditForm",props:{data:S([Object]).def({}),extra:j().isRequired},setup(c,{expose:o}){o();const r=c,e=_({});P(()=>r.data,a=>{a?e.value={...a}:e.value={}},{immediate:!0,deep:!0});function i(a){a?E():e.value={}}M(()=>{O(U,i)}),L(()=>{q(U,i)});let l;const n=_(null),x=_(null);function B(){x.value?.pickFiles()}function k(a){const s=a[0],u=new FileReader;u.onload=function(f){e.value.picture=f.target.result},u.readAsDataURL(s)}function V(){n.value&&n.value.pickFiles()}function I(a){const s=a[0],u=s.name,f=new FileReader;f.onload=function(p){let v=null;typeof p.target.result=="object"?v=new Blob([p.target.result]):v=p.target.result,l={name:u,content:v}},f.readAsArrayBuffer(s)}function E(){r.extra.title==="新建"?m.addItem(e.value).then(a=>{a&&l&&m.saveProfile(a,l[0]).then(()=>{l=void 0}),g(F.RefeshTable,void 0)}):m.updateItem(e.value.id,e.value).then(()=>{l?m.saveProfile(e.value.id,l).then(()=>{l=void 0,g(F.RefeshTable,void 0)}):g(F.RefeshTable,void 0)})}const h={name:U,props:r,formRef:e,OkCancelHandler:i,get uploadFiles(){return l},set uploadFiles(a){l=a},profileUploader:n,imgUploader:x,doImageUpload:B,pictureUpload:k,doUpload:V,fileUpload:I,onSubmit:E};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),X={class:"row q-col-gutter-x-md dialog_form q-pa-md"},Y={class:"col-6"},Z={class:"col-6"},$={class:"col-12"},ee={class:"col-12"};function oe(c,o,r,e,i,l){return z(),G(D,{class:"modalContent column"},{default:b(()=>[d(y,{class:"col"},{default:b(()=>[t("div",X,[t("div",Y,[t("h5",null,[d(C,{name:"star",color:"red"}),o[2]||(o[2]=w("姓名： "))]),d(A,{outlined:"",dense:"",modelValue:e.formRef.name,"onUpdate:modelValue":o[0]||(o[0]=n=>e.formRef.name=n),type:"text"},null,8,["modelValue"])]),t("div",Z,[o[3]||(o[3]=t("h5",null,"年龄：",-1)),d(A,{outlined:"",dense:"",modelValue:e.formRef.age,"onUpdate:modelValue":o[1]||(o[1]=n=>e.formRef.age=n),type:"text"},null,8,["modelValue"])]),t("div",$,[o[4]||(o[4]=t("h5",null,"个人照片",-1)),d(Q,{src:e.formRef.picture??"img/noimage.gif","spinner-color":"white",style:{height:"80px","max-width":"80px"},onClick:e.doImageUpload},null,8,["src"]),o[5]||(o[5]=w()),d(R,{ref:"imgUploader","max-files":1,class:"hidden",accept:"image/*","field-name":"file",onAdded:e.pictureUpload},null,512)]),t("div",ee,[o[6]||(o[6]=t("h5",null,"上传简历",-1)),J(d(T,{"no-wrap":"",label:"上传",icon:"mdi-cloud-upload-outline",color:"primary",onClick:e.doUpload},{default:b(()=>[d(R,{ref:"profileUploader","max-files":1,class:"hidden",accept:".doc, .docx, .pdf","field-name":"file",onAdded:e.fileUpload},null,512)]),_:1},512),[[K,c.$q.screen.gt.sm]])])])]),_:1})]),_:1})}const ve=N(W,[["render",oe],["__scopeId","data-v-0bb7bf9f"],["__file","addEditForm.vue"]]);export{ve as default};
