import{A as h,F as I,a0 as v,T as Q,aa as g,e as B,a4 as C}from"./quasar-exp-B7YDMHDE.js";import{d as M,r as m,w as R,o as S,a as T,b as A,f as q,a3 as u,i as s,k as t,aa as x,j as N,v as O}from"./@vue-exp-CzdoyapG.js";import{i as j,j as D,k as U,_ as H}from"./index-DylLUN-r.js";import{T as w}from"./TableEvent-Bxu_GHGl.js";import{b as L,U as W}from"./ApiExampleDemo-RYYSybrp.js";import{cE as $,cD as z}from"./vendor-CSzZZ-de.js";import{c as G,W as n}from"./xframelib-exp-uSJ3EBow.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Cbv1lISI.js";import"./vue-router-exp-B23Vo4Jw.js";import"./lottie-web-exp-CIY4INm7.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-BLEeEXwl.js";const J={class:"row q-col-gutter-x-md dialog_form q-pa-md"},K={class:"col-6"},P={class:"col-6"},X={class:"col-12"},Y={class:"col-12"},_="addEditForm2",Z=M({name:"addEditForm2",__name:"addEditForm",props:{data:$([Object]).def({}),extra:z().isRequired},setup(k){const f=k,o=m({});R(()=>f.data,a=>{a?o.value={...a}:o.value={}},{immediate:!0,deep:!0});function c(a){a?b():o.value={}}S(()=>{j(_,c)}),T(()=>{D(_,c)});let i;const d=m(null),p=m(null);function F(){p.value?.pickFiles()}function y(a){const e=a[0],l=new FileReader;l.onload=function(r){o.value.picture=r.target.result},l.readAsDataURL(e)}function E(){d.value&&d.value.pickFiles()}async function V(a){const e=a[0],l=e.name,r=await G.readFileBytes(e);i={name:l,content:r}}async function b(){const a={...o.value};if(i){const e=i;a.profiles=[{name:e.name,file:e.content}]}if(f.extra.title==="新建"){a.gradeid="1";const e=await L(a);e&&e.data?(n.Message.info("新建成功！"),U(w.RefeshTable,void 0)):n.Message.info("新建失败！")}else{const e=await W(a);e&&e.response&&e.response.status==200&&e.data?(n.Message.info("编辑成功！"),U(w.RefeshTable,void 0)):n.Message.info("编辑失败！")}}return(a,e)=>(A(),q(C,{class:"modalContent column"},{default:u(()=>[s(h,{class:"col"},{default:u(()=>[t("div",J,[t("div",K,[t("h5",null,[s(I,{name:"star",color:"red"}),e[2]||(e[2]=x("姓名： "))]),s(v,{outlined:"",dense:"",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),type:"text"},null,8,["modelValue"])]),t("div",P,[e[3]||(e[3]=t("h5",null,"年龄：",-1)),s(v,{outlined:"",dense:"",modelValue:o.value.age,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.age=l),type:"text"},null,8,["modelValue"])]),t("div",X,[e[4]||(e[4]=t("h5",null,"个人照片",-1)),s(Q,{src:o.value.picture??"img/noimage.gif","spinner-color":"white",style:{height:"80px","max-width":"80px"},onClick:F},null,8,["src"]),e[5]||(e[5]=x()),s(g,{ref_key:"imgUploader",ref:p,"max-files":1,class:"hidden",accept:"image/*","field-name":"file",onAdded:y},null,512)]),t("div",Y,[e[6]||(e[6]=t("h5",null,"上传简历",-1)),N(s(B,{"no-wrap":"",label:"上传",icon:"mdi-cloud-upload-outline",color:"primary",onClick:E},{default:u(()=>[s(g,{ref_key:"profileUploader",ref:d,"max-files":1,class:"hidden",accept:".doc, .docx, .pdf","field-name":"file",onAdded:V},null,512)]),_:1},512),[[O,a.$q.screen.gt.sm]])])])]),_:1})]),_:1}))}}),ce=H(Z,[["__scopeId","data-v-42a4fe15"]]);export{ce as default};
