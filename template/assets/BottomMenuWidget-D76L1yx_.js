import{j as H,k as O,m as j,i as N,O as q,e as F,H as z}from"./quasar-exp-B7YDMHDE.js";import{i as D,j as P,M as p,m as T,_ as G}from"./index-DylLUN-r.js";import{O as J}from"./urlUtils-DZs0CCYb.js";import{b as K,u as X}from"./vue-router-exp-B23Vo4Jw.js";import{b as C,W as E}from"./xframelib-exp-uSJ3EBow.js";import{d as U,r as _,o as Y,a as Z,b as n,e as f,F as v,a9 as x,f as w,a3 as b,i as M,j as Q,a1 as W,aa as I,a6 as ee,v as te,k as B}from"./@vue-exp-CzdoyapG.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./vendor-CSzZZ-de.js";import"./lottie-web-exp-CIY4INm7.js";import"./xgis-cesium-exp-Cbv1lISI.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-BLEeEXwl.js";const ae={class:"row gt-xs q-ma-auto q-gutter-xs flex-center"},R=U({__name:"index",props:{data:{},layoutManager:{}},setup(s){const l=s,i=_(l.data),c=K();X();function k(e){if(e.children){let o=!1;if(e.children.forEach(t=>{if(t.selected){o=!0;return}}),o)return" pagemenuActive"}else if(e.selected)return"pagemenuActive";return""}const d=_();function u(e,o){const t=e.label;if(d.value)d.value.label!=t&&(d.value.state=!1),d.value=e,e.state=o;else{d.value=e,e.state=o;return}}let h;function L(e){if(e.path&&e.path)switch(e.type){case p.Route:e.blank?J(c,e.path,{}):c.push({path:e.path});break;case p.URL:window.open(e.path,"_blank");break;case p.Action:E.EventBus.emit("IWidgetMenu.Action",e);break;case p.Widget:const o=l.layoutManager;h=e,e.selected?(e.selected=!1,e.unload?o.unloadWidget(e.path):o.changeWidgetVisible(e.path,!1)):(e.selected=!0,o.isWidgetLoaded(e.path)?o.changeWidgetVisible(e.path,!0):o.loadWidget(e.path));break}}function m(e){if(e&&e.layoutID===l.layoutManager.getLayoutID()){const t=e.widgetID;if(h&&h.path===t&&!h.selected)return;const $=i.value.length;let a;for(let g=0;g<$;g++){const r=i.value[g];if(r.type===p.Widget){if(r.path===t){a=r;break}else if(r.children){const A=r.children.length;for(let y=0;y<A;y++){const S=r.children[y];if(S.path===t){a=S;break}}}if(a)break}}a&&a.selected&&(a.selected=!1)}}return Y(()=>{D(C.WidgetUnLoadedEvent,m)}),Z(()=>{P(C.WidgetUnLoadedEvent,m)}),(e,o)=>(n(),f("div",ae,[(n(!0),f(v,null,x(i.value,(t,$)=>(n(),f(v,{key:t.name},[t.path?(n(),w(F,{key:1,color:"white",flat:"",label:t.name,class:W(t.selected?"pagemenuActive":""),onClick:a=>L(t),onMouseover:a=>u(t,!1)},null,8,["label","class","onClick","onMouseover"])):(n(),w(q,{key:0,"model-value":t.state,"onUpdate:modelValue":a=>t.state=a,color:"white","transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:t.name,class:W(k(t)),onMouseover:a=>u(t,!0)},{default:b(()=>[M(N,{style:{"min-width":"100px"},onMouseover:a=>u(t,!0),onMouseleave:a=>u(t,!1)},{default:b(()=>[(n(!0),f(v,null,x(t.children,(a,g)=>(n(),f(v,{key:a.name},[Q((n(),w(H,{clickable:"",class:W(k(a)),onClick:r=>L(a)},{default:b(()=>[M(O,null,{default:b(()=>[I(ee(a.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),[[z]]),M(j)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"]))],64))),128))]))}}),V="bottomMenuWidget",oe=U({name:V,components:{BottomMainMenu:R},props:{},setup(){const s=_(E.LayoutMap.get("bigScreenLayout")),l=_(!0);function i(c){c.name===V&&(l.value=c.visible)}return D(C.WidgetVisibleChanged,i),{isVisible:l,menuSetting:T,dpLayoutManager:s}}}),ne={ref:"footerMenu",class:"footer"},se={class:"layoutfooter"},le={class:"menuContainer"};function re(s,l,i,c,k,d){const u=R;return Q((n(),f("div",ne,[B("div",se,[B("div",le,[M(u,{data:s.menuSetting,layoutManager:s.dpLayoutManager},null,8,["data","layoutManager"])])])],512)),[[te,s.isVisible]])}const ke=G(oe,[["render",re],["__scopeId","data-v-5c23d621"]]);export{ke as default};
