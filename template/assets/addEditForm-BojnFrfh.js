import{A as b,F as A,a0 as p,T as I,aa as v,e as Q,a4 as B}from"./quasar-exp-B7YDMHDE.js";import{d as C,r,w as R,o as T,a as q,b as M,f as N,a3 as m,i as n,k as l,aa as g,j as O,v as j}from"./@vue-exp-CzdoyapG.js";import{cE as D,cD as H}from"./vendor-CSzZZ-de.js";import{i as L,j as W,k as x,_ as $}from"./index-DylLUN-r.js";import{T as U}from"./TableEvent-Bxu_GHGl.js";import{S as w}from"./StudentService-Bf1JJ8qu.js";import{c as z,W as _}from"./xframelib-exp-uSJ3EBow.js";import"./lottie-web-exp-CIY4INm7.js";import"./monaco-editor-exp-BNK_u0iZ.js";import"./xgis-cesium-exp-Cbv1lISI.js";import"./vue-router-exp-B23Vo4Jw.js";import"./axios-exp-C7rfqWEd.js";import"./@iconify/vue-exp-BLEeEXwl.js";const G={class:"row q-col-gutter-x-md dialog_form q-pa-md"},J={class:"col-6"},K={class:"col-6"},P={class:"col-12"},X={class:"col-12"},k="addEditForm3",Y=C({name:"addEditForm3",__name:"addEditForm",props:{data:D([Object]).def({}),extra:H().isRequired},setup(y){const u=y,o=r({});R(()=>u.data,a=>{a?o.value={...a}:o.value={}},{immediate:!0,deep:!0});function c(a){a?V():o.value={}}T(()=>{L(k,c)}),q(()=>{W(k,c)});let s;const i=r(null),f=r(null);function F(){f.value?.pickFiles()}function h(a){const e=a[0],t=new FileReader;t.onload=function(d){o.value.picture=d.target.result},t.readAsDataURL(e)}function E(){i.value&&i.value.pickFiles()}async function S(a){const e=a[0],t=e.name,d=await z.readFileBytes(e);s={name:t,content:d}}async function V(){const a={...o.value};if(s){const e=s;a.profiles=[{name:e.name,file:e.content}]}u.extra.title==="新建"?(a.gradeid="1",w.SaveStudentInfoAsync(a).then(e=>{x(U.RefeshTable,void 0)})):await w.UpdateStudentInfoAsync(a).catch(t=>!1)?(_.Message.info("编辑成功！"),x(U.RefeshTable,void 0)):_.Message.info("编辑失败！")}return(a,e)=>(M(),N(B,{class:"modalContent column"},{default:m(()=>[n(b,{class:"col"},{default:m(()=>[l("div",G,[l("div",J,[l("h5",null,[n(A,{name:"star",color:"red"}),e[2]||(e[2]=g("姓名： "))]),n(p,{outlined:"",dense:"",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),type:"text"},null,8,["modelValue"])]),l("div",K,[e[3]||(e[3]=l("h5",null,"年龄：",-1)),n(p,{outlined:"",dense:"",modelValue:o.value.age,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.age=t),type:"text"},null,8,["modelValue"])]),l("div",P,[e[4]||(e[4]=l("h5",null,"个人照片",-1)),n(I,{src:o.value.picture??"img/noimage.gif","spinner-color":"white",style:{height:"80px","max-width":"80px"},onClick:F},null,8,["src"]),e[5]||(e[5]=g()),n(v,{ref_key:"imgUploader",ref:f,"max-files":1,class:"hidden",accept:"image/*","field-name":"file",onAdded:h},null,512)]),l("div",X,[e[6]||(e[6]=l("h5",null,"上传简历",-1)),O(n(Q,{"no-wrap":"",label:"上传",icon:"mdi-cloud-upload-outline",color:"primary",onClick:E},{default:m(()=>[n(v,{ref_key:"profileUploader",ref:i,"max-files":1,class:"hidden",accept:".doc, .docx, .pdf","field-name":"file",onAdded:S},null,512)]),_:1},512),[[j,a.$q.screen.gt.sm]])])])]),_:1})]),_:1}))}}),ce=$(Y,[["__scopeId","data-v-2687e964"]]);export{ce as default};
