import{c3 as T,c5 as $,c4 as J,ca as O,cb as q,cc as F,cd as y,ce as I,cf as R,cg as V,ch as S,c9 as N,ci as X,cj as K,ck as Q,c6 as U,cl as Y}from"./vendor-CDV5M84i.js";import{d as Z,v as ee,M as te,L as ne,R as ie}from"./@vue-exp-YaP0LnBg.js";import{_ as oe}from"./index-DPO_t7vI.js";import"./@hprose-exp-DifMA6AO.js";import"./xframelib-exp-CvTEfE5n.js";import"./axios-exp-BH40TtQM.js";import"./vue-router-exp-BeFgxScw.js";const ae=Z({__name:"Map3DWidget",setup(b,{expose:m}){m();let t,c;function w(){const e=document.querySelector("#c"),o=new T,n=new $(45,e.clientWidth/e.clientHeight,.1,1e9);n.position.set(0,-1e7,1e7),n.lookAt(0,0,0),o.add(n);const a=new J({canvas:e,antialias:!0,logarithmicDepthBuffer:!0});a.setSize(e.innerWidth,e.innerHeight),a.setPixelRatio(window.devicePixelRatio);const E=new O(n,a.domElement),W=new q(16777215,.2);o.add(W);const v=new F(16777215);v.position.set(1,-1,1),o.add(v),c.features.forEach((i,d)=>{const{coordinates:l}=i.geometry;l.forEach(p=>{const h=new y,M=new y;p.forEach(P=>{const g=new I,_=[];for(let u=0;u<P.length;u++){let[s,r]=P[u];s=s-116e5,r=r-4e6,u===0&&(g.moveTo(s,r),_.push(new R(s,r,200001))),g.lineTo(s,r),_.push(new R(s,r,200001))}const B={steps:2,depth:2e5,bevelEnabled:!0},L=new V(g,B),j=new S({color:"#02A1E2",transparent:!0,opacity:.9}),H=new S({color:"#3480C4",transparent:!0,opacity:.9}),G=new N(L,[j,H]);h.add(G);const k=new X().setFromPoints(_),A=new K({color:16777215}),C=new Q(k,A);M.add(C)}),o.add(h),o.add(M)})});const D=new U(4e8,4e8);t=new Y(D,{clipBias:.001,textureWidth:e.innerWidth*window.devicePixelRatio,textureHeight:e.innerHeight*window.devicePixelRatio}),t.position.z=-2e5,t.rotateX(-Math.PI/50),x();function x(){if(z(a)){const i=a.domElement;n.aspect=i.clientWidth/i.clientHeight,n.updateProjectionMatrix()}E.update(),a.render(o,n),requestAnimationFrame(x)}function z(i){const d=i.domElement,l=d.clientWidth,p=d.clientHeight,h=d.width!==l||d.height!==p;return h&&(i.setSize(l,p,!1),t.getRenderTarget().setSize(l*window.devicePixelRatio,p*window.devicePixelRatio)),h}}ee(()=>{fetch("/SampleData/china-mercator.json").then(e=>e.json()).then(e=>{c=e,w()})});const f={get mirror(){return t},set mirror(e){t=e},get chinaJson(){return c},set chinaJson(e){c=e},init:w};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),se={class:"container"};function re(b,m,t,c,w,f){return ie(),te("div",se,m[0]||(m[0]=[ne("canvas",{id:"c"},null,-1)]))}const we=oe(ae,[["render",re],["__scopeId","data-v-3d013856"],["__file","Map3DWidget.vue"]]);export{we as default};
