import{d as v,ac as w,r as C,O as x,R as p,M as g,X as b,a8 as W,$ as D,L as M,V as S,a9 as B,N as V}from"./@vue-exp-YaP0LnBg.js";import{A as L}from"./index-J25sxOp3.js";import{m as y,M as h,_ as E}from"./index-DPO_t7vI.js";import{u as R}from"./vue-router-exp-BeFgxScw.js";import{j as r}from"./xframelib-exp-CvTEfE5n.js";const $=v({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:y},iconColor:{type:String,default:"#f00"},itemSize:{type:String,default:"50px"}},setup(c,{expose:d}){d(),w(e=>({"48e81495":c.itemSize+10,bcab66f8:s.value,af747dc2:c.itemSize}));const o=c,s=C(y.length),n=R(),u=new Map,l=C(u);function i(e){switch(e.type){case h.URL:window.open(e.path,"_blank");break;case h.Route:if(e.blank){if(e.path){let a=n.resolve({path:e.path});window.open(a.href,"_blank")}}else e.path&&n.push({path:e.path});break;case h.Action:const t=e.path;t&&L[t]&&L[t](e);break;case h.Widget:if(e.path){const a=r.LayoutMap.get(o.layoutID);if(!a){r.Message.warn(`LayoutID:${o.layoutID}的Manager不存在`);return}f(a,e),e.selected=!e.selected,l.value.set(e.name,e.selected)}else r.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function f(e,t){t.path&&(t.selected?(t.unload?(r.Logger().info("卸载widget: "+t.path),e.unloadWidget(t.path)):(r.Logger().info("隐藏widget: "+t.path),e.changeWidgetVisible(t.path,!1)),t.children&&t.children.forEach(a=>{a.selected&&(r.Logger().info(`递归控制${t.path}的子Widget:`+a.path),f(e,a),a.selected=!a.selected)})):e.isWidgetLoaded(t.path)?(r.Logger().info("显示widget: "+t.path),e.changeWidgetVisible(t.path,!0)):(e.loadWidget(t.path),r.Logger().info("加载Widget："+t.path)))}function _(e){return l.value?.has(e.name)&&l.value.get(e.name)?"menuBarItem active":"menuBarItem"}const k={props:o,itemLength:s,router:n,selectedMapList:u,selectedMap:l,itemClick:i,controlMenuWidget:f,getClass:_};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),z={class:"menuBar"},A=["title","onClick"];function N(c,d,o,s,n,u){const l=x("Icon");return p(),g("ul",z,[(p(!0),g(b,null,W(o.menuData,(i,f)=>(p(),g("li",{key:f,class:D(s.getClass(i))},[M("span",{title:i.name,onClick:_=>s.itemClick(i)},[i.icon?(p(),S(l,{key:0,icon:i.icon,color:o.iconColor},null,8,["icon","color"])):(p(),g(b,{key:1},[B(V(i.name),1)],64))],8,A)],2))),128))])}const q=E($,[["render",N],["__scopeId","data-v-2e1c9d38"],["__file","index.vue"]]);function j(c,d){let o;for(const s of c)if(s.path===d){o=s;break}else if(s.children){const n=j(s.children,d);if(n){o=n;break}}return o}export{q as C,j as f};
