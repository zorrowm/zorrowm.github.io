import{ap as P,n as B,o as v,p as g,q as L}from"./vendor-6kqmRazU.js";import{j as S}from"./xframelib-exp-CPl8XRlL.js";import{d as Q,r as p,v as V,x as E,M as x,L as o,Q as a,a1 as u,a9 as m,N as c,X as N,R as T,a8 as O}from"./@vue-exp-BA8o4xMK.js";import{_ as $}from"./index-CTmLOYTS.js";import"./@hprose-exp-BDOQuVAD.js";import"./axios-exp-BH40TtQM.js";import"./vue-router-exp-BxGuMefC.js";const j=Q({__name:"3dtiles_bimWidget",setup(A,{expose:t}){t();let l,r,n,s;async function y(){r=new P("layer"),l.addLayer(r),n=await Cesium.Cesium3DTileset.fromUrl("http://mars3d.gis.digsur.com/3dtiles/bim-daxue/tileset.json"),l.scene.primitives.add(n),l.flyToTarget(n),f("F5")}function d(){n.style=void 0,s=void 0}function C(){f("B1"),s="B1"}function I(e){const i="F"+e;f(i)}function f(e){s=e,n.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["${标高} ==='"+e+"' || ${底部约束} ==='"+e+"'","rgb(255, 255, 255)"],["true","rgba(255, 255, 255,0.03)"]]}})}const F=p(""),w=p(""),b=p(""),D=p("");V(()=>{S.CesiumViewer&&(l=S.CesiumViewer,l.screenSpaceEventHandler.setInputAction(e=>{var i=l.scene.pick(e.position);let _;Cesium.defined(i)&&(F.value=i.getProperty("file"),w.value=i.getProperty("id"),b.value=i.getProperty("name"),D.value=i.getProperty("标高")?i.getProperty("标高"):i.getProperty("底部约束"),_=JSON.stringify(i.getProperty("id")),s?n.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["${id} === "+_,'color("cyan", 0.7)'],["${标高} ==='"+s+"' || ${底部约束} ==='"+s+"'","rgb(255, 255, 255)"],["true","rgba(255, 255, 255,0.03)"]]}}):n.style=new Cesium.Cesium3DTileStyle({color:{conditions:[["${id} === "+_,'color("cyan", 0.7)']]}}))},Cesium.ScreenSpaceEventType.LEFT_CLICK),y())}),E(()=>{l&&r&&l.removeLayer(r)});const k={get viewer(){return l},set viewer(e){l=e},get layer(){return r},set layer(e){r=e},get tileset(){return n},set tileset(e){n=e},get currentLayer(){return s},set currentLayer(e){s=e},initLayer:y,showAll:d,minusOne:C,show:I,showCengByStyle:f,modelName:F,featureID:w,featureName:b,featureFloor:D};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),W={class:"container",style:{"max-width":"100px"}},M={class:"container info-box"};function U(A,t,l,r,n,s){return T(),x(N,null,[o("div",W,[a(B,{bordered:"",separator:""},{default:u(()=>[(T(),x(N,null,O(5,(y,d)=>a(v,{clickable:"",key:d,onClick:C=>r.show(d+5-d*2),class:"text-center"},{default:u(()=>[a(g,null,{default:u(()=>[m(c(d+5-d*2)+"F",1)]),_:2},1024)]),_:2},1032,["onClick"])),64)),a(v,{clickable:"",onClick:r.minusOne,class:"text-center"},{default:u(()=>[a(g,null,{default:u(()=>[a(L,null,{default:u(()=>t[0]||(t[0]=[m("-1F")])),_:1})]),_:1})]),_:1}),a(v,{clickable:"",onClick:r.showAll,class:"text-center"},{default:u(()=>[a(g,null,{default:u(()=>[a(L,null,{default:u(()=>t[1]||(t[1]=[m("整体")])),_:1})]),_:1})]),_:1})]),_:1})]),o("div",M,[o("div",null,[t[2]||(t[2]=o("span",null,"模型名称：",-1)),m(" "+c(r.modelName),1)]),o("div",null,[t[3]||(t[3]=o("span",null,"要素ID：",-1)),m(" "+c(r.featureID),1)]),o("div",null,[t[4]||(t[4]=o("span",null,"要素名称：",-1)),m(" "+c(r.featureName),1)]),o("div",null,[t[5]||(t[5]=o("span",null,"要素所在楼层：",-1)),m(" "+c(r.featureFloor),1)])])],64)}const G=$(j,[["render",U],["__file","3dtiles_bimWidget.vue"]]);export{G as default};
