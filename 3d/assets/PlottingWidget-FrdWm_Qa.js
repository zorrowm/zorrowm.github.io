import{J as v,G as P,K as V,L,O as S,T as O,V as M,W as R,z as H,A as B,X,Y as A,B as z}from"./vendor-CDV5M84i.js";import{_ as U,f as K}from"./index-BTOrG-4i.js";import{W as G}from"./WidgetsEvent-TR_R_5Fb.js";import{j as h,E as Q,d as q}from"./xframelib-exp-CvTEfE5n.js";import{S as j}from"./roadThrough-D75-Yhil.js";import{a as F,R as E,M as T,L as c,N as W,Q as d,a1 as m,d as N,r as b,v as Z,z as Y,G as J,V as $,a8 as ee,$ as te,X as ie}from"./@vue-exp-YaP0LnBg.js";import"./@hprose-exp-DifMA6AO.js";import"./vue-router-exp-BeFgxScw.js";import"./axios-exp-BH40TtQM.js";const k=[{count:"5",label:"点及文字",list:[{id:"point",label:"点",img:""},{id:"pointwithtext",label:"点(标注)",img:""},{id:"definedpointwithtext",label:"自定义点(标注)",img:""},{id:"definedpoint",label:"自定义点",img:""},{id:"alltext",label:"文本",img:""}]},{count:"8",label:"二维线面类",list:[{id:"polyline",label:"线",img:""},{id:"polygon",label:"多边形",img:""},{id:"curve",label:"曲线",img:""},{id:"rectangle",label:"长方形",img:""},{id:"square",label:"正方形",img:""},{id:"circle",label:"圆",img:""},{id:"ellipse",label:"椭圆",img:""},{id:"sector",label:"扇形",img:""}]},{count:"8",label:"三维立体类",list:[{id:"polylineVolume",label:"管道",img:""},{id:"corridor",label:"走廊",img:""},{id:"wall",label:"墙",img:""},{id:"rectangleVolume",label:"长方体",img:""},{id:"squareVolume",label:"立方体",img:""},{id:"circleVolume",label:"圆柱体",img:""},{id:"ellipseVolume",label:"椭圆柱体",img:""},{id:"cylinder",label:"圆锥",img:""},{id:"halfSphere",label:"半球",img:""}]},{count:"0",label:"态势标绘",list:[]},{count:"1",label:"小模型",list:[{id:"plane",label:"飞机",img:""}]}];class g{constructor(e){this.viewer=e}getCatesian3FromPX(e){if(this.viewer&&e){var i=this.viewer.scene.drillPick(e),t=null,n=!1,s=!1;for(let r in i){let C=i[r];if((C&&C.primitive instanceof Cesium.Cesium3DTileFeature||C&&C.primitive instanceof Cesium.Cesium3DTileset||C&&C.primitive instanceof Cesium.Model)&&(n=!0),n&&(this.viewer.scene.pick(e),t=this.viewer.scene.pickPosition(e),t)){let a=Cesium.Cartographic.fromCartesian(t);a.height<0&&(a.height=0);let f=Cesium.Math.toDegrees(a.longitude),w=Cesium.Math.toDegrees(a.latitude),y=a.height;t=this.transformWGS84ToCartesian({lng:f,lat:w},y)}}let o=this.viewer.terrainProvider instanceof Cesium.EllipsoidTerrainProvider;if(!n&&!o){var l=this.viewer.scene.camera.getPickRay(e);if(!l)return null;t=this.viewer.scene.globe.pick(l,this.viewer.scene),s=!0}if(!n&&!s&&o&&(t=this.viewer.scene.camera.pickEllipsoid(e,this.viewer.scene.globe.ellipsoid)),t){let r=this.transformCartesianToWGS84(t);return r.alt<0&&(t=this.transformWGS84ToCartesian(r,.1)),t}return!1}}transformWGS84ToCartesian(e,i){if(this.viewer)return e?Cesium.Cartesian3.fromDegrees(e.lng||e.lon,e.lat,e.alt=i||e.alt,Cesium.Ellipsoid.WGS84):Cesium.Cartesian3.ZERO}transformCartesianToWGS84(e){if(this.viewer&&e){var i=Cesium.Ellipsoid.WGS84,t=i.cartesianToCartographic(e);return{lng:Cesium.Math.toDegrees(t.longitude),lat:Cesium.Math.toDegrees(t.latitude),alt:t.height}}}dragMove(){let e=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas);e.setInputAction(i=>{var t=this.getCatesian3FromPX(i.position);if(t){polygonPoints.push(t.clone()),polygonPoints.length===1&&polygonPoints.push(t.clone());var n=this.viewer.entities.add({id:"point"+polygonPoints.length,position:t,point:{color:Cesium.Color.RED,pixelSize:10}});pointEntities.push(n);let s=t.clone(),l=Cesium.Cartographic.fromCartesian(s);allPoints.push([Cesium.Math.toDegrees(l.longitude),Cesium.Math.toDegrees(l.latitude),l.height])}},Cesium.ScreenSpaceEventType.LEFT_CLICK),e.setInputAction(i=>{var t=this.getCatesian3FromPX(i.endPosition);polygonPoints.length>=2&&t&&t.x&&(polygonPoints.pop(),polygonPoints.push(t))},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(()=>{if(polygonPoints[polygonPoints.length-1],e.destroy(),polygonPoints.length>1){polygonPoints.pop(),allPoints.pop(),allPoints.push(allPoints[0]);var i=this.viewer.entities.getById("point"+(polygonPoints.length+1));i&&this.viewer.entities.remove(i);var t=this.viewer.entities.getById("point1");t&&this.viewer.entities.remove(t)}this.viewer.entities.remove(drawingLine);let n=null,s=-1;var l=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas);l.setInputAction(o=>{const r=this.viewer.scene.pick(o.position);Cesium.defined(r)&&pointEntities.includes(r.id)&&(n=r.id,s=pointEntities.indexOf(n),this.viewer.scene.screenSpaceCameraController.enableRotate=!1,this.viewer.scene.screenSpaceCameraController.enableTranslate=!1,this.viewer.scene.screenSpaceCameraController.enableZoom=!1,this.viewer.scene.screenSpaceCameraController.enableTilt=!1,this.viewer.scene.screenSpaceCameraController.enableLook=!1)},Cesium.ScreenSpaceEventType.LEFT_DOWN),l.setInputAction(o=>{if(n){const r=this.getCatesian3FromPX(o.endPosition);r&&s!==-1&&(n.position=r,polygonPoints[s]=r,(s===0||s===polygonPoints.length-2)&&(polygonPoints[polygonPoints.length-1]=r,pointEntities[polygonPoints.length-1].position.setValue(r)))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),l.setInputAction(()=>{n=null,s=-1,this.viewer.scene.screenSpaceCameraController.enableRotate=!0,this.viewer.scene.screenSpaceCameraController.enableTranslate=!0,this.viewer.scene.screenSpaceCameraController.enableZoom=!0,this.viewer.scene.screenSpaceCameraController.enableTilt=!0,this.viewer.scene.screenSpaceCameraController.enableLook=!0},Cesium.ScreenSpaceEventType.LEFT_UP)},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}}class le{constructor(e){this.viewer=e,this._point=null,this._pointData=null,this._entities=[],this.publicTool=new g(e)}get point(){return this._point}loadPoint(e){return this.createPoint(e)}getData(){return this._pointData}startCreate(){const e=this;this.handler=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.handler.setInputAction(function(i){const t=e.publicTool.getCatesian3FromPX(i.position);if(!t)return;const n=e.createPoint(t);e._pointData=t,e._point=n},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(()=>{this.destroy(),this.handler=null},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}createPoint(e){const i=this,t=this.viewer.entities.add({position:e,point:{pixelSize:10,color:Cesium.Color.YELLOW}});return i._entities.push(t),t}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}clear(){for(let e=0;e<this._entities.length;e++)this.viewer.entities.remove(this._entities[e]);this._entities=[],this._point=null}}class ne{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e)}startCreate(){let e=this.viewer,i=[],t=e.entities.add({Id:"drawingPolyline",name:"画线",polyline:{positions:new Cesium.CallbackProperty(()=>i,!1),width:2,material:Cesium.Color.BLUE}}),n=e.entities.add({polyline:{positions:new Cesium.CallbackProperty(()=>s&&l?[s,l]:[],!1),width:2,material:new Cesium.PolylineDashMaterialProperty({color:Cesium.Color.BLUE,dashLength:20})}}),s=null,l=null;this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(o=>{let r=this.publicTool.getCatesian3FromPX(o.position);r&&(i.push(r),s=r,e.entities.add({position:r,point:{color:Cesium.Color.RED,pixelSize:10}}))},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(o=>{l=this.publicTool.getCatesian3FromPX(o.endPosition)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(()=>{this.handler.destroy(),this.handler=null,e.entities.remove(n);const o=new j(1e3,"/img/spriteline.png");t.polyline.material=o,n.polyline.material=o},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class se{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e)}startCreate(){let e=this.viewer,i=null,t=10;e.scene.globe.depthTestAgainstTerrain=!1;let n=e.entities.add({name:"画圆",ellipse:{semiMinorAxis:new Cesium.CallbackProperty(()=>t,!1),semiMajorAxis:new Cesium.CallbackProperty(()=>t,!1),material:Cesium.Color.BLUE.withAlpha(.2),outline:!0,outlineColor:Cesium.Color.RED,outlineWidth:2,fill:!0}});this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(s=>{var l=this.publicTool.getCatesian3FromPX(s.position);l&&i===null&&(i=l,n.position=i,e.entities.add({position:l,point:{color:Cesium.Color.RED,pixelSize:10}})),this.handler.setInputAction(()=>{if(i!==null&&t>0){this.handler.destroy(),this.handler=null;let o=Cesium.Cartographic.fromCartesian(i);Cesium.Math.toDegrees(o.longitude),Cesium.Math.toDegrees(o.latitude)}},Cesium.ScreenSpaceEventType.LEFT_CLICK)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(s=>{if(i){let l=this.publicTool.getCatesian3FromPX(s.endPosition);l&&(t=Cesium.Cartesian3.distance(i,l))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class oe{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e)}startCreate(){let e=this.viewer,i=null,t=null;e.entities.add({name:"画矩形",rectangle:{coordinates:new Cesium.CallbackProperty(()=>{if(i===null||t===null)return;let n,s;i.latitude-t.latitude>0?(n=i.latitude,s=t.latitude):(n=t.latitude,s=i.latitude);let l,o;return i.longitude-t.longitude>0?(o=i.longitude,l=t.longitude):(o=t.longitude,l=i.longitude),new Cesium.Rectangle(l,s,o,n)},!1),material:Cesium.Color.BLUE.withAlpha(.2),closeTop:!0,closeBottom:!1}}),this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(n=>{var s=this.publicTool.getCatesian3FromPX(n.position);s&&(i===null&&(i=Cesium.Cartographic.fromCartesian(s)),e.entities.add({position:s,point:{color:Cesium.Color.RED,pixelSize:10}})),this.handler.setInputAction(l=>{if(i!==null&&t!==null){var o=this.publicTool.getCatesian3FromPX(l.position);e.entities.add({position:o,point:{color:Cesium.Color.RED,pixelSize:10}}),this.handler.destroy(),this.handler=null,i.latitude-t.latitude>0?(Cesium.Math.toDegrees(i.latitude),Cesium.Math.toDegrees(t.latitude)):(Cesium.Math.toDegrees(t.latitude),Cesium.Math.toDegrees(i.latitude)),i.longitude-t.longitude>0?(Cesium.Math.toDegrees(i.longitude),Cesium.Math.toDegrees(t.longitude)):(Cesium.Math.toDegrees(t.longitude),Cesium.Math.toDegrees(i.longitude))}},Cesium.ScreenSpaceEventType.LEFT_CLICK)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(n=>{i&&(t=Cesium.Cartographic.fromCartesian(this.publicTool.getCatesian3FromPX(n.endPosition)))},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class re{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e),this.allPoints=[]}startCreate(){let e=this.viewer,i=[];e.entities.add({name:"画多边形",polygon:{hierarchy:new Cesium.CallbackProperty(()=>new Cesium.PolygonHierarchy(i),!1),material:Cesium.Color.BLUE.withAlpha(.2),perPositionHeight:!1}}),e.entities.add({name:"画线",polyline:{positions:new Cesium.CallbackProperty(()=>i,!1),width:3,material:Cesium.Color.BLUE}}),this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(t=>{var n=this.publicTool.getCatesian3FromPX(t.position);if(n){i.push(n.clone()),i.length===1&&i.push(n.clone()),e.entities.add({position:n,point:{color:Cesium.Color.RED,pixelSize:10}});let s=n.clone(),l=Cesium.Cartographic.fromCartesian(s);this.allPoints.push([Cesium.Math.toDegrees(l.longitude),Cesium.Math.toDegrees(l.latitude),l.height])}},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(t=>{var n=this.publicTool.getCatesian3FromPX(t.endPosition);i.length>=2&&n&&n.x&&(i.pop(),i.push(n))},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(()=>{i.pop(),i.push(i[0]),this.handler.destroy(),this.handler=null},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class ae{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e)}startCreate(){let e=this.viewer,i=null,t=null;e.entities.add({name:"画矩形",rectangle:{coordinates:new Cesium.CallbackProperty(()=>{if(i===null||t===null)return;let n,s;i.latitude-t.latitude>0?(n=i.latitude,s=t.latitude):(n=t.latitude,s=i.latitude);let l,o;return i.longitude-t.longitude>0?(o=i.longitude,l=t.longitude):(o=t.longitude,l=i.longitude),new Cesium.Rectangle(l,s,o,n)},!1),extrudedHeight:100,material:Cesium.Color.BLUE.withAlpha(.2),outline:!0,outlineColor:Cesium.Color.BLUE.withAlpha(.5),closeTop:!0,closeBottom:!1}}),this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(n=>{const s=this.publicTool.getCatesian3FromPX(n.position);s&&(i===null&&(i=Cesium.Cartographic.fromCartesian(s)),e.entities.add({position:s,point:{color:Cesium.Color.RED,pixelSize:10}})),this.handler.setInputAction(l=>{if(i!==null&&t!==null){const o=this.publicTool.getCatesian3FromPX(l.position);e.entities.add({position:o,point:{color:Cesium.Color.RED,pixelSize:10}}),this.handler.destroy(),this.handler=null;let r,C;i.latitude-t.latitude>0?(r=Cesium.Math.toDegrees(i.latitude),C=Cesium.Math.toDegrees(t.latitude)):(r=Cesium.Math.toDegrees(t.latitude),C=Cesium.Math.toDegrees(i.latitude));let a,f;i.longitude-t.longitude>0?(f=Cesium.Math.toDegrees(i.longitude),a=Cesium.Math.toDegrees(t.longitude)):(f=Cesium.Math.toDegrees(t.longitude),a=Cesium.Math.toDegrees(i.longitude));let w=Cesium.Cartesian3.fromDegrees((f-a)/2+a,(r-C)/2+C,100);e.entities.add({position:w,point:{color:Cesium.Color.BLUE,pixelSize:10}})}},Cesium.ScreenSpaceEventType.LEFT_CLICK)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(n=>{i&&(t=Cesium.Cartographic.fromCartesian(this.publicTool.getCatesian3FromPX(n.endPosition)))},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class de{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e)}startCreate(){let e=this.viewer,i=[];e.entities.add({Id:"drawingCorridor",name:"绘制走廊",corridor:new Cesium.CorridorGraphics({extrudedHeight:100,width:100,material:Cesium.Color.BLUE.withAlpha(.5),positions:new Cesium.CallbackProperty(()=>i,!1)})});let t=e.entities.add({corridor:new Cesium.CorridorGraphics({extrudedHeight:100,width:100,material:Cesium.Color.BLUE.withAlpha(.5),positions:new Cesium.CallbackProperty(()=>n&&s?[n,s]:[],!1)})}),n=null,s=null;this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(l=>{let o=this.publicTool.getCatesian3FromPX(l.position);o&&(i.push(o),n=o,e.entities.add({position:o,point:{color:Cesium.Color.RED,pixelSize:10}}))},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(l=>{s=this.publicTool.getCatesian3FromPX(l.endPosition)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(()=>{this.handler.destroy(),this.handler=null,e.entities.remove(t)},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class ue{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e)}startCreate(){let e=this.viewer,i=[];e.entities.add({Id:"drawingCorridor",name:"绘制走廊",wall:new Cesium.WallGraphics({material:new DynamicWallMaterialProperty({color:Cesium.Color.fromBytes(55,96,56).withAlpha(.7),duration:3e3}),maximumHeights:new Cesium.CallbackProperty(()=>new Array(i.length).fill(100),!1),minimumHeights:new Cesium.CallbackProperty(()=>new Array(i.length).fill(0),!1),positions:new Cesium.CallbackProperty(()=>i,!1)})});let t=e.entities.add({wall:new Cesium.WallGraphics({material:Cesium.Color.BLUE.withAlpha(.5),maximumHeights:new Cesium.CallbackProperty(()=>n&&s?[100,100]:[],!1),minimumHeights:new Cesium.CallbackProperty(()=>n&&s?[0,0]:[],!1),positions:new Cesium.CallbackProperty(()=>n&&s?[n,s]:[],!1)})}),n=null,s=null;this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(l=>{let o=this.publicTool.getCatesian3FromPX(l.position);o&&(i.push(o),n=o,e.entities.add({position:o,point:{color:Cesium.Color.RED,pixelSize:10}}))},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(l=>{s=this.publicTool.getCatesian3FromPX(l.endPosition)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(()=>{this.handler.destroy(),this.handler=null,e.entities.remove(t)},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class x{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e),this.drawType="circleVolume"}startCreate(){let e=this.viewer,i=null,t=10;e.scene.globe.depthTestAgainstTerrain=!1;let n=e.entities.add({name:"画圆柱体",cylinder:{length:100,bottomRadius:new Cesium.CallbackProperty(()=>t,!1),material:Cesium.Color.BLUE.withAlpha(.2)}});this.handler=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler.setInputAction(s=>{var l=this.publicTool.getCatesian3FromPX(s.position);if(l&&i===null){let r=Cesium.Cartographic.fromCartesian(l);r.height+=50;var o=Cesium.Ellipsoid.WGS84;i=o.cartographicToCartesian(r),n.position=i,this.drawType==="circleVolume"?n.cylinder.topRadius=new Cesium.CallbackProperty(()=>t,!1):this.drawType==="cylinder"&&(n.cylinder.topRadius=0),e.entities.add({position:l,point:{color:Cesium.Color.RED,pixelSize:10}})}this.handler.setInputAction(()=>{if(i!==null&&t>0){this.handler.destroy(),this.handler=null;let r=Cesium.Cartographic.fromCartesian(i);Cesium.Math.toDegrees(r.longitude),Cesium.Math.toDegrees(r.latitude)}},Cesium.ScreenSpaceEventType.LEFT_CLICK)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(s=>{if(i){let l=this.publicTool.getCatesian3FromPX(s.endPosition);l&&(t=Cesium.Cartesian3.distance(i,l))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}setStyle(e){this.drawType=e.drawType}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}class ce{constructor(e){this.viewer=e,this._entities=[],this.publicTool=new g(e)}startCreate(e){let i=this.viewer,t=null,n=10;i.scene.globe.depthTestAgainstTerrain=!1;let s=i.entities.add({name:"画圆柱体",ellipsoid:{radii:new Cesium.CallbackProperty(()=>new Cesium.Cartesian3(n,n,n),!1),maximumCone:Cesium.Math.PI/2,material:Cesium.Color.BLUE.withAlpha(.2)}});this.handler=new Cesium.ScreenSpaceEventHandler(i.canvas),this.handler.setInputAction(l=>{var o=this.publicTool.getCatesian3FromPX(l.position);o&&t===null&&(t=o,s.position=t,i.entities.add({position:o,point:{color:Cesium.Color.RED,pixelSize:10}})),this.handler.setInputAction(()=>{if(t!==null&&n>0){this.handler.destroy(),this.handler=null;let r=Cesium.Cartographic.fromCartesian(t);Cesium.Math.toDegrees(r.longitude),Cesium.Math.toDegrees(r.latitude)}},Cesium.ScreenSpaceEventType.LEFT_CLICK)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(l=>{if(t){let o=this.publicTool.getCatesian3FromPX(l.endPosition);o&&(n=Cesium.Cartesian3.distance(t,o))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}destroy(){this.handler&&(this.handler.destroy(),this.handler=null)}}const me={__name:"PlotEditWidget",setup(p,{expose:e}){e();const t={formData:F({type:"",size:10,color:"#FF00FF",isBorder:!1,borderColor:"#FF00FF",borderWidth:1,isScale:!1,isClamptoGround:!1,isOccluded:!1}),reactive:F};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}},pe={class:"column"},he={class:"row items-center q-mb-md"},Ce={class:"label"},ge={class:"row items-center q-mb-md"},fe={class:"row items-center q-mb-md"},we={class:"row items-center q-mb-md"},ye={class:"row items-center q-mb-md"};function ve(p,e,i,t,n,s){return E(),T("div",pe,[c("div",he,[e[11]||(e[11]=c("div",{class:"label"},"样式类型",-1)),c("div",Ce,W(t.formData.type),1)]),d(v,{outlined:"",dense:"",modelValue:t.formData.size,"onUpdate:modelValue":e[0]||(e[0]=l=>t.formData.size=l),type:"number",color:"grey"},{before:m(()=>e[12]||(e[12]=[c("div",null,"像素大小",-1)])),_:1},8,["modelValue"]),d(v,{outlined:"",dense:"",modelValue:t.formData.size,"onUpdate:modelValue":e[1]||(e[1]=l=>t.formData.size=l),type:"number",color:"grey"},{before:m(()=>e[13]||(e[13]=[c("div",null,"线宽",-1)])),_:1},8,["modelValue"]),d(v,{outlined:"",dense:"",modelValue:t.formData.color,"onUpdate:modelValue":e[3]||(e[3]=l=>t.formData.color=l),class:"my-input",color:"grey"},{before:m(()=>e[14]||(e[14]=[c("div",null,"颜色",-1)])),append:m(()=>[d(P,{name:"colorize",class:"cursor-pointer"},{default:m(()=>[d(V,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:m(()=>[d(L,{modelValue:t.formData.color,"onUpdate:modelValue":e[2]||(e[2]=l=>t.formData.color=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),c("div",ge,[e[15]||(e[15]=c("div",{class:"label"},"是否边框",-1)),d(S,{modelValue:t.formData.isBorder,"onUpdate:modelValue":e[4]||(e[4]=l=>t.formData.isBorder=l)},null,8,["modelValue"])]),d(v,{outlined:"",dense:"",modelValue:t.formData.borderColor,"onUpdate:modelValue":e[6]||(e[6]=l=>t.formData.borderColor=l),class:"my-input",color:"grey",disable:!t.formData.isBorder},{before:m(()=>e[16]||(e[16]=[c("div",null,"边框颜色",-1)])),append:m(()=>[d(P,{name:"colorize",class:"cursor-pointer"},{default:m(()=>[d(V,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:m(()=>[d(L,{modelValue:t.formData.borderColor,"onUpdate:modelValue":e[5]||(e[5]=l=>t.formData.borderColor=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"]),d(v,{outlined:"",dense:"",modelValue:t.formData.borderWidth,"onUpdate:modelValue":e[7]||(e[7]=l=>t.formData.borderWidth=l),type:"number",color:"grey"},{before:m(()=>e[17]||(e[17]=[c("div",null,"边框宽度",-1)])),_:1},8,["modelValue"]),c("div",fe,[e[18]||(e[18]=c("div",{class:"label"},"是否按视距缩放",-1)),d(S,{modelValue:t.formData.isScale,"onUpdate:modelValue":e[8]||(e[8]=l=>t.formData.isScale=l)},null,8,["modelValue"])]),c("div",we,[e[19]||(e[19]=c("div",{class:"label"},"是否贴地",-1)),d(S,{modelValue:t.formData.isClamptoGround,"onUpdate:modelValue":e[9]||(e[9]=l=>t.formData.isClamptoGround=l)},null,8,["modelValue"])]),c("div",ye,[e[20]||(e[20]=c("div",{class:"label"},"是否被遮挡",-1)),d(S,{modelValue:t.formData.isOccluded,"onUpdate:modelValue":e[10]||(e[10]=l=>t.formData.isOccluded=l)},null,8,["modelValue"])])])}const Se=U(me,[["render",ve],["__scopeId","data-v-ccf09648"],["__file","PlotEditWidget.vue"]]),be="/img/background.png",Ee=N({__name:"PlottingWidget",setup(p,{expose:e}){const i=b("options"),t=b(k[0]);let n=b(""),s,l;function o(u){l=u.id}function r(u){s=u.pid,u.pid&&K(G.WidgetClosed,s)}function C(u){let I="";return n.value&&u.id===n.value&&(I="cardSelected"),I}let a;async function f(u){switch(n.value=u.id,u.id){case"point":a=new le(h.CesiumViewer);break;case"polyline":a=new ne(h.CesiumViewer);break;case"curve":break;case"polygon":a=new re(h.CesiumViewer);break;case"rectangle":a=new oe(h.CesiumViewer);break;case"circle":a=new se(h.CesiumViewer);break;case"rectangleVolume":a=new ae(h.CesiumViewer);break;case"corridor":a=new de(h.CesiumViewer);break;case"wall":a=new ue(h.CesiumViewer);break;case"circleVolume":a=new x(h.CesiumViewer),a.setStyle({drawType:"circleVolume"});break;case"cylinder":a=new x(h.CesiumViewer),a.setStyle({drawType:"cylinder"});break;case"halfSphere":a=new ce(h.CesiumViewer);break;default:a&&(a.destroy(),a=null);break}a&&a.startCreate()}function w(){n.value="",h.CesiumViewer.entities.removeAll(),a.destroy()}Z(()=>{h.CesiumViewer&&(n.value=h.CesiumViewer.CurrentBasicID)});const y=b(!0);function D(u=!1){y.value=u,l&&u&&q.openWindowPanel(l)}e({changeVisible:D,isShow:y});const _={tab:i,currentType:t,defaultImg:be,get itemSelected(){return n},set itemSelected(u){n=u},get widgetID(){return s},set widgetID(u){s=u},get windowID(){return l},set windowID(u){l=u},loadedHandle:o,doClosePanel:r,getSelectedStyle:C,get drawTools(){return a},set drawTools(u){a=u},selectItem:f,handleClearAll:w,isShow:y,changeVisible:D,get XWindow(){return Q},get plotOptions(){return k},PlotEditWidget:Se};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),Pe={class:"q-py-md q-gutter-sm"},Te={class:"row q-col-gutter-sm"},De={class:"text-center textContent"};function _e(p,e,i,t,n,s){return Y((E(),$(t.XWindow,{isDark:!0,top:"10px",left:"10px",nWidth:"380px",nHeight:"750px",title:"图上标绘",icon:"img/basicimage/arcgis_img.png",pid:"PlottingWidget",onLoaded:t.loadedHandle,onClose:t.doClosePanel},{default:m(()=>[d(z,{style:{height:"100%"}},{default:m(()=>[d(O,{modelValue:t.tab,"onUpdate:modelValue":e[1]||(e[1]=l=>t.tab=l),animated:""},{default:m(()=>[d(M,{name:"options"},{default:m(()=>[c("div",Pe,[d(P,{name:"delete",color:"white",style:{"font-size":"26px",cursor:"pointer"},onClick:t.handleClearAll}),d(P,{name:"edit",color:"white",style:{"font-size":"26px",cursor:"pointer"}}),d(R,{filled:"",dense:"",color:"grey-14","bg-color":"grey-10",modelValue:t.currentType,"onUpdate:modelValue":e[0]||(e[0]=l=>t.currentType=l),options:t.plotOptions},null,8,["modelValue","options"])]),c("div",Te,[(E(!0),T(ie,null,ee(t.currentType.list,(l,o)=>(E(),T("div",{class:"col-4",key:o},[d(H,{class:te(["cardContent",t.getSelectedStyle(l)]),onClick:r=>t.selectItem(l)},{default:m(()=>[d(B,{src:l.img?l.img:t.defaultImg,height:"75px"},null,8,["src"]),c("div",De,W(l.label),1)]),_:2},1032,["class","onClick"])]))),128))])]),_:1}),d(M,{name:"edit"},{default:m(()=>[d(t.PlotEditWidget)]),_:1})]),_:1},8,["modelValue"]),d(X,{modelValue:t.tab,"onUpdate:modelValue":e[2]||(e[2]=l=>t.tab=l),dense:"",align:"justify","narrow-indicator":"",style:{position:"absolute",bottom:"0",width:"100%",color:"#fff"}},{default:m(()=>[d(A,{name:"options",label:"绘制"}),d(A,{name:"edit",label:"编辑"})]),_:1},8,["modelValue"])]),_:1})]),_:1},512)),[[J,t.isShow]])}const We=U(Ee,[["render",_e],["__scopeId","data-v-bf9b3040"],["__file","PlottingWidget.vue"]]);export{We as default};
