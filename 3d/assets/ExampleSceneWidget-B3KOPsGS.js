import{z as b,A as I,B as W}from"./vendor-CDV5M84i.js";import{f as k,_ as E}from"./index-BTOrG-4i.js";import{W as L}from"./WidgetsEvent-TR_R_5Fb.js";import{j as i,E as j,d as D}from"./xframelib-exp-CvTEfE5n.js";import{d as M,r as S,v as B,z as T,G as V,V as P,a1 as d,R as u,Q as m,L as C,M as v,a8 as z,$ as Q,N as A,X as F}from"./@vue-exp-YaP0LnBg.js";import"./@hprose-exp-DifMA6AO.js";import"./vue-router-exp-BeFgxScw.js";import"./axios-exp-BH40TtQM.js";const H=[{id:"budalagong",label:"布达拉宫",type:"photoLayer",source:"/potalaPalace/tileset.json",img:"/img/examples/budalagong.png"},{id:"shengmingkexueyuan",type:"artificialLayer",label:"生命科学园",source:"/lifeSciencePark/tileset.json",img:"/img/background.png"},{id:"jiuyanlou_summer",type:"photoLayer",label:"九眼楼夏季",source:"/jiuyanTowerSummer/tileset.json",img:"/img/background.png"},{id:"jiuyanlou_winter",type:"photoLayer",label:"九眼楼冬季",source:"/jiuyanTowerWinter/tileset.json",img:"/img/background.png"}],N=M({__name:"ExampleSceneWidget",setup(x,{expose:g}){let a=S(""),t="ExampleSceneWidget",r="";function p(e){r=e.id}function n(e){t=e.pid,e.pid&&k(L.WidgetClosed,t)}function l(e){let s="";return a.value&&e.id===a.value&&(s="cardSelected"),s}async function f(e){switch(i.currentTileset&&i.CesiumViewer.scene.primitives.remove(i.currentTileset),a.value=e.id,e.type){}try{let s=function(){const y=Math.floor(Math.random()*w.length);return w[y]+e.source};const w=["http://36.137.243.58:50005","http://36.137.243.147:50005","http://36.137.243.164:50005","http://36.137.243.168:50005","http://36.137.243.228:50005"];let o=await Cesium.Cesium3DTileset.fromUrl(s(),{customShader:new Cesium.CustomShader({lightingModel:Cesium.LightingModel.PBR,fragmentShaderText:`
        // Color tiles by distance to the camera
        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)
        {
            // material.diffuse = vec3(0.0, 0.0, 1.0);
            // material.diffuse.g = -fsInput.attributes.positionEC.z / 1.0e4;
            // material.alpha = 0.5;
            material.specular = vec3(0.98, 0.90, 0.59);
            material.roughness = 0.1;
        }
        `})});if(!o)return;i.CesiumViewer.scene.primitives.add(o),i.currentTileset=o,i.CesiumViewer.zoomTo(o)}catch{i.Message.err("模型加载失败")}}B(()=>{i.CesiumViewer&&(a.value=i.CesiumViewer.CurrentBasicID)});const c=S(!0);function h(e=!1){c.value=e,r&&e&&D.openWindowPanel(r)}g({changeVisible:h,isShow:c});const _={get itemSelected(){return a},set itemSelected(e){a=e},get widgetID(){return t},set widgetID(e){t=e},get windowID(){return r},set windowID(e){r=e},loadedHandle:p,doClosePanel:n,getSelectedStyle:l,selectItem:f,isShow:c,changeVisible:h,get XWindow(){return j},get exampleList(){return H}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),R={class:"row q-col-gutter-sm"},X={class:"text-center textContent"};function q(x,g,a,t,r,p){return T((u(),P(t.XWindow,{isDark:!0,top:"10px",left:"10px",nWidth:"280px",hHeight:"350px",title:"示例",icon:"img/basicimage/arcgis_img.png",pid:"ExampleSceneWidget",onLoaded:t.loadedHandle,onClose:t.doClosePanel},{default:d(()=>[m(W,{style:{height:"100%"}},{default:d(()=>[C("div",R,[(u(!0),v(F,null,z(t.exampleList,(n,l)=>(u(),v("div",{class:"col-6",key:l},[m(b,{class:Q(["cardContent",t.getSelectedStyle(n)]),onClick:f=>t.selectItem(n)},{default:d(()=>[m(I,{src:n.img,height:"75px"},null,8,["src"]),C("div",X,A(n.label),1)]),_:2},1032,["class","onClick"])]))),128))])]),_:1})]),_:1},512)),[[V,t.isShow]])}const ee=E(N,[["render",q],["__scopeId","data-v-dbab6235"],["__file","ExampleSceneWidget.vue"]]);export{ee as default};
