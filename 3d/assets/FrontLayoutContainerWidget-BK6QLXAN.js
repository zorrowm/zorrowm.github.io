import{ah as k,ai as q,x as A,w as O,K as X,A as Q}from"./vendor-qEPl7M71.js";import{_ as B,w as $}from"./index-D2kwV854.js";import{u as j,b as T}from"./vue-router-exp-U1sBIDGE.js";import{h as z,N as H,k as K,e as U,B as w,i as G}from"./xframelib-exp-CBRV2soX.js";import{e as J}from"./monaco-editor-exp-B01XOe8A.js";import{d as I,a as c,w as Y,L as R,M,N as i,W as D,a7 as F,o as Z,D as E,K as ee,e as s,_ as y,a2 as te,V as ne,ab as oe}from"./@vue-exp-Cbz_CXqa.js";import{F as ie}from"./FullScreen-ByrMp4I2.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";const ae=I({__name:"index",props:{leftWidth:k().def("0px")},setup(p,{expose:o}){o();const f=p,e=c(null);let u,r;Y(()=>f.leftWidth,n=>{n&&e.value&&(e.value.style.width=n)});const l=q(function(n){e.value&&(e.value.style.width=r+n.clientX-u+"px")},20),d=()=>{document.documentElement.style.userSelect="unset",document.documentElement.removeEventListener("mousemove",l),document.documentElement.removeEventListener("mouseup",d),z.dispatchWindowResize()},W={props:f,scalable:e,get startX(){return u},set startX(n){u=n},get startWidth(){return r},set startWidth(n){r=n},onDrag:l,dragEnd:d,startDrag:n=>{u=n.clientX,e.value&&(r=parseInt(window.getComputedStyle(e.value).width,10)),document.documentElement.style.userSelect="none",document.documentElement.addEventListener("mousemove",l),document.documentElement.addEventListener("mouseup",d)}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),se={class:"split-wrapper"},re={ref:"scalable",class:"scalable"},le={class:"left-content"},ue={class:"right-content"};function de(p,o,f,e,u,r){return R(),M("div",se,[i("div",re,[i("div",le,[D(p.$slots,"left-content",{},()=>[o[0]||(o[0]=F("右边内容区"))],!0)]),i("div",{ref:"separator",class:"separator",onMousedown:e.startDrag},o[1]||(o[1]=[i("i",null,null,-1),i("i",null,null,-1)]),544)],512),i("div",ue,[D(p.$slots,"right-content",{},()=>[o[2]||(o[2]=F("右边内容区"))],!0)])])}const ce=B(ae,[["render",de],["__scopeId","data-v-d3df8b51"],["__file","index.vue"]]),x="frontLayoutWidget",fe=I({__name:"FrontLayoutContainerWidget",setup(p,{expose:o}){const f=j(),e=T(),u=c(),r=$,l=c(r),d=c(x);let m;H("widgetsList.txt").then(t=>{t.data&&(m=K(t.data))});function W(){n.value=!1,v.value="0px",h.value="",w.gui&&(w.gui.destroy(),w.gui=void 0);const t=e.query?.wid;if(t){const a=w.LayoutMap.get(x);a&&(t=="MapViewerWidget"?a.unloadWidget(t.toString()):(a.unloadWidget(t.toString()),setTimeout(()=>{a.unloadWidget("MapViewerWidget")},500)))}f.push({query:void 0})}const n=c(!0);function C(t=!1){n.value=t}o({changeVisible:C,isShow:n});const v=c("0px"),_=c(""),h=c("");async function P(){if(v.value==="0px"?v.value="40%":v.value="0px",!h.value){const t=e.query?.wid?.toString();if(t&&m){const a=m.find(g=>g.layoutID==="frontLayoutWidget"&&g.id===t);a&&(_.value=a.path,h.value=await(await fetch("./code"+a.path).catch())?.text(),h.value&&S())}}}function N(){v.value="0px"}function L(t){const a=t.lastIndexOf("/")+1;let g=t.substring(a);return g=decodeURI(g.split("?")[0]),g}function V(){if(_.value){const t=L(_.value);G(w.Axios,"code"+_.value,t)}}function S(){const t=document.getElementById("container");t&&(window.MonacoEnvironment={getWorkerUrl:function(a,g){return""}},J.create(t,{value:h.value,language:"typescript",lineNumbers:"on",readOnly:!0,readOnlyMessage:{value:"不可以修改哦",supportThemeIcons:!0,supportHtml:!0},automaticLayout:!0,minimap:{enabled:!1},overviewRulerLanes:0,scrollbar:{horizontal:"hidden",handleMouseWheel:!0}}))}Z(()=>{});const b={name:x,router:f,route:e,containerRef:u,widgetCofig:r,configRef:l,layoutIDRef:d,get widgetsList(){return m},set widgetsList(t){m=t},closeFrontLayoutWidget:W,isShow:n,changeVisible:C,leftPanelWidth:v,widgetFilePath:_,drawerContetn:h,SwitchDrawer:P,closeCodePanel:N,getFileName:L,downloadVue:V,InitMonaCoeditor:S,get LayoutContainer(){return U},SplitPanel:ce,FullScreen:ie};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),me={class:"frontcontainer"},ge={id:"container",ref:"containerRef",style:{height:"100%",width:"100%"}},pe={class:"editorBar row justify-center items-middle"},ve={class:"q-mr-md q-gutter-md"},he={class:"rightBtn q-px-sm"};function _e(p,o,f,e,u,r){const l=ne("Icon"),d=oe("tooltip");return E((R(),M("div",me,[s(A,{view:"hHh lpR fFf"},{default:y(()=>[s(O,null,{default:y(()=>[s(e.SplitPanel,{style:{height:"100vh",width:"100%"},leftWidth:e.leftPanelWidth},{"left-content":y(()=>[i("div",ge,[i("div",pe,[i("div",null,te(e.widgetFilePath),1),s(X),i("div",ve,[E(s(l,{icon:"ant-design:download-outlined",onClick:e.downloadVue},null,512),[[d,"下载vue文件"]]),s(e.FullScreen,{target:e.containerRef},null,8,["target"]),E(s(l,{icon:"ant-design:close-circle-outlined",onClick:e.closeCodePanel},null,512),[[d,"关闭代码页"]])])])],512)]),"right-content":y(()=>[s(e.LayoutContainer,{widgetConfig:e.configRef,layoutID:e.layoutIDRef,enableRouterView:!1},{default:y(()=>[i("div",he,[i("span",{class:"cursor-pointer",title:"关闭",onClick:e.closeFrontLayoutWidget,style:{"margin-right":"10px"}},[s(l,{icon:"ant-design:close-circle-outlined",width:"32",style:{color:"white !important"}})]),s(Q,{flat:"",onClick:o[0]||(o[0]=m=>e.SwitchDrawer()),label:"查看代码",dense:"",icon:"menu"})])]),_:1},8,["widgetConfig","layoutID"])]),_:1},8,["leftWidth"])]),_:1})]),_:1})],512)),[[ee,e.isShow]])}const De=B(fe,[["render",_e],["__scopeId","data-v-db923d93"],["__file","FrontLayoutContainerWidget.vue"]]);export{De as default};
