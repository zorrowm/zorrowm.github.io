import{a0 as b}from"./vendor-qEPl7M71.js";import{B as f}from"./xframelib-exp-CBRV2soX.js";import{d as F,a as _,o as B,C as E,S,_ as w,L as n,N as g,M as c,a6 as h,a2 as v,F as x}from"./@vue-exp-Cbz_CXqa.js";import{_ as D}from"./index-D2kwV854.js";import"./axios-exp-B_zfNCMU.js";import"./@iconify/vue-exp-BeT9ZUzB.js";import"./monaco-editor-exp-B01XOe8A.js";import"./vue-router-exp-U1sBIDGE.js";const C=F({__name:"VectorFeatureWidget",setup(k,{expose:l}){l();let t;function o(e){e.addSource("DemoSourcce",{type:"vector",tiles:["https://vector.gis.digsur.com/vtile/admin/%E5%9B%BD%E9%81%93/{z}/{x}/{y}.mvt?tk=00065a33-7951-4250-b1b2-ab7b871a4aa3"]}),e.addLayer({id:"DemoLayer",type:"line",paint:{"line-color":"#4CE600","line-width":2},layout:{visibility:"visible","line-cap":"round","line-join":"round"},source:"DemoSourcce","source-layer":"国道"}),e.on("click",r)}const p=_(!1),i=_([]);function r(e){var s=t.queryRenderedFeatures(e.point);if(s&&s.length>0)if(i.value.length=0,s.forEach(a=>{if(a.properties&&Object.keys(a.properties).length>0){const y=[];for(var m in a.properties)y.push({key:m,value:a.properties[m]});i.value.push({id:a.layer.id,properties:y})}else i.value.push({id:a.layer.id,properties:[]})}),i.value.length==0)f.Message.info("点击要素暂无信息");else{var d=document.getElementById("clickFeaturePopup");d&&(d.style.top=e.point.y+"px",d.style.left=e.point.x+"px"),p.value=!p.value}}B(()=>{f.map&&(t=f.map,o(t))}),E(()=>{t&&t.off("click",r)});const u={get map(){return t},set map(e){t=e},initMap:o,visible:p,featuresInfo:i,GetFeatureInfo:r};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),P={style:{"max-width":"300px","max-height":"400px",overflow:"auto"}};function I(k,l,t,o,p,i){return n(),S(b,{"model-value":o.visible,target:"#clickFeaturePopup","transition-show":"flip-up","transition-hide":"flip-down",onHide:l[0]||(l[0]=r=>o.visible=!1)},{default:w(()=>[g("div",P,[(n(!0),c(x,null,h(o.featuresInfo,(r,u)=>(n(),c("div",{class:"q-pa-sm",key:u},[g("div",null," 图层名称:"+v(r.id),1),(n(!0),c(x,null,h(r.properties,(e,s)=>(n(),c("div",{key:s},v(e.key)+":"+v(e.value),1))),128))]))),128))])]),_:1},8,["model-value"])}const $=D(C,[["render",I],["__file","VectorFeatureWidget.vue"]]);export{$ as default};
