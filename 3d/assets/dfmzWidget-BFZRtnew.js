import{ak as h,an as C,bn as y,bx as S,at as n,a6 as M,br as L,ao as z,aq as j,bz as x,aH as v,aL as b,bY as O,aW as I}from"./vendor-CDV5M84i.js";import{j as R}from"./xframelib-exp-CvTEfE5n.js";import{d as E,v as W,x as T}from"./@vue-exp-YaP0LnBg.js";import{_ as V}from"./index-urNJi4nj.js";import"./@hprose-exp-DifMA6AO.js";import"./axios-exp-BH40TtQM.js";import"./vue-router-exp-BeFgxScw.js";const $=E({__name:"dfmzWidget",setup(w,{expose:c}){c();let t;function l(a,e){let r=[];for(let o=0;o<a;o++){let i=121.49536592256028+Math.random()*.04*(e?1:-1),s=31.241616722278213+Math.random()*.04*(e?1:-1);r.push({lng:i,lat:s})}return r}function d(){let a=new y("layer-circle").addTo(t),e=l(5,!1);e=e.concat(l(5,!0)),e.forEach(r=>{let o=new S(r,200);o.setStyle({speed:8*Math.random(),color:n.GREEN}),a.addOverlay(o)})}function m(){let a=new y("vLine_layer");t.addLayer(a);let e=l(50,!0);e=e.concat(l(50,!1)),e.forEach(r=>{let o=M.fromObject(r),i=o.copy();i.alt=5e3*Math.random();let s=new L([o,i],.5);s.setStyle({speed:6*Math.random(),color:n.fromCssColorString("rgb(141,172,172)"),percent:.1,gradient:.01}),a.addOverlay(s)})}function f(){let a=new z("layer_build");t.addLayer(a);let e=new j("//resource.dvgis.cn/data/3dtiles/ljz/tileset.json",{skipLevels:!0}),r=`
        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
         vec4 position = czm_inverseModelView * vec4(fsInput.attributes.positionEC,1); // 位置
         float glowRange = 100.0; // 光环的移动范围(高度)
         vec4 temp = vec4(0.2,  0.5, 1.0, 1.0); // 颜色
         temp *= vec4(vec3(position.z / 100.0), 1.0);  // 渐变
         // 动态光环
         float time = fract(czm_frameNumber / 360.0);
         time = abs(time - 0.5) * 2.0;
         float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));
         material.diffuse = vec3(temp.rgb + temp.rgb * (1.0 - diff)) ;
       }
      `,o=new x({fragmentShaderText:r});e.setCustomShader(o),a.addOverlay(e)}function p(){new v("layer_river","SampleData/data/hpj.geojson").addTo(t).eachOverlay(e=>{b.merge(e.polygon,{outline:!1,material:new O({normalMap:"product/icon/waterNormalsSmall.jpg",frequency:1e3,animationSpeed:.01,amplitude:100,specularIntensity:1})})})}function u(){let a=new v("layer_road","SampleData/data/road_ljz.geojson"),e=[n.fromCssColorString("rgb(34,80,186)"),n.fromCssColorString("rgb(247,155,251)"),n.fromCssColorString("rgb(97,234,181)"),n.fromCssColorString("rgb(203,77,46)")];a.eachOverlay(r=>{r.polyline&&b.merge(r.polyline,{material:new I({speed:10,color:e[Math.floor(4*Math.random())]}),width:2})}),t.addLayer(a)}function _(){t=R.CesiumViewer;let a=h.createAMapImageryLayer({style:"img"});t.addBaseLayer(a,{brightness:.6}),t.setOptions({enableFxaa:!0});const e=new C(t);e.bloom.enable=!0,t.flyToPosition("121.49437363,31.2070558,2705.19,0.6,-43.06",()=>{p(),d(),m(),f(),u()})}W(()=>{_()}),T(()=>{t&&(t.clearLayers(),t.setBasicLayer("ARCGIS_IMG"))});const g={get viewer(){return t},set viewer(a){t=a},generatePosition:l,loadCircle:d,loadVLine:m,loadBuild:f,loadRiver:p,loadRoad:u,initViewer:_};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}});function k(w,c,t,l,d,m){return null}const F=V($,[["render",k],["__file","dfmzWidget.vue"]]);export{F as default};
