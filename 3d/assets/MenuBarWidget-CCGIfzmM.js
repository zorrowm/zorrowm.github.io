import{n as V,o as R,p as P,C as j,w as A,x as H,j as N}from"./vendor-6kqmRazU.js";import{u as O}from"./vue-router-exp-BxGuMefC.js";import{j as l}from"./xframelib-exp-CPl8XRlL.js";import{m as x,d as U,M as _,_ as E,e as z}from"./index-CTmLOYTS.js";import{W as T}from"./WidgetsEvent-TR_R_5Fb.js";import{A as D}from"./index-DqVgtHHN.js";import{d as q,r as v,R as i,M as d,X as M,a8 as L,V as C,a1 as k,Q as b,z as F,a9 as X,N as G,$ as B}from"./@vue-exp-BA8o4xMK.js";import"./@hprose-exp-BDOQuVAD.js";import"./axios-exp-BH40TtQM.js";const J=q({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:x}},setup(g,{expose:f}){f();const r=g,n=v(r.menuData),w=v(x.length),u=O(),o=new Map,p=v(o);function s(e){switch(e.type){case _.URL:window.open(e.path,"_blank");break;case _.Route:if(e.blank){if(e.path){let t=u.resolve({path:e.path});window.open(t.href,"_blank")}}else e.path&&u.push({path:e.path});break;case _.Action:const a=e.path;a&&D[a]&&D[a](e);break;case _.Widget:if(e.path){const t=l.LayoutMap.get(r.layoutID);if(!t){l.Message.warn(`LayoutID:${r.layoutID}的Manager不存在`);return}h(t,e),e.selected=!e.selected,p.value.set(e.name,e.selected)}else l.Message.warn(`加载${e.name} Widget:缺少WidgetID!`);break}}function h(e,a){a.path&&(a.selected?(a.unload?(l.Logger().info("卸载widget: "+a.path),e.unloadWidget(a.path)):(l.Logger().info("隐藏widget: "+a.path),e.changeWidgetVisible(a.path,!1)),a.children&&a.children.forEach(t=>{t.selected&&(l.Logger().info(`递归控制${a.path}的子Widget:`+t.path),h(e,t),t.selected=!t.selected)})):e.isWidgetLoaded(a.path)?(l.Logger().info("显示widget: "+a.path),e.changeWidgetVisible(a.path,!0)):(e.loadWidget(a.path),l.Logger().info("加载Widget："+a.path)))}U(T.WidgetClosed,y);function y(e){const a=l.LayoutMap.get(r.layoutID);n.value.forEach(t=>{t.path===e&&(t.selected=!1,a.unloadWidget(t.path)),t.children&&t.children.forEach(S=>{S.path===e&&(S.selected=!1,a.unloadWidget(S.path))})})}const c=v();function $(e,a){const t=e.label;if(c.value)c.value.label!=t&&(c.value.state=!1),c.value=e,e.state=a;else{c.value=e,e.state=a;return}}function Q(e){return p.value?.has(e.name)&&p.value.get(e.name)?"menuBarItem active":"menuBarItem"}const W={props:r,dataRef:n,itemLength:w,router:u,selectedMapList:o,selectedMap:p,menuClickHandler:s,controlMenuWidget:h,removeSelecte:y,currentItem:c,setShowState:$,getClass:Q};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),K={class:"row gt-xs q-gutter-xs pageMenuContainer"};function Y(g,f,r,n,w,u){return i(),d("div",K,[(i(!0),d(M,null,L(n.dataRef,(o,p)=>(i(),d(M,{key:o.name},[o.children?(i(),C(H,{key:0,"model-value":o.state,"onUpdate:modelValue":s=>o.state=s,"transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:o.name,onMouseover:s=>n.setShowState(o,!0),class:B(n.getClass(o))},{default:k(()=>[b(V,{style:{"min-width":"100px"},onMouseover:s=>n.setShowState(o,!0),onMouseleave:s=>n.setShowState(o,!1)},{default:k(()=>[(i(!0),d(M,null,L(o.children,(s,h)=>(i(),d(M,{key:s.name},[F((i(),C(R,{clickable:"",onClick:y=>n.menuClickHandler(s)},{default:k(()=>[b(P,null,{default:k(()=>[X(G(s.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[j]]),b(A)],64))),128))]),_:2},1032,["onMouseover","onMouseleave"])]),_:2},1032,["model-value","onUpdate:modelValue","label","onMouseover","class"])):(i(),C(N,{key:1,color:"black",flat:"",label:o.name,onClick:s=>n.menuClickHandler(o),onMouseover:s=>n.setShowState(o,!1),class:B(n.getClass(o))},null,8,["label","onClick","onMouseover","class"]))],64))),128))])}const Z=E(J,[["render",Y],["__file","index.vue"]]),I="bigScreenLayout",m={__name:"MenuBarWidget",setup(g,{expose:f}){f();const r={layoutID:I,PageMenu:Z,get mainMenu(){return z}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function ee(g,f,r,n,w,u){return i(),d("div",null,[b(n.PageMenu,{menuData:n.mainMenu,layoutID:n.layoutID},null,8,["menuData"])])}const de=E(m,[["render",ee],["__scopeId","data-v-5b4046d7"],["__file","MenuBarWidget.vue"]]);export{de as default};
