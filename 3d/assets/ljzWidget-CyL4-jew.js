import{j as w}from"./xframelib-exp-CvTEfE5n.js";import{bJ as j,ao as O,aq as h,aH as z,aL as S,aW as C,at as o,bn as c,a6 as p,br as b,bs as L,bx as x}from"./vendor-CDV5M84i.js";import{d as M,v as R}from"./@vue-exp-YaP0LnBg.js";import{_ as I}from"./index-DPO_t7vI.js";import"./axios-exp-BH40TtQM.js";import"./@hprose-exp-DifMA6AO.js";import"./vue-router-exp-BeFgxScw.js";const W=M({__name:"ljzWidget",setup(v,{expose:m}){m();let t;function r(){let e=new O("layer_build").addTo(t),a=new h("//resource.dvgis.cn/data/3dtiles/ljz/tileset.json",{skipLevels:!0});a.setCustomShader(`
        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
         vec4 position = czm_inverseModelView * vec4(fsInput.attributes.positionEC,1); // 位置
         float glowRange = 100.0; // 光环的移动范围(高度)
         vec4 temp = vec4(0.2,  0.5, 1.0, 1.0); // 颜色
         temp *= vec4(vec3(position.z / 100.0), 1.0);  // 渐变
         // 动态光环
         float time = fract(czm_frameNumber / 360.0);
         time = abs(time - 0.5) * 2.0;
         float diff = step(0.005, abs( clamp(position.z / glowRange, 0.0, 1.0) - time));
         material.diffuse = vec3(temp.rgb + temp.rgb * (1.0 - diff)) ;
       }
      `),e.addOverlay(a)}function i(){let e=new z("layer_road","SampleData/data/road_ljz.geojson");e.eachOverlay(a=>{a.polyline&&S.merge(a.polyline,{material:new C({speed:5,color:o.ORANGE.withAlpha(.5)}),width:2})}),t.addLayer(e)}function s(){let e=new c("line_layer");t.addLayer(e);let a=p.fromObject({lng:121.49536592256028,lat:31.241616722278213});[{lng:121.46575474842851,lat:31.25491511358896},{lng:121.4813104277516,lat:31.227003838010212},{lng:121.50657363869442,lat:31.227646614453125},{lng:121.52418391477424,lat:31.25831768661698},{lng:121.51534816216447,lat:31.238932318412797},{lng:121.47411195956543,lat:31.23653254767207},{lng:121.4948618756933,lat:31.22694576870397},{lng:121.49695060106232,lat:31.275195479192174},{lng:121.46575474842851,lat:31.25491511358896},{lng:121.4813104277516,lat:31.227003838010212},{lng:121.50657363869442,lat:31.227646614453125},{lng:121.52418391477424,lat:31.25831768661698},{lng:121.51534816216447,lat:31.238932318412797},{lng:121.47411195956543,lat:31.23653254767207},{lng:121.4948618756933,lat:31.22694576870397},{lng:121.49695060106232,lat:31.275195479192174}].map(l=>p.fromObject(l)).forEach(l=>{let n=new b(L.parabola(a,l,500),3);n.setStyle({speed:5*Math.random(),color:new o(.5,.8,1,1)}),e.addOverlay(n)})}function f(){let e=new c("layer-circle").addTo(t),a=new x("121.49536592256028,31.241616722278213",5e3);a.setStyle({speed:6,color:new o(.5,.8,1,1)}),e.addOverlay(a)}function g(){let e=new c("vLine_layer");t.addLayer(e),[{lng:121.47345213010999,lat:31.255897743532817},{lng:121.48003080908789,lat:31.238221981850913},{lng:121.48587705354248,lat:31.23057714185711},{lng:121.4879953677747,lat:31.262151572375352},{lng:121.50906299339611,lat:31.250152480540006},{lng:121.50417770232045,lat:31.24023424714257},{lng:121.5182173410024,lat:31.254527578802833},{lng:121.50967147857085,lat:31.35601077672074},{lng:121.51899277846763,lat:31.245648856298804}].forEach(d=>{let l=p.fromObject(d),n=l.copy();n.alt=1e3*Math.random();let y=new b([l,n],3);y.setStyle({speed:5,color:new o(.5,.8,1,1)}),e.addOverlay(y)})}function u(){t=w.CesiumViewer,t.setBasicLayer("ARCGIS_IMG"),t.setOptions({enableFxaa:!0}),t.effect.bloom.enable=!0,new j(t,{duration:5,callback:()=>{t.flyToPosition("121.50995868,31.20091392,4405.64,344.2,-46.66",()=>{r(),i(),s(),f(),g()})}}).start()}R(()=>{u()});const _={get viewer(){return t},set viewer(e){t=e},loadBuild:r,loadRoad:i,loadParabola:s,loadCircle:f,loadVLine:g,initViewer:u};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}});function k(v,m,t,r,i,s){return null}const B=I(W,[["render",k],["__file","ljzWidget.vue"]]);export{B as default};
