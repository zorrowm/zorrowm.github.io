const t=globalThis||self,e=Symbol("Comlink.proxy"),n=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.finalizer"),i=Symbol("Comlink.thrown"),a=t=>"object"==typeof t&&null!==t||"function"==typeof t,s={canHandle:t=>a(t)&&t[e],serialize(t){const{port1:e,port2:n}=new MessageChannel;return c(t,e),[n,[n]]},deserialize:t=>(t.start(),function(t){const e=new Map;return t.addEventListener("message",(function(t){const{data:n}=t;if(!n||!n.id)return;const r=e.get(n.id);if(r)try{r(n)}finally{e.delete(n.id)}})),m(t,e,[],void 0)}(t))},u=new Map([["proxy",s],["throw",{canHandle:t=>a(t)&&i in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c(t,n=globalThis,r=["*"]){n.addEventListener("message",(function a(s){if(!s||!s.data)return;if(!function(t,e){for(const n of t){if(e===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}return!1}(r,s.origin))return;const{id:u,type:f,path:h}=Object.assign({path:[]},s.data),p=(s.data.argumentList||[]).map(O);let d;try{const n=h.slice(0,-1).reduce(((t,e)=>t[e]),t),r=h.reduce(((t,e)=>t[e]),t);switch(f){case"GET":d=r;break;case"SET":n[h.slice(-1)[0]]=O(s.data.value),d=!0;break;case"APPLY":d=r.apply(n,p);break;case"CONSTRUCT":m=new r(...p),d=Object.assign(m,{[e]:!0});break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;c(t,n),d=function(t,e){return g.set(t,e),t}(e,[e])}break;case"RELEASE":d=void 0;break;default:return}}catch(dn){d={value:dn,[i]:0}}var m;Promise.resolve(d).catch((t=>({value:t,[i]:0}))).then((e=>{const[r,i]=_(e);n.postMessage(Object.assign(Object.assign({},r),{id:u}),i),"RELEASE"===f&&(n.removeEventListener("message",a),l(n),o in t&&"function"==typeof t[o]&&t[o]())})).catch((t=>{const[e,r]=_({value:new TypeError("Unserializable return value"),[i]:0});n.postMessage(Object.assign(Object.assign({},e),{id:u}),r)}))})),n.start&&n.start()}function l(t){"MessagePort"===t.constructor.name&&t.close()}function f(t){if(t)throw new Error("Proxy has been released and is not useable")}function h(t){return E(t,new Map,{type:"RELEASE"}).then((()=>{l(t)}))}const p=new WeakMap,d="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(p.get(t)||0)-1;p.set(t,e),0===e&&h(t)}));function m(t,e,o=[],i=function(){}){let a=!1;const s=new Proxy(i,{get(n,i){if(f(a),i===r)return()=>{var n;n=s,d&&d.unregister(n),h(t),e.clear(),a=!0};if("then"===i){if(0===o.length)return{then:()=>s};const n=E(t,e,{type:"GET",path:o.map((t=>t.toString()))}).then(O);return n.then.bind(n)}return m(t,e,[...o,i])},set(n,r,i){f(a);const[s,u]=_(i);return E(t,e,{type:"SET",path:[...o,r].map((t=>t.toString())),value:s},u).then(O)},apply(r,i,s){f(a);const u=o[o.length-1];if(u===n)return E(t,e,{type:"ENDPOINT"}).then(O);if("bind"===u)return m(t,e,o.slice(0,-1));const[c,l]=y(s);return E(t,e,{type:"APPLY",path:o.map((t=>t.toString())),argumentList:c},l).then(O)},construct(n,r){f(a);const[i,s]=y(r);return E(t,e,{type:"CONSTRUCT",path:o.map((t=>t.toString())),argumentList:i},s).then(O)}});return function(t,e){const n=(p.get(e)||0)+1;p.set(e,n),d&&d.register(t,e,t)}(s,t),s}function y(t){const e=t.map(_);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const g=new WeakMap;function _(t){for(const[e,n]of u)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},g.get(t)||[]]}function O(t){switch(t.type){case"HANDLER":return u.get(t.name).deserialize(t.value);case"RAW":return t.value}}function E(t,e,n,r){return new Promise((o=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.set(i,o),t.start&&t.start(),t.postMessage(Object.assign({id:i},n),r)}))}function w(t){return null!=t}function b(t){let e;this.name="DeveloperError",this.message=t;try{throw new Error}catch(n){e=n.stack}this.stack=e}w(Object.create)&&(b.prototype=Object.create(Error.prototype),b.prototype.constructor=b),b.prototype.toString=function(){let t=`${this.name}: ${this.message}`;return w(this.stack)&&(t+=`\n${this.stack.toString()}`),t},b.throwInstantiationError=function(){throw new b("This function defines an interface and should not be called directly.")};const T={};function R(t,e,n){return`Expected ${n} to be typeof ${e}, actual typeof was ${t}`}T.typeOf={},T.defined=function(t,e){if(!w(e))throw new b(`${t} is required, actual value was undefined`)},T.typeOf.func=function(t,e){if("function"!=typeof e)throw new b(R(typeof e,"function",t))},T.typeOf.string=function(t,e){if("string"!=typeof e)throw new b(R(typeof e,"string",t))},T.typeOf.number=function(t,e){if("number"!=typeof e)throw new b(R(typeof e,"number",t))},T.typeOf.number.lessThan=function(t,e,n){if(T.typeOf.number(t,e),e>=n)throw new b(`Expected ${t} to be less than ${n}, actual value was ${e}`)},T.typeOf.number.lessThanOrEquals=function(t,e,n){if(T.typeOf.number(t,e),e>n)throw new b(`Expected ${t} to be less than or equal to ${n}, actual value was ${e}`)},T.typeOf.number.greaterThan=function(t,e,n){if(T.typeOf.number(t,e),e<=n)throw new b(`Expected ${t} to be greater than ${n}, actual value was ${e}`)},T.typeOf.number.greaterThanOrEquals=function(t,e,n){if(T.typeOf.number(t,e),e<n)throw new b(`Expected ${t} to be greater than or equal to ${n}, actual value was ${e}`)},T.typeOf.object=function(t,e){if("object"!=typeof e)throw new b(R(typeof e,"object",t))},T.typeOf.bool=function(t,e){if("boolean"!=typeof e)throw new b(R(typeof e,"boolean",t))},T.typeOf.bigint=function(t,e){if("bigint"!=typeof e)throw new b(R(typeof e,"bigint",t))},T.typeOf.number.equals=function(t,e,n,r){if(T.typeOf.number(t,n),T.typeOf.number(e,r),n!==r)throw new b(`${t} must be equal to ${e}, the actual values are ${n} and ${r}`)};var A,S,x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function M(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I=function(){if(S)return A;S=1;var t=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};return t.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++)t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0},t.prototype.init_by_array=function(t,e){var n,r,o;for(this.init_seed(19650218),n=1,r=0,o=this.N>e?this.N:e;o;o--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+t[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=e&&(r=0)}for(o=this.N-1;o;o--)i=this.mt[n-1]^this.mt[n-1]>>>30,this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1);this.mt[0]=2147483648},t.prototype.random_int=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^e[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},A=t}(),N=M(I);const P={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};P.sign=Math.sign??function(t){return 0==(t=+t)||t!=t?t:t>0?1:-1},P.signNotZero=function(t){return t<0?-1:1},P.toSNorm=function(t,e){return e=e??255,Math.round((.5*P.clamp(t,-1,1)+.5)*e)},P.fromSNorm=function(t,e){return e=e??255,P.clamp(t,0,e)/e*2-1},P.normalize=function(t,e,n){return 0===(n=Math.max(n-e,0))?0:P.clamp((t-e)/n,0,1)},P.sinh=Math.sinh??function(t){return(Math.exp(t)-Math.exp(-t))/2},P.cosh=Math.cosh??function(t){return(Math.exp(t)+Math.exp(-t))/2},P.lerp=function(t,e,n){return(1-n)*t+n*e},P.PI=Math.PI,P.ONE_OVER_PI=1/Math.PI,P.PI_OVER_TWO=Math.PI/2,P.PI_OVER_THREE=Math.PI/3,P.PI_OVER_FOUR=Math.PI/4,P.PI_OVER_SIX=Math.PI/6,P.THREE_PI_OVER_TWO=3*Math.PI/2,P.TWO_PI=2*Math.PI,P.ONE_OVER_TWO_PI=1/(2*Math.PI),P.RADIANS_PER_DEGREE=Math.PI/180,P.DEGREES_PER_RADIAN=180/Math.PI,P.RADIANS_PER_ARCSECOND=P.RADIANS_PER_DEGREE/3600,P.toRadians=function(t){if(!w(t))throw new b("degrees is required.");return t*P.RADIANS_PER_DEGREE},P.toDegrees=function(t){if(!w(t))throw new b("radians is required.");return t*P.DEGREES_PER_RADIAN},P.convertLongitudeRange=function(t){if(!w(t))throw new b("angle is required.");const e=P.TWO_PI,n=t-Math.floor(t/e)*e;return n<-Math.PI?n+e:n>=Math.PI?n-e:n},P.clampToLatitudeRange=function(t){if(!w(t))throw new b("angle is required.");return P.clamp(t,-1*P.PI_OVER_TWO,P.PI_OVER_TWO)},P.negativePiToPi=function(t){if(!w(t))throw new b("angle is required.");return t>=-P.PI&&t<=P.PI?t:P.zeroToTwoPi(t+P.PI)-P.PI},P.zeroToTwoPi=function(t){if(!w(t))throw new b("angle is required.");if(t>=0&&t<=P.TWO_PI)return t;const e=P.mod(t,P.TWO_PI);return Math.abs(e)<P.EPSILON14&&Math.abs(t)>P.EPSILON14?P.TWO_PI:e},P.mod=function(t,e){if(!w(t))throw new b("m is required.");if(!w(e))throw new b("n is required.");if(0===e)throw new b("divisor cannot be 0.");return P.sign(t)===P.sign(e)&&Math.abs(t)<Math.abs(e)?t:(t%e+e)%e},P.equalsEpsilon=function(t,e,n,r){if(!w(t))throw new b("left is required.");if(!w(e))throw new b("right is required.");n=n??0,r=r??n;const o=Math.abs(t-e);return o<=r||o<=n*Math.max(Math.abs(t),Math.abs(e))},P.lessThan=function(t,e,n){if(!w(t))throw new b("first is required.");if(!w(e))throw new b("second is required.");if(!w(n))throw new b("absoluteEpsilon is required.");return t-e<-n},P.lessThanOrEquals=function(t,e,n){if(!w(t))throw new b("first is required.");if(!w(e))throw new b("second is required.");if(!w(n))throw new b("absoluteEpsilon is required.");return t-e<n},P.greaterThan=function(t,e,n){if(!w(t))throw new b("first is required.");if(!w(e))throw new b("second is required.");if(!w(n))throw new b("absoluteEpsilon is required.");return t-e>n},P.greaterThanOrEquals=function(t,e,n){if(!w(t))throw new b("first is required.");if(!w(e))throw new b("second is required.");if(!w(n))throw new b("absoluteEpsilon is required.");return t-e>-n};const C=[1];P.factorial=function(t){if("number"!=typeof t||t<0)throw new b("A number greater than or equal to 0 is required.");const e=C.length;if(t>=e){let n=C[e-1];for(let r=e;r<=t;r++){const t=n*r;C.push(t),n=t}}return C[t]},P.incrementWrap=function(t,e,n){if(n=n??0,!w(t))throw new b("n is required.");if(e<=n)throw new b("maximumValue must be greater than minimumValue.");return++t>e&&(t=n),t},P.isPowerOfTwo=function(t){if("number"!=typeof t||t<0||t>4294967295)throw new b("A number between 0 and (2^32)-1 is required.");return 0!==t&&!(t&t-1)},P.nextPowerOfTwo=function(t){if("number"!=typeof t||t<0||t>2147483648)throw new b("A number between 0 and 2^31 is required.");return--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},P.previousPowerOfTwo=function(t){if("number"!=typeof t||t<0||t>4294967295)throw new b("A number between 0 and (2^32)-1 is required.");return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,((t|=t>>32)>>>0)-(t>>>1)},P.clamp=function(t,e,n){return T.typeOf.number("value",t),T.typeOf.number("min",e),T.typeOf.number("max",n),t<e?e:t>n?n:t};let v=new N;function q(t,e,n){this.x=t??0,this.y=e??0,this.z=n??0}P.setRandomNumberSeed=function(t){if(!w(t))throw new b("seed is required.");v=new N(t)},P.nextRandomNumber=function(){return v.random()},P.randomBetween=function(t,e){return P.nextRandomNumber()*(e-t)+t},P.acosClamped=function(t){if(!w(t))throw new b("value is required.");return Math.acos(P.clamp(t,-1,1))},P.asinClamped=function(t){if(!w(t))throw new b("value is required.");return Math.asin(P.clamp(t,-1,1))},P.chordLength=function(t,e){if(!w(t))throw new b("angle is required.");if(!w(e))throw new b("radius is required.");return 2*e*Math.sin(.5*t)},P.logBase=function(t,e){if(!w(t))throw new b("number is required.");if(!w(e))throw new b("base is required.");return Math.log(t)/Math.log(e)},P.cbrt=Math.cbrt??function(t){const e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},P.log2=Math.log2??function(t){return Math.log(t)*Math.LOG2E},P.fog=function(t,e){const n=t*e;return 1-Math.exp(-n*n)},P.fastApproximateAtan=function(t){return T.typeOf.number("x",t),t*(-.1784*Math.abs(t)-.0663*t*t+1.0301)},P.fastApproximateAtan2=function(t,e){let n;T.typeOf.number("x",t),T.typeOf.number("y",e);let r=Math.abs(t);n=Math.abs(e);const o=Math.max(r,n);n=Math.min(r,n);const i=n/o;if(isNaN(i))throw new b("either x or y must be nonzero");return r=P.fastApproximateAtan(i),r=Math.abs(e)>Math.abs(t)?P.PI_OVER_TWO-r:r,r=t<0?P.PI-r:r,r=e<0?-r:r,r},q.fromSpherical=function(t,e){T.typeOf.object("spherical",t),w(e)||(e=new q);const n=t.clock,r=t.cone,o=t.magnitude??1,i=o*Math.sin(r);return e.x=i*Math.cos(n),e.y=i*Math.sin(n),e.z=o*Math.cos(r),e},q.fromElements=function(t,e,n,r){return w(r)?(r.x=t,r.y=e,r.z=n,r):new q(t,e,n)},q.clone=function(t,e){if(w(t))return w(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e):new q(t.x,t.y,t.z)},q.fromCartesian4=q.clone,q.packedLength=3,q.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n]=t.z,e},q.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new q),n.x=t[e++],n.y=t[e++],n.z=t[e],n},q.packArray=function(t,e){T.defined("array",t);const n=t.length,r=3*n;if(w(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 3 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)q.pack(t[o],e,3*o);return e},q.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,3),t.length%3!=0)throw new b("array length must be a multiple of 3.");const n=t.length;w(e)?e.length=n/3:e=new Array(n/3);for(let r=0;r<n;r+=3){const n=r/3;e[n]=q.unpack(t,r,e[n])}return e},q.fromArray=q.unpack,q.maximumComponent=function(t){return T.typeOf.object("cartesian",t),Math.max(t.x,t.y,t.z)},q.minimumComponent=function(t){return T.typeOf.object("cartesian",t),Math.min(t.x,t.y,t.z)},q.minimumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.z=Math.min(t.z,e.z),n},q.maximumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.z=Math.max(t.z,e.z),n},q.clamp=function(t,e,n,r){T.typeOf.object("value",t),T.typeOf.object("min",e),T.typeOf.object("max",n),T.typeOf.object("result",r);const o=P.clamp(t.x,e.x,n.x),i=P.clamp(t.y,e.y,n.y),a=P.clamp(t.z,e.z,n.z);return r.x=o,r.y=i,r.z=a,r},q.magnitudeSquared=function(t){return T.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y+t.z*t.z},q.magnitude=function(t){return Math.sqrt(q.magnitudeSquared(t))};const j=new q;q.distance=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),q.subtract(t,e,j),q.magnitude(j)},q.distanceSquared=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),q.subtract(t,e,j),q.magnitudeSquared(j)},q.normalize=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=q.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n,isNaN(e.x)||isNaN(e.y)||isNaN(e.z))throw new b("normalized result is not a number");return e},q.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z},q.multiplyComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n},q.divideComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n},q.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n},q.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n},q.multiplyByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n},q.divideByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n},q.negate=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e},q.abs=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e.z=Math.abs(t.z),e};const U=new q;q.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),q.multiplyByScalar(e,n,U),r=q.multiplyByScalar(t,1-n,r),q.add(U,r,r)};const z=new q,D=new q;q.angleBetween=function(t,e){T.typeOf.object("left",t),T.typeOf.object("right",e),q.normalize(t,z),q.normalize(e,D);const n=q.dot(z,D),r=q.magnitude(q.cross(z,D,z));return Math.atan2(r,n)};const L=new q;q.mostOrthogonalAxis=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=q.normalize(t,L);return q.abs(n,n),n.x<=n.y?n.x<=n.z?q.clone(q.UNIT_X,e):q.clone(q.UNIT_Z,e):n.y<=n.z?q.clone(q.UNIT_Y,e):q.clone(q.UNIT_Z,e)},q.projectVector=function(t,e,n){T.defined("a",t),T.defined("b",e),T.defined("result",n);const r=q.dot(t,e)/q.dot(e,e);return q.multiplyByScalar(e,r,n)},q.equals=function(t,e){return t===e||w(t)&&w(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z},q.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]&&t.z===e[n+2]},q.equalsEpsilon=function(t,e,n,r){return t===e||w(t)&&w(e)&&P.equalsEpsilon(t.x,e.x,n,r)&&P.equalsEpsilon(t.y,e.y,n,r)&&P.equalsEpsilon(t.z,e.z,n,r)},q.cross=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t.x,o=t.y,i=t.z,a=e.x,s=e.y,u=e.z,c=o*u-i*s,l=i*a-r*u,f=r*s-o*a;return n.x=c,n.y=l,n.z=f,n},q.midpoint=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=.5*(t.x+e.x),n.y=.5*(t.y+e.y),n.z=.5*(t.z+e.z),n},q.fromDegrees=function(t,e,n,r,o){return T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),t=P.toRadians(t),e=P.toRadians(e),q.fromRadians(t,e,n,r,o)};let F=new q,B=new q;function k(t,e,n,r){this.x=t??0,this.y=e??0,this.z=n??0,this.w=r??0}q._ellipsoidRadiiSquared=new q(40680631590769,40680631590769,40408299984661.445),q.fromRadians=function(t,e,n,r,o){T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),n=n??0;const i=w(r)?r.radiiSquared:q._ellipsoidRadiiSquared,a=Math.cos(e);F.x=a*Math.cos(t),F.y=a*Math.sin(t),F.z=Math.sin(e),F=q.normalize(F,F),q.multiplyComponents(i,F,B);const s=Math.sqrt(q.dot(F,B));return B=q.divideByScalar(B,s,B),F=q.multiplyByScalar(F,n,F),w(o)||(o=new q),q.add(B,F,o)},q.fromDegreesArray=function(t,e,n){if(T.defined("coordinates",t),t.length<2||t.length%2!=0)throw new b("the number of coordinates must be a multiple of 2 and at least 2");const r=t.length;w(n)?n.length=r/2:n=new Array(r/2);for(let o=0;o<r;o+=2){const r=t[o],i=t[o+1],a=o/2;n[a]=q.fromDegrees(r,i,0,e,n[a])}return n},q.fromRadiansArray=function(t,e,n){if(T.defined("coordinates",t),t.length<2||t.length%2!=0)throw new b("the number of coordinates must be a multiple of 2 and at least 2");const r=t.length;w(n)?n.length=r/2:n=new Array(r/2);for(let o=0;o<r;o+=2){const r=t[o],i=t[o+1],a=o/2;n[a]=q.fromRadians(r,i,0,e,n[a])}return n},q.fromDegreesArrayHeights=function(t,e,n){if(T.defined("coordinates",t),t.length<3||t.length%3!=0)throw new b("the number of coordinates must be a multiple of 3 and at least 3");const r=t.length;w(n)?n.length=r/3:n=new Array(r/3);for(let o=0;o<r;o+=3){const r=t[o],i=t[o+1],a=t[o+2],s=o/3;n[s]=q.fromDegrees(r,i,a,e,n[s])}return n},q.fromRadiansArrayHeights=function(t,e,n){if(T.defined("coordinates",t),t.length<3||t.length%3!=0)throw new b("the number of coordinates must be a multiple of 3 and at least 3");const r=t.length;w(n)?n.length=r/3:n=new Array(r/3);for(let o=0;o<r;o+=3){const r=t[o],i=t[o+1],a=t[o+2],s=o/3;n[s]=q.fromRadians(r,i,a,e,n[s])}return n},q.ZERO=Object.freeze(new q(0,0,0)),q.ONE=Object.freeze(new q(1,1,1)),q.UNIT_X=Object.freeze(new q(1,0,0)),q.UNIT_Y=Object.freeze(new q(0,1,0)),q.UNIT_Z=Object.freeze(new q(0,0,1)),q.prototype.clone=function(t){return q.clone(this,t)},q.prototype.equals=function(t){return q.equals(this,t)},q.prototype.equalsEpsilon=function(t,e,n){return q.equalsEpsilon(this,t,e,n)},q.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`},k.fromElements=function(t,e,n,r,o){return w(o)?(o.x=t,o.y=e,o.z=n,o.w=r,o):new k(t,e,n,r)},k.fromColor=function(t,e){return T.typeOf.object("color",t),w(e)?(e.x=t.red,e.y=t.green,e.z=t.blue,e.w=t.alpha,e):new k(t.red,t.green,t.blue,t.alpha)},k.clone=function(t,e){if(w(t))return w(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e):new k(t.x,t.y,t.z,t.w)},k.packedLength=4,k.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n++]=t.z,e[n]=t.w,e},k.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new k),n.x=t[e++],n.y=t[e++],n.z=t[e++],n.w=t[e],n},k.packArray=function(t,e){T.defined("array",t);const n=t.length,r=4*n;if(w(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 4 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)k.pack(t[o],e,4*o);return e},k.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,4),t.length%4!=0)throw new b("array length must be a multiple of 4.");const n=t.length;w(e)?e.length=n/4:e=new Array(n/4);for(let r=0;r<n;r+=4){const n=r/4;e[n]=k.unpack(t,r,e[n])}return e},k.fromArray=k.unpack,k.maximumComponent=function(t){return T.typeOf.object("cartesian",t),Math.max(t.x,t.y,t.z,t.w)},k.minimumComponent=function(t){return T.typeOf.object("cartesian",t),Math.min(t.x,t.y,t.z,t.w)},k.minimumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.z=Math.min(t.z,e.z),n.w=Math.min(t.w,e.w),n},k.maximumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.z=Math.max(t.z,e.z),n.w=Math.max(t.w,e.w),n},k.clamp=function(t,e,n,r){T.typeOf.object("value",t),T.typeOf.object("min",e),T.typeOf.object("max",n),T.typeOf.object("result",r);const o=P.clamp(t.x,e.x,n.x),i=P.clamp(t.y,e.y,n.y),a=P.clamp(t.z,e.z,n.z),s=P.clamp(t.w,e.w,n.w);return r.x=o,r.y=i,r.z=a,r.w=s,r},k.magnitudeSquared=function(t){return T.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},k.magnitude=function(t){return Math.sqrt(k.magnitudeSquared(t))};const W=new k;k.distance=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),k.subtract(t,e,W),k.magnitude(W)},k.distanceSquared=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),k.subtract(t,e,W),k.magnitudeSquared(W)},k.normalize=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=k.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n,e.w=t.w/n,isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||isNaN(e.w))throw new b("normalized result is not a number");return e},k.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},k.multiplyComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n.w=t.w*e.w,n},k.divideComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n.w=t.w/e.w,n},k.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n},k.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n.w=t.w-e.w,n},k.multiplyByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n.w=t.w*e,n},k.divideByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n.w=t.w/e,n},k.negate=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e},k.abs=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e.z=Math.abs(t.z),e.w=Math.abs(t.w),e};const G=new k;k.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),k.multiplyByScalar(e,n,G),r=k.multiplyByScalar(t,1-n,r),k.add(G,r,r)};const V=new k;k.mostOrthogonalAxis=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=k.normalize(t,V);return k.abs(n,n),n.x<=n.y?n.x<=n.z?n.x<=n.w?k.clone(k.UNIT_X,e):k.clone(k.UNIT_W,e):n.z<=n.w?k.clone(k.UNIT_Z,e):k.clone(k.UNIT_W,e):n.y<=n.z?n.y<=n.w?k.clone(k.UNIT_Y,e):k.clone(k.UNIT_W,e):n.z<=n.w?k.clone(k.UNIT_Z,e):k.clone(k.UNIT_W,e)},k.equals=function(t,e){return t===e||w(t)&&w(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},k.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]&&t.z===e[n+2]&&t.w===e[n+3]},k.equalsEpsilon=function(t,e,n,r){return t===e||w(t)&&w(e)&&P.equalsEpsilon(t.x,e.x,n,r)&&P.equalsEpsilon(t.y,e.y,n,r)&&P.equalsEpsilon(t.z,e.z,n,r)&&P.equalsEpsilon(t.w,e.w,n,r)},k.ZERO=Object.freeze(new k(0,0,0,0)),k.ONE=Object.freeze(new k(1,1,1,1)),k.UNIT_X=Object.freeze(new k(1,0,0,0)),k.UNIT_Y=Object.freeze(new k(0,1,0,0)),k.UNIT_Z=Object.freeze(new k(0,0,1,0)),k.UNIT_W=Object.freeze(new k(0,0,0,1)),k.prototype.clone=function(t){return k.clone(this,t)},k.prototype.equals=function(t){return k.equals(this,t)},k.prototype.equalsEpsilon=function(t,e,n){return k.equalsEpsilon(this,t,e,n)},k.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const X=new Float32Array(1),H=new Uint8Array(X.buffer),$=new Uint32Array([287454020]),Y=68===new Uint8Array($.buffer)[0];k.packFloat=function(t,e){return T.typeOf.number("value",t),w(e)||(e=new k),X[0]=t,Y?(e.x=H[0],e.y=H[1],e.z=H[2],e.w=H[3]):(e.x=H[3],e.y=H[2],e.z=H[1],e.w=H[0]),e},k.unpackFloat=function(t){return T.typeOf.object("packedFloat",t),Y?(H[0]=t.x,H[1]=t.y,H[2]=t.z,H[3]=t.w):(H[0]=t.w,H[1]=t.z,H[2]=t.y,H[3]=t.x),X[0]};const Z={};function Q(t,e,n,r,o,i,a,s,u){this[0]=t??0,this[1]=r??0,this[2]=a??0,this[3]=e??0,this[4]=o??0,this[5]=s??0,this[6]=n??0,this[7]=i??0,this[8]=u??0}Z.EMPTY_OBJECT=Object.freeze({}),Z.EMPTY_ARRAY=Object.freeze([]),Q.packedLength=9,Q.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e[n++]=t[4],e[n++]=t[5],e[n++]=t[6],e[n++]=t[7],e[n++]=t[8],e},Q.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new Q),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n[4]=t[e++],n[5]=t[e++],n[6]=t[e++],n[7]=t[e++],n[8]=t[e++],n},Q.packArray=function(t,e){T.defined("array",t);const n=t.length,r=9*n;if(w(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 9 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)Q.pack(t[o],e,9*o);return e},Q.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,9),t.length%9!=0)throw new b("array length must be a multiple of 9.");const n=t.length;w(e)?e.length=n/9:e=new Array(n/9);for(let r=0;r<n;r+=9){const n=r/9;e[n]=Q.unpack(t,r,e[n])}return e},Q.clone=function(t,e){if(w(t))return w(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e):new Q(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},Q.fromArray=Q.unpack,Q.fromColumnMajorArray=function(t,e){return T.defined("values",t),Q.clone(t,e)},Q.fromRowMajorArray=function(t,e){return T.defined("values",t),w(e)?(e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e):new Q(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Q.fromQuaternion=function(t,e){T.typeOf.object("quaternion",t);const n=t.x*t.x,r=t.x*t.y,o=t.x*t.z,i=t.x*t.w,a=t.y*t.y,s=t.y*t.z,u=t.y*t.w,c=t.z*t.z,l=t.z*t.w,f=t.w*t.w,h=n-a-c+f,p=2*(r-l),d=2*(o+u),m=2*(r+l),y=-n+a-c+f,g=2*(s-i),_=2*(o-u),O=2*(s+i),E=-n-a+c+f;return w(e)?(e[0]=h,e[1]=m,e[2]=_,e[3]=p,e[4]=y,e[5]=O,e[6]=d,e[7]=g,e[8]=E,e):new Q(h,p,d,m,y,g,_,O,E)},Q.fromHeadingPitchRoll=function(t,e){T.typeOf.object("headingPitchRoll",t);const n=Math.cos(-t.pitch),r=Math.cos(-t.heading),o=Math.cos(t.roll),i=Math.sin(-t.pitch),a=Math.sin(-t.heading),s=Math.sin(t.roll),u=n*r,c=-o*a+s*i*r,l=s*a+o*i*r,f=n*a,h=o*r+s*i*a,p=-s*r+o*i*a,d=-i,m=s*n,y=o*n;return w(e)?(e[0]=u,e[1]=f,e[2]=d,e[3]=c,e[4]=h,e[5]=m,e[6]=l,e[7]=p,e[8]=y,e):new Q(u,c,l,f,h,p,d,m,y)},Q.fromScale=function(t,e){return T.typeOf.object("scale",t),w(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=0,e[4]=t.y,e[5]=0,e[6]=0,e[7]=0,e[8]=t.z,e):new Q(t.x,0,0,0,t.y,0,0,0,t.z)},Q.fromUniformScale=function(t,e){return T.typeOf.number("scale",t),w(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=t,e):new Q(t,0,0,0,t,0,0,0,t)},Q.fromCrossProduct=function(t,e){return T.typeOf.object("vector",t),w(e)?(e[0]=0,e[1]=t.z,e[2]=-t.y,e[3]=-t.z,e[4]=0,e[5]=t.x,e[6]=t.y,e[7]=-t.x,e[8]=0,e):new Q(0,-t.z,t.y,t.z,0,-t.x,-t.y,t.x,0)},Q.fromRotationX=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return w(e)?(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=n,e[5]=r,e[6]=0,e[7]=-r,e[8]=n,e):new Q(1,0,0,0,n,-r,0,r,n)},Q.fromRotationY=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return w(e)?(e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=1,e[5]=0,e[6]=r,e[7]=0,e[8]=n,e):new Q(n,0,r,0,1,0,-r,0,n)},Q.fromRotationZ=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return w(e)?(e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e):new Q(n,-r,0,r,n,0,0,0,1)},Q.toArray=function(t,e){return T.typeOf.object("matrix",t),w(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e):[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},Q.getElementIndex=function(t,e){return T.typeOf.number.greaterThanOrEquals("row",e,0),T.typeOf.number.lessThanOrEquals("row",e,2),T.typeOf.number.greaterThanOrEquals("column",t,0),T.typeOf.number.lessThanOrEquals("column",t,2),3*t+e},Q.getColumn=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("result",n);const r=3*e,o=t[r],i=t[r+1],a=t[r+2];return n.x=o,n.y=i,n.z=a,n},Q.setColumn=function(t,e,n,r){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("cartesian",n),T.typeOf.object("result",r);const o=3*e;return(r=Q.clone(t,r))[o]=n.x,r[o+1]=n.y,r[o+2]=n.z,r},Q.getRow=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("result",n);const r=t[e],o=t[e+3],i=t[e+6];return n.x=r,n.y=o,n.z=i,n},Q.setRow=function(t,e,n,r){return T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("cartesian",n),T.typeOf.object("result",r),(r=Q.clone(t,r))[e]=n.x,r[e+3]=n.y,r[e+6]=n.z,r};const K=new q;Q.setScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=Q.getScale(t,K),o=e.x/r.x,i=e.y/r.y,a=e.z/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*i,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*a,n[7]=t[7]*a,n[8]=t[8]*a,n};const J=new q;Q.setUniformScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n);const r=Q.getScale(t,J),o=e/r.x,i=e/r.y,a=e/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*i,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*a,n[7]=t[7]*a,n[8]=t[8]*a,n};const tt=new q;Q.getScale=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=q.magnitude(q.fromElements(t[0],t[1],t[2],tt)),e.y=q.magnitude(q.fromElements(t[3],t[4],t[5],tt)),e.z=q.magnitude(q.fromElements(t[6],t[7],t[8],tt)),e};const et=new q;Q.getMaximumScale=function(t){return Q.getScale(t,et),q.maximumComponent(et)};const nt=new q;Q.setRotation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("result",n);const r=Q.getScale(t,nt);return n[0]=e[0]*r.x,n[1]=e[1]*r.x,n[2]=e[2]*r.x,n[3]=e[3]*r.y,n[4]=e[4]*r.y,n[5]=e[5]*r.y,n[6]=e[6]*r.z,n[7]=e[7]*r.z,n[8]=e[8]*r.z,n};const rt=new q;Q.getRotation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=Q.getScale(t,rt);return e[0]=t[0]/n.x,e[1]=t[1]/n.x,e[2]=t[2]/n.x,e[3]=t[3]/n.y,e[4]=t[4]/n.y,e[5]=t[5]/n.y,e[6]=t[6]/n.z,e[7]=t[7]/n.z,e[8]=t[8]/n.z,e},Q.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0]*e[0]+t[3]*e[1]+t[6]*e[2],o=t[1]*e[0]+t[4]*e[1]+t[7]*e[2],i=t[2]*e[0]+t[5]*e[1]+t[8]*e[2],a=t[0]*e[3]+t[3]*e[4]+t[6]*e[5],s=t[1]*e[3]+t[4]*e[4]+t[7]*e[5],u=t[2]*e[3]+t[5]*e[4]+t[8]*e[5],c=t[0]*e[6]+t[3]*e[7]+t[6]*e[8],l=t[1]*e[6]+t[4]*e[7]+t[7]*e[8],f=t[2]*e[6]+t[5]*e[7]+t[8]*e[8];return n[0]=r,n[1]=o,n[2]=i,n[3]=a,n[4]=s,n[5]=u,n[6]=c,n[7]=l,n[8]=f,n},Q.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n},Q.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n},Q.multiplyByVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,a=t[0]*r+t[3]*o+t[6]*i,s=t[1]*r+t[4]*o+t[7]*i,u=t[2]*r+t[5]*o+t[8]*i;return n.x=a,n.y=s,n.z=u,n},Q.multiplyByScalar=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n},Q.multiplyByScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.x,n[3]=t[3]*e.y,n[4]=t[4]*e.y,n[5]=t[5]*e.y,n[6]=t[6]*e.z,n[7]=t[7]*e.z,n[8]=t[8]*e.z,n},Q.multiplyByUniformScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n},Q.negate=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e},Q.transpose=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[3],o=t[6],i=t[1],a=t[4],s=t[7],u=t[2],c=t[5],l=t[8];return e[0]=n,e[1]=r,e[2]=o,e[3]=i,e[4]=a,e[5]=s,e[6]=u,e[7]=c,e[8]=l,e};const ot=[1,0,0],it=[2,2,1];function at(t){let e=0;for(let n=0;n<3;++n){const r=t[Q.getElementIndex(it[n],ot[n])];e+=2*r*r}return Math.sqrt(e)}function st(t,e){const n=P.EPSILON15;let r=0,o=1;for(let c=0;c<3;++c){const e=Math.abs(t[Q.getElementIndex(it[c],ot[c])]);e>r&&(o=c,r=e)}let i=1,a=0;const s=ot[o],u=it[o];if(Math.abs(t[Q.getElementIndex(u,s)])>n){const e=(t[Q.getElementIndex(u,u)]-t[Q.getElementIndex(s,s)])/2/t[Q.getElementIndex(u,s)];let n;n=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),i=1/Math.sqrt(1+n*n),a=n*i}return(e=Q.clone(Q.IDENTITY,e))[Q.getElementIndex(s,s)]=e[Q.getElementIndex(u,u)]=i,e[Q.getElementIndex(u,s)]=a,e[Q.getElementIndex(s,u)]=-a,e}const ut=new Q,ct=new Q;Q.computeEigenDecomposition=function(t,e){T.typeOf.object("matrix",t);const n=P.EPSILON20;let r=0,o=0;w(e)||(e={});const i=e.unitary=Q.clone(Q.IDENTITY,e.unitary),a=e.diagonal=Q.clone(t,e.diagonal),s=n*function(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}(a);for(;o<10&&at(a)>s;)st(a,ut),Q.transpose(ut,ct),Q.multiply(a,ut,a),Q.multiply(ct,a,a),Q.multiply(i,ut,i),++r>2&&(++o,r=0);return e},Q.abs=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e[4]=Math.abs(t[4]),e[5]=Math.abs(t[5]),e[6]=Math.abs(t[6]),e[7]=Math.abs(t[7]),e[8]=Math.abs(t[8]),e},Q.determinant=function(t){T.typeOf.object("matrix",t);const e=t[0],n=t[3],r=t[6],o=t[1],i=t[4],a=t[7],s=t[2],u=t[5],c=t[8];return e*(i*c-u*a)+o*(u*r-n*c)+s*(n*a-i*r)},Q.inverse=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=Q.determinant(t);if(Math.abs(f)<=P.EPSILON15)throw new b("matrix is not invertible");e[0]=a*l-c*s,e[1]=c*o-r*l,e[2]=r*s-a*o,e[3]=u*s-i*l,e[4]=n*l-u*o,e[5]=i*o-n*s,e[6]=i*c-u*a,e[7]=u*r-n*c,e[8]=n*a-i*r;const h=1/f;return Q.multiplyByScalar(e,h,e)};const lt=new Q;function ft(t){let e;this.name="RuntimeError",this.message=t;try{throw new Error}catch(n){e=n.stack}this.stack=e}function ht(t,e,n,r,o,i,a,s,u,c,l,f,h,p,d,m){this[0]=t??0,this[1]=o??0,this[2]=u??0,this[3]=h??0,this[4]=e??0,this[5]=i??0,this[6]=c??0,this[7]=p??0,this[8]=n??0,this[9]=a??0,this[10]=l??0,this[11]=d??0,this[12]=r??0,this[13]=s??0,this[14]=f??0,this[15]=m??0}Q.inverseTranspose=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),Q.inverse(Q.transpose(t,lt),e)},Q.equals=function(t,e){return t===e||w(t)&&w(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},Q.equalsEpsilon=function(t,e,n){return n=n??0,t===e||w(t)&&w(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n&&Math.abs(t[4]-e[4])<=n&&Math.abs(t[5]-e[5])<=n&&Math.abs(t[6]-e[6])<=n&&Math.abs(t[7]-e[7])<=n&&Math.abs(t[8]-e[8])<=n},Q.IDENTITY=Object.freeze(new Q(1,0,0,0,1,0,0,0,1)),Q.ZERO=Object.freeze(new Q(0,0,0,0,0,0,0,0,0)),Q.COLUMN0ROW0=0,Q.COLUMN0ROW1=1,Q.COLUMN0ROW2=2,Q.COLUMN1ROW0=3,Q.COLUMN1ROW1=4,Q.COLUMN1ROW2=5,Q.COLUMN2ROW0=6,Q.COLUMN2ROW1=7,Q.COLUMN2ROW2=8,Object.defineProperties(Q.prototype,{length:{get:function(){return Q.packedLength}}}),Q.prototype.clone=function(t){return Q.clone(this,t)},Q.prototype.equals=function(t){return Q.equals(this,t)},Q.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]&&t[4]===e[n+4]&&t[5]===e[n+5]&&t[6]===e[n+6]&&t[7]===e[n+7]&&t[8]===e[n+8]},Q.prototype.equalsEpsilon=function(t,e){return Q.equalsEpsilon(this,t,e)},Q.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})\n(${this[1]}, ${this[4]}, ${this[7]})\n(${this[2]}, ${this[5]}, ${this[8]})`},w(Object.create)&&(ft.prototype=Object.create(Error.prototype),ft.prototype.constructor=ft),ft.prototype.toString=function(){let t=`${this.name}: ${this.message}`;return w(this.stack)&&(t+=`\n${this.stack.toString()}`),t},ht.packedLength=16,ht.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e[n++]=t[4],e[n++]=t[5],e[n++]=t[6],e[n++]=t[7],e[n++]=t[8],e[n++]=t[9],e[n++]=t[10],e[n++]=t[11],e[n++]=t[12],e[n++]=t[13],e[n++]=t[14],e[n]=t[15],e},ht.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new ht),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n[4]=t[e++],n[5]=t[e++],n[6]=t[e++],n[7]=t[e++],n[8]=t[e++],n[9]=t[e++],n[10]=t[e++],n[11]=t[e++],n[12]=t[e++],n[13]=t[e++],n[14]=t[e++],n[15]=t[e],n},ht.packArray=function(t,e){T.defined("array",t);const n=t.length,r=16*n;if(w(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 16 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)ht.pack(t[o],e,16*o);return e},ht.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,16),t.length%16!=0)throw new b("array length must be a multiple of 16.");const n=t.length;w(e)?e.length=n/16:e=new Array(n/16);for(let r=0;r<n;r+=16){const n=r/16;e[n]=ht.unpack(t,r,e[n])}return e},ht.clone=function(t,e){if(w(t))return w(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e):new ht(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])},ht.fromArray=ht.unpack,ht.fromColumnMajorArray=function(t,e){return T.defined("values",t),ht.clone(t,e)},ht.fromRowMajorArray=function(t,e){return T.defined("values",t),w(e)?(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e):new ht(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},ht.fromRotationTranslation=function(t,e,n){return T.typeOf.object("rotation",t),e=e??q.ZERO,w(n)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=0,n[4]=t[3],n[5]=t[4],n[6]=t[5],n[7]=0,n[8]=t[6],n[9]=t[7],n[10]=t[8],n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n):new ht(t[0],t[3],t[6],e.x,t[1],t[4],t[7],e.y,t[2],t[5],t[8],e.z,0,0,0,1)},ht.fromTranslationQuaternionRotationScale=function(t,e,n,r){T.typeOf.object("translation",t),T.typeOf.object("rotation",e),T.typeOf.object("scale",n),w(r)||(r=new ht);const o=n.x,i=n.y,a=n.z,s=e.x*e.x,u=e.x*e.y,c=e.x*e.z,l=e.x*e.w,f=e.y*e.y,h=e.y*e.z,p=e.y*e.w,d=e.z*e.z,m=e.z*e.w,y=e.w*e.w,g=s-f-d+y,_=2*(u-m),O=2*(c+p),E=2*(u+m),b=-s+f-d+y,R=2*(h-l),A=2*(c-p),S=2*(h+l),x=-s-f+d+y;return r[0]=g*o,r[1]=E*o,r[2]=A*o,r[3]=0,r[4]=_*i,r[5]=b*i,r[6]=S*i,r[7]=0,r[8]=O*a,r[9]=R*a,r[10]=x*a,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r},ht.fromTranslationRotationScale=function(t,e){return T.typeOf.object("translationRotationScale",t),ht.fromTranslationQuaternionRotationScale(t.translation,t.rotation,t.scale,e)},ht.fromTranslation=function(t,e){return T.typeOf.object("translation",t),ht.fromRotationTranslation(Q.IDENTITY,t,e)},ht.fromScale=function(t,e){return T.typeOf.object("scale",t),w(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t.y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t.z,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e):new ht(t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1)},ht.fromUniformScale=function(t,e){return T.typeOf.number("scale",t),w(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e):new ht(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1)},ht.fromRotation=function(t,e){return T.typeOf.object("rotation",t),w(e)||(e=new ht),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e[4]=t[3],e[5]=t[4],e[6]=t[5],e[7]=0,e[8]=t[6],e[9]=t[7],e[10]=t[8],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};const pt=new q,dt=new q,mt=new q;ht.fromCamera=function(t,e){T.typeOf.object("camera",t);const n=t.position,r=t.direction,o=t.up;T.typeOf.object("camera.position",n),T.typeOf.object("camera.direction",r),T.typeOf.object("camera.up",o),q.normalize(r,pt),q.normalize(q.cross(pt,o,dt),dt),q.normalize(q.cross(dt,pt,mt),mt);const i=dt.x,a=dt.y,s=dt.z,u=pt.x,c=pt.y,l=pt.z,f=mt.x,h=mt.y,p=mt.z,d=n.x,m=n.y,y=n.z,g=i*-d+a*-m+s*-y,_=f*-d+h*-m+p*-y,O=u*d+c*m+l*y;return w(e)?(e[0]=i,e[1]=f,e[2]=-u,e[3]=0,e[4]=a,e[5]=h,e[6]=-c,e[7]=0,e[8]=s,e[9]=p,e[10]=-l,e[11]=0,e[12]=g,e[13]=_,e[14]=O,e[15]=1,e):new ht(i,a,s,g,f,h,p,_,-u,-c,-l,O,0,0,0,1)},ht.computePerspectiveFieldOfView=function(t,e,n,r,o){T.typeOf.number.greaterThan("fovY",t,0),T.typeOf.number.lessThan("fovY",t,Math.PI),T.typeOf.number.greaterThan("near",n,0),T.typeOf.number.greaterThan("far",r,0),T.typeOf.object("result",o);const i=1/Math.tan(.5*t),a=i/e,s=(r+n)/(n-r),u=2*r*n/(n-r);return o[0]=a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=s,o[11]=-1,o[12]=0,o[13]=0,o[14]=u,o[15]=0,o},ht.computeOrthographicOffCenter=function(t,e,n,r,o,i,a){T.typeOf.number("left",t),T.typeOf.number("right",e),T.typeOf.number("bottom",n),T.typeOf.number("top",r),T.typeOf.number("near",o),T.typeOf.number("far",i),T.typeOf.object("result",a);let s=1/(e-t),u=1/(r-n),c=1/(i-o);const l=-(e+t)*s,f=-(r+n)*u,h=-(i+o)*c;return s*=2,u*=2,c*=-2,a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=c,a[11]=0,a[12]=l,a[13]=f,a[14]=h,a[15]=1,a},ht.computePerspectiveOffCenter=function(t,e,n,r,o,i,a){T.typeOf.number("left",t),T.typeOf.number("right",e),T.typeOf.number("bottom",n),T.typeOf.number("top",r),T.typeOf.number("near",o),T.typeOf.number("far",i),T.typeOf.object("result",a);const s=2*o/(e-t),u=2*o/(r-n),c=(e+t)/(e-t),l=(r+n)/(r-n),f=-(i+o)/(i-o),h=-2*i*o/(i-o);return a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=c,a[9]=l,a[10]=f,a[11]=-1,a[12]=0,a[13]=0,a[14]=h,a[15]=0,a},ht.computeInfinitePerspectiveOffCenter=function(t,e,n,r,o,i){T.typeOf.number("left",t),T.typeOf.number("right",e),T.typeOf.number("bottom",n),T.typeOf.number("top",r),T.typeOf.number("near",o),T.typeOf.object("result",i);const a=2*o/(e-t),s=2*o/(r-n),u=(e+t)/(e-t),c=(r+n)/(r-n),l=-2*o;return i[0]=a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=u,i[9]=c,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=l,i[15]=0,i},ht.computeViewportTransformation=function(t,e,n,r){w(r)||(r=new ht);const o=(t=t??Z.EMPTY_OBJECT).x??0,i=t.y??0;e=e??0;const a=.5*(t.width??0),s=.5*(t.height??0),u=.5*((n=n??1)-e),c=a,l=s,f=u,h=o+a,p=i+s,d=e+u;return r[0]=c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=f,r[11]=0,r[12]=h,r[13]=p,r[14]=d,r[15]=1,r},ht.computeView=function(t,e,n,r,o){return T.typeOf.object("position",t),T.typeOf.object("direction",e),T.typeOf.object("up",n),T.typeOf.object("right",r),T.typeOf.object("result",o),o[0]=r.x,o[1]=n.x,o[2]=-e.x,o[3]=0,o[4]=r.y,o[5]=n.y,o[6]=-e.y,o[7]=0,o[8]=r.z,o[9]=n.z,o[10]=-e.z,o[11]=0,o[12]=-q.dot(r,t),o[13]=-q.dot(n,t),o[14]=q.dot(e,t),o[15]=1,o},ht.toArray=function(t,e){return T.typeOf.object("matrix",t),w(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e):[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},ht.getElementIndex=function(t,e){return T.typeOf.number.greaterThanOrEquals("row",e,0),T.typeOf.number.lessThanOrEquals("row",e,3),T.typeOf.number.greaterThanOrEquals("column",t,0),T.typeOf.number.lessThanOrEquals("column",t,3),4*t+e},ht.getColumn=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("result",n);const r=4*e,o=t[r],i=t[r+1],a=t[r+2],s=t[r+3];return n.x=o,n.y=i,n.z=a,n.w=s,n},ht.setColumn=function(t,e,n,r){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("cartesian",n),T.typeOf.object("result",r);const o=4*e;return(r=ht.clone(t,r))[o]=n.x,r[o+1]=n.y,r[o+2]=n.z,r[o+3]=n.w,r},ht.getRow=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("result",n);const r=t[e],o=t[e+4],i=t[e+8],a=t[e+12];return n.x=r,n.y=o,n.z=i,n.w=a,n},ht.setRow=function(t,e,n,r){return T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("cartesian",n),T.typeOf.object("result",r),(r=ht.clone(t,r))[e]=n.x,r[e+4]=n.y,r[e+8]=n.z,r[e+12]=n.w,r},ht.setTranslation=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.object("translation",e),T.typeOf.object("result",n),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=t[15],n};const yt=new q;ht.setScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=ht.getScale(t,yt),o=e.x/r.x,i=e.y/r.y,a=e.z/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3],n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[7]=t[7],n[8]=t[8]*a,n[9]=t[9]*a,n[10]=t[10]*a,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n};const gt=new q;ht.setUniformScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n);const r=ht.getScale(t,gt),o=e/r.x,i=e/r.y,a=e/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3],n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[7]=t[7],n[8]=t[8]*a,n[9]=t[9]*a,n[10]=t[10]*a,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n};const _t=new q;ht.getScale=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=q.magnitude(q.fromElements(t[0],t[1],t[2],_t)),e.y=q.magnitude(q.fromElements(t[4],t[5],t[6],_t)),e.z=q.magnitude(q.fromElements(t[8],t[9],t[10],_t)),e};const Ot=new q;ht.getMaximumScale=function(t){return ht.getScale(t,Ot),q.maximumComponent(Ot)};const Et=new q;ht.setRotation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("result",n);const r=ht.getScale(t,Et);return n[0]=e[0]*r.x,n[1]=e[1]*r.x,n[2]=e[2]*r.x,n[3]=t[3],n[4]=e[3]*r.y,n[5]=e[4]*r.y,n[6]=e[5]*r.y,n[7]=t[7],n[8]=e[6]*r.z,n[9]=e[7]*r.z,n[10]=e[8]*r.z,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n};const wt=new q;ht.getRotation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=ht.getScale(t,wt);return e[0]=t[0]/n.x,e[1]=t[1]/n.x,e[2]=t[2]/n.x,e[3]=t[4]/n.y,e[4]=t[5]/n.y,e[5]=t[6]/n.y,e[6]=t[8]/n.z,e[7]=t[9]/n.z,e[8]=t[10]/n.z,e},ht.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],m=t[12],y=t[13],g=t[14],_=t[15],O=e[0],E=e[1],w=e[2],b=e[3],R=e[4],A=e[5],S=e[6],x=e[7],M=e[8],I=e[9],N=e[10],P=e[11],C=e[12],v=e[13],q=e[14],j=e[15],U=r*O+s*E+f*w+m*b,z=o*O+u*E+h*w+y*b,D=i*O+c*E+p*w+g*b,L=a*O+l*E+d*w+_*b,F=r*R+s*A+f*S+m*x,B=o*R+u*A+h*S+y*x,k=i*R+c*A+p*S+g*x,W=a*R+l*A+d*S+_*x,G=r*M+s*I+f*N+m*P,V=o*M+u*I+h*N+y*P,X=i*M+c*I+p*N+g*P,H=a*M+l*I+d*N+_*P,$=r*C+s*v+f*q+m*j,Y=o*C+u*v+h*q+y*j,Z=i*C+c*v+p*q+g*j,Q=a*C+l*v+d*q+_*j;return n[0]=U,n[1]=z,n[2]=D,n[3]=L,n[4]=F,n[5]=B,n[6]=k,n[7]=W,n[8]=G,n[9]=V,n[10]=X,n[11]=H,n[12]=$,n[13]=Y,n[14]=Z,n[15]=Q,n},ht.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n[9]=t[9]+e[9],n[10]=t[10]+e[10],n[11]=t[11]+e[11],n[12]=t[12]+e[12],n[13]=t[13]+e[13],n[14]=t[14]+e[14],n[15]=t[15]+e[15],n},ht.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n[9]=t[9]-e[9],n[10]=t[10]-e[10],n[11]=t[11]-e[11],n[12]=t[12]-e[12],n[13]=t[13]-e[13],n[14]=t[14]-e[14],n[15]=t[15]-e[15],n},ht.multiplyTransformation=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0],o=t[1],i=t[2],a=t[4],s=t[5],u=t[6],c=t[8],l=t[9],f=t[10],h=t[12],p=t[13],d=t[14],m=e[0],y=e[1],g=e[2],_=e[4],O=e[5],E=e[6],w=e[8],b=e[9],R=e[10],A=e[12],S=e[13],x=e[14],M=r*m+a*y+c*g,I=o*m+s*y+l*g,N=i*m+u*y+f*g,P=r*_+a*O+c*E,C=o*_+s*O+l*E,v=i*_+u*O+f*E,q=r*w+a*b+c*R,j=o*w+s*b+l*R,U=i*w+u*b+f*R,z=r*A+a*S+c*x+h,D=o*A+s*S+l*x+p,L=i*A+u*S+f*x+d;return n[0]=M,n[1]=I,n[2]=N,n[3]=0,n[4]=P,n[5]=C,n[6]=v,n[7]=0,n[8]=q,n[9]=j,n[10]=U,n[11]=0,n[12]=z,n[13]=D,n[14]=L,n[15]=1,n},ht.multiplyByMatrix3=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("rotation",e),T.typeOf.object("result",n);const r=t[0],o=t[1],i=t[2],a=t[4],s=t[5],u=t[6],c=t[8],l=t[9],f=t[10],h=e[0],p=e[1],d=e[2],m=e[3],y=e[4],g=e[5],_=e[6],O=e[7],E=e[8],w=r*h+a*p+c*d,b=o*h+s*p+l*d,R=i*h+u*p+f*d,A=r*m+a*y+c*g,S=o*m+s*y+l*g,x=i*m+u*y+f*g,M=r*_+a*O+c*E,I=o*_+s*O+l*E,N=i*_+u*O+f*E;return n[0]=w,n[1]=b,n[2]=R,n[3]=0,n[4]=A,n[5]=S,n[6]=x,n[7]=0,n[8]=M,n[9]=I,n[10]=N,n[11]=0,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},ht.multiplyByTranslation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("translation",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,a=r*t[0]+o*t[4]+i*t[8]+t[12],s=r*t[1]+o*t[5]+i*t[9]+t[13],u=r*t[2]+o*t[6]+i*t[10]+t[14];return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=a,n[13]=s,n[14]=u,n[15]=t[15],n},ht.multiplyByScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z;return 1===r&&1===o&&1===i?ht.clone(t,n):(n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=t[3],n[4]=o*t[4],n[5]=o*t[5],n[6]=o*t[6],n[7]=t[7],n[8]=i*t[8],n[9]=i*t[9],n[10]=i*t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n)},ht.multiplyByUniformScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3],n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7],n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},ht.multiplyByVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,a=e.w,s=t[0]*r+t[4]*o+t[8]*i+t[12]*a,u=t[1]*r+t[5]*o+t[9]*i+t[13]*a,c=t[2]*r+t[6]*o+t[10]*i+t[14]*a,l=t[3]*r+t[7]*o+t[11]*i+t[15]*a;return n.x=s,n.y=u,n.z=c,n.w=l,n},ht.multiplyByPointAsVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,a=t[0]*r+t[4]*o+t[8]*i,s=t[1]*r+t[5]*o+t[9]*i,u=t[2]*r+t[6]*o+t[10]*i;return n.x=a,n.y=s,n.z=u,n},ht.multiplyByPoint=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,a=t[0]*r+t[4]*o+t[8]*i+t[12],s=t[1]*r+t[5]*o+t[9]*i+t[13],u=t[2]*r+t[6]*o+t[10]*i+t[14];return n.x=a,n.y=s,n.z=u,n},ht.multiplyByScalar=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12]*e,n[13]=t[13]*e,n[14]=t[14]*e,n[15]=t[15]*e,n},ht.negate=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ht.transpose=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],s=t[11];return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[10]=t[10],e[11]=t[14],e[12]=o,e[13]=a,e[14]=s,e[15]=t[15],e},ht.abs=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e[4]=Math.abs(t[4]),e[5]=Math.abs(t[5]),e[6]=Math.abs(t[6]),e[7]=Math.abs(t[7]),e[8]=Math.abs(t[8]),e[9]=Math.abs(t[9]),e[10]=Math.abs(t[10]),e[11]=Math.abs(t[11]),e[12]=Math.abs(t[12]),e[13]=Math.abs(t[13]),e[14]=Math.abs(t[14]),e[15]=Math.abs(t[15]),e},ht.equals=function(t,e){return t===e||w(t)&&w(e)&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[3]===e[3]&&t[7]===e[7]&&t[11]===e[11]&&t[15]===e[15]},ht.equalsEpsilon=function(t,e,n){return n=n??0,t===e||w(t)&&w(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n&&Math.abs(t[4]-e[4])<=n&&Math.abs(t[5]-e[5])<=n&&Math.abs(t[6]-e[6])<=n&&Math.abs(t[7]-e[7])<=n&&Math.abs(t[8]-e[8])<=n&&Math.abs(t[9]-e[9])<=n&&Math.abs(t[10]-e[10])<=n&&Math.abs(t[11]-e[11])<=n&&Math.abs(t[12]-e[12])<=n&&Math.abs(t[13]-e[13])<=n&&Math.abs(t[14]-e[14])<=n&&Math.abs(t[15]-e[15])<=n},ht.getTranslation=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=t[12],e.y=t[13],e.z=t[14],e},ht.getMatrix3=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e};const bt=new Q,Tt=new Q,Rt=new k,At=new k(0,0,0,1);ht.inverse=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[4],o=t[8],i=t[12],a=t[1],s=t[5],u=t[9],c=t[13],l=t[2],f=t[6],h=t[10],p=t[14],d=t[3],m=t[7],y=t[11],g=t[15];let _=h*g,O=p*y,E=f*g,w=p*m,b=f*y,R=h*m,A=l*g,S=p*d,x=l*y,M=h*d,I=l*m,N=f*d;const C=_*s+w*u+b*c-(O*s+E*u+R*c),v=O*a+A*u+M*c-(_*a+S*u+x*c),q=E*a+S*s+I*c-(w*a+A*s+N*c),j=R*a+x*s+N*u-(b*a+M*s+I*u),U=O*r+E*o+R*i-(_*r+w*o+b*i),z=_*n+S*o+x*i-(O*n+A*o+M*i),D=w*n+A*r+N*i-(E*n+S*r+I*i),L=b*n+M*r+I*o-(R*n+x*r+N*o);_=o*c,O=i*u,E=r*c,w=i*s,b=r*u,R=o*s,A=n*c,S=i*a,x=n*u,M=o*a,I=n*s,N=r*a;const F=_*m+w*y+b*g-(O*m+E*y+R*g),B=O*d+A*y+M*g-(_*d+S*y+x*g),W=E*d+S*m+I*g-(w*d+A*m+N*g),G=R*d+x*m+N*y-(b*d+M*m+I*y),V=E*h+R*p+O*f-(b*p+_*f+w*h),X=x*p+_*l+S*h-(A*h+M*p+O*l),H=A*f+N*p+w*l-(I*p+E*l+S*f),$=I*h+b*l+M*f-(x*f+N*h+R*l);let Y=n*C+r*v+o*q+i*j;if(Math.abs(Y)<P.EPSILON21){if(Q.equalsEpsilon(ht.getMatrix3(t,bt),Tt,P.EPSILON7)&&k.equals(ht.getRow(t,3,Rt),At))return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=0,e[11]=0,e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=1,e;throw new ft("matrix is not invertible because its determinate is zero.")}return Y=1/Y,e[0]=C*Y,e[1]=v*Y,e[2]=q*Y,e[3]=j*Y,e[4]=U*Y,e[5]=z*Y,e[6]=D*Y,e[7]=L*Y,e[8]=F*Y,e[9]=B*Y,e[10]=W*Y,e[11]=G*Y,e[12]=V*Y,e[13]=X*Y,e[14]=H*Y,e[15]=$*Y,e},ht.inverseTransformation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],u=t[8],c=t[9],l=t[10],f=t[12],h=t[13],p=t[14],d=-n*f-r*h-o*p,m=-i*f-a*h-s*p,y=-u*f-c*h-l*p;return e[0]=n,e[1]=i,e[2]=u,e[3]=0,e[4]=r,e[5]=a,e[6]=c,e[7]=0,e[8]=o,e[9]=s,e[10]=l,e[11]=0,e[12]=d,e[13]=m,e[14]=y,e[15]=1,e};const St=new ht;ht.inverseTranspose=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),ht.inverse(ht.transpose(t,St),e)},ht.IDENTITY=Object.freeze(new ht(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),ht.ZERO=Object.freeze(new ht(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),ht.COLUMN0ROW0=0,ht.COLUMN0ROW1=1,ht.COLUMN0ROW2=2,ht.COLUMN0ROW3=3,ht.COLUMN1ROW0=4,ht.COLUMN1ROW1=5,ht.COLUMN1ROW2=6,ht.COLUMN1ROW3=7,ht.COLUMN2ROW0=8,ht.COLUMN2ROW1=9,ht.COLUMN2ROW2=10,ht.COLUMN2ROW3=11,ht.COLUMN3ROW0=12,ht.COLUMN3ROW1=13,ht.COLUMN3ROW2=14,ht.COLUMN3ROW3=15,Object.defineProperties(ht.prototype,{length:{get:function(){return ht.packedLength}}}),ht.prototype.clone=function(t){return ht.clone(this,t)},ht.prototype.equals=function(t){return ht.equals(this,t)},ht.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]&&t[4]===e[n+4]&&t[5]===e[n+5]&&t[6]===e[n+6]&&t[7]===e[n+7]&&t[8]===e[n+8]&&t[9]===e[n+9]&&t[10]===e[n+10]&&t[11]===e[n+11]&&t[12]===e[n+12]&&t[13]===e[n+13]&&t[14]===e[n+14]&&t[15]===e[n+15]},ht.prototype.equalsEpsilon=function(t,e){return ht.equalsEpsilon(this,t,e)},ht.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})\n(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})\n(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})\n(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var xt=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047});let Mt;xt.UNSIGNED_BYTE,xt.UNSIGNED_SHORT,xt.UNSIGNED_INT;const It={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Nt={};let Pt,Ct,vt,qt,jt,Ut,zt,Dt,Lt,Ft,Bt,kt,Wt,Gt,Vt,Xt,Ht,$t;function Yt(t){const e=t.split(".");for(let n=0,r=e.length;n<r;++n)e[n]=parseInt(e[n],10);return e}function Zt(){if(!w(Ct)&&(Ct=!1,!te())){const t=/ Chrome\/([\.0-9]+)/.exec(Pt.userAgent);null!==t&&(Ct=!0,vt=Yt(t[1]))}return Ct}function Qt(){if(!w(qt)&&(qt=!1,!Zt()&&!te()&&/ Safari\/[\.0-9]+/.test(Pt.userAgent))){const t=/ Version\/([\.0-9]+)/.exec(Pt.userAgent);null!==t&&(qt=!0,jt=Yt(t[1]))}return qt}function Kt(){if(!w(Ut)){Ut=!1;const t=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Pt.userAgent);null!==t&&(Ut=!0,zt=Yt(t[1]),zt.isNightly=!!t[2])}return Ut}function Jt(){if(!w(Dt)){let t;Dt=!1,"Microsoft Internet Explorer"===Pt.appName?(t=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Pt.userAgent),null!==t&&(Dt=!0,Lt=Yt(t[1]))):"Netscape"===Pt.appName&&(t=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Pt.userAgent),null!==t&&(Dt=!0,Lt=Yt(t[1])))}return Dt}function te(){if(!w(Ft)){Ft=!1;const t=/ Edg\/([\.0-9]+)/.exec(Pt.userAgent);null!==t&&(Ft=!0,Bt=Yt(t[1]))}return Ft}function ee(){if(!w(kt)){kt=!1;const t=/Firefox\/([\.0-9]+)/.exec(Pt.userAgent);null!==t&&(kt=!0,Wt=Yt(t[1]))}return kt}function ne(){if(!w($t)){const t=document.createElement("canvas");t.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");const e=t.style.imageRendering;$t=w(e)&&""!==e,$t&&(Ht=e)}return $t}function re(){if(!re.initialized)throw new b("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return re._result}Object.defineProperties(Nt,{element:{get:function(){if(Nt.supportsFullscreen())return document[It.fullscreenElement]}},changeEventName:{get:function(){if(Nt.supportsFullscreen())return It.fullscreenchange}},errorEventName:{get:function(){if(Nt.supportsFullscreen())return It.fullscreenerror}},enabled:{get:function(){if(Nt.supportsFullscreen())return document[It.fullscreenEnabled]}},fullscreen:{get:function(){if(Nt.supportsFullscreen())return null!==Nt.element}}}),Nt.supportsFullscreen=function(){if(w(Mt))return Mt;Mt=!1;const t=document.body;if("function"==typeof t.requestFullscreen)return It.requestFullscreen="requestFullscreen",It.exitFullscreen="exitFullscreen",It.fullscreenEnabled="fullscreenEnabled",It.fullscreenElement="fullscreenElement",It.fullscreenchange="fullscreenchange",It.fullscreenerror="fullscreenerror",Mt=!0,Mt;const e=["webkit","moz","o","ms","khtml"];let n;for(let r=0,o=e.length;r<o;++r){const o=e[r];n=`${o}RequestFullscreen`,"function"==typeof t[n]?(It.requestFullscreen=n,Mt=!0):(n=`${o}RequestFullScreen`,"function"==typeof t[n]&&(It.requestFullscreen=n,Mt=!0)),n=`${o}ExitFullscreen`,"function"==typeof document[n]?It.exitFullscreen=n:(n=`${o}CancelFullScreen`,"function"==typeof document[n]&&(It.exitFullscreen=n)),n=`${o}FullscreenEnabled`,void 0!==document[n]?It.fullscreenEnabled=n:(n=`${o}FullScreenEnabled`,void 0!==document[n]&&(It.fullscreenEnabled=n)),n=`${o}FullscreenElement`,void 0!==document[n]?It.fullscreenElement=n:(n=`${o}FullScreenElement`,void 0!==document[n]&&(It.fullscreenElement=n)),n=`${o}fullscreenchange`,void 0!==document[`on${n}`]&&("ms"===o&&(n="MSFullscreenChange"),It.fullscreenchange=n),n=`${o}fullscreenerror`,void 0!==document[`on${n}`]&&("ms"===o&&(n="MSFullscreenError"),It.fullscreenerror=n)}return Mt},Nt.requestFullscreen=function(t,e){Nt.supportsFullscreen()&&t[It.requestFullscreen]({vrDisplay:e})},Nt.exitFullscreen=function(){Nt.supportsFullscreen()&&document[It.exitFullscreen]()},Nt._names=It,Pt="undefined"!=typeof navigator?navigator:{},re._promise=void 0,re._result=void 0,re.initialize=function(){return w(re._promise)||(re._promise=new Promise((t=>{const e=new Image;e.onload=function(){re._result=e.width>0&&e.height>0,t(re._result)},e.onerror=function(){re._result=!1,t(re._result)},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}))),re._promise},Object.defineProperties(re,{initialized:{get:function(){return w(re._result)}}});const oe=[];"undefined"!=typeof ArrayBuffer&&(oe.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&oe.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&oe.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&oe.push(BigInt64Array),"undefined"!=typeof BigUint64Array&&oe.push(BigUint64Array));const ie={isChrome:Zt,chromeVersion:function(){return Zt()&&vt},isSafari:Qt,safariVersion:function(){return Qt()&&jt},isWebkit:Kt,webkitVersion:function(){return Kt()&&zt},isInternetExplorer:Jt,internetExplorerVersion:function(){return Jt()&&Lt},isEdge:te,edgeVersion:function(){return te()&&Bt},isFirefox:ee,firefoxVersion:function(){return ee()&&Wt},isWindows:function(){return w(Gt)||(Gt=/Windows/i.test(Pt.appVersion)),Gt},isIPadOrIOS:function(){return w(Vt)||(Vt="iPhone"===navigator.platform||"iPod"===navigator.platform||"iPad"===navigator.platform),Vt},hardwareConcurrency:Pt.hardwareConcurrency??3,supportsPointerEvents:function(){return w(Xt)||(Xt=!ee()&&"undefined"!=typeof PointerEvent&&(!w(Pt.pointerEnabled)||Pt.pointerEnabled)),Xt},supportsImageRenderingPixelated:ne,supportsWebP:re,imageRenderingValue:function(){return ne()?Ht:void 0},typedArrayTypes:oe};function ae(t,e){this.x=t??0,this.y=e??0}ie.supportsBasis=function(t){return ie.supportsWebAssembly()&&t.context.supportsBasis},ie.supportsFullscreen=function(){return Nt.supportsFullscreen()},ie.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},ie.supportsBigInt64Array=function(){return"undefined"!=typeof BigInt64Array},ie.supportsBigUint64Array=function(){return"undefined"!=typeof BigUint64Array},ie.supportsBigInt=function(){return"undefined"!=typeof BigInt},ie.supportsWebWorkers=function(){return"undefined"!=typeof Worker},ie.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly},ie.supportsWebgl2=function(t){return T.defined("scene",t),t.context.webgl2},ie.supportsEsmWebWorkers=function(){return!ee()||parseInt(Wt)>=114},ae.fromElements=function(t,e,n){return w(n)?(n.x=t,n.y=e,n):new ae(t,e)},ae.clone=function(t,e){if(w(t))return w(e)?(e.x=t.x,e.y=t.y,e):new ae(t.x,t.y)},ae.fromCartesian3=ae.clone,ae.fromCartesian4=ae.clone,ae.packedLength=2,ae.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n]=t.y,e},ae.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new ae),n.x=t[e++],n.y=t[e],n},ae.packArray=function(t,e){T.defined("array",t);const n=t.length,r=2*n;if(w(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 2 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)ae.pack(t[o],e,2*o);return e},ae.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,2),t.length%2!=0)throw new b("array length must be a multiple of 2.");const n=t.length;w(e)?e.length=n/2:e=new Array(n/2);for(let r=0;r<n;r+=2){const n=r/2;e[n]=ae.unpack(t,r,e[n])}return e},ae.fromArray=ae.unpack,ae.maximumComponent=function(t){return T.typeOf.object("cartesian",t),Math.max(t.x,t.y)},ae.minimumComponent=function(t){return T.typeOf.object("cartesian",t),Math.min(t.x,t.y)},ae.minimumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n},ae.maximumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n},ae.clamp=function(t,e,n,r){T.typeOf.object("value",t),T.typeOf.object("min",e),T.typeOf.object("max",n),T.typeOf.object("result",r);const o=P.clamp(t.x,e.x,n.x),i=P.clamp(t.y,e.y,n.y);return r.x=o,r.y=i,r},ae.magnitudeSquared=function(t){return T.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y},ae.magnitude=function(t){return Math.sqrt(ae.magnitudeSquared(t))};const se=new ae;ae.distance=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),ae.subtract(t,e,se),ae.magnitude(se)},ae.distanceSquared=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),ae.subtract(t,e,se),ae.magnitudeSquared(se)},ae.normalize=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=ae.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,isNaN(e.x)||isNaN(e.y))throw new b("normalized result is not a number");return e},ae.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y},ae.cross=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.y-t.y*e.x},ae.multiplyComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n},ae.divideComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n},ae.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n},ae.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n},ae.multiplyByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n},ae.divideByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n},ae.negate=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e},ae.abs=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e};const ue=new ae;ae.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),ae.multiplyByScalar(e,n,ue),r=ae.multiplyByScalar(t,1-n,r),ae.add(ue,r,r)};const ce=new ae,le=new ae;ae.angleBetween=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),ae.normalize(t,ce),ae.normalize(e,le),P.acosClamped(ae.dot(ce,le))};const fe=new ae;ae.mostOrthogonalAxis=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=ae.normalize(t,fe);return ae.abs(n,n),n.x<=n.y?ae.clone(ae.UNIT_X,e):ae.clone(ae.UNIT_Y,e)},ae.equals=function(t,e){return t===e||w(t)&&w(e)&&t.x===e.x&&t.y===e.y},ae.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]},ae.equalsEpsilon=function(t,e,n,r){return t===e||w(t)&&w(e)&&P.equalsEpsilon(t.x,e.x,n,r)&&P.equalsEpsilon(t.y,e.y,n,r)},ae.ZERO=Object.freeze(new ae(0,0)),ae.ONE=Object.freeze(new ae(1,1)),ae.UNIT_X=Object.freeze(new ae(1,0)),ae.UNIT_Y=Object.freeze(new ae(0,1)),ae.prototype.clone=function(t){return ae.clone(this,t)},ae.prototype.equals=function(t){return ae.equals(this,t)},ae.prototype.equalsEpsilon=function(t,e,n){return ae.equalsEpsilon(this,t,e,n)},ae.prototype.toString=function(){return`(${this.x}, ${this.y})`};const he=new q,pe=new q;function de(t,e,n,r,o){if(!w(t))throw new b("cartesian is required.");if(!w(e))throw new b("oneOverRadii is required.");if(!w(n))throw new b("oneOverRadiiSquared is required.");if(!w(r))throw new b("centerToleranceSquared is required.");const i=t.x,a=t.y,s=t.z,u=e.x,c=e.y,l=e.z,f=i*i*u*u,h=a*a*c*c,p=s*s*l*l,d=f+h+p,m=Math.sqrt(1/d),y=q.multiplyByScalar(t,m,he);if(d<r)return isFinite(m)?q.clone(y,o):void 0;const g=n.x,_=n.y,O=n.z,E=pe;E.x=y.x*g*2,E.y=y.y*_*2,E.z=y.z*O*2;let T,R,A,S,x,M,I,N,C,v,j,U=(1-m)*q.magnitude(t)/(.5*q.magnitude(E)),z=0;do{U-=z,A=1/(1+U*g),S=1/(1+U*_),x=1/(1+U*O),M=A*A,I=S*S,N=x*x,C=M*A,v=I*S,j=N*x,T=f*M+h*I+p*N-1,R=f*C*g+h*v*_+p*j*O,z=T/(-2*R)}while(Math.abs(T)>P.EPSILON12);return w(o)?(o.x=i*A,o.y=a*S,o.z=s*x,o):new q(i*A,a*S,s*x)}function me(t,e,n){this.longitude=t??0,this.latitude=e??0,this.height=n??0}me.fromRadians=function(t,e,n,r){return T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),n=n??0,w(r)?(r.longitude=t,r.latitude=e,r.height=n,r):new me(t,e,n)},me.fromDegrees=function(t,e,n,r){return T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),t=P.toRadians(t),e=P.toRadians(e),me.fromRadians(t,e,n,r)};const ye=new q,ge=new q,_e=new q;function Oe(t,e,n,r){e=e??0,n=n??0,r=r??0,T.typeOf.number.greaterThanOrEquals("x",e,0),T.typeOf.number.greaterThanOrEquals("y",n,0),T.typeOf.number.greaterThanOrEquals("z",r,0),t._radii=new q(e,n,r),t._radiiSquared=new q(e*e,n*n,r*r),t._radiiToTheFourth=new q(e*e*e*e,n*n*n*n,r*r*r*r),t._oneOverRadii=new q(0===e?0:1/e,0===n?0:1/n,0===r?0:1/r),t._oneOverRadiiSquared=new q(0===e?0:1/(e*e),0===n?0:1/(n*n),0===r?0:1/(r*r)),t._minimumRadius=Math.min(e,n,r),t._maximumRadius=Math.max(e,n,r),t._centerToleranceSquared=P.EPSILON1,0!==t._radiiSquared.z&&(t._squaredXOverSquaredZ=t._radiiSquared.x/t._radiiSquared.z)}function Ee(t,e,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,Oe(this,t,e,n)}me._ellipsoidOneOverRadii=new q(1/6378137,1/6378137,1/6356752.314245179),me._ellipsoidOneOverRadiiSquared=new q(1/40680631590769,1/40680631590769,1/40408299984661.445),me._ellipsoidCenterToleranceSquared=P.EPSILON1,me.fromCartesian=function(t,e,n){const r=w(e)?e.oneOverRadii:me._ellipsoidOneOverRadii,o=w(e)?e.oneOverRadiiSquared:me._ellipsoidOneOverRadiiSquared,i=de(t,r,o,w(e)?e._centerToleranceSquared:me._ellipsoidCenterToleranceSquared,ge);if(!w(i))return;let a=q.multiplyComponents(i,o,ye);a=q.normalize(a,a);const s=q.subtract(t,i,_e),u=Math.atan2(a.y,a.x),c=Math.asin(a.z),l=P.sign(q.dot(s,t))*q.magnitude(s);return w(n)?(n.longitude=u,n.latitude=c,n.height=l,n):new me(u,c,l)},me.toCartesian=function(t,e,n){return T.defined("cartographic",t),q.fromRadians(t.longitude,t.latitude,t.height,e,n)},me.clone=function(t,e){if(w(t))return w(e)?(e.longitude=t.longitude,e.latitude=t.latitude,e.height=t.height,e):new me(t.longitude,t.latitude,t.height)},me.equals=function(t,e){return t===e||w(t)&&w(e)&&t.longitude===e.longitude&&t.latitude===e.latitude&&t.height===e.height},me.equalsEpsilon=function(t,e,n){return n=n??0,t===e||w(t)&&w(e)&&Math.abs(t.longitude-e.longitude)<=n&&Math.abs(t.latitude-e.latitude)<=n&&Math.abs(t.height-e.height)<=n},me.ZERO=Object.freeze(new me(0,0,0)),me.prototype.clone=function(t){return me.clone(this,t)},me.prototype.equals=function(t){return me.equals(this,t)},me.prototype.equalsEpsilon=function(t,e){return me.equalsEpsilon(this,t,e)},me.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`},Object.defineProperties(Ee.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),Ee.clone=function(t,e){if(!w(t))return;const n=t._radii;return w(e)?(q.clone(n,e._radii),q.clone(t._radiiSquared,e._radiiSquared),q.clone(t._radiiToTheFourth,e._radiiToTheFourth),q.clone(t._oneOverRadii,e._oneOverRadii),q.clone(t._oneOverRadiiSquared,e._oneOverRadiiSquared),e._minimumRadius=t._minimumRadius,e._maximumRadius=t._maximumRadius,e._centerToleranceSquared=t._centerToleranceSquared,e):new Ee(n.x,n.y,n.z)},Ee.fromCartesian3=function(t,e){return w(e)||(e=new Ee),w(t)?(Oe(e,t.x,t.y,t.z),e):e},Ee.WGS84=Object.freeze(new Ee(6378137,6378137,6356752.314245179)),Ee.UNIT_SPHERE=Object.freeze(new Ee(1,1,1)),Ee.MOON=Object.freeze(new Ee(P.LUNAR_RADIUS,P.LUNAR_RADIUS,P.LUNAR_RADIUS)),Ee.MARS=Object.freeze(new Ee(3396190,3396190,3376200)),Ee._default=Ee.WGS84,Object.defineProperties(Ee,{default:{get:function(){return Ee._default},set:function(t){T.typeOf.object("value",t),Ee._default=t,q._ellipsoidRadiiSquared=t.radiiSquared,me._ellipsoidOneOverRadii=t.oneOverRadii,me._ellipsoidOneOverRadiiSquared=t.oneOverRadiiSquared,me._ellipsoidCenterToleranceSquared=t._centerToleranceSquared}}}),Ee.prototype.clone=function(t){return Ee.clone(this,t)},Ee.packedLength=q.packedLength,Ee.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,q.pack(t._radii,e,n),e},Ee.unpack=function(t,e,n){T.defined("array",t),e=e??0;const r=q.unpack(t,e);return Ee.fromCartesian3(r,n)},Ee.prototype.geocentricSurfaceNormal=q.normalize,Ee.prototype.geodeticSurfaceNormalCartographic=function(t,e){T.typeOf.object("cartographic",t);const n=t.longitude,r=t.latitude,o=Math.cos(r),i=o*Math.cos(n),a=o*Math.sin(n),s=Math.sin(r);return w(e)||(e=new q),e.x=i,e.y=a,e.z=s,q.normalize(e,e)},Ee.prototype.geodeticSurfaceNormal=function(t,e){if(T.typeOf.object("cartesian",t),isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new b("cartesian has a NaN component");if(!q.equalsEpsilon(t,q.ZERO,P.EPSILON14))return w(e)||(e=new q),e=q.multiplyComponents(t,this._oneOverRadiiSquared,e),q.normalize(e,e)};const we=new q,be=new q;Ee.prototype.cartographicToCartesian=function(t,e){const n=we,r=be;this.geodeticSurfaceNormalCartographic(t,n),q.multiplyComponents(this._radiiSquared,n,r);const o=Math.sqrt(q.dot(n,r));return q.divideByScalar(r,o,r),q.multiplyByScalar(n,t.height,n),w(e)||(e=new q),q.add(r,n,e)},Ee.prototype.cartographicArrayToCartesianArray=function(t,e){T.defined("cartographics",t);const n=t.length;w(e)?e.length=n:e=new Array(n);for(let r=0;r<n;r++)e[r]=this.cartographicToCartesian(t[r],e[r]);return e};const Te=new q,Re=new q,Ae=new q;Ee.prototype.cartesianToCartographic=function(t,e){const n=this.scaleToGeodeticSurface(t,Re);if(!w(n))return;const r=this.geodeticSurfaceNormal(n,Te),o=q.subtract(t,n,Ae),i=Math.atan2(r.y,r.x),a=Math.asin(r.z),s=P.sign(q.dot(o,t))*q.magnitude(o);return w(e)?(e.longitude=i,e.latitude=a,e.height=s,e):new me(i,a,s)},Ee.prototype.cartesianArrayToCartographicArray=function(t,e){T.defined("cartesians",t);const n=t.length;w(e)?e.length=n:e=new Array(n);for(let r=0;r<n;++r)e[r]=this.cartesianToCartographic(t[r],e[r]);return e},Ee.prototype.scaleToGeodeticSurface=function(t,e){return de(t,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,e)},Ee.prototype.scaleToGeocentricSurface=function(t,e){T.typeOf.object("cartesian",t),w(e)||(e=new q);const n=t.x,r=t.y,o=t.z,i=this._oneOverRadiiSquared,a=1/Math.sqrt(n*n*i.x+r*r*i.y+o*o*i.z);return q.multiplyByScalar(t,a,e)},Ee.prototype.transformPositionToScaledSpace=function(t,e){return w(e)||(e=new q),q.multiplyComponents(t,this._oneOverRadii,e)},Ee.prototype.transformPositionFromScaledSpace=function(t,e){return w(e)||(e=new q),q.multiplyComponents(t,this._radii,e)},Ee.prototype.equals=function(t){return this===t||w(t)&&q.equals(this._radii,t._radii)},Ee.prototype.toString=function(){return this._radii.toString()},Ee.prototype.getSurfaceNormalIntersectionWithZAxis=function(t,e,n){if(T.typeOf.object("position",t),!P.equalsEpsilon(this._radii.x,this._radii.y,P.EPSILON15))throw new b("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");T.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),e=e??0;const r=this._squaredXOverSquaredZ;if(w(n)||(n=new q),n.x=0,n.y=0,n.z=t.z*(1-r),!(Math.abs(n.z)>=this._radii.z-e))return n};const Se=new q;Ee.prototype.getLocalCurvature=function(t,e){T.typeOf.object("surfacePosition",t),w(e)||(e=new ae);const n=this.getSurfaceNormalIntersectionWithZAxis(t,0,Se),r=q.distance(t,n),o=r*(this.minimumRadius*r/this.maximumRadius**2)**2;return ae.fromElements(1/r,1/o,e)};const xe=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],Me=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function Ie(t,e,n){T.typeOf.number("a",t),T.typeOf.number("b",e),T.typeOf.func("func",n);const r=.5*(e+t),o=.5*(e-t);let i=0;for(let a=0;a<5;a++){const t=o*xe[a];i+=Me[a]*(n(r+t)+n(r-t))}return i*=o,i}function Ne(t){this._ellipsoid=t??Ee.default,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Ee.prototype.surfaceArea=function(t){T.typeOf.object("rectangle",t);const e=t.west;let n=t.east;const r=t.south,o=t.north;for(;n<e;)n+=P.TWO_PI;const i=this._radiiSquared,a=i.x,s=i.y,u=i.z,c=a*s;return Ie(r,o,(function(t){const r=Math.cos(t),o=Math.sin(t);return Math.cos(t)*Ie(e,n,(function(t){const e=Math.cos(t),n=Math.sin(t);return Math.sqrt(c*o*o+u*(s*e*e+a*n*n)*r*r)}))}))},Object.defineProperties(Ne.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),Ne.prototype.project=function(t,e){const n=this._semimajorAxis,r=t.longitude*n,o=t.latitude*n,i=t.height;return w(e)?(e.x=r,e.y=o,e.z=i,e):new q(r,o,i)},Ne.prototype.unproject=function(t,e){if(!w(t))throw new b("cartesian is required");const n=this._oneOverSemimajorAxis,r=t.x*n,o=t.y*n,i=t.z;return w(e)?(e.longitude=r,e.latitude=o,e.height=i,e):new me(r,o,i)};var Pe=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function Ce(t,e,n){T.defined("array",t),T.defined("itemToFind",e),T.defined("comparator",n);let r,o,i=0,a=t.length-1;for(;i<=a;)if(r=~~((i+a)/2),o=n(t[r],e),o<0)i=r+1;else{if(!(o>0))return r;a=r-1}return~(a+1)}function ve(t,e,n,r,o){this.xPoleWander=t,this.yPoleWander=e,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=o}function qe(t){if(null===t||isNaN(t))throw new b("year is required and must be a number.");return t%4==0&&t%100!=0||t%400==0}const je=[31,28,31,30,31,30,31,31,30,31,30,31];function Ue(t,e,n,r,o,i,a,s){t=t??1,e=e??1,n=n??1,r=r??0,o=o??0,i=i??0,a=a??0,s=s??!1,T.typeOf.number.greaterThanOrEquals("Year",t,1),T.typeOf.number.lessThanOrEquals("Year",t,9999),T.typeOf.number.greaterThanOrEquals("Month",e,1),T.typeOf.number.lessThanOrEquals("Month",e,12),T.typeOf.number.greaterThanOrEquals("Day",n,1),T.typeOf.number.lessThanOrEquals("Day",n,31),T.typeOf.number.greaterThanOrEquals("Hour",r,0),T.typeOf.number.lessThanOrEquals("Hour",r,23),T.typeOf.number.greaterThanOrEquals("Minute",o,0),T.typeOf.number.lessThanOrEquals("Minute",o,59),T.typeOf.bool("IsLeapSecond",s),T.typeOf.number.greaterThanOrEquals("Second",i,0),T.typeOf.number.lessThanOrEquals("Second",i,s?60:59),T.typeOf.number.greaterThanOrEquals("Millisecond",a,0),T.typeOf.number.lessThan("Millisecond",a,1e3),function(){const r=2===e&&qe(t)?je[e-1]+1:je[e-1];if(n>r)throw new b("Month and Day represents invalid date")}(),this.year=t,this.month=e,this.day=n,this.hour=r,this.minute=o,this.second=i,this.millisecond=a,this.isLeapSecond=s}function ze(t,e){this.julianDate=t,this.offset=e}var De=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Le=Object.freeze({UTC:0,TAI:1});const Fe=new Ue,Be=[31,28,31,30,31,30,31,31,30,31,30,31];function ke(t,e){return on.compare(t.julianDate,e.julianDate)}const We=new ze;function Ge(t){We.julianDate=t;const e=on.leapSeconds;let n=Ce(e,We,ke);n<0&&(n=~n),n>=e.length&&(n=e.length-1);let r=e[n].offset;n>0&&on.secondsDifference(e[n].julianDate,t)>r&&(n--,r=e[n].offset),on.addSeconds(t,r,t)}function Ve(t,e){We.julianDate=t;const n=on.leapSeconds;let r=Ce(n,We,ke);if(r<0&&(r=~r),0===r)return on.addSeconds(t,-n[0].offset,e);if(r>=n.length)return on.addSeconds(t,-n[r-1].offset,e);const o=on.secondsDifference(n[r].julianDate,t);return 0===o?on.addSeconds(t,-n[r].offset,e):o<=1?void 0:on.addSeconds(t,-n[--r].offset,e)}function Xe(t,e,n){const r=e/De.SECONDS_PER_DAY|0;return t+=r,(e-=De.SECONDS_PER_DAY*r)<0&&(t--,e+=De.SECONDS_PER_DAY),n.dayNumber=t,n.secondsOfDay=e,n}function He(t,e,n,r,o,i,a){const s=(e-14)/12|0,u=t+4800+s;let c=(1461*u/4|0)+(367*(e-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);const l=i+(r*De.SECONDS_PER_HOUR+o*De.SECONDS_PER_MINUTE+a*De.SECONDS_PER_MILLISECOND);return l>=43200&&(c-=1),[c,l]}const $e=/^(\d{4})$/,Ye=/^(\d{4})-(\d{2})$/,Ze=/^(\d{4})-?(\d{3})$/,Qe=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Ke=/^(\d{4})-?(\d{2})-?(\d{2})$/,Je=/([Z+\-])?(\d{2})?:?(\d{2})?$/,tn=/^(\d{2})(\.\d+)?/.source+Je.source,en=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Je.source,nn=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Je.source,rn="Invalid ISO 8601 date.";function on(t,e,n){this.dayNumber=void 0,this.secondsOfDay=void 0,t=t??0,e=e??0,n=n??Le.UTC;const r=0|t;Xe(r,e+=(t-r)*De.SECONDS_PER_DAY,this),n===Le.UTC&&Ge(this)}on.fromGregorianDate=function(t,e){if(!(t instanceof Ue))throw new b("date must be a valid GregorianDate.");const n=He(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond);return w(e)?(Xe(n[0],n[1],e),Ge(e),e):new on(n[0],n[1],Le.UTC)},on.fromDate=function(t,e){if(!(t instanceof Date)||isNaN(t.getTime()))throw new b("date must be a valid JavaScript Date.");const n=He(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return w(e)?(Xe(n[0],n[1],e),Ge(e),e):new on(n[0],n[1],Le.UTC)},on.fromIso8601=function(t,e){if("string"!=typeof t)throw new b(rn);let n,r=(t=t.replace(",",".")).split("T"),o=1,i=1,a=0,s=0,u=0,c=0;const l=r[0],f=r[1];let h,p,d,m;if(!w(l))throw new b(rn);if(r=l.match(Ke),null!==r){if(d=l.split("-").length-1,d>0&&2!==d)throw new b(rn);n=+r[1],o=+r[2],i=+r[3]}else if(r=l.match(Ye),null!==r)n=+r[1],o=+r[2];else if(r=l.match($e),null!==r)n=+r[1];else{let t;if(r=l.match(Ze),null!==r){if(n=+r[1],t=+r[2],p=qe(n),t<1||p&&t>366||!p&&t>365)throw new b(rn)}else{if(r=l.match(Qe),null===r)throw new b(rn);{n=+r[1];const e=+r[2],o=+r[3]||0;if(d=l.split("-").length-1,d>0&&(!w(r[3])&&1!==d||w(r[3])&&2!==d))throw new b(rn);t=7*e+o-new Date(Date.UTC(n,0,4)).getUTCDay()-3}}h=new Date(Date.UTC(n,0,1)),h.setUTCDate(t),o=h.getUTCMonth()+1,i=h.getUTCDate()}if(p=qe(n),o<1||o>12||i<1||(2!==o||!p)&&i>Be[o-1]||p&&2===o&&i>29)throw new b(rn);if(w(f)){if(r=f.match(nn),null!==r){if(d=f.split(":").length-1,d>0&&2!==d&&3!==d)throw new b(rn);a=+r[1],s=+r[2],u=+r[3],c=1e3*+(r[4]||0),m=5}else if(r=f.match(en),null!==r){if(d=f.split(":").length-1,d>2)throw new b(rn);a=+r[1],s=+r[2],u=60*+(r[3]||0),m=4}else{if(r=f.match(tn),null===r)throw new b(rn);a=+r[1],s=60*+(r[2]||0),m=3}if(s>=60||u>=61||a>24||24===a&&(s>0||u>0||c>0))throw new b(rn);const t=r[m],e=+r[m+1],l=+(r[m+2]||0);switch(t){case"+":a-=e,s-=l;break;case"-":a+=e,s+=l;break;case"Z":break;default:s+=new Date(Date.UTC(n,o-1,i,a,s)).getTimezoneOffset()}}const y=60===u;for(y&&u--;s>=60;)s-=60,a++;for(;a>=24;)a-=24,i++;for(h=p&&2===o?29:Be[o-1];i>h;)i-=h,o++,o>12&&(o-=12,n++),h=p&&2===o?29:Be[o-1];for(;s<0;)s+=60,a--;for(;a<0;)a+=24,i--;for(;i<1;)o--,o<1&&(o+=12,n--),h=p&&2===o?29:Be[o-1],i+=h;const g=He(n,o,i,a,s,u,c);return w(e)?(Xe(g[0],g[1],e),Ge(e)):e=new on(g[0],g[1],Le.UTC),y&&on.addSeconds(e,1,e),e},on.now=function(t){return on.fromDate(new Date,t)};const an=new on(0,0,Le.TAI);on.toGregorianDate=function(t,e){if(!w(t))throw new b("julianDate is required.");let n=!1,r=Ve(t,an);w(r)||(on.addSeconds(t,-1,an),r=Ve(an,an),n=!0);let o=r.dayNumber;const i=r.secondsOfDay;i>=43200&&(o+=1);let a=o+68569|0;const s=4*a/146097|0;a=a-((146097*s+3)/4|0)|0;const u=4e3*(a+1)/1461001|0;a=a-(1461*u/4|0)+31|0;const c=80*a/2447|0,l=a-(2447*c/80|0)|0;a=c/11|0;const f=c+2-12*a|0,h=100*(s-49)+u+a|0;let p=i/De.SECONDS_PER_HOUR|0,d=i-p*De.SECONDS_PER_HOUR;const m=d/De.SECONDS_PER_MINUTE|0;d-=m*De.SECONDS_PER_MINUTE;let y=0|d;const g=(d-y)/De.SECONDS_PER_MILLISECOND;return p+=12,p>23&&(p-=24),n&&(y+=1),w(e)?(e.year=h,e.month=f,e.day=l,e.hour=p,e.minute=m,e.second=y,e.millisecond=g,e.isLeapSecond=n,e):new Ue(h,f,l,p,m,y,g,n)},on.toDate=function(t){if(!w(t))throw new b("julianDate is required.");const e=on.toGregorianDate(t,Fe);let n=e.second;return e.isLeapSecond&&(n-=1),new Date(Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,n,e.millisecond))},on.toIso8601=function(t,e){if(!w(t))throw new b("julianDate is required.");const n=on.toGregorianDate(t,Fe);let r=n.year,o=n.month,i=n.day,a=n.hour;const s=n.minute,u=n.second,c=n.millisecond;let l;if(1e4===r&&1===o&&1===i&&0===a&&0===s&&0===u&&0===c&&(r=9999,o=12,i=31,a=24),!w(e)&&0!==c){const t=.01*c;return l=t<1e-6?t.toFixed(20).replace(".","").replace(/0+$/,""):t.toString().replace(".",""),`${r.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${l}Z`}return w(e)&&0!==e?(l=(.01*c).toFixed(e).replace(".","").slice(0,e),`${r.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${l}Z`):`${r.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}Z`},on.clone=function(t,e){if(w(t))return w(e)?(e.dayNumber=t.dayNumber,e.secondsOfDay=t.secondsOfDay,e):new on(t.dayNumber,t.secondsOfDay,Le.TAI)},on.compare=function(t,e){if(!w(t))throw new b("left is required.");if(!w(e))throw new b("right is required.");const n=t.dayNumber-e.dayNumber;return 0!==n?n:t.secondsOfDay-e.secondsOfDay},on.equals=function(t,e){return t===e||w(t)&&w(e)&&t.dayNumber===e.dayNumber&&t.secondsOfDay===e.secondsOfDay},on.equalsEpsilon=function(t,e,n){return n=n??0,t===e||w(t)&&w(e)&&Math.abs(on.secondsDifference(t,e))<=n},on.totalDays=function(t){if(!w(t))throw new b("julianDate is required.");return t.dayNumber+t.secondsOfDay/De.SECONDS_PER_DAY},on.secondsDifference=function(t,e){if(!w(t))throw new b("left is required.");if(!w(e))throw new b("right is required.");return(t.dayNumber-e.dayNumber)*De.SECONDS_PER_DAY+(t.secondsOfDay-e.secondsOfDay)},on.daysDifference=function(t,e){if(!w(t))throw new b("left is required.");if(!w(e))throw new b("right is required.");return t.dayNumber-e.dayNumber+(t.secondsOfDay-e.secondsOfDay)/De.SECONDS_PER_DAY},on.computeTaiMinusUtc=function(t){We.julianDate=t;const e=on.leapSeconds;let n=Ce(e,We,ke);return n<0&&(n=~n,--n,n<0&&(n=0)),e[n].offset},on.addSeconds=function(t,e,n){if(!w(t))throw new b("julianDate is required.");if(!w(e))throw new b("seconds is required.");if(!w(n))throw new b("result is required.");return Xe(t.dayNumber,t.secondsOfDay+e,n)},on.addMinutes=function(t,e,n){if(!w(t))throw new b("julianDate is required.");if(!w(e))throw new b("minutes is required.");if(!w(n))throw new b("result is required.");const r=t.secondsOfDay+e*De.SECONDS_PER_MINUTE;return Xe(t.dayNumber,r,n)},on.addHours=function(t,e,n){if(!w(t))throw new b("julianDate is required.");if(!w(e))throw new b("hours is required.");if(!w(n))throw new b("result is required.");const r=t.secondsOfDay+e*De.SECONDS_PER_HOUR;return Xe(t.dayNumber,r,n)},on.addDays=function(t,e,n){if(!w(t))throw new b("julianDate is required.");if(!w(e))throw new b("days is required.");if(!w(n))throw new b("result is required.");return Xe(t.dayNumber+e,t.secondsOfDay,n)},on.lessThan=function(t,e){return on.compare(t,e)<0},on.lessThanOrEquals=function(t,e){return on.compare(t,e)<=0},on.greaterThan=function(t,e){return on.compare(t,e)>0},on.greaterThanOrEquals=function(t,e){return on.compare(t,e)>=0},on.prototype.clone=function(t){return on.clone(this,t)},on.prototype.equals=function(t){return on.equals(this,t)},on.prototype.equalsEpsilon=function(t,e){return on.equalsEpsilon(this,t,e)},on.prototype.toString=function(){return on.toIso8601(this)},on.leapSeconds=[new ze(new on(2441317,43210,Le.TAI),10),new ze(new on(2441499,43211,Le.TAI),11),new ze(new on(2441683,43212,Le.TAI),12),new ze(new on(2442048,43213,Le.TAI),13),new ze(new on(2442413,43214,Le.TAI),14),new ze(new on(2442778,43215,Le.TAI),15),new ze(new on(2443144,43216,Le.TAI),16),new ze(new on(2443509,43217,Le.TAI),17),new ze(new on(2443874,43218,Le.TAI),18),new ze(new on(2444239,43219,Le.TAI),19),new ze(new on(2444786,43220,Le.TAI),20),new ze(new on(2445151,43221,Le.TAI),21),new ze(new on(2445516,43222,Le.TAI),22),new ze(new on(2446247,43223,Le.TAI),23),new ze(new on(2447161,43224,Le.TAI),24),new ze(new on(2447892,43225,Le.TAI),25),new ze(new on(2448257,43226,Le.TAI),26),new ze(new on(2448804,43227,Le.TAI),27),new ze(new on(2449169,43228,Le.TAI),28),new ze(new on(2449534,43229,Le.TAI),29),new ze(new on(2450083,43230,Le.TAI),30),new ze(new on(2450630,43231,Le.TAI),31),new ze(new on(2451179,43232,Le.TAI),32),new ze(new on(2453736,43233,Le.TAI),33),new ze(new on(2454832,43234,Le.TAI),34),new ze(new on(2456109,43235,Le.TAI),35),new ze(new on(2457204,43236,Le.TAI),36),new ze(new on(2457754,43237,Le.TAI),37)];var sn,un,cn,ln,fn,hn,pn,dn,mn,yn={exports:{}},gn={exports:{}},_n=gn.exports,On={exports:{}},En=On.exports,wn={exports:{}},bn=wn.exports,Tn=(ln||(ln=1,hn=yn.exports,pn=function(t,e,n,r){var o=r&&r.URI;function i(t,e){var n=arguments.length>=1;if(!(this instanceof i))return n?arguments.length>=2?new i(t,e):new i(t):new i;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&n)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}i.version="1.19.11";var a=i.prototype,s=Object.prototype.hasOwnProperty;function u(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function l(t){return"Array"===c(t)}function f(t,e){var n,r,o={};if("RegExp"===c(e))o=null;else if(l(e))for(n=0,r=e.length;n<r;n++)o[e[n]]=!0;else o[e]=!0;for(n=0,r=t.length;n<r;n++)(o&&void 0!==o[t[n]]||!o&&e.test(t[n]))&&(t.splice(n,1),r--,n--);return t}function h(t,e){var n,r;if(l(e)){for(n=0,r=e.length;n<r;n++)if(!h(t,e[n]))return!1;return!0}var o=c(e);for(n=0,r=t.length;n<r;n++)if("RegExp"===o){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function p(t,e){if(!l(t)||!l(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function d(t){return t.replace(/^\/+|\/+$/g,"")}function m(t){return escape(t)}function y(t){return encodeURIComponent(t).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return i.domAttributes[e]}},i.encode=y,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=y,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(t,e){var n=i.encode(t+"");return void 0===e&&(e=i.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},i.decodeQuery=function(t,e){t+="",void 0===e&&(e=i.escapeQuerySpace);try{return i.decode(e?t.replace(/\+/g,"%20"):t)}catch(n){return t}};var g,_={encode:"encode",decode:"decode"},O=function(t,e){return function(n){try{return i[e](n+"").replace(i.characters[t][e].expression,(function(n){return i.characters[t][e].map[n]}))}catch(r){return n}}};for(g in _)i[g+"PathSegment"]=O("pathname",_[g]),i[g+"UrnPathSegment"]=O("urnpath",_[g]);var E=function(t,e,n){return function(r){var o;o=n?function(t){return i[e](i[n](t))}:i[e];for(var a=(r+"").split(t),s=0,u=a.length;s<u;s++)a[s]=o(a[s]);return a.join(t)}};function w(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function b(t,e){return function(n,r){return void 0===n?this._parts[t]||"":(null!==n&&(n+="").charAt(0)===e&&(n=n.substring(1)),this._parts[t]=n,this.build(!r),this)}}i.decodePath=E("/","decodePathSegment"),i.decodeUrnPath=E(":","decodeUrnPathSegment"),i.recodePath=E("/","encodePathSegment","decode"),i.recodeUrnPath=E(":","encodeUrnPathSegment","decode"),i.encodeReserved=O("reserved","encode"),i.parse=function(t,e){var n;return e||(e={preventInvalidHostname:i.preventInvalidHostname}),(n=(t=(t=t.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),(n=t.indexOf("?"))>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=i.parseAuthority(t,e)):(n=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(i.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3).replace(/\\/g,"/")?(t=t.substring(n+3),t=i.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0)),e.path=t,e},i.parseHost=function(t,e){t||(t="");var n,r,o=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,o)||null,"/"===e.port&&(e.port=null);else{var a=t.indexOf(":"),s=t.indexOf("/"),u=t.indexOf(":",a+1);-1!==u&&(-1===s||u<s)?(e.hostname=t.substring(0,o)||null,e.port=null):(r=t.substring(0,o).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),e.preventInvalidHostname&&i.ensureValidHostname(e.hostname,e.protocol),e.port&&i.ensureValidPort(e.port),t.substring(o)||"/"},i.parseAuthority=function(t,e){return t=i.parseUserinfo(t,e),i.parseHost(t,e)},i.parseUserinfo=function(t,e){var n=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var r,o=t.indexOf("/"),a=t.lastIndexOf("@",o>-1?o:t.length-1);return a>-1&&(-1===o||a<o)?(r=t.substring(0,a).split(":"),e.username=r[0]?i.decode(r[0]):null,r.shift(),e.password=r[0]?i.decode(r.join(":")):null,t=n.substring(a+1)):(e.username=null,e.password=null),t},i.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,r,o,a={},u=t.split("&"),c=u.length,l=0;l<c;l++)n=u[l].split("="),r=i.decodeQuery(n.shift(),e),o=n.length?i.decodeQuery(n.join("="),e):null,"__proto__"!==r&&(s.call(a,r)?("string"!=typeof a[r]&&null!==a[r]||(a[r]=[a[r]]),a[r].push(o)):a[r]=o);return a},i.build=function(t){var e="",n=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",n=!0),e+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&n&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},i.buildHost=function(t){var e="";return t.hostname?(i.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},i.buildAuthority=function(t){return i.buildUserinfo(t)+i.buildHost(t)},i.buildUserinfo=function(t){var e="";return t.username&&(e+=i.encode(t.username)),t.password&&(e+=":"+i.encode(t.password)),e&&(e+="@"),e},i.buildQuery=function(t,e,n){var r,o,a,u,c="";for(o in t)if("__proto__"!==o&&s.call(t,o))if(l(t[o]))for(r={},a=0,u=t[o].length;a<u;a++)void 0!==t[o][a]&&void 0===r[t[o][a]+""]&&(c+="&"+i.buildQueryParameter(o,t[o][a],n),!0!==e&&(r[t[o][a]+""]=!0));else void 0!==t[o]&&(c+="&"+i.buildQueryParameter(o,t[o],n));return c.substring(1)},i.buildQueryParameter=function(t,e,n){return i.encodeQuery(t,n)+(null!==e?"="+i.encodeQuery(e,n):"")},i.addQuery=function(t,e,n){if("object"==typeof e)for(var r in e)s.call(e,r)&&i.addQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),l(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},i.setQuery=function(t,e,n){if("object"==typeof e)for(var r in e)s.call(e,r)&&i.setQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===n?null:n}},i.removeQuery=function(t,e,n){var r,o,a;if(l(e))for(r=0,o=e.length;r<o;r++)t[e[r]]=void 0;else if("RegExp"===c(e))for(a in t)e.test(a)&&(t[a]=void 0);else if("object"==typeof e)for(a in e)s.call(e,a)&&i.removeQuery(t,a,e[a]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===c(n)?!l(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=f(t[e],n):t[e]!==String(n)||l(n)&&1!==n.length?l(t[e])&&(t[e]=f(t[e],n)):t[e]=void 0:t[e]=void 0}},i.hasQuery=function(t,e,n,r){switch(c(e)){case"String":break;case"RegExp":for(var o in t)if(s.call(t,o)&&e.test(o)&&(void 0===n||i.hasQuery(t,o,n)))return!0;return!1;case"Object":for(var a in e)if(s.call(e,a)&&!i.hasQuery(t,a,e[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(n)){case"Undefined":return e in t;case"Boolean":return n===Boolean(l(t[e])?t[e].length:t[e]);case"Function":return!!n(t[e],e,t);case"Array":return!!l(t[e])&&(r?h:p)(t[e],n);case"RegExp":return l(t[e])?!!r&&h(t[e],n):Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return l(t[e])?!!r&&h(t[e],n):t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var t=[],e=[],n=0,r=0;r<arguments.length;r++){var o=new i(arguments[r]);t.push(o);for(var a=o.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&e.push(a[s]),a[s]&&n++}if(!e.length||!n)return new i("");var u=new i("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},i.commonPath=function(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return n<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},i.withinString=function(t,e,n){n||(n={});var r=n.start||i.findUri.start,o=n.end||i.findUri.end,a=n.trim||i.findUri.trim,s=n.parens||i.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var c=r.exec(t);if(!c)break;var l=c.index;if(n.ignoreHtml){var f=t.slice(Math.max(l-3,0),l);if(f&&u.test(f))continue}for(var h=l+t.slice(l).search(o),p=t.slice(l,h),d=-1;;){var m=s.exec(p);if(!m)break;var y=m.index+m[0].length;d=Math.max(d,y)}if(!((p=d>-1?p.slice(0,d)+p.slice(d).replace(a,""):p.replace(a,"")).length<=c[0].length||n.ignore&&n.ignore.test(p))){var g=e(p,l,h=l+p.length,t);void 0!==g?(g=String(g),t=t.slice(0,l)+g+t.slice(h),r.lastIndex=l+g.length):r.lastIndex=h}}return r.lastIndex=0,t},i.ensureValidHostname=function(e,n){var r=!!e,o=!1;if(!!n&&(o=h(i.hostProtocols,n)),o&&!r)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(e&&e.match(i.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},i.noConflict=function(t){if(t){var e={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(e.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(e.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=r.SecondLevelDomains.noConflict()),e}return r.URI===this&&(r.URI=o),this},a.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new i(this)},a.valueOf=a.toString=function(){return this.build(!1)._string},a.protocol=w("protocol"),a.username=w("username"),a.password=w("password"),a.hostname=w("hostname"),a.port=w("port"),a.query=b("query","?"),a.fragment=b("fragment","#"),a.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},a.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},a.pathname=function(t,e){if(void 0===t||!0===t){var n=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?i.decodeUrnPath:i.decodePath)(n):n}return this._parts.urn?this._parts.path=t?i.recodeUrnPath(t):"":this._parts.path=t?i.recodePath(t):"/",this.build(!e),this},a.path=a.pathname,a.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=i._parts();var r=t instanceof i,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[i.getDomAttribute(t)]||"",o=!1),!r&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=i.parse(String(t),this._parts);else{if(!r&&!o)throw new TypeError("invalid input");var a=r?t._parts:t;for(n in a)"query"!==n&&s.call(this._parts,n)&&(this._parts[n]=a[n]);a.query&&this.query(a.query,!1)}return this.build(!e),this},a.is=function(t){var e=!1,r=!1,o=!1,a=!1,s=!1,u=!1,c=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,r=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),s=(a=!(e=r||o))&&n&&n.has(this._parts.hostname),u=a&&i.idn_expression.test(this._parts.hostname),c=a&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return a;case"sld":return s;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var T=a.protocol,R=a.port,A=a.hostname;a.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return T.call(this,t,e)},a.scheme=a.protocol,a.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),i.ensureValidPort(t))),R.call(this,t,e))},a.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(t,n))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(t,this._parts.protocol)}return A.call(this,t,e)},a.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var r=i(t);return this.protocol(r.protocol()).authority(r.authority()).build(!e),this},a.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},a.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},a.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=i.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==t[t.length-1]&&(t+="@"),i.parseUserinfo(t,this._parts),this.build(!e),this},a.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=i.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},a.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,r),a=new RegExp("^"+u(o));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&i.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},a.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(e).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var o=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},a.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(r+1);return!0!==e&&n&&n.list[o.toLowerCase()]&&n.get(this._parts.hostname)||o}var i;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');i=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},a.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?i.decodePath(r):r}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),s=new RegExp("^"+u(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t),this.build(!e),this},a.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return t?i.decodePathSegment(r):r}var o=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(o=!0);var a=new RegExp(u(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(a,t),o?this.normalizePath(e):this.build(!e),this},a.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(n=o.substring(a+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",t?i.decodePathSegment(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var s,c=this.suffix();if(c)s=t?new RegExp(u(c)+"$"):new RegExp(u("."+c)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return s&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t)),this.build(!e),this},a.segment=function(t,e,n){var r=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),a=o.split(r);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(i&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(l(e)){a=[];for(var s=0,u=e.length;s<u;s++)(e[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(d(e[s])))}else(e||"string"==typeof e)&&(e=d(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=d(e):a.splice(t,1);return i&&a.unshift(""),this.path(a.join(r),n)},a.segmentCoded=function(t,e,n){var r,o,a;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(l(r=this.segment(t,e,n)))for(o=0,a=r.length;o<a;o++)r[o]=i.decode(r[o]);else r=void 0!==r?i.decode(r):void 0;return r}if(l(e))for(o=0,a=e.length;o<a;o++)e[o]=i.encode(e[o]);else e="string"==typeof e||e instanceof String?i.encode(e):e;return this.segment(t,e,n)};var S=a.query;return a.query=function(t,e){if(!0===t)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=t.call(this,n);return this._parts.query=i.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=i.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):S.call(this,t,e)},a.setQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)s.call(t,o)&&(r[o]=t[o])}return this._parts.query=i.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.addQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(r,t,void 0===e?null:e),this._parts.query=i.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.removeQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(r,t,e),this._parts.query=i.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.hasQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(r,t,e,n)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},a.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},a.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},a.normalizePath=function(t){var e,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var r,o,a="";for("/"!==(n=i.recodePath(n)).charAt(0)&&(e=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(a=n.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(r=n.search(/\/\.\.(\/|$)/));)0!==r?(-1===(o=n.substring(0,r).lastIndexOf("/"))&&(o=r),n=n.substring(0,o)+n.substring(r+3)):n=n.substring(3);return e&&this.is("relative")&&(n=a+n.substring(1)),this._parts.path=n,this.build(!t),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},a.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var t=i.encode,e=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},a.unicode=function(){var t=i.encode,e=i.decode;i.encode=y,i.decode=unescape;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},a.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var r="",o=0,a=e._parts.query.split("&"),s=a.length;o<s;o++){var u=(a[o]||"").split("=");r+="&"+i.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(r+="="+i.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+i.decodeQuery(e.hash(),!0)},a.absoluteTo=function(t){var e,n,r,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof i||(t=new i(t)),o._parts.protocol)return o;if(o._parts.protocol=t._parts.protocol,this._parts.hostname)return o;for(n=0;r=a[n];n++)o._parts[r]=t._parts[r];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),o.build(),o},a.relativeTo=function(t){var e,n,r,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new i(t).normalize(),e=s._parts,n=t._parts,o=s.path(),a=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return s.build();if(null!==e.protocol||null!==e.username||null!==e.password)return s.build();if(e.hostname!==n.hostname||e.port!==n.port)return s.build();if(e.hostname=null,e.port=null,o===a)return e.path="",s.build();if(!(r=i.commonPath(o,a)))return s.build();var u=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(r.length)||"./",s.build()},a.equals=function(t){var e,n,r,o,a,u=this.clone(),c=new i(t),f={};if(u.normalize(),c.normalize(),u.toString()===c.toString())return!0;if(r=u.query(),o=c.query(),u.query(""),c.query(""),u.toString()!==c.toString())return!1;if(r.length!==o.length)return!1;for(a in e=i.parseQuery(r,this._parts.escapeQuerySpace),n=i.parseQuery(o,this._parts.escapeQuerySpace),e)if(s.call(e,a)){if(l(e[a])){if(!p(e[a],n[a]))return!1}else if(e[a]!==n[a])return!1;f[a]=!0}for(a in n)if(s.call(n,a)&&!f[a])return!1;return!0},a.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},a.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},a.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},i},(fn=yn).exports?fn.exports=pn((sn||(sn=1,dn=gn,mn=gn.exports,function(t){var e=mn&&!mn.nodeType&&mn,n=dn&&!dn.nodeType&&dn,r="object"==typeof x&&x;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var o,i,a=2147483647,s=36,u=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function d(t){throw new RangeError(f[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function y(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(l,".")).split("."),e).join(".")}function g(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function _(t){return m(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+p(t)})).join("")}function O(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:s}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?h(t/700):t>>1,t+=h(t/e);t>455;r+=s)t=h(t/35);return h(r+36*t/(t+38))}function b(t){var e,n,r,o,i,u,c,l,f,p,m=[],y=t.length,g=0,E=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&d("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<y;){for(i=g,u=1,c=s;o>=y&&d("invalid-input"),((l=O(t.charCodeAt(o++)))>=s||l>h((a-g)/u))&&d("overflow"),g+=l*u,!(l<(f=c<=b?1:c>=b+26?26:c-b));c+=s)u>h(a/(p=s-f))&&d("overflow"),u*=p;b=w(g-i,e=m.length+1,0==i),h(g/e)>a-E&&d("overflow"),E+=h(g/e),g%=e,m.splice(g++,0,E)}return _(m)}function T(t){var e,n,r,o,i,u,c,l,f,m,y,_,O,b,T,R=[];for(_=(t=g(t)).length,e=128,n=0,i=72,u=0;u<_;++u)(y=t[u])<128&&R.push(p(y));for(r=o=R.length,o&&R.push("-");r<_;){for(c=a,u=0;u<_;++u)(y=t[u])>=e&&y<c&&(c=y);for(c-e>h((a-n)/(O=r+1))&&d("overflow"),n+=(c-e)*O,e=c,u=0;u<_;++u)if((y=t[u])<e&&++n>a&&d("overflow"),y==e){for(l=n,f=s;!(l<(m=f<=i?1:f>=i+26?26:f-i));f+=s)T=l-m,b=s-m,R.push(p(E(m+T%b,0))),l=h(T/b);R.push(p(E(l,0))),i=w(n,O,r==o),n=0,++r}++n,++e}return R.join("")}if(o={version:"1.3.2",ucs2:{decode:g,encode:_},decode:b,encode:T,toASCII:function(t){return y(t,(function(t){return c.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return y(t,(function(t){return u.test(t)?b(t.slice(4).toLowerCase()):t}))}},e&&n)if(dn.exports==e)n.exports=o;else for(i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);else t.punycode=o}(_n)),gn.exports),function(){return un||(un=1,e=En,n=function(t){var e=t&&t.IPv6;return{best:function(t){var e,n,r=t.toLowerCase().split(":"),o=r.length,i=8;for(""===r[0]&&""===r[1]&&""===r[2]?(r.shift(),r.shift()):""===r[0]&&""===r[1]?r.shift():""===r[o-1]&&""===r[o-2]&&r.pop(),-1!==r[(o=r.length)-1].indexOf(".")&&(i=7),e=0;e<o&&""!==r[e];e++);if(e<i)for(r.splice(e,1,"0000");r.length<i;)r.splice(e,0,"0000");for(var a=0;a<i;a++){n=r[a].split("");for(var s=0;s<3&&"0"===n[0]&&n.length>1;s++)n.splice(0,1);r[a]=n.join("")}var u=-1,c=0,l=0,f=-1,h=!1;for(a=0;a<i;a++)h?"0"===r[a]?l+=1:(h=!1,l>c&&(u=f,c=l)):"0"===r[a]&&(h=!0,f=a,l=1);l>c&&(u=f,c=l),c>1&&r.splice(u,c,""),o=r.length;var p="";for(""===r[0]&&(p=":"),a=0;a<o&&(p+=r[a],a!==o-1);a++)p+=":";return""===r[o-1]&&(p+=":"),p},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}},(t=On).exports?t.exports=n():e.IPv6=n(e)),On.exports;var t,e,n}(),function(){return cn||(cn=1,e=bn,n=function(t){var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return!1;var o=n.list[t.slice(e+1)];return!!o&&o.indexOf(" "+t.slice(r+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var r=n.list[t.slice(e+1)];return!!r&&r.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return null;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(r+1,e)+" ")<0?null:t.slice(r+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n},(t=wn).exports?t.exports=n():e.SecondLevelDomains=n(e)),wn.exports;var t,e,n}()):hn.URI=pn(hn.punycode,hn.IPv6,hn.SecondLevelDomains,hn)),yn.exports),Rn=M(Tn);function An(t,e){if(null===t||"object"!=typeof t)return t;e=e??!1;const n=new t.constructor;for(const r in t)if(t.hasOwnProperty(r)){let o=t[r];e&&(o=An(o,e)),n[r]=o}return n}function Sn(t,e,n){n=n??!1;const r={},o=w(t),i=w(e);let a,s,u;if(o)for(a in t)t.hasOwnProperty(a)&&(s=t[a],i&&n&&"object"==typeof s&&e.hasOwnProperty(a)?(u=e[a],r[a]="object"==typeof u?Sn(s,u,n):s):r[a]=s);if(i)for(a in e)e.hasOwnProperty(a)&&!r.hasOwnProperty(a)&&(u=e[a],r[a]=u);return r}function xn(){let t,e;const n=new Promise((function(n,r){t=n,e=r}));return{resolve:t,reject:e,promise:n}}function Mn(t,e){let n;return"undefined"!=typeof document&&(n=document),Mn._implementation(t,e,n)}Mn._implementation=function(t,e,n){if(!w(t))throw new b("relative uri is required.");if(!w(e)){if(void 0===n)return t;e=n.baseURI??n.location.href}const r=new Rn(t);return""!==r.scheme()?r.toString():r.absoluteTo(e).toString()};const In={};function Nn(t,e,n){w(e)||(e=t.width),w(n)||(n=t.height);let r=In[e];w(r)||(r={},In[e]=r);let o=r[n];if(!w(o)){const t=document.createElement("canvas");t.width=e,t.height=n,o=t.getContext("2d",{willReadFrequently:!0}),o.globalCompositeOperation="copy",r[n]=o}return o.drawImage(t,0,0,e,n),o.getImageData(0,0,e,n).data}const Pn=/^blob:/i;function Cn(t){return T.typeOf.string("uri",t),Pn.test(t)}let vn;const qn=/^data:/i;function jn(t){return T.typeOf.string("uri",t),qn.test(t)}var Un=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),zn=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Dn(t){const e=(t=t??Z.EMPTY_OBJECT).throttleByServer??!1,n=t.throttle??!1;this.url=t.url,this.requestFunction=t.requestFunction,this.cancelFunction=t.cancelFunction,this.priorityFunction=t.priorityFunction,this.priority=t.priority??0,this.throttle=n,this.throttleByServer=e,this.type=t.type??zn.OTHER,this.serverKey=t.serverKey,this.state=Un.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Ln(t,e,n){this.statusCode=t,this.response=e,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(t){const e={};if(!t)return e;const n=t.split("\r\n");for(let r=0;r<n.length;++r){const t=n[r],o=t.indexOf(": ");if(o>0){const n=t.substring(0,o),r=t.substring(o+2);e[n]=r}}return e}(this.responseHeaders))}function Fn(){this._listeners=new Map,this._toRemove=new Map,this._toAdd=new Map,this._invokingListeners=!1,this._listenerCount=0}function Bn(t,e,n,r){e.has(n)||e.set(n,new Set);const o=e.get(n);return!o.has(r)&&(o.add(r),!0)}function kn(t,e,n,r){const o=e.get(n);if(!o||!o.has(r))return!1;if(t._invokingListeners){if(!Bn(0,t._toRemove,n,r))return!1}else o.delete(r),0===o.size&&e.delete(n);return!0}function Wn(t){T.typeOf.object("options",t),T.defined("options.comparator",t.comparator),this._comparator=t.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Gn(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Dn.prototype.cancel=function(){this.cancelled=!0},Dn.prototype.clone=function(t){return w(t)?(t.url=this.url,t.requestFunction=this.requestFunction,t.cancelFunction=this.cancelFunction,t.priorityFunction=this.priorityFunction,t.priority=this.priority,t.throttle=this.throttle,t.throttleByServer=this.throttleByServer,t.type=this.type,t.serverKey=this.serverKey,t.state=Un.UNISSUED,t.deferred=void 0,t.cancelled=!1,t):new Dn(this)},Ln.prototype.toString=function(){let t="Request has failed.";return w(this.statusCode)&&(t+=` Status Code: ${this.statusCode}`),t},Object.defineProperties(Fn.prototype,{numberOfListeners:{get:function(){return this._listenerCount}}}),Fn.prototype.addEventListener=function(t,e){T.typeOf.func("listener",t);const n=this;return Bn(0,n._invokingListeners?n._toAdd:n._listeners,t,e)&&n._listenerCount++,function(){n.removeEventListener(t,e)}},Fn.prototype.removeEventListener=function(t,e){T.typeOf.func("listener",t);const n=kn(this,this._listeners,t,e),r=kn(this,this._toAdd,t,e),o=n||r;return o&&this._listenerCount--,o},Fn.prototype.raiseEvent=function(){this._invokingListeners=!0;for(const[t,e]of this._listeners.entries())if(w(t))for(const n of e)t.apply(n,arguments);this._invokingListeners=!1;for(const[t,e]of this._toAdd.entries())for(const n of e)Bn(0,this._listeners,t,n);this._toAdd.clear();for(const[t,e]of this._toRemove.entries())for(const n of e)kn(this,this._listeners,t,n);this._toRemove.clear()},Object.defineProperties(Wn.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(t){T.typeOf.number.greaterThanOrEquals("maximumLength",t,0);const e=this._length;if(t<e){const n=this._array;for(let r=t;r<e;++r)n[r]=void 0;this._length=t,n.length=t}this._maximumLength=t}},comparator:{get:function(){return this._comparator}}}),Wn.prototype.reserve=function(t){t=t??this._length,this._array.length=t},Wn.prototype.heapify=function(t){t=t??0;const e=this._length,n=this._comparator,r=this._array;let o=-1,i=!0;for(;i;){const a=2*(t+1),s=a-1;o=s<e&&n(r[s],r[t])<0?s:t,a<e&&n(r[a],r[o])<0&&(o=a),o!==t?(Gn(r,o,t),t=o):i=!1}},Wn.prototype.resort=function(){const t=this._length;for(let e=Math.ceil(t/2);e>=0;--e)this.heapify(e)},Wn.prototype.insert=function(t){T.defined("element",t);const e=this._array,n=this._comparator,r=this._maximumLength;let o,i=this._length++;for(i<e.length?e[i]=t:e.push(t);0!==i;){const t=Math.floor((i-1)/2);if(!(n(e[i],e[t])<0))break;Gn(e,i,t),i=t}return w(r)&&this._length>r&&(o=e[r],this._length=r),o},Wn.prototype.pop=function(t){if(t=t??0,0===this._length)return;T.typeOf.number.lessThan("index",t,this._length);const e=this._array,n=e[t];return Gn(e,t,--this._length),this.heapify(t),e[this._length]=void 0,n};const Vn={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0};let Xn=20;const Hn=new Wn({comparator:function(t,e){return t.priority-e.priority}});Hn.maximumLength=Xn,Hn.reserve(Xn);const $n=[];let Yn={};const Zn="undefined"!=typeof document?new Rn(document.location.href):new Rn,Qn=new Fn;function Kn(){}function Jn(t){w(t.priorityFunction)&&(t.priority=t.priorityFunction())}function tr(t){return t.state===Un.UNISSUED&&(t.state=Un.ISSUED,t.deferred=xn()),t.deferred.promise}function er(t){const e=tr(t);return t.state=Un.ACTIVE,$n.push(t),++Vn.numberOfActiveRequests,++Vn.numberOfActiveRequestsEver,++Yn[t.serverKey],t.requestFunction().then(function(t){return function(e){if(t.state===Un.CANCELLED)return;const n=t.deferred;--Vn.numberOfActiveRequests,--Yn[t.serverKey],Qn.raiseEvent(),t.state=Un.RECEIVED,t.deferred=void 0,n.resolve(e)}}(t)).catch(function(t){return function(e){t.state!==Un.CANCELLED&&(++Vn.numberOfFailedRequests,--Vn.numberOfActiveRequests,--Yn[t.serverKey],Qn.raiseEvent(e),t.state=Un.FAILED,t.deferred.reject(e))}}(t)),e}function nr(t){const e=t.state===Un.ACTIVE;if(t.state=Un.CANCELLED,++Vn.numberOfCancelledRequests,w(t.deferred)){const e=t.deferred;t.deferred=void 0,e.reject()}e&&(--Vn.numberOfActiveRequests,--Yn[t.serverKey],++Vn.numberOfCancelledActiveRequests),w(t.cancelFunction)&&t.cancelFunction()}Kn.maximumRequests=50,Kn.maximumRequestsPerServer=18,Kn.requestsByServer={},Kn.throttleRequests=!0,Kn.debugShowStatistics=!1,Kn.requestCompletedEvent=Qn,Object.defineProperties(Kn,{statistics:{get:function(){return Vn}},priorityHeapLength:{get:function(){return Xn},set:function(t){if(t<Xn)for(;Hn.length>t;)nr(Hn.pop());Xn=t,Hn.maximumLength=t,Hn.reserve(t)}}}),Kn.serverHasOpenSlots=function(t,e){e=e??1;const n=Kn.requestsByServer[t]??Kn.maximumRequestsPerServer;return Yn[t]+e<=n},Kn.heapHasOpenSlots=function(t){return Hn.length+t<=Xn},Kn.update=function(){let t,e,n=0;const r=$n.length;for(t=0;t<r;++t)e=$n[t],e.cancelled&&nr(e),e.state===Un.ACTIVE?n>0&&($n[t-n]=e):++n;$n.length-=n;const o=Hn.internalArray,i=Hn.length;for(t=0;t<i;++t)Jn(o[t]);Hn.resort();const a=Math.max(Kn.maximumRequests-$n.length,0);let s=0;for(;s<a&&Hn.length>0;)e=Hn.pop(),e.cancelled?nr(e):!e.throttleByServer||Kn.serverHasOpenSlots(e.serverKey)?(er(e),++s):nr(e);Kn.debugShowStatistics&&(0===Vn.numberOfActiveRequests&&Vn.lastNumberOfActiveRequests>0&&(Vn.numberOfAttemptedRequests>0&&(Vn.numberOfAttemptedRequests=0),Vn.numberOfCancelledRequests>0&&(Vn.numberOfCancelledRequests=0),Vn.numberOfCancelledActiveRequests>0&&(Vn.numberOfCancelledActiveRequests=0),Vn.numberOfFailedRequests>0&&(Vn.numberOfFailedRequests=0)),Vn.lastNumberOfActiveRequests=Vn.numberOfActiveRequests)},Kn.getServerKey=function(t){T.typeOf.string("url",t);let e=new Rn(t);""===e.scheme()&&(e=e.absoluteTo(Zn),e.normalize());let n=e.authority();return/:/.test(n)||(n=`${n}:${"https"===e.scheme()?"443":"80"}`),w(Yn[n])||(Yn[n]=0),n},Kn.request=function(t){if(T.typeOf.object("request",t),T.typeOf.string("request.url",t.url),T.typeOf.func("request.requestFunction",t.requestFunction),jn(t.url)||Cn(t.url))return Qn.raiseEvent(),t.state=Un.RECEIVED,t.requestFunction();if(++Vn.numberOfAttemptedRequests,w(t.serverKey)||(t.serverKey=Kn.getServerKey(t.url)),Kn.throttleRequests&&t.throttleByServer&&!Kn.serverHasOpenSlots(t.serverKey))return;if(!Kn.throttleRequests||!t.throttle)return er(t);if($n.length>=Kn.maximumRequests)return;Jn(t);const e=Hn.insert(t);if(w(e)){if(e===t)return;nr(e)}return tr(t)},Kn.clearForSpecs=function(){for(;Hn.length>0;)nr(Hn.pop());const t=$n.length;for(let e=0;e<t;++e)nr($n[e]);$n.length=0,Yn={},Vn.numberOfAttemptedRequests=0,Vn.numberOfActiveRequests=0,Vn.numberOfCancelledRequests=0,Vn.numberOfCancelledActiveRequests=0,Vn.numberOfFailedRequests=0,Vn.numberOfActiveRequestsEver=0,Vn.lastNumberOfActiveRequests=0},Kn.numberOfActiveRequestsByServer=function(t){return Yn[t]},Kn.requestHeap=Hn;const rr={};let or={};rr.add=function(t,e){if(!w(t))throw new b("host is required.");if(!w(e)||e<=0)throw new b("port is required to be greater than 0.");const n=`${t.toLowerCase()}:${e}`;w(or[n])||(or[n]=!0)},rr.remove=function(t,e){if(!w(t))throw new b("host is required.");if(!w(e)||e<=0)throw new b("port is required to be greater than 0.");const n=`${t.toLowerCase()}:${e}`;w(or[n])&&delete or[n]},rr.contains=function(t){if(!w(t))throw new b("url is required.");const e=function(t){const e=new Rn(t);e.normalize();let n=e.authority();if(0!==n.length){if(e.authority(n),-1!==n.indexOf("@")){const t=n.split("@");n=t[1]}if(-1===n.indexOf(":")){let t=e.scheme();if(0===t.length&&(t=window.location.protocol,t=t.substring(0,t.length-1)),"http"===t)n+=":80";else{if("https"!==t)return;n+=":443"}}return n}}(t);return!(!w(e)||!w(or[e]))},rr.clear=function(){or={}};const ir=function(){try{const t=new XMLHttpRequest;return t.open("GET","#",!0),t.responseType="blob","blob"===t.responseType}catch(dn){return!1}}();function ar(t){"string"==typeof(t=t??Z.EMPTY_OBJECT)&&(t={url:t}),T.typeOf.string("options.url",t.url),this._url=void 0,this._templateValues=sr(t.templateValues,{}),this._queryParameters=sr(t.queryParameters,{}),this.headers=sr(t.headers,{}),this.request=t.request??new Dn,this.proxy=t.proxy,this.retryCallback=t.retryCallback,this.retryAttempts=t.retryAttempts??0,this._retryCount=0,t.parseUrl??1?this.parseUrl(t.url,!0,!0):this._url=t.url,this._credits=t.credits}function sr(t,e){return w(t)?An(t):e}let ur;function cr(t,e,n){if(!n)return Sn(t,e);const r=An(t,!0);for(const o in e)if(e.hasOwnProperty(o)){let t=r[o];const n=e[o];w(t)?(Array.isArray(t)||(t=r[o]=[t]),r[o]=t.concat(n)):r[o]=Array.isArray(n)?n.slice():n}return r}function lr(t,e,n){const r={};r[e]=n,t.setQueryParameters(r);const o=t.request,i=t.url;o.url=i,o.requestFunction=function(){const t=xn();return window[n]=function(e){t.resolve(e);try{delete window[n]}catch(r){window[n]=void 0}},ar._Implementations.loadAndExecuteScript(i,n,t),t.promise};const a=Kn.request(o);if(w(a))return a.catch((function(r){return o.state!==Un.FAILED?Promise.reject(r):t.retryOnError(r).then((function(i){return i?(o.state=Un.UNISSUED,o.deferred=void 0,lr(t,e,n)):Promise.reject(r)}))}))}function fr(t){if(t.state===Un.ISSUED||t.state===Un.ACTIVE)throw new ft("The Resource is already being fetched.");t.state=Un.UNISSUED,t.deferred=void 0}ar.createIfNeeded=function(t){return t instanceof ar?t.getDerivedResource({request:t.request}):"string"!=typeof t?t:new ar({url:t})},ar.supportsImageBitmapOptions=function(){return w(ur)?ur:"function"!=typeof createImageBitmap?(ur=Promise.resolve(!1),ur):(ur=ar.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then((function(t){return Promise.all([createImageBitmap(t,{imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"}),createImageBitmap(t)])})).then((function(t){const e=Nn(t[0]),n=Nn(t[1]);return e[1]!==n[1]})).catch((function(){return!1})),ur)},Object.defineProperties(ar,{isBlobSupported:{get:function(){return ir}}}),Object.defineProperties(ar.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(t){this.parseUrl(t,!1,!1)}},extension:{get:function(){return function(t){if(!w(t))throw new b("uri is required.");const e=new Rn(t);e.normalize();let n=e.path(),r=n.lastIndexOf("/");return-1!==r&&(n=n.substr(r+1)),r=n.lastIndexOf("."),n=-1===r?"":n.substr(r+1),n}(this._url)}},isDataUri:{get:function(){return jn(this._url)}},isBlobUri:{get:function(){return Cn(this._url)}},isCrossOriginUrl:{get:function(){return function(t){w(vn)||(vn=document.createElement("a")),vn.href=window.location.href;const e=vn.host,n=vn.protocol;return vn.href=t,vn.href=vn.href,n!==vn.protocol||e!==vn.host}(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}}),ar.prototype.toString=function(){return this.getUrlComponent(!0,!0)},ar.prototype.parseUrl=function(t,e,n,r){let o=new Rn(t);const i=0===(a=o.query()).length?{}:-1===a.indexOf("=")?{[a]:void 0}:function(t){if(!w(t))throw new b("queryString is required.");const e={};if(""===t)return e;const n=t.replace(/\+/g,"%20").split(/[&;]/);for(let r=0,o=n.length;r<o;++r){const t=n[r].split("="),o=decodeURIComponent(t[0]);let i=t[1];i=w(i)?decodeURIComponent(i):"";const a=e[o];"string"==typeof a?e[o]=[a,i]:Array.isArray(a)?a.push(i):e[o]=i}return e}(a);var a;this._queryParameters=e?cr(i,this.queryParameters,n):i,o.search(""),o.fragment(""),w(r)&&""===o.scheme()&&(o=o.absoluteTo(Mn(r))),this._url=o.toString()},ar.prototype.getUrlComponent=function(t,e){if(this.isDataUri)return this._url;let n=this._url;t&&(n=`${n}${function(t){const e=Object.keys(t);return 0===e.length?"":1!==e.length||w(t[e[0]])?`?${function(t){if(!w(t))throw new b("obj is required.");let e="";for(const n in t)if(t.hasOwnProperty(n)){const r=t[n],o=`${encodeURIComponent(n)}=`;if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t)e+=`${o+encodeURIComponent(r[t])}&`;else e+=`${o+encodeURIComponent(r)}&`}return e=e.slice(0,-1),e}(t)}`:`?${e[0]}`}(this.queryParameters)}`),n=n.replace(/%7B/g,"{").replace(/%7D/g,"}");const r=this._templateValues;return Object.keys(r).length>0&&(n=n.replace(/{(.*?)}/g,(function(t,e){const n=r[e];return w(n)?encodeURIComponent(n):t}))),e&&w(this.proxy)&&(n=this.proxy.getURL(n)),n},ar.prototype.setQueryParameters=function(t,e){this._queryParameters=e?cr(this._queryParameters,t,!1):cr(t,this._queryParameters,!1)},ar.prototype.appendQueryParameters=function(t){this._queryParameters=cr(t,this._queryParameters,!0)},ar.prototype.setTemplateValues=function(t,e){this._templateValues=e?Sn(this._templateValues,t):Sn(t,this._templateValues)},ar.prototype.getDerivedResource=function(t){const e=this.clone();if(e._retryCount=0,w(t.url)){const n=t.preserveQueryParameters??!1;e.parseUrl(t.url,!0,n,this._url)}return w(t.queryParameters)&&(e._queryParameters=Sn(t.queryParameters,e.queryParameters)),w(t.templateValues)&&(e._templateValues=Sn(t.templateValues,e.templateValues)),w(t.headers)&&(e.headers=Sn(t.headers,e.headers)),w(t.proxy)&&(e.proxy=t.proxy),w(t.request)&&(e.request=t.request),w(t.retryCallback)&&(e.retryCallback=t.retryCallback),w(t.retryAttempts)&&(e.retryAttempts=t.retryAttempts),e},ar.prototype.retryOnError=function(t){const e=this.retryCallback;if("function"!=typeof e||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);const n=this;return Promise.resolve(e(this,t)).then((function(t){return++n._retryCount,t}))},ar.prototype.clone=function(t){return w(t)?(t._url=this._url,t._queryParameters=An(this._queryParameters),t._templateValues=An(this._templateValues),t.headers=An(this.headers),t.proxy=this.proxy,t.retryCallback=this.retryCallback,t.retryAttempts=this.retryAttempts,t._retryCount=0,t.request=this.request.clone(),t):new ar({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:w(this.credits)?this.credits.slice():void 0})},ar.prototype.getBaseUri=function(t){return function(t,e){if(!w(t))throw new b("uri is required.");let n="";const r=t.lastIndexOf("/");return-1!==r&&(n=t.substring(0,r+1)),e?(0!==(t=new Rn(t)).query().length&&(n+=`?${t.query()}`),0!==t.fragment().length&&(n+=`#${t.fragment()}`),n):n}(this.getUrlComponent(t),t)},ar.prototype.appendForwardSlash=function(){var t;this._url=(0!==(t=this._url).length&&"/"===t[t.length-1]||(t=`${t}/`),t)},ar.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},ar.fetchArrayBuffer=function(t){return new ar(t).fetchArrayBuffer()},ar.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},ar.fetchBlob=function(t){return new ar(t).fetchBlob()},ar.prototype.fetchImage=function(t){const e=(t=t??Z.EMPTY_OBJECT).preferImageBitmap??!1,n=t.preferBlob??!1,r=t.flipY??!1,o=t.skipColorSpaceConversion??!1;if(fr(this.request),!ir||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return this._fetchImage({resource:this,flipY:r,skipColorSpaceConversion:o,preferImageBitmap:e});const i=this.fetchBlob();if(!w(i))return;let a,s,u,c;return ar.supportsImageBitmapOptions().then((function(t){return a=t,s=a&&e,i})).then((function(t){if(!w(t))return;if(c=t,s)return ar.createImageBitmapFromBlob(t,{flipY:r,premultiplyAlpha:!1,skipColorSpaceConversion:o});const e=window.URL.createObjectURL(t);return u=new ar({url:e}),u._fetchImage({flipY:r,skipColorSpaceConversion:o,preferImageBitmap:!1})})).then((function(t){if(w(t))return t.blob=c,s||window.URL.revokeObjectURL(u.url),t})).catch((function(t){return w(u)&&window.URL.revokeObjectURL(u.url),t.blob=c,Promise.reject(t)}))},ar.prototype._fetchImage=function(t){const e=this,n=t.flipY,r=t.skipColorSpaceConversion,o=t.preferImageBitmap,i=e.request;i.url=e.url,i.requestFunction=function(){let t=!1;e.isDataUri||e.isBlobUri||(t=e.isCrossOriginUrl);const a=xn();return ar._Implementations.createImage(i,t,a,n,r,o),a.promise};const a=Kn.request(i);if(w(a))return a.catch((function(t){return i.state!==Un.FAILED?Promise.reject(t):e.retryOnError(t).then((function(a){return a?(i.state=Un.UNISSUED,i.deferred=void 0,e._fetchImage({flipY:n,skipColorSpaceConversion:r,preferImageBitmap:o})):Promise.reject(t)}))}))},ar.fetchImage=function(t){return new ar(t).fetchImage({flipY:t.flipY,skipColorSpaceConversion:t.skipColorSpaceConversion,preferBlob:t.preferBlob,preferImageBitmap:t.preferImageBitmap})},ar.prototype.fetchText=function(){return this.fetch({responseType:"text"})},ar.fetchText=function(t){return new ar(t).fetchText()},ar.prototype.fetchJson=function(){const t=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(w(t))return t.then((function(t){if(w(t))return JSON.parse(t)}))},ar.fetchJson=function(t){return new ar(t).fetchJson()},ar.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},ar.fetchXML=function(t){return new ar(t).fetchXML()},ar.prototype.fetchJsonp=function(t){let e;t=t??"callback",fr(this.request);do{e=`loadJsonp${P.nextRandomNumber().toString().substring(2,8)}`}while(w(window[e]));return lr(this,t,e)},ar.fetchJsonp=function(t){return new ar(t).fetchJsonp(t.callbackParameterName)},ar.prototype._makeRequest=function(t){const e=this;fr(e.request);const n=e.request,r=e.url;n.url=r,n.requestFunction=function(){const o=t.responseType,i=Sn(t.headers,e.headers),a=t.overrideMimeType,s=t.method,u=t.data,c=xn(),l=ar._Implementations.loadWithXhr(r,o,s,u,i,c,a);return w(l)&&w(l.abort)&&(n.cancelFunction=function(){l.abort()}),c.promise};const o=Kn.request(n);if(w(o))return o.then((function(t){return n.cancelFunction=void 0,t})).catch((function(r){return n.cancelFunction=void 0,n.state!==Un.FAILED?Promise.reject(r):e.retryOnError(r).then((function(o){return o?(n.state=Un.UNISSUED,n.deferred=void 0,e.fetch(t)):Promise.reject(r)}))}))};const hr=/^data:(.*?)(;base64)?,(.*)$/;function pr(t,e){const n=decodeURIComponent(e);return t?atob(n):n}function dr(t,e){const n=pr(t,e),r=new ArrayBuffer(n.length),o=new Uint8Array(r);for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);return r}ar.prototype.fetch=function(t){return(t=sr(t,{})).method="GET",this._makeRequest(t)},ar.fetch=function(t){return new ar(t).fetch({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ar.prototype.delete=function(t){return(t=sr(t,{})).method="DELETE",this._makeRequest(t)},ar.delete=function(t){return new ar(t).delete({responseType:t.responseType,overrideMimeType:t.overrideMimeType,data:t.data})},ar.prototype.head=function(t){return(t=sr(t,{})).method="HEAD",this._makeRequest(t)},ar.head=function(t){return new ar(t).head({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ar.prototype.options=function(t){return(t=sr(t,{})).method="OPTIONS",this._makeRequest(t)},ar.options=function(t){return new ar(t).options({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ar.prototype.post=function(t,e){return T.defined("data",t),(e=sr(e,{})).method="POST",e.data=t,this._makeRequest(e)},ar.post=function(t){return new ar(t).post(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ar.prototype.put=function(t,e){return T.defined("data",t),(e=sr(e,{})).method="PUT",e.data=t,this._makeRequest(e)},ar.put=function(t){return new ar(t).put(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ar.prototype.patch=function(t,e){return T.defined("data",t),(e=sr(e,{})).method="PATCH",e.data=t,this._makeRequest(e)},ar.patch=function(t){return new ar(t).patch(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ar._Implementations={},ar._Implementations.loadImageElement=function(t,e,n){const r=new Image;r.onload=function(){0===r.naturalWidth&&0===r.naturalHeight&&0===r.width&&0===r.height&&(r.width=300,r.height=150),n.resolve(r)},r.onerror=function(t){n.reject(t)},e&&(rr.contains(t)?r.crossOrigin="use-credentials":r.crossOrigin=""),r.src=t},ar._Implementations.createImage=function(t,e,n,r,o,i,a){const s=t.url;ar.supportsImageBitmapOptions().then((function(u){if(!u||!i)return void ar._Implementations.loadImageElement(s,e,n);const c=xn(),l=ar._Implementations.loadWithXhr(s,"blob","GET",void 0,a,c,void 0,void 0,void 0);return w(l)&&w(l.abort)&&(t.cancelFunction=function(){l.abort()}),c.promise.then((function(t){if(w(t))return ar.createImageBitmapFromBlob(t,{flipY:r,premultiplyAlpha:!1,skipColorSpaceConversion:o});n.reject(new ft(`Successfully retrieved ${s} but it contained no content.`))})).then((function(t){n.resolve(t)}))})).catch((function(t){n.reject(t)}))},ar.createImageBitmapFromBlob=function(t,e){return T.defined("options",e),T.typeOf.bool("options.flipY",e.flipY),T.typeOf.bool("options.premultiplyAlpha",e.premultiplyAlpha),T.typeOf.bool("options.skipColorSpaceConversion",e.skipColorSpaceConversion),createImageBitmap(t,{imageOrientation:e.flipY?"flipY":"none",premultiplyAlpha:e.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:e.skipColorSpaceConversion?"none":"default"})};const mr="undefined"==typeof XMLHttpRequest;function yr(t){t=t??Z.EMPTY_OBJECT,this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=t.addNewLeapSeconds??!0,w(t.data)?_r(this,t.data):_r(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function gr(t,e){return on.compare(t.julianDate,e)}function _r(t,e){if(!w(e.columnNames))throw new ft("Error in loaded EOP data: The columnNames property is required.");if(!w(e.samples))throw new ft("Error in loaded EOP data: The samples property is required.");const n=e.columnNames.indexOf("modifiedJulianDateUtc"),r=e.columnNames.indexOf("xPoleWanderRadians"),o=e.columnNames.indexOf("yPoleWanderRadians"),i=e.columnNames.indexOf("ut1MinusUtcSeconds"),a=e.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=e.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=e.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||o<0||i<0||a<0||s<0||u<0)throw new ft("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");const c=t._samples=e.samples,l=t._dates=[];let f;t._dateColumn=n,t._xPoleWanderRadiansColumn=r,t._yPoleWanderRadiansColumn=o,t._ut1MinusUtcSecondsColumn=i,t._xCelestialPoleOffsetRadiansColumn=a,t._yCelestialPoleOffsetRadiansColumn=s,t._taiMinusUtcSecondsColumn=u,t._columnCount=e.columnNames.length,t._lastIndex=void 0;const h=t._addNewLeapSeconds;for(let p=0,d=c.length;p<d;p+=t._columnCount){const t=c[p+n],e=c[p+u],r=new on(t+De.MODIFIED_JULIAN_DATE_DIFFERENCE,e,Le.TAI);if(l.push(r),h){if(e!==f&&w(f)){const t=on.leapSeconds,n=Ce(t,r,gr);if(n<0){const o=new ze(r,e);t.splice(~n,0,o)}}f=e}}}function Or(t,e,n,r,o){const i=n*r;o.xPoleWander=e[i+t._xPoleWanderRadiansColumn],o.yPoleWander=e[i+t._yPoleWanderRadiansColumn],o.xPoleOffset=e[i+t._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=e[i+t._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=e[i+t._ut1MinusUtcSecondsColumn]}function Er(t,e,n){return e+t*(n-e)}function wr(t,e,n,r,o,i,a){const s=t._columnCount;if(i>e.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;const u=e[o],c=e[i];if(u.equals(c)||r.equals(u))return Or(t,n,o,s,a),a;if(r.equals(c))return Or(t,n,i,s,a),a;const l=on.secondsDifference(r,u)/on.secondsDifference(c,u),f=o*s,h=i*s;let p=n[f+t._ut1MinusUtcSecondsColumn],d=n[h+t._ut1MinusUtcSecondsColumn];const m=d-p;if(m>.5||m<-.5){const e=n[f+t._taiMinusUtcSecondsColumn],o=n[h+t._taiMinusUtcSecondsColumn];e!==o&&(c.equals(r)?p=d:d-=o-e)}return a.xPoleWander=Er(l,n[f+t._xPoleWanderRadiansColumn],n[h+t._xPoleWanderRadiansColumn]),a.yPoleWander=Er(l,n[f+t._yPoleWanderRadiansColumn],n[h+t._yPoleWanderRadiansColumn]),a.xPoleOffset=Er(l,n[f+t._xCelestialPoleOffsetRadiansColumn],n[h+t._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=Er(l,n[f+t._yCelestialPoleOffsetRadiansColumn],n[h+t._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=Er(l,p,d),a}function br(t,e,n){this.heading=t??0,this.pitch=e??0,this.roll=n??0}ar._Implementations.loadWithXhr=function(t,e,n,r,o,i,a){const s=hr.exec(t);if(null!==s)return void i.resolve(function(t,e){e=e??"";const n=t[1],r=!!t[2],o=t[3];let i,a;switch(e){case"":case"text":return pr(r,o);case"arraybuffer":return dr(r,o);case"blob":return i=dr(r,o),new Blob([i],{type:n});case"document":return a=new DOMParser,a.parseFromString(pr(r,o),n);case"json":return JSON.parse(pr(r,o));default:throw new b(`Unhandled responseType: ${e}`)}}(s,e));if(mr)return u=e,c=i,void fetch(t,{method:n,headers:o}).then((async t=>{if(!t.ok){const e={};return t.headers.forEach(((t,n)=>{e[n]=t})),void c.reject(new Ln(t.status,t,e))}switch(u){case"text":c.resolve(t.text());break;case"json":c.resolve(t.json());break;default:c.resolve(new Uint8Array(await t.arrayBuffer()).buffer)}})).catch((()=>{c.reject(new Ln)}));var u,c;const l=new XMLHttpRequest;if(rr.contains(t)&&(l.withCredentials=!0),l.open(n,t,!0),w(a)&&w(l.overrideMimeType)&&l.overrideMimeType(a),w(o))for(const h in o)o.hasOwnProperty(h)&&l.setRequestHeader(h,o[h]);w(e)&&(l.responseType=e);let f=!1;return"string"==typeof t&&(f=0===t.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),l.onload=function(){if((l.status<200||l.status>=300)&&(!f||0!==l.status))return void i.reject(new Ln(l.status,l.response,l.getAllResponseHeaders()));const t=l.response,r=l.responseType;if("HEAD"===n||"OPTIONS"===n){const t=l.getAllResponseHeaders().trim().split(/[\r\n]+/),e={};return t.forEach((function(t){const n=t.split(": "),r=n.shift();e[r]=n.join(": ")})),void i.resolve(e)}if(204===l.status)i.resolve(void 0);else if(!w(t)||w(e)&&r!==e)if("json"===e&&"string"==typeof t)try{i.resolve(JSON.parse(t))}catch(o){i.reject(o)}else(""===r||"document"===r)&&w(l.responseXML)&&l.responseXML.hasChildNodes()?i.resolve(l.responseXML):""!==r&&"text"!==r||!w(l.responseText)?i.reject(new ft("Invalid XMLHttpRequest response type.")):i.resolve(l.responseText);else i.resolve(t)},l.onerror=function(t){i.reject(new Ln)},l.send(r),l},ar._Implementations.loadAndExecuteScript=function(t,e,n){return function(t){const e=document.createElement("script");return e.async=!0,e.src=t,new Promise(((t,n)=>{window.crossOriginIsolated&&e.setAttribute("crossorigin","anonymous");const r=document.getElementsByTagName("head")[0];e.onload=function(){e.onload=void 0,r.removeChild(e),t()},e.onerror=function(t){n(t)},r.appendChild(e)}))}(t).catch((function(t){n.reject(t)}))},ar._DefaultImplementations={},ar._DefaultImplementations.createImage=ar._Implementations.createImage,ar._DefaultImplementations.loadWithXhr=ar._Implementations.loadWithXhr,ar._DefaultImplementations.loadAndExecuteScript=ar._Implementations.loadAndExecuteScript,ar.DEFAULT=Object.freeze(new ar({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),yr.fromUrl=async function(t,e){T.defined("url",t),e=e??Z.EMPTY_OBJECT;const n=ar.createIfNeeded(t);let r;try{r=await n.fetchJson()}catch(o){throw new ft(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new yr({addNewLeapSeconds:e.addNewLeapSeconds,data:r})},yr.NONE=Object.freeze({compute:function(t,e){return w(e)?(e.xPoleWander=0,e.yPoleWander=0,e.xPoleOffset=0,e.yPoleOffset=0,e.ut1MinusUtc=0):e=new ve(0,0,0,0,0),e}}),yr.prototype.compute=function(t,e){if(!w(this._samples))return;if(w(e)||(e=new ve(0,0,0,0,0)),0===this._samples.length)return e.xPoleWander=0,e.yPoleWander=0,e.xPoleOffset=0,e.yPoleOffset=0,e.ut1MinusUtc=0,e;const n=this._dates,r=this._lastIndex;let o=0,i=0;if(w(r)){const a=n[r],s=n[r+1],u=on.lessThanOrEquals(a,t),c=!w(s),l=c||on.greaterThanOrEquals(s,t);if(u&&l)return o=r,!c&&s.equals(t)&&++o,i=o+1,wr(this,n,this._samples,t,o,i,e),e}let a=Ce(n,t,on.compare,this._dateColumn);return a>=0?(a<n.length-1&&n[a+1].equals(t)&&++a,o=a,i=a):(i=~a,o=i-1,o<0&&(o=0)),this._lastIndex=o,wr(this,n,this._samples,t,o,i,e),e},br.fromQuaternion=function(t,e){if(!w(t))throw new b("quaternion is required");w(e)||(e=new br);const n=2*(t.w*t.y-t.z*t.x),r=1-2*(t.x*t.x+t.y*t.y),o=2*(t.w*t.x+t.y*t.z),i=1-2*(t.y*t.y+t.z*t.z),a=2*(t.w*t.z+t.x*t.y);return e.heading=-Math.atan2(a,i),e.roll=Math.atan2(o,r),e.pitch=-P.asinClamped(n),e},br.fromDegrees=function(t,e,n,r){if(!w(t))throw new b("heading is required");if(!w(e))throw new b("pitch is required");if(!w(n))throw new b("roll is required");return w(r)||(r=new br),r.heading=t*P.RADIANS_PER_DEGREE,r.pitch=e*P.RADIANS_PER_DEGREE,r.roll=n*P.RADIANS_PER_DEGREE,r},br.clone=function(t,e){if(w(t))return w(e)?(e.heading=t.heading,e.pitch=t.pitch,e.roll=t.roll,e):new br(t.heading,t.pitch,t.roll)},br.equals=function(t,e){return t===e||w(t)&&w(e)&&t.heading===e.heading&&t.pitch===e.pitch&&t.roll===e.roll},br.equalsEpsilon=function(t,e,n,r){return t===e||w(t)&&w(e)&&P.equalsEpsilon(t.heading,e.heading,n,r)&&P.equalsEpsilon(t.pitch,e.pitch,n,r)&&P.equalsEpsilon(t.roll,e.roll,n,r)},br.prototype.clone=function(t){return br.clone(this,t)},br.prototype.equals=function(t){return br.equals(this,t)},br.prototype.equalsEpsilon=function(t,e,n){return br.equalsEpsilon(this,t,e,n)},br.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};const Tr=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;let Rr,Ar,Sr;function xr(t){return"undefined"==typeof document?t:(w(Rr)||(Rr=document.createElement("a")),Rr.href=t,Rr.href)}function Mr(){if(w(Ar))return Ar;let t;if(t="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:w(import.meta?.url)?Mn(".",import.meta.url):"object"==typeof define&&w(define.amd)&&!define.amd.toUrlUndefined&&w(require.toUrl)?Mn("..",Pr("Core/buildModuleUrl.js")):function(){const t=document.getElementsByTagName("script");for(let e=0,n=t.length;e<n;++e){const n=t[e].getAttribute("src"),r=Tr.exec(n);if(null!==r)return r[1]}}(),!w(t))throw new b("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return Ar=new ar({url:xr(t)}),Ar.appendForwardSlash(),Ar}function Ir(t){return xr(require.toUrl(`../${t}`))}function Nr(t){return Mr().getDerivedResource({url:t}).url}function Pr(t){return w(Sr)||(Sr="object"==typeof define&&w(define.amd)&&!define.amd.toUrlUndefined&&w(require.toUrl)?Ir:Nr),Sr(t)}function Cr(t,e,n){this.x=t,this.y=e,this.s=n}function vr(t){t=t??Z.EMPTY_OBJECT,this._xysFileUrlTemplate=ar.createIfNeeded(t.xysFileUrlTemplate),this._interpolationOrder=t.interpolationOrder??9,this._sampleZeroJulianEphemerisDate=t.sampleZeroJulianEphemerisDate??2442396.5,this._sampleZeroDateTT=new on(this._sampleZeroJulianEphemerisDate,0,Le.TAI),this._stepSizeDays=t.stepSizeDays??1,this._samplesPerXysFile=t.samplesPerXysFile??1e3,this._totalSamples=t.totalSamples??27426,this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];const e=this._interpolationOrder,n=this._denominators=new Array(e+1),r=this._xTable=new Array(e+1),o=Math.pow(this._stepSizeDays,e);for(let i=0;i<=e;++i){n[i]=o,r[i]=i*this._stepSizeDays;for(let t=0;t<=e;++t)t!==i&&(n[i]*=i-t);n[i]=1/n[i]}this._work=new Array(e+1),this._coef=new Array(e+1)}Pr._cesiumScriptRegex=Tr,Pr._buildModuleUrlFromBaseUrl=Nr,Pr._clearBaseResource=function(){Ar=void 0},Pr.setBaseUrl=function(t){Ar=ar.DEFAULT.getDerivedResource({url:t})},Pr.getCesiumBaseUrl=Mr;const qr=new on(0,0,Le.TAI);function jr(t,e,n){const r=qr;return r.dayNumber=e,r.secondsOfDay=n,on.daysDifference(r,t._sampleZeroDateTT)}function Ur(t,e){if(t._chunkDownloadsInProgress[e])return t._chunkDownloadsInProgress[e];let n;const r=t._xysFileUrlTemplate;n=w(r)?r.getDerivedResource({templateValues:{0:e}}):new ar({url:Pr(`Assets/IAU2006_XYS/IAU2006_XYS_${e}.json`)});const o=n.fetchJson().then((function(n){t._chunkDownloadsInProgress[e]=!1;const r=t._samples,o=n.samples,i=e*t._samplesPerXysFile*3;for(let t=0,e=o.length;t<e;++t)r[i+t]=o[t]}));return t._chunkDownloadsInProgress[e]=o,o}function zr(t,e,n,r){this.x=t??0,this.y=e??0,this.z=n??0,this.w=r??0}vr.prototype.preload=function(t,e,n,r){const o=jr(this,t,e),i=jr(this,n,r);let a=o/this._stepSizeDays-this._interpolationOrder/2|0;a<0&&(a=0);let s=i/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);const u=a/this._samplesPerXysFile|0,c=s/this._samplesPerXysFile|0,l=[];for(let f=u;f<=c;++f)l.push(Ur(this,f));return Promise.all(l)},vr.prototype.computeXysRadians=function(t,e,n){const r=jr(this,t,e);if(r<0)return;const o=r/this._stepSizeDays|0;if(o>=this._totalSamples)return;const i=this._interpolationOrder;let a=o-(i/2|0);a<0&&(a=0);let s=a+i;s>=this._totalSamples&&(s=this._totalSamples-1,a=s-i,a<0&&(a=0));let u=!1;const c=this._samples;if(w(c[3*a])||(Ur(this,a/this._samplesPerXysFile|0),u=!0),w(c[3*s])||(Ur(this,s/this._samplesPerXysFile|0),u=!0),u)return;w(n)?(n.x=0,n.y=0,n.s=0):n=new Cr(0,0,0);const l=r-a*this._stepSizeDays,f=this._work,h=this._denominators,p=this._coef,d=this._xTable;let m,y;for(m=0;m<=i;++m)f[m]=l-d[m];for(m=0;m<=i;++m){for(p[m]=1,y=0;y<=i;++y)y!==m&&(p[m]*=f[y]);p[m]*=h[m];let t=3*(a+m);n.x+=p[m]*c[t++],n.y+=p[m]*c[t++],n.s+=p[m]*c[t]}return n};let Dr=new q;zr.fromAxisAngle=function(t,e,n){T.typeOf.object("axis",t),T.typeOf.number("angle",e);const r=e/2,o=Math.sin(r);Dr=q.normalize(t,Dr);const i=Dr.x*o,a=Dr.y*o,s=Dr.z*o,u=Math.cos(r);return w(n)?(n.x=i,n.y=a,n.z=s,n.w=u,n):new zr(i,a,s,u)};const Lr=[1,2,0],Fr=new Array(3);zr.fromRotationMatrix=function(t,e){let n,r,o,i,a;T.typeOf.object("matrix",t);const s=t[Q.COLUMN0ROW0],u=t[Q.COLUMN1ROW1],c=t[Q.COLUMN2ROW2],l=s+u+c;if(l>0)n=Math.sqrt(l+1),a=.5*n,n=.5/n,r=(t[Q.COLUMN1ROW2]-t[Q.COLUMN2ROW1])*n,o=(t[Q.COLUMN2ROW0]-t[Q.COLUMN0ROW2])*n,i=(t[Q.COLUMN0ROW1]-t[Q.COLUMN1ROW0])*n;else{const e=Lr;let l=0;u>s&&(l=1),c>s&&c>u&&(l=2);const f=e[l],h=e[f];n=Math.sqrt(t[Q.getElementIndex(l,l)]-t[Q.getElementIndex(f,f)]-t[Q.getElementIndex(h,h)]+1);const p=Fr;p[l]=.5*n,n=.5/n,a=(t[Q.getElementIndex(h,f)]-t[Q.getElementIndex(f,h)])*n,p[f]=(t[Q.getElementIndex(f,l)]+t[Q.getElementIndex(l,f)])*n,p[h]=(t[Q.getElementIndex(h,l)]+t[Q.getElementIndex(l,h)])*n,r=-p[0],o=-p[1],i=-p[2]}return w(e)?(e.x=r,e.y=o,e.z=i,e.w=a,e):new zr(r,o,i,a)};const Br=new zr;let kr=new zr,Wr=new zr,Gr=new zr;zr.fromHeadingPitchRoll=function(t,e){return T.typeOf.object("headingPitchRoll",t),Gr=zr.fromAxisAngle(q.UNIT_X,t.roll,Br),Wr=zr.fromAxisAngle(q.UNIT_Y,-t.pitch,e),e=zr.multiply(Wr,Gr,Wr),kr=zr.fromAxisAngle(q.UNIT_Z,-t.heading,Br),zr.multiply(kr,e,e)};const Vr=new q,Xr=new q,Hr=new zr,$r=new zr,Yr=new zr;zr.packedLength=4,zr.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n++]=t.z,e[n]=t.w,e},zr.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new zr),n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3],n},zr.packedInterpolationLength=3,zr.convertPackedArrayForInterpolation=function(t,e,n,r){zr.unpack(t,4*n,Yr),zr.conjugate(Yr,Yr);for(let o=0,i=n-e+1;o<i;o++){const n=3*o;zr.unpack(t,4*(e+o),Hr),zr.multiply(Hr,Yr,Hr),Hr.w<0&&zr.negate(Hr,Hr),zr.computeAxis(Hr,Vr);const i=zr.computeAngle(Hr);w(r)||(r=[]),r[n]=Vr.x*i,r[n+1]=Vr.y*i,r[n+2]=Vr.z*i}},zr.unpackInterpolationResult=function(t,e,n,r,o){w(o)||(o=new zr),q.fromArray(t,0,Xr);const i=q.magnitude(Xr);return zr.unpack(e,4*r,$r),0===i?zr.clone(zr.IDENTITY,Hr):zr.fromAxisAngle(Xr,i,Hr),zr.multiply(Hr,$r,o)},zr.clone=function(t,e){if(w(t))return w(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e):new zr(t.x,t.y,t.z,t.w)},zr.conjugate=function(t,e){return T.typeOf.object("quaternion",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=t.w,e},zr.magnitudeSquared=function(t){return T.typeOf.object("quaternion",t),t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},zr.magnitude=function(t){return Math.sqrt(zr.magnitudeSquared(t))},zr.normalize=function(t,e){T.typeOf.object("result",e);const n=1/zr.magnitude(t),r=t.x*n,o=t.y*n,i=t.z*n,a=t.w*n;return e.x=r,e.y=o,e.z=i,e.w=a,e},zr.inverse=function(t,e){T.typeOf.object("result",e);const n=zr.magnitudeSquared(t);return e=zr.conjugate(t,e),zr.multiplyByScalar(e,1/n,e)},zr.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n},zr.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n.w=t.w-e.w,n},zr.negate=function(t,e){return T.typeOf.object("quaternion",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e},zr.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},zr.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t.x,o=t.y,i=t.z,a=t.w,s=e.x,u=e.y,c=e.z,l=e.w,f=a*s+r*l+o*c-i*u,h=a*u-r*c+o*l+i*s,p=a*c+r*u-o*s+i*l,d=a*l-r*s-o*u-i*c;return n.x=f,n.y=h,n.z=p,n.w=d,n},zr.multiplyByScalar=function(t,e,n){return T.typeOf.object("quaternion",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n.w=t.w*e,n},zr.divideByScalar=function(t,e,n){return T.typeOf.object("quaternion",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n.w=t.w/e,n},zr.computeAxis=function(t,e){T.typeOf.object("quaternion",t),T.typeOf.object("result",e);const n=t.w;if(Math.abs(n-1)<P.EPSILON6||Math.abs(n+1)<P.EPSILON6)return e.x=1,e.y=e.z=0,e;const r=1/Math.sqrt(1-n*n);return e.x=t.x*r,e.y=t.y*r,e.z=t.z*r,e},zr.computeAngle=function(t){return T.typeOf.object("quaternion",t),Math.abs(t.w-1)<P.EPSILON6?0:2*Math.acos(t.w)};let Zr=new zr;zr.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),Zr=zr.multiplyByScalar(e,n,Zr),r=zr.multiplyByScalar(t,1-n,r),zr.add(Zr,r,r)};let Qr=new zr,Kr=new zr,Jr=new zr;zr.slerp=function(t,e,n,r){T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r);let o=zr.dot(t,e),i=e;if(o<0&&(o=-o,i=Qr=zr.negate(e,Qr)),1-o<P.EPSILON6)return zr.lerp(t,i,n,r);const a=Math.acos(o);return Kr=zr.multiplyByScalar(t,Math.sin((1-n)*a),Kr),Jr=zr.multiplyByScalar(i,Math.sin(n*a),Jr),r=zr.add(Kr,Jr,r),zr.multiplyByScalar(r,1/Math.sin(a),r)},zr.log=function(t,e){T.typeOf.object("quaternion",t),T.typeOf.object("result",e);const n=P.acosClamped(t.w);let r=0;return 0!==n&&(r=n/Math.sin(n)),q.multiplyByScalar(t,r,e)},zr.exp=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=q.magnitude(t);let r=0;return 0!==n&&(r=Math.sin(n)/n),e.x=t.x*r,e.y=t.y*r,e.z=t.z*r,e.w=Math.cos(n),e};const to=new q,eo=new q,no=new zr,ro=new zr;zr.computeInnerQuadrangle=function(t,e,n,r){T.typeOf.object("q0",t),T.typeOf.object("q1",e),T.typeOf.object("q2",n),T.typeOf.object("result",r);const o=zr.conjugate(e,no);zr.multiply(o,n,ro);const i=zr.log(ro,to);zr.multiply(o,t,ro);const a=zr.log(ro,eo);return q.add(i,a,i),q.multiplyByScalar(i,.25,i),q.negate(i,i),zr.exp(i,no),zr.multiply(e,no,r)},zr.squad=function(t,e,n,r,o,i){T.typeOf.object("q0",t),T.typeOf.object("q1",e),T.typeOf.object("s0",n),T.typeOf.object("s1",r),T.typeOf.number("t",o),T.typeOf.object("result",i);const a=zr.slerp(t,e,o,no),s=zr.slerp(n,r,o,ro);return zr.slerp(a,s,2*o*(1-o),i)};const oo=new zr,io=1.9011074535173003,ao=ie.supportsTypedArrays()?new Float32Array(8):[],so=ie.supportsTypedArrays()?new Float32Array(8):[],uo=ie.supportsTypedArrays()?new Float32Array(8):[],co=ie.supportsTypedArrays()?new Float32Array(8):[];for(let sc=0;sc<7;++sc){const t=sc+1,e=2*t+1;ao[sc]=1/(t*e),so[sc]=t/e}ao[7]=io/136,so[7]=8*io/17,zr.fastSlerp=function(t,e,n,r){T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r);let o,i=zr.dot(t,e);i>=0?o=1:(o=-1,i=-i);const a=i-1,s=1-n,u=n*n,c=s*s;for(let p=7;p>=0;--p)uo[p]=(ao[p]*u-so[p])*a,co[p]=(ao[p]*c-so[p])*a;const l=o*n*(1+uo[0]*(1+uo[1]*(1+uo[2]*(1+uo[3]*(1+uo[4]*(1+uo[5]*(1+uo[6]*(1+uo[7])))))))),f=s*(1+co[0]*(1+co[1]*(1+co[2]*(1+co[3]*(1+co[4]*(1+co[5]*(1+co[6]*(1+co[7])))))))),h=zr.multiplyByScalar(t,f,oo);return zr.multiplyByScalar(e,l,r),zr.add(h,r,r)},zr.fastSquad=function(t,e,n,r,o,i){T.typeOf.object("q0",t),T.typeOf.object("q1",e),T.typeOf.object("s0",n),T.typeOf.object("s1",r),T.typeOf.number("t",o),T.typeOf.object("result",i);const a=zr.fastSlerp(t,e,o,no),s=zr.fastSlerp(n,r,o,ro);return zr.fastSlerp(a,s,2*o*(1-o),i)},zr.equals=function(t,e){return t===e||w(t)&&w(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},zr.equalsEpsilon=function(t,e,n){return n=n??0,t===e||w(t)&&w(e)&&Math.abs(t.x-e.x)<=n&&Math.abs(t.y-e.y)<=n&&Math.abs(t.z-e.z)<=n&&Math.abs(t.w-e.w)<=n},zr.ZERO=Object.freeze(new zr(0,0,0,0)),zr.IDENTITY=Object.freeze(new zr(0,0,0,1)),zr.prototype.clone=function(t){return zr.clone(this,t)},zr.prototype.equals=function(t){return zr.equals(this,t)},zr.prototype.equalsEpsilon=function(t,e){return zr.equalsEpsilon(this,t,e)},zr.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const lo={},fo={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},ho={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},po={},mo={east:new q,north:new q,up:new q,west:new q,south:new q,down:new q};let yo=new q,go=new q,_o=new q;lo.localFrameToFixedFrameGenerator=function(t,e){if(!fo.hasOwnProperty(t)||!fo[t].hasOwnProperty(e))throw new b("firstAxis and secondAxis must be east, north, up, west, south or down.");const n=fo[t][e];let r;const o=t+e;return w(po[o])?r=po[o]:(r=function(r,o,i){if(!w(r))throw new b("origin is required.");if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))throw new b("origin has a NaN component");if(w(i)||(i=new ht),q.equalsEpsilon(r,q.ZERO,P.EPSILON14))q.unpack(ho[t],0,yo),q.unpack(ho[e],0,go),q.unpack(ho[n],0,_o);else if(P.equalsEpsilon(r.x,0,P.EPSILON14)&&P.equalsEpsilon(r.y,0,P.EPSILON14)){const o=P.sign(r.z);q.unpack(ho[t],0,yo),"east"!==t&&"west"!==t&&q.multiplyByScalar(yo,o,yo),q.unpack(ho[e],0,go),"east"!==e&&"west"!==e&&q.multiplyByScalar(go,o,go),q.unpack(ho[n],0,_o),"east"!==n&&"west"!==n&&q.multiplyByScalar(_o,o,_o)}else{(o=o??Ee.default).geodeticSurfaceNormal(r,mo.up);const i=mo.up,a=mo.east;a.x=-r.y,a.y=r.x,a.z=0,q.normalize(a,mo.east),q.cross(i,a,mo.north),q.multiplyByScalar(mo.up,-1,mo.down),q.multiplyByScalar(mo.east,-1,mo.west),q.multiplyByScalar(mo.north,-1,mo.south),yo=mo[t],go=mo[e],_o=mo[n]}return i[0]=yo.x,i[1]=yo.y,i[2]=yo.z,i[3]=0,i[4]=go.x,i[5]=go.y,i[6]=go.z,i[7]=0,i[8]=_o.x,i[9]=_o.y,i[10]=_o.z,i[11]=0,i[12]=r.x,i[13]=r.y,i[14]=r.z,i[15]=1,i},po[o]=r),r},lo.eastNorthUpToFixedFrame=lo.localFrameToFixedFrameGenerator("east","north"),lo.northEastDownToFixedFrame=lo.localFrameToFixedFrameGenerator("north","east"),lo.northUpEastToFixedFrame=lo.localFrameToFixedFrameGenerator("north","up"),lo.northWestUpToFixedFrame=lo.localFrameToFixedFrameGenerator("north","west");const Oo=new zr,Eo=new q(1,1,1),wo=new ht;lo.headingPitchRollToFixedFrame=function(t,e,n,r,o){T.typeOf.object("HeadingPitchRoll",e),r=r??lo.eastNorthUpToFixedFrame;const i=zr.fromHeadingPitchRoll(e,Oo),a=ht.fromTranslationQuaternionRotationScale(q.ZERO,i,Eo,wo);return o=r(t,n,o),ht.multiply(o,a,o)};const bo=new ht,To=new Q;lo.headingPitchRollQuaternion=function(t,e,n,r,o){T.typeOf.object("HeadingPitchRoll",e);const i=lo.headingPitchRollToFixedFrame(t,e,n,r,bo),a=ht.getMatrix3(i,To);return zr.fromRotationMatrix(a,o)};const Ro=new q(1,1,1),Ao=new q,So=new ht,xo=new ht,Mo=new Q,Io=new zr;lo.fixedFrameToHeadingPitchRoll=function(t,e,n,r){T.defined("transform",t),e=e??Ee.default,n=n??lo.eastNorthUpToFixedFrame,w(r)||(r=new br);const o=ht.getTranslation(t,Ao);if(q.equals(o,q.ZERO))return r.heading=0,r.pitch=0,r.roll=0,r;let i=ht.inverseTransformation(n(o,e,So),So),a=ht.setScale(t,Ro,xo);a=ht.setTranslation(a,q.ZERO,a),i=ht.multiply(i,a,i);let s=zr.fromRotationMatrix(ht.getMatrix3(i,Mo),Io);return s=zr.normalize(s,s),br.fromQuaternion(s,r)};const No=P.TWO_PI/86400;let Po=new on;lo.computeIcrfToCentralBodyFixedMatrix=function(t,e){let n=lo.computeIcrfToFixedMatrix(t,e);return w(n)||(n=lo.computeTemeToPseudoFixedMatrix(t,e)),n},lo.computeTemeToPseudoFixedMatrix=function(t,e){if(!w(t))throw new b("date is required.");Po=on.addSeconds(t,-on.computeTaiMinusUtc(t),Po);const n=Po.dayNumber,r=Po.secondsOfDay;let o;const i=n-2451545;o=r>=43200?(i+.5)/De.DAYS_PER_JULIAN_CENTURY:(i-.5)/De.DAYS_PER_JULIAN_CENTURY;const a=(24110.54841+o*(8640184.812866+o*(.093104+-62e-7*o)))*No%P.TWO_PI+(72921158553e-15+11772758384668e-32*(n-2451545.5))*((r+.5*De.SECONDS_PER_DAY)%De.SECONDS_PER_DAY),s=Math.cos(a),u=Math.sin(a);return w(e)?(e[0]=s,e[1]=-u,e[2]=0,e[3]=u,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e):new Q(s,u,0,-u,s,0,0,0,1)},lo.iau2006XysData=new vr,lo.earthOrientationParameters=yr.NONE;const Co=32.184;lo.preloadIcrfFixed=function(t){const e=t.start.dayNumber,n=t.start.secondsOfDay+Co,r=t.stop.dayNumber,o=t.stop.secondsOfDay+Co;return lo.iau2006XysData.preload(e,n,r,o)},lo.computeIcrfToFixedMatrix=function(t,e){if(!w(t))throw new b("date is required.");w(e)||(e=new Q);const n=lo.computeFixedToIcrfMatrix(t,e);if(w(n))return Q.transpose(n,e)};const vo=new br,qo=new Q,jo=new on;lo.computeMoonFixedToIcrfMatrix=function(t,e){if(!w(t))throw new b("date is required.");const n=on.addSeconds(t,32.184,jo),r=on.totalDays(n)-2451545,o=P.toRadians(12.112)-P.toRadians(.052992)*r,i=P.toRadians(24.224)-P.toRadians(.105984)*r,a=P.toRadians(227.645)+P.toRadians(13.012)*r,s=P.toRadians(261.105)+P.toRadians(13.340716)*r,u=P.toRadians(358)+P.toRadians(.9856)*r;return vo.pitch=P.toRadians(180)-P.toRadians(3.878)*Math.sin(o)-P.toRadians(.12)*Math.sin(i)+P.toRadians(.07)*Math.sin(a)-P.toRadians(.017)*Math.sin(s),vo.roll=P.toRadians(-23.47)+P.toRadians(1.543)*Math.cos(o)+P.toRadians(.24)*Math.cos(i)-P.toRadians(.028)*Math.cos(a)+P.toRadians(.007)*Math.cos(s),vo.heading=P.toRadians(154.375)+P.toRadians(13.17635831)*r+P.toRadians(3.558)*Math.sin(o)+P.toRadians(.121)*Math.sin(i)-P.toRadians(.064)*Math.sin(a)+P.toRadians(.016)*Math.sin(s)+P.toRadians(.025)*Math.sin(u),Q.fromHeadingPitchRoll(vo,qo)},lo.computeIcrfToMoonFixedMatrix=function(t,e){if(!w(t))throw new b("date is required.");w(e)||(e=new Q);const n=lo.computeMoonFixedToIcrfMatrix(t,e);if(w(n))return Q.transpose(n,e)};const Uo=new Cr(0,0,0),zo=new ve(0,0,0,0,0),Do=new Q,Lo=new Q;lo.computeFixedToIcrfMatrix=function(t,e){if(!w(t))throw new b("date is required.");w(e)||(e=new Q);const n=lo.earthOrientationParameters.compute(t,zo);if(!w(n))return;const r=t.dayNumber,o=t.secondsOfDay+Co,i=lo.iau2006XysData.computeXysRadians(r,o,Uo);if(!w(i))return;const a=i.x+n.xPoleOffset,s=i.y+n.yPoleOffset,u=1/(1+Math.sqrt(1-a*a-s*s)),c=Do;c[0]=1-u*a*a,c[3]=-u*a*s,c[6]=a,c[1]=-u*a*s,c[4]=1-u*s*s,c[7]=s,c[2]=-a,c[5]=-s,c[8]=1-u*(a*a+s*s);const l=Q.fromRotationZ(-i.s,Lo),f=Q.multiply(c,l,Do),h=t.dayNumber-2451545,p=(t.secondsOfDay-on.computeTaiMinusUtc(t)+n.ut1MinusUtc)/De.SECONDS_PER_DAY;let d=.779057273264+p+.00273781191135448*(h+p);d=d%1*P.TWO_PI;const m=Q.fromRotationZ(d,Lo),y=Q.multiply(f,m,Do),g=Math.cos(n.xPoleWander),_=Math.cos(n.yPoleWander),O=Math.sin(n.xPoleWander),E=Math.sin(n.yPoleWander);let T=r-2451545+o/De.SECONDS_PER_DAY;T/=36525;const R=-47e-6*T*P.RADIANS_PER_DEGREE/3600,A=Math.cos(R),S=Math.sin(R),x=Lo;return x[0]=g*A,x[1]=g*S,x[2]=O,x[3]=-_*S+E*O*A,x[4]=_*A+E*O*S,x[5]=-E*g,x[6]=-E*S-_*O*A,x[7]=E*A-_*O*S,x[8]=_*g,Q.multiply(y,x,e)};const Fo=new k;lo.pointToWindowCoordinates=function(t,e,n,r){return(r=lo.pointToGLWindowCoordinates(t,e,n,r)).y=2*e[5]-r.y,r},lo.pointToGLWindowCoordinates=function(t,e,n,r){if(!w(t))throw new b("modelViewProjectionMatrix is required.");if(!w(e))throw new b("viewportTransformation is required.");if(!w(n))throw new b("point is required.");w(r)||(r=new ae);const o=Fo;return ht.multiplyByVector(t,k.fromElements(n.x,n.y,n.z,1,o),o),k.multiplyByScalar(o,1/o.w,o),ht.multiplyByVector(e,o,o),ae.fromCartesian4(o,r)};const Bo=new q,ko=new q,Wo=new q;lo.rotationMatrixFromPositionVelocity=function(t,e,n,r){if(!w(t))throw new b("position is required.");if(!w(e))throw new b("velocity is required.");const o=(n??Ee.default).geodeticSurfaceNormal(t,Bo);let i=q.cross(e,o,ko);q.equalsEpsilon(i,q.ZERO,P.EPSILON6)&&(i=q.clone(q.UNIT_X,i));const a=q.cross(i,e,Wo);return q.normalize(a,a),q.cross(e,a,i),q.negate(i,i),q.normalize(i,i),w(r)||(r=new Q),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=i.x,r[4]=i.y,r[5]=i.z,r[6]=a.x,r[7]=a.y,r[8]=a.z,r},lo.SWIZZLE_3D_TO_2D_MATRIX=Object.freeze(new ht(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1));const Go=new me,Vo=new q,Xo=new q,Ho=new Q,$o=new ht,Yo=new ht;function Zo(t,e,n,r){this.west=t??0,this.south=e??0,this.east=n??0,this.north=r??0}lo.basisTo2D=function(t,e,n){if(!w(t))throw new b("projection is required.");if(!w(e))throw new b("matrix is required.");if(!w(n))throw new b("result is required.");const r=ht.getTranslation(e,Xo),o=t.ellipsoid;let i;if(q.equals(r,q.ZERO))i=q.clone(q.ZERO,Vo);else{const e=o.cartesianToCartographic(r,Go);i=t.project(e,Vo),q.fromElements(i.z,i.x,i.y,i)}const a=lo.eastNorthUpToFixedFrame(r,o,$o),s=ht.inverseTransformation(a,Yo),u=ht.getMatrix3(e,Ho),c=ht.multiplyByMatrix3(s,u,n);return ht.multiply(lo.SWIZZLE_3D_TO_2D_MATRIX,c,n),ht.setTranslation(n,i,n),n},lo.ellipsoidTo2DModelMatrix=function(t,e,n){if(!w(t))throw new b("projection is required.");if(!w(e))throw new b("center is required.");if(!w(n))throw new b("result is required.");const r=t.ellipsoid,o=lo.eastNorthUpToFixedFrame(e,r,$o),i=ht.inverseTransformation(o,Yo),a=r.cartesianToCartographic(e,Go),s=t.project(a,Vo);q.fromElements(s.z,s.x,s.y,s);const u=ht.fromTranslation(s,$o);return ht.multiply(lo.SWIZZLE_3D_TO_2D_MATRIX,i,n),ht.multiply(u,n,n),n},Object.defineProperties(Zo.prototype,{width:{get:function(){return Zo.computeWidth(this)}},height:{get:function(){return Zo.computeHeight(this)}}}),Zo.packedLength=4,Zo.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.west,e[n++]=t.south,e[n++]=t.east,e[n]=t.north,e},Zo.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new Zo),n.west=t[e++],n.south=t[e++],n.east=t[e++],n.north=t[e],n},Zo.computeWidth=function(t){T.typeOf.object("rectangle",t);let e=t.east;const n=t.west;return e<n&&(e+=P.TWO_PI),e-n},Zo.computeHeight=function(t){return T.typeOf.object("rectangle",t),t.north-t.south},Zo.fromDegrees=function(t,e,n,r,o){return t=P.toRadians(t??0),e=P.toRadians(e??0),n=P.toRadians(n??0),r=P.toRadians(r??0),w(o)?(o.west=t,o.south=e,o.east=n,o.north=r,o):new Zo(t,e,n,r)},Zo.fromRadians=function(t,e,n,r,o){return w(o)?(o.west=t??0,o.south=e??0,o.east=n??0,o.north=r??0,o):new Zo(t,e,n,r)},Zo.fromCartographicArray=function(t,e){T.defined("cartographics",t);let n=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(let u=0,c=t.length;u<c;u++){const e=t[u];n=Math.min(n,e.longitude),r=Math.max(r,e.longitude),a=Math.min(a,e.latitude),s=Math.max(s,e.latitude);const c=e.longitude>=0?e.longitude:e.longitude+P.TWO_PI;o=Math.min(o,c),i=Math.max(i,c)}return r-n>i-o&&(n=o,r=i,r>P.PI&&(r-=P.TWO_PI),n>P.PI&&(n-=P.TWO_PI)),w(e)?(e.west=n,e.south=a,e.east=r,e.north=s,e):new Zo(n,a,r,s)},Zo.fromCartesianArray=function(t,e,n){T.defined("cartesians",t),e=e??Ee.default;let r=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE;for(let c=0,l=t.length;c<l;c++){const n=e.cartesianToCartographic(t[c]);r=Math.min(r,n.longitude),o=Math.max(o,n.longitude),s=Math.min(s,n.latitude),u=Math.max(u,n.latitude);const l=n.longitude>=0?n.longitude:n.longitude+P.TWO_PI;i=Math.min(i,l),a=Math.max(a,l)}return o-r>a-i&&(r=i,o=a,o>P.PI&&(o-=P.TWO_PI),r>P.PI&&(r-=P.TWO_PI)),w(n)?(n.west=r,n.south=s,n.east=o,n.north=u,n):new Zo(r,s,o,u)};const Qo=new q,Ko=new q,Jo=new q,ti=new q,ei=new q,ni=new Array(5);for(let sc=0;sc<ni.length;++sc)ni[sc]=new q;Zo.fromBoundingSphere=function(t,e,n){T.typeOf.object("boundingSphere",t);const r=t.center,o=t.radius;if(w(e)||(e=Ee.default),w(n)||(n=new Zo),q.equals(r,q.ZERO))return Zo.clone(Zo.MAX_VALUE,n),n;const i=lo.eastNorthUpToFixedFrame(r,e,Qo),a=ht.multiplyByPointAsVector(i,q.UNIT_X,Ko);q.normalize(a,a);const s=ht.multiplyByPointAsVector(i,q.UNIT_Y,Jo);q.normalize(s,s),q.multiplyByScalar(s,o,s),q.multiplyByScalar(a,o,a);const u=q.negate(s,ei),c=q.negate(a,ti),l=ni;let f=l[0];return q.add(r,s,f),f=l[1],q.add(r,c,f),f=l[2],q.add(r,u,f),f=l[3],q.add(r,a,f),l[4]=r,Zo.fromCartesianArray(l,e,n)},Zo.clone=function(t,e){if(w(t))return w(e)?(e.west=t.west,e.south=t.south,e.east=t.east,e.north=t.north,e):new Zo(t.west,t.south,t.east,t.north)},Zo.equalsEpsilon=function(t,e,n){return n=n??0,t===e||w(t)&&w(e)&&Math.abs(t.west-e.west)<=n&&Math.abs(t.south-e.south)<=n&&Math.abs(t.east-e.east)<=n&&Math.abs(t.north-e.north)<=n},Zo.prototype.clone=function(t){return Zo.clone(this,t)},Zo.prototype.equals=function(t){return Zo.equals(this,t)},Zo.equals=function(t,e){return t===e||w(t)&&w(e)&&t.west===e.west&&t.south===e.south&&t.east===e.east&&t.north===e.north},Zo.prototype.equalsEpsilon=function(t,e){return Zo.equalsEpsilon(this,t,e)},Zo._validate=function(t){T.typeOf.object("rectangle",t);const e=t.north;T.typeOf.number.greaterThanOrEquals("north",e,-P.PI_OVER_TWO),T.typeOf.number.lessThanOrEquals("north",e,P.PI_OVER_TWO);const n=t.south;T.typeOf.number.greaterThanOrEquals("south",n,-P.PI_OVER_TWO),T.typeOf.number.lessThanOrEquals("south",n,P.PI_OVER_TWO);const r=t.west;T.typeOf.number.greaterThanOrEquals("west",r,-Math.PI),T.typeOf.number.lessThanOrEquals("west",r,Math.PI);const o=t.east;T.typeOf.number.greaterThanOrEquals("east",o,-Math.PI),T.typeOf.number.lessThanOrEquals("east",o,Math.PI)},Zo.southwest=function(t,e){return T.typeOf.object("rectangle",t),w(e)?(e.longitude=t.west,e.latitude=t.south,e.height=0,e):new me(t.west,t.south)},Zo.northwest=function(t,e){return T.typeOf.object("rectangle",t),w(e)?(e.longitude=t.west,e.latitude=t.north,e.height=0,e):new me(t.west,t.north)},Zo.northeast=function(t,e){return T.typeOf.object("rectangle",t),w(e)?(e.longitude=t.east,e.latitude=t.north,e.height=0,e):new me(t.east,t.north)},Zo.southeast=function(t,e){return T.typeOf.object("rectangle",t),w(e)?(e.longitude=t.east,e.latitude=t.south,e.height=0,e):new me(t.east,t.south)},Zo.center=function(t,e){T.typeOf.object("rectangle",t);let n=t.east;const r=t.west;n<r&&(n+=P.TWO_PI);const o=P.negativePiToPi(.5*(r+n)),i=.5*(t.south+t.north);return w(e)?(e.longitude=o,e.latitude=i,e.height=0,e):new me(o,i)},Zo.intersection=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("otherRectangle",e);let r=t.east,o=t.west,i=e.east,a=e.west;r<o&&i>0?r+=P.TWO_PI:i<a&&r>0&&(i+=P.TWO_PI),r<o&&a<0?a+=P.TWO_PI:i<a&&o<0&&(o+=P.TWO_PI);const s=P.negativePiToPi(Math.max(o,a)),u=P.negativePiToPi(Math.min(r,i));if((t.west<t.east||e.west<e.east)&&u<=s)return;const c=Math.max(t.south,e.south),l=Math.min(t.north,e.north);return c>=l?void 0:w(n)?(n.west=s,n.south=c,n.east=u,n.north=l,n):new Zo(s,c,u,l)},Zo.simpleIntersection=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("otherRectangle",e);const r=Math.max(t.west,e.west),o=Math.max(t.south,e.south),i=Math.min(t.east,e.east),a=Math.min(t.north,e.north);if(!(o>=a||r>=i))return w(n)?(n.west=r,n.south=o,n.east=i,n.north=a,n):new Zo(r,o,i,a)},Zo.union=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("otherRectangle",e),w(n)||(n=new Zo);let r=t.east,o=t.west,i=e.east,a=e.west;r<o&&i>0?r+=P.TWO_PI:i<a&&r>0&&(i+=P.TWO_PI),r<o&&a<0?a+=P.TWO_PI:i<a&&o<0&&(o+=P.TWO_PI);const s=P.negativePiToPi(Math.min(o,a)),u=P.negativePiToPi(Math.max(r,i));return n.west=s,n.south=Math.min(t.south,e.south),n.east=u,n.north=Math.max(t.north,e.north),n},Zo.expand=function(t,e,n){return T.typeOf.object("rectangle",t),T.typeOf.object("cartographic",e),w(n)||(n=new Zo),n.west=Math.min(t.west,e.longitude),n.south=Math.min(t.south,e.latitude),n.east=Math.max(t.east,e.longitude),n.north=Math.max(t.north,e.latitude),n},Zo.contains=function(t,e){T.typeOf.object("rectangle",t),T.typeOf.object("cartographic",e);let n=e.longitude;const r=e.latitude,o=t.west;let i=t.east;return i<o&&(i+=P.TWO_PI,n<0&&(n+=P.TWO_PI)),(n>o||P.equalsEpsilon(n,o,P.EPSILON14))&&(n<i||P.equalsEpsilon(n,i,P.EPSILON14))&&r>=t.south&&r<=t.north};const ri=new me;function oi(t,e,n,r){this.x=t??0,this.y=e??0,this.width=n??0,this.height=r??0}Zo.subsample=function(t,e,n,r){T.typeOf.object("rectangle",t),e=e??Ee.default,n=n??0,w(r)||(r=[]);let o=0;const i=t.north,a=t.south,s=t.east,u=t.west,c=ri;c.height=n,c.longitude=u,c.latitude=i,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.longitude=s,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.latitude=a,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.longitude=u,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.latitude=i<0?i:a>0?a:0;for(let l=1;l<8;++l)c.longitude=-Math.PI+l*P.PI_OVER_TWO,Zo.contains(t,c)&&(r[o]=e.cartographicToCartesian(c,r[o]),o++);return 0===c.latitude&&(c.longitude=u,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.longitude=s,r[o]=e.cartographicToCartesian(c,r[o]),o++),r.length=o,r},Zo.subsection=function(t,e,n,r,o,i){if(T.typeOf.object("rectangle",t),T.typeOf.number.greaterThanOrEquals("westLerp",e,0),T.typeOf.number.lessThanOrEquals("westLerp",e,1),T.typeOf.number.greaterThanOrEquals("southLerp",n,0),T.typeOf.number.lessThanOrEquals("southLerp",n,1),T.typeOf.number.greaterThanOrEquals("eastLerp",r,0),T.typeOf.number.lessThanOrEquals("eastLerp",r,1),T.typeOf.number.greaterThanOrEquals("northLerp",o,0),T.typeOf.number.lessThanOrEquals("northLerp",o,1),T.typeOf.number.lessThanOrEquals("westLerp",e,r),T.typeOf.number.lessThanOrEquals("southLerp",n,o),w(i)||(i=new Zo),t.west<=t.east){const n=t.east-t.west;i.west=t.west+e*n,i.east=t.west+r*n}else{const n=P.TWO_PI+t.east-t.west;i.west=P.negativePiToPi(t.west+e*n),i.east=P.negativePiToPi(t.west+r*n)}const a=t.north-t.south;return i.south=t.south+n*a,i.north=t.south+o*a,1===e&&(i.west=t.east),1===r&&(i.east=t.east),1===n&&(i.south=t.north),1===o&&(i.north=t.north),i},Zo.MAX_VALUE=Object.freeze(new Zo(-Math.PI,-P.PI_OVER_TWO,Math.PI,P.PI_OVER_TWO)),oi.packedLength=4,oi.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n++]=t.width,e[n]=t.height,e},oi.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new oi),n.x=t[e++],n.y=t[e++],n.width=t[e++],n.height=t[e],n},oi.fromPoints=function(t,e){if(w(e)||(e=new oi),!w(t)||0===t.length)return e.x=0,e.y=0,e.width=0,e.height=0,e;const n=t.length;let r=t[0].x,o=t[0].y,i=t[0].x,a=t[0].y;for(let s=1;s<n;s++){const e=t[s],n=e.x,u=e.y;r=Math.min(n,r),i=Math.max(n,i),o=Math.min(u,o),a=Math.max(u,a)}return e.x=r,e.y=o,e.width=i-r,e.height=a-o,e};const ii=new Ne,ai=new me,si=new me;function ui(t,e,n,r){this[0]=t??0,this[1]=n??0,this[2]=e??0,this[3]=r??0}oi.fromRectangle=function(t,e,n){if(w(n)||(n=new oi),!w(t))return n.x=0,n.y=0,n.width=0,n.height=0,n;ii._ellipsoid=Ee.default;const r=(e=e??ii).project(Zo.southwest(t,ai)),o=e.project(Zo.northeast(t,si));return ae.subtract(o,r,o),n.x=r.x,n.y=r.y,n.width=o.x,n.height=o.y,n},oi.clone=function(t,e){if(w(t))return w(e)?(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e):new oi(t.x,t.y,t.width,t.height)},oi.union=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),w(n)||(n=new oi);const r=Math.min(t.x,e.x),o=Math.min(t.y,e.y),i=Math.max(t.x+t.width,e.x+e.width),a=Math.max(t.y+t.height,e.y+e.height);return n.x=r,n.y=o,n.width=i-r,n.height=a-o,n},oi.expand=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("point",e),n=oi.clone(t,n);const r=e.x-n.x,o=e.y-n.y;return r>n.width?n.width=r:r<0&&(n.width-=r,n.x=e.x),o>n.height?n.height=o:o<0&&(n.height-=o,n.y=e.y),n},oi.intersect=function(t,e){T.typeOf.object("left",t),T.typeOf.object("right",e);const n=t.x,r=t.y,o=e.x,i=e.y;return n>o+e.width||n+t.width<o||r+t.height<i||r>i+e.height?Pe.OUTSIDE:Pe.INTERSECTING},oi.equals=function(t,e){return t===e||w(t)&&w(e)&&t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},oi.prototype.clone=function(t){return oi.clone(this,t)},oi.prototype.intersect=function(t){return oi.intersect(this,t)},oi.prototype.equals=function(t){return oi.equals(this,t)},xt.POINTS,xt.LINES,xt.LINE_LOOP,xt.LINE_STRIP,xt.TRIANGLES,xt.TRIANGLE_STRIP,xt.TRIANGLE_FAN,xt.CW,xt.CCW,ui.packedLength=4,ui.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e},ui.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new ui),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n},ui.packArray=function(t,e){T.defined("array",t);const n=t.length,r=4*n;if(w(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 4 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)ui.pack(t[o],e,4*o);return e},ui.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,4),t.length%4!=0)throw new b("array length must be a multiple of 4.");const n=t.length;w(e)?e.length=n/4:e=new Array(n/4);for(let r=0;r<n;r+=4){const n=r/4;e[n]=ui.unpack(t,r,e[n])}return e},ui.clone=function(t,e){if(w(t))return w(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):new ui(t[0],t[2],t[1],t[3])},ui.fromArray=ui.unpack,ui.fromColumnMajorArray=function(t,e){return T.defined("values",t),ui.clone(t,e)},ui.fromRowMajorArray=function(t,e){return T.defined("values",t),w(e)?(e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3],e):new ui(t[0],t[1],t[2],t[3])},ui.fromScale=function(t,e){return T.typeOf.object("scale",t),w(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=t.y,e):new ui(t.x,0,0,t.y)},ui.fromUniformScale=function(t,e){return T.typeOf.number("scale",t),w(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=t,e):new ui(t,0,0,t)},ui.fromRotation=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return w(e)?(e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e):new ui(n,-r,r,n)},ui.toArray=function(t,e){return T.typeOf.object("matrix",t),w(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):[t[0],t[1],t[2],t[3]]},ui.getElementIndex=function(t,e){return T.typeOf.number.greaterThanOrEquals("row",e,0),T.typeOf.number.lessThanOrEquals("row",e,1),T.typeOf.number.greaterThanOrEquals("column",t,0),T.typeOf.number.lessThanOrEquals("column",t,1),2*t+e},ui.getColumn=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("result",n);const r=2*e,o=t[r],i=t[r+1];return n.x=o,n.y=i,n},ui.setColumn=function(t,e,n,r){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("cartesian",n),T.typeOf.object("result",r);const o=2*e;return(r=ui.clone(t,r))[o]=n.x,r[o+1]=n.y,r},ui.getRow=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("result",n);const r=t[e],o=t[e+2];return n.x=r,n.y=o,n},ui.setRow=function(t,e,n,r){return T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("cartesian",n),T.typeOf.object("result",r),(r=ui.clone(t,r))[e]=n.x,r[e+2]=n.y,r};const ci=new ae;ui.setScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=ui.getScale(t,ci),o=e.x/r.x,i=e.y/r.y;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*i,n[3]=t[3]*i,n};const li=new ae;ui.setUniformScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n);const r=ui.getScale(t,li),o=e/r.x,i=e/r.y;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*i,n[3]=t[3]*i,n};const fi=new ae;ui.getScale=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=ae.magnitude(ae.fromElements(t[0],t[1],fi)),e.y=ae.magnitude(ae.fromElements(t[2],t[3],fi)),e};const hi=new ae;ui.getMaximumScale=function(t){return ui.getScale(t,hi),ae.maximumComponent(hi)};const pi=new ae;ui.setRotation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("result",n);const r=ui.getScale(t,pi);return n[0]=e[0]*r.x,n[1]=e[1]*r.x,n[2]=e[2]*r.y,n[3]=e[3]*r.y,n};const di=new ae;function mi(t,e){this.start=t??0,this.stop=e??0}function yi(t,e){this.center=q.clone(t??q.ZERO),this.radius=e??0}ui.getRotation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=ui.getScale(t,di);return e[0]=t[0]/n.x,e[1]=t[1]/n.x,e[2]=t[2]/n.y,e[3]=t[3]/n.y,e},ui.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0]*e[0]+t[2]*e[1],o=t[0]*e[2]+t[2]*e[3],i=t[1]*e[0]+t[3]*e[1],a=t[1]*e[2]+t[3]*e[3];return n[0]=r,n[1]=i,n[2]=o,n[3]=a,n},ui.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},ui.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n},ui.multiplyByVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=t[0]*e.x+t[2]*e.y,o=t[1]*e.x+t[3]*e.y;return n.x=r,n.y=o,n},ui.multiplyByScalar=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},ui.multiplyByScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.y,n[3]=t[3]*e.y,n},ui.multiplyByUniformScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},ui.negate=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},ui.transpose=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[2],o=t[1],i=t[3];return e[0]=n,e[1]=r,e[2]=o,e[3]=i,e},ui.abs=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e},ui.equals=function(t,e){return t===e||w(t)&&w(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},ui.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]},ui.equalsEpsilon=function(t,e,n){return n=n??0,t===e||w(t)&&w(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n},ui.IDENTITY=Object.freeze(new ui(1,0,0,1)),ui.ZERO=Object.freeze(new ui(0,0,0,0)),ui.COLUMN0ROW0=0,ui.COLUMN0ROW1=1,ui.COLUMN1ROW0=2,ui.COLUMN1ROW1=3,Object.defineProperties(ui.prototype,{length:{get:function(){return ui.packedLength}}}),ui.prototype.clone=function(t){return ui.clone(this,t)},ui.prototype.equals=function(t){return ui.equals(this,t)},ui.prototype.equalsEpsilon=function(t,e){return ui.equalsEpsilon(this,t,e)},ui.prototype.toString=function(){return`(${this[0]}, ${this[2]})\n(${this[1]}, ${this[3]})`},xt.BYTE,xt.UNSIGNED_BYTE,xt.SHORT,xt.UNSIGNED_SHORT,xt.INT,xt.UNSIGNED_INT,xt.FLOAT,xt.DOUBLE;const gi=new q,_i=new q,Oi=new q,Ei=new q,wi=new q,bi=new q,Ti=new q,Ri=new q,Ai=new q,Si=new q,xi=new q,Mi=new q,Ii=4/3*P.PI;yi.fromPoints=function(t,e){if(w(e)||(e=new yi),!w(t)||0===t.length)return e.center=q.clone(q.ZERO,e.center),e.radius=0,e;const n=q.clone(t[0],Ti),r=q.clone(n,gi),o=q.clone(n,_i),i=q.clone(n,Oi),a=q.clone(n,Ei),s=q.clone(n,wi),u=q.clone(n,bi),c=t.length;let l;for(l=1;l<c;l++){q.clone(t[l],n);const e=n.x,c=n.y,f=n.z;e<r.x&&q.clone(n,r),e>a.x&&q.clone(n,a),c<o.y&&q.clone(n,o),c>s.y&&q.clone(n,s),f<i.z&&q.clone(n,i),f>u.z&&q.clone(n,u)}const f=q.magnitudeSquared(q.subtract(a,r,Ri)),h=q.magnitudeSquared(q.subtract(s,o,Ri)),p=q.magnitudeSquared(q.subtract(u,i,Ri));let d=r,m=a,y=f;h>y&&(y=h,d=o,m=s),p>y&&(y=p,d=i,m=u);const g=Ai;g.x=.5*(d.x+m.x),g.y=.5*(d.y+m.y),g.z=.5*(d.z+m.z);let _=q.magnitudeSquared(q.subtract(m,g,Ri)),O=Math.sqrt(_);const E=Si;E.x=r.x,E.y=o.y,E.z=i.z;const b=xi;b.x=a.x,b.y=s.y,b.z=u.z;const T=q.midpoint(E,b,Mi);let R=0;for(l=0;l<c;l++){q.clone(t[l],n);const e=q.magnitude(q.subtract(n,T,Ri));e>R&&(R=e);const r=q.magnitudeSquared(q.subtract(n,g,Ri));if(r>_){const t=Math.sqrt(r);O=.5*(O+t),_=O*O;const e=t-O;g.x=(O*g.x+e*n.x)/t,g.y=(O*g.y+e*n.y)/t,g.z=(O*g.z+e*n.z)/t}}return O<R?(q.clone(g,e.center),e.radius=O):(q.clone(T,e.center),e.radius=R),e};const Ni=new Ne,Pi=new q,Ci=new q,vi=new me,qi=new me;yi.fromRectangle2D=function(t,e,n){return yi.fromRectangleWithHeights2D(t,e,0,0,n)},yi.fromRectangleWithHeights2D=function(t,e,n,r,o){if(w(o)||(o=new yi),!w(t))return o.center=q.clone(q.ZERO,o.center),o.radius=0,o;Ni._ellipsoid=Ee.default,e=e??Ni,Zo.southwest(t,vi),vi.height=n,Zo.northeast(t,qi),qi.height=r;const i=e.project(vi,Pi),a=e.project(qi,Ci),s=a.x-i.x,u=a.y-i.y,c=a.z-i.z;o.radius=.5*Math.sqrt(s*s+u*u+c*c);const l=o.center;return l.x=i.x+.5*s,l.y=i.y+.5*u,l.z=i.z+.5*c,o};const ji=[];yi.fromRectangle3D=function(t,e,n,r){if(e=e??Ee.default,n=n??0,w(r)||(r=new yi),!w(t))return r.center=q.clone(q.ZERO,r.center),r.radius=0,r;const o=Zo.subsample(t,e,n,ji);return yi.fromPoints(o,r)},yi.fromVertices=function(t,e,n,r){if(w(r)||(r=new yi),!w(t)||0===t.length)return r.center=q.clone(q.ZERO,r.center),r.radius=0,r;e=e??q.ZERO,n=n??3,T.typeOf.number.greaterThanOrEquals("stride",n,3);const o=Ti;o.x=t[0]+e.x,o.y=t[1]+e.y,o.z=t[2]+e.z;const i=q.clone(o,gi),a=q.clone(o,_i),s=q.clone(o,Oi),u=q.clone(o,Ei),c=q.clone(o,wi),l=q.clone(o,bi),f=t.length;let h;for(h=0;h<f;h+=n){const n=t[h]+e.x,r=t[h+1]+e.y,f=t[h+2]+e.z;o.x=n,o.y=r,o.z=f,n<i.x&&q.clone(o,i),n>u.x&&q.clone(o,u),r<a.y&&q.clone(o,a),r>c.y&&q.clone(o,c),f<s.z&&q.clone(o,s),f>l.z&&q.clone(o,l)}const p=q.magnitudeSquared(q.subtract(u,i,Ri)),d=q.magnitudeSquared(q.subtract(c,a,Ri)),m=q.magnitudeSquared(q.subtract(l,s,Ri));let y=i,g=u,_=p;d>_&&(_=d,y=a,g=c),m>_&&(_=m,y=s,g=l);const O=Ai;O.x=.5*(y.x+g.x),O.y=.5*(y.y+g.y),O.z=.5*(y.z+g.z);let E=q.magnitudeSquared(q.subtract(g,O,Ri)),b=Math.sqrt(E);const R=Si;R.x=i.x,R.y=a.y,R.z=s.z;const A=xi;A.x=u.x,A.y=c.y,A.z=l.z;const S=q.midpoint(R,A,Mi);let x=0;for(h=0;h<f;h+=n){o.x=t[h]+e.x,o.y=t[h+1]+e.y,o.z=t[h+2]+e.z;const n=q.magnitude(q.subtract(o,S,Ri));n>x&&(x=n);const r=q.magnitudeSquared(q.subtract(o,O,Ri));if(r>E){const t=Math.sqrt(r);b=.5*(b+t),E=b*b;const e=t-b;O.x=(b*O.x+e*o.x)/t,O.y=(b*O.y+e*o.y)/t,O.z=(b*O.z+e*o.z)/t}}return b<x?(q.clone(O,r.center),r.radius=b):(q.clone(S,r.center),r.radius=x),r},yi.fromEncodedCartesianVertices=function(t,e,n){if(w(n)||(n=new yi),!w(t)||!w(e)||t.length!==e.length||0===t.length)return n.center=q.clone(q.ZERO,n.center),n.radius=0,n;const r=Ti;r.x=t[0]+e[0],r.y=t[1]+e[1],r.z=t[2]+e[2];const o=q.clone(r,gi),i=q.clone(r,_i),a=q.clone(r,Oi),s=q.clone(r,Ei),u=q.clone(r,wi),c=q.clone(r,bi),l=t.length;let f;for(f=0;f<l;f+=3){const n=t[f]+e[f],l=t[f+1]+e[f+1],h=t[f+2]+e[f+2];r.x=n,r.y=l,r.z=h,n<o.x&&q.clone(r,o),n>s.x&&q.clone(r,s),l<i.y&&q.clone(r,i),l>u.y&&q.clone(r,u),h<a.z&&q.clone(r,a),h>c.z&&q.clone(r,c)}const h=q.magnitudeSquared(q.subtract(s,o,Ri)),p=q.magnitudeSquared(q.subtract(u,i,Ri)),d=q.magnitudeSquared(q.subtract(c,a,Ri));let m=o,y=s,g=h;p>g&&(g=p,m=i,y=u),d>g&&(g=d,m=a,y=c);const _=Ai;_.x=.5*(m.x+y.x),_.y=.5*(m.y+y.y),_.z=.5*(m.z+y.z);let O=q.magnitudeSquared(q.subtract(y,_,Ri)),E=Math.sqrt(O);const b=Si;b.x=o.x,b.y=i.y,b.z=a.z;const T=xi;T.x=s.x,T.y=u.y,T.z=c.z;const R=q.midpoint(b,T,Mi);let A=0;for(f=0;f<l;f+=3){r.x=t[f]+e[f],r.y=t[f+1]+e[f+1],r.z=t[f+2]+e[f+2];const n=q.magnitude(q.subtract(r,R,Ri));n>A&&(A=n);const o=q.magnitudeSquared(q.subtract(r,_,Ri));if(o>O){const t=Math.sqrt(o);E=.5*(E+t),O=E*E;const e=t-E;_.x=(E*_.x+e*r.x)/t,_.y=(E*_.y+e*r.y)/t,_.z=(E*_.z+e*r.z)/t}}return E<A?(q.clone(_,n.center),n.radius=E):(q.clone(R,n.center),n.radius=A),n},yi.fromCornerPoints=function(t,e,n){T.typeOf.object("corner",t),T.typeOf.object("oppositeCorner",e),w(n)||(n=new yi);const r=q.midpoint(t,e,n.center);return n.radius=q.distance(r,e),n},yi.fromEllipsoid=function(t,e){return T.typeOf.object("ellipsoid",t),w(e)||(e=new yi),q.clone(q.ZERO,e.center),e.radius=t.maximumRadius,e};const Ui=new q;yi.fromBoundingSpheres=function(t,e){if(w(e)||(e=new yi),!w(t)||0===t.length)return e.center=q.clone(q.ZERO,e.center),e.radius=0,e;const n=t.length;if(1===n)return yi.clone(t[0],e);if(2===n)return yi.union(t[0],t[1],e);const r=[];let o;for(o=0;o<n;o++)r.push(t[o].center);const i=(e=yi.fromPoints(r,e)).center;let a=e.radius;for(o=0;o<n;o++){const e=t[o];a=Math.max(a,q.distance(i,e.center,Ui)+e.radius)}return e.radius=a,e};const zi=new q,Di=new q,Li=new q;yi.fromOrientedBoundingBox=function(t,e){T.defined("orientedBoundingBox",t),w(e)||(e=new yi);const n=t.halfAxes,r=Q.getColumn(n,0,zi),o=Q.getColumn(n,1,Di),i=Q.getColumn(n,2,Li);return q.add(r,o,r),q.add(r,i,r),e.center=q.clone(t.center,e.center),e.radius=q.magnitude(r),e};const Fi=new q,Bi=new q;yi.fromTransformation=function(t,e){T.typeOf.object("transformation",t),w(e)||(e=new yi);const n=ht.getTranslation(t,Fi),r=ht.getScale(t,Bi),o=.5*q.magnitude(r);return e.center=q.clone(n,e.center),e.radius=o,e},yi.clone=function(t,e){if(w(t))return w(e)?(e.center=q.clone(t.center,e.center),e.radius=t.radius,e):new yi(t.center,t.radius)},yi.packedLength=4,yi.pack=function(t,e,n){T.typeOf.object("value",t),T.defined("array",e),n=n??0;const r=t.center;return e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n]=t.radius,e},yi.unpack=function(t,e,n){T.defined("array",t),e=e??0,w(n)||(n=new yi);const r=n.center;return r.x=t[e++],r.y=t[e++],r.z=t[e++],n.radius=t[e],n};const ki=new q,Wi=new q;yi.union=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),w(n)||(n=new yi);const r=t.center,o=t.radius,i=e.center,a=e.radius,s=q.subtract(i,r,ki),u=q.magnitude(s);if(o>=u+a)return t.clone(n),n;if(a>=u+o)return e.clone(n),n;const c=.5*(o+u+a),l=q.multiplyByScalar(s,(-o+c)/u,Wi);return q.add(l,r,l),q.clone(l,n.center),n.radius=c,n};const Gi=new q;yi.expand=function(t,e,n){T.typeOf.object("sphere",t),T.typeOf.object("point",e),n=yi.clone(t,n);const r=q.magnitude(q.subtract(e,n.center,Gi));return r>n.radius&&(n.radius=r),n},yi.intersectPlane=function(t,e){T.typeOf.object("sphere",t),T.typeOf.object("plane",e);const n=t.center,r=t.radius,o=e.normal,i=q.dot(o,n)+e.distance;return i<-r?Pe.OUTSIDE:i<r?Pe.INTERSECTING:Pe.INSIDE},yi.transform=function(t,e,n){return T.typeOf.object("sphere",t),T.typeOf.object("transform",e),w(n)||(n=new yi),n.center=ht.multiplyByPoint(e,t.center,n.center),n.radius=ht.getMaximumScale(e)*t.radius,n};const Vi=new q;yi.distanceSquaredTo=function(t,e){T.typeOf.object("sphere",t),T.typeOf.object("cartesian",e);const n=q.subtract(t.center,e,Vi),r=q.magnitude(n)-t.radius;return r<=0?0:r*r},yi.transformWithoutScale=function(t,e,n){return T.typeOf.object("sphere",t),T.typeOf.object("transform",e),w(n)||(n=new yi),n.center=ht.multiplyByPoint(e,t.center,n.center),n.radius=t.radius,n};const Xi=new q;yi.computePlaneDistances=function(t,e,n,r){T.typeOf.object("sphere",t),T.typeOf.object("position",e),T.typeOf.object("direction",n),w(r)||(r=new mi);const o=q.subtract(t.center,e,Xi),i=q.dot(n,o);return r.start=i-t.radius,r.stop=i+t.radius,r};const Hi=new q,$i=new q,Yi=new q,Zi=new q,Qi=new q,Ki=new me,Ji=new Array(8);for(let sc=0;sc<8;++sc)Ji[sc]=new q;const ta=new Ne;function ea(t){t=t??Z.EMPTY_OBJECT,this.position=t.position??!1,this.normal=t.normal??!1,this.st=t.st??!1,this.bitangent=t.bitangent??!1,this.tangent=t.tangent??!1,this.color=t.color??!1}function na(){this.high=q.clone(q.ZERO),this.low=q.clone(q.ZERO)}yi.projectTo2D=function(t,e,n){T.typeOf.object("sphere",t),ta._ellipsoid=Ee.default;const r=(e=e??ta).ellipsoid;let o=t.center;const i=t.radius;let a;a=q.equals(o,q.ZERO)?q.clone(q.UNIT_X,Hi):r.geodeticSurfaceNormal(o,Hi);const s=q.cross(q.UNIT_Z,a,$i);q.normalize(s,s);const u=q.cross(a,s,Yi);q.normalize(u,u),q.multiplyByScalar(a,i,a),q.multiplyByScalar(u,i,u),q.multiplyByScalar(s,i,s);const c=q.negate(u,Qi),l=q.negate(s,Zi),f=Ji;let h=f[0];q.add(a,u,h),q.add(h,s,h),h=f[1],q.add(a,u,h),q.add(h,l,h),h=f[2],q.add(a,c,h),q.add(h,l,h),h=f[3],q.add(a,c,h),q.add(h,s,h),q.negate(a,a),h=f[4],q.add(a,u,h),q.add(h,s,h),h=f[5],q.add(a,u,h),q.add(h,l,h),h=f[6],q.add(a,c,h),q.add(h,l,h),h=f[7],q.add(a,c,h),q.add(h,s,h);const p=f.length;for(let g=0;g<p;++g){const t=f[g];q.add(o,t,t);const n=r.cartesianToCartographic(t,Ki);e.project(n,t)}o=(n=yi.fromPoints(f,n)).center;const d=o.x,m=o.y,y=o.z;return o.x=y,o.y=d,o.z=m,n},yi.isOccluded=function(t,e){return T.typeOf.object("sphere",t),T.typeOf.object("occluder",e),!e.isBoundingSphereVisible(t)},yi.equals=function(t,e){return t===e||w(t)&&w(e)&&q.equals(t.center,e.center)&&t.radius===e.radius},yi.prototype.intersectPlane=function(t){return yi.intersectPlane(this,t)},yi.prototype.distanceSquaredTo=function(t){return yi.distanceSquaredTo(this,t)},yi.prototype.computePlaneDistances=function(t,e,n){return yi.computePlaneDistances(this,t,e,n)},yi.prototype.isOccluded=function(t){return yi.isOccluded(this,t)},yi.prototype.equals=function(t){return yi.equals(this,t)},yi.prototype.clone=function(t){return yi.clone(this,t)},yi.prototype.volume=function(){const t=this.radius;return Ii*t*t*t},ea.POSITION_ONLY=Object.freeze(new ea({position:!0})),ea.POSITION_AND_NORMAL=Object.freeze(new ea({position:!0,normal:!0})),ea.POSITION_NORMAL_AND_ST=Object.freeze(new ea({position:!0,normal:!0,st:!0})),ea.POSITION_AND_ST=Object.freeze(new ea({position:!0,st:!0})),ea.POSITION_AND_COLOR=Object.freeze(new ea({position:!0,color:!0})),ea.ALL=Object.freeze(new ea({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0})),ea.DEFAULT=ea.POSITION_NORMAL_AND_ST,ea.packedLength=6,ea.pack=function(t,e,n){if(!w(t))throw new b("value is required");if(!w(e))throw new b("array is required");return n=n??0,e[n++]=t.position?1:0,e[n++]=t.normal?1:0,e[n++]=t.st?1:0,e[n++]=t.tangent?1:0,e[n++]=t.bitangent?1:0,e[n]=t.color?1:0,e},ea.unpack=function(t,e,n){if(!w(t))throw new b("array is required");return e=e??0,w(n)||(n=new ea),n.position=1===t[e++],n.normal=1===t[e++],n.st=1===t[e++],n.tangent=1===t[e++],n.bitangent=1===t[e++],n.color=1===t[e],n},ea.clone=function(t,e){if(w(t))return w(e)||(e=new ea),e.position=t.position,e.normal=t.normal,e.st=t.st,e.tangent=t.tangent,e.bitangent=t.bitangent,e.color=t.color,e},na.encode=function(t,e){let n;return T.typeOf.number("value",t),w(e)||(e={high:0,low:0}),t>=0?(n=65536*Math.floor(t/65536),e.high=n,e.low=t-n):(n=65536*Math.floor(-t/65536),e.high=-n,e.low=t+n),e};const ra={high:0,low:0};na.fromCartesian=function(t,e){T.typeOf.object("cartesian",t),w(e)||(e=new na);const n=e.high,r=e.low;return na.encode(t.x,ra),n.x=ra.high,r.x=ra.low,na.encode(t.y,ra),n.y=ra.high,r.y=ra.low,na.encode(t.z,ra),n.z=ra.high,r.z=ra.low,e};const oa=new na;na.writeElements=function(t,e,n){T.defined("cartesianArray",e),T.typeOf.number("index",n),T.typeOf.number.greaterThanOrEquals("index",n,0),na.fromCartesian(t,oa);const r=oa.high,o=oa.low;e[n]=r.x,e[n+1]=r.y,e[n+2]=r.z,e[n+3]=o.x,e[n+4]=o.y,e[n+5]=o.z};const ia={};function aa(t,e,n){const r=t+e;return P.sign(t)!==P.sign(e)&&Math.abs(r/Math.max(Math.abs(t),Math.abs(e)))<n?0:r}ia.computeDiscriminant=function(t,e,n){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");return e*e-4*t*n},ia.computeRealRoots=function(t,e,n){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");let r;if(0===t)return 0===e?[]:[-n/e];if(0===e){if(0===n)return[0,0];const e=Math.abs(n),o=Math.abs(t);if(e<o&&e/o<P.EPSILON14)return[0,0];if(e>o&&o/e<P.EPSILON14)return[];if(r=-n/t,r<0)return[];const i=Math.sqrt(r);return[-i,i]}if(0===n)return r=-e/t,r<0?[r,0]:[0,r];const o=aa(e*e,-4*t*n,P.EPSILON14);if(o<0)return[];const i=-.5*aa(e,P.sign(e)*Math.sqrt(o),P.EPSILON14);return e>0?[i/t,n/i]:[n/i,i/t]};const sa={};function ua(t,e,n,r){const o=t,i=e/3,a=n/3,s=r,u=o*a,c=i*s,l=i*i,f=a*a,h=o*a-l,p=o*s-i*a,d=i*s-f,m=4*h*d-p*p;let y,g;if(m<0){let t,e,n;l*c>=u*f?(t=o,e=h,n=-2*i*h+o*p):(t=s,e=d,n=-s*p+2*a*d);const r=-(n<0?-1:1)*Math.abs(t)*Math.sqrt(-m);g=-n+r;const _=g/2,O=_<0?-Math.pow(-_,1/3):Math.pow(_,1/3),E=g===r?-O:-e/O;return y=e<=0?O+E:-n/(O*O+E*E+e),l*c>=u*f?[(y-i)/o]:[-s/(y+a)]}const _=h,O=-2*i*h+o*p,E=d,w=-s*p+2*a*d,b=Math.sqrt(m),T=Math.sqrt(3)/2;let R=Math.abs(Math.atan2(o*b,-O)/3);y=2*Math.sqrt(-_);let A=Math.cos(R);g=y*A;let S=y*(-A/2-T*Math.sin(R));const x=g+S>2*i?g-i:S-i,M=o,I=x/M;R=Math.abs(Math.atan2(s*b,-w)/3),y=2*Math.sqrt(-E),A=Math.cos(R),g=y*A,S=y*(-A/2-T*Math.sin(R));const N=-s,P=g+S<2*a?g+a:S+a,C=N/P,v=-x*P-M*N,q=(a*v-i*(x*N))/(-i*v+a*(M*P));return I<=q?I<=C?q<=C?[I,q,C]:[I,C,q]:[C,I,q]:I<=C?[q,I,C]:q<=C?[q,C,I]:[C,q,I]}sa.computeDiscriminant=function(t,e,n,r){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");const o=e*e,i=n*n;return 18*t*e*n*r+o*i-t*t*27*(r*r)-4*(t*i*n+o*e*r)},sa.computeRealRoots=function(t,e,n,r){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");let o,i;if(0===t)return ia.computeRealRoots(e,n,r);if(0===e){if(0===n){if(0===r)return[0,0,0];i=-r/t;const e=i<0?-Math.pow(-i,1/3):Math.pow(i,1/3);return[e,e,e]}return 0===r?(o=ia.computeRealRoots(t,0,n),0===o.Length?[0]:[o[0],0,o[1]]):ua(t,0,n,r)}return 0===n?0===r?(i=-e/t,i<0?[i,0,0]:[0,0,i]):ua(t,e,0,r):0===r?(o=ia.computeRealRoots(t,e,n),0===o.length?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]):ua(t,e,n,r)};const ca={};function la(t,e){e=q.clone(e??q.ZERO),q.equals(e,q.ZERO)||q.normalize(e,e),this.origin=q.clone(t??q.ZERO),this.direction=e}ca.computeDiscriminant=function(t,e,n,r,o){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");if("number"!=typeof o)throw new b("e is a required number.");const i=t*t,a=e*e,s=a*e,u=n*n,c=u*n,l=r*r,f=l*r,h=o*o;return a*u*l-4*s*f-4*t*c*l+18*t*e*n*f-27*i*l*l+i*t*256*(h*o)+o*(18*s*n*r-4*a*c+16*t*u*u-80*t*e*u*r-6*t*a*l+144*i*n*l)+h*(144*t*a*n-27*a*a-128*i*u-192*i*e*r)},ca.computeRealRoots=function(t,e,n,r,o){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");if("number"!=typeof o)throw new b("e is a required number.");if(Math.abs(t)<P.EPSILON15)return sa.computeRealRoots(e,n,r,o);const i=e/t,a=n/t,s=r/t,u=o/t;let c=i<0?1:0;switch(c+=a<0?c+1:c,c+=s<0?c+1:c,c+=u<0?c+1:c,c){case 0:case 3:case 4:case 6:case 7:case 9:case 10:case 12:case 13:case 14:case 15:return function(t,e,n,r){const o=t*t,i=e-3*o/8,a=n-e*t/2+o*t/8,s=r-n*t/4+e*o/16-3*o*o/256,u=sa.computeRealRoots(1,2*i,i*i-4*s,-a*a);if(u.length>0){const e=-t/4,n=u[u.length-1];if(Math.abs(n)<P.EPSILON14){const t=ia.computeRealRoots(1,i,s);if(2===t.length){const n=t[0],r=t[1];let o;if(n>=0&&r>=0){const t=Math.sqrt(n),o=Math.sqrt(r);return[e-o,e-t,e+t,e+o]}if(n>=0&&r<0)return o=Math.sqrt(n),[e-o,e+o];if(n<0&&r>=0)return o=Math.sqrt(r),[e-o,e+o]}return[]}if(n>0){const t=Math.sqrt(n),r=(i+n-a/t)/2,o=(i+n+a/t)/2,s=ia.computeRealRoots(1,t,r),u=ia.computeRealRoots(1,-t,o);return 0!==s.length?(s[0]+=e,s[1]+=e,0!==u.length?(u[0]+=e,u[1]+=e,s[1]<=u[0]?[s[0],s[1],u[0],u[1]]:u[1]<=s[0]?[u[0],u[1],s[0],s[1]]:s[0]>=u[0]&&s[1]<=u[1]?[u[0],s[0],s[1],u[1]]:u[0]>=s[0]&&u[1]<=s[1]?[s[0],u[0],u[1],s[1]]:s[0]>u[0]&&s[0]<u[1]?[u[0],s[0],u[1],s[1]]:[s[0],u[0],s[1],u[1]]):s):0!==u.length?(u[0]+=e,u[1]+=e,u):[]}}return[]}(i,a,s,u);case 1:case 2:case 5:case 8:case 11:return function(t,e,n,r){const o=t*t,i=-2*e,a=n*t+e*e-4*r,s=o*r-n*e*t+n*n,u=sa.computeRealRoots(1,i,a,s);if(u.length>0){const i=u[0],a=e-i,s=a*a,c=t/2,l=a/2,f=s-4*r,h=s+4*Math.abs(r),p=o-4*i,d=o+4*Math.abs(i);let m,y,g,_,O,E;if(i<0||f*d<p*h){const e=Math.sqrt(p);m=e/2,y=0===e?0:(t*l-n)/e}else{const e=Math.sqrt(f);m=0===e?0:(t*l-n)/e,y=e/2}0===c&&0===m?(g=0,_=0):P.sign(c)===P.sign(m)?(g=c+m,_=i/g):(_=c-m,g=i/_),0===l&&0===y?(O=0,E=0):P.sign(l)===P.sign(y)?(O=l+y,E=r/O):(E=l-y,O=r/E);const w=ia.computeRealRoots(1,g,O),b=ia.computeRealRoots(1,_,E);if(0!==w.length)return 0!==b.length?w[1]<=b[0]?[w[0],w[1],b[0],b[1]]:b[1]<=w[0]?[b[0],b[1],w[0],w[1]]:w[0]>=b[0]&&w[1]<=b[1]?[b[0],w[0],w[1],b[1]]:b[0]>=w[0]&&b[1]<=w[1]?[w[0],b[0],b[1],w[1]]:w[0]>b[0]&&w[0]<b[1]?[b[0],w[0],b[1],w[1]]:[w[0],b[0],w[1],b[1]]:w;if(0!==b.length)return b}return[]}(i,a,s,u);default:return}},la.clone=function(t,e){if(w(t))return w(e)?(e.origin=q.clone(t.origin),e.direction=q.clone(t.direction),e):new la(t.origin,t.direction)},la.getPoint=function(t,e,n){return T.typeOf.object("ray",t),T.typeOf.number("t",e),w(n)||(n=new q),n=q.multiplyByScalar(t.direction,e,n),q.add(t.origin,n,n)};const fa={rayPlane:function(t,e,n){if(!w(t))throw new b("ray is required.");if(!w(e))throw new b("plane is required.");w(n)||(n=new q);const r=t.origin,o=t.direction,i=e.normal,a=q.dot(i,o);if(Math.abs(a)<P.EPSILON15)return;const s=(-e.distance-q.dot(i,r))/a;return s<0?void 0:(n=q.multiplyByScalar(o,s,n),q.add(r,n,n))}},ha=new q,pa=new q,da=new q,ma=new q,ya=new q;fa.rayTriangleParametric=function(t,e,n,r,o){if(!w(t))throw new b("ray is required.");if(!w(e))throw new b("p0 is required.");if(!w(n))throw new b("p1 is required.");if(!w(r))throw new b("p2 is required.");o=o??!1;const i=t.origin,a=t.direction,s=q.subtract(n,e,ha),u=q.subtract(r,e,pa),c=q.cross(a,u,da),l=q.dot(s,c);let f,h,p,d,m;if(o){if(l<P.EPSILON6)return;if(f=q.subtract(i,e,ma),p=q.dot(f,c),p<0||p>l)return;if(h=q.cross(f,s,ya),d=q.dot(a,h),d<0||p+d>l)return;m=q.dot(u,h)/l}else{if(Math.abs(l)<P.EPSILON6)return;const t=1/l;if(f=q.subtract(i,e,ma),p=q.dot(f,c)*t,p<0||p>1)return;if(h=q.cross(f,s,ya),d=q.dot(a,h)*t,d<0||p+d>1)return;m=q.dot(u,h)*t}return m},fa.rayTriangle=function(t,e,n,r,o,i){const a=fa.rayTriangleParametric(t,e,n,r,o);if(w(a)&&!(a<0))return w(i)||(i=new q),q.multiplyByScalar(t.direction,a,i),q.add(t.origin,i,i)};const ga=new la;fa.lineSegmentTriangle=function(t,e,n,r,o,i,a){if(!w(t))throw new b("v0 is required.");if(!w(e))throw new b("v1 is required.");if(!w(n))throw new b("p0 is required.");if(!w(r))throw new b("p1 is required.");if(!w(o))throw new b("p2 is required.");const s=ga;q.clone(t,s.origin),q.subtract(e,t,s.direction),q.normalize(s.direction,s.direction);const u=fa.rayTriangleParametric(s,n,r,o,i);if(!(!w(u)||u<0||u>q.distance(t,e)))return w(a)||(a=new q),q.multiplyByScalar(s.direction,u,a),q.add(s.origin,a,a)};const _a={root0:0,root1:0};function Oa(t,e,n){w(n)||(n=new mi);const r=t.origin,o=t.direction,i=e.center,a=e.radius*e.radius,s=q.subtract(r,i,da),u=function(t,e,n,r){const o=e*e-4*t*n;if(o<0)return;if(o>0){const n=1/(2*t),i=Math.sqrt(o),a=(-e+i)*n,s=(-e-i)*n;return a<s?(r.root0=a,r.root1=s):(r.root0=s,r.root1=a),r}const i=-e/(2*t);return 0!==i?(r.root0=r.root1=i,r):void 0}(q.dot(o,o),2*q.dot(o,s),q.magnitudeSquared(s)-a,_a);if(w(u))return n.start=u.root0,n.stop=u.root1,n}fa.raySphere=function(t,e,n){if(!w(t))throw new b("ray is required.");if(!w(e))throw new b("sphere is required.");if(w(n=Oa(t,e,n))&&!(n.stop<0))return n.start=Math.max(n.start,0),n};const Ea=new la;fa.lineSegmentSphere=function(t,e,n,r){if(!w(t))throw new b("p0 is required.");if(!w(e))throw new b("p1 is required.");if(!w(n))throw new b("sphere is required.");const o=Ea;q.clone(t,o.origin);const i=q.subtract(e,t,o.direction),a=q.magnitude(i);if(q.normalize(i,i),!(!w(r=Oa(o,n,r))||r.stop<0||r.start>a))return r.start=Math.max(r.start,0),r.stop=Math.min(r.stop,a),r};const wa=new q,ba=new q;fa.rayEllipsoid=function(t,e){if(!w(t))throw new b("ray is required.");if(!w(e))throw new b("ellipsoid is required.");const n=e.oneOverRadii,r=q.multiplyComponents(n,t.origin,wa),o=q.multiplyComponents(n,t.direction,ba),i=q.magnitudeSquared(r),a=q.dot(r,o);let s,u,c,l,f;if(i>1){if(a>=0)return;const t=a*a;if(s=i-1,u=q.magnitudeSquared(o),c=u*s,t<c)return;if(t>c){l=a*a-c,f=-a+Math.sqrt(l);const t=f/u,e=s/f;return t<e?new mi(t,e):{start:e,stop:t}}const e=Math.sqrt(s/u);return new mi(e,e)}return i<1?(s=i-1,u=q.magnitudeSquared(o),c=u*s,l=a*a-c,f=-a+Math.sqrt(l),new mi(0,f/u)):a<0?(u=q.magnitudeSquared(o),new mi(0,-a/u)):void 0};const Ta=new mi,Ra=new mi,Aa=new mi;function Sa(t,e,n,r,o){if(o.start=(n-t)/e,o.stop=(r-t)/e,o.stop<o.start){const t=o.stop;o.stop=o.start,o.start=t}return o}function xa(t,e,n){const r=t+e;return P.sign(t)!==P.sign(e)&&Math.abs(r/Math.max(Math.abs(t),Math.abs(e)))<n?0:r}fa.rayAxisAlignedBoundingBox=function(t,e,n){if(!w(t))throw new b("ray is required.");if(!w(e))throw new b("box is required.");w(n)||(n=new mi);const r=Sa(t.origin.x,t.direction.x,e.minimum.x,e.maximum.x,Ta),o=Sa(t.origin.y,t.direction.y,e.minimum.y,e.maximum.y,Ra),i=Sa(t.origin.z,t.direction.z,e.minimum.z,e.maximum.z,Aa);if(n.start=r.start>o.start?r.start:o.start,n.stop=r.stop<o.stop?r.stop:o.stop,!(r.start>o.stop||o.start>r.stop||n.start>i.stop||i.start>n.stop))return i.start>n.start&&(n.start=i.start),i.stop<n.stop&&(n.stop=i.stop),n},fa.quadraticVectorExpression=function(t,e,n,r,o){const i=r*r,a=o*o,s=(t[Q.COLUMN1ROW1]-t[Q.COLUMN2ROW2])*a,u=o*(r*xa(t[Q.COLUMN1ROW0],t[Q.COLUMN0ROW1],P.EPSILON15)+e.y),c=t[Q.COLUMN0ROW0]*i+t[Q.COLUMN2ROW2]*a+r*e.x+n,l=a*xa(t[Q.COLUMN2ROW1],t[Q.COLUMN1ROW2],P.EPSILON15),f=o*(r*xa(t[Q.COLUMN2ROW0],t[Q.COLUMN0ROW2])+e.z);let h;const p=[];if(0===f&&0===l){if(h=ia.computeRealRoots(s,u,c),0===h.length)return p;const t=h[0],e=Math.sqrt(Math.max(1-t*t,0));if(p.push(new q(r,o*t,o*-e)),p.push(new q(r,o*t,o*e)),2===h.length){const t=h[1],e=Math.sqrt(Math.max(1-t*t,0));p.push(new q(r,o*t,o*-e)),p.push(new q(r,o*t,o*e))}return p}const d=f*f,m=l*l,y=f*l,g=s*s+m,_=2*(u*s+y),O=2*c*s+u*u-m+d,E=2*(c*u-y),w=c*c-d;if(0===g&&0===_&&0===O&&0===E)return p;h=ca.computeRealRoots(g,_,O,E,w);const b=h.length;if(0===b)return p;for(let T=0;T<b;++T){const t=h[T],e=t*t,n=Math.max(1-e,0),i=Math.sqrt(n);let a;a=P.sign(s)===P.sign(c)?xa(s*e+c,u*t,P.EPSILON12):P.sign(c)===P.sign(u*t)?xa(s*e,u*t+c,P.EPSILON12):xa(s*e+u*t,c,P.EPSILON12);const d=a*xa(l*t,f,P.EPSILON15);d<0?p.push(new q(r,o*t,o*i)):d>0?p.push(new q(r,o*t,o*-i)):0!==i?(p.push(new q(r,o*t,o*-i)),p.push(new q(r,o*t,o*i)),++T):p.push(new q(r,o*t,o*i))}return p};const Ma=new q,Ia=new q,Na=new q,Pa=new q,Ca=new q,va=new Q,qa=new Q,ja=new Q,Ua=new Q,za=new Q,Da=new Q,La=new Q,Fa=new q,Ba=new q,ka=new me;fa.grazingAltitudeLocation=function(t,e){if(!w(t))throw new b("ray is required.");if(!w(e))throw new b("ellipsoid is required.");const n=t.origin,r=t.direction;if(!q.equals(n,q.ZERO)){const t=e.geodeticSurfaceNormal(n,Ma);if(q.dot(r,t)>=0)return n}const o=w(this.rayEllipsoid(t,e)),i=e.transformPositionToScaledSpace(r,Ma),a=q.normalize(i,i),s=q.mostOrthogonalAxis(i,Pa),u=q.normalize(q.cross(s,a,Ia),Ia),c=q.normalize(q.cross(a,u,Na),Na),l=va;l[0]=a.x,l[1]=a.y,l[2]=a.z,l[3]=u.x,l[4]=u.y,l[5]=u.z,l[6]=c.x,l[7]=c.y,l[8]=c.z;const f=Q.transpose(l,qa),h=Q.fromScale(e.radii,ja),p=Q.fromScale(e.oneOverRadii,Ua),d=za;d[0]=0,d[1]=-r.z,d[2]=r.y,d[3]=r.z,d[4]=0,d[5]=-r.x,d[6]=-r.y,d[7]=r.x,d[8]=0;const m=Q.multiply(Q.multiply(f,p,Da),d,Da),y=Q.multiply(Q.multiply(m,h,La),l,La),g=Q.multiplyByVector(m,n,Ca),_=fa.quadraticVectorExpression(y,q.negate(g,Ma),0,0,1);let O,E;const T=_.length;if(T>0){let t=q.clone(q.ZERO,Ba),i=Number.NEGATIVE_INFINITY;for(let e=0;e<T;++e){O=Q.multiplyByVector(h,Q.multiplyByVector(l,_[e],Fa),Fa);const o=q.normalize(q.subtract(O,n,Pa),Pa),a=q.dot(o,r);a>i&&(i=a,t=q.clone(O,t))}const a=e.cartesianToCartographic(t,ka);return i=P.clamp(i,0,1),E=q.magnitude(q.subtract(t,n,Pa))*Math.sqrt(1-i*i),E=o?-E:E,a.height=E,e.cartographicToCartesian(a,new q)}};const Wa=new q;function Ga(t,e){if(T.typeOf.object("normal",t),!P.equalsEpsilon(q.magnitude(t),1,P.EPSILON6))throw new b("normal must be normalized.");T.typeOf.number("distance",e),this.normal=q.clone(t),this.distance=e}fa.lineSegmentPlane=function(t,e,n,r){if(!w(t))throw new b("endPoint0 is required.");if(!w(e))throw new b("endPoint1 is required.");if(!w(n))throw new b("plane is required.");w(r)||(r=new q);const o=q.subtract(e,t,Wa),i=n.normal,a=q.dot(i,o);if(Math.abs(a)<P.EPSILON6)return;const s=q.dot(i,t),u=-(n.distance+s)/a;return u<0||u>1?void 0:(q.multiplyByScalar(o,u,r),q.add(t,r,r),r)},fa.trianglePlaneIntersection=function(t,e,n,r){if(!(w(t)&&w(e)&&w(n)&&w(r)))throw new b("p0, p1, p2, and plane are required.");const o=r.normal,i=r.distance,a=q.dot(o,t)+i<0,s=q.dot(o,e)+i<0,u=q.dot(o,n)+i<0;let c,l,f=0;if(f+=a?1:0,f+=s?1:0,f+=u?1:0,1!==f&&2!==f||(c=new q,l=new q),1===f){if(a)return fa.lineSegmentPlane(t,e,r,c),fa.lineSegmentPlane(t,n,r,l),{positions:[t,e,n,c,l],indices:[0,3,4,1,2,4,1,4,3]};if(s)return fa.lineSegmentPlane(e,n,r,c),fa.lineSegmentPlane(e,t,r,l),{positions:[t,e,n,c,l],indices:[1,3,4,2,0,4,2,4,3]};if(u)return fa.lineSegmentPlane(n,t,r,c),fa.lineSegmentPlane(n,e,r,l),{positions:[t,e,n,c,l],indices:[2,3,4,0,1,4,0,4,3]}}else if(2===f){if(!a)return fa.lineSegmentPlane(e,t,r,c),fa.lineSegmentPlane(n,t,r,l),{positions:[t,e,n,c,l],indices:[1,2,4,1,4,3,0,3,4]};if(!s)return fa.lineSegmentPlane(n,e,r,c),fa.lineSegmentPlane(t,e,r,l),{positions:[t,e,n,c,l],indices:[2,0,4,2,4,3,1,3,4]};if(!u)return fa.lineSegmentPlane(t,n,r,c),fa.lineSegmentPlane(e,n,r,l),{positions:[t,e,n,c,l],indices:[0,1,4,0,4,3,2,3,4]}}},Ga.fromPointNormal=function(t,e,n){if(T.typeOf.object("point",t),T.typeOf.object("normal",e),!P.equalsEpsilon(q.magnitude(e),1,P.EPSILON6))throw new b("normal must be normalized.");const r=-q.dot(e,t);return w(n)?(q.clone(e,n.normal),n.distance=r,n):new Ga(e,r)};const Va=new q;Ga.fromCartesian4=function(t,e){T.typeOf.object("coefficients",t);const n=q.fromCartesian4(t,Va),r=t.w;if(!P.equalsEpsilon(q.magnitude(n),1,P.EPSILON6))throw new b("normal must be normalized.");return w(e)?(q.clone(n,e.normal),e.distance=r,e):new Ga(n,r)},Ga.getPointDistance=function(t,e){return T.typeOf.object("plane",t),T.typeOf.object("point",e),q.dot(t.normal,e)+t.distance};const Xa=new q;Ga.projectPointOntoPlane=function(t,e,n){T.typeOf.object("plane",t),T.typeOf.object("point",e),w(n)||(n=new q);const r=Ga.getPointDistance(t,e),o=q.multiplyByScalar(t.normal,r,Xa);return q.subtract(e,o,n)};const Ha=new ht,$a=new k,Ya=new q;function Za(t,e){const n=new t,r=new t,o=new t;return function(i,a,s,u,c,l,f,h){const p=t.fromArray(c,i*e,n),d=t.fromArray(c,a*e,r),m=t.fromArray(c,s*e,o);t.multiplyByScalar(p,u.x,p),t.multiplyByScalar(d,u.y,d),t.multiplyByScalar(m,u.z,m);const y=t.add(p,d,p);t.add(y,m,y),h&&t.normalize(y,y),t.pack(y,l,f*e)}}function Qa(t){this.planes=t??[]}Ga.transform=function(t,e,n){T.typeOf.object("plane",t),T.typeOf.object("transform",e);const r=t.normal,o=t.distance,i=ht.inverseTranspose(e,Ha);let a=k.fromElements(r.x,r.y,r.z,o,$a);a=ht.multiplyByVector(i,a,a);const s=q.fromCartesian4(a,Ya);return a=k.divideByScalar(a,q.magnitude(s),a),Ga.fromCartesian4(a,n)},Ga.clone=function(t,e){return T.typeOf.object("plane",t),w(e)?(q.clone(t.normal,e.normal),e.distance=t.distance,e):new Ga(t.normal,t.distance)},Ga.equals=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.distance===e.distance&&q.equals(t.normal,e.normal)},Ga.ORIGIN_XY_PLANE=Object.freeze(new Ga(q.UNIT_Z,0)),Ga.ORIGIN_YZ_PLANE=Object.freeze(new Ga(q.UNIT_X,0)),Ga.ORIGIN_ZX_PLANE=Object.freeze(new Ga(q.UNIT_Y,0)),new Array(7),new Array(9),Za(k,4),Za(q,3),Za(ae,2),Ga.fromPointNormal(q.ZERO,q.UNIT_Y),P.EPSILON9,P.EPSILON6;const Ka=[new q,new q,new q];q.clone(q.UNIT_X,Ka[0]),q.clone(q.UNIT_Y,Ka[1]),q.clone(q.UNIT_Z,Ka[2]);const Ja=new q,ts=new q,es=new Ga(new q(1,0,0),0);function ns(t){t=t??Z.EMPTY_OBJECT,this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=t.near??1,this._near=this.near,this.far=t.far??5e8,this._far=this.far,this._cullingVolume=new Qa,this._orthographicMatrix=new ht}function rs(t){if(!(w(t.right)&&w(t.left)&&w(t.top)&&w(t.bottom)&&w(t.near)&&w(t.far)))throw new b("right, left, top, bottom, near, or far parameters are not set.");if(t.top!==t._top||t.bottom!==t._bottom||t.left!==t._left||t.right!==t._right||t.near!==t._near||t.far!==t._far){if(t.left>t.right)throw new b("right must be greater than left.");if(t.bottom>t.top)throw new b("top must be greater than bottom.");if(t.near<=0||t.near>t.far)throw new b("near must be greater than zero and less than far.");t._left=t.left,t._right=t.right,t._top=t.top,t._bottom=t.bottom,t._near=t.near,t._far=t.far,t._orthographicMatrix=ht.computeOrthographicOffCenter(t.left,t.right,t.bottom,t.top,t.near,t.far,t._orthographicMatrix)}}Qa.fromBoundingSphere=function(t,e){if(!w(t))throw new b("boundingSphere is required.");w(e)||(e=new Qa);const n=Ka.length,r=e.planes;r.length=2*n;const o=t.center,i=t.radius;let a=0;for(let s=0;s<n;++s){const t=Ka[s];let e=r[a],n=r[a+1];w(e)||(e=r[a]=new k),w(n)||(n=r[a+1]=new k),q.multiplyByScalar(t,-i,Ja),q.add(o,Ja,Ja),e.x=t.x,e.y=t.y,e.z=t.z,e.w=-q.dot(t,Ja),q.multiplyByScalar(t,i,Ja),q.add(o,Ja,Ja),n.x=-t.x,n.y=-t.y,n.z=-t.z,n.w=-q.dot(q.negate(t,ts),Ja),a+=2}return e},Qa.prototype.computeVisibility=function(t){if(!w(t))throw new b("boundingVolume is required.");const e=this.planes;let n=!1;for(let r=0,o=e.length;r<o;++r){const o=t.intersectPlane(Ga.fromCartesian4(e[r],es));if(o===Pe.OUTSIDE)return Pe.OUTSIDE;o===Pe.INTERSECTING&&(n=!0)}return n?Pe.INTERSECTING:Pe.INSIDE},Qa.prototype.computeVisibilityWithPlaneMask=function(t,e){if(!w(t))throw new b("boundingVolume is required.");if(!w(e))throw new b("parentPlaneMask is required.");if(e===Qa.MASK_OUTSIDE||e===Qa.MASK_INSIDE)return e;let n=Qa.MASK_INSIDE;const r=this.planes;for(let o=0,i=r.length;o<i;++o){const i=o<31?1<<o:0;if(o<31&&!(e&i))continue;const a=t.intersectPlane(Ga.fromCartesian4(r[o],es));if(a===Pe.OUTSIDE)return Qa.MASK_OUTSIDE;a===Pe.INTERSECTING&&(n|=i)}return n},Qa.MASK_OUTSIDE=4294967295,Qa.MASK_INSIDE=0,Qa.MASK_INDETERMINATE=2147483647,Object.defineProperties(ns.prototype,{projectionMatrix:{get:function(){return rs(this),this._orthographicMatrix}}});const os=new q,is=new q,as=new q,ss=new q;function us(t){t=t??Z.EMPTY_OBJECT,this._offCenterFrustum=new ns,this.width=t.width,this._width=void 0,this.aspectRatio=t.aspectRatio,this._aspectRatio=void 0,this.near=t.near??1,this._near=this.near,this.far=t.far??5e8,this._far=this.far}function cs(t){if(!(w(t.width)&&w(t.aspectRatio)&&w(t.near)&&w(t.far)))throw new b("width, aspectRatio, near, or far parameters are not set.");const e=t._offCenterFrustum;if(t.width!==t._width||t.aspectRatio!==t._aspectRatio||t.near!==t._near||t.far!==t._far){if(t.aspectRatio<0)throw new b("aspectRatio must be positive.");if(t.near<0||t.near>t.far)throw new b("near must be greater than zero and less than far.");t._aspectRatio=t.aspectRatio,t._width=t.width,t._near=t.near,t._far=t.far;const n=1/t.aspectRatio;e.right=.5*t.width,e.left=-e.right,e.top=n*e.right,e.bottom=-e.top,e.near=t.near,e.far=t.far}}ns.prototype.computeCullingVolume=function(t,e,n){if(!w(t))throw new b("position is required.");if(!w(e))throw new b("direction is required.");if(!w(n))throw new b("up is required.");const r=this._cullingVolume.planes,o=this.top,i=this.bottom,a=this.right,s=this.left,u=this.near,c=this.far,l=q.cross(e,n,os);q.normalize(l,l);const f=is;q.multiplyByScalar(e,u,f),q.add(t,f,f);const h=as;q.multiplyByScalar(l,s,h),q.add(f,h,h);let p=r[0];return w(p)||(p=r[0]=new k),p.x=l.x,p.y=l.y,p.z=l.z,p.w=-q.dot(l,h),q.multiplyByScalar(l,a,h),q.add(f,h,h),p=r[1],w(p)||(p=r[1]=new k),p.x=-l.x,p.y=-l.y,p.z=-l.z,p.w=-q.dot(q.negate(l,ss),h),q.multiplyByScalar(n,i,h),q.add(f,h,h),p=r[2],w(p)||(p=r[2]=new k),p.x=n.x,p.y=n.y,p.z=n.z,p.w=-q.dot(n,h),q.multiplyByScalar(n,o,h),q.add(f,h,h),p=r[3],w(p)||(p=r[3]=new k),p.x=-n.x,p.y=-n.y,p.z=-n.z,p.w=-q.dot(q.negate(n,ss),h),p=r[4],w(p)||(p=r[4]=new k),p.x=e.x,p.y=e.y,p.z=e.z,p.w=-q.dot(e,f),q.multiplyByScalar(e,c,h),q.add(t,h,h),p=r[5],w(p)||(p=r[5]=new k),p.x=-e.x,p.y=-e.y,p.z=-e.z,p.w=-q.dot(q.negate(e,ss),h),this._cullingVolume},ns.prototype.getPixelDimensions=function(t,e,n,r,o){if(rs(this),!w(t)||!w(e))throw new b("Both drawingBufferWidth and drawingBufferHeight are required.");if(t<=0)throw new b("drawingBufferWidth must be greater than zero.");if(e<=0)throw new b("drawingBufferHeight must be greater than zero.");if(!w(n))throw new b("distance is required.");if(!w(r))throw new b("pixelRatio is required.");if(r<=0)throw new b("pixelRatio must be greater than zero.");if(!w(o))throw new b("A result object is required.");const i=r*(this.right-this.left)/t,a=r*(this.top-this.bottom)/e;return o.x=i,o.y=a,o},ns.prototype.clone=function(t){return w(t)||(t=new ns),t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t._left=void 0,t._right=void 0,t._top=void 0,t._bottom=void 0,t._near=void 0,t._far=void 0,t},ns.prototype.equals=function(t){return w(t)&&t instanceof ns&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far},ns.prototype.equalsEpsilon=function(t,e,n){return t===this||w(t)&&t instanceof ns&&P.equalsEpsilon(this.right,t.right,e,n)&&P.equalsEpsilon(this.left,t.left,e,n)&&P.equalsEpsilon(this.top,t.top,e,n)&&P.equalsEpsilon(this.bottom,t.bottom,e,n)&&P.equalsEpsilon(this.near,t.near,e,n)&&P.equalsEpsilon(this.far,t.far,e,n)},us.packedLength=4,us.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.width,e[n++]=t.aspectRatio,e[n++]=t.near,e[n]=t.far,e},us.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new us),n.width=t[e++],n.aspectRatio=t[e++],n.near=t[e++],n.far=t[e],n},Object.defineProperties(us.prototype,{projectionMatrix:{get:function(){return cs(this),this._offCenterFrustum.projectionMatrix}},offCenterFrustum:{get:function(){return cs(this),this._offCenterFrustum}}}),us.prototype.computeCullingVolume=function(t,e,n){return cs(this),this._offCenterFrustum.computeCullingVolume(t,e,n)},us.prototype.getPixelDimensions=function(t,e,n,r,o){return cs(this),this._offCenterFrustum.getPixelDimensions(t,e,n,r,o)},us.prototype.clone=function(t){return w(t)||(t=new us),t.aspectRatio=this.aspectRatio,t.width=this.width,t.near=this.near,t.far=this.far,t._aspectRatio=void 0,t._width=void 0,t._near=void 0,t._far=void 0,this._offCenterFrustum.clone(t._offCenterFrustum),t},us.prototype.equals=function(t){return!!(w(t)&&t instanceof us)&&(cs(this),cs(t),this.width===t.width&&this.aspectRatio===t.aspectRatio&&this._offCenterFrustum.equals(t._offCenterFrustum))},us.prototype.equalsEpsilon=function(t,e,n){return!!(w(t)&&t instanceof us)&&(cs(this),cs(t),P.equalsEpsilon(this.width,t.width,e,n)&&P.equalsEpsilon(this.aspectRatio,t.aspectRatio,e,n)&&this._offCenterFrustum.equalsEpsilon(t._offCenterFrustum,e,n))};const ls={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(t){return t===ls.SCENE3D?1:t!==ls.MORPHING?0:void 0}};var fs=Object.freeze(ls);function hs(t,e,n){this.minimum=q.clone(t??q.ZERO),this.maximum=q.clone(e??q.ZERO),n=w(n)?q.clone(n):q.midpoint(this.minimum,this.maximum,new q),this.center=n}hs.fromCorners=function(t,e,n){return T.defined("minimum",t),T.defined("maximum",e),w(n)||(n=new hs),n.minimum=q.clone(t,n.minimum),n.maximum=q.clone(e,n.maximum),n.center=q.midpoint(t,e,n.center),n},hs.fromPoints=function(t,e){if(w(e)||(e=new hs),!w(t)||0===t.length)return e.minimum=q.clone(q.ZERO,e.minimum),e.maximum=q.clone(q.ZERO,e.maximum),e.center=q.clone(q.ZERO,e.center),e;let n=t[0].x,r=t[0].y,o=t[0].z,i=t[0].x,a=t[0].y,s=t[0].z;const u=t.length;for(let f=1;f<u;f++){const e=t[f],u=e.x,c=e.y,l=e.z;n=Math.min(u,n),i=Math.max(u,i),r=Math.min(c,r),a=Math.max(c,a),o=Math.min(l,o),s=Math.max(l,s)}const c=e.minimum;c.x=n,c.y=r,c.z=o;const l=e.maximum;return l.x=i,l.y=a,l.z=s,e.center=q.midpoint(c,l,e.center),e},hs.clone=function(t,e){if(w(t))return w(e)?(e.minimum=q.clone(t.minimum,e.minimum),e.maximum=q.clone(t.maximum,e.maximum),e.center=q.clone(t.center,e.center),e):new hs(t.minimum,t.maximum,t.center)},hs.equals=function(t,e){return t===e||w(t)&&w(e)&&q.equals(t.center,e.center)&&q.equals(t.minimum,e.minimum)&&q.equals(t.maximum,e.maximum)};let ps=new q;hs.intersectPlane=function(t,e){T.defined("box",t),T.defined("plane",e),ps=q.subtract(t.maximum,t.minimum,ps);const n=q.multiplyByScalar(ps,.5,ps),r=e.normal,o=n.x*Math.abs(r.x)+n.y*Math.abs(r.y)+n.z*Math.abs(r.z),i=q.dot(t.center,r)+e.distance;return i-o>0?Pe.INSIDE:i+o<0?Pe.OUTSIDE:Pe.INTERSECTING},hs.intersectAxisAlignedBoundingBox=function(t,e){return T.defined("box",t),T.defined("other",e),t.minimum.x<=e.maximum.x&&t.maximum.x>=e.minimum.x&&t.minimum.y<=e.maximum.y&&t.maximum.y>=e.minimum.y&&t.minimum.z<=e.maximum.z&&t.maximum.z>=e.minimum.z},hs.prototype.clone=function(t){return hs.clone(this,t)},hs.prototype.intersectPlane=function(t){return hs.intersectPlane(this,t)},hs.prototype.intersectAxisAlignedBoundingBox=function(t){return hs.intersectAxisAlignedBoundingBox(this,t)},hs.prototype.equals=function(t){return hs.equals(this,t)};const ds=new k;function ms(t,e){if(T.defined("origin",t),!w(t=(e=e??Ee.default).scaleToGeodeticSurface(t)))throw new b("origin must not be at the center of the ellipsoid.");const n=lo.eastNorthUpToFixedFrame(t,e);this._ellipsoid=e,this._origin=t,this._xAxis=q.fromCartesian4(ht.getColumn(n,0,ds)),this._yAxis=q.fromCartesian4(ht.getColumn(n,1,ds));const r=q.fromCartesian4(ht.getColumn(n,2,ds));this._plane=Ga.fromPointNormal(t,r)}Object.defineProperties(ms.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});const ys=new hs;ms.fromPoints=function(t,e){return T.defined("cartesians",t),new ms(hs.fromPoints(t,ys).center,e)};const gs=new la,_s=new q;ms.prototype.projectPointOntoPlane=function(t,e){T.defined("cartesian",t);const n=gs;n.origin=t,q.normalize(t,n.direction);let r=fa.rayPlane(n,this._plane,_s);if(w(r)||(q.negate(n.direction,n.direction),r=fa.rayPlane(n,this._plane,_s)),w(r)){const t=q.subtract(r,this._origin,r),n=q.dot(this._xAxis,t),o=q.dot(this._yAxis,t);return w(e)?(e.x=n,e.y=o,e):new ae(n,o)}},ms.prototype.projectPointsOntoPlane=function(t,e){T.defined("cartesians",t),w(e)||(e=[]);let n=0;const r=t.length;for(let o=0;o<r;o++){const r=this.projectPointOntoPlane(t[o],e[n]);w(r)&&(e[n]=r,n++)}return e.length=n,e},ms.prototype.projectPointToNearestOnPlane=function(t,e){T.defined("cartesian",t),w(e)||(e=new ae);const n=gs;n.origin=t,q.clone(this._plane.normal,n.direction);let r=fa.rayPlane(n,this._plane,_s);w(r)||(q.negate(n.direction,n.direction),r=fa.rayPlane(n,this._plane,_s));const o=q.subtract(r,this._origin,r),i=q.dot(this._xAxis,o),a=q.dot(this._yAxis,o);return e.x=i,e.y=a,e},ms.prototype.projectPointsToNearestOnPlane=function(t,e){T.defined("cartesians",t),w(e)||(e=[]);const n=t.length;e.length=n;for(let r=0;r<n;r++)e[r]=this.projectPointToNearestOnPlane(t[r],e[r]);return e};const Os=new q;function Es(t,e){this.center=q.clone(t??q.ZERO),this.halfAxes=Q.clone(e??Q.ZERO)}ms.prototype.projectPointOntoEllipsoid=function(t,e){T.defined("cartesian",t),w(e)||(e=new q);const n=this._ellipsoid,r=this._origin,o=this._xAxis,i=this._yAxis,a=Os;return q.multiplyByScalar(o,t.x,a),e=q.add(r,a,e),q.multiplyByScalar(i,t.y,a),q.add(e,a,e),n.scaleToGeocentricSurface(e,e),e},ms.prototype.projectPointsOntoEllipsoid=function(t,e){T.defined("cartesians",t);const n=t.length;w(e)?e.length=n:e=new Array(n);for(let r=0;r<n;++r)e[r]=this.projectPointOntoEllipsoid(t[r],e[r]);return e},Es.packedLength=q.packedLength+Q.packedLength,Es.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,q.pack(t.center,e,n),Q.pack(t.halfAxes,e,n+q.packedLength),e},Es.unpack=function(t,e,n){return T.defined("array",t),e=e??0,w(n)||(n=new Es),q.unpack(t,e,n.center),Q.unpack(t,e+q.packedLength,n.halfAxes),n};const ws=new q,bs=new q,Ts=new q,Rs=new q,As=new q,Ss=new q,xs=new Q,Ms={unitary:new Q,diagonal:new Q};Es.fromPoints=function(t,e){if(w(e)||(e=new Es),!w(t)||0===t.length)return e.halfAxes=Q.ZERO,e.center=q.ZERO,e;let n;const r=t.length,o=q.clone(t[0],ws);for(n=1;n<r;n++)q.add(o,t[n],o);const i=1/r;q.multiplyByScalar(o,i,o);let a,s=0,u=0,c=0,l=0,f=0,h=0;for(n=0;n<r;n++)a=q.subtract(t[n],o,bs),s+=a.x*a.x,u+=a.x*a.y,c+=a.x*a.z,l+=a.y*a.y,f+=a.y*a.z,h+=a.z*a.z;s*=i,u*=i,c*=i,l*=i,f*=i,h*=i;const p=xs;p[0]=s,p[1]=u,p[2]=c,p[3]=u,p[4]=l,p[5]=f,p[6]=c,p[7]=f,p[8]=h;const d=Q.computeEigenDecomposition(p,Ms),m=Q.clone(d.unitary,e.halfAxes);let y=Q.getColumn(m,0,Rs),g=Q.getColumn(m,1,As),_=Q.getColumn(m,2,Ss),O=-Number.MAX_VALUE,E=-Number.MAX_VALUE,b=-Number.MAX_VALUE,T=Number.MAX_VALUE,R=Number.MAX_VALUE,A=Number.MAX_VALUE;for(n=0;n<r;n++)a=t[n],O=Math.max(q.dot(y,a),O),E=Math.max(q.dot(g,a),E),b=Math.max(q.dot(_,a),b),T=Math.min(q.dot(y,a),T),R=Math.min(q.dot(g,a),R),A=Math.min(q.dot(_,a),A);y=q.multiplyByScalar(y,.5*(T+O),y),g=q.multiplyByScalar(g,.5*(R+E),g),_=q.multiplyByScalar(_,.5*(A+b),_);const S=q.add(y,g,e.center);q.add(S,_,S);const x=Ts;return x.x=O-T,x.y=E-R,x.z=b-A,q.multiplyByScalar(x,.5,x),Q.multiplyByScale(e.halfAxes,x,e.halfAxes),e};const Is=new q,Ns=new q;function Ps(t,e,n,r,o,i,a,s,u,c,l){if(!(w(o)&&w(i)&&w(a)&&w(s)&&w(u)&&w(c)))throw new b("all extents (minimum/maximum X/Y/Z) are required.");w(l)||(l=new Es);const f=l.halfAxes;Q.setColumn(f,0,e,f),Q.setColumn(f,1,n,f),Q.setColumn(f,2,r,f);let h=Is;h.x=(o+i)/2,h.y=(a+s)/2,h.z=(u+c)/2;const p=Ns;p.x=(i-o)/2,p.y=(s-a)/2,p.z=(c-u)/2;const d=l.center;return h=Q.multiplyByVector(f,h,h),q.add(t,h,d),Q.multiplyByScale(f,p,f),l}const Cs=new me,vs=new q,qs=new me,js=new me,Us=new me,zs=new me,Ds=new me,Ls=new q,Fs=new q,Bs=new q,ks=new q,Ws=new q,Gs=new ae,Vs=new ae,Xs=new ae,Hs=new ae,$s=new ae,Ys=new q,Zs=new q,Qs=new q,Ks=new q,Js=new ae,tu=new q,eu=new q,nu=new q,ru=new Ga(q.UNIT_X,0);Es.fromRectangle=function(t,e,n,r,o){if(!w(t))throw new b("rectangle is required");if(t.width<0||t.width>P.TWO_PI)throw new b("Rectangle width must be between 0 and 2 * pi");if(t.height<0||t.height>P.PI)throw new b("Rectangle height must be between 0 and pi");if(w(r)&&!P.equalsEpsilon(r.radii.x,r.radii.y,P.EPSILON15))throw new b("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");let i,a,s,u,c,l,f;if(e=e??0,n=n??0,r=r??Ee.default,t.width<=P.PI){const h=Zo.center(t,Cs),p=new ms(r.cartographicToCartesian(h,vs),r);f=p.plane;const d=h.longitude,m=t.south<0&&t.north>0?0:h.latitude,y=me.fromRadians(d,t.north,n,qs),g=me.fromRadians(t.west,t.north,n,js),_=me.fromRadians(t.west,m,n,Us),O=me.fromRadians(t.west,t.south,n,zs),E=me.fromRadians(d,t.south,n,Ds),w=r.cartographicToCartesian(y,Ls);let b=r.cartographicToCartesian(g,Fs);const T=r.cartographicToCartesian(_,Bs);let R=r.cartographicToCartesian(O,ks);const A=r.cartographicToCartesian(E,Ws),S=p.projectPointToNearestOnPlane(w,Gs),x=p.projectPointToNearestOnPlane(b,Vs),M=p.projectPointToNearestOnPlane(T,Xs),I=p.projectPointToNearestOnPlane(R,Hs),N=p.projectPointToNearestOnPlane(A,$s);return i=Math.min(x.x,M.x,I.x),a=-i,u=Math.max(x.y,S.y),s=Math.min(I.y,N.y),g.height=O.height=e,b=r.cartographicToCartesian(g,Fs),R=r.cartographicToCartesian(O,ks),c=Math.min(Ga.getPointDistance(f,b),Ga.getPointDistance(f,R)),l=n,Ps(p.origin,p.xAxis,p.yAxis,p.zAxis,i,a,s,u,c,l,o)}const h=t.south>0,p=t.north<0,d=h?t.south:p?t.north:0,m=Zo.center(t,Cs).longitude,y=q.fromRadians(m,d,n,r,Ys);y.z=0;const g=Math.abs(y.x)<P.EPSILON10&&Math.abs(y.y)<P.EPSILON10?q.UNIT_X:q.normalize(y,Zs),_=q.UNIT_Z,O=q.cross(g,_,Qs);f=Ga.fromPointNormal(y,g,ru);const E=q.fromRadians(m+P.PI_OVER_TWO,d,n,r,Ks);a=q.dot(Ga.projectPointOntoPlane(f,E,Js),O),i=-a,u=q.fromRadians(0,t.north,p?e:n,r,tu).z,s=q.fromRadians(0,t.south,h?e:n,r,eu).z;const T=q.fromRadians(t.east,d,n,r,nu);return c=Ga.getPointDistance(f,T),l=0,Ps(y,O,_,g,i,a,s,u,c,l,o)},Es.fromTransformation=function(t,e){return T.typeOf.object("transformation",t),w(e)||(e=new Es),e.center=ht.getTranslation(t,e.center),e.halfAxes=ht.getMatrix3(t,e.halfAxes),e.halfAxes=Q.multiplyByScalar(e.halfAxes,.5,e.halfAxes),e},Es.clone=function(t,e){if(w(t))return w(e)?(q.clone(t.center,e.center),Q.clone(t.halfAxes,e.halfAxes),e):new Es(t.center,t.halfAxes)},Es.intersectPlane=function(t,e){if(!w(t))throw new b("box is required.");if(!w(e))throw new b("plane is required.");const n=t.center,r=e.normal,o=t.halfAxes,i=r.x,a=r.y,s=r.z,u=Math.abs(i*o[Q.COLUMN0ROW0]+a*o[Q.COLUMN0ROW1]+s*o[Q.COLUMN0ROW2])+Math.abs(i*o[Q.COLUMN1ROW0]+a*o[Q.COLUMN1ROW1]+s*o[Q.COLUMN1ROW2])+Math.abs(i*o[Q.COLUMN2ROW0]+a*o[Q.COLUMN2ROW1]+s*o[Q.COLUMN2ROW2]),c=q.dot(r,n)+e.distance;return c<=-u?Pe.OUTSIDE:c>=u?Pe.INSIDE:Pe.INTERSECTING};const ou=new q,iu=new q,au=new q,su=new q,uu=new q,cu=new q;Es.distanceSquaredTo=function(t,e){if(!w(t))throw new b("box is required.");if(!w(e))throw new b("cartesian is required.");const n=q.subtract(e,t.center,Is),r=t.halfAxes;let o=Q.getColumn(r,0,ou),i=Q.getColumn(r,1,iu),a=Q.getColumn(r,2,au);const s=q.magnitude(o),u=q.magnitude(i),c=q.magnitude(a);let l=!0,f=!0,h=!0;s>0?q.divideByScalar(o,s,o):l=!1,u>0?q.divideByScalar(i,u,i):f=!1,c>0?q.divideByScalar(a,c,a):h=!1;const p=!l+!f+!h;let d,m,y;if(1===p){let t=o;d=i,m=a,f?h||(t=a,m=o):(t=i,d=o),y=q.cross(d,m,uu),t===o?o=y:t===i?i=y:t===a&&(a=y)}else if(2===p){d=o,f?d=i:h&&(d=a);let t=q.UNIT_Y;t.equalsEpsilon(d,P.EPSILON3)&&(t=q.UNIT_X),m=q.cross(d,t,su),q.normalize(m,m),y=q.cross(d,m,uu),q.normalize(y,y),d===o?(i=m,a=y):d===i?(a=m,o=y):d===a&&(o=m,i=y)}else 3===p&&(o=q.UNIT_X,i=q.UNIT_Y,a=q.UNIT_Z);const g=cu;g.x=q.dot(n,o),g.y=q.dot(n,i),g.z=q.dot(n,a);let _,O=0;return g.x<-s?(_=g.x+s,O+=_*_):g.x>s&&(_=g.x-s,O+=_*_),g.y<-u?(_=g.y+u,O+=_*_):g.y>u&&(_=g.y-u,O+=_*_),g.z<-c?(_=g.z+c,O+=_*_):g.z>c&&(_=g.z-c,O+=_*_),O};const lu=new q,fu=new q;Es.computePlaneDistances=function(t,e,n,r){if(!w(t))throw new b("box is required.");if(!w(e))throw new b("position is required.");if(!w(n))throw new b("direction is required.");w(r)||(r=new mi);let o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const a=t.center,s=t.halfAxes,u=Q.getColumn(s,0,ou),c=Q.getColumn(s,1,iu),l=Q.getColumn(s,2,au),f=q.add(u,c,lu);q.add(f,l,f),q.add(f,a,f);const h=q.subtract(f,e,fu);let p=q.dot(n,h);return o=Math.min(p,o),i=Math.max(p,i),q.add(a,u,f),q.add(f,c,f),q.subtract(f,l,f),q.subtract(f,e,h),p=q.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),q.add(a,u,f),q.subtract(f,c,f),q.add(f,l,f),q.subtract(f,e,h),p=q.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),q.add(a,u,f),q.subtract(f,c,f),q.subtract(f,l,f),q.subtract(f,e,h),p=q.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),q.subtract(a,u,f),q.add(f,c,f),q.add(f,l,f),q.subtract(f,e,h),p=q.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),q.subtract(a,u,f),q.add(f,c,f),q.subtract(f,l,f),q.subtract(f,e,h),p=q.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),q.subtract(a,u,f),q.subtract(f,c,f),q.add(f,l,f),q.subtract(f,e,h),p=q.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),q.subtract(a,u,f),q.subtract(f,c,f),q.subtract(f,l,f),q.subtract(f,e,h),p=q.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),r.start=o,r.stop=i,r};const hu=new q,pu=new q,du=new q;Es.computeCorners=function(t,e){T.typeOf.object("box",t),w(e)||(e=[new q,new q,new q,new q,new q,new q,new q,new q]);const n=t.center,r=t.halfAxes,o=Q.getColumn(r,0,hu),i=Q.getColumn(r,1,pu),a=Q.getColumn(r,2,du);return q.clone(n,e[0]),q.subtract(e[0],o,e[0]),q.subtract(e[0],i,e[0]),q.subtract(e[0],a,e[0]),q.clone(n,e[1]),q.subtract(e[1],o,e[1]),q.subtract(e[1],i,e[1]),q.add(e[1],a,e[1]),q.clone(n,e[2]),q.subtract(e[2],o,e[2]),q.add(e[2],i,e[2]),q.subtract(e[2],a,e[2]),q.clone(n,e[3]),q.subtract(e[3],o,e[3]),q.add(e[3],i,e[3]),q.add(e[3],a,e[3]),q.clone(n,e[4]),q.add(e[4],o,e[4]),q.subtract(e[4],i,e[4]),q.subtract(e[4],a,e[4]),q.clone(n,e[5]),q.add(e[5],o,e[5]),q.subtract(e[5],i,e[5]),q.add(e[5],a,e[5]),q.clone(n,e[6]),q.add(e[6],o,e[6]),q.add(e[6],i,e[6]),q.subtract(e[6],a,e[6]),q.clone(n,e[7]),q.add(e[7],o,e[7]),q.add(e[7],i,e[7]),q.add(e[7],a,e[7]),e};const mu=new Q;Es.computeTransformation=function(t,e){T.typeOf.object("box",t),w(e)||(e=new ht);const n=t.center,r=Q.multiplyByUniformScale(t.halfAxes,2,mu);return ht.fromRotationTranslation(r,n,e)};const yu=new yi;function gu(t){this._ellipsoid=t??Ee.WGS84,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}function _u(t,e,n,r,o,i,a){const s=(u=t)*(c=n)*(4+u*(4-3*c))/16;var u,c;return(1-s)*t*e*(r+s*o*(a+s*i*(2*a*a-1)))}Es.isOccluded=function(t,e){if(!w(t))throw new b("box is required.");if(!w(e))throw new b("occluder is required.");const n=yi.fromOrientedBoundingBox(t,yu);return!e.isBoundingSphereVisible(n)},Es.prototype.intersectPlane=function(t){return Es.intersectPlane(this,t)},Es.prototype.distanceSquaredTo=function(t){return Es.distanceSquaredTo(this,t)},Es.prototype.computePlaneDistances=function(t,e,n){return Es.computePlaneDistances(this,t,e,n)},Es.prototype.computeCorners=function(t){return Es.computeCorners(this,t)},Es.prototype.computeTransformation=function(t){return Es.computeTransformation(this,t)},Es.prototype.isOccluded=function(t){return Es.isOccluded(this,t)},Es.equals=function(t,e){return t===e||w(t)&&w(e)&&q.equals(t.center,e.center)&&Q.equals(t.halfAxes,e.halfAxes)},Es.prototype.clone=function(t){return Es.clone(this,t)},Es.prototype.equals=function(t){return Es.equals(this,t)},Object.defineProperties(gu.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),gu.mercatorAngleToGeodeticLatitude=function(t){return P.PI_OVER_TWO-2*Math.atan(Math.exp(-t))},gu.geodeticLatitudeToMercatorAngle=function(t){t>gu.MaximumLatitude?t=gu.MaximumLatitude:t<-gu.MaximumLatitude&&(t=-gu.MaximumLatitude);const e=Math.sin(t);return.5*Math.log((1+e)/(1-e))},gu.MaximumLatitude=gu.mercatorAngleToGeodeticLatitude(Math.PI),gu.prototype.project=function(t,e){const n=this._semimajorAxis,r=t.longitude*n,o=gu.geodeticLatitudeToMercatorAngle(t.latitude)*n,i=t.height;return w(e)?(e.x=r,e.y=o,e.z=i,e):new q(r,o,i)},gu.prototype.unproject=function(t,e){if(!w(t))throw new b("cartesian is required");const n=this._oneOverSemimajorAxis,r=t.x*n,o=gu.mercatorAngleToGeodeticLatitude(t.y*n),i=t.z;return w(e)?(e.longitude=r,e.latitude=o,e.height=i,e):new me(r,o,i)},P.EPSILON10;const Ou=new q,Eu=new q;function wu(t,e,n,r){const o=q.normalize(r.cartographicToCartesian(e,Eu),Ou),i=q.normalize(r.cartographicToCartesian(n,Eu),Eu);T.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(q.angleBetween(o,i))-Math.PI),.0125),function(t,e,n,r,o,i,a){const s=(e-n)/e,u=i-r,c=Math.atan((1-s)*Math.tan(o)),l=Math.atan((1-s)*Math.tan(a)),f=Math.cos(c),h=Math.sin(c),p=Math.cos(l),d=Math.sin(l),m=f*p,y=f*d,g=h*d,_=h*p;let O,E,w,b,T,R=u,A=P.TWO_PI,S=Math.cos(R),x=Math.sin(R);do{S=Math.cos(R),x=Math.sin(R);const t=y-_*S;let e;w=Math.sqrt(p*p*x*x+t*t),E=g+m*S,O=Math.atan2(w,E),0===w?(e=0,b=1):(e=m*x/w,b=1-e*e),A=R,T=E-2*g/b,isFinite(T)||(T=0),R=u+_u(s,e,b,O,w,E,T)}while(Math.abs(R-A)>P.EPSILON12);const M=b*(e*e-n*n)/(n*n),I=M*(256+M*(M*(74-47*M)-128))/1024,N=T*T,C=n*(1+M*(4096+M*(M*(320-175*M)-768))/16384)*(O-I*w*(T+I*(E*(2*N-1)-I*T*(4*w*w-3)*(4*N-3)/6)/4)),v=Math.atan2(p*x,y-_*S),q=Math.atan2(f*x,y*S-_);t._distance=C,t._startHeading=v,t._endHeading=q,t._uSquared=M}(t,r.maximumRadius,r.minimumRadius,e.longitude,e.latitude,n.longitude,n.latitude),t._start=me.clone(e,t._start),t._end=me.clone(n,t._end),t._start.height=0,t._end.height=0,function(t){const e=t._uSquared,n=t._ellipsoid.maximumRadius,r=t._ellipsoid.minimumRadius,o=(n-r)/n,i=Math.cos(t._startHeading),a=Math.sin(t._startHeading),s=(1-o)*Math.tan(t._start.latitude),u=1/Math.sqrt(1+s*s),c=u*s,l=Math.atan2(s,i),f=u*a,h=f*f,p=1-h,d=Math.sqrt(p),m=e/4,y=m*m,g=y*m,_=y*y,O=1+m-3*y/4+5*g/4-175*_/64,E=1-m+15*y/8-35*g/8,w=1-3*m+35*y/4,b=1-5*m,T=O*l-E*Math.sin(2*l)*m/2-w*Math.sin(4*l)*y/16-b*Math.sin(6*l)*g/48-5*Math.sin(8*l)*_/512,R=t._constants;R.a=n,R.b=r,R.f=o,R.cosineHeading=i,R.sineHeading=a,R.tanU=s,R.cosineU=u,R.sineU=c,R.sigma=l,R.sineAlpha=f,R.sineSquaredAlpha=h,R.cosineSquaredAlpha=p,R.cosineAlpha=d,R.u2Over4=m,R.u4Over16=y,R.u6Over64=g,R.u8Over256=_,R.a0=O,R.a1=E,R.a2=w,R.a3=b,R.distanceRatio=T}(t)}function bu(t,e,n){const r=n??Ee.default;this._ellipsoid=r,this._start=new me,this._end=new me,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,w(t)&&w(e)&&wu(this,t,e,r)}function Tu(t,e,n){if(0===t)return e*n;const r=t*t,o=r*r,i=o*r,a=i*r,s=a*r,u=s*r,c=n;return e*((1-r/4-3*o/64-5*i/256-175*a/16384-441*s/65536-4851*u/1048576)*c-(3*r/8+3*o/32+45*i/1024+105*a/4096+2205*s/131072+6237*u/524288)*Math.sin(2*c)+(15*o/256+45*i/1024+525*a/16384+1575*s/65536+155925*u/8388608)*Math.sin(4*c)-(35*i/3072+175*a/12288+3675*s/262144+13475*u/1048576)*Math.sin(6*c)+(315*a/131072+2205*s/524288+43659*u/8388608)*Math.sin(8*c)-(693*s/1310720+6237*u/5242880)*Math.sin(10*c)+1001*u/8388608*Math.sin(12*c))}function Ru(t,e){if(0===t)return Math.log(Math.tan(.5*(P.PI_OVER_TWO+e)));const n=t*Math.sin(e);return Math.log(Math.tan(.5*(P.PI_OVER_TWO+e)))-t/2*Math.log((1+n)/(1-n))}Object.defineProperties(bu.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return T.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return T.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return T.defined("distance",this._distance),this._endHeading}}}),bu.prototype.setEndPoints=function(t,e){T.defined("start",t),T.defined("end",e),wu(this,t,e,this._ellipsoid)},bu.prototype.interpolateUsingFraction=function(t,e){return this.interpolateUsingSurfaceDistance(this._distance*t,e)},bu.prototype.interpolateUsingSurfaceDistance=function(t,e){T.defined("distance",this._distance);const n=this._constants,r=n.distanceRatio+t/n.b,o=Math.cos(2*r),i=Math.cos(4*r),a=Math.cos(6*r),s=Math.sin(2*r),u=Math.sin(4*r),c=Math.sin(6*r),l=Math.sin(8*r),f=r*r,h=r*f,p=n.u8Over256,d=n.u2Over4,m=n.u6Over64,y=n.u4Over16;let g=2*h*p*o/3+r*(1-d+7*y/4-15*m/4+579*p/64-(y-15*m/4+187*p/16)*o-(5*m/4-115*p/16)*i-29*p*a/16)+(d/2-y+71*m/32-85*p/16)*s+(5*y/16-5*m/4+383*p/96)*u-f*((m-11*p/2)*s+5*p*u/2)+(29*m/96-29*p/16)*c+539*p*l/1536;const _=Math.asin(Math.sin(g)*n.cosineAlpha),O=Math.atan(n.a/n.b*Math.tan(_));g-=n.sigma;const E=Math.cos(2*n.sigma+g),b=Math.sin(g),R=Math.cos(g),A=n.cosineU*R,S=n.sineU*b,x=Math.atan2(b*n.sineHeading,A-S*n.cosineHeading)-_u(n.f,n.sineAlpha,n.cosineSquaredAlpha,g,b,R,E);return w(e)?(e.longitude=this._start.longitude+x,e.latitude=O,e.height=0,e):new me(this._start.longitude+x,O,0)};const Au=new q,Su=new q;function xu(t,e,n,r){const o=q.normalize(r.cartographicToCartesian(e,Su),Au),i=q.normalize(r.cartographicToCartesian(n,Su),Su);T.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(q.angleBetween(o,i))-Math.PI),.0125);const a=r.maximumRadius,s=r.minimumRadius,u=a*a,c=s*s;t._ellipticitySquared=(u-c)/u,t._ellipticity=Math.sqrt(t._ellipticitySquared),t._start=me.clone(e,t._start),t._start.height=0,t._end=me.clone(n,t._end),t._end.height=0,t._heading=function(t,e,n,r,o){const i=Ru(t._ellipticity,n),a=Ru(t._ellipticity,o);return Math.atan2(P.negativePiToPi(r-e),a-i)}(t,e.longitude,e.latitude,n.longitude,n.latitude),t._distance=function(t,e,n,r,o,i,a){const s=t._heading,u=i-r;let c=0;if(P.equalsEpsilon(Math.abs(s),P.PI_OVER_TWO,P.EPSILON8))if(e===n)c=e*Math.cos(o)*P.negativePiToPi(u);else{const n=Math.sin(o);c=e*Math.cos(o)*P.negativePiToPi(u)/Math.sqrt(1-t._ellipticitySquared*n*n)}else{const n=Tu(t._ellipticity,e,o);c=(Tu(t._ellipticity,e,a)-n)/Math.cos(s)}return Math.abs(c)}(t,r.maximumRadius,r.minimumRadius,e.longitude,e.latitude,n.longitude,n.latitude)}function Mu(t,e,n,r,o,i){if(0===n)return me.clone(t,i);const a=o*o;let s,u,c;if(Math.abs(P.PI_OVER_TWO-Math.abs(e))>P.EPSILON8)if(u=function(t,e,n){const r=t/n;if(0===e)return r;const o=r*r,i=o*r,a=i*r,s=e*e,u=s*s,c=u*s,l=c*s,f=l*s,h=f*s,p=Math.sin(2*r),d=Math.cos(2*r),m=Math.sin(4*r),y=Math.cos(4*r),g=Math.sin(6*r),_=Math.cos(6*r),O=Math.sin(8*r),E=Math.cos(8*r),w=Math.sin(10*r);return r+r*s/4+7*r*u/64+15*r*c/256+579*r*l/16384+1515*r*f/65536+16837*r*h/1048576+(3*r*u/16+45*r*c/256-r*(32*o-561)*l/4096-r*(232*o-1677)*f/16384+r*(399985-90560*o+512*a)*h/5242880)*d+(21*r*c/256+483*r*l/4096-r*(224*o-1969)*f/16384-r*(33152*o-112599)*h/1048576)*y+(151*r*l/4096+4681*r*f/65536+1479*r*h/16384-453*i*h/32768)*_+(1097*r*f/65536+42783*r*h/1048576)*E+8011*r*h/1048576*Math.cos(10*r)+(3*s/8+3*u/16+213*c/2048-3*o*c/64+255*l/4096-33*o*l/512+20861*f/524288-33*o*f/512+a*f/1024+28273*h/1048576-471*o*h/8192+9*a*h/4096)*p+(21*u/256+21*c/256+533*l/8192-21*o*l/512+197*f/4096-315*o*f/4096+584039*h/16777216-12517*o*h/131072+7*a*h/2048)*m+(151*c/6144+151*l/4096+5019*f/131072-453*o*f/16384+26965*h/786432-8607*o*h/131072)*g+(1097*l/131072+1097*f/65536+225797*h/10485760-1097*o*h/65536)*O+(8011*f/2621440+8011*h/1048576)*w+293393*h/251658240*Math.sin(12*r)}(Tu(o,r,t.latitude)+n*Math.cos(e),o,r),Math.abs(e)<P.EPSILON10)s=P.negativePiToPi(t.longitude);else{const n=Ru(o,t.latitude),r=Ru(o,u);c=Math.tan(e)*(r-n),s=P.negativePiToPi(t.longitude+c)}else{let i;if(u=t.latitude,0===o)i=r*Math.cos(t.latitude);else{const e=Math.sin(t.latitude);i=r*Math.cos(t.latitude)/Math.sqrt(1-a*e*e)}c=n/i,s=e>0?P.negativePiToPi(t.longitude+c):P.negativePiToPi(t.longitude-c)}return w(i)?(i.longitude=s,i.latitude=u,i.height=0,i):new me(s,u,0)}function Iu(t,e,n){const r=n??Ee.default;this._ellipsoid=r,this._start=new me,this._end=new me,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,w(t)&&w(e)&&xu(this,t,e,r)}function Nu(){this._array=[],this._offset=0,this._length=0}Object.defineProperties(Iu.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return T.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return T.defined("distance",this._distance),this._heading}}}),Iu.fromStartHeadingDistance=function(t,e,n,r,o){T.defined("start",t),T.defined("heading",e),T.defined("distance",n),T.typeOf.number.greaterThan("distance",n,0);const i=r??Ee.default,a=i.maximumRadius,s=i.minimumRadius,u=a*a,c=s*s,l=Math.sqrt((u-c)/u),f=Mu(t,e=P.negativePiToPi(e),n,i.maximumRadius,l);return!w(o)||w(r)&&!r.equals(o.ellipsoid)?new Iu(t,f,i):(o.setEndPoints(t,f),o)},Iu.prototype.setEndPoints=function(t,e){T.defined("start",t),T.defined("end",e),xu(this,t,e,this._ellipsoid)},Iu.prototype.interpolateUsingFraction=function(t,e){return this.interpolateUsingSurfaceDistance(t*this._distance,e)},Iu.prototype.interpolateUsingSurfaceDistance=function(t,e){if(T.typeOf.number("distance",t),!w(this._distance)||0===this._distance)throw new b("EllipsoidRhumbLine must have distinct start and end set.");return Mu(this._start,this._heading,t,this._ellipsoid.maximumRadius,this._ellipticity,e)},Iu.prototype.findIntersectionWithLongitude=function(t,e){if(T.typeOf.number("intersectionLongitude",t),!w(this._distance)||0===this._distance)throw new b("EllipsoidRhumbLine must have distinct start and end set.");const n=this._ellipticity,r=this._heading,o=Math.abs(r),i=this._start;if(t=P.negativePiToPi(t),P.equalsEpsilon(Math.abs(t),Math.PI,P.EPSILON14)&&(t=P.sign(i.longitude)*Math.PI),w(e)||(e=new me),Math.abs(P.PI_OVER_TWO-o)<=P.EPSILON8)return e.longitude=t,e.latitude=i.latitude,e.height=0,e;if(P.equalsEpsilon(Math.abs(P.PI_OVER_TWO-o),P.PI_OVER_TWO,P.EPSILON8)){if(P.equalsEpsilon(t,i.longitude,P.EPSILON12))return;return e.longitude=t,e.latitude=P.PI_OVER_TWO*P.sign(P.PI_OVER_TWO-r),e.height=0,e}const a=i.latitude,s=n*Math.sin(a),u=Math.tan(.5*(P.PI_OVER_TWO+a))*Math.exp((t-i.longitude)/Math.tan(r)),c=(1+s)/(1-s);let l,f=i.latitude;do{l=f;const t=n*Math.sin(l),e=(1+t)/(1-t);f=2*Math.atan(u*Math.pow(e/c,n/2))-P.PI_OVER_TWO}while(!P.equalsEpsilon(f,l,P.EPSILON12));return e.longitude=t,e.latitude=f,e.height=0,e},Iu.prototype.findIntersectionWithLatitude=function(t,e){if(T.typeOf.number("intersectionLatitude",t),!w(this._distance)||0===this._distance)throw new b("EllipsoidRhumbLine must have distinct start and end set.");const n=this._ellipticity,r=this._heading,o=this._start;if(P.equalsEpsilon(Math.abs(r),P.PI_OVER_TWO,P.EPSILON8))return;const i=Ru(n,o.latitude),a=Ru(n,t),s=Math.tan(r)*(a-i),u=P.negativePiToPi(o.longitude+s);return w(e)?(e.longitude=u,e.latitude=t,e.height=0,e):new me(u,t,0)},Object.defineProperties(Nu.prototype,{length:{get:function(){return this._length}}}),Nu.prototype.enqueue=function(t){this._array.push(t),this._length++},Nu.prototype.dequeue=function(){if(0===this._length)return;const t=this._array;let e=this._offset;const n=t[e];return t[e]=void 0,e++,e>10&&2*e>t.length&&(this._array=t.slice(e),e=0),this._offset=e,this._length--,n},Nu.prototype.peek=function(){if(0!==this._length)return this._array[this._offset]},Nu.prototype.contains=function(t){return-1!==this._array.indexOf(t)},Nu.prototype.clear=function(){this._array.length=this._offset=this._length=0},Nu.prototype.sort=function(t){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(t)},new Iu;const Pu={},Cu=new k(0,0,0,1);let vu=new k;const qu=new oi,ju=new ae,Uu=new ae;Pu.worldToWindowCoordinates=function(t,e,n){return Pu.worldWithEyeOffsetToWindowCoordinates(t,e,q.ZERO,n)};const zu=new k,Du=new q;function Lu(t,e,n,r){const o=n.viewMatrix,i=ht.multiplyByVector(o,k.fromElements(t.x,t.y,t.z,1,zu),zu),a=q.multiplyComponents(e,q.normalize(i,Du),Du);return i.x+=e.x+a.x,i.y+=e.y+a.y,i.z+=a.z,ht.multiplyByVector(n.frustum.projectionMatrix,i,r)}const Fu=new me(Math.PI,P.PI_OVER_TWO),Bu=new q,ku=new q;Pu.worldWithEyeOffsetToWindowCoordinates=function(t,e,n,r){if(!w(t))throw new b("scene is required.");if(!w(e))throw new b("position is required.");const o=t.frameState,i=Pu.computeActualEllipsoidPosition(o,e,Cu);if(!w(i))return;const a=t.canvas,s=qu;s.x=0,s.y=0,s.width=a.clientWidth,s.height=a.clientHeight;const u=t.camera;let c=!1;if(o.mode===fs.SCENE2D){const e=t.mapProjection,o=Fu,l=e.project(o,Bu),f=q.clone(u.position,ku),h=u.frustum.clone(),p=ht.computeViewportTransformation(s,0,1,new ht),d=u.frustum.projectionMatrix,m=u.positionWC.y,y=q.fromElements(P.sign(m)*l.x-m,0,-u.positionWC.x),g=lo.pointToGLWindowCoordinates(d,p,y);if(0===m||g.x<=0||g.x>=a.clientWidth)c=!0;else{if(g.x>.5*a.clientWidth){s.width=g.x,u.frustum.right=l.x-m,vu=Lu(i,n,u,vu),Pu.clipToGLWindowCoordinates(s,vu,ju),s.x+=g.x,u.position.x=-u.position.x;const t=u.frustum.right;u.frustum.right=-u.frustum.left,u.frustum.left=-t,vu=Lu(i,n,u,vu),Pu.clipToGLWindowCoordinates(s,vu,Uu)}else{s.x+=g.x,s.width-=g.x,u.frustum.left=-l.x-m,vu=Lu(i,n,u,vu),Pu.clipToGLWindowCoordinates(s,vu,ju),s.x=s.x-s.width,u.position.x=-u.position.x;const t=u.frustum.left;u.frustum.left=-u.frustum.right,u.frustum.right=-t,vu=Lu(i,n,u,vu),Pu.clipToGLWindowCoordinates(s,vu,Uu)}q.clone(f,u.position),u.frustum=h.clone(),((r=ae.clone(ju,r)).x<0||r.x>a.clientWidth)&&(r.x=Uu.x)}}if(o.mode!==fs.SCENE2D||c){if(vu=Lu(i,n,u,vu),vu.z<0&&!(u.frustum instanceof us)&&!(u.frustum instanceof ns))return;r=Pu.clipToGLWindowCoordinates(s,vu,r)}return r.y=a.clientHeight-r.y,r},Pu.worldToDrawingBufferCoordinates=function(t,e,n){if(w(n=Pu.worldToWindowCoordinates(t,e,n)))return Pu.transformWindowToDrawingBuffer(t,n,n)};const Wu=new q,Gu=new me;Pu.computeActualEllipsoidPosition=function(t,e,n){const r=t.mode;if(r===fs.SCENE3D)return q.clone(e,n);const o=t.mapProjection,i=o.ellipsoid.cartesianToCartographic(e,Gu);if(!w(i))return;if(o.project(i,Wu),r===fs.COLUMBUS_VIEW)return q.fromElements(Wu.z,Wu.x,Wu.y,n);if(r===fs.SCENE2D)return q.fromElements(0,Wu.x,Wu.y,n);const a=t.morphTime;return q.fromElements(P.lerp(Wu.z,e.x,a),P.lerp(Wu.x,e.y,a),P.lerp(Wu.y,e.z,a),n)};const Vu=new q,Xu=new q,Hu=new ht;Pu.clipToGLWindowCoordinates=function(t,e,n){return q.divideByScalar(e,e.w,Vu),ht.computeViewportTransformation(t,0,1,Hu),ht.multiplyByPoint(Hu,Vu,Xu),ae.fromCartesian3(Xu,n)},Pu.transformWindowToDrawingBuffer=function(t,e,n){const r=t.canvas,o=t.drawingBufferWidth/r.clientWidth,i=t.drawingBufferHeight/r.clientHeight;return ae.fromElements(e.x*o,e.y*i,n)};const $u=new k,Yu=new k;Pu.drawingBufferToWorldCoordinates=function(t,e,n,r){const o=t.context.uniformState,i=o.currentFrustum,a=i.x,s=i.y;if(t.frameState.useLogDepth){const t=n*o.log2FarDepthFromNearPlusOne;n=s*(1-a/(Math.pow(2,t)-1+a))/(s-a)}const u=t.view.passState.viewport,c=k.clone(k.UNIT_W,$u);let l;c.x=(e.x-u.x)/u.width*2-1,c.y=(e.y-u.y)/u.height*2-1,c.z=2*n-1,c.w=1;let f=t.camera.frustum;if(w(f.fovy)){l=ht.multiplyByVector(o.inverseViewProjection,c,Yu);const t=1/l.w;q.multiplyByScalar(l,t,l)}else{const t=f.offCenterFrustum;w(t)&&(f=t),l=Yu,l.x=.5*(c.x*(f.right-f.left)+f.left+f.right),l.y=.5*(c.y*(f.top-f.bottom)+f.bottom+f.top),l.z=.5*(c.z*(a-s)-a-s),l.w=1,l=ht.multiplyByVector(o.inverseView,l,l)}return q.fromCartesian4(l,r)},new Es,Ee.clone(Ee.UNIT_SPHERE),new ea;class Zu{_lng=0;_lat=0;_alt=0;_heading=0;_pitch=0;_roll=0;_zoom=-1;constructor(t,e,n,r,o,i,a){this._lng=t||0,this._lat=e||0,this._alt=n||0,this._heading=r||0,this._pitch=o||0,this._roll=i||0,this._zoom=a||-1}set lng(t){this._lng=+t}get lng(){return this._lng}set lat(t){this._lat=+t}get lat(){return this._lat}set alt(t){this._alt=+t}get alt(){return this._alt}set heading(t){this._heading=+t}get heading(){return this._heading}set pitch(t){this._pitch=+t}get pitch(){return this._pitch}set roll(t){this._roll=+t}get roll(){return this._roll}set zoom(t){this._zoom=+t}get zoom(){return this._zoom}serialize(){let t=new Zu(this._lng,this._lat,this._alt,this._heading,this._pitch,this._roll,this._zoom);return JSON.stringify(t)}transformWGS84ToCartesian(t){return t?q.fromDegrees(t.lng,t.lat,t.alt,Ee.WGS84):q.ZERO}distance(t){return t&&t instanceof Zu?q.distance(this.transformWGS84ToCartesian(this),this.transformWGS84ToCartesian(t)):0}clone(){let t=new Zu;return t.lng=this.lng||0,t.lat=this.lat||0,t.alt=this.alt||0,t.heading=this.heading||0,t.pitch=this.pitch||0,t.roll=this.roll||0,t}copy(){return this.clone()}toArray(){return[this.lng,this.lat,this.alt,this.heading,this.pitch,this.roll]}getZoomString(){return this.zoom>0?`:${this.zoom} `:""}toString(){const t=this.heading?.toFixed(1),e=this.pitch?.toFixed(1),n=this.roll?.toFixed(1);return`${this.getZoomString()}:${this.lng.toFixed(3)} :${this.lat.toFixed(3)} :${this.alt.toFixed(2)} :${t} :${e} :${n}`}toObject(){return{lng:this.lng,lat:this.lat,alt:this.alt,heading:this.heading,pitch:this.pitch,roll:this.roll,zoom:this.zoom}}static fromArray(t){let e=new Zu;return Array.isArray(t)&&(e.lng=t[0]||0,e.lat=t[1]||0,e.alt=t[2]||0,e.heading=t[3]||0,e.pitch=t[4]||0,e.roll=t[5]||0,e.zoom=t[6]||-1),e}static fromString(t){let e=new Zu;if(t){const n=t.split(",").map(((t,e,n)=>Number(t)));e=this.fromArray(n)}return e}static fromObject(t){return new Zu(t.lng,t.lat,t.alt,t.heading,t.pitch,t.roll,t.zoom)}static fromObject2(t){return new Zu(t._lng,t._lat,t._alt,t._heading,t._pitch,t._roll,t._zoom)}static deserialize(t){let e=new Zu,n=JSON.parse(t);return n&&(e.lng=n.lng||0,e.lat=n.lat||0,e.alt=n.alt||0,e.heading=n.heading||0,e.pitch=n.pitch||0,e.roll=n.roll||0,e.zoom=n.zoom||-1),e}}const Qu=new gu;class Ku{static transformCartesianToCartographic(t){return Ee.WGS84.cartesianToCartographic(t)}static transformCartesianToWGS84(t){if(t){let e=Ee.WGS84.cartesianToCartographic(t);return new Zu(P.toDegrees(e?.longitude||0),P.toDegrees(e?.latitude||0),e?.height||0)}return new Zu(0,0)}static transformCartographicToWGS84(t){return t?new Zu(P.toDegrees(t?.longitude||0),P.toDegrees(t?.latitude||0),t.height||0):new Zu(0,0)}static transformWGS84ToCartesian(t){return t?q.fromDegrees(t.lng,t.lat,t.alt,Ee.WGS84):q.ZERO}static transformWGS84ToCartographic(t){return t?me.fromDegrees(t.lng,t.lat,t.alt):me.ZERO}static transformCartesianArrayToWGS84Array(t){return t?t.map((t=>this.transformCartesianToWGS84(t))):[]}static transformWGS84ArrayToCartesianArray(t){return t?t.map((t=>this.transformWGS84ToCartesian(t))):[]}static transformWGS84ToMercator(t){let e=Qu.project(me.fromDegrees(t.lng,t.lat,t.alt));return new Zu(e.x,e.y,e.z)}static transformMercatorToWGS84(t){let e=Qu.unproject(new q(t.lng,t.lat,t.alt));return new Zu(P.toDegrees(e.longitude),P.toDegrees(e.latitude),e.height)}static transformWindowToWGS84(t,e){let n,r=e.scene;if(r.mode===fs.SCENE3D){let e=r.camera.getPickRay(t);n=r.globe.pick(e,r)}else n=r.camera.pickEllipsoid(t,Ee.WGS84);return this.transformCartesianToWGS84(n)}static transformWGS84ToWindow(t,e){let n=e.scene;return Pu.worldToWindowCoordinates(n,this.transformWGS84ToCartesian(t))}}const Ju=function(t){let e=0;if(t&&Array.isArray(t))for(let n=0;n<t.length-1;n++){let r=Ku.transformWGS84ToCartographic(t[n]),o=Ku.transformWGS84ToCartographic(t[n+1]),i=new bu;i.setEndPoints(r,o);let a=i.surfaceDistance;a=Math.sqrt(Math.pow(a,2)+Math.pow(o.height-r.height,2)),e+=a}return Number(e.toFixed(3))},tc=function(t,e,n=10,r=1){const o=q.fromDegrees(t.lng,t.lat,t.alt),i=q.fromDegrees(e.lng,e.lat,e.alt),a=[];for(let s=0;s<=n;++s){const t=s/n,e=Math.pow(t,r),u=q.lerp(o,i,e,new q);a.push(u)}return a};class ec{static parsePosition(t){let e=new Zu;if(!t)return e;if("string"==typeof t)e=Zu.fromString(t);else if(Array.isArray(t))e=Zu.fromArray(t);else if(Object(t)instanceof Zu)Object(t)instanceof Zu?e=t:Object(t)instanceof q?e=Ku.transformCartesianToWGS84(t):Object(t)instanceof me&&(e=Ku.transformCartographicToWGS84(t));else{const n=Object(t);n.hasOwnProperty("lng")&&n.hasOwnProperty("lat")?e=Zu.fromObject(t):n.hasOwnProperty("_lng")&&n.hasOwnProperty("_lat")&&(e=Zu.fromObject2(t))}return e}static parsePositions(t){let e;if("string"==typeof t){if(t.indexOf("#")>=0)throw new Error("the positions invalid");e=t.split(";").filter((t=>!!t))}else e=t;return e.map((t=>this.parsePosition(t)))}static parsePointCoordToArray(t){return[(t=this.parsePosition(t)).lng,t.lat]}static parsePolylineCoordToArray(t){let e=[];return(t=this.parsePositions(t)).forEach((t=>{e.push([t.lng,t.lat])})),e}static parsePolygonCoordToArray(t,e=!1){let n=[];return(t=this.parsePositions(t)).forEach((t=>{n.push([t.lng,t.lat])})),e&&n.length>0&&n.push(n[0]),[n]}}class nc{dayNumber;secondsOfDay;constructor(t,e){this.dayNumber=t,this.secondsOfDay=e}addSeconds(t){this.secondsOfDay+=t}addSecondsClone(t){const e=this.dayNumber,n=this.secondsOfDay+t;return new nc(e,n)}}const rc=[],oc=[];function ic(t,e){return new nc(t.dayNumber,t.secondsOfDay+e)}var ac=Object.freeze({__proto__:null,getCorrectionByHeadingPitch:function(t,e){return Math.abs(Math.cos(t)*Math.cos(e))},getDetAltBySpeedPitch:function(t,e){return 11*t/360*Math.sin(e)},getDetFlightAttitude:function(t,e,n){const r=t/396e3;return{dlng:r*Math.cos(e),dlat:r*Math.sin(e),dalt:r*Math.sin(n)*11e4}},getDistancePosition:function(t,e,n=2e3){let r=lo.eastNorthUpToFixedFrame(t),o=Q.fromRotationZ(e||0),i=ht.fromRotationTranslation(o);return ht.multiply(r,i,r),ht.multiplyByPoint(r,new q(0,n,0),new q)},updatePathSectionBySpeed:function(t,e,n,r,o=20,i=1){const a=ec.parsePosition(e),s=ec.parsePosition(n),u=Ju([a,s]),c=Math.ceil(u/r),l=tc(a,s,o,i),f=t,h=ic(f,c),p=l.length-1,d=Ku.transformCartesianToWGS84(l[p]);rc.length=0,oc.length=0;for(let m=0;m<=p;++m){const t=ic(f,m/p*c),e=l[m];rc.push(t),oc.push(e)}return{startTimeKey:f,endTimeKey:h,stopPosition:d,julianDates:rc,julianPositions:oc}},updatePathSectionByTime:function(t,e,n,r=2,o=20,i=1){const a=ec.parsePosition(e),s=ec.parsePosition(n),u=Ju([a,s])/r,c=tc(a,s,o,i),l=t,f=ic(l,r),h=c.length-1,p=Ku.transformCartesianToWGS84(c[h]);rc.length=0,oc.length=0;for(let d=0;d<=h;++d){const t=ic(l,d/h*r),e=c[d];rc.push(t),oc.push(e)}return{currentSpeed:u,startTimeKey:l,endTimeKey:f,stopPosition:p,julianDates:rc,julianPositions:oc}}});c(ac);
