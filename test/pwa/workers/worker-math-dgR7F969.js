const t=globalThis||self,e=Symbol("Comlink.proxy"),n=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.finalizer"),i=Symbol("Comlink.thrown"),s=t=>"object"==typeof t&&null!==t||"function"==typeof t,a={canHandle:t=>s(t)&&t[e],serialize(t){const{port1:e,port2:n}=new MessageChannel;return c(t,e),[n,[n]]},deserialize:t=>(t.start(),function(t){const e=new Map;return t.addEventListener("message",(function(t){const{data:n}=t;if(!n||!n.id)return;const r=e.get(n.id);if(r)try{r(n)}finally{e.delete(n.id)}})),m(t,e,[],void 0)}(t))},u=new Map([["proxy",a],["throw",{canHandle:t=>s(t)&&i in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c(t,n=globalThis,r=["*"]){n.addEventListener("message",(function s(a){if(!a||!a.data)return;if(!function(t,e){for(const n of t){if(e===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}return!1}(r,a.origin))return;const{id:u,type:f,path:h}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(E);let d;try{const n=h.slice(0,-1).reduce(((t,e)=>t[e]),t),r=h.reduce(((t,e)=>t[e]),t);switch(f){case"GET":d=r;break;case"SET":n[h.slice(-1)[0]]=E(a.data.value),d=!0;break;case"APPLY":d=r.apply(n,p);break;case"CONSTRUCT":m=new r(...p),d=Object.assign(m,{[e]:!0});break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;c(t,n),d=function(t,e){return g.set(t,e),t}(e,[e])}break;case"RELEASE":d=void 0;break;default:return}}catch(yn){d={value:yn,[i]:0}}var m;Promise.resolve(d).catch((t=>({value:t,[i]:0}))).then((e=>{const[r,i]=w(e);n.postMessage(Object.assign(Object.assign({},r),{id:u}),i),"RELEASE"===f&&(n.removeEventListener("message",s),l(n),o in t&&"function"==typeof t[o]&&t[o]())})).catch((t=>{const[e,r]=w({value:new TypeError("Unserializable return value"),[i]:0});n.postMessage(Object.assign(Object.assign({},e),{id:u}),r)}))})),n.start&&n.start()}function l(t){"MessagePort"===t.constructor.name&&t.close()}function f(t){if(t)throw new Error("Proxy has been released and is not useable")}function h(t){return _(t,new Map,{type:"RELEASE"}).then((()=>{l(t)}))}const p=new WeakMap,d="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(p.get(t)||0)-1;p.set(t,e),0===e&&h(t)}));function m(t,e,o=[],i=function(){}){let s=!1;const a=new Proxy(i,{get(n,i){if(f(s),i===r)return()=>{var n;n=a,d&&d.unregister(n),h(t),e.clear(),s=!0};if("then"===i){if(0===o.length)return{then:()=>a};const n=_(t,e,{type:"GET",path:o.map((t=>t.toString()))}).then(E);return n.then.bind(n)}return m(t,e,[...o,i])},set(n,r,i){f(s);const[a,u]=w(i);return _(t,e,{type:"SET",path:[...o,r].map((t=>t.toString())),value:a},u).then(E)},apply(r,i,a){f(s);const u=o[o.length-1];if(u===n)return _(t,e,{type:"ENDPOINT"}).then(E);if("bind"===u)return m(t,e,o.slice(0,-1));const[c,l]=y(a);return _(t,e,{type:"APPLY",path:o.map((t=>t.toString())),argumentList:c},l).then(E)},construct(n,r){f(s);const[i,a]=y(r);return _(t,e,{type:"CONSTRUCT",path:o.map((t=>t.toString())),argumentList:i},a).then(E)}});return function(t,e){const n=(p.get(e)||0)+1;p.set(e,n),d&&d.register(t,e,t)}(a,t),a}function y(t){const e=t.map(w);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const g=new WeakMap;function w(t){for(const[e,n]of u)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},g.get(t)||[]]}function E(t){switch(t.type){case"HANDLER":return u.get(t.name).deserialize(t.value);case"RAW":return t.value}}function _(t,e,n,r){return new Promise((o=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.set(i,o),t.start&&t.start(),t.postMessage(Object.assign({id:i},n),r)}))}function O(t){return null!=t}function b(t){let e;this.name="DeveloperError",this.message=t;try{throw new Error}catch(n){e=n.stack}this.stack=e}O(Object.create)&&(b.prototype=Object.create(Error.prototype),b.prototype.constructor=b),b.prototype.toString=function(){let t=`${this.name}: ${this.message}`;return O(this.stack)&&(t+=`\n${this.stack.toString()}`),t},b.throwInstantiationError=function(){throw new b("This function defines an interface and should not be called directly.")};const T={};function A(t,e,n){return`Expected ${n} to be typeof ${e}, actual typeof was ${t}`}T.typeOf={},T.defined=function(t,e){if(!O(e))throw new b(`${t} is required, actual value was undefined`)},T.typeOf.func=function(t,e){if("function"!=typeof e)throw new b(A(typeof e,"function",t))},T.typeOf.string=function(t,e){if("string"!=typeof e)throw new b(A(typeof e,"string",t))},T.typeOf.number=function(t,e){if("number"!=typeof e)throw new b(A(typeof e,"number",t))},T.typeOf.number.lessThan=function(t,e,n){if(T.typeOf.number(t,e),e>=n)throw new b(`Expected ${t} to be less than ${n}, actual value was ${e}`)},T.typeOf.number.lessThanOrEquals=function(t,e,n){if(T.typeOf.number(t,e),e>n)throw new b(`Expected ${t} to be less than or equal to ${n}, actual value was ${e}`)},T.typeOf.number.greaterThan=function(t,e,n){if(T.typeOf.number(t,e),e<=n)throw new b(`Expected ${t} to be greater than ${n}, actual value was ${e}`)},T.typeOf.number.greaterThanOrEquals=function(t,e,n){if(T.typeOf.number(t,e),e<n)throw new b(`Expected ${t} to be greater than or equal to ${n}, actual value was ${e}`)},T.typeOf.object=function(t,e){if("object"!=typeof e)throw new b(A(typeof e,"object",t))},T.typeOf.bool=function(t,e){if("boolean"!=typeof e)throw new b(A(typeof e,"boolean",t))},T.typeOf.bigint=function(t,e){if("bigint"!=typeof e)throw new b(A(typeof e,"bigint",t))},T.typeOf.number.equals=function(t,e,n,r){if(T.typeOf.number(t,n),T.typeOf.number(e,r),n!==r)throw new b(`${t} must be equal to ${e}, the actual values are ${n} and ${r}`)};var x,R,S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function I(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N=function(){if(R)return x;R=1;var t=function(t){null==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};return t.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++)t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0},t.prototype.init_by_array=function(t,e){var n,r,o;for(this.init_seed(19650218),n=1,r=0,o=this.N>e?this.N:e;o;o--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+t[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=e&&(r=0)}for(o=this.N-1;o;o--)i=this.mt[n-1]^this.mt[n-1]>>>30,this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1);this.mt[0]=2147483648},t.prototype.random_int=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^e[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},x=t}(),v=I(N);const M={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};M.sign=Math.sign??function(t){return 0==(t=+t)||t!=t?t:t>0?1:-1},M.signNotZero=function(t){return t<0?-1:1},M.toSNorm=function(t,e){return e=e??255,Math.round((.5*M.clamp(t,-1,1)+.5)*e)},M.fromSNorm=function(t,e){return e=e??255,M.clamp(t,0,e)/e*2-1},M.normalize=function(t,e,n){return 0===(n=Math.max(n-e,0))?0:M.clamp((t-e)/n,0,1)},M.sinh=Math.sinh??function(t){return(Math.exp(t)-Math.exp(-t))/2},M.cosh=Math.cosh??function(t){return(Math.exp(t)+Math.exp(-t))/2},M.lerp=function(t,e,n){return(1-n)*t+n*e},M.PI=Math.PI,M.ONE_OVER_PI=1/Math.PI,M.PI_OVER_TWO=Math.PI/2,M.PI_OVER_THREE=Math.PI/3,M.PI_OVER_FOUR=Math.PI/4,M.PI_OVER_SIX=Math.PI/6,M.THREE_PI_OVER_TWO=3*Math.PI/2,M.TWO_PI=2*Math.PI,M.ONE_OVER_TWO_PI=1/(2*Math.PI),M.RADIANS_PER_DEGREE=Math.PI/180,M.DEGREES_PER_RADIAN=180/Math.PI,M.RADIANS_PER_ARCSECOND=M.RADIANS_PER_DEGREE/3600,M.toRadians=function(t){if(!O(t))throw new b("degrees is required.");return t*M.RADIANS_PER_DEGREE},M.toDegrees=function(t){if(!O(t))throw new b("radians is required.");return t*M.DEGREES_PER_RADIAN},M.convertLongitudeRange=function(t){if(!O(t))throw new b("angle is required.");const e=M.TWO_PI,n=t-Math.floor(t/e)*e;return n<-Math.PI?n+e:n>=Math.PI?n-e:n},M.clampToLatitudeRange=function(t){if(!O(t))throw new b("angle is required.");return M.clamp(t,-1*M.PI_OVER_TWO,M.PI_OVER_TWO)},M.negativePiToPi=function(t){if(!O(t))throw new b("angle is required.");return t>=-M.PI&&t<=M.PI?t:M.zeroToTwoPi(t+M.PI)-M.PI},M.zeroToTwoPi=function(t){if(!O(t))throw new b("angle is required.");if(t>=0&&t<=M.TWO_PI)return t;const e=M.mod(t,M.TWO_PI);return Math.abs(e)<M.EPSILON14&&Math.abs(t)>M.EPSILON14?M.TWO_PI:e},M.mod=function(t,e){if(!O(t))throw new b("m is required.");if(!O(e))throw new b("n is required.");if(0===e)throw new b("divisor cannot be 0.");return M.sign(t)===M.sign(e)&&Math.abs(t)<Math.abs(e)?t:(t%e+e)%e},M.equalsEpsilon=function(t,e,n,r){if(!O(t))throw new b("left is required.");if(!O(e))throw new b("right is required.");n=n??0,r=r??n;const o=Math.abs(t-e);return o<=r||o<=n*Math.max(Math.abs(t),Math.abs(e))},M.lessThan=function(t,e,n){if(!O(t))throw new b("first is required.");if(!O(e))throw new b("second is required.");if(!O(n))throw new b("absoluteEpsilon is required.");return t-e<-n},M.lessThanOrEquals=function(t,e,n){if(!O(t))throw new b("first is required.");if(!O(e))throw new b("second is required.");if(!O(n))throw new b("absoluteEpsilon is required.");return t-e<n},M.greaterThan=function(t,e,n){if(!O(t))throw new b("first is required.");if(!O(e))throw new b("second is required.");if(!O(n))throw new b("absoluteEpsilon is required.");return t-e>n},M.greaterThanOrEquals=function(t,e,n){if(!O(t))throw new b("first is required.");if(!O(e))throw new b("second is required.");if(!O(n))throw new b("absoluteEpsilon is required.");return t-e>-n};const P=[1];M.factorial=function(t){if("number"!=typeof t||t<0)throw new b("A number greater than or equal to 0 is required.");const e=P.length;if(t>=e){let n=P[e-1];for(let r=e;r<=t;r++){const t=n*r;P.push(t),n=t}}return P[t]},M.incrementWrap=function(t,e,n){if(n=n??0,!O(t))throw new b("n is required.");if(e<=n)throw new b("maximumValue must be greater than minimumValue.");return++t>e&&(t=n),t},M.isPowerOfTwo=function(t){if("number"!=typeof t||t<0||t>4294967295)throw new b("A number between 0 and (2^32)-1 is required.");return 0!==t&&!(t&t-1)},M.nextPowerOfTwo=function(t){if("number"!=typeof t||t<0||t>2147483648)throw new b("A number between 0 and 2^31 is required.");return--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},M.previousPowerOfTwo=function(t){if("number"!=typeof t||t<0||t>4294967295)throw new b("A number between 0 and (2^32)-1 is required.");return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,((t|=t>>32)>>>0)-(t>>>1)},M.clamp=function(t,e,n){return T.typeOf.number("value",t),T.typeOf.number("min",e),T.typeOf.number("max",n),t<e?e:t>n?n:t};let C=new v;function L(t,e,n){this.x=t??0,this.y=e??0,this.z=n??0}M.setRandomNumberSeed=function(t){if(!O(t))throw new b("seed is required.");C=new v(t)},M.nextRandomNumber=function(){return C.random()},M.randomBetween=function(t,e){return M.nextRandomNumber()*(e-t)+t},M.acosClamped=function(t){if(!O(t))throw new b("value is required.");return Math.acos(M.clamp(t,-1,1))},M.asinClamped=function(t){if(!O(t))throw new b("value is required.");return Math.asin(M.clamp(t,-1,1))},M.chordLength=function(t,e){if(!O(t))throw new b("angle is required.");if(!O(e))throw new b("radius is required.");return 2*e*Math.sin(.5*t)},M.logBase=function(t,e){if(!O(t))throw new b("number is required.");if(!O(e))throw new b("base is required.");return Math.log(t)/Math.log(e)},M.cbrt=Math.cbrt??function(t){const e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},M.log2=Math.log2??function(t){return Math.log(t)*Math.LOG2E},M.fog=function(t,e){const n=t*e;return 1-Math.exp(-n*n)},M.fastApproximateAtan=function(t){return T.typeOf.number("x",t),t*(-.1784*Math.abs(t)-.0663*t*t+1.0301)},M.fastApproximateAtan2=function(t,e){let n;T.typeOf.number("x",t),T.typeOf.number("y",e);let r=Math.abs(t);n=Math.abs(e);const o=Math.max(r,n);n=Math.min(r,n);const i=n/o;if(isNaN(i))throw new b("either x or y must be nonzero");return r=M.fastApproximateAtan(i),r=Math.abs(e)>Math.abs(t)?M.PI_OVER_TWO-r:r,r=t<0?M.PI-r:r,r=e<0?-r:r,r},L.fromSpherical=function(t,e){T.typeOf.object("spherical",t),O(e)||(e=new L);const n=t.clock,r=t.cone,o=t.magnitude??1,i=o*Math.sin(r);return e.x=i*Math.cos(n),e.y=i*Math.sin(n),e.z=o*Math.cos(r),e},L.fromElements=function(t,e,n,r){return O(r)?(r.x=t,r.y=e,r.z=n,r):new L(t,e,n)},L.clone=function(t,e){if(O(t))return O(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e):new L(t.x,t.y,t.z)},L.fromCartesian4=L.clone,L.packedLength=3,L.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n]=t.z,e},L.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new L),n.x=t[e++],n.y=t[e++],n.z=t[e],n},L.packArray=function(t,e){T.defined("array",t);const n=t.length,r=3*n;if(O(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 3 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)L.pack(t[o],e,3*o);return e},L.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,3),t.length%3!=0)throw new b("array length must be a multiple of 3.");const n=t.length;O(e)?e.length=n/3:e=new Array(n/3);for(let r=0;r<n;r+=3){const n=r/3;e[n]=L.unpack(t,r,e[n])}return e},L.fromArray=L.unpack,L.maximumComponent=function(t){return T.typeOf.object("cartesian",t),Math.max(t.x,t.y,t.z)},L.minimumComponent=function(t){return T.typeOf.object("cartesian",t),Math.min(t.x,t.y,t.z)},L.minimumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.z=Math.min(t.z,e.z),n},L.maximumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.z=Math.max(t.z,e.z),n},L.clamp=function(t,e,n,r){T.typeOf.object("value",t),T.typeOf.object("min",e),T.typeOf.object("max",n),T.typeOf.object("result",r);const o=M.clamp(t.x,e.x,n.x),i=M.clamp(t.y,e.y,n.y),s=M.clamp(t.z,e.z,n.z);return r.x=o,r.y=i,r.z=s,r},L.magnitudeSquared=function(t){return T.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y+t.z*t.z},L.magnitude=function(t){return Math.sqrt(L.magnitudeSquared(t))};const U=new L;L.distance=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),L.subtract(t,e,U),L.magnitude(U)},L.distanceSquared=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),L.subtract(t,e,U),L.magnitudeSquared(U)},L.normalize=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=L.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n,isNaN(e.x)||isNaN(e.y)||isNaN(e.z))throw new b("normalized result is not a number");return e},L.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z},L.multiplyComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n},L.divideComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n},L.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n},L.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n},L.multiplyByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n},L.divideByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n},L.negate=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e},L.abs=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e.z=Math.abs(t.z),e};const q=new L;L.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),L.multiplyByScalar(e,n,q),r=L.multiplyByScalar(t,1-n,r),L.add(q,r,r)};const D=new L,z=new L;L.angleBetween=function(t,e){T.typeOf.object("left",t),T.typeOf.object("right",e),L.normalize(t,D),L.normalize(e,z);const n=L.dot(D,z),r=L.magnitude(L.cross(D,z,D));return Math.atan2(r,n)};const j=new L;L.mostOrthogonalAxis=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=L.normalize(t,j);return L.abs(n,n),n.x<=n.y?n.x<=n.z?L.clone(L.UNIT_X,e):L.clone(L.UNIT_Z,e):n.y<=n.z?L.clone(L.UNIT_Y,e):L.clone(L.UNIT_Z,e)},L.projectVector=function(t,e,n){T.defined("a",t),T.defined("b",e),T.defined("result",n);const r=L.dot(t,e)/L.dot(e,e);return L.multiplyByScalar(e,r,n)},L.equals=function(t,e){return t===e||O(t)&&O(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z},L.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]&&t.z===e[n+2]},L.equalsEpsilon=function(t,e,n,r){return t===e||O(t)&&O(e)&&M.equalsEpsilon(t.x,e.x,n,r)&&M.equalsEpsilon(t.y,e.y,n,r)&&M.equalsEpsilon(t.z,e.z,n,r)},L.cross=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t.x,o=t.y,i=t.z,s=e.x,a=e.y,u=e.z,c=o*u-i*a,l=i*s-r*u,f=r*a-o*s;return n.x=c,n.y=l,n.z=f,n},L.midpoint=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=.5*(t.x+e.x),n.y=.5*(t.y+e.y),n.z=.5*(t.z+e.z),n},L.fromDegrees=function(t,e,n,r,o){return T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),t=M.toRadians(t),e=M.toRadians(e),L.fromRadians(t,e,n,r,o)};let F=new L,B=new L;function G(t,e,n,r){this.x=t??0,this.y=e??0,this.z=n??0,this.w=r??0}L._ellipsoidRadiiSquared=new L(40680631590769,40680631590769,40408299984661.445),L.fromRadians=function(t,e,n,r,o){T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),n=n??0;const i=O(r)?r.radiiSquared:L._ellipsoidRadiiSquared,s=Math.cos(e);F.x=s*Math.cos(t),F.y=s*Math.sin(t),F.z=Math.sin(e),F=L.normalize(F,F),L.multiplyComponents(i,F,B);const a=Math.sqrt(L.dot(F,B));return B=L.divideByScalar(B,a,B),F=L.multiplyByScalar(F,n,F),O(o)||(o=new L),L.add(B,F,o)},L.fromDegreesArray=function(t,e,n){if(T.defined("coordinates",t),t.length<2||t.length%2!=0)throw new b("the number of coordinates must be a multiple of 2 and at least 2");const r=t.length;O(n)?n.length=r/2:n=new Array(r/2);for(let o=0;o<r;o+=2){const r=t[o],i=t[o+1],s=o/2;n[s]=L.fromDegrees(r,i,0,e,n[s])}return n},L.fromRadiansArray=function(t,e,n){if(T.defined("coordinates",t),t.length<2||t.length%2!=0)throw new b("the number of coordinates must be a multiple of 2 and at least 2");const r=t.length;O(n)?n.length=r/2:n=new Array(r/2);for(let o=0;o<r;o+=2){const r=t[o],i=t[o+1],s=o/2;n[s]=L.fromRadians(r,i,0,e,n[s])}return n},L.fromDegreesArrayHeights=function(t,e,n){if(T.defined("coordinates",t),t.length<3||t.length%3!=0)throw new b("the number of coordinates must be a multiple of 3 and at least 3");const r=t.length;O(n)?n.length=r/3:n=new Array(r/3);for(let o=0;o<r;o+=3){const r=t[o],i=t[o+1],s=t[o+2],a=o/3;n[a]=L.fromDegrees(r,i,s,e,n[a])}return n},L.fromRadiansArrayHeights=function(t,e,n){if(T.defined("coordinates",t),t.length<3||t.length%3!=0)throw new b("the number of coordinates must be a multiple of 3 and at least 3");const r=t.length;O(n)?n.length=r/3:n=new Array(r/3);for(let o=0;o<r;o+=3){const r=t[o],i=t[o+1],s=t[o+2],a=o/3;n[a]=L.fromRadians(r,i,s,e,n[a])}return n},L.ZERO=Object.freeze(new L(0,0,0)),L.ONE=Object.freeze(new L(1,1,1)),L.UNIT_X=Object.freeze(new L(1,0,0)),L.UNIT_Y=Object.freeze(new L(0,1,0)),L.UNIT_Z=Object.freeze(new L(0,0,1)),L.prototype.clone=function(t){return L.clone(this,t)},L.prototype.equals=function(t){return L.equals(this,t)},L.prototype.equalsEpsilon=function(t,e,n){return L.equalsEpsilon(this,t,e,n)},L.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`},G.fromElements=function(t,e,n,r,o){return O(o)?(o.x=t,o.y=e,o.z=n,o.w=r,o):new G(t,e,n,r)},G.fromColor=function(t,e){return T.typeOf.object("color",t),O(e)?(e.x=t.red,e.y=t.green,e.z=t.blue,e.w=t.alpha,e):new G(t.red,t.green,t.blue,t.alpha)},G.clone=function(t,e){if(O(t))return O(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e):new G(t.x,t.y,t.z,t.w)},G.packedLength=4,G.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n++]=t.z,e[n]=t.w,e},G.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new G),n.x=t[e++],n.y=t[e++],n.z=t[e++],n.w=t[e],n},G.packArray=function(t,e){T.defined("array",t);const n=t.length,r=4*n;if(O(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 4 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)G.pack(t[o],e,4*o);return e},G.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,4),t.length%4!=0)throw new b("array length must be a multiple of 4.");const n=t.length;O(e)?e.length=n/4:e=new Array(n/4);for(let r=0;r<n;r+=4){const n=r/4;e[n]=G.unpack(t,r,e[n])}return e},G.fromArray=G.unpack,G.maximumComponent=function(t){return T.typeOf.object("cartesian",t),Math.max(t.x,t.y,t.z,t.w)},G.minimumComponent=function(t){return T.typeOf.object("cartesian",t),Math.min(t.x,t.y,t.z,t.w)},G.minimumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.z=Math.min(t.z,e.z),n.w=Math.min(t.w,e.w),n},G.maximumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.z=Math.max(t.z,e.z),n.w=Math.max(t.w,e.w),n},G.clamp=function(t,e,n,r){T.typeOf.object("value",t),T.typeOf.object("min",e),T.typeOf.object("max",n),T.typeOf.object("result",r);const o=M.clamp(t.x,e.x,n.x),i=M.clamp(t.y,e.y,n.y),s=M.clamp(t.z,e.z,n.z),a=M.clamp(t.w,e.w,n.w);return r.x=o,r.y=i,r.z=s,r.w=a,r},G.magnitudeSquared=function(t){return T.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},G.magnitude=function(t){return Math.sqrt(G.magnitudeSquared(t))};const k=new G;G.distance=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),G.subtract(t,e,k),G.magnitude(k)},G.distanceSquared=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),G.subtract(t,e,k),G.magnitudeSquared(k)},G.normalize=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=G.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n,e.w=t.w/n,isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||isNaN(e.w))throw new b("normalized result is not a number");return e},G.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},G.multiplyComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z,n.w=t.w*e.w,n},G.divideComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z,n.w=t.w/e.w,n},G.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n},G.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n.w=t.w-e.w,n},G.multiplyByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n.w=t.w*e,n},G.divideByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n.w=t.w/e,n},G.negate=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e},G.abs=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e.z=Math.abs(t.z),e.w=Math.abs(t.w),e};const W=new G;G.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),G.multiplyByScalar(e,n,W),r=G.multiplyByScalar(t,1-n,r),G.add(W,r,r)};const V=new G;G.mostOrthogonalAxis=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=G.normalize(t,V);return G.abs(n,n),n.x<=n.y?n.x<=n.z?n.x<=n.w?G.clone(G.UNIT_X,e):G.clone(G.UNIT_W,e):n.z<=n.w?G.clone(G.UNIT_Z,e):G.clone(G.UNIT_W,e):n.y<=n.z?n.y<=n.w?G.clone(G.UNIT_Y,e):G.clone(G.UNIT_W,e):n.z<=n.w?G.clone(G.UNIT_Z,e):G.clone(G.UNIT_W,e)},G.equals=function(t,e){return t===e||O(t)&&O(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},G.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]&&t.z===e[n+2]&&t.w===e[n+3]},G.equalsEpsilon=function(t,e,n,r){return t===e||O(t)&&O(e)&&M.equalsEpsilon(t.x,e.x,n,r)&&M.equalsEpsilon(t.y,e.y,n,r)&&M.equalsEpsilon(t.z,e.z,n,r)&&M.equalsEpsilon(t.w,e.w,n,r)},G.ZERO=Object.freeze(new G(0,0,0,0)),G.ONE=Object.freeze(new G(1,1,1,1)),G.UNIT_X=Object.freeze(new G(1,0,0,0)),G.UNIT_Y=Object.freeze(new G(0,1,0,0)),G.UNIT_Z=Object.freeze(new G(0,0,1,0)),G.UNIT_W=Object.freeze(new G(0,0,0,1)),G.prototype.clone=function(t){return G.clone(this,t)},G.prototype.equals=function(t){return G.equals(this,t)},G.prototype.equalsEpsilon=function(t,e,n){return G.equalsEpsilon(this,t,e,n)},G.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const H=new Float32Array(1),X=new Uint8Array(H.buffer),Y=new Uint32Array([287454020]),$=68===new Uint8Array(Y.buffer)[0];G.packFloat=function(t,e){return T.typeOf.number("value",t),O(e)||(e=new G),H[0]=t,$?(e.x=X[0],e.y=X[1],e.z=X[2],e.w=X[3]):(e.x=X[3],e.y=X[2],e.z=X[1],e.w=X[0]),e},G.unpackFloat=function(t){return T.typeOf.object("packedFloat",t),$?(X[0]=t.x,X[1]=t.y,X[2]=t.z,X[3]=t.w):(X[0]=t.w,X[1]=t.z,X[2]=t.y,X[3]=t.x),H[0]};const Z={};function Q(t,e,n,r,o,i,s,a,u){this[0]=t??0,this[1]=r??0,this[2]=s??0,this[3]=e??0,this[4]=o??0,this[5]=a??0,this[6]=n??0,this[7]=i??0,this[8]=u??0}Z.EMPTY_OBJECT=Object.freeze({}),Z.EMPTY_ARRAY=Object.freeze([]),Q.packedLength=9,Q.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e[n++]=t[4],e[n++]=t[5],e[n++]=t[6],e[n++]=t[7],e[n++]=t[8],e},Q.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new Q),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n[4]=t[e++],n[5]=t[e++],n[6]=t[e++],n[7]=t[e++],n[8]=t[e++],n},Q.packArray=function(t,e){T.defined("array",t);const n=t.length,r=9*n;if(O(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 9 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)Q.pack(t[o],e,9*o);return e},Q.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,9),t.length%9!=0)throw new b("array length must be a multiple of 9.");const n=t.length;O(e)?e.length=n/9:e=new Array(n/9);for(let r=0;r<n;r+=9){const n=r/9;e[n]=Q.unpack(t,r,e[n])}return e},Q.clone=function(t,e){if(O(t))return O(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e):new Q(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},Q.fromArray=Q.unpack,Q.fromColumnMajorArray=function(t,e){return T.defined("values",t),Q.clone(t,e)},Q.fromRowMajorArray=function(t,e){return T.defined("values",t),O(e)?(e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e):new Q(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Q.fromQuaternion=function(t,e){T.typeOf.object("quaternion",t);const n=t.x*t.x,r=t.x*t.y,o=t.x*t.z,i=t.x*t.w,s=t.y*t.y,a=t.y*t.z,u=t.y*t.w,c=t.z*t.z,l=t.z*t.w,f=t.w*t.w,h=n-s-c+f,p=2*(r-l),d=2*(o+u),m=2*(r+l),y=-n+s-c+f,g=2*(a-i),w=2*(o-u),E=2*(a+i),_=-n-s+c+f;return O(e)?(e[0]=h,e[1]=m,e[2]=w,e[3]=p,e[4]=y,e[5]=E,e[6]=d,e[7]=g,e[8]=_,e):new Q(h,p,d,m,y,g,w,E,_)},Q.fromHeadingPitchRoll=function(t,e){T.typeOf.object("headingPitchRoll",t);const n=Math.cos(-t.pitch),r=Math.cos(-t.heading),o=Math.cos(t.roll),i=Math.sin(-t.pitch),s=Math.sin(-t.heading),a=Math.sin(t.roll),u=n*r,c=-o*s+a*i*r,l=a*s+o*i*r,f=n*s,h=o*r+a*i*s,p=-a*r+o*i*s,d=-i,m=a*n,y=o*n;return O(e)?(e[0]=u,e[1]=f,e[2]=d,e[3]=c,e[4]=h,e[5]=m,e[6]=l,e[7]=p,e[8]=y,e):new Q(u,c,l,f,h,p,d,m,y)},Q.fromScale=function(t,e){return T.typeOf.object("scale",t),O(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=0,e[4]=t.y,e[5]=0,e[6]=0,e[7]=0,e[8]=t.z,e):new Q(t.x,0,0,0,t.y,0,0,0,t.z)},Q.fromUniformScale=function(t,e){return T.typeOf.number("scale",t),O(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=t,e):new Q(t,0,0,0,t,0,0,0,t)},Q.fromCrossProduct=function(t,e){return T.typeOf.object("vector",t),O(e)?(e[0]=0,e[1]=t.z,e[2]=-t.y,e[3]=-t.z,e[4]=0,e[5]=t.x,e[6]=t.y,e[7]=-t.x,e[8]=0,e):new Q(0,-t.z,t.y,t.z,0,-t.x,-t.y,t.x,0)},Q.fromRotationX=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return O(e)?(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=n,e[5]=r,e[6]=0,e[7]=-r,e[8]=n,e):new Q(1,0,0,0,n,-r,0,r,n)},Q.fromRotationY=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return O(e)?(e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=1,e[5]=0,e[6]=r,e[7]=0,e[8]=n,e):new Q(n,0,r,0,1,0,-r,0,n)},Q.fromRotationZ=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return O(e)?(e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e):new Q(n,-r,0,r,n,0,0,0,1)},Q.toArray=function(t,e){return T.typeOf.object("matrix",t),O(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e):[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},Q.getElementIndex=function(t,e){return T.typeOf.number.greaterThanOrEquals("row",e,0),T.typeOf.number.lessThanOrEquals("row",e,2),T.typeOf.number.greaterThanOrEquals("column",t,0),T.typeOf.number.lessThanOrEquals("column",t,2),3*t+e},Q.getColumn=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("result",n);const r=3*e,o=t[r],i=t[r+1],s=t[r+2];return n.x=o,n.y=i,n.z=s,n},Q.setColumn=function(t,e,n,r){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("cartesian",n),T.typeOf.object("result",r);const o=3*e;return(r=Q.clone(t,r))[o]=n.x,r[o+1]=n.y,r[o+2]=n.z,r},Q.getRow=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("result",n);const r=t[e],o=t[e+3],i=t[e+6];return n.x=r,n.y=o,n.z=i,n},Q.setRow=function(t,e,n,r){return T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,2),T.typeOf.object("cartesian",n),T.typeOf.object("result",r),(r=Q.clone(t,r))[e]=n.x,r[e+3]=n.y,r[e+6]=n.z,r};const K=new L;Q.setScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=Q.getScale(t,K),o=e.x/r.x,i=e.y/r.y,s=e.z/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*i,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*s,n[7]=t[7]*s,n[8]=t[8]*s,n};const J=new L;Q.setUniformScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n);const r=Q.getScale(t,J),o=e/r.x,i=e/r.y,s=e/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*i,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*s,n[7]=t[7]*s,n[8]=t[8]*s,n};const tt=new L;Q.getScale=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=L.magnitude(L.fromElements(t[0],t[1],t[2],tt)),e.y=L.magnitude(L.fromElements(t[3],t[4],t[5],tt)),e.z=L.magnitude(L.fromElements(t[6],t[7],t[8],tt)),e};const et=new L;Q.getMaximumScale=function(t){return Q.getScale(t,et),L.maximumComponent(et)};const nt=new L;Q.setRotation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("result",n);const r=Q.getScale(t,nt);return n[0]=e[0]*r.x,n[1]=e[1]*r.x,n[2]=e[2]*r.x,n[3]=e[3]*r.y,n[4]=e[4]*r.y,n[5]=e[5]*r.y,n[6]=e[6]*r.z,n[7]=e[7]*r.z,n[8]=e[8]*r.z,n};const rt=new L;Q.getRotation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=Q.getScale(t,rt);return e[0]=t[0]/n.x,e[1]=t[1]/n.x,e[2]=t[2]/n.x,e[3]=t[3]/n.y,e[4]=t[4]/n.y,e[5]=t[5]/n.y,e[6]=t[6]/n.z,e[7]=t[7]/n.z,e[8]=t[8]/n.z,e},Q.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0]*e[0]+t[3]*e[1]+t[6]*e[2],o=t[1]*e[0]+t[4]*e[1]+t[7]*e[2],i=t[2]*e[0]+t[5]*e[1]+t[8]*e[2],s=t[0]*e[3]+t[3]*e[4]+t[6]*e[5],a=t[1]*e[3]+t[4]*e[4]+t[7]*e[5],u=t[2]*e[3]+t[5]*e[4]+t[8]*e[5],c=t[0]*e[6]+t[3]*e[7]+t[6]*e[8],l=t[1]*e[6]+t[4]*e[7]+t[7]*e[8],f=t[2]*e[6]+t[5]*e[7]+t[8]*e[8];return n[0]=r,n[1]=o,n[2]=i,n[3]=s,n[4]=a,n[5]=u,n[6]=c,n[7]=l,n[8]=f,n},Q.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n},Q.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n},Q.multiplyByVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,s=t[0]*r+t[3]*o+t[6]*i,a=t[1]*r+t[4]*o+t[7]*i,u=t[2]*r+t[5]*o+t[8]*i;return n.x=s,n.y=a,n.z=u,n},Q.multiplyByScalar=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n},Q.multiplyByScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.x,n[3]=t[3]*e.y,n[4]=t[4]*e.y,n[5]=t[5]*e.y,n[6]=t[6]*e.z,n[7]=t[7]*e.z,n[8]=t[8]*e.z,n},Q.multiplyByUniformScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n},Q.negate=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e},Q.transpose=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[3],o=t[6],i=t[1],s=t[4],a=t[7],u=t[2],c=t[5],l=t[8];return e[0]=n,e[1]=r,e[2]=o,e[3]=i,e[4]=s,e[5]=a,e[6]=u,e[7]=c,e[8]=l,e};const ot=[1,0,0],it=[2,2,1];function st(t){let e=0;for(let n=0;n<3;++n){const r=t[Q.getElementIndex(it[n],ot[n])];e+=2*r*r}return Math.sqrt(e)}function at(t,e){const n=M.EPSILON15;let r=0,o=1;for(let c=0;c<3;++c){const e=Math.abs(t[Q.getElementIndex(it[c],ot[c])]);e>r&&(o=c,r=e)}let i=1,s=0;const a=ot[o],u=it[o];if(Math.abs(t[Q.getElementIndex(u,a)])>n){const e=(t[Q.getElementIndex(u,u)]-t[Q.getElementIndex(a,a)])/2/t[Q.getElementIndex(u,a)];let n;n=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),i=1/Math.sqrt(1+n*n),s=n*i}return(e=Q.clone(Q.IDENTITY,e))[Q.getElementIndex(a,a)]=e[Q.getElementIndex(u,u)]=i,e[Q.getElementIndex(u,a)]=s,e[Q.getElementIndex(a,u)]=-s,e}const ut=new Q,ct=new Q;Q.computeEigenDecomposition=function(t,e){T.typeOf.object("matrix",t);const n=M.EPSILON20;let r=0,o=0;O(e)||(e={});const i=e.unitary=Q.clone(Q.IDENTITY,e.unitary),s=e.diagonal=Q.clone(t,e.diagonal),a=n*function(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}(s);for(;o<10&&st(s)>a;)at(s,ut),Q.transpose(ut,ct),Q.multiply(s,ut,s),Q.multiply(ct,s,s),Q.multiply(i,ut,i),++r>2&&(++o,r=0);return e},Q.abs=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e[4]=Math.abs(t[4]),e[5]=Math.abs(t[5]),e[6]=Math.abs(t[6]),e[7]=Math.abs(t[7]),e[8]=Math.abs(t[8]),e},Q.determinant=function(t){T.typeOf.object("matrix",t);const e=t[0],n=t[3],r=t[6],o=t[1],i=t[4],s=t[7],a=t[2],u=t[5],c=t[8];return e*(i*c-u*s)+o*(u*r-n*c)+a*(n*s-i*r)},Q.inverse=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],f=Q.determinant(t);if(Math.abs(f)<=M.EPSILON15)throw new b("matrix is not invertible");e[0]=s*l-c*a,e[1]=c*o-r*l,e[2]=r*a-s*o,e[3]=u*a-i*l,e[4]=n*l-u*o,e[5]=i*o-n*a,e[6]=i*c-u*s,e[7]=u*r-n*c,e[8]=n*s-i*r;const h=1/f;return Q.multiplyByScalar(e,h,e)};const lt=new Q;function ft(t){let e;this.name="RuntimeError",this.message=t;try{throw new Error}catch(n){e=n.stack}this.stack=e}function ht(t,e,n,r,o,i,s,a,u,c,l,f,h,p,d,m){this[0]=t??0,this[1]=o??0,this[2]=u??0,this[3]=h??0,this[4]=e??0,this[5]=i??0,this[6]=c??0,this[7]=p??0,this[8]=n??0,this[9]=s??0,this[10]=l??0,this[11]=d??0,this[12]=r??0,this[13]=a??0,this[14]=f??0,this[15]=m??0}Q.inverseTranspose=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),Q.inverse(Q.transpose(t,lt),e)},Q.equals=function(t,e){return t===e||O(t)&&O(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},Q.equalsEpsilon=function(t,e,n){return n=n??0,t===e||O(t)&&O(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n&&Math.abs(t[4]-e[4])<=n&&Math.abs(t[5]-e[5])<=n&&Math.abs(t[6]-e[6])<=n&&Math.abs(t[7]-e[7])<=n&&Math.abs(t[8]-e[8])<=n},Q.IDENTITY=Object.freeze(new Q(1,0,0,0,1,0,0,0,1)),Q.ZERO=Object.freeze(new Q(0,0,0,0,0,0,0,0,0)),Q.COLUMN0ROW0=0,Q.COLUMN0ROW1=1,Q.COLUMN0ROW2=2,Q.COLUMN1ROW0=3,Q.COLUMN1ROW1=4,Q.COLUMN1ROW2=5,Q.COLUMN2ROW0=6,Q.COLUMN2ROW1=7,Q.COLUMN2ROW2=8,Object.defineProperties(Q.prototype,{length:{get:function(){return Q.packedLength}}}),Q.prototype.clone=function(t){return Q.clone(this,t)},Q.prototype.equals=function(t){return Q.equals(this,t)},Q.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]&&t[4]===e[n+4]&&t[5]===e[n+5]&&t[6]===e[n+6]&&t[7]===e[n+7]&&t[8]===e[n+8]},Q.prototype.equalsEpsilon=function(t,e){return Q.equalsEpsilon(this,t,e)},Q.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})\n(${this[1]}, ${this[4]}, ${this[7]})\n(${this[2]}, ${this[5]}, ${this[8]})`},O(Object.create)&&(ft.prototype=Object.create(Error.prototype),ft.prototype.constructor=ft),ft.prototype.toString=function(){let t=`${this.name}: ${this.message}`;return O(this.stack)&&(t+=`\n${this.stack.toString()}`),t},ht.packedLength=16,ht.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e[n++]=t[4],e[n++]=t[5],e[n++]=t[6],e[n++]=t[7],e[n++]=t[8],e[n++]=t[9],e[n++]=t[10],e[n++]=t[11],e[n++]=t[12],e[n++]=t[13],e[n++]=t[14],e[n]=t[15],e},ht.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new ht),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n[4]=t[e++],n[5]=t[e++],n[6]=t[e++],n[7]=t[e++],n[8]=t[e++],n[9]=t[e++],n[10]=t[e++],n[11]=t[e++],n[12]=t[e++],n[13]=t[e++],n[14]=t[e++],n[15]=t[e],n},ht.packArray=function(t,e){T.defined("array",t);const n=t.length,r=16*n;if(O(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 16 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)ht.pack(t[o],e,16*o);return e},ht.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,16),t.length%16!=0)throw new b("array length must be a multiple of 16.");const n=t.length;O(e)?e.length=n/16:e=new Array(n/16);for(let r=0;r<n;r+=16){const n=r/16;e[n]=ht.unpack(t,r,e[n])}return e},ht.clone=function(t,e){if(O(t))return O(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e):new ht(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])},ht.fromArray=ht.unpack,ht.fromColumnMajorArray=function(t,e){return T.defined("values",t),ht.clone(t,e)},ht.fromRowMajorArray=function(t,e){return T.defined("values",t),O(e)?(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e):new ht(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},ht.fromRotationTranslation=function(t,e,n){return T.typeOf.object("rotation",t),e=e??L.ZERO,O(n)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=0,n[4]=t[3],n[5]=t[4],n[6]=t[5],n[7]=0,n[8]=t[6],n[9]=t[7],n[10]=t[8],n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n):new ht(t[0],t[3],t[6],e.x,t[1],t[4],t[7],e.y,t[2],t[5],t[8],e.z,0,0,0,1)},ht.fromTranslationQuaternionRotationScale=function(t,e,n,r){T.typeOf.object("translation",t),T.typeOf.object("rotation",e),T.typeOf.object("scale",n),O(r)||(r=new ht);const o=n.x,i=n.y,s=n.z,a=e.x*e.x,u=e.x*e.y,c=e.x*e.z,l=e.x*e.w,f=e.y*e.y,h=e.y*e.z,p=e.y*e.w,d=e.z*e.z,m=e.z*e.w,y=e.w*e.w,g=a-f-d+y,w=2*(u-m),E=2*(c+p),_=2*(u+m),b=-a+f-d+y,A=2*(h-l),x=2*(c-p),R=2*(h+l),S=-a-f+d+y;return r[0]=g*o,r[1]=_*o,r[2]=x*o,r[3]=0,r[4]=w*i,r[5]=b*i,r[6]=R*i,r[7]=0,r[8]=E*s,r[9]=A*s,r[10]=S*s,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r},ht.fromTranslationRotationScale=function(t,e){return T.typeOf.object("translationRotationScale",t),ht.fromTranslationQuaternionRotationScale(t.translation,t.rotation,t.scale,e)},ht.fromTranslation=function(t,e){return T.typeOf.object("translation",t),ht.fromRotationTranslation(Q.IDENTITY,t,e)},ht.fromScale=function(t,e){return T.typeOf.object("scale",t),O(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t.y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t.z,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e):new ht(t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1)},ht.fromUniformScale=function(t,e){return T.typeOf.number("scale",t),O(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e):new ht(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1)},ht.fromRotation=function(t,e){return T.typeOf.object("rotation",t),O(e)||(e=new ht),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e[4]=t[3],e[5]=t[4],e[6]=t[5],e[7]=0,e[8]=t[6],e[9]=t[7],e[10]=t[8],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};const pt=new L,dt=new L,mt=new L;ht.fromCamera=function(t,e){T.typeOf.object("camera",t);const n=t.position,r=t.direction,o=t.up;T.typeOf.object("camera.position",n),T.typeOf.object("camera.direction",r),T.typeOf.object("camera.up",o),L.normalize(r,pt),L.normalize(L.cross(pt,o,dt),dt),L.normalize(L.cross(dt,pt,mt),mt);const i=dt.x,s=dt.y,a=dt.z,u=pt.x,c=pt.y,l=pt.z,f=mt.x,h=mt.y,p=mt.z,d=n.x,m=n.y,y=n.z,g=i*-d+s*-m+a*-y,w=f*-d+h*-m+p*-y,E=u*d+c*m+l*y;return O(e)?(e[0]=i,e[1]=f,e[2]=-u,e[3]=0,e[4]=s,e[5]=h,e[6]=-c,e[7]=0,e[8]=a,e[9]=p,e[10]=-l,e[11]=0,e[12]=g,e[13]=w,e[14]=E,e[15]=1,e):new ht(i,s,a,g,f,h,p,w,-u,-c,-l,E,0,0,0,1)},ht.computePerspectiveFieldOfView=function(t,e,n,r,o){T.typeOf.number.greaterThan("fovY",t,0),T.typeOf.number.lessThan("fovY",t,Math.PI),T.typeOf.number.greaterThan("near",n,0),T.typeOf.number.greaterThan("far",r,0),T.typeOf.object("result",o);const i=1/Math.tan(.5*t),s=i/e,a=(r+n)/(n-r),u=2*r*n/(n-r);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a,o[11]=-1,o[12]=0,o[13]=0,o[14]=u,o[15]=0,o},ht.computeOrthographicOffCenter=function(t,e,n,r,o,i,s){T.typeOf.number("left",t),T.typeOf.number("right",e),T.typeOf.number("bottom",n),T.typeOf.number("top",r),T.typeOf.number("near",o),T.typeOf.number("far",i),T.typeOf.object("result",s);let a=1/(e-t),u=1/(r-n),c=1/(i-o);const l=-(e+t)*a,f=-(r+n)*u,h=-(i+o)*c;return a*=2,u*=2,c*=-2,s[0]=a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=c,s[11]=0,s[12]=l,s[13]=f,s[14]=h,s[15]=1,s},ht.computePerspectiveOffCenter=function(t,e,n,r,o,i,s){T.typeOf.number("left",t),T.typeOf.number("right",e),T.typeOf.number("bottom",n),T.typeOf.number("top",r),T.typeOf.number("near",o),T.typeOf.number("far",i),T.typeOf.object("result",s);const a=2*o/(e-t),u=2*o/(r-n),c=(e+t)/(e-t),l=(r+n)/(r-n),f=-(i+o)/(i-o),h=-2*i*o/(i-o);return s[0]=a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=u,s[6]=0,s[7]=0,s[8]=c,s[9]=l,s[10]=f,s[11]=-1,s[12]=0,s[13]=0,s[14]=h,s[15]=0,s},ht.computeInfinitePerspectiveOffCenter=function(t,e,n,r,o,i){T.typeOf.number("left",t),T.typeOf.number("right",e),T.typeOf.number("bottom",n),T.typeOf.number("top",r),T.typeOf.number("near",o),T.typeOf.object("result",i);const s=2*o/(e-t),a=2*o/(r-n),u=(e+t)/(e-t),c=(r+n)/(r-n),l=-2*o;return i[0]=s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=u,i[9]=c,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=l,i[15]=0,i},ht.computeViewportTransformation=function(t,e,n,r){O(r)||(r=new ht);const o=(t=t??Z.EMPTY_OBJECT).x??0,i=t.y??0;e=e??0;const s=.5*(t.width??0),a=.5*(t.height??0),u=.5*((n=n??1)-e),c=s,l=a,f=u,h=o+s,p=i+a,d=e+u;return r[0]=c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=f,r[11]=0,r[12]=h,r[13]=p,r[14]=d,r[15]=1,r},ht.computeView=function(t,e,n,r,o){return T.typeOf.object("position",t),T.typeOf.object("direction",e),T.typeOf.object("up",n),T.typeOf.object("right",r),T.typeOf.object("result",o),o[0]=r.x,o[1]=n.x,o[2]=-e.x,o[3]=0,o[4]=r.y,o[5]=n.y,o[6]=-e.y,o[7]=0,o[8]=r.z,o[9]=n.z,o[10]=-e.z,o[11]=0,o[12]=-L.dot(r,t),o[13]=-L.dot(n,t),o[14]=L.dot(e,t),o[15]=1,o},ht.toArray=function(t,e){return T.typeOf.object("matrix",t),O(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e):[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},ht.getElementIndex=function(t,e){return T.typeOf.number.greaterThanOrEquals("row",e,0),T.typeOf.number.lessThanOrEquals("row",e,3),T.typeOf.number.greaterThanOrEquals("column",t,0),T.typeOf.number.lessThanOrEquals("column",t,3),4*t+e},ht.getColumn=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("result",n);const r=4*e,o=t[r],i=t[r+1],s=t[r+2],a=t[r+3];return n.x=o,n.y=i,n.z=s,n.w=a,n},ht.setColumn=function(t,e,n,r){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("cartesian",n),T.typeOf.object("result",r);const o=4*e;return(r=ht.clone(t,r))[o]=n.x,r[o+1]=n.y,r[o+2]=n.z,r[o+3]=n.w,r},ht.getRow=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("result",n);const r=t[e],o=t[e+4],i=t[e+8],s=t[e+12];return n.x=r,n.y=o,n.z=i,n.w=s,n},ht.setRow=function(t,e,n,r){return T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,3),T.typeOf.object("cartesian",n),T.typeOf.object("result",r),(r=ht.clone(t,r))[e]=n.x,r[e+4]=n.y,r[e+8]=n.z,r[e+12]=n.w,r},ht.setTranslation=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.object("translation",e),T.typeOf.object("result",n),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=t[15],n};const yt=new L;ht.setScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=ht.getScale(t,yt),o=e.x/r.x,i=e.y/r.y,s=e.z/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3],n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[7]=t[7],n[8]=t[8]*s,n[9]=t[9]*s,n[10]=t[10]*s,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n};const gt=new L;ht.setUniformScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n);const r=ht.getScale(t,gt),o=e/r.x,i=e/r.y,s=e/r.z;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3],n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[7]=t[7],n[8]=t[8]*s,n[9]=t[9]*s,n[10]=t[10]*s,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n};const wt=new L;ht.getScale=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=L.magnitude(L.fromElements(t[0],t[1],t[2],wt)),e.y=L.magnitude(L.fromElements(t[4],t[5],t[6],wt)),e.z=L.magnitude(L.fromElements(t[8],t[9],t[10],wt)),e};const Et=new L;ht.getMaximumScale=function(t){return ht.getScale(t,Et),L.maximumComponent(Et)};const _t=new L;ht.setRotation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("result",n);const r=ht.getScale(t,_t);return n[0]=e[0]*r.x,n[1]=e[1]*r.x,n[2]=e[2]*r.x,n[3]=t[3],n[4]=e[3]*r.y,n[5]=e[4]*r.y,n[6]=e[5]*r.y,n[7]=t[7],n[8]=e[6]*r.z,n[9]=e[7]*r.z,n[10]=e[8]*r.z,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n};const Ot=new L;ht.getRotation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=ht.getScale(t,Ot);return e[0]=t[0]/n.x,e[1]=t[1]/n.x,e[2]=t[2]/n.x,e[3]=t[4]/n.y,e[4]=t[5]/n.y,e[5]=t[6]/n.y,e[6]=t[8]/n.z,e[7]=t[9]/n.z,e[8]=t[10]/n.z,e},ht.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],m=t[12],y=t[13],g=t[14],w=t[15],E=e[0],_=e[1],O=e[2],b=e[3],A=e[4],x=e[5],R=e[6],S=e[7],I=e[8],N=e[9],v=e[10],M=e[11],P=e[12],C=e[13],L=e[14],U=e[15],q=r*E+a*_+f*O+m*b,D=o*E+u*_+h*O+y*b,z=i*E+c*_+p*O+g*b,j=s*E+l*_+d*O+w*b,F=r*A+a*x+f*R+m*S,B=o*A+u*x+h*R+y*S,G=i*A+c*x+p*R+g*S,k=s*A+l*x+d*R+w*S,W=r*I+a*N+f*v+m*M,V=o*I+u*N+h*v+y*M,H=i*I+c*N+p*v+g*M,X=s*I+l*N+d*v+w*M,Y=r*P+a*C+f*L+m*U,$=o*P+u*C+h*L+y*U,Z=i*P+c*C+p*L+g*U,Q=s*P+l*C+d*L+w*U;return n[0]=q,n[1]=D,n[2]=z,n[3]=j,n[4]=F,n[5]=B,n[6]=G,n[7]=k,n[8]=W,n[9]=V,n[10]=H,n[11]=X,n[12]=Y,n[13]=$,n[14]=Z,n[15]=Q,n},ht.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n[9]=t[9]+e[9],n[10]=t[10]+e[10],n[11]=t[11]+e[11],n[12]=t[12]+e[12],n[13]=t[13]+e[13],n[14]=t[14]+e[14],n[15]=t[15]+e[15],n},ht.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n[9]=t[9]-e[9],n[10]=t[10]-e[10],n[11]=t[11]-e[11],n[12]=t[12]-e[12],n[13]=t[13]-e[13],n[14]=t[14]-e[14],n[15]=t[15]-e[15],n},ht.multiplyTransformation=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0],o=t[1],i=t[2],s=t[4],a=t[5],u=t[6],c=t[8],l=t[9],f=t[10],h=t[12],p=t[13],d=t[14],m=e[0],y=e[1],g=e[2],w=e[4],E=e[5],_=e[6],O=e[8],b=e[9],A=e[10],x=e[12],R=e[13],S=e[14],I=r*m+s*y+c*g,N=o*m+a*y+l*g,v=i*m+u*y+f*g,M=r*w+s*E+c*_,P=o*w+a*E+l*_,C=i*w+u*E+f*_,L=r*O+s*b+c*A,U=o*O+a*b+l*A,q=i*O+u*b+f*A,D=r*x+s*R+c*S+h,z=o*x+a*R+l*S+p,j=i*x+u*R+f*S+d;return n[0]=I,n[1]=N,n[2]=v,n[3]=0,n[4]=M,n[5]=P,n[6]=C,n[7]=0,n[8]=L,n[9]=U,n[10]=q,n[11]=0,n[12]=D,n[13]=z,n[14]=j,n[15]=1,n},ht.multiplyByMatrix3=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("rotation",e),T.typeOf.object("result",n);const r=t[0],o=t[1],i=t[2],s=t[4],a=t[5],u=t[6],c=t[8],l=t[9],f=t[10],h=e[0],p=e[1],d=e[2],m=e[3],y=e[4],g=e[5],w=e[6],E=e[7],_=e[8],O=r*h+s*p+c*d,b=o*h+a*p+l*d,A=i*h+u*p+f*d,x=r*m+s*y+c*g,R=o*m+a*y+l*g,S=i*m+u*y+f*g,I=r*w+s*E+c*_,N=o*w+a*E+l*_,v=i*w+u*E+f*_;return n[0]=O,n[1]=b,n[2]=A,n[3]=0,n[4]=x,n[5]=R,n[6]=S,n[7]=0,n[8]=I,n[9]=N,n[10]=v,n[11]=0,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},ht.multiplyByTranslation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("translation",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,s=r*t[0]+o*t[4]+i*t[8]+t[12],a=r*t[1]+o*t[5]+i*t[9]+t[13],u=r*t[2]+o*t[6]+i*t[10]+t[14];return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=s,n[13]=a,n[14]=u,n[15]=t[15],n},ht.multiplyByScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z;return 1===r&&1===o&&1===i?ht.clone(t,n):(n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=t[3],n[4]=o*t[4],n[5]=o*t[5],n[6]=o*t[6],n[7]=t[7],n[8]=i*t[8],n[9]=i*t[9],n[10]=i*t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n)},ht.multiplyByUniformScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3],n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7],n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},ht.multiplyByVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,s=e.w,a=t[0]*r+t[4]*o+t[8]*i+t[12]*s,u=t[1]*r+t[5]*o+t[9]*i+t[13]*s,c=t[2]*r+t[6]*o+t[10]*i+t[14]*s,l=t[3]*r+t[7]*o+t[11]*i+t[15]*s;return n.x=a,n.y=u,n.z=c,n.w=l,n},ht.multiplyByPointAsVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,s=t[0]*r+t[4]*o+t[8]*i,a=t[1]*r+t[5]*o+t[9]*i,u=t[2]*r+t[6]*o+t[10]*i;return n.x=s,n.y=a,n.z=u,n},ht.multiplyByPoint=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=e.x,o=e.y,i=e.z,s=t[0]*r+t[4]*o+t[8]*i+t[12],a=t[1]*r+t[5]*o+t[9]*i+t[13],u=t[2]*r+t[6]*o+t[10]*i+t[14];return n.x=s,n.y=a,n.z=u,n},ht.multiplyByScalar=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12]*e,n[13]=t[13]*e,n[14]=t[14]*e,n[15]=t[15]*e,n},ht.negate=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ht.transpose=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[1],r=t[2],o=t[3],i=t[6],s=t[7],a=t[11];return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[10]=t[10],e[11]=t[14],e[12]=o,e[13]=s,e[14]=a,e[15]=t[15],e},ht.abs=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e[4]=Math.abs(t[4]),e[5]=Math.abs(t[5]),e[6]=Math.abs(t[6]),e[7]=Math.abs(t[7]),e[8]=Math.abs(t[8]),e[9]=Math.abs(t[9]),e[10]=Math.abs(t[10]),e[11]=Math.abs(t[11]),e[12]=Math.abs(t[12]),e[13]=Math.abs(t[13]),e[14]=Math.abs(t[14]),e[15]=Math.abs(t[15]),e},ht.equals=function(t,e){return t===e||O(t)&&O(e)&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[3]===e[3]&&t[7]===e[7]&&t[11]===e[11]&&t[15]===e[15]},ht.equalsEpsilon=function(t,e,n){return n=n??0,t===e||O(t)&&O(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n&&Math.abs(t[4]-e[4])<=n&&Math.abs(t[5]-e[5])<=n&&Math.abs(t[6]-e[6])<=n&&Math.abs(t[7]-e[7])<=n&&Math.abs(t[8]-e[8])<=n&&Math.abs(t[9]-e[9])<=n&&Math.abs(t[10]-e[10])<=n&&Math.abs(t[11]-e[11])<=n&&Math.abs(t[12]-e[12])<=n&&Math.abs(t[13]-e[13])<=n&&Math.abs(t[14]-e[14])<=n&&Math.abs(t[15]-e[15])<=n},ht.getTranslation=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=t[12],e.y=t[13],e.z=t[14],e},ht.getMatrix3=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e};const bt=new Q,Tt=new Q,At=new G,xt=new G(0,0,0,1);ht.inverse=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[4],o=t[8],i=t[12],s=t[1],a=t[5],u=t[9],c=t[13],l=t[2],f=t[6],h=t[10],p=t[14],d=t[3],m=t[7],y=t[11],g=t[15];let w=h*g,E=p*y,_=f*g,O=p*m,b=f*y,A=h*m,x=l*g,R=p*d,S=l*y,I=h*d,N=l*m,v=f*d;const P=w*a+O*u+b*c-(E*a+_*u+A*c),C=E*s+x*u+I*c-(w*s+R*u+S*c),L=_*s+R*a+N*c-(O*s+x*a+v*c),U=A*s+S*a+v*u-(b*s+I*a+N*u),q=E*r+_*o+A*i-(w*r+O*o+b*i),D=w*n+R*o+S*i-(E*n+x*o+I*i),z=O*n+x*r+v*i-(_*n+R*r+N*i),j=b*n+I*r+N*o-(A*n+S*r+v*o);w=o*c,E=i*u,_=r*c,O=i*a,b=r*u,A=o*a,x=n*c,R=i*s,S=n*u,I=o*s,N=n*a,v=r*s;const F=w*m+O*y+b*g-(E*m+_*y+A*g),B=E*d+x*y+I*g-(w*d+R*y+S*g),k=_*d+R*m+N*g-(O*d+x*m+v*g),W=A*d+S*m+v*y-(b*d+I*m+N*y),V=_*h+A*p+E*f-(b*p+w*f+O*h),H=S*p+w*l+R*h-(x*h+I*p+E*l),X=x*f+v*p+O*l-(N*p+_*l+R*f),Y=N*h+b*l+I*f-(S*f+v*h+A*l);let $=n*P+r*C+o*L+i*U;if(Math.abs($)<M.EPSILON21){if(Q.equalsEpsilon(ht.getMatrix3(t,bt),Tt,M.EPSILON7)&&G.equals(ht.getRow(t,3,At),xt))return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=0,e[11]=0,e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=1,e;throw new ft("matrix is not invertible because its determinate is zero.")}return $=1/$,e[0]=P*$,e[1]=C*$,e[2]=L*$,e[3]=U*$,e[4]=q*$,e[5]=D*$,e[6]=z*$,e[7]=j*$,e[8]=F*$,e[9]=B*$,e[10]=k*$,e[11]=W*$,e[12]=V*$,e[13]=H*$,e[14]=X*$,e[15]=Y*$,e},ht.inverseTransformation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[1],o=t[2],i=t[4],s=t[5],a=t[6],u=t[8],c=t[9],l=t[10],f=t[12],h=t[13],p=t[14],d=-n*f-r*h-o*p,m=-i*f-s*h-a*p,y=-u*f-c*h-l*p;return e[0]=n,e[1]=i,e[2]=u,e[3]=0,e[4]=r,e[5]=s,e[6]=c,e[7]=0,e[8]=o,e[9]=a,e[10]=l,e[11]=0,e[12]=d,e[13]=m,e[14]=y,e[15]=1,e};const Rt=new ht;ht.inverseTranspose=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),ht.inverse(ht.transpose(t,Rt),e)},ht.IDENTITY=Object.freeze(new ht(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),ht.ZERO=Object.freeze(new ht(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),ht.COLUMN0ROW0=0,ht.COLUMN0ROW1=1,ht.COLUMN0ROW2=2,ht.COLUMN0ROW3=3,ht.COLUMN1ROW0=4,ht.COLUMN1ROW1=5,ht.COLUMN1ROW2=6,ht.COLUMN1ROW3=7,ht.COLUMN2ROW0=8,ht.COLUMN2ROW1=9,ht.COLUMN2ROW2=10,ht.COLUMN2ROW3=11,ht.COLUMN3ROW0=12,ht.COLUMN3ROW1=13,ht.COLUMN3ROW2=14,ht.COLUMN3ROW3=15,Object.defineProperties(ht.prototype,{length:{get:function(){return ht.packedLength}}}),ht.prototype.clone=function(t){return ht.clone(this,t)},ht.prototype.equals=function(t){return ht.equals(this,t)},ht.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]&&t[4]===e[n+4]&&t[5]===e[n+5]&&t[6]===e[n+6]&&t[7]===e[n+7]&&t[8]===e[n+8]&&t[9]===e[n+9]&&t[10]===e[n+10]&&t[11]===e[n+11]&&t[12]===e[n+12]&&t[13]===e[n+13]&&t[14]===e[n+14]&&t[15]===e[n+15]},ht.prototype.equalsEpsilon=function(t,e){return ht.equalsEpsilon(this,t,e)},ht.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})\n(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})\n(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})\n(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var St=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047});const It={UNSIGNED_BYTE:St.UNSIGNED_BYTE,UNSIGNED_SHORT:St.UNSIGNED_SHORT,UNSIGNED_INT:St.UNSIGNED_INT,getSizeInBytes:function(t){switch(t){case It.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case It.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case It.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}throw new b("indexDatatype is required and must be a valid IndexDatatype constant.")},fromSizeInBytes:function(t){switch(t){case 2:return It.UNSIGNED_SHORT;case 4:return It.UNSIGNED_INT;case 1:return It.UNSIGNED_BYTE;default:throw new b("Size in bytes cannot be mapped to an IndexDatatype")}},validate:function(t){return O(t)&&(t===It.UNSIGNED_BYTE||t===It.UNSIGNED_SHORT||t===It.UNSIGNED_INT)},createTypedArray:function(t,e){if(!O(t))throw new b("numberOfVertices is required.");return t>=M.SIXTY_FOUR_KILOBYTES?new Uint32Array(e):new Uint16Array(e)},createTypedArrayFromArrayBuffer:function(t,e,n,r){if(!O(t))throw new b("numberOfVertices is required.");if(!O(e))throw new b("sourceArray is required.");if(!O(n))throw new b("byteOffset is required.");return t>=M.SIXTY_FOUR_KILOBYTES?new Uint32Array(e,n,r):new Uint16Array(e,n,r)},fromTypedArray:function(t){if(t instanceof Uint8Array)return It.UNSIGNED_BYTE;if(t instanceof Uint16Array)return It.UNSIGNED_SHORT;if(t instanceof Uint32Array)return It.UNSIGNED_INT;throw new b("array must be a Uint8Array, Uint16Array, or Uint32Array.")}};var Nt=Object.freeze(It);let vt;const Mt={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Pt={};let Ct,Lt,Ut,qt,Dt,zt,jt,Ft,Bt,Gt,kt,Wt,Vt,Ht,Xt,Yt,$t,Zt;function Qt(t){const e=t.split(".");for(let n=0,r=e.length;n<r;++n)e[n]=parseInt(e[n],10);return e}function Kt(){if(!O(Lt)&&(Lt=!1,!ne())){const t=/ Chrome\/([\.0-9]+)/.exec(Ct.userAgent);null!==t&&(Lt=!0,Ut=Qt(t[1]))}return Lt}function Jt(){if(!O(qt)&&(qt=!1,!Kt()&&!ne()&&/ Safari\/[\.0-9]+/.test(Ct.userAgent))){const t=/ Version\/([\.0-9]+)/.exec(Ct.userAgent);null!==t&&(qt=!0,Dt=Qt(t[1]))}return qt}function te(){if(!O(zt)){zt=!1;const t=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Ct.userAgent);null!==t&&(zt=!0,jt=Qt(t[1]),jt.isNightly=!!t[2])}return zt}function ee(){if(!O(Ft)){let t;Ft=!1,"Microsoft Internet Explorer"===Ct.appName?(t=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Ct.userAgent),null!==t&&(Ft=!0,Bt=Qt(t[1]))):"Netscape"===Ct.appName&&(t=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Ct.userAgent),null!==t&&(Ft=!0,Bt=Qt(t[1])))}return Ft}function ne(){if(!O(Gt)){Gt=!1;const t=/ Edg\/([\.0-9]+)/.exec(Ct.userAgent);null!==t&&(Gt=!0,kt=Qt(t[1]))}return Gt}function re(){if(!O(Wt)){Wt=!1;const t=/Firefox\/([\.0-9]+)/.exec(Ct.userAgent);null!==t&&(Wt=!0,Vt=Qt(t[1]))}return Wt}function oe(){if(!O(Zt)){const t=document.createElement("canvas");t.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");const e=t.style.imageRendering;Zt=O(e)&&""!==e,Zt&&($t=e)}return Zt}function ie(){if(!ie.initialized)throw new b("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return ie._result}Object.defineProperties(Pt,{element:{get:function(){if(Pt.supportsFullscreen())return document[Mt.fullscreenElement]}},changeEventName:{get:function(){if(Pt.supportsFullscreen())return Mt.fullscreenchange}},errorEventName:{get:function(){if(Pt.supportsFullscreen())return Mt.fullscreenerror}},enabled:{get:function(){if(Pt.supportsFullscreen())return document[Mt.fullscreenEnabled]}},fullscreen:{get:function(){if(Pt.supportsFullscreen())return null!==Pt.element}}}),Pt.supportsFullscreen=function(){if(O(vt))return vt;vt=!1;const t=document.body;if("function"==typeof t.requestFullscreen)return Mt.requestFullscreen="requestFullscreen",Mt.exitFullscreen="exitFullscreen",Mt.fullscreenEnabled="fullscreenEnabled",Mt.fullscreenElement="fullscreenElement",Mt.fullscreenchange="fullscreenchange",Mt.fullscreenerror="fullscreenerror",vt=!0,vt;const e=["webkit","moz","o","ms","khtml"];let n;for(let r=0,o=e.length;r<o;++r){const o=e[r];n=`${o}RequestFullscreen`,"function"==typeof t[n]?(Mt.requestFullscreen=n,vt=!0):(n=`${o}RequestFullScreen`,"function"==typeof t[n]&&(Mt.requestFullscreen=n,vt=!0)),n=`${o}ExitFullscreen`,"function"==typeof document[n]?Mt.exitFullscreen=n:(n=`${o}CancelFullScreen`,"function"==typeof document[n]&&(Mt.exitFullscreen=n)),n=`${o}FullscreenEnabled`,void 0!==document[n]?Mt.fullscreenEnabled=n:(n=`${o}FullScreenEnabled`,void 0!==document[n]&&(Mt.fullscreenEnabled=n)),n=`${o}FullscreenElement`,void 0!==document[n]?Mt.fullscreenElement=n:(n=`${o}FullScreenElement`,void 0!==document[n]&&(Mt.fullscreenElement=n)),n=`${o}fullscreenchange`,void 0!==document[`on${n}`]&&("ms"===o&&(n="MSFullscreenChange"),Mt.fullscreenchange=n),n=`${o}fullscreenerror`,void 0!==document[`on${n}`]&&("ms"===o&&(n="MSFullscreenError"),Mt.fullscreenerror=n)}return vt},Pt.requestFullscreen=function(t,e){Pt.supportsFullscreen()&&t[Mt.requestFullscreen]({vrDisplay:e})},Pt.exitFullscreen=function(){Pt.supportsFullscreen()&&document[Mt.exitFullscreen]()},Pt._names=Mt,Ct="undefined"!=typeof navigator?navigator:{},ie._promise=void 0,ie._result=void 0,ie.initialize=function(){return O(ie._promise)||(ie._promise=new Promise((t=>{const e=new Image;e.onload=function(){ie._result=e.width>0&&e.height>0,t(ie._result)},e.onerror=function(){ie._result=!1,t(ie._result)},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}))),ie._promise},Object.defineProperties(ie,{initialized:{get:function(){return O(ie._result)}}});const se=[];"undefined"!=typeof ArrayBuffer&&(se.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&se.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&se.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&se.push(BigInt64Array),"undefined"!=typeof BigUint64Array&&se.push(BigUint64Array));const ae={isChrome:Kt,chromeVersion:function(){return Kt()&&Ut},isSafari:Jt,safariVersion:function(){return Jt()&&Dt},isWebkit:te,webkitVersion:function(){return te()&&jt},isInternetExplorer:ee,internetExplorerVersion:function(){return ee()&&Bt},isEdge:ne,edgeVersion:function(){return ne()&&kt},isFirefox:re,firefoxVersion:function(){return re()&&Vt},isWindows:function(){return O(Ht)||(Ht=/Windows/i.test(Ct.appVersion)),Ht},isIPadOrIOS:function(){return O(Xt)||(Xt="iPhone"===navigator.platform||"iPod"===navigator.platform||"iPad"===navigator.platform),Xt},hardwareConcurrency:Ct.hardwareConcurrency??3,supportsPointerEvents:function(){return O(Yt)||(Yt=!re()&&"undefined"!=typeof PointerEvent&&(!O(Ct.pointerEnabled)||Ct.pointerEnabled)),Yt},supportsImageRenderingPixelated:oe,supportsWebP:ie,imageRenderingValue:function(){return oe()?$t:void 0},typedArrayTypes:se};function ue(t,e){this.x=t??0,this.y=e??0}ae.supportsBasis=function(t){return ae.supportsWebAssembly()&&t.context.supportsBasis},ae.supportsFullscreen=function(){return Pt.supportsFullscreen()},ae.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},ae.supportsBigInt64Array=function(){return"undefined"!=typeof BigInt64Array},ae.supportsBigUint64Array=function(){return"undefined"!=typeof BigUint64Array},ae.supportsBigInt=function(){return"undefined"!=typeof BigInt},ae.supportsWebWorkers=function(){return"undefined"!=typeof Worker},ae.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly},ae.supportsWebgl2=function(t){return T.defined("scene",t),t.context.webgl2},ae.supportsEsmWebWorkers=function(){return!re()||parseInt(Vt)>=114},ue.fromElements=function(t,e,n){return O(n)?(n.x=t,n.y=e,n):new ue(t,e)},ue.clone=function(t,e){if(O(t))return O(e)?(e.x=t.x,e.y=t.y,e):new ue(t.x,t.y)},ue.fromCartesian3=ue.clone,ue.fromCartesian4=ue.clone,ue.packedLength=2,ue.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n]=t.y,e},ue.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new ue),n.x=t[e++],n.y=t[e],n},ue.packArray=function(t,e){T.defined("array",t);const n=t.length,r=2*n;if(O(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 2 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)ue.pack(t[o],e,2*o);return e},ue.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,2),t.length%2!=0)throw new b("array length must be a multiple of 2.");const n=t.length;O(e)?e.length=n/2:e=new Array(n/2);for(let r=0;r<n;r+=2){const n=r/2;e[n]=ue.unpack(t,r,e[n])}return e},ue.fromArray=ue.unpack,ue.maximumComponent=function(t){return T.typeOf.object("cartesian",t),Math.max(t.x,t.y)},ue.minimumComponent=function(t){return T.typeOf.object("cartesian",t),Math.min(t.x,t.y)},ue.minimumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n},ue.maximumByComponent=function(t,e,n){return T.typeOf.object("first",t),T.typeOf.object("second",e),T.typeOf.object("result",n),n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n},ue.clamp=function(t,e,n,r){T.typeOf.object("value",t),T.typeOf.object("min",e),T.typeOf.object("max",n),T.typeOf.object("result",r);const o=M.clamp(t.x,e.x,n.x),i=M.clamp(t.y,e.y,n.y);return r.x=o,r.y=i,r},ue.magnitudeSquared=function(t){return T.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y},ue.magnitude=function(t){return Math.sqrt(ue.magnitudeSquared(t))};const ce=new ue;ue.distance=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),ue.subtract(t,e,ce),ue.magnitude(ce)},ue.distanceSquared=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),ue.subtract(t,e,ce),ue.magnitudeSquared(ce)},ue.normalize=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=ue.magnitude(t);if(e.x=t.x/n,e.y=t.y/n,isNaN(e.x)||isNaN(e.y))throw new b("normalized result is not a number");return e},ue.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y},ue.cross=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.y-t.y*e.x},ue.multiplyComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x*e.x,n.y=t.y*e.y,n},ue.divideComponents=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x/e.x,n.y=t.y/e.y,n},ue.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n},ue.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n},ue.multiplyByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n},ue.divideByScalar=function(t,e,n){return T.typeOf.object("cartesian",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n},ue.negate=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e},ue.abs=function(t,e){return T.typeOf.object("cartesian",t),T.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e};const le=new ue;ue.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),ue.multiplyByScalar(e,n,le),r=ue.multiplyByScalar(t,1-n,r),ue.add(le,r,r)};const fe=new ue,he=new ue;ue.angleBetween=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),ue.normalize(t,fe),ue.normalize(e,he),M.acosClamped(ue.dot(fe,he))};const pe=new ue;ue.mostOrthogonalAxis=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=ue.normalize(t,pe);return ue.abs(n,n),n.x<=n.y?ue.clone(ue.UNIT_X,e):ue.clone(ue.UNIT_Y,e)},ue.equals=function(t,e){return t===e||O(t)&&O(e)&&t.x===e.x&&t.y===e.y},ue.equalsArray=function(t,e,n){return t.x===e[n]&&t.y===e[n+1]},ue.equalsEpsilon=function(t,e,n,r){return t===e||O(t)&&O(e)&&M.equalsEpsilon(t.x,e.x,n,r)&&M.equalsEpsilon(t.y,e.y,n,r)},ue.ZERO=Object.freeze(new ue(0,0)),ue.ONE=Object.freeze(new ue(1,1)),ue.UNIT_X=Object.freeze(new ue(1,0)),ue.UNIT_Y=Object.freeze(new ue(0,1)),ue.prototype.clone=function(t){return ue.clone(this,t)},ue.prototype.equals=function(t){return ue.equals(this,t)},ue.prototype.equalsEpsilon=function(t,e,n){return ue.equalsEpsilon(this,t,e,n)},ue.prototype.toString=function(){return`(${this.x}, ${this.y})`};const de=new L,me=new L;function ye(t,e,n,r,o){if(!O(t))throw new b("cartesian is required.");if(!O(e))throw new b("oneOverRadii is required.");if(!O(n))throw new b("oneOverRadiiSquared is required.");if(!O(r))throw new b("centerToleranceSquared is required.");const i=t.x,s=t.y,a=t.z,u=e.x,c=e.y,l=e.z,f=i*i*u*u,h=s*s*c*c,p=a*a*l*l,d=f+h+p,m=Math.sqrt(1/d),y=L.multiplyByScalar(t,m,de);if(d<r)return isFinite(m)?L.clone(y,o):void 0;const g=n.x,w=n.y,E=n.z,_=me;_.x=y.x*g*2,_.y=y.y*w*2,_.z=y.z*E*2;let T,A,x,R,S,I,N,v,P,C,U,q=(1-m)*L.magnitude(t)/(.5*L.magnitude(_)),D=0;do{q-=D,x=1/(1+q*g),R=1/(1+q*w),S=1/(1+q*E),I=x*x,N=R*R,v=S*S,P=I*x,C=N*R,U=v*S,T=f*I+h*N+p*v-1,A=f*P*g+h*C*w+p*U*E,D=T/(-2*A)}while(Math.abs(T)>M.EPSILON12);return O(o)?(o.x=i*x,o.y=s*R,o.z=a*S,o):new L(i*x,s*R,a*S)}function ge(t,e,n){this.longitude=t??0,this.latitude=e??0,this.height=n??0}ge.fromRadians=function(t,e,n,r){return T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),n=n??0,O(r)?(r.longitude=t,r.latitude=e,r.height=n,r):new ge(t,e,n)},ge.fromDegrees=function(t,e,n,r){return T.typeOf.number("longitude",t),T.typeOf.number("latitude",e),t=M.toRadians(t),e=M.toRadians(e),ge.fromRadians(t,e,n,r)};const we=new L,Ee=new L,_e=new L;function Oe(t,e,n,r){e=e??0,n=n??0,r=r??0,T.typeOf.number.greaterThanOrEquals("x",e,0),T.typeOf.number.greaterThanOrEquals("y",n,0),T.typeOf.number.greaterThanOrEquals("z",r,0),t._radii=new L(e,n,r),t._radiiSquared=new L(e*e,n*n,r*r),t._radiiToTheFourth=new L(e*e*e*e,n*n*n*n,r*r*r*r),t._oneOverRadii=new L(0===e?0:1/e,0===n?0:1/n,0===r?0:1/r),t._oneOverRadiiSquared=new L(0===e?0:1/(e*e),0===n?0:1/(n*n),0===r?0:1/(r*r)),t._minimumRadius=Math.min(e,n,r),t._maximumRadius=Math.max(e,n,r),t._centerToleranceSquared=M.EPSILON1,0!==t._radiiSquared.z&&(t._squaredXOverSquaredZ=t._radiiSquared.x/t._radiiSquared.z)}function be(t,e,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,Oe(this,t,e,n)}ge._ellipsoidOneOverRadii=new L(1/6378137,1/6378137,1/6356752.314245179),ge._ellipsoidOneOverRadiiSquared=new L(1/40680631590769,1/40680631590769,1/40408299984661.445),ge._ellipsoidCenterToleranceSquared=M.EPSILON1,ge.fromCartesian=function(t,e,n){const r=O(e)?e.oneOverRadii:ge._ellipsoidOneOverRadii,o=O(e)?e.oneOverRadiiSquared:ge._ellipsoidOneOverRadiiSquared,i=ye(t,r,o,O(e)?e._centerToleranceSquared:ge._ellipsoidCenterToleranceSquared,Ee);if(!O(i))return;let s=L.multiplyComponents(i,o,we);s=L.normalize(s,s);const a=L.subtract(t,i,_e),u=Math.atan2(s.y,s.x),c=Math.asin(s.z),l=M.sign(L.dot(a,t))*L.magnitude(a);return O(n)?(n.longitude=u,n.latitude=c,n.height=l,n):new ge(u,c,l)},ge.toCartesian=function(t,e,n){return T.defined("cartographic",t),L.fromRadians(t.longitude,t.latitude,t.height,e,n)},ge.clone=function(t,e){if(O(t))return O(e)?(e.longitude=t.longitude,e.latitude=t.latitude,e.height=t.height,e):new ge(t.longitude,t.latitude,t.height)},ge.equals=function(t,e){return t===e||O(t)&&O(e)&&t.longitude===e.longitude&&t.latitude===e.latitude&&t.height===e.height},ge.equalsEpsilon=function(t,e,n){return n=n??0,t===e||O(t)&&O(e)&&Math.abs(t.longitude-e.longitude)<=n&&Math.abs(t.latitude-e.latitude)<=n&&Math.abs(t.height-e.height)<=n},ge.ZERO=Object.freeze(new ge(0,0,0)),ge.prototype.clone=function(t){return ge.clone(this,t)},ge.prototype.equals=function(t){return ge.equals(this,t)},ge.prototype.equalsEpsilon=function(t,e){return ge.equalsEpsilon(this,t,e)},ge.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`},Object.defineProperties(be.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),be.clone=function(t,e){if(!O(t))return;const n=t._radii;return O(e)?(L.clone(n,e._radii),L.clone(t._radiiSquared,e._radiiSquared),L.clone(t._radiiToTheFourth,e._radiiToTheFourth),L.clone(t._oneOverRadii,e._oneOverRadii),L.clone(t._oneOverRadiiSquared,e._oneOverRadiiSquared),e._minimumRadius=t._minimumRadius,e._maximumRadius=t._maximumRadius,e._centerToleranceSquared=t._centerToleranceSquared,e):new be(n.x,n.y,n.z)},be.fromCartesian3=function(t,e){return O(e)||(e=new be),O(t)?(Oe(e,t.x,t.y,t.z),e):e},be.WGS84=Object.freeze(new be(6378137,6378137,6356752.314245179)),be.UNIT_SPHERE=Object.freeze(new be(1,1,1)),be.MOON=Object.freeze(new be(M.LUNAR_RADIUS,M.LUNAR_RADIUS,M.LUNAR_RADIUS)),be.MARS=Object.freeze(new be(3396190,3396190,3376200)),be._default=be.WGS84,Object.defineProperties(be,{default:{get:function(){return be._default},set:function(t){T.typeOf.object("value",t),be._default=t,L._ellipsoidRadiiSquared=t.radiiSquared,ge._ellipsoidOneOverRadii=t.oneOverRadii,ge._ellipsoidOneOverRadiiSquared=t.oneOverRadiiSquared,ge._ellipsoidCenterToleranceSquared=t._centerToleranceSquared}}}),be.prototype.clone=function(t){return be.clone(this,t)},be.packedLength=L.packedLength,be.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,L.pack(t._radii,e,n),e},be.unpack=function(t,e,n){T.defined("array",t),e=e??0;const r=L.unpack(t,e);return be.fromCartesian3(r,n)},be.prototype.geocentricSurfaceNormal=L.normalize,be.prototype.geodeticSurfaceNormalCartographic=function(t,e){T.typeOf.object("cartographic",t);const n=t.longitude,r=t.latitude,o=Math.cos(r),i=o*Math.cos(n),s=o*Math.sin(n),a=Math.sin(r);return O(e)||(e=new L),e.x=i,e.y=s,e.z=a,L.normalize(e,e)},be.prototype.geodeticSurfaceNormal=function(t,e){if(T.typeOf.object("cartesian",t),isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new b("cartesian has a NaN component");if(!L.equalsEpsilon(t,L.ZERO,M.EPSILON14))return O(e)||(e=new L),e=L.multiplyComponents(t,this._oneOverRadiiSquared,e),L.normalize(e,e)};const Te=new L,Ae=new L;be.prototype.cartographicToCartesian=function(t,e){const n=Te,r=Ae;this.geodeticSurfaceNormalCartographic(t,n),L.multiplyComponents(this._radiiSquared,n,r);const o=Math.sqrt(L.dot(n,r));return L.divideByScalar(r,o,r),L.multiplyByScalar(n,t.height,n),O(e)||(e=new L),L.add(r,n,e)},be.prototype.cartographicArrayToCartesianArray=function(t,e){T.defined("cartographics",t);const n=t.length;O(e)?e.length=n:e=new Array(n);for(let r=0;r<n;r++)e[r]=this.cartographicToCartesian(t[r],e[r]);return e};const xe=new L,Re=new L,Se=new L;be.prototype.cartesianToCartographic=function(t,e){const n=this.scaleToGeodeticSurface(t,Re);if(!O(n))return;const r=this.geodeticSurfaceNormal(n,xe),o=L.subtract(t,n,Se),i=Math.atan2(r.y,r.x),s=Math.asin(r.z),a=M.sign(L.dot(o,t))*L.magnitude(o);return O(e)?(e.longitude=i,e.latitude=s,e.height=a,e):new ge(i,s,a)},be.prototype.cartesianArrayToCartographicArray=function(t,e){T.defined("cartesians",t);const n=t.length;O(e)?e.length=n:e=new Array(n);for(let r=0;r<n;++r)e[r]=this.cartesianToCartographic(t[r],e[r]);return e},be.prototype.scaleToGeodeticSurface=function(t,e){return ye(t,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,e)},be.prototype.scaleToGeocentricSurface=function(t,e){T.typeOf.object("cartesian",t),O(e)||(e=new L);const n=t.x,r=t.y,o=t.z,i=this._oneOverRadiiSquared,s=1/Math.sqrt(n*n*i.x+r*r*i.y+o*o*i.z);return L.multiplyByScalar(t,s,e)},be.prototype.transformPositionToScaledSpace=function(t,e){return O(e)||(e=new L),L.multiplyComponents(t,this._oneOverRadii,e)},be.prototype.transformPositionFromScaledSpace=function(t,e){return O(e)||(e=new L),L.multiplyComponents(t,this._radii,e)},be.prototype.equals=function(t){return this===t||O(t)&&L.equals(this._radii,t._radii)},be.prototype.toString=function(){return this._radii.toString()},be.prototype.getSurfaceNormalIntersectionWithZAxis=function(t,e,n){if(T.typeOf.object("position",t),!M.equalsEpsilon(this._radii.x,this._radii.y,M.EPSILON15))throw new b("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");T.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),e=e??0;const r=this._squaredXOverSquaredZ;if(O(n)||(n=new L),n.x=0,n.y=0,n.z=t.z*(1-r),!(Math.abs(n.z)>=this._radii.z-e))return n};const Ie=new L;be.prototype.getLocalCurvature=function(t,e){T.typeOf.object("surfacePosition",t),O(e)||(e=new ue);const n=this.getSurfaceNormalIntersectionWithZAxis(t,0,Ie),r=L.distance(t,n),o=r*(this.minimumRadius*r/this.maximumRadius**2)**2;return ue.fromElements(1/r,1/o,e)};const Ne=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],ve=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function Me(t,e,n){T.typeOf.number("a",t),T.typeOf.number("b",e),T.typeOf.func("func",n);const r=.5*(e+t),o=.5*(e-t);let i=0;for(let s=0;s<5;s++){const t=o*Ne[s];i+=ve[s]*(n(r+t)+n(r-t))}return i*=o,i}function Pe(t){this._ellipsoid=t??be.default,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}be.prototype.surfaceArea=function(t){T.typeOf.object("rectangle",t);const e=t.west;let n=t.east;const r=t.south,o=t.north;for(;n<e;)n+=M.TWO_PI;const i=this._radiiSquared,s=i.x,a=i.y,u=i.z,c=s*a;return Me(r,o,(function(t){const r=Math.cos(t),o=Math.sin(t);return Math.cos(t)*Me(e,n,(function(t){const e=Math.cos(t),n=Math.sin(t);return Math.sqrt(c*o*o+u*(a*e*e+s*n*n)*r*r)}))}))},Object.defineProperties(Pe.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),Pe.prototype.project=function(t,e){const n=this._semimajorAxis,r=t.longitude*n,o=t.latitude*n,i=t.height;return O(e)?(e.x=r,e.y=o,e.z=i,e):new L(r,o,i)},Pe.prototype.unproject=function(t,e){if(!O(t))throw new b("cartesian is required");const n=this._oneOverSemimajorAxis,r=t.x*n,o=t.y*n,i=t.z;return O(e)?(e.longitude=r,e.latitude=o,e.height=i,e):new ge(r,o,i)};var Ce=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function Le(t,e,n){T.defined("array",t),T.defined("itemToFind",e),T.defined("comparator",n);let r,o,i=0,s=t.length-1;for(;i<=s;)if(r=~~((i+s)/2),o=n(t[r],e),o<0)i=r+1;else{if(!(o>0))return r;s=r-1}return~(s+1)}function Ue(t,e,n,r,o){this.xPoleWander=t,this.yPoleWander=e,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=o}function qe(t){if(null===t||isNaN(t))throw new b("year is required and must be a number.");return t%4==0&&t%100!=0||t%400==0}const De=[31,28,31,30,31,30,31,31,30,31,30,31];function ze(t,e,n,r,o,i,s,a){t=t??1,e=e??1,n=n??1,r=r??0,o=o??0,i=i??0,s=s??0,a=a??!1,T.typeOf.number.greaterThanOrEquals("Year",t,1),T.typeOf.number.lessThanOrEquals("Year",t,9999),T.typeOf.number.greaterThanOrEquals("Month",e,1),T.typeOf.number.lessThanOrEquals("Month",e,12),T.typeOf.number.greaterThanOrEquals("Day",n,1),T.typeOf.number.lessThanOrEquals("Day",n,31),T.typeOf.number.greaterThanOrEquals("Hour",r,0),T.typeOf.number.lessThanOrEquals("Hour",r,23),T.typeOf.number.greaterThanOrEquals("Minute",o,0),T.typeOf.number.lessThanOrEquals("Minute",o,59),T.typeOf.bool("IsLeapSecond",a),T.typeOf.number.greaterThanOrEquals("Second",i,0),T.typeOf.number.lessThanOrEquals("Second",i,a?60:59),T.typeOf.number.greaterThanOrEquals("Millisecond",s,0),T.typeOf.number.lessThan("Millisecond",s,1e3),function(){const r=2===e&&qe(t)?De[e-1]+1:De[e-1];if(n>r)throw new b("Month and Day represents invalid date")}(),this.year=t,this.month=e,this.day=n,this.hour=r,this.minute=o,this.second=i,this.millisecond=s,this.isLeapSecond=a}function je(t,e){this.julianDate=t,this.offset=e}var Fe=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Be=Object.freeze({UTC:0,TAI:1});const Ge=new ze,ke=[31,28,31,30,31,30,31,31,30,31,30,31];function We(t,e){return an.compare(t.julianDate,e.julianDate)}const Ve=new je;function He(t){Ve.julianDate=t;const e=an.leapSeconds;let n=Le(e,Ve,We);n<0&&(n=~n),n>=e.length&&(n=e.length-1);let r=e[n].offset;n>0&&an.secondsDifference(e[n].julianDate,t)>r&&(n--,r=e[n].offset),an.addSeconds(t,r,t)}function Xe(t,e){Ve.julianDate=t;const n=an.leapSeconds;let r=Le(n,Ve,We);if(r<0&&(r=~r),0===r)return an.addSeconds(t,-n[0].offset,e);if(r>=n.length)return an.addSeconds(t,-n[r-1].offset,e);const o=an.secondsDifference(n[r].julianDate,t);return 0===o?an.addSeconds(t,-n[r].offset,e):o<=1?void 0:an.addSeconds(t,-n[--r].offset,e)}function Ye(t,e,n){const r=e/Fe.SECONDS_PER_DAY|0;return t+=r,(e-=Fe.SECONDS_PER_DAY*r)<0&&(t--,e+=Fe.SECONDS_PER_DAY),n.dayNumber=t,n.secondsOfDay=e,n}function $e(t,e,n,r,o,i,s){const a=(e-14)/12|0,u=t+4800+a;let c=(1461*u/4|0)+(367*(e-2-12*a)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);const l=i+(r*Fe.SECONDS_PER_HOUR+o*Fe.SECONDS_PER_MINUTE+s*Fe.SECONDS_PER_MILLISECOND);return l>=43200&&(c-=1),[c,l]}const Ze=/^(\d{4})$/,Qe=/^(\d{4})-(\d{2})$/,Ke=/^(\d{4})-?(\d{3})$/,Je=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,tn=/^(\d{4})-?(\d{2})-?(\d{2})$/,en=/([Z+\-])?(\d{2})?:?(\d{2})?$/,nn=/^(\d{2})(\.\d+)?/.source+en.source,rn=/^(\d{2}):?(\d{2})(\.\d+)?/.source+en.source,on=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+en.source,sn="Invalid ISO 8601 date.";function an(t,e,n){this.dayNumber=void 0,this.secondsOfDay=void 0,t=t??0,e=e??0,n=n??Be.UTC;const r=0|t;Ye(r,e+=(t-r)*Fe.SECONDS_PER_DAY,this),n===Be.UTC&&He(this)}an.fromGregorianDate=function(t,e){if(!(t instanceof ze))throw new b("date must be a valid GregorianDate.");const n=$e(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond);return O(e)?(Ye(n[0],n[1],e),He(e),e):new an(n[0],n[1],Be.UTC)},an.fromDate=function(t,e){if(!(t instanceof Date)||isNaN(t.getTime()))throw new b("date must be a valid JavaScript Date.");const n=$e(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return O(e)?(Ye(n[0],n[1],e),He(e),e):new an(n[0],n[1],Be.UTC)},an.fromIso8601=function(t,e){if("string"!=typeof t)throw new b(sn);let n,r=(t=t.replace(",",".")).split("T"),o=1,i=1,s=0,a=0,u=0,c=0;const l=r[0],f=r[1];let h,p,d,m;if(!O(l))throw new b(sn);if(r=l.match(tn),null!==r){if(d=l.split("-").length-1,d>0&&2!==d)throw new b(sn);n=+r[1],o=+r[2],i=+r[3]}else if(r=l.match(Qe),null!==r)n=+r[1],o=+r[2];else if(r=l.match(Ze),null!==r)n=+r[1];else{let t;if(r=l.match(Ke),null!==r){if(n=+r[1],t=+r[2],p=qe(n),t<1||p&&t>366||!p&&t>365)throw new b(sn)}else{if(r=l.match(Je),null===r)throw new b(sn);{n=+r[1];const e=+r[2],o=+r[3]||0;if(d=l.split("-").length-1,d>0&&(!O(r[3])&&1!==d||O(r[3])&&2!==d))throw new b(sn);t=7*e+o-new Date(Date.UTC(n,0,4)).getUTCDay()-3}}h=new Date(Date.UTC(n,0,1)),h.setUTCDate(t),o=h.getUTCMonth()+1,i=h.getUTCDate()}if(p=qe(n),o<1||o>12||i<1||(2!==o||!p)&&i>ke[o-1]||p&&2===o&&i>29)throw new b(sn);if(O(f)){if(r=f.match(on),null!==r){if(d=f.split(":").length-1,d>0&&2!==d&&3!==d)throw new b(sn);s=+r[1],a=+r[2],u=+r[3],c=1e3*+(r[4]||0),m=5}else if(r=f.match(rn),null!==r){if(d=f.split(":").length-1,d>2)throw new b(sn);s=+r[1],a=+r[2],u=60*+(r[3]||0),m=4}else{if(r=f.match(nn),null===r)throw new b(sn);s=+r[1],a=60*+(r[2]||0),m=3}if(a>=60||u>=61||s>24||24===s&&(a>0||u>0||c>0))throw new b(sn);const t=r[m],e=+r[m+1],l=+(r[m+2]||0);switch(t){case"+":s-=e,a-=l;break;case"-":s+=e,a+=l;break;case"Z":break;default:a+=new Date(Date.UTC(n,o-1,i,s,a)).getTimezoneOffset()}}const y=60===u;for(y&&u--;a>=60;)a-=60,s++;for(;s>=24;)s-=24,i++;for(h=p&&2===o?29:ke[o-1];i>h;)i-=h,o++,o>12&&(o-=12,n++),h=p&&2===o?29:ke[o-1];for(;a<0;)a+=60,s--;for(;s<0;)s+=24,i--;for(;i<1;)o--,o<1&&(o+=12,n--),h=p&&2===o?29:ke[o-1],i+=h;const g=$e(n,o,i,s,a,u,c);return O(e)?(Ye(g[0],g[1],e),He(e)):e=new an(g[0],g[1],Be.UTC),y&&an.addSeconds(e,1,e),e},an.now=function(t){return an.fromDate(new Date,t)};const un=new an(0,0,Be.TAI);an.toGregorianDate=function(t,e){if(!O(t))throw new b("julianDate is required.");let n=!1,r=Xe(t,un);O(r)||(an.addSeconds(t,-1,un),r=Xe(un,un),n=!0);let o=r.dayNumber;const i=r.secondsOfDay;i>=43200&&(o+=1);let s=o+68569|0;const a=4*s/146097|0;s=s-((146097*a+3)/4|0)|0;const u=4e3*(s+1)/1461001|0;s=s-(1461*u/4|0)+31|0;const c=80*s/2447|0,l=s-(2447*c/80|0)|0;s=c/11|0;const f=c+2-12*s|0,h=100*(a-49)+u+s|0;let p=i/Fe.SECONDS_PER_HOUR|0,d=i-p*Fe.SECONDS_PER_HOUR;const m=d/Fe.SECONDS_PER_MINUTE|0;d-=m*Fe.SECONDS_PER_MINUTE;let y=0|d;const g=(d-y)/Fe.SECONDS_PER_MILLISECOND;return p+=12,p>23&&(p-=24),n&&(y+=1),O(e)?(e.year=h,e.month=f,e.day=l,e.hour=p,e.minute=m,e.second=y,e.millisecond=g,e.isLeapSecond=n,e):new ze(h,f,l,p,m,y,g,n)},an.toDate=function(t){if(!O(t))throw new b("julianDate is required.");const e=an.toGregorianDate(t,Ge);let n=e.second;return e.isLeapSecond&&(n-=1),new Date(Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,n,e.millisecond))},an.toIso8601=function(t,e){if(!O(t))throw new b("julianDate is required.");const n=an.toGregorianDate(t,Ge);let r=n.year,o=n.month,i=n.day,s=n.hour;const a=n.minute,u=n.second,c=n.millisecond;let l;if(1e4===r&&1===o&&1===i&&0===s&&0===a&&0===u&&0===c&&(r=9999,o=12,i=31,s=24),!O(e)&&0!==c){const t=.01*c;return l=t<1e-6?t.toFixed(20).replace(".","").replace(/0+$/,""):t.toString().replace(".",""),`${r.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${l}Z`}return O(e)&&0!==e?(l=(.01*c).toFixed(e).replace(".","").slice(0,e),`${r.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${l}Z`):`${r.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}Z`},an.clone=function(t,e){if(O(t))return O(e)?(e.dayNumber=t.dayNumber,e.secondsOfDay=t.secondsOfDay,e):new an(t.dayNumber,t.secondsOfDay,Be.TAI)},an.compare=function(t,e){if(!O(t))throw new b("left is required.");if(!O(e))throw new b("right is required.");const n=t.dayNumber-e.dayNumber;return 0!==n?n:t.secondsOfDay-e.secondsOfDay},an.equals=function(t,e){return t===e||O(t)&&O(e)&&t.dayNumber===e.dayNumber&&t.secondsOfDay===e.secondsOfDay},an.equalsEpsilon=function(t,e,n){return n=n??0,t===e||O(t)&&O(e)&&Math.abs(an.secondsDifference(t,e))<=n},an.totalDays=function(t){if(!O(t))throw new b("julianDate is required.");return t.dayNumber+t.secondsOfDay/Fe.SECONDS_PER_DAY},an.secondsDifference=function(t,e){if(!O(t))throw new b("left is required.");if(!O(e))throw new b("right is required.");return(t.dayNumber-e.dayNumber)*Fe.SECONDS_PER_DAY+(t.secondsOfDay-e.secondsOfDay)},an.daysDifference=function(t,e){if(!O(t))throw new b("left is required.");if(!O(e))throw new b("right is required.");return t.dayNumber-e.dayNumber+(t.secondsOfDay-e.secondsOfDay)/Fe.SECONDS_PER_DAY},an.computeTaiMinusUtc=function(t){Ve.julianDate=t;const e=an.leapSeconds;let n=Le(e,Ve,We);return n<0&&(n=~n,--n,n<0&&(n=0)),e[n].offset},an.addSeconds=function(t,e,n){if(!O(t))throw new b("julianDate is required.");if(!O(e))throw new b("seconds is required.");if(!O(n))throw new b("result is required.");return Ye(t.dayNumber,t.secondsOfDay+e,n)},an.addMinutes=function(t,e,n){if(!O(t))throw new b("julianDate is required.");if(!O(e))throw new b("minutes is required.");if(!O(n))throw new b("result is required.");const r=t.secondsOfDay+e*Fe.SECONDS_PER_MINUTE;return Ye(t.dayNumber,r,n)},an.addHours=function(t,e,n){if(!O(t))throw new b("julianDate is required.");if(!O(e))throw new b("hours is required.");if(!O(n))throw new b("result is required.");const r=t.secondsOfDay+e*Fe.SECONDS_PER_HOUR;return Ye(t.dayNumber,r,n)},an.addDays=function(t,e,n){if(!O(t))throw new b("julianDate is required.");if(!O(e))throw new b("days is required.");if(!O(n))throw new b("result is required.");return Ye(t.dayNumber+e,t.secondsOfDay,n)},an.lessThan=function(t,e){return an.compare(t,e)<0},an.lessThanOrEquals=function(t,e){return an.compare(t,e)<=0},an.greaterThan=function(t,e){return an.compare(t,e)>0},an.greaterThanOrEquals=function(t,e){return an.compare(t,e)>=0},an.prototype.clone=function(t){return an.clone(this,t)},an.prototype.equals=function(t){return an.equals(this,t)},an.prototype.equalsEpsilon=function(t,e){return an.equalsEpsilon(this,t,e)},an.prototype.toString=function(){return an.toIso8601(this)},an.leapSeconds=[new je(new an(2441317,43210,Be.TAI),10),new je(new an(2441499,43211,Be.TAI),11),new je(new an(2441683,43212,Be.TAI),12),new je(new an(2442048,43213,Be.TAI),13),new je(new an(2442413,43214,Be.TAI),14),new je(new an(2442778,43215,Be.TAI),15),new je(new an(2443144,43216,Be.TAI),16),new je(new an(2443509,43217,Be.TAI),17),new je(new an(2443874,43218,Be.TAI),18),new je(new an(2444239,43219,Be.TAI),19),new je(new an(2444786,43220,Be.TAI),20),new je(new an(2445151,43221,Be.TAI),21),new je(new an(2445516,43222,Be.TAI),22),new je(new an(2446247,43223,Be.TAI),23),new je(new an(2447161,43224,Be.TAI),24),new je(new an(2447892,43225,Be.TAI),25),new je(new an(2448257,43226,Be.TAI),26),new je(new an(2448804,43227,Be.TAI),27),new je(new an(2449169,43228,Be.TAI),28),new je(new an(2449534,43229,Be.TAI),29),new je(new an(2450083,43230,Be.TAI),30),new je(new an(2450630,43231,Be.TAI),31),new je(new an(2451179,43232,Be.TAI),32),new je(new an(2453736,43233,Be.TAI),33),new je(new an(2454832,43234,Be.TAI),34),new je(new an(2456109,43235,Be.TAI),35),new je(new an(2457204,43236,Be.TAI),36),new je(new an(2457754,43237,Be.TAI),37)];var cn,ln,fn,hn,pn,dn,mn,yn,gn,wn={exports:{}},En={exports:{}},_n=En.exports,On={exports:{}},bn=On.exports,Tn={exports:{}},An=Tn.exports,xn=(hn||(hn=1,dn=wn.exports,mn=function(t,e,n,r){var o=r&&r.URI;function i(t,e){var n=arguments.length>=1;if(!(this instanceof i))return n?arguments.length>=2?new i(t,e):new i(t):new i;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&n)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}i.version="1.19.11";var s=i.prototype,a=Object.prototype.hasOwnProperty;function u(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function l(t){return"Array"===c(t)}function f(t,e){var n,r,o={};if("RegExp"===c(e))o=null;else if(l(e))for(n=0,r=e.length;n<r;n++)o[e[n]]=!0;else o[e]=!0;for(n=0,r=t.length;n<r;n++)(o&&void 0!==o[t[n]]||!o&&e.test(t[n]))&&(t.splice(n,1),r--,n--);return t}function h(t,e){var n,r;if(l(e)){for(n=0,r=e.length;n<r;n++)if(!h(t,e[n]))return!1;return!0}var o=c(e);for(n=0,r=t.length;n<r;n++)if("RegExp"===o){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function p(t,e){if(!l(t)||!l(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function d(t){return t.replace(/^\/+|\/+$/g,"")}function m(t){return escape(t)}function y(t){return encodeURIComponent(t).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return i.domAttributes[e]}},i.encode=y,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=y,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(t,e){var n=i.encode(t+"");return void 0===e&&(e=i.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},i.decodeQuery=function(t,e){t+="",void 0===e&&(e=i.escapeQuerySpace);try{return i.decode(e?t.replace(/\+/g,"%20"):t)}catch(n){return t}};var g,w={encode:"encode",decode:"decode"},E=function(t,e){return function(n){try{return i[e](n+"").replace(i.characters[t][e].expression,(function(n){return i.characters[t][e].map[n]}))}catch(r){return n}}};for(g in w)i[g+"PathSegment"]=E("pathname",w[g]),i[g+"UrnPathSegment"]=E("urnpath",w[g]);var _=function(t,e,n){return function(r){var o;o=n?function(t){return i[e](i[n](t))}:i[e];for(var s=(r+"").split(t),a=0,u=s.length;a<u;a++)s[a]=o(s[a]);return s.join(t)}};function O(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function b(t,e){return function(n,r){return void 0===n?this._parts[t]||"":(null!==n&&(n+="").charAt(0)===e&&(n=n.substring(1)),this._parts[t]=n,this.build(!r),this)}}i.decodePath=_("/","decodePathSegment"),i.decodeUrnPath=_(":","decodeUrnPathSegment"),i.recodePath=_("/","encodePathSegment","decode"),i.recodeUrnPath=_(":","encodeUrnPathSegment","decode"),i.encodeReserved=E("reserved","encode"),i.parse=function(t,e){var n;return e||(e={preventInvalidHostname:i.preventInvalidHostname}),(n=(t=(t=t.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),(n=t.indexOf("?"))>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=i.parseAuthority(t,e)):(n=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(i.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3).replace(/\\/g,"/")?(t=t.substring(n+3),t=i.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0)),e.path=t,e},i.parseHost=function(t,e){t||(t="");var n,r,o=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,o)||null,"/"===e.port&&(e.port=null);else{var s=t.indexOf(":"),a=t.indexOf("/"),u=t.indexOf(":",s+1);-1!==u&&(-1===a||u<a)?(e.hostname=t.substring(0,o)||null,e.port=null):(r=t.substring(0,o).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),e.preventInvalidHostname&&i.ensureValidHostname(e.hostname,e.protocol),e.port&&i.ensureValidPort(e.port),t.substring(o)||"/"},i.parseAuthority=function(t,e){return t=i.parseUserinfo(t,e),i.parseHost(t,e)},i.parseUserinfo=function(t,e){var n=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var r,o=t.indexOf("/"),s=t.lastIndexOf("@",o>-1?o:t.length-1);return s>-1&&(-1===o||s<o)?(r=t.substring(0,s).split(":"),e.username=r[0]?i.decode(r[0]):null,r.shift(),e.password=r[0]?i.decode(r.join(":")):null,t=n.substring(s+1)):(e.username=null,e.password=null),t},i.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,r,o,s={},u=t.split("&"),c=u.length,l=0;l<c;l++)n=u[l].split("="),r=i.decodeQuery(n.shift(),e),o=n.length?i.decodeQuery(n.join("="),e):null,"__proto__"!==r&&(a.call(s,r)?("string"!=typeof s[r]&&null!==s[r]||(s[r]=[s[r]]),s[r].push(o)):s[r]=o);return s},i.build=function(t){var e="",n=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",n=!0),e+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&n&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},i.buildHost=function(t){var e="";return t.hostname?(i.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},i.buildAuthority=function(t){return i.buildUserinfo(t)+i.buildHost(t)},i.buildUserinfo=function(t){var e="";return t.username&&(e+=i.encode(t.username)),t.password&&(e+=":"+i.encode(t.password)),e&&(e+="@"),e},i.buildQuery=function(t,e,n){var r,o,s,u,c="";for(o in t)if("__proto__"!==o&&a.call(t,o))if(l(t[o]))for(r={},s=0,u=t[o].length;s<u;s++)void 0!==t[o][s]&&void 0===r[t[o][s]+""]&&(c+="&"+i.buildQueryParameter(o,t[o][s],n),!0!==e&&(r[t[o][s]+""]=!0));else void 0!==t[o]&&(c+="&"+i.buildQueryParameter(o,t[o],n));return c.substring(1)},i.buildQueryParameter=function(t,e,n){return i.encodeQuery(t,n)+(null!==e?"="+i.encodeQuery(e,n):"")},i.addQuery=function(t,e,n){if("object"==typeof e)for(var r in e)a.call(e,r)&&i.addQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),l(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},i.setQuery=function(t,e,n){if("object"==typeof e)for(var r in e)a.call(e,r)&&i.setQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===n?null:n}},i.removeQuery=function(t,e,n){var r,o,s;if(l(e))for(r=0,o=e.length;r<o;r++)t[e[r]]=void 0;else if("RegExp"===c(e))for(s in t)e.test(s)&&(t[s]=void 0);else if("object"==typeof e)for(s in e)a.call(e,s)&&i.removeQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===c(n)?!l(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=f(t[e],n):t[e]!==String(n)||l(n)&&1!==n.length?l(t[e])&&(t[e]=f(t[e],n)):t[e]=void 0:t[e]=void 0}},i.hasQuery=function(t,e,n,r){switch(c(e)){case"String":break;case"RegExp":for(var o in t)if(a.call(t,o)&&e.test(o)&&(void 0===n||i.hasQuery(t,o,n)))return!0;return!1;case"Object":for(var s in e)if(a.call(e,s)&&!i.hasQuery(t,s,e[s]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(n)){case"Undefined":return e in t;case"Boolean":return n===Boolean(l(t[e])?t[e].length:t[e]);case"Function":return!!n(t[e],e,t);case"Array":return!!l(t[e])&&(r?h:p)(t[e],n);case"RegExp":return l(t[e])?!!r&&h(t[e],n):Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return l(t[e])?!!r&&h(t[e],n):t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var t=[],e=[],n=0,r=0;r<arguments.length;r++){var o=new i(arguments[r]);t.push(o);for(var s=o.segment(),a=0;a<s.length;a++)"string"==typeof s[a]&&e.push(s[a]),s[a]&&n++}if(!e.length||!n)return new i("");var u=new i("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},i.commonPath=function(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return n<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},i.withinString=function(t,e,n){n||(n={});var r=n.start||i.findUri.start,o=n.end||i.findUri.end,s=n.trim||i.findUri.trim,a=n.parens||i.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var c=r.exec(t);if(!c)break;var l=c.index;if(n.ignoreHtml){var f=t.slice(Math.max(l-3,0),l);if(f&&u.test(f))continue}for(var h=l+t.slice(l).search(o),p=t.slice(l,h),d=-1;;){var m=a.exec(p);if(!m)break;var y=m.index+m[0].length;d=Math.max(d,y)}if(!((p=d>-1?p.slice(0,d)+p.slice(d).replace(s,""):p.replace(s,"")).length<=c[0].length||n.ignore&&n.ignore.test(p))){var g=e(p,l,h=l+p.length,t);void 0!==g?(g=String(g),t=t.slice(0,l)+g+t.slice(h),r.lastIndex=l+g.length):r.lastIndex=h}}return r.lastIndex=0,t},i.ensureValidHostname=function(e,n){var r=!!e,o=!1;if(!!n&&(o=h(i.hostProtocols,n)),o&&!r)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(e&&e.match(i.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},i.noConflict=function(t){if(t){var e={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(e.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(e.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=r.SecondLevelDomains.noConflict()),e}return r.URI===this&&(r.URI=o),this},s.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new i(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=O("protocol"),s.username=O("username"),s.password=O("password"),s.hostname=O("hostname"),s.port=O("port"),s.query=b("query","?"),s.fragment=b("fragment","#"),s.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},s.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},s.pathname=function(t,e){if(void 0===t||!0===t){var n=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?i.decodeUrnPath:i.decodePath)(n):n}return this._parts.urn?this._parts.path=t?i.recodeUrnPath(t):"":this._parts.path=t?i.recodePath(t):"/",this.build(!e),this},s.path=s.pathname,s.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=i._parts();var r=t instanceof i,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[i.getDomAttribute(t)]||"",o=!1),!r&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=i.parse(String(t),this._parts);else{if(!r&&!o)throw new TypeError("invalid input");var s=r?t._parts:t;for(n in s)"query"!==n&&a.call(this._parts,n)&&(this._parts[n]=s[n]);s.query&&this.query(s.query,!1)}return this.build(!e),this},s.is=function(t){var e=!1,r=!1,o=!1,s=!1,a=!1,u=!1,c=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,r=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),a=(s=!(e=r||o))&&n&&n.has(this._parts.hostname),u=s&&i.idn_expression.test(this._parts.hostname),c=s&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var T=s.protocol,A=s.port,x=s.hostname;s.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return T.call(this,t,e)},s.scheme=s.protocol,s.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),i.ensureValidPort(t))),A.call(this,t,e))},s.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(t,n))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(t,this._parts.protocol)}return x.call(this,t,e)},s.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var r=i(t);return this.protocol(r.protocol()).authority(r.authority()).build(!e),this},s.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=i.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==t[t.length-1]&&(t+="@"),i.parseUserinfo(t,this._parts),this.build(!e),this},s.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=i.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},s.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,r),s=new RegExp("^"+u(o));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&i.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(s,t),this.build(!e),this},s.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(e).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var o=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},s.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(r+1);return!0!==e&&n&&n.list[o.toLowerCase()]&&n.get(this._parts.hostname)||o}var i;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');i=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},s.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?i.decodePath(r):r}var o=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,o),a=new RegExp("^"+u(s));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(a,t),this.build(!e),this},s.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return t?i.decodePathSegment(r):r}var o=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(o=!0);var s=new RegExp(u(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t),o?this.normalizePath(e):this.build(!e),this},s.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,o=this.filename(),s=o.lastIndexOf(".");return-1===s?"":(n=o.substring(s+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",t?i.decodePathSegment(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var a,c=this.suffix();if(c)a=t?new RegExp(u(c)+"$"):new RegExp(u("."+c)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return a&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(a,t)),this.build(!e),this},s.segment=function(t,e,n){var r=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),s=o.split(r);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(i&&s.shift(),t<0&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(l(e)){s=[];for(var a=0,u=e.length;a<u;a++)(e[a].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(d(e[a])))}else(e||"string"==typeof e)&&(e=d(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=d(e):s.splice(t,1);return i&&s.unshift(""),this.path(s.join(r),n)},s.segmentCoded=function(t,e,n){var r,o,s;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(l(r=this.segment(t,e,n)))for(o=0,s=r.length;o<s;o++)r[o]=i.decode(r[o]);else r=void 0!==r?i.decode(r):void 0;return r}if(l(e))for(o=0,s=e.length;o<s;o++)e[o]=i.encode(e[o]);else e="string"==typeof e||e instanceof String?i.encode(e):e;return this.segment(t,e,n)};var R=s.query;return s.query=function(t,e){if(!0===t)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=t.call(this,n);return this._parts.query=i.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=i.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):R.call(this,t,e)},s.setQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)a.call(t,o)&&(r[o]=t[o])}return this._parts.query=i.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},s.addQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(r,t,void 0===e?null:e),this._parts.query=i.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},s.removeQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(r,t,e),this._parts.query=i.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},s.hasQuery=function(t,e,n){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(r,t,e,n)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},s.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},s.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},s.normalizePath=function(t){var e,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var r,o,s="";for("/"!==(n=i.recodePath(n)).charAt(0)&&(e=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(s=n.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(r=n.search(/\/\.\.(\/|$)/));)0!==r?(-1===(o=n.substring(0,r).lastIndexOf("/"))&&(o=r),n=n.substring(0,o)+n.substring(r+3)):n=n.substring(3);return e&&this.is("relative")&&(n=s+n.substring(1)),this._parts.path=n,this.build(!t),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},s.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var t=i.encode,e=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.unicode=function(){var t=i.encode,e=i.decode;i.encode=y,i.decode=unescape;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var r="",o=0,s=e._parts.query.split("&"),a=s.length;o<a;o++){var u=(s[o]||"").split("=");r+="&"+i.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(r+="="+i.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+i.decodeQuery(e.hash(),!0)},s.absoluteTo=function(t){var e,n,r,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof i||(t=new i(t)),o._parts.protocol)return o;if(o._parts.protocol=t._parts.protocol,this._parts.hostname)return o;for(n=0;r=s[n];n++)o._parts[r]=t._parts[r];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),o.build(),o},s.relativeTo=function(t){var e,n,r,o,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new i(t).normalize(),e=a._parts,n=t._parts,o=a.path(),s=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return a.build();if(null!==e.protocol||null!==e.username||null!==e.password)return a.build();if(e.hostname!==n.hostname||e.port!==n.port)return a.build();if(e.hostname=null,e.port=null,o===s)return e.path="",a.build();if(!(r=i.commonPath(o,s)))return a.build();var u=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(r.length)||"./",a.build()},s.equals=function(t){var e,n,r,o,s,u=this.clone(),c=new i(t),f={};if(u.normalize(),c.normalize(),u.toString()===c.toString())return!0;if(r=u.query(),o=c.query(),u.query(""),c.query(""),u.toString()!==c.toString())return!1;if(r.length!==o.length)return!1;for(s in e=i.parseQuery(r,this._parts.escapeQuerySpace),n=i.parseQuery(o,this._parts.escapeQuerySpace),e)if(a.call(e,s)){if(l(e[s])){if(!p(e[s],n[s]))return!1}else if(e[s]!==n[s])return!1;f[s]=!0}for(s in n)if(a.call(n,s)&&!f[s])return!1;return!0},s.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},s.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},s.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},i},(pn=wn).exports?pn.exports=mn((cn||(cn=1,yn=En,gn=En.exports,function(t){var e=gn&&!gn.nodeType&&gn,n=yn&&!yn.nodeType&&yn,r="object"==typeof S&&S;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var o,i,s=2147483647,a=36,u=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function d(t){throw new RangeError(f[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function y(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(l,".")).split("."),e).join(".")}function g(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function w(t){return m(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+p(t)})).join("")}function E(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:a}function _(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,n){var r=0;for(t=n?h(t/700):t>>1,t+=h(t/e);t>455;r+=a)t=h(t/35);return h(r+36*t/(t+38))}function b(t){var e,n,r,o,i,u,c,l,f,p,m=[],y=t.length,g=0,_=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&d("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<y;){for(i=g,u=1,c=a;o>=y&&d("invalid-input"),((l=E(t.charCodeAt(o++)))>=a||l>h((s-g)/u))&&d("overflow"),g+=l*u,!(l<(f=c<=b?1:c>=b+26?26:c-b));c+=a)u>h(s/(p=a-f))&&d("overflow"),u*=p;b=O(g-i,e=m.length+1,0==i),h(g/e)>s-_&&d("overflow"),_+=h(g/e),g%=e,m.splice(g++,0,_)}return w(m)}function T(t){var e,n,r,o,i,u,c,l,f,m,y,w,E,b,T,A=[];for(w=(t=g(t)).length,e=128,n=0,i=72,u=0;u<w;++u)(y=t[u])<128&&A.push(p(y));for(r=o=A.length,o&&A.push("-");r<w;){for(c=s,u=0;u<w;++u)(y=t[u])>=e&&y<c&&(c=y);for(c-e>h((s-n)/(E=r+1))&&d("overflow"),n+=(c-e)*E,e=c,u=0;u<w;++u)if((y=t[u])<e&&++n>s&&d("overflow"),y==e){for(l=n,f=a;!(l<(m=f<=i?1:f>=i+26?26:f-i));f+=a)T=l-m,b=a-m,A.push(p(_(m+T%b,0))),l=h(T/b);A.push(p(_(l,0))),i=O(n,E,r==o),n=0,++r}++n,++e}return A.join("")}if(o={version:"1.3.2",ucs2:{decode:g,encode:w},decode:b,encode:T,toASCII:function(t){return y(t,(function(t){return c.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return y(t,(function(t){return u.test(t)?b(t.slice(4).toLowerCase()):t}))}},e&&n)if(yn.exports==e)n.exports=o;else for(i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);else t.punycode=o}(_n)),En.exports),function(){return ln||(ln=1,e=bn,n=function(t){var e=t&&t.IPv6;return{best:function(t){var e,n,r=t.toLowerCase().split(":"),o=r.length,i=8;for(""===r[0]&&""===r[1]&&""===r[2]?(r.shift(),r.shift()):""===r[0]&&""===r[1]?r.shift():""===r[o-1]&&""===r[o-2]&&r.pop(),-1!==r[(o=r.length)-1].indexOf(".")&&(i=7),e=0;e<o&&""!==r[e];e++);if(e<i)for(r.splice(e,1,"0000");r.length<i;)r.splice(e,0,"0000");for(var s=0;s<i;s++){n=r[s].split("");for(var a=0;a<3&&"0"===n[0]&&n.length>1;a++)n.splice(0,1);r[s]=n.join("")}var u=-1,c=0,l=0,f=-1,h=!1;for(s=0;s<i;s++)h?"0"===r[s]?l+=1:(h=!1,l>c&&(u=f,c=l)):"0"===r[s]&&(h=!0,f=s,l=1);l>c&&(u=f,c=l),c>1&&r.splice(u,c,""),o=r.length;var p="";for(""===r[0]&&(p=":"),s=0;s<o&&(p+=r[s],s!==o-1);s++)p+=":";return""===r[o-1]&&(p+=":"),p},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}},(t=On).exports?t.exports=n():e.IPv6=n(e)),On.exports;var t,e,n}(),function(){return fn||(fn=1,e=An,n=function(t){var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return!1;var o=n.list[t.slice(e+1)];return!!o&&o.indexOf(" "+t.slice(r+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var r=n.list[t.slice(e+1)];return!!r&&r.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return null;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(r+1,e)+" ")<0?null:t.slice(r+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n},(t=Tn).exports?t.exports=n():e.SecondLevelDomains=n(e)),Tn.exports;var t,e,n}()):dn.URI=mn(dn.punycode,dn.IPv6,dn.SecondLevelDomains,dn)),wn.exports),Rn=I(xn);function Sn(t,e){if(null===t||"object"!=typeof t)return t;e=e??!1;const n=new t.constructor;for(const r in t)if(t.hasOwnProperty(r)){let o=t[r];e&&(o=Sn(o,e)),n[r]=o}return n}function In(t,e,n){n=n??!1;const r={},o=O(t),i=O(e);let s,a,u;if(o)for(s in t)t.hasOwnProperty(s)&&(a=t[s],i&&n&&"object"==typeof a&&e.hasOwnProperty(s)?(u=e[s],r[s]="object"==typeof u?In(a,u,n):a):r[s]=a);if(i)for(s in e)e.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(u=e[s],r[s]=u);return r}function Nn(){let t,e;const n=new Promise((function(n,r){t=n,e=r}));return{resolve:t,reject:e,promise:n}}function vn(t,e){let n;return"undefined"!=typeof document&&(n=document),vn._implementation(t,e,n)}vn._implementation=function(t,e,n){if(!O(t))throw new b("relative uri is required.");if(!O(e)){if(void 0===n)return t;e=n.baseURI??n.location.href}const r=new Rn(t);return""!==r.scheme()?r.toString():r.absoluteTo(e).toString()};const Mn={};function Pn(t,e,n){O(e)||(e=t.width),O(n)||(n=t.height);let r=Mn[e];O(r)||(r={},Mn[e]=r);let o=r[n];if(!O(o)){const t=document.createElement("canvas");t.width=e,t.height=n,o=t.getContext("2d",{willReadFrequently:!0}),o.globalCompositeOperation="copy",r[n]=o}return o.drawImage(t,0,0,e,n),o.getImageData(0,0,e,n).data}const Cn=/^blob:/i;function Ln(t){return T.typeOf.string("uri",t),Cn.test(t)}let Un;const qn=/^data:/i;function Dn(t){return T.typeOf.string("uri",t),qn.test(t)}var zn=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),jn=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Fn(t){const e=(t=t??Z.EMPTY_OBJECT).throttleByServer??!1,n=t.throttle??!1;this.url=t.url,this.requestFunction=t.requestFunction,this.cancelFunction=t.cancelFunction,this.priorityFunction=t.priorityFunction,this.priority=t.priority??0,this.throttle=n,this.throttleByServer=e,this.type=t.type??jn.OTHER,this.serverKey=t.serverKey,this.state=zn.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Bn(t,e,n){this.statusCode=t,this.response=e,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(t){const e={};if(!t)return e;const n=t.split("\r\n");for(let r=0;r<n.length;++r){const t=n[r],o=t.indexOf(": ");if(o>0){const n=t.substring(0,o),r=t.substring(o+2);e[n]=r}}return e}(this.responseHeaders))}function Gn(){this._listeners=new Map,this._toRemove=new Map,this._toAdd=new Map,this._invokingListeners=!1,this._listenerCount=0}function kn(t,e,n,r){e.has(n)||e.set(n,new Set);const o=e.get(n);return!o.has(r)&&(o.add(r),!0)}function Wn(t,e,n,r){const o=e.get(n);if(!o||!o.has(r))return!1;if(t._invokingListeners){if(!kn(0,t._toRemove,n,r))return!1}else o.delete(r),0===o.size&&e.delete(n);return!0}function Vn(t){T.typeOf.object("options",t),T.defined("options.comparator",t.comparator),this._comparator=t.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Hn(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Fn.prototype.cancel=function(){this.cancelled=!0},Fn.prototype.clone=function(t){return O(t)?(t.url=this.url,t.requestFunction=this.requestFunction,t.cancelFunction=this.cancelFunction,t.priorityFunction=this.priorityFunction,t.priority=this.priority,t.throttle=this.throttle,t.throttleByServer=this.throttleByServer,t.type=this.type,t.serverKey=this.serverKey,t.state=zn.UNISSUED,t.deferred=void 0,t.cancelled=!1,t):new Fn(this)},Bn.prototype.toString=function(){let t="Request has failed.";return O(this.statusCode)&&(t+=` Status Code: ${this.statusCode}`),t},Object.defineProperties(Gn.prototype,{numberOfListeners:{get:function(){return this._listenerCount}}}),Gn.prototype.addEventListener=function(t,e){T.typeOf.func("listener",t);const n=this;return kn(0,n._invokingListeners?n._toAdd:n._listeners,t,e)&&n._listenerCount++,function(){n.removeEventListener(t,e)}},Gn.prototype.removeEventListener=function(t,e){T.typeOf.func("listener",t);const n=Wn(this,this._listeners,t,e),r=Wn(this,this._toAdd,t,e),o=n||r;return o&&this._listenerCount--,o},Gn.prototype.raiseEvent=function(){this._invokingListeners=!0;for(const[t,e]of this._listeners.entries())if(O(t))for(const n of e)t.apply(n,arguments);this._invokingListeners=!1;for(const[t,e]of this._toAdd.entries())for(const n of e)kn(0,this._listeners,t,n);this._toAdd.clear();for(const[t,e]of this._toRemove.entries())for(const n of e)Wn(this,this._listeners,t,n);this._toRemove.clear()},Object.defineProperties(Vn.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(t){T.typeOf.number.greaterThanOrEquals("maximumLength",t,0);const e=this._length;if(t<e){const n=this._array;for(let r=t;r<e;++r)n[r]=void 0;this._length=t,n.length=t}this._maximumLength=t}},comparator:{get:function(){return this._comparator}}}),Vn.prototype.reserve=function(t){t=t??this._length,this._array.length=t},Vn.prototype.heapify=function(t){t=t??0;const e=this._length,n=this._comparator,r=this._array;let o=-1,i=!0;for(;i;){const s=2*(t+1),a=s-1;o=a<e&&n(r[a],r[t])<0?a:t,s<e&&n(r[s],r[o])<0&&(o=s),o!==t?(Hn(r,o,t),t=o):i=!1}},Vn.prototype.resort=function(){const t=this._length;for(let e=Math.ceil(t/2);e>=0;--e)this.heapify(e)},Vn.prototype.insert=function(t){T.defined("element",t);const e=this._array,n=this._comparator,r=this._maximumLength;let o,i=this._length++;for(i<e.length?e[i]=t:e.push(t);0!==i;){const t=Math.floor((i-1)/2);if(!(n(e[i],e[t])<0))break;Hn(e,i,t),i=t}return O(r)&&this._length>r&&(o=e[r],this._length=r),o},Vn.prototype.pop=function(t){if(t=t??0,0===this._length)return;T.typeOf.number.lessThan("index",t,this._length);const e=this._array,n=e[t];return Hn(e,t,--this._length),this.heapify(t),e[this._length]=void 0,n};const Xn={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0};let Yn=20;const $n=new Vn({comparator:function(t,e){return t.priority-e.priority}});$n.maximumLength=Yn,$n.reserve(Yn);const Zn=[];let Qn={};const Kn="undefined"!=typeof document?new Rn(document.location.href):new Rn,Jn=new Gn;function tr(){}function er(t){O(t.priorityFunction)&&(t.priority=t.priorityFunction())}function nr(t){return t.state===zn.UNISSUED&&(t.state=zn.ISSUED,t.deferred=Nn()),t.deferred.promise}function rr(t){const e=nr(t);return t.state=zn.ACTIVE,Zn.push(t),++Xn.numberOfActiveRequests,++Xn.numberOfActiveRequestsEver,++Qn[t.serverKey],t.requestFunction().then(function(t){return function(e){if(t.state===zn.CANCELLED)return;const n=t.deferred;--Xn.numberOfActiveRequests,--Qn[t.serverKey],Jn.raiseEvent(),t.state=zn.RECEIVED,t.deferred=void 0,n.resolve(e)}}(t)).catch(function(t){return function(e){t.state!==zn.CANCELLED&&(++Xn.numberOfFailedRequests,--Xn.numberOfActiveRequests,--Qn[t.serverKey],Jn.raiseEvent(e),t.state=zn.FAILED,t.deferred.reject(e))}}(t)),e}function or(t){const e=t.state===zn.ACTIVE;if(t.state=zn.CANCELLED,++Xn.numberOfCancelledRequests,O(t.deferred)){const e=t.deferred;t.deferred=void 0,e.reject()}e&&(--Xn.numberOfActiveRequests,--Qn[t.serverKey],++Xn.numberOfCancelledActiveRequests),O(t.cancelFunction)&&t.cancelFunction()}tr.maximumRequests=50,tr.maximumRequestsPerServer=18,tr.requestsByServer={},tr.throttleRequests=!0,tr.debugShowStatistics=!1,tr.requestCompletedEvent=Jn,Object.defineProperties(tr,{statistics:{get:function(){return Xn}},priorityHeapLength:{get:function(){return Yn},set:function(t){if(t<Yn)for(;$n.length>t;)or($n.pop());Yn=t,$n.maximumLength=t,$n.reserve(t)}}}),tr.serverHasOpenSlots=function(t,e){e=e??1;const n=tr.requestsByServer[t]??tr.maximumRequestsPerServer;return Qn[t]+e<=n},tr.heapHasOpenSlots=function(t){return $n.length+t<=Yn},tr.update=function(){let t,e,n=0;const r=Zn.length;for(t=0;t<r;++t)e=Zn[t],e.cancelled&&or(e),e.state===zn.ACTIVE?n>0&&(Zn[t-n]=e):++n;Zn.length-=n;const o=$n.internalArray,i=$n.length;for(t=0;t<i;++t)er(o[t]);$n.resort();const s=Math.max(tr.maximumRequests-Zn.length,0);let a=0;for(;a<s&&$n.length>0;)e=$n.pop(),e.cancelled?or(e):!e.throttleByServer||tr.serverHasOpenSlots(e.serverKey)?(rr(e),++a):or(e);tr.debugShowStatistics&&(0===Xn.numberOfActiveRequests&&Xn.lastNumberOfActiveRequests>0&&(Xn.numberOfAttemptedRequests>0&&(Xn.numberOfAttemptedRequests=0),Xn.numberOfCancelledRequests>0&&(Xn.numberOfCancelledRequests=0),Xn.numberOfCancelledActiveRequests>0&&(Xn.numberOfCancelledActiveRequests=0),Xn.numberOfFailedRequests>0&&(Xn.numberOfFailedRequests=0)),Xn.lastNumberOfActiveRequests=Xn.numberOfActiveRequests)},tr.getServerKey=function(t){T.typeOf.string("url",t);let e=new Rn(t);""===e.scheme()&&(e=e.absoluteTo(Kn),e.normalize());let n=e.authority();return/:/.test(n)||(n=`${n}:${"https"===e.scheme()?"443":"80"}`),O(Qn[n])||(Qn[n]=0),n},tr.request=function(t){if(T.typeOf.object("request",t),T.typeOf.string("request.url",t.url),T.typeOf.func("request.requestFunction",t.requestFunction),Dn(t.url)||Ln(t.url))return Jn.raiseEvent(),t.state=zn.RECEIVED,t.requestFunction();if(++Xn.numberOfAttemptedRequests,O(t.serverKey)||(t.serverKey=tr.getServerKey(t.url)),tr.throttleRequests&&t.throttleByServer&&!tr.serverHasOpenSlots(t.serverKey))return;if(!tr.throttleRequests||!t.throttle)return rr(t);if(Zn.length>=tr.maximumRequests)return;er(t);const e=$n.insert(t);if(O(e)){if(e===t)return;or(e)}return nr(t)},tr.clearForSpecs=function(){for(;$n.length>0;)or($n.pop());const t=Zn.length;for(let e=0;e<t;++e)or(Zn[e]);Zn.length=0,Qn={},Xn.numberOfAttemptedRequests=0,Xn.numberOfActiveRequests=0,Xn.numberOfCancelledRequests=0,Xn.numberOfCancelledActiveRequests=0,Xn.numberOfFailedRequests=0,Xn.numberOfActiveRequestsEver=0,Xn.lastNumberOfActiveRequests=0},tr.numberOfActiveRequestsByServer=function(t){return Qn[t]},tr.requestHeap=$n;const ir={};let sr={};ir.add=function(t,e){if(!O(t))throw new b("host is required.");if(!O(e)||e<=0)throw new b("port is required to be greater than 0.");const n=`${t.toLowerCase()}:${e}`;O(sr[n])||(sr[n]=!0)},ir.remove=function(t,e){if(!O(t))throw new b("host is required.");if(!O(e)||e<=0)throw new b("port is required to be greater than 0.");const n=`${t.toLowerCase()}:${e}`;O(sr[n])&&delete sr[n]},ir.contains=function(t){if(!O(t))throw new b("url is required.");const e=function(t){const e=new Rn(t);e.normalize();let n=e.authority();if(0!==n.length){if(e.authority(n),-1!==n.indexOf("@")){const t=n.split("@");n=t[1]}if(-1===n.indexOf(":")){let t=e.scheme();if(0===t.length&&(t=window.location.protocol,t=t.substring(0,t.length-1)),"http"===t)n+=":80";else{if("https"!==t)return;n+=":443"}}return n}}(t);return!(!O(e)||!O(sr[e]))},ir.clear=function(){sr={}};const ar=function(){try{const t=new XMLHttpRequest;return t.open("GET","#",!0),t.responseType="blob","blob"===t.responseType}catch(yn){return!1}}();function ur(t){"string"==typeof(t=t??Z.EMPTY_OBJECT)&&(t={url:t}),T.typeOf.string("options.url",t.url),this._url=void 0,this._templateValues=cr(t.templateValues,{}),this._queryParameters=cr(t.queryParameters,{}),this.headers=cr(t.headers,{}),this.request=t.request??new Fn,this.proxy=t.proxy,this.retryCallback=t.retryCallback,this.retryAttempts=t.retryAttempts??0,this._retryCount=0,t.parseUrl??1?this.parseUrl(t.url,!0,!0):this._url=t.url,this._credits=t.credits}function cr(t,e){return O(t)?Sn(t):e}let lr;function fr(t,e,n){if(!n)return In(t,e);const r=Sn(t,!0);for(const o in e)if(e.hasOwnProperty(o)){let t=r[o];const n=e[o];O(t)?(Array.isArray(t)||(t=r[o]=[t]),r[o]=t.concat(n)):r[o]=Array.isArray(n)?n.slice():n}return r}function hr(t,e,n){const r={};r[e]=n,t.setQueryParameters(r);const o=t.request,i=t.url;o.url=i,o.requestFunction=function(){const t=Nn();return window[n]=function(e){t.resolve(e);try{delete window[n]}catch(r){window[n]=void 0}},ur._Implementations.loadAndExecuteScript(i,n,t),t.promise};const s=tr.request(o);if(O(s))return s.catch((function(r){return o.state!==zn.FAILED?Promise.reject(r):t.retryOnError(r).then((function(i){return i?(o.state=zn.UNISSUED,o.deferred=void 0,hr(t,e,n)):Promise.reject(r)}))}))}function pr(t){if(t.state===zn.ISSUED||t.state===zn.ACTIVE)throw new ft("The Resource is already being fetched.");t.state=zn.UNISSUED,t.deferred=void 0}ur.createIfNeeded=function(t){return t instanceof ur?t.getDerivedResource({request:t.request}):"string"!=typeof t?t:new ur({url:t})},ur.supportsImageBitmapOptions=function(){return O(lr)?lr:"function"!=typeof createImageBitmap?(lr=Promise.resolve(!1),lr):(lr=ur.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then((function(t){return Promise.all([createImageBitmap(t,{imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"}),createImageBitmap(t)])})).then((function(t){const e=Pn(t[0]),n=Pn(t[1]);return e[1]!==n[1]})).catch((function(){return!1})),lr)},Object.defineProperties(ur,{isBlobSupported:{get:function(){return ar}}}),Object.defineProperties(ur.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(t){this.parseUrl(t,!1,!1)}},extension:{get:function(){return function(t){if(!O(t))throw new b("uri is required.");const e=new Rn(t);e.normalize();let n=e.path(),r=n.lastIndexOf("/");return-1!==r&&(n=n.substr(r+1)),r=n.lastIndexOf("."),n=-1===r?"":n.substr(r+1),n}(this._url)}},isDataUri:{get:function(){return Dn(this._url)}},isBlobUri:{get:function(){return Ln(this._url)}},isCrossOriginUrl:{get:function(){return function(t){O(Un)||(Un=document.createElement("a")),Un.href=window.location.href;const e=Un.host,n=Un.protocol;return Un.href=t,Un.href=Un.href,n!==Un.protocol||e!==Un.host}(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}}),ur.prototype.toString=function(){return this.getUrlComponent(!0,!0)},ur.prototype.parseUrl=function(t,e,n,r){let o=new Rn(t);const i=0===(s=o.query()).length?{}:-1===s.indexOf("=")?{[s]:void 0}:function(t){if(!O(t))throw new b("queryString is required.");const e={};if(""===t)return e;const n=t.replace(/\+/g,"%20").split(/[&;]/);for(let r=0,o=n.length;r<o;++r){const t=n[r].split("="),o=decodeURIComponent(t[0]);let i=t[1];i=O(i)?decodeURIComponent(i):"";const s=e[o];"string"==typeof s?e[o]=[s,i]:Array.isArray(s)?s.push(i):e[o]=i}return e}(s);var s;this._queryParameters=e?fr(i,this.queryParameters,n):i,o.search(""),o.fragment(""),O(r)&&""===o.scheme()&&(o=o.absoluteTo(vn(r))),this._url=o.toString()},ur.prototype.getUrlComponent=function(t,e){if(this.isDataUri)return this._url;let n=this._url;t&&(n=`${n}${function(t){const e=Object.keys(t);return 0===e.length?"":1!==e.length||O(t[e[0]])?`?${function(t){if(!O(t))throw new b("obj is required.");let e="";for(const n in t)if(t.hasOwnProperty(n)){const r=t[n],o=`${encodeURIComponent(n)}=`;if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t)e+=`${o+encodeURIComponent(r[t])}&`;else e+=`${o+encodeURIComponent(r)}&`}return e=e.slice(0,-1),e}(t)}`:`?${e[0]}`}(this.queryParameters)}`),n=n.replace(/%7B/g,"{").replace(/%7D/g,"}");const r=this._templateValues;return Object.keys(r).length>0&&(n=n.replace(/{(.*?)}/g,(function(t,e){const n=r[e];return O(n)?encodeURIComponent(n):t}))),e&&O(this.proxy)&&(n=this.proxy.getURL(n)),n},ur.prototype.setQueryParameters=function(t,e){this._queryParameters=e?fr(this._queryParameters,t,!1):fr(t,this._queryParameters,!1)},ur.prototype.appendQueryParameters=function(t){this._queryParameters=fr(t,this._queryParameters,!0)},ur.prototype.setTemplateValues=function(t,e){this._templateValues=e?In(this._templateValues,t):In(t,this._templateValues)},ur.prototype.getDerivedResource=function(t){const e=this.clone();if(e._retryCount=0,O(t.url)){const n=t.preserveQueryParameters??!1;e.parseUrl(t.url,!0,n,this._url)}return O(t.queryParameters)&&(e._queryParameters=In(t.queryParameters,e.queryParameters)),O(t.templateValues)&&(e._templateValues=In(t.templateValues,e.templateValues)),O(t.headers)&&(e.headers=In(t.headers,e.headers)),O(t.proxy)&&(e.proxy=t.proxy),O(t.request)&&(e.request=t.request),O(t.retryCallback)&&(e.retryCallback=t.retryCallback),O(t.retryAttempts)&&(e.retryAttempts=t.retryAttempts),e},ur.prototype.retryOnError=function(t){const e=this.retryCallback;if("function"!=typeof e||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);const n=this;return Promise.resolve(e(this,t)).then((function(t){return++n._retryCount,t}))},ur.prototype.clone=function(t){return O(t)?(t._url=this._url,t._queryParameters=Sn(this._queryParameters),t._templateValues=Sn(this._templateValues),t.headers=Sn(this.headers),t.proxy=this.proxy,t.retryCallback=this.retryCallback,t.retryAttempts=this.retryAttempts,t._retryCount=0,t.request=this.request.clone(),t):new ur({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:O(this.credits)?this.credits.slice():void 0})},ur.prototype.getBaseUri=function(t){return function(t,e){if(!O(t))throw new b("uri is required.");let n="";const r=t.lastIndexOf("/");return-1!==r&&(n=t.substring(0,r+1)),e?(0!==(t=new Rn(t)).query().length&&(n+=`?${t.query()}`),0!==t.fragment().length&&(n+=`#${t.fragment()}`),n):n}(this.getUrlComponent(t),t)},ur.prototype.appendForwardSlash=function(){var t;this._url=(0!==(t=this._url).length&&"/"===t[t.length-1]||(t=`${t}/`),t)},ur.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},ur.fetchArrayBuffer=function(t){return new ur(t).fetchArrayBuffer()},ur.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},ur.fetchBlob=function(t){return new ur(t).fetchBlob()},ur.prototype.fetchImage=function(t){const e=(t=t??Z.EMPTY_OBJECT).preferImageBitmap??!1,n=t.preferBlob??!1,r=t.flipY??!1,o=t.skipColorSpaceConversion??!1;if(pr(this.request),!ar||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return this._fetchImage({resource:this,flipY:r,skipColorSpaceConversion:o,preferImageBitmap:e});const i=this.fetchBlob();if(!O(i))return;let s,a,u,c;return ur.supportsImageBitmapOptions().then((function(t){return s=t,a=s&&e,i})).then((function(t){if(!O(t))return;if(c=t,a)return ur.createImageBitmapFromBlob(t,{flipY:r,premultiplyAlpha:!1,skipColorSpaceConversion:o});const e=window.URL.createObjectURL(t);return u=new ur({url:e}),u._fetchImage({flipY:r,skipColorSpaceConversion:o,preferImageBitmap:!1})})).then((function(t){if(O(t))return t.blob=c,a||window.URL.revokeObjectURL(u.url),t})).catch((function(t){return O(u)&&window.URL.revokeObjectURL(u.url),t.blob=c,Promise.reject(t)}))},ur.prototype._fetchImage=function(t){const e=this,n=t.flipY,r=t.skipColorSpaceConversion,o=t.preferImageBitmap,i=e.request;i.url=e.url,i.requestFunction=function(){let t=!1;e.isDataUri||e.isBlobUri||(t=e.isCrossOriginUrl);const s=Nn();return ur._Implementations.createImage(i,t,s,n,r,o),s.promise};const s=tr.request(i);if(O(s))return s.catch((function(t){return i.state!==zn.FAILED?Promise.reject(t):e.retryOnError(t).then((function(s){return s?(i.state=zn.UNISSUED,i.deferred=void 0,e._fetchImage({flipY:n,skipColorSpaceConversion:r,preferImageBitmap:o})):Promise.reject(t)}))}))},ur.fetchImage=function(t){return new ur(t).fetchImage({flipY:t.flipY,skipColorSpaceConversion:t.skipColorSpaceConversion,preferBlob:t.preferBlob,preferImageBitmap:t.preferImageBitmap})},ur.prototype.fetchText=function(){return this.fetch({responseType:"text"})},ur.fetchText=function(t){return new ur(t).fetchText()},ur.prototype.fetchJson=function(){const t=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(O(t))return t.then((function(t){if(O(t))return JSON.parse(t)}))},ur.fetchJson=function(t){return new ur(t).fetchJson()},ur.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},ur.fetchXML=function(t){return new ur(t).fetchXML()},ur.prototype.fetchJsonp=function(t){let e;t=t??"callback",pr(this.request);do{e=`loadJsonp${M.nextRandomNumber().toString().substring(2,8)}`}while(O(window[e]));return hr(this,t,e)},ur.fetchJsonp=function(t){return new ur(t).fetchJsonp(t.callbackParameterName)},ur.prototype._makeRequest=function(t){const e=this;pr(e.request);const n=e.request,r=e.url;n.url=r,n.requestFunction=function(){const o=t.responseType,i=In(t.headers,e.headers),s=t.overrideMimeType,a=t.method,u=t.data,c=Nn(),l=ur._Implementations.loadWithXhr(r,o,a,u,i,c,s);return O(l)&&O(l.abort)&&(n.cancelFunction=function(){l.abort()}),c.promise};const o=tr.request(n);if(O(o))return o.then((function(t){return n.cancelFunction=void 0,t})).catch((function(r){return n.cancelFunction=void 0,n.state!==zn.FAILED?Promise.reject(r):e.retryOnError(r).then((function(o){return o?(n.state=zn.UNISSUED,n.deferred=void 0,e.fetch(t)):Promise.reject(r)}))}))};const dr=/^data:(.*?)(;base64)?,(.*)$/;function mr(t,e){const n=decodeURIComponent(e);return t?atob(n):n}function yr(t,e){const n=mr(t,e),r=new ArrayBuffer(n.length),o=new Uint8Array(r);for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);return r}ur.prototype.fetch=function(t){return(t=cr(t,{})).method="GET",this._makeRequest(t)},ur.fetch=function(t){return new ur(t).fetch({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ur.prototype.delete=function(t){return(t=cr(t,{})).method="DELETE",this._makeRequest(t)},ur.delete=function(t){return new ur(t).delete({responseType:t.responseType,overrideMimeType:t.overrideMimeType,data:t.data})},ur.prototype.head=function(t){return(t=cr(t,{})).method="HEAD",this._makeRequest(t)},ur.head=function(t){return new ur(t).head({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ur.prototype.options=function(t){return(t=cr(t,{})).method="OPTIONS",this._makeRequest(t)},ur.options=function(t){return new ur(t).options({responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ur.prototype.post=function(t,e){return T.defined("data",t),(e=cr(e,{})).method="POST",e.data=t,this._makeRequest(e)},ur.post=function(t){return new ur(t).post(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ur.prototype.put=function(t,e){return T.defined("data",t),(e=cr(e,{})).method="PUT",e.data=t,this._makeRequest(e)},ur.put=function(t){return new ur(t).put(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ur.prototype.patch=function(t,e){return T.defined("data",t),(e=cr(e,{})).method="PATCH",e.data=t,this._makeRequest(e)},ur.patch=function(t){return new ur(t).patch(t.data,{responseType:t.responseType,overrideMimeType:t.overrideMimeType})},ur._Implementations={},ur._Implementations.loadImageElement=function(t,e,n){const r=new Image;r.onload=function(){0===r.naturalWidth&&0===r.naturalHeight&&0===r.width&&0===r.height&&(r.width=300,r.height=150),n.resolve(r)},r.onerror=function(t){n.reject(t)},e&&(ir.contains(t)?r.crossOrigin="use-credentials":r.crossOrigin=""),r.src=t},ur._Implementations.createImage=function(t,e,n,r,o,i,s){const a=t.url;ur.supportsImageBitmapOptions().then((function(u){if(!u||!i)return void ur._Implementations.loadImageElement(a,e,n);const c=Nn(),l=ur._Implementations.loadWithXhr(a,"blob","GET",void 0,s,c,void 0,void 0,void 0);return O(l)&&O(l.abort)&&(t.cancelFunction=function(){l.abort()}),c.promise.then((function(t){if(O(t))return ur.createImageBitmapFromBlob(t,{flipY:r,premultiplyAlpha:!1,skipColorSpaceConversion:o});n.reject(new ft(`Successfully retrieved ${a} but it contained no content.`))})).then((function(t){n.resolve(t)}))})).catch((function(t){n.reject(t)}))},ur.createImageBitmapFromBlob=function(t,e){return T.defined("options",e),T.typeOf.bool("options.flipY",e.flipY),T.typeOf.bool("options.premultiplyAlpha",e.premultiplyAlpha),T.typeOf.bool("options.skipColorSpaceConversion",e.skipColorSpaceConversion),createImageBitmap(t,{imageOrientation:e.flipY?"flipY":"none",premultiplyAlpha:e.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:e.skipColorSpaceConversion?"none":"default"})};const gr="undefined"==typeof XMLHttpRequest;function wr(t){t=t??Z.EMPTY_OBJECT,this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=t.addNewLeapSeconds??!0,O(t.data)?_r(this,t.data):_r(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Er(t,e){return an.compare(t.julianDate,e)}function _r(t,e){if(!O(e.columnNames))throw new ft("Error in loaded EOP data: The columnNames property is required.");if(!O(e.samples))throw new ft("Error in loaded EOP data: The samples property is required.");const n=e.columnNames.indexOf("modifiedJulianDateUtc"),r=e.columnNames.indexOf("xPoleWanderRadians"),o=e.columnNames.indexOf("yPoleWanderRadians"),i=e.columnNames.indexOf("ut1MinusUtcSeconds"),s=e.columnNames.indexOf("xCelestialPoleOffsetRadians"),a=e.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=e.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||o<0||i<0||s<0||a<0||u<0)throw new ft("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");const c=t._samples=e.samples,l=t._dates=[];let f;t._dateColumn=n,t._xPoleWanderRadiansColumn=r,t._yPoleWanderRadiansColumn=o,t._ut1MinusUtcSecondsColumn=i,t._xCelestialPoleOffsetRadiansColumn=s,t._yCelestialPoleOffsetRadiansColumn=a,t._taiMinusUtcSecondsColumn=u,t._columnCount=e.columnNames.length,t._lastIndex=void 0;const h=t._addNewLeapSeconds;for(let p=0,d=c.length;p<d;p+=t._columnCount){const t=c[p+n],e=c[p+u],r=new an(t+Fe.MODIFIED_JULIAN_DATE_DIFFERENCE,e,Be.TAI);if(l.push(r),h){if(e!==f&&O(f)){const t=an.leapSeconds,n=Le(t,r,Er);if(n<0){const o=new je(r,e);t.splice(~n,0,o)}}f=e}}}function Or(t,e,n,r,o){const i=n*r;o.xPoleWander=e[i+t._xPoleWanderRadiansColumn],o.yPoleWander=e[i+t._yPoleWanderRadiansColumn],o.xPoleOffset=e[i+t._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=e[i+t._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=e[i+t._ut1MinusUtcSecondsColumn]}function br(t,e,n){return e+t*(n-e)}function Tr(t,e,n,r,o,i,s){const a=t._columnCount;if(i>e.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;const u=e[o],c=e[i];if(u.equals(c)||r.equals(u))return Or(t,n,o,a,s),s;if(r.equals(c))return Or(t,n,i,a,s),s;const l=an.secondsDifference(r,u)/an.secondsDifference(c,u),f=o*a,h=i*a;let p=n[f+t._ut1MinusUtcSecondsColumn],d=n[h+t._ut1MinusUtcSecondsColumn];const m=d-p;if(m>.5||m<-.5){const e=n[f+t._taiMinusUtcSecondsColumn],o=n[h+t._taiMinusUtcSecondsColumn];e!==o&&(c.equals(r)?p=d:d-=o-e)}return s.xPoleWander=br(l,n[f+t._xPoleWanderRadiansColumn],n[h+t._xPoleWanderRadiansColumn]),s.yPoleWander=br(l,n[f+t._yPoleWanderRadiansColumn],n[h+t._yPoleWanderRadiansColumn]),s.xPoleOffset=br(l,n[f+t._xCelestialPoleOffsetRadiansColumn],n[h+t._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=br(l,n[f+t._yCelestialPoleOffsetRadiansColumn],n[h+t._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=br(l,p,d),s}function Ar(t,e,n){this.heading=t??0,this.pitch=e??0,this.roll=n??0}ur._Implementations.loadWithXhr=function(t,e,n,r,o,i,s){const a=dr.exec(t);if(null!==a)return void i.resolve(function(t,e){e=e??"";const n=t[1],r=!!t[2],o=t[3];let i,s;switch(e){case"":case"text":return mr(r,o);case"arraybuffer":return yr(r,o);case"blob":return i=yr(r,o),new Blob([i],{type:n});case"document":return s=new DOMParser,s.parseFromString(mr(r,o),n);case"json":return JSON.parse(mr(r,o));default:throw new b(`Unhandled responseType: ${e}`)}}(a,e));if(gr)return u=e,c=i,void fetch(t,{method:n,headers:o}).then((async t=>{if(!t.ok){const e={};return t.headers.forEach(((t,n)=>{e[n]=t})),void c.reject(new Bn(t.status,t,e))}switch(u){case"text":c.resolve(t.text());break;case"json":c.resolve(t.json());break;default:c.resolve(new Uint8Array(await t.arrayBuffer()).buffer)}})).catch((()=>{c.reject(new Bn)}));var u,c;const l=new XMLHttpRequest;if(ir.contains(t)&&(l.withCredentials=!0),l.open(n,t,!0),O(s)&&O(l.overrideMimeType)&&l.overrideMimeType(s),O(o))for(const h in o)o.hasOwnProperty(h)&&l.setRequestHeader(h,o[h]);O(e)&&(l.responseType=e);let f=!1;return"string"==typeof t&&(f=0===t.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),l.onload=function(){if((l.status<200||l.status>=300)&&(!f||0!==l.status))return void i.reject(new Bn(l.status,l.response,l.getAllResponseHeaders()));const t=l.response,r=l.responseType;if("HEAD"===n||"OPTIONS"===n){const t=l.getAllResponseHeaders().trim().split(/[\r\n]+/),e={};return t.forEach((function(t){const n=t.split(": "),r=n.shift();e[r]=n.join(": ")})),void i.resolve(e)}if(204===l.status)i.resolve(void 0);else if(!O(t)||O(e)&&r!==e)if("json"===e&&"string"==typeof t)try{i.resolve(JSON.parse(t))}catch(o){i.reject(o)}else(""===r||"document"===r)&&O(l.responseXML)&&l.responseXML.hasChildNodes()?i.resolve(l.responseXML):""!==r&&"text"!==r||!O(l.responseText)?i.reject(new ft("Invalid XMLHttpRequest response type.")):i.resolve(l.responseText);else i.resolve(t)},l.onerror=function(t){i.reject(new Bn)},l.send(r),l},ur._Implementations.loadAndExecuteScript=function(t,e,n){return function(t){const e=document.createElement("script");return e.async=!0,e.src=t,new Promise(((t,n)=>{window.crossOriginIsolated&&e.setAttribute("crossorigin","anonymous");const r=document.getElementsByTagName("head")[0];e.onload=function(){e.onload=void 0,r.removeChild(e),t()},e.onerror=function(t){n(t)},r.appendChild(e)}))}(t).catch((function(t){n.reject(t)}))},ur._DefaultImplementations={},ur._DefaultImplementations.createImage=ur._Implementations.createImage,ur._DefaultImplementations.loadWithXhr=ur._Implementations.loadWithXhr,ur._DefaultImplementations.loadAndExecuteScript=ur._Implementations.loadAndExecuteScript,ur.DEFAULT=Object.freeze(new ur({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),wr.fromUrl=async function(t,e){T.defined("url",t),e=e??Z.EMPTY_OBJECT;const n=ur.createIfNeeded(t);let r;try{r=await n.fetchJson()}catch(o){throw new ft(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new wr({addNewLeapSeconds:e.addNewLeapSeconds,data:r})},wr.NONE=Object.freeze({compute:function(t,e){return O(e)?(e.xPoleWander=0,e.yPoleWander=0,e.xPoleOffset=0,e.yPoleOffset=0,e.ut1MinusUtc=0):e=new Ue(0,0,0,0,0),e}}),wr.prototype.compute=function(t,e){if(!O(this._samples))return;if(O(e)||(e=new Ue(0,0,0,0,0)),0===this._samples.length)return e.xPoleWander=0,e.yPoleWander=0,e.xPoleOffset=0,e.yPoleOffset=0,e.ut1MinusUtc=0,e;const n=this._dates,r=this._lastIndex;let o=0,i=0;if(O(r)){const s=n[r],a=n[r+1],u=an.lessThanOrEquals(s,t),c=!O(a),l=c||an.greaterThanOrEquals(a,t);if(u&&l)return o=r,!c&&a.equals(t)&&++o,i=o+1,Tr(this,n,this._samples,t,o,i,e),e}let s=Le(n,t,an.compare,this._dateColumn);return s>=0?(s<n.length-1&&n[s+1].equals(t)&&++s,o=s,i=s):(i=~s,o=i-1,o<0&&(o=0)),this._lastIndex=o,Tr(this,n,this._samples,t,o,i,e),e},Ar.fromQuaternion=function(t,e){if(!O(t))throw new b("quaternion is required");O(e)||(e=new Ar);const n=2*(t.w*t.y-t.z*t.x),r=1-2*(t.x*t.x+t.y*t.y),o=2*(t.w*t.x+t.y*t.z),i=1-2*(t.y*t.y+t.z*t.z),s=2*(t.w*t.z+t.x*t.y);return e.heading=-Math.atan2(s,i),e.roll=Math.atan2(o,r),e.pitch=-M.asinClamped(n),e},Ar.fromDegrees=function(t,e,n,r){if(!O(t))throw new b("heading is required");if(!O(e))throw new b("pitch is required");if(!O(n))throw new b("roll is required");return O(r)||(r=new Ar),r.heading=t*M.RADIANS_PER_DEGREE,r.pitch=e*M.RADIANS_PER_DEGREE,r.roll=n*M.RADIANS_PER_DEGREE,r},Ar.clone=function(t,e){if(O(t))return O(e)?(e.heading=t.heading,e.pitch=t.pitch,e.roll=t.roll,e):new Ar(t.heading,t.pitch,t.roll)},Ar.equals=function(t,e){return t===e||O(t)&&O(e)&&t.heading===e.heading&&t.pitch===e.pitch&&t.roll===e.roll},Ar.equalsEpsilon=function(t,e,n,r){return t===e||O(t)&&O(e)&&M.equalsEpsilon(t.heading,e.heading,n,r)&&M.equalsEpsilon(t.pitch,e.pitch,n,r)&&M.equalsEpsilon(t.roll,e.roll,n,r)},Ar.prototype.clone=function(t){return Ar.clone(this,t)},Ar.prototype.equals=function(t){return Ar.equals(this,t)},Ar.prototype.equalsEpsilon=function(t,e,n){return Ar.equalsEpsilon(this,t,e,n)},Ar.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};const xr=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;let Rr,Sr,Ir;function Nr(t){return"undefined"==typeof document?t:(O(Rr)||(Rr=document.createElement("a")),Rr.href=t,Rr.href)}function vr(){if(O(Sr))return Sr;let t;if(t="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:O(import.meta?.url)?vn(".",import.meta.url):"object"==typeof define&&O(define.amd)&&!define.amd.toUrlUndefined&&O(require.toUrl)?vn("..",Cr("Core/buildModuleUrl.js")):function(){const t=document.getElementsByTagName("script");for(let e=0,n=t.length;e<n;++e){const n=t[e].getAttribute("src"),r=xr.exec(n);if(null!==r)return r[1]}}(),!O(t))throw new b("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return Sr=new ur({url:Nr(t)}),Sr.appendForwardSlash(),Sr}function Mr(t){return Nr(require.toUrl(`../${t}`))}function Pr(t){return vr().getDerivedResource({url:t}).url}function Cr(t){return O(Ir)||(Ir="object"==typeof define&&O(define.amd)&&!define.amd.toUrlUndefined&&O(require.toUrl)?Mr:Pr),Ir(t)}function Lr(t,e,n){this.x=t,this.y=e,this.s=n}function Ur(t){t=t??Z.EMPTY_OBJECT,this._xysFileUrlTemplate=ur.createIfNeeded(t.xysFileUrlTemplate),this._interpolationOrder=t.interpolationOrder??9,this._sampleZeroJulianEphemerisDate=t.sampleZeroJulianEphemerisDate??2442396.5,this._sampleZeroDateTT=new an(this._sampleZeroJulianEphemerisDate,0,Be.TAI),this._stepSizeDays=t.stepSizeDays??1,this._samplesPerXysFile=t.samplesPerXysFile??1e3,this._totalSamples=t.totalSamples??27426,this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];const e=this._interpolationOrder,n=this._denominators=new Array(e+1),r=this._xTable=new Array(e+1),o=Math.pow(this._stepSizeDays,e);for(let i=0;i<=e;++i){n[i]=o,r[i]=i*this._stepSizeDays;for(let t=0;t<=e;++t)t!==i&&(n[i]*=i-t);n[i]=1/n[i]}this._work=new Array(e+1),this._coef=new Array(e+1)}Cr._cesiumScriptRegex=xr,Cr._buildModuleUrlFromBaseUrl=Pr,Cr._clearBaseResource=function(){Sr=void 0},Cr.setBaseUrl=function(t){Sr=ur.DEFAULT.getDerivedResource({url:t})},Cr.getCesiumBaseUrl=vr;const qr=new an(0,0,Be.TAI);function Dr(t,e,n){const r=qr;return r.dayNumber=e,r.secondsOfDay=n,an.daysDifference(r,t._sampleZeroDateTT)}function zr(t,e){if(t._chunkDownloadsInProgress[e])return t._chunkDownloadsInProgress[e];let n;const r=t._xysFileUrlTemplate;n=O(r)?r.getDerivedResource({templateValues:{0:e}}):new ur({url:Cr(`Assets/IAU2006_XYS/IAU2006_XYS_${e}.json`)});const o=n.fetchJson().then((function(n){t._chunkDownloadsInProgress[e]=!1;const r=t._samples,o=n.samples,i=e*t._samplesPerXysFile*3;for(let t=0,e=o.length;t<e;++t)r[i+t]=o[t]}));return t._chunkDownloadsInProgress[e]=o,o}function jr(t,e,n,r){this.x=t??0,this.y=e??0,this.z=n??0,this.w=r??0}Ur.prototype.preload=function(t,e,n,r){const o=Dr(this,t,e),i=Dr(this,n,r);let s=o/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);let a=i/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;a>=this._totalSamples&&(a=this._totalSamples-1);const u=s/this._samplesPerXysFile|0,c=a/this._samplesPerXysFile|0,l=[];for(let f=u;f<=c;++f)l.push(zr(this,f));return Promise.all(l)},Ur.prototype.computeXysRadians=function(t,e,n){const r=Dr(this,t,e);if(r<0)return;const o=r/this._stepSizeDays|0;if(o>=this._totalSamples)return;const i=this._interpolationOrder;let s=o-(i/2|0);s<0&&(s=0);let a=s+i;a>=this._totalSamples&&(a=this._totalSamples-1,s=a-i,s<0&&(s=0));let u=!1;const c=this._samples;if(O(c[3*s])||(zr(this,s/this._samplesPerXysFile|0),u=!0),O(c[3*a])||(zr(this,a/this._samplesPerXysFile|0),u=!0),u)return;O(n)?(n.x=0,n.y=0,n.s=0):n=new Lr(0,0,0);const l=r-s*this._stepSizeDays,f=this._work,h=this._denominators,p=this._coef,d=this._xTable;let m,y;for(m=0;m<=i;++m)f[m]=l-d[m];for(m=0;m<=i;++m){for(p[m]=1,y=0;y<=i;++y)y!==m&&(p[m]*=f[y]);p[m]*=h[m];let t=3*(s+m);n.x+=p[m]*c[t++],n.y+=p[m]*c[t++],n.s+=p[m]*c[t]}return n};let Fr=new L;jr.fromAxisAngle=function(t,e,n){T.typeOf.object("axis",t),T.typeOf.number("angle",e);const r=e/2,o=Math.sin(r);Fr=L.normalize(t,Fr);const i=Fr.x*o,s=Fr.y*o,a=Fr.z*o,u=Math.cos(r);return O(n)?(n.x=i,n.y=s,n.z=a,n.w=u,n):new jr(i,s,a,u)};const Br=[1,2,0],Gr=new Array(3);jr.fromRotationMatrix=function(t,e){let n,r,o,i,s;T.typeOf.object("matrix",t);const a=t[Q.COLUMN0ROW0],u=t[Q.COLUMN1ROW1],c=t[Q.COLUMN2ROW2],l=a+u+c;if(l>0)n=Math.sqrt(l+1),s=.5*n,n=.5/n,r=(t[Q.COLUMN1ROW2]-t[Q.COLUMN2ROW1])*n,o=(t[Q.COLUMN2ROW0]-t[Q.COLUMN0ROW2])*n,i=(t[Q.COLUMN0ROW1]-t[Q.COLUMN1ROW0])*n;else{const e=Br;let l=0;u>a&&(l=1),c>a&&c>u&&(l=2);const f=e[l],h=e[f];n=Math.sqrt(t[Q.getElementIndex(l,l)]-t[Q.getElementIndex(f,f)]-t[Q.getElementIndex(h,h)]+1);const p=Gr;p[l]=.5*n,n=.5/n,s=(t[Q.getElementIndex(h,f)]-t[Q.getElementIndex(f,h)])*n,p[f]=(t[Q.getElementIndex(f,l)]+t[Q.getElementIndex(l,f)])*n,p[h]=(t[Q.getElementIndex(h,l)]+t[Q.getElementIndex(l,h)])*n,r=-p[0],o=-p[1],i=-p[2]}return O(e)?(e.x=r,e.y=o,e.z=i,e.w=s,e):new jr(r,o,i,s)};const kr=new jr;let Wr=new jr,Vr=new jr,Hr=new jr;jr.fromHeadingPitchRoll=function(t,e){return T.typeOf.object("headingPitchRoll",t),Hr=jr.fromAxisAngle(L.UNIT_X,t.roll,kr),Vr=jr.fromAxisAngle(L.UNIT_Y,-t.pitch,e),e=jr.multiply(Vr,Hr,Vr),Wr=jr.fromAxisAngle(L.UNIT_Z,-t.heading,kr),jr.multiply(Wr,e,e)};const Xr=new L,Yr=new L,$r=new jr,Zr=new jr,Qr=new jr;jr.packedLength=4,jr.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n++]=t.z,e[n]=t.w,e},jr.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new jr),n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3],n},jr.packedInterpolationLength=3,jr.convertPackedArrayForInterpolation=function(t,e,n,r){jr.unpack(t,4*n,Qr),jr.conjugate(Qr,Qr);for(let o=0,i=n-e+1;o<i;o++){const n=3*o;jr.unpack(t,4*(e+o),$r),jr.multiply($r,Qr,$r),$r.w<0&&jr.negate($r,$r),jr.computeAxis($r,Xr);const i=jr.computeAngle($r);O(r)||(r=[]),r[n]=Xr.x*i,r[n+1]=Xr.y*i,r[n+2]=Xr.z*i}},jr.unpackInterpolationResult=function(t,e,n,r,o){O(o)||(o=new jr),L.fromArray(t,0,Yr);const i=L.magnitude(Yr);return jr.unpack(e,4*r,Zr),0===i?jr.clone(jr.IDENTITY,$r):jr.fromAxisAngle(Yr,i,$r),jr.multiply($r,Zr,o)},jr.clone=function(t,e){if(O(t))return O(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e):new jr(t.x,t.y,t.z,t.w)},jr.conjugate=function(t,e){return T.typeOf.object("quaternion",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=t.w,e},jr.magnitudeSquared=function(t){return T.typeOf.object("quaternion",t),t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},jr.magnitude=function(t){return Math.sqrt(jr.magnitudeSquared(t))},jr.normalize=function(t,e){T.typeOf.object("result",e);const n=1/jr.magnitude(t),r=t.x*n,o=t.y*n,i=t.z*n,s=t.w*n;return e.x=r,e.y=o,e.z=i,e.w=s,e},jr.inverse=function(t,e){T.typeOf.object("result",e);const n=jr.magnitudeSquared(t);return e=jr.conjugate(t,e),jr.multiplyByScalar(e,1/n,e)},jr.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n.w=t.w+e.w,n},jr.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n.w=t.w-e.w,n},jr.negate=function(t,e){return T.typeOf.object("quaternion",t),T.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e},jr.dot=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},jr.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t.x,o=t.y,i=t.z,s=t.w,a=e.x,u=e.y,c=e.z,l=e.w,f=s*a+r*l+o*c-i*u,h=s*u-r*c+o*l+i*a,p=s*c+r*u-o*a+i*l,d=s*l-r*a-o*u-i*c;return n.x=f,n.y=h,n.z=p,n.w=d,n},jr.multiplyByScalar=function(t,e,n){return T.typeOf.object("quaternion",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x*e,n.y=t.y*e,n.z=t.z*e,n.w=t.w*e,n},jr.divideByScalar=function(t,e,n){return T.typeOf.object("quaternion",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n.w=t.w/e,n},jr.computeAxis=function(t,e){T.typeOf.object("quaternion",t),T.typeOf.object("result",e);const n=t.w;if(Math.abs(n-1)<M.EPSILON6||Math.abs(n+1)<M.EPSILON6)return e.x=1,e.y=e.z=0,e;const r=1/Math.sqrt(1-n*n);return e.x=t.x*r,e.y=t.y*r,e.z=t.z*r,e},jr.computeAngle=function(t){return T.typeOf.object("quaternion",t),Math.abs(t.w-1)<M.EPSILON6?0:2*Math.acos(t.w)};let Kr=new jr;jr.lerp=function(t,e,n,r){return T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r),Kr=jr.multiplyByScalar(e,n,Kr),r=jr.multiplyByScalar(t,1-n,r),jr.add(Kr,r,r)};let Jr=new jr,to=new jr,eo=new jr;jr.slerp=function(t,e,n,r){T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r);let o=jr.dot(t,e),i=e;if(o<0&&(o=-o,i=Jr=jr.negate(e,Jr)),1-o<M.EPSILON6)return jr.lerp(t,i,n,r);const s=Math.acos(o);return to=jr.multiplyByScalar(t,Math.sin((1-n)*s),to),eo=jr.multiplyByScalar(i,Math.sin(n*s),eo),r=jr.add(to,eo,r),jr.multiplyByScalar(r,1/Math.sin(s),r)},jr.log=function(t,e){T.typeOf.object("quaternion",t),T.typeOf.object("result",e);const n=M.acosClamped(t.w);let r=0;return 0!==n&&(r=n/Math.sin(n)),L.multiplyByScalar(t,r,e)},jr.exp=function(t,e){T.typeOf.object("cartesian",t),T.typeOf.object("result",e);const n=L.magnitude(t);let r=0;return 0!==n&&(r=Math.sin(n)/n),e.x=t.x*r,e.y=t.y*r,e.z=t.z*r,e.w=Math.cos(n),e};const no=new L,ro=new L,oo=new jr,io=new jr;jr.computeInnerQuadrangle=function(t,e,n,r){T.typeOf.object("q0",t),T.typeOf.object("q1",e),T.typeOf.object("q2",n),T.typeOf.object("result",r);const o=jr.conjugate(e,oo);jr.multiply(o,n,io);const i=jr.log(io,no);jr.multiply(o,t,io);const s=jr.log(io,ro);return L.add(i,s,i),L.multiplyByScalar(i,.25,i),L.negate(i,i),jr.exp(i,oo),jr.multiply(e,oo,r)},jr.squad=function(t,e,n,r,o,i){T.typeOf.object("q0",t),T.typeOf.object("q1",e),T.typeOf.object("s0",n),T.typeOf.object("s1",r),T.typeOf.number("t",o),T.typeOf.object("result",i);const s=jr.slerp(t,e,o,oo),a=jr.slerp(n,r,o,io);return jr.slerp(s,a,2*o*(1-o),i)};const so=new jr,ao=1.9011074535173003,uo=ae.supportsTypedArrays()?new Float32Array(8):[],co=ae.supportsTypedArrays()?new Float32Array(8):[],lo=ae.supportsTypedArrays()?new Float32Array(8):[],fo=ae.supportsTypedArrays()?new Float32Array(8):[];for(let Xh=0;Xh<7;++Xh){const t=Xh+1,e=2*t+1;uo[Xh]=1/(t*e),co[Xh]=t/e}uo[7]=ao/136,co[7]=8*ao/17,jr.fastSlerp=function(t,e,n,r){T.typeOf.object("start",t),T.typeOf.object("end",e),T.typeOf.number("t",n),T.typeOf.object("result",r);let o,i=jr.dot(t,e);i>=0?o=1:(o=-1,i=-i);const s=i-1,a=1-n,u=n*n,c=a*a;for(let p=7;p>=0;--p)lo[p]=(uo[p]*u-co[p])*s,fo[p]=(uo[p]*c-co[p])*s;const l=o*n*(1+lo[0]*(1+lo[1]*(1+lo[2]*(1+lo[3]*(1+lo[4]*(1+lo[5]*(1+lo[6]*(1+lo[7])))))))),f=a*(1+fo[0]*(1+fo[1]*(1+fo[2]*(1+fo[3]*(1+fo[4]*(1+fo[5]*(1+fo[6]*(1+fo[7])))))))),h=jr.multiplyByScalar(t,f,so);return jr.multiplyByScalar(e,l,r),jr.add(h,r,r)},jr.fastSquad=function(t,e,n,r,o,i){T.typeOf.object("q0",t),T.typeOf.object("q1",e),T.typeOf.object("s0",n),T.typeOf.object("s1",r),T.typeOf.number("t",o),T.typeOf.object("result",i);const s=jr.fastSlerp(t,e,o,oo),a=jr.fastSlerp(n,r,o,io);return jr.fastSlerp(s,a,2*o*(1-o),i)},jr.equals=function(t,e){return t===e||O(t)&&O(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},jr.equalsEpsilon=function(t,e,n){return n=n??0,t===e||O(t)&&O(e)&&Math.abs(t.x-e.x)<=n&&Math.abs(t.y-e.y)<=n&&Math.abs(t.z-e.z)<=n&&Math.abs(t.w-e.w)<=n},jr.ZERO=Object.freeze(new jr(0,0,0,0)),jr.IDENTITY=Object.freeze(new jr(0,0,0,1)),jr.prototype.clone=function(t){return jr.clone(this,t)},jr.prototype.equals=function(t){return jr.equals(this,t)},jr.prototype.equalsEpsilon=function(t,e){return jr.equalsEpsilon(this,t,e)},jr.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const ho={},po={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},mo={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},yo={},go={east:new L,north:new L,up:new L,west:new L,south:new L,down:new L};let wo=new L,Eo=new L,_o=new L;ho.localFrameToFixedFrameGenerator=function(t,e){if(!po.hasOwnProperty(t)||!po[t].hasOwnProperty(e))throw new b("firstAxis and secondAxis must be east, north, up, west, south or down.");const n=po[t][e];let r;const o=t+e;return O(yo[o])?r=yo[o]:(r=function(r,o,i){if(!O(r))throw new b("origin is required.");if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))throw new b("origin has a NaN component");if(O(i)||(i=new ht),L.equalsEpsilon(r,L.ZERO,M.EPSILON14))L.unpack(mo[t],0,wo),L.unpack(mo[e],0,Eo),L.unpack(mo[n],0,_o);else if(M.equalsEpsilon(r.x,0,M.EPSILON14)&&M.equalsEpsilon(r.y,0,M.EPSILON14)){const o=M.sign(r.z);L.unpack(mo[t],0,wo),"east"!==t&&"west"!==t&&L.multiplyByScalar(wo,o,wo),L.unpack(mo[e],0,Eo),"east"!==e&&"west"!==e&&L.multiplyByScalar(Eo,o,Eo),L.unpack(mo[n],0,_o),"east"!==n&&"west"!==n&&L.multiplyByScalar(_o,o,_o)}else{(o=o??be.default).geodeticSurfaceNormal(r,go.up);const i=go.up,s=go.east;s.x=-r.y,s.y=r.x,s.z=0,L.normalize(s,go.east),L.cross(i,s,go.north),L.multiplyByScalar(go.up,-1,go.down),L.multiplyByScalar(go.east,-1,go.west),L.multiplyByScalar(go.north,-1,go.south),wo=go[t],Eo=go[e],_o=go[n]}return i[0]=wo.x,i[1]=wo.y,i[2]=wo.z,i[3]=0,i[4]=Eo.x,i[5]=Eo.y,i[6]=Eo.z,i[7]=0,i[8]=_o.x,i[9]=_o.y,i[10]=_o.z,i[11]=0,i[12]=r.x,i[13]=r.y,i[14]=r.z,i[15]=1,i},yo[o]=r),r},ho.eastNorthUpToFixedFrame=ho.localFrameToFixedFrameGenerator("east","north"),ho.northEastDownToFixedFrame=ho.localFrameToFixedFrameGenerator("north","east"),ho.northUpEastToFixedFrame=ho.localFrameToFixedFrameGenerator("north","up"),ho.northWestUpToFixedFrame=ho.localFrameToFixedFrameGenerator("north","west");const Oo=new jr,bo=new L(1,1,1),To=new ht;ho.headingPitchRollToFixedFrame=function(t,e,n,r,o){T.typeOf.object("HeadingPitchRoll",e),r=r??ho.eastNorthUpToFixedFrame;const i=jr.fromHeadingPitchRoll(e,Oo),s=ht.fromTranslationQuaternionRotationScale(L.ZERO,i,bo,To);return o=r(t,n,o),ht.multiply(o,s,o)};const Ao=new ht,xo=new Q;ho.headingPitchRollQuaternion=function(t,e,n,r,o){T.typeOf.object("HeadingPitchRoll",e);const i=ho.headingPitchRollToFixedFrame(t,e,n,r,Ao),s=ht.getMatrix3(i,xo);return jr.fromRotationMatrix(s,o)};const Ro=new L(1,1,1),So=new L,Io=new ht,No=new ht,vo=new Q,Mo=new jr;ho.fixedFrameToHeadingPitchRoll=function(t,e,n,r){T.defined("transform",t),e=e??be.default,n=n??ho.eastNorthUpToFixedFrame,O(r)||(r=new Ar);const o=ht.getTranslation(t,So);if(L.equals(o,L.ZERO))return r.heading=0,r.pitch=0,r.roll=0,r;let i=ht.inverseTransformation(n(o,e,Io),Io),s=ht.setScale(t,Ro,No);s=ht.setTranslation(s,L.ZERO,s),i=ht.multiply(i,s,i);let a=jr.fromRotationMatrix(ht.getMatrix3(i,vo),Mo);return a=jr.normalize(a,a),Ar.fromQuaternion(a,r)};const Po=M.TWO_PI/86400;let Co=new an;ho.computeIcrfToCentralBodyFixedMatrix=function(t,e){let n=ho.computeIcrfToFixedMatrix(t,e);return O(n)||(n=ho.computeTemeToPseudoFixedMatrix(t,e)),n},ho.computeTemeToPseudoFixedMatrix=function(t,e){if(!O(t))throw new b("date is required.");Co=an.addSeconds(t,-an.computeTaiMinusUtc(t),Co);const n=Co.dayNumber,r=Co.secondsOfDay;let o;const i=n-2451545;o=r>=43200?(i+.5)/Fe.DAYS_PER_JULIAN_CENTURY:(i-.5)/Fe.DAYS_PER_JULIAN_CENTURY;const s=(24110.54841+o*(8640184.812866+o*(.093104+-62e-7*o)))*Po%M.TWO_PI+(72921158553e-15+11772758384668e-32*(n-2451545.5))*((r+.5*Fe.SECONDS_PER_DAY)%Fe.SECONDS_PER_DAY),a=Math.cos(s),u=Math.sin(s);return O(e)?(e[0]=a,e[1]=-u,e[2]=0,e[3]=u,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e):new Q(a,u,0,-u,a,0,0,0,1)},ho.iau2006XysData=new Ur,ho.earthOrientationParameters=wr.NONE;const Lo=32.184;ho.preloadIcrfFixed=function(t){const e=t.start.dayNumber,n=t.start.secondsOfDay+Lo,r=t.stop.dayNumber,o=t.stop.secondsOfDay+Lo;return ho.iau2006XysData.preload(e,n,r,o)},ho.computeIcrfToFixedMatrix=function(t,e){if(!O(t))throw new b("date is required.");O(e)||(e=new Q);const n=ho.computeFixedToIcrfMatrix(t,e);if(O(n))return Q.transpose(n,e)};const Uo=new Ar,qo=new Q,Do=new an;ho.computeMoonFixedToIcrfMatrix=function(t,e){if(!O(t))throw new b("date is required.");const n=an.addSeconds(t,32.184,Do),r=an.totalDays(n)-2451545,o=M.toRadians(12.112)-M.toRadians(.052992)*r,i=M.toRadians(24.224)-M.toRadians(.105984)*r,s=M.toRadians(227.645)+M.toRadians(13.012)*r,a=M.toRadians(261.105)+M.toRadians(13.340716)*r,u=M.toRadians(358)+M.toRadians(.9856)*r;return Uo.pitch=M.toRadians(180)-M.toRadians(3.878)*Math.sin(o)-M.toRadians(.12)*Math.sin(i)+M.toRadians(.07)*Math.sin(s)-M.toRadians(.017)*Math.sin(a),Uo.roll=M.toRadians(-23.47)+M.toRadians(1.543)*Math.cos(o)+M.toRadians(.24)*Math.cos(i)-M.toRadians(.028)*Math.cos(s)+M.toRadians(.007)*Math.cos(a),Uo.heading=M.toRadians(154.375)+M.toRadians(13.17635831)*r+M.toRadians(3.558)*Math.sin(o)+M.toRadians(.121)*Math.sin(i)-M.toRadians(.064)*Math.sin(s)+M.toRadians(.016)*Math.sin(a)+M.toRadians(.025)*Math.sin(u),Q.fromHeadingPitchRoll(Uo,qo)},ho.computeIcrfToMoonFixedMatrix=function(t,e){if(!O(t))throw new b("date is required.");O(e)||(e=new Q);const n=ho.computeMoonFixedToIcrfMatrix(t,e);if(O(n))return Q.transpose(n,e)};const zo=new Lr(0,0,0),jo=new Ue(0,0,0,0,0),Fo=new Q,Bo=new Q;ho.computeFixedToIcrfMatrix=function(t,e){if(!O(t))throw new b("date is required.");O(e)||(e=new Q);const n=ho.earthOrientationParameters.compute(t,jo);if(!O(n))return;const r=t.dayNumber,o=t.secondsOfDay+Lo,i=ho.iau2006XysData.computeXysRadians(r,o,zo);if(!O(i))return;const s=i.x+n.xPoleOffset,a=i.y+n.yPoleOffset,u=1/(1+Math.sqrt(1-s*s-a*a)),c=Fo;c[0]=1-u*s*s,c[3]=-u*s*a,c[6]=s,c[1]=-u*s*a,c[4]=1-u*a*a,c[7]=a,c[2]=-s,c[5]=-a,c[8]=1-u*(s*s+a*a);const l=Q.fromRotationZ(-i.s,Bo),f=Q.multiply(c,l,Fo),h=t.dayNumber-2451545,p=(t.secondsOfDay-an.computeTaiMinusUtc(t)+n.ut1MinusUtc)/Fe.SECONDS_PER_DAY;let d=.779057273264+p+.00273781191135448*(h+p);d=d%1*M.TWO_PI;const m=Q.fromRotationZ(d,Bo),y=Q.multiply(f,m,Fo),g=Math.cos(n.xPoleWander),w=Math.cos(n.yPoleWander),E=Math.sin(n.xPoleWander),_=Math.sin(n.yPoleWander);let T=r-2451545+o/Fe.SECONDS_PER_DAY;T/=36525;const A=-47e-6*T*M.RADIANS_PER_DEGREE/3600,x=Math.cos(A),R=Math.sin(A),S=Bo;return S[0]=g*x,S[1]=g*R,S[2]=E,S[3]=-w*R+_*E*x,S[4]=w*x+_*E*R,S[5]=-_*g,S[6]=-_*R-w*E*x,S[7]=_*x-w*E*R,S[8]=w*g,Q.multiply(y,S,e)};const Go=new G;ho.pointToWindowCoordinates=function(t,e,n,r){return(r=ho.pointToGLWindowCoordinates(t,e,n,r)).y=2*e[5]-r.y,r},ho.pointToGLWindowCoordinates=function(t,e,n,r){if(!O(t))throw new b("modelViewProjectionMatrix is required.");if(!O(e))throw new b("viewportTransformation is required.");if(!O(n))throw new b("point is required.");O(r)||(r=new ue);const o=Go;return ht.multiplyByVector(t,G.fromElements(n.x,n.y,n.z,1,o),o),G.multiplyByScalar(o,1/o.w,o),ht.multiplyByVector(e,o,o),ue.fromCartesian4(o,r)};const ko=new L,Wo=new L,Vo=new L;ho.rotationMatrixFromPositionVelocity=function(t,e,n,r){if(!O(t))throw new b("position is required.");if(!O(e))throw new b("velocity is required.");const o=(n??be.default).geodeticSurfaceNormal(t,ko);let i=L.cross(e,o,Wo);L.equalsEpsilon(i,L.ZERO,M.EPSILON6)&&(i=L.clone(L.UNIT_X,i));const s=L.cross(i,e,Vo);return L.normalize(s,s),L.cross(e,s,i),L.negate(i,i),L.normalize(i,i),O(r)||(r=new Q),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=i.x,r[4]=i.y,r[5]=i.z,r[6]=s.x,r[7]=s.y,r[8]=s.z,r},ho.SWIZZLE_3D_TO_2D_MATRIX=Object.freeze(new ht(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1));const Ho=new ge,Xo=new L,Yo=new L,$o=new Q,Zo=new ht,Qo=new ht;function Ko(t,e,n,r){this.west=t??0,this.south=e??0,this.east=n??0,this.north=r??0}ho.basisTo2D=function(t,e,n){if(!O(t))throw new b("projection is required.");if(!O(e))throw new b("matrix is required.");if(!O(n))throw new b("result is required.");const r=ht.getTranslation(e,Yo),o=t.ellipsoid;let i;if(L.equals(r,L.ZERO))i=L.clone(L.ZERO,Xo);else{const e=o.cartesianToCartographic(r,Ho);i=t.project(e,Xo),L.fromElements(i.z,i.x,i.y,i)}const s=ho.eastNorthUpToFixedFrame(r,o,Zo),a=ht.inverseTransformation(s,Qo),u=ht.getMatrix3(e,$o),c=ht.multiplyByMatrix3(a,u,n);return ht.multiply(ho.SWIZZLE_3D_TO_2D_MATRIX,c,n),ht.setTranslation(n,i,n),n},ho.ellipsoidTo2DModelMatrix=function(t,e,n){if(!O(t))throw new b("projection is required.");if(!O(e))throw new b("center is required.");if(!O(n))throw new b("result is required.");const r=t.ellipsoid,o=ho.eastNorthUpToFixedFrame(e,r,Zo),i=ht.inverseTransformation(o,Qo),s=r.cartesianToCartographic(e,Ho),a=t.project(s,Xo);L.fromElements(a.z,a.x,a.y,a);const u=ht.fromTranslation(a,Zo);return ht.multiply(ho.SWIZZLE_3D_TO_2D_MATRIX,i,n),ht.multiply(u,n,n),n},Object.defineProperties(Ko.prototype,{width:{get:function(){return Ko.computeWidth(this)}},height:{get:function(){return Ko.computeHeight(this)}}}),Ko.packedLength=4,Ko.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.west,e[n++]=t.south,e[n++]=t.east,e[n]=t.north,e},Ko.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new Ko),n.west=t[e++],n.south=t[e++],n.east=t[e++],n.north=t[e],n},Ko.computeWidth=function(t){T.typeOf.object("rectangle",t);let e=t.east;const n=t.west;return e<n&&(e+=M.TWO_PI),e-n},Ko.computeHeight=function(t){return T.typeOf.object("rectangle",t),t.north-t.south},Ko.fromDegrees=function(t,e,n,r,o){return t=M.toRadians(t??0),e=M.toRadians(e??0),n=M.toRadians(n??0),r=M.toRadians(r??0),O(o)?(o.west=t,o.south=e,o.east=n,o.north=r,o):new Ko(t,e,n,r)},Ko.fromRadians=function(t,e,n,r,o){return O(o)?(o.west=t??0,o.south=e??0,o.east=n??0,o.north=r??0,o):new Ko(t,e,n,r)},Ko.fromCartographicArray=function(t,e){T.defined("cartographics",t);let n=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=Number.MAX_VALUE,a=-Number.MAX_VALUE;for(let u=0,c=t.length;u<c;u++){const e=t[u];n=Math.min(n,e.longitude),r=Math.max(r,e.longitude),s=Math.min(s,e.latitude),a=Math.max(a,e.latitude);const c=e.longitude>=0?e.longitude:e.longitude+M.TWO_PI;o=Math.min(o,c),i=Math.max(i,c)}return r-n>i-o&&(n=o,r=i,r>M.PI&&(r-=M.TWO_PI),n>M.PI&&(n-=M.TWO_PI)),O(e)?(e.west=n,e.south=s,e.east=r,e.north=a,e):new Ko(n,s,r,a)},Ko.fromCartesianArray=function(t,e,n){T.defined("cartesians",t),e=e??be.default;let r=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=Number.MAX_VALUE,u=-Number.MAX_VALUE;for(let c=0,l=t.length;c<l;c++){const n=e.cartesianToCartographic(t[c]);r=Math.min(r,n.longitude),o=Math.max(o,n.longitude),a=Math.min(a,n.latitude),u=Math.max(u,n.latitude);const l=n.longitude>=0?n.longitude:n.longitude+M.TWO_PI;i=Math.min(i,l),s=Math.max(s,l)}return o-r>s-i&&(r=i,o=s,o>M.PI&&(o-=M.TWO_PI),r>M.PI&&(r-=M.TWO_PI)),O(n)?(n.west=r,n.south=a,n.east=o,n.north=u,n):new Ko(r,a,o,u)};const Jo=new L,ti=new L,ei=new L,ni=new L,ri=new L,oi=new Array(5);for(let Xh=0;Xh<oi.length;++Xh)oi[Xh]=new L;Ko.fromBoundingSphere=function(t,e,n){T.typeOf.object("boundingSphere",t);const r=t.center,o=t.radius;if(O(e)||(e=be.default),O(n)||(n=new Ko),L.equals(r,L.ZERO))return Ko.clone(Ko.MAX_VALUE,n),n;const i=ho.eastNorthUpToFixedFrame(r,e,Jo),s=ht.multiplyByPointAsVector(i,L.UNIT_X,ti);L.normalize(s,s);const a=ht.multiplyByPointAsVector(i,L.UNIT_Y,ei);L.normalize(a,a),L.multiplyByScalar(a,o,a),L.multiplyByScalar(s,o,s);const u=L.negate(a,ri),c=L.negate(s,ni),l=oi;let f=l[0];return L.add(r,a,f),f=l[1],L.add(r,c,f),f=l[2],L.add(r,u,f),f=l[3],L.add(r,s,f),l[4]=r,Ko.fromCartesianArray(l,e,n)},Ko.clone=function(t,e){if(O(t))return O(e)?(e.west=t.west,e.south=t.south,e.east=t.east,e.north=t.north,e):new Ko(t.west,t.south,t.east,t.north)},Ko.equalsEpsilon=function(t,e,n){return n=n??0,t===e||O(t)&&O(e)&&Math.abs(t.west-e.west)<=n&&Math.abs(t.south-e.south)<=n&&Math.abs(t.east-e.east)<=n&&Math.abs(t.north-e.north)<=n},Ko.prototype.clone=function(t){return Ko.clone(this,t)},Ko.prototype.equals=function(t){return Ko.equals(this,t)},Ko.equals=function(t,e){return t===e||O(t)&&O(e)&&t.west===e.west&&t.south===e.south&&t.east===e.east&&t.north===e.north},Ko.prototype.equalsEpsilon=function(t,e){return Ko.equalsEpsilon(this,t,e)},Ko._validate=function(t){T.typeOf.object("rectangle",t);const e=t.north;T.typeOf.number.greaterThanOrEquals("north",e,-M.PI_OVER_TWO),T.typeOf.number.lessThanOrEquals("north",e,M.PI_OVER_TWO);const n=t.south;T.typeOf.number.greaterThanOrEquals("south",n,-M.PI_OVER_TWO),T.typeOf.number.lessThanOrEquals("south",n,M.PI_OVER_TWO);const r=t.west;T.typeOf.number.greaterThanOrEquals("west",r,-Math.PI),T.typeOf.number.lessThanOrEquals("west",r,Math.PI);const o=t.east;T.typeOf.number.greaterThanOrEquals("east",o,-Math.PI),T.typeOf.number.lessThanOrEquals("east",o,Math.PI)},Ko.southwest=function(t,e){return T.typeOf.object("rectangle",t),O(e)?(e.longitude=t.west,e.latitude=t.south,e.height=0,e):new ge(t.west,t.south)},Ko.northwest=function(t,e){return T.typeOf.object("rectangle",t),O(e)?(e.longitude=t.west,e.latitude=t.north,e.height=0,e):new ge(t.west,t.north)},Ko.northeast=function(t,e){return T.typeOf.object("rectangle",t),O(e)?(e.longitude=t.east,e.latitude=t.north,e.height=0,e):new ge(t.east,t.north)},Ko.southeast=function(t,e){return T.typeOf.object("rectangle",t),O(e)?(e.longitude=t.east,e.latitude=t.south,e.height=0,e):new ge(t.east,t.south)},Ko.center=function(t,e){T.typeOf.object("rectangle",t);let n=t.east;const r=t.west;n<r&&(n+=M.TWO_PI);const o=M.negativePiToPi(.5*(r+n)),i=.5*(t.south+t.north);return O(e)?(e.longitude=o,e.latitude=i,e.height=0,e):new ge(o,i)},Ko.intersection=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("otherRectangle",e);let r=t.east,o=t.west,i=e.east,s=e.west;r<o&&i>0?r+=M.TWO_PI:i<s&&r>0&&(i+=M.TWO_PI),r<o&&s<0?s+=M.TWO_PI:i<s&&o<0&&(o+=M.TWO_PI);const a=M.negativePiToPi(Math.max(o,s)),u=M.negativePiToPi(Math.min(r,i));if((t.west<t.east||e.west<e.east)&&u<=a)return;const c=Math.max(t.south,e.south),l=Math.min(t.north,e.north);return c>=l?void 0:O(n)?(n.west=a,n.south=c,n.east=u,n.north=l,n):new Ko(a,c,u,l)},Ko.simpleIntersection=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("otherRectangle",e);const r=Math.max(t.west,e.west),o=Math.max(t.south,e.south),i=Math.min(t.east,e.east),s=Math.min(t.north,e.north);if(!(o>=s||r>=i))return O(n)?(n.west=r,n.south=o,n.east=i,n.north=s,n):new Ko(r,o,i,s)},Ko.union=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("otherRectangle",e),O(n)||(n=new Ko);let r=t.east,o=t.west,i=e.east,s=e.west;r<o&&i>0?r+=M.TWO_PI:i<s&&r>0&&(i+=M.TWO_PI),r<o&&s<0?s+=M.TWO_PI:i<s&&o<0&&(o+=M.TWO_PI);const a=M.negativePiToPi(Math.min(o,s)),u=M.negativePiToPi(Math.max(r,i));return n.west=a,n.south=Math.min(t.south,e.south),n.east=u,n.north=Math.max(t.north,e.north),n},Ko.expand=function(t,e,n){return T.typeOf.object("rectangle",t),T.typeOf.object("cartographic",e),O(n)||(n=new Ko),n.west=Math.min(t.west,e.longitude),n.south=Math.min(t.south,e.latitude),n.east=Math.max(t.east,e.longitude),n.north=Math.max(t.north,e.latitude),n},Ko.contains=function(t,e){T.typeOf.object("rectangle",t),T.typeOf.object("cartographic",e);let n=e.longitude;const r=e.latitude,o=t.west;let i=t.east;return i<o&&(i+=M.TWO_PI,n<0&&(n+=M.TWO_PI)),(n>o||M.equalsEpsilon(n,o,M.EPSILON14))&&(n<i||M.equalsEpsilon(n,i,M.EPSILON14))&&r>=t.south&&r<=t.north};const ii=new ge;function si(t,e,n,r){this.x=t??0,this.y=e??0,this.width=n??0,this.height=r??0}Ko.subsample=function(t,e,n,r){T.typeOf.object("rectangle",t),e=e??be.default,n=n??0,O(r)||(r=[]);let o=0;const i=t.north,s=t.south,a=t.east,u=t.west,c=ii;c.height=n,c.longitude=u,c.latitude=i,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.longitude=a,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.latitude=s,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.longitude=u,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.latitude=i<0?i:s>0?s:0;for(let l=1;l<8;++l)c.longitude=-Math.PI+l*M.PI_OVER_TWO,Ko.contains(t,c)&&(r[o]=e.cartographicToCartesian(c,r[o]),o++);return 0===c.latitude&&(c.longitude=u,r[o]=e.cartographicToCartesian(c,r[o]),o++,c.longitude=a,r[o]=e.cartographicToCartesian(c,r[o]),o++),r.length=o,r},Ko.subsection=function(t,e,n,r,o,i){if(T.typeOf.object("rectangle",t),T.typeOf.number.greaterThanOrEquals("westLerp",e,0),T.typeOf.number.lessThanOrEquals("westLerp",e,1),T.typeOf.number.greaterThanOrEquals("southLerp",n,0),T.typeOf.number.lessThanOrEquals("southLerp",n,1),T.typeOf.number.greaterThanOrEquals("eastLerp",r,0),T.typeOf.number.lessThanOrEquals("eastLerp",r,1),T.typeOf.number.greaterThanOrEquals("northLerp",o,0),T.typeOf.number.lessThanOrEquals("northLerp",o,1),T.typeOf.number.lessThanOrEquals("westLerp",e,r),T.typeOf.number.lessThanOrEquals("southLerp",n,o),O(i)||(i=new Ko),t.west<=t.east){const n=t.east-t.west;i.west=t.west+e*n,i.east=t.west+r*n}else{const n=M.TWO_PI+t.east-t.west;i.west=M.negativePiToPi(t.west+e*n),i.east=M.negativePiToPi(t.west+r*n)}const s=t.north-t.south;return i.south=t.south+n*s,i.north=t.south+o*s,1===e&&(i.west=t.east),1===r&&(i.east=t.east),1===n&&(i.south=t.north),1===o&&(i.north=t.north),i},Ko.MAX_VALUE=Object.freeze(new Ko(-Math.PI,-M.PI_OVER_TWO,Math.PI,M.PI_OVER_TWO)),si.packedLength=4,si.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.x,e[n++]=t.y,e[n++]=t.width,e[n]=t.height,e},si.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new si),n.x=t[e++],n.y=t[e++],n.width=t[e++],n.height=t[e],n},si.fromPoints=function(t,e){if(O(e)||(e=new si),!O(t)||0===t.length)return e.x=0,e.y=0,e.width=0,e.height=0,e;const n=t.length;let r=t[0].x,o=t[0].y,i=t[0].x,s=t[0].y;for(let a=1;a<n;a++){const e=t[a],n=e.x,u=e.y;r=Math.min(n,r),i=Math.max(n,i),o=Math.min(u,o),s=Math.max(u,s)}return e.x=r,e.y=o,e.width=i-r,e.height=s-o,e};const ai=new Pe,ui=new ge,ci=new ge;si.fromRectangle=function(t,e,n){if(O(n)||(n=new si),!O(t))return n.x=0,n.y=0,n.width=0,n.height=0,n;ai._ellipsoid=be.default;const r=(e=e??ai).project(Ko.southwest(t,ui)),o=e.project(Ko.northeast(t,ci));return ue.subtract(o,r,o),n.x=r.x,n.y=r.y,n.width=o.x,n.height=o.y,n},si.clone=function(t,e){if(O(t))return O(e)?(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e):new si(t.x,t.y,t.width,t.height)},si.union=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),O(n)||(n=new si);const r=Math.min(t.x,e.x),o=Math.min(t.y,e.y),i=Math.max(t.x+t.width,e.x+e.width),s=Math.max(t.y+t.height,e.y+e.height);return n.x=r,n.y=o,n.width=i-r,n.height=s-o,n},si.expand=function(t,e,n){T.typeOf.object("rectangle",t),T.typeOf.object("point",e),n=si.clone(t,n);const r=e.x-n.x,o=e.y-n.y;return r>n.width?n.width=r:r<0&&(n.width-=r,n.x=e.x),o>n.height?n.height=o:o<0&&(n.height-=o,n.y=e.y),n},si.intersect=function(t,e){T.typeOf.object("left",t),T.typeOf.object("right",e);const n=t.x,r=t.y,o=e.x,i=e.y;return n>o+e.width||n+t.width<o||r+t.height<i||r>i+e.height?Ce.OUTSIDE:Ce.INTERSECTING},si.equals=function(t,e){return t===e||O(t)&&O(e)&&t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},si.prototype.clone=function(t){return si.clone(this,t)},si.prototype.intersect=function(t){return si.intersect(this,t)},si.prototype.equals=function(t){return si.equals(this,t)};const li={POINTS:St.POINTS,LINES:St.LINES,LINE_LOOP:St.LINE_LOOP,LINE_STRIP:St.LINE_STRIP,TRIANGLES:St.TRIANGLES,TRIANGLE_STRIP:St.TRIANGLE_STRIP,TRIANGLE_FAN:St.TRIANGLE_FAN,isLines:function(t){return t===li.LINES||t===li.LINE_LOOP||t===li.LINE_STRIP},isTriangles:function(t){return t===li.TRIANGLES||t===li.TRIANGLE_STRIP||t===li.TRIANGLE_FAN},validate:function(t){return t===li.POINTS||t===li.LINES||t===li.LINE_LOOP||t===li.LINE_STRIP||t===li.TRIANGLES||t===li.TRIANGLE_STRIP||t===li.TRIANGLE_FAN}};var fi=Object.freeze(li);const hi={CLOCKWISE:St.CW,COUNTER_CLOCKWISE:St.CCW,validate:function(t){return t===hi.CLOCKWISE||t===hi.COUNTER_CLOCKWISE}};var pi=Object.freeze(hi);function di(t,e,n,r){this[0]=t??0,this[1]=n??0,this[2]=e??0,this[3]=r??0}di.packedLength=4,di.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e},di.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new di),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n},di.packArray=function(t,e){T.defined("array",t);const n=t.length,r=4*n;if(O(e)){if(!Array.isArray(e)&&e.length!==r)throw new b("If result is a typed array, it must have exactly array.length * 4 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(let o=0;o<n;++o)di.pack(t[o],e,4*o);return e},di.unpackArray=function(t,e){if(T.defined("array",t),T.typeOf.number.greaterThanOrEquals("array.length",t.length,4),t.length%4!=0)throw new b("array length must be a multiple of 4.");const n=t.length;O(e)?e.length=n/4:e=new Array(n/4);for(let r=0;r<n;r+=4){const n=r/4;e[n]=di.unpack(t,r,e[n])}return e},di.clone=function(t,e){if(O(t))return O(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):new di(t[0],t[2],t[1],t[3])},di.fromArray=di.unpack,di.fromColumnMajorArray=function(t,e){return T.defined("values",t),di.clone(t,e)},di.fromRowMajorArray=function(t,e){return T.defined("values",t),O(e)?(e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3],e):new di(t[0],t[1],t[2],t[3])},di.fromScale=function(t,e){return T.typeOf.object("scale",t),O(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=t.y,e):new di(t.x,0,0,t.y)},di.fromUniformScale=function(t,e){return T.typeOf.number("scale",t),O(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=t,e):new di(t,0,0,t)},di.fromRotation=function(t,e){T.typeOf.number("angle",t);const n=Math.cos(t),r=Math.sin(t);return O(e)?(e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e):new di(n,-r,r,n)},di.toArray=function(t,e){return T.typeOf.object("matrix",t),O(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):[t[0],t[1],t[2],t[3]]},di.getElementIndex=function(t,e){return T.typeOf.number.greaterThanOrEquals("row",e,0),T.typeOf.number.lessThanOrEquals("row",e,1),T.typeOf.number.greaterThanOrEquals("column",t,0),T.typeOf.number.lessThanOrEquals("column",t,1),2*t+e},di.getColumn=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("result",n);const r=2*e,o=t[r],i=t[r+1];return n.x=o,n.y=i,n},di.setColumn=function(t,e,n,r){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("cartesian",n),T.typeOf.object("result",r);const o=2*e;return(r=di.clone(t,r))[o]=n.x,r[o+1]=n.y,r},di.getRow=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("result",n);const r=t[e],o=t[e+2];return n.x=r,n.y=o,n},di.setRow=function(t,e,n,r){return T.typeOf.object("matrix",t),T.typeOf.number.greaterThanOrEquals("index",e,0),T.typeOf.number.lessThanOrEquals("index",e,1),T.typeOf.object("cartesian",n),T.typeOf.object("result",r),(r=di.clone(t,r))[e]=n.x,r[e+2]=n.y,r};const mi=new ue;di.setScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n);const r=di.getScale(t,mi),o=e.x/r.x,i=e.y/r.y;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*i,n[3]=t[3]*i,n};const yi=new ue;di.setUniformScale=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n);const r=di.getScale(t,yi),o=e/r.x,i=e/r.y;return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*i,n[3]=t[3]*i,n};const gi=new ue;di.getScale=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e.x=ue.magnitude(ue.fromElements(t[0],t[1],gi)),e.y=ue.magnitude(ue.fromElements(t[2],t[3],gi)),e};const wi=new ue;di.getMaximumScale=function(t){return di.getScale(t,wi),ue.maximumComponent(wi)};const Ei=new ue;di.setRotation=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("result",n);const r=di.getScale(t,Ei);return n[0]=e[0]*r.x,n[1]=e[1]*r.x,n[2]=e[2]*r.y,n[3]=e[3]*r.y,n};const _i=new ue;di.getRotation=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=di.getScale(t,_i);return e[0]=t[0]/n.x,e[1]=t[1]/n.x,e[2]=t[2]/n.y,e[3]=t[3]/n.y,e},di.multiply=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n);const r=t[0]*e[0]+t[2]*e[1],o=t[0]*e[2]+t[2]*e[3],i=t[1]*e[0]+t[3]*e[1],s=t[1]*e[2]+t[3]*e[3];return n[0]=r,n[1]=i,n[2]=o,n[3]=s,n},di.add=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},di.subtract=function(t,e,n){return T.typeOf.object("left",t),T.typeOf.object("right",e),T.typeOf.object("result",n),n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n},di.multiplyByVector=function(t,e,n){T.typeOf.object("matrix",t),T.typeOf.object("cartesian",e),T.typeOf.object("result",n);const r=t[0]*e.x+t[2]*e.y,o=t[1]*e.x+t[3]*e.y;return n.x=r,n.y=o,n},di.multiplyByScalar=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scalar",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},di.multiplyByScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.object("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.y,n[3]=t[3]*e.y,n},di.multiplyByUniformScale=function(t,e,n){return T.typeOf.object("matrix",t),T.typeOf.number("scale",e),T.typeOf.object("result",n),n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},di.negate=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},di.transpose=function(t,e){T.typeOf.object("matrix",t),T.typeOf.object("result",e);const n=t[0],r=t[2],o=t[1],i=t[3];return e[0]=n,e[1]=r,e[2]=o,e[3]=i,e},di.abs=function(t,e){return T.typeOf.object("matrix",t),T.typeOf.object("result",e),e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e},di.equals=function(t,e){return t===e||O(t)&&O(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},di.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]},di.equalsEpsilon=function(t,e,n){return n=n??0,t===e||O(t)&&O(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n},di.IDENTITY=Object.freeze(new di(1,0,0,1)),di.ZERO=Object.freeze(new di(0,0,0,0)),di.COLUMN0ROW0=0,di.COLUMN0ROW1=1,di.COLUMN1ROW0=2,di.COLUMN1ROW1=3,Object.defineProperties(di.prototype,{length:{get:function(){return di.packedLength}}}),di.prototype.clone=function(t){return di.clone(this,t)},di.prototype.equals=function(t){return di.equals(this,t)},di.prototype.equalsEpsilon=function(t,e){return di.equalsEpsilon(this,t,e)},di.prototype.toString=function(){return`(${this[0]}, ${this[2]})\n(${this[1]}, ${this[3]})`};const Oi={BYTE:St.BYTE,UNSIGNED_BYTE:St.UNSIGNED_BYTE,SHORT:St.SHORT,UNSIGNED_SHORT:St.UNSIGNED_SHORT,INT:St.INT,UNSIGNED_INT:St.UNSIGNED_INT,FLOAT:St.FLOAT,DOUBLE:St.DOUBLE,getSizeInBytes:function(t){if(!O(t))throw new b("value is required.");switch(t){case Oi.BYTE:return Int8Array.BYTES_PER_ELEMENT;case Oi.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Oi.SHORT:return Int16Array.BYTES_PER_ELEMENT;case Oi.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Oi.INT:return Int32Array.BYTES_PER_ELEMENT;case Oi.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Oi.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case Oi.DOUBLE:return Float64Array.BYTES_PER_ELEMENT;default:throw new b("componentDatatype is not a valid value.")}},fromTypedArray:function(t){if(t instanceof Int8Array)return Oi.BYTE;if(t instanceof Uint8Array)return Oi.UNSIGNED_BYTE;if(t instanceof Int16Array)return Oi.SHORT;if(t instanceof Uint16Array)return Oi.UNSIGNED_SHORT;if(t instanceof Int32Array)return Oi.INT;if(t instanceof Uint32Array)return Oi.UNSIGNED_INT;if(t instanceof Float32Array)return Oi.FLOAT;if(t instanceof Float64Array)return Oi.DOUBLE;throw new b("array must be an Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, or Float64Array.")},validate:function(t){return O(t)&&(t===Oi.BYTE||t===Oi.UNSIGNED_BYTE||t===Oi.SHORT||t===Oi.UNSIGNED_SHORT||t===Oi.INT||t===Oi.UNSIGNED_INT||t===Oi.FLOAT||t===Oi.DOUBLE)},createTypedArray:function(t,e){if(!O(t))throw new b("componentDatatype is required.");if(!O(e))throw new b("valuesOrLength is required.");switch(t){case Oi.BYTE:return new Int8Array(e);case Oi.UNSIGNED_BYTE:return new Uint8Array(e);case Oi.SHORT:return new Int16Array(e);case Oi.UNSIGNED_SHORT:return new Uint16Array(e);case Oi.INT:return new Int32Array(e);case Oi.UNSIGNED_INT:return new Uint32Array(e);case Oi.FLOAT:return new Float32Array(e);case Oi.DOUBLE:return new Float64Array(e);default:throw new b("componentDatatype is not a valid value.")}},createArrayBufferView:function(t,e,n,r){if(!O(t))throw new b("componentDatatype is required.");if(!O(e))throw new b("buffer is required.");switch(n=n??0,r=r??(e.byteLength-n)/Oi.getSizeInBytes(t),t){case Oi.BYTE:return new Int8Array(e,n,r);case Oi.UNSIGNED_BYTE:return new Uint8Array(e,n,r);case Oi.SHORT:return new Int16Array(e,n,r);case Oi.UNSIGNED_SHORT:return new Uint16Array(e,n,r);case Oi.INT:return new Int32Array(e,n,r);case Oi.UNSIGNED_INT:return new Uint32Array(e,n,r);case Oi.FLOAT:return new Float32Array(e,n,r);case Oi.DOUBLE:return new Float64Array(e,n,r);default:throw new b("componentDatatype is not a valid value.")}},fromName:function(t){switch(t){case"BYTE":return Oi.BYTE;case"UNSIGNED_BYTE":return Oi.UNSIGNED_BYTE;case"SHORT":return Oi.SHORT;case"UNSIGNED_SHORT":return Oi.UNSIGNED_SHORT;case"INT":return Oi.INT;case"UNSIGNED_INT":return Oi.UNSIGNED_INT;case"FLOAT":return Oi.FLOAT;case"DOUBLE":return Oi.DOUBLE;default:throw new b("name is not a valid value.")}}};var bi=Object.freeze(Oi),Ti=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function Ai(t){t=t??Z.EMPTY_OBJECT,T.typeOf.object("options.attributes",t.attributes),this.attributes=t.attributes,this.indices=t.indices,this.primitiveType=t.primitiveType??fi.TRIANGLES,this.boundingSphere=t.boundingSphere,this.geometryType=t.geometryType??Ti.NONE,this.boundingSphereCV=t.boundingSphereCV,this.offsetAttribute=t.offsetAttribute}Ai.computeNumberOfVertices=function(t){T.typeOf.object("geometry",t);let e=-1;for(const n in t.attributes)if(t.attributes.hasOwnProperty(n)&&O(t.attributes[n])&&O(t.attributes[n].values)){const r=t.attributes[n],o=r.values.length/r.componentsPerAttribute;if(e!==o&&-1!==e)throw new b("All attribute lists must have the same number of attributes.");e=o}return e};const xi=new ge,Ri=new L,Si=new ht,Ii=[new ge,new ge,new ge],Ni=[new ue,new ue,new ue],vi=[new ue,new ue,new ue],Mi=new L,Pi=new jr,Ci=new ht,Li=new di;function Ui(t){if(!O((t=t??Z.EMPTY_OBJECT).componentDatatype))throw new b("options.componentDatatype is required.");if(!O(t.componentsPerAttribute))throw new b("options.componentsPerAttribute is required.");if(t.componentsPerAttribute<1||t.componentsPerAttribute>4)throw new b("options.componentsPerAttribute must be between 1 and 4.");if(!O(t.values))throw new b("options.values is required.");this.componentDatatype=t.componentDatatype,this.componentsPerAttribute=t.componentsPerAttribute,this.normalize=t.normalize??!1,this.values=t.values}function qi(t,e){this.start=t??0,this.stop=e??0}function Di(t,e){this.center=L.clone(t??L.ZERO),this.radius=e??0}Ai._textureCoordinateRotationPoints=function(t,e,n,r){let o;const i=Ko.center(r,xi),s=ge.toCartesian(i,n,Ri),a=ho.eastNorthUpToFixedFrame(s,n,Si),u=ht.inverse(a,Si),c=Ni,l=Ii;l[0].longitude=r.west,l[0].latitude=r.south,l[1].longitude=r.west,l[1].latitude=r.north,l[2].longitude=r.east,l[2].latitude=r.south;let f=Mi;for(o=0;o<3;o++)ge.toCartesian(l[o],n,f),f=ht.multiplyByPointAsVector(u,f,f),c[o].x=f.x,c[o].y=f.y;const h=jr.fromAxisAngle(L.UNIT_Z,-e,Pi),p=Q.fromQuaternion(h,Ci),d=t.length;let m=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,w=Number.NEGATIVE_INFINITY;for(o=0;o<d;o++)f=ht.multiplyByPointAsVector(u,t[o],f),f=Q.multiplyByVector(p,f,f),m=Math.min(m,f.x),y=Math.min(y,f.y),g=Math.max(g,f.x),w=Math.max(w,f.y);const E=di.fromRotation(e,Li),_=vi;_[0].x=m,_[0].y=y,_[1].x=m,_[1].y=w,_[2].x=g,_[2].y=y;const O=c[0],b=c[2].x-O.x,T=c[1].y-O.y;for(o=0;o<3;o++){const t=_[o];di.multiplyByVector(E,t,t),t.x=(t.x-O.x)/b,t.y=(t.y-O.y)/T}const A=_[0],x=_[1],R=_[2],S=new Array(6);return ue.pack(A,S),ue.pack(x,S,2),ue.pack(R,S,4),S};const zi=new L,ji=new L,Fi=new L,Bi=new L,Gi=new L,ki=new L,Wi=new L,Vi=new L,Hi=new L,Xi=new L,Yi=new L,$i=new L,Zi=4/3*M.PI;Di.fromPoints=function(t,e){if(O(e)||(e=new Di),!O(t)||0===t.length)return e.center=L.clone(L.ZERO,e.center),e.radius=0,e;const n=L.clone(t[0],Wi),r=L.clone(n,zi),o=L.clone(n,ji),i=L.clone(n,Fi),s=L.clone(n,Bi),a=L.clone(n,Gi),u=L.clone(n,ki),c=t.length;let l;for(l=1;l<c;l++){L.clone(t[l],n);const e=n.x,c=n.y,f=n.z;e<r.x&&L.clone(n,r),e>s.x&&L.clone(n,s),c<o.y&&L.clone(n,o),c>a.y&&L.clone(n,a),f<i.z&&L.clone(n,i),f>u.z&&L.clone(n,u)}const f=L.magnitudeSquared(L.subtract(s,r,Vi)),h=L.magnitudeSquared(L.subtract(a,o,Vi)),p=L.magnitudeSquared(L.subtract(u,i,Vi));let d=r,m=s,y=f;h>y&&(y=h,d=o,m=a),p>y&&(y=p,d=i,m=u);const g=Hi;g.x=.5*(d.x+m.x),g.y=.5*(d.y+m.y),g.z=.5*(d.z+m.z);let w=L.magnitudeSquared(L.subtract(m,g,Vi)),E=Math.sqrt(w);const _=Xi;_.x=r.x,_.y=o.y,_.z=i.z;const b=Yi;b.x=s.x,b.y=a.y,b.z=u.z;const T=L.midpoint(_,b,$i);let A=0;for(l=0;l<c;l++){L.clone(t[l],n);const e=L.magnitude(L.subtract(n,T,Vi));e>A&&(A=e);const r=L.magnitudeSquared(L.subtract(n,g,Vi));if(r>w){const t=Math.sqrt(r);E=.5*(E+t),w=E*E;const e=t-E;g.x=(E*g.x+e*n.x)/t,g.y=(E*g.y+e*n.y)/t,g.z=(E*g.z+e*n.z)/t}}return E<A?(L.clone(g,e.center),e.radius=E):(L.clone(T,e.center),e.radius=A),e};const Qi=new Pe,Ki=new L,Ji=new L,ts=new ge,es=new ge;Di.fromRectangle2D=function(t,e,n){return Di.fromRectangleWithHeights2D(t,e,0,0,n)},Di.fromRectangleWithHeights2D=function(t,e,n,r,o){if(O(o)||(o=new Di),!O(t))return o.center=L.clone(L.ZERO,o.center),o.radius=0,o;Qi._ellipsoid=be.default,e=e??Qi,Ko.southwest(t,ts),ts.height=n,Ko.northeast(t,es),es.height=r;const i=e.project(ts,Ki),s=e.project(es,Ji),a=s.x-i.x,u=s.y-i.y,c=s.z-i.z;o.radius=.5*Math.sqrt(a*a+u*u+c*c);const l=o.center;return l.x=i.x+.5*a,l.y=i.y+.5*u,l.z=i.z+.5*c,o};const ns=[];Di.fromRectangle3D=function(t,e,n,r){if(e=e??be.default,n=n??0,O(r)||(r=new Di),!O(t))return r.center=L.clone(L.ZERO,r.center),r.radius=0,r;const o=Ko.subsample(t,e,n,ns);return Di.fromPoints(o,r)},Di.fromVertices=function(t,e,n,r){if(O(r)||(r=new Di),!O(t)||0===t.length)return r.center=L.clone(L.ZERO,r.center),r.radius=0,r;e=e??L.ZERO,n=n??3,T.typeOf.number.greaterThanOrEquals("stride",n,3);const o=Wi;o.x=t[0]+e.x,o.y=t[1]+e.y,o.z=t[2]+e.z;const i=L.clone(o,zi),s=L.clone(o,ji),a=L.clone(o,Fi),u=L.clone(o,Bi),c=L.clone(o,Gi),l=L.clone(o,ki),f=t.length;let h;for(h=0;h<f;h+=n){const n=t[h]+e.x,r=t[h+1]+e.y,f=t[h+2]+e.z;o.x=n,o.y=r,o.z=f,n<i.x&&L.clone(o,i),n>u.x&&L.clone(o,u),r<s.y&&L.clone(o,s),r>c.y&&L.clone(o,c),f<a.z&&L.clone(o,a),f>l.z&&L.clone(o,l)}const p=L.magnitudeSquared(L.subtract(u,i,Vi)),d=L.magnitudeSquared(L.subtract(c,s,Vi)),m=L.magnitudeSquared(L.subtract(l,a,Vi));let y=i,g=u,w=p;d>w&&(w=d,y=s,g=c),m>w&&(w=m,y=a,g=l);const E=Hi;E.x=.5*(y.x+g.x),E.y=.5*(y.y+g.y),E.z=.5*(y.z+g.z);let _=L.magnitudeSquared(L.subtract(g,E,Vi)),b=Math.sqrt(_);const A=Xi;A.x=i.x,A.y=s.y,A.z=a.z;const x=Yi;x.x=u.x,x.y=c.y,x.z=l.z;const R=L.midpoint(A,x,$i);let S=0;for(h=0;h<f;h+=n){o.x=t[h]+e.x,o.y=t[h+1]+e.y,o.z=t[h+2]+e.z;const n=L.magnitude(L.subtract(o,R,Vi));n>S&&(S=n);const r=L.magnitudeSquared(L.subtract(o,E,Vi));if(r>_){const t=Math.sqrt(r);b=.5*(b+t),_=b*b;const e=t-b;E.x=(b*E.x+e*o.x)/t,E.y=(b*E.y+e*o.y)/t,E.z=(b*E.z+e*o.z)/t}}return b<S?(L.clone(E,r.center),r.radius=b):(L.clone(R,r.center),r.radius=S),r},Di.fromEncodedCartesianVertices=function(t,e,n){if(O(n)||(n=new Di),!O(t)||!O(e)||t.length!==e.length||0===t.length)return n.center=L.clone(L.ZERO,n.center),n.radius=0,n;const r=Wi;r.x=t[0]+e[0],r.y=t[1]+e[1],r.z=t[2]+e[2];const o=L.clone(r,zi),i=L.clone(r,ji),s=L.clone(r,Fi),a=L.clone(r,Bi),u=L.clone(r,Gi),c=L.clone(r,ki),l=t.length;let f;for(f=0;f<l;f+=3){const n=t[f]+e[f],l=t[f+1]+e[f+1],h=t[f+2]+e[f+2];r.x=n,r.y=l,r.z=h,n<o.x&&L.clone(r,o),n>a.x&&L.clone(r,a),l<i.y&&L.clone(r,i),l>u.y&&L.clone(r,u),h<s.z&&L.clone(r,s),h>c.z&&L.clone(r,c)}const h=L.magnitudeSquared(L.subtract(a,o,Vi)),p=L.magnitudeSquared(L.subtract(u,i,Vi)),d=L.magnitudeSquared(L.subtract(c,s,Vi));let m=o,y=a,g=h;p>g&&(g=p,m=i,y=u),d>g&&(g=d,m=s,y=c);const w=Hi;w.x=.5*(m.x+y.x),w.y=.5*(m.y+y.y),w.z=.5*(m.z+y.z);let E=L.magnitudeSquared(L.subtract(y,w,Vi)),_=Math.sqrt(E);const b=Xi;b.x=o.x,b.y=i.y,b.z=s.z;const T=Yi;T.x=a.x,T.y=u.y,T.z=c.z;const A=L.midpoint(b,T,$i);let x=0;for(f=0;f<l;f+=3){r.x=t[f]+e[f],r.y=t[f+1]+e[f+1],r.z=t[f+2]+e[f+2];const n=L.magnitude(L.subtract(r,A,Vi));n>x&&(x=n);const o=L.magnitudeSquared(L.subtract(r,w,Vi));if(o>E){const t=Math.sqrt(o);_=.5*(_+t),E=_*_;const e=t-_;w.x=(_*w.x+e*r.x)/t,w.y=(_*w.y+e*r.y)/t,w.z=(_*w.z+e*r.z)/t}}return _<x?(L.clone(w,n.center),n.radius=_):(L.clone(A,n.center),n.radius=x),n},Di.fromCornerPoints=function(t,e,n){T.typeOf.object("corner",t),T.typeOf.object("oppositeCorner",e),O(n)||(n=new Di);const r=L.midpoint(t,e,n.center);return n.radius=L.distance(r,e),n},Di.fromEllipsoid=function(t,e){return T.typeOf.object("ellipsoid",t),O(e)||(e=new Di),L.clone(L.ZERO,e.center),e.radius=t.maximumRadius,e};const rs=new L;Di.fromBoundingSpheres=function(t,e){if(O(e)||(e=new Di),!O(t)||0===t.length)return e.center=L.clone(L.ZERO,e.center),e.radius=0,e;const n=t.length;if(1===n)return Di.clone(t[0],e);if(2===n)return Di.union(t[0],t[1],e);const r=[];let o;for(o=0;o<n;o++)r.push(t[o].center);const i=(e=Di.fromPoints(r,e)).center;let s=e.radius;for(o=0;o<n;o++){const e=t[o];s=Math.max(s,L.distance(i,e.center,rs)+e.radius)}return e.radius=s,e};const os=new L,is=new L,ss=new L;Di.fromOrientedBoundingBox=function(t,e){T.defined("orientedBoundingBox",t),O(e)||(e=new Di);const n=t.halfAxes,r=Q.getColumn(n,0,os),o=Q.getColumn(n,1,is),i=Q.getColumn(n,2,ss);return L.add(r,o,r),L.add(r,i,r),e.center=L.clone(t.center,e.center),e.radius=L.magnitude(r),e};const as=new L,us=new L;Di.fromTransformation=function(t,e){T.typeOf.object("transformation",t),O(e)||(e=new Di);const n=ht.getTranslation(t,as),r=ht.getScale(t,us),o=.5*L.magnitude(r);return e.center=L.clone(n,e.center),e.radius=o,e},Di.clone=function(t,e){if(O(t))return O(e)?(e.center=L.clone(t.center,e.center),e.radius=t.radius,e):new Di(t.center,t.radius)},Di.packedLength=4,Di.pack=function(t,e,n){T.typeOf.object("value",t),T.defined("array",e),n=n??0;const r=t.center;return e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n]=t.radius,e},Di.unpack=function(t,e,n){T.defined("array",t),e=e??0,O(n)||(n=new Di);const r=n.center;return r.x=t[e++],r.y=t[e++],r.z=t[e++],n.radius=t[e],n};const cs=new L,ls=new L;Di.union=function(t,e,n){T.typeOf.object("left",t),T.typeOf.object("right",e),O(n)||(n=new Di);const r=t.center,o=t.radius,i=e.center,s=e.radius,a=L.subtract(i,r,cs),u=L.magnitude(a);if(o>=u+s)return t.clone(n),n;if(s>=u+o)return e.clone(n),n;const c=.5*(o+u+s),l=L.multiplyByScalar(a,(-o+c)/u,ls);return L.add(l,r,l),L.clone(l,n.center),n.radius=c,n};const fs=new L;Di.expand=function(t,e,n){T.typeOf.object("sphere",t),T.typeOf.object("point",e),n=Di.clone(t,n);const r=L.magnitude(L.subtract(e,n.center,fs));return r>n.radius&&(n.radius=r),n},Di.intersectPlane=function(t,e){T.typeOf.object("sphere",t),T.typeOf.object("plane",e);const n=t.center,r=t.radius,o=e.normal,i=L.dot(o,n)+e.distance;return i<-r?Ce.OUTSIDE:i<r?Ce.INTERSECTING:Ce.INSIDE},Di.transform=function(t,e,n){return T.typeOf.object("sphere",t),T.typeOf.object("transform",e),O(n)||(n=new Di),n.center=ht.multiplyByPoint(e,t.center,n.center),n.radius=ht.getMaximumScale(e)*t.radius,n};const hs=new L;Di.distanceSquaredTo=function(t,e){T.typeOf.object("sphere",t),T.typeOf.object("cartesian",e);const n=L.subtract(t.center,e,hs),r=L.magnitude(n)-t.radius;return r<=0?0:r*r},Di.transformWithoutScale=function(t,e,n){return T.typeOf.object("sphere",t),T.typeOf.object("transform",e),O(n)||(n=new Di),n.center=ht.multiplyByPoint(e,t.center,n.center),n.radius=t.radius,n};const ps=new L;Di.computePlaneDistances=function(t,e,n,r){T.typeOf.object("sphere",t),T.typeOf.object("position",e),T.typeOf.object("direction",n),O(r)||(r=new qi);const o=L.subtract(t.center,e,ps),i=L.dot(n,o);return r.start=i-t.radius,r.stop=i+t.radius,r};const ds=new L,ms=new L,ys=new L,gs=new L,ws=new L,Es=new ge,_s=new Array(8);for(let Xh=0;Xh<8;++Xh)_s[Xh]=new L;const Os=new Pe;function bs(t){t=t??Z.EMPTY_OBJECT,this.position=t.position,this.normal=t.normal,this.st=t.st,this.bitangent=t.bitangent,this.tangent=t.tangent,this.color=t.color}function Ts(t){t=t??Z.EMPTY_OBJECT,this.position=t.position??!1,this.normal=t.normal??!1,this.st=t.st??!1,this.bitangent=t.bitangent??!1,this.tangent=t.tangent??!1,this.color=t.color??!1}Di.projectTo2D=function(t,e,n){T.typeOf.object("sphere",t),Os._ellipsoid=be.default;const r=(e=e??Os).ellipsoid;let o=t.center;const i=t.radius;let s;s=L.equals(o,L.ZERO)?L.clone(L.UNIT_X,ds):r.geodeticSurfaceNormal(o,ds);const a=L.cross(L.UNIT_Z,s,ms);L.normalize(a,a);const u=L.cross(s,a,ys);L.normalize(u,u),L.multiplyByScalar(s,i,s),L.multiplyByScalar(u,i,u),L.multiplyByScalar(a,i,a);const c=L.negate(u,ws),l=L.negate(a,gs),f=_s;let h=f[0];L.add(s,u,h),L.add(h,a,h),h=f[1],L.add(s,u,h),L.add(h,l,h),h=f[2],L.add(s,c,h),L.add(h,l,h),h=f[3],L.add(s,c,h),L.add(h,a,h),L.negate(s,s),h=f[4],L.add(s,u,h),L.add(h,a,h),h=f[5],L.add(s,u,h),L.add(h,l,h),h=f[6],L.add(s,c,h),L.add(h,l,h),h=f[7],L.add(s,c,h),L.add(h,a,h);const p=f.length;for(let g=0;g<p;++g){const t=f[g];L.add(o,t,t);const n=r.cartesianToCartographic(t,Es);e.project(n,t)}o=(n=Di.fromPoints(f,n)).center;const d=o.x,m=o.y,y=o.z;return o.x=y,o.y=d,o.z=m,n},Di.isOccluded=function(t,e){return T.typeOf.object("sphere",t),T.typeOf.object("occluder",e),!e.isBoundingSphereVisible(t)},Di.equals=function(t,e){return t===e||O(t)&&O(e)&&L.equals(t.center,e.center)&&t.radius===e.radius},Di.prototype.intersectPlane=function(t){return Di.intersectPlane(this,t)},Di.prototype.distanceSquaredTo=function(t){return Di.distanceSquaredTo(this,t)},Di.prototype.computePlaneDistances=function(t,e,n){return Di.computePlaneDistances(this,t,e,n)},Di.prototype.isOccluded=function(t){return Di.isOccluded(this,t)},Di.prototype.equals=function(t){return Di.equals(this,t)},Di.prototype.clone=function(t){return Di.clone(this,t)},Di.prototype.volume=function(){const t=this.radius;return Zi*t*t*t},Ts.POSITION_ONLY=Object.freeze(new Ts({position:!0})),Ts.POSITION_AND_NORMAL=Object.freeze(new Ts({position:!0,normal:!0})),Ts.POSITION_NORMAL_AND_ST=Object.freeze(new Ts({position:!0,normal:!0,st:!0})),Ts.POSITION_AND_ST=Object.freeze(new Ts({position:!0,st:!0})),Ts.POSITION_AND_COLOR=Object.freeze(new Ts({position:!0,color:!0})),Ts.ALL=Object.freeze(new Ts({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0})),Ts.DEFAULT=Ts.POSITION_NORMAL_AND_ST,Ts.packedLength=6,Ts.pack=function(t,e,n){if(!O(t))throw new b("value is required");if(!O(e))throw new b("array is required");return n=n??0,e[n++]=t.position?1:0,e[n++]=t.normal?1:0,e[n++]=t.st?1:0,e[n++]=t.tangent?1:0,e[n++]=t.bitangent?1:0,e[n]=t.color?1:0,e},Ts.unpack=function(t,e,n){if(!O(t))throw new b("array is required");return e=e??0,O(n)||(n=new Ts),n.position=1===t[e++],n.normal=1===t[e++],n.st=1===t[e++],n.tangent=1===t[e++],n.bitangent=1===t[e++],n.color=1===t[e],n},Ts.clone=function(t,e){if(O(t))return O(e)||(e=new Ts),e.position=t.position,e.normal=t.normal,e.st=t.st,e.tangent=t.tangent,e.bitangent=t.bitangent,e.color=t.color,e};const As={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(t){switch(t){case As.SCALAR:return Number;case As.VEC2:return ue;case As.VEC3:return L;case As.VEC4:return G;case As.MAT2:return di;case As.MAT3:return Q;case As.MAT4:return ht;default:throw new b("attributeType is not a valid value.")}},getNumberOfComponents:function(t){switch(t){case As.SCALAR:return 1;case As.VEC2:return 2;case As.VEC3:return 3;case As.VEC4:case As.MAT2:return 4;case As.MAT3:return 9;case As.MAT4:return 16;default:throw new b("attributeType is not a valid value.")}},getAttributeLocationCount:function(t){switch(t){case As.SCALAR:case As.VEC2:case As.VEC3:case As.VEC4:return 1;case As.MAT2:return 2;case As.MAT3:return 3;case As.MAT4:return 4;default:throw new b("attributeType is not a valid value.")}},getGlslType:function(t){switch(T.typeOf.string("attributeType",t),t){case As.SCALAR:return"float";case As.VEC2:return"vec2";case As.VEC3:return"vec3";case As.VEC4:return"vec4";case As.MAT2:return"mat2";case As.MAT3:return"mat3";case As.MAT4:return"mat4";default:throw new b("attributeType is not a valid value.")}}};var xs=Object.freeze(As);const Rs=1/256,Ss={octEncodeInRange:function(t,e,n){T.defined("vector",t),T.defined("result",n);const r=L.magnitudeSquared(t);if(Math.abs(r-1)>M.EPSILON6)throw new b("vector must be normalized.");if(n.x=t.x/(Math.abs(t.x)+Math.abs(t.y)+Math.abs(t.z)),n.y=t.y/(Math.abs(t.x)+Math.abs(t.y)+Math.abs(t.z)),t.z<0){const t=n.x,e=n.y;n.x=(1-Math.abs(e))*M.signNotZero(t),n.y=(1-Math.abs(t))*M.signNotZero(e)}return n.x=M.toSNorm(n.x,e),n.y=M.toSNorm(n.y,e),n},octEncode:function(t,e){return Ss.octEncodeInRange(t,255,e)}},Is=new ue,Ns=new Uint8Array(1);function vs(t){return Ns[0]=t,Ns[0]}Ss.octEncodeToCartesian4=function(t,e){return Ss.octEncodeInRange(t,65535,Is),e.x=vs(Is.x*Rs),e.y=vs(Is.x),e.z=vs(Is.y*Rs),e.w=vs(Is.y),e},Ss.octDecodeInRange=function(t,e,n,r){if(T.defined("result",r),t<0||t>n||e<0||e>n)throw new b(`x and y must be unsigned normalized integers between 0 and ${n}`);if(r.x=M.fromSNorm(t,n),r.y=M.fromSNorm(e,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){const t=r.x;r.x=(1-Math.abs(r.y))*M.signNotZero(t),r.y=(1-Math.abs(t))*M.signNotZero(r.y)}return L.normalize(r,r)},Ss.octDecode=function(t,e,n){return Ss.octDecodeInRange(t,e,255,n)},Ss.octDecodeFromCartesian4=function(t,e){T.typeOf.object("encoded",t),T.typeOf.object("result",e);const n=t.x,r=t.y,o=t.z,i=t.w;if(n<0||n>255||r<0||r>255||o<0||o>255||i<0||i>255)throw new b("x, y, z, and w must be unsigned normalized integers between 0 and 255");const s=256*n+r,a=256*o+i;return Ss.octDecodeInRange(s,a,65535,e)},Ss.octPackFloat=function(t){return T.defined("encoded",t),256*t.x+t.y};const Ms=new ue;function Ps(t){return t>>1^-(1&t)}Ss.octEncodeFloat=function(t){return Ss.octEncode(t,Ms),Ss.octPackFloat(Ms)},Ss.octDecodeFloat=function(t,e){T.defined("value",t);const n=t/256,r=Math.floor(n),o=256*(n-r);return Ss.octDecode(r,o,e)},Ss.octPack=function(t,e,n,r){T.defined("v1",t),T.defined("v2",e),T.defined("v3",n),T.defined("result",r);const o=Ss.octEncodeFloat(t),i=Ss.octEncodeFloat(e),s=Ss.octEncode(n,Ms);return r.x=65536*s.x+o,r.y=65536*s.y+i,r},Ss.octUnpack=function(t,e,n,r){T.defined("packed",t),T.defined("v1",e),T.defined("v2",n),T.defined("v3",r);let o=t.x/65536;const i=Math.floor(o),s=65536*(o-i);o=t.y/65536;const a=Math.floor(o),u=65536*(o-a);Ss.octDecodeFloat(s,e),Ss.octDecodeFloat(u,n),Ss.octDecode(i,a,r)},Ss.compressTextureCoordinates=function(t){return T.defined("textureCoordinates",t),4096*(4095*t.x|0)+(4095*t.y|0)},Ss.decompressTextureCoordinates=function(t,e){T.defined("compressed",t),T.defined("result",e);const n=t/4096,r=Math.floor(n);return e.x=r/4095,e.y=(t-4096*r)/4095,e},Ss.zigZagDeltaDecode=function(t,e,n){T.defined("uBuffer",t),T.defined("vBuffer",e),T.typeOf.number.equals("uBuffer.length","vBuffer.length",t.length,e.length),O(n)&&T.typeOf.number.equals("uBuffer.length","heightBuffer.length",t.length,n.length);const r=t.length;let o=0,i=0,s=0;for(let a=0;a<r;++a)o+=Ps(t[a]),i+=Ps(e[a]),t[a]=o,e[a]=i,O(n)&&(s+=Ps(n[a]),n[a]=s)},Ss.dequantize=function(t,e,n,r){T.defined("typedArray",t),T.defined("componentDatatype",e),T.defined("type",n),T.defined("count",r);const o=xs.getNumberOfComponents(n);let i;switch(e){case bi.BYTE:i=127;break;case bi.UNSIGNED_BYTE:i=255;break;case bi.SHORT:i=32767;break;case bi.UNSIGNED_SHORT:i=65535;break;case bi.INT:i=2147483647;break;case bi.UNSIGNED_INT:i=4294967295;break;default:throw new b(`Cannot dequantize component datatype: ${e}`)}const s=new Float32Array(r*o);for(let a=0;a<r;a++)for(let e=0;e<o;e++){const n=a*o+e;s[n]=Math.max(t[n]/i,-1)}return s},Ss.decodeRGB565=function(t,e){T.defined("typedArray",t);const n=3*t.length;O(e)&&T.typeOf.number.equals("result.length","typedArray.length * 3",e.length,n);const r=t.length;O(e)||(e=new Float32Array(3*r));const o=1/31,i=1/63;for(let s=0;s<r;s++){const n=t[s],r=n>>11,a=n>>5&63,u=31&n,c=3*s;e[c]=r*o,e[c+1]=a*i,e[c+2]=u*o}return e};const Cs=new L,Ls=new L,Us=new L;function qs(){this.high=L.clone(L.ZERO),this.low=L.clone(L.ZERO)}qs.encode=function(t,e){let n;return T.typeOf.number("value",t),O(e)||(e={high:0,low:0}),t>=0?(n=65536*Math.floor(t/65536),e.high=n,e.low=t-n):(n=65536*Math.floor(-t/65536),e.high=-n,e.low=t+n),e};const Ds={high:0,low:0};qs.fromCartesian=function(t,e){T.typeOf.object("cartesian",t),O(e)||(e=new qs);const n=e.high,r=e.low;return qs.encode(t.x,Ds),n.x=Ds.high,r.x=Ds.low,qs.encode(t.y,Ds),n.y=Ds.high,r.y=Ds.low,qs.encode(t.z,Ds),n.z=Ds.high,r.z=Ds.low,e};const zs=new qs;qs.writeElements=function(t,e,n){T.defined("cartesianArray",e),T.typeOf.number("index",n),T.typeOf.number.greaterThanOrEquals("index",n,0),qs.fromCartesian(t,zs);const r=zs.high,o=zs.low;e[n]=r.x,e[n+1]=r.y,e[n+2]=r.z,e[n+3]=o.x,e[n+4]=o.y,e[n+5]=o.z};const js={};function Fs(t,e,n){const r=t+e;return M.sign(t)!==M.sign(e)&&Math.abs(r/Math.max(Math.abs(t),Math.abs(e)))<n?0:r}js.computeDiscriminant=function(t,e,n){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");return e*e-4*t*n},js.computeRealRoots=function(t,e,n){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");let r;if(0===t)return 0===e?[]:[-n/e];if(0===e){if(0===n)return[0,0];const e=Math.abs(n),o=Math.abs(t);if(e<o&&e/o<M.EPSILON14)return[0,0];if(e>o&&o/e<M.EPSILON14)return[];if(r=-n/t,r<0)return[];const i=Math.sqrt(r);return[-i,i]}if(0===n)return r=-e/t,r<0?[r,0]:[0,r];const o=Fs(e*e,-4*t*n,M.EPSILON14);if(o<0)return[];const i=-.5*Fs(e,M.sign(e)*Math.sqrt(o),M.EPSILON14);return e>0?[i/t,n/i]:[n/i,i/t]};const Bs={};function Gs(t,e,n,r){const o=t,i=e/3,s=n/3,a=r,u=o*s,c=i*a,l=i*i,f=s*s,h=o*s-l,p=o*a-i*s,d=i*a-f,m=4*h*d-p*p;let y,g;if(m<0){let t,e,n;l*c>=u*f?(t=o,e=h,n=-2*i*h+o*p):(t=a,e=d,n=-a*p+2*s*d);const r=-(n<0?-1:1)*Math.abs(t)*Math.sqrt(-m);g=-n+r;const w=g/2,E=w<0?-Math.pow(-w,1/3):Math.pow(w,1/3),_=g===r?-E:-e/E;return y=e<=0?E+_:-n/(E*E+_*_+e),l*c>=u*f?[(y-i)/o]:[-a/(y+s)]}const w=h,E=-2*i*h+o*p,_=d,O=-a*p+2*s*d,b=Math.sqrt(m),T=Math.sqrt(3)/2;let A=Math.abs(Math.atan2(o*b,-E)/3);y=2*Math.sqrt(-w);let x=Math.cos(A);g=y*x;let R=y*(-x/2-T*Math.sin(A));const S=g+R>2*i?g-i:R-i,I=o,N=S/I;A=Math.abs(Math.atan2(a*b,-O)/3),y=2*Math.sqrt(-_),x=Math.cos(A),g=y*x,R=y*(-x/2-T*Math.sin(A));const v=-a,M=g+R<2*s?g+s:R+s,P=v/M,C=-S*M-I*v,L=(s*C-i*(S*v))/(-i*C+s*(I*M));return N<=L?N<=P?L<=P?[N,L,P]:[N,P,L]:[P,N,L]:N<=P?[L,N,P]:L<=P?[L,P,N]:[P,L,N]}Bs.computeDiscriminant=function(t,e,n,r){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");const o=e*e,i=n*n;return 18*t*e*n*r+o*i-t*t*27*(r*r)-4*(t*i*n+o*e*r)},Bs.computeRealRoots=function(t,e,n,r){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");let o,i;if(0===t)return js.computeRealRoots(e,n,r);if(0===e){if(0===n){if(0===r)return[0,0,0];i=-r/t;const e=i<0?-Math.pow(-i,1/3):Math.pow(i,1/3);return[e,e,e]}return 0===r?(o=js.computeRealRoots(t,0,n),0===o.Length?[0]:[o[0],0,o[1]]):Gs(t,0,n,r)}return 0===n?0===r?(i=-e/t,i<0?[i,0,0]:[0,0,i]):Gs(t,e,0,r):0===r?(o=js.computeRealRoots(t,e,n),0===o.length?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]):Gs(t,e,n,r)};const ks={};function Ws(t,e){e=L.clone(e??L.ZERO),L.equals(e,L.ZERO)||L.normalize(e,e),this.origin=L.clone(t??L.ZERO),this.direction=e}ks.computeDiscriminant=function(t,e,n,r,o){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");if("number"!=typeof o)throw new b("e is a required number.");const i=t*t,s=e*e,a=s*e,u=n*n,c=u*n,l=r*r,f=l*r,h=o*o;return s*u*l-4*a*f-4*t*c*l+18*t*e*n*f-27*i*l*l+i*t*256*(h*o)+o*(18*a*n*r-4*s*c+16*t*u*u-80*t*e*u*r-6*t*s*l+144*i*n*l)+h*(144*t*s*n-27*s*s-128*i*u-192*i*e*r)},ks.computeRealRoots=function(t,e,n,r,o){if("number"!=typeof t)throw new b("a is a required number.");if("number"!=typeof e)throw new b("b is a required number.");if("number"!=typeof n)throw new b("c is a required number.");if("number"!=typeof r)throw new b("d is a required number.");if("number"!=typeof o)throw new b("e is a required number.");if(Math.abs(t)<M.EPSILON15)return Bs.computeRealRoots(e,n,r,o);const i=e/t,s=n/t,a=r/t,u=o/t;let c=i<0?1:0;switch(c+=s<0?c+1:c,c+=a<0?c+1:c,c+=u<0?c+1:c,c){case 0:case 3:case 4:case 6:case 7:case 9:case 10:case 12:case 13:case 14:case 15:return function(t,e,n,r){const o=t*t,i=e-3*o/8,s=n-e*t/2+o*t/8,a=r-n*t/4+e*o/16-3*o*o/256,u=Bs.computeRealRoots(1,2*i,i*i-4*a,-s*s);if(u.length>0){const e=-t/4,n=u[u.length-1];if(Math.abs(n)<M.EPSILON14){const t=js.computeRealRoots(1,i,a);if(2===t.length){const n=t[0],r=t[1];let o;if(n>=0&&r>=0){const t=Math.sqrt(n),o=Math.sqrt(r);return[e-o,e-t,e+t,e+o]}if(n>=0&&r<0)return o=Math.sqrt(n),[e-o,e+o];if(n<0&&r>=0)return o=Math.sqrt(r),[e-o,e+o]}return[]}if(n>0){const t=Math.sqrt(n),r=(i+n-s/t)/2,o=(i+n+s/t)/2,a=js.computeRealRoots(1,t,r),u=js.computeRealRoots(1,-t,o);return 0!==a.length?(a[0]+=e,a[1]+=e,0!==u.length?(u[0]+=e,u[1]+=e,a[1]<=u[0]?[a[0],a[1],u[0],u[1]]:u[1]<=a[0]?[u[0],u[1],a[0],a[1]]:a[0]>=u[0]&&a[1]<=u[1]?[u[0],a[0],a[1],u[1]]:u[0]>=a[0]&&u[1]<=a[1]?[a[0],u[0],u[1],a[1]]:a[0]>u[0]&&a[0]<u[1]?[u[0],a[0],u[1],a[1]]:[a[0],u[0],a[1],u[1]]):a):0!==u.length?(u[0]+=e,u[1]+=e,u):[]}}return[]}(i,s,a,u);case 1:case 2:case 5:case 8:case 11:return function(t,e,n,r){const o=t*t,i=-2*e,s=n*t+e*e-4*r,a=o*r-n*e*t+n*n,u=Bs.computeRealRoots(1,i,s,a);if(u.length>0){const i=u[0],s=e-i,a=s*s,c=t/2,l=s/2,f=a-4*r,h=a+4*Math.abs(r),p=o-4*i,d=o+4*Math.abs(i);let m,y,g,w,E,_;if(i<0||f*d<p*h){const e=Math.sqrt(p);m=e/2,y=0===e?0:(t*l-n)/e}else{const e=Math.sqrt(f);m=0===e?0:(t*l-n)/e,y=e/2}0===c&&0===m?(g=0,w=0):M.sign(c)===M.sign(m)?(g=c+m,w=i/g):(w=c-m,g=i/w),0===l&&0===y?(E=0,_=0):M.sign(l)===M.sign(y)?(E=l+y,_=r/E):(_=l-y,E=r/_);const O=js.computeRealRoots(1,g,E),b=js.computeRealRoots(1,w,_);if(0!==O.length)return 0!==b.length?O[1]<=b[0]?[O[0],O[1],b[0],b[1]]:b[1]<=O[0]?[b[0],b[1],O[0],O[1]]:O[0]>=b[0]&&O[1]<=b[1]?[b[0],O[0],O[1],b[1]]:b[0]>=O[0]&&b[1]<=O[1]?[O[0],b[0],b[1],O[1]]:O[0]>b[0]&&O[0]<b[1]?[b[0],O[0],b[1],O[1]]:[O[0],b[0],O[1],b[1]]:O;if(0!==b.length)return b}return[]}(i,s,a,u);default:return}},Ws.clone=function(t,e){if(O(t))return O(e)?(e.origin=L.clone(t.origin),e.direction=L.clone(t.direction),e):new Ws(t.origin,t.direction)},Ws.getPoint=function(t,e,n){return T.typeOf.object("ray",t),T.typeOf.number("t",e),O(n)||(n=new L),n=L.multiplyByScalar(t.direction,e,n),L.add(t.origin,n,n)};const Vs={rayPlane:function(t,e,n){if(!O(t))throw new b("ray is required.");if(!O(e))throw new b("plane is required.");O(n)||(n=new L);const r=t.origin,o=t.direction,i=e.normal,s=L.dot(i,o);if(Math.abs(s)<M.EPSILON15)return;const a=(-e.distance-L.dot(i,r))/s;return a<0?void 0:(n=L.multiplyByScalar(o,a,n),L.add(r,n,n))}},Hs=new L,Xs=new L,Ys=new L,$s=new L,Zs=new L;Vs.rayTriangleParametric=function(t,e,n,r,o){if(!O(t))throw new b("ray is required.");if(!O(e))throw new b("p0 is required.");if(!O(n))throw new b("p1 is required.");if(!O(r))throw new b("p2 is required.");o=o??!1;const i=t.origin,s=t.direction,a=L.subtract(n,e,Hs),u=L.subtract(r,e,Xs),c=L.cross(s,u,Ys),l=L.dot(a,c);let f,h,p,d,m;if(o){if(l<M.EPSILON6)return;if(f=L.subtract(i,e,$s),p=L.dot(f,c),p<0||p>l)return;if(h=L.cross(f,a,Zs),d=L.dot(s,h),d<0||p+d>l)return;m=L.dot(u,h)/l}else{if(Math.abs(l)<M.EPSILON6)return;const t=1/l;if(f=L.subtract(i,e,$s),p=L.dot(f,c)*t,p<0||p>1)return;if(h=L.cross(f,a,Zs),d=L.dot(s,h)*t,d<0||p+d>1)return;m=L.dot(u,h)*t}return m},Vs.rayTriangle=function(t,e,n,r,o,i){const s=Vs.rayTriangleParametric(t,e,n,r,o);if(O(s)&&!(s<0))return O(i)||(i=new L),L.multiplyByScalar(t.direction,s,i),L.add(t.origin,i,i)};const Qs=new Ws;Vs.lineSegmentTriangle=function(t,e,n,r,o,i,s){if(!O(t))throw new b("v0 is required.");if(!O(e))throw new b("v1 is required.");if(!O(n))throw new b("p0 is required.");if(!O(r))throw new b("p1 is required.");if(!O(o))throw new b("p2 is required.");const a=Qs;L.clone(t,a.origin),L.subtract(e,t,a.direction),L.normalize(a.direction,a.direction);const u=Vs.rayTriangleParametric(a,n,r,o,i);if(!(!O(u)||u<0||u>L.distance(t,e)))return O(s)||(s=new L),L.multiplyByScalar(a.direction,u,s),L.add(a.origin,s,s)};const Ks={root0:0,root1:0};function Js(t,e,n){O(n)||(n=new qi);const r=t.origin,o=t.direction,i=e.center,s=e.radius*e.radius,a=L.subtract(r,i,Ys),u=function(t,e,n,r){const o=e*e-4*t*n;if(o<0)return;if(o>0){const n=1/(2*t),i=Math.sqrt(o),s=(-e+i)*n,a=(-e-i)*n;return s<a?(r.root0=s,r.root1=a):(r.root0=a,r.root1=s),r}const i=-e/(2*t);return 0!==i?(r.root0=r.root1=i,r):void 0}(L.dot(o,o),2*L.dot(o,a),L.magnitudeSquared(a)-s,Ks);if(O(u))return n.start=u.root0,n.stop=u.root1,n}Vs.raySphere=function(t,e,n){if(!O(t))throw new b("ray is required.");if(!O(e))throw new b("sphere is required.");if(O(n=Js(t,e,n))&&!(n.stop<0))return n.start=Math.max(n.start,0),n};const ta=new Ws;Vs.lineSegmentSphere=function(t,e,n,r){if(!O(t))throw new b("p0 is required.");if(!O(e))throw new b("p1 is required.");if(!O(n))throw new b("sphere is required.");const o=ta;L.clone(t,o.origin);const i=L.subtract(e,t,o.direction),s=L.magnitude(i);if(L.normalize(i,i),!(!O(r=Js(o,n,r))||r.stop<0||r.start>s))return r.start=Math.max(r.start,0),r.stop=Math.min(r.stop,s),r};const ea=new L,na=new L;Vs.rayEllipsoid=function(t,e){if(!O(t))throw new b("ray is required.");if(!O(e))throw new b("ellipsoid is required.");const n=e.oneOverRadii,r=L.multiplyComponents(n,t.origin,ea),o=L.multiplyComponents(n,t.direction,na),i=L.magnitudeSquared(r),s=L.dot(r,o);let a,u,c,l,f;if(i>1){if(s>=0)return;const t=s*s;if(a=i-1,u=L.magnitudeSquared(o),c=u*a,t<c)return;if(t>c){l=s*s-c,f=-s+Math.sqrt(l);const t=f/u,e=a/f;return t<e?new qi(t,e):{start:e,stop:t}}const e=Math.sqrt(a/u);return new qi(e,e)}return i<1?(a=i-1,u=L.magnitudeSquared(o),c=u*a,l=s*s-c,f=-s+Math.sqrt(l),new qi(0,f/u)):s<0?(u=L.magnitudeSquared(o),new qi(0,-s/u)):void 0};const ra=new qi,oa=new qi,ia=new qi;function sa(t,e,n,r,o){if(o.start=(n-t)/e,o.stop=(r-t)/e,o.stop<o.start){const t=o.stop;o.stop=o.start,o.start=t}return o}function aa(t,e,n){const r=t+e;return M.sign(t)!==M.sign(e)&&Math.abs(r/Math.max(Math.abs(t),Math.abs(e)))<n?0:r}Vs.rayAxisAlignedBoundingBox=function(t,e,n){if(!O(t))throw new b("ray is required.");if(!O(e))throw new b("box is required.");O(n)||(n=new qi);const r=sa(t.origin.x,t.direction.x,e.minimum.x,e.maximum.x,ra),o=sa(t.origin.y,t.direction.y,e.minimum.y,e.maximum.y,oa),i=sa(t.origin.z,t.direction.z,e.minimum.z,e.maximum.z,ia);if(n.start=r.start>o.start?r.start:o.start,n.stop=r.stop<o.stop?r.stop:o.stop,!(r.start>o.stop||o.start>r.stop||n.start>i.stop||i.start>n.stop))return i.start>n.start&&(n.start=i.start),i.stop<n.stop&&(n.stop=i.stop),n},Vs.quadraticVectorExpression=function(t,e,n,r,o){const i=r*r,s=o*o,a=(t[Q.COLUMN1ROW1]-t[Q.COLUMN2ROW2])*s,u=o*(r*aa(t[Q.COLUMN1ROW0],t[Q.COLUMN0ROW1],M.EPSILON15)+e.y),c=t[Q.COLUMN0ROW0]*i+t[Q.COLUMN2ROW2]*s+r*e.x+n,l=s*aa(t[Q.COLUMN2ROW1],t[Q.COLUMN1ROW2],M.EPSILON15),f=o*(r*aa(t[Q.COLUMN2ROW0],t[Q.COLUMN0ROW2])+e.z);let h;const p=[];if(0===f&&0===l){if(h=js.computeRealRoots(a,u,c),0===h.length)return p;const t=h[0],e=Math.sqrt(Math.max(1-t*t,0));if(p.push(new L(r,o*t,o*-e)),p.push(new L(r,o*t,o*e)),2===h.length){const t=h[1],e=Math.sqrt(Math.max(1-t*t,0));p.push(new L(r,o*t,o*-e)),p.push(new L(r,o*t,o*e))}return p}const d=f*f,m=l*l,y=f*l,g=a*a+m,w=2*(u*a+y),E=2*c*a+u*u-m+d,_=2*(c*u-y),O=c*c-d;if(0===g&&0===w&&0===E&&0===_)return p;h=ks.computeRealRoots(g,w,E,_,O);const b=h.length;if(0===b)return p;for(let T=0;T<b;++T){const t=h[T],e=t*t,n=Math.max(1-e,0),i=Math.sqrt(n);let s;s=M.sign(a)===M.sign(c)?aa(a*e+c,u*t,M.EPSILON12):M.sign(c)===M.sign(u*t)?aa(a*e,u*t+c,M.EPSILON12):aa(a*e+u*t,c,M.EPSILON12);const d=s*aa(l*t,f,M.EPSILON15);d<0?p.push(new L(r,o*t,o*i)):d>0?p.push(new L(r,o*t,o*-i)):0!==i?(p.push(new L(r,o*t,o*-i)),p.push(new L(r,o*t,o*i)),++T):p.push(new L(r,o*t,o*i))}return p};const ua=new L,ca=new L,la=new L,fa=new L,ha=new L,pa=new Q,da=new Q,ma=new Q,ya=new Q,ga=new Q,wa=new Q,Ea=new Q,_a=new L,Oa=new L,ba=new ge;Vs.grazingAltitudeLocation=function(t,e){if(!O(t))throw new b("ray is required.");if(!O(e))throw new b("ellipsoid is required.");const n=t.origin,r=t.direction;if(!L.equals(n,L.ZERO)){const t=e.geodeticSurfaceNormal(n,ua);if(L.dot(r,t)>=0)return n}const o=O(this.rayEllipsoid(t,e)),i=e.transformPositionToScaledSpace(r,ua),s=L.normalize(i,i),a=L.mostOrthogonalAxis(i,fa),u=L.normalize(L.cross(a,s,ca),ca),c=L.normalize(L.cross(s,u,la),la),l=pa;l[0]=s.x,l[1]=s.y,l[2]=s.z,l[3]=u.x,l[4]=u.y,l[5]=u.z,l[6]=c.x,l[7]=c.y,l[8]=c.z;const f=Q.transpose(l,da),h=Q.fromScale(e.radii,ma),p=Q.fromScale(e.oneOverRadii,ya),d=ga;d[0]=0,d[1]=-r.z,d[2]=r.y,d[3]=r.z,d[4]=0,d[5]=-r.x,d[6]=-r.y,d[7]=r.x,d[8]=0;const m=Q.multiply(Q.multiply(f,p,wa),d,wa),y=Q.multiply(Q.multiply(m,h,Ea),l,Ea),g=Q.multiplyByVector(m,n,ha),w=Vs.quadraticVectorExpression(y,L.negate(g,ua),0,0,1);let E,_;const T=w.length;if(T>0){let t=L.clone(L.ZERO,Oa),i=Number.NEGATIVE_INFINITY;for(let e=0;e<T;++e){E=Q.multiplyByVector(h,Q.multiplyByVector(l,w[e],_a),_a);const o=L.normalize(L.subtract(E,n,fa),fa),s=L.dot(o,r);s>i&&(i=s,t=L.clone(E,t))}const s=e.cartesianToCartographic(t,ba);return i=M.clamp(i,0,1),_=L.magnitude(L.subtract(t,n,fa))*Math.sqrt(1-i*i),_=o?-_:_,s.height=_,e.cartographicToCartesian(s,new L)}};const Ta=new L;function Aa(t,e){if(T.typeOf.object("normal",t),!M.equalsEpsilon(L.magnitude(t),1,M.EPSILON6))throw new b("normal must be normalized.");T.typeOf.number("distance",e),this.normal=L.clone(t),this.distance=e}Vs.lineSegmentPlane=function(t,e,n,r){if(!O(t))throw new b("endPoint0 is required.");if(!O(e))throw new b("endPoint1 is required.");if(!O(n))throw new b("plane is required.");O(r)||(r=new L);const o=L.subtract(e,t,Ta),i=n.normal,s=L.dot(i,o);if(Math.abs(s)<M.EPSILON6)return;const a=L.dot(i,t),u=-(n.distance+a)/s;return u<0||u>1?void 0:(L.multiplyByScalar(o,u,r),L.add(t,r,r),r)},Vs.trianglePlaneIntersection=function(t,e,n,r){if(!(O(t)&&O(e)&&O(n)&&O(r)))throw new b("p0, p1, p2, and plane are required.");const o=r.normal,i=r.distance,s=L.dot(o,t)+i<0,a=L.dot(o,e)+i<0,u=L.dot(o,n)+i<0;let c,l,f=0;if(f+=s?1:0,f+=a?1:0,f+=u?1:0,1!==f&&2!==f||(c=new L,l=new L),1===f){if(s)return Vs.lineSegmentPlane(t,e,r,c),Vs.lineSegmentPlane(t,n,r,l),{positions:[t,e,n,c,l],indices:[0,3,4,1,2,4,1,4,3]};if(a)return Vs.lineSegmentPlane(e,n,r,c),Vs.lineSegmentPlane(e,t,r,l),{positions:[t,e,n,c,l],indices:[1,3,4,2,0,4,2,4,3]};if(u)return Vs.lineSegmentPlane(n,t,r,c),Vs.lineSegmentPlane(n,e,r,l),{positions:[t,e,n,c,l],indices:[2,3,4,0,1,4,0,4,3]}}else if(2===f){if(!s)return Vs.lineSegmentPlane(e,t,r,c),Vs.lineSegmentPlane(n,t,r,l),{positions:[t,e,n,c,l],indices:[1,2,4,1,4,3,0,3,4]};if(!a)return Vs.lineSegmentPlane(n,e,r,c),Vs.lineSegmentPlane(t,e,r,l),{positions:[t,e,n,c,l],indices:[2,0,4,2,4,3,1,3,4]};if(!u)return Vs.lineSegmentPlane(t,n,r,c),Vs.lineSegmentPlane(e,n,r,l),{positions:[t,e,n,c,l],indices:[0,1,4,0,4,3,2,3,4]}}},Aa.fromPointNormal=function(t,e,n){if(T.typeOf.object("point",t),T.typeOf.object("normal",e),!M.equalsEpsilon(L.magnitude(e),1,M.EPSILON6))throw new b("normal must be normalized.");const r=-L.dot(e,t);return O(n)?(L.clone(e,n.normal),n.distance=r,n):new Aa(e,r)};const xa=new L;Aa.fromCartesian4=function(t,e){T.typeOf.object("coefficients",t);const n=L.fromCartesian4(t,xa),r=t.w;if(!M.equalsEpsilon(L.magnitude(n),1,M.EPSILON6))throw new b("normal must be normalized.");return O(e)?(L.clone(n,e.normal),e.distance=r,e):new Aa(n,r)},Aa.getPointDistance=function(t,e){return T.typeOf.object("plane",t),T.typeOf.object("point",e),L.dot(t.normal,e)+t.distance};const Ra=new L;Aa.projectPointOntoPlane=function(t,e,n){T.typeOf.object("plane",t),T.typeOf.object("point",e),O(n)||(n=new L);const r=Aa.getPointDistance(t,e),o=L.multiplyByScalar(t.normal,r,Ra);return L.subtract(e,o,n)};const Sa=new ht,Ia=new G,Na=new L;Aa.transform=function(t,e,n){T.typeOf.object("plane",t),T.typeOf.object("transform",e);const r=t.normal,o=t.distance,i=ht.inverseTranspose(e,Sa);let s=G.fromElements(r.x,r.y,r.z,o,Ia);s=ht.multiplyByVector(i,s,s);const a=L.fromCartesian4(s,Na);return s=G.divideByScalar(s,L.magnitude(a),s),Aa.fromCartesian4(s,n)},Aa.clone=function(t,e){return T.typeOf.object("plane",t),O(e)?(L.clone(t.normal,e.normal),e.distance=t.distance,e):new Aa(t.normal,t.distance)},Aa.equals=function(t,e){return T.typeOf.object("left",t),T.typeOf.object("right",e),t.distance===e.distance&&L.equals(t.normal,e.normal)},Aa.ORIGIN_XY_PLANE=Object.freeze(new Aa(L.UNIT_Z,0)),Aa.ORIGIN_YZ_PLANE=Object.freeze(new Aa(L.UNIT_X,0)),Aa.ORIGIN_ZX_PLANE=Object.freeze(new Aa(L.UNIT_Y,0));const va=function(t){const e=(t=t??Z.EMPTY_OBJECT).indices,n=t.maximumIndex,r=t.cacheSize??24;let o;function i(t,e,n,r,i,s,a){let u,c=-1,l=-1,f=0;for(;f<n.length;){const t=n[f];r[t].numLiveTriangles&&(u=0,i-r[t].timeStamp+2*r[t].numLiveTriangles<=e&&(u=i-r[t].timeStamp),(u>l||-1===l)&&(l=u,c=t)),++f}return-1===c?function(t,e,n,r){for(;e.length>=1;){const n=e[e.length-1];if(e.splice(e.length-1,1),t[n].numLiveTriangles>0)return n}for(;o<r;){if(t[o].numLiveTriangles>0)return++o,o-1;++o}return-1}(r,s,0,a):c}if(!O(e))throw new b("indices is required.");const s=e.length;if(s<3||s%3!=0)throw new b("indices length must be a multiple of three.");if(n<=0)throw new b("maximumIndex must be greater than zero.");if(r<3)throw new b("cacheSize must be greater than two.");let a=0,u=0,c=e[u];const l=s;if(O(n))a=n+1;else{for(;u<l;)c>a&&(a=c),++u,c=e[u];if(-1===a)return 0;++a}const f=[];let h;for(h=0;h<a;h++)f[h]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};u=0;let p=0;for(;u<l;)f[e[u]].vertexTriangles.push(p),++f[e[u]].numLiveTriangles,f[e[u+1]].vertexTriangles.push(p),++f[e[u+1]].numLiveTriangles,f[e[u+2]].vertexTriangles.push(p),++f[e[u+2]].numLiveTriangles,++p,u+=3;let d=0,m=r+1;o=1;let y=[];const g=[];let w,E,_=0;const T=[],A=s/3,x=[];for(h=0;h<A;h++)x[h]=!1;let R,S;for(;-1!==d;){y=[],E=f[d],S=E.vertexTriangles.length;for(let t=0;t<S;++t)if(p=E.vertexTriangles[t],!x[p]){x[p]=!0,u=p+p+p;for(let t=0;t<3;++t)R=e[u],y.push(R),g.push(R),T[_]=R,++_,w=f[R],--w.numLiveTriangles,m-w.timeStamp>r&&(w.timeStamp=m,++m),++u}d=i(0,r,y,f,m,g,a)}return T},Ma={};function Pa(t,e,n,r,o){t[e++]=n,t[e++]=r,t[e++]=r,t[e++]=o,t[e++]=o,t[e]=n}function Ca(t){const e={};for(const n in t)if(t.hasOwnProperty(n)&&O(t[n])&&O(t[n].values)){const r=t[n];e[n]=new Ui({componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,values:[]})}return e}function La(t,e,n){for(const r in e)if(e.hasOwnProperty(r)&&O(e[r])&&O(e[r].values)){const o=e[r];for(let e=0;e<o.componentsPerAttribute;++e)t[r].values.push(o.values[n*o.componentsPerAttribute+e])}}Ma.toWireframe=function(t){if(!O(t))throw new b("geometry is required.");const e=t.indices;if(O(e)){switch(t.primitiveType){case fi.TRIANGLES:t.indices=function(t){const e=t.length,n=e/3*6,r=Nt.createTypedArray(e,n);let o=0;for(let i=0;i<e;i+=3,o+=6)Pa(r,o,t[i],t[i+1],t[i+2]);return r}(e);break;case fi.TRIANGLE_STRIP:t.indices=function(t){const e=t.length;if(e>=3){const n=6*(e-2),r=Nt.createTypedArray(e,n);Pa(r,0,t[0],t[1],t[2]);let o=6;for(let i=3;i<e;++i,o+=6)Pa(r,o,t[i-1],t[i],t[i-2]);return r}return new Uint16Array}(e);break;case fi.TRIANGLE_FAN:t.indices=function(t){if(t.length>0){const e=t.length-1,n=6*(e-1),r=Nt.createTypedArray(e,n),o=t[0];let i=0;for(let s=1;s<e;++s,i+=6)Pa(r,i,o,t[s],t[s+1]);return r}return new Uint16Array}(e);break;default:throw new b("geometry.primitiveType must be TRIANGLES, TRIANGLE_STRIP, or TRIANGLE_FAN.")}t.primitiveType=fi.LINES}return t},Ma.createLineSegmentsForVectors=function(t,e,n){if(e=e??"normal",!O(t))throw new b("geometry is required.");if(!O(t.attributes.position))throw new b("geometry.attributes.position is required.");if(!O(t.attributes[e]))throw new b(`geometry.attributes must have an attribute with the same name as the attributeName parameter, ${e}.`);n=n??1e4;const r=t.attributes.position.values,o=t.attributes[e].values,i=r.length,s=new Float64Array(2*i);let a,u=0;for(let l=0;l<i;l+=3)s[u++]=r[l],s[u++]=r[l+1],s[u++]=r[l+2],s[u++]=r[l]+o[l]*n,s[u++]=r[l+1]+o[l+1]*n,s[u++]=r[l+2]+o[l+2]*n;const c=t.boundingSphere;return O(c)&&(a=new Di(c.center,c.radius+n)),new Ai({attributes:{position:new Ui({componentDatatype:bi.DOUBLE,componentsPerAttribute:3,values:s})},primitiveType:fi.LINES,boundingSphere:a})},Ma.createAttributeLocations=function(t){if(!O(t))throw new b("geometry is required.");const e=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=t.attributes,r={};let o,i=0;const s=e.length;for(o=0;o<s;++o){const t=e[o];O(n[t])&&(r[t]=i++)}for(const a in n)n.hasOwnProperty(a)&&!O(r[a])&&(r[a]=i++);return r},Ma.reorderForPreVertexCache=function(t){if(!O(t))throw new b("geometry is required.");const e=Ai.computeNumberOfVertices(t),n=t.indices;if(O(n)){const r=new Int32Array(e);for(let t=0;t<e;t++)r[t]=-1;const o=n,i=o.length,s=Nt.createTypedArray(e,i);let a,u=0,c=0,l=0;for(;u<i;)a=r[o[u]],-1!==a?s[c]=a:(a=o[u],r[a]=l,s[c]=l,++l),++u,++c;t.indices=s;const f=t.attributes;for(const t in f)if(f.hasOwnProperty(t)&&O(f[t])&&O(f[t].values)){const n=f[t],o=n.values;let i=0;const s=n.componentsPerAttribute,a=bi.createTypedArray(n.componentDatatype,l*s);for(;i<e;){const t=r[i];if(-1!==t)for(let e=0;e<s;e++)a[s*t+e]=o[s*i+e];++i}n.values=a}}return t},Ma.reorderForPostVertexCache=function(t,e){if(!O(t))throw new b("geometry is required.");const n=t.indices;if(t.primitiveType===fi.TRIANGLES&&O(n)){const r=n.length;let o=0;for(let t=0;t<r;t++)n[t]>o&&(o=n[t]);t.indices=va({indices:n,maximumIndex:o,cacheSize:e})}return t},Ma.fitToUnsignedShortIndices=function(t){if(!O(t))throw new b("geometry is required.");if(O(t.indices)&&t.primitiveType!==fi.TRIANGLES&&t.primitiveType!==fi.LINES&&t.primitiveType!==fi.POINTS)throw new b("geometry.primitiveType must equal to PrimitiveType.TRIANGLES, PrimitiveType.LINES, or PrimitiveType.POINTS.");const e=[],n=Ai.computeNumberOfVertices(t);if(O(t.indices)&&n>=M.SIXTY_FOUR_KILOBYTES){let n=[],r=[],o=0,i=Ca(t.attributes);const s=t.indices,a=s.length;let u;t.primitiveType===fi.TRIANGLES?u=3:t.primitiveType===fi.LINES?u=2:t.primitiveType===fi.POINTS&&(u=1);for(let c=0;c<a;c+=u){for(let e=0;e<u;++e){const a=s[c+e];let u=n[a];O(u)||(u=o++,n[a]=u,La(i,t.attributes,a)),r.push(u)}o+u>=M.SIXTY_FOUR_KILOBYTES&&(e.push(new Ai({attributes:i,indices:r,primitiveType:t.primitiveType,boundingSphere:t.boundingSphere,boundingSphereCV:t.boundingSphereCV})),n=[],r=[],o=0,i=Ca(t.attributes))}0!==r.length&&e.push(new Ai({attributes:i,indices:r,primitiveType:t.primitiveType,boundingSphere:t.boundingSphere,boundingSphereCV:t.boundingSphereCV}))}else e.push(t);return e};const Ua=new L,qa=new ge;Ma.projectTo2D=function(t,e,n,r,o){if(!O(t))throw new b("geometry is required.");if(!O(e))throw new b("attributeName is required.");if(!O(n))throw new b("attributeName3D is required.");if(!O(r))throw new b("attributeName2D is required.");if(!O(t.attributes[e]))throw new b(`geometry must have attribute matching the attributeName argument: ${e}.`);if(t.attributes[e].componentDatatype!==bi.DOUBLE)throw new b("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");const i=t.attributes[e],s=(o=O(o)?o:new Pe).ellipsoid,a=i.values,u=new Float64Array(a.length);let c=0;for(let l=0;l<a.length;l+=3){const t=L.fromArray(a,l,Ua),e=s.cartesianToCartographic(t,qa);if(!O(e))throw new b(`Could not project point (${t.x}, ${t.y}, ${t.z}) to 2D.`);const n=o.project(e,Ua);u[c++]=n.x,u[c++]=n.y,u[c++]=n.z}return t.attributes[n]=i,t.attributes[r]=new Ui({componentDatatype:bi.DOUBLE,componentsPerAttribute:3,values:u}),delete t.attributes[e],t};const Da={high:0,low:0};Ma.encodeAttribute=function(t,e,n,r){if(!O(t))throw new b("geometry is required.");if(!O(e))throw new b("attributeName is required.");if(!O(n))throw new b("attributeHighName is required.");if(!O(r))throw new b("attributeLowName is required.");if(!O(t.attributes[e]))throw new b(`geometry must have attribute matching the attributeName argument: ${e}.`);if(t.attributes[e].componentDatatype!==bi.DOUBLE)throw new b("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");const o=t.attributes[e],i=o.values,s=i.length,a=new Float32Array(s),u=new Float32Array(s);for(let l=0;l<s;++l)qs.encode(i[l],Da),a[l]=Da.high,u[l]=Da.low;const c=o.componentsPerAttribute;return t.attributes[n]=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:c,values:a}),t.attributes[r]=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:c,values:u}),delete t.attributes[e],t};let za=new L;function ja(t,e){if(O(e)){const n=e.values,r=n.length;for(let e=0;e<r;e+=3)L.unpack(n,e,za),ht.multiplyByPoint(t,za,za),L.pack(za,n,e)}}function Fa(t,e){if(O(e)){const n=e.values,r=n.length;for(let e=0;e<r;e+=3)L.unpack(n,e,za),Q.multiplyByVector(t,za,za),za=L.normalize(za,za),L.pack(za,n,e)}}const Ba=new ht,Ga=new Q;Ma.transformToWorldCoordinates=function(t){if(!O(t))throw new b("instance is required.");const e=t.modelMatrix;if(ht.equals(e,ht.IDENTITY))return t;const n=t.geometry.attributes;ja(e,n.position),ja(e,n.prevPosition),ja(e,n.nextPosition),(O(n.normal)||O(n.tangent)||O(n.bitangent))&&(ht.inverse(e,Ba),ht.transpose(Ba,Ba),ht.getMatrix3(Ba,Ga),Fa(Ga,n.normal),Fa(Ga,n.tangent),Fa(Ga,n.bitangent));const r=t.geometry.boundingSphere;return O(r)&&(t.geometry.boundingSphere=Di.transform(r,e,r)),t.modelMatrix=ht.clone(ht.IDENTITY),t};const ka=new L;function Wa(t,e){const n=t.length;let r,o,i,s;const a=t[0].modelMatrix,u=O(t[0][e].indices),c=t[0][e].primitiveType;for(o=1;o<n;++o){if(!ht.equals(t[o].modelMatrix,a))throw new b("All instances must have the same modelMatrix.");if(O(t[o][e].indices)!==u)throw new b("All instance geometries must have an indices or not have one.");if(t[o][e].primitiveType!==c)throw new b("All instance geometries must have the same primitiveType.")}const l=function(t,e){const n=t.length,r={},o=t[0][e].attributes;let i;for(i in o)if(o.hasOwnProperty(i)&&O(o[i])&&O(o[i].values)){const s=o[i];let a=s.values.length,u=!0;for(let r=1;r<n;++r){const n=t[r][e].attributes[i];if(!O(n)||s.componentDatatype!==n.componentDatatype||s.componentsPerAttribute!==n.componentsPerAttribute||s.normalize!==n.normalize){u=!1;break}a+=n.values.length}u&&(r[i]=new Ui({componentDatatype:s.componentDatatype,componentsPerAttribute:s.componentsPerAttribute,normalize:s.normalize,values:bi.createTypedArray(s.componentDatatype,a)}))}return r}(t,e);let f,h,p,d;for(r in l)if(l.hasOwnProperty(r))for(f=l[r].values,s=0,o=0;o<n;++o)for(h=t[o][e].attributes[r].values,p=h.length,i=0;i<p;++i)f[s++]=h[i];if(u){let r=0;for(o=0;o<n;++o)r+=t[o][e].indices.length;const i=Ai.computeNumberOfVertices(new Ai({attributes:l,primitiveType:fi.POINTS})),a=Nt.createTypedArray(i,r);let u=0,c=0;for(o=0;o<n;++o){const n=t[o][e].indices,r=n.length;for(s=0;s<r;++s)a[u++]=c+n[s];c+=Ai.computeNumberOfVertices(t[o][e])}d=a}let m,y=new L,g=0;for(o=0;o<n;++o){if(m=t[o][e].boundingSphere,!O(m)){y=void 0;break}L.add(m.center,y,y)}if(O(y))for(L.divideByScalar(y,n,y),o=0;o<n;++o){m=t[o][e].boundingSphere;const n=L.magnitude(L.subtract(m.center,y,ka))+m.radius;n>g&&(g=n)}return new Ai({attributes:l,indices:d,primitiveType:c,boundingSphere:O(y)?new Di(y,g):void 0})}Ma.combineInstances=function(t){if(!O(t)||t.length<1)throw new b("instances is required and must have length greater than zero.");const e=[],n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];O(r.geometry)?e.push(r):O(r.westHemisphereGeometry)&&O(r.eastHemisphereGeometry)&&n.push(r)}const o=[];return e.length>0&&o.push(Wa(e,"geometry")),n.length>0&&(o.push(Wa(n,"westHemisphereGeometry")),o.push(Wa(n,"eastHemisphereGeometry"))),o};const Va=new L,Ha=new L,Xa=new L,Ya=new L;Ma.computeNormal=function(t){if(!O(t))throw new b("geometry is required.");if(!O(t.attributes.position)||!O(t.attributes.position.values))throw new b("geometry.attributes.position.values is required.");if(!O(t.indices))throw new b("geometry.indices is required.");if(t.indices.length<2||t.indices.length%3!=0)throw new b("geometry.indices length must be greater than 0 and be a multiple of 3.");if(t.primitiveType!==fi.TRIANGLES)throw new b("geometry.primitiveType must be PrimitiveType.TRIANGLES.");const e=t.indices,n=t.attributes,r=n.position.values,o=n.position.values.length/3,i=e.length,s=new Array(o),a=new Array(i/3),u=new Array(i);let c;for(c=0;c<o;c++)s[c]={indexOffset:0,count:0,currentCount:0};let l=0;for(c=0;c<i;c+=3){const t=e[c],n=e[c+1],o=e[c+2],i=3*t,u=3*n,f=3*o;Ha.x=r[i],Ha.y=r[i+1],Ha.z=r[i+2],Xa.x=r[u],Xa.y=r[u+1],Xa.z=r[u+2],Ya.x=r[f],Ya.y=r[f+1],Ya.z=r[f+2],s[t].count++,s[n].count++,s[o].count++,L.subtract(Xa,Ha,Xa),L.subtract(Ya,Ha,Ya),a[l]=L.cross(Xa,Ya,new L),l++}let f,h=0;for(c=0;c<o;c++)s[c].indexOffset+=h,h+=s[c].count;for(l=0,c=0;c<i;c+=3){f=s[e[c]];let t=f.indexOffset+f.currentCount;u[t]=l,f.currentCount++,f=s[e[c+1]],t=f.indexOffset+f.currentCount,u[t]=l,f.currentCount++,f=s[e[c+2]],t=f.indexOffset+f.currentCount,u[t]=l,f.currentCount++,l++}const p=new Float32Array(3*o);for(c=0;c<o;c++){const t=3*c;if(f=s[c],L.clone(L.ZERO,Va),f.count>0){for(l=0;l<f.count;l++)L.add(Va,a[u[f.indexOffset+l]],Va);L.equalsEpsilon(L.ZERO,Va,M.EPSILON10)&&L.clone(a[u[f.indexOffset]],Va)}L.equalsEpsilon(L.ZERO,Va,M.EPSILON10)&&(Va.z=1),L.normalize(Va,Va),p[t]=Va.x,p[t+1]=Va.y,p[t+2]=Va.z}return t.attributes.normal=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:3,values:p}),t};const $a=new L,Za=new L,Qa=new L;Ma.computeTangentAndBitangent=function(t){if(!O(t))throw new b("geometry is required.");const e=t.attributes,n=t.indices;if(!O(e.position)||!O(e.position.values))throw new b("geometry.attributes.position.values is required.");if(!O(e.normal)||!O(e.normal.values))throw new b("geometry.attributes.normal.values is required.");if(!O(e.st)||!O(e.st.values))throw new b("geometry.attributes.st.values is required.");if(!O(n))throw new b("geometry.indices is required.");if(n.length<2||n.length%3!=0)throw new b("geometry.indices length must be greater than 0 and be a multiple of 3.");if(t.primitiveType!==fi.TRIANGLES)throw new b("geometry.primitiveType must be PrimitiveType.TRIANGLES.");const r=t.attributes.position.values,o=t.attributes.normal.values,i=t.attributes.st.values,s=t.attributes.position.values.length/3,a=n.length,u=new Array(3*s);let c,l,f,h;for(c=0;c<u.length;c++)u[c]=0;for(c=0;c<a;c+=3){const t=n[c],e=n[c+1],o=n[c+2];l=3*t,f=3*e,h=3*o;const s=2*t,a=2*e,p=2*o,d=r[l],m=r[l+1],y=r[l+2],g=i[s],w=i[s+1],E=i[a+1]-w,_=i[p+1]-w,O=1/((i[a]-g)*_-(i[p]-g)*E),b=(_*(r[f]-d)-E*(r[h]-d))*O,T=(_*(r[f+1]-m)-E*(r[h+1]-m))*O,A=(_*(r[f+2]-y)-E*(r[h+2]-y))*O;u[l]+=b,u[l+1]+=T,u[l+2]+=A,u[f]+=b,u[f+1]+=T,u[f+2]+=A,u[h]+=b,u[h+1]+=T,u[h+2]+=A}const p=new Float32Array(3*s),d=new Float32Array(3*s);for(c=0;c<s;c++){l=3*c,f=l+1,h=l+2;const t=L.fromArray(o,l,$a),e=L.fromArray(u,l,Qa),n=L.dot(t,e);L.multiplyByScalar(t,n,Za),L.normalize(L.subtract(e,Za,e),e),p[l]=e.x,p[f]=e.y,p[h]=e.z,L.normalize(L.cross(t,e,e),e),d[l]=e.x,d[f]=e.y,d[h]=e.z}return t.attributes.tangent=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:3,values:p}),t.attributes.bitangent=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:3,values:d}),t};const Ka=new ue,Ja=new L,tu=new L,eu=new L;let nu=new ue;function ru(t,e){Math.abs(t.y)<M.EPSILON6&&(t.y=e?-M.EPSILON6:M.EPSILON6)}Ma.compressVertices=function(t){if(!O(t))throw new b("geometry is required.");const e=t.attributes.extrudeDirection;let n,r;if(O(e)){const o=e.values;r=o.length/3;const i=new Float32Array(2*r);let s=0;for(n=0;n<r;++n)L.fromArray(o,3*n,Ja),L.equals(Ja,L.ZERO)?s+=2:(nu=Ss.octEncodeInRange(Ja,65535,nu),i[s++]=nu.x,i[s++]=nu.y);return t.attributes.compressedAttributes=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:2,values:i}),delete t.attributes.extrudeDirection,t}const o=t.attributes.normal,i=t.attributes.st,s=O(o),a=O(i);if(!s&&!a)return t;const u=t.attributes.tangent,c=t.attributes.bitangent,l=O(u),f=O(c);let h,p,d,m;s&&(h=o.values),a&&(p=i.values),l&&(d=u.values),f&&(m=c.values),r=(s?h.length:p.length)/(s?3:2);let y=r,g=a&&s?2:1;g+=l||f?1:0,y*=g;const w=new Float32Array(y);let E=0;for(n=0;n<r;++n){a&&(ue.fromArray(p,2*n,Ka),w[E++]=Ss.compressTextureCoordinates(Ka));const t=3*n;s&&O(d)&&O(m)?(L.fromArray(h,t,Ja),L.fromArray(d,t,tu),L.fromArray(m,t,eu),Ss.octPack(Ja,tu,eu,Ka),w[E++]=Ka.x,w[E++]=Ka.y):(s&&(L.fromArray(h,t,Ja),w[E++]=Ss.octEncodeFloat(Ja)),l&&(L.fromArray(d,t,Ja),w[E++]=Ss.octEncodeFloat(Ja)),f&&(L.fromArray(m,t,Ja),w[E++]=Ss.octEncodeFloat(Ja)))}return t.attributes.compressedAttributes=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:g,values:w}),s&&delete t.attributes.normal,a&&delete t.attributes.st,f&&delete t.attributes.bitangent,l&&delete t.attributes.tangent,t};const ou=new L;function iu(t,e,n,r){L.add(t,L.multiplyByScalar(L.subtract(e,t,ou),t.y/(t.y-e.y),ou),n),L.clone(n,r),ru(n,!0),ru(r,!1)}const su=new L,au=new L,uu=new L,cu=new L,lu={positions:new Array(7),indices:new Array(9)};function fu(t,e,n){if(t.x>=0||e.x>=0||n.x>=0)return;!function(t,e,n){if(0!==t.y&&0!==e.y&&0!==n.y)return ru(t,t.y<0),ru(e,e.y<0),void ru(n,n.y<0);const r=Math.abs(t.y),o=Math.abs(e.y),i=Math.abs(n.y);let s;s=r>o?r>i?M.sign(t.y):M.sign(n.y):o>i?M.sign(e.y):M.sign(n.y);const a=s<0;ru(t,a),ru(e,a),ru(n,a)}(t,e,n);const r=t.y<0,o=e.y<0,i=n.y<0;let s=0;s+=r?1:0,s+=o?1:0,s+=i?1:0;const a=lu.indices;1===s?(a[1]=3,a[2]=4,a[5]=6,a[7]=6,a[8]=5,r?(iu(t,e,su,uu),iu(t,n,au,cu),a[0]=0,a[3]=1,a[4]=2,a[6]=1):o?(iu(e,n,su,uu),iu(e,t,au,cu),a[0]=1,a[3]=2,a[4]=0,a[6]=2):i&&(iu(n,t,su,uu),iu(n,e,au,cu),a[0]=2,a[3]=0,a[4]=1,a[6]=0)):2===s&&(a[2]=4,a[4]=4,a[5]=3,a[7]=5,a[8]=6,r?o?i||(iu(n,t,su,uu),iu(n,e,au,cu),a[0]=0,a[1]=1,a[3]=0,a[6]=2):(iu(e,n,su,uu),iu(e,t,au,cu),a[0]=2,a[1]=0,a[3]=2,a[6]=1):(iu(t,e,su,uu),iu(t,n,au,cu),a[0]=1,a[1]=2,a[3]=1,a[6]=0));const u=lu.positions;return u[0]=t,u[1]=e,u[2]=n,u.length=3,1!==s&&2!==s||(u[3]=su,u[4]=au,u[5]=uu,u[6]=cu,u.length=7),lu}function hu(t,e){const n=t.attributes;if(0===n.position.values.length)return;for(const o in n)if(n.hasOwnProperty(o)&&O(n[o])&&O(n[o].values)){const t=n[o];t.values=bi.createTypedArray(t.componentDatatype,t.values)}const r=Ai.computeNumberOfVertices(t);return t.indices=Nt.createTypedArray(r,t.indices),e&&(t.boundingSphere=Di.fromVertices(n.position.values)),t}function pu(t){const e=t.attributes,n={};for(const r in e)if(e.hasOwnProperty(r)&&O(e[r])&&O(e[r].values)){const t=e[r];n[r]=new Ui({componentDatatype:t.componentDatatype,componentsPerAttribute:t.componentsPerAttribute,normalize:t.normalize,values:[]})}return new Ai({attributes:n,indices:[],primitiveType:t.primitiveType})}function du(t,e,n){const r=O(t.geometry.boundingSphere);e=hu(e,r),O(n=hu(n,r))&&!O(e)?t.geometry=n:!O(n)&&O(e)?t.geometry=e:(t.westHemisphereGeometry=e,t.eastHemisphereGeometry=n,t.geometry=void 0)}function mu(t,e){const n=new t,r=new t,o=new t;return function(i,s,a,u,c,l,f,h){const p=t.fromArray(c,i*e,n),d=t.fromArray(c,s*e,r),m=t.fromArray(c,a*e,o);t.multiplyByScalar(p,u.x,p),t.multiplyByScalar(d,u.y,d),t.multiplyByScalar(m,u.z,m);const y=t.add(p,d,p);t.add(y,m,y),h&&t.normalize(y,y),t.pack(y,l,f*e)}}const yu=mu(G,4),gu=mu(L,3),wu=mu(ue,2),Eu=new L,_u=new L,Ou=new L,bu=new L;function Tu(t,e,n,r,o,i,s,a,u,c,l,f,h,p,d,m){if(!(O(i)||O(s)||O(a)||O(u)||O(c)||0!==p))return;const y=function(t,e,n,r,o){let i,s,a,u,c,l,f,h;if(T.defined("point",t),T.defined("p0",e),T.defined("p1",n),T.defined("p2",r),O(o)||(o=new L),O(e.z)){if(L.equalsEpsilon(t,e,M.EPSILON14))return L.clone(L.UNIT_X,o);if(L.equalsEpsilon(t,n,M.EPSILON14))return L.clone(L.UNIT_Y,o);if(L.equalsEpsilon(t,r,M.EPSILON14))return L.clone(L.UNIT_Z,o);i=L.subtract(n,e,Cs),s=L.subtract(r,e,Ls),a=L.subtract(t,e,Us),u=L.dot(i,i),c=L.dot(i,s),l=L.dot(i,a),f=L.dot(s,s),h=L.dot(s,a)}else{if(ue.equalsEpsilon(t,e,M.EPSILON14))return L.clone(L.UNIT_X,o);if(ue.equalsEpsilon(t,n,M.EPSILON14))return L.clone(L.UNIT_Y,o);if(ue.equalsEpsilon(t,r,M.EPSILON14))return L.clone(L.UNIT_Z,o);i=ue.subtract(n,e,Cs),s=ue.subtract(r,e,Ls),a=ue.subtract(t,e,Us),u=ue.dot(i,i),c=ue.dot(i,s),l=ue.dot(i,a),f=ue.dot(s,s),h=ue.dot(s,a)}o.y=f*l-c*h,o.z=u*h-c*l;const p=u*f-c*c;if(0!==p)return o.y/=p,o.z/=p,o.x=1-o.y-o.z,o}(r,L.fromArray(o,3*t,Eu),L.fromArray(o,3*e,_u),L.fromArray(o,3*n,Ou),bu);if(O(y)){if(O(i)&&gu(t,e,n,y,i,f.normal.values,m,!0),O(c)){const r=L.fromArray(c,3*t,Eu),o=L.fromArray(c,3*e,_u),i=L.fromArray(c,3*n,Ou);let s;L.multiplyByScalar(r,y.x,r),L.multiplyByScalar(o,y.y,o),L.multiplyByScalar(i,y.z,i),L.equals(r,L.ZERO)&&L.equals(o,L.ZERO)&&L.equals(i,L.ZERO)?(s=Eu,s.x=0,s.y=0,s.z=0):(s=L.add(r,o,r),L.add(s,i,s),L.normalize(s,s)),L.pack(s,f.extrudeDirection.values,3*m)}if(O(l)&&function(t,e,n,r,o,i,s){const a=o[t]*r.x,u=o[e]*r.y,c=o[n]*r.z;i[s]=a+u+c>M.EPSILON6?1:0}(t,e,n,y,l,f.applyOffset.values,m),O(s)&&gu(t,e,n,y,s,f.tangent.values,m,!0),O(a)&&gu(t,e,n,y,a,f.bitangent.values,m,!0),O(u)&&wu(t,e,n,y,u,f.st.values,m),p>0)for(let r=0;r<p;r++){const o=h[r];Au(t,e,n,y,m,d[o],f[o])}}}function Au(t,e,n,r,o,i,s){const a=i.componentsPerAttribute,u=i.values,c=s.values;switch(a){case 4:yu(t,e,n,r,u,c,o,!1);break;case 3:gu(t,e,n,r,u,c,o,!1);break;case 2:wu(t,e,n,r,u,c,o,!1);break;default:c[o]=u[t]*r.x+u[e]*r.y+u[n]*r.z}}function xu(t,e,n,r,o,i){const s=t.position.values.length/3;if(-1!==o){const a=r[o],u=n[a];return-1===u?(n[a]=s,t.position.values.push(i.x,i.y,i.z),e.push(s),s):(e.push(u),u)}return t.position.values.push(i.x,i.y,i.z),e.push(s),s}const Ru={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function Su(t){const e=t.geometry,n=e.attributes,r=n.position.values,o=O(n.normal)?n.normal.values:void 0,i=O(n.bitangent)?n.bitangent.values:void 0,s=O(n.tangent)?n.tangent.values:void 0,a=O(n.st)?n.st.values:void 0,u=O(n.extrudeDirection)?n.extrudeDirection.values:void 0,c=O(n.applyOffset)?n.applyOffset.values:void 0,l=e.indices,f=[];for(const A in n)n.hasOwnProperty(A)&&!Ru[A]&&O(n[A])&&f.push(A);const h=f.length,p=pu(e),d=pu(e);let m,y,g,w,E;const _=[];_.length=r.length/3;const b=[];for(b.length=r.length/3,E=0;E<_.length;++E)_[E]=-1,b[E]=-1;const T=l.length;for(E=0;E<T;E+=3){const t=l[E],e=l[E+1],T=l[E+2];let A=L.fromArray(r,3*t),x=L.fromArray(r,3*e),R=L.fromArray(r,3*T);const S=fu(A,x,R);if(O(S)&&S.positions.length>3){const O=S.positions,A=S.indices,x=A.length;for(let R=0;R<x;++R){const x=A[R],S=O[x];S.y<0?(m=d.attributes,y=d.indices,g=_):(m=p.attributes,y=p.indices,g=b),w=xu(m,y,g,l,x<3?E+x:-1,S),Tu(t,e,T,S,r,o,s,i,a,u,c,m,f,h,n,w)}}else O(S)&&(A=S.positions[0],x=S.positions[1],R=S.positions[2]),A.y<0?(m=d.attributes,y=d.indices,g=_):(m=p.attributes,y=p.indices,g=b),w=xu(m,y,g,l,E,A),Tu(t,e,T,A,r,o,s,i,a,u,c,m,f,h,n,w),w=xu(m,y,g,l,E+1,x),Tu(t,e,T,x,r,o,s,i,a,u,c,m,f,h,n,w),w=xu(m,y,g,l,E+2,R),Tu(t,e,T,R,r,o,s,i,a,u,c,m,f,h,n,w)}du(t,d,p)}const Iu=Aa.fromPointNormal(L.ZERO,L.UNIT_Y),Nu=new L,vu=new L;function Mu(t,e,n,r,o,i,s){if(!O(s))return;const a=L.fromArray(r,3*t,Eu);L.equalsEpsilon(a,n,M.EPSILON10)?i.applyOffset.values[o]=s[t]:i.applyOffset.values[o]=s[e]}function Pu(t){const e=t.geometry,n=e.attributes,r=n.position.values,o=O(n.applyOffset)?n.applyOffset.values:void 0,i=e.indices,s=pu(e),a=pu(e);let u;const c=i.length,l=[];l.length=r.length/3;const f=[];for(f.length=r.length/3,u=0;u<l.length;++u)l[u]=-1,f[u]=-1;for(u=0;u<c;u+=2){const t=i[u],e=i[u+1],n=L.fromArray(r,3*t,Eu),c=L.fromArray(r,3*e,_u);let h;Math.abs(n.y)<M.EPSILON6&&(n.y<0?n.y=-M.EPSILON6:n.y=M.EPSILON6),Math.abs(c.y)<M.EPSILON6&&(c.y<0?c.y=-M.EPSILON6:c.y=M.EPSILON6);let p=s.attributes,d=s.indices,m=f,y=a.attributes,g=a.indices,w=l;const E=Vs.lineSegmentPlane(n,c,Iu,Ou);if(O(E)){const _=L.multiplyByScalar(L.UNIT_Y,5*M.EPSILON9,Nu);n.y<0&&(L.negate(_,_),p=a.attributes,d=a.indices,m=l,y=s.attributes,g=s.indices,w=f);const O=L.add(E,_,vu);h=xu(p,d,m,i,u,n),Mu(t,e,n,r,h,p,o),h=xu(p,d,m,i,-1,O),Mu(t,e,O,r,h,p,o),L.negate(_,_),L.add(E,_,O),h=xu(y,g,w,i,-1,O),Mu(t,e,O,r,h,y,o),h=xu(y,g,w,i,u+1,c),Mu(t,e,c,r,h,y,o)}else{let p,d,m;n.y<0?(p=a.attributes,d=a.indices,m=l):(p=s.attributes,d=s.indices,m=f),h=xu(p,d,m,i,u,n),Mu(t,e,n,r,h,p,o),h=xu(p,d,m,i,u+1,c),Mu(t,e,c,r,h,p,o)}}du(t,a,s)}const Cu=new ue,Lu=new ue,Uu=new L,qu=new L,Du=new L,zu=new L,ju=new L,Fu=new L,Bu=new G;function Gu(t){const e=t.attributes,n=e.position.values,r=e.prevPosition.values,o=e.nextPosition.values,i=n.length;for(let s=0;s<i;s+=3){const t=L.unpack(n,s,Uu);if(t.x>0)continue;const e=L.unpack(r,s,qu);(t.y<0&&e.y>0||t.y>0&&e.y<0)&&(s-3>0?(r[s]=n[s-3],r[s+1]=n[s-2],r[s+2]=n[s-1]):L.pack(t,r,s));const a=L.unpack(o,s,Du);(t.y<0&&a.y>0||t.y>0&&a.y<0)&&(s+3<i?(o[s]=n[s+3],o[s+1]=n[s+4],o[s+2]=n[s+5]):L.pack(t,o,s))}}const ku=5*M.EPSILON9,Wu=M.EPSILON6;function Vu(t){this.planes=t??[]}Ma.splitLongitude=function(t){if(!O(t))throw new b("instance is required.");const e=t.geometry,n=e.boundingSphere;if(O(n)&&(n.center.x-n.radius>0||Di.intersectPlane(n,Aa.ORIGIN_ZX_PLANE)!==Ce.INTERSECTING))return t;if(e.geometryType!==Ti.NONE)switch(e.geometryType){case Ti.POLYLINES:!function(t){const e=t.geometry,n=e.attributes,r=n.position.values,o=n.prevPosition.values,i=n.nextPosition.values,s=n.expandAndWidth.values,a=O(n.st)?n.st.values:void 0,u=O(n.color)?n.color.values:void 0,c=pu(e),l=pu(e);let f,h,p,d=!1;const m=r.length/3;for(f=0;f<m;f+=4){const t=f,e=f+2,n=L.fromArray(r,3*t,Uu),m=L.fromArray(r,3*e,qu);if(Math.abs(n.y)<Wu)for(n.y=Wu*(m.y<0?-1:1),r[3*f+1]=n.y,r[3*(f+1)+1]=n.y,h=3*t;h<3*t+12;h+=3)o[h]=r[3*f],o[h+1]=r[3*f+1],o[h+2]=r[3*f+2];if(Math.abs(m.y)<Wu)for(m.y=Wu*(n.y<0?-1:1),r[3*(f+2)+1]=m.y,r[3*(f+3)+1]=m.y,h=3*t;h<3*t+12;h+=3)i[h]=r[3*(f+2)],i[h+1]=r[3*(f+2)+1],i[h+2]=r[3*(f+2)+2];let y=c.attributes,g=c.indices,w=l.attributes,E=l.indices;const _=Vs.lineSegmentPlane(n,m,Iu,zu);if(O(_)){d=!0;const r=L.multiplyByScalar(L.UNIT_Y,ku,ju);n.y<0&&(L.negate(r,r),y=l.attributes,g=l.indices,w=c.attributes,E=c.indices);const b=L.add(_,r,Fu);y.position.values.push(n.x,n.y,n.z,n.x,n.y,n.z),y.position.values.push(b.x,b.y,b.z),y.position.values.push(b.x,b.y,b.z),y.prevPosition.values.push(o[3*t],o[3*t+1],o[3*t+2]),y.prevPosition.values.push(o[3*t+3],o[3*t+4],o[3*t+5]),y.prevPosition.values.push(n.x,n.y,n.z,n.x,n.y,n.z),y.nextPosition.values.push(b.x,b.y,b.z),y.nextPosition.values.push(b.x,b.y,b.z),y.nextPosition.values.push(b.x,b.y,b.z),y.nextPosition.values.push(b.x,b.y,b.z),L.negate(r,r),L.add(_,r,b),w.position.values.push(b.x,b.y,b.z),w.position.values.push(b.x,b.y,b.z),w.position.values.push(m.x,m.y,m.z,m.x,m.y,m.z),w.prevPosition.values.push(b.x,b.y,b.z),w.prevPosition.values.push(b.x,b.y,b.z),w.prevPosition.values.push(b.x,b.y,b.z),w.prevPosition.values.push(b.x,b.y,b.z),w.nextPosition.values.push(m.x,m.y,m.z,m.x,m.y,m.z),w.nextPosition.values.push(i[3*e],i[3*e+1],i[3*e+2]),w.nextPosition.values.push(i[3*e+3],i[3*e+4],i[3*e+5]);const T=ue.fromArray(s,2*t,Cu),A=Math.abs(T.y);y.expandAndWidth.values.push(-1,A,1,A),y.expandAndWidth.values.push(-1,-A,1,-A),w.expandAndWidth.values.push(-1,A,1,A),w.expandAndWidth.values.push(-1,-A,1,-A);let x=L.magnitudeSquared(L.subtract(_,n,Du));if(x/=L.magnitudeSquared(L.subtract(m,n,Du)),O(u)){const n=G.fromArray(u,4*t,Bu),r=G.fromArray(u,4*e,Bu),o=M.lerp(n.x,r.x,x),i=M.lerp(n.y,r.y,x),s=M.lerp(n.z,r.z,x),a=M.lerp(n.w,r.w,x);for(h=4*t;h<4*t+8;++h)y.color.values.push(u[h]);for(y.color.values.push(o,i,s,a),y.color.values.push(o,i,s,a),w.color.values.push(o,i,s,a),w.color.values.push(o,i,s,a),h=4*e;h<4*e+8;++h)w.color.values.push(u[h])}if(O(a)){const n=ue.fromArray(a,2*t,Cu),r=ue.fromArray(a,2*(f+3),Lu),o=M.lerp(n.x,r.x,x);for(h=2*t;h<2*t+4;++h)y.st.values.push(a[h]);for(y.st.values.push(o,n.y),y.st.values.push(o,r.y),w.st.values.push(o,n.y),w.st.values.push(o,r.y),h=2*e;h<2*e+4;++h)w.st.values.push(a[h])}p=y.position.values.length/3-4,g.push(p,p+2,p+1),g.push(p+1,p+2,p+3),p=w.position.values.length/3-4,E.push(p,p+2,p+1),E.push(p+1,p+2,p+3)}else{let t,e;for(n.y<0?(t=l.attributes,e=l.indices):(t=c.attributes,e=c.indices),t.position.values.push(n.x,n.y,n.z),t.position.values.push(n.x,n.y,n.z),t.position.values.push(m.x,m.y,m.z),t.position.values.push(m.x,m.y,m.z),h=3*f;h<3*f+12;++h)t.prevPosition.values.push(o[h]),t.nextPosition.values.push(i[h]);for(h=2*f;h<2*f+8;++h)t.expandAndWidth.values.push(s[h]),O(a)&&t.st.values.push(a[h]);if(O(u))for(h=4*f;h<4*f+16;++h)t.color.values.push(u[h]);p=t.position.values.length/3-4,e.push(p,p+2,p+1),e.push(p+1,p+2,p+3)}}d&&(Gu(l),Gu(c)),du(t,l,c)}(t);break;case Ti.TRIANGLES:Su(t);break;case Ti.LINES:Pu(t)}else(function(t){switch(t.primitiveType){case fi.TRIANGLE_FAN:return function(t){const e=Ai.computeNumberOfVertices(t);if(e<3)throw new b("The number of vertices must be at least three.");const n=Nt.createTypedArray(e,3*(e-2));n[0]=1,n[1]=0,n[2]=2;let r=3;for(let o=3;o<e;++o)n[r++]=o-1,n[r++]=0,n[r++]=o;return t.indices=n,t.primitiveType=fi.TRIANGLES,t}(t);case fi.TRIANGLE_STRIP:return function(t){const e=Ai.computeNumberOfVertices(t);if(e<3)throw new b("The number of vertices must be at least 3.");const n=Nt.createTypedArray(e,3*(e-2));n[0]=0,n[1]=1,n[2]=2,e>3&&(n[3]=0,n[4]=2,n[5]=3);let r=6;for(let o=3;o<e-1;o+=2)n[r++]=o,n[r++]=o-1,n[r++]=o+1,o+2<e&&(n[r++]=o,n[r++]=o+1,n[r++]=o+2);return t.indices=n,t.primitiveType=fi.TRIANGLES,t}(t);case fi.TRIANGLES:return function(t){if(O(t.indices))return t;const e=Ai.computeNumberOfVertices(t);if(e<3)throw new b("The number of vertices must be at least three.");if(e%3!=0)throw new b("The number of vertices must be a multiple of three.");const n=Nt.createTypedArray(e,e);for(let r=0;r<e;++r)n[r]=r;return t.indices=n,t}(t);case fi.LINE_STRIP:return function(t){const e=Ai.computeNumberOfVertices(t);if(e<2)throw new b("The number of vertices must be at least two.");const n=Nt.createTypedArray(e,2*(e-1));n[0]=0,n[1]=1;let r=2;for(let o=2;o<e;++o)n[r++]=o-1,n[r++]=o;return t.indices=n,t.primitiveType=fi.LINES,t}(t);case fi.LINE_LOOP:return function(t){const e=Ai.computeNumberOfVertices(t);if(e<2)throw new b("The number of vertices must be at least two.");const n=Nt.createTypedArray(e,2*e);n[0]=0,n[1]=1;let r=2;for(let o=2;o<e;++o)n[r++]=o-1,n[r++]=o;return n[r++]=e-1,n[r]=0,t.indices=n,t.primitiveType=fi.LINES,t}(t);case fi.LINES:(function(t){if(O(t.indices))return t;const e=Ai.computeNumberOfVertices(t);if(e<2)throw new b("The number of vertices must be at least two.");if(e%2!=0)throw new b("The number of vertices must be a multiple of 2.");const n=Nt.createTypedArray(e,e);for(let r=0;r<e;++r)n[r]=r;t.indices=n})(t)}})(e),e.primitiveType===fi.TRIANGLES?Su(t):e.primitiveType===fi.LINES&&Pu(t);return t};const Hu=[new L,new L,new L];L.clone(L.UNIT_X,Hu[0]),L.clone(L.UNIT_Y,Hu[1]),L.clone(L.UNIT_Z,Hu[2]);const Xu=new L,Yu=new L,$u=new Aa(new L(1,0,0),0);function Zu(t){t=t??Z.EMPTY_OBJECT,this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=t.near??1,this._near=this.near,this.far=t.far??5e8,this._far=this.far,this._cullingVolume=new Vu,this._orthographicMatrix=new ht}function Qu(t){if(!(O(t.right)&&O(t.left)&&O(t.top)&&O(t.bottom)&&O(t.near)&&O(t.far)))throw new b("right, left, top, bottom, near, or far parameters are not set.");if(t.top!==t._top||t.bottom!==t._bottom||t.left!==t._left||t.right!==t._right||t.near!==t._near||t.far!==t._far){if(t.left>t.right)throw new b("right must be greater than left.");if(t.bottom>t.top)throw new b("top must be greater than bottom.");if(t.near<=0||t.near>t.far)throw new b("near must be greater than zero and less than far.");t._left=t.left,t._right=t.right,t._top=t.top,t._bottom=t.bottom,t._near=t.near,t._far=t.far,t._orthographicMatrix=ht.computeOrthographicOffCenter(t.left,t.right,t.bottom,t.top,t.near,t.far,t._orthographicMatrix)}}Vu.fromBoundingSphere=function(t,e){if(!O(t))throw new b("boundingSphere is required.");O(e)||(e=new Vu);const n=Hu.length,r=e.planes;r.length=2*n;const o=t.center,i=t.radius;let s=0;for(let a=0;a<n;++a){const t=Hu[a];let e=r[s],n=r[s+1];O(e)||(e=r[s]=new G),O(n)||(n=r[s+1]=new G),L.multiplyByScalar(t,-i,Xu),L.add(o,Xu,Xu),e.x=t.x,e.y=t.y,e.z=t.z,e.w=-L.dot(t,Xu),L.multiplyByScalar(t,i,Xu),L.add(o,Xu,Xu),n.x=-t.x,n.y=-t.y,n.z=-t.z,n.w=-L.dot(L.negate(t,Yu),Xu),s+=2}return e},Vu.prototype.computeVisibility=function(t){if(!O(t))throw new b("boundingVolume is required.");const e=this.planes;let n=!1;for(let r=0,o=e.length;r<o;++r){const o=t.intersectPlane(Aa.fromCartesian4(e[r],$u));if(o===Ce.OUTSIDE)return Ce.OUTSIDE;o===Ce.INTERSECTING&&(n=!0)}return n?Ce.INTERSECTING:Ce.INSIDE},Vu.prototype.computeVisibilityWithPlaneMask=function(t,e){if(!O(t))throw new b("boundingVolume is required.");if(!O(e))throw new b("parentPlaneMask is required.");if(e===Vu.MASK_OUTSIDE||e===Vu.MASK_INSIDE)return e;let n=Vu.MASK_INSIDE;const r=this.planes;for(let o=0,i=r.length;o<i;++o){const i=o<31?1<<o:0;if(o<31&&!(e&i))continue;const s=t.intersectPlane(Aa.fromCartesian4(r[o],$u));if(s===Ce.OUTSIDE)return Vu.MASK_OUTSIDE;s===Ce.INTERSECTING&&(n|=i)}return n},Vu.MASK_OUTSIDE=4294967295,Vu.MASK_INSIDE=0,Vu.MASK_INDETERMINATE=2147483647,Object.defineProperties(Zu.prototype,{projectionMatrix:{get:function(){return Qu(this),this._orthographicMatrix}}});const Ku=new L,Ju=new L,tc=new L,ec=new L;function nc(t){t=t??Z.EMPTY_OBJECT,this._offCenterFrustum=new Zu,this.width=t.width,this._width=void 0,this.aspectRatio=t.aspectRatio,this._aspectRatio=void 0,this.near=t.near??1,this._near=this.near,this.far=t.far??5e8,this._far=this.far}function rc(t){if(!(O(t.width)&&O(t.aspectRatio)&&O(t.near)&&O(t.far)))throw new b("width, aspectRatio, near, or far parameters are not set.");const e=t._offCenterFrustum;if(t.width!==t._width||t.aspectRatio!==t._aspectRatio||t.near!==t._near||t.far!==t._far){if(t.aspectRatio<0)throw new b("aspectRatio must be positive.");if(t.near<0||t.near>t.far)throw new b("near must be greater than zero and less than far.");t._aspectRatio=t.aspectRatio,t._width=t.width,t._near=t.near,t._far=t.far;const n=1/t.aspectRatio;e.right=.5*t.width,e.left=-e.right,e.top=n*e.right,e.bottom=-e.top,e.near=t.near,e.far=t.far}}Zu.prototype.computeCullingVolume=function(t,e,n){if(!O(t))throw new b("position is required.");if(!O(e))throw new b("direction is required.");if(!O(n))throw new b("up is required.");const r=this._cullingVolume.planes,o=this.top,i=this.bottom,s=this.right,a=this.left,u=this.near,c=this.far,l=L.cross(e,n,Ku);L.normalize(l,l);const f=Ju;L.multiplyByScalar(e,u,f),L.add(t,f,f);const h=tc;L.multiplyByScalar(l,a,h),L.add(f,h,h);let p=r[0];return O(p)||(p=r[0]=new G),p.x=l.x,p.y=l.y,p.z=l.z,p.w=-L.dot(l,h),L.multiplyByScalar(l,s,h),L.add(f,h,h),p=r[1],O(p)||(p=r[1]=new G),p.x=-l.x,p.y=-l.y,p.z=-l.z,p.w=-L.dot(L.negate(l,ec),h),L.multiplyByScalar(n,i,h),L.add(f,h,h),p=r[2],O(p)||(p=r[2]=new G),p.x=n.x,p.y=n.y,p.z=n.z,p.w=-L.dot(n,h),L.multiplyByScalar(n,o,h),L.add(f,h,h),p=r[3],O(p)||(p=r[3]=new G),p.x=-n.x,p.y=-n.y,p.z=-n.z,p.w=-L.dot(L.negate(n,ec),h),p=r[4],O(p)||(p=r[4]=new G),p.x=e.x,p.y=e.y,p.z=e.z,p.w=-L.dot(e,f),L.multiplyByScalar(e,c,h),L.add(t,h,h),p=r[5],O(p)||(p=r[5]=new G),p.x=-e.x,p.y=-e.y,p.z=-e.z,p.w=-L.dot(L.negate(e,ec),h),this._cullingVolume},Zu.prototype.getPixelDimensions=function(t,e,n,r,o){if(Qu(this),!O(t)||!O(e))throw new b("Both drawingBufferWidth and drawingBufferHeight are required.");if(t<=0)throw new b("drawingBufferWidth must be greater than zero.");if(e<=0)throw new b("drawingBufferHeight must be greater than zero.");if(!O(n))throw new b("distance is required.");if(!O(r))throw new b("pixelRatio is required.");if(r<=0)throw new b("pixelRatio must be greater than zero.");if(!O(o))throw new b("A result object is required.");const i=r*(this.right-this.left)/t,s=r*(this.top-this.bottom)/e;return o.x=i,o.y=s,o},Zu.prototype.clone=function(t){return O(t)||(t=new Zu),t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t._left=void 0,t._right=void 0,t._top=void 0,t._bottom=void 0,t._near=void 0,t._far=void 0,t},Zu.prototype.equals=function(t){return O(t)&&t instanceof Zu&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far},Zu.prototype.equalsEpsilon=function(t,e,n){return t===this||O(t)&&t instanceof Zu&&M.equalsEpsilon(this.right,t.right,e,n)&&M.equalsEpsilon(this.left,t.left,e,n)&&M.equalsEpsilon(this.top,t.top,e,n)&&M.equalsEpsilon(this.bottom,t.bottom,e,n)&&M.equalsEpsilon(this.near,t.near,e,n)&&M.equalsEpsilon(this.far,t.far,e,n)},nc.packedLength=4,nc.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,e[n++]=t.width,e[n++]=t.aspectRatio,e[n++]=t.near,e[n]=t.far,e},nc.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new nc),n.width=t[e++],n.aspectRatio=t[e++],n.near=t[e++],n.far=t[e],n},Object.defineProperties(nc.prototype,{projectionMatrix:{get:function(){return rc(this),this._offCenterFrustum.projectionMatrix}},offCenterFrustum:{get:function(){return rc(this),this._offCenterFrustum}}}),nc.prototype.computeCullingVolume=function(t,e,n){return rc(this),this._offCenterFrustum.computeCullingVolume(t,e,n)},nc.prototype.getPixelDimensions=function(t,e,n,r,o){return rc(this),this._offCenterFrustum.getPixelDimensions(t,e,n,r,o)},nc.prototype.clone=function(t){return O(t)||(t=new nc),t.aspectRatio=this.aspectRatio,t.width=this.width,t.near=this.near,t.far=this.far,t._aspectRatio=void 0,t._width=void 0,t._near=void 0,t._far=void 0,this._offCenterFrustum.clone(t._offCenterFrustum),t},nc.prototype.equals=function(t){return!!(O(t)&&t instanceof nc)&&(rc(this),rc(t),this.width===t.width&&this.aspectRatio===t.aspectRatio&&this._offCenterFrustum.equals(t._offCenterFrustum))},nc.prototype.equalsEpsilon=function(t,e,n){return!!(O(t)&&t instanceof nc)&&(rc(this),rc(t),M.equalsEpsilon(this.width,t.width,e,n)&&M.equalsEpsilon(this.aspectRatio,t.aspectRatio,e,n)&&this._offCenterFrustum.equalsEpsilon(t._offCenterFrustum,e,n))};const oc={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(t){return t===oc.SCENE3D?1:t!==oc.MORPHING?0:void 0}};var ic=Object.freeze(oc);function sc(t){if(!O((t=t??Z.EMPTY_OBJECT).geometry))throw new b("options.geometry is required.");this.geometry=t.geometry,this.modelMatrix=ht.clone(t.modelMatrix??ht.IDENTITY),this.id=t.id,this.pickPrimitive=t.pickPrimitive,this.attributes=t.attributes??{},this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0}function ac(t,e,n){this.minimum=L.clone(t??L.ZERO),this.maximum=L.clone(e??L.ZERO),n=O(n)?L.clone(n):L.midpoint(this.minimum,this.maximum,new L),this.center=n}ac.fromCorners=function(t,e,n){return T.defined("minimum",t),T.defined("maximum",e),O(n)||(n=new ac),n.minimum=L.clone(t,n.minimum),n.maximum=L.clone(e,n.maximum),n.center=L.midpoint(t,e,n.center),n},ac.fromPoints=function(t,e){if(O(e)||(e=new ac),!O(t)||0===t.length)return e.minimum=L.clone(L.ZERO,e.minimum),e.maximum=L.clone(L.ZERO,e.maximum),e.center=L.clone(L.ZERO,e.center),e;let n=t[0].x,r=t[0].y,o=t[0].z,i=t[0].x,s=t[0].y,a=t[0].z;const u=t.length;for(let f=1;f<u;f++){const e=t[f],u=e.x,c=e.y,l=e.z;n=Math.min(u,n),i=Math.max(u,i),r=Math.min(c,r),s=Math.max(c,s),o=Math.min(l,o),a=Math.max(l,a)}const c=e.minimum;c.x=n,c.y=r,c.z=o;const l=e.maximum;return l.x=i,l.y=s,l.z=a,e.center=L.midpoint(c,l,e.center),e},ac.clone=function(t,e){if(O(t))return O(e)?(e.minimum=L.clone(t.minimum,e.minimum),e.maximum=L.clone(t.maximum,e.maximum),e.center=L.clone(t.center,e.center),e):new ac(t.minimum,t.maximum,t.center)},ac.equals=function(t,e){return t===e||O(t)&&O(e)&&L.equals(t.center,e.center)&&L.equals(t.minimum,e.minimum)&&L.equals(t.maximum,e.maximum)};let uc=new L;ac.intersectPlane=function(t,e){T.defined("box",t),T.defined("plane",e),uc=L.subtract(t.maximum,t.minimum,uc);const n=L.multiplyByScalar(uc,.5,uc),r=e.normal,o=n.x*Math.abs(r.x)+n.y*Math.abs(r.y)+n.z*Math.abs(r.z),i=L.dot(t.center,r)+e.distance;return i-o>0?Ce.INSIDE:i+o<0?Ce.OUTSIDE:Ce.INTERSECTING},ac.intersectAxisAlignedBoundingBox=function(t,e){return T.defined("box",t),T.defined("other",e),t.minimum.x<=e.maximum.x&&t.maximum.x>=e.minimum.x&&t.minimum.y<=e.maximum.y&&t.maximum.y>=e.minimum.y&&t.minimum.z<=e.maximum.z&&t.maximum.z>=e.minimum.z},ac.prototype.clone=function(t){return ac.clone(this,t)},ac.prototype.intersectPlane=function(t){return ac.intersectPlane(this,t)},ac.prototype.intersectAxisAlignedBoundingBox=function(t){return ac.intersectAxisAlignedBoundingBox(this,t)},ac.prototype.equals=function(t){return ac.equals(this,t)};const cc=new G;function lc(t,e){if(T.defined("origin",t),!O(t=(e=e??be.default).scaleToGeodeticSurface(t)))throw new b("origin must not be at the center of the ellipsoid.");const n=ho.eastNorthUpToFixedFrame(t,e);this._ellipsoid=e,this._origin=t,this._xAxis=L.fromCartesian4(ht.getColumn(n,0,cc)),this._yAxis=L.fromCartesian4(ht.getColumn(n,1,cc));const r=L.fromCartesian4(ht.getColumn(n,2,cc));this._plane=Aa.fromPointNormal(t,r)}Object.defineProperties(lc.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});const fc=new ac;lc.fromPoints=function(t,e){return T.defined("cartesians",t),new lc(ac.fromPoints(t,fc).center,e)};const hc=new Ws,pc=new L;lc.prototype.projectPointOntoPlane=function(t,e){T.defined("cartesian",t);const n=hc;n.origin=t,L.normalize(t,n.direction);let r=Vs.rayPlane(n,this._plane,pc);if(O(r)||(L.negate(n.direction,n.direction),r=Vs.rayPlane(n,this._plane,pc)),O(r)){const t=L.subtract(r,this._origin,r),n=L.dot(this._xAxis,t),o=L.dot(this._yAxis,t);return O(e)?(e.x=n,e.y=o,e):new ue(n,o)}},lc.prototype.projectPointsOntoPlane=function(t,e){T.defined("cartesians",t),O(e)||(e=[]);let n=0;const r=t.length;for(let o=0;o<r;o++){const r=this.projectPointOntoPlane(t[o],e[n]);O(r)&&(e[n]=r,n++)}return e.length=n,e},lc.prototype.projectPointToNearestOnPlane=function(t,e){T.defined("cartesian",t),O(e)||(e=new ue);const n=hc;n.origin=t,L.clone(this._plane.normal,n.direction);let r=Vs.rayPlane(n,this._plane,pc);O(r)||(L.negate(n.direction,n.direction),r=Vs.rayPlane(n,this._plane,pc));const o=L.subtract(r,this._origin,r),i=L.dot(this._xAxis,o),s=L.dot(this._yAxis,o);return e.x=i,e.y=s,e},lc.prototype.projectPointsToNearestOnPlane=function(t,e){T.defined("cartesians",t),O(e)||(e=[]);const n=t.length;e.length=n;for(let r=0;r<n;r++)e[r]=this.projectPointToNearestOnPlane(t[r],e[r]);return e};const dc=new L;function mc(t,e){this.center=L.clone(t??L.ZERO),this.halfAxes=Q.clone(e??Q.ZERO)}lc.prototype.projectPointOntoEllipsoid=function(t,e){T.defined("cartesian",t),O(e)||(e=new L);const n=this._ellipsoid,r=this._origin,o=this._xAxis,i=this._yAxis,s=dc;return L.multiplyByScalar(o,t.x,s),e=L.add(r,s,e),L.multiplyByScalar(i,t.y,s),L.add(e,s,e),n.scaleToGeocentricSurface(e,e),e},lc.prototype.projectPointsOntoEllipsoid=function(t,e){T.defined("cartesians",t);const n=t.length;O(e)?e.length=n:e=new Array(n);for(let r=0;r<n;++r)e[r]=this.projectPointOntoEllipsoid(t[r],e[r]);return e},mc.packedLength=L.packedLength+Q.packedLength,mc.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,L.pack(t.center,e,n),Q.pack(t.halfAxes,e,n+L.packedLength),e},mc.unpack=function(t,e,n){return T.defined("array",t),e=e??0,O(n)||(n=new mc),L.unpack(t,e,n.center),Q.unpack(t,e+L.packedLength,n.halfAxes),n};const yc=new L,gc=new L,wc=new L,Ec=new L,_c=new L,Oc=new L,bc=new Q,Tc={unitary:new Q,diagonal:new Q};mc.fromPoints=function(t,e){if(O(e)||(e=new mc),!O(t)||0===t.length)return e.halfAxes=Q.ZERO,e.center=L.ZERO,e;let n;const r=t.length,o=L.clone(t[0],yc);for(n=1;n<r;n++)L.add(o,t[n],o);const i=1/r;L.multiplyByScalar(o,i,o);let s,a=0,u=0,c=0,l=0,f=0,h=0;for(n=0;n<r;n++)s=L.subtract(t[n],o,gc),a+=s.x*s.x,u+=s.x*s.y,c+=s.x*s.z,l+=s.y*s.y,f+=s.y*s.z,h+=s.z*s.z;a*=i,u*=i,c*=i,l*=i,f*=i,h*=i;const p=bc;p[0]=a,p[1]=u,p[2]=c,p[3]=u,p[4]=l,p[5]=f,p[6]=c,p[7]=f,p[8]=h;const d=Q.computeEigenDecomposition(p,Tc),m=Q.clone(d.unitary,e.halfAxes);let y=Q.getColumn(m,0,Ec),g=Q.getColumn(m,1,_c),w=Q.getColumn(m,2,Oc),E=-Number.MAX_VALUE,_=-Number.MAX_VALUE,b=-Number.MAX_VALUE,T=Number.MAX_VALUE,A=Number.MAX_VALUE,x=Number.MAX_VALUE;for(n=0;n<r;n++)s=t[n],E=Math.max(L.dot(y,s),E),_=Math.max(L.dot(g,s),_),b=Math.max(L.dot(w,s),b),T=Math.min(L.dot(y,s),T),A=Math.min(L.dot(g,s),A),x=Math.min(L.dot(w,s),x);y=L.multiplyByScalar(y,.5*(T+E),y),g=L.multiplyByScalar(g,.5*(A+_),g),w=L.multiplyByScalar(w,.5*(x+b),w);const R=L.add(y,g,e.center);L.add(R,w,R);const S=wc;return S.x=E-T,S.y=_-A,S.z=b-x,L.multiplyByScalar(S,.5,S),Q.multiplyByScale(e.halfAxes,S,e.halfAxes),e};const Ac=new L,xc=new L;function Rc(t,e,n,r,o,i,s,a,u,c,l){if(!(O(o)&&O(i)&&O(s)&&O(a)&&O(u)&&O(c)))throw new b("all extents (minimum/maximum X/Y/Z) are required.");O(l)||(l=new mc);const f=l.halfAxes;Q.setColumn(f,0,e,f),Q.setColumn(f,1,n,f),Q.setColumn(f,2,r,f);let h=Ac;h.x=(o+i)/2,h.y=(s+a)/2,h.z=(u+c)/2;const p=xc;p.x=(i-o)/2,p.y=(a-s)/2,p.z=(c-u)/2;const d=l.center;return h=Q.multiplyByVector(f,h,h),L.add(t,h,d),Q.multiplyByScale(f,p,f),l}const Sc=new ge,Ic=new L,Nc=new ge,vc=new ge,Mc=new ge,Pc=new ge,Cc=new ge,Lc=new L,Uc=new L,qc=new L,Dc=new L,zc=new L,jc=new ue,Fc=new ue,Bc=new ue,Gc=new ue,kc=new ue,Wc=new L,Vc=new L,Hc=new L,Xc=new L,Yc=new ue,$c=new L,Zc=new L,Qc=new L,Kc=new Aa(L.UNIT_X,0);mc.fromRectangle=function(t,e,n,r,o){if(!O(t))throw new b("rectangle is required");if(t.width<0||t.width>M.TWO_PI)throw new b("Rectangle width must be between 0 and 2 * pi");if(t.height<0||t.height>M.PI)throw new b("Rectangle height must be between 0 and pi");if(O(r)&&!M.equalsEpsilon(r.radii.x,r.radii.y,M.EPSILON15))throw new b("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");let i,s,a,u,c,l,f;if(e=e??0,n=n??0,r=r??be.default,t.width<=M.PI){const h=Ko.center(t,Sc),p=new lc(r.cartographicToCartesian(h,Ic),r);f=p.plane;const d=h.longitude,m=t.south<0&&t.north>0?0:h.latitude,y=ge.fromRadians(d,t.north,n,Nc),g=ge.fromRadians(t.west,t.north,n,vc),w=ge.fromRadians(t.west,m,n,Mc),E=ge.fromRadians(t.west,t.south,n,Pc),_=ge.fromRadians(d,t.south,n,Cc),O=r.cartographicToCartesian(y,Lc);let b=r.cartographicToCartesian(g,Uc);const T=r.cartographicToCartesian(w,qc);let A=r.cartographicToCartesian(E,Dc);const x=r.cartographicToCartesian(_,zc),R=p.projectPointToNearestOnPlane(O,jc),S=p.projectPointToNearestOnPlane(b,Fc),I=p.projectPointToNearestOnPlane(T,Bc),N=p.projectPointToNearestOnPlane(A,Gc),v=p.projectPointToNearestOnPlane(x,kc);return i=Math.min(S.x,I.x,N.x),s=-i,u=Math.max(S.y,R.y),a=Math.min(N.y,v.y),g.height=E.height=e,b=r.cartographicToCartesian(g,Uc),A=r.cartographicToCartesian(E,Dc),c=Math.min(Aa.getPointDistance(f,b),Aa.getPointDistance(f,A)),l=n,Rc(p.origin,p.xAxis,p.yAxis,p.zAxis,i,s,a,u,c,l,o)}const h=t.south>0,p=t.north<0,d=h?t.south:p?t.north:0,m=Ko.center(t,Sc).longitude,y=L.fromRadians(m,d,n,r,Wc);y.z=0;const g=Math.abs(y.x)<M.EPSILON10&&Math.abs(y.y)<M.EPSILON10?L.UNIT_X:L.normalize(y,Vc),w=L.UNIT_Z,E=L.cross(g,w,Hc);f=Aa.fromPointNormal(y,g,Kc);const _=L.fromRadians(m+M.PI_OVER_TWO,d,n,r,Xc);s=L.dot(Aa.projectPointOntoPlane(f,_,Yc),E),i=-s,u=L.fromRadians(0,t.north,p?e:n,r,$c).z,a=L.fromRadians(0,t.south,h?e:n,r,Zc).z;const T=L.fromRadians(t.east,d,n,r,Qc);return c=Aa.getPointDistance(f,T),l=0,Rc(y,E,w,g,i,s,a,u,c,l,o)},mc.fromTransformation=function(t,e){return T.typeOf.object("transformation",t),O(e)||(e=new mc),e.center=ht.getTranslation(t,e.center),e.halfAxes=ht.getMatrix3(t,e.halfAxes),e.halfAxes=Q.multiplyByScalar(e.halfAxes,.5,e.halfAxes),e},mc.clone=function(t,e){if(O(t))return O(e)?(L.clone(t.center,e.center),Q.clone(t.halfAxes,e.halfAxes),e):new mc(t.center,t.halfAxes)},mc.intersectPlane=function(t,e){if(!O(t))throw new b("box is required.");if(!O(e))throw new b("plane is required.");const n=t.center,r=e.normal,o=t.halfAxes,i=r.x,s=r.y,a=r.z,u=Math.abs(i*o[Q.COLUMN0ROW0]+s*o[Q.COLUMN0ROW1]+a*o[Q.COLUMN0ROW2])+Math.abs(i*o[Q.COLUMN1ROW0]+s*o[Q.COLUMN1ROW1]+a*o[Q.COLUMN1ROW2])+Math.abs(i*o[Q.COLUMN2ROW0]+s*o[Q.COLUMN2ROW1]+a*o[Q.COLUMN2ROW2]),c=L.dot(r,n)+e.distance;return c<=-u?Ce.OUTSIDE:c>=u?Ce.INSIDE:Ce.INTERSECTING};const Jc=new L,tl=new L,el=new L,nl=new L,rl=new L,ol=new L;mc.distanceSquaredTo=function(t,e){if(!O(t))throw new b("box is required.");if(!O(e))throw new b("cartesian is required.");const n=L.subtract(e,t.center,Ac),r=t.halfAxes;let o=Q.getColumn(r,0,Jc),i=Q.getColumn(r,1,tl),s=Q.getColumn(r,2,el);const a=L.magnitude(o),u=L.magnitude(i),c=L.magnitude(s);let l=!0,f=!0,h=!0;a>0?L.divideByScalar(o,a,o):l=!1,u>0?L.divideByScalar(i,u,i):f=!1,c>0?L.divideByScalar(s,c,s):h=!1;const p=!l+!f+!h;let d,m,y;if(1===p){let t=o;d=i,m=s,f?h||(t=s,m=o):(t=i,d=o),y=L.cross(d,m,rl),t===o?o=y:t===i?i=y:t===s&&(s=y)}else if(2===p){d=o,f?d=i:h&&(d=s);let t=L.UNIT_Y;t.equalsEpsilon(d,M.EPSILON3)&&(t=L.UNIT_X),m=L.cross(d,t,nl),L.normalize(m,m),y=L.cross(d,m,rl),L.normalize(y,y),d===o?(i=m,s=y):d===i?(s=m,o=y):d===s&&(o=m,i=y)}else 3===p&&(o=L.UNIT_X,i=L.UNIT_Y,s=L.UNIT_Z);const g=ol;g.x=L.dot(n,o),g.y=L.dot(n,i),g.z=L.dot(n,s);let w,E=0;return g.x<-a?(w=g.x+a,E+=w*w):g.x>a&&(w=g.x-a,E+=w*w),g.y<-u?(w=g.y+u,E+=w*w):g.y>u&&(w=g.y-u,E+=w*w),g.z<-c?(w=g.z+c,E+=w*w):g.z>c&&(w=g.z-c,E+=w*w),E};const il=new L,sl=new L;mc.computePlaneDistances=function(t,e,n,r){if(!O(t))throw new b("box is required.");if(!O(e))throw new b("position is required.");if(!O(n))throw new b("direction is required.");O(r)||(r=new qi);let o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const s=t.center,a=t.halfAxes,u=Q.getColumn(a,0,Jc),c=Q.getColumn(a,1,tl),l=Q.getColumn(a,2,el),f=L.add(u,c,il);L.add(f,l,f),L.add(f,s,f);const h=L.subtract(f,e,sl);let p=L.dot(n,h);return o=Math.min(p,o),i=Math.max(p,i),L.add(s,u,f),L.add(f,c,f),L.subtract(f,l,f),L.subtract(f,e,h),p=L.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),L.add(s,u,f),L.subtract(f,c,f),L.add(f,l,f),L.subtract(f,e,h),p=L.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),L.add(s,u,f),L.subtract(f,c,f),L.subtract(f,l,f),L.subtract(f,e,h),p=L.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),L.subtract(s,u,f),L.add(f,c,f),L.add(f,l,f),L.subtract(f,e,h),p=L.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),L.subtract(s,u,f),L.add(f,c,f),L.subtract(f,l,f),L.subtract(f,e,h),p=L.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),L.subtract(s,u,f),L.subtract(f,c,f),L.add(f,l,f),L.subtract(f,e,h),p=L.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),L.subtract(s,u,f),L.subtract(f,c,f),L.subtract(f,l,f),L.subtract(f,e,h),p=L.dot(n,h),o=Math.min(p,o),i=Math.max(p,i),r.start=o,r.stop=i,r};const al=new L,ul=new L,cl=new L;mc.computeCorners=function(t,e){T.typeOf.object("box",t),O(e)||(e=[new L,new L,new L,new L,new L,new L,new L,new L]);const n=t.center,r=t.halfAxes,o=Q.getColumn(r,0,al),i=Q.getColumn(r,1,ul),s=Q.getColumn(r,2,cl);return L.clone(n,e[0]),L.subtract(e[0],o,e[0]),L.subtract(e[0],i,e[0]),L.subtract(e[0],s,e[0]),L.clone(n,e[1]),L.subtract(e[1],o,e[1]),L.subtract(e[1],i,e[1]),L.add(e[1],s,e[1]),L.clone(n,e[2]),L.subtract(e[2],o,e[2]),L.add(e[2],i,e[2]),L.subtract(e[2],s,e[2]),L.clone(n,e[3]),L.subtract(e[3],o,e[3]),L.add(e[3],i,e[3]),L.add(e[3],s,e[3]),L.clone(n,e[4]),L.add(e[4],o,e[4]),L.subtract(e[4],i,e[4]),L.subtract(e[4],s,e[4]),L.clone(n,e[5]),L.add(e[5],o,e[5]),L.subtract(e[5],i,e[5]),L.add(e[5],s,e[5]),L.clone(n,e[6]),L.add(e[6],o,e[6]),L.add(e[6],i,e[6]),L.subtract(e[6],s,e[6]),L.clone(n,e[7]),L.add(e[7],o,e[7]),L.add(e[7],i,e[7]),L.add(e[7],s,e[7]),e};const ll=new Q;mc.computeTransformation=function(t,e){T.typeOf.object("box",t),O(e)||(e=new ht);const n=t.center,r=Q.multiplyByUniformScale(t.halfAxes,2,ll);return ht.fromRotationTranslation(r,n,e)};const fl=new Di;function hl(t){this._ellipsoid=t??be.WGS84,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}mc.isOccluded=function(t,e){if(!O(t))throw new b("box is required.");if(!O(e))throw new b("occluder is required.");const n=Di.fromOrientedBoundingBox(t,fl);return!e.isBoundingSphereVisible(n)},mc.prototype.intersectPlane=function(t){return mc.intersectPlane(this,t)},mc.prototype.distanceSquaredTo=function(t){return mc.distanceSquaredTo(this,t)},mc.prototype.computePlaneDistances=function(t,e,n){return mc.computePlaneDistances(this,t,e,n)},mc.prototype.computeCorners=function(t){return mc.computeCorners(this,t)},mc.prototype.computeTransformation=function(t){return mc.computeTransformation(this,t)},mc.prototype.isOccluded=function(t){return mc.isOccluded(this,t)},mc.equals=function(t,e){return t===e||O(t)&&O(e)&&L.equals(t.center,e.center)&&Q.equals(t.halfAxes,e.halfAxes)},mc.prototype.clone=function(t){return mc.clone(this,t)},mc.prototype.equals=function(t){return mc.equals(this,t)},Object.defineProperties(hl.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),hl.mercatorAngleToGeodeticLatitude=function(t){return M.PI_OVER_TWO-2*Math.atan(Math.exp(-t))},hl.geodeticLatitudeToMercatorAngle=function(t){t>hl.MaximumLatitude?t=hl.MaximumLatitude:t<-hl.MaximumLatitude&&(t=-hl.MaximumLatitude);const e=Math.sin(t);return.5*Math.log((1+e)/(1-e))},hl.MaximumLatitude=hl.mercatorAngleToGeodeticLatitude(Math.PI),hl.prototype.project=function(t,e){const n=this._semimajorAxis,r=t.longitude*n,o=hl.geodeticLatitudeToMercatorAngle(t.latitude)*n,i=t.height;return O(e)?(e.x=r,e.y=o,e.z=i,e):new L(r,o,i)},hl.prototype.unproject=function(t,e){if(!O(t))throw new b("cartesian is required");const n=this._oneOverSemimajorAxis,r=t.x*n,o=hl.mercatorAngleToGeodeticLatitude(t.y*n),i=t.z;return O(e)?(e.longitude=r,e.latitude=o,e.height=i,e):new ge(r,o,i)};var pl=Object.freeze({NONE:0,GEODESIC:1,RHUMB:2});const dl=M.EPSILON10;function ml(t,e,n,r){if(T.defined("equalsEpsilon",e),!O(t))return;n=n??!1;const o=O(r),i=t.length;if(i<2)return t;let s,a,u,c=t[0],l=0,f=-1;for(s=1;s<i;++s)a=t[s],e(c,a,dl)?(O(u)||(u=t.slice(0,s),l=s-1,f=0),o&&r.push(s)):(O(u)&&(u.push(a),l=s,o&&(f=r.length)),c=a);return n&&e(t[0],t[i-1],dl)&&(o&&(O(u)?r.splice(f,0,l):r.push(i-1)),O(u)?u.length-=1:u=t.slice(0,-1)),O(u)?u:t}function yl(t,e,n,r,o,i,s){const a=(u=t)*(c=n)*(4+u*(4-3*c))/16;var u,c;return(1-a)*t*e*(r+a*o*(s+a*i*(2*s*s-1)))}const gl=new L,wl=new L;function El(t,e,n,r){const o=L.normalize(r.cartographicToCartesian(e,wl),gl),i=L.normalize(r.cartographicToCartesian(n,wl),wl);T.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(L.angleBetween(o,i))-Math.PI),.0125),function(t,e,n,r,o,i,s){const a=(e-n)/e,u=i-r,c=Math.atan((1-a)*Math.tan(o)),l=Math.atan((1-a)*Math.tan(s)),f=Math.cos(c),h=Math.sin(c),p=Math.cos(l),d=Math.sin(l),m=f*p,y=f*d,g=h*d,w=h*p;let E,_,O,b,T,A=u,x=M.TWO_PI,R=Math.cos(A),S=Math.sin(A);do{R=Math.cos(A),S=Math.sin(A);const t=y-w*R;let e;O=Math.sqrt(p*p*S*S+t*t),_=g+m*R,E=Math.atan2(O,_),0===O?(e=0,b=1):(e=m*S/O,b=1-e*e),x=A,T=_-2*g/b,isFinite(T)||(T=0),A=u+yl(a,e,b,E,O,_,T)}while(Math.abs(A-x)>M.EPSILON12);const I=b*(e*e-n*n)/(n*n),N=I*(256+I*(I*(74-47*I)-128))/1024,v=T*T,P=n*(1+I*(4096+I*(I*(320-175*I)-768))/16384)*(E-N*O*(T+N*(_*(2*v-1)-N*T*(4*O*O-3)*(4*v-3)/6)/4)),C=Math.atan2(p*S,y-w*R),L=Math.atan2(f*S,y*R-w);t._distance=P,t._startHeading=C,t._endHeading=L,t._uSquared=I}(t,r.maximumRadius,r.minimumRadius,e.longitude,e.latitude,n.longitude,n.latitude),t._start=ge.clone(e,t._start),t._end=ge.clone(n,t._end),t._start.height=0,t._end.height=0,function(t){const e=t._uSquared,n=t._ellipsoid.maximumRadius,r=t._ellipsoid.minimumRadius,o=(n-r)/n,i=Math.cos(t._startHeading),s=Math.sin(t._startHeading),a=(1-o)*Math.tan(t._start.latitude),u=1/Math.sqrt(1+a*a),c=u*a,l=Math.atan2(a,i),f=u*s,h=f*f,p=1-h,d=Math.sqrt(p),m=e/4,y=m*m,g=y*m,w=y*y,E=1+m-3*y/4+5*g/4-175*w/64,_=1-m+15*y/8-35*g/8,O=1-3*m+35*y/4,b=1-5*m,T=E*l-_*Math.sin(2*l)*m/2-O*Math.sin(4*l)*y/16-b*Math.sin(6*l)*g/48-5*Math.sin(8*l)*w/512,A=t._constants;A.a=n,A.b=r,A.f=o,A.cosineHeading=i,A.sineHeading=s,A.tanU=a,A.cosineU=u,A.sineU=c,A.sigma=l,A.sineAlpha=f,A.sineSquaredAlpha=h,A.cosineSquaredAlpha=p,A.cosineAlpha=d,A.u2Over4=m,A.u4Over16=y,A.u6Over64=g,A.u8Over256=w,A.a0=E,A.a1=_,A.a2=O,A.a3=b,A.distanceRatio=T}(t)}function _l(t,e,n){const r=n??be.default;this._ellipsoid=r,this._start=new ge,this._end=new ge,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,O(t)&&O(e)&&El(this,t,e,r)}function Ol(t,e,n){if(0===t)return e*n;const r=t*t,o=r*r,i=o*r,s=i*r,a=s*r,u=a*r,c=n;return e*((1-r/4-3*o/64-5*i/256-175*s/16384-441*a/65536-4851*u/1048576)*c-(3*r/8+3*o/32+45*i/1024+105*s/4096+2205*a/131072+6237*u/524288)*Math.sin(2*c)+(15*o/256+45*i/1024+525*s/16384+1575*a/65536+155925*u/8388608)*Math.sin(4*c)-(35*i/3072+175*s/12288+3675*a/262144+13475*u/1048576)*Math.sin(6*c)+(315*s/131072+2205*a/524288+43659*u/8388608)*Math.sin(8*c)-(693*a/1310720+6237*u/5242880)*Math.sin(10*c)+1001*u/8388608*Math.sin(12*c))}function bl(t,e){if(0===t)return Math.log(Math.tan(.5*(M.PI_OVER_TWO+e)));const n=t*Math.sin(e);return Math.log(Math.tan(.5*(M.PI_OVER_TWO+e)))-t/2*Math.log((1+n)/(1-n))}Object.defineProperties(_l.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return T.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return T.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return T.defined("distance",this._distance),this._endHeading}}}),_l.prototype.setEndPoints=function(t,e){T.defined("start",t),T.defined("end",e),El(this,t,e,this._ellipsoid)},_l.prototype.interpolateUsingFraction=function(t,e){return this.interpolateUsingSurfaceDistance(this._distance*t,e)},_l.prototype.interpolateUsingSurfaceDistance=function(t,e){T.defined("distance",this._distance);const n=this._constants,r=n.distanceRatio+t/n.b,o=Math.cos(2*r),i=Math.cos(4*r),s=Math.cos(6*r),a=Math.sin(2*r),u=Math.sin(4*r),c=Math.sin(6*r),l=Math.sin(8*r),f=r*r,h=r*f,p=n.u8Over256,d=n.u2Over4,m=n.u6Over64,y=n.u4Over16;let g=2*h*p*o/3+r*(1-d+7*y/4-15*m/4+579*p/64-(y-15*m/4+187*p/16)*o-(5*m/4-115*p/16)*i-29*p*s/16)+(d/2-y+71*m/32-85*p/16)*a+(5*y/16-5*m/4+383*p/96)*u-f*((m-11*p/2)*a+5*p*u/2)+(29*m/96-29*p/16)*c+539*p*l/1536;const w=Math.asin(Math.sin(g)*n.cosineAlpha),E=Math.atan(n.a/n.b*Math.tan(w));g-=n.sigma;const _=Math.cos(2*n.sigma+g),b=Math.sin(g),A=Math.cos(g),x=n.cosineU*A,R=n.sineU*b,S=Math.atan2(b*n.sineHeading,x-R*n.cosineHeading)-yl(n.f,n.sineAlpha,n.cosineSquaredAlpha,g,b,A,_);return O(e)?(e.longitude=this._start.longitude+S,e.latitude=E,e.height=0,e):new ge(this._start.longitude+S,E,0)};const Tl=new L,Al=new L;function xl(t,e,n,r){const o=L.normalize(r.cartographicToCartesian(e,Al),Tl),i=L.normalize(r.cartographicToCartesian(n,Al),Al);T.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(L.angleBetween(o,i))-Math.PI),.0125);const s=r.maximumRadius,a=r.minimumRadius,u=s*s,c=a*a;t._ellipticitySquared=(u-c)/u,t._ellipticity=Math.sqrt(t._ellipticitySquared),t._start=ge.clone(e,t._start),t._start.height=0,t._end=ge.clone(n,t._end),t._end.height=0,t._heading=function(t,e,n,r,o){const i=bl(t._ellipticity,n),s=bl(t._ellipticity,o);return Math.atan2(M.negativePiToPi(r-e),s-i)}(t,e.longitude,e.latitude,n.longitude,n.latitude),t._distance=function(t,e,n,r,o,i,s){const a=t._heading,u=i-r;let c=0;if(M.equalsEpsilon(Math.abs(a),M.PI_OVER_TWO,M.EPSILON8))if(e===n)c=e*Math.cos(o)*M.negativePiToPi(u);else{const n=Math.sin(o);c=e*Math.cos(o)*M.negativePiToPi(u)/Math.sqrt(1-t._ellipticitySquared*n*n)}else{const n=Ol(t._ellipticity,e,o);c=(Ol(t._ellipticity,e,s)-n)/Math.cos(a)}return Math.abs(c)}(t,r.maximumRadius,r.minimumRadius,e.longitude,e.latitude,n.longitude,n.latitude)}function Rl(t,e,n,r,o,i){if(0===n)return ge.clone(t,i);const s=o*o;let a,u,c;if(Math.abs(M.PI_OVER_TWO-Math.abs(e))>M.EPSILON8)if(u=function(t,e,n){const r=t/n;if(0===e)return r;const o=r*r,i=o*r,s=i*r,a=e*e,u=a*a,c=u*a,l=c*a,f=l*a,h=f*a,p=Math.sin(2*r),d=Math.cos(2*r),m=Math.sin(4*r),y=Math.cos(4*r),g=Math.sin(6*r),w=Math.cos(6*r),E=Math.sin(8*r),_=Math.cos(8*r),O=Math.sin(10*r);return r+r*a/4+7*r*u/64+15*r*c/256+579*r*l/16384+1515*r*f/65536+16837*r*h/1048576+(3*r*u/16+45*r*c/256-r*(32*o-561)*l/4096-r*(232*o-1677)*f/16384+r*(399985-90560*o+512*s)*h/5242880)*d+(21*r*c/256+483*r*l/4096-r*(224*o-1969)*f/16384-r*(33152*o-112599)*h/1048576)*y+(151*r*l/4096+4681*r*f/65536+1479*r*h/16384-453*i*h/32768)*w+(1097*r*f/65536+42783*r*h/1048576)*_+8011*r*h/1048576*Math.cos(10*r)+(3*a/8+3*u/16+213*c/2048-3*o*c/64+255*l/4096-33*o*l/512+20861*f/524288-33*o*f/512+s*f/1024+28273*h/1048576-471*o*h/8192+9*s*h/4096)*p+(21*u/256+21*c/256+533*l/8192-21*o*l/512+197*f/4096-315*o*f/4096+584039*h/16777216-12517*o*h/131072+7*s*h/2048)*m+(151*c/6144+151*l/4096+5019*f/131072-453*o*f/16384+26965*h/786432-8607*o*h/131072)*g+(1097*l/131072+1097*f/65536+225797*h/10485760-1097*o*h/65536)*E+(8011*f/2621440+8011*h/1048576)*O+293393*h/251658240*Math.sin(12*r)}(Ol(o,r,t.latitude)+n*Math.cos(e),o,r),Math.abs(e)<M.EPSILON10)a=M.negativePiToPi(t.longitude);else{const n=bl(o,t.latitude),r=bl(o,u);c=Math.tan(e)*(r-n),a=M.negativePiToPi(t.longitude+c)}else{let i;if(u=t.latitude,0===o)i=r*Math.cos(t.latitude);else{const e=Math.sin(t.latitude);i=r*Math.cos(t.latitude)/Math.sqrt(1-s*e*e)}c=n/i,a=e>0?M.negativePiToPi(t.longitude+c):M.negativePiToPi(t.longitude-c)}return O(i)?(i.longitude=a,i.latitude=u,i.height=0,i):new ge(a,u,0)}function Sl(t,e,n){const r=n??be.default;this._ellipsoid=r,this._start=new ge,this._end=new ge,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,O(t)&&O(e)&&xl(this,t,e,r)}function Il(t,e){this.positions=O(t)?t:[],this.holes=O(e)?e:[]}function Nl(t,e,n,r,o){let i;if(o===function(t,e,n,r){let o=0;for(let i=e,s=n-r;i<n;i+=r)o+=(t[s]-t[i])*(t[i+1]+t[s+1]),s=i;return o}(t,e,n,r)>0)for(let s=e;s<n;s+=r)i=Ql(s/r|0,t[s],t[s+1],i);else for(let s=n-r;s>=e;s-=r)i=Ql(s/r|0,t[s],t[s+1],i);return i&&Vl(i,i.next)&&(Kl(i),i=i.next),i}function vl(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!Vl(r,r.next)&&0!==Wl(r.prev,r,r.next))r=r.next;else{if(Kl(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Ml(t,e,n,r,o,i,s){if(!t)return;!s&&i&&function(t,e,n,r){let o=t;do{0===o.z&&(o.z=jl(o.x,o.y,e,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){let e,n=1;do{let r,o=t;t=null;let i=null;for(e=0;o;){e++;let s=o,a=0;for(let t=0;t<n&&(a++,s=s.nextZ,s);t++);let u=n;for(;a>0||u>0&&s;)0!==a&&(0===u||!s||o.z<=s.z)?(r=o,o=o.nextZ,a--):(r=s,s=s.nextZ,u--),i?i.nextZ=r:t=r,r.prevZ=i,i=r;o=s}i.nextZ=null,n*=2}while(e>1)}(o)}(t,r,o,i);let a=t;for(;t.prev!==t.next;){const u=t.prev,c=t.next;if(i?Cl(t,r,o,i):Pl(t))e.push(u.i,t.i,c.i),Kl(t),t=c.next,a=c.next;else if((t=c)===a){s?1===s?Ml(t=Ll(vl(t),e),e,n,r,o,i,2):2===s&&Ul(t,e,n,r,o,i):Ml(vl(t),e,n,r,o,i,1);break}}}function Pl(t){const e=t.prev,n=t,r=t.next;if(Wl(e,n,r)>=0)return!1;const o=e.x,i=n.x,s=r.x,a=e.y,u=n.y,c=r.y,l=Math.min(o,i,s),f=Math.min(a,u,c),h=Math.max(o,i,s),p=Math.max(a,u,c);let d=r.next;for(;d!==e;){if(d.x>=l&&d.x<=h&&d.y>=f&&d.y<=p&&Gl(o,a,i,u,s,c,d.x,d.y)&&Wl(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Cl(t,e,n,r){const o=t.prev,i=t,s=t.next;if(Wl(o,i,s)>=0)return!1;const a=o.x,u=i.x,c=s.x,l=o.y,f=i.y,h=s.y,p=Math.min(a,u,c),d=Math.min(l,f,h),m=Math.max(a,u,c),y=Math.max(l,f,h),g=jl(p,d,e,n,r),w=jl(m,y,e,n,r);let E=t.prevZ,_=t.nextZ;for(;E&&E.z>=g&&_&&_.z<=w;){if(E.x>=p&&E.x<=m&&E.y>=d&&E.y<=y&&E!==o&&E!==s&&Gl(a,l,u,f,c,h,E.x,E.y)&&Wl(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,_.x>=p&&_.x<=m&&_.y>=d&&_.y<=y&&_!==o&&_!==s&&Gl(a,l,u,f,c,h,_.x,_.y)&&Wl(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;E&&E.z>=g;){if(E.x>=p&&E.x<=m&&E.y>=d&&E.y<=y&&E!==o&&E!==s&&Gl(a,l,u,f,c,h,E.x,E.y)&&Wl(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;_&&_.z<=w;){if(_.x>=p&&_.x<=m&&_.y>=d&&_.y<=y&&_!==o&&_!==s&&Gl(a,l,u,f,c,h,_.x,_.y)&&Wl(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Ll(t,e){let n=t;do{const r=n.prev,o=n.next.next;!Vl(r,o)&&Hl(r,n,n.next,o)&&$l(r,o)&&$l(o,r)&&(e.push(r.i,n.i,o.i),Kl(n),Kl(n.next),n=t=o),n=n.next}while(n!==t);return vl(n)}function Ul(t,e,n,r,o,i){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&kl(s,t)){let a=Zl(s,t);return s=vl(s,s.next),a=vl(a,a.next),Ml(s,e,n,r,o,i,0),void Ml(a,e,n,r,o,i,0)}t=t.next}s=s.next}while(s!==t)}function ql(t,e){let n=t.x-e.x;return 0===n&&(n=t.y-e.y,0===n)&&(n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)),n}function Dl(t,e){const n=function(t,e){let n=e;const r=t.x,o=t.y;let i,s=-1/0;if(Vl(t,n))return n;do{if(Vl(t,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const t=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>s&&(s=t,i=n.x<n.next.x?n:n.next,t===r))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,u=i.x,c=i.y;let l=1/0;n=i;do{if(r>=n.x&&n.x>=u&&r!==n.x&&Bl(o<c?r:s,o,u,c,o<c?s:r,o,n.x,n.y)){const e=Math.abs(o-n.y)/(r-n.x);$l(n,t)&&(e<l||e===l&&(n.x>i.x||n.x===i.x&&zl(i,n)))&&(i=n,l=e)}n=n.next}while(n!==a);return i}(t,e);if(!n)return e;const r=Zl(n,t);return vl(r,r.next),vl(n,n.next)}function zl(t,e){return Wl(t.prev,t,e.prev)<0&&Wl(e.next,t,t.next)<0}function jl(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fl(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Bl(t,e,n,r,o,i,s,a){return(o-s)*(e-a)>=(t-s)*(i-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(i-a)>=(o-s)*(r-a)}function Gl(t,e,n,r,o,i,s,a){return!(t===s&&e===a)&&Bl(t,e,n,r,o,i,s,a)}function kl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Hl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&($l(t,e)&&$l(e,t)&&function(t,e){let n=t,r=!1;const o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Wl(t.prev,t,e.prev)||Wl(t,e.prev,e))||Vl(t,e)&&Wl(t.prev,t,t.next)>0&&Wl(e.prev,e,e.next)>0)}function Wl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Vl(t,e){return t.x===e.x&&t.y===e.y}function Hl(t,e,n,r){const o=Yl(Wl(t,e,n)),i=Yl(Wl(t,e,r)),s=Yl(Wl(n,r,t)),a=Yl(Wl(n,r,e));return o!==i&&s!==a||!(0!==o||!Xl(t,n,e))||!(0!==i||!Xl(t,r,e))||!(0!==s||!Xl(n,t,r))||!(0!==a||!Xl(n,e,r))}function Xl(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Yl(t){return t>0?1:t<0?-1:0}function $l(t,e){return Wl(t.prev,t,t.next)<0?Wl(t,e,t.next)>=0&&Wl(t,t.prev,e)>=0:Wl(t,e,t.prev)<0||Wl(t,t.next,e)<0}function Zl(t,e){const n=Jl(t.i,t.x,t.y),r=Jl(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function Ql(t,e,n,r){const o=Jl(t,e,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function Kl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Jl(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}Object.defineProperties(Sl.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return T.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return T.defined("distance",this._distance),this._heading}}}),Sl.fromStartHeadingDistance=function(t,e,n,r,o){T.defined("start",t),T.defined("heading",e),T.defined("distance",n),T.typeOf.number.greaterThan("distance",n,0);const i=r??be.default,s=i.maximumRadius,a=i.minimumRadius,u=s*s,c=a*a,l=Math.sqrt((u-c)/u),f=Rl(t,e=M.negativePiToPi(e),n,i.maximumRadius,l);return!O(o)||O(r)&&!r.equals(o.ellipsoid)?new Sl(t,f,i):(o.setEndPoints(t,f),o)},Sl.prototype.setEndPoints=function(t,e){T.defined("start",t),T.defined("end",e),xl(this,t,e,this._ellipsoid)},Sl.prototype.interpolateUsingFraction=function(t,e){return this.interpolateUsingSurfaceDistance(t*this._distance,e)},Sl.prototype.interpolateUsingSurfaceDistance=function(t,e){if(T.typeOf.number("distance",t),!O(this._distance)||0===this._distance)throw new b("EllipsoidRhumbLine must have distinct start and end set.");return Rl(this._start,this._heading,t,this._ellipsoid.maximumRadius,this._ellipticity,e)},Sl.prototype.findIntersectionWithLongitude=function(t,e){if(T.typeOf.number("intersectionLongitude",t),!O(this._distance)||0===this._distance)throw new b("EllipsoidRhumbLine must have distinct start and end set.");const n=this._ellipticity,r=this._heading,o=Math.abs(r),i=this._start;if(t=M.negativePiToPi(t),M.equalsEpsilon(Math.abs(t),Math.PI,M.EPSILON14)&&(t=M.sign(i.longitude)*Math.PI),O(e)||(e=new ge),Math.abs(M.PI_OVER_TWO-o)<=M.EPSILON8)return e.longitude=t,e.latitude=i.latitude,e.height=0,e;if(M.equalsEpsilon(Math.abs(M.PI_OVER_TWO-o),M.PI_OVER_TWO,M.EPSILON8)){if(M.equalsEpsilon(t,i.longitude,M.EPSILON12))return;return e.longitude=t,e.latitude=M.PI_OVER_TWO*M.sign(M.PI_OVER_TWO-r),e.height=0,e}const s=i.latitude,a=n*Math.sin(s),u=Math.tan(.5*(M.PI_OVER_TWO+s))*Math.exp((t-i.longitude)/Math.tan(r)),c=(1+a)/(1-a);let l,f=i.latitude;do{l=f;const t=n*Math.sin(l),e=(1+t)/(1-t);f=2*Math.atan(u*Math.pow(e/c,n/2))-M.PI_OVER_TWO}while(!M.equalsEpsilon(f,l,M.EPSILON12));return e.longitude=t,e.latitude=f,e.height=0,e},Sl.prototype.findIntersectionWithLatitude=function(t,e){if(T.typeOf.number("intersectionLatitude",t),!O(this._distance)||0===this._distance)throw new b("EllipsoidRhumbLine must have distinct start and end set.");const n=this._ellipticity,r=this._heading,o=this._start;if(M.equalsEpsilon(Math.abs(r),M.PI_OVER_TWO,M.EPSILON8))return;const i=bl(n,o.latitude),s=bl(n,t),a=Math.tan(r)*(s-i),u=M.negativePiToPi(o.longitude+a);return O(e)?(e.longitude=u,e.latitude=t,e.height=0,e):new ge(u,t,0)};const tf=new L,ef=new L,nf={computeArea2D:function(t){T.defined("positions",t),T.typeOf.number.greaterThanOrEquals("positions.length",t.length,3);const e=t.length;let n=0;for(let r=e-1,o=0;o<e;r=o++){const e=t[r],i=t[o];n+=e.x*i.y-i.x*e.y}return.5*n},computeWindingOrder2D:function(t){return nf.computeArea2D(t)>0?pi.COUNTER_CLOCKWISE:pi.CLOCKWISE},triangulate:function(t,e){return T.defined("positions",t),function(t,e,n=2){const r=e&&e.length,o=r?e[0]*n:t.length;let i=Nl(t,0,o,n,!0);const s=[];if(!i||i.next===i.prev)return s;let a,u,c;if(r&&(i=function(t,e,n,r){const o=[];for(let i=0,s=e.length;i<s;i++){const n=Nl(t,e[i]*r,i<s-1?e[i+1]*r:t.length,r,!1);n===n.next&&(n.steiner=!0),o.push(Fl(n))}o.sort(ql);for(let i=0;i<o.length;i++)n=Dl(o[i],n);return n}(t,e,i,n)),t.length>80*n){a=1/0,u=1/0;let e=-1/0,r=-1/0;for(let i=n;i<o;i+=n){const n=t[i],o=t[i+1];n<a&&(a=n),o<u&&(u=o),n>e&&(e=n),o>r&&(r=o)}c=Math.max(e-a,r-u),c=0!==c?32767/c:0}return Ml(i,s,n,a,u,c,0),s}(ue.packArray(t),e,2)}},rf=new L,of=new L,sf=new L,af=new L,uf=new L,cf=new L,lf=new L,ff=new ue,hf=new ue,pf=new ue,df=new ue;nf.computeSubdivision=function(t,e,n,r,o){o=o??M.RADIANS_PER_DEGREE;const i=O(r);T.typeOf.object("ellipsoid",t),T.defined("positions",e),T.defined("indices",n),T.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),T.typeOf.number.equals("indices.length % 3","0",n.length%3,0),T.typeOf.number.greaterThan("granularity",o,0);const s=n.slice(0);let a;const u=e.length,c=new Array(3*u),l=new Array(2*u);let f=0,h=0;for(a=0;a<u;a++){const t=e[a];if(c[f++]=t.x,c[f++]=t.y,c[f++]=t.z,i){const t=r[a];l[h++]=t.x,l[h++]=t.y}}const p=[],d={},m=t.maximumRadius,y=M.chordLength(o,m),g=y*y;for(;s.length>0;){const t=s.pop(),e=s.pop(),n=s.pop(),r=L.fromArray(c,3*n,rf),o=L.fromArray(c,3*e,of),u=L.fromArray(c,3*t,sf);let f,h,y;i&&(f=ue.fromArray(l,2*n,ff),h=ue.fromArray(l,2*e,hf),y=ue.fromArray(l,2*t,pf));const w=L.multiplyByScalar(L.normalize(r,af),m,af),E=L.multiplyByScalar(L.normalize(o,uf),m,uf),_=L.multiplyByScalar(L.normalize(u,cf),m,cf),b=L.magnitudeSquared(L.subtract(w,E,lf)),T=L.magnitudeSquared(L.subtract(E,_,lf)),A=L.magnitudeSquared(L.subtract(_,w,lf)),x=Math.max(b,T,A);let R,S,I;x>g?b===x?(R=`${Math.min(n,e)} ${Math.max(n,e)}`,a=d[R],O(a)||(S=L.add(r,o,lf),L.multiplyByScalar(S,.5,S),c.push(S.x,S.y,S.z),a=c.length/3-1,d[R]=a,i&&(I=ue.add(f,h,df),ue.multiplyByScalar(I,.5,I),l.push(I.x,I.y))),s.push(n,a,t),s.push(a,e,t)):T===x?(R=`${Math.min(e,t)} ${Math.max(e,t)}`,a=d[R],O(a)||(S=L.add(o,u,lf),L.multiplyByScalar(S,.5,S),c.push(S.x,S.y,S.z),a=c.length/3-1,d[R]=a,i&&(I=ue.add(h,y,df),ue.multiplyByScalar(I,.5,I),l.push(I.x,I.y))),s.push(e,a,n),s.push(a,t,n)):A===x&&(R=`${Math.min(t,n)} ${Math.max(t,n)}`,a=d[R],O(a)||(S=L.add(u,r,lf),L.multiplyByScalar(S,.5,S),c.push(S.x,S.y,S.z),a=c.length/3-1,d[R]=a,i&&(I=ue.add(y,f,df),ue.multiplyByScalar(I,.5,I),l.push(I.x,I.y))),s.push(t,a,e),s.push(a,n,e)):(p.push(n),p.push(e),p.push(t))}const w={attributes:{position:new Ui({componentDatatype:bi.DOUBLE,componentsPerAttribute:3,values:c})},indices:p,primitiveType:fi.TRIANGLES};return i&&(w.attributes.st=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:2,values:l})),new Ai(w)};const mf=new ge,yf=new ge,gf=new ge,wf=new ge;function Ef(){this._array=[],this._offset=0,this._length=0}nf.computeRhumbLineSubdivision=function(t,e,n,r,o){o=o??M.RADIANS_PER_DEGREE;const i=O(r);T.typeOf.object("ellipsoid",t),T.defined("positions",e),T.defined("indices",n),T.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),T.typeOf.number.equals("indices.length % 3","0",n.length%3,0),T.typeOf.number.greaterThan("granularity",o,0);const s=n.slice(0);let a;const u=e.length,c=new Array(3*u),l=new Array(2*u);let f=0,h=0;for(a=0;a<u;a++){const t=e[a];if(c[f++]=t.x,c[f++]=t.y,c[f++]=t.z,i){const t=r[a];l[h++]=t.x,l[h++]=t.y}}const p=[],d={},m=t.maximumRadius,y=M.chordLength(o,m),g=new Sl(void 0,void 0,t),w=new Sl(void 0,void 0,t),E=new Sl(void 0,void 0,t);for(;s.length>0;){const e=s.pop(),n=s.pop(),r=s.pop(),o=L.fromArray(c,3*r,rf),u=L.fromArray(c,3*n,of),f=L.fromArray(c,3*e,sf);let h,m,_;i&&(h=ue.fromArray(l,2*r,ff),m=ue.fromArray(l,2*n,hf),_=ue.fromArray(l,2*e,pf));const b=t.cartesianToCartographic(o,mf),T=t.cartesianToCartographic(u,yf),A=t.cartesianToCartographic(f,gf);g.setEndPoints(b,T);const x=g.surfaceDistance;w.setEndPoints(T,A);const R=w.surfaceDistance;E.setEndPoints(A,b);const S=E.surfaceDistance,I=Math.max(x,R,S);let N,v,M,P,C;I>y?x===I?(N=`${Math.min(r,n)} ${Math.max(r,n)}`,a=d[N],O(a)||(v=g.interpolateUsingFraction(.5,wf),M=.5*(b.height+T.height),P=L.fromRadians(v.longitude,v.latitude,M,t,lf),c.push(P.x,P.y,P.z),a=c.length/3-1,d[N]=a,i&&(C=ue.add(h,m,df),ue.multiplyByScalar(C,.5,C),l.push(C.x,C.y))),s.push(r,a,e),s.push(a,n,e)):R===I?(N=`${Math.min(n,e)} ${Math.max(n,e)}`,a=d[N],O(a)||(v=w.interpolateUsingFraction(.5,wf),M=.5*(T.height+A.height),P=L.fromRadians(v.longitude,v.latitude,M,t,lf),c.push(P.x,P.y,P.z),a=c.length/3-1,d[N]=a,i&&(C=ue.add(m,_,df),ue.multiplyByScalar(C,.5,C),l.push(C.x,C.y))),s.push(n,a,r),s.push(a,e,r)):S===I&&(N=`${Math.min(e,r)} ${Math.max(e,r)}`,a=d[N],O(a)||(v=E.interpolateUsingFraction(.5,wf),M=.5*(A.height+b.height),P=L.fromRadians(v.longitude,v.latitude,M,t,lf),c.push(P.x,P.y,P.z),a=c.length/3-1,d[N]=a,i&&(C=ue.add(_,h,df),ue.multiplyByScalar(C,.5,C),l.push(C.x,C.y))),s.push(e,a,n),s.push(a,r,n)):(p.push(r),p.push(n),p.push(e))}const _={attributes:{position:new Ui({componentDatatype:bi.DOUBLE,componentsPerAttribute:3,values:c})},indices:p,primitiveType:fi.TRIANGLES};return i&&(_.attributes.st=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:2,values:l})),new Ai(_)},nf.scaleToGeodeticHeight=function(t,e,n,r){n=n??be.default;let o=tf,i=ef;if(e=e??0,r=r??!0,O(t)){const s=t.length;for(let a=0;a<s;a+=3)L.fromArray(t,a,i),r&&(i=n.scaleToGeodeticSurface(i,i)),0!==e&&(o=n.geodeticSurfaceNormal(i,o),L.multiplyByScalar(o,e,o),L.add(i,o,i)),t[a]=i.x,t[a+1]=i.y,t[a+2]=i.z}return t},Object.defineProperties(Ef.prototype,{length:{get:function(){return this._length}}}),Ef.prototype.enqueue=function(t){this._array.push(t),this._length++},Ef.prototype.dequeue=function(){if(0===this._length)return;const t=this._array;let e=this._offset;const n=t[e];return t[e]=void 0,e++,e>10&&2*e>t.length&&(this._array=t.slice(e),e=0),this._offset=e,this._length--,n},Ef.prototype.peek=function(){if(0!==this._length)return this._array[this._offset]},Ef.prototype.contains=function(t){return-1!==this._array.indexOf(t)},Ef.prototype.clear=function(){this._array.length=this._offset=this._length=0},Ef.prototype.sort=function(t){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(t)};const _f={computeHierarchyPackedLength:function(t,e){let n=0;const r=[t];for(;r.length>0;){const t=r.pop();if(!O(t))continue;n+=2;const o=t.positions,i=t.holes;if(O(o)&&o.length>0&&(n+=o.length*e.packedLength),O(i)){const t=i.length;for(let e=0;e<t;++e)r.push(i[e])}}return n},packPolygonHierarchy:function(t,e,n,r){const o=[t];for(;o.length>0;){const t=o.pop();if(!O(t))continue;const i=t.positions,s=t.holes;if(e[n++]=O(i)?i.length:0,e[n++]=O(s)?s.length:0,O(i)){const t=i.length;for(let o=0;o<t;++o,n+=r.packedLength)r.pack(i[o],e,n)}if(O(s)){const t=s.length;for(let e=0;e<t;++e)o.push(s[e])}}return n},unpackPolygonHierarchy:function(t,e,n){const r=t[e++],o=t[e++],i=new Array(r),s=o>0?new Array(o):void 0;for(let a=0;a<r;++a,e+=n.packedLength)i[a]=n.unpack(t,e);for(let a=0;a<o;++a)s[a]=_f.unpackPolygonHierarchy(t,e,n),e=s[a].startingIndex,delete s[a].startingIndex;return{positions:i,holes:s,startingIndex:e}}},Of=new ue;function bf(t,e,n,r){return ue.subtract(e,t,Of),ue.multiplyByScalar(Of,n/r,Of),ue.add(t,Of,Of),[Of.x,Of.y]}const Tf=new L;function Af(t,e,n,r){return L.subtract(e,t,Tf),L.multiplyByScalar(Tf,n/r,Tf),L.add(t,Tf,Tf),[Tf.x,Tf.y,Tf.z]}_f.subdivideLineCount=function(t,e,n){const r=L.distance(t,e)/n,o=Math.max(0,Math.ceil(M.log2(r)));return Math.pow(2,o)};const xf=new ge,Rf=new ge,Sf=new ge,If=new L,Nf=new Sl;_f.subdivideRhumbLineCount=function(t,e,n,r){const o=new Sl(t.cartesianToCartographic(e,xf),t.cartesianToCartographic(n,Rf),t).surfaceDistance/r,i=Math.max(0,Math.ceil(M.log2(o)));return Math.pow(2,i)},_f.subdivideTexcoordLine=function(t,e,n,r,o,i){const s=_f.subdivideLineCount(n,r,o),a=ue.distance(t,e),u=a/s,c=i;c.length=2*s;let l=0;for(let f=0;f<s;f++){const n=bf(t,e,f*u,a);c[l++]=n[0],c[l++]=n[1]}return c},_f.subdivideLine=function(t,e,n,r){const o=_f.subdivideLineCount(t,e,n),i=L.distance(t,e),s=i/o;O(r)||(r=[]);const a=r;a.length=3*o;let u=0;for(let c=0;c<o;c++){const n=Af(t,e,c*s,i);a[u++]=n[0],a[u++]=n[1],a[u++]=n[2]}return a},_f.subdivideTexcoordRhumbLine=function(t,e,n,r,o,i,s){const a=n.cartesianToCartographic(r,xf),u=n.cartesianToCartographic(o,Rf);Nf.setEndPoints(a,u);const c=Nf.surfaceDistance/i,l=Math.max(0,Math.ceil(M.log2(c))),f=Math.pow(2,l),h=ue.distance(t,e),p=h/f,d=s;d.length=2*f;let m=0;for(let y=0;y<f;y++){const n=bf(t,e,y*p,h);d[m++]=n[0],d[m++]=n[1]}return d},_f.subdivideRhumbLine=function(t,e,n,r,o){const i=new Sl(t.cartesianToCartographic(e,xf),t.cartesianToCartographic(n,Rf),t);if(O(o)||(o=[]),i.surfaceDistance<=r)return o.length=3,o[0]=e.x,o[1]=e.y,o[2]=e.z,o;const s=i.surfaceDistance/r,a=Math.max(0,Math.ceil(M.log2(s))),u=Math.pow(2,a),c=i.surfaceDistance/u,l=o;l.length=3*u;let f=0;for(let h=0;h<u;h++){const e=i.interpolateUsingSurfaceDistance(h*c,Sf),n=t.cartographicToCartesian(e,If);l[f++]=n.x,l[f++]=n.y,l[f++]=n.z}return l};const vf=new L,Mf=new L,Pf=new L,Cf=new L;_f.scaleToGeodeticHeightExtruded=function(t,e,n,r,o){r=r??be.default;const i=vf;let s=Mf;const a=Pf;let u=Cf;if(O(t)&&O(t.attributes)&&O(t.attributes.position)){const c=t.attributes.position.values,l=c.length/2;for(let t=0;t<l;t+=3)L.fromArray(c,t,a),r.geodeticSurfaceNormal(a,i),u=r.scaleToGeodeticSurface(a,u),s=L.multiplyByScalar(i,n,s),s=L.add(u,s,s),c[t+l]=s.x,c[t+1+l]=s.y,c[t+2+l]=s.z,o&&(u=L.clone(a,u)),s=L.multiplyByScalar(i,e,s),s=L.add(u,s,s),c[t]=s.x,c[t+1]=s.y,c[t+2]=s.z}return t},_f.polygonOutlinesFromHierarchy=function(t,e,n){const r=[],o=new Ef;let i,s,a;for(o.enqueue(t);0!==o.length;){const t=o.dequeue();let u=t.positions;if(e)for(a=u.length,i=0;i<a;i++)n.scaleToGeodeticSurface(u[i],u[i]);if(u=ml(u,L.equalsEpsilon,!0),u.length<3)continue;const c=t.holes?t.holes.length:0;for(i=0;i<c;i++){const u=t.holes[i];let c=u.positions;if(e)for(a=c.length,s=0;s<a;++s)n.scaleToGeodeticSurface(c[s],c[s]);if(c=ml(c,L.equalsEpsilon,!0),c.length<3)continue;r.push(c);let l=0;for(O(u.holes)&&(l=u.holes.length),s=0;s<l;s++)o.enqueue(u.holes[s])}r.push(u)}return r};const Lf=new ge;function Uf(t,e,n,r){if(r===pl.RHUMB)return function(t,e,n){const r=n.cartesianToCartographic(t,xf),o=n.cartesianToCartographic(e,Rf);if(Math.sign(r.latitude)===Math.sign(o.latitude))return;Nf.setEndPoints(r,o);const i=Nf.findIntersectionWithLatitude(0,Lf);if(!O(i))return;let s=Math.min(r.longitude,o.longitude),a=Math.max(r.longitude,o.longitude);if(Math.abs(a-s)>M.PI){const t=s;s=a,a=t}return i.longitude<s||i.longitude>a?void 0:n.cartographicToCartesian(i)}(t,e,n);const o=Vs.lineSegmentPlane(t,e,Aa.ORIGIN_XY_PLANE);return O(o)?n.scaleToGeodeticSurface(o,o):void 0}const qf=new ge;function Df(t,e,n){const r=[];let o,i,s,a,u,c=0;for(;c<t.length;){o=t[c],i=t[(c+1)%t.length],s=M.sign(o.z),a=M.sign(i.z);const l=t=>e.cartesianToCartographic(t,qf).longitude;if(0===s)r.push({position:c,type:s,visited:!1,next:a,theta:l(o)});else if(0!==a){if(u=Uf(o,i,e,n),++c,!O(u))continue;t.splice(c,0,u),r.push({position:c,type:s,visited:!1,next:a,theta:l(u)})}++c}return r}function zf(t,e,n,r,o,i,s){const a=[];let u=i;const c=t=>e=>e.position===t,l=[];do{const t=n[u];a.push(t);const e=r.findIndex(c(u)),o=r[e];if(!O(o)){++u;continue}const{visited:f,type:h,next:p}=o;if(o.visited=!0,0===h){if(0===p){const t=r[e-(s?1:-1)];if(t?.position!==u+1){++u;continue}t.visited=!0}if(!f&&s&&p>0||i===u&&!s&&p<0){++u;continue}}if(!(s?h>=0:h<=0)){++u;continue}f||l.push(u);const d=r[e+(s?1:-1)];O(d)?u=d.position:++u}while(u<n.length&&u>=0&&u!==i&&a.length<n.length);t.splice(e,o,a);for(const f of l)e=zf(t,++e,n,r,0,f,!s);return e}_f.splitPolygonsOnEquator=function(t,e,n,r){O(r)||(r=[]),r.splice(0,0,...t),r.length=t.length;let o=0;for(;o<r.length;){const t=r[o],i=t.slice();if(t.length<3){r[o]=i,++o;continue}const s=Df(i,e,n);i.length===t.length||s.length<=1?(r[o]=i,++o):(s.sort(((t,e)=>t.theta-e.theta)),o=zf(r,o,i,s,1,0,i[0].z>=0))}return r},_f.polygonsFromHierarchy=function(t,e,n,r,o,i){const s=[],a=[],u=new Ef;u.enqueue(t);let c=O(i);for(;0!==u.length;){const t=u.dequeue();let l=t.positions;const f=t.holes;let h,p;if(r)for(p=l.length,h=0;h<p;h++)o.scaleToGeodeticSurface(l[h],l[h]);if(e||(l=ml(l,L.equalsEpsilon,!0)),l.length<3)continue;let d=n(l);if(!O(d))continue;const m=[];let y=nf.computeWindingOrder2D(d);if(y===pi.CLOCKWISE&&(d.reverse(),l=l.slice().reverse()),c){c=!1;let t=[l];if(t=i(t,t),t.length>1){for(const e of t)u.enqueue(new Il(e,f));continue}}let g=l.slice();const w=O(f)?f.length:0,E=[];let _;for(h=0;h<w;h++){const t=f[h];let i=t.positions;if(r)for(p=i.length,_=0;_<p;++_)o.scaleToGeodeticSurface(i[_],i[_]);if(e||(i=ml(i,L.equalsEpsilon,!0)),i.length<3)continue;const s=n(i);if(!O(s))continue;y=nf.computeWindingOrder2D(s),y===pi.CLOCKWISE&&(s.reverse(),i=i.slice().reverse()),E.push(i),m.push(g.length),g=g.concat(i),d=d.concat(s);let a=0;for(O(t.holes)&&(a=t.holes.length),_=0;_<a;_++)u.enqueue(t.holes[_])}s.push({outerRing:l,holes:E}),a.push({positions:g,positions2D:d,holes:m})}return{hierarchy:s,polygons:a}};const jf=new ue,Ff=new L,Bf=new jr,Gf=new Q;_f.computeBoundingRectangle=function(t,e,n,r,o){const i=jr.fromAxisAngle(t,r,Bf),s=Q.fromQuaternion(i,Gf);let a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;const f=n.length;for(let h=0;h<f;++h){const t=L.clone(n[h],Ff);Q.multiplyByVector(s,t,t);const r=e(t,jf);O(r)&&(a=Math.min(a,r.x),u=Math.max(u,r.x),c=Math.min(c,r.y),l=Math.max(l,r.y))}return o.x=a,o.y=c,o.width=u-a,o.height=l-c,o},_f.createGeometryFromPositions=function(t,e,n,r,o,i,s){let a=nf.triangulate(e.positions2D,e.holes);a.length<3&&(a=[0,1,2]);const u=e.positions,c=O(n),l=c?n.positions:void 0;if(o){const t=u.length,e=new Array(3*t);let n=0;for(let i=0;i<t;i++){const t=u[i];e[n++]=t.x,e[n++]=t.y,e[n++]=t.z}const r={attributes:{position:new Ui({componentDatatype:bi.DOUBLE,componentsPerAttribute:3,values:e})},indices:a,primitiveType:fi.TRIANGLES};c&&(r.attributes.st=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:2,values:ue.packArray(l)}));const o=new Ai(r);return i.normal?Ma.computeNormal(o):o}return s===pl.GEODESIC?nf.computeSubdivision(t,u,a,l,r):s===pl.RHUMB?nf.computeRhumbLineSubdivision(t,u,a,l,r):void 0};const kf=[],Wf=[],Vf=new L,Hf=new L;_f.computeWallGeometry=function(t,e,n,r,o,i){let s,a,u,c,l,f,h,p,d,m=t.length,y=0,g=0;const w=O(e),E=w?e.positions:void 0;if(o)for(a=3*m*2,s=new Array(2*a),w&&(d=2*m*2,p=new Array(2*d)),u=0;u<m;u++)c=t[u],l=t[(u+1)%m],s[y]=s[y+a]=c.x,++y,s[y]=s[y+a]=c.y,++y,s[y]=s[y+a]=c.z,++y,s[y]=s[y+a]=l.x,++y,s[y]=s[y+a]=l.y,++y,s[y]=s[y+a]=l.z,++y,w&&(f=E[u],h=E[(u+1)%m],p[g]=p[g+d]=f.x,++g,p[g]=p[g+d]=f.y,++g,p[g]=p[g+d]=h.x,++g,p[g]=p[g+d]=h.y,++g);else{const e=M.chordLength(r,n.maximumRadius);let o=0;if(i===pl.GEODESIC)for(u=0;u<m;u++)o+=_f.subdivideLineCount(t[u],t[(u+1)%m],e);else if(i===pl.RHUMB)for(u=0;u<m;u++)o+=_f.subdivideRhumbLineCount(n,t[u],t[(u+1)%m],e);for(a=3*(o+m),s=new Array(2*a),w&&(d=2*(o+m),p=new Array(2*d)),u=0;u<m;u++){let r,o;c=t[u],l=t[(u+1)%m],w&&(f=E[u],h=E[(u+1)%m]),i===pl.GEODESIC?(r=_f.subdivideLine(c,l,e,Wf),w&&(o=_f.subdivideTexcoordLine(f,h,c,l,e,kf))):i===pl.RHUMB&&(r=_f.subdivideRhumbLine(n,c,l,e,Wf),w&&(o=_f.subdivideTexcoordRhumbLine(f,h,n,c,l,e,kf)));const _=r.length;for(let t=0;t<_;++t,++y)s[y]=r[t],s[y+a]=r[t];if(s[y]=l.x,s[y+a]=l.x,++y,s[y]=l.y,s[y+a]=l.y,++y,s[y]=l.z,s[y+a]=l.z,++y,w){const t=o.length;for(let e=0;e<t;++e,++g)p[g]=o[e],p[g+d]=o[e];p[g]=h.x,p[g+d]=h.x,++g,p[g]=h.y,p[g+d]=h.y,++g}}}m=s.length;const _=Nt.createTypedArray(m/3,m-6*t.length);let b=0;for(m/=6,u=0;u<m;u++){const t=u,e=t+1,n=t+m,r=n+1;c=L.fromArray(s,3*t,Vf),l=L.fromArray(s,3*e,Hf),L.equalsEpsilon(c,l,M.EPSILON10,M.EPSILON10)||(_[b++]=t,_[b++]=n,_[b++]=e,_[b++]=e,_[b++]=n,_[b++]=r)}const T={attributes:new bs({position:new Ui({componentDatatype:bi.DOUBLE,componentsPerAttribute:3,values:s})}),indices:_,primitiveType:fi.TRIANGLES};return w&&(T.attributes.st=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:2,values:p})),new Ai(T)};const Xf={},Yf=new G(0,0,0,1);let $f=new G;const Zf=new si,Qf=new ue,Kf=new ue;Xf.worldToWindowCoordinates=function(t,e,n){return Xf.worldWithEyeOffsetToWindowCoordinates(t,e,L.ZERO,n)};const Jf=new G,th=new L;function eh(t,e,n,r){const o=n.viewMatrix,i=ht.multiplyByVector(o,G.fromElements(t.x,t.y,t.z,1,Jf),Jf),s=L.multiplyComponents(e,L.normalize(i,th),th);return i.x+=e.x+s.x,i.y+=e.y+s.y,i.z+=s.z,ht.multiplyByVector(n.frustum.projectionMatrix,i,r)}const nh=new ge(Math.PI,M.PI_OVER_TWO),rh=new L,oh=new L;Xf.worldWithEyeOffsetToWindowCoordinates=function(t,e,n,r){if(!O(t))throw new b("scene is required.");if(!O(e))throw new b("position is required.");const o=t.frameState,i=Xf.computeActualEllipsoidPosition(o,e,Yf);if(!O(i))return;const s=t.canvas,a=Zf;a.x=0,a.y=0,a.width=s.clientWidth,a.height=s.clientHeight;const u=t.camera;let c=!1;if(o.mode===ic.SCENE2D){const e=t.mapProjection,o=nh,l=e.project(o,rh),f=L.clone(u.position,oh),h=u.frustum.clone(),p=ht.computeViewportTransformation(a,0,1,new ht),d=u.frustum.projectionMatrix,m=u.positionWC.y,y=L.fromElements(M.sign(m)*l.x-m,0,-u.positionWC.x),g=ho.pointToGLWindowCoordinates(d,p,y);if(0===m||g.x<=0||g.x>=s.clientWidth)c=!0;else{if(g.x>.5*s.clientWidth){a.width=g.x,u.frustum.right=l.x-m,$f=eh(i,n,u,$f),Xf.clipToGLWindowCoordinates(a,$f,Qf),a.x+=g.x,u.position.x=-u.position.x;const t=u.frustum.right;u.frustum.right=-u.frustum.left,u.frustum.left=-t,$f=eh(i,n,u,$f),Xf.clipToGLWindowCoordinates(a,$f,Kf)}else{a.x+=g.x,a.width-=g.x,u.frustum.left=-l.x-m,$f=eh(i,n,u,$f),Xf.clipToGLWindowCoordinates(a,$f,Qf),a.x=a.x-a.width,u.position.x=-u.position.x;const t=u.frustum.left;u.frustum.left=-u.frustum.right,u.frustum.right=-t,$f=eh(i,n,u,$f),Xf.clipToGLWindowCoordinates(a,$f,Kf)}L.clone(f,u.position),u.frustum=h.clone(),((r=ue.clone(Qf,r)).x<0||r.x>s.clientWidth)&&(r.x=Kf.x)}}if(o.mode!==ic.SCENE2D||c){if($f=eh(i,n,u,$f),$f.z<0&&!(u.frustum instanceof nc)&&!(u.frustum instanceof Zu))return;r=Xf.clipToGLWindowCoordinates(a,$f,r)}return r.y=s.clientHeight-r.y,r},Xf.worldToDrawingBufferCoordinates=function(t,e,n){if(O(n=Xf.worldToWindowCoordinates(t,e,n)))return Xf.transformWindowToDrawingBuffer(t,n,n)};const ih=new L,sh=new ge;Xf.computeActualEllipsoidPosition=function(t,e,n){const r=t.mode;if(r===ic.SCENE3D)return L.clone(e,n);const o=t.mapProjection,i=o.ellipsoid.cartesianToCartographic(e,sh);if(!O(i))return;if(o.project(i,ih),r===ic.COLUMBUS_VIEW)return L.fromElements(ih.z,ih.x,ih.y,n);if(r===ic.SCENE2D)return L.fromElements(0,ih.x,ih.y,n);const s=t.morphTime;return L.fromElements(M.lerp(ih.z,e.x,s),M.lerp(ih.x,e.y,s),M.lerp(ih.y,e.z,s),n)};const ah=new L,uh=new L,ch=new ht;Xf.clipToGLWindowCoordinates=function(t,e,n){return L.divideByScalar(e,e.w,ah),ht.computeViewportTransformation(t,0,1,ch),ht.multiplyByPoint(ch,ah,uh),ue.fromCartesian3(uh,n)},Xf.transformWindowToDrawingBuffer=function(t,e,n){const r=t.canvas,o=t.drawingBufferWidth/r.clientWidth,i=t.drawingBufferHeight/r.clientHeight;return ue.fromElements(e.x*o,e.y*i,n)};const lh=new G,fh=new G;Xf.drawingBufferToWorldCoordinates=function(t,e,n,r){const o=t.context.uniformState,i=o.currentFrustum,s=i.x,a=i.y;if(t.frameState.useLogDepth){const t=n*o.log2FarDepthFromNearPlusOne;n=a*(1-s/(Math.pow(2,t)-1+s))/(a-s)}const u=t.view.passState.viewport,c=G.clone(G.UNIT_W,lh);let l;c.x=(e.x-u.x)/u.width*2-1,c.y=(e.y-u.y)/u.height*2-1,c.z=2*n-1,c.w=1;let f=t.camera.frustum;if(O(f.fovy)){l=ht.multiplyByVector(o.inverseViewProjection,c,fh);const t=1/l.w;L.multiplyByScalar(l,t,l)}else{const t=f.offCenterFrustum;O(t)&&(f=t),l=fh,l.x=.5*(c.x*(f.right-f.left)+f.left+f.right),l.y=.5*(c.y*(f.top-f.bottom)+f.bottom+f.top),l.z=.5*(c.z*(s-a)-s-a),l.w=1,l=ht.multiplyByVector(o.inverseView,l,l)}return L.fromCartesian4(l,r)};const hh={},ph=new L,dh=new L,mh=new L,yh=new L,gh=new mc;function wh(t,e,n,r,o){const i=L.subtract(t,e,ph),s=L.dot(n,i),a=L.dot(r,i);return ue.fromElements(s,a,o)}hh.validOutline=function(t){T.defined("positions",t);const e=mc.fromPoints(t,gh).halfAxes,n=Q.getColumn(e,0,dh),r=Q.getColumn(e,1,mh),o=Q.getColumn(e,2,yh),i=L.magnitude(n),s=L.magnitude(r),a=L.magnitude(o);return!(0===i&&(0===s||0===a)||0===s&&0===a)},hh.computeProjectTo2DArguments=function(t,e,n,r){T.defined("positions",t),T.defined("centerResult",e),T.defined("planeAxis1Result",n),T.defined("planeAxis2Result",r);const o=mc.fromPoints(t,gh),i=o.halfAxes,s=Q.getColumn(i,0,dh),a=Q.getColumn(i,1,mh),u=Q.getColumn(i,2,yh),c=L.magnitude(s),l=L.magnitude(a),f=L.magnitude(u),h=Math.min(c,l,f);if(0===c&&(0===l||0===f)||0===l&&0===f)return!1;let p,d;return h!==l&&h!==f||(p=s),h===c?p=a:h===f&&(d=a),h!==c&&h!==l||(d=u),L.normalize(p,n),L.normalize(d,r),L.clone(o.center,e),!0},hh.createProjectPointsTo2DFunction=function(t,e,n){return function(r){const o=new Array(r.length);for(let i=0;i<r.length;i++)o[i]=wh(r[i],t,e,n);return o}},hh.createProjectPointTo2DFunction=function(t,e,n){return function(r,o){return wh(r,t,e,n,o)}};const Eh=new L,_h=new si,Oh=new ue,bh=new ue,Th=new L,Ah=new L,xh=new L,Rh=new L,Sh=new L,Ih=new L,Nh=new jr,vh=new Q,Mh=new Q,Ph=new L;function Ch(t,e,n,r,o,i,s,a,u){const c=t.positions;let l=nf.triangulate(t.positions2D,t.holes);l.length<3&&(l=[0,1,2]);const f=Nt.createTypedArray(c.length,l.length);f.set(l);let h=vh;if(0!==r){let t=jr.fromAxisAngle(s,r,Nh);if(h=Q.fromQuaternion(t,h),e.tangent||e.bitangent){t=jr.fromAxisAngle(s,-r,Nh);const n=Q.fromQuaternion(t,Mh);a=L.normalize(Q.multiplyByVector(n,a,a),a),e.bitangent&&(u=L.normalize(L.cross(s,a,u),u))}}else h=Q.clone(Q.IDENTITY,h);const p=bh;e.st&&(p.x=n.x,p.y=n.y);const d=c.length,m=3*d,y=new Float64Array(m),g=e.normal?new Float32Array(m):void 0,w=e.tangent?new Float32Array(m):void 0,E=e.bitangent?new Float32Array(m):void 0,_=e.st?new Float32Array(2*d):void 0;let b=0,T=0,A=0,x=0,R=0;for(let I=0;I<d;I++){const t=c[I];if(y[b++]=t.x,y[b++]=t.y,y[b++]=t.z,e.st)if(O(o)&&o.positions.length===d)_[R++]=o.positions[I].x,_[R++]=o.positions[I].y;else{const e=i(Q.multiplyByVector(h,t,Eh),Oh);ue.subtract(e,p,e);const r=M.clamp(e.x/n.width,0,1),o=M.clamp(e.y/n.height,0,1);_[R++]=r,_[R++]=o}e.normal&&(g[T++]=s.x,g[T++]=s.y,g[T++]=s.z),e.tangent&&(w[x++]=a.x,w[x++]=a.y,w[x++]=a.z),e.bitangent&&(E[A++]=u.x,E[A++]=u.y,E[A++]=u.z)}const S=new bs;return e.position&&(S.position=new Ui({componentDatatype:bi.DOUBLE,componentsPerAttribute:3,values:y})),e.normal&&(S.normal=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:3,values:g})),e.tangent&&(S.tangent=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:3,values:w})),e.bitangent&&(S.bitangent=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:3,values:E})),e.st&&(S.st=new Ui({componentDatatype:bi.FLOAT,componentsPerAttribute:2,values:_})),new Ai({attributes:S,indices:f,primitiveType:fi.TRIANGLES})}function Lh(t){const e=(t=t??Z.EMPTY_OBJECT).polygonHierarchy,n=t.textureCoordinates;T.defined("options.polygonHierarchy",e);const r=t.vertexFormat??Ts.DEFAULT;this._vertexFormat=Ts.clone(r),this._polygonHierarchy=e,this._stRotation=t.stRotation??0,this._ellipsoid=be.clone(t.ellipsoid??be.default),this._workerName="createCoplanarPolygonGeometry",this._textureCoordinates=n,this.packedLength=_f.computeHierarchyPackedLength(e,L)+Ts.packedLength+be.packedLength+(O(n)?_f.computeHierarchyPackedLength(n,ue):1)+2}Lh.fromPositions=function(t){return t=t??Z.EMPTY_OBJECT,T.defined("options.positions",t.positions),new Lh({polygonHierarchy:{positions:t.positions},vertexFormat:t.vertexFormat,stRotation:t.stRotation,ellipsoid:t.ellipsoid,textureCoordinates:t.textureCoordinates})},Lh.pack=function(t,e,n){return T.typeOf.object("value",t),T.defined("array",e),n=n??0,n=_f.packPolygonHierarchy(t._polygonHierarchy,e,n,L),be.pack(t._ellipsoid,e,n),n+=be.packedLength,Ts.pack(t._vertexFormat,e,n),n+=Ts.packedLength,e[n++]=t._stRotation,O(t._textureCoordinates)?n=_f.packPolygonHierarchy(t._textureCoordinates,e,n,ue):e[n++]=-1,e[n++]=t.packedLength,e};const Uh=be.clone(be.UNIT_SPHERE),qh=new Ts,Dh={polygonHierarchy:{}};Lh.unpack=function(t,e,n){T.defined("array",t),e=e??0;const r=_f.unpackPolygonHierarchy(t,e,L);e=r.startingIndex,delete r.startingIndex;const o=be.unpack(t,e,Uh);e+=be.packedLength;const i=Ts.unpack(t,e,qh);e+=Ts.packedLength;const s=t[e++],a=-1===t[e]?void 0:_f.unpackPolygonHierarchy(t,e,ue);O(a)?(e=a.startingIndex,delete a.startingIndex):e++;const u=t[e++];return O(n)||(n=new Lh(Dh)),n._polygonHierarchy=r,n._ellipsoid=be.clone(o,n._ellipsoid),n._vertexFormat=Ts.clone(i,n._vertexFormat),n._stRotation=s,n._textureCoordinates=a,n.packedLength=u,n},Lh.createGeometry=function(t){const e=t._vertexFormat,n=t._polygonHierarchy,r=t._stRotation,o=t._textureCoordinates,i=O(o);let s=n.positions;if(s=ml(s,L.equalsEpsilon,!0),s.length<3)return;let a=Th,u=Ah,c=xh,l=Sh;const f=Ih;if(!hh.computeProjectTo2DArguments(s,Rh,l,f))return;if(a=L.cross(l,f,a),a=L.normalize(a,a),!L.equalsEpsilon(Rh,L.ZERO,M.EPSILON6)){const e=t._ellipsoid.geodeticSurfaceNormal(Rh,Ph);L.dot(a,e)<0&&(a=L.negate(a,a),l=L.negate(l,l))}const h=hh.createProjectPointsTo2DFunction(Rh,l,f),p=hh.createProjectPointTo2DFunction(Rh,l,f);e.tangent&&(u=L.clone(l,u)),e.bitangent&&(c=L.clone(f,c));const d=_f.polygonsFromHierarchy(n,i,h,!1),m=d.hierarchy,y=d.polygons,g=i?_f.polygonsFromHierarchy(o,!0,(function(t){return t}),!1).polygons:void 0;if(0===m.length)return;s=m[0].outerRing;const w=Di.fromPoints(s),E=_f.computeBoundingRectangle(a,p,s,r,_h),_=[];for(let O=0;O<y.length;O++){const t=new sc({geometry:Ch(y[O],e,E,r,i?g[O]:void 0,p,a,u,c)});_.push(t)}const b=Ma.combineInstances(_)[0];b.attributes.position.values=new Float64Array(b.attributes.position.values),b.indices=Nt.createTypedArray(b.attributes.position.values.length/3,b.indices);const T=b.attributes;return e.position||delete T.position,new Ai({attributes:T,indices:b.indices,primitiveType:b.primitiveType,boundingSphere:w})};class zh{_lng=0;_lat=0;_alt=0;_heading=0;_pitch=0;_roll=0;_zoom=-1;constructor(t,e,n,r,o,i,s){this._lng=t||0,this._lat=e||0,this._alt=n||0,this._heading=r||0,this._pitch=o||0,this._roll=i||0,this._zoom=s||-1}set lng(t){this._lng=+t}get lng(){return this._lng}set lat(t){this._lat=+t}get lat(){return this._lat}set alt(t){this._alt=+t}get alt(){return this._alt}set heading(t){this._heading=+t}get heading(){return this._heading}set pitch(t){this._pitch=+t}get pitch(){return this._pitch}set roll(t){this._roll=+t}get roll(){return this._roll}set zoom(t){this._zoom=+t}get zoom(){return this._zoom}serialize(){let t=new zh(this._lng,this._lat,this._alt,this._heading,this._pitch,this._roll,this._zoom);return JSON.stringify(t)}transformWGS84ToCartesian(t){return t?L.fromDegrees(t.lng,t.lat,t.alt,be.WGS84):L.ZERO}distance(t){return t&&t instanceof zh?L.distance(this.transformWGS84ToCartesian(this),this.transformWGS84ToCartesian(t)):0}clone(){let t=new zh;return t.lng=this.lng||0,t.lat=this.lat||0,t.alt=this.alt||0,t.heading=this.heading||0,t.pitch=this.pitch||0,t.roll=this.roll||0,t}copy(){return this.clone()}toArray(){return[this.lng,this.lat,this.alt,this.heading,this.pitch,this.roll]}getZoomString(){return this.zoom>0?`:${this.zoom} `:""}toString(){const t=this.heading?.toFixed(1),e=this.pitch?.toFixed(1),n=this.roll?.toFixed(1);return`${this.getZoomString()}:${this.lng.toFixed(3)} :${this.lat.toFixed(3)} :${this.alt.toFixed(2)} :${t} :${e} :${n}`}toObject(){return{lng:this.lng,lat:this.lat,alt:this.alt,heading:this.heading,pitch:this.pitch,roll:this.roll,zoom:this.zoom}}static fromArray(t){let e=new zh;return Array.isArray(t)&&(e.lng=t[0]||0,e.lat=t[1]||0,e.alt=t[2]||0,e.heading=t[3]||0,e.pitch=t[4]||0,e.roll=t[5]||0,e.zoom=t[6]||-1),e}static fromString(t){let e=new zh;if(t){const n=t.split(",").map(((t,e,n)=>Number(t)));e=this.fromArray(n)}return e}static fromObject(t){return new zh(t.lng,t.lat,t.alt,t.heading,t.pitch,t.roll,t.zoom)}static fromObject2(t){return new zh(t._lng,t._lat,t._alt,t._heading,t._pitch,t._roll,t._zoom)}static deserialize(t){let e=new zh,n=JSON.parse(t);return n&&(e.lng=n.lng||0,e.lat=n.lat||0,e.alt=n.alt||0,e.heading=n.heading||0,e.pitch=n.pitch||0,e.roll=n.roll||0,e.zoom=n.zoom||-1),e}}const jh=new hl;class Fh{static transformCartesianToCartographic(t){return be.WGS84.cartesianToCartographic(t)}static transformCartesianToWGS84(t){if(t){let e=be.WGS84.cartesianToCartographic(t);return new zh(M.toDegrees(e?.longitude||0),M.toDegrees(e?.latitude||0),e?.height||0)}return new zh(0,0)}static transformCartographicToWGS84(t){return t?new zh(M.toDegrees(t?.longitude||0),M.toDegrees(t?.latitude||0),t.height||0):new zh(0,0)}static transformWGS84ToCartesian(t){return t?L.fromDegrees(t.lng,t.lat,t.alt,be.WGS84):L.ZERO}static transformWGS84ToCartographic(t){return t?ge.fromDegrees(t.lng,t.lat,t.alt):ge.ZERO}static transformCartesianArrayToWGS84Array(t){return t?t.map((t=>this.transformCartesianToWGS84(t))):[]}static transformWGS84ArrayToCartesianArray(t){return t?t.map((t=>this.transformWGS84ToCartesian(t))):[]}static transformWGS84ToMercator(t){let e=jh.project(ge.fromDegrees(t.lng,t.lat,t.alt));return new zh(e.x,e.y,e.z)}static transformMercatorToWGS84(t){let e=jh.unproject(new L(t.lng,t.lat,t.alt));return new zh(M.toDegrees(e.longitude),M.toDegrees(e.latitude),e.height)}static transformWindowToWGS84(t,e){let n,r=e.scene;if(r.mode===ic.SCENE3D){let e=r.camera.getPickRay(t);n=r.globe.pick(e,r)}else n=r.camera.pickEllipsoid(t,be.WGS84);return this.transformCartesianToWGS84(n)}static transformWGS84ToWindow(t,e){let n=e.scene;return Xf.worldToWindowCoordinates(n,this.transformWGS84ToCartesian(t))}}function Bh(t,e,n){let r=L.subtract(t,e,new L),o=L.subtract(n,e,new L),i=L.cross(r,o,r);return.5*L.magnitude(i)}function Gh(t,e,n){if(!t||!e)return null;let r=[];n=n||40;let o,i,s,a,u,c,l=function(t){return 1-2*t+t*t},f=t=>2*t-2*t*t,h=t=>t*t,p=0,d=parseFloat(t.lat.toString()),m=parseFloat(e.lat.toString()),y=parseFloat(t.lng.toString()),g=parseFloat(e.lng.toString());g>y&&g-y>180&&y<0&&(y=360+y,g=360+g),c=0,m===d?(o=0,i=y-g):g===y?(o=Math.PI/2,i=d-m):(o=Math.atan((m-d)/(g-y)),i=(m-d)/Math.sin(o)),0===c&&(c=o+Math.PI/5),s=i/2,u=s*Math.cos(c)+y,a=s*Math.sin(c)+d;for(let w=0;w<n+1;w++){let o=y*l(p)+u*f(p)+g*h(p),i=d*l(p)+a*f(p)+m*h(p),s=t.lng,c=e.lng;r.push([s<0&&c>0?o-360:o,i]),p+=1/n}return r}class kh{static parseToCartesian3(t){if(Object(t)instanceof L)return t;{const e=kh.parsePosition(t);return Fh.transformWGS84ToCartesian(e)}}static parsePosition(t){let e=new zh;return t?("string"==typeof t?e=zh.fromString(t):Array.isArray(t)?e=zh.fromArray(t):Object(t)instanceof zh||!Object(t).hasOwnProperty("lng")||!Object(t).hasOwnProperty("lat")?Object(t)instanceof zh?e=t:Object(t)instanceof L?e=Fh.transformCartesianToWGS84(t):Object(t)instanceof ge&&(e=Fh.transformCartographicToWGS84(t)):e=zh.fromObject(t),e):e}static parsePositions(t){let e;if("string"==typeof t){if(t.indexOf("#")>=0)throw new Error("the positions invalid");e=t.split(";").filter((t=>!!t))}else e=t;return e.map((t=>this.parsePosition(t)))}static parsePointCoordToArray(t){const e=this.parsePosition(t);return[e.lng,e.lat]}static parsePolylineCoordToArray(t){let e=[];return this.parsePositions(t).forEach((t=>{e.push([t.lng,t.lat])})),e}static parsePolygonCoordToArray(t,e=!1){let n=[];return this.parsePositions(t).forEach((t=>{n.push([t.lng,t.lat])})),e&&n.length>0&&n.push(n[0]),[n]}}function Wh(t,e){let n=kh.parsePosition(t),r=kh.parsePosition(e),o=new _l(Fh.transformWGS84ToCartographic(n),Fh.transformWGS84ToCartographic(r)).interpolateUsingFraction(.5);return new zh(M.toDegrees(o.longitude),M.toDegrees(o.latitude),o.height)}function Vh(t){const e=t.length,n=[];for(let r=0;r<e-1;r+=2){const o=t[r],i=t[r+1],s=kh.parsePosition(o),a=kh.parsePosition(i),u=Wh(s,a);n.push(s),n.push(u),r===e-2&&n.push(a)}return n}var Hh=Object.freeze({__proto__:null,area:function(t){let e=0;if(!Array.isArray(t))return e;let n=t;t[0]instanceof L||(n=Fh.transformWGS84ArrayToCartesianArray(t));let r=Lh.createGeometry(Lh.fromPositions({positions:n,vertexFormat:Ts.POSITION_ONLY}));if(!r)return e;let o=r.attributes.position.values,i=r.indices;for(let s=0;s<i.length;s+=3)e+=Bh(L.unpack(o,3*i[s],new L),L.unpack(o,3*i[s+1],new L),L.unpack(o,3*i[s+2],new L));return e},bounds:function(t=[],e=0){let n=180,r=90,o=-180,i=-90;if(t.forEach((t=>{n=Math.min(n,t.lng||t.x),r=Math.min(r,t.lat||t.y),o=Math.max(o,t.lng||t.x),i=Math.max(i,t.lat||t.y)})),e>0){let t=Math.abs(o-o),s=Math.abs(i-r);n-=t*e,r-=s*e,o+=t*e,i+=s*e}return{west:n,south:r,east:o,north:i}},center:function(t){if(t&&Array.isArray(t)){let e=0;t.forEach((({alt:t})=>e=Math.max(e,t)));let n=Di.fromPoints(Fh.transformWGS84ArrayToCartesianArray(t));const r=Fh.transformCartesianToWGS84(n.center);return r.alt=e,r}return new zh},curve:function(t,e){e=e||{};let n=[];for(let r=0;r<t.length-1;r++){let o=Gh(t[r],t[r+1],e.count);o&&o.length>0&&(n=n.concat(o))}return n},distance:function(t){let e=0;if(t&&Array.isArray(t))for(let n=0;n<t.length-1;n++){let r=Fh.transformWGS84ToCartographic(t[n]),o=Fh.transformWGS84ToCartographic(t[n+1]),i=new _l;i.setEndPoints(r,o);let s=i.surfaceDistance;s=Math.sqrt(Math.pow(s,2)+Math.pow(o.height-r.height,2)),e+=s}return Number(e.toFixed(3))},getIntersect:function(t,e){return t.filter((function(t){return e.indexOf(t)>-1}))},getMinus:function(t,e){return t.filter((function(t){return-1==e.indexOf(t)}))},heading:function(t,e){if(!t||!e)return 0;const n=kh.parseToCartesian3(t),r=kh.parseToCartesian3(e),o=ho.eastNorthUpToFixedFrame(n),i=ht.inverse(o,new ht),s=ht.multiplyByPoint(i,r,new L);return L.angleBetween(s,new L(0,1,0))},isBetween:function(t,e,n){const r=parseFloat(t.toString())||0;return r>=parseFloat(e.toString())&&r<=parseFloat(n.toString())},midCartesian:function(t,e){return L.midpoint(t,e,new L)},midPosition:Wh,parabola:function(t,e,n=0,r=50){let o=[];n=Math.max(+n,100),r=Math.max(+r,50);let i=Math.abs(t.lng-e.lng),s=Math.abs(t.lat-e.lat),a=Math.max(i,s),u=a/r;if(i>s){let i=(e.lat-t.lat)/r;t.lng-e.lng>0&&(u=-u);for(let e=0;e<r;e++){let r=n-4*Math.pow(-.5*a+Math.abs(u)*e,2)*n/Math.pow(a,2),s=t.lng+u*e,c=t.lat+i*e;o.push([s,c,r])}}else{let i=(e.lng-t.lng)/r;t.lat-e.lat>0&&(u=-u);for(let e=0;e<r;e++){let r=n-4*Math.pow(-.5*a+Math.abs(u)*e,2)*n/Math.pow(a,2),s=t.lng+i*e,c=t.lat+u*e;o.push([s,c,r])}}return o.push([e.lng,e.lat,e.alt||0]),o},pitch:function(t,e){if(!t||!e)return 0;const n=kh.parseToCartesian3(t),r=kh.parseToCartesian3(e),o=ho.eastNorthUpToFixedFrame(n),i=ht.inverse(o,new ht),s=ht.multiplyByPoint(i,r,new L),a=L.angleBetween(s,new L(0,0,1));return M.PI_OVER_TWO-a},resample:function(t,e=1){if(!t||t.length<=1)return[];const n=e>1?Math.floor(e):1;let r=t;for(let o=0;o<n;o++)r=Vh(r);return r},resampleByLerp:function(t,e,n=10,r=1){const o=L.fromDegrees(t.lng,t.lat,t.alt),i=L.fromDegrees(e.lng,e.lat,e.alt),s=[];for(let a=0;a<=n;++a){const t=a/n,e=Math.pow(t,r),u=L.lerp(o,i,e,new L);s.push(u)}return s},resampleOnce:Vh});c(Hh);
