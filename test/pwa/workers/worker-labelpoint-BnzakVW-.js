/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),n=Symbol("Comlink.finalizer"),o=Symbol("Comlink.thrown"),i=e=>"object"==typeof e&&null!==e||"function"==typeof e,s={canHandle:t=>i(t)&&t[e],serialize(e){const{port1:t,port2:r}=new MessageChannel;return f(e,t),[r,[r]]},deserialize:e=>(e.start(),function(e){const t=new Map;return e.addEventListener("message",(function(e){const{data:r}=e;if(!r||!r.id)return;const n=t.get(r.id);if(n)try{n(r)}finally{t.delete(r.id)}})),m(e,t,[],void 0)}(e))},a=new Map([["proxy",s],["throw",{canHandle:e=>i(e)&&o in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function f(t,r=globalThis,i=["*"]){r.addEventListener("message",(function s(a){if(!a||!a.data)return;if(!function(e,t){for(const r of e){if(t===r||"*"===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}return!1}(i,a.origin))return;const{id:l,type:c,path:h}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(b);let m;try{const r=h.slice(0,-1).reduce(((e,t)=>e[t]),t),n=h.reduce(((e,t)=>e[t]),t);switch(c){case"GET":m=n;break;case"SET":r[h.slice(-1)[0]]=b(a.data.value),m=!0;break;case"APPLY":m=n.apply(r,p);break;case"CONSTRUCT":y=new n(...p),m=Object.assign(y,{[e]:!0});break;case"ENDPOINT":{const{port1:e,port2:r}=new MessageChannel;f(t,r),m=function(e,t){return d.set(e,t),e}(e,[e])}break;case"RELEASE":m=void 0;break;default:return}}catch(F){m={value:F,[o]:0}}var y;Promise.resolve(m).catch((e=>({value:e,[o]:0}))).then((e=>{const[o,i]=g(e);r.postMessage(Object.assign(Object.assign({},o),{id:l}),i),"RELEASE"===c&&(r.removeEventListener("message",s),u(r),n in t&&"function"==typeof t[n]&&t[n]())})).catch((e=>{const[t,n]=g({value:new TypeError("Unserializable return value"),[o]:0});r.postMessage(Object.assign(Object.assign({},t),{id:l}),n)}))})),r.start&&r.start()}function u(e){"MessagePort"===e.constructor.name&&e.close()}function l(e){if(e)throw new Error("Proxy has been released and is not useable")}function c(e){return O(e,new Map,{type:"RELEASE"}).then((()=>{u(e)}))}const h=new WeakMap,p="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(h.get(e)||0)-1;h.set(e,t),0===t&&c(e)}));function m(e,n,o=[],i=function(){}){let s=!1;const a=new Proxy(i,{get(t,i){if(l(s),i===r)return()=>{var t;t=a,p&&p.unregister(t),c(e),n.clear(),s=!0};if("then"===i){if(0===o.length)return{then:()=>a};const t=O(e,n,{type:"GET",path:o.map((e=>e.toString()))}).then(b);return t.then.bind(t)}return m(e,n,[...o,i])},set(t,r,i){l(s);const[a,f]=g(i);return O(e,n,{type:"SET",path:[...o,r].map((e=>e.toString())),value:a},f).then(b)},apply(r,i,a){l(s);const f=o[o.length-1];if(f===t)return O(e,n,{type:"ENDPOINT"}).then(b);if("bind"===f)return m(e,n,o.slice(0,-1));const[u,c]=y(a);return O(e,n,{type:"APPLY",path:o.map((e=>e.toString())),argumentList:u},c).then(b)},construct(t,r){l(s);const[i,a]=y(r);return O(e,n,{type:"CONSTRUCT",path:o.map((e=>e.toString())),argumentList:i},a).then(b)}});return function(e,t){const r=(h.get(t)||0)+1;h.set(t,r),p&&p.register(e,t,e)}(a,e),a}function y(e){const t=e.map(g);return[t.map((e=>e[0])),(r=t.map((e=>e[1])),Array.prototype.concat.apply([],r))];var r}const d=new WeakMap;function g(e){for(const[t,r]of a)if(r.canHandle(e)){const[n,o]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},o]}return[{type:"RAW",value:e},d.get(e)||[]]}function b(e){switch(e.type){case"HANDLER":return a.get(e.name).deserialize(e.value);case"RAW":return e.value}}function O(e,t,r,n){return new Promise((o=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.set(i,o),e.start&&e.start(),e.postMessage(Object.assign({id:i},r),n)}))}function C(e){return null!=e}function E(e){let t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(r){t=r.stack}this.stack=t}C(Object.create)&&(E.prototype=Object.create(Error.prototype),E.prototype.constructor=E),E.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return C(this.stack)&&(e+=`\n${this.stack.toString()}`),e},E.throwInstantiationError=function(){throw new E("This function defines an interface and should not be called directly.")};const A={};function S(e,t,r){return`Expected ${r} to be typeof ${t}, actual typeof was ${e}`}var w,j;A.typeOf={},A.defined=function(e,t){if(!C(t))throw new E(`${e} is required, actual value was undefined`)},A.typeOf.func=function(e,t){if("function"!=typeof t)throw new E(S(typeof t,"function",e))},A.typeOf.string=function(e,t){if("string"!=typeof t)throw new E(S(typeof t,"string",e))},A.typeOf.number=function(e,t){if("number"!=typeof t)throw new E(S(typeof t,"number",e))},A.typeOf.number.lessThan=function(e,t,r){if(A.typeOf.number(e,t),t>=r)throw new E(`Expected ${e} to be less than ${r}, actual value was ${t}`)},A.typeOf.number.lessThanOrEquals=function(e,t,r){if(A.typeOf.number(e,t),t>r)throw new E(`Expected ${e} to be less than or equal to ${r}, actual value was ${t}`)},A.typeOf.number.greaterThan=function(e,t,r){if(A.typeOf.number(e,t),t<=r)throw new E(`Expected ${e} to be greater than ${r}, actual value was ${t}`)},A.typeOf.number.greaterThanOrEquals=function(e,t,r){if(A.typeOf.number(e,t),t<r)throw new E(`Expected ${e} to be greater than or equal to ${r}, actual value was ${t}`)},A.typeOf.object=function(e,t){if("object"!=typeof t)throw new E(S(typeof t,"object",e))},A.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new E(S(typeof t,"boolean",e))},A.typeOf.bigint=function(e,t){if("bigint"!=typeof t)throw new E(S(typeof t,"bigint",e))},A.typeOf.number.equals=function(e,t,r,n){if(A.typeOf.number(e,r),A.typeOf.number(t,n),r!==n)throw new E(`${e} must be equal to ${t}, the actual values are ${r} and ${n}`)};var F,z=function(){if(j)return w;j=1;var e=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};return e.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0},e.prototype.init_by_array=function(e,t){var r,n,o;for(this.init_seed(19650218),r=1,n=0,o=this.N>t?this.N:t;o;o--){var i=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[n]+n,this.mt[r]>>>=0,n++,++r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1),n>=t&&(n=0)}for(o=this.N-1;o;o--)i=this.mt[r-1]^this.mt[r-1]>>>30,this.mt[r]=(this.mt[r]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-r,this.mt[r]>>>=0,++r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1);this.mt[0]=2147483648},e.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var r;for(this.mti==this.N+1&&this.init_seed(5489),r=0;r<this.N-this.M;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+this.M]^e>>>1^t[1&e];for(;r<this.N-1;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},e.prototype.random_int31=function(){return this.random_int()>>>1},e.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},e.prototype.random=function(){return this.random_int()*(1/4294967296)},e.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},e.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},w=e}(),x=(F=z)&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F;const R={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};R.sign=Math.sign??function(e){return 0==(e=+e)||e!=e?e:e>0?1:-1},R.signNotZero=function(e){return e<0?-1:1},R.toSNorm=function(e,t){return t=t??255,Math.round((.5*R.clamp(e,-1,1)+.5)*t)},R.fromSNorm=function(e,t){return t=t??255,R.clamp(e,0,t)/t*2-1},R.normalize=function(e,t,r){return 0===(r=Math.max(r-t,0))?0:R.clamp((e-t)/r,0,1)},R.sinh=Math.sinh??function(e){return(Math.exp(e)-Math.exp(-e))/2},R.cosh=Math.cosh??function(e){return(Math.exp(e)+Math.exp(-e))/2},R.lerp=function(e,t,r){return(1-r)*e+r*t},R.PI=Math.PI,R.ONE_OVER_PI=1/Math.PI,R.PI_OVER_TWO=Math.PI/2,R.PI_OVER_THREE=Math.PI/3,R.PI_OVER_FOUR=Math.PI/4,R.PI_OVER_SIX=Math.PI/6,R.THREE_PI_OVER_TWO=3*Math.PI/2,R.TWO_PI=2*Math.PI,R.ONE_OVER_TWO_PI=1/(2*Math.PI),R.RADIANS_PER_DEGREE=Math.PI/180,R.DEGREES_PER_RADIAN=180/Math.PI,R.RADIANS_PER_ARCSECOND=R.RADIANS_PER_DEGREE/3600,R.toRadians=function(e){if(!C(e))throw new E("degrees is required.");return e*R.RADIANS_PER_DEGREE},R.toDegrees=function(e){if(!C(e))throw new E("radians is required.");return e*R.DEGREES_PER_RADIAN},R.convertLongitudeRange=function(e){if(!C(e))throw new E("angle is required.");const t=R.TWO_PI,r=e-Math.floor(e/t)*t;return r<-Math.PI?r+t:r>=Math.PI?r-t:r},R.clampToLatitudeRange=function(e){if(!C(e))throw new E("angle is required.");return R.clamp(e,-1*R.PI_OVER_TWO,R.PI_OVER_TWO)},R.negativePiToPi=function(e){if(!C(e))throw new E("angle is required.");return e>=-R.PI&&e<=R.PI?e:R.zeroToTwoPi(e+R.PI)-R.PI},R.zeroToTwoPi=function(e){if(!C(e))throw new E("angle is required.");if(e>=0&&e<=R.TWO_PI)return e;const t=R.mod(e,R.TWO_PI);return Math.abs(t)<R.EPSILON14&&Math.abs(e)>R.EPSILON14?R.TWO_PI:t},R.mod=function(e,t){if(!C(e))throw new E("m is required.");if(!C(t))throw new E("n is required.");if(0===t)throw new E("divisor cannot be 0.");return R.sign(e)===R.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t},R.equalsEpsilon=function(e,t,r,n){if(!C(e))throw new E("left is required.");if(!C(t))throw new E("right is required.");r=r??0,n=n??r;const o=Math.abs(e-t);return o<=n||o<=r*Math.max(Math.abs(e),Math.abs(t))},R.lessThan=function(e,t,r){if(!C(e))throw new E("first is required.");if(!C(t))throw new E("second is required.");if(!C(r))throw new E("absoluteEpsilon is required.");return e-t<-r},R.lessThanOrEquals=function(e,t,r){if(!C(e))throw new E("first is required.");if(!C(t))throw new E("second is required.");if(!C(r))throw new E("absoluteEpsilon is required.");return e-t<r},R.greaterThan=function(e,t,r){if(!C(e))throw new E("first is required.");if(!C(t))throw new E("second is required.");if(!C(r))throw new E("absoluteEpsilon is required.");return e-t>r},R.greaterThanOrEquals=function(e,t,r){if(!C(e))throw new E("first is required.");if(!C(t))throw new E("second is required.");if(!C(r))throw new E("absoluteEpsilon is required.");return e-t>-r};const I=[1];R.factorial=function(e){if("number"!=typeof e||e<0)throw new E("A number greater than or equal to 0 is required.");const t=I.length;if(e>=t){let r=I[t-1];for(let n=t;n<=e;n++){const e=r*n;I.push(e),r=e}}return I[e]},R.incrementWrap=function(e,t,r){if(r=r??0,!C(e))throw new E("n is required.");if(t<=r)throw new E("maximumValue must be greater than minimumValue.");return++e>t&&(e=r),e},R.isPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>4294967295)throw new E("A number between 0 and (2^32)-1 is required.");return 0!==e&&!(e&e-1)},R.nextPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>2147483648)throw new E("A number between 0 and 2^31 is required.");return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},R.previousPowerOfTwo=function(e){if("number"!=typeof e||e<0||e>4294967295)throw new E("A number between 0 and (2^32)-1 is required.");return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,((e|=e>>32)>>>0)-(e>>>1)},R.clamp=function(e,t,r){return A.typeOf.number("value",e),A.typeOf.number("min",t),A.typeOf.number("max",r),e<t?t:e>r?r:e};let L=new x;function T(e,t,r){this.x=e??0,this.y=t??0,this.z=r??0}R.setRandomNumberSeed=function(e){if(!C(e))throw new E("seed is required.");L=new x(e)},R.nextRandomNumber=function(){return L.random()},R.randomBetween=function(e,t){return R.nextRandomNumber()*(t-e)+e},R.acosClamped=function(e){if(!C(e))throw new E("value is required.");return Math.acos(R.clamp(e,-1,1))},R.asinClamped=function(e){if(!C(e))throw new E("value is required.");return Math.asin(R.clamp(e,-1,1))},R.chordLength=function(e,t){if(!C(e))throw new E("angle is required.");if(!C(t))throw new E("radius is required.");return 2*t*Math.sin(.5*e)},R.logBase=function(e,t){if(!C(e))throw new E("number is required.");if(!C(t))throw new E("base is required.");return Math.log(e)/Math.log(t)},R.cbrt=Math.cbrt??function(e){const t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},R.log2=Math.log2??function(e){return Math.log(e)*Math.LOG2E},R.fog=function(e,t){const r=e*t;return 1-Math.exp(-r*r)},R.fastApproximateAtan=function(e){return A.typeOf.number("x",e),e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},R.fastApproximateAtan2=function(e,t){let r;A.typeOf.number("x",e),A.typeOf.number("y",t);let n=Math.abs(e);r=Math.abs(t);const o=Math.max(n,r);r=Math.min(n,r);const i=r/o;if(isNaN(i))throw new E("either x or y must be nonzero");return n=R.fastApproximateAtan(i),n=Math.abs(t)>Math.abs(e)?R.PI_OVER_TWO-n:n,n=e<0?R.PI-n:n,n=t<0?-n:n,n},T.fromSpherical=function(e,t){A.typeOf.object("spherical",e),C(t)||(t=new T);const r=e.clock,n=e.cone,o=e.magnitude??1,i=o*Math.sin(n);return t.x=i*Math.cos(r),t.y=i*Math.sin(r),t.z=o*Math.cos(n),t},T.fromElements=function(e,t,r,n){return C(n)?(n.x=e,n.y=t,n.z=r,n):new T(e,t,r)},T.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new T(e.x,e.y,e.z)},T.fromCartesian4=T.clone,T.packedLength=3,T.pack=function(e,t,r){return A.typeOf.object("value",e),A.defined("array",t),r=r??0,t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t},T.unpack=function(e,t,r){return A.defined("array",e),t=t??0,C(r)||(r=new T),r.x=e[t++],r.y=e[t++],r.z=e[t],r},T.packArray=function(e,t){A.defined("array",e);const r=e.length,n=3*r;if(C(t)){if(!Array.isArray(t)&&t.length!==n)throw new E("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(let o=0;o<r;++o)T.pack(e[o],t,3*o);return t},T.unpackArray=function(e,t){if(A.defined("array",e),A.typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!=0)throw new E("array length must be a multiple of 3.");const r=e.length;C(t)?t.length=r/3:t=new Array(r/3);for(let n=0;n<r;n+=3){const r=n/3;t[r]=T.unpack(e,n,t[r])}return t},T.fromArray=T.unpack,T.maximumComponent=function(e){return A.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)},T.minimumComponent=function(e){return A.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)},T.minimumByComponent=function(e,t,r){return A.typeOf.object("first",e),A.typeOf.object("second",t),A.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r},T.maximumByComponent=function(e,t,r){return A.typeOf.object("first",e),A.typeOf.object("second",t),A.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r},T.clamp=function(e,t,r,n){A.typeOf.object("value",e),A.typeOf.object("min",t),A.typeOf.object("max",r),A.typeOf.object("result",n);const o=R.clamp(e.x,t.x,r.x),i=R.clamp(e.y,t.y,r.y),s=R.clamp(e.z,t.z,r.z);return n.x=o,n.y=i,n.z=s,n},T.magnitudeSquared=function(e){return A.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z},T.magnitude=function(e){return Math.sqrt(T.magnitudeSquared(e))};const N=new T;T.distance=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),T.subtract(e,t,N),T.magnitude(N)},T.distanceSquared=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),T.subtract(e,t,N),T.magnitudeSquared(N)},T.normalize=function(e,t){A.typeOf.object("cartesian",e),A.typeOf.object("result",t);const r=T.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new E("normalized result is not a number");return t},T.dot=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z},T.multiplyComponents=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r},T.divideComponents=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r},T.add=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},T.subtract=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},T.multiplyByScalar=function(e,t,r){return A.typeOf.object("cartesian",e),A.typeOf.number("scalar",t),A.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r},T.divideByScalar=function(e,t,r){return A.typeOf.object("cartesian",e),A.typeOf.number("scalar",t),A.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r},T.negate=function(e,t){return A.typeOf.object("cartesian",e),A.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t},T.abs=function(e,t){return A.typeOf.object("cartesian",e),A.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};const _=new T;T.lerp=function(e,t,r,n){return A.typeOf.object("start",e),A.typeOf.object("end",t),A.typeOf.number("t",r),A.typeOf.object("result",n),T.multiplyByScalar(t,r,_),n=T.multiplyByScalar(e,1-r,n),T.add(_,n,n)};const M=new T,D=new T;T.angleBetween=function(e,t){A.typeOf.object("left",e),A.typeOf.object("right",t),T.normalize(e,M),T.normalize(t,D);const r=T.dot(M,D),n=T.magnitude(T.cross(M,D,M));return Math.atan2(n,r)};const B=new T;T.mostOrthogonalAxis=function(e,t){A.typeOf.object("cartesian",e),A.typeOf.object("result",t);const r=T.normalize(e,B);return T.abs(r,r),r.x<=r.y?r.x<=r.z?T.clone(T.UNIT_X,t):T.clone(T.UNIT_Z,t):r.y<=r.z?T.clone(T.UNIT_Y,t):T.clone(T.UNIT_Z,t)},T.projectVector=function(e,t,r){A.defined("a",e),A.defined("b",t),A.defined("result",r);const n=T.dot(e,t)/T.dot(t,t);return T.multiplyByScalar(t,n,r)},T.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},T.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},T.equalsEpsilon=function(e,t,r,n){return e===t||C(e)&&C(t)&&R.equalsEpsilon(e.x,t.x,r,n)&&R.equalsEpsilon(e.y,t.y,r,n)&&R.equalsEpsilon(e.z,t.z,r,n)},T.cross=function(e,t,r){A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r);const n=e.x,o=e.y,i=e.z,s=t.x,a=t.y,f=t.z,u=o*f-i*a,l=i*s-n*f,c=n*a-o*s;return r.x=u,r.y=l,r.z=c,r},T.midpoint=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=.5*(e.x+t.x),r.y=.5*(e.y+t.y),r.z=.5*(e.z+t.z),r},T.fromDegrees=function(e,t,r,n,o){return A.typeOf.number("longitude",e),A.typeOf.number("latitude",t),e=R.toRadians(e),t=R.toRadians(t),T.fromRadians(e,t,r,n,o)};let P=new T,v=new T;T._ellipsoidRadiiSquared=new T(40680631590769,40680631590769,40408299984661.445),T.fromRadians=function(e,t,r,n,o){A.typeOf.number("longitude",e),A.typeOf.number("latitude",t),r=r??0;const i=C(n)?n.radiiSquared:T._ellipsoidRadiiSquared,s=Math.cos(t);P.x=s*Math.cos(e),P.y=s*Math.sin(e),P.z=Math.sin(t),P=T.normalize(P,P),T.multiplyComponents(i,P,v);const a=Math.sqrt(T.dot(P,v));return v=T.divideByScalar(v,a,v),P=T.multiplyByScalar(P,r,P),C(o)||(o=new T),T.add(v,P,o)},T.fromDegreesArray=function(e,t,r){if(A.defined("coordinates",e),e.length<2||e.length%2!=0)throw new E("the number of coordinates must be a multiple of 2 and at least 2");const n=e.length;C(r)?r.length=n/2:r=new Array(n/2);for(let o=0;o<n;o+=2){const n=e[o],i=e[o+1],s=o/2;r[s]=T.fromDegrees(n,i,0,t,r[s])}return r},T.fromRadiansArray=function(e,t,r){if(A.defined("coordinates",e),e.length<2||e.length%2!=0)throw new E("the number of coordinates must be a multiple of 2 and at least 2");const n=e.length;C(r)?r.length=n/2:r=new Array(n/2);for(let o=0;o<n;o+=2){const n=e[o],i=e[o+1],s=o/2;r[s]=T.fromRadians(n,i,0,t,r[s])}return r},T.fromDegreesArrayHeights=function(e,t,r){if(A.defined("coordinates",e),e.length<3||e.length%3!=0)throw new E("the number of coordinates must be a multiple of 3 and at least 3");const n=e.length;C(r)?r.length=n/3:r=new Array(n/3);for(let o=0;o<n;o+=3){const n=e[o],i=e[o+1],s=e[o+2],a=o/3;r[a]=T.fromDegrees(n,i,s,t,r[a])}return r},T.fromRadiansArrayHeights=function(e,t,r){if(A.defined("coordinates",e),e.length<3||e.length%3!=0)throw new E("the number of coordinates must be a multiple of 3 and at least 3");const n=e.length;C(r)?r.length=n/3:r=new Array(n/3);for(let o=0;o<n;o+=3){const n=e[o],i=e[o+1],s=e[o+2],a=o/3;r[a]=T.fromRadians(n,i,s,t,r[a])}return r},T.ZERO=Object.freeze(new T(0,0,0)),T.ONE=Object.freeze(new T(1,1,1)),T.UNIT_X=Object.freeze(new T(1,0,0)),T.UNIT_Y=Object.freeze(new T(0,1,0)),T.UNIT_Z=Object.freeze(new T(0,0,1)),T.prototype.clone=function(e){return T.clone(this,e)},T.prototype.equals=function(e){return T.equals(this,e)},T.prototype.equalsEpsilon=function(e,t,r){return T.equalsEpsilon(this,e,t,r)},T.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};const U={};let q;U.EMPTY_OBJECT=Object.freeze({}),U.EMPTY_ARRAY=Object.freeze([]);const G={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},k={};let W,$,H,Y,V,K,Z,Q,X,J,ee,te,re,ne,oe,ie,se,ae;function fe(e){const t=e.split(".");for(let r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function ue(){if(!C($)&&($=!1,!pe())){const e=/ Chrome\/([\.0-9]+)/.exec(W.userAgent);null!==e&&($=!0,H=fe(e[1]))}return $}function le(){if(!C(Y)&&(Y=!1,!ue()&&!pe()&&/ Safari\/[\.0-9]+/.test(W.userAgent))){const e=/ Version\/([\.0-9]+)/.exec(W.userAgent);null!==e&&(Y=!0,V=fe(e[1]))}return Y}function ce(){if(!C(K)){K=!1;const e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(W.userAgent);null!==e&&(K=!0,Z=fe(e[1]),Z.isNightly=!!e[2])}return K}function he(){if(!C(Q)){let e;Q=!1,"Microsoft Internet Explorer"===W.appName?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W.userAgent),null!==e&&(Q=!0,X=fe(e[1]))):"Netscape"===W.appName&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W.userAgent),null!==e&&(Q=!0,X=fe(e[1])))}return Q}function pe(){if(!C(J)){J=!1;const e=/ Edg\/([\.0-9]+)/.exec(W.userAgent);null!==e&&(J=!0,ee=fe(e[1]))}return J}function me(){if(!C(te)){te=!1;const e=/Firefox\/([\.0-9]+)/.exec(W.userAgent);null!==e&&(te=!0,re=fe(e[1]))}return te}function ye(){if(!C(ae)){const e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");const t=e.style.imageRendering;ae=C(t)&&""!==t,ae&&(se=t)}return ae}function de(){if(!de.initialized)throw new E("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return de._result}Object.defineProperties(k,{element:{get:function(){if(k.supportsFullscreen())return document[G.fullscreenElement]}},changeEventName:{get:function(){if(k.supportsFullscreen())return G.fullscreenchange}},errorEventName:{get:function(){if(k.supportsFullscreen())return G.fullscreenerror}},enabled:{get:function(){if(k.supportsFullscreen())return document[G.fullscreenEnabled]}},fullscreen:{get:function(){if(k.supportsFullscreen())return null!==k.element}}}),k.supportsFullscreen=function(){if(C(q))return q;q=!1;const e=document.body;if("function"==typeof e.requestFullscreen)return G.requestFullscreen="requestFullscreen",G.exitFullscreen="exitFullscreen",G.fullscreenEnabled="fullscreenEnabled",G.fullscreenElement="fullscreenElement",G.fullscreenchange="fullscreenchange",G.fullscreenerror="fullscreenerror",q=!0,q;const t=["webkit","moz","o","ms","khtml"];let r;for(let n=0,o=t.length;n<o;++n){const o=t[n];r=`${o}RequestFullscreen`,"function"==typeof e[r]?(G.requestFullscreen=r,q=!0):(r=`${o}RequestFullScreen`,"function"==typeof e[r]&&(G.requestFullscreen=r,q=!0)),r=`${o}ExitFullscreen`,"function"==typeof document[r]?G.exitFullscreen=r:(r=`${o}CancelFullScreen`,"function"==typeof document[r]&&(G.exitFullscreen=r)),r=`${o}FullscreenEnabled`,void 0!==document[r]?G.fullscreenEnabled=r:(r=`${o}FullScreenEnabled`,void 0!==document[r]&&(G.fullscreenEnabled=r)),r=`${o}FullscreenElement`,void 0!==document[r]?G.fullscreenElement=r:(r=`${o}FullScreenElement`,void 0!==document[r]&&(G.fullscreenElement=r)),r=`${o}fullscreenchange`,void 0!==document[`on${r}`]&&("ms"===o&&(r="MSFullscreenChange"),G.fullscreenchange=r),r=`${o}fullscreenerror`,void 0!==document[`on${r}`]&&("ms"===o&&(r="MSFullscreenError"),G.fullscreenerror=r)}return q},k.requestFullscreen=function(e,t){k.supportsFullscreen()&&e[G.requestFullscreen]({vrDisplay:t})},k.exitFullscreen=function(){k.supportsFullscreen()&&document[G.exitFullscreen]()},k._names=G,W="undefined"!=typeof navigator?navigator:{},de._promise=void 0,de._result=void 0,de.initialize=function(){return C(de._promise)||(de._promise=new Promise((e=>{const t=new Image;t.onload=function(){de._result=t.width>0&&t.height>0,e(de._result)},t.onerror=function(){de._result=!1,e(de._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}))),de._promise},Object.defineProperties(de,{initialized:{get:function(){return C(de._result)}}});const ge=[];"undefined"!=typeof ArrayBuffer&&(ge.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&ge.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&ge.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&ge.push(BigInt64Array),"undefined"!=typeof BigUint64Array&&ge.push(BigUint64Array));const be={isChrome:ue,chromeVersion:function(){return ue()&&H},isSafari:le,safariVersion:function(){return le()&&V},isWebkit:ce,webkitVersion:function(){return ce()&&Z},isInternetExplorer:he,internetExplorerVersion:function(){return he()&&X},isEdge:pe,edgeVersion:function(){return pe()&&ee},isFirefox:me,firefoxVersion:function(){return me()&&re},isWindows:function(){return C(ne)||(ne=/Windows/i.test(W.appVersion)),ne},isIPadOrIOS:function(){return C(oe)||(oe="iPhone"===navigator.platform||"iPod"===navigator.platform||"iPad"===navigator.platform),oe},hardwareConcurrency:W.hardwareConcurrency??3,supportsPointerEvents:function(){return C(ie)||(ie=!me()&&"undefined"!=typeof PointerEvent&&(!C(W.pointerEnabled)||W.pointerEnabled)),ie},supportsImageRenderingPixelated:ye,supportsWebP:de,imageRenderingValue:function(){return ye()?se:void 0},typedArrayTypes:ge};function Oe(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Ce(e,t,r,n){this.red=e??1,this.green=t??1,this.blue=r??1,this.alpha=n??1}let Ee,Ae,Se;be.supportsBasis=function(e){return be.supportsWebAssembly()&&e.context.supportsBasis},be.supportsFullscreen=function(){return k.supportsFullscreen()},be.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},be.supportsBigInt64Array=function(){return"undefined"!=typeof BigInt64Array},be.supportsBigUint64Array=function(){return"undefined"!=typeof BigUint64Array},be.supportsBigInt=function(){return"undefined"!=typeof BigInt},be.supportsWebWorkers=function(){return"undefined"!=typeof Worker},be.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly},be.supportsWebgl2=function(e){return A.defined("scene",e),e.context.webgl2},be.supportsEsmWebWorkers=function(){return!me()||parseInt(re)>=114},Ce.fromCartesian4=function(e,t){return A.typeOf.object("cartesian",e),C(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new Ce(e.x,e.y,e.z,e.w)},Ce.fromBytes=function(e,t,r,n,o){return e=Ce.byteToFloat(e??255),t=Ce.byteToFloat(t??255),r=Ce.byteToFloat(r??255),n=Ce.byteToFloat(n??255),C(o)?(o.red=e,o.green=t,o.blue=r,o.alpha=n,o):new Ce(e,t,r,n)},Ce.fromAlpha=function(e,t,r){return A.typeOf.object("color",e),A.typeOf.number("alpha",t),C(r)?(r.red=e.red,r.green=e.green,r.blue=e.blue,r.alpha=t,r):new Ce(e.red,e.green,e.blue,t)},be.supportsTypedArrays()&&(Ee=new ArrayBuffer(4),Ae=new Uint32Array(Ee),Se=new Uint8Array(Ee)),Ce.fromRgba=function(e,t){return Ae[0]=e,Ce.fromBytes(Se[0],Se[1],Se[2],Se[3],t)},Ce.fromHsl=function(e,t,r,n,o){e=(e??0)%1,n=n??1;let i=r=r??0,s=r,a=r;if(0!==(t=t??0)){let n;n=r<.5?r*(1+t):r+t-r*t;const o=2*r-n;i=Oe(o,n,e+1/3),s=Oe(o,n,e),a=Oe(o,n,e-1/3)}return C(o)?(o.red=i,o.green=s,o.blue=a,o.alpha=n,o):new Ce(i,s,a,n)},Ce.fromRandom=function(e,t){let r=(e=e??U.EMPTY_OBJECT).red;if(!C(r)){const t=e.minimumRed??0,n=e.maximumRed??1;A.typeOf.number.lessThanOrEquals("minimumRed",t,n),r=t+R.nextRandomNumber()*(n-t)}let n=e.green;if(!C(n)){const t=e.minimumGreen??0,r=e.maximumGreen??1;A.typeOf.number.lessThanOrEquals("minimumGreen",t,r),n=t+R.nextRandomNumber()*(r-t)}let o=e.blue;if(!C(o)){const t=e.minimumBlue??0,r=e.maximumBlue??1;A.typeOf.number.lessThanOrEquals("minimumBlue",t,r),o=t+R.nextRandomNumber()*(r-t)}let i=e.alpha;if(!C(i)){const t=e.minimumAlpha??0,r=e.maximumAlpha??1;A.typeOf.number.lessThanOrEquals("minimumAlpha",t,r),i=t+R.nextRandomNumber()*(r-t)}return C(t)?(t.red=r,t.green=n,t.blue=o,t.alpha=i,t):new Ce(r,n,o,i)};const we=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,je=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Fe=/^rgba?\s*\(\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i,ze=/^hsla?\s*\(\s*([0-9.]+)\s*[,\s]+\s*([0-9.]+%)\s*[,\s]+\s*([0-9.]+%)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i;function xe(e,t){this.x=e??0,this.y=t??0}Ce.fromCssColorString=function(e,t){A.typeOf.string("color",e),C(t)||(t=new Ce);const r=Ce[(e=e.trim()).toUpperCase()];if(C(r))return Ce.clone(r,t),t;let n=we.exec(e);return null!==n?(t.red=parseInt(n[1],16)/15,t.green=parseInt(n[2],16)/15,t.blue=parseInt(n[3],16)/15,t.alpha=parseInt(n[4]??"f",16)/15,t):(n=je.exec(e),null!==n?(t.red=parseInt(n[1],16)/255,t.green=parseInt(n[2],16)/255,t.blue=parseInt(n[3],16)/255,t.alpha=parseInt(n[4]??"ff",16)/255,t):(n=Fe.exec(e),null!==n?(t.red=parseFloat(n[1])/("%"===n[1].substr(-1)?100:255),t.green=parseFloat(n[2])/("%"===n[2].substr(-1)?100:255),t.blue=parseFloat(n[3])/("%"===n[3].substr(-1)?100:255),t.alpha=parseFloat(n[4]??"1.0"),t):(n=ze.exec(e),null!==n?Ce.fromHsl(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,parseFloat(n[4]??"1.0"),t):t=void 0)))},Ce.packedLength=4,Ce.pack=function(e,t,r){return A.typeOf.object("value",e),A.defined("array",t),r=r??0,t[r++]=e.red,t[r++]=e.green,t[r++]=e.blue,t[r]=e.alpha,t},Ce.unpack=function(e,t,r){return A.defined("array",e),t=t??0,C(r)||(r=new Ce),r.red=e[t++],r.green=e[t++],r.blue=e[t++],r.alpha=e[t],r},Ce.byteToFloat=function(e){return e/255},Ce.floatToByte=function(e){return 1===e?255:256*e|0},Ce.clone=function(e,t){if(C(e))return C(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new Ce(e.red,e.green,e.blue,e.alpha)},Ce.equals=function(e,t){return e===t||C(e)&&C(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha},Ce.equalsArray=function(e,t,r){return e.red===t[r]&&e.green===t[r+1]&&e.blue===t[r+2]&&e.alpha===t[r+3]},Ce.prototype.clone=function(e){return Ce.clone(this,e)},Ce.prototype.equals=function(e){return Ce.equals(this,e)},Ce.prototype.equalsEpsilon=function(e,t){return this===e||C(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},Ce.prototype.toString=function(){return`(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`},Ce.prototype.toCssColorString=function(){const e=Ce.floatToByte(this.red),t=Ce.floatToByte(this.green),r=Ce.floatToByte(this.blue);return 1===this.alpha?`rgb(${e},${t},${r})`:`rgba(${e},${t},${r},${this.alpha})`},Ce.prototype.toCssHexString=function(){let e=Ce.floatToByte(this.red).toString(16);e.length<2&&(e=`0${e}`);let t=Ce.floatToByte(this.green).toString(16);t.length<2&&(t=`0${t}`);let r=Ce.floatToByte(this.blue).toString(16);if(r.length<2&&(r=`0${r}`),this.alpha<1){let n=Ce.floatToByte(this.alpha).toString(16);return n.length<2&&(n=`0${n}`),`#${e}${t}${r}${n}`}return`#${e}${t}${r}`},Ce.prototype.toBytes=function(e){const t=Ce.floatToByte(this.red),r=Ce.floatToByte(this.green),n=Ce.floatToByte(this.blue),o=Ce.floatToByte(this.alpha);return C(e)?(e[0]=t,e[1]=r,e[2]=n,e[3]=o,e):[t,r,n,o]},Ce.bytesToRgba=function(e,t,r,n){return Se[0]=e,Se[1]=t,Se[2]=r,Se[3]=n,Ae[0]},Ce.prototype.toRgba=function(){return Ce.bytesToRgba(Ce.floatToByte(this.red),Ce.floatToByte(this.green),Ce.floatToByte(this.blue),Ce.floatToByte(this.alpha))},Ce.prototype.brighten=function(e,t){return A.typeOf.number("magnitude",e),A.typeOf.number.greaterThanOrEquals("magnitude",e,0),A.typeOf.object("result",t),e=1-e,t.red=1-(1-this.red)*e,t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},Ce.prototype.darken=function(e,t){return A.typeOf.number("magnitude",e),A.typeOf.number.greaterThanOrEquals("magnitude",e,0),A.typeOf.object("result",t),e=1-e,t.red=this.red*e,t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},Ce.prototype.withAlpha=function(e,t){return Ce.fromAlpha(this,e,t)},Ce.add=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.red=e.red+t.red,r.green=e.green+t.green,r.blue=e.blue+t.blue,r.alpha=e.alpha+t.alpha,r},Ce.subtract=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.red=e.red-t.red,r.green=e.green-t.green,r.blue=e.blue-t.blue,r.alpha=e.alpha-t.alpha,r},Ce.multiply=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.red=e.red*t.red,r.green=e.green*t.green,r.blue=e.blue*t.blue,r.alpha=e.alpha*t.alpha,r},Ce.divide=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.red=e.red/t.red,r.green=e.green/t.green,r.blue=e.blue/t.blue,r.alpha=e.alpha/t.alpha,r},Ce.mod=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.red=e.red%t.red,r.green=e.green%t.green,r.blue=e.blue%t.blue,r.alpha=e.alpha%t.alpha,r},Ce.lerp=function(e,t,r,n){return A.typeOf.object("start",e),A.typeOf.object("end",t),A.typeOf.number("t",r),A.typeOf.object("result",n),n.red=R.lerp(e.red,t.red,r),n.green=R.lerp(e.green,t.green,r),n.blue=R.lerp(e.blue,t.blue,r),n.alpha=R.lerp(e.alpha,t.alpha,r),n},Ce.multiplyByScalar=function(e,t,r){return A.typeOf.object("color",e),A.typeOf.number("scalar",t),A.typeOf.object("result",r),r.red=e.red*t,r.green=e.green*t,r.blue=e.blue*t,r.alpha=e.alpha*t,r},Ce.divideByScalar=function(e,t,r){return A.typeOf.object("color",e),A.typeOf.number("scalar",t),A.typeOf.object("result",r),r.red=e.red/t,r.green=e.green/t,r.blue=e.blue/t,r.alpha=e.alpha/t,r},Ce.ALICEBLUE=Object.freeze(Ce.fromCssColorString("#F0F8FF")),Ce.ANTIQUEWHITE=Object.freeze(Ce.fromCssColorString("#FAEBD7")),Ce.AQUA=Object.freeze(Ce.fromCssColorString("#00FFFF")),Ce.AQUAMARINE=Object.freeze(Ce.fromCssColorString("#7FFFD4")),Ce.AZURE=Object.freeze(Ce.fromCssColorString("#F0FFFF")),Ce.BEIGE=Object.freeze(Ce.fromCssColorString("#F5F5DC")),Ce.BISQUE=Object.freeze(Ce.fromCssColorString("#FFE4C4")),Ce.BLACK=Object.freeze(Ce.fromCssColorString("#000000")),Ce.BLANCHEDALMOND=Object.freeze(Ce.fromCssColorString("#FFEBCD")),Ce.BLUE=Object.freeze(Ce.fromCssColorString("#0000FF")),Ce.BLUEVIOLET=Object.freeze(Ce.fromCssColorString("#8A2BE2")),Ce.BROWN=Object.freeze(Ce.fromCssColorString("#A52A2A")),Ce.BURLYWOOD=Object.freeze(Ce.fromCssColorString("#DEB887")),Ce.CADETBLUE=Object.freeze(Ce.fromCssColorString("#5F9EA0")),Ce.CHARTREUSE=Object.freeze(Ce.fromCssColorString("#7FFF00")),Ce.CHOCOLATE=Object.freeze(Ce.fromCssColorString("#D2691E")),Ce.CORAL=Object.freeze(Ce.fromCssColorString("#FF7F50")),Ce.CORNFLOWERBLUE=Object.freeze(Ce.fromCssColorString("#6495ED")),Ce.CORNSILK=Object.freeze(Ce.fromCssColorString("#FFF8DC")),Ce.CRIMSON=Object.freeze(Ce.fromCssColorString("#DC143C")),Ce.CYAN=Object.freeze(Ce.fromCssColorString("#00FFFF")),Ce.DARKBLUE=Object.freeze(Ce.fromCssColorString("#00008B")),Ce.DARKCYAN=Object.freeze(Ce.fromCssColorString("#008B8B")),Ce.DARKGOLDENROD=Object.freeze(Ce.fromCssColorString("#B8860B")),Ce.DARKGRAY=Object.freeze(Ce.fromCssColorString("#A9A9A9")),Ce.DARKGREEN=Object.freeze(Ce.fromCssColorString("#006400")),Ce.DARKGREY=Ce.DARKGRAY,Ce.DARKKHAKI=Object.freeze(Ce.fromCssColorString("#BDB76B")),Ce.DARKMAGENTA=Object.freeze(Ce.fromCssColorString("#8B008B")),Ce.DARKOLIVEGREEN=Object.freeze(Ce.fromCssColorString("#556B2F")),Ce.DARKORANGE=Object.freeze(Ce.fromCssColorString("#FF8C00")),Ce.DARKORCHID=Object.freeze(Ce.fromCssColorString("#9932CC")),Ce.DARKRED=Object.freeze(Ce.fromCssColorString("#8B0000")),Ce.DARKSALMON=Object.freeze(Ce.fromCssColorString("#E9967A")),Ce.DARKSEAGREEN=Object.freeze(Ce.fromCssColorString("#8FBC8F")),Ce.DARKSLATEBLUE=Object.freeze(Ce.fromCssColorString("#483D8B")),Ce.DARKSLATEGRAY=Object.freeze(Ce.fromCssColorString("#2F4F4F")),Ce.DARKSLATEGREY=Ce.DARKSLATEGRAY,Ce.DARKTURQUOISE=Object.freeze(Ce.fromCssColorString("#00CED1")),Ce.DARKVIOLET=Object.freeze(Ce.fromCssColorString("#9400D3")),Ce.DEEPPINK=Object.freeze(Ce.fromCssColorString("#FF1493")),Ce.DEEPSKYBLUE=Object.freeze(Ce.fromCssColorString("#00BFFF")),Ce.DIMGRAY=Object.freeze(Ce.fromCssColorString("#696969")),Ce.DIMGREY=Ce.DIMGRAY,Ce.DODGERBLUE=Object.freeze(Ce.fromCssColorString("#1E90FF")),Ce.FIREBRICK=Object.freeze(Ce.fromCssColorString("#B22222")),Ce.FLORALWHITE=Object.freeze(Ce.fromCssColorString("#FFFAF0")),Ce.FORESTGREEN=Object.freeze(Ce.fromCssColorString("#228B22")),Ce.FUCHSIA=Object.freeze(Ce.fromCssColorString("#FF00FF")),Ce.GAINSBORO=Object.freeze(Ce.fromCssColorString("#DCDCDC")),Ce.GHOSTWHITE=Object.freeze(Ce.fromCssColorString("#F8F8FF")),Ce.GOLD=Object.freeze(Ce.fromCssColorString("#FFD700")),Ce.GOLDENROD=Object.freeze(Ce.fromCssColorString("#DAA520")),Ce.GRAY=Object.freeze(Ce.fromCssColorString("#808080")),Ce.GREEN=Object.freeze(Ce.fromCssColorString("#008000")),Ce.GREENYELLOW=Object.freeze(Ce.fromCssColorString("#ADFF2F")),Ce.GREY=Ce.GRAY,Ce.HONEYDEW=Object.freeze(Ce.fromCssColorString("#F0FFF0")),Ce.HOTPINK=Object.freeze(Ce.fromCssColorString("#FF69B4")),Ce.INDIANRED=Object.freeze(Ce.fromCssColorString("#CD5C5C")),Ce.INDIGO=Object.freeze(Ce.fromCssColorString("#4B0082")),Ce.IVORY=Object.freeze(Ce.fromCssColorString("#FFFFF0")),Ce.KHAKI=Object.freeze(Ce.fromCssColorString("#F0E68C")),Ce.LAVENDER=Object.freeze(Ce.fromCssColorString("#E6E6FA")),Ce.LAVENDAR_BLUSH=Object.freeze(Ce.fromCssColorString("#FFF0F5")),Ce.LAWNGREEN=Object.freeze(Ce.fromCssColorString("#7CFC00")),Ce.LEMONCHIFFON=Object.freeze(Ce.fromCssColorString("#FFFACD")),Ce.LIGHTBLUE=Object.freeze(Ce.fromCssColorString("#ADD8E6")),Ce.LIGHTCORAL=Object.freeze(Ce.fromCssColorString("#F08080")),Ce.LIGHTCYAN=Object.freeze(Ce.fromCssColorString("#E0FFFF")),Ce.LIGHTGOLDENRODYELLOW=Object.freeze(Ce.fromCssColorString("#FAFAD2")),Ce.LIGHTGRAY=Object.freeze(Ce.fromCssColorString("#D3D3D3")),Ce.LIGHTGREEN=Object.freeze(Ce.fromCssColorString("#90EE90")),Ce.LIGHTGREY=Ce.LIGHTGRAY,Ce.LIGHTPINK=Object.freeze(Ce.fromCssColorString("#FFB6C1")),Ce.LIGHTSEAGREEN=Object.freeze(Ce.fromCssColorString("#20B2AA")),Ce.LIGHTSKYBLUE=Object.freeze(Ce.fromCssColorString("#87CEFA")),Ce.LIGHTSLATEGRAY=Object.freeze(Ce.fromCssColorString("#778899")),Ce.LIGHTSLATEGREY=Ce.LIGHTSLATEGRAY,Ce.LIGHTSTEELBLUE=Object.freeze(Ce.fromCssColorString("#B0C4DE")),Ce.LIGHTYELLOW=Object.freeze(Ce.fromCssColorString("#FFFFE0")),Ce.LIME=Object.freeze(Ce.fromCssColorString("#00FF00")),Ce.LIMEGREEN=Object.freeze(Ce.fromCssColorString("#32CD32")),Ce.LINEN=Object.freeze(Ce.fromCssColorString("#FAF0E6")),Ce.MAGENTA=Object.freeze(Ce.fromCssColorString("#FF00FF")),Ce.MAROON=Object.freeze(Ce.fromCssColorString("#800000")),Ce.MEDIUMAQUAMARINE=Object.freeze(Ce.fromCssColorString("#66CDAA")),Ce.MEDIUMBLUE=Object.freeze(Ce.fromCssColorString("#0000CD")),Ce.MEDIUMORCHID=Object.freeze(Ce.fromCssColorString("#BA55D3")),Ce.MEDIUMPURPLE=Object.freeze(Ce.fromCssColorString("#9370DB")),Ce.MEDIUMSEAGREEN=Object.freeze(Ce.fromCssColorString("#3CB371")),Ce.MEDIUMSLATEBLUE=Object.freeze(Ce.fromCssColorString("#7B68EE")),Ce.MEDIUMSPRINGGREEN=Object.freeze(Ce.fromCssColorString("#00FA9A")),Ce.MEDIUMTURQUOISE=Object.freeze(Ce.fromCssColorString("#48D1CC")),Ce.MEDIUMVIOLETRED=Object.freeze(Ce.fromCssColorString("#C71585")),Ce.MIDNIGHTBLUE=Object.freeze(Ce.fromCssColorString("#191970")),Ce.MINTCREAM=Object.freeze(Ce.fromCssColorString("#F5FFFA")),Ce.MISTYROSE=Object.freeze(Ce.fromCssColorString("#FFE4E1")),Ce.MOCCASIN=Object.freeze(Ce.fromCssColorString("#FFE4B5")),Ce.NAVAJOWHITE=Object.freeze(Ce.fromCssColorString("#FFDEAD")),Ce.NAVY=Object.freeze(Ce.fromCssColorString("#000080")),Ce.OLDLACE=Object.freeze(Ce.fromCssColorString("#FDF5E6")),Ce.OLIVE=Object.freeze(Ce.fromCssColorString("#808000")),Ce.OLIVEDRAB=Object.freeze(Ce.fromCssColorString("#6B8E23")),Ce.ORANGE=Object.freeze(Ce.fromCssColorString("#FFA500")),Ce.ORANGERED=Object.freeze(Ce.fromCssColorString("#FF4500")),Ce.ORCHID=Object.freeze(Ce.fromCssColorString("#DA70D6")),Ce.PALEGOLDENROD=Object.freeze(Ce.fromCssColorString("#EEE8AA")),Ce.PALEGREEN=Object.freeze(Ce.fromCssColorString("#98FB98")),Ce.PALETURQUOISE=Object.freeze(Ce.fromCssColorString("#AFEEEE")),Ce.PALEVIOLETRED=Object.freeze(Ce.fromCssColorString("#DB7093")),Ce.PAPAYAWHIP=Object.freeze(Ce.fromCssColorString("#FFEFD5")),Ce.PEACHPUFF=Object.freeze(Ce.fromCssColorString("#FFDAB9")),Ce.PERU=Object.freeze(Ce.fromCssColorString("#CD853F")),Ce.PINK=Object.freeze(Ce.fromCssColorString("#FFC0CB")),Ce.PLUM=Object.freeze(Ce.fromCssColorString("#DDA0DD")),Ce.POWDERBLUE=Object.freeze(Ce.fromCssColorString("#B0E0E6")),Ce.PURPLE=Object.freeze(Ce.fromCssColorString("#800080")),Ce.RED=Object.freeze(Ce.fromCssColorString("#FF0000")),Ce.ROSYBROWN=Object.freeze(Ce.fromCssColorString("#BC8F8F")),Ce.ROYALBLUE=Object.freeze(Ce.fromCssColorString("#4169E1")),Ce.SADDLEBROWN=Object.freeze(Ce.fromCssColorString("#8B4513")),Ce.SALMON=Object.freeze(Ce.fromCssColorString("#FA8072")),Ce.SANDYBROWN=Object.freeze(Ce.fromCssColorString("#F4A460")),Ce.SEAGREEN=Object.freeze(Ce.fromCssColorString("#2E8B57")),Ce.SEASHELL=Object.freeze(Ce.fromCssColorString("#FFF5EE")),Ce.SIENNA=Object.freeze(Ce.fromCssColorString("#A0522D")),Ce.SILVER=Object.freeze(Ce.fromCssColorString("#C0C0C0")),Ce.SKYBLUE=Object.freeze(Ce.fromCssColorString("#87CEEB")),Ce.SLATEBLUE=Object.freeze(Ce.fromCssColorString("#6A5ACD")),Ce.SLATEGRAY=Object.freeze(Ce.fromCssColorString("#708090")),Ce.SLATEGREY=Ce.SLATEGRAY,Ce.SNOW=Object.freeze(Ce.fromCssColorString("#FFFAFA")),Ce.SPRINGGREEN=Object.freeze(Ce.fromCssColorString("#00FF7F")),Ce.STEELBLUE=Object.freeze(Ce.fromCssColorString("#4682B4")),Ce.TAN=Object.freeze(Ce.fromCssColorString("#D2B48C")),Ce.TEAL=Object.freeze(Ce.fromCssColorString("#008080")),Ce.THISTLE=Object.freeze(Ce.fromCssColorString("#D8BFD8")),Ce.TOMATO=Object.freeze(Ce.fromCssColorString("#FF6347")),Ce.TURQUOISE=Object.freeze(Ce.fromCssColorString("#40E0D0")),Ce.VIOLET=Object.freeze(Ce.fromCssColorString("#EE82EE")),Ce.WHEAT=Object.freeze(Ce.fromCssColorString("#F5DEB3")),Ce.WHITE=Object.freeze(Ce.fromCssColorString("#FFFFFF")),Ce.WHITESMOKE=Object.freeze(Ce.fromCssColorString("#F5F5F5")),Ce.YELLOW=Object.freeze(Ce.fromCssColorString("#FFFF00")),Ce.YELLOWGREEN=Object.freeze(Ce.fromCssColorString("#9ACD32")),Ce.TRANSPARENT=Object.freeze(new Ce(0,0,0,0)),xe.fromElements=function(e,t,r){return C(r)?(r.x=e,r.y=t,r):new xe(e,t)},xe.clone=function(e,t){if(C(e))return C(t)?(t.x=e.x,t.y=e.y,t):new xe(e.x,e.y)},xe.fromCartesian3=xe.clone,xe.fromCartesian4=xe.clone,xe.packedLength=2,xe.pack=function(e,t,r){return A.typeOf.object("value",e),A.defined("array",t),r=r??0,t[r++]=e.x,t[r]=e.y,t},xe.unpack=function(e,t,r){return A.defined("array",e),t=t??0,C(r)||(r=new xe),r.x=e[t++],r.y=e[t],r},xe.packArray=function(e,t){A.defined("array",e);const r=e.length,n=2*r;if(C(t)){if(!Array.isArray(t)&&t.length!==n)throw new E("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(let o=0;o<r;++o)xe.pack(e[o],t,2*o);return t},xe.unpackArray=function(e,t){if(A.defined("array",e),A.typeOf.number.greaterThanOrEquals("array.length",e.length,2),e.length%2!=0)throw new E("array length must be a multiple of 2.");const r=e.length;C(t)?t.length=r/2:t=new Array(r/2);for(let n=0;n<r;n+=2){const r=n/2;t[r]=xe.unpack(e,n,t[r])}return t},xe.fromArray=xe.unpack,xe.maximumComponent=function(e){return A.typeOf.object("cartesian",e),Math.max(e.x,e.y)},xe.minimumComponent=function(e){return A.typeOf.object("cartesian",e),Math.min(e.x,e.y)},xe.minimumByComponent=function(e,t,r){return A.typeOf.object("first",e),A.typeOf.object("second",t),A.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r},xe.maximumByComponent=function(e,t,r){return A.typeOf.object("first",e),A.typeOf.object("second",t),A.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r},xe.clamp=function(e,t,r,n){A.typeOf.object("value",e),A.typeOf.object("min",t),A.typeOf.object("max",r),A.typeOf.object("result",n);const o=R.clamp(e.x,t.x,r.x),i=R.clamp(e.y,t.y,r.y);return n.x=o,n.y=i,n},xe.magnitudeSquared=function(e){return A.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y},xe.magnitude=function(e){return Math.sqrt(xe.magnitudeSquared(e))};const Re=new xe;xe.distance=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),xe.subtract(e,t,Re),xe.magnitude(Re)},xe.distanceSquared=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),xe.subtract(e,t,Re),xe.magnitudeSquared(Re)},xe.normalize=function(e,t){A.typeOf.object("cartesian",e),A.typeOf.object("result",t);const r=xe.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,isNaN(t.x)||isNaN(t.y))throw new E("normalized result is not a number");return t},xe.dot=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),e.x*t.x+e.y*t.y},xe.cross=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),e.x*t.y-e.y*t.x},xe.multiplyComponents=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r},xe.divideComponents=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r},xe.add=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r},xe.subtract=function(e,t,r){return A.typeOf.object("left",e),A.typeOf.object("right",t),A.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r},xe.multiplyByScalar=function(e,t,r){return A.typeOf.object("cartesian",e),A.typeOf.number("scalar",t),A.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r},xe.divideByScalar=function(e,t,r){return A.typeOf.object("cartesian",e),A.typeOf.number("scalar",t),A.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r},xe.negate=function(e,t){return A.typeOf.object("cartesian",e),A.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t},xe.abs=function(e,t){return A.typeOf.object("cartesian",e),A.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};const Ie=new xe;xe.lerp=function(e,t,r,n){return A.typeOf.object("start",e),A.typeOf.object("end",t),A.typeOf.number("t",r),A.typeOf.object("result",n),xe.multiplyByScalar(t,r,Ie),n=xe.multiplyByScalar(e,1-r,n),xe.add(Ie,n,n)};const Le=new xe,Te=new xe;xe.angleBetween=function(e,t){return A.typeOf.object("left",e),A.typeOf.object("right",t),xe.normalize(e,Le),xe.normalize(t,Te),R.acosClamped(xe.dot(Le,Te))};const Ne=new xe;function _e(e,t){e=e??0,this._near=e,t=t??Number.MAX_VALUE,this._far=t}xe.mostOrthogonalAxis=function(e,t){A.typeOf.object("cartesian",e),A.typeOf.object("result",t);const r=xe.normalize(e,Ne);return xe.abs(r,r),r.x<=r.y?xe.clone(xe.UNIT_X,t):xe.clone(xe.UNIT_Y,t)},xe.equals=function(e,t){return e===t||C(e)&&C(t)&&e.x===t.x&&e.y===t.y},xe.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},xe.equalsEpsilon=function(e,t,r,n){return e===t||C(e)&&C(t)&&R.equalsEpsilon(e.x,t.x,r,n)&&R.equalsEpsilon(e.y,t.y,r,n)},xe.ZERO=Object.freeze(new xe(0,0)),xe.ONE=Object.freeze(new xe(1,1)),xe.UNIT_X=Object.freeze(new xe(1,0)),xe.UNIT_Y=Object.freeze(new xe(0,1)),xe.prototype.clone=function(e){return xe.clone(this,e)},xe.prototype.equals=function(e){return xe.equals(this,e)},xe.prototype.equalsEpsilon=function(e,t,r){return xe.equalsEpsilon(this,e,t,r)},xe.prototype.toString=function(){return`(${this.x}, ${this.y})`},Object.defineProperties(_e.prototype,{near:{get:function(){return this._near},set:function(e){this._near=e}},far:{get:function(){return this._far},set:function(e){this._far=e}}}),_e.packedLength=2,_e.pack=function(e,t,r){if(!C(e))throw new E("value is required");if(!C(t))throw new E("array is required");return r=r??0,t[r++]=e.near,t[r]=e.far,t},_e.unpack=function(e,t,r){if(!C(e))throw new E("array is required");return t=t??0,C(r)||(r=new _e),r.near=e[t++],r.far=e[t],r},_e.equals=function(e,t){return e===t||C(e)&&C(t)&&e.near===t.near&&e.far===t.far},_e.clone=function(e,t){if(C(e))return C(t)||(t=new _e),t.near=e.near,t.far=e.far,t},_e.prototype.clone=function(e){return _e.clone(this,e)},_e.prototype.equals=function(e){return _e.equals(this,e)};var Me=Object.freeze({NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2,CLAMP_TO_TERRAIN:3,RELATIVE_TO_TERRAIN:4,CLAMP_TO_3D_TILE:5,RELATIVE_TO_3D_TILE:6}),De=Object.freeze({CENTER:0,LEFT:1,RIGHT:-1}),Be=Object.freeze({CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1}),Pe=Object.freeze({FILL:0,OUTLINE:1,FILL_AND_OUTLINE:2});const ve=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ue{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const o=ve[15&r];if(!o)throw new Error("Unrecognized array type.");const[i]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new Ue(s,i,o,e)}constructor(e,t=64,r=Float64Array,n){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const o=ve.indexOf(this.ArrayType),i=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+i+s+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return qe(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:i,nodeSize:s}=this,a=[0,o.length-1,0],f=[];for(;a.length;){const u=a.pop()||0,l=a.pop()||0,c=a.pop()||0;if(l-c<=s){for(let s=c;s<=l;s++){const a=i[2*s],u=i[2*s+1];a>=e&&a<=r&&u>=t&&u<=n&&f.push(o[s])}continue}const h=c+l>>1,p=i[2*h],m=i[2*h+1];p>=e&&p<=r&&m>=t&&m<=n&&f.push(o[h]),(0===u?e<=p:t<=m)&&(a.push(c),a.push(h-1),a.push(1-u)),(0===u?r>=p:n>=m)&&(a.push(h+1),a.push(l),a.push(1-u))}return f}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:i}=this,s=[0,n.length-1,0],a=[],f=r*r;for(;s.length;){const u=s.pop()||0,l=s.pop()||0,c=s.pop()||0;if(l-c<=i){for(let r=c;r<=l;r++)$e(o[2*r],o[2*r+1],e,t)<=f&&a.push(n[r]);continue}const h=c+l>>1,p=o[2*h],m=o[2*h+1];$e(p,m,e,t)<=f&&a.push(n[h]),(0===u?e-r<=p:t-r<=m)&&(s.push(c),s.push(h-1),s.push(1-u)),(0===u?e+r>=p:t+r>=m)&&(s.push(h+1),s.push(l),s.push(1-u))}return a}}function qe(e,t,r,n,o,i){if(o-n<=r)return;const s=n+o>>1;Ge(e,t,s,n,o,i),qe(e,t,r,n,s-1,1-i),qe(e,t,r,s+1,o,1-i)}function Ge(e,t,r,n,o,i){for(;o>n;){if(o-n>600){const s=o-n+1,a=r-n+1,f=Math.log(s),u=.5*Math.exp(2*f/3),l=.5*Math.sqrt(f*u*(s-u)/s)*(a-s/2<0?-1:1);Ge(e,t,r,Math.max(n,Math.floor(r-a*u/s+l)),Math.min(o,Math.floor(r+(s-a)*u/s+l)),i)}const s=t[2*r+i];let a=n,f=o;for(ke(e,t,n,r),t[2*o+i]>s&&ke(e,t,n,o);a<f;){for(ke(e,t,a,f),a++,f--;t[2*a+i]<s;)a++;for(;t[2*f+i]>s;)f--}t[2*n+i]===s?ke(e,t,n,f):(f++,ke(e,t,f,o)),f<=r&&(n=f+1),r<=f&&(o=f-1)}}function ke(e,t,r,n){We(e,r,n),We(t,2*r,2*n),We(t,2*r+1,2*n+1)}function We(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function $e(e,t,r,n){const o=e-r,i=t-n;return o*o+i*i}var He;function Ye(e,t){return toString.call(e)===`[object ${t}]`}function Ve(e){return Ye(e,"String")}function Ke(e){return Ye(e,"Number")}function Ze(e){return void 0!==e}function Qe(e={},t={}){let r;for(r in t)e[r]=t[r];return e}He||(He=1,function(){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(e,t){var r=e[0],n=e[1],o=e[2],i=e[3];n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&o)+t[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&n)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&r)+t[3]-1044525330|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&o)+t[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&n)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&r)+t[7]-45705983|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&o)+t[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&n)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&r)+t[11]-1990404162|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&o)+t[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&n)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&r)+t[15]+1236535329|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[1]-165796510|0)<<5|r>>>27)+n|0)&o|n&~o)+t[6]-1069501632|0)<<9|i>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|o>>>18)+i|0)&r|i&~r)+t[0]-373897302|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[5]-701558691|0)<<5|r>>>27)+n|0)&o|n&~o)+t[10]+38016083|0)<<9|i>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|o>>>18)+i|0)&r|i&~r)+t[4]-405537848|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[9]+568446438|0)<<5|r>>>27)+n|0)&o|n&~o)+t[14]-1019803690|0)<<9|i>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|o>>>18)+i|0)&r|i&~r)+t[8]+1163531501|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&o|n&~o)+t[2]-51403784|0)<<9|i>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&r|i&~r)+t[12]-1926607734|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^o)+t[8]-2022574463|0)<<11|i>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^r)+t[14]-35309556|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^o)+t[4]+1272893353|0)<<11|i>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^r)+t[10]-1094730640|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^o)+t[0]-358537222|0)<<11|i>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^r)+t[6]+76029189|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^o)+t[12]-421815835|0)<<11|i>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^r)+t[2]-995338651|0)<<23|n>>>9)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+o|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function r(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function o(e){var n,o,i,s,a,f,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=u;n+=64)t(l,r(e.substring(n-64,n)));for(o=(e=e.substring(n-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<o;n+=1)i[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(t(l,i),n=0;n<16;n+=1)i[n]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),f=parseInt(s[1],16)||0,i[14]=a,i[15]=f,t(l,i),l}function i(t){var r,n="";for(r=0;r<4;r+=1)n+=e[t>>8*r+4&15]+e[t>>8*r&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=i(e[t]);return e.join("")}function a(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function f(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function u(){this.reset()}s(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,r){var n,o,i,s,a=this.byteLength,f=e(t,a),u=a;return void 0!==r&&(u=e(r,a)),f>u?new ArrayBuffer(0):(n=u-f,o=new ArrayBuffer(n),i=new Uint8Array(o),s=new Uint8Array(this,f,n),i.set(s),o)}}(),u.prototype.append=function(e){return this.appendBinary(a(e)),this},u.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var n,o=this._buff.length;for(n=64;n<=o;n+=64)t(this._hash,r(this._buff.substring(n-64,n)));return this._buff=this._buff.substring(n-64),this},u.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),r=s(this._hash),e&&(r=f(r)),this.reset(),r},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},u.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(e,r){var n,o,i,s=r;if(e[s>>2]|=128<<(s%4<<3),s>55)for(t(this._hash,e),s=0;s<16;s+=1)e[s]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=o,e[15]=i,t(this._hash,e)},u.hash=function(e,t){return u.hashBinary(a(e),t)},u.hashBinary=function(e,t){var r=s(o(e));return t?f(r):r},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(e){var r,o,i,s,a=(o=this._buff.buffer,i=e,(s=new Uint8Array(o.byteLength+i.byteLength)).set(new Uint8Array(o)),s.set(new Uint8Array(i),o.byteLength),s),f=a.length;for(this._length+=e.byteLength,r=64;r<=f;r+=64)t(this._hash,n(a.subarray(r-64,r)));return this._buff=r-64<f?new Uint8Array(a.buffer.slice(r-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=n[t]<<(t%4<<3);return this._finish(i,o),r=s(this._hash),e&&(r=f(r)),this.reset(),r},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var e,t=u.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},u.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e){var t,r=e.length,n=new ArrayBuffer(r),o=new Uint8Array(n);for(t=0;t<r;t+=1)o[t]=e.charCodeAt(t);return o}(e.buff),u.prototype.setState.call(this,e)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(e,r){var o=s(function(e){var r,o,i,s,a,f,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=u;r+=64)t(l,n(e.subarray(r-64,r)));for(o=(e=r-64<u?e.subarray(r-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<o;r+=1)i[r>>2]|=e[r]<<(r%4<<3);if(i[r>>2]|=128<<(r%4<<3),r>55)for(t(l,i),r=0;r<16;r+=1)i[r]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),f=parseInt(s[1],16)||0,i[14]=a,i[15]=f,t(l,i),l}(new Uint8Array(e)));return r?f(o):o}}());class Xe{show=!0;minLevel;maxLevel;weight;scale=1;offset;fontColor="#000";fontFamily="";fontSize=10;backgroundColor;backgroundPadding;outlineColor;outlineAlpha;outlineWidth;imgUrl;imgWidth;imgHeight;labelField="name";filterField;includeValue;excludeValue;near;far;children;get font(){return this.fontSize+"px "+this.fontFamily}constructor(e){e&&this.copyFrom(e)}static fromOption(e){const t={};if(Ke(e.scale)&&(t.scale=e.scale),Ke(e.minLevel)&&(t.minLevel=e.minLevel),Ke(e.maxLevel)&&(t.maxLevel=e.maxLevel),Ke(e.near)&&(t.near=e.near),Ke(e.far)&&(t.far=e.far),Ze(e.fontSize)||Ve(e.fontFamily)){const r=e.fontSize??10,n=e.fontFamily??"";t.font=r+"px "+n}if(e.fontColor&&(t.fillColor=Ce.fromCssColorString(e.fontColor)),Ve(e.backgroundColor)&&(t.showBackground=!0,t.backgroundColor=Ce.fromCssColorString(e.backgroundColor),t.backgroundPadding=new xe(e.backgroundPadding,e.backgroundPadding)),e.outlineColor&&(t.style=Pe.FILL_AND_OUTLINE,t.outlineColor=Ce.fromCssColorString(e.outlineColor).withAlpha(e.outlineAlpha??1),t.outlineWidth=e.outlineWidth??2),e.imgUrl){t.image=e.imgUrl,t.width=e.imgWidth,t.height=e.imgHeight;const r=Ke(e.offset)?e.offset:0;t.pixelOffset=new xe(0,r)}else""===e.imgUrl&&(t.image=void 0);return t}static fromDefaultOption(e){const t={show:!0,style:Pe.FILL,pixelOffset:xe.ZERO,eyeOffset:T.ZERO,horizontalOrigin:De.CENTER,verticalOrigin:Be.CENTER,heightReference:Me.CLAMP_TO_GROUND,distanceDisplayCondition:new _e(0,2e7),disableDepthTestDistance:1e8};if(Ke(e.scale)&&(t.scale=e.scale),Ke(e.minLevel)&&(t.minLevel=e.minLevel),Ke(e.maxLevel)&&(t.maxLevel=e.maxLevel),Ze(e.fontSize)||Ve(e.fontFamily)){const r=e.fontSize??10,n=e.fontFamily??"";t.font=r+"px "+n}if(e.fontColor&&(t.fillColor=Ce.fromCssColorString(e.fontColor)),Ve(e.backgroundColor)&&(t.showBackground=!0,t.backgroundColor=Ce.fromCssColorString(e.backgroundColor),t.backgroundPadding=new xe(e.backgroundPadding,e.backgroundPadding)),e.outlineColor&&(t.style=Pe.FILL_AND_OUTLINE,t.outlineColor=Ce.fromCssColorString(e.outlineColor).withAlpha(e.outlineAlpha??1),t.outlineWidth=e.outlineWidth??2),e.imgUrl){t.image=e.imgUrl,t.width=e.imgWidth,t.height=e.imgHeight;const r=Ke(e.offset)?e.offset:0;t.pixelOffset=new xe(0,r)}else""===e.imgUrl&&(t.image=void 0);return t}clone(){const e=new Xe;return e.show=this.show,e.minLevel=this.minLevel,e.maxLevel=this.maxLevel,e.near=this.near,e.far=this.far,e.weight=this.weight,e.offset=this.offset,this.fontColor&&(e.fontColor=this.fontColor),this.fontSize&&(e.fontSize=this.fontSize),this.fontFamily&&(e.fontFamily=this.fontFamily),e.backgroundColor=this.backgroundColor,e.backgroundPadding=this.backgroundPadding,e.outlineColor=this.outlineColor,e.outlineAlpha=this.outlineAlpha,e.outlineWidth=this.outlineWidth,e.imgUrl=this.imgUrl,e.imgWidth=this.imgWidth,e.imgHeight=this.imgHeight,e.labelField=this.labelField,e.filterField=this.filterField,e.includeValue=this.includeValue,e.excludeValue=this.excludeValue,e.children=this.children?[...this.children]:void 0,e}copyFrom(e){this.show=e.show,this.minLevel=e.minLevel,this.maxLevel=e.maxLevel,this.near=e.near,this.far=e.far,this.weight=e.weight,this.offset=e.offset,e.fontColor&&(this.fontColor=e.fontColor),e.fontSize&&(this.fontSize=e.fontSize),e.fontFamily&&(this.fontFamily=e.fontFamily),this.backgroundColor=e.backgroundColor,this.backgroundPadding=e.backgroundPadding,this.outlineColor=e.outlineColor,this.outlineAlpha=e.outlineAlpha,this.outlineWidth=e.outlineWidth,this.imgUrl=e.imgUrl,this.imgWidth=e.imgWidth,this.imgHeight=e.imgHeight,e.labelField&&(this.labelField=e.labelField),this.filterField=e.filterField,this.includeValue=e.includeValue,this.excludeValue=e.excludeValue,this.children=e.children?[...e.children]:void 0}getLabelOption(){const e={show:!0,font:this.font,fillColor:Ce.fromCssColorString(this.fontColor),style:Pe.FILL,scale:this.scale,pixelOffset:xe.ZERO,eyeOffset:T.ZERO,horizontalOrigin:De.CENTER,verticalOrigin:Be.CENTER,heightReference:Me.CLAMP_TO_GROUND,distanceDisplayCondition:new _e(0,2e7),disableDepthTestDistance:1e8};Ke(this.weight)&&(e.eyeOffset=new T(0,0,-100*this.weight)),this.backgroundColor&&(e.showBackground=!0,e.backgroundColor=Ce.fromCssColorString(this.backgroundColor),e.backgroundPadding=new xe(this.backgroundPadding??7,this.backgroundPadding??5)),this.outlineColor&&(e.style=Pe.FILL_AND_OUTLINE,e.outlineColor=Ce.fromCssColorString(this.outlineColor).withAlpha(this.outlineAlpha??1),e.outlineWidth=this.outlineWidth??2);let t=0;return Ke(this.offset)&&(t=this.offset,e.pixelOffset=new xe(0,t)),this.imgUrl&&(e.image=this.imgUrl,e.width=this.imgWidth,e.height=this.imgHeight),e}getBillboardOption(){return this.imgUrl?{image:this.imgUrl,width:this.imgWidth,height:this.imgHeight}:{}}}let Je=new Map,et=new Map;function tt(e,t){if(t&&t.length>0){let r,n;const o=t.length;for(let i=0;i<o;i++){const o=t[i];if(o&&o.includeValue===e){n=o.fontSize,r=r?Qe(r,Xe.fromOption(o)):Xe.fromOption(o);break}}return{childOptions:r,childFontSize:n}}}function rt(e,t){return!(e.x>t.x+t.width||t.x>e.x+e.width||e.y>t.y+t.height||t.y>e.y+e.height)}f(Object.freeze({__proto__:null,cancelPromise:function(e){et.set(e,!0)},checkRectangleNoIntersect:function(e,t,r){const n=Je.get(e);if(!n)return!1;const o=n.idRectMap;let i=!1;for(let[s,a]of o)if(a&&(i=rt(a,t),i))break;return i||o.set(r,t),i},clear:function(e){if(Je.has(e)){const t=Je.get(e);t&&(t.ptList.length=0,t.indexKDB.data=null,t.idRectMap.clear(),t.baseLabelOptions=void 0,Je.delete(e))}},deleteLabelRectangle:function(e,t){const r=Je.get(e);if(!r)return!1;const n=r.idRectMap;return!!n&&n.delete(t)},filterByBounds:function(e,t,r){if(!t||!Je.has(e))return;const n=Je.get(e);if(!n)return;et.set(e,!1);const o=R.toDegrees(t.west),i=R.toDegrees(t.east),s=R.toDegrees(t.north),a=R.toDegrees(t.south),f=n.indexKDB.range(o,a,i,s);if(et.get(e))throw f.length=0,new Error("0");if(null!=r){const t=f.length,o=[];for(let i=0;i<t;i++){if(et.get(e))throw o.length=0,f.length=0,new Error("0");const t=f[i],s=n.ptList[t];null!=s.minZoom&&s.maxZoom?r>=s.minZoom&&r<=s.maxZoom&&o.push(t):o.push(t)}return f.length=0,o}return f},getFilterPointsList:function(e,t){if(!Je.has(e))return;const r=Je.get(e);if(!r)return;const n=[],o=t.length;for(let i=0;i<o;i++){const e=t[i],o=r.ptList[e];n.push(o)}return n},getLabelEntities:function(e,t){if(!Je.has(e))return;const r=Je.get(e);if(!r)return;const n=r.baseLabelOptions,o=[],i=t.length;for(let s=0;s<i;s++){const e=t[s],i=r.ptList[e];let a=n;i.childOptions&&(a=Qe({...n},i.childOptions));const f=i.position,u={labelOption:void 0,billboardOption:void 0};if(a.image){const t={id:e,show:!0,position:f,disableDepthTestDistance:Number.POSITIVE_INFINITY,image:a.image,width:a.width,height:a.height};u.billboardOption=t,delete a.image,delete a.width,delete a.height}const l=i.name;u.labelOption={position:f,text:l,id:e,...a},o.push(u)}return o},getLabelPointList:function(e,t){if(!Je.has(e))return;const r=Je.get(e);return r?t.map((e=>r.ptList[e])):void 0},isOverlapping:rt,isPointOnFrontOfGlobe:function(e,t){return!(T.distance(e,t)>6371e3)},loadLabelPoints:async function(e,t,r){if(!e||Je.has(e))return;const n=await fetch(t);let o=await n.json();if(!o)return;const i=o.features;let s=r.minLevel??1,a=r.maxLevel??18;const f=r.labelField,u=r.filterField??f,l=function(e){const t=Xe.fromDefaultOption(e);let r;return Ve(e.excludeValue)&&(r=e.excludeValue.split(",")),{baseLabelOptions:t,exclude:r}}(r),c=l.exclude,h=1.2*(r.fontSize??12),p=r.children;if(i){const t=i.length,r=new Ue(t),n=new Array;for(let e=0;e<t;e++){const t=i[e],o=t.properties;if(o){const i=o[f],l=o[u],m=o.minl,y=o.maxl,d=t.geometry.coordinates;let g,b=h;if(c&&c.indexOf(l)>=0){const e=tt(i,p);e&&(e.childFontSize&&(b=1.2*e.childFontSize),e.childOptions&&(g=e.childOptions))}const O={id:e,name:i,minZoom:m,maxZoom:y,position:T.fromDegrees(d[0],d[1]),textWidth:b*i.length,textHeight:b,childOptions:g};r.add(d[0],d[1]),n.push(O),Ke(m)&&m<s&&(s=m),Ke(y)&&y>a&&(a=y)}}return r.finish(),Je.set(e,{indexKDB:r,ptList:n,baseLabelOptions:l.baseLabelOptions,exclude:l.exclude,idRectMap:new Map}),i.length=0,o=void 0,{min:s,max:a}}}}));
