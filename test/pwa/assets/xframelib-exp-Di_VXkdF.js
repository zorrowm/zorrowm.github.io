var e,t,n,r,i,o,s,a,l,c,u,h,f,d,p,g,m,v,y,w,b,S,C,E,k,x,_,A,T,M,L,I,R,D,O,z,B,W,N,F,j,U,P,H,q,$,X,G,V,K,Y=Object.defineProperty,J=e=>{throw TypeError(e)},Z=(e,t,n)=>((e,t,n)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),Q=(e,t,n)=>t.has(e)||J("Cannot "+n),ee=(e,t,n)=>(Q(e,t,"read from private field"),n?n.call(e):t.get(e)),te=(e,t,n)=>t.has(e)?J("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ne=(e,t,n,r)=>(Q(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),re=(e,t,n)=>(Q(e,t,"access private method"),n),ie=(e,t,n,r)=>({set _(r){ne(e,t,r,n)},get _(){return ee(e,t,r)}});import{by as oe,g as se,bz as ae,bA as le,bB as ce,bs as ue}from"./vendor-Cf1_rMTi.js";import{d as he,w as fe,e as de,C as pe,o as ge,r as me,a as ve,g as ye,f as we,k as be,A as Se,v as Ce,m as Ee,p as ke,i as xe,u as _e,O as Ae,H as Te,N as Me,T as Le,V as Ie,t as Re,j as De,aa as Oe,I as ze,F as Be,B as We,q as Ne,z as Fe,ai as je,aj as Ue,K as Pe,n as He,G as qe}from"./@vue-exp-DqB3u2UM.js";import{a as $e}from"./axios-exp-DKFWaZHT.js";import{I as Xe}from"./@iconify/vue-exp-BGURBw_G.js";import{H as Ge,L as Ve}from"./@microsoft/signalr-exp-DcGFeIh9.js";function Ke(e){return{all:e=e||new Map,on(t,n){const r=e.get(t);r?r.push(n):e.set(t,[n])},off(t,n){const r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit(t,n){let r=e.get(t);r&&r.slice().map((e=>{e(n)})),r=e.get("*"),r&&r.slice().map((e=>{e(t,n)}))}}}const Ye=Ke();var Je="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==se?se:"undefined"!=typeof self?self:{};function Ze(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qe,et,tt,nt,rt={exports:{}},it=(Qe||(Qe=1,tt=rt.exports,nt=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},o=null;function s(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply||Function.prototype.apply.apply(console.log,[console,arguments])),console.trace}function l(){for(var n=this.getLevel(),i=0;i<r.length;i++){var o=r[i];this[o]=i<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(r,i,o){return"debug"===(l=r)&&(l="log"),typeof console!==t&&("trace"===l&&n?a:void 0!==console[l]?s(console,l):void 0!==console.log?s(console,"log"):e)||c.apply(this,arguments);var l}function h(e,n){var s,a,c,h=this,f="loglevel";function d(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(o){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(f),i=n.indexOf(r+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i+r.length+1))[1])}catch(o){}return void 0===h.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==h.levels[t.toUpperCase()]&&(t=h.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=h.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),h.name=e,h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=n||u,h.getLevel=function(){return null!=c?c:null!=a?a:s},h.setLevel=function(e,n){return c=p(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{return void(window.localStorage[f]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch(i){}}}(c),l.call(h)},h.setDefaultLevel=function(e){a=p(e),d()||h.setLevel(e,!1)},h.resetLevel=function(){c=null,function(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),l.call(h)},h.enableAll=function(e){h.setLevel(h.levels.TRACE,e)},h.disableAll=function(e){h.setLevel(h.levels.SILENT,e)},h.rebuild=function(){if(o!==h&&(s=p(o.getLevel())),l.call(h),o===h)for(var e in i)i[e].rebuild()},s=p(o?o.getLevel():"WARN");var g=d();null!=g&&(c=p(g)),l.call(h)}(o=new h).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new h(e,o.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=f),o},o.getLoggers=function(){return i},o.default=o,o},(et=rt).exports?et.exports=nt():tt.log=nt()),rt.exports);const ot={HproseServiceErrorEvent:"HproseServiceError",WebAPIErrorEvent:"WebAPIError",AlertInfoEvent:"AlertInfoEvent",CommonWarnEvent:"CommonWarnEvent",WidgetLoadedEvent:"WidgetLoaded",WidgetUnLoadedEvent:"WidgetUnLoaded",WidgetLoadedErrorEvent:"WidgetLoadedError",WidgetVisibleChanged:"WidgetVisibleChanged",AxiosRequestErrorEvent:"AxiosRequestErrorEvent",LayoutContainerLoaded:"LayoutContainerLoaded",ModalContainerWidget_LoadModal:"ModalContainerWidget_LoadModal",ModalContainerWidget_CloseModal:"ModalContainerWidget_CloseModal"};class st{message;eventBus;constructor(e,t=void 0){e&&(this.message=e),t&&(this.eventBus=t)}msg(e,t=3,n="success"){if(this.message)if("function"==typeof this.message)this.message({type:n,message:e,duration:t});else switch(n){case"info":this.message.info(e,t);break;case"success":this.message.success(e,t);break;case"warning":this.message.warn?this.message.warn(e,t):this.message.warning&&this.message.warning(e,t);break;case"error":this.message.error(e,t)}else{switch(n){case"info":case"success":case"warning":break;case"error":n="dark"}this.eventBus&&this.eventBus.emit(ot.AlertInfoEvent,{type:n,info:e})}}info(e,t=3){this.msg(e,t,"info")}warn(e,t=3){this.msg(e,t,"warning")}err(e,t=3){this.msg(e,t,"error")}success(e,t=3){this.msg(e,t,"success")}}let at=globalThis.SysConfig,lt=!1,ct=!1;Function.prototype.promise=function(...e){const t=this;return function(){const n=e||[];return new Promise(((r,i)=>{n.push((function(e,t){e?i(e):r(t)})),t.apply(t,e)}))}()};const ut={Config:globalThis.SysConfig,EventBus:Ye,DefaultProxyClient:null,Axios:$e,Message:new st(void 0,Ye),LayoutMap:new Map,getLayoutManager:e=>{if(!ft.WidgetConfigList||0===ft.WidgetConfigList.length)return;const t=ft.WidgetConfigList.find((t=>t.id===e));if(t){const e=t.layoutID;if(e&&ft.LayoutMap.has(e))return ft.LayoutMap.get(e)}},Logger:e=>{lt||(at.UI.ProductLog?it.enableAll():it.setDefaultLevel("warn"),lt=!0);const t=e||"default";return it.getLogger(t)},Loading:(e="end")=>{if("end"===e)setTimeout((()=>{document.getElementById("apploading")?.remove()}),300),ct=!0;else if(e)if(ct){const t=`加载Widget：${e}……`;Ye.emit("statusmessage",t)}else{const t=document.getElementById("app-loading-info");t&&(t.innerHTML=`正在加载：${e}……`)}}},ht="99,111,110,115,116,32,118,97,108,105,100,75,101,121,115,61,91,39,54,65,50,53,51,65,69,70,54,54,68,48,69,56,65,66,57,54,49,55,49,55,51,49,50,52,50,66,65,70,53,65,39,44,39,66,54,53,48,52,57,53,55,54,55,49,49,56,66,50,70,50,50,48,55,67,66,52,69,70,51,49,51,52,49,65,68,39,44,39,54,66,52,66,57,49,65,67,52,51,56,70,70,57,69,54,65,69,52,68,49,49,70,48,50,70,56,51,50,68,51,52,39,44,39,70,54,69,52,57,50,52,57,57,69,70,57,57,48,65,49,50,66,57,66,57,55,48,66,54,57,68,69,68,49,48,70,39,44,39,57,67,55,55,56,67,66,69,66,56,54,51,70,68,68,52,70,49,66,65,51,56,49,52,50,69,48,52,53,53,69,49,39,44,39,70,66,66,55,57,67,57,66,51,57,53,70,65,70,55,49,53,56,50,50,65,70,52,50,52,57,54,56,70,48,54,67,39,44,39,53,57,51,66,67,70,68,50,54,70,48,53,53,53,65,53,50,57,51,67,68,49,49,56,55,49,56,53,49,68,52,52,39,44,39,50,48,54,55,69,66,51,54,57,55,69,55,49,67,53,49,53,68,68,68,54,49,65,53,52,70,67,57,51,53,53,69,39,44,39,70,52,65,50,68,67,69,65,48,53,56,69,68,52,55,48,53,67,67,52,70,54,69,66,51,70,67,70,48,66,53,66,39,93,59,105,102,40,83,121,115,67,111,110,102,105,103,46,75,69,89,38,38,118,97,108,105,100,75,101,121,115,46,105,110,100,101,120,79,102,40,83,121,115,67,111,110,102,105,103,46,75,69,89,41,62,61,48,41,123,99,111,110,115,111,108,101,46,108,111,103,40,39,117,115,105,110,103,32,97,117,116,104,111,114,105,122,101,100,32,120,102,114,97,109,101,108,105,98,46,84,104,97,110,107,32,121,111,117,33,39,41,59,114,101,116,117,114,110,32,103,108,111,98,79,98,106,125,101,108,115,101,32,105,102,40,33,83,121,115,67,111,110,102,105,103,46,75,69,89,41,123,105,102,40,110,101,119,32,68,97,116,101,40,50,48,50,55,44,49,44,49,41,60,110,101,119,32,68,97,116,101,40,41,41,123,105,102,40,99,111,110,102,105,114,109,40,39,84,104,101,32,88,70,114,97,109,101,108,105,98,32,116,114,105,97,108,32,104,97,115,32,101,120,112,105,114,101,100,46,32,84,111,32,112,117,114,99,104,97,115,101,32,97,32,102,117,108,108,32,118,101,114,115,105,111,110,32,112,108,101,97,115,101,32,99,111,110,116,97,99,116,58,122,111,114,114,111,119,109,64,49,50,54,46,99,111,109,46,32,83,101,108,101,99,116,32,79,75,32,116,111,32,110,97,118,105,103,97,116,101,32,116,111,32,116,104,101,32,103,105,116,104,117,98,46,99,111,109,47,122,111,114,114,111,119,109,32,85,82,76,46,39,41,41,123,108,111,99,97,116,105,111,110,46,104,114,101,102,61,39,104,116,116,112,115,58,47,47,103,105,116,104,117,98,46,99,111,109,47,122,111,114,114,111,119,109,39,125,101,108,115,101,123,116,104,114,111,119,39,84,104,101,32,116,114,105,97,108,32,112,101,114,105,111,100,32,104,97,115,32,101,120,112,105,114,101,100,33,39,59,125,125,101,108,115,101,123,99,111,110,115,111,108,101,46,108,111,103,40,39,84,104,101,32,116,114,105,97,108,32,100,101,97,100,108,105,110,101,32,102,111,114,32,116,104,105,115,32,120,102,114,97,109,101,108,105,98,32,108,105,98,114,97,114,121,32,105,115,32,74,97,110,117,97,114,121,32,49,44,32,50,48,50,55,46,39,41,59,114,101,116,117,114,110,32,103,108,111,98,79,98,106,125,125,116,104,114,111,119,39,84,104,101,32,88,70,114,97,109,101,108,105,98,32,75,69,89,32,105,115,32,105,110,118,97,108,105,100,33,32,84,111,32,112,117,114,99,104,97,115,101,32,97,32,102,117,108,108,32,118,101,114,115,105,111,110,32,112,108,101,97,115,101,32,99,111,110,116,97,99,116,58,122,111,114,114,111,119,109,64,49,50,54,46,99,111,109,32,33,39,59".split(",").map((e=>Number(e)));new Function("globObj","isdev",String.fromCharCode(...ht));const ft=ut;var dt=(e=>(e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.centerBack=2]="centerBack",e[e.centerMain=3]="centerMain",e[e.centerFront=4]="centerFront",e[e.left=5]="left",e[e.right=6]="right",e))(dt||{});const pt=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},gt=pt(he({name:"SuspenseWithError",setup(){const e=me(null);return Ue((t=>(e.value="当前页面存在问题，无法渲染……",!0))),{error:e}}}),[["render",function(e,t,n,r,i,o){return e.error?xe(e.$slots,"error",{key:0},(()=>[Ne(Fe(e.error),1)])):(ye(),de(je,{key:1},{default:we((()=>[xe(e.$slots,"default")])),fallback:we((()=>[xe(e.$slots,"fallback",{},(()=>[t[0]||(t[0]=ke("div",null,"加载中……",-1))]))])),_:3}))}]]),mt=he({name:"RouterTransition",__name:"RouterTransition",setup:e=>(e,t)=>{const n=Re("router-view");return ye(),de(gt,null,{default:we((()=>[De(n,null,{default:we((({Component:e,route:t})=>[(ye(),de(Oe,null,[t.meta.keepAlive?(ye(),de(ze(e),{key:t.name})):Se("",!0)],1024)),t.meta.keepAlive?Se("",!0):(ye(),de(ze(e),{key:t.name}))])),_:1})])),_:1})}}),vt=Object.prototype.toString;function yt(e,t){return vt.call(e)===`[object ${t}]`}const wt=e=>null!=e&&null!==e&&yt(e,"Object");function bt(e){return yt(e,"Number")}function St(e){return yt(e,"String")}function Ct(e){return e&&Array.isArray(e)}const Et=e=>/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(e);function kt(e){return/^\s*[{[]/.test(String(e))}class xt{static toHump(e){return e.replace(/[\-\/\_](\w)/g,((e,t)=>t.toUpperCase())).replace("views","")}static getFileName(e){const t=e.lastIndexOf("/")+1;let n=e.substring(t);return n=decodeURI(n.split("?")[0]),n}static UpperFirst(e){return(e=e.toLowerCase()).replace(/\b\w|\s\w/g,(e=>e.toUpperCase()))}}Z(xt,"isNullOrEmpty",(e=>null===e||""===e||void 0===e||0===e.length)),Z(xt,"isNotEmpty",(e=>null!==e&&""!==e&&void 0!==e&&0!==e.length));const _t=class e{hproseURL;client;hproseProxy;constructor(t){if(t&&!xt.isNullOrEmpty(t)){if(e.httpTransport||(e.httpTransport=new ce.HttpTransport),this.client=new ae.Client(t),!this.client)throw Error("Hprose Client初始化错误");this.hproseURL=t,this.init()}}init(){this.client&&this.client.useServiceAsync().then((e=>{this.hproseProxy=e})).catch((e=>{String(e).indexOf("find this method ~")>0?this.hproseProxy=this.client?.useService():Ye.emit(ot.HproseServiceErrorEvent,"初始化默认Hprose!")}))}async getProxy(){if(!this.hproseProxy)try{this.client&&(this.hproseProxy=await this.client.useServiceAsync())}catch(et){this.hproseProxy=this.client?.useService()}return this.hproseProxy}async invoke(e,t,n){if(this.client)return await this.client.invoke(e,t,n)}encode(e,t,n){return this.client?this.client.codec.encode(e,t,n):void 0}decode(e,t){return this.client?this.client.codec.decode(e,t):void 0}};Z(_t,"httpTransport");let At=_t;class Tt{constructor(e="",t=globalThis.localStorage){this.prefixKey=e,this.storage=t}getKey(e){return`${this.prefixKey}${e}`.toUpperCase()}set(e,t,n=604800){const r=JSON.stringify({value:t,expire:null!==n?(new Date).getTime()+1e3*n:null});this.storage.setItem(this.getKey(e),r)}get(e,t=null){const n=this.storage.getItem(this.getKey(e));if(n)try{const t=JSON.parse(n),{value:r,expire:i}=t;if(null===i||i>=Date.now())return r;this.remove(this.getKey(e))}catch(r){return t}return t}getJsonObject(e){const t=this.storage.getItem(this.getKey(e));if(t)try{const n=JSON.parse(t);if(null===n.expire||n.expire>=Date.now())return n;this.remove(this.getKey(e))}catch(n){return}}remove(e){this.storage.removeItem(this.getKey(e))}clear(){this.storage.clear()}setCookie(e,t,n=604800){document.cookie=`${this.getKey(e)}=${t}; Max-Age=${n}`}getCookie(e){const t=document.cookie.split("; ");for(let n=0,r=t.length;n<r;n++){const r=t[n].split("=");if(r[0]===this.getKey(e))return r[1]}return""}removeCookie(e){this.setCookie(e,1,-1)}clearCookie(){const e=document.cookie.match(/[^ =;]+(?==)/g);if(e)for(let t=e.length;t--;)document.cookie=e[t]+"=0;expire="+new Date(0).toUTCString()}}const Mt="access_token",Lt=new Tt("user",globalThis.localStorage);function It(){return Lt.get(Mt)}function Rt(){Lt.remove(Mt)}class Dt{hproseClient;hpProxyObj;defaultContext=new ae.ClientContext;constructor(e){this.hproseClient=new At(e),this.hpProxyObj=null}getClientContext(e,t){const n={};t&&(n.requestHeaders=t),n.httpRequestHeaders=e||{};const r=n.httpRequestHeaders,i=It();return i&&(r.token=i.token),ft.SystemID&&(r.sysid=ft.SystemID,ft.SystemGroup&&(r.sysgroup=ft.SystemGroup)),new ae.ClientContext(n)}async getHproseProxy(){if(!this.hproseClient)throw new Error("HproseClient对象为构建，无法调用Hprose方法");if(!this.hpProxyObj){const e=await this.hproseClient.getProxy();this.hpProxyObj=e}return this.hpProxyObj||Ye.emit(ot.HproseServiceErrorEvent,"HproseProxy对象为空，无法调用Hprose方法！"),this.hpProxyObj}async hproseInvoke(e,t,n){if(!this.hproseClient)throw new Error("HproseClient对象为构建，无法调用Hprose方法");return await this.hproseClient.invoke(e,t,n)}async hproseInvokeContext(e,t,...n){if(!this.hproseClient)throw new Error("HproseClient对象为构建，无法调用Hprose方法");const r=It();return r&&(t||(t=new ae.ClientContext({httpRequestHeaders:{token:r.token}}))),await this.hproseClient.invoke(e,n,t)}async hproseInvokeEncode(e){const t=new oe.ByteStream(e).toBytes(),n=await(this.hproseClient.client?.request(t,this.defaultContext));return n?this.hproseClient.client?.codec.decode(n,this.defaultContext):n}encodeRequest(e,...t){const n=this.hproseClient.client?.codec,r=n?.encode(e,t,this.defaultContext);return oe.ByteStream.toString(r)}}var Ot,zt={exports:{}},Bt=(Ot||(Ot=1,zt.exports=function(){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var r,i,o,s,a,l,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=c;r+=64)t(u,n(e.substring(r-64,r)));for(i=(e=e.substring(r-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)o[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(t(u,o),r=0;r<16;r+=1)o[r]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),l=parseInt(s[1],16)||0,o[14]=a,o[15]=l,t(u,o),u}function o(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function a(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return s(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,n){var r,i,o,s,a=this.byteLength,l=e(t,a),c=a;return void 0!==n&&(c=e(n,a)),l>c?new ArrayBuffer(0):(r=c-l,i=new ArrayBuffer(r),o=new Uint8Array(i),s=new Uint8Array(this,l,r),o.set(s),i)}}(),c.prototype.append=function(e){return this.appendBinary(a(e)),this},c.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r,i=this._buff.length;for(r=64;r<=i;r+=64)t(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},c.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=l(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(e,n){var r,i,o,s=n;if(e[s>>2]|=128<<(s%4<<3),s>55)for(t(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,t(this._hash,e)},c.hash=function(e,t){return c.hashBinary(a(e),t)},c.hashBinary=function(e,t){var n=s(i(e));return t?l(n):n},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(e){var n,i,o,s,a=(i=this._buff.buffer,o=e,(s=new Uint8Array(i.byteLength+o.byteLength)).set(new Uint8Array(i)),s.set(new Uint8Array(o),i.byteLength),s),l=a.length;for(this._length+=e.byteLength,n=64;n<=l;n+=64)t(this._hash,r(a.subarray(n-64,n)));return this._buff=n-64<l?new Uint8Array(a.buffer.slice(n-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=l(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var e,t=c.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},c.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e){var t,n=e.length,r=new ArrayBuffer(n),i=new Uint8Array(r);for(t=0;t<n;t+=1)i[t]=e.charCodeAt(t);return i}(e.buff),c.prototype.setState.call(this,e)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(e,n){var i=s(function(e){var n,i,o,s,a,l,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=c;n+=64)t(u,r(e.subarray(n-64,n)));for(i=(e=n-64<c?e.subarray(n-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)o[n>>2]|=e[n]<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(u,o),n=0;n<16;n+=1)o[n]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),l=parseInt(s[1],16)||0,o[14]=a,o[15]=l,t(u,o),u}(new Uint8Array(e)));return n?l(i):i},c}()),zt.exports);const Wt=Ze(Bt),Nt=[];let Ft;const jt=class e{static addHandler(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}static removeHandler(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]}static windowResizeHandler(t){e.addHandler(window,"resize",t)}static offWindowResizeHandler(t){e.removeHandler(window,"resize",t)}static fullscreenEnabled(){const e=globalThis.document;return document.fullscreenEnabled||window.fullScreen||e.mozFullscreenEnabled||e.webkitIsFullScreen}static fullScreen(e,t){if(t){const e=globalThis.document;let t=globalThis.document.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitCancelFullScreen;if(void 0!==t&&t)t.call(globalThis.document);else if(void 0!==window.ActiveXObject){let e=new window.ActiveXObject("WScript.Shell");null!=e&&e.SendKeys("{F11}")}}else{let t=e;t||(t=globalThis.document.documentElement);let n=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(void 0!==n&&n)n.call(t);else if(void 0!==window.ActiveXObject){let e=new window.ActiveXObject("WScript.Shell");null!=e&&e.SendKeys("{F11}")}}}static requestFullScreen(e=globalThis.document.documentElement){let t=e;var n=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(n)n.call(t);else if(void 0!==window.ActiveXObject){var r=new window.ActiveXObject("WScript.Shell");null!==r&&r.SendKeys("{F11}")}}static exitFullScreen(){const e=globalThis.document;var t=document.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.webkitExitFullscreen;if(t)t.call(document);else if(void 0!==window.ActiveXObject){var n=new window.ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}static fullScreenElement(){return globalThis.document.fullscreenElement||globalThis.document.webkitFullscreenElement||globalThis.document.mozFullscreenElement||globalThis.document.msFullscreenElement}static isFullScreen(){return!!e.fullScreenElement()}static onFullScreenChanged(t){let n;"onfullscreenchange"in globalThis.document?n="fullscreenchange":"onwebkitfullscreenchange"in globalThis.document?n="webkitfullscreenchange":"onmozfullscreenchange"in globalThis.document&&(n="mozfullscreenchange"),n?document.addEventListener(n,(function(){const n=e.isFullScreen();t(n)})):document.addEventListener("MSFullscreenChange",(function(){const n=e.isFullScreen();t(n)}))}static stringifyCircularHandler(e,t){if("object"==typeof t&&null!==t){if(-1!==Nt.indexOf(t))return;Nt.push(t)}return t}static jsonStringify(t){if(!t)return"";const n=JSON.stringify(t,e.stringifyCircularHandler);return Nt.length=0,n}static jsonParse(t){const n=e.jsonStringify(t);if(n.length>1)return JSON.parse(n)}static getObjectURL(e){let t;const n=window;return null!=n.createObjcectURL?t=n.createOjcectURL(e):null!=globalThis.URL?t=globalThis.URL.createObjectURL(e):null!=globalThis.webkitURL&&(t=globalThis.webkitURL.createObjectURL(e)),t}static getFileShortMD5(e,t){const n=File.prototype,r=n.slice||n.mozSlice||n.webkitSlice,i=e,o=new Wt.ArrayBuffer,s=new FileReader;s.onload=function(e){o.append(e.target?.result);const n=o.end(!1);t({isOK:!0,data:n})},s.onerror=function(){t({isOK:!1,data:"计算文件简单摘要错误！"})},function(){const e=2097152>=i.size?i.size:2097152;s.readAsArrayBuffer(r.call(i,0,e))}()}static getFileMD5(e,t){const n=File.prototype,r=n.slice||n.mozSlice||n.webkitSlice,i=e,o=2097152,s=Math.ceil(i.size/o);let a=0;const l=new Wt.ArrayBuffer,c=new FileReader;function u(){const e=a*o,t=e+o>=i.size?i.size:e+o;c.readAsArrayBuffer(r.call(i,e,t))}c.onload=function(e){if(l.append(e.target?.result),a++,a<s)u();else{const e=l.end(!1);t({isOK:!0,data:e})}},c.onerror=function(){const e=`${i.name}:计算文件简单摘要错误！`;t({isOK:!1,data:e})},u()}static MD5(e,t=!1){return Wt.hash(e,t)}static copyTextByCommand(e){return new Promise(((t,n)=>{const r=document.createElement("input");r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),r.remove(),t(!0)}))}static copyElementTextByCommand(e){const t=document.createRange();t.selectNode(document.getElementById(e));const n=globalThis.getSelection();n.rangeCount>0&&n.removeAllRanges(),n.addRange(t);try{return document.execCommand("copy"),n.removeRange(t),!0}catch(r){return n.removeRange(t),!1}}static copyElementText(t){if(!navigator.clipboard)return e.copyElementTextByCommand(t);const n=document.createRange();n.selectNode(document.getElementById(t));const r=globalThis.getSelection();return r.rangeCount>0&&r.removeAllRanges(),r.addRange(n),navigator.clipboard.writeText(r).then((function(){return r.removeRange(n),!0}),(function(e){return r.removeRange(n),!1}))}static setGrayMode(t){e.toggleClass(t,"grayMode",document.documentElement)}static toggleClass(e,t,n){const r=n||document.body;let{className:i}=r;i=i.replace(t,""),r.className=e?`${i} ${t} `:i}static setCssVar(e,t,n=document.documentElement){n.style.setProperty(e,t)}static dispatchWindowResize(){const e=new Event("resize");globalThis.dispatchEvent(e)}static dispatchElementEvent(e,t="click",n){let r;if(r=St(e)?document.getElementById(e):e,r){const e=new Event(t,{bubbles:!0,cancelable:!0});n&&r.addEventListener("ev",(e=>{n(e)}),!1),r.dispatchEvent(e)}}static getRandomNum(e,t){var n=t-e,r=Math.random();return e+Math.round(r*n)}static merge(e={},t={}){let n,r,i,o;for(e||(e={}),r=0,i=t.length;r<i;r++)for(n in o=t[r],o)e[n]=o[n];return e}static setOptions(e,t){e.hasOwnProperty("options")||(e.options=e.options?Object.create(e.options):{});for(let n in t)e.options[n]=t[n];return e.options}static formatNum(e,t){let n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}static trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}static splitWords(e){return this.trim(e).split(/\s+/)}static emptyImageUrl(){return"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}static debounce(e,t){let n=null;return function(){n&&clearTimeout(n),n=setTimeout(e,t)}}static throttle(e,t){let n=!0;return function(){if(!n)return!1;n=!1,setTimeout((()=>{e(),n=!0}),t)}}static dataURLtoBlob(e){let t=e.split(",");if(!t||0===t.length)return;let n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}static getElement(e){return"string"==typeof e?document.getElementById(e):e}static getStyle(e,t){let n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){let r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}static create(e,t,n){let r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}static removeElement(e){let t=e.parentNode;t&&t.removeChild(e)}static emptyElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)}static hasClass(e,t){if(void 0!==e.classList)return e.classList.contains(t);let n=this.getClass(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}static addClass(e,t){if(void 0!==e.classList){let n=this.splitWords(t);for(let t=0,r=n.length;t<r;t++)e.classList.add(n[t])}else if(!this.hasClass(e,t)){let n=this.getClass(e);this.setClass(e,(n?n+" ":"")+t)}}static removeClass(e,t){void 0!==e.classList?e.classList.remove(t):this.setClass(e,this.trim((" "+this.getClass(e)+" ").replace(" "+t+" "," ")))}static setClass(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}static getClass(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}static createSvgElement(e,t,n,r){let i=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");i.setAttribute("class","svg-path"),i.setAttribute("width",e),i.setAttribute("height",t),i.setAttribute("viewBox",`0 0 ${e} ${t}`);let o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",n),i.appendChild(o),r&&r.appendChild(i),i}static parseDom(e,t=!0,n=""){t=t??!1;let r=document.createElement("div");return r.className=n||"",r.innerHTML=e,t?r:r.childNodes}static createVideoHTML(e,t,n){let r=this.create("video",t,n),i=this.create("source","",r);i.setAttribute("src",e),i.setAttribute("type","video/map4");let o=this.create("source","",r);return o.setAttribute("src",e),o.setAttribute("type","video/quicktime"),r}static readFilePromise(e,t="ArrayBuffer",n="UTF-8"){return new Promise(((r,i)=>{const o=new FileReader;switch(t){case"ArrayBuffer":o.readAsArrayBuffer(e);break;case"Text":o.readAsText(e,n);break;case"BinaryString":o.readAsBinaryString(e);break;case"DataURL":case"FileBytes":o.readAsDataURL(e)}o.onload=function(){if(o.result)if("FileBytes"===t){const e=o.result,t=e.indexOf("64,"),n=e.substring(t+3);r(n)}else r(o.result);else i(o)},o.onerror=function(){i(o)}}))}static readFileBytes(e){return this.readFilePromise(e,"FileBytes")}static promisify(e,...t){return function(){return new Promise(((n,r)=>{t.push((function(e,t){e?r(e):n(t)})),e.apply(this,t)}))}}static wait(e){return new Promise((t=>setTimeout(t,e)))}static blockEvent(e){e.preventDefault(),e.stopPropagation()}static bindDropFileHanlder(t,n){if(!t)throw Error("传入Element对象不能为空！");let r;if(St(t)){let e=document.getElementById(t);if(e)r=e;else{const n=document.getElementsByClassName(t);if(!n||0==n.length)throw Error("未找到对应id或类名的HtmlElement对象！");e=n[0],r=e}}else{if(!(e=>vt.call(e).startsWith("[object HTML")&&!!e.tagName)(t))throw Error("ele参数只能为string 或 Element对象！");r=t}r&&(r.addEventListener("dragenter",this.blockEvent,!1),r.addEventListener("dragover",this.blockEvent,!1),r.addEventListener("drop",(function(t){e.blockEvent(t),n(t.dataTransfer.files)}),!1))}static getInputElement(){var e=document.activeElement;return!e||"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName&&"true"!=e.contentEditable?null:e}static guessPasteTextToFileName(e,t){let n,r=t;return St(e)?r=(kt(e)?"json":function(e){return e.includes("<kml ")&&e.includes('xmlns="http://www.opengis.net/kml/')}(e)&&"kml")||"text":(wt(e)&&e.type||Ct(e))&&(r="json"),"text"==r?n="pasted.txt":"kml"==r?n="pasted.kml":"json"==r&&(n="pasted.json"),n}static pasteEventHanlder(e,t){const n=this;if(n.getInputElement())return;n.blockEvent(e);const r=e.clipboardData,i=Array.from(r.types||[]).join(","),o=Array.from(r.items||[]);let s;if(i.includes("text/plain")){const e=r.getData("text/plain");if(":"===e[1])return t(e);if(Et(e))return t(e);const i=n.guessPasteTextToFileName(e);if(!i||"pasted.txt"===i)return t(e);{const t=new Blob([e]);s=[new File([t],i)]}}else s=o.map((function(e){return"file"==e.kind?e.getAsFile():null}));s=s.filter(Boolean),s.length?t(s):t(void 0)}static onPasteHandler(t,n=document){const r=this;Ft=e=>{r.pasteEventHanlder(e,t)},e.addHandler(n,"paste",Ft)}static offPasteHandler(t=document){Ft&&e.removeHandler(t,"paste",Ft)}static loadScript(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.head.appendChild(t)}static loadJsCode(e){var t=document.createElement("script");t.type="text/javascript";try{t.appendChild(document.createTextNode(e))}catch(nt){t.text=e}document.body.appendChild(t)}static deepCopy(e){return structuredClone(e)}};Z(jt,"copyText",(e=>navigator.clipboard?navigator.clipboard.writeText(e).then((function(){return!0}),(function(e){return!1})):jt.copyTextByCommand(e)));let Ut=jt;const Pt=function(e,t,n){ft.Config?.ServiceURL&&ft.Config?.ServiceURL.DefaultHproseAPI&&(ft.Config.DefaultHproseAPI=ft.Config?.ServiceURL.DefaultHproseAPI,ft.DefaultProxyClient=new Dt(ft.Config?.ServiceURL.DefaultHproseAPI));const r=ft.Config.UI.GrayMode;r&&Ut.setGrayMode(r);const i=new st(e,ft.EventBus);ft.Message=i,ft.SystemID=t,ft.SystemGroup=n,ft.EventBus.on(ot.HproseServiceErrorEvent,(e=>{})),ft.EventBus.on(ot.WebAPIErrorEvent,(e=>{})),ft.EventBus.on(ot.AxiosRequestErrorEvent,(e=>{e.code,e.message})),ft.EventBus.on(ot.CommonWarnEvent,(e=>{i.warn(e)}))};class Ht{constructor(e,t,n,r){if(this.layoutState=e,this._LayoutID=t,this._mapItemRefs=r,ft.RightWidgetConfigMap){const e=ft.RightWidgetConfigMap.get(t);e&&e.forEach((e=>{if(this.widgetConfigDiction.set(e.id,e),e.afterid)if(this.preConditionMap.has(e.afterid))this.preConditionMap.get(e.afterid)?.add(e);else{const t=new Set;t.add(e),this.preConditionMap.set(e.afterid,t)}}))}else{const e=ft.WidgetConfigList??n;e&&e.forEach((e=>{if(e.layoutID===t&&(this.widgetConfigDiction.set(e.id,e),e.afterid))if(this.preConditionMap.has(e.afterid))this.preConditionMap.get(e.afterid)?.add(e);else{const t=new Set;t.add(e),this.preConditionMap.set(e.afterid,t)}}))}}layoutMap=new Map;preConditionMap=new Map;widgetsLoadedSet=new Set;widgetConfigDiction=new Map;_LayoutID;_mapItemRefs;getLayoutID(){return this._LayoutID}getWidgetConfigMap(){return this.widgetConfigDiction}preloadWidgets(){if(this.widgetConfigDiction.size>0)for(const[e,t]of this.widgetConfigDiction)t.preload&&!t.afterid&&this._loadWidget(t)}async loadWidget(e){if(!e)return;let t;if(wt(e)?t=e:St(e)&&(t=this.widgetConfigDiction.get(e)),t){if(t.afterid){if(this.isWidgetLoaded(t.afterid))return this._loadWidget(t);{let e=function(t){t.layoutID===n._LayoutID&&t.widgetID===r&&(n._loadWidget(i),ft.EventBus.off(ot.WidgetLoadedEvent,e))};const n=this,r=t.afterid,i=t;return ft.EventBus.on(ot.WidgetLoadedEvent,e),this.loadWidget(t.afterid)}}return this._loadWidget(t)}}loadOtherDependenceWidgets(e){if(this.preConditionMap.has(e)){const t=this.preConditionMap.get(e);t?.forEach((e=>{e.preload&&this._loadWidget(e)}))}}_loadWidget(e){if(!this.widgetsLoadedSet.has(e.id))return e.component?e.component().then((t=>{if(t.default){const n=Pe(t.default);n.id=e.id,e.layout&&(n.style=e.layout),e.cssClass&&(n.cssClass=e.cssClass),e.layoutID&&(n.layoutID=e.layoutID),e.label&&(n.label=e.label),e.jsURL&&(n.jsURL=e.jsURL),e.cssURL&&(n.cssURL=e.cssURL),this.getContainerComponents(e.container).value.set(e.id,n),this.widgetsLoadedSet.add(e.id),He().then((()=>{ft.EventBus.emit(ot.WidgetLoadedEvent,{layoutID:this._LayoutID,widgetID:e.id}),this.loadOtherDependenceWidgets(e.id)}))}})).catch((t=>{ft.Logger().error("加载Widget失败！",e,t),ft.EventBus.emit(ot.WidgetLoadedErrorEvent,e)})):void 0;this.changeWidgetVisible(e.id,!0)}hasDependentWidgets(e){let t=!1;if(this.preConditionMap.has(e)){const n=this.preConditionMap.get(e);if(n)for(const e of n)if(this.isWidgetLoaded(e.id)){t=!0;break}}return t}unloadWidget(e){if(!e)return;if(!this.isWidgetLoaded(e))return;const t=this.widgetConfigDiction.get(e);if(t){if(this.preConditionMap.has(e)){const t=this.preConditionMap.get(e);if(t)for(const e of t)this.unloadWidget(e.id)}this.getContainerComponents(t.container).value.delete(e),this.widgetsLoadedSet.delete(e),this._mapItemRefs&&this._mapItemRefs.delete(e),ft.EventBus.emit(ot.WidgetUnLoadedEvent,{layoutID:this._LayoutID,widgetID:e})}}isWidgetLoaded(e){return this.widgetsLoadedSet.has(e)}splitTwoContainer(e=!1){const t=this.layoutState.centerMainContainer.value,n=this.layoutState.centerBackContainer.value;e?(t&&(t.style.left="0",t.style.width="100%"),n&&(n.style.width="100%")):(t&&(t.style.left="50%",t.style.width="50%"),n&&(n.style.width="50%"))}getLayoutContainer(e){switch(e){case dt.top:return this.layoutState.topContainer.value;case dt.bottom:return this.layoutState.bottomContainer.value;case dt.left:return this.layoutState.leftContainer.value;case dt.right:return this.layoutState.rightContainer.value;case dt.centerBack:return this.layoutState.centerBackContainer.value;case dt.centerMain:return this.layoutState.centerMainContainer.value;case dt.centerFront:return this.layoutState.centerFrontContainer.value}}changeContainerVisible(e,t=!1){const n=this.getLayoutContainer(e);n&&(n.style.visibility=t?"visible":"hidden")}changeWidgetVisible(e,t=!1){const n=this.getWidgetComponent(e);n&&n.changeVisible&&n.changeVisible(t)}isWidgetVisible(e){const t=this.getWidgetComponent(e);return!!t&&(!t.isShow||t.isShow.value)}getWidgetComponent(e){if(this.widgetsLoadedSet.has(e)&&this._mapItemRefs)return this._mapItemRefs.get(e)}getWigetItem(e){return this.widgetConfigDiction.get(e)}getGroupWigetItems(e){const t=[];for(const[n,r]of this.widgetConfigDiction)r.group===e&&t.push(r);return t}getContainerComponents(e){if(this.layoutMap.has(e))return this.layoutMap.get(e);{const t=me(new Map);return this.layoutMap.set(e,t),t}}getWidgetLoadedIDList(){const e=[];return this.widgetsLoadedSet.forEach((t=>{e.push(t)})),e}unloadAllWidgets(e){const t=[];this.widgetsLoadedSet.forEach((n=>{e&&e.length>0?e.findIndex((e=>e===n))<0&&t.push(n):t.push(n)})),t.forEach((e=>this.unloadWidget(e)))}unloadWidgets(e){e&&e.length>0&&e.forEach((e=>{this.unloadWidget(e)}))}static getLayoutManager(e,t){if(t){const n=t.find((t=>t.id===e));if(n&&n.layoutID)return ft.LayoutMap.get(n.layoutID)}}dispose(){this.unloadAllWidgets(),this.widgetConfigDiction.clear(),this.widgetsLoadedSet.clear(),this._LayoutID?ft.LayoutMap.delete(this._LayoutID):(ft.LayoutMap.delete(""),ft.LayoutManager=void 0)}}const qt=["id"],$t=pt(he({__name:"layout",props:{widgetConfig:{type:Array,required:!1,default:void 0},layoutID:{type:String,default:"layoutDefault"},layoutStyle:{type:Object},noLeft:{type:Boolean,default:!1},noRight:{type:Boolean,default:!1},noBottom:{type:Boolean,default:!1},noTop:{type:Boolean,default:!1},noFront:{type:Boolean,default:!1},noBack:{type:Boolean,default:!1},noMain:{type:Boolean,default:!1}},emits:["containerLoaded"],setup(e,{emit:t}){const n=e,r=t,i=n.layoutID,o=me(i),s=me(),a=me(),l=me(),c=me(),u=me(),h=me(),f=me(),d=Ie({top:!n.noTop,main:!n.noMain,back:!n.noBack,front:!n.noFront,left:!n.noLeft,right:!n.noRight,bottom:!n.noBottom});fe((()=>n.noTop),(e=>{d.top=!e})),fe((()=>n.noMain),(e=>{d.main=!e})),fe((()=>n.noBack),(e=>{d.back=!e})),fe((()=>n.noFront),(e=>{d.front=!e})),fe((()=>n.noLeft),(e=>{d.left=!e})),fe((()=>n.noRight),(e=>{d.right=!e})),fe((()=>n.noBottom),(e=>{d.bottom=!e}));const p=new Map,g=(e,t)=>{e&&p.set(t,e)},m=new Ht({topContainer:s,centerBackContainer:a,centerMainContainer:l,centerFrontContainer:c,bottomContainer:u,leftContainer:h,rightContainer:f},i,n.widgetConfig,p);function v(e){return m?.getContainerComponents(e).value}const y=void 0,w=pe((()=>d.top?v(dt.top):y)),b=pe((()=>d.back?v(dt.centerBack):y)),S=pe((()=>d.front?v(dt.centerFront):y)),C=pe((()=>d.left?v(dt.left):y)),E=pe((()=>d.right?v(dt.right):y)),k=pe((()=>d.bottom?v(dt.bottom):y)),x=pe((()=>n.layoutStyle));return ge((()=>{m&&(i?ft.LayoutMap.set(i,m):(ft.LayoutManager=m,ft.LayoutMap.set("",m)),r("containerLoaded",{layoutID:i,layoutManager:m}),ft.EventBus.emit(ot.LayoutContainerLoaded,{layoutID:i,layoutManager:m}),m.preloadWidgets())})),ve((()=>{m&&m.dispose()})),(e,t)=>(ye(),Ee("div",{id:o.value,class:"layoutContainer",style:Te(x.value)},[d.top?(ye(),Ee("div",{key:0,ref_key:"topContainer",ref:s,class:"topContainer"},[xe(e.$slots,"top",{},void 0,!0),(ye(!0),Ee(Be,null,We(w.value,(([e,t])=>(ye(),de(ze(t),{ref_for:!0,ref:t=>g(t,e),key:e,style:Te(t.style),class:Me(t.cssClass)},null,8,["style","class"])))),128))],512)):Se("",!0),ke("div",null,[d.main?(ye(),Ee("div",{key:0,ref_key:"centerMainContainer",ref:l,class:"centerdiv mainContainer"},[xe(e.$slots,"main",{},(()=>[De(mt)]),!0)],512)):Se("",!0),d.back?(ye(),Ee("div",{key:1,ref_key:"centerBackContainer",ref:a,class:"centerdiv backContainer"},[xe(e.$slots,"back",{},void 0,!0),(ye(!0),Ee(Be,null,We(b.value,(([e,t])=>(ye(),de(ze(t),{ref_for:!0,ref:t=>g(t,e),key:e,style:Te(t.style),class:Me(t.cssClass)},null,8,["style","class"])))),128))],512)):Se("",!0),d.front?(ye(),Ee("div",{key:2,ref_key:"centerFrontContainer",ref:c,class:"centerdiv centerFrontContainer"},[xe(e.$slots,"front",{},void 0,!0),(ye(!0),Ee(Be,null,We(S.value,(([e,t])=>(ye(),de(ze(t),{ref_for:!0,ref:t=>g(t,e),key:e,style:Te(t.style),class:Me(t.cssClass)},null,8,["style","class"])))),128))],512)):Se("",!0),d.left?(ye(),Ee("div",{key:3,ref_key:"leftContainer",ref:h,class:"leftContainer"},[xe(e.$slots,"left",{},void 0,!0),(ye(!0),Ee(Be,null,We(C.value,(([e,t])=>(ye(),de(ze(t),{ref_for:!0,ref:t=>g(t,e),key:e,style:Te(t.style),class:Me(t.cssClass)},null,8,["style","class"])))),128))],512)):Se("",!0),d.right?(ye(),Ee("div",{key:4,ref_key:"rightContainer",ref:f,class:"rightContainer"},[xe(e.$slots,"right",{},void 0,!0),(ye(!0),Ee(Be,null,We(E.value,(([e,t])=>(ye(),de(ze(t),{ref_for:!0,ref:t=>g(t,e),key:e,style:Te(t.style),class:Me(t.cssClass)},null,8,["style","class"])))),128))],512)):Se("",!0)]),d.bottom?(ye(),Ee("div",{key:1,ref_key:"bottomContainer",ref:u,class:"bottomContainer"},[xe(e.$slots,"bottom",{},void 0,!0),(ye(!0),Ee(Be,null,We(k.value,(([e,t])=>(ye(),de(ze(t),{ref_for:!0,ref:t=>g(t,e),key:e,style:Te(t.style),class:Me(t.cssClass)},null,8,["style","class"])))),128))],512)):Se("",!0),xe(e.$slots,"default",{},void 0,!0)],12,qt))}}),[["__scopeId","data-v-982ca474"]]);function Xt(){let e=[];const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var n=0;n<36;n++){const r=Math.floor(16*Math.random());e[n]=t.substring(r,r+1)}e[14]="4";const r=3&Number(e[19])|8;return e[19]=t.substring(r,r+1),e[8]=e[13]=e[18]=e[23]="-",e.join("").toLowerCase()}var Gt={},Vt=Uint8Array,Kt=Uint16Array,Yt=Int32Array,Jt=new Vt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zt=new Vt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Qt=new Vt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),en=function(e,t){for(var n=new Kt(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Yt(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},tn=en(Jt,2),nn=tn.b,rn=tn.r;nn[28]=258,rn[258]=28;for(var on=en(Zt,0),sn=on.b,an=on.r,ln=new Kt(32768),cn=0;cn<32768;++cn){var un=(43690&cn)>>1|(21845&cn)<<1;un=(61680&(un=(52428&un)>>2|(13107&un)<<2))>>4|(3855&un)<<4,ln[cn]=((65280&un)>>8|(255&un)<<8)>>1}var hn=function(e,t,n){for(var r=e.length,i=0,o=new Kt(t);i<r;++i)e[i]&&++o[e[i]-1];var s,a=new Kt(t);for(i=1;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;if(n){s=new Kt(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=a[e[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)s[ln[h]>>l]=c}else for(s=new Kt(r),i=0;i<r;++i)e[i]&&(s[i]=ln[a[e[i]-1]++]>>15-e[i]);return s},fn=new Vt(288);for(cn=0;cn<144;++cn)fn[cn]=8;for(cn=144;cn<256;++cn)fn[cn]=9;for(cn=256;cn<280;++cn)fn[cn]=7;for(cn=280;cn<288;++cn)fn[cn]=8;var dn=new Vt(32);for(cn=0;cn<32;++cn)dn[cn]=5;var pn=hn(fn,9,0),gn=hn(fn,9,1),mn=hn(dn,5,0),vn=hn(dn,5,1),yn=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},wn=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},bn=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Sn=function(e){return(e+7)/8|0},Cn=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new Vt(e.subarray(t,n))},En=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kn=function(e,t,n){var r=new Error(t||En[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,kn),!n)throw r;return r},xn=function(e,t,n,r){var i=e.length,o=r?r.length:0;if(!i||t.f&&!t.l)return n||new Vt(0);var s=!n,a=s||2!=t.i,l=t.i;s&&(n=new Vt(3*i));var c=function(e){var t=n.length;if(e>t){var r=new Vt(Math.max(2*t,e));r.set(n),n=r}},u=t.f||0,h=t.p||0,f=t.b||0,d=t.l,p=t.d,g=t.m,m=t.n,v=8*i;do{if(!d){u=wn(e,h,1);var y=wn(e,h+1,3);if(h+=3,!y){var w=e[(L=Sn(h)+4)-4]|e[L-3]<<8,b=L+w;if(b>i){l&&kn(0);break}a&&c(f+w),n.set(e.subarray(L,b),f),t.b=f+=w,t.p=h=8*b,t.f=u;continue}if(1==y)d=gn,p=vn,g=9,m=5;else if(2==y){var S=wn(e,h,31)+257,C=wn(e,h+10,15)+4,E=S+wn(e,h+5,31)+1;h+=14;for(var k=new Vt(E),x=new Vt(19),_=0;_<C;++_)x[Qt[_]]=wn(e,h+3*_,7);h+=3*C;var A=yn(x),T=(1<<A)-1,M=hn(x,A,1);for(_=0;_<E;){var L,I=M[wn(e,h,T)];if(h+=15&I,(L=I>>4)<16)k[_++]=L;else{var R=0,D=0;for(16==L?(D=3+wn(e,h,3),h+=2,R=k[_-1]):17==L?(D=3+wn(e,h,7),h+=3):18==L&&(D=11+wn(e,h,127),h+=7);D--;)k[_++]=R}}var O=k.subarray(0,S),z=k.subarray(S);g=yn(O),m=yn(z),d=hn(O,g,1),p=hn(z,m,1)}else kn(1);if(h>v){l&&kn(0);break}}a&&c(f+131072);for(var B=(1<<g)-1,W=(1<<m)-1,N=h;;N=h){var F=(R=d[bn(e,h)&B])>>4;if((h+=15&R)>v){l&&kn(0);break}if(R||kn(2),F<256)n[f++]=F;else{if(256==F){N=h,d=null;break}var j=F-254;if(F>264){var U=Jt[_=F-257];j=wn(e,h,(1<<U)-1)+nn[_],h+=U}var P=p[bn(e,h)&W],H=P>>4;if(P||kn(3),h+=15&P,z=sn[H],H>3&&(U=Zt[H],z+=bn(e,h)&(1<<U)-1,h+=U),h>v){l&&kn(0);break}a&&c(f+131072);var q=f+j;if(f<z){var $=o-z,X=Math.min(z,q);for($+f<0&&kn(3);f<X;++f)n[f]=r[$+f]}for(;f<q;++f)n[f]=n[f-z]}}t.l=d,t.p=N,t.b=f,t.f=u,d&&(u=1,t.m=g,t.d=p,t.n=m)}while(!u);return f!=n.length&&s?Cn(n,0,f):n.subarray(0,f)},_n=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},An=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Tn=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:zn,l:0};if(1==i){var s=new Vt(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=o[0].s;for(r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var d=new Kt(f+1),p=Mn(n[u-1],d,0);if(p>t){r=0;var g=0,m=p-t,v=1<<m;for(o.sort((function(e,t){return d[t.s]-d[e.s]||e.f-t.f}));r<i;++r){var y=o[r].s;if(!(d[y]>t))break;g+=v-(1<<p-d[y]),d[y]=t}for(g>>=m;g>0;){var w=o[r].s;d[w]<t?g-=1<<t-d[w]++-1:++r}for(;r>=0&&g;--r){var b=o[r].s;d[b]==t&&(--d[b],++g)}p=t}return{t:new Vt(d),l:p}},Mn=function(e,t,n){return-1==e.s?Math.max(Mn(e.l,t,n+1),Mn(e.r,t,n+1)):t[e.s]=n},Ln=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Kt(++t),r=0,i=e[0],o=1,s=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return{c:n.subarray(0,r),n:t}},In=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Rn=function(e,t,n){var r=n.length,i=Sn(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},Dn=function(e,t,n,r,i,o,s,a,l,c,u){_n(t,u++,n),++i[256];for(var h=Tn(i,15),f=h.t,d=h.l,p=Tn(o,15),g=p.t,m=p.l,v=Ln(f),y=v.c,w=v.n,b=Ln(g),S=b.c,C=b.n,E=new Kt(19),k=0;k<y.length;++k)++E[31&y[k]];for(k=0;k<S.length;++k)++E[31&S[k]];for(var x=Tn(E,7),_=x.t,A=x.l,T=19;T>4&&!_[Qt[T-1]];--T);var M,L,I,R,D=c+5<<3,O=In(i,fn)+In(o,dn)+s,z=In(i,f)+In(o,g)+s+14+3*T+In(E,_)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&D<=O&&D<=z)return Rn(t,u,e.subarray(l,l+c));if(_n(t,u,1+(z<O)),u+=2,z<O){M=hn(f,d,0),L=f,I=hn(g,m,0),R=g;var B=hn(_,A,0);for(_n(t,u,w-257),_n(t,u+5,C-1),_n(t,u+10,T-4),u+=14,k=0;k<T;++k)_n(t,u+3*k,_[Qt[k]]);u+=3*T;for(var W=[y,S],N=0;N<2;++N){var F=W[N];for(k=0;k<F.length;++k){var j=31&F[k];_n(t,u,B[j]),u+=_[j],j>15&&(_n(t,u,F[k]>>5&127),u+=F[k]>>12)}}}else M=pn,L=fn,I=mn,R=dn;for(k=0;k<a;++k){var U=r[k];if(U>255){An(t,u,M[257+(j=U>>18&31)]),u+=L[j+257],j>7&&(_n(t,u,U>>23&31),u+=Jt[j]);var P=31&U;An(t,u,I[P]),u+=R[P],P>3&&(An(t,u,U>>5&8191),u+=Zt[P])}else An(t,u,M[U]),u+=L[U]}return An(t,u,M[256]),u+L[256]},On=new Yt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),zn=new Vt(0),Bn=function(e,t,n,r,i,o){var s=o.z||e.length,a=new Vt(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=o.l,u=7&(o.r||0);if(t){u&&(l[0]=o.r>>3);for(var h=On[t-1],f=h>>13,d=8191&h,p=(1<<n)-1,g=o.p||new Kt(32768),m=o.h||new Kt(p+1),v=Math.ceil(n/3),y=2*v,w=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<y)&p},b=new Yt(25e3),S=new Kt(288),C=new Kt(32),E=0,k=0,x=o.i||0,_=0,A=o.w||0,T=0;x+2<s;++x){var M=w(x),L=32767&x,I=m[M];if(g[L]=I,m[M]=L,A<=x){var R=s-x;if((E>7e3||_>24576)&&(R>423||!c)){u=Dn(e,l,0,b,S,C,k,_,T,x-T,u),_=E=k=0,T=x;for(var D=0;D<286;++D)S[D]=0;for(D=0;D<30;++D)C[D]=0}var O=2,z=0,B=d,W=L-I&32767;if(R>2&&M==w(x-W))for(var N=Math.min(f,R)-1,F=Math.min(32767,x),j=Math.min(258,R);W<=F&&--B&&L!=I;){if(e[x+O]==e[x+O-W]){for(var U=0;U<j&&e[x+U]==e[x+U-W];++U);if(U>O){if(O=U,z=W,U>N)break;var P=Math.min(W,U-2),H=0;for(D=0;D<P;++D){var q=x-W+D&32767,$=q-g[q]&32767;$>H&&(H=$,I=q)}}}W+=(L=I)-(I=g[L])&32767}if(z){b[_++]=268435456|rn[O]<<18|an[z];var X=31&rn[O],G=31&an[z];k+=Jt[X]+Zt[G],++S[257+X],++C[G],A=x+O,++E}else b[_++]=e[x],++S[e[x]]}}for(x=Math.max(x,A);x<s;++x)b[_++]=e[x],++S[e[x]];u=Dn(e,l,c,b,S,C,k,_,T,x-T,u),c||(o.r=7&u|l[u/8|0]<<3,u-=7,o.h=m,o.p=g,o.i=x,o.w=A)}else{for(x=o.w||0;x<s+c;x+=65535){var V=x+65535;V>=s&&(l[u/8|0]=c,V=s),u=Rn(l,u+1,e.subarray(x,V))}o.i=s}return Cn(a,0,r+Sn(u)+i)},Wn=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),Nn=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Wn[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},Fn=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),s=new Vt(o.length+e.length);s.set(o),s.set(e,o.length),e=s,i.w=o.length}return Bn(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,i)},jn=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Un=function(e,t,n){for(var r=e(),i=e.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<r.length;++s){var a=r[s],l=o[s];if("function"==typeof a){t+=";"+l+"=";var c=a.toString();if(a.prototype)if(-1!=c.indexOf("[native code]")){var u=c.indexOf(" ",8)+1;t+=c.slice(u,c.indexOf("(",u))}else for(var h in t+=c,a.prototype)t+=";"+l+".prototype."+h+"="+a.prototype[h].toString();else t+=c}else n[l]=a}return t},Pn=[],Hn=function(){return[Vt,Kt,Yt,Jt,Zt,Qt,nn,sn,gn,vn,ln,En,hn,yn,wn,bn,Sn,Cn,kn,xn,Qn,$n,Xn]},qn=function(){return[Vt,Kt,Yt,Jt,Zt,Qt,rn,an,pn,fn,mn,dn,ln,On,zn,hn,_n,An,Tn,Mn,Ln,In,Rn,Dn,Sn,Cn,Bn,Fn,Zn,$n]},$n=function(e){return postMessage(e,[e.buffer])},Xn=function(e){return e&&{out:e.size&&new Vt(e.size),dictionary:e.dictionary}},Gn=function(e,t,n,r,i,o){var s=function(e,t,n){if(!Pn[n]){for(var r="",i={},a=e.length-1,l=0;l<a;++l)r=Un(e[l],r,i);Pn[n]={c:Un(e[a],r,i),e:i}}var c,u,h,f,d,p,g=jn({},Pn[n].e);return c=Pn[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",u=n,h=g,f=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(g),d=function(e,t){s.terminate(),o(e,t)},(p=new Worker(Gt[u]||(Gt[u]=URL.createObjectURL(new Blob([c+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))))).onmessage=function(e){var t=e.data,n=t.$e$;if(n){var r=new Error(n[0]);r.code=n[1],r.stack=n[2],d(r,null)}else d(null,t)},p.postMessage(h,f),p}(n,r,i);return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},Vn=function(e,t){return e[t]|e[t+1]<<8},Kn=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Yn=function(e,t){return Kn(e,t)+4294967296*Kn(e,t+4)},Jn=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Zn(e,t){return Fn(e,t||{},0,0)}function Qn(e,t){return xn(e,{i:2},t&&t.out,t&&t.dictionary)}var er=function(e,t,n,r){for(var i in e){var o=e[i],s=t+i,a=r;Array.isArray(o)&&(a=jn(r,o[1]),o=o[0]),o instanceof Vt?n[s]=[o,a]:(n[s+="/"]=[new Vt(0),a],er(o,s,n,r))}},tr="undefined"!=typeof TextEncoder&&new TextEncoder,nr="undefined"!=typeof TextDecoder&&new TextDecoder;try{nr.decode(zn,{stream:!0})}catch(et){}function rr(e,t){if(tr)return tr.encode(e);for(var n=e.length,r=new Vt(e.length+(e.length>>1)),i=0,o=function(e){r[i++]=e},s=0;s<n;++s){if(i+5>r.length){var a=new Vt(i+8+(n-s<<1));a.set(r),r=a}var l=e.charCodeAt(s);l<128||t?o(l):l<2048?(o(192|l>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|63&l)):(o(224|l>>12),o(128|l>>6&63),o(128|63&l))}return Cn(r,0,i)}var ir=function(e,t){return t+30+Vn(e,t+26)+Vn(e,t+28)},or=function(e,t,n){var r=Vn(e,t+28),i=function(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(nr)return nr.decode(e);var i=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return{s:t,r:Cn(e,n-1)};i?3==i?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&i?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}}(e),o=i.s;return(n=i.r).length&&kn(8),o}(e.subarray(t+46,t+46+r),!(2048&Vn(e,t+8))),o=t+46+r,s=Kn(e,t+20),a=n&&4294967295==s?sr(e,o):[s,Kn(e,t+24),Kn(e,t+42)],l=a[0],c=a[1],u=a[2];return[Vn(e,t+10),l,c,i,o+Vn(e,t+30)+Vn(e,t+32),u]},sr=function(e,t){for(;1!=Vn(e,t);t+=4+Vn(e,t+2));return[Yn(e,t+12),Yn(e,t+4),Yn(e,t+20)]},ar=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;r>65535&&kn(9),t+=r+4}return t},lr=function(e,t,n,r,i,o,s,a){var l=r.length,c=n.extra,u=a&&a.length,h=ar(c);Jn(e,t,null!=s?33639248:67324752),t+=4,null!=s&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(o<0&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var f=new Date(null==n.mtime?Date.now():n.mtime),d=f.getFullYear()-1980;if((d<0||d>119)&&kn(10),Jn(e,t,d<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>1),t+=4,-1!=o&&(Jn(e,t,n.crc),Jn(e,t+4,o<0?-o-2:o),Jn(e,t+8,n.size)),Jn(e,t+12,l),Jn(e,t+14,h),t+=16,null!=s&&(Jn(e,t,u),Jn(e,t+6,n.attrs),Jn(e,t+10,s),t+=14),e.set(r,t),t+=l,h)for(var p in c){var g=c[p],m=g.length;Jn(e,t,+p),Jn(e,t+2,m),e.set(g,t+4),t+=4+m}return u&&(e.set(a,t),t+=u),t},cr=function(e,t,n,r,i){Jn(e,t,101010256),Jn(e,t+8,n),Jn(e,t+10,n),Jn(e,t+12,r),Jn(e,t+16,i)},ur="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(e){e()};function hr(e){var t,n={filename:"",directory:"",basename:"",extension:""},r=-1==(t=e).indexOf("/")&&-1!=t.indexOf("\\")?"\\":"/",i=e.split(r),o=i.pop(),s=/\.([a-z][a-z0-9]*)$/i,a=s.test(o)?s.exec(o)[0]:"";return a||o.includes("*")?(n.filename=o,n.extension=a?a.slice(1):"",n.basename=o.slice(0,o.length-a.length),n.directory=i.join(r)):n.directory=o?e:i.join(r),n}const fr=(e,t)=>{dr(e,t)};function dr(e,t){const n=globalThis.URL||globalThis.webkitURL||window,r=new Blob([e]),i=n.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),n.revokeObjectURL(i),setTimeout((function(){n.revokeObjectURL(i),document.body.removeChild(o)}),400)}const pr=(e,t)=>{const n=JSON.stringify(e,null,2);t?fr(n,t+".json"):Ye.emit(ot.CommonWarnEvent,"参数JsonID不能为空！")},gr=(e,t,n)=>{e.get(t,{responseType:"blob"}).then((function(e){fr(e.data,n)})).catch((e=>{Ye.emit(ot.CommonWarnEvent,"下载文件报错！")}))};class mr{static runningInBrowser(){return"undefined"!=typeof window&&void 0!==globalThis.document}static encodeGBK(e){const t=ue.encode(e,"ISO-8859-1");return ue.decode(t,"gbk")}static async saveZipFromFiles(e,t){const n=[];for(let r=0;r<t.length;r++){const e=t[r],i=e.name,o=await Ut.readFilePromise(e,"ArrayBuffer"),s=new Uint8Array(o);n.push({filename:i,content:s})}n.length>0&&mr.zipAsync(n,(function(t,n){if(t)throw t;dr(new Blob([n]),e)}))}static saveZipFile(e,t){mr.zipAsync(t,(function(t,n){if(t)throw t;dr(new Blob([n]),e)}))}static saveZipFileSync(e,t){const n=mr.zipSync(t);return!!n&&(dr(new Blob([n]),e),!0)}static unzipSync(e){let t;if(t=e instanceof ArrayBuffer?new Uint8Array(e):e,!mr.runningInBrowser())return;const n=function(e,t){for(var n={},r=e.length-22;101010256!=Kn(e,r);--r)(!r||e.length-r>65558)&&kn(13);var i=Vn(e,r+8);if(!i)return{};var o=Kn(e,r+16),s=4294967295==o||65535==i;if(s){var a=Kn(e,r-12);(s=101075792==Kn(e,a))&&(i=Kn(e,a+32),o=Kn(e,a+48))}for(var l=t&&t.filter,c=0;c<i;++c){var u=or(e,o,s),h=u[0],f=u[1],d=u[2],p=u[3],g=u[4],m=u[5],v=ir(e,m);o=g,l&&!l({name:p,size:f,originalSize:d,compression:h})||(h?8==h?n[p]=Qn(e.subarray(v,v+f),{out:new Vt(d)}):kn(14,"unknown compression type "+h):n[p]=Cn(e,v,v+f))}return n}(t,{filter:mr.fflateFilter});return mr.fflatePostprocess(n)}static async readZipFromFile(e){const t={content:await Ut.readFilePromise(e,"ArrayBuffer"),name:e.name};return mr.readZipFile(t)}static async readZipFile(e){const t=await mr.unzipAsync.promise(e.content);return Object.keys(t).reduce((function(e,n){return e.push({filename:n,content:t[n]}),e}),[])}static unzipAsync(e,t){if(!mr.runningInBrowser())throw new Error("Async unzipping only supported in the browser");let n;n=e instanceof ArrayBuffer?new Uint8Array(e):e,function(e,t,n){n||(n=t,t={}),"function"!=typeof n&&kn(7);var r=[],i=function(){for(var e=0;e<r.length;++e)r[e]()},o={},s=function(e,t){ur((function(){n(e,t)}))};ur((function(){s=n}));for(var a=e.length-22;101010256!=Kn(e,a);--a)if(!a||e.length-a>65558)return s(kn(13,0,1),null),i;var l=Vn(e,a+8);if(l){var c=l,u=Kn(e,a+16),h=4294967295==u||65535==c;if(h){var f=Kn(e,a-12);(h=101075792==Kn(e,f))&&(c=l=Kn(e,f+32),u=Kn(e,f+48))}for(var d=t&&t.filter,p=function(t){var n=or(e,u,h),a=n[0],c=n[1],f=n[2],p=n[3],g=n[4],m=n[5],v=ir(e,m);u=g;var y,w,b,S=function(e,t){e?(i(),s(e,null)):(t&&(o[p]=t),--l||s(null,o))};if(!d||d({name:p,size:c,originalSize:f,compression:a}))if(a)if(8==a){var C=e.subarray(v,v+c);if(f<524288||c>.8*f)try{S(null,Qn(C,{out:new Vt(f)}))}catch(y){S(y,null)}else r.push((y=C,w={size:f},(b=S)||(b=w,w={}),"function"!=typeof b&&kn(7),Gn(y,w,[Hn],(function(e){return $n(Qn(e.data[0],Xn(e.data[1])))}),1,b)))}else S(kn(14,"unknown compression type "+a,1),null);else S(null,Cn(e,v,v+c));else S(null,null)},g=0;g<c;++g)p()}else s(null,{})}(n,{filter:mr.fflateFilter},(function(e,n){e&&t(e),t(null,mr.fflatePostprocess(n))}))}static zipSync(e){if(!mr.runningInBrowser())throw new Error("Async zipping only supported in the browser");return function(e,t){t||(t={});var n={},r=[];er(e,"",n,t);var i=0,o=0;for(var s in n){var a=n[s],l=a[0],c=a[1],u=0==c.level?0:8,h=(E=rr(s)).length,f=c.comment,d=f&&rr(f),p=d&&d.length,g=ar(c.extra);h>65535&&kn(11);var m=u?Zn(l,c):l,v=m.length,y=Nn();y.p(l),r.push(jn(c,{size:l.length,crc:y.d(),c:m,f:E,m:d,u:h!=s.length||d&&f.length!=p,o:i,compression:u})),i+=30+h+g+v,o+=76+2*(h+g)+(p||0)+v}for(var w=new Vt(o+22),b=i,S=o-i,C=0;C<r.length;++C){var E=r[C];lr(w,E.o,E,E.f,E.u,E.c.length);var k=30+E.f.length+ar(E.extra);w.set(E.c,E.o+k),lr(w,i,E,E.f,E.u,E.c.length,E.o,E.m),i+=16+k+(E.m?E.m.length:0)}return cr(w,i,r.length,S,b),w}(mr.fflatePreprocess(e))}static zipAsync(e,t){!function(e,t,n){n||(n=t,t={}),"function"!=typeof n&&kn(7);var r={};er(e,"",r,t);var i=Object.keys(r),o=i.length,s=0,a=0,l=o,c=new Array(o),u=[],h=function(e,t){ur((function(){n(e,t)}))};ur((function(){h=n}));var f=function(){var e=new Vt(a+22),t=s,n=a-s;a=0;for(var r=0;r<l;++r){var i=c[r];try{var o=i.c.length;lr(e,a,i,i.f,i.u,o);var u=30+i.f.length+ar(i.extra),f=a+u;e.set(i.c,f),lr(e,s,i,i.f,i.u,o,a,i.m),s+=16+u+(i.m?i.m.length:0),a=f+o}catch(d){return h(d,null)}}cr(e,s,c.length,n,t),h(null,e)};o||f();for(var d=function(e){var t=i[e],n=r[t],l=n[0],d=n[1],p=Nn(),g=l.length;p.p(l);var m,v,y,w=rr(t),b=w.length,S=d.comment,C=S&&rr(S),E=C&&C.length,k=ar(d.extra),x=0==d.level?0:8,_=function(n,r){if(n)(function(){for(var e=0;e<u.length;++e)u[e]()})(),h(n,null);else{var i=r.length;c[e]=jn(d,{size:g,crc:p.d(),c:r,f:w,m:C,u:b!=t.length||C&&S.length!=E,compression:x}),s+=30+b+k+i,a+=76+2*(b+k)+(E||0)+i,--o||f()}};if(b>65535&&_(kn(11,0,1),null),x)if(g<16e4)try{_(null,Zn(l,d))}catch(m){_(m,null)}else u.push((m=l,v=d,(y=_)||(y=v,v={}),"function"!=typeof y&&kn(7),Gn(m,v,[qn],(function(e){return $n(Zn(e.data[0],e.data[1]))}),0,y)));else _(null,l)},p=0;p<l;++p)d(p)}(mr.fflatePreprocess(e),{},t)}static fflateFilter(e){return mr.isImportableZipPath(e.name)}static fflatePostprocess(e){return Object.keys(e).reduce((function(t,n){const r=hr(n).filename,i=mr.encodeGBK(r),o=e[n];return t[i]=o,t}),{})}static isImportableZipPath(e){const t=hr(e),n=function(e){return hr(e).extension}(e).toLowerCase();return"gz"!=n&&"zip"!=n&&!/^__MACOSX/.test(e)&&"."!=t.filename[0]}static fflatePreprocess(e){const t={};return e.forEach((e=>{"string"==typeof e.content?e.content=rr(e.content):e.content instanceof ArrayBuffer&&(e.content=new Uint8Array(e.content)),t[e.filename]=e.content})),t}}let vr=!0;try{String.fromCharCode.apply(String,[1,2])}catch(et){vr=!1,Object.defineProperty(Array.prototype,"subarray",{value:Array.prototype.slice})}var yr=2654435769;function wr(e,t){var n=e.length,r=n<<2;if(t){var i=e[n-1];if(i<(r-=4)-3||i>r)return null;r=i}for(var o=new Uint8Array(r),s=0;s<r;++s)o[s]=e[s>>2]>>((3&s)<<3);return o}function br(e,t){var n,r=e.length,i=r>>2;3&r&&++i,t?(n=new Uint32Array(i+1))[i]=r:n=new Uint32Array(i);for(var o=0;o<r;++o)n[o>>2]|=e[o]<<((3&o)<<3);return n}function Sr(e){return 4294967295&e}function Cr(e,t,n,r,i,o){return(n>>>5^t<<2)+(t>>>3^n<<4)^(e^t)+(o[3&r^i]^n)}function Er(e){if(e.length<16){var t=new Uint8Array(16);t.set(e),e=t}return e}function kr(e){for(var t=e.length,n=new Uint8Array(3*t),r=0,i=0;i<t;i++){var o=e.charCodeAt(i);if(o<128)n[r++]=o;else if(o<2048)n[r++]=192|o>>6,n[r++]=128|63&o;else{if(!(o<55296||o>57343)){if(i+1<t){var s=e.charCodeAt(i+1);if(o<56320&&56320<=s&&s<=57343){var a=65536+((1023&o)<<10|1023&s);n[r++]=240|a>>18,n[r++]=128|a>>12&63,n[r++]=128|a>>6&63,n[r++]=128|63&a,i++;continue}}throw new Error("Malformed string")}n[r++]=224|o>>12,n[r++]=128|o>>6&63,n[r++]=128|63&o}}return n.subarray(0,r)}function xr(e,t){return"string"==typeof e&&(e=kr(e)),"string"==typeof t&&(t=kr(t)),null==e||0===e.length?e:wr(function(e,t){var n,r,i,o,s,a,l=e.length,c=l-1;for(r=e[c],i=0,a=0|Math.floor(6+52/l);a>0;--a){for(o=(i=Sr(i+yr))>>>2&3,s=0;s<c;++s)n=e[s+1],r=e[s]=Sr(e[s]+Cr(i,n,r,s,o,t));n=e[0],r=e[c]=Sr(e[c]+Cr(i,n,r,c,o,t))}return e}(br(e,!0),br(Er(t),!1)),!1)}const _r=function(e,t){return globalThis.btoa(function(e){var t=e.length;if(0===t)return"";var n=vr?e:function(e){for(var t=e.length,n=new Array(e.length),r=0;r<t;++r)n[r]=e[r];return n}(e);if(t<65535)return String.fromCharCode.apply(String,n);for(var r=32767&t,i=t>>15,o=new Array(r?i+1:i),s=0;s<i;++s)o[s]=String.fromCharCode.apply(String,n.subarray(s<<15,s+1<<15));return r&&(o[i]=String.fromCharCode.apply(String,n.subarray(i<<15,t))),o.join("")}(xr(e,t)))};let Ar;function Tr(e){if(!e){if(Ar)return Ar;throw new Error("首次构建，signalrURL参数不能为空！")}const t=(new Ge).configureLogging(Ve.Information).withUrl(e).withAutomaticReconnect({nextRetryDelayInMilliseconds:()=>5e3}).build();return t.keepAliveIntervalInMilliseconds=15e3,t.serverTimeoutInMilliseconds=18e5,t.start().then((()=>{ft.Logger().info("启动SignalR连接！")})),t.onclose((async()=>{ft.Logger().info("断开SignalR连接!")})),t.onreconnecting((()=>{ft.Logger().warn("SignalR服务已断线，重连中...！")})),t.onreconnected((()=>{ft.Logger().warn("SignalR重连成功!")})),Ar||(Ar=t),t}var Mr,Lr,Ir={exports:{}},Rr=Ir.exports={};function Dr(){throw new Error("setTimeout has not been defined")}function Or(){throw new Error("clearTimeout has not been defined")}function zr(e){if(Mr===setTimeout)return setTimeout(e,0);if((Mr===Dr||!Mr)&&setTimeout)return Mr=setTimeout,setTimeout(e,0);try{return Mr(e,0)}catch(tt){try{return Mr.call(null,e,0)}catch(t){return Mr.call(this,e,0)}}}!function(){try{Mr="function"==typeof setTimeout?setTimeout:Dr}catch(et){Mr=Dr}try{Lr="function"==typeof clearTimeout?clearTimeout:Or}catch(et){Lr=Or}}();var Br,Wr=[],Nr=!1,Fr=-1;function jr(){Nr&&Br&&(Nr=!1,Br.length?Wr=Br.concat(Wr):Fr=-1,Wr.length&&Ur())}function Ur(){if(!Nr){var e=zr(jr);Nr=!0;for(var t=Wr.length;t;){for(Br=Wr,Wr=[];++Fr<t;)Br&&Br[Fr].run();Fr=-1,t=Wr.length}Br=null,Nr=!1,function(e){if(Lr===clearTimeout)return clearTimeout(e);if((Lr===Or||!Lr)&&clearTimeout)return Lr=clearTimeout,clearTimeout(e);try{return Lr(e)}catch(t){try{return Lr.call(null,e)}catch(n){return Lr.call(this,e)}}}(e)}}function Pr(e,t){this.fun=e,this.array=t}function Hr(){}Rr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Wr.push(new Pr(e,t)),1!==Wr.length||Nr||zr(Ur)},Pr.prototype.run=function(){this.fun.apply(null,this.array)},Rr.title="browser",Rr.browser=!0,Rr.env={},Rr.argv=[],Rr.version="",Rr.versions={},Rr.on=Hr,Rr.addListener=Hr,Rr.once=Hr,Rr.off=Hr,Rr.removeListener=Hr,Rr.removeAllListeners=Hr,Rr.emit=Hr,Rr.prependListener=Hr,Rr.prependOnceListener=Hr,Rr.listeners=function(e){return[]},Rr.binding=function(e){throw new Error("process.binding is not supported")},Rr.cwd=function(){return"/"},Rr.chdir=function(e){throw new Error("process.chdir is not supported")},Rr.umask=function(){return 0};const qr=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Ir.exports),$r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,Xr=new Set,Gr="object"==typeof qr&&qr?qr:{},Vr=(e,t,n,r)=>{"function"==typeof Gr.emitWarning&&Gr.emitWarning(e,t,n,r)};let Kr=globalThis.AbortController,Yr=globalThis.AbortSignal;if(void 0===Kr){Yr=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},Kr=class{constructor(){t()}signal=new Yr;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==Gr.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,Vr("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const Jr=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),Zr=e=>Jr(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Qr:null:null;class Qr extends Array{constructor(e){super(e),this.fill(0)}}const ei=class t{heap;length;static create(n){const r=Zr(n);if(!r)return[];ne(t,e,!0);const i=new t(n,r);return ne(t,e,!1),i}constructor(n,r){if(!ee(t,e))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(n),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};e=new WeakMap,te(ei,e,!1);let ti=ei;const ni=class e{constructor(n){te(this,L),te(this,r),te(this,i),te(this,o),te(this,s),te(this,a),te(this,l),te(this,c),te(this,u),Z(this,"ttl"),Z(this,"ttlResolution"),Z(this,"ttlAutopurge"),Z(this,"updateAgeOnGet"),Z(this,"updateAgeOnHas"),Z(this,"allowStale"),Z(this,"noDisposeOnSet"),Z(this,"noUpdateTTL"),Z(this,"maxEntrySize"),Z(this,"sizeCalculation"),Z(this,"noDeleteOnFetchRejection"),Z(this,"noDeleteOnStaleGet"),Z(this,"allowStaleOnFetchAbort"),Z(this,"allowStaleOnFetchRejection"),Z(this,"ignoreFetchAbort"),te(this,h),te(this,f),te(this,d),te(this,p),te(this,g),te(this,m),te(this,v),te(this,y),te(this,w),te(this,b),te(this,S),te(this,C),te(this,E),te(this,k),te(this,x),te(this,_),te(this,A),te(this,T),te(this,M),te(this,R,(()=>{})),te(this,D,(()=>{})),te(this,O,(()=>{})),te(this,z,(()=>!1)),te(this,W,(e=>{})),te(this,N,((e,t,n)=>{})),te(this,F,((e,t,n,r)=>{if(n||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0})),Z(this,t,"LRUCache");const{max:j=0,ttl:U,ttlResolution:P=1,ttlAutopurge:H,updateAgeOnGet:q,updateAgeOnHas:$,allowStale:X,dispose:G,onInsert:V,disposeAfter:K,noDisposeOnSet:Y,noUpdateTTL:J,maxSize:Q=0,maxEntrySize:ie=0,sizeCalculation:oe,fetchMethod:se,memoMethod:ae,noDeleteOnFetchRejection:le,noDeleteOnStaleGet:ce,allowStaleOnFetchRejection:ue,allowStaleOnFetchAbort:he,ignoreFetchAbort:fe,perf:de}=n;if(void 0!==de&&"function"!=typeof de?.now)throw new TypeError("perf option must have a now() method if specified");if(ne(this,u,de??$r),0!==j&&!Jr(j))throw new TypeError("max option must be a nonnegative integer");const pe=j?Zr(j):Array;if(!pe)throw new Error("invalid max value: "+j);if(ne(this,r,j),ne(this,i,Q),this.maxEntrySize=ie||ee(this,i),this.sizeCalculation=oe,this.sizeCalculation){if(!ee(this,i)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==ae&&"function"!=typeof ae)throw new TypeError("memoMethod must be a function if defined");if(ne(this,c,ae),void 0!==se&&"function"!=typeof se)throw new TypeError("fetchMethod must be a function if specified");if(ne(this,l,se),ne(this,A,!!se),ne(this,d,new Map),ne(this,p,new Array(j).fill(void 0)),ne(this,g,new Array(j).fill(void 0)),ne(this,m,new pe(j)),ne(this,v,new pe(j)),ne(this,y,0),ne(this,w,0),ne(this,b,ti.create(j)),ne(this,h,0),ne(this,f,0),"function"==typeof G&&ne(this,o,G),"function"==typeof V&&ne(this,s,V),"function"==typeof K?(ne(this,a,K),ne(this,S,[])):(ne(this,a,void 0),ne(this,S,void 0)),ne(this,_,!!ee(this,o)),ne(this,M,!!ee(this,s)),ne(this,T,!!ee(this,a)),this.noDisposeOnSet=!!Y,this.noUpdateTTL=!!J,this.noDeleteOnFetchRejection=!!le,this.allowStaleOnFetchRejection=!!ue,this.allowStaleOnFetchAbort=!!he,this.ignoreFetchAbort=!!fe,0!==this.maxEntrySize){if(0!==ee(this,i)&&!Jr(ee(this,i)))throw new TypeError("maxSize must be a positive integer if specified");if(!Jr(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");re(this,L,B).call(this)}if(this.allowStale=!!X,this.noDeleteOnStaleGet=!!ce,this.updateAgeOnGet=!!q,this.updateAgeOnHas=!!$,this.ttlResolution=Jr(P)||0===P?P:1,this.ttlAutopurge=!!H,this.ttl=U||0,this.ttl){if(!Jr(this.ttl))throw new TypeError("ttl must be a positive integer if specified");re(this,L,I).call(this)}if(0===ee(this,r)&&0===this.ttl&&0===ee(this,i))throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!ee(this,r)&&!ee(this,i)){const t="LRU_CACHE_UNBOUNDED";ge=t,!Xr.has(ge)&&(Xr.add(t),Vr("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,e))}var ge}get perf(){return ee(this,u)}static unsafeExposeInternals(e){return{starts:ee(e,E),ttls:ee(e,k),autopurgeTimers:ee(e,x),sizes:ee(e,C),keyMap:ee(e,d),keyList:ee(e,p),valList:ee(e,g),next:ee(e,m),prev:ee(e,v),get head(){return ee(e,y)},get tail(){return ee(e,w)},free:ee(e,b),isBackgroundFetch:t=>{var n;return re(n=e,L,$).call(n,t)},backgroundFetch:(t,n,r,i)=>{var o;return re(o=e,L,q).call(o,t,n,r,i)},moveToTail:t=>{var n;return re(n=e,L,G).call(n,t)},indexes:t=>{var n;return re(n=e,L,j).call(n,t)},rindexes:t=>{var n;return re(n=e,L,U).call(n,t)},isStale:t=>{var n;return ee(n=e,z).call(n,t)}}}get max(){return ee(this,r)}get maxSize(){return ee(this,i)}get calculatedSize(){return ee(this,f)}get size(){return ee(this,h)}get fetchMethod(){return ee(this,l)}get memoMethod(){return ee(this,c)}get dispose(){return ee(this,o)}get onInsert(){return ee(this,s)}get disposeAfter(){return ee(this,a)}getRemainingTTL(e){return ee(this,d).has(e)?1/0:0}*entries(){for(const e of re(this,L,j).call(this))void 0===ee(this,g)[e]||void 0===ee(this,p)[e]||re(this,L,$).call(this,ee(this,g)[e])||(yield[ee(this,p)[e],ee(this,g)[e]])}*rentries(){for(const e of re(this,L,U).call(this))void 0===ee(this,g)[e]||void 0===ee(this,p)[e]||re(this,L,$).call(this,ee(this,g)[e])||(yield[ee(this,p)[e],ee(this,g)[e]])}*keys(){for(const e of re(this,L,j).call(this)){const t=ee(this,p)[e];void 0===t||re(this,L,$).call(this,ee(this,g)[e])||(yield t)}}*rkeys(){for(const e of re(this,L,U).call(this)){const t=ee(this,p)[e];void 0===t||re(this,L,$).call(this,ee(this,g)[e])||(yield t)}}*values(){for(const e of re(this,L,j).call(this))void 0===ee(this,g)[e]||re(this,L,$).call(this,ee(this,g)[e])||(yield ee(this,g)[e])}*rvalues(){for(const e of re(this,L,U).call(this))void 0===ee(this,g)[e]||re(this,L,$).call(this,ee(this,g)[e])||(yield ee(this,g)[e])}[(n=Symbol.iterator,t=Symbol.toStringTag,n)](){return this.entries()}find(e,t={}){for(const n of re(this,L,j).call(this)){const r=ee(this,g)[n],i=re(this,L,$).call(this,r)?r.__staleWhileFetching:r;if(void 0!==i&&e(i,ee(this,p)[n],this))return this.get(ee(this,p)[n],t)}}forEach(e,t=this){for(const n of re(this,L,j).call(this)){const r=ee(this,g)[n],i=re(this,L,$).call(this,r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,ee(this,p)[n],this)}}rforEach(e,t=this){for(const n of re(this,L,U).call(this)){const r=ee(this,g)[n],i=re(this,L,$).call(this,r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,ee(this,p)[n],this)}}purgeStale(){let e=!1;for(const t of re(this,L,U).call(this,{allowStale:!0}))ee(this,z).call(this,t)&&(re(this,L,V).call(this,ee(this,p)[t],"expire"),e=!0);return e}info(e){const t=ee(this,d).get(e);if(void 0===t)return;const n=ee(this,g)[t],r=re(this,L,$).call(this,n)?n.__staleWhileFetching:n;if(void 0===r)return;const i={value:r};if(ee(this,k)&&ee(this,E)){const e=ee(this,k)[t],n=ee(this,E)[t];if(e&&n){const t=e-(ee(this,u).now()-n);i.ttl=t,i.start=Date.now()}}return ee(this,C)&&(i.size=ee(this,C)[t]),i}dump(){const e=[];for(const t of re(this,L,j).call(this,{allowStale:!0})){const n=ee(this,p)[t],r=ee(this,g)[t],i=re(this,L,$).call(this,r)?r.__staleWhileFetching:r;if(void 0===i||void 0===n)continue;const o={value:i};if(ee(this,k)&&ee(this,E)){o.ttl=ee(this,k)[t];const e=ee(this,u).now()-ee(this,E)[t];o.start=Math.floor(Date.now()-e)}ee(this,C)&&(o.size=ee(this,C)[t]),e.unshift([n,o])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const e=Date.now()-n.start;n.start=ee(this,u).now()-e}this.set(t,n.value,n)}}set(e,t,n={}){var i,l,c,u;if(void 0===t)return this.delete(e),this;const{ttl:f=this.ttl,start:y,noDisposeOnSet:C=this.noDisposeOnSet,sizeCalculation:E=this.sizeCalculation,status:x}=n;let{noUpdateTTL:R=this.noUpdateTTL}=n;const z=ee(this,F).call(this,e,t,n.size||0,E);if(this.maxEntrySize&&z>this.maxEntrySize)return x&&(x.set="miss",x.maxEntrySizeExceeded=!0),re(this,L,V).call(this,e,"set"),this;let B=0===ee(this,h)?void 0:ee(this,d).get(e);if(void 0===B)B=0===ee(this,h)?ee(this,w):0!==ee(this,b).length?ee(this,b).pop():ee(this,h)===ee(this,r)?re(this,L,H).call(this,!1):ee(this,h),ee(this,p)[B]=e,ee(this,g)[B]=t,ee(this,d).set(e,B),ee(this,m)[ee(this,w)]=B,ee(this,v)[B]=ee(this,w),ne(this,w,B),ie(this,h)._++,ee(this,N).call(this,B,z,x),x&&(x.set="add"),R=!1,ee(this,M)&&(null==(i=ee(this,s))||i.call(this,t,e,"add"));else{re(this,L,G).call(this,B);const n=ee(this,g)[B];if(t!==n){if(ee(this,A)&&re(this,L,$).call(this,n)){n.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=n;void 0===t||C||(ee(this,_)&&(null==(l=ee(this,o))||l.call(this,t,e,"set")),ee(this,T)&&ee(this,S)?.push([t,e,"set"]))}else C||(ee(this,_)&&(null==(c=ee(this,o))||c.call(this,n,e,"set")),ee(this,T)&&ee(this,S)?.push([n,e,"set"]));if(ee(this,W).call(this,B),ee(this,N).call(this,B,z,x),ee(this,g)[B]=t,x){x.set="replace";const e=n&&re(this,L,$).call(this,n)?n.__staleWhileFetching:n;void 0!==e&&(x.oldValue=e)}}else x&&(x.set="update");ee(this,M)&&this.onInsert?.(t,e,t===n?"update":"replace")}if(0===f||ee(this,k)||re(this,L,I).call(this),ee(this,k)&&(R||ee(this,O).call(this,B,f,y),x&&ee(this,D).call(this,x,B)),!C&&ee(this,T)&&ee(this,S)){const e=ee(this,S);let t;for(;t=e?.shift();)null==(u=ee(this,a))||u.call(this,...t)}return this}pop(){var e;try{for(;ee(this,h);){const e=ee(this,g)[ee(this,y)];if(re(this,L,H).call(this,!0),re(this,L,$).call(this,e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(ee(this,T)&&ee(this,S)){const t=ee(this,S);let n;for(;n=t?.shift();)null==(e=ee(this,a))||e.call(this,...n)}}}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:r}=t,i=ee(this,d).get(e);if(void 0!==i){const e=ee(this,g)[i];if(re(this,L,$).call(this,e)&&void 0===e.__staleWhileFetching)return!1;if(!ee(this,z).call(this,i))return n&&ee(this,R).call(this,i),r&&(r.has="hit",ee(this,D).call(this,r,i)),!0;r&&(r.has="stale",ee(this,D).call(this,r,i))}else r&&(r.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,r=ee(this,d).get(e);if(void 0===r||!n&&ee(this,z).call(this,r))return;const i=ee(this,g)[r];return re(this,L,$).call(this,i)?i.__staleWhileFetching:i}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:m,forceRefresh:v=!1,status:y,signal:w}=t;if(!ee(this,A))return y&&(y.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,status:y});const b={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:y,signal:w};let S=ee(this,d).get(e);if(void 0===S){y&&(y.fetch="miss");const t=re(this,L,q).call(this,e,S,b,m);return t.__returned=t}{const t=ee(this,g)[S];if(re(this,L,$).call(this,t)){const e=n&&void 0!==t.__staleWhileFetching;return y&&(y.fetch="inflight",e&&(y.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const i=ee(this,z).call(this,S);if(!v&&!i)return y&&(y.fetch="hit"),re(this,L,G).call(this,S),r&&ee(this,R).call(this,S),y&&ee(this,D).call(this,y,S),t;const o=re(this,L,q).call(this,e,S,b,m),s=void 0!==o.__staleWhileFetching&&n;return y&&(y.fetch=i?"stale":"refresh",s&&i&&(y.returnedStale=!0)),s?o.__staleWhileFetching:o.__returned=o}}async forceFetch(e,t={}){const n=await this.fetch(e,t);if(void 0===n)throw new Error("fetch() returned undefined");return n}memo(e,t={}){const n=ee(this,c);if(!n)throw new Error("no memoMethod provided to constructor");const{context:r,forceRefresh:i,...o}=t,s=this.get(e,o);if(!i&&void 0!==s)return s;const a=n(e,s,{options:o,context:r});return this.set(e,a,o),a}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,s=ee(this,d).get(e);if(void 0!==s){const t=ee(this,g)[s],a=re(this,L,$).call(this,t);return o&&ee(this,D).call(this,o,s),ee(this,z).call(this,s)?(o&&(o.get="stale"),a?(o&&n&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),n?t.__staleWhileFetching:void 0):(i||re(this,L,V).call(this,e,"expire"),o&&n&&(o.returnedStale=!0),n?t:void 0)):(o&&(o.get="hit"),a?t.__staleWhileFetching:(re(this,L,G).call(this,s),r&&ee(this,R).call(this,s),t))}o&&(o.get="miss")}delete(e){return re(this,L,V).call(this,e,"delete")}clear(){return re(this,L,K).call(this,"delete")}};r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,S=new WeakMap,C=new WeakMap,E=new WeakMap,k=new WeakMap,x=new WeakMap,_=new WeakMap,A=new WeakMap,T=new WeakMap,M=new WeakMap,L=new WeakSet,I=function(){const e=new Qr(ee(this,r)),t=new Qr(ee(this,r));ne(this,k,e),ne(this,E,t);const n=this.ttlAutopurge?new Array(ee(this,r)):void 0;ne(this,x,n),ne(this,O,((r,i,o=ee(this,u).now())=>{if(t[r]=0!==i?o:0,e[r]=i,n?.[r]&&(clearTimeout(n[r]),n[r]=void 0),0!==i&&n){const e=setTimeout((()=>{ee(this,z).call(this,r)&&re(this,L,V).call(this,ee(this,p)[r],"expire")}),i+1);e.unref&&e.unref(),n[r]=e}})),ne(this,R,(n=>{t[n]=0!==e[n]?ee(this,u).now():0})),ne(this,D,((n,r)=>{if(e[r]){const s=e[r],a=t[r];if(!s||!a)return;n.ttl=s,n.start=a,n.now=i||o();const l=n.now-a;n.remainingTTL=s-l}}));let i=0;const o=()=>{const e=ee(this,u).now();if(this.ttlResolution>0){i=e;const t=setTimeout((()=>i=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=n=>{const r=ee(this,d).get(n);if(void 0===r)return 0;const s=e[r],a=t[r];return s&&a?s-((i||o())-a):1/0},ne(this,z,(n=>{const r=t[n],s=e[n];return!!s&&!!r&&(i||o())-r>s}))},R=new WeakMap,D=new WeakMap,O=new WeakMap,z=new WeakMap,B=function(){const e=new Qr(ee(this,r));ne(this,f,0),ne(this,C,e),ne(this,W,(t=>{ne(this,f,ee(this,f)-e[t]),e[t]=0})),ne(this,F,((e,t,n,r)=>{if(re(this,L,$).call(this,t))return 0;if(!Jr(n)){if(!r)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof r)throw new TypeError("sizeCalculation must be a function");if(n=r(t,e),!Jr(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return n})),ne(this,N,((t,n,r)=>{if(e[t]=n,ee(this,i)){const n=ee(this,i)-e[t];for(;ee(this,f)>n;)re(this,L,H).call(this,!0)}ne(this,f,ee(this,f)+e[t]),r&&(r.entrySize=n,r.totalCalculatedSize=ee(this,f))}))},W=new WeakMap,N=new WeakMap,F=new WeakMap,j=function*({allowStale:e=this.allowStale}={}){if(ee(this,h))for(let t=ee(this,w);re(this,L,P).call(this,t)&&(!e&&ee(this,z).call(this,t)||(yield t),t!==ee(this,y));)t=ee(this,v)[t]},U=function*({allowStale:e=this.allowStale}={}){if(ee(this,h))for(let t=ee(this,y);re(this,L,P).call(this,t)&&(!e&&ee(this,z).call(this,t)||(yield t),t!==ee(this,w));)t=ee(this,m)[t]},P=function(e){return void 0!==e&&ee(this,d).get(ee(this,p)[e])===e},H=function(e){var t;const n=ee(this,y),r=ee(this,p)[n],i=ee(this,g)[n];return ee(this,A)&&re(this,L,$).call(this,i)?i.__abortController.abort(new Error("evicted")):(ee(this,_)||ee(this,T))&&(ee(this,_)&&(null==(t=ee(this,o))||t.call(this,i,r,"evict")),ee(this,T)&&ee(this,S)?.push([i,r,"evict"])),ee(this,W).call(this,n),ee(this,x)?.[n]&&(clearTimeout(ee(this,x)[n]),ee(this,x)[n]=void 0),e&&(ee(this,p)[n]=void 0,ee(this,g)[n]=void 0,ee(this,b).push(n)),1===ee(this,h)?(ne(this,y,ne(this,w,0)),ee(this,b).length=0):ne(this,y,ee(this,m)[n]),ee(this,d).delete(r),ie(this,h)._--,n},q=function(e,t,n,r){const i=void 0===t?void 0:ee(this,g)[t];if(re(this,L,$).call(this,i))return i;const o=new Kr,{signal:s}=n;s?.addEventListener("abort",(()=>o.abort(s.reason)),{signal:o.signal});const a={signal:o.signal,options:n,context:r},c=(r,i=!1)=>{const{aborted:s}=o.signal,l=n.ignoreFetchAbort&&void 0!==r;if(n.status&&(s&&!i?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,l&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),s&&!l&&!i)return u(o.signal.reason);const c=h,f=ee(this,g)[t];return(f===h||l&&i&&void 0===f)&&(void 0===r?void 0!==c.__staleWhileFetching?ee(this,g)[t]=c.__staleWhileFetching:re(this,L,V).call(this,e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,r,a.options))),r},u=r=>{const{aborted:i}=o.signal,s=i&&n.allowStaleOnFetchAbort,a=s||n.allowStaleOnFetchRejection,l=a||n.noDeleteOnFetchRejection,c=h;if(ee(this,g)[t]===h&&(l&&void 0!==c.__staleWhileFetching?s||(ee(this,g)[t]=c.__staleWhileFetching):re(this,L,V).call(this,e,"fetch")),a)return n.status&&void 0!==c.__staleWhileFetching&&(n.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw r};n.status&&(n.status.fetchDispatched=!0);const h=new Promise(((t,r)=>{var s;const u=null==(s=ee(this,l))?void 0:s.call(this,e,i,a);u&&u instanceof Promise&&u.then((e=>t(void 0===e?void 0:e)),r),o.signal.addEventListener("abort",(()=>{n.ignoreFetchAbort&&!n.allowStaleOnFetchAbort||(t(void 0),n.allowStaleOnFetchAbort&&(t=e=>c(e,!0)))}))})).then(c,(e=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=e),u(e)))),f=Object.assign(h,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,f,{...a.options,status:void 0}),t=ee(this,d).get(e)):ee(this,g)[t]=f,f},$=function(e){if(!ee(this,A))return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Kr},X=function(e,t){ee(this,v)[t]=e,ee(this,m)[e]=t},G=function(e){e!==ee(this,w)&&(e===ee(this,y)?ne(this,y,ee(this,m)[e]):re(this,L,X).call(this,ee(this,v)[e],ee(this,m)[e]),re(this,L,X).call(this,ee(this,w),e),ne(this,w,e))},V=function(e,t){var n,r;let i=!1;if(0!==ee(this,h)){const r=ee(this,d).get(e);if(void 0!==r)if(ee(this,x)?.[r]&&(clearTimeout(ee(this,x)?.[r]),ee(this,x)[r]=void 0),i=!0,1===ee(this,h))re(this,L,K).call(this,t);else{ee(this,W).call(this,r);const i=ee(this,g)[r];if(re(this,L,$).call(this,i)?i.__abortController.abort(new Error("deleted")):(ee(this,_)||ee(this,T))&&(ee(this,_)&&(null==(n=ee(this,o))||n.call(this,i,e,t)),ee(this,T)&&ee(this,S)?.push([i,e,t])),ee(this,d).delete(e),ee(this,p)[r]=void 0,ee(this,g)[r]=void 0,r===ee(this,w))ne(this,w,ee(this,v)[r]);else if(r===ee(this,y))ne(this,y,ee(this,m)[r]);else{const e=ee(this,v)[r];ee(this,m)[e]=ee(this,m)[r];const t=ee(this,m)[r];ee(this,v)[t]=ee(this,v)[r]}ie(this,h)._--,ee(this,b).push(r)}}if(ee(this,T)&&ee(this,S)?.length){const e=ee(this,S);let t;for(;t=e?.shift();)null==(r=ee(this,a))||r.call(this,...t)}return i},K=function(e){var t,n;for(const r of re(this,L,U).call(this,{allowStale:!0})){const n=ee(this,g)[r];if(re(this,L,$).call(this,n))n.__abortController.abort(new Error("deleted"));else{const i=ee(this,p)[r];ee(this,_)&&(null==(t=ee(this,o))||t.call(this,n,i,e)),ee(this,T)&&ee(this,S)?.push([n,i,e])}}if(ee(this,d).clear(),ee(this,g).fill(void 0),ee(this,p).fill(void 0),ee(this,k)&&ee(this,E)){ee(this,k).fill(0),ee(this,E).fill(0);for(const e of ee(this,x)??[])void 0!==e&&clearTimeout(e);ee(this,x)?.fill(void 0)}if(ee(this,C)&&ee(this,C).fill(0),ne(this,y,0),ne(this,w,0),ee(this,b).length=0,ne(this,f,0),ne(this,h,0),ee(this,T)&&ee(this,S)){const e=ee(this,S);let t;for(;t=e?.shift();)null==(n=ee(this,a))||n.call(this,...t)}};let ri=ni;const ii=class{static createCache(e=this.defaultOptions){return new ri(e)}static set(e,t,n=this.cache){let r=n;r||(r=this.cache),r.set(e,t)}static get(e,t=this.cache){let n=t;return n||(n=this.cache),n.get(e)}static remove(e,t=this.cache){let n=t;return n||(n=this.cache),n.del(e)}static has(e,t=this.cache){let n=t;return n||(n=this.cache),n.has(e)}static count(e=this.cache){let t=e;return t||(t=this.cache),t.size}static maxSize(e=this.cache){let t=e;return t||(t=this.cache),t.max}static peek(e,t=this.cache){let n=t;return n||(n=this.cache),n.peek(e)}static keys(e=this.cache){let t=e;return t||(t=this.cache),t.keys()}static clear(e=this.cache){let t=e;t||(t=this.cache),t.clear()}};Z(ii,"defaultOptions",{max:1e3,maxAge:18e5}),Z(ii,"cache",new ri(ii.defaultOptions));let oi=ii;function si(e){if(!e)return;const t=e.length;return 0!==t?e[Math.floor(Math.random()*t)]:void 0}function ai(e,t=2){const n=Math.pow(10,t);return Math.round(e*n)/n}Object.freeze(Object.defineProperty({__proto__:null,base64ToBlob:function(e,t="image/png"){let n=t,r="";const i=e.split(",");if(2===i.length){const e=i[0]?.match(/:(.*?);/);n=e[1],r=atob(i[1])}else r=atob(i[0]);let o=r.length;const s=new Uint8Array(o);for(;o--;)s[o]=r.charCodeAt(o);return new Blob([s],{type:n})},blobToDataURL:function(e){return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)}))},convertDecimalism:function(e,t=!0,n=!0){const r=n?e>0?"E":"W":e>0?"N":"S",i=Math.floor(e),o=60*(e-i),s=Math.floor(o),a=60*(o-s);return t?`${r}:${i}°${s}′${a.toFixed(3)}″`:{degree:i*(e>0?1:-1),minute:s,second:a}},convertDecimalismData:function(e,t=3){const n=Math.floor(e),r=60*(e-n),i=Math.floor(r);return{degree:n,minute:i,second:ai(60*(r-i),t)}},convertDecimalismSpacing:function(e,t=3){const n=Math.floor(e),r=60*(e-n),i=Math.floor(r);return`${n} ${i} ${(60*(r-i)).toFixed(t)}`},convertToDecimalism:function(e,t,n){return e+t/60+n/3600},convertToDecimalismByString:function(e,t=-1){const n=e.split(" ");if(!n||3!=n.length)return-1;const r=Number(n[0]),i=Number(n[1]),o=Number(n[2]);return r===Number.NaN||i===Number.NaN||o===Number.NaN?-1:-1!=t?ai(r+i/60+o/3600,t):r+i/60+o/3600},convertToDecimalismByString2:function(e){const t=e.match(/^([EWNS]):?(\d+)[°ºd](\d+)[′'m](\d+\.?\d*)[″"s]?$/i);if(!t)return NaN;let n=parseFloat(t[2])+parseFloat(t[3])/60+parseFloat(t[4])/3600;return(e.toUpperCase().startsWith("W")||e.toUpperCase().startsWith("S"))&&(n=-n),n},filterObj:function(e,t){const n={};return Object.keys(e).filter((e=>t.includes(e))).forEach((t=>{n[t]=e[t]})),n},getRandomInt:function(e=100,t=0){return Math.floor(Math.random()*(e-t+1))+t},getRandomItem:si,replaceAll:function(e,t,n){return e.split(t).join(n)},reserveDecimal:ai},Symbol.toStringTag,{value:"Module"}));var li=(e=>(e[e.RGBA=0]="RGBA",e[e.Hex=1]="Hex",e[e.Hsla=2]="Hsla",e))(li||{});function ci(e){return new Promise((t=>setTimeout(t,e)))}function ui(e,t,n,r="json",i){const o={baseURL:ft.Config?.ServiceURL.DefaultWebAPI,timeout:6e4,params:e,paramsSerializer:{serialize:function(e){return le.stringify(e,{indices:!1,arrayFormat:"repeat"})}},headers:{"Content-Type":"application/json",Authorization:"bearer "+It()?.token},responseType:r,cancelToken:i};if(n)for(let s in n)o.headers[s]=n[s];return ft.SystemID&&(o.headers.sysid=ft.SystemID,ft.SystemGroup&&(o.headers.sysgroup=ft.SystemGroup)),void 0!==t&&(o.baseURL=t),o}function hi(e,t,n,r,i="json",o,s){const a=ui(n,t,r,i,o);return s&&s>=2e4&&(a.timeout=s),ft.Axios?.get(e,a).catch((function(t){fi(t,a.baseURL,e,"Get")}))}function fi(e,t,n,r="Get"){const i=`${t}${n}`;if(e&&e.response){let t=!1;const n=e.response.status;switch(n){case 400:e.message="错误请求";break;case 401:e.message="未授权，请重新登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求错误,未找到该资源";break;case 405:e.message="请求方法未允许";break;case 408:e.message="请求超时";break;case 500:const n=e.response.data;if(n){const r=n.indexOf(":"),i=n.indexOf("\n");if(r>0&&i-r>2){const o=n.substring(r+2,i);o.indexOf("System.Exception")>0?e.message="后台服务内部出错！":(t=!0,e.message=o)}else t=!0,e.message=n}else e.message="服务器端出错";break;case 501:e.message="网络未实现";break;case 502:e.message="网络错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网络超时";break;case 505:e.message="http版本不支持该请求";break;default:e.message=`连接错误${e.response.status}`}let r={address:i,code:n,isExceptionInfo:t,message:e.message,result:e.response.data};if(ft.EventBus.emit(ot.AxiosRequestErrorEvent,r),t)throw new Error(e.message)}else if(e?.message)throw new Error(e.message)}function di(e,t,n,r,i,o="json",s){const a=ui(r,t,i,o);a.headers["Content-Type"]="multipart/form-data";const l=function(e){let t=new FormData;return e&&Object.keys(e).forEach((n=>{if(!e)return;let r=e[n];null!=r&&(Ct(r)?r.forEach((e=>{t.append(n,mi(e))})):t.append(n,mi(r)))})),t}(n);return ft.Axios?.post(e,l,a).catch((function(e){fi(e,t,a.baseURL,"Post")}))}function pi(e,t,n,r,i,o="json",s){const a=ui(r,t,i,o);return ft.Axios?.post(e,n,a).catch((function(n){fi(n,t,e,"Post")}))}function gi(e,t,n=!1){return e.startsWith("http")?hi("",e,t):n||t?hi(e,void 0,t):hi(e,"",void 0)}function mi(e){return e instanceof Blob?e:e.toString()}function vi(e,t,n){const r=t??xt.getFileName(e);hi("",e,n,void 0,"blob").then((e=>{e.data&&fr(e.data,r)}))}var yi,wi,bi,Si,Ci,Ei,ki,xi,_i,Ai={exports:{}},Ti=function(){if(_i)return Ai.exports;_i=1;var e,t=wi?yi:(wi=1,e="undefined"!=typeof window?window:void 0!==Je?Je:"undefined"!=typeof self?self:{},yi=e),n=function(){if(Si)return bi;Si=1,bi=function(t){if(!t)return!1;var n=e.call(t);return"[object Function]"===n||"function"==typeof t&&"[object RegExp]"!==n||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var e=Object.prototype.toString;return bi}(),r=function(){if(Ei)return Ci;Ei=1;var e=function(e){return e.replace(/^\s+|\s+$/g,"")};return Ci=function(t){if(!t)return{};for(var n=Object.create(null),r=e(t).split("\n"),i=0;i<r.length;i++){var o=r[i],s=o.indexOf(":"),a=e(o.slice(0,s)).toLowerCase(),l=e(o.slice(s+1));void 0===n[a]?n[a]=l:(c=n[a],"[object Array]"===Object.prototype.toString.call(c)?n[a].push(l):n[a]=[n[a],l])}var c;return n}}(),i=function(){if(xi)return ki;xi=1,ki=function(){for(var t={},n=0;n<arguments.length;n++){var r=arguments[n];for(var i in r)e.call(r,i)&&(t[i]=r[i])}return t};var e=Object.prototype.hasOwnProperty;return ki}();function o(e,t,r){var o=e;return n(t)?(r=t,"string"==typeof e&&(o={uri:e})):o=i(t,{uri:e}),o.callback=r,o}function s(e,t,n){return a(t=o(e,t,n))}function a(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function i(){var e=void 0;if(e=u.response?u.response:u.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}(u),v)try{e=JSON.parse(e)}catch(t){}return e}function o(e){return clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function a(){if(!c){var t;clearTimeout(h),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var o=y,s=null;return 0!==t?(o={body:i(),statusCode:t,method:d,headers:{},url:f,rawRequest:u},u.getAllResponseHeaders&&(o.headers=r(u.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),n(s,o,o.body)}}var l,c,u=e.xhr||null;u||(u=e.cors||e.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var h,f=u.url=e.uri||e.url,d=u.method=e.method||"GET",p=e.body||e.data,g=u.headers=e.headers||{},m=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:d,url:f,rawRequest:u};if("json"in e&&!1!==e.json&&(v=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(a,0)},u.onload=a,u.onerror=o,u.onprogress=function(){},u.onabort=function(){c=!0},u.ontimeout=o,u.open(d,f,!m,e.username,e.password),m||(u.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(h=setTimeout((function(){if(!c){c=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}}),e.timeout)),u.setRequestHeader)for(l in g)g.hasOwnProperty(l)&&u.setRequestHeader(l,g[l]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(p||null),u}return Ai.exports=s,Ai.exports.default=s,s.XMLHttpRequest=t.XMLHttpRequest||function(){},s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:t.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){s["delete"===e?"del":e]=function(t,n,r){return(n=o(t,n,r)).method=e.toUpperCase(),a(n)}})),Ai.exports}();const Mi=Ze(Ti),Li=[200,201,202,204,308],Ii=[408,502,503,504];class Ri{endpoint;file;headers;method;chunkSize;attempts;delayBeforeAttempt;md5;chunkCount;chunkByteSize;cacheSize=3;currentMaxIndex=0;maxFileBytes;endpointValue;totalChunks;attemptCount;offline;paused;success;isResumed=!1;mapXhrRequest;okRecordList;eventTarget;fileName;constructor(e){this.endpoint=e.endpoint,this.file=e.file,this.fileName=encodeURI(this.file.name),this.headers=e.headers||{},this.method=e.method||"PUT",this.chunkSize=e.chunkSize||5120,this.attempts=e.attempts||5,this.delayBeforeAttempt=e.delayBeforeAttempt||1,this.md5=e.md5||"",null!=e.threadNumber&&e.threadNumber>=2&&(this.cacheSize=e.threadNumber),this.maxFileBytes=1024*(e.maxFileSize||0),this.chunkCount=0,this.chunkByteSize=1024*this.chunkSize,this.totalChunks=Math.ceil(this.file.size/this.chunkByteSize),this.attemptCount=0,this.offline=!1,this.paused=!1,this.success=!1,this.mapXhrRequest=new Map,this.okRecordList=[],this.eventTarget=Ke(),this.validateOptions(),this.getEndpoint().then((()=>{for(let e=0;e<this.cacheSize;e++){const t=e;if(t<this.totalChunks){const e=100*t;e>0?ci(e).then((e=>{this.sendChunks(t)})):this.sendChunks(t)}}})),"undefined"!=typeof window&&(window.addEventListener("online",(()=>{this.offline&&(this.offline=!1,this.dispatch("online"),this.sendChunks())})),window.addEventListener("offline",(()=>{this.offline=!0,this.dispatch("offline")})))}on(e,t){this.eventTarget.on(e,t)}abort(){this.pause(),this.mapXhrRequest.size>0&&(this.mapXhrRequest.forEach(((e,t)=>{e&&e.abort()})),this.mapXhrRequest.clear())}pause(){this.paused=!0}async resume(){this.paused=!1,this.isResumed=!0;for(let e=0;e<this.totalChunks;e++){if(this.mapXhrRequest.size>=this.cacheSize){const e=500*(this.mapXhrRequest.size-this.cacheSize+1);await ci(e)}this.sendChunks(e)}}dispatch(e,t){this.eventTarget.emit(e,t)}validateOptions(){if(!this.endpoint||"function"!=typeof this.endpoint&&"string"!=typeof this.endpoint)throw new TypeError("endpoint必须为：文件上传URL字符串，或返回地址的函数！");if(!(this.file instanceof File))throw new TypeError("file必须为文件对象");if(this.headers&&"object"!=typeof this.headers)throw new TypeError("文件头必须为对象或空！");if(this.chunkSize&&("number"!=typeof this.chunkSize||this.chunkSize<=0||this.chunkSize%256!=0))throw new TypeError("chunkSize必须大于0,并是256的整数倍");if(this.maxFileBytes>0&&this.maxFileBytes<this.file.size)throw new Error(`文件大小超过最大允许值：(${this.file.size} > ${this.maxFileBytes})`);if(this.attempts&&("number"!=typeof this.attempts||this.attempts<=0))throw new TypeError("重试次数必须为正数！");if(this.delayBeforeAttempt&&("number"!=typeof this.delayBeforeAttempt||this.delayBeforeAttempt<0))throw new TypeError("延时重试时间必须为正数！默认为1")}getEndpoint(){return"string"==typeof this.endpoint?(this.endpointValue=this.endpoint,Promise.resolve(this.endpoint)):this.endpoint(this.file).then((e=>(this.endpointValue=e,this.endpointValue)))}getChunk(e=0){return new Promise((t=>{const n=1===this.totalChunks?this.file.size:this.chunkByteSize,r=n*e,i=new FileReader;i.onload=function(){if(null!==this.result){const n=new Blob([this.result],{type:"application/octet-stream"});t({chunkIndex:e,chunkContent:n})}else t(void 0)},i.readAsArrayBuffer(this.file.slice(r,r+n))}))}xhrPromise(e){return new Promise(((t,n)=>{const r=e.headers,i=Number(r.ChunkIndex),o=Mi({...e},((e,r)=>(this.mapXhrRequest.delete(i),e?n(e):t(r))));this.mapXhrRequest.set(i,o)}))}sendChunk(e,t){if(!t)return;const n=e*this.chunkByteSize,r=n+t.size-1,i={...this.headers,FileName:this.fileName,FileMD5:this.md5,ChunkIndex:e.toString(),"Content-Type":this.file.type,"Content-Range":`bytes ${n}-${r}/${this.file.size}`};return this.dispatch("attempt",{chunkNumber:e,chunkSize:t.size}),this.endpointValue?this.xhrPromise({headers:i,url:this.endpointValue,method:this.method,body:t}):void this.dispatch("error",{message:"文件上传endpointValue不能为空！取消上传！",chunk:e,attempts:this.attemptCount})}sendChunks(e=0){this.paused||this.offline||this.success||this.okRecordList.indexOf(e)<0&&(this.currentMaxIndex<e&&(this.currentMaxIndex=e),this.getChunk(e).then((e=>{if(e){const{chunkIndex:t,chunkContent:n}=e;return this.sendChunk(t,n)}})).then((t=>{if(t)if(Li.includes(t.statusCode)){const n=JSON.parse(t.body).RESULTVALUE;if(n.STATE){this.attemptCount=0,this.chunkCount=this.chunkCount+1;const e=Math.round(n.INDEX/this.chunkByteSize);this.mapXhrRequest.delete(e),this.dispatch("chunkSuccess",{chunkCount:this.chunkCount,attempts:this.attemptCount,chunkNumber:e}),this.okRecordList.push(e),this.chunkCount<this.totalChunks&&!this.isResumed&&this.currentMaxIndex<this.totalChunks-1&&(this.currentMaxIndex++,this.sendChunks(this.currentMaxIndex));const t=100*this.chunkCount/this.totalChunks;this.dispatch("progress",t),n.END&&(this.success=!0,this.dispatch("success",this.fileName),this.okRecordList.length=0)}else{const t=`服务器错误:${n.NAME}，停止上传。`;this.dispatch("error",{message:t,chunkNumber:e,attempts:0}),this.mapXhrRequest.delete(e),ci(1e3).then((t=>this.sendChunks(e)))}}else if(null!=t&&Ii.includes(t.statusCode)){if(this.paused||this.offline)return}else{if(this.paused||this.offline)return;this.dispatch("error",{message:`服务器错误:${t?.statusCode}，停止上传。`,chunkNumber:this.chunkCount,attempts:this.attemptCount})}})).catch((e=>{!this.paused&&this.offline})))}}const Di=e=>new Ri(e),Oi=new class{hasClass(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}addClass(e,t){this.hasClass(e,t)||(e.className+=" "+t)}removeClass(e,t){if(this.hasClass(e,t)){const n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}toggleClass(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)}setCSSProperty(e,t,n){e?.style.setProperty(t,n)}getBoundingClientRect(e){return e&&e.getBoundingClientRect?e.getBoundingClientRect():0}getViewportOffset(e){const t=document.documentElement,n=t.scrollLeft,r=t.scrollTop,i=t.clientLeft,o=t.clientTop,s=globalThis.scrollX,a=globalThis.scrollY,l=this.getBoundingClientRect(e),{left:c,top:u,width:h,height:f}=l,d=c+s-((s||n)-(i||0)),p=u+a-((a||r)-(o||0)),g=globalThis.document.documentElement.clientWidth,m=globalThis.document.documentElement.clientHeight;return{left:d,top:p,right:g-h-d,bottom:m-f-p,rightIncludeBody:g-d,bottomIncludeBody:m-p}}hackCss(e,t){const n={};return["webkit","Moz","ms","OT"].forEach((r=>{n[`${r}${xt.UpperFirst(e)}`]=t})),{...n,[e]:t}}on(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}off(e,t,n){e&&t&&n&&e.removeEventListener(t,n,!1)}once(e,t,n){const r=function(...i){n&&n.apply(this,i),this.off(e,t,r)};this.on(e,t,r)}},zi=Ie({isLock:!1,lockTime:0});function Bi(e){zi.isLock=e,e&&Rt()}let Wi;function Ni(){clearInterval(Wi),globalThis.location.href.indexOf("/login")>0||zi.isLock||(Bi(!1),zi.lockTime=function(){let e=3600;return ft.Config.UI?.LockTime&&ft.Config.UI?.LockTime>=10&&(e=ft.Config.UI.LockTime),e}(),Wi=setInterval((()=>{if(zi.lockTime--,zi.lockTime<=0)return Bi(!0),clearInterval(Wi)}),1e3))}function Fi(){Ni(),document.addEventListener("mousedown",Ni),document.addEventListener("mousemove",Ni)}function ji(){document.removeEventListener("mousedown",Ni),document.removeEventListener("mousemove",Ni)}function Ui(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pi,Hi={exports:{}},qi=(Pi||(Pi=1,Hi.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(!a&&Ui)return Ui(s);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return i(t[s][1][e]||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var o=Ui,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==Je?Je:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(i){return o.reject(e,i)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=p((function(){t(i,r)}));"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==l?h(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)d(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then((function(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(c,s))}),(function(e){r||(r=!0,o.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n,r=e.length,s=!1;if(!r)return this.resolve([]);for(var a=-1,l=new this(i);++a<r;)n=e[a],t.resolve(n).then((function(e){s||(s=!0,o.resolve(l,e))}),(function(e){s||(s=!0,o.reject(l,e))}));return l}},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==Je?Je:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function c(e){return"string"!=typeof e&&(e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",f=void 0,d={},p=Object.prototype.toString,g="readonly",m="readwrite";function v(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function y(e){var t=d[e.name],n={};n.promise=new s((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function w(e){var t=d[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function b(e,t){var n=d[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function S(e,t){return new s((function(n,r){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);y(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=i.open.apply(i,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(r){if("ConstraintError"!==r.name)throw r}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),w(e)}}))}function C(e){return S(e,!1)}function E(e){return S(e,!0)}function k(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version,e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function x(e){return o([v(atob(e.data))],{type:e.type})}function _(e){return e&&e.__local_forage_encoded_blob}function A(e){var t=this,n=t._initReady().then((function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(n,e,e),n}function T(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)})).then((function(){return function(e){y(e);for(var t=d[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,k(e)?E(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw b(e,t),t}))}(e).then((function(){T(e,t,n,r-1)}))})).catch(n);n(o)}}var M={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=d[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=A);var o=[];function a(){return s.resolve()}for(var l=0;l<i.forages.length;l++){var c=i.forages[l];c!==t&&o.push(c._initReady().catch(a))}var u=i.forages.slice(0);return s.all(o).then((function(){return n.db=i.db,C(n)})).then((function(e){return n.db=e,k(n,t._defaultConfig.version)?E(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var o=u[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}(),iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){T(n._dbInfo,g,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;_(r)&&(r=x(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(l){r(l)}}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new s((function(t,r){n.ready().then((function(){T(n._dbInfo,g,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),_(e)&&(e=x(e)),t(e)},s.onerror=function(){r(s.error)}}catch(a){r(a)}}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=new s((function(n,i){var a;r.ready().then((function(){return a=r._dbInfo,"[object Blob]"===p.call(t)?function(e){return"boolean"==typeof f?s.resolve(f):(t=e,new s((function(e){var n=t.transaction(h,m),r=o([""]);n.objectStore(h).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))).then((function(e){return f=e}));var t}(a.db).then((function(e){return e?t:(n=t,new s((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){T(r._dbInfo,m,(function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=l.error?l.error:l.transaction.error;i(e)}}catch(c){i(c)}}))})).catch(i)}));return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=new s((function(t,r){n.ready().then((function(){T(n._dbInfo,m,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(a){r(a)}}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){T(t._dbInfo,m,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(s){n(s)}}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){T(t._dbInfo,g,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(s){n(s)}}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){e<0?t(null):n.ready().then((function(){T(n._dbInfo,g,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,l=s.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(c){r(c)}}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){T(t._dbInfo,g,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){n(o.error)}}catch(a){n(a)}}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):C(e).then((function(t){var n=d[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));n=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;y(e);var r=d[e.name],o=r.forages;t.close();for(var a=0;a<o.length;a++){var l=o[a];l._dbInfo.db=null,l._dbInfo.version=n}return new s((function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,w(n._dbInfo)}})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}})):o.then((function(t){y(e);var n=d[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new s((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)w(r[t]._dbInfo)})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}))}else n=s.reject("Invalid arguments");return a(n,t),n}},L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/^~~local_forage_type~([^~]+)~/,R="__lfsc__:",D="arbf",O="blob",z="si08",B="ui08",W="uic8",N="si16",F="si32",j="ur16",U="ui32",P="fl32",H="fl64",q=Object.prototype.toString;function $(e){var t,n,r,i,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=L.indexOf(e[t]),r=L.indexOf(e[t+1]),i=L.indexOf(e[t+2]),o=L.indexOf(e[t+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c}function X(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=L[n[t]>>2],r+=L[(3&n[t])<<4|n[t+1]>>4],r+=L[(15&n[t+1])<<2|n[t+2]>>6],r+=L[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var G={serialize:function(e,t){var n="";if(e&&(n=q.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===q.call(e.buffer))){var r,i=R;e instanceof ArrayBuffer?(r=e,i+=D):(r=e.buffer,"[object Int8Array]"===n?i+=z:"[object Uint8Array]"===n?i+=B:"[object Uint8ClampedArray]"===n?i+=W:"[object Int16Array]"===n?i+=N:"[object Uint16Array]"===n?i+=j:"[object Int32Array]"===n?i+=F:"[object Uint32Array]"===n?i+=U:"[object Float32Array]"===n?i+=P:"[object Float64Array]"===n?i+=H:t(new Error("Failed to get type for BinaryArray"))),t(i+X(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+e.type+"~"+X(this.result);t(R+O+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){t(null,s)}},deserialize:function(e){if(e.substring(0,9)!==R)return JSON.parse(e);var t,n=e.substring(13),r=e.substring(9,13);if(r===O&&I.test(n)){var i=n.match(I);t=i[1],n=n.substring(i[0].length)}var s=$(n);switch(r){case D:return s;case O:return o([s],{type:t});case z:return new Int8Array(s);case B:return new Uint8Array(s);case W:return new Uint8ClampedArray(s);case N:return new Int16Array(s);case j:return new Uint16Array(s);case F:return new Int32Array(s);case U:return new Uint32Array(s);case P:return new Float32Array(s);case H:return new Float64Array(s);default:throw new Error("Unkown type: "+r)}},stringToBuffer:$,bufferToString:X};function V(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function K(e,t,n,r,i,o){e.executeSql(n,r,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,s):V(e,t,(function(){e.executeSql(n,r,i,o)}),o)}),o):o(e,s)}),o)}function Y(e,t,n,r){var i=this;e=c(e);var o=new s((function(o,s){i.ready().then((function(){void 0===t&&(t=null);var a=t,l=i._dbInfo;l.serializer.serialize(t,(function(t,c){c?s(c):l.db.transaction((function(n){K(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Y.apply(i,[e,a,n,r-1]));s(t)}}))}))})).catch(s)}));return a(o,n),o}var J={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new s((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction((function(i){V(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=G,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){K(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var l=o.item(a),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){K(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){return Y.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=c(e);var r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){K(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){K(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){K(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){K(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){K(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return a(r=e.name?new s((function(t){var r,o;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t((o=r,new s((function(e,t){o.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).name);e({db:o,storeNames:r})}),(function(e,n){t(n)}))}),(function(e){t(e)}))}))))})).then((function(e){return new s((function(t,n){e.db.transaction((function(r){function i(e){return new s((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],a=0,l=e.storeNames.length;a<l;a++)o.push(i(e.storeNames[a]));s.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):s.reject("Invalid arguments"),t),r}};function Z(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}var Q={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=Z(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=G,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(i),s++)))return c}}}));return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new s((function(i,o){var s=r._dbInfo;s.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+e,t),i(n)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||o(a),o(a)}}))}))}));return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return a(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(i){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return a(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return a(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return a(r=e.name?new s((function(t){e.storeName?t(Z(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):s.reject("Invalid arguments"),t),r}},ee=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},te=function(e,t){for(var n=e.length,r=0;r<n;){if(ee(e[r],t))return!0;r++}return!1},ne=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},re={},ie={},oe={INDEXEDDB:M,WEBSQL:J,LOCALSTORAGE:Q},se=[oe.INDEXEDDB._driver,oe.WEBSQL._driver,oe.LOCALSTORAGE._driver],ae=["dropInstance"],le=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ae),ce={description:"",driver:se.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ue(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function he(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(ne(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var fe=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe)if(oe.hasOwnProperty(n)){var r=oe[n],i=r._driver;this[n]=i,re[i]||this.defineDriver(r)}this._defaultConfig=he({},ce),this._config=he({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new s((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=le.concat("_initStorage"),l=0,c=o.length;l<c;l++){var u=o[l];if((!te(ae,u)||e[u])&&"function"!=typeof e[u])return void n(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=s.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,r=ae.length;n<r;n++){var i=ae[n];e[i]||(e[i]=t(i))}}();var h=function(n){re[r],re[r]=e,ie[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(f){n(f)}}));return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=re[e]?s.resolve(re[e]):s.reject(new Error("Driver not found."));return l(r,t,n),r},e.prototype.getSerializer=function(e){var t=s.resolve(G);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;ne(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function a(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=c.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();var l=new Error("No available storage method found.");return r._driverSet=s.reject(l),r._driverSet}()}}(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=s.reject(e),r._driverSet})),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!ie[e]},e.prototype._extend=function(e){he(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=le.length;e<t;e++)ue(this,le[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),de=new fe;t.exports=de},{3:3}]},{},[4])(4)),Hi.exports);
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/const $i=Ze(qi);var Xi,Gi={exports:{}};Xi=()=>{const e=globalThis;e.HTMLElement;let t=null,n=!1;const r=e.WebStreamsPolyfill||{};let i=/constructor/i.test(e.HTMLElement)||!!e.safari||!!e.WebKitPoint;const o={createWriteStream:function(e,r=null,a=null){let l={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},c=0,u=null,h=null;if(Number.isFinite(r)?([a,r]=[r,a],l.size=a,l.writableStrategy=r):r&&r.highWaterMark?(l.size=a,l.writableStrategy=r):l=r||{},!i){t||(t=s(o.mitm)),u=new MessageChannel,e=encodeURIComponent(e.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const r={transferringReadable:n,pathname:l.pathname||Math.random().toString().slice(-6)+"/"+e,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+e}};l.size&&(r.headers["Content-Length"]=l.size);const i=[r,"*",[u.port2]];if(n){const e=void 0;h=new o.TransformStream(e,l.writableStrategy,l.readableStrategy);const t=h.readable;u.port1.postMessage({readableStream:t},[t])}u.port1.onmessage=e=>{e.data.download?(t.isPopup&&(t.remove(),t=null,s(o.mitm)),s(e.data.download)):e.data.abort&&(f=[],u.port1.postMessage("abort"),u.port1.onmessage=null,u.port1.close(),u.port2.close(),u=null)},t.loaded?t.postMessage(...i):t.addEventListener("load",(()=>{t.postMessage(...i)}),{once:!0})}let f=[];return!i&&h&&h.writable||new o.WritableStream({write(e){if(!(e instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");i?f.push(e):(u.port1.postMessage(e),c+=e.length)},close(){if(i){const t=new Blob(f,{type:"application/octet-stream; charset=utf-8"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=e,n.click()}else u.port1.postMessage("end")},abort(){f=[],u.port1.postMessage("abort"),u.port1.onmessage=null,u.port1.close(),u.port2.close(),u=null}},l.writableStrategy)},WritableStream:e.WritableStream||r.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"./mitm.html"};function s(e){if(!e)throw new Error("meh");const t=document.createElement("iframe");return t.hidden=!0,t.src=e,t.loaded=!1,t.name="iframe",t.isIframe=!0,t.postMessage=(...e)=>t.contentWindow.postMessage(...e),t.addEventListener("load",(()=>{t.loaded=!0}),{once:!0}),document.body.appendChild(t),t}try{new Response(new ReadableStream),"serviceWorker"in navigator||(i=!0)}catch(a){i=!0}return(()=>{try{(()=>{const{readable:e}=new TransformStream,t=new MessageChannel;t.port1.postMessage(e,[e]),t.port1.close(),t.port2.close(),n=!0,Object.defineProperty(o,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})})()}catch(a){}})(),o},void 0!==Gi?Gi.exports=Xi():"function"==typeof define&&"object"==typeof define.amd?define(Xi):(void 0).streamSaver=Xi();const Vi=(null==Gi.exports?{}:Gi.exports).default||Gi.exports;class Ki{constructor(e,t,n=3,r=6,i=6e4){this.fileID=e,this.downloadURL=t,this.chunkByteSize=n*this.ChunkUnitM,this.eventTarget=Ke(),this.initIndexDB(),r>=3&&(this.cacheSize=r),i>this.requestTimeout&&(this.requestTimeout=i)}ChunkUnitM=1048576;chunkByteSize;totalChunks=1;currentDB;keys;fileMetaData=null;finishNum=0;eventTarget;cancelSource;isStarting=!1;fileName;cacheSize=6;requestTimeout=6e4;on(e,t){this.eventTarget.on(e,t)}dispatch(e,t){this.eventTarget.emit(e,t)}dispatchError(e){this.eventTarget.emit("error",e)}dispatchInfo(e){this.eventTarget.emit("info",e)}async queryDownloadFileMeta(e,t="",n){this.dispatchInfo("开始获取文件信息");const r=await hi(t,e,n);let i=null;return r&&200===r.status&&(i=r.data),i}async getIFileMeta(){if(null===this.fileMetaData){const e=await(this.currentDB?.getItem("fileinfo"));this.fileMetaData=e||null}return this.fileMetaData}initIndexDB(){this.currentDB=$i.createInstance({name:this.fileID,driver:$i.INDEXEDDB})}async init(e){if(this.finishNum=0,e){const t="fileinfo";this.fileMetaData={id:e.id,name:e.name,length:e.length,downloadID:e.downloadID,chunkSize:this.chunkByteSize},this.fileName=e.name,this.currentDB?.setItem(t,this.fileMetaData)}if(null!=this.fileMetaData){const e=this.fileMetaData.chunkSize;null!=e&&e>0&&(this.chunkByteSize=e)}this.fileMetaData&&(this.totalChunks=Math.ceil(this.fileMetaData.length/this.chunkByteSize)),this.dispatchInfo("完成初始化文件信息，总分片："+this.totalChunks),this.currentDB&&(this.keys=await this.currentDB.keys())}getTotalChunks(){return this.totalChunks}pause(){this.cancelSource&&this.isStarting&&(this.cancelSource.cancel(),this.isStarting=!1),this.dispatchInfo("已暂停下载任务")}restart(){this.dispatchInfo("正在重启下载任务"),this.download()}delete(){this.cancelSource&&this.cancelSource.cancel(),$i.dropInstance({name:this.fileID}),this.currentDB=void 0,this.keys&&(this.keys.length=0,this.keys=void 0),this.finishNum=0,this.downloadProgress(),this.outputProgress(0),this.dispatchInfo("已删除下载任务")}sleep(e){return new Promise((t=>setTimeout(t,e)))}async download(e,t,n){let r=e;if(!r&&this.downloadURL&&(r=this.downloadURL),!r)throw Error("下载URL不能为空!");this.currentDB||this.initIndexDB();const i=ft.Axios.CancelToken;this.cancelSource=i.source(),this.isStarting=!0;const o={key:this.fileMetaData?.downloadID},s=n??o;let a=0;const l=this.cacheSize;let c=0;for(let u=0;u<this.totalChunks;u++){if(this.keys){const e=this.keys?.indexOf(u.toString());if(e>=0){a++,a>this.finishNum&&(this.finishNum=a,this.downloadProgress());continue}}const e=u*this.chunkByteSize;let n=e+this.chunkByteSize-1;this.fileMetaData&&n>this.fileMetaData.length&&(n=this.fileMetaData.length-1);const i={range:`bytes=${e}-${n}`};for(;c>=l;)await this.sleep(200);const o=u.toString();this.dispatchInfo(`开始下载分片${u+1}/${this.totalChunks}`),c++,hi(r,t,s,i,"arraybuffer",this.cancelSource?.token,this.requestTimeout).then((async e=>{const t=e.data;c--,await(this.currentDB?.setItem(o,t)),a++,a>this.finishNum&&(this.finishNum=a,this.downloadProgress());const n=parseInt(o)+1;this.dispatchInfo(`完成下载分片${n}/${this.totalChunks}`),this.savefile()})).catch((e=>{c--;const t=parseInt(o)+1;this.dispatchError(`下载第${t}）个分片内容失败！`)}))}this.finishNum===this.totalChunks&&this.savefile()}downloadProgress(){const e=100*this.finishNum/this.totalChunks;this.dispatch("downloadProgress",e)}outputProgress(e){const t=100*e/this.totalChunks;this.dispatch("saveProgress",t)}async savefile(){if(this.finishNum===this.totalChunks){if(!this.fileName)return void this.dispatchError("下载错误：文件名为空!");this.dispatchInfo("开始保存下载文件:"+this.fileName);const e=Vi.createWriteStream(this.fileName).getWriter();let t=0;for(let n=0;n<this.totalChunks;n++){const r=n.toString();let i=await(this.currentDB?.getItem(r));if(i||(i=await(this.currentDB?.getItem(r))),!i)return void this.dispatchError(`输出分片第${n+1}）个内容为空，错误退出！`);let o=new Response(i).body;if(null===o)return void this.dispatchError(`输出分片第${n+1}）个内容为空，错误退出！`);const s=o.getReader();for(;;){const{done:t,value:n}=await s.read();if(t)break;await e.write(n)}t++,this.outputProgress(t),this.dispatchInfo(`完成第${n+1}个分片输出`)}e.close(),$i.dropInstance({name:this.fileID}),this.dispatch("success"),this.isStarting=!1,this.dispatchInfo("完成文件下载")}}}function Yi(e={},t={}){let n;for(n in t)wt(t[n])?e[n]=Yi(e[n],t[n]):e[n]=t[n];return e}function Ji(e,t,n={name:void 0}){const r=e.resolve({path:t,query:n});globalThis.open(r.href,"_blank")}function Zi(e){let t=e;if(e.endsWith("/")){if(e.endsWith("/#/"))return t;t=e+"#/"}else t=e+"/#/"}function Qi(e,t="/"){if(e)return e.startsWith("/")?e.startsWith(t)?e:`${t}${e}`:"/"===t?`${t}${e}`:`${t}/${e}`}function eo(e,t){e.getRoutes().find((e=>"/"===e.path))||e.addRoute({name:"/",path:"/",redirect:t.path})}function to(e){const t=[];let n=[];return Object.keys(e).forEach((t=>{const r=e[t];r&&n.push(...r)})),n=n.sort(((e,t)=>{let n=0,r=0;return e.meta&&(n=null!=e.meta.index?Number(e.meta.index):100),t.meta&&(r=null!=t.meta.index?Number(t.meta.index):100),n-r})),t.push(...n),n.length=0,t}function no(e,t=!1){let n=[];for(const r in e){const t=e[r];t&&t.length>0&&(n.push(...t),t.length=0),delete e[r]}return t&&(n=n.sort(((e,t)=>{let n=0,r=0;return null!=e.index&&(n=Number(e.index)),null!=t.index&&(r=Number(t.index)),n-r}))),n}const ro=new Map;function io(e,t=!1){if(t&&ro.size>0)return ro;ro.clear();for(const n in e){const t=e[n];t&&t.length>0&&(t.forEach((e=>{let t;const n=e.layoutID;ro.has(n)&&(t=ro.get(n)),t||(t=new Array,ro.set(n,t)),t&&t.push(e)})),t.length=0),delete e[n]}return ro}function oo(e,t="/"){let n=t;return e.redirect&&e.children?(n=e.path.startsWith(t)?e.path:t.endsWith("/")?t+e.path:t+"/"+e.path,oo(e.children[0],n)):(n=e.path.startsWith(t)?e.path:`${t}/${e.path}`,{title:e.meta?.title,fullPath:n,path:e.path,icon:e.meta?.icon,keepAlive:e.meta?.keepAlive,name:e.name})}function so(e){const t=function(e){if(!e)return;const t=e,n=[];if(t)for(let r of t){const e=ao(r);e&&n.push(e)}return n}(e.bussinessRoutes),n=function(e){if(!e)return;const t=e;if(t&&t.length>0){const e=[];return t.forEach((t=>{const n=lo(t);n&&e.push(n)})),e}}(e.widgetMenuConfig),r=function(e){if(e&&e.length>0){const t=[];return e.forEach((e=>{const n=function(e){if(e)return{id:e.id,label:e.label,layoutID:e.layoutID,container:e.container,preload:e.preload,afterid:e.afterid,bindid:e.bindid,group:e.group}}(e);n&&t.push(n)})),t}}(e.widgetConfig),i=(o=e.functionList)&&o.length>0?o:void 0;var o;const s=e.pkgObject.version,a=e.pkgObject.name;return{id:function(e,t){const n=`${e}_${t}`;return Ut.MD5(n)}(a,s),name:ft.Config.UI.SiteTitle,group:ft.Config.UI.Group,product:a,version:s,routes:t,widgetMenu:n,widgets:r,functions:i}}function ao(e){if(e){let t=0;e.meta?.hidden&&(t=1);let n={path:e.path,name:e.name,title:e.meta?.title,type:t,index:e.meta?.index};if(e.children){const t=[];for(let n of e.children){const e=ao(n);e&&t.push(e)}t.length>0&&(n.children=t)}return n}}function lo(e){if(!e)return;const t={name:e.name,index:e.index,path:e.path,type:e.type};return e.children&&e.children.length>0&&(t.children=[],e.children.forEach((e=>{const n=lo(e);n&&t.children?.push(n)}))),t}function co(e,t){const n=so(e);pr(n,t),ft.Message?.msg("导出系统功能权限文件成功！")}function uo(e){e&&ft.EventBus.emit(ot.ModalContainerWidget_LoadModal,e)}function ho(e){ft.EventBus.emit(ot.ModalContainerWidget_CloseModal,e)}let fo=[];const po=()=>{setTimeout((async()=>{const e=await async function(){const e=await async function(e){const t=/<script.*src=["'](?<src>[^"']+)/gm,n=[];let r;for(;r=t.exec(e);)n.push(r.groups?.src??"");return n}(await fetch("/").then((e=>e.text())));if(!fo.length)return fo=e,!1;if(e.length!==fo.length)return fo=e,!0;for(let t=0;t<fo.length;t++)if(fo[t]!==e[t])return fo=e,!0;return!1}();e?confirm("页面有更新，点击确定刷新页面?")&&location.reload():po()}),5e3)},go=new Map,mo=me(new Map);class vo{static addWindowPanel(e){go.set(e.id,e)}static removeWindowPanel(e){go.has(e)&&(go.delete(e),mo.value.delete(e))}static minimizeWindowPanel(e){go.has(e)&&mo.value.set(e,-1)}static openWindowPanel(e){go.has(e)&&mo.value.set(e,1)}}Z(vo,"ZIndexMax",1);const yo={width:1024,height:1024,body:'<path fill="currentColor" fill-rule="evenodd" d="M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926L224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512L166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"/>'},wo={width:1024,height:1024,body:'<path fill="currentColor" d="M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"/>'},bo={width:1024,height:1024,body:'<path fill="currentColor" d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"/>'},So={width:1024,height:1024,body:'<path fill="currentColor" d="M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"/>'},Co=["src"],Eo={key:1,class:"paneltitle"},ko={class:"dragPanelBar"},xo={class:"dragPanelContent"},_o={class:"drag-pointer-group"},Ao=pt(he({__name:"XWindow",props:{top:{type:[String,Number],default:0},left:{type:[String,Number],default:0},nWidth:{type:[String,Number],default:"300px"},nHeight:{type:[String,Number],default:"400px"},icon:{type:String,default:""},title:{type:String,default:""},titleHeight:{type:[String,Number],default:"40px"},hasMin:{type:Boolean,default:!1},hasMax:{type:Boolean,default:!1},hasClose:{type:Boolean,default:!0},isDark:{type:Boolean,default:!1},pid:{type:String,default:""},tag:{type:[String,Array,Object,Number],default:""},right:{type:[String,Number],default:"unset"},bottom:{type:[String,Number],default:"unset"}},emits:["close","open","loaded","minimize"],setup(e,{expose:t,emit:n}){const r=Xt(),i=e,o=n,s=me(),a=me(),l=pe((()=>i.isDark)),c=me({x:0,y:0}),u=me({width:0,height:0}),h=e=>{s.value&&(s.value.style.left=`${e.x}px`,s.value.style.top=`${e.y}px`)};fe((()=>c.value),(e=>{h(e)}));const f=e=>{s.value&&(s.value.style.width=`${e.width}px`,s.value.style.height=`${e.height}px`)};fe((()=>u.value),(e=>{f(e)}));const d={eventListenerController:null,startingEdges:null,newEdges:null,clickStart:null,mount:()=>{Object.entries(d.refs).forEach((([e,t])=>{t.value&&t.value.addEventListener("mousedown",(t=>{d.mouseDown(t,e)}))}))},mouseDown:(e,t)=>{0==e.button&&(e.preventDefault(),d.startingEdges={left:c.value.x,top:c.value.y,right:c.value.x+u.value.width,bottom:c.value.y+u.value.height},d.newEdges={...d.startingEdges},d.clickStart={x:e.clientX,y:e.clientY},d.eventListenerController=new AbortController,document.addEventListener("mousemove",(e=>{d.mouseMove(e,t)}),{signal:d.eventListenerController.signal}),document.addEventListener("mouseup",(e=>{d.mouseUp(e,t)}),{signal:d.eventListenerController.signal}))},mouseMove:(e,t)=>{if(null!=d.startingEdges&&null!=d.newEdges&&null!=d.clickStart&&d.refs[t].value){if(e.preventDefault(),t.toLowerCase().includes("north")){d.newEdges.top=Math.max(d.startingEdges.top+e.clientY-d.clickStart.y,0);const t=d.newEdges.bottom-d.newEdges.top-100;t<0&&(d.newEdges.top+=t)}else t.toLowerCase().includes("south")&&(d.newEdges.bottom=Math.min(d.startingEdges.bottom+e.clientY-d.clickStart.y,document.body.clientHeight));if(t.toLowerCase().includes("west")){d.newEdges.left=Math.max(d.startingEdges.left+e.clientX-d.clickStart.x,0);const t=d.newEdges.right-d.newEdges.left-250;t<0&&(d.newEdges.left+=t)}else t.toLowerCase().includes("east")&&(d.newEdges.right=Math.min(d.startingEdges.right+e.clientX-d.clickStart.x,document.body.clientWidth));d.update()}},update:()=>{null!=d.newEdges&&null!=d.startingEdges&&(c.value={x:Math.max(d.newEdges.left,0),y:Math.max(d.newEdges.top,0)},u.value={width:Math.min(Math.max(d.newEdges.right-d.newEdges.left,250),document.body.clientWidth),height:Math.min(Math.max(d.newEdges.bottom-d.newEdges.top,100),document.body.clientHeight)})},mouseUp:(e,t)=>{0==e.button&&null!=d.startingEdges&&(e.preventDefault(),d.startingEdges=null,d.newEdges=null,d.clickStart=null,d.eventListenerController&&(d.eventListenerController.abort(),d.eventListenerController=null))},refs:{northWest:me(null),north:me(null),northEast:me(null),west:me(null),east:me(null),southWest:me(null),south:me(null),southEast:me(null)}},p={startingMouse:null,startingPosition:null,mouseDown:e=>{0==e.button&&(e.preventDefault(),p.startingMouse={x:e.clientX,y:e.clientY},p.startingPosition=c.value,document.addEventListener("mousemove",p.mouseMove),document.addEventListener("mouseup",p.mouseUp))},mouseMove:e=>{p.startingMouse&&p.startingPosition&&(e.preventDefault(),c.value={x:Math.min(Math.max(p.startingPosition.x+e.clientX-p.startingMouse.x,0),document.body.clientWidth-u.value.width),y:Math.max(p.startingPosition.y+e.clientY-p.startingMouse.y,0)})},mouseUp:e=>{0==e.button&&p.startingMouse&&p.startingPosition&&(e.preventDefault(),p.startingMouse=null,p.startingPosition=null,document.removeEventListener("mousemove",p.mouseMove),document.removeEventListener("mouseup",p.mouseUp))}};function g(e){return{id:r,icon:i.icon,title:i.title,pid:i.pid,data:e??i.tag}}const m=me(1),v=pe((()=>!(-1===mo.value.get(r)))),y=me(!1),w=me(!0),b=pe((()=>"z-index:"+m.value));function S(){m.value<=vo.ZIndexMax&&(vo.ZIndexMax+=1,m.value=vo.ZIndexMax)}function C(){o("minimize",g()),vo.minimizeWindowPanel(r)}function E(){y.value=!y.value}function k(){o("close",g(!1)),vo.removeWindowPanel(r),w.value=!1}const x=pe((()=>y.value?So:bo)),_={id:r,isShow:v,close:k,open:function(){o("open",g(!0)),w.value=!0},showHidePanel:C,updatePosition:h};function A(e,t=document.body.clientWidth){if(bt(e))return e;{const n=Number(e);if(n==n)return n;if(e.endsWith("px")){const t=e.substring(0,e.length-2);return Number(t)}if(e.endsWith("%")){const n=e.substring(0,e.length-1);return Number(n)/100*t}return 300}}function T(e,t){if(!s.value)return;let n=e??document.body.clientWidth,r=t??document.body.clientHeight,o=A(i.left,n),a=A(i.top,r);"unset"==i.bottom&&"unset"==i.right||("unset"!=i.right&&(o=n-A(i.right,n)-u.value.width),"unset"!=i.bottom&&(a=r-A(i.bottom,r)-u.value.height)),c.value.x=o,c.value.y=a,h(c.value)}function M(){if(L&&("unset"!=i.bottom||"unset"!=i.right)){const e=L.getBoundingClientRect();T(e.width,e.height)}}let L;return t(_),ge((()=>{!function(){let e=96;if(i.hasMin||(e-=32),i.hasMax||(e-=32),i.hasClose||(e-=32),Ut.setCssVar("--right-bar-width",e+"px",a.value),!a.value)return;const t=bt(i.titleHeight)?i.titleHeight+"px":i.titleHeight;a.value.style.height=t,a.value.style.lineHeight=t}(),function(){const e=g(_);vo.addWindowPanel(e),o("loaded",e)}();const{parentElement:e,clientWidth:t,clientHeight:n}=function(e){if(!(e instanceof HTMLElement))throw new Error("参数必须是有效的 DOM 元素");let t=e.parentElement;for(;t&&"static"===globalThis.getComputedStyle(t).position;)t=t.parentElement,t||(t=document.documentElement);const n=t?.clientWidth,r=t?.clientHeight;return{clientWidth:n,clientHeight:r,parentElement:t}}(s.value);L=e,u.value={width:A(i.nWidth,t),height:A(i.nHeight,n)},f(u.value),T(t,n),d.mount(),Ut.windowResizeHandler(M)})),ve((()=>{Ut.offWindowResizeHandler(M),vo.removeWindowPanel(r)})),(t,n)=>(ye(),de(Le,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:we((()=>[w.value?be((ye(),Ee("div",{key:0,ref_key:"dragPanelRef",ref:s,class:Me(["dragWindowPanel",{maxPanel:y.value,dragWindowPanel_dark:l.value}]),style:Te(b.value)},[ke("div",{class:"dragPanelTitle",ref_key:"dragPanelTitleRef",ref:a,onMousedown:n[0]||(n[0]=(...e)=>p.mouseDown&&p.mouseDown(...e)),onClick:Ae(S,["stop"])},[xe(t.$slots,"title",{},(()=>[i.icon?(ye(),Ee("img",{key:0,src:i.icon,width:"24",height:"24"},null,8,Co)):Se("",!0),i.title?(ye(),Ee("span",Eo,Fe(i.title),1)):Se("",!0)]),!0),ke("div",ko,[e.hasMin?(ye(),de(_e(Xe),{key:0,icon:_e(wo),onClick:Ae(C,["stop"])},null,8,["icon"])):Se("",!0),e.hasMax?(ye(),de(_e(Xe),{key:1,icon:x.value,onClick:Ae(E,["stop"])},null,8,["icon"])):Se("",!0),e.hasClose?(ye(),de(_e(Xe),{key:2,icon:_e(yo),onClick:Ae(k,["stop"])},null,8,["icon"])):Se("",!0)])],544),ke("div",xo,[xe(t.$slots,"default",{},void 0,!0)]),ke("div",_o,[ke("div",{class:"cursor-nw-resize",ref:d.refs.northWest},null,512),ke("div",{class:"cursor-n-resize",ref:d.refs.north},null,512),ke("div",{class:"cursor-ne-resize",ref:d.refs.northEast},null,512),ke("div",{class:"cursor-w-resize",ref:d.refs.west},null,512),n[1]||(n[1]=ke("span",{style:{"pointer-events":"all",visibility:"hidden"}},null,-1)),ke("div",{class:"cursor-e-resize",ref:d.refs.east},null,512),ke("div",{class:"cursor-sw-resize",ref:d.refs.southWest},null,512),ke("div",{class:"cursor-s-resize",ref:d.refs.south},null,512),ke("div",{class:"cursor-se-resize",ref:d.refs.southEast},null,512)])],6)),[[Ce,v.value]]):Se("",!0)])),_:3}))}}),[["__scopeId","data-v-d0d67b92"]]),To={class:"adivider"},Mo={class:"contentText"};pt(he({__name:"ADivider",props:{align:{type:String,default:"left"},color:{type:String,default:"#888"}},setup(e){qe((e=>({v1dc34ba7:n.value})));const t=e,n=pe((()=>function(e){return/^#([0-9a-fA-F]{3}|[0-9a-fA-f]{6})$/.test(e)}(t.color)||function(e){if("object"==typeof e||!e)return;const t=e.toLowerCase().substring(0,1);return"#"===t?1:"r"===t||"("===t?0:"h"===t?2:0}(t.color)?t.color:"#888")),r=pe((()=>"left"!=t.align?"flex:1;":"width:40px;")),i=pe((()=>"right"!=t.align?"flex:1;":"width:40px;"));return(e,t)=>(ye(),Ee("div",To,[ke("div",{class:"line",style:Te(r.value)},null,4),ke("div",Mo,[xe(e.$slots,"default",{},void 0,!0)]),ke("div",{class:"line",style:Te(i.value)},null,4)]))}}),[["__scopeId","data-v-133ad44f"]]);const Lo={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:10},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||0===this.size?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}};function Io(e){const t=new oe.Writer(new oe.ByteStream);return t.serialize(e),t.stream.toString()}function Ro(e){return null==e||""===e?e:new oe.Reader(new oe.ByteStream(e)).deserialize()}pt(Lo,[["render",function(e,t,n,r,i,o){return ye(),Ee("div",{class:"splitpanes__pane",onClick:t[0]||(t[0]=t=>o.onPaneClick(t,e._.uid)),style:Te(e.style)},[xe(e.$slots,"default")],4)}]]);const Do=class{debug=!1;simple=!1;utc=!1;longType="number";dictType="object";nullType=void 0;textEncoder=new TextEncoder;textDecoder=new TextDecoder;constructor(){}encodeResponse(e,t={}){var n=new oe.ByteStream,r=new oe.Writer(n,this.simple,this.utc),i=t;this.simple;var o=0;for(var s in i)o++;o>0&&(n.writeByte(72),r.serialize(i),r.reset()),e instanceof Error?(n.writeByte(69),r.serialize(this.debug&&e.stack?e.stack:e.message)):(n.writeByte(82),r.serialize(e)),n.writeByte(122);const a=n.takeBytes();return this.textDecoder.decode(a)}decodeRequest(e,t={}){const n=this.textEncoder.encode(e);if(0===n.length)return["~",[]];var r=new oe.ByteStream(n),i=new oe.Reader(r,!1);i.longType=this.longType,i.dictType=this.dictType;var o=r.readByte();if(72===o){var s=i.deserialize(this.nullType);for(var a in s)t[a]=s[a];i.reset(),o=r.readByte()}switch(o){case 67:return[i.deserialize(String),this.decodeArguments(i)];case 122:return["~",[]];default:throw new Error("Invalid request:\r\n"+r.toString())}}decodeArguments(e){var t=e.stream;let n=[];if(97===t.readByte()){e.reset();var r=oe.ValueReader.readCount(t);const o=new Array(r).fill(this.nullType);n=new Array(r),e.addReference(n);for(var i=0;i<r;++i)n[i]=e.deserialize(o[i]);t.readByte()}return n}encodeRequest(e,t,n={}){var r=new oe.ByteStream,i=new oe.Writer(r,this.simple,this.utc),o=n;this.simple&&(o.simple=!0);var s=0;for(var a in o)s++;s>0&&(r.writeByte(72),i.serialize(o),i.reset()),r.writeByte(67),i.serialize(e),t.length>0&&(i.reset(),i.serialize(t)),r.writeByte(122);const l=r.takeBytes();return this.textDecoder.decode(l)}decodeResponse(e,t={}){const n=this.textEncoder.encode(e);var r=new oe.ByteStream(n),i=new oe.Reader(r,!1);i.longType=this.longType,i.dictType=this.dictType;var o=r.readByte();if(72===o){var s=i.deserialize();for(var a in s)t[a]=s[a];i.reset(),o=r.readByte()}switch(o){case 82:return t.simple&&(i.simple=!0),i.deserialize();case 69:throw new Error(i.deserialize(String));case 122:return;default:throw new Error("Invalid response:\r\n"+r.toString())}}};Z(Do,"Instance",new Do);let Oo=Do;const zo=new Map,Bo=new Map;let Wo;const No={getDefaultClient(){if(Wo||(Wo=new Dt(SysConfig?.ServiceURL.DefaultHproseAPI)),!Wo)throw Error("HproseProxy对象为空");return Wo},registerHprose(e,t){const n=Bo.get(e);if(!n){const n=new Dt(t);zo.set(e,n)}return n},getHprose:e=>Bo?.get(e),getProxyHprose:e=>zo.get(e),unregisterHprose(e){zo.get(e)&&(Bo.delete(e),zo.delete(e))}},Fo="/api/User/Login",jo="/api/User/ChangeMyPwd",Uo="/api/Check/ExitLogin",Po="/api/Check/RefreshToken",Ho="/api/Check/CheckToken",qo="/api/System/GetSystem",$o="access_token",Xo=ft?.Config?.ServiceURL.LoginAuthURL;function Go(){const e=function(){const e=It();return e?.refresh}();e&&hi(Po,Xo,{refreshToken:e}).then((e=>{Ko(e.data)}))}function Vo(){const e=Lt.getJsonObject($o);if(!e)return;const t=(new Date).getTime(),n=new Date(e.expire).getTime()-t;n>0&&(n<=5e3?Go():setTimeout(Go,n-5e3))}function Ko(e){const t=(new Date).getTime();let n=new Date(e.accessToken.expires).getTime()-t;if((n>=36e5||n<-6e5)&&(n=18e5),n>0){let t=It();t?(t.token=e.accessToken.tokenContent,t.expire=e.accessToken.expires,t.refresh=e.refreshToken.tokenContent):t={token:e.accessToken.tokenContent,expire:e.accessToken.expires,refresh:e.refreshToken.tokenContent},Lt.set($o,t,n/1e3),Vo()}else Lt.remove($o)}const Yo="Wm314243",Jo=ft?.Config?.ServiceURL.LoginAuthURL;async function Zo(e){const t={username:e.username,pwd:_r(e.pwd,Yo)},n=await hi(Fo,Jo,t),r=n?.data;return r&&(Ko(r.doubletoken),Bi(!1)),r}function Qo(e){const t={oldpwd:_r(e.oldpwd,Yo),newpwd:_r(e.newpwd,Yo)};return hi(jo,Jo,t)}function es(){const e=It();e&&(pi(Uo,Jo,{token:e.token,reftoken:e.refresh}),Rt())}function ts(e){return hi(Ho,Jo,{token:e})}var ns=(e=>(e[e.Widget=0]="Widget",e[e.Route=1]="Route",e[e.URL=2]="URL",e[e.Action=3]="Action",e))(ns||{});const rs="ROLE_SYSTEM_RIGHT",is=new Tt("",globalThis.sessionStorage);function os(e){is.set(rs,e)}function ss(){is.remove(rs)}function as(e){if(e)for(let t=0;t<e.length;t++){const n=e[t];n.children&&n.children.length>0?(as(n.children),0===n.children.length&&(e.splice(t,1),t--)):n.selected||(e.splice(t,1),t--)}}function ls(e,t,n="name"){e&&t&&e.forEach((e=>{const r=t.find((t=>t[n]===e[n]));r&&(e.children?r.children&&ls(e.children,r.children,n):r.children&&0!==r.children.length||r.selected&&(e.selected=r.selected))}))}function cs(e,t,n,r="name"){const i=e[n],o=t[n];i?o&&ls(i,o,r):o&&(e[n]=o)}const us=[];function hs(){return is.get(rs)}async function fs(e,t=!1){ss();const n=qo,r=ft?.Config?.ServiceURL.LoginAuthURL,i=await hi(n,r,{systemid:e});if(!i||!i.data)return void ft.Message?.warn("无法获取功能授权列表！");const o=i.data;if(o&&o.length>0){if(t){const e=JSON.parse(o[0]);return os(e),e}{const e=function(e){if(e&&e.length>0){const t=e.length;let n,r=!1;if(t>0){r=wt(e[0]);const i=r?e[0]:JSON.parse(e[0]);if(t>1)for(let t=1;t<e.length;t++){const n=e[t],o=r?n:JSON.parse(n);cs(i,o,"routes","name"),cs(i,o,"widgetMenu","name"),cs(i,o,"widgets","id"),cs(i,o,"functions","id")}n=i}return n&&(as(n.routes),as(n.widgetMenu),as(n.widgets),as(n.functions)),n}}(o);return os(e),e}}}function ds(e,t){const n={...e};return n.meta||(n.meta={}),null!=t.index&&(n.meta.index=t.index),null!=t.title&&(n.meta.title=t.title),e.children&&(n.children=[],t.children&&t.children.forEach((t=>{const r=e.children?.find((e=>e.path===t.path));if(r){const e=ds(r,t);e&&n.children?.push(e)}}))),n}function ps(e,t=2){if(0===t)return e;const n=hs();return n&&n.routes?(us.length>0||e.forEach((e=>{const t=n.routes?.find((t=>t.name===e.name));if(t){const n=ds(e,t);n&&us.push(n)}})),us):void 0}function gs(e,t=2){if(0===t&&(ft.RightWidgetConfigMap=e,ft.RightWidgetConfigMap&&ft.RightWidgetConfigMap.size>0))return ft.RightWidgetConfigMap;const n=hs();if(n&&n.widgets){const t=new Map;if(n.widgets.forEach((e=>{const n=e.layoutID;if(n){let r;t.has(n)&&(r=t.get(n)),r||(r=new Array,t.set(n,r)),r&&r.push(e)}})),n.widgets.length=0,t.size>0){const n=new Map;for(const[r,i]of t){const t=e.get(r);if(t){const e=new Array;t.forEach((t=>{i.findIndex((e=>e.id===t.id))>=0&&e.push(t)})),e.length>0&&n.set(r,e),t.length=0}}return t.clear(),ft.RightWidgetConfigMap=n,n}}}const ms={mounted(e,t){const n=t.value,r=n&&n.container&&document.querySelector(n.container)||document.querySelector("#map3dContainer")||document.body,i=n&&n.selector&&e.querySelector(n.selector)||e.querySelector(".drag-el")||e;i!==e&&i.classList.add("ls-draggable"),i.onmousedown=function(t){e.style.transition="none";const n=t.clientX-e.offsetLeft,i=t.clientY-e.offsetTop,o=r.offsetWidth,s=r.offsetHeight,a=e.offsetWidth,l=e.offsetHeight;"100"!==e.style.zIndex&&(e.style.zIndex=100),r.onmousemove=function(t){let r=t.clientX-n,c=t.clientY-i;r<0&&(r=0),c<0&&(c=0),r>o-a&&(r=o-a),c>s-l&&(c=s-l),e.style.left=r+"px",e.style.top=c+"px"},r.onmouseup=function(t){r.onmousemove=r.onmouseup=null,e.style.transition="all 0.3s"}}}};function vs(e){e.directive("drag",ms)}const ys={beforeMount(e,t){let n=null,r=0;const i=()=>t?.value(),o=()=>{Date.now()-r<100&&i(),n&&clearInterval(n),n=null};Oi.on(e,"mousedown",(e=>{0===e.button&&(r=Date.now(),Oi.once(document,"mouseup",o),n&&clearInterval(n),n=setInterval(i,100))}))}};function ws(e){e.directive("repeatClick",ys)}const bs={mounted(e,t){const n=t.value;e.style.visibility="hidden",e.style["animation-name"]="none";const r=function(e,t){if(function(e){const t=globalThis.scrollY||globalThis.pageYOffset||document.documentElement.scrollTop||e.parentNode.scrollTop,n=t+(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?document.documentElement.scrollHeight>document.documentElement.clientHeight?globalThis.innerHeight:document.documentElement.clientHeight:Math.min(document.documentElement.clientHeight,globalThis.innerHeight)),r=function(e){let t;for(;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t}(e),i=r+e.clientHeight;return r<n&&i>=t}(e)){e.style.visibility="visible";for(const n in t)e.style[n]=t[n];"none"!=e.style["animation-name"]&&(e.style["animation-duration"]||(e.style["animation-duration"]="1s")),e.parentNode.removeEventListener("scroll",o)}};let i=Date.now();const o=function(){Date.now()-i>=100&&(r(e,n),i=Date.now())};setTimeout((function(){r(e,n)}),1),e.parentNode.addEventListener("scroll",o)}};function Ss(e){e.directive("wow",bs)}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cs=Symbol("Comlink.proxy"),Es=Symbol("Comlink.endpoint"),ks=Symbol("Comlink.releaseProxy"),xs=Symbol("Comlink.finalizer"),_s=Symbol("Comlink.thrown"),As=e=>"object"==typeof e&&null!==e||"function"==typeof e,Ts=new Map([["proxy",{canHandle:e=>As(e)&&e[Cs],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Ms(e,t),[n,[n]]},deserialize:e=>(e.start(),Is(e))}],["throw",{canHandle:e=>As(e)&&_s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function Ms(e,t=globalThis,n=["*"]){t.addEventListener("message",(function r(i){if(!i||!i.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,i.origin))return;const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(js);let c;try{const t=a.slice(0,-1).reduce(((e,t)=>e[t]),e),n=a.reduce(((e,t)=>e[t]),e);switch(s){case"GET":c=n;break;case"SET":t[a.slice(-1)[0]]=js(i.data.value),c=!0;break;case"APPLY":c=n.apply(t,l);break;case"CONSTRUCT":u=new n(...l),c=Object.assign(u,{[Cs]:!0});break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;Ms(e,n),c=function(e,t){return Ns.set(e,t),e}(t,[t])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[_s]:0}}var u;Promise.resolve(c).catch((e=>({value:e,[_s]:0}))).then((n=>{const[i,a]=Fs(n);t.postMessage(Object.assign(Object.assign({},i),{id:o}),a),"RELEASE"===s&&(t.removeEventListener("message",r),Ls(t),xs in e&&"function"==typeof e[xs]&&e[xs]())})).catch((e=>{const[n,r]=Fs({value:new TypeError("Unserializable return value"),[_s]:0});t.postMessage(Object.assign(Object.assign({},n),{id:o}),r)}))})),t.start&&t.start()}function Ls(e){"MessagePort"===e.constructor.name&&e.close()}function Is(e,t){const n=new Map;return e.addEventListener("message",(function(e){const{data:t}=e;if(!t||!t.id)return;const r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}})),Bs(e,n,[],t)}function Rs(e){if(e)throw new Error("Proxy has been released and is not useable")}function Ds(e){return Us(e,new Map,{type:"RELEASE"}).then((()=>{Ls(e)}))}const Os=new WeakMap,zs="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(Os.get(e)||0)-1;Os.set(e,t),0===t&&Ds(e)}));function Bs(e,t,n=[],r=function(){}){let i=!1;const o=new Proxy(r,{get(r,s){if(Rs(i),s===ks)return()=>{var n;n=o,zs&&zs.unregister(n),Ds(e),t.clear(),i=!0};if("then"===s){if(0===n.length)return{then:()=>o};const r=Us(e,t,{type:"GET",path:n.map((e=>e.toString()))}).then(js);return r.then.bind(r)}return Bs(e,t,[...n,s])},set(r,o,s){Rs(i);const[a,l]=Fs(s);return Us(e,t,{type:"SET",path:[...n,o].map((e=>e.toString())),value:a},l).then(js)},apply(r,o,s){Rs(i);const a=n[n.length-1];if(a===Es)return Us(e,t,{type:"ENDPOINT"}).then(js);if("bind"===a)return Bs(e,t,n.slice(0,-1));const[l,c]=Ws(s);return Us(e,t,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:l},c).then(js)},construct(r,o){Rs(i);const[s,a]=Ws(o);return Us(e,t,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:s},a).then(js)}});return function(e,t){const n=(Os.get(t)||0)+1;Os.set(t,n),zs&&zs.register(e,t,e)}(o,e),o}function Ws(e){const t=e.map(Fs);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const Ns=new WeakMap;function Fs(e){for(const[t,n]of Ts)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},Ns.get(e)||[]]}function js(e){switch(e.type){case"HANDLER":return Ts.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Us(e,t,n,r){return new Promise((i=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.set(o,i),e.start&&e.start(),e.postMessage(Object.assign({id:o},n),r)}))}var Ps=Symbol("getEndpoint"),Hs=e=>{const t=Is(e);return new Proxy(t,{get:(t,n,r)=>n===Ps?e:Reflect.get(t,n,r)})};Hs(new Worker(new URL(""+new URL("../workers/worker-XXTEA-CMYO_oW7.js",import.meta.url).href,import.meta.url),{type:"module"})),Hs(new Worker(new URL(""+new URL("../workers/worker-xmath-DRrB1AaK.js",import.meta.url).href,import.meta.url),{type:"module"}));const qs=Hs(new Worker(new URL(""+new URL("../workers/worker-webcache-CO9_r3iY.js",import.meta.url).href,import.meta.url),{type:"module"})),$s=Hs(new Worker(new URL(""+new URL("../workers/worker-bigimage-ULYc5DiH.js",import.meta.url).href,import.meta.url),{type:"module"})),Xs=Ke();function Gs(e){e.addEventListener("message",(({data:e})=>{Xs.emit(e.reqID,e)}))}async function Vs(e,t,n){return new Promise(((r,i)=>{const o=String(Date.now())+String(Math.random());e.postMessage({reqID:o,op:t,args:n}),Xs.on(o,(e=>{"ok"===e.status?r(e.result):i(e.result)}))}))}function Ks(e,t){const n={};for(const r in e){const i=e[r];if(i)for(const e in i){const r=""+e;n[e]=(...e)=>Vs(t,r,e)}}return n}export{Fi as $,to as A,gi as B,Ao as C,hi as D,gs as E,mr as F,co as G,Tr as H,io as I,oi as J,It as K,Ji as L,Zi as M,di as N,pi as O,vo as P,$t as Q,kt as R,ho as S,eo as T,Et as U,Ke as V,No as W,Vo as X,gr as Y,Zo as Z,no as _,uo as a,ji as a0,zi as a1,po as a2,Pt as a3,vs as a4,Ss as a5,ws as a6,mt as a7,Io as a8,Ro as a9,Oo as aa,Di as ab,Ki as ac,fr as ad,vi as ae,pr as af,Qo as ag,si as b,ft as c,Ks as d,$s as e,ts as f,Xt as g,Ko as h,Gs as i,es as j,ss as k,ns as l,hs as m,dr as n,oo as o,bt as p,Tt as q,ot as r,Ut as s,qs as t,dt as u,fs as v,ps as w,Yi as x,St as y,Qi as z};
