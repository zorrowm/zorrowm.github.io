import{ac as e}from"./xframelib-exp-BKAIOAJ1.js";import{d as o,r as t,m as n,p as s,q as a,z as l,g as i}from"./@vue-exp-CvWX4Ub_.js";import"./vendor-f-vxzQBV.js";import"./lottie-web-exp-8BOGrbHZ.js";import"./monaco-editor-exp-Cp7eE-b9.js";import"./axios-exp-DV-hM_5A.js";import"./@iconify/vue-exp-ablgq8zQ.js";import"./@microsoft/signalr-exp-DtcqIIpb.js";const r={class:"q-pa-md q-gutter-md"},u="3a491563ee764790a44c0e77d8b15a4e",d=o({__name:"BigFileDownload",setup(o){const d=t(""),c=new e(u,"https://file.gis.digsur.com/api/Downloads/DownloadFile",10);async function p(){const e=await c.getIFileMeta();if(null===e){const e=await c.queryDownloadFileMeta("https://file.gis.digsur.com/api/Downloads/GetDownloadFileInfo","",{key:u,name:"test.tif"});await c.init(e)}else await c.init(e);c.download()}function m(){c.pause()}function g(){c.restart()}function w(){c.delete()}return c.on("downloadProgress",(e=>{const o=document.getElementById("downloadProgress");o&&(o.value=e)})),c.on("saveProgress",(e=>{const o=document.getElementById("saveProgress");o&&(o.value=e)})),c.on("success",(()=>{const e=document.getElementById("downloadProgress");e&&(e.value=100)})),c.on("info",(e=>{d.value=e})),c.on("error",(e=>{})),(e,o)=>(i(),n("div",r,[o[0]||(o[0]=s("div",{class:"text-center text-bold"},"大文件分片下载",-1)),s("button",{onClick:p},"开始分段下载"),s("span",null,l(d.value),1),o[1]||(o[1]=s("br",null,null,-1)),o[2]||(o[2]=s("input",{type:"range",id:"downloadProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),o[3]||(o[3]=a(" 下载进度 ",-1)),o[4]||(o[4]=s("br",null,null,-1)),o[5]||(o[5]=s("input",{type:"range",id:"saveProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),o[6]||(o[6]=a(" 输出文件进度 ",-1)),o[7]||(o[7]=s("br",null,null,-1)),s("button",{onClick:m},"暂停"),s("button",{onClick:g},"重启"),s("button",{onClick:w},"清空缓存")]))}});export{d as default};
