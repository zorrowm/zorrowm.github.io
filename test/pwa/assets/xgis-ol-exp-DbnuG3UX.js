var e,t=Object.defineProperty,i=(e,i,n)=>((e,i,n)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n)(e,"symbol"!=typeof i?i+"":i,n);import{B as n}from"./vendor-f-vxzQBV.js";import{d as o,w as r,C as s,r as a,o as l,t as u,e as c,g as h,f as d,j as p,u as f,p as g,z as m,D as v,O as y,V as _,m as b,F as x,B as w,k as S,A as C,J as M,K as E,h as k,a4 as T,n as P,a3 as L,c as I,b as R,T as A,a as q,a5 as F,ab as O,a6 as z,a8 as N,aa as D,W as G,v as j,E as B,H as V,i as $,Z as H,a2 as U,a9 as W}from"./@vue-exp-CvWX4Ub_.js";import{I as X}from"./@iconify/vue-exp-ablgq8zQ.js";import{b as K}from"./ol-exp-BKHNGImG.js";var Y="add",Z="remove",Q="propertychange",J="change",ee="contextmenu",te="click",ie="keydown",ne="keypress",oe="touchmove",re="wheel";class se{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function ae(e,t){return e>t?1:e<t?-1:0}function le(e,t){return e<t?1:e>t?-1:0}function ue(e,t,i){if(e[0]<=t)return 0;const n=e.length;if(t<=e[n-1])return n-1;if("function"==typeof i){for(let o=1;o<n;++o){const n=e[o];if(n===t)return o;if(n<t)return i(t,e[o-1],n)>0?o-1:o}return n-1}if(i>0){for(let i=1;i<n;++i)if(e[i]<t)return i-1;return n-1}if(i<0){for(let i=1;i<n;++i)if(e[i]<=t)return i;return n-1}for(let o=1;o<n;++o){if(e[o]==t)return o;if(e[o]<t)return e[o-1]-t<t-e[o]?o-1:o}return n-1}function ce(e,t,i){for(;t<i;){const n=e[t];e[t]=e[i],e[i]=n,++t,--i}}function he(e,t){const i=Array.isArray(t)?t:[t],n=i.length;for(let o=0;o<n;o++)e[e.length]=i[o]}function de(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function pe(){return!0}function fe(){return!1}function ge(){}function me(e){let t,i,n;return function(){const o=Array.prototype.slice.call(arguments);return(!i||this!==n||!de(o,i))&&(n=this,i=o,t=e.apply(this,arguments)),t}}function ve(e){return function(){let t;try{t=e()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}()}function ye(e){for(const t in e)delete e[t]}function _e(e){let t;for(t in e)return!1;return!t}class be{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class xe extends se{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),n=i[e]||(i[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const o=t?new be(e):e;o.target||(o.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});let a;i in r||(r[i]=0,s[i]=0),++r[i];for(let l=0,u=n.length;l<u;++l)if(a="handleEvent"in n[l]?n[l].handleEvent(o):n[l].call(this,o),!1===a||o.propagationStopped){a=!1;break}if(0==--r[i]){let e=s[i];for(delete s[i];e--;)this.removeEventListener(i,ge);delete r[i]}return a}disposeInternal(){this.listeners_&&ye(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const n=i.indexOf(t);-1!==n&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[n]=ge,++this.pendingRemovals_[e]):(i.splice(n,1),0===i.length&&delete this.listeners_[e]))}}function we(e,t,i,n,o){if(o){const o=i;i=function(r){return e.removeEventListener(t,i),o.call(n??this,r)}}else n&&n!==e&&(i=i.bind(n));const r={target:e,type:t,listener:i};return e.addEventListener(t,i),r}function Se(e,t,i,n){return we(e,t,i,n,!0)}function Ce(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),ye(e))}class Me extends xe{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(J)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=we(this,e[o],t);return n}return we(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const n=e.length;i=new Array(n);for(let o=0;o<n;++o)i[o]=Se(this,e[o],t)}else i=Se(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)Ee(i);else if(Array.isArray(e))for(let n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}function Ee(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)Ce(e[t]);else Ce(e)}function ke(){throw new Error("Unimplemented abstract method.")}Me.prototype.on,Me.prototype.once,Me.prototype.un;let Te=0;function Pe(e){return e.ol_uid||(e.ol_uid=String(++Te))}class Le extends be{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Ie extends Me{constructor(e){super(),this.on,this.once,this.un,Pe(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Le(i,e,t)),i=Q,this.hasListener(i)&&this.dispatchEvent(new Le(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const n=this.values_||(this.values_={});if(i)n[e]=t;else{const i=n[e];n[e]=t,i!==t&&this.notify(e,i)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],_e(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Re="length";class Ae extends be{constructor(e,t,i){super(e),this.element=t,this.index=i}}class qe extends Ie{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Re)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Ae(Y,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Ae(Z,t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Ae(Z,i,e)),this.dispatchEvent(new Ae(Y,t,e))}updateLength_(){this.set(Re,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let n=0,o=i.length;n<o;++n)if(i[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}class Fe extends be{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}}class Oe extends Fe{constructor(e,t,i,n,o,r){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var ze={SINGLECLICK:"singleclick",CLICK:te,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};const Ne=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"";Ne.includes("safari")&&!Ne.includes("chrom")&&(Ne.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ne));const De=Ne.includes("webkit")&&!Ne.includes("edge"),Ge=Ne.includes("macintosh"),je=typeof devicePixelRatio<"u"?devicePixelRatio:1,Be=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ve=typeof Image<"u"&&Image.prototype.decode,$e="function"==typeof createImageBitmap,He=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();var Ue="pointerdown";class We extends xe{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=we(i,Ue,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=we(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(oe,this.boundHandleTouchMove_,!!He&&{passive:!1})}emulateClick_(e){let t=new Oe(ze.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Oe(ze.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const t=new Oe(ze.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==ze.POINTERUP||t.type==ze.POINTERCANCEL){delete this.trackedTouches_[i];for(const e in this.trackedTouches_)if(this.trackedTouches_[e].target!==t.target){delete this.trackedTouches_[e];break}}else(t.type==ze.POINTERDOWN||t.type==ze.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Oe(ze.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Ce),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Oe(ze.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){const e=this.map_.getOwnerDocument();this.dragListenerKeys_.push(we(e,ze.POINTERMOVE,this.handlePointerMove_,this),we(e,ze.POINTERUP,this.handlePointerUp_,this),we(this.element_,ze.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==e&&this.dragListenerKeys_.push(we(this.element_.getRootNode(),ze.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Oe(ze.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Oe(ze.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ce(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(oe,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ce(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ce),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var Xe="postrender",Ke="loadstart",Ye="loadend",Ze="layergroup",Qe="size",Je="target",et="view";function tt(e,t){if(!e)throw new Error(t)}const it=1/0;class nt{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ye(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(e){tt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=it&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,n=t.length,o=t[e],r=i[e],s=e;for(;e<n>>1;){const o=this.getLeftChildIndex_(e),r=this.getRightChildIndex_(e),s=r<n&&i[r]<i[o]?r:o;t[e]=t[s],i[e]=i[s],e=s}t[e]=o,i[e]=r,this.siftDown_(s,e)}siftDown_(e,t){const i=this.elements_,n=this.priorities_,o=i[t],r=n[t];for(;t>e;){const e=this.getParentIndex_(t);if(!(n[e]>r))break;i[t]=i[e],n[t]=n[e],t=e}i[t]=o,n[t]=r}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let n=0;const o=t.length;let r,s,a;for(s=0;s<o;++s)r=t[s],a=e(r),a==it?delete this.queuedElements_[this.keyFunction_(r)]:(i[n]=a,t[n++]=r);t.length=n,i.length=n,this.heapify_()}}class ot extends nt{constructor(e,t){super((t=>e.apply(null,t)),(e=>e[0].getKey())),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(J,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener(J,this.boundHandleTileChange_);const e=t.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const e=this.dequeue()[0],t=e.getKey();0===e.getState()&&!(t in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[t]=!0,++this.tilesLoading_,++i,e.load())}}}var rt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function st(e,t,i){return Math.min(Math.max(e,t),i)}function at(e,t,i,n,o,r){const s=o-i,a=r-n;if(0!==s||0!==a){const l=((e-i)*s+(t-n)*a)/(s*s+a*a);l>1?(i=o,n=r):l>0&&(i+=s*l,n+=a*l)}return lt(e,t,i,n)}function lt(e,t,i,n){const o=i-e,r=n-t;return o*o+r*r}function ut(e){return 180*e/Math.PI}function ct(e){return e*Math.PI/180}function ht(e,t){const i=e%t;return i*t<0?i+t:i}function dt(e,t,i){return e+i*(t-e)}function pt(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function ft(e,t){return Math.round(pt(e,t))}function gt(e,t){return Math.floor(pt(e,t))}function mt(e,t){return Math.ceil(pt(e,t))}function vt(e,t,i){if(e>=t&&e<i)return e;const n=i-t;return((e-t)%n+n)%n+t}function yt(e,t,i){return function(n,o,r,s,a){if(!n)return;if(!o&&!t)return n;const l=t?0:r[0]*o,u=t?0:r[1]*o,c=a?a[0]:0,h=a?a[1]:0;let d=e[0]+l/2+c,p=e[2]-l/2+c,f=e[1]+u/2+h,g=e[3]-u/2+h;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let m=st(n[0],d,p),v=st(n[1],f,g);if(s&&i&&o){const e=30*o;m+=-e*Math.log(1+Math.max(0,d-n[0])/e)+e*Math.log(1+Math.max(0,n[0]-p)/e),v+=-e*Math.log(1+Math.max(0,f-n[1])/e)+e*Math.log(1+Math.max(0,n[1]-g)/e)}return[m,v]}}function _t(e){return e}function bt(e){const t=[1/0,1/0,-1/0,-1/0];for(let i=0,n=e.length;i<n;++i)qt(t,e[i]);return t}function xt(e,t,i){return i?(i[0]=e[0]-t,i[1]=e[1]-t,i[2]=e[2]+t,i[3]=e[3]+t,i):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function wt(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function St(e,t,i){let n,o;return n=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0,o=i<e[1]?e[1]-i:e[3]<i?i-e[3]:0,n*n+o*o}function Ct(e,t){return Et(e,t[0],t[1])}function Mt(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Et(e,t,i){return e[0]<=t&&t<=e[2]&&e[1]<=i&&i<=e[3]}function kt(e,t){const i=e[0],n=e[1],o=e[2],r=e[3],s=t[0],a=t[1];let l=0;return s<i?l|=16:s>o&&(l|=4),a<n?l|=8:a>r&&(l|=2),0===l&&(l=1),l}function Tt(e,t,i,n,o){return o?(o[0]=e,o[1]=t,o[2]=i,o[3]=n,o):[e,t,i,n]}function Pt(e){return Tt(1/0,1/0,-1/0,-1/0,e)}function Lt(e,t){const i=e[0],n=e[1];return Tt(i,n,i,n,t)}function It(e,t,i,n,o){return Ft(Pt(o),e,t,i,n)}function Rt(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function At(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function qt(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Ft(e,t,i,n,o){for(;i<n;i+=o)Ot(e,t[i],t[i+1]);return e}function Ot(e,t,i){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],i)}function zt(e,t){let i;return i=t(Dt(e)),!!(i||(i=t(Gt(e)),i)||(i=t(Xt(e)),i)||(i=t(Wt(e)),i))&&i}function Nt(e){let t=0;return Zt(e)||(t=Kt(e)*Ht(e)),t}function Dt(e){return[e[0],e[1]]}function Gt(e){return[e[2],e[1]]}function jt(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function Bt(e,t){let i;if("bottom-left"===t)i=Dt(e);else if("bottom-right"===t)i=Gt(e);else if("top-left"===t)i=Wt(e);else{if("top-right"!==t)throw new Error("Invalid corner");i=Xt(e)}return i}function Vt(e,t,i,n,o){const[r,s,a,l,u,c,h,d]=$t(e,t,i,n);return Tt(Math.min(r,a,u,h),Math.min(s,l,c,d),Math.max(r,a,u,h),Math.max(s,l,c,d),o)}function $t(e,t,i,n){const o=t*n[0]/2,r=t*n[1]/2,s=Math.cos(i),a=Math.sin(i),l=o*s,u=o*a,c=r*s,h=r*a,d=e[0],p=e[1];return[d-l+h,p-u-c,d-l-h,p-u+c,d+l-h,p+u+c,d+l+h,p+u-c,d-l+h,p-u-c]}function Ht(e){return e[3]-e[1]}function Ut(e,t,i){const n=i||[1/0,1/0,-1/0,-1/0];return Yt(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):Pt(n),n}function Wt(e){return[e[0],e[3]]}function Xt(e){return[e[2],e[3]]}function Kt(e){return e[2]-e[0]}function Yt(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Zt(e){return e[2]<e[0]||e[3]<e[1]}function Qt(e,t,i,n){if(Zt(e))return Pt(i);let o=[];if(n>1){const t=e[2]-e[0],i=e[3]-e[1];for(let r=0;r<n;++r)o.push(e[0]+t*r/n,e[1],e[2],e[1]+i*r/n,e[2]-t*r/n,e[3],e[0],e[3]-i*r/n)}else o=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(o,o,2);const r=[],s=[];for(let c=0,h=o.length;c<h;c+=2)r.push(o[c]),s.push(o[c+1]);return a=r,l=s,u=i,Tt(Math.min.apply(null,a),Math.min.apply(null,l),Math.max.apply(null,a),Math.max.apply(null,l),u);var a,l,u}function Jt(e,t){const i=t.getExtent(),n=jt(e);if(t.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const t=Kt(i),o=Math.floor((n[0]-i[0])/t)*t;e[0]-=o,e[2]-=o}return e}function ei(e,t,i){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];Jt(e,t);const o=Kt(n);if(Kt(e)>o&&!i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+o,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-o,e[3]]]}return[e]}function ti(e,t){let i=!0;for(let n=e.length-1;n>=0;--n)if(e[n]!=t[n]){i=!1;break}return i}function ii(e,t){const i=Math.cos(t),n=Math.sin(t),o=e[0]*i-e[1]*n,r=e[1]*i+e[0]*n;return e[0]=o,e[1]=r,e}function ni(e,t){const i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function oi(e,t){return Math.sqrt(ni(e,t))}function ri(e,t){return n=t,(i=e)?"{x}, {y}".replace("{x}",i[0].toFixed(n)).replace("{y}",i[1].toFixed(n)):"";var i,n}function si(e,t){if(t.canWrapX()){const i=Kt(t.getExtent()),n=ai(e,t,i);n&&(e[0]-=n*i)}return e}function ai(e,t,i){const n=t.getExtent();let o=0;return t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])&&(i=i||Kt(n),o=Math.floor((e[0]-n[0])/i)),o}function li(e){return Math.pow(e,3)}function ui(e){return 1-li(1-e)}function ci(e){return 3*e*e-2*e*e*e}function hi(e){return e}const di=6371008.8;function pi(e,t,i){i=i||di;const n=ct(e[1]),o=ct(t[1]),r=(o-n)/2,s=ct(t[0]-e[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(s)*Math.sin(s)*Math.cos(n)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function fi(e,t){let i=0;for(let n=0,o=e.length;n<o-1;++n)i+=pi(e[n],e[n+1],t);return i}function gi(e,t){const i=(t=t||{}).radius||di,n=t.projection||"EPSG:3857",o=e.getType();"GeometryCollection"!==o&&(e=e.clone().transform(n,"EPSG:4326"));let r,s,a,l,u,c,h=0;switch(o){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":r=e.getCoordinates(),h=fi(r,i);break;case"MultiLineString":case"Polygon":for(r=e.getCoordinates(),a=0,l=r.length;a<l;++a)h+=fi(r[a],i);break;case"MultiPolygon":for(r=e.getCoordinates(),a=0,l=r.length;a<l;++a)for(s=r[a],u=0,c=s.length;u<c;++u)h+=fi(s[u],i);break;case"GeometryCollection":{const i=e.getGeometries();for(a=0,l=i.length;a<l;++a)h+=gi(i[a],t);break}default:throw new Error("Unsupported geometry type: "+o)}return h}function mi(e,t){let i=0;const n=e.length;let o=e[n-1][0],r=e[n-1][1];for(let s=0;s<n;s++){const t=e[s][0],n=e[s][1];i+=ct(t-o)*(2+Math.sin(ct(r))+Math.sin(ct(n))),o=t,r=n}return i*t*t/2}function vi(e,t){const i=(t=t||{}).radius||di,n=t.projection||"EPSG:3857",o=e.getType();"GeometryCollection"!==o&&(e=e.clone().transform(n,"EPSG:4326"));let r,s,a,l,u,c,h=0;switch(o){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(r=e.getCoordinates(),h=Math.abs(mi(r[0],i)),a=1,l=r.length;a<l;++a)h-=Math.abs(mi(r[a],i));break;case"MultiPolygon":for(r=e.getCoordinates(),a=0,l=r.length;a<l;++a)for(s=r[a],h+=Math.abs(mi(s[0],i)),u=1,c=s.length;u<c;++u)h-=Math.abs(mi(s[u],i));break;case"GeometryCollection":{const i=e.getGeometries();for(a=0,l=i.length;a<l;++a)h+=vi(i[a],t);break}default:throw new Error("Unsupported geometry type: "+o)}return h}const yi={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let _i=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||yi[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const bi=6378137,xi=Math.PI*bi,wi=[-xi,-xi,xi,xi],Si=[-180,-85,180,85],Ci=bi*Math.log(Math.tan(Math.PI/2));class Mi extends _i{constructor(e){super({code:e,units:"m",extent:wi,global:!0,worldExtent:Si,getPointResolution:function(e,t){return e/Math.cosh(t[1]/bi)}})}}const Ei=[new Mi("EPSG:3857"),new Mi("EPSG:102100"),new Mi("EPSG:102113"),new Mi("EPSG:900913"),new Mi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Mi("http://www.opengis.net/gml/srs/epsg.xml#3857")];const ki=[-180,-90,180,90],Ti=6378137*Math.PI/180;class Pi extends _i{constructor(e,t){super({code:e,units:"degrees",extent:ki,axisOrientation:t,global:!0,metersPerUnit:Ti,worldExtent:ki})}}const Li=[new Pi("CRS:84"),new Pi("EPSG:4326","neu"),new Pi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Pi("urn:ogc:def:crs:OGC:2:84"),new Pi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Pi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Pi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ii={};function Ri(e){return Ii[e]||Ii[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}let Ai={};function qi(e,t,i){const n=e.getCode(),o=t.getCode();n in Ai||(Ai[n]={}),Ai[n][o]=i}function Fi(e,t){return e in Ai&&t in Ai[e]?Ai[e][t]:null}const Oi=.9996,zi=.00669438,Ni=zi*zi,Di=Ni*zi,Gi=zi/(1-zi),ji=Math.sqrt(1-zi),Bi=(1-ji)/(1+ji),Vi=Bi*Bi,$i=Vi*Bi,Hi=$i*Bi,Ui=Hi*Bi,Wi=.9983242984503243,Xi=15*Ni/256+45*Di/1024,Ki=35*Di/3072,Yi=1.5*Bi-27/32*$i+269/512*Ui,Zi=21/16*Vi-55/32*Hi,Qi=151/96*$i-417/128*Ui,Ji=1097/512*Hi,en=6378137;function tn(e,t,i){const n=e-5e5,o=(i.north?t:t-1e7)/Oi/(en*Wi),r=o+Yi*Math.sin(2*o)+Zi*Math.sin(4*o)+Qi*Math.sin(6*o)+Ji*Math.sin(8*o),s=Math.sin(r),a=s*s,l=Math.cos(r),u=s/l,c=u*u,h=c*c,d=1-zi*a,p=Math.sqrt(1-zi*a),f=Gi*l**2,g=f*f,m=n/(en/p*Oi),v=m*m,y=v*m,_=y*m,b=_*m,x=r-u/((1-zi)/d)*(v/2-_/24*(5+3*c+10*f-4*g-9*Gi))+b*m/720*(61+90*c+298*f+45*h-252*Gi-3*g);let w=(m-y/6*(1+2*c+f)+b/120*(5-2*f+28*c-3*g+8*Gi+24*h))/l;return w=vt(w+ct(on(i.number)),-Math.PI,Math.PI),[ut(w),ut(x)]}function nn(e,t,i){e=vt(e,-180,180),t<-80?t=-80:t>84&&(t=84);const n=ct(t),o=Math.sin(n),r=Math.cos(n),s=o/r,a=s*s,l=a*a,u=ct(e),c=ct(on(i.number)),h=en/Math.sqrt(1-zi*o**2),d=Gi*r**2,p=r*vt(u-c,-Math.PI,Math.PI),f=p*p,g=f*p,m=g*p,v=m*p,y=v*p,_=en*(Wi*n-.002514607064228144*Math.sin(2*n)+Xi*Math.sin(4*n)-Ki*Math.sin(6*n)),b=Oi*h*(p+g/6*(1-a+d)+v/120*(5-18*a+l+72*d-58*Gi))+5e5;let x=Oi*(_+h*s*(f/2+m/24*(5-a+9*d+4*d**2)+y/720*(61-58*a+l+600*d-330*Gi)));return i.north||(x+=1e7),[b,x]}function on(e){return 6*(e-1)-180+3}const rn=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function sn(e){let t=0;for(const o of rn){const i=e.match(o);if(i){t=parseInt(i[1]);break}}if(!t)return null;let i=0,n=!1;return t>32700&&t<32761?i=t-32700:t>32600&&t<32661&&(n=!0,i=t-32600),i?{number:i,north:n}:null}function an(e,t){return function(i,n,o,r){const s=i.length;o=o>1?o:2,r=r??o,n||(n=o>2?i.slice():new Array(s));for(let a=0;a<s;a+=r){const o=i[a],r=i[a+1],s=e(o,r,t);n[a]=s[0],n[a+1]=s[1]}return n}}const ln=[function(e){const t=sn(e.getCode());return t?{forward:an(nn,t),inverse:an(tn,t)}:null}],un=[function(e){return sn(e)?new _i({code:e,units:"m"}):null}];let cn=!0;function hn(e){cn=!1}function dn(e,t){if(void 0!==t)for(let i=0,n=e.length;i<n;++i)t[i]=e[i];else t=e.slice();return t}function pn(e){var t,i;t=e.getCode(),i=e,Ii[t]=i,qi(e,e,dn)}function fn(e){if("string"!=typeof e)return e;const t=Ri(e);if(t)return t;for(const i of un){const t=i(e);if(t)return t}return null}function gn(e,t,i,n){let o;const r=(e=fn(e)).getPointResolutionFunc();if(r){if(o=r(t,i),n&&n!==e.getUnits()){const t=e.getMetersPerUnit();t&&(o=o*t/yi[n])}}else{const r=e.getUnits();if("degrees"==r&&!n||"degrees"==n)o=t;else{const s=wn(e,fn("EPSG:4326"));if(s||"degrees"===r){let e=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];e=s(e,e,2),o=(pi(e.slice(0,2),e.slice(2,4))+pi(e.slice(4,6),e.slice(6,8)))/2}else o=t*e.getMetersPerUnit();const a=n?yi[n]:e.getMetersPerUnit();void 0!==a&&(o/=a)}}return o}function mn(e){e.forEach(pn),e.forEach((function(t){e.forEach((function(e){t!==e&&qi(t,e,dn)}))}))}function vn(e,t){return e?"string"==typeof e?fn(e):e:fn(t)}function yn(e){return function(t,i,n,o){const r=t.length;n=void 0!==n?n:2,o=o??n,i=void 0!==i?i:new Array(r);for(let s=0;s<r;s+=o){const r=e(t.slice(s,s+n)),a=r.length;for(let e=0,n=o;e<n;++e)i[s+e]=e>=a?t[s+e]:r[e]}return i}}function _n(e,t,i,n){const o=fn(e),r=fn(t);qi(o,r,yn(i)),qi(r,o,yn(n))}function bn(e,t){return hn(),Mn(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function xn(e,t){if(e===t)return!0;const i=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||wn(e,t)===dn)&&i}function wn(e,t){const i=e.getCode(),n=t.getCode();let o=Fi(i,n);if(o)return o;let r=null,s=null;for(const l of ln)r||(r=l(e)),s||(s=l(t));if(!r&&!s)return null;const a="EPSG:4326";if(s)if(r)o=Sn(r.inverse,s.forward);else{const e=Fi(i,a);e&&(o=Sn(e,s.forward))}else{const e=Fi(a,n);e&&(o=Sn(r.inverse,e))}return o&&(pn(e),pn(t),qi(e,t,o)),o}function Sn(e,t){return function(i,n,o,r){return n=e(i,n,o,r),t(n,n,o,r)}}function Cn(e,t){return wn(fn(e),fn(t))}function Mn(e,t,i){const n=Cn(t,i);if(!n){const e=fn(t).getCode(),n=fn(i).getCode();throw new Error(`No transform available between ${e} and ${n}`)}return n(e,void 0,e.length)}function En(e,t,i,n){return Qt(e,Cn(t,i),void 0,n)}function kn(e,t){return e}function Tn(e,t){return cn&&!ti(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(cn=!1),e}function Pn(e,t){return e}function Ln(e,t){return e}function In(e,t,i){return function(n){let o,r;if(e.canWrapX()){const t=e.getExtent(),s=Kt(t);r=ai(n=n.slice(0),e,s),r&&(n[0]=n[0]-r*s),n[0]=st(n[0],t[0],t[2]),n[1]=st(n[1],t[1],t[3]),o=i(n)}else o=i(n);return r&&t.canWrapX()&&(o[0]+=r*Kt(t.getExtent())),o}}var Rn,An,qn;mn(Ei),mn(Li),Rn=Ei,An=function(e,t,i,n){const o=e.length;i=i>1?i:2,n=n??i,void 0===t&&(t=i>2?e.slice():new Array(o));for(let r=0;r<o;r+=n){t[r]=xi*e[r]/180;let i=bi*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));i>Ci?i=Ci:i<-Ci&&(i=-Ci),t[r+1]=i}return t},qn=function(e,t,i,n){const o=e.length;i=i>1?i:2,n=n??i,void 0===t&&(t=i>2?e.slice():new Array(o));for(let r=0;r<o;r+=n)t[r]=180*e[r]/xi,t[r+1]=360*Math.atan(Math.exp(e[r+1]/bi))/Math.PI-90;return t},Li.forEach((function(e){Rn.forEach((function(t){qi(e,t,An),qi(t,e,qn)}))}));const Fn=new Array(6);function On(e){return Nn(e,1,0,0,1,0,0)}function zn(e,t){const i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=t[0],u=t[1],c=t[2],h=t[3],d=t[4],p=t[5];return e[0]=i*l+o*u,e[1]=n*l+r*u,e[2]=i*c+o*h,e[3]=n*c+r*h,e[4]=i*d+o*p+s,e[5]=n*d+r*p+a,e}function Nn(e,t,i,n,o,r,s){return e[0]=t,e[1]=i,e[2]=n,e[3]=o,e[4]=r,e[5]=s,e}function Dn(e,t){const i=t[0],n=t[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t}function Gn(e,t,i){return zn(e,Nn(Fn,t,0,0,i,0,0))}function jn(e,t,i,n,o,r,s,a){const l=Math.sin(r),u=Math.cos(r);return e[0]=n*u,e[1]=o*l,e[2]=-n*l,e[3]=o*u,e[4]=s*n*u-a*n*l+t,e[5]=s*o*l+a*o*u+i,e}function Bn(e,t){const i=(n=t)[0]*n[3]-n[1]*n[2];var n;tt(0!==i,"Transformation matrix cannot be inverted");const o=t[0],r=t[1],s=t[2],a=t[3],l=t[4],u=t[5];return e[0]=a/i,e[1]=-r/i,e[2]=-s/i,e[3]=o/i,e[4]=(s*u-a*l)/i,e[5]=-(o*u-r*l)/i,e}const Vn=[1e5,1e5,1e5,1e5,2,2];function $n(e){return e.substring(7,e.length-1).split(",").map(parseFloat)}function Hn(e,t,i,n,o,r,s){r=r||[],s=s||2;let a=0;for(let l=t;l<i;l+=n){const t=e[l],i=e[l+1];r[a++]=o[0]*t+o[2]*i+o[4],r[a++]=o[1]*t+o[3]*i+o[5];for(let n=2;n<s;n++)r[a++]=e[l+n]}return r&&r.length!=a&&(r.length=a),r}function Un(e,t,i,n,o,r,s){s=s||[];const a=Math.cos(o),l=Math.sin(o),u=r[0],c=r[1];let h=0;for(let d=t;d<i;d+=n){const t=e[d]-u,i=e[d+1]-c;s[h++]=u+t*a-i*l,s[h++]=c+t*l+i*a;for(let o=d+2;o<d+n;++o)s[h++]=e[o]}return s&&s.length!=h&&(s.length=h),s}const Wn=[1,0,0,1,0,0],Xn=[NaN,NaN];class Kn extends Ie{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=me(((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(t)}))}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ke()}closestPointXY(e,t,i,n){return ke()}containsXY(e,t){return 0===this.closestPointXY(e,t,Xn,Number.MIN_VALUE)}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ke()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Pt(e),this.extentRevision_=this.getRevision()}return t=this.extent_,(i=e)?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i):t;var t,i}rotate(e,t){ke()}scale(e,t,i){ke()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ke()}getType(){return ke()}applyTransform(e){ke()}intersectsExtent(e){return ke()}translate(e,t){ke()}transform(e,t){const i=fn(e),n="tile-pixels"==i.getUnits()?function(e,n,o){const r=i.getExtent(),s=i.getWorldExtent(),a=Ht(s)/Ht(r);jn(Wn,s[0],s[3],a,-a,0,0,0);const l=Hn(e,0,e.length,o,Wn,n),u=Cn(i,t);return u?u(l,l,o):l}:Cn(i,t);return this.applyTransform(n),this}}class Yn extends Kn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return It(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ke()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Qn(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ke()}setLayout(e,t,i){let n;if(e)n=Qn(e);else{for(let e=0;e<i;++e){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}n=t.length,e=Zn(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Un(i,0,i.length,n,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=jt(this.getExtent()));const n=this.getFlatCoordinates();if(n){const o=this.getStride();(function(e,t,i,n,o,r,s,a){a=a||[];const l=s[0],u=s[1];let c=0;for(let h=0;h<i;h+=n){const t=e[h]-l,i=e[h+1]-u;a[c++]=l+o*t,a[c++]=u+r*i;for(let o=h+2;o<h+n;++o)a[c++]=e[o]}a&&a.length!=c&&(a.length=c)})(n,0,n.length,o,e,t,i,n),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();(function(e,t,i,n,o,r,s){s=s||[];let a=0;for(let l=0;l<i;l+=n){s[a++]=e[l]+o,s[a++]=e[l+1]+r;for(let t=l+2;t<l+n;++t)s[a++]=e[t]}s&&s.length!=a&&(s.length=a)})(i,0,i.length,n,e,t,i),this.changed()}}}function Zn(e){let t;return 2==e?t="XY":3==e?t="XYZ":4==e&&(t="XYZM"),t}function Qn(e){let t;return"XY"==e?t=2:"XYZ"==e||"XYM"==e?t=3:"XYZM"==e&&(t=4),t}function Jn(e,t,i,n){let o=0;const r=e[i-n],s=e[i-n+1];let a=0,l=0;for(;t<i;t+=n){const i=e[t]-r,n=e[t+1]-s;o+=l*i-a*n,a=i,l=n}return o/2}function eo(e,t,i,n){let o=0;for(let r=0,s=i.length;r<s;++r){const s=i[r];o+=Jn(e,t,s,n),t=s}return o}function to(e,t,i,n,o,r,s){const a=e[t],l=e[t+1],u=e[i]-a,c=e[i+1]-l;let h;if(0===u&&0===c)h=t;else{const d=((o-a)*u+(r-l)*c)/(u*u+c*c);if(d>1)h=i;else{if(d>0){for(let o=0;o<n;++o)s[o]=dt(e[t+o],e[i+o],d);return void(s.length=n)}h=t}}for(let d=0;d<n;++d)s[d]=e[h+d];s.length=n}function io(e,t,i,n,o){let r=e[t],s=e[t+1];for(t+=n;t<i;t+=n){const i=e[t],n=e[t+1],a=lt(r,s,i,n);a>o&&(o=a),r=i,s=n}return o}function no(e,t,i,n,o){for(let r=0,s=i.length;r<s;++r){const s=i[r];o=io(e,t,s,n,o),t=s}return o}function oo(e,t,i,n,o,r,s,a,l,u,c){if(t==i)return u;let h,d;if(0===o){if(d=lt(s,a,e[t],e[t+1]),d<u){for(h=0;h<n;++h)l[h]=e[t+h];return l.length=n,d}return u}c=c||[NaN,NaN];let p=t+n;for(;p<i;)if(to(e,p-n,p,n,s,a,c),d=lt(s,a,c[0],c[1]),d<u){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n,p+=n}else p+=n*Math.max((Math.sqrt(d)-Math.sqrt(u))/o|0,1);if(r&&(to(e,i-n,t,n,s,a,c),d=lt(s,a,c[0],c[1]),d<u)){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n}return u}function ro(e,t,i,n,o,r,s,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=i.length;h<d;++h){const d=i[h];u=oo(e,t,d,n,o,r,s,a,l,u,c),t=d}return u}function so(e,t,i,n){for(let o=0,r=i.length;o<r;++o)e[t++]=i[o];return t}function ao(e,t,i,n){for(let o=0,r=i.length;o<r;++o){const r=i[o];for(let i=0;i<n;++i)e[t++]=r[i]}return t}function lo(e,t,i,n,o){o=o||[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=ao(e,t,i[s],n);o[r++]=a,t=a}return o.length=r,o}function uo(e,t,i,n,o){o=o||[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=lo(e,t,i[s],n,o[r]);0===a.length&&(a[0]=t),o[r++]=a,t=a[a.length-1]}return o.length=r,o}function co(e,t,i,n,o){o=void 0!==o?o:[];let r=0;for(let s=t;s<i;s+=n)o[r++]=e.slice(s,s+n);return o.length=r,o}function ho(e,t,i,n,o){o=void 0!==o?o:[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=i[s];o[r++]=co(e,t,a,n,o[r]),t=a}return o.length=r,o}function po(e,t,i,n,o){o=void 0!==o?o:[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=i[s];o[r++]=1===a.length&&a[0]===t?[]:ho(e,t,a,n,o[r]),t=a[a.length-1]}return o.length=r,o}function fo(e,t,i,n,o,r,s){const a=(i-t)/n;if(a<3){for(;t<i;t+=n)r[s++]=e[t],r[s++]=e[t+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[t,i-n];let c=0;for(;u.length>0;){const i=u.pop(),r=u.pop();let s=0;const a=e[r],h=e[r+1],d=e[i],p=e[i+1];for(let t=r+n;t<i;t+=n){const i=at(e[t],e[t+1],a,h,d,p);i>s&&(c=t,s=i)}s>o&&(l[(c-t)/n]=1,r+n<c&&u.push(r,c),c+n<i&&u.push(c,i))}for(let h=0;h<a;++h)l[h]&&(r[s++]=e[t+h*n],r[s++]=e[t+h*n+1]);return s}function go(e,t,i,n,o,r,s,a){for(let l=0,u=i.length;l<u;++l){const u=i[l];s=fo(e,t,u,n,o,r,s),a.push(s),t=u}return s}function mo(e,t){return t*Math.round(e/t)}function vo(e,t,i,n,o,r,s){if(t==i)return s;let a,l,u=mo(e[t],o),c=mo(e[t+1],o);t+=n,r[s++]=u,r[s++]=c;do{if(a=mo(e[t],o),l=mo(e[t+1],o),(t+=n)==i)return r[s++]=a,r[s++]=l,s}while(a==u&&l==c);for(;t<i;){const i=mo(e[t],o),h=mo(e[t+1],o);if(t+=n,i==a&&h==l)continue;const d=a-u,p=l-c,f=i-u,g=h-c;d*g==p*f&&(d<0&&f<d||d==f||d>0&&f>d)&&(p<0&&g<p||p==g||p>0&&g>p)?(a=i,l=h):(r[s++]=a,r[s++]=l,u=a,c=l,a=i,l=h)}return r[s++]=a,r[s++]=l,s}function yo(e,t,i,n,o,r,s,a){for(let l=0,u=i.length;l<u;++l){const u=i[l];s=vo(e,t,u,n,o,r,s),a.push(s),t=u}return s}class _o extends Yn{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new _o(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,n){return n<St(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(io(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),oo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,n))}getArea(){return Jn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=fo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new _o(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ao(this.flatCoordinates,0,e,this.stride),this.changed()}}let bo=class e extends Yn{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(e,t,i,n){const o=this.flatCoordinates,r=lt(e,t,o[0],o[1]);if(r<n){const e=this.stride;for(let t=0;t<e;++t)i[t]=o[t];return i.length=e,r}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Lt(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Et(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=so(this.flatCoordinates,0,e,this.stride),this.changed()}};function xo(e,t,i,n,o){return!zt(o,(function(o){return!wo(e,t,i,n,o[0],o[1])}))}function wo(e,t,i,n,o,r){let s=0,a=e[i-n],l=e[i-n+1];for(;t<i;t+=n){const i=e[t],n=e[t+1];l<=r?n>r&&(i-a)*(r-l)-(o-a)*(n-l)>0&&s++:n<=r&&(i-a)*(r-l)-(o-a)*(n-l)<0&&s--,a=i,l=n}return 0!==s}function So(e,t,i,n,o,r){if(0===i.length||!wo(e,t,i[0],n,o,r))return!1;for(let s=1,a=i.length;s<a;++s)if(wo(e,i[s-1],i[s],n,o,r))return!1;return!0}function Co(e,t,i,n,o,r,s){let a,l,u,c,h,d,p;const f=o[r+1],g=[];for(let y=0,_=i.length;y<_;++y){const o=i[y];for(c=e[o-n],d=e[o-n+1],a=t;a<o;a+=n)h=e[a],p=e[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(u=(f-d)/(p-d)*(h-c)+c,g.push(u)),c=h,d=p}let m=NaN,v=-1/0;for(g.sort(ae),c=g[0],a=1,l=g.length;a<l;++a){h=g[a];const o=Math.abs(h-c);o>v&&(u=(c+h)/2,So(e,t,i,n,u,f)&&(m=u,v=o)),c=h}return isNaN(m)&&(m=o[r]),s?(s.push(m,f,v),s):[m,f,v]}function Mo(e,t,i,n,o){let r=[];for(let s=0,a=i.length;s<a;++s){const a=i[s];r=Co(e,t,a,n,o,2*s,r),t=a[a.length-1]}return r}function Eo(e,t,i,n,o){let r;for(t+=n;t<i;t+=n)if(r=o(e.slice(t-n,t),e.slice(t,t+n)),r)return r;return!1}function ko(e,t,i,n,o,r){return r=r??Ft([1/0,1/0,-1/0,-1/0],e,t,i,n),!!Yt(o,r)&&(r[0]>=o[0]&&r[2]<=o[2]||r[1]>=o[1]&&r[3]<=o[3]||Eo(e,t,i,n,(function(e,t){return function(e,t,i){let n=!1;const o=kt(e,t),r=kt(e,i);if(1===o||1===r)n=!0;else{const s=e[0],a=e[1],l=e[2],u=e[3],c=t[0],h=t[1],d=i[0],p=i[1],f=(p-h)/(d-c);let g,m;2&r&&!(2&o)&&(g=d-(p-u)/f,n=g>=s&&g<=l),!n&&4&r&&!(4&o)&&(m=p-(d-l)*f,n=m>=a&&m<=u),!n&&8&r&&!(8&o)&&(g=d-(p-a)/f,n=g>=s&&g<=l),!n&&16&r&&!(16&o)&&(m=p-(d-s)*f,n=m>=a&&m<=u)}return n}(o,e,t)})))}function To(e,t,i,n,o){return!!(ko(e,t,i,n,o)||wo(e,t,i,n,o[0],o[1])||wo(e,t,i,n,o[0],o[3])||wo(e,t,i,n,o[2],o[1])||wo(e,t,i,n,o[2],o[3]))}function Po(e,t,i,n,o){if(!To(e,t,i[0],n,o))return!1;if(1===i.length)return!0;for(let r=1,s=i.length;r<s;++r)if(xo(e,i[r-1],i[r],n,o)&&!ko(e,i[r-1],i[r],n,o))return!1;return!0}function Lo(e,t,i,n){for(;t<i-n;){for(let o=0;o<n;++o){const r=e[t+o];e[t+o]=e[i-n+o],e[i-n+o]=r}t+=n,i-=n}}function Io(e,t,i,n){let o=0,r=e[i-n],s=e[i-n+1];for(;t<i;t+=n){const i=e[t],n=e[t+1];o+=(i-r)*(n+s),r=i,s=n}return 0===o?void 0:o>0}function Ro(e,t,i,n,o){o=void 0!==o&&o;for(let r=0,s=i.length;r<s;++r){const s=i[r],a=Io(e,t,s,n);if(0===r){if(o&&a||!o&&!a)return!1}else if(o&&!a||!o&&a)return!1;t=s}return!0}function Ao(e,t,i,n,o){for(let r=0,s=i.length;r<s;++r){const s=i[r];if(!Ro(e,t,s,n,o))return!1;s.length&&(t=s[s.length-1])}return!0}function qo(e,t,i,n,o){o=void 0!==o&&o;for(let r=0,s=i.length;r<s;++r){const s=i[r],a=Io(e,t,s,n);(0===r?o&&a||!o&&!a:o&&!a||!o&&a)&&Lo(e,t,s,n),t=s}return t}function Fo(e,t,i,n,o){for(let r=0,s=i.length;r<s;++r)t=qo(e,t,i[r],n,o);return t}function Oo(e,t){const i=[];let n,o=0,r=0;for(let s=0,a=t.length;s<a;++s){const a=t[s],l=Io(e,o,a,2);if(void 0===n&&(n=l),l===n)i.push(t.slice(r,s+1));else{if(0===i.length)continue;i[i.length-1].push(t[r])}r=s+1,o=a}return i}class zo extends Yn{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?he(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new zo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<St(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(no(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ro(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return So(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return eo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),qo(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,ho(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=jt(this.getExtent());this.flatInteriorPoint_=Co(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new bo(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new _o(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,n=[];let o=0;for(let r=0,s=i.length;r<s;++r){const s=i[r],a=new _o(t.slice(o,s),e);n.push(a),o=s}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Ro(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=qo(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=yo(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new zo(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Po(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=lo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}function No(e){if(Zt(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],i=e[1],n=e[2],o=e[3],r=[t,i,t,o,n,o,n,i,t,i];return new zo(r,"XY",[r.length])}function Do(e,t,i,n){const o=Kt(t)/i[0],r=Ht(t)/i[1];return n?Math.min(e,Math.max(o,r)):Math.min(e,Math.min(o,r))}function Go(e,t,i){let n=Math.min(e,t);return n*=Math.log(1+50*Math.max(0,e/t-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/e-1))/50+1),st(n,i/2,2*t)}function jo(e,t,i,n,o){return i=void 0===i||i,function(r,s,a,l){if(void 0!==r){const s=n?Do(e,n,a,o):e;return i&&l?Go(r,s,t):st(r,t,s)}}}function Bo(e){if(void 0!==e)return 0}function Vo(e){if(void 0!==e)return e}class $o extends Ie{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=vn(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&hn(),e.center&&(e.center=Tn(e.center,this.projection_)),e.extent&&(e.extent=Ln(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const s in rt)delete t[s];this.setProperties(t,!0);const i=function(e){let t,i,n,o=void 0!==e.minZoom?e.minZoom:0,r=void 0!==e.maxZoom?e.maxZoom:28;const s=void 0!==e.zoomFactor?e.zoomFactor:2,a=void 0!==e.multiWorld&&e.multiWorld,l=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,u=void 0!==e.showFullExtent&&e.showFullExtent,c=vn(e.projection,"EPSG:3857"),h=c.getExtent();let d=e.constrainOnlyCenter,p=e.extent;if(!a&&!p&&c.isGlobal()&&(d=!1,p=h),void 0!==e.resolutions){const s=e.resolutions;i=s[o],n=void 0!==s[r]?s[r]:s[s.length-1],t=e.constrainResolution?(f=s,m=!d&&p,v=u,g=void 0===(g=l)||g,function(e,t,i,n){if(void 0!==e){const o=f[0],r=f[f.length-1],s=m?Do(o,m,i,v):o;if(n)return g?Go(e,s,r):st(e,r,s);const a=Math.min(s,e),l=Math.floor(ue(f,a,t));return f[l]>s&&l<f.length-1?f[l+1]:f[l]}}):jo(i,n,l,!d&&p,u)}else{const a=(h?Math.max(Kt(h),Ht(h)):360*yi.degrees/c.getMetersPerUnit())/256/Math.pow(2,0),f=a/Math.pow(2,28);i=e.maxResolution,void 0!==i?o=0:i=a/Math.pow(s,o),n=e.minResolution,void 0===n&&(n=void 0!==e.maxZoom?void 0!==e.maxResolution?i/Math.pow(s,r):a/Math.pow(s,r):f),r=o+Math.floor(Math.log(i/n)/Math.log(s)),n=i/Math.pow(s,r-o),t=e.constrainResolution?function(e,t,i,n,o,r){return n=void 0===n||n,i=void 0!==i?i:0,function(s,a,l,u){if(void 0!==s){const c=o?Do(t,o,l,r):t;if(u)return n?Go(s,c,i):st(s,i,c);const h=1e-9,d=Math.ceil(Math.log(t/c)/Math.log(e)-h),p=-a*(.5-h)+.5,f=Math.min(c,s),g=Math.floor(Math.log(t/f)/Math.log(e)+p),m=Math.max(d,g);return st(t/Math.pow(e,m),i,c)}}}(s,i,n,l,!d&&p,u):jo(i,n,l,!d&&p,u)}var f,g,m,v;return{constraint:t,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:s}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const n=function(e){if(void 0!==e.extent){const t=void 0===e.smoothExtentConstraint||e.smoothExtentConstraint;return yt(e.extent,e.constrainOnlyCenter,t)}const t=vn(e.projection,"EPSG:3857");if(!0!==e.multiWorld&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,yt(e,!1,!1)}return _t}(e),o=i.constraint,r=function(e){if(void 0===e.enableRotation||e.enableRotation){const t=e.constrainRotation;return void 0===t||!0===t?function(){const e=ct(5);return function(t,i){return i||void 0===t?t:Math.abs(t)<=e?0:t}}():!1===t?Vo:"number"==typeof t?function(e){const t=2*Math.PI/e;return function(e,i){return i?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}(t):Vo}return Bo}(e);this.constraints_={center:n,resolution:o,rotation:r},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const n=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),r=o/2*(n[3]-t[3]+t[1]-n[1]),s=o/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([i[0]+r,i[1]-s])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let e=arguments[i];e.center&&(e=Object.assign({},e),e.center=Tn(e.center,this.getProjection())),e.anchor&&(e=Object.assign({},e),e.anchor=Tn(e.anchor,this.getProjection())),t[i]=e}this.animateInternal.apply(this,t)}animateInternal(e){let t,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(t=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const e=arguments[n];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(n===i)return void(t&&Ho(t,!0));let o=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_;const l=[];for(;n<i;++n){const e=arguments[n],i={start:o,complete:!1,anchor:e.anchor,duration:void 0!==e.duration?e.duration:1e3,easing:e.easing||ci,callback:t};if(e.center&&(i.sourceCenter=r,i.targetCenter=e.center.slice(),r=i.targetCenter),void 0!==e.zoom?(i.sourceResolution=s,i.targetResolution=this.getResolutionForZoom(e.zoom),s=i.targetResolution):e.resolution&&(i.sourceResolution=s,i.targetResolution=e.resolution,s=i.targetResolution),void 0!==e.rotation){i.sourceRotation=a;const t=ht(e.rotation-a+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=a+t,a=i.targetRotation}(u=i).sourceCenter&&u.targetCenter&&!ti(u.sourceCenter,u.targetCenter)||u.sourceResolution!==u.targetResolution||u.sourceRotation!==u.targetRotation?o+=i.duration:i.complete=!0,l.push(i)}var u;this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const i=this.animations_[t];if(i[0].callback&&Ho(i[0].callback,!1),!e)for(let t=0,n=i.length;t<n;++t){const n=i[t];if(!n.complete){e=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let o=!0;for(let i=0,r=n.length;i<r;++i){const r=n[i];if(r.complete)continue;const s=e-r.start;let a=r.duration>0?s/r.duration:1;a>=1?(r.complete=!0,a=1):o=!1;const l=r.easing(a);if(r.sourceCenter){const e=r.sourceCenter[0],t=r.sourceCenter[1],i=r.targetCenter[0],n=r.targetCenter[1];this.nextCenter_=r.targetCenter;const o=e+l*(i-e),s=t+l*(n-t);this.targetCenter_=[o,s]}if(r.sourceResolution&&r.targetResolution){const e=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const t=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(e,0,t,!0);this.targetCenter_=this.calculateCenterZoom(i,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=e,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const e=1===l?ht(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const t=this.constraints_.rotation(e,!0);this.targetCenter_=this.calculateCenterRotate(t,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=e}if(this.applyTargetState_(!0),t=!0,!r.complete)break}if(o){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const e=n[0].callback;e&&Ho(e,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const n=this.getCenterInternal();return void 0!==n&&(i=[n[0]-t[0],n[1]-t[1]],ii(i,e-this.getRotation()),r=t,(o=i)[0]+=+r[0],o[1]+=+r[1]),i;var o,r}calculateCenterZoom(e,t){let i;const n=this.getCenterInternal(),o=this.getResolution();return void 0!==n&&void 0!==o&&(i=[t[0]-e*(t[0]-n[0])/o,t[1]-e*(t[1]-n[1])/o]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],n=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&kn(e,this.getProjection())}getCenterInternal(){return this.get(rt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return Pn(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();tt(t,"The view center is not defined");const i=this.getResolution();tt(void 0!==i,"The view resolution is not defined");const n=this.getRotation();return tt(void 0!==n,"The view rotation is not defined"),Vt(t,i,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(rt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ln(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Kt(e)/t[0],n=Ht(e)/t[1];return Math.max(i,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(t/i)/Math.log(e);return function(i){return t/Math.pow(e,i*n)}}getRotation(){return this.get(rt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(i/n)/t;return function(e){return Math.log(i/e)/t/o}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const o=this.padding_;if(o){const e=this.getViewportSizeMinusPadding_();n=Uo(n,this.getViewportSize_(),[e[0]/2+o[3],e[1]/2+o[0]],t,i)}return{center:n.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t,i,n=this.minZoom_||0;if(this.resolutions_){const o=ue(this.resolutions_,e,1);n=o,t=this.resolutions_[o],i=o==this.resolutions_.length-1?2:t/this.resolutions_[o+1]}else t=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(t/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(1===this.resolutions_.length)return this.resolutions_[0];const t=st(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,st(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(tt(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(e))tt(!Zt(e),"Cannot fit empty extent provided as `geometry`"),i=No(Ln(e,this.getProjection()));else if("Circle"===e.getType()){const t=Ln(e.getExtent(),this.getProjection());i=No(t),i.rotate(this.getRotation(),jt(t))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),n=Math.sin(-t),o=e.getFlatCoordinates(),r=e.getStride();let s=1/0,a=1/0,l=-1/0,u=-1/0;for(let c=0,h=o.length;c<h;c+=r){const e=o[c]*i-o[c+1]*n,t=o[c]*n+o[c+1]*i;s=Math.min(s,e),a=Math.min(a,t),l=Math.max(l,e),u=Math.max(u,t)}return[s,a,l,u]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==t.padding?t.padding:[0,0,0,0],o=void 0!==t.nearest&&t.nearest;let r;r=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const s=this.rotatedExtentForGeometry(e);let a=this.getResolutionForExtentInternal(s,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?r:Math.max(a,r),a=this.getConstrainedResolution(a,o?0:1);const l=this.getRotation(),u=Math.sin(l),c=Math.cos(l),h=jt(s);h[0]+=(n[1]-n[3])/2*a,h[1]+=(n[0]-n[2])/2*a;const d=h[0]*c-h[1]*u,p=h[1]*c+h[0]*u,f=this.getConstrainedCenter([d,p],a),g=t.callback?t.callback:ge;void 0!==t.duration?this.animateInternal({resolution:a,center:f,duration:t.duration,easing:t.easing},g):(this.targetResolution_=a,this.targetCenter_=f,this.applyTargetState_(!1,!0),Ho(g,!0))}centerOn(e,t,i){this.centerOnInternal(Tn(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(Uo(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,n){let o;const r=this.padding_;if(r&&e){const s=this.getViewportSizeMinusPadding_(-i),a=Uo(e,n,[s[0]/2+r[3],s[1]/2+r[0]],t,i);o=[e[0]-a[0],e[1]-a[1]]}return o}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=kn(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Tn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,n,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Tn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Tn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,o,i),s=this.constraints_.center(this.targetCenter_,r,o,i,this.calculateCenterShift(this.targetCenter_,r,n,o));this.get(rt.ROTATION)!==n&&this.set(rt.ROTATION,n),this.get(rt.RESOLUTION)!==r&&(this.set(rt.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!s||!this.get(rt.CENTER)||!ti(this.get(rt.CENTER),s))&&this.set(rt.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const n=t||0,o=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,n,r),a=this.constraints_.center(this.targetCenter_,s,r,!1,this.calculateCenterShift(this.targetCenter_,s,o,r));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==s||this.getRotation()!==o||!this.getCenterInternal()||!ti(this.getCenterInternal(),a))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:a,resolution:s,duration:e,easing:ui,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&Tn(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Ho(e,t){setTimeout((function(){e(t)}),0)}function Uo(e,t,i,n,o){const r=Math.cos(-o);let s=Math.sin(-o),a=e[0]*r-e[1]*s,l=e[1]*r+e[0]*s;return a+=(t[0]/2-i[0])*n,l+=(i[1]-t[1]/2)*n,s=-s,[a*r-l*s,l*r+a*s]}const Wo="ol-hidden",Xo="ol-unselectable",Ko="ol-control",Yo="ol-collapsed",Zo=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z0-9]+?)\\s*$"].join(""),"i"),Qo=["style","variant","weight","size","lineHeight","family"],Jo={normal:400,bold:700},er=function(e){const t=e.match(Zo);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,o=Qo.length;n<o;++n){const e=t[n+1];void 0!==e&&(i[Qo[n]]="string"==typeof e?e.trim():e)}return isNaN(Number(i.weight))&&i.weight in Jo&&(i.weight=Jo[i.weight]),i.families=i.family.split(/,\s?/).map((e=>e.trim().replace(/^['"]|['"]$/g,""))),i};function tr(e,t,i,n){let o;return o=i&&i.length?i.shift():Be?new class extends OffscreenCanvas{style={}}(e??300,t??150):document.createElement("canvas"),e&&(o.width=e),t&&(o.height=t),o.getContext("2d",n)}let ir;function nr(){return ir||(ir=tr(1,1)),ir}function or(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function rr(e){let t=e.offsetWidth;const i=getComputedStyle(e);return t+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),t}function sr(e){let t=e.offsetHeight;const i=getComputedStyle(e);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),t}function ar(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function lr(e){for(;e.lastChild;)e.lastChild.remove()}function ur(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(-1===i)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get:(e,t,i)=>"firstElementChild"===t?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)})}function cr(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas}class hr extends Ie{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Ce(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==ge&&this.listenerKeys.push(we(e,Xe,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}}class dr extends hr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",n=void 0!==e.expandClassName?e.expandClassName:t+"-expand",o=void 0!==e.collapseLabel?e.collapseLabel:"",r=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=r):this.collapseLabel_=o;const s=void 0!==e.label?e.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=n):this.label_=s;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(te,this.handleClick_.bind(this),!1);const l=t+" "+Xo+" "+Ko+(this.collapsed_&&this.collapsible_?" "+Yo:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=l,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap((t=>t.getAttributions(e))));if(void 0!==this.attributions_&&(Array.isArray(this.attributions_)?this.attributions_.forEach((e=>i.add(e))):i.add(this.attributions_)),!this.overrideCollapsible_){const e=!t.some((e=>!1===e.getSource()?.getAttributionsCollapsible()));this.setCollapsible(e)}return Array.from(i)}async updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=await Promise.all(this.collectSourceAttributions_(e).map((e=>ve((()=>e))))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!de(t,this.renderedAttributions_)){lr(this.ulElement_);for(let e=0,i=t.length;e<i;++e){const i=document.createElement("li");i.innerHTML=t[e],this.ulElement_.appendChild(i)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Yo),this.collapsed_?ar(this.collapseLabel_,this.label_):ar(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class pr extends hr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"",n=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const o=e.tipLabel?e.tipLabel:"Reset rotation",r=document.createElement("button");r.className=t+"-reset",r.setAttribute("type","button"),r.title=o,r.appendChild(this.label_),r.addEventListener(te,this.handleClick_.bind(this),!1);const s=t+" "+Xo+" "+Ko,a=this.element;a.className=s,a.appendChild(r),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Wo)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const t=e.getRotation();void 0!==t&&(this.duration_>0&&t%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:ui}):e.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const e="rotate("+i+"rad)";if(this.autoHide_){const e=this.element.classList.contains(Wo);e||0!==i?e&&0!==i&&this.element.classList.remove(Wo):this.element.classList.add(Wo)}this.label_.style.transform=e}this.rotation_=i}}class fr extends hr{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,n=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",o=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",r=void 0!==e.zoomInLabel?e.zoomInLabel:"+",s=void 0!==e.zoomOutLabel?e.zoomOutLabel:"",a=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n,u.setAttribute("type","button"),u.title=a,u.appendChild("string"==typeof r?document.createTextNode(r):r),u.addEventListener(te,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=o,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof s?document.createTextNode(s):s),c.addEventListener(te,this.handleClick_.bind(this,-i),!1);const h=t+" "+Xo+" "+Ko,d=this.element;d.className=h,d.appendChild(u),d.appendChild(c),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const t=this.getMap().getView();if(!t)return;const i=t.getZoom();if(void 0!==i){const n=t.getConstrainedZoom(i+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:n,duration:this.duration_,easing:ui})):t.setZoom(n)}}}class gr{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;const o=this.points_[t]-this.points_[i],r=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var mr="active";class vr extends Ie{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(mr)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(mr,e)}setMap(e){this.map_=e}}function yr(e,t,i,n){const o=e.getZoom();if(void 0===o)return;const r=e.getConstrainedZoom(o+t),s=e.getResolutionForZoom(r);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:s,anchor:i,duration:void 0!==n?n:250,easing:ui})}class _r extends vr{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==ze.DBLCLICK){const i=e.originalEvent,n=e.map,o=e.coordinate,r=i.shiftKey?-this.delta_:this.delta_;yr(n.getView(),r,o,this.duration_),i.preventDefault(),t=!0}return!t}}function br(e){const t=arguments;return function(e){let i=!0;for(let n=0,o=t.length;n<o&&(i=i&&t[n](e),i);++n);return i}}const xr=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},wr=function(e){const t=e.map.getTargetElement(),i=t.getRootNode();return!(i instanceof ShadowRoot?i.host:t).hasAttribute("tabindex")||function(e){const t=e.map.getTargetElement(),i=t.getRootNode(),n=e.map.getOwnerDocument().activeElement;return i instanceof ShadowRoot?i.host.contains(n):t.contains(n)}(e)},Sr=pe,Cr=function(e){const t=e.originalEvent;return"pointerId"in t&&0==t.button&&!(De&&Ge&&t.ctrlKey)},Mr=fe,Er=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},kr=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Tr=function(e){const t=e.originalEvent,i=t.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!t.target.isContentEditable},Pr=function(e){const t=e.originalEvent;return"pointerId"in t&&"mouse"==t.pointerType},Lr=function(e){const t=e.originalEvent;return"pointerId"in t&&t.isPrimary&&0===t.button};class Ir extends vr{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ze.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ze.POINTERUP){const t=this.handleUpEvent(e);this.handlingDownUpSequence=t&&this.targetPointers.length>0}}else if(e.type==ze.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==ze.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Rr(e){const t=e.length;let i=0,n=0;for(let o=0;o<t;o++)i+=e[o].clientX,n+=e[o].clientY;return{clientX:i/t,clientY:n/t}}class Ar extends Ir{constructor(e){super({stopDown:fe}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:br(Er,Lr);this.condition_=e.onFocusOnly?br(wr,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,n=t.getEventPixel(Rr(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const t=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=e.map.getView();o=t,r=i.getResolution(),o[0]*=r,o[1]*=r,ii(t,i.getRotation()),i.adjustCenterInternal(t)}}else this.kinetic_&&this.kinetic_.begin();var o,r;this.lastCentroid=n,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const e=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),o=i.getCenterInternal(),r=t.getPixelFromCoordinateInternal(o),s=t.getCoordinateFromPixelInternal([r[0]-e*Math.cos(n),r[1]-e*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:ui})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const t=e.map.getView();return this.lastCentroid=null,t.getAnimating()&&t.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class qr extends Ir{constructor(e){e=e||{},super({stopDown:fe}),this.condition_=e.condition?e.condition:xr,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!Pr(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Bo)return;const n=t.getSize(),o=e.pixel,r=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){const e=r-this.lastAngle_;i.adjustRotationInternal(-e)}this.lastAngle_=r}handleUpEvent(e){return!Pr(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(Pr(e)&&Cr(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}}class Fr extends se{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+i,n.top=Math.min(e[1],t[1])+i,n.width=Math.abs(t[0]-e[0])+i,n.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new zo([i])}getGeometry(){return this.geometry_}}const Or="boxcancel";class zr extends be{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class Nr extends Ir{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Fr(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Cr,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const n=i[0]-t[0],o=i[1]-t[1];return n*n+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new zr("boxdrag",e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new zr(t?"boxend":Or,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new zr("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new zr(Or,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new zr(Or,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Dr extends Nr{constructor(e){super({condition:(e=e||{}).condition?e.condition:kr,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const t=this.getMap().getView();let i=this.getGeometry();if(this.out_){const e=t.rotatedExtentForGeometry(i),n=t.getResolutionForExtentInternal(e),o=t.getResolution()/n;i=i.clone(),i.scale(o*o)}t.fitInternal(i,{duration:this.duration_,easing:ui})}}var Gr="ArrowLeft",jr="ArrowRight",Br="ArrowDown";class Vr extends vr{constructor(e){super(),e=e||{},this.defaultCondition_=function(e){return Er(e)&&Tr(e)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ie){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==Br||n==Gr||n==jr||"ArrowUp"==n)){const o=e.map.getView(),r=o.getResolution()*this.pixelDelta_;let s=0,a=0;n==Br?a=-r:n==Gr?s=-r:n==jr?s=r:a=r;const l=[s,a];ii(l,o.getRotation()),function(e,t,i){const n=e.getCenterInternal();if(n){const o=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:void 0!==i?i:250,easing:hi,center:e.getConstrainedCenter(o)})}}(o,l,this.duration_),i.preventDefault(),t=!0}}return!t}}class $r extends vr{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(e){return!function(e){const t=e.originalEvent;return Ge?t.metaKey:t.ctrlKey}(e)&&Tr(e)},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if(e.type==ie||e.type==ne){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&("+"===n||"-"===n)){const o=e.map,r="+"===n?this.delta_:-this.delta_;yr(o.getView(),r,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}class Hr extends vr{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:Sr;this.condition_=e.onFocusOnly?br(wr,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==re)return!0;const t=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let n=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:n*=40;break;case WheelEvent.DOM_DELTA_PAGE:n*=300}if(0===n)return!1;this.lastDelta_=n;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const r=t.getView();if("trackpad"===this.mode_&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=n;const s=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,t),s),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-st(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),yr(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Ur extends Ir{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=fe),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const e=o-this.lastAngle_;this.rotationDelta_+=e,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=e}this.lastAngle_=o;const r=e.map,s=r.getView();s.getConstraints().rotation!==Bo&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(Rr(this.targetPointers))),this.rotating_&&(r.render(),s.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Wr extends Ir{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=fe),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],n=this.targetPointers[1],o=i.clientX-n.clientX,r=i.clientY-n.clientY,s=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(t=this.lastDistance_/s),this.lastDistance_=s;const a=e.map,l=a.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Rr(this.targetPointers))),a.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const t=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var Xr="opacity",Kr="visible",Yr="extent",Zr="zIndex",Qr="maxResolution",Jr="minResolution",es="maxZoom",ts="minZoom",is="source";class ns extends Ie{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t[Xr]=void 0!==e.opacity?e.opacity:1,tt("number"==typeof t[Xr],"Layer opacity must be a number"),t[Kr]=void 0===e.visible||e.visible,t[Zr]=e.zIndex,t[Qr]=void 0!==e.maxResolution?e.maxResolution:1/0,t[Jr]=void 0!==e.minResolution?e.minResolution:0,t[ts]=void 0!==e.minZoom?e.minZoom:-1/0,t[es]=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=st(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ke()}getLayerStatesArray(e){return ke()}getExtent(){return this.get(Yr)}getMaxResolution(){return this.get(Qr)}getMinResolution(){return this.get(Jr)}getMinZoom(){return this.get(ts)}getMaxZoom(){return this.get(es)}getOpacity(){return this.get(Xr)}getSourceState(){return ke()}getVisible(){return this.get(Kr)}getZIndex(){return this.get(Zr)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Yr,e)}setMaxResolution(e){this.set(Qr,e)}setMinResolution(e){this.set(Jr,e)}setMaxZoom(e){this.set(es,e)}setMinZoom(e){this.set(ts,e)}setOpacity(e){tt("number"==typeof e,"Layer opacity must be a number"),this.set(Xr,e)}setVisible(e){this.set(Kr,e)}setZIndex(e){this.set(Zr,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const os="addlayer",rs="removelayer";class ss extends be{constructor(e,t){super(e),this.layer=t}}const as="layers";class ls extends ns{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(as,this.handleLayersChanged_),i?Array.isArray(i)?i=new qe(i.slice(),{unique:!0}):tt("function"==typeof i.getArray,"Expected `layers` to be an array or a `Collection`"):i=new qe(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ce),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(we(e,Y,this.handleLayersAdd_,this),we(e,Z,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ce);ye(this.listenerKeys_);const t=e.getArray();for(let i=0,n=t.length;i<n;i++){const e=t[i];this.registerLayerListeners_(e),this.dispatchEvent(new ss(os,e))}this.changed()}registerLayerListeners_(e){const t=[we(e,Q,this.handleLayerChange_,this),we(e,J,this.handleLayerChange_,this)];e instanceof ls&&t.push(we(e,os,this.handleLayerGroupAdd_,this),we(e,rs,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Pe(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new ss(os,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new ss(rs,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new ss(os,t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Pe(t);this.listenerKeys_[i].forEach(Ce),delete this.listenerKeys_[i],this.dispatchEvent(new ss(rs,t)),this.changed()}getLayers(){return this.get(as)}setLayers(e){const t=this.getLayers();if(t){const e=t.getArray();for(let t=0,i=e.length;t<i;++t)this.dispatchEvent(new ss(rs,e[t]))}this.set(as,e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach((function(t){t.getLayersArray(e)})),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach((function(e){e.getLayerStatesArray(t)}));const n=this.getLayerState();let o=n.zIndex;!e&&void 0===n.zIndex&&(o=0);for(let r=i,s=t.length;r<s;r++){const e=t[r];e.opacity*=n.opacity,e.visible=e.visible&&n.visible,e.maxResolution=Math.min(e.maxResolution,n.maxResolution),e.minResolution=Math.max(e.minResolution,n.minResolution),e.minZoom=Math.max(e.minZoom,n.minZoom),e.maxZoom=Math.min(e.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==e.extent?e.extent=Ut(e.extent,n.extent):e.extent=n.extent),void 0===e.zIndex&&(e.zIndex=o)}return t}getSourceState(){return"ready"}}var us="prerender",cs="postrender",hs="precompose",ds="rendercomplete";class ps extends ns{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(is,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get(is)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ce(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=we(e,J,this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let t;const i=this.getMapInternal();let n;if(!e&&i&&(e=i.getView()),t=e instanceof $o?{viewState:e.getState(),extent:e.calculateExtent()}:e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),t.layerStatesArray){if(n=t.layerStatesArray.find((e=>e.layer===this)),!n)return!1}else n=this.getLayerState();const o=this.getExtent();return fs(n,t.viewState)&&(!o||Yt(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];let i=t(e instanceof $o?e.getViewStateAndExtent():e);return Array.isArray(i)||(i=[i]),i}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(Ce(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ce(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=we(e,hs,this.handlePrecompose_,this),this.mapRenderKey_=we(this,J,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);tt(!t.some((e=>e.layer===i.layer)),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(is,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function fs(e,t){if(!e.visible)return!1;const i=t.resolution;if(i<e.minResolution||i>=e.maxResolution)return!1;const n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}function gs(e,t,i=0,n=e.length-1,o=vs){for(;n>i;){if(n-i>600){const r=n-i+1,s=t-i+1,a=Math.log(r),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(r-l)/r)*(s-r/2<0?-1:1);gs(e,t,Math.max(i,Math.floor(t-s*l/r+u)),Math.min(n,Math.floor(t+(r-s)*l/r+u)),o)}const r=e[t];let s=i,a=n;for(ms(e,i,t),o(e[n],r)>0&&ms(e,i,n);s<a;){for(ms(e,s,a),s++,a--;o(e[s],r)<0;)s++;for(;o(e[a],r)>0;)a--}0===o(e[i],r)?ms(e,i,a):(a++,ms(e,a,n)),a<=t&&(i=a+1),t<=a&&(n=a-1)}}function ms(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}function vs(e,t){return e<t?-1:e>t?1:0}let ys=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Ls(e,t))return i;const n=this.toBBox,o=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],a=t.leaf?n(s):s;Ls(e,a)&&(t.leaf?i.push(s):Ps(e,a)?this._all(s,i):o.push(s))}t=o.pop()}return i}collides(e){let t=this.data;if(!Ls(e,t))return!1;const i=[];for(;t;){for(let n=0;n<t.children.length;n++){const o=t.children[n],r=t.leaf?this.toBBox(o):o;if(Ls(e,r)){if(t.leaf||Ps(e,r))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(let t=0;t<e.length;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Is([]),this}remove(e,t){if(!e)return this;let i=this.data;const n=this.toBBox(e),o=[],r=[];let s,a,l;for(;i||o.length;){if(i||(i=o.pop(),a=o[o.length-1],s=r.pop(),l=!0),i.leaf){const n=_s(e,i.children,t);if(-1!==n)return i.children.splice(n,1),o.push(i),this._condense(o),this}l||i.leaf||!Ps(i,n)?a?(s++,i=a.children[s],l=!1):i=null:(o.push(i),r.push(s),s=0,a=i,i=i.children[0])}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,n){const o=i-t+1;let r,s=this._maxEntries;if(o<=s)return r=Is(e.slice(t,i+1)),bs(r,this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),r=Is([]),r.leaf=!1,r.height=n;const a=Math.ceil(o/s),l=a*Math.ceil(Math.sqrt(s));Rs(e,t,i,l,this.compareMinX);for(let u=t;u<=i;u+=l){const t=Math.min(u+l-1,i);Rs(e,u,t,a,this.compareMinY);for(let i=u;i<=t;i+=a){const o=Math.min(i+a-1,t);r.children.push(this._build(e,i,o,n-1))}}return bs(r,this.toBBox),r}_chooseSubtree(e,t,i,n){for(;n.push(t),!t.leaf&&n.length-1!==i;){let i,n=1/0,o=1/0;for(let r=0;r<t.children.length;r++){const s=t.children[r],a=Ms(s),l=ks(e,s)-a;l<o?(o=l,n=a<n?a:n,i=s):l===o&&a<n&&(n=a,i=s)}t=i||t.children[0]}return t}_insert(e,t,i){const n=i?e:this.toBBox(e),o=[],r=this._chooseSubtree(n,this.data,t,o);for(r.children.push(e),ws(r,n);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)}_split(e,t){const i=e[t],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);const r=this._chooseSplitIndex(i,o,n),s=Is(i.children.splice(r,i.children.length-r));s.height=i.height,s.leaf=i.leaf,bs(i,this.toBBox),bs(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)}_splitRoot(e,t){this.data=Is([e,t]),this.data.height=e.height+1,this.data.leaf=!1,bs(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let n,o=1/0,r=1/0;for(let s=t;s<=i-t;s++){const t=xs(e,0,s,this.toBBox),a=xs(e,s,i,this.toBBox),l=Ts(t,a),u=Ms(t)+Ms(a);l<o?(o=l,n=s,r=u<r?u:r):l===o&&u<r&&(r=u,n=s)}return n||i-t}_chooseSplitAxis(e,t,i){const n=e.leaf?this.compareMinX:Ss,o=e.leaf?this.compareMinY:Cs;this._allDistMargin(e,t,i,n)<this._allDistMargin(e,t,i,o)&&e.children.sort(n)}_allDistMargin(e,t,i,n){e.children.sort(n);const o=this.toBBox,r=xs(e,0,t,o),s=xs(e,i-t,i,o);let a=Es(r)+Es(s);for(let l=t;l<i-t;l++){const t=e.children[l];ws(r,e.leaf?o(t):t),a+=Es(r)}for(let l=i-t-1;l>=t;l--){const t=e.children[l];ws(s,e.leaf?o(t):t),a+=Es(s)}return a}_adjustParentBBoxes(e,t,i){for(let n=i;n>=0;n--)ws(t[n],e)}_condense(e){for(let t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children,t.splice(t.indexOf(e[i]),1)):this.clear():bs(e[i],this.toBBox)}};function _s(e,t,i){if(!i)return t.indexOf(e);for(let n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function bs(e,t){xs(e,0,e.children.length,t,e)}function xs(e,t,i,n,o){o||(o=Is(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let r=t;r<i;r++){const t=e.children[r];ws(o,e.leaf?n(t):t)}return o}function ws(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Ss(e,t){return e.minX-t.minX}function Cs(e,t){return e.minY-t.minY}function Ms(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Es(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ks(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Ts(e,t){const i=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),o=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,o-i)*Math.max(0,r-n)}function Ps(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Ls(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Is(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Rs(e,t,i,n,o){const r=[t,i];for(;r.length;){if((i=r.pop())-(t=r.pop())<=n)continue;const s=t+Math.ceil((i-t)/n/2)*n;gs(e,s,t,i,o),r.push(t,s,s,i)}}const As=[NaN,NaN,NaN,0];let qs;const Fs=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Os=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,zs=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Ns=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Ds(e,t){return e.endsWith("%")?Number(e.substring(0,e.length-1))/t:Number(e)}function Gs(e){throw new Error('failed to parse "'+e+'" as color')}function js(e){if(e.toLowerCase().startsWith("rgb")){const t=e.match(Os)||e.match(Fs)||e.match(zs);if(t){const e=t[4],i=100/255;return[st(Ds(t[1],i)+.5|0,0,255),st(Ds(t[2],i)+.5|0,0,255),st(Ds(t[3],i)+.5|0,0,255),void 0!==e?st(Ds(e,100),0,1):1]}Gs(e)}if(e.startsWith("#")){if(Ns.test(e)){const t=e.substring(1),i=t.length<=4?1:2,n=[0,0,0,255];for(let e=0,o=t.length;e<o;e+=i){let o=parseInt(t.substring(e,e+i),16);1===i&&(o+=o<<4),n[e/i]=o}return n[3]=n[3]/255,n}Gs(e)}const t=(qs||(qs=tr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),qs);t.fillStyle="#abcdef";let i=t.fillStyle;t.fillStyle=e,t.fillStyle===i&&(t.fillStyle="#fedcba",i=t.fillStyle,t.fillStyle=e,t.fillStyle===i&&Gs(e));const n=t.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return js(n);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const o=Array.from(t.getImageData(0,0,1,1).data);return o[3]=pt(o[3]/255,3),o}function Bs(e){return"string"==typeof e?e:Js(e)}const Vs={};let $s=0;function Hs(e){if(4===e.length)return e;const t=e.slice();return t[3]=1,t}function Us(e){return e>.0031308?269.025*Math.pow(e,1/2.4)-14.025:3294.6*e}function Ws(e){return e>.2068965?Math.pow(e,3):108/841*(e-4/29)}function Xs(e){return e>10.314724?Math.pow((e+14.025)/269.025,2.4):e/3294.6}function Ks(e){return e>.0088564?Math.pow(e,1/3):e/(108/841)+4/29}function Ys(e){const t=Xs(e[0]),i=Xs(e[1]),n=Xs(e[2]),o=Ks(.222488403*t+.716873169*i+.06060791*n),r=500*(Ks(.452247074*t+.399439023*i+.148375274*n)-o),s=200*(o-Ks(.016863605*t+.117638439*i+.865350722*n)),a=Math.atan2(s,r)*(180/Math.PI);return[116*o-16,Math.sqrt(r*r+s*s),a<0?a+360:a,e[3]]}function Zs(e){if("none"===e)return As;if(Vs.hasOwnProperty(e))return Vs[e];if($s>=1024){let e=0;for(const t in Vs)!(3&e++)&&(delete Vs[t],--$s)}const t=js(e);4!==t.length&&Gs(e);for(const i of t)isNaN(i)&&Gs(e);return Vs[e]=t,++$s,t}function Qs(e){return Array.isArray(e)?e:Zs(e)}function Js(e){let t=e[0];t!=(0|t)&&(t=t+.5|0);let i=e[1];i!=(0|i)&&(i=i+.5|0);let n=e[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+t+","+i+","+n+","+(void 0===e[3]?1:Math.round(1e3*e[3])/1e3)+")"}function ea(e){return e[0]>0&&e[1]>0}function ta(e,t,i){return void 0===i&&(i=[0,0]),i[0]=e[0]*t+.5|0,i[1]=e[1]*t+.5|0,i}function ia(e,t){return Array.isArray(e)?e:(void 0===t?t=[e,e]:(t[0]=e,t[1]=e),t)}let na=0;const oa=1<<na++,ra=1<<na++,sa=1<<na++,aa=1<<na++,la=1<<na++,ua=1<<na++,ca=Math.pow(2,6)-1,ha={[oa]:"boolean",[ra]:"number",[sa]:"string",[aa]:"color",[la]:"number[]",[ua]:"size"},da=Object.keys(ha).map(Number).sort(ae);function pa(e){const t=[];for(const i of da)fa(e,i)&&t.push(ha[i]);return 0===t.length?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function fa(e,t){return(e&t)===t}function ga(e,t){return e===t}class ma{constructor(e,t){if(!(e in ha))throw new Error(`literal expressions must have a specific type, got ${pa(e)}`);this.type=e,this.value=t}}class va{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function ya(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function _a(e,t,i){switch(typeof e){case"boolean":if(ga(t,sa))return new ma(sa,e?"true":"false");if(!fa(t,oa))throw new Error(`got a boolean, but expected ${pa(t)}`);return new ma(oa,e);case"number":if(ga(t,ua))return new ma(ua,ia(e));if(ga(t,oa))return new ma(oa,!!e);if(ga(t,sa))return new ma(sa,e.toString());if(!fa(t,ra))throw new Error(`got a number, but expected ${pa(t)}`);return new ma(ra,e);case"string":if(ga(t,aa))return new ma(aa,Zs(e));if(ga(t,oa))return new ma(oa,!!e);if(!fa(t,sa))throw new Error(`got a string, but expected ${pa(t)}`);return new ma(sa,e)}if(!Array.isArray(e))throw new Error("expression must be an array or a primitive value");if(0===e.length)throw new Error("empty expression");if("string"==typeof e[0])return function(e,t,i){const n=e[0],o=pl[n];if(!o)throw new Error(`unknown operator: ${n}`);return o(e,t,i)}(e,t,i);for(const n of e)if("number"!=typeof n)throw new Error("expected an array of numbers");if(ga(t,ua)){if(2!==e.length)throw new Error(`expected an array of two values for a size, got ${e.length}`);return new ma(ua,e)}if(ga(t,aa)){if(3===e.length)return new ma(aa,[...e,1]);if(4===e.length)return new ma(aa,e);throw new Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!fa(t,la))throw new Error(`got an array of numbers, but expected ${pa(t)}`);return new ma(la,e)}const ba="get",xa="var",wa="concat",Sa="geometry-type",Ca="line-metric",Ma="any",Ea="all",ka="!",Ta="resolution",Pa="zoom",La="time",Ia="==",Ra="!=",Aa=">",qa=">=",Fa="<",Oa="<=",za="*",Na="/",Da="+",Ga="-",ja="clamp",Ba="%",Va="^",$a="abs",Ha="floor",Ua="ceil",Wa="round",Xa="sin",Ka="cos",Ya="atan",Za="sqrt",Qa="match",Ja="between",el="interpolate",tl="coalesce",il="case",nl="in",ol="number",rl="string",sl="array",al="color",ll="id",ul="band",cl="palette",hl="to-string",dl="has",pl={[ba]:xl(vl(1,1/0),fl),[xa]:xl(vl(1,1),(function(e,t,i){const n=e[1];if("string"!=typeof n)throw new Error("expected a string argument for var operation");return i.variables.add(n),[new ma(sa,n)]})),[dl]:xl(vl(1,1/0),fl),[ll]:xl((function(e,t,i){i.featureId=!0}),ml),[wa]:xl(vl(2,1/0),_l(sa)),[Sa]:xl((function(e,t,i){i.geometryType=!0}),ml),[Ca]:xl(ml),[Ta]:xl(gl,ml),[Pa]:xl(gl,ml),[La]:xl(gl,ml),[Ma]:xl(vl(2,1/0),_l(oa)),[Ea]:xl(vl(2,1/0),_l(oa)),[ka]:xl(vl(1,1),_l(oa)),[Ia]:xl(vl(2,2),_l(ca)),[Ra]:xl(vl(2,2),_l(ca)),[Aa]:xl(vl(2,2),_l(ra)),[qa]:xl(vl(2,2),_l(ra)),[Fa]:xl(vl(2,2),_l(ra)),[Oa]:xl(vl(2,2),_l(ra)),[za]:xl(vl(2,1/0),yl),[tl]:xl(vl(2,1/0),yl),[Na]:xl(vl(2,2),_l(ra)),[Da]:xl(vl(2,1/0),_l(ra)),[Ga]:xl(vl(2,2),_l(ra)),[ja]:xl(vl(3,3),_l(ra)),[Ba]:xl(vl(2,2),_l(ra)),[Va]:xl(vl(2,2),_l(ra)),[$a]:xl(vl(1,1),_l(ra)),[Ha]:xl(vl(1,1),_l(ra)),[Ua]:xl(vl(1,1),_l(ra)),[Wa]:xl(vl(1,1),_l(ra)),[Xa]:xl(vl(1,1),_l(ra)),[Ka]:xl(vl(1,1),_l(ra)),[Ya]:xl(vl(1,2),_l(ra)),[Za]:xl(vl(1,1),_l(ra)),[Qa]:xl(vl(4,1/0),bl,(function(e,t,i){const n=e.length-1,o=sa|ra|oa,r=_a(e[1],o,i),s=_a(e[e.length-1],t,i),a=new Array(n-2);for(let u=0;u<n-2;u+=2){try{const t=_a(e[u+2],r.type,i);a[u]=t}catch(l){throw new Error(`failed to parse argument ${u+1} of match expression: ${l.message}`)}try{const t=_a(e[u+3],s.type,i);a[u+1]=t}catch(l){throw new Error(`failed to parse argument ${u+2} of match expression: ${l.message}`)}}return[r,...a,s]})),[Ja]:xl(vl(3,3),_l(ra)),[el]:xl(vl(6,1/0),bl,(function(e,t,i){const n=e[1];let o;switch(n[0]){case"linear":o=1;break;case"exponential":const e=n[1];if("number"!=typeof e||e<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(e)} instead`);o=e;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const r=new ma(ra,o);let s;try{s=_a(e[2],ra,i)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(e.length-3);for(let u=0;u<a.length;u+=2){try{const t=_a(e[u+3],ra,i);a[u]=t}catch(l){throw new Error(`failed to parse argument ${u+2} for interpolate expression: ${l.message}`)}try{const n=_a(e[u+4],t,i);a[u+1]=n}catch(l){throw new Error(`failed to parse argument ${u+3} for interpolate expression: ${l.message}`)}}return[r,s,...a]})),[il]:xl(vl(3,1/0),(function(e,t,i){const n=e[0],o=e.length-1;if(o%2==0)throw new Error(`expected an odd number of arguments for ${n}, got ${o} instead`)}),(function(e,t,i){const n=_a(e[e.length-1],t,i),o=new Array(e.length-1);for(let s=0;s<o.length-1;s+=2){try{const t=_a(e[s+1],oa,i);o[s]=t}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const t=_a(e[s+2],n.type,i);o[s+1]=t}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return o[o.length-1]=n,o})),[nl]:xl(vl(2,2),(function(e,t,i){let n,o=e[2];if(!Array.isArray(o))throw new Error('the second argument for the "in" operator must be an array');if("string"==typeof o[0]){if("literal"!==o[0])throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(o[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');o=o[1],n=sa}else n=ra;const r=new Array(o.length);for(let a=0;a<r.length;a++)try{const e=_a(o[a],n,i);r[a]=e}catch(s){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${s.message}`)}return[_a(e[1],n,i),...r]})),[ol]:xl(vl(1,1/0),_l(ca)),[rl]:xl(vl(1,1/0),_l(ca)),[sl]:xl(vl(1,1/0),_l(ra)),[al]:xl(vl(1,4),_l(ra)),[ul]:xl(vl(1,3),_l(ra)),[cl]:xl(vl(2,2),(function(e,t,i){let n;try{n=_a(e[1],ra,i)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const o=e[2];if(!Array.isArray(o))throw new Error("the second argument of palette must be an array");const r=new Array(o.length);for(let l=0;l<r.length;l++){let e;try{e=_a(o[l],aa,i)}catch(a){throw new Error(`failed to parse color at index ${l} in palette expression: ${a.message}`)}if(!(e instanceof ma))throw new Error(`the palette color at index ${l} must be a literal value`);r[l]=e}return[n,...r]})),[hl]:xl(vl(1,1),_l(oa|ra|sa|aa))};function fl(e,t,i){const n=e.length-1,o=new Array(n);for(let r=0;r<n;++r){const t=e[r+1];switch(typeof t){case"number":o[r]=new ma(ra,t);break;case"string":o[r]=new ma(sa,t);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${t}`)}0===r&&i.properties.add(String(t))}return o}function gl(e,t,i){i.mapState=!0}function ml(e,t,i){const n=e[0];if(1!==e.length)throw new Error(`expected no arguments for ${n} operation`);return[]}function vl(e,t){return function(i,n,o){const r=i[0],s=i.length-1;if(e===t){if(s!==e)throw new Error(`expected ${e} argument${1===e?"":"s"} for ${r}, got ${s}`)}else if(s<e||s>t)throw new Error(`expected ${t===1/0?`${e} or more`:`${e} to ${t}`} arguments for ${r}, got ${s}`)}}function yl(e,t,i){const n=e.length-1,o=new Array(n);for(let r=0;r<n;++r){const n=_a(e[r+1],t,i);o[r]=n}return o}function _l(e){return function(t,i,n){const o=t.length-1,r=new Array(o);for(let s=0;s<o;++s){const i=_a(t[s+1],e,n);r[s]=i}return r}}function bl(e,t,i){const n=e[0],o=e.length-1;if(o%2==1)throw new Error(`expected an even number of arguments for operation ${n}, got ${o} instead`)}function xl(...e){return function(t,i,n){const o=t[0];let r;for(let s=0;s<e.length;s++){const o=e[s](t,i,n);if(s==e.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");r=o}}return new va(i,o,...r)}}function wl(e){if(!e)return"";const t=e.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return wl(e.getGeometries()[0]);default:return""}}function Sl(e,t,i){return Cl(_a(e,t,i))}function Cl(e,t){if(e instanceof ma){if(e.type===aa&&"string"==typeof e.value){const t=Zs(e.value);return function(){return t}}return function(){return e.value}}const i=e.operator;switch(i){case ol:case rl:case tl:return function(e){const t=e.operator,i=e.args.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Cl(e.args[o]);switch(t){case tl:return e=>{for(let t=0;t<i;++t){const i=n[t](e);if(typeof i<"u"&&null!==i)return i}throw new Error("Expected one of the values to be non-null")};case ol:case rl:return e=>{for(let o=0;o<i;++o){const i=n[o](e);if(typeof i===t)return i}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}(e);case ba:case xa:case dl:return function(e){const t=e.args[0].value;switch(e.operator){case ba:return i=>{const n=e.args;let o=i.properties[t];for(let e=1,t=n.length;e<t;++e)o=o[n[e].value];return o};case xa:return e=>e.variables[t];case dl:return i=>{const n=e.args;if(!(t in i.properties))return!1;let o=i.properties[t];for(let e=1,t=n.length;e<t;++e){const t=n[e].value;if(!o||!Object.hasOwn(o,t))return!1;o=o[t]}return!0};default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}(e);case"id":return e=>e.featureId;case Sa:return e=>e.geometryType;case wa:{const t=e.args.map((e=>Cl(e)));return e=>"".concat(...t.map((t=>t(e).toString())))}case Ta:return e=>e.resolution;case Ma:case Ea:case Ja:case nl:case"!":return function(e){const t=e.operator,i=e.args.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Cl(e.args[o]);switch(t){case Ma:return e=>{for(let t=0;t<i;++t)if(n[t](e))return!0;return!1};case Ea:return e=>{for(let t=0;t<i;++t)if(!n[t](e))return!1;return!0};case Ja:return e=>{const t=n[0](e),i=n[1](e),o=n[2](e);return t>=i&&t<=o};case nl:return e=>{const t=n[0](e);for(let o=1;o<i;++o)if(t===n[o](e))return!0;return!1};case"!":return e=>!n[0](e);default:throw new Error(`Unsupported logical operator ${t}`)}}(e);case Ia:case Ra:case"<":case Oa:case">":case qa:return function(e){const t=e.operator,i=Cl(e.args[0]),n=Cl(e.args[1]);switch(t){case Ia:return e=>i(e)===n(e);case Ra:return e=>i(e)!==n(e);case"<":return e=>i(e)<n(e);case Oa:return e=>i(e)<=n(e);case">":return e=>i(e)>n(e);case qa:return e=>i(e)>=n(e);default:throw new Error(`Unsupported comparison operator ${t}`)}}(e);case"*":case"/":case"+":case"-":case ja:case"%":case"^":case $a:case Ha:case Ua:case Wa:case Xa:case Ka:case Ya:case Za:return function(e){const t=e.operator,i=e.args.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Cl(e.args[o]);switch(t){case"*":return e=>{let t=1;for(let o=0;o<i;++o)t*=n[o](e);return t};case"/":return e=>n[0](e)/n[1](e);case"+":return e=>{let t=0;for(let o=0;o<i;++o)t+=n[o](e);return t};case"-":return e=>n[0](e)-n[1](e);case ja:return e=>{const t=n[0](e),i=n[1](e);if(t<i)return i;const o=n[2](e);return t>o?o:t};case"%":return e=>n[0](e)%n[1](e);case"^":return e=>Math.pow(n[0](e),n[1](e));case $a:return e=>Math.abs(n[0](e));case Ha:return e=>Math.floor(n[0](e));case Ua:return e=>Math.ceil(n[0](e));case Wa:return e=>Math.round(n[0](e));case Xa:return e=>Math.sin(n[0](e));case Ka:return e=>Math.cos(n[0](e));case Ya:return 2===i?e=>Math.atan2(n[0](e),n[1](e)):e=>Math.atan(n[0](e));case Za:return e=>Math.sqrt(n[0](e));default:throw new Error(`Unsupported numeric operator ${t}`)}}(e);case il:return function(e){const t=e.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Cl(e.args[n]);return e=>{for(let n=0;n<t-1;n+=2)if(i[n](e))return i[n+1](e);return i[t-1](e)}}(e);case Qa:return function(e){const t=e.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Cl(e.args[n]);return e=>{const n=i[0](e);for(let o=1;o<t-1;o+=2)if(n===i[o](e))return i[o+1](e);return i[t-1](e)}}(e);case el:return function(e){const t=e.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=Cl(e.args[n]);return e=>{const n=i[0](e),o=i[1](e);let r,s;for(let a=2;a<t;a+=2){const t=i[a](e);let l=i[a+1](e);const u=Array.isArray(l);if(u&&(l=Hs(l)),t>=o)return 2===a?l:u?El(n,o,r,s,t,l):Ml(n,o,r,s,t,l);r=t,s=l}return s}}(e);case hl:return function(e){const t=e.operator,i=e.args.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Cl(e.args[o]);if(t===hl)return t=>{const i=n[0](t);return e.args[0].type===aa?Js(i):i.toString()};throw new Error(`Unsupported convert operator ${t}`)}(e);default:throw new Error(`Unsupported operator ${i}`)}}function Ml(e,t,i,n,o,r){const s=o-i;if(0===s)return n;const a=t-i;return n+(1===e?a/s:(Math.pow(e,a)-1)/(Math.pow(e,s)-1))*(r-n)}function El(e,t,i,n,o,r){if(o-i==0)return n;const s=Ys(n),a=Ys(r);let l=a[2]-s[2];return l>180?l-=360:l<-180&&(l+=360),function(e){const t=(e[0]+16)/116,i=e[1],n=e[2]*Math.PI/180,o=Ws(t),r=Ws(t+i/500*Math.cos(n)),s=Ws(t-i/200*Math.sin(n)),a=Us(3.021973625*r-1.617392459*o-.404875592*s),l=Us(-.943766287*r+1.916279586*o+.027607165*s),u=Us(.069407491*r-.22898585*o+1.159737864*s);return[st(a+.5|0,0,255),st(l+.5|0,0,255),st(u+.5|0,0,255),e[3]]}([Ml(e,t,i,s[0],o,a[0]),Ml(e,t,i,s[1],o,a[1]),s[2]+Ml(e,t,i,0,o,l),Ml(e,t,i,n[3],o,r[3])])}class kl extends xe{constructor(e,t,i,n){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state="function"==typeof n?0:n,this.image_=null,this.loader="function"==typeof n?n:null}changed(){this.dispatchEvent(J)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(0==this.state&&this.loader){this.state=1,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;ve((()=>this.loader(this.getExtent(),t,this.getPixelRatio()))).then((e=>{"image"in e&&(this.image_=e.image),"extent"in e&&(this.extent=e.extent),"resolution"in e&&(this.resolution=e.resolution),"pixelRatio"in e&&(this.pixelRatio_=e.pixelRatio),(e instanceof HTMLImageElement||$e&&e instanceof ImageBitmap||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)&&(this.image_=e),this.state=2})).catch((e=>{this.state=3})).finally((()=>this.changed()))}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Tl(e,t,i){return t+":"+e+":"+(i?Qs(i):"null")}const Pl=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(3&e++)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const n=Tl(e,t,i);return n in this.cache_?this.cache_[n]:null}getPattern(e,t,i){const n=Tl(e,t,i);return n in this.patternCache_?this.patternCache_[n]:null}set(e,t,i,n,o){const r=Tl(e,t,i),s=r in this.cache_;this.cache_[r]=n,o&&(0===n.getImageState()&&n.load(),1===n.getImageState()?n.ready().then((()=>{this.patternCache_[r]=nr().createPattern(n.getImage(1),"repeat")})):this.patternCache_[r]=nr().createPattern(n.getImage(1),"repeat")),s||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};let Ll=null;class Il extends xe{constructor(e,t,i,n,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=void 0===n?0:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){Ll||(Ll=tr(1,1,void 0,{willReadFrequently:!0})),Ll.drawImage(this.image_,0,0);try{Ll.getImageData(0,0,1,1),this.tainted_=!1}catch{Ll=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(J)}handleImageError_(){this.imageState_=3,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=tr(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(e=this.image_,t=this.src_,t&&(e.src=t),e.src&&Ve?new Promise(((t,i)=>e.decode().then((()=>t(e))).catch((n=>e.complete&&e.width?t(e):i(n))))):(i=e,new Promise(((e,t)=>{function n(){r(),e(i)}function o(){r(),t(new Error("Image load error"))}function r(){i.removeEventListener("load",n),i.removeEventListener("error",o)}i.addEventListener("load",n),i.addEventListener("error",o)})))).then((e=>{this.image_=e,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}var e,t,i}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=tr(Math.ceil(t.width*e),Math.ceil(t.height*e)),n=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Bs(this.color_),i.fillRect(0,0,n.width/e,n.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise((e=>{if(2===this.imageState_||3===this.imageState_)e();else{const t=()=>{(2===this.imageState_||3===this.imageState_)&&(this.removeEventListener(J,t),e())};this.addEventListener(J,t)}}))),this.ready_}}function Rl(e,t,i,n,o,r){let s=void 0===t?void 0:Pl.get(t,i,o);return s||(s=new Il(e,e&&"src"in e?e.src||void 0:t,i,n,o),Pl.set(t,i,o,s,r)),r&&s&&!Pl.getPattern(t,i,o)&&Pl.set(t,i,o,s,r),s}function Al(e){return e?Array.isArray(e)?Js(e):"object"==typeof e&&"src"in e?function(e){if(!e.offset||!e.size)return Pl.getPattern(e.src,"anonymous",e.color);const t=e.src+":"+e.offset,i=Pl.getPattern(t,void 0,e.color);if(i)return i;const n=Pl.get(e.src,"anonymous",null);if(2!==n.getImageState())return null;const o=tr(e.size[0],e.size[1]);return o.drawImage(n.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),Rl(o.canvas,t,void 0,2,e.color,!0),Pl.getPattern(t,void 0,e.color)}(e):e:null}const ql="10px sans-serif",Fl="#000",Ol="round",zl=[],Nl="round",Dl="#000",Gl="center",jl="middle",Bl=[0,0,0,0],Vl=new Ie;let $l,Hl=null;const Ul={},Wl=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Xl(e,t,i){return`${e} ${t} 16px "${i}"`}const Kl=function(){let e,t;async function i(e){await t.ready;const i=await t.load(e);if(0===i.length)return!1;const n=er(e),o=n.families[0].toLowerCase(),r=n.weight;return i.some((e=>{const t=e.family.replace(/^['"]|['"]$/g,"").toLowerCase(),i=Jo[e.weight]||e.weight;return t===o&&e.style===n.style&&i==r}))}async function n(){await t.ready;let o=!0;const r=Vl.getProperties(),s=Object.keys(r).filter((e=>r[e]<100));for(let e=s.length-1;e>=0;--e){const t=s[e];let n=r[t];n<100&&(await i(t)?(ye(Ul),Vl.set(t,100)):(n+=10,Vl.set(t,n,!0),n<100&&(o=!1)))}e=void 0,o||(e=setTimeout(n,100))}return async function(i){t||(t=Be?self.fonts:document.fonts);const o=er(i);if(!o)return;const r=o.families;let s=!1;for(const e of r){if(Wl.has(e))continue;const t=Xl(o.style,o.weight,e);void 0===Vl.get(t)&&(Vl.set(t,0,!0),s=!0)}s&&(clearTimeout(e),e=setTimeout(n,100))}}(),Yl=function(){let e;return function(t){let i=Ul[t];if(null==i){if(Be){const e=er(t),n=Zl(t,"g");i=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),i=e.offsetHeight,document.body.removeChild(e);Ul[t]=i}return i}}();function Zl(e,t){return Hl||(Hl=tr(1,1)),e!=$l&&(Hl.font=e,$l=Hl.font),Hl.measureText(t)}function Ql(e,t){return Zl(e,t).width}function Jl(e,t,i){if(t in i)return i[t];const n=t.split("\n").reduce(((t,i)=>Math.max(t,Ql(e,i))),0);return i[t]=n,n}class eu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ia(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new eu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ke()}getImage(e){return ke()}getHitDetectionImage(){return ke()}getPixelRatio(e){return 1}getImageState(){return ke()}getImageSize(){return ke()}getOrigin(){return ke()}getSize(){return ke()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ia(e)}listenImageChange(e){ke()}load(){ke()}unlistenImageChange(e){ke()}ready(){return Promise.resolve()}}class tu extends eu{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?1:2,1===this.imageState_&&this.ready().then((()=>this.imageState_=2)),this.render()}clone(){const e=this.getScale(),t=new tu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let n=Pl.get(i,null,null)?.getImage(1);if(!n){const t=this.renderOptions_,o=Math.ceil(t.size*e),r=tr(o,o);this.draw_(t,r,e),n=r.canvas,Pl.set(i,null,null,new Il(n,void 0,null,2,null))}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let n=this.radius,o=void 0===this.radius2_?n:this.radius2_;if(n<o){const e=n;n=o,o=e}const r=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/r,a=o*Math.sin(s),l=n-Math.sqrt(o*o-a*a),u=Math.sqrt(a*a+l*l),c=u/a;if("miter"===e&&c<=i)return c*t;const h=t/2/c,d=t/2*(l/u),p=Math.sqrt((n+h)*(n+h)+d*d)-n;if(void 0===this.radius2_||"bevel"===e)return 2*p;const f=n*Math.sin(s),g=o-Math.sqrt(n*n-f*f),m=Math.sqrt(f*f+g*g)/f;if(m<=i){const e=m*t/2-o-n;return 2*Math.max(p,e)}return 2*p}createRenderOptions(){let e,t=Ol,i=Nl,n=0,o=null,r=0,s=0;this.stroke_&&(e=Al(this.stroke_.getColor()??Dl),s=this.stroke_.getWidth()??1,o=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??Nl,t=this.stroke_.getLineCap()??Ol,n=this.stroke_.getMiterLimit()??10);const a=this.calculateLineJoinSize_(i,s,n),l=Math.max(this.radius,this.radius2_||0);return{strokeStyle:e,strokeWidth:s,size:Math.ceil(2*l+a),lineCap:t,lineDash:o,lineDashOffset:r,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let e=this.fill_.getColor();null===e&&(e=Fl),t.fillStyle=Al(e),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),n=0;"string"==typeof i&&(i=Qs(i)),null===i?n=1:Array.isArray(i)&&(n=4===i.length?i[3]:1),0===n&&(t=tr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const o=this.angle_-Math.PI/2,r=2*Math.PI/t;for(let s=0;s<t;s++){const t=o+s*r,a=s%2==0?i:n;e.lineTo(a*Math.cos(t),a*Math.sin(t))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Fl,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class iu extends tu{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new iu({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class nu{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,void 0!==e.color&&this.setColor(e.color)}clone(){const e=this.getColor();return new nu({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(null!==e&&"object"==typeof e&&"src"in e){const t=Rl(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then((()=>{this.patternImage_=null})),0===t.getImageState()&&t.load(),1===t.getImageState()&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Pe(e):"object"==typeof e&&"src"in e?e.src+":"+e.offset:Qs(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ou(e,t,i,n){return void 0!==i&&void 0!==n?[i/e,n/t]:void 0!==i?i/e:void 0!==n?n/t:1}class ru extends eu{constructor(e){const t=void 0!==(e=e||{}).opacity?e.opacity:1,i=void 0!==e.rotation?e.rotation:0,n=void 0!==e.scale?e.scale:1,o=void 0!==e.rotateWithView&&e.rotateWithView;super({opacity:t,rotation:i,scale:n,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const r=void 0!==e.img?e.img:null;let s,a=e.src;if(tt(!(void 0!==a&&r),"`image` and `src` cannot be provided at the same time"),(void 0===a||0===a.length)&&r&&(a=r.src||Pe(r)),tt(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),tt(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==e.src?s=0:void 0!==r&&(s="complete"in r?r.complete?r.src?2:0:1:2),this.color_=void 0!==e.color?Qs(e.color):null,this.iconImage_=Rl(r,a,this.crossOrigin_,s,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,this.initialOptions_,void 0!==e.width||void 0!==e.height){let t,i;if(e.size)[t,i]=e.size;else{const n=this.getImage(1);if(n.width&&n.height)t=n.width,i=n.height;else if(n instanceof HTMLImageElement){this.initialOptions_=e;const t=()=>{if(this.unlistenImageChange(t),!this.initialOptions_)return;const i=this.iconImage_.getSize();this.setScale(ou(i[0],i[1],e.width,e.height))};return void this.listenImageChange(t)}}void 0!==t&&this.setScale(ou(t,i,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ru({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const t=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!t)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=t[0]),"fraction"==this.anchorYUnits_&&(e[1]*=t[1])}if("top-left"!=this.anchorOrigin_){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+t[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+t[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=Rl(null,e,this.crossOrigin_,0,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[0]*e[0]:void 0}getHeight(){const e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[1]*e[1]:void 0}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(J,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(J,e)}ready(){return this.iconImage_.ready()}}class su{constructor(e){e=e||{},this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new su({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class au{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=cu,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new au({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=cu,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let lu=null;function uu(e,t){if(!lu){const e=new nu({color:"rgba(255,255,255,0.4)"}),t=new su({color:"#3399CC",width:1.25});lu=[new au({image:new iu({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return lu}function cu(e){return e.getGeometry()}class hu{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ia(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new nu({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new hu({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof nu?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ia(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function du(e){return!0}function pu(e){const t=ya(),i=function(e,t){const i=e.length,n=new Array(i);for(let o=0;o<i;++o){const i=e[o],r="filter"in i?Sl(i.filter,oa,t):du;let s;if(Array.isArray(i.style)){const e=i.style.length;s=new Array(e);for(let n=0;n<e;++n)s[n]=gu(i.style[n],t)}else s=[gu(i.style,t)];n[o]={filter:r,styles:s}}return function(t){const o=[];let r=!1;for(let s=0;s<i;++s)if((0,n[s].filter)(t)&&(!e[s].else||!r)){r=!0;for(const e of n[s].styles){const i=e(t);i&&o.push(i)}}return o}}(e,t),n={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(e,o){if(n.properties=e.getPropertiesInternal(),n.resolution=o,t.featureId){const t=e.getId();n.featureId=void 0!==t?t:null}return t.geometryType&&(n.geometryType=wl(e.getGeometry())),i(n)}}function fu(e){const t=ya(),i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=gu(e[s],t);const o={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},r=new Array(i);return function(e,s){if(o.properties=e.getPropertiesInternal(),o.resolution=s,t.featureId){const t=e.getId();o.featureId=void 0!==t?t:null}let a=0;for(let t=0;t<i;++t){const e=n[t](o);e&&(r[a]=e,a+=1)}return r.length=a,r}}function gu(e,t){const i=mu(e,"",t),n=vu(e,"",t),o=function(e,t){const i="text-",n=_u(e,i+"value",t);if(!n)return null;const o=mu(e,i,t),r=mu(e,i+"background-",t),s=vu(e,i,t),a=vu(e,i+"background-",t),l=_u(e,i+"font",t),u=yu(e,i+"max-angle",t),c=yu(e,i+"offset-x",t),h=yu(e,i+"offset-y",t),d=bu(e,i+"overflow",t),p=_u(e,i+"placement",t),f=yu(e,i+"repeat",t),g=Mu(e,i+"scale",t),m=bu(e,i+"rotate-with-view",t),v=yu(e,i+"rotation",t),y=_u(e,i+"align",t),_=_u(e,i+"justify",t),b=_u(e,i+"baseline",t),x=bu(e,i+"keep-upright",t),w=wu(e,i+"padding",t),S=Pu(e,i+"declutter-mode"),C=new hu({declutterMode:S});return function(e){if(C.setText(n(e)),o&&C.setFill(o(e)),r&&C.setBackgroundFill(r(e)),s&&C.setStroke(s(e)),a&&C.setBackgroundStroke(a(e)),l&&C.setFont(l(e)),u&&C.setMaxAngle(u(e)),c&&C.setOffsetX(c(e)),h&&C.setOffsetY(h(e)),d&&C.setOverflow(d(e)),p){const t=p(e);if("point"!==t&&"line"!==t)throw new Error("Expected point or line for text-placement");C.setPlacement(t)}if(f&&C.setRepeat(f(e)),g&&C.setScale(g(e)),m&&C.setRotateWithView(m(e)),v&&C.setRotation(v(e)),y){const t=y(e);if("left"!==t&&"center"!==t&&"right"!==t&&"end"!==t&&"start"!==t)throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(t)}if(_){const t=_(e);if("left"!==t&&"right"!==t&&"center"!==t)throw new Error("Expected left, right, or center for text-justify");C.setJustify(t)}if(b){const t=b(e);if("bottom"!==t&&"top"!==t&&"middle"!==t&&"alphabetic"!==t&&"hanging"!==t)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(t)}return w&&C.setPadding(w(e)),x&&C.setKeepUpright(x(e)),C}}(e,t),r=(l=t,"icon-src"in(a=e)?function(e,t){const i="icon-",n=i+"src",o=Iu(e[n],n),r=Su(e,i+"anchor",t),s=Mu(e,i+"scale",t),a=yu(e,i+"opacity",t),l=Su(e,i+"displacement",t),u=yu(e,i+"rotation",t),c=bu(e,i+"rotate-with-view",t),h=ku(e,i+"anchor-origin"),d=Tu(e,i+"anchor-x-units"),p=Tu(e,i+"anchor-y-units"),f=function(e,t){const i=e[t];if(void 0!==i)return Au(i,t)}(e,i+"color"),g=function(e,t){const i=e[t];if(void 0!==i){if("string"!=typeof i)throw new Error(`Expected a string for ${t}`);return i}}(e,i+"cross-origin"),m=function(e,t){const i=e[t];if(void 0!==i)return Lu(i,t)}(e,i+"offset"),v=ku(e,i+"offset-origin"),y=Eu(e,i+"width"),_=Eu(e,i+"height"),b=function(e,t){const i=e[t];if(void 0!==i){if("number"==typeof i)return ia(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${t}`);if(2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])throw new Error(`Expected a number or size array for ${t}`);return i}}(e,i+"size"),x=Pu(e,i+"declutter-mode"),w=new ru({src:o,anchorOrigin:h,anchorXUnits:d,anchorYUnits:p,color:f,crossOrigin:g,offset:m,offsetOrigin:v,height:_,width:y,size:b,declutterMode:x});return function(e){return a&&w.setOpacity(a(e)),l&&w.setDisplacement(l(e)),u&&w.setRotation(u(e)),c&&w.setRotateWithView(c(e)),s&&w.setScale(s(e)),r&&w.setAnchor(r(e)),w}}(a,l):"shape-points"in a?function(e,t){const i="shape-",n=i+"points",o=i+"radius",r=Ru(e[n],n),s=Ru(e[o],o),a=mu(e,i,t),l=vu(e,i,t),u=Mu(e,i+"scale",t),c=Su(e,i+"displacement",t),h=yu(e,i+"rotation",t),d=bu(e,i+"rotate-with-view",t),p=Eu(e,i+"radius2"),f=Eu(e,i+"angle"),g=Pu(e,i+"declutter-mode"),m=new tu({points:r,radius:s,radius2:p,angle:f,declutterMode:g});return function(e){return a&&m.setFill(a(e)),l&&m.setStroke(l(e)),c&&m.setDisplacement(c(e)),h&&m.setRotation(h(e)),d&&m.setRotateWithView(d(e)),u&&m.setScale(u(e)),m}}(a,l):"circle-radius"in a?function(e,t){const i="circle-",n=mu(e,i,t),o=vu(e,i,t),r=yu(e,i+"radius",t),s=Mu(e,i+"scale",t),a=Su(e,i+"displacement",t),l=yu(e,i+"rotation",t),u=bu(e,i+"rotate-with-view",t),c=Pu(e,i+"declutter-mode"),h=new iu({radius:5,declutterMode:c});return function(e){return r&&h.setRadius(r(e)),n&&h.setFill(n(e)),o&&h.setStroke(o(e)),a&&h.setDisplacement(a(e)),l&&h.setRotation(l(e)),u&&h.setRotateWithView(u(e)),s&&h.setScale(s(e)),h}}(a,l):null),s=yu(e,"z-index",t);var a,l;if(!(i||n||o||r||_e(e)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(e));const u=new au;return function(e){let t=!0;if(i){const n=i(e);n&&(t=!1),u.setFill(n)}if(n){const i=n(e);i&&(t=!1),u.setStroke(i)}if(o){const i=o(e);i&&(t=!1),u.setText(i)}if(r){const i=r(e);i&&(t=!1),u.setImage(i)}return s&&u.setZIndex(s(e)),t?null:u}}function mu(e,t,i){let n;if(t+"fill-pattern-src"in e)n=function(e,t,i){const n=_u(e,t+"pattern-src",i),o=Cu(e,t+"pattern-offset",i),r=Cu(e,t+"pattern-size",i),s=xu(e,t+"color",i);return function(e){return{src:n(e),offset:o&&o(e),size:r&&r(e),color:s&&s(e)}}}(e,t+"fill-",i);else{if("none"===e[t+"fill-color"])return e=>null;n=xu(e,t+"fill-color",i)}if(!n)return null;const o=new nu;return function(e){const t=n(e);return t===As?null:(o.setColor(t),o)}}function vu(e,t,i){const n=yu(e,t+"stroke-width",i),o=xu(e,t+"stroke-color",i);if(!n&&!o)return null;const r=_u(e,t+"stroke-line-cap",i),s=_u(e,t+"stroke-line-join",i),a=wu(e,t+"stroke-line-dash",i),l=yu(e,t+"stroke-line-dash-offset",i),u=yu(e,t+"stroke-miter-limit",i),c=new su;return function(e){if(o){const t=o(e);if(t===As)return null;c.setColor(t)}if(n&&c.setWidth(n(e)),r){const t=r(e);if("butt"!==t&&"round"!==t&&"square"!==t)throw new Error("Expected butt, round, or square line cap");c.setLineCap(t)}if(s){const t=s(e);if("bevel"!==t&&"round"!==t&&"miter"!==t)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(t)}return a&&c.setLineDash(a(e)),l&&c.setLineDashOffset(l(e)),u&&c.setMiterLimit(u(e)),c}}function yu(e,t,i){if(!(t in e))return;const n=Sl(e[t],ra,i);return function(e){return Ru(n(e),t)}}function _u(e,t,i){if(!(t in e))return null;const n=Sl(e[t],sa,i);return function(e){return Iu(n(e),t)}}function bu(e,t,i){if(!(t in e))return null;const n=Sl(e[t],oa,i);return function(e){const i=n(e);if("boolean"!=typeof i)throw new Error(`Expected a boolean for ${t}`);return i}}function xu(e,t,i){if(!(t in e))return null;const n=Sl(e[t],aa,i);return function(e){return Au(n(e),t)}}function wu(e,t,i){if(!(t in e))return null;const n=Sl(e[t],la,i);return function(e){return Lu(n(e),t)}}function Su(e,t,i){if(!(t in e))return null;const n=Sl(e[t],la,i);return function(e){const i=Lu(n(e),t);if(2!==i.length)throw new Error(`Expected two numbers for ${t}`);return i}}function Cu(e,t,i){if(!(t in e))return null;const n=Sl(e[t],la,i);return function(e){return qu(n(e),t)}}function Mu(e,t,i){if(!(t in e))return null;const n=Sl(e[t],la|ra,i);return function(e){return i=n(e),o=t,"number"==typeof i?i:qu(i,o);var i,o}}function Eu(e,t){const i=e[t];if(void 0!==i){if("number"!=typeof i)throw new Error(`Expected a number for ${t}`);return i}}function ku(e,t){const i=e[t];if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return i}}function Tu(e,t){const i=e[t];if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw new Error(`Expected pixels or fraction for ${t}`);return i}}function Pu(e,t){const i=e[t];if(void 0!==i){if("string"!=typeof i)throw new Error(`Expected a string for ${t}`);if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw new Error(`Expected declutter, obstacle, or none for ${t}`);return i}}function Lu(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const i=e.length;for(let n=0;n<i;++n)if("number"!=typeof e[n])throw new Error(`Expected an array of numbers for ${t}`);return e}function Iu(e,t){if("string"!=typeof e)throw new Error(`Expected a string for ${t}`);return e}function Ru(e,t){if("number"!=typeof e)throw new Error(`Expected a number for ${t}`);return e}function Au(e,t){if("string"==typeof e)return e;const i=Lu(e,t),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return i}function qu(e,t){const i=Lu(e,t);if(2!==i.length)throw new Error(`Expected an array of two numbers for ${t}`);return i}const Fu="renderOrder";class Ou extends ps{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Fu)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new ys(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Fu,e)}setStyle(e){this.style_=void 0===e?uu:e;const t=function(e){if(void 0===e)return uu;if(!e)return null;if("function"==typeof e||e instanceof au)return e;if(!Array.isArray(e))return fu([e]);if(0===e.length)return[];const t=e.length,i=e[0];if(i instanceof au){const i=new Array(t);for(let n=0;n<t;++n){const t=e[n];if(!(t instanceof au))throw new Error("Expected a list of style instances");i[n]=t}return i}if("style"in i){const i=new Array(t);for(let n=0;n<t;++n){const t=e[n];if(!("style"in t))throw new Error("Expected a list of rules with a style property");i[n]=t}return pu(i)}return fu(e)}(e);this.styleFunction_=null===e?void 0:function(e){let t;if("function"==typeof e)t=e;else{let i;Array.isArray(e)?i=e:(tt("function"==typeof e.getZIndex,"Expected an `Style` or an array of `Style`"),i=[e]),t=function(){return i}}return t}(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}class zu extends be{constructor(e,t,i,n){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=n}}class Nu extends se{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ke()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;jn(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Bn(n,i)}forEachFeatureAtCoordinate(e,t,i,n,o,r,s,a){let l;const u=t.viewState;function c(e,t,i,n){return o.call(r,t,e?i:null,n)}const h=u.projection,d=si(e.slice(),h),p=[[0,0]];if(h.canWrapX()&&n){const e=Kt(h.getExtent());p.push([-e,0],[e,0])}const f=t.layerStatesArray,g=f.length,m=[],v=[];for(let _=0;_<p.length;_++)for(let n=g-1;n>=0;--n){const o=f[n],r=o.layer;if(r.hasRenderer()&&fs(o,u)&&s.call(a,r)){const n=r.getRenderer(),s=r.getSource();if(n&&s){const r=s.getWrapX()?d:e,a=c.bind(null,o.managed);v[0]=r[0]+p[_][0],v[1]=r[1]+p[_][1],l=n.forEachFeatureAtCoordinate(v,t,i,a,m)}if(l)return l}}if(0===m.length)return;const y=1/m.length;return m.forEach(((e,t)=>e.distanceSq+=t*y)),m.sort(((e,t)=>e.distanceSq-t.distanceSq)),m.some((e=>l=e.callback(e.feature,e.layer,e.geometry))),l}hasFeatureAtCoordinate(e,t,i,n,o,r){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,n,pe,this,o,r)}getMap(){return this.map_}renderFrame(e){ke()}scheduleExpireIconCache(e){Pl.canExpireCache()&&e.postRenderFunctions.push(Du)}}function Du(e,t){Pl.expire()}class Gu extends Nu{constructor(e){super(e),this.fontChangeListenerKey_=we(Vl,Q,e.redrawText,e),this.element_=Be?ur():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Xo+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const n=new zu(e,void 0,t);i.dispatchEvent(n)}}disposeInternal(){Ce(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(hs,e);const t=e.layerStatesArray.sort(((e,t)=>e.zIndex-t.zIndex));t.some((e=>e.layer instanceof Ou&&e.layer.getDeclutter()))&&(e.declutter={});const i=e.viewState;this.children_.length=0;const n=[];let o=null;for(let s=0,a=t.length;s<a;++s){const r=t[s];e.layerIndex=s;const a=r.layer,l=a.getSourceState();if(!fs(r,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const u=a.render(e,o);u&&(u!==o&&(this.children_.push(u),o=u),n.push(r))}this.declutter(e,n),function(e,t){const i=e.childNodes;for(let n=0;;++n){const o=i[n],r=t[n];if(!o&&!r)break;if(o!==r){if(!o){e.appendChild(r);continue}if(!r){e.removeChild(o),--n;continue}e.insertBefore(r,o)}}}(this.element_,this.children_);const r=this.getMap().getTargetElement();if(cr(r)){const e=r.getContext("2d");for(const t of this.children_){const i=t.firstElementChild||t,n=t.style.backgroundColor;if(n&&(!cr(i)||i.width>0)&&(e.fillStyle=n,e.fillRect(0,0,r.width,r.height)),cr(i)&&i.width>0){const n=t.style.opacity||i.style.opacity;e.globalAlpha=""===n?1:Number(n);const o=i.style.transform;if(o)e.setTransform(...$n(o));else{const t=parseFloat(i.style.width)/i.width,n=parseFloat(i.style.height)/i.height;e.setTransform(t,0,0,n,0,0)}e.drawImage(i,0,0)}}e.globalAlpha=1,e.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const n=t[i],o=n.layer;o.getDeclutter()&&o.renderDeclutter(e,n)}t.forEach((t=>t.layer.renderDeferred(e)))}}}function ju(e){e instanceof ps?e.setMapInternal(null):e instanceof ls&&e.getLayers().forEach(ju)}function Bu(e,t){if(e instanceof ps)e.setMapInternal(t);else if(e instanceof ls){const i=e.getLayers().getArray();for(let e=0,n=i.length;e<n;++e)Bu(i[e],t)}}let Vu=class extends Ie{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=function(e){let t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const i={},n=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new ls({layers:e.layers});let o,r,s;return i[Ze]=n,i[Je]=e.target,i[et]=e.view instanceof $o?e.view:new $o,void 0!==e.controls&&(Array.isArray(e.controls)?o=new qe(e.controls.slice()):(tt("function"==typeof e.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),o=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?r=new qe(e.interactions.slice()):(tt("function"==typeof e.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),r=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?s=new qe(e.overlays.slice()):(tt("function"==typeof e.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),s=e.overlays):s=new qe,{controls:o,interactions:r,keyboardEventTarget:t,overlays:s,values:i}}(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:je,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Be||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Be||(this.resizeObserver_=new ResizeObserver((()=>this.updateSize()))),this.controls=t.controls||(Be?new qe:function(e){e=e||{};const t=new qe;return(void 0===e.zoom||e.zoom)&&t.push(new fr(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&t.push(new pr(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&t.push(new dr(e.attributionOptions)),t}()),this.interactions=t.interactions||(Be?new qe:function(e){e=e||{};const t=new qe,i=new gr(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&t.push(new qr),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&t.push(new _r({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&t.push(new Ar({onFocusOnly:e.onFocusOnly,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&t.push(new Ur),(void 0===e.pinchZoom||e.pinchZoom)&&t.push(new Wr({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(t.push(new Vr),t.push(new $r({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&t.push(new Hr({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&t.push(new Dr({duration:e.zoomDuration})),t}({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ot(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ze,this.handleLayerGroupChanged_),this.addChangeListener(et,this.handleViewChanged_),this.addChangeListener(Qe,this.handleSizeChanged_),this.addChangeListener(Je,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof $o)&&e.view.then((function(e){i.setView(new $o(e))})),this.controls.addEventListener(Y,(e=>{e.element.setMap(this)})),this.controls.addEventListener(Z,(e=>{e.element.setMap(null)})),this.interactions.addEventListener(Y,(e=>{e.element.setMap(this)})),this.interactions.addEventListener(Z,(e=>{e.element.setMap(null)})),this.overlays_.addEventListener(Y,(e=>{this.addOverlayInternal_(e.element)})),this.overlays_.addEventListener(Z,(e=>{const t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)})),this.controls.forEach((e=>{e.setMap(this)})),this.interactions.forEach((e=>{e.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Bu(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e),o=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,r=void 0!==i.layerFilter?i.layerFilter:pe,s=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,s,t,null,r,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,(function(e){i.push(e)}),t),i}getAllLayers(){const e=[];return function t(i){i.forEach((function(i){i instanceof ls?t(i.getLayers()):e.push(i)}))}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:pe,o=void 0!==t.hitTolerance?t.hitTolerance:0,r=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,r,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=t.width/i[0],o=t.height/i[1],r="changedTouches"in e?e.changedTouches[0]:e;return[(r.clientX-t.left)/n,(r.clientY-t.top)/o]}getTarget(){return this.get(Je)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return kn(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Dn(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ze)}setLayers(e){const t=this.getLayerGroup();if(e instanceof qe)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const i=e[t];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Tn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Dn(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Qe)}getView(){return this.get(et)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,n){return function(e,t,i,n,o){if(!e||!(i in e.wantedTiles)||!e.wantedTiles[i][t.getKey()])return it;const r=e.viewState.center,s=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(o)+Math.sqrt(s*s+a*a)/o}(this.frameState_,e,t,i,n)}handleBrowserEvent(e,t){t=t||e.type;const i=new Oe(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===Ue||i===re||i===ie){const e=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():e,n=t.target,o=i instanceof ShadowRoot?i.host===n?i.host.ownerDocument:i:i===e?e.documentElement:i;if(this.overlayContainerStopEvent_.contains(n)||!o.contains(n))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const t=this.getInteractions().getArray().slice();for(let i=t.length-1;i>=0;i--){const n=t[i];if(n.getMap()===this&&n.getActive()&&this.getTargetElement()&&(!n.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,n=i;if(e){const t=e.viewHints;if(t[0]||t[1]){const t=Date.now()-e.time>8;i=t?0:8,n=t?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,n))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(ds)&&this.renderer_.dispatchRenderEvent(ds,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Fe(Ye,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Fe(Ke,this,e))));const i=this.postRenderFunctions_;if(e)for(let n=0,o=i.length;n<o;++n)i[n](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)Ce(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ee,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(re,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!cr(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const e=this.targetElement_.getRootNode();e instanceof ShadowRoot&&this.resizeObserver_.unobserve(e.host),this.setSize(void 0)}const e=this.getTarget(),t="string"==typeof e?document.getElementById(e):e;if(this.targetElement_=t,t){if(cr(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Gu(this)),!cr(t)){this.mapBrowserEventHandler_=new We(this,this.moveTolerance_);for(const t in ze)this.mapBrowserEventHandler_.addEventListener(ze[t],this.handleMapBrowserEvent.bind(this));let e;if(this.viewport_.addEventListener(ee,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(re,this.boundHandleBrowserEvent_,!!He&&{passive:!1}),this.keyboardEventTarget_)e=this.keyboardEventTarget_;else{const i=t.getRootNode();e=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[we(e,ie,this.handleBrowserEvent,this),we(e,ne,this.handleBrowserEvent,this)],t instanceof HTMLElement){const e=t.getRootNode();e instanceof ShadowRoot&&this.resizeObserver_.observe(e.host),this.resizeObserver_?.observe(t)}}this.updateSize()}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0)}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ce(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ce(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=we(e,Q,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=we(e,J,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ce),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new ss("addlayer",e)),this.layerGroupPropertyListenerKeys_=[we(e,Q,this.render,this),we(e,J,this.render,this),we(e,"addlayer",this.handleLayerAdd_,this),we(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){ju(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),n=this.frameState_;let o=null;if(void 0!==t&&ea(t)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),r=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Vt(r.center,r.resolution,r.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:r,viewHints:n,wantedTiles:{},mapId:Pe(this),renderTargets:{}},r.nextCenter&&r.nextResolution){const e=isNaN(r.nextRotation)?r.rotation:r.nextRotation;o.nextExtent=Vt(r.nextCenter,r.nextResolution,e,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),n&&(!this.previousExtent_||!Zt(this.previousExtent_)&&!Rt(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Fe("movestart",this,n)),this.previousExtent_=Pt(this.previousExtent_)),this.previousExtent_&&!o.viewHints[0]&&!o.viewHints[1]&&!Rt(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Fe("moveend",this,o)),wt(o.extent,this.previousExtent_))),this.dispatchEvent(new Fe(Xe,this,o)),this.renderComplete_=(this.hasListener(Ke)||this.hasListener(Ye)||this.hasListener(ds))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new ss("removelayer",t)),this.set(Ze,e)}setSize(e){this.set(Qe,e)}setTarget(e){this.set(Je,e)}setView(e){if(!e||e instanceof $o)return void this.set(et,e);this.set(et,new $o);const t=this;e.then((function(e){t.setView(new $o(e))}))}updateSize(){const e=this.getTargetElement();let t;if(e){let i,n;if(cr(e))i=e.width,n=e.height;else{const t=getComputedStyle(e);i=e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),n=e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)}!isNaN(i)&&!isNaN(n)&&(t=[Math.max(0,i),Math.max(0,n)],!ea(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length))}const i=this.getSize();t&&(!i||!de(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};class $u extends xe{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(J)}release(){this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(4!==this.state){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){ke()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const n=t-i+1e3/60;return n>=this.transition_?1:li(n/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Hu(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}const Uu=new Error("disposed");let Wu=null;const Xu=[256,256];class Ku extends $u{constructor(e){super(e.tileCoord,0,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Hu(this.data_);return e?[e.width,e.height]:Xu}getData(){return this.data_}getError(){return this.error_}load(){if(0!==this.state&&3!==this.state)return;this.state=1,this.changed();const e=this;this.loader_().then((function(t){e.data_=t,e.state=2,e.changed()})).catch((function(t){e.error_=t,e.state=3,e.changed()}))}disposeInternal(){this.controller_&&(this.controller_.abort(Uu),this.controller_=null),super.disposeInternal()}}class Yu extends $u{constructor(e,t,i,n,o,r){super(e,t,r),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_,Be?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,null!==n&&(this.image_.crossOrigin=n)),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function(){const e=tr(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}(),this.changed()}handleImageLoad_(){if(Be)this.state=2;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=2:this.state=4}this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(e,t,i){const n=e;let o=!0,r=!1,s=!1;const a=[Se(n,"load",(function(){s=!0,r||t()}))];return n.src&&Ve?(r=!0,n.decode().then((function(){o&&t()})).catch((function(e){o&&(s?t():i())}))):a.push(Se(n,"error",i)),function(){o=!1,a.forEach(Ce)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}class Zu{constructor(e,t,i,n){this.minX=e,this.maxX=t,this.minY=i,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Qu(e,t,i,n,o){return void 0!==o?(o.minX=e,o.maxX=t,o.minY=i,o.maxY=n,o):new Zu(e,t,i,n)}let Ju;const ec=[];function tc(e,t,i,n,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,i),e.lineTo(n,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(i,o)),e.restore()}function ic(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function nc(e,t,i,n){const o=Mn(i,t,e);let r=gn(t,n,i);const s=t.getMetersPerUnit();void 0!==s&&(r*=s);const a=e.getMetersPerUnit();void 0!==a&&(r/=a);const l=e.getExtent();if(!l||Ct(l,o)){const t=gn(e,r,o)/r;isFinite(t)&&t>0&&(r/=t)}return r}function oc(e,t,i,n){const o=jt(i);let r=nc(e,t,o,n);return(!isFinite(r)||r<=0)&&zt(i,(function(i){return r=nc(e,t,i,n),isFinite(r)&&r>0})),r}function rc(e,t,i,n,o,r,s,a,l,u,c,h,d,p){const f=tr(Math.round(i*e),Math.round(i*t),ec);if(h||(f.imageSmoothingEnabled=!1),0===l.length)return f.canvas;function g(e){return Math.round(e*i)/i}f.scale(i,i),f.globalCompositeOperation="lighter";const m=[1/0,1/0,-1/0,-1/0];let v;l.forEach((function(e,t,i){At(m,e.extent)}));const y=i/n,_=(h?1:1+Math.pow(2,-24))/y;if(!d||1!==l.length||0!==u){if(v=tr(Math.round(Kt(m)*y),Math.round(Ht(m)*y),ec),h||(v.imageSmoothingEnabled=!1),o&&p){const e=(o[0]-m[0])*y,t=-(o[3]-m[3])*y,i=Kt(o)*y,n=Ht(o)*y;v.rect(e,t,i,n),v.clip()}l.forEach((function(e,t,i){if(e.image.width>0&&e.image.height>0){if(e.clipExtent){v.save();const t=(e.clipExtent[0]-m[0])*y,i=-(e.clipExtent[3]-m[3])*y,n=Kt(e.clipExtent)*y,o=Ht(e.clipExtent)*y;v.rect(h?t:Math.round(t),h?i:Math.round(i),h?n:Math.round(t+n)-Math.round(t),h?o:Math.round(i+o)-Math.round(i)),v.clip()}const t=(e.extent[0]-m[0])*y,i=-(e.extent[3]-m[3])*y,n=Kt(e.extent)*y,o=Ht(e.extent)*y;v.drawImage(e.image,u,u,e.image.width-2*u,e.image.height-2*u,h?t:Math.round(t),h?i:Math.round(i),h?n:Math.round(t+n)-Math.round(t),h?o:Math.round(i+o)-Math.round(i)),e.clipExtent&&v.restore()}}))}const b=Wt(s);return a.getTriangles().forEach((function(e,t,i){const n=e.source,o=e.target;let s=n[0][0],a=n[0][1],u=n[1][0],c=n[1][1],d=n[2][0],p=n[2][1];const y=g((o[0][0]-b[0])/r),x=g(-(o[0][1]-b[1])/r),w=g((o[1][0]-b[0])/r),S=g(-(o[1][1]-b[1])/r),C=g((o[2][0]-b[0])/r),M=g(-(o[2][1]-b[1])/r),E=s,k=a;s=0,a=0,u-=E,c-=k,d-=E,p-=k;const T=function(e){const t=e.length;for(let n=0;n<t;n++){let i=n,o=Math.abs(e[n][n]);for(let s=n+1;s<t;s++){const t=Math.abs(e[s][n]);t>o&&(o=t,i=s)}if(0===o)return null;const r=e[i];e[i]=e[n],e[n]=r;for(let s=n+1;s<t;s++){const i=-e[s][n]/e[n][n];for(let o=n;o<t+1;o++)n==o?e[s][o]=0:e[s][o]+=i*e[n][o]}}const i=new Array(t);for(let n=t-1;n>=0;n--){i[n]=e[n][t]/e[n][n];for(let o=n-1;o>=0;o--)e[o][t]-=e[o][n]*i[n]}return i}([[u,c,0,0,w-y],[d,p,0,0,C-y],[0,0,u,c,S-x],[0,0,d,p,M-x]]);if(!T)return;if(f.save(),f.beginPath(),function(){if(void 0===Ju){const e=tr(6,6,ec);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",tc(e,4,5,4,0),tc(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;Ju=ic(t,0)||ic(t,4)||ic(t,8),or(e),ec.push(e.canvas)}return Ju}()||!h){f.moveTo(w,S);const e=4,t=y-w,i=x-S;for(let n=0;n<e;n++)f.lineTo(w+g((n+1)*t/e),S+g(n*i/(e-1))),n!=e-1&&f.lineTo(w+g((n+1)*t/e),S+g((n+1)*i/(e-1)));f.lineTo(C,M)}else f.moveTo(w,S),f.lineTo(y,x),f.lineTo(C,M);let P;if(f.clip(),f.transform(T[0],T[2],T[1],T[3],y,x),f.translate(m[0]-E,m[3]-k),v)P=v.canvas,f.scale(_,-_);else{const e=l[0],t=e.extent;P=e.image,f.scale(Kt(t)/P.width,-Ht(t)/P.height)}f.drawImage(P,0,0),f.restore()})),v&&(or(v),ec.push(v.canvas)),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach((function(e,t,i){const n=e.target,o=(n[0][0]-b[0])/r,s=-(n[0][1]-b[1])/r,a=(n[1][0]-b[0])/r,l=-(n[1][1]-b[1])/r,u=(n[2][0]-b[0])/r,c=-(n[2][1]-b[1])/r;f.beginPath(),f.moveTo(a,l),f.lineTo(o,s),f.lineTo(u,c),f.closePath(),f.stroke()})),f.restore()),f.canvas}class sc{constructor(e,t,i,n,o,r,s){this.sourceProj_=e,this.targetProj_=t;let a={};const l=s?yn((e=>Dn(s,Mn(e,this.targetProj_,this.sourceProj_)))):Cn(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){const t=e[0]+"/"+e[1];return a[t]||(a[t]=l(e)),a[t]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Kt(n)>=Kt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Kt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Kt(this.targetProj_.getExtent()):null;const u=Wt(i),c=Xt(i),h=Gt(i),d=Dt(i),p=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),m=this.transformInv_(d),v=10+(r?Math.max(0,Math.ceil(Math.log2(Nt(i)/(r*r*256*256)))):0);if(this.addQuad_(u,c,h,d,p,f,g,m,v),this.wrapsXInSource_){let e=1/0;this.triangles_.forEach((function(t,i,n){e=Math.min(e,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach((t=>{if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-e>this.sourceWorldWidth_/2){const i=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];i[0][0]-e>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-e>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-e>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(t.source=i)}}))}a={}}addTriangle_(e,t,i,n,o,r){this.triangles_.push({source:[n,o,r],target:[e,t,i]})}addQuad_(e,t,i,n,o,r,s,a,l){const u=bt([o,r,s,a]),c=this.sourceWorldWidth_?Kt(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1;let p=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=Kt(bt([e,t,i,n]))/this.targetWorldWidth_>.25||p),!d&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)),!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Yt(u,this.maxSourceExtent_))return;let f=0;if(!(p||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)p=!0;else if(f=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=f&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!p){const t=[(e[0]+i[0])/2,(e[1]+i[1])/2],n=this.transformInv_(t);let r;r=d?(ht(o[0],h)+ht(s[0],h))/2-ht(n[0],h):(o[0]+s[0])/2-n[0];const a=(o[1]+s[1])/2-n[1];p=r*r+a*a>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const u=[(t[0]+i[0])/2,(t[1]+i[1])/2],c=this.transformInv_(u),h=[(n[0]+e[0])/2,(n[1]+e[1])/2],d=this.transformInv_(h);this.addQuad_(e,t,u,h,o,r,c,d,l-1),this.addQuad_(h,u,i,n,d,c,s,a,l-1)}else{const u=[(e[0]+t[0])/2,(e[1]+t[1])/2],c=this.transformInv_(u),h=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=this.transformInv_(h);this.addQuad_(e,u,h,n,o,c,d,a,l-1),this.addQuad_(u,t,i,h,c,r,s,d,l-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}!(11&f)&&this.addTriangle_(e,i,n,o,s,a),!(14&f)&&this.addTriangle_(e,i,t,o,s,r),f&&(!(13&f)&&this.addTriangle_(t,n,e,r,a,o),!(7&f)&&this.addTriangle_(t,n,i,r,a,s))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(t,i,n){const o=t.source;qt(e,o[0]),qt(e,o[1]),qt(e,o[2])})),e}getTriangles(){return this.triangles_}}class ac extends $u{constructor(e,t,i,n,o,r,s,a,l,u,c,h){super(o,0,h),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=r||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const d=n.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let f=this.sourceTileGrid_.getExtent();const g=p?Ut(d,p):d;if(0===Nt(g))return void(this.state=4);const m=e.getExtent();m&&(f=f?Ut(f,m):m);const v=n.getResolution(this.wrappedTileCoord_[0]),y=oc(e,i,g,v);if(!isFinite(y)||y<=0)return void(this.state=4);const _=void 0!==u?u:.5;if(this.triangulation_=new sc(e,i,g,f,y*_,v),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(y);let b=this.triangulation_.calculateSourceExtent();if(f&&(e.canWrapX()?(b[1]=st(b[1],f[1],f[3]),b[3]=st(b[3],f[1],f[3])):b=Ut(b,f)),Nt(b)){let i=0,n=0;e.canWrapX()&&(i=Kt(m),n=Math.floor((b[0]-m[0])/i)),ei(b.slice(),e,!0).forEach((e=>{const o=t.getTileRangeForExtentAndZ(e,this.sourceZ_);for(let t=o.minX;t<=o.maxX;t++)for(let e=o.minY;e<=o.maxY;e++){const o=l(this.sourceZ_,t,e,s);if(o){const e=n*i;this.sourceTiles_.push({tile:o,offset:e})}}++n})),0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach((t=>{const i=t.tile;if(i&&2==i.getState()){const n=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);n[0]+=t.offset,n[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:n,clipExtent:o,image:i.getImage()})}})),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),n="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],r=this.targetTileGrid_.getResolution(t),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=rc(n,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((({tile:t})=>{const i=t.getState();if(0==i||1==i){e++;const i=we(t,J,(n=>{const o=t.getState();(2==o||3==o||4==o)&&(Ce(i),e--,0===e&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(i)}})),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function({tile:e},t,i){0==e.getState()&&e.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ce),this.sourcesListenerKeys_=null}release(){this.canvas_&&(or(this.canvas_.getContext("2d")),ec.push(this.canvas_),this.canvas_=null),super.release()}}class lc{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof se&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return tt(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return tt(void 0!==t,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t,i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e}getValues(){const e=new Array(this.count_);let t,i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){tt(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function uc(e,t,i,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=i,n):[e,t,i]}function cc(e,t,i,n,o){return`${Pe(e)},${t},${r=i,s=n,a=o,r+"/"+s+"/"+a}`;var r,s,a}function hc(e){return dc(e[0],e[1],e[2])}function dc(e,t,i){return(t<<e)+i}class pc{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(nr(),{get:(e,t)=>{if("function"==typeof nr()[t])return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach((t=>{for(let i=0,n=t.length;i<n;++i){const n=t[i];if("function"==typeof n){n(e);continue}const o=t[++i];if("function"==typeof e[n])e[n](...o);else{if("function"==typeof o){e[n]=o(e);continue}e[n]=o}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}class fc extends Me{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ke()}getData(e){return null}prepareFrame(e){return ke()}renderFrame(e,t){return ke()}forEachFeatureAtCoordinate(e,t,i,n,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(2===t.getState()||3===t.getState())&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener(J,this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const gc=[];let mc=null;class vc extends fc{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){let n;mc||(mc=tr(1,1,void 0,{willReadFrequently:!0})),mc.clearRect(0,0,1,1);try{mc.drawImage(e,t,i,1,1,0,0,1,1),n=mc.getImageData(0,0,1,1).data}catch{return mc=null,null}return n}getBackground(e){let t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}useContainer(e,t,i){const n=this.getLayer().getClassName();let o,r;if(e&&e.className===n&&(!i||e&&e.style.backgroundColor&&de(Qs(e.style.backgroundColor),Qs(i)))){const t=e.firstElementChild;cr(t)&&(r=t.getContext("2d"))}if(r&&function(e,t){const i=$n(e),n=$n(t);for(let o=0;o<6;++o)if(0!==Math.round((i[o]-n[o])*Vn[o]))return!1;return!0}(r.canvas.style.transform,t)?(this.container=e,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=Be?ur():document.createElement("div"),o.className=n;let e=o.style;e.position="absolute",e.width="100%",e.height="100%",r=tr();const t=r.canvas;o.appendChild(t),e=t.style,e.position="absolute",e.left="0",e.transformOrigin="top left",this.container=o,this.context=r}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const n=Wt(i),o=Xt(i),r=Gt(i),s=Dt(i);Dn(t.coordinateToPixelTransform,n),Dn(t.coordinateToPixelTransform,o),Dn(t.coordinateToPixelTransform,r),Dn(t.coordinateToPixelTransform,s);const a=this.inversePixelTransform;Dn(a,n),Dn(a,o),Dn(a,r),Dn(a,s),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,t){const i=e.extent,n=e.viewState.resolution,o=e.viewState.rotation,r=e.pixelRatio,s=Math.round(Kt(i)/n*r),a=Math.round(Ht(i)/n*r);jn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,o,-s/2,-a/2),Bn(this.inversePixelTransform,this.pixelTransform);const l="matrix("+this.pixelTransform.join(", ")+")";if(this.useContainer(t,l,this.getBackground(e)),!this.containerReused){const e=this.context.canvas;e.width!=s||e.height!=a?(e.width=s,e.height=a):this.context.clearRect(0,0,s,a),l!==e.style.transform&&(e.style.transform=l)}}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){const o=new zu(e,this.inversePixelTransform,i,t);n.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(us,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(cs,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new pc),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(us,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(cs,this.context,e))}getRenderTransform(e,t,i,n,o,r,s){const a=o/2,l=r/2,u=n/t,c=-u,h=-e[0]+s,d=-e[1];return jn(this.tempTransform,a,l,u,c,-i,h,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function yc(e,t,i){if(!(i in e))return e[i]=new Set([t]),!0;const n=e[i],o=n.has(t);return o||n.add(t),!o}function _c(e,t,i){const n=e[i];return!!n&&n.delete(t)}function bc(e,t){const i=e.layerStatesArray[e.layerIndex];i.extent&&(t=Ut(t,Ln(i.extent,e.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=Ut(t,i))}return t}class xc extends vc{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=[1/0,1/0,-1/0,-1/0],this.tempTileRange_=new Zu(0,0,0,0),this.tempTileCoord_=uc(0,0,0);const i=void 0!==t.cacheSize?t.cacheSize:512;this.tileCache_=new lc(i),this.sourceTileCache_=null,this.maxStaleKeys=.5*i}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new lc(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,n){const o=this.tileCache_,r=this.getLayer().getSource(),s=cc(r,r.getKey(),e,t,i);let a;if(o.containsKey(s))a=o.get(s);else{const l=n.viewState.projection,u=r.getProjection();if(a=r.getTile(e,t,i,n.pixelRatio,l,!u||xn(u,l)?void 0:this.getSourceTileCache()),!a)return null;o.set(s,a)}return a}getTile(e,t,i,n){return this.getOrCreateTile(e,t,i,n)||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Dn(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Ct(o,n))return null;const r=t.viewState,s=i.getRenderSource(),a=s.getTileGridForProjection(r.projection),l=s.getTilePixelRatio(t.pixelRatio);for(let u=a.getZForResolution(r.resolution);u>=a.getMinZoom();--u){const e=a.getTileCoordForCoordAndZ(n,u),i=this.getTile(u,e[1],e[2],t);if(!i||2!==i.getState())continue;const o=a.getOrigin(u),c=ia(a.getTileSize(u)),h=a.getResolution(u);let d;if(i instanceof Yu||i instanceof ac)d=i.getImage();else{if(!(i instanceof Ku))continue;if(d=Hu(i.getData()),!d)continue}const p=Math.floor(l*((n[0]-o[0])/h-e[1]*c[0])),f=Math.floor(l*((o[1]-n[1])/h-e[2]*c[1])),g=Math.round(l*s.getGutterForProjection(r.projection));return this.getImageData(d,p+g,f+g)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,n,o){const r=e.viewState,s=this.getLayer(),a=s.getRenderSource(),l=a.getTileGridForProjection(r.projection),u=Pe(a);u in e.wantedTiles||(e.wantedTiles[u]={});const c=e.wantedTiles[u],h=s.getMapInternal(),d=Math.max(i-o,l.getMinZoom(),l.getZForResolution(Math.min(s.getMaxResolution(),h?h.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):l.getResolution(0)),a.zDirection)),p=r.rotation,f=p?$t(r.center,r.resolution,p,e.size):void 0;for(let g=i;g>=d;--g){const i=l.getTileRangeForExtentAndZ(t,g,this.tempTileRange_),o=l.getResolution(g);for(let t=i.minX;t<=i.maxX;++t)for(let r=i.minY;r<=i.maxY;++r){if(p&&!l.tileCoordIntersectsViewport([g,t,r],f))continue;const i=this.getTile(g,t,r,e);if(!i||!yc(n,i,g))continue;const s=i.getKey();if(c[s]=!0,0===i.getState()&&!e.tileQueue.isKeyQueued(s)){const n=uc(g,t,r,this.tempTileCoord_);e.tileQueue.enqueue([i,u,l.getTileCoordCenter(n),o])}}}}findStaleTile_(e,t){const i=this.tileCache_,n=e[0],o=e[1],r=e[2],s=this.getStaleKeys();for(let a=0;a<s.length;++a){const e=cc(this.getLayer().getSource(),s[a],n,o,r);if(i.containsKey(e)){const o=i.peek(e);if(2===o.getState())return o.endTransition(Pe(this)),yc(t,o,n),!0}}return!1}findAltTiles_(e,t,i,n){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let r=!0;const s=this.tileCache_,a=this.getLayer().getRenderSource(),l=a.getKey();for(let u=o.minX;u<=o.maxX;++u)for(let e=o.minY;e<=o.maxY;++e){const t=cc(a,l,i,u,e);let o=!1;if(s.containsKey(t)){const e=s.peek(t);2===e.getState()&&(yc(n,e,i),o=!0)}o||(r=!1)}return r}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],n=e.viewState,o=n.projection,r=n.resolution,s=n.center,a=e.pixelRatio,l=this.getLayer(),u=l.getSource(),c=u.getTileGridForProjection(o),h=c.getZForResolution(r,u.zDirection),d=c.getResolution(h),p=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==p&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=p):this.renderedSourceKey_=p;let f=e.extent;const g=u.getTilePixelRatio(a);this.prepareContainer(e,t);const m=this.context.canvas.width,v=this.context.canvas.height,y=i.extent&&Ln(i.extent);y&&(f=Ut(f,Ln(i.extent)));const _=d*m/2/g,b=d*v/2/g,x=[s[0]-_,s[1]-b,s[0]+_,s[1]+b],w={};this.renderedTiles.length=0;const S=l.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const t=c.getZForResolution(n.nextResolution,u.zDirection),i=bc(e,e.nextExtent);this.enqueueTiles(e,i,t,w,S)}const C=bc(e,f);if(this.enqueueTiles(e,C,h,w,0),S>0&&setTimeout((()=>{this.enqueueTiles(e,C,h-1,w,S-1)}),0),!(h in w))return this.container;const M=Pe(this),E=e.time;for(const A of w[h]){const t=A.getState();if(4===t)continue;const i=A.tileCoord;if(2===t&&1===A.getAlpha(M,E)){A.endTransition(M);continue}if(3!==t&&(this.renderComplete=!1),this.findStaleTile_(i,w)){_c(w,A,h),e.animate=!0;continue}if(this.findAltTiles_(c,i,h+1,w))continue;const n=c.getMinZoom();for(let e=h-1;e>=n&&!this.findAltTiles_(c,i,e,w);--e);}const k=d/r*a/g,T=this.getRenderContext(e);jn(this.tempTransform,m/2,v/2,k,k,0,-m/2,-v/2),i.extent&&this.clipUnrotated(T,e,y),u.getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,e);const P=Object.keys(w).map(Number);let L;P.sort(ae);const I=[],R=[];for(let A=P.length-1;A>=0;--A){const t=P[A],i=u.getTilePixelSize(t,a,o),n=c.getResolution(t)/d,r=i[0]*n*k,s=i[1]*n*k,l=c.getTileCoordForCoordAndZ(Wt(x),t),h=c.getTileCoordExtent(l),p=Dn(this.tempTransform,[g*(h[0]-x[0])/d,g*(x[3]-h[3])/d]),f=g*u.getGutterForProjection(o);for(const o of w[t]){if(2!==o.getState())continue;const i=o.tileCoord,n=l[1]-i[1],a=Math.round(p[0]-(n-1)*r),c=l[2]-i[2],h=Math.round(p[1]-(c-1)*s),d=Math.round(p[0]-n*r),g=Math.round(p[1]-c*s),m=a-d,v=h-g,y=1===P.length;let _=!1;L=[d,g,d+m,g,d+m,g+v,d,g+v];for(let e=0,o=I.length;e<o;++e)if(!y&&t<R[e]){const t=I[e];Yt([d,g,d+m,g+v],[t[0],t[3],t[4],t[7]])&&(_||(T.save(),_=!0),T.beginPath(),T.moveTo(L[0],L[1]),T.lineTo(L[2],L[3]),T.lineTo(L[4],L[5]),T.lineTo(L[6],L[7]),T.moveTo(t[6],t[7]),T.lineTo(t[4],t[5]),T.lineTo(t[2],t[3]),T.lineTo(t[0],t[1]),T.clip())}I.push(L),R.push(t),this.drawTile(o,e,d,g,m,v,f,y),_&&T.restore(),this.renderedTiles.unshift(o),this.updateUsedTiles(e.usedTiles,u,o)}}if(this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!Rt(this.renderedExtent_,x),this.renderedExtent_=x,this.renderedPixelRatio=a,this.postRender(this.context,e),i.extent&&T.restore(),T.imageSmoothingEnabled=!0,this.renderComplete){const t=(e,t)=>{const i=Pe(u),n=t.wantedTiles[i],o=n?Object.keys(n).length:0;this.updateCacheSize(o),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(t)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*e)}drawTile(e,t,i,n,o,r,s,a){let l;if(e instanceof Ku){if(l=Hu(e.getData()),!l)throw new Error("Rendering array data is not yet supported")}else l=this.getTileImage(e);if(!l)return;const u=this.getRenderContext(t),c=Pe(this),h=t.layerStatesArray[t.layerIndex],d=h.opacity*(a?e.getAlpha(c,t.time):1),p=d!==u.globalAlpha;p&&(u.save(),u.globalAlpha=d),u.drawImage(l,s,s,l.width-2*s,l.height-2*s,i,n,o,r),p&&u.restore(),d!==h.opacity?t.animate=!0:a&&e.endTransition(c)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const n=Pe(t);n in e||(e[n]={}),e[n][i.getKey()]=!0}}var wc="preload",Sc="useInterimTilesOnError";class Cc extends ps{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(wc)}setPreload(e){this.set(wc,e)}getUseInterimTilesOnError(){return this.get(Sc)}setUseInterimTilesOnError(e){this.set(Sc,e)}getData(e){return super.getData(e)}}class Mc extends Cc{constructor(e){super(e)}createRenderer(){return new xc(this,{cacheSize:this.getCacheSize()})}}const Ec=[0,0,0];class kc{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,tt(function(e){const t=((e,t)=>t-e)||ae;return e.every((function(i,n){if(0===n)return!0;const o=t(e[n-1],i);return!(o>0||0===o)}))}(this.resolutions_),"`resolutions` must be sorted in descending order"),!e.origins)for(let n=0,o=this.resolutions_.length-1;n<o;++n)if(t){if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}else t=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,tt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=Wt(i)),tt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,tt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,tt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(((e,t)=>{const n=new Zu(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));if(i){const e=this.getTileRangeForExtentAndZ(i,t);n.minX=Math.max(e.minX,n.minX),n.maxX=Math.min(e.maxX,n.maxX),n.minY=Math.max(e.minY,n.minY),n.maxY=Math.min(e.maxY,n.maxY)}return n})):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const n=this.getTileRangeForExtentAndZ(e,t);for(let o=n.minX,r=n.maxX;o<=r;++o)for(let e=n.minY,s=n.maxY;e<=s;++e)i([t,o,e])}forEachTileCoordParentTileRange(e,t,i,n){let o,r,s,a=null,l=e[0]-1;for(2===this.zoomFactor_?(r=e[1],s=e[2]):a=this.getTileCoordExtent(e,n);l>=this.minZoom;){if(void 0!==r&&void 0!==s?(r=Math.floor(r/2),s=Math.floor(s/2),o=Qu(r,r,s,s,i)):o=this.getTileRangeForExtentAndZ(a,l,i),t(l,o))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*e[1],n=2*e[2];return Qu(i,i+1,n,n+1,t)}const n=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const n=e[0],o=e[1],r=e[2];if(t===n)return Qu(o,r,o,r,i);if(this.zoomFactor_){const e=Math.pow(this.zoomFactor_,t-n),s=Math.floor(o*e),a=Math.floor(r*e);return t<n?Qu(s,s,a,a,i):Qu(s,Math.floor(e*(o+1))-1,a,Math.floor(e*(r+1))-1,i)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Ec);const n=Ec[1],o=Ec[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Ec),Qu(n,Ec[1],o,Ec[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),n=ia(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*i,t[1]-(e[2]+.5)*n[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),n=this.getResolution(e[0]),o=ia(this.getTileSize(e[0]),this.tmpSize_),r=i[0]+e[1]*o[0]*n,s=i[1]-(e[2]+1)*o[1]*n;return Tt(r,s,r+o[0]*n,s+o[1]*n,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,n,o){const r=this.getZForResolution(i),s=i/this.getResolution(r),a=this.getOrigin(r),l=ia(this.getTileSize(r),this.tmpSize_);let u=s*(e-a[0])/i/l[0],c=s*(a[1]-t)/i/l[1];return n?(u=mt(u,5)-1,c=mt(c,5)-1):(u=gt(u,5),c=gt(c,5)),uc(r,u,c,o)}getTileCoordForXYAndZ_(e,t,i,n,o){const r=this.getOrigin(i),s=this.getResolution(i),a=ia(this.getTileSize(i),this.tmpSize_);let l=(e-r[0])/s/a[0],u=(r[1]-t)/s/a[1];return n?(l=mt(l,5)-1,u=mt(u,5)-1):(l=gt(l,5),u=gt(u,5)),uc(i,l,u,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return st(ue(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return To(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let n=this.minZoom;n<t;++n)i[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=i}}class Tc extends kc{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function Pc(e){let t=e.getDefaultTileGrid();return t||(t=function(e,t,i,n){n=void 0!==n?n:"top-left";const o=Ic(e,undefined,i);return new kc({extent:e,origin:Bt(e,n),resolutions:o,tileSize:i})}(Rc(e),0,void 0,void 0),e.setDefaultTileGrid(t)),t}function Lc(e){const t=e||{},i=t.extent||fn("EPSG:3857").getExtent(),n={extent:i,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Ic(i,t.maxZoom,t.tileSize,t.maxResolution)};return new kc(n)}function Ic(e,t,i,n){t=void 0!==t?t:42,i=ia(void 0!==i?i:256);const o=Ht(e),r=Kt(e);n=n>0?n:Math.max(r/i[0],o/i[1]);const s=t+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=n/Math.pow(2,l);return a}function Rc(e){let t=(e=fn(e)).getExtent();if(!t){const i=180*yi.degrees/e.getMetersPerUnit();t=Tt(-i,-i,i,i)}return t}function Ac(e,t){const i=[];Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]&&i.push(e+"="+encodeURIComponent(t[e]))}));const n=i.join("&");return e=e.replace(/[?&]$/,""),(e+=e.includes("?")?"&":"?")+n}const qc=/\{z\}/g,Fc=/\{x\}/g,Oc=/\{y\}/g,zc=/\{-y\}/g;function Nc(e,t,i,n,o){return e.replace(qc,t.toString()).replace(Fc,i.toString()).replace(Oc,n.toString()).replace(zc,(function(){if(void 0===o)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(o-n).toString()}))}function Dc(e){const t=[];let i=/\{([a-z])-([a-z])\}/.exec(e);if(i){const n=i[1].charCodeAt(0),o=i[2].charCodeAt(0);let r;for(r=n;r<=o;++r)t.push(e.replace(i[0],String.fromCharCode(r)));return t}if(i=/\{(\d+)-(\d+)\}/.exec(e),i){const n=parseInt(i[2],10);for(let o=parseInt(i[1],10);o<=n;o++)t.push(e.replace(i[0],o.toString()));return t}return t.push(e),t}function Gc(e,t){return function(i,n,o){if(!i)return;let r;const s=i[0];if(t){const e=t.getFullTileRange(s);e&&(r=e.getHeight()-1)}return Nc(e,s,i[1],i[2],r)}}function jc(e,t){const i=e.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Gc(e[o],t);return Bc(n)}function Bc(e){return 1===e.length?e[0]:function(t,i,n){if(!t)return;const o=ht(hc(t),e.length);return e[o](t,i,n)}}class Vc extends Ie{constructor(e){super(),this.projection=fn(e.projection),this.attributions_=$c(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise((function(e,i){t.viewResolver=e,t.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=$c(e),this.changed()}setState(e){this.state_=e,this.changed()}}function $c(e){return e?"function"==typeof e?e:(Array.isArray(e)||(e=[e]),t=>e):null}class Hc extends Vc{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&ia(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tmpSize=[0,0],this.key_=e.key||Pe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,n,o,r){return ke()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Pc(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const n=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),r=ia(n.getTileSize(e),this.tmpSize);return 1==o?r:ta(r,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=void 0!==t?t:this.getProjection(),n=void 0!==t?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=function(e,t,i){const n=t[0],o=e.getTileCoordCenter(t),r=Rc(i);if(!Ct(r,o)){const t=Kt(r),i=Math.ceil((r[0]-o[0])/t);return o[0]+=t*i,e.getTileCoordForCoordAndZ(o,n)}return t}(n,e,i)),function(e,t){const i=e[0],n=e[1],o=e[2];if(t.getMinZoom()>i||i>t.getMaxZoom())return!1;const r=t.getFullTileRange(i);return!r||r.containsXY(n,o)}(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Uc extends be{constructor(e,t){super(e),this.tile=t}}var Wc="tileloadstart",Xc="tileloadend",Kc="tileloaderror";class Yc extends Hc{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Yc.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Pe(t),n=t.getState();let o;1==n?(this.tileLoadingKeys_[i]=!0,o=Wc):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=3==n?Kc:2==n?Xc:void 0),null!=o&&this.dispatchEvent(new Uc(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Dc(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(jc(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class Zc extends Yc{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Qc,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Yu,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!xn(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||xn(t,e)))return this.tileGrid;const i=Pe(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Pc(e)),this.tileGridForProjection[i]}createTile_(e,t,i,n,o,r){const s=[e,t,i],a=this.getTileCoordForTileUrlFunction(s,o),l=a?this.tileUrlFunction(a,n,o):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(J,this.handleTileChange.bind(this)),u}getTile(e,t,i,n,o,r){const s=this.getProjection();if(!s||!o||xn(s,o))return this.getTileInternal(e,t,i,n,s||o);const a=[e,t,i],l=this.getKey(),u=this.getTileGridForProjection(s),c=this.getTileGridForProjection(o),h=this.getTileCoordForTileUrlFunction(a,o),d=new ac(s,u,o,c,a,h,this.getTilePixelRatio(n),this.getGutter(),((e,t,i,n)=>this.getTileInternal(e,t,i,n,s,r)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(e,t,i,n,o,r){const s=this.getKey(),a=cc(this,s,e,t,i);if(r&&r.containsKey(a))return r.get(a);const l=this.createTile_(e,t,i,n,o,s);return r?.set(a,l),l}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=fn(e);if(i){const e=Pe(i);e in this.tileGridForProjection||(this.tileGridForProjection[e]=t)}}}function Qc(e,t){if(Be){const i=e.getCrossOrigin();let n="same-origin",o="same-origin";return"anonymous"===i||""===i?(n="cors",o="omit"):"use-credentials"===i&&(n="cors",o="include"),void fetch(t,{mode:n,credentials:o}).then((e=>{if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.blob()})).then((e=>createImageBitmap(e))).then((t=>{const i=e.getImage();i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0),t.close?.(),i.dispatchEvent(new Event("load"))})).catch((()=>{e.getImage().dispatchEvent(new Event("error"))}))}e.getImage().src=t}class Jc extends Zc{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:Lc({extent:Rc(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}}class eh extends Ie{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new eh(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ce(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=we(e,J,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function(e){if("function"==typeof e)return e;let t;return Array.isArray(e)?t=e:(tt("function"==typeof e.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function th(e,t,i,n,o,r,s){const a=new XMLHttpRequest;a.open("GET","function"==typeof e?e(i,n,o):e,!0),"arraybuffer"==t.getType()&&(a.responseType="arraybuffer"),a.withCredentials=!1,a.onload=function(e){if(!a.status||a.status>=200&&a.status<300){const e=t.getType();try{let n;"text"==e||"json"==e?n=a.responseText:"xml"==e?n=a.responseXML||a.responseText:"arraybuffer"==e&&(n=a.response),n?r(t.readFeatures(n,{extent:i,featureProjection:o}),t.readProjection(n)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function ih(e,t){return function(i,n,o,r,s){th(e,t,i,n,o,((e,t)=>{this.addFeatures(e),void 0!==r&&r(e)}),(()=>{this.changed(),void 0!==s&&s()}))}}function nh(e,t){return[[-1/0,-1/0,1/0,1/0]]}function oh(e,t){return[e]}function rh(e,t,i,n){const o=[];let r=[1/0,1/0,-1/0,-1/0];for(let s=0,a=i.length;s<a;++s){const a=i[s];r=It(e,t,a[0],n),o.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=a[a.length-1]}return o}function sh(e,t,i,n,o,r,s){let a,l;const u=(i-t)/n;if(1===u)a=t;else if(2===u)a=t,l=o;else if(0!==u){let r=e[t],s=e[t+1],u=0;const c=[0];for(let o=t+n;o<i;o+=n){const t=e[o],i=e[o+1];u+=Math.sqrt((t-r)*(t-r)+(i-s)*(i-s)),c.push(u),r=t,s=i}const h=o*u,d=function(e,t,i){let n,o;i=i||ae;let r=0,s=e.length,a=!1;for(;r<s;)n=r+(s-r>>1),o=+i(e[n],t),o<0?r=n+1:(s=n,a=!o);return a?r:~r}(c,h);d<0?(l=(h-c[-d-2])/(c[-d-1]-c[-d-2]),a=t+(-d-2)*n):a=t+d*n}s=s>1?s:2,r=r||new Array(s);for(let c=0;c<s;++c)r[c]=void 0===a?NaN:void 0===l?e[a+c]:dt(e[a+c],e[a+n+c],l);return r}function ah(e,t,i,n,o,r){if(i==t)return null;let s;if(o<e[t+n-1])return r?(s=e.slice(t,t+n),s[n-1]=o,s):null;if(e[i-1]<o)return r?(s=e.slice(i-n,i),s[n-1]=o,s):null;if(o==e[t+n-1])return e.slice(t,t+n);let a=t/n,l=i/n;for(;a<l;){const t=a+l>>1;o<e[(t+1)*n-1]?l=t:a=t+1}const u=e[a*n-1];if(o==u)return e.slice((a-1)*n,(a-1)*n+n);const c=(o-u)/(e[(a+1)*n-1]-u);s=[];for(let h=0;h<n-1;++h)s.push(dt(e[(a-1)*n+h],e[a*n+h],c));return s.push(o),s}class lh extends Yn{constructor(e,t,i){super(),void 0!==i&&void 0===t?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new lh(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const o=this.flatCoordinates,r=e-o[0],s=t-o[1],a=r*r+s*s;if(a<n){if(0===a)for(let e=0;e<this.stride;++e)i[e]=o[e];else{const e=this.getRadius()/Math.sqrt(a);i[0]=o[0]+e*r,i[1]=o[1]+e*s;for(let t=2;t<this.stride;++t)i[t]=o[t]}return i.length=this.stride,a}return n}containsXY(e,t){const i=this.flatCoordinates,n=e-i[0],o=t-i[1];return n*n+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return Tt(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){if(Yt(e,this.getExtent())){const t=this.getCenter();return e[0]<=t[0]&&e[2]>=t[0]||e[1]<=t[1]&&e[3]>=t[1]||zt(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+i;for(let o=1;o<t;++o)n[t+o]=e[o];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let o=so(n,0,e,this.stride);n[o++]=n[0]+t;for(let r=1,s=this.stride;r<s;++r)n[o++]=n[r];n.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),n=this.getStride();this.setCenter(Un(i,0,i.length,n,e,t,i)),this.changed()}}lh.prototype.transform;class uh extends Kn{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ce),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(we(e[t],J,this.changed,this))}clone(){const e=new uh(ch(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<St(this.getExtent(),e,t))return n;const o=this.geometries_;for(let r=0,s=o.length;r<s;++r)n=o[r].closestPointXY(e,t,i,n);return n}containsXY(e,t){const i=this.geometries_;for(let n=0,o=i.length;n<o;++n)if(i[n].containsXY(e,t))return!0;return!1}computeExtent(e){Pt(e);const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)At(e,t[i].getExtent());return e}getGeometries(){return ch(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let n=!1;for(let o=0,r=i.length;o<r;++o){const r=i[o],s=r.getSimplifiedGeometry(e);t.push(s),s!==r&&(n=!0)}return n?new uh(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const i=this.geometries_;for(let n=0,o=i.length;n<o;++n)i[n].rotate(e,t);this.changed()}scale(e,t,i){i||(i=jt(this.getExtent()));const n=this.geometries_;for(let o=0,r=n.length;o<r;++o)n[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(ch(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let n=0,o=i.length;n<o;++n)i[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ch(e){return e.map((e=>e.clone()))}function hh(e,t,i,n){let o=e[t],r=e[t+1],s=0;for(let a=t+n;a<i;a+=n){const t=e[a],i=e[a+1];s+=Math.sqrt((t-o)*(t-o)+(i-r)*(i-r)),o=t,r=i}return s}class dh extends Yn{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){he(this.flatCoordinates,e),this.changed()}clone(){const e=new dh(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<St(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(io(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),oo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,n))}forEachSegment(e){return Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(t=void 0!==t&&t,ah(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return sh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return hh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=fo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new dh(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return ko(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ao(this.flatCoordinates,0,e,this.stride),this.changed()}}class ph extends Yn{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const t=e,i=[],n=[];for(let e=0,r=t.length;e<r;++e)he(i,t[e].getFlatCoordinates()),n.push(i.length);const o=0===t.length?this.getLayout():t[0].getLayout();this.setFlatCoordinates(o,i),this.ends_=n}}appendLineString(e){he(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ph(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<St(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(no(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ro(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,n))}getCoordinateAtM(e,t,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(t=void 0!==t&&t,i=void 0!==i&&i,function(e,t,i,n,o,r,s){if(s)return ah(e,t,i[i.length-1],n,o,r);let a;if(o<e[n-1])return r?(a=e.slice(0,n),a[n-1]=o,a):null;if(e[e.length-1]<o)return r?(a=e.slice(e.length-n),a[n-1]=o,a):null;for(let l=0,u=i.length;l<u;++l){const r=i[l];if(t!=r){if(o<e[t+n-1])return null;if(o<=e[r-1])return ah(e,t,r,n,o,!1);t=r}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return ho(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new dh(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,n=[];let o=0;for(let r=0,s=t.length;r<s;++r){const s=t[r],a=new dh(e.slice(o,s),i);n.push(a),o=s}return n}getLength(){const e=this.ends_;let t=0,i=0;for(let n=0,o=e.length;n<o;++n)i+=hh(this.flatCoordinates,t,e[n],this.stride),t=e[n];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const n=this.ends_,o=this.stride;for(let r=0,s=n.length;r<s;++r){const s=n[r];he(e,sh(t,i,s,o,.5)),i=s}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=go(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new ph(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return function(e,t,i,n,o){for(let r=0,s=i.length;r<s;++r){if(ko(e,t,i[r],n,o))return!0;t=i[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=lo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}class fh extends Yn{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){he(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new fh(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<St(this.getExtent(),e,t))return n;const o=this.flatCoordinates,r=this.stride;for(let s=0,a=o.length;s<a;s+=r){const a=lt(e,t,o[s],o[s+1]);if(a<n){n=a;for(let e=0;e<r;++e)i[e]=o[s+e];i.length=r}}return n}getCoordinates(){return co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new bo(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,n=[];for(let o=0,r=e.length;o<r;o+=i){const r=new bo(e.slice(o,o+i),t);n.push(r)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let n=0,o=t.length;n<o;n+=i)if(Et(e,t[n],t[n+1]))return!0;return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ao(this.flatCoordinates,0,e,this.stride),this.changed()}}class gh extends Yn{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const n=e,o=[],r=[];for(let e=0,t=n.length;e<t;++e){const t=n[e],i=o.length,s=t.getEnds();for(let e=0,n=s.length;e<n;++e)s[e]+=i;he(o,t.getFlatCoordinates()),r.push(s)}t=0===n.length?this.getLayout():n[0].getLayout(),e=o,i=r}void 0!==t&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const i=this.flatCoordinates.length;he(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let e=0,n=t.length;e<n;++e)t[e]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const i=new gh(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,n){return n<St(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(e,t,i,n,o){for(let r=0,s=i.length;r<s;++r){const s=i[r];o=no(e,t,s,n,o),t=s[s.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(e,t,i,n,o,r,s,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=i.length;h<d;++h){const r=i[h];u=ro(e,t,r,n,o,true,s,a,l,u,c),t=r[r.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,e,t,i,n))}containsXY(e,t){return function(e,t,i,n,o,r){if(0===i.length)return!1;for(let s=0,a=i.length;s<a;++s){const a=i[s];if(So(e,t,a,n,o,r))return!0;t=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return function(e,t,i,n){let o=0;for(let r=0,s=i.length;r<s;++r){const s=i[r];o+=eo(e,t,s,n),t=s[s.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),Fo(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,po(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=rh(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Mo(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new fh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Ao(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Fo(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function(e,t,i,n,o,r,s,a){for(let l=0,u=i.length;l<u;++l){const u=i[l],c=[];s=yo(e,t,u,n,o,r,s,c),a.push(c),t=u[u.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new gh(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const i=this.endss_[e-1];t=i[i.length-1]}const i=this.endss_[e].slice(),n=i[i.length-1];if(0!==t)for(let o=0,r=i.length;o<r;++o)i[o]-=t;return new zo(this.flatCoordinates.slice(t,n),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,n=[];let o=0;for(let r=0,s=i.length;r<s;++r){const s=i[r].slice(),a=s[s.length-1];if(0!==o)for(let e=0,t=s.length;e<t;++e)s[e]-=o;const l=new zo(t.slice(o,a),e,s);n.push(l),o=a}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return function(e,t,i,n,o){for(let r=0,s=i.length;r<s;++r){const s=i[r];if(Po(e,t,s,n,o))return!0;t=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=uo(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const e=i[i.length-1];this.flatCoordinates.length=0===e.length?0:e[e.length-1]}this.changed()}}const mh=[1,0,0,1,0,0];class vh{constructor(e,t,i,n,o,r){this.styleFunction,this.extent_,this.id_=r,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?Lt(this.flatCoordinates_):It(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=jt(this.getExtent());this.flatInteriorPoints_=Co(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Oo(this.flatCoordinates_,this.ends_),t=rh(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Mo(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=sh(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let n=0,o=i.length;n<o;++n){const o=i[n],r=sh(e,t,o,2,.5);he(this.flatMidpoints_,r),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const t=(e=fn(e)).getExtent(),i=e.getWorldExtent();if(t&&i){const e=Ht(i)/Ht(t);jn(mh,i[0],i[3],e,-e,0,0,0),Hn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,mh,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new vh(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=me(((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":i.length=fo(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),n=[i.length];break;case"MultiLineString":n=[],i.length=go(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,n);break;case"Polygon":n=[],i.length=yo(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,n)}return n&&(this.simplifiedGeometry_=new vh(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_})),this}}vh.prototype.getFlatCoordinates=vh.prototype.getOrientedFlatCoordinates;class yh{constructor(e){this.rbush_=new ys(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Pe(t)]=i}load(e,t){const i=new Array(t.length);for(let n=0,o=t.length;n<o;n++){const o=e[n],r=t[n],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:r};i[n]=s,this.items_[Pe(r)]=s}this.rbush_.load(i)}remove(e){const t=Pe(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[Pe(t)];Rt([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map((function(e){return e.value}))}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map((function(e){return e.value}))}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let n=0,o=e.length;n<o;n++)if(i=t(e[n]),i)return i;return i}isEmpty(){return _e(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Tt(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}var _h="addfeature",bh="removefeature";class xh extends be{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class wh extends Vc{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.on,this.once,this.un,this.loader_=ge,this.format_=e.format||null,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(tt(this.format_,"`format` must be set when `url` is set"),this.loader_=ih(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:nh;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,n;this.featuresRtree_=t?new yh:null,this.loadedExtentsRtree_=new yh,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?n=e.features:e.features&&(i=e.features,n=i.getArray()),!t&&void 0===i&&(i=new qe(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Pe(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const t=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(t,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new xh(_h,e))}setupChangeEvents_(e,t){t instanceof vh||(this.featureChangeKeys_[e]=[we(t,J,this.handleFeatureChange_,this),we(t,Q,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(void 0!==t.getId()){const e=String(t.getId());if(e in this.idIndex_)if(t instanceof vh){const n=this.idIndex_[e];n instanceof vh?Array.isArray(n)?n.push(t):this.idIndex_[e]=[n,t]:i=!1}else i=!1;else this.idIndex_[e]=t}return i&&(tt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],n=[];for(let o=0,r=e.length;o<r;o++){const t=e[o],n=Pe(t);this.addToIndex_(n,t)&&i.push(t)}for(let o=0,r=i.length;o<r;o++){const e=i[o],r=Pe(e);this.setupChangeEvents_(r,e);const s=e.getGeometry();if(s){const i=s.getExtent();t.push(i),n.push(e)}else this.nullGeometryFeatures_[r]=e}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(_h))for(let o=0,r=i.length;o<r;o++)this.dispatchEvent(new xh(_h,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(_h,(function(i){t||(t=!0,e.push(i.feature),t=!1)})),this.addEventListener(bh,(function(i){t||(t=!0,e.remove(i.feature),t=!1)})),e.addEventListener(Y,(e=>{t||(t=!0,this.addFeature(e.element),t=!1)})),e.addEventListener(Z,(e=>{t||(t=!0,this.removeFeature(e.element),t=!1)})),this.featuresCollection_=e}clear(e){if(e){for(const e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(Ce);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach((e=>{this.removeFeatureInternal(e)}));for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new xh("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,(function(i){const n=i.getGeometry();if(n instanceof vh||n.intersectsCoordinate(e))return t(i)}))}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,(function(i){const n=i.getGeometry();if(n instanceof vh||n.intersectsExtent(e)){const e=t(i);if(e)return e}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),_e(this.nullGeometryFeatures_)||he(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,(function(e){t.push(e)})),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=ei(e,t);return[].concat(...i.map((e=>this.featuresRtree_.getInExtent(e))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],n=e[1];let o=null;const r=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0];return t=t||pe,this.featuresRtree_.forEachInExtent(a,(function(e){if(t(e)){const t=e.getGeometry(),l=s;if(s=t instanceof vh?0:t.closestPointXY(i,n,r,s),s<l){o=e;const t=Math.sqrt(s);a[0]=i-t,a[1]=n-t,a[2]=i+t,a[3]=n+t}}})),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Pe(t),n=t.getGeometry();if(n){const e=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(e,t)):this.featuresRtree_&&this.featuresRtree_.update(e,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const o=t.getId();if(void 0!==o){const e=o.toString();this.idIndex_[e]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[e]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new xh("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:Pe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_e(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const n=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let r=0,s=o.length;r<s;++r){const e=o[r];n.forEachInExtent(e,(function(t){return Mt(t.extent,e)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new xh("featuresloadstart")),this.loader_.call(this,e,t,i,(e=>{--this.loadingExtentsCount_,this.dispatchEvent(new xh("featuresloadend",void 0,e))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new xh("featuresloaderror"))})),n.insert(e,{extent:e.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,(function(t){if(Rt(t.extent,e))return t}));i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,n=e.length;i<n;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Pe(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Ce),delete this.featureChangeKeys_[t];const i=e.getId();if(void 0!==i){const t=i.toString(),n=this.idIndex_[t];n===e?delete this.idIndex_[t]:Array.isArray(n)&&(n.splice(n.indexOf(e),1),1===n.length&&(this.idIndex_[t]=n[0]))}return delete this.uidIndex_[t],this.hasListener(bh)&&this.dispatchEvent(new xh(bh,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){tt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(ih(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}function Sh(e,t,i,n,o,r,s){const a=1/(e-t),l=1/(i-n),u=1/(o-r);return(s=s??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*u,s[11]=0,s[12]=(e+t)*a,s[13]=(n+i)*l,s[14]=(r+o)*u,s[15]=1,s}function Ch(e,t,i,n,o){return(o=o??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=e[0]*t,o[1]=e[1]*t,o[2]=e[2]*t,o[3]=e[3]*t,o[4]=e[4]*i,o[5]=e[5]*i,o[6]=e[6]*i,o[7]=e[7]*i,o[8]=e[8]*n,o[9]=e[9]*n,o[10]=e[10]*n,o[11]=e[11]*n,o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o}class Mh{constructor(e){this.gl_=e,this.program_=kh(e,"\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (\n      v_texcoord.x < 0.0 ||\n      v_texcoord.y < 0.0 ||\n      v_texcoord.x > 1.0 ||\n      v_texcoord.y > 1.0\n    ) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n","\n  attribute vec4 a_position;\n  attribute vec4 a_texcoord;\n\n  uniform mat4 u_matrix;\n  uniform mat4 u_textureMatrix;\n\n  varying vec2 v_texcoord;\n\n  void main() {\n    gl_Position = u_matrix * a_position;\n    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;\n    v_texcoord = texcoord;\n  }\n"),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,i,n,o,r,s,a,l,u,c,h,d){const p=this.gl_;void 0===a&&(a=n),void 0===l&&(l=o),void 0===r&&(r=t),void 0===s&&(s=i),void 0===u&&(u=r),void 0===c&&(c=s),void 0===h&&(h=p.canvas.width),void 0===d&&(d=p.canvas.height),p.bindTexture(p.TEXTURE_2D,e),p.useProgram(this.program_),p.bindBuffer(p.ARRAY_BUFFER,this.positionBuffer),p.enableVertexAttribArray(this.positionLocation),p.vertexAttribPointer(this.positionLocation,2,p.FLOAT,!1,0,0),p.bindBuffer(p.ARRAY_BUFFER,this.texcoordBuffer),p.enableVertexAttribArray(this.texcoordLocation),p.vertexAttribPointer(this.texcoordLocation,2,p.FLOAT,!1,0,0);let f=Sh(0,h,0,d,-1,1);f=function(e,t,i,n,o){let r,s,a,l,u,c,h,d,p,f,g,m;return e===(o=o??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])?(o[12]=e[0]*t+e[4]*i+0*e[8]+e[12],o[13]=e[1]*t+e[5]*i+0*e[9]+e[13],o[14]=e[2]*t+e[6]*i+0*e[10]+e[14],o[15]=e[3]*t+e[7]*i+0*e[11]+e[15]):(r=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7],p=e[8],f=e[9],g=e[10],m=e[11],o[0]=r,o[1]=s,o[2]=a,o[3]=l,o[4]=u,o[5]=c,o[6]=h,o[7]=d,o[8]=p,o[9]=f,o[10]=g,o[11]=m,o[12]=r*t+u*i+0*p+e[12],o[13]=s*t+c*i+0*f+e[13],o[14]=a*t+h*i+0*g+e[14],o[15]=l*t+d*i+0*m+e[15]),o}(f,a,l),f=Ch(f,u,c,1),p.uniformMatrix4fv(this.matrixLocation,!1,f);let g=(m=n/t,v=o/i,(y=y??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=m,y[13]=v,y[14]=0,y[15]=1,y);var m,v,y;g=Ch(g,r/t,s/i,1),p.uniformMatrix4fv(this.textureMatrixLocation,!1,g),p.uniform1i(this.textureLocation,0),p.drawArrays(p.TRIANGLES,0,this.positions.length/2)}}function Eh(e,t,i){const n=e.createShader(t);if(null===n)throw new Error("Shader compilation failed");if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(n);throw null===t?new Error("Shader info log creation failed"):new Error(t)}return n}function kh(e,t,i){const n=e.createProgram(),o=Eh(e,e.VERTEX_SHADER,i),r=Eh(e,e.FRAGMENT_SHADER,t);if(null===n)throw new Error("Program creation failed");if(e.attachShader(n,o),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw null===e.getProgramInfoLog(n)?new Error("Program info log creation failed"):new Error;return n}const Th=[];function Ph(e,t,i,n,o,r,s,a,l,u,c,h,d,p){const f=Math.round(n*t),g=Math.round(n*i);let m,v;if(e.canvas.width=f,e.canvas.height=g,v=e.createTexture(),e.bindTexture(e.TEXTURE_2D,v),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),d?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,f,g,0,e.RGBA,c,null),m=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,m),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,v,0),null===m)throw new Error("Could not create framebuffer");if(null===v)throw new Error("Could not create texture");if(0===l.length)return{width:f,height:g,framebuffer:m,texture:v};const y=[1/0,1/0,-1/0,-1/0];let _,b,x;l.forEach((function(e,t,i){At(y,e.extent)}));const w=1/o;{if(_=e.createTexture(),null===v)throw new Error("Could not create texture");b=Math.round(Kt(y)*w),x=Math.round(Ht(y)*w);const t=e.getParameter(e.MAX_TEXTURE_SIZE),i=Math.max(b,x),n=i>t?t/i:1,o=Math.round(b*n),r=Math.round(x*n);e.bindTexture(e.TEXTURE_2D,_),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),d?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,o,r,0,e.RGBA,c,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,_,0);const a=new Mh(e);l.forEach((function(t,i,l){const c=(t.extent[0]-y[0])*w*n,h=-(t.extent[3]-y[3])*w*n,p=Kt(t.extent)*w*n,f=Ht(t.extent)*w*n;if(e.bindFramebuffer(e.FRAMEBUFFER,s),e.viewport(0,0,o,r),t.clipExtent){const i=(t.clipExtent[0]-y[0])*w*n,o=-(t.clipExtent[3]-y[3])*w*n,r=Kt(t.clipExtent)*w*n,s=Ht(t.clipExtent)*w*n;e.enable(e.SCISSOR_TEST),e.scissor(d?i:Math.round(i),d?o:Math.round(o),d?r:Math.round(i+r)-Math.round(i),d?s:Math.round(o+s)-Math.round(o))}a.drawImage(t.texture,t.width,t.height,u,u,t.width-2*u,t.height-2*u,d?c:Math.round(c),d?h:Math.round(h),d?p:Math.round(c+p)-Math.round(c),d?f:Math.round(h+f)-Math.round(h),o,r),e.disable(e.SCISSOR_TEST)})),e.deleteFramebuffer(s)}const S=Wt(s),C=Wt(y),M=e=>{const t=(e[0][0]-S[0])/r*n,i=-(e[0][1]-S[1])/r*n;return{u1:(e[1][0]-S[0])/r*n,v1:-(e[1][1]-S[1])/r*n,u0:t,v0:i,u2:(e[2][0]-S[0])/r*n,v2:-(e[2][1]-S[1])/r*n}};e.bindFramebuffer(e.FRAMEBUFFER,m),e.viewport(0,0,f,g);{const t=[],i=[],n=kh(e,"\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n","\n  attribute vec4 a_position;\n  attribute vec2 a_texcoord;\n\n  varying vec2 v_texcoord;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n     v_texcoord = a_texcoord;\n  }\n");e.useProgram(n);const r=e.getUniformLocation(n,"u_texture");e.bindTexture(e.TEXTURE_2D,_),e.uniform1i(r,0),a.getTriangles().forEach((function(e,n,r){const s=e.source,a=e.target,{u1:l,v1:u,u0:c,v0:h,u2:d,v2:p}=M(a),f=(s[0][0]-C[0])/o/b,g=-(s[0][1]-C[1])/o/x,m=(s[1][0]-C[0])/o/b,v=-(s[1][1]-C[1])/o/x,y=(s[2][0]-C[0])/o/b,_=-(s[2][1]-C[1])/o/x;t.push(l,u,c,h,d,p),i.push(m,v,f,g,y,_)}));const s=Sh(0,f,g,0,-1,1),l=e.getUniformLocation(n,"u_matrix");e.uniformMatrix4fv(l,!1,s);const u=e.getAttribLocation(n,"a_position"),c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(u);const h=e.getAttribLocation(n,"a_texcoord"),d=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h),e.drawArrays(e.TRIANGLES,0,t.length/2)}if(h){const t=kh(e,"\n  precision mediump float;\n\n  uniform vec4 u_val;\n  void main() {\n     gl_FragColor = u_val;\n  }\n","\n  attribute vec4 a_position;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n  }\n");e.useProgram(t);const i=Sh(0,f,g,0,-1,1),n=e.getUniformLocation(t,"u_matrix");e.uniformMatrix4fv(n,!1,i);const o=Array.isArray(h)?h:[0,0,0,255],r=e.getUniformLocation(t,"u_val");e.uniform4fv(r,o);const s=e.getAttribLocation(t,"a_position"),l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(s);const u=a.getTriangles().reduce((function(e,t){const i=t.target,{u1:n,v1:o,u0:r,v0:s,u2:a,v2:l}=M(i);return e.concat([n,o,r,s,r,s,a,l,a,l,n,o])}),[]);e.bufferData(e.ARRAY_BUFFER,new Float32Array(u),e.STATIC_DRAW),e.drawArrays(e.LINES,0,u.length/2)}return{width:f,height:g,framebuffer:m,texture:v}}class Lh extends Ku{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=void 0!==e.renderEdges&&e.renderEdges,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,i=t.getExtent(),n=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?n?Ut(i,n):i:n;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),r=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const a=r?Ut(o,r):o;if(0===Nt(a))return void(this.state=4);i&&(s=s?Ut(s,i):i);const l=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),u=e.targetProj,c=oc(t,u,a,l);if(!isFinite(c)||c<=0)return void(this.state=4);const h=void 0!==e.errorThreshold?e.errorThreshold:.5;if(this.triangulation_=new sc(t,u,a,s,c*h,l,e.transformMatrix),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=this.sourceTileGrid_.getZForResolution(c);let d=this.triangulation_.calculateSourceExtent();if(s&&(t.canWrapX()?(d[1]=st(d[1],s[1],s[3]),d[3]=st(d[3],s[1],s[3])):d=Ut(d,s)),Nt(d)){let n=0,o=0;t.canWrapX()&&(n=Kt(i),o=Math.floor((d[0]-i[0])/n)),ei(d.slice(),t,!0).forEach((t=>{const i=this.sourceTileGrid_.getTileRangeForExtentAndZ(t,this.sourceZ_),r=e.getTileFunction;for(let e=i.minX;e<=i.maxX;e++)for(let t=i.minY;t<=i.maxY;t++){const i=r(this.sourceZ_,e,t,this.pixelRatio_);if(i){const e=o*n;this.sourceTiles_.push({tile:i,offset:e})}}++o})),0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach((i=>{const n=i.tile;if(!n||2!==n.getState())return;const o=n.getSize(),r=this.gutter_;let s;const a=(l=n.getData())instanceof Uint8Array||l instanceof Uint8ClampedArray||l instanceof Float32Array||l instanceof DataView?l:null;var l;a?s=a:(t=!0,s=function(e){Wu||(Wu=tr(e.width,e.height,void 0,{willReadFrequently:!0}));const t=Wu.canvas,i=e.width;t.width!==i&&(t.width=i);const n=e.height;return t.height!==n&&(t.height=n),Wu.clearRect(0,0,i,n),Wu.drawImage(e,0,0),Wu.getImageData(0,0,i,n).data}(Hu(n.getData())));const u=[o[0]+2*r,o[1]+2*r],c=s instanceof Float32Array,h=u[0]*u[1],d=c?Float32Array:Uint8ClampedArray,p=new d(s.buffer),f=d.BYTES_PER_ELEMENT,g=f*p.length/h,m=p.byteLength/u[1],v=Math.floor(m/f/u[0]),y=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);y[0]+=i.offset,y[2]+=i.offset;const _=this.clipExtent_?.slice();_&&(_[0]+=i.offset,_[2]+=i.offset),e.push({extent:y,clipExtent:_,data:p,dataType:d,bytesPerPixel:g,pixelSize:u,bandCount:v})})),this.sourceTiles_.length=0,0===e.length)return this.state=3,void this.changed();const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),o="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],s=Math.round(o*this.pixelRatio_),a=Math.round(r*this.pixelRatio_),l=this.targetTileGrid_.getResolution(i),u=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),h=e[0].bandCount,d=new e[0].dataType(h*s*a),p=function(e,t,i){let n;return n=i&&i.length?i.shift():Be?new OffscreenCanvas(e||300,t||300):document.createElement("canvas"),e&&(n.width=e),t&&(n.height=t),n.getContext("webgl",{premultipliedAlpha:!1,antialias:!1})}(s,a,Th);let f;const g=p.RGBA;let m;e[0].dataType==Float32Array?(m=p.FLOAT,p.getExtension("WEBGL_color_buffer_float"),p.getExtension("OES_texture_float"),p.getExtension("EXT_float_blend"),f=null!==p.getExtension("OES_texture_float_linear")&&this.interpolate):(m=p.UNSIGNED_BYTE,f=this.interpolate);for(let v=Math.ceil(h/4)-1;v>=0;--v){const t=[];for(let o=0,r=e.length;o<r;++o){const i=e[o],n=i.pixelSize,r=n[0],s=n[1],a=new i.dataType(4*r*s),l=i.data;let u=4*v;for(let e=0,t=a.length;e<t;e+=4)a[e]=l[u],a[e+1]=l[u+1],a[e+2]=l[u+2],a[e+3]=l[u+3],u+=h;const c=p.createTexture();p.bindTexture(p.TEXTURE_2D,c),f?(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR)):(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST)),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texImage2D(p.TEXTURE_2D,0,g,r,s,0,g,m,a),t.push({extent:i.extent,clipExtent:i.clipExtent,texture:c,width:r,height:s})}const{framebuffer:i,width:n,height:s}=Ph(p,o,r,this.pixelRatio_,u,l,c,this.triangulation_,t,this.gutter_,m,this.renderEdges_,f),a=n,y=4*s,_=new e[0].dataType(a*y);p.bindFramebuffer(p.FRAMEBUFFER,i),p.readPixels(0,0,n,s,p.RGBA,m,_);let b=4*v;for(let e=0,o=_.length;e<o;e+=4){const t=(a-1-(e/y|0))*y+e%y;d[b]=_[t],d[b+1]=_[t+1],d[b+2]=_[t+2],d[b+3]=_[t+3],b+=h}}if(function(e){const t=e.canvas;t.width=1,t.height=1,e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}(p),Th.push(p.canvas),t){const e=tr(o,r),t=new ImageData(d,o);e.putImageData(t,0,0),this.reprojData_=e.canvas}else this.reprojData_=d;this.reprojSize_=[s,a],this.state=2,this.changed()}load(){if(0!==this.state&&3!==this.state)return;this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((({tile:t})=>{const i=t.getState();if(0!==i&&1!==i)return;e++;const n=we(t,J,(()=>{const i=t.getState();(2==i||3==i||4==i)&&(Ce(n),e--,0===e&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(n)})),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function({tile:e}){0==e.getState()&&e.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ce),this.sourcesListenerKeys_=null}}class Ih extends Hc{constructor(e){const t=void 0===e.projection?"EPSG:3857":e.projection;let i=e.tileGrid;void 0===i&&t&&(i=Lc({extent:Rc(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:i,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.tileSize_=e.tileSize?ia(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===e.bandCount?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?ia(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return t&&!xn(t,e)||this.transformMatrix?0:this.gutter_}setLoader(e){this.loader_=e}getReprojTile_(e,t,i,n,o,r){const s=this.tileGrid||this.getTileGridForProjection(o||n),a=Math.max.apply(null,s.getResolutions().map(((e,t)=>{const i=ia(s.getTileSize(t)),n=this.getTileSize(t);return Math.max(n[0]/i[0],n[1]/i[1])}))),l=this.getTileGridForProjection(n),u=[e,t,i],c=this.getTileCoordForTileUrlFunction(u,n),h=Object.assign({sourceProj:o||n,sourceTileGrid:s,targetProj:n,targetTileGrid:l,tileCoord:u,wrappedTileCoord:c,pixelRatio:a,gutter:this.gutter_,getTileFunction:(e,t,i,n)=>this.getTile(e,t,i,n,void 0,r),transformMatrix:this.transformMatrix},this.tileOptions),d=new Lh(h);return d.key=this.getKey(),d}getTile(e,t,i,n,o,r){const s=this.getProjection();if(o&&(s&&!xn(s,o)||this.transformMatrix))return this.getReprojTile_(e,t,i,o,s,r);const a=this.getTileSize(e),l=this.loader_,u=new AbortController,c={signal:u.signal,crossOrigin:this.crossOrigin_},h=this.getTileCoordForTileUrlFunction([e,t,i]);if(!h)return null;const d=cc(this,this.getKey(),e,t,i);if(r&&r.containsKey(d))return r.get(d);const p=h[0],f=h[1],g=h[2],m=this.getTileGrid()?.getFullTileRange(p);m&&(c.maxY=m.getHeight()-1);const v=Object.assign({tileCoord:[e,t,i],loader:function(){return ve((function(){return l(p,f,g,c)}))},size:a,controller:u},this.tileOptions),y=new Ku(v);return y.key=this.getKey(),y.addEventListener(J,this.handleTileChange_),r?.set(d,y),y}handleTileChange_(e){const t=e.target,i=Pe(t),n=t.getState();let o;1==n?(this.tileLoadingKeys_[i]=!0,o=Wc):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=3==n?Kc:2==n?Xc:void 0),o&&this.dispatchEvent(new Uc(o,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||xn(t,e))&&!this.transformMatrix)return this.tileGrid;const i=Pe(e);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=Pc(e)),this.tileGridForProjection_[i]}setTileGridForProjection(e,t){const i=fn(e);if(i){const e=Pe(i);e in this.tileGridForProjection_||(this.tileGridForProjection_[e]=t)}}}function Rh(e){return Array.isArray(e)?Math.min(...e):e}class Ah extends kl{constructor(e,t,i,n,o,r,s){let a=e.getExtent();a&&e.canWrapX()&&(a=a.slice(),a[0]=-1/0,a[2]=1/0);let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);const u=l?Ut(i,l):i,c=nc(e,t,jt(u),n),h=new sc(e,t,u,a,.5*c,n),d=h.calculateSourceExtent(),p=Zt(d)?null:r(d,c,o),f=p?0:4,g=p?p.getPixelRatio():1;super(i,n,g,f),this.targetProj_=t,this.maxSourceExtent_=a,this.triangulation_=h,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=p,this.sourcePixelRatio_=g,this.interpolate_=s,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){1==this.state&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(2==e){const e=Kt(this.targetExtent_)/this.targetResolution_,t=Ht(this.targetExtent_)/this.targetResolution_;this.canvas_=rc(e,t,this.sourcePixelRatio_,Rh(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(0==this.state){this.state=1,this.changed();const e=this.sourceImage_.getState();2==e||3==e?this.reproject_():(this.sourceListenerKey_=we(this.sourceImage_,J,(e=>{const t=this.sourceImage_.getState();(2==t||3==t)&&(this.unlistenSource_(),this.reproject_())})),this.sourceImage_.load())}}unlistenSource_(){Ce(this.sourceListenerKey_),this.sourceListenerKey_=null}}class qh extends be{constructor(e,t){super(e),this.image=t}}class Fh extends Vc{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!e.loader&&0===e.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();return t&&(e=t[ue(t,e,0)]),e}getImage(e,t,i,n){const o=this.getProjection();if(!o||!n||xn(o,n))return o&&(n=o),this.getImageInternal(e,t,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&xn(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&Rt(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Ah(o,n,e,t,i,((e,t,i)=>this.getImageInternal(e,t,i,o)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,n){if(this.loader){const o=function(e,t,i){const n=t/i,o=jt(e),r=mt(Kt(e)/n,4),s=mt(Ht(e)/n,4);return Vt(o,n,0,[r+2*mt(0*r/2,4),s+2*mt(0*s/2,4)])}(e,t,i),r=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&Mt(this.wantedExtent_,o)||Mt(this.image.getExtent(),o))&&(this.wantedResolution_&&Rh(this.wantedResolution_)===r||Rh(this.image.getResolution())===r)))return this.image;this.wantedProjection_=n,this.wantedExtent_=o,this.wantedResolution_=r,this.image=new kl(o,r,i,this.loader),this.image.addEventListener(J,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case 1:this.loading=!0,i="imageloadstart";break;case 2:this.loading=!1,i="imageloadend";break;case 3:this.loading=!1,i="imageloaderror";break;default:return}this.hasListener(i)&&this.dispatchEvent(new qh(i,t))}}class Oh extends kl{constructor(e,t,i,n,o){super(e,t,i,void 0!==o?0:2),this.loader_=void 0!==o?o:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=3):this.state=2,this.changed()}load(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const zh=new Error("Image failed to load");function Nh(e,t,i,n,o){return new Promise(((r,s)=>{const a=new Image;a.crossOrigin=o.crossOrigin??null,a.addEventListener("load",(()=>r(a))),a.addEventListener("error",(()=>s(zh))),a.src=Nc(e,t,i,n,o.maxY)}))}function Dh(e){return function(t,i,n,o){var r;return Nh((r=e)[ht(dc(t,i,n),r.length)],t,i,n,o)}}function Gh(e){let t;if(Array.isArray(e))t=Dh(e);else if("string"==typeof e)t=Dh(Dc(e));else{if("function"!=typeof e)throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");t=function(e){return function(t,i,n,o){return Nh(e(t,i,n,o),t,i,n,o)}}(e)}return t}let jh=0;function Bh(e){return Array.isArray(e)?e.join("\n"):"string"==typeof e?e:(++jh,"url-function-key-"+jh)}class Vh extends Ih{constructor(e){let t,i=(e=e||{}).loader;e.url&&(i=Gh(e.url),t=Bh(e.url));const n=i?e.state:"loading",o=void 0===e.wrapX||e.wrapX;super({loader:i,key:t,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize,gutter:e.gutter,maxResolution:e.maxResolution,projection:e.projection,tileGrid:e.tileGrid,state:n,wrapX:o,transition:e.transition,interpolate:!1!==e.interpolate,crossOrigin:e.crossOrigin,zDirection:e.zDirection})}setUrl(e){const t=Gh(e);this.setLoader(t),this.setKey(Bh(e)),"ready"!==this.getState()&&this.setState("ready")}}const $h=[];class Hh extends $u{constructor(e,t,i,n,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=tr(1,1,$h)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Pe(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(or(this.context_),$h.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Uh=class extends $u{constructor(e,t,i,n,o,r){super(e,t,r),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(3)}setFeatures(e){this.features_=e,this.setState(2)}setLoader(e){this.loader_=e}};class Wh extends Yc{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||Rc(t),n=e.tileGrid||Lc({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:n,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Xh,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=null==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:Uh,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(0===i.getState()){i.setState(1);const n=i.wrappedTileCoord,o=this.getTileGridForProjection(t);let r=o.getTileCoordExtent(n);const s=n[0],a=o.getResolution(s);xt(r,-a,r);const l=this.projection;t&&this.projection&&!xn(t,l)&&(r=En(r,t,l));const u=this.tileGrid,c=u.getExtent();c&&Ut(r,c,r);let h=a;t&&l&&!xn(t,l)&&(h=a/l.getMetersPerUnit()/t.getMetersPerUnit());const d=u.getZForResolution(h,this.zDirection);u.forEachTileCoord(r,d,(n=>{const o=this.tileUrlFunction(n,e,t);this.sourceTiles_[o]||(this.sourceTiles_[o]=new this.tileClass(n,o?0:4,o,this.format_,this.tileLoadFunction));const r=this.sourceTiles_[o];i.sourceTiles.push(r),this.tileKeysBySourceTileUrl_[o]||(this.tileKeysBySourceTileUrl_[o]=[]),this.tileKeysBySourceTileUrl_[o].push(i.getKey());const s=r.getState();if(s<2){const e=t=>{this.handleTileChange(t);const n=r.getState();if(2===n||3===n){const t=r.getKey();t in i.errorTileKeys?2===r.getState()&&delete i.errorTileKeys[t]:i.loadingSourceTiles--,3===n?i.errorTileKeys[t]=!0:r.removeEventListener(J,e),0===i.loadingSourceTiles&&i.setState(_e(i.errorTileKeys)?2:3)}};r.addEventListener(J,e),i.loadingSourceTiles++}0===s&&(r.extent=u.getTileCoordExtent(n),r.projection=this.projection,r.resolution=u.getResolution(n[0]),r.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((e=>3===e.getState()))?3:2)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let n=0,o=i.length;n<o;++n){const e=i[n].getTileUrl();if(!this.tileKeysBySourceTileUrl_[e])return;const o=this.tileKeysBySourceTileUrl_[e].indexOf(t);-1!==o&&(this.tileKeysBySourceTileUrl_[e].splice(o,1),0===this.tileKeysBySourceTileUrl_[e].length&&(delete this.tileKeysBySourceTileUrl_[e],delete this.sourceTiles_[e]))}}getTile(e,t,i,n,o){const r=[e,t,i];let s=this.getTileCoordForTileUrlFunction(r,o);const a=this.getTileGrid().getExtent(),l=this.projection,u=this.getTileGridForProjection(o);if(s&&a){const t=u.getTileCoordExtent(s);xt(t,-u.getResolution(e),t),Yt(a,o&&l&&!xn(o,l)?En(t,o,l):t)||(s=null)}let c=!0;if(null!==s){const t=this.tileGrid,i=u.getResolution(e);let r=i;o&&l&&!xn(o,l)&&(r=i/l.getMetersPerUnit()/o.getMetersPerUnit());const a=t.getZForResolution(r,1),h=u.getTileCoordExtent(s);xt(h,-i,h),t.forEachTileCoord(o&&l&&!xn(o,l)?En(h,o,l):h,a,(e=>{c=c&&!this.tileUrlFunction(e,n,l)}))}const h=new Hh(r,c?4:0,s,this.getSourceTiles.bind(this,n,o),this.removeSourceTiles.bind(this));return h.key=this.getKey(),h}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const n=this.projection;if(null!==n&&!xn(n,e))return Pc(e);const o=this.tileGrid,r=o.getResolutions().slice(),s=r.map((function(e,t){return o.getOrigin(t)})),a=r.map((function(e,t){return o.getTileSize(t)})),l=43;for(let e=r.length;e<l;++e)r.push(r[e-1]/2),s.push(s[e-1]),a.push(a[e-1]);i=new kc({extent:o.getExtent(),origins:s,resolutions:r,tileSizes:a}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const n=ia(this.getTileGridForProjection(i).getTileSize(e),this.tmpSize);return[Math.round(n[0]*t),Math.round(n[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Xh(e,t){e.setLoader((function(i,n,o){th(t,e.getFormat(),i,n,o,e.onLoad.bind(e),e.onError.bind(e))}))}class Kh extends Jc{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const i=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",n=void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(t,i)=>{const n=t.getImage();!Be&&n instanceof HTMLImageElement&&(n.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||Qc)(t,i)},transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}class Yh extends vc{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,n=e.viewState,o=n.resolution,r=this.getLayer().getSource(),s=e.viewHints;let a=e.extent;if(void 0!==t.extent&&(a=Ut(a,Ln(t.extent,n.projection))),!s[0]&&!s[1]&&!Zt(a))if(r){const e=n.projection,t=r.getImage(a,o,i,e);t&&(this.loadImage(t)?this.image=t:4===t.getState()&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=Dn(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!Ct(o,n))return null;const r=this.image.getExtent(),s=this.image.getImage(),a=Kt(r),l=Math.floor(s.width*((n[0]-r[0])/a));if(l<0||l>=s.width)return null;const u=Ht(r),c=Math.floor(s.height*((r[3]-n[1])/u));return c<0||c>=s.height?null:this.getImageData(s,l,c)}renderFrame(e,t){const i=this.image,n=i.getExtent(),o=i.getResolution(),[r,s]=Array.isArray(o)?o:[o,o],a=i.getPixelRatio(),l=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,c=e.viewState,h=c.center,d=c.resolution,p=u*r/(d*a),f=u*s/(d*a);this.prepareContainer(e,t);const g=this.context.canvas.width,m=this.context.canvas.height,v=this.getRenderContext(e);let y=!1,_=!0;if(l.extent){const t=Ln(l.extent,c.projection);_=Yt(t,e.extent),y=_&&!Mt(t,e.extent),y&&this.clipUnrotated(v,e,t)}const b=i.getImage(),x=jn(this.tempTransform,g/2,m/2,p,f,0,a*(n[0]-h[0])/r,a*(h[1]-n[3])/s);this.renderedResolution=s*u/a;const w=b.width*x[0],S=b.height*x[3];if(this.getLayer().getSource().getInterpolate()||(v.imageSmoothingEnabled=!1),this.preRender(v,e),_&&w>=.5&&S>=.5){const e=x[4],t=x[5],i=l.opacity;1!==i&&(v.save(),v.globalAlpha=i),v.drawImage(b,0,0,+b.width,+b.height,e,t,w,S),1!==i&&v.restore()}return this.postRender(this.context,e),y&&v.restore(),v.imageSmoothingEnabled=!0,this.container}}class Zh extends ps{constructor(e){super(e=e||{})}}class Qh extends Zh{constructor(e){super(e)}createRenderer(){return new Yh(this)}getData(e){return super.getData(e)}}function Jh(e){return function(t){const i=t.buffers,n=t.meta,o=t.imageOps,r=t.width,s=t.height,a=i.length,l=i[0].byteLength;if(o){const t=new Array(a);for(let e=0;e<a;++e)t[e]=new ImageData(new Uint8ClampedArray(i[e]),r,s);return e(t,n).data.buffer}const u=new Uint8ClampedArray(l),c=new Array(a),h=new Array(a);for(let e=0;e<a;++e)c[e]=new Uint8ClampedArray(i[e]),h[e]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let e=0;e<a;++e){const t=c[e];h[e][0]=t[d],h[e][1]=t[d+1],h[e][2]=t[d+2],h[e][3]=t[d+3]}const t=e(h,n);u[d]=t[0],u[d+1]=t[1],u[d+2]=t[2],u[d+3]=t[3]}return u.buffer}}function ed(e,t){const i=Object.keys(e.lib||{}).map((function(t){return"const "+t+" = "+e.lib[t].toString()+";"})).concat(["const __minion__ = ("+Jh.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),o=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+n.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return o.addEventListener("message",t),o}class td extends se{constructor(e){let t;super(),this.imageOps_=!!e.imageOps,t=0===e.threads?0:this.imageOps_?1:e.threads||1;const i=new Array(t);if(t)for(let n=0;n<t;++n)i[n]=ed(e,this.onWorkerMessage_.bind(this,n));else i[0]=function(e,t){const i=Jh(e.operation);let n=!1;return{postMessage:function(e){setTimeout((function(){n||t({data:{buffer:i(e),meta:e.meta}})}),0)},terminate:function(){n=!0}}}(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||0===this.queue_.length)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,n=e.inputs.map((function(e){return e.data.buffer})),o=this.workers_.length;if(this.running_=o,1===o)return void this.workers_[0].postMessage({buffers:n,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},n);const r=e.inputs[0].data.length,s=4*Math.ceil(r/4/o);for(let a=0;a<o;++a){const o=a*s,r=[];for(let e=0,t=n.length;e<t;++e)r.push(n[e].slice(o,o+s));this.workers_[a].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,0===this.running_&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,n;if(1===t)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),n=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),n=new Array(t);const r=4*Math.ceil(o/4/t);for(let e=0;e<t;++e){const t=this.dataLookup_[e].buffer,o=e*r;i.set(new Uint8ClampedArray(t),o),n[e]=this.dataLookup_[e].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),n),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}class id extends be{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class nd extends Fh{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=void 0!==e.operationType?e.operationType:"pixel",this.threads_=void 0!==e.threads?e.threads:1,this.layers_=function(e){const t=e.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=sd(e[n]);return i}(e.sources);const t=this.changed.bind(this);for(let n=0,o=this.layers_.length;n<o;++n)this.layers_[n].addEventListener(J,t);var i;this.useResolutions_=null!==e.resolutions,this.tileQueue_=new ot((function(){return 1}),this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(i=this.layers_,i.map((function(e){return e.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Pe(this),renderTargets:{}},this.setAttributions((function(t){const i=[];for(let n=0,o=e.sources.length;n<o;++n){const o=e.sources[n],r=o instanceof Vc?o:o.getSource();if(!r)continue;const s=r.getAttributions()?.(t);"string"==typeof s?i.push(s):void 0!==s&&i.push(...s)}return i})),void 0!==e.operation&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new td({operation:e,imageOps:"image"===this.operationType_,queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);const o=jt(e);n.size[0]=Math.ceil(Kt(e)/t),n.size[1]=Math.ceil(Ht(e)/t),n.extent=[o[0]-n.size[0]*t/2,o[1]-n.size[1]*t/2,o[0]+n.size[0]*t/2,o[1]+n.size[1]*t/2],n.time=Date.now();const r=n.viewState;return r.center=o,r.projection=i,r.resolution=t,n}allSourcesReady_(){let e,t=!0;for(let i=0,n=this.layers_.length;i<n;++i)if(e=this.layers_[i].getSource(),!e||"ready"!==e.getState()){t=!1;break}return t}getImage(e,t,i,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const e=this.renderedImageCanvas_.getResolution(),i=this.renderedImageCanvas_.getExtent();(t!==e||!Rt(o.extent,i))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const t=rd(this.layers_[o],e);if(!t)return;i[o]=t}const n={};this.dispatchEvent(new id("beforeoperations",e,n)),this.processor_.process(i,n,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,n){if(t||!i)return;const o=e.extent,r=e.viewState.resolution;if(r!==this.requestedFrameState_.viewState.resolution||!Rt(o,this.requestedFrameState_.extent))return;let s;this.renderedImageCanvas_?s=this.renderedImageCanvas_.getImage().getContext("2d"):(s=tr(Math.round(Kt(o)/r),Math.round(Ht(o)/r)),this.renderedImageCanvas_=new Oh(o,r,1,s.canvas)),s.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new id("afteroperations",e,n))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,n=this.layers_.length;i<n&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}nd.prototype.dispose;let od=null;function rd(e,t){const i=e.getRenderer();if(!i)throw new Error("Unsupported layer type: "+e);if(!i.prepareFrame(t))return null;const n=t.size[0],o=t.size[1];if(0===n||0===o)return null;const r=i.renderFrame(t,null);let s;if(r instanceof HTMLCanvasElement)s=r;else{if(r&&(s=r.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===n&&s.height===o)return s.getContext("2d").getImageData(0,0,n,o)}if(od){const e=od.canvas;e.width!==n||e.height!==o?od=tr(n,o,void 0,{willReadFrequently:!0}):od.clearRect(0,0,n,o)}else od=tr(n,o,void 0,{willReadFrequently:!0});return od.drawImage(s,0,0,n,o),od.getImageData(0,0,n,o)}function sd(e){let t;return e instanceof Vc?e instanceof Hc?t=new Mc({source:e}):e instanceof Fh&&(t=new Qh({source:e})):t=e,t}class ad extends Zc{constructor(e){super({attributions:(e=e||{}).attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const t=[];for(const i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,i,n,o,r){const s=this.urls;if(!s)return;let a;return a=1==s.length?s[0]:s[ht(hc(e),s.length)],function(e,t,i,n,o,r){const s=o.getCode().split(/:(?=\d+$)/).pop(),a=i/n,l=[ft(Kt(t)/a,4),ft(Ht(t)/a,4)];return r.SIZE=l[0]+","+l[1],r.BBOX=t.join(","),r.BBOXSR=s,r.IMAGESR=s,r.DPI=Math.round(r.DPI?r.DPI*n:90*n),Ac(e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),r)}(a,i,(this.tileGrid||this.getTileGridForProjection(o)).getResolution(e[0]),n,o,r)}getTilePixelRatio(e){return this.hidpi_?e:1}setParams(e){this.params_=Object.assign({},e),this.setKey(this.getKeyForParams_())}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=e[0])return;1!=t&&!this.hidpi_&&(t=1);const o=n.getTileCoordExtent(e,this.tmpExtent_);let r=ia(n.getTileSize(e[0]),this.tmpSize);1!=t&&(r=ta(r,t,this.tmpSize));const s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(s,this.params_),this.getRequestUrl_(e,r,o,t,i,s)}}class ld extends Vh{constructor(e){const t=(e=e||{}).template||"z:{z} x:{x} y:{y}",i=e.source,n=e.color||"grey";super({transition:0,wrapX:void 0!==e.wrapX?e.wrapX:void 0!==i?i.getWrapX():void 0});const o=()=>{this.projection=void 0!==e.projection?fn(e.projection):void 0!==i?i.getProjection():this.projection,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:void 0!==i?i.getTileGrid():this.tileGrid,this.zDirection=void 0!==e.zDirection?e.zDirection:void 0!==i?i.zDirection:this.zDirection,i instanceof Ih&&(this.transformMatrix=i.transformMatrix?.slice()||null);const o=this.tileGrid;o&&this.setTileSizes(o.getResolutions().map(((e,t)=>ia(o.getTileSize(t)).map((e=>Math.max(Math.floor(e),1)))))),this.setLoader(((e,i,o,r)=>{const s=Nc(t,e,i,o,r.maxY),[a,l]=this.getTileSize(e),u=tr(a,l);return u.strokeStyle=n,u.strokeRect(.5,.5,a+.5,l+.5),u.fillStyle=n,u.strokeStyle="white",u.textAlign="center",u.textBaseline="middle",u.font="24px sans-serif",u.lineWidth=4,u.strokeText(s,a/2,l/2,a),u.fillText(s,a/2,l/2,a),Promise.resolve(u.canvas)})),this.setState("ready")};if(void 0===i||"ready"===i.getState())o();else{const e=()=>{"ready"===i.getState()&&(i.removeEventListener(J,e),o())};i.addEventListener(J,e)}}}class ud extends Zc{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:fn("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)!function(e,t,i){const n=document.createElement("script"),o="olc_"+Pe(t);function r(){delete window[o],n.parentNode.removeChild(n)}n.async=!0,n.src=e+(e.includes("?")?"&":"?")+"callback="+o;const s=setTimeout((function(){r(),i&&i()}),1e4);window[o]=function(e){clearTimeout(s),r(),t(e)},document.head.appendChild(n)}(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(e.tileJSON)}}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let e;try{e=JSON.parse(t.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(e)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=fn("EPSG:4326"),i=this.getProjection();let n;if(void 0!==e.bounds){const o=wn(t,i);n=Qt(e.bounds,o)}const o=Rc(i),r=e.minzoom||0,s=Lc({extent:o,maxZoom:e.maxzoom||22,minZoom:r,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=jc(e.tiles,s),e.attribution&&!this.getAttributions()){const t=void 0!==n?n:o;this.setAttributions((function(i){return Yt(t,i.extent)?[e.attribution]:null}))}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class cd extends Zc{constructor(e){const t=void 0!==e.requestEncoding?e.requestEncoding:"KVP",i=e.tileGrid;let n=e.urls;void 0===n&&void 0!==e.url&&(n=Dc(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=Bc(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join("\n");this.setTileUrlFunction(Bc(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==t&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e="KVP"==t?Ac(e,i):e.replace(/\{(\w+?)\}/g,(function(e,t){return t.toLowerCase()in i?i[t.toLowerCase()]:e}));const n=this.tileGrid,o=this.dimensions_;return function(i,r,s){if(!i)return;const a={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};Object.assign(a,o);let l=e;return l="KVP"==t?Ac(l,a):l.replace(/\{(\w+?)\}/g,(function(e,t){return encodeURIComponent(a[t])})),l}}}const hd="BD:09",dd=(e="BD:09")=>{let t=fn(e);return t||(pn(new _i({code:"BD:09",extent:[-20037726.37,-11708041.66,20037726.37,12474104.17],units:"m",axisOrientation:"neu",global:!1})),t)};let pd=class e extends Zc{constructor(t){const i=t||{},n=i.tileGrid||e.getTileGrid(i.projection||"EPSG:3857");super({projection:i.projection===hd?dd(hd):"EPSG:3857",tileGrid:n,tileUrlFunction:function(e){if(!e)return"";let t=e[0],n=e[1],o=-e[2]-1,r=n<0?"M"+-n:n,s=o<0?"M"+-o:o;return i.key&&"vec"!==i.key?`https://maponline0.bdimg.com/starpic/?qt=satepc&u=x=${r};y=${s};z=${t};v=009;type=sate&fm=46&app=webearth2&v=009&udt=20241109`:"http://online3.map.bdimg.com/onlinelabel/?qt=tile&x="+r+"&y="+s+"&z="+t+"&styles=pl&udt=20151021&scaler=1&p=1"}})}static getTileGrid(t){return"EPSG:4326"===t||"EPSG:4490"===t?e.default4326TileGrid():"BD:09"===t?e.defaultBD09TileGrid():e.default3857TileGrid()}static default4326TileGrid(){const e=[],t=[];for(let i=1;i<19;i+=1)e.push(1.40625/2**i),t.push(i);return new kc({extent:[-180,-90,180,90],resolutions:e,origin:[-180,90],matrixIds:t,minZoom:1})}static default3857TileGrid(){const e=[],t=[];for(let i=1;i<19;i+=1)e[i]=Math.pow(2,18-i),t.push(i);return new kc({resolutions:e,matrixIds:t,origin:[0,0],minZoom:1})}static defaultBD09TileGrid(){const e=[];for(let t=1;t<19;t+=1)e[t]=Math.pow(2,18-t);return new kc({resolutions:e,origin:[0,0],minZoom:1})}};function fd(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}const gd=Object.prototype,md=gd.toString,vd=gd.hasOwnProperty,yd=/^\s*function (\w+)/;function _d(e){const t=e?.type??e;if(t){const e=t.toString().match(yd);return e?e[1]:""}return""}let bd=function(){};const xd=(e,t)=>vd.call(e,t),wd=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Sd=Array.isArray||function(e){return"[object Array]"===md.call(e)},Cd=e=>"[object Function]"===md.call(e),Md=(e,t)=>fd(e)&&xd(e,"_vueTypes_name")&&(!t||e._vueTypes_name===t),Ed=e=>fd(e)&&(xd(e,"type")||["_vueTypes_name","validator","default","required"].some((t=>xd(e,t))));function kd(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function Td(e,t,i=!1){let n,o=!0,r="";n=fd(e)?e:{type:e};const s=Md(n)?n._vueTypes_name+" - ":"";if(Ed(n)&&null!==n.type){if(void 0===n.type||!0===n.type||!n.required&&null==t)return o;Sd(n.type)?(o=n.type.some((e=>!0===Td(e,t,!0))),r=n.type.map((e=>_d(e))).join(" or ")):(r=_d(n),o="Array"===r?Sd(t):"Object"===r?fd(t):"String"===r||"Number"===r||"Boolean"===r||"Function"===r?function(e){if(null==e)return"";const t=e.constructor.toString().match(yd);return t?t[1].replace(/^Async/,""):""}(t)===r:t instanceof n.type)}if(!o){const e=`${s}value "${t}" should be of type "${r}"`;return!1===i?(bd(e),!1):e}if(xd(n,"validator")&&Cd(n.validator)){const e=bd,r=[];if(bd=e=>{r.push(e)},o=n.validator(t),bd=e,!o){const e=(r.length>1?"* ":"")+r.join("\n* ");return r.length=0,!1===i?(bd(e),o):e}}return o}function Pd(e,t){const i=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get(){return this.required=!0,this}},def:{value(e){return void 0===e?this.type===Boolean||Array.isArray(this.type)&&this.type.includes(Boolean)?void(this.default=void 0):(xd(this,"default")&&delete this.default,this):Cd(e)||!0===Td(this,e,!0)?(Sd(e)||fd(e)?this.default=()=>function(e){return"structuredClone"in globalThis?structuredClone(e):Array.isArray(e)?[...e]:fd(e)?Object.assign({},e):e}(e):this.default=e,this):(bd(`${this._vueTypes_name} - invalid default value: "${e}"`),this)}}}),{validator:n}=i;return Cd(n)&&(i.validator=kd(n,i)),i}function Ld(e,t){const i=Pd(e,t);return Object.defineProperty(i,"validate",{value(e){return Cd(this.validator)&&bd(`${this._vueTypes_name} - calling .validate() will overwrite the current custom validator function. Validator info:\n${JSON.stringify(this)}`),this.validator=kd(e,this),this}})}function Id(e){return e.replace(/^(?!\s*$)/gm,"  ")}const Rd=()=>Ld("boolean",{type:Boolean}),Ad=()=>Ld("string",{type:String}),qd=()=>Ld("number",{type:Number}),Fd=()=>Ld("array",{type:Array}),Od=()=>Ld("object",{type:Object});function zd(e){if(!Sd(e))throw new TypeError("[VueTypes error]: You must provide an array as argument");let t=!1,i=!1,n=[];for(let r=0;r<e.length;r+=1){const o=e[r];if(Ed(o)){if(Cd(o.validator)&&(t=!0),Md(o,"oneOf")&&o.type){n=n.concat(o.type);continue}if(Md(o,"nullable")){i=!0;continue}if(!0===o.type||!o.type){bd('oneOfType - invalid usage of "true" and "null" as types.');continue}n=n.concat(o.type)}else n.push(o)}n=n.filter(((e,t)=>n.indexOf(e)===t));const o=!1===i&&n.length>0?n:null;return Pd("oneOfType",t?{type:o,validator(t){const i=[],n=e.some((e=>{const n=Td(e,t,!0);return"string"==typeof n&&i.push(n),!0===n}));return n||bd(`oneOfType - provided value does not match any of the ${i.length} passed-in validators:\n${Id(i.join("\n"))}`),n}}:{type:o})}var Nd=Object.defineProperty,Dd=(e,t,i)=>{return r=i,(o="symbol"!=typeof t?t+"":t)in(n=e)?Nd(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,i;var n,o,r};const Gd=(jd=class{static get any(){return Ld("any",{})}static get func(){return Ld("function",{type:Function}).def(this.defaults.func)}static get bool(){return void 0===this.defaults.bool?Rd():Rd().def(this.defaults.bool)}static get string(){return Ad().def(this.defaults.string)}static get number(){return qd().def(this.defaults.number)}static get array(){return Fd().def(this.defaults.array)}static get object(){return Od().def(this.defaults.object)}static get integer(){return Pd("integer",{type:Number,validator(e){const t=wd(e);return!1===t&&bd(`integer - "${e}" is not an integer`),t}}).def(this.defaults.integer)}static get symbol(){return Pd("symbol",{validator(e){const t="symbol"==typeof e;return!1===t&&bd(`symbol - invalid value "${e}"`),t}})}static get nullable(){return Object.defineProperty({type:null,validator(e){const t=null===e;return!1===t&&bd("nullable - value should be null"),t}},"_vueTypes_name",{value:"nullable"})}static extend(...e){bd("VueTypes.extend has been removed. Use the ES6+ method instead. See https://dwightjack.github.io/vue-types/advanced/extending-vue-types.html#extending-namespaced-validators-in-es6 for details.")}},Dd(jd,"defaults",{}),Dd(jd,"sensibleDefaults"),Dd(jd,"config",{silent:!1,logLevel:"warn"}),Dd(jd,"custom",(function(e,t="custom validation failed"){if("function"!=typeof e)throw new TypeError("[VueTypes error]: You must provide a function as argument");return Pd(e.name||"<<anonymous function>>",{type:null,validator(i){const n=e(i);return n||bd(`${this._vueTypes_name} - ${t}`),n}})})),Dd(jd,"oneOf",(function(e){if(!Sd(e))throw new TypeError("[VueTypes error]: You must provide an array as argument.");const t=`oneOf - value should be one of "${e.map((e=>"symbol"==typeof e?e.toString():e)).join('", "')}".`,i={validator(i){const n=-1!==e.indexOf(i);return n||bd(t),n}};if(-1===e.indexOf(null)){const t=e.reduce(((e,t)=>{if(null!=t){const i=t.constructor;-1===e.indexOf(i)&&e.push(i)}return e}),[]);t.length>0&&(i.type=t)}return Pd("oneOf",i)})),Dd(jd,"instanceOf",(function(e){return Pd("instanceOf",{type:e})})),Dd(jd,"oneOfType",zd),Dd(jd,"arrayOf",(function(e){return Pd("arrayOf",{type:Array,validator(t){let i="";const n=t.every((t=>(i=Td(e,t,!0),!0===i)));return n||bd(`arrayOf - value validation error:\n${Id(i)}`),n}})})),Dd(jd,"objectOf",(function(e){return Pd("objectOf",{type:Object,validator(t){let i="";if(!fd(t))return!1;const n=Object.keys(t).every((n=>(i=Td(e,t[n],!0),!0===i)));return n||bd(`objectOf - value validation error:\n${Id(i)}`),n}})})),Dd(jd,"shape",(function(e){const t=Object.keys(e),i=t.filter((t=>!!e[t]?.required)),n=Pd("shape",{type:Object,validator(n){if(!fd(n))return!1;const o=Object.keys(n);if(i.length>0&&i.some((e=>-1===o.indexOf(e)))){const e=i.filter((e=>-1===o.indexOf(e)));return 1===e.length?bd(`shape - required property "${e[0]}" is not defined.`):bd(`shape - required properties "${e.join('", "')}" are not defined.`),!1}return o.every((i=>{if(-1===t.indexOf(i))return!0===this._vueTypes_isLoose||(bd(`shape - shape definition does not include a "${i}" property. Allowed keys: "${t.join('", "')}".`),!1);const o=Td(e[i],n[i],!0);return"string"==typeof o&&bd(`shape - "${i}" property validation error:\n ${Id(o)}`),!0===o}))}});return Object.defineProperty(n,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(n,"loose",{get(){return this._vueTypes_isLoose=!0,this}}),n})),Dd(jd,"utils",{validate:(e,t)=>!0===Td(t,e,!0),toType:(e,t,i=!1)=>i?Ld(e,t):Pd(e,t)}),jd);var jd;!function(e={func:()=>{},bool:!0,string:"",number:0,array:()=>[],object:()=>({}),integer:0}){Dd(class extends Gd{static get sensibleDefaults(){return{...this.defaults}}static set sensibleDefaults(t){this.defaults=!1!==t?!0!==t?{...t}:{...e}:{}}},"defaults",{...e})}();const Bd={LAYER_ORDER_CHANGED:"LAYER_ORDER_CHANGED",LAYER_LOCATE:"LAYER_LOCATE",LAYER_OPACITY_CHANGED:"LAYER_OPACITY_CHANGED",LAYER_VISIBLE_CHANGED:"LAYER_VISIBLE_CHANGED",LAYER_ADDED:"LAYER_ADDED",LAYER_REMOVED:"LAYER_REMOVED",LAYER_COPY:"LAYER_COPY",LAYER_ITEMS_CHANGED:"LAYER_ITEMS_CHANGED",LAYER_ITEM_UPDATED:"LAYER_ITEM_UPDATED",LAYER_SWIPE_CHANGED:"LAYER_SWIPE_CHANGED",LAYER_CHANGED:"LAYER_CHANGED",MAP_SYNC_VIEW:"MAP_SYNC_VIEW",MAP_SYNC_VIEW_END:"MAP_SYNC_VIEW_END",MAP_ZOOM_CHANGED:"MAP_ZOOM_CHANGED",MAP_MESSAGE_INFO:"MAP_MESSAGE_INFO",LAYER_TREE_CONTEXT_MENU:"LAYER_TREE_CONTEXT_MENU",PASTE_LAYER_LOAD_WMTS:"PASTE_LAYER_LOAD_WMTS",PASTE_LAYER_LOAD_MVT:"PASTE_LAYER_LOAD_MVT"};let Vd=class{mapID;mapGroup;data;target;constructor(e,t){this.mapID=e,this.mapGroup=t}};function $d(e){return{all:e=e||new Map,on(t,i){const n=e?.get(t);n&&n.push(i)||e?.set(t,[i])},off(t,i){const n=e?.get(t);n&&n.splice(n.indexOf(i)>>>0,1)},emit(t,i){(e?.get(t)||[]).slice().map((e=>{e(i)})),(e?.get("*")||[]).slice().map((e=>{e(t,i)}))}}}$d();const Hd=new class{eventBus;constructor(){this.eventBus=$d()}eventEmit(e,t){this.eventBus.emit(e,t)}eventOn(e,t){this.eventBus.on(e,t)}eventOff(e,t){this.eventBus.off(e,t)}};class Ud{drawCustom(e,t,i,n,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Wd=11,Xd=[8],Kd=[12],Yd=[1],Zd=[3];class Qd extends Ud{constructor(e,t,i,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map((function(e){return e*t}))}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates;let r=o.length;for(let s=0,a=e.length;s<a;s+=t)n[0]=e[s],n[1]=e[s+1],Ct(i,n)&&(o[r++]=n[0],o[r++]=n[1]);return r}appendFlatLineCoordinates(e,t,i,n,o,r){const s=this.coordinates;let a=s.length;const l=this.getBufferedMaxExtent();r&&(t+=n);let u=e[t],c=e[t+1];const h=this.tmpCoordinate_;let d,p,f,g=!0;for(d=t+n;d<i;d+=n)h[0]=e[d],h[1]=e[d+1],f=kt(l,h),f!==p?(g&&(s[a++]=u,s[a++]=c,g=!1),s[a++]=h[0],s[a++]=h[1]):1===f?(s[a++]=h[0],s[a++]=h[1],g=!1):g=!0,u=h[0],c=h[1],p=f;return(o&&g||d===t+n)&&(s[a++]=u,s[a++]=c),a}drawCustomCoordinates_(e,t,i,n,o){for(let r=0,s=i.length;r<s;++r){const s=i[r],a=this.appendFlatLineCoordinates(e,t,s,n,!1,!1);o.push(a),t=s}return t}drawCustom(e,t,i,n,o){this.beginGeometry(e,t,o);const r=e.getType(),s=e.getStride(),a=this.coordinates.length;let l,u,c,h,d;switch(r){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),h=[];const t=e.getEndss();d=0;for(let e=0,i=t.length;e<i;++e){const i=[];d=this.drawCustomCoordinates_(l,d,t[e],s,i),h.push(i)}this.instructions.push([4,a,h,e,i,po,o]),this.hitDetectionInstructions.push([4,a,h,e,n||i,po,o]);break;case"Polygon":case"MultiLineString":c=[],l="Polygon"==r?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,e.getEnds(),s,c),this.instructions.push([4,a,c,e,i,ho,o]),this.hitDetectionInstructions.push([4,a,c,e,n||i,ho,o]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,s,!1,!1),this.instructions.push([4,a,u,e,i,co,o]),this.hitDetectionInstructions.push([4,a,u,e,n||i,co,o]);break;case"MultiPoint":l=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,s),u>a&&(this.instructions.push([4,a,u,e,i,co,o]),this.hitDetectionInstructions.push([4,a,u,e,n||i,co,o]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([4,a,u,e,i,void 0,o]),this.hitDetectionInstructions.push([4,a,u,e,n||i,void 0,o])}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[0,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[0,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let n,o,r=-1;for(t=0;t<i;++t)n=e[t],o=n[0],7==o?r=t:0==o&&(n[2]=t,ce(this.hitDetectionInstructions,r,t),r=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&"object"==typeof i&&"src"in i?this.pixelRatio:1,t.fillStyle=Al(i||Fl)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Al(i||Dl);const n=e.getLineCap();t.lineCap=void 0!==n?n:Ol;const o=e.getLineDash();t.lineDash=o?o.slice():zl;const r=e.getLineDashOffset();t.lineDashOffset=r||0;const s=e.getLineJoin();t.lineJoin=void 0!==s?s:Nl;const a=e.getWidth();t.lineWidth=void 0!==a?a:1;const l=e.getMiterLimit();t.miterLimit=void 0!==l?l:10,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[10,t];return"string"!=typeof t&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Wd,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,n=e.lineCap,o=e.lineDash,r=e.lineDashOffset,s=e.lineJoin,a=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=n||o!=e.currentLineDash&&!de(e.currentLineDash,o)||e.currentLineDashOffset!=r||e.currentLineJoin!=s||e.currentLineWidth!=a||e.currentMiterLimit!=l)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=n,e.currentLineDash=o,e.currentLineDashOffset=r,e.currentLineJoin=s,e.currentLineWidth=a,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[7,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=wt(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;xt(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Jd extends Qd{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinatess_(e,t,i,n){const o=this.state,r=void 0!==o.fillStyle,s=void 0!==o.strokeStyle,a=i.length;this.instructions.push(Yd),this.hitDetectionInstructions.push(Yd);for(let l=0;l<a;++l){const o=i[l],r=[9,this.coordinates.length,this.appendFlatLineCoordinates(e,t,o,n,!0,!s)];this.instructions.push(r),this.hitDetectionInstructions.push(r),s&&(this.instructions.push(Zd),this.hitDetectionInstructions.push(Zd)),t=o}return r&&(this.instructions.push(Xd),this.hitDetectionInstructions.push(Xd)),s&&(this.instructions.push(Kd),this.hitDetectionInstructions.push(Kd)),t}drawCircle(e,t,i){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([10,Fl]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Wd,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,zl,0]);const s=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,a,!1,!1);const u=[2,l];this.instructions.push(Yd,u),this.hitDetectionInstructions.push(Yd,u),void 0!==n.fillStyle&&(this.instructions.push(Xd),this.hitDetectionInstructions.push(Xd)),void 0!==n.strokeStyle&&(this.instructions.push(Kd),this.hitDetectionInstructions.push(Kd)),this.endGeometry(t)}drawPolygon(e,t,i){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([10,Fl]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Wd,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,zl,0]);const s=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,s,l),this.endGeometry(t)}drawMultiPolygon(e,t,i){const n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([10,Fl]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Wd,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,zl,0]);const s=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let u=0;for(let c=0,h=s.length;c<h;++c)u=this.drawFlatCoordinatess_(a,u,s[c],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,n=t.length;i<n;++i)t[i]=mo(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function ep(e,t,i,n,o){const r=[];let s=i,a=0,l=t.slice(i,2);for(;a<e&&s+o<n;){const[i,n]=l.slice(-2),u=t[s+o],c=t[s+o+1],h=Math.sqrt((u-i)*(u-i)+(c-n)*(c-n));if(a+=h,a>=e){const t=(e-a+h)/h,d=dt(i,u,t),p=dt(n,c,t);l.push(d,p),r.push(l),l=[d,p],a==e&&(s+=o),a=0}else if(a<e)l.push(t[s+o],t[s+o+1]),s+=o;else{const e=h-a,t=dt(i,u,e/h),d=dt(n,c,e/h);l.push(t,d),r.push(l),l=[t,d],a=0,s+=o}}return a>0&&r.push(l),r}function tp(e,t,i,n,o){let r,s,a,l,u,c,h,d,p,f,g=i,m=i,v=0,y=0,_=i;for(s=i;s<n;s+=o){const i=t[s],n=t[s+1];void 0!==u&&(p=i-u,f=n-c,l=Math.sqrt(p*p+f*f),void 0!==h&&(y+=a,r=Math.acos((h*p+d*f)/(a*l)),r>e&&(y>v&&(v=y,g=_,m=s),y=0,_=s-o)),a=l,h=p,d=f),u=i,c=n}return y+=l,y>v?[_,s]:[g,m]}const ip={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},np={Circle:Jd,Default:Qd,Image:class extends Qd{constructor(e,t,i,n){super(e,t,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Ct(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),o=e.getStride(),r=this.coordinates.length,s=this.appendFlatPointCoordinates(n,o);this.instructions.push([6,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([6,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),o=[];for(let a=0,l=n.length;a<l;a+=e.getStride())(!this.maxExtent||Ct(this.maxExtent,n.slice(a,a+2)))&&o.push(n[a],n[a+1]);const r=this.coordinates.length,s=this.appendFlatPointCoordinates(o,2);this.instructions.push([6,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([6,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),n=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class extends Qd{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinates_(e,t,i,n){const o=[9,this.coordinates.length,this.appendFlatLineCoordinates(e,t,i,n,!1,!1)];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(e,t,i){const n=this.state,o=n.strokeStyle,r=n.lineWidth;if(void 0===o||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Wd,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,zl,0],Yd);const s=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(Kd),this.endGeometry(t)}drawMultiLineString(e,t,i){const n=this.state,o=n.strokeStyle,r=n.lineWidth;if(void 0===o||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Wd,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,zl,0],Yd);const s=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let u=0;for(let c=0,h=s.length;c<h;++c)u=this.drawFlatCoordinates_(a,u,s[c],l);this.hitDetectionInstructions.push(Kd),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Kd),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Kd),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Yd)}},Polygon:Jd,Text:class extends Qd{constructor(e,t,i,n){super(e,t,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Fl]={fillStyle:Fl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const n=this.textFillState_,o=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!n&&!o)return;const s=this.coordinates;let a=s.length;const l=e.getType();let u=null,c=e.getStride();if("line"!==r.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let n=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),c=2;break;case"Polygon":u=e.getFlatInteriorPoint(),r.overflow||n.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const t=e.getFlatInteriorPoints();u=[];for(let e=0,i=t.length;e<i;e+=3)r.overflow||n.push(t[e+2]/this.resolution),u.push(t[e],t[e+1]);if(0===u.length)return;c=2}const o=this.appendFlatPointCoordinates(u,c);if(o===a)return;if(n&&(o-a)/2!=u.length/c){let e=a/2;n=n.filter(((t,i)=>{const n=s[2*(e+i)]===u[i*c]&&s[2*(e+i)+1]===u[i*c+1];return n||--e,n}))}this.saveTextStates_();const h=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,d=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(e,t,i);let p=r.padding;if(p!=Bl&&(r.scale[0]<0||r.scale[1]<0)){let e=r.padding[0],t=r.padding[1],i=r.padding[2],n=r.padding[3];r.scale[0]<0&&(t=-t,n=-n),r.scale[1]<0&&(e=-e,i=-i),p=[e,t,i,n]}const f=this.pixelRatio;this.instructions.push([6,a,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==Bl?Bl:p.map((function(e){return e*f})),h,d,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]);const g=1/f,m=h?h.slice(0):null;m&&(m[1]=Fl),this.hitDetectionInstructions.push([6,a,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,this.declutterMode_,this.declutterImageWithText_,p,m,d,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Fl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]),this.endGeometry(t)}else{if(!Yt(this.maxExtent,e.getExtent()))return;let n;if(u=e.getFlatCoordinates(),"LineString"==l)n=[u.length];else if("MultiLineString"==l)n=e.getEnds();else if("Polygon"==l)n=e.getEnds().slice(0,1);else if("MultiPolygon"==l){const t=e.getEndss();n=[];for(let e=0,i=t.length;e<i;++e)n.push(t[e][0])}this.beginGeometry(e,t,i);const o=r.repeat,h=o?void 0:r.textAlign;let d=0;for(let e=0,t=n.length;e<t;++e){let t;t=o?ep(o*this.resolution,u,d,n[e],c):[u.slice(d,n[e])];for(let i=0,o=t.length;i<o;++i){const o=t[i];let l=0,u=o.length;if(null==h){const e=tp(r.maxAngle,o,0,o.length,2);l=e[0],u=e[1]}for(let e=l;e<u;e+=c)s.push(o[e],o[e+1]);const p=s.length;d=n[e],this.drawChars_(a,p),a=p}}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||Gl,justify:t.justify,textBaseline:t.textBaseline||jl,scale:t.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,r=this.textKey_,s=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=ip[n.textBaseline],u=this.textOffsetY_*a,c=this.text_,h=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([5,e,t,l,n.overflow,s,n.maxAngle,a,u,o,h*a,c,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([5,e,t,l,n.overflow,s&&Fl,n.maxAngle,a,u,o,h*a,c,r,1/a,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,n,o;if(e){const t=e.getFill();t?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Al(t.getColor()||Fl)):(n=null,this.textFillState_=n);const r=e.getStroke();if(r){o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const e=r.getLineDash(),t=r.getLineDashOffset(),i=r.getWidth(),n=r.getMiterLimit();o.lineCap=r.getLineCap()||Ol,o.lineDash=e?e.slice():zl,o.lineDashOffset=void 0===t?0:t,o.lineJoin=r.getLineJoin()||Nl,o.lineWidth=void 0===i?1:i,o.miterLimit=void 0===n?10:n,o.strokeStyle=Al(r.getColor()||Dl)}else o=null,this.textStrokeState_=o;i=this.textState_;const s=e.getFont()||ql;Kl(s);const a=e.getScaleArray();i.overflow=e.getOverflow(),i.font=s,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||jl,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Bl,i.scale=void 0===a?[1,1]:a;const l=e.getOffsetX(),u=e.getOffsetY(),c=e.getRotateWithView(),h=e.getKeepUpright(),d=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==c&&c,this.textKeepUpright_=void 0===h||h,this.textRotation_=void 0===d?0:d,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Pe(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?"string"==typeof n.fillStyle?n.fillStyle:"|"+Pe(n.fillStyle):""}else this.text_="";this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}};class op{constructor(e,t,i,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const n in i){const o=i[n].finish();e[t][n]=o}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);let o=n[t];return void 0===o&&(o=new np[t](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=o),o}}function rp(e,t,i,n,o,r,s,a,l,u,c,h,d=!0){let p=e[t],f=e[t+1],g=0,m=0,v=0,y=0;function _(){g=p,m=f,p=e[t+=n],f=e[t+1],y+=v,v=Math.sqrt((p-g)*(p-g)+(f-m)*(f-m))}do{_()}while(t<i-n&&y+v<r);let b=0===v?0:(r-y)/v;const x=dt(g,p,b),w=dt(m,f,b),S=t-n,C=y,M=r+a*l(u,o,c);for(;t<i-n&&y+v<M;)_();b=0===v?0:(M-y)/v;const E=dt(g,p,b),k=dt(m,f,b);let T=!1;if(d)if(h){const e=[x,w,E,k];Un(e,0,4,2,h,e,e),T=e[0]>e[2]}else T=x>E;const P=Math.PI,L=[],I=S+n===t;let R;if(v=0,y=C,p=e[t=S],f=e[t+1],I){_(),R=Math.atan2(f-m,p-g),T&&(R+=R>0?-P:P);const e=(E+x)/2,t=(k+w)/2;return L[0]=[e,t,(M-r)/2,R,o],L}for(let A=0,q=(o=o.replace(/\n/g," ")).length;A<q;){_();let e=Math.atan2(f-m,p-g);if(T&&(e+=e>0?-P:P),void 0!==R){let t=e-R;if(t+=t>P?-2*P:t<-P?2*P:0,Math.abs(t)>s)return null}R=e;const h=A;let d=0;for(;A<q;++A){const e=a*l(u,o[T?q-A-1:A],c);if(t+n<i&&y+v<r+d+e/2)break;d+=e}if(A===h)continue;const x=T?o.substring(q-h,q-A):o.substring(h,A);b=0===v?0:(r+d/2-y)/v;const w=dt(g,p,b),S=dt(m,f,b);L.push([w,S,d/2,e,x]),r+=d}return L}const sp=[1/0,1/0,-1/0,-1/0],ap=[],lp=[],up=[],cp=[];function hp(e){return e[3].declutterBox}const dp=new RegExp("[-----]");function pp(e,t){return"start"===t?t=dp.test(e)?"right":"left":"end"===t&&(t=dp.test(e)?"left":"right"),ip[t]}function fp(e,t,i){return i>0&&e.push("\n",""),e.push(t,""),e}function gp(e,t,i){return i%2==0&&(e+=t),e}class mp{constructor(e,t,i,n,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new pc:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,n){const o=e+t+i+n;if(this.labels_[o])return this.labels_[o];const r=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[t],l=this.pixelRatio,u=[a.scale[0]*l,a.scale[1]*l],c=a.justify?ip[a.justify]:pp(Array.isArray(e)?e[0]:e,a.textAlign||Gl),h=n&&r.lineWidth?r.lineWidth:0,d=Array.isArray(e)?e:String(e).split("\n").reduce(fp,[]),{width:p,height:f,widths:g,heights:m,lineWidths:v}=function(e,t){const i=[],n=[],o=[];let r=0,s=0,a=0,l=0;for(let u=0,c=t.length;u<=c;u+=2){const h=t[u];if("\n"===h||u===c){r=Math.max(r,s),o.push(s),s=0,a+=l,l=0;continue}const d=t[u+1]||e.font,p=Ql(d,h);i.push(p),s+=p;const f=Yl(d);n.push(f),l=Math.max(l,f)}return{width:r,height:a,widths:i,heights:n,lineWidths:o}}(a,d),y=p+h,_=[],b=(y+2)*u[0],x=(f+h)*u[1],w={width:b<0?Math.floor(b):Math.ceil(b),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:_};(1!=u[0]||1!=u[1])&&_.push("scale",u),n&&(_.push("strokeStyle",r.strokeStyle),_.push("lineWidth",h),_.push("lineCap",r.lineCap),_.push("lineJoin",r.lineJoin),_.push("miterLimit",r.miterLimit),_.push("setLineDash",[r.lineDash]),_.push("lineDashOffset",r.lineDashOffset)),i&&_.push("fillStyle",s.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");const S=.5-c;let C=c*y+S*h;const M=[],E=[];let k,T=0,P=0,L=0,I=0;for(let R=0,A=d.length;R<A;R+=2){const e=d[R];if("\n"===e){P+=T,T=0,C=c*y+S*h,++I;continue}const t=d[R+1]||a.font;t!==k&&(n&&M.push("font",t),i&&E.push("font",t),k=t),T=Math.max(T,m[L]);const o=[e,C+S*g[L]+c*(g[L]-v[I]),.5*(h+T)+P];C+=g[L],n&&M.push("strokeText",o),i&&E.push("fillText",o),++L}return Array.prototype.push.apply(_,M),Array.prototype.push.apply(_,E),this.labels_[o]=w,w}replayTextBackground_(e,t,i,n,o,r,s){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,o),e.lineTo.apply(e,t),r&&(this.alignAndScaleFill_=r[2],e.fillStyle=r[1],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,n,o,r,s,a,l,u,c,h,d,p,f,g){let m=i-(s*=h[0]),v=n-(a*=h[1]);const y=o+l>e?e-l:o,_=r+u>t?t-u:r,b=p[3]+y*h[0]+p[1],x=p[0]+_*h[1]+p[2],w=m-p[3],S=v-p[0];let C;return(f||0!==c)&&(ap[0]=w,cp[0]=w,ap[1]=S,lp[1]=S,lp[0]=w+b,up[0]=lp[0],up[1]=S+x,cp[1]=up[1]),0!==c?(C=jn([1,0,0,1,0,0],i,n,1,1,c,-i,-n),Dn(C,ap),Dn(C,lp),Dn(C,up),Dn(C,cp),Tt(Math.min(ap[0],lp[0],up[0],cp[0]),Math.min(ap[1],lp[1],up[1],cp[1]),Math.max(ap[0],lp[0],up[0],cp[0]),Math.max(ap[1],lp[1],up[1],cp[1]),sp)):Tt(Math.min(w,w+b),Math.min(S,S+x),Math.max(w,w+b),Math.max(S,S+x),sp),d&&(m=Math.round(m),v=Math.round(v)),{drawImageX:m,drawImageY:v,drawImageW:y,drawImageH:_,originX:l,originY:u,declutterBox:{minX:sp[0],minY:sp[1],maxX:sp[2],maxY:sp[3],value:g},canvasTransform:C,scale:h}}replayImageOrLabel_(e,t,i,n,o,r,s){const a=!(!r&&!s),l=n.declutterBox,u=s?s[2]*n.scale[0]/2:0;return l.minX-u<=t[0]&&l.maxX+u>=0&&l.minY-u<=t[1]&&l.maxY+u>=0&&(a&&this.replayTextBackground_(e,ap,lp,up,cp,r,s),function(e,t,i,n,o,r,s,a,l,u,c){e.save(),1!==i&&(void 0===e.globalAlpha?e.globalAlpha=e=>e.globalAlpha*=i:e.globalAlpha*=i),t&&e.transform.apply(e,t),n.contextInstructions?(e.translate(l,u),e.scale(c[0],c[1]),function(e,t){const i=e.contextInstructions;for(let n=0,o=i.length;n<o;n+=2)Array.isArray(i[n+1])?t[i[n]].apply(t,i[n+1]):t[i[n]]=i[n+1]}(n,e)):c[0]<0||c[1]<0?(e.translate(l,u),e.scale(c[0],c[1]),e.drawImage(n,o,r,s,a,0,0,s,a)):e.drawImage(n,o,r,s,a,l,u,s*c[0],a*c[1]),e.restore()}(e,n.canvasTransform,o,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Dn(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(i[0]%n,i[1]%n),1!==t&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,n){const o=this.textStates[t],r=this.createLabel(e,t,n,i),s=this.strokeStates[i],a=this.pixelRatio,l=pp(Array.isArray(e)?e[0]:e,o.textAlign||Gl),u=ip[o.textBaseline||jl],c=s&&s.lineWidth?s.lineWidth:0;return{label:r,anchorX:l*(r.width/a-2*o.scale[0])+2*(.5-l)*c,anchorY:u*r.height/a+2*(.5-u)*c}}execute_(e,t,i,n,o,r,s,a){const l=this.zIndexContext_;let u;var c,h;this.pixelCoordinates_&&de(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Hn(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),c=this.renderedTransform_,h=i,c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5]);let d=0;const p=n.length;let f,g,m,v,y,_,b,x,w,S,C,M,E,k=0,T=0,P=0;const L=this.coordinateCache_,I=this.viewRotation_,R=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,A={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},q=this.instructions!=n||this.overlaps?0:200;let F,O,z,N;for(;d<p;){const i=n[d];switch(i[0]){case 0:F=i[1],N=i[3],F.getGeometry()?void 0===s||Yt(s,N.getExtent())?++d:d=i[2]+1:d=i[2],l&&(l.zIndex=i[4]);break;case 1:T>q&&(this.fill_(e),T=0),P>q&&(e.stroke(),P=0),!T&&!P&&(e.beginPath(),y=NaN,_=NaN),++d;break;case 2:k=i[1];const n=u[k],c=u[k+1],h=u[k+2]-n,p=u[k+3]-c,D=Math.sqrt(h*h+p*p);e.moveTo(n+D,c),e.arc(n,c,D,0,2*Math.PI,!0),++d;break;case 3:e.closePath(),++d;break;case 4:k=i[1],f=i[2];const G=i[3],j=i[4],B=i[5];A.geometry=G,A.feature=F,d in L||(L[d]=[]);const V=L[d];B?B(u,k,f,2,V):(V[0]=u[k],V[1]=u[k+1],V.length=2),l&&(l.zIndex=i[6]),j(V,A),++d;break;case 6:k=i[1],f=i[2],w=i[3],g=i[4],m=i[5];let $=i[6];const H=i[7],U=i[8],W=i[9],X=i[10];let K=i[11];const Y=i[12];let Z=i[13];v=i[14]||"declutter";const Q=i[15];if(!w&&i.length>=20){S=i[19],C=i[20],M=i[21],E=i[22];const e=this.drawLabelWithPointPlacement_(S,C,M,E);w=e.label,i[3]=w;const t=i[23];g=(e.anchorX-t)*this.pixelRatio,i[4]=g;const n=i[24];m=(e.anchorY-n)*this.pixelRatio,i[5]=m,$=w.height,i[6]=$,Z=w.width,i[13]=Z}let J,ee,te,ie;i.length>25&&(J=i[25]),i.length>17?(ee=i[16],te=i[17],ie=i[18]):(ee=Bl,te=null,ie=null),X&&R?K+=I:!X&&!R&&(K-=I);let ne=0;for(;k<f;k+=2){if(J&&J[ne++]<Z/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(w.width,w.height,u[k],u[k+1],Z,$,g,m,U,W,K,Y,o,ee,!!te||!!ie,F),n=[e,t,w,i,H,te,ie];if(a){let e,t,o,r,s;if(Q){const i=f-k;if(!Q[i]){Q[i]={args:n,declutterMode:v};continue}const r=Q[i];e=r.args,t=r.declutterMode,delete Q[i],o=hp(e)}if(e&&("declutter"!==t||!a.collides(o))&&(r=!0),("declutter"!==v||!a.collides(i.declutterBox))&&(s=!0),"declutter"===t&&"declutter"===v){const e=r&&s;r=e,s=e}r&&("none"!==t&&a.insert(o),this.replayImageOrLabel_.apply(this,e)),s&&("none"!==v&&a.insert(i.declutterBox),this.replayImageOrLabel_.apply(this,n))}else this.replayImageOrLabel_.apply(this,n)}++d;break;case 5:const oe=i[1],re=i[2],se=i[3],ae=i[4];E=i[5];const le=i[6],ue=i[7],ce=i[8];M=i[9];const he=i[10];S=i[11],Array.isArray(S)&&(S=S.reduce(gp,"")),C=i[12];const de=[i[13],i[13]];v=i[14]||"declutter";const pe=i[15],fe=this.textStates[C],ge=fe.font,me=[fe.scale[0]*ue,fe.scale[1]*ue];let ve;ge in this.widths_?ve=this.widths_[ge]:(ve={},this.widths_[ge]=ve);const ye=hh(u,oe,re,2),_e=Math.abs(me[0])*Jl(ge,S,ve);if(ae||_e<=ye){const i=rp(u,oe,re,2,S,(ye-_e)*pp(S,this.textStates[C].textAlign),le,Math.abs(me[0]),Jl,ge,ve,R?0:this.viewRotation_,pe);e:if(i){const n=[];let o,r,s,l,u;if(M)for(o=0,r=i.length;o<r;++o){u=i[o],s=u[4],l=this.createLabel(s,C,"",M),g=u[2]+(me[0]<0?-he:he),m=se*l.height+2*(.5-se)*he*me[1]/me[0]-ce;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,g,m,0,0,u[3],de,!1,Bl,!1,F);if(a&&"declutter"===v&&a.collides(r.declutterBox))break e;n.push([e,t,l,r,1,null,null])}if(E)for(o=0,r=i.length;o<r;++o){u=i[o],s=u[4],l=this.createLabel(s,C,E,""),g=u[2],m=se*l.height-ce;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,g,m,0,0,u[3],de,!1,Bl,!1,F);if(a&&"declutter"===v&&a.collides(r.declutterBox))break e;n.push([e,t,l,r,1,null,null])}a&&"none"!==v&&a.load(n.map(hp));for(let e=0,t=n.length;e<t;++e)this.replayImageOrLabel_.apply(this,n[e])}}++d;break;case 7:if(void 0!==r){F=i[1];const e=r(F,N,v);if(e)return e}++d;break;case 8:q?T++:this.fill_(e),++d;break;case 9:for(k=i[1],f=i[2],O=u[k],z=u[k+1],e.moveTo(O,z),y=O+.5|0,_=z+.5|0,k+=2;k<f;k+=2)O=u[k],z=u[k+1],b=O+.5|0,x=z+.5|0,(k==f-2||b!==y||x!==_)&&(e.lineTo(O,z),y=b,_=x);++d;break;case 10:this.alignAndScaleFill_=i[2],T&&(this.fill_(e),T=0,P&&(e.stroke(),P=0)),e.fillStyle=i[1],++d;break;case Wd:P&&(e.stroke(),P=0),this.setStrokeStyle_(e,i),++d;break;case 12:q?P++:e.stroke(),++d;break;default:++d}}T&&this.fill_(e),P&&e.stroke()}execute(e,t,i,n,o,r){this.viewRotation_=n,this.execute_(e,t,i,this.instructions,o,void 0,void 0,r)}executeHitDetection(e,t,i,n,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,o)}}const vp=["Polygon","Circle","LineString","Image","Text","Default"],yp=["Image","Text"],_p=vp.filter((e=>!yp.includes(e)));class bp{constructor(e,t,i,n,o,r,s){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let n=this.executorsByZIndex_[i];void 0===n&&(n={},this.executorsByZIndex_[i]=n);const o=e[i];for(const e in o){const i=o[e];n[e]=new mp(this.resolution_,this.pixelRatio_,this.overlaps_,i,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let t=0,n=e.length;t<n;++t)if(e[t]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,n,o,r){const s=2*(n=Math.round(n))+1,a=jn(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-e[0],-e[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=tr(s,s));const u=this.hitDetectionContext_;let c;u.canvas.width!==s||u.canvas.height!==s?(u.canvas.width=s,u.canvas.height=s):l||u.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(c=[1/0,1/0,-1/0,-1/0],qt(c,e),xt(c,t*(this.renderBuffer_+n),c));const h=function(e){if(void 0!==xp[e])return xp[e];const t=2*e+1,i=e*e,n=new Array(i+1);for(let r=0;r<=e;++r)for(let o=0;o<=e;++o){const s=r*r+o*o;if(s>i)break;let a=n[s];a||(a=[],n[s]=a),a.push(4*((e+r)*t+(e+o))+3),r>0&&a.push(4*((e-r)*t+(e+o))+3),o>0&&(a.push(4*((e+r)*t+(e-o))+3),r>0&&a.push(4*((e-r)*t+(e-o))+3))}const o=[];for(let r=0,s=n.length;r<s;++r)n[r]&&o.push(...n[r]);return xp[e]=o,o}(n);let d;function p(e,t,i){const a=u.getImageData(0,0,s,s).data;for(let l=0,c=h.length;l<c;l++)if(a[h[l]]>0){if(!r||"none"===i||"Image"!==d&&"Text"!==d||r.includes(e)){const i=(h[l]-3)/4,r=n-i%s,a=n-(i/s|0),u=o(e,t,r*r+a*a);if(u)return u}u.clearRect(0,0,s,s);break}}const f=Object.keys(this.executorsByZIndex_).map(Number);let g,m,v,y,_;for(f.sort(ae),g=f.length-1;g>=0;--g){const e=f[g].toString();for(v=this.executorsByZIndex_[e],m=vp.length-1;m>=0;--m)if(d=vp[m],y=v[d],void 0!==y&&(_=y.executeHitDetection(u,a,i,p,c),_))return _}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],n=t[1],o=t[2],r=t[3],s=[i,n,i,r,o,r,o,n];return Hn(s,0,8,2,e,s),s}isEmpty(){return _e(this.executorsByZIndex_)}execute(e,t,i,n,o,r,s){const a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(s?le:ae),r=r||vp;const l=vp.length;for(let u=0,c=a.length;u<c;++u){const c=a[u].toString(),h=this.executorsByZIndex_[c];for(let d=0,p=r.length;d<p;++d){const c=r[d],p=h[c];if(void 0!==p){const r=null===s?void 0:p.getZIndexContext(),h=r?r.getContext():e,d=this.maxExtent_&&"Image"!==c&&"Text"!==c;if(d&&(h.save(),this.clip(h,i)),r&&"Text"!==c&&"Image"!==c?r.pushFunction((e=>p.execute(e,t,i,n,o,s))):p.execute(h,t,i,n,o,s),d&&h.restore(),r){r.offset();const e=a[u]*l+vp.indexOf(c);this.deferredZIndexContexts_[e]||(this.deferredZIndexContexts_[e]=[]),this.deferredZIndexContexts_[e].push(r)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ae);for(let i=0,n=t.length;i<n;++i)e[t[i]].forEach((e=>{e.draw(this.renderedContext_),e.clear()})),e[t[i]].length=0}}const xp={};class wp extends Ud{constructor(e,t,i,n,o,r,s){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=n,this.transformRotation_=n?pt(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=r,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,n){if(!this.image_)return;const o=Hn(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,c=o.length;u<c;u+=2){const e=o[u]-this.imageAnchorX_,t=o[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const i=e+this.imageAnchorX_,n=t+this.imageAnchorY_;jn(s,i,n,1,1,l,-i,-n),r.save(),r.transform.apply(r,s),r.translate(i,n),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,t,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=a)}drawText_(e,t,i,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Hn(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_;let s=this.textRotation_;for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);t<i;t+=n){const e=o[t]+this.textOffsetX_,i=o[t+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(r.save(),r.translate(e-this.textOffsetX_,i-this.textOffsetY_),r.rotate(s),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,e,i),this.textFillState_&&r.fillText(this.text_,e,i))}}moveToLineTo_(e,t,i,n,o){const r=this.context_,s=Hn(e,t,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(s[0],s[1]);let a=s.length;o&&(a-=2);for(let l=2;l<a;l+=2)r.lineTo(s[l],s[l+1]);return o&&r.closePath(),i}drawRings_(e,t,i,n){for(let o=0,r=i.length;o<r;++o)t=this.moveToLineTo_(e,t,i[o],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function(e,t,i){const n=e.getFlatCoordinates();if(!n)return null;const o=e.getStride();return Hn(n,0,n.length,o,t,i)}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],n=t[3]-t[1],o=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,n=t.length;i<n;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Yt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();let n=0;const o=e.getEnds(),r=e.getStride();t.beginPath();for(let e=0,s=o.length;e<s;++e)n=this.moveToLineTo_(i,n,o[e],r,!1);t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoints();this.drawText_(t,0,t.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let n=0;const o=e.getEndss(),r=e.getStride();t.beginPath();for(let e=0,s=o.length;e<s;++e){const t=o[e];n=this.drawRings_(i,n,t,r)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),de(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,n=e.textAlign?e.textAlign:Gl;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=n&&(i.textAlign=n,t.textAlign=n),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const t=e.getColor();this.fillState_={fillStyle:Al(t||Fl)}}else this.fillState_=null;if(t){const e=t.getColor(),i=t.getLineCap(),n=t.getLineDash(),o=t.getLineDashOffset(),r=t.getLineJoin(),s=t.getWidth(),a=t.getMiterLimit(),l=n||zl;this.strokeState_={lineCap:void 0!==i?i:Ol,lineDash:1===this.pixelRatio_?l:l.map((e=>e*this.pixelRatio_)),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==r?r:Nl,lineWidth:(void 0!==s?s:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:Al(e||Dl)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const r=e.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const e=t.getColor();this.textFillState_={fillStyle:Al(e||Fl)}}else this.textFillState_=null;const i=e.getStroke();if(i){const e=i.getColor(),t=i.getLineCap(),n=i.getLineDash(),o=i.getLineDashOffset(),r=i.getLineJoin(),s=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==t?t:Ol,lineDash:n||zl,lineDashOffset:o||0,lineJoin:void 0!==r?r:Nl,lineWidth:void 0!==s?s:1,miterLimit:void 0!==a?a:10,strokeStyle:Al(e||Dl)}}else this.textStrokeState_=null;const n=e.getFont(),o=e.getOffsetX(),r=e.getOffsetY(),s=e.getRotateWithView(),a=e.getRotation(),l=e.getScaleArray(),u=e.getText(),c=e.getTextAlign(),h=e.getTextBaseline();this.textState_={font:void 0!==n?n:ql,textAlign:void 0!==c?c:Gl,textBaseline:void 0!==h?h:jl},this.text_=void 0!==u?Array.isArray(u)?u.reduce(((e,t,i)=>e+(i%2?" ":t)),""):u:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}}const Sp=.5;function Cp(e,t,i,n,o,r,s,a,l){const u=l?Pn(o):o,c=tr(e[0]*Sp,e[1]*Sp);c.imageSmoothingEnabled=!1;const h=c.canvas,d=new wp(c,Sp,o,null,s,a,l?wn(null,l):null),p=i.length,f=Math.floor(16777215/p),g={};for(let v=1;v<=p;++v){const e=i[v-1],t=e.getStyleFunction()||n;if(!t)continue;let o=t(e,r);if(!o)continue;Array.isArray(o)||(o=[o]);const s=(v*f).toString(16).padStart(7,"#00000");for(let i=0,n=o.length;i<n;++i){const t=o[i],n=t.getGeometryFunction()(e);if(!n||!Yt(u,n.getExtent()))continue;const r=t.clone(),a=r.getFill();a&&a.setColor(s);const l=r.getStroke();l&&(l.setColor(s),l.setLineDash(null)),r.setText(void 0);const c=t.getImage();if(c){const e=c.getImageSize();if(!e)continue;const t=tr(e[0],e[1],void 0,{alpha:!1}),i=t.canvas;t.fillStyle=s,t.fillRect(0,0,i.width,i.height),r.setImage(new ru({img:i,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const h=r.getZIndex()||0;let d=g[h];d||(d={},g[h]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]);const p=n.getType();if("GeometryCollection"===p){const e=n.getGeometriesArrayRecursive();for(let t=0,i=e.length;t<i;++t){const i=e[t];d[i.getType().replace("Multi","")].push(i,r)}}else d[p.replace("Multi","")].push(n,r)}}const m=Object.keys(g).map(Number).sort(ae);for(let v=0,y=m.length;v<y;++v){const e=g[m[v]];for(const i in e){const n=e[i];for(let e=0,i=n.length;e<i;e+=2){d.setStyle(n[e+1]);for(let i=0,o=t.length;i<o;++i)d.setTransform(t[i]),d.drawGeometry(n[e])}}}return c.getImageData(0,0,h.width,h.height)}function Mp(e,t,i){const n=[];if(i){const o=Math.floor(Math.round(e[0])*Sp),r=Math.floor(Math.round(e[1])*Sp),s=4*(st(o,0,i.width-1)+st(r,0,i.height-1)*i.width),a=i.data[s],l=i.data[s+1],u=i.data[s+2]+256*(l+256*a),c=Math.floor(16777215/t.length);u&&u%c==0&&n.push(t[u/c-1])}return n}const Ep={Point:function(e,t,i,n,o,r){const s=i.getImage(),a=i.getText(),l=a&&a.getText(),u=r&&s&&l?{}:void 0;if(s){if(2!=s.getImageState())return;const r=e.getBuilder(i.getZIndex(),"Image");r.setImageStyle(s,u),r.drawPoint(t,n,o)}if(l){const r=e.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a,u),r.drawText(t,n,o)}},LineString:function(e,t,i,n,o){const r=i.getStroke();if(r){const s=e.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,r),s.drawLineString(t,n,o)}const s=i.getText();if(s&&s.getText()){const r=e.getBuilder(i.getZIndex(),"Text");r.setTextStyle(s),r.drawText(t,n,o)}},Polygon:function(e,t,i,n,o){const r=i.getFill(),s=i.getStroke();if(r||s){const a=e.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,s),a.drawPolygon(t,n,o)}const a=i.getText();if(a&&a.getText()){const r=e.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(t,n,o)}},MultiPoint:function(e,t,i,n,o,r){const s=i.getImage(),a=s&&0!==s.getOpacity(),l=i.getText(),u=l&&l.getText(),c=r&&a&&u?{}:void 0;if(a){if(2!=s.getImageState())return;const r=e.getBuilder(i.getZIndex(),"Image");r.setImageStyle(s,c),r.drawMultiPoint(t,n,o)}if(u){const r=e.getBuilder(i.getZIndex(),"Text");r.setTextStyle(l,c),r.drawText(t,n,o)}},MultiLineString:function(e,t,i,n,o){const r=i.getStroke();if(r){const s=e.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,r),s.drawMultiLineString(t,n,o)}const s=i.getText();if(s&&s.getText()){const r=e.getBuilder(i.getZIndex(),"Text");r.setTextStyle(s),r.drawText(t,n,o)}},MultiPolygon:function(e,t,i,n,o){const r=i.getFill(),s=i.getStroke();if(s||r){const a=e.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,s),a.drawMultiPolygon(t,n,o)}const a=i.getText();if(a&&a.getText()){const r=e.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(t,n,o)}},GeometryCollection:function(e,t,i,n,o,r){const s=t.getGeometriesArray();let a,l;for(a=0,l=s.length;a<l;++a)(0,Ep[s[a].getType()])(e,s[a],i,n,o,r)},Circle:function(e,t,i,n,o){const r=i.getFill(),s=i.getStroke();if(r||s){const a=e.getBuilder(i.getZIndex(),"Circle");a.setFillStrokeStyle(r,s),a.drawCircle(t,n,o)}const a=i.getText();if(a&&a.getText()){const o=e.getBuilder(i.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,n)}}};function kp(e,t){return parseInt(Pe(e),10)-parseInt(Pe(t),10)}function Tp(e,t){const i=Pp(e,t);return i*i}function Pp(e,t){return.5*e/t}function Lp(e,t,i,n,o,r,s,a){const l=[],u=i.getImage();if(u){let e=!0;const t=u.getImageState();2==t||3==t?e=!1:0==t&&u.load(),e&&l.push(u.ready())}const c=i.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then((()=>o(null))),function(e,t,i,n,o,r,s){const a=i.getGeometryFunction()(t);if(!a)return;const l=a.simplifyTransformed(n,o);i.getRenderer()?Ip(e,l,i,t,s):(0,Ep[l.getType()])(e,l,i,t,s,r)}(e,t,i,n,r,s,a),h}function Ip(e,t,i,n,o){if("GeometryCollection"!=t.getType())e.getBuilder(i.getZIndex(),"Default").drawCustom(t,n,i.getRenderer(),i.getHitDetectionRenderer(),o);else{const r=t.getGeometries();for(let t=0,s=r.length;t<s;++t)Ip(e,r[t],i,n,o)}}class Rp extends vc{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const n=t.extent,o=t.viewState,r=o.center,s=o.resolution,a=o.projection,l=o.rotation,u=a.getExtent(),c=this.getLayer().getSource(),h=this.getLayer().getDeclutter(),d=t.pixelRatio,p=t.viewHints,f=!(p[0]||p[1]),g=this.context,m=Math.round(Kt(n)/s*d),v=Math.round(Ht(n)/s*d),y=c.getWrapX()&&a.canWrapX(),_=y?Kt(u):null,b=y?Math.ceil((n[2]-u[2])/_)+1:1;let x=y?Math.floor((n[0]-u[0])/_):0;do{let n=this.getRenderTransform(r,s,0,d,m,v,x*_);t.declutter&&(n=n.slice(0)),e.execute(g,[g.canvas.width,g.canvas.height],n,l,f,void 0===i?vp:i?yp:_p,i?h&&t.declutter[h]:void 0)}while(++x<b)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=tr(this.context.canvas.width,this.context.canvas.height,gc))}resetDrawContext_(){if(1!==this.opacity_&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,or(this.context),gc.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const n=e.viewState;this.prepareContainer(e,t);const o=this.context,r=this.replayGroup_;let s=r&&!r.isEmpty();if(!s&&!this.getLayer().hasListener(us)&&!this.getLayer().hasListener(cs))return this.container;if(this.setDrawContext_(),this.preRender(o,e),n.projection,this.clipped_=!1,s&&i.extent&&this.clipping){const t=Ln(i.extent);s=Yt(t,e.extent),this.clipped_=s&&!Mt(t,e.extent),this.clipped_&&this.clipUnrotated(o,e,t)}return s&&this.renderWorlds(r,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise((t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=this.frameState.size.slice(),t=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,o=this.renderedProjection_,r=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],l=e[0]*Sp,u=e[1]*Sp;a.push(this.getRenderTransform(t,i,n,Sp,l,u,0).slice());const c=s.getSource(),h=o.getExtent();if(c.getWrapX()&&o.canWrapX()&&!Mt(h,r)){let e=r[0];const o=Kt(h);let s,c=0;for(;e<h[0];)--c,s=o*c,a.push(this.getRenderTransform(t,i,n,Sp,l,u,s).slice()),e+=o;for(c=0,e=r[2];e>h[2];)++c,s=o*c,a.push(this.getRenderTransform(t,i,n,Sp,l,u,s).slice()),e-=o}this.hitDetectionImageData_=Cp(e,a,this.renderedFeatures_,s.getStyleFunction(),r,i,n,Tp(i,this.renderedPixelRatio_),null)}t(Mp(e,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(e,t,i,n,o){if(!this.replayGroup_)return;const r=t.viewState.resolution,s=t.viewState.rotation,a=this.getLayer(),l={},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,r,s,i,(function(e,t,i){const r=Pe(e),s=l[r];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return l[r]=!0,o.splice(o.lastIndexOf(s),1),n(e,a,t);s.geometry=t,s.distanceSq=i}}else{if(0===i)return l[r]=!0,n(e,a,t);o.push(l[r]={feature:e,layer:a,geometry:t,distanceSq:i,callback:n})}}),u?t.declutter?.[u]?.all().map((e=>e.value)):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const n=e.viewHints[0],o=e.viewHints[1],r=t.getUpdateWhileAnimating(),s=t.getUpdateWhileInteracting();if(this.ready&&!r&&n||!s&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=e.extent,l=e.viewState,u=l.projection,c=l.resolution,h=e.pixelRatio,d=t.getRevision(),p=t.getRenderBuffer();let f=t.getRenderOrder();void 0===f&&(f=kp);const g=l.center.slice(),m=xt(a,p*c),v=m.slice(),y=[m.slice()],_=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Mt(_,e.extent)){const e=Kt(_),t=Math.max(Kt(m)/2,e);m[0]=_[0]-t,m[2]=_[2]+t,si(g,u);const i=Jt(y[0],u);i[0]<_[0]&&i[2]<_[2]?y.push([i[0]+e,i[1],i[2]+e,i[3]]):i[0]>_[0]&&i[2]>_[2]&&y.push([i[0]-e,i[1],i[2]-e,i[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==f&&this.renderedFrameDeclutter_===!!e.declutter&&Mt(this.wrappedRenderedExtent_,m))return de(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new op(Pp(c,h),m,c,h);for(let T=0,P=y.length;T<P;++T)i.loadFeatures(y[T],c,u);const x=Tp(c,h);let w=!0;const S=(e,i)=>{let n;const o=e.getStyleFunction()||t.getStyleFunction();if(o&&(n=o(e,c)),n){const t=this.renderFeature(e,x,n,b,void 0,this.getLayer().getDeclutter(),i);w=w&&!t}},C=Pn(m),M=i.getFeaturesInExtent(C);f&&M.sort(f);for(let T=0,P=M.length;T<P;++T)S(M[T],T);this.renderedFeatures_=M,this.ready=w;const E=b.finish(),k=new bp(m,c,h,i.getOverlaps(),E,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=f,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=v,this.wrappedRenderedExtent_=m,this.renderedCenter_=g,this.renderedProjection_=u,this.renderedPixelRatio_=h,this.replayGroup_=k,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,n,o,r,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,u=i.length;l<u;++l)a=Lp(n,e,i[l],t,this.boundHandleStyleImageChange_,o,r,s)||a;else a=Lp(n,e,i,t,this.boundHandleStyleImageChange_,o,r,s);return a}}class Ap extends Ou{constructor(e){super(e)}createRenderer(){return new Rp(this)}}var qp=class extends hr{constructor(e){e=e||{};var t=document.createElement("div");super({element:t,target:e.target});var i=this;if(this.minZoom=e.minZoom||0,this.maxZoom=e.maxZoom||18,this.rotation=e.rotation,e.target)this.panel_=e.target;else{t.classList.add("ol-overview","ol-unselectable","ol-control","ol-collapsed"),/top/.test(e.align)&&t.classList.add("ol-control-top"),/right/.test(e.align)&&t.classList.add("ol-control-right");var n=document.createElement("button");n.setAttribute("type","button"),n.addEventListener("touchstart",(function(e){i.toggleMap(),e.preventDefault()})),n.addEventListener("click",(function(){i.toggleMap()})),t.appendChild(n),this.panel_=document.createElement("div"),this.panel_.classList.add("panel"),t.appendChild(this.panel_)}this.ovmap_=new Vu({controls:new qe,interactions:new qe,target:this.panel_,view:new $o({zoom:2,center:[0,0],projection:e.projection}),layers:e.layers}),this.oview_=this.ovmap_.getView(),this.extentLayer=new Ap({name:"Cache extent",source:new wh,style:e.style||[new au({image:new iu({fill:new nu({color:"rgba(255,0,0, 1)"}),stroke:new su({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new su({width:5,color:"rgba(255,0,0,0.8)"})})]}),this.ovmap_.addLayer(this.extentLayer);var o=function(e,t){var i=3*e*Math.PI/2,n=-1/t,o=Math.cos(i)*Math.pow(2,n);return function(e){return e=1-Math.cos(e*Math.PI/2),1-Math.cos(i*e)*Math.pow(2,n*e)+o*e}};this.ovmap_.addInteraction(new Ir({handleDownEvent:function(t){return!1!==e.panAnimation?"elastic"==e.panAnimation||e.elasticPan?i.getMap().getView().animate({center:t.coordinate,easing:o(2,.3),duration:1e3}):i.getMap().getView().animate({center:t.coordinate,duration:300}):i.getMap().getView().setCenter(t.coordinate),!1}}))}getOverviewMap(){return this.ovmap_}toggleMap(){this.element.classList.toggle("ol-collapsed"),this.ovmap_.updateSize(),this.setView()}setPosition(e){/top/.test(e)?this.element.classList.add("ol-control-top"):this.element.classList.remove("ol-control-top"),/right/.test(e)?this.element.classList.add("ol-control-right"):this.element.classList.remove("ol-control-right")}setMap(e){if(this._listener)for(let t in this._listener)Ee(this._listener[t]);this._listener={},super.setMap(e),e&&(this._listener.map=e.on("change:view",function(){this._listener.view&&Ee(this._listener.view),e.getView()&&(this._listener.view=e.getView().on("propertychange",this.setView.bind(this)),this.setView())}.bind(this)),this._listener.view=e.getView().on("propertychange",this.setView.bind(this)),this.setView())}calcExtent_(e){var t=this.getMap();if(t){var i=this.extentLayer.getSource();i.clear();var n=new eh,o=t.getSize(),r=t.getView().getResolution(),s=t.getView().getRotation(),a=t.getView().getCenter();if(r){var l=r*o[0]/2,u=r*o[1]/2,c=this.oview_.getResolution();if(l/c>5||u/c>5){var h,d,p,f=Math.cos(s),g=Math.sin(s);for(e=[[-l,-u],[-l,u],[l,u],[l,-u]],h=0;h<4;++h)d=e[h][0],p=e[h][1],e[h][0]=a[0]+d*f-p*g,e[h][1]=a[1]+d*g+p*f;n.setGeometry(new zo([e]))}else n.setGeometry(new bo(a));i.addFeature(n)}}}setView(e){if(!e)return this.setView({key:"rotation"}),this.setView({key:"resolution"}),void this.setView({key:"center"});switch(e.key){case"rotation":this.rotation?this.oview_.setRotation(this.getMap().getView().getRotation()):this.oview_.getRotation()&&this.oview_.setRotation(0);break;case"center":var t=this.getMap().getView().calculateExtent(this.getMap().getSize()),i=this.oview_.calculateExtent(this.ovmap_.getSize());(t[0]<i[0]||t[1]<i[1]||t[2]>i[2]||t[3]>i[3])&&this.oview_.setCenter(this.getMap().getView().getCenter());break;case"resolution":var n=2*Math.round(this.oview_.getZoomForResolution(this.getMap().getView().getResolution())/2)-4;n=Math.min(this.maxZoom,Math.max(this.minZoom,n)),this.oview_.setZoom(n)}this.calcExtent_()}},Fp=function(e,t){var i=e.getView(),n=i.getProjection(),o=i.getCenter(),r=e.getPixelFromCoordinate(o);r[1]+=1;var s=e.getCoordinateFromPixel(r);return pi(Mn(o,n,"EPSG:4326"),Mn(s,n,"EPSG:4326"))*((t||96)/.0254)},Op=function(e,t,i){if(e&&t){var n=t;if("string"==typeof t&&((n=(t=t.replace(":","/").split("/"))[1])||(n=t[0]||""),n=n.replace(/[^\d]/g,""),n=parseInt(n),t[1])){var o=parseInt(t[0]);o&&(n/=o)}if(!n)return;var r=e.getView(),s=r.getProjection(),a=r.getCenter(),l=e.getPixelFromCoordinate(a);l[1]+=1;var u=e.getCoordinateFromPixel(l),c=pi(Mn(a,s,"EPSG:4326"),Mn(u,s,"EPSG:4326"));return c*=(i||96)/.0254,r.setResolution(r.getResolution()*n/c),n}},zp=class extends hr{constructor(e){void 0===(e=e||{}).typing&&(e.typing=300);var t=document.createElement("DIV"),i=(e.className||"")+" ol-scale";e.target||(i+=" ol-unselectable ol-control"),super({element:t,target:e.target}),this._input=document.createElement("INPUT"),this._input.value="-",t.setAttribute("class",i),!1===e.editable&&(this._input.readOnly=!0),t.appendChild(this._input),this._input.addEventListener("change",this.setScale.bind(this)),this.set("ppi",e.ppi||96)}setMap(e){this._listener&&Ee(this._listener),this._listener=null,super.setMap(e),e&&(this._listener=e.on("moveend",this.getScale.bind(this)))}getScale(){var e=this.getMap();if(e){var t=Fp(e,this.get("ppi"));return this._input.value=this.formatScale(t),t}}formatScale(e){return"1 / "+(e=e>100?100*Math.round(e/100):Math.round(e)).toLocaleString()}setScale(e){var t=this.getMap();t&&e&&(e.target&&(e=e.target.value),Op(t,e,this.get("ppi"))),this.getScale()}};function Np(e){const t=e.frameState,i=zn(e.inversePixelTransform.slice(),t.coordinateToPixelTransform);return new wp(e.context,t.pixelRatio,t.extent,i,t.viewState.rotation)}var Dp=class extends hr{constructor(e){super(e=e||{}),this.setStyle(e.style)}setMap(e){this.getCanvas(e);var t=this.getMap();if(this._listener&&(Ee(this._listener),this._listener=null),super.setMap(e),t)try{t.renderSync()}catch{}e&&(this._listener=e.on("postcompose",this._draw.bind(this)))}getCanvas(e){return function(e){if(!e)return null;var t=e.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return t||(e.getViewport().querySelector(".ol-layers")?((t=document.createElement("canvas")).className="ol-fixedoverlay",e.getViewport().querySelector(".ol-layers").after(t),e.on("precompose",(function(i){t.width=e.getSize()[0]*i.frameState.pixelRatio,t.height=e.getSize()[1]*i.frameState.pixelRatio}))):t=e.getViewport().querySelector("canvas")),t}(e)}getContext(e){var t=e.context;if(!t&&this.getMap()){var i=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];t=i?i.getContext("2d"):null}return t}setStyle(e){this._style=e||new au({})}getStyle(){return this._style}getStroke(){return this._style.getStroke()||this._style.setStroke(new su({color:"#000",width:1.25})),this._style.getStroke()}getFill(){return this._style.getFill()||this._style.setFill(new nu({color:"#fff"})),this._style.getFill()}getTextStroke(){var e=this._style.getText();return e||(e=new hu({})),e.getStroke()||e.setStroke(new su({color:"#fff",width:3})),e.getStroke()}getTextFill(){var e=this._style.getText();return e||(e=new hu({})),e.getFill()||e.setFill(new nu({color:"#fff"})),e.getFill()}getTextFont(){var e=this._style.getText();return e||(e=new hu({})),e.getFont()||e.setFont("12px sans-serif"),e.getFont()}_draw(){}},Gp=class extends Dp{constructor(e){var t=(e=e||{}).style||[new au({image:new tu({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new su({color:"#fff",width:3})})}),new au({image:new tu({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new su({color:"#000",width:1})})})];t instanceof Array||(t=[t]);var i=document.createElement("div");i.className="ol-target ol-unselectable ol-control",super({element:i,style:t,target:e.target}),this.composite=e.composite||"",this.setVisible(!1!==e.visible)}setStyle(e){e instanceof Array||(e=[e]),super.setStyle(e)}setVisible(e){if(this.set("visible",e),this.getMap())try{this.getMap().renderSync()}catch{}}getVisible(){return this.get("visible")}_draw(e){var t=this.getContext(e);if(t&&this.getMap()&&this.getVisible()){var i=e.frameState.pixelRatio;t.save(),t.scale(i,i);var n=t.canvas.width/2/i,o=t.canvas.height/2/i,r=new bo(this.getMap().getCoordinateFromPixel([n,o]));this.composite&&(t.globalCompositeOperation=this.composite);for(var s=0;s<this._style.length;s++){var a=this._style[s];if(a instanceof au){var l=e.vectorContext;l||(l=Np({inversePixelTransform:[1,0,0,1,0,0],context:t,frameState:{pixelRatio:i,extent:e.frameState.extent,coordinateToPixelTransform:e.frameState.coordinateToPixelTransform,viewState:e.frameState.viewState}})),l.setStyle(a),l.drawGeometry(r)}}t.restore()}}},jp=class extends Ir{constructor(e){super({handleDownEvent:function(e){return this._setPosition(e)},handleMoveEvent:function(e){return this._setPosition(e)}}),this.layers_=[],this.precomposeBind_=this.precompose_.bind(this),this.postcomposeBind_=this.postcompose_.bind(this),e=e||{},this.pos=!1,this.radius=e.radius||100,e.layers&&this.addLayer(e.layers),this.setActive(!0)}setMap(e){var t;if(this.getMap()){for(t=0;t<this.layers_.length;t++)this.layers_[t].un(["precompose","prerender"],this.precomposeBind_),this.layers_[t].un(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}if(super.setMap(e),e){for(t=0;t<this.layers_.length;t++)this.layers_[t].on(["precompose","prerender"],this.precomposeBind_),this.layers_[t].on(["postcompose","postrender"],this.postcomposeBind_);try{e.renderSync()}catch{}}}setRadius(e){if(this.radius=e,this.getMap())try{this.getMap().renderSync()}catch{}}getRadius(){return this.radius}addLayer(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t++){if(this.getMap()){e[t].on(["precompose","prerender"],this.precomposeBind_),e[t].on(["postcompose","postrender"],this.postcomposeBind_);try{this.getMap().renderSync()}catch{}}this.layers_.push(e[t])}}removeLayers(){this.removeLayer(this.layers_)}removeLayer(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t++){var i;for(i=0;i<this.layers_.length&&this.layers_[i]!==e[t];i++);i!=this.layers_.length&&this.getMap()&&(this.layers_[i].un(["precompose","prerender"],this.precomposeBind_),this.layers_[i].un(["postcompose","postrender"],this.postcomposeBind_),this.layers_.splice(i,1))}if(this.getMap())try{this.getMap().renderSync()}catch{}}setPosition(e){if(this.getMap()){this.pos=this.getMap().getPixelFromCoordinate(e);try{this.getMap().renderSync()}catch{}}}getPosition(){return this.pos?this.getMap().getCoordinateFromPixel(this.pos):null}setPixelPosition(e){if(this.pos=e,this.getMap())try{this.getMap().renderSync()}catch{}}getPixelPosition(){return this.pos}_setPosition(e){if(("pointermove"!==e.type||"onclick"!==this.get("action"))&&(e.pixel&&(this.pos=e.pixel),this.getMap()))try{this.getMap().renderSync()}catch{}}precompose_(e){if(this.getActive()){var t=e.context,i=e.frameState.pixelRatio;t.save(),t.beginPath();var n=[this.pos[0],this.pos[1]],o=this.radius,r=e.inversePixelTransform;r?o=(n=[n[0]*r[0]-n[1]*r[1]+r[4],-n[0]*r[2]+n[1]*r[3]+r[5]])[0]-((this.pos[0]-o)*r[0]-this.pos[1]*r[1]+r[4]):(n[0]*=i,n[1]*=i,o*=i),t.arc(n[0],n[1],o,0,2*Math.PI),t.clip()}}postcompose_(e){this.getActive()&&e.context.restore()}setActive(e){if(e!==this.getActive()&&(super.setActive(e),this.layers_)){var t;if(e)for(t=0;t<this.layers_.length;t++)this.layers_[t].on(["precompose","prerender"],this.precomposeBind_),this.layers_[t].on(["postcompose","postrender"],this.postcomposeBind_);else for(t=0;t<this.layers_.length;t++)this.layers_[t].un(["precompose","prerender"],this.precomposeBind_),this.layers_[t].un(["postcompose","postrender"],this.postcomposeBind_);if(this.getMap())try{this.getMap().renderSync()}catch{}}}};const Bp="element",Vp="map",$p="offset",Hp="position",Up="positioning";class Wp extends Ie{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Bp,this.handleElementChanged),this.addChangeListener(Vp,this.handleMapChanged),this.addChangeListener($p,this.handleOffsetChanged),this.addChangeListener(Hp,this.handlePositionChanged),this.addChangeListener(Up,this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(Bp)}getId(){return this.id}getMap(){return this.get(Vp)||null}getOffset(){return this.get($p)}getPosition(){return this.get(Hp)}getPositioning(){return this.get(Up)}handleElementChanged(){lr(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Ce(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=we(e,Xe,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Bp,e)}setMap(e){this.set(Vp,e)}setOffset(e){this.set($p,e)}setPosition(e){this.set(Hp,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Hp))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),o=this.getRect(n,[rr(n),sr(n)]),r=void 0===(e=e||{}).margin?20:e.margin;if(!Mt(i,o)){const n=o[0]-i[0],s=i[2]-o[2],a=o[1]-i[1],l=i[3]-o[3],u=[0,0];if(n<0?u[0]=n-r:s<0&&(u[0]=Math.abs(s)+r),a<0?u[1]=a-r:l<0&&(u[1]=Math.abs(l)+r),0!==u[0]||0!==u[1]){const i=t.getView().getCenterInternal(),n=t.getPixelFromCoordinateInternal(i);if(!n)return;const o=[n[0]+u[0],n[1]+u[1]],r=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(o),duration:r.duration,easing:r.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+t[0],o+t[1]]}setPositioning(e){this.set(Up,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let r="0%",s="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?r="-100%":("bottom-center"==o||"center-center"==o||"top-center"==o)&&(r="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?s="-100%":("center-left"==o||"center-center"==o||"center-right"==o)&&(s="-50%");const a=`translate(${r}, ${s}) translate(${e[0]+n[0]}px, ${e[1]+n[1]}px)`;this.rendered.transform_!=a&&(this.rendered.transform_=a,i.transform=a)}getOptions(){return this.options}}const Xp="units",Kp=[1,2,5],Yp=25.4/.28;class Zp extends hr{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=void 0!==e.className?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Xo,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Xp,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(Xp)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(Xp,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=e.center,i=e.projection,n=this.getUnits(),o="degrees"==n?"degrees":"m";let r=gn(i,e.resolution,t,o);const s=this.minWidth_*(this.dpi_||Yp)/Yp,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||Yp)/Yp:void 0;let l=s*r,u="";if("degrees"==n){const e=yi.degrees;l*=e,l<e/60?(u="",r*=3600):l<e?(u="",r*=60):u=""}else if("imperial"==n)l<.9144?(u="in",r/=.0254):l<1609.344?(u="ft",r/=.3048):(u="mi",r/=1609.344);else if("nautical"==n)r/=1852,u="NM";else if("metric"==n)l<1e-6?(u="nm",r*=1e9):l<.001?(u="m",r*=1e6):l<1?(u="mm",r*=1e3):l<1e3?u="m":(u="km",r/=1e3);else{if("us"!=n)throw new Error("Invalid units");l<.9144?(u="in",r*=39.37):l<1609.344?(u="ft",r/=.30480061):(u="mi",r/=1609.3472)}let c,h,d,p,f,g=3*Math.floor(Math.log(s*r)/Math.log(10)),m=0;for(;;){d=Math.floor(g/3);const e=Math.pow(10,d);if(c=Kp[(g%3+3)%3]*e,h=Math.round(c/r),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&h>=a){c=m,h=p,d=f;break}if(h>=s)break;m=c,p=h,f=d,++g}const v=this.scaleBar_?this.createScaleBar(h,c,u):c.toFixed(d<0?-d:0)+" "+u;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const n=this.getScaleForResolution(),o=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),r=this.scaleBarSteps_,s=e/r,a=[this.createMarker("absolute")];for(let l=0;l<r;++l){const n=l%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${n}" style="width: ${s}px;"></div>`+this.createMarker("relative")+(l%2==0||2===r?this.createStepText(l,e,!1,t,i):"")+"</div>")}return a.push(this.createStepText(r,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+o+"</div>":"")+a.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${"absolute"===e?3:-10}px;"></div>`}createStepText(e,t,i,n,o){const r=(0===e?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+o);return`<div class="ol-scale-step-text" style="margin-left: ${0===e?-3:t/this.scaleBarSteps_*-1}px;text-align: ${0===e?"left":"center"};min-width: ${0===e?0:t/this.scaleBarSteps_*2}px;left: ${i?t+"px":"unset"};">`+r+"</div>"}getScaleForResolution(){return gn(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||Yp)}render(e){const t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}}function Qp(e,t){const i=e.length;return t<0?e[t+i]:t>=i?e[t-i]:e[t]}function Jp(e,t){const i=e.length;let n=Math.floor(t);const o=t-n;n>=i?n-=i:n<0&&(n+=i);let r=n+1;r>=i&&(r-=i);const s=e[n],a=s[0],l=s[1],u=e[r];return[a+(u[0]-a)*o,l+(u[1]-l)*o]}const ef={index:-1,endIndex:NaN,closestTargetDistance:1/0};function tf(e,t,i){if(t instanceof dh)nf(e,t.getCoordinates(),!1,i);else if(t instanceof ph){const n=t.getCoordinates();for(let t=0,o=n.length;t<o;++t)nf(e,n[t],!1,i)}else if(t instanceof zo){const n=t.getCoordinates();for(let t=0,o=n.length;t<o;++t)nf(e,n[t],!0,i)}else if(t instanceof gh){const n=t.getCoordinates();for(let t=0,o=n.length;t<o;++t){const o=n[t];for(let t=0,n=o.length;t<n;++t)nf(e,o[t],!0,i)}}else if(t instanceof uh){const n=t.getGeometries();for(let t=0;t<n.length;++t)tf(e,n[t],i)}}function nf(e,t,i,n){const o=e[0],r=e[1];for(let s=0,a=t.length-1;s<a;++s){const e=af(o,r,t[s],t[s+1]);if(0===e.squaredDistance){const o=s+e.along;return void n.push({coordinates:t,ring:i,startIndex:o,endIndex:o})}}}function of(e,t){return lt(e[0],e[1],t[0],t[1])}function rf(e,t,i){let n,o;t<i?(n=t,o=i):(n=i,o=t);const r=Math.ceil(n),s=Math.floor(o);if(r>s)return of(Jp(e,n),Jp(e,o));let a=0;n<r&&(a+=of(Jp(e,n),Qp(e,r))),s<o&&(a+=of(Qp(e,s),Jp(e,o)));for(let l=r;l<s-1;++l)a+=of(Qp(e,l),Qp(e,l+1));return a}const sf={along:0,squaredDistance:0};function af(e,t,i,n){const o=i[0],r=i[1],s=n[0]-o,a=n[1]-r;let l=0,u=o,c=r;return(0!==s||0!==a)&&(l=st(((e-o)*s+(t-r)*a)/(s*s+a*a),0,1),u+=s*l,c+=a*l),sf.along=l,sf.squaredDistance=pt(lt(e,t,u,c),10),sf}const lf="drawstart";class uf extends be{constructor(e,t){super(e),this.feature=t}}class cf extends Ir{constructor(e){const t=e;t.stopDown||(t.stopDown=fe),super(t),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(e){switch(e){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+e)}}(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:pe,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const e=this.mode_;if("Circle"===e)i=(e,t,i)=>{const n=t||new lh([NaN,NaN]),o=Tn(e[0]),r=ni(o,Tn(e[e.length-1]));return n.setCenterAndRadius(o,Math.sqrt(r),this.geometryLayout_),n};else{let t;"Point"===e?t=bo:"LineString"===e?t=dh:"Polygon"===e&&(t=zo),i=(i,n,o)=>(n?"Polygon"===e?i[0].length?n.setCoordinates([i[0].concat([i[0][0]])],this.geometryLayout_):n.setCoordinates([],this.geometryLayout_):n.setCoordinates(i,this.geometryLayout_):n=new t(i,this.geometryLayout_),n)}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ap({source:new wh({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:hf(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Er,this.freehandCondition_,e.freehand?this.freehandCondition_=Sr:this.freehandCondition_=e.freehandCondition?e.freehandCondition:kr,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(mr,this.updateState_)}setTrace(e){let t;t=e?!0===e?Sr:e:Mr,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=Sr:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:kr}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===ee&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);let t=e.type===ze.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===ze.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===ze.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===ze.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===ze.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===ze.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===ze.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((()=>{this.handlePointerMove_(new Oe(ze.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active)return void this.deactivateTrace_();const t=this.getMap(),i=bt([t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(i);if(0===n.length)return;const o=function(e,t){const i=[];for(let n=0;n<t.length;++n)tf(e,t[n].getGeometry(),i);return i}(e.coordinate,n);o.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:o,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex;i===e.startIndex<=t?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const n=Math.ceil(e);let o=Math.floor(t);o===t&&(o-=1),i=o-n+1}else{const n=Math.floor(e);let o=Math.ceil(t);o===t&&(o+=1),i=n-o+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const n=[];if(t<i){const o=Math.ceil(t);let r=Math.floor(i);r===i&&(r-=1);for(let t=o;t<=r;++t)n.push(Qp(e.coordinates,t))}else{const o=Math.floor(t);let r=Math.ceil(i);r===i&&(r+=1);for(let t=o;t>=r;--t)n.push(Qp(e.coordinates,t))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active)return;if(-1===t.targetIndex&&oi(e.map.getPixelFromCoordinate(t.startCoord),e.pixel)<this.snapTolerance_)return;const i=function(e,t,i,n){const o=e[0],r=e[1];let s=1/0,a=-1,l=NaN;for(let h=0;h<t.targets.length;++h){const e=t.targets[h],i=e.coordinates;let n,u=1/0;for(let t=0;t<i.length-1;++t){const e=af(o,r,i[t],i[t+1]);e.squaredDistance<u&&(u=e.squaredDistance,n=t+e.along)}u<s&&(s=u,e.ring&&t.targetIndex===h&&(e.endIndex>e.startIndex?n<e.startIndex&&(n+=i.length):e.endIndex<e.startIndex&&n>e.startIndex&&(n-=i.length)),l=n,a=h)}const u=t.targets[a];let c=u.ring;if(t.targetIndex===a&&c){const e=Jp(u.coordinates,l);oi(i.getPixelFromCoordinate(e),i.getPixelFromCoordinate(t.startCoord))>n&&(c=!1)}if(c){const e=u.coordinates,t=e.length,i=u.startIndex,n=l;if(i<n){const o=rf(e,i,n);rf(e,i,n-t)<o&&(l-=t)}else{const o=rf(e,i,n);rf(e,i,n+t)<o&&(l+=t)}}return ef.index=a,ef.endIndex=l,ef.closestTargetDistance=s,ef}(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(-1!==t.targetIndex){const e=t.targets[t.targetIndex];this.removeTracedCoordinates_(e.startIndex,e.endIndex)}const e=t.targets[i.index];this.addTracedCoordinates_(e,e.startIndex,i.endIndex)}else{const e=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(e,i.endIndex)}t.targetIndex=i.index;const n=t.targets[t.targetIndex];n.endIndex=i.endIndex;const o=Jp(n.coordinates,n.endIndex),r=this.getMap().getPixelFromCoordinate(o);e.coordinate=o,e.pixel=[Math.round(r[0]),Math.round(r[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let t=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||"Point"===this.mode_)&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,n=t[0]-i[0],o=t[1]-i[1],r=n*n+o*o;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let n=!1,o=[this.finishCoordinate_];const r=this.mode_;if("Point"===r)i=!0;else if("Circle"===r)i=2===this.sketchCoords_.length;else if("LineString"===r)n=!t&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===r){const e=this.sketchCoords_;n=e[0].length>this.minPoints_,o=[e[0][0],e[0][e[0].length-2]],o=t?[e[0][0]]:[e[0][0],e[0][e[0].length-2]]}if(n){const t=this.getMap();for(let n=0,r=o.length;n<r;n++){const r=o[n],s=t.getPixelFromCoordinate(r),a=e[0]-s[0],l=e[1]-s[1],u=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(a*a+l*l)<=u,i){this.finishCoordinate_=r;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new eh(new bo(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new eh);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new dh(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=Qn(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new eh(new dh(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new eh,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new uf(lf,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),o=Qn(this.geometryLayout_);let r,s;for(;e.length<o;)e.push(0);"Point"===this.mode_?s=this.sketchCoords_:"Polygon"===this.mode_?(r=this.sketchCoords_[0],s=r[r.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(r=this.sketchCoords_,s=r[r.length-1]),s[0]=e[0],s[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,o;const r=this.mode_;return"LineString"===r||"Circle"===r?(this.finishCoordinate_=e.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():n=!0),o.push(e.slice()),this.geometryFunction_(o,t,i)):"Polygon"===r&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():n=!0),o.push(e.slice()),n&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let o=0;o<e;++o){let e;if("LineString"===n||"Circle"===n){if(e=this.sketchCoords_,e.splice(-2,1),e.length>=2){this.finishCoordinate_=e[e.length-2].slice();const t=this.finishCoordinate_.slice();e[e.length-1]=t,this.createOrUpdateSketchPoint_(t)}this.geometryFunction_(e,t,i),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===n){e=this.sketchCoords_[0],e.splice(-2,1);const n=this.sketchLine_.getGeometry();if(e.length>=2){const t=e[e.length-2].slice();e[e.length-1]=t,this.createOrUpdateSketchPoint_(t)}n.setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t,i)}if(1===e.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const i=e.getGeometry(),n=this.getMap().getView().getProjection();return"LineString"===this.mode_?(t.pop(),this.geometryFunction_(t,i,n)):"Polygon"===this.mode_&&(t[0].pop(),this.geometryFunction_(t,i,n),t=i.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new fh([t])):"MultiLineString"===this.type_?e.setGeometry(new ph([t])):"MultiPolygon"===this.type_&&e.setGeometry(new gh([t])),this.dispatchEvent(new uf("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new uf("drawabort",e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;let n;if(i&&this.startDrawing_(e[0]),"LineString"===t||"Circle"===t)n=this.sketchCoords_;else{if("Polygon"!==t)return;n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&n.shift(),n.pop();for(let r=0;r<e.length;r++)this.addToDrawing_(e[r]);const o=e[e.length-1];this.sketchFeature_=this.addToDrawing_(o),this.modifyDrawing_(o)}extend(e){const t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new eh(new bo(i)),this.updateSketchFeatures_(),this.dispatchEvent(new uf(lf,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function hf(){const e=function(){const e={},t=[255,255,255,1],i=[0,153,255,1];return e.Polygon=[new au({fill:new nu({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new au({stroke:new su({color:t,width:5})}),new au({stroke:new su({color:i,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new au({image:new iu({radius:6,fill:new nu({color:i}),stroke:new su({color:t,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}();return function(t,i){return e[t.getGeometry().getType()]}}var df,pf;(pf=df||(df={})).Point="Point",pf.LineString="LineString",pf.LinearRing="LinearRing",pf.Polygon="Polygon",pf.MultiPoint="MultiPoint",pf.MultiLineString="MultiLineString",pf.MultiPolygon="MultiPolygon",pf.GeometryCollection="GeometryCollection",pf.Circle="Circle",pf.Hand="Hand";let ff=class{xmap;drawLayer;draw;drawStyle;constructor(e){if(this.xmap=e,e&&!this.drawLayer){const t=new wh,i=new au({fill:new nu({color:"rgba(0, 0, 255, 0.1)"}),stroke:new su({color:"#0000ff",width:2}),image:new iu({radius:7,fill:new nu({color:"#00f"})})});this.drawLayer=new Ap({source:t,style:i}),e.map?.addLayer(this.drawLayer)}}setDrawVectorIndex=e=>{this.drawLayer.setZIndex(e)};setDrawLayer(e){if(e){const t=e;if(t)this.drawLayer=t;else{const t=e;this.xmap&&(this.drawLayer=this.xmap.map?.getLayers().item[t])}}}get DrawSource(){return this.drawLayer.getSource()}changeDrawType(e,t=void 0){this.clearInteraction(),t&&(this.drawStyle=t),this.drawStyle||(this.drawStyle=new au({fill:new nu({color:"rgba(0, 255, 255, 0.5)"}),stroke:new su({color:"#ff0000",width:2}),image:new iu({radius:7,fill:new nu({color:"#f00"})})})),this.draw=new cf({source:this.DrawSource,type:e===df.Hand?"LineString":e.toString(),style:this.drawStyle,freehand:e===df.Hand,snapTolerance:50}),this.xmap.map?.addInteraction(this.draw)}clearInteraction(){const e=this.xmap.map;e&&this.draw&&(e.removeInteraction(this.draw),e.getInteractions().getArray()?.forEach((t=>{t instanceof cf&&e.removeInteraction(t)})))}clearLastDraw(){this.draw&&(()=>{const e=this.DrawSource.getFeatures();0!==e.length&&this.DrawSource.removeFeature(e[e.length-1])})()}clearboard(){this.draw&&this.DrawSource.clear()}},gf=class{map;sketch;helpTooltipElement;helpTooltip;measureTooltipElement;measureTooltip;continuePolygonMsg="";continueLineMsg="";draw;source;measureLayer;doubleClickZoom;isInited=!1;tooltipArray=[];sphereOptions;constructor(e){this.map=e,this.init()}init(){const e=this.map.getView();this.sphereOptions={projection:e.getProjection()},this.createHelpTooltip(),this.createMeasureTooltip(),this.doubleClickZoom=this.map.getInteractions().getArray().find((e=>e instanceof _r)),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().addEventListener("mouseout",this.mouseoutHandler.bind(this)),this.source=new wh,this.measureLayer=new Ap({source:this.source,style:new au({fill:new nu({color:"rgba(255, 255, 255, 0.2)"}),stroke:new su({color:"#ffcc33",width:2}),image:new iu({radius:7,fill:new nu({color:"#ffcc33"})})})}),this.measureLayer.set("name","measurelayer"),this.map.addLayer(this.measureLayer),this.isInited=!0}mouseoutHandler(){this.helpTooltipElement.classList.add("hidden")}createHelpTooltip(){this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="myol-tooltip hidden",this.helpTooltip=new Wp({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),this.map.addOverlay(this.helpTooltip),this.tooltipArray.push(this.helpTooltipElement)}createMeasureTooltip(){this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="myol-tooltip myol-tooltip-measure",this.measureTooltip=new Wp({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.measureTooltip),this.tooltipArray.push(this.measureTooltipElement)}listener;formatLength(e){let t,i=gi(e,this.sphereOptions);return t=i>100?Math.round(i/1e3*100)/100+" km":Math.round(100*i)/100+" m",t}formatArea(e){let t,i=vi(e,this.sphereOptions);return t=i>1e4?Math.round(i/1e6*100)/100+" km<sup>2</sup>":Math.round(100*i)/100+" m<sup>2</sup>",t}geometryChanged(e){let t,i=e.target,n="";i instanceof zo?(n=this.formatArea(i),t=i.getInteriorPoint().getCoordinates()):i instanceof dh&&(n=this.formatLength(i),t=i.getLastCoordinate()),this.measureTooltipElement&&(this.measureTooltipElement.innerHTML=n),this.measureTooltip.setPosition(t)}pointerMoveHandler(e){if(e.dragging)return;let t="";if(this.sketch){let e=this.sketch.getGeometry();e instanceof zo?t=this.continuePolygonMsg:e instanceof dh&&(t=this.continueLineMsg)}this.helpTooltipElement.innerHTML=t,this.helpTooltip.setPosition(e.coordinate),this.helpTooltipElement.classList.remove("hidden")}addInteraction(e="area"){this.isInited||this.init(),this.map&&this.map.getInteractions().getArray()?.forEach((e=>{e instanceof cf&&this.map.removeInteraction(e)}));const t="area"==e?"Polygon":"LineString";this.draw=new cf({source:this.source,type:t,style:new au({fill:new nu({color:"rgba(255, 255, 255, 0.2)"}),stroke:new su({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new iu({radius:5,stroke:new su({color:"rgba(0, 0, 0, 0.7)"}),fill:new nu({color:"rgba(255, 255, 255, 0.2)"})})})}),this.map.addInteraction(this.draw),this.draw.on("drawstart",this.drawStartHander.bind(this)),this.draw.on("drawend",this.drawEndHander.bind(this))}drawStartHander(e){this.sketch=e.feature,this.listener=this.sketch.getGeometry().on("change",this.geometryChanged.bind(this))}drawEndHander(){this.measureTooltipElement.className="myol-tooltip myol-tooltip-static",this.measureTooltip.setOffset([0,-7]),this.sketch=null,this.measureTooltipElement=null,this.createMeasureTooltip(),Ee(this.listener)}removeInteraction(){this.draw&&this.map.removeInteraction(this.draw),this.map.getInteractions().getArray()?.forEach((e=>{e instanceof cf&&this.map.removeInteraction(e)})),this.helpTooltipElement&&this.helpTooltipElement.parentNode?.removeChild(this.helpTooltipElement),this.measureTooltipElement&&this.measureTooltipElement.parentNode?.removeChild(this.measureTooltipElement),this.tooltipArray.forEach((e=>{e.parentNode?.removeChild(e)})),this.tooltipArray=[],this.helpTooltip&&this.map.removeOverlay(this.helpTooltip),this.measureTooltip&&this.map.removeOverlay(this.measureTooltip),this.measureLayer&&this.map.removeLayer(this.measureLayer),this.map.getLayers()?.forEach((e=>{"measurelayer"===e.get("name")&&this.map.removeLayer(e)})),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.getViewport().removeEventListener("mouseout",this.mouseoutHandler.bind(this)),this.doubleClickZoom&&this.map.addInteraction(this.doubleClickZoom),this.isInited=!1}};function mf(e,t){return Dn(e.inversePixelTransform,t.slice(0))}var vf;!function(e){e[e.RollHorizonl=0]="RollHorizonl",e[e.RollVertical=1]="RollVertical",e[e.FishEye=2]="FishEye"}(vf||(vf={}));let yf=class{container;xmap;swipeLayer;SwipeType=vf.RollHorizonl;circleRadius=50;swipeValueX=0;swipeValueY=0;divHeight=0;divWidth=0;line=void 0;preRenderKey;postRenderKey;IsLoaded=!1;constructor(e,t){this.container=e,this.xmap=t,e&&(e.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.line=document.createElement("div"),e.insertBefore(this.line,e.firstElementChild),this.divWidth=e.clientWidth,this.divHeight=e.clientHeight)}rollSwipeLayerbak(e){const t=e.offsetX,i=e.offsetY;if(this.changeSwipe(t,i),this.line)switch(this.SwipeType){case vf.RollHorizonl:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","horizonaldivider"),this.line.setAttribute("class","horizonaldivider");const e=t;this.line.style.height=this.divHeight+"px",this.line.style.width="4px",this.line.style.left=e+"px",this.line.style.removeProperty("top");break;case vf.RollVertical:this.line.removeAttribute("className"),this.line.removeAttribute("class"),this.line.setAttribute("className","verticaldivider"),this.line.setAttribute("class","verticaldivider");const n=i;this.line.style.height="4px",this.line.style.removeProperty("left"),this.line.style.width=this.divWidth+"px",this.line.style.top=n+"px"}}setSwipeLayer(e){if(this.swipeLayer&&(Ee(this.postRenderKey),Ee(this.preRenderKey)),"number"==typeof e){const t=e;if(this.xmap){const e=this.xmap.map?.getLayers();this.swipeLayer=e?.getArray()[t]}}else{const t=e;this.swipeLayer=t}this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0)}preRenderHandler(e){const t=this.xmap.map?.getSize();if(void 0===t)return;const i=e.context;switch(i.save(),i.beginPath(),this.SwipeType){case vf.RollHorizonl:const n=this.swipeValueX,o=mf(e,[n,0]),r=mf(e,[t[0],0]),s=mf(e,[n,t[1]]),a=mf(e,t);i.moveTo(o[0],o[1]),i.lineTo(s[0],s[1]),i.lineTo(a[0],a[1]),i.lineTo(r[0],r[1]),i.closePath();break;case vf.RollVertical:const l=this.swipeValueY,u=mf(e,[0,l]),c=mf(e,[t[0],l]),h=mf(e,[0,t[1]]),d=mf(e,t);i.moveTo(u[0],u[1]),i.lineTo(h[0],h[1]),i.lineTo(d[0],d[1]),i.lineTo(c[0],c[1]),i.closePath();break;case vf.FishEye:const p=this.swipeValueX,f=this.swipeValueY;i.arc(p,f,this.circleRadius,0,2*Math.PI,!1),i.stroke()}i.clip()}postRenderHandler(e){e.context.restore()}changeSwipeType(e,t=50){this.SwipeType=e,e===vf.FishEye?(t>0&&(this.circleRadius=t),this.line.style.display="none"):(this.line.style.display="unset",this.line.style.removeProperty("display"))}changeSwipe(e,t){this.swipeValueX=e,this.swipeValueY=t,this.xmap&&this.xmap.map?.render()}load(){this.swipeLayer&&(this.preRenderKey=this.swipeLayer.on("prerender",this.preRenderHandler.bind(this)),this.postRenderKey=this.swipeLayer.on("postrender",this.postRenderHandler.bind(this)),this.IsLoaded=!0),this.container&&(this.container.addEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.insertBefore(this.line,this.container.firstElementChild))}unload(){this.swipeLayer&&(Ee(this.postRenderKey),Ee(this.preRenderKey),this.IsLoaded=!1),this.container&&(this.container.removeEventListener("mousemove",this.rollSwipeLayerbak.bind(this)),this.container.contains(this.line)&&this.container.removeChild(this.line))}};var _f=class extends Ie{constructor(e){e=e||{},super();var t,i=this.input=e.input;i||(i=this.input=document.createElement("input"),e.type&&i.setAttribute("type",e.type),void 0!==e.min&&i.setAttribute("min",e.min),void 0!==e.max&&i.setAttribute("max",e.max),void 0!==e.step&&i.setAttribute("step",e.step),e.parent&&e.parent.appendChild(i)),e.disabled&&(i.disabled=!0),void 0!==e.checked&&(i.checked=!!e.checked),void 0!==e.val&&(i.value=e.val),e.hidden&&i.classList.add("ol-input-hidden"),i.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),i.addEventListener("focusout",function(){this.element&&(t&&clearTimeout(t),t=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(e,t){var i=function(i){this.moving=!0,this.element.classList.add("ol-moving");var n=function(i){"pointerup"===i.type&&(document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",n),document.removeEventListener("pointercancel",n),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),i.target===e&&t(i),i.stopPropagation(),i.preventDefault()}.bind(this);document.addEventListener("pointermove",n,!1),document.addEventListener("pointerup",n,!1),document.addEventListener("pointercancel",n,!1),i.stopPropagation(),i.preventDefault()}.bind(this);e.addEventListener("mousedown",i,!1),e.addEventListener("touchstart",i,!1)}setValue(e){void 0!==e&&(this.input.value=e),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},bf=class extends _f{constructor(e){super(e=e||{});var t=this.element=document.createElement("label");e.html instanceof Element?t.appendChild(e.html):void 0!==e.html&&(t.innerHTML=e.html),t.className=("ol-ext-check ol-ext-checkbox "+(e.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),t.appendChild(document.createElement("span")),e.after&&t.appendChild(document.createTextNode(e.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},xf=class extends bf{constructor(e){super(e=e||{}),this.element.className=("ol-ext-toggle-switch "+(e.className||"")).trim()}},wf=class extends bf{constructor(e){super(e=e||{}),this.element.className=("ol-ext-check ol-ext-radio "+(e.className||"")).trim()}},Sf={create:function(e,t){var i;if(t=t||{},"TEXT"===e)i=document.createTextNode(t.html||""),t.parent&&t.parent.appendChild(i);else for(var n in i=document.createElement(e.toLowerCase()),/button/i.test(e)&&i.setAttribute("type","button"),t)switch(n){case"className":t.className&&t.className.trim&&i.setAttribute("class",t.className.trim());break;case"text":i.innerText=t.text;break;case"html":t.html instanceof Element?i.appendChild(t.html):void 0!==t.html&&(i.innerHTML=t.html);break;case"parent":t.parent&&t.parent.appendChild(i);break;case"options":if(/select/i.test(e))for(var o in t.options)Sf.create("OPTION",{html:o,value:t.options[o],parent:i});break;case"style":Sf.setStyle(i,t.style);break;case"change":case"click":Sf.addListener(i,n,t[n]);break;case"on":for(var r in t.on)Sf.addListener(i,r,t.on[r]);break;case"checked":i.checked=!!t.checked;break;default:i.setAttribute(n,t[n])}return i},createSwitch:function(e){var t=Sf.create("INPUT",{type:"checkbox",on:e.on,click:e.click,change:e.change,parent:e.parent}),i=Object.assign({input:t},e||{});return new xf(i),t},createCheck:function(e){var t=Sf.create("INPUT",{name:e.name,type:"radio"===e.type?"radio":"checkbox",on:e.on,parent:e.parent}),i=Object.assign({input:t},e||{});return"radio"===e.type?new wf(i):new bf(i),t},setHTML:function(e,t){t instanceof Element?e.appendChild(t):void 0!==t&&(e.innerHTML=t)},appendText:function(e,t){e.appendChild(document.createTextNode(t||""))},addListener:function(e,t,i,n){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.addEventListener(t,i,n)}))},removeListener:function(e,t,i){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.removeEventListener(t,i)}))},show:function(e){e.style.display=""},hide:function(e){e.style.display="none"},hidden:function(e){return"none"===Sf.getStyle(e,"display")},toggle:function(e){e.style.display="none"===e.style.display?"":"none"},setStyle:function(e,t){for(var i in t)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"==typeof t[i]?e.style[i]=t[i]+"px":e.style[i]=t[i];break;default:e.style[i]=t[i]}},getStyle:function(e,t){var i,n,o,r,s=(e.ownerDocument||document).defaultView;if(s&&s.getComputedStyle)t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),i=s.getComputedStyle(e,null).getPropertyValue(t);else if(e.currentStyle&&(t=t.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})),i=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(i)))return n=i,o=e.style.left,r=e.runtimeStyle.left,e.runtimeStyle.left=e.currentStyle.left,e.style.left=n||0,n=e.style.pixelLeft+"px",e.style.left=o,e.runtimeStyle.left=r,n;return/px$/.test(i)?parseInt(i):i},outerHeight:function(e){return e.offsetHeight+Sf.getStyle(e,"marginBottom")},outerWidth:function(e){return e.offsetWidth+Sf.getStyle(e,"marginLeft")},offsetRect:function(e){var t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}},getFixedOffset:function(e){var t={left:0,top:0},i=function(e){if(!e)return t;if("absolute"===Sf.getStyle(e,"position")&&"none"!==Sf.getStyle(e,"transform")){var n=e.getBoundingClientRect();return t.left+=n.left,t.top+=n.top,t}return i(e.offsetParent)};return i(e.offsetParent)},positionRect:function(e,t){var i=0,n=0,o=function(r){if(r)return i+=r.offsetLeft,n+=r.offsetTop,o(r.offsetParent);var s={top:e.offsetTop+n,left:e.offsetLeft+i};return t&&(s.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s.bottom=s.top+e.offsetHeight,s.right=s.top+e.offsetWidth,s};return o(e.offsetParent)},scrollDiv:function(e,t){var i,n,o,r,s,a=!1,l=0,u=0,c="function"==typeof(t=t||{}).onmove?t.onmove:function(){},h=t.vertical?"screenY":"screenX",d=t.vertical?"scrollTop":"scrollLeft",p=!1,f=0,g=function(){s&&(f++,setTimeout(m))},m=function(){if(s){if(--f)return;var t=e.clientHeight,i=e.scrollHeight;n=t/i,s.style.height=100*n+"%",s.style.top=e.scrollTop/i*100+"%",r.style.height=t+"px",t>i-.5?r.classList.add("ol-100pc"):r.classList.remove("ol-100pc")}},v=function(t){t.target.classList.contains("ol-noscroll")||(p=!1,a=t[h],u=new Date,e.classList.add("ol-move"),t.preventDefault(),window.addEventListener("pointermove",y),Sf.addListener(window,["pointerup","pointercancel"],x))},y=function(t){if(!1!==a){var r=(o?-1/n:1)*(a-t[h]);p=p||Math.round(r),e[d]+=r,(i=new Date)-u&&(l=(l+r/(i-u))/2),a=t[h],u=i,r&&c(!0)}else p=!0},_=function(t){var i=t>0?Math.min(100,t/2):Math.max(-100,t/2);t-=i,e[d]+=i,-1<t&&t<1?(p?setTimeout((function(){e.classList.remove("ol-move")})):e.classList.remove("ol-move"),p=!1,c(!1)):setTimeout((function(){_(t)}),40)};if(t.vertical&&t.minibar){var b=function(i){e.removeEventListener("pointermove",b),e.parentNode.classList.add("ol-miniscroll"),s=Sf.create("DIV"),r=Sf.create("DIV",{className:"ol-scroll",html:s}),e.parentNode.insertBefore(r,e),s.addEventListener("pointerdown",(function(e){o=!0,v(e)})),t.mousewheel&&(Sf.addListener(r,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){w(e)})),Sf.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){w(e)}))),e.parentNode.addEventListener("pointerenter",g),window.addEventListener("resize",g),!1!==i&&g()};e.parentNode?b(!1):e.addEventListener("pointermove",b),e.addEventListener("scroll",(function(){g()}))}e.style["touch-action"]="none",e.style.overflow="hidden",e.classList.add("ol-scrolldiv"),Sf.addListener(e,["pointerdown"],(function(e){o=!1,v(e)})),e.addEventListener("click",(function(t){e.classList.contains("ol-move")&&(t.preventDefault(),t.stopPropagation())}),!0);var x=function(i){(u=new Date-u)>100||o?l=0:u>0&&(l=((l||0)+(a-i[h])/u)/2),_(!1===t.animate?0:200*l),a=!1,l=0,u=0,e.classList.contains("ol-move")?e.classList.remove("ol-hasClick"):(e.classList.add("ol-hasClick"),setTimeout((function(){e.classList.remove("ol-hasClick")}),500)),o=!1,window.removeEventListener("pointermove",y),Sf.removeListener(window,["pointerup","pointercancel"],x)},w=function(t){var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));return e.classList.add("ol-move"),e[d]-=30*i,e.classList.remove("ol-move"),!1};return t.mousewheel&&Sf.addListener(e,["mousewheel","DOMMouseScroll","onmousewheel"],w),{refresh:g}},dispatchEvent:function(e,t){var i;try{i=new CustomEvent(e)}catch{(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,{})}t.dispatchEvent(i)},setCursor:function(e,t){e instanceof Vu&&(e=e.getTargetElement()),!("ontouchstart"in window)&&e instanceof Element&&(e.style.cursor=t)}},Cf=class extends hr{constructor(e){(e=e||{}).fullscreen&&(e.target=document.body);var t=e.target===document.body,i=Sf.create(t?"DIALOG":"DIV",{className:((e.className||"")+(e.zoom?" ol-zoom":"")+" ol-ext-dialog").trim()});super({element:i,target:e.target}),t&&(i.addEventListener("close",function(){this.hide()}.bind(this)),document.addEventListener("keydown",function(e){"Escape"===e.key&&!this.get("closeBox")&&this.isOpen()&&e.preventDefault()}.bind(this)),i.addEventListener("cancel",function(){setTimeout(function(){this.dispatchEvent("cancel")}.bind(this))}.bind(this))),i.addEventListener("click",function(e){this.get("hideOnBack")&&e.target===i&&this.close(),this.get("hideOnClick")&&this.close()}.bind(this));var n=Sf.create("FORM",{on:{submit:this._onButton("submit")},parent:i});Sf.create("H2",{parent:n}),Sf.create("DIV",{className:"ol-closebox",click:this._onButton("cancel"),parent:n}),Sf.create("DIV",{className:"ol-content",parent:n}),this._progress=Sf.create("DIV",{style:{display:"none"},parent:n});var o=Sf.create("DIV",{className:"ol-progress-bar",parent:this._progress});this._progressbar=Sf.create("DIV",{parent:o}),this._progressMessage=Sf.create("DIV",{className:"ol-progress-message",parent:this._progress}),Sf.create("DIV",{className:"ol-buttons",parent:n}),this.set("closeBox",!1!==e.closeBox),this.set("zoom",!!e.zoom),this.set("hideOnClick",!!e.hideOnClick),this.set("hideOnBack",!!e.hideOnBack),this.set("className",i.className),this.set("closeOnSubmit",e.closeOnSubmit),this.set("buttons",e.buttons),this.setContent(e)}show(e){e&&((e instanceof Element||"string"==typeof e)&&(e={content:e}),this.setContent(e)),this.element.showModal&&this.element.showModal(),this.element.classList.add("ol-visible"),this.element.setAttribute("aria-hidden",!1);var t=this.element.querySelector('input[type="text"],input[type="search"],input[type="number"]');if(t&&setTimeout((function(){t.focus()})),this.dispatchEvent({type:"show"}),e){if(e.autoclose){var i=setTimeout(function(){this.hide()}.bind(this),e.autoclose);this.once("hide",(function(){clearTimeout(i)}))}if(e.hideOnBack){var n=this.get("hideOnBack");this.set("hideOnBack",!0),this.once("hide",function(){this.set("hideOnBack",n)}.bind(this))}}}open(){this.show()}setContentMessage(e){if(void 0!==e){var t=this.getContentElement();e instanceof Element&&Sf.setHTML(t,""),Sf.setHTML(t,e||"")}}setTitle(e){var t=this.element.querySelector("form");t.querySelector("h2").innerText=e||"",e?t.classList.add("ol-title"):t.classList.remove("ol-title")}setContent(e){if(e){this.element.className=this.get("className"),"string"==typeof e&&(e={content:e}),e=e||{},this.setProgress(!1),e.max&&this.setProgress(0,e.max),void 0!==e.progress&&this.setProgress(e.progress),this.get("zoom")?this.element.classList.add("ol-zoom"):this.element.classList.remove("ol-zoom"),e.className&&e.className.split(" ").forEach(function(e){this.element.classList.add(e)}.bind(this));var t=this.element.querySelector("form");void 0!==e.content&&(e.content instanceof Element&&Sf.setHTML(t.querySelector(".ol-content"),""),Sf.setHTML(t.querySelector(".ol-content"),e.content||"")),this.setTitle(e.title),e.closeBox||this.get("closeBox")&&!1!==e.closeBox?t.classList.add("ol-closebox"):t.classList.remove("ol-closebox");var i=this.element.querySelector(".ol-buttons");i.innerHTML="";var n=e.buttons||this.get("buttons");if(n)for(var o in t.classList.add("ol-button"),n)Sf.create("INPUT",{type:"submit"===o?"submit":"button",value:n[o],click:this._onButton(o,e.onButton),parent:i});else t.classList.remove("ol-button")}}getContentElement(){return this.element.querySelector("form .ol-content")}setProgress(e,t,i){if(!1!==e){if(t>0?this.set("max",Number(t)):t=this.get("max"),t){var n=Math.round(e/t*100);Sf.setStyle(this._progress,{display:""}),this._progressbar.className=n?"":"notransition",Sf.setStyle(this._progressbar,{width:n+"%"})}else Sf.setStyle(this._progress,{display:"none"});this._progressMessage.innerHTML="",Sf.setHTML(this._progressMessage,i||"")}else Sf.setStyle(this._progress,{display:"none"})}_onButton(e,t){return function(i){i.preventDefault(),("submit"!==e||!1!==this.get("closeOnSubmit"))&&this.hide();var n=this.getInputs();setTimeout(function(){this.dispatchEvent({type:"button",button:e,inputs:n}),"function"==typeof t&&t(e,n)}.bind(this))}.bind(this)}getInputs(){var e={};return["input","textarea","select"].forEach(function(t){this.element.querySelectorAll("form "+t).forEach((function(t){t.className&&t.className.split(" ").forEach((function(i){e[i]=t}))}))}.bind(this)),e}hide(){document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),this.element.close&&this.element.close(),this.isOpen()&&(this.element.classList.remove("ol-visible"),this.element.setAttribute("aria-hidden",!0),setTimeout(function(){this.dispatchEvent({type:"hide"})}.bind(this)))}close(){this.hide()}isOpen(){return this.element.classList.contains("ol-visible")}},Mf=class extends Dp{constructor(e){e=e||{};var t=document.createElement("div");if(super({element:t,target:e.target}),e.target)t.className=e.className||"ol-legend";else{t.className=(e.className||"ol-legend")+" ol-unselectable ol-control"+(!1===e.collapsible?" ol-uncollapsible":" ol-collapsed");var i=document.createElement("button");i.setAttribute("type","button"),i.addEventListener("click",function(){this.toggle()}.bind(this)),t.appendChild(i),(i=document.createElement("button")).setAttribute("type","button"),i.className="ol-closebox",i.addEventListener("click",function(){this.toggle()}.bind(this)),t.appendChild(i)}this._legend=e.legend,this._legend.getCanvas().className="ol-legendImg",t.appendChild(this._legend.getCanvas()),t.appendChild(this._legend.getListElement()),!1!==e.collapsible&&!1===e.collapsed&&this.show(),this._legend.on("select",function(e){this.dispatchEvent(e)}.bind(this)),this._legend.on("refresh",function(){if(this._onCanvas&&this.getMap())try{this.getMap().renderSync()}catch{}}.bind(this)),this._legend.on("items",function(t){t.nb?(this.element.classList.remove("ol-empty"),this.element.title=e.title||"legend"):(this.element.classList.add("ol-empty"),this.element.title=e.emptyTitle||"no legend"),this.dispatchEvent(t)}.bind(this))}getLegend(){return this._legend}setCanvas(e){if(this._onCanvas=e,this.element.style.visibility=e?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch{}}onCanvas(){return!!this._onCanvas}_draw(e){if(this._onCanvas&&!this.element.classList.contains("ol-collapsed")){var t=this._legend.getCanvas(),i=this.getContext(e),n=i.canvas.height-t.height;i.save(),i.rect(0,n,t.width,t.height);var o="#fff";this._legend.getTextStyle().getBackgroundFill()&&(o=Bs(this._legend.getTextStyle().getBackgroundFill().getColor())),i.fillStyle=i.strokeStyle=o,i.lineWidth=10,i.lineJoin="round",i.stroke(),i.clearRect(0,n,t.width,t.height),i.fill(),i.drawImage(t,0,n),i.restore()}}show(){if(this.element.classList.contains("ol-collapsed")&&(this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!1}),this.getMap()))try{this.getMap().renderSync()}catch{}}hide(){if(!this.element.classList.contains("ol-collapsed")&&(this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!0}),this.getMap()))try{this.getMap().renderSync()}catch{}}collapse(e){!1===e?this.show():this.hide()}isCollapsed(){return this.element.classList.contains("ol-collapsed")}toggle(){if(this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:this.element.classList.contains("ol-collapsed")}),this.getMap())try{this.getMap().renderSync()}catch{}}},Ef=class extends hr{constructor(e){e=e||{};var t=Sf.create("DIV",{className:e.className||"ol-print"});super({element:t,target:e.target}),e.target||(t.classList.add("ol-unselectable","ol-control"),Sf.create("BUTTON",{type:"button",title:e.title||"Print",click:function(){this.print()}.bind(this),parent:t})),this.set("immediate",e.immediate),this.set("imageType",e.imageType||"image/jpeg"),this.set("quality",e.quality||.8),this.set("orientation",e.orientation)}toClipboard(e,t){try{e.canvas.toBlob((function(e){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))]),"function"==typeof t&&t(!0)}catch{"function"==typeof t&&t(!1)}}))}catch{"function"==typeof t&&t(!1)}}copyMap(e,t){this.once("print",function(e){this.toClipboard(e,t)}.bind(this)),this.print(e)}_getCanvas(e,t,i){var n;if(e.context)i=e.context.canvas;else{if(i)n=i.getContext("2d");else{i=document.createElement("canvas");var o=this.getMap().getSize();i.width=o[0],i.height=o[1],n=i.getContext("2d"),/jp.*g$/.test(t)&&(n.fillStyle=this.get("bgColor")||"white",n.fillRect(0,0,i.width,i.height))}this.getMap().getViewport().querySelectorAll(".ol-layers canvas, canvas.ol-fixedoverlay").forEach(function(e){if(e.width){if(n.save(),"0"===e.parentNode.style.opacity)return;n.globalAlpha=parseFloat(e.parentNode.style.opacity)||1,n.globalCompositeOperation=Sf.getStyle(e.parentNode,"mix-blend-mode"),n.filter=Sf.getStyle(e.parentNode,"filter");var t=Sf.getStyle(e,"transform")||Sf.getStyle(e,"-webkit-transform");/^matrix/.test(t)?((t=t.replace(/^matrix\(|\)$/g,"").split(",")).forEach((function(e,i){t[i]=parseFloat(e)})),n.transform(t[0],t[1],t[2],t[3],t[4],t[5]),n.drawImage(e,0,0)):n.drawImage(e,0,0,Sf.getStyle(e,"width"),Sf.getStyle(e,"height")),n.restore()}}.bind(this))}return i}fastPrint(e,t){e=e||{},this._ol6?requestAnimationFrame(function(){t(this._getCanvas({},e.imageType,e.canvas))}.bind(this)):(this.getMap().once("postcompose",function(i){i.context||(this._ol6=!0),t(this._getCanvas(i,e.imageType,e.canvas))}.bind(this)),this.getMap().render())}print(e){var t=(e=e||{}).imageType||this.get("imageType"),i=e.quality||this.get("quality");if(this.getMap()){if("silent"!==e.immediate&&this.dispatchEvent(Object.assign({type:"printing"},e)),!e.immediate)return void setTimeout(function(){(e=Object.assign({},e)).immediate="silent",this.print(e)}.bind(this),200);this.getMap().once(this.get("immediate")?"postcompose":"rendercomplete",function(n){var o,r,s,a,l=this._getCanvas(n,t),u=e.size||[210,297],c=e.format||"a4",h=e.orient||this.get("orientation"),d="number"==typeof e.margin?e.margin:10;if(l){"landscape"!==h&&"portrait"!==h&&(h=l.width>l.height?"landscape":"portrait"),"landscape"===h&&(u=[u[1],u[0]]);var p=Math.min((u[0]-2*d)/l.width,(u[1]-2*d)/l.height);o=p*l.width,r=p*l.height,s=[(u[0]-o)/2,(u[1]-r)/2]}try{a=l?l.toDataURL(t,i):null}catch{return void this.dispatchEvent({type:"error",canvas:l})}var f=Object.assign({type:"print",print:{format:c,orientation:h,unit:"mm",size:u,position:s,imageWidth:o,imageHeight:r},image:a,imageType:t,quality:i,canvas:l},e);this.dispatchEvent(f)}.bind(this)),this.getMap().render()}}},kf=class extends Dp{constructor(e){e=e||{},super({element:Sf.create("DIV",{className:(e.className||"")+" ol-control-title ol-unselectable",style:{display:"block",visibility:"hidden"}}),style:e.style}),this.setTitle(e.title||""),this.setVisible(!1!==e.visible),this.element.style.font=this.getTextFont()}setStyle(e){super.setStyle(e),this.element&&(this.element.style.font=this.getTextFont()),this.getMap()&&this.getMap().render()}setTitle(e){if(this.element.textContent=e,this.set("title",e),this.getMap())try{this.getMap().renderSync()}catch{}}getTitle(){return this.get("title")}setVisible(e){if(this.element.style.display=e?"block":"none",this.getMap())try{this.getMap().renderSync()}catch{}}getVisible(){return"none"!==this.element.style.display}_draw(e){if(this.getVisible()){var t=this.getContext(e);if(t){var i=e.frameState.pixelRatio;t.save(),t.scale(i,i);var n=this.element.getBoundingClientRect(),o=this.getMap().getViewport().getBoundingClientRect(),r=this.getMap().getSize()[0]/o.width;t.translate(Math.round((n.left-o.left)*r),Math.round((n.top-o.top)*r));var s=this.element.clientHeight,a=this.element.clientWidth,l=a/2;t.beginPath(),t.fillStyle=Bs(this.getFill().getColor()),t.rect(0,0,a,s),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=Bs(this.getTextFill().getColor()),t.strokeStyle=Bs(this.getTextStroke().getColor()),t.lineWidth=this.getTextStroke().getWidth(),t.textAlign="center",t.textBaseline="middle",t.font=this.getTextFont(),t.lineJoin="round",t.lineWidth&&t.strokeText(this.getTitle(),l,s/2),t.fillText(this.getTitle(),l,s/2),t.closePath(),t.restore()}}}},Tf=class extends Dp{constructor(e){e=e||{};var t=document.createElement("div");t.className="ol-control ol-compassctrl ol-unselectable ol-hidden"+(e.className?" "+e.className:""),t.style.position="absolute",t.style.visibility="hidden";var i=e.style instanceof su?new au({stroke:e.style}):e.style;e.style||(i=new au({stroke:new su({width:0})})),super({element:t,style:i}),this.set("rotateVithView",!1!==e.rotateWithView),this.setVisible(!1!==e.visible),this.setImage(e.image||e.src)}setImage(e){if(e instanceof Image)this.img_=e,this.img_.onload=function(){if(this.getMap())try{this.getMap().renderSync()}catch{}}.bind(this);else if("string"==typeof e)switch(e){case"compact":this.img_=this.compactCompass_(this.element.clientWidth,this.getStroke().getColor());break;case"default":this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor());break;default:this.img_=new Image,this.img_.onload=function(){if(this.getMap())try{this.getMap().renderSync()}catch{}}.bind(this),this.img_.src=e}else this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor())}compactCompass_(e,t){var i=document.createElement("canvas"),n=i.getContext("2d"),o=(e=i.width=i.height=e||150)/2;return n.translate(o,o),n.fillStyle=t||"#963",n.lineWidth=5,n.lineJoin=n.lineCap="round",n.font="bold "+.4*o+"px sans-serif",n.textBaseline="bottom",n.textAlign="center",n.strokeStyle="#fff",n.globalAlpha=.75,n.strokeText("N",0,-o/2),n.globalAlpha=1,n.fillText("N",0,-o/2),n.beginPath(),n.moveTo(0,o/4),n.lineTo(o/3,o/2),n.lineTo(0,-o/2),n.lineTo(-o/3,o/2),n.lineTo(0,o/4),n.lineWidth=12,n.fillStyle="#fff",n.globalAlpha=.75,n.fill(),n.stroke(),n.globalAlpha=1,n.fillStyle=n.strokeStyle=t||"#963",n.lineWidth=5,n.beginPath(),n.moveTo(0,o/4),n.lineTo(0,-o/2),n.lineTo(o/3,o/2),n.lineTo(0,o/4),n.fill(),n.stroke(),n.beginPath(),n.moveTo(0,o/4),n.lineTo(0,-o/2),n.lineTo(-o/3,o/2),n.lineTo(0,o/4),n.stroke(),i}defaultCompass_(e,t){var i=document.createElement("canvas"),n=i.getContext("2d"),o=(e=i.width=i.height=e||150)/2,r=.22*o;function s(e,i){n.fillStyle=t||"#963",n.beginPath(),n.moveTo(0,0),n.lineTo(e,0),n.lineTo(i,i),n.moveTo(0,0),n.lineTo(-e,0),n.lineTo(-i,-i),n.moveTo(0,0),n.lineTo(0,e),n.lineTo(-i,i),n.moveTo(0,0),n.lineTo(0,-e),n.lineTo(i,-i),n.moveTo(0,0),n.fill(),n.stroke()}function a(e,t){n.globalCompositeOperation="destination-out",n.fillStyle="#fff",n.beginPath(),n.moveTo(0,0),n.lineTo(e,0),n.lineTo(t,-t),n.moveTo(0,0),n.lineTo(-e,0),n.lineTo(-t,t),n.moveTo(0,0),n.lineTo(0,e),n.lineTo(t,t),n.moveTo(0,0),n.lineTo(0,-e),n.lineTo(-t,-t),n.moveTo(0,0),n.fill(),n.globalCompositeOperation="source-over",n.beginPath(),n.moveTo(0,0),n.lineTo(e,0),n.lineTo(t,-t),n.moveTo(0,0),n.lineTo(-e,0),n.lineTo(-t,t),n.moveTo(0,0),n.lineTo(0,e),n.lineTo(t,t),n.moveTo(0,0),n.lineTo(0,-e),n.lineTo(-t,-t),n.moveTo(0,0),n.stroke()}return n.translate(o,o),n.strokeStyle=t||"#963",n.lineWidth=1.5,n.beginPath(),n.arc(0,0,.41*e,0,2*Math.PI),n.arc(0,0,.44*e,0,2*Math.PI),n.stroke(),n.rotate(Math.PI/4),s(.9*o,.8*r),a(.9*o,.8*r),n.rotate(-Math.PI/4),s(o,r),a(o,r),i}getVisible(){return"block"===Sf.getStyle(this.element,"display")}setVisible(e){e?this.element.classList.add("ol-visible"):this.element.classList.remove("ol-visible"),this.getMap()&&this.getMap().render()}_draw(e){var t=this.getContext(e);if(t&&this.getVisible()){var i,n=t.canvas,o=[];for(i=0;i<8;i++)o[i]=[Math.cos(Math.PI*i/8),Math.sin(Math.PI*i/8)];var r=e.frameState.pixelRatio;t.save(),t.scale(r,r);var s=this.element.clientWidth,a=this.element.clientHeight,l={left:this.element.offsetLeft,top:this.element.offsetTop},u=this.img_,c=e.frameState.viewState.rotation;if(t.beginPath(),t.translate(l.left+s/2,l.top+a/2),this.get("rotateVithView")&&t.rotate(c),this.getStroke().getWidth()){t.beginPath(),t.strokeStyle=this.getStroke().getColor(),t.lineWidth=this.getStroke().getWidth();var h=Math.max(n.width,n.height);for(i=0;i<8;i++)t.moveTo(-o[i][0]*h,-o[i][1]*h),t.lineTo(o[i][0]*h,o[i][1]*h);t.stroke()}u.width&&t.drawImage(u,-s/2,-a/2,s,a),t.closePath(),t.restore()}}},Pf=class extends hr{constructor(e){e=e||{};var t=Sf.create("DIV",{className:(e.className||"ol-print")+" ol-unselectable ol-control"});super({element:t}),this._lang=e.lang||"en",e.target||Sf.create("BUTTON",{type:"button",title:e.title||"Print",click:function(){this.print()}.bind(this),parent:t}),e.openWindow&&this.on("print",(function(e){e.canvas&&window.open().document.write('<img src="'+e.canvas.toDataURL()+'"/>')})),e.target=Sf.create("DIV");var i=this._printCtrl=new Ef(e);i.on(["print","error","printing"],function(e){this._printing(e)}.bind(this)),this._compass=new Tf({src:e.northImage||"compact",visible:!1,className:"olext-print-compass",style:new su({color:"#333",width:0})});var n=this._printDialog=new Cf({target:e.targetDialog||document.body,closeBox:!0,className:"ol-ext-print-dialog"}),o=n.getContentElement();this._input={};var r=Sf.create("DIV",{className:"ol-print-param",parent:o});this._pages=[Sf.create("DIV",{className:"ol-page"})];var s=Sf.create("DIV",{className:"ol-map",parent:this._pages[0]});Sf.create("DIV",{html:this._pages[0],className:"ol-print-map",parent:o}),Sf.create("H2",{html:this.i18n("title"),parent:r});var a=Sf.create("UL",{parent:r}),l=Sf.create("LI",{className:"ol-orientation",parent:a});this._input.orientation={list:l};var u,c=Sf.create("LABEL",{className:"portrait",parent:l});this._input.orientation.portrait=Sf.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"portrait",checked:!0,on:{change:function(e){this.setOrientation(e.target.value)}.bind(this)},parent:c}),Sf.create("SPAN",{html:this.i18n("portrait"),parent:c}),c=Sf.create("LABEL",{className:"landscape",parent:l}),this._input.orientation.landscape=Sf.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"landscape",on:{change:function(e){this.setOrientation(e.target.value)}.bind(this)},parent:c}),Sf.create("SPAN",{html:this.i18n("landscape"),parent:c}),l=Sf.create("LI",{html:Sf.create("LABEL",{html:this.i18n("size")}),className:"ol-size",parent:a});var h=this._input.size=Sf.create("SELECT",{on:{change:function(){this.setSize(h.value||C)}.bind(this)},parent:l});for(u in this.paperSize)Sf.create("OPTION",{html:u+(this.paperSize[u]?" - "+this.paperSize[u][0]+"x"+this.paperSize[u][1]+" mm":this.i18n("custom")),value:u,parent:h});l=Sf.create("LI",{html:Sf.create("LABEL",{html:this.i18n("margin")}),className:"ol-margin",parent:a});var d=this._input.margin=Sf.create("SELECT",{on:{change:function(){this.setMargin(d.value)}.bind(this)},parent:l});for(u in this.marginSize)Sf.create("OPTION",{html:this.i18n(u)+" - "+this.marginSize[u]+" mm",value:this.marginSize[u],parent:d});l=Sf.create("LI",{html:Sf.create("LABEL",{html:this.i18n("scale")}),className:"ol-scale",parent:a});var p=this._input.scale=Sf.create("SELECT",{on:{change:function(){this.setScale(parseInt(p.value))}.bind(this)},parent:l});Object.keys(this.scales).forEach(function(e){Sf.create("OPTION",{html:this.scales[e],value:e,parent:p})}.bind(this)),l=Sf.create("LI",{className:"ol-legend",parent:a});var f=Sf.createSwitch({html:this.i18n("legend"),checked:!1,on:{change:function(){E.legend.control.setCanvas(f.checked)}.bind(this)},parent:l});l=Sf.create("LI",{className:"ol-print-north",parent:a});var g=this._input.north=Sf.createSwitch({html:this.i18n("north"),checked:"checked",on:{change:function(){g.checked?this._compass.element.classList.add("ol-print-compass"):this._compass.element.classList.remove("ol-print-compass"),this.getMap().render()}.bind(this)},parent:l});l=Sf.create("LI",{className:"ol-print-title",parent:a});var m=Sf.createSwitch({html:this.i18n("mapTitle"),checked:!1,on:{change:function(e){E.title.control.setVisible(e.target.checked)}.bind(this)},parent:l}),v=Sf.create("INPUT",{type:"text",placeholder:this.i18n("mapTitle"),on:{keydown:function(e){13===e.keyCode&&e.preventDefault()},keyup:function(){E.title.control.setTitle(v.value)},change:function(){E.title.control.setTitle(v.value)}.bind(this)},parent:l}),y=Sf.create("DIV",{className:"ol-user-param",parent:r});l=Sf.create("LI",{className:"ol-saveas",parent:a}),Sf.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l});var _=Sf.create("SELECT",{on:{change:function(){var e=_.value;if(_.value="",!this.formats[e].clipboard||!this._copyMap(e)){var t="string"==typeof this.getSize()?this.getSize():null,n=Object.assign({format:t,size:t?this.paperSize[t]:null,orient:this.getOrientation(),margin:this.getMargin()},this.formats[e]);i.print(n)}}.bind(this)},parent:l});Sf.create("OPTION",{html:this.i18n("saveas"),style:{display:"none"},value:"",parent:_}),this.formats.forEach(function(t,i){if(t.pdf){if(!1===e.pdf)return}else if(t.clipboard){if(!1===e.copy)return}else if(!1===e.save)return;Sf.create("OPTION",{html:this.i18n(t.title),value:i,parent:_})}.bind(this)),1===_.querySelectorAll("option").length&&(_.style.display="none"),l=Sf.create("LI",{className:"ol-savelegend",parent:a});var b=Sf.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l}),x=Sf.create("SELECT",{on:{change:function(){var e=E.legend.control.getLegend().getCanvas(),t=document.createElement("canvas");t.width=e.width,t.height=e.height;var i,n=t.getContext("2d");if(n.fillStyle="#fff",n.fillRect(0,0,t.width,t.height),n.drawImage(e,0,0),this.formats[x.value].clipboard)t.toBlob((function(e){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))]),b.classList.add("visible"),setTimeout((function(){b.classList.remove("visible")}),1e3)}catch{}}),"image/png");else try{i=t.toDataURL(this.formats[x.value].imageType,this.formats[x.value].quality);var o="string"==typeof this.getSize()?this.getSize():"A4",r=t.width/96*25.4,s=t.height/96*25.4,a=this.paperSize[o];"landscape"===this.getOrientation()&&(a=[a[1],a[0]]);var l=[(a[0]-r)/2,(a[1]-s)/2];this.dispatchEvent({type:"print",print:{legend:!0,format:o,orientation:this.getOrientation(),unit:"mm",size:this.paperSize[o],position:l,imageWidth:r,imageHeight:s},image:i,imageType:this.formats[x.value].imageType,pdf:this.formats[x.value].pdf,quality:this.formats[x.value].quality,canvas:t})}catch{}x.value=""}.bind(this)},parent:l});Sf.create("OPTION",{html:this.i18n("saveLegend"),style:{display:"none"},value:"",parent:x}),this.formats.forEach(function(e,t){Sf.create("OPTION",{html:this.i18n(e.title),value:t,parent:x})}.bind(this));var w=Sf.create("DIV",{className:"ol-ext-buttons",parent:r});Sf.create("BUTTON",{html:this.i18n("printBt"),type:"submit",click:function(e){e.preventDefault(),window.print()},parent:w}),Sf.create("BUTTON",{html:this.i18n("cancel"),type:"button",click:function(){n.hide()},parent:w}),Sf.create("DIV",{html:this.i18n("errorMsg"),className:"ol-error",parent:r});var S,C,M,E={};n.on("show",function(){this.dispatchEvent({type:"show",userElement:y,dialog:this._printDialog,page:this.getPage()});var e=this.getMap();e&&(document.body.classList.add("ol-print-document"),S=e.getTargetElement(),C=e.getSize(),"string"==typeof this.getSize()?this.setSize(this.getSize()):this.setSize(C),e.setTarget(s),M&&Ee(M),M=e.on("moveend",function(){this.setScale(Fp(e))}.bind(this)),this.setScale(Fp(e)),E={},this.getMap().getControls().forEach(function(e){e instanceof Mf&&(E.legend={control:e}),e instanceof kf&&(E.title={control:e}),e instanceof Tf&&(E.compass?e.element.classList.remove("ol-print-compass"):(this._input.north.checked?e.element.classList.add("ol-print-compass"):e.element.classList.remove("ol-print-compass"),this._compass=e,E.compass={control:e}))}.bind(this)),E.title?(m.checked=E.title.isVisible=E.title.control.getVisible(),v.value=E.title.control.getTitle(),m.parentNode.parentNode.classList.remove("hidden")):m.parentNode.parentNode.classList.add("hidden"),E.legend?(E.legend.ison=E.legend.control.onCanvas(),E.legend.collapsed=E.legend.control.isCollapsed(),E.legend.control.collapse(!1),x.parentNode.classList.remove("hidden"),f.parentNode.parentNode.classList.remove("hidden"),f.checked=!E.legend.collapsed,E.legend.control.setCanvas(!E.legend.collapsed)):(x.parentNode.classList.add("hidden"),f.parentNode.parentNode.classList.add("hidden")))}.bind(this)),n.on("hide",function(){document.body.classList.remove("ol-print-document"),S&&(this.getMap().setTarget(S),S=null,M&&Ee(M),E.title&&E.title.control.setVisible(E.title.isVisible),E.legend&&(E.legend.control.setCanvas(E.legend.ison),E.legend.control.collapse(E.legend.collapsed)),this.dispatchEvent({type:"hide"}))}.bind(this)),window.addEventListener("resize",function(){this.setSize()}.bind(this)),e.saveAs&&this.on("print",(function(t){t.pdf||t.canvas.toBlob((function(i){var n=(t.print.legend?"legend.":"map.")+t.imageType.replace("image/","");e.saveAs(i,n)}),t.imageType,t.quality)})),e.jsPDF&&this.on("print",(function(t){if(t.pdf){var i=new e.jsPDF({orientation:t.print.orientation,unit:t.print.unit,format:t.print.size});i.addImage(t.image,"JPEG",t.print.position[0],t.print.position[0],t.print.imageWidth,t.print.imageHeight),i.save(t.print.legend?"legend.pdf":"map.pdf")}}))}static addLang(e,t){Pf.prototype._labels[e]=t}isOpen(){return this._printDialog.isOpen()}i18n(e){var t=this._labels.en[e]||e;return this._labels[this._lang]&&this._labels[this._lang][e]&&(t=this._labels[this._lang][e]),t}getOrientation(){return this._orientation||"portrait"}setOrientation(e){this._orientation="landscape"===e?"landscape":"portrait",this._printDialog.element.dataset.orientation=this._orientation,this._input.orientation[this._orientation].checked=!0,this.setSize()}getMargin(){return this._margin||0}setMargin(e){this._margin=e,this._input.margin.value=e,this.setSize()}getSize(){return this._size}setSize(e){if(this._printDialog.getContentElement().dataset.status="",e?this._size=e:e=this._size,e){if("string"==typeof e){for(var t in this.paperSize)t&&new RegExp(t,"i").test(e)&&(e=t);this.paperSize[e]||(e=this._size="A4"),this._input.size.value=e,e=[Math.trunc(96*this.paperSize[e][0]/25.4),Math.trunc(96*this.paperSize[e][1]/25.4)],"landscape"===this.getOrientation()&&(e=[e[1],e[0]]),this.getPage().classList.remove("margin")}else this._input.size.value="",this.getPage().classList.add("margin");var i=this.getPage(),n=i.parentNode.getBoundingClientRect(),o=(n.width-40)/e[0],r=(n.height-40)/e[1],s=Math.min(o,r,1);i.style.width=e[0]+"px",i.style.height=e[1]+"px",i.style["-webkit-transform"]=i.style.transform="translate(-50%,-50%) scale("+s+")";var a=Math.round(5/s);i.style["-webkit-box-shadow"]=i.style["box-shadow"]=a+"px "+a+"px "+a+"px rgba(0,0,0,.6)",i.style.padding=96*this.getMargin()/25.4+"px",this.getMap()&&this.getMap().updateSize(),this.dispatchEvent({type:"dialog:refresh"})}}_printing(e){this._printDialog.getContentElement().dataset.status=e.type,e.clipboard||this.dispatchEvent(e)}_copyMap(e){var t=this._printDialog.element.querySelector(".ol-clipboard-copy");return this._printCtrl.copyMap(this.formats[e],(function(e){e&&(t.classList.add("visible"),setTimeout((function(){t.classList.remove("visible")}),1e3))})),!0}getContentElement(){return this._printDialog.getContentElement()}getUserElement(){return this._printDialog.getContentElement().querySelector(".ol-user-param")}getPage(){return this._pages[0]}setMap(e){this.getMap()&&(this.getMap().removeControl(this._compass),this.getMap().removeControl(this._printCtrl),this.getMap().removeControl(this._printDialog)),super.setMap(e),this.getMap()&&(this.getMap().addControl(this._compass),this.getMap().addControl(this._printCtrl),this.getMap().addControl(this._printDialog))}setScale(e){Op(this.getMap(),e),this._input.scale.value=" "+100*Math.round(e/100)}getScale(){return Fp(this.getMap())}print(e){(e=e||{}).size&&this.setSize(e.size),e.scale&&this.setScale(e.scale),e.orientation&&this.setOrientation(e.orientation),e.margin&&this.setMargin(e.margin),this._printDialog.show()}getPrintControl(){return this._printCtrl}};Pf.prototype._labels={en:{title:"Print",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",size:"Page size",custom:"screen size",margin:"Margin",scale:"Scale",legend:"Legend",north:"North arrow",mapTitle:"Map title",saveas:"Save as...",saveLegend:"Save legend...",copied:" Copied to clipboard",errorMsg:"Can't save map canvas...",printBt:"Print...",clipboardFormat:"copy to clipboard...",jpegFormat:"save as jpeg",pngFormat:"save as png",pdfFormat:"save as pdf",none:"none",small:"small",large:"large",cancel:"cancel"},fr:{title:"Imprimer",orientation:"Orientation",portrait:"Portrait",landscape:"Paysage",size:"Taille du papier",custom:"taille cran",margin:"Marges",scale:"Echelle",legend:"Lgende",north:"Flche du nord",mapTitle:"Titre de la carte",saveas:"Enregistrer sous...",saveLegend:"Enregistrer la lgende...",copied:" Carte copie",errorMsg:"Impossible d'enregistrer la carte",printBt:"Imprimer",clipboardFormat:"copier dans le presse-papier...",jpegFormat:"enregistrer un jpeg",pngFormat:"enregistrer un png",pdfFormat:"enregistrer un pdf",none:"aucune",small:"petites",large:"larges",cancel:"annuler"},de:{title:"Drucken",orientation:"Ausrichtung",portrait:"Hochformat",landscape:"Querformat",size:"Papierformat",custom:"Bildschirmgre",margin:"Rand",scale:"Mastab",legend:"Legende",north:"Nordpfeil",mapTitle:"Kartentitel",saveas:"Speichern als...",saveLegend:"Legende speichern...",copied:" In die Zwischenablage kopiert",errorMsg:"Kann Karte nicht speichern...",printBt:"Drucken...",clipboardFormat:"in die Zwischenablage kopieren...",jpegFormat:"speichern als jpeg",pngFormat:"speichern als png",pdfFormat:"speichern als pdf",none:"kein",small:"klein",large:"gro",cancel:"abbrechen"},zh:{title:"",orientation:"",portrait:"",landscape:"",size:"",custom:"",margin:"",scale:"",legend:"",north:"",mapTitle:"",saveas:"...",saveLegend:"...",copied:" ",errorMsg:"...",printBt:"...",cancel:""},it:{title:"Stampa",orientation:"Orientamento",portrait:"Verticale",landscape:"Orizzontale",size:"Formato pagina",custom:"Dimensione schermo",margin:"Margini",scale:"Scala",legend:"Legenda",north:"Freccia nord",mapTitle:"Titolo della mappa",saveas:"Salva con nome...",saveLegend:"Salva legenda...",copied:" Copiato negli appunti",errorMsg:"Impossibile salvare la mappa",printBt:"Stampa",clipboardFormat:"Copia negli appunti...",jpegFormat:"salva come jpeg",pngFormat:"salva come png",pdfFormat:"salva come pdf",none:"nessuno",small:"piccolo",large:"grande",cancel:"annulla"},"pt-br":{title:"Imprimir",orientation:"Orientao",portrait:"Retrato",landscape:"Paisagem",size:"Tamanho da pgina",custom:"Tamanho da tela",margin:"Margem",scale:"Escala",legend:"Legenda",north:"Seta do norte",mapTitle:"Ttulo do mapa",saveas:"Salvar como...",saveLegend:"Salvar legenda...",copied:" Copiado para a rea de transferncia",errorMsg:"No foi possvel salvar o mapa...",printBt:"Imprimir...",clipboardFormat:"Copiar para a rea de transferncia...",jpegFormat:"Salvar como JPEG",pngFormat:"Salvar como PNG",pdfFormat:"Salvar como PDF",none:"Nenhum",small:"Pequeno",large:"Grande",cancel:"Cancelar"}},Pf.prototype.paperSize={"":null,A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],"US Letter":[215.9,279.4],A5:[148,210],B4:[257,364],B5:[182,257]},Pf.prototype.marginSize={none:0,small:5,large:10},Pf.prototype.formats=[{title:"clipboardFormat",imageType:"image/png",clipboard:!0},{title:"jpegFormat",imageType:"image/jpeg",quality:.8},{title:"pngFormat",imageType:"image/png",quality:.8},{title:"pdfFormat",imageType:"image/jpeg",pdf:!0}],Pf.prototype.scales={" 5000":"1/5.000"," 10000":"1/10.000"," 25000":"1/25.000"," 50000":"1/50.000"," 100000":"1/100.000"," 250000":"1/250.000"," 1000000":"1/1.000.000"};const Lf=Object.prototype.toString;function If(e,t){return Lf.call(e)===`[object ${t}]`}const Rf=e=>null!=e&&null!==e&&If(e,"Object");function Af(e){return If(e,"Number")}function qf(e){return If(e,"String")}function Ff(e,t){var i=t-e,n=Math.random();return e+Math.round(n*i)}function Of(){let e=[];const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var i=0;i<36;i++){const n=Math.floor(16*Math.random());e[i]=t.substring(n,n+1)}e[14]="4";const n=3&Number(e[19])|8;return e[19]=t.substring(n,n+1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}function zf(e=window.document.documentElement){let t=e;var i=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(i)i.call(t);else if(typeof window.ActiveXObject<"u"){var n=new window.ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}function Nf(){const e=new Event("resize");window.dispatchEvent(e)}function Df(e={},t={}){let i;for(i in t)e[i]=Rf(e[i])?Df(e[i],t[i]):e[i]=t[i];return e}function Gf(e,t){const i=window.URL||window.webkitURL||window,n=new Blob([e]),o=document.createElement("a");o.href=i.createObjectURL(n),o.download=t,o.click(),i.revokeObjectURL(o.href)}let jf=class{map;printDialogControl=void 0;printControl=void 0;constructor(e){this.map=e}get PrintDialogControl(){return this.printDialogControl}addPrintDialogControl(e={}){this.removePrintDialogControl();let t={copy:!1,pdf:!1};return t=Df(t,e),this.printDialogControl=new Pf(t),this.map.addControl(this.printDialogControl),this.printDialogControl.setSize("A4"),this.printDialogControl.on(["print","error"],(function(e){e.image&&e.canvas.toBlob((function(t){Gf(t,"map."+e.imageType.replace("image/",""))}),e.imageType,e.quality)})),this.printDialogControl}removePrintDialogControl(){this.printDialogControl&&(this.map.removeControl(this.printDialogControl),this.printDialogControl=void 0)}addPrintControl(){return this.printControl=new Ef,this.printControl&&this.map.addControl(this.printControl),this.printControl.on(["print","error"],(function(e){e.image&&e.canvas.toBlob((function(e){Gf(e,"map.png")}),"image/png")})),this.printControl}removePrintControl(){this.printControl&&(this.map.removeControl(this.printControl),this.printControl=void 0)}dispose(){this.removePrintDialogControl(),this.removePrintControl()}},Bf=class{xmap;map;mapEventBus;target;swipeLayerIndex=0;MapLayers=new Map;LayerItemList=new Array;constructor(e,t){this.xmap=e;const i=e.map;i&&(this.map=i,this.mapEventBus=Hd,this.initEventListener()),this.target=t}get SwipeLayerIndex(){return this.swipeLayerIndex}get Layers(){return this.MapLayers}changeSwipeLayerByID(e){if(this.MapLayers.has(e)){const t=this.MapLayers.keys(),i=Array.from(t).findIndex((t=>t===e));i>=0&&(this.swipeLayerIndex=i)}}changeSwipeLayerIndex(e){e<this.MapLayers.size&&e>=0&&(this.swipeLayerIndex=e)}initEventListener(){this.mapEventBus.eventOn(Bd.LAYER_OPACITY_CHANGED,this.layerOpacityHandler.bind(this)),this.mapEventBus.eventOn(Bd.LAYER_VISIBLE_CHANGED,this.layerVisibleHandler.bind(this)),this.mapEventBus.eventOn(Bd.LAYER_LOCATE,this.layerLocateHandler.bind(this)),this.mapEventBus.eventOn(Bd.LAYER_ORDER_CHANGED,this.layerOrderHandler.bind(this)),this.mapEventBus.eventOn(Bd.LAYER_REMOVED,this.removeLayer.bind(this)),this.mapEventBus.eventOn(Bd.LAYER_COPY,this.copyLayer.bind(this)),this.mapEventBus.eventOn(Bd.LAYER_SWIPE_CHANGED,this.changeSwipeLayerID.bind(this))}removeLayer(e){if(e.mapID!=this.target)return;const{id:t}=e.data;if(this.MapLayers.has(t)){const e=this.MapLayers.get(t);e&&(this.map.removeLayer(e),this.MapLayers.delete(t),this.deleteLayerItem(t))}}copyLayer(e){if(e.mapID!=this.target)return;const{id:t,newid:i,ids:n}=e.data;if(this.MapLayers.has(t)){const e=this.MapLayers.get(t);if(e){const t={...e};for(let e of this.MapLayers.values())this.map.removeLayer(e);t.set("lyrID",i),this.MapLayers.set(i,t),n.forEach((e=>{const t=this.MapLayers.get(e);this.map.addLayer(t)}))}}}changeSwipeLayerID(e){if(e.mapID!=this.target)return;const{id:t}=e.data;if(this.MapLayers.has(t)){const e=this.setSwipeLayerItem(t);e>=0&&(this.swipeLayerIndex=e)}}layerVisibleHandler(e){if(e.mapID!=this.target)return;const{id:t,visible:i}=e.data;if(this.MapLayers.has(t)){const e=this.MapLayers.get(t);e&&e.setVisible(i),this.changeLayerItemVisible(t,i)}}layerOpacityHandler(e){if(e.mapID!=this.target)return;const{id:t,opacity:i}=e.data;if(this.MapLayers.has(t)){const e=this.MapLayers.get(t);e&&e.setOpacity(i),this.changeLayerItemOpacity(t,i)}}layerOrderHandler(e){if(e.mapID===this.target){const{layerID:t,updown:i}=e.data;if(this.MapLayers.has(t)){const e=this.changeLayerItemOrder(t,i);if(e){const{id:t,index:i,newindex:n}=e;this.xmap.changeLayerOrder(i,n)}}}}layerLocateHandler(e){const t=this.MapLayers.get(e);if(t){const e=t.getSource()?.getProjection(),i=t.get("bounds");if(i)this.xmap.zoomToExtent(i);else{const i=t.get("center");if(i){let e=t.get("level");const n=[i[0],i[1]];3===i.length&&(e=i[2]),this.xmap.zoomToCenter(n,e)}else this.xmap.zoomTo(t.getExtent(),e)}}}hasLayer(e){return this.MapLayers.has(e)}getLayer(e){if(this.MapLayers.has(e))return this.MapLayers.get(e)}changeLayerOpacity(e,t=1){const i=this.getLayer(e);i&&(i.setOpacity(t),this.mapEventBus.eventEmit(Bd.LAYER_CHANGED,this.newEvtArgs()))}changeLayerVisible(e,t=!0){const i=this.getLayer(e);i&&(i.setVisible(t),this.changeLayerItemVisible(e,t),this.mapEventBus.eventEmit(Bd.LAYER_CHANGED,this.newEvtArgs()))}deleteLayerByID(e){const t=this.getLayer(e);return!!t&&(this.map.removeLayer(t),this.MapLayers.delete(e),this.deleteLayerItem(e),!0)}deleteLayerByIndex(e){const t=this.map.getLayers()[e];if(t){let e;for(let i of this.MapLayers)if(i[1]===t){e=i[0];break}e&&(this.MapLayers.delete(e),this.deleteLayerItem(e)),this.map.removeLayer(t)}}deleteLayer(e){if(e){let t;for(let i of this.MapLayers)if(i[1]===e){t=i[0];break}t&&(this.MapLayers.delete(t),this.deleteLayerItem(t)),this.map.removeLayer(e)}}clearLayers(){this.MapLayers.forEach(((e,t)=>{this.map.removeLayer(e)})),this.MapLayers.clear(),this.LayerItemList.length=0,this.mapEventBus.eventEmit(Bd.LAYER_CHANGED,this.newEvtArgs())}newEvtArgs(e,t=null){const i=new Vd(this.target,"map");return i.data=e,i.target=t,i}registerLayer(e,t){return!this.MapLayers.has(t.id)&&(this.MapLayers.set(t.id,e),t&&(this.LayerItemList.push(t),this.mapEventBus.eventEmit(Bd.LAYER_CHANGED,this.newEvtArgs())),!0)}deleteLayerItem(e){let t=!1;if(this.LayerItemList){let n=-1;const o=this.LayerItemList.length;for(var i=0;i<o;i++)if(this.LayerItemList[i].id===e){n=i;break}-1!=n&&(this.LayerItemList.splice(n,1),t=!0,this.mapEventBus.eventEmit(Bd.LAYER_CHANGED,this.newEvtArgs()))}return t}changeLayerItemVisible(e,t){if(this.LayerItemList){const n=this.LayerItemList.length;for(var i=0;i<n;i++){let n=this.LayerItemList[i];if(n.id===e){n.visible=t;break}}}}changeLayerItemOpacity(e,t){if(this.LayerItemList){const n=this.LayerItemList.length;for(var i=0;i<n;i++){let n=this.LayerItemList[i];if(n.id===e){n.opacity=t;break}}}}changeLayerItemOrder(e,t){if(this.LayerItemList){let n=-1;const o=this.LayerItemList.length;let r;for(var i=0;i<o;i++)if(r=this.LayerItemList[i],r.id===e){n=i;break}if(n>=0){const i=n-t;return i<0||i>=o?void 0:(this.LayerItemList.splice(n,1),this.LayerItemList.splice(i,0,r),this.mapEventBus.eventEmit(Bd.LAYER_CHANGED,this.newEvtArgs()),{id:e,index:n,newindex:i})}}}setSwipeLayerItem(e){let t=-1;if(!e)return t;if(this.LayerItemList){const n=this.LayerItemList.length;let o;for(var i=0;i<n;i++)if(o=this.LayerItemList[i],o.id===e){t=i;break}}return t}};var Vf=6378137,$f=.0066943799901413165,Hf=484813681109536e-20,Uf=Math.PI/2,Wf=1e-10,Xf=.017453292519943295,Kf=57.29577951308232,Yf=Math.PI/4,Zf=2*Math.PI,Qf=3.14159265359,Jf={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},eg={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},tg=/[\s_\-\/\(\)]/g;function ig(e,t){if(e[t])return e[t];for(var i,n=Object.keys(e),o=t.toLowerCase().replace(tg,""),r=-1;++r<n.length;)if((i=n[r]).toLowerCase().replace(tg,"")===o)return e[i]}function ng(e){var t,i,n,o={},r=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var i=t.split("=");return i.push(!0),e[i[0].toLowerCase()]=i[1],e}),{}),s={proj:"projName",datum:"datumCode",rf:function(e){o.rf=parseFloat(e)},lat_0:function(e){o.lat0=e*Xf},lat_1:function(e){o.lat1=e*Xf},lat_2:function(e){o.lat2=e*Xf},lat_ts:function(e){o.lat_ts=e*Xf},lon_0:function(e){o.long0=e*Xf},lon_1:function(e){o.long1=e*Xf},lon_2:function(e){o.long2=e*Xf},alpha:function(e){o.alpha=parseFloat(e)*Xf},gamma:function(e){o.rectified_grid_angle=parseFloat(e)*Xf},lonc:function(e){o.longc=e*Xf},x_0:function(e){o.x0=parseFloat(e)},y_0:function(e){o.y0=parseFloat(e)},k_0:function(e){o.k0=parseFloat(e)},k:function(e){o.k0=parseFloat(e)},a:function(e){o.a=parseFloat(e)},b:function(e){o.b=parseFloat(e)},r:function(e){o.a=o.b=parseFloat(e)},r_a:function(){o.R_A=!0},zone:function(e){o.zone=parseInt(e,10)},south:function(){o.utmSouth=!0},towgs84:function(e){o.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){o.to_meter=parseFloat(e)},units:function(e){o.units=e;var t=ig(eg,e);t&&(o.to_meter=t.to_meter)},from_greenwich:function(e){o.from_greenwich=e*Xf},pm:function(e){var t=ig(Jf,e);o.from_greenwich=(t||parseFloat(e))*Xf},nadgrids:function(e){"@null"===e?o.datumCode="none":o.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(o.axis=e)},approx:function(){o.approx=!0},over:function(){o.over=!0}};for(t in r)i=r[t],t in s?"function"==typeof(n=s[t])?n(i):o[n]=i:o[t]=i;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o.projStr=e,o}class og{static getId(e){const t=e.find((e=>Array.isArray(e)&&"ID"===e[0]));return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const i=e[1],n=parseFloat(e[2])||null,o=e.find((e=>Array.isArray(e)&&"ID"===e[0]));return{type:t,name:i,conversion_factor:n,id:o?{authority:o[1],code:parseInt(o[2],10)}:null}}static convertAxis(e){const t=e[1]||"Unknown";let i;const n=t.match(/^\((.)\)$/);if(n){const e=n[1].toUpperCase();if("E"===e)i="east";else if("N"===e)i="north";else{if("U"!==e)throw new Error(`Unknown axis abbreviation: ${e}`);i="up"}}else i=e[2]?e[2].toLowerCase():"unknown";const o=e.find((e=>Array.isArray(e)&&"ORDER"===e[0])),r=o?parseInt(o[1],10):null,s=e.find((e=>Array.isArray(e)&&("LENGTHUNIT"===e[0]||"ANGLEUNIT"===e[0]||"SCALEUNIT"===e[0])));return{name:t,direction:i,unit:this.convertUnit(s),order:r}}static extractAxes(e){return e.filter((e=>Array.isArray(e)&&"AXIS"===e[0])).map((e=>this.convertAxis(e))).sort(((e,t)=>(e.order||0)-(t.order||0)))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find((e=>Array.isArray(e)&&"BASEGEOGCRS"===e[0]))?this.convert(e.find((e=>Array.isArray(e)&&"BASEGEOGCRS"===e[0]))):null,t.conversion=e.find((e=>Array.isArray(e)&&"CONVERSION"===e[0]))?this.convert(e.find((e=>Array.isArray(e)&&"CONVERSION"===e[0]))):null;const i=e.find((e=>Array.isArray(e)&&"CS"===e[0]));i&&(t.coordinate_system={type:i[1],axis:this.extractAxes(e)});const n=e.find((e=>Array.isArray(e)&&"LENGTHUNIT"===e[0]));if(n){const e=this.convertUnit(n);t.coordinate_system.unit=e}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const o=e.find((e=>Array.isArray(e)&&("DATUM"===e[0]||"ENSEMBLE"===e[0])));if(o){const i=this.convert(o);"ENSEMBLE"===o[0]?t.datum_ensemble=i:t.datum=i;const n=e.find((e=>Array.isArray(e)&&"PRIMEM"===e[0]));n&&"Greenwich"!==n[1]&&(i.prime_meridian={name:n[1],longitude:parseFloat(n[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find((e=>Array.isArray(e)&&"ELLIPSOID"===e[0]))?this.convert(e.find((e=>Array.isArray(e)&&"ELLIPSOID"===e[0]))):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter((e=>Array.isArray(e)&&"MEMBER"===e[0])).map((e=>({type:"DatumEnsembleMember",name:e[1],id:this.getId(e)})));const r=e.find((e=>Array.isArray(e)&&"ENSEMBLEACCURACY"===e[0]));r&&(t.accuracy=parseFloat(r[1]));const s=e.find((e=>Array.isArray(e)&&"ELLIPSOID"===e[0]));s&&(t.ellipsoid=this.convert(s)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find((e=>Array.isArray(e)&&"LENGTHUNIT"===e[0]))&&this.convert(e.find((e=>Array.isArray(e)&&"LENGTHUNIT"===e[0])),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find((e=>Array.isArray(e)&&"METHOD"===e[0]))?this.convert(e.find((e=>Array.isArray(e)&&"METHOD"===e[0]))):null,t.parameters=e.filter((e=>Array.isArray(e)&&"PARAMETER"===e[0])).map((e=>this.convert(e)));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find((e=>Array.isArray(e)&&("LENGTHUNIT"===e[0]||"ANGLEUNIT"===e[0]||"SCALEUNIT"===e[0])))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const a=e.find((e=>Array.isArray(e)&&"SOURCECRS"===e[0]));if(a){const e=a.find((e=>Array.isArray(e)));t.source_crs=e?this.convert(e):null}const l=e.find((e=>Array.isArray(e)&&"TARGETCRS"===e[0]));if(l){const e=l.find((e=>Array.isArray(e)));t.target_crs=e?this.convert(e):null}const u=e.find((e=>Array.isArray(e)&&"ABRIDGEDTRANSFORMATION"===e[0]));t.transformation=u?this.convert(u):null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find((e=>Array.isArray(e)&&"METHOD"===e[0]))?this.convert(e.find((e=>Array.isArray(e)&&"METHOD"===e[0]))):null,t.parameters=e.filter((e=>Array.isArray(e)&&("PARAMETER"===e[0]||"PARAMETERFILE"===e[0]))).map((e=>"PARAMETER"===e[0]?this.convert(e):"PARAMETERFILE"===e[0]?{name:e[1],value:e[2],id:{authority:"EPSG",code:8656}}:void 0)),7===t.parameters.length){const e=t.parameters[6];"Scale difference"===e.name&&(e.value=Math.round(1e12*(e.value-1))/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const c=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach((e=>{e.unit||(e.unit=c)})),c.conversion_factor&&1!==c.conversion_factor&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:c});break;default:t.keyword=e[0]}return t}}class rg extends og{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&"Cartesian"===t.coordinate_system.subtype&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class sg extends og{static convert(e,t={}){super.convert(e,t);const i=e.find((e=>Array.isArray(e)&&"CS"===e[0]));i&&(t.coordinate_system={subtype:i[1],axis:this.extractAxes(e)});const n=e.find((e=>Array.isArray(e)&&"USAGE"===e[0]));if(n){const e=n.find((e=>Array.isArray(e)&&"SCOPE"===e[0])),i=n.find((e=>Array.isArray(e)&&"AREA"===e[0])),o=n.find((e=>Array.isArray(e)&&"BBOX"===e[0]));t.usage={},e&&(t.usage.scope=e[1]),i&&(t.usage.area=i[1]),o&&(t.usage.bbox=o.slice(1))}return t}}var ag=/\s/,lg=/[A-Za-z]/,ug=/[A-Za-z84_]/,cg=/[,\]]/,hg=/[\d\.E\-\+]/;function dg(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function pg(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var n=t?{}:e,o=i.reduce((function(e,t){return fg(t,e),e}),n);t&&(e[t]=o)}function fg(e,t){if(Array.isArray(e)){var i=e.shift();if("PARAMETER"===i&&(i=e.shift()),1===e.length)return Array.isArray(e[0])?(t[i]={},void fg(e[0],t[i])):void(t[i]=e[0]);if(e.length)if("TOWGS84"!==i){if("AXIS"===i)return i in t||(t[i]=[]),void t[i].push(e);var n;switch(Array.isArray(i)||(t[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[i]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&fg(e[2],t[i]));case"SPHEROID":case"ELLIPSOID":return t[i]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&fg(e[3],t[i]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return e[0]=["name",e[0]],void pg(t,i,e);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return e[0]=["name",e[0]],pg(t,i,e),void(t[i].type=i);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return fg(e,t[i]);return pg(t,i,e)}}else t[i]=e;else t[i]=!0}else t[e]=!0}function gg(e){return.017453292519943295*e}function mg(e){const t=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&("albers conic equal area"===t||"lambert azimuthal equal area"===t)&&(e.long0=e.longc),e.lat_ts||!e.lat1||"stereographic south pole"!==t&&"polar stereographic (variant b)"!==t?!e.lat_ts&&e.lat0&&("polar stereographic"===t||"polar stereographic (variant a)"===t)&&(e.lat_ts=e.lat0,e.lat0=gg(e.lat0>0?90:-90),delete e.lat1):(e.lat0=gg(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1)}function vg(e){let t={units:null,to_meter:void 0};return"string"==typeof e?(t.units=e.toLowerCase(),"metre"===t.units&&(t.units="meter"),"meter"===t.units&&(t.to_meter=1)):e&&e.name&&(t.units=e.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.to_meter=e.conversion_factor),t}function yg(e){return"object"==typeof e?e.value*e.unit.conversion_factor:e}function _g(e,t){e.ellipsoid.radius?(t.a=e.ellipsoid.radius,t.rf=0):(t.a=yg(e.ellipsoid.semi_major_axis),void 0!==e.ellipsoid.inverse_flattening?t.rf=e.ellipsoid.inverse_flattening:void 0!==e.ellipsoid.semi_major_axis&&void 0!==e.ellipsoid.semi_minor_axis&&(t.rf=t.a/(t.a-yg(e.ellipsoid.semi_minor_axis))))}function bg(e,t={}){return e&&"object"==typeof e?"BoundCRS"===e.type?(bg(e.source_crs,t),e.transformation&&(e.transformation.method&&"NTv2"===e.transformation.method.name?t.nadgrids=e.transformation.parameters[0].value:t.datum_params=e.transformation.parameters.map((e=>e.value))),t):(Object.keys(e).forEach((i=>{const n=e[i];if(null!==n)switch(i){case"name":if(t.srsCode)break;t.name=n,t.srsCode=n;break;case"type":"GeographicCRS"===n?t.projName="longlat":"ProjectedCRS"===n&&e.conversion&&e.conversion.method&&(t.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":n.ellipsoid&&(t.ellps=n.ellipsoid.name,_g(n,t)),n.prime_meridian&&(t.from_greenwich=n.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=n.name,_g(n,t);break;case"prime_meridian":t.long0=(n.longitude||0)*Math.PI/180;break;case"coordinate_system":if(n.axis)if(t.axis=n.axis.map((e=>{const t=e.direction;if("east"===t)return"e";if("north"===t)return"n";if("west"===t)return"w";if("south"===t)return"s";throw new Error(`Unknown axis direction: ${t}`)})).join("")+"u",n.unit){const{units:e,to_meter:i}=vg(n.unit);t.units=e,t.to_meter=i}else if(n.axis[0]&&n.axis[0].unit){const{units:e,to_meter:i}=vg(n.axis[0].unit);t.units=e,t.to_meter=i}break;case"id":n.authority&&n.code&&(t.title=n.authority+":"+n.code);break;case"conversion":n.method&&n.method.name&&(t.projName=n.method.name),n.parameters&&n.parameters.forEach((e=>{const i=e.name.toLowerCase().replace(/\s+/g,"_"),n=e.value;e.unit&&e.unit.conversion_factor?t[i]=n*e.unit.conversion_factor:"degree"===e.unit?t[i]=n*Math.PI/180:t[i]=n}));break;case"unit":n.name&&(t.units=n.name.toLowerCase(),"metre"===t.units&&(t.units="meter")),n.conversion_factor&&(t.to_meter=n.conversion_factor);break;case"base_crs":bg(n,t),t.datumCode=n.id?n.id.authority+"_"+n.id.code:n.name}})),void 0!==t.latitude_of_false_origin&&(t.lat0=t.latitude_of_false_origin),void 0!==t.longitude_of_false_origin&&(t.long0=t.longitude_of_false_origin),void 0!==t.latitude_of_standard_parallel&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),void 0!==t.latitude_of_1st_standard_parallel&&(t.lat1=t.latitude_of_1st_standard_parallel),void 0!==t.latitude_of_2nd_standard_parallel&&(t.lat2=t.latitude_of_2nd_standard_parallel),void 0!==t.latitude_of_projection_centre&&(t.lat0=t.latitude_of_projection_centre),void 0!==t.longitude_of_projection_centre&&(t.longc=t.longitude_of_projection_centre),void 0!==t.easting_at_false_origin&&(t.x0=t.easting_at_false_origin),void 0!==t.northing_at_false_origin&&(t.y0=t.northing_at_false_origin),void 0!==t.latitude_of_natural_origin&&(t.lat0=t.latitude_of_natural_origin),void 0!==t.longitude_of_natural_origin&&(t.long0=t.longitude_of_natural_origin),void 0!==t.longitude_of_origin&&(t.long0=t.longitude_of_origin),void 0!==t.false_easting&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),void 0!==t.false_northing&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),void 0!==t.standard_parallel_1&&(t.lat1=t.standard_parallel_1),void 0!==t.standard_parallel_2&&(t.lat2=t.standard_parallel_2),void 0!==t.scale_factor_at_natural_origin&&(t.k0=t.scale_factor_at_natural_origin),void 0!==t.scale_factor_at_projection_centre&&(t.k0=t.scale_factor_at_projection_centre),void 0!==t.scale_factor_on_pseudo_standard_parallel&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),void 0!==t.azimuth&&(t.alpha=t.azimuth),void 0!==t.azimuth_at_projection_centre&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),mg(t),t):e}dg.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;ag.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},dg.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(cg.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},dg.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},dg.prototype.number=function(e){if(!hg.test(e)){if(cg.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},dg.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},dg.prototype.keyword=function(e){if(ug.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!cg.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},dg.prototype.neutral=function(e){if(lg.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(hg.test(e))return this.word=e,void(this.state=3);if(!cg.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},dg.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var xg=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function wg(e){for(var t=Object.keys(e),i=0,n=t.length;i<n;++i){var o=t[i];-1!==xg.indexOf(o)&&Sg(e[o]),"object"==typeof e[o]&&wg(e[o])}}function Sg(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var i="",n=0,o=e.AXIS.length;n<o;++n){var r=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?i+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?i+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?i+="e":(-1!==r[0].indexOf("west")||("x"===r[0]||"lon"===r[0])&&"west"===r[1])&&(i+="w")}2===i.length&&(i+="u"),3===i.length&&(e.axis=i)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;function a(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_1949"===e.datumCode&&(e.datumCode="nzgd49"),("wgs_1984"===e.datumCode||"world_geodetic_system_1984"===e.datumCode)&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"belge_1972"===e.datumCode&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=gg(e.rectified_grid_angle)),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",gg],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",gg],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",gg],["lat0","latitude_of_origin",gg],["lat0","standard_parallel_1",gg],["lat1","standard_parallel_1",gg],["lat2","standard_parallel_2",gg],["azimuth","Azimuth"],["alpha","azimuth",gg],["srsCode","name"]].forEach((function(t){return i=e,o=(n=t)[0],r=n[1],void(!(o in i)&&r in i&&(i[o]=i[r],3===n.length&&(i[o]=n[2](i[o]))));var i,n,o,r})),mg(e)}function Cg(e){if("object"==typeof e)return bg(e);const t=function(e){const t=e.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}(e);var i=new dg(e).output();if("WKT2"===t)return bg(function(e){return("2019"==(t=e,t.find((e=>Array.isArray(e)&&"USAGE"===e[0]))?"2019":(t.find((e=>Array.isArray(e)&&"CS"===e[0]))||"BOUNDCRS"===t[0]||"PROJCRS"===t[0]||t[0],"2015"))?sg:rg).convert(e);var t}(i));var n=i[0],o={};return fg(i,o),wg(o),o[n]}function Mg(e){var t=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?Mg[e]=ng(arguments[1]):Mg[e]=Cg(arguments[1]):i&&"object"==typeof i&&!("projName"in i)?Mg[e]=Cg(arguments[1]):(Mg[e]=i,i||delete Mg[e])}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){return Array.isArray(e)?Mg.apply(t,e):Mg(e)}));if("string"==typeof e){if(e in Mg)return Mg[e]}else"EPSG"in e?Mg["EPSG:"+e.EPSG]=e:"ESRI"in e?Mg["ESRI:"+e.ESRI]=e:"IAU2000"in e&&(Mg["IAU2000:"+e.IAU2000]=e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(Mg);var Eg=["3857","900913","3785","102113"];function kg(e,t){var i,n;if(e=e||{},!t)return e;for(n in t)void 0!==(i=t[n])&&(e[n]=i);return e}function Tg(e,t,i){var n=e*t;return i/Math.sqrt(1-n*n)}function Pg(e){return e<0?-1:1}function Lg(e,t){return t||Math.abs(e)<=Qf?e:e-Pg(e)*Zf}function Ig(e,t,i){var n=e*i,o=.5*e;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(Uf-t))/n}function Rg(e,t){for(var i,n,o=.5*e,r=Uf-2*Math.atan(t),s=0;s<=15;s++)if(i=e*Math.sin(r),r+=n=Uf-2*Math.atan(t*Math.pow((1-i)/(1+i),o))-r,Math.abs(n)<=1e-10)return r;return-9999}var Ag={init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Tg(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,i,n=e.x,o=e.y;if(o*Kf>90&&o*Kf<-90&&n*Kf>180&&n*Kf<-180)return null;if(Math.abs(Math.abs(o)-Uf)<=Wf)return null;if(this.sphere)t=this.x0+this.a*this.k0*Lg(n-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(Yf+.5*o));else{var r=Math.sin(o),s=Ig(this.e,o,r);t=this.x0+this.a*this.k0*Lg(n-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(s)}return e.x=t,e.y=i,e},inverse:function(e){var t,i,n=e.x-this.x0,o=e.y-this.y0;if(this.sphere)i=Uf-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var r=Math.exp(-o/(this.a*this.k0));if(-9999===(i=Rg(this.e,r)))return null}return t=Lg(this.long0+n/(this.a*this.k0),this.over),e.x=t,e.y=i,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"]};function qg(e){return e}var Fg=[Ag,{init:function(){},forward:qg,inverse:qg,names:["longlat","identity"]}],Og={},zg=[];function Ng(e,t){var i=zg.length;return!e.names||(zg[i]=e,e.names.forEach((function(e){Og[e.toLowerCase()]=i})),this)}function Dg(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}var Gg={start:function(){Fg.forEach(Ng)},add:Ng,get:function(e){if(!e)return!1;var t=e.toLowerCase();return typeof Og[t]<"u"&&zg[Og[t]]||(t=Dg(t))in Og&&zg[Og[t]]?zg[Og[t]]:void 0}},jg={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Bg=jg.WGS84;var Vg={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var $g in Vg){var Hg=Vg[$g];Hg.datumName&&(Vg[Hg.datumName]=Hg)}var Ug={};async function Wg(e,t){for(var i=[],n=await t.getImageCount(),o=n-1;o>=0;o--){var r=await t.getImage(o),s=await r.readRasters(),a=[r.getWidth(),r.getHeight()],l=r.getBoundingBox().map(Kg),u=[r.fileDirectory.ModelPixelScale[0],r.fileDirectory.ModelPixelScale[1]].map(Kg),c=l[0]+(a[0]-1)*u[0],h=l[3]-(a[1]-1)*u[1],d=s[0],p=s[1],f=[];for(let e=a[1]-1;e>=0;e--)for(let t=a[0]-1;t>=0;t--){var g=e*a[0]+t;f.push([-Yg(p[g]),Yg(d[g])])}i.push({del:u,lim:a,ll:[-c,h],cvs:f})}var m={header:{nSubgrids:n},subgrids:i};return Ug[e]=m,m}function Xg(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:Ug[e]||null,isNull:!1}}function Kg(e){return e*Math.PI/180}function Yg(e){return e/3600*Math.PI/180}function Zg(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function Qg(e){return e.map((function(e){return[Yg(e.longitudeShift),Yg(e.latitudeShift)]}))}function Jg(e,t,i){return{name:Zg(e,t+8,t+16).trim(),parent:Zg(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function em(e,t,i,n,o){var r=t+176,s=16;!1===o&&(s=8);for(var a=[],l=0;l<i.gridNodeCount;l++){var u={latitudeShift:e.getFloat32(r+l*s,n),longitudeShift:e.getFloat32(r+l*s+4,n)};!1!==o&&(u.latitudeAccuracy=e.getFloat32(r+l*s+8,n),u.longitudeAccuracy=e.getFloat32(r+l*s+12,n)),a.push(u)}return a}function tm(e,t){if(!(this instanceof tm))return new tm(e);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(e){if(e)throw e};var i,n,o,r,s,a,l,u=function(e){if(!function(e){return"string"==typeof e}(e))return"projName"in e?e:Cg(e);if(e in Mg)return Mg[e];if(n=e,0!==n.indexOf("+")&&-1!==n.indexOf("[")||"object"==typeof n&&!("srsCode"in n)){var t=Cg(e);if(function(e){var t=ig(e,"authority");if(t){var i=ig(t,"epsg");return i&&Eg.indexOf(i)>-1}}(t))return Mg["EPSG:3857"];var i=function(e){var t=ig(e,"extension");if(t)return ig(t,"proj4")}(t);return i?ng(i):t}var n;return function(e){return"+"===e[0]}(e)?ng(e):void 0}(e);if("object"==typeof u){var c=tm.projections.get(u.projName);if(c){if(u.datumCode&&"none"!==u.datumCode){var h=ig(Vg,u.datumCode);h&&(u.datum_params=u.datum_params||(h.towgs84?h.towgs84.split(","):null),u.ellps=h.ellipse,u.datumName=h.datumName?h.datumName:u.datumCode)}u.k0=u.k0||1,u.axis=u.axis||"enu",u.ellps=u.ellps||"wgs84",u.lat1=u.lat1||u.lat0;var d=function(e,t,i,n,o){if(!e){var r=ig(jg,n);r||(r=Bg),e=r.a,t=r.b,i=r.rf}return i&&!t&&(t=(1-1/i)*e),(0===i||Math.abs(e-t)<Wf)&&(o=!0,t=e),{a:e,b:t,rf:i,sphere:o}}(u.a,u.b,u.rf,u.ellps,u.sphere),p=(i=d.a,n=d.b,d.rf,o=u.R_A,a=((r=i*i)-(s=n*n))/r,l=0,o?(r=(i*=1-a*(.16666666666666666+a*(.04722222222222222+.022156084656084655*a)))*i,a=0):l=Math.sqrt(a),{es:a,e:l,ep2:(r-s)/s}),f=function(e){return void 0===e?null:e.split(",").map(Xg)}(u.nadgrids),g=u.datum||function(e,t,i,n,o,r,s){var a={};return a.datum_type=void 0===e||"none"===e?5:4,t&&(a.datum_params=t.map(parseFloat),(0!==a.datum_params[0]||0!==a.datum_params[1]||0!==a.datum_params[2])&&(a.datum_type=1),a.datum_params.length>3&&(0!==a.datum_params[3]||0!==a.datum_params[4]||0!==a.datum_params[5]||0!==a.datum_params[6])&&(a.datum_type=2,a.datum_params[3]*=Hf,a.datum_params[4]*=Hf,a.datum_params[5]*=Hf,a.datum_params[6]=a.datum_params[6]/1e6+1)),s&&(a.datum_type=3,a.grids=s),a.a=i,a.b=n,a.es=o,a.ep2=r,a}(u.datumCode,u.datum_params,d.a,d.b,p.es,p.ep2,f);kg(this,u),kg(this,c),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=g,"init"in this&&"function"==typeof this.init&&this.init(),t(null,this)}else t("Could not get projection name from: "+e)}else t("Could not parse to valid json: "+e)}function im(e,t,i){var n,o,r,s,a=e.x,l=e.y,u=e.z?e.z:0;if(l<-Uf&&l>-1.001*Uf)l=-Uf;else if(l>Uf&&l<1.001*Uf)l=Uf;else{if(l<-Uf)return{x:-1/0,y:-1/0,z:e.z};if(l>Uf)return{x:1/0,y:1/0,z:e.z}}return a>Math.PI&&(a-=2*Math.PI),o=Math.sin(l),s=Math.cos(l),r=o*o,{x:((n=i/Math.sqrt(1-t*r))+u)*s*Math.cos(a),y:(n+u)*s*Math.sin(a),z:(n*(1-t)+u)*o}}function nm(e,t,i,n){var o,r,s,a,l,u,c,h,d,p,f,g,m,v,y,_=e.x,b=e.y,x=e.z?e.z:0;if(o=Math.sqrt(_*_+b*b),r=Math.sqrt(_*_+b*b+x*x),o/i<1e-12){if(v=0,r/i<1e-12)return y=-n,{x:e.x,y:e.y,z:e.z}}else v=Math.atan2(b,_);s=x/r,h=(a=o/r)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*a*a)),d=s*l,m=0;do{m++,u=t*(c=i/Math.sqrt(1-t*d*d))/(c+(y=o*h+x*d-c*(1-t*d*d))),g=(f=s*(l=1/Math.sqrt(1-u*(2-u)*a*a)))*h-(p=a*(1-u)*l)*d,h=p,d=f}while(g*g>1e-24&&m<30);return{x:v,y:Math.atan(f/Math.abs(p)),z:y}}function om(e){return 1===e||2===e}function rm(e,t,i){if(null===e.grids||0===e.grids.length)return-1;var n={x:-i.x,y:i.y},o={x:Number.NaN,y:Number.NaN},r=[];e:for(var s=0;s<e.grids.length;s++){var a=e.grids[s];if(r.push(a.name),a.isNull){o=n;break}if(null!==a.grid)for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,p=h.ll[0]-d,f=h.ll[1]-d,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,m=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(f>n.y||p>n.x||m<n.y||g<n.x||(o=sm(n,t,h),isNaN(o.x))))break e}else if(a.mandatory)return-1}return isNaN(o.x)?-1:(i.x=-o.x,i.y=o.y,0)}function sm(e,t,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var o={x:e.x,y:e.y};o.x-=i.ll[0],o.y-=i.ll[1],o.x=Lg(o.x-Math.PI)+Math.PI;var r=am(o,i);if(t){if(isNaN(r.x))return n;r.x=o.x-r.x,r.y=o.y-r.y;var s,a,l=9;do{if(a=am(r,i),isNaN(a.x))break;s={x:o.x-(a.x+r.x),y:o.y-(a.y+r.y)},r.x+=s.x,r.y+=s.y}while(l--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(l<0)return n;n.x=Lg(r.x+i.ll[0]),n.y=r.y+i.ll[1]}else isNaN(r.x)||(n.x=e.x+r.x,n.y=e.y+r.y);return n}function am(e,t){var i,n={x:e.x/t.del[0],y:e.y/t.del[1]},o=Math.floor(n.x),r=Math.floor(n.y),s=n.x-1*o,a=n.y-1*r,l={x:Number.NaN,y:Number.NaN};if(o<0||o>=t.lim[0]||r<0||r>=t.lim[1])return l;i=r*t.lim[0]+o;var u=t.cvs[i][0],c=t.cvs[i][1];i++;var h=t.cvs[i][0],d=t.cvs[i][1];i+=t.lim[0];var p=t.cvs[i][0],f=t.cvs[i][1];i--;var g=t.cvs[i][0],m=t.cvs[i][1],v=s*a,y=s*(1-a),_=(1-s)*(1-a),b=(1-s)*a;return l.x=_*u+y*h+b*g+v*p,l.y=_*c+y*d+b*m+v*f,l}function lm(e,t,i){var n,o,r,s=i.x,a=i.y,l=i.z||0,u={};for(r=0;r<3;r++)if(!t||2!==r||void 0!==i.z)switch(0===r?(n=s,o=-1!=="ew".indexOf(e.axis[r])?"x":"y"):1===r?(n=a,o=-1!=="ns".indexOf(e.axis[r])?"y":"x"):(n=l,o="z"),e.axis[r]){case"e":case"n":u[o]=n;break;case"w":case"s":u[o]=-n;break;case"u":void 0!==i[o]&&(u.z=n);break;case"d":void 0!==i[o]&&(u.z=-n);break;default:return null}return u}function um(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function cm(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function hm(e,t,i,n){var o,r,s=void 0!==(i=Array.isArray(i)?um(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z;if(cm((r=i).x),cm(r.y),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(i=hm(e,o=new tm("WGS84"),i,n),e=o),n&&"enu"!==e.axis&&(i=lm(e,!1,i)),"longlat"===e.projName)i={x:i.x*Xf,y:i.y*Xf,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),!(i=e.inverse(i)))return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=function(e,t,i){if(o=t,!((n=e).datum_type!==o.datum_type||n.a!==o.a||Math.abs(n.es-o.es)>5e-11)&&(1===n.datum_type?n.datum_params[0]===o.datum_params[0]&&n.datum_params[1]===o.datum_params[1]&&n.datum_params[2]===o.datum_params[2]:2!==n.datum_type||n.datum_params[0]===o.datum_params[0]&&n.datum_params[1]===o.datum_params[1]&&n.datum_params[2]===o.datum_params[2]&&n.datum_params[3]===o.datum_params[3]&&n.datum_params[4]===o.datum_params[4]&&n.datum_params[5]===o.datum_params[5]&&n.datum_params[6]===o.datum_params[6])||5===e.datum_type||5===t.datum_type)return i;var n,o,r=e.a,s=e.es;if(3===e.datum_type){if(0!==rm(e,!1,i))return;r=Vf,s=$f}var a=t.a,l=t.b,u=t.es;return 3===t.datum_type&&(a=Vf,l=6356752.314,u=$f),s!==u||r!==a||om(e.datum_type)||om(t.datum_type)?(i=im(i,s,r),om(e.datum_type)&&(i=function(e,t,i){if(1===t)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(2===t){var n=i[0],o=i[1],r=i[2],s=i[3],a=i[4],l=i[5],u=i[6];return{x:u*(e.x-l*e.y+a*e.z)+n,y:u*(l*e.x+e.y-s*e.z)+o,z:u*(-a*e.x+s*e.y+e.z)+r}}}(i,e.datum_type,e.datum_params)),om(t.datum_type)&&(i=function(e,t,i){if(1===t)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(2===t){var n=i[0],o=i[1],r=i[2],s=i[3],a=i[4],l=i[5],u=i[6],c=(e.x-n)/u,h=(e.y-o)/u,d=(e.z-r)/u;return{x:c+l*h-a*d,y:-l*c+h+s*d,z:a*c-s*h+d}}}(i,t.datum_type,t.datum_params)),i=nm(i,u,a,l),3!==t.datum_type||0===rm(t,!0,i)?i:void 0):i}(e.datum,t.datum,i))return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),"longlat"===t.projName?i={x:i.x*Kf,y:i.y*Kf,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),n&&"enu"!==t.axis?lm(t,!0,i):(i&&!s&&delete i.z,i)}tm.projections=Gg,tm.projections.start();var dm=tm("WGS84");function pm(e,t,i,n){var o,r,s;return Array.isArray(i)?(o=hm(e,t,i,n)||{x:NaN,y:NaN},i.length>2?typeof e.name<"u"&&"geocent"===e.name||typeof t.name<"u"&&"geocent"===t.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(i.slice(3)):[o.x,o.y,i[2]].concat(i.slice(3)):[o.x,o.y].concat(i.slice(2)):[o.x,o.y]):(r=hm(e,t,i,n),2===(s=Object.keys(i)).length||s.forEach((function(n){if(typeof e.name<"u"&&"geocent"===e.name||typeof t.name<"u"&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;r[n]=i[n]})),r)}function fm(e){return e instanceof tm?e:"object"==typeof e&&"oProj"in e?e.oProj:tm(e)}var gm="AJSAJS",mm="AFAFAF",vm=65,ym=73,_m=79,bm={forward:xm,inverse:function(e){var t=Mm(Tm(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:wm};function xm(e,t){return t=t||5,i=function(e){var t,i,n,o,r,s,a,l=e.lat,u=e.lon,c=6378137,h=.00669438,d=.9996,p=Sm(l),f=Sm(u);a=Math.floor((u+180)/6)+1,180===u&&(a=60),l>=56&&l<64&&u>=3&&u<12&&(a=32),l>=72&&l<84&&(u>=0&&u<9?a=31:u>=9&&u<21?a=33:u>=21&&u<33?a=35:u>=33&&u<42&&(a=37)),s=Sm(6*(a-1)-180+3),t=h/(1-h),i=c/Math.sqrt(1-h*Math.sin(p)*Math.sin(p)),n=Math.tan(p)*Math.tan(p),o=t*Math.cos(p)*Math.cos(p);var g=d*i*((r=Math.cos(p)*(f-s))+(1-n+o)*r*r*r/6+(5-18*n+n*n+72*o-58*t)*r*r*r*r*r/120)+5e5,m=d*(c*(.9983242984503243*p-.002514607064228144*Math.sin(2*p)+2639046602129982e-21*Math.sin(4*p)-35*h*h*h/3072*Math.sin(6*p))+i*Math.tan(p)*(r*r/2+(5-n+9*o+4*o*o)*r*r*r*r/24+(61-58*n+n*n+600*o-330*t)*r*r*r*r*r*r/720));return l<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(g),zoneNumber:a,zoneLetter:Em(l)}}({lat:e[1],lon:e[0]}),n=t,y="00000"+i.easting,_="00000"+i.northing,i.zoneNumber+i.zoneLetter+(o=i.easting,r=i.northing,s=i.zoneNumber,g=km(s),m=Math.floor(o/1e5),v=Math.floor(r/1e5)%20,a=m,l=v,c=gm.charCodeAt(u=g-1),h=mm.charCodeAt(u),f=!1,(d=c+a-1)>90&&(d=d-90+vm-1,f=!0),(d===ym||c<ym&&d>ym||(d>ym||c<ym)&&f)&&d++,(d===_m||c<_m&&d>_m||(d>_m||c<_m)&&f)&&++d===ym&&d++,d>90&&(d=d-90+vm-1),(p=h+l)>86?(p=p-86+vm-1,f=!0):f=!1,(p===ym||h<ym&&p>ym||(p>ym||h<ym)&&f)&&p++,(p===_m||h<_m&&p>_m||(p>_m||h<_m)&&f)&&++p===ym&&p++,p>86&&(p=p-86+vm-1),String.fromCharCode(d)+String.fromCharCode(p))+y.substr(y.length-5,n)+_.substr(_.length-5,n);var i,n,o,r,s,a,l,u,c,h,d,p,f,g,m,v,y,_}function wm(e){var t=Mm(Tm(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Sm(e){return e*(Math.PI/180)}function Cm(e){return e/Math.PI*180}function Mm(e){var t=e.northing,i=e.easting,n=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var r,s,a,l,u,c,h,d,p,f=.9996,g=6378137,m=.00669438,v=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),y=i-5e5,_=t;n<"N"&&(_-=1e7),h=6*(o-1)-180+3,r=m/(1-m),p=(d=_/f/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),s=g/Math.sqrt(1-m*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),l=r*Math.cos(p)*Math.cos(p),u=g*(1-m)/Math.pow(1-m*Math.sin(p)*Math.sin(p),1.5),c=y/(s*f);var b=p-s*Math.tan(p)/u*(c*c/2-(5+3*a+10*l-4*l*l-9*r)*c*c*c*c/24+(61+90*a+298*l+45*a*a-252*r-3*l*l)*c*c*c*c*c*c/720);b=Cm(b);var x,w=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*r+24*a*a)*c*c*c*c*c/120)/Math.cos(p);if(w=h+Cm(w),e.accuracy){var S=Mm({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});x={top:S.lat,right:S.lon,bottom:b,left:w}}else x={lat:b,lon:w};return x}function Em(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function km(e){var t=e%6;return 0===t&&(t=6),t}function Tm(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,i=e.length,n=null,o="",r=0;!/[A-Z]/.test(t=e.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+e;o+=t,r++}var s=parseInt(o,10);if(0===r||r+3>i)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(r++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+e;n=e.substring(r,r+=2);for(var l=km(s),u=function(e,t){for(var i=gm.charCodeAt(t-1),n=1e5,o=!1;i!==e.charCodeAt(0);){if(++i===ym&&i++,i===_m&&i++,i>90){if(o)throw"Bad character: "+e;i=vm,o=!0}n+=1e5}return n}(n.charAt(0),l),c=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=mm.charCodeAt(t-1),n=0,o=!1;i!==e.charCodeAt(0);){if(++i===ym&&i++,i===_m&&i++,i>86){if(o)throw"Bad character: "+e;i=vm,o=!0}n+=1e5}return n}(n.charAt(1),l);c<Pm(a);)c+=2e6;var h=i-r;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var d,p,f,g=h/2,m=0,v=0;return g>0&&(d=1e5/Math.pow(10,g),p=e.substring(r,r+g),m=parseFloat(p)*d,f=e.substring(r+g),v=parseFloat(f)*d),{easting:m+u,northing:v+c,zoneLetter:a,zoneNumber:s,accuracy:d}}function Pm(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Lm(e,t,i){if(!(this instanceof Lm))return new Lm(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&typeof t>"u"){var n=e.split(",");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])||0}else this.x=e,this.y=t,this.z=i||0}Lm.fromMGRS=function(e){return new Lm(wm(e))},Lm.prototype.toMGRS=function(e){return xm([this.x,this.y],e)};var Im=.046875,Rm=.01953125,Am=.01068115234375;function qm(e){var t=[];t[0]=1-e*(.25+e*(Im+e*(Rm+e*Am))),t[1]=e*(.75-e*(Im+e*(Rm+e*Am)));var i=e*e;return t[2]=i*(.46875-e*(.013020833333333334+.007120768229166667*e)),i*=e,t[3]=i*(.3645833333333333-.005696614583333333*e),t[4]=i*e*.3076171875,t}function Fm(e,t,i,n){return i*=t,t*=t,n[0]*e-i*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}function Om(e,t,i){for(var n=1/(1-t),o=e,r=20;r;--r){var s=Math.sin(o),a=1-t*s*s;if(o-=a=(Fm(o,s,Math.cos(o),i)-e)*(a*Math.sqrt(a))*n,Math.abs(a)<Wf)return o}return o}var zm={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=qm(this.es),this.ml0=Fm(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,i,n,o=e.x,r=e.y,s=Lg(o-this.long0,this.over),a=Math.sin(r),l=Math.cos(r);if(this.es){var u=l*s,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),p=Math.abs(l)>Wf?Math.tan(r):0,f=Math.pow(p,2),g=Math.pow(f,2);t=1-this.es*Math.pow(a,2),u/=Math.sqrt(t);var m=Fm(r,a,l,this.en);i=this.a*(this.k0*u*(1+c/6*(1-f+h+c/20*(5-18*f+g+14*h-58*f*h+c/42*(61+179*g-g*f-479*f)))))+this.x0,n=this.a*(this.k0*(m-this.ml0+a*s*u/2*(1+c/12*(5-f+9*h+4*d+c/30*(61+g-58*f+270*h-330*f*h+c/56*(1385+543*g-g*f-3111*f))))))+this.y0}else{var v=l*Math.sin(s);if(Math.abs(Math.abs(v)-1)<Wf)return 93;if(i=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=l*Math.cos(s)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>Wf)return 93;n=0}else n=Math.acos(n);r<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=i,e.y=n,e},inverse:function(e){var t,i,n,o,r=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(this.es)if(i=Om(t=this.ml0+s/this.k0,this.es,this.en),Math.abs(i)<Uf){var a=Math.sin(i),l=Math.cos(i),u=Math.abs(l)>Wf?Math.tan(i):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),d=Math.pow(u,2),p=Math.pow(d,2);t=1-this.es*Math.pow(a,2);var f=r*Math.sqrt(t)/this.k0,g=Math.pow(f,2);n=i-(t*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*h-g/30*(61+90*d-252*c*d+45*p+46*c-g/56*(1385+3633*d+4095*p+1574*p*d)))),o=Lg(this.long0+f*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*p+8*c*d+6*c-g/42*(61+662*d+1320*p+720*p*d))))/l,this.over)}else n=Uf*Pg(s),o=0;else{var m=Math.exp(r/this.k0),v=.5*(m-1/m),y=this.lat0+s/this.k0,_=Math.cos(y);t=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(v,2))),n=Math.asin(t),s<0&&(n=-n),o=0===v&&0===_?0:Lg(Math.atan2(v,_)+this.long0,this.over)}return e.x=o,e.y=n,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Nm(e){var t=Math.exp(e);return(t-1/t)/2}function Dm(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),n=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function Gm(e,t){for(var i,n=2*Math.cos(2*t),o=e.length-1,r=e[o],s=0;--o>=0;)i=n*r-s+e[o],s=r,r=i;return t+i*Math.sin(2*t)}function jm(e,t,i){for(var n,o,r=Math.sin(t),s=Math.cos(t),a=Nm(i),l=(m=i,v=void 0,((v=Math.exp(m))+1/v)/2),u=2*s*l,c=-2*r*a,h=e.length-1,d=e[h],p=0,f=0,g=0;--h>=0;)n=f,o=p,d=u*(f=d)-n-c*(p=g)+e[h],g=c*f-o+u*p;var m,v;return[(u=r*l)*d-(c=s*a)*g,u*g+c*d]}var Bm={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(zm.init.apply(this),this.forward=zm.forward,this.inverse=zm.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),i*=t,this.cgb[1]=i*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i*=t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),i*=t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(t*(-24832/14175)-2.4)),i*=t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i*=t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),i*=t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i*=t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i*=t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i*=t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=Gm(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(e,t){for(var i,n=2*Math.cos(t),o=e.length-1,r=e[o],s=0;--o>=0;)i=n*r-s+e[o],s=r,r=i;return Math.sin(t)*i}(this.gtu,2*n))},forward:function(e){var t=Lg(e.x-this.long0,this.over),i=e.y;i=Gm(this.cbg,i);var n=Math.sin(i),o=Math.cos(i),r=Math.sin(t),s=Math.cos(t);i=Math.atan2(n,s*o),t=Math.atan2(r*o,Dm(n,o*s)),t=function(e){var t,i,n,o=Math.abs(e);return t=o*(1+o/(Dm(1,o)+1)),o=0==(n=(i=1+t)-1)?t:t*Math.log(i)/n,e<0?-o:o}(Math.tan(t));var a,l,u=jm(this.gtu,2*i,2*t);return i+=u[0],t+=u[1],Math.abs(t)<=2.623395162778?(a=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(a=1/0,l=1/0),e.x=a,e.y=l,e},inverse:function(e){var t,i,n=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var r=jm(this.utg,2*o,2*n);o+=r[0],n+=r[1],n=Math.atan(Nm(n));var s=Math.sin(o),a=Math.cos(o),l=Math.sin(n),u=Math.cos(n);o=Math.atan2(s*u,Dm(l,u*a)),t=Lg((n=Math.atan2(l,u*a))+this.long0,this.over),i=Gm(this.cgb,o)}else t=1/0,i=1/0;return e.x=t,e.y=i,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},Vm={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(Lg(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Xf,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Bm.init.apply(this),this.forward=Bm.forward,this.inverse=Bm.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function $m(e,t){return Math.pow((1-e)/(1+e),t)}var Hm={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Yf)/(Math.pow(Math.tan(.5*this.lat0+Yf),this.C)*$m(this.e*e,this.ratexp))},forward:function(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Yf),this.C)*$m(this.e*Math.sin(i),this.ratexp))-Uf,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,i=e.y,n=Math.pow(Math.tan(.5*i+Yf)/this.K,1/this.C),o=20;o>0&&(i=2*Math.atan(n*$m(this.e*Math.sin(e.y),-.5*this.e))-Uf,!(Math.abs(i-e.y)<1e-14));--o)e.y=i;return o?(e.x=t,e.y=i,e):null}},Um={init:function(){Hm.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,i,n,o;return e.x=Lg(e.x-this.long0,this.over),Hm.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*n),e.x=o*i*Math.sin(e.x),e.y=o*(this.cosc0*t-this.sinc0*i*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,i,n,o,r;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,r=Dm(e.x,e.y)){var s=2*Math.atan2(r,this.R2);t=Math.sin(s),i=Math.cos(s),o=Math.asin(i*this.sinc0+e.y*t*this.cosc0/r),n=Math.atan2(e.x*t,r*this.cosc0*i-e.y*this.sinc0*t)}else o=this.phic0,n=0;return e.x=n,e.y=o,Hm.inverse.apply(this,[e]),e.x=Lg(e.x+this.long0,this.over),e},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};function Wm(e,t,i){return t*=i,Math.tan(.5*(Uf+e))*Math.pow((1-t)/(1+t),.5*i)}var Xm={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Wf&&(this.k0=.5*(1+Pg(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Wf&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Wf&&Math.abs(Math.cos(this.lat_ts))>Wf&&(this.k0=.5*this.cons*Tg(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ig(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Tg(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Wm(this.lat0,this.sinlat0,this.e))-Uf,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,i,n,o,r,s,a=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),h=Lg(a-this.long0,this.over);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=Wf&&Math.abs(l+this.lat0)<=Wf?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),e.x=this.a*t*c*Math.sin(h)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,e):(i=2*Math.atan(Wm(l,u,this.e))-Uf,o=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=Wf?(r=Ig(this.e,l*this.con,this.con*u),s=2*this.a*this.k0*r/this.cons,e.x=this.x0+s*Math.sin(a-this.long0),e.y=this.y0-this.con*s*Math.cos(a-this.long0),e):(Math.abs(this.sinlat0)<Wf?(t=2*this.a*this.k0/(1+o*Math.cos(h)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(h))),e.y=t*(this.cosX0*n-this.sinX0*o*Math.cos(h))+this.y0),e.x=t*o*Math.sin(h)+this.x0,e))},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,o,r,s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,i=this.lat0,s<=Wf?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/s),t=Math.abs(this.coslat0)<Wf?this.lat0>0?Lg(this.long0+Math.atan2(e.x,-1*e.y),this.over):Lg(this.long0+Math.atan2(e.x,e.y),this.over):Lg(this.long0+Math.atan2(e.x*Math.sin(a),s*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a)),this.over),e.x=t,e.y=i,e)}if(Math.abs(this.coslat0)<=Wf){if(s<=Wf)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,n=s*this.cons/(2*this.a*this.k0),i=this.con*Rg(this.e,n),t=this.con*Lg(this.con*this.long0+Math.atan2(e.x,-1*e.y),this.over)}else o=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=Wf?r=this.X0:(r=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/s),t=Lg(this.long0+Math.atan2(e.x*Math.sin(o),s*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)),this.over)),i=-1*Rg(this.e,Math.tan(.5*(Uf+r)));return e.x=t,e.y=i,e},names:["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],ssfn_:Wm},Km={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),r=this.e=Math.sqrt(o);this.R=this.k0*i*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+r*t)/(1-r*t));this.K=s-this.alpha*a+this.alpha*r/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+i)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),r=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(r));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*s+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,i=e.y-this.y0,n=t/this.R,o=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),a=this.lambda0+s/this.alpha,l=0,u=r,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=u,e},names:["somerc"]},Ym=1e-7,Zm={init:function(){var e,t,i,n,o,r,s,a,l,u,c,h,d,p,f=0,g=0,m=0,v=0,y=0,_=0,b=0;this.no_off=(d=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],p="object"==typeof(h=this).projName?Object.keys(h.projName)[0]:h.projName,"no_uoff"in h||"no_off"in h||-1!==d.indexOf(p)||-1!==d.indexOf(Dg(p))),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),x&&(b=this.alpha),w&&(f=this.rectified_grid_angle),x||w)g=this.longc;else if(m=this.long1,y=this.lat1,v=this.long2,_=this.lat2,Math.abs(y-_)<=Ym||(e=Math.abs(y))<=Ym||Math.abs(e-Uf)<=Ym||Math.abs(Math.abs(this.lat0)-Uf)<=Ym||Math.abs(Math.abs(_)-Uf)<=Ym)throw new Error;var S=1-this.es;t=Math.sqrt(S),Math.abs(this.lat0)>Wf?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/S),this.A=this.B*this.k0*t/e,(o=(n=this.B*t/(i*Math.sqrt(e)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(Ig(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=o=1),x||w?(x?(c=Math.asin(Math.sin(b)/n),w||(f=b)):(c=f,b=Math.asin(n*Math.sin(c))),this.lam0=g-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(r=Math.pow(Ig(this.e,y,Math.sin(y)),this.B),s=Math.pow(Ig(this.e,_,Math.sin(_)),this.B),o=this.E/r,l=(s-r)/(s+r),u=((u=this.E*this.E)-s*r)/(u+s*r),(e=m-v)<-Math.PI?v-=Zf:e>Math.PI&&(v+=Zf),this.lam0=Lg(.5*(m+v)-Math.atan(u*Math.tan(.5*this.B*(m-v))/l)/this.B,this.over),c=Math.atan(2*Math.sin(this.B*Lg(m-this.lam0,this.over))/(o-1/o)),f=b=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Yf-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(Yf+o))},forward:function(e){var t,i,n,o,r,s,a,l,u={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Uf)>Wf){if(t=.5*((r=this.E/Math.pow(Ig(this.e,e.y,Math.sin(e.y)),this.B))-(s=1/r)),i=.5*(r+s),o=Math.sin(this.B*e.x),n=(t*this.singam-o*this.cosgam)/i,Math.abs(Math.abs(n)-1)<Wf)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),s=Math.cos(this.B*e.x),a=Math.abs(s)<Ym?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+o*this.singam,s)}else l=e.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*e.y;return this.no_rot?(u.x=a,u.y=l):(a-=this.u_0,u.x=l*this.cosrot+a*this.sinrot,u.y=a*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(e){var t,i,n,o,r,s,a,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*i))-1/n),r=.5*(n+1/n),a=((s=Math.sin(this.BrA*t))*this.cosgam+o*this.singam)/r,Math.abs(Math.abs(a)-1)<Wf)l.x=0,l.y=a<0?-Uf:Uf;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=Rg(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(o*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Qm={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Wf)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Tg(this.e,t,i),o=Ig(this.e,this.lat1,t),r=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Tg(this.e,r,s),l=Ig(this.e,this.lat2,r),u=Math.abs(Math.abs(this.lat0)-Uf)<Wf?0:Ig(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Wf?this.ns=Math.log(n/a)/Math.log(o/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=Wf&&(i=Pg(i)*(Uf-2*Wf));var n,o,r=Math.abs(Math.abs(i)-Uf);if(r>Wf)n=Ig(this.e,i,Math.sin(i)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((r=i*this.ns)<=0)return null;o=0}var s=this.ns*Lg(t-this.long0,this.over);return e.x=this.k0*(o*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,e},inverse:function(e){var t,i,n,o,r,s=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+a*a),i=1):(t=-Math.sqrt(s*s+a*a),i=-1);var l=0;if(0!==t&&(l=Math.atan2(i*s,i*a)),0!==t||this.ns>0){if(i=1/this.ns,n=Math.pow(t/(this.a*this.f0),i),-9999===(o=Rg(this.e,n)))return null}else o=-Uf;return r=Lg(l/this.ns+this.long0,this.over),e.x=r,e.y=o,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Jm={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,i,n,o,r,s,a,l=e.x,u=e.y,c=Lg(l-this.long0,this.over);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(o)),s=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=a*Math.cos(s)/1,e.x=a*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,i,n,o,r,s,a,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),r=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),i=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(t)),e.x=this.long0-i/this.alfa,s=t,a=0;var u=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-e.y)<1e-10&&(a=1),s=e.y,u+=1}while(0===a&&u<15);return u>=15?null:e},names:["Krovak","krovak"]};function ev(e,t,i,n,o){return e*o-t*Math.sin(2*o)+i*Math.sin(4*o)-n*Math.sin(6*o)}function tv(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function iv(e){return.375*e*(1+.25*e*(1+.46875*e))}function nv(e){return.05859375*e*e*(1+.75*e)}function ov(e){return e*e*e*(35/3072)}function rv(e,t,i){var n=t*i;return e/Math.sqrt(1-n*n)}function sv(e){return Math.abs(e)<Uf?e:e-Pg(e)*Math.PI}function av(e,t,i,n,o){var r,s;r=e/t;for(var a=0;a<15;a++)if(r+=s=(e-(t*r-i*Math.sin(2*r)+n*Math.sin(4*r)-o*Math.sin(6*r)))/(t-2*i*Math.cos(2*r)+4*n*Math.cos(4*r)-6*o*Math.cos(6*r)),Math.abs(s)<=1e-10)return r;return NaN}var lv={init:function(){this.sphere||(this.e0=tv(this.es),this.e1=iv(this.es),this.e2=nv(this.es),this.e3=ov(this.es),this.ml0=this.a*ev(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,i,n=e.x,o=e.y;if(n=Lg(n-this.long0,this.over),this.sphere)t=this.a*Math.asin(Math.cos(o)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var r=Math.sin(o),s=Math.cos(o),a=rv(this.a,this.e,r),l=Math.tan(o)*Math.tan(o),u=n*Math.cos(o),c=u*u,h=this.es*s*s/(1-this.es);t=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),i=this.a*ev(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*r/s*c*(.5+(5-l+6*h)*c/24)}return e.x=t+this.x0,e.y=i+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,n=e.x/this.a,o=e.y/this.a;if(this.sphere){var r=o+this.lat0;t=Math.asin(Math.sin(r)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(r))}else{var s=av(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-Uf)<=Wf)return e.x=this.long0,e.y=Uf,o<0&&(e.y*=-1),e;var a=rv(this.a,this.e,Math.sin(s)),l=a*a*a/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(s),2),c=n*this.a/a,h=c*c;t=s-a*Math.tan(s)/l*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-h*(u/3+(1+3*u)*u*h/15))/Math.cos(s)}return e.x=Lg(i+this.long0,this.over),e.y=sv(t),e},names:["Cassini","Cassini_Soldner","cass"]};function uv(e,t){var i;return e>1e-7?(1-e*e)*(t/(1-(i=e*t)*i)-.5/e*Math.log((1-i)/(1+i))):2*t}var cv={init:function(){var e,t,i,n,o=Math.abs(this.lat0);if(Math.abs(o-Uf)<Wf?this.mode=this.lat0<0?1:2:Math.abs(o)<Wf?this.mode=3:this.mode=4,this.es>0)switch(this.qp=uv(this.e,1),this.mmf=.5/(1-this.es),this.apa=(t=this.es,n=[],n[0]=.3333333333333333*t,i=t*t,n[0]+=.17222222222222222*i,n[1]=.06388888888888888*i,i*=t,n[0]+=.10257936507936508*i,n[1]+=.0664021164021164*i,n[2]=.016415012942191543*i,n),this.mode){case 2:case 1:this.dd=1;break;case 3:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case 4:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=uv(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else 4===this.mode&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,i,n,o,r,s,a,l,u,c,h=e.x,d=e.y;if(h=Lg(h-this.long0,this.over),this.sphere){if(r=Math.sin(d),c=Math.cos(d),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*r+this.cosph0*c*n)<=Wf)return null;t=(i=Math.sqrt(2/i))*c*Math.sin(h),i*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<Wf)return null;i=Yf-.5*d,t=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(h),i*=n}}else{switch(a=0,l=0,u=0,n=Math.cos(h),o=Math.sin(h),r=Math.sin(d),s=uv(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=Uf+d,s=this.qp-s;break;case this.S_POLE:u=d-Uf,s=this.qp+s}if(Math.abs(u)<Wf)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),i=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*a-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*a*this.ymf,t=this.xmf*u*l*o;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(u=Math.sqrt(s))*o,i=n*(this.mode===this.S_POLE?u:-u)):t=i=0}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,o,r,s,a,l,u,c,h=e.x/this.a,d=e.y/this.a;if(this.sphere){var p,f=0,g=0;if((i=.5*(p=Math.sqrt(h*h+d*d)))>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(p)<=Wf?0:Math.asin(d*g/p),h*=g,d=f*p;break;case this.OBLIQ:i=Math.abs(p)<=Wf?this.lat0:Math.asin(f*this.sinph0+d*g*this.cosph0/p),h*=g*this.cosph0,d=(f-Math.sin(i)*this.sinph0)*p;break;case this.N_POLE:d=-d,i=Uf-i;break;case this.S_POLE:i-=Uf}t=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,d):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,d*=this.dd,(s=Math.sqrt(h*h+d*d))<Wf)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*s/this.rq),n=Math.cos(o),h*=o=Math.sin(o),this.mode===this.OBLIQ?(a=n*this.sinb1+d*o*this.cosb1/s,r=this.qp*a,d=s*this.cosb1*n-d*this.sinb1*o):(a=d*o/s,r=this.qp*a,d=s*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(r=h*h+d*d))return e.x=this.long0,e.y=this.lat0,e;a=1-r/this.qp,this.mode===this.S_POLE&&(a=-a)}t=Math.atan2(h,d),l=Math.asin(a),u=this.apa,c=l+l,i=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return e.x=Lg(this.long0+t,this.over),e.y=i,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function hv(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}var dv={init:function(){Math.abs(this.lat1+this.lat2)<Wf||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Tg(this.e3,this.sin_po,this.cos_po),this.qs1=uv(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Tg(this.e3,this.sin_po,this.cos_po),this.qs2=uv(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=uv(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Wf?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=uv(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,r=this.ns0*Lg(t-this.long0,this.over),s=o*Math.sin(r)+this.x0,a=this.rh-o*Math.cos(r)+this.y0;return e.x=s,e.y=a,e},inverse:function(e){var t,i,n,o,r,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),o=0,0!==t&&(o=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,i)),r=Lg(o/this.ns0+this.long0,this.over),e.x=r,e.y=s,e},names:["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],phi1z:function(e,t){var i,n,o,r,s=hv(.5*t);if(e<Wf)return s;for(var a=e*e,l=1;l<=25;l++)if(s+=r=.5*(o=1-(n=e*(i=Math.sin(s)))*n)*o/Math.cos(s)*(t/(1-a)-i/o+.5/e*Math.log((1-n)/(1+n))),Math.abs(r)<=1e-7)return s;return null}},pv={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,i,n,o,r,s,a,l=e.x,u=e.y;return n=Lg(l-this.long0,this.over),t=Math.sin(u),i=Math.cos(u),o=Math.cos(n),(r=this.sin_p14*t+this.cos_p14*i*o)>0||Math.abs(r)<=Wf?(s=this.x0+1*this.a*i*Math.sin(n)/r,a=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*i*o)/r):(s=this.x0+this.infinity_dist*i*Math.sin(n),a=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*o)),e.x=s,e.y=a,e},inverse:function(e){var t,i,n,o,r,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(t,this.rc),i=Math.sin(o),s=hv((n=Math.cos(o))*this.sin_p14+e.y*i*this.cos_p14/t),r=Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i),r=Lg(this.long0+r,this.over)):(s=this.phic0,r=0),e.x=r,e.y=s,e},names:["gnom"]},fv={init:function(){this.sphere||(this.k0=Tg(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,i,n=e.x,o=e.y,r=Lg(n-this.long0,this.over);if(this.sphere)t=this.x0+this.a*r*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var s=uv(this.e,Math.sin(o));t=this.x0+this.a*this.k0*r,i=this.y0+this.a*s*.5/this.k0}return e.x=t,e.y=i,e},inverse:function(e){var t,i;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=Lg(this.long0+e.x/this.a/Math.cos(this.lat_ts),this.over),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=function(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*Uf:Uf;for(var n,o,r,s,a=Math.asin(.5*t),l=0;l<30;l++)if(o=Math.sin(a),r=Math.cos(a),s=e*o,a+=n=Math.pow(1-s*s,2)/(2*r)*(t/(1-e*e)-o/(1-s*s)+.5/e*Math.log((1-s)/(1+s))),Math.abs(n)<=1e-10)return a;return NaN}(this.e,2*e.y*this.k0/this.a),t=Lg(this.long0+e.x/(this.a*this.k0),this.over)),e.x=t,e.y=i,e},names:["cea"]},gv={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,i=e.y,n=Lg(t-this.long0,this.over),o=sv(i-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*o,e},inverse:function(e){var t=e.x,i=e.y;return e.x=Lg(this.long0+(t-this.x0)/(this.a*this.rc),this.over),e.y=sv(this.lat0+(i-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"]},mv={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=tv(this.es),this.e1=iv(this.es),this.e2=nv(this.es),this.e3=ov(this.es),this.ml0=this.a*ev(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,i,n,o=e.x,r=e.y,s=Lg(o-this.long0,this.over);if(n=s*Math.sin(r),this.sphere)Math.abs(r)<=Wf?(t=this.a*s,i=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(r),i=this.a*(sv(r-this.lat0)+(1-Math.cos(n))/Math.tan(r)));else if(Math.abs(r)<=Wf)t=this.a*s,i=-1*this.ml0;else{var a=rv(this.a,this.e,Math.sin(r))/Math.tan(r);t=a*Math.sin(n),i=this.a*ev(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(n))}return e.x=t+this.x0,e.y=i+this.y0,e},inverse:function(e){var t,i,n,o,r,s,a,l,u;if(n=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=Wf)t=Lg(n/this.a+this.long0,this.over),i=0;else{var c;for(s=this.lat0+o/this.a,a=n*n/this.a/this.a+s*s,l=s,r=20;r;--r)if(l+=u=-1*(s*(l*(c=Math.tan(l))+1)-l-.5*(l*l+a)*c)/((l-s)/c-1),Math.abs(u)<=Wf){i=l;break}t=Lg(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i),this.over)}else if(Math.abs(o+this.ml0)<=Wf)i=0,t=Lg(this.long0+n/this.a,this.over);else{var h,d,p,f,g;for(s=(this.ml0+o)/this.a,a=n*n/this.a/this.a+s*s,l=s,r=20;r;--r)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*ev(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(s*(h*(f=d/this.a)+1)-f-.5*h*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*h)+(s-f)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=Wf){i=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=Lg(this.long0+Math.asin(n*h/this.a)/Math.sin(i),this.over)}return e.x=t,e.y=i,e},names:["Polyconic","American_Polyconic","poly"]},vv={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,i=e.x,n=e.y-this.lat0,o=i-this.long0,r=n/Hf*1e-5,s=o,a=1,l=0;for(t=1;t<=10;t++)a*=r,l+=this.A[t]*a;var u,c=l,h=s,d=1,p=0,f=0,g=0;for(t=1;t<=6;t++)u=p*c+d*h,d=d*c-p*h,p=u,f=f+this.B_re[t]*d-this.B_im[t]*p,g=g+this.B_im[t]*d+this.B_re[t]*p;return e.x=g*this.a+this.x0,e.y=f*this.a+this.y0,e},inverse:function(e){var t,i,n=e.x,o=e.y,r=n-this.x0,s=(o-this.y0)/this.a,a=r/this.a,l=1,u=0,c=0,h=0;for(t=1;t<=6;t++)i=u*s+l*a,l=l*s-u*a,u=i,c=c+this.C_re[t]*l-this.C_im[t]*u,h=h+this.C_im[t]*l+this.C_re[t]*u;for(var d=0;d<this.iterations;d++){var p,f=c,g=h,m=s,v=a;for(t=2;t<=6;t++)p=g*c+f*h,f=f*c-g*h,g=p,m+=(t-1)*(this.B_re[t]*f-this.B_im[t]*g),v+=(t-1)*(this.B_im[t]*f+this.B_re[t]*g);f=1,g=0;var y=this.B_re[1],_=this.B_im[1];for(t=2;t<=6;t++)p=g*c+f*h,f=f*c-g*h,g=p,y+=t*(this.B_re[t]*f-this.B_im[t]*g),_+=t*(this.B_im[t]*f+this.B_re[t]*g);var b=y*y+_*_;c=(m*y+v*_)/b,h=(v*y-m*_)/b}var x=c,w=h,S=1,C=0;for(t=1;t<=9;t++)S*=x,C+=this.D[t]*S;var M=this.lat0+C*Hf*1e5,E=this.long0+w;return e.x=E,e.y=M,e},names:["New_Zealand_Map_Grid","nzmg"]},yv={init:function(){},forward:function(e){var t=e.x,i=e.y,n=Lg(t-this.long0,this.over),o=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=o,e.y=r,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=Lg(this.long0+e.x/this.a,this.over),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e},names:["Miller_Cylindrical","mill"]},_v={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=qm(this.es)},forward:function(e){var t,i,n=e.x,o=e.y;if(n=Lg(n-this.long0,this.over),this.sphere){if(this.m)for(var r=this.n*Math.sin(o),s=20;s;--s){var a=(this.m*o+Math.sin(o)-r)/(this.m+Math.cos(o));if(o-=a,Math.abs(a)<Wf)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;t=this.a*this.C_x*n*(this.m+Math.cos(o)),i=this.a*this.C_y*o}else{var l=Math.sin(o),u=Math.cos(o);i=this.a*Fm(o,l,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=i,e},inverse:function(e){var t,i,n;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i/=this.C_x*(this.m+Math.cos(t)),this.m?t=hv((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=hv(Math.sin(t)/this.n)),i=Lg(i+this.long0,this.over),t=sv(t)):(t=Om(e.y/this.a,this.es,this.en),(n=Math.abs(t))<Uf?(n=Math.sin(t),i=Lg(this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),this.over)):n-Wf<Uf&&(i=this.long0)),e.x=i,e.y=t,e},names:["Sinusoidal","sinu"]},bv={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0},forward:function(e){for(var t=e.x,i=e.y,n=Lg(t-this.long0,this.over),o=i,r=Math.PI*Math.sin(i);;){var s=-(o+Math.sin(o)-r)/(1+Math.cos(o));if(o+=s,Math.abs(s)<Wf)break}o/=2,Math.PI/2-Math.abs(i)<Wf&&(n=0);var a=.900316316158*this.a*n*Math.cos(o)+this.x0,l=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=a,e.y=l,e},inverse:function(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var n=Lg(this.long0+e.x/(.900316316158*this.a*Math.cos(t)),this.over);n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var o=Math.asin(i);return e.x=n,e.y=o,e},names:["Mollweide","moll"]},xv={init:function(){Math.abs(this.lat1+this.lat2)<Wf||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=tv(this.es),this.e1=iv(this.es),this.e2=nv(this.es),this.e3=ov(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Tg(this.e,this.sin_phi,this.cos_phi),this.ml1=ev(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Wf?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Tg(this.e,this.sin_phi,this.cos_phi),this.ml2=ev(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ev(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,i=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var o=ev(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-o)}var r=this.ns*Lg(i-this.long0,this.over),s=this.x0+t*Math.sin(r),a=this.y0+this.rh-t*Math.cos(r);return e.x=s,e.y=a,e},inverse:function(e){var t,i,n,o;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var r=0;return 0!==i&&(r=Math.atan2(t*e.x,t*e.y)),this.sphere?(o=Lg(this.long0+r/this.ns,this.over),n=sv(this.g-i/this.a),e.x=o,e.y=n,e):(n=av(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),o=Lg(this.long0+r/this.ns,this.over),e.x=o,e.y=n,e)},names:["Equidistant_Conic","eqdc"]},wv={init:function(){this.R=this.a},forward:function(e){var t,i,n=e.x,o=e.y,r=Lg(n-this.long0,this.over);Math.abs(o)<=Wf&&(t=this.x0+this.R*r,i=this.y0);var s=hv(2*Math.abs(o/Math.PI));(Math.abs(r)<=Wf||Math.abs(Math.abs(o)-Uf)<=Wf)&&(t=this.x0,i=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,u=Math.sin(s),c=Math.cos(s),h=c/(u+c-1),d=h*h,p=h*(2/u-1),f=p*p,g=Math.PI*this.R*(a*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);r<0&&(g=-g),t=this.x0+g;var m=l+h;return g=Math.PI*this.R*(p*m-a*Math.sqrt((f+l)*(l+1)-m*m))/(f+l),i=o>=0?this.y0+g:this.y0-g,e.x=t,e.y=i,e},inverse:function(e){var t,i,n,o,r,s,a,l,u,c,h,d;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,r=(n=e.x/h)*n+(o=e.y/h)*o,h=3*(o*o/(l=-2*(s=-Math.abs(o)*(1+r))+1+2*o*o+r*r)+(2*(a=s-2*o*o+n*n)*a*a/l/l/l-9*s*a/l/l)/27)/(u=(s-a*a/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,i=e.y>=0?(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,t=Math.abs(n)<Wf?this.long0:Lg(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(n*n-o*o)+r*r))/2/n,this.over),e.x=t,e.y=i,e},names:["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"]},Sv={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))},forward:function(e){var t,i,n,o,r,s,a,l,u,c,h,d=e.x,p=e.y,f=Math.sin(e.y),g=Math.cos(e.y),m=Lg(d-this.long0,this.over);return this.sphere?Math.abs(this.sin_p12-1)<=Wf?(e.x=this.x0+this.a*(Uf-p)*Math.sin(m),e.y=this.y0-this.a*(Uf-p)*Math.cos(m),e):Math.abs(this.sin_p12+1)<=Wf?(e.x=this.x0+this.a*(Uf+p)*Math.sin(m),e.y=this.y0+this.a*(Uf+p)*Math.cos(m),e):(u=this.sin_p12*f+this.cos_p12*g*Math.cos(m),l=(a=Math.acos(u))?a/Math.sin(a):1,e.x=this.x0+this.a*l*g*Math.sin(m),e.y=this.y0+this.a*l*(this.cos_p12*f-this.sin_p12*g*Math.cos(m)),e):(t=tv(this.es),i=iv(this.es),n=nv(this.es),o=ov(this.es),Math.abs(this.sin_p12-1)<=Wf?(r=this.a*ev(t,i,n,o,Uf),s=this.a*ev(t,i,n,o,p),e.x=this.x0+(r-s)*Math.sin(m),e.y=this.y0-(r-s)*Math.cos(m),e):Math.abs(this.sin_p12+1)<=Wf?(r=this.a*ev(t,i,n,o,Uf),s=this.a*ev(t,i,n,o,p),e.x=this.x0+(r+s)*Math.sin(m),e.y=this.y0+(r+s)*Math.cos(m),e):Math.abs(d)<Wf&&Math.abs(p-this.lat0)<Wf?(e.x=e.y=0,e):(h=(c=function(e,t,i,n,o,r){const s=n-t,a=Math.atan((1-r)*Math.tan(e)),l=Math.atan((1-r)*Math.tan(i)),u=Math.sin(a),c=Math.cos(a),h=Math.sin(l),d=Math.cos(l);let p,f,g,m,v,y,_,b,x,w,S,C,M,E,k,T=s,P=100;do{if(f=Math.sin(T),g=Math.cos(T),m=Math.sqrt(d*f*(d*f)+(c*h-u*d*g)*(c*h-u*d*g)),0===m)return{azi1:0,s12:0};v=u*h+c*d*g,y=Math.atan2(m,v),_=c*d*f/m,b=1-_*_,x=0!==b?v-2*u*h/b:0,w=r/16*b*(4+r*(4-3*b)),p=T,T=s+(1-w)*r*_*(y+w*m*(x+w*v*(2*x*x-1)))}while(Math.abs(T-p)>1e-12&&--P>0);return 0===P?{azi1:NaN,s12:NaN}:(S=b*(o*o-o*(1-r)*(o*(1-r)))/(o*(1-r)*(o*(1-r))),C=1+S/16384*(4096+S*(S*(320-175*S)-768)),M=S/1024*(256+S*(S*(74-47*S)-128)),E=M*m*(x+M/4*(v*(2*x*x-1)-M/6*x*(4*m*m-3)*(4*x*x-3))),k=o*(1-r)*C*(y-E),{azi1:Math.atan2(d*f,c*h-u*d*g),s12:k})}(this.lat0,this.long0,p,d,this.a,this.f)).azi1,e.x=c.s12*Math.sin(h),e.y=c.s12*Math.cos(h),e))},inverse:function(e){var t,i,n,o,r,s,a,l,u,c,h,d,p,f,g;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y))>2*Uf*this.a?void 0:(i=t/this.a,n=Math.sin(i),o=Math.cos(i),r=this.long0,Math.abs(t)<=Wf?s=this.lat0:(s=hv(o*this.sin_p12+e.y*n*this.cos_p12/t),a=Math.abs(this.lat0)-Uf,r=Math.abs(a)<=Wf?this.lat0>=0?Lg(this.long0+Math.atan2(e.x,-e.y),this.over):Lg(this.long0-Math.atan2(-e.x,e.y),this.over):Lg(this.long0+Math.atan2(e.x*n,t*this.cos_p12*o-e.y*this.sin_p12*n),this.over)),e.x=r,e.y=s,e):(l=tv(this.es),u=iv(this.es),c=nv(this.es),h=ov(this.es),Math.abs(this.sin_p12-1)<=Wf?(s=av(((d=this.a*ev(l,u,c,h,Uf))-(t=Math.sqrt(e.x*e.x+e.y*e.y)))/this.a,l,u,c,h),r=Lg(this.long0+Math.atan2(e.x,-1*e.y),this.over),e.x=r,e.y=s,e):Math.abs(this.sin_p12+1)<=Wf?(d=this.a*ev(l,u,c,h,Uf),s=av(((t=Math.sqrt(e.x*e.x+e.y*e.y))-d)/this.a,l,u,c,h),r=Lg(this.long0+Math.atan2(e.x,e.y),this.over),e.x=r,e.y=s,e):(p=Math.atan2(e.x,e.y),f=Math.sqrt(e.x*e.x+e.y*e.y),g=function(e,t,i,n,o,r){const s=Math.atan((1-r)*Math.tan(e)),a=Math.sin(s),l=Math.cos(s),u=Math.sin(i),c=Math.cos(i),h=Math.atan2(a,l*c),d=l*u,p=1-d*d,f=p*(o*o-o*(1-r)*(o*(1-r)))/(o*(1-r)*(o*(1-r))),g=1+f/16384*(4096+f*(f*(320-175*f)-768)),m=f/1024*(256+f*(f*(74-47*f)-128));let v,y,_,b,x,w=n/(o*(1-r)*g),S=100;do{y=Math.cos(2*h+w),_=Math.sin(w),b=Math.cos(w),x=m*_*(y+m/4*(b*(2*y*y-1)-m/6*y*(4*_*_-3)*(4*y*y-3))),v=w,w=n/(o*(1-r)*g)+x}while(Math.abs(w-v)>1e-12&&--S>0);if(0===S)return{lat2:NaN,lon2:NaN};const C=a*_-l*b*c,M=r/16*p*(4+r*(4-3*p));return{lat2:Math.atan2(a*b+l*_*c,(1-r)*Math.sqrt(d*d+C*C)),lon2:t+(Math.atan2(_*u,l*b-a*_*c)-(1-M)*r*d*(w+M*_*(y+M*b*(2*y*y-1))))}}(this.lat0,this.long0,p,f,this.a,this.f),e.x=g.lon2,e.y=g.lat2,e))},names:["Azimuthal_Equidistant","aeqd"]},Cv={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,i,n,o,r,s,a,l=e.x,u=e.y;return n=Lg(l-this.long0,this.over),t=Math.sin(u),i=Math.cos(u),o=Math.cos(n),((r=this.sin_p14*t+this.cos_p14*i*o)>0||Math.abs(r)<=Wf)&&(s=1*this.a*i*Math.sin(n),a=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*i*o)),e.x=s,e.y=a,e},inverse:function(e){var t,i,n,o,r,s,a;return e.x-=this.x0,e.y-=this.y0,i=hv((t=Math.sqrt(e.x*e.x+e.y*e.y))/this.a),n=Math.sin(i),o=Math.cos(i),s=this.long0,Math.abs(t)<=Wf?(a=this.lat0,e.x=s,e.y=a,e):(a=hv(o*this.sin_p14+e.y*n*this.cos_p14/t),r=Math.abs(this.lat0)-Uf,Math.abs(r)<=Wf?(s=this.lat0>=0?Lg(this.long0+Math.atan2(e.x,-e.y),this.over):Lg(this.long0-Math.atan2(-e.x,e.y),this.over),e.x=s,e.y=a,e):(s=Lg(this.long0+Math.atan2(e.x*n,t*this.cos_p14*o-e.y*this.sin_p14*n),this.over),e.x=s,e.y=a,e))},names:["ortho"]};function Mv(e,t,i,n){var o;return e<Wf?(n.value=1,o=0):(o=Math.atan2(t,i),Math.abs(o)<=Yf?n.value=1:o>Yf&&o<=Uf+Yf?(n.value=2,o-=Uf):o>Uf+Yf||o<=-(Uf+Yf)?(n.value=3,o=o>=0?o-Qf:o+Qf):(n.value=4,o+=Uf)),o}function Ev(e,t){var i=e+t;return i<-Qf?i+=Zf:i>+Qf&&(i-=Zf),i}var kv={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Uf-Yf/2?this.face=5:this.lat0<=-(Uf-Yf/2)?this.face=6:Math.abs(this.long0)<=Yf?this.face=1:Math.abs(this.long0)<=Uf+Yf?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,i,n,o,r,s,a={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,i=e.x,5===this.face)o=Uf-t,i>=Yf&&i<=Uf+Yf?(l.value=1,n=i-Uf):i>Uf+Yf||i<=-(Uf+Yf)?(l.value=2,n=i>0?i-Qf:i+Qf):i>-(Uf+Yf)&&i<=-Yf?(l.value=3,n=i+Uf):(l.value=4,n=i);else if(6===this.face)o=Uf+t,i>=Yf&&i<=Uf+Yf?(l.value=1,n=-i+Uf):i<Yf&&i>=-Yf?(l.value=2,n=-i):i<-Yf&&i>=-(Uf+Yf)?(l.value=3,n=-i-Uf):(l.value=4,n=i>0?-i+Qf:-i-Qf);else{var u,c,h,d,p,f;2===this.face?i=Ev(i,+Uf):3===this.face?i=Ev(i,+Qf):4===this.face&&(i=Ev(i,-Uf)),d=Math.sin(t),p=Math.cos(t),f=Math.sin(i),u=p*Math.cos(i),c=p*f,h=d,1===this.face?n=Mv(o=Math.acos(u),h,c,l):2===this.face?n=Mv(o=Math.acos(c),h,-u,l):3===this.face?n=Mv(o=Math.acos(-u),h,-c,l):4===this.face?n=Mv(o=Math.acos(-c),h,u,l):(o=n=0,l.value=1)}return s=Math.atan(12/Qf*(n+Math.acos(Math.sin(n)*Math.cos(Yf))-Uf)),r=Math.sqrt((1-Math.cos(o))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(n))))),2===l.value?s+=Uf:3===l.value?s+=Qf:4===l.value&&(s+=1.5*Qf),a.x=r*Math.cos(s),a.y=r*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,e.x=a.x,e.y=a.y,e},inverse:function(e){var t,i,n,o,r,s,a,l,u,c,h,d,p={lam:0,phi:0},f={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?f.value=1:e.y>=0&&e.y>=Math.abs(e.x)?(f.value=2,t-=Uf):e.x<0&&-e.x>=Math.abs(e.y)?(f.value=3,t=t<0?t+Qf:t-Qf):(f.value=4,t+=Uf),u=Qf/12*Math.tan(t),r=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),s=Math.atan(r),(a=1-(n=Math.cos(t))*n*(o=Math.tan(i))*o*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?a=-1:a>1&&(a=1),5===this.face)l=Math.acos(a),p.phi=Uf-l,1===f.value?p.lam=s+Uf:2===f.value?p.lam=s<0?s+Qf:s-Qf:3===f.value?p.lam=s-Uf:p.lam=s;else if(6===this.face)l=Math.acos(a),p.phi=l-Uf,1===f.value?p.lam=-s+Uf:2===f.value?p.lam=-s:3===f.value?p.lam=-s-Uf:p.lam=s<0?-s-Qf:-s+Qf;else{var g,m,v;u=(g=a)*g,m=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(s))*v)>=1?0:Math.sqrt(1-u),2===f.value?(u=m,m=-v,v=u):3===f.value?(m=-m,v=-v):4===f.value&&(u=m,m=v,v=-u),2===this.face?(u=g,g=-m,m=u):3===this.face?(g=-g,m=-m):4===this.face&&(u=g,g=m,m=-u),p.phi=Math.acos(-v)-Uf,p.lam=Math.atan2(m,g),2===this.face?p.lam=Ev(p.lam,-Uf):3===this.face?p.lam=Ev(p.lam,-Qf):4===this.face&&(p.lam=Ev(p.lam,+Uf))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(p.phi=-p.phi)),p.lam+=this.long0,e.x=p.lam,e.y=p.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Tv=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Pv=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Lv=.8487,Iv=1.3523,Rv=Kf/5,Av=1/Rv,qv=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},Fv={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=Lg(e.x-this.long0,this.over),i=Math.abs(e.y),n=Math.floor(i*Rv);n<0?n=0:n>=18&&(n=17);var o={x:qv(Tv[n],i=Kf*(i-Av*n))*t,y:qv(Pv[n],i)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*Lv+this.x0,o.y=o.y*this.a*Iv+this.y0,o},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*Lv),y:Math.abs(e.y-this.y0)/(this.a*Iv)};if(t.y>=1)t.x/=Tv[18][0],t.y=e.y<0?-Uf:Uf;else{var i=Math.floor(18*t.y);for(i<0?i=0:i>=18&&(i=17);;)if(Pv[i][0]>t.y)--i;else{if(!(Pv[i+1][0]<=t.y))break;++i}var n=Pv[i],o=5*(t.y-n[0])/(Pv[i+1][0]-n[0]);o=function(e,t,i,n){for(var o=t;n;--n){var r=e(o);if(o-=r,Math.abs(r)<1e-10)break}return o}((function(e){return(qv(n,e)-t.y)/(o=e,(i=n)[1]+o*(2*i[2]+3*o*i[3]));var i,o}),o,0,100),t.x/=qv(Tv[i],o),t.y=(5*i+o)*Xf,e.y<0&&(t.y=-t.y)}return t.x=Lg(t.x+this.long0,this.over),t},names:["Robinson","robin"]},Ov={init:function(){this.name="geocent"},forward:function(e){return im(e,this.es,this.a)},inverse:function(e){return nm(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},zv={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Nv={init:function(){if(Object.keys(zv).forEach(function(e){if(typeof this[e]>"u")this[e]=zv[e].def;else{if(zv[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);zv[e].num&&(this[e]=parseFloat(this[e]))}zv[e].degrees&&(this[e]=this[e]*Xf)}.bind(this)),Math.abs(Math.abs(this.lat0)-Uf)<Wf?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<Wf?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,i,n,o,r=Math.sin(e.y),s=Math.cos(e.y),a=Math.cos(e.x);switch(this.mode){case 3:i=this.sinph0*r+this.cosph0*s*a;break;case 2:i=s*a;break;case 1:i=-r;break;case 0:i=r}switch(t=(i=this.pn1/(this.p-i))*s*Math.sin(e.x),this.mode){case 3:i*=this.cosph0*r-this.sinph0*s*a;break;case 2:i*=r;break;case 0:i*=-s*a;break;case 1:i*=s*a}return o=1/((n=i*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-i*this.sg)*this.cw*o,i=n*o,e.x=t*this.a,e.y=i*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,i,n,o={x:e.x,y:e.y};n=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*n,i=this.pn1*e.y*this.cw*n,e.x=t*this.cg+i*this.sg,e.y=i*this.cg-t*this.sg;var r=Dm(e.x,e.y);if(Math.abs(r)<Wf)o.x=0,o.y=e.y;else{var s,a;switch(a=1-r*r*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/r+r/this.pn1),s=Math.sqrt(1-a*a),this.mode){case 3:o.y=Math.asin(s*this.sinph0+e.y*a*this.cosph0/r),e.y=(s-this.sinph0*Math.sin(o.y))*r,e.x*=a*this.cosph0;break;case 2:o.y=Math.asin(e.y*a/r),e.y=s*r,e.x*=a;break;case 0:o.y=Math.asin(s),e.y=-e.y;break;case 1:o.y=-Math.asin(s)}o.x=Math.atan2(e.x,e.y)}return e.x=o.x+this.long0,e.y=o.y,e},names:["Tilted_Perspective","tpers"]},Dv={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(e){var t,i,n,o,r=e.x,s=e.y;if(r-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var a=this.radius_p/Dm(this.radius_p*Math.cos(s),Math.sin(s));if(i=a*Math.cos(r)*Math.cos(s),n=a*Math.sin(r)*Math.cos(s),o=a*Math.sin(s),(this.radius_g-i)*i-n*n-o*o*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;t=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/Dm(o,t)),e.y=this.radius_g_1*Math.atan(o/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(o/Dm(n,t)))}else"sphere"===this.shape&&(t=Math.cos(s),i=Math.cos(r)*t,n=Math.sin(r)*t,o=Math.sin(s),t=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/Dm(o,t)),e.y=this.radius_g_1*Math.atan(o/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(o/Dm(n,t))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function(e){var t,i,n,o,r=-1,s=0,a=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(e.y/this.radius_g_1),s=Math.tan(e.x/this.radius_g_1)*Dm(1,a)):(s=Math.tan(e.x/this.radius_g_1),a=Math.tan(e.y/this.radius_g_1)*Dm(1,s));var l=a/this.radius_p;if(t=s*s+l*l+r*r,(n=(i=2*this.radius_g*r)*i-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-i-Math.sqrt(n))/(2*t),r=this.radius_g+o*r,s*=o,a*=o,e.x=Math.atan2(s,r),e.y=Math.atan(a*Math.cos(e.x)/r),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(e.y/this.radius_g_1),s=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+a*a)):(s=Math.tan(e.x/this.radius_g_1),a=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+s*s)),t=s*s+a*a+r*r,(n=(i=2*this.radius_g*r)*i-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-i-Math.sqrt(n))/(2*t),r=this.radius_g+o*r,s*=o,a*=o,e.x=Math.atan2(s,r),e.y=Math.atan(a*Math.cos(e.x)/r)}return e.x=e.x+this.long0,e},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},Gv=1.340264,jv=-.081106,Bv=893e-6,Vv=.003796,$v=Math.sqrt(3)/2,Hv={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0,this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0},forward:function(e){var t=Lg(e.x-this.long0,this.over),i=e.y,n=Math.asin($v*Math.sin(i)),o=n*n,r=o*o*o;return e.x=t*Math.cos(n)/($v*(Gv+3*jv*o+r*(7*Bv+9*Vv*o))),e.y=n*(Gv+jv*o+r*(Bv+Vv*o)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t,i,n,o,r=e.y;for(o=0;o<12&&(r-=n=(r*(Gv+jv*(t=r*r)+(i=t*t*t)*(Bv+Vv*t))-e.y)/(Gv+3*jv*t+i*(7*Bv+9*Vv*t)),!(Math.abs(n)<1e-9));++o);return i=(t=r*r)*t*t,e.x=$v*e.x*(Gv+3*jv*t+i*(7*Bv+9*Vv*t))/Math.cos(r),e.y=Math.asin(Math.sin(r)/$v),e.x=Lg(e.x+this.long0,this.over),e},names:["eqearth","Equal Earth","Equal_Earth"]},Uv=1e-10;function Wv(e){var t,i,n,o=Lg(e.x-(this.long0||0),this.over),r=e.y;return t=this.am1+this.m1-Fm(r,i=Math.sin(r),n=Math.cos(r),this.en),i=n*o/(t*Math.sqrt(1-this.es*i*i)),e.x=t*Math.sin(i),e.y=this.am1-t*Math.cos(i),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Xv(e){var t,i,n,o;if(e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a,i=Dm(e.x,e.y=this.am1-e.y),o=Om(this.am1+this.m1-i,this.es,this.en),(t=Math.abs(o))<Uf)t=Math.sin(o),n=i*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(o);else{if(!(Math.abs(t-Uf)<=Uv))throw new Error;n=0}return e.x=Lg(n+(this.long0||0),this.over),e.y=sv(o),e}function Kv(e){var t,i,n=Lg(e.x-(this.long0||0),this.over),o=e.y;return i=this.cphi1+this.phi1-o,Math.abs(i)>Uv?(e.x=i*Math.sin(t=n*Math.cos(o)/i),e.y=this.cphi1-i*Math.cos(t)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Yv(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,i,n=Dm(e.x,e.y=this.cphi1-e.y);if(i=this.cphi1+this.phi1-n,Math.abs(i)>Uf)throw new Error;return t=Math.abs(Math.abs(i)-Uf)<=Uv?0:n*Math.atan2(e.x,e.y)/Math.cos(i),e.x=Lg(t+(this.long0||0),this.over),e.y=sv(i),e}var Zv={init:function(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<Uv)throw new Error;this.es?(this.en=qm(this.es),this.m1=Fm(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Xv,this.forward=Wv):(Math.abs(this.phi1)+Uv>=Uf?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Yv,this.forward=Kv)},names:["bonne","Bonne (Werner lat_1=90)"]};const Qv={OBLIQUE:{forward:function(e,t){let{x:i,y:n}=t;i+=e.long0;const o=Math.cos(i),r=Math.sin(n),s=Math.cos(n);return t.x=Lg(Math.atan2(s*Math.sin(i),e.sphip*s*o+e.cphip*r)+e.lamp),t.y=Math.asin(e.sphip*r-e.cphip*s*o),e.obliqueProjection.forward(t)},inverse:function(e,t){const i=e.obliqueProjection.inverse(t);let{x:n,y:o}=i;if(n<Number.MAX_VALUE){n-=e.lamp;const i=Math.cos(n),r=Math.sin(o),s=Math.cos(o);t.x=Math.atan2(s*Math.sin(n),e.sphip*s*i-e.cphip*r),t.y=Math.asin(e.sphip*r+e.cphip*s*i)}return t.x=Lg(t.x+e.long0),t}},TRANSVERSE:{forward:function(e,t){let{x:i,y:n}=t;i+=e.long0;const o=Math.cos(n),r=Math.cos(i);return t.x=Lg(Math.atan2(o*Math.sin(i),Math.sin(n))+e.lamp),t.y=Math.asin(-1*o*r),e.obliqueProjection.forward(t)},inverse:function(e,t){const i=e.obliqueProjection.inverse(t);let{x:n,y:o}=i;if(n<Number.MAX_VALUE){const i=Math.cos(o);n-=e.lamp,t.x=Math.atan2(i*Math.sin(n),-1*Math.sin(o)),t.y=Math.asin(i*Math.cos(n))}return t.x=Lg(t.x+e.long0),t}}},Jv={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};var ey={init:function(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",!this.o_proj)throw new Error("Missing parameter: o_proj");if("ob_tran"===this.o_proj)throw new Error("Invalid value for o_proj: "+this.o_proj);const e=tm(this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim());if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);let t;e.long0=0,this.obliqueProjection=e;const i=Object.keys(Jv),n=e=>{if(typeof this[e]>"u")return;const t=parseFloat(this[e])*Xf;if(isNaN(t))throw new Error("Invalid value for "+e+": "+this[e]);return t};for(let s=0;s<i.length;s++){const e=i[s],o=Jv[e],r=Object.entries(o);if(r.some((([e])=>typeof this[e]<"u"))){t=o;for(let e=0;e<r.length;e++){const[t,i]=r[e],o=n(t);if(typeof o>"u")throw new Error("Missing parameter: "+t+".");this[i]=o}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:o,phip:r}=function(e,t){let i,n;if(t===Jv.ROTATE){let t=e.oLongC,o=e.oLatC,r=e.oAlpha;if(Math.abs(Math.abs(o)-Uf)<=Wf)throw new Error("Invalid value for o_lat_c: "+e.o_lat_c+" should be < 90");n=t+Math.atan2(-1*Math.cos(r),-1*Math.sin(r)*Math.sin(o)),i=Math.asin(Math.cos(o)*Math.sin(r))}else if(t===Jv.NEW_POLE)n=e.oLongP,i=e.oLatP;else{let t=e.oLong1,o=e.oLat1,r=e.oLong2,s=e.oLat2,a=Math.abs(o);if(Math.abs(o)>Uf-Wf)throw new Error("Invalid value for o_lat_1: "+e.o_lat_1+" should be < 90");if(Math.abs(s)>Uf-Wf)throw new Error("Invalid value for o_lat_2: "+e.o_lat_2+" should be < 90");if(Math.abs(o-s)<Wf)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(a<Wf)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");n=Math.atan2(Math.cos(o)*Math.sin(s)*Math.cos(t)-Math.sin(o)*Math.cos(s)*Math.cos(r),Math.sin(o)*Math.cos(s)*Math.sin(r)-Math.cos(o)*Math.sin(s)*Math.sin(t)),i=Math.atan(-1*Math.cos(n-t)/Math.tan(o))}return{lamp:n,phip:i}}(this,t);this.lamp=o,Math.abs(r)>Wf?(this.cphip=Math.cos(r),this.sphip=Math.sin(r),this.projectionType=Qv.OBLIQUE):this.projectionType=Qv.TRANSVERSE},forward:function(e){return this.projectionType.forward(this,e)},inverse:function(e){return this.projectionType.inverse(this,e)},names:["General Oblique Transformation","General_Oblique_Transformation","ob_tran"]};const ty=Object.assign((function(e,t,i){var n,o,r,s=!1;return typeof t>"u"?(o=fm(e),n=dm,s=!0):(typeof t.x<"u"||Array.isArray(t))&&(i=t,o=fm(e),n=dm,s=!0),n||(n=fm(e)),o||(o=fm(t)),i?pm(n,o,i):(r={forward:function(e,t){return pm(n,o,e,t)},inverse:function(e,t){return pm(o,n,e,t)}},s&&(r.oProj=o),r)}),{defaultDatum:"WGS84",Proj:tm,WGS84:new tm("WGS84"),Point:Lm,toPoint:um,defs:Mg,nadgrid:function(e,t,i){return t instanceof ArrayBuffer?function(e,t,i){var n=!0;void 0!==i&&!1===i.includeErrorFields&&(n=!1);var o,r=new DataView(t),s=11!==(o=r).getInt32(8,!1)&&(o.getInt32(8,!0),!0),a=function(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Zg(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}(r,s),l=function(e,t,i,n){for(var o=176,r=[],s=0;s<t.nSubgrids;s++){var a=Jg(e,o,i),l=em(e,o,a,i,n),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),c=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);r.push({ll:[Yg(a.lowerLongitude),Yg(a.lowerLatitude)],del:[Yg(a.longitudeInterval),Yg(a.latitudeInterval)],lim:[u,c],count:a.gridNodeCount,cvs:Qg(l)});var h=16;!1===n&&(h=8),o+=176+a.gridNodeCount*h}return r}(r,a,s,n),u={header:a,subgrids:l};return Ug[e]=u,u}(e,t,i):{ready:Wg(e,t)}},transform:hm,mgrs:bm,version:"__VERSION__"});function iy(e,t){return ny(e,t,[]).join("")}function ny(e,t,i){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)i.push(e.nodeValue);else{let n;for(n=e.firstChild;n;n=n.nextSibling)ny(n,t,i)}return i}function oy(e,t){return function(t,i){const n=e.call(this,t,i);void 0!==n&&i[i.length-1].push(n)}}function ry(e,t,i){return function(t,i){const n=e.call(this,t,i);if(void 0!==n){const e=i[i.length-1],o=t.localName;let r;o in e?r=e[o]:(r=[],e[o]=r),r.push(n)}}}function sy(e,t,i){return function(t,i){const n=e.call(this,t,i);void 0!==n&&(i[i.length-1][t.localName]=n)}}function ay(e,t,i){let n,o;for(i=void 0!==i?i:{},n=0,o=e.length;n<o;++n)i[e[n]]=t;return i}function ly(e,t,i,n,o){return n.push(e),function(e,t,i,n){let o;for(o=t.firstElementChild;o;o=o.nextElementSibling){const t=e[o.namespaceURI];if(void 0!==t){const e=t[o.localName];void 0!==e&&e.call(n,o,i)}}}(t,i,n,o),n.pop()}!function(e){e.Proj.projections.add(zm),e.Proj.projections.add(Bm),e.Proj.projections.add(Vm),e.Proj.projections.add(Um),e.Proj.projections.add(Xm),e.Proj.projections.add(Km),e.Proj.projections.add(Zm),e.Proj.projections.add(Qm),e.Proj.projections.add(Jm),e.Proj.projections.add(lv),e.Proj.projections.add(cv),e.Proj.projections.add(dv),e.Proj.projections.add(pv),e.Proj.projections.add(fv),e.Proj.projections.add(gv),e.Proj.projections.add(mv),e.Proj.projections.add(vv),e.Proj.projections.add(yv),e.Proj.projections.add(_v),e.Proj.projections.add(bv),e.Proj.projections.add(xv),e.Proj.projections.add(wv),e.Proj.projections.add(Sv),e.Proj.projections.add(Cv),e.Proj.projections.add(kv),e.Proj.projections.add(Fv),e.Proj.projections.add(Ov),e.Proj.projections.add(Nv),e.Proj.projections.add(Dv),e.Proj.projections.add(Hv),e.Proj.projections.add(Zv),e.Proj.projections.add(ey)}(ty);class uy{read(e){if(!e)return null;if("string"==typeof e){const i=(t=e,(new DOMParser).parseFromString(t,"application/xml"));return this.readFromDocument(i)}var t;return function(e){return"documentElement"in e}(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){ke()}}function cy(e){return e.getAttributeNS("http://www.w3.org/1999/xlink","href")}function hy(e){return function(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}(iy(e,!1))}function dy(e){return iy(e,!1).trim()}const py=[null,"http://www.opengis.net/ows/1.1"],fy=ay(py,{ServiceIdentification:sy((function(e,t){return ly({},ky,e,t)})),ServiceProvider:sy((function(e,t){return ly({},Ty,e,t)})),OperationsMetadata:sy((function(e,t){return ly({},Sy,e,t)}))});class gy extends uy{constructor(){super()}readFromNode(e){return ly({},fy,e,[])||null}}const my=ay(py,{DeliveryPoint:sy(dy),City:sy(dy),AdministrativeArea:sy(dy),PostalCode:sy(dy),Country:sy(dy),ElectronicMailAddress:sy(dy)}),vy=ay(py,{Value:ry((function(e,t){return dy(e)}))}),yy=ay(py,{AllowedValues:sy((function(e,t){return ly({},vy,e,t)}))}),_y=ay(py,{Phone:sy((function(e,t){return ly({},Cy,e,t)})),Address:sy((function(e,t){return ly({},my,e,t)}))}),by=ay(py,{HTTP:sy((function(e,t){return ly({},xy,e,t)}))}),xy=ay(py,{Get:ry((function(e,t){const i=cy(e);if(i)return ly({href:i},My,e,t)})),Post:void 0}),wy=ay(py,{DCP:sy((function(e,t){return ly({},by,e,t)}))}),Sy=ay(py,{Operation:function(e,t){const i=e.getAttribute("name"),n=ly({},wy,e,t);if(!n)return;t[t.length-1][i]=n}}),Cy=ay(py,{Voice:sy(dy),Facsimile:sy(dy)}),My=ay(py,{Constraint:ry((function(e,t){const i=e.getAttribute("name");if(i)return ly({name:i},yy,e,t)}))}),Ey=ay(py,{IndividualName:sy(dy),PositionName:sy(dy),ContactInfo:sy((function(e,t){return ly({},_y,e,t)}))}),ky=ay(py,{Abstract:sy(dy),AccessConstraints:sy(dy),Fees:sy(dy),Title:sy(dy),ServiceTypeVersion:sy(dy),ServiceType:sy(dy)}),Ty=ay(py,{ProviderName:sy(dy),ProviderSite:sy(cy),ServiceContact:sy((function(e,t){return ly({},Ey,e,t)}))}),Py=[null,"http://www.opengis.net/wmts/1.0"],Ly=[null,"http://www.opengis.net/ows/1.1"],Iy=ay(Py,{Contents:sy((function(e,t){return ly({},Ay,e,t)}))});class Ry extends uy{constructor(){super(),this.owsParser_=new gy}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let i=this.owsParser_.readFromNode(e);return i?(i.version=t,i=ly(i,Iy,e,[]),i||null):null}}const Ay=ay(Py,{Layer:ry((function(e,t){return ly({},qy,e,t)})),TileMatrixSet:ry((function(e,t){return ly({},jy,e,t)}))}),qy=ay(Py,{Style:ry((function(e,t){const i=ly({},Fy,e,t);if(!i)return;const n="true"===e.getAttribute("isDefault");return i.isDefault=n,i})),Format:ry(dy),TileMatrixSetLink:ry((function(e,t){return ly({},Oy,e,t)})),Dimension:ry((function(e,t){return ly({},Dy,e,t)})),ResourceURL:ry((function(e,t){const i=e.getAttribute("format"),n=e.getAttribute("template"),o=e.getAttribute("resourceType"),r={};return i&&(r.format=i),n&&(r.template=n),o&&(r.resourceType=o),r}))},ay(Ly,{Title:sy(dy),Abstract:sy(dy),WGS84BoundingBox:sy(Vy),BoundingBox:ry((function(e,t){const i=e.getAttribute("crs"),n=ly([],Gy,e,t);if(2==n.length)return{extent:bt(n),crs:i}})),Identifier:sy(dy)})),Fy=ay(Py,{LegendURL:ry((function(e,t){const i={};return i.format=e.getAttribute("format"),i.href=cy(e),i}))},ay(Ly,{Title:sy(dy),Identifier:sy(dy)})),Oy=ay(Py,{TileMatrixSet:sy(dy),TileMatrixSetLimits:sy((function(e,t){return ly([],zy,e,t)}))}),zy=ay(Py,{TileMatrixLimits:oy((function(e,t){return ly({},Ny,e,t)}))}),Ny=ay(Py,{TileMatrix:sy(dy),MinTileRow:sy(hy),MaxTileRow:sy(hy),MinTileCol:sy(hy),MaxTileCol:sy(hy)}),Dy=ay(Py,{Default:sy(dy),Value:ry(dy)},ay(Ly,{Identifier:sy(dy)})),Gy=ay(Ly,{LowerCorner:oy($y),UpperCorner:oy($y)}),jy=ay(Py,{WellKnownScaleSet:sy(dy),TileMatrix:ry((function(e,t){return ly({},By,e,t)}))},ay(Ly,{SupportedCRS:sy(dy),Identifier:sy(dy),BoundingBox:sy(Vy)})),By=ay(Py,{TopLeftCorner:sy($y),ScaleDenominator:sy((function(e){return function(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}(iy(e,!1))})),TileWidth:sy(hy),TileHeight:sy(hy),MatrixWidth:sy(hy),MatrixHeight:sy(hy)},ay(Ly,{Identifier:sy(dy)}));function Vy(e,t){const i=ly([],Gy,e,t);if(2==i.length)return bt(i)}function $y(e,t){const i=dy(e).split(/\s+/);if(!i||2!=i.length)return;const n=+i[0],o=+i[1];return isNaN(n)||isNaN(o)?void 0:[n,o]}let Hy=(e=class{static getProjection(t){const i="EPSG:3857";let n;if(t&&t.epsg){if(n=e.prjMap.get(t.epsg),n)return n;if(n=fn(t.epsg),!n){if(!t.proj4)throw Error("Prj4j");ty.defs(t.epsg,t.proj4),function(e){const t=Object.keys(e.defs),i=t.length;let n,o;for(n=0;n<i;++n){const i=t[n];if(!Ri(i)){const t=e.defs(i);let n=t.units;!n&&"longlat"===t.projName&&(n="degrees"),pn(new _i({code:i,axisOrientation:t.axis,metersPerUnit:t.to_meter,units:n}))}}for(n=0;n<i;++n){const r=t[n],s=Ri(r);for(o=0;o<i;++o){const i=t[o],n=Ri(i);if(!Fi(r,i))if(e.defs[r]===e.defs[i])mn([s,n]);else{const t=e(r,i);_n(s,n,In(s,n,t.forward),In(n,s,t.inverse))}}}}(ty),n=new _i({code:t.epsg,extent:t.prjExtent})}n&&e.prjMap.set(t.epsg,n)}else n=e.prjMap.get(i),n||(n=new _i({code:i}),e.prjMap.set(i,n));return n}static toLonLat(t,i){return e.transformCoordinate(t,i,"EPSG:4326")}static fromLonLat(t,i){return e.transformCoordinate(t,"EPSG:4326",i)}static fromLonLatCoordinate(t,i){return e.transformCoordinate(t,"EPSG:4326",i)}static transformCoordinate(e,t,i){return Mn(e,t,i)}static getExtentFrom4326(t,i="EPSG:3857"){return e.getExtentFromTransform(t,"EPSG:4326",i)}static transformExtent(t,i,n="EPSG:3857"){e.getExtentFromTransform(t,i,n)}static getExtentFromTransform(e,t,i="EPSG:3857"){return Qt(e,Cn(t,i))}static transformGeometry(e,t,i="EPSG:3857"){return e.transform(t,i)}static transformFeature(e,t,i="EPSG:3857"){const n=e.getGeometry().transform(t,i);if(e.setGeometry)return e.setGeometry(n),e;if(n){const t=new eh(n);return t.setProperties(e.getProperties()),t}}static transformFeatures(e,t,i="EPSG:3857"){const n=[];return e&&e.forEach((e=>{const o=this.transformFeature(e,t,i);o&&n.push(o)})),n}static createWMTSTileGrid(t){const i=t.rule,n=e.tileGridMap.get(i);if(n)return n;const o=[],r=[];let s=10;for(let e in t.resolutions){const i=Number(e);o[i]=e,r[i]=t.resolutions[e],s=Math.min(i,s)}if(s>0)for(let e=s;e>0;e--){let t=e-1;null==o[t]&&null!=r[e]&&(o[t]=t.toString(),r[t]=2*r[e])}let a=256;a=Array.isArray(t.tileSize)?t.tileSize[0]:t.tileSize;const l={origin:t.origin,extent:t.extent,resolutions:r,matrixIds:o,tileSize:a},u=new Tc(l);return e.tileGridMap.set(i,u),u}static getTDTTileGrid(t=!0){const i=t?"W":"C",n=e.tileGridMap.get(i);if(n)return n;const o=t?e.EPSG3857Extent:e.EPSG4326Extent,r=Kt(o)/256,s={};for(var a=1;a<22;++a)s[a.toString()]=r/Math.pow(2,a);const l={rule:i,origin:Wt(o),resolutions:s,tileSize:[256,256]},u=e.createWMTSTileGrid(l);return u&&e.tileGridMap.set(i,u),u}static async getProjectionOnline(t,i="https://epsg.gis.digsur.com/epsg"){const n=t.toLocaleLowerCase();let o="";if(n.startsWith("epsg:"))o=n.substring(5);else{const e=Number(n);Af(e)&&(o=e.toString())}if(!o||o.length<=1)throw new Error("EPSG"+t);let r,s=!0;if("4490"===o){const t={epsg:"EPSG:"+o,proj4:"+proj=longlat +ellps=GRS80 +no_defs +type=crs",prjExtent:[-180,-90,180,90]};r=e.getProjection(t)}else{const n=i.endsWith("/")?i+o:i+"/"+o,a=await fetch(n).then((function(e){return e.json()})).catch((e=>{throw new Error("EPSG"+t)}));if(!a||!a.code)throw new Error("EPSG"+t);s="geographic"===a.kind;const l=(s?a.bbox:a.pbox).split(",").map((e=>Number(e))),u={epsg:"EPSG:"+o,proj4:a.proj4,prjExtent:l};r=e.getProjection(u)}return{projection:r,isGeographic:s}}static isGeographic(e){let t=!0;const i=e.getUnits();if(!i)throw new Error("projection.getUnits()");return t="degrees"===i||"radians"===i,t}static async getWMTSCapabilities(e,t){if(!e||!t)throw new Error("");const i=`${e}?layer=${t}&Service=WMTS&Request=GetCapabilities`,n=await fetch(i).then((function(e){return e.text()})).catch((e=>{throw new Error("GetCapabilities")}));if(!n)throw new Error("GetCapabilities");const o=(new Ry).read(n);return o.wmtsURL=e,o}static getScaleToResolutionParam(e=!0,t=!0){return(t?.0002645833333:28e-5)/(e?111319.49079327358:1)}static computeScaleByResolution(e,t=!0,i=!0){return e/this.getScaleToResolutionParam(t,i)}static computeResolutionByScale(e,t=!0,i=!0){return e*this.getScaleToResolutionParam(t,i)}static async getXMLOptionsFromCapabilities(t,i=!0,n="https://epsg.gis.digsur.com/epsg"){const o=t.Contents.Layer,r=t.wmtsURL;let s;if(o.length>0&&(s=o[0]),!s)return null;const a=s.Identifier,l=s.TileMatrixSetLink[0].TileMatrixSet,u=s.WGS84BoundingBox;let c=s.Format[0];const h=s.Style[0].Identifier,d=t.Contents.TileMatrixSet[0];let p;const f=d.SupportedCRS,g=f.toLocaleUpperCase();g.startsWith("EPSG:")&&(p=fn(g));let m=!0;if(p){const e=p.getUnits();m="degrees"===e||"radians"===e}else{const e=f.lastIndexOf(":"),t=f.substring(e+1);if(p=fn("EPSG:"+t),p){const e=p.getUnits();m="degrees"===e||"radians"===e}else{const e=await this.getProjectionOnline(t,n);e&&(m=e.isGeographic,p=e.projection)}}const v=p.getExtent(),y=[v[0],v[3]],_=this.getScaleToResolutionParam(m,i),b=d.TileMatrix,x=b[0],w=x.TileWidth,S=x.TileHeight,C={},M=b.length;for(let e=0;e<M;e++){const t=b[e],i=t.Identifier,n=t.ScaleDenominator*_;C[i]=n}const E={rule:l,origin:y,tileSize:[w,S],resolutions:C};return{wmtsURL:r,layerName:a,layerExtent:u,tilegrid:e.createWMTSTileGrid(E),projection:p,style:h,format:c,tileMatrixSet:l}}},i(e,"prjMap",new Map),i(e,"tileGridMap",new Map),i(e,"EPSG4326Extent",[-180,-90,180,90]),i(e,"EPSG3857Extent",[-20037508.34,-20037508.34,20037508.34,20037508.34]),e);class Uy{tdtKeys=[];xmap;constructor(e,t){e&&(this.xmap=e,this.tdtKeys=[...t])}setTDTKeys(e){e&&e.length>0&&(this.tdtKeys=[...this.tdtKeys,...e])}addWMTSLayerByOptions2(e,t,i,n){const o="grid",r=i.layer,s=r;i.crossOrigin="anonymous",t.source=new cd(i);const a={lyrID:s,lyrName:i.layer,lyrType:o};t.properties?t.properties=Df(t.properties,a):t.properties=a;const l=new Mc(t);e.map.addLayer(l);const u={id:s,name:r,alias:n,minZoom:t.minZoom??1,maxZoom:t.maxZoom??24,visible:t.visible??!0,opacity:t.opacity??1,type:o};return e.registerLayer(l,u),l}addWMTSLayerByOptions(e,t,i){const n=t.layer,o="grid",r=t.layer;t.crossOrigin="anonymous",e.source=new cd(t);const s={lyrID:n,lyrName:t.layer,lyrType:o};e.properties?e.properties=Df(e.properties,s):e.properties=s;const a=new Mc(e);this.xmap.map.addLayer(a);const l={id:n,name:r,alias:i,minZoom:e.minZoom??1,maxZoom:e.maxZoom??24,visible:e.visible??!0,opacity:e.opacity??1,type:o};return this.xmap.registerLayer(a,l),a}addWMTSLayer2(e,t,i,n,o,r,s,a,l){const u=r??this.xmap.map.getView().getProjection(),c=o??Hy.getTDTTileGrid(!0),h=t??Of(),d="grid",p=new Mc({opacity:1,source:new cd({crossOrigin:"anonymous",layer:t,matrixSet:i,format:"image/png",projection:u,url:n,tileGrid:c,style:s??"default",wrapX:!0}),minZoom:a,maxZoom:l,properties:{lyrID:h,lyrName:t,lyrType:d}});this.xmap.map.addLayer(p);const f={id:h,name:t,alias:e,minZoom:a,maxZoom:l,visible:!0,opacity:1,type:d};return this.xmap.registerLayer(p,f),p}addWMTSLayer(e,t,i,n,o,r,s="KVP",a="image/png"){const l=o??this.xmap.map.getView().getProjection(),u=n??Hy.getTDTTileGrid(!0),c=e??Of(),h="grid",d=new Mc({opacity:1,source:new cd({crossOrigin:"anonymous",layer:e,matrixSet:t,format:a,projection:l,requestEncoding:s,url:i,tileGrid:u,style:r??"default",wrapX:!0}),properties:{lyrID:c,lyrName:e,lyrType:h}});this.xmap.map.addLayer(d);const p={id:c,name:e,minZoom:1,maxZoom:24,visible:!0,opacity:1,type:h};return this.xmap.registerLayer(d,p),d}addWMTSLayerSelf(e,t){const i=e.prjInfo,n=Hy.getProjection(i),o=e.tileSchema,r=Hy.createWMTSTileGrid(o),s={minZoom:e.minlevel,maxZoom:e.maxlevel,opacity:1,visible:!0,properties:{bounds:e.bounds,center:e.center,level:e.level}},a={tileGrid:r,projection:n,layer:t,style:e.style||"default",matrixSet:o.rule,url:e.tileUrl,format:"image/png"},l=this.addWMTSLayerByOptions(s,a);return this.xmap.map&&e.bounds&&this.xmap.zoomToExtent(e.bounds),l}getTDTAlias(e){let t="";switch(e){case"vec_c":case"vec_w":t="";break;case"img_c":case"img_w":t="";break;case"cva_c":case"cva_w":t="";break;case"cia_c":case"cia_w":t="";break;case"ter_c":case"ter_w":t="";break;case"cta_c":case"cta_w":t=""}return t}addTDTLayer(e="img_c",t){if(!this.xmap||!this.xmap.map)throw Error("XMap");const i=this.xmap.map;if(e.indexOf("_")<0)return;const n=e.split("_"),o=n[0],r=n[1],s="w"===r||"W"===r,a=Hy.getTDTTileGrid(s),l=s?"EPSG:3857":"EPSG:4326",u=this.getTDTUrls(e,this.tdtKeys);let c="grid";("cva"===o||"cia"===o)&&(c="symbol");const h=e.toLocaleLowerCase(),d=new Mc({source:new cd({crossOrigin:"anonymous",urls:u,layer:o,style:"default",matrixSet:r,format:"tiles",wrapX:!0,projection:l,tileGrid:a}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:h,lyrName:e,lyrType:c,lyrGroup:""}});i.addLayer(d);const p={id:h,name:e,alias:`${t}[${e}]`,group:"",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:c};return this.xmap.registerLayer(d,p),d}addTDTLayerOnly(e,t){if(!this.xmap||!this.xmap.map)throw Error("XMap");const i=this.xmap;if(e.indexOf("_")<0)return;const n=e.split("_"),o=n[0],r=n[1],s="w"===r||"W"===r,a=Hy.getTDTTileGrid(s),l=s?"EPSG:3857":"EPSG:4326",u=this.getTDTUrls(e,this.tdtKeys);let c="grid";("cva"===o||"cia"===o)&&(c="symbol");const h=e.toLocaleLowerCase()??Of(),d=new Mc({source:new cd({crossOrigin:"anonymous",urls:u,layer:o,style:"default",matrixSet:r,format:"tiles",wrapX:!0,projection:l,tileGrid:a}),minZoom:1,maxZoom:18,properties:{lyrID:h,lyrName:e,lyrType:c,lyrGroup:""}});return i.map.addLayer(d),d}getTDTUrls(e,t){const i=[],n=t.length;if(0===n)return i;let o=t[0];for(let r=0;r<8;r++){n>1&&(o=t[Ff(0,n-1)]);const s=`https://t${r}.tianditu.gov.cn/${e}/wmts?tk=${o}`;i.push(s)}return i}addWMTSDebugLayer(e){const t=e.getSource();return this.addTileDebugLayer(t.getTileGrid(),t.getProjection())}addTileDebugLayer(e,t){if(!this.xmap||!this.xmap.map)return;const i=new Mc({source:new ld({projection:t,tileGrid:e}),properties:{lyrID:"debugLayer",lyrName:"debugLayer",lyrType:"grid"}});return this.xmap.map.addLayer(i),i}addLocalTDTLayerXYZ(e,t){e&&t.forEach((t=>{this.addSingleLocalTDTLayerXYZ(e,t)}))}addSingleLocalTDTLayerXYZ(e,t){const i=e;if(i){const e=t.toLocaleLowerCase(),n=this.getTDTAlias(e),o=e.split("_"),r=o[0],s=o[1],a=fn("w"===s||"W"===s?"EPSG:3857":"EPSG:4326");let l="grid";("cva"===r||"cia"===r)&&(l="symbol");const u=e??Of(),c=i.replace("{layerName}",e),h=new Mc({source:new Jc({url:c,projection:a}),minZoom:1,maxZoom:18,properties:{center:[108.95,34.5],level:10,bounds:[-180,-90,180,90],lyrID:u,lyrName:e,lyrType:l,lyrGroup:""}});this.xmap.map.addLayer(h);const d={id:u,name:e,alias:`${n}[${e}]`,group:"",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:l};this.xmap.registerLayer(h,d)}}addWMTSLayerByXMLOptions(e){this.addWMTSLayer(e.layerName,e.tileMatrixSet,e.wmtsURL,e.tilegrid,e.projection,e.style,"KVP",e.format),e.layerExtent&&this.xmap.zoomToExtent(e.layerExtent)}}const Wy={img:"https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer",vec:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",ter:"https://server.arcgisonline.com/arcgis/rest/services/services/World_Physical_Ma/MapServer"},Xy={img:"ArcGIS",vec:"ArcGIS",ter:"ArcGIS"};let Ky=class{static createLayer(e){const t="arcgis",i=e.toLocaleLowerCase(),n=Wy[i];if(!n)return;const o=Xy[i],r=`${t}_${i}`,s="grid";return{layer:new Mc({source:new ad({url:n,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:r,lyrName:r,lyrType:s,lyrGroup:t}}),layerItem:{id:r,name:r,alias:o,group:t,minZoom:0,maxZoom:23,visible:!0,opacity:1,type:s}}}};const Yy={img:"",vec:""};let Zy=class{static createLayer(e){const t="baidu",i=e.toLocaleLowerCase(),n=Yy[i];if(!n)return;const o=`${t}_${i}`;return{layer:new Mc({source:new pd({key:e,projection:hd}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:o,lyrName:o,lyrType:"grid",lyrGroup:t}}),layerItem:{id:o,name:o,alias:n,group:t,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}};const Qy={img:"https://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",vec:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}",ter:"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=8&x={x}&y={y}&z={z}"},Jy={img:"",vec:"",ter:""};let e_=class{static createLayer(e){const t="google",i=e.toLocaleLowerCase(),n=Qy[i];if(!n)return;const o=Jy[i],r=`${t}_${i}`,s="grid";return{layer:new Mc({source:new Jc({url:n,wrapX:!1,projection:"EPSG:4326"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:r,lyrName:r,lyrType:s,lyrGroup:t}}),layerItem:{id:r,name:r,alias:o,group:t,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:s}}}};const t_={img:"https://www.google.com.hk/maps/vt?lyrs=s&x={x}&y={y}&z={z}",vec:"https://www.google.com.hk/maps/vt?lyrs=m&x={x}&y={y}&z={z}",cva:"https://www.google.com.hk/maps/vt?lyrs=h&x={x}&y={y}&z={z}",ter:"https://www.google.com.hk/maps/vt?lyrs=t,r&x={x}&y={y}&z={z}",img_cia:"https://www.google.com.hk/maps/vt?lyrs=y&x={x}&y={y}&z={z}"},i_={img:"",vec:"",cva:"",ter:"",img_cia:"+"};let n_=class{static createLayer(e){const t="google",i=e.toLocaleLowerCase(),n=t_[i];if(!n)return;const o=i_[i],r=`${t}_${i}`;return{layer:new Mc({source:new Jc({url:n,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:r,lyrName:r,lyrType:"grid",lyrGroup:t}}),layerItem:{id:r,name:r,alias:o,group:t,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}};const o_={img:"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw",vec:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGF2aWRnb256YWxlenBlcmV6ODEiLCJhIjoiY2xmd2RoamNsMDJ0ZTNjbzk1cTV5bmo5NyJ9.hSZux6zOenlV7TDy4amnaw"},r_={img:"Mapbox",vec:"Mapbox"};let s_=class{static createLayer(e){const t="mapbox",i=e.toLocaleLowerCase(),n=o_[i];if(!n)return;const o=r_[i],r=`${t}_${i}`;return{layer:new Mc({source:new Jc({url:n,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:r,lyrName:r,lyrType:"grid",lyrGroup:t}}),layerItem:{id:r,name:r,alias:o,group:t,minZoom:1,maxZoom:20,visible:!0,opacity:1,type:"grid"}}}};const a_={img:"https://p{1-3}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",vec:"https://rt{1-3}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&scene=0&version=347"},l_={img:"",vec:""};let u_=class{static createLayer(e){const t=e.toLocaleLowerCase(),i=a_[t];if(!i)return;const n=l_[t],o=`qq_${t}`;return{layer:new Mc({source:new Jc({url:i,projection:"EPSG:3857"}),properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:o,lyrName:o,lyrType:"grid",lyrGroup:"qq"}}),layerItem:{id:o,name:o,alias:n,group:"qq",minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"}}}};const c_=[{id:"OSM_VEC",label:"OSM",type:"osm",img:"/img/basicimage/osm.png",layers:["osm"]},{id:"TDT_VEC",label:"-",type:"tdt",img:"/img/basicimage/tdt_vec.png",layers:["vec_w","cva_w"]},{id:"TDT_IMG",label:"-",type:"tdt",img:"/img/basicimage/tdt_img.png",layers:["img_w","cia_w"]},{id:"TDT_TER",label:"",type:"tdt",img:"/img/basicimage/tdt_ter_cta.png",layers:["ter_w","cta_w"]},{id:"ARCGIS_IMG",label:"ArcGIS",type:"arcgis",img:"/img/basicimage/arcgis_img.png",layers:["arcgis_img"]},{id:"ARCGIS_VEC",label:"ArcGIS",type:"arcgis",img:"/img/basicimage/arcgis_vec.png",layers:["arcgis_vec"]},{id:"ARCGIS_TER",label:"ArcGIS",type:"arcgis",img:"/img/basicimage/arcgis_ter.png",layers:["arcgis_ter"]},{id:"Mapbox_VEC",label:"Mapbox",type:"mapbox",img:"/img/basicimage/mapbox_vec.png",layers:["mapbox_vec"]},{id:"Mapbox_IMG",label:"Mapboxv9",type:"mapbox",img:"/img/basicimage/mapbox_img.png",layers:["mapbox_img"]},{id:"Google_VEC",label:"",type:"google",img:"/img/basicimage/google_vec.png",layers:["google_vec"]},{id:"Google_IMG",label:"",type:"google",img:"/img/basicimage/google_img.png",layers:["google_img"]},{id:"Google_IMG_CIA",label:"+",type:"google",img:"/img/basicimage/google_img_cia.png",layers:["google_img_cia"]},{id:"Google_TER",label:"",type:"google",img:"/img/basicimage/google_ter.png",layers:["google_ter"]},{id:"Google_VEC_CVA",label:"",type:"google",img:"/img/basicimage/google_cva.png",layers:["google_cva"]},{id:"BING_VEC",label:"Bing",type:"bing",img:"/img/basicimage/basic_bingimg.jpg",layers:["bing_vec"]},{id:"BING_IMG",label:"Bing",type:"bing",img:"/img/basicimage/basic_tdtimg.jpg",layers:["bing_img"]},{id:"GD_VEC",label:"",type:"gaode",img:"/img/basicimage/gaode_vec.png",layers:["gaode_vec"]},{id:"GD_IMG",label:"",type:"gaode",img:"/img/basicimage/gaode_img.png",layers:["gaode_img"]},{id:"QQ_VEC",label:"",type:"qq",img:"/img/basicimage/qq_vec.png",layers:["qq_vec"]},{id:"QQ_IMG",label:"",type:"qq",img:"/img/basicimage/qq_img.png",layers:["qq_img"]},{id:"BAIDU_VEC",label:"",type:"baidu",img:"/img/basicimage/baidu_vec.png",layers:["baidu_vec"]},{id:"BAIDU_IMG",label:"",type:"baidu",img:"/img/basicimage/baidu_img.png",layers:["baidu_img"]}];let h_=class e{target;_TDTKeys=["1eafc8f4338343058a4876033f55b7b6","587e4b30b61cde5c55680135140dc980","fac3d52ef3ed4f1d18a79a9776dcf4f4","5f2cd4464e3dff59e381d6716cebbc80","f7b2c7226b59e6578deb7ae495d34526","fdcb5a9013aab146c4d9d6339359cc3e","1eafc8f4338343058a4876033f55b7b6"];map;mapEventBus=Hd;isMainSync=!1;digits=4;defaultHomeView={zoom:5,center:[116.46229441189399,40.24876149]};mapGroup="map";_targetContainer="";postionStatusHTMLElement;postionStatus={postion:"",zoom:"",center:"",epsgInfo:"EPSG:3857"};currentPosition;positionProjection=fn("EPSG:4326");layerManager;isInitSuccess=!1;_WMTSTool;InteractionsDiction=new Map;ControlsDiction=new Map;isInternet=!0;_printTool=void 0;mapMenuState=_({layerTree:!1,dataPanel:!0,location:!1,drawTool:!1,measureTool:!1,swipeTool:!1,otherTool:!1,printTool:!1,selectTool:!1,popupPanel:!1,tagState:!1});static initByMapConfig(t){const i=new e(t.id,t.group,t.hasLayerManager);return t.projInfo&&(t.viewOptions.Projection=Hy.getProjection(t.projInfo)),i.initMapView(t.viewOptions),t.layers&&(!1===t.isInternet&&(i.isInternet=!1),t.layers.forEach((e=>{i.isInternet?i.addOnlineLayer(e):i.addOnlineLayer(e,t.tdtXYZLocalURL)}))),t.controls&&t.controls.forEach((e=>{i.addDefaultControl(e)})),t.interactions&&t.interactions.forEach((e=>{i.addDefaultInteraction(e)})),i}constructor(e="map",t="map",i=!0){this.target=e,this.mapGroup=t;const n=document.getElementById(e);this._targetContainer=e+"_Container",n&&(this.isInitSuccess=!0),this.map=new Vu({target:this.isInitSuccess?this.target:void 0}),this.map.on("moveend",this.onMoveEnd.bind(this)),i&&(this.layerManager=new Bf(this,this.target)),this.postionStatusHTMLElement=function(e,t,i){let n=document.createElement(e);return n.className=t,i&&i.appendChild(n),n}("div","ol-mouse-position xmap-position",n),this.map.on("pointermove",this.pointerMoveHandler.bind(this)),this.map.on("moveend",this.onMapMoveEndHandler.bind(this))}mapPrj;pointerMoveHandler(e){this.currentPosition=[...e.coordinate];let t=e.coordinate;const i=this.MapView.getProjection();t=Hy.toLonLat(t,i);const n=ri(t,this.digits);this.postionStatus.postion=`${n}`,this.refreshPostionStatus()}onMapMoveEndHandler(e){const t=this.MapView,i=t.getZoom();this.postionStatus.zoom=`${i.toFixed(1)}`;let n=t.getCenter();n=Hy.toLonLat(n,t.getProjection());const o=ri(n,this.digits);this.postionStatus.center=`${o}`,this.refreshPostionStatus()}refreshPostionStatus(){this.postionStatusHTMLElement&&(this.postionStatusHTMLElement.innerHTML=`${this.postionStatus.epsgInfo} ${this.postionStatus.zoom} ${this.postionStatus.center} ${this.postionStatus.postion}`)}get targetContainer(){return this._targetContainer}get CurrentPosition(){return this.currentPosition}get WMTSTool(){return this._WMTSTool||(this._WMTSTool=new Uy(this,this._TDTKeys)),this._WMTSTool}get PrintTool(){return this._printTool||(this._printTool=new jf(this.map)),this._printTool}initMapView(e){this.isInitSuccess||this.map.setTarget(this.target),e.projection||(e.projection="EPSG:3857"),e.center&&(this.defaultHomeView.center=[...e.center]),e.zoom&&(this.defaultHomeView.zoom=e.zoom),e.center=Hy.fromLonLat(e.center,e.projection),qf(e.projection)||void 0===e.projection?this.postionStatus.epsgInfo=e.projection??"EPSG:3857":this.postionStatus.epsgInfo=e.projection.getCode();const t=new $o(e);return this.setView(t),t}get TDTKey(){const e=Ff(0,this._TDTKeys.length-1);return this._TDTKeys[e]}set TDTKeys(e){e&&e.length>0&&this._TDTKeys.push(...e)}addOnlineLayer(e,t=""){const i=e.toLocaleLowerCase();if(i.endsWith("_c")||i.endsWith("_w")){const e=this.WMTSTool.getTDTAlias(i);e&&(this.isInternet?this.WMTSTool.addTDTLayer(i,e):t&&this.WMTSTool.addSingleLocalTDTLayerXYZ(t,i))}else{if(!this.isInternet)throw Error("");if("osm"===i){const e="grid",t=new Mc({source:new Kh,properties:{center:[108.95,34.5],level:8,bounds:[-180,-90,180,90],lyrID:i,lyrName:"osm",lyrType:e,lyrGroup:"osm"}});this.map.addLayer(t);const n={id:i,name:i,alias:"osm",group:i,minZoom:1,maxZoom:18,visible:!0,opacity:1,type:"grid"};this.registerLayer(t,n)}else{const e=i.indexOf("_"),t=i.substring(0,e),n=i.substring(e+1);let o;switch(t){case"arcgis":o=Ky.createLayer(n);break;case"gaode":o=e_.createLayer(n);break;case"google":o=n_.createLayer(n);break;case"baidu":o=Zy.createLayer(n);break;case"mapbox":o=s_.createLayer(n);break;case"qq":o=u_.createLayer(n)}if(o){const{layer:e,layerItem:t}=o;this.map.addLayer(e),this.registerLayer(e,t)}}}}get LayerManager(){return this.layerManager}removeLayer(e){return this.map.removeLayer(e)}changeLayerOrder(e,t){const i=this.map.getLayers(),n=i.removeAt(e);n&&i.insertAt(t,n)}addDefaultControl(e){const t=e.key.toLocaleLowerCase(),i=this.DefaultControlKeys[t];if(i)switch(i){case"target":const t=new su({color:"red",width:2}),n=[new au({image:new tu({points:4,radius:11,radius2:0,stroke:new su({color:"#fff",width:3})})}),new au({image:new tu({points:4,radius:11,radius2:0,stroke:t})})],o=new Gp({style:n,composite:""});!1===e.options.visible&&o.setVisible(!1),this.addControlExt(i,o);break;case"overview":const r=this.map.getLayers(),s=r.getArray(),a=[];e.options?.layers&&e.options.layers.forEach((e=>{if(qf(e)){const t=r.get(e);t&&a.push(t)}else Af(e)&&e<s.length&&a.push(s[e])})),0===a.length&&a.push(new Mc({source:new Kh}));const l=this.MapView.getProjection(),u=new qp({layers:a,minZoom:1,maxZoom:12,rotation:!0,align:"right",projection:l});e.options?.align&&u.setPosition(e.options?.align),this.addControlExt(i,u);break;case"scale":const c=new zp;this.addControlExt(i,c);break;case"scaleline":const h=new Zp;this.addControlExt(i,h);break;case"print":const d=this.PrintTool.addPrintControl();this.addControlExt(i,d);break;case"printDialog":const p=e.options??{},f=this.PrintTool.addPrintDialogControl(p);this.addControlExt(i,f)}}addDefaultInteraction(e){if("FishEyeClip"===e.key){const t=this.map.getLayers(),i=t.getArray(),n=e.options.radius??100,o=[];e.options?.layers&&e.options.layers.forEach((e=>{if(qf(e)){const i=t.get(e);i&&o.push(i)}else Af(e)&&e<i.length&&o.push(i[e])}));const r=new jp({radius:n,layers:o});!1===e.options?.active&&r.setActive(!1),this.addInteractionExt(e.key,r)}}dispose(){this.layerManager&&(this.layerManager.clearLayers(),this.layerManager=void 0),this.swipe&&(this.swipe.unload(),this.swipe=void 0),this.clearControlExt(),this.clearInteractionExt(),this.map&&(this.MapView.un("change:resolution",this.onResolutionChanged.bind(this)),this.map.un("moveend",this.onMoveEnd.bind(this)),this.map.un("pointermove",this.pointerMoveHandler.bind(this)),this.map.un("moveend",this.onMapMoveEndHandler.bind(this)),this.map.dispose(),this.map=void 0)}setView(e){const t=this.map.getView();t&&t.un("change:resolution",this.onResolutionChanged.bind(this)),e&&(this.map.setView(e),e.on("change:resolution",this.onResolutionChanged.bind(this)))}setProjection(e,t={}){const i=Hy.transformCoordinate(this.MapView.getCenter(),this.MapView.getProjection(),"EPSG:4326"),n=this.MapView.getZoom(),o=this.MapView.getMaxZoom(),r=Df({zoom:n,center:i,projection:e,minZoom:this.MapView.getMinZoom(),maxZoom:o},t??{});this.initMapView(r)}get MapView(){return this.map.getView()}registerLayer(e,t){this.layerManager&&this.layerManager.registerLayer(e,t)}zoomTo(e,t){if(this.map){const i=this.map.getView(),n=i.getProjection();let o=e;t&&(o=Hy.getExtentFromTransform(e,t,n));const r=i.getResolutionForExtent(o,this.map.getSize());i.setResolution(r),i.setCenter(jt(o))}}zoomToExtent(e){const t=this.MapView,i=t?.getProjection();if(i){const n=Hy.getExtentFrom4326(e,i),o=t.getResolutionForExtent(n,this.map.getSize());t.setResolution(o);const r=jt(n);t.setCenter(r)}}zoomToCenter(e,t){const i=this.MapView;if(e){const n=Hy.fromLonLatCoordinate(e,i.getProjection());i.setCenter(n),null!=t&&t>0&&i.setZoom(t)}}goHomeView(){this.zoomToCenter(this.defaultHomeView.center,this.defaultHomeView.zoom)}newEvtArgs(e,t=null){const i=new Vd(this.target,this.mapGroup);return i.data=e,i.target=t,i}enableMapSyncView(){this.mapEventBus.eventOn(Bd.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOn(Bd.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}disableMapSyncView(){this.mapEventBus.eventOff(Bd.MAP_SYNC_VIEW,this.mapSyncView.bind(this)),this.mapEventBus.eventOff(Bd.MAP_SYNC_VIEW_END,this.mapSyncViewEnd.bind(this))}mapSyncView(e){if(e.mapGroup===this.mapGroup&&e.mapID!=this.target){const{zoom:t,x:i,y:n}=e.data;this.isMainSync=!0,this.map.un("moveend",this.onMoveEnd.bind(this));const o=this.map.getView();o.setZoom(t),o.setCenter([i,n]),setTimeout((()=>{const e=this.newEvtArgs();this.mapEventBus.eventEmit(Bd.MAP_SYNC_VIEW_END,e)}),200)}}mapSyncViewEnd(e){e.mapGroup===this.mapGroup&&(e.mapID!=this.target?this.isMainSync=!1:(this.isMainSync=!1,this.map.on("moveend",this.onMoveEnd.bind(this))))}onMoveEnd(e){if(!this.isMainSync){this.isMainSync=!0;const t=e.map.getView(),i=t.getZoom(),[n,o]=t.getCenter(),r=this.newEvtArgs({zoom:i,x:n,y:o},null);this.mapEventBus.eventEmit(Bd.MAP_SYNC_VIEW,r)}}onResolutionChanged(e){const t=this.map.getView();if(t){let e=t.getZoom();const i=this.newEvtArgs(e,null);this.mapEventBus.eventEmit(Bd.MAP_ZOOM_CHANGED,i),this.postionStatus.zoom=`${e.toFixed(1)}`,this.refreshPostionStatus()}}swipe;get RollSwipe(){if(!this.swipe){const e=document.getElementById(this.target);this.swipe=new yf(e,this)}return this.swipe}DefaultInteractionKeys={FishEyeClip:"FishEyeClip"};addInteractionExt(e,t){return!(!t||!e||this.InteractionsDiction.has(e)||(this.map.addInteraction(t),this.InteractionsDiction.set(e,t),0))}containsInteractionExt(e){return this.InteractionsDiction.has(e)}getInteractionExt(e){return this.InteractionsDiction.get(e)}removeInteractionExt(e){if(this.InteractionsDiction.has(e)){const t=this.InteractionsDiction.get(e);this.map.removeInteraction(t)}}clearInteractionExt(){this.InteractionsDiction.size>0&&(this.InteractionsDiction.forEach(((e,t)=>{this.map.removeInteraction(e)})),this.InteractionsDiction.clear())}DefaultControlKeys={overview:"overview",target:"target",scale:"scale",scaleline:"scaleline"};addControlExt(e,t){return!(!t||!e||this.ControlsDiction.has(e)||(this.map.addControl(t),this.ControlsDiction.set(e,t),0))}containsControlExt(e){return this.ControlsDiction.has(e)}getControlExt(e){return this.ControlsDiction.get(e)}removeControlExt(e){if(this.ControlsDiction.has(e)){const t=this.ControlsDiction.get(e);this.map.removeControl(t)}}clearControlExt(){this.ControlsDiction.size>0&&(this.ControlsDiction.forEach(((e,t)=>{this.map.removeControl(e)})),this.ControlsDiction.clear())}};class d_{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=eh,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?fn(t.dataProjection):this.readProjection(e);t.extent&&i&&"tile-pixels"===i.getUnits()&&(i=fn(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ke()}readFeature(e,t){return ke()}readFeatures(e,t){return ke()}readGeometry(e,t){return ke()}readProjection(e){return ke()}writeFeature(e,t){return ke()}writeFeatures(e,t){return ke()}writeGeometry(e,t){return ke()}}function p_(e,t,i){const n=i?fn(i.featureProjection):null,o=i?fn(i.dataProjection):null;let r=e;if(n&&o&&!xn(n,o)){t&&(r=e.clone());const i=t?n:o,s=t?o:n;"tile-pixels"===i.getUnits()?r.transform(i,s):r.applyTransform(Cn(i,s))}if(t&&i&&void 0!==i.decimals){const t=Math.pow(10,i.decimals),n=function(e){for(let i=0,n=e.length;i<n;++i)e[i]=Math.round(e[i]*t)/t;return e};r===e&&(r=e.clone()),r.applyTransform(n)}return r}const f_={Point:bo,LineString:dh,Polygon:zo,MultiPoint:fh,MultiLineString:ph,MultiPolygon:gh};function g_(e,t){const i=e.geometry;if(!i)return[];if(Array.isArray(i))return i.map((t=>g_({...e,geometry:t}))).flat();const n="MultiPolygon"===i.type?"Polygon":i.type;if("GeometryCollection"===n||"Circle"===n)throw new Error("Unsupported geometry type: "+n);const o=i.layout.length;return p_(new vh(n,"Polygon"===n?(r=i.flatCoordinates,s=i.ends,a=o,Array.isArray(s[0])?(Ao(r,0,s,a)||Fo(r=r.slice(),0,s,a),r):(Ro(r,0,s,a)||qo(r=r.slice(),0,s,a),r)):i.flatCoordinates,i.ends?.flat(),o,e.properties||{},e.id).enableSimplifyTransformed(),!1,t);var r,s,a}function m_(e,t){if(!e)return null;if(Array.isArray(e)){const i=e.map((e=>m_(e,t)));return new uh(i)}return p_(new f_[e.type](e.flatCoordinates,e.layout||"XY",e.ends),!1,t)}class v_ extends d_{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(y_(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(y_(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ke()}readFeaturesFromObject(e,t){return ke()}readGeometry(e,t){return this.readGeometryFromObject(y_(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ke()}readProjection(e){return this.readProjectionFromObject(y_(e))}readProjectionFromObject(e){return ke()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ke()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ke()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ke()}}function y_(e){return"string"==typeof e?JSON.parse(e)||null:null!==e?e:null}class __ extends v_{constructor(e){e=e||{},super(),this.dataProjection=fn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=fn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;i="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const n=b_(i.geometry);if(this.featureClass===vh)return g_({geometry:n,id:i.id,properties:i.properties},t);const o=new eh;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(m_(n,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){let i=null;if("FeatureCollection"===e.type){i=[];const n=e.features;for(let e=0,o=n.length;e<o;++e){const o=this.readFeatureFromObject(n[e],t);o&&i.push(o)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return i=t,m_(b_(e),i);var i}readProjectionFromObject(e){const t=e.crs;let i;if(t)if("name"==t.type)i=fn(t.properties.name);else{if("EPSG"!==t.type)throw new Error("Unknown SRS type");i=fn("EPSG:"+t.properties.code)}else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},n=e.getId();if(void 0!==n&&(i.id=n),!e.hasProperties())return i;const o=e.getProperties(),r=e.getGeometry();return r&&(i.geometry=x_(r,t),delete o[e.getGeometryName()]),_e(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let n=0,o=e.length;n<o;++n)i.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return x_(e,this.adaptOptions(t))}}function b_(e,t){if(!e)return null;let i;switch(e.type){case"Point":i=function(e){const t=e.coordinates;return{type:"Point",flatCoordinates:t,layout:Zn(t.length)}}(e);break;case"LineString":i=function(e){const t=e.coordinates,i=t.flat();return{type:"LineString",flatCoordinates:i,ends:[i.length],layout:Zn(t[0]?.length||2)}}(e);break;case"Polygon":i=function(e){const t=e.coordinates,i=[],n=t[0]?.[0]?.length;return{type:"Polygon",flatCoordinates:i,ends:lo(i,0,t,n),layout:Zn(n)}}(e);break;case"MultiPoint":i=function(e){const t=e.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Zn(t[0]?.length||2)}}(e);break;case"MultiLineString":i=function(e){const t=e.coordinates,i=t[0]?.[0]?.length||2,n=[];return{type:"MultiLineString",flatCoordinates:n,ends:lo(n,0,t,i),layout:Zn(i)}}(e);break;case"MultiPolygon":i=function(e){const t=e.coordinates,i=[],n=t[0]?.[0]?.[0].length||2;return{type:"MultiPolygon",flatCoordinates:i,ends:uo(i,0,t,n),layout:Zn(n)}}(e);break;case"GeometryCollection":i=e.geometries.map((function(e){return b_(e)}));break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return i}function x_(e,t){const i=(e=p_(e,!0,t)).getType();let n;switch(i){case"Point":n={type:"Point",coordinates:e.getCoordinates()};break;case"LineString":n=function(e){return{type:"LineString",coordinates:e.getCoordinates()}}(e);break;case"Polygon":n=function(e,t){let i;return t&&(i=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(i)}}(e,t);break;case"MultiPoint":n=function(e){return{type:"MultiPoint",coordinates:e.getCoordinates()}}(e);break;case"MultiLineString":n=function(e){return{type:"MultiLineString",coordinates:e.getCoordinates()}}(e);break;case"MultiPolygon":n=function(e,t){let i;return t&&(i=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(i)}}(e,t);break;case"GeometryCollection":n=function(e,t){return delete(t=Object.assign({},t)).featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map((function(e){return x_(e,t)}))}}(e,t);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}const w_=4294967296,S_=1/w_,C_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class M_{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,e(n,t,this),this.pos===o&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*w_;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*w_;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,n;return n=t[this.pos++],i=127&n,n<128||(n=t[this.pos++],i|=(127&n)<<7,n<128)||(n=t[this.pos++],i|=(127&n)<<14,n<128)||(n=t[this.pos++],i|=(127&n)<<21,n<128)?i:(n=t[this.pos],i|=(15&n)<<28,function(e,t,i){const n=i.buf;let o,r;if(r=n[i.pos++],o=(112&r)>>4,r<128||(r=n[i.pos++],o|=(127&r)<<3,r<128)||(r=n[i.pos++],o|=(127&r)<<10,r<128)||(r=n[i.pos++],o|=(127&r)<<17,r<128)||(r=n[i.pos++],o|=(127&r)<<24,r<128)||(r=n[i.pos++],o|=(1&r)<<31,r<128))return s=e,a=o,t?4294967296*a+(s>>>0):4294967296*(a>>>0)+(s>>>0);var s,a;throw new Error("Expected varint not more than 10 bytes")}(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&C_?C_.decode(this.buf.subarray(t,e)):function(e,t,i){let n="",o=t;for(;o<i;){const t=e[o];let r,s,a,l=null,u=t>239?4:t>223?3:t>191?2:1;if(o+u>i)break;1===u?t<128&&(l=t):2===u?(r=e[o+1],128==(192&r)&&(l=(31&t)<<6|63&r,l<=127&&(l=null))):3===u?(r=e[o+1],s=e[o+2],128==(192&r)&&128==(192&s)&&(l=(15&t)<<12|(63&r)<<6|63&s,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===u&&(r=e[o+1],s=e[o+2],a=e[o+3],128==(192&r)&&128==(192&s)&&128==(192&a)&&(l=(15&t)<<18|(63&r)<<12|(63&s)<<6|63&a,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,u=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),o+=u}return n}(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}skip(e){const t=7&e;if(0===t)for(;this.buf[this.pos++]>127;);else if(2===t)this.pos=this.readVarint()+this.pos;else if(5===t)this.pos+=4;else{if(1!==t)throw new Error(`Unimplemented type: ${t}`);this.pos+=8}}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const e=new Uint8Array(t);e.set(this.buf),this.buf=e,this.dataView=new DataView(e.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*S_),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*S_),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?function(e,t){let i,n;if(e>=0?(i=e%4294967296|0,n=e/4294967296|0):(i=~(-e%4294967296),n=~(-e/4294967296),4294967295^i?i=i+1|0:(i=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");var o,r;t.realloc(10),o=i,(r=t).buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos++]=127&o|128,o>>>=7,r.buf[r.pos]=127&o,function(e,t){const i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const t=this.pos;this.pos=function(e,t,i){for(let n,o,r=0;r<t.length;r++){if(n=t.charCodeAt(r),n>55295&&n<57344){if(!o){n>56319||r+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):o=n;continue}if(n<56320){e[i++]=239,e[i++]=191,e[i++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(e[i++]=239,e[i++]=191,e[i++]=189,o=null);n<128?e[i++]=n:(n<2048?e[i++]=n>>6|192:(n<65536?e[i++]=n>>12|224:(e[i++]=n>>18|240,e[i++]=n>>12&63|128),e[i++]=n>>6&63|128),e[i++]=63&n|128)}return i}(this.buf,e,this.pos);const i=this.pos-t;i>=128&&E_(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const n=this.pos-i;n>=128&&E_(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n}writeMessage(e,t,i){this.writeTag(e,2),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,k_,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,T_,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,I_,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,P_,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,L_,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,R_,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,A_,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,q_,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,F_,t)}writeBytesField(e,t){this.writeTag(e,2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,5),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,5),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,1),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,1),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,0),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,0),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,5),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,1),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function E_(e,t,i){const n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(n);for(let o=i.pos-1;o>=e;o--)i.buf[o+n]=i.buf[o]}function k_(e,t){for(let i=0;i<e.length;i++)t.writeVarint(e[i])}function T_(e,t){for(let i=0;i<e.length;i++)t.writeSVarint(e[i])}function P_(e,t){for(let i=0;i<e.length;i++)t.writeFloat(e[i])}function L_(e,t){for(let i=0;i<e.length;i++)t.writeDouble(e[i])}function I_(e,t){for(let i=0;i<e.length;i++)t.writeBoolean(e[i])}function R_(e,t){for(let i=0;i<e.length;i++)t.writeFixed32(e[i])}function A_(e,t){for(let i=0;i<e.length;i++)t.writeSFixed32(e[i])}function q_(e,t){for(let i=0;i<e.length;i++)t.writeFixed64(e[i])}function F_(e,t){for(let i=0;i<e.length;i++)t.writeSFixed64(e[i])}class O_ extends d_{constructor(e){super(),e=e||{},this.dataProjection=new _i({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:vh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,n){e.pos=t.geometry;const o=e.readVarint()+e.pos;let r=1,s=0,a=0,l=0,u=0,c=0;for(;e.pos<o;){if(!s){const t=e.readVarint();r=7&t,s=t>>3}if(s--,1===r||2===r)a+=e.readSVarint(),l+=e.readSVarint(),1===r&&u>c&&(n.push(u),c=u),i.push(a,l),u+=2;else{if(7!==r)throw new Error("Invalid command found in the PBF");u>c&&(i.push(i[c],i[c+1]),u+=2)}}u>c&&(n.push(u),c=u)}createFeature_(e,t,i){const n=t.type;if(0===n)return null;let o;const r=t.properties;let s;this.idProperty_?(s=r[this.idProperty_],delete r[this.idProperty_]):s=t.id,r[this.layerName_]=t.layer.name;const a=[],l=[];this.readRawGeometry_(e,t,a,l);const u=function(e,t){let i;return 1===e?i=1===t?"Point":"MultiPoint":2===e?i=1===t?"LineString":"MultiLineString":3===e&&(i="Polygon"),i}(n,l.length);if(this.featureClass===vh)o=new this.featureClass(u,a,l,2,r,s),o.transform(i.dataProjection);else{let e;if("Polygon"==u){const t=Oo(a,l);e=t.length>1?new gh(a,"XY",t):new zo(a,"XY",l)}else e="Point"===u?new bo(a,"XY"):"LineString"===u?new dh(a,"XY"):"MultiPoint"===u?new fh(a,"XY"):"MultiLineString"===u?new ph(a,"XY",l):null;o=new this.featureClass,this.geometryName_&&o.setGeometryName(this.geometryName_);const t=p_(e,!1,i);o.setGeometry(t),void 0!==s&&o.setId(s),o.setProperties(r,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_,n=fn((t=this.adaptOptions(t)).dataProjection);n.setWorldExtent(t.extent),t.dataProjection=n;const o=new M_(e),r=o.readFields(z_,{}),s=[];for(const a in r){if(i&&!i.includes(a))continue;const e=r[a],l=e?[0,0,e.extent,e.extent]:null;n.setExtent(l);for(let i=0,n=e.length;i<n;++i){const n=G_(o,e,i),r=this.createFeature_(o,n,t);null!==r&&s.push(r)}}return s}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function z_(e,t,i){if(3===e){const e={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(N_,e,n),e.length=e.features.length,e.length&&(t[e.name]=e)}}function N_(e,t,i){if(15===e)t.version=i.readVarint();else if(1===e)t.name=i.readString();else if(5===e)t.extent=i.readVarint();else if(2===e)t.features.push(i.pos);else if(3===e)t.keys.push(i.readString());else if(4===e){let n=null;const o=i.readVarint()+i.pos;for(;i.pos<o;)n=1==(e=i.readVarint()>>3)?i.readString():2===e?i.readFloat():3===e?i.readDouble():4===e?i.readVarint64():5===e?i.readVarint():6===e?i.readSVarint():7===e?i.readBoolean():null;t.values.push(n)}}function D_(e,t,i){if(1==e)t.id=i.readVarint();else if(2==e){const e=i.readVarint()+i.pos;for(;i.pos<e;){const e=t.layer.keys[i.readVarint()],n=t.layer.values[i.readVarint()];t.properties[e]=n}}else 3==e?t.type=i.readVarint():4==e&&(t.geometry=i.pos)}function G_(e,t,i){e.pos=t.features[i];const n=e.readVarint()+e.pos,o={layer:t,type:0,properties:{}};return e.readFields(D_,o,n),o}const j_={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},B_={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class V_ extends xc{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=[1,0,0,1,0,0],this.tileClipContexts_=null}enqueueTilesForNextExtent(){return"vector"!==this.getLayer().getRenderMode()}drawTile(e,t,i,n,o,r,s,a){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,n,o,r,s,a)}getTile(e,t,i,n){const o=this.getOrCreateTile(e,t,i,n);if(!o)return null;const r=n.viewState,s=r.resolution,a=n.viewHints,l=this.getLayer().getSource(),u=l.getTileGridForProjection(r.projection),c=!(a[0]||a[1]),h=u.getZForResolution(s,l.zDirection)===e;return c&&h?o.wantedResolution=s:o.wantedResolution||(o.wantedResolution=u.getResolution(e)),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const n=this.getLayer(),o=n.getRevision(),r=n.getRenderOrder()||null,s=e.wantedResolution,a=e.getReplayState(n);if(!a.dirty&&a.renderedResolution===s&&a.renderedRevision==o&&a.renderedRenderOrder==r)return;const l=n.getSource(),u=!!n.getDeclutter(),c=l.getTileGrid(),h=l.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),d=l.getSourceTiles(t,i,e),p=Pe(n);delete e.hitDetectionImageData[p],e.executorGroups[p]=[],a.dirty=!1;for(let f=0,g=d.length;f<g;++f){const o=d[f];if(2!=o.getState())continue;const g=l.getProjection(),m=o.tileCoord;let v=c.getTileCoordExtent(m);i&&g&&!xn(i,g)&&(v=En(v,g,i,32));const y=Ut(h,v),_=xt(y,n.getRenderBuffer()*s,this.tempExtent),b=Rt(v,y)?null:_,x=new op(0,y,s,t),w=Tp(s,t),S=function(e,t){let i;const o=e.getStyleFunction()||n.getStyleFunction();if(o&&(i=o(e,s)),i){const n=this.renderFeature(e,w,i,x,u,t);a.dirty=a.dirty||n}},C=o.getFeatures();r&&r!==a.renderedRenderOrder&&C.sort(r);for(let e=0,t=C.length;e<t;++e){let t=C[e];i&&o.projection&&!xn(i,o.projection)&&(t=t.clone(),t.getGeometry().applyTransform(Cn(o.projection,i))),(!b||Yt(b,t.getGeometry().getExtent()))&&S.call(this,t,e)}const M=x.finish(),E="vector"!==n.getRenderMode()&&u&&1===d.length?null:y,k=new bp(E,s,t,l.getOverlaps(),M,n.getRenderBuffer(),!0);e.executorGroups[p].push(k)}a.renderedRevision=o,a.renderedRenderOrder=r,a.renderedResolution=s}forEachFeatureAtCoordinate(e,t,i,n,o){const r=t.viewState.resolution,s=t.viewState.rotation;i=i??0;const a=this.getLayer(),l=a.getSource().getTileGridForProjection(t.viewState.projection),u=bt([e]);xt(u,r*i,u);const c={},h=function(e,t,i){let r=e.getId();void 0===r&&(r=Pe(e));const s=c[r];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return c[r]=!0,o.splice(o.lastIndexOf(s),1),n(e,a,t);s.geometry=t,s.distanceSq=i}}else{if(0===i)return c[r]=!0,n(e,a,t);o.push(c[r]={feature:e,layer:a,geometry:t,distanceSq:i,callback:n})}},d=this.renderedTiles,p=Pe(a),f=a.getDeclutter(),g=f?t.declutter?.[f]?.all().map((e=>e.value)):null;let m;e:for(let v=0,y=d.length;v<y;++v){const t=d[v];if(!Yt(l.getTileCoordExtent(t.wrappedTileCoord),u))continue;const n=t.executorGroups[p];for(let o=0,a=n.length;o<a;++o)if(m=n[o].forEachFeatureAtCoordinate(e,r,s,i,h,g),m)break e}return m}getFeatures(e){return 0===this.renderedTiles.length?Promise.resolve([]):new Promise(((t,i)=>{const n=this.getLayer(),o=n.getSource(),r=this.renderedProjection,s=r.getExtent(),a=this.renderedResolution,l=o.getTileGridForProjection(r),u=Dn(this.renderedPixelToCoordinateTransform_,e.slice()),c=l.getTileCoordForCoordAndResolution(u,a).toString(),h=this.renderedTiles.find((e=>e.tileCoord.toString()===c&&2===e.getState()));if(!h||h.loadingSourceTiles>0)return void t([]);o.getWrapX()&&r.canWrapX()&&!Mt(s,l.getTileCoordExtent(h.tileCoord))&&si(u,r);const d=Pe(n),p=Wt(l.getTileCoordExtent(h.wrappedTileCoord)),f=[(u[0]-p[0])/a,(p[1]-u[1])/a],g=h.getSourceTiles().reduce(((e,t)=>e.concat(t.getFeatures())),[]);let m=h.hitDetectionImageData[d];if(!m){const e=ia(l.getTileSize(l.getZForResolution(a,o.zDirection))),t=this.renderedRotation_;m=Cp(e,[this.getRenderTransform(l.getTileCoordCenter(h.wrappedTileCoord),a,0,Sp,e[0]*Sp,e[1]*Sp,0)],g,n.getStyleFunction(),l.getTileCoordExtent(h.wrappedTileCoord),h.getReplayState(n).renderedResolution,t),h.hitDetectionImageData[d]=m}t(Mp(f,g,m))}))}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(0===i.getCount())return t;const n=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=n.getZForResolution(this.renderedResolution),r={};return i.forEach((i=>{if(i.tileCoord[0]!==o||2!==i.getState())return;const s=i.getSourceTiles();for(let o=0,a=s.length;o<a;++o){const i=s[o],a=i.getKey();if(a in r)continue;r[a]=!0;const l=i.tileCoord;if(Yt(e,n.getTileCoordExtent(l))){const n=i.getFeatures();if(n)for(let i=0,o=n.length;i<o;++i){const o=n[i],r=o.getGeometry();Yt(e,r.getExtent())&&t.push(o)}}}})),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,n=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,r=!(o[0]||o[1]),s=[this.context.canvas.width,this.context.canvas.height],a=this.getLayer().getDeclutter(),l=a?e.declutter?.[a]:void 0,u=Pe(this.getLayer()),c=this.renderedTiles;for(let h=0,d=c.length;h<d;++h){const t=c[h],i=t.executorGroups[u];if(i)for(let n=i.length-1;n>=0;--n)i[n].execute(this.context,s,this.getTileRenderTransform(t,e),e.viewState.rotation,r,yp,l)}i.globalAlpha=n}renderDeferredInternal(e){const t=this.renderedTiles,i=Pe(this.getLayer()),n=t.reduce(((e,t,n)=>(t.executorGroups[i].forEach((t=>e.push({executorGroup:t,index:n}))),e)),[]),o=n.map((({executorGroup:e})=>e.getDeferredZIndexContexts())),r={};for(let s=0,a=n.length;s<a;++s){const e=n[s].executorGroup.getDeferredZIndexContexts();for(const t in e)r[t]=!0}Object.keys(r).map(Number).sort(ae).forEach((e=>{o.forEach(((t,i)=>{t[e]&&(t[e].forEach((e=>{const{executorGroup:t,index:o}=n[i],r=t.getRenderedContext(),s=r.globalAlpha;r.globalAlpha=this.renderedOpacity_;const a=this.tileClipContexts_[o];a&&a.draw(r),e.draw(r),a&&r.restore(),r.globalAlpha=s,e.clear()})),t[e].length=0)}))}))}getTileRenderTransform(e,t){const i=t.pixelRatio,n=t.viewState,o=n.center,r=n.resolution,s=n.rotation,a=t.size,l=Math.round(a[0]*i),u=Math.round(a[1]*i),c=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),h=e.tileCoord,d=c.getTileCoordExtent(e.wrappedTileCoord),p=c.getTileCoordExtent(h,this.tempExtent)[0]-d[0];return zn(Gn(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,r,s,i,l,u,p))}postRender(e,t){const i=t.viewHints,n=!(i[0]||i[1]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),r=o.getRenderMode(),s=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const a=o.getDeclutter(),l=a?B_[r].filter((e=>!yp.includes(e))):B_[r],u=t.viewState,c=u.rotation,h=o.getSource(),d=h.getTileGridForProjection(u.projection).getZForResolution(u.resolution,h.zDirection),p=this.renderedTiles,f=[],g=[],m=[],v=Pe(o);let y=!0;for(let _=p.length-1;_>=0;--_){const i=p[_];y=y&&!i.getReplayState(o).dirty;const r=i.executorGroups[v].filter((e=>e.hasExecutors(l)));if(0===r.length)continue;const s=this.getTileRenderTransform(i,t),u=i.tileCoord[0];let h=!1;const b=r[0].getClipCoords(s);let x,w=e;if(b){x=new pc,w=x.getContext();for(let e=0,t=f.length;e<t;++e)if(d!==u&&u<g[e]){const t=f[e];Yt([b[0],b[3],b[4],b[7]],[t[0],t[3],t[4],t[7]])&&(h||(w.save(),h=!0),w.beginPath(),w.moveTo(b[0],b[1]),w.lineTo(b[2],b[3]),w.lineTo(b[4],b[5]),w.lineTo(b[6],b[7]),w.moveTo(t[6],t[7]),w.lineTo(t[4],t[5]),w.lineTo(t[2],t[3]),w.lineTo(t[0],t[1]),w.clip())}f.push(b),g.push(u)}for(let o=0,d=r.length;o<d;++o)r[o].execute(e,[e.canvas.width,e.canvas.height],s,c,n,l,t.declutter?.[a]);h&&(w===e?w.restore():m[_]=x)}e.globalAlpha=s,this.ready=y,this.tileClipContexts_=m,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,n,o,r){if(!i)return!1;let s=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)s=Lp(n,e,i[a],t,this.boundHandleStyleImageChange_,void 0,o,r)||s;else s=Lp(n,e,i,t,this.boundHandleStyleImageChange_,void 0,o,r);return s}tileImageNeedsRender_(e){const t=this.getLayer();if("vector"===t.getRenderMode())return!1;const i=e.getReplayState(t),n=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==n}renderTileImage_(e,t){const i=this.getLayer(),n=e.getReplayState(i),o=i.getRevision(),r=e.executorGroups[Pe(i)];n.renderedTileRevision=o;const s=e.wrappedTileCoord,a=s[0],l=i.getSource();let u=t.pixelRatio;const c=t.viewState.projection,h=l.getTileGridForProjection(c),d=h.getResolution(e.tileCoord[0]),p=t.pixelRatio/e.wantedResolution*d,f=h.getResolution(a),g=e.getContext();u=Math.round(Math.max(u,p/u));const m=l.getTilePixelSize(a,u,c);g.canvas.width=m[0],g.canvas.height=m[1];const v=u/p;if(1!==v){const e=On(this.tmpTransform_);Gn(e,v,v),g.setTransform.apply(g,e)}const y=h.getTileCoordExtent(s,this.tempExtent),_=p/f,b=On(this.tmpTransform_);var x,w,S;Gn(b,_,-_),x=b,w=-y[0],S=-y[3],zn(x,Nn(Fn,1,0,0,1,w,S));for(let C=0,M=r.length;C<M;++C)r[C].execute(g,[g.canvas.width*v,g.canvas.height*v],b,0,!0,j_[i.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}class $_ extends Ou{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=void 0===e.cacheSize?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const n=e.renderMode||"hybrid";tt("hybrid"==n||"vector"==n,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new V_(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(wc)}getUseInterimTilesOnError(){return this.get(Sc)}setPreload(e){this.set(wc,e)}setUseInterimTilesOnError(e){this.set(Sc,e)}}var H_;!function(e){e[e.grid=0]="grid",e[e.mvt=1]="mvt",e[e.symbol=2]="symbol",e[e.vector=3]="vector",e[e.json=4]="json"}(H_||(H_={}));var U_=o({name:"drawtool",props:{xmap:h_},components:{Icon:X},setup(e){let t,i=e.xmap;return l((()=>{})),r((()=>e.xmap),(e=>{i=e})),{changeType:function(e){!t&&i&&(t=new ff(i));const n=e;t?.changeDrawType(n)},clearPic:function(){t?.clearLastDraw()},clearboard:function(){t?.clearboard(),t?.clearInteraction()}}}});const W_={class:"tool-container drawToolList"},X_={title:""},K_={title:""},Y_={title:""},Z_={title:""},Q_={title:""},J_={title:""};U_.render=function(e,t,i,n,o,r){const s=u("Icon");return h(),b("ul",W_,[g("li",{onClick:t[0]||(t[0]=t=>e.changeType("Point"))},[g("span",X_,[p(s,{icon:"gis:point"})])]),g("li",{onClick:t[1]||(t[1]=t=>e.changeType("LineString"))},[g("span",K_,[p(s,{icon:"gis:polyline"})])]),g("li",{onClick:t[2]||(t[2]=t=>e.changeType("Polygon"))},[g("span",Y_,[p(s,{icon:"gis:polygon-o"})])]),g("li",{onClick:t[3]||(t[3]=t=>e.changeType("Hand"))},[g("span",Z_,[p(s,{icon:"gis:route-start"})])]),g("li",{onClick:t[4]||(t[4]=(...t)=>e.clearPic&&e.clearPic(...t))},[g("span",Q_,[p(s,{icon:"ant-design:undo-outlined"})])]),g("li",{onClick:t[5]||(t[5]=(...t)=>e.clearboard&&e.clearboard(...t))},[g("span",J_,[p(s,{icon:"ant-design:clear-outlined"})])])])},U_.__file="src/components/MapTools/drawToolBar.vue";var eb=o({name:"MeasureToolBar",props:{xmap:h_},components:{Icon:X},setup(e){let t,i=e.xmap;return r((()=>e.xmap),(e=>{i=e})),{measureLine:()=>{!t&&i?.map&&(t=new gf(i.map)),t?.addInteraction("line")},measureArea:()=>{!t&&i?.map&&(t=new gf(i.map)),t?.addInteraction("area")},unloadMeasure:()=>{t&&t.removeInteraction()}}}});const tb={class:"tool-container measureToolList"},ib={title:""},nb={title:""},ob={title:""};function rb(e,t,i,n){return Object.defineProperty(e,t,{get:i,set:n,enumerable:!0}),e}function sb(e,t){for(const i in t)rb(e,i,t[i]);return e}eb.render=function(e,t,i,n,o,r){const s=u("Icon");return h(),b("ul",tb,[g("li",{onClick:t[0]||(t[0]=(...t)=>e.measureLine&&e.measureLine(...t))},[g("span",ib,[p(s,{icon:"gis:measure-line"})])]),g("li",{onClick:t[1]||(t[1]=(...t)=>e.measureArea&&e.measureArea(...t))},[g("span",nb,[p(s,{icon:"gis:measure-area"})])]),g("li",{onClick:t[2]||(t[2]=(...t)=>e.unloadMeasure&&e.unloadMeasure(...t))},[g("span",ob,[p(s,{icon:"ant-design:clear-outlined"})])])])},eb.__file="src/components/MapTools/measureToolBar.vue";var ab,lb=a(!1),ub="ontouchstart"in window||window.navigator.maxTouchPoints>0,cb=navigator.userAgent||navigator.vendor||window.opera,hb={userAgent:cb,is:function(){const e=cb.toLowerCase(),t=function(e,t){const i=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(vivaldi)[\/]([\w.]+)/.exec(e)||/(chrome|crios)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(firefox|fxios)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(e)||[];return{browser:i[5]||i[3]||i[1]||"",version:i[4]||i[2]||"0",platform:t[0]||""}}(e,/(ipad)/.exec(n=e)||/(ipod)/.exec(n)||/(windows phone)/.exec(n)||/(iphone)/.exec(n)||/(kindle)/.exec(n)||/(silk)/.exec(n)||/(android)/.exec(n)||/(win)/.exec(n)||/(mac)/.exec(n)||/(linux)/.exec(n)||/(cros)/.exec(n)||/(playbook)/.exec(n)||/(bb)/.exec(n)||/(blackberry)/.exec(n)||[]),i={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};var n;t.browser&&(i[t.browser]=!0,i.version=t.version,i.versionNumber=parseInt(t.version,10)),t.platform&&(i[t.platform]=!0);const o=i.android||i.ios||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"];if(!0===o||-1!==e.indexOf("mobile")?i.mobile=!0:i.desktop=!0,i["windows phone"]&&(i.winphone=!0,delete i["windows phone"]),i.edga||i.edgios||i.edg?(i.edge=!0,t.browser="edge"):i.crios?(i.chrome=!0,t.browser="chrome"):i.fxios&&(i.firefox=!0,t.browser="firefox"),(i.ipod||i.ipad||i.iphone)&&(i.ios=!0),i.vivaldi&&(t.browser="vivaldi",i.vivaldi=!0),(i.chrome||i.opr||i.safari||i.vivaldi||!0===i.mobile&&!0!==i.ios&&!0!==o)&&(i.webkit=!0),i.opr&&(t.browser="opera",i.opera=!0),i.safari&&(i.blackberry||i.bb?(t.browser="blackberry",i.blackberry=!0):i.playbook?(t.browser="playbook",i.playbook=!0):i.android?(t.browser="android",i.android=!0):i.kindle?(t.browser="kindle",i.kindle=!0):i.silk&&(t.browser="silk",i.silk=!0)),i.name=t.browser,i.platform=t.platform,-1!==e.indexOf("electron"))i.electron=!0;else if(-1!==document.location.href.indexOf("-extension://"))i.bex=!0;else{if(void 0!==window.Capacitor?(i.capacitor=!0,i.nativeMobile=!0,i.nativeMobileWrapper="capacitor"):(void 0!==window._cordovaNative||void 0!==window.cordova)&&(i.cordova=!0,i.nativeMobile=!0,i.nativeMobileWrapper="cordova"),!0===lb.value&&(ab={is:{...i}}),!0===ub&&!0===i.mac&&(!0===i.desktop&&!0===i.safari||!0===i.nativeMobile&&!0!==i.android&&!0!==i.ios&&!0!==i.ipad)){delete i.mac,delete i.desktop;const e=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(i,{mobile:!0,ios:!0,platform:e,[e]:!0})}!0!==i.mobile&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete i.desktop,i.mobile=!0)}return i}(),has:{touch:ub},within:{iframe:window.self!==window.top}},db={install(e){const{$q:t}=e;!0===lb.value?(e.onSSRHydrated.push((()=>{Object.assign(t.platform,hb),lb.value=!1})),t.platform=_(this)):t.platform=this}};{let e;rb(hb.has,"webStorage",(()=>{if(void 0!==e)return e;try{if(window.localStorage)return e=!0,!0}catch{}return e=!1,!1})),Object.assign(db,hb),!0===lb.value&&(Object.assign(db,ab,{has:{touch:!1,webStorage:!1},within:{iframe:!1}}),ab=null)}var pb=db;function fb(e){return E(o(e))}function gb(e){return E(e)}var mb=(e,t)=>{const i=_(e);for(const n in e)rb(t,n,(()=>i[n]),(e=>{i[n]=e}));return t},vb={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(vb,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch{}function yb(){}function _b(e){return 0===e.button}function bb(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function xb(e){e.stopPropagation()}function wb(e){!1!==e.cancelable&&e.preventDefault()}function Sb(e){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation()}function Cb(e,t){if(void 0===e||!0===t&&!0===e.__dragPrevented)return;const i=!0===t?e=>{e.__dragPrevented=!0,e.addEventListener("dragstart",wb,vb.notPassiveCapture)}:e=>{delete e.__dragPrevented,e.removeEventListener("dragstart",wb,vb.notPassiveCapture)};e.querySelectorAll("a, img").forEach(i)}function Mb(e,t,i){const n=`__q_${t}_evt`;e[n]=void 0!==e[n]?e[n].concat(i):i,i.forEach((t=>{t[0].addEventListener(t[1],e[t[2]],vb[t[3]])}))}function Eb(e,t){const i=`__q_${t}_evt`;void 0!==e[i]&&(e[i].forEach((t=>{t[0].removeEventListener(t[1],e[t[2]],vb[t[3]])})),e[i]=void 0)}function kb(e,t=250,i){let n=null;function o(){const i=arguments;null!==n&&clearTimeout(n),n=setTimeout((()=>{n=null,e.apply(this,i)}),t)}return o.cancel=()=>{null!==n&&clearTimeout(n)},o}var Tb=["sm","md","lg","xl"],{passive:Pb}=vb;mb({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:yb,setDebounce:yb,install({$q:e,onSSRHydrated:t}){if(e.screen=this,!0===this.__installed)return void(void 0!==e.config.screen&&(!1===e.config.screen.bodyClasses?document.body.classList.remove(`screen--${this.name}`):this.__update(!0)));const{visualViewport:i}=window,n=i||window,o=document.scrollingElement||document.documentElement,r=void 0===i||!0===hb.is.mobile?()=>[Math.max(window.innerWidth,o.clientWidth),Math.max(window.innerHeight,o.clientHeight)]:()=>[i.width*i.scale+window.innerWidth-o.clientWidth,i.height*i.scale+window.innerHeight-o.clientHeight],s=!0===e.config.screen?.bodyClasses;this.__update=e=>{const[t,i]=r();if(i!==this.height&&(this.height=i),t!==this.width)this.width=t;else if(!0!==e)return;let n=this.sizes;this.gt.xs=t>=n.sm,this.gt.sm=t>=n.md,this.gt.md=t>=n.lg,this.gt.lg=t>=n.xl,this.lt.sm=t<n.sm,this.lt.md=t<n.md,this.lt.lg=t<n.lg,this.lt.xl=t<n.xl,this.xs=this.lt.sm,this.sm=!0===this.gt.xs&&!0===this.lt.md,this.md=!0===this.gt.sm&&!0===this.lt.lg,this.lg=!0===this.gt.md&&!0===this.lt.xl,this.xl=this.gt.lg,n=(!0===this.xs?"xs":!0===this.sm&&"sm")||!0===this.md&&"md"||!0===this.lg&&"lg"||"xl",n!==this.name&&(!0===s&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${n}`)),this.name=n)};let a,l={},u=16;this.setSizes=e=>{Tb.forEach((t=>{void 0!==e[t]&&(l[t]=e[t])}))},this.setDebounce=e=>{u=e};const c=()=>{const e=getComputedStyle(document.body);e.getPropertyValue("--q-size-sm")&&Tb.forEach((t=>{this.sizes[t]=parseInt(e.getPropertyValue(`--q-size-${t}`),10)})),this.setSizes=e=>{Tb.forEach((t=>{e[t]&&(this.sizes[t]=e[t])})),this.__update(!0)},this.setDebounce=e=>{void 0!==a&&n.removeEventListener("resize",a,Pb),a=e>0?kb(this.__update,e):this.__update,n.addEventListener("resize",a,Pb)},this.setDebounce(u),0!==Object.keys(l).length?(this.setSizes(l),l=void 0):this.__update(),!0===s&&"xs"===this.name&&document.body.classList.add("screen--xs")};!0===lb.value?t.push(c):c()}});var Lb=mb({isActive:!1,mode:!1},{__media:void 0,set(e){Lb.mode=e,"auto"===e?(void 0===Lb.__media&&(Lb.__media=window.matchMedia("(prefers-color-scheme: dark)"),Lb.__updateMedia=()=>{Lb.set("auto")},Lb.__media.addListener(Lb.__updateMedia)),e=Lb.__media.matches):void 0!==Lb.__media&&(Lb.__media.removeListener(Lb.__updateMedia),Lb.__media=void 0),Lb.isActive=!0===e,document.body.classList.remove("body--"+(!0===e?"light":"dark")),document.body.classList.add("body--"+(!0===e?"dark":"light"))},toggle(){Lb.set(!1===Lb.isActive)},install({$q:e,ssrContext:t}){const i=e.config.dark;e.dark=this,!0!==this.__installed&&this.set(void 0!==i&&i)}});function Ib(e){return e!==Object(e)||!0===e.isComposing||!0===e.qKeyEvent}function Rb(e,t){return!0!==Ib(e)&&[].concat(t).includes(e.keyCode)}var Ab={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:e=>e?`Expand "${e}"`:"Expand",collapse:e=>e?`Collapse "${e}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:e=>`Previous ${e} years`,nextRangeYears:e=>`Next ${e} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:e=>1===e?"1 record selected.":(0===e?"No":e)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(e,t,i)=>e+"-"+t+" of "+i,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function qb(){const e=!0===Array.isArray(navigator.languages)&&0!==navigator.languages.length?navigator.languages[0]:navigator.language;if("string"==typeof e)return e.split(/[-_]/).map(((e,t)=>0===t?e.toLowerCase():t>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase())).join("-")}var Fb=mb({__qLang:{}},{getLocale:qb,set(e=Ab,t){const i={...e,rtl:!0===e.rtl,getLocale:qb};if(i.set=Fb.set,void 0===Fb.__langConfig||!0!==Fb.__langConfig.noHtmlAttrs){const e=document.documentElement;e.setAttribute("dir",!0===i.rtl?"rtl":"ltr"),e.setAttribute("lang",i.isoName)}Object.assign(Fb.__qLang,i)},install({$q:e,lang:t,ssrContext:i}){e.lang=Fb.__qLang,Fb.__langConfig=e.config.lang,!0===this.__installed?void 0!==t&&this.set(t):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys:e=>Reflect.ownKeys(e).filter((e=>"set"!==e&&"getLocale"!==e))}),this.set(t||Ab))}}),Ob=Fb,zb={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},Nb=mb({iconMapFn:null,__qIconSet:{}},{set(e,t){const i={...e};i.set=Nb.set,Object.assign(Nb.__qIconSet,i)},install({$q:e,iconSet:t,ssrContext:i}){void 0!==e.config.iconMapFn&&(this.iconMapFn=e.config.iconMapFn),e.iconSet=this.__qIconSet,rb(e,"iconMapFn",(()=>this.iconMapFn),(e=>{this.iconMapFn=e})),!0===this.__installed?void 0!==t&&this.set(t):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys:e=>Reflect.ownKeys(e).filter((e=>"set"!==e))}),this.set(t||zb))}}),Db="_q_t_",Gb="_q_s_",jb="_q_l_",Bb="_q_pc_",Vb="_q_f_",$b="_q_fo_",Hb="_q_tabs_",Ub="_q_u_";function Wb(){}var Xb={};function Kb(e,t){if(e===t)return!0;if(null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;let i,n;if(e.constructor===Array){if(i=e.length,i!==t.length)return!1;for(n=i;0!=n--;)if(!0!==Kb(e[n],t[n]))return!1;return!0}if(e.constructor===Map){if(e.size!==t.size)return!1;let i=e.entries();for(n=i.next();!0!==n.done;){if(!0!==t.has(n.value[0]))return!1;n=i.next()}for(i=e.entries(),n=i.next();!0!==n.done;){if(!0!==Kb(n.value[1],t.get(n.value[0])))return!1;n=i.next()}return!0}if(e.constructor===Set){if(e.size!==t.size)return!1;const i=e.entries();for(n=i.next();!0!==n.done;){if(!0!==t.has(n.value[0]))return!1;n=i.next()}return!0}if(null!=e.buffer&&e.buffer.constructor===ArrayBuffer){if(i=e.length,i!==t.length)return!1;for(n=i;0!=n--;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const o=Object.keys(e).filter((t=>void 0!==e[t]));if(i=o.length,i!==Object.keys(t).filter((e=>void 0!==t[e])).length)return!1;for(n=i;0!=n--;){const i=o[n];if(!0!==Kb(e[i],t[i]))return!1}return!0}return e!=e&&t!=t}function Yb(e){return null!==e&&"object"==typeof e&&!0!==Array.isArray(e)}function Zb(e){return"[object Date]"===Object.prototype.toString.call(e)}function Qb(e){return"number"==typeof e&&isFinite(e)}function Jb(e,t){const i=U(e);i.config.globalProperties=t.config.globalProperties;const{reload:n,...o}=t._context;return Object.assign(i._context,o),i}var ex=["B","KB","MB","GB","TB","PB"];function tx(e,t=1){let i=0;for(;parseInt(e,10)>=1024&&i<ex.length-1;)e/=1024,++i;return`${e.toFixed(t)}${ex[i]}`}function ix(e,t,i){return i<=t?t:Math.min(i,Math.max(t,e))}function nx(e,t,i){if(i<=t)return t;const n=i-t+1;let o=t+(e-t)%n;return o<t&&(o=n+o),0===o?0:o}function ox(e,t=2,i="0"){if(null==e)return e;const n=""+e;return n.length>=t?n:new Array(t-n.length+1).join(i)+n}var rx=XMLHttpRequest,sx=rx.prototype.open,ax=["top","right","bottom","left"],lx=[],ux=0,cx=fb({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:e=>ax.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,hijackFilter:Function},emits:["start","stop"],setup(e,{emit:t}){const{proxy:i}=T(),n=a(0),o=a(!1),r=a(!0);let u,c=0,h=null;const d=s((()=>`q-loading-bar q-loading-bar--${e.position}`+(void 0!==e.color?` bg-${e.color}`:"")+(!0===r.value?"":" no-transition"))),p=s((()=>"top"===e.position||"bottom"===e.position)),f=s((()=>!0===p.value?"height":"width")),g=s((()=>{const t=o.value,r=function({p:e,pos:t,active:i,horiz:n,reverse:o,dir:r}){let s=1,a=1;return!0===n?(!0===o&&(s=-1),"bottom"===t&&(a=-1),{transform:`translate3d(${s*(e-100)}%,${i?0:-200*a}%,0)`}):(!0===o&&(a=-1),"right"===t&&(s=-1),{transform:`translate3d(${i?0:r*s*-200}%,${a*(e-100)}%,0)`})}({p:n.value,pos:e.position,active:t,horiz:p.value,reverse:!0===i.$q.lang.rtl&&["top","bottom"].includes(e.position)?!1===e.reverse:e.reverse,dir:!0===i.$q.lang.rtl?-1:1});return r[f.value]=e.size,r.opacity=t?1:0,r})),m=s((()=>!0===o.value?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"}));function v(e=300){const i=u;return u=Math.max(0,e)||0,c++,c>1?(0===i&&e>0?b():null!==h&&i>0&&e<=0&&(clearTimeout(h),h=null),c):(null!==h&&clearTimeout(h),t("start"),n.value=0,h=setTimeout((()=>{h=null,r.value=!0,e>0&&b()}),!0===o._value?500:1),!0!==o._value&&(o.value=!0,r.value=!1),c)}function y(e){return c>0&&(n.value=(t=n.value,"number"!=typeof(i=e)&&(i=t<25?3*Math.random()+3:t<65?3*Math.random():t<85?2*Math.random():t<99?.6:0),ix(t+i,0,100))),c;var t,i}function _(){if(c=Math.max(0,c-1),c>0)return c;null!==h&&(clearTimeout(h),h=null),t("stop");const e=()=>{r.value=!0,n.value=100,h=setTimeout((()=>{h=null,o.value=!1}),1e3)};return 0===n.value?h=setTimeout(e,1):e(),c}function b(){n.value<100&&(h=setTimeout((()=>{h=null,y(),b()}),u))}let x;return l((()=>{var t;!0!==e.skipHijack&&(x=!0,t={start:v,stop:_,hijackFilter:s((()=>e.hijackFilter||null))},ux++,lx.push(t),!(ux>1)&&(rx.prototype.open=function(e,t){const i=[];this.addEventListener("loadstart",(()=>{lx.forEach((e=>{(null===e.hijackFilter.value||!0===e.hijackFilter.value(t))&&(e.start(),i.push(e.stop))}))}),{once:!0}),this.addEventListener("loadend",(()=>{i.forEach((e=>{e()}))}),{once:!0}),sx.apply(this,arguments)}))})),L((()=>{var e;null!==h&&clearTimeout(h),!0===x&&(e=v,lx=lx.filter((t=>t.start!==e)),0===(ux=Math.max(0,ux-1))&&(rx.prototype.open=sx))})),Object.assign(i,{start:v,stop:_,increment:y}),()=>k("div",{class:d.value,style:g.value,...m.value})}}),hx={xs:18,sm:24,md:32,lg:38,xl:46},dx={size:String};function px(e,t=hx){return s((()=>void 0!==e.size?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null))}function fx(e,t){return void 0!==e&&e()||t}function gx(e,t){if(void 0!==e){const t=e();if(null!=t)return t.slice()}return t}function mx(e,t){return void 0!==e?t.concat(e()):t}function vx(e,t){return void 0===e?t:void 0!==t?t.concat(e()):e()}function yx(e,t,i,n,o,r){t.key=n+o;const s=k(e,t,i);return!0===o?S(s,r()):s}var _x="0 0 24 24",bx=e=>e,xx=e=>`ionicons ${e}`,wx={"mdi-":e=>`mdi ${e}`,"icon-":bx,"bt-":e=>`bt ${e}`,"eva-":e=>`eva ${e}`,"ion-md":xx,"ion-ios":xx,"ion-logo":xx,"iconfont ":bx,"ti-":e=>`themify-icon ${e}`,"bi-":e=>`bootstrap-icons ${e}`,"i-":bx},Sx={o_:"-outlined",r_:"-round",s_:"-sharp"},Cx={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},Mx=new RegExp("^("+Object.keys(wx).join("|")+")"),Ex=new RegExp("^("+Object.keys(Sx).join("|")+")"),kx=new RegExp("^("+Object.keys(Cx).join("|")+")"),Tx=/^[Mm]\s?[-+]?\.?\d/,Px=/^img:/,Lx=/^svguse:/,Ix=/^ion-/,Rx=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,Ax=fb({name:"QIcon",props:{...dx,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=px(e),o=s((()=>"q-icon"+(!0===e.left?" on-left":"")+(!0===e.right?" on-right":"")+(void 0!==e.color?` text-${e.color}`:""))),r=s((()=>{let t,n=e.name;if("none"===n||!n)return{none:!0};if(null!==i.iconMapFn){const e=i.iconMapFn(n);if(void 0!==e){if(void 0===e.icon)return{cls:e.cls,content:void 0!==e.content?e.content:" "};if(n=e.icon,"none"===n||!n)return{none:!0}}}if(!0===Tx.test(n)){const[e,t=_x]=n.split("|");return{svg:!0,viewBox:t,nodes:e.split("&&").map((e=>{const[t,i,n]=e.split("@@");return k("path",{style:i,d:t,transform:n})}))}}if(!0===Px.test(n))return{img:!0,src:n.substring(4)};if(!0===Lx.test(n)){const[e,t=_x]=n.split("|");return{svguse:!0,src:e.substring(7),viewBox:t}}let o=" ";const r=n.match(Mx);if(null!==r)t=wx[r[1]](n);else if(!0===Rx.test(n))t=n;else if(!0===Ix.test(n))t=`ionicons ion-${!0===i.platform.is.ios?"ios":"md"}${n.substring(3)}`;else if(!0===kx.test(n)){t="notranslate material-symbols";const e=n.match(kx);null!==e&&(n=n.substring(6),t+=Cx[e[1]]),o=n}else{t="notranslate material-icons";const e=n.match(Ex);null!==e&&(n=n.substring(2),t+=Sx[e[1]]),o=n}return{cls:t,content:o}}));return()=>{const i={class:o.value,style:n.value,"aria-hidden":"true"};return!0===r.value.none?k(e.tag,i,fx(t.default)):!0===r.value.img?k(e.tag,i,mx(t.default,[k("img",{src:r.value.src})])):!0===r.value.svg?k(e.tag,i,mx(t.default,[k("svg",{viewBox:r.value.viewBox||"0 0 24 24"},r.value.nodes)])):!0===r.value.svguse?k(e.tag,i,mx(t.default,[k("svg",{viewBox:r.value.viewBox},[k("use",{"xlink:href":r.value.src})])])):(void 0!==r.value.cls&&(i.class+=" "+r.value.cls),k(e.tag,i,mx(t.default,[r.value.content])))}}});fb({name:"QAvatar",props:{...dx,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const i=px(e),n=s((()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(!0===e.square?" q-avatar--square":!0===e.rounded?" rounded-borders":""))),o=s((()=>e.fontSize?{fontSize:e.fontSize}:null));return()=>{const r=void 0!==e.icon?[k(Ax,{name:e.icon})]:void 0;return k("div",{class:n.value,style:i.value},[k("div",{class:"q-avatar__content row flex-center overflow-hidden",style:o.value},vx(t.default,r))])}}});var qx=["top","middle","bottom"];fb({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>qx.includes(e)}},setup(e,{slots:t}){const i=s((()=>void 0!==e.align?{verticalAlign:e.align}:null)),n=s((()=>{const t=!0===e.outline&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${!0===e.multiLine?"multi":"single"}-line`+(!0===e.outline?" q-badge--outline":void 0!==e.color?` bg-${e.color}`:"")+(void 0!==t?` text-${t}`:"")+(!0===e.floating?" q-badge--floating":"")+(!0===e.rounded?" q-badge--rounded":"")+(!0===e.transparent?" q-badge--transparent":"")}));return()=>k("div",{class:n.value,style:i.value,role:"status","aria-label":e.label},mx(t.default,void 0!==e.label?[e.label]:[]))}});var Fx={dark:{type:Boolean,default:null}};function Ox(e,t){return s((()=>null===e.dark?t.dark.isActive:e.dark))}fb({name:"QBanner",props:{...Fx,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=Ox(e,i),o=s((()=>"q-banner row items-center"+(!0===e.dense?" q-banner--dense":"")+(!0===n.value?" q-banner--dark q-dark":"")+(!0===e.rounded?" rounded-borders":""))),r=s((()=>"q-banner__actions row items-center justify-end col-"+(!0===e.inlineActions?"auto":"all")));return()=>{const i=[k("div",{class:"q-banner__avatar col-auto row items-center self-start"},fx(t.avatar)),k("div",{class:"q-banner__content col text-body2"},fx(t.default))],n=fx(t.action);return void 0!==n&&i.push(k("div",{class:r.value},n)),k("div",{class:o.value+(!1===e.inlineActions&&void 0!==n?" q-banner--top-padding":""),role:"alert"},i)}}}),fb({name:"QBar",props:{...Fx,dense:Boolean},setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=Ox(e,i),o=s((()=>`q-bar row no-wrap items-center q-bar--${!0===e.dense?"dense":"standard"}  q-bar--${!0===n.value?"dark":"light"}`));return()=>k("div",{class:o.value,role:"toolbar"},fx(t.default))}});var zx={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Nx=Object.keys(zx),Dx={align:{type:String,validator:e=>Nx.includes(e)}};function Gx(e){return s((()=>{const t=void 0===e.align?!0===e.vertical?"stretch":"left":e.align;return`${!0===e.vertical?"items":"justify"}-${zx[t]}`}))}function jx(e){if(Object(e.$parent)===e.$parent)return e.$parent;let{parent:t}=e.$;for(;Object(t)===t;){if(Object(t.proxy)===t.proxy)return t.proxy;t=t.parent}}function Bx(e,t){"symbol"==typeof t.type?!0===Array.isArray(t.children)&&t.children.forEach((t=>{Bx(e,t)})):e.add(t)}function Vx(e){const t=new Set;return e.forEach((e=>{Bx(t,e)})),Array.from(t)}function $x(e){return void 0!==e.appContext.config.globalProperties.$router}function Hx(e){return!0===e.isUnmounted||!0===e.isDeactivated}var Ux=["",!0];function Wx(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}function Xx(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Kx(e,t){return!0===Array.isArray(t)?e.length===t.length&&e.every(((e,i)=>e===t[i])):1===e.length&&e[0]===t}function Yx(e,t){return!0===Array.isArray(e)?Kx(e,t):!0===Array.isArray(t)?Kx(t,e):e===t}fb({name:"QBreadcrumbs",props:{...Dx,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const i=Gx(e),n=s((()=>`flex items-center ${i.value}${"none"===e.gutter?"":` q-gutter-${e.gutter}`}`)),o=s((()=>e.separatorColor?` text-${e.separatorColor}`:"")),r=s((()=>` text-${e.activeColor}`));return()=>{if(void 0===t.default)return;const i=Vx(fx(t.default));if(0===i.length)return;let s=1;const a=[],l=i.filter((e=>"QBreadcrumbsEl"===e.type?.name)).length,u=void 0!==t.separator?t.separator:()=>e.separator;return i.forEach((e=>{if("QBreadcrumbsEl"===e.type?.name){const t=s<l,i=(!0===t?"":" q-breadcrumbs--last")+(!0!==(null!==e.props&&Ux.includes(e.props.disable))&&!0===t?r.value:"");s++,a.push(k("div",{class:`flex items-center${i}`},[e])),!0===t&&a.push(k("div",{class:"q-breadcrumbs__separator"+o.value},u()))}else a.push(e)})),k("div",{class:"q-breadcrumbs"},[k("div",{class:n.value},a)])}}});var Zx={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},Qx={...Zx,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function Jx({fallbackTag:e,useDisableForRouterLinkProps:t=!0}={}){const i=T(),{props:n,proxy:o,emit:r}=i,a=$x(i),l=s((()=>!0!==n.disable&&void 0!==n.href)),u=s(!0===t?()=>!0===a&&!0!==n.disable&&!0!==l.value&&void 0!==n.to&&null!==n.to&&""!==n.to:()=>!0===a&&!0!==l.value&&void 0!==n.to&&null!==n.to&&""!==n.to),c=s((()=>!0===u.value?_(n.to):null)),h=s((()=>null!==c.value)),d=s((()=>!0===l.value||!0===h.value)),p=s((()=>"a"===n.type||!0===d.value?"a":n.tag||e||"div")),f=s((()=>!0===l.value?{href:n.href,target:n.target}:!0===h.value?{href:c.value.href,target:n.target}:{})),g=s((()=>{if(!1===h.value)return-1;const{matched:e}=c.value,{length:t}=e,i=e[t-1];if(void 0===i)return-1;const n=o.$route.matched;if(0===n.length)return-1;const r=n.findIndex(Xx.bind(null,i));if(-1!==r)return r;const s=Wx(e[t-2]);return t>1&&Wx(i)===s&&n[n.length-1].path!==s?n.findIndex(Xx.bind(null,e[t-2])):r})),m=s((()=>!0===h.value&&-1!==g.value&&function(e,t){for(const i in t){const n=t[i],o=e[i];if("string"==typeof n){if(n!==o)return!1}else if(!1===Array.isArray(o)||o.length!==n.length||n.some(((e,t)=>e!==o[t])))return!1}return!0}(o.$route.params,c.value.params))),v=s((()=>!0===m.value&&g.value===o.$route.matched.length-1&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!1===Yx(e[i],t[i]))return!1;return!0}(o.$route.params,c.value.params))),y=s((()=>!0===h.value?!0===v.value?` ${n.exactActiveClass} ${n.activeClass}`:!0===n.exact?"":!0===m.value?` ${n.activeClass}`:"":""));function _(e){try{return o.$router.resolve(e)}catch{}return null}function b(e,{returnRouterError:t,to:i=n.to,replace:r=n.replace}={}){if(!0===n.disable)return e.preventDefault(),Promise.resolve(!1);if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||void 0!==e.button&&0!==e.button||"_blank"===n.target)return Promise.resolve(!1);e.preventDefault();const s=o.$router[!0===r?"replace":"push"](i);return!0===t?s:s.then((()=>{})).catch((()=>{}))}return{hasRouterLink:h,hasHrefLink:l,hasLink:d,linkTag:p,resolvedLink:c,linkIsActive:m,linkIsExactActive:v,linkClass:y,linkAttrs:f,getLink:_,navigateToRouterLink:b,navigateOnClick:function(e){if(!0===h.value){const t=t=>b(e,t);r("click",e,t),!0!==e.defaultPrevented&&t()}else r("click",e)}}}fb({name:"QBreadcrumbsEl",props:{...Qx,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:i,linkAttrs:n,linkClass:o,navigateOnClick:r}=Jx(),a=s((()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(!0!==e.disable?"q-link--focusable"+o.value:"q-breadcrumbs__el--disable"),...n.value,onClick:r}))),l=s((()=>"q-breadcrumbs__el-icon"+(void 0!==e.label?" q-breadcrumbs__el-icon--with-label":"")));return()=>{const n=[];return void 0!==e.icon&&n.push(k(Ax,{class:l.value,name:e.icon})),void 0!==e.label&&n.push(e.label),k(i.value,{...a.value},mx(t.default,n))}}});var ew={size:{type:[String,Number],default:"1em"},color:String};function tw(e){return{cSize:s((()=>e.size in hx?`${hx[e.size]}px`:e.size)),classes:s((()=>"q-spinner"+(e.color?` text-${e.color}`:"")))}}var iw=fb({name:"QSpinner",props:{...ew,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value+" q-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[k("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});function nw(e){if(e===window)return{top:0,left:0};const{top:t,left:i}=e.getBoundingClientRect();return{top:t,left:i}}function ow(e){return e===window?window.innerHeight:e.getBoundingClientRect().height}function rw(e,t){const i=e.style;for(const n in t)i[n]=t[n]}function sw(e,t){if(null==e||!0===e.contains(t))return!0;for(let i=e.nextElementSibling;null!==i;i=i.nextElementSibling)if(i.contains(t))return!0;return!1}function aw(e,t=250){let i,n=!1;return function(){return!1===n&&(n=!0,setTimeout((()=>{n=!1}),t),i=e.apply(this,arguments)),i}}function lw(e,t,i,n){!0===i.modifiers.stop&&xb(e);const o=i.modifiers.color;let r=i.modifiers.center;r=!0===r||!0===n;const s=document.createElement("span"),a=document.createElement("span"),l=bb(e),{left:u,top:c,width:h,height:d}=t.getBoundingClientRect(),p=Math.sqrt(h*h+d*d),f=p/2,g=(h-p)/2+"px",m=r?g:l.left-u-f+"px",v=(d-p)/2+"px",y=r?v:l.top-c-f+"px";a.className="q-ripple__inner",rw(a,{height:`${p}px`,width:`${p}px`,transform:`translate3d(${m},${y},0) scale3d(.2,.2,1)`,opacity:0}),s.className="q-ripple"+(o?" text-"+o:""),s.setAttribute("dir","ltr"),s.appendChild(a),t.appendChild(s);const _=()=>{s.remove(),clearTimeout(b)};i.abort.push(_);let b=setTimeout((()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${g},${v},0) scale3d(1,1,1)`,a.style.opacity=.2,b=setTimeout((()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,b=setTimeout((()=>{s.remove(),i.abort.splice(i.abort.indexOf(_),1)}),275)}),250)}),50)}function uw(e,{modifiers:t,value:i,arg:n}){const o=Object.assign({},e.cfg.ripple,t,i);e.modifiers={early:!0===o.early,stop:!0===o.stop,center:!0===o.center,color:o.color||n,keyCodes:[].concat(o.keyCodes||13)}}var cw=gb({name:"ripple",beforeMount(e,t){const i=t.instance.$.appContext.config.globalProperties.$q.config||{};if(!1===i.ripple)return;const n={cfg:i,enabled:!1!==t.value,modifiers:{},abort:[],start(t){!0===n.enabled&&!0!==t.qSkipRipple&&t.type===(!0===n.modifiers.early?"pointerdown":"click")&&lw(t,e,n,!0===t.qKeyEvent)},keystart:aw((t=>{!0===n.enabled&&!0!==t.qSkipRipple&&!0===Rb(t,n.modifiers.keyCodes)&&t.type==="key"+(!0===n.modifiers.early?"down":"up")&&lw(t,e,n,!0)}),300)};uw(n,t),e.__qripple=n,Mb(n,"main",[[e,"pointerdown","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__qripple;void 0!==i&&(i.enabled=!1!==t.value,!0===i.enabled&&Object(t.value)===t.value&&uw(i,t))}},beforeUnmount(e){const t=e.__qripple;void 0!==t&&(t.abort.forEach((e=>{e()})),Eb(t,"main"),delete e._qripple)}}),hw={none:0,xs:4,sm:8,md:16,lg:24,xl:32},dw={xs:8,sm:10,md:14,lg:20,xl:24},pw=["button","submit","reset"],fw=/[^\s]\/[^\s]/,gw=["flat","outline","push","unelevated"];function mw(e,t){return!0===e.flat?"flat":!0===e.outline?"outline":!0===e.push?"push":!0===e.unelevated?"unelevated":t}function vw(e){const t=mw(e);return void 0!==t?{[t]:!0}:{}}var yw={...dx,...Zx,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...gw.reduce(((e,t)=>(e[t]=Boolean)&&e),{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Dx.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},_w={...yw,round:Boolean},{passiveCapture:bw}=vb,xw=null,ww=null,Sw=null,Cw=fb({name:"QBtn",props:{..._w,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{classes:o,style:r,innerClasses:l,attributes:u,hasLink:c,linkTag:h,navigateOnClick:d,isActionable:p}=function(e){const t=px(e,dw),i=Gx(e),{hasRouterLink:n,hasLink:o,linkTag:r,linkAttrs:a,navigateOnClick:l}=Jx({fallbackTag:"button"}),u=s((()=>{const i=!1===e.fab&&!1===e.fabMini?t.value:{};return void 0!==e.padding?Object.assign({},i,{padding:e.padding.split(/\s+/).map((e=>e in hw?hw[e]+"px":e)).join(" "),minWidth:"0",minHeight:"0"}):i})),c=s((()=>!0===e.rounded||!0===e.fab||!0===e.fabMini)),h=s((()=>!0!==e.disable&&!0!==e.loading)),d=s((()=>!0===h.value?e.tabindex||0:-1)),p=s((()=>mw(e,"standard"))),f=s((()=>{const t={tabindex:d.value};return!0===o.value?Object.assign(t,a.value):!0===pw.includes(e.type)&&(t.type=e.type),"a"===r.value?(!0===e.disable?t["aria-disabled"]="true":void 0===t.href&&(t.role="button"),!0!==n.value&&!0===fw.test(e.type)&&(t.type=e.type)):!0===e.disable&&(t.disabled="",t["aria-disabled"]="true"),!0===e.loading&&void 0!==e.percentage&&Object.assign(t,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),t}));return{classes:s((()=>{let t;void 0!==e.color?t=!0===e.flat||!0===e.outline?`text-${e.textColor||e.color}`:`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(t=`text-${e.textColor}`);const i=!0===e.round?"round":"rectangle"+(!0===c.value?" q-btn--rounded":!0===e.square?" q-btn--square":"");return`q-btn--${p.value} q-btn--${i}`+(void 0!==t?" "+t:"")+(!0===h.value?" q-btn--actionable q-focusable q-hoverable":!0===e.disable?" disabled":"")+(!0===e.fab?" q-btn--fab":!0===e.fabMini?" q-btn--fab-mini":"")+(!0===e.noCaps?" q-btn--no-uppercase":"")+(!0===e.dense?" q-btn--dense":"")+(!0===e.stretch?" no-border-radius self-stretch":"")+(!0===e.glossy?" glossy":"")+(e.square?" q-btn--square":"")})),style:u,innerClasses:s((()=>i.value+(!0===e.stack?" column":" row")+(!0===e.noWrap?" no-wrap text-no-wrap":"")+(!0===e.loading?" q-btn__content--hidden":""))),attributes:f,hasLink:o,linkTag:r,navigateOnClick:l,isActionable:h}}(e),f=a(null),g=a(null);let m,v=null,y=null;const _=s((()=>void 0!==e.label&&null!==e.label&&""!==e.label)),b=s((()=>!0!==e.disable&&!1!==e.ripple&&{keyCodes:!0===c.value?[13,32]:[13],...!0===e.ripple?{}:e.ripple})),x=s((()=>({center:e.round}))),w=s((()=>{const t=Math.max(0,Math.min(100,e.percentage));return t>0?{transition:"transform 0.6s",transform:`translateX(${t-100}%)`}:{}})),C=s((()=>{if(!0===e.loading)return{onMousedown:O,onTouchstart:O,onClick:O,onKeydown:O,onKeyup:O};if(!0===p.value){const t={onClick:E,onKeydown:P,onMousedown:R};return!0===n.$q.platform.has.touch&&(t["onTouchstart"+(void 0!==e.onTouchstart?"":"Passive")]=I),t}return{onClick:Sb}})),M=s((()=>({ref:f,class:"q-btn q-btn-item non-selectable no-outline "+o.value,style:r.value,...u.value,...C.value})));function E(t){if(null!==f.value){if(void 0!==t){if(!0===t.defaultPrevented)return;const i=document.activeElement;if("submit"===e.type&&i!==document.body&&!1===f.value.contains(i)&&!1===i.contains(f.value)){!0!==t.qAvoidFocus&&f.value.focus();const e=()=>{document.removeEventListener("keydown",Sb,!0),document.removeEventListener("keyup",e,bw),f.value?.removeEventListener("blur",e,bw)};document.addEventListener("keydown",Sb,!0),document.addEventListener("keyup",e,bw),f.value.addEventListener("blur",e,bw)}}d(t)}}function P(e){null!==f.value&&(i("keydown",e),!0===Rb(e,[13,32])&&ww!==f.value&&(null!==ww&&F(),!0!==e.defaultPrevented&&(!0!==e.qAvoidFocus&&f.value.focus(),ww=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("keyup",q,!0),f.value.addEventListener("blur",q,bw)),Sb(e)))}function I(e){null!==f.value&&(i("touchstart",e),!0!==e.defaultPrevented&&(xw!==f.value&&(null!==xw&&F(),xw=f.value,v=e.target,v.addEventListener("touchcancel",q,bw),v.addEventListener("touchend",q,bw)),m=!0,null!==y&&clearTimeout(y),y=setTimeout((()=>{y=null,m=!1}),200)))}function R(e){null!==f.value&&(e.qSkipRipple=!0===m,i("mousedown",e),!0!==e.defaultPrevented&&Sw!==f.value&&(null!==Sw&&F(),Sw=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("mouseup",q,bw)))}function q(e){if(null!==f.value&&("blur"!==e?.type||document.activeElement!==f.value)){if("keyup"===e?.type){if(ww===f.value&&!0===Rb(e,[13,32])){const t=new MouseEvent("click",e);t.qKeyEvent=!0,!0===e.defaultPrevented&&wb(t),!0===e.cancelBubble&&xb(t),f.value.dispatchEvent(t),Sb(e),e.qKeyEvent=!0}i("keyup",e)}F()}}function F(e){const t=g.value;!0!==e&&(xw===f.value||Sw===f.value)&&null!==t&&t!==document.activeElement&&(t.setAttribute("tabindex",-1),t.focus()),xw===f.value&&(null!==v&&(v.removeEventListener("touchcancel",q,bw),v.removeEventListener("touchend",q,bw)),xw=v=null),Sw===f.value&&(document.removeEventListener("mouseup",q,bw),Sw=null),ww===f.value&&(document.removeEventListener("keyup",q,!0),f.value?.removeEventListener("blur",q,bw),ww=null),f.value?.classList.remove("q-btn--active")}function O(e){Sb(e),e.qSkipRipple=!0}return L((()=>{F(!0)})),Object.assign(n,{click:e=>{!0===p.value&&E(e)}}),()=>{let i=[];void 0!==e.icon&&i.push(k(Ax,{name:e.icon,left:!0!==e.stack&&!0===_.value,role:"img"})),!0===_.value&&i.push(k("span",{class:"block"},[e.label])),i=mx(t.default,i),void 0!==e.iconRight&&!1===e.round&&i.push(k(Ax,{name:e.iconRight,right:!0!==e.stack&&!0===_.value,role:"img"}));const n=[k("span",{class:"q-focus-helper",ref:g})];return!0===e.loading&&void 0!==e.percentage&&n.push(k("span",{class:"q-btn__progress absolute-full overflow-hidden"+(!0===e.darkPercentage?" q-btn__progress--dark":"")},[k("span",{class:"q-btn__progress-indicator fit block",style:w.value})])),n.push(k("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+l.value},i)),null!==e.loading&&n.push(k(A,{name:"q-transition--fade"},(()=>!0===e.loading?[k("span",{key:"loading",class:"absolute-full flex flex-center"},void 0!==t.loading?t.loading():[k(iw)])]:null))),S(k(h.value,M.value,n),[[cw,b.value,void 0,x.value]])}}}),Mw=fb({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const i=s((()=>{const t=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter((t=>!0===e[t])).map((e=>`q-btn-group--${e}`)).join(" ");return"q-btn-group row no-wrap"+(0!==t.length?" "+t:"")+(!0===e.spread?" q-btn-group--spread":" inline")}));return()=>k("div",{class:i.value},fx(t.default))}});function Ew(){if(void 0!==window.getSelection){const e=window.getSelection();void 0!==e.empty?e.empty():void 0!==e.removeAllRanges&&(e.removeAllRanges(),!0!==pb.is.mobile&&e.addRange(document.createRange()))}else void 0!==document.selection&&document.selection.empty()}var kw={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},Tw={...kw,contextMenu:Boolean};function Pw({showing:e,avoidEmit:t,configureAnchorEl:i}){const{props:n,proxy:o,emit:s}=T(),u=a(null);let c=null;function h(e){return null!==u.value&&(void 0===e||void 0===e.touches||e.touches.length<=1)}const d={};function p(){Eb(d,"anchor")}function f(){if(!1===n.target||""===n.target||null===o.$el.parentNode)u.value=null;else if(!0===n.target)!function(e){for(u.value=e;u.value.classList.contains("q-anchor--skip");)u.value=u.value.parentNode;i()}(o.$el.parentNode);else{let e=n.target;if("string"==typeof n.target)try{e=document.querySelector(n.target)}catch{e=void 0}null!=e?(u.value=e.$el||e,i()):u.value=null}}return void 0===i&&(Object.assign(d,{hide(e){o.hide(e)},toggle(e){o.toggle(e),e.qAnchorHandled=!0},toggleKey(e){!0===Rb(e,13)&&d.toggle(e)},contextClick(e){o.hide(e),wb(e),P((()=>{o.show(e),e.qAnchorHandled=!0}))},prevent:wb,mobileTouch(e){if(d.mobileCleanup(e),!0!==h(e))return;o.hide(e),u.value.classList.add("non-selectable");const t=e.target;Mb(d,"anchor",[[t,"touchmove","mobileCleanup","passive"],[t,"touchend","mobileCleanup","passive"],[t,"touchcancel","mobileCleanup","passive"],[u.value,"contextmenu","prevent","notPassive"]]),c=setTimeout((()=>{c=null,o.show(e),e.qAnchorHandled=!0}),300)},mobileCleanup(t){u.value.classList.remove("non-selectable"),null!==c&&(clearTimeout(c),c=null),!0===e.value&&void 0!==t&&Ew()}}),i=function(e=n.contextMenu){if(!0===n.noParentEvent||null===u.value)return;let t;t=!0===e?!0===o.$q.platform.is.mobile?[[u.value,"touchstart","mobileTouch","passive"]]:[[u.value,"mousedown","hide","passive"],[u.value,"contextmenu","contextClick","notPassive"]]:[[u.value,"click","toggle","passive"],[u.value,"keyup","toggleKey","passive"]],Mb(d,"anchor",t)}),r((()=>n.contextMenu),(e=>{null!==u.value&&(p(),i(e))})),r((()=>n.target),(()=>{null!==u.value&&p(),f()})),r((()=>n.noParentEvent),(e=>{null!==u.value&&(!0===e?p():i())})),l((()=>{f(),!0!==t&&!0===n.modelValue&&null===u.value&&s("update:modelValue",!1)})),L((()=>{null!==c&&clearTimeout(c),p()})),{anchorEl:u,canShow:h,anchorEvents:d}}function Lw(e,t){const i=a(null);let n;function o(e,t){const i=(void 0!==t?"add":"remove")+"EventListener",o=void 0!==t?t:n;e!==window&&e[i]("scroll",o,vb.passive),window[i]("scroll",o,vb.passive),n=t}function s(){null!==i.value&&(o(i.value),i.value=null)}const l=r((()=>e.noParentEvent),(()=>{null!==i.value&&(s(),t())}));return L(l),{localScrollTarget:i,unconfigureScrollTarget:s,changeScrollEvent:o}}var Iw={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Rw=["beforeShow","show","beforeHide","hide"];function Aw({showing:e,canShow:t,hideOnRouteChange:i,handleShow:n,handleHide:o,processOnMount:s}){const a=T(),{props:u,emit:c,proxy:h}=a;let d;function p(e){if(!0===u.disable||!0===e?.qAnchorHandled||void 0!==t&&!0!==t(e))return;const i=void 0!==u["onUpdate:modelValue"];!0===i&&(c("update:modelValue",!0),d=e,P((()=>{d===e&&(d=void 0)}))),(null===u.modelValue||!1===i)&&f(e)}function f(t){!0!==e.value&&(e.value=!0,c("beforeShow",t),void 0!==n?n(t):c("show",t))}function g(e){if(!0===u.disable)return;const t=void 0!==u["onUpdate:modelValue"];!0===t&&(c("update:modelValue",!1),d=e,P((()=>{d===e&&(d=void 0)}))),(null===u.modelValue||!1===t)&&m(e)}function m(t){!1!==e.value&&(e.value=!1,c("beforeHide",t),void 0!==o?o(t):c("hide",t))}function v(t){!0===u.disable&&!0===t?void 0!==u["onUpdate:modelValue"]&&c("update:modelValue",!1):!0===t!==e.value&&(!0===t?f:m)(d)}r((()=>u.modelValue),v),void 0!==i&&!0===$x(a)&&r((()=>h.$route.fullPath),(()=>{!0===i.value&&!0===e.value&&g()})),!0===s&&l((()=>{v(u.modelValue)}));const y={show:p,hide:g,toggle:function(t){!0===e.value?g(t):p(t)}};return Object.assign(h,y),y}var qw=[],Fw=[];function Ow(e){Fw=Fw.filter((t=>t!==e))}function zw(e){Ow(e),0===Fw.length&&0!==qw.length&&(qw[qw.length-1](),qw=[])}function Nw(e){0===Fw.length?e():qw.push(e)}var Dw=[],Gw=[],jw=1,Bw=document.body;function Vw(e,t){const i=document.createElement("div");if(i.id=void 0!==t?`q-portal--${t}--${jw++}`:e,void 0!==Xb.globalNodes){const e=Xb.globalNodes.class;void 0!==e&&(i.className=e)}return Bw.appendChild(i),Dw.push(i),Gw.push(t),i}function $w(e){const t=Dw.indexOf(e);Dw.splice(t,1),Gw.splice(t,1),e.remove()}var Hw=[];function Uw(e,t){do{if("QMenu"===e.$options.name){if(e.hide(t),!0===e.$props.separateClosePopup)return jx(e)}else if(!0===e.__qPortal){const i=jx(e);return"QPopupProxy"===i?.$options.name?(e.hide(t),i):e}e=jx(e)}while(null!=e)}var Ww=fb({name:"QPortal",setup:(e,{slots:t})=>()=>t.default()});function Xw(e,t,i,n){const o=a(!1),r=a(!1);let s=null;const l={},u="dialog"===n&&function(e){for(e=e.parent;null!=e;){if("QGlobalDialog"===e.type.name)return!0;if("QDialog"===e.type.name||"QMenu"===e.type.name)return!1;e=e.parent}return!1}(e);function c(t){if(r.value=!1,!0!==t)return;zw(l),o.value=!1;const i=Hw.indexOf(e.proxy);-1!==i&&Hw.splice(i,1),null!==s&&($w(s),s=null)}return q((()=>{c(!0)})),e.proxy.__qPortal=!0,rb(e.proxy,"contentEl",(()=>t.value)),{showPortal:function(t){if(!0===t)return zw(l),void(r.value=!0);var i;r.value=!1,!1===o.value&&(!1===u&&null===s&&(s=Vw(!1,n)),o.value=!0,Hw.push(e.proxy),Ow(i=l),Fw.push(i))},hidePortal:c,portalIsActive:o,portalIsAccessible:r,renderPortal:()=>!0===u?i():!0===o.value?[k(F,{to:s},k(Ww,i))]:void 0}}var Kw={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Yw(e,t=()=>{},i=()=>{}){return{transitionProps:s((()=>{const n=`q-transition--${e.transitionShow||t()}`,o=`q-transition--${e.transitionHide||i()}`;return{appear:!0,enterFromClass:`${n}-enter-from`,enterActiveClass:`${n}-enter-active`,enterToClass:`${n}-enter-to`,leaveFromClass:`${o}-leave-from`,leaveActiveClass:`${o}-leave-active`,leaveToClass:`${o}-leave-to`}})),transitionStyle:s((()=>`--q-transition-duration: ${e.transitionDuration}ms`))}}function Zw(){let e;const t=T();function i(){e=void 0}return I(i),L(i),{removeTick:i,registerTick(i){e=i,P((()=>{e===i&&(!1===Hx(t)&&e(),e=void 0)}))}}}function Qw(){let e=null;const t=T();function i(){null!==e&&(clearTimeout(e),e=null)}return I(i),L(i),{removeTimeout:i,registerTimeout(n,o){i(),!1===Hx(t)&&(e=setTimeout((()=>{e=null,n()}),o))}}}var Jw,eS=[Element,String],tS=[null,document,document.body,document.scrollingElement,document.documentElement];function iS(e,t){let i=function(e){if(null==e)return;if("string"==typeof e)try{return document.querySelector(e)||void 0}catch{return}const t=f(e);return t?t.$el||t:void 0}(t);if(void 0===i){if(null==e)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return tS.includes(i)?window:i}function nS(e){return(e===window?document.body:e).scrollHeight}function oS(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function rS(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function sS(e,t,i=0){const n=void 0===arguments[3]?performance.now():arguments[3],o=oS(e);i<=0?o!==t&&lS(e,t):requestAnimationFrame((r=>{const s=r-n,a=o+(t-o)/Math.max(s,i)*s;lS(e,a),a!==t&&sS(e,t,i-s,r)}))}function aS(e,t,i=0){const n=void 0===arguments[3]?performance.now():arguments[3],o=rS(e);i<=0?o!==t&&uS(e,t):requestAnimationFrame((r=>{const s=r-n,a=o+(t-o)/Math.max(s,i)*s;uS(e,a),a!==t&&aS(e,t,i-s,r)}))}function lS(e,t){e!==window?e.scrollTop=t:window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t)}function uS(e,t){e!==window?e.scrollLeft=t:window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)}function cS(e,t,i){i?sS(e,t,i):lS(e,t)}function hS(e,t,i){i?aS(e,t,i):uS(e,t)}function dS(){if(void 0!==Jw)return Jw;const e=document.createElement("p"),t=document.createElement("div");rw(e,{width:"100%",height:"200px"}),rw(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),Jw=i-n}function pS(e,t=!0){return!(!e||e.nodeType!==Node.ELEMENT_NODE)&&(t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"])))}var fS,gS=[];function mS(e){fS=27===e.keyCode}function vS(){!0===fS&&(fS=!1)}function yS(e){!0===fS&&(fS=!1,!0===Rb(e,27)&&gS[gS.length-1](e))}function _S(e){window[e]("keydown",mS),window[e]("blur",vS),window[e]("keyup",yS),fS=!1}function bS(e){!0===hb.is.desktop&&(gS.push(e),1===gS.length&&_S("addEventListener"))}function xS(e){const t=gS.indexOf(e);-1!==t&&(gS.splice(t,1),0===gS.length&&_S("removeEventListener"))}var wS=[];function SS(e){wS[wS.length-1](e)}function CS(e){!0===hb.is.desktop&&(wS.push(e),1===wS.length&&document.body.addEventListener("focusin",SS))}function MS(e){const t=wS.indexOf(e);-1!==t&&(wS.splice(t,1),0===wS.length&&document.body.removeEventListener("focusin",SS))}var ES,kS,{notPassiveCapture:TS}=vb,PS=[];function LS(e){const t=e.target;if(void 0===t||8===t.nodeType||!0===t.classList.contains("no-pointer-events"))return;let i=Hw.length-1;for(;i>=0;){const e=Hw[i].$;if("QTooltip"!==e.type.name){if("QDialog"!==e.type.name)break;if(!0!==e.props.seamless)return;i--}else i--}for(let n=PS.length-1;n>=0;n--){const i=PS[n];if(null!==i.anchorEl.value&&!1!==i.anchorEl.value.contains(t)||t!==document.body&&(null===i.innerRef.value||!1!==i.innerRef.value.contains(t)))return;e.qClickOutside=!0,i.onClickOutside(e)}}function IS(e){PS.push(e),1===PS.length&&(document.addEventListener("mousedown",LS,TS),document.addEventListener("touchstart",LS,TS))}function RS(e){const t=PS.findIndex((t=>t===e));-1!==t&&(PS.splice(t,1),0===PS.length&&(document.removeEventListener("mousedown",LS,TS),document.removeEventListener("touchstart",LS,TS)))}function AS(e){const t=e.split(" ");return 2===t.length&&!0===["top","center","bottom"].includes(t[0])&&(!0===["left","middle","right","start","end"].includes(t[1])||!1)}function qS(e){return!e||!(2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])}var FS={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function OS(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:FS[`${i[1]}#${!0===t?"rtl":"ltr"}`]}}function zS(e,t,i,n){return{top:e[i.vertical]-t[n.vertical],left:e[i.horizontal]-t[n.horizontal]}}function NS(e,t=0){if(null===e.targetEl||null===e.anchorEl||t>5)return;if(0===e.targetEl.offsetHeight||0===e.targetEl.offsetWidth)return void setTimeout((()=>{NS(e,t+1)}),10);const{targetEl:i,offset:n,anchorEl:o,anchorOrigin:r,selfOrigin:s,absoluteOffset:a,fit:l,cover:u,maxHeight:c,maxWidth:h}=e;if(!0===hb.is.ios&&void 0!==window.visualViewport){const e=document.body.style,{offsetLeft:t,offsetTop:i}=window.visualViewport;t!==ES&&(e.setProperty("--q-pe-left",t+"px"),ES=t),i!==kS&&(e.setProperty("--q-pe-top",i+"px"),kS=i)}const{scrollLeft:d,scrollTop:p}=i,f=void 0===a?function(e,t){let{top:i,left:n,right:o,bottom:r,width:s,height:a}=e.getBoundingClientRect();return void 0!==t&&(i-=t[1],n-=t[0],r+=t[1],o+=t[0],s+=t[0],a+=t[1]),{top:i,bottom:r,height:a,left:n,right:o,width:s,middle:n+(o-n)/2,center:i+(r-i)/2}}(o,!0===u?[0,0]:n):function(e,t,i){let{top:n,left:o}=e.getBoundingClientRect();return n+=t.top,o+=t.left,void 0!==i&&(n+=i[1],o+=i[0]),{top:n,bottom:n+1,height:1,left:o,right:o+1,width:1,middle:o,center:n}}(o,a,n);Object.assign(i.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:h,maxHeight:c,visibility:"visible"});const{offsetWidth:g,offsetHeight:m}=i,{elWidth:v,elHeight:y}=!0===l||!0===u?{elWidth:Math.max(f.width,g),elHeight:!0===u?Math.max(f.height,m):m}:{elWidth:g,elHeight:m};let _={maxWidth:h,maxHeight:c};(!0===l||!0===u)&&(_.minWidth=f.width+"px",!0===u&&(_.minHeight=f.height+"px")),Object.assign(i.style,_);const b={top:0,center:(w=y)/2,bottom:w,left:0,middle:(x=v)/2,right:x};var x,w;let S=zS(f,b,r,s);if(void 0===a||void 0===n)DS(S,f,b,r,s);else{const{top:e,left:t}=S;DS(S,f,b,r,s);let i=!1;if(S.top!==e){i=!0;const e=2*n[1];f.center=f.top-=e,f.bottom-=e+2}if(S.left!==t){i=!0;const e=2*n[0];f.middle=f.left-=e,f.right-=e+2}!0===i&&(S=zS(f,b,r,s),DS(S,f,b,r,s))}_={top:S.top+"px",left:S.left+"px"},void 0!==S.maxHeight&&(_.maxHeight=S.maxHeight+"px",f.height>S.maxHeight&&(_.minHeight=_.maxHeight)),void 0!==S.maxWidth&&(_.maxWidth=S.maxWidth+"px",f.width>S.maxWidth&&(_.minWidth=_.maxWidth)),Object.assign(i.style,_),i.scrollTop!==p&&(i.scrollTop=p),i.scrollLeft!==d&&(i.scrollLeft=d)}function DS(e,t,i,n,o){const r=i.bottom,s=i.right,a=dS(),l=window.innerHeight-a,u=document.body.clientWidth;if(e.top<0||e.top+r>l)if("center"===o.vertical)e.top=t[n.vertical]>l/2?Math.max(0,l-r):0,e.maxHeight=Math.min(r,l);else if(t[n.vertical]>l/2){const i=Math.min(l,"center"===n.vertical?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,i),e.top=Math.max(0,i-r)}else e.top=Math.max(0,"center"===n.vertical?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,l-e.top);if(e.left<0||e.left+s>u)if(e.maxWidth=Math.min(s,u),"middle"===o.horizontal)e.left=t[n.horizontal]>u/2?Math.max(0,u-s):0;else if(t[n.horizontal]>u/2){const i=Math.min(u,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(s,i),e.left=Math.max(0,i-e.maxWidth)}else e.left=Math.max(0,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(s,u-e.left)}["left","middle","right"].forEach((e=>{FS[`${e}#ltr`]=e,FS[`${e}#rtl`]=e}));var GS,jS=fb({name:"QMenu",inheritAttrs:!1,props:{...Tw,...Iw,...Fx,...Kw,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:AS},self:{type:String,validator:AS},offset:{type:Array,validator:qS},scrollTarget:eS,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Rw,"click","escapeKey"],setup(e,{slots:t,emit:i,attrs:n}){let o,l,u,c=null;const h=T(),{proxy:d}=h,{$q:p}=d,f=a(null),g=a(!1),m=s((()=>!0!==e.persistent&&!0!==e.noRouteDismiss)),v=Ox(e,p),{registerTick:y,removeTick:_}=Zw(),{registerTimeout:b}=Qw(),{transitionProps:x,transitionStyle:w}=Yw(e),{localScrollTarget:S,changeScrollEvent:C,unconfigureScrollTarget:M}=Lw(e,$),{anchorEl:E,canShow:P}=Pw({showing:g}),{hide:I}=Aw({showing:g,canShow:P,handleShow:function(t){if(c=!1===e.noRefocus?document.activeElement:null,CS(U),R(),$(),o=void 0,void 0!==t&&(e.touchPosition||e.contextMenu)){const e=bb(t);if(void 0!==e.left){const{top:t,left:i}=E.value.getBoundingClientRect();o={left:e.left-i,top:e.top-t}}}void 0===l&&(l=r((()=>p.screen.width+"|"+p.screen.height+"|"+e.self+"|"+e.anchor+"|"+p.lang.rtl),X)),!0!==e.noFocus&&document.activeElement.blur(),y((()=>{X(),!0!==e.noFocus&&B()})),b((()=>{!0===p.platform.is.ios&&(u=e.autoClose,f.value.click()),X(),R(!0),i("show",t)}),e.transitionDuration)},handleHide:function(t){_(),q(),V(!0),null!==c&&(void 0===t||!0!==t.qClickOutside)&&(((0===t?.type.indexOf("key")?c.closest('[tabindex]:not([tabindex^="-"])'):void 0)||c).focus(),c=null),b((()=>{q(!0),i("hide",t)}),e.transitionDuration)},hideOnRouteChange:m,processOnMount:!0}),{showPortal:R,hidePortal:q,renderPortal:F}=Xw(h,f,(function(){return k(A,x.value,(()=>!0===g.value?k("div",{role:"menu",...n,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+D.value,n.class],style:[n.style,w.value],...G.value},fx(t.default)):null))}),"menu"),O={anchorEl:E,innerRef:f,onClickOutside(t){if(!0!==e.persistent&&!0===g.value)return I(t),("touchstart"===t.type||t.target.classList.contains("q-dialog__backdrop"))&&Sb(t),!0}},z=s((()=>OS(e.anchor||(!0===e.cover?"center middle":"bottom start"),p.lang.rtl))),N=s((()=>!0===e.cover?z.value:OS(e.self||"top start",p.lang.rtl))),D=s((()=>(!0===e.square?" q-menu--square":"")+(!0===v.value?" q-menu--dark q-dark":""))),G=s((()=>!0===e.autoClose?{onClick:H}:{})),j=s((()=>!0===g.value&&!0!==e.persistent));function B(){Nw((()=>{let e=f.value;e&&!0!==e.contains(document.activeElement)&&(e=e.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.querySelector("[autofocus], [data-autofocus]")||e,e.focus({preventScroll:!0}))}))}function V(e){o=void 0,void 0!==l&&(l(),l=void 0),(!0===e||!0===g.value)&&(MS(U),M(),RS(O),xS(W)),!0!==e&&(c=null)}function $(){(null!==E.value||void 0!==e.scrollTarget)&&(S.value=iS(E.value,e.scrollTarget),C(S.value,X))}function H(e){!0!==u?(Uw(d,e),i("click",e)):u=!1}function U(t){!0===j.value&&!0!==e.noFocus&&!0!==sw(f.value,t.target)&&B()}function W(t){!0!==e.noEscDismiss&&(i("escapeKey"),I(t))}function X(){NS({targetEl:f.value,offset:e.offset,anchorEl:E.value,anchorOrigin:z.value,selfOrigin:N.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}return r(j,(e=>{!0===e?(bS(W),IS(O)):(xS(W),RS(O))})),L(V),Object.assign(d,{focus:B,updatePosition:X}),F}}),BS=0,VS=new Array(256);for(let pO=0;pO<256;pO++)VS[pO]=(pO+256).toString(16).substring(1);var $S=(()=>{const e=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(void 0!==e){if(void 0!==e.randomBytes)return e.randomBytes;if(void 0!==e.getRandomValues)return t=>{const i=new Uint8Array(t);return e.getRandomValues(i),i}}return e=>{const t=[];for(let i=e;i>0;i--)t.push(Math.floor(256*Math.random()));return t}})();function HS(){(void 0===GS||BS+16>4096)&&(BS=0,GS=$S(4096));const e=Array.prototype.slice.call(GS,BS,BS+=16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,VS[e[0]]+VS[e[1]]+VS[e[2]]+VS[e[3]]+"-"+VS[e[4]]+VS[e[5]]+"-"+VS[e[6]]+VS[e[7]]+"-"+VS[e[8]]+VS[e[9]]+"-"+VS[e[10]]+VS[e[11]]+VS[e[12]]+VS[e[13]]+VS[e[14]]+VS[e[15]]}function US(e,t){return e??(!0===t?`f_${HS()}`:null)}function WS({getValue:e,required:t=!0}={}){if(!0===lb.value){const i=a(void 0!==e?function(e){return e??null}(e()):null);return!0===t&&null===i.value&&l((()=>{i.value=`f_${HS()}`})),void 0!==e&&r(e,(e=>{i.value=US(e,t)})),i}return void 0!==e?s((()=>US(e(),t))):a(`f_${HS()}`)}var XS=Object.keys(yw),KS=fb({name:"QBtnDropdown",props:{...yw,...Kw,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),o=a(e.modelValue),u=a(null),c=WS(),h=s((()=>{const t={"aria-expanded":!0===o.value?"true":"false","aria-haspopup":"true","aria-controls":c.value,"aria-label":e.toggleAriaLabel||n.$q.lang.label[!0===o.value?"collapse":"expand"](e.label)};return(!0===e.disable||!1===e.split&&!0===e.disableMainBtn||!0===e.disableDropdown)&&(t["aria-disabled"]="true"),t})),d=s((()=>"q-btn-dropdown__arrow"+(!0===o.value&&!1===e.noIconAnimation?" rotate-180":"")+(!1===e.split?" q-btn-dropdown__arrow-container":""))),p=s((()=>vw(e))),f=s((()=>{return t=e,XS.reduce(((e,i)=>{const n=t[i];return void 0!==n&&(e[i]=n),e}),{});var t}));function g(e){o.value=!0,i("beforeShow",e)}function m(e){i("show",e),i("update:modelValue",!0)}function v(e){o.value=!1,i("beforeHide",e)}function y(e){i("hide",e),i("update:modelValue",!1)}function _(e){i("click",e)}function b(e){xb(e),w(),i("click",e)}function x(e){u.value?.show(e)}function w(e){u.value?.hide(e)}return r((()=>e.modelValue),(e=>{u.value?.[e?"show":"hide"]()})),r((()=>e.split),w),Object.assign(n,{show:x,hide:w,toggle:function(e){u.value?.toggle(e)}}),l((()=>{!0===e.modelValue&&x()})),()=>{const i=[k(Ax,{class:d.value,name:e.dropdownIcon||n.$q.iconSet.arrow.dropdown})];return!0!==e.disableDropdown&&i.push(k(jS,{ref:u,id:c.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:g,onShow:m,onBeforeHide:v,onHide:y},t.default)),!1===e.split?k(Cw,{class:"q-btn-dropdown q-btn-dropdown--simple",...f.value,...h.value,disable:!0===e.disable||!0===e.disableMainBtn,noWrap:!0,round:!1,onClick:_},{default:()=>fx(t.label,[]).concat(i),loading:t.loading}):k(Mw,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...p.value,glossy:e.glossy,stretch:e.stretch},(()=>[k(Cw,{class:"q-btn-dropdown--current",...f.value,disable:!0===e.disable||!0===e.disableMainBtn,noWrap:!0,round:!1,onClick:b},{default:t.label,loading:t.loading}),k(Cw,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...h.value,...p.value,disable:!0===e.disable||!0===e.disableDropdown,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},(()=>i))]))}}}),YS={name:String};function ZS(e){return s((()=>({type:"hidden",name:e.name,value:e.modelValue})))}function QS(e={}){return(t,i,n)=>{t[i](k("input",{class:"hidden"+(n||""),...e.value}))}}function JS(e){return s((()=>e.name||e.for))}fb({name:"QBtnToggle",props:{...YS,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every((e=>("label"in e||"icon"in e||"slot"in e)&&"value"in e))},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:t,emit:i}){const n=s((()=>void 0!==e.options.find((t=>t.value===e.modelValue)))),o=QS(s((()=>({type:"hidden",name:e.name,value:e.modelValue})))),r=s((()=>vw(e))),a=s((()=>({rounded:e.rounded,dense:e.dense,...r.value}))),l=s((()=>e.options.map(((t,n)=>{const{attrs:o,value:r,slot:s,...l}=t;return{slot:s,props:{key:n,"aria-pressed":r===e.modelValue?"true":"false",...o,...l,...a.value,disable:!0===e.disable||!0===l.disable,color:r===e.modelValue?u(l,"toggleColor"):u(l,"color"),textColor:r===e.modelValue?u(l,"toggleTextColor"):u(l,"textColor"),noCaps:!0===u(l,"noCaps"),noWrap:!0===u(l,"noWrap"),size:u(l,"size"),padding:u(l,"padding"),ripple:u(l,"ripple"),stack:!0===u(l,"stack"),stretch:!0===u(l,"stretch"),onClick(n){var o,s,a;o=r,s=t,a=n,!0!==e.readonly&&(e.modelValue===o?!0===e.clearable&&(i("update:modelValue",null,null),i("clear")):i("update:modelValue",o,s),i("click",a))}}}}))));function u(t,i){return void 0===t[i]?e[i]:t[i]}function c(){const i=l.value.map((e=>k(Cw,e.props,void 0!==e.slot?t[e.slot]:void 0)));return void 0!==e.name&&!0!==e.disable&&!0===n.value&&o(i,"push"),mx(t.default,i)}return()=>k(Mw,{class:"q-btn-toggle",...r.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},c)}});var eC=fb({name:"QCard",props:{...Fx,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=Ox(e,i),o=s((()=>"q-card"+(!0===n.value?" q-card--dark q-dark":"")+(!0===e.bordered?" q-card--bordered":"")+(!0===e.square?" q-card--square no-border-radius":"")+(!0===e.flat?" q-card--flat no-shadow":"")));return()=>k(e.tag,{class:o.value},fx(t.default))}}),tC=fb({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const i=s((()=>"q-card__section q-card__section--"+(!0===e.horizontal?"horiz row no-wrap":"vert")));return()=>k(e.tag,{class:i.value},fx(t.default))}}),iC=fb({name:"QCardActions",props:{...Dx,vertical:Boolean},setup(e,{slots:t}){const i=Gx(e),n=s((()=>`q-card__actions ${i.value} q-card__actions--${!0===e.vertical?"vert column":"horiz row"}`));return()=>k("div",{class:n.value},fx(t.default))}}),nC={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},oC=Object.keys(nC);function rC(e){const t={};for(const i of oC)!0===e[i]&&(t[i]=!0);return 0===Object.keys(t).length?nC:(!0===t.horizontal?t.left=t.right=!0:!0===t.left&&!0===t.right&&(t.horizontal=!0),!0===t.vertical?t.up=t.down=!0:!0===t.up&&!0===t.down&&(t.vertical=!0),!0===t.horizontal&&!0===t.vertical&&(t.all=!0),t)}nC.all=!0;var sC=["INPUT","TEXTAREA"];function aC(e,t){return void 0===t.event&&void 0!==e.target&&!0!==e.target.draggable&&"function"==typeof t.handler&&!1===sC.includes(e.target.nodeName.toUpperCase())&&(void 0===e.qClonedBy||-1===e.qClonedBy.indexOf(t.uid))}function lC(e){const t=[.06,6,50];return"string"==typeof e&&e.length&&e.split(":").forEach(((e,i)=>{const n=parseFloat(e);n&&(t[i]=n)})),t}var uC=gb({name:"touch-swipe",beforeMount(e,{value:t,arg:i,modifiers:n}){if(!0!==n.mouse&&!0!==hb.has.touch)return;const o=!0===n.mouseCapture?"Capture":"",r={handler:t,sensitivity:lC(i),direction:rC(n),noop:yb,mouseStart(e){aC(e,r)&&_b(e)&&(Mb(r,"temp",[[document,"mousemove","move",`notPassive${o}`],[document,"mouseup","end","notPassiveCapture"]]),r.start(e,!0))},touchStart(e){if(aC(e,r)){const t=e.target;Mb(r,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","notPassiveCapture"],[t,"touchend","end","notPassiveCapture"]]),r.start(e)}},start(t,i){!0===hb.is.firefox&&Cb(e,!0);const n=bb(t);r.event={x:n.left,y:n.top,time:Date.now(),mouse:!0===i,dir:!1}},move(e){if(void 0===r.event)return;if(!1!==r.event.dir)return void Sb(e);const t=Date.now()-r.event.time;if(0===t)return;const i=bb(e),n=i.left-r.event.x,o=Math.abs(n),s=i.top-r.event.y,a=Math.abs(s);if(!0!==r.event.mouse){if(o<r.sensitivity[1]&&a<r.sensitivity[1])return void r.end(e)}else{if(""!==window.getSelection().toString())return void r.end(e);if(o<r.sensitivity[2]&&a<r.sensitivity[2])return}const l=o/t,u=a/t;!0===r.direction.vertical&&o<a&&o<100&&u>r.sensitivity[0]&&(r.event.dir=s<0?"up":"down"),!0===r.direction.horizontal&&o>a&&a<100&&l>r.sensitivity[0]&&(r.event.dir=n<0?"left":"right"),!0===r.direction.up&&o<a&&s<0&&o<100&&u>r.sensitivity[0]&&(r.event.dir="up"),!0===r.direction.down&&o<a&&s>0&&o<100&&u>r.sensitivity[0]&&(r.event.dir="down"),!0===r.direction.left&&o>a&&n<0&&a<100&&l>r.sensitivity[0]&&(r.event.dir="left"),!0===r.direction.right&&o>a&&n>0&&a<100&&l>r.sensitivity[0]&&(r.event.dir="right"),!1!==r.event.dir?(Sb(e),!0===r.event.mouse&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ew(),r.styleCleanup=e=>{r.styleCleanup=void 0,document.body.classList.remove("non-selectable");const t=()=>{document.body.classList.remove("no-pointer-events--children")};!0===e?setTimeout(t,50):t()}),r.handler({evt:e,touch:!0!==r.event.mouse,mouse:r.event.mouse,direction:r.event.dir,duration:t,distance:{x:o,y:a}})):r.end(e)},end(t){void 0!==r.event&&(Eb(r,"temp"),!0===hb.is.firefox&&Cb(e,!1),r.styleCleanup?.(!0),void 0!==t&&!1!==r.event.dir&&Sb(t),r.event=void 0)}};if(e.__qtouchswipe=r,!0===n.mouse){const t=!0===n.mouseCapture||!0===n.mousecapture?"Capture":"";Mb(r,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}!0===hb.has.touch&&Mb(r,"main",[[e,"touchstart","touchStart","passive"+(!0===n.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const i=e.__qtouchswipe;void 0!==i&&(t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value),i.direction=rC(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;void 0!==t&&(Eb(t,"main"),Eb(t,"temp"),!0===hb.is.firefox&&Cb(e,!1),t.styleCleanup?.(),delete e.__qtouchswipe)}});function cC(){let e=Object.create(null);return{getCache:(t,i)=>void 0===e[t]?e[t]="function"==typeof i?i():i:e[t],setCache(t,i){e[t]=i},hasCache:t=>Object.hasOwnProperty.call(e,t),clearCache(t){void 0!==t?delete e[t]:e=Object.create(null)}}}var hC={name:{required:!0},disable:Boolean},dC={setup:(e,{slots:t})=>()=>k("div",{class:"q-panel scroll",role:"tabpanel"},fx(t.default))},pC={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},fC=["update:modelValue","beforeTransition","transition"];function gC(){const{props:e,emit:t,proxy:i}=T(),{getCache:n}=cC(),{registerTimeout:o}=Qw();let l,u;const c=a(null),h={value:null};function d(t){const n=!0===e.vertical?"up":"left";E((!0===i.$q.lang.rtl?-1:1)*(t.direction===n?1:-1))}const p=s((()=>[[uC,d,void 0,{horizontal:!0!==e.vertical,vertical:e.vertical,mouse:!0}]])),f=s((()=>e.transitionPrev||"slide-"+(!0===e.vertical?"down":"right"))),g=s((()=>e.transitionNext||"slide-"+(!0===e.vertical?"up":"left"))),m=s((()=>`--q-transition-duration: ${e.transitionDuration}ms`)),v=s((()=>"string"==typeof e.modelValue||"number"==typeof e.modelValue?e.modelValue:String(e.modelValue))),y=s((()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax}))),_=s((()=>void 0!==e.keepAliveInclude||void 0!==e.keepAliveExclude));function b(){E(1)}function x(){E(-1)}function w(e){t("update:modelValue",e)}function S(e){return null!=e&&""!==e}function C(e){return l.findIndex((t=>t.props.name===e&&""!==t.props.disable&&!0!==t.props.disable))}function M(t){const i=0!==t&&!0===e.animated&&-1!==h.value?"q-transition--"+(-1===t?f.value:g.value):null;c.value!==i&&(c.value=i)}function E(i,n=h.value){let o=n+i;for(;-1!==o&&o<l.length;){const e=l[o];if(void 0!==e&&""!==e.props.disable&&!0!==e.props.disable)return M(i),u=!0,t("update:modelValue",e.props.name),void setTimeout((()=>{u=!1}));o+=i}!0===e.infinite&&0!==l.length&&-1!==n&&n!==l.length&&E(i,-1===i?l.length:-1)}function P(){const t=C(e.modelValue);return h.value!==t&&(h.value=t),!0}function L(){const t=!0===S(e.modelValue)&&P()&&l[h.value];return!0===e.keepAlive?[k(D,y.value,[k(!0===_.value?n(v.value,(()=>({...dC,name:v.value}))):dC,{key:v.value,style:m.value},(()=>t))])]:[k("div",{class:"q-panel scroll",style:m.value,key:v.value,role:"tabpanel"},[t])]}return r((()=>e.modelValue),((i,n)=>{const r=!0===S(i)?C(i):-1;!0!==u&&M(-1===r?0:r<C(n)?-1:1),h.value!==r&&(h.value=r,t("beforeTransition",i,n),o((()=>{t("transition",i,n)}),e.transitionDuration))})),Object.assign(i,{next:b,previous:x,goTo:w}),{panelIndex:h,panelDirectives:p,updatePanelsList:function(e){return l=Vx(fx(e.default,[])).filter((e=>null!==e.props&&void 0===e.props.slot&&!0===S(e.props.name))),l.length},updatePanelIndex:P,getPanelContent:function(){if(0!==l.length)return!0===e.animated?[k(A,{name:c.value},L)]:L()},getEnabledPanels:function(){return l.filter((e=>""!==e.props.disable&&!0!==e.props.disable))},getPanels:function(){return l},isValidPanelName:S,keepAliveProps:y,needsUniqueKeepAliveWrapper:_,goToPanelByOffset:E,goToPanel:w,nextPanel:b,previousPanel:x}}var mC=0,vC={fullscreen:Boolean,noRouteFullscreenExit:Boolean},yC=["update:fullscreen","fullscreen"];function _C(){const e=T(),{props:t,emit:i,proxy:n}=e;let o,s;const u=a(!1);function c(){!0===u.value?d():h()}function h(){!0!==u.value&&(u.value=!0,s=n.$el.parentNode,s.replaceChild(o,n.$el),document.body.appendChild(n.$el),1==++mC&&document.body.classList.add("q-body--fullscreen-mixin"))}function d(){!0===u.value&&(s.replaceChild(n.$el,o),u.value=!1,0===(mC=Math.max(0,mC-1))&&(document.body.classList.remove("q-body--fullscreen-mixin"),void 0!==n.$el.scrollIntoView&&setTimeout((()=>{n.$el.scrollIntoView()}))))}return!0===$x(e)&&r((()=>n.$route.fullPath),(()=>{!0!==t.noRouteFullscreenExit&&d()})),r((()=>t.fullscreen),(e=>{u.value!==e&&c()})),r(u,(e=>{i("update:fullscreen",e),i("fullscreen",e)})),G((()=>{o=document.createElement("span")})),l((()=>{!0===t.fullscreen&&h()})),L(d),Object.assign(n,{toggleFullscreen:c,setFullscreen:h,exitFullscreen:d}),{inFullscreen:u,toggleFullscreen:c}}var bC=["top","right","bottom","left"],xC=["regular","flat","outline","push","unelevated"];function wC(e,t){const i=a(null);return{refocusTargetEl:s((()=>!0===e.disable?null:k("span",{ref:i,class:"no-outline",tabindex:-1}))),refocusTarget:function(e){const n=t.value;!0!==e?.qAvoidFocus&&(0===e?.type.indexOf("key")?document.activeElement!==n&&!0===n?.contains(document.activeElement)&&n.focus():null!==i.value&&(void 0===e||!0===n?.contains(e.target))&&i.value.focus())}}}fb({name:"QCarousel",props:{...Fx,...pC,...vC,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>xC.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>bC.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...yC,...fC],setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=Ox(e,i);let o,a=null;const{updatePanelsList:u,getPanelContent:c,panelDirectives:h,goToPanel:d,previousPanel:p,nextPanel:f,getEnabledPanels:g,panelIndex:m}=gC(),{inFullscreen:v}=_C(),y=s((()=>!0!==v.value&&void 0!==e.height?{height:e.height}:{})),_=s((()=>!0===e.vertical?"vertical":"horizontal")),b=s((()=>e.navigationPosition||(!0===e.vertical?"right":"bottom"))),x=s((()=>`q-carousel q-panel-parent q-carousel--with${!0===e.padding?"":"out"}-padding`+(!0===v.value?" fullscreen":"")+(!0===n.value?" q-carousel--dark q-dark":"")+(!0===e.arrows?` q-carousel--arrows-${_.value}`:"")+(!0===e.navigation?` q-carousel--navigation-${b.value}`:""))),w=s((()=>{const t=[e.prevIcon||i.iconSet.carousel[!0===e.vertical?"up":"left"],e.nextIcon||i.iconSet.carousel[!0===e.vertical?"down":"right"]];return!1===e.vertical&&!0===i.lang.rtl?t.reverse():t})),S=s((()=>e.navigationIcon||i.iconSet.carousel.navigationIcon)),C=s((()=>e.navigationActiveIcon||S.value)),M=s((()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0})));function E(){const t=!0===Qb(e.autoplay)?Math.abs(e.autoplay):5e3;null!==a&&clearTimeout(a),a=setTimeout((()=>{a=null,t>=0?f():p()}),t)}function P(t,i){return k("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${t} q-carousel__navigation--${b.value}`+(void 0!==e.controlColor?` text-${e.controlColor}`:"")},[k("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},g().map(i))])}return r((()=>e.modelValue),(()=>{e.autoplay&&E()})),r((()=>e.autoplay),(e=>{e?E():null!==a&&(clearTimeout(a),a=null)})),l((()=>{e.autoplay&&E()})),L((()=>{null!==a&&clearTimeout(a)})),()=>(o=u(t),k("div",{class:x.value,style:y.value},[yx("div",{class:"q-carousel__slides-container"},c(),"sl-cont",e.swipeable,(()=>h.value))].concat(function(){const i=[];if(!0===e.navigation){const e=void 0!==t["navigation-icon"]?t["navigation-icon"]:e=>k(Cw,{key:"nav"+e.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${!0===e.active?"":"in"}active`,...e.btnProps,onClick:e.onClick}),n=o-1;i.push(P("buttons",((t,i)=>{const o=t.props.name,r=m.value===i;return e({index:i,maxIndex:n,name:o,active:r,btnProps:{icon:!0===r?C.value:S.value,size:"sm",...M.value},onClick:()=>{d(o)}})})))}else if(!0===e.thumbnails){const t=void 0!==e.controlColor?` text-${e.controlColor}`:"";i.push(P("thumbnails",(i=>{const n=i.props;return k("img",{key:"tmb#"+n.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${n.name===e.modelValue?"":"in"}active`+t,src:n.imgSrc||n["img-src"],onClick:()=>{d(n.name)}})})))}return!0===e.arrows&&m.value>=0&&((!0===e.infinite||m.value>0)&&i.push(k("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${_.value} absolute flex flex-center`},[k(Cw,{icon:w.value[0],...M.value,onClick:p})])),(!0===e.infinite||m.value<o-1)&&i.push(k("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${_.value} absolute flex flex-center`},[k(Cw,{icon:w.value[1],...M.value,onClick:f})]))),mx(t.control,i)}())))}}),fb({name:"QCarouselSlide",props:{...hC,imgSrc:String},setup(e,{slots:t}){const i=s((()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{}));return()=>k("div",{class:"q-carousel__slide",style:i.value},fx(t.default))}}),fb({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>2===e.length}},setup(e,{slots:t}){const i=s((()=>`q-carousel__control absolute absolute-${e.position}`)),n=s((()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`})));return()=>k("div",{class:i.value,style:n.value},fx(t.default))}}),fb({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const i=s((()=>!0===e.sent?"sent":"received")),n=s((()=>`q-message-text-content q-message-text-content--${i.value}`+(void 0!==e.textColor?` text-${e.textColor}`:""))),o=s((()=>`q-message-text q-message-text--${i.value}`+(void 0!==e.bgColor?` text-${e.bgColor}`:""))),r=s((()=>"q-message-container row items-end no-wrap"+(!0===e.sent?" reverse":""))),a=s((()=>void 0!==e.size?`col-${e.size}`:"")),l=s((()=>({msg:!0===e.textHtml?"innerHTML":"textContent",stamp:!0===e.stampHtml?"innerHTML":"textContent",name:!0===e.nameHtml?"innerHTML":"textContent",label:!0===e.labelHtml?"innerHTML":"textContent"})));function u(i){return void 0!==t.stamp?[i,k("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[i,k("div",{class:"q-message-stamp",[l.value.stamp]:e.stamp})]:[i]}function c(e,t){const i=!0===t?e.length>1?e=>e:e=>k("div",[e]):e=>k("div",{[l.value.msg]:e});return e.map(((e,t)=>k("div",{key:t,class:o.value},[k("div",{class:n.value},u(i(e)))])))}return()=>{const n=[];void 0!==t.avatar?n.push(t.avatar()):void 0!==e.avatar&&n.push(k("img",{class:`q-message-avatar q-message-avatar--${i.value}`,src:e.avatar,"aria-hidden":"true"}));const o=[];void 0!==t.name?o.push(k("div",{class:`q-message-name q-message-name--${i.value}`},t.name())):void 0!==e.name&&o.push(k("div",{class:`q-message-name q-message-name--${i.value}`,[l.value.name]:e.name})),void 0!==t.default?o.push(c(Vx(t.default()),!0)):void 0!==e.text&&o.push(c(e.text)),n.push(k("div",{class:a.value},o));const s=[];return void 0!==t.label?s.push(k("div",{class:"q-message-label"},t.label())):void 0!==e.label&&s.push(k("div",{class:"q-message-label",[l.value.label]:e.label})),s.push(k("div",{class:r.value},n)),k("div",{class:`q-message q-message-${i.value}`},s)}}});var SC={xs:30,sm:35,md:40,lg:50,xl:60},CC={...Fx,...dx,...YS,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>"tf"===e||"ft"===e},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},MC=["update:modelValue"];function EC(e,t){const{props:i,slots:n,emit:o,proxy:r}=T(),{$q:l}=r,u=Ox(i,l),c=a(null),{refocusTargetEl:h,refocusTarget:d}=wC(i,c),p=px(i,SC),f=s((()=>void 0!==i.val&&Array.isArray(i.modelValue))),g=s((()=>{const e=H(i.val);return!0===f.value?i.modelValue.findIndex((t=>H(t)===e)):-1})),m=s((()=>!0===f.value?-1!==g.value:H(i.modelValue)===H(i.trueValue))),v=s((()=>!0===f.value?-1===g.value:H(i.modelValue)===H(i.falseValue))),y=s((()=>!1===m.value&&!1===v.value)),_=s((()=>!0===i.disable?-1:i.tabindex||0)),b=s((()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(!0===i.disable?" disabled":"")+(!0===u.value?` q-${e}--dark`:"")+(!0===i.dense?` q-${e}--dense`:"")+(!0===i.leftLabel?" reverse":""))),x=s((()=>{const t=!0===m.value?"truthy":!0===v.value?"falsy":"indet",n=void 0===i.color||!0!==i.keepColor&&("toggle"===e?!0!==m.value:!0===v.value)?"":` text-${i.color}`;return`q-${e}__inner relative-position non-selectable q-${e}__inner--${t}${n}`})),w=QS(s((()=>{const e={type:"checkbox"};return void 0!==i.name&&Object.assign(e,{".checked":m.value,"^checked":!0===m.value?"checked":void 0,name:i.name,value:!0===f.value?i.val:i.trueValue}),e}))),S=s((()=>{const t={tabindex:_.value,role:"toggle"===e?"switch":"checkbox","aria-label":i.label,"aria-checked":!0===y.value?"mixed":!0===m.value?"true":"false"};return!0===i.disable&&(t["aria-disabled"]="true"),t}));function C(e){void 0!==e&&(Sb(e),d(e)),!0!==i.disable&&o("update:modelValue",function(){if(!0===f.value){if(!0===m.value){const e=i.modelValue.slice();return e.splice(g.value,1),e}return i.modelValue.concat([i.val])}if(!0===m.value){if("ft"!==i.toggleOrder||!1===i.toggleIndeterminate)return i.falseValue}else{if(!0!==v.value)return"ft"!==i.toggleOrder?i.trueValue:i.falseValue;if("ft"===i.toggleOrder||!1===i.toggleIndeterminate)return i.trueValue}return i.indeterminateValue}(),e)}function M(e){(13===e.keyCode||32===e.keyCode)&&Sb(e)}function E(e){(13===e.keyCode||32===e.keyCode)&&C(e)}const P=t(m,y);return Object.assign(r,{toggle:C}),()=>{const t=P();!0!==i.disable&&w(t,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const o=[k("div",{class:x.value,style:p.value,"aria-hidden":"true"},t)];null!==h.value&&o.push(h.value);const r=void 0!==i.label?mx(n.default,[i.label]):fx(n.default);return void 0!==r&&o.push(k("div",{class:`q-${e}__label q-anchor--skip`},r)),k("div",{ref:c,class:b.value,...S.value,onClick:C,onKeydown:M,onKeyup:E},o)}}var kC=fb({name:"QCheckbox",props:CC,emits:MC,setup(e){const t=k("div",{key:"svg",class:"q-checkbox__bg absolute"},[k("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[k("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),k("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);return EC("checkbox",(function(i,n){const o=s((()=>(!0===i.value?e.checkedIcon:!0===n.value?e.indeterminateIcon:e.uncheckedIcon)||null));return()=>null!==o.value?[k("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[k(Ax,{class:"q-checkbox__icon",name:o.value})])]:[t]}))}}),TC={xs:8,sm:10,md:14,lg:20,xl:24},PC=fb({name:"QChip",props:{...Fx,...dx,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=Ox(e,n),r=px(e,TC),a=s((()=>!0===e.selected||void 0!==e.icon)),l=s((()=>!0===e.selected?e.iconSelected||n.iconSet.chip.selected:e.icon)),u=s((()=>e.iconRemove||n.iconSet.chip.remove)),c=s((()=>!1===e.disable&&(!0===e.clickable||null!==e.selected))),h=s((()=>{const t=!0===e.outline&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(!1===e.outline&&void 0!==e.color?` bg-${e.color}`:"")+(t?` text-${t} q-chip--colored`:"")+(!0===e.disable?" disabled":"")+(!0===e.dense?" q-chip--dense":"")+(!0===e.outline?" q-chip--outline":"")+(!0===e.selected?" q-chip--selected":"")+(!0===c.value?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(!0===e.square?" q-chip--square":"")+(!0===o.value?" q-chip--dark q-dark":"")})),d=s((()=>{const t=!0===e.disable?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0};return{chip:t,remove:{...t,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||n.lang.label.remove}}}));function p(e){13===e.keyCode&&f(e)}function f(t){e.disable||(i("update:selected",!e.selected),i("click",t))}function g(t){(void 0===t.keyCode||13===t.keyCode)&&(Sb(t),!1===e.disable&&(i("update:modelValue",!1),i("remove")))}return()=>{if(!1===e.modelValue)return;const i={class:h.value,style:r.value};return!0===c.value&&Object.assign(i,d.value.chip,{onClick:f,onKeyup:p}),yx("div",i,function(){const i=[];!0===c.value&&i.push(k("div",{class:"q-focus-helper"})),!0===a.value&&i.push(k(Ax,{class:"q-chip__icon q-chip__icon--left",name:l.value}));const n=void 0!==e.label?[k("div",{class:"ellipsis"},[e.label])]:void 0;return i.push(k("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},vx(t.default,n))),e.iconRight&&i.push(k(Ax,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),!0===e.removable&&i.push(k(Ax,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:u.value,...d.value.remove,onClick:g,onKeyup:g})),i}(),"ripple",!1!==e.ripple&&!0!==e.disable,(()=>[[cw,e.ripple]]))}}}),LC={...dx,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},IC=100*Math.PI,RC=Math.round(1e3*IC)/1e3,AC=fb({name:"QCircularProgress",props:{...LC,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=px(e),o=s((()=>{const t=(!0===i.lang.rtl?-1:1)*e.angle;return{transform:e.reverse!==(!0===i.lang.rtl)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-t}deg)`:`rotate3d(0, 0, 1, ${t-90}deg)`}})),r=s((()=>!0!==e.instantFeedback&&!0!==e.indeterminate?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:"")),a=s((()=>100/(1-e.thickness/2))),l=s((()=>`${a.value/2} ${a.value/2} ${a.value} ${a.value}`)),u=s((()=>ix(e.value,e.min,e.max))),c=s((()=>e.max-e.min)),h=s((()=>e.thickness/2*a.value)),d=s((()=>{const t=(e.max-u.value)/c.value,i=!0===e.rounded&&u.value<e.max&&t<.25?h.value/2*(1-t/.25):0;return IC*t+i}));function p({thickness:e,offset:t,color:i,cls:n,rounded:o}){return k("circle",{class:"q-circular-progress__"+n+(void 0!==i?` text-${i}`:""),style:r.value,fill:"transparent",stroke:"currentColor","stroke-width":e,"stroke-dasharray":RC,"stroke-dashoffset":t,"stroke-linecap":o,cx:a.value,cy:a.value,r:50})}return()=>{const i=[];void 0!==e.centerColor&&"transparent"!==e.centerColor&&i.push(k("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:50-h.value/2,cx:a.value,cy:a.value})),void 0!==e.trackColor&&"transparent"!==e.trackColor&&i.push(p({cls:"track",thickness:h.value,offset:0,color:e.trackColor})),i.push(p({cls:"circle",thickness:h.value,offset:d.value,color:e.color,rounded:!0===e.rounded?"round":void 0}));const r=[k("svg",{class:"q-circular-progress__svg",style:o.value,viewBox:l.value,"aria-hidden":"true"},i)];return!0===e.showValue&&r.push(k("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},void 0!==t.default?t.default():[k("div",u.value)])),k("div",{class:`q-circular-progress q-circular-progress--${!0===e.indeterminate?"in":""}determinate`,style:n.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":!0===e.indeterminate?void 0:u.value},vx(t.internal,r))}}});function qC(e,t,i){const n=bb(e);let o,r=n.left-t.event.x,s=n.top-t.event.y,a=Math.abs(r),l=Math.abs(s);const u=t.direction;!0===u.horizontal&&!0!==u.vertical?o=r<0?"left":"right":!0!==u.horizontal&&!0===u.vertical?o=s<0?"up":"down":!0===u.up&&s<0?(o="up",a>l&&(!0===u.left&&r<0?o="left":!0===u.right&&r>0&&(o="right"))):!0===u.down&&s>0?(o="down",a>l&&(!0===u.left&&r<0?o="left":!0===u.right&&r>0&&(o="right"))):!0===u.left&&r<0?(o="left",a<l&&(!0===u.up&&s<0?o="up":!0===u.down&&s>0&&(o="down"))):!0===u.right&&r>0&&(o="right",a<l&&(!0===u.up&&s<0?o="up":!0===u.down&&s>0&&(o="down")));let c=!1;if(void 0===o&&!1===i){if(!0===t.event.isFirst||void 0===t.event.lastDir)return{};o=t.event.lastDir,c=!0,"left"===o||"right"===o?(n.left-=r,a=0,r=0):(n.top-=s,l=0,s=0)}return{synthetic:c,payload:{evt:e,touch:!0!==t.event.mouse,mouse:!0===t.event.mouse,position:n,direction:o,isFirst:t.event.isFirst,isFinal:!0===i,duration:Date.now()-t.event.time,distance:{x:a,y:l},offset:{x:r,y:s},delta:{x:n.left-t.event.lastX,y:n.top-t.event.lastY}}}}var FC=0,OC=gb({name:"touch-pan",beforeMount(e,{value:t,modifiers:i}){if(!0!==i.mouse&&!0!==hb.has.touch)return;function n(e,t){!0===i.mouse&&!0===t?Sb(e):(!0===i.stop&&xb(e),!0===i.prevent&&wb(e))}const o={uid:"qvtp_"+FC++,handler:t,modifiers:i,direction:rC(i),noop:yb,mouseStart(e){aC(e,o)&&_b(e)&&(Mb(o,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),o.start(e,!0))},touchStart(e){if(aC(e,o)){const t=e.target;Mb(o,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","passiveCapture"],[t,"touchend","end","passiveCapture"]]),o.start(e)}},start(t,n){if(!0===hb.is.firefox&&Cb(e,!0),o.lastEvt=t,!0===n||!0===i.stop){if(!0!==o.direction.all&&(!0!==n||!0!==o.modifiers.mouseAllDir&&!0!==o.modifiers.mousealldir)){const e=-1!==t.type.indexOf("mouse")?new MouseEvent(t.type,t):new TouchEvent(t.type,t);!0===t.defaultPrevented&&wb(e),!0===t.cancelBubble&&xb(e),Object.assign(e,{qKeyEvent:t.qKeyEvent,qClickOutside:t.qClickOutside,qAnchorHandled:t.qAnchorHandled,qClonedBy:void 0===t.qClonedBy?[o.uid]:t.qClonedBy.concat(o.uid)}),o.initialEvent={target:t.target,event:e}}xb(t)}const{left:r,top:s}=bb(t);o.event={x:r,y:s,time:Date.now(),mouse:!0===n,detected:!1,isFirst:!0,isFinal:!1,lastX:r,lastY:s}},move(e){if(void 0===o.event)return;const t=bb(e),r=t.left-o.event.x,s=t.top-o.event.y;if(0===r&&0===s)return;o.lastEvt=e;const a=!0===o.event.mouse,l=()=>{let t;n(e,a),!0!==i.preserveCursor&&!0!==i.preservecursor&&(t=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===a&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ew(),o.styleCleanup=e=>{if(o.styleCleanup=void 0,void 0!==t&&(document.documentElement.style.cursor=t),document.body.classList.remove("non-selectable"),!0===a){const t=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout((()=>{t(),e()}),50):t()}else void 0!==e&&e()}};if(!0===o.event.detected){!0!==o.event.isFirst&&n(e,o.event.mouse);const{payload:t,synthetic:i}=qC(e,o,!1);return void(void 0!==t&&(!1===o.handler(t)?o.end(e):(void 0===o.styleCleanup&&!0===o.event.isFirst&&l(),o.event.lastX=t.position.left,o.event.lastY=t.position.top,o.event.lastDir=!0===i?void 0:t.direction,o.event.isFirst=!1)))}if(!0===o.direction.all||!0===a&&(!0===o.modifiers.mouseAllDir||!0===o.modifiers.mousealldir))return l(),o.event.detected=!0,void o.move(e);const u=Math.abs(r),c=Math.abs(s);u!==c&&(!0===o.direction.horizontal&&u>c||!0===o.direction.vertical&&u<c||!0===o.direction.up&&u<c&&s<0||!0===o.direction.down&&u<c&&s>0||!0===o.direction.left&&u>c&&r<0||!0===o.direction.right&&u>c&&r>0?(o.event.detected=!0,o.move(e)):o.end(e,!0))},end(t,i){if(void 0!==o.event){if(Eb(o,"temp"),!0===hb.is.firefox&&Cb(e,!1),!0===i)o.styleCleanup?.(),!0!==o.event.detected&&void 0!==o.initialEvent&&o.initialEvent.target.dispatchEvent(o.initialEvent.event);else if(!0===o.event.detected){!0===o.event.isFirst&&o.handler(qC(void 0===t?o.lastEvt:t,o).payload);const{payload:e}=qC(void 0===t?o.lastEvt:t,o,!0),i=()=>{o.handler(e)};void 0!==o.styleCleanup?o.styleCleanup(i):i()}o.event=void 0,o.initialEvent=void 0,o.lastEvt=void 0}}};if(e.__qtouchpan=o,!0===i.mouse){const t=!0===i.mouseCapture||!0===i.mousecapture?"Capture":"";Mb(o,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}!0===hb.has.touch&&Mb(o,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const i=e.__qtouchpan;void 0!==i&&(t.oldValue!==t.value&&("function"!=typeof value&&i.end(),i.handler=t.value),i.direction=rC(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;void 0!==t&&(void 0!==t.event&&t.end(),Eb(t,"main"),Eb(t,"temp"),!0===hb.is.firefox&&Cb(e,!1),t.styleCleanup?.(),delete e.__qtouchpan)}}),zC="q-slider__marker-labels",NC=e=>({value:e}),DC=({marker:e})=>k("div",{key:e.value,style:e.style,class:e.classes},e.label),GC=[34,37,40,33,39,38],jC={...Fx,...YS,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},BC=["pan","update:modelValue","change"];function VC({updateValue:e,updatePosition:t,getDragging:i,formAttrs:n}){const{props:o,emit:r,slots:l,proxy:{$q:u}}=T(),c=Ox(o,u),h=QS(n),d=a(!1),p=a(!1),f=a(!1),g=a(!1),m=s((()=>!0===o.vertical?"--v":"--h")),v=s((()=>"-"+(!0===o.switchLabelSide?"switched":"standard"))),y=s((()=>!0===o.vertical?!0===o.reverse:o.reverse!==(!0===u.lang.rtl))),_=s((()=>!0===isNaN(o.innerMin)||o.innerMin<o.min?o.min:o.innerMin)),b=s((()=>!0===isNaN(o.innerMax)||o.innerMax>o.max?o.max:o.innerMax)),x=s((()=>!0!==o.disable&&!0!==o.readonly&&_.value<b.value)),w=s((()=>{if(0===o.step)return e=>e;const e=(String(o.step).trim().split(".")[1]||"").length;return t=>parseFloat(t.toFixed(e))})),S=s((()=>0===o.step?1:o.step)),C=s((()=>!0===x.value?o.tabindex||0:-1)),M=s((()=>o.max-o.min)),E=s((()=>b.value-_.value)),P=s((()=>Z(_.value))),I=s((()=>Z(b.value))),R=s((()=>!0===o.vertical?!0===y.value?"bottom":"top":!0===y.value?"right":"left")),A=s((()=>!0===o.vertical?"height":"width")),q=s((()=>!0===o.vertical?"width":"height")),F=s((()=>!0===o.vertical?"vertical":"horizontal")),O=s((()=>{const e={role:"slider","aria-valuemin":_.value,"aria-valuemax":b.value,"aria-orientation":F.value,"data-step":o.step};return!0===o.disable?e["aria-disabled"]="true":!0===o.readonly&&(e["aria-readonly"]="true"),e})),z=s((()=>`q-slider q-slider${m.value} q-slider--${!0===d.value?"":"in"}active inline no-wrap `+(!0===o.vertical?"row":"column")+(!0===o.disable?" disabled":" q-slider--enabled"+(!0===x.value?" q-slider--editable":""))+("both"===f.value?" q-slider--focus":"")+(o.label||!0===o.labelAlways?" q-slider--label":"")+(!0===o.labelAlways?" q-slider--label-always":"")+(!0===c.value?" q-slider--dark":"")+(!0===o.dense?" q-slider--dense q-slider--dense"+m.value:"")));function N(e){const t="q-slider__"+e;return`${t} ${t}${m.value} ${t}${m.value}${v.value}`}function D(e){const t="q-slider__"+e;return`${t} ${t}${m.value}`}const G=s((()=>{const e=o.selectionColor||o.color;return"q-slider__selection absolute"+(void 0!==e?` text-${e}`:"")})),j=s((()=>D("markers")+" absolute overflow-hidden")),B=s((()=>D("track-container"))),V=s((()=>N("pin"))),$=s((()=>N("label"))),H=s((()=>N("text-container"))),U=s((()=>N("marker-labels-container")+(void 0!==o.markerLabelsClass?` ${o.markerLabelsClass}`:""))),W=s((()=>"q-slider__track relative-position no-outline"+(void 0!==o.trackColor?` bg-${o.trackColor}`:""))),X=s((()=>{const e={[q.value]:o.trackSize};return void 0!==o.trackImg&&(e.backgroundImage=`url(${o.trackImg}) !important`),e})),K=s((()=>"q-slider__inner absolute"+(void 0!==o.innerTrackColor?` bg-${o.innerTrackColor}`:""))),Y=s((()=>{const e=I.value-P.value,t={[R.value]:100*P.value+"%",[A.value]:0===e?"2px":100*e+"%"};return void 0!==o.innerTrackImg&&(t.backgroundImage=`url(${o.innerTrackImg}) !important`),t}));function Z(e){return 0===M.value?0:(e-o.min)/M.value}const Q=s((()=>!0===Qb(o.markers)?o.markers:S.value)),J=s((()=>{const e=[],t=Q.value,i=o.max;let n=o.min;do{e.push(n),n+=t}while(n<i);return e.push(i),e})),ee=s((()=>{const e=` ${zC}${m.value}-`;return zC+`${e}${!0===o.switchMarkerLabelsSide?"switched":"standard"}${e}${!0===y.value?"rtl":"ltr"}`})),te=s((()=>!1===o.markerLabels?null:function(e){if(!1===e)return null;if(!0===e)return J.value.map(NC);if("function"==typeof e)return J.value.map((t=>{const i=e(t);return!0===Yb(i)?{...i,value:t}:{value:t,label:i}}));const t=({value:e})=>e>=o.min&&e<=o.max;return!0===Array.isArray(e)?e.map((e=>!0===Yb(e)?e:{value:e})).filter(t):Object.keys(e).map((t=>{const i=e[t],n=Number(t);return!0===Yb(i)?{...i,value:n}:{value:n,label:i}})).filter(t)}(o.markerLabels).map(((e,t)=>({index:t,value:e.value,label:e.label||e.value,classes:ee.value+(void 0!==e.classes?" "+e.classes:""),style:{...oe(e.value),...e.style||{}}}))))),ie=s((()=>({markerList:te.value,markerMap:re.value,classes:ee.value,getStyle:oe}))),ne=s((()=>{const e=0===E.value?"2px":100*Q.value/E.value;return{...Y.value,backgroundSize:!0===o.vertical?`2px ${e}%`:`${e}% 2px`}}));function oe(e){return{[R.value]:100*(e-o.min)/M.value+"%"}}const re=s((()=>{if(!1===o.markerLabels)return null;const e={};return te.value.forEach((t=>{e[t.value]=t})),e})),se=s((()=>[[OC,ae,void 0,{[F.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]));function ae(n){!0===n.isFinal?(void 0!==g.value&&(t(n.evt),!0===n.touch&&e(!0),g.value=void 0,r("pan","end")),d.value=!1,f.value=!1):!0===n.isFirst?(g.value=i(n.evt),t(n.evt),e(),d.value=!0,r("pan","start")):(t(n.evt),e())}function le(){f.value=!1}function ue(){p.value=!1,d.value=!1,e(!0),le(),document.removeEventListener("mouseup",ue,!0)}return L((()=>{document.removeEventListener("mouseup",ue,!0)})),{state:{active:d,focus:f,preventFocus:p,dragging:g,editable:x,classes:z,tabindex:C,attributes:O,roundValueFn:w,keyStep:S,trackLen:M,innerMin:_,innerMinRatio:P,innerMax:b,innerMaxRatio:I,positionProp:R,sizeProp:A,isReversed:y},methods:{onActivate:function(n){t(n,i(n)),e(),p.value=!0,d.value=!0,document.addEventListener("mouseup",ue,!0)},onMobileClick:function(n){t(n,i(n)),e(!0)},onBlur:le,onKeyup:function(t){GC.includes(t.keyCode)&&e(!0)},getContent:function(e,t,i,n){const r=[];"transparent"!==o.innerTrackColor&&r.push(k("div",{key:"inner",class:K.value,style:Y.value})),"transparent"!==o.selectionColor&&r.push(k("div",{key:"selection",class:G.value,style:e.value})),!1!==o.markers&&r.push(k("div",{key:"marker",class:j.value,style:ne.value})),n(r);const s=[yx("div",{key:"trackC",class:B.value,tabindex:t.value,...i.value},[k("div",{class:W.value,style:X.value},r)],"slide",x.value,(()=>se.value))];return!1!==o.markerLabels&&s[!0===o.switchMarkerLabelsSide?"unshift":"push"](k("div",{key:"markerL",class:U.value},function(){if(void 0!==l["marker-label-group"])return l["marker-label-group"](ie.value);const e=l["marker-label"]||DC;return te.value.map((t=>e({marker:t,...ie.value})))}())),s},getThumbRenderFn:function(e){const t=s((()=>!1!==p.value||f.value!==e.focusValue&&"both"!==f.value?"":" q-slider--focus")),i=s((()=>`q-slider__thumb q-slider__thumb${m.value} q-slider__thumb${m.value}-${!0===y.value?"rtl":"ltr"} absolute non-selectable`+t.value+(void 0!==e.thumbColor.value?` text-${e.thumbColor.value}`:""))),n=s((()=>({width:o.thumbSize,height:o.thumbSize,[R.value]:100*e.ratio.value+"%",zIndex:f.value===e.focusValue?2:void 0}))),r=s((()=>void 0!==e.labelColor.value?` text-${e.labelColor.value}`:"")),a=s((()=>function(e){if(!0===o.vertical)return null;const t=u.lang.rtl!==o.reverse?1-e:e;return{transform:`translateX(calc(${2*t-1} * ${o.thumbSize} / 2 + ${50-100*t}%))`}}(e.ratio.value))),l=s((()=>"q-slider__text"+(void 0!==e.labelTextColor.value?` text-${e.labelTextColor.value}`:"")));return()=>{const t=[k("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[k("path",{d:o.thumbPath})]),k("div",{class:"q-slider__focus-ring fit"})];return(!0===o.label||!0===o.labelAlways)&&(t.push(k("div",{class:V.value+" absolute fit no-pointer-events"+r.value},[k("div",{class:$.value,style:{minWidth:o.thumbSize}},[k("div",{class:H.value,style:a.value},[k("span",{class:l.value},e.label.value)])])])),void 0!==o.name&&!0!==o.disable&&h(t,"push")),k("div",{class:i.value,style:n.value,...e.getNodeData()},t)}},convertRatioToModel:function(e){const{min:t,max:i,step:n}=o;let r=t+e*(i-t);if(n>0){const e=(r-_.value)%n;r+=(Math.abs(e)>=n/2?(e<0?-1:1)*n:0)-e}return r=w.value(r),ix(r,_.value,b.value)},convertModelToRatio:Z,getDraggingRatio:function(e,t){const i=bb(e),n=!0===o.vertical?ix((i.top-t.top)/t.height,0,1):ix((i.left-t.left)/t.width,0,1);return ix(!0===y.value?1-n:n,P.value,I.value)}}}}var $C=()=>({}),HC=fb({name:"QSlider",props:{...jC,modelValue:{required:!0,default:null,validator:e=>"number"==typeof e||null===e},labelValue:[String,Number]},emits:BC,setup(e,{emit:t}){const{proxy:{$q:i}}=T(),{state:n,methods:o}=VC({updateValue:v,updatePosition:function(t,i=n.dragging.value){const r=o.getDraggingRatio(t,i);c.value=o.convertRatioToModel(r),u.value=!0!==e.snap||0===e.step?r:o.convertModelToRatio(c.value)},getDragging:function(){return l.value.getBoundingClientRect()},formAttrs:ZS(e)}),l=a(null),u=a(0),c=a(0);function h(){c.value=null===e.modelValue?n.innerMin.value:ix(e.modelValue,n.innerMin.value,n.innerMax.value)}r((()=>`${e.modelValue}|${n.innerMin.value}|${n.innerMax.value}`),h),h();const d=s((()=>o.convertModelToRatio(c.value))),p=s((()=>!0===n.active.value?u.value:d.value)),f=s((()=>{const t={[n.positionProp.value]:100*n.innerMinRatio.value+"%",[n.sizeProp.value]:100*(p.value-n.innerMinRatio.value)+"%"};return void 0!==e.selectionImg&&(t.backgroundImage=`url(${e.selectionImg}) !important`),t})),g=o.getThumbRenderFn({focusValue:!0,getNodeData:$C,ratio:p,label:s((()=>void 0!==e.labelValue?e.labelValue:c.value)),thumbColor:s((()=>e.thumbColor||e.color)),labelColor:s((()=>e.labelColor)),labelTextColor:s((()=>e.labelTextColor))}),m=s((()=>!0!==n.editable.value?{}:!0===i.platform.is.mobile?{onClick:o.onMobileClick}:{onMousedown:o.onActivate,onFocus:y,onBlur:o.onBlur,onKeydown:_,onKeyup:o.onKeyup}));function v(i){c.value!==e.modelValue&&t("update:modelValue",c.value),!0===i&&t("change",c.value)}function y(){n.focus.value=!0}function _(t){if(!1===GC.includes(t.keyCode))return;Sb(t);const i=([34,33].includes(t.keyCode)?10:1)*n.keyStep.value,o=([34,37,40].includes(t.keyCode)?-1:1)*(!0===n.isReversed.value?-1:1)*(!0===e.vertical?-1:1)*i;c.value=ix(n.roundValueFn.value(c.value+o),n.innerMin.value,n.innerMax.value),v()}return()=>{const t=o.getContent(f,n.tabindex,m,(e=>{e.push(g())}));return k("div",{ref:l,class:n.classes.value+(null===e.modelValue?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":e.modelValue},t)}}});function UC(){const e=a(!lb.value);return!1===e.value&&l((()=>{e.value=!0})),{isHydrated:e}}var WC,XC=typeof ResizeObserver<"u",KC=!0===XC?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},YC=fb({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:t}){let i,n=null,o={width:-1,height:-1};function r(t){!0===t||0===e.debounce||"0"===e.debounce?s():null===n&&(n=setTimeout(s,e.debounce))}function s(){if(null!==n&&(clearTimeout(n),n=null),i){const{offsetWidth:e,offsetHeight:n}=i;(e!==o.width||n!==o.height)&&(o={width:e,height:n},t("resize",o))}}const{proxy:a}=T();if(a.trigger=r,!0===XC){let e;const t=n=>{i=a.$el.parentNode,i?(e=new ResizeObserver(r),e.observe(i),s()):!0!==n&&P((()=>{t(!0)}))};return l((()=>{t()})),L((()=>{null!==n&&clearTimeout(n),void 0!==e&&(void 0!==e.disconnect?e.disconnect():i&&e.unobserve(i))})),yb}{let e=function(){null!==n&&(clearTimeout(n),n=null),void 0!==u&&(void 0!==u.removeEventListener&&u.removeEventListener("resize",r,vb.passive),u=void 0)},t=function(){e(),i?.contentDocument&&(u=i.contentDocument.defaultView,u.addEventListener("resize",r,vb.passive),s())};const{isHydrated:o}=UC();let u;return l((()=>{P((()=>{i=a.$el,i&&t()}))})),L(e),()=>{if(!0===o.value)return k("object",{class:"q--avoid-card-border",style:KC.style,tabindex:-1,type:"text/html",data:KC.url,"aria-hidden":"true",onLoad:t})}}}});{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,WC=e.scrollLeft>=0,e.remove()}function ZC(e,t,i){const n=!0===i?["left","right"]:["top","bottom"];return`absolute-${!0===t?n[0]:n[1]}${e?` text-${e}`:""}`}var QC=["left","center","right","justify"],JC=fb({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>QC.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,{registerTick:l}=Zw(),{registerTick:u}=Zw(),{registerTick:c}=Zw(),{registerTimeout:h,removeTimeout:d}=Qw(),{registerTimeout:p,removeTimeout:f}=Qw(),g=a(null),m=a(null),v=a(e.modelValue),y=a(!1),_=a(!0),b=a(!1),x=a(!1),w=[],S=a(0),C=a(!1);let M,E=null,P=null;const A=s((()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:ZC(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps}))),q=s((()=>{const e=S.value,t=v.value;for(let i=0;i<e;i++)if(w[i].name.value===t)return!0;return!1})),F=s((()=>`q-tabs__content--align-${!0===y.value?"left":!0===x.value?"justify":e.align}`)),O=s((()=>`q-tabs row no-wrap items-center q-tabs--${!0===y.value?"":"not-"}scrollable q-tabs--${!0===e.vertical?"vertical":"horizontal"} q-tabs__arrows--${!0===e.outsideArrows?"outside":"inside"} q-tabs--mobile-with${!0===e.mobileArrows?"":"out"}-arrows`+(!0===e.dense?" q-tabs--dense":"")+(!0===e.shrink?" col-shrink":"")+(!0===e.stretch?" self-stretch":""))),z=s((()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+F.value+(void 0!==e.contentClass?` ${e.contentClass}`:""))),N=s((()=>!0===e.vertical?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"})),D=s((()=>!0!==e.vertical&&!0===o.lang.rtl)),G=s((()=>!1===WC&&!0===D.value));function j({name:t,setCurrent:n,skipEmit:o}){v.value!==t&&(!0!==o&&void 0!==e["onUpdate:modelValue"]&&i("update:modelValue",t),(!0===n||void 0===e["onUpdate:modelValue"])&&(function(t,i){const n=null!=t&&""!==t?w.find((e=>e.name.value===t)):null,o=null!=i&&""!==i?w.find((e=>e.name.value===i)):null;if(!0===ae)ae=!1;else if(n&&o){const t=n.tabIndicatorRef.value,i=o.tabIndicatorRef.value;null!==E&&(clearTimeout(E),E=null),t.style.transition="none",t.style.transform="none",i.style.transition="none",i.style.transform="none";const r=t.getBoundingClientRect(),s=i.getBoundingClientRect();i.style.transform=!0===e.vertical?`translate3d(0,${r.top-s.top}px,0) scale3d(1,${s.height?r.height/s.height:1},1)`:`translate3d(${r.left-s.left}px,0,0) scale3d(${s.width?r.width/s.width:1},1,1)`,c((()=>{E=setTimeout((()=>{E=null,i.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",i.style.transform="none"}),70)}))}o&&!0===y.value&&$(o.rootRef.value)}(v.value,t),v.value=t))}function B(){l((()=>{g.value&&V({width:g.value.offsetWidth,height:g.value.offsetHeight})}))}function V(t){if(void 0===N.value||null===m.value)return;const i=t[N.value.container],n=Math.min(m.value[N.value.scroll],Array.prototype.reduce.call(m.value.children,((e,t)=>e+(t[N.value.content]||0)),0)),o=i>0&&n>i;y.value=o,!0===o&&u(H),x.value=i<parseInt(e.breakpoint,10)}function $(t){const{left:i,width:n,top:o,height:r}=m.value.getBoundingClientRect(),s=t.getBoundingClientRect();let a=!0===e.vertical?s.top-o:s.left-i;if(a<0)return m.value[!0===e.vertical?"scrollTop":"scrollLeft"]+=Math.floor(a),void H();a+=!0===e.vertical?s.height-r:s.width-n,a>0&&(m.value[!0===e.vertical?"scrollTop":"scrollLeft"]+=Math.ceil(a),H())}function H(){const t=m.value;if(null===t)return;const i=t.getBoundingClientRect(),n=!0===e.vertical?t.scrollTop:Math.abs(t.scrollLeft);!0===D.value?(_.value=Math.ceil(n+i.width)<t.scrollWidth-1,b.value=n>0):(_.value=n>0,b.value=!0===e.vertical?Math.ceil(n+i.height)<t.scrollHeight:Math.ceil(n+i.width)<t.scrollWidth)}function U(e){null!==P&&clearInterval(P),P=setInterval((()=>{!0===function(e){const t=m.value,{get:i,set:n}=Z.value;let o=!1,r=i(t);const s=e<r?-1:1;return r+=5*s,r<0?(o=!0,r=0):(-1===s&&r<=e||1===s&&r>=e)&&(o=!0,r=e),n(t,r),H(),o}(e)&&Y()}),5)}function X(){U(!0===G.value?Number.MAX_SAFE_INTEGER:0)}function K(){U(!0===G.value?0:Number.MAX_SAFE_INTEGER)}function Y(){null!==P&&(clearInterval(P),P=null)}r(D,H),r((()=>e.modelValue),(e=>{j({name:e,setCurrent:!0,skipEmit:!0})})),r((()=>e.outsideArrows),B);const Z=s((()=>!0===G.value?{get:e=>Math.abs(e.scrollLeft),set:(e,t)=>{e.scrollLeft=-t}}:!0===e.vertical?{get:e=>e.scrollTop,set:(e,t)=>{e.scrollTop=t}}:{get:e=>e.scrollLeft,set:(e,t)=>{e.scrollLeft=t}}));function Q(e,t){for(const i in e)if(e[i]!==t[i])return!1;return!0}function J(){let e=null,t={matchedLen:0,queryDiff:9999,hrefLen:0};const i=w.filter((e=>!0===e.routeData?.hasRouterLink.value)),{hash:o,query:r}=n.$route,s=Object.keys(r).length;for(const n of i){const i=!0===n.routeData.exact.value;if(!0!==n.routeData[!0===i?"linkIsExactActive":"linkIsActive"].value)continue;const{hash:a,query:l,matched:u,href:c}=n.routeData.resolvedLink.value,h=Object.keys(l).length;if(!0===i){if(a!==o||h!==s||!1===Q(r,l))continue;e=n.name.value;break}if(""!==a&&a!==o||0!==h&&!1===Q(l,r))continue;const d={matchedLen:u.length,queryDiff:s-h,hrefLen:c.length-a.length};if(d.matchedLen>t.matchedLen)e=n.name.value,t=d;else if(d.matchedLen===t.matchedLen){if(d.queryDiff<t.queryDiff)e=n.name.value,t=d;else if(d.queryDiff!==t.queryDiff)continue;d.hrefLen>t.hrefLen&&(e=n.name.value,t=d)}}null!==e||!0!==w.some((e=>void 0===e.routeData&&e.name.value===v.value))?j({name:e,setCurrent:!0}):ae=!1}function ee(e){if(d(),!0!==C.value&&null!==g.value&&e.target&&"function"==typeof e.target.closest){const t=e.target.closest(".q-tab");t&&!0===g.value.contains(t)&&(C.value=!0,!0===y.value&&$(t))}}function te(){h((()=>{C.value=!1}),30)}function ie(){!1===oe.avoidRouteWatcher?p(J):f()}function ne(){if(void 0===M){const e=r((()=>n.$route.fullPath),ie);M=()=>{e(),M=void 0}}}const oe={currentModel:v,tabProps:A,hasFocus:C,hasActiveTab:q,registerTab:function(e){w.push(e),S.value++,B(),void 0===e.routeData||void 0===n.$route?p((()=>{if(!0===y.value){const e=v.value,t=null!=e&&""!==e?w.find((t=>t.name.value===e)):null;t&&$(t.rootRef.value)}})):(ne(),!0===e.routeData.hasRouterLink.value&&ie())},unregisterTab:function(e){w.splice(w.indexOf(e),1),S.value--,B(),void 0!==M&&void 0!==e.routeData&&(!0===w.every((e=>void 0===e.routeData))&&M(),ie())},verifyRouteModel:ie,updateModel:j,onKbdNavigate:function(t,i){const n=Array.prototype.filter.call(m.value.children,(e=>e===i||e.matches&&!0===e.matches(".q-tab.q-focusable"))),o=n.length;if(0===o)return;if(36===t)return $(n[0]),n[0].focus(),!0;if(35===t)return $(n[o-1]),n[o-1].focus(),!0;const r=t===(!0===e.vertical?38:37),s=t===(!0===e.vertical?40:39),a=!0===r?-1:!0===s?1:void 0;if(void 0!==a){const e=!0===D.value?-1:1,t=n.indexOf(i)+a*e;return t>=0&&t<o&&($(n[t]),n[t].focus({preventScroll:!0})),!0}},avoidRouteWatcher:!1};function re(){null!==E&&clearTimeout(E),Y(),M?.()}let se,ae;return W(Hb,oe),L(re),I((()=>{se=void 0!==M,re()})),R((()=>{!0===se&&(ne(),ae=!0,ie()),B()})),()=>k("div",{ref:g,class:O.value,role:"tablist",onFocusin:ee,onFocusout:te},[k(YC,{onResize:V}),k("div",{ref:m,class:z.value,onScroll:H},fx(t.default)),k(Ax,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(!0===_.value?"":" q-tabs__arrow--faded"),name:e.leftIcon||o.iconSet.tabs[!0===e.vertical?"up":"left"],onMousedownPassive:X,onTouchstartPassive:X,onMouseupPassive:Y,onMouseleavePassive:Y,onTouchendPassive:Y}),k(Ax,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(!0===b.value?"":" q-tabs__arrow--faded"),name:e.rightIcon||o.iconSet.tabs[!0===e.vertical?"down":"right"],onMousedownPassive:K,onTouchstartPassive:K,onMouseupPassive:Y,onMouseleavePassive:Y,onTouchendPassive:Y})])}}),eM=0,tM=["click","keydown"],iM={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>"t_"+eM++},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function nM(e,t,i,n){const o=M(Hb,Wb);if(o===Wb)return Wb;const{proxy:r}=T(),u=a(null),c=a(null),h=a(null),d=s((()=>!0!==e.disable&&!1!==e.ripple&&Object.assign({keyCodes:[13,32],early:!0},!0===e.ripple?{}:e.ripple))),p=s((()=>o.currentModel.value===e.name)),f=s((()=>"q-tab relative-position self-stretch flex flex-center text-center"+(!0===p.value?" q-tab--active"+(o.tabProps.value.activeClass?" "+o.tabProps.value.activeClass:"")+(o.tabProps.value.activeColor?` text-${o.tabProps.value.activeColor}`:"")+(o.tabProps.value.activeBgColor?` bg-${o.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&!1===o.tabProps.value.inlineLabel?" q-tab--full":"")+(!0===e.noCaps||!0===o.tabProps.value.noCaps?" q-tab--no-caps":"")+(!0===e.disable?" disabled":" q-focusable q-hoverable cursor-pointer")+(void 0!==n?n.linkClass.value:""))),g=s((()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(!0===o.tabProps.value.inlineLabel?"row no-wrap q-tab__content--inline":"column")+(void 0!==e.contentClass?` ${e.contentClass}`:""))),m=s((()=>!0===e.disable||!0===o.hasFocus.value||!1===p.value&&!0===o.hasActiveTab.value?-1:e.tabindex||0));function v(t,r){if(!0!==r&&!0!==t?.qAvoidFocus&&u.value?.focus(),!0!==e.disable){if(void 0===n)return o.updateModel({name:e.name}),void i("click",t);if(!0===n.hasRouterLink.value){const r=(i={})=>{let r;const s=void 0===i.to||!0===Kb(i.to,e.to)?o.avoidRouteWatcher=HS():null;return n.navigateToRouterLink(t,{...i,returnRouterError:!0}).catch((e=>{r=e})).then((t=>{if(s===o.avoidRouteWatcher&&(o.avoidRouteWatcher=!1,void 0===r&&(void 0===t||!0===t.message?.startsWith("Avoided redundant navigation"))&&o.updateModel({name:e.name})),!0===i.returnRouterError)return void 0!==r?Promise.reject(r):t}))};return i("click",t,r),void(!0!==t.defaultPrevented&&r())}i("click",t)}else!0===n?.hasRouterLink.value&&Sb(t)}function y(e){Rb(e,[13,32])?v(e,!0):!0!==Ib(e)&&e.keyCode>=35&&e.keyCode<=40&&!0!==e.altKey&&!0!==e.metaKey&&!0===o.onKbdNavigate(e.keyCode,r.$el)&&Sb(e),i("keydown",e)}const _={name:s((()=>e.name)),rootRef:c,tabIndicatorRef:h,routeData:n};return L((()=>{o.unregisterTab(_)})),l((()=>{o.registerTab(_)})),{renderTab:function(i,n){const r={ref:c,class:f.value,tabindex:m.value,role:"tab","aria-selected":!0===p.value?"true":"false","aria-disabled":!0===e.disable?"true":void 0,onClick:v,onKeydown:y,...n};return S(k(i,r,function(){const i=o.tabProps.value.narrowIndicator,n=[],r=k("div",{ref:h,class:["q-tab__indicator",o.tabProps.value.indicatorClass]});void 0!==e.icon&&n.push(k(Ax,{class:"q-tab__icon",name:e.icon})),void 0!==e.label&&n.push(k("div",{class:"q-tab__label"},e.label)),!1!==e.alert&&n.push(void 0!==e.alertIcon?k(Ax,{class:"q-tab__alert-icon",color:!0!==e.alert?e.alert:void 0,name:e.alertIcon}):k("div",{class:"q-tab__alert"+(!0!==e.alert?` text-${e.alert}`:"")})),!0===i&&n.push(r);const s=[k("div",{class:"q-focus-helper",tabindex:-1,ref:u}),k("div",{class:g.value},mx(t.default,n))];return!1===i&&s.push(r),s}()),[[cw,d.value]])},$tabs:o}}var oM=fb({name:"QTab",props:iM,emits:tM,setup(e,{slots:t,emit:i}){const{renderTab:n}=nM(e,t,i);return()=>n("div")}}),rM=fb({name:"QTabPanels",props:{...pC,...Fx},emits:fC,setup(e,{slots:t}){const i=T(),n=Ox(e,i.proxy.$q),{updatePanelsList:o,getPanelContent:r,panelDirectives:a}=gC(),l=s((()=>"q-tab-panels q-panel-parent"+(!0===n.value?" q-tab-panels--dark q-dark":"")));return()=>(o(t),yx("div",{class:l.value},r(),"pan",e.swipeable,(()=>a.value)))}}),sM=fb({name:"QTabPanel",props:hC,setup:(e,{slots:t})=>()=>k("div",{class:"q-tab-panel",role:"tabpanel"},fx(t.default))}),aM=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,lM=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,uM=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,cM=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,hM=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,dM={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>aM.test(e),hexaColor:e=>lM.test(e),hexOrHexaColor:e=>uM.test(e),rgbColor:e=>cM.test(e),rgbaColor:e=>hM.test(e),rgbOrRgbaColor:e=>cM.test(e)||hM.test(e),hexOrRgbColor:e=>aM.test(e)||cM.test(e),hexaOrRgbaColor:e=>lM.test(e)||hM.test(e),anyColor:e=>uM.test(e)||cM.test(e)||hM.test(e)},pM=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function fM({r:e,g:t,b:i,a:n}){const o=void 0!==n;if(e=Math.round(e),t=Math.round(t),i=Math.round(i),e>255||t>255||i>255||o&&n>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return n=o?(256|Math.round(255*n/100)).toString(16).slice(1):"","#"+(i|t<<8|e<<16|1<<24).toString(16).slice(1)+n}function gM({r:e,g:t,b:i,a:n}){return`rgb${void 0!==n?"a":""}(${e},${t},${i}${void 0!==n?","+n/100:""})`}function mM(e){if("string"!=typeof e)throw new TypeError("Expected a string");3===(e=e.replace(/^#/,"")).length?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((255&t)/2.55)}:{r:t>>16,g:t>>8&255,b:255&t}}function vM({h:e,s:t,v:i,a:n}){let o,r,s;t/=100,i/=100,e/=360;const a=Math.floor(6*e),l=6*e-a,u=i*(1-t),c=i*(1-l*t),h=i*(1-(1-l)*t);switch(a%6){case 0:o=i,r=h,s=u;break;case 1:o=c,r=i,s=u;break;case 2:o=u,r=i,s=h;break;case 3:o=u,r=c,s=i;break;case 4:o=h,r=u,s=i;break;case 5:o=i,r=u,s=c}return{r:Math.round(255*o),g:Math.round(255*r),b:Math.round(255*s),a:n}}function yM({r:e,g:t,b:i,a:n}){const o=Math.max(e,t,i),r=Math.min(e,t,i),s=o-r,a=0===o?0:s/o,l=o/255;let u;switch(o){case r:u=0;break;case e:u=t-i+s*(t<i?6:0),u/=6*s;break;case t:u=i-e+2*s,u/=6*s;break;case i:u=e-t+4*s,u/=6*s}return{h:Math.round(360*u),s:Math.round(100*a),v:Math.round(100*l),a:n}}function _M(e){if("string"!=typeof e)throw new TypeError("Expected a string");const t=e.replace(/ /g,""),i=pM.exec(t);if(null===i)return mM(t);const n={r:Math.min(255,parseInt(i[2],10)),g:Math.min(255,parseInt(i[3],10)),b:Math.min(255,parseInt(i[4],10))};if(i[1]){const e=parseFloat(i[5]);n.a=100*Math.min(1,!0===isNaN(e)?1:e)}return n}var bM=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],xM="M5 5 h10 v10 h-10 v-10 z";fb({name:"QColor",props:{...Fx,...YS,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:e=>["spectrum","tune","palette"].includes(e)},formatModel:{type:String,default:"auto",validator:e=>["auto","hex","rgb","hexa","rgba"].includes(e)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(e,{emit:t}){const{proxy:i}=T(),{$q:n}=i,o=Ox(e,n),{getCache:l}=cC(),u=a(null),c=a(null),h=s((()=>"auto"===e.formatModel?null:-1!==e.formatModel.indexOf("hex"))),d=s((()=>"auto"===e.formatModel?null:-1!==e.formatModel.indexOf("a"))),p=a("auto"===e.formatModel?void 0===e.modelValue||null===e.modelValue||""===e.modelValue||e.modelValue.startsWith("#")?"hex":"rgb":e.formatModel.startsWith("hex")?"hex":"rgb"),f=a(e.defaultView),g=a(A(e.modelValue||e.defaultValue)),m=s((()=>!0!==e.disable&&!0!==e.readonly)),v=s((()=>void 0===e.modelValue||null===e.modelValue||""===e.modelValue||e.modelValue.startsWith("#"))),y=s((()=>null!==h.value?h.value:v.value)),_=QS(s((()=>({type:"hidden",name:e.name,value:g.value[!0===y.value?"hex":"rgb"]})))),b=s((()=>null!==d.value?d.value:void 0!==g.value.a)),x=s((()=>({backgroundColor:g.value.rgb||"#000"}))),w=s((()=>"q-color-picker__header-content q-color-picker__header-content--"+(void 0!==g.value.a&&g.value.a<65||function(e){if("string"!=typeof e&&(!e||void 0===e.r))throw new TypeError("Expected a string or a {r, g, b} object as color");const t="string"==typeof e?_M(e):e,i=t.r/255,n=t.g/255,o=t.b/255;return.2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}(g.value)>.4?"light":"dark"))),S=s((()=>({background:`hsl(${g.value.h},100%,50%)`}))),C=s((()=>({top:100-g.value.v+"%",[!0===n.lang.rtl?"right":"left"]:`${g.value.s}%`}))),M=s((()=>void 0!==e.palette&&0!==e.palette.length?e.palette:bM)),E=s((()=>"q-color-picker"+(!0===e.bordered?" q-color-picker--bordered":"")+(!0===e.square?" q-color-picker--square no-border-radius":"")+(!0===e.flat?" q-color-picker--flat no-shadow":"")+(!0===e.disable?" disabled":"")+(!0===o.value?" q-color-picker--dark q-dark":""))),L=s((()=>!0===e.disable?{"aria-disabled":"true"}:{})),I=s((()=>[[OC,D,void 0,{prevent:!0,stop:!0,mouse:!0}]]));function R(e,i){g.value.hex=fM(e),g.value.rgb=gM(e),g.value.r=e.r,g.value.g=e.g,g.value.b=e.b,g.value.a=e.a;const n=g.value[!0===y.value?"hex":"rgb"];t("update:modelValue",n),!0===i&&t("change",n)}function A(t){const i=void 0!==d.value?d.value:"auto"===e.formatModel?null:-1!==e.formatModel.indexOf("a");if("string"!=typeof t||0===t.length||!0!==dM.anyColor(t.replace(/ /g,"")))return{h:0,s:0,v:0,r:0,g:0,b:0,a:!0===i?100:void 0,hex:void 0,rgb:void 0};const n=_M(t);return!0===i&&void 0===n.a&&(n.a=100),n.hex=fM(n),n.rgb=gM(n),Object.assign(n,yM(n))}function q(e,t,i){const o=u.value;if(null===o)return;const r=o.clientWidth,s=o.clientHeight,a=o.getBoundingClientRect();let l=Math.min(r,Math.max(0,e-a.left));!0===n.lang.rtl&&(l=r-l);const c=Math.min(s,Math.max(0,t-a.top)),h=Math.round(100*l/r),d=Math.round(100*Math.max(0,Math.min(1,-c/s+1))),p=vM({h:g.value.h,s:h,v:d,a:!0===b.value?g.value.a:void 0});g.value.s=h,g.value.v=d,R(p,i)}function F(e,t){const i=Math.round(e),n=vM({h:i,s:g.value.s,v:g.value.v,a:!0===b.value?g.value.a:void 0});g.value.h=i,R(n,t)}function O(e){F(e,!0)}function z(e,t,n,o,r){if(void 0!==o&&xb(o),!/^[0-9]+$/.test(e))return void(!0===r&&i.$forceUpdate());const s=Math.floor(Number(e));if(s<0||s>n)return void(!0===r&&i.$forceUpdate());const a={r:"r"===t?s:g.value.r,g:"g"===t?s:g.value.g,b:"b"===t?s:g.value.b,a:!0===b.value?"a"===t?s:g.value.a:void 0};if("a"!==t){const e=yM(a);g.value.h=e.h,g.value.s=e.s,g.value.v=e.v}if(R(a,r),!0!==r&&void 0!==o?.target.selectionEnd){const e=o.target.selectionEnd;P((()=>{o.target.setSelectionRange(e,e)}))}}function N(e,t){let i;const n=e.target.value;if(xb(e),"hex"===p.value){if(n.length!==(!0===b.value?9:7)||!/^#[0-9A-Fa-f]+$/.test(n))return!0;i=mM(n)}else{let e;if(!n.endsWith(")"))return!0;if(!0!==b.value&&n.startsWith("rgb(")){if(e=n.substring(4,n.length-1).split(",").map((e=>parseInt(e,10))),3!==e.length||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(n))return!0}else{if(!0!==b.value||!n.startsWith("rgba("))return!0;{if(e=n.substring(5,n.length-1).split(","),4!==e.length||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(n))return!0;for(let i=0;i<3;i++){const t=parseInt(e[i],10);if(t<0||t>255)return!0;e[i]=t}const t=parseFloat(e[3]);if(t<0||t>1)return!0;e[3]=t}}if(e[0]<0||e[0]>255||e[1]<0||e[1]>255||e[2]<0||e[2]>255||!0===b.value&&(e[3]<0||e[3]>1))return!0;i={r:e[0],g:e[1],b:e[2],a:!0===b.value?100*e[3]:void 0}}const o=yM(i);if(g.value.h=o.h,g.value.s=o.s,g.value.v=o.v,R(i,t),!0!==t){const t=e.target.selectionEnd;P((()=>{e.target.setSelectionRange(t,t)}))}}function D(e){e.isFinal?q(e.position.left,e.position.top,!0):G(e)}r((()=>e.modelValue),(t=>{const i=A(t||e.defaultValue);i.hex!==g.value.hex&&(g.value=i)})),r((()=>e.defaultValue),(t=>{if(!e.modelValue&&t){const e=A(t);e.hex!==g.value.hex&&(g.value=e)}}));const G=aw((e=>{q(e.position.left,e.position.top)}),20);function j(e){q(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset,!0)}function B(e){q(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset)}function V(e){null!==c.value&&(c.value.$el.style.opacity=e?1:0)}function $(e){p.value=e}function H(e){f.value=e}function U(){const e={ref:u,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(!0!==m.value?" readonly":""),style:S.value,...!0===m.value?{onClick:j,onMousedown:B}:{}},t=[k("div",{style:{paddingBottom:"100%"}}),k("div",{class:"q-color-picker__spectrum-white absolute-full"}),k("div",{class:"q-color-picker__spectrum-black absolute-full"}),k("div",{class:"absolute",style:C.value},[void 0!==g.value.hex?k("div",{class:"q-color-picker__spectrum-circle"}):null])],i=[k(HC,{class:"q-color-picker__hue non-selectable",modelValue:g.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:!0!==m.value,thumbPath:xM,"onUpdate:modelValue":F,onChange:O})];return!0===b.value&&i.push(k(HC,{class:"q-color-picker__alpha non-selectable",modelValue:g.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==",readonly:!0!==m.value,hideSelection:!0,thumbPath:xM,...l("alphaSlide",{"onUpdate:modelValue":e=>z(e,"a",100),onChange:e=>z(e,"a",100,void 0,!0)})})),[yx("div",e,t,"spec",m.value,(()=>I.value)),k("div",{class:"q-color-picker__sliders"},i)]}function W(){return[k("div",{class:"row items-center no-wrap"},[k("div","R"),k(HC,{modelValue:g.value.r,min:0,max:255,color:"red",dark:o.value,readonly:!0!==m.value,...l("rSlide",{"onUpdate:modelValue":e=>z(e,"r",255),onChange:e=>z(e,"r",255,void 0,!0)})}),k("input",{value:g.value.r,maxlength:3,readonly:!0!==m.value,onChange:xb,...l("rIn",{onInput:e=>z(e.target.value,"r",255,e),onBlur:e=>z(e.target.value,"r",255,e,!0)})})]),k("div",{class:"row items-center no-wrap"},[k("div","G"),k(HC,{modelValue:g.value.g,min:0,max:255,color:"green",dark:o.value,readonly:!0!==m.value,...l("gSlide",{"onUpdate:modelValue":e=>z(e,"g",255),onChange:e=>z(e,"g",255,void 0,!0)})}),k("input",{value:g.value.g,maxlength:3,readonly:!0!==m.value,onChange:xb,...l("gIn",{onInput:e=>z(e.target.value,"g",255,e),onBlur:e=>z(e.target.value,"g",255,e,!0)})})]),k("div",{class:"row items-center no-wrap"},[k("div","B"),k(HC,{modelValue:g.value.b,min:0,max:255,color:"blue",readonly:!0!==m.value,dark:o.value,...l("bSlide",{"onUpdate:modelValue":e=>z(e,"b",255),onChange:e=>z(e,"b",255,void 0,!0)})}),k("input",{value:g.value.b,maxlength:3,readonly:!0!==m.value,onChange:xb,...l("bIn",{onInput:e=>z(e.target.value,"b",255,e),onBlur:e=>z(e.target.value,"b",255,e,!0)})})]),!0===b.value?k("div",{class:"row items-center no-wrap"},[k("div","A"),k(HC,{modelValue:g.value.a,color:"grey",readonly:!0!==m.value,dark:o.value,...l("aSlide",{"onUpdate:modelValue":e=>z(e,"a",100),onChange:e=>z(e,"a",100,void 0,!0)})}),k("input",{value:g.value.a,maxlength:3,readonly:!0!==m.value,onChange:xb,...l("aIn",{onInput:e=>z(e.target.value,"a",100,e),onBlur:e=>z(e.target.value,"a",100,e,!0)})})]):null]}function X(){return[k("div",{class:"row items-center q-color-picker__palette-rows"+(!0===m.value?" q-color-picker__palette-rows--editable":"")},M.value.map((e=>k("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:e},...!0===m.value?l("palette#"+e,{onClick:()=>{!function(e){const t=A(e),i={r:t.r,g:t.g,b:t.b,a:t.a};void 0===i.a&&(i.a=g.value.a),g.value.h=t.h,g.value.s=t.s,g.value.v=t.v,R(i,!0)}(e)}}):{}}))))]}return()=>{const t=[k(rM,{modelValue:f.value,animated:!0},(()=>[k(sM,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},U),k(sM,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},W),k(sM,{class:"q-color-picker__palette-tab",name:"palette"},X)]))];return void 0!==e.name&&!0!==e.disable&&_(t,"push"),!0!==e.noHeader&&t.unshift(function(){const t=[];return!0!==e.noHeaderTabs&&t.push(k(JC,{class:"q-color-picker__header-tabs",modelValue:p.value,dense:!0,align:"justify","onUpdate:modelValue":$},(()=>[k(oM,{label:"HEX"+(!0===b.value?"A":""),name:"hex",ripple:!1}),k(oM,{label:"RGB"+(!0===b.value?"A":""),name:"rgb",ripple:!1})]))),t.push(k("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[k("input",{class:"fit",value:g.value[p.value],...!0!==m.value?{readonly:!0}:{},...l("topIn",{onInput:e=>{V(!0===N(e))},onChange:xb,onBlur:e=>{!0===N(e,!0)&&i.$forceUpdate(),V(!1)}})}),k(Ax,{ref:c,class:"q-color-picker__error-icon absolute no-pointer-events",name:n.iconSet.type.negative})])),k("div",{class:"q-color-picker__header relative-position overflow-hidden"},[k("div",{class:"q-color-picker__header-bg absolute-full"}),k("div",{class:w.value,style:x.value},t)])}()),!0!==e.noFooter&&t.push(k("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[k(JC,{class:"absolute-full",modelValue:f.value,dense:!0,align:"justify","onUpdate:modelValue":H},(()=>[k(oM,{icon:n.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),k(oM,{icon:n.iconSet.colorPicker.tune,name:"tune",ripple:!1}),k(oM,{icon:n.iconSet.colorPicker.palette,name:"palette",ripple:!1})]))])),k("div",{class:E.value,...L.value},t)}}});var wM=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function SM(e,t,i){return kM(function(e,t,i){const n=MM(e,!0);return EM(n.gy,3,n.march)+31*(t-1)-TM(t,7)*(t-7)+i-1}(e,t,i))}function CM(e,t){return t<=6?31:t<=11||function(e){return 0===function(e){const t=wM.length;let i,n,o,r,s,a=wM[0];if(e<a||e>=wM[t-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<t&&(i=wM[s],n=i-a,!(e<i));s+=1)a=i;return r=e-a,n-r<6&&(r=r-n+33*TM(n+4,33)),o=PM(PM(r+1,33)-1,4),-1===o&&(o=4),o}(e)}(e)?30:29}function MM(e,t){const i=wM.length,n=e+621;let o,r,s,a,l,u=-14,c=wM[0];if(e<c||e>=wM[i-1])throw new Error("Invalid Jalaali year "+e);for(l=1;l<i&&(o=wM[l],r=o-c,!(e<o));l+=1)u=u+8*TM(r,33)+TM(PM(r,33),4),c=o;a=e-c,u=u+8*TM(a,33)+TM(PM(a,33)+3,4),4===PM(r,33)&&r-a==4&&(u+=1);const h=20+u-(TM(n,4)-TM(3*(TM(n,100)+1),4)-150);return t||(r-a<6&&(a=a-r+33*TM(r+4,33)),s=PM(PM(a+1,33)-1,4),-1===s&&(s=4)),{leap:s,gy:n,march:h}}function EM(e,t,i){let n=TM(1461*(e+TM(t-8,6)+100100),4)+TM(153*PM(t+9,12)+2,5)+i-34840408;return n=n-TM(3*TM(e+100100+TM(t-8,6),100),4)+752,n}function kM(e){let t=4*e+139361631;t=t+4*TM(3*TM(4*e+183187720,146097),4)-3908;const i=5*TM(PM(t,1461),4)+308,n=TM(PM(i,153),5)+1,o=PM(TM(i,153),12)+1;return{gy:TM(t,1461)-100100+TM(8-o,6),gm:o,gd:n}}function TM(e,t){return~~(e/t)}function PM(e,t){return e-~~(e/t)*t}var LM=["gregorian","persian"],IM={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>LM.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},RM=["update:modelValue"];function AM(e){return e.year+"/"+ox(e.month)+"/"+ox(e.day)}function qM(e,t){const i=s((()=>!0!==e.disable&&!0!==e.readonly)),n=s((()=>!0===i.value?0:-1)),o=s((()=>{const t=[];return void 0!==e.color&&t.push(`bg-${e.color}`),void 0!==e.textColor&&t.push(`text-${e.textColor}`),t.join(" ")}));return{editable:i,tabindex:n,headerClass:o,getLocale:function(){return void 0!==e.locale?{...t.lang.date,...e.locale}:t.lang.date},getCurrentDate:function(t){const i=new Date,n=!0===t?null:0;if("persian"===e.calendar){const e=function(e,t,i){return"[object Date]"===Object.prototype.toString.call(e)&&(i=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),function(e){const t=kM(e).gy;let i,n,o,r=t-621;const s=MM(r,!1);if(o=e-EM(t,3,s.march),o>=0){if(o<=185)return n=1+TM(o,31),i=PM(o,31)+1,{jy:r,jm:n,jd:i};o-=186}else r-=1,o+=179,1===s.leap&&(o+=1);return n=7+TM(o,30),i=PM(o,30)+1,{jy:r,jm:n,jd:i}}(EM(e,t,i))}(i);return{year:e.jy,month:e.jm,day:e.jd}}return{year:i.getFullYear(),month:i.getMonth()+1,day:i.getDate(),hour:n,minute:n,second:n,millisecond:n}}}}var FM=864e5,OM=6e4,zM="YYYY-MM-DDTHH:mm:ss.SSSZ",NM=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,DM=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,GM={};function jM(e,t){return void 0!==e?e:void 0!==t?t.date:Ab.date}function BM(e,t=""){const i=e>0?"-":"+",n=Math.abs(e),o=n%60;return i+ox(Math.floor(n/60))+t+ox(o)}function VM(e,t,i,n,o){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(void 0!==o&&Object.assign(r,o),null==e||""===e||"string"!=typeof e)return r;void 0===t&&(t=zM);const s=jM(i,Ob.props),a=s.months,l=s.monthsShort,{regex:u,map:c}=function(e,t){const i="("+t.days.join("|")+")",n=e+i;if(void 0!==GM[n])return GM[n];const o="("+t.daysShort.join("|")+")",r="("+t.months.join("|")+")",s="("+t.monthsShort.join("|")+")",a={};let l=0;const u=e.replace(DM,(e=>{switch(l++,e){case"YY":return a.YY=l,"(-?\\d{1,2})";case"YYYY":return a.YYYY=l,"(-?\\d{1,4})";case"M":return a.M=l,"(\\d{1,2})";case"Mo":return a.M=l++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return a.M=l,"(\\d{2})";case"MMM":return a.MMM=l,s;case"MMMM":return a.MMMM=l,r;case"D":return a.D=l,"(\\d{1,2})";case"Do":return a.D=l++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return a.D=l,"(\\d{2})";case"H":return a.H=l,"(\\d{1,2})";case"HH":return a.H=l,"(\\d{2})";case"h":return a.h=l,"(\\d{1,2})";case"hh":return a.h=l,"(\\d{2})";case"m":return a.m=l,"(\\d{1,2})";case"mm":return a.m=l,"(\\d{2})";case"s":return a.s=l,"(\\d{1,2})";case"ss":return a.s=l,"(\\d{2})";case"S":return a.S=l,"(\\d{1})";case"SS":return a.S=l,"(\\d{2})";case"SSS":return a.S=l,"(\\d{3})";case"A":return a.A=l,"(AM|PM)";case"a":return a.a=l,"(am|pm)";case"aa":return a.aa=l,"(a\\.m\\.|p\\.m\\.)";case"ddd":return o;case"dddd":return i;case"Q":case"d":case"E":return"(\\d{1})";case"do":return l++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return l++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return l++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return a.Z=l,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return a.ZZ=l,"(Z|[+-]\\d{2}\\d{2})";case"X":return a.X=l,"(-?\\d+)";case"x":return a.x=l,"(-?\\d{4,})";default:return l--,"["===e[0]&&(e=e.substring(1,e.length-1)),e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}})),c={map:a,regex:new RegExp("^"+u)};return GM[n]=c,c}(t,s),h=e.match(u);if(null===h)return r;let d="";if(void 0!==c.X||void 0!==c.x){const e=parseInt(h[void 0!==c.X?c.X:c.x],10);if(!0===isNaN(e)||e<0)return r;const t=new Date(e*(void 0!==c.X?1e3:1));r.year=t.getFullYear(),r.month=t.getMonth()+1,r.day=t.getDate(),r.hour=t.getHours(),r.minute=t.getMinutes(),r.second=t.getSeconds(),r.millisecond=t.getMilliseconds()}else{if(void 0!==c.YYYY)r.year=parseInt(h[c.YYYY],10);else if(void 0!==c.YY){const e=parseInt(h[c.YY],10);r.year=e<0?e:2e3+e}if(void 0!==c.M){if(r.month=parseInt(h[c.M],10),r.month<1||r.month>12)return r}else void 0!==c.MMM?r.month=l.indexOf(h[c.MMM])+1:void 0!==c.MMMM&&(r.month=a.indexOf(h[c.MMMM])+1);if(void 0!==c.D){if(r.day=parseInt(h[c.D],10),null===r.year||null===r.month||r.day<1)return r;const e="persian"!==n?new Date(r.year,r.month,0).getDate():CM(r.year,r.month);if(r.day>e)return r}void 0!==c.H?r.hour=parseInt(h[c.H],10)%24:void 0!==c.h&&(r.hour=parseInt(h[c.h],10)%12,(c.A&&"PM"===h[c.A]||c.a&&"pm"===h[c.a]||c.aa&&"p.m."===h[c.aa])&&(r.hour+=12),r.hour=r.hour%24),void 0!==c.m&&(r.minute=parseInt(h[c.m],10)%60),void 0!==c.s&&(r.second=parseInt(h[c.s],10)%60),void 0!==c.S&&(r.millisecond=parseInt(h[c.S],10)*10**(3-h[c.S].length)),(void 0!==c.Z||void 0!==c.ZZ)&&(d=void 0!==c.Z?h[c.Z].replace(":",""):h[c.ZZ],r.timezoneOffset=("+"===d[0]?-1:1)*(60*d.slice(1,3)+1*d.slice(3,5)))}return r.dateHash=ox(r.year,4)+"/"+ox(r.month)+"/"+ox(r.day),r.timeHash=ox(r.hour)+":"+ox(r.minute)+":"+ox(r.second)+d,r}function $M(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const i=new Date(t.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);const n=t.getTimezoneOffset()-i.getTimezoneOffset();t.setHours(t.getHours()-n);const o=(t-i)/(7*FM);return 1+Math.floor(o)}function HM(e,t,i){const n=new Date(e),o="set";switch(t){case"year":case"years":n[`${o}Month`](0);case"month":case"months":n[`${o}Date`](1);case"day":case"days":case"date":n[`${o}Hours`](0);case"hour":case"hours":n[`${o}Minutes`](0);case"minute":case"minutes":n[`${o}Seconds`](0);case"second":case"seconds":n[`${o}Milliseconds`](0)}return n}function UM(e,t,i){return(e.getTime()-e.getTimezoneOffset()*OM-(t.getTime()-t.getTimezoneOffset()*OM))/i}function WM(e,t,i="days"){const n=new Date(e),o=new Date(t);switch(i){case"years":case"year":return n.getFullYear()-o.getFullYear();case"months":case"month":return 12*(n.getFullYear()-o.getFullYear())+n.getMonth()-o.getMonth();case"days":case"day":case"date":return UM(HM(n,"day"),HM(o,"day"),FM);case"hours":case"hour":return UM(HM(n,"hour"),HM(o,"hour"),36e5);case"minutes":case"minute":return UM(HM(n,"minute"),HM(o,"minute"),OM);case"seconds":case"second":return UM(HM(n,"second"),HM(o,"second"),1e3)}}function XM(e){return WM(e,HM(e,"year"),"days")+1}function KM(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}var YM={YY(e,t,i){const n=this.YYYY(e,t,i)%100;return n>=0?ox(n):"-"+ox(Math.abs(n))},YYYY:(e,t,i)=>i??e.getFullYear(),M:e=>e.getMonth()+1,Mo:e=>KM(e.getMonth()+1),MM:e=>ox(e.getMonth()+1),MMM:(e,t)=>t.monthsShort[e.getMonth()],MMMM:(e,t)=>t.months[e.getMonth()],Q:e=>Math.ceil((e.getMonth()+1)/3),Qo(e){return KM(this.Q(e))},D:e=>e.getDate(),Do:e=>KM(e.getDate()),DD:e=>ox(e.getDate()),DDD:e=>XM(e),DDDo:e=>KM(XM(e)),DDDD:e=>ox(XM(e),3),d:e=>e.getDay(),do:e=>KM(e.getDay()),dd:(e,t)=>t.days[e.getDay()].slice(0,2),ddd:(e,t)=>t.daysShort[e.getDay()],dddd:(e,t)=>t.days[e.getDay()],E:e=>e.getDay()||7,w:e=>$M(e),wo:e=>KM($M(e)),ww:e=>ox($M(e)),H:e=>e.getHours(),HH:e=>ox(e.getHours()),h(e){const t=e.getHours();return 0===t?12:t>12?t%12:t},hh(e){return ox(this.h(e))},m:e=>e.getMinutes(),mm:e=>ox(e.getMinutes()),s:e=>e.getSeconds(),ss:e=>ox(e.getSeconds()),S:e=>Math.floor(e.getMilliseconds()/100),SS:e=>ox(Math.floor(e.getMilliseconds()/10)),SSS:e=>ox(e.getMilliseconds(),3),A:e=>e.getHours()<12?"AM":"PM",a:e=>e.getHours()<12?"am":"pm",aa:e=>e.getHours()<12?"a.m.":"p.m.",Z:(e,t,i,n)=>BM(n??e.getTimezoneOffset(),":"),ZZ:(e,t,i,n)=>BM(n??e.getTimezoneOffset()),X:e=>Math.floor(e.getTime()/1e3),x:e=>e.getTime()};function ZM(e,t,i,n,o){if(0!==e&&!e||e===1/0||e===-1/0)return;const r=new Date(e);if(isNaN(r))return;void 0===t&&(t=zM);const s=jM(i,Ob.props);return t.replace(NM,((e,t)=>e in YM?YM[e](r,s,n,o):void 0===t?e:t.split("\\]").join("]")))}var QM=20,JM=["Calendar","Years","Months"],eE=e=>JM.includes(e),tE=e=>/^-?[\d]+\/[0-1]\d$/.test(e),iE="  ";function nE(e){return e.year+"/"+ox(e.month)}function oE(e,t,i){return L((()=>{e.value})),{removeFromHistory:function(){},addToHistory(){}}}fb({name:"QDate",props:{...IM,...YS,...Fx,modelValue:{required:!0,validator:e=>"string"==typeof e||!0===Array.isArray(e)||Object(e)===e||null===e},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...IM.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:tE},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:tE},navigationMaxYearMonth:{type:String,validator:tE},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:eE}},emits:[...RM,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,l=Ox(e,o),{getCache:u}=cC(),{tabindex:c,headerClass:h,getLocale:d,getCurrentDate:p}=qM(e,o);let f;const g=QS(ZS(e)),m=a(null),v=a(fe()),y=a(d()),_=s((()=>fe())),b=s((()=>d())),x=s((()=>p())),w=a(me(v.value,y.value)),S=a(e.defaultView),C=s((()=>!0===o.lang.rtl?"right":"left")),M=a(C.value),E=a(C.value),L=w.value.year,I=a(L-L%QM-(L<0?QM:0)),R=a(null),q=s((()=>{const t=!0===e.landscape?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${!0===e.minimal?"minimal":"standard"}`+(!0===l.value?" q-date--dark q-dark":"")+(!0===e.bordered?" q-date--bordered":"")+(!0===e.square?" q-date--square no-border-radius":"")+(!0===e.flat?" q-date--flat no-shadow":"")+(!0===e.disable?" disabled":!0===e.readonly?" q-date--readonly":"")})),F=s((()=>e.color||"primary")),O=s((()=>e.textColor||"white")),z=s((()=>!0===e.emitImmediately&&!0!==e.multiple&&!0!==e.range)),N=s((()=>!0===Array.isArray(e.modelValue)?e.modelValue:null!==e.modelValue&&void 0!==e.modelValue?[e.modelValue]:[])),D=s((()=>N.value.filter((e=>"string"==typeof e)).map((e=>ge(e,v.value,y.value))).filter((e=>null!==e.dateHash&&null!==e.day&&null!==e.month&&null!==e.year)))),G=s((()=>{const e=e=>ge(e,v.value,y.value);return N.value.filter((e=>!0===Yb(e)&&void 0!==e.from&&void 0!==e.to)).map((t=>({from:e(t.from),to:e(t.to)}))).filter((e=>null!==e.from.dateHash&&null!==e.to.dateHash&&e.from.dateHash<e.to.dateHash))})),j=s((()=>"persian"!==e.calendar?e=>new Date(e.year,e.month-1,e.day):e=>{const t=SM(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)})),B=s((()=>"persian"===e.calendar?AM:(e,t,i)=>ZM(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),void 0===t?v.value:t,void 0===i?y.value:i,e.year,e.timezoneOffset))),V=s((()=>D.value.length+G.value.reduce(((e,t)=>e+1+WM(j.value(t.to),j.value(t.from))),0))),$=s((()=>{if(void 0!==e.title&&null!==e.title&&0!==e.title.length)return e.title;if(null!==R.value){const e=R.value.init,t=j.value(e);return y.value.daysShort[t.getDay()]+", "+y.value.monthsShort[e.month-1]+" "+e.day+iE+"?"}if(0===V.value)return iE;if(V.value>1)return`${V.value} ${y.value.pluralDay}`;const t=D.value[0],i=j.value(t);return!0===isNaN(i.valueOf())?iE:void 0!==y.value.headerTitle?y.value.headerTitle(i,t):y.value.daysShort[i.getDay()]+", "+y.value.monthsShort[t.month-1]+" "+t.day})),H=s((()=>D.value.concat(G.value.map((e=>e.from))).sort(((e,t)=>e.year-t.year||e.month-t.month))[0])),U=s((()=>D.value.concat(G.value.map((e=>e.to))).sort(((e,t)=>t.year-e.year||t.month-e.month))[0])),W=s((()=>{if(void 0!==e.subtitle&&null!==e.subtitle&&0!==e.subtitle.length)return e.subtitle;if(0===V.value)return iE;if(V.value>1){const e=H.value,t=U.value,i=y.value.monthsShort;return i[e.month-1]+(e.year!==t.year?" "+e.year+iE+i[t.month-1]+" ":e.month!==t.month?iE+i[t.month-1]:"")+" "+t.year}return D.value[0].year})),X=s((()=>{const e=[o.iconSet.datetime.arrowLeft,o.iconSet.datetime.arrowRight];return!0===o.lang.rtl?e.reverse():e})),K=s((()=>void 0!==e.firstDayOfWeek?Number(e.firstDayOfWeek):y.value.firstDayOfWeek)),Y=s((()=>{const e=y.value.daysShort,t=K.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e})),Z=s((()=>{const t=w.value;return"persian"!==e.calendar?new Date(t.year,t.month,0).getDate():CM(t.year,t.month)})),Q=s((()=>"function"==typeof e.eventColor?e.eventColor:()=>e.eventColor)),J=s((()=>{if(void 0===e.navigationMinYearMonth)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}})),ee=s((()=>{if(void 0===e.navigationMaxYearMonth)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}})),te=s((()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return null!==J.value&&J.value.year>=w.value.year&&(e.year.prev=!1,J.value.year===w.value.year&&J.value.month>=w.value.month&&(e.month.prev=!1)),null!==ee.value&&ee.value.year<=w.value.year&&(e.year.next=!1,ee.value.year===w.value.year&&ee.value.month<=w.value.month&&(e.month.next=!1)),e})),ie=s((()=>{const e={};return D.value.forEach((t=>{const i=nE(t);void 0===e[i]&&(e[i]=[]),e[i].push(t.day)})),e})),ne=s((()=>{const e={};return G.value.forEach((t=>{const i=nE(t.from),n=nE(t.to);if(void 0===e[i]&&(e[i]=[]),e[i].push({from:t.from.day,to:i===n?t.to.day:void 0,range:t}),i<n){let i;const{year:o,month:r}=t.from,s=r<12?{year:o,month:r+1}:{year:o+1,month:1};for(;(i=nE(s))<=n;)void 0===e[i]&&(e[i]=[]),e[i].push({from:void 0,to:i===n?t.to.day:void 0,range:t}),s.month++,s.month>12&&(s.year++,s.month=1)}})),e})),oe=s((()=>{if(null===R.value)return;const{init:e,initHash:t,final:i,finalHash:n}=R.value,[o,r]=t<=n?[e,i]:[i,e],s=nE(o),a=nE(r);if(s!==re.value&&a!==re.value)return;const l={};return s===re.value?(l.from=o.day,l.includeFrom=!0):l.from=1,a===re.value?(l.to=r.day,l.includeTo=!0):l.to=Z.value,l})),re=s((()=>nE(w.value))),se=s((()=>{const t={};if(void 0===e.options){for(let e=1;e<=Z.value;e++)t[e]=!0;return t}const i="function"==typeof e.options?e.options:t=>e.options.includes(t);for(let e=1;e<=Z.value;e++){const n=re.value+"/"+ox(e);t[e]=i(n)}return t})),ae=s((()=>{const t={};if(void 0===e.events)for(let e=1;e<=Z.value;e++)t[e]=!1;else{const i="function"==typeof e.events?e.events:t=>e.events.includes(t);for(let e=1;e<=Z.value;e++){const n=re.value+"/"+ox(e);t[e]=!0===i(n)&&Q.value(n)}}return t})),le=s((()=>{let t,i;const{year:n,month:o}=w.value;if("persian"!==e.calendar)t=new Date(n,o-1,1),i=new Date(n,o-1,0).getDate();else{const e=SM(n,o,1);t=new Date(e.gy,e.gm-1,e.gd);let r=o-1,s=n;0===r&&(r=12,s--),i=CM(s,r)}return{days:t.getDay()-K.value-1,endDay:i}})),ue=s((()=>{const e=[],{days:t,endDay:i}=le.value,n=t<0?t+7:t;if(n<6)for(let s=i-n;s<=i;s++)e.push({i:s,fill:!0});const o=e.length;for(let s=1;s<=Z.value;s++){const t={i:s,event:ae.value[s],classes:[]};!0===se.value[s]&&(t.in=!0,t.flat=!0),e.push(t)}if(void 0!==ie.value[re.value]&&ie.value[re.value].forEach((t=>{const i=o+t-1;Object.assign(e[i],{selected:!0,unelevated:!0,flat:!1,color:F.value,textColor:O.value})})),void 0!==ne.value[re.value]&&ne.value[re.value].forEach((t=>{if(void 0!==t.from){const i=o+t.from-1,n=o+(t.to||Z.value)-1;for(let o=i;o<=n;o++)Object.assign(e[o],{range:t.range,unelevated:!0,color:F.value,textColor:O.value});Object.assign(e[i],{rangeFrom:!0,flat:!1}),void 0!==t.to&&Object.assign(e[n],{rangeTo:!0,flat:!1})}else if(void 0!==t.to){const i=o+t.to-1;for(let n=o;n<=i;n++)Object.assign(e[n],{range:t.range,unelevated:!0,color:F.value,textColor:O.value});Object.assign(e[i],{flat:!1,rangeTo:!0})}else{const i=o+Z.value-1;for(let n=o;n<=i;n++)Object.assign(e[n],{range:t.range,unelevated:!0,color:F.value,textColor:O.value})}})),void 0!==oe.value){const t=o+oe.value.from-1,i=o+oe.value.to-1;for(let n=t;n<=i;n++)e[n].color=F.value,e[n].editRange=!0;!0===oe.value.includeFrom&&(e[t].editRangeFrom=!0),!0===oe.value.includeTo&&(e[i].editRangeTo=!0)}w.value.year===x.value.year&&w.value.month===x.value.month&&(e[o+x.value.day-1].today=!0);const r=e.length%7;if(r>0){const t=7-r;for(let i=1;i<=t;i++)e.push({i:i,fill:!0})}return e.forEach((e=>{let t="q-date__calendar-item ";!0===e.fill?t+="q-date__calendar-item--fill":(t+="q-date__calendar-item--"+(!0===e.in?"in":"out"),void 0!==e.range&&(t+=" q-date__range"+(!0===e.rangeTo?"-to":!0===e.rangeFrom?"-from":"")),!0===e.editRange&&(t+=` q-date__edit-range${!0===e.editRangeFrom?"-from":""}${!0===e.editRangeTo?"-to":""}`),(void 0!==e.range||!0===e.editRange)&&(t+=` text-${e.color}`)),e.classes=t})),e})),ce=s((()=>!0===e.disable?{"aria-disabled":"true"}:{}));function he(e){f=JSON.stringify(e)}function de(){const{year:e,month:t,day:i}=x.value,n={...w.value,year:e,month:t,day:i},o=ie.value[nE(n)];(void 0===o||!1===o.includes(n.day))&&ke(n),pe(n.year,n.month)}function pe(e,t){S.value="Calendar",we(e,t)}function fe(){return"persian"===e.calendar?"YYYY/MM/DD":e.mask}function ge(t,i,n){return VM(t,i,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function me(t,i){const n=!0===Array.isArray(e.modelValue)?e.modelValue:e.modelValue?[e.modelValue]:[];if(0===n.length)return ve();const o=n[n.length-1],r=ge(void 0!==o.from?o.from:o,t,i);return null===r.dateHash?ve():r}function ve(){let t,i;if(void 0!==e.defaultYearMonth){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),i=parseInt(n[1],10)}else{const e=void 0!==x.value?x.value:p();t=e.year,i=e.month}return{year:t,month:i,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+ox(i)+"/01"}}function ye(e){let t=w.value.year,i=Number(w.value.month)+e;13===i?(i=1,t++):0===i&&(i=12,t--),we(t,i),!0===z.value&&Ce("month")}function _e(e){we(Number(w.value.year)+e,w.value.month),!0===z.value&&Ce("year")}function be(t){we(t,w.value.month),S.value="Years"===e.defaultView?"Months":"Calendar",!0===z.value&&Ce("year")}function xe(e){return{year:e.year,month:e.month,day:e.day}}function we(e,t,i){if(null!==J.value&&e<=J.value.year&&((t<J.value.month||e<J.value.year)&&(t=J.value.month),e=J.value.year),null!==ee.value&&e>=ee.value.year&&((t>ee.value.month||e>ee.value.year)&&(t=ee.value.month),e=ee.value.year),void 0!==i){const{hour:e,minute:t,second:n,millisecond:o,timezoneOffset:r,timeHash:s}=i;Object.assign(w.value,{hour:e,minute:t,second:n,millisecond:o,timezoneOffset:r,timeHash:s})}const n=e+"/"+ox(t)+"/01";n!==w.value.dateHash&&(M.value=w.value.dateHash<n==(!0!==o.lang.rtl)?"left":"right",e!==w.value.year&&(E.value=M.value),P((()=>{I.value=e-e%QM-(e<0?QM:0),Object.assign(w.value,{year:e,month:t,day:1,dateHash:n})})))}function Se(t,n,o){const r=null!==t&&1===t.length&&!1===e.multiple?t[0]:t,{reason:s,details:a}=Me(n,o);he(r),i("update:modelValue",r,s,a)}function Ce(t){const n=void 0!==D.value[0]&&null!==D.value[0].dateHash?{...D.value[0]}:{...w.value};P((()=>{n.year=w.value.year,n.month=w.value.month;const o="persian"!==e.calendar?new Date(n.year,n.month,0).getDate():CM(n.year,n.month);n.day=Math.min(Math.max(1,n.day),o);const r=Ee(n),{details:s}=Me("",n);he(r),i("update:modelValue",r,t,s)}))}function Me(e,t){return void 0!==t.from?{reason:`${e}-range`,details:{...xe(t.target),from:xe(t.from),to:xe(t.to)}}:{reason:`${e}-day`,details:xe(t)}}function Ee(e,t,i){return void 0!==e.from?{from:B.value(e.from,t,i),to:B.value(e.to,t,i)}:B.value(e,t,i)}function ke(t){let i;if(!0===e.multiple)if(void 0!==t.from){const e=AM(t.from),n=AM(t.to),o=D.value.filter((t=>t.dateHash<e||t.dateHash>n)),r=G.value.filter((({from:t,to:i})=>i.dateHash<e||t.dateHash>n));i=o.concat(r).concat(t).map((e=>Ee(e)))}else{const e=N.value.slice();e.push(Ee(t)),i=e}else i=Ee(t);Se(i,"add",t)}function Te(t){if(!0===e.noUnset)return;let i=null;if(!0===e.multiple&&!0===Array.isArray(e.modelValue)){const n=Ee(t);i=void 0!==t.from?e.modelValue.filter((e=>void 0===e.from||e.from!==n.from&&e.to!==n.to)):e.modelValue.filter((e=>e!==n)),0===i.length&&(i=null)}Se(i,"remove",t)}function Pe(t,n,o){const r=D.value.concat(G.value).map((e=>Ee(e,t,n))).filter((e=>void 0!==e.from?null!==e.from.dateHash&&null!==e.to.dateHash:null!==e.dateHash)),s=(!0===e.multiple?r:r[0])||null;he(s),i("update:modelValue",s,o)}function Le(){if(!0!==e.minimal)return k("div",{class:"q-date__header "+h.value},[k("div",{class:"relative-position"},[k(A,{name:"q-transition--fade"},(()=>k("div",{key:"h-yr-"+W.value,class:"q-date__header-subtitle q-date__header-link "+("Years"===S.value?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...u("vY",{onClick(){S.value="Years"},onKeyup(e){13===e.keyCode&&(S.value="Years")}})},[W.value])))]),k("div",{class:"q-date__header-title relative-position flex no-wrap"},[k("div",{class:"relative-position col"},[k(A,{name:"q-transition--fade"},(()=>k("div",{key:"h-sub"+$.value,class:"q-date__header-title-label q-date__header-link "+("Calendar"===S.value?"q-date__header-link--active":"cursor-pointer"),tabindex:c.value,...u("vC",{onClick(){S.value="Calendar"},onKeyup(e){13===e.keyCode&&(S.value="Calendar")}})},[$.value])))]),!0===e.todayBtn?k(Cw,{class:"q-date__header-today self-start",icon:o.iconSet.datetime.today,"aria-label":o.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:c.value,onClick:de}):null])])}function Ie({label:e,type:t,key:i,dir:n,goTo:r,boundaries:s,cls:a}){return[k("div",{class:"row items-center q-date__arrow"},[k(Cw,{round:!0,dense:!0,size:"sm",flat:!0,icon:X.value[0],"aria-label":"Years"===t?o.lang.date.prevYear:o.lang.date.prevMonth,tabindex:c.value,disable:!1===s.prev,...u("go-#"+t,{onClick(){r(-1)}})})]),k("div",{class:"relative-position overflow-hidden flex flex-center"+a},[k(A,{name:"q-transition--jump-"+n},(()=>k("div",{key:i},[k(Cw,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:c.value,...u("view#"+t,{onClick:()=>{S.value=t}})})])))]),k("div",{class:"row items-center q-date__arrow"},[k(Cw,{round:!0,dense:!0,size:"sm",flat:!0,icon:X.value[1],"aria-label":"Years"===t?o.lang.date.nextYear:o.lang.date.nextMonth,tabindex:c.value,disable:!1===s.next,...u("go+#"+t,{onClick(){r(1)}})})])]}r((()=>e.modelValue),(e=>{if(f===JSON.stringify(e))f=0;else{const e=me(v.value,y.value);we(e.year,e.month,e)}})),r(S,(()=>{null!==m.value&&!0===n.$el.contains(document.activeElement)&&m.value.focus()})),r((()=>w.value.year+"|"+w.value.month),(()=>{i("navigation",{year:w.value.year,month:w.value.month})})),r(_,(e=>{Pe(e,y.value,"mask"),v.value=e})),r(b,(e=>{Pe(v.value,e,"locale"),y.value=e}));const Re={Calendar:()=>[k("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[k("div",{class:"q-date__navigation row items-center no-wrap"},Ie({label:y.value.months[w.value.month-1],type:"Months",key:w.value.month,dir:M.value,goTo:ye,boundaries:te.value.month,cls:" col"}).concat(Ie({label:w.value.year,type:"Years",key:w.value.year,dir:E.value,goTo:_e,boundaries:te.value.year,cls:""}))),k("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Y.value.map((e=>k("div",{class:"q-date__calendar-item"},[k("div",e)])))),k("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[k(A,{name:"q-transition--slide-"+M.value},(()=>k("div",{key:re.value,class:"q-date__calendar-days fit"},ue.value.map((t=>k("div",{class:t.classes},[!0===t.in?k(Cw,{class:!0===t.today?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:c.value,...u("day#"+t.i,{onClick:()=>{!function(t){const n={...w.value,day:t};if(!1===e.range)return o=n,r=re.value,void(!0===ie.value[r]?.includes(o.day)?Te:ke)(o);var o,r;if(null===R.value){const o=ue.value.find((e=>!0!==e.fill&&e.i===t));if(!0!==e.noUnset&&void 0!==o.range)return void Te({target:n,from:o.range.from,to:o.range.to});if(!0===o.selected)return void Te(n);const r=AM(n);R.value={init:n,initHash:r,final:n,finalHash:r},i("rangeStart",xe(n))}else{const e=R.value.initHash,t=AM(n),o=e<=t?{from:R.value.init,to:n}:{from:n,to:R.value.init};R.value=null,ke(e===t?n:{target:n,...o}),i("rangeEnd",{from:xe(o.from),to:xe(o.to)})}}(t.i)},onMouseover:()=>{!function(e){if(null!==R.value){const t={...w.value,day:e};Object.assign(R.value,{final:t,finalHash:AM(t)})}}(t.i)}})},!1!==t.event?()=>k("div",{class:"q-date__event bg-"+t.event}):null):k("div",""+t.i)]))))))])])],Months(){const t=w.value.year===x.value.year,i=e=>null!==J.value&&w.value.year===J.value.year&&J.value.month>e||null!==ee.value&&w.value.year===ee.value.year&&ee.value.month<e,n=y.value.monthsShort.map(((e,n)=>{const o=w.value.month===n+1;return k("div",{class:"q-date__months-item flex flex-center"},[k(Cw,{class:!0===t&&x.value.month===n+1?"q-date__today":null,flat:!0!==o,label:e,unelevated:o,color:!0===o?F.value:null,textColor:!0===o?O.value:null,tabindex:c.value,disable:i(n+1),...u("month#"+n,{onClick:()=>{var e;e=n+1,we(w.value.year,e),S.value="Calendar",!0===z.value&&Ce("month")}})})])}));return!0===e.yearsInMonthView&&n.unshift(k("div",{class:"row no-wrap full-width"},[Ie({label:w.value.year,type:"Years",key:w.value.year,dir:E.value,goTo:_e,boundaries:te.value.year,cls:" col"})])),k("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const e=I.value,t=e+QM,i=[],n=e=>null!==J.value&&J.value.year>e||null!==ee.value&&ee.value.year<e;for(let o=e;o<=t;o++){const e=w.value.year===o;i.push(k("div",{class:"q-date__years-item flex flex-center"},[k(Cw,{key:"yr"+o,class:x.value.year===o?"q-date__today":null,flat:!e,label:o,dense:!0,unelevated:e,color:!0===e?F.value:null,textColor:!0===e?O.value:null,tabindex:c.value,disable:n(o),...u("yr#"+o,{onClick:()=>{be(o)}})})]))}return k("div",{class:"q-date__view q-date__years flex flex-center"},[k("div",{class:"col-auto"},[k(Cw,{round:!0,dense:!0,flat:!0,icon:X.value[0],"aria-label":o.lang.date.prevRangeYears(QM),tabindex:c.value,disable:n(e),...u("y-",{onClick:()=>{I.value-=QM}})})]),k("div",{class:"q-date__years-content col self-stretch row items-center"},i),k("div",{class:"col-auto"},[k(Cw,{round:!0,dense:!0,flat:!0,icon:X.value[1],"aria-label":o.lang.date.nextRangeYears(QM),tabindex:c.value,disable:n(t),...u("y+",{onClick:()=>{I.value+=QM}})})])])}};return Object.assign(n,{setToday:de,setView:function(e){!0===eE(e)&&(S.value=e)},offsetCalendar:function(e,t){["month","year"].includes(e)&&("month"===e?ye:_e)(!0===t?-1:1)},setCalendarTo:pe,setEditingRange:function(t,i){if(!1===e.range||!t)return void(R.value=null);const n=Object.assign({...w.value},t),o=void 0!==i?Object.assign({...w.value},i):n;R.value={init:n,initHash:AM(n),final:o,finalHash:AM(o)},pe(n.year,n.month)}}),()=>{const i=[k("div",{class:"q-date__content col relative-position"},[k(A,{name:"q-transition--fade"},Re[S.value])])],n=fx(t.default);return void 0!==n&&i.push(k("div",{class:"q-date__actions"},n)),void 0!==e.name&&!0!==e.disable&&g(i,"push"),k("div",{class:q.value,...ce.value},[Le(),k("div",{ref:m,class:"q-date__main col column",tabindex:-1},i)])}}});var rE,sE,aE,lE,uE,cE,hE=0,dE=!1,pE=null;function fE(e){(function(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=function(e){if(e.path)return e.path;if(e.composedPath)return e.composedPath();const t=[];let i=e.target;for(;i;){if(t.push(i),"HTML"===i.tagName)return t.push(document),t.push(window),t;i=i.parentElement}}(e),i=e.shiftKey&&!e.deltaX,n=!i&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),o=i||n?e.deltaY:e.deltaX;for(let r=0;r<t.length;r++){const e=t[r];if(pS(e,n))return n?o<0&&0===e.scrollTop||o>0&&e.scrollTop+e.clientHeight===e.scrollHeight:o<0&&0===e.scrollLeft||o>0&&e.scrollLeft+e.clientWidth===e.scrollWidth}return!0})(e)&&Sb(e)}function gE(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function mE(e){!0!==dE&&(dE=!0,requestAnimationFrame((()=>{dE=!1;const{height:t}=e.target,{clientHeight:i,scrollTop:n}=document.scrollingElement;(void 0===aE||t!==window.innerHeight)&&(aE=i-t,document.scrollingElement.scrollTop=n),n>aE&&(document.scrollingElement.scrollTop-=Math.ceil((n-aE)/8))})))}function vE(e){const t=document.body,i=void 0!==window.visualViewport;if("add"===e){const{overflowY:e,overflowX:n}=window.getComputedStyle(t);rE=rS(window),sE=oS(window),lE=t.style.left,uE=t.style.top,cE=window.location.href,t.style.left=`-${rE}px`,t.style.top=`-${sE}px`,"hidden"!==n&&("scroll"===n||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),"hidden"!==e&&("scroll"===e||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,!0===hb.is.ios&&(!0===i?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",mE,vb.passiveCapture),window.visualViewport.addEventListener("scroll",mE,vb.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",gE,vb.passiveCapture))}!0===hb.is.desktop&&!0===hb.is.mac&&window[`${e}EventListener`]("wheel",fE,vb.notPassive),"remove"===e&&(!0===hb.is.ios&&(!0===i?(window.visualViewport.removeEventListener("resize",mE,vb.passiveCapture),window.visualViewport.removeEventListener("scroll",mE,vb.passiveCapture)):window.removeEventListener("scroll",gE,vb.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=lE,t.style.top=uE,window.location.href===cE&&window.scrollTo(rE,sE),aE=void 0)}function yE(e){let t="add";if(!0===e){if(hE++,null!==pE)return clearTimeout(pE),void(pE=null);if(hE>1)return}else{if(0===hE||--hE>0)return;if(t="remove",!0===hb.is.ios&&!0===hb.is.nativeMobile)return null!==pE&&clearTimeout(pE),void(pE=setTimeout((()=>{vE(t),pE=null}),100))}vE(t)}function _E(){let e;return{preventBodyScroll(t){t!==e&&(void 0!==e||!0===t)&&(e=t,yE(t))}}}var bE=0,xE={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},wE={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},SE=fb({name:"QDialog",inheritAttrs:!1,props:{...Iw,...Kw,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...Rw,"shake","click","escapeKey"],setup(e,{slots:t,emit:i,attrs:n}){const o=T(),l=a(null),u=a(!1),c=a(!1);let h,d,p=null,f=null;const g=s((()=>!0!==e.persistent&&!0!==e.noRouteDismiss&&!0!==e.seamless)),{preventBodyScroll:m}=_E(),{registerTimeout:v}=Qw(),{registerTick:y,removeTick:_}=Zw(),{transitionProps:b,transitionStyle:x}=Yw(e,(()=>wE[e.position][0]),(()=>wE[e.position][1])),w=s((()=>x.value+(void 0!==e.backdropFilter?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:""))),{showPortal:S,hidePortal:C,portalIsAccessible:M,renderPortal:E}=Xw(o,l,(function(){return k("div",{role:"dialog","aria-modal":!0===R.value?"true":"false",...n,class:F.value},[k(A,{name:"q-transition--fade",appear:!0},(()=>!0===R.value?k("div",{class:"q-dialog__backdrop fixed-full",style:w.value,"aria-hidden":"true",tabindex:-1,onClick:B}):null)),k(A,b.value,(()=>!0===u.value?k("div",{ref:l,class:I.value,style:x.value,tabindex:-1,...q.value},fx(t.default)):null))])}),"dialog"),{hide:P}=Aw({showing:u,hideOnRouteChange:g,handleShow:function(t){f=!1===e.noRefocus&&null!==document.activeElement?document.activeElement:null,G(e.maximized),S(),c.value=!0,!0!==e.noFocus?(document.activeElement?.blur(),y(O)):_(),v((()=>{if(!0===o.proxy.$q.platform.is.ios){if(!0!==e.seamless&&document.activeElement){const{top:e,bottom:t}=document.activeElement.getBoundingClientRect(),{innerHeight:i}=window,n=void 0!==window.visualViewport?window.visualViewport.height:i;e>0&&t>n/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-n,t>=i?1/0:Math.ceil(document.scrollingElement.scrollTop+t-n/2))),document.activeElement.scrollIntoView()}d=!0,l.value.click(),d=!1}S(!0),c.value=!1,i("show",t)}),e.transitionDuration)},handleHide:function(t){_(),D(!0),c.value=!0,C(),null!==f&&(((0===t?.type.indexOf("key")?f.closest('[tabindex]:not([tabindex^="-"])'):void 0)||f).focus(),f=null),v((()=>{C(!0),c.value=!1,i("hide",t)}),e.transitionDuration)},processOnMount:!0});oE(u);const I=s((()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${!0===e.maximized?"maximized":"minimized"} q-dialog__inner--${e.position} ${xE[e.position]}`+(!0===c.value?" q-dialog__inner--animating":"")+(!0===e.fullWidth?" q-dialog__inner--fullwidth":"")+(!0===e.fullHeight?" q-dialog__inner--fullheight":"")+(!0===e.square?" q-dialog__inner--square":""))),R=s((()=>!0===u.value&&!0!==e.seamless)),q=s((()=>!0===e.autoClose?{onClick:j}:{})),F=s((()=>["q-dialog fullscreen no-pointer-events q-dialog--"+(!0===R.value?"modal":"seamless"),n.class]));function O(e){Nw((()=>{let t=l.value;if(null!==t){if(void 0!==e){const i=t.querySelector(e);if(null!==i)return void i.focus({preventScroll:!0})}!0!==t.contains(document.activeElement)&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))}}))}function z(e){e&&"function"==typeof e.focus?e.focus({preventScroll:!0}):O(),i("shake");const t=l.value;null!==t&&(t.classList.remove("q-animate--scale"),t.classList.add("q-animate--scale"),null!==p&&clearTimeout(p),p=setTimeout((()=>{p=null,null!==l.value&&(t.classList.remove("q-animate--scale"),O())}),170))}function N(){!0!==e.seamless&&(!0===e.persistent||!0===e.noEscDismiss?!0!==e.maximized&&!0!==e.noShake&&z():(i("escapeKey"),P()))}function D(t){null!==p&&(clearTimeout(p),p=null),(!0===t||!0===u.value)&&(G(!1),!0!==e.seamless&&(m(!1),MS(V),xS(N))),!0!==t&&(f=null)}function G(e){!0===e?!0!==h&&(bE<1&&document.body.classList.add("q-body--dialog"),bE++,h=!0):!0===h&&(bE<2&&document.body.classList.remove("q-body--dialog"),bE--,h=!1)}function j(e){!0!==d&&(P(e),i("click",e))}function B(t){!0!==e.persistent&&!0!==e.noBackdropDismiss?P(t):!0!==e.noShake&&z()}function V(t){!0!==e.allowFocusOutside&&!0===M.value&&!0!==sw(l.value,t.target)&&O('[tabindex]:not([tabindex="-1"])')}return r((()=>e.maximized),(e=>{!0===u.value&&G(e)})),r(R,(e=>{m(e),!0===e?(CS(V),bS(N)):(MS(V),xS(N))})),Object.assign(o.proxy,{focus:O,shake:z,__updateRefocusTarget(e){f=e||null}}),L(D),E}});function CE(e,t){if(t&&e===t)return null;const i=e.nodeName.toLowerCase();if(!0===["div","li","ul","ol","blockquote"].includes(i))return e;const n=(window.getComputedStyle?window.getComputedStyle(e):e.currentStyle).display;return"block"===n||"table"===n?e:CE(e.parentNode)}function ME(e,t,i){return!(!e||e===document.body)&&(!0===i&&e===t||(t===document?document.body:t).contains(e.parentNode))}function EE(e,t,i){if(i||((i=document.createRange()).selectNode(e),i.setStart(e,0)),0===t.count)i.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(i.setEnd(e,t.count),t.count=0);else for(let n=0;0!==t.count&&n<e.childNodes.length;n++)i=EE(e.childNodes[n],t,i);return i}fb({name:"QDrawer",inheritAttrs:!1,props:{...Iw,...Fx,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Rw,"onLayout","miniState"],setup(e,{slots:t,emit:i,attrs:n}){const o=T(),{proxy:{$q:u}}=o,c=Ox(e,u),{preventBodyScroll:h}=_E(),{registerTimeout:d,removeTimeout:p}=Qw(),f=M(jb,Wb);if(f===Wb)return Wb;let g,m,v=null;const y=a("mobile"===e.behavior||"desktop"!==e.behavior&&f.totalWidth.value<=e.breakpoint),_=s((()=>!0===e.mini&&!0!==y.value)),b=s((()=>!0===_.value?e.miniWidth:e.width)),x=a(!0===e.showIfAbove&&!1===y.value||!0===e.modelValue),w=s((()=>!0!==e.persistent&&(!0===y.value||!0===$.value)));function C(e,t){if(!1!==e&&f.animate(),ne(0),!0===y.value){const e=f.instances[G.value];!0===e?.belowBreakpoint&&e.hide(!1),oe(1),!0!==f.isContainer.value&&h(!0)}else oe(0),!1!==e&&re(!1);d((()=>{!1!==e&&re(!0),!0!==t&&i("show",e)}),150)}function E(e,t){!1!==e&&f.animate(),oe(0),ne(F.value*b.value),le(),!0!==t?d((()=>{i("hide",e)}),150):p()}const{show:I,hide:R}=Aw({showing:x,hideOnRouteChange:w,handleShow:C,handleHide:E});oE(x);const A={belowBreakpoint:y,hide:R},q=s((()=>"right"===e.side)),F=s((()=>(!0===u.lang.rtl?-1:1)*(!0===q.value?1:-1))),O=a(0),z=a(!1),N=a(!1),D=a(b.value*F.value),G=s((()=>!0===q.value?"left":"right")),j=s((()=>!0===x.value&&!1===y.value&&!1===e.overlay?!0===e.miniToOverlay?e.miniWidth:b.value:0)),B=s((()=>!0===e.overlay||!0===e.miniToOverlay||-1!==f.view.value.indexOf(q.value?"R":"L")||!0===u.platform.is.ios&&!0===f.isContainer.value)),V=s((()=>!1===e.overlay&&!0===x.value&&!1===y.value)),$=s((()=>!0===e.overlay&&!0===x.value&&!1===y.value)),H=s((()=>"fullscreen q-drawer__backdrop"+(!1===x.value&&!1===z.value?" hidden":""))),U=s((()=>({backgroundColor:`rgba(0,0,0,${.4*O.value})`}))),W=s((()=>!0===q.value?"r"===f.rows.value.top[2]:"l"===f.rows.value.top[0])),X=s((()=>!0===q.value?"r"===f.rows.value.bottom[2]:"l"===f.rows.value.bottom[0])),K=s((()=>{const e={};return!0===f.header.space&&!1===W.value&&(!0===B.value?e.top=`${f.header.offset}px`:!0===f.header.space&&(e.top=`${f.header.size}px`)),!0===f.footer.space&&!1===X.value&&(!0===B.value?e.bottom=`${f.footer.offset}px`:!0===f.footer.space&&(e.bottom=`${f.footer.size}px`)),e})),Y=s((()=>{const e={width:`${b.value}px`,transform:`translateX(${D.value}px)`};return!0===y.value?e:Object.assign(e,K.value)})),Z=s((()=>"q-drawer__content fit "+(!0!==f.isContainer.value?"scroll":"overflow-auto"))),Q=s((()=>`q-drawer q-drawer--${e.side}`+(!0===N.value?" q-drawer--mini-animate":"")+(!0===e.bordered?" q-drawer--bordered":"")+(!0===c.value?" q-drawer--dark q-dark":"")+(!0===z.value?" no-transition":!0===x.value?"":" q-layout--prevent-focus")+(!0===y.value?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(!0===_.value?"mini":"standard")+(!0===B.value||!0!==V.value?" fixed":"")+(!0===e.overlay||!0===e.miniToOverlay?" q-drawer--on-top":"")+(!0===W.value?" q-drawer--top-padding":"")))),J=s((()=>{const t=!0===u.lang.rtl?e.side:G.value;return[[OC,se,void 0,{[t]:!0,mouse:!0}]]})),ee=s((()=>{const t=!0===u.lang.rtl?G.value:e.side;return[[OC,ae,void 0,{[t]:!0,mouse:!0}]]})),te=s((()=>{const t=!0===u.lang.rtl?G.value:e.side;return[[OC,ae,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]}));function ie(){var t,i;t=y,i="mobile"===e.behavior||"desktop"!==e.behavior&&f.totalWidth.value<=e.breakpoint,t.value!==i&&(t.value=i)}function ne(e){void 0===e?P((()=>{e=!0===x.value?0:b.value,ne(F.value*e)})):(!0===f.isContainer.value&&!0===q.value&&(!0===y.value||Math.abs(e)===b.value)&&(e+=F.value*f.scrollbarWidth.value),D.value=e)}function oe(e){O.value=e}function re(e){const t=!0===e?"remove":!0!==f.isContainer.value?"add":"";""!==t&&document.body.classList[t]("q-body--drawer-toggle")}function se(e){if(!1!==x.value)return;const t=b.value,i=ix(e.distance.x,0,t);if(!0===e.isFinal)return i>=Math.min(75,t)==1?I():(f.animate(),oe(0),ne(F.value*t)),void(z.value=!1);ne((!0===u.lang.rtl?!0!==q.value:q.value)?Math.max(t-i,0):Math.min(0,i-t)),oe(ix(i/t,0,1)),!0===e.isFirst&&(z.value=!0)}function ae(t){if(!0!==x.value)return;const i=b.value,n=t.direction===e.side,o=(!0===u.lang.rtl?!0!==n:n)?ix(t.distance.x,0,i):0;if(!0===t.isFinal)return Math.abs(o)<Math.min(75,i)==1?(f.animate(),oe(1),ne(0)):R(),void(z.value=!1);ne(F.value*o),oe(ix(1-o/i,0,1)),!0===t.isFirst&&(z.value=!0)}function le(){h(!1),re(!0)}function ue(t,i){f.update(e.side,t,i)}function ce(t,i){ue("size",!0===t?e.miniWidth:i)}return r(y,(t=>{!0===t?(g=x.value,!0===x.value&&R(!1)):!1===e.overlay&&"mobile"!==e.behavior&&!1!==g&&(!0===x.value?(ne(0),oe(0),le()):I(!1))})),r((()=>e.side),((e,t)=>{f.instances[t]===A&&(f.instances[t]=void 0,f[t].space=!1,f[t].offset=0),f.instances[e]=A,f[e].size=b.value,f[e].space=V.value,f[e].offset=j.value})),r(f.totalWidth,(()=>{(!0===f.isContainer.value||!0!==document.qScrollPrevented)&&ie()})),r((()=>e.behavior+e.breakpoint),ie),r(f.isContainer,(e=>{!0===x.value&&h(!0!==e),!0===e&&ie()})),r(f.scrollbarWidth,(()=>{ne(!0===x.value?0:void 0)})),r(j,(e=>{ue("offset",e)})),r(V,(e=>{i("onLayout",e),ue("space",e)})),r(q,(()=>{ne()})),r(b,(t=>{ne(),ce(e.miniToOverlay,t)})),r((()=>e.miniToOverlay),(e=>{ce(e,b.value)})),r((()=>u.lang.rtl),(()=>{ne()})),r((()=>e.mini),(()=>{e.noMiniAnimation||!0===e.modelValue&&(null!==v&&clearTimeout(v),o.proxy&&o.proxy.$el&&o.proxy.$el.classList.add("q-drawer--mini-animate"),N.value=!0,v=setTimeout((()=>{v=null,N.value=!1,o?.proxy?.$el?.classList.remove("q-drawer--mini-animate")}),150),f.animate())})),r(_,(e=>{i("miniState",e)})),f.instances[e.side]=A,ce(e.miniToOverlay,b.value),ue("space",V.value),ue("offset",j.value),!0===e.showIfAbove&&!0!==e.modelValue&&!0===x.value&&void 0!==e["onUpdate:modelValue"]&&i("update:modelValue",!0),l((()=>{i("onLayout",V.value),i("miniState",_.value),g=!0===e.showIfAbove;const t=()=>{(!0===x.value?C:E)(!1,!0)};0===f.totalWidth.value?m=r(f.totalWidth,(()=>{m(),m=void 0,!1===x.value&&!0===e.showIfAbove&&!1===y.value?I(!1):t()})):P(t)})),L((()=>{m?.(),null!==v&&(clearTimeout(v),v=null),!0===x.value&&le(),f.instances[e.side]===A&&(f.instances[e.side]=void 0,ue("size",0),ue("offset",0),ue("space",!1))})),()=>{const i=[];!0===y.value&&(!1===e.noSwipeOpen&&i.push(S(k("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),J.value)),i.push(yx("div",{ref:"backdrop",class:H.value,style:U.value,"aria-hidden":"true",onClick:R},void 0,"backdrop",!0!==e.noSwipeBackdrop&&!0===x.value,(()=>te.value))));const o=!0===_.value&&void 0!==t.mini,r=[k("div",{...n,key:""+o,class:[Z.value,n.class]},!0===o?t.mini():fx(t.default))];return!0===e.elevated&&!0===x.value&&r.push(k("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),i.push(yx("aside",{ref:"content",class:Q.value,style:Y.value},r,"contentclose",!0!==e.noSwipeClose&&!0===y.value,(()=>ee.value))),k("div",{class:"q-drawer-container"},i)}}});var kE=/^https?:\/\//,TE=class{constructor(e,t){this.el=e,this.eVm=t,this._range=null}get selection(){if(this.el){const e=document.getSelection();if(ME(e.anchorNode,this.el,!0)&&ME(e.focusNode,this.el,!0))return e}return null}get hasSelection(){return null!==this.selection&&0!==this.selection.toString().length}get range(){const e=this.selection;return e?.rangeCount?e.getRangeAt(0):this._range}get parent(){const e=this.range;if(null!==e){const t=e.startContainer;return t.nodeType===document.ELEMENT_NODE?t:t.parentNode}return null}get blockParent(){const e=this.parent;return null!==e?CE(e,this.el):null}save(e=this.range){null!==e&&(this._range=e)}restore(e=this._range){const t=document.createRange(),i=document.getSelection();null!==e?(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),i.removeAllRanges(),i.addRange(t)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let e,t=-1;const i=document.getSelection(),n=this.el.parentNode;if(i.focusNode&&ME(i.focusNode,n))for(e=i.focusNode,t=i.focusOffset;e&&e!==n;)e!==this.el&&e.previousSibling?(e=e.previousSibling,t+=e.textContent.length):e=e.parentNode;this.savedPos=t}restorePosition(e=0){if(this.savedPos>0&&this.savedPos<e){const e=window.getSelection(),t=EE(this.el,{count:this.savedPos});t&&(t.collapse(!1),e.removeAllRanges(),e.addRange(t))}}hasParent(e,t){const i=t?this.parent:this.blockParent;return null!==i&&i.nodeName.toLowerCase()===e.toLowerCase()}hasParents(e,t,i=this.parent){return null!==i&&(!0===e.includes(i.nodeName.toLowerCase())||!0===t&&this.hasParents(e,t,i.parentNode))}is(e,t){if(null===this.selection)return!1;switch(e){case"formatBlock":return"DIV"===t&&this.parent===this.el||this.hasParent(t,"PRE"===t);case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(e)===t;case"fontName":const i=document.queryCommandValue(e);return i===`"${t}"`||i===t;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const n=document.queryCommandState(e);return void 0!==t?n===t:n}}getParentAttribute(e){return null!==this.parent?this.parent.getAttribute(e):null}can(e){return"outdent"===e?this.hasParents(["blockquote","li"],!0):"indent"===e?this.hasParents(["li"],!0):"link"===e?null!==this.selection||this.is("link"):void 0}apply(e,t,i=yb){if("formatBlock"===e)["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(t)&&this.is(e,t)&&(e="outdent",t=null),"PRE"===t&&this.is(e,"PRE")&&(t="P");else{if("print"===e){i();const e=window.open();return e.document.write(`\n        <!doctype html>\n        <html>\n          <head>\n            <title>Print - ${document.title}</title>\n          </head>\n          <body>\n            <div>${this.el.innerHTML}</div>\n          </body>\n        </html>\n      `),e.print(),void e.close()}if("link"===e){const e=this.getParentAttribute("href");if(null===e){const e=this.selectWord(this.selection),t=e?e.toString():"";if(!(t.length||this.range&&this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=kE.test(t)?t:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(e.getRangeAt(0))}else this.eVm.editLinkUrl.value=e,this.range.selectNodeContents(this.parent),this.save();return}if("fullscreen"===e)return this.eVm.toggleFullscreen(),void i();if("viewsource"===e)return this.eVm.isViewingSource.value=!1===this.eVm.isViewingSource.value,this.eVm.setContent(this.eVm.props.modelValue),void i()}document.execCommand(e,!1,t),i()}selectWord(e){if(null===e||!0!==e.isCollapsed||void 0===e.modify)return e;const t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const i=t.collapsed?["backward","forward"]:["forward","backward"];t.detach();const n=e.focusNode,o=e.focusOffset;return e.collapse(e.anchorNode,e.anchorOffset),e.modify("move",i[0],"character"),e.modify("move",i[1],"word"),e.extend(n,o),e.modify("extend",i[1],"character"),e.modify("extend",i[0],"word"),e}},PE=fb({name:"QTooltip",inheritAttrs:!1,props:{...kw,...Iw,...Kw,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Kw.transitionShow,default:"jump-down"},transitionHide:{...Kw.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:AS},self:{type:String,default:"top middle",validator:AS},offset:{type:Array,default:()=>[14,14],validator:qS},scrollTarget:eS,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Rw],setup(e,{slots:t,emit:i,attrs:n}){let o,l;const u=T(),{proxy:{$q:c}}=u,h=a(null),d=a(!1),p=s((()=>OS(e.anchor,c.lang.rtl))),f=s((()=>OS(e.self,c.lang.rtl))),g=s((()=>!0!==e.persistent)),{registerTick:m,removeTick:v}=Zw(),{registerTimeout:y}=Qw(),{transitionProps:_,transitionStyle:b}=Yw(e),{localScrollTarget:x,changeScrollEvent:w,unconfigureScrollTarget:S}=Lw(e,N),{anchorEl:C,canShow:M,anchorEvents:E}=Pw({showing:d,configureAnchorEl:function(){if(!0===e.noParentEvent||null===C.value)return;const t=!0===c.platform.is.mobile?[[C.value,"touchstart","delayShow","passive"]]:[[C.value,"mouseenter","delayShow","passive"],[C.value,"mouseleave","delayHide","passive"]];Mb(E,"anchor",t)}}),{show:P,hide:I}=Aw({showing:d,canShow:M,handleShow:function(t){R(),m((()=>{l=new MutationObserver((()=>z())),l.observe(h.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),z(),N()})),void 0===o&&(o=r((()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl),z)),y((()=>{R(!0),i("show",t)}),e.transitionDuration)},handleHide:function(t){v(),q(),O(),y((()=>{q(!0),i("hide",t)}),e.transitionDuration)},hideOnRouteChange:g,processOnMount:!0});Object.assign(E,{delayShow:function(t){if(!0===c.platform.is.mobile){Ew(),document.body.classList.add("non-selectable");const e=C.value,t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"delayHide","passiveCapture"]));Mb(E,"tooltipTemp",t)}y((()=>{P(t)}),e.delay)},delayHide:function(t){!0===c.platform.is.mobile&&(Eb(E,"tooltipTemp"),Ew(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10)),y((()=>{I(t)}),e.hideDelay)}});const{showPortal:R,hidePortal:q,renderPortal:F}=Xw(u,h,(function(){return k(A,_.value,D)}),"tooltip");if(!0===c.platform.is.mobile){const t={anchorEl:C,innerRef:h,onClickOutside:e=>(I(e),e.target.classList.contains("q-dialog__backdrop")&&Sb(e),!0)},i=s((()=>null===e.modelValue&&!0!==e.persistent&&!0===d.value));r(i,(e=>{(!0===e?IS:RS)(t)})),L((()=>{RS(t)}))}function O(){void 0!==l&&(l.disconnect(),l=void 0),void 0!==o&&(o(),o=void 0),S(),Eb(E,"tooltipTemp")}function z(){NS({targetEl:h.value,offset:e.offset,anchorEl:C.value,anchorOrigin:p.value,selfOrigin:f.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function N(){if(null!==C.value||void 0!==e.scrollTarget){x.value=iS(C.value,e.scrollTarget);const t=!0===e.noParentEvent?z:I;w(x.value,t)}}function D(){return!0===d.value?k("div",{...n,ref:h,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,b.value],role:"tooltip"},fx(t.default)):null}return L(O),Object.assign(u.proxy,{updatePosition:z}),F}}),LE=fb({name:"QItem",props:{...Fx,...Qx,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=Ox(e,n),{hasLink:r,linkAttrs:l,linkClass:u,linkTag:c,navigateOnClick:h}=Jx(),d=a(null),p=a(null),f=s((()=>!0===e.clickable||!0===r.value||"label"===e.tag)),g=s((()=>!0!==e.disable&&!0===f.value)),m=s((()=>"q-item q-item-type row no-wrap"+(!0===e.dense?" q-item--dense":"")+(!0===o.value?" q-item--dark":"")+(!0===r.value&&null===e.active?u.value:!0===e.active?" q-item--active"+(void 0!==e.activeClass?` ${e.activeClass}`:""):"")+(!0===e.disable?" disabled":"")+(!0===g.value?" q-item--clickable q-link cursor-pointer "+(!0===e.manualFocus?"q-manual-focusable":"q-focusable q-hoverable")+(!0===e.focused?" q-manual-focusable--focused":""):""))),v=s((()=>void 0===e.insetLevel?null:{["padding"+(!0===n.lang.rtl?"Right":"Left")]:16+56*e.insetLevel+"px"}));function y(e){!0===g.value&&(null!==p.value&&!0!==e.qAvoidFocus&&(!0!==e.qKeyEvent&&document.activeElement===d.value?p.value.focus():document.activeElement===p.value&&d.value.focus()),h(e))}function _(e){if(!0===g.value&&!0===Rb(e,[13,32])){Sb(e),e.qKeyEvent=!0;const t=new MouseEvent("click",e);t.qKeyEvent=!0,d.value.dispatchEvent(t)}i("keyup",e)}return()=>{const i={ref:d,class:m.value,style:v.value,role:"listitem",onClick:y,onKeyup:_};return!0===g.value?(i.tabindex=e.tabindex||"0",Object.assign(i,l.value)):!0===f.value&&(i["aria-disabled"]="true"),k(c.value,i,function(){const e=gx(t.default,[]);return!0===g.value&&e.unshift(k("div",{class:"q-focus-helper",tabindex:-1,ref:p})),e}())}}}),IE=fb({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const i=s((()=>"q-item__section column q-item__section--"+(!0===e.avatar||!0===e.side||!0===e.thumbnail?"side":"main")+(!0===e.top?" q-item__section--top justify-start":" justify-center")+(!0===e.avatar?" q-item__section--avatar":"")+(!0===e.thumbnail?" q-item__section--thumbnail":"")+(!0===e.noWrap?" q-item__section--nowrap":"")));return()=>k("div",{class:i.value},fx(t.default))}});function RE(e,t,i){t.handler?t.handler(e,i,i.caret):i.runCmd(t.cmd,t.param)}function AE(e){return k("div",{class:"q-editor__toolbar-group"},e)}function qE(e,t,i,n=!1){const o=n||"toggle"===t.type&&(t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param)),r=[];if(e.$q.platform.is.desktop&&(t.tip||t.htmlTip)){const e=t.key?k("div",[k("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;r.push(k(PE,{delay:1e3},(()=>[k("div",t.htmlTip?{innerHTML:t.htmlTip}:t.tip),e])))}return k(Cw,{...e.buttonProps.value,icon:null!==t.icon?t.icon:void 0,color:o?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:o&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,"aria-label":null==t.label?t.tip:void 0,disable:!!t.disable&&("function"!=typeof t.disable||t.disable(e)),size:"sm",onClick(n){i?.(),RE(n,t,e)}},(()=>r))}function FE(e){if(e.caret)return e.buttons.value.filter((t=>!e.isViewingSource.value||t.find((e=>"viewsource"===e.cmd)))).map((t=>AE(t.map((t=>(!e.isViewingSource.value||"viewsource"===t.cmd)&&("slot"===t.type?fx(e.slots[t.slot]):"dropdown"===t.type?function(e,t){const i="only-icons"===t.list;let n,o,r=t.label,s=null!==t.icon?t.icon:void 0;function a(){u.component.proxy.hide()}if(i)o=t.options.map((t=>{const i=void 0===t.type&&e.caret.is(t.cmd,t.param);return i&&(r=t.tip,s=null!==t.icon?t.icon:void 0),qE(e,t,a,i)})),n=e.toolbarBackgroundClass.value,o=[AE(o)];else{const i=void 0!==e.props.toolbarToggleColor?`text-${e.props.toolbarToggleColor}`:null,l=void 0!==e.props.toolbarTextColor?`text-${e.props.toolbarTextColor}`:null,u="no-icons"===t.list;o=t.options.map((t=>{const n=!!t.disable&&t.disable(e),o=void 0===t.type&&e.caret.is(t.cmd,t.param);o&&(r=t.tip,s=null!==t.icon?t.icon:void 0);const c=t.htmlTip;return k(LE,{active:o,activeClass:i,clickable:!0,disable:n,dense:!0,onClick(i){a(),!0!==i?.qAvoidFocus&&e.contentRef.value?.focus(),e.caret.restore(),RE(i,t,e)}},(()=>[!0===u?null:k(IE,{class:o?i:l,side:!0},(()=>k(Ax,{name:null!==t.icon?t.icon:void 0}))),k(IE,c?()=>k("div",{class:"text-no-wrap",innerHTML:t.htmlTip}):t.tip?()=>k("div",{class:"text-no-wrap"},t.tip):void 0)]))})),n=[e.toolbarBackgroundClass.value,l]}const l=t.highlight&&r!==t.label,u=k(KS,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:l?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:l&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:r,icon:t.fixedIcon?null!==t.icon?t.icon:void 0:s,contentClass:n,onShow:t=>e.emit("dropdownShow",t),onHide:t=>e.emit("dropdownHide",t),onBeforeShow:t=>e.emit("dropdownBeforeShow",t),onBeforeHide:t=>e.emit("dropdownBeforeHide",t)},(()=>o));return u}(e,t):qE(e,t)))))))}var OE=/^on[A-Z]/;function zE(){const{attrs:e,vnode:t}=T(),i={listeners:a({}),attributes:a({})};function n(){const n={},o={};for(const t in e)"class"!==t&&"style"!==t&&!1===OE.test(t)&&(n[t]=e[t]);for(const e in t.props)!0===OE.test(e)&&(o[e]=t.props[e]);i.attributes.value=n,i.listeners.value=o}return z(n),n(),i}var NE=Object.prototype.toString,DE=Object.prototype.hasOwnProperty,GE=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map((e=>"[object "+e+"]")));function jE(e){if(e!==Object(e)||!0===GE.has(NE.call(e))||e.constructor&&!1===DE.call(e,"constructor")&&!1===DE.call(e.constructor.prototype,"isPrototypeOf"))return!1;let t;for(t in e);return void 0===t||DE.call(e,t)}function BE(){let e,t,i,n,o,r,s=arguments[0]||{},a=1,l=!1;const u=arguments.length;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},a=2),Object(s)!==s&&"function"!=typeof s&&(s={}),u===a&&(s=this,a--);a<u;a++)if(null!==(e=arguments[a]))for(t in e)i=s[t],n=e[t],s!==n&&(!0===l&&n&&((o=Array.isArray(n))||!0===jE(n))?(r=!0===o?!0===Array.isArray(i)?i:[]:!0===jE(i)?i:{},s[t]=BE(l,r,n)):void 0!==n&&(s[t]=n));return s}fb({name:"QEditor",props:{...Fx,...vC,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>0===e.length||e.every((e=>e.length)),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...yC,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,u=Ox(e,o),{inFullscreen:c,toggleFullscreen:h}=_C(),d=zE(),p=a(null),f=a(null),g=a(null),m=a(!1),v=s((()=>!e.readonly&&!e.disable));let y,_,b=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),y=window.getComputedStyle(document.body).fontFamily;const x=s((()=>e.toolbarBg?` bg-${e.toolbarBg}`:"")),w=s((()=>({type:"a",flat:!0!==e.toolbarOutline&&!0!==e.toolbarPush,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!v.value,size:"sm"}))),S=s((()=>{const t=o.lang.editor,i=o.iconSet.editor;return{bold:{cmd:"bold",icon:i.bold,tip:t.bold,key:66},italic:{cmd:"italic",icon:i.italic,tip:t.italic,key:73},strike:{cmd:"strikeThrough",icon:i.strikethrough,tip:t.strikethrough,key:83},underline:{cmd:"underline",icon:i.underline,tip:t.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:i.unorderedList,tip:t.unorderedList},ordered:{cmd:"insertOrderedList",icon:i.orderedList,tip:t.orderedList},subscript:{cmd:"subscript",icon:i.subscript,tip:t.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:i.superscript,tip:t.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:e=>e.caret&&!e.caret.can("link"),icon:i.hyperlink,tip:t.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:i.toggleFullscreen,tip:t.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:i.viewSource,tip:t.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:i.quote,tip:t.quote,key:81},left:{cmd:"justifyLeft",icon:i.left,tip:t.left},center:{cmd:"justifyCenter",icon:i.center,tip:t.center},right:{cmd:"justifyRight",icon:i.right,tip:t.right},justify:{cmd:"justifyFull",icon:i.justify,tip:t.justify},print:{type:"no-state",cmd:"print",icon:i.print,tip:t.print,key:80},outdent:{type:"no-state",disable:e=>e.caret&&!e.caret.can("outdent"),cmd:"outdent",icon:i.outdent,tip:t.outdent},indent:{type:"no-state",disable:e=>e.caret&&!e.caret.can("indent"),cmd:"indent",icon:i.indent,tip:t.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:i.removeFormat,tip:t.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:i.hr,tip:t.hr},undo:{type:"no-state",cmd:"undo",icon:i.undo,tip:t.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:i.redo,tip:t.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:i.heading1||i.heading,tip:t.heading1,htmlTip:`<h1 class="q-ma-none">${t.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:i.heading2||i.heading,tip:t.heading2,htmlTip:`<h2 class="q-ma-none">${t.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:i.heading3||i.heading,tip:t.heading3,htmlTip:`<h3 class="q-ma-none">${t.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:i.heading4||i.heading,tip:t.heading4,htmlTip:`<h4 class="q-ma-none">${t.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:i.heading5||i.heading,tip:t.heading5,htmlTip:`<h5 class="q-ma-none">${t.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:i.heading6||i.heading,tip:t.heading6,htmlTip:`<h6 class="q-ma-none">${t.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:i.heading,tip:t.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:i.code,htmlTip:`<code>${t.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:i.size1||i.size,tip:t.size1,htmlTip:`<font size="1">${t.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:i.size2||i.size,tip:t.size2,htmlTip:`<font size="2">${t.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:i.size3||i.size,tip:t.size3,htmlTip:`<font size="3">${t.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:i.size4||i.size,tip:t.size4,htmlTip:`<font size="4">${t.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:i.size5||i.size,tip:t.size5,htmlTip:`<font size="5">${t.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:i.size6||i.size,tip:t.size6,htmlTip:`<font size="6">${t.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:i.size7||i.size,tip:t.size7,htmlTip:`<font size="7">${t.size7}</font>`}}})),C=s((()=>{const t=e.definitions||{},i=e.definitions||e.fonts?BE(!0,{},S.value,t,function(e,t,i,n={}){const o=Object.keys(n);if(0===o.length)return{};const r={default_font:{cmd:"fontName",param:e,icon:i,tip:t}};return o.forEach((e=>{const t=n[e];r[e]={cmd:"fontName",param:t,icon:i,tip:t,htmlTip:`<font face="${t}">${t}</font>`}})),r}(y,o.lang.editor.defaultFont,o.iconSet.editor.font,e.fonts)):S.value;return e.toolbar.map((e=>e.map((e=>{if(e.options)return{type:"dropdown",icon:e.icon,label:e.label,size:"sm",dense:!0,fixedLabel:e.fixedLabel,fixedIcon:e.fixedIcon,highlight:e.highlight,list:e.list,options:e.options.map((e=>i[e]))};const n=i[e];return n?"no-state"===n.type||t[e]&&(void 0===n.cmd||S.value[n.cmd]&&"no-state"===S.value[n.cmd].type)?n:Object.assign({type:"toggle"},n):{type:"slot",slot:e}}))))})),M={$q:o,props:e,slots:t,emit:i,inFullscreen:c,toggleFullscreen:h,runCmd:U,isViewingSource:m,editLinkUrl:g,toolbarBackgroundClass:x,buttonProps:w,contentRef:f,buttons:C,setContent:H};r((()=>e.modelValue),(e=>{b!==e&&(b=e,H(e,!0))})),r(g,(e=>{i("link"+(e?"Show":"Hide"))}));const E=s((()=>e.toolbar&&0!==e.toolbar.length)),I=s((()=>{const e={},t=t=>{t.key&&(e[t.key]={cmd:t.cmd,param:t.param})};return C.value.forEach((e=>{e.forEach((e=>{e.options?e.options.forEach(t):t(e)}))})),e})),R=s((()=>c.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle])),A=s((()=>"q-editor q-editor--"+(!0===m.value?"source":"default")+(!0===e.disable?" disabled":"")+(!0===c.value?" fullscreen column":"")+(!0===e.square?" q-editor--square no-border-radius":"")+(!0===e.flat?" q-editor--flat":"")+(!0===e.dense?" q-editor--dense":"")+(!0===u.value?" q-editor--dark q-dark":""))),q=s((()=>[e.contentClass,"q-editor__content",{col:c.value,"overflow-auto":c.value||e.maxHeight}])),F=s((()=>!0===e.disable?{"aria-disabled":"true"}:{}));function O(){if(null!==f.value){const t="inner"+(!0===m.value?"Text":"HTML"),n=f.value[t];n!==e.modelValue&&(b=n,i("update:modelValue",n))}}function z(e){if(i("keydown",e),!0!==e.ctrlKey||!0===Ib(e))return void W();const t=e.keyCode,n=I.value[t];if(void 0!==n){const{cmd:t,param:i}=n;Sb(e),U(t,i,!1)}}function N(e){W(),i("click",e)}function D(e){if(null!==f.value){const{scrollTop:e,scrollHeight:t}=f.value;_=t-e}M.caret.save(),i("blur",e)}function G(e){P((()=>{null!==f.value&&void 0!==_&&(f.value.scrollTop=f.value.scrollHeight-_)})),i("focus",e)}function j(e){const t=p.value;if(null!==t&&!0===t.contains(e.target)&&(null===e.relatedTarget||!0!==t.contains(e.relatedTarget))){const e="inner"+(!0===m.value?"Text":"HTML");M.caret.restorePosition(f.value[e].length),W()}}function B(e){const t=p.value;null!==t&&!0===t.contains(e.target)&&(null===e.relatedTarget||!0!==t.contains(e.relatedTarget))&&(M.caret.savePosition(),W())}function V(){_=void 0}function $(e){M.caret.save()}function H(e,t){if(null!==f.value){!0===t&&M.caret.savePosition();const i="inner"+(!0===m.value?"Text":"HTML");f.value[i]=e,!0===t&&(M.caret.restorePosition(f.value[i].length),W())}}function U(e,t,i=!0){X(),M.caret.restore(),M.caret.apply(e,t,(()=>{X(),M.caret.save(),i&&W()}))}function W(){setTimeout((()=>{g.value=null,n.$forceUpdate()}),1)}function X(){Nw((()=>{f.value?.focus({preventScroll:!0})}))}return l((()=>{M.caret=n.caret=new TE(f.value,M),H(e.modelValue),W(),document.addEventListener("selectionchange",$)})),L((()=>{document.removeEventListener("selectionchange",$)})),Object.assign(n,{runCmd:U,refreshToolbar:W,focus:X,getContentEl:function(){return f.value}}),()=>{let t;if(E.value){const e=[k("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+x.value},FE(M))];null!==g.value&&e.push(k("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+x.value},function(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let i=e.editLinkUrl.value;const n=()=>{e.caret.restore(),i!==e.editLinkUrl.value&&document.execCommand("createLink",!1,""===i?" ":i),e.editLinkUrl.value=null};return[k("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),k("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:i,onInput:e=>{xb(e),i=e.target.value},onKeydown:t=>{if(!0!==Ib(t))switch(t.keyCode){case 13:return wb(t),n();case 27:wb(t),e.caret.restore(),(!e.editLinkUrl.value||"https://"===e.editLinkUrl.value)&&document.execCommand("unlink"),e.editLinkUrl.value=null}}}),AE([k(Cw,{key:"qedt_btm_rem",...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),k(Cw,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:n})])]}}(M))),t=k("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},e)}return k("div",{ref:p,class:A.value,style:{height:!0===c.value?"100%":null},...F.value,onFocusin:j,onFocusout:B},[t,k("div",{ref:f,style:R.value,class:q.value,contenteditable:v.value,placeholder:e.placeholder,...d.listeners.value,onInput:O,onKeydown:z,onClick:N,onBlur:D,onFocus:G,onMousedown:V,onTouchstartPassive:V})])}}});var VE=fb({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const i=s((()=>parseInt(e.lines,10))),n=s((()=>"q-item__label"+(!0===e.overline?" q-item__label--overline text-overline":"")+(!0===e.caption?" q-item__label--caption text-caption":"")+(!0===e.header?" q-item__label--header":"")+(1===i.value?" ellipsis":""))),o=s((()=>void 0!==e.lines&&i.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":i.value}:null));return()=>k("div",{style:o.value,class:n.value},fx(t.default))}}),$E=fb({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:i}){let n,o,r,s,a=!1,l=null,u=null;function c(){n?.(),n=null,a=!1,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null),o?.removeEventListener("transitionend",r),r=null}function h(t,i,o){void 0!==i&&(t.style.height=`${i}px`),t.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,n=o}function d(e,t){e.style.overflowY=null,e.style.height=null,e.style.transition=null,c(),t!==s&&i(t)}function p(t,i){let n=0;o=t,!0===a?(c(),n=t.offsetHeight===t.scrollHeight?0:void 0):(s="hide",t.style.overflowY="hidden"),h(t,n,i),l=setTimeout((()=>{l=null,t.style.height=`${t.scrollHeight}px`,r=e=>{u=null,(Object(e)!==e||e.target===t)&&d(t,"show")},t.addEventListener("transitionend",r),u=setTimeout(r,1.1*e.duration)}),100)}function f(t,i){let n;o=t,!0===a?c():(s="show",t.style.overflowY="hidden",n=t.scrollHeight),h(t,n,i),l=setTimeout((()=>{l=null,t.style.height=0,r=e=>{u=null,(Object(e)!==e||e.target===t)&&d(t,"hide")},t.addEventListener("transitionend",r),u=setTimeout(r,1.1*e.duration)}),100)}return L((()=>{!0===a&&c()})),()=>k(A,{css:!1,appear:e.appear,onEnter:p,onLeave:f},t.default)}}),HE={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},UE={xs:2,sm:4,md:8,lg:16,xl:24},WE=fb({name:"QSeparator",props:{...Fx,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=T(),i=Ox(e,t.proxy.$q),n=s((()=>!0===e.vertical?"vertical":"horizontal")),o=s((()=>` q-separator--${n.value}`)),r=s((()=>!1!==e.inset?`${o.value}-${HE[e.inset]}`:"")),a=s((()=>`q-separator${o.value}${r.value}`+(void 0!==e.color?` bg-${e.color}`:"")+(!0===i.value?" q-separator--dark":""))),l=s((()=>{const t={};if(void 0!==e.size&&(t[!0===e.vertical?"width":"height"]=e.size),!1!==e.spaced){const i=!0===e.spaced?`${UE.md}px`:e.spaced in UE?`${UE[e.spaced]}px`:e.spaced,n=!0===e.vertical?["Left","Right"]:["Top","Bottom"];t[`margin${n[0]}`]=t[`margin${n[1]}`]=i}return t}));return()=>k("hr",{class:a.value,style:l.value,"aria-orientation":n.value})}}),XE=O({}),KE=Object.keys(Qx);fb({name:"QExpansionItem",props:{...Qx,...Iw,...Fx,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Rw,"click","afterShow","afterHide"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=Ox(e,n),l=a(null!==e.modelValue?e.modelValue:e.defaultOpened),u=a(null),c=WS(),{show:h,hide:d,toggle:p}=Aw({showing:l});let f,g;const m=s((()=>`q-expansion-item q-item-type q-expansion-item--${!0===l.value?"expanded":"collapsed"} q-expansion-item--${!0===e.popup?"popup":"standard"}`)),v=s((()=>void 0===e.contentInsetLevel?null:{["padding"+(!0===n.lang.rtl?"Right":"Left")]:56*e.contentInsetLevel+"px"})),y=s((()=>!0!==e.disable&&(void 0!==e.href||void 0!==e.to&&null!==e.to&&""!==e.to))),_=s((()=>{const t={};return KE.forEach((i=>{t[i]=e[i]})),t})),b=s((()=>!0===y.value||!0!==e.expandIconToggle)),x=s((()=>void 0!==e.expandedIcon&&!0===l.value?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[!0===e.denseToggle?"denseIcon":"icon"])),w=s((()=>!0!==e.disable&&(!0===y.value||!0===e.expandIconToggle))),C=s((()=>({expanded:!0===l.value,detailsId:c.value,toggle:p,show:h,hide:d}))),M=s((()=>{const t=void 0!==e.toggleAriaLabel?e.toggleAriaLabel:n.lang.label[!0===l.value?"collapse":"expand"](e.label);return{role:"button","aria-expanded":!0===l.value?"true":"false","aria-controls":c.value,"aria-label":t}}));function E(e){!0!==y.value&&p(e),i("click",e)}function P(e){13===e.keyCode&&I(e,!0)}function I(e,t){!0!==t&&!0!==e.qAvoidFocus&&u.value?.focus(),p(e),Sb(e)}function R(){i("afterShow")}function A(){i("afterHide")}function q(){void 0===f&&(f=HS()),!0===l.value&&(XE[e.group]=f);const t=r(l,(t=>{!0===t?XE[e.group]=f:XE[e.group]===f&&delete XE[e.group]})),i=r((()=>XE[e.group]),((e,t)=>{t===f&&void 0!==e&&e!==f&&d()}));g=()=>{t(),i(),XE[e.group]===f&&delete XE[e.group],g=void 0}}function F(){let i;return void 0!==t.header?i=[].concat(t.header(C.value)):(i=[k(IE,(()=>[k(VE,{lines:e.labelLines},(()=>e.label||"")),e.caption?k(VE,{lines:e.captionLines,caption:!0},(()=>e.caption)):null]))],e.icon&&i[!0===e.switchToggleSide?"push":"unshift"](k(IE,{side:!0===e.switchToggleSide,avatar:!0!==e.switchToggleSide},(()=>k(Ax,{name:e.icon}))))),!0!==e.disable&&!0!==e.hideExpandIcon&&i[!0===e.switchToggleSide?"unshift":"push"](function(){const t={class:["q-focusable relative-position cursor-pointer"+(!0===e.denseToggle&&!0===e.switchToggleSide?" items-end":""),e.expandIconClass],side:!0!==e.switchToggleSide,avatar:e.switchToggleSide},i=[k(Ax,{class:"q-expansion-item__toggle-icon"+(void 0===e.expandedIcon&&!0===l.value?" q-expansion-item__toggle-icon--rotated":""),name:x.value})];return!0===w.value&&(Object.assign(t,{tabindex:0,...M.value,onClick:I,onKeyup:P}),i.unshift(k("div",{ref:u,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),k(IE,t,(()=>i))}()),i}function O(){const t={ref:"item",style:e.headerStyle,class:e.headerClass,dark:o.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return!0===b.value&&(t.clickable=!0,t.onClick=E,Object.assign(t,!0===y.value?_.value:M.value)),k(LE,t,F)}function z(){return S(k("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:v.value,id:c.value},fx(t.default)),[[j,l.value]])}function N(){const t=[O(),k($E,{duration:e.duration,onShow:R,onHide:A},z)];return!0===e.expandSeparator&&t.push(k(WE,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:o.value}),k(WE,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:o.value})),t}return r((()=>e.group),(e=>{g?.(),void 0!==e&&q()})),void 0!==e.group&&q(),L((()=>{g?.()})),()=>k("div",{class:m.value},[k("div",{class:"q-expansion-item__container relative-position"},N())])}});var YE=["top","right","bottom","left"],ZE={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>YE.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function QE(e,t){return{formClass:s((()=>"q-fab--form-"+(!0===e.square?"square":"rounded"))),stacked:s((()=>!1===e.externalLabel&&["top","bottom"].includes(e.labelPosition))),labelProps:s((()=>{if(!0===e.externalLabel){const i=null===e.hideLabel?!1===t.value:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(!0===i?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(!0===e.hideLabel?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}}))}}var JE=["up","right","down","left"],ek=["left","center","right"];fb({name:"QFab",props:{...ZE,...Iw,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...ZE.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>JE.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>ek.includes(e)}},emits:Rw,setup(e,{slots:t}){const i=a(null),n=a(!0===e.modelValue),o=WS(),{proxy:{$q:r}}=T(),{formClass:l,labelProps:u}=QE(e,n),c=s((()=>!0!==e.persistent)),{hide:h,toggle:d}=Aw({showing:n,hideOnRouteChange:c}),p=s((()=>({opened:n.value}))),f=s((()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${l.value}`+(!0===n.value?" q-fab--opened":" q-fab--closed"))),g=s((()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${!0===n.value?"opened":"closed"}`)),m=s((()=>{const e={id:o.value,role:"menu"};return!0!==n.value&&(e["aria-hidden"]="true"),e})),v=s((()=>"q-fab__icon-holder  q-fab__icon-holder--"+(!0===n.value?"opened":"closed")));function y(i,n){const o=t[i],s=`q-fab__${i} absolute-full`;return void 0===o?k(Ax,{class:s,name:e[n]||r.iconSet.fab[n]}):k("div",{class:s},o(p.value))}function _(){const i=[];return!0!==e.hideIcon&&i.push(k("div",{class:v.value},[y("icon","icon"),y("active-icon","activeIcon")])),(""!==e.label||void 0!==t.label)&&i[u.value.action](k("div",u.value.data,void 0!==t.label?t.label(p.value):[e.label])),mx(t.tooltip,i)}return W(Vb,{showing:n,onChildClick(e){h(e),!0!==e?.qAvoidFocus&&i.value?.$el.focus()}}),()=>k("div",{class:f.value},[k(Cw,{ref:i,class:l.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":!0===n.value?"true":"false","aria-haspopup":"true","aria-controls":o.value,onClick:d},_),k("div",{class:g.value,...m.value},fx(t.default))])}});var tk={start:"self-end",center:"self-center",end:"self-start"},ik=Object.keys(tk);fb({name:"QFabAction",props:{...ZE,icon:{type:String,default:""},anchor:{type:String,validator:e=>ik.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:i}){const n=M(Vb,(()=>({showing:{value:!0},onChildClick:yb}))),{formClass:o,labelProps:r}=QE(e,n.showing),a=s((()=>{const t=tk[e.anchor];return o.value+(void 0!==t?` ${t}`:"")})),l=s((()=>!0===e.disable||!0!==n.showing.value));function u(e){n.onChildClick(e),i("click",e)}function c(){const i=[];return void 0!==t.icon?i.push(t.icon()):""!==e.icon&&i.push(k(Ax,{name:e.icon})),(""!==e.label||void 0!==t.label)&&i[r.value.action](k("div",r.value.data,void 0!==t.label?t.label():[e.label])),mx(t.default,i)}const h=T();return Object.assign(h.proxy,{click:u}),()=>k(Cw,{class:a.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,onClick:u},c)}});var nk=[!0,!1,"ondemand"],ok={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>nk.includes(e)}};function rk(e){return null!=e&&0!==(""+e).length}var sk={...Fx,...ok,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},ak={...sk,maxlength:[Number,String]},lk=["update:modelValue","clear","focus","blur"];function uk({requiredForAttr:e=!0,tagProp:t,changeEvent:i=!1}={}){const{props:n,proxy:o}=T(),r=Ox(n,o.$q),l=WS({required:e,getValue:()=>n.for});return{requiredForAttr:e,changeEvent:i,tag:!0===t?s((()=>n.tag)):{value:"label"},isDark:r,editable:s((()=>!0!==n.disable&&!0!==n.readonly)),innerLoading:a(!1),focused:a(!1),hasPopupOpen:!1,splitAttrs:zE(),targetUid:l,rootRef:a(null),targetRef:a(null),controlRef:a(null)}}function ck(e){const{props:t,emit:i,slots:n,attrs:o,proxy:u}=T(),{$q:c}=u;let h=null;void 0===e.hasValue&&(e.hasValue=s((()=>rk(t.modelValue)))),void 0===e.emitValue&&(e.emitValue=e=>{i("update:modelValue",e)}),void 0===e.controlEvents&&(e.controlEvents={onFocusin:O,onFocusout:z}),Object.assign(e,{clearValue:N,onControlFocusin:O,onControlFocusout:z,focus:F}),void 0===e.computedCounter&&(e.computedCounter=s((()=>{if(!1!==t.counter){const e="string"==typeof t.modelValue||"number"==typeof t.modelValue?(""+t.modelValue).length:!0===Array.isArray(t.modelValue)?t.modelValue.length:0,i=void 0!==t.maxlength?t.maxlength:t.maxValues;return e+(void 0!==i?" / "+i:"")}})));const{isDirtyModel:d,hasRules:p,hasError:f,errorMessage:g,resetValidation:m}=function(e,t){const{props:i,proxy:n}=T(),o=a(!1),u=a(null),c=a(!1);!function({validate:e,resetValidation:t,requiresQForm:i}){const n=M($b,!1);if(!1!==n){const{props:i,proxy:o}=T();Object.assign(o,{validate:e,resetValidation:t}),r((()=>i.disable),(e=>{!0===e?("function"==typeof t&&t(),n.unbindComponent(o)):n.bindComponent(o)})),l((()=>{!0!==i.disable&&n.bindComponent(o)})),L((()=>{!0!==i.disable&&n.unbindComponent(o)}))}}({validate:_,resetValidation:y});let h,d=0;const p=s((()=>void 0!==i.rules&&null!==i.rules&&0!==i.rules.length)),f=s((()=>!0!==i.disable&&!0===p.value&&!1===t.value)),g=s((()=>!0===i.error||!0===o.value)),m=s((()=>"string"==typeof i.errorMessage&&0!==i.errorMessage.length?i.errorMessage:u.value));function v(){"ondemand"!==i.lazyRules&&!0===f.value&&!0===c.value&&b()}function y(){d++,t.value=!1,c.value=!1,o.value=!1,u.value=null,b.cancel()}function _(e=i.modelValue){if(!0===i.disable||!1===p.value)return!0;const n=++d,r=!0!==t.value?()=>{c.value=!0}:()=>{},s=(e,i)=>{!0===e&&r(),o.value=e,u.value=i||null,t.value=!1},a=[];for(let t=0;t<i.rules.length;t++){const n=i.rules[t];let o;if("function"==typeof n?o=n(e,dM):"string"==typeof n&&void 0!==dM[n]&&(o=dM[n](e)),!1===o||"string"==typeof o)return s(!0,o),!1;!0!==o&&void 0!==o&&a.push(o)}return 0===a.length?(s(!1),!0):(t.value=!0,Promise.all(a).then((e=>{if(void 0===e||!1===Array.isArray(e)||0===e.length)return n===d&&s(!1),!0;const t=e.find((e=>!1===e||"string"==typeof e));return n===d&&s(void 0!==t,t),void 0===t}),(e=>(n===d&&s(!0),!1))))}r((()=>i.modelValue),(()=>{c.value=!0,!0===f.value&&!1===i.lazyRules&&b()})),r((()=>i.reactiveRules),(e=>{!0===e?void 0===h&&(h=r((()=>i.rules),v,{immediate:!0,deep:!0})):void 0!==h&&(h(),h=void 0)}),{immediate:!0}),r((()=>i.lazyRules),v),r(e,(e=>{!0===e?c.value=!0:!0===f.value&&"ondemand"!==i.lazyRules&&b()}));const b=kb(_,0);return L((()=>{h?.(),b.cancel()})),Object.assign(n,{resetValidation:y,validate:_}),rb(n,"hasError",(()=>g.value)),{isDirtyModel:c,hasRules:p,hasError:g,errorMessage:m,validate:_,resetValidation:y}}(e.focused,e.innerLoading),v=void 0!==e.floatingLabel?s((()=>!0===t.stackLabel||!0===e.focused.value||!0===e.floatingLabel.value)):s((()=>!0===t.stackLabel||!0===e.focused.value||!0===e.hasValue.value)),y=s((()=>!0===t.bottomSlots||void 0!==t.hint||!0===p.value||!0===t.counter||null!==t.error)),_=s((()=>!0===t.filled?"filled":!0===t.outlined?"outlined":!0===t.borderless?"borderless":t.standout?"standout":"standard")),b=s((()=>`q-field row no-wrap items-start q-field--${_.value}`+(void 0!==e.fieldClass?` ${e.fieldClass.value}`:"")+(!0===t.rounded?" q-field--rounded":"")+(!0===t.square?" q-field--square":"")+(!0===v.value?" q-field--float":"")+(!0===w.value?" q-field--labeled":"")+(!0===t.dense?" q-field--dense":"")+(!0===t.itemAligned?" q-field--item-aligned q-item-type":"")+(!0===e.isDark.value?" q-field--dark":"")+(void 0===e.getControl?" q-field--auto-height":"")+(!0===e.focused.value?" q-field--focused":"")+(!0===f.value?" q-field--error":"")+(!0===f.value||!0===e.focused.value?" q-field--highlighted":"")+(!0!==t.hideBottomSpace&&!0===y.value?" q-field--with-bottom":"")+(!0===t.disable?" q-field--disabled":!0===t.readonly?" q-field--readonly":""))),x=s((()=>"q-field__control relative-position row no-wrap"+(void 0!==t.bgColor?` bg-${t.bgColor}`:"")+(!0===f.value?" text-negative":"string"==typeof t.standout&&0!==t.standout.length&&!0===e.focused.value?` ${t.standout}`:void 0!==t.color?` text-${t.color}`:""))),w=s((()=>!0===t.labelSlot||void 0!==t.label)),S=s((()=>"q-field__label no-pointer-events absolute ellipsis"+(void 0!==t.labelColor&&!0!==f.value?` text-${t.labelColor}`:""))),C=s((()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:v.value,modelValue:t.modelValue,emitValue:e.emitValue}))),E=s((()=>{const i={};return e.targetUid.value&&(i.for=e.targetUid.value),!0===t.disable&&(i["aria-disabled"]="true"),i}));function q(){const t=document.activeElement;let i=e.targetRef?.value;i&&(null===t||t.id!==e.targetUid.value)&&(!0===i.hasAttribute("tabindex")||(i=i.querySelector("[tabindex]")),i!==t&&i?.focus({preventScroll:!0}))}function F(){Nw(q)}function O(t){null!==h&&(clearTimeout(h),h=null),!0===e.editable.value&&!1===e.focused.value&&(e.focused.value=!0,i("focus",t))}function z(t,n){null!==h&&clearTimeout(h),h=setTimeout((()=>{h=null,(!0!==document.hasFocus()||!0!==e.hasPopupOpen&&void 0!==e.controlRef&&null!==e.controlRef.value&&!1===e.controlRef.value.contains(document.activeElement))&&(!0===e.focused.value&&(e.focused.value=!1,i("blur",t)),n?.())}))}function N(n){Sb(n),!0!==c.platform.is.mobile?(e.targetRef?.value||e.rootRef.value).focus():!0===e.rootRef.value.contains(document.activeElement)&&document.activeElement.blur(),"file"===t.type&&(e.inputRef.value.value=null),i("update:modelValue",null),!0===e.changeEvent&&i("change",null),i("clear",t.modelValue),P((()=>{const e=d.value;m(),d.value=e}))}function D(e){[13,32].includes(e.keyCode)&&N(e)}function G(){const i=[];return void 0!==n.prepend&&i.push(k("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:wb},n.prepend())),i.push(k("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},function(){const i=[];return void 0!==t.prefix&&null!==t.prefix&&i.push(k("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),void 0!==e.getShadowControl&&!0===e.hasShadow.value&&i.push(e.getShadowControl()),!0===w.value&&i.push(k("div",{class:S.value},fx(n.label,t.label))),void 0!==e.getControl?i.push(e.getControl()):void 0!==n.rawControl?i.push(n.rawControl()):void 0!==n.control&&i.push(k("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":!0===t.autofocus||void 0},n.control(C.value))),void 0!==t.suffix&&null!==t.suffix&&i.push(k("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),i.concat(fx(n.default))}())),!0===f.value&&!1===t.noErrorIcon&&i.push(B("error",[k(Ax,{name:c.iconSet.field.error,color:"negative"})])),!0===t.loading||!0===e.innerLoading.value?i.push(B("inner-loading-append",void 0!==n.loading?n.loading():[k(iw,{color:t.color})])):!0===t.clearable&&!0===e.hasValue.value&&!0===e.editable.value&&i.push(B("inner-clearable-append",[k(Ax,{class:"q-field__focusable-action",name:t.clearIcon||c.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":c.lang.label.clear,onKeyup:D,onClick:N})])),void 0!==n.append&&i.push(k("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:wb},n.append())),void 0!==e.getInnerAppend&&i.push(B("inner-append",e.getInnerAppend())),void 0!==e.getControlChild&&i.push(e.getControlChild()),i}function j(){let i,o;!0===f.value?null!==g.value?(i=[k("div",{role:"alert"},g.value)],o=`q--slot-error-${g.value}`):(i=fx(n.error),o="q--slot-error"):(!0!==t.hideHint||!0===e.focused.value)&&(void 0!==t.hint?(i=[k("div",t.hint)],o=`q--slot-hint-${t.hint}`):(i=fx(n.hint),o="q--slot-hint"));const r=!0===t.counter||void 0!==n.counter;if(!0===t.hideBottomSpace&&!1===r&&void 0===i)return;const s=k("div",{key:o,class:"q-field__messages col"},i);return k("div",{class:"q-field__bottom row items-start q-field__bottom--"+(!0!==t.hideBottomSpace?"animated":"stale"),onClick:wb},[!0===t.hideBottomSpace?s:k(A,{name:"q-transition--field-message"},(()=>s)),!0===r?k("div",{class:"q-field__counter"},void 0!==n.counter?n.counter():e.computedCounter.value):null])}function B(e,t){return null===t?null:k("div",{key:e,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},t)}let V=!1;return I((()=>{V=!0})),R((()=>{!0===V&&!0===t.autofocus&&u.focus()})),!0===t.autofocus&&l((()=>{u.focus()})),L((()=>{null!==h&&clearTimeout(h)})),Object.assign(u,{focus:F,blur:function(){var t;t=q,qw=qw.filter((e=>e!==t));const i=document.activeElement;null!==i&&e.rootRef.value.contains(i)&&i.blur()}}),function(){const i=void 0===e.getControl&&void 0===n.control?{...e.splitAttrs.attributes.value,"data-autofocus":!0===t.autofocus||void 0,...E.value}:E.value;return k(e.tag.value,{ref:e.rootRef,class:[b.value,o.class],style:o.style,...i},[void 0!==n.before?k("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:wb},n.before()):null,k("div",{class:"q-field__inner relative-position col self-stretch"},[k("div",{ref:e.controlRef,class:x.value,tabindex:-1,...e.controlEvents},G()),!0===y.value?j():null]),void 0!==n.after?k("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:wb},n.after()):null])}}var hk=fb({name:"QField",inheritAttrs:!1,props:{...ak,tag:{type:String,default:"label"}},emits:lk,setup:()=>ck(uk({tagProp:!0}))});function dk(e,t,i,n){const o=[];return e.forEach((e=>{!0===n(e)?o.push(e):t.push({failedPropValidation:i,file:e})})),o}function pk(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Sb(e)}var fk={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},gk=["rejected"];function mk({editable:e,dnd:t,getFileInput:i,addFilesToQueue:n}){const{props:o,emit:r,proxy:l}=T(),u=a(null),c=s((()=>void 0!==o.accept?o.accept.split(",").map((e=>"*"===(e=e.trim())?"*/":(e.endsWith("/*")&&(e=e.slice(0,e.length-1)),e.toUpperCase()))):null)),h=s((()=>parseInt(o.maxFiles,10))),d=s((()=>parseInt(o.maxTotalSize,10)));function p(t){if(e.value)if(t!==Object(t)&&(t={target:null}),!0===t.target?.matches('input[type="file"]'))0===t.clientX&&0===t.clientY&&xb(t);else{const e=i();e!==t.target&&e?.click(t)}}function f(t){e.value&&t&&n(null,t)}function g(e){Sb(e),1==(null!==e.relatedTarget||!0!==hb.is.safari?e.relatedTarget!==u.value:!1===document.elementsFromPoint(e.clientX,e.clientY).includes(u.value))&&(t.value=!1)}function m(e){pk(e);const i=e.dataTransfer.files;0!==i.length&&n(null,i),t.value=!1}return Object.assign(l,{pickFiles:p,addFiles:f}),{pickFiles:p,addFiles:f,onDragover:function(e){pk(e),!0!==t.value&&(t.value=!0)},onDragleave:g,processFiles:function(e,t,i,n){let s=Array.from(t||e.target.files);const a=[],l=()=>{0!==a.length&&r("rejected",a)};if(void 0!==o.accept&&-1===c.value.indexOf("*/")&&(s=dk(s,a,"accept",(e=>c.value.some((t=>e.type.toUpperCase().startsWith(t)||e.name.toUpperCase().endsWith(t))))),0===s.length))return l();if(void 0!==o.maxFileSize){const e=parseInt(o.maxFileSize,10);if(s=dk(s,a,"max-file-size",(t=>t.size<=e)),0===s.length)return l()}if(!0!==o.multiple&&0!==s.length&&(s=[s[0]]),s.forEach((e=>{e.__key=e.webkitRelativePath+e.lastModified+e.name+e.size})),!0===n){const e=i.map((e=>e.__key));s=dk(s,a,"duplicate",(t=>!1===e.includes(t.__key)))}if(0===s.length)return l();if(void 0!==o.maxTotalSize){let e=!0===n?i.reduce(((e,t)=>e+t.size),0):0;if(s=dk(s,a,"max-total-size",(t=>(e+=t.size,e<=d.value))),0===s.length)return l()}if("function"==typeof o.filter){const e=o.filter(s);s=dk(s,a,"filter",(t=>e.includes(t)))}if(void 0!==o.maxFiles){let e=!0===n?i.length:0;if(s=dk(s,a,"max-files",(()=>(e++,e<=h.value))),0===s.length)return l()}return l(),0!==s.length?s:void 0},getDndNode:function(e){if(!0===t.value)return k("div",{ref:u,class:`q-${e}__dnd absolute-full`,onDragenter:pk,onDragover:pk,onDragleave:g,onDrop:m})},maxFilesNumber:h,maxTotalSizeNumber:d}}function vk(e,t){function i(){const t=e.modelValue;try{const e="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(t)===t&&("length"in t?Array.from(t):[t]).forEach((t=>{e.items.add(t)})),{files:e.files}}catch{return{files:void 0}}}return s(!0===t?()=>{if("file"===e.type)return i()}:i)}fb({name:"QFile",inheritAttrs:!1,props:{...sk,...YS,...fk,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...lk,...gk],setup(e,{slots:t,emit:i,attrs:n}){const{proxy:o}=T(),r=uk(),l=a(null),u=a(!1),c=JS(e),{pickFiles:h,onDragover:d,onDragleave:p,processFiles:f,getDndNode:g}=mk({editable:r.editable,dnd:u,getFileInput:I,addFilesToQueue:R}),m=vk(e),v=s((()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[])),y=s((()=>rk(v.value))),_=s((()=>v.value.map((e=>e.name)).join(", "))),b=s((()=>tx(v.value.reduce(((e,t)=>e+t.size),0)))),x=s((()=>({totalSize:b.value,filesNumber:v.value.length,maxFiles:e.maxFiles}))),w=s((()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:c.value,...n,id:r.targetUid.value,disabled:!0!==r.editable.value}))),S=s((()=>"q-file q-field--auto-height"+(!0===u.value?" q-file--dnd":""))),C=s((()=>!0===e.multiple&&!0===e.append));function M(e){const t=v.value.slice();t.splice(e,1),E(t)}function E(t){i("update:modelValue",!0===e.multiple?t:t[0])}function P(e){13===e.keyCode&&wb(e)}function L(e){(13===e.keyCode||32===e.keyCode)&&h(e)}function I(){return l.value}function R(t,i){const n=f(t,i,v.value,C.value),o=I();null!=o&&(o.value=""),void 0!==n&&((!0===e.multiple?e.modelValue&&n.every((e=>v.value.includes(e))):e.modelValue===n[0])||E(!0===C.value?v.value.concat(n):n))}function A(){return[k("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function q(){const t={ref:l,...w.value,...m.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:R};return!0===e.multiple&&(t.multiple=!0),k("input",t)}return Object.assign(r,{fieldClass:S,emitValue:E,hasValue:y,inputRef:l,innerValue:v,floatingLabel:s((()=>!0===y.value||rk(e.displayValue))),computedCounter:s((()=>{if(void 0!==e.counterLabel)return e.counterLabel(x.value);const t=e.maxFiles;return`${v.value.length}${void 0!==t?" / "+t:""} (${b.value})`})),getControlChild:()=>g("file"),getControl:()=>{const i={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return!0===r.editable.value&&Object.assign(i,{onDragover:d,onDragleave:p,onKeydown:P,onKeyup:L}),k("div",i,[q()].concat(function(){if(void 0!==t.file)return 0===v.value.length?A():v.value.map(((e,i)=>t.file({index:i,file:e,ref:this})));if(void 0!==t.selected)return 0===v.value.length?A():t.selected({files:v.value,ref:this});if(!0===e.useChips)return 0===v.value.length?A():v.value.map(((t,i)=>k(PC,{key:"file-"+i,removable:r.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{M(i)}},(()=>k("span",{class:"ellipsis",textContent:t.name})))));const i=void 0!==e.displayValue?e.displayValue:_.value;return 0!==i.length?[k("div",{class:e.inputClass,style:e.inputStyle,textContent:i})]:A()}()))}}),Object.assign(o,{removeAtIndex:M,removeFile:function(e){const t=v.value.indexOf(e);-1!==t&&M(t)},getNativeElement:()=>l.value}),rb(o,"nativeEl",(()=>l.value)),ck(r)}}),fb({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=M(jb,Wb);if(o===Wb)return Wb;const l=a(parseInt(e.heightHint,10)),u=a(!0),c=a(!0===lb.value||!0===o.isContainer.value?0:window.innerHeight),h=s((()=>!0===e.reveal||-1!==o.view.value.indexOf("F")||n.platform.is.ios&&!0===o.isContainer.value)),d=s((()=>!0===o.isContainer.value?o.containerHeight.value:c.value)),p=s((()=>{if(!0!==e.modelValue)return 0;if(!0===h.value)return!0===u.value?l.value:0;const t=o.scroll.value.position+d.value+l.value-o.height.value;return t>0?t:0})),f=s((()=>!0!==e.modelValue||!0===h.value&&!0!==u.value)),g=s((()=>!0===e.modelValue&&!0===f.value&&!0===e.reveal)),m=s((()=>"q-footer q-layout__section--marginal "+(!0===h.value?"fixed":"absolute")+"-bottom"+(!0===e.bordered?" q-footer--bordered":"")+(!0===f.value?" q-footer--hidden":"")+(!0!==e.modelValue?" q-layout--prevent-focus"+(!0!==h.value?" hidden":""):""))),v=s((()=>{const e=o.rows.value.bottom,t={};return"l"===e[0]&&!0===o.left.space&&(t[!0===n.lang.rtl?"right":"left"]=`${o.left.size}px`),"r"===e[2]&&!0===o.right.space&&(t[!0===n.lang.rtl?"left":"right"]=`${o.right.size}px`),t}));function y(e,t){o.update("footer",e,t)}function _(e,t){e.value!==t&&(e.value=t)}function b({height:e}){_(l,e),y("size",e)}function x(e){!0===g.value&&_(u,!0),i("focusin",e)}r((()=>e.modelValue),(e=>{y("space",e),_(u,!0),o.animate()})),r(p,(e=>{y("offset",e)})),r((()=>e.reveal),(t=>{!1===t&&_(u,e.modelValue)})),r(u,(e=>{o.animate(),i("reveal",e)})),r([l,o.scroll,o.height],(function(){if(!0!==e.reveal)return;const{direction:t,position:i,inflectionPoint:n}=o.scroll.value;_(u,"up"===t||i-n<100||o.height.value-d.value-i-l.value<300)})),r((()=>n.screen.height),(e=>{!0!==o.isContainer.value&&_(c,e)}));const w={};return o.instances.footer=w,!0===e.modelValue&&y("size",l.value),y("space",e.modelValue),y("offset",p.value),L((()=>{o.instances.footer===w&&(o.instances.footer=void 0,y("size",0),y("offset",0),y("space",!1))})),()=>{const i=mx(t.default,[k(YC,{debounce:0,onResize:b})]);return!0===e.elevated&&i.push(k("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),k("footer",{class:m.value,style:v.value,onFocusin:x},i)}}}),fb({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:i}){const n=T(),o=a(null);let r=0;const s=[];function u(t){const n="boolean"==typeof t?t:!0!==e.noErrorFocus,o=++r,a=(e,t)=>{i("validation"+(!0===e?"Success":"Error"),t)},l=e=>{const t=e.validate();return"function"==typeof t.then?t.then((t=>({valid:t,comp:e})),(t=>({valid:!1,comp:e,err:t}))):Promise.resolve({valid:t,comp:e})};return(!0===e.greedy?Promise.all(s.map(l)).then((e=>e.filter((e=>!0!==e.valid)))):s.reduce(((e,t)=>e.then((()=>l(t).then((e=>{if(!1===e.valid)return Promise.reject(e)}))))),Promise.resolve()).catch((e=>[e]))).then((e=>{if(void 0===e||0===e.length)return o===r&&a(!0),!0;if(o===r){const{comp:t,err:i}=e[0];if(a(!1,t),!0===n){const t=e.find((({comp:e})=>"function"==typeof e.focus&&!1===Hx(e.$)));void 0!==t&&t.comp.focus()}}return!1}))}function c(){r++,s.forEach((e=>{"function"==typeof e.resetValidation&&e.resetValidation()}))}function h(t){void 0!==t&&Sb(t);const n=r+1;u().then((o=>{n===r&&!0===o&&(void 0!==e.onSubmit?i("submit",t):void 0!==t?.target&&"function"==typeof t.target.submit&&t.target.submit())}))}function d(t){void 0!==t&&Sb(t),i("reset"),P((()=>{c(),!0===e.autofocus&&!0!==e.noResetFocus&&p()}))}function p(){Nw((()=>{null!==o.value&&(o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),(e=>-1!==e.tabIndex)))?.focus({preventScroll:!0})}))}W($b,{bindComponent(e){s.push(e)},unbindComponent(e){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}});let f=!1;return I((()=>{f=!0})),R((()=>{!0===f&&!0===e.autofocus&&p()})),l((()=>{!0===e.autofocus&&p()})),Object.assign(n.proxy,{validate:u,resetValidation:c,submit:h,reset:d,focus:p,getValidationComponents:()=>s}),()=>k("form",{class:"q-form",ref:o,onSubmit:h,onReset:d},fx(t.default))}}),fb({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=M(jb,Wb);if(o===Wb)return Wb;const l=a(parseInt(e.heightHint,10)),u=a(!0),c=s((()=>!0===e.reveal||-1!==o.view.value.indexOf("H")||n.platform.is.ios&&!0===o.isContainer.value)),h=s((()=>{if(!0!==e.modelValue)return 0;if(!0===c.value)return!0===u.value?l.value:0;const t=l.value-o.scroll.value.position;return t>0?t:0})),d=s((()=>!0!==e.modelValue||!0===c.value&&!0!==u.value)),p=s((()=>!0===e.modelValue&&!0===d.value&&!0===e.reveal)),f=s((()=>"q-header q-layout__section--marginal "+(!0===c.value?"fixed":"absolute")+"-top"+(!0===e.bordered?" q-header--bordered":"")+(!0===d.value?" q-header--hidden":"")+(!0!==e.modelValue?" q-layout--prevent-focus":""))),g=s((()=>{const e=o.rows.value.top,t={};return"l"===e[0]&&!0===o.left.space&&(t[!0===n.lang.rtl?"right":"left"]=`${o.left.size}px`),"r"===e[2]&&!0===o.right.space&&(t[!0===n.lang.rtl?"left":"right"]=`${o.right.size}px`),t}));function m(e,t){o.update("header",e,t)}function v(e,t){e.value!==t&&(e.value=t)}function y({height:e}){v(l,e),m("size",e)}function _(e){!0===p.value&&v(u,!0),i("focusin",e)}r((()=>e.modelValue),(e=>{m("space",e),v(u,!0),o.animate()})),r(h,(e=>{m("offset",e)})),r((()=>e.reveal),(t=>{!1===t&&v(u,e.modelValue)})),r(u,(e=>{o.animate(),i("reveal",e)})),r(o.scroll,(t=>{!0===e.reveal&&v(u,"up"===t.direction||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)}));const b={};return o.instances.header=b,!0===e.modelValue&&m("size",l.value),m("space",e.modelValue),m("offset",h.value),L((()=>{o.instances.header===b&&(o.instances.header=void 0,m("size",0),m("offset",0),m("space",!1))})),()=>{const i=gx(t.default,[]);return!0===e.elevated&&i.push(k("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),i.push(k(YC,{debounce:0,onResize:y})),k("header",{class:f.value,style:g.value,onFocusin:_},i)}}});var yk={ratio:[String,Number]};function _k(e,t){return s((()=>{const i=Number(e.ratio||(void 0!==t?t.value:void 0));return!0!==isNaN(i)&&i>0?{paddingBottom:100/i+"%"}:null}))}fb({name:"QImg",props:{...yk,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:1.7778},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:i}){const n=a(e.initialRatio),o=_k(e,n),u=T(),{registerTimeout:c,removeTimeout:h}=Qw(),{registerTimeout:d,removeTimeout:p}=Qw(),f=s((()=>void 0!==e.placeholderSrc?{src:e.placeholderSrc}:null)),g=s((()=>void 0!==e.errorSrc?{src:e.errorSrc,__qerror:!0}:null)),m=[a(null),a(f.value)],v=a(0),y=a(!1),_=a(!1),b=s((()=>`q-img q-img--${!0===e.noNativeMenu?"no-":""}menu`)),x=s((()=>({width:e.width,height:e.height}))),w=s((()=>`q-img__image ${void 0!==e.imgClass?e.imgClass+" ":""}q-img__image--with${!0===e.noTransition?"out":""}-transition q-img__image--`)),S=s((()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position})));function C(){p(),y.value=!1}function M({target:e}){!1===Hx(u)&&(h(),n.value=0===e.naturalHeight?.5:e.naturalWidth/e.naturalHeight,E(e,1))}function E(e,t){var n;1e3===t||!0===Hx(u)||(!0===e.complete?(n=e,!0!==Hx(u)&&(v.value=1^v.value,m[v.value].value=null,C(),"true"!==n.getAttribute("__qerror")&&(_.value=!1),i("load",n.currentSrc||n.src))):c((()=>{E(e,t+1)}),50))}function P(e){h(),C(),_.value=!0,m[v.value].value=g.value,m[1^v.value].value=f.value,i("error",e)}function L(t){const i=m[t].value,n={key:"img_"+t,class:w.value,style:S.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...i};return v.value===t?Object.assign(n,{class:n.class+"current",onLoad:M,onError:P}):n.class+="loaded",k("div",{class:"q-img__container absolute-full",key:"img"+t},k("img",n))}function I(){return!1===y.value?k("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},fx(t[!0===_.value?"error":"default"])):k("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},void 0!==t.loading?t.loading():!0===e.noSpinner?void 0:[k(iw,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){r((()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null),(t=>{h(),_.value=!1,null===t?(C(),m[1^v.value].value=f.value):(p(),0!==e.loadingShowDelay?d((()=>{y.value=!0}),e.loadingShowDelay):y.value=!0),m[v.value].value=t}),{immediate:!0})};!0===lb.value?l(t):t()}return()=>{const t=[];return null!==o.value&&t.push(k("div",{key:"filler",style:o.value})),null!==m[0].value&&t.push(L(0)),null!==m[1].value&&t.push(L(1)),t.push(k(A,{name:"q-transition--fade"},I)),k("div",{key:"main",class:b.value,style:x.value,role:"img","aria-label":e.alt},t)}}});var{passive:bk}=vb;fb({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:eS,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:i}){const n=a(!1),o=a(!0),u=a(null),c=a(null);let h,d,p=e.initialIndex;const f=s((()=>"q-infinite-scroll__loading"+(!0===n.value?"":" invisible")));function g(){if(!0===e.disable||!0===n.value||!1===o.value)return;const t=nS(h),i=oS(h),r=ow(h);!1===e.reverse?Math.round(i+r+e.offset)>=Math.round(t)&&m():Math.round(i)<=e.offset&&m()}function m(){if(!0===e.disable||!0===n.value||!1===o.value)return;p++,n.value=!0;const t=nS(h);i("load",p,(i=>{!0===o.value&&(n.value=!1,P((()=>{if(!0===e.reverse){const e=nS(h),i=oS(h);cS(h,i+(e-t))}!0===i?y():u.value&&u.value.closest("body")&&d()})))}))}function v(){!1===o.value&&(o.value=!0,h.addEventListener("scroll",d,bk)),g()}function y(){!0===o.value&&(o.value=!1,n.value=!1,h.removeEventListener("scroll",d,bk),d?.cancel?.())}function _(){if(h&&!0===o.value&&h.removeEventListener("scroll",d,bk),h=iS(u.value,e.scrollTarget),!0===o.value){if(h.addEventListener("scroll",d,bk),!0===e.reverse){const e=nS(h),t=ow(h);cS(h,e-t)}g()}}function b(e){e=parseInt(e,10);const t=d;d=e<=0?g:kb(g,!0===isNaN(e)?100:e),h&&!0===o.value&&(void 0!==t&&h.removeEventListener("scroll",t,bk),h.addEventListener("scroll",d,bk))}function x(e){if(!0===w.value){if(null===c.value)return void(!0!==e&&P((()=>{x(!0)})));const t=(!0===n.value?"un":"")+"pauseAnimations";Array.from(c.value.getElementsByTagName("svg")).forEach((e=>{e[t]()}))}}const w=s((()=>!0!==e.disable&&!0===o.value));r([n,w],(()=>{x()})),r((()=>e.disable),(e=>{!0===e?y():v()})),r((()=>e.reverse),(()=>{!1===n.value&&!0===o.value&&g()})),r((()=>e.scrollTarget),_),r((()=>e.debounce),b);let S=!1;R((()=>{!1!==S&&h&&cS(h,S)})),I((()=>{S=!!h&&oS(h)})),L((()=>{!0===o.value&&h.removeEventListener("scroll",d,bk)})),l((()=>{b(e.debounce),_(),!1===n.value&&x()}));const C=T();return Object.assign(C.proxy,{poll:()=>{d?.()},trigger:m,stop:y,reset:function(){p=0},resume:v,setIndex:function(e){p=e},updateScrollTarget:_}),()=>{const i=gx(t.default,[]);return!0===w.value&&i[!1===e.reverse?"push":"unshift"](k("div",{ref:c,class:f.value},fx(t.loading))),k("div",{class:"q-infinite-scroll",ref:u},i)}}}),fb({name:"QInnerLoading",props:{...Fx,...Kw,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const i=T(),n=Ox(e,i.proxy.$q),{transitionProps:o,transitionStyle:r}=Yw(e),a=s((()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(!0===n.value?" q-inner-loading--dark":""))),l=s((()=>"q-inner-loading__label"+(void 0!==e.labelClass?` ${e.labelClass}`:"")));function u(){return!0===e.showing?k("div",{class:a.value,style:r.value},void 0!==t.default?t.default():function(){const t=[k(iw,{size:e.size,color:e.color})];return void 0!==e.label&&t.push(k("div",{class:l.value,style:e.labelStyle},[e.label])),t}()):null}return()=>k(A,o.value,u)}});var xk={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},{tokenMap:wk,tokenKeys:Sk}=Ck({"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}});function Ck(e){const t=Object.keys(e),i={};return t.forEach((t=>{const n=e[t];i[t]={...n,regex:new RegExp(n.pattern)}})),{tokenMap:i,tokenKeys:t}}function Mk(e){return new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+e.join("")+"])|(.)","g")}var Ek=/[.*+?^${}()|[\]\\]/g,kk=Mk(Sk),Tk="",Pk={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean,maskTokens:Object};var Lk=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Ik=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Rk=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Ak=/[a-z0-9_ -]$/i;function qk(e){return function(t){if("compositionend"===t.type||"change"===t.type){if(!0!==t.target.qComposing)return;t.target.qComposing=!1,e(t)}else"compositionupdate"===t.type&&!0!==t.target.qComposing&&"string"==typeof t.data&&1==(!0===hb.is.firefox?!1===Ak.test(t.data):!0===Lk.test(t.data)||!0===Ik.test(t.data)||!0===Rk.test(t.data))&&(t.target.qComposing=!0)}}var Fk=fb({name:"QInput",inheritAttrs:!1,props:{...ak,...Pk,...YS,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...lk,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:i}){const{proxy:n}=T(),{$q:o}=n,u={};let c,h,d,p=NaN,f=null;const g=a(null),m=JS(e),{innerValue:v,hasMask:y,moveCursorForPaste:_,updateMaskValue:b,onMaskedKeydown:x,onMaskedClick:w}=function(e,t,i,n){let o,l,u,c,h,d;const p=s((()=>{if(void 0===e.maskTokens||null===e.maskTokens)return{tokenMap:wk,tokenRegexMask:kk};const{tokenMap:t}=Ck(e.maskTokens),i={...wk,...t};return{tokenMap:i,tokenRegexMask:Mk(Object.keys(i))}})),f=a(null),g=a(function(){if(v(),!0===f.value){const t=b(x(e.modelValue));return!1!==e.fillMask?w(t):t}return e.modelValue}());function m(e){if(e<o.length)return o.slice(-e);let t="",i=o;const n=i.indexOf(Tk);if(-1!==n){for(let n=e-i.length;n>0;n--)t+=Tk;i=i.slice(0,n)+t+i.slice(n)}return i}function v(){if(f.value=void 0!==e.mask&&0!==e.mask.length&&(!0===e.autogrow||["textarea","text","search","url","tel","password"].includes(e.type)),!1===f.value)return c=void 0,o="",void(l="");const t=void 0===xk[e.mask]?e.mask:xk[e.mask],i="string"==typeof e.fillMask&&0!==e.fillMask.length?e.fillMask.slice(0,1):"_",n=i.replace(Ek,"\\$&"),r=[],s=[],a=[];let h=!0===e.reverseFillMask,d="",g="";t.replace(p.value.tokenRegexMask,((e,t,i,n,o)=>{if(void 0!==n){const e=p.value.tokenMap[n];a.push(e),g=e.negate,!0===h&&(s.push("(?:"+g+"+)?("+e.pattern+"+)?(?:"+g+"+)?("+e.pattern+"+)?"),h=!1),s.push("(?:"+g+"+)?("+e.pattern+")?")}else if(void 0!==i)d="\\"+("\\"===i?"":i),a.push(i),r.push("([^"+d+"]+)?"+d+"?");else{const e=void 0!==t?t:o;d="\\"===e?"\\\\\\\\":e.replace(Ek,"\\\\$&"),a.push(e),r.push("([^"+d+"]+)?"+d+"?")}}));const m=new RegExp("^"+r.join("")+"("+(""===d?".":"[^"+d+"]")+"+)?"+(""===d?"":"["+d+"]*")+"$"),v=s.length-1,y=s.map(((t,i)=>0===i&&!0===e.reverseFillMask?new RegExp("^"+n+"*"+t):i===v?new RegExp("^"+t+"("+(""===g?".":g)+"+)?"+(!0===e.reverseFillMask?"$":n+"*")):new RegExp("^"+t)));u=a,c=t=>{const i=m.exec(!0===e.reverseFillMask?t:t.slice(0,a.length+1));null!==i&&(t=i.slice(1).join(""));const n=[],o=y.length;for(let e=0,r=t;e<o;e++){const t=y[e].exec(r);if(null===t)break;r=r.slice(t.shift().length),n.push(...t)}return 0!==n.length?n.join(""):t},o=a.map((e=>"string"==typeof e?e:Tk)).join(""),l=o.split(Tk).join(i)}function y(t,r,s){const a=n.value,u=a.selectionEnd,c=a.value.length-u,d=x(t);!0===r&&v();const p=b(d,r),f=!1!==e.fillMask?w(p):p,m=g.value!==f;a.value!==f&&(a.value=f),!0===m&&(g.value=f),document.activeElement===a&&P((()=>{if(f!==l)if("insertFromPaste"!==s||!0===e.reverseFillMask)if(-1===["deleteContentBackward","deleteContentForward"].indexOf(s))if(!0===e.reverseFillMask)if(!0===m){const e=Math.max(0,f.length-(f===l?0:Math.min(p.length,c+1)));1===e&&1===u?a.setSelectionRange(e,e,"forward"):_.rightReverse(a,e)}else{const e=f.length-c;a.setSelectionRange(e,e,"backward")}else if(!0===m){const e=Math.max(0,o.indexOf(Tk),Math.min(p.length,u)-1);_.right(a,e)}else{const e=u-1;_.right(a,e)}else{const t=!0===e.reverseFillMask?0===u?f.length>p.length?1:0:Math.max(0,f.length-(f===l?0:Math.min(p.length,c)+1))+1:u;a.setSelectionRange(t,t,"forward")}else{const e=a.selectionEnd;let t=u-1;for(let i=h;i<=t&&i<e;i++)o[i]!==Tk&&t++;_.right(a,t)}else{const t=!0===e.reverseFillMask?l.length:0;a.setSelectionRange(t,t,"forward")}}));const y=!0===e.unmaskedValue?x(f):f;String(e.modelValue)!==y&&(null!==e.modelValue||""!==y)&&i(y,!0)}r((()=>e.type+e.autogrow),v),r((()=>e.mask),(i=>{if(void 0!==i)y(g.value,!0);else{const i=x(g.value);v(),e.modelValue!==i&&t("update:modelValue",i)}})),r((()=>e.fillMask+e.reverseFillMask),(()=>{!0===f.value&&y(g.value,!0)})),r((()=>e.unmaskedValue),(()=>{!0===f.value&&y(g.value)}));const _={left(e,t){const i=-1===o.slice(t-1).indexOf(Tk);let n=Math.max(0,t-1);for(;n>=0;n--)if(o[n]===Tk){t=n,!0===i&&t++;break}if(n<0&&void 0!==o[t]&&o[t]!==Tk)return _.right(e,0);t>=0&&e.setSelectionRange(t,t,"backward")},right(e,t){const i=e.value.length;let n=Math.min(i,t+1);for(;n<=i;n++){if(o[n]===Tk){t=n;break}o[n-1]===Tk&&(t=n)}if(n>i&&void 0!==o[t-1]&&o[t-1]!==Tk)return _.left(e,i);e.setSelectionRange(t,t,"forward")},leftReverse(e,t){const i=m(e.value.length);let n=Math.max(0,t-1);for(;n>=0;n--){if(i[n-1]===Tk){t=n;break}if(i[n]===Tk&&(t=n,0===n))break}if(n<0&&void 0!==i[t]&&i[t]!==Tk)return _.rightReverse(e,0);t>=0&&e.setSelectionRange(t,t,"backward")},rightReverse(e,t){const i=e.value.length,n=m(i),o=-1===n.slice(0,t+1).indexOf(Tk);let r=Math.min(i,t+1);for(;r<=i;r++)if(n[r-1]===Tk){(t=r)>0&&!0===o&&t--;break}if(r>i&&void 0!==n[t-1]&&n[t-1]!==Tk)return _.leftReverse(e,i);e.setSelectionRange(t,t,"forward")}};function b(t,i){if(null==t||""===t)return"";if(!0===e.reverseFillMask)return function(e,t){const i=u,n=o.indexOf(Tk);let r=e.length-1,s="";for(let o=i.length-1;o>=0&&-1!==r;o--){const a=i[o];let l=e[r];if("string"==typeof a)s=a+s,!0===t&&l===a&&r--;else{if(void 0===l||!a.regex.test(l))return s;do{s=(void 0!==a.transform?a.transform(l):l)+s,r--,l=e[r]}while(n===o&&void 0!==l&&a.regex.test(l))}}return s}(t,i);const n=u;let r=0,s="";for(let e=0;e<n.length;e++){const o=t[r],a=n[e];if("string"==typeof a)s+=a,!0===i&&o===a&&r++;else{if(void 0===o||!a.regex.test(o))return s;s+=void 0!==a.transform?a.transform(o):o,r++}}return s}function x(e){return"string"!=typeof e||void 0===c?"number"==typeof e?c(""+e):e:c(e)}function w(t){return l.length-t.length<=0?t:!0===e.reverseFillMask&&0!==t.length?l.slice(0,-t.length)+t:t+l.slice(t.length)}return{innerValue:g,hasMask:f,moveCursorForPaste:function(e,t,i){const n=b(x(e.value));t=Math.max(0,o.indexOf(Tk),Math.min(n.length,t)),h=t,e.setSelectionRange(t,i,"forward")},updateMaskValue:y,onMaskedKeydown:function(i){if(t("keydown",i),!0===Ib(i)||!0===i.altKey)return;const o=n.value,r=o.selectionStart,s=o.selectionEnd;if(i.shiftKey||(d=void 0),37===i.keyCode||39===i.keyCode){i.shiftKey&&void 0===d&&(d="forward"===o.selectionDirection?r:s);const t=_[(39===i.keyCode?"right":"left")+(!0===e.reverseFillMask?"Reverse":"")];if(i.preventDefault(),t(o,d===r?s:r),i.shiftKey){const e=o.selectionStart;o.setSelectionRange(Math.min(d,e),Math.max(d,e),"forward")}}else 8===i.keyCode&&!0!==e.reverseFillMask&&r===s?(_.left(o,r),o.setSelectionRange(o.selectionStart,s,"backward")):46===i.keyCode&&!0===e.reverseFillMask&&r===s&&(_.rightReverse(o,s),o.setSelectionRange(r,o.selectionEnd,"forward"))},onMaskedClick:function(e){t("click",e),d=void 0}}}(e,t,N,g),S=vk(e,!0),C=s((()=>rk(v.value))),M=qk(O),E=uk({changeEvent:!0}),I=s((()=>"textarea"===e.type||!0===e.autogrow)),R=s((()=>!0===I.value||["text","search","url","tel","password"].includes(e.type))),A=s((()=>{const t={...E.splitAttrs.listeners.value,onInput:O,onPaste:F,onChange:G,onBlur:j,onFocus:xb};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=M,!0===y.value&&(t.onKeydown=x,t.onClick=w),!0===e.autogrow&&(t.onAnimationend=z),t})),q=s((()=>{const t={tabindex:0,"data-autofocus":!0===e.autofocus||void 0,rows:"textarea"===e.type?6:void 0,"aria-label":e.label,name:m.value,...E.splitAttrs.attributes.value,id:E.targetUid.value,maxlength:e.maxlength,disabled:!0===e.disable,readonly:!0===e.readonly};return!1===I.value&&(t.type=e.type),!0===e.autogrow&&(t.rows=1),t}));function F(i){if(!0===y.value&&!0!==e.reverseFillMask){const e=i.target;_(e,e.selectionStart,e.selectionEnd)}t("paste",i)}function O(i){if(!i||!i.target)return;if("file"===e.type)return void t("update:modelValue",i.target.files);const n=i.target.value;if(!0!==i.target.qComposing){if(!0===y.value)b(n,!1,i.inputType);else if(N(n),!0===R.value&&i.target===document.activeElement){const{selectionStart:e,selectionEnd:t}=i.target;void 0!==e&&void 0!==t&&P((()=>{i.target===document.activeElement&&0===n.indexOf(i.target.value)&&i.target.setSelectionRange(e,t)}))}!0===e.autogrow&&D()}else u.value=n}function z(e){t("animationend",e),D()}function N(i,n){d=()=>{f=null,"number"!==e.type&&!0===u.hasOwnProperty("value")&&delete u.value,e.modelValue!==i&&p!==i&&(p=i,!0===n&&(h=!0),t("update:modelValue",i),P((()=>{p===i&&(p=NaN)}))),d=void 0},"number"===e.type&&(c=!0,u.value=i),void 0!==e.debounce?(null!==f&&clearTimeout(f),u.value=i,f=setTimeout(d,e.debounce)):d()}function D(){requestAnimationFrame((()=>{const e=g.value;if(null!==e){const t=e.parentNode.style,{scrollTop:i}=e,{overflowY:n,maxHeight:r}=!0===o.platform.is.firefox?{}:window.getComputedStyle(e),s=void 0!==n&&"scroll"!==n;!0===s&&(e.style.overflowY="hidden"),t.marginBottom=e.scrollHeight-1+"px",e.style.height="1px",e.style.height=e.scrollHeight+"px",!0===s&&(e.style.overflowY=parseInt(r,10)<e.scrollHeight?"auto":"hidden"),t.marginBottom="",e.scrollTop=i}}))}function G(e){M(e),null!==f&&(clearTimeout(f),f=null),d?.(),t("change",e.target.value)}function j(t){void 0!==t&&xb(t),null!==f&&(clearTimeout(f),f=null),d?.(),c=!1,h=!1,delete u.value,"file"!==e.type&&setTimeout((()=>{null!==g.value&&(g.value.value=void 0!==v.value?v.value:"")}))}function B(){return!0===u.hasOwnProperty("value")?u.value:void 0!==v.value?v.value:""}r((()=>e.type),(()=>{g.value&&(g.value.value=e.modelValue)})),r((()=>e.modelValue),(t=>{if(!0===y.value){if(!0===h&&(h=!1,String(t)===p))return;b(t)}else v.value!==t&&(v.value=t,"number"===e.type&&!0===u.hasOwnProperty("value")&&(!0===c?c=!1:delete u.value));!0===e.autogrow&&P(D)})),r((()=>e.autogrow),(e=>{!0===e?P(D):null!==g.value&&i.rows>0&&(g.value.style.height="auto")})),r((()=>e.dense),(()=>{!0===e.autogrow&&P(D)})),L((()=>{j()})),l((()=>{!0===e.autogrow&&D()})),Object.assign(E,{innerValue:v,fieldClass:s((()=>"q-"+(!0===I.value?"textarea":"input")+(!0===e.autogrow?" q-textarea--autogrow":""))),hasShadow:s((()=>"file"!==e.type&&"string"==typeof e.shadowText&&0!==e.shadowText.length)),inputRef:g,emitValue:N,hasValue:C,floatingLabel:s((()=>!0===C.value&&("number"!==e.type||!1===isNaN(v.value))||rk(e.displayValue))),getControl:()=>k(!0===I.value?"textarea":"input",{ref:g,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...q.value,...A.value,..."file"!==e.type?{value:B()}:S.value}),getShadowControl:()=>k("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(!0===I.value?"":" text-no-wrap")},[k("span",{class:"invisible"},B()),k("span",e.shadowText)])});const V=ck(E);return Object.assign(n,{focus:function(){Nw((()=>{const e=document.activeElement;null!==g.value&&g.value!==e&&(null===e||e.id!==E.targetUid.value)&&g.value.focus({preventScroll:!0})}))},select:function(){g.value?.select()},getNativeElement:()=>g.value}),rb(n,"nativeEl",(()=>g.value)),V}}),Ok={threshold:0,root:null,rootMargin:"0px"};function zk(e,t,i){let n,o,r;"function"==typeof i?(n=i,o=Ok,r=void 0===t.cfg):(n=i.handler,o=Object.assign({},Ok,i.cfg),r=void 0===t.cfg||!1===Kb(t.cfg,o)),t.handler!==n&&(t.handler=n),!0===r&&(t.cfg=o,t.observer?.unobserve(e),t.observer=new IntersectionObserver((([i])=>{if("function"==typeof t.handler){if(null===i.rootBounds&&!0===document.body.contains(e))return t.observer.unobserve(e),void t.observer.observe(e);(!1===t.handler(i,t.observer)||!0===t.once&&!0===i.isIntersecting)&&Nk(e)}}),o),t.observer.observe(e))}function Nk(e){const t=e.__qvisible;void 0!==t&&(t.observer?.unobserve(e),delete e.__qvisible)}var Dk=gb({name:"intersection",mounted(e,{modifiers:t,value:i}){const n={once:!0===t.once};zk(e,n,i),e.__qvisible=n},updated(e,t){const i=e.__qvisible;void 0!==i&&zk(e,i,t.value)},beforeUnmount:Nk});fb({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:i}){const n=a(!0===lb.value&&e.ssrPrerender),o=s((()=>void 0!==e.root||void 0!==e.margin||void 0!==e.threshold?{handler:c,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:c)),r=s((()=>!0!==e.disable&&(!0!==lb.value||!0!==e.once||!0!==e.ssrPrerender))),l=s((()=>[[Dk,o.value,void 0,{once:e.once}]])),u=s((()=>`--q-transition-duration: ${e.transitionDuration}ms`));function c(t){n.value!==t.isIntersecting&&(n.value=t.isIntersecting,void 0!==e.onVisibility&&i("visibility",n.value))}function h(){return!0===n.value?[k("div",{key:"content",style:u.value},fx(t.default))]:void 0!==t.hidden?[k("div",{key:"hidden",style:u.value},t.hidden())]:void 0}return()=>{const t=e.transition?[k(A,{name:"q-transition--"+e.transition},h)]:h();return yx(e.tag,{class:"q-intersection"},t,"main",r.value,(()=>l.value))}}});var Gk=["ul","ol"],jk=fb({name:"QList",props:{...Fx,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const i=T(),n=Ox(e,i.proxy.$q),o=s((()=>Gk.includes(e.tag)?null:"list")),r=s((()=>"q-list"+(!0===e.bordered?" q-list--bordered":"")+(!0===e.dense?" q-list--dense":"")+(!0===e.separator?" q-list--separator":"")+(!0===n.value?" q-list--dark":"")+(!0===e.padding?" q-list--padding":"")));return()=>k(e.tag,{class:r.value,role:o.value},fx(t.default))}}),Bk=[34,37,40,33,39,38],Vk=Object.keys(LC);fb({name:"QKnob",props:{...YS,...LC,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,l=a(e.modelValue),u=a(!1),c=s((()=>!0===isNaN(e.innerMin)||e.innerMin<e.min?e.min:e.innerMin)),h=s((()=>!0===isNaN(e.innerMax)||e.innerMax>e.max?e.max:e.innerMax));let d;function p(){l.value=null===e.modelValue?c.value:ix(e.modelValue,c.value,h.value),R(!0)}r((()=>`${e.modelValue}|${c.value}|${h.value}`),p),p();const f=s((()=>!1===e.disable&&!1===e.readonly)),g=s((()=>"q-knob non-selectable"+(!0===f.value?" q-knob--editable":!0===e.disable?" disabled":""))),m=s((()=>(String(e.step).trim().split(".")[1]||"").length)),v=s((()=>0===e.step?1:e.step)),y=s((()=>!0===e.instantFeedback||!0===u.value)),_=!0===o.platform.is.mobile?s((()=>!0===f.value?{onClick:E}:{})):s((()=>!0===f.value?{onMousedown:M,onClick:E,onKeydown:P,onKeyup:I}:{})),b=s((()=>!0===f.value?{tabindex:e.tabindex}:{["aria-"+(!0===e.disable?"disabled":"readonly")]:"true"})),x=s((()=>{const t={};return Vk.forEach((i=>{t[i]=e[i]})),t}));function w(e){e.isFinal?(L(e.evt,!0),u.value=!1):(e.isFirst&&(C(),u.value=!0),L(e.evt))}const S=s((()=>[[OC,w,void 0,{prevent:!0,stop:!0,mouse:!0}]]));function C(){const{top:e,left:t,width:i,height:o}=n.$el.getBoundingClientRect();d={top:e+o/2,left:t+i/2}}function M(e){C(),L(e)}function E(e){C(),L(e,!0)}function P(e){if(!1===Bk.includes(e.keyCode))return;Sb(e);const t=([34,33].includes(e.keyCode)?10:1)*v.value,i=[34,37,40].includes(e.keyCode)?-t:t;l.value=ix(parseFloat((l.value+i).toFixed(m.value)),c.value,h.value),R()}function L(t,n){const r=bb(t),s=Math.abs(r.top-d.top),a=Math.sqrt(s**2+Math.abs(r.left-d.left)**2);let u=Math.asin(s/a)*(180/Math.PI);u=r.top<d.top?d.left<r.left?90-u:270+u:d.left<r.left?u+90:270-u,!0===o.lang.rtl?u=nx(-u-e.angle,0,360):e.angle&&(u=nx(u-e.angle,0,360)),!0===e.reverse&&(u=360-u);let p=e.min+u/360*(e.max-e.min);if(0!==v.value){const e=p%v.value;p=p-e+(Math.abs(e)>=v.value/2?(e<0?-1:1)*v.value:0),p=parseFloat(p.toFixed(m.value))}p=ix(p,c.value,h.value),i("dragValue",p),l.value!==p&&(l.value=p),R(n)}function I(e){Bk.includes(e.keyCode)&&R(!0)}function R(t){e.modelValue!==l.value&&i("update:modelValue",l.value),!0===t&&i("change",l.value)}const A=ZS(e);function q(){return k("input",A.value)}return()=>{const i={class:g.value,role:"slider","aria-valuemin":c.value,"aria-valuemax":h.value,"aria-valuenow":e.modelValue,...b.value,...x.value,value:l.value,instantFeedback:y.value,..._.value},n={default:t.default};return!0===f.value&&void 0!==e.name&&(n.internal=q),yx(AC,i,n,"knob",f.value,(()=>S.value))}}});var{passive:$k}=vb,Hk=["both","horizontal","vertical"],Uk=fb({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Hk.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:eS},emits:["scroll"],setup(e,{emit:t}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n,o,s=null;function a(){s?.();const o=Math.max(0,oS(n)),r=rS(n),a={top:o-i.position.top,left:r-i.position.left};if("vertical"===e.axis&&0===a.top||"horizontal"===e.axis&&0===a.left)return;const l=Math.abs(a.top)>=Math.abs(a.left)?a.top<0?"up":"down":a.left<0?"left":"right";i.position={top:o,left:r},i.directionChanged=i.direction!==l,i.delta=a,!0===i.directionChanged&&(i.direction=l,i.inflectionPoint=i.position),t("scroll",{...i})}function u(){n=iS(o,e.scrollTarget),n.addEventListener("scroll",h,$k),h(!0)}function c(){void 0!==n&&(n.removeEventListener("scroll",h,$k),n=void 0)}function h(t){if(!0===t||0===e.debounce||"0"===e.debounce)a();else if(null===s){const[t,i]=e.debounce?[setTimeout(a,e.debounce),clearTimeout]:[requestAnimationFrame(a),cancelAnimationFrame];s=()=>{i(t),s=null}}}r((()=>e.scrollTarget),(()=>{c(),u()}));const{proxy:d}=T();return r((()=>d.$q.lang.rtl),a),l((()=>{o=d.$el.parentNode,u()})),L((()=>{s?.(),c()})),Object.assign(d,{trigger:h,getPosition:()=>i}),yb}});fb({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=a(null),l=a(n.screen.height),u=a(!0===e.container?0:n.screen.width),c=a({position:0,direction:"down",inflectionPoint:0}),h=a(0),d=a(!0===lb.value?0:dS()),p=s((()=>"q-layout q-layout--"+(!0===e.container?"containerized":"standard"))),f=s((()=>!1===e.container?{minHeight:n.screen.height+"px"}:null)),g=s((()=>0!==d.value?{[!0===n.lang.rtl?"left":"right"]:`${d.value}px`}:null)),m=s((()=>0!==d.value?{[!0===n.lang.rtl?"right":"left"]:0,[!0===n.lang.rtl?"left":"right"]:`-${d.value}px`,width:`calc(100% + ${d.value}px)`}:null));function v(t){if(!0===e.container||!0!==document.qScrollPrevented){const n={position:t.position.top,direction:t.direction,directionChanged:t.directionChanged,inflectionPoint:t.inflectionPoint.top,delta:t.delta.top};c.value=n,void 0!==e.onScroll&&i("scroll",n)}}function y(t){const{height:n,width:o}=t;let r=!1;l.value!==n&&(r=!0,l.value=n,void 0!==e.onScrollHeight&&i("scrollHeight",n),x()),u.value!==o&&(r=!0,u.value=o),!0===r&&void 0!==e.onResize&&i("resize",t)}function b({height:e}){h.value!==e&&(h.value=e,x())}function x(){if(!0===e.container){const e=l.value>h.value?dS():0;d.value!==e&&(d.value=e)}}let w=null;const S={instances:{},view:s((()=>e.view)),isContainer:s((()=>e.container)),rootRef:o,height:l,containerHeight:h,scrollbarWidth:d,totalWidth:s((()=>u.value+d.value)),rows:s((()=>{const t=e.view.toLowerCase().split(" ");return{top:t[0].split(""),middle:t[1].split(""),bottom:t[2].split("")}})),header:_({size:0,offset:0,space:!1}),right:_({size:300,offset:0,space:!1}),footer:_({size:0,offset:0,space:!1}),left:_({size:300,offset:0,space:!1}),scroll:c,animate(){null!==w?clearTimeout(w):document.body.classList.add("q-body--layout-animate"),w=setTimeout((()=>{w=null,document.body.classList.remove("q-body--layout-animate")}),155)},update(e,t,i){S[e][t]=i}};if(W(jb,S),dS()>0){let t=function(){s=null,a.classList.remove("hide-scrollbar")},i=function(){if(null===s){if(a.scrollHeight>n.screen.height)return;a.classList.add("hide-scrollbar")}else clearTimeout(s);s=setTimeout(t,300)},o=function(e){null!==s&&"remove"===e&&(clearTimeout(s),t()),window[`${e}EventListener`]("resize",i)},s=null;const a=document.body;r((()=>!0!==e.container?"add":"remove"),o),!0!==e.container&&o("add"),q((()=>{o("remove")}))}return()=>{const i=mx(t.default,[k(Uk,{onScroll:v}),k(YC,{onResize:y})]),n=k("div",{class:p.value,style:f.value,ref:!0===e.container?void 0:o,tabindex:-1},i);return!0===e.container?k("div",{class:"q-layout-container overflow-hidden",ref:o},[k(YC,{onResize:b}),k("div",{class:"absolute-full",style:g.value},[k("div",{class:"scroll",style:m.value},[n])])]):n}}});var Wk=["horizontal","vertical","cell","none"],Xk=fb({name:"QMarkupTable",props:{...Fx,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Wk.includes(e)}},setup(e,{slots:t}){const i=T(),n=Ox(e,i.proxy.$q),o=s((()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(!0===n.value?" q-table--dark q-table__card--dark q-dark":"")+(!0===e.dense?" q-table--dense":"")+(!0===e.flat?" q-table--flat":"")+(!0===e.bordered?" q-table--bordered":"")+(!0===e.square?" q-table--square":"")+(!1===e.wrapCells?" q-table--no-wrap":"")));return()=>k("div",{class:o.value},[k("table",{class:"q-table"},fx(t.default))])}});fb({name:"QNoSsr",props:{tag:{type:String,default:"div"},placeholder:String},setup(e,{slots:t}){const{isHydrated:i}=UC();return()=>{if(!0===i.value){const i=fx(t.default);return void 0===i?i:i.length>1?k(e.tag,{},i):i[0]}const n={class:"q-no-ssr-placeholder"},o=fx(t.placeholder);return void 0!==o?o.length>1?k(e.tag,n,o):o[0]:void 0!==e.placeholder?k(e.tag,n,e.placeholder):void 0}}});var Kk=fb({name:"QRadio",props:{...Fx,...dx,...YS,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),o=Ox(e,n.$q),r=px(e,SC),l=a(null),{refocusTargetEl:u,refocusTarget:c}=wC(e,l),h=s((()=>H(e.modelValue)===H(e.val))),d=s((()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(!0===e.disable?" disabled":"")+(!0===o.value?" q-radio--dark":"")+(!0===e.dense?" q-radio--dense":"")+(!0===e.leftLabel?" reverse":""))),p=s((()=>{const t=void 0===e.color||!0!==e.keepColor&&!0!==h.value?"":` text-${e.color}`;return`q-radio__inner relative-position q-radio__inner--${!0===h.value?"truthy":"falsy"}${t}`})),f=s((()=>(!0===h.value?e.checkedIcon:e.uncheckedIcon)||null)),g=s((()=>!0===e.disable?-1:e.tabindex||0)),m=QS(s((()=>{const t={type:"radio"};return void 0!==e.name&&Object.assign(t,{".checked":!0===h.value,"^checked":!0===h.value?"checked":void 0,name:e.name,value:e.val}),t})));function v(t){void 0!==t&&(Sb(t),c(t)),!0!==e.disable&&!0!==h.value&&i("update:modelValue",e.val,t)}function y(e){(13===e.keyCode||32===e.keyCode)&&Sb(e)}function _(e){(13===e.keyCode||32===e.keyCode)&&v(e)}Object.assign(n,{set:v});const b=k("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[k("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),k("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);return()=>{const i=null!==f.value?[k("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[k(Ax,{class:"q-radio__icon",name:f.value})])]:[b];!0!==e.disable&&m(i,"unshift"," q-radio__native q-ma-none q-pa-none");const n=[k("div",{class:p.value,style:r.value,"aria-hidden":"true"},i)];null!==u.value&&n.push(u.value);const o=void 0!==e.label?mx(t.default,[e.label]):fx(t.default);return void 0!==o&&n.push(k("div",{class:"q-radio__label q-anchor--skip"},o)),k("div",{ref:l,class:d.value,tabindex:g.value,role:"radio","aria-label":e.label,"aria-checked":!0===h.value?"true":"false","aria-disabled":!0===e.disable?"true":void 0,onClick:v,onKeydown:y,onKeyup:_},n)}}}),Yk=fb({name:"QToggle",props:{...CC,icon:String,iconColor:String},emits:MC,setup:e=>EC("toggle",(function(t,i){const n=s((()=>(!0===t.value?e.checkedIcon:!0===i.value?e.indeterminateIcon:e.uncheckedIcon)||e.icon)),o=s((()=>!0===t.value?e.iconColor:null));return()=>[k("div",{class:"q-toggle__track"}),k("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},void 0!==n.value?[k(Ax,{name:n.value,color:o.value})]:void 0)]}))}),Zk={radio:Kk,checkbox:kC,toggle:Yk},Qk=Object.keys(Zk);function Jk(e,t){if("function"==typeof e)return e;const i=void 0!==e?e:t;return e=>e[i]}var eT=fb({name:"QOptionGroup",props:{...Fx,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(Yb),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>Qk.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:t,slots:i}){const{proxy:{$q:n}}=T();Array.isArray(e.modelValue);e.type;const o=Ox(e,n),r=s((()=>Zk[e.type])),a=s((()=>Jk(e.optionValue,"value"))),l=s((()=>Jk(e.optionLabel,"label"))),u=s((()=>Jk(e.optionDisable,"disable"))),c=s((()=>e.options.map((t=>({val:a.value(t),name:void 0===t.name?e.name:t.name,disable:e.disable||u.value(t),leftLabel:void 0===t.leftLabel?e.leftLabel:t.leftLabel,color:void 0===t.color?e.color:t.color,checkedIcon:t.checkedIcon,uncheckedIcon:t.uncheckedIcon,dark:void 0===t.dark?o.value:t.dark,size:void 0===t.size?e.size:t.size,dense:e.dense,keepColor:void 0===t.keepColor?e.keepColor:t.keepColor}))))),h=s((()=>"q-option-group q-gutter-x-sm"+(!0===e.inline?" q-option-group--inline":""))),d=s((()=>{const t={role:"group"};return"radio"===e.type&&(t.role="radiogroup",!0===e.disable&&(t["aria-disabled"]="true")),t}));function p(e){t("update:modelValue",e)}return()=>k("div",{class:h.value,...d.value},e.options.map(((t,n)=>{const o=void 0!==i["label-"+n]?()=>i["label-"+n](t):void 0!==i.label?()=>i.label(t):void 0;return k("div",[k(r.value,{label:void 0===o?l.value(t):null,modelValue:e.modelValue,"onUpdate:modelValue":p,...c.value[n]},o)])})))}});fb({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=M(jb,Wb);if(n===Wb)return Wb;if(M(Bb,Wb)===Wb)return Wb;const o=s((()=>{const t=(!0===n.header.space?n.header.size:0)+(!0===n.footer.space?n.footer.size:0);if("function"==typeof e.styleFn){const o=!0===n.isContainer.value?n.containerHeight.value:i.screen.height;return e.styleFn(t,o)}return{minHeight:!0===n.isContainer.value?n.containerHeight.value-t+"px":0===i.screen.height?0!==t?`calc(100vh - ${t}px)`:"100vh":i.screen.height-t+"px"}})),r=s((()=>"q-page"+(!0===e.padding?" q-layout-padding":"")));return()=>k("main",{class:r.value,style:o.value},fx(t.default))}}),fb({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:i}}=T(),n=M(jb,Wb);if(n===Wb)return Wb;W(Bb,!0);const o=s((()=>{const e={};return!0===n.header.space&&(e.paddingTop=`${n.header.size}px`),!0===n.right.space&&(e["padding"+(!0===i.lang.rtl?"Left":"Right")]=`${n.right.size}px`),!0===n.footer.space&&(e.paddingBottom=`${n.footer.size}px`),!0===n.left.space&&(e["padding"+(!0===i.lang.rtl?"Right":"Left")]=`${n.left.size}px`),e}));return()=>k("div",{class:"q-page-container",style:o.value},fx(t.default))}});var tT={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},expand:Boolean};function iT(){const{props:e,proxy:{$q:t}}=T(),i=M(jb,Wb);if(i===Wb)return Wb;const n=s((()=>{const t=e.position;return{top:-1!==t.indexOf("top"),right:-1!==t.indexOf("right"),bottom:-1!==t.indexOf("bottom"),left:-1!==t.indexOf("left"),vertical:"top"===t||"bottom"===t,horizontal:"left"===t||"right"===t}})),o=s((()=>i.header.offset)),r=s((()=>i.right.offset)),a=s((()=>i.footer.offset)),l=s((()=>i.left.offset)),u=s((()=>{let i=0,s=0;const u=n.value,c=!0===t.lang.rtl?-1:1;!0===u.top&&0!==o.value?s=`${o.value}px`:!0===u.bottom&&0!==a.value&&(s=-a.value+"px"),!0===u.left&&0!==l.value?i=c*l.value+"px":!0===u.right&&0!==r.value&&(i=-c*r.value+"px");const h={transform:`translate(${i}, ${s})`};return e.offset&&(h.margin=`${e.offset[1]}px ${e.offset[0]}px`),!0===u.vertical?(0!==l.value&&(h[!0===t.lang.rtl?"right":"left"]=`${l.value}px`),0!==r.value&&(h[!0===t.lang.rtl?"left":"right"]=`${r.value}px`)):!0===u.horizontal&&(0!==o.value&&(h.top=`${o.value}px`),0!==a.value&&(h.bottom=`${a.value}px`)),h})),c=s((()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${!0===e.expand?"expand":"shrink"}`));return{$layout:i,getStickyContent:function(t){const i=fx(t.default);return k("div",{class:c.value,style:u.value},!0===e.expand?i:[k("div",i)])}}}function nT(e,t){return[!0,!1].includes(e)?e:t}function oT(e){let t,i,n=!1;function o(){i=arguments,!0!==n&&(n=!0,t=window.requestAnimationFrame((()=>{e.apply(this,i),i=void 0,n=!1})))}return o.cancel=()=>{window.cancelAnimationFrame(t),n=!1},o}fb({name:"QPageScroller",props:{...tT,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{...tT.offset,default:()=>[18,18]}},emits:["click"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),{$layout:o,getStickyContent:l}=iT(),u=a(null);let c;const h=s((()=>o.height.value-(!0===o.isContainer.value?o.containerHeight.value:n.screen.height)));function d(){return!0===e.reverse?h.value-o.scroll.value.position>e.scrollOffset:o.scroll.value.position>e.scrollOffset}const p=a(d());function f(){const e=d();p.value!==e&&(p.value=e)}function g(){!0===e.reverse?void 0===c&&(c=r(h,f)):m()}function m(){void 0!==c&&(c(),c=void 0)}function v(t){cS(iS(!0===o.isContainer.value?u.value:o.rootRef.value),!0===e.reverse?o.height.value:0,e.duration),i("click",t)}function y(){return!0===p.value?k("div",{ref:u,class:"q-page-scroller",onClick:v},l(t)):null}return r(o.scroll,f),r((()=>e.reverse),g),g(),L(m),()=>k(A,{name:"q-transition--fade"},y)}}),fb({name:"QPageSticky",props:tT,setup(e,{slots:t}){const{getStickyContent:i}=iT();return()=>i(t)}}),fb({name:"QPagination",props:{...Fx,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>("string"==typeof e?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>""===e||gw.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:i}=T(),{$q:n}=i,o=Ox(e,n),l=s((()=>parseInt(e.min,10))),u=s((()=>parseInt(e.max,10))),c=s((()=>parseInt(e.maxPages,10))),h=s((()=>v.value+" / "+u.value)),d=s((()=>nT(e.boundaryLinks,e.input))),p=s((()=>nT(e.boundaryNumbers,!e.input))),f=s((()=>nT(e.directionLinks,e.input))),g=s((()=>nT(e.ellipses,!e.input))),m=a(null),v=s({get:()=>e.modelValue,set:i=>{if(i=parseInt(i,10),e.disable||isNaN(i))return;const n=ix(i,l.value,u.value);e.modelValue!==n&&t("update:modelValue",n)}});r((()=>`${l.value}|${u.value}`),(()=>{v.value=e.modelValue}));const y=s((()=>"q-pagination row no-wrap items-center"+(!0===e.disable?" disabled":""))),_=s((()=>e.gutter in hw?`${hw[e.gutter]}px`:e.gutter||null)),b=s((()=>null!==_.value?`--q-pagination-gutter-parent:-${_.value};--q-pagination-gutter-child:${_.value}`:null)),x=s((()=>{const t=[e.iconFirst||n.iconSet.pagination.first,e.iconPrev||n.iconSet.pagination.prev,e.iconNext||n.iconSet.pagination.next,e.iconLast||n.iconSet.pagination.last];return!0===n.lang.rtl?t.reverse():t})),w=s((()=>({"aria-disabled":!0===e.disable?"true":"false",role:"navigation"}))),S=s((()=>mw(e,"flat"))),C=s((()=>({[S.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:null===e.ripple||e.ripple}))),M=s((()=>{const t={[S.value]:!1};return""!==e.activeDesign&&(t[e.activeDesign]=!0),t})),E=s((()=>({...M.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor}))),P=s((()=>{let t=Math.max(c.value,1+(g.value?2:0)+(p.value?2:0));const i={pgFrom:l.value,pgTo:u.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(u.value).length)}em`}};return c.value&&t<u.value-l.value+1&&(t=1+2*Math.floor(t/2),i.pgFrom=Math.max(l.value,Math.min(u.value-t+1,e.modelValue-Math.floor(t/2))),i.pgTo=Math.min(u.value,i.pgFrom+t-1),p.value&&(i.boundaryStart=!0,i.pgFrom++),g.value&&i.pgFrom>l.value+(p.value?1:0)&&(i.ellipsesStart=!0,i.pgFrom++),p.value&&(i.boundaryEnd=!0,i.pgTo--),g.value&&i.pgTo<u.value-(p.value?1:0)&&(i.ellipsesEnd=!0,i.pgTo--)),i}));function L(e){v.value=e}function I(){v.value=m.value,m.value=null,!0===n.platform.is.mobile&&document.activeElement.blur()}function R(e){m.value=e}function A(e){!0===Rb(e,13)&&I()}function q(t,i,n){const o={"aria-label":i,"aria-current":"false",...C.value,...t};return!0===n&&Object.assign(o,{"aria-current":"true",...E.value}),void 0!==i&&(void 0!==e.toFn?o.to=e.toFn(i):o.onClick=()=>{L(i)}),k(Cw,o)}return Object.assign(i,{set:L,setByOffset:function(e){v.value=v.value+e}}),()=>{const t=[],i=[];let r;if(!0===d.value&&(t.push(q({key:"bls",disable:e.disable||e.modelValue<=l.value,icon:x.value[0],"aria-label":n.lang.pagination.first},l.value)),i.unshift(q({key:"ble",disable:e.disable||e.modelValue>=u.value,icon:x.value[3],"aria-label":n.lang.pagination.last},u.value))),!0===f.value&&(t.push(q({key:"bdp",disable:e.disable||e.modelValue<=l.value,icon:x.value[1],"aria-label":n.lang.pagination.prev},e.modelValue-1)),i.unshift(q({key:"bdn",disable:e.disable||e.modelValue>=u.value,icon:x.value[2],"aria-label":n.lang.pagination.next},e.modelValue+1))),!0!==e.input){r=[];const{pgFrom:n,pgTo:o,marginalStyle:s}=P.value;if(!0===P.value.boundaryStart){const i=l.value===e.modelValue;t.push(q({key:"bns",style:s,disable:e.disable,label:l.value},l.value,i))}if(!0===P.value.boundaryEnd){const t=u.value===e.modelValue;i.unshift(q({key:"bne",style:s,disable:e.disable,label:u.value},u.value,t))}!0===P.value.ellipsesStart&&t.push(q({key:"bes",style:s,disable:e.disable,label:"",ripple:!1},n-1)),!0===P.value.ellipsesEnd&&i.unshift(q({key:"bee",style:s,disable:e.disable,label:"",ripple:!1},o+1));for(let t=n;t<=o;t++)r.push(q({key:`bpg${t}`,style:s,disable:e.disable,label:t},t,t===e.modelValue))}return k("div",{class:y.value,...w.value},[k("div",{class:"q-pagination__content row no-wrap items-center",style:b.value},[...t,!0===e.input?k(Fk,{class:"inline",style:{width:h.value.length/1.5+"em"},type:"number",dense:!0,value:m.value,disable:e.disable,dark:o.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:h.value,min:l.value,max:u.value,"onUpdate:modelValue":R,onKeyup:A,onBlur:I}):k("div",{class:"q-pagination__middle row justify-center"},r),...i])])}}});var{passive:rT}=vb;function sT(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const i=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:"function"!=typeof e.constructor?Object.create(null):void 0!==e.prototype&&"function"==typeof e.prototype.constructor?e:new e.constructor;if("function"==typeof e.constructor&&"function"==typeof e.valueOf){const i=e.valueOf();if(Object(i)!==i){const n=new e.constructor(i);return t.set(e,n),n}}return t.set(e,i),e instanceof Set?e.forEach((e=>{i.add(sT(e,t))})):e instanceof Map&&e.forEach(((e,n)=>{i.set(n,sT(e,t))})),Object.assign(i,...Object.keys(e).map((i=>({[i]:sT(e[i],t)}))))}fb({name:"QParallax",props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:e=>e>=0&&e<=1},scrollTarget:eS,onScroll:Function},setup(e,{slots:t,emit:i}){const n=a(0),o=a(null),s=a(null),u=a(null);let c,h,d,p,f,g;r((()=>e.height),(()=>{!0===c&&v()})),r((()=>e.scrollTarget),(()=>{!0===c&&(x(),b())}));let m=t=>{n.value=t,void 0!==e.onScroll&&i("scroll",t)};function v(){let t,i,n;g===window?(t=0,n=i=window.innerHeight):(t=nw(g).top,i=ow(g),n=t+i);const r=nw(o.value).top,s=r+e.height;if(void 0!==f||s>t&&r<n){const t=(n-r)/(e.height+i);y((d-e.height)*t*e.speed),m(t)}}let y=e=>{h.style.transform=`translate3d(-50%,${Math.round(e)}px,0)`};function _(){d=h.naturalHeight||h.videoHeight||ow(h),!0===c&&v()}function b(){c=!0,g=iS(o.value,e.scrollTarget),g.addEventListener("scroll",v,rT),window.addEventListener("resize",p,rT),v()}function x(){!0===c&&(c=!1,g.removeEventListener("scroll",v,rT),window.removeEventListener("resize",p,rT),g=void 0,y.cancel(),m.cancel(),p.cancel())}return l((()=>{y=oT(y),m=oT(m),p=oT(_),h=void 0!==t.media?s.value.children[0]:u.value,h.onload=h.onloadstart=h.loadedmetadata=_,_(),h.style.display="initial",void 0!==window.IntersectionObserver?(f=new IntersectionObserver((e=>{(!0===e[0].isIntersecting?b:x)()})),f.observe(o.value)):b()})),L((()=>{x(),f?.disconnect(),h.onload=h.onloadstart=h.loadedmetadata=null})),()=>k("div",{ref:o,class:"q-parallax",style:{height:`${e.height}px`}},[k("div",{ref:s,class:"q-parallax__media absolute-full"},void 0!==t.media?t.media():[k("img",{ref:u,src:e.src})]),k("div",{class:"q-parallax__content absolute-full column flex-center"},void 0!==t.content?t.content({percentScrolled:n.value}):fx(t.default))])}});var aT=fb({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,r=a(null),l=a(""),u=a("");let c=!1;const h=s((()=>rb({initialValue:l.value,validate:e.validate,set:d,cancel:p,updatePosition:f},"value",(()=>u.value),(e=>{u.value=e}))));function d(){!1!==e.validate(u.value)&&(!0===g()&&(i("save",u.value,l.value),i("update:modelValue",u.value)),m())}function p(){!0===g()&&i("cancel",u.value,l.value),m()}function f(){P((()=>{r.value.updatePosition()}))}function g(){return!1===Kb(u.value,l.value)}function m(){c=!0,r.value.hide()}function v(){c=!1,l.value=sT(e.modelValue),u.value=sT(e.modelValue),i("beforeShow")}function y(){i("show")}function _(){!1===c&&!0===g()&&(!0===e.autoSave&&!0===e.validate(u.value)?(i("save",u.value,l.value),i("update:modelValue",u.value)):i("cancel",u.value,l.value)),i("beforeHide")}function b(){i("hide")}function x(){const i=void 0!==t.default?[].concat(t.default(h.value)):[];return e.title&&i.unshift(k("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),!0===e.buttons&&i.push(k("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[k(Cw,{flat:!0,color:e.color,label:e.labelCancel||o.lang.label.cancel,onClick:p}),k(Cw,{flat:!0,color:e.color,label:e.labelSet||o.lang.label.set,onClick:d})])),i}return Object.assign(n,{set:d,cancel:p,show(e){r.value?.show(e)},hide(e){r.value?.hide(e)},updatePosition:f}),()=>{if(!0!==e.disable)return k(jS,{ref:r,class:"q-popup-edit",cover:e.cover,onBeforeShow:v,onShow:y,onBeforeHide:_,onHide:b,onEscapeKey:p},x)}}}),lT=fb({name:"QPopupProxy",props:{...Tw,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:i,attrs:n}){const{proxy:o}=T(),{$q:l}=o,u=a(!1),c=a(null),h=s((()=>parseInt(e.breakpoint,10))),{canShow:d}=Pw({showing:u});function p(){return l.screen.width<h.value||l.screen.height<h.value?"dialog":"menu"}const f=a(p()),g=s((()=>"menu"===f.value?{maxHeight:"99vh"}:{}));function m(e){u.value=!0,i("show",e)}function v(e){u.value=!1,f.value=p(),i("hide",e)}return r((()=>p()),(e=>{!0!==u.value&&(f.value=e)})),Object.assign(o,{show(e){!0===d(e)&&c.value.show(e)},hide(e){c.value.hide(e)},toggle(e){c.value.toggle(e)}}),rb(o,"currentComponent",(()=>({type:f.value,ref:c.value}))),()=>{const i={ref:c,...g.value,...n,onShow:m,onHide:v};let o;return"dialog"===f.value?o=SE:(o=jS,Object.assign(i,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),k(o,i,t.default)}}}),uT={xs:2,sm:4,md:6,lg:10,xl:14};function cT(e,t,i){return{transform:!0===t?`translateX(${!0===i.lang.rtl?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var hT=fb({name:"QLinearProgress",props:{...Fx,...dx,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:i}=T(),n=Ox(e,i.$q),o=px(e,uT),r=s((()=>!0===e.indeterminate||!0===e.query)),a=s((()=>e.reverse!==e.query)),l=s((()=>({...null!==o.value?o.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`}))),u=s((()=>"q-linear-progress"+(void 0!==e.color?` text-${e.color}`:"")+(!0===e.reverse||!0===e.query?" q-linear-progress--reverse":"")+(!0===e.rounded?" rounded-borders":""))),c=s((()=>cT(void 0!==e.buffer?e.buffer:1,a.value,i.$q))),h=s((()=>`with${!0===e.instantFeedback?"out":""}-transition`)),d=s((()=>`q-linear-progress__track absolute-full q-linear-progress__track--${h.value} q-linear-progress__track--${!0===n.value?"dark":"light"}`+(void 0!==e.trackColor?` bg-${e.trackColor}`:""))),p=s((()=>cT(!0===r.value?1:e.value,a.value,i.$q))),f=s((()=>`q-linear-progress__model absolute-full q-linear-progress__model--${h.value} q-linear-progress__model--${!0===r.value?"in":""}determinate`)),g=s((()=>({width:100*e.value+"%"}))),m=s((()=>`q-linear-progress__stripe absolute-${!0===e.reverse?"right":"left"} q-linear-progress__stripe--${h.value}`));return()=>{const i=[k("div",{class:d.value,style:c.value}),k("div",{class:f.value,style:p.value})];return!0===e.stripe&&!1===r.value&&i.push(k("div",{class:m.value,style:g.value})),k("div",{class:u.value,style:l.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":!0===e.indeterminate?void 0:e.value},mx(t.default,i))}}});fb({name:"QPullToRefresh",props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:eS},emits:["refresh"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,u=a("pull"),c=a(0),h=a(!1),d=a(-40),p=a(!1),f=a({}),g=s((()=>({opacity:c.value,transform:`translateY(${d.value}px) rotate(${360*c.value}deg)`}))),m=s((()=>"q-pull-to-refresh__puller row flex-center"+(!0===p.value?" q-pull-to-refresh__puller--animating":"")+(void 0!==e.bgColor?` bg-${e.bgColor}`:"")));function v(e){if(!0===e.isFinal)return void(!0===h.value&&(h.value=!1,"pulled"===u.value?(u.value="refreshing",S({pos:20}),b()):"pull"===u.value&&S({pos:-40,ratio:0})));if(!0===p.value||"refreshing"===u.value)return!1;if(!0===e.isFirst){if(0!==oS(x)||"down"!==e.direction)return!0===h.value&&(h.value=!1,u.value="pull",S({pos:-40,ratio:0})),!1;h.value=!0;const{top:t,left:i}=n.$el.getBoundingClientRect();f.value={top:t+"px",left:i+"px",width:window.getComputedStyle(n.$el).getPropertyValue("width")}}wb(e.evt);const t=Math.min(140,Math.max(0,e.distance.y));d.value=t-40,c.value=ix(t/60,0,1);const i=d.value>20?"pulled":"pull";u.value!==i&&(u.value=i)}const y=s((()=>{const t={down:!0};return!0!==e.noMouse&&(t.mouse=!0),[[OC,v,void 0,t]]})),_=s((()=>"q-pull-to-refresh__content"+(!0===h.value?" no-pointer-events":"")));function b(){i("refresh",(()=>{S({pos:-40,ratio:0},(()=>{u.value="pull"}))}))}let x,w=null;function S({pos:e,ratio:t},i){p.value=!0,d.value=e,void 0!==t&&(c.value=t),null!==w&&clearTimeout(w),w=setTimeout((()=>{w=null,p.value=!1,i?.()}),300)}function C(){x=iS(n.$el,e.scrollTarget)}return r((()=>e.scrollTarget),C),l(C),L((()=>{null!==w&&clearTimeout(w)})),Object.assign(n,{trigger:b,updateScrollTarget:C}),()=>yx("div",{class:"q-pull-to-refresh"},[k("div",{class:_.value},fx(t.default)),k("div",{class:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:f.value},[k("div",{class:m.value,style:g.value},["refreshing"!==u.value?k(Ax,{name:e.icon||o.iconSet.pullToRefresh.icon,color:e.color,size:"32px"}):k(iw,{size:"24px",color:e.color})])])],"main",!1===e.disable,(()=>y.value))}});fb({name:"QRange",props:{...jC,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:BC,setup(e,{emit:t}){const{proxy:{$q:i}}=T(),{state:n,methods:o}=VC({updateValue:P,updatePosition:function(t,i=n.dragging.value){let r;const s=o.getDraggingRatio(t,i),a=o.convertRatioToModel(s);switch(i.type){case 0:s<=i.ratioMax?(r={minR:s,maxR:i.ratioMax,min:a,max:i.valueMax},n.focus.value="min"):(r={minR:i.ratioMax,maxR:s,min:i.valueMax,max:a},n.focus.value="max");break;case 2:s>=i.ratioMin?(r={minR:i.ratioMin,maxR:s,min:i.valueMin,max:a},n.focus.value="max"):(r={minR:s,maxR:i.ratioMin,min:a,max:i.valueMin},n.focus.value="min");break;case 1:const e=s-i.offsetRatio,t=ix(i.ratioMin+e,n.innerMinRatio.value,n.innerMaxRatio.value-i.rangeRatio),o=a-i.offsetModel,l=ix(i.valueMin+o,n.innerMin.value,n.innerMax.value-i.rangeValue);r={minR:t,maxR:t+i.rangeRatio,min:n.roundValueFn.value(l),max:n.roundValueFn.value(l+i.rangeValue)},n.focus.value="both"}h.value=null===h.value.min||null===h.value.max?{min:r.min||e.min,max:r.max||e.max}:{min:r.min,max:r.max},!0!==e.snap||0===e.step?(u.value=r.minR,c.value=r.maxR):(u.value=o.convertModelToRatio(h.value.min),c.value=o.convertModelToRatio(h.value.max))},getDragging:function(t){const{left:i,top:n,width:r,height:s}=l.value.getBoundingClientRect(),a=!0===e.dragOnlyRange?0:!0===e.vertical?w.value.offsetHeight/(2*s):w.value.offsetWidth/(2*r),u={left:i,top:n,width:r,height:s,valueMin:h.value.min,valueMax:h.value.max,ratioMin:p.value,ratioMax:f.value},c=o.getDraggingRatio(t,u);return!0!==e.dragOnlyRange&&c<u.ratioMin+a?u.type=0:!0===e.dragOnlyRange||c<u.ratioMax-a?!0===e.dragRange||!0===e.dragOnlyRange?(u.type=1,Object.assign(u,{offsetRatio:c,offsetModel:o.convertRatioToModel(c),rangeValue:u.valueMax-u.valueMin,rangeRatio:u.ratioMax-u.ratioMin})):u.type=u.ratioMax-c<c-u.ratioMin?2:0:u.type=2,u},formAttrs:s((()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`})))}),l=a(null),u=a(0),c=a(0),h=a({min:0,max:0});function d(){h.value.min=null===e.modelValue.min?n.innerMin.value:ix(e.modelValue.min,n.innerMin.value,n.innerMax.value),h.value.max=null===e.modelValue.max?n.innerMax.value:ix(e.modelValue.max,n.innerMin.value,n.innerMax.value)}r((()=>`${e.modelValue.min}|${e.modelValue.max}|${n.innerMin.value}|${n.innerMax.value}`),d),d();const p=s((()=>o.convertModelToRatio(h.value.min))),f=s((()=>o.convertModelToRatio(h.value.max))),g=s((()=>!0===n.active.value?u.value:p.value)),m=s((()=>!0===n.active.value?c.value:f.value)),v=s((()=>{const t={[n.positionProp.value]:100*g.value+"%",[n.sizeProp.value]:100*(m.value-g.value)+"%"};return void 0!==e.selectionImg&&(t.backgroundImage=`url(${e.selectionImg}) !important`),t})),y=s((()=>{if(!0!==n.editable.value)return{};if(!0===i.platform.is.mobile)return{onClick:o.onMobileClick};const t={onMousedown:o.onActivate};return(!0===e.dragRange||!0===e.dragOnlyRange)&&Object.assign(t,{onFocus:()=>{n.focus.value="both"},onBlur:o.onBlur,onKeydown:L,onKeyup:o.onKeyup}),t}));function _(t){return!0!==i.platform.is.mobile&&!0===n.editable.value&&!0!==e.dragOnlyRange?{onFocus:()=>{n.focus.value=t},onBlur:o.onBlur,onKeydown:L,onKeyup:o.onKeyup}:{}}const b=s((()=>!0!==e.dragOnlyRange?n.tabindex.value:null)),x=s((()=>!0===i.platform.is.mobile||!e.dragRange&&!0!==e.dragOnlyRange?null:n.tabindex.value)),w=a(null),S=s((()=>_("min"))),C=o.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:w,key:"tmin",...S.value,tabindex:b.value}),ratio:g,label:s((()=>void 0!==e.leftLabelValue?e.leftLabelValue:h.value.min)),thumbColor:s((()=>e.leftThumbColor||e.thumbColor||e.color)),labelColor:s((()=>e.leftLabelColor||e.labelColor)),labelTextColor:s((()=>e.leftLabelTextColor||e.labelTextColor))}),M=s((()=>_("max"))),E=o.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...M.value,key:"tmax",tabindex:b.value}),ratio:m,label:s((()=>void 0!==e.rightLabelValue?e.rightLabelValue:h.value.max)),thumbColor:s((()=>e.rightThumbColor||e.thumbColor||e.color)),labelColor:s((()=>e.rightLabelColor||e.labelColor)),labelTextColor:s((()=>e.rightLabelTextColor||e.labelTextColor))});function P(i){(h.value.min!==e.modelValue.min||h.value.max!==e.modelValue.max)&&t("update:modelValue",{...h.value}),!0===i&&t("change",{...h.value})}function L(t){if(!1===GC.includes(t.keyCode))return;Sb(t);const i=([34,33].includes(t.keyCode)?10:1)*n.keyStep.value,o=([34,37,40].includes(t.keyCode)?-1:1)*(!0===n.isReversed.value?-1:1)*(!0===e.vertical?-1:1)*i;if("both"===n.focus.value){const e=h.value.max-h.value.min,t=ix(n.roundValueFn.value(h.value.min+o),n.innerMin.value,n.innerMax.value-e);h.value={min:t,max:n.roundValueFn.value(t+e)}}else{if(!1===n.focus.value)return;{const e=n.focus.value;h.value={...h.value,[e]:ix(n.roundValueFn.value(h.value[e]+o),"min"===e?n.innerMin.value:h.value.min,"max"===e?n.innerMax.value:h.value.max)}}}P()}return()=>{const t=o.getContent(v,x,y,(e=>{e.push(C(),E())}));return k("div",{ref:l,class:"q-range "+n.classes.value+(null===e.modelValue.min||null===e.modelValue.max?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},t)}}}),fb({name:"QRating",props:{...dx,...YS,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=px(e),r=QS(ZS(e)),l=a(0);let u={};const c=s((()=>!0!==e.readonly&&!0!==e.disable)),h=s((()=>`q-rating row inline items-center q-rating--${!0===c.value?"":"non-"}editable`+(!0===e.noDimming?" q-rating--no-dimming":"")+(!0===e.disable?" disabled":"")+(void 0!==e.color&&!1===Array.isArray(e.color)?` text-${e.color}`:""))),d=s((()=>{const t=!0===Array.isArray(e.icon)?e.icon.length:0,i=!0===Array.isArray(e.iconSelected)?e.iconSelected.length:0,n=!0===Array.isArray(e.iconHalf)?e.iconHalf.length:0,o=!0===Array.isArray(e.color)?e.color.length:0,r=!0===Array.isArray(e.colorSelected)?e.colorSelected.length:0,s=!0===Array.isArray(e.colorHalf)?e.colorHalf.length:0;return{iconLen:t,icon:t>0?e.icon[t-1]:e.icon,selIconLen:i,selIcon:i>0?e.iconSelected[i-1]:e.iconSelected,halfIconLen:n,halfIcon:n>0?e.iconHalf[i-1]:e.iconHalf,colorLen:o,color:o>0?e.color[o-1]:e.color,selColorLen:r,selColor:r>0?e.colorSelected[r-1]:e.colorSelected,halfColorLen:s,halfColor:s>0?e.colorHalf[s-1]:e.colorHalf}})),p=s((()=>{if("string"==typeof e.iconAriaLabel){const t=0!==e.iconAriaLabel.length?`${e.iconAriaLabel} `:"";return e=>`${t}${e}`}if(!0===Array.isArray(e.iconAriaLabel)){const t=e.iconAriaLabel.length;if(t>0)return i=>e.iconAriaLabel[Math.min(i,t)-1]}return(e,t)=>`${t} ${e}`})),f=s((()=>{const t=[],i=d.value,o=Math.ceil(e.modelValue),r=!0===c.value?0:null,s=void 0===e.iconHalf||o===e.modelValue?-1:o;for(let a=1;a<=e.max;a++){const u=0===l.value&&e.modelValue>=a||l.value>0&&l.value>=a,c=s===a&&l.value<a,h=l.value>0&&(!0===c?o:e.modelValue)>=a&&l.value<a,d=!0===c?a<=i.halfColorLen?e.colorHalf[a-1]:i.halfColor:void 0!==i.selColor&&!0===u?a<=i.selColorLen?e.colorSelected[a-1]:i.selColor:a<=i.colorLen?e.color[a-1]:i.color,f=(!0===c?a<=i.halfIconLen?e.iconHalf[a-1]:i.halfIcon:void 0===i.selIcon||!0!==u&&!0!==h?a<=i.iconLen?e.icon[a-1]:i.icon:a<=i.selIconLen?e.iconSelected[a-1]:i.selIcon)||n.iconSet.rating.icon;t.push({name:(!0===c?a<=i.halfIconLen?e.iconHalf[a-1]:i.halfIcon:void 0===i.selIcon||!0!==u&&!0!==h?a<=i.iconLen?e.icon[a-1]:i.icon:a<=i.selIconLen?e.iconSelected[a-1]:i.selIcon)||n.iconSet.rating.icon,attrs:{tabindex:r,role:"radio","aria-checked":e.modelValue===a?"true":"false","aria-label":p.value(a,f)},iconClass:"q-rating__icon"+(!0===u||!0===c?" q-rating__icon--active":"")+(!0===h?" q-rating__icon--exselected":"")+(l.value===a?" q-rating__icon--hovered":"")+(void 0!==d?` text-${d}`:"")})}return t})),g=s((()=>{const t={role:"radiogroup"};return!0===e.disable&&(t["aria-disabled"]="true"),!0===e.readonly&&(t["aria-readonly"]="true"),t}));function m(t){if(!0===c.value){const n=ix(parseInt(t,10),1,parseInt(e.max,10)),o=!0!==e.noReset&&e.modelValue===n?0:n;o!==e.modelValue&&i("update:modelValue",o),l.value=0}}function v(e){!0===c.value&&(l.value=e)}function y(){l.value=0}return z((()=>{u={}})),()=>{const i=[];return f.value.forEach((({iconClass:e,name:n,attrs:o},r)=>{const s=r+1;i.push(k("div",{key:s,ref:e=>{u[`rt${s}`]=e},class:"q-rating__icon-container flex flex-center",...o,onClick(){m(s)},onMouseover(){v(s)},onMouseout:y,onFocus(){v(s)},onBlur:y,onKeyup(e){!function(e,t){switch(e.keyCode){case 13:case 32:return m(t),Sb(e);case 37:case 40:return u["rt"+(t-1)]&&u["rt"+(t-1)].focus(),Sb(e);case 39:case 38:u[`rt${t+1}`]&&u[`rt${t+1}`].focus(),Sb(e)}}(e,s)}},mx(t[`tip-${s}`],[k(Ax,{class:e,name:n})])))})),void 0!==e.name&&!0!==e.disable&&r(i,"push"),k("div",{class:h.value,style:o.value,...g.value},i)}}}),fb({name:"QResponsive",props:yk,setup(e,{slots:t}){const i=_k(e);return()=>k("div",{class:"q-responsive"},[k("div",{class:"q-responsive__filler overflow-hidden"},[k("div",{style:i.value})]),k("div",{class:"q-responsive__content absolute-full fit"},fx(t.default))])}});var dT=fb({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup:e=>()=>[k("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),k("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),S(k("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),S(k("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}),pT=["vertical","horizontal"],fT={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},gT={prevent:!0,mouse:!0,mouseAllDir:!0},mT=e=>e>=250?50:Math.ceil(e/5),vT=fb({name:"QScrollArea",props:{...Fx,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:i}){const n=a(!1),o=a(!1),l=a(!1),u={vertical:a(0),horizontal:a(0)},c={vertical:{ref:a(null),position:a(0),size:a(0)},horizontal:{ref:a(null),position:a(0),size:a(0)}},{proxy:h}=T(),d=Ox(e,h.$q);let p,f=null;const g=a(null),m=s((()=>"q-scrollarea"+(!0===d.value?" q-scrollarea--dark":"")));Object.assign(u,{verticalInner:s((()=>u.vertical.value-e.verticalOffset[0]-e.verticalOffset[1])),horizontalInner:s((()=>u.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1]))}),c.vertical.percentage=s((()=>{const e=c.vertical.size.value-u.vertical.value;if(e<=0)return 0;const t=ix(c.vertical.position.value/e,0,1);return Math.round(1e4*t)/1e4})),c.vertical.thumbHidden=s((()=>!0!==(null===e.visible?l.value:e.visible)&&!1===n.value&&!1===o.value||c.vertical.size.value<=u.vertical.value+1)),c.vertical.thumbStart=s((()=>e.verticalOffset[0]+c.vertical.percentage.value*(u.verticalInner.value-c.vertical.thumbSize.value))),c.vertical.thumbSize=s((()=>Math.round(ix(u.verticalInner.value*u.verticalInner.value/c.vertical.size.value,mT(u.verticalInner.value),u.verticalInner.value)))),c.vertical.style=s((()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${c.vertical.thumbStart.value}px`,height:`${c.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`}))),c.vertical.thumbClass=s((()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(!0===c.vertical.thumbHidden.value?" q-scrollarea__thumb--invisible":""))),c.vertical.barClass=s((()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(!0===c.vertical.thumbHidden.value?" q-scrollarea__bar--invisible":""))),c.horizontal.percentage=s((()=>{const e=c.horizontal.size.value-u.horizontal.value;if(e<=0)return 0;const t=ix(Math.abs(c.horizontal.position.value)/e,0,1);return Math.round(1e4*t)/1e4})),c.horizontal.thumbHidden=s((()=>!0!==(null===e.visible?l.value:e.visible)&&!1===n.value&&!1===o.value||c.horizontal.size.value<=u.horizontal.value+1)),c.horizontal.thumbStart=s((()=>e.horizontalOffset[0]+c.horizontal.percentage.value*(u.horizontalInner.value-c.horizontal.thumbSize.value))),c.horizontal.thumbSize=s((()=>Math.round(ix(u.horizontalInner.value*u.horizontalInner.value/c.horizontal.size.value,mT(u.horizontalInner.value),u.horizontalInner.value)))),c.horizontal.style=s((()=>({...e.thumbStyle,...e.horizontalThumbStyle,[!0===h.$q.lang.rtl?"right":"left"]:`${c.horizontal.thumbStart.value}px`,width:`${c.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`}))),c.horizontal.thumbClass=s((()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(!0===c.horizontal.thumbHidden.value?" q-scrollarea__thumb--invisible":""))),c.horizontal.barClass=s((()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(!0===c.horizontal.thumbHidden.value?" q-scrollarea__bar--invisible":"")));const v=s((()=>!0===c.vertical.thumbHidden.value&&!0===c.horizontal.thumbHidden.value?e.contentStyle:e.contentActiveStyle));function y(){const e={};return pT.forEach((t=>{const i=c[t];Object.assign(e,{[t+"Position"]:i.position.value,[t+"Percentage"]:i.percentage.value,[t+"Size"]:i.size.value,[t+"ContainerSize"]:u[t].value,[t+"ContainerInnerSize"]:u[t+"Inner"].value})})),e}const _=kb((()=>{const e=y();e.ref=h,i("scroll",e)}),0);function b(e,t,i){!1!==pT.includes(e)&&("vertical"===e?cS:hS)(g.value,t,i)}function x({height:e,width:t}){let i=!1;u.vertical.value!==e&&(u.vertical.value=e,i=!0),u.horizontal.value!==t&&(u.horizontal.value=t,i=!0),!0===i&&E()}function w({position:e}){let t=!1;c.vertical.position.value!==e.top&&(c.vertical.position.value=e.top,t=!0),c.horizontal.position.value!==e.left&&(c.horizontal.position.value=e.left,t=!0),!0===t&&E()}function S({height:e,width:t}){c.horizontal.size.value!==t&&(c.horizontal.size.value=t,E()),c.vertical.size.value!==e&&(c.vertical.size.value=e,E())}function C(e,t){const i=c[t];if(!0===e.isFirst){if(!0===i.thumbHidden.value)return;p=i.position.value,o.value=!0}else if(!0!==o.value)return;!0===e.isFinal&&(o.value=!1);const n=fT[t],r=(i.size.value-u[t].value)/(u[t+"Inner"].value-i.thumbSize.value),s=e.distance[n.dist];P(p+(e.direction===n.dir?1:-1)*s*r,t)}function M(t,i){const n=c[i];if(!0!==n.thumbHidden.value){const o="vertical"===i?e.verticalOffset[0]:e.horizontalOffset[0],r=t[fT[i].offset]-o,s=n.thumbStart.value-o;(r<s||r>s+n.thumbSize.value)&&P(ix((r-n.thumbSize.value/2)/(u[i+"Inner"].value-n.thumbSize.value),0,1)*Math.max(0,n.size.value-u[i].value),i),null!==n.ref.value&&n.ref.value.dispatchEvent(new MouseEvent(t.type,t))}}function E(){n.value=!0,null!==f&&clearTimeout(f),f=setTimeout((()=>{f=null,n.value=!1}),e.delay),void 0!==e.onScroll&&_()}function P(e,t){g.value[fT[t].scroll]=e}let A=null;function q(){null!==A&&clearTimeout(A),A=setTimeout((()=>{A=null,l.value=!0}),h.$q.platform.is.ios?50:0)}function F(){null!==A&&(clearTimeout(A),A=null),l.value=!1}let O=null;r((()=>h.$q.lang.rtl),(e=>{null!==g.value&&hS(g.value,Math.abs(c.horizontal.position.value)*(!0===e?-1:1))})),I((()=>{O={top:c.vertical.position.value,left:c.horizontal.position.value}})),R((()=>{if(null===O)return;const e=g.value;null!==e&&(hS(e,O.left),cS(e,O.top))})),L(_.cancel),Object.assign(h,{getScrollTarget:()=>g.value,getScroll:y,getScrollPosition:()=>({top:c.vertical.position.value,left:c.horizontal.position.value}),getScrollPercentage:()=>({top:c.vertical.percentage.value,left:c.horizontal.percentage.value}),setScrollPosition:b,setScrollPercentage(e,t,i){b(e,t*(c[e].size.value-u[e].value)*("horizontal"===e&&!0===h.$q.lang.rtl?-1:1),i)}});const z={scroll:c,thumbVertDir:[[OC,e=>{C(e,"vertical")},void 0,{vertical:!0,...gT}]],thumbHorizDir:[[OC,e=>{C(e,"horizontal")},void 0,{horizontal:!0,...gT}]],onVerticalMousedown(e){M(e,"vertical")},onHorizontalMousedown(e){M(e,"horizontal")}};return()=>k("div",{class:m.value,onMouseenter:q,onMouseleave:F},[k("div",{ref:g,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:void 0!==e.tabindex?e.tabindex:void 0},[k("div",{class:"q-scrollarea__content absolute",style:v.value},mx(t.default,[k(YC,{debounce:0,onResize:S})])),k(Uk,{axis:"both",onScroll:w})]),k(YC,{debounce:0,onResize:x}),k(dT,{store:z,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}}),yT=1e3,_T=["start","center","end","start-force","center-force","end-force"],bT=Array.prototype.filter,xT=void 0===window.getComputedStyle(document.body).overflowAnchor?yb:function(e,t){null!==e&&(void 0!==e._qOverflowAnimationFrame&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame((()=>{if(null===e)return;e._qOverflowAnimationFrame=void 0;const i=e.children||[];bT.call(i,(e=>e.dataset&&void 0!==e.dataset.qVsAnchor)).forEach((e=>{delete e.dataset.qVsAnchor}));const n=i[t];n?.dataset&&(n.dataset.qVsAnchor="")})))};function wT(e,t){return e+t}function ST(e,t,i,n,o,r,s,a){const l=e===window?document.scrollingElement||document.documentElement:e,u=!0===o?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-s-a,scrollMaxSize:0,offsetStart:-s,offsetEnd:-a};if(!0===o?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=l.scrollLeft,c.scrollViewSize+=l.clientWidth),c.scrollMaxSize=l.scrollWidth,!0===r&&(c.scrollStart=(!0===WC?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=l.scrollTop,c.scrollViewSize+=l.clientHeight),c.scrollMaxSize=l.scrollHeight),null!==i)for(let h=i.previousElementSibling;null!==h;h=h.previousElementSibling)!1===h.classList.contains("q-virtual-scroll--skip")&&(c.offsetStart+=h[u]);if(null!==n)for(let h=n.nextElementSibling;null!==h;h=h.nextElementSibling)!1===h.classList.contains("q-virtual-scroll--skip")&&(c.offsetEnd+=h[u]);if(t!==e){const i=l.getBoundingClientRect(),n=t.getBoundingClientRect();!0===o?(c.offsetStart+=n.left-i.left,c.offsetEnd-=n.width):(c.offsetStart+=n.top-i.top,c.offsetEnd-=n.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function CT(e,t,i,n){"end"===t&&(t=(e===window?document.body:e)[!0===i?"scrollWidth":"scrollHeight"]),e===window?!0===i?(!0===n&&(t=(!0===WC?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):!0===i?(!0===n&&(t=(!0===WC?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function MT(e,t,i,n){if(i>=n)return 0;const o=t.length,r=Math.floor(i/yT),s=Math.floor((n-1)/yT)+1;let a=e.slice(r,s).reduce(wT,0);return i%yT!=0&&(a-=t.slice(r*yT,i).reduce(wT,0)),n%yT!=0&&n!==o&&(a-=t.slice(n,s*yT).reduce(wT,0)),a}var ET={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},kT=Object.keys(ET),TT={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...ET};function PT({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:i,virtualScrollItemSizeComputed:n}){const o=T(),{props:l,emit:u,proxy:c}=o,{$q:h}=c;let d,p,f,g,m=[];const v=a(0),y=a(0),_=a({}),b=a(null),x=a(null),w=a(null),S=a({from:0,to:0}),C=s((()=>void 0!==l.tableColspan?l.tableColspan:100));void 0===n&&(n=s((()=>l.virtualScrollItemSize)));const M=s((()=>n.value+";"+l.virtualScrollHorizontal)),E=s((()=>M.value+";"+l.virtualScrollSliceRatioBefore+";"+l.virtualScrollSliceRatioAfter));function A(){D(p,!0)}function q(e){D(void 0===e?p:e)}function F(n,o){const r=t();if(null==r||8===r.nodeType)return;const s=ST(r,i(),b.value,x.value,l.virtualScrollHorizontal,h.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd);f!==s.scrollViewSize&&j(s.scrollViewSize),O(r,s,Math.min(e.value-1,Math.max(0,parseInt(n,10)||0)),0,-1!==_T.indexOf(o)?o:-1!==p&&n>p?"end":"start")}function O(t,i,n,o,r){const s="string"==typeof r&&-1!==r.indexOf("-force"),a=!0===s?r.replace("-force",""):r,u=void 0!==a?a:"start";let c=Math.max(0,n-_.value[u]),p=c+_.value.total;p>e.value&&(p=e.value,c=Math.max(0,p-_.value.total)),d=i.scrollStart;const f=c!==S.value.from||p!==S.value.to;if(!1===f&&void 0===a)return void B(n);const{activeElement:b}=document,x=w.value;!0===f&&null!==x&&x!==b&&!0===x.contains(b)&&(x.addEventListener("focusout",N),setTimeout((()=>{x?.removeEventListener("focusout",N)}))),xT(x,n-c);const C=void 0!==a?g.slice(c,n).reduce(wT,0):0;if(!0===f){const t=p>=S.value.from&&c<=S.value.to?S.value.to:p;S.value={from:c,to:t},v.value=MT(m,g,0,c),y.value=MT(m,g,p,e.value),requestAnimationFrame((()=>{S.value.to!==p&&d===i.scrollStart&&(S.value={from:S.value.from,to:p},y.value=MT(m,g,p,e.value))}))}requestAnimationFrame((()=>{if(d!==i.scrollStart)return;!0===f&&z(c);const e=g.slice(c,n).reduce(wT,0),r=e+i.offsetStart+v.value,u=r+g[n];let p=r+o;if(void 0!==a){const t=e-C,o=i.scrollStart+t;p=!0!==s&&o<r&&u<o+i.scrollViewSize?o:"end"===a?u-i.scrollViewSize:r-("start"===a?0:Math.round((i.scrollViewSize-g[n])/2))}d=p,CT(t,p,l.virtualScrollHorizontal,h.lang.rtl),B(n)}))}function z(e){const t=w.value;if(t){const i=bT.call(t.children,(e=>e.classList&&!1===e.classList.contains("q-virtual-scroll--skip"))),n=i.length,o=!0===l.virtualScrollHorizontal?e=>e.getBoundingClientRect().width:e=>e.offsetHeight;let r,s,a=e;for(let e=0;e<n;){for(r=o(i[e]),e++;e<n&&!0===i[e].classList.contains("q-virtual-scroll--with-prev");)r+=o(i[e]),e++;s=r-g[a],0!==s&&(g[a]+=s,m[Math.floor(a/yT)]+=s),a++}}}function N(){w.value?.focus()}function D(t,i){const o=1*n.value;(!0===i||!1===Array.isArray(g))&&(g=[]);const r=g.length;g.length=e.value;for(let n=e.value-1;n>=r;n--)g[n]=o;const s=Math.floor((e.value-1)/yT);m=[];for(let n=0;n<=s;n++){let t=0;const i=Math.min((n+1)*yT,e.value);for(let e=n*yT;e<i;e++)t+=g[e];m.push(t)}p=-1,d=void 0,v.value=MT(m,g,0,S.value.from),y.value=MT(m,g,S.value.to,e.value),t>=0?(z(S.value.from),P((()=>{F(t)}))):V()}function j(e){if(void 0===e&&typeof window<"u"){const n=t();null!=n&&8!==n.nodeType&&(e=ST(n,i(),b.value,x.value,l.virtualScrollHorizontal,h.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd).scrollViewSize)}f=e;const o=parseFloat(l.virtualScrollSliceRatioBefore)||0,r=1+o+(parseFloat(l.virtualScrollSliceRatioAfter)||0),s=void 0===e||e<=0?1:Math.ceil(e/n.value),a=Math.max(1,s,Math.ceil((l.virtualScrollSliceSize>0?l.virtualScrollSliceSize:10)/r));_.value={total:Math.ceil(a*r),start:Math.ceil(a*o),center:Math.ceil(a*(.5+o)),end:Math.ceil(a*(1+o)),view:s}}function B(e){p!==e&&(void 0!==l.onVirtualScroll&&u("virtualScroll",{index:e,from:S.value.from,to:S.value.to-1,direction:e<p?"decrease":"increase",ref:c}),p=e)}r(E,(()=>{j()})),r(M,A),j();const V=kb((function(){const n=t();if(null==n||8===n.nodeType)return;const o=ST(n,i(),b.value,x.value,l.virtualScrollHorizontal,h.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd),r=e.value-1,s=o.scrollMaxSize-o.offsetStart-o.offsetEnd-y.value;if(d===o.scrollStart)return;if(o.scrollMaxSize<=0)return void O(n,o,0,0);f!==o.scrollViewSize&&j(o.scrollViewSize),z(S.value.from);const a=Math.floor(o.scrollMaxSize-Math.max(o.scrollViewSize,o.offsetEnd)-Math.min(g[r],o.scrollViewSize/2));if(a>0&&Math.ceil(o.scrollStart)>=a)return void O(n,o,r,o.scrollMaxSize-o.offsetEnd-m.reduce(wT,0));let u=0,c=o.scrollStart-o.offsetStart,p=c;if(c<=s&&c+o.scrollViewSize>=v.value)c-=v.value,u=S.value.from,p=c;else for(let e=0;c>=m[e]&&u<r;e++)c-=m[e],u+=yT;for(;c>0&&u<r;)c-=g[u],c>-o.scrollViewSize?(u++,p=c):p=g[u]+c;O(n,o,u,p)}),!0===h.platform.is.ios?120:35);G((()=>{j()}));let $=!1;return I((()=>{$=!0})),R((()=>{if(!0!==$)return;const e=t();void 0!==d&&null!=e&&8!==e.nodeType?CT(e,d,l.virtualScrollHorizontal,h.lang.rtl):F(p)})),L((()=>{V.cancel()})),Object.assign(c,{scrollTo:F,reset:A,refresh:q}),{virtualScrollSliceRange:S,virtualScrollSliceSizeComputed:_,setVirtualScrollSize:j,onVirtualScrollEvt:V,localResetVirtualScroll:D,padVirtualScroll:function(e,t){const i=!0===l.virtualScrollHorizontal?"width":"height",o={["--q-virtual-scroll-item-"+i]:n.value+"px"};return["tbody"===e?k(e,{class:"q-virtual-scroll__padding",key:"before",ref:b},[k("tr",[k("td",{style:{[i]:`${v.value}px`,...o},colspan:C.value})])]):k(e,{class:"q-virtual-scroll__padding",key:"before",ref:b,style:{[i]:`${v.value}px`,...o}}),k(e,{class:"q-virtual-scroll__content",key:"content",ref:w,tabindex:-1},t.flat()),"tbody"===e?k(e,{class:"q-virtual-scroll__padding",key:"after",ref:x},[k("tr",[k("td",{style:{[i]:`${y.value}px`,...o},colspan:C.value})])]):k(e,{class:"q-virtual-scroll__padding",key:"after",ref:x,style:{[i]:`${y.value}px`,...o}})]},scrollTo:F,reset:A,refresh:q}}var LT=e=>["add","add-unique","toggle"].includes(e),IT=Object.keys(ak);function RT(e,t){if("function"==typeof e)return e;const i=void 0!==e?e:t;return e=>null!==e&&"object"==typeof e&&i in e?e[i]:e}var AT=fb({name:"QSelect",inheritAttrs:!1,props:{...TT,...YS,...ak,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:LT},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:TT.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...lk,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,l=a(!1),u=a(!1),c=a(-1),h=a(""),d=a(!1),p=a(!1);let f,g,m,v,y,_,b,x=null,w=null,S=null;const C=a(null),M=a(null),E=a(null),I=a(null),R=a(null),A=JS(e),q=qk(Re),F=s((()=>Array.isArray(e.options)?e.options.length:0)),O=s((()=>void 0===e.virtualScrollItemSize?!0===e.optionsDense?24:48:e.virtualScrollItemSize)),{virtualScrollSliceRange:D,virtualScrollSliceSizeComputed:G,localResetVirtualScroll:j,padVirtualScroll:B,onVirtualScrollEvt:V,scrollTo:$,setVirtualScrollSize:H}=PT({virtualScrollLength:F,getVirtualScrollTarget:function(){return Le()},getVirtualScrollEl:Le,virtualScrollItemSizeComputed:O}),U=uk(),W=s((()=>{const t=!0===e.mapOptions&&!0!==e.multiple,i=void 0===e.modelValue||null===e.modelValue&&!0!==t?[]:!0===e.multiple&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue];if(!0===e.mapOptions&&!0===Array.isArray(e.options)){const n=!0===e.mapOptions&&void 0!==f?f:[],o=i.map((t=>function(t,i){const n=e=>Kb(de.value(e),t);return e.options.find(n)||i.find(n)||t}(t,n)));return null===e.modelValue&&!0===t?o.filter((e=>null!==e)):o}return i})),X=s((()=>{const t={};return IT.forEach((i=>{const n=e[i];void 0!==n&&(t[i]=n)})),t})),K=s((()=>null===e.optionsDark?U.isDark.value:e.optionsDark)),Y=s((()=>rk(W.value))),Z=s((()=>{let t="q-field__input q-placeholder col";return!0===e.hideSelected||0===W.value.length?[t,e.inputClass]:(t+=" q-field__input--padding",void 0===e.inputClass?t:[t,e.inputClass])})),Q=s((()=>(!0===e.virtualScrollHorizontal?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:""))),J=s((()=>0===F.value)),ee=s((()=>W.value.map((e=>pe.value(e))).join(", "))),te=s((()=>void 0!==e.displayValue?e.displayValue:ee.value)),ie=s((()=>!0===e.optionsHtml?()=>!0:e=>!0===e?.html)),ne=s((()=>!0===e.displayValueHtml||void 0===e.displayValue&&(!0===e.optionsHtml||W.value.some(ie.value)))),oe=s((()=>!0===U.focused.value?e.tabindex:-1)),re=s((()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":!0===e.readonly?"true":"false","aria-autocomplete":!0===e.useInput?"list":"none","aria-expanded":!0===l.value?"true":"false","aria-controls":`${U.targetUid.value}_lb`};return c.value>=0&&(t["aria-activedescendant"]=`${U.targetUid.value}_${c.value}`),t})),se=s((()=>({id:`${U.targetUid.value}_lb`,role:"listbox","aria-multiselectable":!0===e.multiple?"true":"false"}))),ae=s((()=>W.value.map(((e,t)=>({index:t,opt:e,html:ie.value(e),selected:!0,removeAtIndex:_e,toggleOption:xe,tabindex:oe.value}))))),le=s((()=>{if(0===F.value)return[];const{from:t,to:i}=D.value;return e.options.slice(t,i).map(((i,n)=>{const r=!0===fe.value(i),s=!0===Ce(i),a=t+n,u={clickable:!0,active:s,activeClass:he.value,manualFocus:!0,focused:!1,disable:r,tabindex:-1,dense:e.optionsDense,dark:K.value,role:"option","aria-selected":!0===s?"true":"false",id:`${U.targetUid.value}_${a}`,onClick:()=>{xe(i)}};return!0!==r&&(c.value===a&&(u.focused=!0),!0===o.platform.is.desktop&&(u.onMousemove=()=>{!0===l.value&&we(a)})),{index:a,opt:i,html:ie.value(i),label:pe.value(i),selected:u.active,focused:u.focused,toggleOption:xe,setOptionIndex:we,itemProps:u}}))})),ue=s((()=>void 0!==e.dropdownIcon?e.dropdownIcon:o.iconSet.arrow.dropdown)),ce=s((()=>!1===e.optionsCover&&!0!==e.outlined&&!0!==e.standout&&!0!==e.borderless&&!0!==e.rounded)),he=s((()=>void 0!==e.optionsSelectedClass?e.optionsSelectedClass:void 0!==e.color?`text-${e.color}`:"")),de=s((()=>RT(e.optionValue,"value"))),pe=s((()=>RT(e.optionLabel,"label"))),fe=s((()=>RT(e.optionDisable,"disable"))),ge=s((()=>W.value.map(de.value))),me=s((()=>{const e={onInput:Re,onChange:q,onKeydown:Pe,onKeyup:ke,onKeypress:Te,onFocus:Me,onClick(e){!0===g&&xb(e)}};return e.onCompositionstart=e.onCompositionupdate=e.onCompositionend=q,e}));function ve(t){return!0===e.emitValue?de.value(t):t}function ye(t){if(-1!==t&&t<W.value.length)if(!0===e.multiple){const n=e.modelValue.slice();i("remove",{index:t,value:n.splice(t,1)[0]}),i("update:modelValue",n)}else i("update:modelValue",null)}function _e(e){ye(e),U.focus()}function be(t,n){const o=ve(t);if(!0!==e.multiple)return!0===e.fillInput&&qe(pe.value(t),!0,!0),void i("update:modelValue",o);if(0===W.value.length)return i("add",{index:0,value:o}),void i("update:modelValue",!0===e.multiple?[o]:o);if(!0===n&&!0===Ce(t)||void 0!==e.maxValues&&e.modelValue.length>=e.maxValues)return;const r=e.modelValue.slice();i("add",{index:r.length,value:o}),r.push(o),i("update:modelValue",r)}function xe(t,n){if(!0!==U.editable.value||void 0===t||!0===fe.value(t))return;const o=de.value(t);if(!0!==e.multiple)return!0!==n&&(qe(!0===e.fillInput?pe.value(t):"",!0,!0),He()),M.value?.focus(),void((0===W.value.length||!0!==Kb(de.value(W.value[0]),o))&&i("update:modelValue",!0===e.emitValue?o:t));if((!0!==g||!0===d.value)&&U.focus(),Me(),0===W.value.length){const n=!0===e.emitValue?o:t;return i("add",{index:0,value:n}),void i("update:modelValue",!0===e.multiple?[n]:n)}const r=e.modelValue.slice(),s=ge.value.findIndex((e=>Kb(e,o)));if(-1!==s)i("remove",{index:s,value:r.splice(s,1)[0]});else{if(void 0!==e.maxValues&&r.length>=e.maxValues)return;const n=!0===e.emitValue?o:t;i("add",{index:r.length,value:n}),r.push(n)}i("update:modelValue",r)}function we(e){if(!0!==o.platform.is.desktop)return;const t=-1!==e&&e<F.value?e:-1;c.value!==t&&(c.value=t)}function Se(t=1,i){if(!0===l.value){let n=c.value;do{n=nx(n+t,-1,F.value-1)}while(-1!==n&&n!==c.value&&!0===fe.value(e.options[n]));c.value!==n&&(we(n),$(n),!0!==i&&!0===e.useInput&&!0===e.fillInput&&Ae(n>=0?pe.value(e.options[n]):v,!0))}}function Ce(e){const t=de.value(e);return void 0!==ge.value.find((e=>Kb(e,t)))}function Me(t){!0===e.useInput&&null!==M.value&&(void 0===t||M.value===t.target&&t.target.value===ee.value)&&M.value.select()}function Ee(e){!0===Rb(e,27)&&!0===l.value&&(xb(e),He(),Ue()),i("keyup",e)}function ke(t){const{value:i}=t.target;if(void 0===t.keyCode)if(t.target.value="",null!==x&&(clearTimeout(x),x=null),null!==w&&(clearTimeout(w),w=null),Ue(),"string"==typeof i&&0!==i.length){const t=i.toLocaleLowerCase(),n=i=>{const n=e.options.find((e=>String(i.value(e)).toLocaleLowerCase()===t));return void 0!==n&&(-1===W.value.indexOf(n)?xe(n):He(),!0)},o=e=>{!0!==n(de)&&!0!==e&&!0!==n(pe)&&Fe(i,!0,(()=>o(!0)))};o()}else U.clearValue(t);else Ee(t)}function Te(e){i("keypress",e)}function Pe(t){if(i("keydown",t),!0===Ib(t))return;const n=0!==h.value.length&&(void 0!==e.newValueMode||void 0!==e.onNewValue),o=!0!==t.shiftKey&&!0!==e.disableTabSelection&&!0!==e.multiple&&(-1!==c.value||!0===n);if(27===t.keyCode)return void wb(t);if(9===t.keyCode&&!1===o)return void Ve();if(void 0===t.target||t.target.id!==U.targetUid.value||!0!==U.editable.value)return;if(40===t.keyCode&&!0!==U.innerLoading.value&&!1===l.value)return Sb(t),void $e();if(8===t.keyCode&&(!0===e.useChips||!0===e.clearable)&&!0!==e.hideSelected&&0===h.value.length)return void(!0===e.multiple&&!0===Array.isArray(e.modelValue)?ye(e.modelValue.length-1):!0!==e.multiple&&null!==e.modelValue&&i("update:modelValue",null));(35===t.keyCode||36===t.keyCode)&&("string"!=typeof h.value||0===h.value.length)&&(Sb(t),c.value=-1,Se(36===t.keyCode?1:-1,e.multiple)),(33===t.keyCode||34===t.keyCode)&&void 0!==G.value&&(Sb(t),c.value=Math.max(-1,Math.min(F.value,c.value+(33===t.keyCode?-1:1)*G.value.view)),Se(33===t.keyCode?1:-1,e.multiple)),(38===t.keyCode||40===t.keyCode)&&(Sb(t),Se(38===t.keyCode?-1:1,e.multiple));const r=F.value;if((void 0===_||b<Date.now())&&(_=""),r>0&&!0!==e.useInput&&void 0!==t.key&&1===t.key.length&&!1===t.altKey&&!1===t.ctrlKey&&!1===t.metaKey&&(32!==t.keyCode||0!==_.length)){!0!==l.value&&$e(t);const i=t.key.toLocaleLowerCase(),n=1===_.length&&_[0]===i;b=Date.now()+1500,!1===n&&(Sb(t),_+=i);const o=new RegExp("^"+_.split("").map((e=>-1!==".*+?^${}()|[]\\".indexOf(e)?"\\"+e:e)).join(".*"),"i");let s=c.value;if(!0===n||s<0||!0!==o.test(pe.value(e.options[s])))do{s=nx(s+1,-1,r-1)}while(s!==c.value&&(!0===fe.value(e.options[s])||!0!==o.test(pe.value(e.options[s]))));c.value!==s&&P((()=>{we(s),$(s),s>=0&&!0===e.useInput&&!0===e.fillInput&&Ae(pe.value(e.options[s]),!0)}))}else if(13===t.keyCode||32===t.keyCode&&!0!==e.useInput&&""===_||9===t.keyCode&&!1!==o){if(9!==t.keyCode&&Sb(t),-1!==c.value&&c.value<r)return void xe(e.options[c.value]);if(!0===n){const t=(t,i)=>{if(i){if(!0!==LT(i))return}else i=e.newValueMode;qe("",!0!==e.multiple,!0),null!=t&&(("toggle"===i?xe:be)(t,"add-unique"===i),!0!==e.multiple&&(M.value?.focus(),He()))};if(void 0!==e.onNewValue?i("newValue",h.value,t):t(h.value),!0!==e.multiple)return}!0===l.value?Ve():!0!==U.innerLoading.value&&$e()}}function Le(){return!0===g?R.value:null!==E.value&&null!==E.value.contentEl?E.value.contentEl:void 0}function Ie(){if(!0===J.value)return void 0!==t["no-option"]?t["no-option"]({inputValue:h.value}):void 0;const e=void 0!==t.option?t.option:e=>k(LE,{key:e.index,...e.itemProps},(()=>k(IE,(()=>k(VE,(()=>k("span",{[!0===e.html?"innerHTML":"textContent"]:e.label})))))));let i=B("div",le.value.map(e));return void 0!==t["before-options"]&&(i=t["before-options"]().concat(i)),mx(t["after-options"],i)}function Re(t){null!==x&&(clearTimeout(x),x=null),null!==w&&(clearTimeout(w),w=null),(!t||!t.target||!0!==t.target.qComposing)&&(Ae(t.target.value||""),m=!0,v=h.value,!0!==U.focused.value&&(!0!==g||!0===d.value)&&U.focus(),void 0!==e.onFilter&&(x=setTimeout((()=>{x=null,Fe(h.value)}),e.inputDebounce)))}function Ae(t,n){h.value!==t&&(h.value=t,!0===n||0===e.inputDebounce||"0"===e.inputDebounce?i("inputValue",t):w=setTimeout((()=>{w=null,i("inputValue",t)}),e.inputDebounce))}function qe(t,i,n){m=!0!==n,!0===e.useInput&&(Ae(t,!0),(!0===i||!0!==n)&&(v=t),!0!==i&&Fe(t))}function Fe(t,o,r){if(void 0===e.onFilter||!0!==o&&!0!==U.focused.value)return;!0===U.innerLoading.value?i("filterAbort"):(U.innerLoading.value=!0,p.value=!0),""!==t&&!0!==e.multiple&&0!==W.value.length&&!0!==m&&t===pe.value(W.value[0])&&(t="");const s=setTimeout((()=>{!0===l.value&&(l.value=!1)}),10);null!==S&&clearTimeout(S),S=s,i("filter",t,((e,t)=>{(!0===o||!0===U.focused.value)&&S===s&&(clearTimeout(S),"function"==typeof e&&e(),p.value=!1,P((()=>{U.innerLoading.value=!1,!0===U.editable.value&&(!0===o?!0===l.value&&He():!0===l.value?We(!0):l.value=!0),"function"==typeof t&&P((()=>{t(n)})),"function"==typeof r&&P((()=>{r(n)}))})))}),(()=>{!0===U.focused.value&&S===s&&(clearTimeout(S),U.innerLoading.value=!1,p.value=!1),!0===l.value&&(l.value=!1)}))}function Oe(e){Ye(e),Ve()}function ze(){H()}function Ne(e){xb(e),M.value?.focus(),d.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function De(e){xb(e),P((()=>{d.value=!1}))}function Ge(e){Ye(e),null!==I.value&&I.value.__updateRefocusTarget(U.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),U.focused.value=!1}function je(e){He(),!1===U.focused.value&&i("blur",e),Ue()}function Be(){const e=document.activeElement;(null===e||e.id!==U.targetUid.value)&&null!==M.value&&M.value!==e&&M.value.focus(),H()}function Ve(){!0!==u.value&&(c.value=-1,!0===l.value&&(l.value=!1),!1===U.focused.value&&(null!==S&&(clearTimeout(S),S=null),!0===U.innerLoading.value&&(i("filterAbort"),U.innerLoading.value=!1,p.value=!1)))}function $e(i){!0===U.editable.value&&(!0===g?(U.onControlFocusin(i),u.value=!0,P((()=>{U.focus()}))):U.focus(),void 0!==e.onFilter?Fe(h.value):(!0!==J.value||void 0!==t["no-option"])&&(l.value=!0))}function He(){u.value=!1,Ve()}function Ue(){!0===e.useInput&&qe(!0!==e.multiple&&!0===e.fillInput&&0!==W.value.length&&pe.value(W.value[0])||"",!0,!0)}function We(t){let i=-1;if(!0===t){if(0!==W.value.length){const t=de.value(W.value[0]);i=e.options.findIndex((e=>Kb(de.value(e),t)))}j(i)}we(i)}function Xe(){!1===u.value&&null!==E.value&&E.value.updatePosition()}function Ke(e){void 0!==e&&xb(e),i("popupShow",e),U.hasPopupOpen=!0,U.onControlFocusin(e)}function Ye(e){void 0!==e&&xb(e),i("popupHide",e),U.hasPopupOpen=!1,U.onControlFocusout(e)}function Ze(){g=!(!0!==o.platform.is.mobile&&"dialog"!==e.behavior||"menu"===e.behavior||!0===e.useInput&&void 0===t["no-option"]&&void 0===e.onFilter&&!1!==J.value),y=!0===o.platform.is.ios&&!0===g&&!0===e.useInput?"fade":e.transitionShow}return r(W,(t=>{f=t,!0===e.useInput&&!0===e.fillInput&&!0!==e.multiple&&!0!==U.innerLoading.value&&(!0!==u.value&&!0!==l.value||!0!==Y.value)&&(!0!==m&&Ue(),(!0===u.value||!0===l.value)&&Fe(""))}),{immediate:!0}),r((()=>e.fillInput),Ue),r(l,We),r(F,(function(e,t){!0===l.value&&!1===U.innerLoading.value&&(j(-1,!0),P((()=>{!0===l.value&&!1===U.innerLoading.value&&(e>t?j():We(!0))})))})),z(Ze),N(Xe),Ze(),L((()=>{null!==x&&clearTimeout(x),null!==w&&clearTimeout(w)})),Object.assign(n,{showPopup:$e,hidePopup:He,removeAtIndex:ye,add:be,toggleOption:xe,getOptionIndex:()=>c.value,setOptionIndex:we,moveOptionSelection:Se,filter:Fe,updateMenuPosition:Xe,updateInputValue:qe,isOptionSelected:Ce,getEmittingOptionValue:ve,isOptionDisabled:(...e)=>!0===fe.value.apply(null,e),getOptionValue:(...e)=>de.value.apply(null,e),getOptionLabel:(...e)=>pe.value.apply(null,e)}),Object.assign(U,{innerValue:W,fieldClass:s((()=>`q-select q-field--auto-height q-select--with${!0!==e.useInput?"out":""}-input q-select--with${!0!==e.useChips?"out":""}-chips q-select--${!0===e.multiple?"multiple":"single"}`)),inputRef:C,targetRef:M,hasValue:Y,showPopup:$e,floatingLabel:s((()=>!0!==e.hideSelected&&!0===Y.value||"number"==typeof h.value||0!==h.value.length||rk(e.displayValue))),getControlChild:()=>{if(!1!==U.editable.value&&(!0===u.value||!0!==J.value||void 0!==t["no-option"]))return!0===g?function(){const i=[k(hk,{class:`col-auto ${U.fieldClass.value}`,...X.value,for:U.targetUid.value,dark:K.value,square:!0,loading:p.value,itemAligned:!1,filled:!0,stackLabel:0!==h.value.length,...U.splitAttrs.listeners.value,onFocus:Ne,onBlur:De},{...t,rawControl:()=>U.getControl(!0),before:void 0,after:void 0})];return!0===l.value&&i.push(k("div",{ref:R,class:Q.value+" scroll",style:e.popupContentStyle,...se.value,onClick:wb,onScrollPassive:V},Ie())),k(SE,{ref:I,modelValue:u.value,position:!0===e.useInput?"top":void 0,transitionShow:y,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Ke,onBeforeHide:Ge,onHide:je,onShow:Be},(()=>k("div",{class:"q-select__dialog"+(!0===K.value?" q-select__dialog--dark q-dark":"")+(!0===d.value?" q-select__dialog--focused":"")},i)))}():k(jS,{ref:E,class:Q.value,style:e.popupContentStyle,modelValue:l.value,fit:!0!==e.menuShrink,cover:!0===e.optionsCover&&!0!==J.value&&!0!==e.useInput,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:K.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:ce.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...se.value,onScrollPassive:V,onBeforeShow:Ke,onBeforeHide:Oe,onShow:ze},Ie);!0===U.hasPopupOpen&&(U.hasPopupOpen=!1)},controlEvents:{onFocusin(e){U.onControlFocusin(e)},onFocusout(e){U.onControlFocusout(e,(()=>{Ue(),Ve()}))},onClick(e){if(wb(e),!0!==g&&!0===l.value)return Ve(),void M.value?.focus();$e(e)}},getControl:i=>{const n=!0===e.hideSelected?[]:void 0!==t["selected-item"]?ae.value.map((e=>t["selected-item"](e))).slice():void 0!==t.selected?[].concat(t.selected()):!0===e.useChips?ae.value.map(((t,i)=>k(PC,{key:"option-"+i,removable:!0===U.editable.value&&!0!==fe.value(t.opt),dense:!0,textColor:e.color,tabindex:oe.value,onRemove(){t.removeAtIndex(i)}},(()=>k("span",{class:"ellipsis",[!0===t.html?"innerHTML":"textContent"]:pe.value(t.opt)}))))):[k("span",{class:"ellipsis",[!0===ne.value?"innerHTML":"textContent"]:te.value})],o=!0===i||!0!==u.value||!0!==g;if(!0===e.useInput)n.push(function(t,i){const n=!0===i?{...re.value,...U.splitAttrs.attributes.value}:void 0,o={ref:!0===i?M:void 0,key:"i_t",class:Z.value,style:e.inputStyle,value:void 0!==h.value?h.value:"",type:"search",...n,id:!0===i?U.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":!0===t||!0===e.autofocus||void 0,disabled:!0===e.disable,readonly:!0===e.readonly,...me.value};return!0!==t&&!0===g&&(!0===Array.isArray(o.class)?o.class=[...o.class,"no-pointer-events"]:o.class+=" no-pointer-events"),k("input",o)}(i,o));else if(!0===U.editable.value){const t=!0===o?re.value:void 0;n.push(k("input",{ref:!0===o?M:void 0,key:"d_t",class:"q-select__focus-target",id:!0===o?U.targetUid.value:void 0,value:te.value,readonly:!0,"data-autofocus":!0===i||!0===e.autofocus||void 0,...t,onKeydown:Pe,onKeyup:Ee,onKeypress:Te})),!0===o&&"string"==typeof e.autocomplete&&0!==e.autocomplete.length&&n.push(k("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ke}))}if(void 0!==A.value&&!0!==e.disable&&0!==ge.value.length){const t=ge.value.map((e=>k("option",{value:e,selected:!0})));n.push(k("select",{class:"hidden",name:A.value,multiple:e.multiple},t))}const r=!0===e.useInput||!0!==o?void 0:U.splitAttrs.attributes.value;return k("div",{class:"q-field__native row items-center",...r,...U.splitAttrs.listeners.value},n)},getInnerAppend:()=>!0!==e.loading&&!0!==p.value&&!0!==e.hideDropdownIcon?[k(Ax,{class:"q-select__dropdown-icon"+(!0===l.value?" rotate-180":""),name:ue.value})]:null}),ck(U)}}),qT=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],FT=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];fb({name:"QSkeleton",props:{...Fx,tag:{type:String,default:"div"},type:{type:String,validator:e=>qT.includes(e),default:"rect"},animation:{type:String,validator:e=>FT.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:t}){const i=T(),n=Ox(e,i.proxy.$q),o=s((()=>{const t=void 0!==e.size?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:t[0],height:t[1]}})),r=s((()=>`q-skeleton q-skeleton--${!0===n.value?"dark":"light"} q-skeleton--type-${e.type}`+("none"!==e.animation?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(!0===e.square?" q-skeleton--square":"")+(!0===e.bordered?" q-skeleton--bordered":"")));return()=>k(e.tag,{class:r.value,style:o.value},fx(t.default))}});var OT=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];fb({name:"QSlideItem",props:{...Fx,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,r=Ox(e,o),{getCache:l}=cC(),u=a(null);let c=null,h={},d={},p={};const f=s((()=>!0===o.lang.rtl?{left:"right",right:"left"}:{left:"left",right:"right"})),g=s((()=>"q-slide-item q-item-type overflow-hidden"+(!0===r.value?" q-slide-item--dark q-dark":"")));function m(){u.value.style.transform="translate(0,0)"}function v(t,n,o){void 0!==e.onSlide&&i("slide",{side:t,ratio:n,isReset:o})}function y(e){const n=u.value;if(e.isFirst)h={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},n.classList.add("no-transition"),OT.forEach((e=>{if(void 0!==t[e[0]]){const t=p[e[0]];t.style.transform="scale(1)",h.size[e[0]]=t.getBoundingClientRect()[e[3]]}})),h.axis="up"===e.direction||"down"===e.direction?"Y":"X";else{if(e.isFinal)return n.classList.remove("no-transition"),void(1===h.scale?(n.style.transform=`translate${h.axis}(${100*h.dir}%)`,null!==c&&clearTimeout(c),c=setTimeout((()=>{c=null,i(h.showing,{reset:m}),i("action",{side:h.showing,reset:m})}),230)):(n.style.transform="translate(0,0)",v(h.showing,0,!0)));e.direction="X"===h.axis?e.offset.x<0?"left":"right":e.offset.y<0?"up":"down"}if(void 0===t.left&&e.direction===f.value.right||void 0===t.right&&e.direction===f.value.left||void 0===t.top&&"down"===e.direction||void 0===t.bottom&&"up"===e.direction)return void(n.style.transform="translate(0,0)");let o,r,s;"X"===h.axis?(r="left"===e.direction?-1:1,o=1===r?f.value.left:f.value.right,s=e.distance.x):(r="up"===e.direction?-2:2,o=2===r?"top":"bottom",s=e.distance.y),(null===h.dir||Math.abs(r)===Math.abs(h.dir))&&(h.dir!==r&&(["left","right","top","bottom"].forEach((e=>{d[e]&&(d[e].style.visibility=o===e?"visible":"hidden")})),h.showing=o,h.dir=r),h.scale=Math.max(0,Math.min(1,(s-40)/h.size[o])),n.style.transform=`translate${h.axis}(${s*r/Math.abs(r)}px)`,p[o].style.transform=`scale(${h.scale})`,v(o,h.scale,!1))}return z((()=>{d={},p={}})),L((()=>{null!==c&&clearTimeout(c)})),Object.assign(n,{reset:m}),()=>{const i=[],n={left:void 0!==t[f.value.right],right:void 0!==t[f.value.left],up:void 0!==t.bottom,down:void 0!==t.top},o=Object.keys(n).filter((e=>!0===n[e]));OT.forEach((n=>{const o=n[0];void 0!==t[o]&&i.push(k("div",{key:o,ref:e=>{d[o]=e},class:`q-slide-item__${o} absolute-full row no-wrap items-${n[1]} justify-${n[2]}`+(void 0!==e[o+"Color"]?` bg-${e[o+"Color"]}`:"")},[k("div",{ref:e=>{p[o]=e}},t[o]())]))}));const r=k("div",{key:(0===o.length?"only-":"")+" content",ref:u,class:"q-slide-item__content"},fx(t.default));return 0===o.length?i.push(r):i.push(S(r,l("dir#"+o.join(""),(()=>{const e={prevent:!0,stop:!0,mouse:!0};return o.forEach((t=>{e[t]=!0})),[[OC,y,void 0,e]]})))),k("div",{class:g.value},i)}}});var zT=fb({name:"QSpace",setup(){const e=k("div",{class:"q-space"});return()=>e}});fb({name:"QSpinnerAudio",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="matrix(1 0 0 -1 0 80)"><rect width="10" height="20" rx="3"><animate attributeName="height" begin="0s" dur="4.3s" values="20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="15" width="10" height="80" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="80;55;33;5;75;23;73;33;12;14;60;80" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" width="10" height="50" rx="3"><animate attributeName="height" begin="0s" dur="1.4s" values="50;34;78;23;56;23;34;76;80;54;21;50" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="45" width="10" height="30" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="30;45;13;80;56;72;45;76;34;23;67;30" calcMode="linear" repeatCount="indefinite"></animate></rect></g>'})}}),fb({name:"QSpinnerBall",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle cx="5" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="27" cy="5" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="49" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),fb({name:"QSpinnerBars",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="60" width="15" height="140" rx="6"><animate attributeName="height" begin="0s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="90" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="120" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect>'})}}),fb({name:"QSpinnerBox",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<rect x="25" y="25" width="50" height="50" fill="none" stroke-width="4" stroke="currentColor"><animateTransform id="spinnerBox" attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" dur="0.5s" begin="rectBox.end"></animateTransform></rect><rect x="27" y="27" width="46" height="50" fill="currentColor"><animate id="rectBox" attributeName="height" begin="0s;spinnerBox.end" dur="1.3s" from="50" to="0" fill="freeze"></animate></rect>'})}}),fb({name:"QSpinnerClock",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="48" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="currentColor"></circle><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="85" y2="50.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2s" repeatCount="indefinite"></animateTransform></line><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="49.5" y2="74"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="15s" repeatCount="indefinite"></animateTransform></line>'})}}),fb({name:"QSpinnerComment",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><path d="M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z" fill="currentColor"></path><circle cx="30" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;1;1" keyTimes="0;0.2;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="50" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.2;0.4;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="70" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.4;0.6;1" dur="1s" repeatCount="indefinite"></animate></circle>'})}}),fb({name:"QSpinnerCube",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<rect x="0" y="0" width="100" height="100" fill="none"></rect><g transform="translate(25 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.1s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(25 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.7"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.3s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.2s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g>'})}}),fb({name:"QSpinnerDots",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),fb({name:"QSpinnerFacebook",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",innerHTML:'<g transform="translate(20 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(50 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.1s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(80 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.2s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g>'})}}),fb({name:"QSpinnerGears",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),fb({name:"QSpinnerGrid",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="12.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="0s" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5"><animate attributeName="fill-opacity" begin="100ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="300ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="600ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="800ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="400ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="700ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="500ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="200ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle>'})}}),fb({name:"QSpinnerHearts",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0.7s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"></path>'})}}),fb({name:"QSpinnerHourglass",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>'})}}),fb({name:"QSpinnerInfinity",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:'<path d="M24.3,30C11.4,30,5,43.3,5,50s6.4,20,19.3,20c19.3,0,32.1-40,51.4-40C88.6,30,95,43.3,95,50s-6.4,20-19.3,20C56.4,70,43.6,30,24.3,30z" fill="none" stroke="currentColor" stroke-width="8" stroke-dasharray="10.691205342610678 10.691205342610678" stroke-dashoffset="0"><animate attributeName="stroke-dashoffset" from="0" to="21.382410685221355" begin="0" dur="2s" repeatCount="indefinite" fill="freeze"></animate></path>'})}}),fb({name:"QSpinnerIos",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64",innerHTML:'<g stroke-width="4" stroke-linecap="round"><line y1="17" y2="29" transform="translate(32,32) rotate(180)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(210)"><animate attributeName="stroke-opacity" dur="750ms" values="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(240)"><animate attributeName="stroke-opacity" dur="750ms" values=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(270)"><animate attributeName="stroke-opacity" dur="750ms" values=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(300)"><animate attributeName="stroke-opacity" dur="750ms" values=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(330)"><animate attributeName="stroke-opacity" dur="750ms" values=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(0)"><animate attributeName="stroke-opacity" dur="750ms" values=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(30)"><animate attributeName="stroke-opacity" dur="750ms" values=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(60)"><animate attributeName="stroke-opacity" dur="750ms" values=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(90)"><animate attributeName="stroke-opacity" dur="750ms" values=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(120)"><animate attributeName="stroke-opacity" dur="750ms" values=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(150)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line></g>'})}}),fb({name:"QSpinnerOrbit",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<circle cx="50" cy="50" r="44" fill="none" stroke-width="4" stroke-opacity=".5" stroke="currentColor"></circle><circle cx="8" cy="54" r="6" fill="currentColor" stroke-width="3" stroke="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 48" to="360 50 52" dur="2s" repeatCount="indefinite"></animateTransform></circle>'})}}),fb({name:"QSpinnerOval",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g>'})}}),fb({name:"QSpinnerPie",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<path d="M0 50A50 50 0 0 1 50 0L50 50L0 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="0.8s" repeatCount="indefinite"></animateTransform></path><path d="M50 0A50 50 0 0 1 100 50L50 50L50 0" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="1.6s" repeatCount="indefinite"></animateTransform></path><path d="M100 50A50 50 0 0 1 50 100L50 50L100 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2.4s" repeatCount="indefinite"></animateTransform></path><path d="M50 100A50 50 0 0 1 0 50L50 50L50 100" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="3.2s" repeatCount="indefinite"></animateTransform></path>'})}}),fb({name:"QSpinnerPuff",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle></g>'})}}),fb({name:"QSpinnerRadio",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g transform="scale(0.55)"><circle cx="30" cy="150" r="30" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></circle><path d="M90,150h30c0-49.7-40.3-90-90-90v30C63.1,90,90,116.9,90,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.1" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path><path d="M150,150h30C180,67.2,112.8,0,30,0v30C96.3,30,150,83.7,150,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.2" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path></g>'})}}),fb({name:"QSpinnerRings",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2"><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="1.5s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="1.5s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="1.5s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="3s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="3s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="3s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="8"><animate attributeName="r" begin="0s" dur="1.5s" values="6;1;2;3;4;5;6" calcMode="linear" repeatCount="indefinite"></animate></circle></g>'})}}),fb({name:"QSpinnerTail",props:ew,setup(e){const{cSize:t,classes:i}=tw(e);return()=>k("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:'<defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="currentColor" stop-opacity="0" offset="0%"></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="currentColor" offset="100%"></stop></linearGradient></defs><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="1"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></circle></g>'})}}),fb({name:"QSplitter",props:{...Fx,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=Ox(e,n),l=a(null),u={before:a(null),after:a(null)},c=s((()=>`q-splitter no-wrap ${!0===e.horizontal?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${!0===e.disable?"disabled":"workable"}`+(!0===o.value?" q-splitter--dark":""))),h=s((()=>!0===e.horizontal?"height":"width")),d=s((()=>!0!==e.reverse?"before":"after")),p=s((()=>void 0!==e.limits?e.limits:"%"===e.unit?[10,90]:[50,1/0]));function f(t){return("%"===e.unit?t:Math.round(t))+e.unit}const g=s((()=>({[d.value]:{[h.value]:f(e.modelValue)}})));let m,v,y,_,b;function x(t){if(!0===t.isFirst){const t=l.value.getBoundingClientRect()[h.value];return m=!0===e.horizontal?"up":"left",v="%"===e.unit?100:t,y=Math.min(v,p.value[1],Math.max(p.value[0],e.modelValue)),_=(!0!==e.reverse?1:-1)*(!0===e.horizontal?1:!0===n.lang.rtl?-1:1)*("%"===e.unit?0===t?0:100/t:1),void l.value.classList.add("q-splitter--active")}if(!0===t.isFinal)return b!==e.modelValue&&i("update:modelValue",b),void l.value.classList.remove("q-splitter--active");const o=y+_*(t.direction===m?-1:1)*t.distance[!0===e.horizontal?"y":"x"];b=Math.min(v,p.value[1],Math.max(p.value[0],o)),u[d.value].value.style[h.value]=f(b),!0===e.emitImmediately&&e.modelValue!==b&&i("update:modelValue",b)}const w=s((()=>[[OC,x,void 0,{[!0===e.horizontal?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]));function S(e,t){e<t[0]?i("update:modelValue",t[0]):e>t[1]&&i("update:modelValue",t[1])}return r((()=>e.modelValue),(e=>{S(e,p.value)})),r((()=>e.limits),(()=>{P((()=>{S(e.modelValue,p.value)}))})),()=>{const i=[k("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(!0===e.reverse?" col":""),e.beforeClass],style:g.value.before},fx(t.before)),k("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":!0===e.disable?"true":void 0},[yx("div",{class:"q-splitter__separator-area absolute-full"},fx(t.separator),"sep",!0!==e.disable,(()=>w.value))]),k("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(!0===e.reverse?"":" col"),e.afterClass],style:g.value.after},fx(t.after))];return k("div",{class:c.value,ref:l},mx(t.default,i))}}});var NT=fb({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:t}){const{proxy:{$q:i}}=T(),n=a(null),o=s((()=>e.stepper.modelValue===e.step.name)),r=s((()=>{const t=e.step.disable;return!0===t||""===t})),l=s((()=>{const t=e.step.error;return!0===t||""===t})),u=s((()=>{const t=e.step.done;return!1===r.value&&(!0===t||""===t)})),c=s((()=>{const t=e.step.headerNav,i=!0===t||""===t||void 0===t;return!1===r.value&&e.stepper.headerNav&&i})),h=s((()=>e.step.prefix&&(!1===o.value||"none"===e.stepper.activeIcon)&&(!1===l.value||"none"===e.stepper.errorIcon)&&(!1===u.value||"none"===e.stepper.doneIcon))),d=s((()=>{const t=e.step.icon||e.stepper.inactiveIcon;if(!0===o.value){const n=e.step.activeIcon||e.stepper.activeIcon;return"none"===n?t:n||i.iconSet.stepper.active}if(!0===l.value){const n=e.step.errorIcon||e.stepper.errorIcon;return"none"===n?t:n||i.iconSet.stepper.error}if(!1===r.value&&!0===u.value){const n=e.step.doneIcon||e.stepper.doneIcon;return"none"===n?t:n||i.iconSet.stepper.done}return t})),p=s((()=>{const t=!0===l.value?e.step.errorColor||e.stepper.errorColor:void 0;if(!0===o.value){const i=e.step.activeColor||e.stepper.activeColor||e.step.color;return void 0!==i?i:t}return void 0!==t?t:!1===r.value&&!0===u.value?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor})),f=s((()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(void 0!==p.value?` text-${p.value}`:"")+(!0===l.value?" q-stepper__tab--error q-stepper__tab--error-with-"+(!0===h.value?"prefix":"icon"):"")+(!0===o.value?" q-stepper__tab--active":"")+(!0===u.value?" q-stepper__tab--done":"")+(!0===c.value?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(!0===r.value?" q-stepper__tab--disabled":""))),g=s((()=>!0===e.stepper.headerNav&&c.value));function m(){n.value?.focus(),!1===o.value&&e.goToPanel(e.step.name)}function v(t){13===t.keyCode&&!1===o.value&&e.goToPanel(e.step.name)}return()=>{const i={class:f.value};!0===c.value&&(i.onClick=m,i.onKeyup=v,Object.assign(i,!0===r.value?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0}));const o=[k("div",{class:"q-focus-helper",tabindex:-1,ref:n}),k("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[k("span",{class:"row flex-center"},[!0===h.value?e.step.prefix:k(Ax,{name:d.value})])])];if(void 0!==e.step.title&&null!==e.step.title){const t=[k("div",{class:"q-stepper__title"},e.step.title)];void 0!==e.step.caption&&null!==e.step.caption&&t.push(k("div",{class:"q-stepper__caption"},e.step.caption)),o.push(k("div",{class:"q-stepper__label q-stepper__line relative-position"},t))}return S(k("div",i,o),[[cw,g.value]])}}});function DT(e){return k("div",{class:"q-stepper__step-content"},[k("div",{class:"q-stepper__step-inner"},fx(e.default))])}var GT={setup:(e,{slots:t})=>()=>DT(t)};fb({name:"QStep",props:{...hC,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:t,emit:i}){const{proxy:{$q:n}}=T(),o=M(Gb,Wb);if(o===Wb)return Wb;const{getCache:r}=cC(),l=a(null),u=s((()=>o.value.modelValue===e.name)),c=s((()=>!0!==n.platform.is.ios&&!0===n.platform.is.chrome||!0!==u.value||!0!==o.value.vertical?{}:{onScroll(t){const{target:n}=t;n.scrollTop>0&&(n.scrollTop=0),void 0!==e.onScroll&&i("scroll",t)}})),h=s((()=>"string"==typeof e.name||"number"==typeof e.name?e.name:String(e.name)));function d(){const e=o.value.vertical;return!0===e&&!0===o.value.keepAlive?k(D,o.value.keepAliveProps.value,!0===u.value?[k(!0===o.value.needsUniqueKeepAliveWrapper.value?r(h.value,(()=>({...GT,name:h.value}))):GT,{key:h.value},t.default)]:void 0):!0!==e||!0===u.value?DT(t):void 0}return()=>k("div",{ref:l,class:"q-stepper__step",role:"tabpanel",...c.value},!0===o.value.vertical?[k(NT,{stepper:o.value,step:e,goToPanel:o.value.goToPanel}),!0===o.value.animated?k($E,d):d()]:[d()])}});var jT=/(-\w)/g;fb({name:"QStepper",props:{...Fx,...pC,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:fC,setup(e,{slots:t}){const i=T(),n=Ox(e,i.proxy.$q),{updatePanelsList:o,isValidPanelName:r,updatePanelIndex:a,getPanelContent:l,getPanels:u,panelDirectives:c,goToPanel:h,keepAliveProps:d,needsUniqueKeepAliveWrapper:p}=gC();W(Gb,s((()=>({goToPanel:h,keepAliveProps:d,needsUniqueKeepAliveWrapper:p,...e}))));const f=s((()=>"q-stepper q-stepper--"+(!0===e.vertical?"vertical":"horizontal")+(!0===e.flat?" q-stepper--flat":"")+(!0===e.bordered?" q-stepper--bordered":"")+(!0===n.value?" q-stepper--dark q-dark":""))),g=s((()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${!0===e.alternativeLabels?"alternative":"standard"}-labels`+(!1===e.flat||!0===e.bordered?" q-stepper__header--border":"")+(!0===e.contracted?" q-stepper__header--contracted":"")+(void 0!==e.headerClass?` ${e.headerClass}`:"")));return()=>(o(t),k("div",{class:f.value},mx(t.navigation,function(){const i=fx(t.message,[]);if(!0===e.vertical){r(e.modelValue)&&a();const n=k("div",{class:"q-stepper__content"},fx(t.default));return void 0===i?[n]:i.concat(n)}return[k("div",{class:g.value},u().map((t=>{const i=function(e){const t={};for(const i in e)t[i.replace(jT,(e=>e[1].toUpperCase()))]=e[i];return t}(t.props);return k(NT,{key:i.name,stepper:e,step:i,goToPanel:h})}))),i,yx("div",{class:"q-stepper__content q-panel-parent"},l(),"cont",e.swipeable,(()=>c.value))]}())))}}),fb({name:"QStepperNavigation",setup:(e,{slots:t})=>()=>k("div",{class:"q-stepper__nav"},fx(t.default))});var BT=fb({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:i}){const n=T(),{proxy:{$q:o}}=n,r=e=>{i("click",e)};return()=>{if(void 0===e.props)return k("th",{class:!0===e.autoWidth?"q-table--col-auto-width":"",onClick:r},fx(t.default));let i,s;const a=n.vnode.key;if(a){if(i=e.props.colsMap[a],void 0===i)return}else i=e.props.col;if(!0===i.sortable){const e="right"===i.align?"unshift":"push";s=gx(t.default,[]),s[e](k(Ax,{class:i.__iconClass,name:o.iconSet.table.arrowUp}))}else s=fx(t.default);const l={class:i.__thClass+(!0===e.autoWidth?" q-table--col-auto-width":""),style:i.headerStyle,onClick:t=>{!0===i.sortable&&e.props.sort(i),r(t)}};return k("th",l,s)}}});function VT(e,t){return k("div",e,[k("table",{class:"q-table"},t)])}var $T={list:jk,table:Xk},HT=["list","table","__qtable"],UT=fb({name:"QVirtualScroll",props:{...TT,type:{type:String,default:"list",validator:e=>HT.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:eS},setup(e,{slots:t,attrs:i}){let n;const o=a(null),u=s((()=>e.itemsSize>=0&&void 0!==e.itemsFn?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0)),{virtualScrollSliceRange:c,localResetVirtualScroll:h,padVirtualScroll:d,onVirtualScrollEvt:p}=PT({virtualScrollLength:u,getVirtualScrollTarget:function(){return n},getVirtualScrollEl:v}),f=s((()=>{if(0===u.value)return[];const t=(e,t)=>({index:c.value.from+t,item:e});return void 0===e.itemsFn?e.items.slice(c.value.from,c.value.to).map(t):e.itemsFn(c.value.from,c.value.to-c.value.from).map(t)})),g=s((()=>"q-virtual-scroll q-virtual-scroll"+(!0===e.virtualScrollHorizontal?"--horizontal":"--vertical")+(void 0!==e.scrollTarget?"":" scroll"))),m=s((()=>void 0!==e.scrollTarget?{}:{tabindex:0}));function v(){return o.value.$el||o.value}function y(){n=iS(v(),e.scrollTarget),n.addEventListener("scroll",p,vb.passive)}function _(){void 0!==n&&(n.removeEventListener("scroll",p,vb.passive),n=void 0)}function b(){let i=d("list"===e.type?"div":"tbody",f.value.map(t.default));return void 0!==t.before&&(i=t.before().concat(i)),mx(t.after,i)}return r(u,(()=>{h()})),r((()=>e.scrollTarget),(()=>{_(),y()})),G((()=>{h()})),l((()=>{y()})),R((()=>{y()})),I((()=>{_()})),L((()=>{_()})),()=>{if(void 0!==t.default)return"__qtable"===e.type?VT({ref:o,class:"q-table__middle "+g.value},b()):k($T[e.type],{...i,ref:o,class:[i.class,g.value],...m.value},b)}}}),WT={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>"ad"===e||"da"===e,default:"ad"}};var XT={filter:[String,Object],filterMethod:Function};function KT(e){return e.page<1&&(e.page=1),void 0!==e.rowsPerPage&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}var YT={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]},ZT={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}};function QT(e){return Array.isArray(e)?e.slice():[]}var JT={expanded:Array},eP={visibleColumns:Array},tP="q-table__bottom row items-center",iP={};function nP(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}kT.forEach((e=>{iP[e]={}})),fb({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...iP,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Fx,...vC,...eP,...XT,...YT,...JT,...ZT,...WT},emits:["request","virtualScroll",...yC,"update:expanded","update:selected","selection"],setup(e,{slots:t,emit:i}){const n=T(),{proxy:{$q:o}}=n,l=Ox(e,o),{inFullscreen:u,toggleFullscreen:c}=_C(),h=s((()=>"function"==typeof e.rowKey?e.rowKey:t=>t[e.rowKey])),d=a(null),p=a(null),f=s((()=>!0!==e.grid&&!0===e.virtualScroll)),g=s((()=>" q-table__card"+(!0===l.value?" q-table__card--dark q-dark":"")+(!0===e.square?" q-table--square":"")+(!0===e.flat?" q-table--flat":"")+(!0===e.bordered?" q-table--bordered":""))),m=s((()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(!0===e.grid?" q-table--grid":g.value)+(!0===l.value?" q-table--dark":"")+(!0===e.dense?" q-table--dense":"")+(!1===e.wrapCells?" q-table--no-wrap":"")+(!0===u.value?" fullscreen scroll":""))),v=s((()=>m.value+(!0===e.loading?" q-table--loading":"")));r((()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+m.value),(()=>{!0===f.value&&p.value?.reset()}));const{innerPagination:y,computedPagination:_,isServerSide:b,requestServerInteraction:x,setPagination:w}=function(e,t){const{props:i,emit:n}=e,o=a(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:0!==i.rowsPerPageOptions.length?i.rowsPerPageOptions[0]:5},i.pagination)),r=s((()=>KT(void 0!==i["onUpdate:pagination"]?{...o.value,...i.pagination}:o.value))),l=s((()=>void 0!==r.value.rowsNumber));function u(e){c({pagination:e,filter:i.filter})}function c(e={}){P((()=>{n("request",{pagination:e.pagination||r.value,filter:e.filter||i.filter,getCellValue:t})}))}return{innerPagination:o,computedPagination:r,isServerSide:l,requestServerInteraction:c,setPagination:function(e,t){const s=KT({...r.value,...e});!0!==function(e,t){for(const i in t)if(t[i]!==e[i])return!1;return!0}(r.value,s)?!0!==l.value?void 0!==i.pagination&&void 0!==i["onUpdate:pagination"]?n("update:pagination",s):o.value=s:u(s):!0===l.value&&!0===t&&u(s)}}}(n,fe),{computedFilterMethod:S}=function(e,t){const i=s((()=>void 0!==e.filterMethod?e.filterMethod:(e,t,i,n)=>{const o=t?t.toLowerCase():"";return e.filter((e=>i.some((t=>{const i=n(t,e)+"";return-1!==("undefined"===i||"null"===i?"":i.toLowerCase()).indexOf(o)}))))}));return r((()=>e.filter),(()=>{P((()=>{t({page:1},!0)}))}),{deep:!0}),{computedFilterMethod:i}}(e,w),{isRowExpanded:C,setExpanded:M,updateExpanded:E}=function(e,t){const i=a(QT(e.expanded));function n(n){void 0!==e.expanded?t("update:expanded",n):i.value=n}return r((()=>e.expanded),(e=>{i.value=QT(e)})),{isRowExpanded:function(e){return i.value.includes(e)},setExpanded:n,updateExpanded:function(e,t){const o=i.value.slice(),r=o.indexOf(e);!0===t?-1===r&&(o.push(e),n(o)):-1!==r&&(o.splice(r,1),n(o))}}}(e,i),L=s((()=>{let t=e.rows;if(!0===b.value||0===t.length)return t;const{sortBy:i,descending:n}=_.value;return e.filter&&(t=S.value(t,e.filter,V.value,fe)),null!==U.value&&(t=W.value(e.rows===t?t.slice():t,i,n)),t})),I=s((()=>L.value.length)),R=s((()=>{let t=L.value;if(!0===b.value)return t;const{rowsPerPage:i}=_.value;return 0!==i&&(0===K.value&&e.rows!==t?t.length>Y.value&&(t=t.slice(0,Y.value)):t=t.slice(K.value,Y.value)),t})),{hasSelectionMode:A,singleSelection:q,multipleSelection:F,allRowsSelected:O,someRowsSelected:z,rowsSelectedNumber:N,isRowSelected:D,clearSelection:G,updateSelection:j}=function(e,t,i,n){const o=s((()=>{const t={};return e.selected.map(n.value).forEach((e=>{t[e]=!0})),t})),r=s((()=>"none"!==e.selection)),a=s((()=>"single"===e.selection)),l=s((()=>"multiple"===e.selection)),u=s((()=>0!==i.value.length&&i.value.every((e=>!0===o.value[n.value(e)])))),c=s((()=>!0!==u.value&&i.value.some((e=>!0===o.value[n.value(e)])))),h=s((()=>e.selected.length));return{hasSelectionMode:r,singleSelection:a,multipleSelection:l,allRowsSelected:u,someRowsSelected:c,rowsSelectedNumber:h,isRowSelected:function(e){return!0===o.value[e]},clearSelection:function(){t("update:selected",[])},updateSelection:function(i,o,r,s){t("selection",{rows:o,added:r,keys:i,evt:s});const l=!0===a.value?!0===r?o:[]:!0===r?e.selected.concat(o):e.selected.filter((e=>!1===i.includes(n.value(e))));t("update:selected",l)}}}(e,i,R,h),{colList:B,computedCols:V,computedColsMap:$,computedColspan:H}=function(e,t,i){const n=s((()=>{if(void 0!==e.columns)return e.columns;const t=e.rows[0];return void 0!==t?Object.keys(t).map((e=>({name:e,label:e.toUpperCase(),field:e,align:Qb(t[e])?"right":"left",sortable:!0}))):[]})),o=s((()=>{const{sortBy:i,descending:o}=t.value;return(void 0!==e.visibleColumns?n.value.filter((t=>!0===t.required||!0===e.visibleColumns.includes(t.name))):n.value).map((e=>{const t=e.align||"right",n=`text-${t}`;return{...e,align:t,__iconClass:`q-table__sort-icon q-table__sort-icon--${t}`,__thClass:n+(void 0!==e.headerClasses?" "+e.headerClasses:"")+(!0===e.sortable?" sortable":"")+(e.name===i?" sorted "+(!0===o?"sort-desc":""):""),__tdStyle:void 0!==e.style?"function"!=typeof e.style?()=>e.style:e.style:()=>null,__tdClass:void 0!==e.classes?"function"!=typeof e.classes?()=>n+" "+e.classes:t=>n+" "+e.classes(t):()=>n}}))})),r=s((()=>{const e={};return o.value.forEach((t=>{e[t.name]=t})),e})),a=s((()=>void 0!==e.tableColspan?e.tableColspan:o.value.length+(!0===i.value?1:0)));return{colList:n,computedCols:o,computedColsMap:r,computedColspan:a}}(e,_,A),{columnToSort:U,computedSortMethod:W,sort:X}=function(e,t,i,n){return{columnToSort:s((()=>{const{sortBy:e}=t.value;return e&&i.value.find((t=>t.name===e))||null})),computedSortMethod:s((()=>void 0!==e.sortMethod?e.sortMethod:(e,t,n)=>{const o=i.value.find((e=>e.name===t));if(void 0===o||void 0===o.field)return e;const r=!0===n?-1:1,s="function"==typeof o.field?e=>o.field(e):e=>e[o.field];return e.sort(((e,t)=>{let i=s(e),n=s(t);return void 0!==o.rawSort?o.rawSort(i,n,e,t)*r:null==i?-1*r:null==n?1*r:void 0!==o.sort?o.sort(i,n,e,t)*r:!0===Qb(i)&&!0===Qb(n)?(i-n)*r:!0===Zb(i)&&!0===Zb(n)?(a=n,(new Date(i)-new Date(a))*r):"boolean"==typeof i&&"boolean"==typeof n?(i-n)*r:([i,n]=[i,n].map((e=>(e+"").toLocaleString().toLowerCase())),i<n?-1*r:i===n?0:r);var a}))})),sort:function(o){let r=e.columnSortOrder;if(!0===Yb(o))o.sortOrder&&(r=o.sortOrder),o=o.name;else{const e=i.value.find((e=>e.name===o));e?.sortOrder&&(r=e.sortOrder)}let{sortBy:s,descending:a}=t.value;s!==o?(s=o,a="da"===r):!0===e.binaryStateSort?a=!a:!0===a?"ad"===r?s=null:a=!1:"ad"===r?a=!0:s=null,n({sortBy:s,descending:a,page:1})}}}(e,_,B,w),{firstRowIndex:K,lastRowIndex:Y,isFirstPage:Z,isLastPage:Q,pagesNumber:J,computedRowsPerPageOptions:ee,computedRowsNumber:te,firstPage:ie,prevPage:ne,nextPage:oe,lastPage:re}=function(e,t,i,n,o,a){const{props:l,emit:u,proxy:{$q:c}}=e,h=s((()=>!0===n.value?i.value.rowsNumber||0:a.value)),d=s((()=>{const{page:e,rowsPerPage:t}=i.value;return(e-1)*t})),p=s((()=>{const{page:e,rowsPerPage:t}=i.value;return e*t})),f=s((()=>1===i.value.page)),g=s((()=>0===i.value.rowsPerPage?1:Math.max(1,Math.ceil(h.value/i.value.rowsPerPage)))),m=s((()=>0===p.value||i.value.page>=g.value)),v=s((()=>(l.rowsPerPageOptions.includes(t.value.rowsPerPage)?l.rowsPerPageOptions:[t.value.rowsPerPage].concat(l.rowsPerPageOptions)).map((e=>({label:0===e?c.lang.table.allRows:""+e,value:e})))));return r(g,((e,t)=>{if(e===t)return;const n=i.value.page;e&&!n?o({page:1}):e<n&&o({page:e})})),void 0!==l["onUpdate:pagination"]&&u("update:pagination",{...i.value}),{firstRowIndex:d,lastRowIndex:p,isFirstPage:f,isLastPage:m,pagesNumber:g,computedRowsPerPageOptions:v,computedRowsNumber:h,firstPage:function(){o({page:1})},prevPage:function(){const{page:e}=i.value;e>1&&o({page:e-1})},nextPage:function(){const{page:e,rowsPerPage:t}=i.value;p.value>0&&e*t<h.value&&o({page:e+1})},lastPage:function(){o({page:g.value})}}}(n,y,_,b,w,I),se=s((()=>0===R.value.length)),ae=s((()=>{const t={};return kT.forEach((i=>{t[i]=e[i]})),void 0===t.virtualScrollItemSize&&(t.virtualScrollItemSize=!0===e.dense?28:48),t}));function le(e){i("virtualScroll",e)}function ue(){return[k(hT,{class:"q-table__linear-progress",color:e.color,dark:l.value,indeterminate:!0,trackColor:"transparent"})]}function ce(n,o,r){const s=h.value(n),a=D(s);if(void 0!==o){const t={key:s,row:n,pageIndex:r,__trClass:a?"selected":""};if(void 0!==e.tableRowStyleFn&&(t.__trStyle=e.tableRowStyleFn(n)),void 0!==e.tableRowClassFn){const i=e.tableRowClassFn(n);i&&(t.__trClass=`${i} ${t.__trClass}`)}return o(de(t))}const u=t["body-cell"],c=V.value.map((e=>{const i=t[`body-cell-${e.name}`],o=void 0!==i?i:u;return void 0!==o?o((pe(a={key:s,row:n,pageIndex:r,col:e}),rb(a,"value",(()=>fe(a.col,a.row))),a)):k("td",{class:e.__tdClass(n),style:e.__tdStyle(n)},fe(e,n));var a}));if(!0===A.value){const i=t["body-selection"],o=void 0!==i?i((pe(d={key:s,row:n,pageIndex:r}),d)):[k(kC,{modelValue:a,color:e.color,dark:l.value,dense:e.dense,"onUpdate:modelValue":(e,t)=>{j([s],[n],e,t)}})];c.unshift(k("td",{class:"q-table--col-auto-width"},o))}var d;const p={key:s,class:{selected:a}};if(void 0!==e.onRowClick&&(p.class["cursor-pointer"]=!0,p.onClick=e=>{i("rowClick",e,n,r)}),void 0!==e.onRowDblclick&&(p.class["cursor-pointer"]=!0,p.onDblclick=e=>{i("rowDblclick",e,n,r)}),void 0!==e.onRowContextmenu&&(p.class["cursor-pointer"]=!0,p.onContextmenu=e=>{i("rowContextmenu",e,n,r)}),void 0!==e.tableRowStyleFn&&(p.style=e.tableRowStyleFn(n)),void 0!==e.tableRowClassFn){const t=e.tableRowClassFn(n);t&&(p.class[t]=!0)}return k("tr",p,c)}function he(){const e=t.body,i=t["top-row"],n=t["bottom-row"];let o=R.value.map(((t,i)=>ce(t,e,i)));return void 0!==i&&(o=i({cols:V.value}).concat(o)),void 0!==n&&(o=o.concat(n({cols:V.value}))),k("tbody",o)}function de(e){return pe(e),e.cols=e.cols.map((t=>rb({...t},"value",(()=>fe(t,e.row))))),e}function pe(t){Object.assign(t,{cols:V.value,colsMap:$.value,sort:X,rowIndex:K.value+t.pageIndex,color:e.color,dark:l.value,dense:e.dense}),!0===A.value&&rb(t,"selected",(()=>D(t.key)),((e,i)=>{j([t.key],[t.row],e,i)})),rb(t,"expand",(()=>C(t.key)),(e=>{E(t.key,e)}))}function fe(e,t){const i="function"==typeof e.field?e.field(t):t[e.field];return void 0!==e.format?e.format(i,t):i}const ge=s((()=>({pagination:_.value,pagesNumber:J.value,isFirstPage:Z.value,isLastPage:Q.value,firstPage:ie,prevPage:ne,nextPage:oe,lastPage:re,inFullscreen:u.value,toggleFullscreen:c})));function me(){const i=t.top,n=t["top-left"],o=t["top-right"],r=t["top-selection"],s=!0===A.value&&void 0!==r&&N.value>0,a="q-table__top relative-position row items-center";if(void 0!==i)return k("div",{class:a},[i(ge.value)]);let l;return!0===s?l=r(ge.value).slice():(l=[],void 0!==n?l.push(k("div",{class:"q-table__control"},[n(ge.value)])):e.title&&l.push(k("div",{class:"q-table__control"},[k("div",{class:["q-table__title",e.titleClass]},e.title)]))),void 0!==o&&(l.push(k("div",{class:"q-table__separator col"})),l.push(k("div",{class:"q-table__control"},[o(ge.value)]))),0!==l.length?k("div",{class:a},l):void 0}const ve=s((()=>!0===z.value?null:O.value));function ye(){const i=function(){const i=t.header,n=t["header-cell"];if(void 0!==i)return i(_e({header:!0})).slice();const o=V.value.map((e=>{const i=t[`header-cell-${e.name}`],o=void 0!==i?i:n,r=_e({col:e});return void 0!==o?o(r):k(BT,{key:e.name,props:r},(()=>e.label))}));if(!0===q.value&&!0!==e.grid)o.unshift(k("th",{class:"q-table--col-auto-width"}," "));else if(!0===F.value){const i=t["header-selection"],n=void 0!==i?i(_e({})):[k(kC,{color:e.color,modelValue:ve.value,dark:l.value,dense:e.dense,"onUpdate:modelValue":be})];o.unshift(k("th",{class:"q-table--col-auto-width"},n))}return[k("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},o)]}();return!0===e.loading&&void 0===t.loading&&i.push(k("tr",{class:"q-table__progress"},[k("th",{class:"relative-position",colspan:H.value},ue())])),k("thead",i)}function _e(t){return Object.assign(t,{cols:V.value,sort:X,colsMap:$.value,color:e.color,dark:l.value,dense:e.dense}),!0===F.value&&rb(t,"selected",(()=>ve.value),be),t}function be(e){!0===z.value&&(e=!1),j(R.value.map(h.value),R.value,e)}const xe=s((()=>{const t=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return!0===o.lang.rtl?t.reverse():t}));function we(e){w({page:1,rowsPerPage:e.value})}return Object.assign(n.proxy,{requestServerInteraction:x,setPagination:w,firstPage:ie,prevPage:ne,nextPage:oe,lastPage:re,isRowSelected:D,clearSelection:G,isRowExpanded:C,setExpanded:M,sort:X,resetVirtualScroll:function(){!0===f.value&&p.value.reset()},scrollTo:function(t,n){if(null!==p.value)return void p.value.scrollTo(t,n);t=parseInt(t,10);const o=d.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(null!==o){const n=d.value.querySelector(".q-table__middle.scroll"),r=o.offsetTop-e.virtualScrollStickySizeStart,s=r<n.scrollTop?"decrease":"increase";n.scrollTop=r,i("virtualScroll",{index:t,from:0,to:y.value.rowsPerPage-1,direction:s})}},getCellValue:fe}),sb(n.proxy,{filteredSortedRows:()=>L.value,computedRows:()=>R.value,computedRowsNumber:()=>te.value}),()=>{const n=[me()],r={ref:d,class:v.value};return!0===e.grid?n.push(function(){const i=!0===e.gridHeader?[k("table",{class:"q-table"},[ye()])]:!0===e.loading&&void 0===t.loading?ue():void 0;return k("div",{class:"q-table__middle"},i)}()):Object.assign(r,{class:[r.class,e.cardClass],style:e.cardStyle}),n.push(function(){if(!0===e.grid)return function(){const n=void 0!==t.item?t.item:n=>{const o=n.cols.map((e=>k("div",{class:"q-table__grid-item-row"},[k("div",{class:"q-table__grid-item-title"},[e.label]),k("div",{class:"q-table__grid-item-value"},[e.value])])));if(!0===A.value){const i=t["body-selection"],r=void 0!==i?i(n):[k(kC,{modelValue:n.selected,color:e.color,dark:l.value,dense:e.dense,"onUpdate:modelValue":(e,t)=>{j([n.key],[n.row],e,t)}})];o.unshift(k("div",{class:"q-table__grid-item-row"},r),k(WE,{dark:l.value}))}const r={class:["q-table__grid-item-card"+g.value,e.cardClass],style:e.cardStyle};if(void 0!==e.cardStyleFn&&(r.style=[r.style,e.cardStyleFn(n.row)]),void 0!==e.cardClassFn){const t=e.cardClassFn(n.row);t&&(r.class[0]+=` ${t}`)}return(void 0!==e.onRowClick||void 0!==e.onRowDblclick||void 0!==e.onRowContextmenu)&&(r.class[0]+=" cursor-pointer",void 0!==e.onRowClick&&(r.onClick=e=>{i("RowClick",e,n.row,n.pageIndex)}),void 0!==e.onRowDblclick&&(r.onDblclick=e=>{i("RowDblclick",e,n.row,n.pageIndex)}),void 0!==e.onRowContextmenu&&(r.onContextmenu=e=>{i("rowContextmenu",e,n.row,n.pageIndex)})),k("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(!0===n.selected?" q-table__grid-item--selected":"")},[k("div",r,o)])};return k("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},R.value.map(((e,t)=>n(de({key:h.value(e),row:e,pageIndex:t})))))}();const n=!0!==e.hideHeader?ye:null;if(!0===f.value){const i=t["top-row"],o=t["bottom-row"],r={default:e=>ce(e.item,t.body,e.index)};if(void 0!==i){const e=k("tbody",i({cols:V.value}));r.before=null===n?()=>e:()=>[n()].concat(e)}else null!==n&&(r.before=n);return void 0!==o&&(r.after=()=>k("tbody",o({cols:V.value}))),k(UT,{ref:p,class:e.tableClass,style:e.tableStyle,...ae.value,scrollTarget:e.virtualScrollTarget,items:R.value,type:"__qtable",tableColspan:H.value,onVirtualScroll:le},r)}const o=[he()];return null!==n&&o.unshift(n()),VT({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},o)}(),function(){if(!0===e.hideBottom)return;if(!0===se.value){if(!0===e.hideNoData)return;const i=!0===e.loading?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,n=t["no-data"],r=void 0!==n?[n({message:i,icon:o.iconSet.table.warning,filter:e.filter})]:[k(Ax,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),i];return k("div",{class:tP+" q-table__bottom--nodata"},r)}const i=t.bottom;if(void 0!==i)return k("div",{class:tP},[i(ge.value)]);const n=!0!==e.hideSelectedBanner&&!0===A.value&&N.value>0?[k("div",{class:"q-table__control"},[k("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(N.value)])])]:[];return!0!==e.hidePagination?k("div",{class:tP+" justify-end"},function(i){let n;const{rowsPerPage:r}=_.value,s=e.paginationLabel||o.lang.table.pagination,a=t.pagination,u=e.rowsPerPageOptions.length>1;if(i.push(k("div",{class:"q-table__separator col"})),!0===u&&i.push(k("div",{class:"q-table__control"},[k("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),k(AT,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:r,options:ee.value,displayValue:0===r?o.lang.table.allRows:r,dark:l.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":we})])),void 0!==a)n=a(ge.value);else if(n=[k("span",0!==r?{class:"q-table__bottom-item"}:{},[r?s(K.value+1,Math.min(Y.value,te.value),te.value):s(1,I.value,te.value)])],0!==r&&J.value>1){const t={color:e.color,round:!0,dense:!0,flat:!0};!0===e.dense&&(t.size="sm"),J.value>2&&n.push(k(Cw,{key:"pgFirst",...t,icon:xe.value[0],disable:Z.value,"aria-label":o.lang.pagination.first,onClick:ie})),n.push(k(Cw,{key:"pgPrev",...t,icon:xe.value[1],disable:Z.value,"aria-label":o.lang.pagination.prev,onClick:ne}),k(Cw,{key:"pgNext",...t,icon:xe.value[2],disable:Q.value,"aria-label":o.lang.pagination.next,onClick:oe})),J.value>2&&n.push(k(Cw,{key:"pgLast",...t,icon:xe.value[3],disable:Q.value,"aria-label":o.lang.pagination.last,onClick:re}))}return i.push(k("div",{class:"q-table__control"},n)),i}(n)):0!==n.length?k("div",{class:tP},n):void 0}()),!0===e.loading&&void 0!==t.loading&&n.push(t.loading()),k("div",r,n)}}}),fb({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const i=s((()=>"q-tr"+(void 0===e.props||!0===e.props.header?"":" "+e.props.__trClass)+(!0===e.noHover?" q-tr--no-hover":"")));return()=>k("tr",{style:e.props?.__trStyle,class:i.value},fx(t.default))}}),fb({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const i=T(),n=s((()=>"q-td"+(!0===e.autoWidth?" q-table--col-auto-width":"")+(!0===e.noHover?" q-td--no-hover":"")+" "));return()=>{if(void 0===e.props)return k("td",{class:n.value},fx(t.default));const o=i.vnode.key,r=(void 0!==e.props.colsMap?e.props.colsMap[o]:null)||e.props.col;if(void 0===r)return;const{row:s}=e.props;return k("td",{class:n.value+r.__tdClass(s),style:r.__tdStyle(s)},fx(t.default))}}}),fb({name:"QRouteTab",props:{...Qx,...iM},emits:tM,setup(e,{slots:t,emit:i}){const n=Jx({useDisableForRouterLinkProps:!1}),{renderTab:o,$tabs:a}=nM(e,t,i,{exact:s((()=>e.exact)),...n});return r((()=>`${e.name} | ${e.exact} | ${(n.resolvedLink.value||{}).href}`),a.verifyRouteModel),()=>o(n.linkTag.value,n.linkAttrs.value)}}),fb({name:"QTime",props:{...Fx,...YS,...IM,modelValue:{required:!0,validator:e=>"string"==typeof e||null===e},mask:{...IM.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:RM,setup(e,{slots:t,emit:i}){const n=T(),{$q:o}=n.proxy,l=Ox(e,o),{tabindex:u,headerClass:c,getLocale:h,getCurrentDate:d}=qM(e,o),p=QS(ZS(e));let f,g;const m=a(null),v=s((()=>"persian"!==e.calendar&&null!==e.mask?e.mask:"HH:mm"+(!0===e.withSeconds?":ss":""))),y=s((()=>h())),_=s((()=>function(){if("string"!=typeof e.defaultDate){const e=d(!0);return e.dateHash=AM(e),e}return VM(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}())),b=VM(e.modelValue,v.value,y.value,e.calendar,_.value),x=a(null!==($=b).hour&&null===$.minute?"minute":"hour"),w=a(b),C=a(null===b.hour||b.hour<12),M=s((()=>"q-time q-time--"+(!0===e.landscape?"landscape":"portrait")+(!0===l.value?" q-time--dark q-dark":"")+(!0===e.disable?" disabled":!0===e.readonly?" q-time--readonly":"")+(!0===e.bordered?" q-time--bordered":"")+(!0===e.square?" q-time--square no-border-radius":"")+(!0===e.flat?" q-time--flat no-shadow":""))),E=s((()=>{const e=w.value;return{hour:null===e.hour?"--":!0===L.value?ox(e.hour):String(!0===C.value?0===e.hour?12:e.hour:e.hour>12?e.hour-12:e.hour),minute:null===e.minute?"--":ox(e.minute),second:null===e.second?"--":ox(e.second)}})),L=s((()=>null!==e.format24h?e.format24h:o.lang.date.format24h)),I=s((()=>{const e="hour"===x.value,t=!0===e?12:60,i=w.value[x.value];let n=`rotate(${Math.round(i*(360/t))-180}deg) translateX(-50%)`;return!0===e&&!0===L.value&&w.value.hour>=12&&(n+=" scale(.7)"),{transform:n}})),R=s((()=>null!==w.value.hour)),q=s((()=>!0===R.value&&null!==w.value.minute)),F=s((()=>void 0!==e.hourOptions?t=>e.hourOptions.includes(t):void 0!==e.options?t=>e.options(t,null,null):null)),O=s((()=>void 0!==e.minuteOptions?t=>e.minuteOptions.includes(t):void 0!==e.options?t=>e.options(w.value.hour,t,null):null)),z=s((()=>void 0!==e.secondOptions?t=>e.secondOptions.includes(t):void 0!==e.options?t=>e.options(w.value.hour,w.value.minute,t):null)),N=s((()=>{if(null===F.value)return null;const e=U(0,11,F.value),t=U(12,11,F.value);return{am:e,pm:t,values:e.values.concat(t.values)}})),D=s((()=>null!==O.value?U(0,59,O.value):null)),G=s((()=>null!==z.value?U(0,59,z.value):null)),j=s((()=>{switch(x.value){case"hour":return N.value;case"minute":return D.value;case"second":return G.value}})),B=s((()=>{let e,t,i=0,n=1;const o=null!==j.value?j.value.values:void 0;"hour"===x.value?!0===L.value?(e=0,t=23):(e=0,t=11,!1===C.value&&(i=12)):(e=0,t=55,n=5);const r=[];for(let s=e,a=e;s<=t;s+=n,a++){const e=s+i,t=!1===o?.includes(e),n="hour"===x.value&&0===s?!0===L.value?"00":"12":s;r.push({val:e,index:a,disable:t,label:n})}return r})),V=s((()=>[[OC,Z,void 0,{stop:!0,prevent:!0,mouse:!0}]]));var $;function H(){const e={...d(),...nP()};me(e),Object.assign(w.value,e),x.value="hour"}function U(e,t,i){const n=Array.apply(null,{length:t+1}).map(((t,n)=>{const o=n+e;return{index:o,val:!0===i(o)}})).filter((e=>!0===e.val)).map((e=>e.index));return{min:n[0],max:n[n.length-1],values:n,threshold:t+1}}function W(e,t,i){const n=Math.abs(e-t);return Math.min(n,i-n)}function X(e,{min:t,max:i,values:n,threshold:o}){if(e===t)return t;if(e<t||e>i)return W(e,t,o)<=W(e,i,o)?t:i;const r=n.findIndex((t=>e<=t)),s=n[r-1],a=n[r];return e-s<=a-e?s:a}function K(){return!0===Hx(n)||null!==j.value&&(0===j.value.values.length||"hour"===x.value&&!0!==L.value&&0===N.value[!0===C.value?"am":"pm"].values.length)}function Y(){const e=m.value,{top:t,left:i,width:n}=e.getBoundingClientRect(),o=n/2;return{top:t+o,left:i+o,dist:.7*o}}function Z(e){if(!0!==K()){if(!0===e.isFirst)return f=Y(),void(g=J(e.evt,f));g=J(e.evt,f,g),!0===e.isFinal&&(f=!1,g=null,Q())}}function Q(){"hour"===x.value?x.value="minute":e.withSeconds&&"minute"===x.value&&(x.value="second")}function J(e,t,i){const n=bb(e),o=Math.abs(n.top-t.top),r=Math.sqrt(Math.pow(Math.abs(n.top-t.top),2)+Math.pow(Math.abs(n.left-t.left),2));let s,a=Math.asin(o/r)*(180/Math.PI);if(a=n.top<t.top?t.left<n.left?90-a:270+a:t.left<n.left?a+90:270-a,"hour"===x.value){if(s=a/30,null!==N.value){const e=!0!==L.value?!0===C.value:0!==N.value.am.values.length&&0!==N.value.pm.values.length?r>=t.dist:0!==N.value.am.values.length;s=X(s+(!0===e?0:12),N.value[!0===e?"am":"pm"])}else s=Math.round(s),!0===L.value?r<t.dist?s<12&&(s+=12):12===s&&(s=0):!0===C.value&&12===s?s=0:!1===C.value&&12!==s&&(s+=12);!0===L.value&&(C.value=s<12)}else s=Math.round(a/6)%60,"minute"===x.value&&null!==D.value?s=X(s,D.value):"second"===x.value&&null!==G.value&&(s=X(s,G.value));return i!==s&&he[x.value](s),s}r((()=>e.modelValue),(t=>{const i=VM(t,v.value,y.value,e.calendar,_.value);(i.dateHash!==w.value.dateHash||i.timeHash!==w.value.timeHash)&&(w.value=i,null===i.hour?x.value="hour":C.value=i.hour<12)})),r([v,y],(()=>{P((()=>{me()}))}));const ee={hour(){x.value="hour"},minute(){x.value="minute"},second(){x.value="second"}};function te(e){13===e.keyCode&&de()}function ie(e){13===e.keyCode&&pe()}function ne(e){!0!==K()&&(!0!==o.platform.is.desktop&&J(e,Y()),Q())}function oe(e){!0!==K()&&J(e,Y())}function re(e){if(13===e.keyCode)x.value="hour";else if([37,39].includes(e.keyCode)){const t=37===e.keyCode?-1:1;if(null!==N.value){const e=!0===L.value?N.value.values:N.value[!0===C.value?"am":"pm"].values;if(0===e.length)return;if(null===w.value.hour)le(e[0]);else{const i=(e.length+e.indexOf(w.value.hour)+t)%e.length;le(e[i])}}else{const e=!0===L.value?24:12;le((!0!==L.value&&!1===C.value?12:0)+(24+(null===w.value.hour?-t:w.value.hour)+t)%e)}}}function se(e){if(13===e.keyCode)x.value="minute";else if([37,39].includes(e.keyCode)){const t=37===e.keyCode?-1:1;if(null!==D.value){const e=D.value.values;if(0===e.length)return;if(null===w.value.minute)ue(e[0]);else{const i=(e.length+e.indexOf(w.value.minute)+t)%e.length;ue(e[i])}}else ue((60+(null===w.value.minute?-t:w.value.minute)+t)%60)}}function ae(e){if(13===e.keyCode)x.value="second";else if([37,39].includes(e.keyCode)){const t=37===e.keyCode?-1:1;if(null!==G.value){const e=G.value.values;if(0===e.length)return;if(null===w.value.seconds)ce(e[0]);else{const i=(e.length+e.indexOf(w.value.second)+t)%e.length;ce(e[i])}}else ce((60+(null===w.value.second?-t:w.value.second)+t)%60)}}function le(e){w.value.hour!==e&&(w.value.hour=e,ge())}function ue(e){w.value.minute!==e&&(w.value.minute=e,ge())}function ce(e){w.value.second!==e&&(w.value.second=e,ge())}const he={hour:le,minute:ue,second:ce};function de(){!1===C.value&&(C.value=!0,null!==w.value.hour&&(w.value.hour-=12,ge()))}function pe(){!0===C.value&&(C.value=!1,null!==w.value.hour&&(w.value.hour+=12,ge()))}function fe(t){const i=e.modelValue;x.value!==t&&null!=i&&""!==i&&"string"!=typeof i&&(x.value=t)}function ge(){return null!==F.value&&!0!==F.value(w.value.hour)?(w.value=VM(),void fe("hour")):null!==O.value&&!0!==O.value(w.value.minute)?(w.value.minute=null,w.value.second=null,void fe("minute")):!0===e.withSeconds&&null!==z.value&&!0!==z.value(w.value.second)?(w.value.second=null,void fe("second")):void(null===w.value.hour||null===w.value.minute||!0===e.withSeconds&&null===w.value.second||me())}function me(t){const n=Object.assign({...w.value},t),o="persian"===e.calendar?ox(n.hour)+":"+ox(n.minute)+(!0===e.withSeconds?":"+ox(n.second):""):ZM(new Date(n.year,null===n.month?null:n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond),v.value,y.value,n.year,n.timezoneOffset);n.changed=o!==e.modelValue,i("update:modelValue",o,n)}function ve(){const t=[k("div",{class:"q-time__link "+("hour"===x.value?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:ee.hour,onKeyup:re},E.value.hour),k("div",":"),k("div",!0===R.value?{class:"q-time__link "+("minute"===x.value?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onKeyup:se,onClick:ee.minute}:{class:"q-time__link"},E.value.minute)];!0===e.withSeconds&&t.push(k("div",":"),k("div",!0===q.value?{class:"q-time__link "+("second"===x.value?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onKeyup:ae,onClick:ee.second}:{class:"q-time__link"},E.value.second));const i=[k("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},t)];return!1===L.value&&i.push(k("div",{class:"q-time__header-ampm column items-between no-wrap"},[k("div",{class:"q-time__link "+(!0===C.value?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:de,onKeyup:te},"AM"),k("div",{class:"q-time__link "+(!0!==C.value?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:pe,onKeyup:ie},"PM")])),k("div",{class:"q-time__header flex flex-center no-wrap "+c.value},i)}function ye(){const t=w.value[x.value];return k("div",{class:"q-time__content col relative-position"},[k(A,{name:"q-transition--scale"},(()=>k("div",{key:"clock"+x.value,class:"q-time__container-parent absolute-full"},[k("div",{ref:m,class:"q-time__container-child fit overflow-hidden"},[S(k("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:ne,onMousedown:oe},[k("div",{class:"q-time__clock-circle fit"},[k("div",{class:"q-time__clock-pointer"+(null===w.value[x.value]?" hidden":void 0!==e.color?` text-${e.color}`:""),style:I.value}),B.value.map((e=>k("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${e.index}`+(e.val===t?" q-time__clock-position--active "+c.value:!0===e.disable?" q-time__clock-position--disable":"")},[k("span",e.label)])))])]),V.value)])]))),!0===e.nowBtn?k(Cw,{class:"q-time__now-button absolute",icon:o.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:u.value,onClick:H}):null])}return n.proxy.setNow=H,()=>{const i=[ye()],n=fx(t.default);return void 0!==n&&i.push(k("div",{class:"q-time__actions"},n)),void 0!==e.name&&!0!==e.disable&&p(i,"push"),k("div",{class:M.value,tabindex:-1},[ve(),k("div",{class:"q-time__main col overflow-auto"},i)])}}}),fb({name:"QTimeline",props:{...Fx,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:t}){const i=T(),n=Ox(e,i.proxy.$q);W(Db,e);const o=s((()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(!0===n.value?" q-timeline--dark":"")));return()=>k("ul",{class:o.value},fx(t.default))}}),fb({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:t}){const i=M(Db,Wb);if(i===Wb)return Wb;const n=s((()=>`q-timeline__entry q-timeline__entry--${e.side}`+(void 0!==e.icon||void 0!==e.avatar?" q-timeline__entry--icon":""))),o=s((()=>`q-timeline__dot text-${e.color||i.color}`)),r=s((()=>"comfortable"===i.layout&&"left"===i.side));return()=>{const i=gx(t.default,[]);if(void 0!==e.body&&i.unshift(e.body),!0===e.heading){const t=[k("div"),k("div"),k(e.tag,{class:"q-timeline__heading-title"},i)];return k("div",{class:"q-timeline__heading"},!0===r.value?t.reverse():t)}let s;void 0!==e.icon?s=[k(Ax,{class:"row items-center justify-center",name:e.icon})]:void 0!==e.avatar&&(s=[k("img",{class:"q-timeline__dot-img",src:e.avatar})]);const a=[k("div",{class:"q-timeline__subtitle"},[k("span",{},fx(t.subtitle,[e.subtitle]))]),k("div",{class:o.value},s),k("div",{class:"q-timeline__content"},[k("h6",{class:"q-timeline__title"},fx(t.title,[e.title]))].concat(i))];return k("li",{class:n.value},!0===r.value?a.reverse():a)}}}),fb({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const i=s((()=>"q-toolbar row no-wrap items-center"+(!0===e.inset?" q-toolbar--inset":"")));return()=>k("div",{class:i.value,role:"toolbar"},fx(t.default))}}),fb({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:t}){const i=s((()=>"q-toolbar__title ellipsis"+(!0===e.shrink?" col-shrink":"")));return()=>k("div",{class:i.value},fx(t.default))}});var oP=["none","strict","leaf","leaf-filtered"],rP=fb({name:"QTree",props:{...Fx,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>oP.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:{},noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:t,emit:i}){const{proxy:n}=T(),{$q:o}=n,l=Ox(e,o),u=a({}),c=a(e.ticked||[]),h=a(e.expanded||[]);let d={};z((()=>{d={}}));const p=s((()=>"q-tree q-tree--"+(!0===e.dense?"dense":"standard")+(!0===e.noConnectors?" q-tree--no-connectors":"")+(!0===l.value?" q-tree--dark":"")+(void 0!==e.color?` text-${e.color}`:""))),f=s((()=>void 0!==e.selected)),g=s((()=>e.icon||o.iconSet.tree.icon)),m=s((()=>e.controlColor||e.color)),v=s((()=>void 0!==e.textColor?` text-${e.textColor}`:"")),y=s((()=>{const t=e.selectedColor||e.color;return t?` text-${t}`:""})),_=s((()=>void 0!==e.filterMethod?e.filterMethod:(t,i)=>{const n=i.toLowerCase();return t[e.labelKey]&&-1!==t[e.labelKey].toLowerCase().indexOf(n)})),b=s((()=>{const t={},i=(n,o)=>{const r=n.tickStrategy||(o?o.tickStrategy:e.tickStrategy),s=n[e.nodeKey],a=n[e.childrenKey]&&Array.isArray(n[e.childrenKey])&&0!==n[e.childrenKey].length,l=!0!==n.disabled&&!0===f.value&&!1!==n.selectable,d=!0!==n.disabled&&!1!==n.expandable,p="none"!==r,g="strict"===r,m="leaf-filtered"===r,v="leaf"===r||"leaf-filtered"===r;let y=!0!==n.disabled&&!1!==n.tickable;!0===v&&!0===y&&o&&!0!==o.tickable&&(y=!1);let b=n.lazy;!0===b&&void 0!==u.value[s]&&!0===Array.isArray(n[e.childrenKey])&&(b=u.value[s]);const x={key:s,parent:o,isParent:a,lazy:b,disabled:n.disabled,link:!0!==n.disabled&&(!0===l||!0===d&&(!0===a||!0===b)),children:[],matchesFilter:!e.filter||_.value(n,e.filter),selected:s===e.selected&&!0===l,selectable:l,expanded:!0===a&&h.value.includes(s),expandable:d,noTick:!0===n.noTick||!0!==g&&b&&"loaded"!==b,tickable:y,tickStrategy:r,hasTicking:p,strictTicking:g,leafFilteredTicking:m,leafTicking:v,ticked:(!0===g||!0!==a)&&c.value.includes(s)};if(t[s]=x,!0===a&&(x.children=n[e.childrenKey].map((e=>i(e,x))),e.filter&&(!0!==x.matchesFilter?x.matchesFilter=x.children.some((e=>e.matchesFilter)):!0!==x.noTick&&!0!==x.disabled&&!0===x.tickable&&!0===m&&!0===x.children.every((e=>!0!==e.matchesFilter||!0===e.noTick||!0!==e.tickable))&&(x.tickable=!1)),!0===x.matchesFilter&&(!0!==x.noTick&&!0!==g&&!0===x.children.every((e=>e.noTick))&&(x.noTick=!0),v))){if(x.ticked=!1,x.indeterminate=x.children.some((e=>!0===e.indeterminate)),x.tickable=!0===x.tickable&&x.children.some((e=>e.tickable)),!0!==x.indeterminate){const e=x.children.reduce(((e,t)=>!0===t.ticked?e+1:e),0);e===x.children.length?x.ticked=!0:e>0&&(x.indeterminate=!0)}!0===x.indeterminate&&(x.indeterminateNextState=x.children.every((e=>!0!==e.tickable||!0!==e.ticked)))}return x};return e.nodes.forEach((e=>i(e,null))),t}));function x(t){const i=[].reduce,n=(o,r)=>o||!r?o:!0===Array.isArray(r)?i.call(Object(r),n,o):r[e.nodeKey]===t?r:r[e.childrenKey]?n(null,r[e.childrenKey]):void 0;return n(null,e.nodes)}function w(){const t=[],n=i=>{i[e.childrenKey]&&0!==i[e.childrenKey].length&&!1!==i.expandable&&!0!==i.disabled&&(t.push(i[e.nodeKey]),i[e.childrenKey].forEach(n))};e.nodes.forEach(n),void 0!==e.expanded?i("update:expanded",t):h.value=t}function C(t,n,o=x(t),r=b.value[t]){if(r.lazy&&"loaded"!==r.lazy){if("loading"===r.lazy)return;u.value[t]="loading",!0!==Array.isArray(o[e.childrenKey])&&(o[e.childrenKey]=[]),i("lazyLoad",{node:o,key:t,done:i=>{u.value[t]="loaded",o[e.childrenKey]=!0===Array.isArray(i)?i:[],P((()=>{!0===b.value[t]?.isParent&&M(t,!0)}))},fail:()=>{delete u.value[t],0===o[e.childrenKey].length&&delete o[e.childrenKey]}})}else!0===r.isParent&&!0===r.expandable&&M(t,n)}function M(t,n){let o=h.value;const r=void 0!==e.expanded;if(!0===r&&(o=o.slice()),n){if(e.accordion&&b.value[t]){const i=[];b.value[t].parent?b.value[t].parent.children.forEach((e=>{e.key!==t&&!0===e.expandable&&i.push(e.key)})):e.nodes.forEach((n=>{const o=n[e.nodeKey];o!==t&&i.push(o)})),0!==i.length&&(o=o.filter((e=>!1===i.includes(e))))}o=o.concat([t]).filter(((e,t,i)=>i.indexOf(e)===t))}else o=o.filter((e=>e!==t));!0===r?i("update:expanded",o):h.value=o}function E(t,n){let o=c.value;const r=void 0!==e.ticked;!0===r&&(o=o.slice()),o=n?o.concat(t).filter(((e,t,i)=>i.indexOf(e)===t)):o.filter((e=>!1===t.includes(e))),!0===r&&i("update:ticked",o)}function L(i){return(e.filter?i.filter((t=>b.value[t[e.nodeKey]].matchesFilter)):i).map((i=>function(i){const o=i[e.nodeKey],r=b.value[o],s=i.header&&t[`header-${i.header}`]||t["default-header"],a=!0===r.isParent?L(i[e.childrenKey]):[],u=0!==a.length||r.lazy&&"loaded"!==r.lazy;let c=i.body&&t[`body-${i.body}`]||t["default-body"];const h=void 0!==s||void 0!==c?function(t,i,o){const r={tree:n,node:t,key:o,color:e.color,dark:l.value};return rb(r,"expanded",(()=>i.expanded),(e=>{e!==i.expanded&&C(o,e)})),rb(r,"ticked",(()=>i.ticked),(e=>{e!==i.ticked&&E([o],e)})),r}(i,r,o):null;return void 0!==c&&(c=k("div",{class:"q-tree__node-body relative-position"},[k("div",{class:v.value},[c(h)])])),k("div",{key:o,class:"q-tree__node relative-position q-tree__node--"+(!0===u?"parent":"child")},[k("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(!0===r.link?" q-tree__node--link q-hoverable q-focusable":"")+(!0===r.selected?" q-tree__node--selected":"")+(!0===r.disabled?" q-tree__node--disabled":""),tabindex:!0===r.link?0:-1,ariaExpanded:a.length>0?r.expanded:null,role:"treeitem",onClick:e=>{F(i,r,e)},onKeypress(e){!0!==Ib(e)&&(13===e.keyCode?F(i,r,e,!0):32===e.keyCode&&O(i,r,e,!0))}},[k("div",{class:"q-focus-helper",tabindex:-1,ref:e=>{d[r.key]=e}}),"loading"===r.lazy?k(iw,{class:"q-tree__spinner",color:m.value}):!0===u?k(Ax,{class:"q-tree__arrow"+(!0===r.expanded?" q-tree__arrow--rotate":""),name:g.value,onClick(e){O(i,r,e)}}):null,!0===r.hasTicking&&!0!==r.noTick?k(kC,{class:"q-tree__tickbox",modelValue:!0===r.indeterminate?null:r.ticked,color:m.value,dark:l.value,dense:!0,keepColor:!0,disable:!0!==r.tickable,onKeydown:Sb,"onUpdate:modelValue":e=>{!function(e,t){if(!0===e.indeterminate&&(t=e.indeterminateNextState),e.strictTicking)E([e.key],t);else if(e.leafTicking){const i=[],n=e=>{e.isParent?(!0!==t&&!0!==e.noTick&&!0===e.tickable&&i.push(e.key),!0===e.leafTicking&&e.children.forEach(n)):!0!==e.noTick&&!0===e.tickable&&(!0!==e.leafFilteredTicking||!0===e.matchesFilter)&&i.push(e.key)};n(e),E(i,t)}}(r,e)}}):null,k("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(!0===r.selected?y.value:v.value)},[s?s(h):[I(i),k("div",i[e.labelKey])]])]),!0===u?!0===e.noTransition?!0===r.expanded?k("div",{class:"q-tree__node-collapsible"+v.value,key:`${o}__q`},[c,k("div",{class:"q-tree__children"+(!0===r.disabled?" q-tree__node--disabled":""),role:"group"},a)]):null:k($E,{duration:e.duration,onShow:R,onHide:A},(()=>S(k("div",{class:"q-tree__node-collapsible"+v.value,key:`${o}__q`},[c,k("div",{class:"q-tree__children"+(!0===r.disabled?" q-tree__node--disabled":""),role:"group"},a)]),[[j,r.expanded]]))):c])}(i)))}function I(e){if(void 0!==e.icon)return k(Ax,{class:"q-tree__icon q-mr-sm",name:e.icon,color:e.iconColor});const t=e.img||e.avatar;return t?k("img",{class:`q-tree__${e.img?"img":"avatar"} q-mr-sm`,src:t}):void 0}function R(){i("afterShow")}function A(){i("afterHide")}function q(e){d[e]?.focus()}function F(t,n,o,r){!0!==r&&!1!==n.selectable&&q(n.key),f.value&&n.selectable?!1===e.noSelectionUnset?i("update:selected",n.key!==e.selected?n.key:null):n.key!==e.selected&&i("update:selected",void 0===n.key?null:n.key):O(t,n,o,r),"function"==typeof t.handler&&t.handler(t)}function O(e,t,i,n){void 0!==i&&Sb(i),!0!==n&&!1!==t.selectable&&q(t.key),C(t.key,!t.expanded,e,t)}return r((()=>e.ticked),(e=>{c.value=e})),r((()=>e.expanded),(e=>{h.value=e})),!0===e.defaultExpandAll&&w(),Object.assign(n,{getNodeByKey:x,getTickedNodes:function(){return c.value.map((e=>x(e)))},getExpandedNodes:function(){return h.value.map((e=>x(e)))},isExpanded:function(e){return!(!e||!b.value[e])&&b.value[e].expanded},collapseAll:function(){void 0!==e.expanded?i("update:expanded",[]):h.value=[]},expandAll:w,setExpanded:C,isTicked:function(e){return!(!e||!b.value[e])&&b.value[e].ticked},setTicked:E}),()=>{const t=L(e.nodes);return k("div",{class:p.value,role:"tree"},0===t.length?e.filter?e.noResultsLabel||o.lang.tree.noResults:e.noNodesLabel||o.lang.tree.noNodes:t)}}});function sP(e){return(100*e).toFixed(2)+"%"}var aP={...Fx,...fk,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},lP=[...gk,"start","finish","added","removed"],uP=()=>!0;function cP(e){const t={};return e.forEach((e=>{t[e]=uP})),t}var hP=cP(lP);function dP(e){return"function"==typeof e?e:()=>e}var pP={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},fP={name:"QUploader",props:pP,emits:["factoryFailed","uploaded","failed","uploading"],injectPlugin:function({props:e,emit:t,helpers:i}){const n=a([]),o=a([]),r=a(0),l=s((()=>({url:dP(e.url),method:dP(e.method),headers:dP(e.headers),formFields:dP(e.formFields),fieldName:dP(e.fieldName),withCredentials:dP(e.withCredentials),sendRaw:dP(e.sendRaw),batch:dP(e.batch)})));let u;function c(n){if(r.value++,"function"!=typeof e.factory)return void h(n,{});const s=e.factory(n);if(s)if("function"==typeof s.catch&&"function"==typeof s.then){o.value.push(s);const e=e=>{!0===i.isAlive()&&(o.value=o.value.filter((e=>e!==s)),0===o.value.length&&(u=!1),i.queuedFiles.value=i.queuedFiles.value.concat(n),n.forEach((e=>{i.updateFileStatus(e,"failed")})),t("factoryFailed",e,n),r.value--)};s.then((t=>{!0===u?e(new Error("Aborted")):!0===i.isAlive()&&(o.value=o.value.filter((e=>e!==s)),h(n,t))})).catch(e)}else h(n,s||{});else t("factoryFailed",new Error("QUploader: factory() does not return properly"),n),r.value--}function h(e,o){const s=new FormData,a=new XMLHttpRequest,u=(e,t)=>void 0!==o[e]?dP(o[e])(t):l.value[e](t),c=u("url",e);if(!c)return void r.value--;const h=u("formFields",e);void 0!==h&&h.forEach((e=>{s.append(e.name,e.value)}));let d,p=0,f=0,g=0,m=0;a.upload.addEventListener("progress",(t=>{if(!0===d)return;const n=Math.min(m,t.loaded);i.uploadedSize.value+=n-g,g=n;let o=g-f;for(let r=p;o>0&&r<e.length;r++){const t=e[r];if(!(o>t.size))return void i.updateFileStatus(t,"uploading",o);o-=t.size,p++,f+=t.size,i.updateFileStatus(t,"uploading",t.size)}}),!1),a.onreadystatechange=()=>{a.readyState<4||(a.status&&a.status<400?(i.uploadedFiles.value=i.uploadedFiles.value.concat(e),e.forEach((e=>{i.updateFileStatus(e,"uploaded")})),t("uploaded",{files:e,xhr:a})):(d=!0,i.uploadedSize.value-=g,i.queuedFiles.value=i.queuedFiles.value.concat(e),e.forEach((e=>{i.updateFileStatus(e,"failed")})),t("failed",{files:e,xhr:a})),r.value--,n.value=n.value.filter((e=>e!==a)))},a.open(u("method",e),c),!0===u("withCredentials",e)&&(a.withCredentials=!0);const v=u("headers",e);void 0!==v&&v.forEach((e=>{a.setRequestHeader(e.name,e.value)}));const y=u("sendRaw",e);e.forEach((e=>{i.updateFileStatus(e,"uploading",0),!0!==y&&s.append(u("fieldName",e),e,e.name),e.xhr=a,e.__abort=()=>{a.abort()},m+=e.size})),t("uploading",{files:e,xhr:a}),n.value.push(a),!0===y?a.send(new Blob(e)):a.send(s)}return{isUploading:s((()=>r.value>0)),isBusy:s((()=>0!==o.value.length)),abort:function(){n.value.forEach((e=>{e.abort()})),0!==o.value.length&&(u=!0)},upload:function(){const e=i.queuedFiles.value.slice(0);i.queuedFiles.value=[],l.value.batch(e)?c(e):e.forEach((e=>{c([e])}))}}}};function gP(e){if(!1===e)return 0;if(!0===e||void 0===e)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}(({name:e,props:t,emits:i,injectPlugin:n})=>{fb({name:e,props:{...aP,...t},emits:!0===Yb(i)?{...hP,...i}:[...lP,...i],setup:(e,{expose:t})=>function(e,t){const i=T(),{props:n,slots:o,emit:l,proxy:u}=i,{$q:c}=u,h=Ox(n,c),d=s((()=>!0!==n.disable&&!0!==n.readonly)),p=a(!1),f=a(null),g=a(null),m={files:a([]),queuedFiles:a([]),uploadedFiles:a([]),uploadedSize:a(0),updateFileStatus:function(e,t,i){if(e.__status=t,"idle"===t)return e.__uploaded=0,e.__progress=0,e.__sizeLabel=tx(e.size),void(e.__progressLabel="0.00%");"failed"!==t?(e.__uploaded="uploaded"===t?e.size:i,e.__progress="uploaded"===t?1:Math.min(.9999,e.__uploaded/e.size),e.__progressLabel=sP(e.__progress),u.$forceUpdate()):u.$forceUpdate()},isAlive:()=>!1===Hx(i)},{pickFiles:v,addFiles:y,onDragover:_,onDragleave:b,processFiles:x,getDndNode:w,maxFilesNumber:S,maxTotalSizeNumber:C}=mk({editable:d,dnd:p,getFileInput:V,addFilesToQueue:$});Object.assign(m,e({props:n,slots:o,emit:l,helpers:m,exposeApi:e=>{Object.assign(m,e)}})),void 0===m.isBusy&&(m.isBusy=a(!1));const M=a(0),E=s((()=>0===M.value?0:m.uploadedSize.value/M.value)),P=s((()=>sP(E.value))),I=s((()=>tx(M.value))),R=s((()=>!0===d.value&&!0!==m.isUploading.value&&(!0===n.multiple||0===m.queuedFiles.value.length)&&(void 0===n.maxFiles||m.files.value.length<S.value)&&(void 0===n.maxTotalSize||M.value<C.value))),A=s((()=>!0===d.value&&!0!==m.isBusy.value&&!0!==m.isUploading.value&&0!==m.queuedFiles.value.length));W(Ub,X);const q=s((()=>"q-uploader column no-wrap"+(!0===h.value?" q-uploader--dark q-dark":"")+(!0===n.bordered?" q-uploader--bordered":"")+(!0===n.square?" q-uploader--square no-border-radius":"")+(!0===n.flat?" q-uploader--flat no-shadow":"")+(!0===n.disable?" disabled q-uploader--disable":"")+(!0===p.value?" q-uploader--dnd":""))),F=s((()=>"q-uploader__header"+(void 0!==n.color?` bg-${n.color}`:"")+(void 0!==n.textColor?` text-${n.textColor}`:"")));function O(){!1===n.disable&&(m.abort(),m.uploadedSize.value=0,M.value=0,j(),m.files.value=[],m.queuedFiles.value=[],m.uploadedFiles.value=[])}function z(){!1===n.disable&&D(["uploaded"],(()=>{m.uploadedFiles.value=[]}))}function N(){D(["idle","failed"],(({size:e})=>{M.value-=e,m.queuedFiles.value=[]}))}function D(e,t){if(!0===n.disable)return;const i={files:[],size:0},o=m.files.value.filter((t=>-1===e.indexOf(t.__status)||(i.size+=t.size,i.files.push(t),void 0!==t.__img&&window.URL.revokeObjectURL(t.__img.src),!1)));0!==i.files.length&&(m.files.value=o,t(i),l("removed",i.files))}function G(e){n.disable||("uploaded"===e.__status?m.uploadedFiles.value=m.uploadedFiles.value.filter((t=>t.__key!==e.__key)):"uploading"===e.__status?e.__abort():M.value-=e.size,m.files.value=m.files.value.filter((t=>t.__key!==e.__key||(void 0!==t.__img&&window.URL.revokeObjectURL(t.__img.src),!1))),m.queuedFiles.value=m.queuedFiles.value.filter((t=>t.__key!==e.__key)),l("removed",[e]))}function j(){m.files.value.forEach((e=>{void 0!==e.__img&&window.URL.revokeObjectURL(e.__img.src)}))}function V(){return g.value||f.value.getElementsByClassName("q-uploader__input")[0]}function $(e,t){const i=x(e,t,m.files.value,!0),o=V();null!=o&&(o.value=""),void 0!==i&&(i.forEach((e=>{if(m.updateFileStatus(e,"idle"),M.value+=e.size,!0!==n.noThumbnails&&e.type.toUpperCase().startsWith("IMAGE")){const t=new Image;t.src=window.URL.createObjectURL(e),e.__img=t}})),m.files.value=m.files.value.concat(i),m.queuedFiles.value=m.queuedFiles.value.concat(i),l("added",i),!0===n.autoUpload&&m.upload())}function H(){!0===A.value&&m.upload()}function U(e,t,i){if(!0===e){const e={type:"a",key:t,icon:c.iconSet.uploader[t],flat:!0,dense:!0};let n;return"add"===t?(e.onClick=v,n=X):e.onClick=i,k(Cw,e,n)}}function X(){return k("input",{ref:g,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:n.accept,multiple:!0===n.multiple?"multiple":void 0,capture:n.capture,onMousedown:xb,onClick:v,onChange:$})}r(m.isUploading,((e,t)=>{!1===t&&!0===e?l("start"):!0===t&&!1===e&&l("finish")})),L((()=>{!0===m.isUploading.value&&m.abort(),0!==m.files.value.length&&j()}));const K={};for(const r in m)!0===B(m[r])?rb(K,r,(()=>m[r].value)):K[r]=m[r];return Object.assign(K,{upload:H,reset:O,removeUploadedFiles:z,removeQueuedFiles:N,removeFile:G,pickFiles:v,addFiles:y}),sb(K,{canAddFiles:()=>R.value,canUpload:()=>A.value,uploadSizeLabel:()=>I.value,uploadProgressLabel:()=>P.value}),t({...m,upload:H,reset:O,removeUploadedFiles:z,removeQueuedFiles:N,removeFile:G,pickFiles:v,addFiles:y,canAddFiles:R,canUpload:A,uploadSizeLabel:I,uploadProgressLabel:P}),()=>{const e=[k("div",{class:F.value},void 0!==o.header?o.header(K):[k("div",{class:"q-uploader__header-content column"},[k("div",{class:"flex flex-center no-wrap q-gutter-xs"},[U(0!==m.queuedFiles.value.length,"removeQueue",N),U(0!==m.uploadedFiles.value.length,"removeUploaded",z),!0===m.isUploading.value?k(iw,{class:"q-uploader__spinner"}):null,k("div",{class:"col column justify-center"},[void 0!==n.label?k("div",{class:"q-uploader__title"},[n.label]):null,k("div",{class:"q-uploader__subtitle"},[I.value+" / "+P.value])]),U(R.value,"add"),U(!1===n.hideUploadBtn&&!0===A.value,"upload",m.upload),U(m.isUploading.value,"clear",m.abort)])])]),k("div",{class:"q-uploader__list scroll"},void 0!==o.list?o.list(K):m.files.value.map((e=>k("div",{key:e.__key,class:"q-uploader__file relative-position"+(!0!==n.noThumbnails&&void 0!==e.__img?" q-uploader__file--img":"")+("failed"===e.__status?" q-uploader__file--failed":"uploaded"===e.__status?" q-uploader__file--uploaded":""),style:!0!==n.noThumbnails&&void 0!==e.__img?{backgroundImage:'url("'+e.__img.src+'")',backgroundSize:n.thumbnailFit}:null},[k("div",{class:"q-uploader__file-header row flex-center no-wrap"},["failed"===e.__status?k(Ax,{class:"q-uploader__file-status",name:c.iconSet.type.negative,color:"negative"}):null,k("div",{class:"q-uploader__file-header-content col"},[k("div",{class:"q-uploader__title"},[e.name]),k("div",{class:"q-uploader__subtitle row items-center no-wrap"},[e.__sizeLabel+" / "+e.__progressLabel])]),"uploading"===e.__status?k(AC,{value:e.__progress,min:0,max:1,indeterminate:0===e.__progress}):k(Cw,{round:!0,dense:!0,flat:!0,icon:c.iconSet.uploader["uploaded"===e.__status?"done":"clear"],onClick:()=>{G(e)}})])])))),w("uploader")];!0===m.isBusy.value&&e.push(k("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[k(iw)]));const t={ref:f,class:q.value};return!0===R.value&&Object.assign(t,{onDragover:_,onDragleave:b}),k("div",t,e)}}(n,t)})})(fP),fb({name:"QUploaderAddTrigger",setup(){const e=M(Ub,Wb);return e}}),fb({name:"QVideo",props:{...yk,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(e){const t=_k(e),i=s((()=>"q-video"+(void 0!==e.ratio?" q-video--responsive":"")));return()=>k("div",{class:i.value,style:t.value},[k("iframe",{src:e.src,title:e.title,fetchpriority:e.fetchpriority,loading:e.loading,referrerpolicy:e.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}});var mP=gb({name:"close-popup",beforeMount(e,{value:t}){const i={depth:gP(t),handler(t){0!==i.depth&&setTimeout((()=>{const n=(o=e,Hw.find((e=>null!==e.contentEl&&e.contentEl.contains(o))));var o;void 0!==n&&function(e,t,i){for(;0!==i&&null!=e;){if(!0===e.__qPortal){if(i--,"QMenu"===e.$options.name){e=Uw(e,t);continue}e.hide(t)}e=jx(e)}}(n,t,i.depth)}))},handlerKey(e){!0===Rb(e,13)&&i.handler(e)}};e.__qclosepopup=i,e.addEventListener("click",i.handler),e.addEventListener("keyup",i.handlerKey)},updated(e,{value:t,oldValue:i}){t!==i&&(e.__qclosepopup.depth=gP(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}}),vP=0,yP=void 0;function _P(e,t){void 0===yP&&((yP=document.createElement("div")).style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(yP));const i=e.getBoundingClientRect(),n=yP.getBoundingClientRect(),{marginLeft:o,marginRight:r,marginTop:s,marginBottom:a}=window.getComputedStyle(e),l=parseInt(o,10)+parseInt(r,10),u=parseInt(s,10)+parseInt(a,10);return{left:i.left-n.left,top:i.top-n.top,width:i.right-i.left,height:i.bottom-i.top,widthM:i.right-i.left+(!0===t?0:l),heightM:i.bottom-i.top+(!0===t?0:u),marginH:!0===t?l:0,marginV:!0===t?u:0}}function bP(e){return{width:e.scrollWidth,height:e.scrollHeight}}var xP=["Top","Right","Bottom","Left"],wP=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],SP=/-block|-inline|block-|inline-/,CP=/(-block|-inline|block-|inline-).*:/;function MP(e,t){const i=window.getComputedStyle(e),n={};for(let o=0;o<t.length;o++){const e=t[o];if(""===i[e])if("cssText"===e){const t=i.length;let o="";for(let e=0;e<t;e++)!0!==SP.test(i[e])&&(o+=i[e]+": "+i[i[e]]+"; ");n[e]=o}else if(-1!==["borderWidth","borderStyle","borderColor"].indexOf(e)){const t=e.replace("border","");let o="";for(let e=0;e<xP.length;e++)o+=i["border"+xP[e]+t]+" ";n[e]=o}else if("borderRadius"===e){let t="",o="";for(let e=0;e<wP.length;e++){const n=i[wP[e]].split(" ");t+=n[0]+" ",o+=(void 0===n[1]?n[0]:n[1])+" "}n[e]=t+"/ "+o}else n[e]=i[e];else n[e]="cssText"===e?i[e].split(";").filter((e=>!0!==CP.test(e))).join(";"):i[e]}return n}var EP=["absolute","fixed","relative","sticky"];function kP(e){let t=e,i=0;for(;null!==t&&t!==document;){const{position:n,zIndex:o}=window.getComputedStyle(t),r=Number(o);r>i&&(t===e||!0===EP.includes(n))&&(i=r),t=t.parentNode}return i}function TP(e){const t=typeof e;return"function"===t?e():"string"===t?document.querySelector(e):e}function PP(e){return e&&e.ownerDocument===document&&null!==e.parentNode}var LP={},IP=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],RP=["resize","useCSS","hideFromClone","keepToClone","tween"];function AP(e,t){e.clsAction!==t&&(e.clsAction=t,e.el.classList[t]("q-morph--invisible"))}function qP(e){if(!0===e.animating||e.queue.length<2)return;const[t,i]=e.queue;e.animating=!0,t.animating=!0,i.animating=!0,AP(t,"remove"),AP(i,"remove");const n=function(e){let t=()=>!1,i=!1,n=!0;const o={from:(a=e).from,to:void 0!==a.to?a.to:a.from},r=function(e){return"number"==typeof e?e={duration:e}:"function"==typeof e&&(e={onEnd:e}),{...e,waitFor:void 0===e.waitFor?0:e.waitFor,duration:!0===isNaN(e.duration)?300:parseInt(e.duration,10),easing:"string"==typeof e.easing&&0!==e.easing.length?e.easing:"ease-in-out",delay:!0===isNaN(e.delay)?0:parseInt(e.delay,10),fill:"string"==typeof e.fill&&0!==e.fill.length?e.fill:"none",resize:!0===e.resize,useCSS:!0===e.useCSS||!0===e.usecss,hideFromClone:!0===e.hideFromClone||!0===e.hidefromclone,keepToClone:!0===e.keepToClone||!0===e.keeptoclone,tween:!0===e.tween,tweenFromOpacity:!0===isNaN(e.tweenFromOpacity)?.6:parseFloat(e.tweenFromOpacity),tweenToOpacity:!0===isNaN(e.tweenToOpacity)?.5:parseFloat(e.tweenToOpacity)}}(e),s=TP(o.from);var a;if(!0!==PP(s))return t;let l,u,c,h;"function"==typeof s.qMorphCancel&&s.qMorphCancel();const d=s.parentNode,p=s.nextElementSibling,f=_P(s,r.resize),{width:g,height:m}=bP(d),{borderWidth:v,borderStyle:y,borderColor:_,borderRadius:b,backgroundColor:x,transform:w,position:S,cssText:C}=MP(s,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),M=s.classList.toString(),E=s.style.cssText,k=s.cloneNode(!0),T=!0===r.tween?s.cloneNode(!0):void 0;return void 0!==T&&(T.className=T.classList.toString().split(" ").filter((e=>!1===/^bg-/.test(e))).join(" ")),!0===r.hideFromClone&&k.classList.add("q-morph--internal"),k.setAttribute("aria-hidden","true"),k.style.transition="none",k.style.animation="none",k.style.pointerEvents="none",d.insertBefore(k,p),s.qMorphCancel=()=>{i=!0,k.remove(),T?.remove(),!0===r.hideFromClone&&k.classList.remove("q-morph--internal"),s.qMorphCancel=void 0},"function"==typeof e.onToggle&&e.onToggle(),requestAnimationFrame((()=>{const e=TP(o.to);if(!0===i||!0!==PP(e))return void("function"==typeof s.qMorphCancel&&s.qMorphCancel());s!==e&&"function"==typeof e.qMorphCancel&&e.qMorphCancel(),!0!==r.keepToClone&&e.classList.add("q-morph--internal"),k.classList.add("q-morph--internal");const{width:a,height:p}=bP(d),{width:P,height:L}=bP(e.parentNode);!0!==r.hideFromClone&&k.classList.remove("q-morph--internal"),e.qMorphCancel=()=>{i=!0,k.remove(),T?.remove(),!0===r.hideFromClone&&k.classList.remove("q-morph--internal"),!0!==r.keepToClone&&e.classList.remove("q-morph--internal"),s.qMorphCancel=void 0,e.qMorphCancel=void 0};const I=()=>{if(!0===i)return void("function"==typeof e.qMorphCancel&&e.qMorphCancel());!0!==r.hideFromClone&&(k.classList.add("q-morph--internal"),k.innerHTML="",k.style.left=0,k.style.right="unset",k.style.top=0,k.style.bottom="unset",k.style.transform="none"),!0!==r.keepToClone&&e.classList.remove("q-morph--internal");const o=e.parentNode,{width:I,height:R}=bP(o),A=e.cloneNode(r.keepToClone);A.setAttribute("aria-hidden","true"),!0!==r.keepToClone&&(A.style.left=0,A.style.right="unset",A.style.top=0,A.style.bottom="unset",A.style.transform="none",A.style.pointerEvents="none"),A.classList.add("q-morph--internal");const q=e===s&&d===o?k:e.nextElementSibling;o.insertBefore(A,q);const{borderWidth:F,borderStyle:O,borderColor:z,borderRadius:N,backgroundColor:D,transform:G,position:j,cssText:B}=MP(e,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),V=e.classList.toString(),$=e.style.cssText;e.style.cssText=B,e.style.transform="none",e.style.animation="none",e.style.transition="none",e.className=V.split(" ").filter((e=>!1===/^bg-/.test(e))).join(" ");const H=_P(e,r.resize),U=f.left-H.left,W=f.top-H.top,X=f.width/(H.width>0?H.width:10),K=f.height/(H.height>0?H.height:100),Y=g-a,Z=m-p,Q=I-P,J=R-L,ee=Math.max(f.widthM,Y),te=Math.max(f.heightM,Z),ie=Math.max(H.widthM,Q),ne=Math.max(H.heightM,J),oe=s===e&&!1===["absolute","fixed"].includes(j)&&!1===["absolute","fixed"].includes(S);let re="fixed"===j,se=o;for(;!0!==re&&se!==document;)re="fixed"===window.getComputedStyle(se).position,se=se.parentNode;if(!0!==r.hideFromClone&&(k.style.display="block",k.style.flex="0 0 auto",k.style.opacity=0,k.style.minWidth="unset",k.style.maxWidth="unset",k.style.minHeight="unset",k.style.maxHeight="unset",k.classList.remove("q-morph--internal")),!0!==r.keepToClone&&(A.style.display="block",A.style.flex="0 0 auto",A.style.opacity=0,A.style.minWidth="unset",A.style.maxWidth="unset",A.style.minHeight="unset",A.style.maxHeight="unset"),A.classList.remove("q-morph--internal"),"string"==typeof r.classes&&(e.className+=" "+r.classes),"string"==typeof r.style)e.style.cssText+=" "+r.style;else if(!0===Yb(r.style))for(const t in r.style)e.style[t]=r.style[t];const ae=kP(k),le=kP(e),ue=!0===re?document.documentElement:{scrollLeft:0,scrollTop:0};e.style.position=!0===re?"fixed":"absolute",e.style.left=H.left-ue.scrollLeft+"px",e.style.right="unset",e.style.top=H.top-ue.scrollTop+"px",e.style.margin=0,!0===r.resize&&(e.style.minWidth="unset",e.style.maxWidth="unset",e.style.minHeight="unset",e.style.maxHeight="unset",e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden"),document.body.appendChild(e),void 0!==T&&(T.style.cssText=C,T.style.transform="none",T.style.animation="none",T.style.transition="none",T.style.position=e.style.position,T.style.left=f.left-ue.scrollLeft+"px",T.style.right="unset",T.style.top=f.top-ue.scrollTop+"px",T.style.margin=0,T.style.pointerEvents="none",!0===r.resize&&(T.style.minWidth="unset",T.style.maxWidth="unset",T.style.minHeight="unset",T.style.maxHeight="unset",T.style.overflow="hidden",T.style.overflowX="hidden",T.style.overflowY="hidden"),document.body.appendChild(T));const ce=i=>{s===e&&!0!==n?(e.style.cssText=E,e.className=M):(e.style.cssText=$,e.className=V),A.parentNode===o&&o.insertBefore(e,A),k.remove(),A.remove(),T?.remove(),t=()=>!1,s.qMorphCancel=void 0,e.qMorphCancel=void 0,"function"==typeof r.onEnd&&r.onEnd(!0===n?"to":"from",!0===i)};if(!0!==r.useCSS&&"function"==typeof e.animate){const o=!0===r.resize?{transform:`translate(${U}px, ${W}px)`,width:`${ee}px`,height:`${te}px`}:{transform:`translate(${U}px, ${W}px) scale(${X}, ${K})`},a=!0===r.resize?{width:`${ie}px`,height:`${ne}px`}:{},d=!0===r.resize?{width:`${ee}px`,height:`${te}px`}:{},p=!0===r.resize?{transform:`translate(${-1*U}px, ${-1*W}px)`,width:`${ie}px`,height:`${ne}px`}:{transform:`translate(${-1*U}px, ${-1*W}px) scale(${1/X}, ${1/K})`},g=void 0!==T?{opacity:r.tweenToOpacity}:{backgroundColor:x},m=void 0!==T?{opacity:1}:{backgroundColor:D};h=e.animate([{margin:0,borderWidth:v,borderStyle:y,borderColor:_,borderRadius:b,zIndex:ae,transformOrigin:"0 0",...o,...g},{margin:0,borderWidth:F,borderStyle:O,borderColor:z,borderRadius:N,zIndex:le,transformOrigin:"0 0",transform:G,...a,...m}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay}),u=void 0===T?void 0:T.animate([{opacity:r.tweenFromOpacity,margin:0,borderWidth:v,borderStyle:y,borderColor:_,borderRadius:b,zIndex:ae,transformOrigin:"0 0",transform:w,...d},{opacity:0,margin:0,borderWidth:F,borderStyle:O,borderColor:z,borderRadius:N,zIndex:le,transformOrigin:"0 0",...p}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay}),l=!0===r.hideFromClone||!0===oe?void 0:k.animate([{margin:`${Z<0?Z/2:0}px ${Y<0?Y/2:0}px`,width:`${ee+f.marginH}px`,height:`${te+f.marginV}px`},{margin:0,width:0,height:0}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay}),c=!0===r.keepToClone?void 0:A.animate([!0===oe?{margin:`${Z<0?Z/2:0}px ${Y<0?Y/2:0}px`,width:`${ee+f.marginH}px`,height:`${te+f.marginV}px`}:{margin:0,width:0,height:0},{margin:`${J<0?J/2:0}px ${Q<0?Q/2:0}px`,width:`${ie+H.marginH}px`,height:`${ne+H.marginV}px`}],{duration:r.duration,easing:r.easing,fill:r.fill,delay:r.delay});const S=e=>{l?.cancel(),u?.cancel(),c?.cancel(),h.cancel(),h.removeEventListener("finish",S),h.removeEventListener("cancel",S),ce(e),l=void 0,u=void 0,c=void 0,h=void 0};s.qMorphCancel=()=>{s.qMorphCancel=void 0,i=!0,S()},e.qMorphCancel=()=>{e.qMorphCancel=void 0,i=!0,S()},h.addEventListener("finish",S),h.addEventListener("cancel",S),t=e=>!0!==i&&void 0!==h&&(!0===e?(S(!0),!0):(n=!0!==n,l?.reverse(),u?.reverse(),c?.reverse(),h.reverse(),!0))}else{const o="q-morph-anim-"+ ++vP,a=document.createElement("style"),l=!0===r.resize?`\n            transform: translate(${U}px, ${W}px);\n            width: ${ee}px;\n            height: ${te}px;\n          `:`transform: translate(${U}px, ${W}px) scale(${X}, ${K});`,u=!0===r.resize?`\n            width: ${ie}px;\n            height: ${ne}px;\n          `:"",c=!0===r.resize?`\n            width: ${ee}px;\n            height: ${te}px;\n          `:"",h=!0===r.resize?`\n            transform: translate(${-1*U}px, ${-1*W}px);\n            width: ${ie}px;\n            height: ${ne}px;\n          `:`transform: translate(${-1*U}px, ${-1*W}px) scale(${1/X}, ${1/K});`,d=void 0!==T?`opacity: ${r.tweenToOpacity};`:`background-color: ${x};`,p=void 0!==T?"opacity: 1;":`background-color: ${D};`,g=void 0===T?"":`\n            @keyframes ${o}-from-tween {\n              0% {\n                opacity: ${r.tweenFromOpacity};\n                margin: 0;\n                border-width: ${v};\n                border-style: ${y};\n                border-color: ${_};\n                border-radius: ${b};\n                z-index: ${ae};\n                transform-origin: 0 0;\n                transform: ${w};\n                ${c}\n              }\n\n              100% {\n                opacity: 0;\n                margin: 0;\n                border-width: ${F};\n                border-style: ${O};\n                border-color: ${z};\n                border-radius: ${N};\n                z-index: ${le};\n                transform-origin: 0 0;\n                ${h}\n              }\n            }\n          `,m=!0===r.hideFromClone||!0===oe?"":`\n            @keyframes ${o}-from {\n              0% {\n                margin: ${Z<0?Z/2:0}px ${Y<0?Y/2:0}px;\n                width: ${ee+f.marginH}px;\n                height: ${te+f.marginV}px;\n              }\n\n              100% {\n                margin: 0;\n                width: 0;\n                height: 0;\n              }\n            }\n          `,S=!0===oe?`\n            margin: ${Z<0?Z/2:0}px ${Y<0?Y/2:0}px;\n            width: ${ee+f.marginH}px;\n            height: ${te+f.marginV}px;\n          `:"\n            margin: 0;\n            width: 0;\n            height: 0;\n          ",C=!0===r.keepToClone?"":`\n            @keyframes ${o}-to {\n              0% {\n                ${S}\n              }\n\n              100% {\n                margin: ${J<0?J/2:0}px ${Q<0?Q/2:0}px;\n                width: ${ie+H.marginH}px;\n                height: ${ne+H.marginV}px;\n              }\n            }\n          `;a.innerHTML=`\n          @keyframes ${o} {\n            0% {\n              margin: 0;\n              border-width: ${v};\n              border-style: ${y};\n              border-color: ${_};\n              border-radius: ${b};\n              background-color: ${x};\n              z-index: ${ae};\n              transform-origin: 0 0;\n              ${l}\n              ${d}\n            }\n\n            100% {\n              margin: 0;\n              border-width: ${F};\n              border-style: ${O};\n              border-color: ${z};\n              border-radius: ${N};\n              background-color: ${D};\n              z-index: ${le};\n              transform-origin: 0 0;\n              transform: ${G};\n              ${u}\n              ${p}\n            }\n          }\n\n          ${m}\n\n          ${g}\n\n          ${C}\n        `,document.head.appendChild(a);let M="normal";k.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${o}-from`,void 0!==T&&(T.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${o}-from-tween`),A.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${o}-to`,e.style.animation=`${r.duration}ms ${r.easing} ${r.delay}ms ${M} ${r.fill} ${o}`;const E=t=>{t===Object(t)&&t.animationName!==o||(e.removeEventListener("animationend",E),e.removeEventListener("animationcancel",E),ce(),a.remove())};s.qMorphCancel=()=>{s.qMorphCancel=void 0,i=!0,E()},e.qMorphCancel=()=>{e.qMorphCancel=void 0,i=!0,E()},e.addEventListener("animationend",E),e.addEventListener("animationcancel",E),t=t=>!!(!0!==i&&e&&k&&A)&&(!0===t?(E(),!0):(n=!0!==n,M="normal"===M?"reverse":"normal",k.style.animationDirection=M,T.style.animationDirection=M,A.style.animationDirection=M,e.style.animationDirection=M,!0))}};r.waitFor>0||"transitionend"===r.waitFor||r.waitFor===Object(r.waitFor)&&"function"==typeof r.waitFor.then?(r.waitFor>0?new Promise((e=>setTimeout(e,r.waitFor))):"transitionend"===r.waitFor?new Promise((t=>{const i=()=>{null!==n&&(clearTimeout(n),n=null),e&&(e.removeEventListener("transitionend",i),e.removeEventListener("transitioncancel",i)),t()};let n=setTimeout(i,400);e.addEventListener("transitionend",i),e.addEventListener("transitioncancel",i)})):r.waitFor).then(I).catch((()=>{"function"==typeof e.qMorphCancel&&e.qMorphCancel()})):I()})),e=>t(e)}({from:t.el,to:i.el,onToggle(){AP(t,"add"),AP(i,"remove")},...i.opts,onEnd(n,o){i.opts.onEnd?.(n,o),!0!==o&&(t.animating=!1,i.animating=!1,e.animating=!1,e.cancel=void 0,e.queue.shift(),qP(e))}});e.cancel=()=>{n(!0),e.cancel=void 0}}function FP(e,t){const i=t.opts;RP.forEach((t=>{i[t]=!0===e[t]}))}function OP(e,t){let i;Object(t)===t?(i=""+t.model,function(e,t){void 0!==e.group&&(t.group=e.group),void 0!==e.name&&(t.name=e.name);const i=t.opts;IP.forEach((t=>{void 0!==e[t]&&(i[t]=e[t])}))}(t,e),FP(t,e)):i=""+t,i!==e.model?(e.model=i,function(e,t){if(t.name!==e)!1===t.animating&&AP(t,"add");else{const i=LP[t.group];void 0===i?(LP[t.group]={name:t.group,model:e,queue:[t],animating:!1},AP(t,"remove")):i.model!==e&&(i.model=e,i.queue.push(t),!1===i.animating&&2===i.queue.length&&qP(i))}}(i,e)):!1===e.animating&&void 0!==e.clsAction&&e.el.classList[e.clsAction]("q-morph--invisible")}gb({name:"morph",mounted(e,t){const i={el:e,animating:!1,opts:{}};FP(t.modifiers,i),function(e,t){const i="string"==typeof e&&0!==e.length?e.split(":"):[];t.name=i[0],t.group=i[1],Object.assign(t.opts,{duration:!0===isNaN(i[2])?300:parseFloat(i[2]),waitFor:i[3]})}(t.arg,i),OP(i,t.value),e.__qmorph=i},updated(e,t){OP(e.__qmorph,t.value)},beforeUnmount(e){const t=e.__qmorph,i=LP[t.group];void 0!==i&&-1!==i.queue.indexOf(t)&&(i.queue=i.queue.filter((e=>e!==t)),0===i.queue.length&&(i.cancel?.(),delete LP[t.group])),"add"===t.clsAction&&e.classList.remove("q-morph--invisible"),delete e.__qmorph}});var zP={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0};function NP(e,t,i){t.handler=i,t.observer?.disconnect(),t.observer=new MutationObserver((i=>{"function"==typeof t.handler&&(!1===t.handler(i)||!0===t.once)&&DP(e)})),t.observer.observe(e,t.opts)}function DP(e){const t=e.__qmutation;void 0!==t&&(t.observer?.disconnect(),delete e.__qmutation)}gb({name:"mutation",mounted(e,{modifiers:{once:t,...i},value:n}){const o={once:t,opts:0===Object.keys(i).length?zP:i};NP(e,o,n),e.__qmutation=o},updated(e,{oldValue:t,value:i}){const n=e.__qmutation;void 0!==n&&t!==i&&NP(e,n,i)},beforeUnmount:DP});var{passive:GP}=vb;function jP(e,{value:t,oldValue:i}){"function"==typeof t?(e.handler=t,"function"!=typeof i&&(e.scrollTarget.addEventListener("scroll",e.scroll,GP),e.scroll())):e.scrollTarget.removeEventListener("scroll",e.scroll,GP)}function BP(e,{value:t,oldValue:i}){"function"==typeof t?(e.handler=t,"function"!=typeof i&&e.scrollTarget.addEventListener("scroll",e.scroll,vb.passive)):e.scrollTarget.removeEventListener("scroll",e.scroll,vb.passive)}gb({name:"scroll-fire",mounted(e,t){const i={scrollTarget:iS(e),scroll:kb((()=>{let t,n;i.scrollTarget===window?(n=e.getBoundingClientRect().bottom,t=window.innerHeight):(n=nw(e).top+ow(e),t=nw(i.scrollTarget).top+ow(i.scrollTarget)),n>0&&n<t&&(i.scrollTarget.removeEventListener("scroll",i.scroll,GP),i.handler(e))}),25)};jP(i,t),e.__qscrollfire=i},updated(e,t){t.value!==t.oldValue&&jP(e.__qscrollfire,t)},beforeUnmount(e){const t=e.__qscrollfire;t.scrollTarget.removeEventListener("scroll",t.scroll,GP),t.scroll.cancel(),delete e.__qscrollfire}}),gb({name:"scroll",mounted(e,t){const i={scrollTarget:iS(e),scroll(){i.handler(oS(i.scrollTarget),rS(i.scrollTarget))}};BP(i,t),e.__qscroll=i},updated(e,t){void 0!==e.__qscroll&&t.oldValue!==t.value&&BP(e.__qscroll,t)},beforeUnmount(e){const t=e.__qscroll;t.scrollTarget.removeEventListener("scroll",t.scroll,vb.passive),delete e.__qscroll}}),gb({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(!0!==i.mouse&&!0!==hb.has.touch)return;const n={handler:t.value,noop:yb,mouseStart(e){"function"==typeof n.handler&&!0===_b(e)&&(Mb(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(e,!0))},touchStart(e){if(void 0!==e.target&&"function"==typeof n.handler){const t=e.target;Mb(n,"temp",[[t,"touchmove","move","passiveCapture"],[t,"touchcancel","end","notPassiveCapture"],[t,"touchend","end","notPassiveCapture"]]),n.start(e)}},start(e,t){n.origin=bb(e);const i=Date.now();!0===hb.is.mobile&&(document.body.classList.add("non-selectable"),Ew(),n.styleCleanup=e=>{n.styleCleanup=void 0;const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(Ew(),setTimeout(t,10)):t()}),n.triggered=!1,n.sensitivity=!0===t?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout((()=>{n.timer=void 0,Ew(),n.triggered=!0,n.handler({evt:e,touch:!0!==t,mouse:!0===t,position:n.origin,duration:Date.now()-i})}),n.duration)},move(e){const{top:t,left:i}=bb(e);void 0!==n.timer&&(Math.abs(i-n.origin.left)>=n.sensitivity||Math.abs(t-n.origin.top)>=n.sensitivity)&&(clearTimeout(n.timer),n.timer=void 0)},end(e){Eb(n,"temp"),n.styleCleanup?.(n.triggered),!0===n.triggered?void 0!==e&&Sb(e):void 0!==n.timer&&(clearTimeout(n.timer),n.timer=void 0)}},o=[600,5,7];if("string"==typeof t.arg&&0!==t.arg.length&&t.arg.split(":").forEach(((e,t)=>{const i=parseInt(e,10);i&&(o[t]=i)})),[n.duration,n.touchSensitivity,n.mouseSensitivity]=o,e.__qtouchhold=n,!0===i.mouse){const t=!0===i.mouseCapture||!0===i.mousecapture?"Capture":"";Mb(n,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}!0===hb.has.touch&&Mb(n,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__qtouchhold;void 0!==i&&t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__qtouchhold;void 0!==t&&(Eb(t,"main"),Eb(t,"temp"),void 0!==t.timer&&clearTimeout(t.timer),t.styleCleanup?.(),delete e.__qtouchhold)}});var VP={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},$P=new RegExp(`^([\\d+]+|${Object.keys(VP).join("|")})$`,"i");gb({name:"touch-repeat",beforeMount(e,{modifiers:t,value:i,arg:n}){const o=Object.keys(t).reduce(((e,t)=>{if(!0===$P.test(t)){const i=isNaN(parseInt(t,10))?VP[t.toLowerCase()]:parseInt(t,10);i>=0&&e.push(i)}return e}),[]);if(!0!==t.mouse&&!0!==hb.has.touch&&0===o.length)return;const r="string"==typeof n&&0!==n.length?n.split(":").map((e=>parseInt(e,10))):[0,600,300],s=r.length-1,a={keyboard:o,handler:i,noop:yb,mouseStart(e){void 0===a.event&&"function"==typeof a.handler&&!0===_b(e)&&(Mb(a,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),a.start(e,!0))},keyboardStart(t){if("function"==typeof a.handler&&!0===Rb(t,o)){if((0===r[0]||void 0!==a.event)&&(Sb(t),e.focus(),void 0!==a.event))return;Mb(a,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),a.start(t,!1,!0)}},touchStart(e){if(void 0!==e.target&&"function"==typeof a.handler){const t=e.target;Mb(a,"temp",[[t,"touchmove","move","passiveCapture"],[t,"touchcancel","end","notPassiveCapture"],[t,"touchend","end","notPassiveCapture"]]),a.start(e)}},start(e,t,i){function n(e){a.styleCleanup=void 0,document.documentElement.style.cursor="";const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(Ew(),setTimeout(t,10)):t()}!0!==i&&(a.origin=bb(e)),!0===hb.is.mobile&&(document.body.classList.add("non-selectable"),Ew(),a.styleCleanup=n),a.event={touch:!0!==t&&!0!==i,mouse:!0===t,keyboard:!0===i,startTime:Date.now(),repeatCount:0};const o=()=>{if(a.timer=void 0,void 0===a.event)return;0===a.event.repeatCount&&(a.event.evt=e,!0===i?a.event.keyCode=e.keyCode:a.event.position=bb(e),!0!==hb.is.mobile&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),Ew(),a.styleCleanup=n)),a.event.duration=Date.now()-a.event.startTime,a.event.repeatCount+=1,a.handler(a.event);const t=s<a.event.repeatCount?s:a.event.repeatCount;a.timer=setTimeout(o,r[t])};0===r[0]?o():a.timer=setTimeout(o,r[0])},move(e){void 0!==a.event&&void 0!==a.timer&&!0===function(e,t){const{top:i,left:n}=bb(e);return Math.abs(n-t.left)>=7||Math.abs(i-t.top)>=7}(e,a.origin)&&(clearTimeout(a.timer),a.timer=void 0)},end(e){void 0!==a.event&&(a.styleCleanup?.(!0),void 0!==e&&a.event.repeatCount>0&&Sb(e),Eb(a,"temp"),void 0!==a.timer&&(clearTimeout(a.timer),a.timer=void 0),a.event=void 0)}};if(e.__qtouchrepeat=a,!0===t.mouse){const i=!0===t.mouseCapture||!0===t.mousecapture?"Capture":"";Mb(a,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}if(!0===hb.has.touch&&Mb(a,"main",[[e,"touchstart","touchStart","passive"+(!0===t.capture?"Capture":"")],[e,"touchend","noop","passiveCapture"]]),0!==o.length){const i=!0===t.keyCapture||!0===t.keycapture?"Capture":"";Mb(a,"main",[[e,"keydown","keyboardStart",`notPassive${i}`]])}},updated(e,{oldValue:t,value:i}){const n=e.__qtouchrepeat;void 0!==n&&t!==i&&("function"!=typeof i&&n.end(),n.handler=i)},beforeUnmount(e){const t=e.__qtouchrepeat;void 0!==t&&(void 0!==t.timer&&clearTimeout(t.timer),Eb(t,"main"),Eb(t,"temp"),t.styleCleanup?.(),delete e.__qtouchrepeat)}}),!0===hb.is.mobile&&(!0===hb.is.nativeMobile||!0===hb.is.winphone||!0===hb.is.safari||!0===hb.is.webkit||hb.is.vivaldi);var HP={};function UP(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function WP(){const e=YP.activeEl=!1===YP.isActive?null:UP();!function(e){if(e===Bw)return;if((Bw=e)===document.body||Gw.reduce(((e,t)=>"dialog"===t?e+1:e),0)<2)return void Dw.forEach((e=>{!1===e.contains(Bw)&&Bw.appendChild(e)}));const t=Gw.lastIndexOf("dialog");for(let i=0;i<Dw.length;i++){const e=Dw[i];(i===t||"dialog"!==Gw[i])&&!1===e.contains(Bw)&&Bw.appendChild(e)}}(null===e||e===document.documentElement?document.body:e)}function XP(){YP.isActive=!1===YP.isActive,WP()}function KP(e,t){try{const i=e[t]();return void 0===i?Promise.resolve():i}catch(i){return Promise.reject(i)}}var YP=mb({isActive:!1,activeEl:null},{isCapable:!1,install({$q:e}){e.fullscreen=this}});HP.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find((e=>void 0!==document.documentElement[e])),YP.isCapable=void 0!==HP.request,!1===YP.isCapable?function(e){Object.assign(YP,{request:e,exit:e,toggle:e})}((()=>Promise.reject("Not capable"))):(Object.assign(YP,{request(e){const t=e||document.documentElement,{activeEl:i}=YP;return t===i?Promise.resolve():(null!==i&&!0===t.contains(i)?YP.exit():Promise.resolve()).finally((()=>KP(t,HP.request)))},exit:()=>!0===YP.isActive?KP(document,HP.exit):Promise.resolve(),toggle:e=>!0===YP.isActive?YP.exit():YP.request(e)}),HP.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find((e=>document[e])),YP.isActive=!!UP(),!0===YP.isActive&&WP(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach((e=>{document[e]=XP})));var ZP=mb({appVisible:!0},{install({$q:e}){rb(e,"appVisible",(()=>this.appVisible))}});{let e,t;if(typeof document.hidden<"u"?(e="hidden",t="visibilitychange"):typeof document.msHidden<"u"?(e="msHidden",t="msvisibilitychange"):typeof document.webkitHidden<"u"&&(e="webkitHidden",t="webkitvisibilitychange"),t&&typeof document[e]<"u"){const i=()=>{ZP.appVisible=!document[e]};document.addEventListener(t,i,!1)}}function QP(e){return encodeURIComponent(e)}function JP(e){return decodeURIComponent(e)}function eL(e){if(""===e)return e;0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e=JP(e.replace(/\+/g," "));try{const t=JSON.parse(e);(t===Object(t)||!0===Array.isArray(t))&&(e=t)}catch{}return e}function tL(e){const t=new Date;return t.setMilliseconds(t.getMilliseconds()+e),t.toUTCString()}function iL(e,t,i={},n){let o,r;void 0!==i.expires&&("[object Date]"===Object.prototype.toString.call(i.expires)?o=i.expires.toUTCString():"string"==typeof i.expires?o=function(e){let t=0;const i=e.match(/(\d+)d/),n=e.match(/(\d+)h/),o=e.match(/(\d+)m/),r=e.match(/(\d+)s/);return i&&(t+=864e5*i[1]),n&&(t+=36e5*n[1]),o&&(t+=6e4*o[1]),r&&(t+=1e3*r[1]),0===t?e:tL(t)}(i.expires):(r=parseFloat(i.expires),o=!1===isNaN(r)?tL(864e5*r):i.expires));const s=[`${QP(e)}=${a=t,QP(a===Object(a)?JSON.stringify(a):""+a)}`,void 0!==o?"; Expires="+o:"",i.path?"; Path="+i.path:"",i.domain?"; Domain="+i.domain:"",i.sameSite?"; SameSite="+i.sameSite:"",i.httpOnly?"; HttpOnly":"",i.secure?"; Secure":"",i.other?"; "+i.other:""].join("");var a;document.cookie=s}function nL(e,t){const i=document,n=i.cookie?i.cookie.split("; "):[],o=n.length;let r,s,a,l=e?null:{},u=0;for(;u<o;u++)if(r=n[u].split("="),s=JP(r.shift()),a=r.join("="),e){if(e===s){l=eL(a);break}}else l[s]=a;return l}fb({name:"BottomSheetComponent",props:{...Fx,title:String,message:String,actions:Array,grid:Boolean,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:t}){const{proxy:i}=T(),n=Ox(e,i.$q),o=a(null);function r(){o.value.hide()}function s(e){t("ok",e),r()}function l(){t("hide")}function u(){const t=[];return e.title&&t.push(k(tC,{class:"q-dialog__title"},(()=>e.title))),e.message&&t.push(k(tC,{class:"q-dialog__message"},(()=>e.message))),t.push(!0===e.grid?k("div",{class:"row items-stretch justify-start",role:"list"},e.actions.map((e=>{const t=e.avatar||e.img;return void 0===e.label?k(WE,{class:"col-all",dark:n.value}):k("div",{class:["q-bottom-sheet__item q-hoverable q-focusable cursor-pointer relative-position",e.class],style:e.style,tabindex:0,role:"listitem",onClick(){s(e)},onKeyup(t){13===t.keyCode&&s(e)}},[k("div",{class:"q-focus-helper"}),e.icon?k(Ax,{name:e.icon,color:e.color}):t?k("img",{class:e.avatar?"q-bottom-sheet__avatar":"",src:t}):k("div",{class:"q-bottom-sheet__empty-icon"}),k("div",e.label)])}))):k("div",{role:"list"},e.actions.map((e=>{const t=e.avatar||e.img;return void 0===e.label?k(WE,{spaced:!0,dark:n.value}):k(LE,{class:["q-bottom-sheet__item",e.classes],style:e.style,tabindex:0,clickable:!0,dark:n.value,onClick(){s(e)}},(()=>[k(IE,{avatar:!0},(()=>e.icon?k(Ax,{name:e.icon,color:e.color}):t?k("img",{class:e.avatar?"q-bottom-sheet__avatar":"",src:t}):null)),k(IE,(()=>e.label))]))})))),t}function c(){return[k(eC,{class:["q-bottom-sheet q-bottom-sheet--"+(!0===e.grid?"grid":"list")+(!0===n.value?" q-bottom-sheet--dark q-dark":""),e.cardClass],style:e.cardStyle},u)]}return Object.assign(i,{show:function(){o.value.show()},hide:r}),()=>k(SE,{ref:o,position:"bottom",onHide:l},c)}});var oL={install({$q:e,ssrContext:t}){e.cookies=this}};Object.assign(oL,{get:e=>nL(e),set:(e,t,i)=>iL(e,t,i),has:e=>null!==nL(e),remove:(e,t)=>{return i=t,void iL(e,"",{expires:-1,...i});var i},getAll:()=>nL(null)}),fb({name:"DialogPluginComponent",props:{...Fx,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:t}){const{proxy:i}=T(),{$q:n}=i,o=Ox(e,n),l=a(null),u=a(void 0!==e.prompt?e.prompt.model:void 0!==e.options?e.options.model:void 0),c=s((()=>"q-dialog-plugin"+(!0===o.value?" q-dialog-plugin--dark q-dark":"")+(!1!==e.progress?" q-dialog-plugin--progress":""))),h=s((()=>e.color||(!0===o.value?"amber":"primary"))),d=s((()=>!1===e.progress?null:!0===Yb(e.progress)?{component:e.progress.spinner||iw,props:{color:e.progress.color||h.value}}:{component:iw,props:{color:h.value}})),p=s((()=>void 0!==e.prompt||void 0!==e.options)),f=s((()=>{if(!0!==p.value)return{};const{model:t,isValid:i,items:n,...o}=void 0!==e.prompt?e.prompt:e.options;return o})),g=s((()=>!0===Yb(e.ok)||!0===e.ok?n.lang.label.ok:e.ok)),m=s((()=>!0===Yb(e.cancel)||!0===e.cancel?n.lang.label.cancel:e.cancel)),v=s((()=>void 0!==e.prompt?void 0!==e.prompt.isValid&&!0!==e.prompt.isValid(u.value):void 0!==e.options&&void 0!==e.options.isValid&&!0!==e.options.isValid(u.value))),y=s((()=>({color:h.value,label:g.value,ripple:!1,disable:v.value,...!0===Yb(e.ok)?e.ok:{flat:!0},"data-autofocus":"ok"===e.focus&&!0!==p.value||void 0,onClick:x}))),_=s((()=>({color:h.value,label:m.value,ripple:!1,...!0===Yb(e.cancel)?e.cancel:{flat:!0},"data-autofocus":"cancel"===e.focus&&!0!==p.value||void 0,onClick:w})));function b(){l.value.hide()}function x(){t("ok",H(u.value)),b()}function w(){b()}function S(){t("hide")}function C(e){u.value=e}function M(t){!0!==v.value&&"textarea"!==e.prompt.type&&!0===Rb(t,13)&&x()}function E(t,i){return!0===e.html?k(tC,{class:t,innerHTML:i}):k(tC,{class:t},(()=>i))}function P(){return[k(Fk,{color:h.value,dense:!0,autofocus:!0,dark:o.value,...f.value,modelValue:u.value,"onUpdate:modelValue":C,onKeyup:M})]}function L(){return[k(eT,{color:h.value,options:e.options.items,dark:o.value,...f.value,modelValue:u.value,"onUpdate:modelValue":C})]}function I(){const t=[];return e.title&&t.push(E("q-dialog__title",e.title)),!1!==e.progress&&t.push(k(tC,{class:"q-dialog__progress"},(()=>k(d.value.component,d.value.props)))),e.message&&t.push(E("q-dialog__message",e.message)),void 0!==e.prompt?t.push(k(tC,{class:"scroll q-dialog-plugin__form"},P)):void 0!==e.options&&t.push(k(WE,{dark:o.value}),k(tC,{class:"scroll q-dialog-plugin__form"},L),k(WE,{dark:o.value})),(e.ok||e.cancel)&&t.push(function(){const t=[];return e.cancel&&t.push(k(Cw,_.value)),e.ok&&t.push(k(Cw,y.value)),k(iC,{class:!0===e.stackButtons?"items-end":"",vertical:e.stackButtons,align:"right"},(()=>t))}()),t}function R(){return[k(eC,{class:[c.value,e.cardClass],style:e.cardStyle,dark:o.value},I)]}return r((()=>e.prompt&&e.prompt.model),C),r((()=>e.options&&e.options.model),C),Object.assign(i,{show:function(){l.value.show()},hide:b}),()=>k(SE,{ref:l,onHide:S},R)}});var rL,sL,aL=0,lL=null,uL={},cL={},hL={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:iw,customClass:""},dL={...hL},pL=mb({isActive:!1},{show(e){uL=function(e){if(void 0!==e?.group&&void 0!==cL[e.group])return Object.assign(cL[e.group],e);const t=!0===Yb(e)&&!0===e.ignoreDefaults?{...hL,...e}:{...dL,...e};return cL[t.group]=t,t}(e);const{group:t}=uL;return pL.isActive=!0,void 0!==rL?(uL.uid=aL,sL.$forceUpdate()):(uL.uid=++aL,null!==lL&&clearTimeout(lL),lL=setTimeout((()=>{lL=null;const e=Vw("q-loading");rL=Jb({name:"QLoading",setup(){function t(){!0!==pL.isActive&&void 0!==rL&&(yE(!1),rL.unmount(e),$w(e),rL=void 0,sL=void 0)}function i(){if(!0!==pL.isActive)return null;const e=[k(uL.spinner,{class:"q-loading__spinner",color:uL.spinnerColor,size:uL.spinnerSize})];return uL.message&&e.push(k("div",{class:"q-loading__message"+(uL.messageColor?` text-${uL.messageColor}`:""),[!0===uL.html?"innerHTML":"textContent"]:uL.message})),k("div",{class:"q-loading fullscreen flex flex-center z-max "+uL.customClass.trim(),key:uL.uid},[k("div",{class:"q-loading__backdrop"+(uL.backgroundColor?` bg-${uL.backgroundColor}`:"")}),k("div",{class:"q-loading__box column items-center "+uL.boxClass},e)])}return l((()=>{yE(!0)})),()=>k(A,{name:"q-transition--fade",appear:!0,onAfterLeave:t},i)}},pL.__parentApp),sL=rL.mount(e)}),uL.delay)),e=>{void 0!==e&&Object(e)===e?pL.show({...e,group:t}):pL.hide(t)}},hide(e){if(!0===pL.isActive){if(void 0===e)cL={};else{if(void 0===cL[e])return;{delete cL[e];const t=Object.keys(cL);if(0!==t.length){const e=t[t.length-1];return void pL.show({group:e})}}}null!==lL&&(clearTimeout(lL),lL=null),pL.isActive=!1}},setDefaults(e){!0===Yb(e)&&Object.assign(dL,e)},install({$q:e,parentApp:t}){e.loading=this,pL.__parentApp=t,void 0!==e.config.loading&&this.setDefaults(e.config.loading)}}),fL=a(null),gL=mb({isActive:!1},{start:yb,stop:yb,increment:yb,setDefaults:yb,install({$q:e,parentApp:t}){if(e.loadingBar=this,!0===this.__installed)return void(void 0!==e.config.loadingBar&&this.setDefaults(e.config.loadingBar));const i=a(void 0!==e.config.loadingBar?{...e.config.loadingBar}:{});function n(){gL.isActive=!0}function o(){gL.isActive=!1}const r=Vw("q-loading-bar");Jb({name:"LoadingBar",devtools:{hide:!0},setup:()=>()=>k(cx,{...i.value,onStart:n,onStop:o,ref:fL})},t).mount(r),Object.assign(this,{start(e){fL.value.start(e)},stop(){fL.value.stop()},increment(){fL.value.increment.apply(null,arguments)},setDefaults(e){!0===Yb(e)&&Object.assign(i.value,e)}})}});function mL(){const e=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:e,getIndex:e,getKey:e,getAll:()=>{},getAllKeys:()=>[],set:yb,setItem:yb,remove:yb,removeItem:yb,clear:yb,isEmpty:()=>!0}}function vL(e){const t=window[e+"Storage"],i=e=>{const i=t.getItem(e);return i?function(e){if(e.length<9)return e;const t=e.substring(0,8),i=e.substring(9);switch(t){case"__q_date":const t=Number(i);return new Date(!0===Number.isNaN(t)?i:t);case"__q_expr":return new RegExp(i);case"__q_numb":return Number(i);case"__q_bool":return"1"===i;case"__q_strn":return""+i;case"__q_objt":return JSON.parse(i);default:return e}}(i):null},n=e=>null!==t.getItem(e),o=(e,i)=>{t.setItem(e,function(e){return!0===Zb(e)?"__q_date|"+e.getTime():1==(t=e,"[object RegExp]"===Object.prototype.toString.call(t))?"__q_expr|"+e.source:"number"==typeof e?"__q_numb|"+e:"boolean"==typeof e?"__q_bool|"+(e?"1":"0"):"string"==typeof e?"__q_strn|"+e:"function"==typeof e?"__q_strn|"+e.toString():e===Object(e)?"__q_objt|"+JSON.stringify(e):e;var t}(i))},r=e=>{t.removeItem(e)};return{has:n,hasItem:n,getLength:()=>t.length,getItem:i,getIndex:e=>e<t.length?i(t.key(e)):null,getKey:e=>e<t.length?t.key(e):null,getAll:()=>{let e;const n={},o=t.length;for(let r=0;r<o;r++)e=t.key(r),n[e]=i(e);return n},getAllKeys:()=>{const e=[],i=t.length;for(let n=0;n<i;n++)e.push(t.key(n));return e},set:o,setItem:o,remove:r,removeItem:r,clear:()=>{t.clear()},isEmpty:()=>0===t.length}}var yL=!1===hb.has.webStorage?mL():vL("local"),_L={install({$q:e}){e.localStorage=yL}};Object.assign(_L,yL);var bL=!1===hb.has.webStorage?mL():vL("session"),xL={install({$q:e}){e.sessionStorage=bL}};function wL(){return M("_q_")}Object.assign(xL,bL),cP(["ok","hide"]);const SL={class:"tool-container menuToolList"},CL={title:""},ML={title:""},EL={title:""},kL={title:""},TL={class:"q-pa-sm"},PL={class:"sjz"},LL={class:"xcoor"},IL={class:"ycoor"},RL={style:{margin:"0 auto"}};var AL=o({__name:"menuToolBar",props:{xmap:{type:Object,required:!0}},emits:["locate"],setup(e,{emit:t}){const i=t,n=e,o=a(!1),r=s((()=>{let e="";return n.xmap?.mapMenuState.layerTree&&(e="background-color:#ccc"),e}));function l(){if(n.xmap){const e=n.xmap.mapMenuState.layerTree;n.xmap.mapMenuState.layerTree=!e}}const u=s((()=>"")),c=s((()=>{let e="";return n.xmap?.mapMenuState.drawTool&&(e="background-color:#ccc"),e}));function m(){if(n.xmap){const e=n.xmap.mapMenuState.drawTool;n.xmap.mapMenuState.drawTool=!e}}const v=s((()=>{let e="";return n.xmap?.mapMenuState.measureTool&&(e="background-color:#ccc"),e}));function y(){if(n.xmap){const e=n.xmap.mapMenuState.measureTool;n.xmap.mapMenuState.measureTool=!e}}const _=a(),x=a(),w=a();function S(){null!=_.value&&null!=x.value&&i("locate",_.value,x.value,w.value)}return(e,t)=>(h(),b("ul",SL,[g("li",{onClick:l,style:V(r.value)},[g("span",CL,[p(f(X),{icon:"gis:layer-stack-o"})])],4),g("li",{onClick:m,style:V(c.value)},[g("span",ML,[p(f(X),{icon:"gis:extent-alt"})])],4),g("li",{onClick:y,style:V(v.value)},[g("span",EL,[p(f(X),{icon:"gis:measure"})])],4),g("li",{id:"locationBtn",style:V(u.value)},[g("span",kL,[p(f(X),{icon:"gis:position-o"})]),p(f(lT),{"model-value":o.value,"transition-show":"flip-up","transition-hide":"flip-down"},{default:d((()=>[g("div",TL,[t[3]||(t[3]=g("div",{class:"text-h6 text-center q-mb-md"},"",-1)),g("div",PL,[g("div",LL,[p(f(Fk),{dense:"",style:{width:"200px"},modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),label:":",placeholder:""},null,8,["modelValue"])]),g("div",IL,[p(f(Fk),{dense:"",style:{width:"200px"},modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=e=>x.value=e),label:":",placeholder:""},null,8,["modelValue"])]),g("div",null,[p(f(Fk),{id:"inputNumber",label:":",modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e),modelModifiers:{number:!0},type:"number",dense:"",style:{"max-width":"200px"},min:1,max:22},null,8,["modelValue"])]),g("div",RL,[p(f(Cw),{color:"primary","text-color":"black",label:"",onClick:S})])])])])),_:1},8,["model-value"])],4)]))}});AL.__file="src/components/MapTools/menuToolBar.vue";var qL=o({name:"SwipeToolBar",props:{xmap:{type:Object}},components:{Icon:X},setup(e){let t,i=e.xmap;return r((()=>e.xmap),(e=>{i=e})),{unload:function(){t&&t.unload()},useFishEyes:function(){if(!i)return;const e=i.LayerManager?.SwipeLayerIndex;if(void 0!==e){if(t)t.unload(),t.load();else{const n=document.getElementById(i.target);t=new yf(n,i),t.setSwipeLayer(e)}t.changeSwipeType(vf.FishEye,100)}else Hd.eventEmit(Bd.MAP_MESSAGE_INFO,"!")},useSwipe:function(e=0){if(!i)return;const n=i.LayerManager?.SwipeLayerIndex;if(void 0!==n){if(t)t.unload(),t.load();else{const e=document.getElementById(i.target);t=new yf(e,i)}t.setSwipeLayer(n),0===e?t.changeSwipeType(vf.RollHorizonl):t.changeSwipeType(vf.RollVertical)}else Hd.eventEmit(Bd.MAP_MESSAGE_INFO,"!")}}}});const FL={class:"tool-container swipeToolList"},OL={title:""},zL={title:""},NL={title:""},DL={title:""};qL.render=function(e,t,i,n,o,r){const s=u("Icon");return h(),b("ul",FL,[g("li",{onClick:t[0]||(t[0]=t=>e.useSwipe(0))},[g("span",OL,[p(s,{icon:"gis:swipe-map-v"})])]),g("li",{onClick:t[1]||(t[1]=t=>e.useSwipe(1))},[g("span",zL,[p(s,{icon:"gis:swipe-map-h"})])]),g("li",{onClick:t[2]||(t[2]=(...t)=>e.useFishEyes&&e.useFishEyes(...t))},[g("span",NL,[p(s,{icon:"gis:screen-mag"})])]),g("li",{onClick:t[3]||(t[3]=(...t)=>e.unload&&e.unload(...t))},[g("span",DL,[p(s,{icon:"gis:earth"})])])])},qL.__file="src/components/MapTools/swipeToolBar.vue";var GL=class extends Wp{constructor(e){e=e||{};var t=document.createElement("div");e.element=t,super(e),"number"==typeof e.offsetBox?this.offsetBox=[e.offsetBox,e.offsetBox,e.offsetBox,e.offsetBox]:this.offsetBox=e.offsetBox,this.closeBox=e.closeBox,this.onclose=e.onclose,this.onshow=e.onshow,Sf.create("BUTTON",{className:"closeBox"+(e.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:t}),!1!==e.anchor&&Sf.create("DIV",{className:"anchor",parent:t}),this.content=Sf.create("DIV",{html:e.html||"",className:"ol-popup-content",parent:t}),e.minibar&&Sf.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),e.stopEvent&&(t.addEventListener("mousedown",(function(e){e.stopPropagation()})),t.addEventListener("touchstart",(function(e){e.stopPropagation()}))),this._elt=t,this.setPositioning(e.positioning||"auto"),this.setPopupClass(e.popupClass||e.className||"default"),e.anim&&this.addPopupClass("anim"),e.position&&setTimeout(function(){this.show(e.position)}.bind(this))}getClassPositioning(){var e="",t=this.getPositioning();return/bottom/.test(t)&&(e+="ol-popup-bottom "),/top/.test(t)&&(e+="ol-popup-top "),/left/.test(t)&&(e+="ol-popup-left "),/right/.test(t)&&(e+="ol-popup-right "),/^center/.test(t)&&(e+="ol-popup-middle "),/center$/.test(t)&&(e+="ol-popup-center "),e}setClosebox(e){this.closeBox=e,e?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")}setPopupClass(e){var t=["ol-popup"];this.getVisible()&&t.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter((function(e){return e.length>0}));e?e.split(" ").filter((function(e){return e.length>0})).forEach((function(e){t.push(e)})):t.push("default"),i.forEach((function(e){t.push(e)})),this.closeBox&&t.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,t)}addPopupClass(e){this.element.classList.add(e)}removePopupClass(e){this.element.classList.remove(e)}setPositioning(e){void 0!==e&&(/auto/.test(e)?(this.autoPositioning=e.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(e=e.replace(/auto/g,"center"))&&(e="bottom-center"),this.setPositioning_(e))}setPositioning_(e){if(this.element){super.setPositioning(e),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var t=this.getClassPositioning().split(" ").filter((function(e){return e.length>0}));this.element.classList.add.apply(this.element.classList,t)}}getVisible(){return this.element.classList.contains("visible")}show(e,t){!t&&"string"==typeof e&&(t=e,e=null),!0===e&&(e=this.getPosition());var i=this,n=this.getMap();if(n&&(t&&t!==this.prevHTML&&(this.prevHTML=t,this.content.innerHTML="",t instanceof Element?this.content.appendChild(t):Sf.create("DIV",{html:t,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach((function(e){e.addEventListener("load",(function(){try{n.renderSync()}catch{}i.content.dispatchEvent(new Event("scroll"))}))}))),e)){if(this.autoPositioning){var o=n.getPixelFromCoordinate(e),r=n.getSize(),s=[];"auto"==this.autoPositioning[0]?s[0]=o[1]<r[1]/3?"top":"bottom":s[0]=this.autoPositioning[0],s[1]=o[0]<2*r[0]/3?"left":"right",this.setPositioning_(s[0]+"-"+s[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==s[1]?2:0],this.offsetBox["top"==s[0]?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(e),this.element.parentElement.style.display="","function"==typeof this.onshow&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout((function(){i.element.classList.add("visible")}),0)}}hide(){null!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))}},jL=class extends GL{constructor(e){(e=e||{}).popupClass=(e.popupClass||"")+" placemark anim",e.positioning="bottom-center",super(e),this.setPositioning=function(){},e.color&&(this.element.style.color=e.color),e.backgroundColor&&(this.element.style.backgroundColor=e.backgroundColor),e.contentColor&&this.setContentColor(e.contentColor),e.size&&this.setRadius(e.size)}show(e,t){!0===e&&(e=this.getPosition()),this.hide(),super.show(e,t)}setColor(e){this.element.style.color=e}setBackgroundColor(e){this._elt.style.backgroundColor=e}setContentColor(e){var t=this.element.getElementsByClassName("ol-popup-content")[0];t&&(t.style.color=e)}setClassName(e){var t=this.element.className;this.element.className="ol-popup placemark ol-popup-bottom ol-popup-center "+(/visible/.test(t)?"visible ":"")+(/anim/.test(t)?"anim ":"")+e}setRadius(e){this.element.style.fontSize=e+"px"}},BL=o({name:"ZoomInOut",props:{xmap:{type:Object},hasLayerTree:Rd().def(!1),isInternet:Rd().def(!0),hasFullScreen:Rd().def(!0)},components:{Icon:X},emits:["locate"],setup(e,{emit:t}){const i=s((()=>e.hasLayerTree)),n=s((()=>e.hasFullScreen)),o=s((()=>{let t=e.isInternet;return e.xmap&&(t=t&&e.xmap.isInternet),t}));let u=e.xmap;r((()=>e.xmap),(e=>{u=e}));const c=a(!1),h=s((()=>c.value?"":"")),d=s((()=>{let e="";return c.value&&(e="background-color:#ccc"),e})),p=s((()=>{let t="";return e.xmap?.mapMenuState.layerTree&&(t="background-color:#ccc"),t}));let f;return l((()=>{if(u){const e=u.map.getControls();if(e){const t=e.getArray()[0];u.map.removeControl(t)}}})),{isFullScreen:c,toggleMapScreen:function(){if(c.value)(function(){const e=window.document;var t=document.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.webkitExitFullscreen;if(t)t.call(document);else if(typeof window.ActiveXObject<"u"){var i=new window.ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}})(),setTimeout((()=>{Nf()}),300);else{const e=u.targetContainer,t=document.getElementById(e);if(t)zf(t);else{const e=document.getElementById(u.target);e&&zf(e)}}c.value=!c.value},fullScreenTip:h,fullScreenStyle:d,zoomInOut:function(e=!0){if(!u)return;let t=u.MapView.getZoom()+(e?1:-1);t<=0&&(t=1),u.MapView.setZoom(t)},layerTreeSelected:p,changeLayerTree:function(){if(e.xmap){const t=e.xmap.mapMenuState.layerTree;e.xmap.mapMenuState.layerTree=!t}},hasLayerTreeRef:i,isInternetRef:o,goHomeView:function(){u.goHomeView()},doGeoLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{if(e.coords&&u){const t=[e.coords.longitude,e.coords.latitude];f||(f=new jL({contentColor:"#000",autoPan:{animation:{duration:250}}})),u.map.addOverlay(f),f.show(Hy.fromLonLat(t,u.MapView.getProjection())),u.zoomToCenter(t,15),setTimeout((()=>{f&&u.map.getOverlays().pop()}),2e3)}})):alert("")},hasFullScreenRef:n}}});const VL={class:"tool-container zoomFullList"},$L={title:""},HL={title:""},UL={title:""},WL=["title"],XL={title:""},KL={title:""};BL.render=function(e,t,i,n,o,r){const s=u("Icon");return h(),b("ul",VL,[g("li",{onClick:t[0]||(t[0]=t=>e.zoomInOut())},[g("span",$L,[p(s,{icon:"ant-design:plus-outlined"})])]),g("li",{onClick:t[1]||(t[1]=t=>e.zoomInOut(!1))},[g("span",HL,[p(s,{icon:"ant-design:minus-outlined"})])]),e.hasLayerTreeRef?(h(),b("li",{key:0,onClick:t[2]||(t[2]=(...t)=>e.changeLayerTree&&e.changeLayerTree(...t)),style:V(e.layerTreeSelected)},[g("span",UL,[p(s,{icon:"gis:layer-stack-o"})])],4)):C("v-if",!0),e.hasFullScreenRef?(h(),b("li",{key:1,onClick:t[3]||(t[3]=(...t)=>e.toggleMapScreen&&e.toggleMapScreen(...t)),style:V(e.fullScreenStyle)},[g("span",{title:e.fullScreenTip},[e.isFullScreen?(h(),c(s,{key:1,icon:"ant-design:fullscreen-exit-outlined"})):(h(),c(s,{key:0,icon:"ant-design:fullscreen-outlined"}))],8,WL)],4)):C("v-if",!0),g("li",{onClick:t[4]||(t[4]=(...t)=>e.goHomeView&&e.goHomeView(...t))},[g("span",XL,[p(s,{icon:"ant-design:home-outlined"})])]),e.isInternetRef?(h(),b("li",{key:2,onClick:t[5]||(t[5]=(...t)=>e.doGeoLocation&&e.doGeoLocation(...t))},[g("span",KL,[p(s,{icon:"ant-design:aim-outlined"})])])):C("v-if",!0)])},BL.__file="src/components/MapTools/zoomFullBar.vue";const YL={class:"row q-gutter-sm"};var ZL=o({__name:"contextMenu",props:{xmap:{type:h_,required:!0},replace:{type:Boolean,default:!1},moreMenuList:{type:Array,default:[]},target:{type:[String,Element,Boolean],default:"map"}},emits:["itemClicked"],setup(e,{emit:t}){const i=mP,n=t,o=e,r=[{id:"show-position",label:"",icon:"ic:baseline-info"},{},{id:"zoom-in",label:"",icon:"ic:baseline-zoom-in"},{id:"zoom-out",label:"",icon:"ic:baseline-zoom-out"},{id:"locate-center",label:"",icon:"ion:md-locate"}],a=s((()=>{if(qf(o.target)){const e=o.target;return e.startsWith("#")||e.startsWith(".")?o.target:`#${e}`}return o.target})),l=s((()=>o.replace?o.moreMenuList&&o.moreMenuList.length>0?o.moreMenuList:r:o.moreMenuList&&o.moreMenuList.length>0?[...r,...o.moreMenuList]:r)),v=wL();return(e,t)=>{const r=u("Icon");return h(),c(f(jS),{"transition-show":"flip-right","transition-hide":"flip-left",target:a.value,"context-menu":""},{default:d((()=>[p(f(jk),{dense:"",style:{"min-width":"100px"}},{default:d((()=>[(h(!0),b(x,null,w(l.value,((e,t)=>(h(),b(x,null,[e.id?S((h(),c(f(LE),{key:0,onClick:t=>function(e){const t=o.xmap;switch(e.id){case"show-position":if(!t)throw new Error("XMap");const i=t.CurrentPosition,o=t.MapView.getProjection(),r=o.getCode();let s="";if("EPSG:4326"===r||"EPSG:4490"===r)s=`${i[0]} ${i[1]}`;else{const e=Hy.transformCoordinate(i,o,fn("EPSG:4326"));s=`${i[0].toFixed(4)} ${i[1].toFixed(4)}  <br/>${e[0].toFixed(4)} ${e[1].toFixed(4)}`}v.dialog({title:"",message:s,html:!0});break;case"zoom-in":if(!t)throw new Error("XMap");const a=t.MapView,l=a.getZoom(),u=a.getConstrainedZoom(l+1);a.setZoom(u);break;case"zoom-out":if(!t)throw new Error("XMap");const c=t.MapView,h=c.getZoom(),d=c.getConstrainedZoom(h-1);c.setZoom(d);break;case"locate-center":if(!t)throw new Error("XMap");t.MapView.setCenter(t.CurrentPosition);break;default:n("itemClicked",e)}}(e),clickable:""},{default:d((()=>[p(f(IE),null,{default:d((()=>[g("div",YL,[e.icon?(h(),c(r,{key:0,icon:e.icon},null,8,["icon"])):C("v-if",!0),g("span",null,m(e.label),1)])])),_:2},1024)])),_:2},1032,["onClick"])),[[f(i)]]):(h(),c(f(WE),{key:1}))],64)))),256))])),_:1})])),_:1},8,["target"])}}});ZL.__file="src/components/MapTools/contextMenu.vue";var QL=o({name:"myOLMap",components:{ZoomFullBar:BL,ContextMenu:ZL},props:{mapid:Ad().def("map"),mapgroup:Ad().def("map"),hasLayerManager:Rd().def(!1),initTDTLayers:Fd().def(["img_w","cia_w"]),viewProjection:zd([String,_i,Object]).def("EPSG:3857"),defaultCenter:Fd().def([108.95,34.5]),viewOptions:Od(),multiWorld:Rd().def(!1),enableContextMenu:Rd().def(!0)},emits:["mapInited"],setup(e,{emit:t}){const i=e.mapid,n=a(e.mapid),o=a(e.mapid+"_Container"),u=e.mapgroup;let c,h=e.viewProjection;r((()=>e.viewProjection),(e=>{g(e),m()}));const d=s((()=>e.enableContextMenu)),p=a();let f;function g(t){c=e.viewOptions??{projection:t,center:e.defaultCenter,zoom:3,multiWorld:e.multiWorld},!c.center&&e.defaultCenter&&(c.center=e.defaultCenter),f&&(f.dispose(),f=void 0,p.value=void 0),f=new h_(i,u,e.hasLayerManager),e.hasLayerManager}function m(){f.initMapView(c),p.value=f;let i=f.WMTSTool;if(e.initTDTLayers){const t=e.initTDTLayers;t&&t.length>0&&t.forEach((e=>{const t=e.toLocaleLowerCase(),n=i.getTDTAlias(t);i.addTDTLayer(e,n)}))}t("mapInited",{xmap:f,wmtsTool:i})}return l((()=>{c||(g(h),m())})),{mapIDRef:n,mapContainerRef:o,mapRef:p,enableMenuComputed:d}}});const JL=["id"],eI={class:"mainMapPanel"},tI=["id"],iI={class:"mapLeftPanel"},nI={class:"mapRightPanel"},oI={key:0,class:"extendmenu"},rI={style:{position:"relative"}};QL.render=function(e,t,i,n,o,r){const s=u("ZoomFullBar"),a=u("ContextMenu");return h(),b("div",{id:e.mapContainerRef,class:"mapContainer"},[g("div",eI,[g("div",{id:e.mapIDRef,class:"mainMapPanel"},null,8,tI),g("div",null,[$(e.$slots,"default")])]),g("div",iI,[$(e.$slots,"mapLeftPanel")]),g("div",nI,[$(e.$slots,"mapRightPanel",{},(()=>[C(" "),e.mapRef?(h(),b("div",oI,[g("div",rI,[p(s,{xmap:e.mapRef,hasLayerTree:!1},null,8,["xmap"])]),C("  "),$(e.$slots,"mapRightExtend")])):C("v-if",!0)]))]),e.enableMenuComputed?(h(),c(a,{key:0,target:e.mapIDRef,xmap:e.mapRef},null,8,["target","xmap"])):C("v-if",!0)],8,JL)},QL.__file="src/components/OLXmap/index.vue";var sI=o({name:"xmapView",props:{hasLayerTree:Rd().def(!1),viewHeight:qd().isRequired,viewWidth:qd().isRequired,mapid:Ad().def("map"),mapgroup:Ad().def("map"),viewProjection:zd([String,_i]).def("EPSG:4326"),initTDTLayers:Array,viewOptions:Od(),multiWorld:Rd().def(!1)},components:{OLXMap:QL,DrawToolBar:U_,MeasureToolBar:eb,MenuToolBar:AL},emits:["mapInited"],setup(e,{attrs:t,slots:i,emit:n}){const o=a(e.hasLayerTree),u=a(e.viewHeight),c=a(e.viewWidth),h=a(e.initTDTLayers),d=a(),p=a();let f;function g(t){if(t){if(qf(t))"EPSG:4326"===t&&(h.value=e.initTDTLayers??["vec_c","cva_c"]);else{const i=t.getCode();("EPSG:4326"===i||"EPSG:4490"===i)&&(h.value=e.initTDTLayers??["vec_c","cva_c"])}d.value=t}}g(e.viewProjection),r((()=>e.viewProjection),(()=>{const t=e.viewProjection;t&&g(t)})),r((()=>e.viewHeight),(e=>{u.value=e})),r((()=>e.viewWidth),(e=>{c.value=e}));const m=s((()=>`height:${u.value-55}px`)),v=s((()=>`width:${c.value-20}px;`)),y=s((()=>{const e=u.value,t=c.value;return Nf(),`position:relative;width:${t};height:${e}px`}));l((()=>{})),L((()=>{let e=f?.map;e&&e.dispose()}));const _=s((()=>!!f&&f.mapMenuState.layerTree)),b=s((()=>!!f&&f.mapMenuState.drawTool)),x=s((()=>!!f&&f.mapMenuState.measureTool));return{heightStyle:m,widthStyle:v,layerTreeVisible:_,mapInitedHandler:function(e){f=e.xmap,p.value=f,n("mapInited",e)},mapRef:p,mainContainStyle:y,hasLayerTreeRef:o,initTDTLayersRef:h,viewProjectionRef:d,doLocation:function(e,t,i){if(f.map){const n=f.MapView,o=n.getProjection(),r=Hy.transformCoordinate([e,t],"EPSG:4326",o);n.setCenter(r),i&&i>=0&&n.setZoom(i)}},measureToolVisible:x,drawToolVisible:b}}});const aI={style:{position:"relative"}};sI.render=function(e,t,i,n,o,r){const s=u("MenuToolBar"),a=u("DrawToolBar"),l=u("MeasureToolBar"),c=u("OLXMap");return h(),b("div",{class:"mainViewContent",style:V(e.mainContainStyle)},[p(c,{mapid:e.mapid,viewOptions:e.viewOptions,"multi-world":e.multiWorld,mapgroup:e.mapgroup,hasLayerManager:!0,viewProjection:e.viewProjectionRef,initTDTLayers:e.initTDTLayersRef,onMapInited:e.mapInitedHandler},{mapLeftPanel:d((()=>[C(' class="mapstyle"  '),C(' <LayerTree class="layerTree" :style="heightStyle" v-show="layerTreeVisible"></LayerTree> '),C("  "),$(e.$slots,"mapLeftPanelGroup")])),mapRightExtend:d((()=>[C(" "),g("div",aI,[p(s,{xmap:e.mapRef,onLocate:e.doLocation},null,8,["xmap","onLocate"]),S(p(a,{xmap:e.mapRef},null,8,["xmap"]),[[j,e.drawToolVisible]]),S(p(l,{xmap:e.mapRef},null,8,["xmap"]),[[j,e.measureToolVisible]])]),C("  "),$(e.$slots,"extendMenuGroup")])),_:3},8,["mapid","viewOptions","multi-world","mapgroup","viewProjection","initTDTLayers","onMapInited"])],4)},sI.__file="src/components/XMapView/index.vue";const lI={class:"row items-center"},uI={class:"text-weight-bold text-primary"},cI={class:"row full-width no-wrap"},hI={class:"row items-center justify-center q-gutter-sm no-wrap layer_label_nowrap"},dI=["title"],pI={class:"gt-sm row items-center justify-center q-gutter-sm no-wrap layer_right_bar"},fI={class:"cursor-pointer"},gI={title:""},mI=["onClick"],vI={class:"row items-center q-gutter-sm"};var yI=o({__name:"LayerTree",props:{xmap:zd([Od,h_]).isRequired,moreContextMenu:Fd().def([])},setup(e){const t=wL(),i=mP,n=e,o=s((()=>{if(n.moreContextMenu.length>0){const e=[...E];return e.push(...n.moreContextMenu),e}return E})),l={grid:"zondicons:view-tile",vector:"gis:extent-alt",mvt:"gis:mvt",symbol:"gis:layer-poi"};function M(e){let t=l[e];return t||(t="gis:layer-landcover"),t}const E=[{name:"",icon:"gis:layer-up",value:"upMove"},{name:"",icon:"gis:layer-down",value:"downMove"},{name:"",icon:"gis:location-on",value:"location"},{name:"",icon:"gis:layer-2-rm-o",value:"delete"}];function k(e){return e===F.swipeid?"gis:map-control":"gis:map-o"}const T=a([]),P=a(""),L=a([]),I=a([]);let R=[];function A(e){T.value=[],L.value=[],R.length=0;let t,i=[];const n=e.length;for(let s=0;s<n;s++){const o=e[s],r={id:o.id,name:o.name,label:o.alias?o.alias:o.name,group:o.group,minZoom:o.minZoom,maxZoom:o.maxZoom,visible:o.visible,opacity:o.opacity,type:o.type};let a,l,u;s<n-1&&(a=e[s+1]),a&&(u=a.group),l=r.group,l?t===l?i[i.length-1].children.push(r):a&&u===l?i.push({id:Of(),label:l,header:"group",children:[r]}):i.push(r):i.push(r),t=l}T.value=i;const o=T.value.length,r=[];for(let s=0;s<o;s++){const e=T.value[s];if(r.push(e.id),e.children){let t=!0;const i=e.children.length;for(let n=0;n<i;n++){let i=e.children[n];i.visible?R.push(i.id):t=!1}t&&R.push(e.id)}else e.visible&&R.push(e.id)}I.value=r,L.value=R}function q(e){e.mapID==F.mapid&&n.xmap&&A(n.xmap.LayerManager.LayerItemList)}r((()=>n.xmap),(e=>{e&&(F.mapEventBus=e.mapEventBus,F.mapid=e.target,A(e.LayerManager.LayerItemList),F.mapEventBus.eventOn(Bd.LAYER_CHANGED,q))}),{immediate:!0}),r((()=>L.value),(()=>{const e=H(L.value);if(0===e.length)return;const t=R,i=e.filter((e=>!t.includes(e))),n=t.filter((t=>!e.includes(t)));i&&i.forEach((e=>{z(e,!0)})),n&&n.forEach((e=>{z(e,!1)})),R=[...e]}),{immediate:!1,deep:!0});const F=_({mapEventBus:void 0,mapid:"map",mapgroup:"map",swipeid:void 0});function O(e,t=null){if(n.xmap)return n.xmap.newEvtArgs(e,t);{const i=new Vd(F.mapid,"map");return i.data=e,i.target=t,i}}function z(e,t){F.mapEventBus.eventEmit(Bd.LAYER_VISIBLE_CHANGED,O({id:e,visible:t}))}function N(e,t){F.mapEventBus.eventEmit(Bd.LAYER_ORDER_CHANGED,O({layerID:e,updown:t}))}return(e,n)=>{const r=u("Icon");return h(),c(f(vT),{class:"layerTreeControl"},{default:d((()=>[p(f(rP),{style:{width:"100%"},nodes:T.value,"node-key":"id","label-key":"label","tick-strategy":"leaf","no-connectors":"",selected:P.value,"onUpdate:selected":n[0]||(n[0]=e=>P.value=e),ticked:L.value,"onUpdate:ticked":n[1]||(n[1]=e=>L.value=e),expanded:I.value,"onUpdate:expanded":n[2]||(n[2]=e=>I.value=e)},{"header-group":d((e=>[g("div",lI,[p(r,{icon:"gis:folder-globe-o"}),g("div",uI,m(e.node.label),1)])])),"default-header":d((e=>[g("div",cI,[g("div",hI,[p(r,{icon:M(e.node.type)},null,8,["icon"]),g("span",{title:e.node.name},m(e.node.label),9,dI)]),p(f(zT),{class:"gt-sm"}),g("div",pI,[g("div",fI,[g("span",gI,m(e.node.opacity),1),p(f(aT),{modelValue:e.node.opacity,"onUpdate:modelValue":[t=>e.node.opacity=t,t=>function(e){const t=e.opacity;!function(e,t){let i=1;i=t>1?1:t<0?0:t,F.mapEventBus.eventEmit(Bd.LAYER_OPACITY_CHANGED,O({id:e,opacity:i}))}(e.id,t)}(e.node)],"auto-save":"",class:"layer_opacity_slider"},{default:d((e=>[p(f(HC),{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,step:.05,min:0,max:1,onKeyup:v(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:1},8,["modelValue","onUpdate:modelValue"])]),g("span",{title:"",onClick:y((t=>{var i;(i=e.node.id)&&(F.swipeid=i,F.mapEventBus.eventEmit(Bd.LAYER_SWIPE_CHANGED,O({id:i})))}),["stop"])},[p(r,{icon:k(e.node.id)},null,8,["icon"])],8,mI)])]),p(f(jS),{target:!0,"context-menu":""},{default:d((()=>[p(f(jk),{dense:"",style:{"min-width":"100px"}},{default:d((()=>[(h(!0),b(x,null,w(o.value,((n,o)=>(h(),b(x,null,[n.name?S((h(),c(f(LE),{key:0,onClick:i=>function(e,i){switch(e.value){case"upMove":N(i.id,1);break;case"downMove":N(i.id,-1);break;case"location":n=i.id,F.mapEventBus.eventEmit(Bd.LAYER_LOCATE,n);break;case"delete":t.dialog({title:"",message:`:${i.label}`,cancel:!0,persistent:!0}).onOk((()=>{!function(e){F.mapEventBus.eventEmit(Bd.LAYER_REMOVED,O({id:e}))}(i.id)})).onCancel((()=>{}));break;default:const o={item:e,id:i.id,name:i.name,label:i.label};F.mapEventBus.eventEmit(Bd.LAYER_TREE_CONTEXT_MENU,O(o))}var n}(n,e.node),clickable:""},{default:d((()=>[p(f(IE),null,{default:d((()=>[g("div",vI,[n.icon?(h(),c(r,{key:0,icon:n.icon},null,8,["icon"])):C("v-if",!0),g("span",null,m(n.name),1)])])),_:2},1024)])),_:2},1032,["onClick"])),[[f(i)]]):(h(),c(f(WE),{key:1}))],64)))),256))])),_:2},1024)])),_:2},1024)])),_:1},8,["nodes","selected","ticked","expanded"])])),_:1})}}});yI.__file="src/components/LayerTree.vue";const _I=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function bI(e,t){const i={};for(const n in e)"ref"!==n&&(i[n]=e[n]);return _I.forEach((e=>{e in t&&(i[e]=t[e])})),i}function xI(e){e=e.slice();const t=Object.create(null);for(let i=0;i<e.length;i++)t[e[i].id]=e[i];for(let i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=bI(e[i],t[e[i].ref]));return e}class wI extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class SI{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,n]of t)this.bindings[i]=n}concat(e){return new SI(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const CI={kind:"null"},MI={kind:"number"},EI={kind:"string"},kI={kind:"boolean"},TI={kind:"color"},PI={kind:"projectionDefinition"},LI={kind:"object"},II={kind:"value"},RI={kind:"collator"},AI={kind:"formatted"},qI={kind:"padding"},FI={kind:"colorArray"},OI={kind:"numberArray"},zI={kind:"resolvedImage"},NI={kind:"variableAnchorOffsetCollection"};function DI(e,t){return{kind:"array",itemType:e,N:t}}function GI(e){if("array"===e.kind){const t=GI(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const jI=[CI,MI,EI,kI,TI,PI,AI,LI,DI(II),qI,OI,FI,zI,NI];function BI(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!BI(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of jI)if(!BI(e,t))return null}return`Expected ${GI(e)} but found ${GI(t)} instead.`}function VI(e,t){return t.some((t=>t.kind===e.kind))}function $I(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function HI(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const UI=.96422,WI=.82521,XI=4/29,KI=6/29,YI=3*KI*KI,ZI=KI*KI*KI,QI=Math.PI/180,JI=180/Math.PI;function eR(e){return(e%=360)<0&&(e+=360),e}function tR([e,t,i,n]){let o,r;const s=nR((.2225045*(e=iR(e))+.7168786*(t=iR(t))+.0606169*(i=iR(i)))/1);e===t&&t===i?o=r=s:(o=nR((.4360747*e+.3850649*t+.1430804*i)/UI),r=nR((.0139322*e+.0971045*t+.7141733*i)/WI));const a=116*s-16;return[a<0?0:a,500*(o-s),200*(s-r),n]}function iR(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nR(e){return e>ZI?Math.pow(e,1/3):e/YI+XI}function oR([e,t,i,n]){let o=(e+16)/116,r=isNaN(t)?o:o+t/500,s=isNaN(i)?o:o-i/200;return o=1*sR(o),r=UI*sR(r),s=WI*sR(s),[rR(3.1338561*r-1.6168667*o-.4906146*s),rR(-.9787684*r+1.9161415*o+.033454*s),rR(.0719453*r-.2289914*o+1.4052427*s),n]}function rR(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function sR(e){return e>KI?e*e*e:YI*(e-XI)}const aR=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function lR(e,t){return aR(e,t)?e[t]:void 0}function uR(e){return parseInt(e.padEnd(2,e),16)/255}function cR(e,t){return hR(t?e/100:e,0,1)}function hR(e,t,i){return Math.min(Math.max(t,e),i)}function dR(e){return!e.some(Number.isNaN)}const pR={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function fR(e,t,i){return e+i*(t-e)}function gR(e,t,i){return e.map(((e,n)=>fR(e,t[n],i)))}class mR{constructor(e,t,i,n=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=n,o||(this.r*=n,this.g*=n,this.b*=n,n||this.overwriteGetter("rgb",[e,t,i,n]))}static parse(e){if(e instanceof mR)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=lR(pR,e);if(t){const[e,i,n]=t;return[e/255,i/255,n/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let i=1;return[uR(e.slice(i,i+=t)),uR(e.slice(i,i+=t)),uR(e.slice(i,i+=t)),uR(e.slice(i,i+t)||"ff")]}if(e.startsWith("rgb")){const t=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=e.match(t);if(i){const[e,t,n,o,r,s,a,l,u,c,h,d]=i,p=[o||" ",a||" ",c].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[n,s,u].join(""),i="%%%"===e?100:""===e?255:0;if(i){const e=[hR(+t/i,0,1),hR(+r/i,0,1),hR(+l/i,0,1),h?cR(+h,d):1];if(dR(e))return e}}return}}const i=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(i){const[e,t,n,o,r,s,a,l,u]=i,c=[n||" ",r||" ",a].join("");if("  "===c||"  /"===c||",,"===c||",,,"===c){const e=[+t,hR(+o,0,100),hR(+s,0,100),l?cR(+l,u):1];if(dR(e))return function([e,t,i,n]){function o(n){const o=(n+e/30)%12,r=t*Math.min(i,1-i);return i-r*Math.max(-1,Math.min(o-3,9-o,1))}return e=eR(e),t/=100,i/=100,[o(0),o(8),o(4),n]}(e)}}}(e);return t?new mR(...t,!1):void 0}get rgb(){const{r:e,g:t,b:i,a:n}=this,o=n||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,n])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,i,n,o]=tR(e),r=Math.sqrt(i*i+n*n);return[Math.round(1e4*r)?eR(Math.atan2(n,i)*JI):NaN,r,t,o]}(this.rgb))}get lab(){return this.overwriteGetter("lab",tR(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,n]=this.rgb;return`rgba(${[e,t,i].map((e=>Math.round(255*e))).join(",")},${n})`}static interpolate(e,t,i,n="rgb"){switch(n){case"rgb":{const[n,o,r,s]=gR(e.rgb,t.rgb,i);return new mR(n,o,r,s,!1)}case"hcl":{const[n,o,r,s]=e.hcl,[a,l,u,c]=t.hcl;let h,d;if(isNaN(n)||isNaN(a))isNaN(n)?isNaN(a)?h=NaN:(h=a,(1===r||0===r)&&(d=l)):(h=n,(1===u||0===u)&&(d=o));else{let e=a-n;a>n&&e>180?e-=360:a<n&&n-a>180&&(e+=360),h=n+i*e}const[p,f,g,m]=function([e,t,i,n]){return e=isNaN(e)?0:e*QI,oR([i,Math.cos(e)*t,Math.sin(e)*t,n])}([h,d??fR(o,l,i),fR(r,u,i),fR(s,c,i)]);return new mR(p,f,g,m,!1)}case"lab":{const[n,o,r,s]=oR(gR(e.lab,t.lab,i));return new mR(n,o,r,s,!1)}}}}mR.black=new mR(0,0,0,1),mR.white=new mR(1,1,1,1),mR.transparent=new mR(0,0,0,0),mR.red=new mR(1,0,0,1);class vR{constructor(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const yR=["bottom","center","top"];class _R{constructor(e,t,i,n,o,r){this.text=e,this.image=t,this.scale=i,this.fontStack=n,this.textColor=o,this.verticalAlign=r}}class bR{constructor(e){this.sections=e}static fromString(e){return new bR([new _R(e,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof bR?e:bR.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class xR{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof xR)return e;if("number"==typeof e)return new xR([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new xR(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new xR(gR(e.values,t.values,i))}}class wR{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof wR)return e;if("number"==typeof e)return new wR([e]);if(Array.isArray(e)){for(const t of e)if("number"!=typeof t)return;return new wR(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new wR(gR(e.values,t.values,i))}}class SR{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof SR)return e;if("string"==typeof e){const t=mR.parse(e);return t?new SR([t]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if("string"!=typeof i)return;const e=mR.parse(i);if(!e)return;t.push(e)}return new SR(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,n="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let r=0;r<e.values.length;r++)o.push(mR.interpolate(e.values[r],t.values[r],i,n));return new SR(o)}}class CR extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const MR=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ER{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ER)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const i=e[t],n=e[t+1];if("string"!=typeof i||!MR.has(i)||!Array.isArray(n)||2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])return}return new ER(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const n=e.values,o=t.values;if(n.length!==o.length)throw new CR(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const r=[];for(let s=0;s<n.length;s+=2){if(n[s]!==o[s])throw new CR(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${n[s]}, to[${s}]: ${o[s]}`);r.push(n[s]);const[e,t]=n[s+1],[a,l]=o[s+1];r.push([fR(e,a,i),fR(t,l,i)])}return new ER(r)}}class kR{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new kR({name:e,available:!1}):null}}class TR{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new TR(e,t,i)}static parse(e){return e instanceof TR?e:Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]?new TR(e[0],e[1],e[2]):"object"==typeof e&&"string"==typeof e.from&&"string"==typeof e.to&&"number"==typeof e.transition?new TR(e.from,e.to,e.transition):"string"==typeof e?new TR(e,e,1):void 0}}function PR(e,t,i,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?typeof n>"u"||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,i,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,t,i,n]:[e,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function LR(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof TR||e instanceof mR||e instanceof vR||e instanceof bR||e instanceof xR||e instanceof wR||e instanceof SR||e instanceof ER||e instanceof kR)return!0;if(Array.isArray(e)){for(const t of e)if(!LR(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!LR(e[t]))return!1;return!0}return!1}function IR(e){if(null===e)return CI;if("string"==typeof e)return EI;if("boolean"==typeof e)return kI;if("number"==typeof e)return MI;if(e instanceof mR)return TI;if(e instanceof TR)return PI;if(e instanceof vR)return RI;if(e instanceof bR)return AI;if(e instanceof xR)return qI;if(e instanceof wR)return OI;if(e instanceof SR)return FI;if(e instanceof ER)return NI;if(e instanceof kR)return zI;if(Array.isArray(e)){const t=e.length;let i;for(const n of e){const e=IR(n);if(i){if(i===e)continue;i=II;break}i=e}return DI(i||II,t)}return LI}function RR(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof mR||e instanceof TR||e instanceof bR||e instanceof xR||e instanceof wR||e instanceof SR||e instanceof ER||e instanceof kR?e.toString():JSON.stringify(e)}class AR{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!LR(e[1]))return t.error("invalid value");const i=e[1];let n=IR(i);const o=t.expectedType;return"array"===n.kind&&0===n.N&&o&&"array"===o.kind&&("number"!=typeof o.N||0===o.N)&&(n=o),new AR(n,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const qR={string:EI,number:MI,boolean:kI,object:LI};class FR{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i,n=1;const o=e[0];if("array"===o){let o,r;if(e.length>2){const i=e[1];if("string"!=typeof i||!(i in qR)||"object"===i)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=qR[i],n++}else o=II;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);r=e[2],n++}i=DI(o,r)}else{if(!qR[o])throw new Error(`Types doesn't contain name = ${o}`);i=qR[o]}const r=[];for(;n<e.length;n++){const i=t.parse(e[n],n,II);if(!i)return null;r.push(i)}return new FR(i,r)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(!BI(this.type,IR(i)))return i;if(t===this.args.length-1)throw new CR(`Expected value to be of type ${GI(this.type)}, but found ${GI(IR(i))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const OR={"to-boolean":kI,"to-color":TI,"to-number":MI,"to-string":EI};class zR{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!OR[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if(("to-boolean"===i||"to-string"===i)&&2!==e.length)return t.error("Expected one argument.");const n=OR[i],o=[];for(let r=1;r<e.length;r++){const i=t.parse(e[r],r,II);if(!i)return null;o.push(i)}return new zR(n,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const n of this.args){if(t=n.evaluate(e),i=null,t instanceof mR)return t;if("string"==typeof t){const i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&(i=t.length<3||t.length>4?`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:PR(t[0],t[1],t[2],t[3]),!i))return new mR(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new CR(i||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const n=xR.parse(t);if(n)return n}throw new CR(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const n=wR.parse(t);if(n)return n}throw new CR(`Could not parse numberArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const n=SR.parse(t);if(n)return n}throw new CR(`Could not parse colorArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const n=ER.parse(t);if(n)return n}throw new CR(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new CR(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return bR.fromString(RR(this.args[0].evaluate(e)));case"resolvedImage":return kR.fromString(RR(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return RR(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const NR=["Unknown","Point","LineString","Polygon"];class DR{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?NR[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=mR.parse(e),this._parseColorCache.set(e,t)),t}}class GR{constructor(e,t,i=[],n,o=new SI,r=[]){this.registry=e,this.path=i,this.key=i.map((e=>`[${e}]`)).join(""),this.scope=o,this.errors=r,this.expectedType=n,this._isConstant=t}parse(e,t,i,n,o={}){return t?this.concat(t,i,n)._parse(e,o):this._parse(e,o)}_parse(e,t){function i(e,t,i){return"assert"===i?new FR(t,[e]):"coerce"===i?new zR(t,[e]):e}if((null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e)&&(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=e[0];if("string"!=typeof o)return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[o];if(r){let o=r.parse(e,this);if(!o)return null;if(this.expectedType){const e=this.expectedType,n=o.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==n.kind){if("projectionDefinition"===e.kind&&["string","array"].includes(n.kind)||["color","formatted","resolvedImage"].includes(e.kind)&&["value","string"].includes(n.kind)||["padding","numberArray"].includes(e.kind)&&["value","number","array"].includes(n.kind)||"colorArray"===e.kind&&["value","string","array"].includes(n.kind)||"variableAnchorOffsetCollection"===e.kind&&["value","array"].includes(n.kind))o=i(o,e,t.typeAnnotation||"coerce");else if(this.checkSubtype(e,n))return null}else o=i(o,e,t.typeAnnotation||"assert")}if(!(o instanceof AR)&&"resolvedImage"!==o.type.kind&&this._isConstant(o)){const e=new DR;try{o=new AR(o.type,o.evaluate(e))}catch(n){return this.error(n.message),null}}return o}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const n="number"==typeof e?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new GR(this.registry,this._isConstant,n,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new wI(i,e))}checkSubtype(e,t){const i=BI(e,t);return i&&this.error(i),i}}class jR{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const n=e[o];if("string"!=typeof n)return t.error(`Expected string, but found ${typeof n} instead.`,o);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const r=t.parse(e[o+1],o+1);if(!r)return null;i.push([n,r])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return n?new jR(i,n):null}outputDefined(){return this.result.outputDefined()}}class BR{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new BR(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class VR{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,MI),n=t.parse(e[2],2,DI(t.expectedType||II));if(!i||!n)return null;const o=n.type;return new VR(o.itemType,i,n)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new CR(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new CR(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new CR(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class $R{constructor(e,t){this.type=kI,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,II),n=t.parse(e[2],2,II);return i&&n?VI(i.type,[kI,EI,MI,CI,II])?new $R(i,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${GI(i.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!$I(t,["boolean","string","number","null"]))throw new CR(`Expected first argument to be of type boolean, string, number or null, but found ${GI(IR(t))} instead.`);if(!$I(i,["string","array"]))throw new CR(`Expected second argument to be of type array or string, but found ${GI(IR(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class HR{constructor(e,t,i){this.type=MI,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,II),n=t.parse(e[2],2,II);if(!i||!n)return null;if(!VI(i.type,[kI,EI,MI,CI,II]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${GI(i.type)} instead`);if(4===e.length){const o=t.parse(e[3],3,MI);return o?new HR(i,n,o):null}return new HR(i,n)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!$I(t,["boolean","string","number","null"]))throw new CR(`Expected first argument to be of type boolean, string, number or null, but found ${GI(IR(t))} instead.`);let n;if(this.fromIndex&&(n=this.fromIndex.evaluate(e)),$I(i,["string"])){const e=i.indexOf(t,n);return-1===e?-1:[...i.slice(0,e)].length}if($I(i,["array"]))return i.indexOf(t,n);throw new CR(`Expected second argument to be of type array or string, but found ${GI(IR(i))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class UR{constructor(e,t,i,n,o,r){this.inputType=e,this.type=t,this.input=i,this.cases=n,this.outputs=o,this.otherwise=r}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let i,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const o={},r=[];for(let l=2;l<e.length-1;l+=2){let s=e[l];const a=e[l+1];Array.isArray(s)||(s=[s]);const u=t.concat(l);if(0===s.length)return u.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return u.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return u.error("Numeric branch labels must be integer values.");if(i){if(u.checkSubtype(i,IR(e)))return null}else i=IR(e);if(typeof o[String(e)]<"u")return u.error("Branch labels must be unique.");o[String(e)]=r.length}const c=t.parse(a,l,n);if(!c)return null;n=n||c.type,r.push(c)}const s=t.parse(e[1],1,II);if(!s)return null;const a=t.parse(e[e.length-1],e.length-1,n);return!a||"value"!==s.type.kind&&t.concat(1).checkSubtype(i,s.type)?null:new UR(i,n,s,o,r,a)}evaluate(e){const t=this.input.evaluate(e);return(IR(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class WR{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const n=[];for(let r=1;r<e.length-1;r+=2){const o=t.parse(e[r],r,kI);if(!o)return null;const s=t.parse(e[r+1],r+1,i);if(!s)return null;n.push([o,s]),i=i||s.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new WR(i,n,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}}class XR{constructor(e,t,i,n){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,II),n=t.parse(e[2],2,MI);if(!i||!n)return null;if(!VI(i.type,[DI(II),EI,II]))return t.error(`Expected first argument to be of type array or string, but found ${GI(i.type)} instead`);if(4===e.length){const o=t.parse(e[3],3,MI);return o?new XR(i.type,i,n,o):null}return new XR(i.type,i,n)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let n;if(this.endIndex&&(n=this.endIndex.evaluate(e)),$I(t,["string"]))return[...t].slice(i,n).join("");if($I(t,["array"]))return t.slice(i,n);throw new CR(`Expected first argument to be of type array or string, but found ${GI(IR(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function KR(e,t){const i=e.length-1;let n,o,r=0,s=i,a=0;for(;r<=s;)if(a=Math.floor((r+s)/2),n=e[a],o=e[a+1],n<=t){if(a===i||t<o)return a;r=a+1}else{if(!(n>t))throw new CR("Input is not a number.");s=a-1}return 0}class YR{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[n,o]of i)this.labels.push(n),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,MI);if(!i)return null;const n=[];let o=null;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);for(let r=1;r<e.length;r+=2){const i=1===r?-1/0:e[r],s=e[r+1],a=r,l=r+1;if("number"!=typeof i)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(n.length&&n[n.length-1][0]>=i)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const u=t.parse(s,l,o);if(!u)return null;o=o||u.type,n.push([i,u])}return new YR(o,i,n)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return i[0].evaluate(e);const o=t.length;return n>=t[o-1]?i[o-1].evaluate(e):i[KR(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}var ZR,QR,JR=function(){if(QR)return ZR;function e(e,t,i,n){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=n}return QR=1,ZR=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,n=0;n<8;n++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var r=this.sampleCurveDerivativeX(i);if(Math.abs(r)<1e-6)break;i-=o/r}var s=0,a=1;for(i=e,n=0;n<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));n++)e>o?s=i:a=i,i=.5*(a-s)+s;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},ZR}(),eA=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(JR);class tA{constructor(e,t,i,n,o){this.type=e,this.operator=t,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(const[r,s]of o)this.labels.push(r),this.outputs.push(s)}static interpolationFactor(e,t,i,n){let o=0;if("exponential"===e.name)o=iA(t,e.base,i,n);else if("linear"===e.name)o=iA(t,1,i,n);else if("cubic-bezier"===e.name){const r=e.controlPoints;o=new eA(r[0],r[1],r[2],r[3]).solve(iA(t,1,i,n))}return o}static parse(e,t){let[i,n,o,...r]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const e=n.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,MI),!o)return null;const s=[];let a=null;"interpolate-hcl"!==i&&"interpolate-lab"!==i||t.expectedType==FI?t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType):a=TI;for(let l=0;l<r.length;l+=2){const e=r[l],i=r[l+1],n=l+3,o=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(s.length&&s[s.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const u=t.parse(i,o,a);if(!u)return null;a=a||u.type,s.push([e,u])}return HI(a,MI)||HI(a,PI)||HI(a,TI)||HI(a,qI)||HI(a,OI)||HI(a,FI)||HI(a,NI)||HI(a,DI(MI))?new tA(a,i,n,o,s):t.error(`Type ${GI(a)} is not interpolatable.`)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return i[0].evaluate(e);const o=t.length;if(n>=t[o-1])return i[o-1].evaluate(e);const r=KR(t,n),s=t[r],a=t[r+1],l=tA.interpolationFactor(this.interpolation,n,s,a),u=i[r].evaluate(e),c=i[r+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return fR(u,c,l);case"color":return mR.interpolate(u,c,l);case"padding":return xR.interpolate(u,c,l);case"colorArray":return SR.interpolate(u,c,l);case"numberArray":return wR.interpolate(u,c,l);case"variableAnchorOffsetCollection":return ER.interpolate(u,c,l);case"array":return gR(u,c,l);case"projectionDefinition":return TR.interpolate(u,c,l)}case"interpolate-hcl":switch(this.type.kind){case"color":return mR.interpolate(u,c,l,"hcl");case"colorArray":return SR.interpolate(u,c,l,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return mR.interpolate(u,c,l,"lab");case"colorArray":return SR.interpolate(u,c,l,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function iA(e,t,i,n){const o=n-i,r=e-i;return 0===o?0:1===t?r/o:(Math.pow(t,r)-1)/(Math.pow(t,o)-1)}class nA{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const n=t.expectedType;n&&"value"!==n.kind&&(i=n);const o=[];for(const r of e.slice(1)){const e=t.parse(r,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!e)return null;i=i||e.type,o.push(e)}if(!i)throw new Error("No output type");return n&&o.some((e=>BI(n,e.type)))?new nA(II,o):new nA(i,o)}evaluate(e){let t,i=null,n=0;for(const o of this.args)if(n++,i=o.evaluate(e),i&&i instanceof kR&&!i.available&&(t||(t=i.name),i=null,n===this.args.length&&(i=t)),null!==i)break;return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function oA(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function rA(e,t,i,n){return 0===n.compare(t,i)}function sA(e,t,i){const n="=="!==e&&"!="!==e;return class o{constructor(e,t,i){this.type=kI,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const i=e[0];let r=t.parse(e[1],1,II);if(!r)return null;if(!oA(i,r.type))return t.concat(1).error(`"${i}" comparisons are not supported for type '${GI(r.type)}'.`);let s=t.parse(e[2],2,II);if(!s)return null;if(!oA(i,s.type))return t.concat(2).error(`"${i}" comparisons are not supported for type '${GI(s.type)}'.`);if(r.type.kind!==s.type.kind&&"value"!==r.type.kind&&"value"!==s.type.kind)return t.error(`Cannot compare types '${GI(r.type)}' and '${GI(s.type)}'.`);n&&("value"===r.type.kind&&"value"!==s.type.kind?r=new FR(s.type,[r]):"value"!==r.type.kind&&"value"===s.type.kind&&(s=new FR(r.type,[s])));let a=null;if(4===e.length){if("string"!==r.type.kind&&"string"!==s.type.kind&&"value"!==r.type.kind&&"value"!==s.type.kind)return t.error("Cannot use collator to compare non-string types.");if(a=t.parse(e[3],3,RI),!a)return null}return new o(r,s,a)}evaluate(o){const r=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){const t=IR(r),i=IR(s);if(t.kind!==i.kind||"string"!==t.kind&&"number"!==t.kind)throw new CR(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${i.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const e=IR(r),i=IR(s);if("string"!==e.kind||"string"!==i.kind)return t(o,r,s)}return this.collator?i(o,r,s,this.collator.evaluate(o)):t(o,r,s)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const aA=sA("==",(function(e,t,i){return t===i}),rA),lA=sA("!=",(function(e,t,i){return t!==i}),(function(e,t,i,n){return!rA(0,t,i,n)})),uA=sA("<",(function(e,t,i){return t<i}),(function(e,t,i,n){return n.compare(t,i)<0})),cA=sA(">",(function(e,t,i){return t>i}),(function(e,t,i,n){return n.compare(t,i)>0})),hA=sA("<=",(function(e,t,i){return t<=i}),(function(e,t,i,n){return n.compare(t,i)<=0})),dA=sA(">=",(function(e,t,i){return t>=i}),(function(e,t,i,n){return n.compare(t,i)>=0}));class pA{constructor(e,t,i){this.type=RI,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const i=e[1];if("object"!=typeof i||Array.isArray(i))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,kI);if(!n)return null;const o=t.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,kI);if(!o)return null;let r=null;return i.locale&&(r=t.parse(i.locale,1,EI),!r)?null:new pA(n,o,r)}evaluate(e){return new vR(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class fA{constructor(e,t,i,n,o){this.type=EI,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,MI);if(!i)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let o=null;if(n.locale&&(o=t.parse(n.locale,1,EI),!o))return null;let r=null;if(n.currency&&(r=t.parse(n.currency,1,EI),!r))return null;let s=null;if(n["min-fraction-digits"]&&(s=t.parse(n["min-fraction-digits"],1,MI),!s))return null;let a=null;return n["max-fraction-digits"]&&(a=t.parse(n["max-fraction-digits"],1,MI),!a)?null:new fA(i,o,r,s,a)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class gA{constructor(e){this.type=AI,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&"object"==typeof i)return t.error("First argument must be an image or text section.");const n=[];let o=!1;for(let r=1;r<=e.length-1;++r){const i=e[r];if(o&&"object"==typeof i&&!Array.isArray(i)){o=!1;let e=null;if(i["font-scale"]&&(e=t.parse(i["font-scale"],1,MI),!e))return null;let r=null;if(i["text-font"]&&(r=t.parse(i["text-font"],1,DI(EI)),!r))return null;let s=null;if(i["text-color"]&&(s=t.parse(i["text-color"],1,TI),!s))return null;let a=null;if(i["vertical-align"]){if("string"==typeof i["vertical-align"]&&!yR.includes(i["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${i["vertical-align"]}' instead.`);if(a=t.parse(i["vertical-align"],1,EI),!a)return null}const l=n[n.length-1];l.scale=e,l.font=r,l.textColor=s,l.verticalAlign=a}else{const i=t.parse(e[r],1,II);if(!i)return null;const s=i.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,n.push({content:i,scale:null,font:null,textColor:null,verticalAlign:null})}}return new gA(n)}evaluate(e){return new bR(this.sections.map((t=>{const i=t.content.evaluate(e);return IR(i)===zI?new _R("",i,null,null,null,t.verticalAlign?t.verticalAlign.evaluate(e):null):new _R(RR(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null,t.verticalAlign?t.verticalAlign.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class mA{constructor(e){this.type=zI,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,EI);return i?new mA(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=kR.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class vA{constructor(e){this.type=MI,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?t.error(`Expected argument of type string or array, but found ${GI(i.type)} instead.`):new vA(i):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new CR(`Expected value to be of type string or array, but found ${GI(IR(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const yA=8192;function _A(e,t){const i=(180+e[0])/360,n=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}(e[1]),o=Math.pow(2,t.z);return[Math.round(i*o*yA),Math.round(n*o*yA)]}function bA(e,t){const i=Math.pow(2,t.z),n=(e[0]/yA+t.x)/i,o=(e[1]/yA+t.y)/i;return[xA(n),wA(o)]}function xA(e){return 360*e-180}function wA(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function SA(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function CA(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function MA(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function EA(e,t,i){const n=e[0]-t[0],o=e[1]-t[1],r=e[0]-i[0],s=e[1]-i[1];return n*s-r*o==0&&n*r<=0&&o*s<=0}function kA(e,t,i,n){const o=[t[0]-e[0],t[1]-e[1]];return 0!=(r=[n[0]-i[0],n[1]-i[1]])[0]*(s=o)[1]-r[1]*s[0]&&!(!AA(e,t,i,n)||!AA(i,n,e,t));var r,s}function TA(e,t,i){for(const n of i)for(let i=0;i<n.length-1;++i)if(kA(e,t,n[i],n[i+1]))return!0;return!1}function PA(e,t,i=!1){let n=!1;for(const o of t)for(let t=0;t<o.length-1;t++){if(EA(e,o[t],o[t+1]))return i;MA(e,o[t],o[t+1])&&(n=!n)}return n}function LA(e,t){for(const i of t)if(PA(e,i))return!0;return!1}function IA(e,t){for(const i of e)if(!PA(i,t))return!1;for(let i=0;i<e.length-1;++i)if(TA(e[i],e[i+1],t))return!1;return!0}function RA(e,t){for(const i of t)if(IA(e,i))return!0;return!1}function AA(e,t,i,n){const o=e[0]-i[0],r=e[1]-i[1],s=t[0]-i[0],a=t[1]-i[1],l=n[0]-i[0],u=n[1]-i[1],c=o*u-l*r,h=s*u-l*a;return c>0&&h<0||c<0&&h>0}function qA(e,t,i){const n=[];for(let o=0;o<e.length;o++){const r=[];for(let n=0;n<e[o].length;n++){const s=_A(e[o][n],i);SA(t,s),r.push(s)}n.push(r)}return n}function FA(e,t,i){const n=[];for(let o=0;o<e.length;o++){const r=qA(e[o],t,i);n.push(r)}return n}function OA(e,t,i,n){if(e[0]<i[0]||e[0]>i[2]){const t=.5*n;let o=e[0]-i[0]>t?-n:i[0]-e[0]>t?n:0;0===o&&(o=e[0]-i[2]>t?-n:i[2]-e[0]>t?n:0),e[0]+=o}SA(t,e)}function zA(e,t,i,n){const o=Math.pow(2,n.z)*yA,r=[n.x*yA,n.y*yA],s=[];for(const a of e)for(const e of a){const n=[e.x+r[0],e.y+r[1]];OA(n,t,i,o),s.push(n)}return s}function NA(e,t,i,n){const o=Math.pow(2,n.z)*yA,r=[n.x*yA,n.y*yA],s=[];for(const l of e){const e=[];for(const i of l){const n=[i.x+r[0],i.y+r[1]];SA(t,n),e.push(n)}s.push(e)}if(t[2]-t[0]<=o/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const e of s)for(const n of e)OA(n,t,i,o)}var a;return s}class DA{constructor(e,t){this.type=kI,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(LR(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const i of t.features){const{type:t,coordinates:n}=i.geometry;"Polygon"===t&&e.push(n),"MultiPolygon"===t&&e.push(...n)}if(e.length)return new DA(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new DA(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new DA(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if("Polygon"===t.type){const r=qA(t.coordinates,n,o),s=zA(e.geometry(),i,n,o);if(!CA(i,n))return!1;for(const e of s)if(!PA(e,r))return!1}if("MultiPolygon"===t.type){const r=FA(t.coordinates,n,o),s=zA(e.geometry(),i,n,o);if(!CA(i,n))return!1;for(const e of s)if(!LA(e,r))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if("Polygon"===t.type){const r=qA(t.coordinates,n,o),s=NA(e.geometry(),i,n,o);if(!CA(i,n))return!1;for(const e of s)if(!IA(e,r))return!1}if("MultiPolygon"===t.type){const r=FA(t.coordinates,n,o),s=NA(e.geometry(),i,n,o);if(!CA(i,n))return!1;for(const e of s)if(!RA(e,r))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class GA{constructor(e=[],t=(e,t)=>e<t?-1:e>t?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,n=t[e];for(;e>0;){const o=e-1>>1,r=t[o];if(i(n,r)>=0)break;t[e]=r,e=o}t[e]=n}_down(e){const{data:t,compare:i}=this,n=this.length>>1,o=t[e];for(;e<n;){let n=1+(e<<1);const r=n+1;if(r<this.length&&i(t[r],t[n])<0&&(n=r),i(t[n],o)>=0)break;t[e]=t[n],e=n}t[e]=o}}function jA(e){let t=0;for(let i,n,o=0,r=e.length,s=r-1;o<r;s=o++)i=e[o],n=e[s],t+=(n.x-i.x)*(i.y+n.y);return t}const BA=1/298.257223563,VA=BA*(2-BA),$A=Math.PI/180;class HA{constructor(e){const t=6378.137*$A*1e3,i=Math.cos(e*$A),n=1/(1-VA*(1-i*i)),o=Math.sqrt(n);this.kx=t*o*i,this.ky=t*o*n*(1-VA)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,n=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+n*n)}pointOnLine(e,t){let i,n,o,r,s=1/0;for(let a=0;a<e.length-1;a++){let l=e[a][0],u=e[a][1],c=this.wrap(e[a+1][0]-l)*this.kx,h=(e[a+1][1]-u)*this.ky,d=0;(0!==c||0!==h)&&(d=(this.wrap(t[0]-l)*this.kx*c+(t[1]-u)*this.ky*h)/(c*c+h*h),d>1?(l=e[a+1][0],u=e[a+1][1]):d>0&&(l+=c/this.kx*d,u+=h/this.ky*d)),c=this.wrap(t[0]-l)*this.kx,h=(t[1]-u)*this.ky;const p=c*c+h*h;p<s&&(s=p,i=l,n=u,o=a,r=d)}return{point:[i,n],index:o,t:Math.max(0,Math.min(1,r))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function UA(e,t){return t[0]-e[0]}function WA(e){return e[1]-e[0]+1}function XA(e,t){return e[1]>=e[0]&&e[1]<t}function KA(e,t){if(e[0]>e[1])return[null,null];const i=WA(e);if(t){if(2===i)return[e,null];const t=Math.floor(i/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===i)return[e,null];const n=Math.floor(i/2)-1;return[[e[0],e[0]+n],[e[0]+n+1,e[1]]]}function YA(e,t){if(!XA(t,e.length))return[1/0,1/0,-1/0,-1/0];const i=[1/0,1/0,-1/0,-1/0];for(let n=t[0];n<=t[1];++n)SA(i,e[n]);return i}function ZA(e){const t=[1/0,1/0,-1/0,-1/0];for(const i of e)for(const e of i)SA(t,e);return t}function QA(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function JA(e,t,i){if(!QA(e)||!QA(t))return NaN;let n=0,o=0;return e[2]<t[0]&&(n=t[0]-e[2]),e[0]>t[2]&&(n=e[0]-t[2]),e[1]>t[3]&&(o=e[1]-t[3]),e[3]<t[1]&&(o=t[1]-e[3]),i.distance([0,0],[n,o])}function eq(e,t,i){const n=i.pointOnLine(t,e);return i.distance(e,n.point)}function tq(e,t,i,n,o){const r=Math.min(eq(e,[i,n],o),eq(t,[i,n],o)),s=Math.min(eq(i,[e,t],o),eq(n,[e,t],o));return Math.min(r,s)}function iq(e,t,i,n,o){if(!XA(t,e.length)||!XA(n,i.length))return 1/0;let r=1/0;for(let s=t[0];s<t[1];++s){const t=e[s],a=e[s+1];for(let e=n[0];e<n[1];++e){const n=i[e],s=i[e+1];if(kA(t,a,n,s))return 0;r=Math.min(r,tq(t,a,n,s,o))}}return r}function nq(e,t,i,n,o){if(!XA(t,e.length)||!XA(n,i.length))return NaN;let r=1/0;for(let s=t[0];s<=t[1];++s)for(let t=n[0];t<=n[1];++t)if(r=Math.min(r,o.distance(e[s],i[t])),0===r)return r;return r}function oq(e,t,i){if(PA(e,t,!0))return 0;let n=1/0;for(const o of t){const t=o[0],r=o[o.length-1];if(t!==r&&(n=Math.min(n,eq(e,[r,t],i)),0===n))return n;const s=i.pointOnLine(o,e);if(n=Math.min(n,i.distance(e,s.point)),0===n)return n}return n}function rq(e,t,i,n){if(!XA(t,e.length))return NaN;for(let r=t[0];r<=t[1];++r)if(PA(e[r],i,!0))return 0;let o=1/0;for(let r=t[0];r<t[1];++r){const t=e[r],s=e[r+1];for(const e of i)for(let i=0,r=e.length,a=r-1;i<r;a=i++){const r=e[a],l=e[i];if(kA(t,s,r,l))return 0;o=Math.min(o,tq(t,s,r,l,n))}}return o}function sq(e,t){for(const i of e)for(const e of i)if(PA(e,t,!0))return!0;return!1}function aq(e,t,i,n=1/0){const o=ZA(e),r=ZA(t);if(n!==1/0&&JA(o,r,i)>=n)return n;if(CA(o,r)){if(sq(e,t))return 0}else if(sq(t,e))return 0;let s=1/0;for(const a of e)for(let e=0,n=a.length,o=n-1;e<n;o=e++){const n=a[o],r=a[e];for(const e of t)for(let t=0,o=e.length,a=o-1;t<o;a=t++){const o=e[a],l=e[t];if(kA(n,r,o,l))return 0;s=Math.min(s,tq(n,r,o,l,i))}}return s}function lq(e,t,i,n,o,r){if(!r)return;const s=JA(YA(n,r),o,i);s<t&&e.push([s,r,[0,0]])}function uq(e,t,i,n,o,r,s){if(!r||!s)return;const a=JA(YA(n,r),YA(o,s),i);a<t&&e.push([a,r,s])}function cq(e,t,i,n,o=1/0){let r=Math.min(n.distance(e[0],i[0][0]),o);if(0===r)return r;const s=new GA([[0,[0,e.length-1],[0,0]]],UA),a=ZA(i);for(;s.length>0;){const o=s.pop();if(o[0]>=r)continue;const l=o[1],u=t?50:100;if(WA(l)<=u){if(!XA(l,e.length))return NaN;if(t){const t=rq(e,l,i,n);if(isNaN(t)||0===t)return t;r=Math.min(r,t)}else for(let t=l[0];t<=l[1];++t){const o=oq(e[t],i,n);if(r=Math.min(r,o),0===r)return 0}}else{const i=KA(l,t);lq(s,r,n,e,a,i[0]),lq(s,r,n,e,a,i[1])}}return r}function hq(e,t,i,n,o,r=1/0){let s=Math.min(r,o.distance(e[0],i[0]));if(0===s)return s;const a=new GA([[0,[0,e.length-1],[0,i.length-1]]],UA);for(;a.length>0;){const r=a.pop();if(r[0]>=s)continue;const l=r[1],u=r[2],c=t?50:100,h=n?50:100;if(WA(l)<=c&&WA(u)<=h){if(!XA(l,e.length)&&XA(u,i.length))return NaN;let r;if(t&&n)r=iq(e,l,i,u,o),s=Math.min(s,r);else if(t&&!n){const t=e.slice(l[0],l[1]+1);for(let e=u[0];e<=u[1];++e)if(r=eq(i[e],t,o),s=Math.min(s,r),0===s)return s}else if(!t&&n){const t=i.slice(u[0],u[1]+1);for(let i=l[0];i<=l[1];++i)if(r=eq(e[i],t,o),s=Math.min(s,r),0===s)return s}else r=nq(e,l,i,u,o),s=Math.min(s,r)}else{const r=KA(l,t),c=KA(u,n);uq(a,s,o,e,i,r[0],c[0]),uq(a,s,o,e,i,r[0],c[1]),uq(a,s,o,e,i,r[1],c[0]),uq(a,s,o,e,i,r[1],c[1])}}return s}function dq(e){return"MultiPolygon"===e.type?e.coordinates.map((e=>({type:"Polygon",coordinates:e}))):"MultiLineString"===e.type?e.coordinates.map((e=>({type:"LineString",coordinates:e}))):"MultiPoint"===e.type?e.coordinates.map((e=>({type:"Point",coordinates:e}))):[e]}class pq{constructor(e,t){this.type=MI,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(LR(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new pq(t,t.features.map((e=>dq(e.geometry))).flat());if("Feature"===t.type)return new pq(t,dq(t.geometry));if("type"in t&&"coordinates"in t)return new pq(t,dq(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const i=e.geometry(),n=i.flat().map((t=>bA([t.x,t.y],e.canonical)));if(0===i.length)return NaN;const o=new HA(n[0][1]);let r=1/0;for(const s of t){switch(s.type){case"Point":r=Math.min(r,hq(n,!1,[s.coordinates],!1,o,r));break;case"LineString":r=Math.min(r,hq(n,!1,s.coordinates,!0,o,r));break;case"Polygon":r=Math.min(r,cq(n,!1,s.coordinates,o,r))}if(0===r)return r}return r}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const i=e.geometry(),n=i.flat().map((t=>bA([t.x,t.y],e.canonical)));if(0===i.length)return NaN;const o=new HA(n[0][1]);let r=1/0;for(const s of t){switch(s.type){case"Point":r=Math.min(r,hq(n,!0,[s.coordinates],!1,o,r));break;case"LineString":r=Math.min(r,hq(n,!0,s.coordinates,!0,o,r));break;case"Polygon":r=Math.min(r,cq(n,!0,s.coordinates,o,r))}if(0===r)return r}return r}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const i=e.geometry();if(0===i.length||0===i[0].length)return NaN;const n=function(e){if(e.length<=1)return[e];const t=[];let i,n;for(const o of e){const e=jA(o);0!==e&&(o.area=Math.abs(e),void 0===n&&(n=e<0),n===e<0?(i&&t.push(i),i=[o]):i.push(o))}return i&&t.push(i),t}(i).map((t=>t.map((t=>t.map((t=>bA([t.x,t.y],e.canonical))))))),o=new HA(n[0][0][0][1]);let r=1/0;for(const s of t)for(const e of n){switch(s.type){case"Point":r=Math.min(r,cq([s.coordinates],!1,e,o,r));break;case"LineString":r=Math.min(r,cq(s.coordinates,!0,e,o,r));break;case"Polygon":r=Math.min(r,aq(e,s.coordinates,o,r))}if(0===r)return r}return r}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class fq{constructor(e){this.type=II,this.key=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return null==i?t.error("Global state property must be defined."):"string"!=typeof i?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new fq(i)}evaluate(e){var t;const i=null===(t=e.globals)||void 0===t?void 0:t.globalState;return i&&0!==Object.keys(i).length?lR(i,this.key):null}eachChild(){}outputDefined(){return!1}}const gq={"==":aA,"!=":lA,">":cA,"<":uA,">=":dA,"<=":hA,array:FR,at:VR,boolean:FR,case:WR,coalesce:nA,collator:pA,format:gA,image:mA,in:$R,"index-of":HR,interpolate:tA,"interpolate-hcl":tA,"interpolate-lab":tA,length:vA,let:jR,literal:AR,match:UR,number:FR,"number-format":fA,object:FR,slice:XR,step:YR,string:FR,"to-boolean":zR,"to-color":zR,"to-number":zR,"to-string":zR,var:BR,within:DA,distance:pq,"global-state":fq};class mq{constructor(e,t,i,n){this.name=e,this.type=t,this._evaluate=i,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],n=mq.definitions[i];if(!n)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(n)?n[0]:n.type,r=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=r.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let a=null;for(const[l,u]of s){a=new GR(t.registry,xq,t.path,null,t.scope);const n=[];let r=!1;for(let t=1;t<e.length;t++){const i=e[t],o=Array.isArray(l)?l[t-1]:l.type,s=a.parse(i,1+n.length,o);if(!s){r=!0;break}n.push(s)}if(!r){if(Array.isArray(l)&&l.length!==n.length){a.error(`Expected ${l.length} arguments, but found ${n.length} instead.`);continue}for(let e=0;e<n.length;e++){const t=Array.isArray(l)?l[e]:l.type,i=n[e];a.concat(e+1).checkSubtype(t,i.type)}if(0===a.errors.length)return new mq(i,o,u,n)}}if(1===s.length)t.errors.push(...a.errors);else{const i=(s.length?s:r).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(GI).join(", ")})`:`(${GI(t.type)}...)`;var t})).join(" | "),n=[];for(let o=1;o<e.length;o++){const i=t.parse(e[o],1+n.length);if(!i)return null;n.push(GI(i.type))}t.error(`Expected arguments of type ${i}, but found (${n.join(", ")}) instead.`)}return null}static register(e,t){mq.definitions=t;for(const i in t)e[i]=mq}}function vq(e,[t,i,n,o]){t=t.evaluate(e),i=i.evaluate(e),n=n.evaluate(e);const r=o?o.evaluate(e):1,s=PR(t,i,n,r);if(s)throw new CR(s);return new mR(t/255,i/255,n/255,r,!1)}function yq(e,t){return e in t}function _q(e,t){const i=t[e];return typeof i>"u"?null:i}function bq(e){return{type:e}}function xq(e){if(e instanceof BR)return xq(e.boundExpression);if(e instanceof mq&&"error"===e.name)return!1;if(e instanceof pA)return!1;if(e instanceof DA)return!1;if(e instanceof pq)return!1;if(e instanceof fq)return!1;const t=e instanceof zR||e instanceof FR;let i=!0;return e.eachChild((e=>{i=t?i&&xq(e):i&&e instanceof AR})),!!i&&wq(e)&&Cq(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function wq(e){if(e instanceof mq){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof DA||e instanceof pq)return!1;let t=!0;return e.eachChild((e=>{t&&!wq(e)&&(t=!1)})),t}function Sq(e){if(e instanceof mq&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!Sq(e)&&(t=!1)})),t}function Cq(e,t){if(e instanceof mq&&t.indexOf(e.name)>=0)return!1;let i=!0;return e.eachChild((e=>{i&&!Cq(e,t)&&(i=!1)})),i}function Mq(e){return{result:"success",value:e}}function Eq(e){return{result:"error",value:e}}function kq(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&IR(e)===LI}mq.register(gq,{error:[{kind:"error"},[EI],(e,[t])=>{throw new CR(t.evaluate(e))}],typeof:[EI,[II],(e,[t])=>GI(IR(t.evaluate(e)))],"to-rgba":[DI(MI,4),[TI],(e,[t])=>{const[i,n,o,r]=t.evaluate(e).rgb;return[255*i,255*n,255*o,r]}],rgb:[TI,[MI,MI,MI],vq],rgba:[TI,[MI,MI,MI,MI],vq],has:{type:kI,overloads:[[[EI],(e,[t])=>yq(t.evaluate(e),e.properties())],[[EI,LI],(e,[t,i])=>yq(t.evaluate(e),i.evaluate(e))]]},get:{type:II,overloads:[[[EI],(e,[t])=>_q(t.evaluate(e),e.properties())],[[EI,LI],(e,[t,i])=>_q(t.evaluate(e),i.evaluate(e))]]},"feature-state":[II,[EI],(e,[t])=>_q(t.evaluate(e),e.featureState||{})],properties:[LI,[],e=>e.properties()],"geometry-type":[EI,[],e=>e.geometryType()],id:[II,[],e=>e.id()],zoom:[MI,[],e=>e.globals.zoom],"heatmap-density":[MI,[],e=>e.globals.heatmapDensity||0],elevation:[MI,[],e=>e.globals.elevation||0],"line-progress":[MI,[],e=>e.globals.lineProgress||0],accumulated:[II,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[MI,bq(MI),(e,t)=>{let i=0;for(const n of t)i+=n.evaluate(e);return i}],"*":[MI,bq(MI),(e,t)=>{let i=1;for(const n of t)i*=n.evaluate(e);return i}],"-":{type:MI,overloads:[[[MI,MI],(e,[t,i])=>t.evaluate(e)-i.evaluate(e)],[[MI],(e,[t])=>-t.evaluate(e)]]},"/":[MI,[MI,MI],(e,[t,i])=>t.evaluate(e)/i.evaluate(e)],"%":[MI,[MI,MI],(e,[t,i])=>t.evaluate(e)%i.evaluate(e)],ln2:[MI,[],()=>Math.LN2],pi:[MI,[],()=>Math.PI],e:[MI,[],()=>Math.E],"^":[MI,[MI,MI],(e,[t,i])=>Math.pow(t.evaluate(e),i.evaluate(e))],sqrt:[MI,[MI],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[MI,[MI],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[MI,[MI],(e,[t])=>Math.log(t.evaluate(e))],log2:[MI,[MI],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[MI,[MI],(e,[t])=>Math.sin(t.evaluate(e))],cos:[MI,[MI],(e,[t])=>Math.cos(t.evaluate(e))],tan:[MI,[MI],(e,[t])=>Math.tan(t.evaluate(e))],asin:[MI,[MI],(e,[t])=>Math.asin(t.evaluate(e))],acos:[MI,[MI],(e,[t])=>Math.acos(t.evaluate(e))],atan:[MI,[MI],(e,[t])=>Math.atan(t.evaluate(e))],min:[MI,bq(MI),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[MI,bq(MI),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[MI,[MI],(e,[t])=>Math.abs(t.evaluate(e))],round:[MI,[MI],(e,[t])=>{const i=t.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[MI,[MI],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[MI,[MI],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[kI,[EI,II],(e,[t,i])=>e.properties()[t.value]===i.value],"filter-id-==":[kI,[II],(e,[t])=>e.id()===t.value],"filter-type-==":[kI,[EI],(e,[t])=>e.geometryType()===t.value],"filter-<":[kI,[EI,II],(e,[t,i])=>{const n=e.properties()[t.value],o=i.value;return typeof n==typeof o&&n<o}],"filter-id-<":[kI,[II],(e,[t])=>{const i=e.id(),n=t.value;return typeof i==typeof n&&i<n}],"filter->":[kI,[EI,II],(e,[t,i])=>{const n=e.properties()[t.value],o=i.value;return typeof n==typeof o&&n>o}],"filter-id->":[kI,[II],(e,[t])=>{const i=e.id(),n=t.value;return typeof i==typeof n&&i>n}],"filter-<=":[kI,[EI,II],(e,[t,i])=>{const n=e.properties()[t.value],o=i.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[kI,[II],(e,[t])=>{const i=e.id(),n=t.value;return typeof i==typeof n&&i<=n}],"filter->=":[kI,[EI,II],(e,[t,i])=>{const n=e.properties()[t.value],o=i.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[kI,[II],(e,[t])=>{const i=e.id(),n=t.value;return typeof i==typeof n&&i>=n}],"filter-has":[kI,[II],(e,[t])=>t.value in e.properties()],"filter-has-id":[kI,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[kI,[DI(EI)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[kI,[DI(II)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[kI,[EI,DI(II)],(e,[t,i])=>i.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[kI,[EI,DI(II)],(e,[t,i])=>function(e,t,i,n){for(;i<=n;){const o=i+n>>1;if(t[o]===e)return!0;t[o]>e?n=o-1:i=o+1}return!1}(e.properties()[t.value],i.value,0,i.value.length-1)],all:{type:kI,overloads:[[[kI,kI],(e,[t,i])=>t.evaluate(e)&&i.evaluate(e)],[bq(kI),(e,t)=>{for(const i of t)if(!i.evaluate(e))return!1;return!0}]]},any:{type:kI,overloads:[[[kI,kI],(e,[t,i])=>t.evaluate(e)||i.evaluate(e)],[bq(kI),(e,t)=>{for(const i of t)if(i.evaluate(e))return!0;return!1}]]},"!":[kI,[kI],(e,[t])=>!t.evaluate(e)],"is-supported-script":[kI,[EI],(e,[t])=>{const i=e.globals&&e.globals.isSupportedScript;return!i||i(t.evaluate(e))}],upcase:[EI,[EI],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[EI,[EI],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[EI,bq(II),(e,t)=>t.map((t=>RR(t.evaluate(e)))).join("")],"resolved-locale":[EI,[RI],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Tq{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new DR,this._defaultValue=t?function(e){if("color"===e.type&&kq(e.default))return new mR(0,0,0,0);switch(e.type){case"color":return mR.parse(e.default)||null;case"padding":return xR.parse(e.default)||null;case"numberArray":return wR.parse(e.default)||null;case"colorArray":return SR.parse(e.default)||null;case"variableAnchorOffsetCollection":return ER.parse(e.default)||null;case"projectionDefinition":return TR.parse(e.default)||null;default:return void 0===e.default?null:e.default}}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,i,n,o,r){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=r,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,n,o,r){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=r||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new CR(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0),this._defaultValue}}}function Pq(e,t){const i=new GR(gq,xq,[],t?function(e){const t={color:TI,string:EI,number:MI,enum:EI,boolean:kI,formatted:AI,padding:qI,numberArray:OI,colorArray:FI,projectionDefinition:PI,resolvedImage:zI,variableAnchorOffsetCollection:NI};return"array"===e.type?DI(t[e.value]||II,e.length):t[e.type]}(t):void 0),n=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Mq(new Tq(n,t)):Eq(i.errors)}class Lq{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Sq(t.expression),this.globalStateRefs=qq(t.expression)}evaluateWithoutErrorHandling(e,t,i,n,o,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,n,o,r)}evaluate(e,t,i,n,o,r){return this._styleExpression.evaluate(e,t,i,n,o,r)}}class Iq{constructor(e,t,i,n){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Sq(t.expression),this.globalStateRefs=qq(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,i,n,o,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,n,o,r)}evaluate(e,t,i,n,o,r){return this._styleExpression.evaluate(e,t,i,n,o,r)}interpolationFactor(e,t,i){return this.interpolationType?tA.interpolationFactor(this.interpolationType,e,t,i):0}}function Rq(e,t){const i=Pq(e,t);if("error"===i.result)return i;const n=i.value.expression,o=wq(n);if(!o&&("data-driven"!==(r=t)["property-type"]&&"cross-faded-data-driven"!==r["property-type"]))return Eq([new wI("","data expressions not supported")]);var r;const s=Cq(n,["zoom"]);if(!s&&!function(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}(t))return Eq([new wI("","zoom expressions not supported")]);const a=Aq(n);if(!a&&!s)return Eq([new wI("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof wI)return Eq([a]);if(a instanceof tA&&!function(e){return!!e.expression&&e.expression.interpolated}(t))return Eq([new wI("",'"interpolate" expressions cannot be used with this property')]);if(!a)return Mq(new Lq(o?"constant":"source",i.value));const l=a instanceof tA?a.interpolation:void 0;return Mq(new Iq(o?"camera":"composite",i.value,a.labels,l))}function Aq(e){let t=null;if(e instanceof jR)t=Aq(e.result);else if(e instanceof nA){for(const i of e.args)if(t=Aq(i),t)break}else(e instanceof YR||e instanceof tA)&&e.input instanceof mq&&"zoom"===e.input.name&&(t=e);return t instanceof wI||e.eachChild((e=>{const i=Aq(e);i instanceof wI?t=i:!t&&i?t=new wI("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new wI("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function qq(e,t=new Set){return e instanceof fq&&t.add(e.key),e.eachChild((e=>{qq(e,t)})),t}function Fq(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Fq(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const Oq={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zq(e){if(null==e)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Fq(e)||(e=Gq(e));const t=Pq(e,Oq);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,i,n)=>t.value.evaluate(e,i,{},n),needGeometry:Dq(e),getGlobalStateRefs:()=>qq(t.value.expression)}}function Nq(e,t){return e<t?-1:e>t?1:0}function Dq(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(Dq(e[t]))return!0;return!1}function Gq(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?jq(e[1],e[2],"=="):"!="===t?$q(jq(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?jq(e[1],e[2],t):"any"===t?(i=e.slice(1),["any"].concat(i.map(Gq))):"all"===t?["all"].concat(e.slice(1).map(Gq)):"none"===t?["all"].concat(e.slice(1).map(Gq).map($q)):"in"===t?Bq(e[1],e.slice(2)):"!in"===t?$q(Bq(e[1],e.slice(2))):"has"===t?Vq(e[1]):"!has"!==t||$q(Vq(e[1]));var i}function jq(e,t,i){switch(e){case"$type":return[`filter-type-${i}`,t];case"$id":return[`filter-id-${i}`,t];default:return[`filter-${i}`,e,t]}}function Bq(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Nq)]]:["filter-in-small",e,["literal",t]]}}function Vq(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function $q(e){return["!",e]}function Hq(e){return"object"==typeof e?["literal",e]:e}function Uq(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Wq(e,t){const i=Hq(function(e,t){return void 0!==e?e:void 0!==t?t:void 0}(e.default,t.default));return void 0===i&&"resolvedImage"===t.type?"":i}function Xq(e,t,i){const n=Zq(e,t),o=["get",e.property];if("categorical"===n&&"boolean"==typeof i[0][0]){const n=["case"];for(const e of i)n.push(["==",o,e[0]],e[1]);return n.push(Wq(e,t)),n}if("categorical"===n){const n=["match",o];for(const e of i)Yq(n,e[0],e[1],!1);return n.push(Wq(e,t)),n}if("interval"===n){const t=["step",["number",o]];for(const e of i)Yq(t,e[0],e[1],!0);return Kq(t),void 0===e.default?t:["case",["==",["typeof",o],"number"],t,Hq(e.default)]}if("exponential"===n){const t=void 0!==e.base?e.base:1,n=[Uq(e),1===t?["linear"]:["exponential",t],["number",o]];for(const e of i)Yq(n,e[0],e[1],!1);return void 0===e.default?n:["case",["==",["typeof",o],"number"],n,Hq(e.default)]}throw new Error(`Unknown property function type ${n}`)}function Kq(e){"step"===e[0]&&3===e.length&&(e.push(0),e.push(e[3]))}function Yq(e,t,i,n){e.length>3&&t===e[e.length-2]||(n&&2===e.length||e.push(t),e.push(i))}function Zq(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function Qq(e){const t=["concat"],i=/{([^{}]+)}/g;let n=0;for(let o=i.exec(e);null!==o;o=i.exec(e)){const r=e.slice(n,i.lastIndex-o[0].length);n=i.lastIndex,r.length>0&&t.push(r),t.push(["get",o[1]])}if(1===t.length)return e;if(n<e.length)t.push(e.slice(n));else if(2===t.length)return["to-string",t[1]];return t}const Jq={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};var eF={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},tF=" ",iF=/(italic|oblique)$/i,nF={};function oF(e,t,i){var n=nF[e];if(!n){Array.isArray(e)||(e=[e]);for(var o,r,s=400,a="normal",l=[],u=0,c=e.length;u<c;++u){var h=e[u].split(" "),d=h[h.length-1].toLowerCase();for(var p in"normal"==d||"italic"==d||"oblique"==d?(a=r?a:d,r=!0,h.pop(),d=h[h.length-1].toLowerCase()):iF.test(d)&&(d=d.replace(iF,""),a=r?a:h[h.length-1].replace(d,""),r=!0),eF){var f=h.length>1?h[h.length-2].toLowerCase():"";if(d==p||d==p.replace("-","")||f+"-"+d==p){s=o?s:eF[p],h.pop(),f&&p.startsWith(f)&&h.pop();break}}!o&&"number"==typeof d&&(s=d,o=!0);var g=h.join(tF).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");-1!==g.indexOf(tF)&&(g='"'+g+'"'),l.push(g)}n=nF[e]=[a,s,l]}return n[0]+tF+n[1]+tF+t+"px"+(i?"/"+i:"")+tF+n[2]}const rF="https://api.mapbox.com";function sF(e){return 0!==e.indexOf("mapbox://")?"":e.slice(9)}function aF(e,t,i){const n=sF(e);if(!n)return decodeURI(new URL(e,i).href);if(0!==n.indexOf("sprites/"))throw new Error(`unexpected sprites url: ${e}`);const o=n.slice(8);return`${rF}/styles/v1/${o}/sprite?access_token=${t}`}function lF(e,t){const i=sF(e);if(!i)return decodeURI(new URL(e,location.href).href);if(0!==i.indexOf("styles/"))throw new Error(`unexpected style url: ${e}`);const n=i.slice(7);return`${rF}/styles/v1/${n}?&access_token=${t}`}const uF=["a","b","c","d"];function cF(e,t,i,n){const o=new URL(e,n||location.href),r=sF(e);if(!r)return t?(o.searchParams.has(i)||o.searchParams.set(i,t),[decodeURI(o.href)]):[decodeURI(o.href)];if("mapbox.satellite"===r){const e=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${r}/{z}/{x}/{y}${e}.webp?access_token=${t}`]}return uF.map((e=>`https://${e}.tiles.mapbox.com/v4/${r}/{z}/{x}/{y}.vector.pbf?access_token=${t}`))}const hF=Object.freeze({}),dF={},pF={};let fF=0;function gF(e){return e.id||(e.id=fF++),e.id}function mF(e){let t=dF[e.id];return t||(t={},dF[gF(e)]=t),t}function vF(e){return e*Math.PI/180}const yF=function(){const e=[];for(let t=78271.51696402048;e.length<=24;t/=2)e.push(t);return e}();function _F(e,t){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(e,t);const i=document.createElement("canvas");return i.width=e,i.height=t,i}function bF(e,t){let i=0;const n=t.length;for(;i<n;++i)if(t[i]<e&&i+1<n){const n=t[i]/t[i+1];return i+Math.log(t[i]/e)/Math.log(n)}return n-1}function xF(e,t){const i=Math.floor(e),n=Math.pow(2,e-i);return t[i]/n}const wF={};function SF(e,t,i={},n){if(t in wF)return n&&(n.url=wF[t][0].url),wF[t][1];const o=i.transformRequest&&i.transformRequest(t,e)||t,r=function(e){return delete wF[t],Promise.reject(new Error("Error fetching source "+t))},s=function(e){return delete wF[t],e.ok?e.json():Promise.reject(new Error("Error fetching source "+t))},a=ve((()=>o)).then((e=>e instanceof Response?(n&&(n.url=e.url),s(e)):(e instanceof Request||(e=new Request(e)),e.headers.get("Accept")||e.headers.set("Accept","application/json"),n&&(n.url=e.url),fetch(e).then(s).catch(r)))).catch(r);return wF[t]=[o,a],a}function CF(e,t){if("string"!=typeof e)return Promise.resolve(e);if(!e.trim().startsWith("{"))return SF("Style",e=lF(e,t.accessToken),t);try{const t=JSON.parse(e);return Promise.resolve(t)}catch(i){return Promise.reject(i)}}const MF={};function EF(e,t,i={}){const n=[t,JSON.stringify(e)].toString();let o=MF[n];if(!o||i.transformRequest){let r;i.transformRequest&&(r=(e,t)=>{const n=i.transformRequest&&i.transformRequest(t,"Tiles")||t;if(e instanceof K)e.setLoader(((t,i,o)=>{const r=function(i){i.arrayBuffer().then((i=>{const n=e.getFormat().readFeatures(i,{extent:t,featureProjection:o});e.setFeatures(n)}))};ve((()=>n)).then((t=>{if(t instanceof Response)return r(t);fetch(t).then(r).catch((t=>e.setState(3)))})).catch((t=>e.setState(3)))}));else{const t=e.getImage();ve((()=>n)).then((i=>{if("string"==typeof i)return void(t.src=i);const n=e=>e.blob().then((e=>{const i=URL.createObjectURL(e);t.addEventListener("load",(()=>URL.revokeObjectURL(i))),t.addEventListener("error",(()=>URL.revokeObjectURL(i))),t.src=i}));if(i instanceof Response)return n(i);fetch(i).then(n).catch((t=>e.setState(3)))})).catch((t=>e.setState(3)))}});const s=e.url;if(s&&!e.tiles){const n=cF(s,i.accessToken,i.accessTokenParam||"access_token",t||location.href);if(s.startsWith("mapbox://"))o=Promise.resolve({tileJson:Object.assign({},e,{url:void 0,tiles:n}),tileLoadFunction:r});else{const e={};o=SF("Source",n[0],i,e).then((function(t){return t.tiles=t.tiles.map((function(n){return"tms"===t.scheme&&(n=n.replace("{y}","{-y}")),cF(n,i.accessToken,i.accessTokenParam||"access_token",e.url)[0]})),Promise.resolve({tileJson:t,tileLoadFunction:r})}))}}else e.tiles?(e=Object.assign({},e,{tiles:e.tiles.map((function(n){return"tms"===e.scheme&&(n=n.replace("{y}","{-y}")),cF(n,i.accessToken,i.accessTokenParam||"access_token",t||location.href)[0]}))}),o=Promise.resolve({tileJson:Object.assign({},e),tileLoadFunction:r})):o=Promise.reject(new Error("source has no `tiles` nor `url`"));MF[n]=o}return o}function kF(e,t,i,n){const o=[2*i*t.pixelRatio+t.width,2*i*t.pixelRatio+t.height],r=_F(o[0],o[1]),s=r.getContext("2d");s.drawImage(e,t.x,t.y,t.width,t.height,i*t.pixelRatio,i*t.pixelRatio,t.width,t.height);const a=s.getImageData(0,0,o[0],o[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${255*n.r},${255*n.g},${255*n.b},${n.a})`;const l=a.data;for(let u=0,c=a.width;u<c;++u)for(let e=0,n=a.height;e<n;++e)l[4*(e*c+u)+3]>0&&s.arc(u,e,i*t.pixelRatio,0,2*Math.PI);return s.fill(),r}function TF(e,t,i){const n=Math.max(0,Math.min(1,(i-e)/(t-e)));return n*n*(3-2*n)}function PF(e,t,i){const n=_F(t.width,t.height),o=n.getContext("2d");o.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);const r=o.getImageData(0,0,t.width,t.height),s=r.data;for(let a=0,l=r.width;a<l;++a)for(let e=0,t=r.height;e<t;++e){const t=4*(e*l+a),n=.75,o=.1,r=TF(n-o,n+o,s[t+3]/255);r>0?(s[t+0]=Math.round(255*i.r*r),s[t+1]=Math.round(255*i.g*r),s[t+2]=Math.round(255*i.b*r),s[t+3]=Math.round(255*r)):s[t+3]=0}return o.putImageData(r,0,0),n}const LF=Array(256).join("");function IF(e,t){if(t>=.05){let i="";const n=e.split("\n"),o=LF.slice(0,Math.round(t/.1));for(let e=0,t=n.length;e<t;++e)e>0&&(i+="\n"),i+=n[e].split("").join(o);return i}return e}let RF;function AF(){return RF||(RF=_F(1,1).getContext("2d")),RF}function qF(e,t){return AF().measureText(e).width+(e.length-1)*t}const FF={};function OF(e,t,i,n){if(-1!==e.indexOf("\n")){const o=e.split("\n"),r=[];for(let e=0,s=o.length;e<s;++e)r.push(OF(o[e],t,i,n));return r.join("\n")}const o=i+","+t+","+e+","+n;let r=FF[o];if(!r){const s=e.split(" ");if(s.length>1){const e=AF();e.font=t;const o=e.measureText("M").width*i;let a="";const l=[];for(let t=0,i=s.length;t<i;++t){const e=s[t],i=a+(a?" ":"")+e;qF(i,n)<=o?a=i:(a&&l.push(a),a=e)}a&&l.push(a);for(let t=0,i=l.length;t<i&&i>1;++t){const e=l[t];if(qF(e,n)<.35*o){const o=t>0?qF(l[t-1],n):1/0,r=t<i-1?qF(l[t+1],n):1/0;l.splice(t,1),i-=1,o<r?(l[t-1]+=" "+e,t-=1):l[t]=e+" "+l[t]}}for(let t=0,i=l.length-1;t<i;++t){const e=l[t],r=l[t+1];if(qF(e,n)>.7*o&&qF(r,n)<.6*o){const s=e.split(" "),a=s.pop();qF(a,n)<.2*o&&(l[t]=s.join(" "),l[t+1]=a+" "+r),i-=1}}r=l.join("\n")}else r=e;r=IF(r,n),FF[o]=r}return r}Vl.on("propertychange",(()=>{for(const e in FF)delete FF[e]}));const zF=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],NF={},DF={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},GF={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},jF={zoom:0,distanceFromCenter:0};let BF,VF;function $F(e,t,i,n,o,r){const s=e.id;o||(o={}),o[s]||(o[s]={});const a=o[s];if(!a[i]){let n=(e[t]||hF)[i];const o=Jq[`${t}_${e.type}`][i];void 0===n&&(n=o.default);let r=(l=n,Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in gq);if(!r&&kq(n)&&(n=function(e,t){let i=e.stops;if(!i)return function(e,t){const i=["get",e.property];if(void 0===e.default)return"string"===t.type?["string",i]:i;if("enum"===t.type)return["match",i,Object.keys(t.values),i,e.default];{const n=["color"===t.type?"to-color":t.type,i,Hq(e.default)];return"array"===t.type&&n.splice(1,0,t.value,t.length||null),n}}(e,t);const n=i&&"object"==typeof i[0][0],o=n||void 0!==e.property,r=n||!o;return i=i.map((e=>!o&&t.tokens&&"string"==typeof e[1]?[e[0],Qq(e[1])]:[e[0],Hq(e[1])])),n?function(e,t,i){const n={},o={},r=[];for(let s=0;s<i.length;s++){const t=i[s],a=t[0].zoom;void 0===n[a]&&(n[a]={zoom:a,type:e.type,property:e.property,default:e.default},o[a]=[],r.push(a)),o[a].push([t[0].value,t[1]])}if("exponential"===Zq({},t)){const i=[Uq(e),["linear"],["zoom"]];for(const e of r)Yq(i,e,Xq(n[e],t,o[e]),!1);return i}{const e=["step",["zoom"]];for(const i of r)Yq(e,i,Xq(n[i],t,o[i]),!0);return Kq(e),e}}(e,t,i):r?function(e,t,i,n=["zoom"]){const o=Zq(e,t);let r,s=!1;if("interval"===o)r=["step",n],s=!0;else{if("exponential"!==o)throw new Error(`Unknown zoom function type "${o}"`);{const t=void 0!==e.base?e.base:1;r=[Uq(e),1===t?["linear"]:["exponential",t],n]}}for(const a of i)Yq(r,a[0],a[1],s);return Kq(r),r}(e,t,i):Xq(e,t,i)}(n,o),r=!0),r){const e=function(e,t){const i=Rq(e,t);if("error"===i.result)throw new Error(i.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return i.value}(n,o);a[i]=e.evaluate.bind(e)}else"color"==o.type&&(n=mR.parse(n)),a[i]=function(){return n}}var l;return a[i](jF,n,r)}function HF(e,t,i,n){return $F(e,"layout",`${i}-allow-overlap`,t,n)?$F(e,"layout",`${i}-ignore-placement`,t,n)?"none":"obstacle":"declutter"}function UF(e,t,i,n){if(!(e in n))try{n[e]=zq(t).filter}catch(o){n[e]=function(){return!1}}return n[e](jF,i)}function WF(e,t){if(e){if(0===e.a||0===t)return;const i=e.a;return t=void 0===t?1:t,0===i?"transparent":"rgba("+Math.round(255*e.r/i)+","+Math.round(255*e.g/i)+","+Math.round(255*e.b/i)+","+i*t+")"}return e}mq.register(gq,{...mq.definitions,pitch:[{kind:"number"},[],e=>jF.pitch||90],"distance-from-center":[{kind:"number"},[],e=>jF.distanceFromCenter||0]});const XF=/\{[^{}}]*\}/g;function KF(e,t){return e.replace(XF,(function(e){return t[e.slice(1,-1)]||""}))}function YF(e,t){let i=e.split(":")[0];return i===e&&(i="default"),t[i]}const ZF={};function QF(e,t,i,n=yF,o=void 0,r=void 0,s=void 0,a=void 0){if("string"==typeof t&&(t=JSON.parse(t)),8!=t.version)throw new Error("glStyle version 8 required.");ZF[function(e,t){return gF(e)+"."+Pe(t)}(t,e)]=Array.from(arguments);const l={};("string"==typeof r||r instanceof Request||r instanceof Response||r instanceof Promise)&&(r={default:r});for(const x in r){const t=r[x];ve((()=>t)).then((async t=>{let i;if(typeof Image<"u"){const n=new Image;if("string"==typeof t)n.crossOrigin="anonymous",n.src=t;else{let e;t instanceof Request?e=await fetch(t):t instanceof Response&&(e=t);const o=await e.blob();i=URL.createObjectURL(o),n.src=i}n.addEventListener("load",(function t(){n.removeEventListener("load",t),l[x]={image:n,size:[n.width,n.height]},e.changed(),i&&URL.revokeObjectURL(i)})),n.addEventListener("error",(function e(){URL.revokeObjectURL(i),n.removeEventListener("error",e)}))}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const e=self;e.postMessage({action:"loadImage",src:t}),e.addEventListener("message",(function(e){"imageLoaded"===e.data.action&&e.data.src===t&&(l[x]={image:e.data.image,size:[e.data.image.width,e.data.image.height]})}))}}))}const u=xI(t.layers),c={},h=[],d={},p={},f=mF(t),g=function(e){let t=pF[e.id];return t||(t={},pF[gF(e)]=t),t}(t);let m;for(let x=0,w=u.length;x<w;++x){const e=u[x],n=e.id;if("string"==typeof i&&e.source==i||Array.isArray(i)&&-1!==i.indexOf(n)){const i=e["source-layer"];if(m){if(e.source!==m)throw new Error(`Layer "${n}" does not use source "${m}`)}else{m=e.source;const i=t.sources[m];if(!i)throw new Error(`Source "${m}" is not defined`);const n=i.type;if("vector"!==n&&"geojson"!==n)throw new Error(`Source "${m}" is not of type "vector" or "geojson", but "${n}"`)}let o=c[i];o||(o=[],c[i]=o),o.push({layer:e,index:x}),h.push(n)}}const v=new su,y=new nu,_=[],b=function(i,r,u){const h=e.getSource?.()?.format_?.layerName_??"mvt:layer",m=i.getProperties(),b=c[m[h]];if(!b)return;let x=n.indexOf(r);-1==x&&(x=bF(r,n)),jF.zoom=x,jF.distanceFromCenter=0;const w=i.getGeometry(),S=DF[w.getType()],C=e.get("map");if(C&&C instanceof Vu&&1===S){const e=C.getSize();if(e){const t=C.getView().getCenter(),i=jt(w.getExtent());jF.distanceFromCenter=oi(t,i)/r/e[1]}}const M={id:i.getId(),properties:m,type:S},E=e.get("mapbox-featurestate")[i.getId()];let k=-1;for(let n=0,c=b.length;n<c;++n){const c=b[n],h=c.layer,w=h.id;if(void 0!==u&&u!==w)continue;const C=h.layout||hF,T=h.paint||hF;if("none"===C.visibility||"minzoom"in h&&x<h.minzoom||"maxzoom"in h&&x>=h.maxzoom)continue;const P=h.filter;if(!P||UF(w,P,M,g)){let n,u,g,b,x,w;const P=c.index;if(3==S&&("fill"==h.type||"fill-extrusion"==h.type))if(u=$F(h,"paint",h.type+"-opacity",M,f,E),h.type+"-pattern"in T){const e=$F(h,"paint",h.type+"-pattern",M,f,E);if(e){const t="string"==typeof e?KF(e,m):e.toString(),i=YF(t,l);if(o&&o[t]&&i){++k,w=_[k],(!w||!w.getFill()||w.getStroke()||w.getText())&&(w=new au({fill:new nu}),_[k]=w),g=w.getFill(),w.setZIndex(P);const e=t+"."+u;let n=p[e];if(!n){const r=o[t],s=_F(r.width,r.height),a=s.getContext("2d");a.globalAlpha=u,a.drawImage(i.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n=a.createPattern(s,"repeat"),p[e]=n}g.setColor(n)}}}else n=WF($F(h,"paint",h.type+"-color",M,f,E),u),h.type+"-outline-color"in T&&(x=WF($F(h,"paint",h.type+"-outline-color",M,f,E),u)),x||(x=n),(n||x)&&(++k,w=_[k],(!w||n&&!w.getFill()||!n&&w.getFill()||x&&!w.getStroke()||!x&&w.getStroke()||w.getText())&&(w=new au({fill:n?new nu:void 0,stroke:x?new su:void 0}),_[k]=w),n&&(g=w.getFill(),g.setColor(n)),x&&(b=w.getStroke(),b.setColor(x),b.setWidth(.5)),w.setZIndex(P));if(1!=S&&"line"==h.type){n="line-pattern"in T?void 0:WF($F(h,"paint","line-color",M,f,E),$F(h,"paint","line-opacity",M,f,E));const e=$F(h,"paint","line-width",M,f,E);n&&e>0&&(++k,w=_[k],(!w||!w.getStroke()||w.getFill()||w.getText())&&(w=new au({stroke:new su}),_[k]=w),b=w.getStroke(),b.setLineCap($F(h,"layout","line-cap",M,f,E)),b.setLineJoin($F(h,"layout","line-join",M,f,E)),b.setMiterLimit($F(h,"layout","line-miter-limit",M,f,E)),b.setColor(n),b.setWidth(e),b.setLineDash(T["line-dasharray"]?$F(h,"paint","line-dasharray",M,f,E).map((function(t){return t*e})):null),w.setZIndex(P))}let L,I,R,A,q,F,O,z,N,D=!1,G=null,j=0;if((1==S||2==S)&&"icon-image"in C){const t=$F(h,"layout","icon-image",M,f,E);if(t){let n;L="string"==typeof t?KF(t,m):t.toString();const s=a?a(e,L):void 0,u=YF(L,l);if(o&&o[L]&&u||s){const e=$F(h,"layout","icon-rotation-alignment",M,f,E);if(2==S){const t=i.getGeometry();if(t.getFlatMidpoint||t.getFlatMidpoints){const i=t.getExtent();if(Math.sqrt(Math.max(Math.pow((i[2]-i[0])/r,2),Math.pow((i[3]-i[1])/r,2)))>150){const i="MultiLineString"===t.getType()?t.getFlatMidpoints():t.getFlatMidpoint();if(VF||(BF=[NaN,NaN],VF=new vh("Point",BF,[],2,{},void 0)),n=VF,BF[0]=i[0],BF[1]=i[1],"line"===$F(h,"layout","symbol-placement",M,f,E)&&"map"===e){const e=t.getStride(),n=t.getFlatCoordinates();for(let t=0,o=n.length-e;t<o;t+=e){const o=n[t],r=n[t+1],s=n[t+e],a=n[t+e+1],l=Math.min(o,s),u=Math.max(o,s),c=i[0],h=(a-r)*(c-o)-(s-o)*(i[1]-r);if(Math.abs(h)<.001&&c<=u&&c>=l){j=Math.atan2(r-a,s-o);break}}}}}}if(2!==S||n){const t=$F(h,"layout","icon-size",M,f,E),i=void 0!==T["icon-color"]?$F(h,"paint","icon-color",M,f,E):null;if(!i||0!==i.a){const n=$F(h,"paint","icon-halo-color",M,f,E),r=$F(h,"paint","icon-halo-width",M,f,E);let a=`${L}.${t}.${r}.${n}`;if(null!==i&&(a+=`.${i}`),I=d[a],!I){const l=HF(h,M,"icon",f);let c;"icon-offset"in C&&(c=$F(h,"layout","icon-offset",M,f,E).slice(0),c[0]*=t,c[1]*=-t);let p=i?[255*i.r,255*i.g,255*i.b,i.a]:void 0;if(s){const i={color:p,rotateWithView:"map"===e,displacement:c,declutterMode:l,scale:t};"string"==typeof s?i.src=s:(i.img=s,i.imgSize=[s.width,s.height]),I=new ru(i)}else{const s=o[L];let a,h,d;if(r)s.sdf?(a=kF(PF(u.image,s,i||[0,0,0,1]),{x:0,y:0,width:s.width,height:s.height,pixelRatio:s.pixelRatio},r,n),p=void 0):a=kF(u.image,s,r,n);else{if(s.sdf&&!u.unSDFed){const e=PF(u.image,{x:0,y:0,width:u.size[0],height:u.size[1]},{r:1,g:1,b:1});u.image=e,u.unSDFed=!0}a=u.image,h=[s.width,s.height],d=[s.x,s.y]}I=new ru({color:p,img:a,imgSize:u.size,size:h,offset:d,rotateWithView:"map"===e,scale:t/s.pixelRatio,displacement:c,declutterMode:l})}d[a]=I}}I&&(++k,w=_[k],(!w||!w.getImage()||w.getFill()||w.getStroke())&&(w=new au,_[k]=w),w.setGeometry(n),I.setRotation(j+vF($F(h,"layout","icon-rotate",M,f,E))),I.setOpacity($F(h,"paint","icon-opacity",M,f,E)),I.setAnchor(GF[$F(h,"layout","icon-anchor",M,f,E)]),w.setImage(I),G=w.getText(),w.setText(void 0),w.setZIndex(P),D=!0,R=!1)}else R=!0}}}if(1==S&&"circle"===h.type){++k,w=_[k],(!w||!w.getImage()||w.getFill()||w.getStroke())&&(w=new au,_[k]=w);const e="circle-radius"in T?$F(h,"paint","circle-radius",M,f,E):5,t=WF($F(h,"paint","circle-stroke-color",M,f,E),$F(h,"paint","circle-stroke-opacity",M,f,E)),i=$F(h,"paint","circle-translate",M,f,E),n=WF($F(h,"paint","circle-color",M,f,E),$F(h,"paint","circle-opacity",M,f,E)),o=$F(h,"paint","circle-stroke-width",M,f,E),r=e+"."+t+"."+n+"."+o+"."+i[0]+"."+i[1];I=d[r],I||(I=new iu({radius:e,displacement:[i[0],-i[1]],stroke:t&&o>0?new su({width:o,color:t}):void 0,fill:n?new nu({color:n}):void 0,declutterMode:"none"}),d[r]=I),w.setImage(I),G=w.getText(),w.setText(void 0),w.setGeometry(void 0),w.setZIndex(P),D=!0}if("text-field"in C){O=Math.round($F(h,"layout","text-size",M,f,E));const e=$F(h,"layout","text-font",M,f,E);F=$F(h,"layout","text-line-height",M,f,E),q=oF(s?s(e,t.metadata?t.metadata["ol:webfonts"]:void 0):e,O,F),q.includes("sans-serif")||(q+=",sans-serif"),z=$F(h,"layout","text-letter-spacing",M,f,E),N=$F(h,"layout","text-max-width",M,f,E);const i=$F(h,"layout","text-field",M,f,E);A="object"==typeof i&&i.sections?1===i.sections.length?i.toString():i.sections.reduce(((t,i,n)=>{const o=i.fontStack?i.fontStack.split(","):e,r=oF(s?s(o):o,O*(i.scale||1),F);let a=i.text;if("\n"===a)return t.push("\n",""),t;if(2==S)return t.push(IF(a,z),r),t;a=OF(a,r,N,z).split("\n");for(let e=0,s=a.length;e<s;++e)e>0&&t.push("\n",""),t.push(a[e],r);return t}),[]):KF(i,m).trim(),u=$F(h,"paint","text-opacity",M,f,E)}if(A&&u&&!R){D||(++k,w=_[k],(!w||!w.getText()||w.getFill()||w.getStroke())&&(w=new au,_[k]=w),w.setImage(void 0),w.setGeometry(void 0));const e=HF(h,M,"text",f);w.getText()||w.setText(G),G=w.getText(),(!G||"getDeclutterMode"in G&&G.getDeclutterMode()!==e)&&(G=new hu({padding:[2,2,2,2],declutterMode:e}),w.setText(G));const t=$F(h,"layout","text-transform",M,f,E);"uppercase"==t?A=Array.isArray(A)?A.map(((e,t)=>t%2?e:e.toUpperCase())):A.toUpperCase():"lowercase"==t&&(A=Array.isArray(A)?A.map(((e,t)=>t%2?e:e.toLowerCase())):A.toLowerCase());const i=Array.isArray(A)?A:2==S?IF(A,z):OF(A,q,N,z);if(G.setText(i),G.setFont(q),G.setRotation(vF($F(h,"layout","text-rotate",M,f,E))),"function"==typeof G.setKeepUpright){const e=$F(h,"layout","text-keep-upright",M,f,E);G.setKeepUpright(e)}const n=$F(h,"layout","text-anchor",M,f,E),o=D||1==S?"point":$F(h,"layout","symbol-placement",M,f,E);let r;if("line-center"===o?(G.setPlacement("line"),r="center"):G.setPlacement(o),"line"===o&&"function"==typeof G.setRepeat){const e=$F(h,"layout","symbol-spacing",M,f,E);G.setRepeat(2*e)}G.setOverflow("point"===o);let s=$F(h,"paint","text-halo-width",M,f,E);const a=$F(h,"layout","text-offset",M,f,E),l=$F(h,"paint","text-translate",M,f,E);let c=0,d=0;if("point"==o){r="center",-1!==n.indexOf("left")?(r="left",d=s):-1!==n.indexOf("right")&&(r="right",d=-s);const e=$F(h,"layout","text-rotation-alignment",M,f,E);G.setRotateWithView("map"==e)}else G.setMaxAngle(vF($F(h,"layout","text-max-angle",M,f,E))*A.length/i.length),G.setRotateWithView(!1);G.setTextAlign(r);let p="middle";0==n.indexOf("bottom")?(p="bottom",c=-s-.5*(F-1)*O):0==n.indexOf("top")&&(p="top",c=s+.5*(F-1)*O),G.setTextBaseline(p);const g=$F(h,"layout","text-justify",M,f,E);G.setJustify("auto"===g?void 0:g),G.setOffsetX(a[0]*O+d+l[0]),G.setOffsetY(a[1]*O+c+l[1]),y.setColor(WF($F(h,"paint","text-color",M,f,E),u)),G.setFill(y);const m=WF($F(h,"paint","text-halo-color",M,f,E),u);if(m&&s>0){v.setColor(m),s*=2;const e=.5*O;v.setWidth(s<=e?s:e),G.setStroke(v)}else G.setStroke(void 0);const b=$F(h,"layout","text-padding",M,f,E),x=G.getPadding();b!==x[0]&&(x[0]=b,x[1]=b,x[2]=b,x[3]=b),w.setZIndex(P)}}}return k>-1?(_.length=k+1,_):void 0};return e.setStyle(b),e.set("mapbox-layers",h),e.set("mapbox-source",m),e.set("mapbox-featurestate",e.get("mapbox-featurestate")||{}),b}function JF(e,t){const i=e[0],n=i.width,o=i.height,r=i.data,s=new Uint8ClampedArray(r.length),a=2*t.resolution,l=n-1,u=o-1,c=[0,0,0,0],h=2*Math.PI,d=Math.PI/2,p=Math.PI*t.sunEl/180,f=Math.PI*t.sunAz/180,g=Math.cos(p),m=Math.sin(p),v=t.highlightColor,y=t.shadowColor,_=t.accentColor,b=t.encoding;let x,w,S,C,M,E,k,T,P,L,I,R,A,q,F,O,z,N,D,G,j,B;function V(e,t="mapbox"){return"mapbox"===t?.1*(256*e[0]*256+256*e[1]+e[2])-1e4:"terrarium"===t?256*e[0]+e[1]+e[2]/256-32768:void 0}for(w=0;w<=u;++w)for(M=0===w?0:w-1,E=w===u?u:w+1,x=0;x<=l;++x)S=0===x?0:x-1,C=x===l?l:x+1,k=4*(w*n+S),c[0]=r[k],c[1]=r[k+1],c[2]=r[k+2],c[3]=r[k+3],T=t.vert*V(c,b),k=4*(w*n+C),c[0]=r[k],c[1]=r[k+1],c[2]=r[k+2],c[3]=r[k+3],P=t.vert*V(c,b),L=(P-T)/a,k=4*(M*n+x),c[0]=r[k],c[1]=r[k+1],c[2]=r[k+2],c[3]=r[k+3],T=t.vert*V(c,b),k=4*(E*n+x),c[0]=r[k],c[1]=r[k+1],c[2]=r[k+2],c[3]=r[k+3],P=t.vert*V(c,b),I=(P-T)/a,A=Math.atan2(I,-L),A=A<0?d-A:A>d?h-A+d:d-A,R=Math.atan(Math.sqrt(L*L+I*I)),B=m*Math.cos(R)+g*Math.sin(R)*Math.cos(f-A),q=Math.cos(R),F=255*B,D=Math.min(Math.max(2*t.sunEl,0),1),G=1.875-1.75*t.opacity,j=.5!==t.opacity?d*((Math.pow(G,R)-1)/(Math.pow(G,d)-1)):R,z={r:(1-q)*_.r*D*255,g:(1-q)*_.g*D*255,b:(1-q)*_.b*D*255,a:(1-q)*_.a*D*255},O=Math.abs(((A+f)/Math.PI+.5)%2-1),N={r:(v.r*(1-O)+y.r*O)*F,g:(v.g*(1-O)+y.g*O)*F,b:(v.b*(1-O)+y.b*O)*F,a:(v.a*(1-O)+y.a*O)*F},k=4*(w*n+x),s[k]=z.r*(1-O)+N.r,s[k+1]=z.g*(1-O)+N.g,s[k+2]=z.b*(1-O)+N.b,s[k+3]=r[k+3]*t.opacity*D*Math.sin(j);return new ImageData(s,n,o)}function eO(e,t=512){return e.getExtent()?Lc({extent:e.getExtent(),tileSize:t,maxZoom:22}).getResolutions():yF}function tO(e,t){return t.accessToken||(t=Object.assign({},t),new URL(e).searchParams.forEach(((e,i)=>{t.accessToken=e,t.accessTokenParam=i}))),t}function iO(e,t){let i;return e.some((function(e){if(e.id==t)return i=e.source,!0})),i}function nO(e,t,i){const n=new ud({tileJSON:t,tileSize:e.tileSize||t.tileSize||512}),o=n.getTileJSON(),r=n.getTileGrid(),s=fn(i.projection||"EPSG:3857"),a=function(e,t){const i=e.bounds;if(i){const e=bn([i[0],i[1]],t),n=bn([i[2],i[3]],t);return[e[0],e[1],n[0],n[1]]}return fn(t).getExtent()}(o,s),l=s.getExtent(),u=o.minzoom||0,c=o.maxzoom||22,h={attributions:n.getAttributions(),projection:s,tileGrid:new kc({origin:l?Wt(l):r.getOrigin(0),extent:a||r.getExtent(),minZoom:u,resolutions:eO(s,t.tileSize).slice(0,c+1),tileSize:r.getTileSize(0)})};return Array.isArray(o.tiles)?h.urls=o.tiles:h.url=o.tiles,h}function oO(e,t,i){const n=Be?{style:{}}:document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new ps({source:new Vc({}),render(o){const r=function(e,t,i,n){const o={id:e.id,type:e.type},r=e.layout||{},s=e.paint||{};let a;o.paint=s,jF.zoom=bF(t,i.resolutions||yF),jF.distanceFromCenter=0;const l=$F(o,"paint","background-color",hF,n);return void 0!==s["background-opacity"]&&(a=$F(o,"paint","background-opacity",hF,n)),"none"==r.visibility?void 0:WF(l,a)}(e,o.viewState.resolution,t,i);return n.style.backgroundColor=r,n}})}function rO(e,t,i){return new Promise((function(n,o){EF(e,t,i).then((function({tileJson:t,tileLoadFunction:o}){const r=nO(e,t,i);r.tileLoadFunction=o,r.format=new O_({layerName:"mvt:layer"});const s=new Wh(r);s.set("mapbox-source",e),n(s)})).catch(o)}))}function sO(e){return`{bbox-${(e?e.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function aO(e,t,i){const n=new Mc;return function(e,t,i){return new Promise((function(n,o){EF(e,t,i).then((function({tileJson:t,tileLoadFunction:o}){const r=new ud({interpolate:void 0===i.interpolate||i.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:t});r.tileGrid=nO(e,t,i).tileGrid,i.projection&&(r.projection=fn(i.projection));const s=r.getTileUrlFunction();o&&r.setTileLoadFunction(o),r.setTileUrlFunction((function(e,t,i){const n=sO(i);let o=s(e,t,i);if(-1!=o.indexOf(n)){const t=r.getTileGrid().getTileCoordExtent(e);o=o.replace(n,t.toString())}return o})),r.set("mapbox-source",e),n(r)})).catch((function(e){o(e)}))}))}(e,t,i).then((function(e){n.setSource(e)})).catch((function(){n.setSource(void 0)})),n}function lO(e,t,i){const n=i.projection?new __({dataProjection:i.projection}):new __,o=e.data,r={};if("string"==typeof o){const[r]=cF(o,i.accessToken,i.accessTokenParam||"access_token",t||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(r)){const t=(e,t,i)=>{const n=sO(i);return r.replace(n,`${e.join(",")}`)},o=new wh({attributions:e.attribution,format:n,loader:(e,n,r,s,a)=>{SF("GeoJSON","function"==typeof t?t(e,n,r):t,i).then((e=>{const t=o.getFormat().readFeatures(e,{featureProjection:r});o.addFeatures(t),s(t)})).catch((t=>{o.removeLoadedExtent(e),a()}))},strategy:oh});return o.set("mapbox-source",e),o}const s=new wh({attributions:e.attribution,format:n,url:r,loader:(e,t,n,o,a)=>{SF("GeoJSON",r,i).then((e=>{const t=s.getFormat().readFeatures(e,{featureProjection:n});s.addFeatures(t),o(t)})).catch((t=>{s.removeLoadedExtent(e),a()}))}});return s}r.features=n.readFeatures(o,{featureProjection:"EPSG:3857"});const s=new wh(Object.assign({attributions:e.attribution,format:n},r));return s.set("mapbox-source",e),s}function uO(e,t,i,n){const o=mF(e),r=e.layers,s=i.type,a=i.source||iO(r,i.ref),l=e.sources[a];let u;if("background"==s)u=oO(i,n,o);else if("vector"==l.type)u=function(e,t,i){const n=new $_({declutter:!0,visible:!1});return rO(e,t,i).then((function(e){n.setSource(e)})).catch((function(e){n.setSource(void 0)})),n}(l,t,n);else if("raster"==l.type)u=aO(l,t,n),u.setVisible(!i.layout||"none"!==i.layout.visibility),u.on("prerender",function(e,t,i){let n=null;return function(o){e.paint&&"raster-opacity"in e.paint&&o.frameState.viewState.zoom!==n&&(n=o.frameState.viewState.zoom,delete i[e.id],function(e,t,i,n){jF.zoom=i,jF.distanceFromCenter=0;const o=$F(e,"paint","raster-opacity",hF,n);t.setOpacity(o)}(e,t,n,i))}}(i,u,o));else if("geojson"==l.type)u=new Ap({declutter:!0,source:lO(l,t,n),visible:!1});else if("raster-dem"==l.type&&"hillshade"==i.type){const e=function(e,t,i){const n=aO(e,t,i);return new Qh({source:new nd({operationType:"image",operation:JF,sources:[n]})})}(l,t,n);u=e,e.getSource().on("beforeoperations",(function(e){const t=e.data;t.resolution=gn(n.projection||"EPSG:3857",e.resolution,jt(e.extent),"m"),jF.zoom=bF(e.resolution,n.resolutions||yF),jF.distanceFromCenter=0,t.encoding=l.encoding,t.vert=5*$F(i,"paint","hillshade-exaggeration",hF,o),t.sunAz=$F(i,"paint","hillshade-illumination-direction",hF,o),t.sunEl=35,t.opacity=.3,t.highlightColor=$F(i,"paint","hillshade-highlight-color",hF,o),t.shadowColor=$F(i,"paint","hillshade-shadow-color",hF,o),t.accentColor=$F(i,"paint","hillshade-accent-color",hF,o)})),u.setVisible(!i.layout||"none"!==i.layout.visibility)}const c=a;return u&&u.set("mapbox-source",c),u}function cO(e,t,i,n){const o=[];let r=null;if(t instanceof Vu){if(r=t.getView(),!r.isDef()&&!r.getRotation()&&!r.getResolutions()){const e=n.projection?fn(n.projection):r.getProjection();r=new $o(Object.assign(r.getProperties(),{maxResolution:yF[0]/yi[e.getUnits()],projection:n.projection||r.getProjection()})),t.setView(r)}"center"in e&&!r.getCenter()&&r.setCenter(bn(e.center,r.getProjection())),"zoom"in e&&void 0===r.getZoom()&&r.setResolution(yF[0]/yi[r.getProjection().getUnits()]/Math.pow(2,e.zoom)),(!r.getCenter()||void 0===r.getZoom())&&r.fit(r.getProjection().getExtent(),{nearest:!0,size:t.getSize()})}t.set("mapbox-style",e),t.set("mapbox-metadata",{styleUrl:i,options:n});const s=e.layers;let a,l,u,c=[];for(let h=0,d=s.length;h<d;++h){const r=s[h];"heatmap"!=r.type&&(u=r.source||iO(s,r.ref),(!u||u!=l)&&(c.length&&(o.push(dO(a,c,e,i,t,n)),c=[]),a=uO(e,i,r,n),a instanceof Ap||a instanceof $_||(c=[]),l=a.get("mapbox-source")),c.push(r.id))}return o.push(dO(a,c,e,i,t,n)),Promise.all(o)}function hO(e,t,i={}){let n,o;if(Be){if(!(e instanceof Vu||e instanceof ls))throw new Error("ol-mapbox-style in a web worker requires a Map or a LayerGroup as first argument");o=e}else o="string"==typeof e||e instanceof HTMLElement?new Vu({target:e}):e;if("string"==typeof t){const e=t.startsWith("data:")?location.href:lF(t,i.accessToken);i=tO(e,i),n=new Promise((function(n,r){CF(t,i).then((function(t){cO(t,o,e,i).then((function(){n(o)})).catch(r)})).catch((function(e){r(new Error(`Could not load ${t}: ${e.message}`))}))}))}else n=new Promise((function(e,n){cO(t,o,!i.styleUrl||i.styleUrl.startsWith("data:")?location.href:lF(i.styleUrl,i.accessToken),i).then((function(){e(o)})).catch(n)}));return n}function dO(e,t,i,n,o,r={}){let s=24,a=0;const l=i.layers;for(let u=0,c=l.length;u<c;++u){const e=l[u];-1!==t.indexOf(e.id)&&(s=Math.min("minzoom"in e?e.minzoom:0,s),a=Math.max("maxzoom"in e?e.maxzoom:24,a))}return new Promise((function(l,u){const c=function(){const c=e.getSource();if(c&&"error"!==c.getState()){if("getTileGrid"in c){const t=c.getTileGrid();if(t){const i=t.getMinZoom();(s>0||i>0)&&e.setMaxResolution(Math.min(xF(Math.max(0,s-1e-12),yF),xF(Math.max(0,i-1e-12),t.getResolutions()))),a<24&&e.setMinResolution(xF(a,yF))}}else s>0&&e.setMaxResolution(xF(Math.max(0,s-1e-12),yF));c instanceof wh||c instanceof Wh?function(e,t,i="",n={},o){let r,s,a,l,u=!0;return"string"==typeof i||Array.isArray(i)?l=i:(a=i,l=a.source||a.layers,n=a),"string"==typeof n?(r=n,a={}):(r=n.styleUrl,a=n),!1===a.updateSource&&(u=!1),o||(o=a.resolutions),!r&&"string"==typeof t&&!t.trim().startsWith("{")&&(r=t),r&&(r=r.startsWith("data:")?location.href:lF(r,a.accessToken),a=tO(r,a)),new Promise((function(i,n){CF(t,a).then((function(t){if(8!=t.version)return n(new Error("glStyle version 8 required."));if(!(e instanceof Ap||e instanceof $_))return n(new Error("Can only apply to VectorLayer or VectorTileLayer"));const c=e instanceof $_?"vector":"geojson";if(l?s=Array.isArray(l)?t.layers.find((function(e){return e.id===l[0]})).source:l:(s=t.layers.find((function(e){return e.source&&t.sources[e.source].type===c})).source,l=s),!s)return n(new Error(`No ${c} source found in the glStyle.`));function h(){if(!u)return Promise.resolve();if(e instanceof $_)return rO(t.sources[s],r,a).then((function(t){const i=e.getSource();i?t!==i&&(i.setTileUrlFunction(t.getTileUrlFunction()),"function"==typeof i.setUrls&&"function"==typeof t.getUrls&&i.setUrls(t.getUrls()),i.format_||(i.format_=t.format_),i.getAttributions()||i.setAttributions(t.getAttributions()),i.getTileLoadFunction()===Xh&&i.setTileLoadFunction(t.getTileLoadFunction()),xn(i.getProjection(),t.getProjection())&&(i.tileGrid=t.getTileGrid())):e.setSource(t);const n=e.getSource().getTileGrid();!isFinite(e.getMaxResolution())&&!isFinite(e.getMinZoom())&&n.getMinZoom()>0&&e.setMaxResolution(xF(Math.max(0,n.getMinZoom()-1e-12),n.getResolutions()))}));const i=t.sources[s];let n=e.getSource();(!n||n.get("mapbox-source")!==i)&&(n=lO(i,r,a));const o=e.getSource();return o?n!==o&&(o.getAttributions()||o.setAttributions(n.getAttributions()),o.format_||(o.format_=n.getFormat()),o.url_=n.getUrl()):e.setSource(n),Promise.resolve()}let d,p;const f={},g={};function m(){if(p||t.sprite&&!f)p?(e.setStyle(p),h().then(i).catch(n)):n(new Error("Something went wrong trying to apply style."));else{if(a.projection&&!o){const e=fn(a.projection).getUnits();"m"!==e&&(o=yF.map((t=>t/yi[e])))}let r;const u=e.getSource();u instanceof Wh&&u.format_ instanceof O_&&(r=u.format_.layerName_),p=QF(e,t,l,o,f,g,((e,t=a.webfonts)=>function(e,t="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){if(Be)return e;let i;for(let n=0,o=e.length;n<o;++n){const t=e[n];if(t in NF)continue;NF[t]=!0;const o=oF(t,16).split(" ");i||(i=[]),i.push([o.slice(3).join(" ").replace(/"/g,""),o[1],o[0]])}return i&&(async()=>{await document.fonts.ready;for(let e=0,n=i.length;e<n;++e){const n=i[e],o=n[0];if(zF.includes(o))continue;const r=n[1],s=n[2];if(!(await document.fonts.load(`${s} ${r} 16px "${o}"`)).some((e=>e.family.replace(/^['"]|['"]$/g,"").toLowerCase()===o.toLowerCase()&&e.weight==r&&e.style===s))){const e=t.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",r).replace("{-fontstyle}",s.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",s);if(!document.querySelector('link[href="'+e+'"]')){const t=document.createElement("link");t.href=e,t.rel="stylesheet",document.head.appendChild(t)}}}})(),e}(e,t)),a.getImage,r),e.getStyle()?h().then(i).catch(n):n(new Error(`Nothing to show for source [${s}]`))}}if(t.sprite){const e=function(e,t,i){if("string"==typeof e)return[{id:"default",url:aF(e,t,i)}];for(const n of e)n.url=aF(n.url,t,i);return e}(t.sprite,a.accessToken,r||location.href);d=Be?1:window.devicePixelRatio>=1.5?.5:1;const i=.5==d?"@2x":"";Promise.all(e.map((function(e){const t=new URL(e.url);let o=t.origin+t.pathname+i+".json"+t.search;return new Promise((function(e,i){SF("Sprite",o,a).then(e).catch((function(n){o=t.origin+t.pathname+".json"+t.search,SF("Sprite",o,a).then(e).catch(i)}))})).then((function(o){let r;if(void 0===o&&n(new Error("No sprites found.")),r=t.origin+t.pathname+i+".png"+t.search,a.transformRequest){const e=a.transformRequest(r,"SpriteImage")||r;(e instanceof Request||e instanceof Promise)&&(r=e)}g[e.id]=r;for(const t in o){const i="default"==e.id?t:`${e.id}:${t}`;f[i]=o[t]}})).catch((function(e){n(new Error(`Sprites cannot be loaded: ${o}: ${e.message}`))}))}))).then(m).catch(n)}else m()})).catch(n)}))}(e,i,t,Object.assign({styleUrl:n},r)).then((function(){(function(e,t){function i(){const i=t.get("mapbox-style");if(!i)return;const n=xI(i.layers),o=e.get("mapbox-layers"),r=n.filter((function(e){return o.includes(e.id)})).some((function(e){return!e.layout||!e.layout.visibility||"visible"===e.layout.visibility}));e.get("visible")!==r&&e.setVisible(r)}e.on("change",i),i()})(e,o),l()})).catch(u):l()}else u(new Error("Error accessing data for source "+e.get("mapbox-source")))};e.set("mapbox-layers",t);const h=o.getLayers();-1===h.getArray().indexOf(e)&&h.push(e),e.getSource()?c():e.once("change:source",c)}))}export{c_ as F,ZL as G,BL as I,Bd as K,eb as T,yI as a,U_ as b,Hy as p,hO as v,h_ as z};
