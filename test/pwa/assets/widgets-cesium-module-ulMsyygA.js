import{A as e,T as a,g as t,w as o,b as n,E as i,_ as s,t as l,Y as r,S as c,a as d,c as u,Z as p,J as m,B as v,G as g,K as f,Q as b,d as y,e as w,f as _,v as C,h,i as k,U as S,V as O,k as L,j as A,N as E}from"./xgis-cesium-exp-9TOOiljh.js";import{e as T,_ as I,W as j,O as x,a as W}from"./pages-back-module-Bp_gdyMV.js";import{S as R}from"./pages-system-module-BC4d09-a.js";import{c as M,C as D,P,n as V,s as F}from"./xframelib-exp-BKAIOAJ1.js";import{i as z}from"./Cesium-DDfh73kC-v2OV8yh9.js";import{d as B,o as U,m as N,g as G,r as K,e as H,A as J,u as Y,j as Z,t as q,x as Q,k as X,v as $,f as ee,p as ae,F as te,B as oe,N as ne,z as ie,a as se,C as le,G as re,M as ce,H as de}from"./@vue-exp-CvWX4Ub_.js";import{bi as ue,bR as pe,bW as me,bB as ve}from"./vendor-f-vxzQBV.js";import"./pages-product-module-C_u59JGP.js";const ge=B({setup(){window.XGIS_KEY="B9AE072D2438ABB48815EE96E50E450B",U((async()=>{if(M.CesiumViewer=await async function(){try{const a=new e("cesiumContainer");return a.clock.currentTime=z.JulianDate.fromDate(new Date),a.scene.globe.depthTestAgainstTerrain=!0,a}catch(a){M.Message.err("Cesium Viewer初始化失败！"),M.Logger().error("Cesium Viewer初始化失败",a)}}(),M.CesiumViewer){const e=M.CesiumViewer;!function(e){if(!M.Config.MapExtent||!e)return;const a=M.Config.MapExtent,t=z.Rectangle.fromDegrees(a[0],a[1],a[2],a[3]);z.Camera.DEFAULT_VIEW_FACTOR=.5,z.Camera.DEFAULT_VIEW_RECTANGLE=t,e.camera.setView({destination:t,orientation:{heading:z.Math.toRadians(0),pitch:z.Math.toRadians(-90),roll:0}})}(e),e.setBasicLayer("GD_IMG")}T(R.CesiumWidgetLoaded,"CesiumWidgetLoaded")}))}}),fe={id:"cesiumContainer",class:"xgisViewerContainer"};const be=I(ge,[["render",function(e,a,t,o,n,i){return G(),N("div",fe)}],["__scopeId","data-v-db01f149"]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"})),we=I(B({__name:"RenderStatusWidget",setup(e){const t=K(null);return U((()=>{t.value=M.CesiumViewer})),(e,o)=>t.value?(G(),H(Y(a),{key:0,viewer:t.value},null,8,["viewer"])):J("",!0)}}),[["__scopeId","data-v-026b836f"]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),Ce={class:"compassZoomPanel"},he=I(B({__name:"CompassZoomWidget",setup(e){const a=K(M.CesiumViewer);return U((()=>{a.value=M.CesiumViewer})),(e,n)=>(G(),N("div",Ce,[Z(Y(t),{viewer:a.value},null,8,["viewer"]),Z(Y(o),{viewer:a.value},null,8,["viewer"])]))}}),[["__scopeId","data-v-307c3851"]]),ke=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"})),Se=I(B({__name:"DistanceLegendWidget",setup(e){const a=K(M.CesiumViewer);return U((()=>{a.value=M.CesiumViewer})),(e,t)=>(G(),H(Y(n),{viewer:a.value},null,8,["viewer"]))}}),[["__scopeId","data-v-9fd123fa"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),Le={class:"xgis_layercontrol_menu"},Ae=I(B({__name:"LayerControlMenuWidget",setup(e){function a(){M.LayoutManager?.loadWidget("imageBaseLayerWidget")}function t(){M.LayoutManager?.loadWidget("LayerManageWidget")}let o;function n(){if(o)return void o.removeInputAction(z.ScreenSpaceEventType.LEFT_CLICK);const e=M.CesiumViewer;e&&(o||(o=new z.ScreenSpaceEventHandler(e.scene.canvas)),o.setInputAction((function(a){const t=e.scene.pickPosition(a.position);if(z.defined(t)){const e=z.Cartographic.fromCartesian(t),a="经度: "+z.Math.toDegrees(e.longitude).toFixed(2)+"° 纬度: "+z.Math.toDegrees(e.latitude).toFixed(2)+"° 高度: "+e.height.toFixed(2)+"m";M.Message&&M.Message.info(a)}}),z.ScreenSpaceEventType.LEFT_CLICK))}return(e,o)=>{const i=q("Icon"),s=Q("tooltip");return G(),N("div",Le,[X(Z(i,{icon:"bi:layers-half",width:"24",height:"24",color:"#fff",onClick:a},null,512),[[s,"基础图层",void 0,{right:!0}]]),X(Z(i,{icon:"gala:layer",width:"24",height:"24",color:"#fff",onClick:t},null,512),[[s,"图层管理",void 0,{right:!0}]]),X(Z(i,{icon:"bi:arrow-up-left-circle",width:"24",height:"24",color:"#fff",onClick:n},null,512),[[s,"点位查询",void 0,{right:!0}]])])}}}),[["__scopeId","data-v-70f456a5"]]),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),Te={class:"row q-col-gutter-sm"},Ie={class:"text-center textContent"},je=I(B({__name:"ImageBaseLayerWidget",setup(e,{expose:a}){const t=K("");let o="imageBaseLayerWidget",n="";function s(e){n=e.id}function l(e){o=e.pid,e.pid&&(T(j.WidgetClosed,o),M.LayoutManager?.unloadWidget(o))}function r(e){let a="";return t.value&&e.id===t.value&&(a="cardSelected"),a}U((()=>{M.CesiumViewer&&(t.value=M.CesiumViewer.CurrentBasicID),setTimeout((()=>{const e=M.getLayoutManager(o);e?.changeWidgetVisible(o,!0)}),8e3)}));const c=K(!0);return a({changeVisible:function(e=!1){c.value=e,n&&e&&P.openWindowPanel(n)},isShow:c}),(e,a)=>X((G(),H(Y(D),{isDark:!0,left:"10px",top:"45px",nWidth:"280px",nHeight:"370px",title:"在线影像底图",icon:"img/basicimage/arcgis_img.png",pid:"imageBaseLayerWidget",onLoaded:s,onClose:l},{default:ee((()=>[Z(ue,{style:{height:"100%"}},{default:ee((()=>[ae("div",Te,[(G(!0),N(te,null,oe(Y(i),((e,a)=>(G(),N("div",{class:"col-4",key:a},[Z(pe,{class:ne(["cardContent",r(e)]),onClick:a=>function(e){t.value=e.id,M.CesiumViewer&&M.CesiumViewer.setBasicLayer(e.id)}(e)},{default:ee((()=>[Z(me,{src:e.img,height:"75px"},null,8,["src"]),ae("div",Ie,ie(e.label),1)])),_:2},1032,["class","onClick"])])))),128))])])),_:1})])),_:1},512)),[[$,c.value]])}}),[["__scopeId","data-v-74b0a30e"]]),xe=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"})),We={class:"key-control-panel"},Re=I(B({__name:"KeyControlWidget",setup(e){const a={moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1},t=K(!1),o=le((()=>t.value?"contentPanel":"contentPanel-hide")),n=le((()=>t.value?"ant-design:close-circle-outlined":"ant-design:compress-outlined"));function i(){t.value=!t.value}function s(e){const t=M.CesiumViewer;switch(e.key.toLowerCase()){case"w":a.moveForward=!0;break;case"s":a.moveBackward=!0;break;case"a":a.moveLeft=!0;break;case"d":a.moveRight=!0;break;case"q":a.moveUp=!0;break;case"e":a.moveDown=!0;break;case"+":t?.camera.zoomIn(100);break;case"-":t?.camera.zoomOut(100)}}function l(e){switch(e.key.toLowerCase()){case"w":a.moveForward=!1;break;case"s":a.moveBackward=!1;break;case"a":a.moveLeft=!1;break;case"d":a.moveRight=!1;break;case"q":a.moveUp=!1;break;case"e":a.moveDown=!1}}function r(){const e=M.CesiumViewer;if(e){const t=e.scene.camera,o=1e3;a.moveForward&&t.moveForward(o),a.moveBackward&&t.moveBackward(o),a.moveLeft&&t.moveLeft(o),a.moveRight&&t.moveRight(o),a.moveUp&&t.moveUp(o),a.moveDown&&t.moveDown(o)}}function c(){document.addEventListener("keydown",s,!1),document.addEventListener("keyup",l,!1);const e=M.CesiumViewer;!function(e){const a=e.scene.screenSpaceCameraController;a.enableInputs=!0,a.enableTranslate=!0,a.enableZoom=!0,a.enableRotate=!0,a.enableTilt=!0,a.enableLook=!0}(e),e.clock.onTick.addEventListener(r)}let d=!1;return U((()=>{d=!1,M.CesiumViewer?c():(d=!0,x(R.CesiumWidgetLoaded,c))})),se((()=>{document.removeEventListener("keydown",s,!1),document.removeEventListener("keyup",l,!1),d&&W(R.CesiumWidgetLoaded,c);const e=M.CesiumViewer;if(e){e.scene.canvas.removeAttribute("tabindex"),e.clock.onTick.removeEventListener(r)}})),(e,a)=>{const t=q("Icon"),s=Q("tooltip");return G(),N("div",We,[ae("div",{class:"closePanel",onClick:i},[X(Z(t,{icon:n.value,width:"30",height:"30",color:"#fff"},null,8,["icon"]),[[s,"键盘控制",void 0,{right:!0}]])]),ae("div",{class:ne(o.value)},[...a[0]||(a[0]=[ae("h6",null,"键盘控制说明",-1),ae("p",null,"W/S: 前进/后退",-1),ae("p",null,"A/D: 左移/右移",-1),ae("p",null,"Q/E: 上升/下降",-1),ae("p",null,"+/-: 缩放控制",-1)])],2)])}}}),[["__scopeId","data-v-478aef67"]]),Me=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),De={class:"flightDashboard"},Pe=I(B({__name:"FlightDashboardWidget",setup(e){re((e=>({v5e10da36:a.value,v659e702b:t.value,v5168c0e7:o.value})));const a=K(0),t=K(0),o=K(19);return U((()=>{setInterval((()=>{t.value+=5,a.value+=5,t.value>90&&(t.value=-90),a.value>360&&(a.value=0),o.value-=1,o.value<-19&&(o.value=19)}),1e3)})),(e,a)=>(G(),N("div",De,[...a[0]||(a[0]=[ce('<div id="headDirect" data-v-dbd140f9><div class="container" data-v-dbd140f9><img src="img/heading_yaw.svg" class="headDirectRotate" data-v-dbd140f9></div></div><div class="horizonSlope" data-v-dbd140f9><img src="img/horizon_circle.svg" class="horizonSlopeImg" data-v-dbd140f9><div class="horizonSlopeContainer" data-v-dbd140f9><img src="img/horizon_pointer.svg" class="horizonSlopePointerImg" data-v-dbd140f9></div></div><div class="horizonLine" data-v-dbd140f9><img src="img/horizon_line.svg" class="horizonlineImg" data-v-dbd140f9><div class="horizonCircle" data-v-dbd140f9></div></div>',3)])]))}}),[["__scopeId","data-v-dbd140f9"]]),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),Fe={class:"justify-between toolbar"},ze={class:"clearfix"},Be=["onClick"],Ue=I(B({__name:"Plot3DWidget",setup(e,{expose:a}){const t=K("xwindowWidgetTemplate");let o="";function n(e){o=e.id}function i(e){t.value=e.pid,e.pid&&M.LayoutManager?.unloadWidget(t.value)}const T=K([{name:s.POINT,label:"目标点",img:"Point.png"},{name:s.POLYLINE,label:"折线",img:"Polyline.png"},{name:s.CURVE,label:"曲线",img:"Curve.png"},{name:s.ARC,label:"弧线",img:"ArcLine.png"},{name:s.POLYGON,label:"多边形",img:"Polygon.png"},{name:s.ELLIPSE,label:"椭圆形",img:"Ellipse.png"},{name:s.CIRCLE,label:"圆形",img:"Circle.png"},{name:s.RECT,label:"矩形",img:"RectAngle.png"},{name:s.STRAIGHT_ARROW,label:"直箭头",img:"StraightArrow.png"},{name:s.FINE_ARROW,label:"细直箭头",img:"FineArrow.png"},{name:s.DOUBLE_ARROW,label:"双箭头",img:"DoubleArrow.png"},{name:s.ATTACK_ARROW,label:"进攻方向",img:"AttackArrow.png"},{name:s.TAILED_ATTACK_ARROW,label:"进攻方向（尾）",img:"TailedAttackArrow.png"},{name:s.ASSAULT_DIRECTION,label:"突击方向",img:"AssaultDirection.png"},{name:s.GATHERING_PLACE,label:"集结地",img:"GatheringPlace.png"},{name:s.LUNE,label:"弓形",img:"Arc.png"},{name:s.SECTOR,label:"扇形",img:"Sector.png"},{name:s.CLOSED_CURVE,label:"曲线面",img:"ClosedCurve.png"},{name:s.TRIANGLEFLAG,label:"三角旗",img:"TriangleFlag.png"}]);let I,j,x,W;U((()=>{M.CesiumViewer&&(I=M.CesiumViewer,j=new l(I),W=new r("plot-result"),I.addLayer(W))})),se((()=>{j&&j.destroy()}));const R=K(!0);function B(){x?x.remove():M.Message.warn("当前选中对象为空！")}function H(e){W&&e&&(x=e,x.overlayEvent.on(z.ScreenSpaceEventType.LEFT_CLICK,Q,x),W.addOverlay(e))}function J(e){W&&(x=e,W.addOverlay(e))}function Q(e){j.edit(e.overlay,J)}function ne(){W&&W.clear()}function le(){if(W){const e=W.getOverlays(),a=[];for(const t of e){const e=t._style,o=t.type;switch(o){case"point":const n={style:e,type:o,position:t.position.toObject()};a.push(n);break;case"circle":const i={style:e,type:o,center:t.center.toObject(),radius:t.radius};a.push(i);break;case"ellipse":const s={style:e,type:o,position:t.position.toObject(),semiMajorAxis:t.semiMajorAxis,semiMinorAxis:t.semiMinorAxis,positions:t.positions.map((e=>e.toObject()))};a.push(s);break;case"polygon":case"polyline":const l={style:e,type:o,positions:t.positions.map((e=>e.toObject()))};a.push(l);break;case"billboard":const r={style:e,type:o,position:t.position.toObject(),icon:t.icon};a.push(r);break;default:const c={style:e,type:o,positions:t.positions.map((e=>e.toObject()))};a.push(c)}}V(JSON.stringify(a),"plotResult.json")}}a({changeVisible:function(e=!1){R.value=e,o&&e&&P.openWindowPanel(o)},isShow:R});const re=K(null);function ce(){re.value&&re.value.pickFiles()}async function ue(e){const a=e[0],t=await F.readFilePromise(a,"Text"),o=JSON.parse(t);if(x=void 0,W)for(const n of o){x=void 0;const e=n.style;if(e.material){const a=e.material;e.material=new z.Color(a.red,a.green,a.blue,a.alpha),e.fill=!0}switch(n.type){case"point":const a=new E(n.position);a.setStyle(e),W.addOverlay(a),x=a;break;case"circle":const t=new A(n.center,n.radius);t.setStyle(e),W.addOverlay(t),x=t;break;case"polygon":const o=new L(n.positions);o.setStyle(e),W.addOverlay(o),x=o;break;case"polyline":const i=new O(n.positions);i.setStyle(e),W.addOverlay(i),x=i;break;case"rect":const s=new S(n.positions);s.setStyle(e),W.addOverlay(s),x=s;break;case"billboard":const l=new k(n.position,n.icon);l.setStyle(e),W.addOverlay(l),x=l;break;case"attack_arrow":const r=new h(n.positions);r.setStyle(e),W.addOverlay(r),x=r;break;case"double_arrow":const T=new C(n.positions);T.setStyle(e),W.addOverlay(T),x=T;break;case"fine_arrow":const I=new _(n.positions);I.setStyle(e),W.addOverlay(I),x=I;break;case"tailed_attack_arrow":const j=new w(n.positions);j.setStyle(e),W.addOverlay(j),x=j;break;case"gathering_place":const R=new y(n.positions);R.setStyle(e),W.addOverlay(R),x=R;break;case"curve":const M=new b(n.positions);M.setStyle(e),W.addOverlay(M),x=M;break;case"assault_direction":const D=new f(n.positions);D.setStyle(e),W.addOverlay(D),x=D;break;case"arc":const P=new g(n.positions);P.setStyle(e),W.addOverlay(P),x=P;break;case"straight_arrow":const V=new v(n.positions);V.setStyle(e),W.addOverlay(V),x=V;break;case"lune":const F=new m(n.positions);F.setStyle(e),W.addOverlay(F),x=F;break;case"sector":const z=new p(n.positions);z.setStyle(e),W.addOverlay(z),x=z;break;case"closed_curve":const B=new u(n.positions);B.setStyle(e),W.addOverlay(B),x=B;break;case"triangle_flag":const U=new d(n.positions);U.setStyle(e),W.addOverlay(U),x=U;break;case"ellipse":const N=new c(n.position,n.semiMajorAxis,n.semiMinorAxis,n.positions);N.setStyle(e),W.addOverlay(N),x=N}x&&x.overlayEvent.on(z.ScreenSpaceEventType.LEFT_CLICK,Q,x)}}return(e,a)=>{const t=q("Icon");return G(),N(te,null,[X(Z(Y(D),{top:"10px",left:"10px",nWidth:"500px",nHeight:"300px",title:"XWindowWidget模版",icon:"img/logo.png",hasMax:!0,pid:"widgetID",onLoaded:n,onClose:i},{title:ee((()=>[a[0]||(a[0]=ae("img",{src:"img/drawImg/AttackArrow.png",width:"24",height:"24"},null,-1)),a[1]||(a[1]=ae("span",{class:"paneltitle"},"三维态势标绘",-1)),ae("div",Fe,[ae("span",{title:"导入JSON",onClick:ce},[Z(t,{icon:"system-uicons:import"})]),ae("span",{title:"删除当前",onClick:B},[Z(t,{icon:"mdi-light:delete"})]),ae("span",{title:"清空全部",onClick:ne},[Z(t,{icon:"ant-design:clear-outlined"})]),ae("span",{title:"导出JSON",onClick:le},[Z(t,{icon:"carbon:document-export"})])])])),default:ee((()=>[ae("div",ze,[ae("ul",null,[(G(!0),N(te,null,oe(T.value,((e,a)=>{return G(),N("li",{class:"ol-plot-li",onClick:a=>{return t=e.name,void j.draw(t,H,{});var t}},[ae("span",{class:"pic-li",style:de((t=e,`background: url('img/drawImg/${t.img}') no-repeat`))},null,4),ae("span",null,ie(e.label),1)],8,Be);var t})),256))])])])),_:1},512),[[$,R.value]]),Z(ve,{ref_key:"profileUploader",ref:re,"max-files":1,class:"hidden",accept:".json","field-name":"file",onAdded:ue},null,512)],64)}}}),[["__scopeId","data-v-473fb7e7"]]),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"})),Ge={ChangeCurrentFeature:"ChangeCurrentFeature",UpdateFeatureProperty:"UpdateFeatureProperty",SyncAddFeatures:"SyncAddFeatures"};export{ye as C,Oe as D,Ve as F,xe as I,Me as K,Ee as L,Ge as P,_e as R,ke as a,Ne as b};
