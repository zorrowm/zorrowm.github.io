import{bm as e,bj as a,ca as t,bn as l,bo as n,bp as o,bs as i,bL as s,bG as u,bP as r,by as d,bi as c,bu as p,cq as f,bw as m,bR as v,c5 as g,c6 as y,c7 as b,c8 as h}from"./vendor-f-vxzQBV.js";import{d as _,r as w,t as x,x as C,m as k,g as S,j as M,f as W,k as I,p as L,H as j,q as V,u as A,z as D,A as R,e as P,O as z,o as O,a as U,F as T,B as F,N as B,v as G,a4 as q,G as $,w as E,C as H}from"./@vue-exp-CvWX4Ub_.js";import{s as N}from"./pinia-exp-CCKL78AK.js";import{c as X,j as J,r as Z,l as K,L as Q,D as Y,C as ee,P as ae}from"./xframelib-exp-BKAIOAJ1.js";import{a as te,o as le,c as ne,i as oe}from"./pages-product-module-C_u59JGP.js";import{a as ie,u as se}from"./vue-router-exp-BIFkIkZb.js";import{F as ue,_ as re,O as de,a as ce,f as pe,P as fe}from"./pages-back-module-Bp_gdyMV.js";import{S as me}from"./pages-system-module-BC4d09-a.js";import"./xgis-cesium-exp-9TOOiljh.js";import{i as ve}from"./Cesium-DDfh73kC-v2OV8yh9.js";import{_ as ge}from"./pages-portal-module-BLvUKgvy.js";import{f as ye}from"./widgets-other-module-BdiCRPDL.js";const be={class:"mainHeader"},he={class:"gt-sm row col-3 q-gutter-x-sm justify-around"},_e={class:"title"},we={class:"title"},xe={class:"absolute-center titleInfo"},Ce={class:"gt-sm row col-2 q-gutter-x-sm justify-around"},ke={class:"title"},Se={class:"title"},Me={class:"text-grey-1 q-gutter-x-sm"},We={key:0},Ie={class:"text-h7"},Le=re(_({__name:"HeaderTitleWidget",setup(u){const r=ie(),d=te(),c=le(),{leftCollapsed:p}=N(d),f=e(),m=w(X.Config.UI?.SiteTitle),v=w("admin"),g=w(window.document.documentElement),y=w(d.headerSetting.showCollapseIcon),b=se();function h(){d.toggleCollapse()}const _=()=>{f.dialog({title:"退出登录",message:"您确定要退出登录吗？",cancel:!0}).onOk((()=>{J(),X.Message.msg("成功退出登录"),window.open(window.location.pathname,"_self")})).onCancel((()=>{})).onDismiss((()=>{}))};function O(e){const a="color:#0ecfed";return b.path===e||b.path.indexOf(e)>=0?a:"color:#fff"}function U(){c.toggleMapRoute(r)}return(e,u)=>{const r=x("Icon"),d=x("router-link"),f=C("tooltip"),w=C("media");return S(),k("div",be,[M(s,{class:"justify-between items-end",style:{height:"100%","line-height":"100%"}},{default:W((()=>{return[I((S(),k("div",{class:"leftMapIcon",onClick:U},[M(r,{icon:"ri:exchange-fill",class:"leftMapChangeIcon"})])),[[f,"切换二三维地图"]]),M(a,{class:"lt-md",flat:"",dense:"",round:"",icon:"menu","aria-label":"目录"},{default:W((()=>[M(t,null,{default:W((()=>[M(l,null,{default:W((()=>[M(n,null,{default:W((()=>[M(o,null,{default:W((()=>[M(d,{to:"/back",style:j(O("back"))},{default:W((()=>[...u[0]||(u[0]=[V("数据管理",-1)])])),_:1},8,["style"])])),_:1})])),_:1}),M(n,null,{default:W((()=>[M(o,null,{default:W((()=>[M(d,{to:"/bigscreen",style:j(O("bigscreen"))},{default:W((()=>[...u[1]||(u[1]=[V("飞行场景",-1)])])),_:1},8,["style"])])),_:1})])),_:1}),M(n,null,{default:W((()=>[M(o,null,{default:W((()=>[M(d,{to:"/main/document",style:j(O("/main/document"))},{default:W((()=>[...u[2]||(u[2]=[V("Map2DMaplibre",-1)])])),_:1},8,["style"])])),_:1})])),_:1}),M(n,null,{default:W((()=>[M(o,null,{default:W((()=>[M(d,{to:"/main/user",style:j(O("/main/user"))},{default:W((()=>[...u[3]||(u[3]=[V("用户管理",-1)])])),_:1},8,["style"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),L("div",he,[L("div",_e,[M(d,{to:"/back",style:j(O("back"))},{default:W((()=>[...u[4]||(u[4]=[V("数据管理",-1)])])),_:1},8,["style"])]),L("div",we,[M(d,{to:A(c).currentRoute,style:j(O("bigscreen"))},{default:W((()=>[...u[5]||(u[5]=[V("飞行场景",-1)])])),_:1},8,["to","style"])])]),I((S(),k("div",xe,[V(D(m.value),1)])),[[w,"titlefont.md titlefont2.lt.md"]]),M(i),L("div",Ce,[L("div",ke,[M(d,{to:"/bigscreen/map2d",style:j(O("/main/document"))},{default:W((()=>[...u[6]||(u[6]=[V("Map2DMaplibre",-1)])])),_:1},8,["style"])]),L("div",Se,[M(d,{to:"/main/user",style:j(O("/main/user"))},{default:W((()=>[...u[7]||(u[7]=[V("用户管理",-1)])])),_:1},8,["style"])])]),L("div",Me,[(e="back",b.path.indexOf(e)>=0?(S(),k("span",We,[y.value?(S(),P(r,{key:0,icon:A(p)?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined",onClick:h},null,8,["icon"])):R("",!0)])):R("",!0)),M(ue,{target:g.value,color:"#fff"},null,8,["target"]),L("span",Ie,D(v.value),1),L("span",{title:"退出？",onClick:z(_,["prevent"])},[M(r,{icon:"ant-design:poweroff-outlined"})])])];var e})),_:1})])}}}),[["__scopeId","data-v-a50fc586"]]),je=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"})),Ve={class:"row gt-xs q-ma-auto q-gutter-xs flex-center"},Ae="bottomMenuWidget",De=_({name:Ae,components:{BottomMainMenu:_({__name:"index",props:{data:{},layoutManager:{}},setup(e){const t=e,i=w(t.data),s=ie();function c(e){if(e.children){let a=!1;if(e.children.forEach((e=>{e.selected&&(a=!0)})),a)return" pagemenuActive"}else if(e.selected)return"pagemenuActive";return""}se();const p=w();function f(e,a){const t=e.label;if(!p.value)return p.value=e,void(e.state=a);p.value.label!=t&&(p.value.state=!1),p.value=e,e.state=a}let m;function v(e){if(e.path&&e.path)switch(e.type){case K.Route:e.blank?Q(s,e.path,{}):s.push({path:e.path});break;case K.URL:window.open(e.path,"_blank");break;case K.Action:X.EventBus.emit("IWidgetMenu.Action",e);break;case K.Widget:const a=t.layoutManager;if(m=e,e.selected)e.selected=!1,e.unload?a.unloadWidget(e.path):a.changeWidgetVisible(e.path,!1);else{e.selected=!0;a.isWidgetLoaded(e.path)?a.changeWidgetVisible(e.path,!0):a.loadWidget(e.path)}}}function g(e){if(e){if(e.layoutID===t.layoutManager.getLayoutID()){const a=e.widgetID;if(m&&m.path===a&&!m.selected)return;const t=i.value.length;let l;for(let e=0;e<t;e++){const t=i.value[e];if(t.type===K.Widget){if(t.path===a){l=t;break}if(t.children){const e=t.children.length;for(let n=0;n<e;n++){const e=t.children[n];if(e.path===a){l=e;break}}}if(l)break}}l&&l.selected&&(l.selected=!1)}}}return O((()=>{de(Z.WidgetUnLoadedEvent,g)})),U((()=>{ce(Z.WidgetUnLoadedEvent,g)})),(e,t)=>(S(),k("div",Ve,[(S(!0),k(T,null,F(i.value,((e,t)=>(S(),k(T,{key:e.name},[e.path?(S(),P(a,{key:1,color:"white",flat:"",label:e.name,class:B(e.selected?"pagemenuActive":""),onClick:a=>v(e),onMouseover:a=>f(e,!1)},null,8,["label","class","onClick","onMouseover"])):(S(),P(d,{key:0,"model-value":e.state,"onUpdate:modelValue":a=>e.state=a,color:"white","transition-show":"flip-right","transition-hide":"flip-left",flat:"",label:e.name,class:B(c(e)),onMouseover:a=>f(e,!0)},{default:W((()=>[M(l,{style:{"min-width":"100px"},onMouseover:a=>f(e,!0),onMouseleave:a=>f(e,!1)},{default:W((()=>[(S(!0),k(T,null,F(e.children,((e,a)=>(S(),k(T,{key:e.name},[I((S(),P(n,{clickable:"",class:B(c(e)),onClick:a=>v(e)},{default:W((()=>[M(o,null,{default:W((()=>[V(D(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])),[[u]]),M(r)],64)))),128))])),_:2},1032,["onMouseover","onMouseleave"])])),_:2},1032,["model-value","onUpdate:modelValue","label","class","onMouseover"]))],64)))),128))]))}})},props:{},setup(){const e=w(X.LayoutMap.get("bigScreenLayout")),a=w(!0);return de(Z.WidgetVisibleChanged,(function(e){e.name===Ae&&(a.value=e.visible)})),{isVisible:a,menuSetting:ne,dpLayoutManager:e}}}),Re={ref:"footerMenu",class:"footer"},Pe={class:"layoutfooter"},ze={class:"menuContainer"};const Oe=re(De,[["render",function(e,a,t,l,n,o){const i=x("BottomMainMenu");return I((S(),k("div",Re,[L("div",Pe,[L("div",ze,[M(i,{data:e.menuSetting,layoutManager:e.dpLayoutManager},null,8,["data","layoutManager"])])])],512)),[[G,e.isVisible]])}],["__scopeId","data-v-bd481dda"]]),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"})),Te={class:"footerStatus"},Fe=["href"],Be={class:"copyright"},Ge={class:"fl msginfo"},qe=re(_({name:"Copyright",__name:"StatusWidget",setup(e){const a=w(X.Config.UI?.CopyRight),t=w(""),l=w(X.Config.UI?.WebSite);return O((()=>{pe((e=>{t.value=e}));const e=q(),a=e?.proxy?.$options.id,l=e?.proxy?.$options.layoutID;setTimeout((()=>{a&&X.LayoutMap.get(l)?.unloadWidget(a)}),2e3)})),(e,n)=>(S(),k("div",Te,[L("a",{href:l.value,target:"_blank"},[L("span",Be,D(a.value),1)],8,Fe),L("div",Ge,D(t.value),1)]))}}),[["__scopeId","data-v-58e15dbd"]]),$e=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));const Ee=Object.freeze(Object.defineProperty({__proto__:null,AddLayerItem:function(e,a,t){X.LayerManager.addLayerItem({id:e,name:a},t)},ControlSkyVisible:function(e){e.selected=!e.selected},RemoveLayerItem:function(e){X.LayerManager.removeLayerItem("artificialLayer")}},Symbol.toStringTag,{value:"Module"})),He={class:"menuBar"},Ne=["onClick"],Xe=["src"],Je=re(_({__name:"index",props:{layoutID:{type:String,default:"default"},menuData:{type:Array,default:ne},iconColor:{type:String,default:"#fff"},itemSize:{type:String,default:"50px"}},emits:["itemClick"],setup(e,{emit:a}){$((a=>({v629b9919:e.itemSize+10,d4369300:n.value,v2aca7a1b:e.itemSize})));const t=e,l=a,n=w(ne.length),o=ie(),i=w(new Map);function s(e){switch(l("itemClick",e),e.type){case K.URL:window.open(e.path,"_blank");break;case K.Route:if(e.blank){if(e.path){const a=o.resolve({path:e.path});window.open(a.href,"_blank")}}else e.path&&o.push({path:e.path});break;case K.Action:const a=e.path;a&&Ee[a]&&(Ee[a](e),null!=e.selected&&(e.selected=!e.selected,i.value.set(e.name,e.selected)));break;case K.Widget:if(e.path){const a=X.LayoutMap.get(t.layoutID);if(!a)return void X.Message.warn(`LayoutID:${t.layoutID}的Manager不存在`);u(a,e),e.selected=!e.selected,i.value.set(e.name,e.selected)}else X.Message.warn(`加载${e.name} Widget:缺少WidgetID!`)}}function u(e,a){if(a.path)if(a.selected)a.unload?(X.Logger().info("卸载widget: "+a.path),e.unloadWidget(a.path)):(X.Logger().info("隐藏widget: "+a.path),e.changeWidgetVisible(a.path,!1)),a.children&&a.children.forEach((t=>{t.selected&&(X.Logger().info(`递归控制${a.path}的子Widget:`+t.path),u(e,t),t.selected=!t.selected)}));else{e.isWidgetLoaded(a.path)?(X.Logger().info("显示widget: "+a.path),e.changeWidgetVisible(a.path,!0)):(e.loadWidget(a.path),X.Logger().info("加载Widget："+a.path))}}function r(e){return i.value?.has(e.name)&&i.value.get(e.name)?"menuBarItem active":"menuBarItem"}function d(e){if(e.layoutID===t.layoutID){const a=e.widgetID,l=t.menuData.find((e=>0===e.type&&e.path===a&&0!=e.unload));l&&(l.selected=!1,i.value.delete(l.name))}}return O((()=>{de(Z.WidgetUnLoadedEvent,d)})),U((()=>{ce(Z.WidgetUnLoadedEvent,d)})),(a,t)=>{const l=x("Icon"),n=C("tooltip");return S(),k("ul",He,[(S(!0),k(T,null,F(e.menuData,((a,t)=>(S(),k("li",{key:t,class:B(r(a))},[I((S(),k("span",{onClick:e=>s(a)},[a.icon?(S(),P(l,{key:0,icon:a.icon,color:e.iconColor},null,8,["icon","color"])):a.img?(S(),k("img",{key:1,class:"item-img",src:a.img},null,8,Xe)):(S(),k(T,{key:2},[V(D(a.name),1)],64))],8,Ne)),[[n,a.name,void 0,{bottom:!0}]])],2)))),128))])}}}),[["__scopeId","data-v-3a3f9081"]]);const Ze=re(_({name:"rainWidget",components:{},setup(){let e,a=!1;function t(){return X.CesiumViewer&&(e||(e=X.CesiumViewer)),e}let l=null;const n=()=>{const e=t();l&&e.scene.postProcessStages.remove(l),l=null};function o(){t()&&((e,a)=>{n();const o=new ve.PostProcessStage({name:"hi_rain",fragmentShader:"uniform sampler2D colorTexture;\n        in vec2 v_textureCoordinates;\n        uniform float tiltAngle;\n        uniform float rainSize;\n        uniform float rainWidth;\n        uniform float rainSpeed;\n        float hash(float x){\n           return fract(sin(x*233.3)*13.13);\n        }\n        out vec4 vFragColor;\n       void main(void){\n         float time = czm_frameNumber / rainSpeed;\n         vec2 resolution = czm_viewport.zw;\n         vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n         vec3 c=vec3(1.0,1.0,1.0);\n         float a= tiltAngle;\n         float si=sin(a),co=cos(a);\n         uv*=mat2(co,-si,si,co);\n         uv*=length(uv+vec2(0,4.9))*rainSize + 1.;\n         float v = 1.0 - abs(sin(hash(floor(uv.x * rainWidth)) * 2.0));\n         float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;\n         c*=v*b;\n         vFragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(c,.3), .3);\n       }\n ",uniforms:{tiltAngle:.5,rainSize:.6,rainWidth:e,rainSpeed:a}}),i=t();i.scene.postProcessStages.add(o),i.scene.requestRender(),l=o})(20,60),a&&(a=!1,ce(me.CesiumWidgetLoaded,o))}return O((()=>{t()?o():(a=!0,de(me.CesiumWidgetLoaded,o))})),U((()=>{n()})),{}}}),[["render",function(e,a,t,l,n,o){return S(),k("span")}]]),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));const Qe=re(_({name:"snowWidget",components:{},setup(){let e,a=!1;function t(){return X.CesiumViewer&&(e||(e=X.CesiumViewer)),e}let l=null;const n=()=>{const e=t();l&&e.scene.postProcessStages.remove(l),l=null};function o(){t()&&(e=>{n();const a=new ve.PostProcessStage({name:"hi_snow",fragmentShader:"uniform sampler2D colorTexture;\n     in vec2 v_textureCoordinates;\n     uniform float rainSpeed;\n     float snow(vec2 uv,float scale){\n         float time = czm_frameNumber / rainSpeed;\n         float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;\n         uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;\n         uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;\n         p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);\n         k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\n         return k*w;\n     }\n     out vec4 vFragColor;\n     void main(void){\n         vec2 resolution = czm_viewport.zw;\n         vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n         vec3 finalColor=vec3(0);\n         float c = 0.0;\n         c+=snow(uv,50.)*.0;\n         c+=snow(uv,30.)*.0;\n         c+=snow(uv,10.)*.0;\n         c+=snow(uv,5.);\n         c+=snow(uv,4.);\n         c+=snow(uv,3.);\n         c+=snow(uv,2.);\n         finalColor=(vec3(c));\n         vFragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.3);\n     }\n ",uniforms:{rainSpeed:e}}),o=t();o.scene.postProcessStages.add(a),o.scene.requestRender(),l=a})(90),a&&(a=!1,ce(me.CesiumWidgetLoaded,o))}return O((()=>{t()?o():(a=!0,de(me.CesiumWidgetLoaded,o))})),U((()=>{t()&&n()})),{}}}),[["render",function(e,a,t,l,n,o){return S(),k("span")}]]),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"})),ea=[{name:"name",align:"center",label:"名称",field:"name",style:"width:200px",headerStyle:"width: 200px"},{name:"area",align:"center",label:"地区",field:"region"},{name:"level",align:"center",label:"级别",field:"category",sortable:!0},{name:"rule",align:"center",label:"规则",field:"flyingType"}],aa=w([]);ea.forEach((({name:e})=>{aa.value.push(e)}));const ta=X.Config.ServiceURL.DefaultWebAPI;const la={GetAirportInfo:"/api/Airport/GetAirportInfo",GetAirportDetail:"/api/Airport/GetAirportDetail",GetAirportRuleurls:"/api/Airport/GetAirportRuleurls",GetAirportRuleContent:"/api/Airport/GetAirportRuleContent"},na={class:"column q-ma-md justify-center items-start"},oa={class:"row justify-center items-center searchLine"},ia={class:"typeListPanel"},sa={class:"typeLine"},ua={class:"typeLine"},ra={class:"typeLine"},da={class:"resultTable"},ca={class:"full-width row justify-end"},pa=re(_({__name:"AirportSearchPanelWidget",setup(e,{expose:a}){const t=q(),l=t?.proxy?.$options.id,n=t?.proxy?.$options.layoutID,o=w(l),i=oe(),s=w("A1"),u=w([{label:"A1",value:"A1"},{label:"A2",value:"A2"},{label:"A3",value:"A3"},{label:"B",value:"B"}]),r=w([{label:"跑道型机场",value:"跑道型机场"},{label:"直升机场",value:"直升机场"},{label:"水上机场",value:"水上机场"}]),d=w("跑道型机场"),v=w([{label:"IFR",value:"IFR"},{label:"VFR",value:"VFR"},{label:"IFR/VFR",value:"IFR/VFR"}]),g=w("IFR"),y=w({sortBy:"id",descending:!1,rowsPerPage:0}),b=w(""),h=w(0),_=w(1),C=w(10),k=H((()=>Math.ceil(h.value/C.value))),j=w(""),D=w([]);function R(){b.value,_.value=1,U()}E(_,(e=>{U()})),E(C,(e=>{_.value=1,U()}));const z=w([]);async function U(e=void 0){e&&(e.page&&(_.value=e.page),e.pageSize&&(C.value=e.pageSize));const a=await async function(e,a,t,l,n,o,i,s="json",u){const r=await Y(la.GetAirportInfo,ta,{airportLevel:e,airportType:a,airportRules:t,pageIndex:l,pageSize:n,keyword:o},i,s,void 0,u);return{response:r,data:r?.data}}(s.value,d.value,g.value,_.value,C.value,b.value);a&&200==a.response?.status&&(h.value=a.data.totalCount,z.value=a.data.datas),_.value>k.value&&(_.value=k.value)}let T,F;function B(e){F=e.id}function $(e){if(T=e.pid,e.pid){const e=X.LayoutMap.get(n);e&&e.unloadWidget(T)}}async function N(e,a,t){i.name=a.name;const l=X.LayoutMap.get(n);l&&l.loadWidget("AirportInfoPanelWidget")}O((()=>{}));const J=w(!0);return a({changeVisible:function(e=!1){J.value=e,F&&e&&ae.openWindowPanel(F)},isShow:J}),(e,a)=>{const t=x("Icon");return I((S(),P(A(ee),{isDark:!0,left:"10px",top:"45px",nWidth:"440px",nHeight:"490px",pid:o.value,title:"通用机场资料查询",onLoaded:B,onClose:$},{default:W((()=>[M(c,{class:"fit"},{default:W((()=>[L("div",na,[L("div",oa,[M(p,{class:"inputSearch",outlined:"",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),placeholder:"输入名称模糊查询",dense:!0},null,8,["modelValue"]),L("div",{class:"searchBtn",onClick:R},[M(t,{icon:"ep:search"}),a[8]||(a[8]=V(" 搜索 ",-1))])]),L("div",ia,[L("div",sa,[a[9]||(a[9]=L("div",null,"级别：",-1)),M(f,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value=e),"toggle-color":"primary",options:u.value},null,8,["modelValue","options"])]),L("div",ua,[a[10]||(a[10]=L("div",null,"类型：",-1)),M(f,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e),"toggle-color":"primary",options:r.value},null,8,["modelValue","options"])]),L("div",ra,[a[11]||(a[11]=L("div",null,"飞行规则：",-1)),M(f,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value=e),"toggle-color":"primary",options:v.value},null,8,["modelValue","options"])])]),L("div",da,[M(m,{class:"fit sticky-header-table",selected:D.value,"onUpdate:selected":a[6]||(a[6]=e=>D.value=e),dense:e.$q.screen.lt.md,separator:"cell",flat:"",bordered:"",rows:z.value,filter:j.value,columns:A(ea),"row-key":"name","visible-columns":A(aa),pagination:y.value,"onUpdate:pagination":a[7]||(a[7]=e=>y.value=e),onRowClick:N},{bottom:W((()=>[L("div",ca,[M(fe,{"rows-number":h.value,page:_.value,"onUpdate:page":a[4]||(a[4]=e=>_.value=e),pageSize:C.value,"onUpdate:pageSize":a[5]||(a[5]=e=>C.value=e),pages:k.value},null,8,["rows-number","page","pageSize","pages"])])])),_:1},8,["selected","dense","rows","filter","columns","visible-columns","pagination"])])])])),_:1})])),_:1},8,["pid"])),[[G,J.value]])}}}),[["__scopeId","data-v-4a8b11ce"]]),fa=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"})),ma={class:"q-gutter-y-md"},va={key:0},ga={class:"fieldLabel"},ya={class:"fieldValue"},ba=re(_({__name:"AirportInfoPanelWidget",setup(e,{expose:i}){$((e=>({v39cea368:f.value})));const s=q(),u=s?.proxy?.$options.id,d=s?.proxy?.$options.layoutID,p=w(u),f=w("600px"),m=oe(),_=["机场名称","机场分类","机场类型","磁差","运行时间","飞行种类","细则","电话","经度","纬度"],x=w(""),C=w("basic"),j=w(void 0),V=w([]);let z,U;function B(e){U=e.id}function H(e){if(z=e.pid,e.pid){const e=X.LayoutMap.get(d);e&&e.unloadWidget(z)}}E((()=>m.name),(e=>{K()}));let N="";function J(e){if(e){if(e===N)return;Z.value="",N=e,async function(e,a,t="json",l){const n=await Y(la.GetAirportRuleContent,ta,{path:e},a,t,void 0,l);return{response:n,data:n?.data}}(e,void 0,"blob").then((e=>{if(200===e.response.status){const a=new Blob([e.data],{type:e.data.type}),t=window.URL.createObjectURL(a);Z.value=t}else X.Message.warn("获取细则文件失败！")}))}}const Z=w("");async function K(){const e=m.name;x.value=e,async function(e,a,t="json",l){const n=await Y(la.GetAirportRuleurls,ta,{name:e},a,t,void 0,l);return{response:n,data:n?.data}}(e).then((e=>{if(200===e.response.status){const a=e.data;V.value=a,a&&a.length>0&&J(a[0])}else V.value=[]}));const a=await async function(e,a,t="json",l){const n=await Y(la.GetAirportDetail,ta,{name:e},a,t,void 0,l);return{response:n,data:n?.data}}(e);if(a&&200==a.response?.status){const e=a.data;j.value=e;const t=e["经度"],l=e["纬度"];if(X.XMap&&X.XMap.flyTo({center:[t,l],zoom:11,essential:!0}),X.CesiumViewer){const e=X.CesiumViewer.GetHeightByZoom(11);X.CesiumViewer.flyToPosition([t,l,e])}}}O((()=>{K()}));const Q=w(!0);return i({changeVisible:function(e=!1){Q.value=e,U&&e&&ae.openWindowPanel(U)},isShow:Q}),(e,i)=>I((S(),P(A(ee),{"has-max":!0,isDark:!0,left:"1250px",top:"45px",nWidth:"600px",nHeight:f.value,pid:p.value,title:x.value,onLoaded:B,onClose:H},{default:W((()=>[M(c,{class:"fit"},{default:W((()=>[L("div",ma,[M(v,null,{default:W((()=>[M(g,{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=e=>C.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:W((()=>[M(y,{name:"basic",label:"基本信息"}),M(y,{name:"detail",label:"机场细则"})])),_:1},8,["modelValue"]),M(r),M(b,{modelValue:C.value,"onUpdate:modelValue":i[1]||(i[1]=e=>C.value=e),animated:"",class:"tabContent"},{default:W((()=>[M(h,{name:"basic"},{default:W((()=>[j.value?(S(),k("ul",va,[(S(),k(T,null,F(_,(e=>L("li",null,[L("div",ga,D(e)+":",1),L("div",ya,D(j.value[e]),1)]))),64))])):R("",!0)])),_:1}),M(h,{name:"detail"},{default:W((()=>[M(a,{class:"",flat:"",dense:"",round:"",icon:"list","aria-label":"文件列表"},{default:W((()=>[M(t,null,{default:W((()=>[M(l,null,{default:W((()=>[(S(!0),k(T,null,F(V.value,((e,a)=>(S(),P(n,{key:a},{default:W((()=>[M(o,{onClick:a=>J(e)},{default:W((()=>[L("div",null,D(e),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),Z.value?(S(),P(ge,{key:0,"pdf-src":Z.value},null,8,["pdf-src"])):R("",!0)])),_:1}),M(h,{name:"area"},{default:W((()=>[...i[2]||(i[2]=[L("div",{class:"text-h6"},"本场空域",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1})])),_:1},8,["nHeight","pid","title"])),[[G,Q.value]])}}),[["__scopeId","data-v-beb0f444"]]),ha=Object.freeze(Object.defineProperty({__proto__:null,default:ba},Symbol.toStringTag,{value:"Module"})),_a=[{name:"2d地图工具",index:1,icon:"gis:globe-gear",path:"map2dMenuWidget",type:K.Widget,unload:!0,children:[{name:"量算工具",icon:"gis:measure",path:"measureToolWidget",type:K.Widget,unload:!0},{name:"绘制工具",path:"drawToolBarWidget",icon:"material-symbols:draw-outline",type:K.Widget,unload:!0},{name:"态势标绘",path:"plotMapWidget",icon:"clarity:scatter-plot-outline-alerted",type:K.Widget,unload:!0},{name:"在线底图管理",path:"basicLayerManagerWidget",icon:"ic:baseline-layers",type:K.Widget,unload:!0}]}],wa=["id"],xa=_({__name:"Map2dMenuBarWidget",setup(e,{expose:a}){const t=w([]),l=w(""),n=q(),o=n?.proxy?.$options.id,i=n?.proxy?.$options.layoutID,s=w(o);O((()=>{l.value=i;const e=ye(_a,o);e&&t.value.push(...e.children)}));const u=w(!0);return a({changeVisible:function(e=!1){u.value=e},isShow:u}),(e,a)=>(S(),k("div",{id:s.value},[I(M(Je,{menuData:t.value,layoutID:l.value,class:"currentChildMenu"},null,8,["menuData","layoutID"]),[[G,u.value]])],8,wa))}}),Ca=Object.freeze(Object.defineProperty({__proto__:null,default:xa},Symbol.toStringTag,{value:"Module"}));export{fa as A,Ue as B,Je as C,je as H,Ca as M,Ke as R,$e as S,Ye as a,ha as b};
