import{ac as e}from"./xframelib-exp-Di_VXkdF.js";import{d as o,r as t,m as n,p as s,q as a,z as l,g as i}from"./@vue-exp-DqB3u2UM.js";import"./vendor-Cf1_rMTi.js";import"./lottie-web-exp-8BOGrbHZ.js";import"./monaco-editor-exp-BhX-N9pZ.js";import"./quasar-exp-v4VmEynb.js";import"./axios-exp-DKFWaZHT.js";import"./@iconify/vue-exp-BGURBw_G.js";import"./@microsoft/signalr-exp-DcGFeIh9.js";const r={class:"q-pa-md q-gutter-md"},u="3a491563ee764790a44c0e77d8b15a4e",d=o({__name:"BigFileDownload",setup(o){const d=t(""),p=new e(u,"https://file.gis.digsur.com/api/Downloads/DownloadFile",10);async function c(){const e=await p.getIFileMeta();if(null===e){const e=await p.queryDownloadFileMeta("https://file.gis.digsur.com/api/Downloads/GetDownloadFileInfo","",{key:u,name:"test.tif"});await p.init(e)}else await p.init(e);p.download()}function m(){p.pause()}function g(){p.restart()}function w(){p.delete()}return p.on("downloadProgress",(e=>{const o=document.getElementById("downloadProgress");o&&(o.value=e)})),p.on("saveProgress",(e=>{const o=document.getElementById("saveProgress");o&&(o.value=e)})),p.on("success",(()=>{const e=document.getElementById("downloadProgress");e&&(e.value=100)})),p.on("info",(e=>{d.value=e})),p.on("error",(e=>{})),(e,o)=>(i(),n("div",r,[o[0]||(o[0]=s("div",{class:"text-center text-bold"},"大文件分片下载",-1)),s("button",{onClick:c},"开始分段下载"),s("span",null,l(d.value),1),o[1]||(o[1]=s("br",null,null,-1)),o[2]||(o[2]=s("input",{type:"range",id:"downloadProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),o[3]||(o[3]=a(" 下载进度 ",-1)),o[4]||(o[4]=s("br",null,null,-1)),o[5]||(o[5]=s("input",{type:"range",id:"saveProgress",value:"0",min:"0",max:"100",style:{width:"500px"}},null,-1)),o[6]||(o[6]=a(" 输出文件进度 ",-1)),o[7]||(o[7]=s("br",null,null,-1)),s("button",{onClick:m},"暂停"),s("button",{onClick:g},"重启"),s("button",{onClick:w},"清空缓存")]))}});export{d as default};
